uint64_t sub_2366D22DC(uint64_t a1, int *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = a4;
  v277 = a3;
  v324[0] = 0;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v275);
  v11 = *a2;
  v12 = a2[2];
  v292 = *(a2 + 2);
  v296 = *(a2 + 3);
  v312 = *(a2 + 5);
  v309 = *(a2 + 6);
  v282 = *(a2 + 19);
  v288 = *(a2 + 18);
  v320 = *(a2 + 15);
  v322 = *(a2 + 16);
  v13 = *(a1 + 100);
  v14 = *(a1 + 100);
  v15 = *(a1 + 128);
  v22 = sub_2366E2AB8(a1, v12, v16, v17, v18, v19, v20, v21);
  v319 = a2;
  v23 = a2;
  v24 = v22;
  v308 = v15;
  sub_2366ED9BC(v23, v13, v15, v22);
  sub_2366ED558(v12, v24, *(a1 + 112));
  v32 = v31;
  v318 = v8;
  v295 = a1;
  v310 = v12;
  v321 = v12;
  if (v8 == 2)
  {
    sub_2366E7408(v12, *(a1 + 112), v24);
  }

  else if (v12 >= 1)
  {
    v33 = *(a1 + 112);
    v34 = v12;
    v35 = v24;
    do
    {
      v36 = *v33++;
      v37 = v36;
      if (*v35 > v36)
      {
        v37 = *v35;
      }

      *v35++ = v37;
      --v34;
    }

    while (v34);
  }

  v38 = v14 * v12;
  v290 = sub_2366E2AB8(a1, v14 * v321, v25, v26, v27, v28, v29, v30);
  v311 = sub_2366E2AB8(a1, v14 * v321, v39, v40, v41, v42, v43, v44);
  if (v13 >= 1)
  {
    v50 = 0;
    v51 = 0;
    v52 = 4 * v310;
    v53 = v311;
    v54 = v290;
    do
    {
      if (v321 >= 1)
      {
        v55 = (*(a1 + 120) + v50);
        v56 = *(v319 + 56);
        v57 = v310;
        v58 = v24;
        v59 = v53;
        v60 = v54;
        do
        {
          v61 = *v55++;
          v62 = v61;
          v63 = *v58++;
          *v59++ = (v63 * (v62 * *v56));
          v64 = *v56++;
          *v60++ = ((v62 * v64) * 0.2);
          --v57;
        }

        while (v57);
      }

      ++v51;
      v54 = (v54 + v52);
      v53 = (v53 + v52);
      v50 += v52;
    }

    while (v51 != v13);
  }

  v306 = v24;
  v293 = sub_2366E2AB8(a1, v11, v310, v45, v46, v47, v48, v49);
  v71 = sub_2366E2AB8(a1, v13, v65, v66, v67, v68, v69, v70);
  v323 = sub_2366E736C(v13, 2, v71);
  v278 = v13;
  if (*(a1 + 40))
  {
    sub_2366B9BD0(a1, v319, v72, v73, v74, v75, v76, v77);
    v78 = *(a1 + 296);
    v283 = *(a1 + 304);
    v79 = sub_2366E736C(v13, 0, *(a1 + 320));
  }

  else
  {
    v78 = 0;
    v79 = 0;
    v283 = 0;
  }

  v80 = sub_2366E2AB8(a1, v11, v72, v73, v74, v75, v76, v77);
  v81 = sub_2366E736C(v11, 3, v80);
  v88 = sub_2366E2AB8(a1, v11, v82, v83, v84, v85, v86, v87);
  v89 = sub_2366E736C(v11, -1, v88);
  v302 = sub_2366E2AB8(a1, v11, v90, v91, v92, v93, v94, v95);
  if (*(a1 + 44))
  {
    v102 = sub_2366E2AB8(a1, v11, v96, v97, v98, v99, v100, v101);
    v286 = sub_2366E736C(v11, 0, v102);
    v285 = sub_2366E2AB8(a1, v11, v103, v104, v105, v106, v107, v108);
    v115 = sub_2366E2AB8(a1, v11, v109, v110, v111, v112, v113, v114);
    v284 = sub_2366E736C(v11, 0, v115);
  }

  else
  {
    v285 = 0;
    v286 = 0;
    v284 = 0;
  }

  v307 = v81;
  v301 = v89;
  if ((*(a1 + 8) & 8) != 0)
  {
    if (v8 == 1)
    {
      v116 = "GRC";
    }

    else
    {
      v116 = "GBC";
    }

    v117 = sub_2366E7120(v38, v322, 1);
    v118 = sub_2366E70E8(v38, v322, 1);
    v119 = sub_2366E70E8(v38, v311, 1);
    v120 = sub_2366ED820(v319, v13, v308);
    printf("%s: [%6d %6d %6d], Bal: %5.3f(%.3f), Nv-Nb[%6d %6d], Cut: %6d, (%d)", v116, v117, v118, v119, v120, v32, *v319, *(v319 + 136), *(v319 + 112), v277);
    if (*(v295 + 40))
    {
      v121 = sub_2366E70E8(v13, v78, 1);
      v122 = sub_2366E71E0(v13, v78, 1);
      printf(", Doms: [%3d %4d]", v121, v122);
    }

    putchar(10);
    v89 = v301;
  }

  v313 = sub_2366E76B8(v11);
  v130 = v295;
  if (v277 >= 1)
  {
    v280 = 0;
    v276 = v38;
    while (v318 != 2 || !sub_2366DD250(v130, v319, 0.0))
    {
      v279 = *(v319 + 112);
      v131 = *(v319 + 136);
      if (*(v130 + 40))
      {
        v324[0] = sub_2366E70E8(v278, v78, 1);
      }

      v132 = v131 + 3;
      if (v131 >= 0)
      {
        v132 = v131;
      }

      sub_2366C8A48(v131, v293, v132 >> 2, 1, (v130 + 68));
      if (v131 < 1)
      {
        v289 = 0;
      }

      else
      {
        for (i = 0; i != v131; ++i)
        {
          v134 = *(v282 + 4 * v293[i]);
          v135 = (*(v319 + 176) + 16 * v134);
          v136 = v135[2];
          if (v136 < 1)
          {
            v137 = 0.0;
          }

          else
          {
            v137 = v135[1] / sqrt(v136);
          }

          v138 = v137 - *v135;
          sub_2366E7BC4(v313, *(v282 + 4 * v293[i]), v138);
          *(v81 + 4 * v134) = 1;
          v302[i] = v134;
          *(v89 + 4 * v134) = i;
        }

        v289 = v131;
      }

      v139 = sub_2366E7E64(v313);
      v140 = v310;
      LODWORD(v141) = v321;
      if (v139 == -1)
      {
        v281 = 0;
        v287 = v131;
        goto LABEL_215;
      }

      v281 = 0;
      v142 = 0;
      v287 = v131;
      for (j = v139; j != -1; j = sub_2366E7E64(v313))
      {
        v305 = v142;
        *(v81 + 4 * j) = 2;
        v144 = (*(v319 + 176) + 16 * j);
        v303 = *(v130 + 272);
        v145 = v144[3];
        v317 = *(v320 + 4 * j);
        if (v318 == 1)
        {
          if (*v144 < 1)
          {
            goto LABEL_50;
          }

          v146 = v296 + 4 * j * v141;
          v147 = v317 * v141;
        }

        else
        {
          v146 = v296 + 4 * j * v140;
          v147 = *(v320 + 4 * j) * v141;
        }

        if (!sub_2366ED618(v141, -1, v146, &v322[v147], &v290[v147]))
        {
          goto LABEL_208;
        }

LABEL_50:
        if (*(v130 + 44) && sub_2366D5588(j, v292, v312, v320, v286, v285, v284))
        {
          goto LABEL_208;
        }

        v148 = v323;
        if (*(v130 + 40) && v144[2] >= 1)
        {
          v149 = 0;
          do
          {
            v150 = *(v303 + 8 * v145 + 8 * v149);
            *(v323 + 4 * v150) = 0;
            LODWORD(v151) = v78[v150];
            if (v151 >= 1)
            {
              v152 = 0;
              v153 = *(v283 + 8 * v150);
              do
              {
                *(v79 + 4 * *(v153 + 4 * v152++)) = 1;
                v151 = v78[v150];
              }

              while (v152 < v151);
            }

            v154 = v144[2];
            if (v154 < 1)
            {
              goto LABEL_69;
            }

            v155 = 0;
            v156 = (v303 + 8 * v145);
            v157 = v149;
            do
            {
              if (v157)
              {
                v158 = *v156;
                if (!*(v79 + 4 * v158))
                {
                  if (v78[v158] >= v324[0])
                  {
                    v155 = v324[0];
                    if (!v324[0])
                    {
                      goto LABEL_67;
                    }

LABEL_66:
                    if (v155 + v151 <= v324[0])
                    {
                      goto LABEL_67;
                    }

                    goto LABEL_71;
                  }

                  ++v155;
                }
              }

              --v157;
              v156 += 2;
              --v154;
            }

            while (v154);
            if (v155)
            {
              goto LABEL_66;
            }

LABEL_67:
            if (v155)
            {
              v159 = 1;
              goto LABEL_70;
            }

LABEL_69:
            v159 = 2;
LABEL_70:
            *(v323 + 4 * v150) = v159;
            LODWORD(v151) = v78[v150];
LABEL_71:
            if (v151 >= 1)
            {
              v160 = 0;
              v161 = *(v283 + 8 * v150);
              do
              {
                *(v79 + 4 * *(v161 + 4 * v160++)) = 0;
              }

              while (v160 < v78[v150]);
            }

            ++v149;
          }

          while (v149 < v144[2]);
        }

        v162 = v144[2];
        v291 = j;
        v294 = v303 + 8 * v145;
        if (v318 == 1)
        {
          if (v162 < 1)
          {
LABEL_93:
            v130 = v295;
            goto LABEL_207;
          }

          v163 = (v296 + 4 * j * v141);
          v164 = v162 - 2;
          v298 = 8 * v145;
          v165 = (v303 + 8 * v145 + 8 * v162 - 4);
          v166 = v162 - 1;
          while (1)
          {
            v167 = *(v165 - 1);
            if (*(v148 + 4 * v167))
            {
              if (*v165 >= *v144)
              {
                v168 = sub_2366ED5D4(v310, 1, v163, &v322[v167 * v310], &v311[v167 * v310]);
                v148 = v323;
                if (v168)
                {
                  break;
                }
              }
            }

            --v162;
            --v164;
            v165 -= 2;
            --v166;
            if (v162 + 1 <= 1)
            {
              goto LABEL_92;
            }
          }

          v186 = v164 + 1;
          if (v162 >= 2)
          {
            v187 = (v303 + v298 + 8 * v164 + 4);
            v188 = v294;
            v315 = v163;
            while (1)
            {
              v189 = *(v187 - 1);
              if (*(v148 + 4 * v189))
              {
                break;
              }

LABEL_116:
              --v166;
              v187 -= 2;
              v188 = v294;
              if (v166 <= 0)
              {
                goto LABEL_119;
              }
            }

            v190 = *v187;
            v191 = v188 + 8 * v186;
            v194 = *(v191 + 4);
            v193 = (v191 + 4);
            v192 = v194;
            if (*v187 <= v194)
            {
LABEL_113:
              if (v190 != v192)
              {
                goto LABEL_116;
              }

              v198 = v186;
              v199 = sub_2366ED780(v321, v163, v306, 1, &v322[v167 * v321], (v308 + 4 * v167 * v321), 1, &v322[v189 * v310], (v308 + 4 * v189 * v310));
              v186 = v198;
              v148 = v323;
              if (!v199)
              {
                goto LABEL_116;
              }
            }

            else
            {
              v195 = v163;
              v196 = v186;
              v197 = sub_2366ED5D4(v321, 1, v195, &v322[v189 * v321], &v311[v189 * v321]);
              v186 = v196;
              v163 = v315;
              v148 = v323;
              if (!v197)
              {
                v190 = *v187;
                v192 = *v193;
                goto LABEL_113;
              }
            }

            v186 = (v166 - 1);
            v167 = v189;
            goto LABEL_116;
          }

          v188 = v294;
LABEL_119:
          v182 = v186;
          v200 = *(v188 + 8 * v186 + 4);
          if (v200 > *v144)
          {
            v81 = v307;
            goto LABEL_123;
          }

          v140 = v310;
          LODWORD(v141) = v321;
          v81 = v307;
          if (v200 != *v144)
          {
            goto LABEL_213;
          }

          if (sub_2366ED780(v310, v163, v306, -1, &v322[(v317 * v321)], (v308 + 4 * (v317 * v321)), 1, &v322[v167 * v321], (v308 + 4 * v167 * v321)))
          {
LABEL_123:
            v185 = v317;
            v183 = v291;
            goto LABEL_124;
          }

          v183 = v291;
          if ((v305 & 1) != 0 || (v185 = v317, *(v323 + 4 * v167) != 2))
          {
LABEL_213:
            v130 = v295;
            goto LABEL_208;
          }

LABEL_124:
          v304 = (v294 + 8 * v182);
          v201 = v304[1];
          v202 = *v144;
          v203 = *v144 - v201 + *(v319 + 112);
          *(v319 + 112) = v203;
          if ((*(v295 + 8) & 0x20) != 0)
          {
            printf("\t\tMoving %6d to %3d. Gain: %4d. Cut: %6d\n", v183, v167, v201 - v202, v203);
            v185 = v317;
          }

          v300 = v183;
          v316 = (v292 + 4 * v183);
          if (*(v295 + 40))
          {
            sub_2366B9EAC(v295, v317, v167, *v144 - v304[1], v324);
            v185 = v317;
            v204 = v316[1];
            v205 = *v316;
            if (v205 < v204)
            {
              do
              {
                v206 = *(v312 + 4 * v205);
                v207 = *(v320 + 4 * v206);
                if (v207 != v185 && v207 != v167)
                {
                  sub_2366B9EAC(v295, v317, *(v320 + 4 * v206), -*(v309 + 4 * v205), v324);
                  v183 = v291;
                  v81 = v307;
                  sub_2366B9EAC(v295, v167, v207, *(v309 + 4 * v205), v324);
                  v185 = v317;
                  v204 = v316[1];
                }

                ++v205;
              }

              while (v205 < v204);
            }
          }

          v209 = (v296 + 4 * v183 * v310);
          v141 = v321;
          v210 = v185;
          sub_2366E7208(v321, 1, v209, 1, &v322[v167 * v321], 1);
          sub_2366E7208(v141, -1, v209, 1, &v322[(v210 * v141)], 1);
          *(v320 + 4 * v300) = v167;
          v211 = v304[1];
          v212 = *v144;
          v213 = *v144 - v211 + v144[1];
          *v144 = v211;
          v144[1] = v213;
          v304[1] = v212;
          if (v212)
          {
            *v304 = v210;
          }

          else
          {
            v214 = v144[2] - 1;
            v144[2] = v214;
            *v304 = *(v294 + 8 * v214);
          }

          v215 = v210;
          v216 = *(v288 + 4 * v300);
          v217 = v144[1];
          v130 = v295;
          if (v318 == 1)
          {
            v218 = *v144;
            if (v216 == -1)
            {
              goto LABEL_141;
            }

            if (v217 >= v218)
            {
              goto LABEL_148;
            }

            v219 = *(v282 + 4 * (v287 - 1));
            *(v282 + 4 * v216) = v219;
            *(v288 + 4 * v219) = *(v288 + 4 * v300);
            *(v288 + 4 * v300) = -1;
            v218 = *v144;
            v217 = v144[1];
            --v287;
LABEL_141:
            if (v217 < v218)
            {
LABEL_148:
              ++v281;
              v221 = *v316;
              if (v221 >= v316[1])
              {
                v140 = v310;
                goto LABEL_208;
              }

              while (2)
              {
                v222 = *(v312 + 4 * v221);
                v223 = *(v320 + 4 * v222);
                v224 = v222;
                v225 = (*(v319 + 176) + 16 * v222);
                v227 = v225[2];
                v226 = v225[3];
                if (v226 == -1)
                {
                  v228 = v221;
                  v229 = v167;
                  v230 = *(v320 + 4 * v222);
                  v231 = v130;
                  v232 = v130;
                  v233 = v225[2];
                  v226 = sub_2366E2AD8(v231, *(v292 + 4 * v222 + 4) - *(v292 + 4 * v222) + 1);
                  v223 = v230;
                  v167 = v229;
                  v221 = v228;
                  v227 = v233;
                  v130 = v232;
                  v224 = v222;
                  v215 = v317;
                  v225[2] = 0;
                  v225[3] = v226;
                }

                v234 = *(v130 + 272);
                v235 = v234 + 8 * v226;
                if (v223 == v215)
                {
                  v239 = *v225;
                  v240 = v225[1] + *(v309 + 4 * v221);
                  v225[1] = v240;
                  v241 = v239 - *(v309 + 4 * v221);
                  *v225 = v241;
                  if (v318 == 1)
                  {
                    if (v240 < v241)
                    {
                      goto LABEL_173;
                    }
                  }

                  else if (v240 < 1)
                  {
                    goto LABEL_173;
                  }

                  if (*(v288 + 4 * v224) == -1)
                  {
                    *(v282 + 4 * v287) = v222;
                    *(v288 + 4 * v224) = v287++;
                  }

LABEL_173:
                  LODWORD(v244) = v225[2];
                }

                else
                {
                  if (v223 != v167)
                  {
                    goto LABEL_165;
                  }

                  v236 = v225[1];
                  v237 = *v225 + *(v309 + 4 * v221);
                  *v225 = v237;
                  v238 = v236 - *(v309 + 4 * v221);
                  v225[1] = v238;
                  if (v318 == 1)
                  {
                    if (v238 >= v237)
                    {
                      goto LABEL_165;
                    }
                  }

                  else if (v238 > 0)
                  {
                    goto LABEL_165;
                  }

                  v242 = (v288 + 4 * v224);
                  if (*v242 != -1)
                  {
                    v243 = *(v282 + 4 * (v287 - 1));
                    *(v282 + 4 * *v242) = v243;
                    *(v288 + 4 * v243) = *v242;
                    *v242 = -1;
                    --v287;
                  }

LABEL_165:
                  v244 = v225[2];
                  v245 = v244 - 1;
                  if (v244 >= 1)
                  {
                    v246 = (v234 + 8 * v226 + 4);
                    while (*(v246 - 1) != v215)
                    {
                      v246 += 2;
                      if (!--v244)
                      {
                        goto LABEL_173;
                      }
                    }

                    v247 = *(v309 + 4 * v221);
                    if (*v246 == v247)
                    {
                      v225[2] = v245;
                      *(v246 - 1) = *(v235 + 8 * v245);
                    }

                    else
                    {
                      *v246 -= v247;
                    }

                    goto LABEL_173;
                  }
                }

                if (v223 != v167)
                {
                  if (v244 < 1)
                  {
                    LODWORD(v249) = 0;
                  }

                  else
                  {
                    v249 = 0;
                    v250 = (v234 + 8 * v226 + 4);
                    while (*(v250 - 1) != v167)
                    {
                      ++v249;
                      v250 += 2;
                      if (v244 == v249)
                      {
                        goto LABEL_195;
                      }
                    }

                    *v250 += *(v309 + 4 * v221);
                  }

                  if (v249 == v244)
                  {
LABEL_195:
                    v254 = (v235 + 8 * v244);
                    *v254 = v167;
                    v254[1] = *(v309 + 4 * v221);
                    LODWORD(v244) = v244 + 1;
                    v225[2] = v244;
                  }

                  if (v223 != v215 && v227 == v244)
                  {
                    goto LABEL_205;
                  }
                }

                if (v244 < 1)
                {
                  v248 = 0.0;
                }

                else
                {
                  v248 = v225[1] / sqrt(v244);
                }

                v251 = *v225;
                v252 = v248 - *v225;
                v253 = *(v307 + 4 * v224);
                if (v318 == 1)
                {
                  if (v253 != 3)
                  {
                    if (v253 != 1)
                    {
                      goto LABEL_205;
                    }

                    if (v225[1] < v251)
                    {
LABEL_203:
                      sub_2366E7C30(v313, v222);
                      *(v307 + 4 * v224) = 3;
                      v255 = v302[v289 - 1];
                      v302[*(v301 + 4 * v224)] = v255;
                      *(v301 + 4 * v255) = *(v301 + 4 * v224);
                      *(v301 + 4 * v224) = -1;
                      --v289;
LABEL_204:
                      v215 = v317;
LABEL_205:
                      if (++v221 >= v316[1])
                      {
                        goto LABEL_206;
                      }

                      continue;
                    }

LABEL_191:
                    sub_2366E7D60(v313, v222, v252);
                    goto LABEL_204;
                  }

                  if (v225[1] < v251)
                  {
                    goto LABEL_205;
                  }
                }

                else
                {
                  if (v253 != 3)
                  {
                    if (v253 != 1)
                    {
                      goto LABEL_205;
                    }

                    if (v225[1] < 1)
                    {
                      goto LABEL_203;
                    }

                    goto LABEL_191;
                  }

                  if (v225[1] < 1)
                  {
                    goto LABEL_205;
                  }
                }

                break;
              }

              sub_2366E7BC4(v313, v222, v252);
              v215 = v317;
              *(v307 + 4 * v224) = 1;
              v302[v289] = v222;
              *(v301 + 4 * v224) = v289++;
              goto LABEL_205;
            }
          }

          else
          {
            if (v216 != -1)
            {
              if (v217 > 0)
              {
                goto LABEL_148;
              }

              v220 = *(v282 + 4 * (v287 - 1));
              *(v282 + 4 * v216) = v220;
              *(v288 + 4 * v220) = *(v288 + 4 * v300);
              *(v288 + 4 * v300) = -1;
              v217 = v144[1];
              --v287;
            }

            if (v217 < 1)
            {
              goto LABEL_148;
            }
          }

          *(v282 + 4 * v287) = v291;
          *(v288 + 4 * v300) = v287++;
          goto LABEL_148;
        }

        if (v162 < 1)
        {
          goto LABEL_93;
        }

        v314 = (v296 + 4 * j * v140);
        v299 = &v322[(v317 * v141)];
        v297 = (v308 + 4 * (v317 * v141));
        v169 = v162 - 2;
        v170 = (v303 + 8 * v145 + 8 * v162 - 8);
        do
        {
          v172 = *v170;
          v170 -= 2;
          v171 = v172;
          if (*(v148 + 4 * v172))
          {
            v173 = v171 * v321;
            if (sub_2366ED5D4(v321, 1, v314, &v322[v173], &v311[v173]) || sub_2366ED780(v321, v314, v306, -1, v299, v297, 1, &v322[v171 * v321], (v308 + 4 * v173)))
            {
              v174 = v169 + 1;
              if (v162 < 2)
              {
                v167 = v171;
              }

              else
              {
                v175 = v169;
                v176 = (v303 + 8 * v145 + 8 * v169);
                v167 = v171;
                v177 = v323;
                do
                {
                  v179 = *v176;
                  v176 -= 2;
                  v178 = v179;
                  if (*(v177 + 4 * v179))
                  {
                    v180 = sub_2366ED780(v321, v314, v306, 1, &v322[v167 * v310], (v308 + 4 * v167 * v310), 1, &v322[(v178 * v321)], (v308 + 4 * (v178 * v321)));
                    v177 = v323;
                    if (v180)
                    {
                      v174 = v175;
                      v167 = v178;
                    }

                    else
                    {
                      v167 = v167;
                    }
                  }

                  v181 = v175--;
                }

                while (v181 > 0);
              }

              v182 = v174;
              v183 = v291;
              if (*(v294 + 8 * v174 + 4) >= *v144)
              {
                v81 = v307;
                v185 = v317;
                goto LABEL_124;
              }

              LODWORD(v141) = v321;
              v140 = v310;
              v184 = sub_2366ED780(v310, v314, v306, -1, v299, v297, 1, &v322[v167 * v321], (v308 + 4 * v167 * v321));
              v81 = v307;
              v185 = v317;
              if (v184)
              {
                goto LABEL_124;
              }

              goto LABEL_213;
            }
          }

          --v162;
          --v169;
          v148 = v323;
        }

        while (v162 + 1 > 1);
LABEL_92:
        v130 = v295;
LABEL_206:
        v140 = v310;
        LODWORD(v141) = v321;
LABEL_207:
        v81 = v307;
LABEL_208:
        v89 = v301;
        v142 = v305 + 1;
      }

LABEL_215:
      *(v319 + 136) = v287;
      if (v289 >= 1)
      {
        v256 = v289;
        v257 = v302;
        do
        {
          *(v81 + 4 * *v257) = 3;
          v258 = *v257++;
          *(v89 + 4 * v258) = -1;
          --v256;
        }

        while (v256);
      }

      if ((*(v130 + 8) & 8) != 0)
      {
        v259 = sub_2366E7120(v276, v322, 1);
        v260 = sub_2366E70E8(v276, v322, 1);
        v261 = sub_2366ED820(v319, v278, v308);
        v262 = *(v319 + 136);
        v263 = *(v319 + 112);
        v264 = sub_2366C2FD4(v319, v320);
        printf("\t[%6d %6d], Bal: %5.3f, Nb: %6d. Nmoves: %5d, Cut: %6d, Vol: %6d", v259, v260, v261, v262, v281, v263, v264);
        if (*(v130 + 40))
        {
          v265 = sub_2366E70E8(v278, v78, 1);
          v266 = sub_2366E71E0(v278, v78, 1);
          printf(", Doms: [%3d %4d]", v265, v266);
        }

        putchar(10);
        v81 = v307;
        v89 = v301;
      }

      if (v281 && (v318 != 1 || *(v319 + 112) != v279) && ++v280 < v277)
      {
        continue;
      }

      break;
    }
  }

  sub_2366E77F4(v313, v123, v124, v125, v126, v127, v128, v129);
  return sub_2366E2AB0(v130, v267, v268, v269, v270, v271, v272, v273);
}

uint64_t sub_2366D3710(uint64_t a1, void *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, float a9)
{
  v9 = a4;
  v237 = a3;
  v12 = a1;
  *v270 = 0;
  if (a4 == 1)
  {
    v13 = 1;
  }

  else
  {
    v13 = 2;
  }

  v241 = v13;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v230);
  v14 = *a2;
  v252 = a2[2];
  v261 = a2[5];
  v232 = a2[19];
  v269 = a2[15];
  v15 = a2;
  v263 = a2[16];
  v16 = *(v12 + 100);
  v17 = v16;
  v246 = *(v12 + 120);
  v258 = sub_2366E2AB8(v12, *(v12 + 100), v18, v19, v20, v21, v22, v23);
  v30 = sub_2366E2AB8(v12, v16, v24, v25, v26, v27, v28, v29);
  v242 = v16;
  if (v16 >= 1)
  {
    v37 = *(v15 + 56);
    v38 = *(v12 + 120);
    v39 = **(v12 + 112);
    v40 = v16;
    v41 = v30;
    v42 = v258;
    do
    {
      v43 = *v38++;
      *v41++ = ((v43 * *v37) * v39);
      *v42++ = (1.0 / v39 * (v43 * *v37));
      --v40;
    }

    while (v40);
  }

  v253 = v30;
  v236 = sub_2366E2AB8(v12, v14, v31, v32, v33, v34, v35, v36);
  v50 = sub_2366E2AB8(v12, v16, v44, v45, v46, v47, v48, v49);
  v57 = sub_2366E736C(v16, 2, v50);
  v244 = v16;
  if (*(v12 + 40))
  {
    sub_2366B9BD0(v12, v15, v51, v52, v53, v54, v55, v56);
    v58 = *(v12 + 296);
    v248 = *(v12 + 304);
    v59 = sub_2366E736C(v17, 0, *(v12 + 320));
  }

  else
  {
    v58 = 0;
    v59 = 0;
    v248 = 0;
  }

  v60 = sub_2366E2AB8(v12, v14, v51, v52, v53, v54, v55, v56);
  v61 = sub_2366E736C(v14, 3, v60);
  v68 = sub_2366E2AB8(v12, v14, v62, v63, v64, v65, v66, v67);
  v260 = sub_2366E736C(v14, -1, v68);
  v81 = sub_2366E2AB8(v12, v14, v69, v70, v71, v72, v73, v74);
  if (*(v12 + 44))
  {
    v82 = sub_2366E2AB8(v12, v14, v75, v76, v77, v78, v79, v80);
    v251 = sub_2366E736C(v14, 0, v82);
    v250 = sub_2366E2AB8(v12, v14, v83, v84, v85, v86, v87, v88);
    v95 = sub_2366E2AB8(v12, v14, v89, v90, v91, v92, v93, v94);
    v249 = sub_2366E736C(v14, 0, v95);
  }

  else
  {
    v250 = 0;
    v251 = 0;
    v249 = 0;
  }

  v96 = v15;
  v240 = sub_2366E2AB8(v12, v14, v75, v76, v77, v78, v79, v80);
  v103 = sub_2366E2AB8(v12, v14, v97, v98, v99, v100, v101, v102);
  v239 = sub_2366E736C(v14, 0, v103);
  v110 = sub_2366E2AB8(v12, v242, v104, v105, v106, v107, v108, v109);
  v238 = sub_2366E736C(v244, -1, v110);
  v255 = v12;
  v254 = v9;
  v111 = v237;
  v262 = v96;
  v267 = v81;
  v268 = v61;
  if ((*(v12 + 8) & 8) != 0)
  {
    v112 = "GBV";
    if (v9 == 1)
    {
      v112 = "GRV";
    }

    v264 = v112;
    v113 = v263[sub_2366E7198(v244, v263, 1uLL)];
    v114 = sub_2366E70E8(v244, v263, 1);
    v115 = *(v12 + 128);
    v116 = *v258;
    v117 = *v253;
    v118 = sub_2366ED820(v96, v244, v115);
    v231 = v117;
    v12 = v255;
    printf("%s: [%6d %6d][%6d %6d], Bal: %5.3f, Nv-Nb[%6d %6d], Cut: %5d, Vol: %5d", v264, v113, v114, v116, v231, v118, *v96, *(v96 + 136), *(v96 + 112), *(v96 + 116));
    if (*(v255 + 40))
    {
      v119 = sub_2366E70E8(v244, v58, 1);
      v120 = sub_2366E71E0(v244, v58, 1);
      printf(", Doms: [%3d %4d]", v119, v120);
    }

    putchar(10);
    v9 = v254;
    v111 = v237;
    v81 = v267;
    v61 = v268;
  }

  v259 = sub_2366E76B8(v14);
  v127 = v263;
  v128 = v253;
  v129 = v236;
  if (v111 >= 1)
  {
    v243 = 0;
    v130 = v244;
    v234 = v57;
    while (1)
    {
      if (v9 == 2)
      {
        if (v242 < 1)
        {
          LODWORD(v131) = 0;
        }

        else
        {
          v131 = 0;
          while (*(v127 + 4 * v131) <= v128[v131])
          {
            if (v130 == ++v131)
            {
              goto LABEL_148;
            }
          }
        }

        if (v131 == v242)
        {
          goto LABEL_148;
        }
      }

      v233 = *(v96 + 112);
      v235 = *(v96 + 116);
      if (*(v12 + 40))
      {
        v270[0] = sub_2366E70E8(v244, v58, 1);
      }

      v132 = *(v96 + 136);
      v133 = v132 + 3;
      if ((v132 & 0x80000000) == 0)
      {
        v133 = *(v96 + 136);
      }

      sub_2366C8A48(v132, v129, v133 >> 2, 1, (v12 + 68));
      if (*(v96 + 136) < 1)
      {
        v138 = 0;
      }

      else
      {
        v134 = 0;
        v135 = v129;
        do
        {
          v136 = v134;
          v137 = *(v232 + 4 * *(v135 + 4 * v134));
          sub_2366E7844(v259, *(v232 + 4 * *(v135 + 4 * v134)), *(*(v96 + 184) + 20 * v137 + 8));
          *(v268 + 4 * v137) = 1;
          *(v267 + 4 * v136) = v137;
          v134 = v136 + 1;
          *(v260 + 4 * v137) = v136;
        }

        while (v136 + 1 < *(v96 + 136));
        v138 = v134;
        v9 = v254;
        v81 = v267;
        v61 = v268;
        v12 = v255;
      }

      v270[1] = v138;
      v139 = sub_2366E7AD0(v259);
      v140 = v234;
      if (v139 != -1)
      {
        break;
      }

      v247 = 0;
      v127 = v263;
      v183 = v260;
LABEL_137:
      v216 = v81;
      v130 = v244;
      if (v138 >= 1)
      {
        do
        {
          *(v61 + 4 * *v216) = 3;
          v217 = *v216++;
          *(v183 + 4 * v217) = -1;
          --v138;
        }

        while (v138);
      }

      if ((*(v12 + 8) & 8) != 0)
      {
        v218 = v127;
        v266 = *(v127 + 4 * sub_2366E7198(v244, v127, 1uLL));
        LODWORD(v218) = sub_2366E70E8(v244, v218, 1);
        v219 = sub_2366ED820(v96, v244, *(v12 + 128));
        printf("\t[%6d %6d], Bal: %5.3f, Nb: %6d. Nmoves: %5d, Cut: %6d, Vol: %6d", v266, v218, v219, *(v96 + 136), v247, *(v96 + 112), *(v96 + 116));
        if (*(v12 + 40))
        {
          v220 = sub_2366E70E8(v244, v58, 1);
          v221 = sub_2366E71E0(v244, v58, 1);
          printf(", Doms: [%3d %4d]", v220, v221);
        }

        putchar(10);
        v9 = v254;
        v96 = v262;
        v127 = v263;
        v130 = v244;
      }

      v128 = v253;
      v129 = v236;
      if (v247 && (v9 != 1 || *(v96 + 116) != v235 || *(v96 + 112) != v233) && ++v243 < v237)
      {
        continue;
      }

      goto LABEL_148;
    }

    v247 = 0;
    v265 = 0;
    v127 = v263;
LABEL_40:
    *(v61 + 4 * v139) = 2;
    v141 = (*(v96 + 184) + 20 * v139);
    v142 = *(v12 + 280);
    v143 = v141[4];
    v144 = *(v269 + 4 * v139);
    v145 = *(*(v96 + 24) + 4 * v139);
    if ((v9 != 1 || *v141 >= 1) && *(v127 + 4 * v144) - v145 < v258[v144])
    {
      goto LABEL_89;
    }

    v146 = v139;
    if (*(v12 + 44))
    {
      v256 = v141[4];
      v257 = *(v96 + 184) + 20 * v139;
      v147 = v140;
      v148 = *(v269 + 4 * v139);
      v149 = *(*(v96 + 24) + 4 * v139);
      v150 = *(v12 + 280);
      v151 = v12;
      v152 = v9;
      v153 = v139;
      v154 = sub_2366D5588(v139, v252, v261, v269, v251, v250, v249);
      v142 = v150;
      v145 = v149;
      v144 = v148;
      v140 = v147;
      v143 = v256;
      v141 = v257;
      v146 = v153;
      v9 = v152;
      v12 = v151;
      if (v154)
      {
        goto LABEL_89;
      }
    }

    v155 = v142 + 12 * v143;
    if (!*(v12 + 40) || v141[3] < 1)
    {
      goto LABEL_71;
    }

    v156 = 0;
LABEL_48:
    v157 = *(v155 + 12 * v156);
    *(v140 + 4 * v157) = 0;
    LODWORD(v158) = v58[v157];
    if (v158 >= 1)
    {
      v159 = 0;
      v160 = *(v248 + 8 * v157);
      do
      {
        *(v59 + 4 * *(v160 + 4 * v159++)) = 1;
        v158 = v58[v157];
      }

      while (v159 < v158);
    }

    v161 = v141[3];
    if (v161 < 1)
    {
LABEL_62:
      v166 = 2;
      goto LABEL_63;
    }

    v162 = 0;
    v163 = (v142 + 12 * v143);
    v164 = v156;
    while (1)
    {
      if (v164)
      {
        v165 = *v163;
        if (!*(v59 + 4 * v165))
        {
          if (v58[v165] >= v270[0])
          {
            v162 = v270[0];
            if (!v270[0])
            {
              goto LABEL_60;
            }

LABEL_59:
            if (v162 + v158 > v270[0])
            {
              goto LABEL_64;
            }

LABEL_60:
            if (!v162)
            {
              goto LABEL_62;
            }

            v166 = 1;
LABEL_63:
            *(v140 + 4 * v157) = v166;
            LODWORD(v158) = v58[v157];
LABEL_64:
            if (v158 >= 1)
            {
              v167 = 0;
              v168 = *(v248 + 8 * v157);
              do
              {
                *(v59 + 4 * *(v168 + 4 * v167++)) = 0;
              }

              while (v167 < v58[v157]);
            }

            if (++v156 >= v141[3])
            {
LABEL_71:
              v169 = *v141;
              if (*v141 || v141[1] < 1)
              {
                v170 = 0;
              }

              else
              {
                v170 = *(*(v262 + 32) + 4 * v146);
              }

              v171 = v141[3];
              if (v9 == 1)
              {
                if (v171 >= 1)
                {
                  v172 = v171 - 2;
                  v173 = (v142 + 12 * v143 + 12 * v171 - 4);
                  v174 = v171 - 1;
                  while (1)
                  {
                    v175 = *(v173 - 2);
                    if (*(v140 + 4 * v175))
                    {
                      if (*v173 + v170 >= 0 && (v253[v175] + (a9 * (*v173 + v170))) >= (v263[v175] + v145))
                      {
                        break;
                      }
                    }

                    --v171;
                    --v172;
                    v173 -= 3;
                    --v174;
                    if (v171 + 1 <= 1)
                    {
                      goto LABEL_89;
                    }
                  }

                  v193 = v172 + 1;
                  if (v171 >= 2)
                  {
                    v194 = (v142 + 12 * v143 + 12 * v172 + 8);
                    do
                    {
                      v195 = *(v194 - 2);
                      if (*(v140 + 4 * v195))
                      {
                        if ((v196 = *v194, v197 = (v155 + 12 * v193), v198 = v197[2], *v194 > v198) && (v253[v195] + (a9 * (v196 + v170))) >= (v263[v195] + v145) || v196 == v198 && ((v199 = *(v194 - 1), v200 = v197[1], v199 > v200) && (v263[v195] + v145) <= v253[v195] || v199 == v200 && (*(v246 + 4 * *v197) * v263[v195]) < (*(v246 + 4 * v195) * v263[*v197])))
                        {
                          v193 = v174 - 1;
                        }
                      }

                      --v174;
                      v194 -= 3;
                    }

                    while (v174 > 0);
                  }

                  v189 = v193;
                  v201 = (v155 + 12 * v193);
                  v191 = *v201;
                  if (!(((v201[2] + v170) < 0) ^ __OFADD__(v201[2], v170) | (v201[2] + v170 == 0)))
                  {
                    goto LABEL_125;
                  }

                  v202 = v201[1];
                  if (v202 > v169)
                  {
                    goto LABEL_125;
                  }

                  if (v202 == v169)
                  {
                    if ((v265 & 1) == 0 && *(v140 + 4 * v191) == 2)
                    {
                      goto LABEL_125;
                    }

                    v203 = v263[v144];
                    if (v203 >= v253[v144] || (*(v246 + 4 * v144) * (v263[v191] + v145)) < (*(v246 + 4 * v191) * v203))
                    {
                      goto LABEL_125;
                    }
                  }
                }

LABEL_89:
                v96 = v262;
                v81 = v267;
                v61 = v268;
                v182 = v259;
              }

              else
              {
                if (v171 < 1)
                {
                  goto LABEL_89;
                }

                v176 = v171 - 2;
                v177 = (v142 + 12 * v143 + 12 * v171 - 12);
                v178 = v171 - 1;
                while (1)
                {
                  v180 = *v177;
                  v177 -= 3;
                  v179 = v180;
                  if (*(v140 + 4 * v180))
                  {
                    v181 = v263[v179] + v145;
                    if (v181 <= v253[v179] || (*(v246 + 4 * v144) * v181) <= (*(v246 + 4 * v179) * v263[v144]))
                    {
                      break;
                    }
                  }

                  --v171;
                  --v176;
                  --v178;
                  if (v171 + 1 <= 1)
                  {
                    goto LABEL_89;
                  }
                }

                v184 = v176 + 1;
                if (v171 >= 2)
                {
                  v185 = (v142 + 12 * v143 + 12 * v176);
                  do
                  {
                    v187 = *v185;
                    v185 -= 3;
                    v186 = v187;
                    if (*(v140 + 4 * v187))
                    {
                      v188 = *(v155 + 12 * v184);
                      if ((*(v246 + 4 * v188) * v263[v186]) < (*(v246 + 4 * v186) * v263[v188]))
                      {
                        v184 = v178 - 1;
                      }
                    }

                    --v178;
                  }

                  while (v178 > 0);
                }

                v189 = v184;
                v190 = (v155 + 12 * v184);
                v191 = *v190;
                if (v263[v144] < v253[v144] && v263[v191] > v258[v191])
                {
                  v192 = v190[2] + v170;
                  if (v192 < 0 || !v192 && v190[1] < v169)
                  {
                    goto LABEL_89;
                  }
                }

LABEL_125:
                v263[v191] += v145;
                v263[v144] -= v145;
                v204 = v155 + 12 * v189;
                v205 = *(v262 + 116) - v170 - *(v204 + 8);
                *(v262 + 112) += *v141 - *(v204 + 4);
                *(v262 + 116) = v205;
                *(v269 + 4 * v146) = v191;
                if ((*(v12 + 8) & 0x20) != 0)
                {
                  v206 = v9;
                  v207 = v146;
                  printf("\t\tMoving %6d from %3d to %3d. Gain: [%4d %4d]. Cut: %6d, Vol: %6d\n", v146, v144, v191, *(v204 + 8) + v170, *(v204 + 4) - *v141, *(v262 + 112), *(v262 + 116));
                  v146 = v207;
                  v9 = v206;
                  v12 = v255;
                }

                v245 = v146;
                if (*(v12 + 40))
                {
                  sub_2366B9EAC(v255, v144, v191, *v141 - *(v204 + 4), v270);
                  v208 = (v252 + 4 * v245);
                  v209 = v208[1];
                  v210 = *v208;
                  if (v210 < v209)
                  {
                    do
                    {
                      v211 = *(v261 + 4 * v210);
                      v212 = *(v269 + 4 * v211);
                      if (v212 != v144 && v212 != v191)
                      {
                        sub_2366B9EAC(v255, v144, *(v269 + 4 * v211), -1, v270);
                        v9 = v254;
                        sub_2366B9EAC(v255, v191, v212, 1, v270);
                        v209 = v208[1];
                      }

                      ++v210;
                    }

                    while (v210 < v209);
                  }
                }

                ++v247;
                v81 = v267;
                v12 = v255;
                v214 = v144;
                v215 = v191;
                v96 = v262;
                v182 = v259;
                v61 = v268;
                sub_2366D5710(v255, v262, v245, v214, v215, v259, v268, &v270[1], v260, v267, v241, v239, v238, v240);
              }

              ++v265;
              v139 = sub_2366E7AD0(v182);
              v127 = v263;
              v183 = v260;
              if (v139 == -1)
              {
                v138 = v270[1];
                goto LABEL_137;
              }

              goto LABEL_40;
            }

            goto LABEL_48;
          }

          ++v162;
        }
      }

      --v164;
      v163 += 3;
      if (!--v161)
      {
        if (!v162)
        {
          goto LABEL_60;
        }

        goto LABEL_59;
      }
    }
  }

LABEL_148:
  sub_2366E77F4(v259, v127, v121, v122, v123, v124, v125, v126);
  return sub_2366E2AB0(v12, v222, v223, v224, v225, v226, v227, v228);
}

uint64_t sub_2366D44D4(uint64_t a1, int *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = a4;
  v261 = a3;
  v10 = a1;
  *v301 = 0;
  if (a4 == 1)
  {
    v11 = 1;
  }

  else
  {
    v11 = 2;
  }

  v260 = v11;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v249);
  v12 = *a2;
  v13 = a2[2];
  v271 = *(a2 + 2);
  v278 = *(a2 + 3);
  v14 = *(a2 + 5);
  v252 = *(a2 + 19);
  v290 = *(a2 + 15);
  v298 = *(a2 + 16);
  v15 = *(v10 + 100);
  v16 = *(v10 + 100);
  v17 = *(v10 + 128);
  v24 = sub_2366E2AB8(v10, a2[2], v18, v19, v20, v21, v22, v23);
  v289 = v17;
  v25 = v17;
  v26 = v24;
  sub_2366ED9BC(a2, v15, v25, v24);
  v300 = v13;
  sub_2366ED558(v13, v26, *(v10 + 112));
  v34 = v33;
  v284 = v8;
  if (v8 == 2)
  {
    sub_2366E7408(v13, *(v10 + 112), v26);
    v13 = v13;
  }

  else
  {
    v13 = v13;
    if (v13 >= 1)
    {
      v35 = *(v10 + 112);
      v36 = v300;
      v37 = v26;
      do
      {
        v38 = *v35++;
        v39 = v38;
        if (*v37 > v38)
        {
          v39 = *v37;
        }

        *v37++ = v39;
        --v36;
      }

      while (v36);
    }
  }

  v274 = sub_2366E2AB8(v10, v16 * v13, v27, v28, v29, v30, v31, v32);
  v293 = v16 * v13;
  v291 = sub_2366E2AB8(v10, v16 * v13, v40, v41, v42, v43, v44, v45);
  if (v15 >= 1)
  {
    v52 = 0;
    v53 = 0;
    v54 = 4 * v300;
    v55 = v291;
    v56 = v274;
    do
    {
      if (v13 >= 1)
      {
        v57 = (*(v10 + 120) + v52);
        v58 = *(a2 + 7);
        v59 = v300;
        v60 = v26;
        v61 = v55;
        v62 = v56;
        do
        {
          v63 = *v57++;
          v64 = v63;
          v65 = *v60++;
          *v61++ = (v65 * (v64 * *v58));
          v66 = *v58++;
          *v62++ = ((v64 * v66) * 0.2);
          --v59;
        }

        while (v59);
      }

      ++v53;
      v56 = (v56 + v54);
      v55 = (v55 + v54);
      v52 += v54;
    }

    while (v53 != v15);
  }

  v251 = v15;
  v255 = sub_2366E2AB8(v10, v12, v46, v47, v48, v49, v50, v51);
  v73 = sub_2366E2AB8(v10, v15, v67, v68, v69, v70, v71, v72);
  v299 = sub_2366E736C(v15, 2, v73);
  v254 = v15;
  v283 = a2;
  if (*(v10 + 40))
  {
    sub_2366B9BD0(v10, a2, v74, v75, v76, v77, v78, v79);
    v81 = *(v10 + 296);
    v80 = *(v10 + 304);
    v82 = sub_2366E736C(v15, 0, *(v10 + 320));
  }

  else
  {
    v81 = 0;
    v82 = 0;
    v80 = 0;
  }

  v83 = sub_2366E2AB8(v10, v12, v74, v75, v76, v77, v78, v79);
  v84 = sub_2366E736C(v12, 3, v83);
  v91 = sub_2366E2AB8(v10, v12, v85, v86, v87, v88, v89, v90);
  v263 = sub_2366E736C(v12, -1, v91);
  v277 = sub_2366E2AB8(v10, v12, v92, v93, v94, v95, v96, v97);
  v104 = v14;
  v288 = v26;
  if (*(v10 + 44))
  {
    v105 = sub_2366E2AB8(v10, v12, v98, v99, v100, v101, v102, v103);
    v268 = sub_2366E736C(v12, 0, v105);
    v267 = sub_2366E2AB8(v10, v12, v106, v107, v108, v109, v110, v111);
    v118 = sub_2366E2AB8(v10, v12, v112, v113, v114, v115, v116, v117);
    v266 = sub_2366E736C(v12, 0, v118);
  }

  else
  {
    v267 = 0;
    v268 = 0;
    v266 = 0;
  }

  v119 = v261;
  v259 = sub_2366E2AB8(v10, v12, v98, v99, v100, v101, v102, v103);
  v126 = sub_2366E2AB8(v10, v12, v120, v121, v122, v123, v124, v125);
  v258 = sub_2366E736C(v12, 0, v126);
  v133 = sub_2366E2AB8(v10, v251, v127, v128, v129, v130, v131, v132);
  v257 = sub_2366E736C(v254, -1, v133);
  v297 = v13;
  v270 = v104;
  v265 = v80;
  v276 = v84;
  if ((*(v10 + 8) & 8) != 0)
  {
    if (v284 == 1)
    {
      v134 = "GRV";
    }

    else
    {
      v134 = "GBV";
    }

    v135 = sub_2366E7120(v293, v298, 1);
    v136 = sub_2366E70E8(v293, v298, 1);
    v137 = sub_2366E70E8(v293, v291, 1);
    v138 = sub_2366ED820(v283, v254, v289);
    v119 = v261;
    printf("%s: [%6d %6d %6d], Bal: %5.3f(%.3f),, Nv-Nb[%6d %6d], Cut: %5d, Vol: %5d, (%d)", v134, v135, v136, v137, v138, v34, *v283, *(v283 + 136), *(v283 + 112), *(v283 + 116), v261);
    if (*(v10 + 40))
    {
      v139 = sub_2366E70E8(v254, v81, 1);
      v140 = sub_2366E71E0(v254, v81, 1);
      printf(", Doms: [%3d %4d]", v139, v140);
    }

    putchar(10);
    LODWORD(v13) = v297;
    v104 = v270;
  }

  v141 = sub_2366E76B8(v12);
  v149 = v141;
  v150 = v255;
  if (v119 >= 1)
  {
    v262 = 0;
    v250 = v293;
    v285 = v141;
    v279 = v10;
    while (v284 != 2 || !sub_2366DD250(v10, v283, 0.0))
    {
      v253 = *(v283 + 112);
      v256 = *(v283 + 116);
      if (*(v10 + 40))
      {
        v301[0] = sub_2366E70E8(v254, v81, 1);
      }

      v151 = *(v283 + 136);
      v152 = v151 + 3;
      if ((v151 & 0x80000000) == 0)
      {
        v152 = *(v283 + 136);
      }

      sub_2366C8A48(v151, v150, v152 >> 2, 1, (v10 + 68));
      if (*(v283 + 136) < 1)
      {
        v157 = 0;
      }

      else
      {
        v153 = 0;
        v154 = v150;
        do
        {
          v155 = v153;
          v156 = *(v252 + 4 * *(v154 + 4 * v153));
          sub_2366E7844(v285, *(v252 + 4 * *(v154 + 4 * v153)), *(*(v283 + 184) + 20 * v156 + 8));
          *(v84 + 4 * v156) = 1;
          v277[v155] = v156;
          v153 = v155 + 1;
          *(v263 + 4 * v156) = v155;
        }

        while (v155 + 1 < *(v283 + 136));
        v157 = v153;
        LODWORD(v13) = v297;
        v10 = v279;
        v149 = v285;
        v104 = v270;
      }

      v158 = v261;
      v301[1] = v157;
      v159 = sub_2366E7AD0(v149);
      if (v159 == -1)
      {
        v264 = 0;
        goto LABEL_154;
      }

      v264 = 0;
      v160 = 0;
      do
      {
        *(v84 + 4 * v159) = 2;
        v161 = (*(v283 + 184) + 20 * v159);
        v287 = *(v10 + 280);
        v162 = v161[4];
        v163 = *(v290 + 4 * v159);
        v292 = v159;
        v286 = v163;
        if (v284 != 1)
        {
          v165 = v278 + 4 * v159 * v13;
          v166 = &v298[(v163 * v300)];
          v167 = &v274[(v163 * v300)];
          v164 = v13;
LABEL_49:
          if (!sub_2366ED618(v164, -1, v165, v166, v167))
          {
            goto LABEL_52;
          }

          goto LABEL_50;
        }

        if (*v161 >= 1)
        {
          v164 = v300;
          v165 = v278 + 4 * v292 * v300;
          v166 = &v298[(v163 * v13)];
          v167 = &v274[(v163 * v13)];
          goto LABEL_49;
        }

LABEL_50:
        if (*(v10 + 44) && sub_2366D5588(v292, v271, v104, v290, v268, v267, v266))
        {
LABEL_52:
          v84 = v276;
          goto LABEL_147;
        }

        v168 = v299;
        if (!*(v10 + 40) || v161[3] < 1)
        {
          goto LABEL_79;
        }

        v169 = 0;
        do
        {
          v170 = *(v287 + 12 * v162 + 12 * v169);
          *(v299 + 4 * v170) = 0;
          LODWORD(v171) = v81[v170];
          if (v171 >= 1)
          {
            v172 = 0;
            v173 = *(v265 + 8 * v170);
            do
            {
              *(v82 + 4 * *(v173 + 4 * v172++)) = 1;
              v171 = v81[v170];
            }

            while (v172 < v171);
          }

          v174 = v161[3];
          if (v174 < 1)
          {
LABEL_70:
            v179 = 2;
            goto LABEL_71;
          }

          v175 = 0;
          v176 = (v287 + 12 * v162);
          v177 = v169;
          while (1)
          {
            if (!v177)
            {
              goto LABEL_65;
            }

            v178 = *v176;
            if (*(v82 + 4 * v178))
            {
              goto LABEL_65;
            }

            if (v81[v178] >= v301[0])
            {
              break;
            }

            ++v175;
LABEL_65:
            --v177;
            v176 += 3;
            if (!--v174)
            {
              if (!v175)
              {
                goto LABEL_68;
              }

              goto LABEL_67;
            }
          }

          v175 = v301[0];
          if (!v301[0])
          {
            goto LABEL_68;
          }

LABEL_67:
          if (v175 + v171 > v301[0])
          {
            goto LABEL_72;
          }

LABEL_68:
          if (!v175)
          {
            goto LABEL_70;
          }

          v179 = 1;
LABEL_71:
          *(v299 + 4 * v170) = v179;
          LODWORD(v171) = v81[v170];
LABEL_72:
          if (v171 >= 1)
          {
            v180 = 0;
            v181 = *(v265 + 8 * v170);
            do
            {
              *(v82 + 4 * *(v181 + 4 * v180++)) = 0;
            }

            while (v180 < v81[v170]);
          }

          ++v169;
        }

        while (v169 < v161[3]);
LABEL_79:
        v275 = v160;
        if (*v161 || v161[1] < 1)
        {
          v182 = 0;
        }

        else
        {
          v182 = *(*(v283 + 32) + 4 * v292);
        }

        v183 = v161[3];
        if (v284 == 1)
        {
          if (v183 < 1)
          {
            goto LABEL_98;
          }

          v272 = v287 + 12 * v162;
          v269 = v182;
          v184 = ~v182;
          v294 = (v278 + 4 * v292 * v13);
          v185 = v183 - 2;
          v281 = 12 * v162;
          v186 = (v287 + 12 * v162 + 12 * v183 - 4);
          v187 = v183 - 1;
          while (1)
          {
            v188 = *(v186 - 2);
            if (*(v168 + 4 * v188))
            {
              if (*v186 > v184)
              {
                v189 = sub_2366ED5D4(v297, 1, v294, &v298[v188 * v297], &v291[v188 * v297]);
                v168 = v299;
                if (v189)
                {
                  break;
                }
              }
            }

            --v183;
            --v185;
            v186 -= 3;
            --v187;
            if (v183 + 1 <= 1)
            {
              goto LABEL_97;
            }
          }

          v208 = v185 + 1;
          if (v183 >= 2)
          {
            v209 = (v287 + v281 + 12 * v185 + 8);
            v10 = v279;
            while (1)
            {
              v210 = *(v209 - 2);
              if (*(v168 + 4 * v210))
              {
                v211 = *v209;
                v212 = v272 + 12 * v208;
                v213 = *(v212 + 8);
                if (*v209 > v213)
                {
                  v214 = v208;
                  v215 = sub_2366ED5D4(v297, 1, v294, &v298[v210 * v300], &v291[v210 * v300]);
                  v208 = v214;
                  v10 = v279;
                  v168 = v299;
                  if (v215)
                  {
                    goto LABEL_129;
                  }

                  v211 = *v209;
                  v213 = *(v212 + 8);
                }

                if (v211 == v213)
                {
                  if (*(v209 - 1) <= *(v212 + 4))
                  {
                    goto LABEL_127;
                  }

                  v216 = v208;
                  v217 = sub_2366ED5D4(v300, 1, v294, &v298[v210 * v297], &v291[v210 * v297]);
                  v208 = v216;
                  v10 = v279;
                  v168 = v299;
                  if (v217)
                  {
                    goto LABEL_129;
                  }

                  v211 = *v209;
                  v213 = *(v212 + 8);
                }

                if (v211 == v213)
                {
LABEL_127:
                  if (*(v209 - 1) != *(v212 + 4))
                  {
                    goto LABEL_130;
                  }

                  v218 = v208;
                  v219 = sub_2366ED780(v297, v294, v288, 1, &v298[v188 * v297], (v289 + 4 * v188 * v297), 1, &v298[v210 * v300], (v289 + 4 * v210 * v300));
                  v208 = v218;
                  v168 = v299;
                  if (!v219)
                  {
                    goto LABEL_130;
                  }

LABEL_129:
                  v208 = (v187 - 1);
                  v188 = v210;
                }
              }

LABEL_130:
              --v187;
              v209 -= 3;
              if (v187 <= 0)
              {
                goto LABEL_133;
              }
            }
          }

          v10 = v279;
LABEL_133:
          v203 = v208;
          v205 = v272;
          v220 = v272 + 12 * v208;
          if ((*(v220 + 8) + v269 < 0) ^ __OFADD__(*(v220 + 8), v269) | (*(v220 + 8) + v269 == 0))
          {
            v221 = *(v220 + 4);
            LODWORD(v13) = v297;
            v149 = v285;
            if (v221 <= *v161)
            {
              if (v221 != *v161)
              {
LABEL_115:
                v104 = v270;
                v84 = v276;
LABEL_100:
                v160 = v275;
                goto LABEL_147;
              }

              if ((v275 & 1) != 0 || *(v168 + 4 * v188) != 2)
              {
                v207 = sub_2366ED780(v297, v294, v288, -1, &v298[v286 * v297], (v289 + 4 * v286 * v297), 1, &v298[v188 * v297], (v289 + 4 * v188 * v297));
LABEL_114:
                if (!v207)
                {
                  goto LABEL_115;
                }
              }
            }
          }
        }

        else
        {
          if (v183 < 1)
          {
LABEL_98:
            v10 = v279;
LABEL_99:
            v104 = v270;
            v84 = v276;
            v149 = v285;
            goto LABEL_100;
          }

          v269 = v182;
          v273 = v287 + 12 * v162;
          v295 = (v278 + 4 * v292 * v300);
          v280 = (v289 + 4 * v286 * v13);
          v282 = &v298[v286 * v13];
          v190 = v183 - 2;
          v191 = (v287 + 12 * v162 + 12 * v183 - 12);
          while (1)
          {
            v193 = *v191;
            v191 -= 3;
            v192 = v193;
            if (*(v168 + 4 * v193))
            {
              v194 = v192 * v297;
              if (sub_2366ED5D4(v300, 1, v295, &v298[v194], &v291[v194]) || sub_2366ED780(v300, v295, v288, -1, v282, v280, 1, &v298[v192 * v297], (v289 + 4 * v194)))
              {
                break;
              }
            }

            --v183;
            --v190;
            v168 = v299;
            if (v183 + 1 <= 1)
            {
LABEL_97:
              v10 = v279;
              LODWORD(v13) = v297;
              goto LABEL_99;
            }
          }

          v195 = v190 + 1;
          if (v183 < 2)
          {
            v188 = v192;
            v149 = v285;
          }

          else
          {
            v196 = v190;
            v197 = (v287 + 12 * v162 + 12 * v190);
            v188 = v192;
            v198 = v299;
            v149 = v285;
            do
            {
              v200 = *v197;
              v197 -= 3;
              v199 = v200;
              if (*(v198 + 4 * v200))
              {
                v201 = sub_2366ED780(v297, v295, v288, 1, &v298[v188 * v300], (v289 + 4 * v188 * v300), 1, &v298[(v199 * v297)], (v289 + 4 * (v199 * v297)));
                v198 = v299;
                if (v201)
                {
                  v195 = v196;
                  v188 = v199;
                }

                else
                {
                  v188 = v188;
                }
              }

              v202 = v196--;
            }

            while (v202 > 0);
          }

          v203 = v195;
          v204 = v273 + 12 * v195;
          v205 = v273;
          v206 = *(v204 + 8) + v269;
          v10 = v279;
          LODWORD(v13) = v297;
          if (v206 < 0 || !v206 && *(v204 + 4) < *v161)
          {
            v207 = sub_2366ED780(v297, v295, v288, -1, v282, v280, 1, &v298[v188 * v297], (v289 + 4 * v188 * v297));
            goto LABEL_114;
          }
        }

        v222 = v205 + 12 * v203;
        v223 = *(v283 + 116) - v269 - *(v222 + 8);
        *(v283 + 112) += *v161 - *(v222 + 4);
        *(v283 + 116) = v223;
        v224 = v292;
        *(v290 + 4 * v292) = v188;
        if ((*(v10 + 8) & 0x20) != 0)
        {
          printf("\t\tMoving %6d from %3d to %3d. Gain: [%4d %4d]. Cut: %6d, Vol: %6d\n", v292, v286, v188, *(v222 + 8) + v269, *(v222 + 4) - *v161, *(v283 + 112), *(v283 + 116));
          v224 = v292;
        }

        v104 = v270;
        v160 = v275;
        v225 = v286;
        if (*(v10 + 40))
        {
          sub_2366B9EAC(v279, v286, v188, *v161 - *(v222 + 4), v301);
          v225 = v286;
          v224 = v292;
          v296 = (v271 + 4 * v292);
          v226 = v296[1];
          v227 = *v296;
          if (v227 < v226)
          {
            do
            {
              v228 = *(v270 + 4 * v227);
              v229 = *(v290 + 4 * v228);
              if (v229 != v225 && v229 != v188)
              {
                sub_2366B9EAC(v279, v286, *(v290 + 4 * v228), -1, v301);
                sub_2366B9EAC(v279, v188, v229, 1, v301);
                v225 = v286;
                v224 = v292;
                v226 = v296[1];
              }

              ++v227;
            }

            while (v227 < v226);
          }
        }

        ++v264;
        v231 = (v278 + 4 * v224 * v300);
        v13 = v297;
        v232 = v225;
        sub_2366E7208(v297, 1, v231, 1, &v298[v188 * v297], 1);
        sub_2366E7208(v13, -1, v231, 1, &v298[v232 * v13], 1);
        v84 = v276;
        v233 = v232;
        v10 = v279;
        v149 = v285;
        sub_2366D5710(v279, v283, v292, v233, v188, v285, v276, &v301[1], v263, v277, v260, v258, v257, v259);
LABEL_147:
        ++v160;
        v159 = sub_2366E7AD0(v149);
      }

      while (v159 != -1);
      v157 = v301[1];
      v158 = v261;
LABEL_154:
      v234 = v277;
      if (v157 >= 1)
      {
        do
        {
          *(v84 + 4 * *v234) = 3;
          v235 = *v234++;
          *(v263 + 4 * v235) = -1;
          --v157;
        }

        while (v157);
      }

      if ((*(v10 + 8) & 8) != 0)
      {
        v236 = sub_2366E7120(v250, v298, 1);
        v237 = sub_2366E70E8(v250, v298, 1);
        v238 = sub_2366ED820(v283, v251, v289);
        printf("\t[%6d %6d], Bal: %5.3f, Nb: %6d. Nmoves: %5d, Cut: %6d, Vol: %6d", v236, v237, v238, *(v283 + 136), v264, *(v283 + 112), *(v283 + 116));
        if (*(v10 + 40))
        {
          v239 = sub_2366E70E8(v254, v81, 1);
          v240 = sub_2366E71E0(v254, v81, 1);
          printf(", Doms: [%3d %4d]", v239, v240);
        }

        putchar(10);
        LODWORD(v13) = v297;
        v149 = v285;
      }

      v150 = v255;
      if (v264 && (v284 != 1 || *(v283 + 116) != v256 || *(v283 + 112) != v253) && ++v262 < v158)
      {
        continue;
      }

      break;
    }
  }

  sub_2366E77F4(v149, v142, v143, v144, v145, v146, v147, v148);
  return sub_2366E2AB0(v10, v241, v242, v243, v244, v245, v246, v247);
}

uint64_t sub_2366D5588(int a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, int *a6, uint64_t a7)
{
  v7 = (a2 + 4 * a1);
  v8 = v7[1];
  v9 = *v7;
  if (v9 >= v8)
  {
    return 0;
  }

  result = 0;
  v12 = 0;
  v13 = *(a4 + 4 * a1);
  do
  {
    v14 = *(a3 + 4 * v9);
    if (*(a4 + 4 * v14) == v13)
    {
      *(a7 + 4 * v14) = 1;
      result = (result + 1);
      v8 = v7[1];
      v12 = v14;
    }

    ++v9;
  }

  while (v9 < v8);
  if (result)
  {
    if (result == 1)
    {
      result = 0;
      *(a7 + 4 * v12) = 0;
    }

    else
    {
      v15 = 0;
      v16 = 1;
      *(a5 + 4 * a1) = 1;
      *a6 = v12;
      *(a5 + 4 * v12) = 1;
      *(a7 + 4 * v12) = 0;
      v17 = 1;
      while (v15 < v16)
      {
        v18 = a6[v15];
        v19 = (a2 + 4 * v18);
        v20 = *v19;
        if (v20 < v19[1])
        {
          do
          {
            v21 = *(a3 + 4 * v20);
            if (*(a4 + 4 * v21) == v13)
            {
              if (*(a7 + 4 * v21))
              {
                *(a7 + 4 * v21) = 0;
                if (++v17 == result)
                {
                  goto LABEL_21;
                }
              }

              if (!*(a5 + 4 * v21) && *(a5 + 4 * v18) <= 4)
              {
                a6[v16++] = v21;
                *(a5 + 4 * v21) = *(a5 + 4 * v18) + 1;
              }
            }

            ++v20;
          }

          while (v20 < v19[1]);
        }

        ++v15;
        if (v17 == result)
        {
LABEL_21:
          v17 = result;
          break;
        }
      }

      *(a5 + 4 * a1) = 0;
      if (v16 >= 1)
      {
        v22 = v16;
        do
        {
          v23 = *a6++;
          *(a5 + 4 * v23) = 0;
          --v22;
        }

        while (v22);
      }

      if (v17 < result)
      {
        v24 = v7[1];
        v25 = *v7;
        if (v25 < v24)
        {
          do
          {
            v26 = *(a3 + 4 * v25);
            if (*(a4 + 4 * v26) == v13)
            {
              *(a7 + 4 * v26) = 0;
              v24 = v7[1];
            }

            ++v25;
          }

          while (v25 < v24);
        }
      }

      return v17 != result;
    }
  }

  return result;
}

uint64_t sub_2366D5710(uint64_t result, uint64_t a2, uint64_t a3, uint64_t a4, int a5, uint64_t *a6, uint64_t a7, int *a8, uint64_t a9, uint64_t a10, int a11, uint64_t a12, uint64_t a13, _DWORD *a14)
{
  v15 = result;
  v190 = *(a2 + 16);
  v17 = *(a2 + 32);
  v16 = *(a2 + 40);
  v191 = *(a2 + 120);
  v18 = *(a2 + 184);
  v19 = (v18 + 20 * a3);
  v20 = *(result + 280);
  v21 = (v20 + 12 * v19[4]);
  if (v19[3] < 1)
  {
    LODWORD(v22) = 0;
  }

  else
  {
    v22 = 0;
    v23 = (v20 + 12 * v19[4]);
    do
    {
      v24 = *v23;
      v23 += 3;
      *(a13 + 4 * v24) = v22++;
    }

    while (v22 < v19[3]);
  }

  *(a13 + 4 * a4) = v22;
  v25 = *(a13 + 4 * a5);
  v26 = (v190 + 4 * a3);
  v27 = *v26;
  if (v27 < v26[1])
  {
    v28 = v20 + 8;
    do
    {
      v29 = *(v16 + 4 * v27);
      result = *(v191 + 4 * v29);
      v30 = v18 + 20 * v29;
      v31 = *(v30 + 16);
      if (result == a4)
      {
        v32 = *(v30 + 12);
        if (v32 >= 1)
        {
          v33 = (v28 + 12 * v31);
          do
          {
            result = *(a13 + 4 * *(v33 - 2));
            if (result == -1)
            {
              result = (*v33 + *(v17 + 4 * a3));
              *v33 = result;
            }

            v33 += 3;
            --v32;
          }

          while (v32);
        }
      }

      else
      {
        result = v21[3 * *(a13 + 4 * result) + 1];
        v34 = *(v30 + 12);
        if (result <= 1)
        {
          if (v34 >= 1)
          {
            v36 = (v28 + 12 * v31);
            do
            {
              result = *(a13 + 4 * *(v36 - 2));
              if (result != -1)
              {
                result = (*v36 - *(v17 + 4 * a3));
                *v36 = result;
              }

              v36 += 3;
              --v34;
            }

            while (v34);
          }
        }

        else if (v34 >= 1)
        {
          v35 = (v28 + 12 * v31);
          do
          {
            result = *(a13 + 4 * *(v35 - 2));
            if (result == -1)
            {
              result = (*v35 + *(v17 + 4 * a3));
              *v35 = result;
            }

            v35 += 3;
            --v34;
          }

          while (v34);
        }
      }

      ++v27;
    }

    while (v27 < v26[1]);
  }

  if (v19[3] >= 1)
  {
    v37 = 0;
    v38 = v21;
    do
    {
      v39 = *v38;
      v38 += 3;
      *(a13 + 4 * v39) = -1;
      ++v37;
    }

    while (v37 < v19[3]);
  }

  v40 = a12;
  *(a13 + 4 * a4) = -1;
  if (v25 == -1)
  {
    v25 = v19[3];
    v19[3] = v25 + 1;
    v21[3 * v25 + 1] = 0;
  }

  v41 = &v21[3 * v25];
  v42 = v41[1];
  v43 = *v19;
  v44 = *v19 - v42 + v19[1];
  *v19 = v42;
  v19[1] = v44;
  v41[1] = v43;
  if (v43)
  {
    *v41 = a4;
  }

  else
  {
    v45 = v19[3] - 1;
    v19[3] = v45;
    v46 = &v21[3 * v45];
    v47 = *v46;
    v41[2] = v46[2];
    *v41 = v47;
  }

  v182 = a3;
  *(a12 + 4 * a3) = 1;
  *a14 = a3;
  v48 = *v26;
  v49 = 1;
  v183 = v15;
  v184 = a2;
  if (v48 < v26[1])
  {
    do
    {
      v50 = *(v16 + 4 * v48);
      v51 = v50;
      v52 = *(v191 + 4 * v50);
      if (!*(v40 + 4 * v50))
      {
        *(v40 + 4 * v50) = 2;
        a14[v49] = v50;
        v49 = (v49 + 1);
      }

      v53 = (*(a2 + 184) + 20 * v50);
      result = v53[2].u32[0];
      if (result == -1)
      {
        v186 = v48;
        v187 = *(a2 + 184) + 20 * v50;
        v54 = v16;
        v55 = v50;
        v56 = v26;
        v57 = a3;
        v58 = v49;
        v59 = a4;
        v60 = v52;
        result = sub_2366E2B54(v15, *(v190 + 4 * v50 + 4) - *(v190 + 4 * v50) + 1);
        v52 = v60;
        a4 = v59;
        v49 = v58;
        a3 = v57;
        v26 = v56;
        v51 = v55;
        v16 = v54;
        v48 = v186;
        v53 = v187;
        v40 = a12;
        v15 = v183;
        a2 = v184;
        *(v187 + 16) = result;
      }

      v61 = *(v15 + 280);
      v62 = result;
      v63 = v61 + 12 * result;
      if (v52 == a4)
      {
        v64 = v52;
        *v53 = vadd_s32(*v53, 0x1FFFFFFFFLL);
      }

      else
      {
        v64 = v52;
        if (v52 == a5)
        {
          *v53 = vadd_s32(*v53, 0xFFFFFFFF00000001);
        }

        v65 = v53[1].i32[1];
        if (v65 >= 1)
        {
          v66 = (v61 + 12 * result + 4);
          v67 = v53[1].u32[1];
          while (*(v66 - 1) != a4)
          {
            v66 += 3;
            if (!--v67)
            {
              goto LABEL_73;
            }
          }

          v68 = v66 - 1;
          v69 = *v66 - 1;
          if (*v66 == 1)
          {
            v70 = v65 - 1;
            v53[1].i32[1] = v70;
            v71 = (v63 + 12 * v70);
            v72 = *v71;
            v68[2] = *(v71 + 2);
            *v68 = v72;
            *(v40 + 4 * v51) = 1;
            v73 = (v190 + 4 * v51);
            v74 = *v73;
            if (v74 < v73[1])
            {
              v75 = *(a2 + 184);
              v76 = *(v15 + 280) + 8;
              do
              {
                v77 = *(v16 + 4 * v74);
                v78 = v75 + 20 * v77;
                v79 = *(v78 + 12);
                if (v79 >= 1)
                {
                  v80 = (v76 + 12 * *(v78 + 16));
                  while (1)
                  {
                    result = *(v80 - 2);
                    if (result == a4)
                    {
                      break;
                    }

                    v80 += 3;
                    if (!--v79)
                    {
                      goto LABEL_60;
                    }
                  }

                  result = *v80;
                  *v80 = result - *(v17 + 4 * v51);
                  if (!*(v40 + 4 * v77))
                  {
                    *(v40 + 4 * v77) = 2;
                    a14[v49] = v77;
                    v49 = (v49 + 1);
                  }
                }

LABEL_60:
                ++v74;
              }

              while (v74 < v73[1]);
            }
          }

          else
          {
            *v66 = v69;
            if (v69 == 1)
            {
              v81 = (v190 + 4 * v51);
              v82 = v81[1];
              v83 = *v81;
              if (v82 > v83)
              {
                v84 = (v16 + 4 * v83);
                v85 = v82 - v83;
                while (1)
                {
                  v87 = *v84++;
                  v86 = v87;
                  if (*(v191 + 4 * v87) == a4)
                  {
                    break;
                  }

                  if (!--v85)
                  {
                    goto LABEL_73;
                  }
                }

                v88 = *(a2 + 184) + 20 * v86;
                v89 = *(v88 + 12);
                if (v89 >= 1)
                {
                  v90 = (v61 + 12 * *(v88 + 16) + 8);
                  do
                  {
                    *v90 += *(v17 + 4 * v51);
                    v90 += 3;
                    --v89;
                  }

                  while (v89);
                }

                if (!*(v40 + 4 * v86))
                {
                  *(v40 + 4 * v86) = 2;
                  a14[v49] = v86;
                  v49 = (v49 + 1);
                }
              }
            }
          }
        }
      }

LABEL_73:
      if (v64 != a5)
      {
        v91 = v53[1].u32[1];
        if (v91 < 1)
        {
          LODWORD(v92) = 0;
        }

        else
        {
          v92 = 0;
          v93 = (v61 + 12 * v62 + 4);
          while (*(v93 - 1) != a5)
          {
            ++v92;
            v93 += 3;
            if (v91 == v92)
            {
              goto LABEL_93;
            }
          }

          v94 = *v93 + 1;
          *v93 = v94;
          if (v94 == 2)
          {
            v95 = (v190 + 4 * v51);
            v96 = *v95;
            v97 = v95[1];
            if (v97 > v96)
            {
              v98 = (v16 + 4 * v96);
              v99 = v97 - v96;
              while (1)
              {
                v101 = *v98++;
                v100 = v101;
                if (v101 != a3 && *(v191 + 4 * v100) == a5)
                {
                  break;
                }

                if (!--v99)
                {
                  goto LABEL_92;
                }
              }

              v102 = *(a2 + 184) + 20 * v100;
              v103 = *(v102 + 12);
              if (v103 >= 1)
              {
                v104 = (*(v15 + 280) + 12 * *(v102 + 16) + 8);
                do
                {
                  *v104 -= *(v17 + 4 * v51);
                  v104 += 3;
                  --v103;
                }

                while (v103);
              }

              if (!*(v40 + 4 * v100))
              {
                *(v40 + 4 * v100) = 2;
                a14[v49] = v100;
                v49 = (v49 + 1);
                LODWORD(v91) = v53[1].i32[1];
              }
            }
          }
        }

LABEL_92:
        if (v92 == v91)
        {
LABEL_93:
          v105 = (v63 + 12 * v91);
          v53[1].i32[1] = v91 + 1;
          *v105 = a5;
          v105[1] = 1;
          *(v40 + 4 * v51) = 1;
          v106 = (v190 + 4 * v51);
          v107 = *v106;
          if (v107 < v106[1])
          {
            v108 = *(a2 + 184);
            v109 = *(v15 + 280) + 8;
            do
            {
              v110 = *(v16 + 4 * v107);
              v111 = v108 + 20 * v110;
              v112 = *(v111 + 12);
              if (v112 >= 1)
              {
                v113 = (v109 + 12 * *(v111 + 16));
                while (*(v113 - 2) != a5)
                {
                  v113 += 3;
                  if (!--v112)
                  {
                    goto LABEL_102;
                  }
                }

                *v113 += *(v17 + 4 * v51);
                if (!*(v40 + 4 * v110))
                {
                  *(v40 + 4 * v110) = 2;
                  a14[v49] = v110;
                  v49 = (v49 + 1);
                }
              }

LABEL_102:
              ++v107;
            }

            while (v107 < v106[1]);
          }
        }
      }

      ++v48;
    }

    while (v48 < v26[1]);
  }

  v114 = *(a2 + 184);
  v115 = v114 + 20 * v182;
  v116 = *(v15 + 280);
  v117 = (v116 + 12 * *(v115 + 16));
  if (*(v115 + 12) < 1)
  {
    LODWORD(v118) = 0;
  }

  else
  {
    v118 = 0;
    v119 = (v116 + 12 * *(v115 + 16));
    do
    {
      v120 = *v119;
      v119 += 3;
      *(a13 + 4 * v120) = v118++;
    }

    while (v118 < *(v115 + 12));
  }

  *(a13 + 4 * a5) = v118;
  v121 = *v26;
  if (v121 < v26[1])
  {
    v122 = v116 + 8;
    do
    {
      v123 = *(v16 + 4 * v121);
      v124 = *(v191 + 4 * v123);
      v125 = v114 + 20 * v123;
      v126 = *(v125 + 16);
      if (v124 == a5)
      {
        v127 = *(v125 + 12);
        if (v127 >= 1)
        {
          v128 = (v122 + 12 * v126);
          do
          {
            if (*(a13 + 4 * *(v128 - 2)) == -1)
            {
              result = *v128;
              *v128 = result - *(v17 + 4 * v182);
            }

            v128 += 3;
            --v127;
          }

          while (v127);
        }
      }

      else
      {
        v129 = *(v125 + 12);
        if (v117[3 * *(a13 + 4 * v124) + 1] <= 1)
        {
          if (v129 >= 1)
          {
            v131 = (v122 + 12 * v126);
            do
            {
              if (*(a13 + 4 * *(v131 - 2)) != -1)
              {
                result = *v131;
                *v131 = result + *(v17 + 4 * v182);
              }

              v131 += 3;
              --v129;
            }

            while (v129);
          }
        }

        else if (v129 >= 1)
        {
          v130 = (v122 + 12 * v126);
          do
          {
            if (*(a13 + 4 * *(v130 - 2)) == -1)
            {
              result = *v130;
              *v130 = result - *(v17 + 4 * v182);
            }

            v130 += 3;
            --v129;
          }

          while (v129);
        }
      }

      ++v121;
    }

    while (v121 < v26[1]);
  }

  if (*(v115 + 12) >= 1)
  {
    v132 = 0;
    do
    {
      v133 = *v117;
      v117 += 3;
      *(a13 + 4 * v133) = -1;
      ++v132;
    }

    while (v132 < *(v115 + 12));
  }

  *(a13 + 4 * a5) = -1;
  if (v49 >= 1)
  {
    v134 = 0;
    v188 = v49;
    v135 = vdupq_n_s64(4uLL);
    v181 = v135;
    do
    {
      v136 = a14[v134];
      v137 = *(a2 + 184);
      v138 = (v137 + 20 * v136);
      v139 = *(v15 + 280);
      v140 = v138[4];
      if (*(v40 + 4 * v136) == 1)
      {
        v141 = *(v191 + 4 * v136);
        v142 = v138[3];
        if (v142 >= 1)
        {
          v143 = (v142 + 3) & 0xFFFFFFFC;
          v144 = vdupq_n_s64(v142 - 1);
          v145 = (v139 + 12 * v140 + 32);
          v146 = xmmword_23681F920;
          v147 = xmmword_23681F910;
          do
          {
            v148 = vmovn_s64(vcgeq_u64(v144, v146));
            if (vuzp1_s16(v148, *v144.i8).u8[0])
            {
              *(v145 - 6) = 0;
            }

            if (vuzp1_s16(v148, *&v144).i8[2])
            {
              *(v145 - 3) = 0;
            }

            if (vuzp1_s16(*&v144, vmovn_s64(vcgeq_u64(v144, *&v147))).i32[1])
            {
              *v145 = 0;
              v145[3] = 0;
            }

            v147 = vaddq_s64(v147, v135);
            v146 = vaddq_s64(v146, v135);
            v145 += 12;
            v143 -= 4;
          }

          while (v143);
        }

        v149 = (v190 + 4 * v136);
        v150 = *v149;
        if (v150 < v149[1])
        {
          do
          {
            v151 = *(v16 + 4 * v150);
            v152 = *(v191 + 4 * v151);
            v153 = v137 + 20 * v151;
            result = v139 + 12 * *(v153 + 16);
            if (*(v153 + 12) >= 1)
            {
              v154 = 0;
              v155 = (v139 + 12 * *(v153 + 16));
              do
              {
                v156 = *v155;
                v155 += 3;
                *(a13 + 4 * v156) = v154++;
              }

              while (v154 < *(v153 + 12));
            }

            *(a13 + 4 * v152) = 1;
            if (v141 == v152)
            {
              v157 = v138[3];
              if (v157 >= 1)
              {
                v158 = (v139 + 12 * v140 + 8);
                do
                {
                  if (*(a13 + 4 * *(v158 - 2)) == -1)
                  {
                    *v158 -= *(v17 + 4 * v151);
                  }

                  v158 += 3;
                  --v157;
                }

                while (v157);
              }
            }

            else
            {
              v159 = v138[3];
              if (*(result + 12 * *(a13 + 4 * v141) + 4) == 1)
              {
                if (v159 >= 1)
                {
                  v160 = (v139 + 12 * v140 + 8);
                  do
                  {
                    if (*(a13 + 4 * *(v160 - 2)) != -1)
                    {
                      *v160 += *(v17 + 4 * v151);
                    }

                    v160 += 3;
                    --v159;
                  }

                  while (v159);
                }
              }

              else
              {
                v161 = (v139 + 12 * v140 + 8);
                if (v159 >= 1)
                {
                  do
                  {
                    if (*(a13 + 4 * *(v161 - 2)) == -1)
                    {
                      *v161 -= *(v17 + 4 * v151);
                    }

                    v161 += 3;
                    --v159;
                  }

                  while (v159);
                }
              }
            }

            if (*(v153 + 12) >= 1)
            {
              v162 = 0;
              do
              {
                v163 = *result;
                result += 12;
                *(a13 + 4 * v163) = -1;
                ++v162;
              }

              while (v162 < *(v153 + 12));
            }

            *(a13 + 4 * v152) = -1;
            ++v150;
          }

          while (v150 < v149[1]);
        }
      }

      v164 = 0x80000000;
      v138[2] = 0x80000000;
      v165 = v138[3];
      if (v165 < 1)
      {
        v40 = a12;
      }

      else
      {
        v166 = (v139 + 12 * v140 + 8);
        v40 = a12;
        do
        {
          v168 = *v166;
          v166 += 3;
          v167 = v168;
          if (v168 > v164)
          {
            v138[2] = v167;
            v164 = v167;
          }

          --v165;
        }

        while (v165);
      }

      v169 = v138[1];
      if (v169 < 1)
      {
        if (a11 != 1)
        {
          goto LABEL_192;
        }

        v170 = *(a2 + 144);
      }

      else
      {
        if (!*v138)
        {
          v164 += *(v17 + 4 * v136);
          v138[2] = v164;
        }

        v170 = *(a2 + 144);
        if (a11 != 1)
        {
          if (*(v170 + 4 * v136) != -1)
          {
            goto LABEL_195;
          }

          *(*(a2 + 152) + 4 * *(a2 + 136)) = v136;
          v171 = *(a2 + 136);
          *(a2 + 136) = v171 + 1;
          *(v170 + 4 * v136) = v171;
          v169 = v138[1];
LABEL_192:
          if (v169)
          {
            goto LABEL_195;
          }

          v170 = *(a2 + 144);
          v172 = (v170 + 4 * v136);
          if (*v172 == -1)
          {
            goto LABEL_195;
          }

          goto LABEL_194;
        }
      }

      v172 = (v170 + 4 * v136);
      v173 = *v172;
      if ((v164 & 0x80000000) == 0)
      {
        if (v173 != -1)
        {
          goto LABEL_195;
        }

        *(*(a2 + 152) + 4 * *(a2 + 136)) = v136;
        v173 = *(a2 + 136);
        *(a2 + 136) = v173 + 1;
        *v172 = v173;
        if ((v138[2] & 0x80000000) == 0)
        {
          goto LABEL_195;
        }
      }

      if (v173 == -1)
      {
        goto LABEL_195;
      }

LABEL_194:
      v174 = *(a2 + 152);
      v175 = *(a2 + 136) - 1;
      *(a2 + 136) = v175;
      *(v174 + 4 * *v172) = *(v174 + 4 * v175);
      *(v170 + 4 * *(v174 + 4 * *(a2 + 136))) = *v172;
      *v172 = -1;
LABEL_195:
      if (a6)
      {
        v176 = *(a7 + 4 * v136);
        if (v176 != 2)
        {
          if (*(*(a2 + 144) + 4 * v136) == -1)
          {
            if (v176 == 1)
            {
              result = sub_2366E78AC(a6, v136);
              v135 = v181;
              v40 = a12;
              v15 = v183;
              a2 = v184;
              *(a7 + 4 * v136) = 3;
              v178 = *a8 - 1;
              *a8 = v178;
              *(a10 + 4 * *(a9 + 4 * v136)) = *(a10 + 4 * v178);
              *(a9 + 4 * *(a10 + 4 * *a8)) = *(a9 + 4 * v136);
              *(a9 + 4 * v136) = -1;
            }
          }

          else
          {
            v177 = v138[2];
            if (v176 == 1)
            {
              result = sub_2366E79D4(a6, v136, v177);
            }

            else
            {
              result = sub_2366E7844(a6, v136, v177);
              *(a7 + 4 * v136) = 1;
              *(a10 + 4 * *a8) = v136;
              v179 = (*a8)++;
              *(a9 + 4 * v136) = v179;
            }

            v15 = v183;
            a2 = v184;
            v40 = a12;
            v135 = v181;
          }
        }
      }

      *(v40 + 4 * v136) = 0;
      ++v134;
    }

    while (v134 != v188);
  }

  return result;
}

uint64_t sub_2366D64C0(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v189 = a3;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v180);
  v191 = *a2;
  v10 = *(a2 + 40);
  v207 = *(a2 + 48);
  v210 = *(a2 + 16);
  v201 = *(a2 + 24);
  v204 = *(a2 + 152);
  v211 = *(a2 + 144);
  v11 = *(a2 + 120);
  v12 = *(a2 + 128);
  v13 = *(a1 + 100);
  v14 = *(a1 + 120);
  v21 = sub_2366E2AB8(a1, v13 + 2, v15, v16, v17, v18, v19, v20);
  v212 = sub_2366E2AB8(a1, v13 + 2, v22, v23, v24, v25, v26, v27);
  v28 = **(a1 + 112);
  v187 = v13;
  v209 = a2;
  if (v28 >= sub_2366ED820(a2, v13, *(a1 + 128)))
  {
    v35 = **(a1 + 112);
  }

  else
  {
    v35 = sub_2366ED820(a2, v13, *(a1 + 128));
  }

  v36 = v191;
  if (v13 >= 1)
  {
    v37 = v209[7];
    v38 = v13;
    v39 = v212;
    v40 = v21;
    do
    {
      v41 = *v14++;
      *v39++ = (v35 * (v41 * *v37));
      *v40++ = (1.0 / v35 * (v41 * *v37));
      --v38;
    }

    while (v38);
  }

  v42 = v13;
  *&v212[v42] = 0;
  v203 = v21;
  *&v21[v42] = 0;
  v43 = a1;
  v50 = sub_2366E2AB8(a1, v191, v29, v30, v31, v32, v33, v34);
  v208 = v43;
  v192 = v50;
  if ((*(v43 + 8) & 8) != 0)
  {
    v51 = v12[sub_2366E7198(v13, v12, 1uLL)];
    v52 = sub_2366E70E8(v13, v12, 1);
    v53 = *v203;
    v54 = *v212;
    v55 = sub_2366ED820(v209, v13, *(v208 + 128));
    v183 = v53;
    v184 = v54;
    v36 = v191;
    v50 = v192;
    printf("GRE: [%6d %6d][%6d %6d], Bal: %5.3f, Nv-Nb[%6d %6d], Cut: %6d\n", v51, v52, v183, v184, v55, *v209, *(v209 + 34), *(v209 + 28));
  }

  v56 = v209;
  v57 = v201;
  if (v189 >= 1)
  {
    v58 = 0;
    v213 = v12;
    v188 = v13;
    while (1)
    {
      v190 = sub_2366C2EDC(v56, v11);
      if (v190 != *(v209 + 28))
      {
        sub_2366D710C();
      }

      v59 = *(v209 + 34);
      sub_2366E7FA0(v36, v50, *(v209 + 34), 1);
      v195 = v58;
      if (v36 >= 1)
      {
        break;
      }

      v200 = 0;
      v49 = v208;
      v56 = v209;
LABEL_135:
      *(v56 + 136) = v59;
      if ((*(v49 + 8) & 8) != 0)
      {
        v173 = v12[sub_2366E7198(v188, v12, 1uLL)];
        v174 = sub_2366E70E8(v188, v12, 1);
        v175 = sub_2366ED820(v209, v187, *(v208 + 128));
        v176 = *(v209 + 34);
        v177 = *(v209 + 28);
        v178 = sub_2366C2FD4(v209, v11);
        v186 = v177;
        v36 = v191;
        v185 = v176;
        v181 = v173;
        v182 = v174;
        v58 = v195;
        v50 = v192;
        v57 = v201;
        printf("\t[%6d %6d], Bal: %5.3f, Nb: %6d. Nmoves: %5d, Cut: %6d, Vol: %6d\n", v181, v182, v175, v185, v200, v186, v178);
        v56 = v209;
      }

      if (v200)
      {
        if (*(v56 + 112) != v190 && ++v58 != v189)
        {
          continue;
        }
      }

      goto LABEL_140;
    }

    v60 = 0;
    v200 = 0;
    v49 = v208;
    v56 = v209;
    v61 = v207;
    v62 = v210;
    v47 = v211;
    while (1)
    {
      v63 = v50[v60];
      if (*(v47 + 4 * v63) != -1)
      {
        v64 = v63;
        v65 = (v62 + 4 * v63);
        v66 = v65[1];
        v67 = *v65;
        if (v67 < v66)
        {
          v199 = v50[v60];
          v205 = (v62 + 4 * v63);
          v68 = 0;
          v69 = *(v11 + 4 * v64);
          v70 = *(v56 + 176);
          v71 = (v70 + 16 * v64);
          v72 = *(v49 + 272);
          v73 = v71[3];
          v194 = v72 + 8 * v73;
          v202 = v72;
          v74 = v72 + 4;
          v75 = 8 * v73;
          v76 = v74 + 8 * v73;
          v77 = -1;
          do
          {
            v78 = *(v10 + 4 * v67);
            v79 = *(v11 + 4 * v78);
            if (v69 != v79)
            {
              v44 = *(v57 + 4 * v64);
              v45 = *(v57 + 4 * v78);
              v80 = v12[v69] - v44 + v45;
              v48 = v212;
              v46 = v212[v69];
              if (v80 <= v46)
              {
                v46 = v12[v79];
                v44 = (v46 - v45 + v44);
                v45 = v212[v79];
                if (v44 <= v45)
                {
                  v46 = v203;
                  v45 = v203[v69];
                  if (v80 >= v45 && v44 >= v203[v79])
                  {
                    v81 = (v70 + 16 * v78);
                    v82 = *(v61 + 4 * v67);
                    v83 = v71[2];
                    v84 = v83 + 1;
                    v85 = v76 + 8 * v83;
                    do
                    {
                      if (--v84 < 1)
                      {
                        sub_2366D713C();
                      }

                      v86 = (v85 - 8);
                      v87 = *(v85 - 12);
                      v85 -= 8;
                    }

                    while (v87 != v79);
                    v88 = *v86;
                    v89 = v81[2];
                    LODWORD(v46) = v89 + 1;
                    v90 = v74 + 8 * v81[3] + 8 * v89;
                    do
                    {
                      v46 = (v46 - 1);
                      if (v46 < 1)
                      {
                        sub_2366D716C();
                      }

                      v91 = (v90 - 8);
                      v48 = *(v90 - 12);
                      v90 -= 8;
                    }

                    while (v48 != v69);
                    v44 = *v91;
                    v45 = (*v71 + 2 * v82);
                    v92 = v88 - v45 + v44 - *v81;
                    v93 = v44 <= v82;
                    if (v44 <= v82)
                    {
                      v94 = v68;
                    }

                    else
                    {
                      v94 = v92;
                    }

                    if (v93)
                    {
                      v95 = v77;
                    }

                    else
                    {
                      v95 = v67;
                    }

                    if (v92 > v68)
                    {
                      v68 = v94;
                      v77 = v95;
                    }

                    v47 = v211;
                  }
                }
              }
            }

            ++v67;
          }

          while (v66 != v67);
          if (v77 != -1)
          {
            v96 = *(v10 + 4 * v77);
            v97 = *(v11 + 4 * v96);
            v193 = v96;
            v197 = (v70 + 16 * v96);
            v198 = v96;
            v196 = v197[3];
            v98 = v71[2];
            v99 = (v202 + v75 + 8 * v98 + 4);
            v100 = v205;
            do
            {
              v101 = __OFSUB__(v98, 1);
              LODWORD(v98) = v98 - 1;
              if (v98 < 0 != v101)
              {
                sub_2366D719C();
              }

              v102 = *(v99 - 3);
              v99 -= 2;
            }

            while (v102 != v97);
            v103 = *v99;
            v104 = *v71;
            v105 = *v71 - *v99 + *(v56 + 112);
            *(v56 + 112) = v105;
            if ((*(v49 + 8) & 0x20) != 0)
            {
              printf("\t\tMoving %6d from %3d to %3d [%6d %6d]. Gain: %4d. Cut: %6d\n", v199, v69, v97, v12[v69], v12[v97], v103 - v104, v105);
              v100 = v205;
              v61 = v207;
              v47 = v211;
              v49 = v208;
              v56 = v209;
            }

            v12[v97] += *(v201 + 4 * v64);
            v12[v69] -= *(v201 + 4 * v64);
            *(v11 + 4 * v64) = v97;
            v106 = *v99;
            v107 = *v71;
            v108 = *v71 - *v99 + v71[1];
            *v71 = *v99;
            v71[1] = v108;
            *v99 = v107;
            if (v107)
            {
              *(v99 - 1) = v69;
            }

            else
            {
              v109 = v71[2] - 1;
              v71[2] = v109;
              *(v99 - 1) = *(v194 + 8 * v109);
              v106 = *v71;
              v108 = v71[1];
            }

            v110 = *(v47 + 4 * v64);
            if (v110 == -1)
            {
LABEL_51:
              if (v108 >= v106)
              {
                *(v204 + 4 * v59) = v199;
                *(v47 + 4 * v64) = v59;
                v59 = (v59 + 1);
              }
            }

            else if (v108 < v106)
            {
              v59 = (v59 - 1);
              v111 = *(v204 + 4 * v59);
              *(v204 + 4 * v110) = v111;
              *(v47 + 4 * v111) = *(v47 + 4 * v64);
              *(v47 + 4 * v64) = -1;
              v106 = *v71;
              v108 = v71[1];
              goto LABEL_51;
            }

            v112 = *v100;
            if (v112 < v100[1])
            {
              do
              {
                v60 = *(v10 + 4 * v112);
                v113 = *(v11 + 4 * v60);
                v114 = (*(v56 + 176) + 16 * v60);
                v115 = v114[3];
                if (v115 == -1)
                {
                  v115 = sub_2366E2AD8(v49, *(v210 + 4 * v60 + 4) - *(v210 + 4 * v60) + 1);
                  v100 = v205;
                  v61 = v207;
                  v47 = v211;
                  v49 = v208;
                  v56 = v209;
                  v114[2] = 0;
                  v114[3] = v115;
                }

                v116 = *(v49 + 272);
                v117 = v116 + 8 * v115;
                if (v113 == v69)
                {
                  v118 = *v114;
                  v119 = v114[1] + *(v61 + 4 * v112);
                  v114[1] = v119;
                  v120 = v118 - *(v61 + 4 * v112);
                  *v114 = v120;
                  if (v119 >= v120 && *(v47 + 4 * v60) == -1)
                  {
                    *(v204 + 4 * v59) = v60;
                    *(v47 + 4 * v60) = v59;
                    v59 = (v59 + 1);
                  }
                }

                else
                {
                  if (v113 == v97)
                  {
                    v121 = v114[1];
                    v122 = *v114 + *(v61 + 4 * v112);
                    *v114 = v122;
                    v123 = v121 - *(v61 + 4 * v112);
                    v114[1] = v123;
                    if (v123 < v122)
                    {
                      v124 = *(v47 + 4 * v60);
                      if (v124 != -1)
                      {
                        v125 = *(v204 + 4 * (v59 - 1));
                        *(v204 + 4 * v124) = v125;
                        *(v47 + 4 * v125) = *(v47 + 4 * v60);
                        *(v47 + 4 * v60) = -1;
                        v59 = v59 - 1;
                      }
                    }
                  }

                  v126 = v114[2];
                  if (v126 >= 1)
                  {
                    v127 = (v116 + 8 * v115 + 4);
                    v128 = v114[2];
                    while (*(v127 - 1) != v69)
                    {
                      v127 += 2;
                      if (!--v128)
                      {
                        goto LABEL_72;
                      }
                    }

                    v129 = *(v61 + 4 * v112);
                    if (*v127 == v129)
                    {
                      v130 = v126 - 1;
                      v114[2] = v130;
                      *(v127 - 1) = *(v117 + 8 * v130);
                    }

                    else
                    {
                      *v127 -= v129;
                    }
                  }
                }

LABEL_72:
                v131 = v113 == v97;
                v12 = v213;
                if (!v131)
                {
                  v132 = v114[2];
                  if (v132 < 1)
                  {
                    LODWORD(v133) = 0;
                  }

                  else
                  {
                    v133 = 0;
                    v134 = (v116 + 8 * v115 + 4);
                    while (*(v134 - 1) != v97)
                    {
                      ++v133;
                      v134 += 2;
                      if (v132 == v133)
                      {
                        goto LABEL_81;
                      }
                    }

                    *v134 += *(v61 + 4 * v112);
                  }

                  if (v133 == v132)
                  {
LABEL_81:
                    v135 = (v117 + 8 * v132);
                    *v135 = v97;
                    v135[1] = *(v61 + 4 * v112);
                    v114[2] = v132 + 1;
                  }
                }

                ++v112;
              }

              while (v112 < v100[1]);
            }

            v136 = v197[2];
            v137 = (v202 + 8 * v196 + 8 * v136 + 4);
            do
            {
              v101 = __OFSUB__(v136, 1);
              LODWORD(v136) = v136 - 1;
              if (v136 < 0 != v101)
              {
                sub_2366D71CC();
              }

              v138 = *(v137 - 3);
              v137 -= 2;
            }

            while (v138 != v69);
            v139 = *v137;
            v140 = *v197;
            v141 = *v197 - *v137 + *(v56 + 112);
            *(v56 + 112) = v141;
            if ((*(v49 + 8) & 0x20) != 0)
            {
              printf("\t\tMoving %6d from %3d to %3d [%6d %6d]. Gain: %4d. Cut: %6d\n", v193, v97, v69, v12[v97], v12[v69], v139 - v140, v141);
              v47 = v211;
              v61 = v207;
              v49 = v208;
              v56 = v209;
            }

            v12[v69] += *(v201 + 4 * v198);
            v12[v97] -= *(v201 + 4 * v198);
            *(v11 + 4 * v198) = v69;
            v142 = *v137;
            v143 = *v197;
            v144 = *v197 - *v137 + v197[1];
            *v197 = *v137;
            v197[1] = v144;
            *v137 = v143;
            if (v143)
            {
              *(v137 - 1) = v97;
            }

            else
            {
              v145 = v197[2] - 1;
              v197[2] = v145;
              *(v137 - 1) = *(v202 + 8 * v196 + 8 * v145);
              v142 = *v197;
              v144 = v197[1];
            }

            v146 = *(v47 + 4 * v198);
            if (v146 == -1)
            {
LABEL_94:
              v62 = v210;
              if (v144 >= v142)
              {
                *(v204 + 4 * v59) = v193;
                v148 = (v59 + 1);
                *(v47 + 4 * v198) = v59;
              }

              else
              {
                v148 = v59;
              }
            }

            else
            {
              if (v144 < v142)
              {
                v59 = (v59 - 1);
                v147 = *(v204 + 4 * v59);
                *(v204 + 4 * v146) = v147;
                *(v47 + 4 * v147) = *(v47 + 4 * v198);
                *(v47 + 4 * v198) = -1;
                v142 = *v197;
                v144 = v197[1];
                goto LABEL_94;
              }

              v148 = v59;
              v62 = v210;
            }

            v200 += 2;
            v149 = (v62 + 4 * v198);
            v150 = *v149;
            if (v150 >= v149[1])
            {
              v59 = v148;
              v36 = v191;
            }

            else
            {
              v206 = v148;
              do
              {
                v60 = *(v10 + 4 * v150);
                v151 = *(v11 + 4 * v60);
                v152 = (*(v56 + 176) + 16 * v60);
                v153 = v152[3];
                if (v153 == -1)
                {
                  v153 = sub_2366E2AD8(v49, *(v210 + 4 * v60 + 4) - *(v210 + 4 * v60) + 1);
                  v47 = v211;
                  v61 = v207;
                  v49 = v208;
                  v56 = v209;
                  v152[2] = 0;
                  v152[3] = v153;
                }

                v154 = *(v49 + 272);
                v155 = v154 + 8 * v153;
                if (v151 == v97)
                {
                  v156 = *v152;
                  v157 = v152[1] + *(v61 + 4 * v150);
                  v152[1] = v157;
                  v158 = v156 - *(v61 + 4 * v150);
                  *v152 = v158;
                  if (v157 >= v158 && *(v47 + 4 * v60) == -1)
                  {
                    *(v204 + 4 * v206) = v60;
                    *(v47 + 4 * v60) = v206;
                    v206 = (v206 + 1);
                  }
                }

                else
                {
                  if (v151 == v69)
                  {
                    v159 = v152[1];
                    v160 = *v152 + *(v61 + 4 * v150);
                    *v152 = v160;
                    v161 = v159 - *(v61 + 4 * v150);
                    v152[1] = v161;
                    if (v161 < v160)
                    {
                      v162 = *(v47 + 4 * v60);
                      if (v162 != -1)
                      {
                        v163 = *(v204 + 4 * (v206 - 1));
                        *(v204 + 4 * v162) = v163;
                        *(v47 + 4 * v163) = *(v47 + 4 * v60);
                        *(v47 + 4 * v60) = -1;
                        v206 = v206 - 1;
                      }
                    }
                  }

                  v164 = v152[2];
                  if (v164 >= 1)
                  {
                    v165 = (v154 + 8 * v153 + 4);
                    v166 = v152[2];
                    while (*(v165 - 1) != v97)
                    {
                      v165 += 2;
                      if (!--v166)
                      {
                        goto LABEL_118;
                      }
                    }

                    v167 = *(v61 + 4 * v150);
                    if (*v165 == v167)
                    {
                      v168 = v164 - 1;
                      v152[2] = v168;
                      *(v165 - 1) = *(v155 + 8 * v168);
                    }

                    else
                    {
                      *v165 -= v167;
                    }
                  }
                }

LABEL_118:
                v131 = v151 == v69;
                v12 = v213;
                if (!v131)
                {
                  v169 = v152[2];
                  if (v169 < 1)
                  {
                    LODWORD(v170) = 0;
                  }

                  else
                  {
                    v170 = 0;
                    v171 = (v154 + 8 * v153 + 4);
                    while (*(v171 - 1) != v69)
                    {
                      ++v170;
                      v171 += 2;
                      if (v169 == v170)
                      {
                        goto LABEL_127;
                      }
                    }

                    *v171 += *(v61 + 4 * v150);
                  }

                  if (v170 == v169)
                  {
LABEL_127:
                    v172 = (v155 + 8 * v169);
                    *v172 = v69;
                    v172[1] = *(v61 + 4 * v150);
                    v152[2] = v169 + 1;
                  }
                }

                ++v150;
              }

              while (v150 < v149[1]);
              v59 = v206;
              v36 = v191;
              v62 = v210;
            }

            v57 = v201;
            v50 = v192;
            v58 = v195;
            goto LABEL_132;
          }

          v50 = v192;
          v58 = v195;
          v62 = v210;
        }
      }

LABEL_132:
      if (++v60 >= v36)
      {
        goto LABEL_135;
      }
    }
  }

LABEL_140:

  return sub_2366E2AB0(v208, v44, v45, v46, v47, v48, v49, v56);
}

uint64_t sub_2366D7284(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v9 = a5;
  v11 = a3;
  v12 = a2;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v45);
  v20 = sub_2366E2AB8(a1, v11 + 2, v14, v15, v16, v17, v18, v19);
  v21 = sub_2366E736C(v11 + 2, 0, v20);
  v29 = v12;
  if (v12 >= 1)
  {
    v30 = v12;
    v31 = a4;
    do
    {
      v32 = *v31++;
      ++v21[v32];
      --v30;
    }

    while (v30);
  }

  v33 = (v11 + 1);
  if (v11 >= 1)
  {
    v34 = v21 + 1;
    v35 = *v21;
    v36 = v33 - 1;
    do
    {
      v35 += *v34;
      *v34++ = v35;
      --v36;
    }

    while (v36);
  }

  if ((v11 & 0x80000000) == 0)
  {
    v37 = v11 + 2;
    v38 = &v21[v33];
    v39 = v38;
    do
    {
      v40 = *--v39;
      *v38 = v40;
      --v37;
      v38 = v39;
    }

    while (v37 > 1);
  }

  *v21 = 0;
  if (v12 >= 1)
  {
    do
    {
      v41 = *v9++;
      v42 = *(a4 + 4 * v41);
      v43 = v21[v42];
      v21[v42] = v43 + 1;
      *(a6 + 4 * v43) = v41;
      --v29;
    }

    while (v29);
  }

  return sub_2366E2AB0(a1, v22, v23, v24, v25, v26, v27, v28);
}

uint64_t sub_2366D73B4(const char *a1)
{
  v4 = *MEMORY[0x277D85DE8];
  __sprintf_chk(v3, 0, 0x800uLL, "rm -r %s", a1);
  result = system(v3);
  v2 = *MEMORY[0x277D85DE8];
  return result;
}

double sub_2366D7450(_DWORD *a1, uint64_t a2)
{
  v4 = sub_2366DE2A4(a1[100], a2);
  v5 = *(*(a2 + 120) + 8 * v4);
  v6 = *(*(a2 + 48) + 4 * v4);
  v7 = *(a2 + 240);
  v8 = *(*(v7 + 48) + 4 * v4);
  v9 = *(v7 + 136);
  if (!v4)
  {
    sub_2366E8294((a1 + 78));
  }

  sub_2366BF854(a1, a2);
  if (v6)
  {
    v11 = *(*(a2 + 136) + 8 * v4);
    do
    {
      v13 = *v5++;
      v12 = v13;
      v14 = v4;
      if (v13 >= v8)
      {
        v15 = v12 >> *(v7 + 24);
        v12 &= *(v7 + 20);
        v14 = v15 - 1;
      }

      *v11++ = *(*(v9 + 8 * v14) + 4 * v12);
      --v6;
    }

    while (v6);
  }

  v16 = a1[101];
  v189 = a1;
  v186 = v4;
  if ((v16 - 1) >= 2)
  {
    if ((v16 - 3) < 2)
    {
      *(a2 + 212) = *(v7 + 212);
      v17 = sub_2366DE2A4(a1[100], v10);
      v18 = a1;
      v19 = *(a2 + 240);
      v20 = *(a2 + 72);
      v21 = *(a2 + 136);
      v22 = *(v21 + 8 * v17);
      v23 = *(*(a2 + 48) + 4 * v17);
      v24 = *(*(a2 + 64) + 8 * v17);
      v202 = *(*(a2 + 80) + 8 * v17);
      *(a2 + 212) = *(v19 + 212);
      if (!v17)
      {
        *(a2 + 160) = *(v19 + 160);
        *(v19 + 160) = 0;
      }

      sub_2366DE30C(v18[100]);
      v25 = *(a2 + 160) + 16 * v17;
      sub_2366D7F8C(*v25);
      free(*(v25 + 8));
      v26 = sub_2366D7FD0(v23);
      *v25 = v26;
      v27 = sub_2366EC7D4(v23);
      *(v25 + 8) = v27;
      if (!v17)
      {
        v29 = *(a2 + 128);
        v30 = *(v19 + 128);
        v31 = *v30;
        *(v29 + 8) = *(v30 + 2);
        *v29 = v31;
      }

      v32 = v189;
      v33 = v186;
      if (v23)
      {
        v34 = 0;
        do
        {
          if (*(v22 + 4 * v34) == 2)
          {
            v35 = *(v24 + 4 * v34);
            v36 = v34 + 1;
            v37 = *(v24 + 4 * (v34 + 1));
            if (v35 >= v37)
            {
              v39 = 0;
              v38 = 0;
            }

            else
            {
              v38 = 0;
              v39 = 0;
              v40 = v37 - v35;
              v41 = (v202 + 4 * v35);
              do
              {
                v43 = *v41++;
                v42 = v43;
                v44 = (v43 >> *(a2 + 24)) - 1;
                v45 = v43 >= v23;
                if (v43 < v23)
                {
                  v46 = -1;
                }

                else
                {
                  v46 = *(a2 + 20);
                }

                v47 = v46 & v42;
                if (v45)
                {
                  v48 = v44;
                }

                else
                {
                  v48 = v17;
                }

                v49 = *(*(v21 + 8 * v48) + 4 * v47);
                v28 = *(v20 + 8 * v48);
                v50 = *(v28 + 4 * v47);
                if (v49 == 1)
                {
                  v38 += v50;
                }

                else if (!v49)
                {
                  v39 += v50;
                }

                --v40;
              }

              while (v40);
            }

            v51 = &v27[8 * v34];
            *v51 = v39;
            *(v51 + 1) = v38;
            v52 = v34 - v26[4];
            v53 = *(v26 + 4);
            if (*(v53 + 4 * v52) == -1)
            {
              v54 = *v26;
              *(v53 + 4 * v52) = *v26;
              v55 = *(v26 + 3);
              *v26 = v54 + 1;
              *(v55 + 4 * v54) = v34;
            }
          }

          else
          {
            v36 = v34 + 1;
          }

          v34 = v36;
        }

        while (v36 != v23);
      }

      goto LABEL_140;
    }

    if (v16)
    {
      sub_2366D807C(a1 + 101);
    }

    *(a2 + 208) = *(v7 + 208);
    v96 = sub_2366DE2A4(a1[100], v10);
    v198 = a1[102];
    v97 = *(a2 + 240);
    v185 = a1[124];
    v193 = *(a2 + 136);
    v98 = *(*(a2 + 48) + 4 * v96);
    v99 = *(*(a2 + 120) + 8 * v96);
    v100 = *(*(a2 + 64) + 8 * v96);
    v187 = *(*(a2 + 80) + 8 * v96);
    v188 = *(v193 + 8 * v96);
    v197 = *(*(a2 + 88) + 8 * v96);
    v101 = *(v97 + 144);
    v194 = malloc_type_malloc(4 * v98, 0x100004052888210uLL);
    v102 = malloc_type_malloc(4 * v98, 0x100004052888210uLL);
    if (v98)
    {
      v103 = 0;
      v104 = 0;
      v105 = 0;
      v106 = *(v97 + 48);
      do
      {
        v107 = *(v99 + 4 * v103);
        v108 = v96;
        if (v107 >= *(v106 + 4 * v96))
        {
          v109 = v107 >> *(v97 + 24);
          v107 &= *(v97 + 20);
          v108 = v109 - 1;
        }

        if (*(*(v101 + (v108 << 6) + 16) + 16 * v107 + 4) < 1)
        {
          v110 = v105++;
          v111 = v102;
        }

        else
        {
          v110 = v104++;
          v111 = v194;
        }

        v111[v110] = v103++;
      }

      while (v98 != v103);
    }

    else
    {
      v105 = 0;
      v104 = 0;
    }

    v184 = v102;
    v192 = v100;
    sub_2366DE30C(a1[100]);
    if (!v96)
    {
      memcpy(*(a2 + 128), *(v97 + 128), 4 * v198);
      *(a2 + 144) = v101;
      *(v97 + 144) = 0;
    }

    sub_2366DE30C(a1[100]);
    v112 = v101 + (v96 << 6);
    *(v112 + 24) = 0;
    free(*(v112 + 16));
    sub_2366D7F8C(*(v112 + 8));
    v113 = sub_2366ECB14(v98);
    v114 = v113;
    v195 = v112;
    *(v112 + 16) = v113;
    if (v98)
    {
      v115 = v113;
      v116 = v98;
      do
      {
        *v115++ = xmmword_23681F9A0;
        --v116;
      }

      while (v116);
    }

    v191 = sub_2366D7FD0(v98);
    *(v112 + 8) = v191;
    v117 = malloc_type_malloc(4 * v198, 0x100004052888210uLL);
    v118 = v117;
    v119 = v194;
    v120 = v184;
    if (v198 && v117)
    {
      v204[0] = -1;
      if (v198 >= 0x40)
      {
        for (i = 1; i != 4; ++i)
        {
          if (*(v204 + i) != 255)
          {
            break;
          }
        }
      }

      memset(v117, 255, 4 * v198);
      v119 = v194;
      v120 = v184;
    }

    v123 = v191;
    v122 = v192;
    v124 = v101 + (v96 << 6);
    if (v105)
    {
      v125 = 0;
      while (1)
      {
        v126 = v120[v125];
        v127 = *(v192 + 4 * v126);
        v128 = *(v192 + 4 * (v126 + 1));
        v129 = &v114[v126];
        if (v127 >= v128)
        {
          break;
        }

        v130 = 0;
        v131 = v128 - v127;
        v132 = (v197 + 4 * v127);
        do
        {
          v133 = *v132++;
          v130 += v133;
          --v131;
        }

        while (v131);
        *v129 = v130;
        if (!v130)
        {
          goto LABEL_95;
        }

LABEL_97:
        if (++v125 == v105)
        {
          goto LABEL_98;
        }
      }

      *v129 = 0;
LABEL_95:
      v134 = v126 - v191[4];
      v135 = *(v191 + 4);
      if (*(v135 + 4 * v134) == -1)
      {
        v136 = *v191;
        *(v135 + 4 * v134) = *v191;
        v137 = *(v191 + 3);
        *v191 = v136 + 1;
        *(v137 + 4 * v136) = v126;
      }

      goto LABEL_97;
    }

LABEL_98:
    v138 = v193;
    if (!v104)
    {
LABEL_139:
      v182 = v119;
      free(v118);
      free(v182);
      free(v184);
      v32 = v189;
      sub_2366DE30C(v189[100]);
      v33 = v186;
      goto LABEL_140;
    }

    v139 = 0;
    v196 = v104;
    v190 = v114;
    while (1)
    {
      v140 = v119[v139];
      v141 = *(v122 + 4 * v140);
      v142 = *(v122 + 4 * (v140 + 1));
      v143 = v198 >= v142 - v141 ? v142 - v141 : v198;
      if (v143)
      {
        v203 = v139;
        v199 = v119[v139];
        v144 = *(v124 + 16) + 16 * v140;
        v147 = *(v144 + 12);
        v146 = (v144 + 12);
        v145 = v147;
        if (v147 == -1)
        {
          v145 = *(v124 + 24);
          *v146 = v145;
          *(v124 + 24) = v145 + v143;
        }

        v201 = v143;
        v148 = sub_2366D0B1C(((v143 + v145 - 1) >> *(v124 + 32)) + 1);
        v124 = v195;
        v149 = v148;
        v150 = *(v195 + 28);
        v151 = v150 << v148;
        if (!*(*(v195 + 48) + 8 * v148))
        {
          v152 = malloc_type_malloc(8 * (v150 << v148), 0x100004000313F17uLL);
          v124 = v195;
          *(*(v195 + 48) + 8 * v149) = v152;
        }

        v153 = v151 - v150;
        if (*v146 >= (v151 - v150))
        {
          v154 = *(*(v124 + 48) + 8 * v149) + 8 * (*v146 - (v151 - v150));
          v122 = v192;
          v138 = v193;
          v119 = v194;
          v114 = v190;
          v123 = v191;
          v139 = v203;
          v143 = v201;
        }

        else
        {
          *v146 = v153;
          v143 = v201;
          *(v124 + 24) = v153 + v201;
          v154 = *(*(v124 + 48) + 8 * v149);
          v122 = v192;
          v138 = v193;
          v119 = v194;
          v114 = v190;
          v123 = v191;
          v139 = v203;
        }

        v140 = v199;
      }

      else
      {
        v154 = 0;
      }

      v155 = &v114[v140];
      if (v142 <= v141)
      {
        break;
      }

      v156 = 0;
      v157 = 0;
      v158 = *(v188 + 4 * v140);
      v159 = v142 - v141;
      v160 = (v197 + 4 * v141);
      v161 = (v187 + 4 * v141);
      do
      {
        v163 = *v161++;
        v162 = v163;
        v164 = v96;
        if (v163 >= v98)
        {
          v165 = v162 >> *(a2 + 24);
          v162 &= *(a2 + 20);
          v164 = v165 - 1;
        }

        v166 = *(*(v138 + 8 * v164) + 4 * v162);
        v167 = *v160;
        if (v158 == v166)
        {
          v156 += v167;
        }

        else
        {
          v157 += v167;
          v168 = v118[v166];
          if (v168 == -1)
          {
            v169 = v155[2];
            v118[v166] = v169;
            v170 = (v154 + 8 * v169);
            v170[1] = v166;
            *v170 = *v160;
            v155[2] = v169 + 1;
          }

          else
          {
            *(v154 + 8 * v168) += v167;
          }
        }

        ++v160;
        --v159;
      }

      while (v159);
      *v155 = v156;
      v155[1] = v157;
      if (v157 < 1)
      {
        if (!v156)
        {
          goto LABEL_133;
        }
      }

      else
      {
        if (v185 || v157 >= v156)
        {
          v171 = v140 - v123[4];
          v172 = *(v123 + 4);
          if (*(v172 + 4 * v171) == -1)
          {
            v173 = *v123;
            *(v172 + 4 * v171) = *v123;
            v174 = *(v123 + 3);
            *v123 = v173 + 1;
            *(v174 + 4 * v173) = v140;
          }
        }

        if (v155[2])
        {
          v175 = 0;
          v176 = (v154 + 4);
          do
          {
            v177 = *v176;
            v176 += 2;
            v118[v177] = -1;
            ++v175;
          }

          while (v175 < v155[2]);
        }
      }

LABEL_136:
      if (!v155[2])
      {
        *(v124 + 24) -= v143;
        v155[3] = -1;
      }

      if (++v139 == v196)
      {
        goto LABEL_139;
      }
    }

    *v155 = 0;
LABEL_133:
    v178 = v140 - v123[4];
    v179 = *(v123 + 4);
    if (*(v179 + 4 * v178) == -1)
    {
      v180 = *v123;
      *(v179 + 4 * v178) = *v123;
      v181 = *(v123 + 3);
      *v123 = v180 + 1;
      *(v181 + 4 * v180) = v140;
    }

    goto LABEL_136;
  }

  *(a2 + 208) = *(v7 + 208);
  v56 = sub_2366DE2A4(a1[100], v10);
  v57 = *(a2 + 240);
  v58 = *(*(a2 + 64) + 8 * v56);
  v59 = *(*(a2 + 80) + 8 * v56);
  v60 = *(*(a2 + 88) + 8 * v56);
  v61 = *(*(a2 + 48) + 4 * v56);
  v62 = *(*(a2 + 120) + 8 * v56);
  v63 = *(a2 + 136);
  v200 = *(v63 + 8 * v56);
  v64 = sub_2366D7FD0(*(*(a2 + 48) + 4 * v56));
  v65 = v64;
  if (!v56)
  {
    **(a2 + 128) = **(v57 + 128);
  }

  if (v61)
  {
    v66 = 0;
    v67 = *(v57 + 48);
    v68 = *(v57 + 152);
    do
    {
      v69 = *(v62 + 4 * v66);
      v70 = v56;
      if (v69 >= *(v67 + 4 * v56))
      {
        v71 = v69 >> *(v57 + 24);
        v69 &= *(v57 + 20);
        v70 = v71 - 1;
      }

      if (*(*(*(v68 + 16 * v70) + 32) + 4 * (v69 - *(*(v68 + 16 * v70) + 16))) != -1)
      {
        v72 = v66 - v64[4];
        v73 = *(v64 + 4);
        if (*(v73 + 4 * v72) == -1)
        {
          v74 = *v64;
          *(v73 + 4 * v72) = *v64;
          v75 = *(v64 + 3);
          *v64 = v74 + 1;
          *(v75 + 4 * v74) = v66;
        }
      }

      ++v66;
    }

    while (v61 != v66);
  }

  sub_2366DE30C(v189[100]);
  if (!v56)
  {
    *(a2 + 152) = *(v57 + 152);
    *(v57 + 152) = 0;
  }

  sub_2366DE30C(v189[100]);
  v76 = *(a2 + 152) + 16 * v56;
  free(*(v76 + 8));
  sub_2366D7F8C(*v76);
  v77 = sub_2366EC7D4(v61);
  *v76 = v65;
  *(v76 + 8) = v77;
  v32 = v189;
  v33 = v186;
  v28 = v200;
  if (v61)
  {
    v78 = 0;
    v79 = *(v65 + 4);
    do
    {
      v80 = *(v200 + 4 * v78);
      v81 = &v77[8 * v78];
      *v81 = 0;
      v82 = v78;
      v83 = *(v79 + 4 * (v78 - v65[4]));
      v84 = *(v58 + 4 * v78++);
      v85 = *(v58 + 4 * v78);
      if (v83 == -1)
      {
        if (v84 < v85)
        {
          v95 = *&v81[4 * v80];
          do
          {
            v95 += *(v60 + 4 * v84);
            *&v81[4 * v80] = v95;
            ++v84;
          }

          while (v84 < *(v58 + 4 * v78));
        }
      }

      else
      {
        if (v84 < v85)
        {
          do
          {
            v86 = *(v59 + 4 * v84);
            v87 = v56;
            if (v86 >= v61)
            {
              v88 = v86 >> *(a2 + 24);
              v86 &= *(a2 + 20);
              v87 = v88 - 1;
            }

            v89 = *(*(v63 + 8 * v87) + 4 * v86);
            *&v81[4 * v89] += *(v60 + 4 * v84++);
          }

          while (v84 < *(v58 + 4 * v78));
        }

        if (!*&v81[4 * (v80 ^ 1)])
        {
          v90 = v82 - v65[4];
          v91 = *(v79 + 4 * v90);
          if (v91 != -1)
          {
            v92 = *(v65 + 3);
            v93 = *v65 - 1;
            *v65 = v93;
            v94 = *(v92 + 4 * v93);
            *(v92 + 4 * v91) = v94;
            *(v79 + 4 * (v94 - v65[4])) = *(v79 + 4 * v90);
            *(v79 + 4 * v90) = -1;
          }
        }
      }
    }

    while (v78 != v61);
  }

LABEL_140:
  sub_2366BE8D0(*(a2 + 240), v28);
  if (!v33)
  {
    *(a2 + 240) = 0;

    return sub_2366E82F4((v32 + 78));
  }

  return result;
}

void sub_2366D7F8C(void **a1)
{
  free(a1[4]);
  free(a1[3]);

  free(a1);
}

_DWORD *sub_2366D7FD0(unsigned int a1)
{
  v2 = malloc_type_malloc(0x28uLL, 0x10100405A89562EuLL);
  v2[4] = 0;
  v2[5] = a1;
  *v2 = 0;
  *(v2 + 1) = a1;
  *(v2 + 3) = malloc_type_malloc(4 * a1, 0x100004052888210uLL);
  v3 = *(v2 + 1);
  v4 = malloc_type_malloc(4 * v3, 0x100004052888210uLL);
  v5 = v4;
  if (v3)
  {
    v6 = v4 == 0;
  }

  else
  {
    v6 = 1;
  }

  if (!v6)
  {
    memset(v4, 255, 4 * v3);
  }

  *(v2 + 4) = v5;
  return v2;
}

void sub_2366D807C(_DWORD *a1)
{
  v2 = MEMORY[0x277D85DF8];
  fwrite("ERROR: ", 7uLL, 1uLL, *MEMORY[0x277D85DF8]);
  fprintf(*v2, "Unknown partition type '%d'\n", *a1);
  fflush(*v2);
  abort();
}

uint64_t sub_2366D80D8(_DWORD *a1, unsigned int *a2, uint64_t a3, uint64_t a4)
{
  v6 = a1;
  v8 = sub_2366DE2A4(a1[100], a2);
  v9 = *(*(a2 + 6) + 4 * v8);
  v290 = a2;
  if (!v8)
  {
    sub_2366E8294((v6 + 54));
  }

  v10 = v6[115];
  if (v10 == 4)
  {
    v270 = v9;
    v273 = v8;
    v275 = a4;
    if (a2[25])
    {
      v13 = sub_2366DE2A4(v6[100], v7);
      v14 = sub_2366DE2E4(v6[100]);
      v15 = *(*(a2 + 6) + 4 * v13);
      v278 = *(*(a2 + 8) + 8 * v13);
      v282 = *(a2 + 9);
      v266 = *(*(a2 + 10) + 8 * v13);
      v16 = *(a2 + 15);
      v264 = v6[119];
      v17 = malloc_type_malloc(4 * *a2, 0x100004052888210uLL);
      sub_2366DA360(*(a3 + 8 * v13), v15);
      v18 = sub_2366DE78C(16 * v14, v6[100]);
      v18[v13] = malloc_type_malloc(4 * v15, 0x100004052888210uLL);
      v286 = &v18[v14];
      *(v286 + 8 * v13) = a4;
      *(v16 + 8 * v13) = malloc_type_malloc(4 * v15, 0x100004052888210uLL);
      v293 = *v6 + v13;
      sub_2366DE30C(v6[100]);
      if (v15)
      {
        v19 = 0;
        v20 = vdupq_n_s64(v15 - 1);
        v21 = xmmword_23681F910;
        v22 = xmmword_23681F920;
        v23 = v17 + 2;
        v24 = vdupq_n_s64(4uLL);
        do
        {
          v25 = vmovn_s64(vcgeq_u64(v20, v22));
          if (vuzp1_s16(v25, *v20.i8).u8[0])
          {
            *(v23 - 2) = v19;
          }

          if (vuzp1_s16(v25, *&v20).i8[2])
          {
            *(v23 - 1) = v19 + 1;
          }

          if (vuzp1_s16(*&v20, vmovn_s64(vcgeq_u64(v20, *&v21))).i32[1])
          {
            *v23 = v19 + 2;
            v23[1] = v19 + 3;
          }

          v19 += 4;
          v21 = vaddq_s64(v21, v24);
          v22 = vaddq_s64(v22, v24);
          v23 += 4;
        }

        while (((v15 + 3) & 0x1FFFFFFFCLL) != v19);
        sub_2366DA28C(v17, v15, &v293);
        v26 = 0;
        v27 = 0;
        v28 = 0;
        v29 = 0;
        v30 = v13 + 1;
        v31 = a2;
        while (1)
        {
          if (v15 * 0.7 > (v15 - v29))
          {
            goto LABEL_212;
          }

          v32 = v17[v26];
          v33 = *(a3 + 8 * v13);
          if (*(v33 + 4 * v32) == -1)
          {
            break;
          }

LABEL_63:
          if (++v26 == v15)
          {
            goto LABEL_212;
          }
        }

        v34 = *(v278 + 4 * v32);
        v35 = *(v278 + 4 * (v32 + 1));
        if (v35 == v34)
        {
          if (v26 > v28)
          {
            v28 = v26;
          }

          while (++v28 < v15)
          {
            v34 = v17[v28];
            if (*(v33 + 4 * v34) == -1)
            {
              goto LABEL_31;
            }
          }

          goto LABEL_45;
        }

        if (v34 == v35 + 1)
        {
          LODWORD(v34) = v266[v34];
        }

        else
        {
          if (v35 <= v34)
          {
            goto LABEL_45;
          }

          v40 = v35 - v34;
          v41 = &v266[v34];
          while (1)
          {
            v42 = *v41++;
            LODWORD(v34) = v42;
            v43 = v13;
            v44 = v42;
            if (v42 >= v15)
            {
              v43 = (v34 >> a2[6]) - 1;
              v44 = a2[5] & v34;
            }

            if (*(*(a3 + 8 * v43) + 4 * v44) == -1)
            {
              v46 = (*(v282 + 8 * v43) + 4 * v44);
            }

            else
            {
              v45 = *(*(v16 + 8 * v43) + 4 * v44);
              v46 = (v18[(v45 >> a2[6]) - 1] + 4 * (a2[5] & v45));
            }

            if (*v46 + *(*(v282 + 8 * v13) + 4 * v32) < v264)
            {
              break;
            }

            if (!--v40)
            {
              goto LABEL_45;
            }
          }
        }

LABEL_31:
        if (v34 != v32)
        {
          v36 = v13;
          v37 = v34;
          if (v34 >= v15)
          {
            v36 = (v34 >> a2[6]) - 1;
            v37 = a2[5] & v34;
          }

          if (*(*(a3 + 8 * v36) + 4 * v37) == -1)
          {
            v48 = a2[6];
            v49 = (v30 << v48) | v27;
            *(v18[(v49 >> v48) - 1] + 4 * (v49 & a2[5])) = *(*(v282 + 8 * v13) + 4 * v32) + *(*(v282 + 8 * v36) + 4 * v37);
            *(*(v16 + 8 * v36) + 4 * v37) = v49;
            *(*(v16 + 8 * v13) + 4 * v32) = v49;
            ++v27;
          }

          else
          {
            v38 = *(*(v16 + 8 * v36) + 4 * v37);
            *(*(v16 + 8 * v13) + 4 * v32) = v38;
            v39 = v18[(v38 >> a2[6]) - 1];
            *(v39 + 4 * (a2[5] & v38)) += *(*(v282 + 8 * v13) + 4 * v32);
          }

          v50 = *(a2 + 6);
          if (*(v50 + 4 * v13) > v34)
          {
            v51 = *(v33 + 4 * v34);
            if (v51 == -1)
            {
              *(v33 + 4 * v32) = v34;
            }

            else
            {
              *(v33 + 4 * v32) = v51;
            }

            *(v33 + 4 * v34) = v32;
            goto LABEL_61;
          }

          v53 = a2[5];
          v52 = a2[6];
          v54 = (v34 >> v52) - 1;
          v55 = v53 & v34;
          v56 = *(a3 + 8 * v54);
          v57 = *(v56 + 4 * (v53 & v34));
          if (v57 == -1)
          {
            *(v33 + 4 * v32) = v34;
          }

          else
          {
            if (v57 >= *(v50 + 4 * v54))
            {
              if ((v57 >> v52) - 1 != v13)
              {
                *(v33 + 4 * v32) = v57;
                goto LABEL_60;
              }

              v58 = v57 & v53;
            }

            else
            {
              v58 = v57 | (v34 >> v52 << v52);
            }

            *(v33 + 4 * v32) = v58;
          }

LABEL_60:
          *(v56 + 4 * v55) = (v30 << a2[6]) | v32;
LABEL_61:
          v47 = 1;
          goto LABEL_62;
        }

LABEL_45:
        v47 = 0;
        *(v18[v13] + 4 * v27) = *(*(v282 + 8 * v13) + 4 * v32);
        *(*(v16 + 8 * v13) + 4 * v32) = (v30 << a2[6]) | v27++;
        *(v33 + 4 * v32) = v32;
LABEL_62:
        v29 += v47;
        goto LABEL_63;
      }

      sub_2366DA28C(v17, v15, &v293);
      v31 = a2;
LABEL_212:
      sub_2366DE30C(v6[100]);
      sub_2366DA360(*(v16 + 8 * v13), v15);
      free(v17);
      sub_2366DE30C(v6[100]);
      v12 = sub_2366DA3B8(v15, v13, a3, v16, v286, v31);
      free(v18[v13]);
      sub_2366DE830(v18, v6[100]);
      if (v13)
      {
LABEL_214:
        v8 = v273;
        a4 = v275;
        v9 = v270;
        goto LABEL_215;
      }

LABEL_213:
      ++*v6;
      goto LABEL_214;
    }

    v115 = sub_2366DE2A4(v6[100], v7);
    v116 = sub_2366DE2E4(v6[100]);
    v117 = *(*(a2 + 6) + 4 * v115);
    v268 = *(a2 + 9);
    v118 = *(*(a2 + 8) + 8 * v115);
    v258 = *(*(a2 + 10) + 8 * v115);
    v288 = *(*(a2 + 11) + 8 * v115);
    v119 = *(a2 + 15);
    v284 = v6[119];
    v120 = malloc_type_malloc(4 * *a2, 0x100004052888210uLL);
    sub_2366DA360(*(a3 + 8 * v115), v117);
    v280 = sub_2366DE78C(16 * v116, v6[100]);
    v280[v115] = malloc_type_malloc(4 * v117, 0x100004052888210uLL);
    v260 = &v280[v116];
    *(v260 + 8 * v115) = a4;
    *(v119 + 8 * v115) = malloc_type_malloc(4 * v117, 0x100004052888210uLL);
    v294[0] = *v6 + v115;
    sub_2366DE30C(v6[100]);
    v121 = 0;
    if (v117)
    {
      v122 = v118 + 1;
      v123 = *v118;
      v124 = v117;
      do
      {
        v126 = *v122++;
        v125 = v126;
        v127 = v126 - v123;
        if (v127 > v121)
        {
          v121 = v127;
        }

        v123 = v125;
        --v124;
      }

      while (v124);
    }

    v128 = v121 >> 2;
    v129 = v121;
    v130 = malloc_type_malloc(0x38uLL, 0x1020040D8E0519AuLL);
    *v130 = 0;
    v131 = sub_2366D0B2C(v129);
    *(v130 + 1) = v131;
    *(v130 + 2) = v131;
    *(v130 + 3) = v131 - 1;
    *(v130 + 5) = malloc_type_malloc(12 * v131, 0x10000403E1C8BA9uLL);
    *(v130 + 8) = v128;
    *(v130 + 9) = 0;
    *(v130 + 6) = malloc_type_malloc(12 * v128, 0x10000403E1C8BA9uLL);
    v132 = *(v130 + 2);
    if (v132)
    {
      v133 = (v132 + 3) & 0xFFFFFFFFFFFFFFFCLL;
      v134 = vdupq_n_s64(v132 - 1);
      v135 = xmmword_23681F910;
      v136 = xmmword_23681F920;
      v137 = (*(v130 + 5) + 24);
      v138 = vdupq_n_s64(4uLL);
      do
      {
        v139 = vmovn_s64(vcgeq_u64(v134, v136));
        if (vuzp1_s16(v139, *v134.i8).u8[0])
        {
          *(v137 - 6) = -1;
        }

        if (vuzp1_s16(v139, *&v134).i8[2])
        {
          *(v137 - 3) = -1;
        }

        if (vuzp1_s16(*&v134, vmovn_s64(vcgeq_u64(v134, *&v135))).i32[1])
        {
          *v137 = -1;
          v137[3] = -1;
        }

        v135 = vaddq_s64(v135, v138);
        v136 = vaddq_s64(v136, v138);
        v137 += 12;
        v133 -= 4;
      }

      while (v133);
    }

    if (!v117)
    {
      sub_2366DA28C(v120, v117, v294);
      v152 = v290;
      v154 = v115;
LABEL_255:
      v246 = v154;
      free(*(v130 + 5));
      free(*(v130 + 6));
      free(v130);
      sub_2366DE30C(v6[100]);
      sub_2366DA360(*(v119 + 8 * v246), v117);
      free(v120);
      sub_2366DE30C(v6[100]);
      v12 = sub_2366DA3B8(v117, v115, a3, v119, v260, v152);
      free(v280[v246]);
      sub_2366DE830(v280, v6[100]);
      if (v115)
      {
        goto LABEL_214;
      }

      goto LABEL_213;
    }

    v140 = 0;
    v141 = vdupq_n_s64(v117 - 1);
    v142 = xmmword_23681F910;
    v143 = xmmword_23681F920;
    v144 = v120 + 2;
    v145 = vdupq_n_s64(4uLL);
    do
    {
      v146 = vmovn_s64(vcgeq_u64(v141, v143));
      if (vuzp1_s16(v146, *v141.i8).u8[0])
      {
        *(v144 - 2) = v140;
      }

      if (vuzp1_s16(v146, *&v141).i8[2])
      {
        *(v144 - 1) = v140 + 1;
      }

      if (vuzp1_s16(*&v141, vmovn_s64(vcgeq_u64(v141, *&v142))).i32[1])
      {
        *v144 = v140 + 2;
        v144[1] = v140 + 3;
      }

      v140 += 4;
      v142 = vaddq_s64(v142, v145);
      v143 = vaddq_s64(v143, v145);
      v144 += 4;
    }

    while (((v117 + 3) & 0x1FFFFFFFCLL) != v140);
    sub_2366DA28C(v120, v117, v294);
    v147 = 0;
    v148 = 0;
    v149 = 0;
    v150 = 0;
    v151 = v115 + 1;
    v152 = v290;
    v153 = v118;
    v154 = v115;
    while (1)
    {
      if (v117 * 0.7 > (v117 - v150))
      {
        goto LABEL_255;
      }

      v155 = v120[v147];
      v156 = *(a3 + 8 * v154);
      if (*(v156 + 4 * v155) == -1)
      {
        break;
      }

LABEL_194:
      if (++v147 == v117)
      {
        goto LABEL_255;
      }
    }

    v157 = v153[v155];
    v158 = v153[v155 + 1];
    if (v157 == v158)
    {
      if (v147 > v149)
      {
        v149 = v147;
      }

      while (++v149 < v117)
      {
        v159 = v120[v149];
        if (*(v156 + 4 * v159) == -1)
        {
          goto LABEL_186;
        }
      }

      goto LABEL_192;
    }

    if (v157 == v158 + 1)
    {
      LODWORD(v159) = *(v258 + 4 * v157);
    }

    else
    {
      if (v157 >= v158)
      {
        *(v130 + 9) = 0;
        goto LABEL_192;
      }

      v160 = *(v290 + 168);
      v161 = v153[v155];
      do
      {
        v162 = *(v258 + 4 * v161);
        v163 = v115;
        if (v162 >= v117)
        {
          v163 = (v162 >> *(v290 + 24)) - 1;
          v162 &= *(v290 + 20);
        }

        if (*(*(a3 + 8 * v163) + 4 * v162) != -1)
        {
          v164 = *(*(v119 + 8 * v163) + 4 * v162);
          v165 = *(v288 + 4 * v161);
          v166 = *(v130 + 3) & v164;
          v167 = *(v130 + 5);
          v168 = (v167 + 12 * v166);
          if (*v168 == v164)
          {
LABEL_157:
            v168[1] += v165;
          }

          else if (*v168 == -1)
          {
            *v168 = v164;
            v170 = v167 + 12 * v166;
            *(v170 + 4) = v165;
            *(v170 + 8) = -1;
            ++*v130;
          }

          else
          {
            while (1)
            {
              v169 = v168[2];
              if ((v169 & 0x80000000) != 0)
              {
                break;
              }

              v168 = (*(v130 + 6) + 12 * v169);
              if (*v168 == v164)
              {
                goto LABEL_157;
              }
            }
          }
        }

        ++v161;
      }

      while (v161 != v158);
      v171 = 0;
      v172 = v157;
      LODWORD(v159) = v155;
      do
      {
        v173 = *(v258 + 4 * v172);
        v174 = v115;
        v175 = v173;
        if (v173 >= v117)
        {
          v174 = (v173 >> *(v290 + 24)) - 1;
          v175 = *(v290 + 20) & v173;
        }

        if (*(*(a3 + 8 * v174) + 4 * v175) == -1)
        {
          v180 = *(v288 + 4 * v172);
          v177 = *(v268[v174] + 4 * v175);
        }

        else
        {
          v176 = *(*(v119 + 8 * v174) + 4 * v175);
          v177 = *(v280[(v176 >> *(v290 + 24)) - 1] + 4 * (*(v290 + 20) & v176));
          v178 = (*(v130 + 5) + 12 * (*(v130 + 3) & v176));
          if (*v178 == v176)
          {
LABEL_168:
            v180 = v178[1];
          }

          else
          {
            if (*v178 != -1)
            {
              while (1)
              {
                v179 = v178[2];
                if ((v179 & 0x80000000) != 0)
                {
                  break;
                }

                v178 = (*(v130 + 6) + 12 * v179);
                if (*v178 == v176)
                {
                  goto LABEL_168;
                }
              }
            }

            v180 = -1;
          }
        }

        if (v177 + *(v268[v115] + 4 * v155) < v284)
        {
          v181 = vcvtpd_s64_f64(v180 / sqrt(v177));
          if (v171 < v181 || (v171 == v181 ? (v182 = v177 < v160) : (v182 = 0), v182))
          {
            v160 = v177;
            v171 = v181;
            LODWORD(v159) = *(v258 + 4 * v172);
          }
        }

        ++v172;
      }

      while (v172 != v158);
      *(v130 + 9) = 0;
      v183 = v158 - v157;
      v184 = (v258 + 4 * v157);
      v153 = v118;
      v154 = v115;
      do
      {
        v186 = *v184++;
        v185 = v186;
        v187 = v115;
        if (v186 >= v117)
        {
          v187 = (v185 >> *(v290 + 24)) - 1;
          v185 &= *(v290 + 20);
        }

        if (*(*(a3 + 8 * v187) + 4 * v185) != -1)
        {
          v188 = (*(v130 + 5) + 12 * (*(v130 + 3) & *(*(v119 + 8 * v187) + 4 * v185)));
          *v188 = -1;
          v188[2] = -1;
        }

        --v183;
      }

      while (v183);
    }

LABEL_186:
    if (v159 != v155)
    {
      v189 = v115;
      v190 = v159;
      if (v159 >= v117)
      {
        v189 = (v159 >> *(v290 + 24)) - 1;
        v190 = *(v290 + 20) & v159;
      }

      if (*(*(a3 + 8 * v189) + 4 * v190) == -1)
      {
        v194 = *(v290 + 24);
        v195 = (v151 << v194) | v148;
        *(v280[(v195 >> v194) - 1] + 4 * (v195 & *(v290 + 20))) = *(v268[v115] + 4 * v155) + *(v268[v189] + 4 * v190);
        v153 = v118;
        v154 = v115;
        *(*(v119 + 8 * v189) + 4 * v190) = v195;
        *(*(v119 + 8 * v115) + 4 * v155) = v195;
        ++v148;
      }

      else
      {
        v191 = *(*(v119 + 8 * v189) + 4 * v190);
        *(*(v119 + 8 * v154) + 4 * v155) = v191;
        v192 = v280[(v191 >> *(v290 + 24)) - 1];
        *(v192 + 4 * (*(v290 + 20) & v191)) += *(v268[v154] + 4 * v155);
      }

      v196 = *(v290 + 48);
      if (*(v196 + 4 * v154) > v159)
      {
        v197 = *(v156 + 4 * v159);
        if (v197 == -1)
        {
          *(v156 + 4 * v155) = v159;
        }

        else
        {
          *(v156 + 4 * v155) = v197;
        }

        *(v156 + 4 * v159) = v155;
        v193 = 1;
        goto LABEL_193;
      }

      v199 = *(v290 + 20);
      v198 = *(v290 + 24);
      v200 = (v159 >> v198) - 1;
      v201 = v199 & v159;
      v202 = *(a3 + 8 * v200);
      v203 = *(v202 + 4 * (v199 & v159));
      if (v203 == -1)
      {
        *(v156 + 4 * v155) = v159;
      }

      else
      {
        if (v203 >= *(v196 + 4 * v200))
        {
          if ((v203 >> v198) - 1 != v115)
          {
            *(v156 + 4 * v155) = v203;
            goto LABEL_210;
          }

          v204 = v203 & v199;
        }

        else
        {
          v204 = v203 | (v159 >> v198 << v198);
        }

        *(v156 + 4 * v155) = v204;
      }

LABEL_210:
      *(v202 + 4 * v201) = (v151 << *(v290 + 24)) | v155;
      v193 = 1;
      v153 = v118;
      v154 = v115;
      goto LABEL_193;
    }

LABEL_192:
    v193 = 0;
    *(v280[v154] + 4 * v148) = *(v268[v154] + 4 * v155);
    *(*(v119 + 8 * v154) + 4 * v155) = (v151 << *(v290 + 24)) | v148++;
    *(v156 + 4 * v155) = v155;
LABEL_193:
    v150 += v193;
    goto LABEL_194;
  }

  if (v10 != 1)
  {
    if (v10)
    {
      sub_2366DAA2C(v6 + 115);
    }

    goto LABEL_8;
  }

  if (!a2[25])
  {
    v292 = 0;
    v59 = sub_2366DE2A4(v6[100], v7);
    v60 = v59;
    v61 = *(a2 + 15);
    v62 = v59;
    v63 = *(*(v290 + 48) + 4 * v59);
    if (!v63)
    {
      v67 = 0;
LABEL_253:
      sub_2366DE30C(v6[100]);
      *(v61 + 8 * v62) = v67;
      v11 = sub_2366DA030(v290, a3, v61, a4);
      goto LABEL_9;
    }

    v262 = *(v290 + 120);
    v271 = v9;
    v276 = a4;
    v64 = v59;
    v65 = *(*(v290 + 64) + 8 * v59);
    v279 = *(*(v290 + 80) + 8 * v59);
    v257 = *(v290 + 72);
    v283 = *(v257 + 8 * v59);
    v287 = v6[119];
    v267 = *(*(v290 + 88) + 8 * v59);
    v66 = *(a3 + 8 * v59);
    v67 = malloc_type_malloc(4 * v63, 0x100004052888210uLL);
    v68 = malloc_type_malloc(4 * v63, 0x100004052888210uLL);
    v69 = malloc_type_malloc(4 * v63, 0x100004052888210uLL);
    v259 = v64;
    v70 = ((*(*(v290 + 56) + 4 * v64) / v63) * 0.7 + 1.0);
    v71 = (v65 + 4);
    v72 = v63;
    v73 = v69;
    do
    {
      v74 = *v71 - *(v71 - 1);
      if (v74 >= v70)
      {
        v74 = v70;
      }

      *v73++ = v74;
      ++v71;
      --v72;
    }

    while (v72);
    v75 = 0;
    v76 = vdupq_n_s64(v63 - 1);
    v77 = xmmword_23681F910;
    v78 = xmmword_23681F920;
    v79 = v68 + 2;
    v80 = vdupq_n_s64(4uLL);
    do
    {
      v81 = vmovn_s64(vcgeq_u64(v76, v78));
      if (vuzp1_s16(v81, *v76.i8).u8[0])
      {
        *(v79 - 2) = v75;
      }

      if (vuzp1_s16(v81, *&v76).i8[2])
      {
        *(v79 - 1) = v75 + 1;
      }

      if (vuzp1_s16(*&v76, vmovn_s64(vcgeq_u64(v76, *&v77))).i32[1])
      {
        *v79 = v75 + 2;
        v79[1] = v75 + 3;
      }

      v75 += 4;
      v77 = vaddq_s64(v77, v80);
      v78 = vaddq_s64(v78, v80);
      v79 += 4;
    }

    while (((v63 + 3) & 0x1FFFFFFFCLL) != v75);
    v292 = *v6 + v60;
    sub_2366D9EFC(v68, v63 >> 3, v63, &v292);
    v292 = *v6 + v60;
    sub_2366D9EFC(v69, v63 >> 3, v63, &v292);
    v82 = malloc_type_calloc(v70 + 2, 8uLL, 0x100004000313F17uLL);
    for (i = 0; i != v63; ++i)
    {
      ++v82[v69[i] + 1];
    }

    v84 = v82[1];
    v82[1] = 0;
    if (v70)
    {
      v85 = v82[1];
      v86 = v82 + 2;
      do
      {
        v85 += v84;
        v84 = *v86;
        *v86++ = v85;
        --v70;
      }

      while (v70);
    }

    for (j = 0; j != v63; ++j)
    {
      v88 = v68[j];
      v89 = v69[j] + 1;
      v90 = v82[v89];
      v82[v89] = v90 + 1;
      v67[v90] = v88;
    }

    free(v82);
    free(v68);
    free(v69);
    v91 = 0;
    v92 = 0;
    v93 = v60 + 1;
    a4 = v276;
    v9 = v271;
    v94 = v283;
    while (1)
    {
      v95 = v67[v91];
      if (*(v66 + 4 * v95) == -1)
      {
        break;
      }

LABEL_112:
      if (++v91 == v63)
      {
        v62 = v259;
        v61 = v262;
        goto LABEL_253;
      }
    }

    v96 = *(v94 + 4 * v95);
    v97 = *(v290 + 24);
    v98 = (v93 << v97) | v95;
    if (v96 < v287)
    {
      v99 = *(v65 + 4 * (v95 + 1));
      v100 = *(v65 + 4 * v95);
      if (v99 == v100)
      {
        if (v92 <= v91)
        {
          v92 = v91;
        }

        v101 = v92 + 1;
        while (1)
        {
          v92 = v101;
          if (v101 >= v63)
          {
            break;
          }

          v99 = v67[v101++];
          if (*(v66 + 4 * v99) == -1)
          {
            goto LABEL_106;
          }
        }
      }

      else if (v100 < v99)
      {
        v102 = 0;
        v103 = (v100 + v91) & 1;
        v104 = v99 - v100;
        v105 = &v267[4 * v100];
        LODWORD(v99) = (v93 << v97) | v95;
        v106 = (v279 + 4 * v100);
        do
        {
          v108 = *v106++;
          v107 = v108;
          v109 = v60;
          v110 = v108;
          if (v108 >= v63)
          {
            v109 = (v107 >> v97) - 1;
            v110 = *(v290 + 20) & v107;
          }

          v112 = *v105;
          v105 += 4;
          v111 = v112;
          if (v102 < v112 + v103 && *(*(v257 + 8 * v109) + 4 * v110) + v96 <= v287 && *(*(a3 + 8 * v109) + 4 * v110) == -1)
          {
            v102 = v111;
            LODWORD(v99) = v107;
          }

          --v104;
        }

        while (v104);
        v94 = v283;
        v93 = v60 + 1;
        goto LABEL_106;
      }
    }

    LODWORD(v99) = (v93 << v97) | v95;
LABEL_106:
    if (v99 >= v63)
    {
      v113 = (v99 >> v97) - 1;
      v114 = *(v290 + 20) & v99;
      if (v98 >= v99)
      {
        if (v98 > v99)
        {
          *(*(a3 + 8 * v113) + 4 * v114) = v98;
          *(v66 + 4 * v95) = v99;
        }
      }

      else
      {
        *(v66 + 4 * v95) = v99;
        *(*(a3 + 8 * v113) + 4 * v114) = v98;
      }
    }

    else
    {
      *(v66 + 4 * v95) = v99;
      *(v66 + 4 * v99) = v95;
    }

    goto LABEL_112;
  }

LABEL_8:
  v11 = sub_2366D9830(v6, a2, a3, a4);
LABEL_9:
  v12 = v11;
  if (!v6[117])
  {
    goto LABEL_263;
  }

LABEL_215:
  v205 = v290;
  if (vcvtd_n_f64_u32(v9, 2uLL) >= (v9 - 2 * v12))
  {
    goto LABEL_264;
  }

  v272 = v9;
  v274 = v8;
  v206 = v9;
  v277 = a4;
  v12 = sub_2366D9B24(v6, v290, a3, a4, v12, 1u);
  v208 = sub_2366DE2A4(v6[100], v207);
  v209 = v6;
  v210 = *(*(v290 + 48) + 4 * v208);
  v211 = *(*(v290 + 64) + 8 * v208);
  v212 = *(*(v290 + 80) + 8 * v208);
  v281 = *(*(v290 + 72) + 8 * v208);
  v213 = *(a3 + 8 * v208);
  v214 = *(*(v290 + 120) + 8 * v208);
  v263 = v209;
  v215 = v209[119];
  v289 = malloc_type_malloc(0x100uLL, 0x100004052888210uLL);
  v285 = malloc_type_malloc(0x100uLL, 0x100004052888210uLL);
  v216 = malloc_type_malloc(16 * v210, 0x1000040F7F8B94BuLL);
  if (v210)
  {
    v217 = 0;
    v218 = 0;
    v220 = v285;
    v219 = v289;
    do
    {
      v221 = v217;
      v222 = *(v213 + 4 * v217++);
      if (v221 == v222 && (*(v211 + 4 * v217) - *(v211 + 4 * v221)) <= 0x40 && *(v281 + 4 * v221) < v215)
      {
        v223 = &v216[v218];
        *v223 = v221;
        v224 = *(v211 + 4 * v217);
        v225 = *(v211 + 4 * v221);
        v226 = (v224 - v225);
        if (v224 > v225)
        {
          v227 = v224 - v225;
          v228 = (v212 + 4 * v225);
          do
          {
            v229 = *v228++;
            v226 += v229 + v229 * v229;
            --v227;
          }

          while (v227);
        }

        *(v223 + 1) = v226;
        ++v218;
      }
    }

    while (v217 != v210);
    if (v218)
    {
      v269 = v216;
      v265 = v218;
      sub_2366DA6E4(v216, v218);
      v230 = v265 - 1;
      if (v265 == 1)
      {
        v220 = v285;
        v219 = v289;
        v216 = v269;
      }

      else
      {
        v254 = v215;
        v253 = v214;
        v231 = 0;
        v252 = v208 + 1;
        v220 = v285;
        v219 = v289;
        v232 = v281;
        v216 = v269;
        do
        {
          v233 = &v216[v231];
          v234 = *v233;
          ++v231;
          if (*(v213 + 4 * *v233) == *v233)
          {
            v235 = &v216[v231];
            if (*(v233 + 1) == *(v235 + 1))
            {
              v236 = (*(v211 + 4 * (v234 + 1)) - *(v211 + 4 * v234));
              LODWORD(v237) = *v235;
              if (v236 == *(v211 + 4 * (v237 + 1)) - *(v211 + 4 * v237) && *(v232 + 4 * v237) < v254 - *(v232 + 4 * v234))
              {
                v256 = *(v211 + 4 * (v234 + 1));
                v255 = *(v211 + 4 * v234);
                v261 = v254 - *(v232 + 4 * v234);
                __memcpy_chk();
                sub_2366DA89C(v289, v236);
                v238 = v261;
                v239 = v265;
                v216 = v269;
                v232 = v281;
                v220 = v285;
                v219 = v289;
                v240 = v231;
                while (1)
                {
                  if (*(v213 + 4 * v237) == v237 && *(v232 + 4 * v237) < v238)
                  {
                    v241 = *(v211 + 4 * v237);
                    __memcpy_chk();
                    sub_2366DA89C(v220, v236);
                    if (v256 == v255)
                    {
                      LODWORD(v242) = 0;
                      v243 = v290;
                      v220 = v285;
                      v219 = v289;
                      v232 = v281;
                      v216 = v269;
                      v239 = v265;
                      v238 = v261;
                    }

                    else
                    {
                      v242 = 0;
                      v243 = v290;
                      v220 = v285;
                      v219 = v289;
                      v232 = v281;
                      v216 = v269;
                      v239 = v265;
                      v238 = v261;
                      while (v289[v242] == v285[v242])
                      {
                        if (v236 == ++v242)
                        {
                          goto LABEL_247;
                        }
                      }
                    }

                    if (v242 == v236)
                    {
                      break;
                    }
                  }

                  if (++v240 != v239)
                  {
                    v244 = &v216[v240];
                    if (*(v233 + 1) == *(v244 + 1))
                    {
                      v237 = *v244;
                      if (v236 == *(v211 + 4 * (v237 + 1)) - *(v211 + 4 * v237))
                      {
                        continue;
                      }
                    }
                  }

                  goto LABEL_248;
                }

LABEL_247:
                *(v277 + 4 * v12) = v234;
                v245 = (v252 << *(v243 + 24)) | v12;
                v12 = (v12 + 1);
                *(v253 + 4 * v237) = v245;
                *(v253 + 4 * v234) = v245;
                *(v213 + 4 * v237) = v234;
                *(v213 + 4 * v234) = v237;
LABEL_248:
                v230 = v265 - 1;
              }
            }
          }
        }

        while (v231 != v230);
      }
    }
  }

  else
  {
    v220 = v285;
    v219 = v289;
  }

  v247 = v219;
  free(v216);
  free(v247);
  free(v220);
  v9 = v272;
  v248 = (v272 - 2 * v12);
  v6 = v263;
  if (v206 * 0.375 >= v248)
  {
    v8 = v274;
    a4 = v277;
  }

  else
  {
    a4 = v277;
    v12 = sub_2366D9B24(v263, v290, a3, v277, v12, 2u);
    v248 = (v272 - 2 * v12);
    v8 = v274;
  }

  if (v206 * 0.5 < v248)
  {
    v205 = v290;
    v12 = sub_2366D9B24(v263, v290, a3, a4, v12, 2u);
  }

  else
  {
LABEL_263:
    v205 = v290;
  }

LABEL_264:
  if (v9)
  {
    v249 = 0;
    v250 = *(a3 + 8 * v8);
    do
    {
      if (v249 == *(v250 + 4 * v249))
      {
        *(*(*(v205 + 120) + 8 * v8) + 4 * v249) = ((v8 + 1) << *(v205 + 24)) | v12;
        *(a4 + 4 * v12) = v249;
        v12 = (v12 + 1);
      }

      ++v249;
    }

    while (v9 != v249);
  }

  sub_2366DE30C(v6[100]);
  if (!v8)
  {
    sub_2366E82F4((v6 + 54));
  }

  return v12;
}

uint64_t sub_2366D9830(_DWORD *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v7 = sub_2366DE2A4(a1[100], a2);
  v8 = *(a2 + 72);
  v9 = *(a2 + 120);
  v10 = *(*(a2 + 48) + 4 * v7);
  v42 = *(*(a2 + 64) + 8 * v7);
  v11 = a1[119];
  v12 = *(v8 + 8 * v7);
  v13 = *(*(a2 + 80) + 8 * v7);
  v14 = malloc_type_malloc(4 * v10, 0x100004052888210uLL);
  *(v9 + 8 * v7) = v14;
  v44 = *a1 + v7;
  if (v10)
  {
    v15 = 0;
    v16 = vdupq_n_s64(v10 - 1);
    v17 = xmmword_23681F910;
    v18 = xmmword_23681F920;
    v19 = v14 + 2;
    v20 = vdupq_n_s64(4uLL);
    do
    {
      v21 = vmovn_s64(vcgeq_u64(v16, v18));
      if (vuzp1_s16(v21, *v16.i8).u8[0])
      {
        *(v19 - 2) = v15;
      }

      if (vuzp1_s16(v21, *&v16).i8[2])
      {
        *(v19 - 1) = v15 + 1;
      }

      if (vuzp1_s16(*&v16, vmovn_s64(vcgeq_u64(v16, *&v17))).i32[1])
      {
        *v19 = v15 + 2;
        v19[1] = v15 + 3;
      }

      v15 += 4;
      v17 = vaddq_s64(v17, v20);
      v18 = vaddq_s64(v18, v20);
      v19 += 4;
    }

    while (((v10 + 3) & 0x1FFFFFFFCLL) != v15);
    v22 = sub_2366D9EFC(v14, v10 >> 3, v10, &v44);
    v23 = 0;
    v24 = 0;
    v25 = *(a3 + 8 * v7);
    v26 = v7 + 1;
    while (1)
    {
      v27 = v22[v23];
      if (*(v25 + 4 * v27) == -1)
      {
        break;
      }

LABEL_36:
      if (++v23 == v10)
      {
        goto LABEL_39;
      }
    }

    v28 = *(a2 + 24);
    v29 = (v26 << v28) | v27;
    v30 = *(v12 + 4 * v27);
    if (v30 < v11)
    {
      v31 = *(v42 + 4 * (v27 + 1));
      v32 = *(v42 + 4 * v27);
      if (v31 != v32)
      {
        v36 = (v32 + v23) % (v31 - v32) + v32;
        while (1)
        {
          v35 = *(v13 + 4 * v36);
          v37 = v7;
          v38 = v35;
          if (v35 >= v10)
          {
            v37 = (v35 >> v28) - 1;
            v38 = *(a2 + 20) & v35;
          }

          if (*(*(v8 + 8 * v37) + 4 * v38) + v30 <= v11 && *(*(a3 + 8 * v37) + 4 * v38) == -1)
          {
            goto LABEL_30;
          }

          if (v36 + 1 == v31)
          {
            v36 = *(v42 + 4 * v27);
          }

          else
          {
            ++v36;
          }

          if (v36 == (v32 + v23) % (v31 - v32) + v32)
          {
            goto LABEL_29;
          }
        }
      }

      if (v24 <= v23)
      {
        v24 = v23;
      }

      v33 = v24 + 1;
      while (1)
      {
        v24 = v33;
        if (v33 >= v10)
        {
          break;
        }

        v34 = v22[v33++];
        if (*(v25 + 4 * v34) == -1)
        {
          v35 = v34 | (v26 << v28);
          goto LABEL_30;
        }
      }
    }

LABEL_29:
    v35 = (v26 << v28) | v27;
LABEL_30:
    if (v35 >= v10)
    {
      v39 = (v35 >> v28) - 1;
      v40 = *(a2 + 20) & v35;
      if (v29 >= v35)
      {
        if (v29 > v35)
        {
          *(*(a3 + 8 * v39) + 4 * v40) = v29;
          *(v25 + 4 * v27) = v35;
        }
      }

      else
      {
        *(v25 + 4 * v27) = v35;
        *(*(a3 + 8 * v39) + 4 * v40) = v29;
      }
    }

    else
    {
      *(v25 + 4 * v27) = v35;
      *(v25 + 4 * v35) = v27;
    }

    goto LABEL_36;
  }

  sub_2366D9EFC(v14, 0, v10, &v44);
LABEL_39:
  sub_2366DE30C(a1[100]);
  return sub_2366DA030(a2, a3, v9, a4);
}

uint64_t sub_2366D9B24(uint64_t a1, void *a2, uint64_t a3, uint64_t a4, unsigned int a5, unsigned int a6)
{
  v9 = sub_2366DE2A4(*(a1 + 400), a2);
  v10 = *(a2[6] + 4 * v9);
  v11 = *(a2[8] + 8 * v9);
  v12 = *(a2[10] + 8 * v9);
  v13 = *(a2[9] + 8 * v9);
  v14 = *(a1 + 476);
  v64 = *(a2[15] + 8 * v9);
  v67 = a3;
  v15 = *(a3 + 8 * v9);
  v16 = (v10 * 2.3);
  v17 = malloc_type_calloc((v10 + 1), 4uLL, 0x100004052888210uLL);
  v65 = a2;
  v70 = v9;
  v18 = malloc_type_malloc(4 * *(a2[7] + 4 * v9), 0x100004052888210uLL);
  v19 = sub_2366DA690(v16);
  v20 = malloc_type_malloc(4 * v10, 0x100004052888210uLL);
  v21 = v10;
  v22 = v20;
  if (!v21)
  {
    v38 = 0;
    v39 = 1;
    goto LABEL_41;
  }

  v23 = 0;
  v24 = 0;
  v25 = *(v67 + 8 * v70);
  do
  {
    v26 = v23;
    v27 = *(v25 + 4 * v23++);
    if (v26 == v27)
    {
      v28 = *(v11 + 4 * v23);
      v29 = *(v11 + 4 * v26);
      if (v28 - v29 <= a6 && *(v13 + 4 * v26) < v14 && v28 > v29)
      {
        v31 = v24;
        while (1)
        {
          v32 = *(v12 + 4 * v29);
          v33 = v19[v32 % v16];
          if (v33 != -1)
          {
            break;
          }

          v24 = v21;
          if (v31 != v21)
          {
            *(v20 + v31) = v32;
            v34 = v31 + 1;
            v19[v32 % v16] = v31;
            v31 = (v31 + 1);
LABEL_16:
            ++v17[v34];
            v28 = *(v11 + 4 * v23);
LABEL_17:
            v24 = v31;
          }

          ++v29;
          v31 = v24;
          if (v29 >= v28)
          {
            goto LABEL_19;
          }
        }

        if (*(v20 + v33) == v32)
        {
          v34 = v33 + 1;
          goto LABEL_16;
        }

        goto LABEL_17;
      }
    }

LABEL_19:
    ;
  }

  while (v23 != v21);
  v35 = v24 == 0;
  if (v24)
  {
    v36 = v17[1];
    v17[1] = 0;
    if (v24 == 1)
    {
      v37 = 1;
    }

    else
    {
      v40 = v17[1];
      v37 = v24;
      v41 = v24 - 1;
      v42 = v17 + 2;
      do
      {
        v40 += v36;
        v36 = *v42;
        *v42++ = v40;
        --v41;
      }

      while (v41);
    }
  }

  else
  {
    v37 = 0;
  }

  v43 = 0;
  v44 = *(v67 + 8 * v70);
  do
  {
    v45 = v43;
    v46 = *(v44 + 4 * v43++);
    if (v45 == v46)
    {
      v47 = *(v11 + 4 * v43);
      v48 = *(v11 + 4 * v45);
      if (v47 - v48 <= a6 && *(v13 + 4 * v45) < v14 && v47 > v48)
      {
        do
        {
          v50 = *(v12 + 4 * v48);
          v51 = v19[v50 % v16];
          if (v51 != -1 && *(v20 + v51) == v50)
          {
            v52 = v51 + 1;
            v53 = v17[(v51 + 1)];
            v17[v52] = v53 + 1;
            v18[v53] = v45;
            v47 = *(v11 + 4 * v43);
          }

          ++v48;
        }

        while (v48 < v47);
      }
    }
  }

  while (v43 != v21);
  v38 = v37;
  v39 = v35;
LABEL_41:
  free(v19);
  free(v22);
  v54 = a5;
  if ((v39 & 1) == 0)
  {
    v55 = 0;
    do
    {
      v56 = v55 + 1;
      LODWORD(v57) = v17[v55 + 1];
      v58 = v17[v55];
      if ((v57 - v58) >= 2 && v57 > v58)
      {
        do
        {
          v60 = v18[v58];
          if (*(v15 + 4 * v60) == v60)
          {
            v57 = (v57 - 1);
            if (v58 < v57)
            {
              while (1)
              {
                v61 = v18[v57];
                if (*(v15 + 4 * v61) == v61 && *(v13 + 4 * v61) + *(v13 + 4 * v60) < v14)
                {
                  break;
                }

                if (v58 >= --v57)
                {
                  LODWORD(v57) = v58;
                  goto LABEL_55;
                }
              }

              *(a4 + 4 * v54) = v60;
              v62 = ((v70 + 1) << *(v65 + 6)) | v54;
              v54 = (v54 + 1);
              *(v64 + 4 * v61) = v62;
              *(v64 + 4 * v60) = v62;
              *(v15 + 4 * v60) = v61;
              *(v15 + 4 * v61) = v60;
            }
          }

LABEL_55:
          ++v58;
        }

        while (v58 < v57);
      }

      v55 = v56;
    }

    while (v56 != v38);
  }

  free(v17);
  free(v18);
  return v54;
}

int *sub_2366D9EFC(int *a1, unint64_t a2, unint64_t a3, unsigned int *a4)
{
  if (a3)
  {
    v7 = a2;
    if (a2 <= a3)
    {
      if (a3 > 9)
      {
        if (a2)
        {
          v12 = a3 - 3;
          v13 = (a3 - 3) / a2;
          v14 = 0.0;
          do
          {
            v15 = &a1[sub_2366D0B60(0, v12, a4)];
            v16 = v15[1];
            v17 = &a1[v14];
            v15[1] = *v17;
            *v17 = v16;
            v18 = v15[3];
            v15[3] = v17[1];
            v17[1] = v18;
            v19 = *v15;
            *v15 = v17[2];
            v17[2] = v19;
            v20 = v15[2];
            v15[2] = v17[3];
            v17[3] = v20;
            v14 = v13 + v14;
            --v7;
          }

          while (v7);
        }
      }

      else
      {
        v8 = a3;
        do
        {
          v9 = sub_2366D0B60(0, a3, a4);
          v10 = sub_2366D0B60(0, a3, a4);
          v11 = a1[v10];
          a1[v10] = a1[v9];
          a1[v9] = v11;
          --v8;
        }

        while (v8);
      }
    }

    else
    {
      sub_2366DA28C(a1, a3, a4);
    }
  }

  return a1;
}

uint64_t sub_2366DA030(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v8 = sub_2366DE2A4(*(a1 + 12), a2);
  v9 = *(*(a1 + 48) + 4 * v8);
  if (v9)
  {
    v10 = 0;
    v11 = 0;
    v12 = v8;
    v13 = *(a1 + 64);
    v14 = v8 + 1;
    v15 = *(a2 + 8 * v8);
    while (1)
    {
      v16 = *(v15 + 4 * v10);
      if (v16 == -1)
      {
        goto LABEL_18;
      }

      if (v16 >= v9)
      {
        break;
      }

      if (v10 != *(v15 + 4 * v16))
      {
        goto LABEL_18;
      }

LABEL_19:
      if (v16 < v9 && v10 < v16)
      {
        *(*(a3 + 8 * v8) + 4 * v10) = (v14 << *(a1 + 24)) | v11;
        *(a4 + 4 * v11) = v10;
        v11 = (v11 + 1);
      }

      if (v9 == ++v10)
      {
        sub_2366DE30C(*(a1 + 12));
        v28 = *(a2 + 8 * v12);
        v29 = 4 * v9;
        v30 = (v9 - 1);
        v31 = v9;
        while (1)
        {
          v32 = *(v28 + 4 * v30);
          if (v32 >= v9)
          {
            v34 = *(a1 + 24);
            v35 = v14 << v34;
            v33 = (v32 >> v34) - 1;
            v36 = *(a1 + 20) & v32;
            v37 = *(*(v13 + 8 * v12) + v29) - *(*(v13 + 8 * v12) + 4 * v30);
            v38 = v35 | v30;
            v39 = *(*(v13 + 8 * v33) + 4 * (v36 + 1)) - *(*(v13 + 8 * v33) + 4 * v36);
            if (v38 == v32 || v37 > v39)
            {
              goto LABEL_41;
            }

            if (v37 == v39)
            {
              v41 = v32 + v38;
              v25 = v38 >= v32;
              v42 = v38 <= v32;
              v43 = v25;
              if ((v41 & 1) == 0)
              {
                v43 = v42;
              }

              v32 = v36;
              if (v43 != 1)
              {
                goto LABEL_41;
              }
            }

            else
            {
              v32 = *(a1 + 20) & v32;
            }
          }

          else
          {
            v33 = v12;
            if (v32 >= v30)
            {
              goto LABEL_41;
            }
          }

          *(*(a3 + 8 * v12) + 4 * v30) = *(*(a3 + 8 * v33) + 4 * v32);
LABEL_41:
          v29 -= 4;
          --v30;
          if (!--v31)
          {
            return v11;
          }
        }
      }
    }

    v17 = *(a1 + 24);
    v18 = v14 << v17;
    v19 = (v14 << v17) | v10;
    v20 = (v16 >> v17) - 1;
    v21 = *(a1 + 20) & v16;
    if (*(*(a2 + 8 * v20) + 4 * v21) == v19)
    {
      if (v19 == v16)
      {
        goto LABEL_17;
      }

      v22 = *(*(v13 + 8 * v8) + 4 * v10 + 4) - *(*(v13 + 8 * v8) + 4 * v10);
      v23 = *(*(v13 + 8 * v20) + 4 * (v21 + 1)) - *(*(v13 + 8 * v20) + 4 * v21);
      if (v22 > v23)
      {
        goto LABEL_17;
      }

      if (v22 == v23)
      {
        v24 = v16 + v19;
        v25 = v19 >= v16;
        v26 = v19 <= v16;
        v27 = v25;
        if (v24)
        {
          v26 = v27;
        }

        if (!v26)
        {
LABEL_17:
          *(*(a3 + 8 * v8) + 4 * v10) = v18 | v11;
          *(a4 + 4 * v11) = v10;
          v11 = (v11 + 1);
          v16 = *(v15 + 4 * v10);
        }
      }

      goto LABEL_19;
    }

LABEL_18:
    *(v15 + 4 * v10) = v10;
    v16 = v10;
    goto LABEL_19;
  }

  sub_2366DE30C(*(a1 + 12));
  return 0;
}

int *sub_2366DA28C(int *a1, uint64_t a2, unsigned int *a3)
{
  if (a2)
  {
    v5 = a2;
    v6 = malloc_type_malloc(4 * a2, 0x100004052888210uLL);
    v7 = v6;
    if (v6)
    {
      v8 = a1;
      v9 = v6;
      v10 = v5;
      do
      {
        v11 = *v8++;
        *v9++ = v11;
        --v10;
      }

      while (v10);
    }

    v12 = v5 - 1;
    if (v5 != 1)
    {
      v13 = a1;
      do
      {
        v14 = sub_2366D0B60(0, v5, a3);
        *v13++ = v7[v14];
        v7[v14] = v7[--v5];
      }

      while (v5 != 1);
    }

    a1[v12] = *v7;
    free(v7);
  }

  return a1;
}

void *sub_2366DA360(void *result, unint64_t a2)
{
  v3 = -1;
  if (a2 >= 0x40)
  {
    for (i = 1; i != 4; ++i)
    {
      if (*(&v3 + i) != 255)
      {
        break;
      }
    }

    return memset(result, 255, 4 * a2);
  }

  if (a2)
  {
    return memset(result, 255, 4 * a2);
  }

  return result;
}

uint64_t sub_2366DA3B8(int a1, unsigned int a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  v12 = sub_2366DA690(0x100000uLL);
  v13 = malloc_type_malloc(0x200000uLL, 0x100004052888210uLL);
  if (a1)
  {
    v14 = 0;
    v41 = 0;
    v42 = a2 + 1;
    do
    {
      v15 = *(a3 + 8 * a2);
      v16 = *(v15 + 4 * v14);
      if (v16 == -1)
      {
        *(v15 + 4 * v14) = v14;
      }

      else if (v14 != v16 && *(*(a4 + 8 * a2) + 4 * v14) == -1)
      {
        v17 = (v42 << *(a6 + 24)) | v14;
        v18 = v17 & 0xFFFFF;
        v19 = v12[v18];
        if (v19 != -1 && v19 != v17)
        {
          LODWORD(v18) = (v42 << *(a6 + 24)) | v14;
          do
          {
            v18 = (v18 + 1) & 0xFFFFF;
            v21 = v12[v18];
          }

          while (v21 != -1 && v21 != v17);
        }

        v23 = 0;
        v12[v18] = v17;
        *v13 = v18;
        v24 = 1;
        v25 = v14;
        v26 = a2;
        v27 = *(a6 + 48);
        v28 = a2;
        while (1)
        {
          v29 = *(a6 + 24);
          if (v16 >= *(v27 + 4 * v26))
          {
            v26 = (v16 >> v29) - 1;
            v31 = *(a6 + 20) & v16;
          }

          else
          {
            v30 = (v26 + 1) << v29;
            v31 = v16;
            LODWORD(v16) = v30 | v16;
          }

          v32 = v16 & 0xFFFFF;
          v33 = v12[v32];
          if (v33 != -1 && v33 != v16)
          {
            LODWORD(v32) = v16;
            do
            {
              v32 = (v32 + 1) & 0xFFFFF;
              v33 = v12[v32];
            }

            while (v33 != -1 && v33 != v16);
          }

          if (v33 != -1)
          {
            break;
          }

          if (v31 < v25 || v31 == v25 && v26 > v28)
          {
            v25 = v31;
            v28 = v26;
          }

          v12[v32] = v16;
          v13[v24] = v32;
          LODWORD(v16) = *(*(a3 + 8 * v26) + 4 * v31);
          ++v23;
          if (++v24 == 0x80000)
          {
            *(v15 + 4 * v14) = v14;
            goto LABEL_49;
          }
        }

        if (v16 == v17)
        {
          if (v28 == a2)
          {
            v36 = 0;
            *(*(a5 + 8 * a2) + 4 * v41) = v14;
            v37 = (v42 << *(a6 + 24)) | v41;
            do
            {
              v38 = v12[v13[v36]];
              *(*(a4 + 8 * ((v38 >> *(a6 + 24)) - 1)) + 4 * (*(a6 + 20) & v38)) = v37;
              ++v36;
            }

            while (v24 != v36);
            ++v41;
          }
        }

        else
        {
          *(v15 + 4 * v14) = v14;
        }

        if (!(v24 >> 19))
        {
          do
          {
            v12[v13[v23--]] = -1;
          }

          while (v23 != -1);
          goto LABEL_38;
        }

LABEL_49:
        v43 = -1;
        for (i = 1; i != 4; ++i)
        {
          if (*(&v43 + i) != 255)
          {
            break;
          }
        }

        memset(v12, 255, 0x400000uLL);
      }

LABEL_38:
      ++v14;
    }

    while (v14 != a1);
  }

  else
  {
    v41 = 0;
  }

  free(v12);
  free(v13);
  return v41;
}

void *sub_2366DA690(unint64_t a1)
{
  v2 = malloc_type_malloc(4 * a1, 0x100004052888210uLL);
  v3 = v2;
  if (a1 && v2)
  {
    sub_2366DA360(v2, a1);
  }

  return v3;
}

_OWORD *sub_2366DA6E4(_OWORD *result, unint64_t a2)
{
  v3 = a2;
  v4 = a2 > 0xF;
  if (a2 < 0x10)
  {
    if (a2 < 2)
    {
      v5 = 0;
    }

    else
    {
      v14 = result;
LABEL_19:
      v15 = 1;
      v16 = 8;
      do
      {
        v17 = v14[v15];
        v22 = v17;
        v18 = v16;
        v19 = v15;
        while (*(&v17 + 1) < *(v14 + v18))
        {
          v18 -= 16;
          if (v19-- <= 1)
          {
            v19 = 0;
            break;
          }
        }

        v21 = &v14[v19];
        memmove(v21 + 1, v21, 16 * (v15 - v19));
        *v21 = v22;
        ++v15;
        v16 += 16;
      }

      while (v15 != v3);
      result = v14;
      v5 = v4;
    }
  }

  else
  {
    v5 = 0;
    while (1)
    {
      v6 = v3 - 1;
      v7 = (8 * v3) & 0xFFFFFFFFFFFFFFF0;
      v8 = *(result + v7);
      *(result + v7) = *result;
      v9 = 1;
      do
      {
        v10 = &result[v9];
        v11 = &result[v6];
        if (*(&v8 + 1) >= *(v10 + 1))
        {
          v6 = (__PAIR128__(v6, *(&v8 + 1)) - *(v11 + 1)) >> 64;
          ++v9;
        }

        else
        {
          if (*(&v8 + 1) >= *(v11 + 1))
          {
            v12 = *v11;
            *v11 = *v10;
            *v10 = v12;
            ++v9;
          }

          --v6;
        }
      }

      while (v9 < v6);
      v13 = (__PAIR128__(v9, *(&v8 + 1)) - *(&result[v9] + 1)) >> 64;
      *result = result[v13];
      result[v13] = v8;
      if (v13 >= 2)
      {
        result = sub_2366DA6E4();
      }

      v3 -= v13 + 1;
      if (v3 < 2)
      {
        break;
      }

      v14 = &result[v13 + 1];
      if ((v5 & 1) == 0)
      {
        v2 = result;
      }

      v5 = 1;
      result += v13 + 1;
      if (v3 < 0x10)
      {
        goto LABEL_19;
      }
    }
  }

  if (v5)
  {
    return v2;
  }

  return result;
}

_DWORD *sub_2366DA89C(_DWORD *result, unint64_t a2)
{
  v3 = a2;
  v4 = a2 > 0xF;
  if (a2 < 0x10)
  {
    if (a2 < 2)
    {
      v5 = 0;
    }

    else
    {
      v13 = result;
LABEL_19:
      v14 = 0;
      v15 = 1;
      do
      {
        v16 = v13[v15];
        v17 = v14;
        while (v16 < v13[v17])
        {
          v18 = v17-- + 1;
          if (v18 <= 1)
          {
            v19 = 0;
            goto LABEL_25;
          }
        }

        v19 = v17 + 1;
LABEL_25:
        v20 = &v13[v19];
        memmove(v20 + 1, v20, 4 * (v15 - v19));
        *v20 = v16;
        ++v15;
        ++v14;
      }

      while (v15 != v3);
      result = v13;
      v5 = v4;
    }
  }

  else
  {
    v5 = 0;
    while (1)
    {
      v6 = v3 - 1;
      v7 = (2 * v3) & 0xFFFFFFFFFFFFFFFCLL;
      v8 = *(result + v7);
      *(result + v7) = *result;
      v9 = 1;
      do
      {
        v10 = result[v9];
        v11 = result[v6];
        if (v8 >= v10)
        {
          v6 -= v8 < v11;
          ++v9;
        }

        else
        {
          if (v8 >= v11)
          {
            result[v6] = v10;
            result[v9++] = v11;
          }

          --v6;
        }
      }

      while (v9 < v6);
      v12 = v9 - (v8 < result[v9]);
      *result = result[v12];
      result[v12] = v8;
      if (v12 >= 2)
      {
        result = sub_2366DA89C();
      }

      v3 -= v12 + 1;
      if (v3 < 2)
      {
        break;
      }

      v13 = &result[v12 + 1];
      if ((v5 & 1) == 0)
      {
        v2 = result;
      }

      v5 = 1;
      result += v12 + 1;
      if (v3 < 0x10)
      {
        goto LABEL_19;
      }
    }
  }

  if (v5)
  {
    return v2;
  }

  return result;
}

void sub_2366DAA2C(_DWORD *a1)
{
  v2 = MEMORY[0x277D85DF8];
  fwrite("ERROR: ", 7uLL, 1uLL, *MEMORY[0x277D85DF8]);
  fprintf(*v2, "Unknown ctype: %d\n", *a1);
  fflush(*v2);
  abort();
}

void sub_2366DAA88(uint64_t a1, int *a2, float *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v12 = *(a1 + 8);
  v13 = v12 - 8;
  if ((v12 & 8) == 0)
  {
    v13 = *(a1 + 8);
  }

  v14 = v13 & 0x20;
  if ((v13 & 0x20) != 0)
  {
    v13 -= 32;
  }

  if (*(a1 + 8) & 8 | v14)
  {
    *(a1 + 8) = v13;
  }

  if ((v13 & 2) != 0)
  {
    *(a1 + 152) = *(a1 + 152) - sub_23681E0C8();
  }

  v15 = *(a1 + 16);
  if (v15)
  {
    if (v15 != 1)
    {
      sub_236815030(15, "Unknown initial partition type: %d\n", a3, a4, a5, a6, a7, a8, *(a1 + 16));
      goto LABEL_20;
    }

    if (a2[2] == 1)
    {
LABEL_12:
      sub_2366DABD4(a1, a2, a3, a4, a5, a6, a7, a8);
      goto LABEL_20;
    }

    goto LABEL_19;
  }

  v16 = a2[2];
  if (!a2[1])
  {
    if (v16 == 1)
    {
      goto LABEL_12;
    }

LABEL_19:
    sub_2366DADEC(a1, a2, a3, a4, a5, a6, a7, a8);
    goto LABEL_20;
  }

  if (v16 == 1)
  {
    sub_2366DB024(a1, a2, a3, a4, a5, a6, a7, a8);
  }

  else
  {
    sub_2366DB388(a1, a2, a3, a4, a5, a6, a7, a8);
  }

LABEL_20:
  v17 = *(a1 + 8);
  if ((v17 & 0x10) != 0)
  {
    printf("Initial Cut: %d\n", a2[28]);
    v17 = *(a1 + 8);
  }

  if ((v17 & 2) != 0)
  {
    *(a1 + 152) = sub_23681E0C8() + *(a1 + 152);
  }

  *(a1 + 8) = v12;
}

uint64_t sub_2366DABD4(uint64_t a1, uint64_t a2, float *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = a4;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v52);
  v12 = *a2;
  v13 = *(a2 + 24);
  sub_2366DED50(a1, a2);
  v14 = *(a2 + 120);
  __dst = sub_2366E2AB8(a1, v12, v15, v16, v17, v18, v19, v20);
  v55 = sub_2366E2AB8(a1, v12, v21, v22, v23, v24, v25, v26);
  v54 = v8;
  if (v8 >= 1)
  {
    v27 = 0;
    v28 = 0;
    v29 = (*a3 * (**(a1 + 112) * **(a2 + 56)));
    while (1)
    {
      sub_2366E736C(v12, 1, v14);
      if (!v27)
      {
        break;
      }

      sub_2366C8A48(v12, v55, (v12 + (v12 >> 31)) >> 1, 1, (a1 + 68));
      if (v12 >= 1)
      {
        v30 = 0;
        v31 = v12;
        v32 = v55;
        do
        {
          v34 = *v32++;
          v33 = v34;
          if (*(v13 + 4 * v34) + v30 < v29)
          {
            v14[v33] = 0;
            v30 += *(v13 + 4 * v33);
            if (v30 > v29)
            {
              break;
            }
          }

          --v31;
        }

        while (v31);
      }

      sub_2366DE9B0(a1, a2);
      sub_2366BCA2C(a1, a2, a3);
      sub_2366E8464(a1, a2, a3, 4, v35, v36, v37, v38);
      v39 = *(a2 + 112);
      if (v28 > v39)
      {
        goto LABEL_12;
      }

LABEL_13:
      if (++v27 == v54)
      {
        goto LABEL_16;
      }
    }

    sub_2366DE9B0(a1, a2);
    sub_2366BCA2C(a1, a2, a3);
    sub_2366E8464(a1, a2, a3, 4, v40, v41, v42, v43);
    v39 = *(a2 + 112);
LABEL_12:
    sub_2366E7408(v12, v14, __dst);
    v28 = v39;
    if (!v39)
    {
      goto LABEL_16;
    }

    goto LABEL_13;
  }

  v28 = 0;
LABEL_16:
  *(a2 + 112) = v28;
  sub_2366E7408(v12, __dst, v14);

  return sub_2366E2AB0(a1, v44, v45, v46, v47, v48, v49, v50);
}

uint64_t sub_2366DADEC(uint64_t a1, int *a2, float *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = a4;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, __dst);
  v11 = *a2;
  v12 = *a2;
  v13 = a2[2];
  v14 = *(a2 + 3);
  sub_2366DED50(a1, a2);
  v15 = *(a2 + 15);
  __dsta = sub_2366E2AB8(a1, v11, v16, v17, v18, v19, v20, v21);
  v74 = sub_2366E2AB8(a1, v11, v22, v23, v24, v25, v26, v27);
  v34 = sub_2366E2AB8(a1, v13, v28, v29, v30, v31, v32, v33);
  if (v8 > 0)
  {
    v35 = v34;
    v36 = 0;
    v73 = 0;
    v37 = 2 * v8;
    v70 = (v11 + (v11 >> 31)) >> 1;
    v71 = v11;
    if (2 * v8 <= 1)
    {
      v37 = 1;
    }

    v69 = v37;
    v68 = v12;
    while (1)
    {
      sub_2366C8A48(v12, v74, v70, 1, (a1 + 68));
      sub_2366E736C(v13, 0, v35);
      if (v12 >= 1)
      {
        v38 = v68;
        v39 = v74;
        do
        {
          v41 = *v39++;
          v40 = v41;
          v42 = 4 * sub_2366E7158(v13, v14 + 4 * v41 * v13, 1uLL);
          v43 = *(v35 + v42);
          *(v35 + v42) = v43 + 1;
          v44 = v43 & 1;
          if (v43 < 0)
          {
            v44 = -v44;
          }

          v15[v40] = v44;
          --v38;
        }

        while (v38);
      }

      sub_2366DE9B0(a1, a2);
      sub_2366E8464(a1, a2, a3, *(a1 + 76), v45, v46, v47, v48);
      sub_2366BCA2C(a1, a2, a3);
      sub_2366E8464(a1, a2, a3, *(a1 + 76), v49, v50, v51, v52);
      sub_2366BCA2C(a1, a2, a3);
      sub_2366E8464(a1, a2, a3, *(a1 + 76), v53, v54, v55, v56);
      v57 = a2[28];
      v12 = v71;
      if (!v36 || v73 >= v57)
      {
        sub_2366E7408(v71, v15, __dsta);
        v73 = v57;
        if (!v57)
        {
          break;
        }
      }

      if (++v36 == v69)
      {
        goto LABEL_16;
      }
    }
  }

  v73 = 0;
LABEL_16:
  a2[28] = v73;
  sub_2366E7408(v12, __dsta, v15);

  return sub_2366E2AB0(a1, v58, v59, v60, v61, v62, v63, v64);
}

uint64_t sub_2366DB024(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = a4;
  v10 = a2;
  v11 = a1;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, __dst);
  v12 = *v10;
  v13 = *(v10 + 3);
  v79 = *(v10 + 2);
  v14 = *(v10 + 5);
  sub_2366DED50(v11, v10);
  v81 = *(v10 + 15);
  __dsta = sub_2366E2AB8(v11, v12, v15, v16, v17, v18, v19, v20);
  v27 = sub_2366E2AB8(v11, v12, v21, v22, v23, v24, v25, v26);
  v34 = sub_2366E2AB8(v11, v12, v28, v29, v30, v31, v32, v33);
  v76 = v8;
  if (v8 >= 1)
  {
    v35 = v34;
    v36 = 0;
    v77 = 0;
    v37 = **(v10 + 7);
    v38 = **(v11 + 112);
    v39 = *(a3 + 4);
    v80 = (v39 * (v38 * v37));
    v40 = (1.0 / v38 * v37 * v39);
    v74 = a3;
    v75 = v10;
    while (1)
    {
      v78 = v36;
      sub_2366E736C(v12, 1, v81);
      sub_2366E736C(v12, 0, v35);
      v41 = **(v10 + 7);
      v42 = v11;
      v43 = sub_2366C89E8(v12, (v11 + 68));
      v44 = 0;
      v45 = 0;
      *v27 = v43;
      v46 = 1;
      *(v35 + 4 * v43) = 1;
      v47 = v12 - 1;
LABEL_4:
      v48 = 0;
LABEL_5:
      if (v44 != v46)
      {
        goto LABEL_17;
      }

      if (!(v48 & 1 | (v47 == 0)))
      {
        v49 = sub_2366C89E8(v47, (v42 + 68));
        if (v12 < 1)
        {
          v51 = 0;
          goto LABEL_16;
        }

        v50 = 0;
        while (1)
        {
          if (!*(v35 + 4 * v50))
          {
            if (!v49)
            {
              v51 = v50;
LABEL_16:
              v44 = 0;
              *v27 = v51;
              v46 = 1;
              *(v35 + 4 * v51) = 1;
              --v47;
LABEL_17:
              v52 = v27[v44++];
              if (v45 < 1 || (v48 = 1, v41 - *(v13 + 4 * v52) >= v40))
              {
                v81[v52] = 0;
                v53 = *(v13 + 4 * v52);
                v45 += v53;
                v41 -= v53;
                if (v41 <= v80)
                {
                  break;
                }

                v54 = (v79 + 4 * v52);
                v55 = v54[1];
                v56 = *v54;
                if (v56 < v55)
                {
                  do
                  {
                    v57 = *(v14 + 4 * v56);
                    if (!*(v35 + 4 * v57))
                    {
                      v27[v46++] = v57;
                      *(v35 + 4 * v57) = 1;
                      --v47;
                      v55 = v54[1];
                    }

                    ++v56;
                  }

                  while (v56 < v55);
                }

                goto LABEL_4;
              }

              goto LABEL_5;
            }

            --v49;
          }

          if (v12 == ++v50)
          {
            v51 = v12;
            goto LABEL_16;
          }
        }
      }

      if (v41)
      {
        if (v45)
        {
          goto LABEL_27;
        }
      }

      else
      {
        v81[sub_2366C89E8(v12, (v42 + 68))] = 1;
        if (v45)
        {
          goto LABEL_27;
        }
      }

      v81[sub_2366C89E8(v12, (v42 + 68))] = 0;
LABEL_27:
      v11 = v42;
      v10 = v75;
      sub_2366DE9B0(v42, v75);
      sub_2366BCA2C(v42, v75, v74);
      sub_2366E8464(v11, v75, v74, *(v11 + 76), v58, v59, v60, v61);
      v62 = v75[28];
      v63 = v78;
      if (!v78 || v77 > v62)
      {
        sub_2366E7408(v12, v81, __dsta);
        v63 = v78;
        v77 = v62;
        if (!v62)
        {
          break;
        }
      }

      v36 = v63 + 1;
      if (v36 == v76)
      {
        goto LABEL_35;
      }
    }
  }

  v77 = 0;
LABEL_35:
  v10[28] = v77;
  sub_2366E7408(v12, __dsta, v81);

  return sub_2366E2AB0(v11, v64, v65, v66, v67, v68, v69, v70);
}

uint64_t sub_2366DB388(uint64_t a1, int *a2, float *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = a4;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v42);
  v12 = *a2;
  v13 = *a2;
  sub_2366DED50(a1, a2);
  v14 = *(a2 + 15);
  v21 = sub_2366E2AB8(a1, v12, v15, v16, v17, v18, v19, v20);
  if (v8 <= 0)
  {
    v23 = 0;
  }

  else
  {
    v22 = 0;
    v23 = 0;
    if (2 * v8 <= 1)
    {
      v24 = 1;
    }

    else
    {
      v24 = 2 * v8;
    }

    do
    {
      sub_2366E736C(v13, 1, v14);
      v14[sub_2366C89E8(v13, (a1 + 68))] = 0;
      sub_2366DE9B0(a1, a2);
      sub_2366BCA2C(a1, a2, a3);
      sub_2366E8464(a1, a2, a3, *(a1 + 76), v25, v26, v27, v28);
      sub_2366BCA2C(a1, a2, a3);
      sub_2366E8464(a1, a2, a3, *(a1 + 76), v29, v30, v31, v32);
      v33 = a2[28];
      if (!v22 || v23 >= v33)
      {
        sub_2366E7408(v13, v14, v21);
        v23 = v33;
        if (!v33)
        {
          break;
        }
      }

      ++v22;
    }

    while (v24 != v22);
  }

  a2[28] = v23;
  sub_2366E7408(v13, v21, v14);

  return sub_2366E2AB0(a1, v34, v35, v36, v37, v38, v39, v40);
}

void sub_2366DB4F4(uint64_t a1, int *a2, uint64_t a3)
{
  v24[1] = *MEMORY[0x277D85DE8];
  v24[0] = 0x3F0000003F000000;
  v6 = *(a1 + 8);
  v7 = v6 - 8;
  if ((v6 & 8) == 0)
  {
    v7 = *(a1 + 8);
  }

  v8 = v7 & 0x20;
  if ((v7 & 0x20) != 0)
  {
    v7 -= 32;
  }

  if (*(a1 + 8) & 8 | v8)
  {
    *(a1 + 8) = v7;
  }

  if ((v7 & 2) != 0)
  {
    *(a1 + 152) = *(a1 + 152) - sub_23681E0C8();
  }

  sub_2366E2838(a1, a2, v24);
  v15 = *(a1 + 16);
  if (v15 == 3)
  {
    sub_2366DB674(a1, a2, v24, a3, v11, v12, v13, v14);
  }

  else if (v15 == 2)
  {
    if (a2[1])
    {
      sub_2366DB024(a1, a2, v24, a3, v11, v12, v13, v14);
    }

    else
    {
      sub_2366DABD4(a1, a2, v24, a3, v11, v12, v13, v14);
    }

    sub_2366DE9B0(a1, a2);
    sub_2366EC6D0(a1, a2, v16, v17, v18, v19, v20, v21);
  }

  else
  {
    sub_236815030(15, "Unkown iptype of %d\n", v9, v10, v11, v12, v13, v14, *(a1 + 16));
  }

  v22 = *(a1 + 8);
  if ((v22 & 0x10) != 0)
  {
    printf("Initial Sep: %d\n", a2[28]);
    v22 = *(a1 + 8);
  }

  if ((v22 & 2) != 0)
  {
    *(a1 + 152) = sub_23681E0C8() + *(a1 + 152);
  }

  *(a1 + 8) = v6;
  v23 = *MEMORY[0x277D85DE8];
}

uint64_t sub_2366DB674(uint64_t a1, uint64_t a2, float *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = a4;
  v9 = a2;
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v79);
  v11 = *v9;
  v12 = *(v9 + 3);
  v88 = *(v9 + 2);
  v13 = *(v9 + 5);
  __dst = sub_2366E2AB8(a1, *v9, v14, v15, v16, v17, v18, v19);
  v26 = sub_2366E2AB8(a1, v11, v20, v21, v22, v23, v24, v25);
  v33 = sub_2366E2AB8(a1, v11, v27, v28, v29, v30, v31, v32);
  v34 = **(a1 + 112);
  v35 = **(v9 + 7);
  *(v9 + 16) = sub_2366E7294(3, "GrowBisectionNode: pwgts");
  *(v9 + 15) = sub_2366E7294(v11, "GrowBisectionNode: where");
  *(v9 + 18) = sub_2366E7294(v11, "GrowBisectionNode: bndptr");
  *(v9 + 19) = sub_2366E7294(v11, "GrowBisectionNode: bndind");
  *(v9 + 20) = sub_2366E7294(v11, "GrowBisectionNode: id");
  *(v9 + 21) = sub_2366E7294(v11, "GrowBisectionNode: ed");
  *(v9 + 24) = sub_23681BC6C(8 * v11, "GrowBisectionNode: nrinfo");
  v89 = *(v9 + 15);
  v84 = v8;
  if (v8 < 1)
  {
    v85 = 0;
  }

  else
  {
    v36 = 0;
    v85 = 0;
    v86 = ((v34 * v35) * 0.5);
    v37 = (1.0 / v34 * v35 * 0.5);
    v81 = *(v9 + 19);
    v82 = v9;
    do
    {
      v87 = v36;
      sub_2366E736C(v11, 1, v89);
      sub_2366E736C(v11, 0, v33);
      v38 = **(v9 + 7);
      v39 = sub_2366C89E8(v11, (a1 + 68));
      v40 = 0;
      *v26 = v39;
      v41 = 1;
      v33[v39] = 1;
      v42 = v11 - 1;
LABEL_4:
      v43 = 0;
LABEL_5:
      if (v40 != v41)
      {
        goto LABEL_17;
      }

      if (!(v43 & 1 | (v42 == 0)))
      {
        v44 = sub_2366C89E8(v42, (a1 + 68));
        if (v11 < 1)
        {
          v46 = 0;
          goto LABEL_16;
        }

        v45 = 0;
        while (1)
        {
          if (!v33[v45])
          {
            if (!v44)
            {
              v46 = v45;
LABEL_16:
              v40 = 0;
              *v26 = v46;
              v41 = 1;
              v33[v46] = 1;
              --v42;
LABEL_17:
              v47 = v26[v40++];
              v43 = 1;
              if (v38 - *(v12 + 4 * v47) >= v37)
              {
                v89[v47] = 0;
                v38 -= *(v12 + 4 * v47);
                if (v38 <= v86)
                {
                  break;
                }

                v48 = (v88 + 4 * v47);
                v49 = v48[1];
                v50 = *v48;
                if (v50 < v49)
                {
                  do
                  {
                    v51 = *(v13 + 4 * v50);
                    if (!v33[v51])
                    {
                      v26[v41++] = v51;
                      v33[v51] = 1;
                      --v42;
                      v49 = v48[1];
                    }

                    ++v50;
                  }

                  while (v50 < v49);
                }

                goto LABEL_4;
              }

              goto LABEL_5;
            }

            --v44;
          }

          if (v11 == ++v45)
          {
            v46 = v11;
            goto LABEL_16;
          }
        }
      }

      v9 = v82;
      sub_2366DE9B0(a1, v82);
      sub_2366BCA2C(a1, v82, a3);
      sub_2366E8464(a1, v82, a3, 4, v52, v53, v54, v55);
      v56 = v82[34];
      if (v56 >= 1)
      {
        for (i = 0; i < v56; ++i)
        {
          v58 = *(v81 + 4 * i);
          if (*(v88 + 4 * v58 + 4) > *(v88 + 4 * v58))
          {
            v89[v58] = 2;
            v56 = v82[34];
          }
        }
      }

      sub_2366DBBCC(a1, v82);
      sub_2366CBB20(a1, v82, 1, v59, v60, v61, v62, v63);
      sub_2366CC5E8(a1, v82, 4, v64, v65, v66, v67, v68);
      v69 = v82[28];
      v70 = v87;
      if (!v87 || v85 > v69)
      {
        sub_2366E7408(v11, v89, __dst);
        v70 = v87;
        v85 = v69;
      }

      v36 = v70 + 1;
    }

    while (v36 != v84);
  }

  v9[28] = v85;
  sub_2366E7408(v11, __dst, v89);

  return sub_2366E2AB0(a1, v71, v72, v73, v74, v75, v76, v77);
}

double sub_2366DBA78(uint64_t a1, uint64_t a2, uint64_t a3)
{
  if ((*(a1 + 8) & 2) != 0)
  {
    *(a1 + 184) = *(a1 + 184) - sub_23681E0C8();
  }

  if (a3 == a2)
  {
    sub_2366DBBCC(a1, a3);
  }

  else
  {
    do
    {
      a3 = *(a3 + 208);
      if ((*(a1 + 8) & 2) != 0)
      {
        *(a1 + 200) = *(a1 + 200) - sub_23681E0C8();
      }

      sub_2366DBCE8(a1, a3);
      if ((*(a1 + 8) & 2) != 0)
      {
        *(a1 + 200) = sub_23681E0C8() + *(a1 + 200);
        if ((*(a1 + 8) & 2) != 0)
        {
          *(a1 + 192) = *(a1 + 192) - sub_23681E0C8();
        }
      }

      sub_2366CCF30(a1, a3, v6, v7, v8, v9, v10, v11);
      v18 = *(a1 + 20);
      if (v18 == 3)
      {
        sub_2366CC5E8(a1, a3, *(a1 + 76), v13, v14, v15, v16, v17);
      }

      else if (v18 == 2)
      {
        sub_2366CBB20(a1, a3, *(a1 + 76), v13, v14, v15, v16, v17);
      }

      else
      {
        sub_236815030(15, "Unknown rtype of %d\n", v12, v13, v14, v15, v16, v17, *(a1 + 20));
      }

      if ((*(a1 + 8) & 2) != 0)
      {
        result = sub_23681E0C8() + *(a1 + 192);
        *(a1 + 192) = result;
      }
    }

    while (a3 != a2);
  }

  if ((*(a1 + 8) & 2) != 0)
  {
    result = sub_23681E0C8() + *(a1 + 184);
    *(a1 + 184) = result;
  }

  return result;
}

uint64_t sub_2366DBBCC(uint64_t a1, int *a2)
{
  v3 = *a2;
  v4 = *(a2 + 2);
  v5 = *(a2 + 3);
  v6 = *(a2 + 5);
  v7 = *(a2 + 24);
  v8 = *(a2 + 15);
  v9 = sub_2366E736C(3, 0, *(a2 + 16));
  v10 = *(a2 + 19);
  result = sub_2366E736C(v3, -1, *(a2 + 18));
  if (v3 < 1)
  {
    v13 = 0;
  }

  else
  {
    v12 = 0;
    v13 = 0;
    do
    {
      v14 = *(v8 + 4 * v12);
      *(v9 + 4 * v14) += *(v5 + 4 * v12);
      if (v14 == 2)
      {
        *(v10 + 4 * v13) = v12;
        v15 = v13 + 1;
        *(result + 4 * v12) = v13;
        v16 = (v7 + 8 * v12);
        *v16 = 0;
        v17 = (v4 + 4 * v12);
        v18 = v17[1];
        v19 = *v17;
        if (v19 < v18)
        {
          do
          {
            v20 = *(v6 + 4 * v19);
            v21 = *(v8 + 4 * v20);
            if (v21 != 2)
            {
              *(v16 + v21) += *(v5 + 4 * v20);
              v18 = v17[1];
            }

            ++v19;
          }

          while (v19 < v18);
        }

        v13 = v15;
      }

      ++v12;
    }

    while (v12 != v3);
  }

  a2[28] = *(v9 + 8);
  a2[34] = v13;
  return result;
}

uint64_t sub_2366DBCE8(uint64_t a1, void *a2)
{
  v3 = a2 + 25;
  v4 = *(a2[25] + 120);
  v5 = *a2;
  v6 = a2[12];
  sub_2366DBD70(a1, a2);
  if (v5 >= 1)
  {
    v14 = a2[15];
    do
    {
      v15 = *v6++;
      *v14++ = *(v4 + 4 * v15);
      --v5;
    }

    while (v5);
  }

  v16 = sub_2366EC36C(v3, v7, v8, v9, v10, v11, v12, v13);
  a2[25] = 0;

  return sub_2366DBBCC(v16, a2);
}

void *sub_2366DBD70(uint64_t a1, void *a2)
{
  v3 = *a2;
  a2[16] = sub_2366E7294(3, "Allocate2WayNodePartitionMemory: pwgts");
  a2[15] = sub_2366E7294(v3, "Allocate2WayNodePartitionMemory: where");
  a2[18] = sub_2366E7294(v3, "Allocate2WayNodePartitionMemory: bndptr");
  a2[19] = sub_2366E7294(v3, "Allocate2WayNodePartitionMemory: bndind");
  result = sub_23681BC6C(8 * v3, "Allocate2WayNodePartitionMemory: nrinfo");
  a2[24] = result;
  return result;
}

uint64_t sub_2366DBDF8(int *a1, int *a2, _DWORD *a3, uint64_t a4, char *a5, char *a6, uint64_t a7, int *a8, const void *a9, const void *a10, _DWORD *a11, _DWORD *a12, _DWORD *a13)
{
  v39 = 0;
  sub_23681509C();
  off_281949F20();
  v21 = off_281949ED8();
  v23 = setjmp((v22 + 192 * *v21));
  if (!v23)
  {
    v25 = sub_2366E188C(0, a11, *a2, *a8, a9, a10);
    v39 = v25;
    if (!v25)
    {
      sub_236815190();
      return 4294967294;
    }

    v37 = a6;
    v26 = v25;
    v38 = v25[20];
    if (v38 == 1)
    {
      sub_2366DFE98(*a1, a3, a4);
    }

    v27 = sub_2366EBDFC(v26, *a1, *a2, a3, a4, a5, v37, a7);
    sub_2366E2894(v26);
    if ((*(v26 + 8) & 2) != 0)
    {
      sub_2366BC918(v26);
      if ((*(v26 + 8) & 2) != 0)
      {
        *(v26 + 144) = *(v26 + 144) - sub_23681E0C8();
      }
    }

    *a12 = sub_2366DBFD0(v26, v27, *a8, a13, *(v26 + 120), 0, v28, v29);
    if ((*(v26 + 8) & 2) != 0)
    {
      *(v26 + 144) = sub_23681E0C8() + *(v26 + 144);
      if ((*(v26 + 8) & 2) != 0)
      {
        sub_2366BC92C(v26);
      }
    }

    sub_2366E2774(&v39, v30, v31, v32, v33, v34, v35, v36);
    if (v38 == 1)
    {
      sub_2366DFEE8(*a1, a3, a4, a13);
    }
  }

  sub_236815190();
  return sub_2366C8DA0(v23);
}

uint64_t sub_2366DBFD0(uint64_t a1, int *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v67 = a2;
  v8 = *a2;
  if (v8)
  {
    v64 = a3;
    v66 = 0;
    v13 = a2[2];
    sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v60);
    v61 = a1;
    v62 = sub_2366E2AB8(a1, 2 * v13, v14, v15, v16, v17, v18, v19);
    if (v13 >= 1)
    {
      v20 = 0;
      v21 = a5;
      v22 = v62;
      do
      {
        v23 = sub_2366E7240(v64 >> 1, v21, v13);
        *v22 = *&v23;
        v22[v13] = 1.0 - *&v23;
        ++v22;
        ++v21;
        v20 += 4;
      }

      while (4 * v13 != v20);
    }

    v24 = sub_2366DC25C(a1, a2, v62);
    sub_2366E2AB0(a1, v25, v26, v27, v28, v29, v30, v31);
    if (v8 >= 1)
    {
      v39 = *(a2 + 13);
      v40 = *(a2 + 15);
      do
      {
        v41 = *v40++;
        v42 = v41 + a6;
        v43 = *v39++;
        *(a4 + 4 * v43) = v42;
        --v8;
      }

      while (v8);
    }

    v65 = 0;
    if (v64 >= 3)
    {
      sub_2366DC41C(a1, a2, &v66, &v65, v35, v36, v37, v38);
    }

    sub_2366EC36C(&v67, v32, v33, v34, v35, v36, v37, v38);
    if (v13 >= 1)
    {
      v51 = a5;
      v52 = v64 >> 1;
      v53 = (a5 + 4 * v13 * (v64 >> 1));
      v54 = v13;
      do
      {
        v55 = sub_2366E7240(v52, v51, v13);
        v56 = *&v55;
        sub_2366E726C(v52, v51, v13, 1.0 / *&v55);
        v57 = 1.0 / (1.0 - v56);
        sub_2366E726C(v64 - (v64 >> 1), v53++, v13, v57);
        ++v51;
        --v54;
      }

      while (v54);
    }

    if (v64 < 4)
    {
      if (v64 == 3)
      {
        sub_2366EC36C(&v66, v44, v45, v46, v47, v48, v49, v50);
        return sub_2366DBFD0(v61, v65, 2, a4, a5 + 4 * v13, (a6 + 1)) + v24;
      }
    }

    else
    {
      v58 = sub_2366DBFD0(v61, v66, v64 >> 1, a4, a5, a6);
      return v58 + v24 + sub_2366DBFD0(v61, v65, v64 - (v64 >> 1), a4, a5 + 4 * (v13 * (v64 >> 1)), a6 + (v64 >> 1));
    }
  }

  else
  {
    puts("\t***Cannot bisect a graph with 0 vertices!\n\t***You are trying to partition a graph into too many parts!");
    return 0;
  }

  return v24;
}

uint64_t sub_2366DC25C(uint64_t a1, int *a2, float *a3)
{
  sub_2366E2838(a1, a2, a3);
  sub_2366E2AA8(a1, v6, v7, v8, v9, v10, v11, v12, v37);
  v20 = *(a1 + 72);
  if (v20 <= 1)
  {
    v21 = 0;
  }

  else
  {
    v21 = sub_2366E2AB8(a1, *a2, v14, v15, v16, v17, v18, v19);
    v20 = *(a1 + 72);
  }

  if (v20 < 1)
  {
    v22 = 0;
  }

  else
  {
    v22 = 0;
    v23 = 0;
    v24 = 0.0;
    do
    {
      v29 = sub_2366E2BD8(a1, a2, v14, v15, v16, v17, v18, v19);
      if (*v29 <= *(a1 + 24))
      {
        v30 = 5;
      }

      else
      {
        v30 = 7;
      }

      sub_2366DAA88(a1, v29, a3, v30, v25, v26, v27, v28);
      sub_2366DE8A4(a1, a2, v29, a3);
      v31 = a2[28];
      v32 = sub_2366ED894(a2, 2, *(a1 + 128), *(a1 + 112));
      if (v23)
      {
        if ((v32 > 0.0005 || v22 <= v31) && (v24 <= 0.0005 || v32 >= v24))
        {
          goto LABEL_23;
        }
      }

      if (v23 < *(a1 + 72) - 1)
      {
        sub_2366E7408(*a2, *(a2 + 15), v21);
      }

      v22 = v31;
      v24 = v32;
LABEL_23:
      if (!v22)
      {
        break;
      }

      v35 = *(a1 + 72);
      if (v23 < v35 - 1)
      {
        sub_2366EC300(a2, v13, v14, v15, v16, v17, v18, v19);
        v35 = *(a1 + 72);
      }

      ++v23;
    }

    while (v23 < v35);
    if (v22 != v31)
    {
      sub_2366E7408(*a2, v21, *(a2 + 15));
      sub_2366DE9B0(a1, a2);
    }
  }

  sub_2366E2AB0(a1, v13, v14, v15, v16, v17, v18, v19);
  return v22;
}

uint64_t sub_2366DC41C(uint64_t a1, unsigned int *a2, uint64_t *a3, uint64_t *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v105[1] = *MEMORY[0x277D85DE8];
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v83);
  if ((*(a1 + 8) & 2) != 0)
  {
    *(a1 + 208) = *(a1 + 208) - sub_23681E0C8();
  }

  v16 = *a2;
  v17 = a2[2];
  v18 = *(a2 + 2);
  v19 = *(a2 + 3);
  v93 = *(a2 + 6);
  v94 = *(a2 + 5);
  v91 = a1;
  v92 = *(a2 + 13);
  v20 = *(a2 + 15);
  v95 = *(a2 + 18);
  v21 = sub_2366E2AB8(a1, *a2, v10, v11, v12, v13, v14, v15);
  v22 = v21;
  v104 = 0;
  v105[0] = 0;
  if (v16 < 1)
  {
    v85 = 0;
    v86 = 0;
    v30 = 0;
    v29 = 0;
  }

  else
  {
    v23 = (v18 + 4);
    v24 = v16;
    v25 = v20;
    v26 = v21;
    do
    {
      v27 = *v25++;
      v28 = *(v105 + v27);
      *(v105 + v27) = v28 + 1;
      *v26++ = v28;
      *(&v105[-1] + v27) += *v23 - *(v23 - 1);
      ++v23;
      --v24;
    }

    while (v24);
    v29 = v105[0];
    v30 = v104;
    v85 = HIDWORD(v104);
    v86 = HIDWORD(v105[0]);
  }

  v102 = 0;
  v103 = 0;
  v100 = 0;
  v101 = 0;
  v99 = 0;
  v31 = sub_2366EC1F8(a2, v29, v30);
  v32 = v31[3];
  v102 = v31[2];
  v84 = v102;
  v100 = v32;
  v33 = v31[6];
  v98 = v31[5];
  v97[0] = v33;
  v88 = v31;
  v96[0] = v31[13];
  v34 = sub_2366EC1F8(a2, v86, v85);
  v35 = v34[2];
  v101 = v34[3];
  v36 = v34[6];
  v99 = v34[5];
  v103 = v35;
  v97[1] = v36;
  v87 = v34;
  v96[1] = v34[13];
  v104 = 0;
  v105[0] = 0;
  *v35 = 0;
  *v84 = 0;
  v37 = v92;
  if (v16 >= 1)
  {
    v38 = 0;
    do
    {
      v39 = v20[v38];
      v40 = *(v18 + 4 * v38);
      v41 = v38 + 1;
      v42 = *(v18 + 4 * (v38 + 1));
      v43 = *(&v98 + v39);
      if (*(v95 + 4 * v38) == -1)
      {
        v51 = *(&v105[-1] + v39);
        if (v42 > v40)
        {
          v52 = (v43 + 4 * v51);
          v53 = (v97[v39] + 4 * v51);
          v54 = (v94 + 4 * v40);
          v55 = (v93 + 4 * v40);
          v56 = v42 - v40;
          do
          {
            v57 = *v54++;
            *v52++ = v57;
            v58 = *v55++;
            *v53++ = v58;
            --v56;
          }

          while (v56);
        }

        v44 = v42 - v40 + v51;
        *(&v105[-1] + v39) = v44;
        v37 = v92;
      }

      else
      {
        v44 = *(&v105[-1] + v39);
        if (v42 > v40)
        {
          v45 = v97[v39];
          v46 = (v94 + 4 * v40);
          v47 = v42 - v40;
          v48 = (v93 + 4 * v40);
          do
          {
            v50 = *v46++;
            v49 = v50;
            if (v20[v50] == v39)
            {
              *(v43 + 4 * v44) = v49;
              *(v45 + 4 * v44++) = *v48;
            }

            ++v48;
            --v47;
          }

          while (v47);
        }

        *(&v105[-1] + v39) = v44;
      }

      if (v17 <= 0)
      {
        v59 = *(v105 + v39);
      }

      else
      {
        v59 = *(v105 + v39);
        v60 = (*(&v100 + v39) + 4 * v59 * v17);
        v61 = v17;
        v62 = v19;
        do
        {
          v63 = *v62++;
          *v60++ = v63;
          --v61;
        }

        while (v61);
      }

      *(v96[v39] + 4 * v59) = *(v37 + 4 * v38);
      v64 = (&v102)[v39];
      v65 = v59 + 1;
      *(v105 + v39) = v65;
      v64[v65] = v44;
      v19 += v17;
      v38 = v41;
    }

    while (v41 != v16);
  }

  v66 = v105;
  v67 = &v102;
  v68 = &v98;
  v69 = 1;
  do
  {
    v70 = v69;
    v71 = *(*v67 + 4 * *v66);
    if (v71 >= 1)
    {
      v72 = *v68;
      do
      {
        *v72 = v22[*v72];
        ++v72;
        --v71;
      }

      while (v71);
    }

    v69 = 0;
    v68 = &v99;
    v67 = &v103;
    v66 = v105 + 1;
  }

  while ((v70 & 1) != 0);
  v73 = HIDWORD(v104);
  *(v88 + 4) = v104;
  *(v87 + 4) = v73;
  sub_2366EC0C8(v88);
  sub_2366EC0C8(v87);
  if ((*(v91 + 8) & 2) != 0)
  {
    *(v91 + 208) = sub_23681E0C8() + *(v91 + 208);
  }

  *a3 = v88;
  *a4 = v87;
  v81 = *MEMORY[0x277D85DE8];

  return sub_2366E2AB0(v91, v74, v75, v76, v77, v78, v79, v80);
}

void sub_2366DC81C(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v6 = *(a1 + 44);
  if ((*(a1 + 8) & 2) != 0)
  {
    *(a1 + 184) = *(a1 + 184) - sub_23681E0C8();
  }

  if (a3 == a2)
  {
    v7 = 0;
  }

  else
  {
    v7 = 0;
    v8 = a3;
    do
    {
      v8 = *(v8 + 208);
      ++v7;
    }

    while (v8 != a2);
  }

  sub_2366DCBD4(a1, a3);
  if (*(a1 + 40))
  {
    sub_2366BA08C(a1, a3, v9, v10, v11, v12, v13, v14);
  }

  if (v6 && sub_2366C8DB8(a3, *(a3 + 120), 0, 0) > *(a1 + 100))
  {
    sub_2366C9220(a1, a3, v9, v10, v11, v12, v13, v14);
    sub_2366DD0C0(a1, a3, 2);
    sub_2366D0FF0(a1, a3, 5, 2, v15, v16, v17, v18, 0.0);
    sub_2366DD0C0(a1, a3, 1);
    sub_2366D0FF0(a1, a3, *(a1 + 76), 1, v19, v20, v21, v22, 0.0);
    *(a1 + 44) = 0;
  }

  v23 = 0;
  for (i = v7 >> 1; ; --i)
  {
    if (*(a1 + 40))
    {
      v25 = i == 0;
    }

    else
    {
      v25 = 0;
    }

    if (v25)
    {
      sub_2366BA08C(a1, a3, v9, v10, v11, v12, v13, v14);
    }

    if ((*(a1 + 8) & 2) != 0)
    {
      *(a1 + 192) = *(a1 + 192) - sub_23681E0C8();
    }

    if (v23 >= v7 && sub_2366ED894(a3, *(a1 + 100), *(a1 + 128), *(a1 + 112)) > 0.02)
    {
      sub_2366DD0C0(a1, a3, 2);
      sub_2366D0FF0(a1, a3, 1, 2, v26, v27, v28, v29, 0.0);
      sub_2366DD0C0(a1, a3, 1);
    }

    sub_2366D0FF0(a1, a3, *(a1 + 76), 1, v11, v12, v13, v14, 5.0);
    if ((*(a1 + 8) & 2) != 0)
    {
      *(a1 + 192) = sub_23681E0C8() + *(a1 + 192);
    }

    if (v6)
    {
      if (!i && sub_2366C8DB8(a3, *(a3 + 120), 0, 0) > *(a1 + 100))
      {
        sub_2366C9220(a1, a3, v30, v31, v32, v33, v34, v35);
        if (sub_2366ED894(a3, *(a1 + 100), *(a1 + 128), *(a1 + 112)) > 0.02)
        {
          *(a1 + 44) = 1;
          sub_2366DD0C0(a1, a3, 2);
          sub_2366D0FF0(a1, a3, 5, 2, v36, v37, v38, v39, 0.0);
          sub_2366DD0C0(a1, a3, 1);
          sub_2366D0FF0(a1, a3, *(a1 + 76), 1, v40, v41, v42, v43, 0.0);
          *(a1 + 44) = 0;
        }
      }
    }

    if (a3 == a2)
    {
      break;
    }

    a3 = *(a3 + 208);
    if ((*(a1 + 8) & 2) != 0)
    {
      *(a1 + 200) = *(a1 + 200) - sub_23681E0C8();
    }

    sub_2366DD290(a1, a3, v30, v31, v32, v33, v34, v35);
    if ((*(a1 + 8) & 2) != 0)
    {
      *(a1 + 200) = sub_23681E0C8() + *(a1 + 200);
    }

    v23 += 2;
  }

  *(a1 + 44) = v6;
  if (v6 && sub_2366C8DB8(a3, *(a3 + 120), 0, 0) > *(a1 + 100))
  {
    sub_2366C9220(a1, a3, v44, v45, v46, v47, v48, v49);
  }

  if (sub_2366ED894(a3, *(a1 + 100), *(a1 + 128), *(a1 + 112)) > 0.0)
  {
    sub_2366DD0C0(a1, a3, 2);
    sub_2366D0FF0(a1, a3, 10, 2, v50, v51, v52, v53, 0.0);
    sub_2366DD0C0(a1, a3, 1);
    sub_2366D0FF0(a1, a3, *(a1 + 76), 1, v54, v55, v56, v57, 0.0);
  }

  if ((*(a1 + 8) & 2) != 0)
  {
    *(a1 + 184) = sub_23681E0C8() + *(a1 + 184);
  }
}

uint64_t sub_2366DCBD4(uint64_t a1, int *a2)
{
  v3 = *a2;
  v4 = a2[2];
  v6 = *(a2 + 2);
  v5 = *(a2 + 3);
  v7 = *(a2 + 5);
  v8 = *(a2 + 6);
  v9 = *(a2 + 15);
  v10 = sub_2366E736C(v4 * (*(a1 + 100) + 2), 0, *(a2 + 16));
  v78 = *(a2 + 19);
  v82 = a2;
  v77 = sub_2366E736C(v3, -1, *(a2 + 18));
  if (v4 == 1)
  {
    v17 = a1;
    if (v3 >= 1)
    {
      v18 = v3;
      v19 = v9;
      do
      {
        v21 = *v5++;
        v20 = v21;
        v22 = *v19++;
        *(v10 + 4 * v22) += v20;
        --v18;
      }

      while (v18);
    }
  }

  else
  {
    v17 = a1;
    if (v3 >= 1)
    {
      for (i = 0; i != v3; ++i)
      {
        if (v4 >= 1)
        {
          v24 = (v10 + 4 * v9[i] * v4);
          v25 = v4;
          v26 = v5;
          do
          {
            v27 = *v26++;
            *v24++ += v27;
            --v25;
          }

          while (v25);
        }

        v5 += v4;
      }
    }
  }

  v28 = *(v17 + 4);
  if (v28 == 1)
  {
    v50 = v17;
    bzero(*(a2 + 23), 20 * v3);
    sub_2366E2AD0(v50);
    if (v3 < 1)
    {
      v76 = 0;
      v59 = a1;
    }

    else
    {
      v57 = 0;
      v58 = 0;
      v59 = a1;
      do
      {
        v60 = v57;
        v61 = v9[v57];
        v62 = (*(v82 + 23) + 20 * v57);
        v63 = *(v6 + 4 * v57++);
        LODWORD(v64) = *(v6 + 4 * v57);
        if (v63 < v64)
        {
          do
          {
            v65 = v61 != v9[*(v7 + 4 * v63)];
            ++v62[v65];
            ++v63;
            v64 = *(v6 + 4 * v57);
          }

          while (v63 < v64);
        }

        v66 = v62[1];
        if (v66 < 1)
        {
          v62[4] = -1;
        }

        else
        {
          v58 += v66;
          v67 = v59;
          v68 = sub_2366E2B54(v59, v64 - *(v6 + 4 * v60) + 1);
          v62[4] = v68;
          v69 = *(v6 + 4 * v60);
          if (v69 >= *(v6 + 4 * v57))
          {
            v59 = v67;
          }

          else
          {
            v70 = *(v67 + 280) + 12 * v68;
            v59 = v67;
            do
            {
              v71 = v9[*(v7 + 4 * v69)];
              if (v61 != v71)
              {
                v72 = v62[3];
                if (v72 < 1)
                {
                  LODWORD(v73) = 0;
                }

                else
                {
                  v73 = 0;
                  v74 = (v70 + 4);
                  while (*(v74 - 1) != v71)
                  {
                    ++v73;
                    v74 += 3;
                    if (v72 == v73)
                    {
                      goto LABEL_53;
                    }
                  }

                  ++*v74;
                }

                if (v73 == v72)
                {
LABEL_53:
                  v75 = v70 + 12 * v72;
                  *v75 = v71;
                  *(v75 + 4) = 1;
                  v62[3] = v72 + 1;
                }
              }

              ++v69;
            }

            while (v69 < *(v6 + 4 * v57));
          }
        }
      }

      while (v57 != v3);
      v76 = v58 >> 1;
    }

    v82[28] = v76;

    return sub_2366DD8D0(v59, v82, v51, v52, v53, v54, v55, v56);
  }

  else if (v28)
  {
    return sub_236815030(15, "Unknown objtype of %d\n", v11, v12, v13, v14, v15, v16, *(v17 + 4));
  }

  else
  {
    v29 = v17;
    bzero(*(a2 + 22), 16 * v3);
    result = sub_2366E2AD0(v29);
    if (v3 < 1)
    {
      v49 = 0;
      v48 = 0;
    }

    else
    {
      v81 = v3;
      v31 = 0;
      v32 = 0;
      v79 = 0;
      v33 = a1;
      do
      {
        v34 = v31;
        v35 = v9[v31];
        v36 = (*(v82 + 22) + 16 * v31);
        v37 = *(v6 + 4 * v31++);
        LODWORD(v38) = *(v6 + 4 * v31);
        if (v37 < v38)
        {
          do
          {
            v39 = v35 != v9[*(v7 + 4 * v37)];
            v36[v39] += *(v8 + 4 * v37++);
            v38 = *(v6 + 4 * v31);
          }

          while (v37 < v38);
        }

        v40 = v36[1];
        if (v40 < 1)
        {
          v36[3] = -1;
        }

        else
        {
          result = sub_2366E2AD8(v33, v38 - *(v6 + 4 * v34) + 1);
          v33 = a1;
          v36[3] = result;
          v41 = *(v6 + 4 * v34);
          if (v41 < *(v6 + 4 * v31))
          {
            v42 = *(a1 + 272) + 8 * result;
            do
            {
              v43 = v9[*(v7 + 4 * v41)];
              if (v35 != v43)
              {
                v44 = v36[2];
                if (v44 < 1)
                {
                  LODWORD(v45) = 0;
                }

                else
                {
                  v45 = 0;
                  v46 = (v42 + 4);
                  while (*(v46 - 1) != v43)
                  {
                    ++v45;
                    v46 += 2;
                    if (v44 == v45)
                    {
                      goto LABEL_30;
                    }
                  }

                  *v46 += *(v8 + 4 * v41);
                }

                if (v45 == v44)
                {
LABEL_30:
                  v47 = (v42 + 8 * v44);
                  *v47 = v43;
                  v47[1] = *(v8 + 4 * v41);
                  v36[2] = v44 + 1;
                }
              }

              ++v41;
            }

            while (v41 < *(v6 + 4 * v31));
          }

          v32 += v40;
          if (v36[1] >= *v36)
          {
            *(v78 + 4 * v79) = v34;
            *(v77 + 4 * v34) = v79++;
          }
        }
      }

      while (v31 != v81);
      v48 = v32 >> 1;
      v49 = v79;
    }

    v82[28] = v48;
    v82[34] = v49;
  }

  return result;
}

uint64_t sub_2366DD0C0(uint64_t a1, int *a2, int a3)
{
  v6 = *a2;
  v7 = *(a2 + 19);
  result = sub_2366E736C(v6, -1, *(a2 + 18));
  v15 = *(a1 + 4);
  if (v15 == 1)
  {
    if (a3 == 1)
    {
      if (v6 < 1)
      {
        goto LABEL_18;
      }

      v19 = 0;
      v17 = 0;
      v20 = (*(a2 + 23) + 8);
      do
      {
        v21 = *v20;
        v20 += 5;
        if ((v21 & 0x80000000) == 0)
        {
          *(v7 + 4 * v17) = v19;
          *(result + 4 * v19) = v17++;
        }

        ++v19;
      }

      while (v6 != v19);
    }

    else
    {
      if (v6 < 1)
      {
        goto LABEL_18;
      }

      v25 = 0;
      v17 = 0;
      v26 = (*(a2 + 23) + 4);
      do
      {
        v27 = *v26;
        v26 += 5;
        if (v27 >= 1)
        {
          *(v7 + 4 * v17) = v25;
          *(result + 4 * v25) = v17++;
        }

        ++v25;
      }

      while (v6 != v25);
    }
  }

  else
  {
    if (v15)
    {
      result = sub_236815030(15, "Unknown objtype of %d\n", v9, v10, v11, v12, v13, v14, *(a1 + 4));
      goto LABEL_18;
    }

    if (a3 == 1)
    {
      if (v6 >= 1)
      {
        v16 = 0;
        v17 = 0;
        v18 = (*(a2 + 22) + 4);
        do
        {
          if (*v18 >= *(v18 - 1))
          {
            *(v7 + 4 * v17) = v16;
            *(result + 4 * v16) = v17++;
          }

          v18 += 4;
          ++v16;
        }

        while (v6 != v16);
        goto LABEL_19;
      }

LABEL_18:
      v17 = 0;
      goto LABEL_19;
    }

    if (v6 < 1)
    {
      goto LABEL_18;
    }

    v22 = 0;
    v17 = 0;
    v23 = (*(a2 + 22) + 4);
    do
    {
      v24 = *v23;
      v23 += 4;
      if (v24 >= 1)
      {
        *(v7 + 4 * v17) = v22;
        *(result + 4 * v22) = v17++;
      }

      ++v22;
    }

    while (v6 != v22);
  }

LABEL_19:
  a2[34] = v17;
  return result;
}

uint64_t sub_2366DD290(uint64_t a1, int *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  sub_2366E2AA8(a1, a2, a3, a4, a5, a6, a7, a8, v117);
  v10 = *(a1 + 100);
  v11 = v10;
  v12 = (a2 + 50);
  v13 = *(a2 + 25);
  v14 = *(v13 + 120);
  v15 = *a2;
  v129 = *(a2 + 2);
  v130 = *(a2 + 12);
  v125 = *(a2 + 5);
  v126 = *(a2 + 6);
  sub_2366DD7E8(a1, a2);
  v16 = *(a2 + 15);
  v17 = *(a2 + 19);
  v128 = a2;
  v131 = v15;
  v18 = sub_2366E736C(v15, -1, *(a2 + 18));
  v25 = sub_2366E2AB8(a1, v10, v19, v20, v21, v22, v23, v24);
  v124 = a1;
  v32 = sub_2366E736C(v10, -1, v25);
  v33 = *(a1 + 4);
  if (!v33)
  {
    v122 = v17;
    if (v15 >= 1)
    {
      v67 = *(v13 + 176);
      v69 = v130;
      v68 = v15;
      v70 = v16;
      do
      {
        v71 = *v69;
        *v70++ = *(v14 + 4 * v71);
        *v69++ = *(v67 + 16 * v71 + 4);
        --v68;
      }

      while (v68);
    }

    v119 = v11;
    v120 = v13;
    v121 = v12;
    bzero(v128[22], 16 * v15);
    sub_2366E2AD0(a1);
    if (v15 < 1)
    {
      v123 = 0;
      v66 = v128;
LABEL_62:
      *(v66 + 34) = v123;
      goto LABEL_63;
    }

    v118 = v18;
    v72 = 0;
    v123 = 0;
    v73 = a1;
    v66 = v128;
    while (1)
    {
      v74 = *(v129 + 4 * v72);
      v75 = v72 + 1;
      v76 = *(v129 + 4 * (v72 + 1));
      v77 = v66[22] + 16 * v72;
      if (v130[v72])
      {
        v78 = v73;
        v79 = sub_2366E2AD8(v73, v76 - v74 + 1);
        *(v77 + 12) = v79;
        if (v76 <= v74)
        {
          *v77 = 0;
          v73 = v78;
        }

        else
        {
          v80 = 0;
          v81 = 0;
          v82 = (*(v78 + 272) + 8 * v79);
          v83 = v16[v72];
          v84 = (v125 + 4 * v74);
          v85 = (v126 + 4 * v74);
          v86 = v76 - v74;
          v73 = v78;
          do
          {
            v87 = *v84++;
            v88 = v16[v87];
            v89 = *v85;
            if (v83 == v88)
            {
              v81 += v89;
            }

            else
            {
              v80 += v89;
              v90 = *(v32 + 4 * v88);
              if (v90 == -1)
              {
                v91 = *(v77 + 8);
                *(v32 + 4 * v88) = v91;
                v92 = &v82[2 * v91];
                *v92 = v88;
                v93 = *v85;
                *(v77 + 8) = v91 + 1;
                v92[1] = v93;
              }

              else
              {
                v82[2 * v90 + 1] += v89;
              }
            }

            ++v85;
            --v86;
          }

          while (v86);
          *v77 = v81;
          *(v77 + 4) = v80;
          if (v80)
          {
            v66 = v128;
            if (v80 >= v81)
            {
              *(v122 + 4 * v123) = v72;
              *(v118 + 4 * v72) = v123++;
            }

            if (*(v77 + 8) >= 1)
            {
              v94 = 0;
              do
              {
                v95 = *v82;
                v82 += 2;
                *(v32 + 4 * v95) = -1;
                ++v94;
              }

              while (v94 < *(v77 + 8));
            }

            goto LABEL_58;
          }
        }

        *(v73 + 256) -= v76 - v74 + 1;
        v100 = (v77 + 12);
        v66 = v128;
      }

      else
      {
        if (v76 <= v74)
        {
          v96 = 0;
        }

        else
        {
          v96 = 0;
          v97 = (v126 + 4 * v74);
          v98 = v76 - v74;
          do
          {
            v99 = *v97++;
            v96 += v99;
            --v98;
          }

          while (v98);
        }

        *v77 = v96;
        v100 = (v77 + 12);
      }

      *v100 = -1;
LABEL_58:
      ++v72;
      if (v75 == v15)
      {
        goto LABEL_62;
      }
    }
  }

  if (v33 != 1)
  {
    sub_236815030(15, "Unknown objtype of %d\n", v26, v27, v28, v29, v30, v31, *(a1 + 4));
    v66 = v128;
    goto LABEL_64;
  }

  v119 = v11;
  v121 = v12;
  if (v15 >= 1)
  {
    v34 = *(v13 + 184);
    v36 = v130;
    v35 = v15;
    v37 = v16;
    do
    {
      v38 = *v36;
      *v37++ = *(v14 + 4 * v38);
      *v36++ = *(v34 + 20 * v38 + 4);
      --v35;
    }

    while (v35);
  }

  v120 = v13;
  bzero(v128[23], 20 * v15);
  sub_2366E2AD0(a1);
  v45 = v128;
  if (v15 >= 1)
  {
    v46 = 0;
    do
    {
      v47 = *(v129 + 4 * v46);
      v48 = v46 + 1;
      v49 = *(v129 + 4 * (v46 + 1));
      v50 = v45[23] + 20 * v46;
      v51 = v49 - v47;
      if (v130[v46])
      {
        v127 = v51 + 1;
        v52 = sub_2366E2B54(v124, v51 + 1);
        *(v50 + 16) = v52;
        v53 = (v50 + 16);
        if (v49 <= v47)
        {
          *v50 = 0;
        }

        else
        {
          v54 = 0;
          v55 = 0;
          v56 = (*(v124 + 280) + 12 * v52);
          v57 = v16[v46];
          v58 = (v125 + 4 * v47);
          do
          {
            v59 = *v58++;
            v60 = v16[v59];
            if (v57 == v60)
            {
              ++v55;
            }

            else
            {
              ++v54;
              v61 = *(v32 + 4 * v60);
              if (v61 == -1)
              {
                v62 = *(v50 + 12);
                *(v32 + 4 * v60) = v62;
                v63 = &v56[3 * v62];
                *v63 = v60;
                *(v50 + 12) = v62 + 1;
                *(v63 + 1) = 1;
              }

              else
              {
                ++v56[3 * v61 + 1];
              }
            }

            --v51;
          }

          while (v51);
          *v50 = v55;
          *(v50 + 4) = v54;
          if (v54)
          {
            v45 = v128;
            if (*(v50 + 12) >= 1)
            {
              v64 = 0;
              do
              {
                v65 = *v56;
                v56 += 3;
                *(v32 + 4 * v65) = -1;
                ++v64;
              }

              while (v64 < *(v50 + 12));
            }

            goto LABEL_26;
          }
        }

        v45 = v128;
        *(v124 + 256) -= v127;
      }

      else
      {
        *v50 = v51;
        v53 = (v50 + 16);
      }

      *v53 = -1;
LABEL_26:
      ++v46;
    }

    while (v48 != v131);
  }

  sub_2366DD8D0(v124, v45, v39, v40, v41, v42, v43, v44);
  v66 = v128;
LABEL_63:
  v13 = v120;
  v12 = v121;
  v11 = v119;
LABEL_64:
  *(v66 + 28) = *(v13 + 112);
  v101 = v66;
  sub_2366E7408(*(v66 + 2) * (v11 + 2), *(v13 + 128), v66[16]);
  sub_2366EC36C(v12, v102, v103, v104, v105, v106, v107, v108);
  v101[25] = 0;

  return sub_2366E2AB0(v124, v109, v110, v111, v112, v113, v114, v115);
}