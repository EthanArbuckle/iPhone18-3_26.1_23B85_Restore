uint64_t FigVCPCompositorHostPrepareToCompose(uint64_t a1, const void *a2, __int128 *a3, __int128 *a4, char a5, int a6, int a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13)
{
  v31 = 0;
  if (a2)
  {
    FigAtomicIncrement32();
    OUTLINED_FUNCTION_98_4();
    v18 = *MEMORY[0x1E695E480];
    v29 = *a3;
    v30 = *(a3 + 2);
    v27 = *a4;
    v28 = *(a4 + 2);
    v21 = FigVCPPendingFrameCreate(v18, v19, a2, &v29, &v27, a5, a6, a7, v20, a8, a9, a10, a11, a12, a13, &v31);
    if (!v21)
    {
      FigSimpleMutexLock();
      if (*(a1 + 32))
      {
        v22 = FigSignalErrorAtGM();
      }

      else
      {
        dispatch_group_enter(*(a1 + 64));
        CFArrayAppendValue(*(a1 + 56), v31);
        FigAtomicIncrement32();
        v22 = 0;
      }

      FigSimpleMutexUnlock();
      goto LABEL_7;
    }
  }

  else
  {
    v21 = FigSignalErrorAtGM();
  }

  v22 = v21;
LABEL_7:
  if (v31)
  {
    CFRelease(v31);
  }

  return v22;
}

uint64_t FigVCPCompositorHostAnticipateRendering(uint64_t a1, uint64_t a2, uint64_t a3)
{
  OUTLINED_FUNCTION_21_38(a3, MEMORY[0x1E6960C70]);
  if (!v30 && (v5 == -1 || v5 == 1))
  {
    OUTLINED_FUNCTION_77_11();
  }

  result = OUTLINED_FUNCTION_25_35(v4, v6, v7, v31, v34, v37, v40, v42, v45, v48, v51, v53, v56, v58, v60, v62, v64, v66, v68, v70, v73, v76, v79, v81, v82, v83, v84);
  if (!result)
  {
    v16 = *(a1 + 40);
    OUTLINED_FUNCTION_24_32(result, v9, v10, v11, v12, v13, v14, v15, v32, v35, v38, v41, v43, v46, v49, v52, v54, v57, v59, v61, v63, v65, v67, v69, v71, v72, v74, v75, v77, v78, v80);
    VTable = CMBaseObjectGetVTable();
    v27 = *(VTable + 16);
    v26 = VTable + 16;
    if (*(v27 + 56))
    {
      v28 = OUTLINED_FUNCTION_20_37(v26, v18, v19, v20, v21, v22, v23, v24, v25, v33, v36, v39, v44, v47, v50, v55);
      LODWORD(result) = v29(v16, v28);
    }

    else
    {
      LODWORD(result) = -12782;
    }

    v30 = result == -12509 || result == -12782;
    if (v30)
    {
      return 0;
    }

    else
    {
      return result;
    }
  }

  return result;
}

uint64_t FigVCPCompositorHostPrerollForRendering(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  OUTLINED_FUNCTION_21_38(a3, MEMORY[0x1E6960C70]);
  if (!v34 && (v9 == -1 || v9 == 1))
  {
    OUTLINED_FUNCTION_77_11();
  }

  result = OUTLINED_FUNCTION_25_35(v8, v10, v11, v35, v38, v41, v44, v46, v49, v52, v55, v57, v60, v62, v64, v66, v68, v70, v72, v74, v77, v80, v83, v85, v86, v87, v88);
  if (!result)
  {
    v20 = *(a1 + 40);
    OUTLINED_FUNCTION_24_32(result, v13, v14, v15, v16, v17, v18, v19, v36, v39, v42, v45, v47, v50, v53, v56, v58, v61, v63, v65, v67, v69, v71, v73, v75, v76, v78, v79, v81, v82, v84);
    VTable = CMBaseObjectGetVTable();
    v31 = *(VTable + 16);
    v30 = VTable + 16;
    if (!*(v31 + 64) || ((v32 = OUTLINED_FUNCTION_20_37(v30, v22, v23, v24, v25, v26, v27, v28, v29, v37, v40, v43, v48, v51, v54, v59), result = v33(v20, v32), result != -12509) ? (v34 = result == -12782) : (v34 = 1), v34))
    {
      fvcp_compositorHost_CompletePreroll(a1, a6, 0);
      return 0;
    }
  }

  return result;
}

void fvcp_compositorHost_CompletePreroll(uint64_t a1, uint64_t a2, uint64_t a3)
{
  if (*(a1 + 104))
  {
    if (*(a1 + 96))
    {
      v6 = FigCFWeakReferenceHolderCopyReferencedObject();
      if (v6)
      {
        v7 = v6;
        (*(a1 + 96))(a2, a3, v6);

        CFRelease(v7);
      }
    }
  }
}

uint64_t FigVCPCompositorHostCopyProperty(uint64_t a1, const void *a2, uint64_t a3, uint64_t a4)
{
  OUTLINED_FUNCTION_41_26();
  Value = CFDictionaryGetValue(fvcp_compositorHost_processorToCompositorPropertyKeyMapping, a2);
  if (!Value)
  {
    return 4294954512;
  }

  v9 = Value;
  FigBaseObject = FigVideoCompositorGetFigBaseObject(*(a1 + 40));
  v11 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v11)
  {
    return 4294954514;
  }

  return v11(FigBaseObject, v9, a3, a4);
}

uint64_t FigVCPCompositorHostSetProperty(uint64_t a1, const void *a2, uint64_t a3)
{
  OUTLINED_FUNCTION_41_26();
  Value = CFDictionaryGetValue(fvcp_compositorHost_processorToCompositorPropertyKeyMapping, a2);
  if (!Value)
  {
    return 4294954512;
  }

  v7 = Value;
  FigBaseObject = FigVideoCompositorGetFigBaseObject(*(a1 + 40));
  v9 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v9)
  {
    return 4294954514;
  }

  return v9(FigBaseObject, v7, a3);
}

uint64_t FigVCPCompositorHostGetRenderSize(uint64_t a1, CGSize *a2)
{
  size.height = 0.0;
  dict = 0;
  size.width = 0.0;
  FigBaseObject = FigVideoCompositorGetFigBaseObject(*(a1 + 40));
  v4 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (v4)
  {
    v5 = v4(FigBaseObject, @"RenderDimensions", *MEMORY[0x1E695E480], &dict);
    if (v5)
    {
      v6 = v5;
    }

    else
    {
      CGSizeMakeWithDictionaryRepresentation(dict, &size);
      v6 = 0;
      if (a2)
      {
        *a2 = size;
      }
    }
  }

  else
  {
    v6 = 4294954514;
  }

  if (dict)
  {
    CFRelease(dict);
  }

  return v6;
}

uint64_t fvcp_preprocessParameters_Equal(float *cf, float *a2)
{
  if (cf == a2)
  {
    return 1;
  }

  if (!cf)
  {
    return 0;
  }

  v4 = CFGetTypeID(cf);
  OUTLINED_FUNCTION_55_19();
  result = 0;
  if (!a2 || v4 != sFigVCPPreprocessParametersID)
  {
    return result;
  }

  v6 = CFGetTypeID(a2);
  OUTLINED_FUNCTION_55_19();
  if (v6 != sFigVCPPreprocessParametersID || cf[4] != a2[4])
  {
    return 0;
  }

  result = FigCFEqual();
  if (result)
  {
    result = FigCFEqual();
    if (result)
    {
      result = FigCFEqual();
      if (result)
      {
        result = FigCFEqual();
        if (result)
        {
          return FigCFEqual() != 0;
        }
      }
    }
  }

  return result;
}

uint64_t fvcp_preprocessParameters_setDestinationPixelBufferDesiredAttributes(uint64_t a1, CFTypeRef cf)
{
  if (!cf)
  {
    return 0;
  }

  v3 = CFGetTypeID(cf);
  if (v3 == CFDictionaryGetTypeID())
  {
    v4 = *MEMORY[0x1E6966130];
    Value = FigCFDictionaryGetValue();
    v6 = FigCFDictionaryGetValue();
    if (v6)
    {
      v7 = v6;
      v8 = CFGetTypeID(v6);
      if (v8 == CFNumberGetTypeID() && Value != 0)
      {
        v10 = CFGetTypeID(Value);
        if (v10 == CFArrayGetTypeID() && CFArrayGetCount(Value) >= 2)
        {
          v11 = OUTLINED_FUNCTION_173_0();
          FirstIndexOfValue = CFArrayGetFirstIndexOfValue(v11, v25, v7);
          if ((FirstIndexOfValue - 1) <= 0xFFFFFFFFFFFFFFFDLL)
          {
            v13 = FirstIndexOfValue;
            v14 = *MEMORY[0x1E695E480];
            Count = CFArrayGetCount(Value);
            MutableCopy = CFArrayCreateMutableCopy(v14, Count, Value);
            CFArrayRemoveValueAtIndex(MutableCopy, v13);
            v17 = OUTLINED_FUNCTION_173_0();
            CFArrayInsertValueAtIndex(v17, v18, v7);
            v19 = CFDictionaryCreateMutableCopy(v14, 0, *(a1 + 24));
            if (v19)
            {
              v20 = v19;
              CFDictionarySetValue(v19, v4, MutableCopy);
              v21 = *(a1 + 24);
              *(a1 + 24) = v20;
              CFRetain(v20);
              if (v21)
              {
                CFRelease(v21);
              }

              CFRelease(v20);
              v22 = 0;
              if (!MutableCopy)
              {
                return v22;
              }
            }

            else
            {
              OUTLINED_FUNCTION_303();
              v22 = FigSignalErrorAtGM();
              if (!MutableCopy)
              {
                return v22;
              }
            }

            CFRelease(MutableCopy);
            return v22;
          }
        }
      }
    }

    return 0;
  }

  OUTLINED_FUNCTION_303();

  return FigSignalErrorAtGM();
}

void fvcp_source_sourceImageAvailable(uint64_t a1, void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (OUTLINED_FUNCTION_35_24())
  {
    FigSimpleMutexLock();
    if ((*(DerivedStorage + 252) & 1) == 0 || (OUTLINED_FUNCTION_18_25(), (OUTLINED_FUNCTION_66_12(*(DerivedStorage + 256), *(DerivedStorage + 240), *(DerivedStorage + 248), v8, v9, v10) & 0x80000000) != 0))
    {
      v4 = *a2;
      *(DerivedStorage + 256) = a2[2];
      *(DerivedStorage + 240) = v4;
    }

    if ((*(DerivedStorage + 276) & 1) == 0 || (OUTLINED_FUNCTION_18_25(), OUTLINED_FUNCTION_66_12(*(DerivedStorage + 280), *(DerivedStorage + 264), *(DerivedStorage + 272), v8, v9, v10) >= 1))
    {
      v5 = *a2;
      *(DerivedStorage + 280) = a2[2];
      *(DerivedStorage + 264) = v5;
    }

    OUTLINED_FUNCTION_63_14();
    FigAtomicCompareAndSwap32();
    OUTLINED_FUNCTION_81_6();
    FigAtomicCompareAndSwap32();
    FigSimpleMutexUnlock();
    if (FigCFWeakReferenceHolderCopyReferencedObject())
    {
      v6 = OUTLINED_FUNCTION_52_19();
      v7(v6);
      CFRelease(a2);
    }
  }
}

void fvcp_source_noMoreImages()
{
  CMBaseObjectGetDerivedStorage();
  if (OUTLINED_FUNCTION_35_24())
  {
    OUTLINED_FUNCTION_81_6();
    FigAtomicCompareAndSwap32();
    OUTLINED_FUNCTION_81_6();
    FigAtomicCompareAndSwap32();
    FigVCPSourceHoldTriggerUntilAvailabilityChanges();
    if (FigCFWeakReferenceHolderCopyReferencedObject())
    {
      v1 = OUTLINED_FUNCTION_52_19();
      v2(v1);

      CFRelease(v0);
    }
  }
}

uint64_t fvcp_vc_source_sourceFlushed(uint64_t a1, uint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  v4 = MEMORY[0x1E6960C70];
  v5 = *MEMORY[0x1E6960C70];
  *(DerivedStorage + 240) = *MEMORY[0x1E6960C70];
  v6 = *(v4 + 16);
  *(DerivedStorage + 256) = v6;
  *(DerivedStorage + 264) = v5;
  *(DerivedStorage + 280) = v6;
  OUTLINED_FUNCTION_63_14();
  FigAtomicCompareAndSwap32();
  OUTLINED_FUNCTION_63_14();
  FigAtomicCompareAndSwap32();
  FigSimpleMutexUnlock();
  if (FigVCPSourceRequiresWindowedSampling(a2, 0) || (result = FigVCPSourceRequiresWindowedSampling(a2, 1), result))
  {
    FigSimpleMutexLock();
    CFArrayRemoveAllValues(*(DerivedStorage + 336));
    *(DerivedStorage + 408) = 0;
    *(DerivedStorage + 376) = 0u;
    *(DerivedStorage + 392) = 0u;
    *(DerivedStorage + 344) = 0u;
    *(DerivedStorage + 360) = 0u;

    return FigSimpleMutexUnlock();
  }

  return result;
}

void fvcp_vc_source_newTimeRangeAvailable()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v9 = *MEMORY[0x1E6960C70];
  v10 = *(MEMORY[0x1E6960C70] + 16);
  v8 = *MEMORY[0x1E6960C70];
  if (OUTLINED_FUNCTION_35_24())
  {
    FigCFDictionaryGetCMTimeIfPresent();
    FigCFDictionaryGetCMTimeIfPresent();
    FigSimpleMutexLock();
    if ((BYTE12(v9) & 1) != 0 && ((*(DerivedStorage + 252) & 1) == 0 || (OUTLINED_FUNCTION_66_12(*(DerivedStorage + 256), *(DerivedStorage + 240), *(DerivedStorage + 248), v5, v6, v9) & 0x80000000) != 0))
    {
      *(DerivedStorage + 240) = v9;
      *(DerivedStorage + 256) = v10;
      v1 = 1;
    }

    else
    {
      v1 = 0;
    }

    if (BYTE12(v8))
    {
      if ((*(DerivedStorage + 276) & 1) == 0 || (OUTLINED_FUNCTION_18_25(), (OUTLINED_FUNCTION_66_12(v10, v8, *(&v8 + 1), v5, v6, v7) & 0x80000000) != 0))
      {
        *(DerivedStorage + 264) = v8;
        *(DerivedStorage + 280) = v10;
        v1 = 1;
      }
    }

    OUTLINED_FUNCTION_81_6();
    v2 = FigAtomicCompareAndSwap32();
    FigSimpleMutexUnlock();
    if (v1 || v2)
    {
      if (FigCFWeakReferenceHolderCopyReferencedObject())
      {
        v3 = OUTLINED_FUNCTION_52_19();
        v4(v3);
        CFRelease(v2);
      }
    }
  }
}

void fvcp_vc_source_Finalize()
{
  CMBaseObjectGetDerivedStorage();
  v1 = OUTLINED_FUNCTION_199();
  FigVCPSourceInvalidate(v1);
  v2 = v0[27];
  if (v2)
  {
    CFRelease(v2);
  }

  v3 = v0[37];
  if (v3)
  {
    CFRelease(v3);
  }

  FigSimpleMutexDestroy();
  v4 = v0[42];
  if (v4)
  {
    CFRelease(v4);
  }

  FigSimpleMutexDestroy();

  fvcp_source_finalize();
}

uint64_t fvcp_vc_source_CheckSampleAvailability(uint64_t a1, int a2, uint64_t a3, uint64_t a4, char *a5, _BYTE *a6)
{
  v634 = *MEMORY[0x1E69E9840];
  CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (!FigVCPSourceRequiresWindowedSampling(a1, a2))
  {
    v624 = *a4;
    v151 = *(a4 + 12);
    v625 = *(a4 + 8);
    v152 = *(a4 + 16);
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    if (!OUTLINED_FUNCTION_35_24() || OUTLINED_FUNCTION_64_12())
    {
LABEL_28:
      LOBYTE(a3) = 0;
      v56 = 0;
      goto LABEL_29;
    }

    LODWORD(v503) = a3;
    v56 = 1;
    if (OUTLINED_FUNCTION_101_4())
    {
      goto LABEL_29;
    }

    if (a2 == -1)
    {
      OUTLINED_FUNCTION_57_14();
      v163 = v151 & 0x1F;
      if (v268 == 3 || v163 == 3)
      {
        OUTLINED_FUNCTION_27_29();
        v617 = v152;
        rhs.value = v270;
        rhs.timescale = *(v271 + 8);
        rhs.flags = -1;
        v280 = OUTLINED_FUNCTION_34_27(v272, v273, v274, v275, v276, v277, v278, v279, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v624, __SPAIR64__(v151, v625), v152, v270, *&rhs.timescale, a3, v619, v620);
        v288 = OUTLINED_FUNCTION_37_27(v280, v281, v282, v283, v284, v285, v286, v287, v443, v467, v491, v519, v548, v575, v602, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
        v290 = CMTimeAbsoluteValue(v289, v288);
        v298 = OUTLINED_FUNCTION_12_67(v290, v291, v292, v293, v294, v295, v296, v297, v444, v468, v492, v520, v549, v576, v603, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
        v260 = OUTLINED_FUNCTION_1_180(v298, v299, v300, v301, v302, v303, v304, v305, v445, v493, v521, v550, v577, v604, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620);
        if (v260 <= 0)
        {
          goto LABEL_69;
        }
      }

      if ((OUTLINED_FUNCTION_40_23(v260, v261, v262, v263, v264, v265, v266, v267, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620, v621, v622, v623) & 0x80000000) == 0)
      {
        goto LABEL_69;
      }
    }

    else
    {
      if (a2 != 1)
      {
        v163 = v151 & 0x1F;
LABEL_69:
        OUTLINED_FUNCTION_59_15();
        v316 = v163 == 3 || v315 == 3;
        if (!v316 || (memset(__dst, 0, 24), v617 = a3, rhs.value = v624, *&rhs.timescale = __PAIR64__(v151, v625), rhs.epoch = v152, v615 = *v314, LODWORD(v616) = *(v314 + 8), HIDWORD(v616) = a2, v317 = OUTLINED_FUNCTION_34_27(v306, v307, v308, v309, v310, v311, v312, v313, v427, v455, v475, v503, v531, v560, v587, 0, 0, 0, *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, a3, v624, __SPAIR64__(v151, v625), v152, v619, v620), v325 = OUTLINED_FUNCTION_37_27(v317, v318, v319, v320, v321, v322, v323, v324, v446, v469, v494, v522, v551, v578, v605, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620), v327 = CMTimeAbsoluteValue(v326, v325), v335 = OUTLINED_FUNCTION_12_67(v327, v328, v329, v330, v331, v332, v333, v334, v447, v470, v495, v523, v552, v579, v606, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620), OUTLINED_FUNCTION_1_180(v335, v336, v337, v338, v339, v340, v341, v342, v448, v496, v524, v553, v580, v607, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620) > 0))
        {
          OUTLINED_FUNCTION_36_26();
          if ((OUTLINED_FUNCTION_84_7(v343, v344, v345, v346, v347, v348, v349, v350, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620) & 0x80000000) != 0)
          {
            goto LABEL_92;
          }
        }

        OUTLINED_FUNCTION_57_14();
        if (v163 == 3 || v359 == 3)
        {
          memset(__dst, 0, 24);
          v617 = a3;
          rhs.value = v624;
          *&rhs.timescale = __PAIR64__(v151, v625);
          rhs.epoch = v152;
          v615 = *(DerivedStorage + 264);
          LODWORD(v616) = *(DerivedStorage + 272);
          HIDWORD(v616) = a2;
          v361 = OUTLINED_FUNCTION_34_27(v351, v352, v353, v354, v355, v356, v357, v358, v427, v455, v475, v503, v531, v560, v587, 0, 0, 0, *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, a3, v624, __SPAIR64__(v151, v625), v152, v619, v620);
          v369 = OUTLINED_FUNCTION_37_27(v361, v362, v363, v364, v365, v366, v367, v368, v449, v471, v497, v525, v554, v581, v608, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
          v371 = CMTimeAbsoluteValue(v370, v369);
          v379 = OUTLINED_FUNCTION_12_67(v371, v372, v373, v374, v375, v376, v377, v378, v450, v472, v498, v526, v555, v582, v609, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
          if (OUTLINED_FUNCTION_1_180(v379, v380, v381, v382, v383, v384, v385, v386, v451, v499, v527, v556, v583, v610, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620) <= 0)
          {
            goto LABEL_93;
          }
        }

        OUTLINED_FUNCTION_36_26();
        goto LABEL_91;
      }

      OUTLINED_FUNCTION_59_15();
      v163 = v151 & 0x1F;
      if (v164 == 3 || v163 == 3)
      {
        OUTLINED_FUNCTION_27_29();
        v617 = v152;
        rhs.value = v166;
        rhs.timescale = *(v167 + 8);
        rhs.flags = 1;
        v176 = OUTLINED_FUNCTION_34_27(v168, v169, v170, v171, v172, v173, v174, v175, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v624, __SPAIR64__(v151, v625), v152, v166, *&rhs.timescale, a3, v619, v620);
        v184 = OUTLINED_FUNCTION_37_27(v176, v177, v178, v179, v180, v181, v182, v183, v437, v463, v485, v513, v542, v569, v596, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
        v186 = CMTimeAbsoluteValue(v185, v184);
        v194 = OUTLINED_FUNCTION_12_67(v186, v187, v188, v189, v190, v191, v192, v193, v438, v464, v486, v514, v543, v570, v597, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
        v155 = OUTLINED_FUNCTION_1_180(v194, v195, v196, v197, v198, v199, v200, v201, v439, v487, v515, v544, v571, v598, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620);
        if (v155 <= 0)
        {
          goto LABEL_69;
        }
      }

      if (OUTLINED_FUNCTION_40_23(v155, v156, v157, v158, v159, v160, v161, v162, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620, v621, v622, v623) <= 0)
      {
        goto LABEL_69;
      }
    }

    v259 = v503 == 0;
    goto LABEL_64;
  }

  v532 = *a4;
  v588 = *(a4 + 16);
  v12 = CMBaseObjectGetDerivedStorage();
  v13 = memcpy(__dst, (v12 + 120), sizeof(__dst));
  v21 = (v12 + 168);
  if (a2)
  {
    v21 = (v12 + 120);
  }

  v22 = 24;
  if (!a2)
  {
    v22 = 72;
  }

  rhs = *v21;
  v23 = __dst + v22;
  v632 = *v23;
  v633 = *(v23 + 2);
  OUTLINED_FUNCTION_87_4(v13, v14, v15, v16, v17, v18, v19, v20, v427, v455, v475, v503, v532);
  v32 = OUTLINED_FUNCTION_37_27(v24, v25, v26, v27, v28, v29, v30, v31, v428, v456, v476, v504, v533, v561, v588, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
  v34 = CMTimeSubtract(v33, v32, &rhs);
  v628 = *&__dst[0];
  v35 = HIDWORD(__dst[0]);
  v629 = DWORD2(__dst[0]);
  v36 = *&__dst[1];
  OUTLINED_FUNCTION_87_4(v34, v37, v38, v39, v40, v41, v42, v43, v429, v457, v477, v505, v534);
  v52 = OUTLINED_FUNCTION_37_27(v44, v45, v46, v47, v48, v49, v50, v51, v430, v458, v478, v506, v535, v562, v589, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, v632, *(&v632 + 1), v633, v619, v620);
  CMTimeAdd(v53, v52, &rhs);
  v630 = *&__dst[0];
  v54 = HIDWORD(__dst[0]);
  v631 = DWORD2(__dst[0]);
  v503 = *&__dst[1];
  if (!OUTLINED_FUNCTION_64_12() || OUTLINED_FUNCTION_64_12())
  {
    goto LABEL_28;
  }

  HIDWORD(v455) = v54;
  v475 = v36;
  v55 = v35;
  v56 = 1;
  if (OUTLINED_FUNCTION_101_4())
  {
    goto LABEL_29;
  }

  if (a2 != -1)
  {
    if (a2 != 1)
    {
      LOBYTE(a3) = 0;
      goto LABEL_29;
    }

    v626 = *(v12 + 240);
    v57 = *(v12 + 252);
    v627 = *(v12 + 248);
    v58 = *(v12 + 256);
    v59 = (v57 & 0x1F) == 3 || (v55 & 0x1F) == 3;
    if (v59 && (OUTLINED_FUNCTION_27_29(), v617 = v36, rhs.value = v60, rhs.timescale = *(v61 + 8), rhs.flags = v57, v70 = OUTLINED_FUNCTION_34_27(v62, v63, v64, v65, v66, v67, v68, v69, v427, v455, v36, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v628, __SPAIR64__(v55, v629), v36, v60, *&rhs.timescale, v58, v619, v620), v78 = OUTLINED_FUNCTION_37_27(v70, v71, v72, v73, v74, v75, v76, v77, v431, v459, v479, v507, v536, v563, v590, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620), v80 = CMTimeAbsoluteValue(v79, v78), v88 = OUTLINED_FUNCTION_12_67(v80, v81, v82, v83, v84, v85, v86, v87, v432, v460, v480, v508, v537, v564, v591, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620), OUTLINED_FUNCTION_1_180(v88, v89, v90, v91, v92, v93, v94, v95, v433, v481, v509, v538, v565, v592, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620) <= 0) || (OUTLINED_FUNCTION_9_73(), OUTLINED_FUNCTION_75_10(), OUTLINED_FUNCTION_84_7(v96, v97, v98, v99, v100, v101, v102, v103, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620) <= 0))
    {
      OUTLINED_FUNCTION_58_11();
      v104 = HIDWORD(v455);
      v106 = v105 == 3 || (BYTE4(v455) & 0x1F) == 3;
      if (!v106 || (OUTLINED_FUNCTION_27_29(), OUTLINED_FUNCTION_67_14(), v117 = OUTLINED_FUNCTION_34_27(v107, v108, v109, v110, v111, v112, v113, v114, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, __SPAIR64__(HIDWORD(v455), v115), v503, v116, *&rhs.timescale, rhs.epoch, v619, v620), v125 = OUTLINED_FUNCTION_37_27(v117, v118, v119, v120, v121, v122, v123, v124, v434, v461, v482, v510, v539, v566, v593, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620), v127 = CMTimeAbsoluteValue(v126, v125), v135 = OUTLINED_FUNCTION_12_67(v127, v128, v129, v130, v131, v132, v133, v134, v435, v462, v483, v511, v540, v567, v594, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620), OUTLINED_FUNCTION_1_180(v135, v136, v137, v138, v139, v140, v141, v142, v436, v484, v512, v541, v568, v595, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620) > 0))
      {
        OUTLINED_FUNCTION_9_73();
        v621 = v631;
        v622 = v104;
        v623 = v503;
        if ((OUTLINED_FUNCTION_84_7(v143, v144, v145, v146, v147, v148, v149, v150, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v630) & 0x80000000) != 0)
        {
          goto LABEL_92;
        }
      }

      goto LABEL_93;
    }

    goto LABEL_54;
  }

  OUTLINED_FUNCTION_58_11();
  v203 = v202 == 3 || (BYTE4(v455) & 0x1F) == 3;
  v204 = v55;
  v205 = HIDWORD(v455);
  if (v203)
  {
    OUTLINED_FUNCTION_27_29();
    OUTLINED_FUNCTION_67_14();
    v216 = OUTLINED_FUNCTION_34_27(v206, v207, v208, v209, v210, v211, v212, v213, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, __SPAIR64__(HIDWORD(v455), v214), v503, v215, *&rhs.timescale, rhs.epoch, v619, v620);
    v224 = OUTLINED_FUNCTION_37_27(v216, v217, v218, v219, v220, v221, v222, v223, v440, v465, v488, v516, v545, v572, v599, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
    v226 = CMTimeAbsoluteValue(v225, v224);
    v234 = OUTLINED_FUNCTION_12_67(v226, v227, v228, v229, v230, v231, v232, v233, v441, v466, v489, v517, v546, v573, v600, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
    v242 = OUTLINED_FUNCTION_1_180(v234, v235, v236, v237, v238, v239, v240, v241, v442, v490, v518, v547, v574, v601, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620);
    if (v242 <= 0)
    {
      v258 = v475;
      goto LABEL_84;
    }
  }

  OUTLINED_FUNCTION_9_73();
  v621 = v631;
  v622 = v205;
  v623 = v503;
  v242 = OUTLINED_FUNCTION_84_7(v250, v251, v252, v253, v254, v255, v256, v257, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v630);
  v258 = v475;
  if ((v242 & 0x80000000) == 0)
  {
LABEL_84:
    v396 = *(v12 + 240);
    v395 = v12 + 240;
    v626 = v396;
    v397 = *(v395 + 12);
    v627 = *(v395 + 8);
    v398 = *(v395 + 16);
    if ((v397 & 0x1F) == 3 || (v204 & 0x1F) == 3)
    {
      memset(__dst, 0, 24);
      v400 = *v395;
      v617 = v258;
      rhs.value = v400;
      rhs.timescale = *(v395 + 8);
      rhs.flags = v397;
      v401 = OUTLINED_FUNCTION_34_27(v242, v243, v244, v245, v246, v247, v248, v249, v427, v455, v475, v503, v531, v560, v587, 0, 0, 0, *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v628, __SPAIR64__(v204, v629), v258, v400, *&rhs.timescale, v398, v619, v620);
      v409 = OUTLINED_FUNCTION_37_27(v401, v402, v403, v404, v405, v406, v407, v408, v452, v473, v500, v528, v557, v584, v611, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
      v411 = CMTimeAbsoluteValue(v410, v409);
      v419 = OUTLINED_FUNCTION_12_67(v411, v412, v413, v414, v415, v416, v417, v418, v453, v474, v501, v529, v558, v585, v612, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620);
      if (OUTLINED_FUNCTION_1_180(v419, v420, v421, v422, v423, v424, v425, v426, v454, v502, v530, v559, v586, v613, __dst[0], *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, *&rhs.value, rhs.epoch, v619, v620) <= 0)
      {
        goto LABEL_93;
      }
    }

    OUTLINED_FUNCTION_9_73();
    OUTLINED_FUNCTION_75_10();
LABEL_91:
    if (OUTLINED_FUNCTION_84_7(v387, v388, v389, v390, v391, v392, v393, v394, v427, v455, v475, v503, v531, v560, v587, *&__dst[0], *(&__dst[0] + 1), *&__dst[1], *(&__dst[1] + 1), *&__dst[2], *(&__dst[2] + 1), *&__dst[3], *(&__dst[3] + 1), *&__dst[4], *(&__dst[4] + 1), *&__dst[5], *(&__dst[5] + 1), v615, v616, v617, rhs.value, *&rhs.timescale, rhs.epoch, v619, v620) > 0)
    {
LABEL_92:
      LOBYTE(a3) = 0;
LABEL_94:
      v56 = 1;
      goto LABEL_29;
    }

LABEL_93:
    LOBYTE(a3) = 1;
    goto LABEL_94;
  }

LABEL_54:
  v259 = a3 == 0;
LABEL_64:
  LOBYTE(a3) = !v259;
  v56 = a3;
LABEL_29:
  if ((a3 & 1) == 0)
  {
    FigVCPSourceHoldTriggerUntilAvailabilityChanges();
  }

  FigSimpleMutexUnlock();
  if (a5)
  {
    *a5 = v56;
  }

  if (a6)
  {
    *a6 = a3;
  }

  return 0;
}

uint64_t fvcp_vc_source_SetCurrentTime(uint64_t a1, unsigned int a2, uint64_t a3)
{
  v852 = *MEMORY[0x1E69E9840];
  HIDWORD(v691) = a2;
  if (!FigVCPSourceRequiresWindowedSampling(a1, a2))
  {
    v837 = *a3;
    v144 = *(a3 + 12);
    LODWORD(v838) = *(a3 + 8);
    v145 = *(a3 + 16);
    v830.value = 0;
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    v848.value = v837;
    v848.timescale = v838;
    v147 = (DerivedStorage + 240);
    v847.value = *(DerivedStorage + 240);
    v847.timescale = *(DerivedStorage + 248);
    v149 = (DerivedStorage + 252);
    v148 = *(DerivedStorage + 252);
    v722 = (DerivedStorage + 252);
    v745 = (DerivedStorage + 256);
    v150 = *(DerivedStorage + 256);
    v151 = (v144 & 0x1F) == 3 || (*(DerivedStorage + 252) & 0x1F) == 3;
    if (v151 && (OUTLINED_FUNCTION_65_13(), v835 = v145, v832.value = *v147, v832.timescale = *(DerivedStorage + 248), v832.flags = v148, v160 = OUTLINED_FUNCTION_15_54(v152, v153, v154, v155, v156, v157, v158, v159, v461, v484, v507, v530, v553, v576, v599, v622, v644, v668, v691, v722, v745, v760, v779, v799, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v150, v833, v834), v163 = CMTimeSubtract(v162, v160, v161), OUTLINED_FUNCTION_85_7(v163, v164, v165, v166, v167, v168, v169, v170, v469, v492, v515, v538, v561, v584, v607, v630, v652, v676, v699, v723, v746, v768, v787, v807, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v145, v836, v837, v838, v839), v171 = OUTLINED_FUNCTION_13_53(&v851), OUTLINED_FUNCTION_73_10(v171, v172, v173, v174, v175, v176, v177, v178, v470, v493, v516, v539, v562, v585, v608, v631, v653, v677, v700, v724, v747, v769, v788, v808, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) <= 0))
    {
      v189 = DerivedStorage + 240;
      v190 = v745;
    }

    else
    {
      OUTLINED_FUNCTION_89_6();
      __dst[0].epoch = v145;
      v851.value = v847.value;
      v851.timescale = v847.timescale;
      v851.flags = v148;
      v851.epoch = v150;
      v187 = OUTLINED_FUNCTION_38_22(v179, v180, v181, v182, v183, v184, v185, v186, v461, v484, v507, v530, v553, v576, v599, v622, v644, v668, v691, v722, v745, v760, v145, v799, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
      v189 = DerivedStorage + 240;
      v190 = v745;
      if (CMTimeCompare(v187, v188))
      {
        v189 = DerivedStorage + 264;
        v847.value = *(DerivedStorage + 264);
        v847.timescale = *(DerivedStorage + 272);
        v149 = (DerivedStorage + 276);
        v191 = *(DerivedStorage + 276);
        v190 = (DerivedStorage + 280);
        v192 = (v144 & 0x1F) == 3 || (*(DerivedStorage + 276) & 0x1F) == 3;
        if (!v192 || (OUTLINED_FUNCTION_65_13(), v835 = v789, v832.value = *v189, v832.timescale = *(DerivedStorage + 272), v832.flags = v191, v202 = OUTLINED_FUNCTION_15_54(v193, v194, v195, v196, v197, v198, v199, v200, v471, v494, v517, v540, v563, v586, v609, v632, v654, v678, v691, v722, v745, v770, v789, v809, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v201, v833, v834), v205 = CMTimeSubtract(v204, v202, v203), OUTLINED_FUNCTION_85_7(v205, v206, v207, v208, v209, v210, v211, v212, v472, v495, v518, v541, v564, v587, v610, v633, v655, v679, v701, v725, v748, v771, v790, v810, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839), v213 = OUTLINED_FUNCTION_13_53(&v851), OUTLINED_FUNCTION_73_10(v213, v214, v215, v216, v217, v218, v219, v220, v473, v496, v519, v542, v565, v588, v611, v634, v656, v680, v702, v726, v749, v772, v791, v811, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) > 0))
        {
          OUTLINED_FUNCTION_89_6();
          __dst[0].epoch = v789;
          v851.value = v847.value;
          v851.timescale = v847.timescale;
          v851.flags = v191;
          v851.epoch = v221;
          v230 = OUTLINED_FUNCTION_38_22(v222, v223, v224, v225, v226, v227, v228, v229, v471, v494, v517, v540, v563, v586, v609, v632, v654, v678, v691, v722, v745, v770, v789, v809, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
          if (CMTimeCompare(v230, v231))
          {
LABEL_50:
            v232 = *(DerivedStorage + 216);
            v233 = *(*(CMBaseObjectGetVTable() + 16) + 48);
            if (v233)
            {
              v234 = *MEMORY[0x1E695E480];
              __dst[0].value = v848.value;
              *&__dst[0].timescale = __PAIR64__(v144, v848.timescale);
              __dst[0].epoch = v792;
              v235 = v233(v232, v234, __dst, 1, &v830, 0, DerivedStorage + 304);
              value = v830.value;
              if (!v235 && v830.value)
              {
                FigSimpleMutexLock();
                if (v691 < 0 || (*v147 = v848.value, *(DerivedStorage + 248) = v848.timescale, *v722 = v144, *v745 = v792, !HIDWORD(v691)))
                {
                  *(DerivedStorage + 264) = v848.value;
                  *(DerivedStorage + 272) = v848.timescale;
                  *(DerivedStorage + 276) = v144;
                  *(DerivedStorage + 280) = v792;
                }

                FigSimpleMutexUnlock();
                value = v830.value;
              }

              v237 = *(DerivedStorage + 88);
              if (value == v237)
              {
LABEL_68:
                v239 = v830.value;
                if (!v830.value)
                {
                  return v235;
                }

                goto LABEL_175;
              }

              *(DerivedStorage + 88) = value;
              if (value)
              {
                CFRetain(value);
              }

              if (!v237)
              {
LABEL_65:
                v238 = *(DerivedStorage + 96);
                if (v238)
                {
                  CFRelease(v238);
                  *(DerivedStorage + 96) = 0;
                }

                goto LABEL_68;
              }
            }

            else
            {
              v237 = *(DerivedStorage + 88);
              if (!v237)
              {
                v235 = 4294954514;
                goto LABEL_68;
              }

              *(DerivedStorage + 88) = 0;
              v235 = 4294954514;
            }

            CFRelease(v237);
            goto LABEL_65;
          }
        }
      }
    }

    v848.value = *v189;
    v848.timescale = *(v189 + 8);
    v144 = *v149;
    v792 = *v190;
    goto LABEL_50;
  }

  v839 = *a3;
  v7 = *(a3 + 12);
  v840 = *(a3 + 8);
  v8 = *(a3 + 16);
  v831 = 0;
  v848 = **&MEMORY[0x1E6960C70];
  v737 = v848;
  v9 = CMBaseObjectGetDerivedStorage();
  v830 = v848;
  v828 = v848;
  v822 = v848;
  v820 = v848;
  v818 = v848;
  HIBYTE(v799) = 0;
  v846 = v840;
  v845 = v839;
  memcpy(__dst, (v9 + 120), sizeof(__dst));
  v10 = 1;
  if (!a2)
  {
    v10 = 3;
  }

  v847 = __dst[v10];
  v11 = v7;
  OUTLINED_FUNCTION_96_7();
  __dst[0].epoch = v8;
  v851 = *v12;
  v21 = OUTLINED_FUNCTION_38_22(v13, v14, v15, v16, v17, v18, v19, v20, v461, v484, v507, v530, v553, v576, v599, v622, v644, v668, v691, v713, v737.value, *&v737.timescale, v737.epoch, v799, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
  CMTimeSubtract(v23, v21, v22);
  OUTLINED_FUNCTION_96_7();
  __dst[0].epoch = v8;
  v851 = v847;
  v32 = OUTLINED_FUNCTION_38_22(v24, v25, v26, v27, v28, v29, v30, v31, v462, v485, v508, v531, v554, v577, v600, v623, v645, v669, v692, v8, v738, v761, v780, v800, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
  CMTimeAdd(v34, v32, v33);
  if (a2 >= 2)
  {
    v35 = &v828;
  }

  else
  {
    v35 = &v830;
  }

  if (a2 >= 2)
  {
    v36 = &v830;
  }

  else
  {
    v36 = &v828;
  }

  v826 = *v35;
  v824 = *v36;
  EarliestSequentialImageTime = FigVisualContextGetEarliestSequentialImageTime(*(v9 + 216), 0, &v818, 0);
  if ((v818.flags & 1) == 0)
  {
    v235 = 0;
    goto LABEL_174;
  }

  __dst[0] = v824;
  v851 = v818;
  v45 = OUTLINED_FUNCTION_38_22(EarliestSequentialImageTime, v38, v39, v40, v41, v42, v43, v44, v463, v486, v509, v532, v555, v578, v601, v624, v646, v670, v693, v714, v739, v762, v781, v801, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
  if (fvcp_timeIsEarlierOrEqualInPlayback(v45, v46, a2))
  {
    v824 = v818;
  }

  v47 = *(v9 + 216);
  v48 = *MEMORY[0x1E695E480];
  v49 = *(*(CMBaseObjectGetVTable() + 16) + 48);
  if (v49)
  {
    __dst[0] = v824;
    v49(v47, v48, __dst, 1, &v831, 0, &v820);
  }

  v602 = v3;
  v671 = a1;
  if (v831)
  {
    CFRelease(v831);
    v831 = 0;
  }

  v843.value = *(v9 + 240);
  v843.timescale = *(v9 + 248);
  v50 = (v9 + 252);
  v51 = *(v9 + 252);
  v52 = (v9 + 256);
  v53 = *(v9 + 256);
  v54 = v11 & 0x1F;
  v55 = v54 == 3 || (*(v9 + 252) & 0x1F) == 3;
  v625 = v9 + 240;
  v647 = v9;
  if (v55 && (OUTLINED_FUNCTION_76_13(), *(&v834 + 1) = __PAIR64__(v11, v56), v835 = v715, v832.value = *v57, v832.timescale = *(v57 + 8), v832.flags = v51, v66 = OUTLINED_FUNCTION_15_54(v58, v59, v60, v61, v62, v63, v64, v65, v464, v487, v510, v533, v556, v579, v3, v625, v9, v671, v694, v715, v740, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v53, v833, v834), v69 = CMTimeSubtract(v68, v66, v67), OUTLINED_FUNCTION_85_7(v69, v70, v71, v72, v73, v74, v75, v76, v465, v488, v511, v534, v557, v580, v603, v626, v648, v672, v695, v716, v741, v764, v783, v803, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839), v77 = OUTLINED_FUNCTION_13_53(&v851), OUTLINED_FUNCTION_14_63(v77, v78, v79, v80, v81, v82, v83, v84, v466, v489, v512, v535, v558, v581, v604, v627, v649, v673, v696, v717, v742, v765, v784, v804, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) <= 0))
  {
    v96 = v625;
  }

  else
  {
    __dst[0].value = v845;
    *&__dst[0].timescale = __PAIR64__(v11, v846);
    __dst[0].epoch = v715;
    OUTLINED_FUNCTION_70_11();
    v851.timescale = v85;
    v851.flags = v51;
    v851.epoch = v53;
    v94 = OUTLINED_FUNCTION_38_22(v86, v87, v88, v89, v90, v91, v92, v93, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v715, v740, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
    v96 = v95;
    if (CMTimeCompare(v94, v97))
    {
      v98 = v9;
      v99 = v48;
      v100 = v11;
      v96 = v98 + 264;
      v843.value = *(v98 + 264);
      v843.timescale = *(v98 + 272);
      v50 = (v98 + 276);
      v101 = *(v98 + 276);
      v52 = (v98 + 280);
      v102 = *(v98 + 280);
      v103 = v54 == 3 || (*(v98 + 276) & 0x1F) == 3;
      if (v103 && (OUTLINED_FUNCTION_76_13(), *(&v834 + 1) = __PAIR64__(v100, v104), v835 = v718, v832.value = *v96, v832.timescale = *(v96 + 8), v832.flags = v101, v113 = OUTLINED_FUNCTION_15_54(v105, v106, v107, v108, v109, v110, v111, v112, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v718, v740, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v102, v833, v834), v116 = CMTimeSubtract(v115, v113, v114), OUTLINED_FUNCTION_85_7(v116, v117, v118, v119, v120, v121, v122, v123, v467, v490, v513, v536, v559, v582, v605, v628, v650, v674, v697, v719, v743, v766, v785, v805, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839), v124 = OUTLINED_FUNCTION_13_53(&v851), OUTLINED_FUNCTION_14_63(v124, v125, v126, v127, v128, v129, v130, v131, v468, v491, v514, v537, v560, v583, v606, v629, v651, v675, v698, v720, v744, v767, v786, v806, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) <= 0))
      {
        v48 = v99;
        v9 = v647;
      }

      else
      {
        __dst[0].value = v845;
        *&__dst[0].timescale = __PAIR64__(v100, v846);
        __dst[0].epoch = v718;
        OUTLINED_FUNCTION_70_11();
        v851.timescale = v132;
        v851.flags = v101;
        v851.epoch = v102;
        v133 = v100;
        v142 = OUTLINED_FUNCTION_38_22(v134, v135, v136, v137, v138, v139, v140, v141, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v718, v740, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
        v48 = v99;
        v9 = v647;
        if (CMTimeCompare(v142, v143))
        {
          goto LABEL_72;
        }
      }
    }
  }

  v845 = *v96;
  v846 = *(v96 + 8);
  v133 = *v50;
  v721 = *v52;
LABEL_72:
  if (!*(*(CMBaseObjectGetVTable() + 16) + 48))
  {
    v235 = 4294954514;
    goto LABEL_174;
  }

  __dst[0].value = v845;
  *&__dst[0].timescale = __PAIR64__(v133, v846);
  __dst[0].epoch = v721;
  v240 = OUTLINED_FUNCTION_78_9();
  v242 = v241(v240);
  if (v242)
  {
    v235 = v242;
    goto LABEL_174;
  }

  FigSimpleMutexLock();
  v832 = v828;
  v843 = v830;
  v250 = CMBaseObjectGetDerivedStorage();
  Count = *(v250 + 336);
  HIDWORD(v579) = v133;
  if (Count)
  {
    Count = CFArrayGetCount(Count);
    if (Count >= 1)
    {
      v253 = Count;
      v254 = *MEMORY[0x1E6960C70];
      v256 = *(MEMORY[0x1E6960C70] + 8);
      v255 = *(MEMORY[0x1E6960C70] + 12);
      while (1)
      {
        v257 = v48;
        ValueAtIndex = CFArrayGetValueAtIndex(*(v250 + 336), 0);
        v251 = OUTLINED_FUNCTION_17_45(ValueAtIndex, v259, v260, v261, v262, v263, v264, v265, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v721, v266, v740);
        if (Count)
        {
          v251 = OUTLINED_FUNCTION_51_21(Count);
        }

        v849 = v254;
        timescale = v256;
        v267 = v255;
        v268 = v782;
        if (v253 != 1)
        {
          Count = CFArrayGetValueAtIndex(*(v250 + 336), 1);
          v851.value = v254;
          v851.timescale = v256;
          v268 = v782;
          v267 = v255;
          if (Count)
          {
            v851.value = *(Count + 16);
            v267 = *(Count + 28);
            v851.timescale = *(Count + 24);
            v268 = *(Count + 32);
          }

          v849 = v851.value;
          timescale = v851.timescale;
        }

        if ((v267 & 1) == 0)
        {
          break;
        }

        OUTLINED_FUNCTION_47_19();
        *(&v834 + 1) = *&v832.timescale;
        Count = OUTLINED_FUNCTION_48_18(v832.epoch, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v721, v740, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v832.value);
        if ((Count & 0x80000000) == 0)
        {
          break;
        }

        v851.value = v849;
        v851.timescale = timescale;
        v851.flags = v267;
        v851.epoch = v268;
        *(&v834 + 1) = *&v832.timescale;
        Count = OUTLINED_FUNCTION_48_18(v832.epoch, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v721, v740, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v832.value);
        if (Count > 0)
        {
          break;
        }

        CFArrayRemoveValueAtIndex(*(v250 + 336), 0);
        v269 = v253-- <= 1;
        v48 = v257;
        v9 = v647;
        if (v269)
        {
          goto LABEL_96;
        }
      }

      v48 = v257;
      v9 = v647;
      if (v253 >= 1)
      {
        v270 = v253 + 1;
        do
        {
          v271 = CFArrayGetValueAtIndex(*(v250 + 336), v270 - 2);
          OUTLINED_FUNCTION_17_45(v271, v272, v273, v274, v275, v276, v277, v278, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v721, v279, v740);
          if (v280)
          {
            OUTLINED_FUNCTION_51_21(v280);
          }

          OUTLINED_FUNCTION_47_19();
          *(&v834 + 1) = *&v843.timescale;
          Count = OUTLINED_FUNCTION_48_18(v843.epoch, v474, v497, v520, v543, v566, v589, v612, v635, v657, v681, v703, v727, v750, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v843.value);
          if (Count <= 0)
          {
            break;
          }

          CFArrayRemoveValueAtIndex(*(v250 + 336), v270 - 2);
          --v270;
        }

        while (v270 > 1);
      }
    }
  }

LABEL_96:
  OUTLINED_FUNCTION_46_17(Count, v243, v244, v245, v246, v247, v248, v249, v464, v487, v510, v533, v556, v579, v602, v625, v647, v671, v694, v721, v251, v740);
  v281 = *(CMBaseObjectGetDerivedStorage() + 336);
  v289 = HIDWORD(v704);
  if (v281)
  {
    v281 = CFArrayGetCount(v281);
    if (v281 >= 1)
    {
      v290 = FigCFArrayGetValueAtIndex();
      OUTLINED_FUNCTION_17_45(v290, v291, v292, v293, v294, v295, v296, v297, v475, v498, v521, v544, v567, v590, v613, v636, v658, v682, v704, v728, v298, v751);
      if (v299)
      {
        OUTLINED_FUNCTION_51_21(v299);
      }

      OUTLINED_FUNCTION_47_19();
    }
  }

  v659 = v9 + 328;
  v822 = v851;
  if (v851.flags)
  {
    v300 = *(v9 + 216);
    OUTLINED_FUNCTION_92_8(v281, v282, v283, v284, v285, v286, v287, v288, v475, v498, v521, v544, v567, v590, v613, v636, v659, v682, v704, v728, v751, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, *&v851.value, v822.value);
    VTable = CMBaseObjectGetVTable();
    v302 = *(VTable + 16);
    v281 = VTable + 16;
    if (*(v302 + 64))
    {
      v303 = OUTLINED_FUNCTION_29_30();
      v281 = v304(v300, 0, v303);
    }
  }

  else
  {
    v822 = v824;
  }

  if (v822.flags)
  {
    LODWORD(v590) = *(MEMORY[0x1E6960C70] + 12);
    while (1)
    {
      __dst[0] = v822;
      v851 = v826;
      v344 = OUTLINED_FUNCTION_38_22(v281, v282, v283, v284, v285, v286, v287, v288, v475, v498, v521, v544, v567, v590, v613, v636, v659, v682, v704, v728, v751, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
      if (!fvcp_timeIsEarlierOrEqualInPlayback(v344, v345, v289) || HIBYTE(v802))
      {
        goto LABEL_106;
      }

      v354 = v831;
      if (v831)
      {
        CFRelease(v831);
        v831 = 0;
      }

      v355 = *(v9 + 216);
      OUTLINED_FUNCTION_92_8(v354, v346, v347, v348, v349, v350, v351, v352, v475, v498, v521, v544, v567, v590, v613, v636, v659, v682, v704, v728, v751, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v353, v822.value);
      if (!*(*(CMBaseObjectGetVTable() + 16) + 48))
      {
        goto LABEL_171;
      }

      v356 = OUTLINED_FUNCTION_29_30();
      v308 = v357(v355, v48, v356);
      if (v308)
      {
        goto LABEL_179;
      }

      v358 = v831;
      v841 = v848.value;
      flags = v848.flags;
      v842 = v848.timescale;
      epoch = v848.epoch;
      v361 = CMBaseObjectGetDerivedStorage();
      if ((flags & 0x1D) == 1 && (MEMORY[0x19A8D3660](&FigVCPTimedImagePairGetTypeID_once, figVCPTimedImagePair_register), (Instance = _CFRuntimeCreateInstance()) != 0))
      {
        v363 = Instance;
        *(Instance + 40) = 0;
        *(Instance + 16) = v841;
        *(Instance + 24) = v842;
        *(Instance + 28) = flags;
        *(Instance + 32) = epoch;
        if (v358)
        {
          v364 = CFRetain(v358);
        }

        else
        {
          v364 = 0;
        }

        v363[6] = v364;
      }

      else
      {
        OUTLINED_FUNCTION_0_91();
        if (FigSignalErrorAtGM())
        {
          goto LABEL_163;
        }

        v363 = 0;
      }

      v365 = *(v361 + 336);
      if (!v365)
      {
        goto LABEL_160;
      }

      v366 = CFArrayGetCount(v365);
      v365 = *(v361 + 336);
      if (!v365)
      {
        goto LABEL_160;
      }

      if (!CFArrayGetCount(v365))
      {
        break;
      }

      if (HIDWORD(v704) == -1)
      {
        goto LABEL_167;
      }

      if (HIDWORD(v704) == 1)
      {
        break;
      }

      v521 = v366;
      v849 = *MEMORY[0x1E6960C70];
      v367 = v849;
      timescale = *(MEMORY[0x1E6960C70] + 8);
      v368 = timescale;
      v369 = FigCFArrayGetValueAtIndex();
      v544 = v367;
      __dst[0].value = v367;
      HIDWORD(v567) = v368;
      __dst[0].timescale = v368;
      v370 = v590;
      if (v369)
      {
        __dst[0].value = *(v369 + 16);
        v370 = *(v369 + 28);
        __dst[0].timescale = *(v369 + 24);
      }

      v843.value = __dst[0].value;
      v843.timescale = __dst[0].timescale;
      v371 = (flags & 0x1F) == 3 || (v370 & 0x1F) == 3;
      if (!v371 || (OUTLINED_FUNCTION_60_16(), v381 = OUTLINED_FUNCTION_15_54(v372, v373, v374, v375, v376, v377, v378, v379, v475, v498, v521, v367, v567, v590, v613, v636, v659, v682, v704, v728, v751, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v843.value, __SPAIR64__(v370, v843.timescale), v380, v833, v834), v503 = v382, v385 = CMTimeSubtract(v384, v381, v383), OUTLINED_FUNCTION_85_7(v385, v386, v387, v388, v389, v390, v391, v392, v480, v503, v526, v549, v572, v595, v618, v640, v664, v687, v709, v733, v756, v775, v795, v814, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839), v393 = OUTLINED_FUNCTION_13_53(&v851), OUTLINED_FUNCTION_14_63(v393, v394, v395, v396, v397, v398, v399, v400, v481, v504, v527, v550, v573, v596, v619, v641, v665, v688, v710, v734, v757, v776, v796, v815, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) >= 1))
      {
        OUTLINED_FUNCTION_74_12();
        OUTLINED_FUNCTION_70_11();
        v851.timescale = v401;
        v851.flags = v370;
        v851.epoch = v402;
        v411 = OUTLINED_FUNCTION_38_22(v403, v404, v405, v406, v407, v408, v409, v410, v475, v498, v521, v544, v567, v590, v613, v636, v659, v682, v704, v728, v751, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
        if (CMTimeCompare(v411, v412) < 0)
        {
LABEL_167:
          CFArrayInsertValueAtIndex(*(v361 + 336), 0, v363);
          if (!v363)
          {
            goto LABEL_163;
          }

LABEL_162:
          CFRelease(v363);
          goto LABEL_163;
        }
      }

      v413 = FigCFArrayGetValueAtIndex();
      __dst[0].value = v544;
      v414 = v590;
      __dst[0].timescale = HIDWORD(v567);
      if (v413)
      {
        __dst[0].value = *(v413 + 16);
        v414 = *(v413 + 28);
        __dst[0].timescale = *(v413 + 24);
      }

      v849 = __dst[0].value;
      timescale = __dst[0].timescale;
      v415 = (flags & 0x1F) == 3 || (v414 & 0x1F) == 3;
      if (!v415 || (OUTLINED_FUNCTION_60_16(), v425 = OUTLINED_FUNCTION_15_54(v416, v417, v418, v419, v420, v421, v422, v423, v475, v498, v521, v544, v567, v590, v613, v636, v659, v682, v704, v728, v751, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v849, __SPAIR64__(v414, timescale), v424, v833, v834), v428 = CMTimeSubtract(v427, v425, v426), OUTLINED_FUNCTION_85_7(v428, v429, v430, v431, v432, v433, v434, v435, v482, v505, v528, v551, v574, v597, v620, v642, v666, v689, v711, v735, v758, v777, v797, v816, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839), v436 = OUTLINED_FUNCTION_13_53(&v851), OUTLINED_FUNCTION_14_63(v436, v437, v438, v439, v440, v441, v442, v443, v483, v506, v529, v552, v575, v598, v621, v643, v667, v690, v712, v736, v759, v778, v798, v817, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) >= 1))
      {
        OUTLINED_FUNCTION_74_12();
        v851.value = v849;
        v851.timescale = timescale;
        v851.flags = v414;
        v851.epoch = v444;
        v453 = OUTLINED_FUNCTION_38_22(v445, v446, v447, v448, v449, v450, v451, v452, v475, v498, v521, v544, v567, v590, v613, v636, v659, v682, v704, v728, v751, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834, *(&v834 + 1), v835, v836, v837, v838, v839);
        if (CMTimeCompare(v453, v454) >= 1)
        {
          break;
        }
      }

LABEL_161:
      if (v363)
      {
        goto LABEL_162;
      }

LABEL_163:
      v455 = *(v9 + 216);
      v851 = v848;
      v456 = CMBaseObjectGetVTable();
      v457 = *(v456 + 16);
      v281 = v456 + 16;
      if (*(v457 + 64))
      {
        v458 = OUTLINED_FUNCTION_29_30();
        v281 = v459(v455, 0, v458);
      }

      v289 = HIDWORD(v704);
      if ((v822.flags & 1) == 0)
      {
        goto LABEL_106;
      }
    }

    v365 = *(v361 + 336);
LABEL_160:
    CFArrayAppendValue(v365, v363);
    goto LABEL_161;
  }

LABEL_106:
  v305 = *(v9 + 88);
  if (v305)
  {
    CFRelease(v305);
    *(v9 + 88) = 0;
  }

  if (*(*(CMBaseObjectGetVTable() + 16) + 48))
  {
    __dst[0].value = v845;
    *&__dst[0].timescale = __PAIR64__(HIDWORD(v590), v846);
    __dst[0].epoch = v728;
    v306 = OUTLINED_FUNCTION_78_9();
    v308 = v307(v306);
    if (v308)
    {
LABEL_179:
      v235 = v308;
    }

    else
    {
      v309 = CMBaseObjectGetDerivedStorage();
      *&__dst[1].value = OUTLINED_FUNCTION_17_45(v309, v310, v311, v312, v313, v314, v315, v316, v475, v498, v521, v544, v567, v590, v613, v636, v659, v682, v704, v728, v317, v751);
      __dst[1].epoch = v318;
      *&__dst[2].value = *&__dst[1].value;
      __dst[2].epoch = v318;
      v320 = *(v319 + 336);
      if (v320 && CFArrayGetCount(v320) >= 1)
      {
        v321 = CFArrayGetValueAtIndex(*(v309 + 336), 0);
        OUTLINED_FUNCTION_46_17(v321, v322, v323, v324, v325, v326, v327, v328, v476, v499, v522, v545, v568, v591, v614, v637, v660, v683, v705, v729, v329, v752);
        if (v330)
        {
          OUTLINED_FUNCTION_97_10(v330);
        }

        __dst[0] = v851;
        v331 = *(v309 + 336);
        v332 = CFArrayGetCount(v331);
        v333 = CFArrayGetValueAtIndex(v331, v332 - 1);
        OUTLINED_FUNCTION_46_17(v333, v334, v335, v336, v337, v338, v339, v340, v477, v500, v523, v546, v569, v592, v615, v638, v661, v684, v706, v730, v341, v753);
        if (v342)
        {
          OUTLINED_FUNCTION_97_10(v342);
        }

        __dst[1] = v851;
        __dst[2] = *(v309 + 304);
      }

      v851 = __dst[0];
      v834 = *(v9 + 344);
      if (OUTLINED_FUNCTION_48_18(*(v9 + 360), v476, v499, v522, v545, v568, v591, v614, v637, v660, v683, v705, v729, v752, v763, v782, v802, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) || (v851 = __dst[1], v834 = *(v9 + 368), OUTLINED_FUNCTION_48_18(*(v9 + 384), v478, v501, v524, v547, v570, v593, v616, v639, v662, v685, v707, v731, v754, v773, v793, v812, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834)))
      {
        v343 = 1;
      }

      else
      {
        v851 = __dst[2];
        v834 = *(v9 + 392);
        v343 = OUTLINED_FUNCTION_48_18(*(v9 + 408), v479, v502, v525, v548, v571, v594, v617, v639, v663, v686, v708, v732, v755, v774, v794, v813, v818.value, *&v818.timescale, v818.epoch, v819, v820.value, *&v820.timescale, v820.epoch, v821, v822.value, *&v822.timescale, v822.epoch, v823, v824.value, *&v824.timescale, v824.epoch, v825, v826.value, *&v826.timescale, v826.epoch, v827, v828.value, *&v828.timescale, v828.epoch, v829, v830.value, *&v830.timescale, v830.epoch, v831, v832.value, *&v832.timescale, v832.epoch, v833, v834) != 0;
      }

      *(v9 + 416) = v343;
      memcpy((v9 + 344), __dst, 0x48uLL);
      FigSimpleMutexUnlock();
      FigSimpleMutexLock();
      if ((v289 & 0x80000000) != 0 || (*v639 = v820, !v289))
      {
        v235 = 0;
        *(v9 + 264) = v820;
      }

      else
      {
        v235 = 0;
      }
    }
  }

  else
  {
LABEL_171:
    v235 = 4294954514;
  }

  FigSimpleMutexUnlock();
LABEL_174:
  v239 = v831;
  if (v831)
  {
LABEL_175:
    CFRelease(v239);
  }

  return v235;
}

uint64_t fvcp_vc_source_CopyConformedImage(uint64_t a1, BOOL *a2, void *a3)
{
  cf = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v7 = *(DerivedStorage + 88);
  v8 = *(DerivedStorage + 96);
  v9 = v8 == 0;
  if (!v7)
  {
    v12 = 0;
    *a3 = 0;
    goto LABEL_10;
  }

  v10 = DerivedStorage;
  if (!v8)
  {
    v14 = fvcp_source_convertAndCopyConformedImage(a1, v7, &cf);
    if (v14)
    {
      v12 = v14;
      goto LABEL_10;
    }

    v15 = *(v10 + 96);
    v16 = cf;
    *(v10 + 96) = cf;
    if (v16)
    {
      CFRetain(v16);
    }

    if (v15)
    {
      CFRelease(v15);
    }
  }

  if (a3)
  {
    v11 = *(v10 + 96);
    if (v11)
    {
      v11 = CFRetain(v11);
    }

    *a3 = v11;
  }

  v12 = 0;
  if (a2)
  {
    *a2 = v9;
  }

LABEL_10:
  if (cf)
  {
    CFRelease(cf);
  }

  return v12;
}

uint64_t fvcp_vc_source_CopyConformedTimedImages(uint64_t a1, int a2, char *a3, CFArrayRef *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v31 = 0;
  cf = 0;
  v30 = 0;
  value = 0;
  if (FigVCPSourceRequiresWindowedSampling(a1, a2))
  {
    FigSimpleMutexLock();
    v9 = *(DerivedStorage + 336);
    if (v9)
    {
      Count = CFArrayGetCount(v9);
    }

    else
    {
      Count = 0;
    }

    Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
    if (!Mutable)
    {
      OUTLINED_FUNCTION_374();
      v21 = FigSignalErrorAtGM();
      FigSimpleMutexUnlock();
      goto LABEL_32;
    }

    v12 = Mutable;
    v31 = *(DerivedStorage + 416);
    if (Count >= 1)
    {
      for (i = 0; Count != i; ++i)
      {
        ValueAtIndex = FigCFArrayGetValueAtIndex();
        if (ValueAtIndex)
        {
          v15 = ValueAtIndex;
          v26 = *(ValueAtIndex + 16);
          v27 = *(ValueAtIndex + 32);
          if (!*(ValueAtIndex + 40))
          {
            v31 = 1;
            v18 = *(ValueAtIndex + 48);
            if (v18)
            {
              v19 = fvcp_source_convertAndCopyConformedImage(a1, v18, &cf);
              if (v19)
              {
                goto LABEL_43;
              }

              FigVCPTimedImagePairSetConformed(v15, cf);
              if (cf)
              {
                CFRelease(cf);
                cf = 0;
              }
            }

            else
            {
              FigVCPTimedImagePairSetConformed(ValueAtIndex, 0);
            }
          }

          v16 = *(v15 + 56);
          if (v16)
          {
            v17 = CFRetain(v16);
            goto LABEL_19;
          }
        }

        else
        {
          OUTLINED_FUNCTION_106(MEMORY[0x1E6960C70]);
          v31 = 1;
          FigVCPTimedImagePairSetConformed(v20, 0);
        }

        v17 = 0;
LABEL_19:
        cf = v17;
        v24 = v26;
        v25 = v27;
        v19 = FigVCPTimedSampleCreateWithPixelBuffer(&v24, v17, &value);
        if (v19)
        {
LABEL_43:
          v21 = v19;
          FigSimpleMutexUnlock();
          CFRelease(v12);
          goto LABEL_32;
        }

        if (cf)
        {
          CFRelease(cf);
          cf = 0;
        }

        CFArrayAppendValue(v12, value);
        if (value)
        {
          CFRelease(value);
          value = 0;
        }
      }
    }

    FigSimpleMutexUnlock();
    if (!a3)
    {
      goto LABEL_27;
    }

    goto LABEL_26;
  }

  v23 = fvcp_vc_source_CopyConformedImage(a1, &v31, &v30);
  if (v23 || (v26 = *(DerivedStorage + 304), v27 = *(DerivedStorage + 320), v23 = FigVCPTimedSampleCreateWithPixelBuffer(&v26, v30, &value), v23))
  {
    v21 = v23;
    goto LABEL_32;
  }

  v12 = CFArrayCreate(0, &value, 1, MEMORY[0x1E695E9C0]);
  if (a3)
  {
LABEL_26:
    *a3 = v31;
  }

LABEL_27:
  if (a4)
  {
    v21 = 0;
    *a4 = v12;
  }

  else
  {
    if (v12)
    {
      CFRelease(v12);
    }

    v21 = 0;
  }

LABEL_32:
  if (v30)
  {
    CFRelease(v30);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (value)
  {
    CFRelease(value);
  }

  return v21;
}

uint64_t fvcp_source_convertAndCopyConformedImage(uint64_t a1, __CVBuffer *a2, CVPixelBufferRef *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  cf = 0;
  pixelBufferOut = 0;
  pixelTransferSessionOut = 0;
  v48 = 0;
  if (!a3)
  {
    OUTLINED_FUNCTION_376();
    v34 = FigSignalErrorAtGM();
    goto LABEL_95;
  }

  v7 = DerivedStorage;
  fvcp_source_copyPreprocessParametersAndPixelTransferSession(a1, &cf, &pixelTransferSessionOut, &v48);
  v8 = cf;
  if (!cf)
  {
    goto LABEL_82;
  }

  v9 = MEMORY[0x1E695E480];
  if (*(cf + 4) == 1.0 && (!*(cf + 3) || CVPixelBufferIsCompatibleWithAttributes()))
  {
    v23 = *(v8 + 16);
    if (!v23)
    {
      goto LABEL_82;
    }

    formatDescriptionOut = 0;
    if (CMVideoFormatDescriptionCreateForImageBuffer(*v9, a2, &formatDescriptionOut))
    {
      goto LABEL_82;
    }

    v24 = FigVideoFormatDescriptionContainsWideColor();
    VideoDynamicRange = CMVideoFormatDescriptionGetVideoDynamicRange();
    if (formatDescriptionOut)
    {
      CFRelease(formatDescriptionOut);
    }

    v26 = v23 != 2 || VideoDynamicRange >= 2;
    if (!v26 || v23 == 1 && !v24 || ((PixelFormatType = CVPixelBufferGetPixelFormatType(a2), v28 = CMBaseObjectGetDerivedStorage(), v29 = v28, PixelFormatType != *(v28 + 108)) ? (DescriptionWithPixelFormatType = CVPixelFormatDescriptionGetDescriptionWithPixelFormatType(), v30 = CFDictionaryGetValue(DescriptionWithPixelFormatType, *MEMORY[0x1E69662B8]) == *MEMORY[0x1E695E4D0], *(v29 + 108) = PixelFormatType, *(v29 + 112) = v30) : (v30 = *(v28 + 112)), !v30 ? (v42 = 0) : (v42 = *(v8 + 4)), fvcp_doesPixelBufferHaveRequestedColorParameters(a2, v42, *(v8 + 6), *(v8 + 5))))
    {
LABEL_82:
      if (a2)
      {
        v43 = CFRetain(a2);
      }

      else
      {
        v43 = 0;
      }

      pixelBufferOut = v43;
      goto LABEL_86;
    }
  }

  pixelFormat = CVPixelBufferGetPixelFormatType(a2);
  Width = CVPixelBufferGetWidth(a2);
  Height = CVPixelBufferGetHeight(a2);
  v12 = *(cf + 4);
  v13 = 2 * (((Width * v12) + 1.0) / 2);
  v46 = 2 * (((Height * v12) + 1.0) / 2);
  v14 = *(v7 + 56);
  if (v14)
  {
    if (*(v7 + 80) == pixelFormat && *(v7 + 64) == v13 && *(v7 + 72) == v46 && *(v7 + 116) == v48)
    {
      v15 = *v9;
      goto LABEL_60;
    }

    CFRelease(*(v7 + 56));
    *(v7 + 56) = 0;
  }

  v56 = 0;
  formatDescriptionOut = 0;
  v55 = 0;
  v54 = 0;
  CMBaseObjectGetDerivedStorage();
  v53 = 0;
  v52 = 0;
  fvcp_source_copyPreprocessParametersAndPixelTransferSession(a1, &formatDescriptionOut, 0, 0);
  v15 = *v9;
  MutableCopy = FigCFDictionaryCreateMutableCopy();
  v45 = a3;
  if (!MutableCopy)
  {
    OUTLINED_FUNCTION_376();
    PixelBufferAttributesWithIOSurfaceSupport = FigSignalErrorAtGM();
LABEL_97:
    v32 = PixelBufferAttributesWithIOSurfaceSupport;
    v19 = 0;
    Mutable = 0;
    goto LABEL_46;
  }

  FigGetAlignmentForIOSurfaceOutput();
  if (HIDWORD(v53))
  {
    FigCFDictionarySetInt();
  }

  if (v53)
  {
    FigCFDictionarySetInt();
  }

  PixelBufferAttributesWithIOSurfaceSupport = FigCreatePixelBufferAttributesWithIOSurfaceSupport();
  if (PixelBufferAttributesWithIOSurfaceSupport)
  {
    goto LABEL_97;
  }

  Mutable = CFDictionaryCreateMutable(v15, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!Mutable)
  {
    OUTLINED_FUNCTION_376();
    v32 = FigSignalErrorAtGM();
    v19 = 0;
    goto LABEL_46;
  }

  v19 = CFArrayCreateMutable(v15, 0, MEMORY[0x1E695E9C0]);
  if (!v19)
  {
    OUTLINED_FUNCTION_376();
    v32 = FigSignalErrorAtGM();
    goto LABEL_46;
  }

  if (FigCFEqual() || FigCFEqual())
  {
    if (pixelFormat == 1380410945)
    {
      goto LABEL_25;
    }

    v20 = CVPixelFormatDescriptionCreateWithPixelFormatType(v15, pixelFormat);
    if (v20)
    {
      v21 = v20;
      if (!CFDictionaryGetValue(v20, *MEMORY[0x1E6966218]))
      {
        CFRelease(v21);
        goto LABEL_42;
      }

      UInt64 = FigCFNumberGetUInt64();
      CFRelease(v21);
      if (UInt64 >= 9)
      {
LABEL_25:
        FigCFArrayAppendInt32();
      }
    }

LABEL_42:
    FigCFArrayAppendInt32();
    FigCFArrayAppendInt32();
  }

  FigCFArrayAppendInt32();
  CFDictionarySetValue(Mutable, *MEMORY[0x1E6966130], v19);
  v31 = VTCreatePixelBufferPoolAttributesWithName();
  if (v31)
  {
    v32 = v31;
  }

  else
  {
    v32 = VTBuildPixelBufferPools2();
    if (v32)
    {
      if (v54)
      {
        CFRelease(v54);
      }
    }

    else
    {
      *(v7 + 56) = v54;
      v54 = 0;
    }
  }

LABEL_46:
  if (v55)
  {
    CFRelease(v55);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (MutableCopy)
  {
    CFRelease(MutableCopy);
  }

  if (v56)
  {
    CFRelease(v56);
  }

  if (formatDescriptionOut)
  {
    CFRelease(formatDescriptionOut);
  }

  if (v19)
  {
    CFRelease(v19);
  }

  if (!v32)
  {
    *(v7 + 64) = v13;
    *(v7 + 72) = v46;
    v33 = v48;
    *(v7 + 80) = pixelFormat;
    *(v7 + 116) = v33;
    v14 = *(v7 + 56);
    a3 = v45;
LABEL_60:
    v34 = CVPixelBufferPoolCreatePixelBuffer(v15, v14, &pixelBufferOut);
    if (!v34)
    {
      CVBufferPropagateAttachments(a2, pixelBufferOut);
      v35 = pixelTransferSessionOut;
      if (pixelTransferSessionOut)
      {
        goto LABEL_75;
      }

      v34 = VTPixelTransferSessionCreate(v15, &pixelTransferSessionOut);
      if (!v34)
      {
        v36 = cf;
        if (*(cf + 5))
        {
          VTPixelTransferSessionSetProperty();
          v36 = cf;
        }

        if (v36[4])
        {
          VTPixelTransferSessionSetProperty();
          v36 = cf;
        }

        if (v36[6])
        {
          VTPixelTransferSessionSetProperty();
        }

        v37 = pixelTransferSessionOut;
        v38 = v48;
        v39 = CMBaseObjectGetDerivedStorage();
        FigSimpleMutexLock();
        if (*(v39 + 48) == v38)
        {
          v40 = *(v39 + 40);
          *(v39 + 40) = v37;
          if (v37)
          {
            CFRetain(v37);
          }

          if (v40)
          {
            CFRelease(v40);
          }
        }

        FigSimpleMutexUnlock();
        v35 = pixelTransferSessionOut;
LABEL_75:
        v34 = VTPixelTransferSessionTransferImage(v35, a2, pixelBufferOut);
        if (!v34)
        {
LABEL_86:
          CVPixelBufferPoolFlush(*(v7 + 56), 0);
          v32 = 0;
          *a3 = pixelBufferOut;
          pixelBufferOut = 0;
          goto LABEL_87;
        }
      }
    }

LABEL_95:
    v32 = v34;
  }

LABEL_87:
  if (pixelTransferSessionOut)
  {
    CFRelease(pixelTransferSessionOut);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (pixelBufferOut)
  {
    CFRelease(pixelBufferOut);
  }

  return v32;
}

void FigVCPTimedImagePairSetConformed(uint64_t a1, CFTypeRef cf)
{
  if (a1)
  {
    v3 = *(a1 + 56);
    *(a1 + 56) = cf;
    if (cf)
    {
      CFRetain(cf);
    }

    if (v3)
    {
      CFRelease(v3);
    }

    *(a1 + 40) = 1;
    v4 = *(a1 + 48);
    if (v4)
    {
      CFRelease(v4);
      *(a1 + 48) = 0;
    }
  }
}

void fvcp_vcg_source_Finalize()
{
  CMBaseObjectGetDerivedStorage();
  v1 = OUTLINED_FUNCTION_199();
  FigVCPSourceInvalidate(v1);
  v2 = *(v0 + 216);
  if (v2)
  {
    CFRelease(v2);
  }

  v3 = *(v0 + 224);
  if (v3)
  {
    CFRelease(v3);
  }

  fvcp_source_finalize();
}

void fvcp_ca_source_Finalize()
{
  CMBaseObjectGetDerivedStorage();
  v1 = OUTLINED_FUNCTION_199();
  FigVCPSourceInvalidate(v1);
  v2 = v0[32];
  if (v2)
  {
    CFRelease(v2);
  }

  v3 = v0[33];
  if (v3)
  {
    CFRelease(v3);
  }

  v4 = v0[34];
  if (v4)
  {
    CFRelease(v4);
  }

  fvcp_source_finalize();
}

uint64_t fvcp_ca_source_SetCurrentTime(const void *a1, uint64_t a2, __int128 *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v35 = 0;
  if ((*(a3 + 3) & 0x1D) != 1)
  {
    OUTLINED_FUNCTION_239();
    v21 = FigSignalErrorAtGM();
    goto LABEL_40;
  }

  *&v34.value = *a3;
  v34.epoch = *(a3 + 2);
  v6 = CMBaseObjectGetDerivedStorage();
  if (!FigAtomicCompareAndSwapPtr())
  {
    goto LABEL_33;
  }

  v36.value = 0;
  cf = 0;
  v7 = CMBaseObjectGetDerivedStorage();
  fvcp_source_copyPreprocessParametersAndPixelTransferSession(a1, &v36, 0, 0);
  v33 = v7;
  value = v36.value;
  v9 = *MEMORY[0x1E695E480];
  MutableCopy = FigCFDictionaryCreateMutableCopy();
  Mutable = CFDictionaryCreateMutable(v9, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  v12 = Mutable;
  v13 = *(value + 32);
  if (v13)
  {
    CFDictionarySetValue(Mutable, *MEMORY[0x1E6965F98], v13);
  }

  if (*(value + 48))
  {
    CFDictionarySetValue(v12, *MEMORY[0x1E6965F30], *(value + 48));
  }

  if (FigCFEqual() || FigCFEqual())
  {
    v14 = 0;
    v15 = 1;
  }

  else
  {
    v15 = 0;
    v14 = 1;
  }

  v16 = *(value + 40);
  v17 = MEMORY[0x1E6965D88];
  if (v16)
  {
    CFDictionarySetValue(v12, *MEMORY[0x1E6965D88], v16);
  }

  if ((v14 & 1) == 0)
  {
    CFDictionarySetValue(v12, *MEMORY[0x1E6965F98], *MEMORY[0x1E6965FD0]);
    CFDictionarySetValue(v12, *MEMORY[0x1E6965F30], *MEMORY[0x1E6965F50]);
    CFDictionarySetValue(v12, *v17, *MEMORY[0x1E6965DB8]);
    v18 = CGColorSpaceCreateWithName(*MEMORY[0x1E695F180]);
    CFDictionarySetValue(v12, *MEMORY[0x1E6965CE8], v18);
    if (v18)
    {
      CFRelease(v18);
    }
  }

  if (((CFDictionaryGetCount(v12) != 3) & ~v15) == 0)
  {
    CFDictionarySetValue(MutableCopy, @"DestinationColorAttachments", v12);
  }

  if (v12)
  {
    CFRelease(v12);
  }

  CMBaseObjectGetDerivedStorage();
  v19 = FigCFDictionaryCreateMutableCopy();
  if (v19)
  {
    FigCFDictionarySetInt();
    FigCFDictionarySetInt();
    FigCFDictionarySetInt();
  }

  v20 = CFGetAllocator(a1);
  v21 = FigCoreAnimationRendererCreate(v20, v19, *(v33 + 256), 0, MutableCopy, &cf);
  v22 = cf;
  if (v21)
  {
    if (cf)
    {
      CFRelease(cf);
      v22 = 0;
    }
  }

  else
  {
    cf = 0;
  }

  if (v19)
  {
    CFRelease(v19);
  }

  if (MutableCopy)
  {
    CFRelease(MutableCopy);
  }

  if (v36.value)
  {
    CFRelease(v36.value);
  }

  if (v21)
  {
LABEL_52:
    if (v22)
    {
      CFRelease(v22);
    }

    goto LABEL_38;
  }

  if (!FigAtomicCompareAndSwapPtr())
  {
    v21 = FigSignalErrorAtGM();
    goto LABEL_52;
  }

LABEL_33:
  UpTimeNanoseconds = FigGetUpTimeNanoseconds();
  v24 = *(v6 + 272);
  v36 = v34;
  v21 = FigCoreAnimationRendererCopyPixelBufferAtTime(v24, &v36, 0, &v35, 0);
  v25 = FigGetUpTimeNanoseconds();
  v26 = (v25 - UpTimeNanoseconds) / 1000;
  ++*(v6 + 304);
  *(v6 + 296) += v26;
  v27 = *(v6 + 288);
  if (v27 >= v26)
  {
    v27 = (v25 - UpTimeNanoseconds) / 1000;
  }

  if (*(v6 + 280) > v26)
  {
    v26 = *(v6 + 280);
  }

  *(v6 + 280) = v26;
  *(v6 + 288) = v27;
LABEL_38:
  if (!v21)
  {
    v28 = *a3;
    *(DerivedStorage + 232) = *(a3 + 2);
    *(DerivedStorage + 216) = v28;
  }

LABEL_40:
  v29 = *(DerivedStorage + 88);
  v30 = v35;
  *(DerivedStorage + 88) = v35;
  if (v30)
  {
    CFRetain(v30);
  }

  if (v29)
  {
    CFRelease(v29);
  }

  v31 = *(DerivedStorage + 96);
  if (v31)
  {
    CFRelease(v31);
    *(DerivedStorage + 96) = 0;
  }

  if (v35)
  {
    CFRelease(v35);
  }

  return v21;
}

uint64_t fvcp_ca_source_CopyConformedImage()
{
  OUTLINED_FUNCTION_48_4();
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v4 = CMBaseObjectGetDerivedStorage();
  v5 = fvcp_source_convertAndCopyConformedImage(v1, *(v4 + 88), (DerivedStorage + 96));
  if (!v5)
  {
    if (v2)
    {
      *v2 = 1;
    }

    if (v0)
    {
      v6 = *(DerivedStorage + 96);
      if (v6)
      {
        v6 = CFRetain(v6);
      }

      *v0 = v6;
    }
  }

  return v5;
}

void fvcp_bq_source_Finalize()
{
  CMBaseObjectGetDerivedStorage();
  v1 = OUTLINED_FUNCTION_199();
  FigVCPSourceInvalidate(v1);
  v2 = v0[27];
  if (v2)
  {
    CFRelease(v2);
  }

  v3 = v0[45];
  if (v3)
  {
    CFRelease(v3);
  }

  FigSimpleMutexDestroy();
  v4 = v0[30];
  if (v4)
  {
    CFRelease(v4);
    v0[30] = 0;
  }

  v5 = v0[32];
  if (v5)
  {
    CFRelease(v5);
    v0[32] = 0;
  }

  FigSimpleMutexDestroy();

  fvcp_source_finalize();
}

uint64_t fvcp_bq_source_CheckSampleAvailability(CMTimeEpoch a1, unsigned int a2, CMTimeEpoch a3, uint64_t a4, _BYTE *a5, uint64_t a6)
{
  v2220 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  v12 = FigVCPSourceRequiresWindowedSampling(a1, a2);
  v13 = MEMORY[0x1E6960C70];
  v1672 = a5;
  v1792 = a1;
  HIDWORD(v1136) = a3;
  if (!v12)
  {
    v2203 = *a4;
    v144 = *(a4 + 12);
    v2204 = *(a4 + 8);
    v145 = *(a4 + 16);
    v146 = CMBaseObjectGetDerivedStorage();
    v147 = *(v146 + 216);
    *&v2196.value = *v13;
    v148 = *(v13 + 16);
    v2196.epoch = v148;
    v2205.value = *v13;
    v2205.timescale = *(v13 + 8);
    if (!OUTLINED_FUNCTION_35_24())
    {
      LOBYTE(v687) = 0;
      v688 = 0;
      goto LABEL_206;
    }

    FigSimpleMutexLock();
    v149 = *(v146 + 240);
    if (v149)
    {
      v150 = *(v146 + 248);
      if (v150)
      {
        if (v150 == -1)
        {
          if (a2 != -1)
          {
            goto LABEL_119;
          }
        }

        else if (a2 != 1 || v150 != 1)
        {
          goto LABEL_119;
        }
      }

      v524 = CFRetain(v149);
      if (v524)
      {
        v525 = v524;
LABEL_120:
        v1538 = a6;
        if (CMSampleBufferIsValid(v525) == 1)
        {
          if (a2 == -1)
          {
            CMSampleBufferGetOutputPresentationTimeStamp(&v2196, v525);
            CMSampleBufferGetOutputDuration(&v2202, v525);
            OUTLINED_FUNCTION_4_143(v553, v554, v555, v556, v557, v558, v559, v560, *&v1002, *&v1069, *&v1136, *&v1203, *&v1270, *&v1337, *&v1404, *&key, *&a6, *&v1605, *&v1672, *&DerivedStorage, *&v1792, *&v1859, *&v1926, *&v1993, *&v2060, *&queue, *&__dst[0].value, *&__dst[0].timescale, *&__dst[0].epoch, *&__dst[1].value, *&__dst[1].timescale, *&__dst[1].epoch, *&__dst[2].value, *&__dst[2].timescale, *&__dst[2].epoch, *&__dst[3].value, *&__dst[3].timescale, *&__dst[3].epoch, *&v2196.value);
            v564 = CMTimeSubtract(v563, v561, v562);
            OUTLINED_FUNCTION_11_70(v564, v565, v566, v567, v568, v569, v570, v571, v1038, v1105, v1172, v1239, v1306, v1373, v1440, keybn, v1574, v1641, v1708, v1769, v1828, v1895, v1962, v2029, v2096, queuebo, __dst[0].value, __dst[0].timescale);
          }

          else
          {
            OutputPresentationTimeStamp = CMSampleBufferGetOutputPresentationTimeStamp(__dst, v525);
            OUTLINED_FUNCTION_33_29(OutputPresentationTimeStamp, v527, v528, v529, v530, v531, v532, v533, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, a6, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, *&v2196.value, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
            OUTLINED_FUNCTION_4_143(v534, v535, v536, v537, v538, v539, v540, v541, v1036, v1103, v1170, v1237, v1304, v1371, v1438, keybl, v1572, v1639, v1706, v1767, v1826, v1893, v1960, v2027, v2094, queuebm, *&__dst[0].value, *&__dst[0].timescale, *&__dst[0].epoch, *&__dst[1].value, *&__dst[1].timescale, *&__dst[1].epoch, *&__dst[2].value, *&__dst[2].timescale, *&__dst[2].epoch, *&__dst[3].value, *&__dst[3].timescale, *&__dst[3].epoch, *&v2196.value);
            v545 = CMTimeAdd(v544, v542, v543);
            OUTLINED_FUNCTION_11_70(v545, v546, v547, v548, v549, v550, v551, v552, v1037, v1104, v1171, v1238, v1305, v1372, v1439, keybm, v1573, v1640, v1707, v1768, v1827, v1894, v1961, v2028, v2095, queuebn, __dst[0].value, __dst[0].timescale);
            __dst[0] = *(v146 + 268);
            *(v146 + 264) = fvcp_bq_source_isLastSample(v525, __dst);
          }
        }

        else
        {
          v13 = *(v13 + 12);
        }

        v572 = v144 & 0x1F;
        while (1)
        {
          if (CMSampleBufferGetNumSamples(v525) && CMSampleBufferIsValid(v525))
          {
            if (a2 > 1)
            {
              if (a2 != -1)
              {
                goto LABEL_154;
              }

              if (v572 == 3 || (v13 & 0x1F) == 3)
              {
                OUTLINED_FUNCTION_31_28();
                v2199 = v148;
                rhs.value = v2203;
                rhs.timescale = v2204;
                OUTLINED_FUNCTION_100_7();
                v611 = OUTLINED_FUNCTION_19_43(v603, v604, v605, v606, v607, v608, v609, v610, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2205.value, __SPAIR64__(v13, v2205.timescale), v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
                v619 = OUTLINED_FUNCTION_22_37(v611, v612, v613, v614, v615, v616, v617, v618, v1042, v1109, v1176, v1243, v1310, v1377, v1444, keybr, v1578, v1645, v1712, v1772, v1832, v1899, v1966, v2033, v2100, queuebs, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
                v621 = CMTimeAbsoluteValue(v620, v619);
                v629 = OUTLINED_FUNCTION_6_114(v621, v622, v623, v624, v625, v626, v627, v628, v1043, v1110, v1177, v1244, v1311, v1378, v1445, keybs, v1579, v1646, v1713, v1773, v1833, v1900, v1967, v2034, v2101, queuebt, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
                if (OUTLINED_FUNCTION_0_198(v629, v630, v631, v632, v633, v634, v635, v636, v1044, v1111, v1178, v1245, v1312, v1379, v1446, keybt, v1580, v1647, v1714, v1834, v1901, v1968, v2035, v2102, queuebu, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) < 1)
                {
                  goto LABEL_154;
                }
              }

              OUTLINED_FUNCTION_30_27();
              v2202.value = v2205.value;
              v2202.timescale = v2205.timescale;
              v2202.flags = v13;
              v2202.epoch = v148;
              v645 = OUTLINED_FUNCTION_23_44(v637, v638, v639, v640, v641, v642, v643, v644, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value);
              if ((CMTimeCompare(v645, v646) & 0x80000000) == 0)
              {
                goto LABEL_154;
              }
            }

            else
            {
              v573 = (v13 & 0x1F) == 3 || v572 == 3;
              if ((!v573 || (OUTLINED_FUNCTION_31_28(), v574 = OUTLINED_FUNCTION_8_84(v2204, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2203, v2198, SHIDWORD(v2198), v145, v2205.value, __SPAIR64__(v13, v2205.timescale), v148, v2201, v2202.value), v582 = OUTLINED_FUNCTION_22_37(v574, v575, v576, v577, v578, v579, v580, v581, v1039, v1106, v1173, v1240, v1307, v1374, v1441, keybo, v1575, v1642, v1709, v1770, v1829, v1896, v1963, v2030, v2097, queuebp, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v584 = CMTimeAbsoluteValue(v583, v582), v592 = OUTLINED_FUNCTION_6_114(v584, v585, v586, v587, v588, v589, v590, v591, v1040, v1107, v1174, v1241, v1308, v1375, v1442, keybp, v1576, v1643, v1710, v1771, v1830, v1897, v1964, v2031, v2098, queuebq, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), OUTLINED_FUNCTION_0_198(v592, v593, v594, v595, v596, v597, v598, v599, v1041, v1108, v1175, v1242, v1309, v1376, v1443, keybq, v1577, v1644, v1711, v1831, v1898, v1965, v2032, v2099, queuebr, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) >= 1)) && (__dst[0].value = v2205.value, __dst[0].timescale = v2205.timescale, __dst[0].flags = v13, __dst[0].epoch = v148, v2202.value = v2203, OUTLINED_FUNCTION_10_73(), CMTimeCompare(v600, v601) > 0) || *(v146 + 264))
              {
LABEL_154:
                v684 = *(v146 + 240);
                if (v525 != v684)
                {
                  *(v146 + 240) = v525;
                  CFRetain(v525);
                  v685 = 1;
                  if (!v684)
                  {
                    goto LABEL_159;
                  }

                  goto LABEL_156;
                }

                v685 = 1;
                goto LABEL_159;
              }
            }
          }

          v647 = *(v146 + 240);
          if (v525 == v647)
          {
            CFRelease(v647);
            *(v146 + 240) = 0;
          }

          CFRelease(v525);
          v648 = CMBufferQueueDequeueAndRetain(v147);
          if (!v648)
          {
            break;
          }

          v525 = v648;
          v649 = CMSampleBufferGetOutputPresentationTimeStamp(__dst, v648);
          OUTLINED_FUNCTION_33_29(v649, v650, v651, v652, v653, v654, v655, v656, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, *&v2196.value, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          OUTLINED_FUNCTION_4_143(v657, v658, v659, v660, v661, v662, v663, v664, v1045, v1112, v1179, v1246, v1313, v1380, v1447, keybu, v1581, v1648, v1715, v1774, v1835, v1902, v1969, v2036, v2103, queuebv, *&__dst[0].value, *&__dst[0].timescale, *&__dst[0].epoch, *&__dst[1].value, *&__dst[1].timescale, *&__dst[1].epoch, *&__dst[2].value, *&__dst[2].timescale, *&__dst[2].epoch, *&__dst[3].value, *&__dst[3].timescale, *&__dst[3].epoch, *&v2196.value);
          if (a2 == -1)
          {
            v676 = CMTimeSubtract(v667, v665, v666);
            OUTLINED_FUNCTION_11_70(v676, v677, v678, v679, v680, v681, v682, v683, v1046, v1113, v1180, v1247, v1314, v1381, v1448, keyb, v1582, v1649, v1716, v1775, v1836, v1903, v1970, v2037, v2104, queuec, __dst[0].value, __dst[0].timescale);
          }

          else
          {
            v668 = CMTimeAdd(v667, v665, v666);
            OUTLINED_FUNCTION_11_70(v668, v669, v670, v671, v672, v673, v674, v675, v1046, v1113, v1180, v1247, v1314, v1381, v1448, keyb, v1582, v1649, v1716, v1775, v1836, v1903, v1970, v2037, v2104, queuec, __dst[0].value, __dst[0].timescale);
            __dst[0] = *(v146 + 268);
            *(v146 + 264) = fvcp_bq_source_isLastSample(v525, __dst);
          }
        }

        v684 = *(v146 + 240);
        if (v684)
        {
          v685 = 0;
          v525 = 0;
          *(v146 + 240) = 0;
LABEL_156:
          CFRelease(v684);
          goto LABEL_159;
        }

        v525 = 0;
        v685 = 0;
LABEL_159:
        *(v146 + 248) = a2;
        *(v146 + 224) = v685;
        *(v146 + 228) = CMBufferQueueIsAtEndOfData(v147);
        v686 = (v146 + 304);
        if ((a2 & 0x80000000) != 0)
        {
          *v686 = v2205.value;
          *(v146 + 312) = v2205.timescale;
          *(v146 + 316) = v13;
          *(v146 + 320) = v148;
          *(v146 + 328) = v2196;
        }

        else
        {
          *v686 = *&v2196.value;
          *(v146 + 320) = v2196.epoch;
          *(v146 + 328) = v2205.value;
          *(v146 + 336) = v2205.timescale;
          *(v146 + 340) = v13;
          *(v146 + 344) = v148;
        }

        a6 = v1538;
LABEL_163:
        if (OUTLINED_FUNCTION_64_12())
        {
          LOBYTE(v687) = 0;
          v688 = 0;
LABEL_203:
          if (v525)
          {
            CFRelease(v525);
          }

          FigSimpleMutexUnlock();
          a5 = v1672;
LABEL_206:
          if (v687)
          {
            goto LABEL_220;
          }

          goto LABEL_207;
        }

        LOBYTE(v687) = 1;
        v688 = 1;
        if (FigAtomicCompareAndSwap32())
        {
          goto LABEL_203;
        }

        if (a2 == -1)
        {
          OUTLINED_FUNCTION_61_16();
          v689 = v144 & 0x1F;
          if (v723 == 3 || v689 == 3)
          {
            OUTLINED_FUNCTION_31_28();
            v726 = *v725;
            v2199 = v145;
            rhs.value = v726;
            rhs.timescale = *(v725 + 8);
            rhs.flags = 1;
            v727 = OUTLINED_FUNCTION_8_84(v2204, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2203, v2198, SHIDWORD(v2198), v145, v726, *&rhs.timescale, v13, v2201, v2202.value);
            v735 = OUTLINED_FUNCTION_22_37(v727, v728, v729, v730, v731, v732, v733, v734, v1050, v1117, v1184, v1251, v1318, v1385, v1452, keyby, v1586, v1653, v1720, v1778, v1840, v1907, v1974, v2041, v2108, queuebz, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
            v737 = CMTimeAbsoluteValue(v736, v735);
            v745 = OUTLINED_FUNCTION_6_114(v737, v738, v739, v740, v741, v742, v743, v744, v1051, v1118, v1185, v1252, v1319, v1386, v1453, keybz, v1587, v1654, v1721, v1779, v1841, v1908, v1975, v2042, v2109, queueca, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
            if (OUTLINED_FUNCTION_0_198(v745, v746, v747, v748, v749, v750, v751, v752, v1052, v1119, v1186, v1253, v1320, v1387, v1454, keyca, v1588, v1655, v1722, v1842, v1909, v1976, v2043, v2110, queuecb, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) <= 0)
            {
              goto LABEL_185;
            }
          }

          OUTLINED_FUNCTION_69_9();
          __dst[0].timescale = v753;
          __dst[0].flags = 1;
          __dst[0].epoch = v13;
          v2202.value = v2203;
          OUTLINED_FUNCTION_10_73();
          if ((CMTimeCompare(v754, v755) & 0x80000000) == 0)
          {
            goto LABEL_185;
          }
        }

        else
        {
          if (a2 != 1)
          {
            v689 = v144 & 0x1F;
            goto LABEL_185;
          }

          OUTLINED_FUNCTION_62_15();
          v689 = v144 & 0x1F;
          v691 = v690 == 3 || v689 == 3;
          if (v691 && (OUTLINED_FUNCTION_31_28(), v693 = *v692, v2199 = v145, rhs.value = v693, rhs.timescale = *(v692 + 8), rhs.flags = 1, v694 = OUTLINED_FUNCTION_8_84(v2204, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2203, v2198, SHIDWORD(v2198), v145, v693, *&rhs.timescale, v13, v2201, v2202.value), v702 = OUTLINED_FUNCTION_22_37(v694, v695, v696, v697, v698, v699, v700, v701, v1047, v1114, v1181, v1248, v1315, v1382, v1449, keybv, v1583, v1650, v1717, v1776, v1837, v1904, v1971, v2038, v2105, queuebw, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v704 = CMTimeAbsoluteValue(v703, v702), v712 = OUTLINED_FUNCTION_6_114(v704, v705, v706, v707, v708, v709, v710, v711, v1048, v1115, v1182, v1249, v1316, v1383, v1450, keybw, v1584, v1651, v1718, v1777, v1838, v1905, v1972, v2039, v2106, queuebx, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), OUTLINED_FUNCTION_0_198(v712, v713, v714, v715, v716, v717, v718, v719, v1049, v1116, v1183, v1250, v1317, v1384, v1451, keybx, v1585, v1652, v1719, v1839, v1906, v1973, v2040, v2107, queueby, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) <= 0) || (OUTLINED_FUNCTION_69_9(), __dst[0].timescale = v720, __dst[0].flags = 1, __dst[0].epoch = v13, v2202.value = v2203, OUTLINED_FUNCTION_10_73(), CMTimeCompare(v721, v722) <= 0))
          {
LABEL_185:
            OUTLINED_FUNCTION_62_15();
            v757 = v689 == 3 || v756 == 3;
            LOBYTE(v687) = (v757 && (OUTLINED_FUNCTION_31_28(), v2199 = v13, rhs.value = v2203, rhs.timescale = v2204, OUTLINED_FUNCTION_100_7(), v2197 = *v758, LODWORD(v2198) = *(v758 + 8), HIDWORD(v2198) = 1, v767 = OUTLINED_FUNCTION_19_43(v759, v760, v761, v762, v763, v764, v765, v766, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v775 = OUTLINED_FUNCTION_22_37(v767, v768, v769, v770, v771, v772, v773, v774, v1053, v1120, v1187, v1254, v1321, v1388, v1455, keycb, v1589, v1656, v1723, v1780, v1843, v1910, v1977, v2044, v2111, queuecc, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v777 = CMTimeAbsoluteValue(v776, v775), v785 = OUTLINED_FUNCTION_6_114(v777, v778, v779, v780, v781, v782, v783, v784, v1054, v1121, v1188, v1255, v1322, v1389, v1456, keycc, v1590, v1657, v1724, v1781, v1844, v1911, v1978, v2045, v2112, queuecd, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), OUTLINED_FUNCTION_0_198(v785, v786, v787, v788, v789, v790, v791, v792, v1055, v1122, v1189, v1256, v1323, v1390, v1457, keycd, v1591, v1658, v1725, v1845, v1912, v1979, v2046, v2113, queuece, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) <= 0) || (OUTLINED_FUNCTION_30_27(), v2202.value = v2218, v2202.timescale = v2219, v2202.flags = 1, v2202.epoch = v13, v801 = OUTLINED_FUNCTION_23_44(v793, v794, v795, v796, v797, v798, v799, v800, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value), (CMTimeCompare(v801, v802) & 0x80000000) == 0))
                        && (((OUTLINED_FUNCTION_61_16(), v689 != 3) ? (v804 = v803 == 3) : (v804 = 1), (!v804 || (OUTLINED_FUNCTION_31_28(), v2199 = v13, rhs.value = v2203, rhs.timescale = v2204, OUTLINED_FUNCTION_100_7(), v2197 = *v805, LODWORD(v2198) = *(v805 + 8), HIDWORD(v2198) = 1, v814 = OUTLINED_FUNCTION_19_43(v806, v807, v808, v809, v810, v811, v812, v813, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v822 = OUTLINED_FUNCTION_22_37(v814, v815, v816, v817, v818, v819, v820, v821, v1056, v1123, v1190, v1257, v1324, v1391, v1458, keyce, v1592, v1659, v1726, v1782, v1846, v1913, v1980, v2047, v2114, queuecf, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v824 = CMTimeAbsoluteValue(v823, v822), v832 = OUTLINED_FUNCTION_6_114(v824, v825, v826, v827, v828, v829, v830, v831, v1057, v1124, v1191, v1258, v1325, v1392, v1459, keycf, v1593, v1660, v1727, v1783, v1847, v1914, v1981, v2048, v2115, queuecg, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), OUTLINED_FUNCTION_0_198(v832, v833, v834, v835, v836, v837, v838, v839, v1058, v1125, v1192, v1259, v1326, v1393, v1460, keycg, v1594, v1661, v1728, v1848, v1915, v1982, v2049, v2116, queuech, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) > 0)) && (OUTLINED_FUNCTION_30_27(), v2202.value = v2218, v2202.timescale = v2219, v2202.flags = 1, v2202.epoch = v13, v848 = OUTLINED_FUNCTION_23_44(v840, v841, v842, v843, v844, v845, v846, v847, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, v1672, DerivedStorage, v1792, v1859, v1926, v1993, v2060, queue, __dst[0].value), CMTimeCompare(v848, v849) < 0)) || *(v146 + 264));
            v688 = 1;
            goto LABEL_203;
          }
        }

        v688 = HIDWORD(v1136) != 0;
        LOBYTE(v687) = 1;
        goto LABEL_203;
      }
    }

LABEL_119:
    v525 = CMBufferQueueDequeueAndRetain(v147);
    if (!v525)
    {
      goto LABEL_163;
    }

    goto LABEL_120;
  }

  v2205 = *a4;
  v14 = CMBaseObjectGetDerivedStorage();
  queuea = *(v14 + 216);
  v2214 = *v13;
  v2215 = *(v13 + 8);
  v2212 = v2214;
  v2213 = v2215;
  memcpy(__dst, (v14 + 120), sizeof(__dst));
  v15 = (v14 + 168);
  if (a2)
  {
    v15 = (v14 + 120);
  }

  v16 = 1;
  if (!a2)
  {
    v16 = 3;
  }

  rhs = *v15;
  v2196 = __dst[v16];
  OUTLINED_FUNCTION_93_5();
  v25 = OUTLINED_FUNCTION_22_37(v17, v18, v19, v20, v21, v22, v23, v24, v1002, v1069, v1136, v1203, v1270, v1337, v1404, key, v1538, v1605, a5, DerivedStorage, a1, v1859, v1926, v1993, v2060, queuea, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
  CMTimeSubtract(v26, v25, &rhs);
  value = __dst[0].value;
  flags = __dst[0].flags;
  timescale = __dst[0].timescale;
  epoch = __dst[0].epoch;
  OUTLINED_FUNCTION_93_5();
  v37 = OUTLINED_FUNCTION_22_37(v29, v30, v31, v32, v33, v34, v35, v36, v1003, v1070, v1137, v1204, v1271, v1338, v1405, keyf, v1539, v1606, v1673, v1740, v1793, v1860, v1927, v1994, v2061, queueg, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, v2196.value, *&v2196.timescale, v2196.epoch, v2201, v2202.value);
  CMTimeAdd(v38, v37, &rhs);
  v2210 = __dst[0].value;
  LODWORD(v39) = __dst[0].flags;
  v2211 = __dst[0].timescale;
  v2062 = __dst[0].epoch;
  v1607 = v14;
  FigSimpleMutexLock();
  v40 = CMBaseObjectGetDerivedStorage();
  v41 = *(v40 + 248);
  if (v41)
  {
    if (v41 == -1)
    {
      if (a2 != -1)
      {
LABEL_9:
        CFArrayRemoveAllValues(*(v40 + 256));
      }
    }

    else if (a2 != 1 || v41 != 1)
    {
      goto LABEL_9;
    }
  }

  HIDWORD(v1995) = v39;
  v1540 = a6;
  v2206 = v2210;
  v2207 = v2211;
  v42 = CMBaseObjectGetDerivedStorage();
  v43 = *(v42 + 256);
  if (v43)
  {
    Count = CFArrayGetCount(v43);
    if (Count >= 1)
    {
      a6 = *MEMORY[0x1E6960520];
      LODWORD(v39) = flags & 0x1F;
      v45 = Count + 1;
      while (1)
      {
        ValueAtIndex = FigCFArrayGetValueAtIndex();
        if (CMGetAttachment(ValueAtIndex, a6, 0))
        {
          v47 = CMSampleBufferGetOutputPresentationTimeStamp(__dst, ValueAtIndex);
          OUTLINED_FUNCTION_28_30(v47, v48, v49, v50, v51, v52, v53, v54, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, __dst[0].timescale);
          OUTLINED_FUNCTION_102_4(v55, v56, v57, v58, v59, v60, v61, v62, v1005, v1072, v1139, v1206, v1273, v1340, v1407, keyg, v1541, v1608, v1675, v1742, v1795, v1862, v1929, v1996, v2063, queueh, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          rhs.value = v2216;
          OUTLINED_FUNCTION_49_16();
          v71 = OUTLINED_FUNCTION_5_125(v63, v64, v65, v66, v67, v68, v69, v70, v1006, v1073, v1140, v1207, v1274, v1341, v1408, keyh, v1542, v1609, v1676, v1743, v1796, v1863, v1930, v1997, v2064, queuei, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value);
          v74 = CMTimeSubtract(v73, v71, v72);
          v2218 = __dst[0].value;
          v2219 = __dst[0].timescale;
        }

        else
        {
          v82 = CMSampleBufferGetOutputPresentationTimeStamp(__dst, ValueAtIndex);
          v2218 = __dst[0].value;
          a3 = __dst[0].flags;
          v2219 = __dst[0].timescale;
          a1 = __dst[0].epoch;
          OUTLINED_FUNCTION_102_4(v82, v83, v84, v85, v86, v87, v88, v89, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          rhs.value = v2218;
          OUTLINED_FUNCTION_49_16();
          v98 = OUTLINED_FUNCTION_5_125(v90, v91, v92, v93, v94, v95, v96, v97, v1007, v1074, v1141, v1208, v1275, v1342, v1409, keyi, v1543, v1610, v1677, v1744, v1797, v1864, v1931, v1998, v2065, queuej, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value);
          v101 = CMTimeAdd(v100, v98, v99);
          OUTLINED_FUNCTION_28_30(v101, v102, v103, v104, v105, v106, v107, v108, v1008, v1075, v1142, v1209, v1276, v1343, v1410, keyj, v1544, v1611, v1678, v1745, v1798, v1865, v1932, v1999, v2066, queuek, __dst[0].value, __dst[0].timescale);
        }

        v109 = (a3 & 0x1F) == 3 || v39 == 3;
        if (!v109 || (OUTLINED_FUNCTION_31_28(), v2199 = epoch, rhs.value = v2216, OUTLINED_FUNCTION_49_16(), v118 = OUTLINED_FUNCTION_7_97(v110, v111, v112, v113, v114, v115, v116, v117, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, SHIDWORD(v2198), v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v126 = OUTLINED_FUNCTION_22_37(v118, v119, v120, v121, v122, v123, v124, v125, v1009, v1076, v1143, v1210, v1277, v1344, v1411, keyk, v1545, v1612, v1679, v1746, v1799, v1866, v1933, v2000, v2067, queuel, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v128 = CMTimeAbsoluteValue(v127, v126), v136 = OUTLINED_FUNCTION_6_114(v128, v129, v130, v131, v132, v133, v134, v135, v1010, v1077, v1144, v1211, v1278, v1345, v1412, keyl, v1546, v1613, v1680, v1747, v1800, v1867, v1934, v2001, v2068, queuem, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v74 = OUTLINED_FUNCTION_0_198(v136, v137, v138, v139, v140, v141, v142, v143, v1011, v1078, v1145, v1212, v1279, v1346, v1413, keym, v1547, v1614, v1681, v1801, v1868, v1935, v2002, v2069, queuen, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value), v74 >= 1))
        {
          __dst[0].timescale = v2217;
          __dst[0].flags = a3;
          if (OUTLINED_FUNCTION_3_148(v74, v75, v76, v77, v78, v79, v80, v81, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, v2216, *&__dst[0].timescale, a1, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value, v2202.timescale, v2202.flags, v2202.epoch) > 0)
          {
            break;
          }
        }

        CFArrayRemoveValueAtIndex(*(v42 + 256), 0);
        if (--v45 <= 1)
        {
          goto LABEL_49;
        }
      }

      LODWORD(v1995) = BYTE4(v1995) & 0x1F;
      do
      {
        v39 = FigCFArrayGetValueAtIndex();
        if (CMGetAttachment(v39, a6, 0))
        {
          v152 = CMSampleBufferGetOutputPresentationTimeStamp(__dst, v39);
          OUTLINED_FUNCTION_28_30(v152, v153, v154, v155, v156, v157, v158, v159, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, __dst[0].timescale);
          CMSampleBufferGetOutputDuration(&v2202, v39);
          rhs.value = v2216;
          OUTLINED_FUNCTION_49_16();
          v168 = OUTLINED_FUNCTION_5_125(v160, v161, v162, v163, v164, v165, v166, v167, v1012, v1079, v1146, v1213, v1280, v1347, v1414, keyn, v1548, v1615, v1682, v1748, v1802, v1869, v1936, v2003, v2070, queueo, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value);
          v171 = CMTimeSubtract(v170, v168, v169);
          OUTLINED_FUNCTION_79_12(v171, v172, v173, v174, v175, v176, v177, v178, v1013, v1080, v1147, v1214, v1281, v1348, v1415, keyo, v1549, v1616, v1683, v1749, v1803, v1870, v1937, v2004, v2071, queuep, __dst[0].value, __dst[0].timescale);
        }

        else
        {
          v179 = CMSampleBufferGetOutputPresentationTimeStamp(__dst, v39);
          OUTLINED_FUNCTION_79_12(v179, v180, v181, v182, v183, v184, v185, v186, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, __dst[0].timescale);
          CMSampleBufferGetOutputDuration(&v2202, v39);
          rhs.value = v2218;
          OUTLINED_FUNCTION_91_8();
          v195 = OUTLINED_FUNCTION_5_125(v187, v188, v189, v190, v191, v192, v193, v194, v1014, v1081, v1148, v1215, v1282, v1349, v1416, keyp, v1550, v1617, v1684, v1750, v1804, v1871, v1938, v2005, v2072, queueq, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value);
          CMTimeAdd(v197, v195, v196);
          v2216 = __dst[0].value;
          v2217 = __dst[0].timescale;
        }

        if ((a1 & 0x1F) == 3 || v1995 == 3)
        {
          OUTLINED_FUNCTION_31_28();
          OUTLINED_FUNCTION_91_8();
          v208 = OUTLINED_FUNCTION_19_43(v199, v200, v201, v202, v203, v204, v205, v206, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2206, __SPAIR64__(HIDWORD(v1995), v2207), v2062, v207, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          v216 = OUTLINED_FUNCTION_22_37(v208, v209, v210, v211, v212, v213, v214, v215, v1015, v1082, v1149, v1216, v1283, v1350, v1417, keyq, v1551, v1618, v1685, v1751, v1805, v1872, v1939, v2006, v2073, queuer, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          v218 = CMTimeAbsoluteValue(v217, v216);
          v226 = OUTLINED_FUNCTION_6_114(v218, v219, v220, v221, v222, v223, v224, v225, v1016, v1083, v1150, v1217, v1284, v1351, v1418, keyr, v1552, v1619, v1686, v1752, v1806, v1873, v1940, v2007, v2074, queues, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          if (OUTLINED_FUNCTION_0_198(v226, v227, v228, v229, v230, v231, v232, v233, v1017, v1084, v1151, v1218, v1285, v1352, v1419, keys, v1553, v1620, v1687, v1807, v1874, v1941, v2008, v2075, queuet, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) < 1)
          {
            break;
          }
        }

        OUTLINED_FUNCTION_69_9();
        __dst[0].timescale = v234;
        __dst[0].flags = a1;
        __dst[0].epoch = a3;
        v2202.value = v2206;
        v2202.timescale = v2207;
        v2202.flags = HIDWORD(v1995);
        v2202.epoch = v2062;
        v243 = OUTLINED_FUNCTION_23_44(v235, v236, v237, v238, v239, v240, v241, v242, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value);
        if (CMTimeCompare(v243, v244) < 1)
        {
          break;
        }

        CFArrayRemoveValueAtIndex(*(v42 + 256), v45 - 2);
        --v45;
      }

      while (v45 > 1);
    }
  }

LABEL_49:
  Head = CMBufferQueueGetHead(queueb);
  v246 = v1607;
  if (Head)
  {
    v247 = Head;
    HIDWORD(v1406) = *(MEMORY[0x1E6960C80] + 12);
    v1339 = *(MEMORY[0x1E6960C80] + 16);
    HIDWORD(v1272) = *(MEMORY[0x1E6960C88] + 12);
    v1205 = *(MEMORY[0x1E6960C88] + 16);
    keya = *MEMORY[0x1E69604B0];
    v1861 = *MEMORY[0x1E695E4D0];
    v1071 = *MEMORY[0x1E69604F8];
    HIDWORD(v1928) = flags & 0x1F;
    LODWORD(v1995) = BYTE4(v1995) & 0x1F;
    do
    {
      if (!CMSampleBufferDataIsReady(v247))
      {
        break;
      }

      if (a2 > 1)
      {
        v284 = CMSampleBufferGetOutputPresentationTimeStamp(__dst, v247);
        OUTLINED_FUNCTION_50_15(v284, v285, v286, v287, v288, v289, v290, v291, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, __dst[0].timescale);
        v283 = __dst[0].epoch;
        OUTLINED_FUNCTION_102_4(v292, v293, v294, v295, v296, v297, v298, v299, v1021, v1088, v1155, v1222, v1289, v1356, v1423, keyw, v1557, v1624, v1691, v1756, v1811, v1878, v1945, v2012, v2079, queuex, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
        rhs.value = v2212;
        OUTLINED_FUNCTION_45_18();
        rhs.epoch = v283;
        v308 = OUTLINED_FUNCTION_5_125(v300, v301, v302, v303, v304, v305, v306, v307, v1022, v1089, v1156, v1223, v1290, v1357, v1424, keyx, v1558, v1625, v1692, v1757, v1812, v1879, v1946, v2013, v2080, queuey, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value);
        v311 = CMTimeSubtract(v310, v308, v309);
        OUTLINED_FUNCTION_80_9(v311, v312, v313, v314, v315, v316, v317, v318, v1023, v1090, v1157, v1224, v1291, v1358, v1425, keyy, v1559, v1626, v1693, v1758, v1813, v1880, v1947, v2014, v2081, queuez, __dst[0].value, __dst[0].timescale);
        if (fvcp_isNonPermanentEmptyMediaMarker(v247))
        {
          v2214 = *MEMORY[0x1E6960C80];
          v2215 = *(MEMORY[0x1E6960C80] + 8);
          LOBYTE(a6) = BYTE4(v1406);
          goto LABEL_60;
        }
      }

      else
      {
        v248 = CMSampleBufferGetOutputPresentationTimeStamp(__dst, v247);
        OUTLINED_FUNCTION_80_9(v248, v249, v250, v251, v252, v253, v254, v255, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, __dst[0].timescale);
        OUTLINED_FUNCTION_102_4(v256, v257, v258, v259, v260, v261, v262, v263, v1018, v1085, v1152, v1219, v1286, v1353, v1420, keyt, v1554, v1621, v1688, v1753, v1808, v1875, v1942, v2009, v2076, queueu, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
        rhs.value = v2214;
        OUTLINED_FUNCTION_42_24();
        v272 = OUTLINED_FUNCTION_5_125(v264, v265, v266, v267, v268, v269, v270, v271, v1019, v1086, v1153, v1220, v1287, v1354, v1421, keyu, v1555, v1622, v1689, v1754, v1809, v1876, v1943, v2010, v2077, queuev, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value);
        v275 = CMTimeAdd(v274, v272, v273);
        OUTLINED_FUNCTION_50_15(v275, v276, v277, v278, v279, v280, v281, v282, v1020, v1087, v1154, v1221, v1288, v1355, v1422, keyv, v1556, v1623, v1690, v1755, v1810, v1877, v1944, v2011, v2078, queuew, __dst[0].value, __dst[0].timescale);
        v283 = __dst[0].epoch;
        if (fvcp_isNonPermanentEmptyMediaMarker(v247))
        {
          v2212 = *MEMORY[0x1E6960C88];
          v2213 = *(MEMORY[0x1E6960C88] + 8);
          v283 = v1205;
          LOBYTE(v39) = BYTE4(v1272);
          goto LABEL_60;
        }
      }

      if (CMGetAttachment(v247, keya, 0) == v1861 && CMGetAttachment(v247, v1071, 0) == v1861)
      {
        *(v246 + 228) = 1;
        v850 = CMBufferQueueDequeueAndRetain(queueb);
        if (v850)
        {
          CFRelease(v850);
        }

        break;
      }

      if (!CMSampleBufferGetNumSamples(v247))
      {
        goto LABEL_105;
      }

LABEL_60:
      v319 = *(v246 + 256);
      if (!v319)
      {
        goto LABEL_72;
      }

      v320 = CFArrayGetCount(v319);
      v321 = v320 - 1;
      if (v320 < 1)
      {
        goto LABEL_72;
      }

      if (a2 > 1)
      {
        v331 = FigCFArrayGetValueAtIndex();
        if (!v331)
        {
          goto LABEL_72;
        }

        if (!fvcp_isNonPermanentEmptyMediaMarker(v331))
        {
          goto LABEL_72;
        }

        OUTLINED_FUNCTION_18_44();
        __dst[0].epoch = v283;
        OUTLINED_FUNCTION_16_51();
        v2202.flags = HIDWORD(v1995);
        v2202.epoch = v2062;
        v340 = OUTLINED_FUNCTION_23_44(v332, v333, v334, v335, v336, v337, v338, v339, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value);
        if (CMTimeCompare(v340, v341) < 1)
        {
          goto LABEL_72;
        }

        v321 = 0;
      }

      else
      {
        v322 = FigCFArrayGetValueAtIndex();
        if (!v322)
        {
          goto LABEL_72;
        }

        if (!fvcp_isNonPermanentEmptyMediaMarker(v322))
        {
          goto LABEL_72;
        }

        OUTLINED_FUNCTION_26_34();
        if (OUTLINED_FUNCTION_3_148(v323, v324, v325, v326, v327, v328, v329, v330, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value, v2202.timescale, v2202.flags, v2202.epoch) >= 1)
        {
          goto LABEL_72;
        }
      }

      CFArrayRemoveValueAtIndex(*(v246 + 256), v321);
LABEL_72:
      v342 = HIDWORD(v1995);
      v343 = (a6 & 0x1F) == 3 || v1995 == 3;
      v344 = v343;
      if (v343 && (OUTLINED_FUNCTION_31_28(), OUTLINED_FUNCTION_42_24(), OUTLINED_FUNCTION_43_22(), HIDWORD(v2198) = HIDWORD(v1995), v354 = OUTLINED_FUNCTION_19_43(v345, v346, v347, v348, v349, v350, v351, v352, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2062, v353, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v362 = OUTLINED_FUNCTION_22_37(v354, v355, v356, v357, v358, v359, v360, v361, v1024, v1091, v1158, v1225, v1292, v1359, v1426, keyz, v1560, v1627, v1694, v1759, v1814, v1881, v1948, v2015, v2082, queueba, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v364 = CMTimeAbsoluteValue(v363, v362), v372 = OUTLINED_FUNCTION_6_114(v364, v365, v366, v367, v368, v369, v370, v371, v1025, v1092, v1159, v1226, v1293, v1360, v1427, keyba, v1561, v1628, v1695, v1760, v1815, v1882, v1949, v2016, v2083, queuebb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), OUTLINED_FUNCTION_0_198(v372, v373, v374, v375, v376, v377, v378, v379, v1026, v1093, v1160, v1227, v1294, v1361, v1428, keybb, v1562, v1629, v1696, v1816, v1883, v1950, v2017, v2084, queuebc, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) < 1) || (OUTLINED_FUNCTION_26_34(), OUTLINED_FUNCTION_16_51(), v2202.flags = v342, v2202.epoch = v2062, v388 = OUTLINED_FUNCTION_23_44(v380, v381, v382, v383, v384, v385, v386, v387, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value), CMTimeCompare(v388, v389) <= 0))
      {
        v390 = (v39 & 0x1F) == 3 || HIDWORD(v1928) == 3;
        if (!v390 || (OUTLINED_FUNCTION_31_28(), v2199 = epoch, rhs.value = v2212, OUTLINED_FUNCTION_45_18(), v399 = OUTLINED_FUNCTION_7_97(v391, v392, v393, v394, v395, v396, v397, v398, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, SHIDWORD(v2198), v2199, rhs.value, *&rhs.timescale, v283, v2201, v2202.value), v407 = OUTLINED_FUNCTION_22_37(v399, v400, v401, v402, v403, v404, v405, v406, v1027, v1094, v1161, v1228, v1295, v1362, v1429, keybc, v1563, v1630, v1697, v1761, v1817, v1884, v1951, v2018, v2085, queuebd, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v409 = CMTimeAbsoluteValue(v408, v407), v417 = OUTLINED_FUNCTION_6_114(v409, v410, v411, v412, v413, v414, v415, v416, v1028, v1095, v1162, v1229, v1296, v1363, v1430, keybd, v1564, v1631, v1698, v1762, v1818, v1885, v1952, v2019, v2086, queuebe, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), OUTLINED_FUNCTION_0_198(v417, v418, v419, v420, v421, v422, v423, v424, v1029, v1096, v1163, v1230, v1297, v1364, v1431, keybe, v1565, v1632, v1699, v1819, v1886, v1953, v2020, v2087, queuebf, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) >= 1))
        {
          OUTLINED_FUNCTION_18_44();
          if (OUTLINED_FUNCTION_3_148(v425, v426, v427, v428, v429, v430, v431, v432, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, v283, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value, v2202.timescale, v2202.flags, v2202.epoch) >= 1)
          {
            v39 = CMBufferQueueDequeueAndRetain(queueb);
            v433 = *(v246 + 256);
            if (a2 > 1)
            {
              CFArrayInsertValueAtIndex(v433, 0, v39);
              if (!v39)
              {
                goto LABEL_108;
              }
            }

            else
            {
              CFArrayAppendValue(v433, v39);
              if (!v39)
              {
                goto LABEL_108;
              }
            }

            goto LABEL_107;
          }
        }
      }

      if (a2 > 1)
      {
        if (a2 != -1)
        {
          break;
        }

        if (v344)
        {
          OUTLINED_FUNCTION_31_28();
          OUTLINED_FUNCTION_42_24();
          OUTLINED_FUNCTION_43_22();
          HIDWORD(v2198) = HIDWORD(v1995);
          v486 = OUTLINED_FUNCTION_19_43(v477, v478, v479, v480, v481, v482, v483, v484, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2062, v485, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          v494 = OUTLINED_FUNCTION_22_37(v486, v487, v488, v489, v490, v491, v492, v493, v1033, v1100, v1167, v1234, v1301, v1368, v1435, keybi, v1569, v1636, v1703, v1765, v1823, v1890, v1957, v2024, v2091, queuebj, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          v496 = CMTimeAbsoluteValue(v495, v494);
          v504 = OUTLINED_FUNCTION_6_114(v496, v497, v498, v499, v500, v501, v502, v503, v1034, v1101, v1168, v1235, v1302, v1369, v1436, keybj, v1570, v1637, v1704, v1766, v1824, v1891, v1958, v2025, v2092, queuebk, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          if (OUTLINED_FUNCTION_0_198(v504, v505, v506, v507, v508, v509, v510, v511, v1035, v1102, v1169, v1236, v1303, v1370, v1437, keybk, v1571, v1638, v1705, v1825, v1892, v1959, v2026, v2093, queuebl, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) < 1)
          {
            break;
          }
        }

        OUTLINED_FUNCTION_26_34();
        OUTLINED_FUNCTION_16_51();
        v2202.flags = HIDWORD(v1995);
        v2202.epoch = v2062;
        v520 = OUTLINED_FUNCTION_23_44(v512, v513, v514, v515, v516, v517, v518, v519, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value);
        if (CMTimeCompare(v520, v521) < 1)
        {
          break;
        }
      }

      else
      {
        if ((v39 & 0x1F) == 3 || HIDWORD(v1928) == 3)
        {
          OUTLINED_FUNCTION_31_28();
          v2199 = epoch;
          rhs.value = v2212;
          OUTLINED_FUNCTION_45_18();
          v443 = OUTLINED_FUNCTION_7_97(v435, v436, v437, v438, v439, v440, v441, v442, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, SHIDWORD(v2198), v2199, rhs.value, *&rhs.timescale, v283, v2201, v2202.value);
          v451 = OUTLINED_FUNCTION_22_37(v443, v444, v445, v446, v447, v448, v449, v450, v1030, v1097, v1164, v1231, v1298, v1365, v1432, keybf, v1566, v1633, v1700, v1763, v1820, v1887, v1954, v2021, v2088, queuebg, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          v453 = CMTimeAbsoluteValue(v452, v451);
          v461 = OUTLINED_FUNCTION_6_114(v453, v454, v455, v456, v457, v458, v459, v460, v1031, v1098, v1165, v1232, v1299, v1366, v1433, keybg, v1567, v1634, v1701, v1764, v1821, v1888, v1955, v2022, v2089, queuebh, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
          if (OUTLINED_FUNCTION_0_198(v461, v462, v463, v464, v465, v466, v467, v468, v1032, v1099, v1166, v1233, v1300, v1367, v1434, keybh, v1568, v1635, v1702, v1822, v1889, v1956, v2023, v2090, queuebi, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) < 1)
          {
            break;
          }
        }

        OUTLINED_FUNCTION_18_44();
        if ((OUTLINED_FUNCTION_3_148(v469, v470, v471, v472, v473, v474, v475, v476, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, v283, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value, v2202.timescale, v2202.flags, v2202.epoch) & 0x80000000) == 0)
        {
          break;
        }
      }

LABEL_105:
      v522 = CMBufferQueueDequeueAndRetain(queueb);
      if (v522)
      {
        v39 = v522;
LABEL_107:
        CFRelease(v39);
      }

LABEL_108:
      v247 = CMBufferQueueGetHead(queueb);
    }

    while (v247);
  }

  v851 = CFArrayGetCount(*(v246 + 256));
  if (v851 >= 1)
  {
    *(v246 + 224) = 1;
  }

  *(v246 + 248) = a2;
  if (CMBufferQueueIsAtEndOfData(queueb))
  {
    *(v246 + 228) = 1;
  }

  a6 = v1540;
  a5 = v1674;
  if (OUTLINED_FUNCTION_64_12())
  {
    goto LABEL_215;
  }

  LOBYTE(v687) = 1;
  if (FigAtomicCompareAndSwap32())
  {
    v688 = 1;
    goto LABEL_219;
  }

  if (v851 >= 1)
  {
    v853 = *(v1607 + 256);
    if (a2 <= 1)
    {
      v854 = CFArrayGetValueAtIndex(v853, v851 - 1);
      CMSampleBufferGetOutputPresentationTimeStamp(&v2202, v854);
      OutputDuration = CMSampleBufferGetOutputDuration(&rhs, v854);
      v863 = OUTLINED_FUNCTION_22_37(OutputDuration, v856, v857, v858, v859, v860, v861, v862, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
      v865 = CMTimeAdd(v864, v863, &rhs);
      OUTLINED_FUNCTION_50_15(v865, v866, v867, v868, v869, v870, v871, v872, v1059, v1126, v1193, v1260, v1327, v1394, v1461, keych, v1595, v1662, v1729, v1784, v1849, v1916, v1983, v2050, v2117, queueci, __dst[0].value, __dst[0].timescale);
      v873 = __dst[0].epoch;
      v874 = HIDWORD(v2051);
      v875 = (v854 & 0x1F) == 3 || (BYTE4(v2051) & 0x1F) == 3;
      if (v875 && (OUTLINED_FUNCTION_31_28(), OUTLINED_FUNCTION_45_18(), rhs.epoch = v873, OUTLINED_FUNCTION_43_22(), HIDWORD(v2198) = HIDWORD(v2051), v885 = OUTLINED_FUNCTION_19_43(v876, v877, v878, v879, v880, v881, v882, v883, v1060, v1127, v1194, v1261, v1328, v1395, v1462, keyc, v1596, v1663, v1730, v1785, v1850, v1917, v1984, v2051, v2118, queued, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2118, v884, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v893 = OUTLINED_FUNCTION_22_37(v885, v886, v887, v888, v889, v890, v891, v892, v1061, v1128, v1195, v1262, v1329, v1396, v1463, keyci, v1597, v1664, v1731, v1786, v1851, v1918, v1985, v2052, v2119, queuecj, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v895 = CMTimeAbsoluteValue(v894, v893), v903 = OUTLINED_FUNCTION_6_114(v895, v896, v897, v898, v899, v900, v901, v902, v1062, v1129, v1196, v1263, v1330, v1397, v1464, keycj, v1598, v1665, v1732, v1787, v1852, v1919, v1986, v2053, v2120, queueck, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), OUTLINED_FUNCTION_0_198(v903, v904, v905, v906, v907, v908, v909, v910, v1063, v1130, v1197, v1264, v1331, v1398, v1465, keyck, v1599, v1666, v1733, v1853, v1920, v1987, v2054, v2121, queuecl, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value) < 1))
      {
        LOBYTE(v687) = 0;
      }

      else
      {
        OUTLINED_FUNCTION_18_44();
        __dst[0].epoch = v873;
        OUTLINED_FUNCTION_16_51();
        v2202.flags = v874;
        v2202.epoch = v2118;
        v919 = OUTLINED_FUNCTION_23_44(v911, v912, v913, v914, v915, v916, v917, v918, v1060, v1127, v1194, v1261, v1328, v1395, v1462, keyc, v1596, v1663, v1730, v1785, v1850, v1917, v1984, v2051, v2118, queued, __dst[0].value);
        LOBYTE(v687) = CMTimeCompare(v919, v920) > 0;
      }

      goto LABEL_252;
    }

    v687 = CFArrayGetValueAtIndex(v853, 0);
    CMSampleBufferGetOutputPresentationTimeStamp(&v2202, v687);
    Duration = CMSampleBufferGetDuration(&rhs, v687);
    v951 = OUTLINED_FUNCTION_22_37(Duration, v944, v945, v946, v947, v948, v949, v950, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value);
    v953 = CMTimeSubtract(v952, v951, &rhs);
    v2214 = __dst[0].value;
    LODWORD(v687) = __dst[0].flags;
    v2215 = __dst[0].timescale;
    v961 = __dst[0].epoch;
    v962 = (__dst[0].flags & 0x1F) == 3 || (flags & 0x1F) == 3;
    if (!v962 || (OUTLINED_FUNCTION_31_28(), v971 = OUTLINED_FUNCTION_7_97(v963, v964, v965, v966, v967, v968, v969, v970, v1065, v1132, v1199, v1266, v1333, v1400, v1467, keye, v1601, v1668, v1735, v1789, v1855, v1922, v1989, v2056, v2123, queuef, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, SHIDWORD(v2198), epoch, v2214, __SPAIR64__(v687, v2215), v961, v2201, v2202.value), v979 = OUTLINED_FUNCTION_22_37(v971, v972, v973, v974, v975, v976, v977, v978, v1066, v1133, v1200, v1267, v1334, v1401, v1468, keycl, v1602, v1669, v1736, v1790, v1856, v1923, v1990, v2057, v2124, queuecm, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v981 = CMTimeAbsoluteValue(v980, v979), v989 = OUTLINED_FUNCTION_6_114(v981, v982, v983, v984, v985, v986, v987, v988, v1067, v1134, v1201, v1268, v1335, v1402, v1469, keycm, v1603, v1670, v1737, v1791, v1857, v1924, v1991, v2058, v2125, queuecn, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value), v953 = OUTLINED_FUNCTION_0_198(v989, v990, v991, v992, v993, v994, v995, v996, v1068, v1135, v1202, v1269, v1336, v1403, v1470, keycn, v1604, v1671, v1738, v1858, v1925, v1992, v2059, v2126, queueco, *&__dst[0].value, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, *&rhs.value, rhs.epoch, v2201, v2202.value), v953 >= 1))
    {
      __dst[0].timescale = v2215;
      __dst[0].flags = v687;
      LOBYTE(v687) = OUTLINED_FUNCTION_3_148(v953, v954, v955, v956, v957, v958, v959, v960, v1065, v1132, v1199, v1266, v1333, v1400, v1467, keye, v1601, v1668, v1735, v1789, v1855, v1922, v1989, v2056, v2123, queuef, v2214, *&__dst[0].timescale, v961, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value, *&rhs.timescale, rhs.epoch, v2201, v2202.value, v2202.timescale, v2202.flags, v2202.epoch) < 1;
LABEL_252:
      v688 = 1;
      goto LABEL_219;
    }

LABEL_250:
    LOBYTE(v687) = 1;
    goto LABEL_252;
  }

  v921 = CMBufferQueueGetHead(queueb);
  v687 = v921;
  if (!v921)
  {
    goto LABEL_216;
  }

  CMSampleBufferGetOutputPresentationTimeStamp(__dst, v921);
  v2214 = __dst[0].value;
  v2215 = __dst[0].timescale;
  CMSampleBufferGetOutputDuration(&v2202, v687);
  rhs.value = v2214;
  rhs.timescale = v2215;
  OUTLINED_FUNCTION_100_7();
  v930 = OUTLINED_FUNCTION_5_125(v922, v923, v924, v925, v926, v927, v928, v929, v1004, v1071, v1138, v1205, v1272, v1339, v1406, keya, v1540, v1607, v1674, v1741, v1794, v1861, v1928, v1995, v2062, queueb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, v2196.value, *&v2196.timescale, v2196.epoch, v2197, v2198, v2199, rhs.value);
  v933 = CMTimeAdd(v932, v930, v931);
  v2212 = __dst[0].value;
  v2213 = __dst[0].timescale;
  if (a2 > 1)
  {
    if (a2 != -1)
    {
LABEL_215:
      LOBYTE(v687) = 0;
LABEL_216:
      v688 = 0;
      goto LABEL_219;
    }

    v997 = __dst[0].flags;
    v998 = __dst[0].epoch;
    *&__dst[0].timescale = *&v2205.timescale;
    __dst[0].epoch = v2205.epoch;
    v2202.value = v2212;
    v2202.timescale = v2213;
    v2202.flags = v997;
    v2202.epoch = v998;
    v999 = OUTLINED_FUNCTION_23_44(v933, v934, v935, v936, v937, v938, v939, v940, v1064, v1131, v1198, v1265, v1332, v1399, v1466, keyd, v1600, v1667, v1734, v1788, v1854, v1921, v1988, v2055, v2122, queuee, v2205.value);
    if (CMTimeCompareWithToleranceIfRounded(v999, v1000) < 1)
    {
      goto LABEL_237;
    }
  }

  else
  {
    __dst[0] = v2205;
    v2202.value = v2214;
    OUTLINED_FUNCTION_10_73();
    if ((CMTimeCompareWithToleranceIfRounded(v941, v942) & 0x80000000) == 0)
    {
LABEL_237:
      LOBYTE(v687) = 0;
      v688 = 0;
      goto LABEL_219;
    }
  }

  if (HIDWORD(v1198))
  {
    v1001 = CMBufferQueueDequeueAndRetain(queuee);
    CFArraySetValueAtIndex(*(v1667 + 256), 0, v1001);
    if (v1001)
    {
      CFRelease(v1001);
    }

    goto LABEL_250;
  }

  v688 = 0;
  LOBYTE(v687) = 1;
LABEL_219:
  FigSimpleMutexUnlock();
  if ((v687 & 1) == 0)
  {
LABEL_207:
    FigVCPSourceHoldTriggerUntilAvailabilityChanges();
  }

LABEL_220:
  FigSimpleMutexUnlock();
  if (a5)
  {
    *a5 = v688;
  }

  if (a6)
  {
    *a6 = v687;
  }

  return 0;
}

uint64_t fvcp_bq_source_CopyTimedSampleBuffers(uint64_t a1, int a2, CFArrayRef *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  value = 0;
  sbuf = 0;
  if (FigVCPSourceRequiresWindowedSampling(a1, a2))
  {
    FigSimpleMutexLock();
    v7 = *(DerivedStorage + 256);
    if (v7)
    {
      Count = CFArrayGetCount(v7);
      if (Count >= 1)
      {
        v9 = Count;
        Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], Count, MEMORY[0x1E695E9C0]);
        if (Mutable)
        {
          v11 = 0;
          while (1)
          {
            ValueAtIndex = CFArrayGetValueAtIndex(*(DerivedStorage + 256), v11);
            if (fvcp_isNonPermanentEmptyMediaMarker(ValueAtIndex))
            {
              CMSampleBufferGetOutputPresentationTimeStamp(&v18, ValueAtIndex);
              v13 = FigVCPTimedSampleCreateWithNULL(&v18, &value);
            }

            else
            {
              CMSampleBufferGetOutputPresentationTimeStamp(&v18, ValueAtIndex);
              v13 = FigVCPTimedSampleCreateWithSampleBuffer(&v18, ValueAtIndex, &value);
            }

            v14 = v13;
            if (v13)
            {
              break;
            }

            CFArrayAppendValue(Mutable, value);
            if (value)
            {
              CFRelease(value);
              value = 0;
            }

            if (v9 == ++v11)
            {
              goto LABEL_15;
            }
          }
        }

        else
        {
          OUTLINED_FUNCTION_111();
          v14 = FigSignalErrorAtGM();
        }

        FigSimpleMutexUnlock();
        goto LABEL_22;
      }
    }

    Mutable = 0;
LABEL_15:
    FigSimpleMutexUnlock();
    v15 = Mutable;
  }

  else
  {
    fvcp_bq_source_CopySampleBuffer(a1, &sbuf);
    if (sbuf)
    {
      CMSampleBufferGetOutputPresentationTimeStamp(&v18, sbuf);
      v16 = FigVCPTimedSampleCreateWithSampleBuffer(&v18, sbuf, &value);
      if (v16)
      {
        v14 = v16;
        Mutable = 0;
        goto LABEL_22;
      }

      v15 = CFArrayCreate(0, &value, 1, MEMORY[0x1E695E9C0]);
    }

    else
    {
      v15 = 0;
    }
  }

  Mutable = 0;
  v14 = 0;
  if (!a3)
  {
    goto LABEL_23;
  }

  *a3 = v15;
LABEL_22:
  v15 = 0;
LABEL_23:
  if (sbuf)
  {
    CFRelease(sbuf);
  }

  if (value)
  {
    CFRelease(value);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  return v14;
}

void fvcp_timing_Finalize(uint64_t a1)
{
  FigVCPTimingInvalidate(a1);
  FigSimpleMutexDestroy();
  FigSimpleMutexDestroy();
  v2 = *(a1 + 72);
  if (v2)
  {

    CFRelease(v2);
  }
}

uint64_t fvcp_output_Finalize(void *a1)
{
  FigVCPOutputInvalidate(a1);
  v2 = a1[12];
  if (v2)
  {
    CFRelease(v2);
  }

  v3 = a1[9];
  if (v3)
  {
    CFRelease(v3);
  }

  v4 = a1[10];
  if (v4)
  {
    CFRelease(v4);
  }

  v5 = a1[4];
  if (v5)
  {
    CFRelease(v5);
  }

  v6 = a1[8];
  if (v6)
  {
    CFRelease(v6);
    a1[8] = 0;
  }

  v7 = a1[7];
  if (v7)
  {
    CFRelease(v7);
    a1[7] = 0;
  }

  FigSimpleMutexDestroy();

  return FigSimpleMutexDestroy();
}

CFStringRef fvcp_outputConformer_CopyFormattingDesc(uint64_t a1, const __CFDictionary *a2, uint64_t a3)
{
  cf = 0;
  v5 = *MEMORY[0x1E695E480];
  FigVCPOutputConformerCopyProperty(a1, @"VideoCompositionProcessor_DestinationPixelBufferDesiredAttributes", a3, &cf);
  v6 = CFStringCreateWithFormat(v5, a2, @"[FigVCPOutputConformer(%p)] destinationPixelBufferDesiredAttributes %@, destinationPixelBufferPool %p, pixelTransferSession %p", a1, cf, *(a1 + 88), *(a1 + 96));
  if (cf)
  {
    CFRelease(cf);
  }

  return v6;
}

void fvcp_compositorHost_Finalize(uint64_t a1)
{
  FigVCPCompositorHostInvalidate(a1);
  FigSimpleMutexDestroy();
  dispatch_release(*(a1 + 64));
  v2 = *(a1 + 40);
  if (v2)
  {
    CFRelease(v2);
  }

  v3 = *(a1 + 56);
  if (v3)
  {
    CFRelease(v3);
  }

  v4 = *(a1 + 88);
  if (v4)
  {
    CFRelease(v4);
  }

  v5 = *(a1 + 104);
  if (v5)
  {
    CFRelease(v5);
  }

  v6 = *(a1 + 120);
  if (v6)
  {

    CFRelease(v6);
  }
}

_DWORD *fvcp_compositorHost_getPendingFrameFromArray(uint64_t a1, int a2, CFIndex *a3)
{
  v6 = FigAtomicAdd32();
  if (*(a1 + 56))
  {
    v7 = v6 < 1;
  }

  else
  {
    v7 = 1;
  }

  if (v7)
  {
    return 0;
  }

  v8 = 0;
  v9 = v6;
  while (1)
  {
    result = CFArrayGetValueAtIndex(*(a1 + 56), v8);
    if (result[4] == a2)
    {
      break;
    }

    if (v9 == ++v8)
    {
      return 0;
    }
  }

  if (a3)
  {
    *a3 = v8;
  }

  return result;
}

uint64_t FigVCPGetFoldedTimeRanges_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPreprocessParametersCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPreprocessParametersCreateMutable_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPreprocessParametersCreateMutable_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPreprocessParametersCreateCopy_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPreprocessParametersCreateCopy_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_source_createCommon_cold_1(uint64_t a1, _DWORD *a2)
{
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t FigVCPVisualContextGroupSourceCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPVisualContextGroupSourceCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPVisualContextGroupSourceCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPVisualContextGroupSourceCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPVisualContextGroupSourceCreate_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPVisualContextGroupSourceCreate_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPVisualContextGroupSourceCreate_cold_7(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPBufferQueueSourceCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPBufferQueueSourceCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPBufferQueueSourceCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPBufferQueueSourceCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figvcp_pendingFrame_createCommon_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figvcp_pendingFrame_createCommon_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figvcp_pendingFrame_createCommon_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figvcp_pendingFrame_createCommon_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figvcp_pendingFrame_createCommon_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_7(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_8(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameCreate_cold_9(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPPendingFrameGenerateHDRMetadataAndAttachToRenderedFrame_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPTimingSetTimebase_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPTimingSetLoopTimeRange_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPTimingCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPTimingCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPTimingCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputDurationWaterLevelCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputDurationWaterLevelCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputDurationWaterLevelCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputDurationWaterLevelCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputDurationWaterLevelCreate_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputSetOutputDurationHighAndLowWaterLevels_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputSetOutputDurationHighAndLowWaterLevels_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputSetOutputDurationHighAndLowWaterLevels_cold_3(uint64_t a1, const void *a2, void *a3, void *a4)
{
  FigSimpleMutexLock();
  v8 = *(a1 + 96);
  *(a1 + 96) = a2;
  if (a2)
  {
    CFRetain(a2);
  }

  if (v8)
  {
    CFRelease(v8);
  }

  result = FigSimpleMutexUnlock();
  *a4 = *a3;
  return result;
}

uint64_t FigVCPOutputSetOutputDurationHighAndLowWaterLevels_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputSetOutputDurationHighAndLowWaterLevels_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputSetOutputDurationHighAndLowWaterLevels_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputSetHDRDisplayMetadataPolicy_cold_1(uint64_t a1, const void *a2, CFTypeRef *a3, _DWORD *a4)
{
  FigSimpleMutexLock();
  if (FigCFEqual())
  {
    v8 = *a3;
    *a3 = a2;
    if (a2)
    {
      CFRetain(a2);
    }

    if (v8)
    {
      CFRelease(v8);
    }

    v9 = *(a1 + 64);
    *(a1 + 40) |= 1u;
    if (v9 || (LODWORD(v10) = VTHDRMetadataGenerationSessionCreate(), !v10))
    {
      if (*(a1 + 56))
      {
        LODWORD(v10) = 0;
      }

      else
      {
        LODWORD(v10) = VTHDRImageStatisticsGenerationSessionCreate();
      }
    }
  }

  else
  {
    *(a1 + 40) = 0;
    if (*a3)
    {
      CFRelease(*a3);
      *a3 = 0;
    }

    v11 = *(a1 + 64);
    if (v11)
    {
      CFRelease(v11);
      *(a1 + 64) = 0;
    }

    v10 = *(a1 + 56);
    if (v10)
    {
      CFRelease(v10);
      LODWORD(v10) = 0;
      *(a1 + 56) = 0;
    }
  }

  *a4 = v10;

  return FigSimpleMutexUnlock();
}

uint64_t FigVCPOutputEnqueueTaggedBufferGroup_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPSourceArrayCreateEmpty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPSourceArrayCreateEmpty_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCoreAnimationPostProcessorCopyPixelBufferAtTime_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCoreAnimationPostProcessorCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCoreAnimationPostProcessorCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCoreAnimationPostProcessorCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCoreAnimationPostProcessorCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCoreAnimationPostProcessorCreate_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPInstructionSourceCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPInstructionSourceCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPInstructionSourceCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputConformerCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPOutputConformerCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void fvcp_compositorHost_FrameCompletion_cold_1(uint64_t a1, uint64_t a2)
{
  FigSignalErrorAtGM();

  FigVCPCompositorHostRemovePendingFrameIfNotPendingOrCompleted(a2, 0);
}

uint64_t FigVCPCompositorHostStartAcceptingRequest_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCompositorHostCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCompositorHostCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVCPCompositorHostCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_preprocessParameters_setPixelBufferAttributes_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_preprocessParameters_setYCbCrMatrix_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_preprocessParameters_setColorPrimaries_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_preprocessParameters_setTransferFunction_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_preprocessParameters_setPoolSharingID_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_vcg_source_Invalidate_cold_1(uint64_t a1, uint64_t a2)
{
  v2 = 0;
  v3 = a2 - 1;
  do
  {
    ValueAtIndex = FigCFArrayGetValueAtIndex();
    result = FigVCPSourceInvalidate(ValueAtIndex);
    if (result)
    {
      v6 = 1;
    }

    else
    {
      v6 = v3 == v2;
    }

    ++v2;
  }

  while (!v6);
  return result;
}

uint64_t fvcp_vcg_source_CopyConformedTimedImages_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_vcg_source_CopyConformedTimedImages_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_vcg_source_CopyConformedTimedImages_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_vcg_source_CopyConformedTimedImages_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_vcg_source_CopyConformedTimedImages_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_vcg_source_CopyConformedTimedImages_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_ca_source_CheckImageAvailability_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_outputConformer_setDestinationPixelBufferDesiredAttributes_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_outputConformer_setDestinationPixelTransferProperties_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_outputConformer_setDestinationPixelBufferDesiredYCbCrMatrix_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_outputConformer_setDestinationPixelBufferDesiredColorPrimaries_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fvcp_outputConformer_setDestinationPixelBufferDesiredTransferFunction_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMetricItemPlaybackEndEventDeserializeAndCopy(void *a1, void *a2)
{
  v13 = *MEMORY[0x1E6960C70];
  v14 = *(MEMORY[0x1E6960C70] + 16);
  v11 = 0;
  cf = 0;
  if (a1 && a2)
  {
    CMTime = FigXPCMessageGetCMTime();
    if (!CMTime)
    {
      CMTime = FigXPCMessageCopyCFDate();
      if (!CMTime)
      {
        CMTime = FigXPCMessageCopyCFString();
        if (!CMTime)
        {
          int64 = xpc_dictionary_get_int64(a1, "Bitrate");
          AllocatorForMedia = FigGetAllocatorForMedia();
          v9 = v13;
          v10 = v14;
          CMTime = FigMetricItemPlaybackEndEventCreateInternal(AllocatorForMedia, &v9, cf, v11, int64, a2);
        }
      }
    }
  }

  else
  {
    CMTime = FigSignalErrorAtGM();
  }

  v7 = CMTime;
  if (cf)
  {
    CFRelease(cf);
  }

  if (v11)
  {
    CFRelease(v11);
  }

  return v7;
}

uint64_t mepe_serialize(uint64_t a1, void *a2)
{
  if (a1 && a2)
  {
    v4 = *(*(CMBaseObjectGetVTable() + 16) + 24);
    if (v4)
    {
      v5 = v4(a1);
    }

    else
    {
      v5 = -12782;
    }

    xpc_dictionary_set_int64(a2, "EventID", v5);
    v6 = *(*(CMBaseObjectGetVTable() + 16) + 56);
    if (v6)
    {
      v6(&v15, a1);
    }

    else
    {
      v15 = *MEMORY[0x1E6960C70];
      v16 = *(MEMORY[0x1E6960C70] + 16);
    }

    v7 = FigXPCMessageSetCMTime();
    if (v7)
    {
      return v7;
    }

    v8 = *(*(CMBaseObjectGetVTable() + 16) + 32);
    if (v8)
    {
      v8(a1);
    }

    v7 = FigXPCMessageSetCFDate();
    if (v7)
    {
      return v7;
    }

    v9 = *(*(CMBaseObjectGetVTable() + 16) + 40);
    if (v9)
    {
      v10 = v9(a1);
    }

    else
    {
      v10 = 0;
    }

    v11 = FigXPCMessageSetCFString();
    if (!v11)
    {
      v12 = *(*(CMBaseObjectGetVTable() + 64) + 8);
      if (v12)
      {
        v13 = v12(a1);
      }

      else
      {
        v13 = 0;
      }

      xpc_dictionary_set_int64(a2, "Bitrate", v13);
    }

    if (v10)
    {
      CFRelease(v10);
    }

    return v11;
  }

  else
  {

    return FigSignalErrorAtGM();
  }
}

uint64_t FigMetricItemPlaybackEndEventCreateInternal_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t mepe_setSessionID_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t mepe_setMediaTime_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHTTPRequestCreate(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, const __CFDictionary *a7, unsigned int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15)
{
  cf = 0;
  if (!a7)
  {
    return 4294954516;
  }

  TypeID = CFDictionaryGetTypeID();
  if (TypeID == CFGetTypeID(a7))
  {
    Value = CFDictionaryGetValue(a7, @"FHRP_StorageSession");
    if (Value)
    {
      v19 = Value;
      v20 = *(*(CMBaseObjectGetVTable() + 16) + 40);
      if (!v20)
      {
        return 4294954510;
      }

      v20(v19, a6, 0, &cf);
      v21 = cf;
      if (!cf)
      {
        return 4294954510;
      }

      v22 = *(*(CMBaseObjectGetVTable() + 16) + 8);
      if (v22)
      {
        memset(v32, 0, 112);
        v23 = v22(v21, a1, a2, a3, a4, a5, a7, a8, v32, a9, a10, a11, a12, a13, a14, a15);
      }

      else
      {
        v23 = 4294954514;
      }

      if (cf)
      {
        CFRelease(cf);
      }

      return v23;
    }

    return 4294954516;
  }

  return FigSignalErrorAtGM();
}

uint64_t FigTTMLSerializerCreateForByteStream_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLSerializerCreateForByteStream_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLSerializerCreateForByteStream_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLSerializerCreateForByteStream_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_CopyProperty_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_CopyProperty_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_CopyProperty_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_SetProperty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_SetProperty_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_120();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_SetProperty_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_SetProperty_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_StartElement_cold_1(uint64_t a1, _DWORD *a2)
{
  OUTLINED_FUNCTION_0_120();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_SetAttribute_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_120();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_EndElement_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_120();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_AddText_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_120();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLSerializerForByteStream_Flush_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_120();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCPECryptorCreateCryptorFromSerializedRecipe(const void *a1, CFDataRef theData, void *a3)
{
  v11 = 0;
  BytePtr = CFDataGetBytePtr(theData);
  if (CFDataGetLength(theData) != 24)
  {
    return 4294949724;
  }

  v7 = *BytePtr;
  v8 = *(BytePtr + 2);
  v9 = *(BytePtr + 4);
  switch(v9)
  {
    case 3:
      result = FigPKDMSECPELimitedCryptorCreateWithExternalProtectionMethods(v7, v8, a1, &v11);
      if (result)
      {
        return result;
      }

      break;
    case 2:
      result = FigPKDCPELimitedCryptorCreateWithExternalProtectionMethods(v7, v8, a1, &v11);
      if (result)
      {
        return result;
      }

      break;
    case 1:
      result = FigFairPlayCPELimitedCryptorCreateWithExternalProtectionMethods(v7, v8, a1, &v11);
      if (result)
      {
        return result;
      }

      break;
    default:
      result = 4294949726;
      break;
  }

  *a3 = v11;
  return result;
}

uint64_t FigMediaProcessorCreateForCaptionConversionWithFormatWriter(uint64_t a1, int a2, int a3, const void *a4, const void *a5, uint64_t a6, __int128 *a7, uint64_t a8, uint64_t a9, uint64_t a10, int a11, uint64_t *a12)
{
  v27 = 0;
  v25 = 0;
  cf = 0;
  v24 = 0;
  if (a4 && a5)
  {
    v18 = FigSampleBufferProcessorCreateForCaptionConverter(a1, a2, a3, 0, &v27);
    if (!v18)
    {
      v18 = FigSampleBufferProviderCreateForBufferQueue(a1, a4, &cf);
      if (!v18)
      {
        v23 = *a7;
        OUTLINED_FUNCTION_0_199(a9);
        v18 = FigSampleBufferConsumerCreateForFormatWriter(a5, a6, &v23, a8, &v22, v19, &v25);
        if (!v18)
        {
          v18 = FigActivitySchedulerCreateForNewThread(a1, a11, @"com.apple.coremedia.mediaprocessor.captionconversion", &v24);
          if (!v18)
          {
            v18 = FigMediaProcessorCreate(a1, v27, cf, v25, v24, a12);
          }
        }
      }
    }
  }

  else
  {
    OUTLINED_FUNCTION_1_19();
    v18 = FigSignalErrorAtGM();
  }

  v20 = v18;
  if (cf)
  {
    CFRelease(cf);
  }

  if (v24)
  {
    CFRelease(v24);
  }

  if (v27)
  {
    CFRelease(v27);
  }

  if (v25)
  {
    CFRelease(v25);
  }

  return v20;
}

uint64_t FigMediaProcessorCreateForCaptionConversionWithBufferQueue(uint64_t a1, int a2, int a3, const void *a4, uint64_t a5, uint64_t a6, __int128 *a7, uint64_t a8, uint64_t a9, uint64_t a10, int a11, uint64_t *a12)
{
  v25 = 0;
  v26 = 0;
  cf = 0;
  v24 = 0;
  if (a4 && a5)
  {
    v17 = FigSampleBufferProcessorCreateForCaptionConverter(a1, a2, a3, 0, &v26);
    if (!v17)
    {
      v17 = FigSampleBufferProviderCreateForBufferQueue(a1, a4, &v25);
      if (!v17)
      {
        v22 = *a7;
        OUTLINED_FUNCTION_0_199(a9);
        v17 = FigSampleBufferConsumerCreateForBufferQueue2(a5, &v22, a8, &v21, v18, &v24);
        if (!v17)
        {
          v17 = FigActivitySchedulerCreateForNewThread(a1, a11, @"com.apple.coremedia.mediaprocessor.captionconversion", &cf);
          if (!v17)
          {
            v17 = FigMediaProcessorCreate(a1, v26, v25, v24, cf, a12);
          }
        }
      }
    }
  }

  else
  {
    OUTLINED_FUNCTION_1_19();
    v17 = FigSignalErrorAtGM();
  }

  v19 = v17;
  if (v25)
  {
    CFRelease(v25);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v26)
  {
    CFRelease(v26);
  }

  if (v24)
  {
    CFRelease(v24);
  }

  return v19;
}

uint64_t AudioSampleBufferSplitterCreate(void *a1)
{
  if (a1)
  {
    v2 = malloc_type_calloc(1uLL, 0x58uLL, 0x1000040CF7A7506uLL);
    if (v2)
    {
      v3 = v2;
      result = 0;
      *a1 = v3;
    }

    else
    {
      return 4294951316;
    }
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t AudioSampleBufferSplitterCreateSplitSampleBufferArray(uint64_t a1, CMSampleBufferRef sbuf, _DWORD *a3, CFMutableArrayRef *a4)
{
  v7 = v6;
  v207 = *MEMORY[0x1E69E9840];
  if (!a1)
  {
    goto LABEL_200;
  }

  v8 = sbuf;
  if (!sbuf)
  {
    goto LABEL_200;
  }

  v9 = a4;
  if (!a4)
  {
    goto LABEL_200;
  }

  FormatDescription = CMSampleBufferGetFormatDescription(sbuf);
  if (CMFormatDescriptionGetMediaType(FormatDescription) != 1936684398)
  {
    goto LABEL_200;
  }

  v13 = *a1;
  v14 = MEMORY[0x1E695E480];
  cf = v8;
  if (*a1 == 3)
  {
    NumSamples = CMSampleBufferGetNumSamples(v8);
    v199.value = 0;
    v25 = CMSampleBufferGetFormatDescription(v8);
    RichestDecodableFormat = CMAudioFormatDescriptionGetRichestDecodableFormat(v25);
    memset(&v204, 0, sizeof(v204));
    if (!RichestDecodableFormat)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_114();
      FigSignalErrorAtGM();
      OUTLINED_FUNCTION_12_68();
      goto LABEL_32;
    }

    v4 = RichestDecodableFormat;
    CMTimeMake(&v204, RichestDecodableFormat->mASBD.mFramesPerPacket, RichestDecodableFormat->mASBD.mSampleRate);
    v27 = *v14;
    Mutable = CFArrayCreateMutable(v27, 0, MEMORY[0x1E695E9C0]);
    if (!Mutable)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_114();
      goto LABEL_215;
    }

    if (*(v4 + 8) == 1819304813 || !*(v4 + 20))
    {
      OUTLINED_FUNCTION_17_46();
      v7 = 0;
LABEL_30:
      NumSamples = 0;
      v5 = 0;
      goto LABEL_31;
    }

    if (NumSamples == 1)
    {
      memset(&time, 0, sizeof(time));
      if (!CMSampleBufferGetSampleTimingInfoArray(v8, 1, &time, 0))
      {
        OUTLINED_FUNCTION_29();
        if (v115)
        {
          OUTLINED_FUNCTION_5_126();
          OUTLINED_FUNCTION_14_64();
          v7 = CMTimeCompare(&time1, &time2) > 0;
        }

        else
        {
          v7 = 0;
        }

        OUTLINED_FUNCTION_17_46();
        goto LABEL_30;
      }

      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_114();
LABEL_215:
      FigSignalErrorAtGM();
      OUTLINED_FUNCTION_12_68();
      goto LABEL_33;
    }

    v5 = malloc_type_calloc(NumSamples, 0x48uLL, 0x1000040FF89C88EuLL);
    time2.value = 0;
    if (CMSampleBufferGetSampleTimingInfoArray(v8, NumSamples, v5, &time2.value) || (time2.value != 1 ? (v115 = time2.value == NumSamples) : (v115 = 1), !v115))
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_114();
      v159 = FigSignalErrorAtGM();
      goto LABEL_226;
    }

    if (time2.value != 1)
    {
      allocatorb = v27;
      v116 = malloc_type_calloc(NumSamples, 8uLL, 0x100004000313F17uLL);
      v117 = NumSamples;
      NumSamples = v116;
      v181 = v117;
      v118 = v117 < 1;
      v119 = v117 - 1;
      if (v118)
      {
        v7 = 0;
        if ((*(a1 + 80) & 0x8000000000000000) != 0)
        {
          goto LABEL_186;
        }

        v143.location = 0;
        goto LABEL_194;
      }

      v167 = a3;
      v170 = v119;
      v120 = 0;
      v121 = 0;
      v7 = 0;
      v176 = v5;
      while ((v5->duration.flags & 0x1D) == 1)
      {
        OUTLINED_FUNCTION_1_181();
        v122 = OUTLINED_FUNCTION_0_200();
        if (CMTimeCompare(v122, v123) >= 1)
        {
          OUTLINED_FUNCTION_1_181();
          v146 = CMTimeCopyDescription(v27, &time.duration);
          OUTLINED_FUNCTION_10_74();
          v145 = CMTimeCopyDescription(allocatorb, v147);
          v7 |= 1u;
          if (v146)
          {
            CFRelease(v146);
          }

          v5 = v176;
          if (v145)
          {
            goto LABEL_163;
          }

          goto LABEL_164;
        }

        OUTLINED_FUNCTION_1_181();
        v124 = OUTLINED_FUNCTION_0_200();
        if (CMTimeCompare(v124, v125) < 0)
        {
          v126 = v9;
          v127 = (NumSamples + 8 * v121);
          *v127 = v120;
          if (v121 >= 1)
          {
            *&time.duration.value = *&v5->duration.value;
            time.duration.epoch = v5->duration.epoch;
            v128 = OUTLINED_FUNCTION_0_200();
            if (asbs_SampleDurationIsCuriouslyShortOfItsExpectedDuration(v128, v129))
            {
              v130 = *(v127 - 1);
              if (v120 - v130 <= 3)
              {
                v131 = &v176[v130];
                *&time.duration.value = *&v131->duration.value;
                time.duration.epoch = v131->duration.epoch;
                v132 = OUTLINED_FUNCTION_0_200();
                if (asbs_SampleDurationIsCuriouslyShortOfItsExpectedDuration(v132, v133))
                {
                  v7 |= 2u;
                }
              }
            }
          }

          ++v121;
          v9 = v126;
          v8 = cf;
        }

        ++v120;
        ++v5;
        if (v181 == v120)
        {
          v134 = 0;
LABEL_174:
          v5 = v176;
LABEL_175:
          v151 = *(a1 + 80);
          if (v121 > v151 && v151 != 0)
          {
            v134 = 1;
          }

          if (v121 == 1)
          {
            if (*NumSamples == v170 || (v134 & 1) != 0)
            {
LABEL_185:
              a3 = v167;
LABEL_186:
              OUTLINED_FUNCTION_17_46();
LABEL_31:
              v4 = 0;
              *v9 = Mutable;
LABEL_32:
              Mutable = 0;
LABEL_33:
              if (v199.value)
              {
                CFRelease(v199.value);
              }

              if (Mutable)
              {
                CFRelease(Mutable);
              }

              free(v5);
              free(NumSamples);
              if (v4 || !a3)
              {
                return v4;
              }

LABEL_123:
              *a3 = v7;
              return v4;
            }

LABEL_188:
            v153 = 0;
            v143.location = 0;
            while (1)
            {
              v143.length = *(NumSamples + 8 * v153) - v143.location + 1;
              v154 = CMSampleBufferCopySampleBufferForRange(allocatorb, v8, v143, &v199);
              if (v154)
              {
                break;
              }

              CFArrayAppendValue(Mutable, v199.value);
              if (v199.value)
              {
                CFRelease(v199.value);
                v199.value = 0;
              }

              v143.location = *(NumSamples + 8 * v153++) + 1;
              if (v121 == v153)
              {
                goto LABEL_193;
              }
            }

            v4 = v154;
            a3 = v167;
LABEL_227:
            v7 = 0;
            goto LABEL_33;
          }

          if (v134)
          {
            goto LABEL_185;
          }

          if (v121 > 0)
          {
            goto LABEL_188;
          }

          v143.location = 0;
LABEL_193:
          a3 = v167;
LABEL_194:
          if (v181 <= v143.location)
          {
            goto LABEL_31;
          }

          v143.length = v181 - v143.location;
          v155 = CMSampleBufferCopySampleBufferForRange(allocatorb, v8, v143, &v199);
          if (!v155)
          {
            CFArrayAppendValue(Mutable, v199.value);
            if (v199.value)
            {
              CFRelease(v199.value);
              v199.value = 0;
            }

            goto LABEL_31;
          }

          v4 = v155;
          goto LABEL_227;
        }
      }

      OUTLINED_FUNCTION_1_181();
      v144 = CMTimeCopyDescription(v27, &time.duration);
      if (!v144)
      {
        v134 = 1;
        goto LABEL_174;
      }

      v145 = v144;
      v5 = v176;
LABEL_163:
      CFRelease(v145);
LABEL_164:
      v134 = 1;
      goto LABEL_175;
    }

    OUTLINED_FUNCTION_29();
    if (!v115)
    {
      OUTLINED_FUNCTION_1_181();
      v142 = CMTimeCopyDescription(v27, &time.duration);
      v141 = v142;
      v7 = 0;
      if (!v142)
      {
        goto LABEL_168;
      }

      goto LABEL_155;
    }

    OUTLINED_FUNCTION_1_181();
    v135 = OUTLINED_FUNCTION_0_200();
    if (CMTimeCompare(v135, v136) < 0)
    {
      v148 = *(a1 + 80);
      if (!v148 || NumSamples <= v148)
      {
        if (NumSamples >= 2)
        {
          OUTLINED_FUNCTION_1_181();
          v149 = OUTLINED_FUNCTION_0_200();
          if (CMTimeCompare(v149, v150) < 0)
          {
            *&time.duration.value = *&v5->duration.value;
            time.duration.epoch = v5->duration.epoch;
            v156 = OUTLINED_FUNCTION_0_200();
            v7 = 2 * asbs_SampleDurationIsCuriouslyShortOfItsExpectedDuration(v156, v157);
          }

          else
          {
            v7 = 0;
          }

          v158 = 0;
          while (1)
          {
            v213.location = v158;
            v213.length = 1;
            v159 = CMSampleBufferCopySampleBufferForRange(v27, v8, v213, &v199);
            if (v159)
            {
              break;
            }

            CFArrayAppendValue(Mutable, v199.value);
            if (v199.value)
            {
              CFRelease(v199.value);
              v199.value = 0;
            }

            if (NumSamples == ++v158)
            {
              goto LABEL_169;
            }
          }

LABEL_226:
          v4 = v159;
          NumSamples = 0;
          goto LABEL_227;
        }

        v7 = 0;
LABEL_169:
        NumSamples = 0;
        goto LABEL_31;
      }
    }

    else
    {
      OUTLINED_FUNCTION_1_181();
      v137 = OUTLINED_FUNCTION_0_200();
      if (CMTimeCompare(v137, v138) >= 1)
      {
        OUTLINED_FUNCTION_1_181();
        v139 = CMTimeCopyDescription(v27, &time.duration);
        OUTLINED_FUNCTION_10_74();
        v141 = CMTimeCopyDescription(v27, v140);
        if (v139)
        {
          CFRelease(v139);
        }

        v7 = 1;
        if (!v141)
        {
          goto LABEL_168;
        }

LABEL_155:
        CFRelease(v141);
LABEL_168:
        OUTLINED_FUNCTION_17_46();
        goto LABEL_169;
      }
    }

    v7 = 0;
    goto LABEL_168;
  }

  if (v13 == 2)
  {
    v20 = CMSampleBufferGetNumSamples(v8);
    SampleAttachmentsArray = CMSampleBufferGetSampleAttachmentsArray(v8, 0);
    v22 = SampleAttachmentsArray;
    if (SampleAttachmentsArray)
    {
      Count = CFArrayGetCount(SampleAttachmentsArray);
    }

    else
    {
      Count = 0;
    }

    time.duration.value = 0;
    v29 = CFArrayCreateMutable(*v14, 0, MEMORY[0x1E695E9C0]);
    if (v29)
    {
      if (Count)
      {
        v30 = v9;
        if (v20 < 2)
        {
          v31 = 0;
        }

        else
        {
          v31 = 0;
          for (i = 1; i != v20; ++i)
          {
            LOBYTE(v204.value) = 0;
            if (i < Count)
            {
              CFArrayGetValueAtIndex(v22, i);
              FigCFDictionaryGetBooleanIfPresent();
              if (LOBYTE(v204.value))
              {
                continue;
              }
            }

            v33 = CFGetAllocator(v8);
            v209.length = i - v31;
            v209.location = v31;
            v34 = CMSampleBufferCopySampleBufferForRange(v33, v8, v209, &time);
            if (v34)
            {
              goto LABEL_211;
            }

            CFArrayAppendValue(v29, time.duration.value);
            v31 = i;
            if (time.duration.value)
            {
              CFRelease(time.duration.value);
              time.duration.value = 0;
              v31 = i;
            }
          }
        }

        v38 = CFGetAllocator(v8);
        v211.length = v20 - v31;
        v211.location = v31;
        v34 = CMSampleBufferCopySampleBufferForRange(v38, v8, v211, &time);
        if (!v34)
        {
          CFArrayAppendValue(v29, time.duration.value);
          v9 = v30;
          if (time.duration.value)
          {
            CFRelease(time.duration.value);
            time.duration.value = 0;
          }

          goto LABEL_64;
        }
      }

      else
      {
        if (v20 < 1)
        {
LABEL_64:
          v4 = 0;
          *v9 = v29;
          v29 = 0;
LABEL_65:
          if (time.duration.value)
          {
            CFRelease(time.duration.value);
          }

          if (v29)
          {
            CFRelease(v29);
          }

LABEL_121:
          if (v4)
          {
            return v4;
          }

LABEL_122:
          v7 = 0;
          if (!a3)
          {
            return v4;
          }

          goto LABEL_123;
        }

        v35 = 0;
        while (1)
        {
          v36 = CFGetAllocator(v8);
          v210.location = v35;
          v210.length = 1;
          v34 = CMSampleBufferCopySampleBufferForRange(v36, v8, v210, &time);
          if (v34)
          {
            break;
          }

          CFArrayAppendValue(v29, time.duration.value);
          if (time.duration.value)
          {
            CFRelease(time.duration.value);
            time.duration.value = 0;
          }

          if (v20 == ++v35)
          {
            goto LABEL_64;
          }
        }
      }
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_114();
      v34 = FigSignalErrorAtGM();
    }

LABEL_211:
    v4 = v34;
    goto LABEL_65;
  }

  if (v13 != 1)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_114();
    v4 = FigSignalErrorAtGM();
    goto LABEL_122;
  }

  if (*(a1 + 16) & 1) != 0 && (*(a1 + 40))
  {
    if ((*(a1 + 64) & 1) == 0)
    {
      memset(&time, 0, 24);
      CMSampleBufferGetOutputPresentationTimeStamp(&time.duration, v8);
      OUTLINED_FUNCTION_5_126();
      asbs_calculateNextCumulatedSegmentInterval(a1, &time1, &v204);
      OUTLINED_FUNCTION_15_55();
    }

    v15 = CMSampleBufferGetNumSamples(v8);
    memset(&time2, 0, sizeof(time2));
    CMSampleBufferGetOutputPresentationTimeStamp(&time2, v8);
    memset(&v199, 0, sizeof(v199));
    CMSampleBufferGetOutputDuration(&v199, v8);
    sampleBufferOut = 0;
    time.duration.value = 0;
    OutputSampleTimingInfoArray = CMSampleBufferGetOutputSampleTimingInfoArray(v8, 0, 0, &time.duration.value);
    if (OutputSampleTimingInfoArray)
    {
      v4 = OutputSampleTimingInfoArray;
      p_value = 0;
    }

    else
    {
      v164 = v9;
      v166 = a3;
      if (time.duration.value)
      {
        if (time.duration.value > 0x38E38E38E38E38EuLL)
        {
LABEL_15:
          fig_log_get_emitter();
          OUTLINED_FUNCTION_2_114();
          v17 = FigSignalErrorAtGM();
          p_value = 0;
          if (v17)
          {
            v4 = v17;
            v49 = 0;
LABEL_115:
            a3 = v166;
LABEL_116:
            if (sampleBufferOut)
            {
              CFRelease(sampleBufferOut);
            }

            if (v49)
            {
              CFRelease(v49);
            }

            free(p_value);
            goto LABEL_121;
          }

          value = 0;
LABEL_73:
          v41 = CFArrayCreateMutable(*v14, 0, MEMORY[0x1E695E9C0]);
          v49 = v41;
          if (v41)
          {
            v162 = v6;
            if (v15 >= 1)
            {
              v50 = 0;
              v51 = *MEMORY[0x1E6960C70];
              *allocator = *MEMORY[0x1E6960C70];
              v179 = *(MEMORY[0x1E6960C70] + 16);
              v174 = v41;
              while (1)
              {
                OUTLINED_FUNCTION_11_71(v41, v42, v43, v44, v45, v46, v47, v48, v160, v162, v164, v166, v168, v171, v172, v174, cf, v179, allocator[0], allocator[1], v185, v186, v187, v188, v190, v192, v193, v194, v195, v196, 0, 0, 0, sampleBufferOut, v199.value, *&v199.timescale, v199.epoch, v200, v51, time2.value);
                v204 = *(a1 + 4);
                v52 = OUTLINED_FUNCTION_7_98();
                CMTimeSubtract(v54, v52, v53);
                *&time.duration.value = *v197;
                time.duration.epoch = *&v197[16];
                v204 = v199;
                v55 = OUTLINED_FUNCTION_7_98();
                CMTimeAdd(v57, v55, v56);
                *v191 = *allocatora;
                *&v191[16] = v180;
                OUTLINED_FUNCTION_13_54();
                memset(&v204, 0, sizeof(v204));
                v58 = OUTLINED_FUNCTION_7_98();
                v60 = CMTimeCompare(v58, v59);
                if (v60 <= 0)
                {
                  OUTLINED_FUNCTION_13_54();
                  v204 = *v197;
                  v61 = OUTLINED_FUNCTION_7_98();
                  CMTimeSubtract(v63, v61, v62);
                }

                else
                {
                  *v191 = v199;
                }

                if (value == 1)
                {
                  break;
                }

                v73 = MEMORY[0x1E6960CC0];
                v74 = *MEMORY[0x1E6960CC0];
                *&time.duration.value = *MEMORY[0x1E6960CC0];
                v75 = *(MEMORY[0x1E6960CC0] + 16);
                time.duration.epoch = v75;
                if (value <= v50)
                {
                  v76 = 0;
                  v84 = v50;
                  v8 = cfa;
LABEL_94:
                  *&time1.value = v74;
                  time1.epoch = v75;
                  v86 = value - v84;
                  if (value > v84)
                  {
                    v87 = &p_value[9 * v84];
                    do
                    {
                      time.duration = time1;
                      v88 = *v87;
                      v204.epoch = v87[2];
                      *&v204.value = v88;
                      v89 = OUTLINED_FUNCTION_7_98();
                      CMTimeAdd(v91, v89, v90);
                      v87 += 9;
                      --v86;
                    }

                    while (v86);
                    v49 = v175;
                    goto LABEL_103;
                  }

LABEL_104:
                  *&time.duration.value = *v73;
                  time.duration.epoch = *(v73 + 16);
                  v204 = time1;
                  v95 = OUTLINED_FUNCTION_7_98();
                  if (!CMTimeCompare(v95, v96))
                  {
                    v76 = v15 - v50;
                  }

                  goto LABEL_106;
                }

                v169 = v74;
                v76 = 0;
                v77 = &p_value[9 * v50];
                while (1)
                {
                  OUTLINED_FUNCTION_16_52();
                  time1 = *v191;
                  v78 = OUTLINED_FUNCTION_9_74();
                  if ((CMTimeCompare(v78, v79) & 0x80000000) == 0)
                  {
                    break;
                  }

                  OUTLINED_FUNCTION_16_52();
                  v80 = *v77;
                  time1.epoch = v77[2];
                  *&time1.value = v80;
                  v81 = OUTLINED_FUNCTION_9_74();
                  CMTimeAdd(v83, v81, v82);
                  ++v76;
                  v77 += 9;
                  if (value - v50 == v76)
                  {
                    v76 = value - v50;
                    break;
                  }
                }

                v84 = v76 + v50;
                v49 = v175;
                v8 = cfa;
                v74 = v169;
                if (v76 + v50 < v15)
                {
                  v73 = MEMORY[0x1E6960CC0];
                  goto LABEL_94;
                }

LABEL_106:
                if (v76 <= 0)
                {
                  fig_log_get_emitter();
                  goto LABEL_219;
                }

                v97 = CFGetAllocator(v8);
                v212.location = v50;
                v212.length = v76;
                v98 = CMSampleBufferCopySampleBufferForRange(v97, v8, v212, &sampleBufferOut);
                if (v98)
                {
                  goto LABEL_220;
                }

                OUTLINED_FUNCTION_11_71(sampleBufferOut, v99, v100, v101, v102, v103, v104, v105, v161, v163, v165, v166, v169, *(&v169 + 1), v173, v175, cfa, v180, allocatora[0], allocatora[1], *v191, *&v191[8], *&v191[16], v189, *v191, *&v191[8], *&v191[16], 0, 0, 0, *v197, *&v197[8], *&v197[16], sampleBufferOut, v199.value, *&v199.timescale, v199.epoch, v200, v106, time2.value);
                v98 = CMSampleBufferSetOutputPresentationTimeStamp(v107, &time.duration);
                if (v98)
                {
                  goto LABEL_220;
                }

                CFArrayAppendValue(v49, sampleBufferOut);
                memset(&time, 0, 24);
                CMSampleBufferGetOutputDuration(&time.duration, sampleBufferOut);
                *&time1.value = *&time2.value;
                v108 = OUTLINED_FUNCTION_6_115(time2.epoch);
                CMTimeAdd(v110, v108, v109);
                OUTLINED_FUNCTION_14_64();
                *&time1.value = *&v199.value;
                v111 = OUTLINED_FUNCTION_6_115(v199.epoch);
                CMTimeSubtract(v113, v111, v112);
                v51 = *&v204.value;
                v199 = v204;
                v41 = sampleBufferOut;
                if (sampleBufferOut)
                {
                  CFRelease(sampleBufferOut);
                  sampleBufferOut = 0;
                }

                if (v60 <= 0)
                {
                  time1 = time2;
                  asbs_calculateNextCumulatedSegmentInterval(a1, &time1, &v204);
                  v51 = OUTLINED_FUNCTION_15_55();
                }

                v50 += v76;
                if (v50 >= v15)
                {
                  goto LABEL_114;
                }
              }

              v205 = *p_value;
              v64 = *(p_value + 3);
              v206 = *(p_value + 2);
              v65 = p_value[2];
              *&time.duration.value = *allocatora;
              time.duration.epoch = v180;
              if ((v64 & 0x1D) == 1 && (v66 = *(p_value + 2), v204.value = *p_value, v204.timescale = v66, v204.flags = v64, v204.epoch = v65, v169 = *MEMORY[0x1E6960CC0], *&time1.value = *MEMORY[0x1E6960CC0], v67 = *(MEMORY[0x1E6960CC0] + 16), time1.epoch = v67, v68 = OUTLINED_FUNCTION_9_74(), CMTimeCompare(v68, v69)))
              {
                v204 = *v191;
                time1.value = v205;
                time1.timescale = v206;
                time1.flags = v64;
                time1.epoch = v65;
                OUTLINED_FUNCTION_9_74();
                v70 = CMTimeDivide();
                OUTLINED_FUNCTION_29();
                if (v115)
                {
                  *&v204.value = v169;
                  v204.epoch = v67;
                  OUTLINED_FUNCTION_5_126();
                  v71 = OUTLINED_FUNCTION_9_74();
                  v92 = CMTimeCompare(v71, v72) >> 31;
                }

                else
                {
                  v92 = 0;
                }

                v49 = v175;
                v85 = MEMORY[0x1E6960CC0];
                v93 = v92 + v70;
                if (v15 - v50 >= v93)
                {
                  v76 = v93;
                }

                else
                {
                  v76 = v15 - v50;
                }
              }

              else
              {
                v76 = v15 - v50;
                v49 = v175;
                v85 = MEMORY[0x1E6960CC0];
              }

              if (v15 <= v76 + v50)
              {
                goto LABEL_106;
              }

              time1 = *v85;
              v94 = *p_value;
              time.duration.epoch = p_value[2];
              *&time.duration.value = v94;
              CMTimeMultiply(&time1, &time.duration, v15 - (v76 + v50));
LABEL_103:
              v73 = MEMORY[0x1E6960CC0];
              goto LABEL_104;
            }

LABEL_114:
            v4 = 0;
            *v164 = v49;
            v49 = 0;
          }

          else
          {
            fig_log_get_emitter();
            OUTLINED_FUNCTION_2_114();
LABEL_219:
            v98 = FigSignalErrorAtGM();
LABEL_220:
            v4 = v98;
          }

          goto LABEL_115;
        }

        v37 = 72 * time.duration.value;
      }

      else
      {
        v37 = 0;
      }

      v39 = malloc_type_malloc(v37, 0x1000040FF89C88EuLL);
      if (!v39)
      {
        goto LABEL_15;
      }

      p_value = &v39->duration.value;
      v40 = CMSampleBufferGetOutputSampleTimingInfoArray(v8, time.duration.value, v39, 0);
      if (!v40)
      {
        value = time.duration.value;
        goto LABEL_73;
      }

      v4 = v40;
    }

    free(p_value);
    p_value = 0;
    v49 = 0;
    goto LABEL_116;
  }

LABEL_200:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_4_144();

  return FigSignalErrorAtGM();
}

uint64_t AudioSampleBufferSplitterSetSplitMethod_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t AudioSampleBufferSplitterSetMaxNumberOfSplitSampleBuffers_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t AudioSampleBufferSplitterSetMaxNumberOfSplitSampleBuffers_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t AudioSampleBufferSplitterSetInitialSegmentStartTimeAndSegmentInterval_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t AudioSampleBufferSplitterSetInitialSegmentStartTimeAndSegmentInterval_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t AudioSampleBufferSplitterSetInitialSegmentStartTimeAndSegmentInterval_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t AudioSampleBufferSplitterGetInitialSegmentStartTimeAndSegmentInterval_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigBufferedAirPlayOutputProxyCreateFactory(uint64_t a1, const void *a2, void *a3)
{
  key = 0;
  cf = 0;
  block[0] = MEMORY[0x1E69E9820];
  block[1] = 0x40000000;
  block[2] = __FigBufferedAirPlayOutputProxyCreateFactory_block_invoke;
  block[3] = &__block_descriptor_tmp_127;
  block[4] = a1;
  if (_MergedGlobals_134 != -1)
  {
    dispatch_once(&_MergedGlobals_134, block);
  }

  if (!qword_1ED4CBAC8 || !qword_1ED4CBAD0)
  {
    v8 = FigSignalErrorAtGM();
LABEL_26:
    v13 = v8;
    a2 = 0;
    goto LABEL_18;
  }

  if (a2)
  {
    FigSimpleMutexLock();
    CMBaseObject = FigBufferedAirPlayOutputGetCMBaseObject(a2);
    v7 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (!v7)
    {
      a2 = 0;
      v13 = 4294954514;
      goto LABEL_18;
    }

    v8 = v7(CMBaseObject, @"UniqueID", a1, &key);
    if (!v8)
    {
      Value = FigCFDictionaryGetValue();
      if (Value)
      {
        v10 = CFRetain(Value);
        if (v10)
        {
          v11 = v10;
          v12 = FigCFWeakReferenceHolderCopyReferencedObject();
          cf = v12;
          CFRelease(v11);
          if (v12)
          {
            a2 = 0;
            goto LABEL_15;
          }
        }
      }

      v8 = FigBufferedAirPlayOutputProxyCreate(a1, a2, &cf);
      if (!v8)
      {
        a2 = FigCFWeakReferenceHolderCreateWithReferencedObject();
        CFDictionarySetValue(qword_1ED4CBAC8, key, a2);
        v12 = cf;
        if (!cf)
        {
          v14 = 0;
          goto LABEL_17;
        }

LABEL_15:
        v14 = CFRetain(v12);
LABEL_17:
        v13 = 0;
        *a3 = v14;
        goto LABEL_18;
      }
    }

    goto LABEL_26;
  }

  v13 = FigSignalErrorAtGM();
LABEL_18:
  FigSimpleMutexUnlock();
  if (key)
  {
    CFRelease(key);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (a2)
  {
    CFRelease(a2);
  }

  return v13;
}

uint64_t WebVTTParserParseBlockBuffer(uint64_t a1, CMBlockBufferRef theBuffer)
{
  sourceBytes = 0;
  DataLength = CMBlockBufferGetDataLength(theBuffer);
  OUTLINED_FUNCTION_613();
  DataPointer = CMBlockBufferGetDataPointer(v5, v6, v7, 0, v8);
  if (DataPointer)
  {
    return DataPointer;
  }

  v11 = (a1 + 40);
  v10 = *(a1 + 40);
  if (v10)
  {
    if (DataLength)
    {
      v12 = 0;
      for (i = sourceBytes; ; ++i)
      {
        v14 = *i;
        if (v14 == 10 || v14 == 13)
        {
          break;
        }

        --v12;
        if (!(DataLength + v12))
        {
          return CMBlockBufferAppendBufferReference(*(a1 + 40), theBuffer, 0, DataLength, 0);
        }
      }

      if (DataLength + v12)
      {
        v16 = *i;
        if (v16 == 10)
        {
          goto LABEL_17;
        }

        if (v16 == 13)
        {
          if (DataLength + v12 != 1 && i[1] == 10)
          {
            v17 = 2;
            goto LABEL_19;
          }

LABEL_17:
          if (!v12)
          {
            destination = 0;
            v20 = CMBlockBufferGetDataLength(v10);
            DataPointer = CMBlockBufferCopyDataBytes(v10, v20 - 1, 1uLL, &destination);
            if (DataPointer)
            {
              return DataPointer;
            }

            v18 = 1;
            if (destination == 13)
            {
              v17 = 2;
            }

            else
            {
              v17 = 1;
            }

            v10 = *v11;
            goto LABEL_28;
          }

          v17 = 1;
LABEL_19:
          v18 = v17 - v12;
LABEL_28:
          DataPointer = CMBlockBufferAppendBufferReference(v10, theBuffer, 0, v18, 0);
          if (!DataPointer)
          {
            DataPointer = webVTTProcessLineBB(a1, v17);
            if (!DataPointer)
            {
              sourceBytes = sourceBytes + v18;
              DataLength -= v18;
              goto LABEL_31;
            }
          }

          return DataPointer;
        }

        DataLength = -v12;
      }
    }

    return CMBlockBufferAppendBufferReference(*(a1 + 40), theBuffer, 0, DataLength, 0);
  }

LABEL_31:
  if (!DataLength)
  {
    return 0;
  }

  v21 = sourceBytes;
  while (2)
  {
    v22 = 0;
    while (1)
    {
      v23 = v21[v22];
      if (v23 == 10 || v23 == 13)
      {
        break;
      }

      if (DataLength == ++v22)
      {
        goto LABEL_50;
      }
    }

    if (DataLength == v22)
    {
      goto LABEL_50;
    }

    v25 = v21[v22];
    if (v25 == 10)
    {
LABEL_46:
      v26 = 1;
      goto LABEL_47;
    }

    if (v25 != 13)
    {
LABEL_50:
      OUTLINED_FUNCTION_18_45();
      DataPointer = CMBlockBufferCreateWithMemoryBlock(v29, v30, v31, v32, v33, v34, v35, v36, (a1 + 40));
      if (DataPointer)
      {
        return DataPointer;
      }

      v19 = CMBlockBufferReplaceDataBytes(sourceBytes, *v11, 0, DataLength);
      if (v19 && *v11)
      {
        CFRelease(*v11);
        *v11 = 0;
      }

      return v19;
    }

    if (DataLength - 1 == v22 || v21[v22 + 1] != 10)
    {
      goto LABEL_46;
    }

    v26 = 2;
LABEL_47:
    v27 = v26 + v22;
    webVTTProcessLine(a1, v21, v26 + v22, v26);
    v19 = v28;
    if (!v28)
    {
      v21 = sourceBytes + v27;
      sourceBytes = sourceBytes + v27;
      DataLength = DataLength - v26 - v22;
      if (DataLength)
      {
        continue;
      }
    }

    return v19;
  }
}

uint64_t webVTTProcessLineBB(uint64_t a1, unint64_t a2)
{
  if (!*(a1 + 40))
  {
    return 0;
  }

  OUTLINED_FUNCTION_613();
  if (!CMBlockBufferIsRangeContiguous(v4, v5, v6))
  {
    OUTLINED_FUNCTION_4_145();
    Contiguous = CMBlockBufferCreateContiguous(v7, v8, v9, v10, v11, v12, 0, v13);
    if (Contiguous)
    {
      return Contiguous;
    }

    v15 = *(a1 + 40);
    if (v15)
    {
      CFRelease(v15);
    }

    *(a1 + 40) = 0;
  }

  OUTLINED_FUNCTION_613();
  DataPointer = CMBlockBufferGetDataPointer(v16, v17, v18, 0, v19);
  if (!DataPointer)
  {
    DataLength = CMBlockBufferGetDataLength(*(a1 + 40));
    webVTTProcessLine(a1, 0, DataLength, a2);
    DataPointer = v24;
  }

  v21 = *(a1 + 40);
  if (v21)
  {
    CFRelease(v21);
    *(a1 + 40) = 0;
  }

  return DataPointer;
}

void webVTTProcessLine(uint64_t a1, char *a2, unint64_t a3, unint64_t a4)
{
  v7 = *(a1 + 48);
  if (!v7)
  {
    if (WebVTTBufferLooksLikeWebVTTFile(a2, a3))
    {
      *(a1 + 48) = 1;
      OUTLINED_FUNCTION_5_127();
      OUTLINED_FUNCTION_843();

      webVTTAddToHeaderGather(v32, v33, v34);
      return;
    }

    if (!*(a1 + 122))
    {
      goto LABEL_9;
    }

    v7 = 3;
    *(a1 + 48) = 3;
  }

  if (v7 != 1)
  {
    if (v7 == 3 && (a3 > a4 || *(a1 + 56)))
    {
      v40 = OUTLINED_FUNCTION_5_127();
      webVTTAddToGather(v40, v41, v42);
      if (a3 <= a4)
      {
        if (*(a1 + 56))
        {
          OUTLINED_FUNCTION_843();

          webVTTProcessCue(v43);
          return;
        }
      }
    }

LABEL_9:
    OUTLINED_FUNCTION_843();
    return;
  }

  if (a3 <= a4)
  {
    v8 = *(a1 + 56);
    if (v8)
    {
      DataLength = CMBlockBufferGetDataLength(*(a1 + 56));
      v10 = malloc_type_malloc(DataLength, 0xBF7D6F87uLL);
      if (v10)
      {
        v11 = v10;
        if (CMBlockBufferCopyDataBytes(v8, 0, DataLength, v10))
        {
          free(v11);
          goto LABEL_9;
        }

        v12 = strnstr(v11, "-->", DataLength);
        free(v11);
        if (v12)
        {
          *(a1 + 48) = 3;
          v21 = OUTLINED_FUNCTION_5_127();
          webVTTProcessLine(v21);
          goto LABEL_9;
        }
      }

      else
      {
        fig_log_get_emitter();
        OUTLINED_FUNCTION_3_5();
        if (FigSignalErrorAtGM())
        {
          goto LABEL_9;
        }
      }
    }

    v13 = OUTLINED_FUNCTION_5_127();
    if (!webVTTAddToGather(v13, v14, v15))
    {
      v16 = *(a1 + 56);
      if (v16)
      {
        if (*(a1 + 8))
        {
          v17 = CMBlockBufferGetDataLength(v16);
          if (v17)
          {
            v18 = v17;
            v19 = malloc_type_malloc(v17 + 1, 0x100004077774924uLL);
            if (v19)
            {
              v20 = v19;
              if (!CMBlockBufferCopyDataBytes(*(a1 + 56), 0, v18, v19) && !webVTTAddToHeaderGather(a1, v20, v18) && !*(a1 + 24))
              {
                v46 = 0;
                v45 = 0;
                v20[v18] = 0;
                v22 = v20;
                v23 = MEMORY[0x1E69E9830];
                do
                {
                  if (!*v22)
                  {
                    break;
                  }

                  v24 = strpbrk(v22, "\n\r");
                  i = v24;
                  if (v24)
                  {
                    *v24 = 0;
                    for (i = v24 + 1; ; ++i)
                    {
                      v26 = *i;
                      if (v26 != 13 && v26 != 10)
                      {
                        break;
                      }
                    }
                  }

                  v28 = v22 - 1;
                  do
                  {
                    v29 = v28[1];
                    if ((v29 & 0x80000000) != 0)
                    {
                      v30 = __maskrune(v29, 0x4000uLL);
                    }

                    else
                    {
                      v30 = *(v23 + 4 * v29 + 60) & 0x4000;
                    }

                    ++v28;
                  }

                  while (v30);
                  if ((*(a1 + 8))(*a1, v28, &v46, &v45))
                  {
                    goto LABEL_46;
                  }

                  if (v46)
                  {
                    *(a1 + 104) = v45;
                  }

                  v22 = i;
                }

                while (i);
                *(a1 + 24) = 1;
              }

LABEL_46:
              free(v20);
            }

            else
            {
              fig_log_get_emitter();
              OUTLINED_FUNCTION_3_5();
              FigSignalErrorAtGM();
            }
          }
        }

        v31 = *(a1 + 56);
        if (v31)
        {
          CFRelease(v31);
          *(a1 + 56) = 0;
        }
      }
    }

    goto LABEL_9;
  }

  OUTLINED_FUNCTION_5_127();
  OUTLINED_FUNCTION_843();

  webVTTAddToGather(v36, v37, v38);
}

uint64_t WebVTTParserFlush(uint64_t a1, int a2, char a3)
{
  result = webVTTProcessLineBB(a1, 0);
  if (!result)
  {
    if (*(a1 + 56) && (*(a1 + 48) | 2) == 3)
    {
      result = webVTTProcessCue(a1);
    }

    else
    {
      result = 0;
    }
  }

  *(a1 + 48) = 0;
  *(a1 + 24) = 0;
  *(a1 + 122) = a3;
  if (*(a1 + 112) < 1 || (*(a1 + 112) = 0, a2))
  {
    v7 = **(*(a1 + 80) + 8);
    if (v7)
    {
      return webVTTEmitSamples(a1, *(v7 + 40) + 0.00001);
    }
  }

  return result;
}

uint64_t webVTTProcessCue(uint64_t a1)
{
  v83 = 0;
  cf = 0;
  v82 = 0;
  v80 = 0;
  OUTLINED_FUNCTION_613();
  if (CMBlockBufferIsRangeContiguous(v2, v3, v4))
  {
    cf = CFRetain(*(a1 + 56));
  }

  else
  {
    OUTLINED_FUNCTION_4_145();
    Contiguous = CMBlockBufferCreateContiguous(v5, v6, v7, v8, v9, v10, 0, v11);
    if (Contiguous)
    {
LABEL_127:
      v31 = Contiguous;
      goto LABEL_88;
    }
  }

  OUTLINED_FUNCTION_613();
  Contiguous = CMBlockBufferGetDataPointer(v13, v14, v15, v16, v17);
  if (Contiguous)
  {
    goto LABEL_127;
  }

  v19 = v82;
  v18 = v83;
  if (!matchStringInBufferWithSpace("NOTE", v83, v82, 1, 0))
  {
LABEL_16:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    FigSignalErrorAtGM();
    v31 = 0;
    goto LABEL_88;
  }

  v20 = strnstr(v83, "-->", v82);
  if (!v20)
  {
    v31 = 0;
    if (matchStringInBufferWithSpace("NOTE", v83, v82, 1, 0))
    {
      goto LABEL_88;
    }

    goto LABEL_16;
  }

  v21 = v20;
  v22 = malloc_type_calloc(1uLL, 0x70uLL, 0x10A004090FB26ECuLL);
  if (!v22)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    Contiguous = FigSignalErrorAtGM();
    goto LABEL_127;
  }

  v23 = v22;
  v81 = 0.0;
  v79 = 0.0;
  *(v22 + 2) = CFRetain(cf);
  v24 = *(a1 + 132) + 1;
  *(a1 + 132) = v24;
  v23[26] = v24;
  v25 = v82;
  v26 = v83;
  if (v19 >= v21 - v83)
  {
    v32 = v82;
    goto LABEL_18;
  }

  *(v23 + 5) = 0;
  *(v23 + 6) = v19;
  v27 = &v26[v19];
  v28 = v25 - v19;
  v82 = v25 - v19;
  v83 = v27;
  if (v25 == v19)
  {
    goto LABEL_40;
  }

  v29 = *v27;
  if (v29 == 10)
  {
LABEL_41:
    v30 = 1;
    goto LABEL_42;
  }

  if (v29 != 13)
  {
LABEL_40:
    v30 = 0;
    goto LABEL_42;
  }

  if (v28 == 1 || v27[1] != 10)
  {
    goto LABEL_41;
  }

  v30 = 2;
LABEL_42:
  v26 = &v27[v30];
  v32 = v28 - v30;
  v82 = v32;
  v83 = v26;
  if (!v32)
  {
LABEL_50:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
LABEL_84:
    FigSignalErrorAtGM();
    goto LABEL_85;
  }

  v41 = v30 + v19 - v25;
  v42 = v26;
  while (1)
  {
    v43 = *v42;
    if (v43 == 10 || v43 == 13)
    {
      break;
    }

    ++v42;
    if (__CFADD__(v41++, 1))
    {
      goto LABEL_50;
    }
  }

LABEL_18:
  if (v32)
  {
    v33 = v26 + 1;
    do
    {
      v34 = *(v33 - 1);
      v35 = v34 == 32 || v34 == 9;
      if (!v35)
      {
        break;
      }

      OUTLINED_FUNCTION_17_47();
    }

    while (!v35);
  }

  if (FigWebVTTReadTime(&v83, &v82, &v79, 1, &v80))
  {
    goto LABEL_85;
  }

  if (!v80)
  {
    goto LABEL_83;
  }

  if (!matchStringInBufferWithSpace("-->", v83, v82, 1, 0))
  {
    goto LABEL_83;
  }

  v36 = v83;
  v35 = v82 == 3;
  v82 -= 3;
  v83 += 3;
  if (v35)
  {
    goto LABEL_83;
  }

  v37 = v36 + 4;
  v38 = 1;
  while (1)
  {
    v39 = *(v37 - 1);
    if (v39 != 32 && v39 != 9)
    {
      break;
    }

    OUTLINED_FUNCTION_17_47();
    if (v35)
    {
      goto LABEL_52;
    }
  }

  if (v38)
  {
    goto LABEL_83;
  }

LABEL_52:
  if (FigWebVTTReadTime(&v83, &v82, &v81, 1, 0))
  {
LABEL_85:
    v31 = 0;
LABEL_86:
    if (!v23)
    {
      goto LABEL_88;
    }

LABEL_87:
    webVTTFreeCue(v23);
    goto LABEL_88;
  }

  if (v81 <= *(v23 + 3))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    v31 = FigSignalErrorAtGM();
    goto LABEL_87;
  }

  v46 = *(a1 + 104);
  v47 = v46 + v79;
  v79 = v47;
  v81 = v81 + v46;
  v48 = v81;
  *(v23 + 3) = v47;
  *(v23 + 4) = v48;
  v49 = v82;
  if (!v82)
  {
    goto LABEL_83;
  }

  v50 = 0;
  v51 = v83;
  v52 = v83;
  v53 = v83;
  while (1)
  {
    v54 = *v53;
    if (v54 == 10 || v54 == 13)
    {
      break;
    }

    ++v53;
    if (++v50 == v82)
    {
      goto LABEL_83;
    }
  }

  if (v50)
  {
    *(v23 + 7) = v83 - v18;
    *(v23 + 8) = v50;
    v52 = &v51[v50];
    v49 -= v50;
    v82 = v49;
    v83 = &v51[v50];
  }

  if (!v49)
  {
    goto LABEL_71;
  }

  v56 = *v52;
  if (v56 != 10)
  {
    if (v56 == 13)
    {
      if (v49 != 1 && v52[1] == 10)
      {
        v57 = 2;
        goto LABEL_73;
      }

      goto LABEL_72;
    }

LABEL_71:
    v57 = 0;
    goto LABEL_73;
  }

LABEL_72:
  v57 = 1;
LABEL_73:
  v58 = &v52[v57];
  v82 = v49 - v57;
  v83 = v58;
  if (v49 == v57)
  {
LABEL_82:
    *(v23 + 9) = v58 - v18;
LABEL_83:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    goto LABEL_84;
  }

  v59 = ~v57;
  while (1)
  {
    v60 = v53[v57];
    if (v60 != 32 && v60 != 9)
    {
      break;
    }

    v82 = v49 + v59;
    v83 = &v53[++v57];
    --v59;
    if (v49 == v57)
    {
      v58 = &v53[v57];
      goto LABEL_82;
    }
  }

  *(v23 + 9) = v51 - v18 + v50 + v57;
  v64 = v49 - 1;
  v65 = v49 - v57;
  while (1)
  {
    v66 = v53[v64];
    if (v66 != 13 && v66 != 10)
    {
      break;
    }

    --v64;
    v82 = --v65;
    if (!v65)
    {
      goto LABEL_83;
    }
  }

  if (*(a1 + 96) && *(a1 + 88) > v47)
  {
    goto LABEL_83;
  }

  *(a1 + 96) = 1;
  *(a1 + 88) = v47;
  *(v23 + 10) = v65;
  do
  {
    v77 = 0;
    v78 = 0.0;
    v69 = v83 + 1;
    v68 = *v83;
    v82 = --v65;
    ++v83;
    if (v68 == 60)
    {
      if (v65 < 6)
      {
        v72 = 0;
        v73 = 0;
        v71 = 1;
      }

      else
      {
        if ((*v69 - 48) > 9 || FigWebVTTReadTime(&v83, &v82, &v78, 0, 0) || (v70 = *(a1 + 104) + v78, v78 = v70, v47 >= v70) || v70 >= *(v23 + 4))
        {
          v72 = 0;
          v73 = 0;
          v71 = 1;
        }

        else
        {
          v71 = 0;
          v72 = v69 - v18;
          v73 = (v83 - v69);
        }

        v65 = v82;
      }

      if (!v65)
      {
LABEL_125:
        fig_log_get_emitter();
        OUTLINED_FUNCTION_3_5();
        goto LABEL_84;
      }

      --v65;
      v74 = (v83 + 1);
      while (1)
      {
        v75 = *(v74 - 1);
        v82 = v65;
        v83 = v74;
        if (v75 == 62)
        {
          break;
        }

        --v65;
        ++v74;
        if (v65 == -1)
        {
          goto LABEL_125;
        }
      }

      if ((v71 & 1) == 0)
      {
        v76 = webVTTDuplicateCue(v23, &v77);
        if (v76 || (*(v23 + 4) = v78, v76 = webVTTAddCueToSampleQueue(a1, v23), v76))
        {
          v31 = v76;
          if (v77)
          {
            webVTTFreeCue(v77);
          }

          goto LABEL_86;
        }

        v23 = v77;
        v47 = v78;
        *(v77 + 3) = v78;
        *(v23 + 11) = v72;
        *(v23 + 12) = v73;
        v65 = v82;
      }
    }
  }

  while (v65);
  v31 = webVTTAddCueToSampleQueue(a1, v23);
  if (v31)
  {
    goto LABEL_86;
  }

  webVTTEmitSamples(a1, v79);
LABEL_88:
  v62 = *(a1 + 56);
  if (v62)
  {
    CFRelease(v62);
    *(a1 + 56) = 0;
  }

  if (cf)
  {
    CFRelease(cf);
  }

  return v31;
}

uint64_t webVTTEmitSamples(void *a1, double a2)
{
  v2 = a1[9];
  if (!v2)
  {
    return 0;
  }

  v5 = v2 + 5;
  v6 = v2[5];
  v7 = 0.0;
  if (v6 > a2)
  {
LABEL_18:
    v17 = v6 <= a2 && v7 < a2;
    if (!v17 || v2[4] < a2)
    {
      return 0;
    }
  }

  else
  {
    v8 = v2[5];
    while (1)
    {
      v9 = a1[2];
      v7 = v8;
      if (v9)
      {
        if (!*(a1 + 121) && *(a1 + 120) && v2[4] > 0.0)
        {
          v14 = malloc_type_calloc(1uLL, 0x30uLL, 0x10A0040D182BB51uLL);
          if (!v14)
          {
            return 4294954510;
          }

          v15 = v14;
          v14[2] = 0;
          v14[3] = v14 + 2;
          v14[4] = 0;
          v14[5] = *(v2 + 4);
          v16 = (a1[2])(*a1, v14);
          webVTTFreeSample(v15);
          if (v16)
          {
            return v16;
          }

          v9 = a1[2];
        }

        *(a1 + 121) = 1;
        v10 = v9(*a1, v2);
        if (v10)
        {
          return v10;
        }

        v7 = *v5;
      }

      v11 = *v2;
      v12 = *(v2 + 1);
      v13 = (*v2 + 8);
      if (!*v2)
      {
        v13 = (a1 + 10);
      }

      *v13 = v12;
      *v12 = v11;
      webVTTFreeSample(v2);
      v2 = a1[9];
      if (!v2)
      {
        break;
      }

      v5 = v2 + 5;
      v8 = v2[5];
      if (v8 > a2)
      {
        goto LABEL_18;
      }
    }

    if (v7 >= a2)
    {
      return 0;
    }
  }

  if (!a1[2])
  {
    return 0;
  }

  v18 = malloc_type_calloc(1uLL, 0x30uLL, 0x10A0040D182BB51uLL);
  if (v18)
  {
    v19 = v18;
    v18[2] = 0;
    v18[3] = v18 + 2;
    *(v18 + 4) = v7;
    *(v18 + 5) = a2;
    *(a1 + 121) = 1;
    v20 = (a1[2])(*a1, v18);
    webVTTFreeSample(v19);
    return v20;
  }

  return 4294954510;
}

uint64_t webVTTAppendTextToBlockBuffer(const void *a1, size_t a2, CMBlockBufferRef theBuffer)
{
  DataLength = CMBlockBufferGetDataLength(theBuffer);
  OUTLINED_FUNCTION_18_45();
  appended = CMBlockBufferAppendMemoryBlock(v7, v8, v9, v10, v11, v12, v13, v14);
  if (!appended)
  {
    return CMBlockBufferReplaceDataBytes(a1, theBuffer, DataLength, a2);
  }

  return appended;
}

char *WebVTTCreateSampleBufferFromSample(uint64_t a1, uint64_t a2, uint64_t a3, CMSampleBufferRef *a4)
{
  v80[1] = *MEMORY[0x1E69E9840];
  blockBufferOut = 0;
  v65 = 0;
  v63 = 0u;
  v64 = 0u;
  v62 = 0u;
  memset(&sampleTimingArray, 0, sizeof(sampleTimingArray));
  sampleSizeArray = 0;
  if (!a1 || !a2)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_19_2();
    FigSignalErrorAtGM();
    OUTLINED_FUNCTION_19_15();
    goto LABEL_94;
  }

  v7 = a4;
  v10 = (a1 + 32);
  v11 = *MEMORY[0x1E695E480];
  if (*(a1 + 32))
  {
    v4 = 0;
LABEL_46:
    Contiguous = CMBlockBufferCreateEmpty(v11, 6u, 0, &blockBufferOut);
    if (Contiguous)
    {
      goto LABEL_93;
    }

    Contiguous = FigAtomWriterInitWithBlockBuffer();
    if (Contiguous)
    {
      goto LABEL_93;
    }

    v36 = *(a2 + 16);
    if (!v36)
    {
      Contiguous = FigAtomWriterBeginAtom();
      if (!Contiguous)
      {
        Contiguous = FigAtomWriterEndAtom();
        if (!Contiguous)
        {
LABEL_85:
          v47 = *(a2 + 32);
          if (v47 >= 0.0)
          {
            v48 = 0.0005;
          }

          else
          {
            v48 = -0.0005;
          }

          CMTimeMakeWithSeconds(totalLengthOut, v47 + v48, 1000);
          *keys = *a3;
          *&v76 = *(a3 + 16);
          CMTimeAdd(&sampleTimingArray.presentationTimeStamp, keys, totalLengthOut);
          sampleTimingArray.decodeTimeStamp = sampleTimingArray.presentationTimeStamp;
          v49 = *(a2 + 40) - *(a2 + 32);
          if (v49 >= 0.0)
          {
            v50 = 0.0005;
          }

          else
          {
            v50 = -0.0005;
          }

          CMTimeMakeWithSeconds(totalLengthOut, v49 + v50, 1000);
          sampleTimingArray.duration = totalLengthOut[0];
          OUTLINED_FUNCTION_4_145();
          Contiguous = CMBlockBufferCreateContiguous(v51, v52, v53, v54, v55, v56, 3u, v57);
          if (!Contiguous)
          {
            sampleSizeArray = CMBlockBufferGetDataLength(0);
            Contiguous = CMSampleBufferCreate(v11, 0, 1u, 0, 0, *v10, 1, 1, &sampleTimingArray, 1, &sampleSizeArray, v7);
          }
        }
      }

      goto LABEL_93;
    }

    while (1)
    {
      v78 = 0;
      v76 = 0u;
      v77 = 0u;
      *keys = 0u;
      v74 = 0;
      v72 = 0u;
      v73 = 0u;
      *values = 0u;
      LODWORD(theBuffer) = 0;
      Contiguous = FigAtomWriterBeginAtom();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      Contiguous = FigAtomWriterInitWithParent();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      Contiguous = FigAtomWriterBeginAtom();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      LODWORD(theBuffer) = bswap32(*(v36 + 26));
      Contiguous = FigAtomWriterAppendData();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      Contiguous = FigAtomWriterEndAtom();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      if (v36[6])
      {
        OUTLINED_FUNCTION_10_75();
        Contiguous = FigAtomWriterInitWithParent();
        if (Contiguous)
        {
          goto LABEL_93;
        }

        Contiguous = FigAtomWriterBeginAtom();
        if (Contiguous)
        {
          goto LABEL_93;
        }

        Contiguous = FigAtomWriterAppendBlockBufferData();
        if (Contiguous)
        {
          goto LABEL_93;
        }

        Contiguous = FigAtomWriterEndAtom();
        if (Contiguous)
        {
          goto LABEL_93;
        }
      }

      if (v36[11])
      {
        OUTLINED_FUNCTION_10_75();
        Contiguous = FigAtomWriterInitWithParent();
        if (Contiguous)
        {
          goto LABEL_93;
        }

        Contiguous = FigAtomWriterBeginAtom();
        if (Contiguous)
        {
          goto LABEL_93;
        }

        Contiguous = FigAtomWriterAppendBlockBufferData();
        if (Contiguous)
        {
          goto LABEL_93;
        }

        Contiguous = FigAtomWriterEndAtom();
        if (Contiguous)
        {
          goto LABEL_93;
        }
      }

      if (v36[8])
      {
        break;
      }

LABEL_76:
      Contiguous = FigAtomWriterInitWithParent();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      Contiguous = FigAtomWriterBeginAtom();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      Contiguous = FigAtomWriterAppendBlockBufferData();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      Contiguous = FigAtomWriterEndAtom();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      Contiguous = FigAtomWriterEndAtom();
      if (Contiguous)
      {
        goto LABEL_93;
      }

      v36 = *v36;
      if (!v36)
      {
        goto LABEL_85;
      }
    }

    v79 = 0;
    v80[0] = 0;
    OUTLINED_FUNCTION_10_75();
    v37 = v36[2];
    if (!CMBlockBufferIsRangeContiguous(v37, v36[7], v38))
    {
      OUTLINED_FUNCTION_4_145();
      DataPointer = CMBlockBufferCreateContiguous(v39, v40, v41, v42, v43, v44, 0, v45);
      if (DataPointer)
      {
        goto LABEL_73;
      }

      v37 = v80[0];
    }

    DataPointer = CMBlockBufferGetDataPointer(v37, v36[7], 0, 0, &v79);
    if (!DataPointer)
    {
      DataPointer = FigAtomWriterInitWithParent();
      if (!DataPointer)
      {
        DataPointer = FigAtomWriterBeginAtom();
        if (!DataPointer)
        {
          DataPointer = FigAtomWriterAppendBlockBufferData();
          if (!DataPointer)
          {
            DataPointer = FigAtomWriterEndAtom();
          }
        }
      }
    }

LABEL_73:
    v5 = DataPointer;
    if (v80[0])
    {
      CFRelease(v80[0]);
    }

    if (v5)
    {
      goto LABEL_94;
    }

    goto LABEL_76;
  }

  v79 = 0;
  v80[0] = 0;
  keys[0] = 0;
  keys[1] = 0;
  *&v76 = 0;
  v4 = keys;
  values[0] = 0;
  values[1] = 0;
  *&v72 = 0;
  v12 = values;
  theBuffer = 0;
  if (!*(a1 + 64))
  {
    v17 = 0;
    goto LABEL_25;
  }

  totalLengthOut[0].value = 0;
  lengthAtOffsetOut = 0;
  dataPointerOut = 0;
  OUTLINED_FUNCTION_613();
  if (CMBlockBufferIsRangeContiguous(v13, v14, v15))
  {
    v16 = CFRetain(*(a1 + 64));
    theBuffer = v16;
  }

  else
  {
    OUTLINED_FUNCTION_4_145();
    if (CMBlockBufferCreateContiguous(v18, v19, v20, v21, v22, v23, 0, v24))
    {
LABEL_105:
      OUTLINED_FUNCTION_19_15();
      v32 = 0;
      v17 = 0;
      goto LABEL_34;
    }

    v16 = theBuffer;
  }

  if (CMBlockBufferGetDataPointer(v16, 0, &lengthAtOffsetOut, totalLengthOut, &dataPointerOut))
  {
    goto LABEL_105;
  }

  if (totalLengthOut[0].value > lengthAtOffsetOut)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_19_2();
    FigSignalErrorAtGM();
    goto LABEL_105;
  }

  v4 = &keys[1];
  v12 = &values[1];
  v25 = dataPointerOut;
  if (!totalLengthOut[0].value)
  {
    value = 0;
    goto LABEL_24;
  }

  v5 = &dataPointerOut[totalLengthOut[0].value - 1];
  v26 = MEMORY[0x1E69E9830];
  while (1)
  {
    v27 = *v5;
    if ((v27 & 0x80000000) != 0)
    {
      break;
    }

    if ((*(v26 + 4 * v27 + 60) & 0x4000) == 0)
    {
      goto LABEL_22;
    }

LABEL_19:
    *v5-- = 0;
    if (!--totalLengthOut[0].value)
    {
      value = 0;
      goto LABEL_23;
    }
  }

  if (__maskrune(v27, 0x4000uLL))
  {
    goto LABEL_19;
  }

LABEL_22:
  value = totalLengthOut[0].value;
LABEL_23:
  v25 = dataPointerOut;
LABEL_24:
  keys[0] = @"vttC";
  values[0] = CFDataCreate(v11, v25, value);
  v17 = 1;
LABEL_25:
  v29 = *(a1 + 136);
  if (v29)
  {
    *v4 = @"vlab";
    *v12 = CFRetain(v29);
    ++v17;
  }

  if (*(a1 + 128) != 2021028980)
  {
    if (v17)
    {
      goto LABEL_31;
    }

    v4 = 0;
    v5 = 0;
    goto LABEL_100;
  }

  LODWORD(totalLengthOut[0].value) = 1953789559;
  WORD2(totalLengthOut[0].value) = 512;
  qmemcpy(&totalLengthOut[0].value + 6, "webv2013-11-0000isom2013-04-0000", 32);
  keys[v17] = @"xnfo";
  v30 = CFDataCreate(v11, totalLengthOut, 38);
  values[v17] = v30;
  if (!v30)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_19_2();
    FigSignalErrorAtGM();
    OUTLINED_FUNCTION_19_15();
LABEL_100:
    v32 = 0;
    goto LABEL_34;
  }

  ++v17;
LABEL_31:
  v31 = CFDictionaryCreate(v11, keys, values, v17, MEMORY[0x1E695E528], MEMORY[0x1E695E9E8]);
  v32 = v31;
  if (v31)
  {
    v33 = *MEMORY[0x1E69600A0];
    v79 = v31;
    v80[0] = v33;
    v4 = CFDictionaryCreate(v11, v80, &v79, 1, MEMORY[0x1E695E528], MEMORY[0x1E695E9E8]);
    if (v4)
    {
      v5 = 0;
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_19_2();
      v5 = FigSignalErrorAtGM();
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_19_2();
    FigSignalErrorAtGM();
    OUTLINED_FUNCTION_19_15();
  }

LABEL_34:
  if (theBuffer)
  {
    CFRelease(theBuffer);
  }

  if (v32)
  {
    CFRelease(v32);
  }

  if (v17)
  {
    v34 = values;
    do
    {
      if (*v34)
      {
        CFRelease(*v34);
      }

      ++v34;
      --v17;
    }

    while (v17);
  }

  if (!v5)
  {
    Contiguous = CMFormatDescriptionCreate(v11, *(a1 + 124), *(a1 + 128), v4, v10);
    if (!Contiguous)
    {
      v7 = a4;
      goto LABEL_46;
    }

LABEL_93:
    v5 = Contiguous;
  }

LABEL_94:
  if (blockBufferOut)
  {
    CFRelease(blockBufferOut);
  }

  if (v4)
  {
    CFRelease(v4);
  }

  return v5;
}

uint64_t WebVTTCreateAttributedStringArrayFromSampleBuffer(int a1, int a2, const __CFArray *a3, __CFArray **a4)
{
  v260 = a4;
  OUTLINED_FUNCTION_180_1();
  v285 = 0;
  v286 = 0;
  v283 = 0;
  v284 = 0;
  v281 = 0u;
  v282 = 0u;
  v279 = 0u;
  v280 = 0u;
  v277 = 0u;
  v278 = 0u;
  v276 = 0u;
  *v274 = 0;
  cf = 0;
  HIBYTE(v273) = 0;
  plist = 0;
  dataPointerOut[0] = 0;
  v7 = MEMORY[0x1E695E480];
  if (!v8)
  {
    goto LABEL_51;
  }

  FormatDescription = CMSampleBufferGetFormatDescription(v4);
  if (!FormatDescription)
  {
    goto LABEL_47;
  }

  v10 = FormatDescription;
  MediaSubType = CMFormatDescriptionGetMediaSubType(FormatDescription);
  v12 = MediaSubType == 1937142900 || MediaSubType == 2021028980;
  v13 = v12 || MediaSubType == 2004251764;
  if (!v13 || v10 == v5[4])
  {
    goto LABEL_47;
  }

  v14 = v5[3];
  if (v14)
  {
    CFRelease(v14);
    v5[3] = 0;
  }

  v5[4] = v10;
  Extension = CMFormatDescriptionGetExtension(v10, @"InlineResources");
  if (Extension)
  {
    v16 = Extension;
    v17 = CFGetTypeID(Extension);
    if (v17 == CFDictionaryGetTypeID())
    {
      value = 0;
      if (CFDictionaryGetValueIfPresent(v16, @"InlineResourcesArray", &value))
      {
        if (value)
        {
          v18 = CFGetTypeID(value);
          if (v18 == CFArrayGetTypeID())
          {
            if (value)
            {
              Count = CFArrayGetCount(value);
              if (Count >= 1)
              {
                v20 = Count;
                v21 = 0;
                allocator = *v7;
                do
                {
                  ValueAtIndex = CFArrayGetValueAtIndex(value, v21);
                  if (ValueAtIndex)
                  {
                    v23 = ValueAtIndex;
                    v24 = CFGetTypeID(ValueAtIndex);
                    if (v24 == CFDictionaryGetTypeID())
                    {
                      v293 = 0;
                      valuePtr = 0;
                      v290 = 0;
                      v291 = 0;
                      v289 = 0;
                      if (CFDictionaryGetValueIfPresent(v23, @"resource_role", &v293))
                      {
                        if (v293)
                        {
                          v25 = CFGetTypeID(v293);
                          if (v25 == CFNumberGetTypeID())
                          {
                            CFNumberGetValue(v293, kCFNumberSInt32Type, &valuePtr);
                            if (valuePtr == 1937013100 && CFDictionaryGetValueIfPresent(v23, @"resource_mimetype", &v291) && (CFStringCompare(v291, @"text/xml", 1uLL) == kCFCompareEqualTo || CFStringCompare(v291, @"application/json", 1uLL) == kCFCompareEqualTo) && CFDictionaryGetValueIfPresent(v23, @"resource_mimetype_URI", &v290) && CFEqual(v290, @"com.apple.coremedia.style-property-list") && CFDictionaryGetValueIfPresent(v23, @"resource_payload", &v289))
                            {
                              format = 0;
                              error = 0;
                              if (CFStringCompare(v291, @"application/json", 1uLL))
                              {
                                plist = CFPropertyListCreateWithData(allocator, v289, 0, &format, &error);
                              }

                              else if (FigJSONObjectCreateWithData())
                              {
                                plist = 0;
                              }
                            }
                          }
                        }
                      }
                    }
                  }

                  ++v21;
                }

                while (v20 != v21);
              }
            }
          }
        }
      }

      v26 = plist;
      if (plist)
      {
        goto LABEL_257;
      }
    }
  }

  v27 = CMFormatDescriptionGetExtension(v10, *MEMORY[0x1E69600A0]);
  if (v27)
  {
    v28 = v27;
    v29 = CFGetTypeID(v27);
    if (v29 == CFDictionaryGetTypeID())
    {
      v30 = CFDictionaryGetValue(v28, @"vttC");
      if (v30)
      {
        v31 = v30;
        v32 = CFGetTypeID(v30);
        if (v32 == CFDataGetTypeID())
        {
          v226 = *v7;
          if (createCSSDataFromWebVTTConfiguration(v31, *v7, dataPointerOut))
          {
LABEL_47:
            if (plist)
            {
              CFRelease(plist);
            }

            goto LABEL_49;
          }

          if (dataPointerOut[0])
          {
            value = 0;
            v227 = FigConvertCSSStyleSheetDataToTextMarkup(v226, dataPointerOut[0], &value, 0);
            v228 = value;
            if (!v227)
            {
              if (value)
              {
                v229 = CFGetTypeID(value);
                TypeID = CFArrayGetTypeID();
                v228 = value;
                if (v229 == TypeID)
                {
                  if (value)
                  {
                    v231 = CFRetain(value);
                    v228 = value;
                  }

                  else
                  {
                    v231 = 0;
                  }

                  plist = v231;
                }
              }
            }

            if (v228)
            {
              CFRelease(v228);
            }
          }
        }
      }
    }
  }

  v26 = plist;
  if (plist)
  {
LABEL_257:
    if (CFPropertyListIsValid(v26, kCFPropertyListXMLFormat_v1_0))
    {
      v5[3] = CFRetain(plist);
    }

    goto LABEL_47;
  }

LABEL_49:
  if (dataPointerOut[0])
  {
    CFRelease(dataPointerOut[0]);
  }

LABEL_51:
  v33 = v5[3];
  v34 = MEMORY[0x1E6960A88];
  if (!v33)
  {
    if (v5[2] == a3)
    {
      goto LABEL_58;
    }

    webVTTStyleQueueFree(v5);
    v219 = v5[2];
    if (v219)
    {
      CFRelease(v219);
      v5[2] = 0;
    }

    if (!a3)
    {
      goto LABEL_58;
    }

    v220 = CFArrayGetCount(a3);
    if (v220 >= 1)
    {
      v221 = v220;
      v222 = 0;
      v223 = *v34;
      do
      {
        v224 = CFArrayGetValueAtIndex(a3, v222);
        v225 = CFDictionaryGetValue(v224, v223);
        if (v225)
        {
          v41 = webVTTAddStyle(v5, v225, v224);
          if (v41)
          {
            goto LABEL_214;
          }
        }
      }

      while (v221 != ++v222);
    }

    v41 = webVTTAddGenericStylesToStyleList(v5);
    if (!v41)
    {
      v5[2] = CFRetain(a3);
      goto LABEL_58;
    }

LABEL_214:
    AtomWithType = v41;
    v49 = 0;
    v48 = 0;
    goto LABEL_201;
  }

  webVTTStyleQueueFree(v5);
  v35 = CFArrayGetCount(v33);
  if (v35 >= 1)
  {
    v36 = v35;
    v37 = 0;
    v38 = *v34;
    do
    {
      v39 = CFArrayGetValueAtIndex(v33, v37);
      v40 = CFDictionaryGetValue(v39, v38);
      if (v40)
      {
        v41 = webVTTAddStyle(v5, v40, v39);
        if (v41)
        {
          goto LABEL_214;
        }
      }
    }

    while (v36 != ++v37);
  }

  v41 = webVTTAddGenericStylesToStyleList(v5);
  if (v41)
  {
    goto LABEL_214;
  }

LABEL_58:
  *v260 = 0;
  v42 = *v7;
  Mutable = CFArrayCreateMutable(*v7, 0, MEMORY[0x1E695E9C0]);
  if (!Mutable)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_177();
    AtomWithType = FigSignalErrorAtGM();
    v48 = 0;
LABEL_223:
    v49 = 0;
    goto LABEL_252;
  }

  alloc = v42;
  CMSampleBufferGetDataBuffer(v4);
  v44 = FigAtomStreamInitWithBBuf();
  if (v44)
  {
    AtomWithType = v44;
LABEL_225:
    v49 = 0;
    v48 = 0;
    goto LABEL_226;
  }

  AtomWithType = FigAtomStreamPositionAtFirstAtomWithType();
  v252 = *MEMORY[0x1E6960968];
  v243 = *MEMORY[0x1E6960908];
  v248 = *MEMORY[0x1E69607B0];
  v241 = *MEMORY[0x1E6960780];
  v240 = *MEMORY[0x1E6960788];
  v239 = *MEMORY[0x1E6960798];
  v247 = *MEMORY[0x1E69609A0];
  key = *MEMORY[0x1E6960978];
  v249 = *MEMORY[0x1E69607A0];
  v250 = *MEMORY[0x1E6960838];
  v244 = *MEMORY[0x1E6960790];
  v245 = *MEMORY[0x1E6960A00];
  v242 = *MEMORY[0x1E69609F8];
  v257 = *MEMORY[0x1E69608D8];
  v258 = *MEMORY[0x1E69608E0];
  v255 = *MEMORY[0x1E6960830];
  v256 = *MEMORY[0x1E69609F0];
  v253 = *MEMORY[0x1E6960A08];
  v254 = *MEMORY[0x1E69609E8];
  v46 = *MEMORY[0x1E69609E0];
  allocatora = *MEMORY[0x1E6960998];
  v263 = *MEMORY[0x1E6960C38];
  v47 = *MEMORY[0x1E6960C30];
  v237 = 4365;
  v238 = 4416;
  if (AtomWithType)
  {
LABEL_197:
    if (AtomWithType == -12890)
    {
      v49 = 0;
      v48 = 0;
      goto LABEL_199;
    }

    goto LABEL_225;
  }

LABEL_61:
  *v270 = 0u;
  v271 = 0u;
  *v268 = 0u;
  v269 = 0u;
  *v266 = 0u;
  v267 = 0u;
  *plista = 0u;
  LODWORD(v290) = 0;
  AtomWithType = FigAtomStreamInitWithParent();
  v48 = 0;
  v49 = 0;
  if (AtomWithType)
  {
    goto LABEL_252;
  }

  v50 = -1.0;
  while (1)
  {
    do
    {
      if (AtomWithType)
      {
        if (AtomWithType != -12890)
        {
          goto LABEL_252;
        }

        if (v285)
        {
          value = 0;
          dataPointerOut[0] = 0;
          v293 = 0;
          OUTLINED_FUNCTION_613();
          DataPointer = CMBlockBufferGetDataPointer(v213, v214, v215, v216, v217);
          if (DataPointer)
          {
            goto LABEL_251;
          }

          AtomWithType = webVTTParseCueAndCreateAttributedString(v5, dataPointerOut[0], value, cf, v49, v48, 0, &v293, v50);
          CFRelease(v285);
          v285 = 0;
          v218 = v293;
          if (v293)
          {
            CFArrayAppendValue(Mutable, v293);
            CFRelease(v218);
          }

          if (AtomWithType)
          {
            goto LABEL_226;
          }
        }

        if (cf)
        {
          CFRelease(cf);
          cf = 0;
        }

        if (v49)
        {
          CFRelease(v49);
        }

        if (v48)
        {
          CFRelease(v48);
        }

        AtomWithType = FigAtomStreamAdvanceToNextAtomWithType();
        if (AtomWithType)
        {
          goto LABEL_197;
        }

        goto LABEL_61;
      }

      AtomWithType = FigAtomStreamGetCurrentAtomTypeAndDataLength();
    }

    while (AtomWithType);
    if (v290 == 1937011815)
    {
      value = 0;
      dataPointerOut[0] = 0;
      v293 = 0;
      OUTLINED_FUNCTION_613();
      DataPointer = FigAtomStreamReadCurrentAtomDataAndCreateBBuf();
      if (DataPointer)
      {
        goto LABEL_251;
      }

      v235 = v46;
      v236 = v47;
      OUTLINED_FUNCTION_613();
      DataPointer = CMBlockBufferGetDataPointer(v52, v53, v54, v55, v56);
      if (DataPointer)
      {
        goto LABEL_251;
      }

      v291 = 0;
      v57 = OUTLINED_FUNCTION_19_44();
      if (webVTTFindNextCueSetting(v57, v58, 0, v59, v60))
      {
        AtomWithType = 0;
        v234 = Mutable;
        do
        {
          v61 = v291;
          v62 = value;
          if (value >= 3)
          {
            v63 = &dataPointerOut[0][v291];
            if (OUTLINED_FUNCTION_3_149("vertical:") || *v63 == 68 && (OUTLINED_FUNCTION_15_56(), v12))
            {
              OUTLINED_FUNCTION_9_75();
              v66 = OUTLINED_FUNCTION_13_55("rl", v64, v65);
              v67 = v263;
              if (v66 || (OUTLINED_FUNCTION_9_75(), v70 = OUTLINED_FUNCTION_13_55("vertical", v68, v69), v67 = v263, v70) || (OUTLINED_FUNCTION_9_75(), v73 = OUTLINED_FUNCTION_13_55("lr", v71, v72), v67 = v236, v73) || (OUTLINED_FUNCTION_9_75(), v76 = OUTLINED_FUNCTION_13_55("vertical-lr", v74, v75), v67 = v236, v76))
              {
                AtomWithType = webVTTAddToCueSettingsDictionary(&cf, allocatora, v67);
              }

              if (AtomWithType)
              {
                goto LABEL_252;
              }
            }

            else
            {
              v77 = OUTLINED_FUNCTION_3_149("line:");
              v78 = *v63;
              if (v77 || v78 == 76 && (OUTLINED_FUNCTION_15_56(), v12))
              {
                v79 = v78 == 76;
                v80 = 2;
                if (!v79)
                {
                  v80 = 5;
                }

                v81 = &v63[v80];
                v82 = -2;
                if (!v79)
                {
                  v82 = -5;
                }

                v83 = &v62[v82];
                v84 = memchr(v81, 44, &v62[v82]);
                v85 = v84;
                if (v84)
                {
                  v86 = v84 - v81;
                }

                else
                {
                  v86 = v83;
                }

                v87 = webVTTReadFloatingPointNumberOrPercent(v81, v86, &v273 + 7, v274);
                if (!v87)
                {
                  v95 = OUTLINED_FUNCTION_16_53(0, v88, v89, v90, v91, v92, v93, v94, v233, v234, v235, v236, v237, v238, v239, v240, v241, v242, v243, v244, v245, v246, v247, v248, v249, v250, key, v252, v253, v254, v255, v256, v257, v258, alloc, v260, allocatora, v263, plista[0], plista[1], v266[0], v266[1], v267, *(&v267 + 1), v268[0], v268[1], v269, *(&v269 + 1), v270[0], v270[1], v271, *(&v271 + 1), v272, v273, v274[0]);
                  if (v95)
                  {
                    v96 = v95;
                    v97 = (HIBYTE(v273) ? v258 : v257);
                    AtomWithType = webVTTAddToCueSettingsDictionary(&cf, v97, v95);
                    CFRelease(v96);
                    if (AtomWithType)
                    {
LABEL_243:
                      Mutable = v234;
                      goto LABEL_252;
                    }
                  }

                  if (v85)
                  {
                    OUTLINED_FUNCTION_8_85();
                    v100 = OUTLINED_FUNCTION_12_69("start", v98, v99);
                    v101 = v256;
                    if (v100 || (OUTLINED_FUNCTION_8_85(), v104 = OUTLINED_FUNCTION_12_69("middle", v102, v103), v101 = v254, v104) || (OUTLINED_FUNCTION_8_85(), v107 = OUTLINED_FUNCTION_12_69("center", v105, v106), v101 = v254, v107) || (OUTLINED_FUNCTION_8_85(), v110 = OUTLINED_FUNCTION_12_69("end", v108, v109), v101 = v235, v110))
                    {
                      v111 = v255;
LABEL_122:
                      AtomWithType = webVTTAddToCueSettingsDictionary(&cf, v111, v101);
                      if (AtomWithType)
                      {
                        goto LABEL_243;
                      }

LABEL_158:
                      Mutable = v234;
                      goto LABEL_159;
                    }
                  }

LABEL_157:
                  AtomWithType = 0;
                  goto LABEL_158;
                }

                goto LABEL_132;
              }

              v112 = OUTLINED_FUNCTION_3_149("position:");
              v113 = *v63;
              if (v112 || v113 == 84 && (OUTLINED_FUNCTION_15_56(), v12))
              {
                v114 = v113 == 84;
                v115 = 2;
                if (!v114)
                {
                  v115 = 9;
                }

                v116 = &v63[v115];
                v117 = -2;
                if (!v114)
                {
                  v117 = -9;
                }

                v118 = &v62[v117];
                v119 = memchr(v116, 44, &v62[v117]);
                v120 = v119;
                if (v119)
                {
                  v121 = v119 - v116;
                }

                else
                {
                  v121 = v118;
                }

                v87 = webVTTReadFloatingPointNumberOrPercent(v116, v121, &v273 + 7, v274);
                if (!v87)
                {
                  v129 = OUTLINED_FUNCTION_16_53(0, v122, v123, v124, v125, v126, v127, v128, v233, v234, v235, v236, v237, v238, v239, v240, v241, v242, v243, v244, v245, v246, v247, v248, v249, v250, key, v252, v253, v254, v255, v256, v257, v258, alloc, v260, allocatora, v263, plista[0], plista[1], v266[0], v266[1], v267, *(&v267 + 1), v268[0], v268[1], v269, *(&v269 + 1), v270[0], v270[1], v271, *(&v271 + 1), v272, v273, v274[0]);
                  if (v129)
                  {
                    v130 = v129;
                    AtomWithType = webVTTAddToCueSettingsDictionary(&cf, key, v129);
                    CFRelease(v130);
                    if (AtomWithType)
                    {
                      goto LABEL_243;
                    }
                  }

                  if (v120)
                  {
                    OUTLINED_FUNCTION_8_85();
                    v133 = OUTLINED_FUNCTION_12_69("start", v131, v132);
                    v101 = v253;
                    if (v133 || (OUTLINED_FUNCTION_8_85(), v136 = OUTLINED_FUNCTION_12_69("line-left", v134, v135), v101 = v253, v136) || (OUTLINED_FUNCTION_8_85(), v139 = OUTLINED_FUNCTION_12_69("middle", v137, v138), v101 = v245, v139) || (OUTLINED_FUNCTION_8_85(), v142 = OUTLINED_FUNCTION_12_69("center", v140, v141), v101 = v245, v142) || (OUTLINED_FUNCTION_8_85(), v145 = OUTLINED_FUNCTION_12_69("end", v143, v144), v101 = v242, v145) || (OUTLINED_FUNCTION_8_85(), v148 = OUTLINED_FUNCTION_12_69("line-right", v146, v147), v101 = v242, v148))
                    {
                      v111 = v250;
                      goto LABEL_122;
                    }

                    OUTLINED_FUNCTION_8_85();
                    OUTLINED_FUNCTION_12_69("auto", v190, v191);
                  }

                  goto LABEL_157;
                }

LABEL_132:
                AtomWithType = v87;
                goto LABEL_159;
              }

              v149 = OUTLINED_FUNCTION_3_149("size:");
              v150 = *v63;
              if (v149 || v150 == 83 && (OUTLINED_FUNCTION_15_56(), v12))
              {
                v151 = v150 == 83;
                v152 = 2;
                if (!v151)
                {
                  v152 = 5;
                }

                v153 = -2;
                if (!v151)
                {
                  v153 = -5;
                }

                v87 = webVTTReadFloatingPointNumberOrPercent(&v63[v152], &v62[v153], &v273 + 7, v274);
                if (!v87)
                {
                  v180 = OUTLINED_FUNCTION_16_53(0, v154, v155, v156, v157, v158, v159, v160, v233, v234, v235, v236, v237, v238, v239, v240, v241, v242, v243, v244, v245, v246, v247, v248, v249, v250, key, v252, v253, v254, v255, v256, v257, v258, alloc, v260, allocatora, v263, plista[0], plista[1], v266[0], v266[1], v267, *(&v267 + 1), v268[0], v268[1], v269, *(&v269 + 1), v270[0], v270[1], v271, *(&v271 + 1), v272, v273, v274[0]);
                  if (v180)
                  {
                    v181 = v180;
                    AtomWithType = webVTTAddToCueSettingsDictionary(&cf, v247, v180);
                    CFRelease(v181);
                    if (AtomWithType)
                    {
                      goto LABEL_252;
                    }

                    goto LABEL_159;
                  }

                  goto LABEL_155;
                }

                goto LABEL_132;
              }

              if (OUTLINED_FUNCTION_3_149("align:") || *v63 == 65 && (OUTLINED_FUNCTION_15_56(), v12))
              {
                OUTLINED_FUNCTION_9_75();
                v163 = OUTLINED_FUNCTION_13_55("start", v161, v162);
                v164 = v249;
                if (v163 || (OUTLINED_FUNCTION_9_75(), v167 = OUTLINED_FUNCTION_13_55("middle", v165, v166), v164 = v244, v167) || (OUTLINED_FUNCTION_9_75(), v170 = OUTLINED_FUNCTION_13_55("center", v168, v169), v164 = v244, v170) || (OUTLINED_FUNCTION_9_75(), v173 = OUTLINED_FUNCTION_13_55("end", v171, v172), v164 = v241, v173) || (OUTLINED_FUNCTION_9_75(), v176 = OUTLINED_FUNCTION_13_55("left", v174, v175), v164 = v240, v176) || (OUTLINED_FUNCTION_9_75(), v179 = OUTLINED_FUNCTION_13_55("right", v177, v178), v164 = v239, v179))
                {
                  AtomWithType = webVTTAddToCueSettingsDictionary(&cf, v248, v164);
                }

                if (AtomWithType)
                {
                  goto LABEL_252;
                }
              }

              else if (OUTLINED_FUNCTION_3_149("region:"))
              {
                OUTLINED_FUNCTION_14_65();
                v187 = CFStringCreateWithBytes(v182, v183, v184, v185, v186);
                if (!v187)
                {
                  goto LABEL_250;
                }

                v188 = v187;
                AtomWithType = webVTTAddToCueSettingsDictionary(&cf, v243, v187);
                CFRelease(v188);
                if (AtomWithType)
                {
                  goto LABEL_252;
                }

                MutableCopy = CFStringCreateMutableCopy(alloc, 0, @"::cue-region(");
                v48 = MutableCopy;
                if (!MutableCopy)
                {
                  goto LABEL_250;
                }

                CFStringAppend(MutableCopy, @"#");
                CFStringAppend(v48, v188);
                CFStringAppend(v48, @""));
LABEL_155:
                AtomWithType = 0;
              }
            }
          }

LABEL_159:
          v291 = &v62[v61];
          v192 = OUTLINED_FUNCTION_19_44();
        }

        while (webVTTFindNextCueSetting(v192, v193, v194, v195, v196));
      }

      CFRelease(v286);
      v286 = 0;
      v46 = v235;
      v47 = v236;
      goto LABEL_183;
    }

    if (v290 == 1668573549 && v50 < 0.0)
    {
      value = 0;
      dataPointerOut[0] = 0;
      v293 = 0;
      OUTLINED_FUNCTION_613();
      DataPointer = FigAtomStreamReadCurrentAtomDataAndCreateBBuf();
      if (DataPointer)
      {
        goto LABEL_251;
      }

      DataPointer = CMBlockBufferGetDataPointer(v284, 0, &value, 0, dataPointerOut);
      if (DataPointer)
      {
        goto LABEL_251;
      }

      if (!FigWebVTTReadTime(dataPointerOut, &value, &v293, 0, 0))
      {
        v50 = *&v293;
      }

      CFRelease(v284);
      v284 = 0;
      goto LABEL_183;
    }

    if (v290 == 1987275108)
    {
      break;
    }

    if (v290 == 1768187246)
    {
      if (v49)
      {
        goto LABEL_183;
      }

      value = 0;
      dataPointerOut[0] = 0;
      OUTLINED_FUNCTION_613();
      BBuf = FigAtomStreamReadCurrentAtomDataAndCreateBBuf();
      if (BBuf || (OUTLINED_FUNCTION_613(), BBuf = CMBlockBufferGetDataPointer(v198, v199, v200, v201, v202), BBuf))
      {
        AtomWithType = BBuf;
        goto LABEL_223;
      }

      v49 = CFStringCreateMutableCopy(alloc, 0, @"::cue(");
      if (!v49)
      {
        goto LABEL_250;
      }

      OUTLINED_FUNCTION_14_65();
      v208 = CFStringCreateWithBytes(v203, v204, v205, v206, v207);
      if (!v208)
      {
        goto LABEL_250;
      }

      v209 = v208;
      CFStringAppend(v49, v208);
      CFRelease(v209);
      CFStringAppend(v49, @""));
      CFRelease(v283);
      v283 = 0;
    }

    else if (v290 == 1885436268 && !v285)
    {
      OUTLINED_FUNCTION_613();
      DataPointer = FigAtomStreamReadCurrentAtomDataAndCreateBBuf();
      if (DataPointer)
      {
        goto LABEL_251;
      }
    }

LABEL_183:
    AtomWithType = FigAtomStreamAdvanceToNextAtom();
  }

  LODWORD(dataPointerOut[0]) = 0;
  DataPointer = FigAtomStreamReadCurrentAtomData();
  if (DataPointer)
  {
    goto LABEL_251;
  }

  v210 = bswap32(dataPointerOut[0]);
  LODWORD(dataPointerOut[0]) = v210;
  v233 = v210;
  v211 = CFStringCreateWithFormat(alloc, 0, @"%u");
  if (v211)
  {
    v212 = v211;
    AtomWithType = webVTTAddToCueSettingsDictionary(&cf, v252, v211);
    CFRelease(v212);
    if (AtomWithType)
    {
      goto LABEL_226;
    }

    goto LABEL_183;
  }

LABEL_250:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_2_177();
  DataPointer = FigSignalErrorAtGM();
LABEL_251:
  AtomWithType = DataPointer;
LABEL_252:
  if (!AtomWithType)
  {
LABEL_199:
    if (CFArrayGetCount(Mutable) >= 1)
    {
      AtomWithType = 0;
      *v260 = Mutable;
LABEL_201:
      Mutable = 0;
      goto LABEL_226;
    }

    AtomWithType = 0;
  }

LABEL_226:
  if (v283)
  {
    CFRelease(v283);
  }

  if (v49)
  {
    CFRelease(v49);
  }

  if (v48)
  {
    CFRelease(v48);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v286)
  {
    CFRelease(v286);
  }

  if (v284)
  {
    CFRelease(v284);
  }

  if (v285)
  {
    CFRelease(v285);
  }

  return AtomWithType;
}

uint64_t webVTTAddToHeaderGather(uint64_t a1, uint64_t a2, size_t a3)
{
  if (!a3)
  {
    return 0;
  }

  OUTLINED_FUNCTION_180_1();
  v8 = *(v4 + 64);
  v7 = (v4 + 64);
  v6 = v8;
  if (!v8)
  {
    result = CMBlockBufferCreateEmpty(*MEMORY[0x1E695E480], 0, 0, v7);
    if (result)
    {
      return result;
    }

    v6 = *v7;
  }

  return webVTTAppendTextToBlockBuffer(v3, a3, v6);
}

uint64_t webVTTAddToGather(uint64_t a1, uint64_t a2, size_t a3)
{
  if (!a3)
  {
    return 0;
  }

  OUTLINED_FUNCTION_180_1();
  v8 = *(v4 + 56);
  v7 = (v4 + 56);
  v6 = v8;
  if (!v8)
  {
    result = CMBlockBufferCreateEmpty(*MEMORY[0x1E695E480], 0, 0, v7);
    if (result)
    {
      return result;
    }

    v6 = *v7;
  }

  return webVTTAppendTextToBlockBuffer(v3, a3, v6);
}

uint64_t createCSSDataFromWebVTTConfiguration(const __CFData *a1, const __CFAllocator *a2, CFIndex *a3)
{
  BytePtr = CFDataGetBytePtr(a1);
  Length = CFDataGetLength(a1);
  blockBufferOut = 0;
  if (!Length)
  {
    v23 = 0;
    goto LABEL_46;
  }

  v8 = Length;
  v27 = a3;
  v9 = 0;
  v10 = MEMORY[0x1E69E9830];
  do
  {
    v11 = 0;
    while (1)
    {
      v12 = BytePtr[v11];
      if (v12 == 10 || v12 == 13)
      {
        break;
      }

      if (v8 == ++v11)
      {
        goto LABEL_11;
      }
    }

    if (v8 == v11)
    {
LABEL_11:
      v14 = 0;
      v11 = v8;
LABEL_12:
      v15 = v8;
      goto LABEL_20;
    }

    v16 = BytePtr[v11];
    if (v16 == 10)
    {
      goto LABEL_18;
    }

    if (v16 != 13)
    {
      v14 = 0;
      goto LABEL_12;
    }

    if (v8 - 1 == v11 || BytePtr[v11 + 1] != 10)
    {
LABEL_18:
      v14 = 1;
    }

    else
    {
      v14 = 2;
    }

    v15 = v14 + v11;
LABEL_20:
    if (v15 == v14)
    {
      v9 = 0;
    }

    if (v9)
    {
      v17 = blockBufferOut;
      if (!blockBufferOut)
      {
        v18 = CMBlockBufferCreateEmpty(a2, 0, 0, &blockBufferOut);
        if (v18)
        {
          goto LABEL_50;
        }

        v17 = blockBufferOut;
      }

      v18 = webVTTAppendTextToBlockBuffer(BytePtr, v15, v17);
      if (v18)
      {
LABEL_50:
        v25 = v18;
        v23 = 0;
        goto LABEL_47;
      }
    }

    if (v15 >= 5 && !strncmp(BytePtr, "STYLE", 5uLL))
    {
      v19 = v15 - 5;
      if (v19)
      {
        v20 = (BytePtr + 5);
        do
        {
          v21 = *v20;
          if ((v21 & 0x80000000) != 0)
          {
            if (!__maskrune(v21, 0x4000uLL))
            {
              goto LABEL_37;
            }
          }

          else if ((*(v10 + 4 * v21 + 60) & 0x4000) == 0)
          {
            goto LABEL_37;
          }

          ++v20;
          --v19;
        }

        while (v19);
      }

      v9 = 1;
    }

LABEL_37:
    BytePtr += v14 + v11;
    v8 -= v14 + v11;
  }

  while (v8);
  Length = blockBufferOut;
  if (!blockBufferOut)
  {
    v23 = 0;
    a3 = v27;
    goto LABEL_46;
  }

  DataLength = CMBlockBufferGetDataLength(blockBufferOut);
  v23 = malloc_type_malloc(DataLength, 0x5882C3BDuLL);
  if (v23)
  {
    v24 = CMBlockBufferCopyDataBytes(blockBufferOut, 0, DataLength, v23);
    a3 = v27;
    if (!v24)
    {
      Length = CFDataCreate(a2, v23, DataLength);
LABEL_46:
      v25 = 0;
      *a3 = Length;
      goto LABEL_47;
    }
  }

  else
  {
    fig_log_get_emitter();
    v24 = FigSignalErrorAtGM();
  }

  v25 = v24;
LABEL_47:
  free(v23);
  if (blockBufferOut)
  {
    CFRelease(blockBufferOut);
  }

  return v25;
}

uint64_t webVTTPopTag(uint64_t a1, char a2, const __CFString *a3, uint64_t a4)
{
  v8 = *MEMORY[0x1E6960850];
  active = webVTTFindActiveAttribute(a1, *MEMORY[0x1E6960850]);
  if (!active)
  {
    return 0;
  }

  v10 = active;
  v24 = a1;
  MutableCopy = CFArrayCreateMutableCopy(*MEMORY[0x1E695E480], 0, *(active + 40));
  Count = CFArrayGetCount(MutableCopy);
  if (Count >= 1)
  {
    v13 = Count + 1;
    while (1)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(MutableCopy, v13 - 2);
      if (a3)
      {
        v15 = CFStringFind(ValueAtIndex, a3, 0);
        if (!v15.location && CFStringGetLength(a3) == v15.length)
        {
          break;
        }
      }

      OUTLINED_FUNCTION_14_65();
      if (CFStringGetBytes(v16, v25, v17, v18, 0, v19, 1, 0) == 1 && a2 == 0)
      {
        break;
      }

      if (--v13 <= 1)
      {
        goto LABEL_14;
      }
    }

    CFArrayRemoveValueAtIndex(MutableCopy, v13 - 2);
  }

LABEL_14:
  if (*(v10 + 24) == a4)
  {
    v21 = *(v10 + 40);
    if (v21)
    {
      CFRelease(v21);
    }

    v22 = 0;
    *(v10 + 40) = CFRetain(MutableCopy);
  }

  else
  {
    v22 = webVTTAddActiveAttribute(v24, v8, MutableCopy, a4);
  }

  *(v10 + 24) = a4;
  CFRelease(MutableCopy);
  return v22;
}

uint64_t webVTTSampleBufferParserSetStyleQueueFromTextMarkup(void *a1, const __CFArray *a2)
{
  webVTTStyleQueueFree(a1);
  Count = CFArrayGetCount(a2);
  if (Count < 1)
  {
LABEL_6:

    return webVTTAddGenericStylesToStyleList(a1);
  }

  else
  {
    v5 = Count;
    v6 = 0;
    v7 = *MEMORY[0x1E6960A88];
    while (1)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(a2, v6);
      Value = CFDictionaryGetValue(ValueAtIndex, v7);
      if (Value)
      {
        result = webVTTAddStyle(a1, Value, ValueAtIndex);
        if (result)
        {
          break;
        }
      }

      if (v5 == ++v6)
      {
        goto LABEL_6;
      }
    }
  }

  return result;
}

uint64_t WebVTTGetSamplePTS_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWebVTTReadTime_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWebVTTReadTime_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWebVTTReadTime_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWebVTTReadTime_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWebVTTReadTime_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTParserSetSourceLabel_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTParserSetSourceLabel_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTParserSetSourceLabel_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTParserSetSourceLabel_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTParserSetSourceLabel_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTParserCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTAddStyle_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTAddGenericStylesToStyleList_cold_1()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *v0 = result;
  return result;
}

uint64_t webVTTAddGenericStylesToStyleList_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTAddToCueSettingsDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void webVTTParseCueAndCreateAttributedString_cold_3()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *v0 = FigSignalErrorAtGM();
  CFRelease(v1);
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void webVTTParseCueAndCreateAttributedString_cold_6(uint64_t a1, const void *a2, const void *a3, _DWORD *a4)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a4 = FigSignalErrorAtGM();
  CFRelease(a2);
  CFRelease(a3);
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL webVTTParseCueAndCreateAttributedString_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

void *webVTTParseCueAndCreateAttributedString_cold_10(void *result, uint64_t a2, void *a3, void **a4)
{
  result[2] = a2;
  v4 = *a3;
  if (*a3)
  {
    while (*(a2 + 48) <= *(v4[2] + 48))
    {
      v4 = *v4;
      if (!v4)
      {
        goto LABEL_4;
      }
    }

    a4 = (v4 + 1);
    v5 = v4[1];
    *result = v4;
    result[1] = v5;
  }

  else
  {
LABEL_4:
    v5 = *a4;
    *result = 0;
    result[1] = v5;
  }

  *v5 = result;
  *a4 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_11(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_12(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_13(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTParseCueAndCreateAttributedString_cold_14(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTCreateMetadataDictionaryFromFormatDescripton_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTCreateMetadataDictionaryFromFormatDescripton_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTCreateMetadataDictionaryFromFormatDescripton_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t WebVTTCreateMetadataDictionaryFromFormatDescripton_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTAddCueToSampleQueue_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTCreateSelectorFromString_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTCreateSelectorFromString_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTCreateSelectorFromString_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTCreateSelectorFromString_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTCreateSelectorFromString_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTCreateSelectorFromString_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTPushTag_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTAddActiveAttribute_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTProcessHeaderLineForMetadata_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTProcessHeaderLineForMetadata_cold_2(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t webVTTProcessHeaderLineForMetadata_cold_3(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t webVTTProcessHeaderLineForMetadata_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTProcessHeaderLineForMetadata_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTProcessHeaderLineForMetadata_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void webVTTInitMetadataDictionaryIfNecessary_cold_1()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *v0 = FigSignalErrorAtGM();

  CFRelease(v1);
}

uint64_t webVTTInitMetadataDictionaryIfNecessary_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t webVTTReadPercentageXandY_cold_1()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *v0 = result;
  return result;
}

void octtextrp_clearOutTextImage(uint64_t a1, int a2)
{
  destinationBuffer = 0;
  sourceBytes = a2;
  v5 = 0;
  v4 = 0;
  v6 = 0;
  if (!CMBlockBufferCreateWithMemoryBlock(*MEMORY[0x1E695E480], 0, 0x18uLL, *MEMORY[0x1E695E480], 0, 0, 0x18uLL, 1u, &destinationBuffer) && !CMBlockBufferReplaceDataBytes(&sourceBytes, destinationBuffer, 0, 0x18uLL))
  {
    FigTransportGetRemoteRootObject();
    NeroTransportSendAsyncMessage();
  }

  if (destinationBuffer)
  {
    CFRelease(destinationBuffer);
  }
}

uint64_t octtextrp_sendTextImage(uint64_t a1, int a2, int a3)
{
  v29 = 0;
  v28 = 0;
  v5 = *(MEMORY[0x1E695F050] + 16);
  v27.origin = *MEMORY[0x1E695F050];
  v27.size = v5;
  memset(sourceBytes, 0, sizeof(sourceBytes));
  dataPointerOut = 0;
  destinationBuffer = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    fig_log_get_emitter();
LABEL_3:
    DataPointer = FigSignalErrorAtGM();
LABEL_26:
    v11 = DataPointer;
    goto LABEL_27;
  }

  v8 = DerivedStorage;
  v9 = *(DerivedStorage + 32);
  if (!v9)
  {
    v11 = 4294954444;
    goto LABEL_27;
  }

  if (!a3)
  {
LABEL_9:
    VTable = CMBaseObjectGetVTable();
    DataPointer = (*(*(VTable + 16) + 48))(v9, 0, &v28, &v27);
    if (DataPointer)
    {
      goto LABEL_26;
    }

    LODWORD(sourceBytes[0]) = a2;
    if (CGRectIsEmpty(v27))
    {
      memset(sourceBytes + 4, 0, 20);
      v13 = 24;
      goto LABEL_20;
    }

    Width = CVPixelBufferGetWidth(v28);
    HIDWORD(sourceBytes[0]) = Width;
    Height = CVPixelBufferGetHeight(v28);
    LODWORD(sourceBytes[1]) = Height;
    BytesPerRow = CVPixelBufferGetBytesPerRow(v28);
    HIDWORD(sourceBytes[1]) = BytesPerRow;
    LODWORD(sourceBytes[2]) = 1852994665;
    MaxCompressionSizeFor32BPP = NeroTextImageCodec_GetMaxCompressionSizeFor32BPP(Width, Height);
    v18 = *(v8 + 104);
    if (v18)
    {
      v19 = *(v8 + 112);
      if (MaxCompressionSizeFor32BPP <= v19)
      {
LABEL_18:
        v23 = v19;
        CVPixelBufferLockBaseAddress(v28, 0);
        BaseAddress = CVPixelBufferGetBaseAddress(v28);
        v11 = NeroTextImageCodec_Compress32BPPImage(BaseAddress, Width, Height, BytesPerRow, *(v8 + 104), &v23);
        CVPixelBufferUnlockBaseAddress(v28, 0);
        if (v11)
        {
          goto LABEL_27;
        }

        HIDWORD(sourceBytes[2]) = v23;
        v13 = v23 + 24;
LABEL_20:
        DataPointer = CMBlockBufferCreateWithMemoryBlock(*MEMORY[0x1E695E480], 0, v13, *MEMORY[0x1E695E480], 0, 0, v13, 1u, &destinationBuffer);
        if (DataPointer)
        {
          goto LABEL_26;
        }

        DataPointer = CMBlockBufferReplaceDataBytes(sourceBytes, destinationBuffer, 0, 0x18uLL);
        if (DataPointer)
        {
          goto LABEL_26;
        }

        if (SHIDWORD(sourceBytes[2]) >= 1)
        {
          DataPointer = CMBlockBufferGetDataPointer(destinationBuffer, 0x18uLL, 0, 0, &dataPointerOut);
          if (DataPointer)
          {
            goto LABEL_26;
          }

          memcpy(dataPointerOut, *(v8 + 104), SHIDWORD(sourceBytes[2]));
        }

        FigTransportGetRemoteRootObject();
        DataPointer = NeroTransportSendAsyncMessage();
        goto LABEL_26;
      }

      free(v18);
      *(v8 + 104) = 0;
      *(v8 + 112) = 0;
    }

    v20 = malloc_type_calloc(1uLL, MaxCompressionSizeFor32BPP, 0x100004077774924uLL);
    *(v8 + 104) = v20;
    if (!v20)
    {
      fig_log_get_emitter();
      goto LABEL_3;
    }

    *(v8 + 112) = MaxCompressionSizeFor32BPP;
    v19 = MaxCompressionSizeFor32BPP;
    goto LABEL_18;
  }

  v10 = CMBaseObjectGetVTable();
  v11 = (*(*(v10 + 16) + 40))(v9, &v29);
  if (!v11 && v29)
  {
    v9 = *(v8 + 32);
    goto LABEL_9;
  }

LABEL_27:
  CVPixelBufferRelease(v28);
  if (destinationBuffer)
  {
    CFRelease(destinationBuffer);
  }

  return v11;
}

uint64_t octtextrp_CreateRenderPipelineCommon_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t octtextrp_CreateRenderPipelineCommon_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t octtextrp_closedCaptionsRenderCallback_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t __octtextrp_closedCaptionsRenderCallback_block_invoke_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t __octtextrp_closedCaptionsRenderCallback_block_invoke_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t __octtextrp_closedCaptionsRenderCallback_block_invoke_cold_3()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t __octtextrp_closedCaptionsRenderCallback_block_invoke_cold_4(uint64_t a1)
{
  result = octtextrp_sendTextImage(a1, 1, 1);
  if (result)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t __octtextrp_closedCaptionsRenderCallback_block_invoke_cold_5()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_3()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_4()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_5()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_6()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_7(uint64_t a1)
{
  result = octtextrp_sendTextImage(a1, 0, 1);
  if (result)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t octtextrp_rasterizeAndDisplaySubtitle_cold_8()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t HandleMutableMovieMessage(_xpc_connection_s *a1, void *a2, void *a3)
{
  v112 = *MEMORY[0x1E69E9840];
  v97 = 0;
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
LABEL_117:
    v37 = OpCode;
    goto LABEL_118;
  }

  OUTLINED_FUNCTION_6_110();
  v8 = v8 || v7 == 1668441714;
  v11 = v8 || v7 == 1668443508 || v7 == 1668445298 || v7 == 1668445282;
  v12 = MEMORY[0x1E69615A0];
  if (!v11)
  {
    xpc_dictionary_get_uint64(a2, *MEMORY[0x1E69615A0]);
    OpCode = FigXPCServerLookupAndRetainAssociatedObject();
    if (!OpCode)
    {
      OUTLINED_FUNCTION_9_76();
      if (v8 || (OUTLINED_FUNCTION_9_76(), v8))
      {
        v37 = 0;
        goto LABEL_118;
      }

      switch(v26)
      {
        case 1634887014:
          v48 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieAddTrackReferenceToTrackMessage(v48, v49);
          break;
        case 1684368500:
          v50 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieDeleteTrackMessage(v50, v51);
          break;
        case 1685024621:
          OpCode = FigXPCServerDisassociateObjectWithConnection();
          break;
        case 1685218662:
          v52 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieDeleteTrackReferenceToTrackMessage(v52, v53);
          break;
        case 1768248435:
          v57 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieInsertEmptyTrackSegmentMessage(v57, v58);
          break;
        case 1768256288:
          v61 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieInsertEmptySegmentMessage(v61);
          break;
        case 1768844660:
          v62 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieInsertMediaIntoTrackMessage(v62, v63);
          break;
        case 1919767667:
          v59 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieDeleteTrackSegmentMessage(v59, v60);
          break;
        case 1919775520:
          v54 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieDeleteSegmentMessage(v54);
          break;
        case 1935889523:
          v55 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieScaleTrackSegmentMessage(v55, v56);
          break;
        case 1935897376:
          v64 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieScaleSegmentMessage(v64);
          break;
        case 778268793:
          v91 = OUTLINED_FUNCTION_1_182(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieCopyPropertyMessage(v91);
          break;
        case 779314548:
          v85 = OUTLINED_FUNCTION_2_178(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieSetPropertyMessage(v85);
          break;
        case 1633969268:
          v76 = OUTLINED_FUNCTION_1_182(v18, v19, v20, v21, v22, v23, v24, v25, 0, 0, 0, 0);
          OpCode = HandleMutableMovieAddTrackMessage(v76, v77, v78);
          break;
        default:
          OUTLINED_FUNCTION_9_76();
          if (v8)
          {
            v79 = OUTLINED_FUNCTION_0_201();
            OpCode = HandleMutableMovieAppendMediaDataMessage(v79, v80, v81, a3);
          }

          else
          {
            OUTLINED_FUNCTION_9_76();
            if (v8)
            {
              v70 = OUTLINED_FUNCTION_0_201();
              OpCode = HandleMutableMovieAppendSampleBufferMessage(v70, v71, v72);
            }

            else
            {
              switch(v35)
              {
                case 1668310642:
                  v66 = OUTLINED_FUNCTION_0_201();
                  OpCode = HandleMutableMovieCopyFormatReaderMessage(v66, v67, v68, a3);
                  break;
                case 1668311140:
                  v69 = OUTLINED_FUNCTION_1_182(v27, v28, v29, v30, v31, v32, v33, v34, 0, 0, 0, 0);
                  OpCode = HandleMutableMovieCopyHeaderDataMessage(v69);
                  break;
                case 1668314224:
                  v95 = OUTLINED_FUNCTION_1_182(v27, v28, v29, v30, v31, v32, v33, v34, 0, 0, 0, 0);
                  OpCode = HandleMutableMovieCopyTrackPropertyMessage(v95, v96);
                  break;
                case 1735680884:
                  v86 = OUTLINED_FUNCTION_1_182(v27, v28, v29, v30, v31, v32, v33, v34, 0, 0, 0, 0);
                  OpCode = HandleMutableMovieGetTrackCompatibleWithTrackReaderMessage(v86, v87, v88);
                  break;
                case 1769170546:
                  v82 = OUTLINED_FUNCTION_0_201();
                  OpCode = HandleMutableMovieInsertSegmentFromFormatReaderMessage(v82, v83, v84);
                  break;
                case 1769174130:
                  v92 = OUTLINED_FUNCTION_0_201();
                  OpCode = HandleMutableMovieInsertSegmentFromTrackReaderMessage(v92, v93, v94);
                  break;
                case 1937011824:
                  v89 = OUTLINED_FUNCTION_2_178(v27, v28, v29, v30, v31, v32, v33, v34, 0, 0, 0, 0);
                  OpCode = HandleMutableMovieSetTrackPropertyMessage(v89, v90);
                  break;
                case 1952540260:
                  v73 = OUTLINED_FUNCTION_1_182(v27, v28, v29, v30, v31, v32, v33, v34, 0, 0, 0, 0);
                  OpCode = HandleMutableMovieCanTrackAcceptFormatDescriptionMessage(v73, v74, v75);
                  break;
                case 2003330146:
                case 2003986532:
                  OUTLINED_FUNCTION_0_201();
                  OpCode = HandleMutableMovieWriteHeaderMessage();
                  break;
                default:
                  v37 = 4294951138;
                  goto LABEL_118;
              }
            }
          }

          break;
      }
    }

    goto LABEL_117;
  }

  v108 = 1752524863;
  v106 = 0;
  v107 = 0;
  v104 = 0;
  v105 = 0;
  v102 = 0;
  v103 = 0;
  v100 = 0;
  value = 0;
  OUTLINED_FUNCTION_8_86();
  xpc_connection_get_audit_token();
  v13 = FigXPCMessageGetOpCode();
  if (v13)
  {
    goto LABEL_121;
  }

  v13 = FigXPCMessageCopyCFDictionary();
  if (v13)
  {
    goto LABEL_121;
  }

  OUTLINED_FUNCTION_6_110();
  if (v8 || v14 == 1668441714)
  {
    uint64 = xpc_dictionary_get_uint64(a2, "FormatReader");
    if (uint64)
    {
      v17 = uint64;
      if (FigServer_IsMediaparserd() && !FigFormatReaderServerIsObjectIDLocallyServed(v17))
      {
        v13 = FigFormatReaderXPCRemoteCopyFormatReaderForObjectIDFromMediaserverd(v17, &v106);
        if (v13)
        {
LABEL_121:
          v37 = v13;
          v40 = 0;
          goto LABEL_90;
        }
      }

      else
      {
        v13 = FigXPCFormatReaderServerCopyFormatReaderForID(v17, &v106);
        if (v13)
        {
          goto LABEL_121;
        }
      }
    }
  }

  v13 = FigXPCMessageCopyCFString();
  if (v13)
  {
    goto LABEL_121;
  }

  v38 = CreateServedMutableMovieState(&v100);
  if (v38)
  {
    v37 = v38;
    v40 = v100;
    goto LABEL_90;
  }

  xpc_connection_get_pid(a1);
  v39 = FigOSTransactionCreate();
  v40 = v100;
  *(v100 + 16) = v39;
  if (!v39)
  {
    fig_log_get_emitter();
    v44 = FigSignalErrorAtGM();
    goto LABEL_138;
  }

  OUTLINED_FUNCTION_6_110();
  if (v8)
  {
    v44 = FigXPCMessageCopyCFObject();
    if (v44)
    {
      goto LABEL_138;
    }

    v44 = FigMutableMovieCreateFromData(*MEMORY[0x1E695E480], v104, v102, v103);
    if (v44)
    {
      goto LABEL_138;
    }
  }

  else
  {
    OUTLINED_FUNCTION_6_110();
    if (v8)
    {
      v44 = FigMutableMovieCreateFromFormatReader(*MEMORY[0x1E695E480], v106, v102, v103);
      if (v44)
      {
        goto LABEL_138;
      }
    }

    else
    {
      OUTLINED_FUNCTION_6_110();
      if (v8)
      {
        v44 = FigXPCMessageCopyCFURL();
        if (v44)
        {
          goto LABEL_138;
        }

        v44 = mutableMovieServer_SandboxRegistrationRetrieveFromMessageAndAssociateToURL();
        if (v44)
        {
          goto LABEL_138;
        }

        token = v99;
        FigServer_GetClientPIDFromAuditToken();
        v44 = FigSandboxAssertionCreateForPID();
        if (v44)
        {
          goto LABEL_138;
        }

        v47 = *MEMORY[0x1E695E480];
        token = v99;
        *(v40 + 8) = SecTaskCreateWithAuditToken(v47, &token);
        v111 = v99;
        v110 = 0;
        if (_CFURLIsFileURL())
        {
          if (!FigCFURLGetFileStats() && v110 >= 1)
          {
            token = v111;
            if (!FigServer_IsReadOnlyFileOpeningPermittedForAuditToken())
            {
              fig_log_get_emitter();
              v44 = FigSignalErrorAtGM();
              if (v44)
              {
                goto LABEL_138;
              }
            }
          }
        }

        v44 = FigMutableMovieCreateWithURL(v47, v105, v102, v103, &v107);
        if (v44)
        {
          goto LABEL_138;
        }
      }

      else
      {
        OUTLINED_FUNCTION_6_110();
        if (v8)
        {
          v45 = xpc_dictionary_get_uint64(a2, "ByteStream");
          pid = xpc_connection_get_pid(a1);
          v44 = FigByteStreamRemoteCreateWithPlaybackProcessObjectID(v45, pid, &cf);
          if (v44)
          {
            goto LABEL_138;
          }

          v44 = FigMutableMovieCreateWithByteStream(*MEMORY[0x1E695E480], cf, v102, v103, &v107);
          if (v44)
          {
            goto LABEL_138;
          }
        }

        else
        {
          OUTLINED_FUNCTION_6_110();
          if (!v8)
          {
            v37 = 4294951138;
            goto LABEL_90;
          }

          v44 = FigMutableMovieCreateEmpty(*MEMORY[0x1E695E480], v102, v103, v106, &v107, v41, v42, v43);
          if (v44)
          {
LABEL_138:
            v37 = v44;
            goto LABEL_90;
          }
        }
      }
    }
  }

  v37 = FigXPCServerAssociateObjectWithConnection();
  if (v37)
  {
    if (value)
    {
      FigXPCServerDisassociateObjectWithConnection();
      goto LABEL_91;
    }
  }

  else
  {
    xpc_dictionary_set_uint64(a3, *v12, value);
    v40 = 0;
    value = 0;
  }

LABEL_90:
  DisposeServedMutableMovieState(v40);
LABEL_91:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v107)
  {
    CFRelease(v107);
  }

  if (v106)
  {
    CFRelease(v106);
  }

  if (v102)
  {
    CFRelease(v102);
  }

  if (v103)
  {
    CFRelease(v103);
  }

  if (v105)
  {
    CFRelease(v105);
  }

  if (v104)
  {
    CFRelease(v104);
  }

LABEL_118:
  if (v97)
  {
    CFRelease(v97);
  }

  return v37;
}

uint64_t HandleMutableMovieCopyPropertyMessage(uint64_t a1)
{
  OUTLINED_FUNCTION_570();
  v2 = FigXPCMessageCopyCFString();
  if (v2)
  {
    goto LABEL_21;
  }

  if (!cf1)
  {
    fig_log_get_emitter();
    v2 = FigSignalErrorAtGM();
LABEL_21:
    MetadataBinaryPListData = v2;
    goto LABEL_15;
  }

  FigBaseObject = FigMutableMovieGetFigBaseObject(a1);
  v4 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v4)
  {
    MetadataBinaryPListData = 4294954514;
    goto LABEL_15;
  }

  v5 = *MEMORY[0x1E695E480];
  v2 = v4(FigBaseObject, cf1, *MEMORY[0x1E695E480], &v11);
  if (v2)
  {
    goto LABEL_21;
  }

  if (CFEqual(cf1, @"Metadata"))
  {
    MetadataBinaryPListData = FigRemote_CreateMetadataBinaryPListData(v11, v5, &cf);
    v7 = cf;
    if (MetadataBinaryPListData)
    {
      goto LABEL_12;
    }

    v8 = v11;
    v11 = cf;
    if (cf)
    {
      CFRetain(cf);
    }

    if (v8)
    {
      CFRelease(v8);
    }
  }

  MetadataBinaryPListData = FigXPCMessageSetCFObject();
  v7 = cf;
LABEL_12:
  if (v7)
  {
    CFRelease(v7);
  }

LABEL_15:
  if (v11)
  {
    CFRelease(v11);
  }

  if (cf1)
  {
    CFRelease(cf1);
  }

  return MetadataBinaryPListData;
}

uint64_t HandleMutableMovieSetPropertyMessage(uint64_t a1)
{
  OUTLINED_FUNCTION_570();
  OUTLINED_FUNCTION_29_12();
  MetadataFromBinaryPListData = FigXPCMessageCopyCFString();
  if (MetadataFromBinaryPListData)
  {
    goto LABEL_12;
  }

  if (!cf1)
  {
    fig_log_get_emitter();
    MetadataFromBinaryPListData = FigSignalErrorAtGM();
    goto LABEL_12;
  }

  MetadataFromBinaryPListData = FigXPCMessageCopyCFObject();
  if (MetadataFromBinaryPListData)
  {
    goto LABEL_12;
  }

  if (!CFEqual(cf1, @"Metadata"))
  {
    goto LABEL_10;
  }

  MetadataFromBinaryPListData = FigRemote_CreateMetadataFromBinaryPListData(v11, *MEMORY[0x1E695E480], &cf);
  if (MetadataFromBinaryPListData)
  {
LABEL_12:
    v8 = MetadataFromBinaryPListData;
    goto LABEL_14;
  }

  v3 = v11;
  v11 = cf;
  if (cf)
  {
    CFRetain(cf);
  }

  if (v3)
  {
    CFRelease(v3);
  }

LABEL_10:
  v5 = v11;
  v4 = cf1;
  FigBaseObject = FigMutableMovieGetFigBaseObject(a1);
  v7 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (v7)
  {
    MetadataFromBinaryPListData = v7(FigBaseObject, v4, v5);
    goto LABEL_12;
  }

  v8 = 4294954514;
LABEL_14:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v11)
  {
    CFRelease(v11);
  }

  if (cf1)
  {
    CFRelease(cf1);
  }

  return v8;
}

uint64_t HandleMutableMovieCopyFormatReaderMessage(_xpc_connection_s *a1, uint64_t a2, uint64_t a3, void *a4)
{
  OUTLINED_FUNCTION_570();
  v8 = xpc_dictionary_get_BOOL(v7, "MakeImmutableSnapshot");
  OUTLINED_FUNCTION_29_12();
  v9 = FigXPCMessageCopyCFDictionary();
  if (!v9)
  {
    v10 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (!v10)
    {
      v12 = 4294954514;
      goto LABEL_10;
    }

    v9 = v10(a2, v8, cf, &v15);
    if (!v9)
    {
      if (!v15)
      {
        v11 = 0;
        goto LABEL_9;
      }

      v9 = FigXPCFormatReaderServerAssociateCopiedNeighborFormatReader(a1, v15);
      if (!v9)
      {
        v11 = v14;
LABEL_9:
        xpc_dictionary_set_uint64(a4, "FormatReader", v11);
        v12 = 0;
        goto LABEL_10;
      }
    }
  }

  v12 = v9;
LABEL_10:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  return v12;
}

uint64_t HandleMutableMovieWriteHeaderMessage()
{
  v7 = 1752524863;
  v5 = 0;
  v6 = 0;
  v4 = 0;
  OUTLINED_FUNCTION_8_86();
  xpc_connection_get_audit_token();
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode || (OpCode = FigXPCMessageCopyCFDictionary(), OpCode) || (OpCode = FigXPCMessageCopyCFString(), OpCode))
  {
    v1 = OpCode;
  }

  else
  {
    v1 = 0;
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v6)
  {
    CFRelease(v6);
  }

  if (v5)
  {
    CFRelease(v5);
  }

  if (v4)
  {
    CFRelease(v4);
  }

  return v1;
}

uint64_t HandleMutableMovieCopyHeaderDataMessage(uint64_t a1)
{
  OUTLINED_FUNCTION_570();
  OUTLINED_FUNCTION_29_12();
  v2 = FigXPCMessageCopyCFDictionary();
  if (v2 || (v2 = FigXPCMessageCopyCFString(), v2))
  {
LABEL_6:
    v4 = v2;
    goto LABEL_8;
  }

  v3 = *(*(CMBaseObjectGetVTable() + 16) + 24);
  if (v3)
  {
    v2 = v3(a1, v7, cf, *MEMORY[0x1E695E480], &v6);
    if (!v2)
    {
      v2 = FigXPCMessageSetCFData();
    }

    goto LABEL_6;
  }

  v4 = 4294954514;
LABEL_8:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v7)
  {
    CFRelease(v7);
  }

  if (v6)
  {
    CFRelease(v6);
  }

  return v4;
}

uint64_t HandleMutableMovieAddTrackMessage(uint64_t a1, xpc_object_t xdict, void *a3)
{
  LODWORD(value) = 0;
  v14 = 0;
  cf = 0;
  int64 = xpc_dictionary_get_int64(xdict, "MediaType");
  uint64 = xpc_dictionary_get_uint64(xdict, "TrackReader");
  if (uint64 && (v8 = FigXPCFormatReaderServerCopyTrackReaderForID(uint64, &v14), v8) || (v8 = FigXPCMessageCopyCFDictionary(), v8))
  {
    v12 = v8;
  }

  else
  {
    v10 = v14;
    v9 = cf;
    v11 = *(*(CMBaseObjectGetVTable() + 16) + 32);
    if (v11)
    {
      v12 = v11(a1, int64, v9, v10, &value);
      if (!v12)
      {
        xpc_dictionary_set_int64(a3, "TrackID", value);
      }
    }

    else
    {
      v12 = 4294954514;
    }
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v14)
  {
    CFRelease(v14);
  }

  return v12;
}

uint64_t HandleMutableMovieCopyTrackPropertyMessage(int a1, xpc_object_t xdict)
{
  xpc_dictionary_get_int64(xdict, "TrackID");
  result = FigXPCMessageCopyCFString();
  if (!result)
  {
    fig_log_get_emitter();
    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t HandleMutableMovieSetTrackPropertyMessage(uint64_t a1, void *a2)
{
  OUTLINED_FUNCTION_570();
  int64 = xpc_dictionary_get_int64(a2, "TrackID");
  OUTLINED_FUNCTION_29_12();
  MetadataFromBinaryPListData = FigXPCMessageCopyCFString();
  if (MetadataFromBinaryPListData)
  {
    goto LABEL_8;
  }

  if (!cf1)
  {
    fig_log_get_emitter();
    MetadataFromBinaryPListData = FigSignalErrorAtGM();
    goto LABEL_8;
  }

  if (CFEqual(cf1, @"FormatDescriptionArray"))
  {
    MetadataFromBinaryPListData = FigXPCMessageCopyFormatDescriptionArray();
    if (MetadataFromBinaryPListData)
    {
LABEL_8:
      v9 = MetadataFromBinaryPListData;
      goto LABEL_10;
    }

    v15 = 0;
  }

  else
  {
    v11 = CFEqual(cf1, @"Metadata");
    v12 = FigXPCMessageCopyCFObject();
    v9 = v12;
    if (v11)
    {
      if (v12)
      {
        goto LABEL_10;
      }

      MetadataFromBinaryPListData = FigRemote_CreateMetadataFromBinaryPListData(v15, *MEMORY[0x1E695E480], &cf);
      if (MetadataFromBinaryPListData)
      {
        goto LABEL_8;
      }

      v13 = v15;
      v15 = cf;
      if (cf)
      {
        CFRetain(cf);
      }

      if (v13)
      {
        CFRelease(v13);
      }
    }

    else if (v12)
    {
      goto LABEL_10;
    }
  }

  v7 = v15;
  v6 = cf1;
  v8 = *(*(CMBaseObjectGetVTable() + 16) + 56);
  if (v8)
  {
    MetadataFromBinaryPListData = v8(a1, int64, v6, v7);
    goto LABEL_8;
  }

  v9 = 4294954514;
LABEL_10:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  if (cf1)
  {
    CFRelease(cf1);
  }

  return v9;
}

uint64_t HandleMutableMovieAppendSampleBufferMessage(_xpc_connection_s *a1, uint64_t a2, void *a3)
{
  v19 = 0;
  v20 = 0;
  v18 = 0;
  v16 = 0;
  cf = 0;
  v15 = 0uLL;
  v13 = 0uLL;
  v14 = 0;
  ByteStreamFromMessageAndAddForMediaDataStorageURL = mutableMovieServer_CreateByteStreamFromMessageAndAddForMediaDataStorageURL(a1, a2, a3);
  if (ByteStreamFromMessageAndAddForMediaDataStorageURL || (int64 = xpc_dictionary_get_int64(a3, "TrackID"), ByteStreamFromMessageAndAddForMediaDataStorageURL = FigXPCMessageCopyCFDictionary(), ByteStreamFromMessageAndAddForMediaDataStorageURL) || (ByteStreamFromMessageAndAddForMediaDataStorageURL = FigXPCMessageCopyFormatDescription(), ByteStreamFromMessageAndAddForMediaDataStorageURL))
  {
    v11 = ByteStreamFromMessageAndAddForMediaDataStorageURL;
    v8 = 0;
  }

  else
  {
    value = xpc_dictionary_get_value(a3, "IOSurface");
    if (value)
    {
      v8 = IOSurfaceLookupFromXPCObject(value);
    }

    else
    {
      v8 = 0;
    }

    BlockBufferData = FigXPCMessageCreateBlockBufferData();
    if (BlockBufferData || (BlockBufferData = FigRemote_CreateSampleBufferFromSerializedAtomBlockBufferAndSurface(), BlockBufferData))
    {
      v11 = BlockBufferData;
    }

    else
    {
      v10 = *(*(CMBaseObjectGetVTable() + 16) + 64);
      if (v10)
      {
        v11 = v10(a2, int64, cf, v18, &v15, &v13);
        if (!v11)
        {
          FigXPCMessageSetCMTime();
          FigXPCMessageSetCMTime();
        }
      }

      else
      {
        v11 = 4294954514;
      }
    }
  }

  if (v20)
  {
    CFRelease(v20);
  }

  if (v8)
  {
    CFRelease(v8);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v18)
  {
    CFRelease(v18);
  }

  if (v19)
  {
    CFRelease(v19);
  }

  return v11;
}

uint64_t HandleMutableMovieAppendMediaDataMessage(uint64_t a1, uint64_t a2, void *a3, void *a4)
{
  OUTLINED_FUNCTION_570();
  ByteStreamFromMessageAndAddForMediaDataStorageURL = mutableMovieServer_CreateByteStreamFromMessageAndAddForMediaDataStorageURL(v7, v8, v9);
  if (ByteStreamFromMessageAndAddForMediaDataStorageURL)
  {
    v16 = ByteStreamFromMessageAndAddForMediaDataStorageURL;
  }

  else
  {
    int64 = xpc_dictionary_get_int64(a3, "TrackID");
    v12 = xpc_dictionary_get_int64(a3, "DataOffset");
    v13 = xpc_dictionary_get_int64(a3, "DataLength");
    BlockBufferData = FigXPCMessageCreateBlockBufferData();
    if (BlockBufferData || (BlockBufferData = FigXPCMessageCopyCFDictionary(), BlockBufferData))
    {
      v16 = BlockBufferData;
    }

    else
    {
      v15 = *(*(CMBaseObjectGetVTable() + 16) + 72);
      if (v15)
      {
        v16 = v15(a2, int64, cf, v12, v13, v20, &value);
        if (!v16)
        {
          xpc_dictionary_set_int64(a4, "DataOffset", value);
        }
      }

      else
      {
        v16 = 4294954514;
      }
    }

    if (cf)
    {
      CFRelease(cf);
    }
  }

  if (v20)
  {
    CFRelease(v20);
  }

  return v16;
}

uint64_t HandleMutableMovieCanTrackAcceptFormatDescriptionMessage(uint64_t a1, xpc_object_t xdict, void *a3)
{
  int64 = xpc_dictionary_get_int64(xdict, "TrackID");
  v6 = FigXPCMessageCopyFormatDescription();
  if (!v6)
  {
    v7 = *(*(CMBaseObjectGetVTable() + 16) + 96);
    if (v7)
    {
      v8 = v7(a1, int64, 0) != 0;
    }

    else
    {
      v8 = 0;
    }

    xpc_dictionary_set_BOOL(a3, "CanTrackAcceptFormatDescription", v8);
  }

  return v6;
}

uint64_t HandleMutableMovieGetTrackCompatibleWithTrackReaderMessage(uint64_t a1, xpc_object_t xdict, void *a3)
{
  memset(value, 0, sizeof(value));
  uint64 = xpc_dictionary_get_uint64(xdict, "TrackReader");
  v6 = FigXPCFormatReaderServerCopyTrackReaderForID(uint64, &value[1]);
  if (v6)
  {
    v9 = v6;
  }

  else
  {
    v7 = *&value[1];
    v8 = *(*(CMBaseObjectGetVTable() + 16) + 104);
    if (v8)
    {
      v9 = v8(a1, v7, value);
      if (!v9)
      {
        xpc_dictionary_set_int64(a3, "TrackID", value[0]);
      }
    }

    else
    {
      v9 = 4294954514;
    }
  }

  if (*&value[1])
  {
    CFRelease(*&value[1]);
  }

  return v9;
}

uint64_t HandleMutableMovieInsertSegmentFromFormatReaderMessage(uint64_t a1, uint64_t a2, void *a3)
{
  v25 = 0;
  OUTLINED_FUNCTION_7_99();
  pid = xpc_connection_get_pid(v5);
  value = xpc_dictionary_get_value(a3, "ByteStreamArray");
  if (value)
  {
    v8 = value;
    count = xpc_array_get_count(value);
    if (count)
    {
      v10 = count;
      v11 = 0;
      do
      {
        uint64 = xpc_array_get_uint64(v8, v11);
        if (uint64)
        {
          if (pid)
          {
            ByteStreamFromObjectIDAndAddForMediaDataStorageURL = mutableMovieServer_CreateByteStreamFromObjectIDAndAddForMediaDataStorageURL(a2, uint64, pid);
            if (ByteStreamFromObjectIDAndAddForMediaDataStorageURL)
            {
              goto LABEL_17;
            }
          }
        }
      }

      while (v10 != ++v11);
    }
  }

  v14 = xpc_dictionary_get_uint64(a3, "FormatReader");
  if (FigServer_IsMediaparserd() && !FigFormatReaderServerIsObjectIDLocallyServed(v14))
  {
    ByteStreamFromObjectIDAndAddForMediaDataStorageURL = FigFormatReaderXPCRemoteCopyFormatReaderForObjectIDFromMediaserverd(v14, &v25);
    if (ByteStreamFromObjectIDAndAddForMediaDataStorageURL)
    {
LABEL_17:
      v18 = ByteStreamFromObjectIDAndAddForMediaDataStorageURL;
      goto LABEL_19;
    }
  }

  else
  {
    ByteStreamFromObjectIDAndAddForMediaDataStorageURL = FigXPCFormatReaderServerCopyFormatReaderForID(v14, &v25);
    if (ByteStreamFromObjectIDAndAddForMediaDataStorageURL)
    {
      goto LABEL_17;
    }
  }

  FigXPCMessageGetCMTimeRange();
  FigXPCMessageGetCMTime();
  v15 = xpc_dictionary_get_uint64(a3, "Flags");
  v16 = v25;
  v17 = *(*(OUTLINED_FUNCTION_4_146() + 16) + 176);
  if (v17)
  {
    v28[0] = v22;
    v28[1] = v23;
    v28[2] = v24;
    v26 = v20;
    v27 = v21;
    ByteStreamFromObjectIDAndAddForMediaDataStorageURL = v17(a2, v16, v28, &v26, v15);
    goto LABEL_17;
  }

  v18 = 4294954514;
LABEL_19:
  if (v25)
  {
    CFRelease(v25);
  }

  return v18;
}

uint64_t HandleMutableMovieInsertSegmentFromTrackReaderMessage(uint64_t a1, uint64_t a2, void *a3)
{
  v23 = 0;
  v24 = 0;
  OUTLINED_FUNCTION_7_99();
  ByteStreamFromMessageAndAddForMediaDataStorageURL = mutableMovieServer_CreateByteStreamFromMessageAndAddForMediaDataStorageURL(v5, v6, v7);
  if (ByteStreamFromMessageAndAddForMediaDataStorageURL)
  {
    goto LABEL_10;
  }

  uint64 = xpc_dictionary_get_uint64(a3, "FormatReader");
  if (FigServer_IsMediaparserd() && !FigFormatReaderServerIsObjectIDLocallyServed(uint64))
  {
    ByteStreamFromMessageAndAddForMediaDataStorageURL = FigFormatReaderXPCRemoteCopyFormatReaderForObjectIDFromMediaserverd(uint64, &v24);
    if (ByteStreamFromMessageAndAddForMediaDataStorageURL)
    {
LABEL_10:
      v16 = ByteStreamFromMessageAndAddForMediaDataStorageURL;
      goto LABEL_12;
    }
  }

  else
  {
    ByteStreamFromMessageAndAddForMediaDataStorageURL = FigXPCFormatReaderServerCopyFormatReaderForID(uint64, &v24);
    if (ByteStreamFromMessageAndAddForMediaDataStorageURL)
    {
      goto LABEL_10;
    }
  }

  v10 = xpc_dictionary_get_uint64(a3, "TrackReader");
  ByteStreamFromMessageAndAddForMediaDataStorageURL = FigXPCFormatReaderServerCopyTrackReaderForID(v10, &v23);
  if (ByteStreamFromMessageAndAddForMediaDataStorageURL)
  {
    goto LABEL_10;
  }

  int64 = xpc_dictionary_get_int64(a3, "TrackID");
  FigXPCMessageGetCMTimeRange();
  FigXPCMessageGetCMTime();
  v12 = xpc_dictionary_get_uint64(a3, "Flags");
  v14 = v23;
  v13 = v24;
  v15 = *(*(OUTLINED_FUNCTION_4_146() + 16) + 168);
  if (v15)
  {
    v27[0] = v20;
    v27[1] = v21;
    v27[2] = v22;
    v25 = v18;
    v26 = v19;
    ByteStreamFromMessageAndAddForMediaDataStorageURL = v15(a2, int64, v13, v14, v27, &v25, v12);
    goto LABEL_10;
  }

  v16 = 4294954514;
LABEL_12:
  if (v23)
  {
    CFRelease(v23);
  }

  if (v24)
  {
    CFRelease(v24);
  }

  return v16;
}

uint64_t mutableMovieServer_CreateByteStreamFromObjectIDAndAddForMediaDataStorageURL(uint64_t a1, uint64_t a2, int a3)
{
  cf = 0;
  v4 = FigByteStreamRemoteCreateWithPlaybackProcessObjectID(a2, a3, &cf);
  if (v4)
  {
    goto LABEL_4;
  }

  v5 = cf;
  v6 = *(*(CMBaseObjectGetVTable() + 16) + 216);
  if (v6)
  {
    v4 = v6(a1, v5);
LABEL_4:
    v7 = v4;
    goto LABEL_6;
  }

  v7 = 4294954514;
LABEL_6:
  if (cf)
  {
    CFRelease(cf);
  }

  return v7;
}

uint64_t CreateServedMutableMovieState_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMutableMovieServerStart_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Compress32BPPImage_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_10(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_11(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_12(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_Decompress32BPPImage_cold_13(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_DecompressAndCompositeTwo32BGRAImages_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_DecompressAndCompositeTwo32BGRAImages_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_DecompressAndCompositeTwo32BGRAImages_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_DecompressAndCompositeTwo32BGRAImages_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_DecompressAndCompositeTwo32BGRAImages_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t NeroTextImageCodec_DecompressAndCompositeTwo32BGRAImages_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ntic_decodeLineRLEto32BGRA_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ntic_decodeLineRLEto32BGRA_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ntic_decodeLineRLEto32BGRA_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ntic_decodeLineRLEto32BGRA_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ntic_decodeLineRLEto32BGRA_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ntic_decodeLineRLEto32BGRA_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ntic_decodeLineRLEto32BGRA_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerCopyImageBuffer(uint64_t a1, uint64_t a2, CVPixelBufferRef *a3, void *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (DerivedStorage && a3 && (v8 = DerivedStorage, (v9 = *(DerivedStorage + 24)) != 0))
  {
    result = FigTextRasterizerCreatePixelBufferFromBitmapContext(v9, 0x42475241u, a2, a3);
    if (!result)
    {
      if (a4)
      {
        v11 = *MEMORY[0x1E695F050];
        v12 = *(MEMORY[0x1E695F050] + 8);
        v13 = *(MEMORY[0x1E695F050] + 16);
        v14 = *(MEMORY[0x1E695F050] + 24);
        if (*(v8 + 72) >= 1)
        {
          v15 = 0;
          v16 = v8 + 104;
          do
          {
            *&v11 = CGRectUnion(*&v11, *(v16 - 24));
            ++v15;
            v16 += 32;
          }

          while (v15 < *(v8 + 72));
        }

        *a4 = v11;
        a4[1] = v12;
        a4[2] = v13;
        a4[3] = v14;
      }

      result = 0;
      *(v8 + 400) = 0;
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t FigClosedCaptionsTextRasterizerCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigClosedCaptionsTextRasterizerCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigClosedCaptionsTextRasterizerCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t captionRendererDidChangeCaptionsNotification_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigClosedCaptionsTextRasterizerSetCommand_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigClosedCaptionsTextRasterizerSetCommand_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerSetRenderSize_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t ccRasterizerSetRenderSize_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerSetRenderSize_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerSetVideoSizeAndDisplayRect_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerSetVideoSizeAndDisplayRect_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerSetFontName_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerSetFontName_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t ccRasterizerReset_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t captionRendererDidChangeCaptionsNotificationDo_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigFairplayPSSHAtomParserParseAndCreateRecordRemote(uint64_t a1, uint64_t a2, void *a3)
{
  v22 = 0;
  v23 = &v22;
  v24 = 0x2000000000;
  v25 = 0;
  length[0] = MEMORY[0x1E69E9820];
  length[1] = 0x40000000;
  length[2] = __ffpap_ensureClientEstablished_block_invoke;
  length[3] = &unk_1E74963D8;
  length[4] = &v22;
  if (qword_1ED4CBAE0 != -1)
  {
    dispatch_once(&qword_1ED4CBAE0, length);
  }

  v4 = *(v23 + 6);
  _Block_object_dispose(&v22, 8);
  if (v4)
  {
    goto LABEL_19;
  }

  v5 = FigXPCCreateBasicMessage();
  if (v5 || (v5 = FigXPCMessageSetCFData(), v5) || (v5 = FigXPCRemoteClientSendSyncMessageCreatingReply(), v5))
  {
    v4 = v5;
    goto LABEL_19;
  }

  v6 = malloc_type_calloc(1uLL, 0x18uLL, 0x10A0040FC6C5850uLL);
  v7 = v6;
  if (!v6)
  {
    fig_log_get_emitter();
    FigSignalErrorAtGM();
    v4 = 0;
    goto LABEL_20;
  }

  v6[1] = 0;
  v6[2] = v6 + 1;
  length[0] = 0;
  *v6 = FigXPCMessageGetUInt32();
  value = xpc_dictionary_get_value(0, "records");
  if (!value || (v9 = value, (count = xpc_array_get_count(value)) == 0))
  {
LABEL_17:
    v19 = a3;
LABEL_18:
    v4 = 0;
    *v19 = v7;
LABEL_19:
    v7 = 0;
    goto LABEL_20;
  }

  v11 = count;
  v12 = 0;
  while (1)
  {
    v13 = xpc_array_get_value(v9, v12);
    v14 = malloc_type_calloc(1uLL, 0x38uLL, 0x10E0040C34293B5uLL);
    if (!v14)
    {
      break;
    }

    v15 = v14;
    v16 = FigXPCMessageCopyCFData();
    if (v16 || (v16 = FigXPCMessageCopyCFArray(), v16) || (v16 = FigXPCMessageCopyCFData(), v16))
    {
      v4 = v16;
      goto LABEL_20;
    }

    data = xpc_dictionary_get_data(v13, "keyID", length);
    if (length[0] != 16)
    {
      break;
    }

    *v15 = *data;
    v15[5] = 0;
    v18 = v7[2];
    v15[6] = v18;
    *v18 = v15;
    v7[2] = v15 + 5;
    if (v11 == ++v12)
    {
      goto LABEL_17;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_6_3();
  v4 = FigSignalErrorAtGM();
  v19 = a3;
  if (!v4)
  {
    goto LABEL_18;
  }

LABEL_20:
  free(v7);
  FigXPCRelease();
  FigXPCRelease();
  return v4;
}

uint64_t FigSubtitleTextRasterizerCreate(uint64_t a1, CFTypeRef *a2)
{
  if (a2)
  {
    FigTextRasterizerGetClassID();
    v4 = CMDerivedObjectCreate();
    if (!v4)
    {
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      v6 = MEMORY[0x1E695F060];
      *DerivedStorage = 0;
      *(DerivedStorage + 8) = *v6;
      *(DerivedStorage + 72) = 0;
      v7 = *(MEMORY[0x1E695F050] + 16);
      *(DerivedStorage + 80) = *MEMORY[0x1E695F050];
      *(DerivedStorage + 96) = v7;
      *(DerivedStorage + 128) = 1;
      v8 = FigSubtitleRendererUseCoreTextRendererByDefault();
      *(DerivedStorage + 129) = v8;
      if (v8)
      {
        v9 = FigCoreTextSubtitleRendererCreate(a1, (DerivedStorage + 120));
        goto LABEL_9;
      }

      v10 = *a2;
      v11 = CMBaseObjectGetDerivedStorage();
      v4 = FigCaptionRendererSessionCreate(0, 0, v10, (v11 + 136));
      if (!v4)
      {
        v12 = *(v11 + 136);
        if (!v12)
        {
          return 0;
        }

        v4 = FigCaptionRendererSessionSetCGContextDevice(v12);
        if (!v4)
        {
          *(v11 + 144) = 0;
          v9 = FigCaptionSerializerCreate();
LABEL_9:
          v13 = v9;
          if (v9)
          {
            goto LABEL_10;
          }

          return v13;
        }
      }
    }

    v13 = v4;
LABEL_10:
    if (*a2)
    {
      CFRelease(*a2);
      *a2 = 0;
    }

    return v13;
  }

  fig_log_get_emitter();

  return FigSignalErrorAtGM();
}

uint64_t FigSubtitleTextRasterizerSetSubtitleSample(uint64_t a1, const __CFDictionary *a2)
{
  v189 = 0uLL;
  v187 = 0;
  v188 = 0;
  v4 = *(MEMORY[0x1E695F050] + 16);
  v186[0] = *MEMORY[0x1E695F050];
  v186[1] = v4;
  theDict = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  cf = 0;
  if (!DerivedStorage || !a2 || (v6 = DerivedStorage, !DerivedStorage[9]))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    CaptionGroupFromCFData = FigSignalErrorAtGM();
    goto LABEL_110;
  }

  v8 = DerivedStorage[1];
  v7 = DerivedStorage[2];
  v206.origin.x = OUTLINED_FUNCTION_5_128();
  CGContextClearRect(v9, v206);
  *(v6 + 128) = 1;
  value = 0;
  v10 = &kFigPlaybackItemProperty_IsAuthorizationRequired;
  if (!CFDictionaryGetValueIfPresent(a2, @"SubtitleSerializedCaptionGroup", &value))
  {
    v111 = @"SubtitleContent";
    v112 = a2;
LABEL_92:
    v114 = CFDictionaryGetValue(v112, v111);
    if (v114 && CFArrayGetCount(v114) >= 1)
    {
      if (*(v6 + 129))
      {
        v189 = *(v6 + 3);
        v115 = *(v6 + 8);
        v116 = *(v6 + 4);
        v117 = *(v6 + 7) / *(v6 + 3);
        v118 = v6[15];
        v119 = *(v6 + 5);
        v172.value = 0;
        *&v172.timescale = 0;
        v172.epoch = v8;
        *v173 = v7;
        *&v173[8] = v189;
        *&v173[24] = v117;
        v174 = 0;
        v175 = 0;
        v176 = v115 / v116;
        v177 = v119;
        v178 = 0;
        v179 = v187;
        v180 = v188;
        v181 = 0x3FF0000000000000;
        v182 = 0;
        FigSubtitleRendererLayout(v118, a2, &v172, v186, &theDict);
        v120 = v6[15];
        if (theDict)
        {
          v121 = theDict;
        }

        else
        {
          v121 = a2;
        }

        v172.value = v6[9];
        v122 = *(MEMORY[0x1E695EFD0] + 16);
        *&v172.timescale = *MEMORY[0x1E695EFD0];
        *v173 = v122;
        *&v173[16] = *(MEMORY[0x1E695EFD0] + 32);
        CaptionGroupFromCFData = FigSubtitleRendererDrawSubtitleText(v120, v121, &v172);
        if (CaptionGroupFromCFData)
        {
          goto LABEL_110;
        }
      }

      else
      {
        OUTLINED_FUNCTION_6_116();
        FigCaptionRendererSessionClear(v123);
        OUTLINED_FUNCTION_5_128();
        FigCaptionRendererSessionSetLayoutContext_Viewport(v124);
        FigCaptionRendererSessionSetLayoutContext_VideoSize(v6[17], *(v6 + 3), *(v6 + 4));
        FigCaptionRendererSessionSetLayoutContext_Gravity(v6[17], 0);
        FigCaptionRendererSessionSetLayoutContext_Overscan(v6[17], 0);
        v172.value = 0;
        v125 = OUTLINED_FUNCTION_6_116();
        FigSubtitleSampleCreatePropertyList(v126, v127, v128, v129, v125, v130, v131, v132);
        FigCaptionRendererSessionSetCaptionSample(v6[17]);
        FigCaptionRendererSessionUpdateCGContext(v6[17], v6[9]);
        if (v172.value)
        {
          CFRelease(v172.value);
        }
      }

      v113 = 0;
      *(v6 + 112) = 1;
      goto LABEL_104;
    }

LABEL_100:
    v113 = 0;
    *(v6 + 112) = 0;
    goto LABEL_104;
  }

  CaptionGroupFromCFData = FigCaptionSerializerCreateCaptionGroupFromCFData();
  if (CaptionGroupFromCFData)
  {
LABEL_110:
    v113 = CaptionGroupFromCFData;
    goto LABEL_104;
  }

  if (!cf)
  {
    goto LABEL_100;
  }

  v12 = *MEMORY[0x1E695E480];
  v13 = OUTLINED_FUNCTION_266_0();
  MutableCopy = CFDictionaryCreateMutableCopy(v13, v14, a2);
  theDict = MutableCopy;
  v16 = cf;
  v199 = 0;
  v17 = OUTLINED_FUNCTION_266_0();
  theArray = CFArrayCreateMutable(v17, v18, v19);
  if (!theArray)
  {
    v113 = 4294954510;
    goto LABEL_104;
  }

  valuePtr = 0;
  v20 = CFDictionaryGetValue(MutableCopy, @"SubtitleFormat");
  CFNumberGetValue(v20, kCFNumberSInt32Type, &valuePtr);
  if (!v16)
  {
    v36 = 0;
    Mutable = 0;
    v113 = 0;
    goto LABEL_84;
  }

  memset(&v172, 0, sizeof(v172));
  CMTimeMake(&v172, 0, 0);
  memset(&v197, 0, sizeof(v197));
  CMTimeMake(&v197, 0, 0);
  v21 = CFDictionaryGetValue(MutableCopy, @"SubtitleTimeRange");
  if (v21)
  {
    v22 = v21;
    ValueAtIndex = CFArrayGetValueAtIndex(v21, 0);
    v24 = CFArrayGetValueAtIndex(v22, 1);
    memset(&v196, 0, sizeof(v196));
    CMTimeMakeFromDictionary(&v196, ValueAtIndex);
    memset(&v195, 0, sizeof(v195));
    CMTimeMakeFromDictionary(&v195, v24);
    v172 = v196;
    v197 = v195;
  }

  SliceCount = FigCaptionGroupGetSliceCount();
  v26 = OUTLINED_FUNCTION_266_0();
  Mutable = CFDictionaryCreateMutable(v26, v27, v28, v29);
  v10 = &kFigPlaybackItemProperty_IsAuthorizationRequired;
  if (Mutable)
  {
    v31 = OUTLINED_FUNCTION_266_0();
    v35 = CFDictionaryCreateMutable(v31, v32, v33, v34);
    if (v35)
    {
      v36 = v35;
      v137 = a2;
      v138 = v6;
      if (SliceCount >= 1)
      {
        v37 = 0;
        HIDWORD(v166) = 0;
        key = *MEMORY[0x1E6960A90];
        v164 = *MEMORY[0x1E6961368];
        v163 = *MEMORY[0x1E6960AF0];
        v156 = *MEMORY[0x1E6960800];
        v155 = *MEMORY[0x1E69607E8];
        v154 = *MEMORY[0x1E69607F0];
        v153 = *MEMORY[0x1E69607F8];
        v152 = *MEMORY[0x1E69607D8];
        v151 = *MEMORY[0x1E69607E0];
        attrName = *MEMORY[0x1E6960998];
        v149 = *MEMORY[0x1E6960C38];
        v148 = *MEMORY[0x1E69609A0];
        v147 = *MEMORY[0x1E6960978];
        v144 = *MEMORY[0x1E6960838];
        v136 = *MEMORY[0x1E69609F8];
        v140 = *MEMORY[0x1E6960A00];
        v146 = *MEMORY[0x1E6960A08];
        v142 = *MEMORY[0x1E69608D8];
        v141 = *MEMORY[0x1E69608E0];
        v143 = *MEMORY[0x1E6960830];
        v135 = *MEMORY[0x1E69609E0];
        v139 = *MEMORY[0x1E69609E8];
        v145 = *MEMORY[0x1E69609F0];
        v161 = v12;
        v162 = MutableCopy;
        v159 = Mutable;
        v160 = v16;
        v157 = SliceCount;
        v158 = v35;
        while (1)
        {
          CaptionData = FigCaptionGroupGetCaptionData();
          if (CaptionData)
          {
            break;
          }

LABEL_76:
          if (SliceCount == ++v37)
          {
            goto LABEL_83;
          }
        }

        v39 = CaptionData;
        if (v199)
        {
          CFRelease(v199);
          v199 = 0;
        }

        memset(&v196, 0, sizeof(v196));
        FigCaptionGroupGetDurationBeforeSlice();
        memset(&v195, 0, sizeof(v195));
        FigCaptionGroupGetDurationAfterSlice();
        effectiveRange = *&v172.value;
        epoch = v172.epoch;
        v192 = v197;
        v191 = v196;
        v190 = v195;
        HIDWORD(v166) = FigCaptionDataToMarkupBasedAttributedString(v12, v39, &effectiveRange, &v192, &v191, &v190, &v199, Mutable, v36);
        v40 = valuePtr == 1937142900 || valuePtr == 2021028980;
        v41 = v40 || valuePtr == 2004251764;
        if (!v41 || (aStr = v199, (v42 = CFDictionaryGetValue(Mutable, key)) == 0) || (v43 = CFDictionaryGetValue(v42, v164)) == 0 || (v44 = CFDictionaryGetValue(v43, v163)) == 0)
        {
LABEL_75:
          CFArrayAppendValue(theArray, v199);
          goto LABEL_76;
        }

        v45 = v44;
        v46 = CFDictionaryGetValue(v44, v156);
        v47 = CFDictionaryGetValue(v45, v155);
        v48 = CFDictionaryGetValue(v45, v154);
        v49 = CFDictionaryGetValue(v45, v153);
        v50 = CFDictionaryGetValue(v45, v152);
        v51 = CFDictionaryGetValue(v45, v151);
        OUTLINED_FUNCTION_7_93();
        v168 = v52;
        OUTLINED_FUNCTION_7_93();
        v169 = v53;
        v54 = OUTLINED_FUNCTION_7_93();
        v56 = v55;
        v57 = *&v54;
        OUTLINED_FUNCTION_7_93();
        OUTLINED_FUNCTION_4_147();
        OUTLINED_FUNCTION_7_93();
        OUTLINED_FUNCTION_3_150();
        effectiveRange.length = 0;
        effectiveRange.location = 0;
        Attribute = CFAttributedStringGetAttribute(aStr, 0, attrName, &effectiveRange);
        if (Attribute)
        {
          if (v47)
          {
            FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            v168 = v65;
          }

          if (v48)
          {
            FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            OUTLINED_FUNCTION_4_147();
          }

          if (v49)
          {
            FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            v169 = v66;
          }

          SliceCount = v157;
          if (v50)
          {
            FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            OUTLINED_FUNCTION_3_150();
          }

          if (v51)
          {
            v67 = FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            v56 = v68;
            v57 = *&v67;
          }

          Attribute = FigCFEqual();
          MutableCopy = v162;
          if (Attribute)
          {
            FigGeometryDimensionMakeMirrored();
            OUTLINED_FUNCTION_4_147();
            FigGeometryDimensionMakeMirrored();
            OUTLINED_FUNCTION_3_150();
          }

          v12 = v161;
          v69 = v56;
        }

        else
        {
          if (v46)
          {
            Attribute = FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            v168 = v59;
          }

          v69 = v56;
          if (v48)
          {
            Attribute = FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            v169 = v59;
          }

          if (v49)
          {
            FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            OUTLINED_FUNCTION_4_147();
          }

          SliceCount = v157;
          if (v50)
          {
            Attribute = FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            v69 = v59;
            v57 = *&Attribute;
          }

          if (v51)
          {
            FigTextMarkupDimensionMakeFromSimplifiedDictionary();
            OUTLINED_FUNCTION_3_150();
          }

          v12 = v161;
          MutableCopy = v162;
        }

        if (v168 == 622862368)
        {
          Float32 = FigCFNumberCreateFloat32();
          v78 = OUTLINED_FUNCTION_1_183(Float32, v71, v72, v73, v74, v75, v76, v77, v134, v135, v136, v137, v138, v139, v140, v141, v142, v143, v144, v145, v146, v147, v148, v149, attrName, v151, v152, v153, v154, v155, v156, v157, v158, v159, v160, v161, v162, v163, v164, key, v166, theArray, v168, v169, v170, aStr);
          CFAttributedStringSetAttribute(v78, v200, v148, Float32);
          if (Float32)
          {
            CFRelease(Float32);
          }
        }

        if (v169 == 622862368)
        {
          v79 = FigCFNumberCreateFloat32();
          v87 = OUTLINED_FUNCTION_1_183(v79, v80, v81, v82, v83, v84, v85, v86, v134, v135, v136, v137, v138, v139, v140, v141, v142, v143, v144, v145, v146, v147, v148, v149, attrName, v151, v152, v153, v154, v155, v156, v157, v158, v159, v160, v161, v162, v163, v164, key, v166, theArray, v168, v169, v170, aStr);
          CFAttributedStringSetAttribute(v87, v201, v147, v79);
          if (v79)
          {
            CFRelease(v79);
          }
        }

        if (v69 == 622862368)
        {
          v88 = v146;
          if (v57 == 0.0 || (v88 = v140, v57 == 50.0) || (v88 = v136, v57 == 100.0))
          {
            v89 = OUTLINED_FUNCTION_1_183(Attribute, v59, v60, v61, v88, v62, v63, v64, v134, v135, v136, v137, v138, v139, v140, v141, v142, v143, v144, v145, v146, v147, v148, v149, attrName, v151, v152, v153, v154, v155, v156, v157, v158, v159, v160, v161, v162, v163, v164, key, v166, theArray, v168, v169, v170, aStr);
            CFAttributedStringSetAttribute(v89, v202, v144, v90);
          }
        }

        if (v36 == 1818848869)
        {
          v91 = FigCFNumberCreateFloat32();
          v110 = OUTLINED_FUNCTION_1_183(v91, v103, v104, v105, v106, v107, v108, v109, v134, v135, v136, v137, v138, v139, v140, v141, v142, v143, v144, v145, v146, v147, v148, v149, attrName, v151, v152, v153, v154, v155, v156, v157, v158, v159, v160, v161, v162, v163, v164, key, v166, theArray, v168, v169, v170, aStr);
          CFAttributedStringSetAttribute(v110, v205, v142, v91);
          v36 = v158;
          Mutable = v159;
          if (!v91)
          {
            goto LABEL_70;
          }
        }

        else
        {
          v40 = v36 == 622862368;
          v36 = v158;
          Mutable = v159;
          if (!v40 || (v91 = FigCFNumberCreateFloat32(), v99 = OUTLINED_FUNCTION_1_183(v91, v92, v93, v94, v95, v96, v97, v98, v134, v135, v136, v137, v138, v139, v140, v141, v142, v143, v144, v145, v146, v147, v148, v149, attrName, v151, v152, v153, v154, v155, v156, v157, v158, v159, v160, v161, v162, v163, v164, key, v166, theArray, v168, v169, v170, aStr), CFAttributedStringSetAttribute(v99, v203, v141, v91), !v91))
          {
LABEL_70:
            if (v170 == 622862368)
            {
              v100 = v145;
              if (v2 == 0.0 || (v100 = v139, v2 == 50.0) || (v100 = v135, v2 == 100.0))
              {
                v101 = OUTLINED_FUNCTION_1_183(Attribute, v59, v60, v61, v100, v62, v63, v64, v134, v135, v136, v137, v138, v139, v140, v141, v142, v143, v144, v145, v146, v147, v148, v149, attrName, v151, v152, v153, v154, v155, v156, v157, v158, v159, v160, v161, v162, v163, v164, key, v166, theArray, v168, v169, v170, aStr);
                CFAttributedStringSetAttribute(v101, v204, v143, v102);
              }
            }

            goto LABEL_75;
          }
        }

        CFRelease(v91);
        goto LABEL_70;
      }

      HIDWORD(v166) = 0;
LABEL_83:
      a2 = v137;
      v6 = v138;
      v10 = &kFigPlaybackItemProperty_IsAuthorizationRequired;
      v113 = HIDWORD(v166);
LABEL_84:
      CFDictionarySetValue(MutableCopy, @"SubtitleContent", theArray);
      if (!Mutable)
      {
        goto LABEL_86;
      }

      goto LABEL_85;
    }
  }

  v36 = 0;
  v113 = 4294954510;
  if (Mutable)
  {
LABEL_85:
    CFRelease(Mutable);
  }

LABEL_86:
  if (v36)
  {
    CFRelease(v36);
  }

  if (v199)
  {
    CFRelease(v199);
  }

  CFRelease(theArray);
  if (!v113)
  {
    v112 = theDict;
    v111 = v10[443];
    goto LABEL_92;
  }

LABEL_104:
  if (theDict)
  {
    CFRelease(theDict);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  return v113;
}

uint64_t subtitleRasterizerCopyImageBuffer(uint64_t a1, uint64_t a2, CVPixelBufferRef *a3, _OWORD *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (DerivedStorage && a3 && (v8 = DerivedStorage, (v9 = *(DerivedStorage + 72)) != 0))
  {
    result = FigTextRasterizerCreatePixelBufferFromBitmapContext(v9, 0x42475241u, a2, a3);
    if (!result)
    {
      if (a4)
      {
        if (*(v8 + 112))
        {
          v11 = (v8 + 80);
        }

        else
        {
          v11 = MEMORY[0x1E695F050];
        }

        v12 = v11[1];
        *a4 = *v11;
        a4[1] = v12;
      }

      result = 0;
      *(v8 + 128) = 0;
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t subtitleRasterizerSetRenderSize_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t subtitleRasterizerSetRenderSize_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t subtitleRasterizerSetRenderSize_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t subtitleRasterizerSetRenderSize_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t subtitleRasterizerSetVideoSizeAndDisplayRect_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t subtitleRasterizerSetVideoSizeAndDisplayRect_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t subtitleRasterizerSetVideoSizeAndDisplayRect_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t subtitleRasterizerSetFontName_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t subtitleRasterizerSetFontName_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t subtitleRasterizerReset_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t EMSGParseEventMessageAtomAndCreateEMSGInformation(uint64_t a1, uint64_t a2)
{
  v22 = 0u;
  v23 = 0u;
  v20 = 0u;
  v21 = 0u;
  v18 = 0u;
  v19 = 0u;
  v17 = 0u;
  v16 = 0;
  v15 = 0;
  v14 = 0;
  v13 = 0;
  dataPointerOut = 0;
  theBuffer = 0;
  v9 = 0;
  lengthAtOffsetOut = 0;
  v7 = 0;
  cf = 0;
  v5 = 0;
  v6 = 0;
  if (!a1 || !a2)
  {
    goto LABEL_12;
  }

  CurrentAtomTypeAndDataLength = FigAtomStreamInitWithBBuf();
  if (CurrentAtomTypeAndDataLength)
  {
    return CurrentAtomTypeAndDataLength;
  }

  CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomTypeAndDataLength();
  if (CurrentAtomTypeAndDataLength)
  {
    return CurrentAtomTypeAndDataLength;
  }

  CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomVersionAndFlags();
  if (CurrentAtomTypeAndDataLength)
  {
    return CurrentAtomTypeAndDataLength;
  }

  if (v14 == 1)
  {
LABEL_12:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    return FigSignalErrorAtGM();
  }

  return 4294949423;
}

uint64_t createCFStringWithNullTerminatedCStringAndAdvanceBuffer(const char **a1, size_t *a2, CFStringRef *a3, void *a4)
{
  if (!a3)
  {
    return 4294949425;
  }

  *a3 = 0;
  if (!a4)
  {
    return 4294949425;
  }

  *a4 = 0;
  if (!a1)
  {
    return 4294949425;
  }

  result = 4294949425;
  if (a2)
  {
    v9 = *a1;
    if (*a1)
    {
      v10 = *a2;
      if (*a2)
      {
        v11 = strnlen(*a1, *a2);
        if (v11 >= v10)
        {
          return 4294949424;
        }

        else
        {
          v12 = CFStringCreateWithBytes(*MEMORY[0x1E695E480], v9, v11, 0x8000100u, 1u);
          if (v12)
          {
            v13 = v12;
            result = 0;
            *a3 = v13;
            *a4 = v11 + 1;
            *a1 = &v9[v11 + 1];
            *a2 = v10 - (v11 + 1);
          }

          else
          {
            return 4294949426;
          }
        }
      }
    }
  }

  return result;
}

uint64_t EMSGInformationCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t octrp_Invalidate(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*DerivedStorage)
  {
    v3 = DerivedStorage;
    *DerivedStorage = 1;
    v4 = *(DerivedStorage + 16);
    v27[0] = MEMORY[0x1E69E9820];
    v27[1] = 0x40000000;
    v27[2] = __octrp_Invalidate_block_invoke;
    v27[3] = &__block_descriptor_tmp_12_7;
    v27[4] = v3;
    v27[5] = a1;
    dispatch_sync(v4, v27);
    v5 = *(v3 + 24);
    if (v5)
    {
      dispatch_sync(v5, &__block_literal_global_122);
      dispatch_release(*(v3 + 24));
    }

    v6 = *(v3 + 160);
    if (v6)
    {
      CFRelease(v6);
      *(v3 + 160) = 0;
    }

    v7 = *(v3 + 152);
    if (v7)
    {
      FigBaseObject = FigRenderPipelineGetFigBaseObject(v7);
      v9 = *(*(CMBaseObjectGetVTable() + 8) + 56);
      if (v9)
      {
        v9(FigBaseObject, @"Timebase", 0);
      }

      v10 = FigRenderPipelineGetFigBaseObject(*(v3 + 152));
      v11 = *(CMBaseObjectGetVTable() + 8);
      if (*v11 >= 2uLL)
      {
        v12 = v11[8];
        if (v12)
        {
          v12(v10);
        }
      }

      v13 = *(v3 + 152);
      if (v13)
      {
        CFRelease(v13);
        *(v3 + 152) = 0;
      }
    }

    if (*(v3 + 8))
    {
      NeroTransportSendAsyncMessage();
    }

    v14 = *(v3 + 40);
    if (v14)
    {
      CMBufferQueueRemoveTrigger(*(v3 + 32), v14);
    }

    v15 = *(v3 + 48);
    if (v15)
    {
      CMBufferQueueRemoveTrigger(*(v3 + 32), v15);
    }

    v16 = *(v3 + 56);
    if (v16)
    {
      CMBufferQueueRemoveTrigger(*(v3 + 32), v16);
    }

    if (*(v3 + 32))
    {
      CMNotificationCenterGetDefaultLocalCenter();
      CMNotificationCenterRemoveListener();
      CMNotificationCenterGetDefaultLocalCenter();
      CMNotificationCenterRemoveListener();
      v17 = *(v3 + 32);
      if (v17)
      {
        CFRelease(v17);
        *(v3 + 32) = 0;
      }
    }

    v18 = *(v3 + 80);
    if (v18)
    {
      CFRelease(v18);
      *(v3 + 80) = 0;
    }

    v19 = *(v3 + 88);
    if (v19)
    {
      CFRelease(v19);
      *(v3 + 88) = 0;
    }

    v20 = *(v3 + 104);
    if (v20)
    {
      CFRelease(v20);
      *(v3 + 104) = 0;
    }

    v21 = *(v3 + 128);
    if (v21)
    {
      FigSyncMomentSourceDestroy(v21);
      *(v3 + 128) = 0;
    }

    octrp_setTimebase(a1, 0, 0);
    v22 = *(v3 + 16);
    if (v22)
    {
      dispatch_release(v22);
      *(v3 + 16) = 0;
    }

    v23 = *(v3 + 144);
    if (v23)
    {
      CFRelease(v23);
      *(v3 + 144) = 0;
    }

    v24 = *(v3 + 136);
    if (v24)
    {
      CFRelease(v24);
      *(v3 + 136) = 0;
    }

    v25 = *(v3 + 176);
    if (v25)
    {
      CFRelease(v25);
      *(v3 + 176) = 0;
    }
  }

  return 0;
}

void octrp_Finalize(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  octrp_Invalidate(a1);
  v3 = *(DerivedStorage + 72);
  if (v3)
  {
    CFRelease(v3);
    *(DerivedStorage + 72) = 0;
  }
}

uint64_t octvrp_CopyProperty(uint64_t a1, const void *a2, const __CFAllocator *a3, void *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    return 4294954444;
  }

  v8 = DerivedStorage;
  if (CFEqual(a2, @"SourceSampleBufferQueue"))
  {
    v9 = *(v8 + 4);
    if (!v9)
    {
      goto LABEL_12;
    }

    goto LABEL_7;
  }

  if (CFEqual(a2, @"Timebase"))
  {
    v9 = *(v8 + 15);
    if (!v9)
    {
LABEL_12:
      v11 = 0;
      goto LABEL_13;
    }

    goto LABEL_7;
  }

  if (CFEqual(a2, @"PreferredClock"))
  {
    result = octrp_ensurePreferredClock();
    if (result)
    {
      return result;
    }

    v9 = *(v8 + 13);
    if (!v9)
    {
      goto LABEL_12;
    }

    goto LABEL_7;
  }

  if (CFEqual(a2, @"EndPresentationTimeForQueuedSamples"))
  {
    memset(&v15, 0, sizeof(v15));
    CMBufferQueueGetEndPresentationTimeStamp(&v15, *(v8 + 4));
    v14 = v15;
    v10 = CMTimeCopyAsDictionary(&v14, a3);
    goto LABEL_8;
  }

  if (!CFEqual(a2, @"CurrentVideoFrameRate") && !CFEqual(a2, @"VideoEnqueueResetsSystemSleepTimer") && !CFEqual(a2, @"ObeyEmptyMediaMarkers") && !CFEqual(a2, @"RenderEmptyMedia") && !CFEqual(a2, @"FieldMode") && !CFEqual(a2, @"VideoDecoderUsage") && !CFEqual(a2, @"PerformanceDictionary"))
  {
    if (!CFEqual(a2, @"IsTimebaseStarter"))
    {
      return 4294954446;
    }

    v13 = MEMORY[0x1E695E4D0];
    if (!v8[113])
    {
      v13 = MEMORY[0x1E695E4C0];
    }

    v9 = *v13;
LABEL_7:
    v10 = CFRetain(v9);
LABEL_8:
    v11 = v10;
LABEL_13:
    result = 0;
    *a4 = v11;
    return result;
  }

  return octrp_copyNeroProperty();
}

uint64_t octvrp_SetProperty(uint64_t a1, const void *a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    return 4294954444;
  }

  v7 = DerivedStorage;
  if (!CFEqual(a2, @"Timebase"))
  {
    if (CFEqual(a2, @"PrerollRate"))
    {
      if (!a3)
      {
        goto LABEL_9;
      }

      TypeID = CFNumberGetTypeID();
      if (TypeID != CFGetTypeID(a3))
      {
        goto LABEL_9;
      }
    }

    else if (!CFEqual(a2, @"ObeyEmptyMediaMarkers") && !CFEqual(a2, @"RenderEmptyMedia") && !CFEqual(a2, @"FieldMode") && !CFEqual(a2, @"VideoDecoderUsage") && !CFEqual(a2, @"Rotation") && !CFEqual(a2, @"NeroVideoGravity"))
    {
      if (!CFEqual(a2, @"IsTimebaseStarter"))
      {
        if (CFEqual(@"ClientPID", a2))
        {
          if (a3)
          {
            v17 = CFGetTypeID(a3);
            if (v17 == CFNumberGetTypeID())
            {
              valuePtr = 0;
              CFNumberGetValue(a3, kCFNumberSInt32Type, &valuePtr);
              if (valuePtr != *(v7 + 42))
              {
                *(v7 + 42) = valuePtr;
              }
            }
          }

          v11 = 0;
        }

        else
        {
          v11 = 4294954446;
        }

        goto LABEL_18;
      }

      if (!a3)
      {
        goto LABEL_9;
      }

      v16 = CFBooleanGetTypeID();
      if (v16 != CFGetTypeID(a3))
      {
        goto LABEL_9;
      }

      v7[113] = *MEMORY[0x1E695E4D0] == a3;
    }

    v9 = octrp_setNeroProperty();
    goto LABEL_17;
  }

  if (a3)
  {
    v8 = CMTimebaseGetTypeID();
    if (v8 != CFGetTypeID(a3))
    {
LABEL_9:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_10();
      v9 = FigSignalErrorAtGM();
      goto LABEL_17;
    }
  }

  v9 = octrp_setTimebase(a1, a3, 1);
LABEL_17:
  v11 = v9;
LABEL_18:
  v12 = *(v7 + 19);
  if (v12)
  {
    FigBaseObject = FigRenderPipelineGetFigBaseObject(v12);
    v14 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (v14)
    {
      v14(FigBaseObject, a2, a3);
    }
  }

  return v11;
}

uint64_t FigOctaviaVideoRenderPipelineCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigOctaviaVideoRenderPipelineCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigOctaviaVideoRenderPipelineCreateWithFigImageQueueArray_cold_1(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t octrp_setTimebase_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void IFFItemPropertyGetOrderedTransformPropertiesForItem(uint64_t a1, _DWORD *a2, _OWORD *a3, unsigned int *a4, int *a5)
{
  v54 = *MEMORY[0x1E69E9840];
  v6 = *(a1 + 80);
  if (v6)
  {
    v9 = *v6;
    v10 = v6[1];
    v11 = *(a1 + 152);
    if (v11)
    {
      *v51 = *v11;
      *&v51[16] = v11[1];
      v12 = 1;
    }

    else
    {
      v12 = 0;
      *v51 = v9;
      *&v51[4] = 1;
      *&v51[8] = v10;
      *&v51[12] = xmmword_196E76490;
      *&v51[28] = 1;
    }

    v13 = *(a1 + 160);
    if (v13)
    {
      v14 = *v13;
      ++v12;
    }

    else
    {
      v14 = 0;
    }

    v43 = COERCE_DOUBLE(__PAIR64__(v9, v10));
    v15 = *(a1 + 168);
    if (v15)
    {
      v16 = *v15;
      ++v12;
    }

    else
    {
      v16 = -1;
    }

    if (v12 >= 2)
    {
      v44 = *&a3;
      v45 = *&a4;
      v46 = *&a5;
      v53 = 0;
      v52 = 0;
      if (CFArrayGetCount(*(a1 + 56)) >= 1)
      {
        v42 = v5;
        v17 = 0;
        v18 = 0;
        v19 = 0;
        while (1)
        {
          v20 = *(*CFArrayGetValueAtIndex(*(a1 + 56), v17) + 8);
          if ((v20 - 11) < 2)
          {
            goto LABEL_17;
          }

          if (v20 == 10)
          {
            break;
          }

LABEL_19:
          if (++v17 >= CFArrayGetCount(*(a1 + 56)))
          {
            if (!*(a1 + 152))
            {
              goto LABEL_52;
            }

            if (v18 >= 1)
            {
              v29 = v18 + 1;
              v30 = &v52 + v18 - 1;
              do
              {
                v31 = *v30;
                if (*v30 == 11)
                {
                  OUTLINED_FUNCTION_62_16(v21, v22, v23, v24, v25, v26, v27, v28, v41, v42, v43, v44, v45, v46, v47, v48, v49, v50, *v51);
                  if (IFFItemPropertyGetUnrotatedCLAP(v14, v32, v33))
                  {
                    goto LABEL_51;
                  }
                }

                else
                {
                  OUTLINED_FUNCTION_62_16(v21, v22, v23, v24, v25, v26, v27, v28, v41, v42, v43, v44, v45, v46, v47, v48, v49, v50, *v51);
                  if (IFFItemPropertyGetUnmirroredCLAP(v16, v34, v35))
                  {
                    goto LABEL_51;
                  }
                }

                *v30 = 10;
                v30[1] = v31;
                --v30;
                --v29;
              }

              while (v29 > 1);
            }

LABEL_30:
            if (v12 != 2 && HIDWORD(v52) == 12 && v16 != -1)
            {
              goto LABEL_37;
            }

LABEL_57:
            *&a4 = v45;
            *&a5 = v46;
            *&a3 = v44;
            if (!a2)
            {
LABEL_45:
              if (*&a3 != 0.0)
              {
                *a3 = *v51;
                a3[1] = *&v51[16];
              }

              if (*&a4 != 0.0)
              {
                *a4 = v14;
              }

              if (*&a5 != 0.0)
              {
                *a5 = v16;
              }

LABEL_51:
              OUTLINED_FUNCTION_67_15();
              return;
            }

LABEL_44:
            *a2 = HIDWORD(v43);
            a2[1] = LODWORD(v43);
            goto LABEL_45;
          }
        }

        v18 = v19;
LABEL_17:
        if (v19 >= v12)
        {
          fig_log_get_emitter();
          OUTLINED_FUNCTION_120();
          goto LABEL_60;
        }

        *(&v52 + v19++) = v20;
        goto LABEL_19;
      }

      if (*(a1 + 152))
      {
        goto LABEL_30;
      }

LABEL_52:
      if (v52 == 11 || v16 == -1)
      {
        goto LABEL_57;
      }

LABEL_37:
      *&a4 = v45;
      *&a5 = v46;
      *&a3 = v44;
      if (v14 == 270 || v14 == 90)
      {
        if (v14 < 0xB4)
        {
          v38 = 180;
        }

        else
        {
          v38 = -180;
        }

        v14 += v38;
      }
    }

    if (!a2)
    {
      goto LABEL_45;
    }

    goto LABEL_44;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_376();
LABEL_60:
  OUTLINED_FUNCTION_67_15();

  FigSignalErrorAtGM();
}

double IFFItemPropertyMergeCLAPs(uint64_t a1, uint64_t a2, _OWORD *a3)
{
  OUTLINED_FUNCTION_180_1();
  v11 = 0uLL;
  v10 = *v6;
  if (!sumOfIFFRat32(*(v7 + 16), *(v6 + 2), &v11) && !sumOfIFFRat32(*(v4 + 24), *(v3 + 24), &v11 + 2))
  {
    result = *&v10;
    v9 = v11;
    *a3 = v10;
    a3[1] = v9;
  }

  return result;
}

void IFFItemPropertyGetCCLVDataLength(char a1, uint64_t a2)
{
  if ((a1 & 0x3C) != 0)
  {
    if (a2)
    {
      OUTLINED_FUNCTION_53_18();
      *v3 = v2 | 1;
    }
  }
}

uint64_t IFFInformationCopyPrimaryItemIndex(uint64_t a1, uint64_t a2)
{
  if (!a2)
  {
    return 4294949526;
  }

  OUTLINED_FUNCTION_187();
  result = resolvePicturesIfNeeded(v3);
  if (!result)
  {
    v5 = (v2 + 72);
    if (*(v2 + 72) == -1 && ((v6 = *(v2 + 136), v9.length = CFArrayGetCount(v6), v9.location = 0, FirstIndexOfValue = CFArrayGetFirstIndexOfValue(v6, v9, *(v2 + 80)), FirstIndexOfValue == -1) ? (LODWORD(FirstIndexOfValue) = *v5) : (*v5 = FirstIndexOfValue), FirstIndexOfValue == -1))
    {
      return 4294954448;
    }

    else if (*(v2 + 64) && *(v2 + 80))
    {
      v8 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberCFIndexType, (v2 + 72));
      if (v8)
      {
        return OUTLINED_FUNCTION_2_98(v8);
      }

      else
      {
        return 4294954510;
      }
    }

    else
    {
      return 4294954513;
    }
  }

  return result;
}

uint64_t resolvePicturesIfNeeded(uint64_t a1)
{
  cf = 0;
  if (*(a1 + 24))
  {
    return 0;
  }

  *(a1 + 72) = -1;
  OUTLINED_FUNCTION_613();
  theArray = CFArrayCreateMutable(v2, v3, v4);
  if (!theArray)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_4_63();

    return FigSignalErrorAtGM();
  }

  if (!*(a1 + 136))
  {
    OUTLINED_FUNCTION_613();
    Mutable = CFArrayCreateMutable(v5, v6, v7);
    *(a1 + 136) = Mutable;
    if (!Mutable)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_4_63();
      goto LABEL_343;
    }
  }

  v9 = *(a1 + 96);
  if (!v9 || (Count = CFArrayGetCount(v9), Count < 1))
  {
    LODWORD(v13) = 0;
    goto LABEL_152;
  }

  v11 = Count;
  v12 = 0;
  LODWORD(v13) = 0;
  v264 = Count;
  do
  {
    ValueAtIndex = CFArrayGetValueAtIndex(*(a1 + 96), v12);
    if (!*(ValueAtIndex + 16))
    {
      goto LABEL_148;
    }

    v15 = ValueAtIndex;
    v16 = *(ValueAtIndex + 29);
    if (v16 && _propertyIsEssential(ValueAtIndex, v16) && (OUTLINED_FUNCTION_57_15(), !v19) || (v17 = *(v15 + 240)) != 0 && _propertyIsEssential(v15, v17) && ((OUTLINED_FUNCTION_57_15(), !v19) || **(v15 + 240) >= 0x20u))
    {
      *(v15 + 16) = 0;
      goto LABEL_148;
    }

    if (IFFItemIsPicture(v15))
    {
      if (*(v15 + 80) && ((v18 = *(v15 + 44), v18 != 1768912492) ? (v19 = v18 == 1735551332) : (v19 = 1), v19 && (OUTLINED_FUNCTION_48_19(), v20)))
      {
        v21 = 0;
      }

      else
      {
        v21 = *(a1 + 176) & 1;
      }

      *(a1 + 176) = v21;
    }

    v22 = *(v15 + 520);
    if (v22)
    {
      v23 = CFArrayGetCount(v22);
    }

    else
    {
      v23 = 0;
    }

    OUTLINED_FUNCTION_34_28();
    if (v19 || v24 == 1768187246 || v24 == 1953325424 || v24 == 1768912492)
    {
      if (v23 < 1)
      {
        *(v15 + 512) = 0;
        goto LABEL_132;
      }

      v28 = 0;
      for (i = 0; i != v23; ++i)
      {
        CFArrayGetValueAtIndex(*(v15 + 520), i);
        OUTLINED_FUNCTION_41_27();
        if (v19)
        {
          if (v28 >= 1)
          {
            *(v15 + 512) = -1;
            *(v15 + 16) = 0;
            goto LABEL_148;
          }

          ++v28;
        }
      }

      if (v28 > 1)
      {
        goto LABEL_148;
      }
    }

    *(v15 + 512) = 0;
    if (v23 < 1)
    {
      goto LABEL_132;
    }

    v271 = v12;
    if (v13)
    {
      v13 = 1;
    }

    else
    {
      v13 = *(v15 + 42) != 0;
    }

    v30 = 0;
    do
    {
      v31 = CFArrayGetValueAtIndex(*(v15 + 520), v30);
      v32 = v31;
      v33 = *v31;
      v36 = *v31 == 1635088492 || v33 == 1667527523 || v33 == 1684630887 || v33 == 1953000802;
      v308 = v23;
      if (!v36)
      {
        v307 = v13;
        fig_log_get_emitter();
        OUTLINED_FUNCTION_4_63();
        v57 = FigSignalErrorAtGM();
LABEL_108:
        if (v57)
        {
          goto LABEL_109;
        }

        v39 = v307;
LABEL_111:
        OUTLINED_FUNCTION_41_27();
        if (v19)
        {
          *(v15 + 512) += *(v32 + 2);
        }

        ++v30;
        v13 = v39;
        v23 = v308;
        continue;
      }

      if (v31[1] < 1)
      {
        v39 = v13;
        goto LABEL_111;
      }

      v37 = 0;
      v38 = *(a1 + 96);
      v307 = v13;
      LOBYTE(v39) = v13;
      while (1)
      {
        v40 = IFFItemGetWithID(v38, *(v32[2] + 4 * v37));
        if (!v40)
        {
          fig_log_get_emitter();
          OUTLINED_FUNCTION_4_63();
          v57 = FigSignalErrorAtGM();
          if (!v37)
          {
            goto LABEL_108;
          }

          goto LABEL_122;
        }

        v41 = v40;
        if (!*(v40 + 16))
        {
          v57 = -12780;
          if (!v37)
          {
            goto LABEL_108;
          }

          goto LABEL_122;
        }

        if (v39)
        {
          v39 = 1;
        }

        else
        {
          v39 = *(v40 + 21) != 0;
        }

        *(v32[3] + 8 * v37) = v40;
        if (IFFItemIsPicture(v15) && IFFItemIsPicture(v41))
        {
          v42 = *(v41 + 80);
          if (*v32)
          {
            if (*v32 == 1684630887 && v42 && *(v15 + 44) == 1735551332)
            {
              v43 = v42[1] > 0x3Fu && *v42 > 0x3Fu;
              if (!v43)
              {
LABEL_106:
                v46 = 0;
                goto LABEL_96;
              }
            }
          }

          else if (v42)
          {
            v44 = *(v41 + 44);
            if (v44 == 1768912492 || v44 == 1735551332)
            {
              OUTLINED_FUNCTION_48_19();
              if (v20)
              {
                goto LABEL_106;
              }
            }
          }

          v46 = *(a1 + 176) & 1;
LABEL_96:
          *(a1 + 176) = v46;
        }

        v47 = *(v15 + 44) != 1768187246 || *(v41 + 44) != 1768187246;
        *(a1 + 176) &= v47;
        v48 = *(v41 + 528);
        if (v48)
        {
          goto LABEL_104;
        }

        OUTLINED_FUNCTION_613();
        v52 = CFArrayCreateMutable(v49, v50, v51);
        *(v41 + 528) = v52;
        if (!v52)
        {
          break;
        }

        OUTLINED_FUNCTION_613();
        v56 = CFArrayCreateMutable(v53, v54, v55);
        *(v41 + 536) = v56;
        if (!v56)
        {
          break;
        }

        v48 = *(v41 + 528);
LABEL_104:
        CFArrayAppendValue(v48, v15);
        CFArrayAppendValue(*(v41 + 536), *v32);
        if (++v37 >= v32[1])
        {
          goto LABEL_111;
        }
      }

      v57 = -12846;
      if (!v37)
      {
        goto LABEL_108;
      }

LABEL_122:
      if (!v57)
      {
        goto LABEL_108;
      }

      for (j = 0; j != v37; ++j)
      {
        v59 = IFFItemGetWithID(v38, *(v32[2] + 4 * j));
        if (v59)
        {
          v60 = v59;
          v61 = *(v59 + 66);
          if (v61)
          {
            v62 = CFArrayGetCount(*(v59 + 66));
            CFArrayRemoveValueAtIndex(v61, v62 - 1);
            v63 = *(v60 + 67);
            v64 = CFArrayGetCount(v63);
            CFArrayRemoveValueAtIndex(v63, v64 - 1);
          }
        }
      }

LABEL_109:
      IFFItemReferenceFree(v32);
      CFArrayRemoveValueAtIndex(*(v15 + 520), v30);
      v23 = v308 - 1;
      v13 = v307;
    }

    while (v30 < v23);
    if (!v23)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_4_63();
      FigSignalErrorAtGM();
    }

    v11 = v264;
    v12 = v271;
LABEL_132:
    OUTLINED_FUNCTION_34_28();
    v70 = v19 || v66 == 1768187246 || v66 == 1953325424 || v66 == 1768912492;
    if (v70 && !*v67)
    {
      *v67 = -1;
      fig_log_get_emitter();
      OUTLINED_FUNCTION_4_63();
      if (!FigSignalErrorAtGM())
      {
        goto LABEL_147;
      }
    }

    else if (!v65)
    {
LABEL_147:
      CFArrayAppendValue(theArray, v15);
    }

LABEL_148:
    ++v12;
  }

  while (v12 != v11);
LABEL_152:
  v285 = CFArrayGetCount(theArray);
  if (v285 >= 1)
  {
    v71 = 0;
    HIDWORD(v300) = v13;
    while (2)
    {
      v72 = CFArrayGetValueAtIndex(theArray, v71);
      v323 = 0;
      if (!IFFItemIsPicture(v72))
      {
        goto LABEL_230;
      }

      v73 = IFFInformationReservePictureFromItemIfNeeded(v72, 0, &v323);
      if (v73)
      {
        goto LABEL_344;
      }

      OUTLINED_FUNCTION_9_77();
      v73 = IFFItemInboundReferencesOfType(v72, 1953000802, v74, v75);
      if (v73)
      {
        goto LABEL_344;
      }

      v83 = OUTLINED_FUNCTION_50_16(0, v76, v77, v78, v79, v80, v81, v82, v257, v264, v271, v278, v285, theArray, v71, v300, v72, value, cf);
      if (v83 < 1)
      {
LABEL_185:
        if (!v71)
        {
          goto LABEL_187;
        }
      }

      else
      {
        v84 = v83;
        OUTLINED_FUNCTION_613();
        v88 = CFArrayCreateMutable(v85, v86, v87);
        *(v323 + 24) = v88;
        if (!v88)
        {
          goto LABEL_342;
        }

        for (k = 0; k != v84; ++k)
        {
          valuea = 0;
          v90 = CFArrayGetValueAtIndex(v71, k);
          if (sanityCheckImageItem(v90))
          {
            v73 = OUTLINED_FUNCTION_65_14(1, v258, v265, v272, v279, v286, theArray, v293, v301, v309);
            if (v73)
            {
              goto LABEL_344;
            }

            CFArrayAppendValue(*(v323 + 24), 0);
          }
        }

        v91 = v323;
        v92 = *(v323 + 24);
        if (v92)
        {
          v93 = CFArrayGetCount(v92);
        }

        else
        {
          v93 = 0;
        }

        v94 = *(*(v91 + 8) + 80);
        if (v94)
        {
          if (v93 >= 1)
          {
            v95 = 0;
            v96 = 0;
            v97 = v94[1] * *v94;
            do
            {
              v98 = *(*(CFArrayGetValueAtIndex(*(v91 + 24), v96) + 1) + 80);
              if (v98)
              {
                v99 = v98[1] * *v98;
                if (v99)
                {
                  if (v97 / v99 >= 0xC9)
                  {
                    v100 = *(v91 + 24);
                    if (v100 && (v101 = CFArrayGetCount(v100), v101 >= 1))
                    {
                      v102 = v101;
                      v103 = 0;
                      while (1)
                      {
                        v104 = CFArrayGetValueAtIndex(*(v91 + 24), v103);
                        v105 = *(*(v104[1] + 80) + 4) * **(v104[1] + 80);
                        if (v105 > v99 && v105 / v99 < 0xC9)
                        {
                          break;
                        }

                        if (v102 == ++v103)
                        {
                          v95 = 0;
                          goto LABEL_183;
                        }
                      }

                      v95 = 1;
LABEL_183:
                      LOBYTE(v13) = BYTE4(v301);
                    }

                    else
                    {
                      v95 = 0;
                    }
                  }

                  else
                  {
                    v95 = 1;
                  }
                }
              }

              *(a1 + 176) &= v95;
              ++v96;
            }

            while (v96 != v93);
          }

          goto LABEL_185;
        }

        *(a1 + 176) = 0;
        if (!v71)
        {
LABEL_187:
          OUTLINED_FUNCTION_9_77();
          v106 = v309;
          v73 = IFFItemInboundReferencesOfType(v309, 1635088492, v107, v108);
          if (v73)
          {
            goto LABEL_344;
          }

          v116 = OUTLINED_FUNCTION_50_16(0, v109, v110, v111, v112, v113, v114, v115, v258, v265, v272, v279, v286, theArray, v293, v301, v309, valuea, cf);
          if (v116 >= 1)
          {
            v117 = v116;
            OUTLINED_FUNCTION_613();
            v121 = CFArrayCreateMutable(v118, v119, v120);
            *(v323 + 32) = v121;
            if (!v121)
            {
              goto LABEL_342;
            }

            for (m = 0; m != v117; ++m)
            {
              valueb = 0;
              v123 = CFArrayGetValueAtIndex(v71, m);
              if (sanityCheckImageItem(v123))
              {
                v73 = OUTLINED_FUNCTION_65_14(2, v259, v266, v273, v280, v287, theArray, v294, v302, v310);
                if (v73)
                {
                  goto LABEL_344;
                }

                CFArrayAppendValue(*(v323 + 32), 0);
              }
            }
          }

          if (v71)
          {
            CFRelease(v71);
            cf = 0;
          }

          v124 = OUTLINED_FUNCTION_18_46();
          v73 = OUTLINED_FUNCTION_70_12(v124, v125, v126, v127);
          if (v73)
          {
            goto LABEL_344;
          }

          if (OUTLINED_FUNCTION_50_16(0, v128, v129, v130, v131, v132, v133, v134, v259, v266, v273, v280, v287, theArray, v294, v302, v310, valueb, cf) >= 1)
          {
            OUTLINED_FUNCTION_613();
            v138 = CFArrayCreateMutable(v135, v136, v137);
            *(v323 + 48) = v138;
            if (!v138)
            {
              goto LABEL_342;
            }

            OUTLINED_FUNCTION_37_28(v138);
          }

          if (v71)
          {
            CFRelease(v71);
            cf = 0;
          }

          v139 = OUTLINED_FUNCTION_18_46();
          v73 = OUTLINED_FUNCTION_70_12(v139, v140, v141, v142);
          if (v73)
          {
            goto LABEL_344;
          }

          if (OUTLINED_FUNCTION_50_16(0, v143, v144, v145, v146, v147, v148, v149, v260, v267, v274, v281, v288, theArray, v295, v303, v311, valuec, cf) >= 1)
          {
            OUTLINED_FUNCTION_613();
            v153 = CFArrayCreateMutable(v150, v151, v152);
            *(v323 + 56) = v153;
            if (!v153)
            {
              goto LABEL_342;
            }

            OUTLINED_FUNCTION_37_28(v153);
          }

          if (v71)
          {
            CFRelease(v71);
            cf = 0;
          }

          v154 = OUTLINED_FUNCTION_18_46();
          v73 = OUTLINED_FUNCTION_70_12(v154, v155, v156, v157);
          if (v73)
          {
            goto LABEL_344;
          }

          if (OUTLINED_FUNCTION_50_16(0, v158, v159, v160, v161, v162, v163, v164, v261, v268, v275, v282, v289, theArray, v296, v304, v312, valued, cf) >= 1)
          {
            OUTLINED_FUNCTION_613();
            v168 = CFArrayCreateMutable(v165, v166, v167);
            *(v323 + 64) = v168;
            if (!v168)
            {
              goto LABEL_342;
            }

            OUTLINED_FUNCTION_37_28(v168);
          }

          if (v71)
          {
            CFRelease(v71);
            cf = 0;
          }

          v169 = OUTLINED_FUNCTION_18_46();
          v73 = OUTLINED_FUNCTION_70_12(v169, v170, v171, v172);
          if (v73)
          {
            goto LABEL_344;
          }

          if (OUTLINED_FUNCTION_50_16(0, v173, v174, v175, v176, v177, v178, v179, v262, v269, v276, v283, v290, theArray, v297, v305, v313, valuee, cf) >= 1)
          {
            OUTLINED_FUNCTION_613();
            v183 = CFArrayCreateMutable(v180, v181, v182);
            *(v323 + 72) = v183;
            if (!v183)
            {
              goto LABEL_342;
            }

            OUTLINED_FUNCTION_37_28(v183);
          }

          if (v71)
          {
            CFRelease(v71);
            cf = 0;
          }

          OUTLINED_FUNCTION_9_77();
          v73 = IFFItemInboundReferencesOfType(v106, 1684630887, v184, v185);
          if (v73)
          {
            goto LABEL_344;
          }

          v193 = OUTLINED_FUNCTION_50_16(0, v186, v187, v188, v189, v190, v191, v192, v263, v270, v277, v284, v291, theArray, v298, v306, v314, valuef, cf);
          if (v193 >= 1)
          {
            v194 = v193;
            OUTLINED_FUNCTION_613();
            v198 = CFArrayCreateMutable(v195, v196, v197);
            *(v323 + 40) = v198;
            if (!v198)
            {
LABEL_342:
              fig_log_get_emitter();
              OUTLINED_FUNCTION_4_63();
LABEL_343:
              v73 = FigSignalErrorAtGM();
LABEL_344:
              v212 = v73;
              goto LABEL_339;
            }

            v325.location = 0;
            v325.length = v194;
            CFArrayAppendArray(v198, v71, v325);
          }

          if (v71)
          {
            CFRelease(v71);
            cf = 0;
          }

          v71 = v299;
          if (*(a1 + 64) && *(a1 + 68) == *(*(v323 + 8) + 40))
          {
            *(a1 + 80) = v323;
          }

LABEL_230:
          v71 = (v71 + 1);
          if (v71 == v285)
          {
            goto LABEL_234;
          }

          continue;
        }
      }

      break;
    }

    CFRelease(v71);
    cf = 0;
    goto LABEL_187;
  }

LABEL_234:
  *(a1 + 121) = v13;
  MutableCopy = FigCFArrayCreateMutableCopy();
  if (MutableCopy)
  {
    v200 = MutableCopy;
    while (2)
    {
      v201 = CFArrayGetCount(v200);
      if (v201 >= 1)
      {
        v202 = v201;
        v203 = 0;
        do
        {
          v204 = CFArrayGetValueAtIndex(v200, v202 - 1);
          if (!v204)
          {
            goto LABEL_252;
          }

          v205 = v204;
          if (!v204[2])
          {
            v206 = v204[5];
            if (v206)
            {
              v207 = CFArrayGetCount(v206);
              if (v207 >= 1)
              {
                v208 = v207;
                v209 = 0;
                while (1)
                {
                  v210 = CFArrayGetValueAtIndex(v205[5], v209);
                  if (!v210)
                  {
                    break;
                  }

                  v211 = v210[4];
                  if (!v211)
                  {
                    break;
                  }

                  --*(v211 + 16);
                  if (v208 == ++v209)
                  {
                    v203 = 1;
                    goto LABEL_247;
                  }
                }

LABEL_252:
                v212 = 4294954450;
                goto LABEL_253;
              }
            }

LABEL_247:
            CFArrayRemoveValueAtIndex(v200, v202 - 1);
          }

          v43 = v202-- <= 1;
        }

        while (!v43);
        if (v203)
        {
          continue;
        }
      }

      break;
    }

    CFArrayGetCount(v200);
    v212 = 0;
LABEL_253:
    CFRelease(v200);
    if (v212)
    {
      goto LABEL_339;
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_4_63();
    v212 = FigSignalErrorAtGM();
    if (v212)
    {
      goto LABEL_339;
    }
  }

  if (*(a1 + 128) >= 1)
  {
    v213 = 0;
    do
    {
      if (*(a1 + 80))
      {
        break;
      }

      v214 = CFArrayGetValueAtIndex(*(a1 + 136), v213);
      if (!v214[2])
      {
        *(a1 + 80) = v214;
        *(a1 + 68) = *(v214[1] + 40);
        *(a1 + 64) = 1;
      }

      ++v213;
    }

    while (v213 < *(a1 + 128));
  }

  v215 = 0;
  v216 = 0;
  while (2)
  {
    v217 = *(a1 + 112);
    if (v217)
    {
      v217 = CFArrayGetCount(v217);
    }

    if (v215 < v217)
    {
      v218 = CFArrayGetValueAtIndex(*(a1 + 112), v215);
      if (v218[6] != 1634497650)
      {
        goto LABEL_279;
      }

      v219 = v218;
      v220 = 0;
      v221 = 1;
      v222 = 1;
LABEL_266:
      v223 = *(v219 + 6);
      if (v223)
      {
        v223 = CFArrayGetCount(v223);
      }

      if (v220 >= v223)
      {
LABEL_278:
        v216 |= v221;
        *(v219 + 29) = v221;
        *(v219 + 28) = v222;
LABEL_279:
        ++v215;
        continue;
      }

      v224 = CFArrayGetValueAtIndex(*(v219 + 6), v220);
      v225 = v224[17];
      if (v224[16])
      {
        v226 = v224;
        if (!IFFItemIsPicture(v224) || !v226[48])
        {
          if (!v226[17])
          {
            goto LABEL_277;
          }

          goto LABEL_275;
        }
      }

      else
      {
        if (!v224[17])
        {
LABEL_277:
          v221 = 0;
          v222 = 0;
          goto LABEL_278;
        }

LABEL_275:
        v222 = 0;
      }

      v221 &= v225;
      ++v220;
      goto LABEL_266;
    }

    break;
  }

  for (n = 0; ; ++n)
  {
    v228 = *(a1 + 112);
    if (v228)
    {
      v228 = CFArrayGetCount(v228);
    }

    if (n >= v228)
    {
      break;
    }

    v229 = CFArrayGetValueAtIndex(*(a1 + 112), n);
    if (!v229[28])
    {
      v230 = v229;
      if (!v229[29])
      {
        for (ii = 0; ; ++ii)
        {
          v232 = *(v230 + 6);
          if (v232)
          {
            v232 = CFArrayGetCount(v232);
          }

          if (ii >= v232)
          {
            break;
          }

          v233 = CFArrayGetValueAtIndex(*(v230 + 6), ii);
          v234 = v233;
          if (*(v233 + 17))
          {
            v323 = 0;
            if (IFFInformationGetGroupByID(a1, v233[10], &v323) || !*(v323 + 28))
            {
              goto LABEL_298;
            }
          }

          else if (!*(v233 + 16) || !IFFItemIsPicture(v233) || !*(v234 + 48))
          {
LABEL_298:
            v230[28] = 0;
            goto LABEL_299;
          }
        }

        v230[28] = 1;
        if (*(v230 + 6) == 1937007986 && !*(*(v230 + 5) + 216))
        {
          v235 = FigCFArrayGetValueAtIndex();
          if (v235)
          {
            v236 = v235;
            if (*(v235 + 216))
            {
              for (jj = 0; ; ++jj)
              {
                v238 = *(v236 + 544);
                if (v238)
                {
                  v238 = CFArrayGetCount(v238);
                }

                if (jj >= v238)
                {
                  break;
                }

                v239 = OUTLINED_FUNCTION_60_17();
                v241 = CFArrayGetValueAtIndex(v239, v240);
                v242 = *(v241 + 6);
                if (v242)
                {
                  v243 = CFArrayGetCount(v242) & 0xFFFFFFFFFFFFFFFELL;
                  v244 = *(v241 + 28) && *(v241 + 6) == 1937007986;
                  if (v244 && v243 == 2)
                  {
                    v246 = CFArrayGetValueAtIndex(*(v241 + 6), 0);
                    if (v246[27] == *(CFArrayGetValueAtIndex(*(v241 + 6), 1) + 27))
                    {
                      *(*(v230 + 5) + 216) = *(v236 + 216);
                      break;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }

LABEL_299:
    ;
  }

  if (v216)
  {
    for (kk = 0; ; ++kk)
    {
      v248 = *(a1 + 112);
      if (v248)
      {
        v248 = CFArrayGetCount(v248);
      }

      if (kk >= v248)
      {
        break;
      }

      v249 = CFArrayGetValueAtIndex(*(a1 + 112), kk);
      if (*(v249 + 29))
      {
        v250 = v249;
        if (v249[6] == 1634497650)
        {
          v251 = 0;
          for (mm = 0; ; ++mm)
          {
            v253 = *(v250 + 6);
            if (v253)
            {
              v253 = CFArrayGetCount(v253);
            }

            if (mm >= v253)
            {
              break;
            }

            v254 = CFArrayGetValueAtIndex(*(v250 + 6), mm);
            v323 = 0;
            if (IFFInformationGetGroupByID(a1, v254[10], &v323))
            {
              *(v250 + 28) = 0;
              break;
            }

            v255 = v323;
            if (*(v323 + 28))
            {
              *(v323 + 28) = v251 == 0;
              *(v255 + 30) = v251 != 0;
              v251 = 1;
            }
          }

          *(v250 + 30) = 1;
        }
      }
    }
  }

  v212 = 0;
  *(a1 + 24) = 1;
LABEL_339:
  CFRelease(theArray);
  if (cf)
  {
    CFRelease(cf);
  }

  return v212;
}

uint64_t IFFInformationCopySourceIsMIAF(uint64_t a1, void *a2)
{
  if (!a2)
  {
    return 4294954516;
  }

  SInt32 = FigCFNumberCreateSInt32();
  if (!SInt32)
  {
    return 4294954450;
  }

  v5 = SInt32;
  if (FigCFArrayContainsValue())
  {
LABEL_4:
    v6 = MEMORY[0x1E695E4D0];
LABEL_8:
    v8 = *v6;
    if (*v6)
    {
      v8 = CFRetain(v8);
    }

    v9 = 0;
    *a2 = v8;
    goto LABEL_11;
  }

  CFRelease(v5);
  v7 = FigCFNumberCreateSInt32();
  if (!v7)
  {
    return 4294954450;
  }

  v5 = v7;
  if (!FigCFArrayContainsValue())
  {
LABEL_7:
    v6 = MEMORY[0x1E695E4C0];
    goto LABEL_8;
  }

  v11 = resolvePicturesIfNeeded(a1);
  if (!v11)
  {
    if (*(a1 + 176) && *(a1 + 64))
    {
      goto LABEL_4;
    }

    goto LABEL_7;
  }

  v9 = v11;
LABEL_11:
  CFRelease(v5);
  return v9;
}

uint64_t IFFInformationCopySourceSpecifiesOrientation(uint64_t a1, uint64_t a2)
{
  if (!a2)
  {
    return 4294954516;
  }

  OUTLINED_FUNCTION_187();
  v4 = 0;
  while (1)
  {
    v5 = v4;
    v6 = *(v3 + 104);
    v7 = v6 ? CFArrayGetCount(v6) : 0;
    if (v5 >= v7)
    {
      break;
    }

    ValueAtIndex = CFArrayGetValueAtIndex(*(v3 + 104), v5);
    v4 = v5 + 1;
    if ((ValueAtIndex[2] - 13) >= 0xFFFFFFFE)
    {
      if (v5 < v7)
      {
        v9 = MEMORY[0x1E695E4D0];
        goto LABEL_11;
      }

      break;
    }
  }

  v9 = MEMORY[0x1E695E4C0];
LABEL_11:
  if (*v9)
  {
    v10 = CFRetain(*v9);
  }

  else
  {
    v10 = 0;
  }

  result = 0;
  *v2 = v10;
  return result;
}

void IFFInformationAddItemWithType(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, _DWORD *a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20)
{
  OUTLINED_FUNCTION_845();
  a19 = v20;
  a20 = v23;
  v24 = v22;
  v26 = v25;
  v28 = v27;
  v30 = v29;
  v31 = v21;
  if (v22)
  {
    v32 = *v22;
  }

  else
  {
    v32 = 0;
  }

  Mutable = *(v21 + 96);
  if (!Mutable)
  {
    Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
    *(v31 + 96) = Mutable;
    if (!Mutable)
    {
      goto LABEL_17;
    }

    v32 = 1;
    if (v24)
    {
      *v24 = 1;
      Mutable = *(v31 + 96);
    }
  }

  v34 = IFFItemGetWithID(Mutable, v28);
  a10 = v34;
  if (!v34)
  {
    if (IFFItemGetOrCreateWithID(v31, v28, v32, &a10))
    {
LABEL_16:
      OUTLINED_FUNCTION_843();
      return;
    }

    v34 = a10;
LABEL_14:
    v34[11] = v30;
    *(v34 + 16) = 1;
    if (v26)
    {
      *v26 = v34;
    }

    goto LABEL_16;
  }

  if (!v34[11] && !*(v34 + 17))
  {
    goto LABEL_14;
  }

LABEL_17:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  OUTLINED_FUNCTION_843();

  FigSignalErrorAtGM();
}

uint64_t IFFInformationReserveItemWithType(uint64_t a1, int a2, int *a3, void *a4)
{
  if (*(a1 + 96) || (Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]), (*(a1 + 96) = Mutable) != 0))
  {
    v12 = 0;
    v9 = *(a1 + 88) + 1;
    *(a1 + 88) = v9;
    result = IFFItemGetOrCreateWithID(a1, v9, 1, &v12);
    if (!result)
    {
      v11 = v12;
      *(v12 + 44) = a2;
      *(v11 + 16) = 1;
      if (a3)
      {
        *a3 = v9;
      }

      result = 0;
      if (a4)
      {
        *a4 = v11;
      }
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t IFFInformationGetItemMIMETypeAndEncoding(uint64_t a1, const char **a2, void *a3)
{
  if (*(a1 + 44) != 1835625829)
  {
    return 4294949526;
  }

  if (!*(a1 + 464))
  {
    return 4294954513;
  }

  if (a2)
  {
    v3 = *(a1 + 472);
    if (!v3)
    {
      v3 = "";
    }

    *a2 = v3;
  }

  v4 = 0;
  if (a3)
  {
    *a3 = *(a1 + 480);
  }

  return v4;
}

uint64_t IFFInformationSetItemMIMETypeAndEncoding(uint64_t a1, char *__s, const char *a3)
{
  result = 4294949526;
  if (!__s || *(a1 + 44) != 1835625829)
  {
    return result;
  }

  v7 = strlen(__s);
  v8 = v7 + 1;
  if (v7 + 1 < 2)
  {
    v11 = *(a1 + 472);
    if (v11)
    {
      *(a1 + 472) = 0;
      free(v11);
    }

    goto LABEL_8;
  }

  v9 = malloc_type_malloc(v7 + 1, 0x83EF6D7uLL);
  if (v9)
  {
    v10 = v9;
    free(*(a1 + 472));
    *(a1 + 472) = v10;
    memcpy(v10, __s, v8);
LABEL_8:
    if (!a3 || (v12 = strlen(a3), v13 = v12 + 1, v12 + 1 < 2))
    {
      v16 = *(a1 + 480);
      if (v16)
      {
        *(a1 + 480) = 0;
        free(v16);
      }

      goto LABEL_14;
    }

    v14 = malloc_type_malloc(v12 + 1, 0x6350BE85uLL);
    if (v14)
    {
      v15 = v14;
      free(*(a1 + 480));
      *(a1 + 480) = v15;
      memcpy(v15, a3, v13);
LABEL_14:
      result = 0;
      *(a1 + 464) = 1;
      return result;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_20_0();

  return FigSignalErrorAtGM();
}

uint64_t IFFInformationGetItemURIType(uint64_t a1, const char **a2)
{
  if (*(a1 + 44) != 1970432288)
  {
    return 4294949526;
  }

  if (!*(a1 + 488))
  {
    return 4294954513;
  }

  result = 0;
  if (a2)
  {
    v4 = *(a1 + 496);
    if (!v4)
    {
      v4 = "";
    }

    *a2 = v4;
  }

  return result;
}

uint64_t IFFInformationSetItemURIType(uint64_t a1, char *__s, CFStringRef theString)
{
  if (*(a1 + 44) != 1970432288 || (__s == 0) != (theString != 0))
  {
    return 4294949526;
  }

  if (__s)
  {
    Length = strlen(__s);
  }

  else
  {
    Length = CFStringGetLength(theString);
  }

  v7 = Length + 1;
  if (Length + 1 < 2)
  {
    v10 = *(a1 + 496);
    if (v10)
    {
      *(a1 + 496) = 0;
      free(v10);
    }

    goto LABEL_13;
  }

  v8 = malloc_type_malloc(Length + 1, 0x221ED203uLL);
  if (v8)
  {
    v9 = v8;
    free(*(a1 + 496));
    *(a1 + 496) = v9;
    if (__s)
    {
      memcpy(v9, __s, v7);
LABEL_13:
      result = 0;
      *(a1 + 488) = 1;
      return result;
    }

    if (OUTLINED_FUNCTION_66_13(theString))
    {
      goto LABEL_13;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_20_0();

  return FigSignalErrorAtGM();
}

uint64_t IFFInformationSetItemName(uint64_t a1, char *__s, CFStringRef theString)
{
  if ((__s == 0) != (theString != 0))
  {
    return 4294949526;
  }

  if (__s)
  {
    Length = strlen(__s);
  }

  else
  {
    Length = CFStringGetLength(theString);
  }

  v7 = Length + 1;
  if (Length + 1 < 2)
  {
    result = *(a1 + 504);
    if (!result)
    {
      return result;
    }

    *(a1 + 504) = 0;
    free(result);
    return 0;
  }

  v8 = malloc_type_malloc(Length + 1, 0x6906F1E5uLL);
  if (v8)
  {
    v9 = v8;
    free(*(a1 + 504));
    *(a1 + 504) = v9;
    if (__s)
    {
      memcpy(v9, __s, v7);
      return 0;
    }

    if (OUTLINED_FUNCTION_66_13(theString))
    {
      return 0;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

void IFFInformationAddItemReference()
{
  OUTLINED_FUNCTION_649();
  v5 = 0;
  if (v3 >= 1)
  {
    v6 = v4;
    if (v4)
    {
      v7 = v3;
      v8 = v2;
      v9 = v1;
      v10 = v0;
      v11 = 0;
      v12 = *(v0 + 121);
      do
      {
        Count = *(v9 + 520);
        if (Count)
        {
          Count = CFArrayGetCount(Count);
        }

        if (v11 >= Count)
        {
          v5 = OUTLINED_FUNCTION_45_19();
          if (v5 && (OUTLINED_FUNCTION_5_45(), v35 = malloc_type_calloc(v7, 4uLL, v34), (v5[2] = v35) != 0) && (OUTLINED_FUNCTION_63_12(), v37 = malloc_type_calloc(v7, 8uLL, v36), (v5[3] = v37) != 0))
          {
            v38 = 0;
            *v5 = v8;
            v5[1] = v7;
            v39 = v12 != 0;
            do
            {
              v40 = v6[v38];
              v41 = *(v40 + 40);
              *(v5[3] + 8 * v38) = v40;
              *(v5[2] + 4 * v38) = v41;
              v39 |= (v41 & 0xFFFF0000) != 0;
              ++v38;
            }

            while (v7 != v38);
            v42 = v39 & 1;
            CFArrayAppendValue(*(v9 + 520), v5);
            v5 = 0;
            *(v10 + 120) = 1;
            *(v10 + 121) = v42;
          }

          else
          {
            fig_log_get_emitter();
            OUTLINED_FUNCTION_20_0();
            FigSignalErrorAtGM();
          }

          goto LABEL_26;
        }

        ValueAtIndex = FigCFArrayGetValueAtIndex();
        ++v11;
      }

      while (*ValueAtIndex != v8);
      v15 = ValueAtIndex;
      OUTLINED_FUNCTION_5_45();
      v18 = malloc_type_calloc(v16 + v7, 4uLL, v17);
      if (v18)
      {
        OUTLINED_FUNCTION_63_12();
        v21 = malloc_type_calloc(v19 + v7, 8uLL, v20);
        v22 = v21;
        if (v21)
        {
          memcpy(v21, v15[3], 8 * v15[1]);
          v23 = v15[1];
          v24 = 8 * v23;
          v25 = v7;
          do
          {
            v26 = *v6++;
            *&v22[v24] = v26;
            v24 += 8;
            --v25;
          }

          while (v25);
          qsort(v22, v23 + v7, 8uLL, _sortExistingItems);
          v27 = *(v10 + 121);
          v28 = v15[1] + v7;
          if (v28 < 1)
          {
LABEL_18:
            *(v10 + 121) = v27;
            v33 = v15[2];
            v32 = v15[3];
            v15[2] = v18;
            v15[3] = v22;
            v15[1] = v28;
            v18 = v33;
            v22 = v32;
          }

          else
          {
            v29 = 0;
            v30 = v27 != 0;
            while (1)
            {
              v31 = *(*&v22[8 * v29] + 40);
              v18[v29] = v31;
              if (v29)
              {
                if (v31 == v18[v29 - 1])
                {
                  break;
                }
              }

              v30 |= (v31 & 0xFFFF0000) != 0;
              if (v28 == ++v29)
              {
                LOBYTE(v27) = v30 & 1;
                goto LABEL_18;
              }
            }

            fig_log_get_emitter();
            OUTLINED_FUNCTION_20_0();
            FigSignalErrorAtGM();
          }
        }
      }

      else
      {
        v22 = 0;
      }

      free(v22);
      free(v18);
      v5 = 0;
    }
  }

LABEL_26:
  IFFItemReferenceFree(v5);
  OUTLINED_FUNCTION_651();
}

uint64_t IFFInformationSetItemPropertyStereoAggressors(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, const void **a5)
{
  OUTLINED_FUNCTION_58_12();
  v11 = *(v10 + 24);
  if (v11)
  {
    *(v8 + 24) = 0;
    free(v11);
  }

  v12 = *(v8 + 32);
  if (v12)
  {
    CFArrayRemoveAllValues(v12);
  }

  *(v8 + 40) = v7;
  v13 = malloc_type_calloc(v7, 0x10uLL, 0x1060040CEBD4D21uLL);
  *(v8 + 24) = v13;
  *(v8 + 48) = v13;
  if (!v13)
  {
    return 4294954450;
  }

  if (v7 >= 1)
  {
    v14 = 0;
    do
    {
      v15 = *v6++;
      *(*(v8 + 48) + v14) = v15;
      v16 = *v5++;
      *(*(v8 + 48) + v14 + 1) = v16;
      v17 = *a5;
      *(*(v8 + 48) + v14 + 8) = *a5;
      if (v17)
      {
        MutableCopy = *(v8 + 32);
        if (!MutableCopy)
        {
          MutableCopy = FigCFArrayCreateMutableCopy();
          *(v8 + 32) = MutableCopy;
          if (!MutableCopy)
          {
            return 4294954450;
          }

          v17 = *a5;
        }

        CFArrayAppendValue(MutableCopy, v17);
      }

      ++a5;
      v14 += 16;
      --v7;
    }

    while (v7);
  }

  return 0;
}

void IFFInformationAssignSharedItemPropertyByIndex(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20)
{
  OUTLINED_FUNCTION_845();
  a19 = v20;
  a20 = v26;
  v27 = *(v21 + 104);
  if (v27)
  {
    v28 = v22;
    if ((v22 & 0x8000000000000000) == 0)
    {
      v29 = v25;
      v30 = v24;
      v31 = v23;
      v32 = v21;
      if (CFArrayGetCount(*(v21 + 104)) > v22)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(v27, v28);
        if (*(v32 + 96) || (v34 = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]), (*(v32 + 96) = v34) != 0))
        {
          a10 = 0;
          if (IFFItemGetOrCreateWithID(v32, v29, 0, &a10))
          {
LABEL_53:
            OUTLINED_FUNCTION_843();
            return;
          }

          v35 = malloc_type_calloc(1uLL, 0x10uLL, 0x10200405F07FB98uLL);
          if (v35)
          {
            v36 = v35;
            *v35 = ValueAtIndex;
            *(v35 + 8) = v30;
            v37 = a10;
            if (v31)
            {
              v38 = ValueAtIndex[2];
              if (v38 > 0x17)
              {
                v39 = 0;
              }

              else
              {
                v39 = dword_196E7B930[v38];
              }

              for (i = 0; ; ++i)
              {
                v41 = *(v37 + 56);
                if (v41)
                {
                  Count = CFArrayGetCount(v41);
                  v41 = *(v37 + 56);
                }

                else
                {
                  Count = 0;
                }

                if (i >= Count)
                {
                  break;
                }

                v43 = *(*CFArrayGetValueAtIndex(v41, i) + 8);
                if (v43 <= 0x17 && ((0xDF9C01u >> v43) & 1) != 0 && dword_196E7B990[v43] > v39)
                {
                  v41 = *(v37 + 56);
                  break;
                }
              }

              CFArrayInsertValueAtIndex(v41, i, v36);
            }

            else
            {
              CFArrayAppendValue(*(a10 + 56), v35);
            }

            switch(ValueAtIndex[2])
            {
              case 0u:
                if (v30)
                {
                  *(v37 + 16) = 0;
                }

                break;
              case 1u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 72) = v54;
                break;
              case 2u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 80) = v50;
                break;
              case 3u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 88) = v52;
                break;
              case 4u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 112) = v47;
                break;
              case 5u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 104) = v60;
                break;
              case 6u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 120) = v63;
                break;
              case 7u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 128) = v53;
                break;
              case 8u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 136) = v66;
                break;
              case 9u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 144) = v49;
                break;
              case 0xAu:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 152) = v65;
                break;
              case 0xBu:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 160) = v46;
                break;
              case 0xCu:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 168) = v48;
                break;
              case 0xDu:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 176) = v62;
                break;
              case 0xEu:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 96) = v45;
                break;
              case 0xFu:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 184) = v51;
                break;
              case 0x10u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 192) = v44;
                break;
              case 0x11u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 200) = v55;
                break;
              case 0x12u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 208) = v64;
                break;
              case 0x13u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 216) = v68;
                break;
              case 0x14u:
                Mutable = *(v37 + 224);
                if (Mutable || (OUTLINED_FUNCTION_613(), Mutable = CFArrayCreateMutable(v57, v58, v59), (*(v37 + 224) = Mutable) != 0))
                {
                  CFArrayAppendValue(Mutable, ValueAtIndex + 10);
                }

                break;
              case 0x15u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 232) = v61;
                break;
              case 0x16u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 240) = v67;
                break;
              case 0x17u:
                OUTLINED_FUNCTION_21_39();
                *(v37 + 248) = v69;
                break;
              default:
                goto LABEL_53;
            }

            goto LABEL_53;
          }
        }
      }
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_3_5();
  OUTLINED_FUNCTION_843();

  FigSignalErrorAtGM();
}

uint64_t IFFInformationSetItemPropertyCodecConfiguration(uint64_t a1, int a2, const void *a3, size_t size)
{
  result = 4294949526;
  if (a3 && size)
  {
    if (*(a1 + 56) >= size)
    {
      v10 = *(a1 + 48);
      goto LABEL_7;
    }

    v9 = malloc_type_malloc(size, 0x5AFF561AuLL);
    if (v9)
    {
      v10 = v9;
      free(*(a1 + 24));
      *(a1 + 24) = v10;
      *(a1 + 48) = v10;
LABEL_7:
      *(a1 + 40) = a2;
      *(a1 + 56) = size;
      memcpy(v10, a3, size);
      return 0;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t IFFInformationSetItemPropertyICCProfileData(uint64_t a1, const void *a2, size_t size)
{
  result = 4294949526;
  if (a2 && size)
  {
    *(a1 + 48) = size;
    v7 = malloc_type_malloc(size, 0xD88FEB54uLL);
    if (v7)
    {
      v8 = v7;
      free(*(a1 + 24));
      *(a1 + 24) = v8;
      *(a1 + 40) = v8;
      memcpy(v8, a2, size);
      return 0;
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_3_5();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t IFFInformationSetItemPropertyHDRMetaData(uint64_t a1, _BYTE *a2, size_t a3)
{
  switch(*(a1 + 8))
  {
    case 6:
      if (a3 == 4)
      {
        goto LABEL_8;
      }

      goto LABEL_10;
    case 7:
      if (a3 != 24)
      {
        goto LABEL_10;
      }

      goto LABEL_8;
    case 8:
      if ((*a2 & 0x3C) == 0)
      {
        goto LABEL_10;
      }

      OUTLINED_FUNCTION_53_18();
      if ((v3 | 1) != a3)
      {
        goto LABEL_10;
      }

      goto LABEL_8;
    case 9:
      if (a3 == 8)
      {
LABEL_8:
        memcpy((a1 + 40), a2, a3);
        result = 0;
      }

      else
      {
LABEL_10:
        result = 4294954516;
      }

      break;
    default:
      result = 4294954509;
      break;
  }

  return result;
}

void IFFInformationSetItemPropertyAuxiliaryType(uint64_t a1, char *__s, const void *a3, size_t a4)
{
  if (!__s)
  {
    goto LABEL_9;
  }

  v8 = strlen(__s) + 1;
  if (a3)
  {
    v9 = a4;
  }

  else
  {
    v9 = 0;
  }

  v10 = malloc_type_malloc(v8 + v9, 0x4575821BuLL);
  if (v10)
  {
    v11 = v10;
    free(*(a1 + 24));
    *(a1 + 24) = v11;
    *(a1 + 40) = v11;
    memcpy(v11, __s, v8);
    if (a3)
    {
      v12 = (*(a1 + 24) + v8);
      *(a1 + 48) = v12;
      *(a1 + 56) = a4;
      memcpy(v12, a3, a4);
    }

    else
    {
      *(a1 + 48) = 0;
      *(a1 + 56) = 0;
    }

LABEL_9:
    OUTLINED_FUNCTION_4_16();
    return;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_1_4();
  OUTLINED_FUNCTION_4_16();

  FigSignalErrorAtGM();
}

void IFFInformationReserveItemExtentTable(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20)
{
  OUTLINED_FUNCTION_845();
  a19 = v20;
  a20 = v28;
  if (v23 >= 2)
  {
    goto LABEL_31;
  }

  v29 = v27;
  v30 = v26;
  v31 = v25;
  v32 = v24;
  v33 = v23;
  v34 = v22;
  v35 = v21;
  if (v27)
  {
    v36 = *v27;
  }

  else
  {
    v36 = 0;
  }

  if (!*(v21 + 96))
  {
    Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
    *(v35 + 96) = Mutable;
    if (!Mutable)
    {
      goto LABEL_31;
    }

    v36 = 1;
    if (v29)
    {
      *v29 = 1;
    }
  }

  a10 = 0;
  if (IFFItemGetOrCreateWithID(v35, v34, v36, &a10))
  {
LABEL_30:
    OUTLINED_FUNCTION_843();
    return;
  }

  v38 = a10;
  if (!*(a10 + 448))
  {
    OUTLINED_FUNCTION_34_28();
    v40 = v40 || v39 == 1768187246;
    if (v40 || v39 == 1953325424 || v39 == 1768912492)
    {
      v45 = *(v35 + 176) & 1;
    }

    else
    {
      v45 = *(v35 + 176) & (v33 ^ 1);
    }

    *(v35 + 176) = v45;
    *(v38 + 432) = v33;
    *(v38 + 440) = v32;
    *(v38 + 448) = v31;
    v43 = *(v38 + 456);
    if (v43)
    {
      *(v38 + 456) = 0;
      free(v43);
    }

    v44 = malloc_type_calloc(v31, 0x10uLL, 0x1000040451B5BE8uLL);
    *(v38 + 456) = v44;
    if (v44)
    {
      if (v33)
      {
        *(v35 + 122) = 1;
      }

      if (v30)
      {
        *v30 = v44;
      }

      goto LABEL_30;
    }
  }

LABEL_31:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  OUTLINED_FUNCTION_843();

  FigSignalErrorAtGM();
}

void IFFInformationReserveItemReferenceTable(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20)
{
  OUTLINED_FUNCTION_845();
  a19 = v20;
  a20 = v27;
  if (!v25)
  {
    v40 = 0;
    goto LABEL_17;
  }

  v28 = v26;
  v29 = v25;
  v30 = v24;
  v31 = v23;
  v32 = v22;
  v33 = v21;
  if (v26)
  {
    v34 = *v26;
  }

  else
  {
    v34 = 0;
  }

  if (*(v21 + 96))
  {
    goto LABEL_9;
  }

  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  *(v33 + 96) = Mutable;
  if (Mutable)
  {
    v34 = 1;
    if (v28)
    {
      *v28 = 1;
    }

LABEL_9:
    a10 = 0;
    if (!IFFItemGetOrCreateWithID(v33, v32, v34, &a10))
    {
      v36 = a10;
      if (!*(a10 + 520))
      {
        OUTLINED_FUNCTION_613();
        *(v36 + 520) = CFArrayCreateMutable(v37, v38, v39);
      }

      v40 = OUTLINED_FUNCTION_45_19();
      if (!v40 || (OUTLINED_FUNCTION_5_45(), v42 = malloc_type_calloc(v30, 4uLL, v41), (v40[2] = v42) == 0) || (OUTLINED_FUNCTION_63_12(), v44 = malloc_type_calloc(v30, 8uLL, v43), (v40[3] = v44) == 0))
      {
        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_4();
        FigSignalErrorAtGM();
        goto LABEL_17;
      }

      *v40 = v31;
      v40[1] = v30;
      CFArrayAppendValue(*(v36 + 520), v40);
      *(v33 + 120) = 1;
      *v29 = v40[2];
    }

    goto LABEL_16;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  FigSignalErrorAtGM();
LABEL_16:
  v40 = 0;
LABEL_17:
  IFFItemReferenceFree(v40);
  OUTLINED_FUNCTION_843();
}

void IFFInformationReserveItemGroup(uint64_t a1, int a2, int a3, int a4, uint64_t *a5)
{
  v23 = 0;
  v24 = 0;
  v5 = a3 == 1634497650 || a3 == 1937007986;
  if (v5 && ((v11 = MEMORY[0x1E695E480], *(a1 + 112)) || (v12 = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]), (*(a1 + 112) = v12) != 0)) && (*(a1 + 96) || (v13 = CFArrayCreateMutable(*v11, 0, MEMORY[0x1E695E9C0]), (*(a1 + 96) = v13) != 0)))
  {
    v14 = IFFItemGetOrCreateWithID(a1, a2, 0, &v23);
    if (v14)
    {
      goto LABEL_18;
    }

    v15 = v23;
    if (!*(v23 + 16) && !*(v23 + 17))
    {
      *(v23 + 17) = 1;
      v16 = IFFItemGroupCreate(v14, &v24);
      v17 = v24;
      if (v16)
      {
        if (!v24)
        {
          goto LABEL_18;
        }
      }

      else
      {
        *(v24 + 16) = a2;
        *(v17 + 24) = a3;
        *(v17 + 40) = v15;
        *(v17 + 32) = a4;
        OUTLINED_FUNCTION_613();
        Mutable = CFArrayCreateMutable(v18, v19, v20);
        *(v17 + 48) = Mutable;
        if (Mutable)
        {
          CFArrayAppendValue(*(a1 + 112), v17);
          if (a5)
          {
            *a5 = v17;
          }
        }

        else
        {
          fig_log_get_emitter();
          OUTLINED_FUNCTION_0_4();
          FigSignalErrorAtGM();
        }
      }

      CFRelease(v17);
LABEL_18:
      OUTLINED_FUNCTION_90_4();
      return;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
  }

  OUTLINED_FUNCTION_90_4();

  FigSignalErrorAtGM();
}

uint64_t IFFInformationDropItemGroup(uint64_t a1, CFArrayRef *a2)
{
  if (a2)
  {
    for (i = 0; ; ++i)
    {
      Count = a2[6];
      if (Count)
      {
        Count = CFArrayGetCount(Count);
      }

      if (i >= Count)
      {
        break;
      }

      ValueAtIndex = CFArrayGetValueAtIndex(a2[6], i);
      for (j = 0; ; ++j)
      {
        v8 = *(ValueAtIndex + 68);
        if (v8)
        {
          v8 = CFArrayGetCount(v8);
        }

        if (j >= v8)
        {
          break;
        }

        v9 = OUTLINED_FUNCTION_60_17();
        if (CFArrayGetValueAtIndex(v9, v10) == a2)
        {
          v11 = OUTLINED_FUNCTION_60_17();
          CFArrayRemoveValueAtIndex(v11, v12);
          break;
        }
      }
    }

    for (k = 0; ; ++k)
    {
      v14 = *(a1 + 112);
      if (v14)
      {
        v14 = CFArrayGetCount(v14);
      }

      if (k >= v14)
      {
        break;
      }

      if (CFArrayGetValueAtIndex(*(a1 + 112), k) == a2)
      {
        CFArrayRemoveValueAtIndex(*(a1 + 112), k);
        return 0;
      }
    }
  }

  return 0;
}

void IFFInformationAddItemToGroup(uint64_t a1, int a2, uint64_t a3)
{
  value = 0;
  if (!a3 || !*(a1 + 96) && (Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]), (*(a1 + 96) = Mutable) == 0))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    goto LABEL_34;
  }

  if (IFFItemGetOrCreateWithID(a1, a2, 0, &value))
  {
LABEL_42:
    OUTLINED_FUNCTION_90_4();
    return;
  }

  v7 = value;
  Count = *(value + 68);
  if (!Count)
  {
    OUTLINED_FUNCTION_613();
    Count = CFArrayCreateMutable(v9, v10, v11);
    v7[68] = Count;
    if (!Count)
    {
      goto LABEL_33;
    }
  }

  v12 = 0;
  v13 = 0;
LABEL_8:
  Count = CFArrayGetCount(Count);
  while (v12 < Count)
  {
    v14 = OUTLINED_FUNCTION_60_17();
    ValueAtIndex = CFArrayGetValueAtIndex(v14, v15);
    v17 = ValueAtIndex;
    if (ValueAtIndex == a3)
    {
      if (ValueAtIndex[6] != 1937007986)
      {
        goto LABEL_33;
      }

      v18 = *(a3 + 48);
      if (!v18 || CFArrayGetCount(v18) != 2)
      {
        goto LABEL_33;
      }
    }

    if (v17[6] == 1634497650)
    {
      v13 = v17;
    }

    ++v12;
    Count = v7[68];
    if (Count)
    {
      goto LABEL_8;
    }
  }

  v19 = *(a3 + 24);
  if (v19 != 1634497650)
  {
    if (v13)
    {
      for (i = 0; ; ++i)
      {
        v21 = *(v13 + 6);
        if (v21)
        {
          v21 = CFArrayGetCount(v21);
        }

        if (i >= v21)
        {
          break;
        }

        v22 = FigCFArrayGetValueAtIndex();
        if (*(v22 + 40) != a2)
        {
          v23 = v22;
          v24 = 0;
          while (1)
          {
            v25 = *(v23 + 544);
            if (v25)
            {
              v25 = CFArrayGetCount(v25);
            }

            if (v24 >= v25)
            {
              break;
            }

            v26 = CFArrayGetValueAtIndex(*(v23 + 544), v24++);
            if (v26 == a3)
            {
              goto LABEL_33;
            }
          }
        }
      }

      v19 = *(a3 + 24);
    }

    if (v19 == 1937007986)
    {
      v28 = *(a3 + 48);
      if (v28)
      {
        if (CFArrayGetCount(v28) >= 3)
        {
          goto LABEL_33;
        }
      }
    }

    goto LABEL_41;
  }

  if (!v13)
  {
LABEL_41:
    CFArrayAppendValue(*(a3 + 48), v7);
    CFArrayAppendValue(v7[68], a3);
    goto LABEL_42;
  }

LABEL_33:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
LABEL_34:
  OUTLINED_FUNCTION_90_4();

  FigSignalErrorAtGM();
}

uint64_t IFFInformationGetPrimaryPicture(uint64_t a1, void *a2, _DWORD *a3, _BYTE *a4)
{
  result = resolvePicturesIfNeeded(a1);
  if (!result)
  {
    v9 = *(a1 + 64);
    if (*(a1 + 64))
    {
      v9 = *(a1 + 80) != 0;
    }

    if (a4)
    {
      *a4 = v9;
    }

    if (v9)
    {
      if (a2)
      {
        *a2 = *(a1 + 80);
      }

      if (a3)
      {
        *a3 = *(a1 + 68);
      }
    }
  }

  return result;
}

uint64_t IFFInformationGetPictureCount(uint64_t a1, int a2, CFIndex *a3)
{
  v6 = resolvePicturesIfNeeded(a1);
  if (!v6)
  {
    if (!a2)
    {
      Count = CFArrayGetCount(*(a1 + 136));
      if (!a3)
      {
        return v6;
      }

      goto LABEL_4;
    }

    Count = *(a1 + 128);
    if (a3)
    {
LABEL_4:
      *a3 = Count;
    }
  }

  return v6;
}

uint64_t IFFInformationGetPictureByIndex(uint64_t a1, CFIndex a2, unint64_t a3, unint64_t a4)
{
  if (!(a3 | a4))
  {
    return 0;
  }

  result = resolvePicturesIfNeeded(a1);
  if (!result)
  {
    if (CFArrayGetCount(*(a1 + 136)) <= a2)
    {
      return 0xFFFFFFFFLL;
    }

    else
    {
      ValueAtIndex = CFArrayGetValueAtIndex(*(a1 + 136), a2);
      v10 = ValueAtIndex;
      if (a3)
      {
        *a3 = ValueAtIndex;
      }

      result = 0;
      if (a4)
      {
        *a4 = *(v10[1] + 40);
      }
    }
  }

  return result;
}

uint64_t IFFInformationGetPictureByID(uint64_t a1, int a2)
{
  result = resolvePicturesIfNeeded(a1);
  if (!result)
  {
    v5 = *(a1 + 136);
    if (CFArrayGetCount(v5) < 1)
    {
      return 0xFFFFFFFFLL;
    }

    else
    {
      v6 = 0;
      while (1)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(v5, v6);
        if (*(ValueAtIndex[1] + 40) == a2)
        {
          break;
        }

        if (++v6 >= CFArrayGetCount(v5))
        {
          return 0xFFFFFFFFLL;
        }
      }

      return OUTLINED_FUNCTION_2_98(ValueAtIndex);
    }
  }

  return result;
}

uint64_t IFFInformationGetIndexOfPicture(uint64_t a1, uint64_t a2, _DWORD *a3)
{
  if (!a2)
  {
    return 4294949526;
  }

  OUTLINED_FUNCTION_180_1();
  result = resolvePicturesIfNeeded(v6);
  if (!result)
  {
    v10.length = CFArrayGetCount(*(v4 + 136));
    v10.location = 0;
    FirstIndexOfValue = CFArrayGetFirstIndexOfValue(*(v4 + 136), v10, v3);
    if ((FirstIndexOfValue & 0x8000000000000000) != 0)
    {
      return 4294954513;
    }

    else
    {
      v9 = FirstIndexOfValue;
      if (FirstIndexOfValue >> 31)
      {
        return 4294954451;
      }

      else
      {
        result = 0;
        *a3 = v9;
      }
    }
  }

  return result;
}

uint64_t IFFInformationGetItemByID(uint64_t a1, int a2)
{
  v2 = IFFItemGetWithID(*(a1 + 96), a2);
  if (v2)
  {
    return OUTLINED_FUNCTION_2_98(v2);
  }

  else
  {
    return 0xFFFFFFFFLL;
  }
}

uint64_t IFFInformationGetGroupsList()
{
  OUTLINED_FUNCTION_187();
  result = resolvePicturesIfNeeded(v2);
  if (!result)
  {
    *v0 = *(v1 + 112);
  }

  return result;
}

void IFFPictureTilesHaveSameBaseProperties(uint64_t a1)
{
  if (*(*(a1 + 8) + 44) == 1735551332)
  {
    if (*(a1 + 16))
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();

      FigSignalErrorAtGM();
    }

    else
    {

      _tilesHaveSameBaseProperties();
    }
  }
}

void _tilesHaveSameBaseProperties()
{
  OUTLINED_FUNCTION_34_28();
  if (v15)
  {
    OUTLINED_FUNCTION_649();
    OUTLINED_FUNCTION_187();
    v3 = *(v2 + 520);
    if (v3 && (Count = CFArrayGetCount(v3), Count >= 1))
    {
      v5 = Count;
      v6 = 0;
      v7 = 0;
      v8 = 1;
      while (1)
      {
        CFArrayGetValueAtIndex(*(v1 + 520), v6);
        OUTLINED_FUNCTION_41_27();
        if (v15)
        {
          v10 = *(v9 + 8);
          if (v10 >= 1)
          {
            break;
          }
        }

LABEL_36:
        if (++v6 >= v5 || !v8)
        {
          goto LABEL_41;
        }
      }

      v11 = *(v9 + 24);
      v12 = 1;
      while (1)
      {
        v13 = *v11;
        v14 = *(*v11 + 44);
        v15 = v14 == 1735551332 || v14 == 1768187246;
        v16 = v15 || v14 == 1768912492;
        if (v16 || v14 == 1953325424)
        {
          break;
        }

        if (!v7)
        {
          v7 = *v11;
        }

        v18 = v7[10] == v13[10] && v7[9] == v13[9];
        v20 = v13[13];
        v19 = v13[14];
        v8 = v18 && v7[13] == v20 && v7[14] == v19;
        if (v12 < v10)
        {
          ++v12;
          v11 += 8;
          if (v8)
          {
            continue;
          }
        }

        goto LABEL_36;
      }

      v8 = 0;
    }

    else
    {
      v8 = 1;
    }

LABEL_41:
    *v0 = v8;
    OUTLINED_FUNCTION_651();
  }
}

void IFFPictureTilesHaveTransformativeProperties(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20)
{
  OUTLINED_FUNCTION_845();
  a19 = v20;
  a20 = v21;
  v23 = *(v22 + 8);
  OUTLINED_FUNCTION_34_28();
  if (!v26)
  {
LABEL_24:
    OUTLINED_FUNCTION_843();
    return;
  }

  if (!*(v24 + 16))
  {
    v27 = v25;
    v28 = *(v23 + 520);
    if (v28)
    {
      Count = CFArrayGetCount(v28);
      if (Count >= 1)
      {
        v30 = Count;
        for (i = 0; i < v30; ++i)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(*(v23 + 520), i);
          if (*ValueAtIndex == 1684630887)
          {
            v33 = ValueAtIndex;
            if (ValueAtIndex[1] >= 1)
            {
              v34 = 0;
              while (2)
              {
                for (j = *(v33[3] + 8 * v34); ; j = *(a10 + 8))
                {
                  if (*(j + 152) || (v36 = *(j + 160)) != 0 && *v36 || (v37 = *(j + 168)) != 0 && *v37 != -1)
                  {
                    v38 = 1;
                    goto LABEL_23;
                  }

                  if (*(j + 44) != 1768187246)
                  {
                    break;
                  }

                  a10 = 0;
                  if (getParentOfIdentityPicture(*(j + 32), &a10))
                  {
                    goto LABEL_24;
                  }
                }

                if (++v34 < v33[1])
                {
                  continue;
                }

                break;
              }
            }
          }
        }
      }
    }

    v38 = 0;
LABEL_23:
    *v27 = v38;
    goto LABEL_24;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_20_0();
  OUTLINED_FUNCTION_843();

  FigSignalErrorAtGM();
}

uint64_t IFFPictureIsPrimary()
{
  OUTLINED_FUNCTION_187();
  v3 = *v2;
  result = resolvePicturesIfNeeded(*v2);
  if (!result)
  {
    if (*(v3 + 64) && *(v3 + 80))
    {
      if (!v0)
      {
        return result;
      }

      v5 = *(*(v1 + 8) + 40) == *(v3 + 68);
      goto LABEL_6;
    }

    if (v0)
    {
      v5 = 0;
LABEL_6:
      *v0 = v5;
    }
  }

  return result;
}

void IFFPictureAddThumbnailItemReference(uint64_t a1)
{
  OUTLINED_FUNCTION_59_16(a1);
  IFFInformationAddItemReference();
  if (!v3)
  {
    if (*(v1 + 24) || (OUTLINED_FUNCTION_613(), Mutable = CFArrayCreateMutable(v4, v5, v6), (*(v1 + 24) = Mutable) != 0))
    {
      *(v2 + 64) = 1;
      v8 = OUTLINED_FUNCTION_265();
      if (!IFFInformationReservePictureFromItemIfNeeded(v8, v9, v10))
      {
        CFArrayAppendValue(*(v1 + 24), 0);
      }
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_3_5();

      FigSignalErrorAtGM();
    }
  }
}

void IFFPictureAddAuxiliaryImageItemReference(uint64_t a1)
{
  OUTLINED_FUNCTION_59_16(a1);
  IFFInformationAddItemReference();
  if (!v3)
  {
    if (*(v1 + 32) || (OUTLINED_FUNCTION_613(), Mutable = CFArrayCreateMutable(v4, v5, v6), (*(v1 + 32) = Mutable) != 0))
    {
      *(v2 + 64) = 2;
      v8 = OUTLINED_FUNCTION_265();
      if (!IFFInformationReservePictureFromItemIfNeeded(v8, v9, v10))
      {
        CFArrayAppendValue(*(v1 + 32), 0);
      }
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_3_5();

      FigSignalErrorAtGM();
    }
  }
}

void IFFPictureAddMetadataItemReference(uint64_t a1, unsigned int a2, const void *a3)
{
  IFFInformationAddItemReference();
  if (!v6)
  {
    if (a2 < 4 && ((v7 = a1 + 8 * a2, (Mutable = *(v7 + 48)) != 0) || (OUTLINED_FUNCTION_613(), Mutable = CFArrayCreateMutable(v9, v10, v11), (*(v7 + 48) = Mutable) != 0)))
    {
      CFArrayAppendValue(Mutable, a3);
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();

      FigSignalErrorAtGM();
    }
  }
}

uint64_t IFFPictureCopyPictureDimensionsDictionary(uint64_t a1)
{
  v1 = *(a1 + 8);
  v2 = *(v1 + 80);
  if (!v2)
  {
    return 4294954513;
  }

  if (*(v1 + 44) != 1735551332)
  {
    v3 = *v2;
    v4 = v2[1];
    goto LABEL_8;
  }

  if (*(v1 + 272))
  {
    v3 = *(v1 + 292);
    if (v3 == *v2)
    {
      v4 = *(v1 + 296);
      if (v4 == v2[1])
      {
LABEL_8:
        v8.width = v3;
        v8.height = v4;
        DictionaryRepresentation = CGSizeCreateDictionaryRepresentation(v8);
        if (DictionaryRepresentation)
        {
          return OUTLINED_FUNCTION_19_45(DictionaryRepresentation);
        }
      }
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

void IFFPictureCopyCleanApertureDictionary(uint64_t a1, CFDictionaryRef *a2)
{
  v3 = *(a1 + 8);
  if (*(v3 + 152))
  {
    createCleanApertureExtensionDictFromIFFItem(*MEMORY[0x1E695E480], v3, a2);
  }
}

void createCleanApertureExtensionDictFromIFFItem(const __CFAllocator *a1, uint64_t a2, CFDictionaryRef *a3)
{
  v12 = 0u;
  v13 = 0u;
  OUTLINED_FUNCTION_197();
  IFFItemPropertyGetOrderedTransformPropertiesForItem(v5, v6, v7, v8, v9);
  if (!v10)
  {
    v11[0] = v12;
    v11[1] = v13;
    createCleanApertureExtensionDictFromProperty(a1, v11, a3);
  }
}

uint64_t IFFPictureCopyPixelAspectRatioDictionary(uint64_t a1)
{
  if (!*(*(a1 + 8) + 88))
  {
    return 4294954513;
  }

  OUTLINED_FUNCTION_187();
  v4 = CFGetAllocator(*v3);
  v5 = *(*(v2 + 8) + 88);

  return createPixelAspectRatioExtensionDictFromIFFItemProperty(v4, v5, v1);
}

void IFFPictureCopyPixelInformationArray(uint64_t a1, __CFArray **a2)
{
  if (!*(*(a1 + 8) + 96))
  {
LABEL_8:
    OUTLINED_FUNCTION_4_16();
    return;
  }

  v4 = CFGetAllocator(*a1);
  v5 = *(*(a1 + 8) + 96);
  Mutable = CFArrayCreateMutable(v4, 0, MEMORY[0x1E695E9C0]);
  if (Mutable)
  {
    v7 = Mutable;
    if (*v5)
    {
      v8 = 0;
      v9 = *MEMORY[0x1E695E480];
      while (1)
      {
        v10 = CFNumberCreate(v9, kCFNumberSInt8Type, (*(v5 + 1) + v8));
        if (!v10)
        {
          break;
        }

        v11 = v10;
        CFArrayAppendValue(v7, v10);
        CFRelease(v11);
        if (++v8 >= *v5)
        {
          goto LABEL_7;
        }
      }

      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      FigSignalErrorAtGM();
      CFRelease(v7);
    }

    else
    {
LABEL_7:
      *a2 = v7;
    }

    goto LABEL_8;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  OUTLINED_FUNCTION_4_16();

  FigSignalErrorAtGM();
}

void IFFPictureCopyRotationDegreesCCW(uint64_t a1)
{
  if (*(*(a1 + 8) + 160))
  {
    valuePtr = 0;
    OUTLINED_FUNCTION_613();
    IFFItemPropertyGetOrderedTransformPropertiesForItem(v1, v2, v3, v4, 0);
    if (!v5)
    {
      v6 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberIntType, &valuePtr);
      if (v6)
      {
        OUTLINED_FUNCTION_19_45(v6);
      }

      else
      {
        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_4();
        FigSignalErrorAtGM();
      }
    }
  }
}

void IFFPictureCopyMirroringDirection(uint64_t a1)
{
  if (*(*(a1 + 8) + 168))
  {
    valuePtr = 0;
    OUTLINED_FUNCTION_613();
    IFFItemPropertyGetOrderedTransformPropertiesForItem(v1, v2, v3, 0, v4);
    if (!v5)
    {
      v6 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt32Type, &valuePtr);
      if (v6)
      {
        OUTLINED_FUNCTION_19_45(v6);
      }

      else
      {
        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_4();
        FigSignalErrorAtGM();
      }
    }
  }
}

uint64_t IFFPictureCopyLayerSelector(uint64_t a1)
{
  v1 = *(*(a1 + 8) + 232);
  if (!v1)
  {
    return 4294954513;
  }

  valuePtr = *v1;
  v2 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt32Type, &valuePtr);
  if (v2)
  {
    return OUTLINED_FUNCTION_19_45(v2);
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t IFFPictureCopyOperatingPointSelector(uint64_t a1)
{
  v1 = *(*(a1 + 8) + 240);
  if (!v1)
  {
    return 4294954513;
  }

  valuePtr = *v1;
  v2 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt32Type, &valuePtr);
  if (v2)
  {
    return OUTLINED_FUNCTION_19_45(v2);
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t IFFPictureCopyLayerSizes(uint64_t a1)
{
  if (!*(*(a1 + 8) + 248))
  {
    return 4294954513;
  }

  OUTLINED_FUNCTION_187();
  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 3, MEMORY[0x1E695E9C0]);
  if (Mutable)
  {
    v3 = Mutable;
    v4 = 0;
    while (1)
    {
      appended = FigCFArrayAppendInt32();
      if (appended)
      {
        break;
      }

      v4 += 4;
      if (v4 == 12)
      {
        v6 = 0;
        *v1 = v3;
        return v6;
      }
    }

    v6 = appended;
    CFRelease(v3);
    return v6;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_2_10();

  return FigSignalErrorAtGM();
}

void IFFPictureCopyStereoMetadataProperties(uint64_t a1, __CFDictionary **a2)
{
  if (!a1 || !a2 || !*(a1 + 8))
  {
    goto LABEL_48;
  }

  Mutable = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (Mutable)
  {
    v5 = Mutable;
    v6 = *(a1 + 8);
    if (v6[23])
    {
      if (FigCFDictionarySetInt32())
      {
        goto LABEL_51;
      }

      v6 = *(a1 + 8);
    }

    if (!v6[24])
    {
      goto LABEL_11;
    }

    if (!FigCFDictionarySetInt32())
    {
      v6 = *(a1 + 8);
LABEL_11:
      if (v6[25])
      {
        v7 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
        if (!v7)
        {
          goto LABEL_56;
        }

        OUTLINED_FUNCTION_28_31();
        if (FigCFDictionarySetInt32())
        {
          goto LABEL_57;
        }

        v8 = CFArrayCreateMutable(0, 3, MEMORY[0x1E695E9C0]);
        if (!v8)
        {
LABEL_56:
          fig_log_get_emitter();
          OUTLINED_FUNCTION_1_4();
          FigSignalErrorAtGM();
          goto LABEL_57;
        }

        v9 = v8;
        OUTLINED_FUNCTION_28_31();
        if (FigCFArrayAppendInt32())
        {
          goto LABEL_58;
        }

        OUTLINED_FUNCTION_28_31();
        if (FigCFArrayAppendInt32())
        {
          goto LABEL_58;
        }

        OUTLINED_FUNCTION_28_31();
        if (FigCFArrayAppendInt32())
        {
          goto LABEL_58;
        }

        CFDictionarySetValue(v7, @"Position", v9);
        CFRelease(v9);
        OUTLINED_FUNCTION_28_31();
        if (v10[3] || v10[4] || v10[5])
        {
          v11 = CFArrayCreateMutable(0, 3, MEMORY[0x1E695E9C0]);
          if (!v11)
          {
            goto LABEL_56;
          }

          v9 = v11;
          OUTLINED_FUNCTION_28_31();
          if (FigCFArrayAppendInt32())
          {
            goto LABEL_58;
          }

          OUTLINED_FUNCTION_28_31();
          if (FigCFArrayAppendInt32())
          {
            goto LABEL_58;
          }

          OUTLINED_FUNCTION_28_31();
          if (FigCFArrayAppendInt32())
          {
            goto LABEL_58;
          }

          OUTLINED_FUNCTION_28_31();
          if (*(v12 + 24))
          {
            v13 = kFigCameraExtrinsics_Rotation32Key;
          }

          else
          {
            v13 = kFigCameraExtrinsics_Rotation16Key;
          }

          CFDictionarySetValue(v7, *v13, v9);
          CFRelease(v9);
          OUTLINED_FUNCTION_28_31();
        }

        FigCFDictionarySetBoolean();
        CFDictionarySetValue(v5, @"CameraExtrinsics", v7);
        OUTLINED_FUNCTION_30_28();
        if (!v14)
        {
LABEL_43:
          if (CFDictionaryGetCount(v5) >= 1)
          {
            v9 = 0;
            *a2 = v5;
            if (!v7)
            {
              goto LABEL_46;
            }

            goto LABEL_45;
          }

          v9 = 0;
LABEL_58:
          CFRelease(v5);
          if (!v7)
          {
LABEL_46:
            if (v9)
            {
              CFRelease(v9);
            }

LABEL_48:
            OUTLINED_FUNCTION_4_16();
            return;
          }

LABEL_45:
          CFRelease(v7);
          goto LABEL_46;
        }

        CFRelease(v7);
      }

      else if (!v6[26])
      {
        v7 = 0;
        goto LABEL_43;
      }

      v7 = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      if (v7)
      {
        OUTLINED_FUNCTION_30_28();
        if (!FigCFDictionarySetInt())
        {
          OUTLINED_FUNCTION_30_28();
          if (!FigCFDictionarySetInt())
          {
            OUTLINED_FUNCTION_30_28();
            if (!FigCFDictionarySetInt())
            {
              OUTLINED_FUNCTION_30_28();
              if (!FigCFDictionarySetInt())
              {
                OUTLINED_FUNCTION_30_28();
                if (!*(v15 + 20))
                {
LABEL_42:
                  FigCFDictionarySetBoolean();
                  CFDictionarySetValue(v5, @"CameraIntrinsics", v7);
                  goto LABEL_43;
                }

                if (!FigCFDictionarySetInt())
                {
                  OUTLINED_FUNCTION_30_28();
                  if (!FigCFDictionarySetInt())
                  {
                    OUTLINED_FUNCTION_30_28();
                    if (!FigCFDictionarySetInt())
                    {
                      OUTLINED_FUNCTION_30_28();
                      goto LABEL_42;
                    }
                  }
                }
              }
            }
          }
        }

LABEL_57:
        v9 = 0;
        goto LABEL_58;
      }

      goto LABEL_56;
    }

LABEL_51:
    v7 = 0;
    goto LABEL_57;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_1_4();
  OUTLINED_FUNCTION_4_16();

  FigSignalErrorAtGM();
}

void IFFPictureSetStereoMetadataProperties(uint64_t *a1, const __CFDictionary *cf)
{
  if (a1 && cf && (v4 = CFGetTypeID(cf), v4 == CFDictionaryGetTypeID()))
  {
    v5 = a1[1];
    if (!CFDictionaryGetValue(cf, @"HorizontalFOV") || (v8 = OUTLINED_FUNCTION_43_23(), _setStereoMetadataSingleIntegerHelper(v8, v9, 15, v10), !v11))
    {
      if (!CFDictionaryGetValue(cf, @"Baseline") || (v12 = OUTLINED_FUNCTION_43_23(), _setStereoMetadataSingleIntegerHelper(v12, v13, 16, v14), !v15))
      {
        if (!CFDictionaryGetValue(cf, @"DisparityAdjustment") || (v16 = OUTLINED_FUNCTION_43_23(), _setStereoMetadataSingleIntegerHelper(v16, v17, 19, v18), !v19))
        {
          Value = CFDictionaryGetValue(cf, @"CameraExtrinsics");
          if (!Value || (_setStereoMetadataIntrinsicsExtrinsicsHelper(a1, v5, 17, Value), !v20))
          {
            v7 = CFDictionaryGetValue(cf, @"CameraIntrinsics");
            if (v7)
            {

              _setStereoMetadataIntrinsicsExtrinsicsHelper(a1, v5, 18, v7);
            }
          }
        }
      }
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();

    FigSignalErrorAtGM();
  }
}

void _setStereoMetadataSingleIntegerHelper(CFArrayRef *a1, uint64_t a2, uint64_t a3, const void *a4)
{
  OUTLINED_FUNCTION_197();
  if (!IFFInformationGetItemPropertyByType(v7, v8, v9, v10, v11))
  {
    goto LABEL_18;
  }

  if (a3 > 0x13 || ((1 << a3) & 0x98000) == 0)
  {
    return;
  }

  v12 = CFGetTypeID(a4);
  if (v12 != CFNumberGetTypeID())
  {
    goto LABEL_18;
  }

  SInt64 = FigCFNumberGetSInt64();
  v14 = SInt64;
  if (a3 == 19)
  {
    if (SInt64 != SInt64)
    {
      goto LABEL_18;
    }

    goto LABEL_9;
  }

  if (HIDWORD(SInt64))
  {
LABEL_18:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
    FigSignalErrorAtGM();
    return;
  }

LABEL_9:
  OUTLINED_FUNCTION_0_52();
  LODWORD(v30) = a3;
  _getSharedPropertyOfTypeWithComparator(a1, a3, &v31, v29, v15, v16, v17, v18, v29[0], 0x40000000, 0, ___setStereoMetadataSingleIntegerHelper_block_invoke, &__block_descriptor_tmp_17_4, v14, v30, 0, v32, v33, v34, v35, v36);
  if (v19)
  {
    if (IFFInformationReserveSharedItemProperty(a1, a3, &v31, 0))
    {
      return;
    }

    v20 = v31;
    if (a3 == 16 || a3 == 15 || a3 == 19)
    {
      *(v31 + 10) = v14;
    }
  }

  else
  {
    v20 = v31;
  }

  v21 = OUTLINED_FUNCTION_23_45(v20);
  OUTLINED_FUNCTION_39_23(v21, v22, v23, v24, v25, v26, v27, v28, v29[0], v29[1], v29[2], v29[3], v29[4], v30, v31, v32, v33, v34, v35, v36);
}

void _setStereoMetadataIntrinsicsExtrinsicsHelper(uint64_t *a1, uint64_t a2, uint64_t a3, const void *a4)
{
  OUTLINED_FUNCTION_197();
  if (!IFFInformationGetItemPropertyByType(v7, v8, v9, v10, v11))
  {
    goto LABEL_58;
  }

  if ((a3 - 19) < 0xFFFFFFFE)
  {
    return;
  }

  v12 = CFGetTypeID(a4);
  TypeID = CFDictionaryGetTypeID();
  if (v12 != TypeID)
  {
    goto LABEL_58;
  }

  v88 = 0uLL;
  v89 = 0;
  v85 = 0u;
  v86 = 0u;
  v87 = 0;
  if (a3 != 17)
  {
    v90 = 0;
    v26 = OUTLINED_FUNCTION_55_20(TypeID, @"DenominatorBits", &v90, v14, v15, v16, v17, v18, v72, v73, v74, v75, *v76, *&v76[8], *&v76[16], *&v76[24], *&v76[32], v77, v78, v79, v80, v81, v82, v83, 0);
    if (v84)
    {
      if (!v26 && v90 <= 0x3F)
      {
        BYTE5(v89) = v90;
        v32 = OUTLINED_FUNCTION_55_20(v26, @"FocalLengthX", &v88, v27, v28, v29, v30, v31, v72, v73, v74, v75, *v76, *&v76[8], *&v76[16], *&v76[24], *&v76[32], v77, v78, v79, v80, v81, v82, v83, v84);
        if (v84)
        {
          if (!v32)
          {
            v38 = OUTLINED_FUNCTION_55_20(v32, @"PrincipalPointX", &v88 + 2, v33, v34, v35, v36, v37, v72, v73, v74, v75, *v76, *&v76[8], *&v76[16], *&v76[24], *&v76[32], v77, v78, v79, v80, v81, v82, v83, v84);
            if (v84)
            {
              if (!v38)
              {
                v44 = OUTLINED_FUNCTION_55_20(v38, @"PrincipalPointY", (&v88 | 0xC), v39, v40, v41, v42, v43, v72, v73, v74, v75, *v76, *&v76[8], *&v76[16], *&v76[24], *&v76[32], v77, v78, v79, v80, v81, v82, v83, v84);
                if (v84)
                {
                  if (!v44)
                  {
                    HIBYTE(v82) = 0;
                    if (_cfDictionaryGetSizeLimitedInt32IfPresent(a4, @"FocalLengthY", &v88 + 1, &v83))
                    {
                      return;
                    }

                    SizeLimitedInt32IfPresent = _cfDictionaryGetSizeLimitedInt32IfPresent(a4, @"Skew", &v89, &v82 + 1);
                    if (SizeLimitedInt32IfPresent)
                    {
                      return;
                    }

                    v51 = v89;
                    v52 = DWORD1(v88);
                    if (!HIBYTE(v82) || !v89)
                    {
                      goto LABEL_35;
                    }

                    if (DWORD1(v88))
                    {
                      v53 = OUTLINED_FUNCTION_55_20(SizeLimitedInt32IfPresent, @"SkewDenominatorBits", &v90, v46, v47, v48, v49, v50, v72, v73, v74, v75, *v76, *&v76[8], *&v76[16], *&v76[24], *&v76[32], v77, v78, v79, v80, v81, v82, v83, v84);
                      if (v84)
                      {
                        if (!v53 && v90 <= 0x1F)
                        {
                          BYTE6(v89) = v90;
LABEL_35:
                          BYTE4(v89) = (v51 | v52) != 0;
                          if (!FigCFDictionaryGetBooleanIfPresent())
                          {
                            HIBYTE(v89) = 0;
                          }

                          goto LABEL_45;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();
    goto LABEL_60;
  }

  FigCFDictionaryGetInt32IfPresent();
  FigCFDictionaryGetBooleanIfPresent();
  Value = CFDictionaryGetValue(a4, @"Position");
  if (!Value || (v20 = Value, v21 = CFGetTypeID(Value), v21 != CFArrayGetTypeID()) || CFArrayGetCount(v20) != 3)
  {
LABEL_58:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();
    goto LABEL_60;
  }

  if (_cfArrayGetSizeLimitedInt32IfPresent(v20, 0, 0, &v85) || _cfArrayGetSizeLimitedInt32IfPresent(v20, 1, 0, &v85 + 1) || _cfArrayGetSizeLimitedInt32IfPresent(v20, 2, 0, &v85 + 2))
  {
    return;
  }

  v22 = CFDictionaryGetValue(a4, @"Rotation32");
  v23 = CFDictionaryGetValue(a4, @"Rotation16");
  v24 = v23;
  if (v22)
  {
    if (!v23)
    {
      if (_cfArrayGetSizeLimitedInt32IfPresent(v22, 0, 0, (&v85 | 0xC)) || _cfArrayGetSizeLimitedInt32IfPresent(v22, 1, 0, &v86) || _cfArrayGetSizeLimitedInt32IfPresent(v22, 2, 0, &v86 + 1))
      {
        return;
      }

      v25 = 1;
      goto LABEL_42;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();
LABEL_60:
    FigSignalErrorAtGM();
    return;
  }

  if (!v23)
  {
    goto LABEL_43;
  }

  if (_cfArrayGetSizeLimitedInt32IfPresent(v23, 0, 1, (&v85 | 0xC)) || _cfArrayGetSizeLimitedInt32IfPresent(v24, 1, 1, &v86) || _cfArrayGetSizeLimitedInt32IfPresent(v24, 2, 1, &v86 + 1))
  {
    return;
  }

  v25 = 0;
LABEL_42:
  BYTE8(v86) = v25;
LABEL_43:
  if (!FigCFDictionaryGetBooleanIfPresent())
  {
    BYTE1(v87) = 0;
  }

LABEL_45:
  v80 = 0;
  OUTLINED_FUNCTION_0_52();
  v73 = 0x40000000;
  *&v76[4] = v85;
  v74 = ___setStereoMetadataIntrinsicsExtrinsicsHelper_block_invoke;
  v75 = &__block_descriptor_tmp_18_3;
  *v76 = a3;
  *&v76[20] = v86;
  *&v76[36] = v87;
  _getSharedPropertyOfTypeWithComparator(*a1, a3, &v80, &v72, v54, v55, v56, v57, v72, 0x40000000, 0, ___setStereoMetadataIntrinsicsExtrinsicsHelper_block_invoke, &__block_descriptor_tmp_18_3, *v76, v85 >> 32, *&v76[16], v86 >> 32, *&v76[32], v88, *(&v88 + 1), v89);
  if (v58)
  {
    if (IFFInformationReserveSharedItemProperty(*a1, a3, &v80, 0))
    {
      return;
    }

    v59 = v80;
    if (a3 == 17)
    {
      v60 = BYTE8(v86);
      v61 = HIDWORD(v86);
      v62 = v87;
      *(v80 + 5) = v85;
      v59[7] = v86;
      *(v59 + 64) = v60;
      *(v59 + 17) = v61;
      *(v59 + 36) = v62;
    }

    else
    {
      v63 = v89;
      *(v80 + 5) = v88;
      v59[7] = __PAIR64__(HIDWORD(v89), v63);
    }
  }

  else
  {
    v59 = v80;
  }

  v64 = OUTLINED_FUNCTION_23_45(v59);
  OUTLINED_FUNCTION_39_23(v64, v65, v66, v67, v68, v69, v70, v71, v72, v73, v74, v75, *v76, *&v76[8], *&v76[16], *&v76[24], *&v76[32], v77, v78, v79);
}

void _getSharedPropertyOfTypeWithComparator(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, int a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21)
{
  if (a4)
  {
    OUTLINED_FUNCTION_845();
    a20 = v21;
    a21 = v25;
    v27 = v26;
    v28 = *(v26 + 104);
    if (v28)
    {
      v29 = v24;
      v30 = v23;
      v31 = v22;
      Count = CFArrayGetCount(v28);
      if (Count >= 1)
      {
        v33 = Count;
        for (i = 0; v33 != i; ++i)
        {
          a11 = 0;
          a9 = 0;
          if (IFFInformationGetSharedItemPropertyAtIndex(v27, i, &a11, &a9))
          {
            break;
          }

          if (a11 == v31 && (*(v29 + 16))(v29, a9))
          {
            if (a9)
            {
              *v30 = a9;
            }

            break;
          }
        }
      }
    }

    OUTLINED_FUNCTION_843();
  }
}

uint64_t IFFPictureCopyAuxiliaryType(uint64_t a1, CFStringRef *a2, CFDataRef *a3)
{
  v3 = *(*(a1 + 8) + 176);
  if (!v3)
  {
    return 4294954513;
  }

  v6 = MEMORY[0x1E695E480];
  if (!a2)
  {
LABEL_5:
    if (!a3)
    {
      return 0;
    }

    v8 = *(v3 + 8);
    if (v8)
    {
      v9 = CFDataCreate(*v6, v8, *(v3 + 16));
      if (!v9)
      {
        goto LABEL_13;
      }
    }

    else
    {
      v9 = 0;
    }

    result = 0;
    *a3 = v9;
    return result;
  }

  v7 = OUTLINED_FUNCTION_69_10(*MEMORY[0x1E695E480], *v3);
  if (v7)
  {
    *a2 = v7;
    goto LABEL_5;
  }

LABEL_13:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t IFFPictureCopyItemType(uint64_t a1)
{
  v1 = *(a1 + 8);
  if (!IFFItemIsPicture(v1))
  {
    return 4294954513;
  }

  v2 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt32Type, (v1 + 44));
  if (v2)
  {
    return OUTLINED_FUNCTION_19_45(v2);
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t IFFPictureCopyCodecType(uint64_t a1, CFNumberRef *a2)
{
  ValueAtIndex = *(a1 + 8);
  theArray = 0;
  v4 = ValueAtIndex[11];
  if (v4 != 1768912492 && v4 != 1735551332)
  {
    v7 = 0;
    goto LABEL_9;
  }

  v6 = IFFItemOutboundReferencesOfType(ValueAtIndex, &theArray);
  v7 = theArray;
  if (!v6)
  {
    if (CFArrayGetCount(theArray) <= 0)
    {
LABEL_16:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_20_0();
      v6 = FigSignalErrorAtGM();
      goto LABEL_17;
    }

    ValueAtIndex = CFArrayGetValueAtIndex(v7, 0);
LABEL_9:
    if (!IFFItemIsPicture(ValueAtIndex))
    {
      v9 = 4294954513;
      goto LABEL_12;
    }

    v8 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt32Type, ValueAtIndex + 11);
    if (v8)
    {
      v9 = 0;
      *a2 = v8;
      goto LABEL_12;
    }

    goto LABEL_16;
  }

LABEL_17:
  v9 = v6;
LABEL_12:
  if (v7)
  {
    CFRelease(v7);
  }

  return v9;
}

uint64_t IFFPictureGetPictureThumbnailByIndex(uint64_t a1, CFIndex a2)
{
  v3 = *(a1 + 24);
  if (!v3 || CFArrayGetCount(v3) <= a2)
  {
    return 4294950136;
  }

  ValueAtIndex = CFArrayGetValueAtIndex(*(a1 + 24), a2);
  return OUTLINED_FUNCTION_2_98(ValueAtIndex);
}

uint64_t IFFPictureGetPictureAuxiliaryImageByIndex(uint64_t a1, CFIndex a2)
{
  v3 = *(a1 + 32);
  if (!v3 || CFArrayGetCount(v3) <= a2)
  {
    return 4294950136;
  }

  ValueAtIndex = CFArrayGetValueAtIndex(*(a1 + 32), a2);
  return OUTLINED_FUNCTION_2_98(ValueAtIndex);
}

void IFFPictureCopyExifLocationByIndex(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, CFStringRef *a21)
{
  OUTLINED_FUNCTION_649();
  v29 = v28;
  v30 = *(v28 + 48);
  if (!v30)
  {
LABEL_9:
    OUTLINED_FUNCTION_651();
    return;
  }

  v31 = v21;
  if ((v21 & 0x8000000000000000) == 0)
  {
    v32 = v27;
    v33 = v26;
    v34 = v25;
    v35 = v24;
    v36 = v23;
    v37 = v22;
    if (CFArrayGetCount(v30) > v21)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(*(v29 + 48), v31);
      v39 = ValueAtIndex;
      if (!v37 || ValueAtIndex[272])
      {
        v40 = copyLocationFromItem(ValueAtIndex, 4uLL, v36, v35, v34, v33, v32, a21);
        if (v37)
        {
          if (!v40)
          {
            *v37 = *(v39 + 72);
          }
        }
      }

      goto LABEL_9;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_651();

  FigSignalErrorAtGM();
}

uint64_t copyLocationFromItem(uint64_t a1, unint64_t a2, void *a3, void *a4, void *a5, void *a6, void *a7, CFStringRef *a8)
{
  v8 = 4294954516;
  if (!a3 || !a4 || !a5)
  {
    return v8;
  }

  v11 = *(a1 + 24);
  v12 = *(a1 + 432);
  v13 = *(a1 + 440);
  if (*(v11 + 48))
  {
    v14 = v12 == 1;
  }

  else
  {
    v14 = 0;
  }

  if (v14)
  {
    v15 = a8;
    v16 = *(v11 + 56);
  }

  else
  {
    if (v12 >= 2)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      goto LABEL_45;
    }

    v15 = a8;
    v16 = 0;
  }

  v18 = *(a1 + 448);
  v17 = *(a1 + 456);
  v19 = malloc_type_malloc(8 * v18, 0x100004000313F17uLL);
  if (!v19)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_120();
LABEL_45:

    return FigSignalErrorAtGM();
  }

  v20 = v19;
  v21 = malloc_type_malloc(8 * v18, 0x100004000313F17uLL);
  if (v21)
  {
    v22 = v21;
    if (v18 < 1)
    {
      v23 = 0;
      if (!v15)
      {
        goto LABEL_29;
      }
    }

    else
    {
      v23 = 0;
      v24 = (v17 + 8);
      v25 = (v17 + 8);
      do
      {
        v27 = *v25;
        v25 += 2;
        v26 = v27;
        if (a2 >= v27)
        {
          v28 = v26;
        }

        else
        {
          v28 = a2;
        }

        if (v26 > a2)
        {
          v20[v23] = v16 + v13 + v28 + *(v24 - 1);
          *(v21 + v23++) = v26 - v28;
        }

        a2 -= v28;
        v24 = v25;
        --v18;
      }

      while (v18);
      if (!v15)
      {
        goto LABEL_29;
      }
    }

    if (*(a1 + 44) == 1835625829)
    {
      if (!*(a1 + 464))
      {
        v8 = 4294954513;
LABEL_49:
        free(v20);
        free(v22);
        return v8;
      }

      v29 = *(a1 + 480);
      if (v29)
      {
        v30 = OUTLINED_FUNCTION_69_10(0, v29);
        if (v30)
        {
LABEL_30:
          *a3 = v23;
          *a4 = v20;
          *a5 = v22;
          if (a6)
          {
            v31 = *(*(a1 + 24) + 16);
            if (v31)
            {
              v31 = CFRetain(v31);
            }

            *a6 = v31;
          }

          if (a7)
          {
            *a7 = 0;
          }

          if (v15)
          {
            v8 = 0;
            *v15 = v30;
          }

          else
          {
            if (v30)
            {
              CFRelease(v30);
            }

            return 0;
          }

          return v8;
        }

        fig_log_get_emitter();
        OUTLINED_FUNCTION_120();
        v8 = FigSignalErrorAtGM();
        goto LABEL_49;
      }
    }

LABEL_29:
    v30 = 0;
    goto LABEL_30;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_120();
  v33 = FigSignalErrorAtGM();
  free(v20);
  return v33;
}

void IFFPictureCopyXMPLocationByIndex()
{
  OUTLINED_FUNCTION_649();
  v2 = v1;
  v3 = *(v1 + 56);
  if (v3)
  {
    v4 = v0;
    if (v0 < 0 || CFArrayGetCount(v3) <= v0)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_1_4();
      OUTLINED_FUNCTION_651();

      FigSignalErrorAtGM();
    }

    else
    {
      CFArrayGetValueAtIndex(*(v2 + 56), v4);
      OUTLINED_FUNCTION_651();

      copyLocationFromItem(v5, v6, v7, v8, v9, v10, v11, v12);
    }
  }

  else
  {
    OUTLINED_FUNCTION_651();
  }
}

void IFFPictureCopyDebugMetadataLocationByIndex(uint64_t a1, CFIndex a2)
{
  v3 = *(a1 + 64);
  if (v3)
  {
    if (a2 < 0 || CFArrayGetCount(v3) <= a2)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_10();
      OUTLINED_FUNCTION_4_16();

      FigSignalErrorAtGM();
    }

    else
    {
      CFArrayGetValueAtIndex(*(a1 + 64), a2);
      OUTLINED_FUNCTION_4_16();

      copyLocationFromItem(v5, v6, v7, v8, v9, v10, v11, v12);
    }
  }

  else
  {
    OUTLINED_FUNCTION_4_16();
  }
}

void IFFPictureCopyCustomMetadataLocationByIndex(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, CFStringRef *a21)
{
  OUTLINED_FUNCTION_649();
  v29 = v28;
  v30 = *(v28 + 72);
  if (!v30)
  {
    goto LABEL_29;
  }

  v31 = v21;
  if ((v21 & 0x8000000000000000) == 0)
  {
    v32 = v27;
    v33 = v26;
    v34 = v25;
    v35 = v24;
    v36 = v23;
    v37 = v22;
    if (CFArrayGetCount(v30) > v21)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(*(v29 + 72), v31);
      if (ValueAtIndex[488])
      {
        v39 = ValueAtIndex;
        if (copyLocationFromItem(ValueAtIndex, 0, v37, v36, v35, v34, v33, 0))
        {
LABEL_29:
          OUTLINED_FUNCTION_651();
          return;
        }

        v40 = MEMORY[0x1E695E480];
        if (!v32)
        {
          v42 = 0;
          if (!a21)
          {
            goto LABEL_30;
          }

LABEL_16:
          if (*(v39 + 63))
          {
            v43 = *(v39 + 63);
          }

          else
          {
            v43 = "";
          }

          if (*v43)
          {
            v44 = OUTLINED_FUNCTION_69_10(*v40, v43);
            if (!v44)
            {
              fig_log_get_emitter();
              OUTLINED_FUNCTION_0_4();
              FigSignalErrorAtGM();
              if (!v42)
              {
LABEL_27:
                if (v44)
                {
                  CFRelease(v44);
                }

                goto LABEL_29;
              }

LABEL_26:
              CFRelease(v42);
              goto LABEL_27;
            }

            if (!v32)
            {
LABEL_23:
              if (a21)
              {
                *a21 = v44;
                v44 = 0;
              }

              if (!v42)
              {
                goto LABEL_27;
              }

              goto LABEL_26;
            }

LABEL_22:
            *v32 = v42;
            v42 = 0;
            goto LABEL_23;
          }

LABEL_30:
          v44 = 0;
          if (!v32)
          {
            goto LABEL_23;
          }

          goto LABEL_22;
        }

        if (*(v39 + 11) != 1970432288 || !v39[488])
        {
          goto LABEL_29;
        }

        if (*(v39 + 62))
        {
          v41 = *(v39 + 62);
        }

        else
        {
          v41 = "";
        }

        v42 = OUTLINED_FUNCTION_69_10(*MEMORY[0x1E695E480], v41);
        if (v42)
        {
          if (!a21)
          {
            goto LABEL_30;
          }

          goto LABEL_16;
        }
      }
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  OUTLINED_FUNCTION_651();

  FigSignalErrorAtGM();
}

void iffpcbAddPictureHelper(CFArrayRef *a1, int a2, CMVideoFormatDescriptionRef videoDesc, int a4, unsigned int a5, int a6, const __CFArray *a7, int a8, double a9, double a10, int a11, uint64_t a12, uint64_t a13, uint64_t a14, const __CFArray *a15, uint64_t a16, const __CFArray *a17, uint64_t a18, _DWORD *a19, void *a20, uint64_t a21)
{
  LODWORD(v507) = a6;
  v520 = a20;
  v526 = a15;
  v441 = a14;
  v430 = a13;
  v419 = a12;
  HIDWORD(v463) = a11;
  v579 = *MEMORY[0x1E69E9840];
  v561 = 0;
  Dimensions = CMVideoFormatDescriptionGetDimensions(videoDesc);
  v560 = 0;
  v559 = 0;
  *v558 = 0;
  v557 = 0;
  if (a4 && (a5 & 1) != 0)
  {
    goto LABEL_315;
  }

  if (a4 && !a21)
  {
    goto LABEL_315;
  }

  if ((a5 & 1) != 0 && ((a5 >> 1) & 1) == 0)
  {
    goto LABEL_315;
  }

  v29 = (a5 >> 2) & 1;
  if (v29 + ((a5 >> 6) & 1) + ((a5 & 0x80) >> 7) >= 2)
  {
    goto LABEL_315;
  }

  v30 = HIDWORD(Dimensions);
  if (v29)
  {
    if (a4 == 1)
    {
      goto LABEL_315;
    }

    v32 = llround(a9);
    v31 = llround(a10);
    if (v32 < 1 || v31 <= 0)
    {
      goto LABEL_315;
    }

    if (v32 < Dimensions || v31 < SHIDWORD(Dimensions))
    {
      v35 = 0;
      v452 = ((v32 + Dimensions - 1) / v32) | (((v31 + HIDWORD(Dimensions) - 1) / v31) << 32);
      if (a8)
      {
        goto LABEL_23;
      }

      goto LABEL_21;
    }

    v452 = 0;
  }

  else
  {
    v452 = 0;
    v31 = 0;
    v32 = 0;
  }

  v35 = 1;
  if (a8)
  {
LABEL_23:
    if (a8 < 0)
    {
      a8 += 360 * vcvtps_s32_f32(a8 / -360.0);
    }

    LODWORD(v463) = a8 % 360;
    if (a8 % 360 % 90)
    {
      goto LABEL_315;
    }

    goto LABEL_26;
  }

LABEL_21:
  LODWORD(v463) = 0;
LABEL_26:
  LODWORD(v527) = v35;
  v408 = __PAIR64__(v31, v32);
  LODWORD(v524) = (a5 >> 6) & 1;
  LODWORD(v496) = a5 & 0x80;
  v397 = a18;
  v531 = (a5 >> 1) & 1;
  v532 = Dimensions;
  Extension = CMFormatDescriptionGetExtension(videoDesc, *MEMORY[0x1E6960070]);
  v37 = Extension;
  if (!Extension || (v38 = CFGetTypeID(Extension), v38 == CFDataGetTypeID()))
  {
    v521 = v30;
    v533 = a5;
    v534 = a4;
    v39 = CMFormatDescriptionGetExtension(videoDesc, *MEMORY[0x1E6965D88]);
    v40 = CMFormatDescriptionGetExtension(videoDesc, *MEMORY[0x1E6965F30]);
    v41 = CMFormatDescriptionGetExtension(videoDesc, *MEMORY[0x1E6965F98]);
    v42 = v41;
    desc = videoDesc;
    v519 = a19;
    theArray = a17;
    if (v39 || v40 || v41)
    {
      if (v37)
      {
        v43 = (v533 >> 5) & 1;
      }

      else
      {
        v43 = 1;
      }
    }

    else
    {
      v43 = 0;
    }

    v44 = a1;
    if (!v37)
    {
LABEL_41:
      v52 = desc;
      if (v43)
      {
        v53 = CMFormatDescriptionGetExtension(desc, *MEMORY[0x1E6960038]);
        if (v53 && (v54 = v53, v55 = CFGetTypeID(v53), v56 = v55 == CFBooleanGetTypeID(), v52 = desc, v56) && !CFBooleanGetValue(v54) || (CMFormatDescriptionGetMediaSubType(v52), (DescriptionWithPixelFormatType = CVPixelFormatDescriptionGetDescriptionWithPixelFormatType()) != 0) && (CFDictionaryGetValue(DescriptionWithPixelFormatType, *MEMORY[0x1E6966248]), !FigCFEqual()))
        {
          v58 = 0;
        }

        else
        {
          v58 = 0x80;
        }

        IntegerCodePointForString = CVColorPrimariesGetIntegerCodePointForString(v39);
        v60 = CVYCbCrMatrixGetIntegerCodePointForString(v42);
        v65 = CVTransferFunctionGetIntegerCodePointForString(v40);
        if (v60 == 2)
        {
          v60 = 2 * (FigCFEqual() == 0);
        }

        if (IntegerCodePointForString >= 0x10000 || v60 >= 0x10000 || v65 >= 0x10000)
        {
          fig_log_get_emitter();
          OUTLINED_FUNCTION_0_16();
          FigSignalErrorAtGM();
          goto LABEL_194;
        }

        v551[0] = MEMORY[0x1E69E9820];
        v551[1] = 0x40000000;
        v551[2] = __iffpcbAddPictureHelper_block_invoke_2;
        v551[3] = &__block_descriptor_tmp_20_4;
        v552 = IntegerCodePointForString;
        v553 = v60;
        v554 = v65;
        v555 = v58;
        _getSharedPropertyOfTypeWithComparator(a1, 4, &v557, v551, v61, v62, v63, v64, v386, v397, SHIDWORD(v397), v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
        if (!v557)
        {
          if (IFFInformationReserveSharedItemProperty(a1, 4, &v557, 0))
          {
            goto LABEL_194;
          }

          v66 = v557;
          *(v557 + 20) = IntegerCodePointForString;
          *(v66 + 21) = v65;
          *(v66 + 22) = v60;
          *(v66 + 46) = v58;
        }
      }

      *v565 = 0;
      v67 = CMFormatDescriptionGetExtension(v52, *MEMORY[0x1E6960020]);
      v68 = CMFormatDescriptionGetExtension(v52, *MEMORY[0x1E6960080]);
      v69 = CMFormatDescriptionGetExtension(v52, *MEMORY[0x1E6960018]);
      v70 = CMFormatDescriptionGetExtension(v52, *MEMORY[0x1E695FFF0]);
      v71 = v70;
      if (v67 || v68 || v69 || (v72 = 0, v70))
      {
        OUTLINED_FUNCTION_613();
        Mutable = CFArrayCreateMutable(v73, v74, v75);
        if (!Mutable)
        {
          goto LABEL_194;
        }

        v72 = Mutable;
        if (v67)
        {
          v77 = CFGetTypeID(v67);
          v56 = v77 == CFDataGetTypeID();
          v52 = desc;
          if (v56)
          {
            _getHDRMetadataProperty(6, v67, a1, v565);
            if (v78)
            {
              goto LABEL_193;
            }

            v79 = OUTLINED_FUNCTION_40_24();
            CFArrayAppendValue(v79, v80);
          }
        }

        if (v68)
        {
          v81 = CFGetTypeID(v68);
          if (v81 == CFDataGetTypeID())
          {
            _getHDRMetadataProperty(7, v68, a1, v565);
            if (v82)
            {
              goto LABEL_193;
            }

            v83 = OUTLINED_FUNCTION_40_24();
            CFArrayAppendValue(v83, v84);
          }
        }

        if (v69)
        {
          v85 = CFGetTypeID(v69);
          if (v85 == CFDataGetTypeID())
          {
            _getHDRMetadataProperty(8, v69, a1, v565);
            if (v86)
            {
              goto LABEL_193;
            }

            v87 = OUTLINED_FUNCTION_40_24();
            CFArrayAppendValue(v87, v88);
          }
        }

        if (v71)
        {
          v89 = CFGetTypeID(v71);
          if (v89 == CFDataGetTypeID())
          {
            _getHDRMetadataProperty(9, v71, a1, v565);
            if (v90)
            {
              goto LABEL_193;
            }

            v91 = OUTLINED_FUNCTION_40_24();
            CFArrayAppendValue(v91, v92);
          }
        }
      }

      v536 = v72;
      if (v527)
      {
        if (!v524)
        {
          LODWORD(v93) = v534;
          if (v496)
          {
            v94 = v557;
            v570 = 0.0;
            v571 = 0.0;
            v563 = 0;
            v569 = 0.0;
            v95 = a15;
            if (!theArray)
            {
              goto LABEL_190;
            }

            v539 = *v558;
            if (CFArrayGetCount(theArray) != 2)
            {
              goto LABEL_190;
            }

            v562 = 0;
            if (!FigCFArrayGetInt32AtIndex())
            {
              goto LABEL_190;
            }

            if (!FigCFArrayGetInt32AtIndex())
            {
              goto LABEL_190;
            }

            if (IFFInformationGetPictureByID(a1, SHIDWORD(v562)))
            {
              goto LABEL_190;
            }

            if (IFFInformationGetPictureByID(a1, v562))
            {
              goto LABEL_190;
            }

            v96 = IFFInformationReserveItemWithType(a1, 1953325424, &v563, &v571);
            if (v96)
            {
              goto LABEL_190;
            }

            OUTLINED_FUNCTION_42_25(v96, *&v571, v97, v98, v99, v100, v101, v102, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507, a19, a20, v521, v524, a15, v527, v530, v531);
            v578 = 0;
            v103 = v569;
            v104 = *(*&v569 + 8);
            v577 = *(*&v570 + 8);
            v578 = v104;
            OUTLINED_FUNCTION_33_30();
            IFFInformationAddItemReference();
            if (v105)
            {
              goto LABEL_190;
            }

            OUTLINED_FUNCTION_27_30(v105, v563, v106, v107, v108, v109, v110, v111, v387, v398, v409, v420, v431, v442, v453, v464, v475, theArraya, v497, v508);
            if (v112)
            {
              goto LABEL_190;
            }

            v113 = *&v571;
            bzero(v565, 0x90uLL);
            if (!a16 || FigCFDictionaryGetInt16IfPresent() && LOWORD(v565[0]) || !FigCFDictionaryGetBooleanIfPresent() || (v564 = 1, FigCFDictionaryGetBooleanIfPresent()) && !v564)
            {
              fig_log_get_emitter();
              OUTLINED_FUNCTION_0_16();
              v119 = FigSignalErrorAtGM();
              v116 = v522;
            }

            else
            {
              v114 = v113;
              Value = FigCFDictionaryGetValue();
              v116 = v522;
              if (Value && (v44 = Value, v117 = CFGetTypeID(Value), v117 == CFArrayGetTypeID()))
              {
                Count = CFArrayGetCount(v44);
                if ((Count | 2) == 3)
                {
                  v93 = Count;
                  LOBYTE(v565[1]) = Count == 3;
                  v316 = FigCFDictionaryGetValue();
                  if (getRational32FromArray(v316, &v566))
                  {
                    goto LABEL_190;
                  }

                  v452 = v94;
                  v317 = FigCFDictionaryGetValue();
                  if (getRational32FromArray(v317, &v567))
                  {
                    goto LABEL_190;
                  }

                  v318 = 0;
                  v507 = @"GainMapMax";
                  v496 = @"BaseOffset";
                  theArray = @"AlternateOffset";
                  v319 = &v568;
                  v116 = v522;
                  while (1)
                  {
                    ValueAtIndex = FigCFArrayGetValueAtIndex();
                    if (!ValueAtIndex)
                    {
                      break;
                    }

                    v321 = CFGetTypeID(ValueAtIndex);
                    if (v321 != CFDictionaryGetTypeID())
                    {
                      break;
                    }

                    v322 = FigCFDictionaryGetValue();
                    if (getRational32FromArray(v322, (v319 - 2)))
                    {
                      goto LABEL_190;
                    }

                    v323 = FigCFDictionaryGetValue();
                    if (getRational32FromArray(v323, (v319 - 4)))
                    {
                      goto LABEL_190;
                    }

                    v324 = FigCFDictionaryGetValue();
                    if (getRational32FromArray(v324, (v319 - 3)))
                    {
                      goto LABEL_190;
                    }

                    v325 = FigCFDictionaryGetValue();
                    if (getRational32FromArray(v325, (v319 - 1)))
                    {
                      goto LABEL_190;
                    }

                    v326 = FigCFDictionaryGetValue();
                    if (getRational32FromArray(v326, v319))
                    {
                      goto LABEL_190;
                    }

                    ++v318;
                    v319 += 5;
                    if (v93 == v318)
                    {
                      v327 = IFFInformationSetItemBodyImageDerivationTonemap(v114, v565);
                      goto LABEL_254;
                    }
                  }

                  fig_log_get_emitter();
                  OUTLINED_FUNCTION_0_16();
                  v327 = FigSignalErrorAtGM();
LABEL_254:
                  v119 = v327;
                  OUTLINED_FUNCTION_63_15();
                  v95 = v526;
                  v94 = v452;
                }

                else
                {
                  fig_log_get_emitter();
                  OUTLINED_FUNCTION_0_16();
                  v119 = FigSignalErrorAtGM();
                  OUTLINED_FUNCTION_63_15();
                }
              }

              else
              {
                fig_log_get_emitter();
                OUTLINED_FUNCTION_0_16();
                v119 = FigSignalErrorAtGM();
                v44 = a1;
              }
            }

            if (v119)
            {
              goto LABEL_190;
            }

            if (v539)
            {
              OUTLINED_FUNCTION_26_35(*v539, v539[2], v121, v122, v123, *&v571, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
              if (v328)
              {
                goto LABEL_190;
              }
            }

            if (v94)
            {
              OUTLINED_FUNCTION_26_35(*v94, v94[2], v121, v122, v123, *&v571, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
              if (v329)
              {
                goto LABEL_190;
              }
            }

            if (v72 && _assignSharedHDRMetadataPropertiesToItem(v72, *&v571))
            {
              goto LABEL_190;
            }

            v124 = *(*&v103 + 8);
            if (!*(v124 + 112))
            {
              *v565 = 0;
              v330 = *(v124 + 96);
              v331 = 2;
              if (v330)
              {
                if (*v330 == 3)
                {
                  v331 = 6;
                }

                else
                {
                  v331 = 2;
                }
              }

              v572 = MEMORY[0x1E69E9820];
              *&v573 = 0x40000000;
              v574 = ___pcbAddImageTonemap_block_invoke;
              v575 = &__block_descriptor_tmp_31_3;
              v576 = v331;
              _getSharedPropertyOfTypeWithComparator(v44, 4, v565, &v572, v120, v121, v122, v123, v386, v397, SHIDWORD(v397), v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
              v332 = *v565;
              if (!*v565)
              {
                v333 = OUTLINED_FUNCTION_38_23();
                if (IFFInformationReserveSharedItemProperty(v333, 4, v334, 0))
                {
                  goto LABEL_190;
                }

                v332 = *v565;
                *(*v565 + 40) = 131074;
                *(v332 + 44) = v331;
                *(v332 + 46) = 0x80;
              }

              v335 = OUTLINED_FUNCTION_4_148(v332);
              IFFInformationAssignSharedItemPropertyByIndex(v335, v336, v337, 1, v338, v339, v340, v341, v395, v406, v417, v428, v439, v450, v461, v472, v483, theArrayi, v505, v517);
              v116 = v522;
              if (v342)
              {
                goto LABEL_190;
              }
            }

            v560 = *&v571;
            v52 = desc;
          }

          else
          {
            LODWORD(v577) = 0;
            v95 = a15;
            if ((v533 & 0x100) != 0)
            {
              v116 = v521;
              if (IFFInformationReserveItemWithType(a1, 1768187246, &v577, &v560))
              {
                goto LABEL_304;
              }

              *v565 = 0;
              v359 = OUTLINED_FUNCTION_38_23();
              if (IFFInformationGetPictureByID(v359, v397))
              {
                goto LABEL_304;
              }

              v572 = *(*v565 + 8);
              OUTLINED_FUNCTION_33_30();
              IFFInformationAddItemReference();
              if (v360)
              {
                goto LABEL_304;
              }
            }

            else
            {
              v116 = v521;
              if (IFFInformationReserveItemWithType(a1, a2, &v577, &v560))
              {
                goto LABEL_304;
              }
            }

            if (*v558)
            {
              v365 = OUTLINED_FUNCTION_1_184(*v558);
              IFFInformationAssignSharedItemPropertyByIndex(v365, v366, v367, 1, v368, v369, v370, v371, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
              if (v372)
              {
                goto LABEL_304;
              }
            }

            if (v557)
            {
              v373 = OUTLINED_FUNCTION_1_184(v557);
              IFFInformationAssignSharedItemPropertyByIndex(v373, v374, v375, 1, v376, v377, v378, v379, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
              if (v380)
              {
                goto LABEL_304;
              }
            }

            if (v72 && _assignSharedHDRMetadataPropertiesToItem(v72, v560))
            {
              goto LABEL_304;
            }

            v361 = v560;
            *(v560 + 64) = v534;
            *(v361 + 48) = v531;
          }

LABEL_142:
          v164 = *(v44 + 128);
          if (IFFInformationReservePictureFromItemIfNeeded(v560, &v561, &v559))
          {
            goto LABEL_190;
          }

          if (!v93)
          {
            v165 = v531;
            if (*(v44 + 64))
            {
              v165 = 0;
            }

            if ((v533 & 1) != 0 || v165)
            {
              v166 = v559;
              v167 = *v559;
              *(v167 + 64) = 1;
              *(v167 + 68) = *(v166[1] + 40);
              *(v167 + 80) = v166;
            }
          }

          *v565 = 0;
          _getImageSpatialExtentsProperty(v532, v116, v44, v565);
          if (v168)
          {
            goto LABEL_190;
          }

          v169 = OUTLINED_FUNCTION_1_184(*v565);
          IFFInformationAssignSharedItemPropertyByIndex(v169, v170, v171, 0, v172, v173, v174, v175, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
          if (v176)
          {
            goto LABEL_190;
          }

          v177 = CMFormatDescriptionGetExtension(v52, *MEMORY[0x1E6965D70]);
          if (v177)
          {
            v182 = v177;
            v183 = CFGetTypeID(v177);
            if (v183 == CFDictionaryGetTypeID())
            {
              v184 = v532;
              v185 = v116;
              v566 = 0.0;
              *v565 = 0;
              v572 = v532;
              v573 = v116;
              v186 = *MEMORY[0x1E6960110];
              if (CFDictionaryContainsKey(v182, *MEMORY[0x1E6960110]) && (v93 = *MEMORY[0x1E69600F8], CFDictionaryContainsKey(v182, *MEMORY[0x1E69600F8])) && (v44 = *MEMORY[0x1E6960100], CFDictionaryContainsKey(v182, *MEMORY[0x1E6960100])) && (v187 = *MEMORY[0x1E6960108], CFDictionaryContainsKey(v182, *MEMORY[0x1E6960108])))
              {
                v577 = 0.0;
                v570 = 0.0;
                v571 = 0.0;
                v569 = 0.0;
                v362 = CFDictionaryGetValue(v182, v186);
                v188 = 0.0;
                if (_floatFromRational(v362))
                {
                  v382 = CFDictionaryGetValue(v182, v93);
                  v52 = desc;
                  if (_floatFromRational(v382))
                  {
                    v383 = CFDictionaryGetValue(v182, v44);
                    if (_floatFromRational(v383))
                    {
                      v384 = CFDictionaryGetValue(v182, v187);
                      _floatFromRational(v384);
                      v189 = OUTLINED_FUNCTION_29_31();
                      v52 = desc;
                      v72 = v536;
                      LODWORD(v93) = v534;
                      v95 = v526;
                      if (v385)
                      {
                        v188 = v569;
                        v191 = v570;
                        v190 = v577;
                        v189 = v571;
                      }
                    }

                    else
                    {
                      v189 = OUTLINED_FUNCTION_29_31();
                      v52 = desc;
                      v72 = v536;
                      LODWORD(v93) = v534;
                      v95 = v526;
                    }
                  }

                  else
                  {
                    v189 = OUTLINED_FUNCTION_29_31();
                    LODWORD(v93) = v534;
                  }
                }

                else
                {
                  v189 = OUTLINED_FUNCTION_29_31();
                  LODWORD(v93) = v534;
                  v52 = desc;
                }

                v44 = a1;
              }

              else
              {
                FigCFDictionaryGetDoubleIfPresent();
                v72 = v536;
                FigCFDictionaryGetDoubleIfPresent();
                FigCFDictionaryGetDoubleIfPresent();
                FigCFDictionaryGetDoubleIfPresent();
                v188 = v566;
                OUTLINED_FUNCTION_63_15();
                v52 = desc;
              }

              v192 = round(v191 + (v184 - v190) * 0.5);
              v193 = round(v188 + (v185 - v189) * 0.5);
              v194 = round(v190);
              v195 = round(v189);
              v581.origin.x = 0.0;
              v581.origin.y = 0.0;
              v580.origin.x = v192;
              v580.origin.y = v193;
              v580.size.width = v194;
              v580.size.height = v195;
              v581.size.width = v532;
              v581.size.height = v116;
              if (!CGRectEqualToRect(v580, v581))
              {
                v343 = IFFrat32FromCGFloat(v194);
                v344 = v44;
                v44 = IFFrat32FromCGFloat(v195);
                v93 = IFFrat32FromCGFloat(v194 * 0.5 + v192 - round(v184 * 0.5));
                v345 = IFFrat32FromCGFloat(v195 * 0.5 + v193 - round(v185 * 0.5));
                *v565 = 0;
                v550[0] = MEMORY[0x1E69E9820];
                v550[1] = 0x40000000;
                v550[2] = __iffpcbAddPictureHelper_block_invoke_3;
                v550[3] = &__block_descriptor_tmp_21_4;
                v550[4] = v343;
                v550[5] = v44;
                v550[6] = v93;
                v550[7] = v345;
                _getSharedPropertyOfTypeWithComparator(v344, 10, v565, v550, v346, v347, v348, v349, v388, v399, SHIDWORD(v399), v410, v421, v432, v443, v454, v465, v476, theArrayb, v498, v509);
                v350 = *v565;
                if (!*v565)
                {
                  if (IFFInformationReserveSharedItemProperty(v344, 10, v565, 0))
                  {
                    goto LABEL_190;
                  }

                  v350 = *v565;
                  *(*v565 + 40) = v343;
                  v350[6] = v44;
                  v350[7] = v93;
                  v350[8] = v345;
                }

                v351 = OUTLINED_FUNCTION_1_184(v350);
                IFFInformationAssignSharedItemPropertyByIndex(v351, v352, v353, 1, v354, v355, v356, v357, v396, v407, v418, v429, v440, v451, v462, v473, v484, theArrayj, v506, v518);
                OUTLINED_FUNCTION_63_15();
                v52 = desc;
                if (v358)
                {
                  goto LABEL_190;
                }
              }
            }
          }

          if ((v533 & 8) != 0)
          {
            *v565 = 0;
            v548[0] = MEMORY[0x1E69E9820];
            v548[1] = 0x40000000;
            v548[2] = __iffpcbAddPictureHelper_block_invoke_4;
            v548[3] = &__block_descriptor_tmp_22_3;
            v549 = v465;
            _getSharedPropertyOfTypeWithComparator(v44, 11, v565, v548, v178, v179, v180, v181, v388, v399, SHIDWORD(v399), v410, v421, v432, v443, v454, v465, v476, theArrayb, v498, v509);
            v281 = *v565;
            if (!*v565)
            {
              v282 = OUTLINED_FUNCTION_38_23();
              if (IFFInformationReserveSharedItemProperty(v282, 11, v283, 0))
              {
                goto LABEL_304;
              }

              v281 = *v565;
              *(*v565 + 40) = v469;
            }

            v284 = OUTLINED_FUNCTION_1_184(v281);
            IFFInformationAssignSharedItemPropertyByIndex(v284, v285, v286, 1, v287, v288, v289, v290, v392, v403, v414, v425, v436, v447, v458, v469, v480, theArrayf, v502, v514);
            if (v291)
            {
              goto LABEL_304;
            }

            if ((v533 & 0x10) == 0)
            {
              goto LABEL_161;
            }
          }

          else if ((v533 & 0x10) == 0)
          {
LABEL_161:
            v196 = CMFormatDescriptionGetExtension(v52, *MEMORY[0x1E6965EF8]);
            if (v196)
            {
              v201 = CFGetTypeID(v196);
              if (v201 != CFDictionaryGetTypeID() || (*v565 = 0, LODWORD(v572) = 0, LODWORD(v577) = 0, !FigCFDictionaryGetInt32IfPresent()) || !FigCFDictionaryGetInt32IfPresent())
              {
                fig_log_get_emitter();
                OUTLINED_FUNCTION_0_16();
LABEL_325:
                FigSignalErrorAtGM();
                goto LABEL_190;
              }

              v543[0] = MEMORY[0x1E69E9820];
              v543[1] = 0x40000000;
              v543[2] = __iffpcbAddPictureHelper_block_invoke_6;
              v543[3] = &__block_descriptor_tmp_24_4;
              v544 = LODWORD(v572);
              v545 = LODWORD(v577);
              _getSharedPropertyOfTypeWithComparator(v44, 3, v565, v543, v202, v203, v204, v205, v388, v399, SHIDWORD(v399), v410, v421, v432, v443, v454, v465, v476, theArrayb, v498, v509);
              v206 = *v565;
              if (!*v565)
              {
                v207 = OUTLINED_FUNCTION_38_23();
                if (IFFInformationReserveSharedItemProperty(v207, 3, v208, 0))
                {
                  goto LABEL_190;
                }

                v206 = *v565;
                v209 = LODWORD(v577);
                *(*v565 + 40) = LODWORD(v572);
                *(v206 + 44) = v209;
              }

              v210 = OUTLINED_FUNCTION_1_184(v206);
              IFFInformationAssignSharedItemPropertyByIndex(v210, v211, v212, 1, v213, v214, v215, v216, v389, v400, v411, v422, v433, v444, v455, v466, v477, theArrayc, v499, v510);
              if (v217)
              {
                goto LABEL_190;
              }
            }

            if (v95)
            {
              *v565 = 0;
              v218 = CFArrayGetCount(v95);
              if (v218 - 256 > 0xFFFFFFFFFFFFFF00)
              {
                v219 = v218;
                v220 = malloc_type_calloc(v218, 1uLL, 0x100004077774924uLL);
                if (v220)
                {
                  v221 = 0;
                  while (1)
                  {
                    v222 = CFArrayGetValueAtIndex(v95, v221);
                    if (!CFNumberGetValue(v222, kCFNumberSInt8Type, &v220[v221]))
                    {
                      break;
                    }

                    if (v219 == ++v221)
                    {
                      v541[0] = MEMORY[0x1E69E9820];
                      v541[1] = 0x40000000;
                      v541[2] = __iffpcbAddPictureHelper_block_invoke_7;
                      v541[3] = &__block_descriptor_tmp_25_4;
                      v542 = v219;
                      v541[4] = v220;
                      _getSharedPropertyOfTypeWithComparator(a1, 14, v565, v541, v223, v224, v225, v226, v388, v399, SHIDWORD(v399), v410, v421, v432, v443, v454, v465, v476, theArrayb, v498, v509);
                      v227 = *v565;
                      if (!*v565)
                      {
                        if (IFFInformationReserveSharedItemProperty(a1, 14, v565, 0) || IFFInformationSetItemPropertyPixelInformation(*v565, v219, v220))
                        {
                          goto LABEL_192;
                        }

                        v227 = *v565;
                      }

                      v228 = OUTLINED_FUNCTION_1_184(v227);
                      IFFInformationAssignSharedItemPropertyByIndex(v228, v229, v230, 0, v231, v232, v233, v234, v390, v401, v412, v423, v434, v445, v456, v467, v478, theArrayd, v500, v511);
                      v44 = a1;
                      if (!v235)
                      {
                        goto LABEL_182;
                      }

                      goto LABEL_192;
                    }
                  }
                }

                fig_log_get_emitter();
                OUTLINED_FUNCTION_0_16();
                FigSignalErrorAtGM();
LABEL_192:
                free(v220);
                if (!v72)
                {
LABEL_194:
                  OUTLINED_FUNCTION_812();
                  return;
                }

LABEL_193:
                CFRelease(v72);
                goto LABEL_194;
              }

              fig_log_get_emitter();
              OUTLINED_FUNCTION_0_16();
              goto LABEL_325;
            }

            v220 = 0;
LABEL_182:
            if (v93 != 2)
            {
LABEL_183:
              if (!v164)
              {
                *(v44 + 176) &= 1u;
                *(v44 + 28) = 1885954932;
              }

              if (v519)
              {
                *v519 = v561;
              }

              if (v520)
              {
                *v520 = v559;
              }

              goto LABEL_192;
            }

            *v565 = 0;
            v540[0] = MEMORY[0x1E69E9820];
            v540[1] = 0x40000000;
            v540[2] = __iffpcbAddPictureHelper_block_invoke_8;
            v540[3] = &__block_descriptor_tmp_26_3;
            v540[4] = v421;
            v540[5] = v443;
            v540[6] = v432;
            _getSharedPropertyOfTypeWithComparator(v44, 13, v565, v540, v197, v198, v199, v200, v388, v399, SHIDWORD(v399), v410, v421, v432, v443, v454, v465, v476, theArrayb, v498, v509);
            v303 = *v565;
            if (!*v565)
            {
              v304 = OUTLINED_FUNCTION_38_23();
              if (IFFInformationReserveSharedItemProperty(v304, 13, v305, 0))
              {
                goto LABEL_305;
              }

              v306 = v427 ? v427 : "";
              IFFInformationSetItemPropertyAuxiliaryType(*v565, v306, v438, v449);
              if (v307)
              {
                goto LABEL_305;
              }

              v303 = *v565;
            }

            v308 = OUTLINED_FUNCTION_1_184(v303);
            IFFInformationAssignSharedItemPropertyByIndex(v308, v309, v310, 1, v311, v312, v313, v314, v394, v405, v416, v427, v438, v449, v460, v471, v482, theArrayh, v504, v516);
            if (!v315)
            {
              goto LABEL_183;
            }

LABEL_305:
            v72 = v536;
            goto LABEL_192;
          }

          *v565 = 0;
          v546[0] = MEMORY[0x1E69E9820];
          v546[1] = 0x40000000;
          v546[2] = __iffpcbAddPictureHelper_block_invoke_5;
          v546[3] = &__block_descriptor_tmp_23_4;
          v547 = HIDWORD(v465);
          _getSharedPropertyOfTypeWithComparator(v44, 12, v565, v546, v178, v179, v180, v181, v388, v399, SHIDWORD(v399), v410, v421, v432, v443, v454, v465, v476, theArrayb, v498, v509);
          v292 = *v565;
          if (!*v565)
          {
            v293 = OUTLINED_FUNCTION_38_23();
            if (IFFInformationReserveSharedItemProperty(v293, 12, v294, 0))
            {
              goto LABEL_304;
            }

            v292 = *v565;
            *(*v565 + 40) = HIDWORD(v470);
          }

          v295 = OUTLINED_FUNCTION_1_184(v292);
          IFFInformationAssignSharedItemPropertyByIndex(v295, v296, v297, 1, v298, v299, v300, v301, v393, v404, v415, v426, v437, v448, v459, v470, v481, theArrayg, v503, v515);
          if (!v302)
          {
            goto LABEL_161;
          }

LABEL_304:
          v220 = 0;
          goto LABEL_305;
        }

        v125 = *v558;
        v126 = v557;
        *v565 = 0;
        LODWORD(v577) = 0;
        LODWORD(v93) = v534;
        v127 = v507;
        if (v507)
        {
          v128 = v507;
          OUTLINED_FUNCTION_63_12();
          v130 = malloc_type_calloc(v507, 8uLL, v129);
          if (!v130)
          {
            fig_log_get_emitter();
            OUTLINED_FUNCTION_0_16();
            v139 = FigSignalErrorAtGM();
            v133 = 0;
            v528 = 0;
            goto LABEL_293;
          }

          v131 = v130;
          OUTLINED_FUNCTION_5_45();
          v133 = malloc_type_calloc(v507, 8uLL, v132);
          v528 = v131;
          if (v133)
          {
            v134 = v131;
            while (1)
            {
              LODWORD(v572) = 0;
              v135 = IFFInformationReserveItemWithType(a1, a2, &v572, v134);
              if (v135)
              {
                break;
              }

              if (v125)
              {
                OUTLINED_FUNCTION_24_33(v136, v137, v138, *v134, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
                if (v135)
                {
                  break;
                }
              }

              if (v126)
              {
                OUTLINED_FUNCTION_26_35(*v126, v126[2], v136, v137, v138, *v134, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
                if (v135)
                {
                  break;
                }
              }

              if (v72)
              {
                v135 = _assignSharedHDRMetadataPropertiesToItem(v72, *v134);
                if (v135)
                {
                  break;
                }
              }

              ++v134;
              if (!--v128)
              {
                LODWORD(v93) = v534;
                goto LABEL_124;
              }
            }

            v139 = v135;
            LODWORD(v93) = v534;
            goto LABEL_293;
          }
        }

        else
        {
          v133 = 0;
          v528 = 0;
LABEL_124:
          v140 = IFFInformationReserveItemWithType(a1, 1768912492, &v577, v565);
          if (v140)
          {
            goto LABEL_292;
          }

          OUTLINED_FUNCTION_42_25(v140, *v565, v141, v142, v143, v144, v145, v146, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507, a19, a20, v521, v524, a15, v528, v530, v531);
          if (v127)
          {
            OUTLINED_FUNCTION_33_30();
            IFFInformationAddItemReference();
            if (v140)
            {
              goto LABEL_292;
            }
          }

          OUTLINED_FUNCTION_27_30(v140, LODWORD(v577), v147, v148, v149, v150, v151, v152, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507);
          if (v140)
          {
            goto LABEL_292;
          }

          v572 = NAN;
          if (!a7)
          {
LABEL_133:
            v156 = v127;
            v116 = v521;
            v157 = IFFInformationSetItemBodyImageDerivationOverlay(*v565, &v572, v532, v521, v133, v156);
            v95 = v526;
            if (v157 || v125 && (OUTLINED_FUNCTION_24_33(v158, v159, v160, *v565, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507), v157) || v126 && (OUTLINED_FUNCTION_26_35(*v126, v126[2], v158, v159, v160, *v565, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507), v157))
            {
              v139 = v157;
              v52 = desc;
            }

            else
            {
              v52 = desc;
              if (v72)
              {
                v161 = OUTLINED_FUNCTION_40_24();
                v139 = _assignSharedHDRMetadataPropertiesToItem(v161, v162);
              }

              else
              {
                v139 = 0;
              }

              v560 = *v565;
            }

            goto LABEL_140;
          }

          if (CFArrayGetCount(a7) == 4)
          {
            v153 = 0;
            v154 = &v572;
            while (1)
            {
              v155 = CFArrayGetValueAtIndex(a7, v153);
              if (!CFNumberGetValue(v155, kCFNumberSInt16Type, v154))
              {
                break;
              }

              ++v153;
              v154 = (v154 + 2);
              if (v153 == 4)
              {
                goto LABEL_133;
              }
            }
          }
        }

        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_16();
        LODWORD(v140) = FigSignalErrorAtGM();
LABEL_292:
        v139 = v140;
LABEL_293:
        v95 = v526;
        v52 = desc;
        v116 = v521;
LABEL_140:
        free(v528);
        v163 = v133;
        goto LABEL_141;
      }

      v236 = *v558;
      v237 = v557;
      *v565 = 0;
      LODWORD(v577) = 0;
      v572 = 0.0;
      _getImageSpatialExtentsProperty(v408, SHIDWORD(v408), a1, &v572);
      if (v238)
      {
        v529 = 0;
      }

      else
      {
        v512 = HIDWORD(v452);
        OUTLINED_FUNCTION_63_12();
        v525 = v239;
        v529 = malloc_type_calloc(v239, 8uLL, v240);
        v241 = v452 >> 32;
        if (v452 >> 32 < 1)
        {
LABEL_213:
          v44 = a1;
          v261 = IFFInformationReserveItemWithType(a1, 1735551332, &v577, v565);
          if (!v261)
          {
            LODWORD(v93) = v534;
            OUTLINED_FUNCTION_42_25(v261, *v565, v262, v263, v264, v265, v266, v267, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v512, a19, a20, v521, v525, a15, v529, v530, v531);
            OUTLINED_FUNCTION_33_30();
            IFFInformationAddItemReference();
            v95 = v526;
            v116 = v523;
            if (!v268)
            {
              OUTLINED_FUNCTION_27_30(v268, LODWORD(v577), v269, v270, v271, v272, v273, v274, v391, v402, v413, v424, v435, v446, v457, v468, v479, theArraye, v501, v513);
              v72 = v536;
              if (!v275 && !IFFInformationSetItemBodyImageDerivationGrid(*v565, v452, v507, v532, v523))
              {
                if (!v236 || (OUTLINED_FUNCTION_26_35(*v236, v236[2], v276, v277, v278, *v565, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507), !v363))
                {
                  if (!v237 || (OUTLINED_FUNCTION_24_33(v276, v277, v278, *v565, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v507), !v364))
                  {
                    if (v536)
                    {
                      v279 = OUTLINED_FUNCTION_40_24();
                      v139 = _assignSharedHDRMetadataPropertiesToItem(v279, v280);
                    }

                    else
                    {
                      v139 = 0;
                    }

                    v52 = desc;
                    v560 = *v565;
                    v163 = v529;
LABEL_141:
                    free(v163);
                    if (!v139)
                    {
                      goto LABEL_142;
                    }

LABEL_190:
                    v220 = 0;
                    goto LABEL_192;
                  }
                }
              }

LABEL_241:
              free(v529);
              goto LABEL_190;
            }
          }
        }

        else
        {
          v242 = 0;
          v243 = v452;
          v244 = 8 * v452;
          v245 = v529;
          while (v243 < 1)
          {
LABEL_212:
            ++v242;
            v245 = (v245 + v244);
            if (v242 == v241)
            {
              goto LABEL_213;
            }
          }

          v246 = v245;
          v247 = v243;
          while (1)
          {
            LODWORD(v571) = 0;
            if (IFFInformationReserveItemWithType(a1, a2, &v571, v246))
            {
              break;
            }

            v248 = OUTLINED_FUNCTION_4_148(*&v572);
            IFFInformationAssignSharedItemPropertyByIndex(v248, v249, v250, 1, v251, v252, v253, v254, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v512);
            if (v258)
            {
              break;
            }

            if (v236)
            {
              OUTLINED_FUNCTION_26_35(*v236, v236[2], v255, v256, v257, *v246, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v512);
              if (v259)
              {
                break;
              }
            }

            if (v237)
            {
              OUTLINED_FUNCTION_24_33(v255, v256, v257, *v246, v386, v397, v408, v419, v430, v441, v452, v463, v474, theArray, v496, v512);
              if (v260)
              {
                break;
              }
            }

            if (v536 && _assignSharedHDRMetadataPropertiesToItem(v536, *v246))
            {
              break;
            }

            ++v246;
            if (!--v247)
            {
              goto LABEL_212;
            }
          }
        }
      }

      v72 = v536;
      goto LABEL_241;
    }

    BytePtr = CFDataGetBytePtr(v37);
    Length = CFDataGetLength(v37);
    if (BytePtr)
    {
      v51 = Length;
      if (Length)
      {
        v556[0] = MEMORY[0x1E69E9820];
        v556[1] = 0x40000000;
        v556[2] = __iffpcbAddPictureHelper_block_invoke;
        v556[3] = &__block_descriptor_tmp_19_6;
        v556[4] = Length;
        v556[5] = BytePtr;
        _getSharedPropertyOfTypeWithComparator(a1, 5, v558, v556, v47, v48, v49, v50, v386, a18, SHIDWORD(a18), v408, a12, a13, a14, v452, v463, v474, a17, v496, v507);
        if (!*v558 && (IFFInformationReserveSharedItemProperty(a1, 5, v558, 0) || IFFInformationSetItemPropertyICCProfileData(*v558, BytePtr, v51)))
        {
          goto LABEL_194;
        }

        goto LABEL_41;
      }
    }
  }

LABEL_315:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_82();
  OUTLINED_FUNCTION_812();

  FigSignalErrorAtGM();
}

void IFFInformationAddThumbnailToPicture(CFArrayRef *a1, int a2, int a3, const opaqueCMFormatDescription *a4, unsigned int a5, int a6, int a7, const __CFArray *a8, _DWORD *a9)
{
  v21 = 0;
  v20 = 0;
  v19 = 0;
  if (!IFFInformationGetPictureByID(a1, a2))
  {
    v16 = v20;
    iffpcbAddPictureHelper(a1, a3, a4, 1, a5, 0, 0, a6, *MEMORY[0x1E695F060], *(MEMORY[0x1E695F060] + 8), a7, 0, 0, 0, a8, 0, 0, 0, &v21, &v19, v20);
    if (!v17)
    {
      IFFPictureAddThumbnailItemReference(v16);
      if (a9)
      {
        if (!v18)
        {
          *a9 = v21;
        }
      }
    }
  }
}

void IFFInformationAddAuxiliaryImageToPicture(CFArrayRef *a1, int a2, int a3, const opaqueCMFormatDescription *a4, unsigned int a5, int a6, const __CFArray *a7, int a8, double a9, double a10, int a11, uint64_t a12, uint64_t a13, uint64_t a14, const __CFArray *a15, _DWORD *a16)
{
  v30 = 0;
  v28 = 0;
  v29 = 0;
  if (!IFFInformationGetPictureByID(a1, a2))
  {
    v25 = v29;
    iffpcbAddPictureHelper(a1, a3, a4, 2, a5, a6, a7, a8, a9, a10, a11, a12, a13, a14, a15, 0, 0, 0, &v30, &v28, v29);
    if (!v26)
    {
      IFFPictureAddAuxiliaryImageItemReference(v25);
      if (a16)
      {
        if (!v27)
        {
          *a16 = v30;
        }
      }
    }
  }
}

void IFFInformationAddAndGetPictureItemFromPicture(CFArrayRef *a1, int a2, int a3, int a4, unint64_t a5, const opaqueCMFormatDescription *a6, void *a7, double a8, double a9, double a10, double a11)
{
  v82 = 0;
  if (IFFInformationGetPictureByID(a1, a2))
  {
    goto LABEL_53;
  }

  if (a3)
  {
    v21 = a9;
  }

  else
  {
    v21 = 0;
  }

  if (a3)
  {
    v22 = a8;
  }

  else
  {
    v22 = 0;
  }

  v23 = *(v82 + 8);
  if (!v23)
  {
    goto LABEL_55;
  }

  if (!a3)
  {
    OUTLINED_FUNCTION_34_28();
    if (v44)
    {
      goto LABEL_55;
    }
  }

  OUTLINED_FUNCTION_34_28();
  if (v44)
  {
    v80 = 0;
    *v81 = 0;
    v33 = *(v23 + 290);
    if (OUTLINED_FUNCTION_44_25(v24, v25, v26, v27, v28, v29, v30, v31, v69))
    {
      goto LABEL_53;
    }

    v34 = v22 + v21 * v33;
    if (v80 <= v34)
    {
      goto LABEL_62;
    }

    v23 = *(*v81 + 8 * v34);
LABEL_25:
    v43 = *(v23 + 44);
    v44 = v43 == 1635135537 || v43 == 1635148593;
    if (!v44 && v43 != 1936484717 && v43 != 1752589105)
    {
LABEL_52:
      *a7 = v23;
      goto LABEL_53;
    }

    Extension = CMFormatDescriptionGetExtension(a6, *MEMORY[0x1E69600A0]);
    if (Extension)
    {
      v48 = Extension;
      v49 = CFGetTypeID(Extension);
      if (v49 == CFDictionaryGetTypeID())
      {
        switch(v43)
        {
          case 1635135537:
            v50 = 1635135811;
            v51 = @"av1C";
            break;
          case 1635148593:
            v50 = 1635148611;
            v51 = @"avcC";
            break;
          case 1936484717:
            v50 = 1936485699;
            v51 = @"slmC";
            break;
          case 1752589105:
            v50 = 1752589123;
            v51 = @"hvcC";
            break;
          default:
            v51 = 0;
            v50 = 0;
            break;
        }

        Value = CFDictionaryGetValue(v48, v51);
        if (Value)
        {
          v53 = Value;
          *v81 = 0;
          BytePtr = CFDataGetBytePtr(Value);
          Length = CFDataGetLength(v53);
          OUTLINED_FUNCTION_2_49();
          LODWORD(v78) = v50;
          _getSharedPropertyOfTypeWithComparator(a1, 1, v81, &v72, v57, v58, v59, v60, v69, v72, SHIDWORD(v72), 0x40000000, __IFFInformationAddAndGetPictureItemFromPicture_block_invoke, &__block_descriptor_tmp_16_7, v56, BytePtr, v78, v79, v80, *v81, v82);
          if (v61 && (IFFInformationReserveSharedItemProperty(a1, 1, v81, 0) || IFFInformationSetItemPropertyCodecConfiguration(*v81, v50, BytePtr, Length)))
          {
            goto LABEL_53;
          }

          v62 = OUTLINED_FUNCTION_23_45(*v81);
          IFFInformationAssignSharedItemPropertyByIndex(v62, v63, 1, 1, *(v23 + 40), v64, v65, v66, v71, v72, v73, v74, v75, v76, v77, v78, v79, v80, *v81, v82);
          if (v67)
          {
            goto LABEL_53;
          }

          goto LABEL_52;
        }
      }
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
LABEL_63:
    FigSignalErrorAtGM();
    goto LABEL_53;
  }

  if (v32 != 1768912492)
  {
    goto LABEL_25;
  }

  if (a4 && *(v23 + 272))
  {
    *(*(v23 + 296) + 8 * a5) = a10;
    *(*(v23 + 296) + 8 * a5 + 4) = a11;
    v80 = 0;
    *v81 = 0;
    if (!OUTLINED_FUNCTION_44_25(v24, v25, v26, v27, v28, v29, v30, v31, v69))
    {
      if (v80 > a5)
      {
        v23 = *(*v81 + 8 * a5);
        Dimensions = CMVideoFormatDescriptionGetDimensions(a6);
        if (HIDWORD(Dimensions))
        {
          if (Dimensions)
          {
            v79 = 0;
            _getImageSpatialExtentsProperty(Dimensions, SHIDWORD(Dimensions), a1, &v79);
            if (v36)
            {
              goto LABEL_53;
            }

            v37 = OUTLINED_FUNCTION_23_45(v79);
            IFFInformationAssignSharedItemPropertyByIndex(v37, v38, 1, 1, *(v23 + 40), v39, v40, v41, v70, v72, v73, v74, v75, v76, v77, v78, v79, v80, *v81, v82);
            if (v42)
            {
              goto LABEL_53;
            }

            goto LABEL_25;
          }
        }
      }

LABEL_62:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_20_0();
      goto LABEL_63;
    }

LABEL_53:
    OUTLINED_FUNCTION_71_12();
    return;
  }

LABEL_55:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_20_0();
  OUTLINED_FUNCTION_71_12();

  FigSignalErrorAtGM();
}

void _getImageSpatialExtentsProperty(int a1, int a2, CFArrayRef *a3, CFArrayRef ***a4)
{
  OUTLINED_FUNCTION_2_49();
  _getSharedPropertyOfTypeWithComparator(v10, 2, a4, v18, v11, v12, v13, v14, v17, v18[0], v18[1], 0x40000000, ___getImageSpatialExtentsProperty_block_invoke, &__block_descriptor_tmp_32_3, __SPAIR64__(v9, v8), v19, v20, v21, v22, vars0, vars8);
  if (v15)
  {
    if (!IFFInformationReserveSharedItemProperty(a3, 2, a4, 0))
    {
      v16 = *a4;
      *(v16 + 10) = a1;
      *(v16 + 11) = a2;
    }
  }
}

void IFFInformationAddAndGetMetadataItemFromPicture(uint64_t a1, int a2, unsigned int a3, const __CFString *a4, const __CFString *a5, void *a6)
{
  v27 = *MEMORY[0x1E69E9840];
  *v21 = 0;
  v22 = 0;
  HIDWORD(v20) = 0;
  if (IFFInformationGetPictureByID(a1, a2))
  {
    return;
  }

  if (a3 >= 4)
  {
    fig_log_get_emitter();

    FigSignalErrorAtGM();
    return;
  }

  v11 = v22;
  if (IFFInformationReserveItemWithType(a1, dword_196E7B8B0[a3], &v20 + 1, v21))
  {
    return;
  }

  if (a3 != 1)
  {
    if (a3 == 2)
    {
      v16 = *v21;
      v17 = "urn:uuid:0AFF93BC-356D-4BF7-8B5F-73037F2F1E5D";
      v18 = 0;
    }

    else
    {
      if (a3 != 3)
      {
LABEL_11:
        IFFInformationReserveItemExtentTable(a1, HIDWORD(v20), 0, 0, 1, 0, 0, v12, v19, v20, *v21, v22, *buffer, *&buffer[8], v24, *(&v24 + 1), v25, *(&v25 + 1), v26, *(&v26 + 1));
        if (!v14)
        {
          IFFPictureAddMetadataItemReference(v11, a3, *v21);
          if (!v15)
          {
            *a6 = *v21;
          }
        }

        return;
      }

      v16 = *v21;
      v17 = 0;
      v18 = a4;
    }

    if (IFFInformationSetItemURIType(v16, v17, v18))
    {
      return;
    }

    goto LABEL_11;
  }

  v25 = 0u;
  v26 = 0u;
  *buffer = 0u;
  v24 = 0u;
  if (a5)
  {
    v13 = buffer;
    if (!CFStringGetCString(a5, buffer, 64, 0x8000100u))
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_1_4();
      FigSignalErrorAtGM();
      return;
    }
  }

  else
  {
    v13 = 0;
  }

  if (!IFFInformationSetItemMIMETypeAndEncoding(*v21, "application/rdf+xml", v13))
  {
    goto LABEL_11;
  }
}

void IFFInformationAddGroup(uint64_t a1, int a2, int *a3)
{
  v4 = *(a1 + 88) + 1;
  *(a1 + 88) = v4;
  IFFInformationReserveItemGroup(a1, v4, a2, 0, 0);
  if (!v5)
  {
    *a3 = v4;
  }
}

void IFFInformationAddPictureToGroup(uint64_t a1, int a2, int a3)
{
  v8 = 0;
  v9 = 0;
  if (!IFFInformationGetPictureByID(a1, a2))
  {
    v5 = *(v9 + 8);
    if (!IFFInformationGetGroupByID(a1, a3, &v8))
    {
      v6 = *(v5 + 40);
      v7 = v8;

      IFFInformationAddItemToGroup(a1, v6, v7);
    }
  }
}

void IFFInformationAddGroupToGroup(uint64_t a1, int a2, int a3)
{
  v8 = 0;
  v9 = 0;
  if (!IFFInformationGetGroupByID(a1, a2, &v9) && !IFFInformationGetGroupByID(a1, a3, &v8))
  {
    v6 = v8;
    if (*(v9 + 24) != 1634497650 || (*(v9 + 24) == 1634497650) == (*(v8 + 24) != 1634497650))
    {

      IFFInformationAddItemToGroup(a1, a2, v6);
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();

      FigSignalErrorAtGM();
    }
  }
}

void IFFInformationAddPropertiesToGroup(CFArrayRef *a1, int a2, uint64_t a3)
{
  v37 = 0;
  if (IFFInformationGetGroupByID(a1, a2, &v37))
  {
    goto LABEL_55;
  }

  Value = FigCFDictionaryGetValue();
  if (Value)
  {
    v6 = v37;
    if (*(v37 + 24) != 1937007986)
    {
      goto LABEL_57;
    }

    v7 = Value;
    _setStereoMetadataSingleIntegerHelper(a1, *(v37 + 40), 19, Value);
    if (v8)
    {
      goto LABEL_55;
    }

    v9 = *(v6 + 48);
    if (v9)
    {
      if (CFArrayGetCount(v9) > 1)
      {
        Count = 2;
      }

      else
      {
        v10 = *(v6 + 48);
        if (!v10)
        {
          goto LABEL_14;
        }

        Count = CFArrayGetCount(v10);
        if (Count < 1)
        {
          goto LABEL_14;
        }
      }

      v12 = 0;
      do
      {
        ValueAtIndex = FigCFArrayGetValueAtIndex();
        _setStereoMetadataSingleIntegerHelper(a1, ValueAtIndex, 19, v7);
        if (v14)
        {
          goto LABEL_55;
        }
      }

      while (Count != ++v12);
    }
  }

LABEL_14:
  v15 = FigCFDictionaryGetValue();
  if (!v15)
  {
    goto LABEL_52;
  }

  if (*(v37 + 24) == 1937007986)
  {
    v16 = *(v37 + 40);
    v17 = CFArrayGetCount(v15);
    if (v17 < 1)
    {
      v35 = 0;
      v36 = 0;
      v19 = 0;
      v31 = 0;
      goto LABEL_51;
    }

    v18 = v17;
    v36 = malloc_type_calloc(v17, 1uLL, 0x100004077774924uLL);
    if (v36)
    {
      v35 = malloc_type_calloc(v18, 1uLL, 0x100004077774924uLL);
      if (v35)
      {
        v19 = malloc_type_calloc(v18, 8uLL, 0x6004044C4A2DFuLL);
        if (v19)
        {
          v34 = v16;
          for (i = 0; i != v18; ++i)
          {
            FigCFArrayGetValueAtIndex();
            if (!FigCFDictionaryGetValue())
            {
LABEL_56:
              fig_log_get_emitter();
              OUTLINED_FUNCTION_0_58();
              v31 = FigSignalErrorAtGM();
              goto LABEL_51;
            }

            if (FigCFEqual())
            {
              v21 = 0;
            }

            else if (FigCFEqual())
            {
              v21 = 1;
            }

            else if (FigCFEqual())
            {
              v21 = 2;
            }

            else if (FigCFEqual())
            {
              v21 = 3;
            }

            else if (FigCFEqual())
            {
              v21 = 4;
            }

            else if (FigCFEqual())
            {
              v21 = 5;
            }

            else if (FigCFEqual())
            {
              v21 = 6;
            }

            else
            {
              if (!FigCFEqual())
              {
                goto LABEL_56;
              }

              v21 = 7;
            }

            v36[i] = v21;
            LODWORD(v38) = -1082130432;
            if (FigCFDictionaryGetFloatIfPresent())
            {
              if (*&v38 < 0.0 || *&v38 > 1.0)
              {
                goto LABEL_56;
              }

              v35[i] = (roundf(*&v38 * 126.0) + 1.0);
            }

            v23 = FigCFDictionaryGetValue();
            v19[i] = v23;
            if (v23)
            {
              v24 = CFGetTypeID(v23);
              if (v24 != CFStringGetTypeID())
              {
                goto LABEL_56;
              }
            }
          }

          v38 = 0;
          v25 = IFFInformationReserveSharedItemProperty(a1, 20, &v38, 0);
          if (!v25)
          {
            v25 = IFFInformationSetItemPropertyStereoAggressors(v38, v18, v36, v35, v19);
            if (!v25)
            {
              v26 = OUTLINED_FUNCTION_23_45(v38);
              IFFInformationAssignSharedItemPropertyByIndex(v26, v27, 1, 0, *(v34 + 40), v28, v29, v30, @"LowImageQuality", @"TemporalAlignmentMismatch", @"StereoCalibrationErrors", @"ObjectsTooClose", v33, v34, a1, a3, @"StereoWindowViolation", @"ImageConditionMismatch", @"LensOcclusion", v35);
            }
          }

          v31 = v25;
LABEL_51:
          free(v19);
          free(v35);
          free(v36);
          if (!v31)
          {
LABEL_52:
            if (FigCFDictionaryGetInt32IfPresent())
            {
              if (*(v37 + 24) == 1937007986)
              {
                *(v37 + 32) = 0;
              }

              else
              {
                fig_log_get_emitter();
                OUTLINED_FUNCTION_0_58();
                FigSignalErrorAtGM();
              }
            }
          }

LABEL_55:
          OUTLINED_FUNCTION_67_15();
          return;
        }

LABEL_62:
        v31 = -12846;
        goto LABEL_51;
      }
    }

    else
    {
      v36 = 0;
    }

    v35 = 0;
    v19 = 0;
    goto LABEL_62;
  }

LABEL_57:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_58();
  OUTLINED_FUNCTION_67_15();

  FigSignalErrorAtGM();
}

uint64_t IFFPictureTileAccessorCopyCleanApertureDictionary(uint64_t a1, CFDictionaryRef *a2)
{
  keys[4] = *MEMORY[0x1E69E9840];
  v4 = CFGetAllocator(*a1);
  v6 = *(a1 + 56);
  v7 = *(*(a1 + 72) + 8 * v6);
  v8 = v7[10];
  if (v8)
  {
    if (v7 == *(*(a1 + 8) + 8))
    {
      return 4294954513;
    }

    v9 = v4;
    v10 = v7[20];
    if (!v10 || !*v10)
    {
      v11 = v7[19];
      if (v11)
      {
        v12 = *v11 / *(v11 + 4);
        v13 = *(v11 + 8) / *(v11 + 12);
      }

      else
      {
        v12 = *v8;
        v13 = v8[1];
      }

      v14 = *(a1 + 64);
      v15 = *(v14 + 16 * v6);
      if (!HIDWORD(v15))
      {
        v16 = *(v14 + 16 * v6 + 8);
        if (!HIDWORD(v16))
        {
          v18 = *(a1 + 16);
          v17 = *(a1 + 24);
          v19 = v17 - v16;
          if (v17 - v16 >= v13)
          {
            v19 = v13;
          }

          if (v17 >= v16)
          {
            v20 = v19;
          }

          else
          {
            v20 = 0;
          }

          v21 = v18 - v15;
          if (v18 - v15 >= v12)
          {
            v21 = v12;
          }

          if (v18 >= v15)
          {
            v22 = v21;
          }

          else
          {
            v22 = 0;
          }

          if (v11)
          {
            v23 = 0;
          }

          else
          {
            v23 = v22 == v12;
          }

          if (!v23 || v20 != v13)
          {
            *&v40 = v22 | 0x100000000;
            *(&v40 + 1) = v20 | 0x100000000;
            LODWORD(v41) = v22 - *(a1 + 32);
            DWORD1(v41) = 2;
            DWORD2(v41) = v20 - *(a1 + 40);
            HIDWORD(v41) = 2;
            if (v11)
            {
              v33 = *(v11 + 16);
              v39[0] = *v11;
              v39[1] = v33;
              v38[0] = v40;
              v38[1] = v41;
              IFFItemPropertyMergeCLAPs(v39, v38, &v40);
              if (v4)
              {
                return v4;
              }
            }

            v36 = SDWORD2(v40) / SHIDWORD(v40);
            v37 = v40 / SDWORD1(v40);
            v35 = v41 / SDWORD1(v41);
            v34 = SDWORD2(v41) / SHIDWORD(v41);
            keys[0] = @"Width";
            keys[1] = @"Height";
            keys[2] = @"HorizontalOffset";
            keys[3] = @"VerticalOffset";
            values = OUTLINED_FUNCTION_68_13(v4, v5, &v37);
            v43 = OUTLINED_FUNCTION_68_13(values, v25, &v36);
            v44 = OUTLINED_FUNCTION_68_13(v43, v26, &v35);
            v45 = OUTLINED_FUNCTION_68_13(v44, v27, &v34);
            v28 = CFDictionaryCreate(v9, keys, &values, 4, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
            if (v28)
            {
              v29 = 0;
              *a2 = v28;
            }

            else
            {
              fig_log_get_emitter();
              OUTLINED_FUNCTION_0_4();
              v29 = FigSignalErrorAtGM();
            }

            v30 = -1;
            p_values = &values;
            do
            {
              if (*p_values)
              {
                CFRelease(*p_values);
                *p_values = 0;
              }

              ++v30;
              ++p_values;
            }

            while (v30 < 3);
            return v29;
          }

          return 4294954513;
        }
      }
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_376();

  return FigSignalErrorAtGM();
}

uint64_t sanityCheckImageItem(uint64_t result)
{
  if (result)
  {
    v1 = result;
    if (*(result + 16))
    {
      result = IFFItemIsPicture(result);
      if (result)
      {
        return *(v1 + 80) != 0;
      }
    }

    else
    {
      return 0;
    }
  }

  return result;
}

CFArrayRef createArrayFromRational32(const __CFAllocator *a1, char *valuePtr)
{
  values[2] = *MEMORY[0x1E69E9840];
  v4 = *MEMORY[0x1E695E480];
  v5 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt32Type, valuePtr);
  if (!v5)
  {
    return 0;
  }

  v6 = v5;
  v7 = CFNumberCreate(v4, kCFNumberSInt32Type, valuePtr + 4);
  if (!v7)
  {
    CFRelease(v6);
    return 0;
  }

  v8 = v7;
  values[0] = v6;
  values[1] = v7;
  v9 = CFArrayCreate(a1, values, 2, MEMORY[0x1E695E9C0]);
  CFRelease(v6);
  CFRelease(v8);
  return v9;
}

void createColorExtensionsDictFromItem(const __CFAllocator *a1, uint64_t a2, __CFDictionary **a3)
{
  if (!a3 || !*(a2 + 104) && !*(a2 + 112) || (Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8])) == 0)
  {
LABEL_33:
    OUTLINED_FUNCTION_4_16();
    return;
  }

  v7 = Mutable;
  v8 = *(a2 + 104);
  if (!v8)
  {
    v10 = 0;
LABEL_9:
    v11 = *(a2 + 112);
    if (!v11)
    {
      goto LABEL_29;
    }

    if (*(v11 + 6) >= 0)
    {
      v12 = MEMORY[0x1E695E4C0];
    }

    else
    {
      v12 = MEMORY[0x1E695E4D0];
    }

    CFDictionarySetValue(v7, *MEMORY[0x1E6960038], *v12);
    StringForIntegerCodePoint = CVColorPrimariesGetStringForIntegerCodePoint(*v11);
    v14 = CVTransferFunctionGetStringForIntegerCodePoint(v11[1]);
    v15 = CVYCbCrMatrixGetStringForIntegerCodePoint(v11[2]);
    if (v15)
    {
      v16 = v15;
      v17 = v14 != 0;
      v18 = 1;
    }

    else
    {
      if (v11[2])
      {
        v16 = 0;
      }

      else
      {
        v16 = *MEMORY[0x1E6965FE0];
      }

      v17 = v14 != 0;
      v18 = v16 != 0;
      if (!StringForIntegerCodePoint && !v14 && !v16)
      {
        goto LABEL_29;
      }
    }

    if (StringForIntegerCodePoint)
    {
      CFDictionarySetValue(v7, *MEMORY[0x1E6965D88], StringForIntegerCodePoint);
      if (v17)
      {
        goto LABEL_17;
      }
    }

    else if (v17)
    {
LABEL_17:
      CFDictionarySetValue(v7, *MEMORY[0x1E6965F30], v14);
      if (!v18)
      {
        goto LABEL_29;
      }

      goto LABEL_28;
    }

    if (v18)
    {
LABEL_28:
      CFDictionarySetValue(v7, *MEMORY[0x1E6965F98], v16);
    }

LABEL_29:
    if (CFDictionaryGetCount(v7) >= 1)
    {
      *a3 = v7;
    }

    if (v10)
    {
      CFRelease(v10);
    }

    goto LABEL_33;
  }

  v9 = CFDataCreate(a1, *v8, *(v8 + 8));
  if (v9)
  {
    v10 = v9;
    CFDictionarySetValue(v7, *MEMORY[0x1E6960070], v9);
    goto LABEL_9;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_1_4();
  OUTLINED_FUNCTION_4_16();

  FigSignalErrorAtGM();
}

BOOL ___getHDRMetadataProperty_block_invoke_3(uint64_t a1, uint64_t a2)
{
  v3 = *(a2 + 40);
  v2 = (a2 + 40);
  v4 = ((((v3 << 26) >> 31) & 0x18) + ((v3 >> 1) & 4) + ((v3 >> 2) & 4) + (v3 & 4)) | 1;
  if ((v3 & 0x3C) != 0)
  {
    v5 = v4;
  }

  else
  {
    v5 = 0;
  }

  return *(a1 + 32) == v5 && memcmp(*(a1 + 40), v2, v5) == 0;
}

uint64_t getRational32FromArray(const __CFArray *a1, uint64_t a2)
{
  if (a1 && CFArrayGetCount(a1) == 2)
  {
    if (!a2)
    {
      return 4294949526;
    }

    OUTLINED_FUNCTION_265();
    if (FigCFArrayGetInt32AtIndex() && FigCFArrayGetInt32AtIndex())
    {
      return 0;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t _floatFromRational(uint64_t result)
{
  if (result)
  {
    OUTLINED_FUNCTION_187();
    v4 = CFGetTypeID(v3);
    if (v4 == CFArrayGetTypeID() && CFArrayGetCount(v2) == 2)
    {
      OUTLINED_FUNCTION_265();
      result = FigCFArrayGetInt32AtIndex();
      if (result)
      {
        result = FigCFArrayGetInt32AtIndex();
        if (result)
        {
          *v1 = 0 / 1;
          return 1;
        }
      }
    }

    else
    {
      return 0;
    }
  }

  return result;
}

__CFString *IFFItemCopyFormattingDesc(uint64_t a1, const __CFDictionary *a2)
{
  v4 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v4, 0);
  if (Mutable)
  {
    v19 = *(a1 + 16);
    v6 = *(a1 + 44);
    v18 = *(a1 + 40);
    v7 = *(a1 + 512);
    v8 = *(a1 + 520);
    if (v8)
    {
      Count = CFArrayGetCount(v8);
    }

    else
    {
      Count = 0;
    }

    v10 = *(a1 + 528);
    if (v10)
    {
      v11 = CFArrayGetCount(v10);
    }

    else
    {
      v11 = 0;
    }

    v12 = HIBYTE(v6);
    v13 = BYTE2(v6);
    v14 = v6;
    v15 = *(a1 + 544);
    v16 = BYTE1(v6);
    if (v15)
    {
      v15 = CFArrayGetCount(v15);
    }

    CFStringAppendFormat(Mutable, a2, @"<IFFItem %p>{\n\tID: %d\n\tvalid: %d\n\ttype: %c%c%c%c\n\tderivationReferences: %d\n\tnumReferences: %d\n\tnumInboundReferences: %d\n\tnumGroups: %d\n}", a1, v18, v19, v12, v13, v16, v14, v7, Count, v11, v15);
  }

  return Mutable;
}

uint64_t IFFItemPropertyGetUnrotatedCLAP_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyGetUnrotatedCLAP_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyGetUnrotatedCLAP_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyGetUnrotatedCLAP_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyGetUnmirroredCLAP_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyGetUnmirroredCLAP_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyApplyPropertiesToDimensions_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyApplyPropertiesToDimensions_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyApplyPropertiesToDimensions_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemPropertyApplyPropertiesToDimensions_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetBrands_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetBrands_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetBrands_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationCopyCompatibleBrands_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemGetOrCreateWithID_cold_1()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *v0 = result;
  return result;
}

uint64_t IFFInformationGetItemAtIndex_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationGetItemAtIndex_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationReserveSharedItemProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationReserveSharedItemProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemPropertyPixelInformation_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationGetItemPropertyByIndex_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationGetSharedItemPropertyAtIndex_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationGetSharedItemPropertyAtIndex_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationGrid_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationGrid_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationTonemap_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemBodyImageDerivationOverlay_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationSetItemDataOffset_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemGroupCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationReservePictureFromItemIfNeeded_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFInformationReservePictureFromItemIfNeeded_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t getParentOfIdentityPicture_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t getParentOfIdentityPicture_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t getParentOfIdentityPicture_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void IFFPictureCopyDerivation_cold_2()
{
  OUTLINED_FUNCTION_58_12();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *v0 = FigSignalErrorAtGM();
  CFRelease(v2);

  CFRelease(v1);
}

void IFFPictureCopyDerivation_cold_3()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  v1 = OUTLINED_FUNCTION_56_18(v0);

  CFRelease(v1);
}

uint64_t IFFPictureCopyDerivation_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL IFFPictureCopyDerivation_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

uint64_t IFFPictureCopyDerivation_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_10(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_11(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_12(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyDerivation_cold_13(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t createCleanApertureExtensionDictFromProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t createCleanApertureExtensionDictFromProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _copyDerivationParentPicturesArray_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void _copyDerivationParentPicturesArray_cold_2()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  v1 = OUTLINED_FUNCTION_56_18(v0);

  CFRelease(v1);
}

uint64_t _copyDerivationParentPicturesArray_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyTileDimensionsDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyTileDimensionsDictionary_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyTileDimensionsDictionary_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void IFFItemOutboundReferencesOfType_cold_1()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  v1 = OUTLINED_FUNCTION_56_18(v0);

  CFRelease(v1);
}

uint64_t IFFItemOutboundReferencesOfType_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyTileGridDimensionsDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyTileGridDimensionsDictionary_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureCopyTileGridDimensionsDictionary_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void createPixelAspectRatioExtensionDictFromIFFItemProperty_cold_1()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  v1 = OUTLINED_FUNCTION_56_18(v0);

  CFRelease(v1);
}

uint64_t createPixelAspectRatioExtensionDictFromIFFItemProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t createFormatDescriptionForItem_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t createFormatDescriptionForItem_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_10(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCreate_cold_11(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCopySpatialRelationDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorCopySpatialRelationDictionary_cold_2()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *v0 = result;
  return result;
}

uint64_t IFFPictureTileAccessorSeekCursorToLocation_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFPictureTileAccessorSeekCursorToLocation_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemInformationCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t IFFItemInboundReferencesOfType_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

double _getHDRMetadataProperty_cold_1(void *a1, uint64_t a2, uint64_t a3)
{
  *a1 = MEMORY[0x1E69E9820];
  *&result = 0x40000000;
  a1[1] = 0x40000000;
  a1[2] = ___getHDRMetadataProperty_block_invoke_3;
  a1[3] = &__block_descriptor_tmp_29_2;
  a1[4] = a2;
  a1[5] = a3;
  return result;
}

uint64_t _getHDRMetadataProperty_cold_2(void *a1, uint64_t a2)
{
  *a1 = MEMORY[0x1E69E9820];
  a1[1] = 0x40000000;
  a1[2] = ___getHDRMetadataProperty_block_invoke_4;
  a1[3] = &__block_descriptor_tmp_30_1;
  return OUTLINED_FUNCTION_51_22(a1, a2, 8);
}

uint64_t _getHDRMetadataProperty_cold_3(void *a1, uint64_t a2)
{
  *a1 = MEMORY[0x1E69E9820];
  a1[1] = 0x40000000;
  a1[2] = ___getHDRMetadataProperty_block_invoke_2;
  a1[3] = &__block_descriptor_tmp_28_2;
  return OUTLINED_FUNCTION_51_22(a1, a2, 24);
}

uint64_t _getHDRMetadataProperty_cold_4(void *a1, uint64_t a2)
{
  *a1 = MEMORY[0x1E69E9820];
  a1[1] = 0x40000000;
  a1[2] = ___getHDRMetadataProperty_block_invoke;
  a1[3] = &__block_descriptor_tmp_27_3;
  return OUTLINED_FUNCTION_51_22(a1, a2, 4);
}

uint64_t _getHDRMetadataProperty_cold_5(unsigned __int8 *a1, uint64_t a2, _DWORD *a3)
{
  v3 = *a1;
  v5 = (v3 & 0x3C) == 0;
  v4 = ((((v3 << 26) >> 31) & 0x18) + ((v3 >> 1) & 4) + ((v3 >> 2) & 4) + (v3 & 4)) | 1;
  v5 = !v5 && a2 == v4;
  if (v5)
  {
    return 0;
  }

  *a3 = -12780;
  return 1;
}

unsigned __int8 *fpie_GetBooleanProperty(uint64_t a1, unsigned __int8 *a2)
{
  if (!a1)
  {
    return 0;
  }

  v2 = a2;
  if (a2)
  {
    OUTLINED_FUNCTION_8_87();
    v2 = *v2;
    FigSimpleMutexUnlock();
  }

  else
  {
    OUTLINED_FUNCTION_4_149();
    FigSignalErrorAtGM();
  }

  return v2;
}

CFTypeRef *fpie_CopyValueProperty(uint64_t a1, CFTypeRef *a2)
{
  if (!a1)
  {
    return 0;
  }

  v2 = a2;
  if (a2)
  {
    OUTLINED_FUNCTION_5_129();
    if (*v2)
    {
      v2 = CFRetain(*v2);
    }

    else
    {
      v2 = 0;
    }

    FigSimpleMutexUnlock();
  }

  else
  {
    OUTLINED_FUNCTION_4_149();
    FigSignalErrorAtGM();
  }

  return v2;
}

uint64_t fpie_SetValueProperty(uint64_t result, const void **a2, const void *a3)
{
  if (result)
  {
    if (a2)
    {
      OUTLINED_FUNCTION_5_129();
      OUTLINED_FUNCTION_3_151();
      v5 = *a2;
      *a2 = a3;
      if (a3)
      {
        CFRetain(a3);
      }

      if (v5)
      {
        CFRelease(v5);
      }

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t fpie_GetTimeProperty@<X0>(uint64_t result@<X0>, uint64_t a2@<X1>, uint64_t a3@<X8>)
{
  v4 = MEMORY[0x1E6960C70];
  *a3 = *MEMORY[0x1E6960C70];
  *(a3 + 16) = *(v4 + 16);
  if (result)
  {
    if (a2)
    {
      OUTLINED_FUNCTION_5_129();
      *a3 = *a2;
      *(a3 + 16) = *(a2 + 16);

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t fpie_SetTimeProperty(uint64_t result, uint64_t a2, __int128 *a3)
{
  if (result)
  {
    if (a2)
    {
      OUTLINED_FUNCTION_5_129();
      OUTLINED_FUNCTION_3_151();
      v5 = *a3;
      *(a2 + 16) = *(a3 + 2);
      *a2 = v5;

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

void FigPlayerInterstitialEventSetInterstitialAssetURLs(uint64_t a1, const __CFArray *a2)
{
  Copy = CFArrayCreateCopy(*MEMORY[0x1E695E480], a2);
  fpie_SetValueProperty(a1, (a1 + 88), Copy);
  if (Copy)
  {

    CFRelease(Copy);
  }
}

CMTime *FigPlayerInterstitialEventGetEffectivePlayoutLimit@<X0>(uint64_t a1@<X0>, CMTime *a2@<X8>)
{
  memset(&v10, 0, sizeof(v10));
  fpie_GetTimeProperty(a1, a1 + 164, &v10);
  memset(&v9, 0, sizeof(v9));
  result = fpie_GetTimeProperty(a1, a1 + 140, &v9);
  v5 = MEMORY[0x1E6960C70];
  *&a2->value = *MEMORY[0x1E6960C70];
  a2->epoch = *(v5 + 16);
  if ((v10.flags & 1) == 0)
  {
    *&a2->value = *&v9.value;
    epoch = v9.epoch;
LABEL_5:
    a2->epoch = epoch;
    return result;
  }

  if ((v9.flags & 1) == 0)
  {
    *&a2->value = *&v10.value;
    epoch = v10.epoch;
    goto LABEL_5;
  }

  time1 = v10;
  v7 = v9;
  return CMTimeMinimum(a2, &time1, &v7);
}

unsigned int *fpie_GetUInt32Property(uint64_t a1, unsigned int *a2)
{
  if (!a1)
  {
    return 0;
  }

  v2 = a2;
  if (a2)
  {
    OUTLINED_FUNCTION_8_87();
    v2 = *v2;
    FigSimpleMutexUnlock();
  }

  else
  {
    OUTLINED_FUNCTION_4_149();
    FigSignalErrorAtGM();
  }

  return v2;
}

uint64_t fpie_SetUInt32Property(uint64_t result, uint64_t a2)
{
  if (result)
  {
    if (a2)
    {
      FigSimpleMutexLock();
      OUTLINED_FUNCTION_7_100();

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t fpie_SetBooleanProperty(uint64_t result, _BYTE *a2, char a3)
{
  if (result)
  {
    if (a2)
    {
      OUTLINED_FUNCTION_8_87();
      ++*(v3 + 216);
      *a2 = a3;

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

void FigPlayerInterstitialEventSetExtraAttributes(uint64_t a1, const __CFDictionary *a2)
{
  Copy = CFDictionaryCreateCopy(*MEMORY[0x1E695E480], a2);
  fpie_SetValueProperty(a1, (a1 + 192), Copy);
  if (Copy)
  {

    CFRelease(Copy);
  }
}

uint64_t fpie_GetTimeRangeProperty@<X0>(uint64_t result@<X0>, _OWORD *a2@<X1>, _OWORD *a3@<X8>)
{
  v4 = MEMORY[0x1E6960C98];
  v5 = *(MEMORY[0x1E6960C98] + 16);
  *a3 = *MEMORY[0x1E6960C98];
  a3[1] = v5;
  a3[2] = *(v4 + 32);
  if (result)
  {
    if (a2)
    {
      OUTLINED_FUNCTION_5_129();
      v7 = a2[1];
      *a3 = *a2;
      a3[1] = v7;
      a3[2] = a2[2];

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t fpie_SetTimeRangeProperty(uint64_t result, _OWORD *a2, __int128 *a3)
{
  if (result)
  {
    if (a2)
    {
      OUTLINED_FUNCTION_5_129();
      OUTLINED_FUNCTION_3_151();
      v5 = *a3;
      v6 = a3[2];
      a2[1] = a3[1];
      a2[2] = v6;
      *a2 = v5;

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t FigPlayerInterstitialEventSetOverrideSkipControlTimeRange(uint64_t a1, __int128 *a2)
{
  v2 = a2[1];
  v4[0] = *a2;
  v4[1] = v2;
  v4[2] = a2[2];
  return fpie_SetTimeRangeProperty(a1, (a1 + 376), v4);
}

double FigPlayerInterstitialEventGetEffectiveSkipControlTimeRange@<D0>(uint64_t a1@<X0>, _OWORD *a2@<X8>)
{
  v12 = 0u;
  v13 = 0u;
  v11 = 0u;
  fpie_GetTimeRangeProperty(a1, (a1 + 376), &v11);
  v9 = 0u;
  v10 = 0u;
  v8 = 0u;
  fpie_GetTimeRangeProperty(a1, (a1 + 328), &v8);
  result = *&v11;
  v5 = v12;
  v6 = v13;
  *a2 = v11;
  a2[1] = v5;
  a2[2] = v6;
  if ((BYTE12(v11) & 1) == 0 || (BYTE4(v13) & 1) == 0 || *(&v13 + 1) || (*(&v12 + 1) & 0x8000000000000000) != 0)
  {
    v7 = v9;
    *a2 = v8;
    a2[1] = v7;
    result = *&v10;
    a2[2] = v10;
  }

  return result;
}

CFTypeRef *FigPlayerInterstitialEventCopyEffectiveSkipControlLocalizedLabelBundleKey(uint64_t a1)
{
  result = fpie_CopyValueProperty(a1, (a1 + 432));
  if (!result)
  {

    return fpie_CopyValueProperty(a1, (a1 + 424));
  }

  return result;
}

unsigned int *fpie_GetInt32Property(uint64_t a1, unsigned int *a2)
{
  if (!a1)
  {
    return 0;
  }

  v2 = a2;
  if (a2)
  {
    OUTLINED_FUNCTION_8_87();
    v2 = *v2;
    FigSimpleMutexUnlock();
  }

  else
  {
    OUTLINED_FUNCTION_4_149();
    FigSignalErrorAtGM();
  }

  return v2;
}

uint64_t fpie_SetInt32Property(uint64_t result, uint64_t a2)
{
  if (result)
  {
    if (a2)
    {
      FigSimpleMutexLock();
      OUTLINED_FUNCTION_7_100();

      return FigSimpleMutexUnlock();
    }

    else
    {
      OUTLINED_FUNCTION_4_149();

      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t FigPlayerInterstitialEventMerge(uint64_t a1, uint64_t a2, const __CFArray *a3)
{
  UInt32Property = fpie_GetUInt32Property(a1, (a1 + 108));
  v7 = fpie_GetUInt32Property(a2, (a2 + 108));
  memset(&v34, 0, sizeof(v34));
  fpie_GetTimeProperty(a1, a1 + 140, &v34);
  memset(&v33, 0, sizeof(v33));
  fpie_GetTimeProperty(a2, a2 + 140, &v33);
  v8 = fpie_GetUInt32Property(a1, (a1 + 104));
  v30 = fpie_GetUInt32Property(a2, (a2 + 104));
  BooleanProperty = fpie_GetBooleanProperty(a1, (a1 + 112));
  v29 = fpie_GetBooleanProperty(a2, (a2 + 112));
  v10 = fpie_GetBooleanProperty(a1, (a1 + 113));
  v27 = fpie_GetBooleanProperty(a2, (a2 + 113));
  v11 = fpie_GetBooleanProperty(a1, (a1 + 114));
  v26 = fpie_GetBooleanProperty(a2, (a2 + 114));
  v31 = fpie_CopyValueProperty(a1, (a1 + 192));
  v12 = fpie_CopyValueProperty(a2, (a2 + 192));
  v28 = a3;
  if (!a3)
  {
    OUTLINED_FUNCTION_40_0();
    OUTLINED_FUNCTION_4_149();
    v24 = FigSignalErrorAtGM();
LABEL_59:
    v14 = v31;
    goto LABEL_45;
  }

  if (UInt32Property)
  {
    if (v7 != UInt32Property)
    {
      OUTLINED_FUNCTION_40_0();
      OUTLINED_FUNCTION_2_179();
LABEL_58:
      v24 = FigSignalErrorAtGM();
      a3 = 0;
      goto LABEL_59;
    }

    goto LABEL_6;
  }

  if (!v7)
  {
LABEL_6:
    v13 = 0;
    goto LABEL_7;
  }

  fpie_SetUInt32Property(a1, a1 + 108);
  v13 = 1;
LABEL_7:
  if (v34.flags)
  {
    time1 = v34;
    time2 = v33;
    if (CMTimeCompare(&time1, &time2))
    {
      goto LABEL_57;
    }
  }

  else if (v33.flags)
  {
    time1 = v33;
    fpie_SetTimeProperty(a1, a1 + 140, &time1.value);
    v13 = 1;
  }

  if (v8)
  {
    if (v8 != v30)
    {
      goto LABEL_57;
    }

LABEL_15:
    if (!BooleanProperty)
    {
      goto LABEL_17;
    }

LABEL_16:
    if (v29)
    {
      goto LABEL_17;
    }

LABEL_57:
    OUTLINED_FUNCTION_40_0();
    OUTLINED_FUNCTION_2_179();
    goto LABEL_58;
  }

  if (!v30)
  {
    goto LABEL_15;
  }

  fpie_SetUInt32Property(a1, a1 + 104);
  v13 = 1;
  if (BooleanProperty)
  {
    goto LABEL_16;
  }

LABEL_17:
  if (v10 && !v27 || v11 && !v26)
  {
    goto LABEL_57;
  }

  if (BooleanProperty || v10 || v11)
  {
    v14 = v31;
  }

  else
  {
    v14 = v31;
    if (v29 || v27 || v26)
    {
      v15 = fpie_GetBooleanProperty(a2, (a2 + 112));
      fpie_SetBooleanProperty(a1, (a1 + 112), v15);
      v16 = fpie_GetBooleanProperty(a2, (a2 + 113));
      fpie_SetBooleanProperty(a1, (a1 + 113), v16);
      v17 = fpie_GetBooleanProperty(a2, (a2 + 114));
      fpie_SetBooleanProperty(a1, (a1 + 114), v17);
      v13 = 1;
    }
  }

  if (!FigCFDictionaryGetCount() && FigCFDictionaryGetCount())
  {
    a3 = 0;
    goto LABEL_43;
  }

  Count = FigCFDictionaryGetCount();
  if (Count <= FigCFDictionaryGetCount())
  {
    a3 = 0;
    v23 = MEMORY[0x1E695E4D0];
    if (!v13)
    {
      v23 = MEMORY[0x1E695E4C0];
    }

    goto LABEL_44;
  }

  a3 = FigCFDictionaryCopyArrayOfKeys();
  v19 = 0;
  v20 = 1;
  if (!a3)
  {
    goto LABEL_34;
  }

LABEL_33:
  for (i = CFArrayGetCount(a3); v19 < i && v20; i = 0)
  {
    ValueAtIndex = CFArrayGetValueAtIndex(a3, v19);
    v20 = CFDictionaryContainsValue(v12, ValueAtIndex) != 0;
    ++v19;
    if (a3)
    {
      goto LABEL_33;
    }

LABEL_34:
    ;
  }

  if (v20)
  {
LABEL_43:
    FigPlayerInterstitialEventSetExtraAttributes(a1, v12);
    v23 = MEMORY[0x1E695E4D0];
LABEL_44:
    v24 = 0;
    *v28 = *v23;
    goto LABEL_45;
  }

  OUTLINED_FUNCTION_40_0();
  OUTLINED_FUNCTION_2_179();
  v24 = FigSignalErrorAtGM();
LABEL_45:
  if (v14)
  {
    CFRelease(v14);
  }

  if (a3)
  {
    CFRelease(a3);
  }

  if (v12)
  {
    CFRelease(v12);
  }

  return v24;
}

double FigDateTimeMakeFromDictionary@<D0>(const void *a1@<X0>, uint64_t a2@<X8>)
{
  *(a2 + 32) = 0;
  result = 0.0;
  *a2 = 0u;
  *(a2 + 16) = 0u;
  dictionaryRepresentation = 0;
  if (a1)
  {
    TypeID = CFDictionaryGetTypeID();
    if (TypeID == CFGetTypeID(a1))
    {
      if (FigCFDictionaryGetDoubleIfPresent())
      {
        *(a2 + 33) = 1;
      }

      if (FigCFDictionaryGetValueForCaseInsensitiveKeyIfPresent())
      {
        CMTimeMakeFromDictionary(&v6, dictionaryRepresentation);
        result = *&v6.value;
        *a2 = v6;
        *(a2 + 32) = 1;
      }
    }
  }

  return result;
}

CMTime *FigCreateTimeWithDateAndMoment@<X0>(CMTime *result@<X0>, CMTime *a2@<X8>, double a3@<D0>)
{
  v4 = MEMORY[0x1E6960C70];
  *&a2->value = *MEMORY[0x1E6960C70];
  a2->epoch = *(v4 + 16);
  if (LOBYTE(result[1].timescale))
  {
    v5 = result;
    if (BYTE1(result[1].timescale))
    {
      v6 = *&result[1].value;
      if (v6 != 0.0 && (result->flags & 1) != 0)
      {
        CMTimeMakeWithSeconds(&rhs, a3 - v6, 1000000);
        v7 = *v5;
        return CMTimeAdd(a2, &v7, &rhs);
      }
    }
  }

  return result;
}

BOOL figPlayerInterstitialEvent_checkEventStart(uint64_t a1, uint64_t a2)
{
  v4 = fpie_CopyValueProperty(a1, (a1 + 56));
  v5 = fpie_CopyValueProperty(a2, (a2 + 56));
  if (fpie_GetBooleanProperty(a1, (a1 + 112)) && fpie_GetBooleanProperty(a2, (a2 + 112)) || fpie_GetBooleanProperty(a1, (a1 + 113)) && fpie_GetBooleanProperty(a2, (a2 + 113)))
  {
    v6 = 1;
    if (!v4)
    {
      goto LABEL_11;
    }

    goto LABEL_10;
  }

  fpie_GetTimeProperty(a1, a1 + 32, &time1);
  fpie_GetTimeProperty(a2, a2 + 32, &v8);
  if (CMTimeCompare(&time1, &v8))
  {
    v6 = 0;
    if (!v4)
    {
      goto LABEL_11;
    }

LABEL_10:
    CFRelease(v4);
    goto LABEL_11;
  }

  v6 = FigCFEqual() != 0;
  if (v4)
  {
    goto LABEL_10;
  }

LABEL_11:
  if (v5)
  {
    CFRelease(v5);
  }

  return v6;
}

BOOL figPlayerInterstitialEvent_equal(CFTypeRef *a1, CFTypeRef *a2)
{
  v4 = fpie_CopyValueProperty(a1, a1 + 3);
  v5 = fpie_CopyValueProperty(a2, a2 + 3);
  v6 = fpie_CopyValueProperty(a1, a1 + 11);
  v7 = fpie_CopyValueProperty(a2, a2 + 11);
  v8 = fpie_CopyValueProperty(a1, a1 + 12);
  v9 = fpie_CopyValueProperty(a2, a2 + 12);
  if (!FigCFEqual() || !figPlayerInterstitialEvent_checkEventStart(a1, a2) || (!v6 ? (Count = 0) : (Count = CFArrayGetCount(v6)), !v7 ? (v13 = 0) : (v13 = CFArrayGetCount(v7)), Count != v13 || !FigCFEqual()))
  {
    v10 = 0;
    if (!v4)
    {
      goto LABEL_4;
    }

    goto LABEL_3;
  }

  if (!v6)
  {
    v14 = 0;
    goto LABEL_35;
  }

  v14 = CFArrayGetCount(v6);
  if (v14 < 1)
  {
LABEL_35:
    v15 = 0;
    goto LABEL_37;
  }

  v15 = 0;
  v21 = v14;
  while (1)
  {
    ValueAtIndex = CFArrayGetValueAtIndex(v6, v15);
    v17 = CFURLCopyAbsoluteURL(ValueAtIndex);
    v18 = CFArrayGetValueAtIndex(v7, v15);
    v19 = CFURLCopyAbsoluteURL(v18);
    v20 = FigCFEqual();
    if (v17)
    {
      CFRelease(v17);
    }

    if (v19)
    {
      CFRelease(v19);
    }

    if (!v20)
    {
      break;
    }

    ++v15;
    v14 = v21;
    if (v21 == v15)
    {
      v15 = v21;
      goto LABEL_37;
    }
  }

  v14 = v21;
LABEL_37:
  v10 = v15 == v14;
  if (v4)
  {
LABEL_3:
    CFRelease(v4);
  }

LABEL_4:
  if (v5)
  {
    CFRelease(v5);
  }

  if (v6)
  {
    CFRelease(v6);
  }

  if (v7)
  {
    CFRelease(v7);
  }

  if (v8)
  {
    CFRelease(v8);
  }

  if (v9)
  {
    CFRelease(v9);
  }

  return v10;
}

uint64_t FigPlayerInterstitialEventCreate_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventCreateFromDictionary_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventCreateFromDictionary_cold_5(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventsCreateFromTaggedRangeMetadata_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventsCreateFromTaggedRangeMetadata_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventsCreateFromTaggedRangeMetadata_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventsCreateFromTaggedRangeMetadata_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventsCreateFromTaggedRangeMetadata_cold_5(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerInterstitialEventsCreateFromTaggedRangeMetadata_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void __FigOctaviaClockCreateConsumingNeroClock_block_invoke(uint64_t a1)
{
  v9 = 0;
  destination = *MEMORY[0x1E6960C70];
  v8 = *(MEMORY[0x1E6960C70] + 16);
  if (!NeroTransportSendSyncMessageCreatingReply() && !CMBlockBufferCopyDataBytes(v9, 0, 0x18uLL, &destination))
  {
    FigSimpleMutexLock();
    v2 = *(a1 + 32);
    v3 = destination;
    *(v2 + 24) = v8;
    *(v2 + 8) = v3;
    v4 = *(a1 + 32);
    UpTimeNanoseconds = FigGetUpTimeNanoseconds();
    CMTimeMake(&v6, UpTimeNanoseconds, 1000000000);
    *(v4 + 32) = v6;
    FigSimpleMutexUnlock();
  }

  if (v9)
  {
    CFRelease(v9);
  }
}

uint64_t FigOctaviaClockCreateConsumingNeroClock_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigInterstitialCreatePropertyListsFromLocalJSONData(uint64_t a1, void *a2, void *a3, void *a4, _OWORD *a5, void *a6)
{
  v66 = 0;
  v6 = *(MEMORY[0x1E6960C98] + 16);
  *&v65.start.value = *MEMORY[0x1E6960C98];
  *&v65.start.epoch = v6;
  *&v65.duration.timescale = *(MEMORY[0x1E6960C98] + 32);
  if (!a1)
  {
    goto LABEL_68;
  }

  v12 = FigJSONObjectCreateWithData();
  if (v12)
  {
LABEL_69:
    v53 = v12;
    Copy = 0;
    goto LABEL_57;
  }

  v13 = CFGetTypeID(v66);
  if (v13 != CFDictionaryGetTypeID() || (Value = CFDictionaryGetValue(v66, @"ASSETS")) == 0)
  {
    OUTLINED_FUNCTION_1_185();
LABEL_68:
    v12 = FigSignalErrorAtGM();
    goto LABEL_69;
  }

  v15 = Value;
  v55 = a3;
  v58 = a6;
  v59 = a2;
  v56 = a4;
  v57 = a5;
  v16 = *MEMORY[0x1E695E480];
  v17 = MEMORY[0x1E695E9C0];
  theArray = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  Mutable = CFArrayCreateMutable(v16, 0, v17);
  Count = CFArrayGetCount(v15);
  if (Count >= 1)
  {
    v20 = Count;
    v21 = 0;
    while (1)
    {
      v22 = Mutable;
      ValueAtIndex = CFArrayGetValueAtIndex(v15, v21);
      v24 = CFGetTypeID(ValueAtIndex);
      if (v24 != CFDictionaryGetTypeID() || (v25 = CFDictionaryGetValue(ValueAtIndex, @"URI")) == 0 || (v26 = v25, v27 = CFGetTypeID(v25), v27 != CFStringGetTypeID()) || (v28 = CFURLCreateWithString(v16, v26, 0)) == 0)
      {
LABEL_62:
        OUTLINED_FUNCTION_40_0();
        OUTLINED_FUNCTION_1_185();
        goto LABEL_65;
      }

      v29 = v28;
      v30 = CFURLCopyHostName(v28);
      if (!v30)
      {
        break;
      }

      CFRelease(v30);
      CFArrayAppendValue(theArray, v29);
      CFRelease(v29);
      v31 = CFDictionaryGetValue(ValueAtIndex, @"DURATION");
      if (!v31)
      {
        goto LABEL_62;
      }

      v32 = v31;
      v33 = CFGetTypeID(v31);
      if (v33 != CFNumberGetTypeID())
      {
        goto LABEL_62;
      }

      Mutable = v22;
      CFArrayAppendValue(v22, v32);
      if (v20 == ++v21)
      {
        goto LABEL_15;
      }
    }

    CFRelease(v29);
    OUTLINED_FUNCTION_40_0();
    OUTLINED_FUNCTION_1_185();
LABEL_65:
    v53 = FigSignalErrorAtGM();
    Copy = 0;
    v47 = theArray;
    Mutable = v22;
    goto LABEL_53;
  }

LABEL_15:
  v34 = CFDictionaryGetValue(v66, @"SKIP-CONTROL");
  if (!v34)
  {
    Copy = 0;
    v42 = v56;
    v41 = v57;
LABEL_31:
    v47 = theArray;
    if (a2)
    {
      if (theArray)
      {
        v48 = CFRetain(theArray);
      }

      else
      {
        v48 = 0;
      }

      *a2 = v48;
    }

    if (a3)
    {
      if (Mutable)
      {
        v49 = CFRetain(Mutable);
      }

      else
      {
        v49 = 0;
      }

      *a3 = v49;
    }

    if (v42)
    {
      v50 = v66;
      if (v66)
      {
        v50 = CFRetain(v66);
      }

      *v42 = v50;
    }

    if (v41)
    {
      v51 = *&v65.start.epoch;
      *v41 = *&v65.start.value;
      v41[1] = v51;
      v41[2] = *&v65.duration.timescale;
    }

    if (v58)
    {
      if (Copy)
      {
        v52 = CFRetain(Copy);
      }

      else
      {
        v52 = 0;
      }

      v53 = 0;
      *v58 = v52;
    }

    else
    {
      v53 = 0;
    }

    goto LABEL_53;
  }

  v35 = v34;
  v36 = CFGetTypeID(v34);
  if (v36 == CFDictionaryGetTypeID())
  {
    v37 = CFDictionaryGetValue(v35, @"OFFSET");
    v38 = CFDictionaryGetValue(v35, @"DURATION");
    v39 = CFDictionaryGetValue(v35, @"LABEL-ID");
    v64 = **&MEMORY[0x1E6960C70];
    v63 = v64;
    if (v39)
    {
      Copy = CFStringCreateCopy(v16, v39);
    }

    else
    {
      Copy = 0;
    }

    a2 = v59;
    if (!v37)
    {
      goto LABEL_30;
    }

    v43 = CFGetTypeID(v37);
    if (v43 == CFNumberGetTypeID())
    {
      FigCFNumberGetFloat64();
      if (v44 >= 0.0)
      {
        CMTimeMakeWithSeconds(&v64, v44, 1000000);
        if (!v38)
        {
          v63 = **&MEMORY[0x1E6960C88];
          goto LABEL_29;
        }

        v45 = CFGetTypeID(v38);
        if (v45 == CFNumberGetTypeID())
        {
          FigCFNumberGetFloat64();
          if (v46 >= 0.0)
          {
            CMTimeMakeWithSeconds(&v63, v46, 1000000);
LABEL_29:
            start = v64;
            duration = v63;
            CMTimeRangeMake(&v65, &start, &duration);
LABEL_30:
            v42 = v56;
            v41 = v57;
            a3 = v55;
            goto LABEL_31;
          }
        }
      }
    }

    v47 = theArray;
    OUTLINED_FUNCTION_40_0();
    OUTLINED_FUNCTION_1_185();
    v53 = FigSignalErrorAtGM();
  }

  else
  {
    OUTLINED_FUNCTION_40_0();
    OUTLINED_FUNCTION_1_185();
    v53 = FigSignalErrorAtGM();
    Copy = 0;
    v47 = theArray;
  }

LABEL_53:
  if (v47)
  {
    CFRelease(v47);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

LABEL_57:
  if (v66)
  {
    CFRelease(v66);
  }

  if (Copy)
  {
    CFRelease(Copy);
  }

  return v53;
}

uint64_t FigInterstitialCreatePropertyListsFromJSONBlockBuffer(CMBlockBufferRef sourceBuffer, CFTypeRef *a2, CFTypeRef *a3, CMTimeValue *a4, _OWORD *a5, CFTypeRef *a6)
{
  blockBufferOut = 0;
  if (!sourceBuffer)
  {
    CFDataWithBlockBufferNoCopy = FigSignalErrorAtGM();
LABEL_8:
    v12 = CFDataWithBlockBufferNoCopy;
    goto LABEL_9;
  }

  if (a2 || a3 || !a4)
  {
    CFDataWithBlockBufferNoCopy = CMBlockBufferCreateContiguous(*MEMORY[0x1E695E480], sourceBuffer, *MEMORY[0x1E695E480], 0, 0, 0, 0, &blockBufferOut);
    if (!CFDataWithBlockBufferNoCopy)
    {
      CFDataWithBlockBufferNoCopy = FigCreateCFDataWithBlockBufferNoCopy();
      if (!CFDataWithBlockBufferNoCopy)
      {
        CFDataWithBlockBufferNoCopy = FigInterstitialCreatePropertyListsFromJSONData(0, a2, a3, a4, a5, a6);
      }
    }

    goto LABEL_8;
  }

  v12 = 0;
LABEL_9:
  if (blockBufferOut)
  {
    CFRelease(blockBufferOut);
  }

  return v12;
}

BOOL FPSupport_ItemReadyToDisplayVideoLatch(int a1, int a2, _BYTE *a3, _BYTE *a4)
{
  result = 0;
  if (a3 && a4)
  {
    switch(a1)
    {
      case 0:
        if (!*a4 && !*a3)
        {
          goto LABEL_10;
        }

        result = 1;
        break;
      case 1:
      case 4:
        result = 0;
        *a4 = 0;
        *a3 = 0;
        break;
      case 2:
        *a4 = 1;
        goto LABEL_12;
      case 3:
        *a3 = 1;
LABEL_12:
        result = a2 != 0;
        break;
      default:
LABEL_10:
        result = 0;
        break;
    }
  }

  return result;
}

uint64_t FigAudioSessionIsRelatedSession(uint64_t a1, uint64_t a2)
{
  v2 = 0;
  cf = 0;
  if (a1 && a2)
  {
    v5 = *(CMBaseObjectGetVTable() + 16);
    if (v5)
    {
      v6 = v5;
    }

    else
    {
      v6 = 0;
    }

    v7 = *(CMBaseObjectGetVTable() + 16);
    if (v7 && (v8 = *(v7 + 16)) != 0 && !v8(a2, @"FAS_AudioSessionID", *MEMORY[0x1E695E480], &cf) && (v9 = *(v6 + 96)) != 0)
    {
      SInt32 = FigCFNumberGetSInt32();
      v2 = v9(a1, SInt32);
    }

    else
    {
      v2 = 0;
    }

    if (cf)
    {
      CFRelease(cf);
    }
  }

  return v2;
}

uint64_t FigNeroSetup(uint64_t a1, CFDictionaryRef theDict)
{
  v23 = *MEMORY[0x1E69E9840];
  v22 = 0;
  if (theDict)
  {
    Value = CFDictionaryGetValue(theDict, @"TransportConnection");
    v5 = Value;
    if (Value)
    {
      CFRetain(Value);
    }
  }

  else
  {
    v5 = 0;
  }

  *(a1 + 120) = 1;
  v6 = *MEMORY[0x1E695E480];
  started = NeroTransportCreate();
  if (started || (FigTransportSetSharedTransport(), *(a1 + 122) = 0, *(a1 + 128) = dispatch_semaphore_create(0), FigTransportGetLocalRootObject(), cf[6] = MEMORY[0x1E69E9820], cf[7] = 0x40000000, cf[8] = __FigNeroSetup_block_invoke, cf[9] = &__block_descriptor_tmp_50_0, cf[10] = a1, cf[1] = MEMORY[0x1E69E9820], cf[2] = 0x40000000, cf[3] = __FigNeroSetup_block_invoke_2, cf[4] = &__block_descriptor_tmp_52_1, cf[5] = a1, started = NeroTransportRegisterObject(), started) || *(a1 + 120) && (started = NeroTransportStartAcceptingConnections(), started))
  {
    v8 = started;
    v9 = 0;
    goto LABEL_8;
  }

  Mutable = CFArrayCreateMutable(v6, 0, 0);
  *(a1 + 152) = 0;
  *(a1 + 144) = Mutable;
  FigCFDictionaryGetBooleanIfPresent();
  if (theDict && (v12 = CFDictionaryGetValue(theDict, @"RenderDestination"), FigCFDictionaryGetBooleanIfPresent(), FigCFDictionaryGetBooleanIfPresent(), FigCFDictionaryGetBooleanIfPresent(), v12))
  {
    v13 = CFGetTypeID(v12);
    if (v13 == FigLayerViewGetTypeID())
    {
      cf[0] = 0;
      *(a1 + 160) = CFRetain(v12);
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_1_186();
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_0_203();
      CMBaseObject = FigLayerViewGetCMBaseObject(*(a1 + 160));
      v15 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v15)
      {
        v15(CMBaseObject, @"DisplayInfo", v6, cf);
        if (cf[0])
        {
          DefaultLocalCenter = CMNotificationCenterGetDefaultLocalCenter();
          nero_displayWasAttached(DefaultLocalCenter, a1, v17, v18, cf[0]);
          os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
          os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
          fig_log_call_emit_and_clean_up_after_send_and_compose();
          if (cf[0])
          {
            CFRelease(cf[0]);
          }
        }
      }
    }

    v9 = 0;
  }

  else
  {
    v9 = CFDictionaryCreateMutable(v6, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    CFDictionarySetValue(v9, @"StartImmediately", *MEMORY[0x1E695E4C0]);
    v20 = FigToolViewCreateWithOptions(v6, v9, (a1 + 104), 0);
    if (v20)
    {
      goto LABEL_30;
    }

    CMNotificationCenterGetDefaultLocalCenter();
    OUTLINED_FUNCTION_1_186();
    CMNotificationCenterGetDefaultLocalCenter();
    OUTLINED_FUNCTION_0_203();
    v20 = FigToolViewStart(*(a1 + 104));
    if (v20)
    {
      goto LABEL_30;
    }
  }

  if (HIBYTE(v22) || (v20 = FigNeroPlayServerCreate(v6, *(a1 + 32), *(a1 + 168), *(a1 + 24), v22, (a1 + 112)), !v20))
  {
    *(a1 + 122) = 1;
    dispatch_semaphore_signal(*(a1 + 128));
    v8 = 0;
    goto LABEL_8;
  }

LABEL_30:
  v8 = v20;
LABEL_8:
  if (v5)
  {
    CFRelease(v5);
  }

  if (v9)
  {
    CFRelease(v9);
  }

  return v8;
}

uint64_t FigNeroStart(CFDictionaryRef theDict)
{
  if (qword_1ED4CBB20 != -1)
  {
    dispatch_once(&qword_1ED4CBB20, &__block_literal_global_132);
  }

  v2 = _MergedGlobals_136;

  return FigNeroSetup(v2, theDict);
}

__CFDictionary *FigNeroCopyPerformanceDictionary()
{
  value = 0;
  if (qword_1ED4CBB20 != -1)
  {
    dispatch_once(&qword_1ED4CBB20, &__block_literal_global_132);
  }

  v0 = _MergedGlobals_136;
  if (!*(_MergedGlobals_136 + 121))
  {
    return 0;
  }

  v1 = *MEMORY[0x1E695E480];
  Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (Mutable)
  {
    v3 = *(v0 + 144);
    if (v3)
    {
      if (CFArrayGetCount(v3) >= 1 && CFArrayGetCount(*(v0 + 144)) == 1)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(*(v0 + 144), 0);
        if (ValueAtIndex)
        {
          v5 = ValueAtIndex;
          v6 = ValueAtIndex[2];
          if (v6)
          {
            FigBaseObject = FigRenderPipelineGetFigBaseObject(v6);
            v8 = *(*(CMBaseObjectGetVTable() + 8) + 48);
            if (v8)
            {
              if (!v8(FigBaseObject, @"PerformanceDictionary", v1, &value))
              {
                if (value)
                {
                  CFDictionarySetValue(Mutable, @"Video Perf Dict", value);
                  CFRelease(value);
                }

                FigCFDictionarySetInt64();
                v9 = v5[13];
                if (v9)
                {
                  CFDictionarySetValue(Mutable, @"Video Format Desc", v9);
                }
              }
            }
          }
        }
      }
    }
  }

  return Mutable;
}

void nrp_setMinImageBounds(uint64_t a1, CFDictionaryRef theDict)
{
  Value = CFDictionaryGetValue(theDict, @"DisplaySize");
  v12 = 0uLL;
  if (FigCGSizeMakeWithDictionaryRepresentation(Value, &v12))
  {
    __asm { FMOV            V1.2D, #0.25 }

    v12 = vmulq_f64(v12, _Q1);
    DictionaryRepresentation = FigCGSizeCreateDictionaryRepresentation(v12.f64[0], v12.f64[1]);
    FigBaseObject = FigRenderPipelineGetFigBaseObject(a1);
    v11 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (v11)
    {
      v11(FigBaseObject, @"MinImageBounds", DictionaryRepresentation);
    }

    if (DictionaryRepresentation)
    {
      CFRelease(DictionaryRepresentation);
    }
  }
}

void nero_relinquishNeroTimebase(void *a1, uint64_t a2)
{
  if (a1)
  {
    CFRetain(a1);
    v4 = a1[12];
    v5[0] = MEMORY[0x1E69E9820];
    v5[1] = 0x40000000;
    v5[2] = __nero_relinquishNeroTimebase_block_invoke;
    v5[3] = &__block_descriptor_tmp_117_2;
    v5[4] = a1;
    v5[5] = a2;
    dispatch_async(v4, v5);
  }
}

uint64_t FigNeroCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNeroCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void __nero_displayWasAttached_block_invoke_cold_1(uint64_t a1, uint64_t a2)
{
  v4 = 0;
  do
  {
    ValueAtIndex = CFArrayGetValueAtIndex(*(*a1 + 144), v4);
    nrp_setMinImageBounds(ValueAtIndex[2], *(*a1 + 136));
    ++v4;
  }

  while (a2 != v4);
}

uint64_t fvdsr_handleServerMessage()
{
  v31 = *MEMORY[0x1E69E9840];
  CMBaseObjectGetDerivedStorage();
  HIDWORD(v17) = 0;
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
    v10 = OpCode;
    OUTLINED_FUNCTION_2_180();
    OUTLINED_FUNCTION_10_48();
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    v12 = os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, type);
    if (OUTLINED_FUNCTION_124_0(v12))
    {
      LODWORD(sampleTiming.duration.value) = 136315650;
      OUTLINED_FUNCTION_12_70();
      OUTLINED_FUNCTION_7_101();
      OUTLINED_FUNCTION_44_0();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_0_204();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  else
  {
    OUTLINED_FUNCTION_2_180();
    OUTLINED_FUNCTION_10_48();
    v1 = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    v9 = OUTLINED_FUNCTION_16_54(v1, v2, v3, v4, v5, v6, v7, v8, v14, v15, cf, v17, type, type_8, v21, v22, theAttachments, length, sampleBufferOut, pixelBufferOut, v27, formatDescriptionOut, v29);
    if (OUTLINED_FUNCTION_77_0(v9))
    {
      LODWORD(sampleTiming.duration.value) = 136316162;
      *(&sampleTiming.duration.value + 4) = "fvdsr_handleServerMessage";
      LOWORD(sampleTiming.duration.flags) = 1024;
      *(&sampleTiming.duration.flags + 2) = HIBYTE(v18);
      WORD1(sampleTiming.duration.epoch) = 1024;
      HIDWORD(sampleTiming.duration.epoch) = BYTE2(v18);
      LOWORD(sampleTiming.presentationTimeStamp.value) = 1024;
      *(&sampleTiming.presentationTimeStamp.value + 2) = BYTE1(v18);
      HIWORD(sampleTiming.presentationTimeStamp.value) = 1024;
      sampleTiming.presentationTimeStamp.timescale = v18;
      OUTLINED_FUNCTION_44_0();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_0_204();
    OUTLINED_FUNCTION_420();
    return 4294955226;
  }

  return v10;
}

uint64_t sessionCreateCommon_cold_1()
{
  v0 = OUTLINED_FUNCTION_1_31(*MEMORY[0x1E69E9840]);
  v8 = OUTLINED_FUNCTION_103_0(v0, v1, v2, v3, v4, v5, v6, v7, v11, v12, v13, v14, SWORD2(v14), SBYTE6(v14), HIBYTE(v14));
  if (OUTLINED_FUNCTION_77_0(v8))
  {
    OUTLINED_FUNCTION_2_25(v15, 4.8151e-34);
    OUTLINED_FUNCTION_8_7(v9);
    OUTLINED_FUNCTION_44_0();
    _os_log_send_and_compose_impl();
    OUTLINED_FUNCTION_192_0();
  }

  OUTLINED_FUNCTION_0_153();
  return OUTLINED_FUNCTION_420();
}

uint64_t sessionCreateCommon_cold_2()
{
  v0 = OUTLINED_FUNCTION_1_31(*MEMORY[0x1E69E9840]);
  v8 = OUTLINED_FUNCTION_103_0(v0, v1, v2, v3, v4, v5, v6, v7, v11, v12, v13, v14, SWORD2(v14), SBYTE6(v14), HIBYTE(v14));
  if (OUTLINED_FUNCTION_77_0(v8))
  {
    OUTLINED_FUNCTION_2_25(v15, 4.8151e-34);
    OUTLINED_FUNCTION_8_7(v9);
    OUTLINED_FUNCTION_44_0();
    _os_log_send_and_compose_impl();
    OUTLINED_FUNCTION_192_0();
  }

  OUTLINED_FUNCTION_0_153();
  return OUTLINED_FUNCTION_420();
}

uint64_t sessionCreateCommon_cold_3()
{
  v0 = OUTLINED_FUNCTION_1_31(*MEMORY[0x1E69E9840]);
  v8 = OUTLINED_FUNCTION_103_0(v0, v1, v2, v3, v4, v5, v6, v7, v11, v12, v13, v14, SWORD2(v14), SBYTE6(v14), HIBYTE(v14));
  if (OUTLINED_FUNCTION_77_0(v8))
  {
    OUTLINED_FUNCTION_2_25(v15, 4.8151e-34);
    OUTLINED_FUNCTION_8_7(v9);
    OUTLINED_FUNCTION_44_0();
    _os_log_send_and_compose_impl();
    OUTLINED_FUNCTION_192_0();
  }

  OUTLINED_FUNCTION_0_153();
  return OUTLINED_FUNCTION_420();
}

uint64_t FigVirtualDisplaySessionRemoteFrameReceiverCreate_cold_1()
{
  v0 = OUTLINED_FUNCTION_1_31(*MEMORY[0x1E69E9840]);
  v8 = OUTLINED_FUNCTION_103_0(v0, v1, v2, v3, v4, v5, v6, v7, v11, v12, v13, v14, SWORD2(v14), SBYTE6(v14), HIBYTE(v14));
  if (OUTLINED_FUNCTION_77_0(v8))
  {
    OUTLINED_FUNCTION_2_25(v15, 4.8151e-34);
    OUTLINED_FUNCTION_8_7(v9);
    OUTLINED_FUNCTION_44_0();
    _os_log_send_and_compose_impl();
    OUTLINED_FUNCTION_192_0();
  }

  OUTLINED_FUNCTION_0_153();
  return OUTLINED_FUNCTION_420();
}

uint64_t fvdsr_finalize_cold_1()
{
  v0 = OUTLINED_FUNCTION_1_31(*MEMORY[0x1E69E9840]);
  v8 = OUTLINED_FUNCTION_103_0(v0, v1, v2, v3, v4, v5, v6, v7, v11, v12, v13, v14, SWORD2(v14), SBYTE6(v14), HIBYTE(v14));
  if (OUTLINED_FUNCTION_77_0(v8))
  {
    OUTLINED_FUNCTION_2_25(v15, 4.8151e-34);
    OUTLINED_FUNCTION_8_7(v9);
    OUTLINED_FUNCTION_44_0();
    _os_log_send_and_compose_impl();
    OUTLINED_FUNCTION_192_0();
  }

  OUTLINED_FUNCTION_0_153();
  return OUTLINED_FUNCTION_420();
}

uint64_t sessionStart_cold_1()
{
  v0 = OUTLINED_FUNCTION_1_31(*MEMORY[0x1E69E9840]);
  v8 = OUTLINED_FUNCTION_103_0(v0, v1, v2, v3, v4, v5, v6, v7, v11, v12, v13, v14, SWORD2(v14), SBYTE6(v14), HIBYTE(v14));
  if (OUTLINED_FUNCTION_77_0(v8))
  {
    OUTLINED_FUNCTION_2_25(v15, 4.8151e-34);
    OUTLINED_FUNCTION_8_7(v9);
    OUTLINED_FUNCTION_44_0();
    _os_log_send_and_compose_impl();
    OUTLINED_FUNCTION_192_0();
  }

  OUTLINED_FUNCTION_0_153();
  return OUTLINED_FUNCTION_420();
}

uint64_t sessionResume_cold_1()
{
  v0 = OUTLINED_FUNCTION_1_31(*MEMORY[0x1E69E9840]);
  v8 = OUTLINED_FUNCTION_103_0(v0, v1, v2, v3, v4, v5, v6, v7, v11, v12, v13, v14, SWORD2(v14), SBYTE6(v14), HIBYTE(v14));
  if (OUTLINED_FUNCTION_77_0(v8))
  {
    OUTLINED_FUNCTION_2_25(v15, 4.8151e-34);
    OUTLINED_FUNCTION_8_7(v9);
    OUTLINED_FUNCTION_44_0();
    _os_log_send_and_compose_impl();
    OUTLINED_FUNCTION_192_0();
  }

  OUTLINED_FUNCTION_0_153();
  return OUTLINED_FUNCTION_420();
}

uint64_t rules_formatDescriptionContainsCollectableData(uint64_t a1, const opaqueCMFormatDescription *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = _os_feature_enabled_impl();
  if (result)
  {
    if (CMFormatDescriptionGetMediaType(a2) != 1835365473 || CMFormatDescriptionGetMediaSubType(a2) != 1835360888)
    {
      return 0;
    }

    CMMetadataFormatDescriptionGetIdentifiers(a2);
    v5 = FigVideoFormatDescriptionContainsHDR();
    result = *(DerivedStorage + 8);
    if (!result)
    {
      return result;
    }

    Count = CFArrayGetCount(result);
    if (Count >= 1)
    {
      v7 = Count;
      v8 = 0;
      while (1)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(*(DerivedStorage + 8), v8);
        if (FigCFArrayContainsValue())
        {
          result = 1;
          if (!ValueAtIndex[24] || v5)
          {
            break;
          }
        }

        if (v7 == ++v8)
        {
          return 0;
        }
      }
    }

    else
    {
      return 0;
    }
  }

  return result;
}

uint64_t rules_copyCollectableAttachmentsFromMetadataSample(const void *a1, opaqueCMSampleBuffer *a2, uint64_t a3, CFTypeRef *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  refcon = 0;
  cf = 0;
  v30 = 0;
  if (a4 && a2)
  {
    v8 = DerivedStorage;
    *a4 = 0;
    if (!_os_feature_enabled_impl())
    {
LABEL_17:
      v16 = 0;
      goto LABEL_18;
    }

    refcon = CFGetAllocator(a1);
    v9 = CFGetAllocator(a1);
    Mutable = CFDictionaryCreateMutable(v9, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    cf = Mutable;
    if (!CMSampleBufferGetNumSamples(a2))
    {
      goto LABEL_15;
    }

    FormatDescription = CMSampleBufferGetFormatDescription(a2);
    if (FormatDescription && (v12 = FormatDescription, !FigCFEqual()))
    {
      v18 = *v8;
      *v8 = v12;
      CFRetain(v12);
      if (v18)
      {
        CFRelease(v18);
      }

      v19 = *(v8 + 8);
      if (v19 && (Count = CFArrayGetCount(v19), Count >= 1))
      {
        v21 = Count;
        v14 = 0;
        for (i = 0; i != v21; ++i)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(*(v8 + 8), i);
          FirstLocalIDForIdentifier = FigMetadataFormatDescriptionGetFirstLocalIDForIdentifier();
          if (FirstLocalIDForIdentifier)
          {
            v25 = FirstLocalIDForIdentifier;
            if (!v14)
            {
              v26 = CFGetAllocator(a1);
              v14 = CFArrayCreateMutable(v26, 0, MEMORY[0x1E695E9C0]);
            }

            ValueAtIndex[14] = v25;
            CFArrayAppendValue(v14, ValueAtIndex);
          }
        }

        v30 = v14;
        v27 = *(v8 + 16);
        *(v8 + 16) = v14;
        if (v14)
        {
          CFRetain(v14);
        }
      }

      else
      {
        v14 = 0;
        v27 = *(v8 + 16);
        *(v8 + 16) = 0;
      }

      if (v27)
      {
        CFRelease(v27);
      }
    }

    else
    {
      v13 = *(v8 + 16);
      v14 = v13 ? CFRetain(v13) : 0;
      v30 = v14;
    }

    if (!v14 || CFArrayGetCount(v14) < 1)
    {
LABEL_15:
      if (CFDictionaryGetCount(Mutable) >= 1)
      {
        v16 = 0;
        *a4 = cf;
        cf = 0;
        goto LABEL_18;
      }

      goto LABEL_17;
    }

    v15 = CMSampleBufferCallForEachSample(a2, rules_collectAttachmentFromMetadata, &refcon);
    if (!v15)
    {
      Mutable = cf;
      goto LABEL_15;
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    v15 = FigSignalErrorAtGM();
  }

  v16 = v15;
LABEL_18:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v30)
  {
    CFRelease(v30);
  }

  return v16;
}

uint64_t rules_copyCollectedAttachmentsFromVideoSampleBuffer(const void *a1, uint64_t a2, __CFDictionary **a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (_os_feature_enabled_impl())
  {
    v7 = CFGetAllocator(a1);
    Mutable = CFDictionaryCreateMutable(v7, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    v9 = *(DerivedStorage + 8);
    if (v9)
    {
      Count = CFArrayGetCount(v9);
      if (Count >= 1)
      {
        v11 = Count;
        for (i = 0; i != v11; ++i)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(*(DerivedStorage + 8), i);
          v14 = OUTLINED_FUNCTION_2_181(ValueAtIndex);
          if (v14)
          {
            CFDictionarySetValue(Mutable, *(v3 + 32), v14);
          }
        }
      }
    }

    *a3 = Mutable;
  }

  return 0;
}

uint64_t rules_copyRelevantAttachmentsFromVideoSampleBuffer(const void *a1, uint64_t a2, __CFDictionary **a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (_os_feature_enabled_impl())
  {
    v7 = CFGetAllocator(a1);
    Mutable = CFDictionaryCreateMutable(v7, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    v9 = *(DerivedStorage + 8);
    if (v9)
    {
      Count = CFArrayGetCount(v9);
      if (Count >= 1)
      {
        v11 = Count;
        for (i = 0; i != v11; ++i)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(*(DerivedStorage + 8), i);
          v14 = OUTLINED_FUNCTION_2_181(ValueAtIndex);
          if (v14)
          {
            CFDictionarySetValue(Mutable, *(v3 + 32), v14);
          }
        }
      }
    }

    *a3 = Mutable;
  }

  return 0;
}

uint64_t rules_attachMetadataToPixelBuffer(uint64_t a1, const __CFDictionary *a2, __CVBuffer *a3)
{
  if (a1 && a2 && a3)
  {
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    if (_os_feature_enabled_impl())
    {
      v6 = *(DerivedStorage + 8);
      if (v6)
      {
        Count = CFArrayGetCount(v6);
        if (Count >= 1)
        {
          v8 = Count;
          for (i = 0; i != v8; ++i)
          {
            ValueAtIndex = CFArrayGetValueAtIndex(*(DerivedStorage + 8), i);
            Value = CFDictionaryGetValue(a2, *(ValueAtIndex + 4));
            if (Value)
            {
              CVBufferSetAttachment(a3, *(ValueAtIndex + 5), Value, kCVAttachmentMode_ShouldPropagate);
            }
          }
        }
      }
    }

    return 0;
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();

    return FigSignalErrorAtGM();
  }
}

uint64_t rules_collectAttachmentFromMetadata(opaqueCMSampleBuffer *a1, uint64_t a2, uint64_t a3)
{
  CMSampleBufferGetDataBuffer(a1);
  CMSampleBufferGetFormatDescription(a1);
  v5 = FigBoxedMetadataCreateFromBlockBuffer();
  if (v5)
  {
    return v5;
  }

  NumberOfItems = FigBoxedMetadataGetNumberOfItems();
  v7 = *(a3 + 16);
  if (v7)
  {
    Count = CFArrayGetCount(v7);
  }

  else
  {
    Count = 0;
  }

  if (NumberOfItems >= 1)
  {
    v9 = 0;
    while (Count < 1)
    {
LABEL_12:
      if (++v9 == NumberOfItems)
      {
        return 0;
      }
    }

    v10 = 0;
    while (1)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(*(a3 + 16), v10);
      v12 = ValueAtIndex[14];
      if (v12 == FigBoxedMetadataGetLocalIDOfItemAtIndex())
      {
        v5 = (*(ValueAtIndex + 6))(*a3, a1, 0, v9, *(ValueAtIndex + 4), *(a3 + 8));
        if (v5)
        {
          return v5;
        }
      }

      if (Count == ++v10)
      {
        goto LABEL_12;
      }
    }
  }

  return 0;
}

uint64_t rules_SampleAttachmentCollectionRulesCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t rules_SampleAttachmentCollectionRulesCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t rules_SampleAttachmentCollectionRulesCreate_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t rules_SampleAttachmentCollectionRulesCreate_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t rules_SampleAttachmentCollectionRulesCreate_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t rules_SampleAttachmentCollectionRulesCreate_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigEndpointStreamAudioEngineXPCRemoteRetainCopiedAudioEngine(uint64_t a1, CFTypeRef *a2)
{
  cf = 0;
  if (a1 && a2)
  {
    v4 = FigEndpointStreamAudioEngineRemoteXPC_ensureClientEstablished();
    if (v4)
    {
      return v4;
    }

    v5 = FigXPCRemoteClientRetainCopiedObject();
    v6 = cf;
    if (v5 || (v5 = remoteXPCAudioEngine_CreateInternal(a1, &cf), v6 = cf, v5))
    {
      if (v6)
      {
        CFRelease(v6);
      }
    }

    else
    {
      v5 = 0;
      *a2 = cf;
    }

    return v5;
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }
}

uint64_t FigEndpointStreamAudioEngineXPCRemoteCopyAudioEngineFromEndpointStream(uint64_t a1, CFTypeRef *a2)
{
  FigEndpointStreamAudioEngineRemoteXPC_ensureClientEstablished();
  ObjectID = FigEndpointStreamXPCRemoteGetObjectID();
  if (!ObjectID)
  {
    ObjectID = FigXPCCreateBasicMessage();
    if (!ObjectID)
    {
      xpc_dictionary_set_uint64(0, "StreamObjectID", 0);
      ObjectID = FigXPCRemoteClientSendSyncMessageCreatingReply();
      if (!ObjectID)
      {
        uint64 = xpc_dictionary_get_uint64(0, "AudioEngineObjectID");
        ObjectID = FigEndpointStreamAudioEngineXPCRemoteRetainCopiedAudioEngine(uint64, a2);
      }
    }
  }

  v5 = ObjectID;
  FigXPCRelease();
  FigXPCRelease();
  return v5;
}

uint64_t remoteXPCAudioEngineClient_HandleClientMessage()
{
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
    return OpCode;
  }

  else
  {
    return 4294951815;
  }
}

void FigEndpointStreamAudioEngineRemoteXPC_Finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v1 = CMBaseObjectGetDerivedStorage();
  FigXPCRemoteClientDisassociateObject();
  if (!*v1 && !FigXPCCreateBasicMessage())
  {
    FigXPCRemoteClientSendSyncMessage();
  }

  FigXPCRelease();
  v2 = *(DerivedStorage + 24);
  if (v2)
  {
    CFRelease(v2);
  }

  v3 = *(DerivedStorage + 16);
  if (v3)
  {
    dispatch_release(v3);
  }
}

uint64_t FigEndpointStreamAudioEngineRemoteXPC_SetProperty(uint64_t a1)
{
  v4 = 0;
  ObjectID = remoteXPCAudioEngine_GetObjectID(a1, &v4);
  if (!ObjectID)
  {
    ObjectID = FigXPCSendStdSetPropertyMessage();
  }

  v2 = ObjectID;
  FigXPCRelease();
  return v2;
}

uint64_t FigEndpointStreamAudioEngineRemoteXPC_Flush(uint64_t a1)
{
  v5[0] = 0;
  v5[1] = 0;
  ObjectID = remoteXPCAudioEngine_GetObjectID(a1, v5);
  if (ObjectID)
  {
    v3 = ObjectID;
  }

  else
  {
    v2 = FigXPCCreateBasicMessage();
    if (v2 || (v2 = FigXPCMessageSetCFDictionary(), v2))
    {
      v3 = v2;
    }

    else
    {
      v3 = FigXPCRemoteClientSendSyncMessage();
    }
  }

  FigXPCRelease();
  return v3;
}

uint64_t FigEndpointStreamAudioEngineRemoteXPC_FlushWithinSampleRange(uint64_t a1)
{
  v5[0] = 0;
  v5[1] = 0;
  ObjectID = remoteXPCAudioEngine_GetObjectID(a1, v5);
  if (ObjectID)
  {
    v3 = ObjectID;
  }

  else
  {
    v2 = FigXPCCreateBasicMessage();
    if (v2 || (v2 = FigXPCMessageSetCMTimeRange(), v2))
    {
      v3 = v2;
    }

    else
    {
      v3 = FigXPCRemoteClientSendSyncMessage();
    }
  }

  FigXPCRelease();
  return v3;
}

uint64_t FigEndpointStreamAudioEngineRemoteXPC_SetEndOfSiriTTSUtteranceMediaTime(uint64_t a1)
{
  v5[1] = 0;
  v5[0] = 0;
  ObjectID = remoteXPCAudioEngine_GetObjectID(a1, v5);
  if (ObjectID)
  {
    v3 = ObjectID;
  }

  else
  {
    v2 = FigXPCCreateBasicMessage();
    if (v2 || (v2 = FigXPCMessageSetCMTime(), v2))
    {
      v3 = v2;
    }

    else
    {
      v3 = FigXPCRemoteClientSendSyncMessage();
    }
  }

  FigXPCRelease();
  return v3;
}

uint64_t FigEndpointStreamAudioEngineRemoteXPC_ApplyVolumeFade(uint64_t a1, unsigned int a2)
{
  v7 = 0;
  xdict = 0;
  ObjectID = remoteXPCAudioEngine_GetObjectID(a1, &v7);
  if (ObjectID)
  {
    v5 = ObjectID;
  }

  else
  {
    v4 = FigXPCCreateBasicMessage();
    if (v4 || (xpc_dictionary_set_uint64(xdict, "VolumeFadeType", a2), v4 = FigXPCMessageSetCMTime(), v4))
    {
      v5 = v4;
    }

    else
    {
      v5 = FigXPCRemoteClientSendSyncMessage();
    }
  }

  FigXPCRelease();
  return v5;
}

uint64_t FigEndpointStreamAudioEngineRemoteXPC_tryRemoveCallback(uint64_t a1, uint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v7 = 0;
  v8 = &v7;
  v9 = 0x2000000000;
  v10 = 0;
  if (a2)
  {
    v4 = *(DerivedStorage + 16);
    block[0] = MEMORY[0x1E69E9820];
    block[1] = 0x40000000;
    block[2] = __FigEndpointStreamAudioEngineRemoteXPC_tryRemoveCallback_block_invoke;
    block[3] = &unk_1E7496F60;
    block[5] = DerivedStorage;
    block[6] = a2;
    block[4] = &v7;
    dispatch_sync(v4, block);
    a2 = *(v8 + 24);
  }

  _Block_object_dispose(&v7, 8);
  return a2;
}

void *remoteXPCAudioEngine_cloneCompletionCallback(uint64_t a1, _OWORD *a2)
{
  v3 = MEMORY[0x19A8CC720](a1, 32, 0x10A0040E75FE15ALL, 0);
  v4 = v3;
  if (v3)
  {
    v5 = a2[1];
    *v3 = *a2;
    v3[1] = v5;
    v6 = *v3;
    if (*v4)
    {
      CFRetain(v6);
    }
  }

  return v4;
}

uint64_t remoteXPCAudioEngine_GetObjectID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL FigEndpointStreamAudioEngineRemoteXPC_Resume_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

uint64_t EnsureUUID_1(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 96))
  {
    return 0;
  }

  v3 = DerivedStorage;
  v4 = CFGetAllocator(a1);
  v5 = CFUUIDCreate(v4);
  if (v5)
  {
    v6 = v5;
    v7 = CFGetAllocator(a1);
    v8 = CFUUIDCreateString(v7, v6);
    *(v3 + 96) = v8;
    if (v8)
    {
      v9 = 0;
    }

    else
    {
      OUTLINED_FUNCTION_303();
      v9 = FigSignalErrorAtGM();
    }

    CFRelease(v6);
    return v9;
  }

  OUTLINED_FUNCTION_303();

  return FigSignalErrorAtGM();
}

uint64_t FigPKDMSECPELimitedCryptorCreate(uint64_t a1, uint64_t a2, void *a3)
{
  v3 = 4294955146;
  if (a1 && a3)
  {
    MEMORY[0x19A8D3660](&FigPKDMSECPECryptorGetClassID_sRegisterFigPKDMSECPECryptorTypeOnce, RegisterFigPKDMSECPECryptorType);
    v6 = CMDerivedObjectCreate();
    if (v6)
    {
      return v6;
    }

    else
    {
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      if (DerivedStorage && (v8 = DerivedStorage, v9 = FigReadWriteLockCreate(), (*(v8 + 16) = v9) != 0))
      {
        v3 = 0;
        *(v8 + 24) = a1;
        *a3 = 0;
      }

      else
      {
        return 4294955145;
      }
    }
  }

  return v3;
}

uint64_t FigPKDMSECPELimitedCryptorCreateWithExternalProtectionMethods(uint64_t a1, int a2, uint64_t a3, void *a4)
{
  v6 = FigPKDMSECPELimitedCryptorCreate(a1, a3, a4);
  v7 = v6;
  if (a4 && !v6)
  {
    *(CMBaseObjectGetDerivedStorage() + 48) = a2;
  }

  return v7;
}

uint64_t FigPKDMSECPECryptorCopyProperty(const void *a1, const void *a2, uint64_t a3, uint64_t *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v10 = 4294955146;
  if (a2 && a4)
  {
    OUTLINED_FUNCTION_2_182(DerivedStorage);
    FigReadWriteLockLockForRead();
    if (*(v4 + 24))
    {
      OUTLINED_FUNCTION_6_4();
      if (v12)
      {
        v10 = 4294954511;
      }

      else
      {
        v10 = v11;
      }

      goto LABEL_19;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961098]))
    {
      v10 = 4294951076;
LABEL_19:
      FigReadWriteLockUnlockForRead();
      return v10;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961118]))
    {
      v13 = OUTLINED_FUNCTION_9_79();
      IsDecryptContextAvailableForKeyID = PKDKeyManagerIsDecryptContextAvailableForKeyID(v13, v14);
LABEL_13:
      v18 = MEMORY[0x1E695E4D0];
      if (IsDecryptContextAvailableForKeyID)
      {
        v18 = MEMORY[0x1E695E4C0];
      }

      UInt32 = *v18;
LABEL_16:
      UInt32 = CFRetain(UInt32);
LABEL_17:
      v10 = 0;
LABEL_18:
      *a4 = UInt32;
      goto LABEL_19;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961110]))
    {
      v16 = OUTLINED_FUNCTION_9_79();
      IsDecryptContextAvailableForKeyID = PKDKeyManagerIsReadyToCreateKeyRequestForKeyID(v16, v17);
      goto LABEL_13;
    }

    if (CFEqual(a2, *MEMORY[0x1E69610E0]))
    {
      v21 = *(v4 + 32);
      if (!v21)
      {
        v10 = 0;
        goto LABEL_19;
      }
    }

    else
    {
      if (CFEqual(a2, *MEMORY[0x1E69610E8]))
      {
        v28 = 0;
        v23 = OUTLINED_FUNCTION_9_79();
        KeyRequestStateAndID = PKDKeyManagerGetKeyRequestStateAndID(v23, v24, &v28, 0);
        if (!KeyRequestStateAndID)
        {
          SInt32 = FigCFNumberCreateSInt32();
          *a4 = SInt32;
          if (SInt32)
          {
            v10 = 0;
          }

          else
          {
            v10 = 4294949725;
          }

          goto LABEL_19;
        }

        goto LABEL_24;
      }

      if (CFEqual(a2, *MEMORY[0x1E6961120]))
      {
        v21 = *(v4 + 32);
        if (!v21)
        {
          EnsureRequiredExternalProtectionMethod_0(a1);
          v10 = v26;
          if (v26)
          {
            goto LABEL_19;
          }

          UInt32 = FigCFNumberCreateUInt32();
          goto LABEL_18;
        }
      }

      else
      {
        if (!CFEqual(a2, *MEMORY[0x1E6961138]) && !CFEqual(a2, *MEMORY[0x1E69610F8]) && !CFEqual(a2, *MEMORY[0x1E69610F0]))
        {
          if (CFEqual(a2, *MEMORY[0x1E69610C0]))
          {
            Methods = FigCPEExternalProtectionMonitorGetMethods(*(v4 + 56));
            UInt32 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt64Type, &Methods);
            goto LABEL_17;
          }

          if (CFEqual(a2, *MEMORY[0x1E69610D8]) || CFEqual(a2, *MEMORY[0x1E69610C8]))
          {
            v10 = 4294954509;
            goto LABEL_19;
          }

          if (CFEqual(a2, @"DisplayList") && *(v4 + 64))
          {
            KeyRequestStateAndID = FigCPEExternalProtectionMonitorCopyProperty(*(v4 + 56), @"DisplayList", a3, a4);
            goto LABEL_24;
          }

          if (CFEqual(a2, *MEMORY[0x1E6961130]))
          {
            KeyRequestStateAndID = EnsureUUID_1(a1);
            if (!KeyRequestStateAndID)
            {
              UInt32 = *(v4 + 96);
              if (!UInt32)
              {
                goto LABEL_17;
              }

              goto LABEL_16;
            }

LABEL_24:
            v10 = KeyRequestStateAndID;
            goto LABEL_19;
          }

          if (CFEqual(a2, *MEMORY[0x1E69610B0]))
          {
            KeyRequestStateAndID = CopyCurrentRequestID_1(v4, a4);
            goto LABEL_24;
          }

          if (CFEqual(a2, *MEMORY[0x1E69610A8]))
          {
            UInt32 = *(v4 + 104);
            if (!UInt32)
            {
              goto LABEL_17;
            }

            goto LABEL_16;
          }

          if (!CFEqual(a2, *MEMORY[0x1E69610B8]))
          {
            if (!*v4)
            {
              v10 = 4294954512;
              goto LABEL_19;
            }

            KeyRequestStateAndID = CMBaseObjectCopyProperty(*v4, a2, a3, a4);
            goto LABEL_24;
          }
        }

        v21 = *(v4 + 32);
      }
    }

    KeyRequestStateAndID = PKDKeyManagerCopyPropertyForKeyID(v21, *(v4 + 96), a2, a4);
    goto LABEL_24;
  }

  return v10;
}

uint64_t FigPKDMSECPECryptorSetProperty(uint64_t a1, const void *a2, const void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v3 + 24))
  {
    OUTLINED_FUNCTION_6_4();
    if (v9)
    {
      v10 = 4294954511;
    }

    else
    {
      v10 = v8;
    }

    goto LABEL_28;
  }

  if (!CFEqual(a2, *MEMORY[0x1E69610C0]))
  {
    if (CFEqual(a2, *MEMORY[0x1E6961108]))
    {
      v17 = *(v3 + 80);
      *(v3 + 80) = a3;
      if (a3)
      {
        CFRetain(a3);
      }

      if (!v17)
      {
        goto LABEL_27;
      }

      v16 = v17;
LABEL_26:
      CFRelease(v16);
      goto LABEL_27;
    }

    if (!CFEqual(a2, *MEMORY[0x1E69610E0]))
    {
      if (CFEqual(a2, *MEMORY[0x1E6961138]))
      {
        goto LABEL_37;
      }

      if (!CFEqual(a2, *MEMORY[0x1E69610F0]))
      {
        if (CFEqual(a2, @"DisplayList") && *(v3 + 64))
        {
          v26 = FigCPEExternalProtectionMonitorSetProperty(*(v3 + 56), @"DisplayList", a3);
          if (v26 == -12152)
          {
            v10 = 0;
          }

          else
          {
            v10 = v26;
          }

          goto LABEL_28;
        }

        if (!*v3)
        {
          v10 = 4294954512;
          goto LABEL_28;
        }

        KeyRequestStateAndID = CMBaseObjectSetProperty(*v3, a2, a3);
        goto LABEL_38;
      }

      valuePtr = 0;
      v22 = OUTLINED_FUNCTION_9_79();
      KeyRequestStateAndID = PKDKeyManagerGetKeyRequestStateAndID(v22, v23, 0, &valuePtr);
      if (!KeyRequestStateAndID)
      {
LABEL_37:
        v24 = OUTLINED_FUNCTION_9_79();
        KeyRequestStateAndID = PKDKeyManagerSetPropertyForKeyID(v24, v25, a2, a3);
      }

LABEL_38:
      v10 = KeyRequestStateAndID;
      goto LABEL_28;
    }

    if (a3)
    {
      v19 = CFGetTypeID(a3);
      if (v19 == CFErrorGetTypeID())
      {
        v20 = OUTLINED_FUNCTION_9_79();
        KeyRequestStateAndID = PKDKeyManagerSetKeyRequestError(v20, v21, a3);
        goto LABEL_38;
      }
    }

LABEL_48:
    KeyRequestStateAndID = FigSignalErrorAtGM();
    goto LABEL_38;
  }

  valuePtr = 0;
  if (!a3)
  {
    goto LABEL_48;
  }

  v11 = CFGetTypeID(a3);
  if (v11 != CFNumberGetTypeID())
  {
    goto LABEL_48;
  }

  Methods = FigCPEExternalProtectionMonitorGetMethods(*(v3 + 56));
  CFNumberGetValue(a3, kCFNumberSInt64Type, &valuePtr);
  if ((valuePtr & ~Methods) != 0)
  {
    cf = 0;
    KeyRequestStateAndID = FigCPEExternalProtectionMonitorCreateForMethods(*MEMORY[0x1E695E480], valuePtr & ~Methods, 0, *(v3 + 56), &cf);
    if (!KeyRequestStateAndID)
    {
      v14 = *(v3 + 56);
      v15 = cf;
      if (v14 == cf)
      {
        goto LABEL_15;
      }

      KeyRequestStateAndID = AddWeakListenerOnExternalProtectionMonitor_0(a1, cf);
      if (!KeyRequestStateAndID)
      {
        KeyRequestStateAndID = RemoveWeakListenerOnExternalProtectionMonitor_0(a1, *(v3 + 56));
        if (!KeyRequestStateAndID)
        {
          v15 = cf;
          v14 = *(v3 + 56);
LABEL_15:
          *(v3 + 56) = v15;
          if (v15)
          {
            CFRetain(v15);
          }

          if (v14)
          {
            CFRelease(v14);
          }

          v16 = cf;
          if (!cf)
          {
            goto LABEL_27;
          }

          goto LABEL_26;
        }
      }
    }

    goto LABEL_38;
  }

LABEL_27:
  v10 = 0;
LABEL_28:
  FigReadWriteLockUnlockForRead();
  return v10;
}

void EnsureRequiredExternalProtectionMethod_0(uint64_t a1)
{
  v9 = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*(DerivedStorage + 72))
  {
    v3 = DerivedStorage;
    EnsureDecryptContext_0(a1);
    v4 = *(v3 + 48);
    if (v4)
    {
      if (!VCDDnY3lV491XcWac(v4, &v9))
      {
        OUTLINED_FUNCTION_12_71();
        if (v6)
        {
          v7 = 1;
        }

        else
        {
          v7 = 0;
        }

        if (v5 == 0x285A0863BBA8E1D3)
        {
          v8 = 2;
        }

        else
        {
          v8 = v7;
        }

        *(v3 + 68) = v8;
        *(v3 + 72) = 1;
      }
    }

    else
    {
      OUTLINED_FUNCTION_303();

      FigSignalErrorAtGM();
    }
  }
}

uint64_t CopyCurrentRequestID_1(uint64_t a1, uint64_t *a2)
{
  v5 = 0;
  result = PKDKeyManagerGetKeyRequestStateAndID(*(a1 + 32), *(a1 + 96), 0, &v5);
  if (!result)
  {
    SInt64 = FigCFNumberCreateSInt64();
    *a2 = SInt64;
    if (SInt64)
    {
      return 0;
    }

    else
    {
      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t EnsureDecryptContext_0(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = *(DerivedStorage + 48);
  DecryptContextForKeyID = PKDKeyManagerGetDecryptContextForKeyID(*(DerivedStorage + 32), *(DerivedStorage + 96), (DerivedStorage + 48));
  if (DecryptContextForKeyID)
  {
    return DecryptContextForKeyID;
  }

  v5 = *(DerivedStorage + 48);
  *(DerivedStorage + 73) = v3 == v5;
  if (v3 == v5)
  {
    return 0;
  }

  v16 = 0;
  v6 = VCDDnY3lV491XcWac(v5, &v16);
  if (v6)
  {
    v7 = v6;
LABEL_5:
    v8 = 2;
    goto LABEL_15;
  }

  if (v16 == 0xEF72894CA7895B78)
  {
    v8 = 0;
  }

  else if (v16 == 0x285A0863BBA8E1D3)
  {
    v8 = 2;
  }

  else
  {
    OUTLINED_FUNCTION_12_71();
    if (!v9)
    {
      v7 = 4294951071;
      goto LABEL_5;
    }

    v8 = 1;
  }

  v7 = 0;
  *(DerivedStorage + 73) = 1;
LABEL_15:
  Methods = FigCPEExternalProtectionMonitorGetMethods(*(DerivedStorage + 56));
  if ((~Methods & v8) == 0)
  {
LABEL_30:
    CMNotificationCenterGetDefaultLocalCenter();
    FigDispatchAsyncPostNotification();
    return v7;
  }

  cf = 0;
  v11 = FigCPEExternalProtectionMonitorCreateForMethods(*MEMORY[0x1E695E480], v8 & ~Methods, 0, *(DerivedStorage + 56), &cf);
  if (v11)
  {
    if (v7)
    {
      v7 = v7;
    }

    else
    {
      v7 = v11;
    }

    goto LABEL_30;
  }

  v12 = *(DerivedStorage + 56);
  v13 = cf;
  if (v12 == cf)
  {
LABEL_24:
    *(DerivedStorage + 56) = v13;
    if (v13)
    {
      CFRetain(v13);
    }

    if (v12)
    {
      CFRelease(v12);
    }

    if (cf)
    {
      CFRelease(cf);
    }

    goto LABEL_30;
  }

  DecryptContextForKeyID = AddWeakListenerOnExternalProtectionMonitor_0(a1, cf);
  if (DecryptContextForKeyID)
  {
    return DecryptContextForKeyID;
  }

  v7 = RemoveWeakListenerOnExternalProtectionMonitor_0(a1, *(DerivedStorage + 56));
  if (!v7)
  {
    v13 = cf;
    v12 = *(DerivedStorage + 56);
    goto LABEL_24;
  }

  return v7;
}

uint64_t FigPKDMSECPECryptorGetNativeSession(uint64_t a1, void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v2 + 24))
  {
    OUTLINED_FUNCTION_6_4();
    if (v7)
    {
      v8 = 4294954511;
    }

    else
    {
      v8 = v6;
    }
  }

  else
  {
    v8 = EnsureDecryptContext_0(a1);
    if (!v8)
    {
      *a2 = *(v2 + 48);
    }
  }

  FigReadWriteLockUnlockForRead();
  return v8;
}

uint64_t FigPKDMSECPECryptorGetExternalProtectionMethods(uint64_t a1, _DWORD *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v2 + 24))
  {
    OUTLINED_FUNCTION_6_4();
    if (v6)
    {
      v7 = 4294954511;
    }

    else
    {
      v7 = v5;
    }
  }

  else
  {
    v7 = 0;
    *a2 = FigCPEExternalProtectionMonitorGetMethods(*(v2 + 56));
  }

  FigReadWriteLockUnlockForRead();
  return v7;
}

uint64_t FigPKDMSECPECryptorGetAggregateExternalProtectionStatus(uint64_t a1, uint64_t a2, _DWORD *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a3)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v3 + 24))
  {
    OUTLINED_FUNCTION_6_4();
    if (v7)
    {
      v8 = 4294954511;
    }

    else
    {
      v8 = v6;
    }
  }

  else
  {
    v8 = 0;
    *a3 = FigCPEExternalProtectionMonitorGetStatus(*(v3 + 56));
  }

  FigReadWriteLockUnlockForRead();
  return v8;
}

uint64_t FigPKDMSECPECryptorDecryptSampleWithFormat(uint64_t a1, const void *a2, uint64_t a3, int a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v30 = 0;
  v31 = 0;
  v28 = 0;
  v29 = 0;
  v10 = 4294955146;
  if (a2 && a3)
  {
    OUTLINED_FUNCTION_2_182(DerivedStorage);
    FigReadWriteLockLockForRead();
    if (*(v4 + 24))
    {
      v10 = 4294954511;
    }

    else
    {
      OUTLINED_FUNCTION_613();
      DataPointer = CMBlockBufferGetDataPointer(v11, v12, v13, v14, v15);
      if (!DataPointer)
      {
        OUTLINED_FUNCTION_613();
        DataPointer = CMBlockBufferGetDataPointer(v17, v18, v19, v20, v21);
        if (!DataPointer)
        {
          DataPointer = EnsureDecryptContext_0(a1);
          if (!DataPointer)
          {
            if (a4 == 1667331683 && (v22 = CMGetAttachment(a2, *MEMORY[0x1E69603F0], 0), v23 = CMGetAttachment(a2, *MEMORY[0x1E69603E8], 0), v24 = CMGetAttachment(a2, @"avcC", 0), v22) && v23)
            {
              v25 = v24;
              valuePtr = 0;
              CFNumberGetValue(v23, kCFNumberSInt32Type, &valuePtr);
              if (!v25 || (CFDataGetBytePtr(v25), CFDataGetLength(v25), DataPointer = FigH264Bridge_GetNALUnitHeaderLengthFromAVCC(), !DataPointer))
              {
                CFDataGetBytePtr(v22);
                CFDataGetLength(v22);
                DataPointer = Eqabp8dNUu0KCyhO();
              }
            }

            else
            {
              OUTLINED_FUNCTION_303();
              DataPointer = FigSignalErrorAtGM();
            }
          }
        }
      }

      v10 = DataPointer;
    }

    FigReadWriteLockUnlockForRead();
  }

  return v10;
}

uint64_t FigPKDMSECPECryptorScrambleDecryptedSampleWithFormat(uint64_t a1, uint64_t a2)
{
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_613();
  result = CMBlockBufferGetDataPointer(v2, v3, v4, v5, v6);
  if (!result)
  {
    return 0;
  }

  return result;
}

uint64_t FigPKDMSECPECryptorCreateKeyRequest(uint64_t a1, const __CFDictionary *a2, uint64_t a3, void *a4)
{
  v19[16] = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MutableCopy = 0;
  v8 = 4294955146;
  if (a2 && a4)
  {
    v9 = DerivedStorage;
    FigReadWriteLockLockForRead();
    Value = CFDictionaryGetValue(a2, *MEMORY[0x1E6962AC8]);
    v11 = *(v9 + 80);
    v19[0] = 0;
    if (*(v9 + 24))
    {
      MutableCopy = 0;
      v8 = 4294954511;
    }

    else
    {
      v12 = Value;
      KeyRequestStateAndID = PKDKeyManagerGetKeyRequestStateAndID(*(v9 + 32), *(v9 + 96), 0, v19);
      if (KeyRequestStateAndID)
      {
        v8 = KeyRequestStateAndID;
        MutableCopy = 0;
      }

      else
      {
        if (!PKDKeyRequestIDsMatch(a2, v19[0]))
        {
          goto LABEL_35;
        }

        if (!*(v9 + 74))
        {
          if (*(v9 + 40))
          {
            if (v12)
            {
              if (!FigCFEqual())
              {
                v15 = *(v9 + 40);
                *(v9 + 40) = v12;
                CFRetain(v12);
                if (v15)
                {
                  CFRelease(v15);
                }
              }
            }
          }
        }

        *(v9 + 74) = 1;
        if ((v12 != 0) != (*(v9 + 40) != 0) || FigCFEqual())
        {
          if (!v12)
          {
            v12 = *(v9 + 40);
          }

          MutableCopy = FigCFDictionaryCreateMutableCopy();
          if (MutableCopy)
          {
            FigCFDictionarySetValue();
            KeyRequestForKeyID = PKDKeyManagerCreateKeyRequestForKeyID(*(v9 + 32), *(v9 + 96), MutableCopy, v11, a4);
            if (KeyRequestForKeyID)
            {
              v8 = KeyRequestForKeyID;
            }

            else if (*(v9 + 40))
            {
              v8 = 0;
            }

            else
            {
              if (v12)
              {
                v16 = CFRetain(v12);
              }

              else
              {
                v16 = 0;
              }

              v8 = 0;
              *(v9 + 40) = v16;
            }
          }

          else
          {
            OUTLINED_FUNCTION_5_130();
            v8 = FigSignalErrorAtGM();
          }
        }

        else
        {
LABEL_35:
          OUTLINED_FUNCTION_5_130();
          v8 = FigSignalErrorAtGM();
          MutableCopy = 0;
        }
      }
    }

    FigReadWriteLockUnlockForRead();
  }

  if (dword_1EAF179B8)
  {
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_10_76();
  }

  if (MutableCopy)
  {
    CFRelease(MutableCopy);
  }

  return v8;
}

uint64_t FigPKDMSECPECryptorSetKeyRequestResponse(uint64_t a1, const void *a2, const __CFDictionary *a3)
{
  v28[23] = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v28[0] = 0;
  if (a2)
  {
    v7 = DerivedStorage;
    if (a3)
    {
      Value = CFDictionaryGetValue(a3, *MEMORY[0x1E6962B28]);
      v9 = CFDictionaryGetValue(a3, *MEMORY[0x1E6962B30]) == *MEMORY[0x1E695E4D0];
    }

    else
    {
      v9 = 0;
      Value = 0;
    }

    FigReadWriteLockLockForRead();
    if (*(v7 + 24))
    {
      v11 = 4294954511;
    }

    else
    {
      KeyRequestStateAndID = PKDKeyManagerGetKeyRequestStateAndID(*(v7 + 32), *(v7 + 96), 0, v28);
      if (KeyRequestStateAndID)
      {
        v11 = KeyRequestStateAndID;
      }

      else
      {
        v11 = PKDKeyManagerSetKeyRequestResponseForKeyID(*(v7 + 32), *(v7 + 96), a2);
        if (v11 || !Value)
        {
          goto LABEL_16;
        }

        v12 = *MEMORY[0x1E695E480];
        Current = CFAbsoluteTimeGetCurrent();
        v14 = CFDateCreate(v12, Current);
        TimeIntervalSinceDate = CFDateGetTimeIntervalSinceDate(Value, v14);
        if (TimeIntervalSinceDate > 0.0 && (v16 = TimeIntervalSinceDate, StopAndReleaseTimer((v7 + 88)), dispatch_get_global_queue(0, 0), OUTLINED_FUNCTION_613(), v21 = dispatch_source_create(v17, v18, v19, v20), (*(v7 + 88) = v21) != 0))
        {
          if (*(v7 + 8))
          {
            CFRetain(*(v7 + 8));
            v21 = *(v7 + 88);
            v22 = *(v7 + 8);
          }

          else
          {
            v22 = 0;
          }

          dispatch_set_context(v21, v22);
          v23 = *(v7 + 88);
          v24 = dispatch_time(0, (v16 * 1000000000.0));
          dispatch_source_set_timer(v23, v24, 0xFFFFFFFFFFFFFFFFLL, 0xF4240uLL);
          dispatch_source_set_event_handler_f(*(v7 + 88), RenewalTimerCallback_1);
          dispatch_source_set_cancel_handler_f(*(v7 + 88), FigCFRelease_13);
          dispatch_resume(*(v7 + 88));
          v11 = 0;
          if (!v14)
          {
            goto LABEL_16;
          }
        }

        else
        {
          v11 = FigSignalErrorAtGM();
          if (!v14)
          {
            goto LABEL_16;
          }
        }

        CFRelease(v14);
      }
    }

LABEL_16:
    FigReadWriteLockUnlockForRead();
    v25 = v28[0];
    goto LABEL_17;
  }

  v25 = 0;
  v9 = 0;
  v11 = 4294955146;
LABEL_17:
  PKDDispatchKeyResponseNotification(a1, v11, v25, v9);
  if (dword_1EAF179B8)
  {
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_10_76();
  }

  return v11;
}

uint64_t FigPKDMSECPECryptorCopyPropertyForFormat(const void *a1, const void *a2, uint64_t a3, uint64_t a4, uint64_t *a5)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v11 = 4294955146;
  if (a2 && a5)
  {
    OUTLINED_FUNCTION_2_182(DerivedStorage);
    FigReadWriteLockLockForRead();
    if (*(v5 + 24))
    {
      OUTLINED_FUNCTION_6_4();
      if (v13)
      {
        v11 = 4294954511;
      }

      else
      {
        v11 = v12;
      }
    }

    else if (CFEqual(a2, *MEMORY[0x1E6961098]))
    {
      v11 = 0;
      *a5 = *MEMORY[0x1E695E4C0];
    }

    else
    {
      v11 = FigPKDMSECPECryptorCopyProperty(a1, a2, a4, a5);
    }

    FigReadWriteLockUnlockForRead();
  }

  return v11;
}

uint64_t FigPKDMSECPECryptorAbsorbKeyRequestContext(int a1, CFTypeRef cf)
{
  if (!cf)
  {
    return 4294949726;
  }

  v2 = CFGetTypeID(cf);
  if (v2 != FigCPECryptorGetTypeID())
  {
    return 4294949726;
  }

  ClassID = CMBaseObjectGetClassID();
  if (ClassID != CMBaseObjectGetClassID())
  {
    return 4294949726;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = CMBaseObjectGetDerivedStorage();
  FigReadWriteLockLockForWrite();
  if (*(DerivedStorage + 24))
  {
    FigReadWriteLockUnlockForWrite();
    return 4294949723;
  }

  v6 = *(DerivedStorage + 32);
  if (!v6 || *(DerivedStorage + 88))
  {
    v15 = FigSignalErrorAtGM();
    FigReadWriteLockUnlockForWrite();
    if (v15)
    {
      return v15;
    }

    v9 = 0;
    v7 = 0;
  }

  else
  {
    v7 = CFRetain(v6);
    v8 = *(DerivedStorage + 96);
    if (v8)
    {
      v9 = CFRetain(v8);
    }

    else
    {
      v9 = 0;
    }

    FigReadWriteLockUnlockForWrite();
  }

  FigReadWriteLockLockForWrite();
  if (*(v5 + 24))
  {
    FigReadWriteLockUnlockForWrite();
    v13 = 0;
    v14 = 0;
    v15 = 4294949723;
  }

  else
  {
    v10 = *(v5 + 32);
    if (!v10 || *(v5 + 88))
    {
      v15 = FigSignalErrorAtGM();
      FigReadWriteLockUnlockForWrite();
      v13 = 0;
      if (v15)
      {
        v14 = 0;
        goto LABEL_19;
      }

      v11 = 0;
    }

    else
    {
      v11 = CFRetain(v10);
      v12 = *(v5 + 96);
      if (v12)
      {
        v13 = CFRetain(v12);
      }

      else
      {
        v13 = 0;
      }

      FigReadWriteLockUnlockForWrite();
    }

    v14 = v13;
    v15 = PKDKeyManagerAbsorbKeyRequestContext(v7, v11, v9, v13);
    v13 = v11;
  }

LABEL_19:
  if (v7)
  {
    CFRelease(v7);
  }

  if (v13)
  {
    CFRelease(v13);
  }

  if (v9)
  {
    CFRelease(v9);
  }

  if (v14)
  {
    CFRelease(v14);
  }

  return v15;
}

uint64_t FigPKDMSECPECryptorIsAggregateExternalProtectionStatusStable(uint64_t a1, _BYTE *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v2 + 24))
  {
    OUTLINED_FUNCTION_6_4();
    if (v6)
    {
      v7 = 4294954511;
    }

    else
    {
      v7 = v5;
    }
  }

  else
  {
    v7 = 0;
    *a2 = FigCPEExternalProtectionMonitorStableStatusDetermined(*(v2 + 56));
  }

  FigReadWriteLockUnlockForRead();
  return v7;
}

uint64_t FigPKDMSECPECryptorCreateProcessedBlockBufferAndSubsampleAuxiliaryDataWithOptions(uint64_t a1, opaqueCMSampleBuffer *a2, char a3, uint64_t a4, uint64_t a5, void *a6)
{
  v122 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_4_150(DerivedStorage, v14, v15, v16, v17, v18, v19, v20, v86, v92);
  v107 = 0;
  FormatDescription = CMSampleBufferGetFormatDescription(a2);
  MediaSubType = CMFormatDescriptionGetMediaSubType(FormatDescription);
  FigReadWriteLockLockForWrite();
  if (MediaSubType != 1667331683)
  {
    goto LABEL_37;
  }

  DataBuffer = CMSampleBufferGetDataBuffer(a2);
  DataPointer = OUTLINED_FUNCTION_8_88(DataBuffer, v24, v25, v26, v27, v28, v29, v30, v87, v93, a5, a4, v107, v108, v109, v110, v111, cf);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  OUTLINED_FUNCTION_613();
  DataPointer = CMBlockBufferGetDataPointer(v32, v33, v34, v35, v36);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  DataPointer = OUTLINED_FUNCTION_6_117(0, v37, v38, v39, v40, v41, v42, v43, v88, v94, v98, v102, v107, v108, v109, v110);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  OUTLINED_FUNCTION_613();
  DataPointer = CMBlockBufferGetDataPointer(v44, v45, v46, 0, v47);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  SampleAttachmentsArray = CMSampleBufferGetSampleAttachmentsArray(a2, 0);
  if (!SampleAttachmentsArray)
  {
    goto LABEL_37;
  }

  v49 = SampleAttachmentsArray;
  if (CFArrayGetCount(SampleAttachmentsArray) < 1)
  {
    goto LABEL_37;
  }

  ValueAtIndex = CFArrayGetValueAtIndex(v49, 0);
  if (!ValueAtIndex)
  {
    goto LABEL_37;
  }

  Value = CFDictionaryGetValue(ValueAtIndex, *MEMORY[0x1E69603F0]);
  if (!Value)
  {
    goto LABEL_37;
  }

  v52 = Value;
  Length = CFDataGetLength(Value);
  if (Length != 8 && Length != 16)
  {
    goto LABEL_37;
  }

  v55 = Length;
  if (v6[17] != FormatDescription)
  {
    v95 = a6;
    Extension = CMFormatDescriptionGetExtension(FormatDescription, *MEMORY[0x1E69600A0]);
    if (!Extension || (v57 = Extension, v58 = CFGetTypeID(Extension), v58 != CFDictionaryGetTypeID()) || (v59 = CFDictionaryGetValue(v57, @"avcC")) == 0 || (v60 = v59, v61 = CFGetTypeID(v59), v61 != CFDataGetTypeID()))
    {
LABEL_37:
      OUTLINED_FUNCTION_303();
      goto LABEL_38;
    }

    DataPointer = CopyImageParamsFromAVCData_0(v60, &v107);
    if (DataPointer)
    {
LABEL_39:
      v83 = DataPointer;
      goto LABEL_40;
    }

    v62 = v6[17];
    v6[17] = FormatDescription;
    a6 = v95;
    if (FormatDescription)
    {
      CFRetain(FormatDescription);
    }

    if (v62)
    {
      CFRelease(v62);
    }

    v63 = v6[18];
    if (v63)
    {
      v6[18] = 0;
      free(v63);
    }

    v6[18] = v107;
    v107 = 0;
  }

  EnsureDecryptContext_0(a1);
  v114 = v6[6];
  if (a3)
  {
    v64 = 11;
  }

  else
  {
    v64 = 8;
  }

  OUTLINED_FUNCTION_11_73(v64);
  v123.location = 0;
  v123.length = v55;
  CFDataGetBytes(v52, v123, v65);
  OUTLINED_FUNCTION_3_153(v66, v67, v68, v69, v70, v71, v72, v73, v89, v95, v99, v103, v107, v108, v109, v110, v111);
  v120 = 16;
  OUTLINED_FUNCTION_13_56(v74, v75, v76, v77, v78, v79, v80, v81, v90, v96, v100, v104, v107, v108, v109, v110, v111, cf, v113);
  v119 = v6[18];
  v121 = 0;
  MDIwLzAxLzA5IDE(&v114);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  if (v116 != v110)
  {
    goto LABEL_36;
  }

  if (v115 == 8)
  {
    if (v117 != 1)
    {
      goto LABEL_36;
    }

    v82 = v118;
    if (!v118)
    {
      goto LABEL_36;
    }
  }

  else
  {
    v82 = v118;
  }

  if (v82 >= 0x11)
  {
LABEL_36:
    OUTLINED_FUNCTION_303();
LABEL_38:
    DataPointer = FigSignalErrorAtGM();
    goto LABEL_39;
  }

  *v101 = v120;
  v85 = OUTLINED_FUNCTION_15_57(v82, v91, v97, v101, v105, v107, v108, v109, v110, v111, cf, v113);
  v83 = 0;
  *v106 = v109;
  v109 = 0;
  *a6 = v85;
LABEL_40:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v109)
  {
    CFRelease(v109);
  }

  free(v107);
  FigReadWriteLockUnlockForWrite();
  return v83;
}

uint64_t FigPKDMSECPECryptorGetAggregateExternalProtectionStatusIgnoringDisplays(uint64_t a1, uint64_t a2, _DWORD *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a3)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v3 + 24))
  {
    OUTLINED_FUNCTION_6_4();
    if (v7)
    {
      v8 = 4294954511;
    }

    else
    {
      v8 = v6;
    }
  }

  else
  {
    v8 = 0;
    *a3 = FigCPEExternalProtectionMonitorGetStatusIgnoringDisplays(*(v3 + 56));
  }

  FigReadWriteLockUnlockForRead();
  return v8;
}

uint64_t FigPKDMSECPECryptorIsAggregateExternalProtectionStatusStableIgnoringDisplays(uint64_t a1, _BYTE *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v2 + 24))
  {
    OUTLINED_FUNCTION_6_4();
    if (v6)
    {
      v7 = 4294954511;
    }

    else
    {
      v7 = v5;
    }
  }

  else
  {
    v7 = 0;
    *a2 = FigCPEExternalProtectionMonitorStableStatusDeterminedIgnoringDisplays(*(v2 + 56));
  }

  FigReadWriteLockUnlockForRead();
  return v7;
}

uint64_t FigPKDMSECPECryptorCopySerializedCryptorRecipe(uint64_t a1, CFDataRef *a2)
{
  v13 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v9 = 0;
  if (DerivedStorage)
  {
    v5 = DerivedStorage;
    v6 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (!v6)
    {
      return 4294954514;
    }

    result = v6(a1, &v9);
    if (result)
    {
      return result;
    }

    *bytes = v9;
    Methods = FigCPEExternalProtectionMonitorGetMethods(*(v5 + 56));
    v12 = 3;
    v8 = CFDataCreate(*MEMORY[0x1E695E480], bytes, 24);
    if (!v8)
    {
      return 4294955145;
    }
  }

  else
  {
    v8 = 0;
  }

  result = 0;
  *a2 = v8;
  return result;
}

uint64_t FigPKDMSECPECryptorGetCryptorType(uint64_t a1, _DWORD *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  if (*(DerivedStorage + 24))
  {
    if (*(DerivedStorage + 25))
    {
      return 4294951452;
    }

    else
    {
      return 4294954511;
    }
  }

  else
  {
    result = 0;
    *a2 = 3;
  }

  return result;
}

void RenewalTimerCallback_1()
{
  v0 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v0)
  {
    v1 = v0;
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    FigReadWriteLockLockForRead();
    if (!*(DerivedStorage + 24))
    {
      StopAndReleaseTimer((DerivedStorage + 88));
      CMNotificationCenterGetDefaultLocalCenter();
      FigDispatchAsyncPostNotification();
    }

    FigReadWriteLockUnlockForRead();

    CFRelease(v1);
  }
}

uint64_t CopyImageParamsFromAVCData_0(uint64_t a1, void *a2)
{
  if (a1)
  {
    SPSAndPPSCountFromAVCC = FigH264Bridge_GetSPSAndPPSCountFromAVCC();
    if (SPSAndPPSCountFromAVCC)
    {
      v6 = SPSAndPPSCountFromAVCC;
    }

    else
    {
      v4 = malloc_type_calloc(1uLL, 0x30uLL, 0x10900401BACEF9BuLL);
      v5 = v4;
      if (!v4)
      {
        v6 = 4294955145;
        goto LABEL_6;
      }

      *v4 = v4 + 48;
      *(v4 + 3) = v4 + 48;
      *(v4 + 1) = v4 + 48;
      *(v4 + 4) = v4 + 48;
      *(v4 + 4) = 0;
      *(v4 + 10) = 0;
      v6 = 0;
      *a2 = v4;
    }

    v5 = 0;
  }

  else
  {
    v5 = 0;
    v6 = 4294955136;
  }

LABEL_6:
  free(v5);
  return v6;
}

uint64_t FigPKDMSECPELimitedCryptorInvalidate()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForWrite();
  if (!*(v0 + 8))
  {
    *(v0 + 8) = 1;
    if (*(v0 + 24))
    {
      pNl28qYdqR8Dyw();
      *(v0 + 24) = 0;
    }
  }

  FigReadWriteLockUnlockForWrite();
  return 0;
}

uint64_t FigPKDMSECPELimitedCryptorFinalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigPKDMSECPELimitedCryptorInvalidate();
  result = *(DerivedStorage + 16);
  if (result)
  {
    result = FigReadWriteLockDestroy();
    *(DerivedStorage + 16) = 0;
  }

  return result;
}

uint64_t FigPKDMSECPELimitedCryptorGetNativeSession(uint64_t a1, void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v2 + 8))
  {
    v5 = 4294954511;
  }

  else
  {
    v5 = 0;
    *a2 = *(v2 + 24);
  }

  FigReadWriteLockUnlockForRead();
  return v5;
}

uint64_t FigPKDMSECPELimitedCryptorGetExternalProtectionMethods(uint64_t a1, _DWORD *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  v4 = DerivedStorage;
  if (*(DerivedStorage + 8))
  {
    return 4294954511;
  }

  result = 0;
  *a2 = *(v4 + 48);
  return result;
}

uint64_t FigPKDMSECPELimitedCryptorCreateProcessedBlockBufferAndSubsampleAuxiliaryDataWithOptions(uint64_t a1, opaqueCMSampleBuffer *a2, char a3, uint64_t a4, uint64_t *a5, uint64_t a6)
{
  v124 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_4_150(DerivedStorage, v13, v14, v15, v16, v17, v18, v19, v87, v93);
  v109 = 0;
  FormatDescription = CMSampleBufferGetFormatDescription(a2);
  MediaSubType = CMFormatDescriptionGetMediaSubType(FormatDescription);
  FigReadWriteLockLockForWrite();
  if (MediaSubType != 1667331683)
  {
    goto LABEL_37;
  }

  DataBuffer = CMSampleBufferGetDataBuffer(a2);
  DataPointer = OUTLINED_FUNCTION_8_88(DataBuffer, v23, v24, v25, v26, v27, v28, v29, v88, v94, v99, v104, v109, v110, v111, v112, v113, cf);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  OUTLINED_FUNCTION_613();
  DataPointer = CMBlockBufferGetDataPointer(v31, v32, v33, v34, v35);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  DataPointer = OUTLINED_FUNCTION_6_117(0, v36, v37, v38, v39, v40, v41, v42, v89, v95, v100, v105, v109, v110, v111, v112);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  OUTLINED_FUNCTION_613();
  DataPointer = CMBlockBufferGetDataPointer(v43, v44, v45, 0, v46);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  SampleAttachmentsArray = CMSampleBufferGetSampleAttachmentsArray(a2, 0);
  if (!SampleAttachmentsArray)
  {
    goto LABEL_37;
  }

  v48 = SampleAttachmentsArray;
  if (CFArrayGetCount(SampleAttachmentsArray) < 1)
  {
    goto LABEL_37;
  }

  ValueAtIndex = CFArrayGetValueAtIndex(v48, 0);
  if (!ValueAtIndex)
  {
    goto LABEL_37;
  }

  Value = CFDictionaryGetValue(ValueAtIndex, *MEMORY[0x1E69603F0]);
  if (!Value)
  {
    goto LABEL_37;
  }

  v51 = Value;
  v101 = a4;
  v106 = a6;
  Length = CFDataGetLength(Value);
  if (Length != 8 && Length != 16)
  {
    goto LABEL_37;
  }

  v54 = Length;
  if (v6[4] != FormatDescription)
  {
    Extension = CMFormatDescriptionGetExtension(FormatDescription, *MEMORY[0x1E69600A0]);
    if (!Extension || (v56 = Extension, v57 = CFGetTypeID(Extension), v57 != CFDictionaryGetTypeID()) || (v58 = CFDictionaryGetValue(v56, @"avcC")) == 0 || (v59 = v58, v60 = CFGetTypeID(v58), v60 != CFDataGetTypeID()))
    {
LABEL_37:
      OUTLINED_FUNCTION_303();
      goto LABEL_38;
    }

    DataPointer = CopyImageParamsFromAVCData_0(v59, &v109);
    if (DataPointer)
    {
LABEL_39:
      v84 = DataPointer;
      goto LABEL_40;
    }

    v61 = v6[4];
    v6[4] = FormatDescription;
    if (FormatDescription)
    {
      CFRetain(FormatDescription);
    }

    if (v61)
    {
      CFRelease(v61);
    }

    v62 = v6[5];
    if (v62)
    {
      v6[5] = 0;
      free(v62);
    }

    v6[5] = v109;
    v109 = 0;
  }

  v116 = v6[3];
  if (a3)
  {
    v63 = 11;
  }

  else
  {
    v63 = 8;
  }

  OUTLINED_FUNCTION_11_73(v63);
  v125.location = 0;
  v125.length = v54;
  CFDataGetBytes(v51, v125, v64);
  OUTLINED_FUNCTION_3_153(v65, v66, v67, v68, v69, v70, v71, v72, v90, v96, v101, v106, v109, v110, v111, v112, v113);
  v122 = 16;
  OUTLINED_FUNCTION_13_56(v73, v74, v75, v76, v77, v78, v79, v80, v91, v97, v102, v107, v109, v110, v111, v112, v113, cf, v115);
  v121 = v6[5];
  v123 = 0;
  MDIwLzAxLzA5IDE(&v116);
  if (DataPointer)
  {
    goto LABEL_39;
  }

  v82 = v103;
  v81 = v108;
  if (v118 != v112)
  {
    goto LABEL_36;
  }

  if (v117 == 8)
  {
    if (v119 != 1)
    {
      goto LABEL_36;
    }

    v83 = v120;
    if (!v120)
    {
      goto LABEL_36;
    }
  }

  else
  {
    v83 = v120;
  }

  if (v83 >= 0x11)
  {
LABEL_36:
    OUTLINED_FUNCTION_303();
LABEL_38:
    DataPointer = FigSignalErrorAtGM();
    goto LABEL_39;
  }

  *a5 = v122;
  v86 = OUTLINED_FUNCTION_15_57(v83, v92, v98, v103, v108, v109, v110, v111, v112, v113, cf, v115);
  v84 = 0;
  *v82 = v111;
  v111 = 0;
  *v81 = v86;
LABEL_40:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v111)
  {
    CFRelease(v111);
  }

  free(v109);
  FigReadWriteLockUnlockForWrite();
  return v84;
}

uint64_t FigPKDMSECPELimitedCryptorCopySerializedCryptorRecipe(uint64_t a1, CFDataRef *a2)
{
  v14 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v10 = 0;
  if (DerivedStorage)
  {
    v5 = DerivedStorage;
    v6 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (!v6)
    {
      return 4294954514;
    }

    result = v6(a1, &v10);
    if (result)
    {
      return result;
    }

    v8 = *(v5 + 48);
    *bytes = v10;
    v12 = v8;
    v13 = 3;
    v9 = CFDataCreate(*MEMORY[0x1E695E480], bytes, 24);
    if (!v9)
    {
      return 4294955145;
    }
  }

  else
  {
    v9 = 0;
  }

  result = 0;
  *a2 = v9;
  return result;
}

uint64_t FigPKDMSECPELimitedCryptorIsCompatibleWithSerializedCryptorRecipe(uint64_t a1, const __CFData *a2, BOOL *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  BytePtr = CFDataGetBytePtr(a2);
  if (CFDataGetLength(a2) != 24)
  {
    return 4294949724;
  }

  v8 = *BytePtr;
  v9 = *(BytePtr + 2);
  v10 = *(BytePtr + 4);
  v15 = 0;
  v11 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v11)
  {
    return 4294954514;
  }

  result = v11(a1, &v15);
  if (!result)
  {
    v14 = 0;
    if (v15 == v8 && *(DerivedStorage + 48) == v9 && v10 == 3)
    {
      v14 = 1;
    }

    result = 0;
    *a3 = v14;
  }

  return result;
}

uint64_t FigPKDMSECPELimitedCryptorGetCryptorType(uint64_t a1, _DWORD *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_2_182(DerivedStorage);
  FigReadWriteLockLockForRead();
  if (*(v2 + 8))
  {
    v5 = 4294954511;
  }

  else
  {
    v5 = 0;
    *a2 = 3;
  }

  FigReadWriteLockUnlockForRead();
  return v5;
}

uint64_t FigPKDMSECPECryptorCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PersistentKeyUpdatedCallback_cold_1_0()
{
  result = FigSignalErrorAtGM();
  if (result)
  {
    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t KeyRequestErrorOccurredCallback_cold_1()
{
  result = FigSignalErrorAtGM();
  if (result)
  {
    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t AddWeakListenerOnExternalProtectionMonitor_cold_1_0(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t AddWeakListenerOnExternalProtectionMonitor_cold_2_0(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigPKDMSECPECryptorCopyDebugDescription_cold_1(uint64_t a1, const void *a2, __CFString *a3)
{
  v6 = *(a1 + 104);
  if (v6)
  {
    Value = CFDictionaryGetValue(v6, *MEMORY[0x1E6960F28]);
  }

  else
  {
    Value = 0;
  }

  EnsureUUID_1(a2);
  v8 = PKDLogPrivateData(Value);
  CFStringAppendFormat(a3, 0, @"<FigCPECryptorPKD_MSE %p identifier: %@ uuid: %@>", a2, v8, *(a1 + 96));
}

uint64_t RemoveWeakListenerOnExternalProtectionMonitor_cold_1_0(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t RemoveWeakListenerOnExternalProtectionMonitor_cold_2_0(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDMSECPECryptorTestAndSetKeyRequestState_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDMSECPECryptorTestAndSetKeyRequestState_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDMSECPECryptorCreatePackagedPersistentKey_cold_1(CFDataRef *a1, uint64_t a2, uint64_t a3, int *a4)
{
  *a1 = 0;
  FigReadWriteLockLockForRead();
  if (*(a2 + 24))
  {
    PackagedPersistentKeyForKeyID = -12785;
  }

  else
  {
    PackagedPersistentKeyForKeyID = PKDKeyManagerCreatePackagedPersistentKeyForKeyID(*(a2 + 32), *(a2 + 96), a3, a1);
  }

  *a4 = PackagedPersistentKeyForKeyID;

  return FigReadWriteLockUnlockForRead();
}

uint64_t FigPKDMSECPECryptorCreatePackagedPersistentKey_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDMSECPECryptorCreatePackagedPersistentKey_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void __FigAirPlaySecureStopRouterUpdateRecord_block_invoke(uint64_t a1)
{
  Value = CFDictionaryGetValue(sAirPlayManagerSingletonContext_0, *(a1 + 40));
  if (Value)
  {
    MutableCopy = CFDictionaryCreateMutableCopy(*MEMORY[0x1E695E480], 0, Value);
    if (MutableCopy)
    {
      v4 = MutableCopy;
      CFDictionarySetValue(MutableCopy, @"FigAirPlaySSM_AppID", *(a1 + 48));
      CFDictionarySetValue(v4, @"FigAirPlaySSM_AssetID", *(a1 + 56));
      CFDictionarySetValue(v4, @"FigAirPlaySSM_SessionLifespanSPC", *(a1 + 64));
      CFDictionarySetValue(sAirPlayManagerSingletonContext_0, *(a1 + 40), v4);

      CFRelease(v4);
    }

    else
    {
      fig_log_get_emitter();
      v5 = FigSignalErrorAtGM();
      OUTLINED_FUNCTION_30_8(v5, *(a1 + 32));
    }
  }
}

uint64_t FigAirPlaySecureStopRouterCreateSecureStopUUID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAirPlaySecureStopRouterCreateSecureStopUUID_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAirPlaySecureStopRouterCreateSecureStopUUID_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAirPlaySecureStopRouterRegisterSecureStopManager_cold_2()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t FigAirPlaySecureStopRouterRegisterSecureStopManager_cold_3()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t __FigAirPlaySecureStopRouterRegisterSecureStopManager_block_invoke_cold_1(uint64_t a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_30_8(v2, *(a1 + 32));
}

uint64_t FigAirPlaySecureStopRouterUpdateRecord_cold_2()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t FigAirPlaySecureStopRouterUpdateRecord_cold_3()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t FigAirPlaySecureStopRouterUpdateRecord_cold_4()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t FigAirPlaySecureStopRouterUpdateRecord_cold_5()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t FigAirPlaySecureStopRouterCommitToDisk_cold_2()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t FigAirPlaySecureStopRouterFinalizeRecordAndCommitToDisk_cold_2()
{
  OUTLINED_FUNCTION_180_1();
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v0 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_1_144(v0);
}

uint64_t __FigAirPlaySecureStopRouterFinalizeRecordAndCommitToDisk_block_invoke_cold_1(uint64_t a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  return OUTLINED_FUNCTION_30_8(v2, *(a1 + 32));
}

uint64_t __fassr_ensureAirPlayManagerSingletonContext_block_invoke_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t __FigFairPlayOctaviaCPECryptorCreate_block_invoke(void *a1)
{
  v2 = a1[6];
  number = 0;
  valuePtr = 0;
  if (v2)
  {
    v3 = v2[2];
    v4 = *v2;
    v5 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (v5)
    {
      if (!v5(v3, 0x1F0B529B8, v4, &number))
      {
        CFNumberGetValue(number, kCFNumberSInt32Type, &valuePtr);
        if (number)
        {
          CFRelease(number);
        }
      }
    }
  }

  v6 = valuePtr;
  context = dispatch_get_context(*(a1[6] + 48));
  lpo7y56t5h(v6, context, (a1 + 7));
  result = FAIRPLAY_CALL_LOG(v8);
  *(*(a1[4] + 8) + 24) = result;
  if (!*(*(a1[4] + 8) + 24))
  {
    result = CFDataCreateWithBytesNoCopy(*MEMORY[0x1E695E480], 0, 0, *(a1[6] + 8));
    *(*(a1[5] + 8) + 24) = result;
  }

  return result;
}

uint64_t FigFairPlayOctaviaCPECryptorCopyProperty(uint64_t a1, const void *a2, uint64_t a3, void *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!DerivedStorage)
  {
    return 4294955146;
  }

  v8 = DerivedStorage;
  if (CFEqual(a2, *MEMORY[0x1E6961098]))
  {
    v9 = MEMORY[0x1E695E4C0];
LABEL_6:
    if (*v9)
    {
      v10 = CFRetain(*v9);
    }

    else
    {
      v10 = 0;
    }

    result = 0;
    *a4 = v10;
    return result;
  }

  if (CFEqual(a2, *MEMORY[0x1E6961100]))
  {
    v9 = kFigCPEProtectionScheme_FairPlay;
    goto LABEL_6;
  }

  v12 = *(v8 + 16);
  v13 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v13)
  {
    return 4294954514;
  }

  return v13(v12, a2, a3, a4);
}

uint64_t FigFairPlayOctaviaCPECryptorGetExternalProtectionMethods(uint64_t a1, _DWORD *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = 4294955146;
  if (a2)
  {
    if (DerivedStorage)
    {
      Methods = FigCPEExternalProtectionMonitorGetMethods(*(DerivedStorage + 64));
      result = 0;
      *a2 = Methods;
    }
  }

  return result;
}

uint64_t FigFairPlayOctaviaCPECryptorGetAggregateExternalProtectionStatus(uint64_t a1, uint64_t a2, _DWORD *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a3)
  {
    return 4294955146;
  }

  Status = FigCPEExternalProtectionMonitorGetStatus(*(DerivedStorage + 64));
  result = 0;
  *a3 = Status;
  return result;
}

uint64_t FigFairPlayOctaviaCPECryptorGetSerializationToken(uint64_t a1, void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  v4 = DerivedStorage;
  result = 0;
  *a2 = *(v4 + 32);
  return result;
}

uint64_t FigFairPlayOctaviaCPECryptorIsCompatibleWithFormatDescription(uint64_t a1, const opaqueCMFormatDescription *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = 0;
  v10 = 0;
  if (a2)
  {
    if (a1)
    {
      v6 = DerivedStorage;
      if (DerivedStorage)
      {
        v7 = FigFairPlayCopySinfExtensionsFromFormatDescription(a2);
        v8 = v7;
        if (v7 && CFEqual(v7, *(v6 + 40)))
        {
          v5 = 1;
          goto LABEL_13;
        }

        if (FigFairPlayGetDPInfoFromSinfExtensions(*(v6 + 40)) && !FigFairPlayIsPlaceholder(v8, &v10) && v10)
        {
          v5 = 1;
          if (!v8)
          {
            return v5;
          }

          goto LABEL_13;
        }

        v5 = 0;
        if (v8)
        {
LABEL_13:
          CFRelease(v8);
        }
      }
    }
  }

  return v5;
}

uint64_t FigVideoCompositorCreateMetal_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorCreateMetal_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t mvc_CopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t mvc_SetProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t conduitPushFrame_cold_1()
{
  os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
  os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
  return fig_log_call_emit_and_clean_up_after_send_and_compose();
}

uint64_t FigTTMLDocumentWriterCreateRubySpanBuilder_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterCreateRubySpanBuilder_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLDocumentWriterRubySpanBuilder_AddCaptionData_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLDocumentWriterRubySpanBuilder_AddCaptionData_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

const __CFArray *fapce_apply(uint64_t a1, const __CFArray *a2, __CFArray **a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  cf = 0;
  value = 0;
  if (a2)
  {
    if (!a3 || (v6 = DerivedStorage, v7 = *MEMORY[0x1E695E480], (Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0])) == 0))
    {
      a2 = FigSignalErrorAtGM();
      goto LABEL_23;
    }

    v9 = Mutable;
    FigPathwayCloneGetBaseID();
    CMBaseObjectGetDerivedStorage();
    v10 = CFArrayCreateMutable(v7, 0, MEMORY[0x1E695E9C0]);
    if (v10)
    {
      if (CFArrayGetCount(a2) >= 1)
      {
        v11 = 0;
        do
        {
          ValueAtIndex = CFArrayGetValueAtIndex(a2, v11);
          FigPathwayCloneGetBaseID();
          FigAlternateGetPathwayID(ValueAtIndex);
          if (FigCFEqual())
          {
            CFArrayAppendValue(v10, ValueAtIndex);
          }

          ++v11;
        }

        while (v11 < CFArrayGetCount(a2));
      }

      goto LABEL_10;
    }

    v18 = FigSignalErrorAtGM();
    if (!v18)
    {
LABEL_10:
      v13 = 0;
      if (!v10)
      {
        goto LABEL_12;
      }

LABEL_11:
      for (i = CFArrayGetCount(v10); v13 < i; i = 0)
      {
        v15 = CFArrayGetValueAtIndex(v10, v13);
        v16 = FigSteeringCloneAlternateWithPathwayClone(*v6, v15, &cf, &value);
        if (v16)
        {
          a2 = v16;
          if (!v10)
          {
LABEL_21:
            if (v9)
            {
              goto LABEL_22;
            }

            goto LABEL_23;
          }

LABEL_20:
          CFRelease(v10);
          goto LABEL_21;
        }

        CFArrayAppendValue(v9, value);
        if (value)
        {
          CFRelease(value);
          value = 0;
        }

        ++v13;
        if (v10)
        {
          goto LABEL_11;
        }

LABEL_12:
        ;
      }

      a2 = 0;
      *a3 = v9;
      v9 = 0;
      if (!v10)
      {
        goto LABEL_21;
      }

      goto LABEL_20;
    }

    a2 = v18;
LABEL_22:
    CFRelease(v9);
LABEL_23:
    if (value)
    {
      CFRelease(value);
    }

    if (cf)
    {
      CFRelease(cf);
    }
  }

  return a2;
}

uint64_t FigDataChannelResourceRemoteGetObjectID_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelResourceRemoteGetObjectID_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelResourceRemoteGetObjectID_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelResourceRemoteCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelResourceRemoteCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_ProvidePayload_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_ProvidePayload_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_ProvidePayload_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_SetFailedToLoad_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_SetFailedToLoad_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_SetFailedToLoad_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_SetCancelled_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_SetCancelled_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t dataChannelResourceRemote_SetCancelled_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigCoreTelephonyMonitorCallbackEntryFree(void *a1)
{
  if (a1)
  {
    v2 = a1[2];
    if (v2)
    {
      CFRelease(v2);
    }

    v3 = a1[4];
    if (v3)
    {
      dispatch_release(v3);
    }

    free(a1);
  }
}

void __FigCoreTelephonyMonitorCallbackEntryDoCallback_block_invoke(uint64_t a1)
{
  v2 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v2)
  {
    v3 = v2;
    (*(a1 + 40))(v2, *(a1 + 48));
    CFRelease(v3);
  }

  v4 = *(a1 + 32);
  if (v4)
  {

    CFRelease(v4);
  }
}

void figNetworkCostMonitorUpdateGlobalEstimatedMaximumDemandWithMutexApplierFunc(uint64_t a1, uint64_t a2)
{
  v3 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v3)
  {
    v4 = v3;
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    if (*(DerivedStorage + 48) >= *(a2 + 8))
    {
      v6 = DerivedStorage;
      v7 = *a2;
      v8 = *(DerivedStorage + 40);
      *a2 = v8;
      if (v8)
      {
        CFRetain(v8);
      }

      if (v7)
      {
        CFRelease(v7);
      }

      *(a2 + 8) = *(v6 + 48);
    }

    CFRelease(v4);
  }
}

uint64_t figNetworkCostMonitorUpdateEstimatedMaximumDemandWithMutex()
{
  result = CMBaseObjectGetDerivedStorage();
  if (*(result + 40))
  {
    if (*(result + 67))
    {
      v1 = 0;
    }

    else if (*(result + 65) && *(result + 66))
    {
      v1 = 0x7FFFFFFFFFFFFFFFLL;
      if (!*(result + 64))
      {
        v1 = 0;
      }
    }

    else
    {
      v1 = *(result + 56);
    }

    if (v1 != *(result + 48))
    {
      *(result + 48) = v1;

      return figNetworkCostMonitorUpdateGlobalEstimatedMaximumDemandWithMutex();
    }
  }

  return result;
}

uint64_t figNetworkCostHandleNetworkPathEvaluatorUpdate(uint64_t result)
{
  if (result)
  {
    v1 = result;
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    FigSimpleMutexLock();
    *(DerivedStorage + 32) = FigNetworkPathInformationDoesUseCellular();
    figNetworkCostUpdateHighSpeedHighPowerAndCheckForChangesWithMutex(v1);

    return FigSimpleMutexUnlock();
  }

  return result;
}

void figNetworkCostMonitorDispatchHighSpeedHighPowerFn(uint64_t a1, const void *a2)
{
  v4 = (a1 + 8);
  v18 = *(a1 + 8);
  v19 = *(a1 + 16);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*v4)
  {
    v6 = *(DerivedStorage + 16);
    if (a2)
    {
      CFRetain(a2);
    }

    if (*a1)
    {
      CFRetain(*a1);
    }

    v7 = OUTLINED_FUNCTION_1_187();
    v10 = 3254779904;
    v11 = __figNetworkCostMonitorDispatchHighSpeedHighPowerFn_block_invoke;
    v12 = &__block_descriptor_65_e8_48n27_8_8_pa0_42070_0_pa0_24404_8_e5_v8__0l;
    v13 = v8;
    v15 = v18;
    v16 = v19;
    v14 = a2;
    v17 = v6;
    dispatch_async(v7, block);
  }
}

void __figNetworkCostMonitorDispatchHighSpeedHighPowerFn_block_invoke(uint64_t a1)
{
  v2 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v2)
  {
    (*(a1 + 48))(*(a1 + 40), v2, *(a1 + 64));
  }

  v3 = *(a1 + 40);
  if (v3)
  {
    CFRelease(v3);
  }

  if (v2)
  {
    CFRelease(v2);
  }

  v4 = *(a1 + 32);
  if (v4)
  {

    CFRelease(v4);
  }
}

void figNetworkCostMonitorDispatchIsExpensiveFn(uint64_t a1, const void *a2)
{
  v18 = *(a1 + 8);
  v4 = (a1 + 16);
  v19 = *(a1 + 16);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*v4)
  {
    v6 = *(DerivedStorage + 17);
    if (a2)
    {
      CFRetain(a2);
    }

    if (*a1)
    {
      CFRetain(*a1);
    }

    v7 = OUTLINED_FUNCTION_1_187();
    v10 = 3254779904;
    v11 = __figNetworkCostMonitorDispatchIsExpensiveFn_block_invoke;
    v12 = &__block_descriptor_65_e8_48n27_8_8_pa0_42070_0_pa0_24404_8_e5_v8__0l;
    v13 = v8;
    v15 = v18;
    v16 = v19;
    v14 = a2;
    v17 = v6;
    dispatch_async(v7, block);
  }
}

void __figNetworkCostMonitorDispatchIsExpensiveFn_block_invoke(uint64_t a1)
{
  v2 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v2)
  {
    (*(a1 + 56))(*(a1 + 40), v2, *(a1 + 64));
  }

  v3 = *(a1 + 40);
  if (v3)
  {
    CFRelease(v3);
  }

  if (v2)
  {
    CFRelease(v2);
  }

  v4 = *(a1 + 32);
  if (v4)
  {

    CFRelease(v4);
  }
}

uint64_t FigNetworkCostMonitorCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkCostMonitorCreate_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkCostMonitorCreate_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkCostMonitorCreate_cold_6(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t FigNetworkCostMonitorCreate_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkCostMonitorCreate_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkCostMonitorCreate_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkCostMonitorCreate_cold_10(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figNetworkCostCopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figNetworkCostCopyProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figNetworkCostSetProperty_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

void figNetworkCostSetProperty_cold_2(uint64_t *a1, uint64_t a2, void *a3)
{
  v5 = *a1;
  v6 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (v6)
  {
    v7 = v6(v5);
  }

  else
  {
    v7 = 0;
  }

  *(a2 + 32) = FigNetworkPathInformationDoesUseCellular();
  IsExpensive = FigNetworkPathInformationIsExpensive();
  figNetworkCostUpdateConnectedInterfaceIsExpensiveWithMutex(a3, IsExpensive);
  if (v7)
  {

    CFRelease(v7);
  }
}

uint64_t figNetworkCostMonitorSetDelegate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figNetworkCostMonitorSetDelegate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fcks_server_handleRemoteSyncMessage()
{
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
    return OpCode;
  }

  else
  {
    return 4294950002;
  }
}

uint64_t fcks_server_keyResponseErrorCallback(uint64_t a1)
{
  if (a1)
  {
    OUTLINED_FUNCTION_9_38();
    if (v3)
    {
      if (*(v1 + 16))
      {
        v4 = v2;
        if (!FigXPCCreateBasicMessage() && !FigXPCMessageSetCFString())
        {
          xpc_dictionary_set_uint64(0, "CryptorRequestID", v4);
          if (!FigXPCMessageSetCFError())
          {
            xpc_connection_send_message(*(v1 + 16), 0);
          }
        }
      }
    }
  }

  return FigXPCRelease();
}

uint64_t fcks_server_keyResponseSuccessfullyProcessedCallback(uint64_t a1)
{
  if (a1)
  {
    OUTLINED_FUNCTION_9_38();
    if (v3)
    {
      if (*(v1 + 16))
      {
        v4 = v2;
        if (!FigXPCCreateBasicMessage() && !FigXPCMessageSetCFString())
        {
          xpc_dictionary_set_uint64(0, "CryptorRequestID", v4);
          xpc_connection_send_message(*(v1 + 16), 0);
        }
      }
    }
  }

  return FigXPCRelease();
}

uint64_t fcks_server_persistentKeyUpdatedCallback(uint64_t a1)
{
  if (a1)
  {
    OUTLINED_FUNCTION_9_38();
    if (v2)
    {
      if (*(v1 + 16) && !FigXPCCreateBasicMessage() && !FigXPCMessageSetCFString() && !FigXPCMessageSetCFData())
      {
        xpc_connection_send_message(*(v1 + 16), 0);
      }
    }
  }

  return FigXPCRelease();
}

uint64_t fcks_server_secureStopDidFinalizeRecordCallback(uint64_t a1)
{
  if (a1)
  {
    OUTLINED_FUNCTION_9_38();
    if (v2)
    {
      if (*(v1 + 16) && !FigXPCCreateBasicMessage())
      {
        xpc_connection_send_message(*(v1 + 16), 0);
      }
    }
  }

  return FigXPCRelease();
}

uint64_t fcks_server_externalProtectionStateChangedCallback(uint64_t a1)
{
  if (a1)
  {
    OUTLINED_FUNCTION_9_38();
    if (v2)
    {
      if (*(v1 + 16) && !FigXPCCreateBasicMessage() && !FigXPCMessageSetCFString())
      {
        xpc_connection_send_message(*(v1 + 16), 0);
      }
    }
  }

  return FigXPCRelease();
}

uint64_t fcks_server_copySessionByObjectIDForConnection(int a1, xpc_object_t xdict)
{
  if (!xpc_dictionary_get_uint64(xdict, *MEMORY[0x1E69615A0]))
  {
    return 4294950006;
  }

  v2 = FigXPCServerLookupAndRetainAssociatedObject();
  if (!v2)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    return FigSignalErrorAtGM();
  }

  return v2;
}

uint64_t FigContentKeySessionServerGetIDForSessionByAssociatingWithClientConnection_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigContentKeySessionServerGetIDForSessionByAssociatingWithClientConnection_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigContentKeySessionServerGetIDForSessionByAssociatingWithClientConnection_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigIOMFSelectBestDigitalOutMode()
{
  SupportedDigitalOutModes = IOMobileFramebufferGetSupportedDigitalOutModes();
  if (SupportedDigitalOutModes)
  {
    return SupportedDigitalOutModes;
  }

  else
  {
    return 3758097136;
  }
}

uint64_t FigCaptionCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionCreateMutableCopy_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionCreateMutableCopy_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionCreateCopyWithNewTiming_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionCreateCopyWithNewTiming_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigRemote_CreateMetadataPropertiesFromBinaryPListData(uint64_t a1, uint64_t a2, uint64_t a3, void *a4)
{
  cf = 0;
  if (!a4)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
LABEL_12:
    v6 = FigSignalErrorAtGM();
    goto LABEL_13;
  }

  v5 = a3;
  v6 = MEMORY[0x19A8D2B00](a1, a2, a3, &cf);
  if (!v6)
  {
    v7 = cf;
    if (!cf)
    {
LABEL_6:
      v9 = 0;
      *a4 = v7;
      goto LABEL_7;
    }

    v8 = CFGetTypeID(cf);
    if (v8 == CFDictionaryGetTypeID())
    {
      v7 = FigRemote_CopyMetadataItemWithLocaleAsCFLocale(v5, cf);
      goto LABEL_6;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    goto LABEL_12;
  }

LABEL_13:
  v9 = v6;
LABEL_7:
  if (cf)
  {
    CFRelease(cf);
  }

  return v9;
}

__CFDictionary *FigRemote_CopyMetadataItemWithLocaleAsCFLocale(int a1, const void *a2)
{
  if (!a2)
  {
    return 0;
  }

  v4 = OUTLINED_FUNCTION_3_155(a1, a2);
  if (v4 != CFDictionaryGetTypeID())
  {
    return 0;
  }

  v5 = OUTLINED_FUNCTION_7_102();
  if (!v5)
  {
    goto LABEL_11;
  }

  v6 = v5;
  v7 = CFGetTypeID(v5);
  if (v7 != CFStringGetTypeID())
  {
    goto LABEL_11;
  }

  v8 = CFLocaleCreate(v3, v6);
  if (!v8)
  {
    return 0;
  }

  v9 = v8;
  v10 = OUTLINED_FUNCTION_2_184();
  if (v10)
  {
    v11 = v10;
    OUTLINED_FUNCTION_6_118(v10);
    CFRelease(v9);
    return v11;
  }

  CFRelease(v9);
LABEL_11:

  return CFRetain(v2);
}

__CFDictionary *FigRemote_CopyMetadataItemWithLocaleAsCFString(int a1, const void *a2)
{
  if (!a2)
  {
    return 0;
  }

  v3 = OUTLINED_FUNCTION_3_155(a1, a2);
  if (v3 != CFDictionaryGetTypeID())
  {
    return 0;
  }

  v4 = OUTLINED_FUNCTION_7_102();
  if (!v4)
  {
    goto LABEL_8;
  }

  v5 = v4;
  v6 = CFGetTypeID(v4);
  if (v6 != CFLocaleGetTypeID())
  {
    goto LABEL_8;
  }

  if (!MEMORY[0x19A8CD070](v5))
  {
    return 0;
  }

  v7 = OUTLINED_FUNCTION_2_184();
  if (v7)
  {
    v8 = v7;
    OUTLINED_FUNCTION_6_118(v7);
    return v8;
  }

LABEL_8:

  return CFRetain(v2);
}

const __CFDictionary *FigRemote_CopyMetadataItemWithCFStringAsUnsafeCFType(int a1, const void *a2, int a3)
{
  if (!a2)
  {
    return 0;
  }

  v7 = OUTLINED_FUNCTION_3_155(a1, a2);
  if (v7 != CFDictionaryGetTypeID())
  {
    return 0;
  }

  v8 = OUTLINED_FUNCTION_7_102();
  Value = CFDictionaryGetValue(v3, @"keyspace");
  v10 = 0;
  if (a3 && Value)
  {
    if (CFEqual(Value, @"org.id3"))
    {
      v11 = CFDictionaryGetValue(v3, @"key");
      v10 = v11;
      if (!v11)
      {
        goto LABEL_21;
      }

      v12 = CFGetTypeID(v11);
      TypeID = CFNumberGetTypeID();
      if (v12 == TypeID)
      {
        OUTLINED_FUNCTION_5_132(TypeID, v14, v15, v16, v17, v18, v19, v20, v30, v31, SHIDWORD(v31));
        if (v32 == 87)
        {
          v21 = CFDictionaryGetValue(v3, @"value");
          v10 = v21;
          if (!v21)
          {
            goto LABEL_21;
          }

          CFGetTypeID(v21);
          OUTLINED_FUNCTION_4_151();
          if (v22)
          {
            if (v5 == CFDictionaryGetTypeID())
            {
              Mutable = CFDictionaryCreateMutable(v4, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
              if (Mutable)
              {
                v24 = Mutable;
                CFDictionaryApplyFunction(v10, figRemote_ID3ConvertStringToURL, Mutable);
LABEL_17:
                v25 = OUTLINED_FUNCTION_2_184();
                v10 = v25;
                if (v25)
                {
                  CFDictionaryReplaceValue(v25, @"value", v24);
                }

                CFRelease(v24);
                goto LABEL_21;
              }
            }
          }

          else if (v5 == CFStringGetTypeID())
          {
            v24 = CFURLCreateWithString(*MEMORY[0x1E695E480], v10, 0);
            if (v24)
            {
              goto LABEL_17;
            }
          }
        }
      }
    }

    v10 = 0;
  }

LABEL_21:
  if (v8)
  {
    v26 = CFGetTypeID(v8);
    if (v26 == CFStringGetTypeID())
    {
      v27 = CFLocaleCreate(v4, v8);
      if (!v27)
      {
        return v10;
      }

      v28 = v27;
      if (v10 || (v10 = OUTLINED_FUNCTION_2_184()) != 0)
      {
        OUTLINED_FUNCTION_6_118(v10);
      }

      CFRelease(v28);
    }
  }

  if (!v10)
  {
    return CFRetain(v3);
  }

  return v10;
}

const __CFDictionary *FigRemote_CopyMetadataItemWithUnsafeCFTypeAsCFString(int a1, const void *a2)
{
  if (!a2)
  {
    return 0;
  }

  v5 = OUTLINED_FUNCTION_3_155(a1, a2);
  if (v5 != CFDictionaryGetTypeID())
  {
    return 0;
  }

  v6 = OUTLINED_FUNCTION_7_102();
  Value = CFDictionaryGetValue(v2, @"keyspace");
  if (!Value || !CFEqual(Value, @"org.id3"))
  {
    goto LABEL_20;
  }

  v8 = CFDictionaryGetValue(v2, @"key");
  v9 = v8;
  if (!v8)
  {
    goto LABEL_21;
  }

  v10 = CFGetTypeID(v8);
  TypeID = CFNumberGetTypeID();
  if (v10 != TypeID)
  {
    goto LABEL_20;
  }

  OUTLINED_FUNCTION_5_132(TypeID, v12, v13, v14, v15, v16, v17, v18, v28, v29, SHIDWORD(v29));
  if (v30 != 87)
  {
    goto LABEL_20;
  }

  v19 = CFDictionaryGetValue(v2, @"value");
  v9 = v19;
  if (!v19)
  {
    goto LABEL_21;
  }

  CFGetTypeID(v19);
  OUTLINED_FUNCTION_4_151();
  if (v20)
  {
    if (v4 == CFDictionaryGetTypeID())
    {
      Mutable = CFDictionaryCreateMutable(v3, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      if (Mutable)
      {
        v22 = Mutable;
        CFDictionaryApplyFunction(v9, figRemote_ID3ConvertURLToString, Mutable);
        goto LABEL_18;
      }
    }

    goto LABEL_20;
  }

  if (v4 != CFURLGetTypeID() || (v23 = CFURLCopyAbsoluteURL(v9)) == 0)
  {
LABEL_20:
    v9 = 0;
    goto LABEL_21;
  }

  v22 = v23;
  v24 = CFURLGetString(v23);
  if (!v24)
  {
    v9 = 0;
    goto LABEL_28;
  }

  v9 = CFRetain(v24);
  CFRelease(v22);
  v22 = v9;
  if (!v9)
  {
LABEL_21:
    if (!v6)
    {
      goto LABEL_29;
    }

    goto LABEL_22;
  }

LABEL_18:
  v25 = OUTLINED_FUNCTION_2_184();
  v9 = v25;
  if (v25)
  {
    CFDictionaryReplaceValue(v25, @"value", v22);
  }

LABEL_28:
  CFRelease(v22);
  if (!v6)
  {
LABEL_29:
    if (!v9)
    {
      return CFRetain(v2);
    }

    return v9;
  }

LABEL_22:
  v26 = CFGetTypeID(v6);
  if (v26 != CFLocaleGetTypeID())
  {
    goto LABEL_29;
  }

  if (MEMORY[0x19A8CD070](v6))
  {
    if (!v9)
    {
      v9 = OUTLINED_FUNCTION_2_184();
      if (!v9)
      {
        return CFRetain(v2);
      }
    }

    OUTLINED_FUNCTION_6_118(v9);
  }

  return v9;
}

uint64_t FigRemote_CreateMetadataItemArrayFromBinaryPListData(CFDataRef theData, const __CFAllocator *a2, int a3, __CFArray **a4)
{
  cf = 0;
  if (!a4)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
LABEL_24:
    v11 = FigSignalErrorAtGM();
    goto LABEL_25;
  }

  if (!theData)
  {
    return 0;
  }

  BytePtr = CFDataGetBytePtr(theData);
  Length = CFDataGetLength(theData);
  v10 = 0;
  if (!BytePtr || !Length)
  {
    goto LABEL_17;
  }

  v11 = MEMORY[0x19A8D2B00](BytePtr, Length, a2, &cf);
  if (!v11)
  {
    if (cf)
    {
      v12 = CFGetTypeID(cf);
      if (v12 == CFArrayGetTypeID())
      {
        Count = CFArrayGetCount(cf);
        if (!Count)
        {
          v10 = 0;
LABEL_17:
          v20 = 0;
          *a4 = v10;
          goto LABEL_18;
        }

        v14 = Count;
        Mutable = CFArrayCreateMutable(a2, Count, MEMORY[0x1E695E9C0]);
        if (Mutable)
        {
          v10 = Mutable;
          if (v14 >= 1)
          {
            for (i = 0; i != v14; ++i)
            {
              ValueAtIndex = CFArrayGetValueAtIndex(cf, i);
              v18 = FigRemote_CopyMetadataItemWithCFStringAsUnsafeCFType(a2, ValueAtIndex, a3);
              if (v18)
              {
                v19 = v18;
                CFArrayAppendValue(v10, v18);
                CFRelease(v19);
              }
            }
          }

          goto LABEL_17;
        }
      }
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
    goto LABEL_24;
  }

LABEL_25:
  v20 = v11;
LABEL_18:
  if (cf)
  {
    CFRelease(cf);
  }

  return v20;
}

uint64_t FigRemote_CreateMetadataFromBinaryPListData(const void *a1, uint64_t a2, __CFArray **a3)
{
  cf = 0;
  if (!a1 || (v6 = CFGetTypeID(a1), v6 != CFDataGetTypeID()) || !a3)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
LABEL_42:
    v9 = FigSignalErrorAtGM();
    goto LABEL_43;
  }

  BytePtr = CFDataGetBytePtr(a1);
  Length = CFDataGetLength(a1);
  v9 = MEMORY[0x19A8D2B00](BytePtr, Length, a2, &cf);
  if (v9)
  {
LABEL_43:
    v32 = v9;
    goto LABEL_38;
  }

  v34 = a3;
  if (cf)
  {
    v10 = CFGetTypeID(cf);
    if (v10 == CFArrayGetTypeID())
    {
      if (cf)
      {
        Count = CFArrayGetCount(cf);
        if (Count >= 1)
        {
          v12 = Count;
          v35 = 0;
          v13 = 0;
          allocator = *MEMORY[0x1E695E480];
          while (1)
          {
            ValueAtIndex = CFArrayGetValueAtIndex(cf, v13);
            if (!ValueAtIndex || (v15 = ValueAtIndex, v16 = CFGetTypeID(ValueAtIndex), v16 != CFDictionaryGetTypeID()))
            {
              fig_log_get_emitter();
              goto LABEL_42;
            }

            Value = CFDictionaryGetValue(v15, @"items");
            if (Value)
            {
              v18 = Value;
              v19 = CFGetTypeID(Value);
              if (v19 == CFArrayGetTypeID())
              {
                v20 = CFArrayGetCount(v18);
                if (v20 >= 1)
                {
                  v21 = v20;
                  Mutable = 0;
                  for (i = 0; i != v21; ++i)
                  {
                    v24 = CFArrayGetValueAtIndex(v18, i);
                    if (v24)
                    {
                      v25 = v24;
                      v26 = CFGetTypeID(v24);
                      if (v26 == CFDictionaryGetTypeID())
                      {
                        v27 = FigRemote_CopyMetadataItemWithLocaleAsCFLocale(allocator, v25);
                        if (v27)
                        {
                          v28 = v27;
                          if (!Mutable)
                          {
                            Mutable = CFArrayCreateMutable(allocator, 0, MEMORY[0x1E695E9C0]);
                          }

                          CFArrayAppendValue(Mutable, v28);
                          CFRelease(v28);
                        }
                      }
                    }
                  }

                  if (Mutable)
                  {
                    if (CFArrayGetCount(Mutable) < 1)
                    {
                      v29 = Mutable;
                    }

                    else
                    {
                      v29 = CFDictionaryCreateMutable(allocator, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
                      CFDictionaryAddValue(v29, @"items", Mutable);
                      v30 = CFDictionaryGetValue(v15, @"format");
                      if (v30)
                      {
                        CFDictionaryAddValue(v29, @"format", v30);
                      }

                      CFRelease(Mutable);
                      if (!v29)
                      {
                        goto LABEL_34;
                      }

                      v31 = v35;
                      if (!v35)
                      {
                        v31 = CFArrayCreateMutable(allocator, 0, MEMORY[0x1E695E9C0]);
                      }

                      v35 = v31;
                      CFArrayAppendValue(v31, v29);
                    }

                    CFRelease(v29);
                  }
                }
              }
            }

LABEL_34:
            if (++v13 == v12)
            {
              goto LABEL_37;
            }
          }
        }
      }

      goto LABEL_36;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
    goto LABEL_42;
  }

LABEL_36:
  v35 = 0;
LABEL_37:
  v32 = 0;
  *v34 = v35;
LABEL_38:
  if (cf)
  {
    CFRelease(cf);
  }

  return v32;
}

uint64_t FigRemote_CreateMetadataBinaryPListData_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigRemote_CreateBinaryPListDataFromMetadataItemArray_cold_1(CFArrayRef theArray, int a2, uint64_t a3, __CFArray *a4)
{
  v8 = 0;
  do
  {
    ValueAtIndex = CFArrayGetValueAtIndex(theArray, v8);
    v10 = FigRemote_CopyMetadataItemWithUnsafeCFTypeAsCFString(a2, ValueAtIndex);
    if (v10)
    {
      v11 = v10;
      CFArrayAppendValue(a4, v10);
      CFRelease(v11);
    }

    ++v8;
  }

  while (a3 != v8);
}

uint64_t FigRemote_CreateBinaryPListDataFromMetadataItemArray_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigRemote_CreateBinaryPListDataFromMetadataItemArray_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __FigHapticEngineStartPlayerAtHostTimeWithOffset_block_invoke(uint64_t a1)
{
  v2 = *(a1 + 40);
  v3 = *(a1 + 48);
  *&v8.value = *(a1 + 56);
  v8.epoch = *(a1 + 72);
  *&v7.value = *(a1 + 80);
  v7.epoch = *(a1 + 96);
  v12 = 0;
  dispatch_assert_queue_V2(*(v3 + 96));
  result = figHapticEngineStartOnActivityQueue(v2);
  if (!result)
  {
    memset(&v11, 0, sizeof(v11));
    lhs = *(v3 + 16);
    rhs = v7;
    CMTimeAdd(&v11, &lhs, &rhs);
    lhs = v11;
    Seconds = CMTimeGetSeconds(&lhs);
    lhs = v8;
    v6 = CMTimeGetSeconds(&lhs);
    if (Seconds <= 0.0 || ([*(v3 + 88) seekToOffset:&v12 error:Seconds]) && (objc_msgSend(*(v3 + 88), "startAtTime:error:", &v12, v6, *&v7.value, v7.epoch))
    {
      result = 0;
    }

    else
    {
      [v12 code];
      result = FigSignalErrorAtGM();
    }
  }

  *(*(*(a1 + 32) + 8) + 24) = result;
  return result;
}

uint64_t FigHapticEngineCreate_cold_2(void *a1, void *a2)
{
  result = [a1 isEqualToString:@"Default"];
  if (result)
  {
    v5 = MEMORY[0x1E695F4E8];
  }

  else
  {
    result = [a1 isEqualToString:@"FullGamut"];
    if (result)
    {
      v5 = MEMORY[0x1E695F500];
    }

    else
    {
      result = [a1 isEqualToString:@"DefaultWithFullStrength"];
      if ((result & 1) == 0)
      {
        return result;
      }

      v5 = MEMORY[0x1E695F4F8];
    }
  }

  if (*v5)
  {
    return [a2 setValue:*v5 forKey:*MEMORY[0x1E695F4B0]];
  }

  return result;
}

uint64_t FigHapticEngineCreate_cold_3(id *a1, _DWORD *a2)
{
  [*a1 code];
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t FigHapticEngineCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticEngineCreate_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticPlayerCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticPlayerCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticPlayerCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVirtualDisplayPrefsGetBoolean(const __CFString *a1, Boolean *a2)
{
  keyExistsAndHasValidFormat = 0;
  if (FigVirtualDisplayPrefsAllowed_once != -1)
  {
    dispatch_once(&FigVirtualDisplayPrefsAllowed_once, &__block_literal_global_134);
  }

  OUTLINED_FUNCTION_0_205();
  if (v4)
  {
    result = CFPreferencesGetAppBooleanValue(a1, @"com.apple.coremedia", &keyExistsAndHasValidFormat);
    if (!a2)
    {
      return result;
    }
  }

  else
  {
    result = 0;
    if (!a2)
    {
      return result;
    }
  }

  *a2 = keyExistsAndHasValidFormat;
  return result;
}

CFIndex FigVirtualDisplayPrefsGetInteger(const __CFString *a1, Boolean *a2)
{
  keyExistsAndHasValidFormat = 0;
  if (FigVirtualDisplayPrefsAllowed_once != -1)
  {
    dispatch_once(&FigVirtualDisplayPrefsAllowed_once, &__block_literal_global_134);
  }

  OUTLINED_FUNCTION_0_205();
  if (v4)
  {
    result = CFPreferencesGetAppIntegerValue(a1, @"com.apple.coremedia", &keyExistsAndHasValidFormat);
    if (!a2)
    {
      return result;
    }
  }

  else
  {
    result = 0;
    if (!a2)
    {
      return result;
    }
  }

  *a2 = keyExistsAndHasValidFormat;
  return result;
}

double FigVirtualDisplayPrefsGetDouble(const __CFString *a1, char *a2)
{
  valuePtr = 0.0;
  if (FigVirtualDisplayPrefsAllowed_once != -1)
  {
    dispatch_once(&FigVirtualDisplayPrefsAllowed_once, &__block_literal_global_134);
  }

  OUTLINED_FUNCTION_0_205();
  if (!v4 || (v5 = CFPreferencesCopyAppValue(a1, @"com.apple.coremedia")) == 0)
  {
    v9 = 0;
    if (!a2)
    {
      return valuePtr;
    }

    goto LABEL_12;
  }

  v6 = v5;
  v7 = CFGetTypeID(v5);
  if (v7 == CFStringGetTypeID())
  {
    valuePtr = CFStringGetDoubleValue(v6);
LABEL_9:
    v9 = 1;
    goto LABEL_11;
  }

  v8 = CFGetTypeID(v6);
  if (v8 == CFNumberGetTypeID())
  {
    CFNumberGetValue(v6, kCFNumberDoubleType, &valuePtr);
    goto LABEL_9;
  }

  v9 = 0;
LABEL_11:
  CFRelease(v6);
  if (a2)
  {
LABEL_12:
    *a2 = v9;
  }

  return valuePtr;
}

CFPropertyListRef FigVirtualDisplayPrefsCopyValue(const __CFString *a1)
{
  if (FigVirtualDisplayPrefsAllowed_once != -1)
  {
    dispatch_once(&FigVirtualDisplayPrefsAllowed_once, &__block_literal_global_134);
  }

  OUTLINED_FUNCTION_0_205();
  if (!v2)
  {
    return 0;
  }

  return CFPreferencesCopyAppValue(a1, @"com.apple.coremedia");
}

uint64_t FigVirtualDisplayPrefsGetBooleanWithDefault(const __CFString *a1, unsigned int a2)
{
  v4 = 0;
  LODWORD(result) = FigVirtualDisplayPrefsGetBoolean(a1, &v4);
  if (v4)
  {
    return result;
  }

  else
  {
    return a2;
  }
}

uint64_t FigAirPlayMediaSelectionCopyProperty(uint64_t a1, CFTypeRef cf1, uint64_t a3, const __CFArray **a4)
{
  result = 0;
  if (cf1 && !*(a1 + 16))
  {
    if (CFEqual(cf1, @"ClientSelectedMediaArray"))
    {
      v8 = *(a1 + 112);
      if (v8)
      {
LABEL_5:
        v9 = CFRetain(v8);
LABEL_8:
        MutableCopy = v9;
LABEL_83:
        result = 0;
        *a4 = MutableCopy;
        return result;
      }

LABEL_82:
      MutableCopy = 0;
      goto LABEL_83;
    }

    if (CFEqual(cf1, @"SelectedMediaArray"))
    {
      v9 = airPlayMediaSelection_copySelectedMediaArray(a1);
      goto LABEL_8;
    }

    v11 = CFEqual(cf1, @"SelectedMediaArrayWithAutomaticMediaSelection");
    v12 = MEMORY[0x1E695E480];
    if (!v11)
    {
      if (CFEqual(cf1, @"SelectedMediaArrayForSubItem"))
      {
        v16 = airPlayMediaSelection_copySelectedMediaArray(a1);
        v53 = 0;
        if (v16)
        {
          v17 = v16;
          v18 = *v12;
          MutableCopy = CFArrayCreateMutableCopy(*v12, 0, v16);
          v19 = airPlayMediaSelection_copyAssetProperty(a1, v18, @"MediaSelectionArray", &v53);
          v20 = v53;
          if (!v19)
          {
            FigMediaSelectionGroupsMatchToMediaSelectionArray(MutableCopy, v53);
          }

          CFRelease(v17);
          if (v20)
          {
            CFRelease(v20);
          }

          goto LABEL_83;
        }
      }

      else if (CFEqual(cf1, @"MediaPresentationLanguages"))
      {
        v8 = *(a1 + 64);
        if (v8)
        {
          goto LABEL_5;
        }
      }

      else if (CFEqual(cf1, @"MediaPresentationCharacteristics"))
      {
        v8 = *(a1 + 72);
        if (v8)
        {
          goto LABEL_5;
        }
      }

      else
      {
        if (!CFEqual(cf1, @"mediaCharacteristicsForCustomMediaSelectionSchemes"))
        {
          return 4294954436;
        }

        v8 = *(a1 + 80);
        if (v8)
        {
          goto LABEL_5;
        }
      }

      goto LABEL_82;
    }

    v52 = 0;
    v53 = 0;
    cf = 0;
    if (*(a1 + 16))
    {
LABEL_73:
      MutableCopy = v53;
      goto LABEL_83;
    }

    v13 = *MEMORY[0x1E695E480];
    if (airPlayMediaSelection_copyAssetProperty(a1, *MEMORY[0x1E695E480], @"MediaSelectionArray", &cf) || airPlayMediaSelection_copyAssetProperty(a1, v13, @"assetProperty_AssetType", &v52))
    {
LABEL_69:
      if (v52)
      {
        CFRelease(v52);
      }

      if (cf)
      {
        CFRelease(cf);
      }

      goto LABEL_73;
    }

    FigSimpleMutexLock();
    if (*(a1 + 32))
    {
      v14 = *(a1 + 80);
      if (v14 && CFArrayGetCount(v14) > 0)
      {
        v15 = 0;
      }

      else
      {
        v15 = *(a1 + 112);
      }

      v21 = cf;
      if (!cf)
      {
        v22 = 0;
        goto LABEL_88;
      }

      v22 = 0;
      if (FigAutomaticMediaSelectionCreateSelectedMediaArrayForCriteriaWithLegibleFallbackCriteria(cf, v15, *(a1 + 40), *(a1 + 64), *(a1 + 72), *(a1 + 48), 0, *(a1 + 56), 0, &v53))
      {
LABEL_88:
        FigSimpleMutexUnlock();
        if (!v22)
        {
          goto LABEL_69;
        }

        goto LABEL_68;
      }
    }

    else
    {
      FigSimpleMutexUnlock();
      v22 = airPlayMediaSelection_copySelectedMediaArray(a1);
      FigSimpleMutexLock();
      v23 = FigCFArrayCreateMutableCopy();
      v53 = v23;
      if (!v23)
      {
        FigSignalErrorAtGM();
        goto LABEL_88;
      }

      if (FigAutomaticMediaSelectionCoalesceSelectedMediaArrays(v23, *(a1 + 112), 1))
      {
        goto LABEL_88;
      }

      v21 = cf;
    }

    FigSimpleMutexUnlock();
    if (!FigMediaSelectionGroupsMatchToMediaSelectionArray(v53, v21))
    {
      if (*(a1 + 88))
      {
        if (v52 == @"com.apple.coremedia.assettype.file")
        {
          if (v21)
          {
            v24 = v53;
            if (v53)
            {
              v45 = v22;
              v46 = a4;
              Count = CFArrayGetCount(v21);
              v47 = FigCFArrayCreateMutableCopy();
              if (!v47)
              {
                FigSignalErrorAtGM();
                goto LABEL_66;
              }

              if (CFArrayGetCount(v24) >= 1)
              {
                v26 = 0;
                v48 = *MEMORY[0x1E695E738];
                theArray = v24;
                do
                {
                  ValueAtIndex = CFArrayGetValueAtIndex(v24, v26);
                  if (CFDictionaryGetValue(ValueAtIndex, @"MediaSelectionGroupID"))
                  {
                    Value = CFDictionaryGetValue(ValueAtIndex, @"MediaSelectionOptionsPersistentID");
                    if (Value)
                    {
                      if (Value != v48 && Count >= 1)
                      {
                        v30 = 0;
                        while (1)
                        {
                          v31 = CFArrayGetValueAtIndex(v21, v30);
                          if (v31)
                          {
                            v32 = v31;
                            v33 = CFGetTypeID(v31);
                            if (v33 == CFDictionaryGetTypeID())
                            {
                              CFDictionaryGetValue(v32, @"MediaSelectionGroupID");
                              if (FigCFEqual())
                              {
                                break;
                              }
                            }
                          }

                          if (Count == ++v30)
                          {
                            goto LABEL_49;
                          }
                        }

                        v34 = CFDictionaryGetValue(v32, @"MediaSelectionGroupOptions");
                        if (v34)
                        {
                          v35 = v34;
                          v49 = CFArrayGetCount(v34);
                          if (v49 >= 1)
                          {
                            v36 = 0;
                            while (1)
                            {
                              v37 = CFArrayGetValueAtIndex(v35, v36);
                              if (v37)
                              {
                                v38 = v37;
                                v39 = CFGetTypeID(v37);
                                if (v39 == CFDictionaryGetTypeID())
                                {
                                  CFDictionaryGetValue(v38, @"MediaSelectionOptionsPersistentID");
                                  if (FigCFEqual())
                                  {
                                    break;
                                  }
                                }
                              }

                              if (v49 == ++v36)
                              {
                                goto LABEL_49;
                              }
                            }

                            v40 = CFDictionaryGetValue(v38, @"MediaSelectionOptionsFallbackIDs");
                            if (v40)
                            {
                              v41 = v40;
                              if (CFArrayGetCount(v40) >= 1)
                              {
                                v42 = FigCFDictionaryCreateMutableCopy();
                                if (!v42)
                                {
                                  FigSignalErrorAtGM();
                                  CFRelease(v47);
                                  goto LABEL_66;
                                }

                                v43 = v42;
                                v44 = CFArrayGetValueAtIndex(v41, 0);
                                CFDictionarySetValue(v43, @"MediaSelectionOptionsPersistentID", v44);
                                CFArraySetValueAtIndex(v47, v26, v43);
                                CFRelease(v43);
                              }
                            }
                          }
                        }
                      }
                    }
                  }

LABEL_49:
                  ++v26;
                  v24 = theArray;
                }

                while (v26 < CFArrayGetCount(theArray));
              }

              if (v53)
              {
                CFRelease(v53);
              }

              v53 = v47;
LABEL_66:
              v22 = v45;
              a4 = v46;
            }
          }
        }
      }
    }

    if (!v22)
    {
      goto LABEL_69;
    }

LABEL_68:
    CFRelease(v22);
    goto LABEL_69;
  }

  return result;
}

uint64_t FigAirPlayMediaSelectionSetProperty(uint64_t a1, CFTypeRef cf1, const __CFBoolean *a3)
{
  result = 0;
  if (!cf1 || *(a1 + 16))
  {
    return result;
  }

  if (CFEqual(cf1, @"AppliesMediaSelectionCriteriaAutomatically"))
  {
    Value = CFBooleanGetValue(a3);
    result = 0;
    *(a1 + 32) = Value;
    return result;
  }

  if (CFEqual(cf1, @"ClientMediaSelectionCriteria"))
  {
    v8 = *(a1 + 40);
    *(a1 + 40) = a3;
    if (!a3)
    {
LABEL_8:
      if (v8)
      {
        CFRelease(v8);
      }

      return 0;
    }

LABEL_7:
    CFRetain(a3);
    goto LABEL_8;
  }

  if (CFEqual(cf1, @"ClientLegibleFallbackMediaSelectionCriteria"))
  {
    v8 = *(a1 + 48);
    *(a1 + 48) = a3;
    if (!a3)
    {
      goto LABEL_8;
    }

    goto LABEL_7;
  }

  if (CFEqual(cf1, @"AllowsLegibleFallbackMediaSelectionCriteriaForAllAudibleMediaSelections"))
  {
    v9 = CFBooleanGetValue(a3);
    result = 0;
    *(a1 + 56) = v9;
    return result;
  }

  if (CFEqual(cf1, @"MediaPresentationLanguages"))
  {
    v8 = *(a1 + 64);
    *(a1 + 64) = a3;
    if (!a3)
    {
      goto LABEL_8;
    }

    goto LABEL_7;
  }

  if (CFEqual(cf1, @"MediaPresentationCharacteristics"))
  {
    v8 = *(a1 + 72);
    *(a1 + 72) = a3;
    if (!a3)
    {
      goto LABEL_8;
    }

    goto LABEL_7;
  }

  if (CFEqual(cf1, @"LastQueriedSelectedMediaArray"))
  {

    return airPlayMediaSelection_setReceiverSelectedMediaArray(a1, a3);
  }

  else
  {
    if (!CFEqual(cf1, @"ClientSelectedMediaArray"))
    {
      if (CFEqual(cf1, @"LastKnownSelectedMediaArray"))
      {
        v8 = *(a1 + 128);
        *(a1 + 128) = a3;
        if (!a3)
        {
          goto LABEL_8;
        }
      }

      else
      {
        if (!CFEqual(cf1, @"mediaCharacteristicsForCustomMediaSelectionSchemes"))
        {
          return 4294954436;
        }

        v8 = *(a1 + 80);
        *(a1 + 80) = a3;
        if (!a3)
        {
          goto LABEL_8;
        }
      }

      goto LABEL_7;
    }

    return airPlayMediaSelection_setClientSelectedMediaArray(a1, a3);
  }
}

const void *airPlayMediaSelection_setReceiverSelectedMediaArray(uint64_t a1, CFTypeRef cf)
{
  cfa = 0;
  v18 = 0;
  v15 = 0;
  v16 = 0;
  if (cf)
  {
    v3 = CFGetTypeID(cf);
    if (v3 != CFArrayGetTypeID())
    {
      v12 = 0;
      goto LABEL_25;
    }
  }

  v4 = *MEMORY[0x1E695E480];
  MutableCopy = FigCFArrayCreateMutableCopy();
  FigSimpleMutexLock();
  v6 = airPlayMediaSelection_copyAssetProperty(a1, v4, @"MediaSelectionArray", &v18);
  if (!v6)
  {
    v7 = v18;
    v6 = FigMediaSelectionGroupsMatchToMediaSelectionArray(MutableCopy, v18);
    if (!v6)
    {
      v8 = *(a1 + 120);
      *(a1 + 120) = MutableCopy;
      if (MutableCopy)
      {
        CFRetain(MutableCopy);
      }

      if (v8)
      {
        CFRelease(v8);
      }

      v9 = *(a1 + 80);
      if (v9 && CFArrayGetCount(v9) >= 1)
      {
        v6 = airPlayMediaSelection_copyAssetProperty(a1, v4, @"CustomMediaSelectionScheme", &v15);
        if (!v6)
        {
          v6 = FigAutomaticMediaSelectionCopyMediaPresentationSettingsForSelectedMedia(v4, v7, v15, MutableCopy, &cfa, &v16);
          if (!v6)
          {
            v10 = *(a1 + 64);
            v11 = cfa;
            *(a1 + 64) = cfa;
            if (v11)
            {
              CFRetain(v11);
            }

            if (v10)
            {
              CFRelease(v10);
            }

            v12 = *(a1 + 72);
            v13 = v16;
            *(a1 + 72) = v16;
            if (v13)
            {
              CFRetain(v13);
            }

            if (v12)
            {
              CFRelease(v12);
              v12 = 0;
            }

            goto LABEL_23;
          }
        }
      }

      else
      {
        v6 = FigAutomaticMediaSelectionCoalesceSelectedMediaArrays(*(a1 + 112), *(a1 + 120), 1);
      }
    }
  }

  v12 = v6;
LABEL_23:
  FigSimpleMutexUnlock();
  if (MutableCopy)
  {
    CFRelease(MutableCopy);
  }

LABEL_25:
  if (v18)
  {
    CFRelease(v18);
  }

  if (cfa)
  {
    CFRelease(cfa);
  }

  if (v16)
  {
    CFRelease(v16);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  return v12;
}

uint64_t airPlayMediaSelection_setClientSelectedMediaArray(uint64_t a1, CFTypeRef cf)
{
  cfa = 0;
  if (cf && (v3 = CFGetTypeID(cf), v3 != CFArrayGetTypeID()))
  {
    v7 = 0;
  }

  else
  {
    v4 = *MEMORY[0x1E695E480];
    MutableCopy = FigCFArrayCreateMutableCopy();
    FigSimpleMutexLock();
    v6 = airPlayMediaSelection_copyAssetProperty(a1, v4, @"MediaSelectionArray", &cfa);
    if (!v6)
    {
      v6 = FigMediaSelectionGroupsAddCrossDeviceInfoToSelectedMediaArray(MutableCopy, cfa);
      if (!v6)
      {
        v6 = FigAutomaticMediaSelectionCoalesceSelectedMediaArrays(*(a1 + 112), MutableCopy, 1);
      }
    }

    v7 = v6;
    FigSimpleMutexUnlock();
    if (MutableCopy)
    {
      CFRelease(MutableCopy);
    }
  }

  if (cfa)
  {
    CFRelease(cfa);
  }

  return v7;
}

uint64_t FigAirPlayMediaSelectionCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fcgcfs_tx3g_addSampleBuffer(uint64_t a1, opaqueCMSampleBuffer *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  values = 0;
  v58 = 0;
  v56 = 0;
  v4 = *(MEMORY[0x1E6960C98] + 16);
  *&v55.start.value = *MEMORY[0x1E6960C98];
  *&v55.start.epoch = v4;
  *&v55.duration.timescale = *(MEMORY[0x1E6960C98] + 32);
  v54 = 0;
  memset(v53, 0, sizeof(v53));
  if (!a2 || (FormatDescription = CMSampleBufferGetFormatDescription(a2), CMFormatDescriptionGetMediaType(FormatDescription) != 1952807028) && CMFormatDescriptionGetMediaType(FormatDescription) != 1935832172 || (v6 = CMSampleBufferGetFormatDescription(a2), !FigCPEIsSupportedFormatDescription(v6)) && CMFormatDescriptionGetMediaSubType(FormatDescription) != 1954034535 || !*DerivedStorage || !DerivedStorage[1])
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_114();
    Mutable = FigSignalErrorAtGM();
LABEL_80:
    value_high = Mutable;
LABEL_81:
    v39 = 0;
    goto LABEL_49;
  }

  if (!CMSampleBufferGetNumSamples(a2))
  {
    v39 = 0;
    value_high = 0;
    goto LABEL_49;
  }

  v52 = 0;
  v7 = *(MEMORY[0x1E695F050] + 16);
  v51[0] = *MEMORY[0x1E695F050];
  v51[1] = v7;
  v8 = *MEMORY[0x1E695E480];
  Mutable = FigTextSampleBufferSetUpState(v53, *MEMORY[0x1E695E480], FormatDescription);
  if (Mutable)
  {
    goto LABEL_80;
  }

  Mutable = FigCaptionDataCreateMutable();
  if (Mutable)
  {
    goto LABEL_80;
  }

  Mutable = FigTextSampleBufferCopyAttributedString(v53, v8, a2, &v56, &v52 + 1, &v52, v51);
  if (Mutable)
  {
    goto LABEL_80;
  }

  v10 = v56;
  v11 = values;
  v12 = HIBYTE(v52);
  effectiveRange.length = 0;
  v61 = 0;
  effectiveRange.location = 0;
  Length = CFAttributedStringGetLength(v56);
  if (!v10 || !v11)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_114();
    v17 = FigSignalErrorAtGM();
    goto LABEL_77;
  }

  v14 = Length;
  if (Length < 1)
  {
LABEL_72:
    value_high = 0;
    goto LABEL_43;
  }

  String = CFAttributedStringGetString(v10);
  v16 = *(*(CMBaseObjectGetVTable() + 16) + 16);
  if (!v16)
  {
    goto LABEL_42;
  }

  v17 = v16(v11, String);
  if (v17)
  {
    goto LABEL_77;
  }

  v17 = FigCaptionDynamicStyleCreate();
  if (v17)
  {
    goto LABEL_77;
  }

  v18 = v61;
  CMBaseObject = FigCaptionDataGetCMBaseObject();
  v20 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v20)
  {
LABEL_42:
    value_high = 4294954514;
    goto LABEL_43;
  }

  v17 = v20(CMBaseObject, *MEMORY[0x1E6961278], v18);
  if (v17)
  {
LABEL_77:
    value_high = v17;
    goto LABEL_43;
  }

  valuePtr = 0;
  Attributes = CFAttributedStringGetAttributes(v10, 0, &effectiveRange);
  Value = CFDictionaryGetValue(Attributes, *MEMORY[0x1E69631C0]);
  CFNumberGetValue(Value, kCFNumberSInt32Type, &valuePtr);
  v63 = 0;
  v64 = 0;
  v23 = FigCaptionRegionCreateMutable();
  if (v23)
  {
    goto LABEL_82;
  }

  v24 = FigCaptionRegionGetCMBaseObject();
  v25 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v25)
  {
    value_high = 4294954514;
    goto LABEL_65;
  }

  v23 = v25(v24, *MEMORY[0x1E6961338], @"TX3GRegion");
  if (v23)
  {
LABEL_82:
    value_high = v23;
    goto LABEL_65;
  }

  memset(&start, 0, 32);
  FigGeometryDimensionMake();
  FigGeometryDimensionMake();
  FigGeometryPointMake();
  memset(&duration, 0, 32);
  v26 = FigGeometryPointCopyAsDictionary();
  if (!v26)
  {
    value_high = 0;
    goto LABEL_65;
  }

  v27 = v26;
  v28 = FigCaptionDynamicStyleCreate();
  if (!v28)
  {
    FigCaptionRegionGetCMBaseObject();
    if (!*(*(CMBaseObjectGetVTable() + 8) + 56))
    {
      value_high = 4294954514;
      goto LABEL_63;
    }

    v29 = OUTLINED_FUNCTION_11_38();
    v28 = v30(v29);
    if (!v28)
    {
      if (v63)
      {
        CFRelease(v63);
        v63 = 0;
      }

      FigGeometryDimensionCopyAsDictionary();
      v31 = OUTLINED_FUNCTION_4_152();
      if (v31)
      {
        goto LABEL_41;
      }

      FigCaptionRegionGetCMBaseObject();
      if (*(*(CMBaseObjectGetVTable() + 8) + 56))
      {
        v32 = OUTLINED_FUNCTION_11_38();
        v31 = v33(v32);
        if (v31)
        {
          goto LABEL_41;
        }

        if (cf)
        {
          CFRelease(cf);
        }

        if (v63)
        {
          CFRelease(v63);
          v63 = 0;
        }

        FigGeometryDimensionCopyAsDictionary();
        v31 = OUTLINED_FUNCTION_4_152();
        if (v31)
        {
          goto LABEL_41;
        }

        FigCaptionRegionGetCMBaseObject();
        if (*(*(CMBaseObjectGetVTable() + 8) + 56))
        {
          v34 = OUTLINED_FUNCTION_11_38();
          v31 = v35(v34);
          if (v31)
          {
LABEL_41:
            value_high = v31;
            goto LABEL_61;
          }

          FigCaptionDataGetCMBaseObject();
          if (*(*(CMBaseObjectGetVTable() + 8) + 56))
          {
            v36 = OUTLINED_FUNCTION_11_38();
            v31 = v37(v36);
            goto LABEL_41;
          }
        }
      }

      value_high = 4294954514;
LABEL_61:
      if (cf)
      {
        CFRelease(cf);
      }

      goto LABEL_63;
    }
  }

  value_high = v28;
LABEL_63:
  CFRelease(v27);
  if (v63)
  {
    CFRelease(v63);
  }

LABEL_65:
  if (v64)
  {
    CFRelease(v64);
  }

  if (!value_high)
  {
    v43 = 0;
    effectiveRange.location = 0;
    effectiveRange.length = 0;
    while (1)
    {
      v44 = CFAttributedStringGetAttributes(v10, v43, &effectiveRange);
      if (FigCFDictionaryGetCount() >= 1)
      {
        *&start.start.value = effectiveRange;
        start.start.epoch = v11;
        start.duration.value = v12;
        CFDictionaryApplyFunction(v44, fcgcfs_tx3g_attribute_applier, &start);
        value_high = HIDWORD(start.duration.value);
        if (HIDWORD(start.duration.value))
        {
          break;
        }
      }

      v43 = effectiveRange.length + effectiveRange.location;
      if (effectiveRange.length + effectiveRange.location >= v14)
      {
        goto LABEL_72;
      }
    }
  }

LABEL_43:
  if (v61)
  {
    CFRelease(v61);
  }

  if (value_high)
  {
    goto LABEL_81;
  }

  v39 = CFArrayCreate(v8, &values, 1, MEMORY[0x1E695E9C0]);
  if (v39)
  {
    v49 = *MEMORY[0x1E6960CC0];
    v50 = *(MEMORY[0x1E6960CC0] + 16);
    v47 = v49;
    v48 = v50;
    value_high = FigCaptionGroupCreate();
    if (!value_high)
    {
      CMSampleBufferGetOutputPresentationTimeStamp(&start.start, a2);
      CMSampleBufferGetOutputDuration(&duration, a2);
      CMTimeRangeMake(&v55, &start.start, &duration);
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_114();
    value_high = FigSignalErrorAtGM();
  }

LABEL_49:
  v41 = *DerivedStorage;
  v40 = DerivedStorage[1];
  start = v55;
  v41(v58, &start, v40);
  FigTextSampleBufferTearDownState(v53);
  if (v56)
  {
    CFRelease(v56);
  }

  if (values)
  {
    CFRelease(values);
  }

  if (v39)
  {
    CFRelease(v39);
  }

  if (v58)
  {
    CFRelease(v58);
  }

  return value_high;
}

void fcgcfs_tx3g_attribute_applier(uint64_t a1, const __CFString *a2, uint64_t *a3)
{
  valuePtr[2] = *MEMORY[0x1E69E9840];
  cf = 0;
  if (!*(a3 + 7))
  {
    v5 = FigCFEqual();
    v6 = MEMORY[0x1E695E480];
    if (v5)
    {
      v7 = 0;
      v8 = *MEMORY[0x1E69614E8];
      valuePtr[0] = 0;
      valuePtr[1] = 0;
      v9 = valuePtr;
      while (1)
      {
        FloatAtIndex = FigCFArrayGetFloatAtIndex();
        if (!FloatAtIndex)
        {
          goto LABEL_29;
        }

        ++v7;
        v9 = (v9 + 4);
        if (v7 == 4)
        {
          CGColorSRGB = FigCreateCGColorSRGB();
          cf = CGColorSRGB;
          if (CGColorSRGB)
          {
            v12 = CFGetTypeID(CGColorSRGB);
            if (v12 == CGColorGetTypeID())
            {
              goto LABEL_26;
            }
          }

          goto LABEL_8;
        }
      }
    }

    if (FigCFEqual())
    {
      if (a2)
      {
        v13 = CFGetTypeID(a2);
        if (v13 == CFBooleanGetTypeID())
        {
          LODWORD(valuePtr[0]) = CFBooleanGetValue(a2) != 0;
          cf = CFNumberCreate(*v6, kCFNumberSInt32Type, valuePtr);
          if (cf)
          {
            v8 = *MEMORY[0x1E6961460];
LABEL_26:
            FloatAtIndex = FigCaptionDynamicStyleCreate();
            if (FloatAtIndex)
            {
              goto LABEL_32;
            }

            v20 = a3[1];
            v21 = a3[2];
            v22 = *a3;
            v23 = *(*(CMBaseObjectGetVTable() + 16) + 32);
            if (!v23)
            {
              FloatAtIndex = -12782;
              goto LABEL_32;
            }

            FloatAtIndex = v23(v21, v8, 0, v22, v20);
LABEL_29:
            if (!FloatAtIndex)
            {
LABEL_33:
              if (cf)
              {
                CFRelease(cf);
              }

              return;
            }

LABEL_32:
            *(a3 + 7) = FloatAtIndex;
            goto LABEL_33;
          }

LABEL_8:
          fig_log_get_emitter();
          OUTLINED_FUNCTION_20_0();
LABEL_59:
          FloatAtIndex = FigSignalErrorAtGM();
          goto LABEL_29;
        }
      }

LABEL_58:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_20_0();
      goto LABEL_59;
    }

    if (FigCFEqual())
    {
      if (!a2)
      {
        goto LABEL_58;
      }

      v14 = CFGetTypeID(a2);
      if (v14 != CFBooleanGetTypeID())
      {
        goto LABEL_58;
      }

      v8 = *MEMORY[0x1E6961480];
      Value = CFBooleanGetValue(a2);
      v16 = MEMORY[0x1E6961488];
      v17 = MEMORY[0x1E6961490];
    }

    else
    {
      if (!FigCFEqual())
      {
        if (FigCFEqual())
        {
          valuePtr[0] = 0;
          if (!a2)
          {
            goto LABEL_58;
          }

          v24 = CFGetTypeID(a2);
          if (v24 != CFNumberGetTypeID())
          {
            goto LABEL_58;
          }

          v8 = *MEMORY[0x1E6961478];
          CFNumberGetValue(a2, kCFNumberCGFloatType, valuePtr);
          v19 = FigCaptionGeometryCopyCellBasedSizeAsDictionary();
          cf = v19;
        }

        else if (FigCFEqual())
        {
          if (!a2)
          {
            goto LABEL_58;
          }

          v25 = CFGetTypeID(a2);
          if (v25 != CFStringGetTypeID() || !fcgcfs_tx3g_getFontFamilyNameFromTx3gFontName(a2))
          {
            goto LABEL_58;
          }

          FloatAtIndex = FigCaptionFontFamilyNameListCreateMutable();
          if (FloatAtIndex)
          {
            goto LABEL_32;
          }

          FloatAtIndex = FigCaptionFontFamilyNameListAppend();
          if (FloatAtIndex)
          {
            goto LABEL_32;
          }

          v8 = *MEMORY[0x1E6961470];
          v19 = 0;
        }

        else
        {
          if (!FigCFEqual())
          {
            if (!FigCFEqual())
            {
              FigCFEqual();
              return;
            }

            goto LABEL_33;
          }

          if (!a2)
          {
            goto LABEL_58;
          }

          v26 = CFGetTypeID(a2);
          if (v26 != CFNumberGetTypeID())
          {
            goto LABEL_58;
          }

          v8 = *MEMORY[0x1E69614B8];
          LODWORD(valuePtr[0]) = 0;
          v19 = *MEMORY[0x1E695E4C0];
          cf = *MEMORY[0x1E695E4C0];
          CFNumberGetValue(a2, kCFNumberSInt32Type, valuePtr);
          if ((valuePtr[0] & 0x80000000) != 0 || LODWORD(valuePtr[0]) >> 30 && *(a3 + 24))
          {
            v16 = MEMORY[0x1E695E4D0];
LABEL_24:
            v19 = *v16;
            cf = *v16;
          }
        }

        if (!v19)
        {
          goto LABEL_33;
        }

        goto LABEL_26;
      }

      if (!a2)
      {
        goto LABEL_58;
      }

      v18 = CFGetTypeID(a2);
      if (v18 != CFBooleanGetTypeID())
      {
        goto LABEL_58;
      }

      v8 = *MEMORY[0x1E69614A0];
      Value = CFBooleanGetValue(a2);
      v16 = MEMORY[0x1E69614A8];
      v17 = MEMORY[0x1E69614B0];
    }

    if (!Value)
    {
      v16 = v17;
    }

    goto LABEL_24;
  }
}

uint64_t FigTX3GCaptionGroupConverterFromSampleBufferCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTX3GCaptionGroupConverterFromSampleBufferCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTX3GCaptionGroupConverterFromSampleBufferCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTX3GCaptionGroupConverterFromSampleBufferCreate_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigBasicAESCPEProtectorCreate(const __CFAllocator *a1, uint64_t a2, void *a3)
{
  if (!a3)
  {
    return 4294955146;
  }

  MEMORY[0x19A8D3660](&FigBasicAESCPEProtectorGetClassID_sRegisterFigBasicAESCPEProtectorTypeOnce, RegisterFigBasicAESCPEProtectorType);
  v5 = CMDerivedObjectCreate();
  if (v5)
  {
    return v5;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!DerivedStorage)
  {
    return 4294955145;
  }

  v5 = FigCPEExternalProtectionMonitorCreateForMethods(a1, 0, 0, 0, DerivedStorage);
  if (v5)
  {
    return v5;
  }

  CMNotificationCenterGetDefaultLocalCenter();
  v7 = FigNotificationCenterAddWeakListener();
  if (!v7)
  {
    *a3 = 0;
  }

  return v7;
}

uint64_t FigBasicAESCPEProtectorCopyProperty(uint64_t a1, const void *a2, uint64_t a3, __CFString **a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = 4294955146;
  if (a2 && a4)
  {
    if (CFEqual(a2, @"ExternalProtectionRequiredForPlayback"))
    {
      if (!FigCPEExternalProtectionMonitorGetMethods(*DerivedStorage))
      {
        v9 = MEMORY[0x1E695E4C0];
        goto LABEL_11;
      }

LABEL_5:
      v9 = MEMORY[0x1E695E4D0];
LABEL_11:
      if (*v9)
      {
        v11 = CFRetain(*v9);
      }

      else
      {
        v11 = 0;
      }

      result = 0;
      goto LABEL_15;
    }

    if (!CFEqual(a2, @"DisplayList"))
    {
      if (CFEqual(a2, @"ApplicationAuthorizationChallengeProvider"))
      {
        result = 0;
        v11 = @"ApplicationAuthorizationChallengeProviderNone";
LABEL_15:
        *a4 = v11;
        return result;
      }

      if (!CFEqual(a2, @"AllowsVideoOutput"))
      {
        return 4294954512;
      }

      goto LABEL_5;
    }

    v10 = *DerivedStorage;

    return FigCPEExternalProtectionMonitorCopyProperty(v10, @"DisplayList", a3, a4);
  }

  return result;
}

uint64_t FigBasicAESCPEProtectorSetProperty(uint64_t a1, const void *a2, const __CFArray *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  v6 = DerivedStorage;
  if (CFEqual(a2, @"DisplayList"))
  {
    v7 = *v6;

    return FigCPEExternalProtectionMonitorSetProperty(v7, @"DisplayList", a3);
  }

  else if (CFEqual(a2, @"NeroTransport"))
  {
    v9 = *(v6 + 8);
    *(v6 + 8) = a3;
    if (a3)
    {
      CFRetain(a3);
    }

    if (v9)
    {
      CFRelease(v9);
    }

    return 0;
  }

  else
  {
    return 4294954512;
  }
}

uint64_t FigBasicAESCPEProtectorGetAggregateExternalProtectionStatus(uint64_t a1, _DWORD *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  Status = FigCPEExternalProtectionMonitorGetStatus(*DerivedStorage);
  result = 0;
  *a2 = Status;
  return result;
}

uint64_t FigBasicAESCPEProtectorCreateCryptor(const void *a1, uint64_t a2, unsigned int a3, const __CFDictionary *a4, void *a5)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a5)
  {
    return 4294955146;
  }

  if (a3 > 3)
  {
    return 4294955136;
  }

  v11 = DerivedStorage;
  if (!a4 || (Value = CFDictionaryGetValue(a4, @"Destination")) == 0 || (v13 = Value, CFEqual(Value, @"DestinationLocal")))
  {
    v14 = *v11;

    return FigBasicAESCPECryptorCreate(a1, v14, a4, a2, a5);
  }

  if (!CFEqual(v13, @"DestinationNero"))
  {
    return 4294955136;
  }

  v16 = *v11;
  v17 = *(v11 + 8);

  return FigOctaviaCPECryptorCreate(a1, @"com.apple.basicAES", v16, 0, a2, v17, a5);
}

uint64_t FigTTMLDivCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLDiv_CopyChildNodeArray_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLDiv_GetNodeType_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigBasicAESCPECryptorCopyProperty(uint64_t a1, const void *a2, uint64_t a3, void *a4)
{
  CMBaseObjectGetDerivedStorage();
  v8 = 4294955146;
  if (a2 && a4)
  {
    OUTLINED_FUNCTION_8_89();
    if (*(v4 + 73))
    {
      v8 = 4294954511;
LABEL_11:
      FigSimpleMutexUnlock();
      return v8;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961000]))
    {
      v9 = *(v4 + 40);
LABEL_7:
      v9 = CFRetain(v9);
LABEL_8:
      v8 = 0;
      *a4 = v9;
      goto LABEL_11;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961098]))
    {
      v8 = 0;
      *a4 = *MEMORY[0x1E695E4D0];
      goto LABEL_11;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961118]))
    {
      v11 = MEMORY[0x1E695E4D0];
      if (!*(v4 + 72) && !*(v4 + 8))
      {
        v11 = MEMORY[0x1E695E4C0];
      }

      v9 = *v11;
      goto LABEL_7;
    }

    if (CFEqual(a2, *MEMORY[0x1E69610C0]))
    {
      valuePtr = FigCPEExternalProtectionMonitorGetMethods(*(v4 + 88));
      v9 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt64Type, &valuePtr);
      goto LABEL_8;
    }

    if (CFEqual(a2, *MEMORY[0x1E69610D8]))
    {
      v9 = *(v4 + 8);
      if (!v9)
      {
        goto LABEL_8;
      }

      goto LABEL_7;
    }

    if (CFEqual(a2, *MEMORY[0x1E69610C8]))
    {
      v9 = *(v4 + 16);
      if (!v9)
      {
        goto LABEL_8;
      }

      goto LABEL_7;
    }

    if (CFEqual(a2, *MEMORY[0x1E69610A8]))
    {
      v9 = *(v4 + 96);
      if (v9)
      {
        goto LABEL_7;
      }

      fig_log_get_emitter();
      v12 = FigSignalErrorAtGM();
    }

    else
    {
      v12 = CMBaseObjectCopyProperty(*v4, a2, a3, a4);
    }

    v8 = v12;
    goto LABEL_11;
  }

  return v8;
}

uint64_t FigBasicAESCPECryptorSetProperty(uint64_t a1, const void *a2, const void *a3)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_8_89();
  if (!*(v3 + 73))
  {
    if (CFEqual(a2, *MEMORY[0x1E6961000]))
    {
      if (a3)
      {
        v6 = *(v3 + 40);
        *(v3 + 40) = a3;
LABEL_7:
        CFRetain(a3);
        if (!v6)
        {
          goto LABEL_11;
        }

        v7 = v6;
LABEL_9:
        CFRelease(v7);
LABEL_10:
        v6 = 0;
        goto LABEL_11;
      }

      goto LABEL_34;
    }

    if (CFEqual(a2, *MEMORY[0x1E69610C0]))
    {
      Methods = FigCPEExternalProtectionMonitorGetMethods(*(v3 + 88));
      valuePtr = 0;
      if (!a3)
      {
        goto LABEL_34;
      }

      v10 = Methods;
      v11 = CFGetTypeID(a3);
      if (v11 != CFNumberGetTypeID())
      {
        goto LABEL_34;
      }

      CFNumberGetValue(a3, kCFNumberSInt64Type, &valuePtr);
      if ((valuePtr & ~v10) == 0)
      {
        goto LABEL_10;
      }

      cf = 0;
      v12 = FigCPEExternalProtectionMonitorCreateForMethods(*MEMORY[0x1E695E480], valuePtr & ~v10, 0, *(v3 + 88), &cf);
      if (!v12)
      {
        v13 = *(v3 + 88);
        v14 = cf;
        *(v3 + 88) = cf;
        if (v14)
        {
          CFRetain(v14);
        }

        if (v13)
        {
          CFRelease(v13);
        }

        v7 = cf;
        if (!cf)
        {
          goto LABEL_10;
        }

        goto LABEL_9;
      }
    }

    else
    {
      if (CFEqual(a2, *MEMORY[0x1E69610D8]))
      {
        if (a3)
        {
          v15 = CFGetTypeID(a3);
          if (v15 == CFDataGetTypeID())
          {
            v6 = *(v3 + 8);
            *(v3 + 8) = a3;
            goto LABEL_7;
          }
        }

LABEL_34:
        v6 = 4294955136;
        goto LABEL_11;
      }

      if (CFEqual(a2, *MEMORY[0x1E69610C8]))
      {
        if (a3)
        {
          v16 = CFGetTypeID(a3);
          if (v16 == CFDataGetTypeID())
          {
            v6 = *(v3 + 16);
            *(v3 + 16) = a3;
            goto LABEL_7;
          }
        }

        goto LABEL_34;
      }

      if (CFEqual(a2, *MEMORY[0x1E6961008]))
      {
        if (a3)
        {
          v17 = CFGetTypeID(a3);
          if (v17 == CFDataGetTypeID())
          {
            v6 = *(v3 + 24);
            *(v3 + 24) = a3;
            goto LABEL_7;
          }
        }

        goto LABEL_34;
      }

      if (CFEqual(a2, *MEMORY[0x1E6961118]))
      {
        v6 = 0;
        *(v3 + 72) = *MEMORY[0x1E695E4D0] == a3;
        goto LABEL_11;
      }

      if (CFEqual(a2, *MEMORY[0x1E6961010]))
      {
        if (a3)
        {
          v18 = CFGetTypeID(a3);
          if (v18 == CMFormatDescriptionGetTypeID())
          {
            if (!FigCFEqual())
            {
              v19 = *(v3 + 48);
              *(v3 + 48) = a3;
              CFRetain(a3);
              if (v19)
              {
                CFRelease(v19);
              }

              if (*(v3 + 56))
              {
                FigH264Bridge_HLSfMP4ParsingInfoDestroy();
                v6 = 0;
                *(v3 + 56) = 0;
                goto LABEL_11;
              }
            }

            goto LABEL_10;
          }
        }

        goto LABEL_34;
      }

      v12 = CMBaseObjectSetProperty(*v3, a2, a3);
    }

    v6 = v12;
    goto LABEL_11;
  }

  v6 = 4294954511;
LABEL_11:
  FigSimpleMutexUnlock();
  return v6;
}

uint64_t FigBasicAESCPECryptorGetExternalProtectionMethods(uint64_t a1, _DWORD *a2)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_8_89();
  if (*(v2 + 73))
  {
    v4 = 4294954511;
  }

  else
  {
    v4 = 0;
    *a2 = FigCPEExternalProtectionMonitorGetMethods(*(v2 + 88));
  }

  FigSimpleMutexUnlock();
  return v4;
}

uint64_t FigBasicAESCPECryptorGetAggregateExternalProtectionStatus(uint64_t a1, uint64_t a2, _DWORD *a3)
{
  CMBaseObjectGetDerivedStorage();
  if (!a3)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_8_89();
  if (*(v3 + 73))
  {
    v5 = 4294954511;
  }

  else
  {
    v5 = 0;
    *a3 = FigCPEExternalProtectionMonitorGetStatus(*(v3 + 88));
  }

  FigSimpleMutexUnlock();
  return v5;
}

uint64_t FigBasicAESCPECryptorDecryptSample(uint64_t a1, OpaqueCMBlockBuffer *a2, OpaqueCMBlockBuffer *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  DataLength = CMBlockBufferGetDataLength(a2);
  if (!a2 || !a3 || (v7 = DataLength) == 0 || DataLength != CMBlockBufferGetDataLength(a3) || (OUTLINED_FUNCTION_613(), !CMBlockBufferIsRangeContiguous(v8, v9, v10)) || (OUTLINED_FUNCTION_613(), !CMBlockBufferIsRangeContiguous(v11, v12, v13)))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();

    return FigSignalErrorAtGM();
  }

  OUTLINED_FUNCTION_613();
  result = CMBlockBufferGetDataPointer(v14, v15, v16, 0, v17);
  if (result)
  {
    return result;
  }

  OUTLINED_FUNCTION_613();
  result = CMBlockBufferGetDataPointer(v19, v20, v21, 0, v22);
  if (result)
  {
    return result;
  }

  v23 = *(DerivedStorage + 40);
  if (v23 && !CFEqual(v23, *MEMORY[0x1E6960FF8]))
  {
    if (!*(DerivedStorage + 32))
    {
      v24 = *(DerivedStorage + 8);
      if (!v24 || !*(DerivedStorage + 16))
      {
LABEL_79:
        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_4();
        return FigSignalErrorAtGM();
      }

      BytePtr = CFDataGetBytePtr(v24);
      v26 = *MEMORY[0x1E695E480];
      Length = CFDataGetLength(*(DerivedStorage + 8));
      result = FigCryptCreateForDecrypt(2, v26, 0, v26, BytePtr, Length, (DerivedStorage + 32));
      if (result)
      {
        return result;
      }
    }

    v78 = v7;
    v79 = DerivedStorage;
    if (FigCFEqual())
    {
      v28 = 0;
      v29 = 0;
      v30 = 0;
      while (1)
      {
        v31 = bswap32(*v29);
        if (v7 - v28 < v31)
        {
          break;
        }

        if (v31 >= 0x31 && (*(v29 + 4) & 0x1B) == 1)
        {
          v34 = *(v29 + 32);
          v35 = *(v29 + 16);
          *v30 = *v29;
          *(v30 + 16) = v35;
          *(v30 + 32) = v34;
          if ((v31 & 0xF) != 0)
          {
            v33 = v31 & 0xF;
          }

          else
          {
            v33 = 16;
          }

          if ((v31 & 0xF) != 0)
          {
            v36 = (v31 & 0xFFFFFFF0) - 32;
          }

          else
          {
            v36 = v31 - 48;
          }

          v37 = *(v79 + 32);
          v38 = CFDataGetBytePtr(*(v79 + 16));
          CFDataGetLength(*(v79 + 16));
          result = FigCryptSetIV(v37, v38);
          if (result)
          {
            return result;
          }

          v30 += 36;
          v29 += 36;
          OUTLINED_FUNCTION_4_153();
          result = FigCryptDecryptMemory(v39, v40, v41, v42, v36, v43, v30, v36, v76, v77);
          if (result)
          {
            return result;
          }

          if (v36)
          {
            break;
          }

          v7 = v78;
        }

        else
        {
          v33 = v31 + 4;
        }

        OUTLINED_FUNCTION_7_103();
        v29 += v33;
        v30 += v33;
        v28 += v31 + 4;
        if (v28 >= v7)
        {
          return 0;
        }
      }

LABEL_35:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_121();
      return FigSignalErrorAtGM();
    }

    if (FigCFEqual())
    {
      v44 = 0;
      v45 = 0;
      v46 = 0;
      while (1)
      {
        v47 = bswap32(*v45);
        if (v7 - v44 < v47)
        {
          goto LABEL_35;
        }

        if (v47 >= 0x31 && (*(v45 + 4) & 0x1B) == 1)
        {
          v50 = *(DerivedStorage + 32);
          v51 = CFDataGetBytePtr(*(DerivedStorage + 16));
          CFDataGetLength(*(DerivedStorage + 16));
          result = FigCryptSetIV(v50, v51);
          if (result)
          {
            return result;
          }

          v52 = *v45;
          v53 = v45[1];
          *(v46 + 32) = *(v45 + 8);
          *v46 = v52;
          *(v46 + 16) = v53;
          v46 += 36;
          v45 = (v45 + 36);
          v49 = v47 - 32;
          if (v47 == 32)
          {
            goto LABEL_53;
          }

          if (v49 >= 0x11)
          {
            OUTLINED_FUNCTION_4_153();
            result = FigCryptDecryptMemory(v54, v55, v56, v57, 0x10uLL, v58, v46, 0x10uLL, v76, v77);
            if (result)
            {
              return result;
            }

            goto LABEL_35;
          }
        }

        else
        {
          v49 = v47 + 4;
        }

        OUTLINED_FUNCTION_7_103();
        v46 += v49;
        v45 = (v45 + v49);
LABEL_53:
        v44 += v47 + 4;
        if (v44 >= v7)
        {
          return 0;
        }
      }
    }

    if (FigCFEqual())
    {
      v68 = OUTLINED_FUNCTION_2_185();
      return FigBasicAESCPECryptorDecryptH264_ISO_23001_7(v68, v69, v70, v71);
    }

    if (FigCFEqual())
    {
      v59 = OUTLINED_FUNCTION_2_185();
      return FigBasicAESCPECryptorDecryptAAC(v59, v60, v61, v62);
    }

    if (FigCFEqual() || FigCFEqual())
    {
      v63 = OUTLINED_FUNCTION_2_185();
      v67 = 16;
      return FigBasicAESCPECryptorDecryptAudio(v63, v64, v65, v66, v67);
    }

    if (FigCFEqual())
    {
      v72 = OUTLINED_FUNCTION_2_185();
      return FigBasicAESCPECryptorDecryptEAC3(v72, v73, v74, v75);
    }

    if (FigCFEqual())
    {
      v63 = OUTLINED_FUNCTION_2_185();
      v67 = 0;
      return FigBasicAESCPECryptorDecryptAudio(v63, v64, v65, v66, v67);
    }

    if (FigCFEqual())
    {
      return FigBasicAESCPECryptorDecryptH264_FPS(DerivedStorage, a2);
    }

    if (FigCFEqual())
    {
      return FigBasicAESCPECryptorDecryptHEVC_FPS(DerivedStorage, a2);
    }

    if (FigCFEqual())
    {
      return FigBasicAESCPECryptorDecrypt_ISO_23001_7_CBCS(DerivedStorage, 0, 0, v7);
    }

    goto LABEL_79;
  }

  memcpy(0, 0, v7);
  return 0;
}

uint64_t FigBasicAESCPECryptorGetAggregateExternalProtectionStatusIgnoringDisplays(uint64_t a1, uint64_t a2, _DWORD *a3)
{
  CMBaseObjectGetDerivedStorage();
  if (!a3)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_8_89();
  if (*(v3 + 73))
  {
    v5 = 4294954511;
  }

  else
  {
    v5 = 0;
    *a3 = FigCPEExternalProtectionMonitorGetStatusIgnoringDisplays(*(v3 + 88));
  }

  FigSimpleMutexUnlock();
  return v5;
}

uint64_t FigBasicAESCPECryptorDecryptH264_ISO_23001_7(CFDataRef *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  cryptorRef = 0;
  v5 = a1[1];
  if (!v5)
  {
    return 4294955138;
  }

  if (!a1[2])
  {
    return 4294955138;
  }

  Length = CFDataGetLength(v5);
  if (Length < CFDataGetLength(a1[2]))
  {
    return 4294955138;
  }

  v10 = a1[3];
  if (!v10)
  {
    return 4294955138;
  }

  BytePtr = CFDataGetBytePtr(v10);
  v12 = CFDataGetLength(a1[3]);
  if (v12 < 8)
  {
    return 0;
  }

  v13 = v12;
  v14 = *MEMORY[0x1E695E480];
  v15 = CFDataGetLength(a1[1]);
  Mutable = CFDataCreateMutable(v14, v15);
  if (!Mutable)
  {
    return 4294955145;
  }

  v17 = Mutable;
  v18 = CFDataGetLength(a1[1]);
  CFDataSetLength(v17, v18);
  MutableBytePtr = CFDataGetMutableBytePtr(v17);
  v20 = CFDataGetBytePtr(a1[2]);
  v21 = CFDataGetLength(a1[2]);
  memcpy(MutableBytePtr, v20, v21);
  v22 = CFDataGetBytePtr(v17);
  v23 = CFDataGetBytePtr(a1[1]);
  v24 = CFDataGetLength(a1[1]);
  v25 = CCCryptorCreateWithMode(1u, 4u, 0, 0, v22, v23, v24, 0, 0, 0, 2u, &cryptorRef);
  if (!v25)
  {
    v26 = 0;
    v27 = v13 >> 3;
    v28 = (BytePtr + 4);
    while (1)
    {
      dataOutMoved = 0;
      v29 = *(v28 - 1);
      if (a4 - v26 < v29)
      {
        break;
      }

      memcpy((a3 + v26), (a2 + v26), v29);
      v30 = *v28;
      v26 += *(v28 - 1);
      if (v30)
      {
        if (a4 - v26 < v30)
        {
          break;
        }

        v25 = CCCryptorUpdate(cryptorRef, (a2 + v26), v30, (a3 + v26), *v28, &dataOutMoved);
        if (v25)
        {
          goto LABEL_20;
        }

        v26 += *v28;
      }

      v28 += 2;
      if (!--v27)
      {
        v31 = 0;
        goto LABEL_16;
      }
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    v25 = FigSignalErrorAtGM();
  }

LABEL_20:
  v31 = v25;
LABEL_16:
  CFRelease(v17);
  if (cryptorRef)
  {
    CCCryptorRelease(cryptorRef);
  }

  return v31;
}

uint64_t FigBasicAESCPECryptorDecrypt_ISO_23001_7_CBCS(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v5 = *(a1 + 8);
  if (!v5)
  {
    return 4294955138;
  }

  if (!*(a1 + 16))
  {
    return 4294955138;
  }

  Length = CFDataGetLength(v5);
  if (Length < CFDataGetLength(*(a1 + 16)))
  {
    return 4294955138;
  }

  v10 = *(a1 + 24);
  if (!v10)
  {
    return 4294955138;
  }

  v33 = a4;
  BytePtr = CFDataGetBytePtr(v10);
  v11 = CFDataGetLength(*(a1 + 24));
  if (v11 < 8)
  {
    return 0;
  }

  v12 = v11;
  v41 = 0;
  v40 = 0;
  v13 = FigParseHLSfMP4SecurityInfoFromFormatDescriptionAndCopyIV(*(a1 + 48), 0, &v41, &v40, 0, 0);
  if (!v13)
  {
    v14 = 0;
    v15 = 0;
    v34 = v12 >> 3;
    v16 = a4;
    while (1)
    {
      v17 = &BytePtr[8 * v14];
      v18 = *v17;
      if (v16 - v15 < v18)
      {
        break;
      }

      memcpy((a3 + v15), (a2 + v15), v18);
      v19 = *(v17 + 1);
      v15 += *v17;
      if (v19)
      {
        if (v16 - v15 < v19)
        {
          break;
        }

        v20 = *(a1 + 32);
        v21 = CFDataGetBytePtr(*(a1 + 16));
        CFDataGetLength(*(a1 + 16));
        v22 = FigCryptSetIV(v20, v21);
        v23 = *(v17 + 1);
        v36 = v23 & 0xFFFFFFF0;
        v24 = v15 + v36;
        if (v15 + 16 <= (v15 + v36))
        {
          v25 = 16 * v41;
          while (1)
          {
            v38 = 0;
            v39 = 0;
            v37 = 0;
            v26 = v25;
            if (v15 + v25 > v24)
            {
              v26 = v24 - v15;
              if (((v24 - v15) & 0xF) != 0)
              {
                goto LABEL_36;
              }
            }

            v27 = FigCryptDecryptMemory(*(a1 + 32), 0, 0, (a2 + v15), v26, &v39, (a3 + v15), v26, &v38, &v37);
            if (v27)
            {
              return v27;
            }

            v28 = v26 == v39 && v26 == v38;
            if (!v28 || v37 != 0)
            {
              goto LABEL_36;
            }

            v15 += v26;
            if (v24 - v15 >= 16 * v40)
            {
              v30 = 16 * v40;
            }

            else
            {
              v30 = v24 - v15;
            }

            if (v30)
            {
              memcpy((a3 + v15), (a2 + v15), v30);
              v15 += v30;
            }

            if (v15 + 16 > v24)
            {
              v13 = 0;
              v23 = *(v17 + 1);
              v16 = v33;
              goto LABEL_32;
            }
          }
        }

        v13 = v22;
LABEL_32:
        v31 = v23 - v36;
        if (v23 != v36)
        {
          memcpy((a3 + v15), (a2 + v15), v23 - v36);
          v15 += v31;
        }
      }

      if (++v14 == v34)
      {
        return v13;
      }
    }

LABEL_36:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_4_63();
    return FigSignalErrorAtGM();
  }

  return v13;
}

uint64_t FigBasicAESCPECryptorDecryptHLSfMP4NALs_FPS(uint64_t a1, OpaqueCMBlockBuffer *a2)
{
  HIBYTE(v34) = 0;
  OUTLINED_FUNCTION_613();
  v31 = v4;
  DataPointer = v4();
  if (DataPointer)
  {
    return DataPointer;
  }

  OUTLINED_FUNCTION_613();
  DataPointer = CMBlockBufferGetDataPointer(v6, v7, v8, 0, v9);
  if (DataPointer)
  {
    return DataPointer;
  }

  OUTLINED_FUNCTION_613();
  v14 = CMBlockBufferGetDataPointer(v10, v11, v12, 0, v13);
  if (!*(a1 + 56))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    return FigSignalErrorAtGM();
  }

  v15 = v14;
  DataLength = CMBlockBufferGetDataLength(a2);
  if (DataLength)
  {
    v23 = OUTLINED_FUNCTION_6_119(DataLength, v17, DataLength, v18, v19, v20, v21, v22, 0, v27, v28, v29, v30, v31, v32, v33, v34, 0, 0, 0);
    memcpy(v23, v24, v25);
  }

  return v15;
}

uint64_t FigBasicAESCPECryptorDecryptAudio_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigBasicAESCPECryptorDecryptEAC3_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigBasicAESCPECryptorDecryptEAC3_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigBasicAESCPECryptorDecryptH264_FPS_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigBasicAESCPECryptorDecryptHEVC_FPS_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkInterfaceGetTypeFromName(uint64_t a1)
{
  InterfaceType = 0;
  FigNote_AllowInternalDefaultLogs();
  OUTLINED_FUNCTION_1_188();
  fig_note_initialize_category_with_default_work_cf();
  OUTLINED_FUNCTION_1_188();
  fig_note_initialize_category_with_default_work_cf();
  if (FigTestSupportNetworkInterfaceGetFakeInterfacePropertiesIfPresent(a1, &InterfaceType, 0) || !FigCFStringGetCStringPtrAndBufferToFree())
  {
    v2 = 0;
  }

  else
  {
    v3 = nw_interface_create_with_name();
    v2 = v3;
    if (v3)
    {
      InterfaceType = fnpe_GetInterfaceType(v3);
    }
  }

  if (v2)
  {
    network_release();
  }

  return InterfaceType;
}

uint64_t FigNetworkInterfaceGetInterfaceTypeFromCFNStats(uint64_t result)
{
  value = 0;
  if (!result)
  {
    return result;
  }

  v1 = result;
  if (CFDictionaryGetValueIfPresent(result, @"_kCFNTimingDataConnectionInterfaceIdentifier", &value))
  {
    return FigNetworkInterfaceGetTypeFromName(value);
  }

  v2 = CFDictionaryGetValue(v1, @"_kCFNTimingDataConnectionStartTimeCounts");
  if (CFDictionaryGetValue(v1, @"_kCFNTimingDataConnectionStopTimeCounts"))
  {
    OUTLINED_FUNCTION_0_206();
    figHTTPRequestStatsGetInterfaceCounts(v3, v4, v5, v6);
    v7 = v22;
    v8 = v21;
    if (*(&v22 + 1) && __PAIR128__(v22, v21) == 0)
    {
      return 2;
    }

    if (v22 && !(v21 | *(&v22 + 1)))
    {
      return 3;
    }

    v9 = v22 != 0 || v21 == 0;
    if (v9)
    {
      result = 0;
    }

    else
    {
      result = 5;
    }

    if (v9 && v2)
    {
      v19 = 0;
      v20 = 0;
      v18 = 0;
      figHTTPRequestStatsGetInterfaceCounts(v2, &v20, &v19, &v18);
      v10 = v7 - v19;
      v11 = v8 - v18;
      v12 = *(&v7 + 1) - v20;
      if (*(&v7 + 1) == v20 || v11 | v10)
      {
        if (v7 == v19 || v11 | v12)
        {
          if (v10 | v12)
          {
            v13 = 1;
          }

          else
          {
            v13 = v8 == v18;
          }

          if (v13)
          {
            return 0;
          }

          else
          {
            return 5;
          }
        }

        return 3;
      }

      return 2;
    }
  }

  else
  {
    if (!v2)
    {
      return 0;
    }

    OUTLINED_FUNCTION_0_206();
    figHTTPRequestStatsGetInterfaceCounts(v2, v14, v15, v16);
    if (*(&v22 + 1) && __PAIR128__(v22, v21) == 0)
    {
      return 2;
    }

    if (v22 && !(v21 | *(&v22 + 1)))
    {
      return 3;
    }

    if (v21)
    {
      v17 = v22 == 0;
    }

    else
    {
      v17 = 0;
    }

    if (v17)
    {
      return 5;
    }

    else
    {
      return 0;
    }
  }

  return result;
}

uint64_t FigTTMLTreeCreateSynchronicTree(const __CFAllocator *a1, void *a2, __int128 *a3, const void *a4, uint64_t *a5)
{
  Mutable = CFArrayCreateMutable(a1, 0, MEMORY[0x1E695E9C0]);
  if (!a5)
  {
    fig_log_get_emitter();
    v20 = FigSignalErrorAtGM();
LABEL_11:
    Instance = 0;
    if (!Mutable)
    {
      goto LABEL_13;
    }

    goto LABEL_12;
  }

  MEMORY[0x19A8D3660](&FigTTMLSynchronicTreeGetTypeID_sRegisterFigTTMLSynchronicTreeOnce, RegisterFigTTMLSynchronicTree);
  Instance = _CFRuntimeCreateInstance();
  if (Instance)
  {
    if (a2)
    {
      v12 = CFRetain(a2);
    }

    else
    {
      v12 = 0;
    }

    *(Instance + 16) = v12;
    v13 = *a3;
    *(Instance + 40) = *(a3 + 2);
    *(Instance + 24) = v13;
    if (a4)
    {
      v14 = CFRetain(a4);
    }

    else
    {
      v14 = 0;
    }

    *(Instance + 48) = v14;
    *(Instance + 56) = CFSetCreateMutable(a1, 0, MEMORY[0x1E695E9F8]);
    v22 = *a3;
    v23 = *(a3 + 2);
    appended = FigTTMLTreeAppendActiveNodesToArray(a2, &v22, Mutable);
    if (!appended)
    {
      CFArrayGetCount(Mutable);
      v16 = OUTLINED_FUNCTION_5_133();
      CFArraySortValues(v16, v24, v17, 0xFFFFFFFFFFFFFFFFLL);
      v18 = OUTLINED_FUNCTION_5_133();
      CFArrayApplyFunction(v18, v25, v19, Instance);
      v20 = 0;
      *a5 = Instance;
      goto LABEL_11;
    }
  }

  else
  {
    fig_log_get_emitter();
    appended = FigSignalErrorAtGM();
  }

  v20 = appended;
  if (Mutable)
  {
LABEL_12:
    CFRelease(Mutable);
  }

LABEL_13:
  if (Instance)
  {
    CFRelease(Instance);
  }

  return v20;
}

void figTTMLSynchronicTreeAddEligibleNodes(const void *a1, uint64_t a2)
{
  v15 = 0;
  if (!FigTTMLNodeGetNodeType(a1, &v15) && v15 <= 0xE && ((1 << v15) & 0x407C) != 0)
  {
    v5 = *(a2 + 48);
    cf = 0;
    if (!v5)
    {
      goto LABEL_12;
    }

    if (FigTTMLRegionCopyID(v5, &cf))
    {
      v6 = 1;
    }

    else
    {
      v6 = FigTTMLNodeIsAssociatedWithRegionID(a1, cf) == 0;
    }

    if (cf)
    {
      CFRelease(cf);
    }

    if (!v6)
    {
LABEL_12:
      v7 = *(a2 + 56);
      cf = 0;
      v16 = 0;
      FigTTMLNodeGetNodeType(a1, &v16);
      if ((v16 & 0xFFFFFFF7) == 6)
      {
        v8 = 1;
      }

      else
      {
        FigTTMLNodeCopyChildNodeArray(a1, &cf);
        if (!cf)
        {
          return;
        }

        Count = CFArrayGetCount(cf);
        v10 = Count - 1;
        if (Count < 1)
        {
          v8 = 0;
        }

        else
        {
          v11 = 0;
          do
          {
            ValueAtIndex = CFArrayGetValueAtIndex(cf, v11);
            v13 = CFSetContainsValue(v7, ValueAtIndex);
            v8 = v13 != 0;
            if (v13)
            {
              v14 = 1;
            }

            else
            {
              v14 = v10 == v11;
            }

            ++v11;
          }

          while (!v14);
        }
      }

      if (cf)
      {
        CFRelease(cf);
      }

      if (v8)
      {
        CFSetAddValue(*(a2 + 56), a1);
      }
    }
  }
}

void figTTMLSynchronicTreeCollectDescendantTextNode(const void *a1, uint64_t a2)
{
  v5 = 0;
  if (!FigTTMLNodeGetNodeType(a1, &v5) && (v5 & 0xFFFFFFF7) == 6)
  {
    while (1)
    {
      ParentNode = FigTTMLNodeGetParentNode();
      if (!ParentNode)
      {
        break;
      }

      if (ParentNode == *a2)
      {
        CFArrayAppendValue(*(a2 + 8), a1);
        return;
      }
    }
  }
}

uint64_t FigTTMLSynchronicTreeCopySSS(uint64_t a1, const void *a2, void *a3)
{
  v147 = *MEMORY[0x1E69E9840];
  v125 = 0;
  theDict = 0;
  if (a3)
  {
    v5 = a3;
    v6 = a2;
    Value = CFDictionaryGetValue(*(a1 + 64), a2);
    if (Value)
    {
      v9 = 0;
      Mutable = 0;
      v11 = 0;
      *v5 = CFRetain(Value);
      goto LABEL_147;
    }

    v12 = CFGetAllocator(a1);
    Mutable = CFDictionaryCreateMutable(v12, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      v13 = FigTTMLNodeCopyAttributes(v6, &theDict);
      if (!v13)
      {
        CFDictionaryApplyFunction(theDict, figTTMLSynchronicTreeAppendStyleAttribute, Mutable);
        LODWORD(v127) = 0;
        *theArray = 0;
        cf.start.value = 0;
        NodeType = FigTTMLNodeGetNodeType(v6, &v127);
        if (!NodeType)
        {
          if (v127 != 10)
          {
LABEL_20:
            v11 = 0;
            goto LABEL_21;
          }

          NodeType = FigTTMLNodeCopyChildNodeArray(v6, theArray);
          if (!NodeType)
          {
            for (i = 0; ; ++i)
            {
              Count = *theArray;
              if (*theArray)
              {
                Count = CFArrayGetCount(*theArray);
              }

              if (i >= Count)
              {
                break;
              }

              ValueAtIndex = CFArrayGetValueAtIndex(*theArray, i);
              NodeType = FigTTMLNodeGetNodeType(ValueAtIndex, &v127);
              if (NodeType)
              {
                goto LABEL_156;
              }

              if (v127 == 13)
              {
                if (cf.start.value)
                {
                  CFRelease(cf.start.value);
                  cf.start.value = 0;
                }

                NodeType = FigTTMLSynchronicTreeCopySSS(a1, ValueAtIndex, &cf);
                if (NodeType)
                {
                  goto LABEL_156;
                }

                OUTLINED_FUNCTION_0_207(cf.start.value);
              }
            }

            goto LABEL_20;
          }
        }

LABEL_156:
        v11 = NodeType;
LABEL_21:
        if (cf.start.value)
        {
          CFRelease(cf.start.value);
        }

        if (*theArray)
        {
          CFRelease(*theArray);
        }

        if (v11)
        {
          goto LABEL_35;
        }

        v105 = v4;
        CFDictionaryGetValue(Mutable, @"http://namespace.itunes.apple.com/itt/ttml-extension#ruby kind");
        FigCaptionDynamicStyleGetInitialValue();
        v17 = FigCFEqual();
        v18 = MEMORY[0x1E695E480];
        if (v17)
        {
          DocumentOrderIndex = FigTTMLNodeGetDocumentOrderIndex();
          CFStringCreateWithFormat(*v18, 0, @"%ld");
          v11 = OUTLINED_FUNCTION_4_154();
          v19 = kFigTTML_AttributeKey_ry_rubyID;
        }

        else
        {
          CFDictionaryGetValue(Mutable, @"http://www.w3.org/ns/ttml#styling ruby");
          FigCaptionDynamicStyleGetInitialValue();
          if (!FigCFEqual())
          {
            goto LABEL_36;
          }

          DocumentOrderIndex = FigTTMLNodeGetDocumentOrderIndex();
          CFStringCreateWithFormat(*v18, 0, @"%ld");
          v11 = OUTLINED_FUNCTION_4_154();
          v19 = kFigTTML_AttributeKey_tts_rubyID;
        }

        CFDictionaryAddValue(Mutable, *v19, *theArray);
        if (*theArray)
        {
          CFRelease(*theArray);
        }

        if (i)
        {
          CFRelease(i);
        }

        if (v11)
        {
          goto LABEL_35;
        }

LABEL_36:
        v20 = CFDictionaryGetValue(theDict, @"style");
        if (v20)
        {
          v21 = FigTTMLCreateReversedStringArrayFromNMTOKENS(v20);
          v22 = CFArrayGetCount(v21);
          v107 = v21;
          if (v22 >= 1)
          {
            v23 = v22;
            v24 = 0;
            while (1)
            {
              v25 = CFArrayGetValueAtIndex(v21, v24);
              NodeByID = FigTTMLTreeGetNodeByID(*(a1 + 16), v25);
              *theArray = 0;
              if (!NodeByID)
              {
                goto LABEL_139;
              }

              v27 = NodeByID;
              v28 = FigTTMLNodeGetNodeType(NodeByID, theArray);
              if (v28)
              {
                break;
              }

              if (*theArray != 13)
              {
                goto LABEL_139;
              }

              ParentNode = FigTTMLNodeGetParentNode();
              if (!ParentNode)
              {
                goto LABEL_139;
              }

              v28 = FigTTMLNodeGetNodeType(ParentNode, theArray);
              if (v28)
              {
                break;
              }

              if (*theArray != 12)
              {
LABEL_139:
                v11 = 4294950725;
                goto LABEL_146;
              }

              if (v125)
              {
                CFRelease(v125);
                v125 = 0;
              }

              v28 = FigTTMLSynchronicTreeCopySSS(a1, v27, &v125);
              if (v28)
              {
                break;
              }

              OUTLINED_FUNCTION_0_207(v125);
              ++v24;
              v21 = v107;
              if (v23 == v24)
              {
                goto LABEL_51;
              }
            }

            v11 = v28;
            goto LABEL_146;
          }
        }

        else
        {
          v107 = 0;
        }

LABEL_51:
        v30 = FigTTMLGetInheritableStyleAttributeNames();
        context = a1;
        v122 = v6;
        v123 = Mutable;
        v124 = 0;
        v148.length = CFArrayGetCount(v30);
        v148.location = 0;
        CFArrayApplyFunction(v30, v148, figTTMLSynchronicTreeInheritStyle, &context);
        v11 = v124;
        if (v124)
        {
LABEL_146:
          v9 = v107;
          goto LABEL_147;
        }

        v103 = a1;
        HIDWORD(v131) = 0;
        v130 = 0;
        v31 = FigTTMLNodeCopyChildNodeArray(v6, &v130);
        if (!v31)
        {
          allocator = *v18;
          v32 = CFArrayCreateMutable(*v18, 0, MEMORY[0x1E695E9C0]);
          if (v32)
          {
            v33 = v32;
            for (j = 0; ; ++j)
            {
              v35 = v130;
              if (v130)
              {
                v35 = CFArrayGetCount(v130);
              }

              if (j >= v35)
              {
                break;
              }

              v36 = CFArrayGetValueAtIndex(v130, j);
              ActiveTimeRange = FigTTMLNodeGetNodeType(v36, &v131 + 4);
              if (ActiveTimeRange)
              {
                goto LABEL_157;
              }

              if (HIDWORD(v131) == 1)
              {
                CFArrayAppendValue(v33, v36);
              }
            }

            if (CFArrayGetCount(v33) < 1)
            {
              v11 = 0;
              goto LABEL_141;
            }

            v128 = 0u;
            v129 = 0u;
            v127 = 0u;
            ActiveTimeRange = FigTTMLNodeGetActiveTimeRange(v6, &v127);
            if (ActiveTimeRange)
            {
LABEL_157:
              v11 = ActiveTimeRange;
              goto LABEL_141;
            }

            v144 = v127;
            v145 = v128;
            LODWORD(v111) = DWORD1(v129);
            v146 = v129;
            v109 = *(&v129 + 1);
            v38 = CFDictionaryCreateMutable(allocator, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
            v133 = 0;
            v99 = v6;
            v101 = v5;
            if (CFArrayGetCount(v33))
            {
              v39 = 0;
              while (1)
              {
                v40 = CFArrayGetValueAtIndex(v33, v39);
                if (v133)
                {
                  CFRelease(v133);
                  v133 = 0;
                }

                v41 = FigTTMLNodeCopyAttributes(v40, &v133);
                if (v41)
                {
                  break;
                }

                memset(&cf, 0, sizeof(cf));
                v41 = FigTTMLNodeGetActiveTimeRange(v40, &cf);
                if (v41)
                {
                  break;
                }

                *theArray = v38;
                *&theArray[8] = cf;
                CFDictionaryApplyFunction(v133, figTTMLSynchronicTreeBuildStyleNameToValueTimelineMap, theArray);
                if (++v39 == CFArrayGetCount(v33))
                {
                  goto LABEL_71;
                }
              }

              v11 = v41;
            }

            else
            {
LABEL_71:
              CFDictionaryApplyFunction(v38, figTTMLSynchronicTreeSortTimeline, 0);
              MEMORY[0x19A8D3660](&figTTMLSynchronicTreeGetAnimatableStyles_sInitializeAnimatableStylesOnce, figTTMLSynchronicTreeInitializeAnimatableStylesOnce);
              v42 = sAnimatableStyles;
              if (CFArrayGetCount(sAnimatableStyles))
              {
                v43 = 0;
                HIDWORD(v111) = v111 & 0x1D;
                v113 = v38;
                v115 = Mutable;
                v117 = v42;
                while (1)
                {
                  v44 = CFArrayGetValueAtIndex(v42, v43);
                  v45 = CFDictionaryGetValue(v38, v44);
                  if (v45)
                  {
                    v46 = v45;
                    v142 = 0;
                    v143 = 0;
                    v141 = **&MEMORY[0x1E6960C80];
                    if (CFArrayGetCount(v45))
                    {
                      v47 = 0;
                      while (1)
                      {
                        v48 = CFArrayGetValueAtIndex(v46, v47);
                        CFArrayGetValueAtIndex(v48, 0);
                        OUTLINED_FUNCTION_3_156();
                        CMTimeRangeMakeFromDictionary(theArray, v49);
                        cf.start = v141;
                        time2 = *theArray;
                        v50 = CMTimeCompare(&cf.start, &time2);
                        if (v50 > 0)
                        {
                          break;
                        }

                        OUTLINED_FUNCTION_6_120(v50, v51, v52, v53, v54, v55, v56, v57, DocumentOrderIndex, v99, v101, v103, v105, v107, v109, v111, v113, v115, v117, allocator, context, v122, v123, v124, v125, theDict, v127, *(&v127 + 1), v128, *(&v128 + 1), v129, *(&v129 + 1), v130, v131, *theArray, *&theArray[8], *&theArray[16], *&theArray[24], *&theArray[32]);
                        CMTimeRangeGetEnd(&v141, &cf);
                        if (++v47 == CFArrayGetCount(v46))
                        {
                          goto LABEL_78;
                        }
                      }

                      fig_log_get_emitter();
                      OUTLINED_FUNCTION_0_58();
                      v11 = FigSignalErrorAtGM();
                      v61 = 0;
                    }

                    else
                    {
LABEL_78:
                      if (CFDictionaryGetValue(Mutable, v44))
                      {
                        FigCaptionDynamicStyleGetInitialValue();
                        v58 = FigCaptionDynamicStyleCreateMutable();
                        if (v58)
                        {
                          v11 = v58;
                          v61 = 0;
                        }

                        else
                        {
                          *&time2.value = v144;
                          time2.epoch = v145;
                          if (HIDWORD(v111) == 1)
                          {
                            *theArray = *(&v145 + 1);
                            *&theArray[8] = v146;
                            *&theArray[12] = v111;
                            *&theArray[16] = v109;
                            Seconds = CMTimeGetSeconds(theArray);
                          }

                          else
                          {
                            Seconds = INFINITY;
                          }

                          InitialValue = FigCaptionDynamicStyleGetInitialValue();
                          v61 = InitialValue ? CFRetain(InitialValue) : 0;
                          if (Seconds <= 0.0)
                          {
LABEL_117:
                            v78 = v61;
LABEL_118:
                            Mutable = v115;
                            CFDictionarySetValue(v115, v44, v143);
                            v11 = 0;
                            v61 = v78;
                          }

                          else
                          {
                            v62 = 0;
                            v63 = 0;
                            v64 = 0.0;
                            while (1)
                            {
                              v138 = Seconds;
                              if (v142)
                              {
                                CFRelease(v142);
                                v142 = 0;
                              }

                              if (v62 < FigCaptionDynamicStyleGetKeyFrameCount())
                              {
                                v65 = FigCaptionDynamicStyleCopyKeyFrameValueAtIndex();
                                if (v65)
                                {
                                  break;
                                }
                              }

                              if (v63 >= CFArrayGetCount(v46))
                              {
                                v66 = 0;
                                v77 = Seconds;
                              }

                              else
                              {
                                v66 = CFArrayGetValueAtIndex(v46, v63);
                                OUTLINED_FUNCTION_3_156();
                                v68 = CFArrayGetValueAtIndex(v67, 0);
                                v69 = CMTimeRangeMakeFromDictionary(theArray, v68);
                                OUTLINED_FUNCTION_2_186(v69, v70, v71, v72, v73, v74, v75, v76, DocumentOrderIndex, v99, v101, v103, v105, v107, v109, v111, v113, v115, v117, allocator, context, v122, v123, v124, v125, theDict, v127, *(&v127 + 1), v128, *(&v128 + 1), v129, *(&v129 + 1), v130, v131, *theArray, *&theArray[8], *&theArray[16], *&theArray[24], *&theArray[32], *&theArray[40], *&theArray[48], v133, v134, v135, v136, *theArray, *&theArray[8], *&theArray[16], *&v138, cf.start.value);
                                v77 = CMTimeGetSeconds(&cf.start);
                              }

                              if (v138 >= v64)
                              {
                                v65 = FigCaptionDynamicStyleAddKeyFrameValue();
                                if (v65)
                                {
                                  break;
                                }

                                if (!(v66 | v142))
                                {
                                  goto LABEL_117;
                                }

                                if (v138 >= v77)
                                {
                                  CFArrayGetValueAtIndex(v66, 1);
                                  OUTLINED_FUNCTION_3_156();
                                  v79 = CFArrayGetValueAtIndex(v66, 0);
                                  v80 = CMTimeRangeMakeFromDictionary(theArray, v79);
                                  if ((~*&theArray[36] & 0x11) != 0)
                                  {
                                    OUTLINED_FUNCTION_6_120(v80, v81, v82, v83, v84, v85, v86, v87, DocumentOrderIndex, v99, v101, v103, v105, v107, v109, v111, v113, v115, v117, allocator, context, v122, v123, v124, v125, theDict, v127, *(&v127 + 1), v128, *(&v128 + 1), v129, *(&v129 + 1), v130, v131, *theArray, *&theArray[8], *&theArray[16], *&theArray[24], *&theArray[32]);
                                    End = CMTimeRangeGetEnd(&v137, &cf);
                                    OUTLINED_FUNCTION_2_186(End, v89, v90, v91, v92, v93, v94, v95, v98, v100, v102, v104, v106, v108, v110, v112, v114, v116, v118, allocatora, context, v122, v123, v124, v125, theDict, v127, *(&v127 + 1), v128, *(&v128 + 1), v129, *(&v129 + 1), v130, v131, *theArray, *&theArray[8], *&theArray[16], *&theArray[24], *&theArray[32], *&theArray[40], *&theArray[48], v133, v134, v135, v136, v137.value, *&v137.timescale, v137.epoch, *&v138, cf.start.value);
                                    v64 = CMTimeGetSeconds(&cf.start);
                                  }

                                  else
                                  {
                                    v64 = INFINITY;
                                  }

                                  v65 = FigCaptionDynamicStyleAddKeyFrameValue();
                                  if (v65)
                                  {
                                    break;
                                  }

                                  ++v63;
                                  v78 = v61;
                                }

                                else
                                {
                                  v65 = FigCaptionDynamicStyleAddKeyFrameValue();
                                  if (v65)
                                  {
                                    break;
                                  }

                                  v78 = v142;
                                  if (v142)
                                  {
                                    CFRetain(v142);
                                  }

                                  if (v61)
                                  {
                                    CFRelease(v61);
                                  }

                                  ++v62;
                                  v64 = v138;
                                }
                              }

                              else
                              {
                                v78 = v142;
                                if (v142)
                                {
                                  CFRetain(v142);
                                }

                                if (v61)
                                {
                                  CFRelease(v61);
                                }

                                ++v62;
                              }

                              v61 = v78;
                              if (v64 >= Seconds)
                              {
                                goto LABEL_118;
                              }
                            }

                            v11 = v65;
                            Mutable = v115;
                          }

                          v38 = v113;
                        }
                      }

                      else
                      {
                        v61 = 0;
                        v11 = 0;
                      }

                      v42 = v117;
                    }

                    if (v142)
                    {
                      CFRelease(v142);
                    }

                    if (v61)
                    {
                      CFRelease(v61);
                    }

                    if (v143)
                    {
                      CFRelease(v143);
                    }

                    if (v11)
                    {
                      break;
                    }
                  }

                  if (++v43 == CFArrayGetCount(v42))
                  {
                    goto LABEL_134;
                  }
                }
              }

              else
              {
LABEL_134:
                v11 = 0;
              }
            }

            if (v133)
            {
              CFRelease(v133);
            }

            v6 = v99;
            v5 = v101;
            if (v38)
            {
              CFRelease(v38);
            }

LABEL_141:
            CFRelease(v33);
            goto LABEL_142;
          }

          fig_log_get_emitter();
          OUTLINED_FUNCTION_0_58();
          v31 = FigSignalErrorAtGM();
        }

        v11 = v31;
LABEL_142:
        if (v130)
        {
          CFRelease(v130);
        }

        if (!v11)
        {
          CFDictionaryAddValue(*(v103 + 64), v6, Mutable);
          *v5 = Mutable;
          Mutable = 0;
        }

        goto LABEL_146;
      }
    }

    else
    {
      fig_log_get_emitter();
      v13 = FigSignalErrorAtGM();
    }

    v11 = v13;
LABEL_35:
    v9 = 0;
    goto LABEL_147;
  }

  fig_log_get_emitter();
  v11 = FigSignalErrorAtGM();
  v9 = 0;
  Mutable = 0;
LABEL_147:
  if (v125)
  {
    CFRelease(v125);
  }

  if (v9)
  {
    CFRelease(v9);
  }

  if (theDict)
  {
    CFRelease(theDict);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  return v11;
}

void figTTMLSynchronicTreeBuildStyleNameToValueTimelineMap(const __CFString *a1, const void *a2, uint64_t a3)
{
  if (figTTMLSynchronicTreeIsStyleAttribute(a1))
  {
    Value = CFDictionaryGetValue(*a3, a1);
    if (Value)
    {
      Mutable = Value;
      CFRetain(Value);
      v8 = *MEMORY[0x1E695E480];
    }

    else
    {
      v8 = *MEMORY[0x1E695E480];
      Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
      CFDictionarySetValue(*a3, a1, Mutable);
    }

    v9 = CFArrayCreateMutable(v8, 2, MEMORY[0x1E695E9C0]);
    v10 = *(a3 + 24);
    *&v12.start.value = *(a3 + 8);
    *&v12.start.epoch = v10;
    *&v12.duration.timescale = *(a3 + 40);
    v11 = CMTimeRangeCopyAsDictionary(&v12, v8);
    CFArrayAppendValue(v9, v11);
    CFArrayAppendValue(v9, a2);
    CFArrayAppendValue(Mutable, v9);
    if (v9)
    {
      CFRelease(v9);
    }

    if (Mutable)
    {
      CFRelease(Mutable);
    }

    if (v11)
    {
      CFRelease(v11);
    }
  }
}

uint64_t FigTTMLSynchronicTreeCopyCaptionArray_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLSynchronicTreeCopyCaptionArray_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLSynchronicTreeCopyCaptionArray_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLSynchronicTreeCopyCaptionArray_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionRendererCaptionCreate(void *a1)
{
  *a1 = 0;
  v8 = 0;
  MEMORY[0x19A8D3660](&FigCaptionRendererCaptionGetClassID_sRegisterFigCaptionRendererCaptionBaseTypeOnce, RegisterFigCaptionRendererCaptionBaseType);
  v2 = CMDerivedObjectCreate();
  if (!v2)
  {
    v3 = v8;
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    FigNote_AllowInternalDefaultLogs();
    OUTLINED_FUNCTION_6_2();
    fig_note_initialize_category_with_default_work_cf();
    OUTLINED_FUNCTION_6_2();
    fig_note_initialize_category_with_default_work_cf();
    v7 = 0;
    FigCaptionRendererNodeCreate(&v7);
    *DerivedStorage = v7;
    v6 = 0;
    FigCaptionRendererIntervalCreate(&v6);
    *(DerivedStorage + 8) = v6;
    *(DerivedStorage + 80) = 0;
    *(DerivedStorage + 88) = 0;
    *(DerivedStorage + 96) = 0u;
    *(DerivedStorage + 112) = 0u;
    *(DerivedStorage + 128) = 1;
    *a1 = v3;
  }

  return v2;
}

void calculateAndCopyStrokeAttributes(uint64_t a1, void *a2, CFNumberRef *a3, double a4)
{
  v19 = *MEMORY[0x1E69E9840];
  if (a4 > 0.0)
  {
    components[0] = *(a1 + 64);
    CopyWithAlpha = MACaptionAppearanceCopyStrokeColor();
    if (!CopyWithAlpha)
    {
      DeviceRGB = CGColorSpaceCreateDeviceRGB();
      if (DeviceRGB)
      {
        v10 = DeviceRGB;
        *components = xmmword_196E7BB58;
        v18 = unk_196E7BB68;
        v11 = CGColorCreate(DeviceRGB, components);
        CopyWithAlpha = CGColorCreateCopyWithAlpha(v11, *(a1 + 168));
        CGColorRelease(v11);
        CGColorSpaceRelease(v10);
      }

      else
      {
        CopyWithAlpha = 0;
      }
    }

    v12 = *(a1 + 680);
    if (v12 < 0.0)
    {
      MACaptionAppearanceGetStrokeWidth();
      v12 = v13 + v13;
    }

    if (*(a1 + 672))
    {
      v12 = v12 * 100.0 / a4;
    }

    components[0] = v12;
    v14 = *MEMORY[0x1E695E480];
    v15 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberCGFloatType, components);
    if (v15)
    {
      if (a2)
      {
LABEL_12:
        *a2 = CopyWithAlpha;
LABEL_18:
        if (a3)
        {
          *a3 = v15;
        }

        else if (v15)
        {
          CFRelease(v15);
        }

        return;
      }
    }

    else
    {
      v16 = a4 * 0.147058824;
      if (a4 > 60.0)
      {
        v16 = a4 * 0.147058824 * 0.5;
      }

      components[0] = v16;
      v15 = CFNumberCreate(v14, kCFNumberCGFloatType, components);
      if (a2)
      {
        goto LABEL_12;
      }
    }

    if (CopyWithAlpha)
    {
      CFRelease(CopyWithAlpha);
    }

    goto LABEL_18;
  }
}

uint64_t FigCaptionRendererCaption_FigCaptionRendererNodeProtocol_Draw_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionRendererCaption_FigCaptionRendererNodeProtocol_Draw_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionRendererCaption_FigCaptionRendererNodeProtocol_Draw_cold_7(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionRendererCaption_FigCaptionRendererNodeProtocol_Draw_cold_9(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionRendererCaption_FigCaptionRendererNodeProtocol_Draw_cold_10(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionRendererCaption_FigCaptionRendererNodeProtocol_Draw_cold_11(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTransformUtilityGenerateReplacementImageBufferAsync(uint64_t a1, CVImageBufferRef imageBuffer, uint64_t a3, void (*a4)(uint64_t, CVImageBufferRef), uint64_t a5)
{
  pixelBufferOut = 0;
  CVImageBufferGetCleanRect(imageBuffer);
  OUTLINED_FUNCTION_1_189();
  v13 = *MEMORY[0x1E695F058];
  rect.size = *(MEMORY[0x1E695F058] + 16);
  v14 = MEMORY[0x1E695F060];
  v155.size = rect.size;
  rect.origin = v13;
  size = *MEMORY[0x1E695F060];
  v155.origin = v13;
  valuePtr = 0;
  v149 = 0;
  v150 = &v149;
  v151 = 0x2000000000;
  v152 = 0;
  v145 = 0;
  v146 = &v145;
  v147 = 0x2000000000;
  v148 = 0;
  v141 = 0;
  v142 = &v141;
  v143 = 0x2000000000;
  v144 = 0;
  v137 = 0;
  v138 = &v137;
  v139 = 0x2000000000;
  v140 = 0;
  v133 = 0;
  v134 = &v133;
  v135 = 0x2000000000;
  v136 = 0;
  v129 = 0;
  v130 = &v129;
  v131 = 0x2000000000;
  v132 = 0;
  v125 = 0;
  v126 = &v125;
  v127 = 0x2000000000;
  v128 = 0;
  if (FigIsNullPixelBuffer(imageBuffer))
  {
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 1;
    goto LABEL_144;
  }

  v20 = CVBufferCopyAttachment(imageBuffer, @"SourceRect", 0);
  if (v20)
  {
    v21 = v20;
    v22 = CFGetTypeID(v20);
    if (v22 == CFDictionaryGetTypeID())
    {
      CGRectMakeWithDictionaryRepresentation(v21, &rect);
    }

    CFRelease(v21);
  }

  v23 = CVBufferCopyAttachment(imageBuffer, @"DestRect", 0);
  v24 = v23;
  if (v23)
  {
    v25 = CFGetTypeID(v23);
    if (v25 == CFDictionaryGetTypeID())
    {
      CGRectMakeWithDictionaryRepresentation(v24, &v155);
    }
  }

  v26 = CVBufferCopyAttachment(imageBuffer, @"VirtualDisplaySizeForDestRect", 0);
  v27 = v26;
  if (v26)
  {
    v28 = CFGetTypeID(v26);
    if (v28 == CFDictionaryGetTypeID())
    {
      CGSizeMakeWithDictionaryRepresentation(v27, &size);
    }
  }

  v114 = v27;
  v29 = CVBufferCopyAttachment(imageBuffer, @"SymmetricTransform", 0);
  v30 = v29;
  if (v29)
  {
    v31 = CFGetTypeID(v29);
    if (v31 == CFNumberGetTypeID())
    {
      CFNumberGetValue(v30, kCFNumberIntType, &valuePtr);
    }
  }

  v113 = v30;
  v32 = *(a1 + 16);
  block[0] = MEMORY[0x1E69E9820];
  block[1] = 0x40000000;
  block[2] = __FigTransformUtilityGenerateReplacementImageBufferAsync_block_invoke;
  block[3] = &unk_1E7497758;
  block[4] = &v149;
  block[5] = &v145;
  block[6] = &v141;
  block[7] = &v137;
  block[8] = &v133;
  block[9] = &v129;
  block[10] = &v125;
  block[11] = a1;
  dispatch_sync(v32, block);
  v33 = OUTLINED_FUNCTION_2_187(v155.origin.x, v155.origin.y, v155.size.width, v155.size.height);
  v34 = MEMORY[0x1E695E480];
  if (v33 || (size.width == *v14 ? (v35 = size.height == v14[1]) : (v35 = 0), v35 || OUTLINED_FUNCTION_2_187(rect.origin.x, rect.origin.y, rect.size.width, rect.size.height)))
  {
    v112 = 1;
  }

  else
  {
    if (valuePtr)
    {
      *(v134 + 6) = valuePtr;
      v63 = v126[3];
      if (v63)
      {
        CFRelease(v63);
      }

      v64 = *v34;
      values = CFNumberCreate(*v34, kCFNumberIntType, &valuePtr);
      v65 = CFDictionaryCreate(v64, MEMORY[0x1E69A85C0], &values, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      v126[3] = v65;
      if (values)
      {
        CFRelease(values);
      }
    }

    v112 = 0;
  }

  v36 = *(v134 + 6);
  CleanRect = CVImageBufferGetCleanRect(imageBuffer);
  width = CleanRect.size.width;
  height = CleanRect.size.height;
  v39 = CVBufferCopyAttachment(imageBuffer, *MEMORY[0x1E6965EF8], 0);
  value = v24;
  if (v39)
  {
    v40 = v39;
    v41 = CFGetTypeID(v39);
    if (v41 == CFDictionaryGetTypeID())
    {
      LODWORD(values) = 1;
      LODWORD(v116) = 1;
      v42 = CFDictionaryGetValue(v40, *MEMORY[0x1E6965EF0]);
      if (v42)
      {
        v43 = v42;
        v44 = CFGetTypeID(v42);
        if (v44 == CFNumberGetTypeID())
        {
          CFNumberGetValue(v43, kCFNumberSInt32Type, &values);
          v45 = CFDictionaryGetValue(v40, *MEMORY[0x1E6965F00]);
          if (v45)
          {
            v46 = v45;
            v47 = CFGetTypeID(v45);
            if (v47 == CFNumberGetTypeID())
            {
              CFNumberGetValue(v46, kCFNumberSInt32Type, &v116);
              width = width * values / v116;
            }
          }
        }
      }
    }

    CFRelease(v40);
  }

  v48 = (height + 0.5);
  v49 = (width + 0.5);
  if (v36)
  {
    v50 = *(v130 + 6);
    goto LABEL_33;
  }

  v60 = CVPixelBufferGetWidth(imageBuffer);
  v61 = CVPixelBufferGetHeight(imageBuffer);
  v62 = v60 <= v142[3] && v61 <= v138[3];
  v50 = *(v130 + 6);
  v78 = v150[3];
  if (v50)
  {
    if (v6 < v78)
    {
      goto LABEL_33;
    }

    if (v5 < v146[3])
    {
      LOBYTE(v62) = 0;
    }

    if (!v62)
    {
LABEL_33:
      if ((v36 & 4) != 0)
      {
        v51 = (height + 0.5);
      }

      else
      {
        v51 = (width + 0.5);
      }

      if ((v36 & 4) != 0)
      {
        v52 = (width + 0.5);
      }

      else
      {
        v52 = (height + 0.5);
      }

      if (v50 == 1)
      {
        v53 = v150[3];
        v54 = v146[3];
        if (v51 < v53 || v52 < v54)
        {
          OUTLINED_FUNCTION_0_208();
          if (v58 ^ v59 | v35)
          {
            v51 = v54 * v56 / v57;
            v52 = v54;
          }

          else
          {
            v52 = v53 * v57 / v56;
            v51 = v53;
          }
        }

        v66 = a5;
        v67 = v52 * v53;
        v68 = v51 * v54 > v52 * v53;
        v69 = v51 * v54 / v53;
        if (v68)
        {
          v70 = v52;
        }

        else
        {
          v70 = v69;
        }

        v71 = v67 / v54;
        if (v68)
        {
          v72 = v71;
        }

        else
        {
          v72 = v51;
        }

        if ((v36 & 4) != 0)
        {
          v73 = v52;
          v74 = v70;
        }

        else
        {
          v73 = v51;
          v51 = v52;
          v74 = v72;
        }

        ftu_computeSourceImageRectForCroppedDimensions(v73, v8, v7, v6, v51, v74);
        OUTLINED_FUNCTION_1_189();
        v75 = v142[3];
        v76 = v138[3];
        if (v72 > v75 || v70 > v76)
        {
          if ((v75 / v72) >= (v76 / v70))
          {
            v72 = v76 * v72 / v70;
            v70 = v138[3];
          }

          else
          {
            v70 = v75 * v70 / v72;
            v72 = v142[3];
          }
        }

        goto LABEL_102;
      }

LABEL_88:
      if (v51 > v142[3] || v52 > v138[3])
      {
        OUTLINED_FUNCTION_0_208();
        if (v58)
        {
          v52 = v84 * v83 / v82;
          v51 = v84;
        }

        else
        {
          v51 = v85 * v82 / v83;
          v52 = v85;
        }
      }

      v66 = a5;
      v72 = v150[3];
      if (v51 >= v72 || (v70 = v146[3], v52 >= v70))
      {
        v72 = v51;
        v70 = v52;
      }

      else
      {
        OUTLINED_FUNCTION_0_208();
        if (v58)
        {
          v70 = v72 * v87 / v86;
        }

        else
        {
          v72 = v70 * v86 / v87;
        }
      }

LABEL_102:
      PixelFormatType = CVPixelBufferGetPixelFormatType(imageBuffer);
      if (*(a1 + 128) == PixelFormatType && *(a1 + 136) == v72 && *(a1 + 144) == v70)
      {
        v89 = *v34;
      }

      else
      {
        v90 = *(a1 + 120);
        if (v90)
        {
          CFRelease(v90);
          *(a1 + 120) = 0;
        }

        v89 = *v34;
        MutableCopy = CFDictionaryCreateMutableCopy(*v34, 0, *(a1 + 24));
        ftvCFDictionarySetSInt32Value(MutableCopy, *MEMORY[0x1E6966130], PixelFormatType);
        ftvCFDictionarySetSInt32Value(MutableCopy, *MEMORY[0x1E6966208], v72);
        ftvCFDictionarySetSInt32Value(MutableCopy, *MEMORY[0x1E69660B8], v70);
        v18 = CVPixelBufferPoolCreate(v89, 0, MutableCopy, (a1 + 120));
        if (!v18)
        {
          *(a1 + 128) = PixelFormatType;
          *(a1 + 136) = v72;
          *(a1 + 144) = v70;
        }

        if (MutableCopy)
        {
          CFRelease(MutableCopy);
        }

        if (v18)
        {
LABEL_161:
          v19 = 1;
          a5 = v66;
          goto LABEL_143;
        }
      }

      v92 = CVPixelBufferPoolCreatePixelBuffer(v89, *(a1 + 120), &pixelBufferOut);
      if (!v92)
      {
        if (*(a1 + 72))
        {
LABEL_117:
          dispatch_semaphore_wait(*(a1 + 80), 0xFFFFFFFFFFFFFFFFLL);
          dispatch_retain(*(a1 + 80));
          if ((v112 & 1) == 0)
          {
            v94 = v70;
            if ((valuePtr & 4) != 0)
            {
              v95 = v70;
            }

            else
            {
              v95 = v72;
            }

            if ((valuePtr & 4) != 0)
            {
              v94 = v72;
            }

            v96 = v95 / v6;
            v97 = 1.0;
            if (v95 == v6)
            {
              v96 = 1.0;
            }

            if (v94 != v5)
            {
              v97 = v94 / v5;
            }

            v98 = rect.origin.x * v96;
            v99 = rect.origin.y * v97;
            v100 = rect.size.width * v96;
            v101 = rect.size.height * v97;
            v102 = v94 - (rect.origin.y * v97 + rect.size.height * v97);
            if ((valuePtr & 4) != 0)
            {
              v103 = rect.size.height * v97;
            }

            else
            {
              v103 = rect.size.width * v96;
            }

            if ((valuePtr & 4) != 0)
            {
              v104 = v100;
            }

            else
            {
              v104 = rect.size.height * v97;
            }

            v105 = v95 - (v98 + v100);
            if ((valuePtr & 2) == 0)
            {
              v102 = v99;
            }

            if ((valuePtr & 1) == 0)
            {
              v105 = v98;
            }

            v106 = v72 - (v101 + v102);
            if ((valuePtr & 4) != 0)
            {
              v102 = v105;
            }

            else
            {
              v106 = v105;
            }

            DictionaryRepresentation = CGRectCreateDictionaryRepresentation(*(&v102 - 1));
            CVBufferSetAttachment(pixelBufferOut, @"SourceRect", DictionaryRepresentation, kCVAttachmentMode_ShouldPropagate);
            CVBufferSetAttachment(pixelBufferOut, @"DestRect", value, kCVAttachmentMode_ShouldPropagate);
            CVBufferSetAttachment(pixelBufferOut, @"VirtualDisplaySizeForDestRect", v114, kCVAttachmentMode_ShouldPropagate);
            if (DictionaryRepresentation)
            {
              CFRelease(DictionaryRepresentation);
            }
          }

          v108 = malloc_type_calloc(1uLL, 0x18uLL, 0xA0040114AFA65uLL);
          *v108 = a4;
          v108[1] = v66;
          v108[2] = pixelBufferOut;
          CVPixelBufferGetIOSurface(imageBuffer);
          CVPixelBufferGetIOSurface(pixelBufferOut);
          LODWORD(values) = v8;
          HIDWORD(values) = v7;
          v121 = v6;
          v122 = v5;
          v123 = 0;
          v116 = 0;
          v117 = v72;
          v118 = v70;
          a5 = v66;
          v119 = 0;
          v18 = IOSurfaceAcceleratorBlitSurface();
          v19 = 0;
          goto LABEL_143;
        }

        v92 = IOSurfaceAcceleratorCreate();
        if (!v92)
        {
          RunLoopSource = IOSurfaceAcceleratorGetRunLoopSource();
          CFRunLoopAddSource(*(a1 + 96), RunLoopSource, *MEMORY[0x1E695E8D0]);
          goto LABEL_117;
        }
      }

      v18 = v92;
      goto LABEL_161;
    }
  }

  else
  {
    v79 = v146[3];
    if ((v78 / v49) >= (v79 / v48))
    {
      v78 = v79 * v49 / v48;
    }

    else
    {
      v79 = v78 * v48 / v49;
    }

    v80 = v6 >= v78;
    if (v5 >= v79)
    {
      v80 = 1;
    }

    if (!v62 || !v80)
    {
      v51 = (width + 0.5);
      v52 = (height + 0.5);
      goto LABEL_88;
    }
  }

  v18 = 0;
  v19 = 1;
LABEL_143:
  v16 = v114;
  v17 = value;
  v15 = v113;
LABEL_144:
  v109 = v126[3];
  if (v109)
  {
    CFRelease(v109);
  }

  if (v17)
  {
    CFRelease(v17);
  }

  if (v16)
  {
    CFRelease(v16);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  if (v18 && pixelBufferOut)
  {
    CFRelease(pixelBufferOut);
    pixelBufferOut = 0;
  }

  v110 = v19 ^ 1;
  if (!a4)
  {
    v110 = 1;
  }

  if ((v110 & 1) == 0)
  {
    a4(a5, imageBuffer);
  }

  _Block_object_dispose(&v125, 8);
  _Block_object_dispose(&v129, 8);
  _Block_object_dispose(&v133, 8);
  _Block_object_dispose(&v137, 8);
  _Block_object_dispose(&v141, 8);
  _Block_object_dispose(&v145, 8);
  _Block_object_dispose(&v149, 8);
  return v18;
}

void FigTransformUtilityCreate_cold_2(uint64_t a1, const void *a2, const void **a3, void *a4)
{
  v7 = a1;
  *(a1 + 16) = dispatch_queue_create("com.apple.coremedia.transformutility", 0);
  if (a2)
  {
    v8 = CFRetain(a2);
  }

  else
  {
    v8 = 0;
  }

  *(v7 + 24) = v8;
  *a3 = @"com.apple.coremedia.transformutility.callback";
  v9 = CFDictionaryCreate(*MEMORY[0x1E695E480], MEMORY[0x1E69631F0], a3, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  *(v7 + 80) = dispatch_semaphore_create(3);
  *(v7 + 112) = dispatch_semaphore_create(0);
  v10 = FigThreadCreate();
  if (!v10)
  {
    dispatch_semaphore_wait(*(v7 + 112), 0xFFFFFFFFFFFFFFFFLL);
    *(v7 + 56) = vdupq_n_s64(0xF4240uLL);
  }

  v11 = *(v7 + 112);
  if (v11)
  {
    dispatch_release(v11);
    *(v7 + 112) = 0;
  }

  if (v9)
  {
    CFRelease(v9);
  }

  if (v10)
  {
    CFRelease(v7);
    v7 = 0;
  }

  *a4 = v7;
}

uint64_t FigTransformUtilityCreate_cold_3()
{
  fig_log_get_emitter();

  return FigSignalErrorAtGM();
}

void fiit_checkAndUpdateIfPrimaryIsReadyForInspection(uint64_t a1)
{
  v48[16] = *MEMORY[0x1E69E9840];
  CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_106(MEMORY[0x1E6960C70]);
  v3 = *MEMORY[0x1E695E4C0];
  v34 = *MEMORY[0x1E695E4C0];
  if (!*(v2 + 201))
  {
    v4 = v2;
    v5 = *MEMORY[0x1E695E480];
    FigBaseObject = FigPlaybackItemGetFigBaseObject(*(v2 + 8));
    v7 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (v7)
    {
      v7(FigBaseObject, @"BasicsReadyForInspection", v5, &v34);
      v3 = v34;
    }

    v8 = *MEMORY[0x1E695E4D0];
    v28 = v3 == *MEMORY[0x1E695E4D0];
    *(v4 + 201) = v28;
    if (v28)
    {
      v14 = *(v4 + 8);
      v15 = *(*(CMBaseObjectGetVTable() + 16) + 16);
      if (!v15 || v15(v14, v35))
      {
        return;
      }

      *(v4 + 200) = (~v36 & 0x11) == 0;
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      theArray = 0;
      v17 = FigPlaybackItemGetFigBaseObject(*(DerivedStorage + 8));
      v18 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (!v18)
      {
        goto LABEL_32;
      }

      v18(v17, @"TaggedRangeMetadataArray", v5, &theArray);
      if (!theArray)
      {
        goto LABEL_32;
      }

      if (CFArrayGetCount(theArray) < 1)
      {
        goto LABEL_32;
      }

      v19 = theArray;
      if (!theArray)
      {
        goto LABEL_32;
      }

      Count = CFArrayGetCount(theArray);
      if (Count < 1)
      {
        goto LABEL_32;
      }

      v21 = Count;
      v33 = DerivedStorage;
      v22 = 1;
      do
      {
        ValueAtIndex = CFArrayGetValueAtIndex(v19, v22 - 1);
        CFDictionaryGetValue(ValueAtIndex, @"TaggedRangeMetadataKey_Class");
        v24 = FigCFEqual();
        if (v22 >= v21)
        {
          break;
        }

        ++v22;
      }

      while (!v24);
      DerivedStorage = v33;
      if (!v24)
      {
        goto LABEL_32;
      }

      v25 = CMBaseObjectGetDerivedStorage();
      v48[0] = v8;
      v26 = FigPlaybackItemGetFigBaseObject(*(v25 + 8));
      v27 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v27)
      {
        v28 = v27(v26, @"AutomaticallyHandlesInterstitialEvents", v5, v48) || v48[0] == v3;
        if (!v28)
        {
          goto LABEL_32;
        }
      }

      v29 = *(v33 + 32);
      if (!v29 || !CFArrayGetCount(v29))
      {
        v30 = *(v33 + 203);
        *(v33 + 202) = *(v33 + 203) == 0;
        if (!v30 && dword_1EAF17A98)
        {
          *type = 0;
          v37 = OS_LOG_TYPE_DEFAULT;
          os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
          v32 = os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, v37);
          if (OUTLINED_FUNCTION_109_0(v32))
          {
            v40 = 136315394;
            v41 = "fiit_checkAndUpdateIfTimelineShouldWaitForInterstitialsFromCoordinator";
            v42 = 2048;
            v43 = a1;
            OUTLINED_FUNCTION_18_3();
          }

          OUTLINED_FUNCTION_7();
          OUTLINED_FUNCTION_524();
        }
      }

      else
      {
LABEL_32:
        *(DerivedStorage + 202) = 0;
      }

      if (theArray)
      {
        CFRelease(theArray);
      }
    }

    if (dword_1EAF17A98)
    {
      LODWORD(theArray) = 0;
      type[0] = OS_LOG_TYPE_DEFAULT;
      v9 = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
      v10 = os_log_type_enabled(v9, type[0]);
      if (OUTLINED_FUNCTION_109_0(v10))
      {
        v11 = *(v4 + 200);
        if (*(v4 + 201))
        {
          v12 = "is";
        }

        else
        {
          v12 = "is not";
        }

        v13 = ", is live";
        v41 = "fiit_checkAndUpdateIfPrimaryIsReadyForInspection";
        v42 = 2048;
        v40 = 136315906;
        v43 = a1;
        v44 = 2080;
        if (!v11)
        {
          v13 = "";
        }

        v45 = v12;
        v46 = 2080;
        v47 = v13;
        OUTLINED_FUNCTION_18_3();
      }

      OUTLINED_FUNCTION_7();
      OUTLINED_FUNCTION_524();
    }
  }
}

uint64_t fiit_updatePrimaryItemSeekableTimeRange(int a1, CFTypeRef cf)
{
  v96 = *MEMORY[0x1E69E9840];
  if (cf)
  {
    v2 = CFRetain(cf);
  }

  else
  {
    v2 = 0;
  }

  v87 = v2;
  v3 = *(MEMORY[0x1E6960C98] + 16);
  v84 = *MEMORY[0x1E6960C98];
  v85 = v3;
  v86 = *(MEMORY[0x1E6960C98] + 32);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = DerivedStorage;
  if (!v2)
  {
    FigBaseObject = FigPlaybackItemGetFigBaseObject(*(DerivedStorage + 8));
    v62 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (!v62 || v62(FigBaseObject, @"SeekableTimeIntervals", *MEMORY[0x1E695E480], &v87))
    {
      goto LABEL_19;
    }

    v2 = v87;
  }

  v94 = *MEMORY[0x1E6960C70];
  v95 = *(MEMORY[0x1E6960C70] + 8);
  v92 = *MEMORY[0x1E6960C80];
  v6 = *(MEMORY[0x1E6960C80] + 12);
  v93 = *(MEMORY[0x1E6960C80] + 8);
  v7 = *(MEMORY[0x1E6960C80] + 16);
  v64 = v5;
  if (v2 && (Count = CFArrayGetCount(v2), Count >= 1))
  {
    v8 = 0;
    key = @"startTime";
    v67 = @"endTime";
    while (1)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(v2, v8);
      Value = CFDictionaryGetValue(ValueAtIndex, key);
      CMTimeMakeFromDictionary(v82, Value);
      v90 = *v82;
      v11 = *&v82[12];
      v91 = *&v82[8];
      v12 = *&v82[16];
      v13 = CFDictionaryGetValue(ValueAtIndex, v67);
      CMTimeMakeFromDictionary(v82, v13);
      v88 = *v82;
      v14 = *&v82[12];
      v89 = *&v82[8];
      if ((v11 & 0x1D) != 1)
      {
        break;
      }

      v15 = *&v82[16];
      OUTLINED_FUNCTION_37_29();
      v24 = OUTLINED_FUNCTION_48_20(v16, v17, v18, v19, v20, v21, v22, v23, v64, v67, key, Count, v90, __SPAIR64__(v11, v91), v12, v76, v78, v80, v82[0]);
      v26 = CMTimeCompare(v24, v25);
      if (v26 >= 1)
      {
        v94 = v90;
        v95 = v91;
      }

      *&v82[8] = __PAIR64__(v6, v93);
      *&v82[16] = v7;
      v34 = OUTLINED_FUNCTION_48_20(v26, v27, v28, v29, v30, v31, v32, v33, v65, v68, keya, v74, v88, __SPAIR64__(v14, v89), v15, v77, v79, v81, v92);
      if (CMTimeCompare(v34, v35) < 0)
      {
        v92 = v88;
        v93 = v89;
        v6 = v14;
        v7 = v15;
      }

      if (Count == ++v8)
      {
        goto LABEL_14;
      }
    }
  }

  else
  {
LABEL_14:
    OUTLINED_FUNCTION_37_29();
    v44 = OUTLINED_FUNCTION_48_20(v36, v37, v38, v39, v40, v41, v42, v43, v64, v67, key, Count, v92, __SPAIR64__(v6, v93), v7, v76, v78, v80, v82[0]);
    v47 = CMTimeRangeFromTimeToTime(v46, v44, v45);
    v48 = v66;
    v49 = *(v66 + 120);
    *v82 = *(v66 + 104);
    *&v82[16] = v49;
    v83 = *(v66 + 136);
    v57 = OUTLINED_FUNCTION_48_20(v47, v50, v51, v52, v53, v54, v55, v56, v66, v69, keyb, v75, v84, *(&v84 + 1), v85, *(&v85 + 1), v86, *(&v86 + 1), v82[0]);
    if (!CMTimeRangeEqual(v57, v58))
    {
      v59 = v85;
      *(v48 + 104) = v84;
      *(v48 + 120) = v59;
      *(v48 + 136) = v86;
      v60 = 1;
      goto LABEL_20;
    }
  }

LABEL_19:
  v60 = 0;
LABEL_20:
  if (v87)
  {
    CFRelease(v87);
  }

  return v60;
}

void fiit_updatePrimaryItemStartMoment()
{
  v20 = *MEMORY[0x1E69E9840];
  v16 = 0;
  v14 = 0u;
  v15 = 0u;
  cf = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 116))
  {
    v1 = DerivedStorage;
    if ((*(DerivedStorage + 140) & 1) != 0 && !*(DerivedStorage + 144) && (*(DerivedStorage + 128) & 0x8000000000000000) == 0)
    {
      FigBaseObject = FigPlaybackItemGetFigBaseObject(*(DerivedStorage + 8));
      v3 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v3 && (v3(FigBaseObject, @"currentDateAndTime", *MEMORY[0x1E695E480], &cf), cf))
      {
        FigDateTimeMakeFromDictionary(cf, &v14);
      }

      else
      {
        LOBYTE(v16) = 1;
        v4 = *(v1 + 8);
        v5 = *(*(CMBaseObjectGetVTable() + 16) + 32);
        if (v5)
        {
          v5(v4, &v14);
        }
      }

      v6 = 0;
      v7 = *(v1 + 120);
      *&v12.value = v14;
      v8 = *(&v15 + 1);
      v12.epoch = v15;
      v18 = *(v1 + 104);
      v9 = *(v1 + 116);
      v19 = *(v1 + 112);
      v10 = 0.0;
      if (v16 && BYTE1(v16))
      {
        time.value = *(v1 + 104);
        time.timescale = *(v1 + 112);
        time.flags = v9;
        time.epoch = v7;
        v11 = v8 + CMTimeGetSeconds(&time);
        time = v12;
        v10 = v11 - CMTimeGetSeconds(&time);
        v6 = 1;
      }

      *(v1 + 160) = v18;
      *(v1 + 168) = v19;
      *(v1 + 172) = v9;
      *(v1 + 176) = v7;
      *(v1 + 184) = v10;
      *(v1 + 192) = v9 & 1;
      *(v1 + 193) = v6;
      *(v1 + 194) = 0;
      *(v1 + 198) = 0;
      if (cf)
      {
        CFRelease(cf);
      }
    }
  }
}

void fiit_rebuildSegmentList(uint64_t a1)
{
  v734 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = *(DerivedStorage + 32);
  if (v3)
  {
    Count = CFArrayGetCount(v3);
  }

  else
  {
    Count = 0;
  }

  v4 = *(DerivedStorage + 116);
  if ((v4 & 1) == 0 || (*(DerivedStorage + 140) & 1) == 0 || *(DerivedStorage + 144) || (*(DerivedStorage + 128) & 0x8000000000000000) != 0 || *(DerivedStorage + 202))
  {
    return;
  }

  v730 = *(DerivedStorage + 104);
  v731 = *(DerivedStorage + 112);
  v5 = *(DerivedStorage + 120);
  v732 = v730;
  v733 = v731;
  theArray = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  v572 = 0;
  v6 = 0;
  HIDWORD(v407) = *(MEMORY[0x1E6960CC0] + 12);
  v504 = *(MEMORY[0x1E6960CC0] + 16);
  v455 = Count - 1;
  v7 = MEMORY[0x1E6960C70];
  v555 = v5;
  HIDWORD(v538) = v4;
  v487 = a1;
  while (1)
  {
    OUTLINED_FUNCTION_7_104();
    CMTimeRangeGetEnd(&time1[0].start, &range);
    OUTLINED_FUNCTION_2_188();
    v16 = OUTLINED_FUNCTION_24_35(v8, v9, v10, v11, v12, v13, v14, v15, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v590, v607, v622, v637, *v652, *&v652[8], *&v652[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
    if ((CMTimeCompare(v16, v17) & 0x80000000) == 0 && v6 >= Count)
    {
      break;
    }

    value = v7->value;
    timescale = v7->timescale;
    start = *v7;
    *v652 = start;
    ValueAtIndex = FigCFArrayGetValueAtIndex();
    v19 = CMBaseObjectGetDerivedStorage();
    if (!ValueAtIndex)
    {
      memset(&v723, 0, sizeof(v723));
      OUTLINED_FUNCTION_7_104();
      CMTimeRangeGetEnd(&v723, &range);
LABEL_31:
      range.start = v723;
      OUTLINED_FUNCTION_3_157();
      v77 = OUTLINED_FUNCTION_24_35(v69, v70, v71, v72, v73, v74, v75, v76, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v590, v607, v622, v637, *v652, *&v652[8], *&v652[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
      v80 = CMTimeSubtract(v79, v77, v78);
      *&range.start.value = *v654;
      range.start.epoch = v685;
      v88 = OUTLINED_FUNCTION_24_35(v80, v81, v82, v83, v84, v85, v86, v87, v391, v408, v425, v441, v456, theArrayc, v488, v505, v522, v539, v556, v573, v591, v608, v623, v638, v654[0], v654[1], v685, v701, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, *MEMORY[0x1E6960CC0], *(MEMORY[0x1E6960CC0] + 8), v505, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
      if (CMTimeCompare(v88, v89) < 1)
      {
        goto LABEL_130;
      }

      v725.value = v730;
      v725.timescale = v731;
      v726 = 0;
      v90 = CMBaseObjectGetDerivedStorage();
      v91 = *(v90 + 96);
      v92 = FigCFArrayGetValueAtIndex();
      v93 = v91(v92);
      OUTLINED_FUNCTION_2_188();
      OUTLINED_FUNCTION_46_18(v94, v95, v96, v97, v98, v99, v100, v101, v392, v409, v426, v442, v457, theArray, v489, v506, v523, v540, v557, v574, v655);
      CMTimeRangeMake(time1, &range.start, &time2.start);
      range.start.value = v730;
      range.start.timescale = v731;
      range.start.flags = HIDWORD(v541);
      range.start.epoch = v558;
      *&rhs[0].value = *v592;
      rhs[0].epoch = v686;
      v102 = CMTimeRangeMake(&time2, &range.start, rhs);
      v110 = OUTLINED_FUNCTION_4_155(v102, v103, v104, v105, v106, v107, v108, v109, v393, v410, v427, v443, v458, theArrayd, v490, v507, v524, v541, v558, v575, v592[0], v592[1], v686, v639, v655, *(&v655 + 1), v686, v702, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value);
      v113 = CMTimeMappingMake(v112, v110, v111);
      v114 = *(v90 + 152);
      OUTLINED_FUNCTION_26_37(v113, v115, v116, v117, v118, v119, v120, v121, v394, v411, v428, v444, v459, theArraye, v491, v508, v525, v542, v559, v576, v593, v609, v624, v640, v656, v671, v687, v703, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
      LoadedTimeRangesForTimeMapping = fiit_createLoadedTimeRangesForTimeMapping(v114, time1);
      if (!v93 || FigPlaybackItemSegmentGetType(v93) || (FigPlaybackItemSegmentGetLoadedTimeRanges(v93), !FigCFEqual()) || (FigPlaybackItemSegmentGetTimeMapping(v93, time1), OUTLINED_FUNCTION_41_28(v352, v353, v354, v355, v356, v357, v358, v359, v395, v412, v429, v445, v460, theArray, v492, v509, v526, v543, v560, v577, v594, v610, v625, v641, v657, v672, v688, v704, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value), *&rhs[0].timescale = *&range.start.timescale, rhs[0].epoch = range.start.epoch, *&duration.value = *&time1[0].start.value, OUTLINED_FUNCTION_14_67(time1[0].start.epoch, v406, v423, v439, v454, v471, theArrayn, v503, v520, v537, v554, v571, v589, v606, v621, v636, v651, v669, v683, v699, v714, start.value, *&start.timescale, start.epoch, cf, range.start.value)) || (*&rhs[0].value = *&time2.duration.value, OUTLINED_FUNCTION_22_39(), *&duration.value = *(v360 + 24), OUTLINED_FUNCTION_14_67(*(v360 + 40), v395, v412, v429, v445, v460, theArray, v492, v509, v526, v543, v560, v577, v594, v610, v625, v641, v657, v672, v688, v704, start.value, *&start.timescale, start.epoch, cf, rhs[0].value)) || (*&rhs[0].value = *&v719.value, OUTLINED_FUNCTION_22_39(), *&duration.value = *(v361 + 48), OUTLINED_FUNCTION_14_67(*(v361 + 64), v395, v412, v429, v445, v460, theArray, v492, v509, v526, v543, v560, v577, v594, v610, v625, v641, v657, v672, v688, v704, start.value, *&start.timescale, start.epoch, cf, rhs[0].value)) || (*&rhs[0].value = *&v720.value, OUTLINED_FUNCTION_22_39(), *&duration.value = *(v362 + 72), OUTLINED_FUNCTION_14_67(*(v362 + 88), v395, v412, v429, v445, v460, theArray, v492, v509, v526, v543, v560, v577, v594, v610, v625, v641, v657, v672, v688, v704, start.value, *&start.timescale, start.epoch, cf, rhs[0].value)))
      {
        time2.start.value = v725.value;
        OUTLINED_FUNCTION_39_24();
        v123 = *(v90 + 176);
        *&time1[0].start.value = *(v90 + 160);
        *&time1[0].start.epoch = v123;
        *&time1[0].duration.timescale = *(v90 + 192);
        CFDateFromTime = fiit_MakeCFDateFromTime(&time2.start, time1);
        OUTLINED_FUNCTION_26_37(CFDateFromTime, v125, v126, v127, v128, v129, v130, v131, v395, v412, v429, v445, v460, theArray, v492, v509, v526, v543, v560, v577, v594, v610, v625, v641, v657, v672, v688, v704, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        if (FigPlaybackItemSegmentCreate(0, &time1[0].start.value, LoadedTimeRangesForTimeMapping, CFDateFromTime, 0, &v726))
        {
          v132 = 0;
        }

        else
        {
          v132 = (*(v90 + 88))(v726);
        }
      }

      else
      {
        v363 = FigCFArrayGetValueAtIndex();
        if (v363)
        {
          v132 = CFRetain(v363);
        }

        else
        {
          v132 = 0;
        }

        CFDateFromTime = 0;
      }

      if (LoadedTimeRangesForTimeMapping)
      {
        CFRelease(LoadedTimeRangesForTimeMapping);
      }

      if (CFDateFromTime)
      {
        CFRelease(CFDateFromTime);
      }

      if (v726)
      {
        CFRelease(v726);
      }

      if (!v132)
      {
        goto LABEL_130;
      }

      OUTLINED_FUNCTION_3_157();
      v141 = OUTLINED_FUNCTION_4_155(v133, v134, v135, v136, v137, v138, v139, v140, v395, v412, v429, v445, v460, theArray, v492, v509, v526, v543, v560, v577, v594, v610, v625, v641, v657, v672, v688, v704, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, v657, v672, v688, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value);
      v144 = CMTimeAdd(v143, v141, v142);
      goto LABEL_44;
    }

    v20 = v19;
    v21 = OUTLINED_FUNCTION_28_33();
    FigPlayerInterstitialEventGetResolvedStartTime(v21, v22);
    if (range.start.flags & 1) != 0 && (FigPlayerInterstitialEventGetResolvedEndTime(ValueAtIndex, time1), (time1[0].start.flags))
    {
      if (FigPlayerInterstitialEventIsPostRoll(ValueAtIndex))
      {
        if (!*(v20 + 200))
        {
          goto LABEL_18;
        }

        v367 = 1;
      }

      else
      {
        v367 = 0;
      }

      if (!fiit_isEventResolvedTimeInSeekableTimeRange(a1, ValueAtIndex, v367))
      {
        goto LABEL_15;
      }

LABEL_18:
      v23 = OUTLINED_FUNCTION_28_33();
      FigPlayerInterstitialEventGetResolvedStartTime(v23, v24);
      OUTLINED_FUNCTION_3_157();
      v33 = OUTLINED_FUNCTION_24_35(v25, v26, v27, v28, v29, v30, v31, v32, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v590, v607, v622, v637, *v652, *&v652[8], *&v652[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
      if (CMTimeCompare(v33, v34) < 0)
      {
        value = v732;
        timescale = v733;
        v54 = OUTLINED_FUNCTION_28_33();
        FigPlayerInterstitialEventGetResolvedStartTime(v54, v55);
        OUTLINED_FUNCTION_3_157();
        CMTimeSubtract(&start, &time1[0].start, &range.start);
        flags = v4;
        epoch = v5;
      }

      else
      {
        v35 = OUTLINED_FUNCTION_28_33();
        FigPlayerInterstitialEventGetFirstItemStartOffset(v35, v36);
        start = range.start;
        v37 = OUTLINED_FUNCTION_28_33();
        FigPlayerInterstitialEventGetResolvedStartTime(v37, v38);
        value = range.start.value;
        flags = range.start.flags;
        timescale = range.start.timescale;
        epoch = range.start.epoch;
        OUTLINED_FUNCTION_2_188();
        v49 = OUTLINED_FUNCTION_24_35(v41, v42, v43, v44, v45, v46, v47, v48, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v590, v607, v622, v637, *v652, *&v652[8], *&v652[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, *MEMORY[0x1E6960CC0], *(MEMORY[0x1E6960CC0] + 8), v504, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        if (!CMTimeCompare(v49, v50))
        {
          memset(&range, 0, 24);
          time1[0].start.value = value;
          OUTLINED_FUNCTION_1_190();
          CMTimeSubtract(v53, v51, v52);
          *&time1[0].start.value = *&range.start.value;
          time1[0].start.epoch = range.start.epoch;
          *&time2.start.value = kZeroStartTimeFudge;
          time2.start.epoch = 0;
          if (CMTimeCompare(&time1[0].start, &time2.start) <= 0)
          {
            value = *MEMORY[0x1E6960CC0];
            timescale = *(MEMORY[0x1E6960CC0] + 8);
            flags = HIDWORD(v407);
            epoch = v504;
          }
        }
      }

      v56 = (v4 & 0x1F) == 3 || (flags & 0x1F) == 3;
      if (!v56 || (memset(&range, 0, 24), time2.start.value = v732, time2.start.timescale = v733, time2.start.flags = v4, time2.start.epoch = v5, rhs[0].value = value, rhs[0].timescale = timescale, rhs[0].flags = flags, rhs[0].epoch = epoch, CMTimeSubtract(&time1[0].start, &time2.start, rhs), CMTimeAbsoluteValue(&range.start, &time1[0].start), CMTimeMake(&time1[0].start, 1, 1000000000), *&time2.start.value = *&range.start.value, time2.start.epoch = range.start.epoch, CMTimeCompare(&time2.start, &time1[0].start) >= 1))
      {
        OUTLINED_FUNCTION_2_188();
        v65 = OUTLINED_FUNCTION_24_35(v57, v58, v59, v60, v61, v62, v63, v64, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v590, v607, v622, v637, *v652, *&v652[8], *&v652[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, value, __SPAIR64__(flags, timescale), epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        if (CMTimeCompare(v65, v66))
        {
          v67 = OUTLINED_FUNCTION_49_17();
          FigPlayerInterstitialEventGetResolvedStartTime(v67, v68);
          goto LABEL_31;
        }
      }

      v152 = OUTLINED_FUNCTION_49_17();
      FigPlayerInterstitialEventGetResolvedDuration(v152, v153);
      if (*(CMBaseObjectGetDerivedStorage() + 200) && FigPlayerInterstitialEventGetTimelineOccupancy(ValueAtIndex) == 1)
      {
        memset(time1, 0, 24);
        ResolvedStartTime = FigPlayerInterstitialEventGetResolvedStartTime(ValueAtIndex, &time2);
        v162 = OUTLINED_FUNCTION_25_37(ResolvedStartTime, v155, v156, v157, v158, v159, v160, v161, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v590, v607, v622, v637, *v652, *&v652[8], *&v652[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        OUTLINED_FUNCTION_64_13(v162, v163, v164, v165, v166, v167, v168, v169, v397, v414, v431, v447, v462, theArrayf, v494, v511, v528, v545, v562, v579, v596, v612, v627, v643, v659, v674, v690, v706, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, *&time1[0].start.value);
        v179 = OUTLINED_FUNCTION_42_26(v170, v171, v172, v173, v174, v175, v176, v177, *MEMORY[0x1E6960CC0], v398, v415, *MEMORY[0x1E6960CC0], *(MEMORY[0x1E6960CC0] + 8), v463, theArrayg, v495, v512, v529, v546, v563, v580, v597, v613, v628, v644, v660, v675, v691, v707, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, v178, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale);
        if (v179)
        {
          v187 = OUTLINED_FUNCTION_18_47(v179, v180, v181, v182, v183, v184, v185, v186, v399, v416, v432, v448, v464, theArrayb, v496, v513, v530, v547, v564, v581, v598, v614, v629, v645, v661, v676, v692, v708, start.value, *&start.timescale, start.epoch, cf, *&rhs[0].value, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, *&time2.start.value, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, *&time1[0].start.value, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value, *&time1[1].start.timescale, time1[1].start.epoch, time1[1].duration.value);
          OUTLINED_FUNCTION_55_21(v187, v188, v189, v190, v191, v192, v193, v194, v400, v417, v433, v449, v465, theArrayh, v497, v514, v531, v548, v565, v582, v599, v615, v630, v646, v662, v677, v693, v709, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        }

        ResolvedEndTime = FigPlayerInterstitialEventGetResolvedEndTime(ValueAtIndex, &time2);
        v203 = OUTLINED_FUNCTION_25_37(ResolvedEndTime, v196, v197, v198, v199, v200, v201, v202, v399, v416, v432, v448, v464, theArrayb, v496, v513, v530, v547, v564, v581, v598, v614, v629, v645, v661, v676, v692, v708, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        OUTLINED_FUNCTION_64_13(v203, v204, v205, v206, v207, v208, v209, v210, v401, v418, v434, v450, v466, theArrayi, v498, v515, v532, v549, v566, v583, v600, v616, v631, v647, v663, v678, v694, v710, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, *&time1[0].start.value);
        v220 = OUTLINED_FUNCTION_42_26(v211, v212, v213, v214, v215, v216, v217, v218, v435, v402, v419, v435.n128_i64[0], v435.n128_i64[1], v467, theArrayj, v499, v516, v533, v550, v567, v584, v601, v617, v632, v648, v664, v679, v695, v711, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, v219, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale);
        if (v220)
        {
          v228 = OUTLINED_FUNCTION_18_47(v220, v221, v222, v223, v224, v225, v226, v227, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v602, v618, v633, v637, v665, v680, v696, v700, start.value, *&start.timescale, start.epoch, cf, *&rhs[0].value, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, *&time2.start.value, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, *&time1[0].start.value, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value, *&time1[1].start.timescale, time1[1].start.epoch, time1[1].duration.value);
          OUTLINED_FUNCTION_55_21(v228, v229, v230, v231, v232, v233, v234, v235, v403, v420, v436, v451, v468, theArrayk, v500, v517, v534, v551, v568, v585, v603, v619, v634, v649, v666, v681, v697, v712, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        }
      }

      if (FigPlayerInterstitialEventGetTimelineOccupancy(ValueAtIndex) == 1)
      {
        *v667 = *&v723.value;
        v236 = v723.epoch;
      }

      else
      {
        *v667 = *MEMORY[0x1E6960CC0];
        v236 = v504;
      }

      *&v667[16] = v236;
      v604 = start;
      v726 = v730;
      v727 = v731;
      v725 = v723;
      OUTLINED_FUNCTION_66_14();
      cf = 0;
      v237 = CMBaseObjectGetDerivedStorage();
      v4 = v237 + 96;
      v238 = *(v237 + 96);
      v239 = FigCFArrayGetValueAtIndex();
      v240 = v238(v239);
      v248 = *(v237 + 24);
      if (!v248)
      {
        goto LABEL_117;
      }

      v249 = v240;
      if (v240 && (InterstitialEvent = FigPlaybackItemSegmentGetInterstitialEvent(v240), VTable = CMBaseObjectGetVTable(), v252 = *(VTable + 16), v240 = VTable + 16, (v253 = *(v252 + 120)) != 0))
      {
        v240 = v253(v248, InterstitialEvent);
        v254 = v240;
      }

      else
      {
        v254 = 0;
      }

      OUTLINED_FUNCTION_46_18(v240, v241, v242, v243, v244, v245, v246, v247, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, *&v604.value);
      *&rhs[0].value = *&v725.value;
      OUTLINED_FUNCTION_22_39();
      CMTimeRangeMake(v255, &time2.start, rhs);
      rhs[0].value = v730;
      *&rhs[0].timescale = __PAIR64__(HIDWORD(v552), v731);
      rhs[0].epoch = v569;
      duration = *v667;
      v256 = CMTimeRangeMake(&time2, rhs, &duration);
      v264 = OUTLINED_FUNCTION_4_155(v256, v257, v258, v259, v260, v261, v262, v263, v404, v421, v437, v452, v469, theArrayl, v501, v518, v535, v552, v569, v586, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value);
      CMTimeMappingMake(v266, v264, v265);
      if (v254 == ValueAtIndex)
      {
        FigPlaybackItemSegmentGetTimeMapping(v249, time1);
        OUTLINED_FUNCTION_41_28(v267, v268, v269, v270, v271, v272, v273, v274, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        *&rhs[0].timescale = *&range.start.timescale;
        rhs[0].epoch = range.start.epoch;
        *&duration.value = *&time1[0].start.value;
        if (!OUTLINED_FUNCTION_14_67(time1[0].start.epoch, v405, v422, v438, v453, v470, theArraym, v502, v519, v536, v553, v570, v587, v605, v620, v635, v650, v668, v682, v698, v713, start.value, *&start.timescale, start.epoch, cf, range.start.value))
        {
          *&rhs[0].value = *&time2.duration.value;
          OUTLINED_FUNCTION_22_39();
          *&duration.value = *(v275 + 24);
          if (!OUTLINED_FUNCTION_14_67(*(v275 + 40), v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value))
          {
            *&rhs[0].value = *&v719.value;
            OUTLINED_FUNCTION_22_39();
            *&duration.value = *(v276 + 48);
            if (!OUTLINED_FUNCTION_14_67(*(v276 + 64), v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value))
            {
              *&rhs[0].value = *&v720.value;
              OUTLINED_FUNCTION_22_39();
              *&duration.value = *(v277 + 72);
              if (!OUTLINED_FUNCTION_14_67(*(v277 + 88), v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value))
              {
                v371 = FigCFArrayGetValueAtIndex();
                if (v371)
                {
                  v132 = CFRetain(v371);
                  goto LABEL_79;
                }

LABEL_117:
                v132 = 0;
                goto LABEL_79;
              }
            }
          }
        }
      }

      if (FigPlayerInterstitialEventGetTimelineOccupancy(ValueAtIndex) == 1)
      {
        v278 = FigPlayerInterstitialEventCopyLoadedTimeIntervals(ValueAtIndex);
        OUTLINED_FUNCTION_26_37(v278, v279, v280, v281, v282, v283, v284, v285, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        v286 = fiit_createLoadedTimeRangesForTimeMapping(v278, time1);
      }

      else
      {
        v286 = 0;
        v278 = 0;
      }

      time2.start.value = v726;
      OUTLINED_FUNCTION_39_24();
      v287 = *(v237 + 176);
      *&time1[0].start.value = *(v237 + 160);
      *&time1[0].start.epoch = v287;
      *&time1[0].duration.timescale = *(v237 + 192);
      v288 = fiit_MakeCFDateFromTime(&time2.start, time1);
      v289 = *(v237 + 24);
      v290 = CMBaseObjectGetVTable();
      v299 = *(v290 + 16);
      v298 = v290 + 16;
      v300 = *(v299 + 112);
      if (v300)
      {
        v298 = v300(v289, ValueAtIndex);
        v301 = v298;
      }

      else
      {
        v301 = 0;
      }

      OUTLINED_FUNCTION_26_37(v298, v291, v292, v293, v294, v295, v296, v297, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
      if (FigPlaybackItemSegmentCreate(1, &time1[0].start.value, v286, v288, v301, &cf))
      {
        v132 = 0;
        if (!v278)
        {
          goto LABEL_73;
        }

LABEL_72:
        CFRelease(v278);
        goto LABEL_73;
      }

      v132 = (*(v237 + 88))(cf);
      if (v278)
      {
        goto LABEL_72;
      }

LABEL_73:
      if (v286)
      {
        CFRelease(v286);
      }

      if (v288)
      {
        CFRelease(v288);
      }

      if (v301)
      {
        CFRelease(v301);
      }

LABEL_79:
      if (cf)
      {
        CFRelease(cf);
      }

      if (!v132)
      {
LABEL_130:
        v375 = theArray;
        if (!theArray)
        {
          return;
        }

        goto LABEL_131;
      }

      v302 = OUTLINED_FUNCTION_28_33();
      v304 = FigPlayerInterstitialEventGetResolvedEndTime(v302, v303);
      OUTLINED_FUNCTION_27_32(v304, v305, v306, v307, v308, v309, v310, v311, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v604.value, *&v604.timescale, v604.epoch, v637, *v667, *&v667[8], *&v667[16], v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
      if (FigPlayerInterstitialEventIsPostRoll(ValueAtIndex) && v6 == v461)
      {
        OUTLINED_FUNCTION_7_104();
        CMTimeRangeGetEnd(&time1[0].start, &range);
        v732 = time1[0].start.value;
        v4 = time1[0].start.flags;
        v733 = time1[0].start.timescale;
        v5 = time1[0].start.epoch;
      }

      if (++v6 < v527)
      {
        v312 = FigCFArrayGetValueAtIndex();
        FigPlayerInterstitialEventGetResolvedStartTime(v312, &range);
        timescale = range.start.timescale;
        value = range.start.value;
        time1[0].start.value = range.start.value;
        OUTLINED_FUNCTION_1_190();
        v316 = CMTimeSubtract(v315, v313, v314);
        v324 = OUTLINED_FUNCTION_24_35(v316, v317, v318, v319, v320, v321, v322, v323, v396, v413, v430, v446, v461, theArraya, v493, v510, v527, v544, v561, v578, v595, v611, v626, v642, v658, v673, v689, v705, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, kAbuttingEventThreshold, *(&kAbuttingEventThreshold + 1), 0, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        if (CMTimeCompare(v324, v325) <= 0)
        {
          time1[0].start.value = value;
          OUTLINED_FUNCTION_1_190();
          v144 = CMTimeMaximum(v366, v364, v365);
LABEL_44:
          OUTLINED_FUNCTION_27_32(v144, v145, v146, v147, v148, v149, v150, v151, v396, v413, v430, v446, v461, theArraya, v493, v510, v527, v544, v561, v578, v595, v611, v626, v642, v658, v673, v689, v705, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        }
      }

      v326 = FigCFArrayGetValueAtIndex();
      v327 = CMBaseObjectGetDerivedStorage();
      v328 = (*(v327 + 96))(v326);
      v329 = (*(v327 + 96))(v132);
      if (*(v327 + 296) == 1)
      {
        goto LABEL_98;
      }

      if (v328 && (v330 = v329) != 0 && (Type = FigPlaybackItemSegmentGetType(v328), Type == FigPlaybackItemSegmentGetType(v330)))
      {
        OUTLINED_FUNCTION_66_14();
        FigPlaybackItemSegmentGetTimeMapping(v328, &range);
        memset(time1, 0, sizeof(time1));
        FigPlaybackItemSegmentGetTimeMapping(v330, time1);
        OUTLINED_FUNCTION_41_28(v332, v333, v334, v335, v336, v337, v338, v339, v396, v413, v430, v446, v461, theArraya, v493, v510, v527, v544, v561, v578, v595, v611, v626, v642, v658, v673, v689, v705, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, time2.start.value, *&time2.start.timescale, time2.start.epoch, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value, *&time1[0].start.timescale, time1[0].start.epoch, time1[0].duration.value, *&time1[0].duration.timescale, time1[0].duration.epoch, time1[1].start.value);
        memcpy(rhs, time1, sizeof(rhs));
        duration = range.start;
        *&v723.value = *&time1[0].start.value;
        if (OUTLINED_FUNCTION_30_29(time1[0].start.epoch))
        {
          goto LABEL_95;
        }

        duration = time2.duration;
        *&v723.value = *&rhs[1].value;
        if (OUTLINED_FUNCTION_30_29(rhs[1].epoch))
        {
          goto LABEL_95;
        }

        duration = v719;
        *&v723.value = *&rhs[2].value;
        if (OUTLINED_FUNCTION_30_29(rhs[2].epoch))
        {
          goto LABEL_95;
        }

        duration = v720;
        *&v723.value = *&rhs[3].value;
        if (OUTLINED_FUNCTION_30_29(rhs[3].epoch))
        {
          goto LABEL_95;
        }

        if (FigPlaybackItemSegmentGetType(v328) == 1)
        {
          v368 = *(v327 + 24);
          v369 = FigPlaybackItemSegmentGetInterstitialEvent(v328);
          v370 = *(*(CMBaseObjectGetVTable() + 16) + 120);
          v430 = v370 ? v370(v368, v369) : 0;
          v372 = *(v327 + 24);
          v373 = FigPlaybackItemSegmentGetInterstitialEvent(v330);
          v374 = *(*(CMBaseObjectGetVTable() + 16) + 120);
          if (v374)
          {
            v374(v372, v373);
          }

          if (!FigCFEqual())
          {
LABEL_95:
            v340 = 1;
LABEL_96:
            *(v327 + 296) = v340;
            goto LABEL_98;
          }
        }

        if (!*(v327 + 296))
        {
          FigPlaybackItemSegmentGetLoadedTimeRanges(v328);
          FigPlaybackItemSegmentGetLoadedTimeRanges(v330);
          if (!FigCFEqual())
          {
            v340 = 3;
            goto LABEL_96;
          }
        }
      }

      else
      {
        *(v327 + 296) = 1;
      }

LABEL_98:
      OUTLINED_FUNCTION_21_40();
      v349 = OUTLINED_FUNCTION_4_155(v341, v342, v343, v344, v345, v346, v347, v348, v396, v413, v430, v446, v461, theArraya, v493, v510, v527, v544, v561, v578, v595, v611, v626, v642, v658, v673, v689, v705, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, v658, v673, v689, time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value);
      CMTimeAdd(v351, v349, v350);
      v730 = range.start.value;
      HIDWORD(v538) = range.start.flags;
      v731 = range.start.timescale;
      v555 = range.start.epoch;
      CFArrayAppendValue(theArray, v132);
      v572 = v588 + 1;
      CFRelease(v132);
      a1 = v487;
      v7 = MEMORY[0x1E6960C70];
    }

    else
    {
LABEL_15:
      ++v6;
    }
  }

  v376 = *(DerivedStorage + 56);
  v375 = theArray;
  *(DerivedStorage + 56) = theArray;
  if (theArray)
  {
    CFRetain(theArray);
  }

  if (v376)
  {
    CFRelease(v376);
  }

  if (*(DerivedStorage + 200))
  {
    v389 = MEMORY[0x1E6960C68];
    *(DerivedStorage + 208) = *MEMORY[0x1E6960C68];
    v388 = *(v389 + 16);
  }

  else
  {
    OUTLINED_FUNCTION_21_40();
    v385 = OUTLINED_FUNCTION_4_155(v377, v378, v379, v380, v381, v382, v383, v384, v390, v407, v424, v440, v455, theArray, v487, v504, Count, v538, v555, v572, v590, v607, v622, v637, v653, v670, v684, v700, start.value, *&start.timescale, start.epoch, cf, rhs[0].value, *&rhs[0].timescale, rhs[0].epoch, rhs[1].value, *&rhs[1].timescale, rhs[1].epoch, rhs[2].value, *&rhs[2].timescale, rhs[2].epoch, rhs[3].value, *&rhs[3].timescale, rhs[3].epoch, *(DerivedStorage + 104), *(DerivedStorage + 112), *(DerivedStorage + 120), time2.duration.value, *&time2.duration.timescale, time2.duration.epoch, v719.value, *&v719.timescale, v719.epoch, v720.value, *&v720.timescale, v720.epoch, time1[0].start.value);
    CMTimeSubtract(v387, v385, v386);
    *(DerivedStorage + 208) = *&range.start.value;
    v388 = range.start.epoch;
  }

  *(DerivedStorage + 224) = v388;
  fiit_updateCurrentSegmentWrapper(a1, 1);
  if (v375)
  {
LABEL_131:
    CFRelease(v375);
  }
}

uint64_t fiit_unlockAndPostSnapshotOutOfSyncNotification(const void *a1)
{
  v40 = *MEMORY[0x1E69E9840];
  if (*(CMBaseObjectGetDerivedStorage() + 296))
  {
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    if (!*(DerivedStorage + 202))
    {
      v3 = DerivedStorage;
      v4 = *(DerivedStorage + 296);
      v5 = *MEMORY[0x1E695E480];
      Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      if (!Mutable)
      {
        FigSignalErrorAtGM();
        return FigSimpleMutexUnlock();
      }

      v7 = Mutable;
      FigCFDictionarySetInt32();
      if (v4 == 3)
      {
        goto LABEL_5;
      }

      v9 = fiit_CopyDebugDescription(a1);
      if (dword_1EAF17A98)
      {
        os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
        os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
        OUTLINED_FUNCTION_7();
        fig_log_call_emit_and_clean_up_after_send_and_compose();
      }

      if (v9)
      {
        CFRelease(v9);
      }

      v11 = CMBaseObjectGetDerivedStorage();
      v12 = CFArrayCreateMutable(v5, 0, MEMORY[0x1E695E9C0]);
      if (v12)
      {
        v13 = v12;
        for (i = 0; ; ++i)
        {
          Count = *(v11 + 56);
          if (Count)
          {
            Count = CFArrayGetCount(Count);
          }

          if (i >= Count)
          {
            break;
          }

          ValueAtIndex = CFArrayGetValueAtIndex(*(v11 + 56), i);
          v17 = (*(v11 + 96))(ValueAtIndex);
          if (!FigPlaybackItemSegmentGetType(v17))
          {
            OUTLINED_FUNCTION_40_25();
            FigPlaybackItemSegmentGetTimeMapping(v17, v18);
            memcpy(&__dst, __src, sizeof(__dst));
            v19 = CMTimeMappingCopyAsDictionary(&__dst, v5);
            CFArrayAppendValue(v13, v19);
            if (v19)
            {
              CFRelease(v19);
            }
          }
        }

        FigBaseObject = FigPlaybackItemGetFigBaseObject(*(v11 + 8));
        v21 = *(*(CMBaseObjectGetVTable() + 8) + 56);
        if (v21)
        {
          v21(FigBaseObject, @"IntegratedTimelineTimeOffsets", v13);
        }

        CFRelease(v13);
      }

      else
      {
        OUTLINED_FUNCTION_5_8();
        FigSignalErrorAtGM();
      }

      v22 = CMBaseObjectGetDerivedStorage();
      v23 = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      v24 = v23;
      if (*(v22 + 24))
      {
        v37 = v23;
        if (!v23)
        {
          OUTLINED_FUNCTION_5_8();
          FigSignalErrorAtGM();
LABEL_40:
          FigCFDictionarySetBoolean();
LABEL_5:
          fiit_postNotification(v3, @"fiitSnapshotsOutOfSync", a1, v7);
          *(v3 + 296) = 0;
          *(v3 + 204) = 0;
          CFRelease(v7);
          return FigSimpleMutexUnlock();
        }

        for (j = 0; ; ++j)
        {
          v26 = *(v22 + 56);
          if (v26)
          {
            v26 = CFArrayGetCount(v26);
          }

          if (j >= v26)
          {
            break;
          }

          v27 = CFArrayGetValueAtIndex(*(v22 + 56), j);
          v28 = (*(v22 + 96))(v27);
          if (FigPlaybackItemSegmentGetType(v28) == 1)
          {
            InterstitialEvent = FigPlaybackItemSegmentGetInterstitialEvent(v28);
            v30 = *(v22 + 24);
            v31 = *(*(CMBaseObjectGetVTable() + 16) + 120);
            v32 = v31 ? v31(v30, InterstitialEvent) : 0;
            v33 = FigPlayerInterstitialEventCopyIdentifier(v32);
            OUTLINED_FUNCTION_40_25();
            FigPlaybackItemSegmentGetTimeMapping(v28, v34);
            if (v33)
            {
              *&__dst.source.start.value = __src[3];
              __dst.source.start.epoch = *&__src[4];
              FigCFDictionarySetCMTime();
              CFRelease(v33);
            }
          }
        }

        v35 = *(v22 + 24);
        v36 = *(*(CMBaseObjectGetVTable() + 8) + 56);
        v24 = v37;
        if (v36)
        {
          v36(v35, @"fpicProperty_InterstitialEventIntegratedStartTimes", v37);
        }
      }

      if (v24)
      {
        CFRelease(v24);
      }

      goto LABEL_40;
    }
  }

  return FigSimpleMutexUnlock();
}

CFMutableStringRef fiit_CopyDebugDescription(uint64_t a1)
{
  cf = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v33, 0, sizeof(v33));
  fiit_currentTime(a1, &cf, &v33);
  Mutable = CFStringCreateMutable(*MEMORY[0x1E695E480], 0);
  if (Mutable)
  {
    v27 = a1;
    v4 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v4, v5, v6);
    for (i = 0; ; ++i)
    {
      Count = *(DerivedStorage + 56);
      if (Count)
      {
        Count = CFArrayGetCount(Count);
      }

      if (i >= Count)
      {
        break;
      }

      ValueAtIndex = CFArrayGetValueAtIndex(*(DerivedStorage + 56), i);
      v18 = (*(DerivedStorage + 96))(ValueAtIndex, v17);
      if (ValueAtIndex == *(DerivedStorage + 48))
      {
        v19 = @"*";
      }

      else
      {
        v19 = &stru_1F0B1AFB8;
      }

      v27 = v19;
      v29 = v18;
      v20 = OUTLINED_FUNCTION_312();
      CFStringAppendFormat(v20, v21, @"%@%@\n");
    }

    OUTLINED_FUNCTION_62_17(Count, v7, v8, v9, v10, v11, v12, v13, v27, v29, time.value, *&time.timescale, time.epoch, v32, *&v33.value);
    Seconds = CMTimeGetSeconds(&time);
    v30 = cf;
    v28 = Seconds;
    v23 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v23, v24, v25, *&v28, v30);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  return Mutable;
}

uint64_t fiit_SetProperty(const void *a1, uint64_t a2, const void *a3)
{
  CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (FigCFEqual() && a3 && (v5 = CFGetTypeID(a3), FigPlayerInterstitialCoordinatorGetClassID(), v5 == CMBaseClassGetCFTypeID()))
  {
    fiit_setCoordinator(a1, a3);
    v6 = 0;
  }

  else
  {
    v6 = FigSignalErrorAtGM();
  }

  fiit_unlockAndPostSnapshotOutOfSyncNotification(a1);
  return v6;
}

uint64_t fiit_primaryItemSeekableTimeRangeChange()
{
  v1 = OUTLINED_FUNCTION_645();
  FigSimpleMutexLock();
  Value = FigCFDictionaryGetValue();
  if (!*(v1 + 201))
  {
    fiit_checkAndUpdateIfPrimaryIsReadyForInspection(v0);
  }

  if (fiit_updatePrimaryItemSeekableTimeRange(v0, Value))
  {
    fiit_updatePrimaryItemStartMoment();
    fiit_updatePrimarySeekableTimeRangeForCurrentEvent(v0);
    fiit_rebuildSegmentList(v0);
  }

  return fiit_unlockAndPostSnapshotOutOfSyncNotification(v0);
}

uint64_t fiit_primaryItemPlayableRangeChange()
{
  OUTLINED_FUNCTION_645();
  FigSimpleMutexLock();
  Value = FigCFDictionaryGetValue();
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!FigCFEqual())
  {
    v3 = *(DerivedStorage + 152);
    *(DerivedStorage + 152) = Value;
    if (Value)
    {
      CFRetain(Value);
    }

    if (v3)
    {
      CFRelease(v3);
    }

    fiit_rebuildSegmentList(v0);
  }

  return fiit_unlockAndPostSnapshotOutOfSyncNotification(v0);
}

uint64_t fiit_receiverInitiatedSeek(uint64_t a1, const void *a2, uint64_t a3, uint64_t a4, const __CFDictionary *a5)
{
  v45 = *MEMORY[0x1E69E9840];
  CMBaseObjectGetDerivedStorage();
  v35 = 0;
  v34 = **&MEMORY[0x1E6960C70];
  v33 = **&MEMORY[0x1E6960CC0];
  v32 = v33;
  FigCFDictionaryGetInt32IfPresent();
  Value = CFDictionaryGetValue(a5, @"SeekTime");
  CMTimeMakeFromDictionary(&v34, Value);
  v9 = CFDictionaryGetValue(a5, @"ToleranceBefore");
  CMTimeMakeFromDictionary(&v33, v9);
  v10 = CFDictionaryGetValue(a5, @"ToleranceAfter");
  CMTimeMakeFromDictionary(&v32, v10);
  if (dword_1EAF17A98)
  {
    LODWORD(v30[0]) = 0;
    HIBYTE(v31) = 0;
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_40();
    if (v5)
    {
      v12 = v35;
      *&v44.value = *&v34.value;
      OUTLINED_FUNCTION_51_23();
      Seconds = CMTimeGetSeconds(v13);
      *&v44.value = *&v33.value;
      OUTLINED_FUNCTION_51_23();
      v16 = CMTimeGetSeconds(v15);
      *&v44.value = *&v32.value;
      OUTLINED_FUNCTION_51_23();
      v18 = CMTimeGetSeconds(v17);
      LODWORD(v36.value) = 136316418;
      *(&v36.value + 4) = "fiit_receiverInitiatedSeek";
      LOWORD(v36.flags) = 2048;
      *(&v36.flags + 2) = a2;
      HIWORD(v36.epoch) = 1024;
      v37 = v12;
      v38 = 2048;
      v39 = Seconds;
      v40 = 2048;
      v41 = v16;
      v42 = 2048;
      v43 = v18;
      LODWORD(v29) = 58;
      v28 = &v36;
      OUTLINED_FUNCTION_18_3();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_414();
  }

  v19 = FigSimpleMutexLock();
  v44 = v34;
  v36 = v33;
  OUTLINED_FUNCTION_62_17(v19, v35, v20, v21, v22, v23, v24, v25, v28, v29, v30[0], v30[1], v30[2], v31, *&v32.value);
  fiit_SeekToTimeWithOptions(a2, v26, &v44.value, &v36.value, v30, 0);
  return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
}

void fiit_updatePrimarySeekableTimeRangeForCurrentEvent(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 200))
  {
    v3 = DerivedStorage;
    if (*(DerivedStorage + 40))
    {
      for (i = 0; ; ++i)
      {
        Count = *(v3 + 32);
        if (Count)
        {
          Count = CFArrayGetCount(Count);
        }

        if (i >= Count)
        {
          break;
        }

        ValueAtIndex = FigCFArrayGetValueAtIndex();
        v7 = FigPlayerInterstitialEventCopyIdentifier(ValueAtIndex);
        if (FigCFEqual() && !fiit_isEventResolvedTimeInSeekableTimeRange(a1, ValueAtIndex, 0))
        {
          FigPlayerInterstitialEventGetResolvedStartTime(ValueAtIndex, &end);
          start = *(v3 + 104);
          v8 = CMTimeRangeFromTimeToTime(&v29, &start, &end);
          OUTLINED_FUNCTION_36_27(v8, v9, v10, v11, v12, v13, v14, v15, *&v29.start.value, *&v29.start.epoch, *&v29.duration.timescale);
          if (v7)
          {
            CFRelease(v7);
          }

          return;
        }

        if (v7)
        {
          CFRelease(v7);
        }
      }
    }

    else
    {
      end = **&MEMORY[0x1E6960C68];
      v16 = *(DerivedStorage + 8);
      v17 = *(*(CMBaseObjectGetVTable() + 16) + 32);
      if (v17)
      {
        v17(v16, &end);
      }

      start = end;
      *&rhs.value = kSameSegmentRangeFudge;
      rhs.epoch = 0;
      CMTimeAdd(&v29.start, &start, &rhs);
      epoch = v29.start.epoch;
      end = v29.start;
      v19 = *&v29.start.value;
      v20 = *(v3 + 120);
      *&v29.start.value = *(v3 + 104);
      *&v29.start.epoch = v20;
      *&v29.duration.timescale = *(v3 + 136);
      *&start.value = v19;
      start.epoch = epoch;
      if (!CMTimeRangeContainsTime(&v29, &start))
      {
        start = *(v3 + 104);
        rhs = end;
        v21 = CMTimeRangeFromTimeToTime(&v29, &start, &rhs);
        OUTLINED_FUNCTION_36_27(v21, v22, v23, v24, v25, v26, v27, v28, *&v29.start.value, *&v29.start.epoch, *&v29.duration.timescale);
      }
    }
  }
}

BOOL fiit_isEventResolvedTimeInSeekableTimeRange(uint64_t a1, uint64_t a2, int a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&start, 0, sizeof(start));
  v6 = *(DerivedStorage + 120);
  *&range.start.value = *(DerivedStorage + 104);
  *&range.start.epoch = v6;
  *&range.duration.timescale = *(DerivedStorage + 136);
  CMTimeRangeGetEnd(&start, &range);
  v40 = *MEMORY[0x1E6960C70];
  v41 = *(MEMORY[0x1E6960C70] + 16);
  v37 = v40;
  v38 = v41;
  if (!a2)
  {
    return 0;
  }

  FigPlayerInterstitialEventGetResolvedStartTime(a2, &v40);
  ResolvedEndTime = FigPlayerInterstitialEventGetResolvedEndTime(a2, &v37);
  if (a3)
  {
    lhs = start;
    *&v33.value = kSeekableTimeRangeEndSlop;
    v33.epoch = 0;
    ResolvedEndTime = CMTimeAdd(&range.start, &lhs, &v33);
    v15 = *&range.start.value;
    start = range.start;
  }

  OUTLINED_FUNCTION_45_20(ResolvedEndTime, v8, v9, v10, v11, v12, v13, v14, v33.value, *&v33.timescale, v33.epoch, v34, lhs.value, *&lhs.timescale, lhs.epoch, v36, v37, *(&v37 + 1), v38, v39, v15, v40);
  *&lhs.value = *(DerivedStorage + 104);
  v16 = OUTLINED_FUNCTION_34_29();
  v18 = CMTimeCompare(v16, v17);
  if ((v18 & 0x80000000) == 0)
  {
    OUTLINED_FUNCTION_45_20(v18, v19, v20, v21, v22, v23, v24, v25, v33.value, *&v33.timescale, v33.epoch, v34, lhs.value, *&lhs.timescale, lhs.epoch, v36, v37, *(&v37 + 1), v38, v39, v26, v40);
    *&lhs.value = *&start.value;
    v27 = OUTLINED_FUNCTION_34_29();
    if (CMTimeCompare(v27, v28) < 1)
    {
      return 1;
    }
  }

  v29 = *(DerivedStorage + 120);
  *&range.start.value = *(DerivedStorage + 104);
  *&range.start.epoch = v29;
  *&range.duration.timescale = *(DerivedStorage + 136);
  *&lhs.value = v37;
  v30 = OUTLINED_FUNCTION_34_29();
  return CMTimeRangeContainsTime(v30, v31) != 0;
}

void fiit_checkAndPostIfSeekCompletedAllSteps(uint64_t a1, int a2, uint64_t a3, __int16 a4, char a5, os_log_type_t type, int a7, int a8, uint64_t a9, __int16 a10, uint64_t a11, __int16 a12, char a13, os_log_type_t typea, unsigned int a15, __int16 a16, uint64_t a17, uint64_t a18, CMTime *time, uint64_t a20, uint64_t a21, __int128 timea, uint64_t time_16, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50)
{
  OUTLINED_FUNCTION_458();
  a49 = v50;
  a50 = v51;
  v53 = v52;
  a38 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v55 = *(DerivedStorage + 236);
  if (!v55)
  {
    goto LABEL_26;
  }

  v56 = FPSupport_SeekIDGetSource(v55);
  v57 = *(DerivedStorage + 232);
  if (v57 != 3)
  {
    if (v57 != 2)
    {
      goto LABEL_26;
    }

    v58 = 0;
    goto LABEL_12;
  }

  v59 = (*(DerivedStorage + 96))(*(DerivedStorage + 240));
  if (FigPlaybackItemSegmentGetType(v59) == 1)
  {
    InterstitialEvent = FigPlaybackItemSegmentGetInterstitialEvent(v59);
    v61 = *(DerivedStorage + 24);
    v62 = *(*(CMBaseObjectGetVTable() + 16) + 120);
    if (v62)
    {
      v63 = v62(v61, InterstitialEvent);
    }

    else
    {
      v63 = 0;
    }

    v58 = FigPlayerInterstitialEventCopyIdentifier(v63);
  }

  else
  {
    v58 = 0;
  }

  if (FigCFEqual())
  {
LABEL_12:
    if (v56 == 4)
    {
      fiit_postIntegratedTimelineSeekDidFinishNotification(v53, *(DerivedStorage + 236), *(DerivedStorage + 232) == 3);
    }

    else if (v56 == 5 && dword_1EAF17A98 != 0)
    {
      OUTLINED_FUNCTION_147();
      v65 = OUTLINED_FUNCTION_126();
      if (os_log_type_enabled(v65, typea))
      {
        v66 = a15;
      }

      else
      {
        v66 = a15 & 0xFFFFFFFE;
      }

      if (v66)
      {
        timea = *(DerivedStorage + 328);
        time_16 = *(DerivedStorage + 344);
        CMTimeGetSeconds(&timea);
        OUTLINED_FUNCTION_108();
        _os_log_send_and_compose_impl();
      }

      OUTLINED_FUNCTION_7();
      fig_log_call_emit_and_clean_up_after_send_and_compose();
    }

    if (fiit_isTrackingScan())
    {
      fiit_clearPendingSeekState();
      OUTLINED_FUNCTION_74_13();
      fiit_rescheduleScanningBoundaryTimer(v53);
      if (!v58)
      {
        goto LABEL_26;
      }

      goto LABEL_25;
    }
  }

  if (v58)
  {
LABEL_25:
    CFRelease(v58);
  }

LABEL_26:
  OUTLINED_FUNCTION_457();
}

void fiit_updateCurrentSegmentWrapper(uint64_t a1, int a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = *(DerivedStorage + 40);
  if (v5)
  {
    v6 = CFRetain(v5);
  }

  else
  {
    v6 = 0;
  }

  v7 = (*(DerivedStorage + 96))(*(DerivedStorage + 48));
  v8 = v7;
  if (*(DerivedStorage + 236) && v7)
  {
    if (!FigPlaybackItemSegmentGetType(v7))
    {
      if (v6)
      {
        CFRelease(v6);
      }

      a2 = 1;
LABEL_31:
      start = **&MEMORY[0x1E6960C68];
      v25 = *(DerivedStorage + 8);
      v26 = *(*(CMBaseObjectGetVTable() + 16) + 32);
      if (v26)
      {
        v26(v25, &start);
      }

      if (!v8 || !a2)
      {
        goto LABEL_43;
      }

      FigPlaybackItemSegmentGetTimeMapping(v8, &v118);
      v131 = v118;
      time = start;
      range = v118;
      CMTimeClampToRange(&time2, &time, &range);
      start = time2;
      range.start = time2;
      time2 = v131.start;
      v27 = CMTimeCompare(&range.start, &time2);
      if (v27)
      {
        OUTLINED_FUNCTION_15_11();
        CMTimeRangeGetEnd(&time2, &range);
        *&range.start.value = *&start.value;
        OUTLINED_FUNCTION_51_23();
        v37 = CMTimeCompare(v36, &time2);
        if (v37)
        {
          goto LABEL_43;
        }

        OUTLINED_FUNCTION_53_19(v37, v38, v39, v40, v41, v42, v43, v44, v101, v103, v105, v109, v112, v115, v118.start.value, *&v118.start.timescale, v118.start.epoch, v118.duration.value, *&v118.duration.timescale, v118.duration.epoch, v119, v120, v121, v122, v123, v124, v45, start.value);
        v46 = OUTLINED_FUNCTION_38_24(kSameSegmentRangeFudge);
        CMTimeSubtract(v48, v46, v47);
      }

      else
      {
        OUTLINED_FUNCTION_53_19(v27, v28, v29, v30, v31, v32, v33, v34, v101, v103, v105, v109, v112, v115, v118.start.value, *&v118.start.timescale, v118.start.epoch, v118.duration.value, *&v118.duration.timescale, v118.duration.epoch, v119, v120, v121, v122, v123, v124, v35, start.value);
        v49 = OUTLINED_FUNCTION_38_24(kSameSegmentRangeFudge);
        CMTimeAdd(v51, v49, v50);
      }

      start = range.start;
LABEL_43:
      v106 = start;
      time2 = **&MEMORY[0x1E6960C70];
      v52 = CMBaseObjectGetDerivedStorage();
      v17 = 0;
      v53 = 0;
      v54 = MEMORY[0x1E6960CC0];
      while (1)
      {
        Count = *(v52 + 56);
        if (Count)
        {
          Count = CFArrayGetCount(Count);
        }

        if (v53 >= Count)
        {
          break;
        }

        ValueAtIndex = CFArrayGetValueAtIndex(*(v52 + 56), v53);
        v57 = (*(v52 + 96))();
        if (!FigPlaybackItemSegmentGetType(v57))
        {
          v133 = 0u;
          v134 = 0u;
          v132 = 0u;
          memset(&v131, 0, sizeof(v131));
          FigPlaybackItemSegmentGetTimeMapping(v57, &v131);
          memset(&time, 0, sizeof(time));
          OUTLINED_FUNCTION_15_11();
          v66 = OUTLINED_FUNCTION_50_17(v58, v59, v60, v61, v62, v63, v64, v65, v101, v103, v106.value, *&v106.timescale, v106.epoch, v115, v118.start.value, *&v118.start.timescale, v118.start.epoch, v118.duration.value, *&v118.duration.timescale, v118.duration.epoch, v119, v120, v121, v122, v123, v124, start.value, *&start.timescale, start.epoch, v126, v106.value, *&v106.timescale, v106.epoch, v128, range.start.value);
          fiit_distanceFromRange(v66, v67, v68);
          OUTLINED_FUNCTION_52_20();
          v77 = OUTLINED_FUNCTION_50_17(v69, v70, v71, v72, v73, v74, v75, v76, v102, v104, v107, v110, v113, v116, v118.start.value, *&v118.start.timescale, v118.start.epoch, v118.duration.value, *&v118.duration.timescale, v118.duration.epoch, v119, v120, v121, v122, v123, v124, start.value, *&start.timescale, start.epoch, v126, time2.value, *&time2.timescale, time2.epoch, v128, range.start.value);
          if (CMTimeCompare(v77, v78) <= 0)
          {
            time2 = time;
            v17 = ValueAtIndex;
          }

          OUTLINED_FUNCTION_52_20();
          v127 = *v54;
          v79 = *(v54 + 2);
          v88 = OUTLINED_FUNCTION_50_17(v80, v81, v82, v83, v84, v85, v86, v87, v127, *(&v127 + 1), v108, v111, v114, v117, v118.start.value, *&v118.start.timescale, v118.start.epoch, v118.duration.value, *&v118.duration.timescale, v118.duration.epoch, v119, v120, v121, v122, v123, v124, start.value, *&start.timescale, start.epoch, v126, v127, *(&v127 + 1), v79, v128, range.start.value);
          v90 = CMTimeCompare(v88, v89);
          if (v90)
          {
            *&range.start.timescale = *&time2.timescale;
            range.start.epoch = time2.epoch;
            v98 = OUTLINED_FUNCTION_50_17(v90, v91, v92, v93, v94, v95, v96, v97, v101, v103, v106.value, *&v106.timescale, v106.epoch, v115, v118.start.value, *&v118.start.timescale, v118.start.epoch, v118.duration.value, *&v118.duration.timescale, v118.duration.epoch, v119, v120, v121, v122, v123, v124, start.value, *&start.timescale, start.epoch, v126, v101, v103, v79, v128, time2.value);
            if (!CMTimeCompare(v98, v99))
            {
              break;
            }
          }
        }

        ++v53;
      }

      v6 = 0;
      v24 = 1;
      goto LABEL_54;
    }

    InterstitialEvent = FigPlaybackItemSegmentGetInterstitialEvent(v8);
    v10 = *(DerivedStorage + 24);
    v11 = *(*(CMBaseObjectGetVTable() + 16) + 120);
    if (v11)
    {
      v12 = v11(v10, InterstitialEvent);
      if (!v6)
      {
        goto LABEL_12;
      }
    }

    else
    {
      v12 = 0;
      if (!v6)
      {
LABEL_12:
        v6 = FigPlayerInterstitialEventCopyIdentifier(v12);
        a2 = 1;
        goto LABEL_13;
      }
    }

    CFRelease(v6);
    goto LABEL_12;
  }

LABEL_13:
  if (!v6)
  {
    goto LABEL_31;
  }

  v13 = CMBaseObjectGetDerivedStorage();
  if (*(v13 + 24))
  {
    v14 = v13;
    for (i = 0; ; ++i)
    {
      v16 = *(v14 + 56);
      if (v16)
      {
        v16 = CFArrayGetCount(v16);
      }

      if (i >= v16)
      {
        break;
      }

      v17 = CFArrayGetValueAtIndex(*(v14 + 56), i);
      v18 = (*(v14 + 96))();
      if (FigPlaybackItemSegmentGetType(v18) == 1)
      {
        v19 = FigPlaybackItemSegmentGetInterstitialEvent(v18);
        v20 = *(v14 + 24);
        v21 = *(*(CMBaseObjectGetVTable() + 16) + 120);
        if (v21)
        {
          v22 = v21(v20, v19);
        }

        else
        {
          v22 = 0;
        }

        v23 = FigPlayerInterstitialEventCopyIdentifier(v22);
        if (FigCFEqual())
        {
          if (v23)
          {
            CFRelease(v23);
          }

          v24 = 0;
          goto LABEL_54;
        }

        if (v23)
        {
          CFRelease(v23);
        }
      }
    }
  }

  v24 = 0;
  v17 = 0;
LABEL_54:
  if (fiit_AreSegmentWrappersDifferent(a1, *(DerivedStorage + 48), v17))
  {
    if (*(DerivedStorage + 296) != 1)
    {
      *(DerivedStorage + 296) = 2;
    }

    *(DerivedStorage + 204) = 1;
  }

  v100 = *(DerivedStorage + 48);
  *(DerivedStorage + 48) = v17;
  if (v17)
  {
    CFRetain(v17);
  }

  if (v100)
  {
    CFRelease(v100);
  }

  if ((v24 & 1) == 0)
  {
    CFRelease(v6);
  }
}

uint64_t fiit_rescheduleScanningBoundaryTimer(const void *a1)
{
  v166 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = fiit_isTrackingScan();
  if (!result)
  {
    return result;
  }

  v6 = OUTLINED_FUNCTION_312();
  fiit_currentTime(v6, v7, v8);
  v9 = CMBaseObjectGetDerivedStorage();
  v10 = OUTLINED_FUNCTION_61_17(v9);
  v11(v10);
  OUTLINED_FUNCTION_65_15();
  FigPlaybackItemSegmentGetTimeMapping(v12, &fireTime);
  time1 = v164.start;
  memset(&time2, 0, sizeof(time2));
  range = v164;
  CMTimeRangeGetEnd(&time2, &range);
  v149 = **&MEMORY[0x1E6960C70];
  epoch = v149.epoch;
  v134 = *&v149.value;
  range.start = v149;
  if (fiit_isTrackingScan())
  {
    v14 = fabsf(*(v1 + 356));
    *&time.value = kScanningSeekFromBoundaryTolerance;
    time.epoch = 0;
    CMTimeMultiply(&range.start, &time, v14);
    if (*(v1 + 356) <= 0.0)
    {
      time = time1;
      OUTLINED_FUNCTION_5_134();
      v26 = CMTimeAdd(&v149, &time, &rhs);
      OUTLINED_FUNCTION_16_55(v26, v27, v28, v29, v30, v31, v32, v33, v128, v131, v134, *(&v134 + 1), v139, *v142);
      CMTimeMinimum(v36, v34, v35);
    }

    else
    {
      time = time2;
      OUTLINED_FUNCTION_5_134();
      v15 = CMTimeSubtract(&v149, &time, &rhs);
      OUTLINED_FUNCTION_16_55(v15, v16, v17, v18, v19, v20, v21, v22, v128, v131, v134, *(&v134 + 1), v139, *v142);
      CMTimeMaximum(v25, v23, v24);
    }

    v149 = time;
    rhs = *v142;
    v37 = CMTimeCompare(&time, &rhs) != 0;
  }

  else
  {
    v37 = 1;
  }

  time = v149;
  v38 = CMBaseObjectGetDerivedStorage();
  *&rhs.value = v134;
  rhs.epoch = epoch;
  OUTLINED_FUNCTION_65_15();
  if (fiit_isTrackingScan())
  {
    v39 = *(v38 + 56);
    if (v39)
    {
      if (CFArrayGetCount(v39) >= 1)
      {
        v40 = 0;
        p_fireTime = 0;
        v41 = -1;
        while (1)
        {
          Count = *(v38 + 56);
          if (Count)
          {
            Count = CFArrayGetCount(Count);
          }

          if (v40 >= Count)
          {
            break;
          }

          ValueAtIndex = CFArrayGetValueAtIndex(*(v38 + 56), v40);
          if (ValueAtIndex == *(v38 + 48))
          {
            while (1)
            {
              v46 = *(v38 + 56);
              if (!v46 || v40 + 1 >= CFArrayGetCount(v46))
              {
                goto LABEL_21;
              }

              v45 = CFArrayGetValueAtIndex(*(v38 + 56), ++v40);
              if (!fiit_isSegmentPointInterstitial(a1, v45))
              {
                goto LABEL_22;
              }
            }
          }

          v44 = ValueAtIndex;
          if (!fiit_isSegmentPointInterstitial(a1, ValueAtIndex))
          {
            v41 = v40;
            p_fireTime = v44;
          }

          ++v40;
        }

LABEL_21:
        v45 = 0;
        v40 = -1;
LABEL_22:
        if (*(v38 + 356) <= 0.0)
        {
          if (p_fireTime)
          {
            v50 = (*(v38 + 96))(p_fireTime);
            FigPlaybackItemSegmentGetTimeMapping(v50, &fireTime);
            range = v164;
            CMTimeRangeGetEnd(&rhs, &range);
            *&range.start.value = kScanningSeekToBoundaryTolerance;
            range.start.epoch = 0;
            v51 = CMTimeMultiply(&time1, &range.start, 2);
            OUTLINED_FUNCTION_23_46(v51, v52, v53, v54, v55, v56, v57, v58, v128, v131, v134, *(&v134 + 1), v139, *v142, *&v142[8], *&v142[16], v149.value, *&v149.timescale, v149.epoch, v150, v151, v152, v153, v154, v59);
            CMTimeSubtract(v62, v60, v61);
            OUTLINED_FUNCTION_5_134();
            if (!v41)
            {
              time1 = rhs;
              time2 = v164.start;
              CMTimeMaximum(&range.start, &time1, &time2);
LABEL_32:
              OUTLINED_FUNCTION_5_134();
            }
          }
        }

        else if (v45)
        {
          v47 = (*(v38 + 96))(v45);
          p_fireTime = &fireTime;
          FigPlaybackItemSegmentGetTimeMapping(v47, &fireTime);
          rhs = v164.start;
          *&range.start.value = *&v164.start.value;
          range.start.epoch = v164.start.epoch;
          *&time1.value = kScanningSeekToBoundaryTolerance;
          time1.epoch = 0;
          CMTimeAdd(&rhs, &range.start, &time1);
          v48 = *(v38 + 56);
          v49 = v48 ? CFArrayGetCount(v48) - 1 : -1;
          if (v40 == v49)
          {
            range = v164;
            End = CMTimeRangeGetEnd(&time1, &range);
            OUTLINED_FUNCTION_23_46(End, v64, v65, v66, v67, v68, v69, v70, v128, v131, v134, *(&v134 + 1), v139, *v142, *&v142[8], *&v142[16], v149.value, *&v149.timescale, v149.epoch, v150, v151, v152, v153, v154, v71);
            CMTimeMinimum(v74, v72, v73);
            goto LABEL_32;
          }
        }
      }
    }
  }

  *(DerivedStorage + 328) = rhs;
  if ((*(DerivedStorage + 340) & 1) == 0)
  {
    return 0;
  }

  if (v37)
  {
    v75 = *(DerivedStorage + 304);
    v76 = OUTLINED_FUNCTION_312();
    fiit_currentTime(v76, v77, v78);
    result = CMTimebaseSetTime(v75, &fireTime);
    if (!result)
    {
      if (dword_1EAF17A98)
      {
        LODWORD(time1.value) = 0;
        LOBYTE(time2.value) = 0;
        os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
        os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, time2.value);
        OUTLINED_FUNCTION_40();
        if (p_fireTime)
        {
          OUTLINED_FUNCTION_20_38(v87, v88, v89, v90, v91, v92, v93, v94, v128, v131, v134, *(&v134 + 1), v139, *v142, *&v142[8], *&v142[16], v149.value, *&v149.timescale, v149.epoch, v150, v151, v152, v153, v154, rhs.value, *&rhs.timescale, rhs.epoch, v156, v95);
          CMTimeGetSeconds(&fireTime);
          v104 = OUTLINED_FUNCTION_35_25(v96, v97, v98, v99, v100, v101, v102, v103, v129, v132, v135, v137, v140, v143, v145, v147, v149.value, *&v149.timescale, v149.epoch, v150, v151, v152, v153, v154, rhs.value, *&rhs.timescale, rhs.epoch, v156, time.value, *&time.timescale, time.epoch, v158, time2.value, *&time2.timescale, time2.epoch, v160, time1.value, *&time1.timescale, time1.epoch, v162, fireTime.value, *&fireTime.timescale, fireTime.epoch);
          LODWORD(range.start.value) = 136315906;
          OUTLINED_FUNCTION_9_81("fiit_rescheduleScanningBoundaryTimer", v104);
          OUTLINED_FUNCTION_18_3();
        }

        OUTLINED_FUNCTION_7();
        OUTLINED_FUNCTION_414();
      }

      OUTLINED_FUNCTION_20_38(*(DerivedStorage + 304), *(DerivedStorage + 312), v79, v80, v81, v82, v83, v84, v128, v131, v134, *(&v134 + 1), v139, *v142, *&v142[8], *&v142[16], v149.value, *&v149.timescale, v149.epoch, v150, v151, v152, v153, v154, rhs.value, *&rhs.timescale, rhs.epoch, v156, v85);
      return CMTimebaseSetTimerDispatchSourceNextFireTime(v126, v127, &fireTime, 0);
    }
  }

  else
  {
    if (dword_1EAF17A98)
    {
      LODWORD(time1.value) = 0;
      LOBYTE(time2.value) = 0;
      v105 = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
      value = time1.value;
      v107 = os_log_type_enabled(v105, time2.value);
      if (v107)
      {
        v116 = value;
      }

      else
      {
        v116 = value & 0xFFFFFFFE;
      }

      if (v116)
      {
        OUTLINED_FUNCTION_20_38(v107, v108, v109, v110, v111, v112, v113, v114, v128, v131, v134, *(&v134 + 1), v139, *v142, *&v142[8], *&v142[16], v149.value, *&v149.timescale, v149.epoch, v150, v151, v152, v153, v154, rhs.value, *&rhs.timescale, rhs.epoch, v156, v115);
        CMTimeGetSeconds(&fireTime);
        v125 = OUTLINED_FUNCTION_35_25(v117, v118, v119, v120, v121, v122, v123, v124, v130, v133, v136, v138, v141, v144, v146, v148, v149.value, *&v149.timescale, v149.epoch, v150, v151, v152, v153, v154, rhs.value, *&rhs.timescale, rhs.epoch, v156, time.value, *&time.timescale, time.epoch, v158, time2.value, *&time2.timescale, time2.epoch, v160, time1.value, *&time1.timescale, time1.epoch, v162, fireTime.value, *&fireTime.timescale, fireTime.epoch);
        LODWORD(range.start.value) = 136315906;
        OUTLINED_FUNCTION_9_81("fiit_rescheduleScanningBoundaryTimer", v125);
        OUTLINED_FUNCTION_108();
        _os_log_send_and_compose_impl();
      }

      OUTLINED_FUNCTION_7();
      OUTLINED_FUNCTION_524();
    }

    return fiit_handleScanningBoundaryFireTimeGuts(a1);
  }

  return result;
}

void fiit_currentTime(uint64_t a1@<X0>, CFDateRef *a2@<X1>, CMTime *a3@<X8>)
{
  v54 = *MEMORY[0x1E69E9840];
  v7 = MEMORY[0x1E6960CC0];
  *&a3->value = *MEMORY[0x1E6960CC0];
  a3->epoch = *(v7 + 16);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v9 = OUTLINED_FUNCTION_61_17(DerivedStorage);
  v11 = v10(v9);
  if (v11)
  {
    if (*(v3 + 236))
    {
      v12 = *(v3 + 272);
      a3->epoch = *(v3 + 288);
      *&a3->value = v12;
    }

    else
    {
      v14 = v11;
      if (FigPlaybackItemSegmentGetType(v11))
      {
        if (FigPlaybackItemSegmentGetType(v14) == 1)
        {
          cf.value = 0;
          memset(__dst, 0, sizeof(__dst));
          FigPlaybackItemSegmentGetTimeMapping(v14, __dst);
          if (!*(v3 + 24))
          {
            return;
          }

          FigPlaybackItemSegmentGetInterstitialEvent(v14);
          if (*(*(CMBaseObjectGetVTable() + 16) + 120))
          {
            v15 = OUTLINED_FUNCTION_182_1();
            v17 = v16(v15);
          }

          else
          {
            v17 = 0;
          }

          v28 = FigPlayerInterstitialEventCopyIdentifier(v17);
          if (FigPlayerInterstitialEventGetTimelineOccupancy(v17) == 1)
          {
            v29 = *(v3 + 24);
            v30 = *(*(CMBaseObjectGetVTable() + 16) + 104);
            if (v30)
            {
              v30(fromRange, v29, &cf);
              value = cf.value;
            }

            else
            {
              value = 0;
              *&fromRange[0].start.value = *MEMORY[0x1E6960C68];
              fromRange[0].start.epoch = *(MEMORY[0x1E6960C68] + 16);
            }

            time.value = fromRange[0].start.value;
            flags = fromRange[0].start.flags;
            time.timescale = fromRange[0].start.timescale;
            epoch = fromRange[0].start.epoch;
            v40 = FigPlayerInterstitialEventCopyIdentifier(value);
            OUTLINED_FUNCTION_182_1();
            if (!FigCFEqual() || (flags & 1) == 0)
            {
              FigPlaybackItemSegmentGetTimeMapping(v14, &v44);
              fromRange[0] = v44;
              CMTimeRangeGetEnd(&toRange.start, fromRange);
              time.value = toRange.start.value;
              flags = toRange.start.flags;
              time.timescale = toRange.start.timescale;
              epoch = toRange.start.epoch;
            }

            fromRange[0].start.value = time.value;
            fromRange[0].start.timescale = time.timescale;
            fromRange[0].start.flags = flags;
            fromRange[0].start.epoch = epoch;
            *&toRange.start.value = *&__dst[0].start.value;
            toRange.start.epoch = __dst[0].start.epoch;
            CMTimeSubtract(a3, &fromRange[0].start, &toRange.start);
            *&toRange.start.value = *&a3->value;
            toRange.start.epoch = a3->epoch;
            rhs = __dst[1].start;
            CMTimeAdd(&fromRange[0].start, &toRange.start, &rhs);
            *&a3->value = *&fromRange[0].start.value;
            a3->epoch = fromRange[0].start.epoch;
            if (cf.value)
            {
              CFRelease(cf.value);
            }

            if (v40)
            {
              CFRelease(v40);
            }
          }

          else
          {
            *&a3->value = *&__dst[1].start.value;
            a3->epoch = __dst[1].start.epoch;
          }

          if (v28)
          {
            CFRelease(v28);
          }
        }
      }

      else
      {
        v42 = *MEMORY[0x1E6960C68];
        *&v47.value = *MEMORY[0x1E6960C68];
        v18 = *(MEMORY[0x1E6960C68] + 16);
        v47.epoch = v18;
        v19 = *(v3 + 8);
        v20 = *(*(CMBaseObjectGetVTable() + 16) + 32);
        if (v20)
        {
          v20(v19, &v47);
        }

        v45 = v47;
        *&v46.value = v42;
        v46.epoch = v18;
        v21 = *MEMORY[0x1E6960C70];
        rhs.epoch = *(MEMORY[0x1E6960C70] + 16);
        *&rhs.value = v21;
        memset(__dst, 0, sizeof(__dst));
        v43 = CMBaseObjectGetDerivedStorage();
        v22 = (*(v43 + 96))(*(v43 + 48));
        if (v22)
        {
          v23 = v22;
          if (!FigPlaybackItemSegmentGetType(v22))
          {
            FigPlaybackItemSegmentGetTimeMapping(v23, __dst);
            time = v45;
            fromRange[0] = __dst[0];
            toRange = __dst[1];
            CMTimeMapTimeFromRangeToRange(&v46, &time, fromRange, &toRange);
            v24 = *(v43 + 48);
            v25 = CMBaseObjectGetDerivedStorage();
            v26 = *(v25 + 56);
            if (v26)
            {
              Count = CFArrayGetCount(v26);
            }

            else
            {
              Count = 0;
            }

            v32 = (*(v25 + 96))(v24);
            if (FigPlaybackItemSegmentGetType(v32) || Count < 1)
            {
LABEL_29:
              OUTLINED_FUNCTION_60_18();
              toRange.start = v46;
              fiit_distanceFromRange(fromRange, &toRange.start, &rhs);
              fromRange[0].start = rhs;
              *&toRange.start.value = kScanningSeekToBoundaryTolerance;
              toRange.start.epoch = 0;
              if (CMTimeCompare(&fromRange[0].start, &toRange.start) < 0)
              {
                time = v46;
                OUTLINED_FUNCTION_60_18();
                CMTimeClampToRange(&toRange.start, &time, fromRange);
                *&v46.value = *&toRange.start.value;
                v37 = toRange.start.epoch;
              }

              else
              {
                fiit_updateCurrentSegmentWrapper(a1, 0);
                v41 = (*(v43 + 96))(*(v43 + 48));
                FigPlaybackItemSegmentGetTimeMapping(v41, fromRange);
                memcpy(__dst, fromRange, sizeof(__dst));
                cf = v45;
                fromRange[0] = __dst[0];
                toRange = __dst[1];
                CMTimeMapTimeFromRangeToRange(&time, &cf, fromRange, &toRange);
                *&v46.value = *&time.value;
                v37 = time.epoch;
              }

              v46.epoch = v37;
            }

            else
            {
              while (1)
              {
                v33 = *(v25 + 96);
                ValueAtIndex = FigCFArrayGetValueAtIndex();
                v35 = v33(ValueAtIndex);
                if (v32 == v35)
                {
                  break;
                }

                Type = FigPlaybackItemSegmentGetType(v35);
                if (Count >= 2)
                {
                  --Count;
                  if (Type)
                  {
                    continue;
                  }
                }

                goto LABEL_29;
              }
            }
          }
        }

        *a3 = v46;
      }
    }

    if (a2)
    {
      *&fromRange[0].start.value = *&a3->value;
      fromRange[0].start.epoch = a3->epoch;
      v13 = *(v3 + 176);
      *&__dst[0].start.value = *(v3 + 160);
      *&__dst[0].start.epoch = v13;
      *&__dst[0].duration.timescale = *(v3 + 192);
      *a2 = fiit_MakeCFDateFromTime(&fromRange[0].start, __dst);
    }
  }
}

uint64_t fiit_handleScanningBoundaryFireTimeGuts(const void *a1)
{
  v10 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (dword_1EAF17A98)
  {
    OUTLINED_FUNCTION_147();
    v4 = OUTLINED_FUNCTION_126();
    os_log_type_enabled(v4, type);
    OUTLINED_FUNCTION_40();
    if (v1)
    {
      time = *(DerivedStorage + 328);
      CMTimeGetSeconds(&time);
      OUTLINED_FUNCTION_17_48();
      OUTLINED_FUNCTION_18_3();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_414();
  }

  if ((*(DerivedStorage + 340) & 1) == 0)
  {
    return 0;
  }

  v5 = CMBaseObjectGetDerivedStorage();
  v6 = *(v5 + 352);
  *(v5 + 352) = FPSupport_IncrementSeekID(v6);
  time = *(DerivedStorage + 328);
  return fiit_SeekToTimeWithOptions(a1, v6, &time.value, MEMORY[0x1E6960C88], MEMORY[0x1E6960C88], 0);
}

BOOL fiit_isSegmentPointInterstitial(uint64_t a1, uint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v4 = (*(DerivedStorage + 96))(a2);
  Type = FigPlaybackItemSegmentGetType(v4);
  if (*(DerivedStorage + 24))
  {
    v6 = Type == 1;
  }

  else
  {
    v6 = 0;
  }

  if (!v6)
  {
    return 0;
  }

  InterstitialEvent = FigPlaybackItemSegmentGetInterstitialEvent(v4);
  v8 = *(DerivedStorage + 24);
  v9 = *(*(CMBaseObjectGetVTable() + 16) + 120);
  if (v9)
  {
    v10 = v9(v8, InterstitialEvent);
  }

  else
  {
    v10 = 0;
  }

  return FigPlayerInterstitialEventGetTimelineOccupancy(v10) == 0;
}

uint64_t fiit_SeekToTimeWithOptions(const void *a1, int a2, __int128 *a3, __int128 *a4, uint64_t a5, uint64_t a6)
{
  HIDWORD(v84) = a2;
  v131 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  *&v109.value = *MEMORY[0x1E6960C70];
  v11 = *(MEMORY[0x1E6960C70] + 16);
  v109.epoch = v11;
  *&v108.value = *&v109.value;
  v108.epoch = v11;
  *&v107.value = *&v109.value;
  v107.epoch = v11;
  *&v106.value = *&v109.value;
  v106.epoch = v11;
  v79 = *&v109.value;
  v104 = *&v109.value;
  v105 = v11;
  memcpy(__dst, MEMORY[0x1E6960C78], sizeof(__dst));
  cf = 0;
  FigSimpleMutexLock();
  v12 = OUTLINED_FUNCTION_312();
  fiit_currentTime(v12, v13, v14);
  v15 = *(DerivedStorage + 236);
  if (v15 != HIDWORD(v84))
  {
    v16 = fiit_postIntegratedTimelineSeekDidFinishNotification(a1, v15, 0);
    if (v16)
    {
      goto LABEL_42;
    }
  }

  *(DerivedStorage + 272) = v104;
  *(DerivedStorage + 288) = v105;
  fiit_ensureSegmentListContainsCurrentTime(a1);
  OUTLINED_FUNCTION_19_47();
  v18 = fiit_mapTimeToSegmentAndOffset(a1, time, v17, &cf, &v109);
  if (v18)
  {
    goto LABEL_40;
  }

  v19 = cf;
  if (!cf && dword_1EAF17A98)
  {
    LODWORD(v112.value) = 0;
    LOBYTE(type.value) = 0;
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    value = v112.value;
    if (os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, type.value))
    {
      v22 = value;
    }

    else
    {
      v22 = value & 0xFFFFFFFE;
    }

    if (v22)
    {
      OUTLINED_FUNCTION_19_47();
      Seconds = CMTimeGetSeconds(time);
      LODWORD(rhs.value) = 136315906;
      *(&rhs.value + 4) = "fiit_SeekToTimeWithOptions";
      LOWORD(rhs.flags) = 2048;
      *(&rhs.flags + 2) = a1;
      HIWORD(rhs.epoch) = 2048;
      v114 = Seconds;
      v115 = 1024;
      LODWORD(v116) = HIDWORD(v84);
      LODWORD(v73) = 38;
      p_rhs = &rhs;
      OUTLINED_FUNCTION_108();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_71_13();
    v19 = cf;
  }

  if (!v19)
  {
    OUTLINED_FUNCTION_5_8();
    v16 = FigSignalErrorAtGM();
LABEL_42:
    v18 = v16;
    goto LABEL_40;
  }

  v24 = (*(DerivedStorage + 96))();
  FigPlaybackItemSegmentGetTimeMapping(v24, __dst);
  *time = __dst[0];
  *&time[16] = *&__dst[1];
  rhs = v109;
  CMTimeAdd(&v108, time, &rhs);
  if (a6)
  {
    time[0] = 0;
    FigCFDictionaryGetInt32IfPresent();
    FigCFDictionaryGetBooleanIfPresent();
    if (time[0])
    {
      v25 = *a3;
      *(DerivedStorage + 288) = *(a3 + 2);
      *(DerivedStorage + 272) = v25;
      v26 = *(DerivedStorage + 48);
      v27 = cf;
      if (v26 != cf)
      {
        *(DerivedStorage + 296) = 2;
        *(DerivedStorage + 48) = v27;
        if (v27)
        {
          CFRetain(v27);
        }

        if (v26)
        {
          CFRelease(v26);
        }
      }
    }
  }

  v100 = v108.value;
  v95 = *a4;
  v97 = *(a4 + 2);
  v87 = *a5;
  v91 = *(a5 + 16);
  *&v112.value = v79;
  v112.epoch = v11;
  *&type.value = v79;
  type.epoch = v11;
  memcpy(time, MEMORY[0x1E6960C78], 0x60uLL);
  TimeMapping = FigPlaybackItemSegmentGetTimeMapping(v24, time);
  OUTLINED_FUNCTION_47_20(v29, v30, v31, v32, v33, v34, v35, v36, p_rhs, v73, v75, v77, v79, *(&v79 + 1), a5, v84, v87, *(&v87 + 1), v91, v93, v95, *(&v95 + 1), v97, v98, TimeMapping, v100);
  v110 = v96;
  v37 = OUTLINED_FUNCTION_58_13();
  v40 = CMTimeSubtract(v39, v37, v38);
  OUTLINED_FUNCTION_47_20(v40, v41, v42, v43, v44, v45, v46, v47, v72, v74, v76, v78, v80, v81, v83, v85, v88, v90, v92, v94, v96.value, *&v96.timescale, v96.epoch, v99, v48, v101);
  v110 = v89;
  v49 = OUTLINED_FUNCTION_58_13();
  CMTimeAdd(v51, v49, v50);
  rhs = v112;
  v110 = *time;
  v52 = OUTLINED_FUNCTION_58_13();
  if (CMTimeCompare(v52, v53) < 0)
  {
    v112 = *time;
  }

  OUTLINED_FUNCTION_57_16();
  CMTimeRangeGetEnd(&v110, &rhs);
  rhs = type;
  v54 = OUTLINED_FUNCTION_58_13();
  if (CMTimeCompare(v54, v55) >= 1)
  {
    OUTLINED_FUNCTION_57_16();
    CMTimeRangeGetEnd(&v110, &rhs);
    type = v110;
  }

  v107 = v112;
  v106 = type;
  *(DerivedStorage + 232) = 1;
  *(DerivedStorage + 236) = v86;
  v56 = *a3;
  *(DerivedStorage + 264) = *(a3 + 2);
  *(DerivedStorage + 248) = v56;
  v57 = *(DerivedStorage + 240);
  v58 = cf;
  *(DerivedStorage + 240) = cf;
  if (v58)
  {
    CFRetain(v58);
  }

  if (v57)
  {
    CFRelease(v57);
  }

  if (dword_1EAF17A98)
  {
    LODWORD(v112.value) = 0;
    LOBYTE(type.value) = 0;
    v59 = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    v60 = v112.value;
    if (os_log_type_enabled(v59, type.value))
    {
      v61 = v60;
    }

    else
    {
      v61 = v60 & 0xFFFFFFFE;
    }

    if (v61)
    {
      OUTLINED_FUNCTION_19_47();
      v62 = CMTimeGetSeconds(time);
      *time = *(DerivedStorage + 272);
      *&time[16] = *(DerivedStorage + 288);
      v63 = CMTimeGetSeconds(time);
      *time = v108;
      v64 = CMTimeGetSeconds(time);
      *time = v107;
      v65 = CMTimeGetSeconds(time);
      *time = v106;
      v66 = CMTimeGetSeconds(time);
      LODWORD(rhs.value) = 136317186;
      *(&rhs.value + 4) = "fiit_SeekToTimeWithOptions";
      LOWORD(rhs.flags) = 2048;
      *(&rhs.flags + 2) = a1;
      HIWORD(rhs.epoch) = 2048;
      v114 = v62;
      v115 = 2048;
      v116 = v63;
      v117 = 2048;
      v118 = v64;
      v119 = 2112;
      v120 = v24;
      v121 = 2048;
      v122 = v65;
      v123 = 2048;
      v124 = v66;
      v125 = 1024;
      v126 = v86;
      OUTLINED_FUNCTION_108();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_71_13();
  }

  v67 = *(DerivedStorage + 24);
  v112 = v108;
  rhs.value = 0;
  *&rhs.timescale = &rhs;
  rhs.epoch = 0x2020000000;
  LODWORD(v114) = 0;
  v68 = CMBaseObjectGetDerivedStorage();
  if (v24)
  {
    CFRetain(v24);
  }

  if (v67)
  {
    CFRetain(v67);
  }

  fiit_unlockAndPostSnapshotOutOfSyncNotification(a1);
  v69 = *(v68 + 72);
  *time = MEMORY[0x1E69E9820];
  *&time[8] = 3221225472;
  *&time[16] = __fiit_seekToTimeInternal_block_invoke;
  *&time[24] = &unk_1E7497860;
  *&time[48] = v24;
  *&time[56] = v67;
  *&time[40] = a1;
  *&time[32] = &rhs;
  *&time[64] = v68;
  *&time[76] = v112;
  *&time[72] = v86;
  v128 = 0;
  v129 = v107;
  v130 = v106;
  dispatch_sync(v69, time);
  FigSimpleMutexLock();
  v18 = *(*&rhs.timescale + 24);
  _Block_object_dispose(&rhs, 8);
LABEL_40:
  fiit_unlockAndPostSnapshotOutOfSyncNotification(a1);
  return v18;
}

void fiit_ensureSegmentListContainsCurrentTime(uint64_t a1)
{
  v34 = *MEMORY[0x1E6960C70];
  v35 = *(MEMORY[0x1E6960C70] + 16);
  v33 = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 200))
  {
    v3 = DerivedStorage;
    v4 = OUTLINED_FUNCTION_312();
    fiit_currentTime(v4, v5, v6);
    if (FigCFArrayGetLastValue())
    {
      v7 = (*(v3 + 96))();
      FigPlaybackItemSegmentGetTimeMapping(v7, v29);
      *&range.source.start.value = v30;
      *&range.source.start.epoch = v31;
      *&range.source.duration.timescale = v32;
      CMTimeRangeGetEnd(&v16[0].start, &range.source);
      *&range.source.start.value = v34;
      range.source.start.epoch = v35;
      if (CMTimeCompare(&v16[0].start, &range.source.start) < 0)
      {
        memset(&v28, 0, sizeof(v28));
        FigPlaybackItemSegmentGetTimeMapping(v7, v25);
        *&range.source.start.value = v26;
        range.source.start.epoch = v27;
        *&v16[0].start.value = v34;
        v16[0].start.epoch = v35;
        CMTimeSubtract(&v28, &v16[0].start, &range.source.start);
        memset(&range, 0, sizeof(range));
        FigPlaybackItemSegmentGetTimeMapping(v7, &v22);
        *&start.start.value = v22;
        start.start.epoch = v23;
        duration = v28;
        CMTimeRangeMake(v16, &start.start, &duration);
        FigPlaybackItemSegmentGetTimeMapping(v7, v18);
        duration = v19;
        v17 = v28;
        CMTimeRangeMake(&start, &duration, &v17);
        CMTimeMappingMake(&range, v16, &start);
        Type = FigPlaybackItemSegmentGetType(v7);
        LoadedTimeRanges = FigPlaybackItemSegmentGetLoadedTimeRanges(v7);
        StartDate = FigPlaybackItemSegmentGetStartDate(v7);
        InterstitialEvent = FigPlaybackItemSegmentGetInterstitialEvent(v7);
        memcpy(v16, &range, sizeof(v16));
        if (!FigPlaybackItemSegmentCreate(Type, &v16[0].start.value, LoadedTimeRanges, StartDate, InterstitialEvent, &v33))
        {
          v12 = (*(v3 + 88))(v33);
          if (v12)
          {
            v13 = v12;
            v14 = *(v3 + 56);
            Count = CFArrayGetCount(v14);
            CFArraySetValueAtIndex(v14, Count - 1, v13);
            fiit_updateCurrentSegmentWrapper(a1, 1);
            CFRelease(v13);
          }
        }

        if (v33)
        {
          CFRelease(v33);
        }
      }
    }
  }
}

void __fiit_seekToTimeInternal_block_invoke(uint64_t a1)
{
  v37 = *MEMORY[0x1E69E9840];
  if (dword_1EAF17A98)
  {
    LODWORD(v31) = 0;
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    v3 = os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    if (OUTLINED_FUNCTION_109_0(v3))
    {
      v4 = *(a1 + 40);
      v5 = *(a1 + 72);
      *v33 = 136315650;
      *&v33[4] = "fiit_seekToTimeInternal_block_invoke";
      *&v33[12] = 2048;
      *&v33[14] = v4;
      *&v33[22] = 1024;
      v34 = v5;
      OUTLINED_FUNCTION_18_3();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_524();
  }

  v6 = FigPlaybackItemSegmentGetType(*(a1 + 48));
  if (v6 != 1)
  {
    if (v6)
    {
      v16 = FigSignalErrorAtGM();
    }

    else
    {
      v7 = *(a1 + 56);
      if (v7 && !FigPlayerInterstitialCoordinatorIsRemote(v7))
      {
        v8 = *(a1 + 56);
        if (v8 && (v9 = *(a1 + 72), (v10 = *(*(CMBaseObjectGetVTable() + 16) + 96)) != 0))
        {
          v11 = v10(v8, v9);
        }

        else
        {
          v11 = -12782;
        }

        *(*(*(a1 + 32) + 8) + 24) = v11;
        if (*(*(*(a1 + 32) + 8) + 24))
        {
          goto LABEL_25;
        }
      }

      v21 = *(*(a1 + 64) + 8);
      v22 = *(a1 + 100);
      v35 = *(a1 + 76);
      v36 = *(a1 + 92);
      *v33 = *(a1 + 104);
      *&v33[16] = *(a1 + 120);
      v31 = *(a1 + 128);
      v32 = *(a1 + 144);
      v16 = FPSupport_SetCurrentTimeWithRangeIDAndReason(v21, &v35, v22, v33, &v31);
    }

    goto LABEL_24;
  }

  InterstitialEvent = FigPlaybackItemSegmentGetInterstitialEvent(*(a1 + 48));
  v13 = *(a1 + 56);
  v14 = *(*(CMBaseObjectGetVTable() + 16) + 120);
  if (v14)
  {
    v15 = v14(v13, InterstitialEvent);
  }

  else
  {
    v15 = 0;
  }

  if (FigPlayerInterstitialEventGetTimelineOccupancy(v15) == 1)
  {
    v17 = *(a1 + 56);
    v18 = *(a1 + 72);
    v19 = *(a1 + 100);
    *type = *(a1 + 76);
    v30 = *(a1 + 92);
    v27 = *(a1 + 104);
    v28 = *(a1 + 120);
    v25 = *(a1 + 128);
    v26 = *(a1 + 144);
    if (v17 && (v20 = *(*(CMBaseObjectGetVTable() + 16) + 88)) != 0)
    {
      v35 = *type;
      v36 = v30;
      *v33 = v27;
      *&v33[16] = v28;
      v31 = v25;
      v32 = v26;
      v16 = v20(v17, InterstitialEvent, &v35, v33, &v31, v18, v19);
    }

    else
    {
      v16 = -12782;
    }

LABEL_24:
    *(*(*(a1 + 32) + 8) + 24) = v16;
  }

LABEL_25:
  v23 = *(a1 + 56);
  if (v23)
  {
    CFRelease(v23);
  }

  v24 = *(a1 + 48);
  if (v24)
  {
    CFRelease(v24);
  }
}

uint64_t fiit_playerRateDidChange(uint64_t a1, const void *a2, uint64_t a3, uint64_t a4)
{
  v24 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigCFDictionaryGetFloat32IfPresent();
  FigSimpleMutexLock();
  v7 = *(DerivedStorage + 24);
  if (!v7)
  {
    return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
  }

  if (FigPlayerInterstitialCoordinatorIsRemote(v7))
  {
    return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
  }

  v8 = *(DerivedStorage + 56);
  if (!v8 || CFArrayGetCount(v8) < 2 || *(DerivedStorage + 16) != a4 || *(DerivedStorage + 356) == 0.0)
  {
    return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
  }

  if (dword_1EAF17A98)
  {
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_414();
  }

  fiit_cancelScanTracking();
  valuePtr[0] = 0;
  v10 = CMBaseObjectGetDerivedStorage();
  v11 = *(v10 + 24);
  if (v11 && !FigPlayerInterstitialCoordinatorIsRemote(v11))
  {
    v12 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberFloatType, valuePtr);
    if (v12)
    {
      v13 = v12;
      v14 = *(v10 + 24);
      v15 = *(*(CMBaseObjectGetVTable() + 8) + 56);
      if (v15)
      {
        v16 = v15(v14, @"fpic_ExternalRate", v13);
      }

      else
      {
        v16 = -12782;
      }

      CFRelease(v13);
      if (v16)
      {
        return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
      }
    }

    else if (FigSignalErrorAtGM())
    {
      return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
    }
  }

  if (0.0 > 2.0)
  {
    *(DerivedStorage + 356) = 0;
    AllocatorForMedia = FigGetAllocatorForMedia();
    HostTimeClock = CMClockGetHostTimeClock();
    if (!CMTimebaseCreateWithSourceClock(AllocatorForMedia, HostTimeClock, (DerivedStorage + 304)))
    {
      v19 = CMBaseObjectGetDerivedStorage();
      v20 = dispatch_source_create(MEMORY[0x1E69E9710], 0, 1uLL, *(v19 + 320));
      if (v20)
      {
        v21 = FigCFWeakReferenceHolderCreateWithReferencedObject();
        dispatch_set_context(v20, v21);
        dispatch_source_set_timer(v20, 0xFFFFFFFFFFFFFFFFLL, 0xFFFFFFFFFFFFFFFFLL, 0x989680uLL);
        dispatch_source_set_event_handler_f(v20, fiit_handleScanningBoundaryFireTime);
        dispatch_source_set_cancel_handler_f(v20, 0);
        dispatch_set_finalizer_f(v20, FigCFRelease_15);
        dispatch_resume(v20);
      }

      *(DerivedStorage + 312) = v20;
      if (!CMTimebaseAddTimerDispatchSource(*(DerivedStorage + 304), v20) && (*(DerivedStorage + 236) || !fiit_rescheduleScanningBoundaryTimer(a2)))
      {
        CMTimebaseSetRate(*(DerivedStorage + 304), 0.0);
      }
    }
  }

  return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
}

void fiit_handleScanningBoundaryFireTime()
{
  v0 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v0)
  {
    v1 = v0;
    CMBaseObjectGetDerivedStorage();
    FigSimpleMutexLock();
    fiit_handleScanningBoundaryFireTimeGuts(v1);
    fiit_unlockAndPostSnapshotOutOfSyncNotification(v1);

    CFRelease(v1);
  }
}

void fiit_rebuildEventList(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, int a10, uint64_t a11, uint64_t a12, __int16 a13, char a14, os_log_type_t type, int a16, CFArrayRef theArray, int a18, uint64_t a19, __int16 a20, uint64_t a21, __int16 a22, uint64_t a23, char a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, uint64_t a52, uint64_t a53)
{
  OUTLINED_FUNCTION_458();
  a50 = v53;
  a51 = v54;
  v56 = v55;
  v58 = v57;
  a38 = *MEMORY[0x1E69E9840];
  theArray = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v60 = DerivedStorage;
  Mutable = DerivedStorage[3];
  if (Mutable)
  {
    v62 = DerivedStorage[1];
    v63 = *(*(CMBaseObjectGetVTable() + 16) + 80);
    if (v63 && (v63(Mutable, v62, v60 + 203, &theArray), theArray))
    {
      Count = CFArrayGetCount(theArray);
    }

    else
    {
      Count = 0;
    }

    v66 = (v60 + 4);
    v65 = v60[4];
    if (v65)
    {
      v65 = CFArrayGetCount(v65);
    }

    if (Count == v65)
    {
      if (*v66)
      {
        Mutable = CFRetain(*v66);
      }

      else
      {
        Mutable = 0;
      }

      if (Count < 1)
      {
        v73 = 0;
      }

      else
      {
        v85 = v58;
        v74 = v56;
        v73 = 0;
        for (i = 0; i != Count; ++i)
        {
          ValueAtIndex = FigCFArrayGetValueAtIndex();
          v77 = FigCFArrayGetValueAtIndex();
          if (FigCFEqual())
          {
            SeedValue = FigPlayerInterstitialEventGetSeedValue(ValueAtIndex);
            if (SeedValue == FigPlayerInterstitialEventGetSeedValue(v77))
            {
              continue;
            }
          }

          v79 = fiit_CopyEvent(ValueAtIndex);
          if (!v79)
          {
            goto LABEL_36;
          }

          v80 = v79;
          v81 = OUTLINED_FUNCTION_182_1();
          CFArraySetValueAtIndex(v81, v82, v80);
          CFRelease(v80);
          v73 = 1;
        }

        v56 = v74;
        v58 = v85;
      }
    }

    else
    {
      Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], Count, MEMORY[0x1E695E9C0]);
      if (Count >= 1)
      {
        v67 = 0;
        while (1)
        {
          v68 = FigCFArrayGetValueAtIndex();
          v69 = fiit_CopyEvent(v68);
          if (!v69)
          {
            break;
          }

          v70 = v69;
          v71 = OUTLINED_FUNCTION_182_1();
          CFArraySetValueAtIndex(v71, v72, v70);
          CFRelease(v70);
          if (Count == ++v67)
          {
            goto LABEL_15;
          }
        }

LABEL_36:
        if (!Mutable)
        {
          goto LABEL_38;
        }

        goto LABEL_37;
      }

LABEL_15:
      v73 = 1;
    }

    v83 = *v66;
    *v66 = Mutable;
    if (Mutable)
    {
      CFRetain(Mutable);
    }

    if (v83)
    {
      goto LABEL_28;
    }
  }

  else
  {
    v73 = 0;
    v66 = (DerivedStorage + 4);
    v83 = DerivedStorage[4];
    DerivedStorage[4] = 0;
    if (v83)
    {
LABEL_28:
      CFRelease(v83);
    }
  }

  if (*(v60 + 202) && (*v66 && CFArrayGetCount(*v66) > 0 || *(v60 + 203)))
  {
    *(v60 + 202) = 0;
    if (dword_1EAF17A98)
    {
      os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
      os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
      OUTLINED_FUNCTION_7();
      fig_log_call_emit_and_clean_up_after_send_and_compose();
    }
  }

  fiit_updateCurrentEventID(v58, v56);
  if (!v73)
  {
    goto LABEL_36;
  }

  fiit_rebuildSegmentList(v58);
  if (Mutable)
  {
LABEL_37:
    CFRelease(Mutable);
  }

LABEL_38:
  if (theArray)
  {
    CFRelease(theArray);
  }

  OUTLINED_FUNCTION_457();
}

uint64_t fiit_SeekToDateWithOptions(const void *a1, int a2, uint64_t a3, uint64_t a4)
{
  v39 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_106(MEMORY[0x1E6960C70]);
  FigSimpleMutexLock();
  if (dword_1EAF17A98)
  {
    OUTLINED_FUNCTION_147();
    v10 = OUTLINED_FUNCTION_126();
    if (OUTLINED_FUNCTION_441_1(v10, v11, v12, v13, v14, v15, v16, v17, v23, v24, v25, v26, SBYTE2(v26), BYTE3(v26), SHIDWORD(v26)))
    {
      v18 = v4;
    }

    else
    {
      v18 = v4 & 0xFFFFFFFE;
    }

    if (v18)
    {
      v28 = 136315906;
      v29 = "fiit_SeekToDateWithOptions";
      v30 = 2048;
      v31 = a1;
      v32 = 2112;
      v33 = a3;
      v34 = 1024;
      v35 = a2;
      OUTLINED_FUNCTION_108();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_7();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  v19 = MEMORY[0x19A8CCD90](a3);
  v20 = *(DerivedStorage + 176);
  v36 = *(DerivedStorage + 160);
  v37 = v20;
  v38 = *(DerivedStorage + 192);
  FigCreateTimeWithDateAndMoment(&v36, &v27, v19);
  v36 = *&v27.value;
  *&v37 = v27.epoch;
  v21 = fiit_SeekToTimeWithOptions(a1, a2, &v36, MEMORY[0x1E6960CC0], MEMORY[0x1E6960CC0], a4);
  fiit_unlockAndPostSnapshotOutOfSyncNotification(a1);
  return v21;
}

uint64_t FigItemIntegratedTimelineCreate_cold_3(uint64_t a1, _DWORD *a2)
{
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t fiit_mapTimeToSegmentAndOffset_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_mapTimeToSegmentAndOffset_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_CopySnapshot_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_CopySnapshot_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_CopySnapshot_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_CopySnapshot_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_CopySnapshot_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_GetCurrentTime_cold_1(uint64_t a1, const void *a2, CMTime *a3)
{
  FigSimpleMutexLock();
  fiit_currentTime(a2, 0, &v6);
  *a3 = v6;

  return fiit_unlockAndPostSnapshotOutOfSyncNotification(a2);
}

uint64_t fiit_GetCurrentTime_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fiit_CopyCurrentDate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t neroid_Invalidate()
{
  v13 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*DerivedStorage)
  {
    v1 = DerivedStorage;
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    fig_log_call_emit_and_clean_up_after_send_and_compose();
    *v1 = 1;
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterRemoveListener();
    v3 = objc_autoreleasePoolPush();
    [MEMORY[0x1E6979518] begin];
    if (!pthread_main_np())
    {
      [MEMORY[0x1E6979518] activateBackground:1];
    }

    [MEMORY[0x1E6979518] setDisableActions:{1, v11, v12}];
    v4 = *(v1 + 1);
    if (v4)
    {

      *(v1 + 1) = 0;
    }

    v5 = *(v1 + 3);
    if (v5)
    {
      [v5 removeFromSuperlayer];
      [*(v1 + 3) setContents:0];

      *(v1 + 3) = 0;
    }

    v6 = *(v1 + 2);
    if (v6)
    {
      CFRelease(v6);
      *(v1 + 2) = 0;
    }

    [MEMORY[0x1E6979518] commit];
    objc_autoreleasePoolPop(v3);
    FigNeroTeardown(*(v1 + 4));
    v7 = *(v1 + 6);
    if (v7)
    {

      *(v1 + 6) = 0;
    }

    v8 = *(v1 + 5);
    if (v8)
    {
      CFRelease(v8);
      *(v1 + 5) = 0;
    }

    v9 = *(v1 + 4);
    if (v9)
    {
      CFRelease(v9);
      *(v1 + 4) = 0;
    }
  }

  return 0;
}

uint64_t neroid_CopyProperty(uint64_t a1, const void *a2, uint64_t a3, CFNumberRef *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    return 4294950604;
  }

  v7 = DerivedStorage;
  if (!CFEqual(a2, @"CAContextID"))
  {
    return 4294954512;
  }

  if (v7[2])
  {
    v8 = objc_autoreleasePoolPush();
    valuePtr = [v7[2] contextId];
    objc_autoreleasePoolPop(v8);
    v9 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt32Type, &valuePtr);
    result = 0;
    *a4 = v9;
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t neroid_SetProperty(uint64_t a1, const void *a2, void *a3)
{
  v24[2] = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    return 4294950604;
  }

  v7 = DerivedStorage;
  if (CFEqual(a2, @"DisplayLayer"))
  {
    v17 = objc_autoreleasePoolPush();
    [MEMORY[0x1E6979518] begin];
    if (!pthread_main_np())
    {
      [OUTLINED_FUNCTION_0_209() activateBackground:?];
    }

    [OUTLINED_FUNCTION_0_209() setDisableActions:?];
    [v7[3] removeFromSuperlayer];
    v18 = v7[1];
    v19 = a3;
    v7[1] = v19;
    [v19 addSublayer:v7[3]];
    [v7[1] bounds];
    v26.width = v20;
    v26.height = v21;
    DictionaryRepresentation = CGSizeCreateDictionaryRepresentation(v26);
    neroid_setDisplaySize(a1, DictionaryRepresentation);
    [MEMORY[0x1E6979518] commit];
    if (DictionaryRepresentation)
    {
      CFRelease(DictionaryRepresentation);
    }

    objc_autoreleasePoolPop(v17);
    return 0;
  }

  if (!CFEqual(a2, @"DisplaySize"))
  {
    if (!CFEqual(a2, @"MakeCAContextForRemoteHost"))
    {
      return 4294954512;
    }

    v8 = CMBaseObjectGetDerivedStorage();
    v9 = objc_autoreleasePoolPush();
    if (!*(v8 + 16))
    {
      v10 = *MEMORY[0x1E69796C0];
      v23[0] = *MEMORY[0x1E69796A0];
      v23[1] = v10;
      v11 = *MEMORY[0x1E695E4D0];
      v24[0] = @"FigNeroid_CAContext";
      v24[1] = v11;
      v12 = [MEMORY[0x1E695DF20] dictionaryWithObjects:v24 forKeys:v23 count:2];
      v13 = [MEMORY[0x1E6979550] contextWithOptions:v12];
      *(v8 + 16) = v13;
      if (!v13)
      {
        fig_log_get_emitter();
        v15 = FigSignalErrorAtGM();
LABEL_11:
        objc_autoreleasePoolPop(v9);
        return v15;
      }

      v14 = v13;
    }

    [MEMORY[0x1E6979518] begin];
    if (!pthread_main_np())
    {
      [MEMORY[0x1E6979518] activateBackground:1];
    }

    [MEMORY[0x1E6979518] setDisableActions:1];
    [*(v8 + 16) setLayer:*(v8 + 24)];
    [MEMORY[0x1E6979518] commit];
    v15 = 0;
    goto LABEL_11;
  }

  return neroid_setDisplaySize(a1, a3);
}

uint64_t neroid_setDisplaySize(uint64_t a1, const __CFDictionary *a2)
{
  v17 = *MEMORY[0x1E695F060];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294950606;
  }

  v4 = DerivedStorage;
  if (!CGSizeMakeWithDictionaryRepresentation(a2, &v17))
  {
    return 4294950606;
  }

  Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!Mutable)
  {
    return 4294950605;
  }

  v6 = Mutable;
  v7 = v17;
  GSMainScreenScaleFactor();
  v9 = v8;
  v18.width = v7.width * v8;
  v18.height = v7.height * v9;
  DictionaryRepresentation = CGSizeCreateDictionaryRepresentation(v18);
  if (DictionaryRepresentation)
  {
    v11 = DictionaryRepresentation;
    CFDictionarySetValue(v6, @"DisplaySize", DictionaryRepresentation);
    CMBaseObject = FigLayerViewGetCMBaseObject(*(v4 + 40));
    v13 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (v13)
    {
      v14 = v13(CMBaseObject, @"DisplayInfo", v6);
      if (!v14)
      {
        v15 = objc_autoreleasePoolPush();
        [MEMORY[0x1E6979518] begin];
        if (!pthread_main_np())
        {
          [OUTLINED_FUNCTION_0_209() activateBackground:?];
        }

        [OUTLINED_FUNCTION_0_209() setDisableActions:?];
        [*(v4 + 24) setFrame:{0.0, 0.0, v17}];
        [MEMORY[0x1E6979518] commit];
        objc_autoreleasePoolPop(v15);
        v14 = 0;
      }
    }

    else
    {
      v14 = 4294954514;
    }

    CFRelease(v6);
  }

  else
  {
    v14 = 4294950605;
    v11 = v6;
  }

  CFRelease(v11);
  return v14;
}

void FigNeroidCreateLocal_cold_1(void *a1, _DWORD *a2)
{
  fig_log_get_emitter();
  *a2 = FigSignalErrorAtGM();
  objc_autoreleasePoolPop(a1);
}

uint64_t FigCPEProtectorXPCRemoteRetainCopiedCPEProtector(uint64_t a1, void *a2)
{
  v25 = 0;
  if (a1 && a2)
  {
    if (qword_1ED4CBB50 != -1)
    {
      dispatch_once(&qword_1ED4CBB50, &__block_literal_global_137);
    }

    v4 = _MergedGlobals_138;
    if (_MergedGlobals_138)
    {
      return v4;
    }

    v5 = FigXPCRemoteClientRetainCopiedObject();
    v13 = OUTLINED_FUNCTION_10_11(v5, v6, v7, v8, v9, v10, v11, v12, v24, v25);
    if (v13)
    {
      FigCPEProtectorXPCRemoteGetObjectID(v13, &v24);
    }

    else
    {
      v15 = FigCPEProtectorXPCRemoteCreateWithObjectID(a1, &v25);
      if (v15)
      {
        v23 = OUTLINED_FUNCTION_10_11(v15, v16, v17, v18, v19, v20, v21, v22, v24, v25);
        if (v23)
        {
          CFRelease(v23);
        }

        return v4;
      }
    }

    v4 = 0;
    *a2 = v25;
    return v4;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_3_5();

  return FigSignalErrorAtGM();
}

uint64_t FigCPEProtectorXPCRemoteCreateWithObjectID(uint64_t a1, void *a2)
{
  if (a1 && a2)
  {
    if (qword_1ED4CBB50 != -1)
    {
      dispatch_once(&qword_1ED4CBB50, &__block_literal_global_137);
    }

    v4 = _MergedGlobals_138;
    if (!_MergedGlobals_138)
    {
      FigCPEProtectorGetClassID();
      v5 = CMDerivedObjectCreate();
      if (v5)
      {
        return v5;
      }

      else
      {
        *CMBaseObjectGetDerivedStorage() = a1;
        v4 = FigXPCRemoteClientAssociateObject();
        if (!v4)
        {
          *a2 = 0;
        }
      }
    }

    return v4;
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();

    return FigSignalErrorAtGM();
  }
}

uint64_t FigCPEProtectorRemoteCreateForScheme(uint64_t a1, uint64_t a2, uint64_t a3, void *a4)
{
  if (qword_1ED4CBB50 != -1)
  {
    dispatch_once(&qword_1ED4CBB50, &__block_literal_global_137);
  }

  v5 = _MergedGlobals_138;
  if (!_MergedGlobals_138)
  {
    v6 = FigXPCCreateBasicMessage();
    if (v6 || (v6 = FigXPCMessageSetCFString(), v6) || (v6 = FigXPCMessageSetCFDictionary(), v6))
    {
      v5 = v6;
    }

    else
    {
      FigCPEProtectorGetClassID();
      v7 = CMDerivedObjectCreate();
      if (v7 || (v7 = OUTLINED_FUNCTION_2_189(), v7))
      {
        v5 = v7;
      }

      else
      {
        uint64 = xpc_dictionary_get_uint64(0, *MEMORY[0x1E69615A0]);
        *CMBaseObjectGetDerivedStorage() = uint64;
        v5 = FigXPCRemoteClientAssociateObject();
        if (!v5)
        {
          *a4 = 0;
        }
      }
    }
  }

  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v5;
}

uint64_t remoteXPCCPEProtector_Finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigXPCRemoteClientDisassociateObject();
  if (!*(DerivedStorage + 8) && !FigXPCCreateBasicMessage())
  {
    FigXPCRemoteClientSendSyncMessage();
  }

  FigXPCRelease();
  return FigXPCRemoteClientKillServerOnTimeout();
}

uint64_t remoteXPCCPEProtector_CopyProperty(uint64_t a1)
{
  v4 = 0;
  ObjectID = remoteXPCCPEProtector_GetObjectID(a1, &v4);
  if (!ObjectID)
  {
    OUTLINED_FUNCTION_3_158();
    ObjectID = FigXPCSendStdCopyPropertyMessage();
  }

  v2 = ObjectID;
  FigXPCRemoteClientKillServerOnTimeout();
  return v2;
}

uint64_t remoteXPCCPEProtector_SetProperty(uint64_t a1)
{
  v4 = 0;
  ObjectID = remoteXPCCPEProtector_GetObjectID(a1, &v4);
  if (!ObjectID)
  {
    OUTLINED_FUNCTION_3_158();
    ObjectID = FigXPCSendStdSetPropertyMessage();
  }

  v2 = ObjectID;
  FigXPCRemoteClientKillServerOnTimeout();
  return v2;
}

uint64_t remoteXPCCPEProtector_IsApplicationAuthorized(uint64_t a1, unsigned int a2, _DWORD *a3)
{
  v8 = 0;
  if (!a3)
  {
    fig_log_get_emitter();
    ObjectID = FigSignalErrorAtGM();
LABEL_8:
    v6 = ObjectID;
    goto LABEL_6;
  }

  ObjectID = remoteXPCCPEProtector_GetObjectID(a1, &v8);
  if (ObjectID)
  {
    goto LABEL_8;
  }

  OUTLINED_FUNCTION_2_22();
  ObjectID = FigXPCCreateBasicMessage();
  if (ObjectID)
  {
    goto LABEL_8;
  }

  xpc_dictionary_set_uint64(0, "R", a2);
  v6 = OUTLINED_FUNCTION_2_189();
  if (!v6)
  {
    *a3 = xpc_dictionary_get_uint64(0, "A");
  }

LABEL_6:
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v6;
}

uint64_t remoteXPCCPEProtector_IsContentAuthorized(uint64_t a1, unsigned int a2, _DWORD *a3)
{
  v8 = 0;
  ObjectID = remoteXPCCPEProtector_GetObjectID(a1, &v8);
  if (ObjectID || (OUTLINED_FUNCTION_2_22(), ObjectID = FigXPCCreateBasicMessage(), ObjectID))
  {
    v6 = ObjectID;
  }

  else
  {
    xpc_dictionary_set_uint64(0, "R", a2);
    v6 = OUTLINED_FUNCTION_2_189();
    if (!v6)
    {
      *a3 = xpc_dictionary_get_uint64(0, "A");
    }
  }

  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v6;
}

uint64_t remoteXPCCPEProtector_GetAggregateExternalProtectionState(uint64_t a1, _DWORD *a2)
{
  v6 = 0;
  ObjectID = remoteXPCCPEProtector_GetObjectID(a1, &v6);
  if (ObjectID || (OUTLINED_FUNCTION_2_22(), ObjectID = FigXPCCreateBasicMessage(), ObjectID))
  {
    v4 = ObjectID;
  }

  else
  {
    v4 = OUTLINED_FUNCTION_2_189();
    if (!v4)
    {
      *a2 = xpc_dictionary_get_int64(0, "E");
    }
  }

  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v4;
}

uint64_t remoteXPCCPEProtector_CreateCryptor(uint64_t a1, uint64_t a2, unsigned int a3, uint64_t a4, uint64_t a5)
{
  v29 = 0;
  if (!a5)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    ObjectID = FigSignalErrorAtGM();
LABEL_9:
    v5 = ObjectID;
    goto LABEL_7;
  }

  ObjectID = remoteXPCCPEProtector_GetObjectID(a1, &v29);
  if (ObjectID)
  {
    goto LABEL_9;
  }

  OUTLINED_FUNCTION_2_22();
  ObjectID = FigXPCCreateBasicMessage();
  if (ObjectID)
  {
    goto LABEL_9;
  }

  xpc_dictionary_set_uint64(0, "R", a3);
  ObjectID = FigXPCMessageSetCFDictionary();
  if (ObjectID)
  {
    goto LABEL_9;
  }

  v8 = OUTLINED_FUNCTION_2_189();
  v16 = OUTLINED_FUNCTION_10_11(v8, v9, v10, v11, v12, v13, v14, v15, v26, 0);
  if (!v5)
  {
    xpc_dictionary_get_uint64(v16, *MEMORY[0x1E69615A0]);
    v17 = FigCPECryptorRemoteRetainCopiedCryptor();
    OUTLINED_FUNCTION_10_11(v17, v18, v19, v20, v21, v22, v23, v24, v27, v28);
  }

LABEL_7:
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v5;
}

uint64_t FigCPEProtectorXPCRemoteGetObjectID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCPEProtectorXPCRemoteGetObjectID_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteXPCCPEProtector_GetObjectID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void ilktu_didReceiveEvent(uint64_t a1, uint64_t a2, uint64_t a3, const void *a4)
{
  cf = 0;
  if (!*(a1 + 40))
  {
    v7 = *(*(CMBaseObjectGetVTable() + 16) + 24);
    if (v7)
    {
      switch(v7(a4))
      {
        case 1:
          v8 = *(a1 + 32);
          goto LABEL_9;
        case 2:
          v8 = *(a1 + 16);
          goto LABEL_9;
        case 3:
          v8 = *(a1 + 24);
LABEL_9:
          CFArrayAppendValue(v8, a4);
          break;
        case 4:
          *(a1 + 40) = 1;
          v9 = *(*(CMBaseObjectGetVTable() + 16) + 40);
          if (v9)
          {
            v10 = v9(a4);
          }

          else
          {
            v10 = 0;
          }

          AllocatorForMedia = FigGetAllocatorForMedia();
          v12 = *(*(CMBaseObjectGetVTable() + 16) + 56);
          if (v12)
          {
            v12(&v23, a4);
          }

          else
          {
            v23 = *MEMORY[0x1E6960C70];
            v24 = *(MEMORY[0x1E6960C70] + 16);
          }

          v13 = *(*(CMBaseObjectGetVTable() + 16) + 32);
          if (v13)
          {
            v14 = v13(a4);
          }

          else
          {
            v14 = 0;
          }

          v15 = *(*(CMBaseObjectGetVTable() + 40) + 8);
          if (v15)
          {
            v16 = v15(a4);
          }

          else
          {
            v16 = 0;
          }

          v17 = *(*(CMBaseObjectGetVTable() + 40) + 48);
          v18 = 0.0;
          if (v17)
          {
            v18 = v17(a4);
          }

          v19 = *(*(CMBaseObjectGetVTable() + 40) + 16);
          if (v19)
          {
            v20 = v19(a4);
          }

          else
          {
            v20 = 0;
          }

          if (!FigMetricItemInitialLikelyToKeepUpEventCreate(AllocatorForMedia, &v23, v14, v10, v16, v20, *(a1 + 32), *(a1 + 16), v18, *(a1 + 24), &cf))
          {
            v21 = cf;
            v22 = *(*(CMBaseObjectGetVTable() + 16) + 40);
            if (v22)
            {
              v22(a2, 0, v21);
            }
          }

          if (v10)
          {
            CFRelease(v10);
          }

          break;
        default:
          break;
      }
    }

    if (cf)
    {
      CFRelease(cf);
    }
  }
}

uint64_t FigMetricEventInitialLikelyToKeepUpSubscriberCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMetricEventPlaybackSummarySubscriberCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMetricEventDownloadSummarySubscriberCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMetricEventDownloadSummarySubscriberCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t loopingCursorService_CreateCursorAtTrackTime(const void *a1, CMTime *a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v42 = 0;
  CFGetAllocator(a1);
  FigEditCursorGetClassID();
  v7 = CMDerivedObjectCreate();
  if (!v7)
  {
    v8 = CMBaseObjectGetDerivedStorage();
    v9 = v8;
    v11 = *(DerivedStorage + 16);
    v10 = *(DerivedStorage + 32);
    v12 = *DerivedStorage;
    v13 = *(DerivedStorage + 48);
    *(v8 + 48) = v13;
    *(v8 + 16) = v11;
    *(v8 + 32) = v10;
    *v8 = v12;
    if (v13)
    {
      if (!*(v8 + 49))
      {
LABEL_7:
        OUTLINED_FUNCTION_73();
        v26 = CMTimeConvertScale(&time1, &time2, v25, kCMTimeRoundingMethod_RoundTowardNegativeInfinity);
        OUTLINED_FUNCTION_0_210(v26, v27, v28, v29, v30, v31, v32, v33, v37.value, *&v37.timescale, v37.epoch, v38, time2.value, *&time2.timescale, time2.epoch, v40, v34, time1.value);
        v35 = (a2->value / *(v9 + 24)) & ~((a2->value / *(v9 + 24)) >> 63);
        if (*(v9 + 49))
        {
          ++v35;
        }

        goto LABEL_11;
      }

      time1 = *a2;
      v14 = *v8;
      time2.epoch = *(v8 + 16);
      *&time2.value = v14;
      if ((CMTimeCompare(&time1, &time2) & 0x80000000) == 0)
      {
        if (*(v9 + 49))
        {
          OUTLINED_FUNCTION_73();
          v15 = *v9;
          v37.epoch = *(v9 + 16);
          *&v37.value = v15;
          v16 = CMTimeSubtract(&time1, &time2, &v37);
          OUTLINED_FUNCTION_0_210(v16, v17, v18, v19, v20, v21, v22, v23, v37.value, *&v37.timescale, v37.epoch, v38, time2.value, *&time2.timescale, time2.epoch, v40, v24, time1.value);
        }

        goto LABEL_7;
      }
    }

    v35 = 0;
LABEL_11:
    *(v9 + 56) = v35;
    *a3 = v42;
  }

  return v7;
}

uint64_t loopingCursor_Copy(const void *a1, void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFGetAllocator(a1);
  FigEditCursorGetClassID();
  v5 = CMDerivedObjectCreate();
  if (!v5)
  {
    v6 = CMBaseObjectGetDerivedStorage();
    v7 = *(DerivedStorage + 48);
    v8 = *(DerivedStorage + 32);
    v9 = *DerivedStorage;
    *(v6 + 16) = *(DerivedStorage + 16);
    *(v6 + 32) = v8;
    *(v6 + 48) = v7;
    *v6 = v9;
    *(v6 + 56) = *(DerivedStorage + 56);
    *a2 = 0;
  }

  return v5;
}

uint64_t loopingCursorService_CopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

__CFDictionary *_createDefaultMediaSelectionCriteria(const __CFAllocator *a1)
{
  v40[3] = *MEMORY[0x1E69E9840];
  v40[2] = @"public.auxiliary-content";
  Mutable = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!Mutable)
  {
    return Mutable;
  }

  v3 = CFArrayCreateMutable(a1, 0, MEMORY[0x1E695E9C0]);
  v4 = CFLocaleCopyPreferredLanguages();
  v5 = v4;
  if (v4)
  {
    v41.length = CFArrayGetCount(v4);
    v41.location = 0;
    CFArrayAppendArray(v3, v5, v41);
  }

  v6 = OUTLINED_FUNCTION_6_121();
  MediaSelectionCriteria = _createMediaSelectionCriteria(v6, v7, v8, v9, 0, v10, 1);
  if (!MediaSelectionCriteria)
  {
    v23 = 0;
    if (!v3)
    {
      goto LABEL_42;
    }

    goto LABEL_41;
  }

  v12 = MediaSelectionCriteria;
  CFDictionarySetValue(Mutable, @"public.visual", MediaSelectionCriteria);
  v13 = FigMediaAccessibilityCopyPreferredAudibleCharacteristics();
  v14 = OUTLINED_FUNCTION_6_121();
  v19 = _createMediaSelectionCriteria(v14, v15, v16, v17, v13, v18, 1);
  v39 = v13;
  if (!v19)
  {
    v23 = 0;
    v31 = v12;
    v29 = 0;
    v30 = 0;
LABEL_33:
    CFRelease(v31);
    goto LABEL_34;
  }

  v20 = v19;
  v37 = v3;
  v38 = v5;
  CFDictionarySetValue(Mutable, @"public.audible", v19);
  v21 = FigMediaAccessibilityCaptionsDisplayType();
  v40[0] = @"public.auxiliary-content";
  v40[1] = @"public.subtitles.forced-only";
  v22 = CFDictionaryCreateMutable(a1, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  cf = v12;
  if (v22)
  {
    FigCFDictionarySetInt32();
    if (v21 == kMACaptionAppearanceDisplayTypeAlwaysOn)
    {
      v30 = FigMediaAccessibilityCopyPreferredLegibleCharacteristics();
      v32 = v40;
      v33 = 2;
      v31 = FigMediaAccessibilityCopyPreferredLanguages();
      v29 = 0;
      v23 = 0;
    }

    else
    {
      if (v21 == kMACaptionAppearanceDisplayTypeAutomatic)
      {
        v23 = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
        if (v23)
        {
          v24 = FigMediaAccessibilityCopyPreferredLanguages();
          v25 = v24;
          if (v24)
          {
            v42.length = CFArrayGetCount(v24);
            v42.location = 0;
            CFArrayAppendArray(v23, v25, v42);
          }

          v26 = CFLocaleCopyPreferredLanguages();
          v27 = v26;
          if (v26)
          {
            v43.length = CFArrayGetCount(v26);
            v43.location = 0;
            CFArrayAppendArray(v23, v27, v43);
          }

          if (v25)
          {
            CFRelease(v25);
          }

          if (v27)
          {
            CFRelease(v27);
          }

          CFDictionarySetValue(v22, @"fallbackPreferredLanguages", v23);
        }

        v28 = FigMediaAccessibilityCopyPreferredLegibleCharacteristics();
        v29 = v28;
        if (v28 && CFArrayGetCount(v28) >= 1)
        {
          CFDictionarySetValue(v22, @"fallbackPreferredCharacteristics", v29);
        }

        v30 = 0;
        v31 = 0;
      }

      else
      {
        v30 = 0;
        v29 = 0;
        v31 = 0;
        v23 = 0;
      }

      v32 = 0;
      v33 = 0;
    }

    v34 = _createMediaSelectionCriteria(a1, v22, v31, 0, v30, v32, v33);
    if (v34)
    {
      CFDictionarySetValue(Mutable, @"public.legible", v34);
    }
  }

  else
  {
    v30 = 0;
    v29 = 0;
    v31 = 0;
    v34 = 0;
    v23 = 0;
  }

  CFRelease(cf);
  CFRelease(v20);
  if (v34)
  {
    CFRelease(v34);
  }

  if (v22)
  {
    CFRelease(v22);
  }

  v3 = v37;
  v5 = v38;
  if (v31)
  {
    goto LABEL_33;
  }

LABEL_34:
  if (v39)
  {
    CFRelease(v39);
  }

  if (v30)
  {
    CFRelease(v30);
  }

  if (v29)
  {
    CFRelease(v29);
  }

  if (!v3)
  {
    goto LABEL_42;
  }

LABEL_41:
  CFRelease(v3);
LABEL_42:
  if (v5)
  {
    CFRelease(v5);
  }

  if (v23)
  {
    CFRelease(v23);
  }

  return Mutable;
}

__CFDictionary *FigAutomaticMediaSelectionCreateMergedCriteria(const __CFAllocator *a1, const __CFDictionary *a2, const __CFDictionary *a3, const __CFDictionary *a4, const __CFDictionary *a5, const __CFDictionary *a6)
{
  FigNote_AllowInternalDefaultLogs();
  OUTLINED_FUNCTION_7_25();
  fig_note_initialize_category_with_default_work_cf();
  OUTLINED_FUNCTION_7_25();
  fig_note_initialize_category_with_default_work_cf();
  v11 = OUTLINED_FUNCTION_383();
  if (a3)
  {
    MutableCopy = CFDictionaryCreateMutableCopy(v11, v12, a3);
  }

  else
  {
    MutableCopy = CFDictionaryCreateMutable(v11, v12, v13, v14);
  }

  v16 = MutableCopy;
  if (!MutableCopy)
  {
    return v16;
  }

  if (!a6)
  {
    v17 = 0;
    goto LABEL_7;
  }

  if (a2)
  {
    v27 = a5;
    v30 = a1;
    v17 = FigCFDictionaryCreateMutableCopy();
    Count = CFDictionaryGetCount(a6);
    v20 = malloc_type_calloc(Count, 8uLL, 0x80040B8603338uLL);
    v28 = malloc_type_calloc(Count, 8uLL, 0x80040B8603338uLL);
    v29 = v20;
    CFDictionaryGetKeysAndValues(a6, v20, v28);
    if (Count >= 1)
    {
      v21 = v28;
      v22 = v29;
      do
      {
        v23 = *v22;
        Value = CFDictionaryGetValue(a2, *v22);
        if (Value)
        {
          v25 = Value;
          v26 = FigCFDictionaryCreateMutableCopy();
          FigCFDictionaryAddAbsentKeysWithValues(v26, v25);
          CFDictionarySetValue(v17, v23, v26);
          CFRelease(v26);
        }

        ++v21;
        ++v22;
        --Count;
      }

      while (Count);
    }

    free(v29);
    free(v28);
    FigCFDictionaryAddAbsentKeysWithValues(v17, a2);
    a2 = v17;
    a5 = v27;
    a1 = v30;
LABEL_7:
    a6 = a2;
    if (!a2)
    {
      goto LABEL_8;
    }

    goto LABEL_13;
  }

  v17 = 0;
LABEL_13:
  FigCFDictionaryAddAbsentKeysWithValues(v16, a6);
LABEL_8:
  _mergeMediaPresentationArray(a1, v16, @"preferredLanguages", a4);
  _mergeMediaPresentationArray(a1, v16, @"preferredMediaCharacteristics", a5);
  if (v17)
  {
    CFRelease(v17);
  }

  return v16;
}

void FigCFDictionaryAddAbsentKeysWithValues(__CFDictionary *a1, const __CFDictionary *a2)
{
  Count = FigCFDictionaryGetCount();
  v5 = 0;
  if (a1)
  {
    v6 = Count;
    v7 = 0;
    if (Count >= 1)
    {
      v7 = malloc_type_calloc(Count, 8uLL, 0x80040B8603338uLL);
      v5 = malloc_type_calloc(v6, 8uLL, 0x80040B8603338uLL);
      CFDictionaryGetKeysAndValues(a2, v7, v5);
      v8 = 0;
      do
      {
        v9 = v7[v8];
        if (!CFDictionaryContainsKey(a1, v9))
        {
          CFDictionarySetValue(a1, v9, v5[v8]);
        }

        ++v8;
      }

      while (v6 != v8);
    }
  }

  else
  {
    v7 = 0;
  }

  free(v7);

  free(v5);
}

__CFString *FigMediaSelectionArrayCopyDescription(const __CFAllocator *a1, const __CFArray *a2)
{
  Mutable = CFStringCreateMutable(a1, 0);
  if (Mutable)
  {
    v5 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v5, v6, v7, a2);
    if (a2)
    {
      Count = CFArrayGetCount(a2);
      if (Count >= 1)
      {
        v9 = Count;
        for (i = 0; i != v9; ++i)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(a2, i);
          if (i)
          {
            v12 = OUTLINED_FUNCTION_312();
            CFStringAppendFormat(v12, v13, @" ");
          }

          v14 = FigMediaSelectionOptionCopyDescription(a1, ValueAtIndex);
          CFStringAppend(Mutable, v14);
          if (v14)
          {
            CFRelease(v14);
          }
        }
      }
    }

    v15 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v15, v16, v17);
  }

  return Mutable;
}

uint64_t _setupAutomaticMediaSelection()
{
  FigNote_AllowInternalDefaultLogs();
  OUTLINED_FUNCTION_36_8();
  fig_note_initialize_category_with_default_work_cf();
  OUTLINED_FUNCTION_36_8();
  fig_note_initialize_category_with_default_work_cf();
  _MergedGlobals_139 = FigSimpleMutexCreate();
  qword_1ED4CBB68 = FigDispatchQueueCreateWithPriority();
  qword_1ED4CBB60 = _createDefaultMediaSelectionCriteria(*MEMORY[0x1E695E480]);
  CMNotificationCenterGetDefaultLocalCenter();
  CMNotificationCenterAddListener();
  CMNotificationCenterGetDefaultLocalCenter();
  FigGetNotifyingObjectForMediaAccessibilityChanged();
  CMNotificationCenterAddListener();
  CMNotificationCenterGetDefaultLocalCenter();

  return CMNotificationCenterRegisterForBarrierSupport();
}

uint64_t _createSelectedMediaDictionaryForGroupUsingCriteria(uint64_t a1, const __CFDictionary *a2, CFDictionaryRef theDict, int a4, __CFDictionary **a5, _BYTE *a6)
{
  v102 = *MEMORY[0x1E69E9840];
  theDicta = 0;
  v100 = 0;
  v97 = 0;
  values = 0;
  if (!a5)
  {
    return 4294954516;
  }

  *a5 = 0;
  if (!a2)
  {
    return 0;
  }

  v7 = MEMORY[0x1E695E480];
  HIDWORD(v83) = a4;
  if (theDict)
  {
    Value = CFDictionaryGetValue(theDict, @"requiredMediaCharacteristics");
    v15 = CFDictionaryGetValue(theDict, @"premiumMediaCharacteristics");
    v16 = CFDictionaryGetValue(theDict, @"preferredMediaCharacteristics");
    v17 = CFDictionaryGetValue(theDict, @"precludedMediaCharacteristics");
    v87 = v16;
    if (FigCFArrayContainsValue())
    {
      v12 = 0;
    }

    else
    {
      v12 = CFArrayCreate(*v7, kFigStdAssetMediaCharacteristic_TaggedDescribesVideoForAccessibility, 1, MEMORY[0x1E695E9C0]);
    }

    v13 = v17;
    v14 = CFDictionaryGetValue(theDict, @"preferredLanguages");
    v11 = CFDictionaryGetValue(theDict, @"preferredMediaSubTypes");
    v10 = CFDictionaryGetValue(theDict, @"precludedMediaSubTypes");
    v9 = CFDictionaryGetValue(theDict, @"preferMultichannelAudio");
    values = v9;
    v8 = CFDictionaryGetValue(theDict, @"precludeMultichannelAudio");
    v97 = v8;
  }

  else
  {
    v8 = 0;
    v9 = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v87 = 0;
    Value = 0;
    v15 = 0;
  }

  v18 = v15;
  v19 = *MEMORY[0x1E695E4D0];
  if (v9 == *MEMORY[0x1E695E4D0])
  {
    v20 = CFArrayCreate(*v7, &values, 1, MEMORY[0x1E695E9C0]);
    v8 = v97;
  }

  else
  {
    v20 = 0;
  }

  v21 = a2;
  if (v8 == v19)
  {
    v22 = CFArrayCreate(*v7, &v97, 1, MEMORY[0x1E695E9C0]);
  }

  else
  {
    v22 = 0;
  }

  MajorCharacteristicForMediaSelectionGroup = _getMajorCharacteristicForMediaSelectionGroup(a2);
  v96 = 0;
  OUTLINED_FUNCTION_9_82();
  cf = v22;
  BestOptionInGroupUsingCriteria = _findBestOptionInGroupUsingCriteria(a2, Value, v18, v87, v13, v12, v14, v11, v10, v20, v22, v23, v76, v78, &v96 + 1, &v96);
  if (!BestOptionInGroupUsingCriteria)
  {
    v25 = theDicta;
    if (theDicta || !v96)
    {
LABEL_18:
      if (v25)
      {
        v26 = CFDictionaryGetValue(v25, @"MediaSelectionOptionsDebugDescription");
        v27 = a5;
        v28 = a1;
        v29 = v20;
        if (!v26 || (v30 = CFRetain(v26)) == 0)
        {
          v30 = FigCopyGMLoggingDescriptionForOption(v25);
        }

        if (!dword_1EAF17AD8)
        {
          goto LABEL_41;
        }

        v31 = OUTLINED_FUNCTION_1_191();
        if (OUTLINED_FUNCTION_14_68(v31, v32, v33, v34, v35, v36, v37, v38, v72, v73, v74, v75, v77, v79, v80, v81, v82, v83, MajorCharacteristicForMediaSelectionGroup, a5, a1, v87, Value, cf, a6, a2, v94, SWORD2(v94), SBYTE6(v94), HIBYTE(v94), v95))
        {
          v39 = v20;
        }

        else
        {
          v39 = v20 & 0xFFFFFFFE;
        }

        if (!v39)
        {
LABEL_40:
          OUTLINED_FUNCTION_5_135();
          fig_log_call_emit_and_clean_up_after_send_and_compose();
          v21 = v92;
LABEL_41:
          if (v30)
          {
            CFRelease(v30);
          }

          goto LABEL_59;
        }

LABEL_27:
        v101 = 136315650;
        OUTLINED_FUNCTION_3_159();
        _os_log_send_and_compose_impl();
        goto LABEL_40;
      }

      v27 = a5;
      v28 = a1;
      v29 = v20;
      if (HIDWORD(v83))
      {
        v25 = v100;
        if (v100)
        {
          theDicta = v100;
          if (a6)
          {
            *a6 = HIBYTE(v96);
          }

          v40 = CFDictionaryGetValue(v25, @"MediaSelectionOptionsDebugDescription");
          if (!v40 || (v30 = CFRetain(v40)) == 0)
          {
            v30 = FigCopyGMLoggingDescriptionForOption(v25);
          }

          if (!dword_1EAF17AD8)
          {
            goto LABEL_41;
          }

          v41 = OUTLINED_FUNCTION_1_191();
          if (OUTLINED_FUNCTION_14_68(v41, v42, v43, v44, v45, v46, v47, v48, v72, v73, v74, v75, v77, v79, v80, v81, v82, v83, MajorCharacteristicForMediaSelectionGroup, a5, a1, v87, Value, cf, a6, a2, v94, SWORD2(v94), SBYTE6(v94), HIBYTE(v94), v95))
          {
            v49 = v20;
          }

          else
          {
            v49 = v20 & 0xFFFFFFFE;
          }

          if (!v49)
          {
            goto LABEL_40;
          }

          goto LABEL_27;
        }

        if (dword_1EAF17AD8)
        {
          v59 = OUTLINED_FUNCTION_1_191();
          if (OUTLINED_FUNCTION_13_58(v59, v60, v61, v62, v63, v64, v65, v66, v72, v73, v74, v75, v77, v79, v80, v81, v82, v83, MajorCharacteristicForMediaSelectionGroup, a5, a1, v87, Value, cf, a6, a2, v94, SWORD2(v94), SBYTE6(v94), HIBYTE(v94), v95))
          {
            v67 = v21;
          }

          else
          {
            v67 = v21 & 0xFFFFFFFE;
          }

          if (!v67)
          {
            goto LABEL_58;
          }

          goto LABEL_54;
        }
      }

      else if (dword_1EAF17AD8)
      {
        v50 = OUTLINED_FUNCTION_1_191();
        if (OUTLINED_FUNCTION_13_58(v50, v51, v52, v53, v54, v55, v56, v57, v72, v73, v74, v75, v77, v79, v80, v81, v82, v83, MajorCharacteristicForMediaSelectionGroup, a5, a1, v87, Value, cf, a6, a2, v94, SWORD2(v94), SBYTE6(v94), HIBYTE(v94), v95))
        {
          v58 = v21;
        }

        else
        {
          v58 = v21 & 0xFFFFFFFE;
        }

        if (!v58)
        {
          goto LABEL_58;
        }

LABEL_54:
        v101 = 136315394;
        OUTLINED_FUNCTION_4_156();
        _os_log_send_and_compose_impl();
LABEL_58:
        OUTLINED_FUNCTION_5_135();
        fig_log_call_emit_and_clean_up_after_send_and_compose();
        v25 = 0;
        v21 = v93;
LABEL_59:
        SelectedMediaDictionaryForOptionInGroup = _createSelectedMediaDictionaryForOptionInGroup(v28, v25, v21);
        *v27 = SelectedMediaDictionaryForOptionInGroup;
        if (SelectedMediaDictionaryForOptionInGroup)
        {
          v70 = 0;
        }

        else
        {
          v70 = FigSignalErrorAtGM();
        }

        goto LABEL_61;
      }

      v25 = 0;
      goto LABEL_59;
    }

    OUTLINED_FUNCTION_9_82();
    BestOptionInGroupUsingCriteria = _findBestOptionInGroupUsingCriteria(a2, Value, v18, v87, v13, 0, v14, v11, v10, v20, cf, v68, v77, v79, &v96 + 1, 0);
    if (!BestOptionInGroupUsingCriteria)
    {
      v25 = theDicta;
      goto LABEL_18;
    }
  }

  v70 = BestOptionInGroupUsingCriteria;
  v29 = v20;
LABEL_61:
  if (v29)
  {
    CFRelease(v29);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v12)
  {
    CFRelease(v12);
  }

  return v70;
}

uint64_t _findBestOptionInGroupUsingCriteria(const __CFDictionary *a1, CFArrayRef theArray, const __CFArray *a3, const __CFArray *a4, const __CFArray *a5, const __CFArray *a6, uint64_t a7, const __CFArray *a8, const __CFArray *a9, const __CFArray *a10, const __CFArray *a11, const __CFDictionary **a12, const __CFDictionary **a13, unsigned __int8 *a14, BOOL *a15, BOOL *a16)
{
  v117 = 0;
  if (!theArray)
  {
    v103 = 0;
    if (a3)
    {
      goto LABEL_3;
    }

LABEL_5:
    v22 = 1;
    goto LABEL_6;
  }

  v103 = CFArrayGetCount(theArray) != 0;
  if (!a3)
  {
    goto LABEL_5;
  }

LABEL_3:
  v22 = CFArrayGetCount(a3) < 1;
LABEL_6:
  v101 = v22;
  v110 = theArray;
  *a12 = 0;
  *a13 = 0;
  Value = CFDictionaryGetValue(a1, @"MediaSelectionGroupMediaCharacteristics");
  v23 = CFDictionaryGetValue(a1, @"MediaSelectionGroupOptions");
  v102 = a3;
  v114 = v23;
  if (v23)
  {
    Count = CFArrayGetCount(v23);
  }

  else
  {
    Count = 0;
  }

  v25 = a14;
  v26 = MEMORY[0x1E695E480];
  if (a7)
  {
    Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
    if (Count >= 1)
    {
      for (i = 0; i != Count; ++i)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(v114, i);
        _appendOptionLanguages(ValueAtIndex, Mutable);
      }
    }

    v30 = FigCopyRankedLanguagesAccordingToPreferredLanguages();
    if (Mutable)
    {
      CFRelease(Mutable);
    }
  }

  else
  {
    v30 = 0;
  }

  if (Count < 1)
  {
    v89 = 0;
    v90 = 0;
    goto LABEL_127;
  }

  v99 = a4;
  v100 = a8;
  v98 = a7;
  theArraya = v30;
  v31 = 0;
  v32 = 0;
  v113 = 0;
  v33 = 0;
  v116 = 0;
  v105 = 0;
  v115 = *v26;
  v107 = Count;
  do
  {
    v34 = CFArrayGetValueAtIndex(v114, v33);
    v35 = CFDictionaryGetValue(v34, @"MediaSelectionOptionsMediaSubTypes");
    v36 = CFDictionaryGetValue(v34, @"MediaSelectionOptionsAudioChannelLayouts");
    v111 = v35;
    if (v36 && (v37 = v36, (v38 = CFArrayGetCount(v36)) != 0))
    {
      v39 = v38;
      v40 = CFArrayCreateMutable(v115, v38, MEMORY[0x1E695E9C0]);
      if (v40 && v39 >= 1)
      {
        v41 = 0;
        while (1)
        {
          v42 = CFArrayGetValueAtIndex(v37, v41);
          BytePtr = CFDataGetBytePtr(v42);
          if (!BytePtr)
          {
            break;
          }

          v44 = BytePtr;
          if (CFDataGetLength(v42) < 0xC)
          {
            break;
          }

          v45 = *v44;
          if (*v44 <= 2u)
          {
            if (v45)
            {
              if (v45 != 0x10000 || *(v44 + 1) < 4u)
              {
                break;
              }
            }

            else if (*(v44 + 2) <= 2u)
            {
              break;
            }
          }

          v46 = MEMORY[0x1E695E4D0];
LABEL_33:
          CFArrayAppendValue(v40, *v46);
          if (v39 == ++v41)
          {
            goto LABEL_36;
          }
        }

        v46 = MEMORY[0x1E695E4C0];
        goto LABEL_33;
      }
    }

    else
    {
      v40 = 0;
    }

LABEL_36:
    v47 = FigMediaCharacteristicsCreateMediaCharacteristicsForMediaOption(v115, Value, v34, &v117);
    if (v47)
    {
      v96 = v47;
      v30 = theArraya;
      if (theArraya)
      {
        goto LABEL_132;
      }

      goto LABEL_133;
    }

    if (v110 && CFArrayGetCount(v110) >= 1)
    {
      if (!_shouldConsiderOptionWithItems(v117, v110, 0))
      {
        v48 = 1;
        v49 = 1;
        shouldConsiderOptionWithItems = 1;
        goto LABEL_43;
      }

      v48 = 0;
    }

    else
    {
      v48 = 1;
    }

    shouldConsiderOptionWithItems = _shouldConsiderOptionWithItems(v117, 0, a5);
    v49 = shouldConsiderOptionWithItems == 0;
LABEL_43:
    v51 = _shouldConsiderOptionWithItems(v117, 0, a6);
    v52 = 0;
    v53 = 0;
    v54 = v116;
    if (!v51)
    {
      v54 = v116 + 1;
    }

    v116 = v54;
    if (!v51)
    {
      shouldConsiderOptionWithItems = 0;
    }

    if (!v49 && v51)
    {
      v59 = OUTLINED_FUNCTION_312();
      if (_shouldConsiderOptionWithItems(v59, v60, a9) && _shouldConsiderOptionWithItems(v40, 0, a11))
      {
        v61 = v105;
        if (!v105)
        {
          v61 = v34;
        }

        if (v100)
        {
          v62 = _calculatePointsForCandidateItemArrayUsingPreferredItems(v111, v100, 2);
          CFArrayGetCount(v100);
          OUTLINED_FUNCTION_2_190();
          v63 = 2 * v79 + 2;
        }

        else
        {
          v62 = 0;
          v63 = 2;
        }

        if (a10)
        {
          v80 = v63;
          v62 += _calculatePointsForCandidateItemArrayUsingPreferredItems(v40, a10, v63);
          CFArrayGetCount(a10);
          OUTLINED_FUNCTION_2_190();
          v63 = v80 + v80 * v81;
        }

        if (v99)
        {
          v82 = v63;
          v62 += _calculatePointsForCandidateItemArrayUsingPreferredItems(v117, v99, v63);
          CFArrayGetCount(v99);
          OUTLINED_FUNCTION_2_190();
          v63 = v82 + v82 * v83;
        }

        v105 = v61;
        if (v98)
        {
          v112 = v62;
          v64 = v63;
          v65 = CFDictionaryGetValue(v34, @"MediaSelectionOptionsUnicodeLanguageIdentifier");
          if (v65 || (v65 = CFDictionaryGetValue(v34, @"MediaSelectionOptionsUnicodeLanguageCode")) != 0)
          {
            v66 = v65;
            if (!theArraya || (v67 = CFArrayGetCount(theArraya), v118.location = 0, v118.length = v67, FirstIndexOfValue = CFArrayGetFirstIndexOfValue(theArraya, v118, v66), FirstIndexOfValue == -1))
            {
              v70 = 0;
              v69 = v64;
            }

            else
            {
              v69 = v64;
              v70 = (v67 - FirstIndexOfValue) * v64;
            }

            v71 = v70 != 0;
          }

          else
          {
            v71 = 1;
            v69 = v64;
            v70 = v64;
          }

          if (theArraya)
          {
            v72 = CFArrayGetCount(theArraya);
            v69 = v64;
            v73 = v72;
          }

          else
          {
            v73 = 0;
          }

          v62 = v70 + v112;
          v63 = v69 + v69 * ((v73 + v73 * v73) / 2);
        }

        else if (v103)
        {
          v71 = 0;
        }

        else
        {
          v74 = v63;
          if (!CFDictionaryGetValue(v34, @"MediaSelectionOptionsUnicodeLanguageIdentifier"))
          {
            CFDictionaryGetValue(v34, @"MediaSelectionOptionsUnicodeLanguageCode");
          }

          v75 = FigCFEqual();
          v71 = v75 != 0;
          if (v75)
          {
            v76 = v74;
          }

          else
          {
            v76 = 0;
          }

          v62 += v76;
          v63 = 2 * v74;
        }

        if (v102)
        {
          v84 = _calculatePointsForCandidateItemArrayUsingPreferredItems(v117, v102, v63);
          v62 += v84;
          v77 = v84 == 0;
          CFArrayGetCount(v102);
          OUTLINED_FUNCTION_2_190();
          v63 = v86 + v86 * v85;
        }

        else
        {
          v77 = 1;
        }

        if (v48)
        {
          v78 = 0;
        }

        else
        {
          v78 = v63;
        }

        v53 = v62 + v78;
        v52 = !v101 && !v77 || v103 || v71;
        shouldConsiderOptionWithItems = 1;
      }

      else
      {
        shouldConsiderOptionWithItems = 0;
        v53 = 0;
        v52 = 0;
      }
    }

    v55 = CFDictionaryGetValue(v34, @"MediaSelectionOptionsIsDefault");
    Count = v107;
    if (shouldConsiderOptionWithItems && v55)
    {
      v56 = CFBooleanGetValue(v55) != 0;
      v57 = v113;
      v58 = v56 & (v113 == 0);
      v53 += v58;
      if (v58)
      {
        v57 = v34;
      }

      v113 = v57;
    }

    if (v117)
    {
      CFRelease(v117);
      v117 = 0;
    }

    if (v40)
    {
      CFRelease(v40);
    }

    if (v52 && v53 > v31)
    {
      v32 = v34;
      v31 = v53;
    }

    ++v33;
  }

  while (v33 != v107);
  if (v105)
  {
    v87 = v113 == 0;
  }

  else
  {
    v87 = 0;
  }

  if (v87)
  {
    v88 = v105;
  }

  else
  {
    v88 = v113;
  }

  v89 = 0;
  if (!v32)
  {
    v25 = a14;
    v30 = theArraya;
    if (!v88)
    {
      goto LABEL_126;
    }

LABEL_117:
    *a12 = v88;
    v91 = CFDictionaryGetValue(v88, @"MediaSelectionOptionsUnicodeLanguageIdentifier");
    if (v91)
    {
      v92 = a15;
      if (!a15)
      {
        goto LABEL_126;
      }

      v93 = v91;
      if (!v30)
      {
        goto LABEL_126;
      }
    }

    else
    {
      v94 = CFDictionaryGetValue(v88, @"MediaSelectionOptionsUnicodeLanguageCode");
      v92 = a15;
      if (!a15 || !v30)
      {
        goto LABEL_126;
      }

      v93 = v94;
      if (!v94)
      {
        v95 = 0;
        goto LABEL_125;
      }
    }

    v119.length = CFArrayGetCount(v30);
    v119.location = 0;
    v95 = CFArrayContainsValue(v30, v119, v93) != 0;
LABEL_125:
    *v92 = v95;
    goto LABEL_126;
  }

  *a13 = v32;
  v25 = a14;
  v30 = theArraya;
  if (a14 && theArraya)
  {
    v89 = _optionLanguageMatchesLanguageList(v32, theArraya);
  }

  if (v88)
  {
    goto LABEL_117;
  }

LABEL_126:
  v90 = v116;
LABEL_127:
  if (v25)
  {
    *v25 = v89;
  }

  v40 = 0;
  v96 = 0;
  if (a16)
  {
    *a16 = v90 == Count;
  }

  if (v30)
  {
LABEL_132:
    CFRelease(v30);
  }

LABEL_133:
  if (v117)
  {
    CFRelease(v117);
  }

  if (v40)
  {
    CFRelease(v40);
  }

  return v96;
}

uint64_t _shouldConsiderOptionWithItems(const __CFArray *a1, const __CFArray *a2, const __CFArray *a3)
{
  if (!a1)
  {
    return 1;
  }

  if (CFArrayGetCount(a1) < 1)
  {
    return 1;
  }

  if (!a2 || (v5 = CFArrayGetCount(a2), v5 < 1))
  {
LABEL_8:
    if (a3)
    {
      Count = CFArrayGetCount(a3);
      if (Count >= 1)
      {
        v11 = Count;
        v12 = 0;
        while (1)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(a3, v12);
          if (OUTLINED_FUNCTION_12_73(ValueAtIndex))
          {
            break;
          }

          if (v11 == ++v12)
          {
            return 1;
          }
        }

        return 0;
      }
    }

    return 1;
  }

  v6 = v5;
  v7 = 0;
  while (1)
  {
    v8 = CFArrayGetValueAtIndex(a2, v7);
    result = OUTLINED_FUNCTION_12_73(v8);
    if (!result)
    {
      return result;
    }

    if (v6 == ++v7)
    {
      goto LABEL_8;
    }
  }
}

uint64_t _calculatePointsForCandidateItemArrayUsingPreferredItems(const __CFArray *a1, CFArrayRef theArray, uint64_t a3)
{
  if (theArray)
  {
    Count = CFArrayGetCount(theArray);
    if (!a1)
    {
      return 0;
    }
  }

  else
  {
    Count = 0;
    if (!a1)
    {
      return 0;
    }
  }

  v7 = CFArrayGetCount(a1);
  if (Count < 1 || v7 < 1)
  {
    return 0;
  }

  v9 = v7;
  v10 = 0;
  v11 = 0;
  v12 = Count * a3;
  do
  {
    CFArrayGetValueAtIndex(theArray, v11);
    v13 = OUTLINED_FUNCTION_383();
    v17.length = v9;
    if (CFArrayContainsValue(v13, v17, v14))
    {
      v15 = v12;
    }

    else
    {
      v15 = 0;
    }

    v10 += v15;
    ++v11;
    v12 -= a3;
  }

  while (Count != v11);
  return v10;
}

uint64_t FigAutomaticMediaSelectionCreateSelectedMediaArrayForCriteriaWithLegibleFallbackCriteria_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _createAutomaticSelectedMediaArrayForCriteria_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _createAutomaticSelectedMediaArrayForCriteria_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _createAutomaticSelectedMediaArrayForCriteria_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAutomaticMediaSelectionCopyMediaPresentationSettingsForSelectedMedia_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAutomaticMediaSelectionCopyMediaPresentationSettingsForSelectedMedia_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAutomaticMediaSelectionCopyMediaPresentationSettingsForSelectedMedia_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticRenderPipelineInvalidate()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (DerivedStorage)
  {
    v1 = DerivedStorage;
    if (!*DerivedStorage)
    {
      *DerivedStorage = 1;
      if (*(DerivedStorage + 16))
      {
        CMNotificationCenterGetDefaultLocalCenter();
        OUTLINED_FUNCTION_0_212();
        CMNotificationCenterRemoveListener();
      }

      v2 = *(v1 + 56);
      if (v2)
      {
        FigBaseObject = FigRenderPipelineGetFigBaseObject(v2);
        if (FigBaseObject)
        {
          v4 = FigBaseObject;
          v5 = *(*(CMBaseObjectGetVTable() + 8) + 24);
          if (v5)
          {
            v5(v4);
          }
        }
      }

      v6 = *(v1 + 64);
      if (v6)
      {
        FigHapticQueueStop(v6);
      }
    }
  }

  return 0;
}

void FigHapticRenderPipelineFinalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigHapticRenderPipelineInvalidate();
  v1 = DerivedStorage[2];
  if (v1)
  {
    CFRelease(v1);
    DerivedStorage[2] = 0;
  }

  FigSimpleMutexDestroy();
  v2 = DerivedStorage[7];
  if (v2)
  {
    CFRelease(v2);
    DerivedStorage[7] = 0;
  }

  v3 = DerivedStorage[8];
  if (v3)
  {
    CFRelease(v3);
    DerivedStorage[8] = 0;
  }
}

uint64_t FigHapticRenderPipelineSetProperty(uint64_t a1, const void *a2, const void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!DerivedStorage)
  {
    goto LABEL_37;
  }

  v6 = DerivedStorage;
  if (*DerivedStorage || !a2)
  {
    goto LABEL_37;
  }

  if (CFEqual(a2, @"Timebase"))
  {
    if (!a3 || (v7 = CFGetTypeID(a3), v7 == CMTimebaseGetTypeID()))
    {
      v8 = CMBaseObjectGetDerivedStorage();
      FigSimpleMutexLock();
      if (*(v8 + 16))
      {
        CMNotificationCenterGetDefaultLocalCenter();
        OUTLINED_FUNCTION_0_212();
        CMNotificationCenterRemoveListener();
        v9 = *(v8 + 16);
      }

      else
      {
        v9 = 0;
      }

      *(v8 + 16) = a3;
      if (a3)
      {
        CFRetain(a3);
      }

      if (v9)
      {
        CFRelease(v9);
      }

      FigHapticQueueSetTimebase(*(v8 + 64), a3);
      if (*(v8 + 16))
      {
        CMNotificationCenterGetDefaultLocalCenter();
        OUTLINED_FUNCTION_0_212();
        CMNotificationCenterAddListener();
        if (CMTimebaseGetRate(*(v8 + 16)) != 0.0)
        {
          CMNotificationCenterGetDefaultLocalCenter();
          figHapticRenderPipelineEffectiveRateChanged();
        }
      }

      FigSimpleMutexUnlock();
      goto LABEL_23;
    }
  }

  else if (CFEqual(a2, @"ActiveHapticChannelIndex"))
  {
    if (a3)
    {
      v10 = CFGetTypeID(a3);
      if (v10 == CFNumberGetTypeID())
      {
        result = FigHapticQueueSetActiveChannelIndex(*(v6 + 8), a3);
        if (result)
        {
          return result;
        }

        goto LABEL_23;
      }
    }
  }

  else
  {
    if (!CFEqual(a2, @"SoftwareVolume1"))
    {
      if (CFEqual(@"Muted", a2))
      {
        if (!a3)
        {
          goto LABEL_37;
        }

        v15 = CFGetTypeID(a3);
        if (v15 != CFBooleanGetTypeID())
        {
          goto LABEL_37;
        }

        v16 = *(v6 + 8);
        Value = CFBooleanGetValue(a3);
        FigHapticQueueSetIsMuted(v16, Value);
      }

LABEL_23:
      FigBaseObject = FigRenderPipelineGetFigBaseObject(*(v6 + 7));
      v13 = *(*(CMBaseObjectGetVTable() + 8) + 56);
      if (!v13)
      {
        return 4294954514;
      }

      return v13(FigBaseObject, a2, a3);
    }

    if (a3)
    {
      v14 = CFGetTypeID(a3);
      if (v14 == CFNumberGetTypeID())
      {
        result = FigHapticQueueSetVolume(*(v6 + 8), a3);
        if (result)
        {
          return result;
        }

        goto LABEL_23;
      }
    }
  }

LABEL_37:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_2_10();

  return FigSignalErrorAtGM();
}

void figHapticRenderPipelineEffectiveRateChanged()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (CMTimebaseGetRate(*(DerivedStorage + 16)) <= 0.0)
  {
    if (!FigHapticQueuePause(*(DerivedStorage + 64)))
    {
      *(DerivedStorage + 24) = 0;
    }
  }

  else if (!*(DerivedStorage + 24) && !FigHapticQueueStart(*(DerivedStorage + 64)))
  {
    *(DerivedStorage + 24) = 1;
  }
}

uint64_t FigHapticRenderPipelineCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticRenderPipelineCopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticRenderPipelineCopyProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticRenderPipelineCopyProperty_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHapticRenderPipelineCopyProperty_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigEndpointAudioSourceBufferQueueCreate(const __CFAllocator *a1, __int128 *a2, uint64_t a3, void *a4)
{
  FigNote_AllowInternalDefaultLogs();
  OUTLINED_FUNCTION_6_2();
  fig_note_initialize_category_with_default_work_cf();
  OUTLINED_FUNCTION_6_2();
  fig_note_initialize_category_with_default_work_cf();
  if (!a4)
  {
    return 4294950525;
  }

  FigEndpointAudioSourceGetClassID();
  v7 = CMDerivedObjectCreate();
  if (v7)
  {
    return v7;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigCFDictionaryGetBooleanIfPresent();
  *(DerivedStorage + 2) = 0;
  v10 = *a2;
  v9 = a2[1];
  *(DerivedStorage + 40) = *(a2 + 4);
  *(DerivedStorage + 8) = v10;
  *(DerivedStorage + 24) = v9;
  v12 = *a2;
  v11 = a2[1];
  *(DerivedStorage + 80) = *(a2 + 4);
  *(DerivedStorage + 48) = v12;
  *(DerivedStorage + 64) = v11;
  v13 = MEMORY[0x1E6960C70];
  *(DerivedStorage + 156) = *(MEMORY[0x1E6960C70] + 16);
  *(DerivedStorage + 140) = *v13;
  *(DerivedStorage + 136) = 0;
  *(DerivedStorage + 168) = 0;
  *(DerivedStorage + 3) = 1;
  CallbacksForSampleBuffersSortedByOutputPTS = CMBufferQueueGetCallbacksForSampleBuffersSortedByOutputPTS();
  v15 = CMBufferQueueCreate(a1, 0, CallbacksForSampleBuffersSortedByOutputPTS, (DerivedStorage + 120));
  if (!v15)
  {
    bufferQueueSource_setupStats(0);
    *a4 = 0;
  }

  return v15;
}

uint64_t bufferQueueSource_Invalidate()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*DerivedStorage)
  {
    *DerivedStorage = 1;
    OUTLINED_FUNCTION_0_213(DerivedStorage, MEMORY[0x1E6960C70]);
  }

  return 0;
}

void bufferQueueSource_Finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v1 = CMBaseObjectGetDerivedStorage();
  if (!*v1)
  {
    *v1 = 1;
    OUTLINED_FUNCTION_0_213(v1, MEMORY[0x1E6960C70]);
  }

  v2 = DerivedStorage[15];
  if (v2)
  {
    CFRelease(v2);
    DerivedStorage[15] = 0;
  }

  v3 = DerivedStorage[12];
  if (v3)
  {
    CFRelease(v3);
    DerivedStorage[12] = 0;
  }

  v4 = DerivedStorage[11];
  if (v4)
  {
    CFRelease(v4);
    DerivedStorage[11] = 0;
  }
}

__CFString *bufferQueueSource_CopyDebugDescription(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  Mutable = CFStringCreateMutable(*MEMORY[0x1E695E480], 0);
  v4 = Mutable;
  if (!*DerivedStorage)
  {
    CFStringAppendFormat(Mutable, 0, @"<FigEndpointAudioSourceBufferQueue %p (CMBufferQueue %p)>", a1, *(DerivedStorage + 120));
  }

  return v4;
}

uint64_t bufferQueueSource_SetProperty(void *a1, const void *a2, const void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!*DerivedStorage)
  {
    v7 = DerivedStorage;
    if (CFEqual(a2, @"BufferQueue"))
    {
      if (!v7[1])
      {
        if (a3)
        {
          v8 = CFGetTypeID(a3);
          if (v8 == CMBufferQueueGetTypeID())
          {
            v9 = *(v7 + 15);
            *(v7 + 15) = a3;
            CFRetain(a3);
            if (v9)
            {
              CFRelease(v9);
            }

            bufferQueueSource_setupStats(a1);
            return 0;
          }
        }

        return 4294950525;
      }
    }

    else
    {
      if (!CFEqual(a2, @"ContinuousAudioMode"))
      {
        return 4294954512;
      }

      if (!v7[1])
      {
        if (a3)
        {
          v11 = CFGetTypeID(a3);
          if (v11 == CFBooleanGetTypeID())
          {
            result = 0;
            v7[136] = *MEMORY[0x1E695E4D0] == a3;
            return result;
          }
        }

        return 4294950525;
      }
    }

    return 4294950524;
  }

  return FigSignalErrorAtGM();
}

uint64_t bufferQueueSource_Resume()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {

    return FigSignalErrorAtGM();
  }

  else
  {
    if (!*(DerivedStorage + 1))
    {
      *(DerivedStorage + 1) = 1;
      *(DerivedStorage + 112) = 0;
    }

    return 0;
  }
}

uint64_t bufferQueueSource_Suspend()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {

    return FigSignalErrorAtGM();
  }

  else
  {
    if (DerivedStorage[1])
    {
      DerivedStorage[1] = 0;
    }

    return 0;
  }
}

uint64_t bufferQueueSource_Flush()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {

    return FigSignalErrorAtGM();
  }

  else
  {
    v1 = DerivedStorage;
    v2 = *(DerivedStorage + 96);
    if (v2)
    {
      CFRelease(v2);
      *(v1 + 96) = 0;
    }

    *(v1 + 104) = 0;
    v3 = MEMORY[0x1E6960C70];
    *(v1 + 140) = *MEMORY[0x1E6960C70];
    *(v1 + 156) = *(v3 + 16);
    *(v1 + 168) = 0;
    *(v1 + 3) = 1;
    if (*(v1 + 2))
    {
      return 0;
    }

    else
    {
      v4 = *(v1 + 120);

      return CMBufferQueueReset(v4);
    }
  }
}

BOOL bufferQueueSource_CanProduceBytes(uint64_t a1, unint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    TotalSize = 0;
  }

  else
  {
    v4 = DerivedStorage;
    if (a2 <= 1)
    {
      a2 = 1;
    }

    TotalSize = CMBufferQueueGetTotalSize(*(DerivedStorage + 120));
    v6 = *(v4 + 96);
    if (v6)
    {
      TotalSize = CMBlockBufferGetDataLength(v6) + TotalSize - *(v4 + 104);
    }
  }

  return TotalSize >= a2;
}

uint64_t bufferQueueSource_FillBuffer(uint64_t a1, uint64_t a2, size_t a3, size_t *a4, size_t *a5, void *a6, uint64_t a7)
{
  v88 = a4;
  v101 = *MEMORY[0x1E69E9840];
  v89 = a1;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v97 = **&MEMORY[0x1E6960C70];
  v95 = v97;
  v93.epoch = v97.epoch;
  v92 = *(MEMORY[0x1E6960C70] + 8);
  *&v93.value = *&v97.value;
  if (*DerivedStorage || (v14 = DerivedStorage, !*(DerivedStorage + 1)) || !*(DerivedStorage + 32))
  {
    OUTLINED_FUNCTION_1_192();

    return FigSignalErrorAtGM();
  }

  v15 = *(DerivedStorage + 96);
  if (v15)
  {
    DataLength = CMBlockBufferGetDataLength(v15);
  }

  else
  {
    DataLength = 0;
  }

  if (CMBufferQueueGetTotalSize(*(v14 + 120)) + DataLength - *(v14 + 104) <= a3)
  {
    a3 = CMBufferQueueGetTotalSize(*(v14 + 120)) + DataLength - *(v14 + 104);
  }

  v86 = a5;
  v87 = a6;
  if (!a3)
  {
    v18 = 0;
    v19 = 0;
    v73 = 0;
    v21 = 0;
    goto LABEL_60;
  }

  v83 = v7;
  v84 = a7;
  v18 = 0;
  v19 = 0;
  *&v17 = 136315650;
  v85 = v17;
  while (*(v14 + 96))
  {
LABEL_39:
    v66 = *(v14 + 168);
    v67 = a3 - v18;
    if (v66)
    {
      if (v67 >= v66)
      {
        v68 = *(v14 + 168);
      }

      else
      {
        v68 = a3 - v18;
      }

      bzero((a2 + v18), v68);
      *(v14 + 168) -= v68;
    }

    else
    {
      v69 = *(v14 + 104);
      if (v67 >= DataLength - v69)
      {
        v68 = DataLength - v69;
      }

      else
      {
        v68 = a3 - v18;
      }

      result = CMBlockBufferCopyDataBytes(*(v14 + 96), v69, v68, (a2 + v18));
      if (result)
      {
        return result;
      }

      v71 = *(v14 + 104) + v68;
      *(v14 + 104) = v71;
      if (v71 >= DataLength)
      {
        v72 = *(v14 + 96);
        if (v72)
        {
          CFRelease(v72);
          *(v14 + 96) = 0;
        }

        *(v14 + 104) = 0;
      }
    }

    v18 += v68;
    if (v18 >= a3)
    {
      v73 = 0;
      v21 = 0;
      goto LABEL_59;
    }
  }

  v20 = CMBufferQueueDequeueAndRetain(*(v14 + 120));
  v21 = v20;
  if (!v20)
  {
    v73 = 0;
    goto LABEL_59;
  }

  CMSampleBufferGetOutputPresentationTimeStamp(&v97, v20);
  OutputDuration = CMSampleBufferGetOutputDuration(&v93, v21);
  OUTLINED_FUNCTION_3_160(OutputDuration, v23, v24, v25, v26, v27, v28, v29, p_rhs, v82, v83, v84, v85, *(&v85 + 1), v86, v87, v88, v89, v90.value, *&v90.timescale, v90.epoch, v91, v92, *(&v92 + 1), v93.value, *&v93.timescale, v93.epoch, v94, v95.value, *&v95.timescale, v95.epoch, v96, v30, v97.value);
  rhs = v93;
  CMTimeAdd(&v95, &lhs, &rhs);
  if (*(v14 + 3))
  {
    if (dword_1EAF17AF8)
    {
      LODWORD(v90.value) = 0;
      HIBYTE(v91) = 0;
      os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
      value = v90.value;
      v33 = os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, HIBYTE(v91));
      if (v33)
      {
        v42 = value;
      }

      else
      {
        v42 = value & 0xFFFFFFFE;
      }

      if (v42)
      {
        OUTLINED_FUNCTION_3_160(v33, v34, v35, v36, v37, v38, v39, v40, p_rhs, v82, v83, v84, v85, *(&v85 + 1), v86, v87, v88, v89, v90.value, *&v90.timescale, v90.epoch, v91, v92, *(&v92 + 1), v93.value, *&v93.timescale, v93.epoch, v94, v95.value, *&v95.timescale, v95.epoch, v96, v41, v97.value);
        Seconds = CMTimeGetSeconds(&lhs);
        LODWORD(rhs.value) = v85;
        *(&rhs.value + 4) = "bufferQueueSource_FillBuffer";
        LOWORD(rhs.flags) = 2048;
        *(&rhs.flags + 2) = v89;
        HIWORD(rhs.epoch) = 2048;
        v99 = Seconds;
        LODWORD(v82) = 32;
        p_rhs = &rhs;
        _os_log_send_and_compose_impl();
      }

      fig_log_call_emit_and_clean_up_after_send_and_compose();
    }

    *(v14 + 3) = 0;
  }

  if ((*(v14 + 152) & 1) == 0)
  {
    *(v14 + 140) = v97;
  }

  DataBuffer = CMSampleBufferGetDataBuffer(v21);
  if (!DataBuffer)
  {
    *(v14 + 96) = 0;
LABEL_57:
    v74 = FigSignalErrorAtGM();
    goto LABEL_73;
  }

  v45 = CFRetain(DataBuffer);
  *(v14 + 96) = v45;
  if (!v45)
  {
    goto LABEL_57;
  }

  v46 = CMBlockBufferGetDataLength(v45);
  DataLength = v46;
  if (*(v14 + 136) && (*(v14 + 152) & 0x1D) == 1)
  {
    lhs = *(v14 + 140);
    OUTLINED_FUNCTION_2_191(v46, v47, v48, v49, v50, v51, v52, v53, p_rhs, v82, v83, v84, v85, *(&v85 + 1), v86, v87, v88, v89, v90.value, *&v90.timescale, v90.epoch, v91, v92, *(&v92 + 1), v93.value, *&v93.timescale, v93.epoch, v94, v95.value, *&v95.timescale, v95.epoch, v96, *&v97.value);
    v54 = CMTimeCompare(&lhs, &rhs);
    if ((v54 & 0x80000000) != 0)
    {
      OUTLINED_FUNCTION_2_191(v54, v55, v56, v57, v58, v59, v60, v61, p_rhs, v82, v83, v84, v85, *(&v85 + 1), v86, v87, v88, v89, v90.value, *&v90.timescale, v90.epoch, v91, v92, *(&v92 + 1), v93.value, *&v93.timescale, v93.epoch, v94, v95.value, *&v95.timescale, v95.epoch, v96, *&v97.value);
      v90 = *(v14 + 140);
      CMTimeSubtract(&lhs, &rhs, &v90);
      v92 = *&lhs.timescale;
      v62 = *(v14 + 8);
      rhs = lhs;
      CMTimeConvertScale(&lhs, &rhs, v62, kCMTimeRoundingMethod_RoundHalfAwayFromZero);
      v92 = *&lhs.timescale;
      *(v14 + 168) = lhs.value * *(v14 + 32);
    }

    *(v14 + 140) = v95;
  }

  FormatDescription = CMSampleBufferGetFormatDescription(v21);
  if (!FigCFEqual())
  {
    v64 = *(v14 + 88);
    *(v14 + 88) = FormatDescription;
    if (FormatDescription)
    {
      CFRetain(FormatDescription);
    }

    if (v64)
    {
      CFRelease(v64);
    }
  }

  StreamBasicDescription = CMAudioFormatDescriptionGetStreamBasicDescription(FormatDescription);
  v19 = StreamBasicDescription;
  if (!StreamBasicDescription || !memcmp(StreamBasicDescription, (v14 + 48), 0x28uLL))
  {
    CFRelease(v21);
    goto LABEL_39;
  }

  v73 = 1;
LABEL_59:
  a7 = v84;
LABEL_60:
  v75 = *(v14 + 72);
  if (v88)
  {
    *v88 = v18;
  }

  v76 = v18 / v75;
  if (v86)
  {
    *v86 = v76;
  }

  if (v87)
  {
    *v87 = *(v14 + 112);
  }

  if (a7)
  {
    v77 = *(v14 + 48);
    v78 = *(v14 + 64);
    *(a7 + 32) = *(v14 + 80);
    *a7 = v77;
    *(a7 + 16) = v78;
  }

  if (!v19)
  {
    v73 = 0;
  }

  if (v73 == 1)
  {
    v79 = *&v19->mSampleRate;
    v80 = *&v19->mBytesPerPacket;
    *(v14 + 80) = *&v19->mBitsPerChannel;
    *(v14 + 48) = v79;
    *(v14 + 64) = v80;
  }

  v74 = 0;
  result = 0;
  *(v14 + 112) += v76;
  if (v21)
  {
LABEL_73:
    CFRelease(v21);
    return v74;
  }

  return result;
}

uint64_t bufferQueueSource_CopyProperty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t bufferQueueSource_GetAudioFormat_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t collector_CollectForVideoSampleBuffer(uint64_t a1, opaqueCMSampleBuffer *a2, CFTypeRef *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 8) && (v7 = DerivedStorage, collectorPendingSampleArray_appendSampleBuffer(*(DerivedStorage + 248), a2, 1), (v8 = *(v7 + 248)) != 0) && CFArrayGetCount(v8) == 1)
  {
    result = FigCFArrayGetFirstValue();
    if (!result)
    {
      return result;
    }

    v10 = result;
    v11 = *(v7 + 296);
    v14 = *(v10 + 8);
    v13 = *(v10 + 32);
    v12 = collectorPendingSampleArray_searchForPendingSampleAtPTSWithDuration(v11, &v14, &v13, 0, 1u);
    if (v12)
    {
      *(v7 + 336) = 1;
      *(v7 + 328) = v12;
      result = collector_updateVideoSampleAttachmentsWithMetadataSample(a1, *v10, *v12);
      if (!result)
      {
        *a3 = CFRetain(*v10);
        CFArrayRemoveValueAtIndex(*(v7 + 248), 0);
        return 0;
      }

      return result;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
  }

  return FigSignalErrorAtGM();
}

opaqueCMSampleBuffer *collectorPendingSampleArray_appendSampleBuffer(void *a1, CMSampleBufferRef sbuf, int a3)
{
  sampleBufferOut = 0;
  if (a1)
  {
    v3 = sbuf;
    if (!sbuf)
    {
      return v3;
    }

    if (CMSampleBufferGetNumSamples(sbuf) <= 1)
    {
      if (a3)
      {
        v7 = CFGetAllocator(a1);
        v3 = CMSampleBufferCreateCopy(v7, v3, &sampleBufferOut);
        v9 = sampleBufferOut;
        if (!v3)
        {
          collectorPendingSampleArray_appendSingleSampleSampleBuffer(sampleBufferOut, v8, a1);
          v9 = sampleBufferOut;
        }

        if (v9)
        {
          CFRelease(v9);
        }
      }

      else
      {
        collectorPendingSampleArray_appendSingleSampleSampleBuffer(v3, v6, a1);
        return 0;
      }

      return v3;
    }

    return CMSampleBufferCallForEachSample(v3, collectorPendingSampleArray_appendSingleSampleSampleBuffer, a1);
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }
}

uint64_t collector_Reset(const void *a1, int a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  v5 = *(DerivedStorage + 80);
  *(DerivedStorage + 80) = 0;
  FigMemoryBarrier();
  collector_tearDownAsyncProcessState(a1);
  v6 = CMBufferQueueReset(*(DerivedStorage + 48));
  if (v6)
  {
    goto LABEL_9;
  }

  if (a2)
  {
    v7 = *(DerivedStorage + 32);
    if (v7)
    {
      v8 = *(*(CMBaseObjectGetVTable() + 16) + 72);
      if (!v8)
      {
        v9 = 4294954514;
        goto LABEL_8;
      }

      v6 = v8(v7);
      if (v6)
      {
LABEL_9:
        v9 = v6;
        goto LABEL_8;
      }
    }
  }

  collector_setUpAsyncProcessState(a1);
  *(DerivedStorage + 80) = v5;
  FigMemoryBarrier();
  v9 = 0;
LABEL_8:
  FigSimpleMutexUnlock();
  return v9;
}

uint64_t FigSampleAttachmentCollectorCreateSynchronous_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSampleAttachmentCollectorCreateAsynchronous_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSampleAttachmentCollectorCreateAsynchronous_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSampleAttachmentCollectorCreateAsynchronous_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSampleAttachmentCollectorCreateAsynchronous_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t collector_createMetadataBufferProvidersAndInstallTriggers_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t collector_processAsynchronouslyUntilHighWaterMet_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t collector_processAsynchronouslyUntilHighWaterMet_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t collector_CopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t collectorSearchWindow_teardown_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t collector_triggerAsyncProcessing_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t collector_handleMetadataBufferQueueConduitNotifications_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

double collector_setUpAsyncProcessState_cold_1(uint64_t a1, uint64_t a2, _BYTE *a3, const void *a4)
{
  fig_log_get_emitter();
  FigSignalErrorAtGM();
  *(a2 + 200) = 0;
  fig_log_get_emitter();
  FigSignalErrorAtGM();
  if (!*a3)
  {
    return collector_tearDownAsyncProcessState(a4);
  }

  return result;
}

uint64_t pendingSampleArray_RetainCallBack_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t pendingSampleArray_ReleaseCallBack_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t collectorSearchWindowArray_RetainCallback_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t collectorSearchWindowArray_ReleaseCallback_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigCPEExternalProtectionMonitorCopyProperty(uint64_t a1, CFTypeRef cf1, uint64_t a3, uint64_t a4)
{
  result = 4294955146;
  if (cf1 && a4)
  {
    if (CFEqual(cf1, @"DisplayList"))
    {
      v7[0] = a1;
      v7[1] = a4;
      dispatch_sync_f(*(a1 + 136), v7, figCPEExternalProtectionMonitorCopyProperty_DisplayListFunc);
      return 0;
    }

    else
    {
      return 4294955144;
    }
  }

  return result;
}

uint64_t FigCPEExternalProtectionMonitorSetProperty(dispatch_queue_t *a1, CFTypeRef cf1, CFArrayRef Copy)
{
  if (!cf1)
  {
    return 4294955146;
  }

  if (!CFEqual(cf1, @"DisplayList"))
  {
    return 4294955144;
  }

  if (!Copy)
  {
LABEL_6:
    CFRetain(a1);
    v6 = malloc_type_calloc(1uLL, 0x10uLL, 0x60040FAFB2B2FuLL);
    *v6 = a1;
    v6[1] = Copy;
    dispatch_async_f(a1[17], v6, figCPEExternalProtectionMonitorSetProperty_DisplayListFunc);
    return 0;
  }

  v5 = CFGetTypeID(Copy);
  if (v5 != CFArrayGetTypeID())
  {
    return 4294955136;
  }

  Copy = CFArrayCreateCopy(*MEMORY[0x1E695E480], Copy);
  if (Copy)
  {
    goto LABEL_6;
  }

  return 4294955145;
}

uint64_t FigCPEExternalProtectionMonitorGetSerializationToken(uint64_t a1, uint64_t *a2)
{
  if (!a2)
  {
    return 4294955146;
  }

  v2 = *(a1 + 112);
  if (!v2)
  {
    return 4294954514;
  }

  v4 = v2(*(a1 + 32));
  result = 0;
  *a2 = v4;
  return result;
}

uint64_t FigCPEExternalProtectionMonitorCreateWithCallbacks(const __CFAllocator *a1, void *a2, void *a3, uint64_t *a4)
{
  DefaultLocalCenter = CMNotificationCenterGetDefaultLocalCenter();
  FigNote_AllowInternalDefaultLogs();
  OUTLINED_FUNCTION_10_65();
  fig_note_initialize_category_with_default_work_cf();
  OUTLINED_FUNCTION_10_65();
  fig_note_initialize_category_with_default_work_cf();
  if (!a4)
  {
    return 4294955146;
  }

  if (_MergedGlobals_140 != -1)
  {
    OUTLINED_FUNCTION_0_214();
    dispatch_once_f(v19, v20, v21);
  }

  Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    return 4294955145;
  }

  v10 = Instance;
  v11 = CMNotificationCenterRegisterForBarrierSupport();
  if (v11)
  {
    goto LABEL_19;
  }

  *(v10 + 16) = DefaultLocalCenter;
  if (!a3)
  {
    *(v10 + 24) = 0;
    __copy_constructor_4_4_t0w8_pa0_40645_8_pa0_52250_16_pa0_9000_24_pa0_19123_32_pa0_44644_40_pa0_37391_48_pa0_21958_56_pa0_35156_64_pa0_50984_72_pa0_62454_80_pa0_21147_88_pa0_17571_96((v10 + 32), a2);
    v13 = dispatch_queue_create("com.apple.figcpeepm.pool", 0);
    *(v10 + 136) = v13;
    if (!v13)
    {
      goto LABEL_18;
    }

    if (qword_1ED4CBB80 != -1)
    {
      dispatch_once_f(&qword_1ED4CBB80, 0, FigCPEExternalProtectionMonitorPoolDataRegisterClass);
    }

    v14 = _CFRuntimeCreateInstance();
    *(v10 + 144) = v14;
    if (!v14 || (v14[8] = 0, dispatch_set_context(*(v10 + 136), v14), dispatch_set_finalizer_f(*(v10 + 136), finalizePoolQueue), Mutable = CFSetCreateMutable(a1, 0, 0), (*(*(v10 + 144) + 24) = Mutable) == 0) || (v16 = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, 0, MEMORY[0x1E695E9E8]), (*(*(v10 + 144) + 56) = v16) == 0))
    {
LABEL_18:
      v17 = 4294955145;
LABEL_20:
      CFRelease(v10);
      return v17;
    }

    v11 = CMNotificationCenterRegisterForBarrierSupport();
    if (!v11)
    {
      *(*(v10 + 144) + 16) = DefaultLocalCenter;
      goto LABEL_16;
    }

LABEL_19:
    v17 = v11;
    goto LABEL_20;
  }

  *(v10 + 24) = CFRetain(a3);
  __copy_constructor_4_4_t0w8_pa0_40645_8_pa0_52250_16_pa0_9000_24_pa0_19123_32_pa0_44644_40_pa0_37391_48_pa0_21958_56_pa0_35156_64_pa0_50984_72_pa0_62454_80_pa0_21147_88_pa0_17571_96((v10 + 32), a2);
  v12 = a3[17];
  *(v10 + 136) = v12;
  dispatch_retain(v12);
  *(v10 + 144) = a3[18];
LABEL_16:
  dispatch_sync_f(*(v10 + 136), v10, figCPEExternalProtectionMonitorCreateWithCallbacksFunc);
  v17 = 0;
  *a4 = v10;
  return v17;
}

uint64_t OctaviaGetStatus(int a1, CFArrayRef theArray, _BYTE *a3)
{
  theSourceBuffer = 0;
  cf = 0;
  destination = 0;
  *a3 = 1;
  if (theArray && CFArrayGetCount(theArray) >= 1 && (SerializedAtomDataBlockBufferForCFType = FigRemote_CreateSerializedAtomDataBlockBufferForCFType()) != 0)
  {
    v6 = SerializedAtomDataBlockBufferForCFType;
  }

  else
  {
    v5 = NeroTransportSendSyncMessageCreatingReply();
    if (v5 == -12031)
    {
      destination = 1;
LABEL_9:
      v6 = 0;
      *a3 = 0;
      goto LABEL_10;
    }

    v6 = v5;
    if (!v5)
    {
      v6 = CMBlockBufferCopyDataBytes(theSourceBuffer, 0, 4uLL, &destination);
      if (!v6 && destination == 1)
      {
        goto LABEL_9;
      }
    }
  }

LABEL_10:
  if (cf)
  {
    CFRelease(cf);
  }

  if (theSourceBuffer)
  {
    CFRelease(theSourceBuffer);
  }

  if (v6)
  {
    return 0;
  }

  else
  {
    return destination;
  }
}

uint64_t OctaviaGetAliasedStatus(int a1, const __CFArray *a2, _BYTE *a3)
{
  LODWORD(result) = OctaviaGetStatus(a1, a2, a3);
  if (result == 2)
  {
    return 3;
  }

  else
  {
    return result;
  }
}

void figAssetExportSession_getAverageVideoBitRateForSourceAndPreset(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, double a5, double a6, float a7)
{
  cf = 0;
  if (!a3)
  {
    OUTLINED_FUNCTION_374();
    goto LABEL_24;
  }

  if (!a2)
  {
    goto LABEL_7;
  }

  v13 = *(*(CMBaseObjectGetVTable() + 16) + 40);
  if (!v13 || v13(a1, a2, &cf) || !cf)
  {
    OUTLINED_FUNCTION_374();
LABEL_24:
    FigSignalErrorAtGM();
    goto LABEL_31;
  }

  figAssetExportSession_trackContainsStereoVideo(cf);
LABEL_7:
  FigExportSettingsAverageBitRateForSourceAndExportPreset(a4, a5, a6, a7);
  if (FigCFEqual() || FigCFEqual() || FigCFEqual())
  {
    v14 = 0;
    if (!a2)
    {
      goto LABEL_31;
    }
  }

  else
  {
    v14 = FigCFEqual() == 0;
    if (!a2)
    {
      goto LABEL_31;
    }
  }

  if (v14)
  {
    goto LABEL_31;
  }

  theArray = 0;
  FigAssetTrackGetCMBaseObject(cf);
  if (!*(*(CMBaseObjectGetVTable() + 8) + 48))
  {
    goto LABEL_25;
  }

  v15 = OUTLINED_FUNCTION_308();
  if (v16(v15))
  {
    goto LABEL_25;
  }

  if (!theArray)
  {
LABEL_29:
    FigAssetTrackGetCMBaseObject(cf);
    if (*(*(CMBaseObjectGetVTable() + 8) + 48))
    {
      v24 = OUTLINED_FUNCTION_308();
      v25(v24);
    }

    goto LABEL_31;
  }

  Count = CFArrayGetCount(theArray);
  v18 = Count - 1;
  if (Count < 1)
  {
LABEL_25:
    v22 = 1;
  }

  else
  {
    v19 = 0;
    do
    {
      ValueAtIndex = CFArrayGetValueAtIndex(theArray, v19);
      MediaSubType = CMFormatDescriptionGetMediaSubType(ValueAtIndex);
      v22 = MediaSubType != 1752589105;
    }

    while (MediaSubType != 1752589105 && v18 != v19++);
  }

  if (theArray)
  {
    CFRelease(theArray);
  }

  if (v22)
  {
    goto LABEL_29;
  }

LABEL_31:
  if (cf)
  {
    CFRelease(cf);
  }

  OUTLINED_FUNCTION_121_3();
}

void FigAssetExportSessionGetAverageVideoBitRateForSourceAndPreset(double a1, double a2, float a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v12 = *(DerivedStorage + 72);
  v13 = *(DerivedStorage + 16);

  figAssetExportSession_getAverageVideoBitRateForSourceAndPreset(v13, a5, v12, a6, a1, a2, a3);
}

void figAssetExportSession_CreateAllPresetsOnce(CFArrayRef *a1)
{
  __dst[34] = *MEMORY[0x1E69E9840];
  cf = 0;
  v29 = 0;
  theArray = 0;
  v2 = *MEMORY[0x1E695E480];
  v3 = OUTLINED_FUNCTION_262_1();
  v4 = MEMORY[0x19A8D1510](v3);
  v5 = OUTLINED_FUNCTION_262_1();
  v6 = MEMORY[0x19A8D1510](v5);
  if (!(v4 | v6))
  {
    goto LABEL_23;
  }

  v7 = v6;
  memcpy(__dst, off_1E7497DE8, 0x110uLL);
  v8 = FigCFDictionaryCopyArrayOfKeys();
  v9 = FigCFDictionaryCopyArrayOfKeys();
  v10 = MEMORY[0x1E695E9F8];
  cf = CFSetCreateMutable(v2, 0, MEMORY[0x1E695E9F8]);
  v11 = CFSetCreate(v2, __dst, 34, v10);
  v29 = v11;
  Mutable = CFArrayCreateMutable(v2, 0, MEMORY[0x1E695E9C0]);
  theArray = Mutable;
  if (!cf || !v11 || !Mutable)
  {
    OUTLINED_FUNCTION_374();
    FigSignalErrorAtGM();
    if (!v4)
    {
      goto LABEL_17;
    }

    goto LABEL_16;
  }

  if (v8)
  {
    CFArrayGetCount(v8);
  }

  OUTLINED_FUNCTION_28_34();
  v32.location = 0;
  CFArrayApplyFunction(v8, v32, v13, v14);
  if (v9)
  {
    CFArrayGetCount(v9);
  }

  OUTLINED_FUNCTION_28_34();
  v15 = OUTLINED_FUNCTION_383();
  CFArrayApplyFunction(v15, v33, v16, v17);
  if (theArray)
  {
    Count = CFArrayGetCount(theArray);
    v19 = theArray;
  }

  else
  {
    v19 = 0;
    Count = 0;
  }

  MutableCopy = CFArrayCreateMutableCopy(v2, Count, v19);
  v21 = MutableCopy;
  if (MutableCopy)
  {
    CFArrayGetCount(MutableCopy);
    v22 = OUTLINED_FUNCTION_24_36();
    CFArraySortValues(v22, v34, v23, 0);
    AllocatorForPermanentAllocations = FigGetAllocatorForPermanentAllocations();
    *a1 = CFArrayCreateCopy(AllocatorForPermanentAllocations, v21);
    CFRelease(v21);
    if (!v4)
    {
      goto LABEL_17;
    }

    goto LABEL_16;
  }

  v25 = OUTLINED_FUNCTION_24_36();
  v35.length = 0;
  CFArraySortValues(v25, v35, v26, 0);
  v27 = FigGetAllocatorForPermanentAllocations();
  *a1 = CFArrayCreateCopy(v27, 0);
  if (v4)
  {
LABEL_16:
    CFRelease(v4);
  }

LABEL_17:
  if (v7)
  {
    CFRelease(v7);
  }

  if (v8)
  {
    CFRelease(v8);
  }

  if (v9)
  {
    CFRelease(v9);
  }

LABEL_23:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v29)
  {
    CFRelease(v29);
  }

  if (theArray)
  {
    CFRelease(theArray);
  }
}

void figAssetExportSession_SetProperty(uint64_t a1, const void *a2, const __CFString *a3)
{
  if (a1 && a2)
  {
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    v7 = CFEqual(@"kFigAssetExportSessionProperty_OutputFileType", a2);
    v8 = MEMORY[0x1E695E480];
    if (v7 || CFEqual(@"kFigAssetExportSessionProperty_OutputURL", a2) || CFEqual(@"kFigAssetExportSessionProperty_FileLengthLimit", a2) || CFEqual(@"kFigAssetExportSessionProperty_MaximizePowerEfficiency", a2) || CFEqual(@"kFigAssetExportSessionProperty_AudioTimePitchAlgorithm", a2) || CFEqual(@"kFigAssetExportSessionProperty_CanPerformMultiplePassesOverSourceMediaData", a2) || CFEqual(@"kFigAssetExportSessionProperty_DirectoryForTemporaryFiles", a2) || CFEqual(@"kFigAssetExportSessionProperty_MinVideoFrameDuration", a2) || CFEqual(@"kFigAssetExportSessionProperty_VideoFrameRateConversionAlgorithm", a2) || CFEqual(@"kFigAssetExportSessionProperty_Metadata", a2) || CFEqual(@"kFigAssetExportSessionProperty_MetadataItemFilterAllowList", a2) || CFEqual(@"kFigAssetExportSessionProperty_AudioMix", a2) || CFEqual(@"kFigAssetExportSessionProperty_TimeRange", a2) || CFEqual(@"kFigAssetExportSessionProperty_VideoComposition", a2) || CFEqual(@"kFigAssetExportSessionProperty_PreserveSyncFrames", a2) || CFEqual(@"kFigAssetExportSessionProperty_UseHardwareVideoEncoderIfAvailable", a2) || CFEqual(@"kFigAssetExportSessionProperty_ShouldOptimizeForNetworkUse", a2) || CFEqual(@"kFigAssetExportSessionProperty_EnableDecodeAppleOnlySWAV1", a2) || CFEqual(@"kFigAssetExportSessionProperty_AudioTrackGroupOutputHandling", a2) || CFEqual(@"kFigAssetExportSessionProperty_AllowsParallelizedExport", a2) || CFEqual(@"kFigAssetExportSessionProperty_ResumableSessionName", a2))
    {
      valuePtr = 0;
      number.start.value = 0;
      v9 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (!v9 || v9(a1, @"kFigAssetExportSessionProperty_Status", *v8, &number))
      {
        goto LABEL_36;
      }

      CFNumberGetValue(number.start.value, kCFNumberSInt32Type, &valuePtr);
      CFRelease(number.start.value);
      if (valuePtr)
      {
        goto LABEL_136;
      }
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_OutputFileType", a2))
    {
      if (FigCFEqual())
      {
        goto LABEL_36;
      }

      if (!a3)
      {
        v23 = *(DerivedStorage + 176);
        *(DerivedStorage + 176) = 0;
        if (!v23)
        {
LABEL_54:
          if (!a3)
          {
LABEL_36:
            OUTLINED_FUNCTION_121_3();
            return;
          }

LABEL_55:
          CFRelease(a3);
          goto LABEL_36;
        }

LABEL_53:
        CFRelease(v23);
        goto LABEL_54;
      }

      number.start.value = 0;
      v10 = CFGetTypeID(a3);
      if (v10 == CFStringGetTypeID())
      {
        v11 = *v8;
        v12 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (v12)
        {
          v12(a1, @"kFigAssetExportSessionProperty_SupportedFileTypes", v11, &number);
          if (!number.start.value)
          {
            goto LABEL_136;
          }

          Count = CFArrayGetCount(number.start.value);
          if (Count < 1)
          {
            v15 = 0;
          }

          else
          {
            v14 = Count;
            CFArrayGetValueAtIndex(number.start.value, 0);
            if (FigCFEqual())
            {
              v15 = 1;
            }

            else
            {
              v26 = 1;
              do
              {
                v27 = v26;
                if (v14 == v26)
                {
                  break;
                }

                CFArrayGetValueAtIndex(number.start.value, v26);
                v28 = FigCFEqual();
                v26 = v27 + 1;
              }

              while (!v28);
              v15 = v27 < v14;
            }
          }
        }

        else
        {
          v15 = 0;
        }

        if (number.start.value)
        {
          CFRelease(number.start.value);
        }

        if (v15)
        {
          v20 = OUTLINED_FUNCTION_104_0();
          Copy = CFStringCreateCopy(v20, v21);
          if (Copy)
          {
            a3 = Copy;
            v23 = *(DerivedStorage + 176);
            *(DerivedStorage + 176) = Copy;
            CFRetain(Copy);
            if (!v23)
            {
              goto LABEL_54;
            }

            goto LABEL_53;
          }
        }
      }

LABEL_136:
      OUTLINED_FUNCTION_239();
      FigSignalErrorAtGM();
      goto LABEL_36;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_OutputURL", a2))
    {
      if (FigCFEqual())
      {
        goto LABEL_36;
      }

      if (!a3)
      {
        goto LABEL_136;
      }

      v16 = CFGetTypeID(a3);
      if (v16 != CFURLGetTypeID())
      {
        goto LABEL_136;
      }

      v17 = CFURLCopyAbsoluteURL(a3);
      if (!v17)
      {
        goto LABEL_136;
      }

      a3 = v17;
      v18 = *(DerivedStorage + 88);
      *(DerivedStorage + 88) = v17;
      CFRetain(v17);
      if (v18)
      {
        CFRelease(v18);
      }

LABEL_44:
      v19 = a3;
      goto LABEL_45;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_ShouldOptimizeForNetworkUse", a2))
    {
      if (a3)
      {
        v24 = CFGetTypeID(a3);
        if (v24 == CFBooleanGetTypeID())
        {
          *(DerivedStorage + 432) = a3;
          goto LABEL_36;
        }
      }

      goto LABEL_136;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_PreserveSyncFrames", a2))
    {
      if (a3)
      {
        v25 = CFGetTypeID(a3);
        if (v25 == CFBooleanGetTypeID())
        {
          *(DerivedStorage + 344) = a3;
          goto LABEL_36;
        }
      }

      goto LABEL_136;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_UseHardwareVideoEncoderIfAvailable", a2))
    {
      if (a3)
      {
        v29 = CFGetTypeID(a3);
        if (v29 == CFBooleanGetTypeID())
        {
          *(DerivedStorage + 352) = a3;
          goto LABEL_36;
        }
      }

      goto LABEL_136;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_Error", a2))
    {
      if (!a3 || (v30 = CFGetTypeID(a3), v30 == CFErrorGetTypeID()))
      {
        figAssetExportSession_DeliverParentExportNotification(DerivedStorage, 0, @"kFigAssetExportSessionProperty_Error");
        figAssetExportSession_DeliverParentExportNotification(DerivedStorage, 0, @"kFigAssetExportSessionProperty_Status");
        FigReadWriteLockLockForWrite();
        if (FigCFEqual())
        {
          FigReadWriteLockUnlockForWrite();
        }

        else
        {
          v33 = *(DerivedStorage + 56);
          *(DerivedStorage + 56) = a3;
          if (a3)
          {
            CFRetain(a3);
          }

          if (v33)
          {
            CFRelease(v33);
          }

          if (*(DerivedStorage + 48) || !*(DerivedStorage + 56))
          {
            FigReadWriteLockUnlockForWrite();
            v34 = @"kFigAssetExportSessionProperty_Error";
          }

          else
          {
            *(DerivedStorage + 48) = 5;
            FigReadWriteLockUnlockForWrite();
            figAssetExportSession_DeliverParentExportNotification(DerivedStorage, 1, @"kFigAssetExportSessionProperty_Error");
            v34 = @"kFigAssetExportSessionProperty_Status";
          }

          figAssetExportSession_DeliverParentExportNotification(DerivedStorage, 1, v34);
        }

        goto LABEL_36;
      }

      goto LABEL_136;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_TimeRange", a2))
    {
      if (a3)
      {
        v31 = CFGetTypeID(a3);
        if (v31 == CFDictionaryGetTypeID())
        {
          CMTimeRangeMakeFromDictionary(&number, a3);
          v32 = *&number.start.epoch;
          *(DerivedStorage + 240) = *&number.start.value;
          *(DerivedStorage + 256) = v32;
          *(DerivedStorage + 272) = *&number.duration.timescale;
          goto LABEL_36;
        }
      }

      goto LABEL_136;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_FileLengthLimit", a2))
    {
      if (a3)
      {
        v36 = CFGetTypeID(a3);
        if (v36 == CFNumberGetTypeID())
        {
          CFNumberGetValue(a3, kCFNumberSInt64Type, (DerivedStorage + 360));
          goto LABEL_36;
        }
      }

      goto LABEL_136;
    }

    if (CFEqual(@"kFigAssetExportSessionProperty_MaximizePowerEfficiency", a2))
    {
      if (!a3)
      {
        goto LABEL_136;
      }

      v37 = CFGetTypeID(a3);
      if (v37 != CFBooleanGetTypeID())
      {
        goto LABEL_136;
      }

      v38 = *(DerivedStorage + 368);
      *(DerivedStorage + 368) = a3;
    }

    else if (CFEqual(@"kFigAssetExportSessionProperty_MinimizeMemoryUsage", a2))
    {
      if (!a3)
      {
        goto LABEL_136;
      }

      v39 = CFGetTypeID(a3);
      if (v39 != CFBooleanGetTypeID())
      {
        goto LABEL_136;
      }

      v40 = *(DerivedStorage + 40);
      if (v40)
      {
        FigBaseObject = FigRemakerGetFigBaseObject(v40);
        CMBaseObjectSetProperty(FigBaseObject, @"Remaker_MinimizeMemoryUsage", a3);
      }

      v38 = *(DerivedStorage + 376);
      *(DerivedStorage + 376) = a3;
    }

    else
    {
      if (CFEqual(@"kFigAssetExportSessionProperty_Metadata", a2))
      {
        if (FigCFEqual())
        {
          goto LABEL_36;
        }

        if (a3)
        {
          v42 = CFGetTypeID(a3);
          if (v42 != CFArrayGetTypeID())
          {
            goto LABEL_136;
          }

          v43 = CFArrayCreateCopy(*v8, a3);
          if (!v43)
          {
            goto LABEL_136;
          }

          v44 = v43;
          v45 = *(DerivedStorage + 224);
          *(DerivedStorage + 224) = v43;
          CFRetain(v43);
        }

        else
        {
          v44 = 0;
          v45 = *(DerivedStorage + 224);
          *(DerivedStorage + 224) = 0;
        }

        if (v45)
        {
          CFRelease(v45);
        }

        if (!a3)
        {
          goto LABEL_36;
        }

        v19 = v44;
LABEL_45:
        CFRelease(v19);
        goto LABEL_36;
      }

      if (CFEqual(@"kFigAssetExportSessionProperty_MetadataItemFilterAllowList", a2))
      {
        if (FigCFEqual())
        {
          goto LABEL_36;
        }

        if (!a3)
        {
          v38 = *(DerivedStorage + 232);
          *(DerivedStorage + 232) = 0;
          goto LABEL_115;
        }

        v46 = CFGetTypeID(a3);
        if (v46 != CFDictionaryGetTypeID())
        {
          goto LABEL_136;
        }

        v38 = *(DerivedStorage + 232);
        *(DerivedStorage + 232) = a3;
      }

      else if (CFEqual(@"kFigAssetExportSessionProperty_AudioMix", a2))
      {
        if (FigCFEqual())
        {
          goto LABEL_36;
        }

        if (!a3)
        {
          goto LABEL_136;
        }

        v47 = CFGetTypeID(a3);
        if (v47 != CFDictionaryGetTypeID())
        {
          goto LABEL_136;
        }

        if (FigCFEqual())
        {
          goto LABEL_36;
        }

        v38 = *(DerivedStorage + 208);
        *(DerivedStorage + 208) = a3;
      }

      else if (CFEqual(@"kFigAssetExportSessionProperty_VideoComposition", a2))
      {
        if (!a3)
        {
          v38 = *(DerivedStorage + 216);
          *(DerivedStorage + 216) = 0;
          goto LABEL_115;
        }

        if (FigCFEqual())
        {
          goto LABEL_36;
        }

        v48 = CFGetTypeID(a3);
        MEMORY[0x19A8D3660](&FigAssetExportSessionVideoCompositionGetTypeID_sRegisterFigAssetExportSessionVideoCompositionOnce, registerFigAssetExportSessionVideoCompositionOnce);
        if (v48 != sFigAssetExportSessionVideoCompositionID)
        {
          goto LABEL_136;
        }

        v38 = *(DerivedStorage + 216);
        *(DerivedStorage + 216) = a3;
      }

      else
      {
        if (!CFEqual(@"kFigAssetExportSessionProperty_AudioTimePitchAlgorithm", a2))
        {
          if (CFEqual(@"kFigAssetExportSessionProperty_CanPerformMultiplePassesOverSourceMediaData", a2))
          {
            if (a3)
            {
              v50 = CFGetTypeID(a3);
              if (v50 == CFBooleanGetTypeID())
              {
                *(DerivedStorage + 440) = a3;
                goto LABEL_36;
              }
            }

            goto LABEL_136;
          }

          if (!CFEqual(@"kFigAssetExportSessionProperty_DirectoryForTemporaryFiles", a2))
          {
            if (CFEqual(@"kFigAssetExportSessionProperty_MinVideoFrameDuration", a2))
            {
              if (a3)
              {
                v54 = CFGetTypeID(a3);
                if (v54 == CFDictionaryGetTypeID())
                {
                  CMTimeMakeFromDictionary(&number.start, a3);
                  *(DerivedStorage + 288) = *&number.start.value;
                  *(DerivedStorage + 304) = number.start.epoch;
                  goto LABEL_36;
                }
              }
            }

            else if (CFEqual(@"kFigAssetExportSessionProperty_VideoFrameRateConversionAlgorithm", a2))
            {
              if (a3)
              {
                v55 = CFGetTypeID(a3);
                if (v55 == CFStringGetTypeID() && (FigCFEqual() || FigCFEqual()))
                {
                  v56 = CFStringCreateCopy(*v8, a3);
                  if (v56)
                  {
                    a3 = v56;
                    v57 = *(DerivedStorage + 320);
                    *(DerivedStorage + 320) = v56;
                    CFRetain(v56);
                    if (v57)
                    {
                      CFRelease(v57);
                    }

                    goto LABEL_55;
                  }
                }
              }
            }

            else if (CFEqual(@"kFigAssetExportSessionProperty_AudioTrackGroupOutputHandling", a2))
            {
              if (a3)
              {
                v58 = CFGetTypeID(a3);
                if (v58 == CFNumberGetTypeID())
                {
                  LODWORD(number.start.value) = 0;
                  CFNumberGetValue(a3, kCFNumberSInt32Type, &number);
                  *(DerivedStorage + 384) = number.start.value;
                  goto LABEL_36;
                }
              }
            }

            else if (CFEqual(@"kFigAssetExportSessionProperty_EnableDecodeAppleOnlySWAV1", a2))
            {
              if (a3)
              {
                v59 = CFGetTypeID(a3);
                if (v59 == CFBooleanGetTypeID())
                {
                  *(DerivedStorage + 98) = CFBooleanGetValue(a3);
                  goto LABEL_36;
                }
              }
            }

            else
            {
              if (!CFEqual(@"kFigAssetExportSessionProperty_ResumableSessionName", a2))
              {
                goto LABEL_36;
              }

              if (a3)
              {
                v60 = CFGetTypeID(a3);
                if (v60 == CFStringGetTypeID())
                {
                  v61 = *(DerivedStorage + 392);
                  *(DerivedStorage + 392) = a3;
                  CFRetain(a3);
                  if (v61)
                  {
                    CFRelease(v61);
                  }

                  *(DerivedStorage + 388) = *(DerivedStorage + 392) != 0;
                  goto LABEL_36;
                }
              }
            }

            goto LABEL_136;
          }

          if (a3)
          {
            v51 = CFGetTypeID(a3);
            if (v51 != CFURLGetTypeID())
            {
              goto LABEL_136;
            }

            v52 = CFURLCopyAbsoluteURL(a3);
            if (!v52)
            {
              goto LABEL_136;
            }

            a3 = v52;
            v53 = *(DerivedStorage + 448);
            *(DerivedStorage + 448) = v52;
            CFRetain(v52);
          }

          else
          {
            v53 = *(DerivedStorage + 448);
            *(DerivedStorage + 448) = 0;
          }

          if (v53)
          {
            CFRelease(v53);
          }

          if (!a3)
          {
            goto LABEL_36;
          }

          goto LABEL_44;
        }

        if (!a3)
        {
          goto LABEL_136;
        }

        v49 = CFGetTypeID(a3);
        if (v49 != CFStringGetTypeID())
        {
          goto LABEL_136;
        }

        v38 = *(DerivedStorage + 200);
        *(DerivedStorage + 200) = a3;
      }
    }

    CFRetain(a3);
LABEL_115:
    if (!v38)
    {
      goto LABEL_36;
    }

    v19 = v38;
    goto LABEL_45;
  }

  OUTLINED_FUNCTION_239();
  OUTLINED_FUNCTION_121_3();

  FigSignalErrorAtGM();
}

void figAssetExportSession_removeListeners(uint64_t a1)
{
  if (a1)
  {
    v8 = 0;
    v1 = figAssetExportSession_figRemakerNotificationNames(&v8);
    if (v8)
    {
      if ((v8 & 0x8000000000000000) != 0)
      {
        return;
      }

      if (v8 >> 60)
      {
        return;
      }

      v2 = 16 * v8;
      if (!(16 * v8))
      {
        return;
      }
    }

    else
    {
      v2 = 0;
    }

    v3 = OUTLINED_FUNCTION_116_3(v2);
    if (v3)
    {
      v4 = v3;
      v5 = v8;
      if (v8)
      {
        v6 = v3 + 1;
        v7 = v3;
        do
        {
          *(v6 - 1) = figAssetExportSession_figRemakerNotification;
          *v6 = v1;
          v6 += 2;
          v7 += 2;
          ++v1;
          --v5;
        }

        while (v5);
      }

      CMNotificationCenterGetDefaultLocalCenter();
      FigNotificationCenterRemoveWeakListeners();
      free(v4);
    }
  }
}

void *figAssetExportSession_figRemakerNotificationNames(void *a1)
{
  result = figAssetExportSession_figRemakerNotificationNames_sNotificationNames;
  if (!figAssetExportSession_figRemakerNotificationNames_sNotificationNames)
  {
    result = malloc_type_malloc(0x30uLL, 0x6004044C4A2DFuLL);
    figAssetExportSession_figRemakerNotificationNames_sNotificationNames = result;
    if (!result)
    {
      return result;
    }

    v3 = *MEMORY[0x1E69628A8];
    *result = @"Remaker_Completed";
    result[1] = @"Remaker_Failed";
    result[2] = @"Remaker_DecodeError";
    result[3] = @"Remaker_Started";
    result[4] = @"ServerConnectionDied";
    result[5] = v3;
  }

  if (a1)
  {
    *a1 = 6;
  }

  return result;
}

void figAssetExportSession_addListeners(uint64_t a1)
{
  CMBaseObjectGetDerivedStorage();
  if (a1)
  {
    v9 = 0;
    v2 = figAssetExportSession_figRemakerNotificationNames(&v9);
    if (v9)
    {
      if ((v9 & 0x8000000000000000) != 0)
      {
        return;
      }

      if (v9 >> 60)
      {
        return;
      }

      v3 = 16 * v9;
      if (!(16 * v9))
      {
        return;
      }
    }

    else
    {
      v3 = 0;
    }

    v4 = OUTLINED_FUNCTION_116_3(v3);
    if (v4)
    {
      v5 = v4;
      v6 = v9;
      if (v9)
      {
        v7 = v4 + 1;
        v8 = v4;
        do
        {
          *(v7 - 1) = figAssetExportSession_figRemakerNotification;
          *v7 = v2;
          v7 += 2;
          v8 += 2;
          ++v2;
          --v6;
        }

        while (v6);
      }

      CMNotificationCenterGetDefaultLocalCenter();
      FigNotificationCenterAddWeakListeners();
      free(v5);
    }
  }
}

void figAssetExportSession_kickoffSegmentReassembly()
{
  OUTLINED_FUNCTION_649();
  v1 = v0;
  v3 = v2;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v387[0] = 0;
  v386 = 0;
  v384 = 0;
  v385 = 0;
  v382 = 0;
  v383 = 0;
  v380 = 0;
  v381 = 0;
  v378 = 0;
  v379 = 0;
  FigReadWriteLockLockForRead();
  v5 = *MEMORY[0x1E695E480];
  CMBaseObject = FigAssetGetCMBaseObject(*(DerivedStorage + 16));
  v7 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (v7)
  {
    v7(CMBaseObject, @"assetProperty_TrackReferences", v5, &v385);
    v8 = v385 == 0;
  }

  else
  {
    v8 = 1;
  }

  Mutable = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!Mutable)
  {
    OUTLINED_FUNCTION_111();
    FigSignalErrorAtGM();
    v170 = 0;
    v10 = 0;
LABEL_144:
    __dst = 0;
    goto LABEL_110;
  }

  v10 = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!v10)
  {
    goto LABEL_142;
  }

  v207 = v3;
  if (FigMutableCompositionCreateRemote(v5, 0, v387))
  {
LABEL_143:
    v170 = 0;
    goto LABEL_144;
  }

  v11 = *(DerivedStorage + 112);
  v12 = v11 ? CFArrayGetCount(v11) : 0;
  v13 = *(DerivedStorage + 128);
  if (v13 && (v14 = *(v13 + 16)) != 0)
  {
    Count = CFArrayGetCount(v14);
  }

  else
  {
    Count = 0;
  }

  __dst = malloc_type_calloc(v12, 0x6CuLL, 0x1060040CB727B4DuLL);
  if (!__dst)
  {
LABEL_142:
    OUTLINED_FUNCTION_111();
    FigSignalErrorAtGM();
    goto LABEL_143;
  }

  v267 = v12;
  v16 = CFDictionaryCreateMutable(v5, Count + 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!v16)
  {
    OUTLINED_FUNCTION_111();
    FigSignalErrorAtGM();
    v170 = 0;
    goto LABEL_110;
  }

  v17 = v16;
  HIDWORD(v219) = v8;
  v195 = v1;
  v18 = *(DerivedStorage + 128);
  if (v18)
  {
    if (*v18)
    {
      FigBaseObject = FigRemakerGetFigBaseObject(*v18);
      v20 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v20)
      {
        v20(FigBaseObject, @"Remaker_FakeTrackIDMapping", v5, &v378);
      }
    }
  }

  allocator = v5;
  v279 = Count;
  theDict = v17;
  if (Count >= 1)
  {
    v21 = 0;
    v22 = 1;
    while (1)
    {
      if (*(CFArrayGetValueAtIndex(*(*(DerivedStorage + 128) + 16), v21) + 2) == 1936684398)
      {
        if (!*(*(OUTLINED_FUNCTION_84_8() + 16) + 32))
        {
          goto LABEL_109;
        }

        v23 = v10;
        v24 = Mutable;
        OUTLINED_FUNCTION_194();
        v26 = v25();
        if (v26)
        {
          goto LABEL_62;
        }

        start[0] = **&MEMORY[0x1E6960CC0];
        epoch = start[0].epoch;
        *&v372.start.value = *MEMORY[0x1E6960C88];
        v35 = *(MEMORY[0x1E6960C88] + 16);
        OUTLINED_FUNCTION_86_9(v26, v27, v28, v29, v30, v31, v32, v33, v183, v195, v207, v219, v231, v242, v254, v267, v279, theDict, v372.start.value, *&v372.start.timescale, start[0].value, *&start[0].timescale, v334, allocator, __dst, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, v372.start.value, *&v372.start.timescale, v35, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, start[0].value);
        *&start[0].value = *v316;
        start[0].epoch = epoch;
        *&duration.value = *v299;
        duration.epoch = v35;
        v36 = CMTimeRangeMake(&v372, start, &duration);
        v44 = OUTLINED_FUNCTION_85_8(v36, v37, v38, v39, v40, v41, v42, v43, v184, v196, v208, v220, v232, v243, v255, v268, v280, theDicta, v299[0], v299[1], v316[0], v316[1], v335, allocatorc, __dsta, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, v372.start.value, *&v372.start.timescale, v372.start.epoch, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, start[0].value);
        OUTLINED_FUNCTION_119_4(v44, v45, v46, v47, v48, v49, v50, v51, v185, v197, v209, v221, v233, v244, v256, v269, v281, theDictb, v300, v309, v317, v327, v336, allocatord, __dstb, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, v372.start.value, *&v372.start.timescale, v372.start.epoch, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, start[0].value);
        OUTLINED_FUNCTION_90_6();
        if (!v60)
        {
          RealIntermediateTrackID = figAssetExportSession_getRealIntermediateTrackID(v378, v17[1]);
          LODWORD(v1) = RealIntermediateTrackID;
        }

        if (!v1)
        {
          OUTLINED_FUNCTION_40_0();
          FigSignalErrorAtGM();
LABEL_62:
          Mutable = v24;
LABEL_63:
          v10 = v23;
          goto LABEL_109;
        }

        if (!*(*(OUTLINED_FUNCTION_83_10(RealIntermediateTrackID, v53, v54, v55, v56, v57, v58, v59, v186, v198, v210, v222, v234, v245, v257, v270, v282, theDict, v301, v310, v318, v328, v337, allocatora, __dst) + 16) + 48))
        {
          goto LABEL_62;
        }

        v61 = OUTLINED_FUNCTION_105_6();
        if (v62(v61))
        {
          goto LABEL_62;
        }

        v63 = CFNumberCreate(allocator, kCFNumberSInt32Type, &valuePtr);
        Mutable = v24;
        if (!v63)
        {
          OUTLINED_FUNCTION_40_0();
          FigSignalErrorAtGM();
          goto LABEL_63;
        }

        OUTLINED_FUNCTION_81_7(v63, v64, v65, v66, v67, v68, v69, v70, v187, v199, v211, v223, v235, v246, v258, v271, v283, theDict);
        CFRelease(epoch);
        v10 = v23;
        if (figAssetExportSession_addTrackMapping(v23, valuePtr, v1) || figAssetExportSession_addTrackMapping(Mutable, *v17, valuePtr))
        {
          goto LABEL_109;
        }

        ++v22;
        Count = v279;
      }

      if (Count == ++v21)
      {
        goto LABEL_37;
      }
    }
  }

  v22 = 1;
LABEL_37:
  *v302 = *MEMORY[0x1E6960CC0];
  *&duration.value = *MEMORY[0x1E6960CC0];
  v259 = *(MEMORY[0x1E6960CC0] + 16);
  duration.epoch = v259;
  if (!*(*(CMBaseObjectGetVTable() + 16) + 32) || (OUTLINED_FUNCTION_301(), v71()))
  {
LABEL_109:
    v170 = theDict;
    goto LABEL_110;
  }

  v236 = Mutable;
  if (v267 >= 1)
  {
    v319 = -v267;
    v242 = @"FormatDescriptionArray";
    v72 = __dst + 26;
    v73 = 1;
    v74 = 1;
    while (1)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(*(DerivedStorage + 112), v73 - 1);
      v368 = *(ValueAtIndex + 40);
      valuePtr = *(ValueAtIndex + 24);
      *&start[0].timescale = v302[1];
      start[0].epoch = v259;
      v83 = OUTLINED_FUNCTION_86_9(ValueAtIndex, v76, v77, v78, v79, v80, v81, v82, v183, v195, v207, v219, v236, v242, v259, v267, v279, theDict, v302[0], v302[1], v319, v326, v334, allocator, __dst, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, valuePtr, *(&valuePtr + 1), v368, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, v302[0]);
      *&v365.value = OUTLINED_FUNCTION_76_14(v83, v84, v85, v86, v87, v88, v89, v90, v188, v200, v212, v224, v237, v247, v260, v272, v284, theDictc, v303, v311, v320, v329, v338, allocatore, __dstc, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, v368, v369, *&duration.value);
      v365.epoch = v368;
      v91 = CMTimeRangeMake(&v372, start, &v365);
      OUTLINED_FUNCTION_85_8(v91, v92, v93, v94, v95, v96, v97, v98, v189, v201, v213, v225, v238, v248, v261, v273, v285, theDictd, v304, v312, v321, v330, v339, allocatorf, __dstd, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, v372.start.value, *&v372.start.timescale, v372.start.epoch, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, start[0].value);
      v99 = memcpy(v72 - 26, start, 0x60uLL);
      *(v72 - 1) = *(ValueAtIndex + 8);
      *v72 = 1;
      *&rhs.value = OUTLINED_FUNCTION_76_14(v99, v100, v101, v102, v103, v104, v105, v106, v190, v202, v214, v226, v239, v249, v262, v274, v286, theDicte, v305, v313, v322, v331, v340, allocatorg, __dste, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, v368, v369, *&duration.value);
      rhs.epoch = v368;
      CMTimeAdd(&duration, start, &rhs);
      OUTLINED_FUNCTION_496();
      if (FigAssetRemoteCreateWithURLAndRetry(v107, v108, v109, v110, v111))
      {
        goto LABEL_108;
      }

      if (!v383 || (v112 = figAssetExportSession_CopySourceVideoTrack(v383, 1)) == 0)
      {
LABEL_146:
        OUTLINED_FUNCTION_40_0();
        FigSignalErrorAtGM();
        goto LABEL_108;
      }

      v113 = v112;
      v114 = FigAssetTrackGetCMBaseObject(v112);
      v115 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v73 == 1)
      {
        if (!v115 || v115(v114, v242, allocator, &v380))
        {
          goto LABEL_108;
        }

        if (!v380)
        {
          goto LABEL_146;
        }
      }

      else
      {
        if (!v115 || v115(v114, v242, allocator, &v379))
        {
          goto LABEL_108;
        }

        if (!FigCFEqual())
        {
          goto LABEL_146;
        }

        if (v379)
        {
          CFRelease(v379);
          v379 = 0;
        }
      }

      CFRelease(v113);
      if (v319 + v73)
      {
        if (v383)
        {
          CFRelease(v383);
          v383 = 0;
        }
      }

      else
      {
        v116 = CFArrayGetValueAtIndex(*(ValueAtIndex + 16), 0);
        v117 = CFNumberCreate(allocator, kCFNumberSInt32Type, &v386);
        if (!v117)
        {
          goto LABEL_146;
        }

        v118 = v117;
        CFDictionarySetValue(theDict, v117, *(ValueAtIndex + 8));
        CFRelease(v118);
        if (figAssetExportSession_addTrackMapping(v10, v386, 1))
        {
          goto LABEL_108;
        }

        if (figAssetExportSession_addTrackMapping(v236, *v116, v386))
        {
          if (!v74)
          {
            goto LABEL_70;
          }

LABEL_108:
          Mutable = v236;
          goto LABEL_109;
        }
      }

      v74 = v73++ < v267;
      v72 += 27;
      if (v319 + v73 == 1)
      {
        goto LABEL_65;
      }
    }
  }

  v74 = 0;
LABEL_65:
  v119 = v387[0];
  ValueAtIndex = v386;
  v120 = *(*(CMBaseObjectGetVTable() + 16) + 48);
  if (!v120 || v120(v119, ValueAtIndex, v267, __dst) || v74)
  {
    goto LABEL_108;
  }

LABEL_70:
  v121 = v279;
  Mutable = v236;
  if (v279 >= 1)
  {
    v122 = 0;
    v123 = v22 + 1;
    do
    {
      if (*(CFArrayGetValueAtIndex(*(*(DerivedStorage + 128) + 16), v122) + 2) == 1835365473)
      {
        if (!*(*(OUTLINED_FUNCTION_84_8() + 16) + 32))
        {
          goto LABEL_109;
        }

        OUTLINED_FUNCTION_101_5();
        v125 = v124();
        if (v125)
        {
          goto LABEL_109;
        }

        *&start[0].value = *v302;
        v133 = v259;
        start[0].epoch = v259;
        *&v372.start.value = *MEMORY[0x1E6960C88];
        v134 = *(MEMORY[0x1E6960C88] + 16);
        OUTLINED_FUNCTION_86_9(v125, v126, v127, v128, v129, v130, v131, v132, v183, v195, v207, v219, v236, v242, v259, v267, v279, theDict, v302[0], v302[1], v372.start.value, *&v372.start.timescale, v334, allocator, __dst, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, v372.start.value, *&v372.start.timescale, v134, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, v302[0]);
        *&start[0].value = *v306;
        start[0].epoch = v133;
        *&duration.value = *v323;
        duration.epoch = v134;
        v135 = CMTimeRangeMake(&v372, start, &duration);
        v143 = OUTLINED_FUNCTION_85_8(v135, v136, v137, v138, v139, v140, v141, v142, v191, v203, v215, v227, v240, v250, v263, v275, v287, theDictf, v306[0], v306[1], v323[0], v323[1], v341, allocatorh, __dstf, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, v372.start.value, *&v372.start.timescale, v372.start.epoch, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, start[0].value);
        OUTLINED_FUNCTION_119_4(v143, v144, v145, v146, v147, v148, v149, v150, v192, v204, v216, v228, v241, v251, v264, v276, v288, theDictg, v307, v314, v324, v332, v342, allocatori, __dstg, context, v363, v364, v365.value, *&v365.timescale, v365.epoch, v366, valuePtr, *(&valuePtr + 1), v368, v369, duration.value, *&duration.timescale, duration.epoch, v371, v372.start.value, *&v372.start.timescale, v372.start.epoch, v372.duration.value, *&v372.duration.timescale, v372.duration.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v374, v375, v376, start[0].value);
        OUTLINED_FUNCTION_90_6();
        if (!v159)
        {
          v151 = figAssetExportSession_getRealIntermediateTrackID(v378, *(ValueAtIndex + 4));
          LODWORD(v121) = v151;
        }

        if (!v121)
        {
          goto LABEL_146;
        }

        if (!*(*(OUTLINED_FUNCTION_83_10(v151, v152, v153, v154, v155, v156, v157, v158, v193, v205, v217, v229, v236, v252, v265, v277, v289, theDict, v308, v315, v325, v333, v343, allocatorb, __dst) + 16) + 48))
        {
          goto LABEL_108;
        }

        v160 = OUTLINED_FUNCTION_105_6();
        if (v161(v160))
        {
          goto LABEL_108;
        }

        v162 = CFNumberCreate(allocator, kCFNumberSInt32Type, &valuePtr);
        Mutable = v236;
        if (!v162)
        {
          OUTLINED_FUNCTION_40_0();
          FigSignalErrorAtGM();
          goto LABEL_109;
        }

        OUTLINED_FUNCTION_81_7(v162, v163, v164, v165, v166, v167, v168, v169, v194, v206, v218, v230, v236, v253, v266, v278, v290, theDict);
        CFRelease(v134);
        if (figAssetExportSession_addTrackMapping(v10, valuePtr, v121) || figAssetExportSession_addTrackMapping(Mutable, *ValueAtIndex, valuePtr))
        {
          goto LABEL_109;
        }

        ++v123;
        v121 = v279;
      }

      ++v122;
    }

    while (v121 != v122);
  }

  v170 = theDict;
  if ((v219 & 0x100000000) != 0 || !remakerFamily_createDestinationTrackReferenceDictionary(Mutable, v385, &v384) && (FigMutableCompositionGetFigBaseObject(v387[0]), *(*(CMBaseObjectGetVTable() + 8) + 56)) && (v171 = OUTLINED_FUNCTION_308(), !v172(v171)))
  {
    v173 = v387[0];
    start[0].value = 0;
    rhs.value = 0;
    if (!v383)
    {
LABEL_102:
      context = theDict;
      v363 = 0;
      v364 = v387[0];
      CFDictionaryApplyFunction(v10, figAssetExportSession_reassemblyTransferTrackPropertiesApplier, &context);
      v179 = v387[0];
      v180 = *(*(CMBaseObjectGetVTable() + 16) + 208);
      if (v180)
      {
        if (!v180(v179, 0, 0, &v382) && !FigAssetExportSessionCreateWithAsset(allocator, 0, 1, v382, @"AVAssetExportPresetPassthrough", 0, 0, &v381))
        {
          v181 = v381;
          FigAssetExportSessionSetProperty(v381, @"kFigAssetExportSessionProperty_OutputURL", *(DerivedStorage + 88));
          FigAssetExportSessionSetProperty(v181, @"kFigAssetExportSessionProperty_OutputFileType", *(DerivedStorage + 176));
          FigAssetExportSessionSetProperty(v181, @"kFigAssetExportSessionProperty_ShouldOptimizeForNetworkUse", *(DerivedStorage + 432));
          VTable = CMBaseObjectGetVTable();
          if (!(*(*(VTable + 16) + 16))(v181, figAssetExportSession_reassemblyCompletionHandler, v207))
          {
            *(DerivedStorage + 144) = v181;
            v381 = 0;
          }
        }
      }

      goto LABEL_110;
    }

    v174 = FigAssetGetCMBaseObject(v383);
    v175 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (v175 && !v175(v174, @"assetProperty_FormatReader", allocator, start) && start[0].value && !FigMetadataCopyMovieMetadata(start[0].value, allocator, &rhs))
    {
      if (!rhs.value)
      {
LABEL_100:
        if (start[0].value)
        {
          CFRelease(start[0].value);
        }

        goto LABEL_102;
      }

      if (CFArrayGetCount(rhs.value))
      {
        value = rhs.value;
        v177 = FigMutableCompositionGetFigBaseObject(v173);
        v178 = *(*(CMBaseObjectGetVTable() + 8) + 56);
        if (v178)
        {
          v178(v177, @"MutableComposition_Metadata", value);
        }
      }
    }

    if (rhs.value)
    {
      CFRelease(rhs.value);
    }

    goto LABEL_100;
  }

LABEL_110:
  FigReadWriteLockUnlockForRead();
  if (v380)
  {
    CFRelease(v380);
  }

  if (v379)
  {
    CFRelease(v379);
  }

  if (v382)
  {
    CFRelease(v382);
  }

  if (v383)
  {
    CFRelease(v383);
  }

  free(__dst);
  if (v170)
  {
    CFRelease(v170);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (v10)
  {
    CFRelease(v10);
  }

  if (v385)
  {
    CFRelease(v385);
  }

  if (v384)
  {
    CFRelease(v384);
  }

  if (v387[0])
  {
    CFRelease(v387[0]);
  }

  if (v381)
  {
    CFRelease(v381);
  }

  if (v378)
  {
    CFRelease(v378);
  }

  OUTLINED_FUNCTION_651();
}

uint64_t figAssetExportSession_CopySourceVideoTrack(uint64_t a1, uint64_t a2)
{
  v9[0] = 0;
  v9[1] = 0;
  if (a1)
  {
    VTable = CMBaseObjectGetVTable();
    OUTLINED_FUNCTION_109_3(VTable);
    if (a2)
    {
      v6 = *(v5 + 40);
      if (v6)
      {
        v6(a1, a2, v9);
      }
    }

    else if (*(v5 + 48))
    {
      OUTLINED_FUNCTION_301();
      v7();
    }
  }

  return v9[0];
}

void figAssetExportSession_reassemblyTransferTrackPropertiesApplier()
{
  FigCFNumberGetSInt32();
  FigCFNumberGetSInt32();
  FigCFDictionaryGetValue();
  OUTLINED_FUNCTION_496();
  FigAssetRemoteCreateWithURLAndRetry(v0, v1, v2, v3, v4);
}

void figAssetExportSession_CreateUTTypesForPresetOnce()
{
  OUTLINED_FUNCTION_649();
  v1 = v0;
  v22[1] = *MEMORY[0x1E69E9840];
  if (qword_1EAF1A9A0 != -1)
  {
    OUTLINED_FUNCTION_33_31(&qword_1EAF1A9A0);
  }

  v2 = qword_1EAF1A9A8;
  if (qword_1EAF1A9A8)
  {
    v22[0] = @"com.apple.quicktime-movie";
    v3 = *MEMORY[0x1E695E480];
    v4 = CFArrayCreate(*MEMORY[0x1E695E480], v22, 1, MEMORY[0x1E695E9C0]);
    if (v4)
    {
      v5 = v4;
      v21[0] = @"com.apple.quicktime-movie";
      v21[1] = @"public.mpeg-4";
      v21[2] = @"com.apple.m4v-video";
      v21[3] = @"com.apple.immersive-video";
      v6 = CFArrayCreate(v3, v21, 4, MEMORY[0x1E695E9C0]);
      if (!v6)
      {
        v12 = v5;
LABEL_17:
        CFRelease(v12);
        goto LABEL_18;
      }

      v7 = v6;
      v8 = CFArrayCreate(v3, kFigFileType_MPEG4, 1, MEMORY[0x1E695E9C0]);
      if (v8 && (v20[0] = @"public.3gpp", v20[1] = @"org.3gpp.adaptive-multi-rate-audio", (v9 = CFArrayCreate(v3, v20, 2, MEMORY[0x1E695E9C0])) != 0))
      {
        v10 = v9;
        v19[0] = @"com.apple.m4a-audio";
        v19[1] = @"com.apple.quicktime-audio";
        v11 = CFArrayCreate(v3, v19, 2, MEMORY[0x1E695E9C0]);
        v12 = v11;
        if (v11)
        {
          v17 = v7;
          v18[0] = @"AVAssetExportPresetLowQuality";
          v18[1] = v7;
          v18[2] = @"AVAssetExportPresetLowQuality_16x9";
          v18[3] = v7;
          v18[4] = @"AVAssetExportPresetMediumQuality";
          v18[5] = v7;
          v18[6] = @"AVAssetExportPresetMediumQuality_16x9";
          v18[7] = v7;
          v18[8] = @"AVAssetExportPresetHighestQuality";
          v18[9] = v7;
          v18[10] = @"AVAssetExportPreset640x480";
          v18[11] = v7;
          v18[12] = @"AVAssetExportPreset1280x720";
          v18[13] = v7;
          v18[14] = @"AVAssetExportPreset960x540";
          v18[15] = v7;
          v18[16] = @"AVAssetExportPreset1920x1080";
          v18[17] = v7;
          v18[18] = @"AVAssetExportPreset3840x2160";
          v18[19] = v7;
          v18[20] = @"AVAssetExportPresetHEVCHighestQuality";
          v18[21] = v7;
          v18[22] = @"AVAssetExportPresetHEVCHighestQualityWithAlpha";
          v18[23] = v7;
          v18[24] = @"AVAssetExportPresetHEVC1920x1080";
          v18[25] = v7;
          v18[26] = @"AVAssetExportPresetHEVC1920x1080WithAlpha";
          v18[27] = v7;
          v18[28] = @"AVAssetExportPresetHEVC3840x2160";
          v18[29] = v7;
          v18[30] = @"AVAssetExportPresetHEVC3840x2160WithAlpha";
          v18[31] = v7;
          v18[32] = @"AVAssetExportPresetHEVC4320x2160";
          v18[33] = v7;
          v18[34] = @"AVAssetExportPresetHEVC7680x4320";
          v18[35] = v7;
          v18[36] = @"AVAssetExportPresetMVHEVC960x960";
          v18[37] = v7;
          v18[38] = @"AVAssetExportPresetMVHEVC1440x1440";
          v18[39] = v7;
          v18[40] = @"AVAssetExportPresetMVHEVC4320x4320";
          v18[41] = v7;
          v18[42] = @"AVAssetExportPresetMVHEVC7680x7680";
          v18[43] = v7;
          v18[44] = @"AVAssetExportPresetICPLHEVC1280x1280WithHDR";
          v18[45] = v7;
          v18[46] = @"AVAssetExportPresetICPLHEVC1920x1080";
          v18[47] = v7;
          v18[48] = @"AVAssetExportPresetICPLHEVC1920x1920WithHDR";
          v18[49] = v7;
          v18[50] = @"AVAssetExportPresetICPLHighFPSHEVC1920x1920WithHDR";
          v18[51] = v7;
          v18[52] = @"AVAssetExportPresetICPLHEVC960x960WithHDR";
          v18[53] = v7;
          v18[54] = @"AVAssetExportPresetICPLHEVC1440x1440WithHDR";
          v18[55] = v7;
          v18[56] = @"AVAssetExportPresetPhotoStream";
          v18[57] = v7;
          v18[58] = @"AVAssetExportPresetPhotoStreamHD";
          v18[59] = v7;
          v18[60] = @"AVAssetExportPresetICPL480x480";
          v18[61] = v7;
          v18[62] = @"AVAssetExportPresetICPL";
          v18[63] = v7;
          v18[64] = @"AVAssetExportPresetICPL960x960";
          v18[65] = v7;
          v18[66] = @"AVAssetExportPresetICPLHD";
          v18[67] = v11;
          v18[68] = @"AVAssetExportPresetAppleM4A";
          v18[69] = v11;
          v18[70] = @"AVAssetExportPresetVoiceMemoALAC";
          v18[71] = v5;
          v18[72] = @"AVAssetExportPresetAppleProRes422LPCM";
          v18[73] = v5;
          v18[74] = @"AVAssetExportPresetAppleProRes4444LPCM";
          v18[75] = v2;
          v18[76] = @"AVAssetExportPresetPassthrough";
          v18[77] = v10;
          v18[78] = @"AVAssetExportPresetMMS";
          v18[79] = v10;
          v18[80] = @"AVAssetExportPreset3GPRelease6MMS";
          v18[81] = v10;
          v18[82] = @"AVAssetExportPresetAudioOnlyMMS";
          v18[83] = v5;
          v18[84] = @"AVAssetExportPresetYouTube";
          v18[85] = v5;
          v18[86] = @"AVAssetExportPresetYouTube_16x9";
          v18[87] = v5;
          v18[88] = @"AVAssetExportPresetMail";
          v18[89] = v5;
          v18[90] = @"AVAssetExportPresetMail_16x9";
          v18[91] = v5;
          v18[92] = @"AVAssetExportPresetAuxSmall";
          v18[93] = v5;
          v18[94] = @"AVAssetExportPresetHEVCAnimojiWithAlpha";
          v18[95] = v5;
          v18[96] = @"AVAssetExportPresetAVCAnimoji";
          v18[97] = v5;
          v18[98] = @"AVAssetExportPresetYouTubeHD";
          v18[99] = v7;
          v18[100] = @"AVAssetExportPresetMessage";
          v18[101] = v7;
          v18[102] = @"AVAssetExportPresetMessageHEVCWithHDR";
          v18[103] = v7;
          v18[104] = @"AVAssetExportPresetMessage_16x9";
          v18[105] = v7;
          v18[106] = @"AVAssetExportPresetMessageAux";
          v18[107] = v5;
          v18[108] = @"AVAssetExportPresetICPLAux";
          v18[109] = v5;
          v18[110] = @"AVAssetExportPresetICPLAuxHD";
          v18[111] = v11;
          v18[112] = @"AVAssetExportPresetMessageAudio";
          Mutable = CFDictionaryCreateMutable(v3, 57, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
          if (Mutable)
          {
            v14 = Mutable;
            v15 = v18;
            v16 = 57;
            do
            {
              CFDictionarySetValue(v14, *v15, *(v15 - 1));
              v15 += 2;
              --v16;
            }

            while (v16);
            *v1 = CFDictionaryCreateCopy(v3, v14);
            CFRelease(v14);
          }
        }

        CFRelease(v10);
      }

      else
      {
        v12 = 0;
      }

      CFRelease(v5);
      CFRelease(v7);
      if (v8)
      {
        CFRelease(v8);
      }

      if (v12)
      {
        goto LABEL_17;
      }
    }
  }

LABEL_18:
  OUTLINED_FUNCTION_651();
}

void figAssetExportSession_DetermineCompatibleFileTypes(const void *a1, uint64_t a2, uint64_t a3)
{
  v6 = malloc_type_malloc(0x18uLL, 0xE0040BC9ECFC2uLL);
  if (v6)
  {
    v7 = v6;
    if (dword_1EAF17B38)
    {
      os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
      os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
      OUTLINED_FUNCTION_7();
      fig_log_call_emit_and_clean_up_after_send_and_compose();
    }

    if (a1)
    {
      v9 = CFRetain(a1);
    }

    else
    {
      v9 = 0;
    }

    *v7 = v9;
    v7[1] = a2;
    v7[2] = a3;
    if (qword_1EAF1AA50 != -1)
    {
      OUTLINED_FUNCTION_64_14(v9, &qword_1EAF1AA48);
    }

    dispatch_async_f(qword_1EAF1AA48, v7, figAssetExportSession_DetermineCompatibleFileTypes_Worker);
  }
}

uint64_t figAssetExportSession_ExportAsynchronously(void *a1, uint64_t a2, uint64_t a3)
{
  v32 = *MEMORY[0x1E69E9840];
  valuePtr = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  cf = 0;
  number = 0;
  if (dword_1EAF17B38)
  {
    v30 = 0;
    type = OS_LOG_TYPE_DEFAULT;
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_7();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  if (*MEMORY[0x1E695FF58] == 1)
  {
    OUTLINED_FUNCTION_496();
    kdebug_trace();
  }

  v8 = *MEMORY[0x1E695E480];
  v9 = FigAssetExportSessionCopyProperty(a1, @"kFigAssetExportSessionProperty_Status", *MEMORY[0x1E695E480], &number);
  if (v9)
  {
    goto LABEL_39;
  }

  CFNumberGetValue(number, kCFNumberSInt32Type, &valuePtr);
  if (valuePtr || !*(DerivedStorage + 88))
  {
    OUTLINED_FUNCTION_4_157();
    v9 = FigSignalErrorAtGM();
LABEL_39:
    v23 = v9;
LABEL_42:
    v14 = 0;
    goto LABEL_28;
  }

  v10 = CMBaseObjectGetDerivedStorage();
  if (dword_1EAF17B38)
  {
    v30 = 0;
    type = OS_LOG_TYPE_DEFAULT;
    v11 = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    v12 = v30;
    if (os_log_type_enabled(v11, type))
    {
      v13 = v12;
    }

    else
    {
      v13 = v12 & 0xFFFFFFFE;
    }

    if (v13)
    {
      v31 = 136315394;
      OUTLINED_FUNCTION_49_18();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_7();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  if (!*(v10 + 176) || !figAssetExportSession_GetFigFormatReaderFileFormat())
  {
    OUTLINED_FUNCTION_4_157();
    v23 = FigSignalErrorAtGM();
    if (v23)
    {
      OUTLINED_FUNCTION_4_157();
      FigSignalErrorAtGM();
      goto LABEL_42;
    }
  }

  if (a2)
  {
    CFRetain(a1);
    *(DerivedStorage + 408) = a2;
    *(DerivedStorage + 416) = a3;
  }

  figAssetExportSession_transitionToStatus(a1, 1u, 0);
  if ((*(DerivedStorage + 24) - 1) <= 1)
  {
    figAssetExportSession_createRemakerAndBeginExport(a1);
    v14 = 0;
LABEL_27:
    v23 = 0;
    goto LABEL_28;
  }

  v15 = OUTLINED_FUNCTION_265();
  Mutable = CFArrayCreateMutable(v15, v16, v17);
  v14 = Mutable;
  if (Mutable)
  {
    CFArrayAppendValue(Mutable, @"assetProperty_Tracks");
    CFArrayAppendValue(v14, @"assetProperty_FormatReader");
    CFArrayAppendValue(v14, @"assetProperty_TrackReferences");
    v19 = FigAssetExportSessionTaskCreate(a1, v14, figAssetExportSession_exportAsynchronouslyDeferred, figAssetExportSession_completeExportAsynchronously, 8uLL, &cf);
    if (!v19)
    {
      v20 = cf;
      v21 = *(cf + 6);
      if (a1)
      {
        v22 = CFRetain(a1);
      }

      else
      {
        v22 = 0;
      }

      *v21 = v22;
      figAssetExportSession_runTaskAfterLoadingRequiredAssetProperties(v20);
      goto LABEL_27;
    }
  }

  else
  {
    OUTLINED_FUNCTION_4_157();
    v19 = FigSignalErrorAtGM();
  }

  v23 = v19;
LABEL_28:
  if (number)
  {
    CFRelease(number);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v14)
  {
    CFRelease(v14);
  }

  if (v23)
  {
    v24 = CFErrorCreate(v8, @"FigAssetExportSession_ErrorDomain", v23, 0);
    figAssetExportSession_transitionToStatus(a1, 5u, v24);
    if (v24)
    {
      CFRelease(v24);
    }
  }

  return v23;
}

void figAssetExportSession_DetermineCompatibleFileTypesOnce(uint64_t a1)
{
  theArray = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v4 = *MEMORY[0x1E695E480];
  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  if (!Mutable)
  {
    OUTLINED_FUNCTION_114_4();
    goto LABEL_25;
  }

  v6 = Mutable;
  if (*(DerivedStorage + 80))
  {
    v7 = *(DerivedStorage + 80);
  }

  else
  {
    v7 = *(DerivedStorage + 72);
  }

  if (FigAssetExportSessionCopyProperty(a1, @"kFigAssetExportSessionProperty_SupportedFileTypes", v4, &theArray) || (v8 = FigSimpleMutexCreate()) == 0)
  {
    v9 = 0;
    goto LABEL_20;
  }

  v9 = dispatch_group_create();
  if (!v9)
  {
LABEL_20:
    v1 = 0;
    goto LABEL_21;
  }

  Count = CFArrayGetCount(theArray);
  if (Count)
  {
    v11 = Count;
    if ((Count & 0x8000000000000000) == 0)
    {
      v1 = 0;
      if (Count >> 59)
      {
        goto LABEL_21;
      }

      v12 = 32 * Count;
      if (!(32 * v11))
      {
        goto LABEL_21;
      }

      v13 = OUTLINED_FUNCTION_118_2(v12);
      v1 = v13;
      if (!v13)
      {
        goto LABEL_21;
      }

      v14 = 0;
      v15 = v13;
      do
      {
        *(v15 + 16) = v6;
        *(v15 + 24) = v9;
        ValueAtIndex = CFArrayGetValueAtIndex(theArray, v14);
        *v15 = v8;
        *(v15 + 8) = ValueAtIndex;
        dispatch_group_enter(v9);
        FigAssetExportSessionDetermineCompatibilityOfExportPreset(v7, *(DerivedStorage + 16), *(DerivedStorage + 24), *(v15 + 8), figAssetExportSession_DetermineCompatibleFileTypesOnce_CompletionHandler, v15);
        ++v14;
        v15 += 32;
      }

      while (v11 != v14);
      goto LABEL_17;
    }

    goto LABEL_20;
  }

  v1 = OUTLINED_FUNCTION_118_2(0);
  if (v1)
  {
LABEL_17:
    dispatch_group_wait(v9, 0xFFFFFFFFFFFFFFFFLL);
    v18.length = CFArrayGetCount(v6);
    v18.location = 0;
    CFArraySortValues(v6, v18, figAssetExportSession_StringArrayComparatorFunction, 0);
    *(DerivedStorage + 464) = CFArrayCreateCopy(v4, v6);
  }

LABEL_21:
  CFRelease(v6);
  if (theArray)
  {
    CFRelease(theArray);
  }

  if (v9)
  {
    dispatch_release(v9);
  }

LABEL_25:
  FigSimpleMutexDestroy();
  free(v1);
}

void figAssetExportSession_DetermineCompatibleFileTypesOnce_CompletionHandler(uint64_t a1, int a2)
{
  if (a2 && !FigSimpleMutexLock())
  {
    CFArrayAppendValue(*(a1 + 16), *(a1 + 8));
    FigSimpleMutexUnlock();
  }

  v3 = *(a1 + 24);

  dispatch_group_leave(v3);
}

uint64_t figAssetExportSession_IsExportPresetCompatibleWithAssetAndOutputFileType(__CFString *a1, uint64_t a2, int a3, const void *a4, CGSize *a5)
{
  keyExistsAndHasValidFormat[0] = 0;
  AppBooleanValue = CFPreferencesGetAppBooleanValue(@"disable_export_compatibilitycheck", @"com.apple.avfoundation", keyExistsAndHasValidFormat);
  if (keyExistsAndHasValidFormat[0] && AppBooleanValue)
  {
    v11 = 1;
    v12 = 1;
    goto LABEL_131;
  }

  if (FigCFEqual())
  {
    v87 = 0;
    theArray = 0;
    cf = 0;
    v13 = 0x1F0B4BA78;
    OUTLINED_FUNCTION_104_0();
    v14 = FigCFEqual() || FigCFEqual() || FigCFEqual() || FigCFEqual() != 0;
    if (qword_1EAF1A9C8 != -1)
    {
      OUTLINED_FUNCTION_0_215();
      dispatch_once_f(&qword_1EAF1A9C8, &qword_1EAF1A9C0, v76);
    }

    v15 = qword_1EAF1A9C0;
    Count = CFArrayGetCount(qword_1EAF1A9C0);
    if (a4)
    {
      v90.length = Count;
      v90.location = 0;
      if (CFArrayContainsValue(v15, v90, a4))
      {
        v17 = *MEMORY[0x1E695E480];
        CMBaseObject = FigAssetGetCMBaseObject(a2);
        v19 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (v19)
        {
          v19(CMBaseObject, @"assetProperty_Tracks", v17, &theArray);
        }

        v20 = FigAssetGetCMBaseObject(a2);
        v21 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (!v21 || v21(v20, @"assetProperty_FormatReader", v17, &v87))
        {
LABEL_59:
          v45 = 0;
LABEL_61:
          if (cf)
          {
            CFRelease(cf);
          }

          if (v87)
          {
            CFRelease(v87);
          }

          if (theArray)
          {
            CFRelease(theArray);
          }

          if (v45 && (v63 = figAssetExportSession_CopyChapterTracks(a2)) != 0)
          {
            v64 = v63;
            if (a4)
            {
              v12 = figAssetExportSession_CanWriteMediaOfAsset(a2, a3, a4, v63);
            }

            else
            {
              if (qword_1EAF1A9A0 != -1)
              {
                OUTLINED_FUNCTION_33_31(&qword_1EAF1A9A0);
              }

              v65 = qword_1EAF1A9A8;
              v66 = CFArrayGetCount(qword_1EAF1A9A8);
              if (v66 < 1)
              {
                v12 = 0;
              }

              else
              {
                v67 = v66;
                v68 = 1;
                do
                {
                  ValueAtIndex = CFArrayGetValueAtIndex(v65, v68 - 1);
                  v70 = figAssetExportSession_CanWriteMediaOfAsset(a2, a3, ValueAtIndex, v64);
                  v12 = v70;
                  if (v68 >= v67)
                  {
                    break;
                  }

                  ++v68;
                }

                while (!v70);
              }
            }

            CFRelease(v64);
          }

          else
          {
            v12 = 0;
          }

          v11 = 1;
          goto LABEL_131;
        }

        if (theArray)
        {
          v22 = CFArrayGetCount(theArray);
          if (v22 >= 1)
          {
            v23 = v22;
            v83 = v14;
            v24 = 0;
            v84 = 0;
            do
            {
              v25 = CFArrayGetValueAtIndex(theArray, v24);
              v85 = 0;
              v26 = *(*(CMBaseObjectGetVTable() + 16) + 32);
              if (v26)
              {
                if (!v26(v25, &v85, &v85 + 4) && HIDWORD(v85) == 1936684398)
                {
                  v28 = v87;
                  v29 = v85;
                  v30 = *(*(CMBaseObjectGetVTable() + 16) + 56);
                  if (v30)
                  {
                    if (!v30(v28, v29, &cf, 0))
                    {
                      v82 = v13;
                      *keyExistsAndHasValidFormat = 0;
                      v31 = FigAssetTrackGetCMBaseObject(v25);
                      v32 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                      v81 = v17;
                      if (v32 && !v32(v31, @"FormatDescriptionArray", v17, keyExistsAndHasValidFormat) && (v33 = CFArrayGetCount(*keyExistsAndHasValidFormat)) != 0 && (v34 = v33, v35 = CFArrayGetValueAtIndex(*keyExistsAndHasValidFormat, 0), v36 = v34 - 2, v34 >= 2))
                      {
                        v37 = v35;
                        v38 = 1;
                        do
                        {
                          v39 = CFArrayGetValueAtIndex(*keyExistsAndHasValidFormat, v38);
                          v40 = CMFormatDescriptionEqual(v39, v37);
                          v41 = v40 != 0;
                          v43 = v36-- != 0;
                          if (!v40)
                          {
                            break;
                          }

                          ++v38;
                        }

                        while (v43);
                      }

                      else
                      {
                        v41 = 1;
                      }

                      if (*keyExistsAndHasValidFormat)
                      {
                        CFRelease(*keyExistsAndHasValidFormat);
                      }

                      v13 = v82;
                      if (!v41 || figAssetExportSession_HasEditSegmentData(cf, 0) || figAssetExportSession_HasEditSegmentData(cf, 1))
                      {
                        goto LABEL_59;
                      }

                      if (FigCFEqual())
                      {
                        if (figAssetExportSession_HasEditSegmentData(cf, 2))
                        {
                          goto LABEL_59;
                        }
                      }

                      else
                      {
                        OUTLINED_FUNCTION_104_0();
                        if (FigCFEqual() && figAssetExportSession_HasEditSegmentData(cf, 2) && !figAssetExportSession_firstFormatDescriptionIsLPCM(v25))
                        {
                          goto LABEL_59;
                        }
                      }

                      v44 = v83;
                      if (v84 <= 0)
                      {
                        v44 = 0;
                      }

                      if (v44)
                      {
                        goto LABEL_59;
                      }

                      ++v84;
                      if (cf)
                      {
                        CFRelease(cf);
                        cf = 0;
                      }

                      v17 = v81;
                    }
                  }
                }
              }

              ++v24;
            }

            while (v24 != v23);
          }
        }
      }
    }

    v45 = 1;
    goto LABEL_61;
  }

  theArray = 0;
  *keyExistsAndHasValidFormat = 0;
  if (*(*(CMBaseObjectGetVTable() + 16) + 48))
  {
    OUTLINED_FUNCTION_194();
    v46();
  }

  if (*(*(CMBaseObjectGetVTable() + 16) + 48))
  {
    OUTLINED_FUNCTION_301();
    v47();
  }

  if (!*keyExistsAndHasValidFormat || !CFArrayGetCount(*keyExistsAndHasValidFormat))
  {
    goto LABEL_127;
  }

  if (qword_1EAF1A990 != -1)
  {
    OUTLINED_FUNCTION_12_74();
    dispatch_once_f(&qword_1EAF1A990, &qword_1EAF1A998, v77);
  }

  Value = CFDictionaryGetValue(qword_1EAF1A998, a1);
  if (Value)
  {
    v49 = Value;
    Value = CFArrayGetCount(Value);
    v50.length = Value;
    if (a4)
    {
      v50.location = 0;
      Value = CFArrayContainsValue(v49, v50, a4);
      if (!Value)
      {
        goto LABEL_127;
      }
    }

    else if (!Value)
    {
LABEL_127:
      v12 = 0;
      goto LABEL_128;
    }
  }

  if (qword_1EAF1A9F8 != -1)
  {
    OUTLINED_FUNCTION_34_30(Value, &qword_1EAF1A9F0);
  }

  v51 = qword_1EAF1A9F0;
  if (qword_1EAF1A990 != -1)
  {
    OUTLINED_FUNCTION_12_74();
    dispatch_once_f(&qword_1EAF1A990, &qword_1EAF1A998, v78);
  }

  v52 = qword_1EAF1A998;
  v91.length = CFArrayGetCount(v51);
  v91.location = 0;
  if (!CFArrayContainsValue(v51, v91, a1))
  {
    if (qword_1EAF1A9C8 != -1)
    {
      OUTLINED_FUNCTION_0_215();
      dispatch_once_f(&qword_1EAF1A9C8, &qword_1EAF1A9C0, v80);
    }

    v54 = CFArrayGetCount(qword_1EAF1A9C0);
    if (!a4 || (v55 = OUTLINED_FUNCTION_383(), v92.length = v54, !CFArrayContainsValue(v55, v92, a4)))
    {
      v56 = CFDictionaryGetValue(v52, a1);
      v57 = 0;
      do
      {
        if (v56)
        {
          v58 = CFArrayGetCount(v56);
        }

        else
        {
          v58 = 0;
        }

        if (v57 == v58)
        {
          goto LABEL_89;
        }

        CFArrayGetValueAtIndex(v56, v57);
        v59 = OUTLINED_FUNCTION_383();
        v93.length = v54;
        v61 = CFArrayContainsValue(v59, v93, v60);
        ++v57;
      }

      while (v61);
      if (qword_1EAF1AA08 != -1)
      {
        OUTLINED_FUNCTION_64_14(v61, &qword_1EAF1AA00);
      }

      CFArrayGetCount(qword_1EAF1AA00);
      v62 = OUTLINED_FUNCTION_265();
      if (CFArrayContainsValue(v62, v94, a1))
      {
        v53 = theArray;
        goto LABEL_90;
      }

      HasDecodableTrack = figAssetExportSession_HasDecodableTrack(*keyExistsAndHasValidFormat);
      figAssetExportSession_HasDecodableTrack(theArray);
      v12 = *keyExistsAndHasValidFormat && CFArrayGetCount(*keyExistsAndHasValidFormat) && !HasDecodableTrack;
      if (a5)
      {
        if (!figAssetExportSession_IsStereoPreset(a1))
        {
          goto LABEL_91;
        }

        v73 = a2;
        v74 = 0;
        v75 = a5;
      }

      else
      {
        if (figAssetExportSession_IsAlphaPreset(a1) && !remakerFamily_GetEnabledTrackWithAllAlphaSegments(theArray))
        {
          goto LABEL_127;
        }

        if (!figAssetExportSession_IsStereoPreset(a1))
        {
          goto LABEL_91;
        }

        EnabledTrackWithHomogeneousStereoSegments = remakerFamily_GetEnabledTrackWithHomogeneousStereoSegments(theArray);
        if (!EnabledTrackWithHomogeneousStereoSegments)
        {
          goto LABEL_127;
        }

        v74 = EnabledTrackWithHomogeneousStereoSegments;
        v73 = a2;
        v75 = 0;
      }

      if (figAssetExportSession_videoSizeCompatibleWithStereoPreset(v73, v74, v75, a1))
      {
        goto LABEL_91;
      }

      goto LABEL_127;
    }
  }

LABEL_89:
  v53 = *keyExistsAndHasValidFormat;
LABEL_90:
  v12 = 0;
  if (figAssetExportSession_HasDecodableTrack(v53))
  {
LABEL_91:
    v11 = v12 == 0;
    v12 = 1;
    goto LABEL_129;
  }

LABEL_128:
  v11 = 1;
LABEL_129:
  if (*keyExistsAndHasValidFormat)
  {
    CFRelease(*keyExistsAndHasValidFormat);
  }

LABEL_131:
  if (dyld_program_sdk_at_least())
  {
    return (v12 != 0) & v11;
  }

  else
  {
    return v12;
  }
}

CFTypeRef figAssetExportSession_actualOutputFileType(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = (DerivedStorage + 192);
  if (*(DerivedStorage + 192))
  {
    return *v3;
  }

  v4 = *(DerivedStorage + 176);
  if (!v4)
  {
    v5 = *(DerivedStorage + 88);
    if (!v5)
    {
      return *v3;
    }

    v6 = CFURLCopyPathExtension(v5);
    if (!v6)
    {
      return *v3;
    }

    v7 = v6;
    PreferredIdentifierForTag = UTTypeCreatePreferredIdentifierForTag(*MEMORY[0x1E6963710], v6, 0);
    CFRelease(v7);
    theArray = 0;
    FigAssetExportSessionCopyProperty(a1, @"kFigAssetExportSessionProperty_SupportedFileTypes", *MEMORY[0x1E695E480], &theArray);
    if (theArray)
    {
      Count = CFArrayGetCount(theArray);
      v10 = PreferredIdentifierForTag != 0;
      if (PreferredIdentifierForTag)
      {
        v11.length = Count;
        if (theArray)
        {
          v11.location = 0;
          if (CFArrayContainsValue(theArray, v11, PreferredIdentifierForTag))
          {
            v4 = PreferredIdentifierForTag;
LABEL_17:
            if (theArray)
            {
              CFRelease(theArray);
            }

            goto LABEL_19;
          }

          v10 = 1;
        }
      }
    }

    else
    {
      v10 = PreferredIdentifierForTag != 0;
    }

    v4 = @"com.apple.quicktime-movie";
    if (@"com.apple.quicktime-movie")
    {
      CFRetain(@"com.apple.quicktime-movie");
    }

    if (v10)
    {
      CFRelease(PreferredIdentifierForTag);
    }

    goto LABEL_17;
  }

  CFRetain(*(DerivedStorage + 176));
LABEL_19:
  if (FigAtomicCompareAndSwapPtr() && *v3)
  {
    CFRetain(*v3);
  }

  if (v4)
  {
    CFRelease(v4);
  }

  return *v3;
}

void figAssetExportSession_createFigRemakers_CopyError(__CFDictionary *a1, CFTypeRef *a2, uint64_t a3, unint64_t a4)
{
  v11 = v6;
  v1126 = *MEMORY[0x1E69E9840];
  v1116 = 0;
  v1115 = 0;
  v1114 = 0uLL;
  values = 0;
  cf = 0;
  v1111 = 0;
  v1110 = 0;
  key = 0;
  v1108 = 0;
  theArray = 0;
  value = *MEMORY[0x1E695E4C0];
  v1106 = *MEMORY[0x1E695E4C0];
  v1105 = 0;
  v1104 = 0;
  v1103 = 0;
  v1102 = 0;
  v1101 = 0;
  v1100 = 0;
  v1099 = 0;
  v1098 = 0;
  v1097 = 0;
  v1096 = 0;
  v1095 = 0;
  v1094 = 0;
  v1093 = 0;
  ConcatenationOfTwoArrays = *MEMORY[0x1E695E480];
  Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  VideoEncoderSpecification = Mutable;
  FigBaseObject = &dword_1EAF17000;
  allocator = ConcatenationOfTwoArrays;
  v1007 = Mutable;
  if (!Mutable)
  {
    OUTLINED_FUNCTION_239();
    LODWORD(v23) = FigSignalErrorAtGM();
    OUTLINED_FUNCTION_3_161();
    v1061 = 0;
    OUTLINED_FUNCTION_13_59();
    goto LABEL_1029;
  }

  v4 = @"RemakerTrackOption_InterleaveTrack";
  v1000 = *MEMORY[0x1E695E4D0];
  CFDictionarySetValue(Mutable, @"RemakerTrackOption_InterleaveTrack", *MEMORY[0x1E695E4D0]);
  v1073 = a1;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  *a2 = 0;
  FigAssetGetCMBaseObject(*(DerivedStorage + 16));
  if (*(*(CMBaseObjectGetVTable() + 8) + 48))
  {
    v18 = OUTLINED_FUNCTION_48_21();
    v19(v18);
  }

  if (*(DerivedStorage + 384))
  {
    v20 = OUTLINED_FUNCTION_60_7();
    v1064 = CFArrayCreateMutable(v20, v21, v22);
    if (!v1064)
    {
      OUTLINED_FUNCTION_239();
      LODWORD(v23) = FigSignalErrorAtGM();
      OUTLINED_FUNCTION_3_161();
      v1061 = 0;
      OUTLINED_FUNCTION_13_59();
      VideoEncoderSpecification = 0;
LABEL_1029:
      v1035 = 0;
      v1041 = 0;
      v1052 = 0;
      v1056 = 0;
      ConcatenationOfTwoArrays = 0;
      v1070 = 0;
      OUTLINED_FUNCTION_18_48();
      v1029 = 0;
      v1017 = 0;
      v1064 = 0;
      goto LABEL_346;
    }
  }

  else
  {
    v1064 = 0;
  }

  CMBaseObject = FigAssetGetCMBaseObject(*(DerivedStorage + 16));
  v25 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v25)
  {
    LODWORD(v23) = -12782;
LABEL_42:
    OUTLINED_FUNCTION_239();
    FigSignalErrorAtGM();
LABEL_43:
    OUTLINED_FUNCTION_3_161();
    v1056 = 0;
    v1061 = 0;
    v1070 = 0;
    v1073 = 0;
    v11 = 0;
    VideoEncoderSpecification = 0;
    v1041 = 0;
    ConcatenationOfTwoArrays = 0;
    v1052 = 0;
LABEL_344:
    OUTLINED_FUNCTION_18_48();
    v1029 = 0;
LABEL_345:
    v1017 = 0;
    v1035 = 0;
LABEL_346:
    v1046 = 0;
    goto LABEL_347;
  }

  v970 = a3;
  v974 = a2;
  a3 = @"assetProperty_FormatReader";
  v26 = v25(CMBaseObject, @"assetProperty_FormatReader", ConcatenationOfTwoArrays, &v1105);
  if (v26)
  {
    LODWORD(v23) = v26;
    goto LABEL_42;
  }

  figAssetExportSession_actualOutputFileType(v1073);
  values = figAssetExportSession_GetFigFormatReaderFileFormat();
  v27 = CFDictionaryCreate(ConcatenationOfTwoArrays, kFigFormatWriterOption_FileFormat, &values, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!v27)
  {
    OUTLINED_FUNCTION_239();
    LODWORD(v23) = FigSignalErrorAtGM();
    goto LABEL_43;
  }

  v966 = a4;
  v994 = v6;
  v1070 = v27;
  v28 = CMBaseObjectGetDerivedStorage();
  v29 = *(v28 + 432);
  time2.value = 0;
  v30 = OUTLINED_FUNCTION_60_7();
  a4 = CFDictionaryCreateMutable(v30, v31, v32, v33);
  FigBaseObject = &kFigRemakerOption_FastStart;
  v34 = v1000;
  if (a4)
  {
    if (FigCFEqual())
    {
      v35 = v1000;
    }

    else
    {
      v35 = v29;
    }

    if (FigCFEqual() || FigCFEqual() || (v36 = value, FigCFEqual()))
    {
      v36 = v1000;
    }

    if (FigCFEqual())
    {
      CFDictionaryAddValue(a4, @"Remaker_UseRemakerQueue", value);
    }

    CFDictionaryAddValue(a4, @"Remaker_FastStart", v35);
    CFDictionaryAddValue(a4, @"Remaker_NoInterruptions", v36);
    OUTLINED_FUNCTION_80_10(v37, @"kFigAssetExportSessionProperty_DirectoryForTemporaryFiles", v38, &time2, v39, v40, v41, v42, outputCallbackRefCon, v814, v820, v826, v832, v839, v845, v851, v857, v863, v869, v875, v881, v887, v893, v899, v905, v911, v917, v923, v931, v937, v943, v953, v958, v966, v970, v974, v978, theDict, v990, v6, v1000, v1007, v1010[0], v1010[1], v1016, value, v1025, v1028, v1033, v1040, v1045, v1051, v1055, v1060, v1064, ConcatenationOfTwoArrays, v1070, v1073);
    if (figAssetExportSession_IsAlphaPreset(*(v28 + 72)))
    {
      v43 = v34;
    }

    else
    {
      v43 = value;
    }

    CFDictionaryAddValue(a4, @"Remaker_PreferSourceVideoTrackWithAlpha", v43);
    if (time2.value)
    {
      CFDictionaryAddValue(a4, @"Remaker_TemporaryDirectoryURL", time2.value);
      CFRelease(time2.value);
    }

    if (qword_1EAF1AA10 != -1)
    {
      OUTLINED_FUNCTION_29_32();
      dispatch_once_f(&qword_1EAF1AA10, &_MergedGlobals_477, v692);
    }

    if (_MergedGlobals_477)
    {
      if (figAssetExportSession_useConstantQualityModeForPreset())
      {
        memset(&buffer, 0, 33);
        v44 = getpid();
        proc_name(v44, &buffer, 0x21u);
        LOBYTE(buffer.duration.timescale) = 0;
        if (LOBYTE(buffer.start.value))
        {
          v45 = strnlen(&buffer, 0x21uLL);
          v46 = CFStringCreateWithBytes(ConcatenationOfTwoArrays, &buffer, v45, 0x8000100u, 0);
          if (v46)
          {
            v47 = v46;
            HasPrefix = CFStringHasPrefix(v46, @"com.apple.photos.VideoConversio");
            CFRelease(v47);
            if (HasPrefix)
            {
              CFDictionaryAddValue(a4, @"Remaker_ReportExportStats", v34);
            }
          }
        }
      }
    }
  }

  if (FigFormatReaderIsRemote(v1105))
  {
    v11 = FigRemakerRemoteCreateBaseWithURLs;
  }

  else
  {
    v11 = FigRemakerCreateBaseWithURLs;
  }

  if (*(DerivedStorage + 28))
  {
    MutableCopy = FigCFDictionaryCreateMutableCopy();
    VideoEncoderSpecification = MutableCopy;
    if (!MutableCopy)
    {
      v1052 = a4;
      OUTLINED_FUNCTION_1_193();
      LODWORD(v23) = FigSignalErrorAtGM();
      OUTLINED_FUNCTION_3_161();
      v1061 = 0;
      OUTLINED_FUNCTION_13_59();
      goto LABEL_342;
    }

    CFDictionaryAddValue(MutableCopy, @"Remaker_PermitNonLocalSourceURLs", v34);
    if (a4)
    {
      CFRelease(a4);
    }
  }

  else
  {
    VideoEncoderSpecification = a4;
  }

  if (*(DerivedStorage + 98))
  {
    v50 = FigCFDictionaryCreateMutableCopy();
    a4 = v50;
    if (!v50)
    {
      OUTLINED_FUNCTION_1_193();
      LODWORD(v23) = FigSignalErrorAtGM();
      OUTLINED_FUNCTION_3_161();
      v1056 = 0;
      v1061 = 0;
      OUTLINED_FUNCTION_13_59();
      v1035 = 0;
      v1041 = 0;
      ConcatenationOfTwoArrays = 0;
      v1010[0] = 0;
      DerivedStorage = 0;
      v1029 = 0;
      v1017 = 0;
      v1046 = 0;
      v1052 = VideoEncoderSpecification;
      VideoEncoderSpecification = 0;
      goto LABEL_347;
    }

    CFDictionarySetValue(v50, @"Remaker_EnableDecodeAppleOnlySWAV1", v34);
    if (VideoEncoderSpecification)
    {
      CFRelease(VideoEncoderSpecification);
    }
  }

  else
  {
    a4 = VideoEncoderSpecification;
  }

  v1046 = v11;
  if (!*(DerivedStorage + 216) && (TypeID = FigRemakerGetTypeID(), v95 = *(DerivedStorage + 16), v96 = figAssetExportSession_IsAlphaPreset(*(DerivedStorage + 72)), v97 = v95, v11 = v1046, (DefaultSourceVideoTrackFromAsset = remakerFamily_GetDefaultSourceVideoTrackFromAsset(TypeID, v97, v96, *(DerivedStorage + 98), &v1114 + 1)) != 0) || (DefaultSourceVideoTrackFromAsset = (v11)(ConcatenationOfTwoArrays, v1100, v1105, *(DerivedStorage + 88), 0, v1070, a4, &v1115)) != 0)
  {
    LODWORD(v23) = DefaultSourceVideoTrackFromAsset;
    v1052 = a4;
    OUTLINED_FUNCTION_1_193();
    FigSignalErrorAtGM();
    goto LABEL_127;
  }

  v52 = MEMORY[0x1E6960C70];
  if (!*(DerivedStorage + 388) || (v53 = FigCFEqual(), v53) || !*(DerivedStorage + 392))
  {
    HIDWORD(v990) = 0;
    v1061 = 0;
    LODWORD(v23) = 0;
    goto LABEL_55;
  }

  buffer.start.value = 0;
  if (OUTLINED_FUNCTION_80_10(v53, @"kFigAssetExportSessionProperty_DirectoryForTemporaryFiles", v54, &buffer, v55, v56, v57, v58, outputCallbackRefCon, v814, v820, v826, v832, v839, v845, v851, v857, v863, v869, v875, v881, v887, v893, v899, v905, v911, v917, v923, v931, v937, v943, v953, v958, v966, v970, v974, v978, theDict, v990, v994, v1000, v1007, v1010[0], v1010[1], v1016, value, v1025, v1028, v1033, v1040, v1046, v1051, v1055, v1060, v1064, allocator, v1070, v1073))
  {
    goto LABEL_1243;
  }

  v69 = CFURLCreateCopyAppendingPathComponent(ConcatenationOfTwoArrays, buffer.start.value, @"resumableExportCheckpoint.plist", 0);
  *(DerivedStorage + 152) = v69;
  if (buffer.start.value)
  {
    CFRelease(buffer.start.value);
    v69 = *(DerivedStorage + 152);
  }

  if (!v69)
  {
LABEL_1243:
    v1052 = a4;
    OUTLINED_FUNCTION_1_193();
LABEL_126:
    LODWORD(v23) = FigSignalErrorAtGM();
LABEL_127:
    OUTLINED_FUNCTION_19_48();
    v1061 = 0;
LABEL_341:
    OUTLINED_FUNCTION_10_78();
    VideoEncoderSpecification = 0;
LABEL_342:
    v1041 = 0;
    v1056 = 0;
    goto LABEL_343;
  }

  LODWORD(v23) = FigCreateCFPropertyListFromURLContents();
  if (!v23)
  {
    v98 = *(DerivedStorage + 160);
    if (v98)
    {
      CFDictionaryGetValue(v98, @"ResumableSessionName");
      if (!FigCFEqual())
      {
        v1052 = a4;
        v99 = *(DerivedStorage + 160);
        if (v99)
        {
          CFRelease(v99);
          *(DerivedStorage + 160) = 0;
        }

        OUTLINED_FUNCTION_1_193();
        goto LABEL_126;
      }
    }
  }

  v1092 = *v52;
  if (*(DerivedStorage + 160))
  {
    FigCFDictionaryGetArrayValue();
    ValueAtIndex = FigCFArrayGetValueAtIndex();
    if (ValueAtIndex)
    {
      LODWORD(v23) = figAssetExportSession_copyResumableTrackSegmentState(ValueAtIndex, &v1095, &v1096, &v1092, &v1094);
    }
  }

  if (!v1095)
  {
    if (v1096)
    {
      FigFileDeleteFile();
      v71 = a4;
    }

    else
    {
      v166 = FigCFDictionaryCreateMutableCopy();
      if (!v166)
      {
        goto LABEL_1245;
      }

      v71 = v166;
      CFDictionarySetValue(v166, @"Remaker_FastStart", value);
      if (a4)
      {
        CFRelease(a4);
      }

      CFDictionarySetValue(v71, @"Remaker_InterimAssetName", @"otherTracks");
    }

    LODWORD(v23) = (v11)(ConcatenationOfTwoArrays, v1100, v1105);
    if (v23)
    {
      OUTLINED_FUNCTION_1_193();
      FigSignalErrorAtGM();
      v1061 = 0;
      v1052 = v71;
      goto LABEL_340;
    }

    a4 = v71;
  }

  v1061 = malloc_type_calloc(1uLL, 0x38uLL, 0x106004012191893uLL);
  if (!v1061)
  {
LABEL_1245:
    v1052 = a4;
    OUTLINED_FUNCTION_1_193();
    LODWORD(v23) = FigSignalErrorAtGM();
    v1061 = 0;
    goto LABEL_340;
  }

  if (!v1096)
  {
    FigRemakerGetFigBaseObject(v1102);
    if (*(*(CMBaseObjectGetVTable() + 8) + 48))
    {
      v170 = OUTLINED_FUNCTION_48_21();
      LODWORD(v23) = v171(v170);
      if (!v23)
      {
        goto LABEL_233;
      }
    }

    else
    {
      LODWORD(v23) = -12782;
    }

    v1052 = a4;
    OUTLINED_FUNCTION_1_193();
    goto LABEL_70;
  }

  *(v1061 + 1) = v1096;
  v1096 = 0;
LABEL_233:
  if (v1095)
  {
    v167 = OUTLINED_FUNCTION_60_7();
    *(v1061 + 2) = CFArrayCreateMutableCopy(v167, v168, v169);
    if (v1094)
    {
      CFRelease(v1094);
      v1094 = 0;
    }

    *(v1061 + 1) = v1092;
    *(v1061 + 12) = 4;
  }

  else
  {
    v172 = OUTLINED_FUNCTION_60_7();
    v175 = CFArrayCreateMutable(v172, v173, v174);
    *(v1061 + 2) = v175;
    if (!v175)
    {
      v1052 = a4;
      OUTLINED_FUNCTION_1_193();
      goto LABEL_339;
    }

    v176 = v1102;
    OUTLINED_FUNCTION_115_4();
    CMTimeRangeGetEnd(&v1091, &buffer);
    v1090 = *(DerivedStorage + 240);
    if (*(*(CMBaseObjectGetVTable() + 16) + 48))
    {
      buffer.start = v1090;
      *&time2.value = *&v1091.value;
      OUTLINED_FUNCTION_63_16();
      v177(v176);
    }

    FigRemakerGetFigBaseObject(v1102);
    if (*(*(CMBaseObjectGetVTable() + 8) + 56))
    {
      v178 = OUTLINED_FUNCTION_308();
      v179(v178);
    }
  }

  HIDWORD(v990) = 1;
LABEL_55:
  *(DerivedStorage + 184) = 1;
  v59 = v1115;
  OUTLINED_FUNCTION_115_4();
  CMTimeRangeGetEnd(&v1092, &buffer);
  v1091 = *(DerivedStorage + 240);
  if (*(*(CMBaseObjectGetVTable() + 16) + 48))
  {
    buffer.start = v1091;
    *&time2.value = *&v1092.value;
    OUTLINED_FUNCTION_63_16();
    v60(v59);
  }

  v11 = *(DerivedStorage + 368);
  FigRemakerGetFigBaseObject(v1115);
  if (*(*(CMBaseObjectGetVTable() + 8) + 56))
  {
    v61 = OUTLINED_FUNCTION_104_0();
    v62(v61);
  }

  theDicta = FigAssetExportSessionGetSettingForFigRemaker(v1073, DWORD1(v1114));
  v63 = *(DerivedStorage + 232);
  v1052 = a4;
  if (!v63)
  {
    goto LABEL_84;
  }

  FigBaseObject = FigRemakerGetFigBaseObject(v1115);
  v64 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v64)
  {
    LODWORD(v23) = -12782;
LABEL_69:
    OUTLINED_FUNCTION_1_193();
LABEL_70:
    FigSignalErrorAtGM();
LABEL_340:
    OUTLINED_FUNCTION_19_48();
    goto LABEL_341;
  }

  v11 = @"Remaker_MetadataTransferAllowList";
  v65 = v64(FigBaseObject, @"Remaker_MetadataTransferAllowList", v63);
  if (v65)
  {
    LODWORD(v23) = v65;
    goto LABEL_69;
  }

  v66 = HIDWORD(v990);
  if (!v1102)
  {
    v66 = 0;
  }

  if (v66 != 1)
  {
    LODWORD(v23) = 0;
    goto LABEL_84;
  }

  v67 = *(DerivedStorage + 232);
  FigBaseObject = FigRemakerGetFigBaseObject(v1102);
  v68 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v68)
  {
    LODWORD(v23) = -12782;
    goto LABEL_69;
  }

  LODWORD(v23) = v68(FigBaseObject, @"Remaker_MetadataTransferAllowList", v67);
  if (v23)
  {
    goto LABEL_69;
  }

LABEL_84:
  VideoEncoderSpecification = @"assetProperty_Tracks";
  v11 = FigAssetGetCMBaseObject(*(DerivedStorage + 16));
  v72 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (v72)
  {
    v72(v11, @"assetProperty_Tracks", ConcatenationOfTwoArrays, &cf);
  }

  if (!FigCFEqual())
  {
    if (cf)
    {
      CFRelease(cf);
      cf = 0;
    }

    a4 = theDicta;
    if (theDicta)
    {
      if (CFDictionaryGetValue(theDicta, @"Video"))
      {
        v91 = OUTLINED_FUNCTION_60_7();
        v1056 = CFDictionaryCreateMutableCopy(v91, v92, v93);
      }

      else
      {
        v1056 = 0;
      }

      if (CFDictionaryGetValue(theDicta, @"Audio"))
      {
        v100 = OUTLINED_FUNCTION_60_7();
        v103 = CFDictionaryCreateMutableCopy(v100, v101, v102);
        if (v103)
        {
          LOBYTE(buffer.start.value) = 0;
          v1041 = v103;
          if (FigCFDictionaryGetBooleanIfPresent())
          {
            v104 = *(DerivedStorage + 384) & 0xFFFFFFFE;
            if (LOBYTE(buffer.start.value) == 1)
            {
              ++v104;
            }

            *(DerivedStorage + 384) = v104;
          }

          v11 = @"audioPreset";
          a3 = CFDictionaryGetValue(v1041, @"audioPreset");
          FigBaseObject = 0;
LABEL_137:
          v4 = @"Preset_NoAudio";
          canPassThroughVideo = FigCFEqual();
          if (canPassThroughVideo)
          {
            v1029 = 0;
            v1034 = 0;
            v4 = 0;
            LODWORD(v917) = 1;
            goto LABEL_139;
          }

          if (*(DerivedStorage + 208))
          {
            v118 = 1;
          }

          else
          {
            v118 = figAssetExportSession_isAudioMixdownRequired(a3, &v1116);
          }

          if (v1116)
          {
            OUTLINED_FUNCTION_19_48();
            goto LABEL_210;
          }

          LODWORD(v917) = v118;
          v155 = OUTLINED_FUNCTION_60_7();
          v1029 = CFArrayCreateMutable(v155, v156, v157);
          buffer.start.value = 0;
          v4 = *(DerivedStorage + 16);
          if (*(*(CMBaseObjectGetVTable() + 16) + 48))
          {
            OUTLINED_FUNCTION_194();
            v158();
            if (!buffer.start.value)
            {
              v11 = a3;
              v1034 = 0;
              v4 = 0;
              goto LABEL_1034;
            }

            v1025 = @"Remaker_MaximizePowerEfficiency";
            Count = CFArrayGetCount(buffer.start.value);
            if (Count >= 1)
            {
              v160 = Count;
              v937 = a3;
              LODWORD(v161) = 0;
              v162 = 0;
              v4 = @"IsEnabled";
              do
              {
                time2.value = value;
                v163 = CFArrayGetValueAtIndex(buffer.start.value, v162);
                v164 = FigAssetTrackGetCMBaseObject(v163);
                v165 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                if (v165)
                {
                  v165(v164, @"IsEnabled", allocator, &time2);
                }

                if (time2.value == v1000)
                {
                  v161 = (v161 + 1);
                }

                else
                {
                  v161 = v161;
                }

                ++v162;
              }

              while (v160 != v162);
              ConcatenationOfTwoArrays = allocator;
              a3 = v937;
              goto LABEL_443;
            }
          }

          else
          {
            v1025 = @"Remaker_MaximizePowerEfficiency";
          }

          v161 = 0;
LABEL_443:
          if (buffer.start.value)
          {
            CFRelease(buffer.start.value);
          }

          if (v161 == 1)
          {
            LODWORD(buffer.start.value) = 0;
            DefaultSourceAudioTrack = FigRemakerGetDefaultSourceAudioTrack(v1115, &buffer);
            if (DefaultSourceAudioTrack)
            {
              LODWORD(v23) = DefaultSourceAudioTrack;
              OUTLINED_FUNCTION_1_193();
              FigSignalErrorAtGM();
              OUTLINED_FUNCTION_3_161();
              OUTLINED_FUNCTION_13_59();
              VideoEncoderSpecification = 0;
              ConcatenationOfTwoArrays = 0;
              OUTLINED_FUNCTION_18_48();
              goto LABEL_345;
            }

            v273 = FigAssetGetCMBaseObject(*(DerivedStorage + 16));
            CMBaseObjectCopyProperty(v273, @"assetProperty_Tracks", ConcatenationOfTwoArrays, &cf);
            if (cf && (v274 = CFArrayGetCount(cf), v274 >= 1))
            {
              v275 = v274;
              v276 = 0;
              while (1)
              {
                key = 0;
                v277 = CFArrayGetValueAtIndex(cf, v276);
                v278 = *(*(CMBaseObjectGetVTable() + 16) + 32);
                if (v278)
                {
                  v278(v277, &key + 4, &key);
                }

                v279 = HIDWORD(key) == LODWORD(buffer.start.value) && key == 1936684398;
                if (v279)
                {
                  break;
                }

                if (v275 == ++v276)
                {
                  goto LABEL_457;
                }
              }
            }

            else
            {
LABEL_457:
              v277 = 0;
            }

            v280 = figAssetExportSession_copyChannelSpecificAudioSettingForAudioTrack(v277, v1041);
            v281 = v280;
            if (v280)
            {
              CFRetain(v280);
            }

            if ((FigBaseObject & 1) == 0)
            {
              CFRelease(v1041);
            }

            if (v281)
            {
              CFRelease(v281);
            }

            v11 = CFDictionaryGetValue(v281, @"audioPreset");
            if (figAssetExportSession_canPassThroughAudio(v1073, v281, 1))
            {
              CFArrayAppendValue(v1029, v277);
              v4 = 1;
            }

            else
            {
              v4 = 0;
            }

            a4 = theDicta;
            LODWORD(v23) = 0;
            v1034 = 1;
            goto LABEL_1035;
          }

          v1034 = v161;
          v4 = 0;
          if (a3)
          {
            v11 = a3;
            v281 = v1041;
LABEL_1035:
            canPassThroughVideo = cf;
            if (cf)
            {
              CFRelease(cf);
              cf = 0;
            }

            v1041 = v281;
            a3 = v11;
            goto LABEL_139;
          }

          if (v161)
          {
            OUTLINED_FUNCTION_194();
            FigAssetCopyTracksWithMediaType(v339, v340, v341);
            canPassThroughVideo = cf;
            if (!cf)
            {
              a3 = 0;
              v4 = 1;
LABEL_139:
              if (*(DerivedStorage + 216) || (canPassThroughVideo = figAssetExportSession_canPassThroughVideo(v1073, v1056, v1115, DWORD1(v1114), 1, 0), !canPassThroughVideo))
              {
                v954 = 0;
                if (!v4)
                {
                  LODWORD(v931) = 0;
                  LODWORD(a4) = 0;
                  goto LABEL_157;
                }

                v11 = 0;
LABEL_143:
                IsWithinFileLengthLimit = figAssetExportSession_totalSizeOfTracksIsWithinFileLengthLimit(DerivedStorage, v1029, a4);
                if (IsWithinFileLengthLimit)
                {
                  LODWORD(a4) = v4;
                }

                else
                {
                  LODWORD(a4) = 0;
                }

                if (v11 && IsWithinFileLengthLimit && v1056)
                {
                  CFRelease(v1056);
                  v1056 = 0;
                }

                canPassThroughVideo = v1041;
                if (v1041 && a4)
                {
                  CFRelease(v1041);
                  LODWORD(v931) = 1;
                  LODWORD(a4) = 1;
                  OUTLINED_FUNCTION_80_10(v112, @"kFigAssetExportSessionProperty_OutputFileType", v113, &v1108, v114, v115, v116, v117, outputCallbackRefCon, v814, v820, v826, v832, v839, v845, v851, v857, v863, v869, v875, v881, v887, v893, v899, v905, v911, v917, v923, v931, v937, v943, v954, v958, v966, v970, v974, v978, theDicta, v990, v994, v1000, v1007, v1010[0], v1010[1], @"Preset_NoAudio", value, v1025, v1029, v1034, 0, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073);
                  goto LABEL_158;
                }

                LODWORD(v931) = a4;
LABEL_157:
                OUTLINED_FUNCTION_80_10(canPassThroughVideo, @"kFigAssetExportSessionProperty_OutputFileType", v106, &v1108, v107, v108, v109, v110, outputCallbackRefCon, v814, v820, v826, v832, v839, v845, v851, v857, v863, v869, v875, v881, v887, v893, v899, v905, v911, v917, v923, v931, v937, v943, v954, v958, v966, v970, v974, v978, theDicta, v990, v994, v1000, v1007, v1010[0], v1010[1], @"Preset_NoAudio", value, v1025, v1029, v1034, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073);
LABEL_158:
                if (qword_1EAF1A9C8 != -1)
                {
                  OUTLINED_FUNCTION_0_215();
                  dispatch_once_f(&qword_1EAF1A9C8, &qword_1EAF1A9C0, v779);
                }

                OUTLINED_FUNCTION_75_11();
                v4 = qword_1EAF1A9C0;
                v938 = a3;
                if (qword_1EAF1A9C0)
                {
                  v119 = CFArrayGetCount(qword_1EAF1A9C0);
                  if (v1108)
                  {
                    v1127.length = v119;
                    v1127.location = 0;
                    if (CFArrayContainsValue(v4, v1127, v1108))
                    {
                      v925 = 0;
                      OUTLINED_FUNCTION_23_47();
                      v1025 = 0;
                      HIDWORD(v990) = 0;
                      FigBaseObject = 0;
                      VideoEncoderSpecification = 0;
                      v958 = 0;
                      v1010[0] = 0;
                      v945 = 0;
                      HIDWORD(v932) = v11 + 16510976;
                      goto LABEL_164;
                    }
                  }
                }

                if (v1056)
                {
                  HIDWORD(v932) = figAssetExportSession_GetVideoCodecType(v1056);
                  v11 = HIDWORD(v990);
                }

                else
                {
                  v11 = 0;
                  HIDWORD(v932) = 0;
                }

                LODWORD(v906) = a4;
                if (v1108)
                {
                  CFRelease(v1108);
                  v1108 = 0;
                }

                v282 = OUTLINED_FUNCTION_91_9();
                figAssetExportSession_copyFormatDescriptionsOfSourceVideoTrack(v282, v283);
                v285 = v284;
                v1088 = *MEMORY[0x1E6960C70];
                *v1011 = v1088;
                v1089 = *(MEMORY[0x1E6960C70] + 16);
                v959 = v1089;
                v1087 = 0.0;
                v286 = DWORD1(v1114);
                v287 = CMBaseObjectGetDerivedStorage();
                v288 = *(v287 + 16);
                v289 = *(v287 + 216);
                *&buffer.start.value = *(v287 + 288);
                buffer.start.epoch = *(v287 + 304);
                v290 = v286;
                v4 = v1056;
                figAssetExportSession_getDestinationFrameDurationAndExpectedFrameRate(v288, v290, v289, v1056, &buffer.start, &v1088, &v1087);
                v291 = OUTLINED_FUNCTION_91_9();
                UntransformedSourceDimension = FigAssetExportSession_getUntransformedSourceDimension(v291, v292, *(DerivedStorage + 216));
                v295 = v294;
                v7 = FigExportSettingsCalculateOutputDimensions(UntransformedSourceDimension, v294);
                v8 = v296;
                figAssetExportSession_createProfileLevel(*(DerivedStorage + 216), v1056, v285, &v1104);
                VideoEncoderSpecification = figAssetExportSession_createVideoEncoderSpecification(*(DerivedStorage + 352), v1056, v1104);
                v302 = OUTLINED_FUNCTION_47_21(VideoEncoderSpecification, v297, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8], v298, v299, v300, v301, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v924, v932, v938, v944, v953, v959, v966, v970, v974, v979, theDicta, v990, v995, v1001, v1007, v1011[0], v1011[1], v1017, value, v285, v1029, v1035, v1041, v1047, v1052, v1056, v1061, v1064, allocator);
                a4 = kFigExportSettingsKey_StereoEncoding;
                HIDWORD(v991) = v11;
                v914 = CFDictionaryCreateMutable(v302, v303, v304, v305);
                if (v914)
                {
                  VideoCodecType = figAssetExportSession_GetVideoCodecType(v4);
                  LOBYTE(v1092.value) = 0;
                  v322 = VideoCodecType == 1667524657 || VideoCodecType == 1667790435 || VideoCodecType == 1684895096 || VideoCodecType == 1685481521 || VideoCodecType == 1685481573 || VideoCodecType == 1718908520 || VideoCodecType == 1718908528 || VideoCodecType == 1751479857 || VideoCodecType == 1752589105 || VideoCodecType == 1836415073 || VideoCodecType == 1869117027 || VideoCodecType == 1902405681 || VideoCodecType == 1902405733 || VideoCodecType == 1902407032 || VideoCodecType == 1902667126 || VideoCodecType == 1902998904 || VideoCodecType == 1902671459;
                  if (!v322 || !FigCFDictionaryGetBooleanIfPresent() || LOBYTE(v1092.value) != 1)
                  {
                    goto LABEL_529;
                  }

                  CFArrayGetValueAtIndex(v1025, 0);
                  OUTLINED_FUNCTION_78_10();
                  if (FigVideoFormatDescriptionGetMVHEVCVideoLayerIDs())
                  {
                    v323 = CFArrayCreateMutable(allocator, 2, MEMORY[0x1E695E9C0]);
                    if (v323)
                    {
                      v4 = v323;
                      appended = FigCFArrayAppendInt64();
                      if (appended)
                      {
                        LODWORD(v23) = appended;
                      }

                      else
                      {
                        LODWORD(v23) = FigCFArrayAppendInt64();
                        if (!v23)
                        {
                          CFDictionarySetValue(v914, *MEMORY[0x1E69839B8], v4);
LABEL_527:
                          CFRelease(v4);
                          goto LABEL_528;
                        }
                      }

                      CFRelease(v914);
                      v914 = 0;
                      goto LABEL_527;
                    }

                    OUTLINED_FUNCTION_1_193();
                    LODWORD(v23) = FigSignalErrorAtGM();
                  }

                  else
                  {
                    LODWORD(v23) = 0;
                  }

                  CFRelease(v914);
                  v914 = 0;
                }

                else
                {
                  OUTLINED_FUNCTION_1_193();
                  LODWORD(v23) = FigSignalErrorAtGM();
                  v914 = 0;
                }

LABEL_528:
                if (v23)
                {
                  OUTLINED_FUNCTION_1_193();
                  FigSignalErrorAtGM();
                  a3 = 0;
LABEL_1007:
                  FigBaseObject = 0;
LABEL_1008:
                  OUTLINED_FUNCTION_2_192();
                  OUTLINED_FUNCTION_18_48();
                  OUTLINED_FUNCTION_99_5();
                  goto LABEL_347;
                }

LABEL_529:
                v325 = DWORD1(v1114);
                v326 = v1087;
                v4 = v1104;
                v327 = CMBaseObjectGetDerivedStorage();
                v333 = OUTLINED_FUNCTION_47_21(v327, v328, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8], v329, v330, v331, v332, outputCallbackRefConc, v817, v823, v829, v835, v842, v848, v854, v860, v866, v872, v878, v884, v890, v896, v902, v908, v914, v920, v927, v934, v940, v947, v955, v960, v967, v971, v975, VideoEncoderSpecification, theDictb, v991, v997, v1003, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator);
                v337 = CFDictionaryCreateMutable(v333, v334, v335, v336);
                if (!v337)
                {
                  OUTLINED_FUNCTION_1_193();
                  LODWORD(v23) = FigSignalErrorAtGM();
                  a3 = 0;
                  a4 = v906;
                  if (!v23)
                  {
                    goto LABEL_890;
                  }

                  goto LABEL_1278;
                }

                ConcatenationOfTwoArrays = v337;
                v338 = MEMORY[0x1E69837D0];
                if (v4)
                {
                  OUTLINED_FUNCTION_82_8(v337, *MEMORY[0x1E69837D0]);
                  v4 = v1056;
                  if (!v1056)
                  {
                    goto LABEL_667;
                  }
                }

                else
                {
                  v4 = v1056;
                  if (!v1056)
                  {
LABEL_667:
                    v456 = 1;
                    goto LABEL_668;
                  }

                  v454 = CFDictionaryGetValue(v1056, @"profileLevel");
                  if (v454)
                  {
                    CFDictionarySetValue(ConcatenationOfTwoArrays, *v338, v454);
                  }
                }

                v455 = CFDictionaryGetValue(v4, @"entropyMode");
                if (v455)
                {
                  CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E6983668], v455);
                }

                v456 = 0;
LABEL_668:
                v457 = MEMORY[0x1E69836F8];
                OUTLINED_FUNCTION_102_5();
                if (!v279 || *(v327 + 216))
                {
                  if ((v456 & 1) == 0)
                  {
                    v580 = CFDictionaryGetValue(v1056, @"keyFrameInterval");
                    if (v580)
                    {
                      CFDictionarySetValue(ConcatenationOfTwoArrays, *v457, v580);
                    }
                  }
                }

                else
                {
                  SInt32 = FigCFNumberCreateSInt32();
                  if (!SInt32)
                  {
                    OUTLINED_FUNCTION_1_193();
                    LODWORD(v23) = FigSignalErrorAtGM();
                    v11 = 0;
                    v560 = ConcatenationOfTwoArrays;
                    a3 = 0;
                    goto LABEL_1301;
                  }

                  v459 = SInt32;
                  OUTLINED_FUNCTION_82_8(SInt32, *v457);
                  CFRelease(v459);
                }

                v460 = figAssetExportSession_CopyEffectiveColorProperties(v1073, v1056, v1025);
                if (v460)
                {
                  v461 = v460;
                  v462 = CFDictionaryGetValue(v460, @"colorPrimaries");
                  if (v462)
                  {
                    CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E69835B0], v462);
                  }

                  v463 = CFDictionaryGetValue(v461, @"transferFunction");
                  if (v463)
                  {
                    v500 = v463;
                    OUTLINED_FUNCTION_82_8(v463, *MEMORY[0x1E6983878]);
                    v11 = CFRetain(v500);
                  }

                  else
                  {
                    v11 = 0;
                  }

                  v501 = CFDictionaryGetValue(v461, @"ycbcrMatrix");
                  if (v501)
                  {
                    CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E69838B8], v501);
                  }

                  CFRelease(v461);
                }

                else
                {
                  v11 = 0;
                }

                v502 = CMBaseObjectGetDerivedStorage();
                figAssetExportSession_getAverageVideoBitRateForSourceAndPreset(*(v502 + 16), v325, *(v502 + 72), v1056, UntransformedSourceDimension, v295, v326);
                v504 = v503;
                v505 = 0.0;
                if (figAssetExportSession_useConstantQualityModeForPreset())
                {
                  if (qword_1EAF1AA18 != -1)
                  {
                    dispatch_once_f(&qword_1EAF1AA18, &dword_1EAF1A974, figAssetExportSession_constantQualityOverrideOnce);
                  }

                  if (dword_1EAF1A974)
                  {
                    v505 = dword_1EAF1A974 / 100.0;
                  }

                  else if (*(CMBaseObjectGetDerivedStorage() + 72))
                  {
                    v505 = 0.49;
                    if (!FigCFEqual() && !FigCFEqual())
                    {
                      if (FigCFEqual())
                      {
                        v505 = 0.48;
                      }

                      else
                      {
                        v505 = 0.0;
                      }
                    }
                  }
                }

                if (qword_1EAF1AA10 != -1)
                {
                  OUTLINED_FUNCTION_29_32();
                  dispatch_once_f(&qword_1EAF1AA10, &_MergedGlobals_477, v805);
                }

                if (_MergedGlobals_477 && v505 > 0.0)
                {
                  if (qword_1EAF1AA20 != -1)
                  {
                    dispatch_once_f(&qword_1EAF1AA20, &dword_1EAF1A978, figAssetExportSession_vbvMaxRatePercentChangeOnce);
                  }

                  a4 = v906;
                  if (qword_1EAF1AA28 != -1)
                  {
                    dispatch_once_f(&qword_1EAF1AA28, &byte_1EAF1A971, figAssetExportSession_CRFModeEnabledOnce);
                  }

                  if (!byte_1EAF1A971)
                  {
                    FigCFDictionarySetInt();
                  }

                  FigCFDictionarySetFloat();
                  FigCFDictionarySetInt();
                  if (qword_1EAF1AA30 != -1)
                  {
                    dispatch_once_f(&qword_1EAF1AA30, &_MergedGlobals_11, figAssetExportSession_lookAheadOverrideOnce);
                  }

                  FigCFDictionarySetInt();
                  if ((v456 & 1) == 0)
                  {
LABEL_743:
                    v509 = CFDictionaryGetValue(v1056, @"frameReordering");
                    if (v509)
                    {
                      CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E6983518], v509);
                    }
                  }
                }

                else
                {
                  if (v504 >= 1)
                  {
                    FigCFDictionarySetInt();
                  }

                  a4 = v906;
                  if ((v456 & 1) == 0)
                  {
                    v4 = CFDictionaryGetValue(v1056, @"dataRateLimitBytes");
                    buffer.start.value = v4;
                    v506 = CFDictionaryGetValue(v1056, @"dataRateLimitDuration");
                    *&buffer.start.timescale = v506;
                    if (v4)
                    {
                      if (v506)
                      {
                        v507 = CFArrayCreate(allocator, &buffer, 2, MEMORY[0x1E695E9C0]);
                        if (!v507)
                        {
                          goto LABEL_1298;
                        }

                        v508 = v507;
                        OUTLINED_FUNCTION_82_8(v507, *MEMORY[0x1E69835E0]);
                        CFRelease(v508);
                      }
                    }
                  }

                  if ((v456 & 1) == 0)
                  {
                    goto LABEL_743;
                  }
                }

                if (v326 > 0.0)
                {
                  FigCFDictionarySetDouble();
                }

                LODWORD(buffer.start.value) = 1065353216;
                v4 = v1001;
                if (FigCFDictionaryGetFloatIfPresent())
                {
                  FigCFDictionarySetFloat();
                }

                v510 = figAssetExportSession_GetVideoCodecType(v1056);
                v511 = v510;
                if ((v510 - 1634755432) <= 0xB && ((1 << (v510 - 104)) & 0x8C1) != 0 || (v510 - 1634759272) <= 6 && ((1 << (v510 - 104)) & 0x51) != 0 || (v510 != 1634742376 ? (v512 = v510 == 1634742888) : (v512 = 1), !v512 ? (v513 = v510 == 1634743400) : (v513 = 1), !v513 ? (v514 = v510 == 1634743416) : (v514 = 1), !v514 ? (v515 = v510 == 1667524657) : (v515 = 1), !v515 ? (v516 = v510 == 1667790435) : (v516 = 1), !v516 ? (v517 = v510 == 1684895096) : (v517 = 1), !v517 ? (v518 = v510 == 1685481521) : (v518 = 1), !v518 ? (v519 = v510 == 1685481573) : (v519 = 1), !v519 ? (v520 = v510 == 1718908520) : (v520 = 1), !v520 ? (v521 = v510 == 1718908528) : (v521 = 1), !v521 ? (v522 = v510 == 1751479857) : (v522 = 1), !v522 ? (v523 = v510 == 1752589105) : (v523 = 1), !v523 ? (v524 = v510 == 1836415073) : (v524 = 1), !v524 ? (v525 = v510 == 1869117027) : (v525 = 1), !v525 ? (v526 = v510 == 1902405681) : (v526 = 1), !v526 ? (v527 = v510 == 1902405733) : (v527 = 1), !v527 ? (v528 = v510 == 1902407032) : (v528 = 1), !v528 ? (v529 = v510 == 1902667126) : (v529 = 1), !v529 ? (v530 = v510 == 1902998904) : (v530 = 1), !v530 ? (v531 = v510 == 1902671459) : (v531 = 1), v531))
                {
                  HDRType = v1025;
                  if (v1025)
                  {
                    PreferredFormatDescription = FigExportSettingsGetPreferredFormatDescription(v1025);
                    HDRType = FigExportSettingsGetHDRType(PreferredFormatDescription);
                  }

                  v534 = FigExportSettingsRequiresHDRMetadata(HDRType);
                  v535 = *MEMORY[0x1E6983670];
                  if (v534)
                  {
                    CFDictionarySetValue(ConcatenationOfTwoArrays, v535, *MEMORY[0x1E6983CB0]);
                    if (v1025)
                    {
                      v536 = CFArrayGetCount(v1025);
                      if (v536 <= 1)
                      {
                        OUTLINED_FUNCTION_82_8(v536, *MEMORY[0x1E69837B8]);
                      }

                      v537 = FigExportSettingsGetPreferredFormatDescription(v1025);
                      if (FigExportSettingsGetHDRType(v537) == 20)
                      {
                        v538 = FigExportSettingsGetPreferredFormatDescription(v1025);
                        if (v538)
                        {
                          Extension = CMFormatDescriptionGetExtension(v538, *MEMORY[0x1E695FFF0]);
                          if (Extension)
                          {
                            v4 = Extension;
                            v540 = CFGetTypeID(Extension);
                            a4 = v906;
                            if (v540 == CFDataGetTypeID())
                            {
                              v541 = CFRetain(v4);
                              OUTLINED_FUNCTION_82_8(v541, *MEMORY[0x1E6983548]);
                              CFRelease(v4);
                            }
                          }
                        }
                      }
                    }

                    if (*(v327 + 388) && !*(v327 + 168))
                    {
                      DictionaryValue = FigCFDictionaryGetDictionaryValue();
                      if (DictionaryValue)
                      {
                        CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E69836B0], DictionaryValue);
                      }

                      *(v327 + 168) = 1;
                    }
                  }

                  else
                  {
                    CFDictionarySetValue(ConcatenationOfTwoArrays, v535, *MEMORY[0x1E6983CB8]);
                  }
                }

                OUTLINED_FUNCTION_117_3();
                if (!LOBYTE(time2.value) || (v511 != 1667524657 ? (v543 = v511 == 1667790435) : (v543 = 1), !v543 ? (v544 = v511 == 1684895096) : (v544 = 1), !v544 ? (v545 = v511 == 1685481521) : (v545 = 1), !v545 ? (v546 = v511 == 1685481573) : (v546 = 1), !v546 ? (v547 = v511 == 1718908520) : (v547 = 1), !v547 ? (v548 = v511 == 1718908528) : (v548 = 1), !v548 ? (v549 = v511 == 1751479857) : (v549 = 1), !v549 ? (v550 = v511 == 1752589105) : (v550 = 1), !v550 ? (v551 = v511 == 1836415073) : (v551 = 1), !v551 ? (v552 = v511 == 1869117027) : (v552 = 1), !v552 ? (v553 = v511 == 1902405681) : (v553 = 1), !v553 ? (v554 = v511 == 1902405733) : (v554 = 1), !v554 ? (v555 = v511 == 1902407032) : (v555 = 1), !v555 ? (v556 = v511 == 1902667126) : (v556 = 1), !v556 ? (v557 = v511 == 1902998904) : (v557 = 1), !v557 ? (v558 = v511 == 1902671459) : (v558 = 1), !v558))
                {
                  LODWORD(v23) = 0;
                  a3 = ConcatenationOfTwoArrays;
LABEL_887:
                  VideoEncoderSpecification = v982;
                  if (v11)
                  {
                    CFRelease(v11);
                  }

                  if (!v23)
                  {
LABEL_890:
                    *&start.value = *v1010;
                    start.epoch = v961;
                    time2.value = 0;
                    v1092.value = 0;
                    v1091.value = 0;
                    v4 = v1056;
                    if (v1056)
                    {
                      LODWORD(v1090.value) = 0;
                      CMTimeMakeWithSeconds(&start, 30.0, 600);
                      FigCFDictionaryGetInt32IfPresent();
                      LODWORD(v23) = VTCompressionSessionCreate(0, 1920, 1080, v1090.value, VideoEncoderSpecification, 0, 0, 0, 0, &time2);
                      if (v23)
                      {
                        ConcatenationOfTwoArrays = 0;
                        v11 = 900;
                      }

                      else
                      {
                        ConcatenationOfTwoArrays = FigCFNumberGetSInt32();
                        if (VTCompressionSessionCopyProperty())
                        {
                          v11 = 900;
                        }

                        else
                        {
                          v11 = FigCFNumberGetSInt32();
                        }

                        if (!VTCompressionSessionCopyProperty())
                        {
                          CMTimeMakeFromDictionary(&buffer.start, v1091.value);
                          start = buffer.start;
                        }
                      }

                      if (v1092.value)
                      {
                        CFRelease(v1092.value);
                      }

                      if (v1091.value)
                      {
                        CFRelease(v1091.value);
                      }

                      if (time2.value)
                      {
                        CFRelease(time2.value);
                      }

                      if (v23)
                      {
                        OUTLINED_FUNCTION_1_193();
                        goto LABEL_1281;
                      }
                    }

                    else
                    {
                      v11 = 0;
                      ConcatenationOfTwoArrays = 0;
                    }

                    v925 = ConcatenationOfTwoArrays;
                    if (!HIDWORD(v990))
                    {
                      HIDWORD(v990) = 0;
                      FigBaseObject = 0;
                      LODWORD(v23) = 0;
                      ConcatenationOfTwoArrays = allocator;
LABEL_906:
                      OUTLINED_FUNCTION_75_11();
                      goto LABEL_907;
                    }

                    OUTLINED_FUNCTION_117_3();
                    if (LOBYTE(time2.value))
                    {
                      buffer.start.value = 0;
                      v601 = VTCompressionSessionCreate(allocator, 1920, 1080, HIDWORD(v932), VideoEncoderSpecification, 0, 0, 0, 0, &buffer);
                      if (v601)
                      {
                        v4 = v601;
                        v602 = 0;
                      }

                      else
                      {
                        v602 = CFArrayCreateMutable(allocator, 2, MEMORY[0x1E695E9C0]);
                        if (v602)
                        {
                          v603 = FigCFArrayAppendInt();
                          if (!v603)
                          {
                            v603 = FigCFArrayAppendInt();
                            if (!v603)
                            {
                              v603 = VTCompressionSessionSetProperty();
                              if (!v603)
                              {
                                v603 = VTCompressionSessionSetProperty();
                                if (!v603)
                                {
                                  v603 = VTCompressionSessionSetProperty();
                                }
                              }
                            }
                          }
                        }

                        else
                        {
                          OUTLINED_FUNCTION_1_193();
                          v603 = FigSignalErrorAtGM();
                        }

                        v4 = v603;
                      }

                      if (buffer.start.value)
                      {
                        CFRelease(buffer.start.value);
                      }

                      if (v602)
                      {
                        CFRelease(v602);
                      }

                      VideoEncoderSpecification = v982;
                      if (!v4)
                      {
                        figAssetExportSession_createSegmentCandidateBoundaries();
                        if (v604 || (v794 = OUTLINED_FUNCTION_11_74(v604, v1098, v605, v11, v606, v607, v608, v609, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, ConcatenationOfTwoArrays, v932, v938, v948, v953, v961, v966, v970, v974, v982, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073, *v1076, *&v1076[8], *&v1076[16], v1083, start.value), OUTLINED_FUNCTION_94_7(v795, v796, v797, v798, v799, v800, v801, v802, outputCallbackRefCone, v819, v825, v831, v838, v844, v850, v856, v862, v868, v874, v880, v886, v892, v898, v904, v910, v916, v922, v930, v936, v942, v952, v957, v965, v969, v973, v977, v984, theDictd, v993, v999, v1006, v1009, v1013, v1015, v1021, valueb, v1027, v1032, v1039, v1044, v1050, v1054, v1059, v1063, v1066, allocatorb, v1072, v1075, v1078, v1080, v1082, v1085, v794), figAssetExportSession_createParallelizedSegmentBoundaries(), !v629))
                        {
                          v4 = v995;
                          if (v1098)
                          {
                            CFRelease(v1098);
                            v1098 = 0;
                          }

                          LODWORD(v23) = FigSignalErrorAtGM();
                          goto LABEL_1007;
                        }

                        goto LABEL_1270;
                      }
                    }

                    figAssetExportSession_createSegmentCandidateBoundaries();
                    if (v629)
                    {
LABEL_1270:
                      LODWORD(v23) = v629;
                      OUTLINED_FUNCTION_1_193();
LABEL_1281:
                      FigSignalErrorAtGM();
                      goto LABEL_1007;
                    }

                    v636 = OUTLINED_FUNCTION_11_74(v1098, v630, v11, v631, v632, v633, v634, v635, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, ConcatenationOfTwoArrays, v932, v938, v948, v953, v961, v966, v970, v974, v982, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073, *v1076, *&v1076[8], *&v1076[16], v1083, start.value);
                    OUTLINED_FUNCTION_94_7(v637, v638, v639, v640, v641, v642, v643, v644, outputCallbackRefCond, v818, v824, v830, v836, v843, v849, v855, v861, v867, v873, v879, v885, v891, v897, v903, v909, v915, v921, v928, v935, v941, v950, v956, v963, v968, v972, v976, v983, theDictc, v992, v998, v1004, v1008, v1012, v1014, v1020, valuea, v1026, v1031, v1038, v1043, v1048, v1053, v1058, v1062, v1065, allocatora, v1071, v1074, v1077, v1079, v1081, v1084, v636);
                    figAssetExportSession_createSerializedSegmentBoundaries();
                    LODWORD(v23) = v645;
                    if (v1098)
                    {
                      CFRelease(v1098);
                      v1098 = 0;
                    }

                    OUTLINED_FUNCTION_75_11();
                    if (!v646)
                    {
                      HIDWORD(v990) = 0;
                      FigBaseObject = 0;
                      ConcatenationOfTwoArrays = allocator;
LABEL_907:
                      if (!(v1103 | v1115))
                      {
                        v958 = 0;
                        v1010[0] = 0;
                        v945 = 0;
LABEL_909:
                        v4 = v912;
LABEL_164:
                        OUTLINED_FUNCTION_60_19();
                        v980 = VideoEncoderSpecification;
                        if (!v120 || FigCFEqual() || (OUTLINED_FUNCTION_194(), FigAssetCopyTracksWithMediaType(v141, v142, v143), !theArray))
                        {
                          v121 = 0;
                          v122 = 0;
                          goto LABEL_167;
                        }

                        v144 = OUTLINED_FUNCTION_60_7();
                        v147 = CFArrayCreateMutable(v144, v145, v146);
                        v148 = v932 ^ 1;
                        if (v1035 != 1)
                        {
                          v148 = 1;
                        }

                        v900 = a3;
                        v1046 = v147;
                        if ((v148 & 1) == 0)
                        {
                          OUTLINED_FUNCTION_57_17();
                          v149 = &v1102;
                          if (v279)
                          {
                            v149 = &v1115;
                          }

                          v150 = FigRemakerGetDefaultSourceAudioTrack(*v149, &v1114);
                          if (v150)
                          {
                            LODWORD(v23) = v150;
                            OUTLINED_FUNCTION_1_193();
                            FigSignalErrorAtGM();
                            OUTLINED_FUNCTION_2_192();
                            v1035 = 0;
                            goto LABEL_659;
                          }

                          FigCFArrayAppendInt32();
                          if (*(DerivedStorage + 384))
                          {
                            v912 = v4;
                            v151 = CFArrayGetCount(theArray);
                            if (v151 >= 1)
                            {
                              v152 = v151;
                              for (i = 0; i != v152; ++i)
                              {
                                v11 = CFArrayGetValueAtIndex(theArray, i);
                                if (figAssetExportSession_isAlternateTrack(v11))
                                {
                                  v154 = figAssetExportSession_handleAudioAlternateTrack(*(DerivedStorage + 384), v11);
                                  if (v154)
                                  {
                                    LODWORD(v23) = v154;
                                    FigSignalErrorAtGM();
                                    OUTLINED_FUNCTION_2_192();
                                    v1035 = 0;
                                    v258 = v953;
                                    v4 = v912;
                                    goto LABEL_660;
                                  }
                                }
                              }
                            }

                            v1035 = 0;
                            LODWORD(v23) = 0;
                            v4 = v912;
                          }

                          else
                          {
                            v1035 = 0;
                            LODWORD(v23) = 0;
                          }

                          goto LABEL_945;
                        }

                        if (CFArrayGetCount(theArray) < 1)
                        {
                          v1035 = 0;
LABEL_945:
                          v122 = v1046;
                          CFArrayGetCount(v1046);
                          a3 = v900;
                          OUTLINED_FUNCTION_75_11();
                          if (v579)
                          {
                            ConcatenationOfTwoArrays = allocator;
                          }

                          else
                          {
                            ConcatenationOfTwoArrays = allocator;
                            if (v1046)
                            {
                              CFRelease(v1046);
                              v122 = 0;
                            }
                          }

                          if (theArray)
                          {
                            CFRelease(theArray);
                            theArray = 0;
                          }

                          v121 = v1035;
LABEL_167:
                          if (v1103 | v1115 && *(DerivedStorage + 216))
                          {
                            v1035 = v121;
                            v1046 = v122;
                            if (*(*(CMBaseObjectGetVTable() + 16) + 48))
                            {
                              OUTLINED_FUNCTION_301();
                              v123();
                            }

                            v124 = *(DerivedStorage + 16);
                            v125 = *(*(CMBaseObjectGetVTable() + 16) + 48);
                            if (v125)
                            {
                              v125(v124, 1635088502, &v1110);
                            }

                            ConcatenationOfTwoArrays = FigCFArrayCreateConcatenationOfTwoArrays();
                            if (v1111)
                            {
                              CFRelease(v1111);
                              v1111 = 0;
                            }

                            v122 = v1046;
                            if (v1110)
                            {
                              CFRelease(v1110);
                              v1110 = 0;
                            }

                            if (ConcatenationOfTwoArrays)
                            {
                              if (CFArrayGetCount(ConcatenationOfTwoArrays) < 1)
                              {
                                v126 = 0;
                              }

                              else
                              {
                                v126 = 0;
                                v11 = 0;
                                v1018 = @"IsEnabled";
                                do
                                {
                                  v127 = CFArrayGetValueAtIndex(ConcatenationOfTwoArrays, 0);
                                  v128 = *(*(CMBaseObjectGetVTable() + 16) + 32);
                                  if (v128)
                                  {
                                    v128(v127, &key + 4, &key);
                                  }

                                  v1106 = value;
                                  v129 = FigAssetTrackGetCMBaseObject(v127);
                                  v130 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                                  if (v130)
                                  {
                                    v130(v129, v1018, allocator, &v1106);
                                  }

                                  OUTLINED_FUNCTION_102_5();
                                  if (v279)
                                  {
                                    VideoEncoderSpecification = v980;
                                    v138 = v126;
                                    if (!v126)
                                    {
                                      v139 = OUTLINED_FUNCTION_47_21(0, v131, v132, v133, v134, v135, v136, v137, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1018, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator);
                                      v138 = CFArrayCreateMutable(v139, v140, MEMORY[0x1E695E9C0]);
                                      if (!v138)
                                      {
                                        OUTLINED_FUNCTION_1_193();
                                        LODWORD(v23) = FigSignalErrorAtGM();
                                        OUTLINED_FUNCTION_10_78();
                                        goto LABEL_1237;
                                      }
                                    }

                                    v126 = v138;
                                    FigCFArrayAppendInt32();
                                  }

                                  else
                                  {
                                    VideoEncoderSpecification = v980;
                                  }

                                  OUTLINED_FUNCTION_378_0();
                                }

                                while (!v279);
                              }

                              CFRelease(ConcatenationOfTwoArrays);
                              ConcatenationOfTwoArrays = allocator;
                              OUTLINED_FUNCTION_75_11();
                              v122 = v1046;
                              v121 = v1035;
                            }

                            else
                            {
                              v126 = 0;
                              ConcatenationOfTwoArrays = allocator;
                              v121 = v1035;
                            }
                          }

                          else
                          {
                            v126 = 0;
                          }

                          v404 = v1064 | v122 | v121;
                          v405 = v404 != 0;
                          if (!v404 && !v126 && !DWORD1(v1114))
                          {
                            LODWORD(v23) = FigSignalErrorAtGM();
                            OUTLINED_FUNCTION_17_49();
                            v1017 = 0;
                            value = 0;
LABEL_658:
                            ConcatenationOfTwoArrays = 0;
                            v1035 = 0;
                            v1064 = 0;
                            v1046 = 0;
                            goto LABEL_659;
                          }

                          v406 = v11 + 16510976;
                          v11 = HIDWORD(v932);
                          if (HIDWORD(v932) != v406)
                          {
                            v405 = 1;
                          }

                          v1017 = v126;
                          if (!v405)
                          {
                            LODWORD(v23) = FigSignalErrorAtGM();
                            OUTLINED_FUNCTION_10_78();
                            goto LABEL_658;
                          }

                          LODWORD(v918) = v406;
                          v1035 = v121;
                          a4 = v1052;
                          v1046 = v122;
                          if (v122 | v121)
                          {
                            v407 = CFDictionaryCreate(ConcatenationOfTwoArrays, &kFigRemakerAudioProcessingOption_TimePitchAlgorithm, (DerivedStorage + 200), 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
                            if (v1035)
                            {
                              v11 = HIDWORD(v990);
                              v408 = &v1102;
                              if (!HIDWORD(v990))
                              {
                                v408 = &v1115;
                              }

                              v409 = FigRemakerAddAudioMixdownTrackWithPreset(*v408, v1035, v938, v407, &v1114 + 12);
                              if (v409)
                              {
                                LODWORD(v23) = v409;
                                value = v407;
                                OUTLINED_FUNCTION_1_193();
                                FigSignalErrorAtGM();
                                OUTLINED_FUNCTION_17_49();
LABEL_1317:
                                ConcatenationOfTwoArrays = 0;
                                goto LABEL_659;
                              }

                              if (HIDWORD(v990))
                              {
                                v410 = *(v1061 + 2);
                                LODWORD(buffer.start.value) = 0;
                                HIDWORD(buffer.start.value) = HIDWORD(v1114);
                                buffer.start.timescale = 1936684398;
                                CFArrayAppendValue(v410, &buffer);
                              }

                              LODWORD(v23) = 0;
                            }

                            if (v1046)
                            {
                              v411 = CFArrayGetCount(v1046);
                              if (v411 >= 1)
                              {
                                v11 = v411;
                                a4 = 0;
                                v412 = HIDWORD(v990);
                                do
                                {
                                  FigCFArrayGetIntAtIndex();
                                  if (v412)
                                  {
                                    v413 = &v1102;
                                  }

                                  else
                                  {
                                    v413 = &v1115;
                                  }

                                  v414 = *v413;
                                  v415 = v1114;
                                  VTable = CMBaseObjectGetVTable();
                                  OUTLINED_FUNCTION_109_3(VTable);
                                  v418 = *(v417 + 88);
                                  if (v932)
                                  {
                                    if (!v418)
                                    {
                                      goto LABEL_916;
                                    }

                                    OUTLINED_FUNCTION_496();
                                  }

                                  else
                                  {
                                    if (!v418)
                                    {
LABEL_916:
                                      LODWORD(v23) = -12782;
LABEL_917:
                                      value = v407;
                                      OUTLINED_FUNCTION_1_193();
                                      FigSignalErrorAtGM();
                                      OUTLINED_FUNCTION_17_49();
                                      goto LABEL_918;
                                    }

                                    v423 = &v1114 + 12;
                                    v419 = v414;
                                    v420 = v415;
                                    v421 = v938;
                                    v422 = v407;
                                  }

                                  v424 = v418(v419, v420, v421, v422, v423);
                                  LODWORD(v23) = v424;
                                  if (v424)
                                  {
                                    goto LABEL_917;
                                  }

                                  v412 = HIDWORD(v990);
                                  if (HIDWORD(v990))
                                  {
                                    OUTLINED_FUNCTION_51_24(v424, v425, v426, v427, v428, v429, v430, v431, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061);
                                  }

                                  ConcatenationOfTwoArrays = &v1102;
                                  v23 = &v1115;
                                  if (v412)
                                  {
                                    v432 = &v1102;
                                  }

                                  else
                                  {
                                    v432 = &v1115;
                                  }

                                  OUTLINED_FUNCTION_120_3(v432);
                                  ++a4;
                                }

                                while (v11 != a4);
                                OUTLINED_FUNCTION_36_28();
                                VideoEncoderSpecification = v980;
                              }
                            }

                            v11 = HIDWORD(v932);
                            if (v407)
                            {
                              CFRelease(v407);
                            }
                          }

                          if (v1064 && CFArrayGetCount(v1064) >= 1)
                          {
                            v11 = 0;
                            ConcatenationOfTwoArrays = &v1115;
                            while (1)
                            {
                              FigCFArrayGetIntAtIndex();
                              if (!*(*(CMBaseObjectGetVTable() + 16) + 88))
                              {
                                LODWORD(v23) = -12782;
                                goto LABEL_716;
                              }

                              OUTLINED_FUNCTION_496();
                              v434 = v433();
                              if (v434)
                              {
                                break;
                              }

                              v442 = HIDWORD(v990);
                              if (HIDWORD(v990))
                              {
                                OUTLINED_FUNCTION_51_24(v434, v435, v436, v437, v438, v439, v440, v441, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061);
                              }

                              a4 = &v1102;
                              if (v442)
                              {
                                v443 = &v1102;
                              }

                              else
                              {
                                v443 = &v1115;
                              }

                              OUTLINED_FUNCTION_120_3(v443);
                              OUTLINED_FUNCTION_378_0();
                              if (v279)
                              {
                                OUTLINED_FUNCTION_36_28();
                                VideoEncoderSpecification = v980;
                                v11 = HIDWORD(v932);
                                goto LABEL_647;
                              }
                            }

                            LODWORD(v23) = v434;
                            goto LABEL_716;
                          }

LABEL_647:
                          if (v11 == v918)
                          {
                            goto LABEL_1157;
                          }

                          v400 = v1073;
                          if (!v11)
                          {
                            v562 = OUTLINED_FUNCTION_60_7();
                            v11 = CFDictionaryCreateMutable(v562, v563, v564, v565);
                            if (FigCFEqual())
                            {
                              v566 = value;
                            }

                            else
                            {
                              v566 = v1001;
                            }

                            CFDictionarySetValue(v11, @"RemakerPassthroughOption_Retime", v566);
                            if (BYTE12(v1088))
                            {
                              OUTLINED_FUNCTION_57_17();
                              v696 = &v1103;
                              if (v279)
                              {
                                v696 = &v1115;
                              }

                              canPerformFastFrameRateConversionWithPreset = figAssetExportSession_canPerformFastFrameRateConversionWithPreset(v1073, v1056, *v696);
                              if (canPerformFastFrameRateConversionWithPreset)
                              {
                                OUTLINED_FUNCTION_11_74(canPerformFastFrameRateConversionWithPreset, v698, v699, v700, v701, v702, v703, v704, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073, *v1076, *&v1076[8], *&v1076[16], v1083, start.value);
                                v705 = CMTimeCopyAsDictionary(&buffer.start, ConcatenationOfTwoArrays);
                                if (!v705)
                                {
                                  OUTLINED_FUNCTION_1_193();
                                  LODWORD(v23) = FigSignalErrorAtGM();
                                  v1073 = 0;
                                  goto LABEL_1316;
                                }

                                v706 = v705;
                                v707 = OUTLINED_FUNCTION_308();
                                CFDictionarySetValue(v707, v708, v709);
                                CFRelease(v706);
                              }
                            }

                            if (DWORD1(v1114))
                            {
                              v567 = &v1102;
                              if (!HIDWORD(v990))
                              {
                                v567 = &v1115;
                              }

                              v568 = FigRemakerAddPassthroughTrackWithOptions(*v567, DWORD1(v1114), v11, &v1114 + 8);
                              LODWORD(v23) = v568;
                              if (v568)
                              {
                                OUTLINED_FUNCTION_1_193();
                                FigSignalErrorAtGM();
                                v1073 = 0;
                                goto LABEL_717;
                              }

                              v569 = &v1102;
                              if (!HIDWORD(v990))
                              {
                                v569 = &v1115;
                              }

                              OUTLINED_FUNCTION_55_22(v568, *v569);
LABEL_931:
                              VideoEncoderSpecification = v980;
                            }

                            else if (v1017)
                            {
                              v592 = CFArrayGetCount(v1017);
                              if (v592 >= 1)
                              {
                                v593 = v592;
                                v594 = 0;
                                LODWORD(a4) = HIDWORD(v990);
                                while (1)
                                {
                                  FigCFArrayGetIntAtIndex();
                                  if (a4)
                                  {
                                    v595 = &v1102;
                                  }

                                  else
                                  {
                                    v595 = &v1115;
                                  }

                                  v596 = *v595;
                                  v597 = DWORD1(v1114);
                                  v598 = *(*(CMBaseObjectGetVTable() + 16) + 120);
                                  if (!v598)
                                  {
                                    LODWORD(v23) = -12782;
                                    goto LABEL_1111;
                                  }

                                  v599 = v598(v596, v597, v11, &v1114 + 8);
                                  if (v599)
                                  {
                                    break;
                                  }

                                  a4 = HIDWORD(v990);
                                  ConcatenationOfTwoArrays = &v1102;
                                  v23 = &v1115;
                                  if (HIDWORD(v990))
                                  {
                                    v600 = &v1102;
                                  }

                                  else
                                  {
                                    v600 = &v1115;
                                  }

                                  OUTLINED_FUNCTION_55_22(v599, *v600);
                                  if (v593 == ++v594)
                                  {
                                    OUTLINED_FUNCTION_36_28();
                                    goto LABEL_931;
                                  }
                                }

                                LODWORD(v23) = v599;
LABEL_1111:
                                VideoEncoderSpecification = v980;
                                DerivedStorage = v945;
                                a4 = v958;
                                FigSignalErrorAtGM();
                                v1073 = 0;
                                value = 0;
                                ConcatenationOfTwoArrays = 0;
LABEL_1197:
                                v258 = v953;
                                goto LABEL_347;
                              }
                            }

                            v400 = v1073;
                            if (v11)
                            {
                              CFRelease(v11);
                            }

                            goto LABEL_1158;
                          }

                          if (v1017)
                          {
                            v444 = *(DerivedStorage + 216);
                            if (!v444)
                            {
                              goto LABEL_1158;
                            }

                            v445 = *(v444 + 64);
                            if (!v445)
                            {
                              OUTLINED_FUNCTION_1_193();
                              LODWORD(v23) = FigSignalErrorAtGM();
                              goto LABEL_1315;
                            }

                            v446 = &v1103;
                            if (!HIDWORD(v990))
                            {
                              v446 = &v1115;
                            }

                            v447 = *v446;
                            v448 = *(v444 + 168);
                            v449 = *(v444 + 176);
                            v450 = *(v444 + 184);
                            v451 = *(v444 + 40);
                            if (*(v444 + 48))
                            {
                              v452 = *(v444 + 56);
                              v453 = *(v444 + 136);
                              if (!*(v444 + 72))
                              {
                                goto LABEL_1120;
                              }
                            }

                            else
                            {
                              v453 = *(v444 + 72);
                              if (!*(v444 + 72))
                              {
                                v452 = 0;
LABEL_1120:
                                v681 = 0;
LABEL_1121:
                                v693 = *(v444 + 140);
                                v694 = *(v444 + 104);
                                v695 = *(v444 + 96);
                                *&buffer.start.value = v1088;
                                buffer.start.epoch = v1089;
                                HIDWORD(v837) = v7;
                                LODWORD(v837) = v694;
                                LODWORD(v23) = FigRemakerAddVideoCompositionTrack(v447, v1017, v448, v449, v450, v445, v451, v452, v453, v681, &buffer.start.value, __SPAIR64__(v695, v693), v837, v8, v945, v11, VideoEncoderSpecification, a3, v1010[0], v958, &v1114 + 8);
                                if (v23)
                                {
                                  OUTLINED_FUNCTION_1_193();
                                  FigSignalErrorAtGM();
LABEL_1315:
                                  OUTLINED_FUNCTION_17_49();
LABEL_1316:
                                  value = 0;
                                  goto LABEL_1317;
                                }

LABEL_1158:
                                OUTLINED_FUNCTION_60_19();
                                if (!v728)
                                {
                                  v401 = v1041;
                                  DerivedStorage = v945;
                                  goto LABEL_1166;
                                }

                                OUTLINED_FUNCTION_101_5();
                                FigAssetCopyTracksWithMediaType(v729, v730, v731);
                                if (!cf)
                                {
LABEL_1164:
                                  v402 = v1035;
                                  v401 = v1041;
                                  DerivedStorage = v945;
                                  v403 = v1017;
                                  goto LABEL_1166;
                                }

                                v732 = CFArrayGetCount(cf);
                                if (v732 < 1)
                                {
LABEL_1161:
                                  if (cf)
                                  {
                                    CFRelease(cf);
                                    cf = 0;
                                  }

                                  ConcatenationOfTwoArrays = allocator;
                                  v400 = v1073;
                                  goto LABEL_1164;
                                }

                                if (qword_1EAF1AA40 != -1)
                                {
                                  OUTLINED_FUNCTION_30_30();
                                  dispatch_once_f(&qword_1EAF1AA40, &qword_1EAF1AA38, v807);
                                }

                                if (qword_1EAF1AA38)
                                {
                                  v752 = CFArrayGetCount(qword_1EAF1AA38);
                                  v1108 = 0;
                                  OUTLINED_FUNCTION_80_10(v752, @"kFigAssetExportSessionProperty_PresetName", v753, &v1108, v754, v755, v756, v757, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073);
                                  if (v752)
                                  {
                                    if (!v1108)
                                    {
                                      v11 = 0;
                                      a4 = v1052;
                                      VideoEncoderSpecification = v980;
                                      goto LABEL_1250;
                                    }

                                    v780 = OUTLINED_FUNCTION_383();
                                    v1130.length = v752;
                                    v11 = CFArrayContainsValue(v780, v1130, v781) == 0;
                                    a4 = v1052;
                                  }

                                  else
                                  {
                                    v11 = 1;
                                  }

                                  VideoEncoderSpecification = v980;
                                }

                                else
                                {
                                  v1108 = 0;
                                  OUTLINED_FUNCTION_80_10(v732, @"kFigAssetExportSessionProperty_PresetName", v733, &v1108, v734, v735, v736, v737, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073);
                                  v11 = 1;
                                }

                                if (v1108)
                                {
                                  CFRelease(v1108);
                                  v1108 = 0;
                                }

LABEL_1250:
                                figAssetExportSession_actualOutputFileType(v1073);
                                figAssetExportSession_GetFigFormatReaderFileFormat();
                                OUTLINED_FUNCTION_101_5();
                                CanFileTypeSupportMediaType = FigRemakerCanFileTypeSupportMediaType(v782, v783, 0);
                                if (v11 && CanFileTypeSupportMediaType)
                                {
                                  v11 = 0;
                                  while (1)
                                  {
                                    v785 = CFArrayGetValueAtIndex(cf, 0);
                                    LODWORD(time2.value) = 0;
                                    LODWORD(v1092.value) = 0;
                                    v786 = *(*(CMBaseObjectGetVTable() + 16) + 32);
                                    if (v786)
                                    {
                                      v786(v785, &time2, 0);
                                    }

                                    OUTLINED_FUNCTION_57_17();
                                    v787 = &v1102;
                                    if (v279)
                                    {
                                      v787 = &v1115;
                                    }

                                    v788 = *v787;
                                    value_low = LODWORD(time2.value);
                                    v790 = *(*(CMBaseObjectGetVTable() + 16) + 136);
                                    if (!v790)
                                    {
                                      LODWORD(v23) = -12782;
                                      goto LABEL_716;
                                    }

                                    v791 = v790(v788, value_low, v1007, &v1092);
                                    if (v791)
                                    {
                                      break;
                                    }

                                    a4 = v1052;
                                    VideoEncoderSpecification = v980;
                                    if (HIDWORD(v990))
                                    {
                                      v792 = *(v1061 + 2);
                                      buffer.start.value = __PAIR64__(v1092.value, time2.value);
                                      buffer.start.timescale = 1835365473;
                                      CFArrayAppendValue(v792, &buffer);
                                    }

                                    v793 = &v1102;
                                    if (!HIDWORD(v990))
                                    {
                                      v793 = &v1115;
                                    }

                                    figAssetExportSession_transferTrackProperties(DerivedStorage, *v793, LODWORD(time2.value));
                                    LODWORD(v23) = 0;
                                    OUTLINED_FUNCTION_378_0();
                                    if (v279)
                                    {
                                      goto LABEL_1161;
                                    }
                                  }

                                  LODWORD(v23) = v791;
LABEL_716:
                                  OUTLINED_FUNCTION_1_193();
                                  FigSignalErrorAtGM();
                                  OUTLINED_FUNCTION_17_49();
LABEL_717:
                                  value = 0;
                                  goto LABEL_918;
                                }

                                goto LABEL_1161;
                              }

                              v453 = 0;
                              v452 = *(v444 + 80);
                            }

                            v681 = *(v444 + 88);
                            goto LABEL_1121;
                          }

                          if (!DWORD1(v1114))
                          {
                            goto LABEL_1158;
                          }

                          v1108 = 0;
                          v581 = OUTLINED_FUNCTION_48_21();
                          FigAssetExportSessionCopyProperty(v581, v582, v583, v584);
                          if (v1108)
                          {
                            v591 = v1056;
                            if (FigCFEqual() || FigCFEqual() || !v1056)
                            {
LABEL_1106:
                              v691 = v925;
                              if (v1108)
                              {
                                CFRelease(v1108);
                                v1108 = 0;
                              }

                              goto LABEL_1133;
                            }
                          }

                          else
                          {
                            v591 = v1056;
                            if (!v1056)
                            {
                              v691 = v925;
LABEL_1133:
                              LODWORD(v938) = v7;
                              LODWORD(v932) = v8;
                              if (!HIDWORD(v990))
                              {
                                OUTLINED_FUNCTION_11_74(v1115, DWORD1(v1114), v585, v586, v587, v588, v589, v590, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], 0, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073, *v1076, *&v1076[8], *&v1076[16], v1083, start.value);
                                v900 = a3;
                                v912 = v4;
                                v778 = FigRemakerAddVideoTrack(v776, v777, v938, v932, v945, v11, VideoEncoderSpecification, v4, a3, v1010[0], &buffer.start.value, &v1114 + 8);
                                OUTLINED_FUNCTION_55_22(v778, v1115);
                                if (v778)
                                {
                                  LODWORD(v23) = v778;
                                  OUTLINED_FUNCTION_1_193();
                                  FigSignalErrorAtGM();
                                  OUTLINED_FUNCTION_2_192();
                                  v258 = v953;
                                  v4 = v912;
                                  goto LABEL_1288;
                                }

                                OUTLINED_FUNCTION_36_28();
                                v400 = v1073;
                                v4 = v912;
                                VideoEncoderSpecification = v980;
                                goto LABEL_1158;
                              }

                              if (v691 >= 1)
                              {
                                v710 = 0;
                                v918 = *MEMORY[0x1E6983820];
                                v912 = *MEMORY[0x1E6983738];
                                v906 = *MEMORY[0x1E6983730];
                                v894 = @"NegativeCompositionOffsetsInISOFilePolicy";
                                v888 = @"NegativeCompositionOffsetsInISOFilePolicy_Allow";
                                while (1)
                                {
                                  v711 = CFArrayGetValueAtIndex(FigBaseObject, v710);
                                  if (v711[12] == 4)
                                  {
                                    v712 = a3;
                                  }

                                  else
                                  {
                                    v11 = v711;
                                    v713 = CFDictionaryGetCount(a3);
                                    v714 = CFDictionaryCreateMutableCopy(allocator, v713 + 3, a3);
                                    if (!v714)
                                    {
                                      OUTLINED_FUNCTION_1_193();
                                      LODWORD(v23) = FigSignalErrorAtGM();
                                      OUTLINED_FUNCTION_17_49();
                                      v1017 = 0;
                                      value = 0;
LABEL_918:
                                      ConcatenationOfTwoArrays = 0;
                                      v258 = v953;
LABEL_919:
                                      VideoEncoderSpecification = v980;
                                      goto LABEL_660;
                                    }

                                    v715 = v714;
                                    CFArrayGetValueAtIndex(v1099, v710);
                                    SInt64 = FigCFNumberCreateSInt64();
                                    v712 = v715;
                                    CFDictionarySetValue(v715, v918, SInt64);
                                    if (SInt64)
                                    {
                                      CFRelease(SInt64);
                                    }

                                    if (v710)
                                    {
                                      v717 = v1001;
                                    }

                                    else
                                    {
                                      v717 = value;
                                    }

                                    CFDictionarySetValue(v715, v912, v717);
                                    if (v925 == 1)
                                    {
                                      v718 = value;
                                    }

                                    else
                                    {
                                      v718 = v1001;
                                    }

                                    CFDictionarySetValue(v715, v906, v718);
                                    if (a3)
                                    {
                                      CFRelease(a3);
                                    }

                                    OUTLINED_FUNCTION_11_74(*v11, DWORD1(v1114), v719, v720, v721, v722, v723, v724, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073, *v1076, *&v1076[8], *&v1076[16], v1083, start.value);
                                    VideoEncoderSpecification = v980;
                                    a3 = v715;
                                    v23 = FigRemakerAddVideoTrack(v725, v726, v938, v932, v945, HIDWORD(v932), v980, v4, v715, v1010[0], &buffer.start.value, &v1114 + 8);
                                    OUTLINED_FUNCTION_55_22(v23, *v11);
                                    if (v23)
                                    {
                                      OUTLINED_FUNCTION_1_193();
                                      FigSignalErrorAtGM();
                                      OUTLINED_FUNCTION_10_78();
                                      ConcatenationOfTwoArrays = 0;
LABEL_1237:
                                      v1017 = 0;
LABEL_659:
                                      v258 = v953;
LABEL_660:
                                      DerivedStorage = v945;
                                      a4 = v958;
                                      goto LABEL_347;
                                    }

                                    FigRemakerSetFormatWriterTrackProperty(*v11, DWORD2(v1114), v894, v888);
                                    v727 = *(v11 + 16);
                                    buffer.start.value = *(&v1114 + 4);
                                    buffer.start.timescale = 1986618469;
                                    CFArrayAppendValue(v727, &buffer);
                                  }

                                  ++v710;
                                  if (!--v925)
                                  {
                                    goto LABEL_1154;
                                  }
                                }
                              }

                              v712 = a3;
LABEL_1154:
                              if (v1099)
                              {
                                CFRelease(v1099);
                                v1099 = 0;
                              }

                              a3 = v712;
                              ConcatenationOfTwoArrays = allocator;
                              a4 = v1052;
LABEL_1157:
                              v400 = v1073;
                              goto LABEL_1158;
                            }
                          }

                          v682 = CFDictionaryGetValue(v591, @"videoMatrixHandling");
                          if (v682 && CFEqual(v682, @"ApplyRotation"))
                          {
                            time2.value = 0;
                            v683 = v953;
                            if (!v953)
                            {
                              v803 = OUTLINED_FUNCTION_91_9();
                              v683 = figAssetExportSession_CopySourceVideoTrack(v803, v804);
                              if (!v683)
                              {
                                OUTLINED_FUNCTION_1_193();
                                LODWORD(v23) = FigSignalErrorAtGM();
                                OUTLINED_FUNCTION_2_192();
                                goto LABEL_919;
                              }
                            }

                            v684 = *MEMORY[0x1E695EFD0];
                            v685 = *(MEMORY[0x1E695EFD0] + 8);
                            v686 = *(MEMORY[0x1E695EFD0] + 16);
                            v687 = *(MEMORY[0x1E695EFD0] + 24);
                            v953 = v683;
                            v688 = FigAssetTrackGetCMBaseObject(v683);
                            CMBaseObjectCopyProperty(v688, @"PreferredTransform", ConcatenationOfTwoArrays, &time2);
                            if (time2.value)
                            {
                              v689 = CFGetTypeID(time2.value);
                              if (v689 == CFArrayGetTypeID())
                              {
                                FigGetCGAffineTransformFrom3x3MatrixArray(time2.value, &buffer);
                                v685 = *&buffer.start.timescale;
                                v684 = *&buffer.start.value;
                                v687 = *&buffer.duration.value;
                                v686 = *&buffer.start.epoch;
                              }

                              if (time2.value)
                              {
                                CFRelease(time2.value);
                              }
                            }

                            v690 = v8 * v687 + v685 * v7;
                            v7 = fabs(v8 * v686 + v684 * v7);
                            v8 = fabs(v690);
                            VideoEncoderSpecification = v980;
                            v11 = HIDWORD(v932);
                          }

                          goto LABEL_1106;
                        }

                        v1035 = 0;
                        v11 = 0;
                        if (a4)
                        {
                          v464 = 1;
                        }

                        else
                        {
                          v464 = v918 == 0;
                        }

                        ConcatenationOfTwoArrays = !v464;
                        v1017 = @"RemakerAudioMixdown_SourceTrackID";
                        v918 = @"RemakerAudioMixdown_VolumeCurve";
                        v912 = @"RemakerFamilyAudioProcessingOption_TimePitchAlgorithmSourceTrack";
                        v906 = @"RemakerAudioMixdown_AudioProcessingTap";
                        while (1)
                        {
                          v465 = CFArrayGetValueAtIndex(theArray, 0);
                          v466 = v465;
                          if (*(DerivedStorage + 384) && figAssetExportSession_isAlternateTrack(v465))
                          {
                            LODWORD(v23) = figAssetExportSession_handleAudioAlternateTrack(*(DerivedStorage + 384), v466);
                            if (v23)
                            {
                              FigSignalErrorAtGM();
                              OUTLINED_FUNCTION_2_192();
                              goto LABEL_1287;
                            }
                          }

                          else
                          {
                            v1106 = value;
                            v467 = FigAssetTrackGetCMBaseObject(v466);
                            v468 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                            if (v468)
                            {
                              v468(v467, @"IsEnabled", allocator, &v1106);
                            }

                            HIDWORD(key) = 0;
                            v469 = CMBaseObjectGetVTable();
                            v478 = *(v469 + 16);
                            v477 = v469 + 16;
                            v479 = *(v478 + 32);
                            if (v479)
                            {
                              v477 = v479(v466, &key + 4, 0);
                            }

                            if (v1001 == v1106)
                            {
                              VideoEncoderSpecification = v980;
                              if ((ConcatenationOfTwoArrays & 1) == 0)
                              {
                                FigCFArrayAppendInt32();
                                goto LABEL_710;
                              }

                              v480 = OUTLINED_FUNCTION_47_21(v477, v470, v471, v472, v473, v474, v475, v476, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator);
                              v482 = CFDictionaryCreateMutable(v480, v481, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
                              if (!v482)
                              {
                                OUTLINED_FUNCTION_1_193();
                                LODWORD(v23) = FigSignalErrorAtGM();
                                OUTLINED_FUNCTION_2_192();
                                v258 = v953;
                                goto LABEL_1289;
                              }

                              v490 = v482;
                              v491 = v1035;
                              if (!v1035)
                              {
                                v492 = OUTLINED_FUNCTION_47_21(0, v483, v484, v485, v486, v487, v488, v489, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v945, v953, v958, v966, v970, v974, v980, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, 0, v1041, v1046, v1052, v1056, v1061, v1064, allocator);
                                v491 = CFArrayCreateMutable(v492, v493, MEMORY[0x1E695E9C0]);
                                if (!v491)
                                {
                                  v1073 = v490;
                                  OUTLINED_FUNCTION_1_193();
                                  LODWORD(v23) = FigSignalErrorAtGM();
                                  v11 = 0;
                                  v1017 = 0;
                                  value = 0;
                                  ConcatenationOfTwoArrays = 0;
                                  v1035 = 0;
LABEL_1287:
                                  v258 = v953;
LABEL_1288:
                                  VideoEncoderSpecification = v980;
LABEL_1289:
                                  a3 = v900;
                                  goto LABEL_660;
                                }
                              }

                              v1035 = v491;
                              v494 = *(DerivedStorage + 208);
                              FigCFDictionarySetInt32();
                              if (v494)
                              {
                                v495 = CFDictionaryGetValue(*(DerivedStorage + 208), SHIDWORD(key));
                                if (v495)
                                {
                                  v496 = v495;
                                  v497 = v495[3];
                                  if (v497)
                                  {
                                    CFDictionarySetValue(v490, v918, v497);
                                  }

                                  v498 = v496[1];
                                  if (v498)
                                  {
                                    CFDictionarySetValue(v490, v912, v498);
                                  }

                                  v499 = v496[2];
                                  if (v499)
                                  {
                                    CFDictionarySetValue(v490, v906, v499);
                                  }
                                }
                              }

                              CFArrayAppendValue(v1035, v490);
                              CFRelease(v490);
                            }
                          }

                          VideoEncoderSpecification = v980;
LABEL_710:
                          OUTLINED_FUNCTION_378_0();
                          if (v279)
                          {
                            goto LABEL_945;
                          }
                        }
                      }

                      v610 = CMBaseObjectGetDerivedStorage();
                      v611 = OUTLINED_FUNCTION_60_7();
                      v949 = CFDictionaryCreateMutable(v611, v612, v613, v614);
                      v615 = figAssetExportSession_CopyEffectiveColorProperties(v1073, v1056, v1025);
                      if (v615)
                      {
                        v616 = v615;
                        v617 = CFDictionaryGetValue(v615, @"colorPrimaries");
                        if (v617 && *(v610 + 216))
                        {
                          CFDictionarySetValue(v949, *MEMORY[0x1E6983DC0], v617);
                        }

                        v618 = CFDictionaryGetValue(v616, @"transferFunction");
                        if (v618 && *(v610 + 216))
                        {
                          CFDictionarySetValue(v949, *MEMORY[0x1E6983DD8], v618);
                        }

                        v619 = CFDictionaryGetValue(v616, @"ycbcrMatrix");
                        if (v619 && *(v610 + 216))
                        {
                          CFDictionarySetValue(v949, *MEMORY[0x1E6983DE0], v619);
                        }

                        CFRelease(v616);
                      }

                      if (v1056)
                      {
                        v620 = CFDictionaryGetValue(v1056, @"scalingMode");
                        if (v620)
                        {
                          CFDictionarySetValue(v949, *MEMORY[0x1E6983E30], v620);
                        }

                        v621 = CFDictionaryGetValue(v1056, @"videoMatrixHandling");
                        if (v621)
                        {
                          CFDictionarySetValue(v949, @"MatrixHandling", v621);
                        }
                      }

                      v622 = CMBaseObjectGetDerivedStorage();
                      v623 = OUTLINED_FUNCTION_60_7();
                      v962 = CFDictionaryCreateMutable(v623, v624, v625, v626);
                      v627 = v622[27];
                      if (!v627)
                      {
LABEL_1225:
                        OUTLINED_FUNCTION_57_17();
                        v763 = &v1103;
                        if (v279)
                        {
                          v763 = &v1115;
                        }

                        v764 = *v763;
                        v1049 = CMBaseObjectGetDerivedStorage();
                        v765 = OUTLINED_FUNCTION_60_7();
                        v769 = CFDictionaryCreateMutable(v765, v766, v767, v768);
                        v770 = figAssetExportSession_canPerformFastFrameRateConversionWithPreset(v1073, v1056, v764);
                        if (v770)
                        {
                          CFDictionarySetValue(v769, @"RemakerVideoProcessingOption_VideoFrameRateConversionAlgorithm", @"RemakerVideoFrameRateConversionAlgorithm_Fast");
                        }

                        buffer.start.value = value;
                        OUTLINED_FUNCTION_80_10(v770, @"kFigAssetExportSessionProperty_CanPerformMultiplePassesOverSourceMediaData", v771, &buffer, v772, v773, v774, v775, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v925, v932, v938, v949, v953, v962, v966, v970, v974, v982, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1049, v1052, v1056, v1061, v1064, allocator, v1070, v1073);
                        v1010[0] = v769;
                        CFDictionarySetValue(v769, @"Remaker_MultiPass", buffer.start.value);
                        OUTLINED_FUNCTION_102_5();
                        v11 = 1835365473;
                        if (v279)
                        {
                          CFDictionarySetValue(v769, @"Remaker_PreserveSyncFrames", v1001);
                        }

                        goto LABEL_909;
                      }

                      if (v627[19])
                      {
                        OUTLINED_FUNCTION_78_10();
                        v1092.value = 0;
                        v1091.value = 0;
                        if (*v622)
                        {
                          v758 = FigCFWeakReferenceHolderCopyReferencedObject();
                          v628 = v758;
                          if (v758)
                          {
                            (*(v622[27] + 152))(v758, v1025, &buffer, &time2, &v1092, &v1091);
                            if (buffer.start.value)
                            {
                              CFDictionarySetValue(v962, @"VideoCompositionProcessor_CompositionColorPrimaries", buffer.start.value);
                            }
                          }

                          ConcatenationOfTwoArrays = allocator;
                          VideoEncoderSpecification = v982;
                          LODWORD(a4) = v906;
                        }

                        else
                        {
                          v628 = 0;
                        }

                        if (time2.value)
                        {
                          CFDictionarySetValue(v962, @"VideoCompositionProcessor_CompositionTransferFunction", time2.value);
                        }

                        if (v1092.value)
                        {
                          CFDictionarySetValue(v962, @"VideoCompositionProcessor_CompositionYCbCrMatrix", v1092.value);
                        }

                        if (v1091.value)
                        {
                          v759 = FigCFEqual();
                          v760 = kFigVideoCompositionProcessorHDRDisplayMetadataPolicy_Generate;
                          if (!v759)
                          {
                            v760 = kFigVideoCompositionProcessorHDRDisplayMetadataPolicy_Propagate;
                          }

                          CFDictionarySetValue(v962, @"VideoCompositionProcessor_HDRDisplayMetadataPolicy", *v760);
                        }

                        v627 = v622[27];
                        if (!v627)
                        {
                          goto LABEL_1223;
                        }
                      }

                      else
                      {
                        v628 = 0;
                      }

                      v761 = v627[24];
                      if (!v761 || (CFDictionarySetValue(v962, @"VideoCompositionProcessor_OutputBufferDescription", v761), (v627 = v622[27]) != 0))
                      {
                        v762 = v627[25];
                        if (v762)
                        {
                          CFDictionarySetValue(v962, @"VideoCompositionProcessor_SerializableLookupableSpatialVideoConfigurations", v762);
                        }
                      }

LABEL_1223:
                      if (v628)
                      {
                        CFRelease(v628);
                      }

                      goto LABEL_1225;
                    }

                    ConcatenationOfTwoArrays = CFArrayGetCount(v646);
                    v4 = allocator;
                    FigBaseObject = CFArrayCreateMutable(allocator, ConcatenationOfTwoArrays, &stru_1ED4CA350);
                    if (!FigBaseObject || (*v1076 = *(DerivedStorage + 240), *&v1076[16] = *(DerivedStorage + 256), v11 = v1052, (v647 = FigCFDictionaryCreateMutableCopy()) == 0))
                    {
                      OUTLINED_FUNCTION_1_193();
                      LODWORD(v23) = FigSignalErrorAtGM();
                      goto LABEL_1008;
                    }

                    v648 = v647;
                    if (v1052)
                    {
                      CFRelease(v1052);
                    }

                    v1052 = v648;
                    if (ConcatenationOfTwoArrays >= 1)
                    {
                      v4 = 0;
                      v649 = 0;
                      do
                      {
                        v649 += *(CFArrayGetValueAtIndex(v1099, v4++) + 6);
                      }

                      while (ConcatenationOfTwoArrays != v4);
                      v11 = 0;
                      v951 = @"Remaker_InterimAssetName";
                      v929 = @"Remaker_DestinationURL";
                      v900 = a3;
                      while (1)
                      {
                        *&v1092.value = *v1010;
                        v1092.epoch = v964;
                        if (v1096)
                        {
                          CFRelease(v1096);
                          v1096 = 0;
                        }

                        v1095 = 0;
                        if (*(DerivedStorage + 160))
                        {
                          FigCFDictionaryGetArrayValue();
                          v680 = FigCFArrayGetValueAtIndex();
                          LODWORD(v23) = figAssetExportSession_copyResumableTrackSegmentState(v680, &v1095, &v1096, &v1092, &v1093);
                        }

                        v657 = v1103;
                        if (v1103)
                        {
                          CFRelease(v1103);
                          v1103 = 0;
                        }

                        if (!v1095)
                        {
                          if (v1096)
                          {
                            CFDictionaryRemoveValue(v1052, v951);
                            FigFileDeleteFile();
                          }

                          else
                          {
                            v658 = OUTLINED_FUNCTION_47_21(v657, v650, v651, v652, v653, v654, v655, v656, v11 + 1, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v929, v932, v938, v951, v953, v964, v966, v970, v974, v982, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator);
                            v4 = CFStringCreateWithFormat(v658, v659, @"videoSegment%ld");
                            CFDictionarySetValue(v1052, v951, v4);
                            if (v4)
                            {
                              CFRelease(v4);
                            }
                          }

                          LODWORD(v23) = (v1046)(allocator, v1100, v1105);
                        }

                        if (v23)
                        {
                          OUTLINED_FUNCTION_1_193();
                          v1005 = v23;
                          goto LABEL_1234;
                        }

                        if (v1101)
                        {
                          CFRelease(v1101);
                          v1101 = 0;
                        }

                        if (v1096)
                        {
                          v1101 = v1096;
                          v1096 = 0;
                        }

                        else
                        {
                          v4 = FigRemakerGetFigBaseObject(v1103);
                          v660 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                          if (!v660)
                          {
                            v1005 = -12782;
                            goto LABEL_1234;
                          }

                          v661 = v660(v4, v929, allocator, &v1101);
                          if (v661)
                          {
                            v1005 = v661;
LABEL_1234:
                            FigSignalErrorAtGM();
LABEL_1235:
                            OUTLINED_FUNCTION_2_192();
                            OUTLINED_FUNCTION_18_48();
                            OUTLINED_FUNCTION_99_5();
                            LODWORD(v23) = v1005;
                            VideoEncoderSpecification = v982;
                            a3 = v900;
                            goto LABEL_347;
                          }
                        }

                        v662 = CFArrayGetValueAtIndex(v1099, v11);
                        v669 = v662;
                        if (v1095)
                        {
                          *&buffer.start.value = *(v662 + 24);
                          buffer.start.epoch = *(v662 + 40);
                          time2 = v1092;
                          v662 = CMTimeCompare(&buffer.start, &time2);
                          if (v662)
                          {
                            OUTLINED_FUNCTION_1_193();
                            v1005 = FigSignalErrorAtGM();
                            goto LABEL_1235;
                          }

                          if (v1095)
                          {
                            v670 = 4;
                          }

                          else
                          {
                            v670 = 2;
                          }
                        }

                        else
                        {
                          v670 = 2;
                        }

                        time2 = v669[1];
                        buffer.start.epoch = 0;
                        buffer.start.value = v1103;
                        *&buffer.start.timescale = v1101;
                        buffer.duration = time2;
                        v1125 = 0;
                        v1124 = v670;
                        if (v1093)
                        {
                          v671 = OUTLINED_FUNCTION_47_21(v662, v663, v1093, v664, v665, v666, v667, v668, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v929, v932, v938, v951, v953, v964, v966, v970, v974, v982, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator);
                          buffer.start.epoch = CFArrayCreateMutableCopy(v671, v672, v673);
                        }

                        else
                        {
                          v674 = OUTLINED_FUNCTION_47_21(v662, v663, 0, v664, v665, v666, v667, v668, outputCallbackRefCona, v815, v821, v827, v833, v840, v846, v852, v858, v864, v870, v876, v882, v888, v894, v900, v906, v912, v918, v929, v932, v938, v951, v953, v964, v966, v970, v974, v982, theDicta, v990, v995, v1001, v1007, v1010[0], v1010[1], v1017, value, v1025, v1029, v1035, v1041, v1046, v1052, v1056, v1061, v1064, allocator);
                          buffer.start.epoch = CFArrayCreateMutable(v674, v675, &stru_1ED4CA328);
                          if (!buffer.start.epoch)
                          {
                            OUTLINED_FUNCTION_1_193();
                            v4 = FigSignalErrorAtGM();
                            goto LABEL_1081;
                          }
                        }

                        CFArrayAppendValue(FigBaseObject, &buffer);
                        if (buffer.start.epoch)
                        {
                          CFRelease(buffer.start.epoch);
                        }

                        v4 = 0;
LABEL_1081:
                        if (v1093)
                        {
                          CFRelease(v1093);
                          v1093 = 0;
                        }

                        if (v4)
                        {
                          OUTLINED_FUNCTION_1_193();
                          v1005 = v4;
                          goto LABEL_1234;
                        }

                        memset(&v1091, 0, sizeof(v1091));
                        *&buffer.start.value = *v1076;
                        buffer.start.epoch = *&v1076[16];
                        time2 = v669[1];
                        CMTimeAdd(&v1091, &buffer.start, &time2);
                        v4 = v1103;
                        if (v1103)
                        {
                          v1090 = v1091;
                          if (*(*(CMBaseObjectGetVTable() + 16) + 48))
                          {
                            *&buffer.start.value = *v1076;
                            buffer.start.epoch = *&v1076[16];
                            *&time2.value = *&v1090.value;
                            OUTLINED_FUNCTION_63_16();
                            v676(v4);
                          }

                          v4 = *(DerivedStorage + 368);
                          v677 = FigRemakerGetFigBaseObject(v1103);
                          v678 = *(*(CMBaseObjectGetVTable() + 8) + 56);
                          if (v678)
                          {
                            v678(v677, @"Remaker_MaximizePowerEfficiency", v4);
                          }

                          figAssetExportSession_applyFileSize(v1073, theDicta, v1103);
                        }

                        LODWORD(v23) = 0;
                        v679 = 0;
                        *v1076 = v1091;
                        ++v11;
                        a3 = v900;
                        if (ConcatenationOfTwoArrays == v11)
                        {
                          goto LABEL_1113;
                        }
                      }
                    }

                    v679 = v23;
LABEL_1113:
                    v925 = ConcatenationOfTwoArrays;
                    FigFileDeleteFile();
                    if (v1115)
                    {
                      CFRelease(v1115);
                      v1115 = 0;
                    }

                    ConcatenationOfTwoArrays = allocator;
                    if (v1061)
                    {
                      if (!(*v1061 | v1103))
                      {
LABEL_1117:
                        OUTLINED_FUNCTION_18_48();
                        v1017 = 0;
                        v1035 = 0;
                        v1046 = 0;
                        v4 = v912;
LABEL_1184:
                        v1073 = 0;
                        if (v679 || v1116)
                        {
                          ConcatenationOfTwoArrays = 0;
                          v11 = 0;
                          value = 0;
                          LODWORD(v23) = v679;
                          v258 = v953;
                          VideoEncoderSpecification = v982;
                          goto LABEL_347;
                        }

                        *v974 = v1115;
                        v1115 = 0;
                        if (FigBaseObject)
                        {
                          v749 = CFArrayGetCount(FigBaseObject);
                          v750 = v1061;
                          VideoEncoderSpecification = v982;
                          if (v749)
                          {
                            *v970 = FigBaseObject;
                            FigBaseObject = 0;
                          }
                        }

                        else
                        {
                          v750 = v1061;
                          VideoEncoderSpecification = v982;
                        }

                        if (v750)
                        {
                          v751 = *(v750 + 2);
                          if (v751 && CFArrayGetCount(v751))
                          {
                            OUTLINED_FUNCTION_10_78();
                            ConcatenationOfTwoArrays = 0;
                            LODWORD(v23) = 0;
                            *v1061 = v1102;
                            v1102 = 0;
                            *v966 = v1061;
                            v1061 = 0;
                            goto LABEL_1197;
                          }
                        }

                        else
                        {
                          v1061 = 0;
                        }

                        OUTLINED_FUNCTION_10_78();
                        ConcatenationOfTwoArrays = 0;
                        LODWORD(v23) = 0;
                        goto LABEL_1197;
                      }
                    }

                    else if (!v1103)
                    {
                      goto LABEL_1117;
                    }

                    LODWORD(v23) = v679;
                    VideoEncoderSpecification = v982;
                    goto LABEL_906;
                  }

LABEL_1278:
                  OUTLINED_FUNCTION_1_193();
                  goto LABEL_1281;
                }

                v559 = CFArrayCreateMutable(allocator, 2, MEMORY[0x1E695E9C0]);
                if (v559)
                {
                  v560 = v559;
                  v561 = FigCFArrayAppendInt64();
                  if (v561)
                  {
                    LODWORD(v23) = v561;
                  }

                  else
                  {
                    a3 = ConcatenationOfTwoArrays;
                    LODWORD(v23) = FigCFArrayAppendInt64();
                    if (!v23)
                    {
                      CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E69836E0], v560);
                      CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E69836E8], v560);
                      CFDictionarySetValue(ConcatenationOfTwoArrays, *MEMORY[0x1E69836D8], v560);
LABEL_885:
                      CFRelease(v560);
                      goto LABEL_887;
                    }
                  }

                  CFRelease(ConcatenationOfTwoArrays);
                  a3 = 0;
LABEL_1301:
                  a4 = v906;
                  goto LABEL_885;
                }

LABEL_1298:
                OUTLINED_FUNCTION_1_193();
                LODWORD(v23) = FigSignalErrorAtGM();
                v560 = ConcatenationOfTwoArrays;
                a3 = 0;
                goto LABEL_885;
              }

              v570 = OUTLINED_FUNCTION_91_9();
              v572 = figAssetExportSession_CopySourceVideoTrack(v570, v571);
              if (!v572)
              {
                v954 = 0;
                goto LABEL_1031;
              }

              v573 = v572;
              v574 = v1029;
              if (v1029 || (v575 = OUTLINED_FUNCTION_60_7(), v11 = v576, v574 = CFArrayCreateMutable(v575, v577, v578), v573 = v11, v574))
              {
                v1029 = v574;
                v954 = v573;
                CFArrayAppendValue(v574, v573);
LABEL_1031:
                v11 = 1;
                goto LABEL_143;
              }

              OUTLINED_FUNCTION_1_193();
              LODWORD(v23) = FigSignalErrorAtGM();
              OUTLINED_FUNCTION_19_48();
LABEL_210:
              OUTLINED_FUNCTION_10_78();
              VideoEncoderSpecification = 0;
LABEL_343:
              ConcatenationOfTwoArrays = 0;
              goto LABEL_344;
            }

            v342 = CFArrayGetCount(cf);
            if (v342 >= 1)
            {
              v343 = v342;
              v344 = 0;
              while (1)
              {
                v345 = CFArrayGetValueAtIndex(cf, v344);
                v1106 = value;
                v346 = FigAssetTrackGetCMBaseObject(v345);
                v347 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                if (v347)
                {
                  v347(v346, @"IsEnabled", ConcatenationOfTwoArrays, &v1106);
                }

                OUTLINED_FUNCTION_102_5();
                a4 = theDicta;
                if (v279)
                {
                  break;
                }

                if (v343 == ++v344)
                {
                  goto LABEL_1033;
                }
              }

              CFArrayAppendValue(v1029, v345);
            }

LABEL_1033:
            v11 = 0;
            v4 = 1;
          }

          else
          {
            v11 = 0;
          }

LABEL_1034:
          v281 = v1041;
          goto LABEL_1035;
        }
      }
    }

    else
    {
      v1056 = 0;
    }

    v1041 = 0;
    a3 = 0;
    v11 = @"audioPreset";
    FigBaseObject = 1;
    goto LABEL_137;
  }

  v73 = OUTLINED_FUNCTION_265();
  if (!figAssetExportSession_canPassThroughVideo(v73, v74, v75, 0, 0, 1))
  {
    goto LABEL_338;
  }

  v76 = OUTLINED_FUNCTION_265();
  if (!figAssetExportSession_canPassThroughAudio(v76, v77, 0))
  {
    goto LABEL_338;
  }

  OUTLINED_FUNCTION_78_10();
  v78 = CMBaseObjectGetDerivedStorage();
  v79 = FigAssetGetCMBaseObject(*(v78 + 16));
  v80 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v80)
  {
    goto LABEL_112;
  }

  v80(v79, @"assetProperty_Tracks", ConcatenationOfTwoArrays, &buffer);
  if (!buffer.start.value)
  {
    v11 = v1073;
    goto LABEL_249;
  }

  v81 = CFArrayGetCount(buffer.start.value);
  if (v81 >= 1)
  {
    v82 = v81;
    v1057 = 0;
    v83 = 0;
    VideoEncoderSpecification = @"FormatDescriptionArray";
    do
    {
      v84 = CFArrayGetValueAtIndex(buffer.start.value, v83);
      v85 = FigAssetTrackGetCMBaseObject(v84);
      v86 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v86)
      {
        v86(v85, @"FormatDescriptionArray", allocator, &time2);
      }

      if (time2.value)
      {
        v87 = CFArrayGetCount(time2.value);
        if (v87 >= 1)
        {
          v88 = v87;
          FigBaseObject = 0;
          while (1)
          {
            v89 = CFArrayGetValueAtIndex(time2.value, FigBaseObject);
            if (FigRemakerIsFormatDescriptionProtected(v89))
            {
              break;
            }

            if (v88 == ++FigBaseObject)
            {
              goto LABEL_102;
            }
          }

          CMFormatDescriptionGetMediaSubType(v89);
          v1057 = 1;
LABEL_102:
          a4 = v1052;
        }

        if (time2.value)
        {
          CFRelease(time2.value);
          time2.value = 0;
        }
      }

      ++v83;
    }

    while (v83 != v82);
    v90 = v1057 == 0;
    ConcatenationOfTwoArrays = allocator;
  }

  else
  {
LABEL_112:
    v90 = 1;
  }

  if (buffer.start.value)
  {
    CFRelease(buffer.start.value);
  }

  v11 = v1073;
  if (!v90)
  {
    goto LABEL_338;
  }

LABEL_249:
  if (!figAssetExportSession_totalSizeOfTracksIsWithinFileLengthLimit(DerivedStorage, cf, theDicta))
  {
LABEL_338:
    OUTLINED_FUNCTION_1_193();
LABEL_339:
    LODWORD(v23) = FigSignalErrorAtGM();
    goto LABEL_340;
  }

  v1056 = v1115;
  v1091.value = 0;
  v1090.value = 0;
  v1120 = 0;
  v1121 = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v180 = FigAssetGetCMBaseObject(*(DerivedStorage + 16));
  v181 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v181)
  {
    a3 = 4294954514;
LABEL_439:
    OUTLINED_FUNCTION_1_193();
    FigSignalErrorAtGM();
    FigBaseObject = 0;
    v4 = 0;
    v11 = 0;
    goto LABEL_571;
  }

  v182 = v181(v180, @"assetProperty_FormatReader", ConcatenationOfTwoArrays, &v1121);
  if (v182)
  {
    a3 = v182;
    goto LABEL_439;
  }

  v183 = OUTLINED_FUNCTION_60_7();
  v11 = CFDictionaryCreateMutable(v183, v184, v185, v186);
  if (!v11)
  {
    OUTLINED_FUNCTION_1_193();
    a3 = FigSignalErrorAtGM();
    FigBaseObject = 0;
LABEL_1295:
    v4 = 0;
    goto LABEL_571;
  }

  if (qword_1EAF1A9C8 != -1)
  {
    OUTLINED_FUNCTION_0_215();
    dispatch_once_f(&qword_1EAF1A9C8, &qword_1EAF1A9C0, v806);
  }

  v187 = qword_1EAF1A9C0;
  if (!qword_1EAF1A9C0)
  {
    OUTLINED_FUNCTION_1_193();
    a3 = FigSignalErrorAtGM();
    FigBaseObject = 0;
    v4 = 0;
    goto LABEL_572;
  }

  v188 = CFDictionaryCreateMutable(ConcatenationOfTwoArrays, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  FigBaseObject = v188;
  if (!v188)
  {
    OUTLINED_FUNCTION_1_193();
    a3 = FigSignalErrorAtGM();
    goto LABEL_1295;
  }

  CFDictionarySetValue(v188, @"RemakerTrackOption_InterleaveTrack", v1000);
  v195 = OUTLINED_FUNCTION_80_10(v189, @"kFigAssetExportSessionProperty_OutputFileType", v190, &v1091, v191, v192, v193, v194, outputCallbackRefCon, v814, v820, v826, v832, v839, v845, v851, v857, v863, v869, v875, v881, v887, v893, v899, v905, v911, v917, v923, v931, v937, v943, v953, v958, v966, v970, v974, v978, theDicta, v990, v994, v1000, v1007, v1010[0], v1010[1], v1016, value, v1025, v1028, @"assetProperty_Tracks", v1040, v1046, v1052, v1056, v1061, v1064, allocator, v1070, v1073);
  if (v195)
  {
    a3 = v195;
    OUTLINED_FUNCTION_1_193();
    FigSignalErrorAtGM();
    goto LABEL_1295;
  }

  CFArrayGetCount(v187);
  v196 = OUTLINED_FUNCTION_265();
  LODWORD(v1046) = CFArrayContainsValue(v196, v1128, v197);
  v4 = figAssetExportSession_CopyChapterTracks(*(DerivedStorage + 16));
  v198 = FigAssetGetCMBaseObject(*(DerivedStorage + 16));
  v199 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (v199)
  {
    v199(v198, v1036, ConcatenationOfTwoArrays, &v1090);
  }

  v1037 = v11;
  v1042 = FigBaseObject;
  if (!v1090.value || (v200 = CFArrayGetCount(v1090.value), v200 < 1))
  {
LABEL_1272:
    OUTLINED_FUNCTION_1_193();
    a3 = FigSignalErrorAtGM();
    v187 = 0;
    ConcatenationOfTwoArrays = allocator;
LABEL_721:
    v11 = v1037;
    FigBaseObject = v1042;
    goto LABEL_572;
  }

  v201 = v200;
  v202 = 0;
  v203 = 0;
  v1030 = @"FormatDescriptionArray";
  do
  {
    v204 = CFArrayGetValueAtIndex(v1090.value, v202);
    LODWORD(v1117) = 0;
    v1119 = 0;
    v205 = *(*(CMBaseObjectGetVTable() + 16) + 32);
    if (v205)
    {
      a3 = v205(v204, &v1117, &v1119);
    }

    else
    {
      a3 = 4294954514;
    }

    if (v1120)
    {
      CFRelease(v1120);
      v1120 = 0;
    }

    v206 = v1117;
    if (v1117)
    {
      v207 = v1121;
      v208 = *(*(CMBaseObjectGetVTable() + 16) + 56);
      if (v208)
      {
        v208(v207, v206, &v1120, 0);
      }
    }

    VideoEncoderSpecification = CFSetContainsValue(v4, v204);
    if (FigAssetExportSessionTrackExportPolicy_GetPassthroughExportPolicy(v204, v1091.value, VideoEncoderSpecification, *(DerivedStorage + 24), v1120))
    {
      v209 = v1119;
      if (!v1046 || (OUTLINED_FUNCTION_63(), v279))
      {
        v1118 = 0;
        if (v209 != 1835365473)
        {
          OUTLINED_FUNCTION_63();
          if (!v279)
          {
            v210 = CMBaseObjectGetVTable();
            v219 = *(v210 + 16);
            v218 = v210 + 16;
            if (!*(v219 + 120))
            {
              a3 = 4294954514;
LABEL_719:
              OUTLINED_FUNCTION_1_193();
              FigSignalErrorAtGM();
              v187 = 0;
              goto LABEL_720;
            }

            v220 = OUTLINED_FUNCTION_41_29(v218, v211, v212, v213, v214, v215, v216, v217, outputCallbackRefConb, v816, v822, v828, v834, v841, v847, v853, v859, v865, v871, v877, v883, v889, v895, v901, v907, v913, v919, v926, v933, v939, v946, v953, v958, v966, v970, v974, v981, theDicta, v990, v996, v1002, v1007, v1010[0], v1010[1], v1019, value, v1025, v1030, v1037, v1042, v1046, v1052, v1056);
            a3 = v221(v220);
            if (a3)
            {
              goto LABEL_719;
            }

            goto LABEL_279;
          }

          LODWORD(v1025) = v1117;
          OUTLINED_FUNCTION_78_10();
          figAssetExportSession_actualOutputFileType(v1073);
          FigFormatReaderFileFormat = figAssetExportSession_GetFigFormatReaderFileFormat();
          v226 = FigAssetTrackGetCMBaseObject(v204);
          v227 = *(*(CMBaseObjectGetVTable() + 8) + 48);
          if (!v227)
          {
            goto LABEL_291;
          }

          v227(v226, v1030, allocator, &buffer);
          v228 = buffer.start.value;
          if (buffer.start.value)
          {
            if (CFArrayGetCount(buffer.start.value) < 1)
            {
LABEL_291:
              v228 = 0;
              goto LABEL_292;
            }

            v228 = CFArrayGetValueAtIndex(buffer.start.value, 0);
          }

LABEL_292:
          if (!figAssetExportSession_IsPassthroughExportSupportedForAudioFormat(v228, FigFormatReaderFileFormat, VideoEncoderSpecification, &time2))
          {
            OUTLINED_FUNCTION_1_193();
            VideoEncoderSpecification = FigSignalErrorAtGM();
            v187 = CFErrorCreate(allocator, @"FigAssetExportSession_ErrorDomain", VideoEncoderSpecification, 0);
LABEL_327:
            if (VideoEncoderSpecification && !v187)
            {
              v187 = CFErrorCreate(allocator, @"FigAssetExportSession_ErrorDomain", VideoEncoderSpecification, 0);
            }

LABEL_330:
            if (buffer.start.value)
            {
              CFRelease(buffer.start.value);
            }

            if (time2.value)
            {
              CFRelease(time2.value);
            }

            if (v187)
            {
              OUTLINED_FUNCTION_1_193();
              FigSignalErrorAtGM();
LABEL_720:
              ConcatenationOfTwoArrays = allocator;
              a4 = v1052;
              goto LABEL_721;
            }

            goto LABEL_279;
          }

          if (time2.value)
          {
            v1092.value = 0;
            ChannelLayout = CMAudioFormatDescriptionGetChannelLayout(time2.value, &v1092);
            StreamBasicDescription = CMAudioFormatDescriptionGetStreamBasicDescription(time2.value);
            v231 = v1092.value;
            v232 = *(*(CMBaseObjectGetVTable() + 16) + 8);
            if (v232)
            {
              VideoEncoderSpecification = v232(v1056, v1025, StreamBasicDescription, v231, ChannelLayout, 0, 0, &v1118);
              if (!VideoEncoderSpecification)
              {
LABEL_326:
                v187 = 0;
                goto LABEL_327;
              }
            }

            else
            {
              VideoEncoderSpecification = 4294954514;
            }
          }

          else
          {
            v251 = *(*(CMBaseObjectGetVTable() + 16) + 24);
            if (v251)
            {
              v252 = v251(v1056, v1025, &v1118);
              if (!v252)
              {
                v187 = 0;
                goto LABEL_330;
              }

              VideoEncoderSpecification = v252;
            }

            else
            {
              VideoEncoderSpecification = 4294954514;
            }
          }

          OUTLINED_FUNCTION_1_193();
          FigSignalErrorAtGM();
          goto LABEL_326;
        }

        if (qword_1EAF1AA40 != -1)
        {
          OUTLINED_FUNCTION_30_30();
          dispatch_once_f(&qword_1EAF1AA40, &qword_1EAF1AA38, v257);
        }

        if (qword_1EAF1AA38)
        {
          v233 = CFArrayGetCount(qword_1EAF1AA38);
          buffer.start.value = 0;
          a3 = FigAssetExportSessionCopyProperty(v1073, @"kFigAssetExportSessionProperty_PresetName", allocator, &buffer);
          if (v233)
          {
            if (!buffer.start.value)
            {
              v234 = 0;
              goto LABEL_311;
            }

            v255 = OUTLINED_FUNCTION_265();
            v1129.length = v233;
            v234 = CFArrayContainsValue(v255, v1129, v256) == 0;
LABEL_303:
            if (buffer.start.value)
            {
              CFRelease(buffer.start.value);
            }

LABEL_311:
            figAssetExportSession_actualOutputFileType(v1073);
            figAssetExportSession_GetFigFormatReaderFileFormat();
            OUTLINED_FUNCTION_101_5();
            v237 = FigRemakerCanFileTypeSupportMediaType(v235, v236, 0);
            if (v234 && v237)
            {
              v238 = FigCFDictionaryGetCount();
              v239 = CMBaseObjectGetVTable();
              v240 = OUTLINED_FUNCTION_109_3(v239);
              if (v238)
              {
                if (!*(v248 + 136))
                {
                  a3 = 4294954514;
                  goto LABEL_719;
                }

                v249 = OUTLINED_FUNCTION_41_29(v240, v241, v242, v243, v244, v245, v246, v247, outputCallbackRefConb, v816, v822, v828, v834, v841, v847, v853, v859, v865, v871, v877, v883, v889, v895, v901, v907, v913, v919, v926, v933, v939, v946, v953, v958, v966, v970, v974, v981, theDicta, v990, v996, v1002, v1007, v1010[0], v1010[1], v1019, value, v1025, v1030, v1037, v1042, v1046, v1052, v1056);
                a3 = v250(v249);
                if (a3)
                {
                  goto LABEL_719;
                }
              }

              else
              {
                if (!*(v248 + 120))
                {
                  a3 = 4294954514;
                  goto LABEL_719;
                }

                v253 = OUTLINED_FUNCTION_41_29(v240, v241, v242, v243, v244, v245, v246, v247, outputCallbackRefConb, v816, v822, v828, v834, v841, v847, v853, v859, v865, v871, v877, v883, v889, v895, v901, v907, v913, v919, v926, v933, v939, v946, v953, v958, v966, v970, v974, v981, theDicta, v990, v996, v1002, v1007, v1010[0], v1010[1], v1019, value, v1025, v1030, v1037, v1042, v1046, v1052, v1056);
                a3 = v254(v253);
                if (a3)
                {
                  goto LABEL_719;
                }
              }
            }

LABEL_279:
            if (!v1118)
            {
LABEL_287:
              ++v203;
              goto LABEL_288;
            }

            v222 = FigCFNumberCreateSInt32();
            v223 = FigCFNumberCreateSInt32();
            v224 = v223;
            if (v222 && v223)
            {
              CFDictionarySetValue(v1037, v223, v222);
            }

            else if (!v223)
            {
              goto LABEL_285;
            }

            CFRelease(v224);
LABEL_285:
            if (v222)
            {
              CFRelease(v222);
            }

            goto LABEL_287;
          }
        }

        else
        {
          buffer.start.value = 0;
          a3 = FigAssetExportSessionCopyProperty(v1073, @"kFigAssetExportSessionProperty_PresetName", allocator, &buffer);
        }

        v234 = 1;
        goto LABEL_303;
      }
    }

LABEL_288:
    ++v202;
  }

  while (v201 != v202);
  a4 = v1052;
  if (v203 <= 0)
  {
    goto LABEL_1272;
  }

  OUTLINED_FUNCTION_78_10();
  v1092.value = 0;
  v1117 = 0;
  FigFormatReaderGetFigBaseObject(v1121);
  ConcatenationOfTwoArrays = allocator;
  v11 = v1037;
  FigBaseObject = v1042;
  if (*(*(CMBaseObjectGetVTable() + 8) + 48))
  {
    v348 = OUTLINED_FUNCTION_48_21();
    v349(v348);
  }

  if (buffer.start.value)
  {
    v350 = CMBaseObjectGetVTable();
    v358 = *(v350 + 16);
    v357 = v350 + 16;
    if (*(v358 + 32))
    {
      v359 = OUTLINED_FUNCTION_98_5(v357, @"MovieTimeScale", v351, v352, v353, v354, v355, v356, outputCallbackRefConb, v816, v822, v828, v834, v841, v847, v853, v859, v865, v871, v877, v883, v889, v895, v901, v907, v913, v919, v926, v933, v939, v946, v953, v958, v966, v970, v974, v981, theDicta, v990, v996, v1002, v1007, v1010[0], v1010[1], v1019, value, v1025, v1030, v1037, v1042, v1046, v1052, v1056);
      v360(v359);
    }
  }

  FigFormatReaderGetFigBaseObject(v1121);
  if (*(*(CMBaseObjectGetVTable() + 8) + 48))
  {
    v361 = OUTLINED_FUNCTION_48_21();
    v362(v361);
  }

  if (time2.value)
  {
    v363 = CMBaseObjectGetVTable();
    v371 = *(v363 + 16);
    v370 = v363 + 16;
    if (*(v371 + 32))
    {
      v372 = OUTLINED_FUNCTION_98_5(v370, @"MovieMatrix", v364, v365, v366, v367, v368, v369, outputCallbackRefConb, v816, v822, v828, v834, v841, v847, v853, v859, v865, v871, v877, v883, v889, v895, v901, v907, v913, v919, v926, v933, v939, v946, v953, v958, v966, v970, v974, v981, theDicta, v990, v996, v1002, v1007, v1010[0], v1010[1], v1019, value, v1025, v1030, v1037, v1042, v1046, v1052, v1056);
      v373(v372);
    }
  }

  FigFormatReaderGetFigBaseObject(v1121);
  if (*(*(CMBaseObjectGetVTable() + 8) + 48))
  {
    v374 = OUTLINED_FUNCTION_48_21();
    v375(v374);
  }

  if (v1092.value)
  {
    v376 = CMBaseObjectGetVTable();
    v384 = *(v376 + 16);
    v383 = v376 + 16;
    if (*(v384 + 32))
    {
      v385 = OUTLINED_FUNCTION_98_5(v383, @"PreferredVolume", v377, v378, v379, v380, v381, v382, outputCallbackRefConb, v816, v822, v828, v834, v841, v847, v853, v859, v865, v871, v877, v883, v889, v895, v901, v907, v913, v919, v926, v933, v939, v946, v953, v958, v966, v970, v974, v981, theDicta, v990, v996, v1002, v1007, v1010[0], v1010[1], v1019, value, v1025, v1030, v1037, v1042, v1046, v1052, v1056);
      v386(v385);
    }
  }

  FigFormatReaderGetFigBaseObject(v1121);
  if (*(*(CMBaseObjectGetVTable() + 8) + 48))
  {
    v387 = OUTLINED_FUNCTION_48_21();
    v388(v387);
    if (v1117)
    {
      v389 = CMBaseObjectGetVTable();
      v397 = *(v389 + 16);
      v396 = v389 + 16;
      if (*(v397 + 32))
      {
        v398 = OUTLINED_FUNCTION_98_5(v396, @"PreferredRate", v390, v391, v392, v393, v394, v395, outputCallbackRefConb, v816, v822, v828, v834, v841, v847, v853, v859, v865, v871, v877, v883, v889, v895, v901, v907, v913, v919, v926, v933, v939, v946, v953, v958, v966, v970, v974, v981, theDicta, v990, v996, v1002, v1007, v1010[0], v1010[1], v1019, value, v1025, v1030, v1037, v1042, v1046, v1052, v1056);
        v399(v398);
      }
    }
  }

  if (buffer.start.value)
  {
    CFRelease(buffer.start.value);
  }

  if (time2.value)
  {
    CFRelease(time2.value);
  }

  if (v1092.value)
  {
    CFRelease(v1092.value);
  }

  if (v1117)
  {
    CFRelease(v1117);
  }

LABEL_571:
  v187 = 0;
LABEL_572:
  if (a3 && !v187)
  {
    v187 = CFErrorCreate(ConcatenationOfTwoArrays, @"FigAssetExportSession_ErrorDomain", a3, 0);
  }

  if (v1120)
  {
    CFRelease(v1120);
  }

  if (v1090.value)
  {
    CFRelease(v1090.value);
  }

  if (v4)
  {
    CFRelease(v4);
  }

  if (v1091.value)
  {
    CFRelease(v1091.value);
  }

  if (v11)
  {
    CFRelease(v11);
  }

  if (v1121)
  {
    CFRelease(v1121);
  }

  if (FigBaseObject)
  {
    CFRelease(FigBaseObject);
  }

  v1116 = v187;
  if (v187)
  {
    goto LABEL_340;
  }

  if (HIDWORD(v990))
  {
    v400 = v1073;
    if (v1061)
    {
      FigFileDeleteFile();
    }

    if (v1102)
    {
      CFRelease(v1102);
      OUTLINED_FUNCTION_23_47();
      v1025 = 0;
      v1029 = 0;
      HIDWORD(v990) = 0;
      OUTLINED_FUNCTION_7_105();
      v1102 = 0;
    }

    else
    {
      OUTLINED_FUNCTION_23_47();
      v1025 = 0;
      v1029 = 0;
      HIDWORD(v990) = 0;
      OUTLINED_FUNCTION_7_105();
    }
  }

  else
  {
    OUTLINED_FUNCTION_23_47();
    v1025 = 0;
    v1029 = 0;
    OUTLINED_FUNCTION_7_105();
    v400 = v1073;
  }

LABEL_1166:
  v1017 = v403;
  v1035 = v402;
  v1041 = v401;
  OUTLINED_FUNCTION_60_19();
  if (v738)
  {
    time2.value = 0;
    if (FigCFDictionaryGetDoubleIfPresent())
    {
      CMTimeMakeWithSeconds(&buffer.start, *&time2.value, 1000);
      v739 = CMTimeCopyAsDictionary(&buffer.start, ConcatenationOfTwoArrays);
      OUTLINED_FUNCTION_57_17();
      v740 = &v1102;
      if (v279)
      {
        v740 = &v1115;
      }

      FigRemakerSetFormatWriterTrackProperty(*v740, HIDWORD(v1114), @"InterleavingAdvance", v739);
      v741 = v739;
      v400 = v1073;
      CFRelease(v741);
    }

    v742 = v1115;
  }

  else
  {
    v742 = 0;
  }

  if (!HIDWORD(v990))
  {
    figAssetExportSession_applyFileSize(v400, theDicta, v742);
    v742 = v1115;
  }

  v1052 = a4;
  v982 = VideoEncoderSpecification;
  if (!(v1103 | v742) || (v743 = OUTLINED_FUNCTION_48_21(), FigAssetExportSessionCopyProperty(v743, v744, v745, v746), !v1097))
  {
LABEL_1183:
    v679 = v23;
    a4 = v958;
    goto LABEL_1184;
  }

  if (CFArrayGetCount(v1097) < 1)
  {
    goto LABEL_1181;
  }

  OUTLINED_FUNCTION_57_17();
  v747 = &v1103;
  if (v279)
  {
    v747 = &v1115;
  }

  v11 = v1097;
  v748 = FigRemakerGetFigBaseObject(*v747);
  LODWORD(v23) = CMBaseObjectSetProperty(v748, @"Remaker_Metadata", v11);
  if (!v23)
  {
LABEL_1181:
    if (v1097)
    {
      CFRelease(v1097);
      v1097 = 0;
    }

    goto LABEL_1183;
  }

  OUTLINED_FUNCTION_1_193();
  FigSignalErrorAtGM();
  OUTLINED_FUNCTION_10_78();
  ConcatenationOfTwoArrays = 0;
  v258 = v953;
  a4 = v958;
LABEL_347:
  if (v1104)
  {
    v259 = v11;
    v260 = a4;
    v261 = DerivedStorage;
    v262 = a3;
    v263 = VideoEncoderSpecification;
    v264 = v23;
    v23 = v4;
    v265 = v258;
    CFRelease(v1104);
    v258 = v265;
    v4 = v23;
    LODWORD(v23) = v264;
    VideoEncoderSpecification = v263;
    a3 = v262;
    DerivedStorage = v261;
    a4 = v260;
    v11 = v259;
  }

  if (v258)
  {
    CFRelease(v258);
  }

  if (v1105)
  {
    CFRelease(v1105);
  }

  if (v11)
  {
    CFRelease(v11);
  }

  if (value)
  {
    CFRelease(value);
  }

  if (theArray)
  {
    CFRelease(theArray);
  }

  if (VideoEncoderSpecification)
  {
    CFRelease(VideoEncoderSpecification);
  }

  if (v1041)
  {
    CFRelease(v1041);
  }

  if (v1056)
  {
    CFRelease(v1056);
  }

  if (v1108)
  {
    CFRelease(v1108);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v1111)
  {
    CFRelease(v1111);
  }

  if (v1110)
  {
    CFRelease(v1110);
  }

  if (ConcatenationOfTwoArrays)
  {
    CFRelease(ConcatenationOfTwoArrays);
  }

  if (v1052)
  {
    CFRelease(v1052);
  }

  if (v1070)
  {
    CFRelease(v1070);
  }

  if (a4)
  {
    CFRelease(a4);
  }

  if (v1010[0])
  {
    CFRelease(v1010[0]);
  }

  if (DerivedStorage)
  {
    CFRelease(DerivedStorage);
  }

  if (a3)
  {
    CFRelease(a3);
  }

  if (v4)
  {
    CFRelease(v4);
  }

  if (v1029)
  {
    CFRelease(v1029);
  }

  if (v1025)
  {
    CFRelease(v1025);
  }

  if (v1017)
  {
    CFRelease(v1017);
  }

  if (v1064)
  {
    CFRelease(v1064);
  }

  if (v1035)
  {
    CFRelease(v1035);
  }

  if (v1046)
  {
    CFRelease(v1046);
  }

  if (v1115)
  {
    CFRelease(v1115);
  }

  if (v1103)
  {
    CFRelease(v1103);
  }

  if (v1073)
  {
    CFRelease(v1073);
  }

  if (v1097)
  {
    CFRelease(v1097);
  }

  if (FigBaseObject)
  {
    v266 = CFArrayGetCount(FigBaseObject);
    if (v266 >= 1)
    {
      v267 = v266;
      for (j = 0; j != v267; ++j)
      {
        v269 = OUTLINED_FUNCTION_262_1();
        CFArrayGetValueAtIndex(v269, v270);
        FigFileDeleteFile();
      }
    }

    CFRelease(FigBaseObject);
  }

  if (v1102)
  {
    CFRelease(v1102);
  }

  if (v1061)
  {
    v271 = FigFileDeleteFile();
    FAES_RemakerConfigRelease(v271, v1061);
  }

  if (v1098)
  {
    CFRelease(v1098);
  }

  if (v1099)
  {
    CFRelease(v1099);
  }

  if (v1100)
  {
    CFRelease(v1100);
  }

  if (v1101)
  {
    CFRelease(v1101);
  }

  if (v1096)
  {
    CFRelease(v1096);
  }

  if (v1094)
  {
    CFRelease(v1094);
  }

  if (v1093)
  {
    CFRelease(v1093);
  }

  if (v1007)
  {
    CFRelease(v1007);
  }

  if (v23 && !v1116)
  {
    CFErrorCreate(allocator, @"FigAssetExportSession_ErrorDomain", v23, 0);
  }

  OUTLINED_FUNCTION_121_3();
}

__CFSet *figAssetExportSession_CopyChapterTracks(uint64_t a1)
{
  cf = 0;
  v2 = *MEMORY[0x1E695E480];
  v3 = OUTLINED_FUNCTION_383();
  Mutable = CFSetCreateMutable(v3, v4, v5);
  if (Mutable)
  {
    CMBaseObject = FigAssetGetCMBaseObject(a1);
    v8 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (v8 && !v8(CMBaseObject, @"assetProperty_TrackReferences", v2, &cf))
    {
      if (!cf)
      {
        return Mutable;
      }

      v9 = CFGetTypeID(cf);
      if (v9 == CFDictionaryGetTypeID())
      {
        v10 = CFDictionaryGetValue(cf, @"chap");
        if (v10)
        {
          v11 = v10;
          v12 = CFGetTypeID(v10);
          if (v12 == CFArrayGetTypeID())
          {
            Count = CFArrayGetCount(v11);
            if (Count >= 2)
            {
              v14 = 1;
              v15 = Count / 2;
              do
              {
                value = 0;
                if (FigCFArrayGetInt32AtIndex())
                {
                  v16 = *(*(CMBaseObjectGetVTable() + 16) + 40);
                  if (v16)
                  {
                    v16(a1, 0, &value);
                  }

                  if (value)
                  {
                    CFSetAddValue(Mutable, value);
                    if (value)
                    {
                      CFRelease(value);
                    }
                  }
                }

                v14 += 2;
                --v15;
              }

              while (v15);
            }
          }
        }
      }
    }

    if (cf)
    {
      CFRelease(cf);
    }
  }

  return Mutable;
}

uint64_t figAssetExportSession_HasEditSegmentData(uint64_t a1, int a2)
{
  v47 = 0;
  v48 = 0;
  v46 = 0;
  v4 = *MEMORY[0x1E695E480];
  FigBaseObject = FigTrackReaderGetFigBaseObject(a1);
  v6 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  v7 = MEMORY[0x1E6960C80];
  if (!v6 || (v8 = v6(FigBaseObject, @"SecondaryEditCursorService", v4, &v48), (v16 = v48) == 0) || (OUTLINED_FUNCTION_44_27(v8, v9, v10, v11, v12, v13, v14, v15, v37, v38, *(&v38 + 1), v39, *(&v39 + 1), v40), v17 = figAssetExportSession__editCursorServiceContainsEditsInTimeRange(v16, &v40, a2), LOBYTE(v16) = v17, !v17))
  {
    v18 = FigTrackReaderGetFigBaseObject(a1);
    v19 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (!v19)
    {
      goto LABEL_20;
    }

    v20 = v19(v18, @"EditCursorService", v4, &v47);
    v28 = v47;
    if (!v47)
    {
      goto LABEL_20;
    }

    v29 = v48;
    if (!v48)
    {
      OUTLINED_FUNCTION_44_27(v20, v21, v22, v23, v24, v25, v26, v27, v37, v38, *(&v38 + 1), v39, *(&v39 + 1), v40);
      v16 = figAssetExportSession__editCursorServiceContainsEditsInTimeRange(v28, &v40, a2);
      goto LABEL_21;
    }

    v30 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (!v30 || (v40 = *v7, *&v41 = *(v7 + 16), v30(v29, &v40, &v46)))
    {
LABEL_20:
      LOBYTE(v16) = 0;
      goto LABEL_21;
    }

    LOBYTE(v16) = 0;
    do
    {
      v44 = 0u;
      v45 = 0u;
      v42 = 0u;
      v43 = 0u;
      v40 = 0u;
      v41 = 0u;
      v31 = v46;
      v32 = *(*(CMBaseObjectGetVTable() + 16) + 24);
      if (!v32)
      {
        break;
      }

      if (v32(v31, &v40))
      {
        break;
      }

      if ((BYTE12(v40) & 1) != 0 && (BYTE4(v42) & 1) != 0 && !*(&v42 + 1) && (*(&v41 + 1) & 0x8000000000000000) == 0)
      {
        v37 = v40;
        v38 = v41;
        v39 = v42;
        v33 = figAssetExportSession__editCursorServiceContainsEditsInTimeRange(v47, &v37, a2);
        LOBYTE(v16) = v33 != 0;
        if (v33)
        {
          break;
        }
      }

      v34 = v46;
      v35 = *(*(CMBaseObjectGetVTable() + 16) + 16);
      if (!v35)
      {
        break;
      }
    }

    while (!v35(v34, 1));
  }

LABEL_21:
  if (v48)
  {
    CFRelease(v48);
  }

  if (v47)
  {
    CFRelease(v47);
  }

  if (v46)
  {
    CFRelease(v46);
  }

  return v16;
}

uint64_t figAssetExportSession_IsPassthroughExportSupportedForAudioFormat(const opaqueCMFormatDescription *a1, const void *a2, int a3, CMAudioFormatDescriptionRef *a4)
{
  v24 = 0;
  sizeOut = 0;
  formatDescriptionOut = 0;
  if (!a1 || CMFormatDescriptionGetMediaType(a1) != 1936684398)
  {
    return 0;
  }

  if (a4)
  {
    *a4 = 0;
  }

  if (FigRemakerCanFileTypeSupportFormatDescription(a2, a1, a3))
  {
    return 1;
  }

  StreamBasicDescription = CMAudioFormatDescriptionGetStreamBasicDescription(a1);
  if (StreamBasicDescription->mFormatID != 1819304813)
  {
    return 0;
  }

  v11 = *&StreamBasicDescription->mSampleRate;
  v10 = *&StreamBasicDescription->mBytesPerPacket;
  *&asbd.mBitsPerChannel = *&StreamBasicDescription->mBitsPerChannel;
  *&asbd.mSampleRate = v11;
  *&asbd.mBytesPerPacket = v10;
  asbd.mFormatFlags = HIDWORD(v11) ^ 2;
  ChannelLayout = CMAudioFormatDescriptionGetChannelLayout(a1, &sizeOut);
  MagicCookie = CMAudioFormatDescriptionGetMagicCookie(a1, &v24);
  v14 = *MEMORY[0x1E695E480];
  v16 = v24;
  v15 = sizeOut;
  Extensions = CMFormatDescriptionGetExtensions(a1);
  v18 = CMAudioFormatDescriptionCreate(v14, &asbd, v15, ChannelLayout, v16, MagicCookie, Extensions, &formatDescriptionOut);
  v19 = formatDescriptionOut;
  if (v18)
  {
    v8 = 0;
  }

  else
  {
    CanFileTypeSupportFormatDescription = FigRemakerCanFileTypeSupportFormatDescription(a2, formatDescriptionOut, a3);
    v8 = CanFileTypeSupportFormatDescription != 0;
    v19 = formatDescriptionOut;
    if (a4 && CanFileTypeSupportFormatDescription)
    {
      *a4 = formatDescriptionOut;
      return 1;
    }
  }

  if (v19)
  {
    CFRelease(v19);
  }

  return v8;
}

const __CFDictionary *figAssetExportSession_IsAlphaPreset(void *a1)
{
  result = FigExportSettingsForExportPreset(a1);
  if (result)
  {
    v2 = result;
    Value = CFDictionaryGetValue(result, @"mediaTiers");
    if (Value)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(Value, 0);
    }

    else
    {
      ValueAtIndex = v2;
    }

    result = CFDictionaryGetValue(ValueAtIndex, @"Video");
    if (result)
    {
      FigCFDictionaryGetBooleanIfPresent();
      return 0;
    }
  }

  return result;
}

const __CFDictionary *figAssetExportSession_IsStereoPreset(void *a1)
{
  result = FigExportSettingsForExportPreset(a1);
  if (result)
  {
    result = CFDictionaryGetValue(result, @"Video");
    if (result)
    {
      FigCFDictionaryGetBooleanIfPresent();
      return 0;
    }
  }

  return result;
}

const void *figAssetExportSession_videoSizeCompatibleWithStereoPreset(uint64_t a1, uint64_t a2, CGSize *a3, __CFString *a4)
{
  v17 = 0;
  OUTLINED_FUNCTION_106(MEMORY[0x1E6960CC0]);
  v14 = **&MEMORY[0x1E6960C88];
  CMTimeRangeMake(&v16, &start, &v14);
  SettingForFigRemaker = figAssetExportSession_getSettingForFigRemaker(a1, a2, &v16.start.value, a3, a4, 0, &v17);
  if (v17)
  {
    CFRelease(v17);
  }

  if (!SettingForFigRemaker)
  {
    return 0;
  }

  result = CFDictionaryGetValue(SettingForFigRemaker, @"Video");
  if (result)
  {
    UntransformedSourceDimension = FigAssetExportSession_getUntransformedSourceDimension(a1, a2, a3);
    v12 = FigExportSettingsCalculateOutputDimensions(UntransformedSourceDimension, v11) >= 960.0;
    if (v13 >= 960.0)
    {
      return v12;
    }

    else
    {
      return 0;
    }
  }

  return result;
}

void figAssetExportSession_copyFormatDescriptionsOfSourceVideoTrack(uint64_t a1, uint64_t a2)
{
  cf = 0;
  theArray = 0;
  otherArray = 0;
  v12 = 0;
  v10 = *MEMORY[0x1E695E4C0];
  VTable = CMBaseObjectGetVTable();
  OUTLINED_FUNCTION_109_3(VTable);
  if (a2)
  {
    v6 = *(v5 + 40);
    if (v6)
    {
      v6(a1, a2, &cf);
      if (cf)
      {
        CMBaseObject = FigAssetTrackGetCMBaseObject(cf);
        v8 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (v8)
        {
          v8(CMBaseObject, @"FormatDescriptionArray", *MEMORY[0x1E695E480], &v12);
        }

        CFRelease(cf);
      }
    }
  }

  else if (*(v5 + 48))
  {
    OUTLINED_FUNCTION_301();
    v9();
  }

  if (v10)
  {
    CFRelease(v10);
  }

  if (theArray)
  {
    CFRelease(theArray);
  }

  if (otherArray)
  {
    CFRelease(otherArray);
  }

  OUTLINED_FUNCTION_121_3();
}

uint64_t figAssetExportSession_copyResumableTrackSegmentState(const void *a1, BOOL *a2, CFURLRef *a3, uint64_t a4, const __CFArray **a5)
{
  v40 = *MEMORY[0x1E6960C70];
  v41 = *(MEMORY[0x1E6960C70] + 16);
  cf = 0;
  v39 = 0;
  if (!a1)
  {
    return 4294949903;
  }

  v11 = CFGetTypeID(a1);
  if (v11 != CFDictionaryGetTypeID())
  {
    OUTLINED_FUNCTION_114_4();
    v17 = 4294949903;
    goto LABEL_38;
  }

  if (!a2)
  {
    OUTLINED_FUNCTION_114_4();
    v17 = 4294950325;
    goto LABEL_38;
  }

  StringValue = FigCFDictionaryGetStringValue();
  if (!StringValue || (v13 = StringValue, FigCFDictionaryGetCMTimeIfPresent()) && (BYTE12(v40) & 0x1D) != 1)
  {
    OUTLINED_FUNCTION_374();
    v17 = FigSignalErrorAtGM();
    OUTLINED_FUNCTION_114_4();
    goto LABEL_38;
  }

  v14 = *MEMORY[0x1E695E480];
  v6 = CFURLCreateWithString(*MEMORY[0x1E695E480], v13, 0);
  BooleanValue = FigCFDictionaryGetBooleanValue();
  Mutable = 0;
  v16 = *MEMORY[0x1E695E4D0];
  if (BooleanValue != *MEMORY[0x1E695E4D0])
  {
LABEL_8:
    *a2 = BooleanValue == v16;
    if (a5)
    {
      *a5 = Mutable;
      Mutable = 0;
    }

    if (a3)
    {
      *a3 = v6;
      v6 = 0;
    }

    v17 = 0;
    if (a4)
    {
      *a4 = v40;
      *(a4 + 16) = v41;
    }

    goto LABEL_38;
  }

  v35 = *MEMORY[0x1E695E4D0];
  v37 = a2;
  ArrayValue = FigCFDictionaryGetArrayValue();
  if (ArrayValue)
  {
    v19 = ArrayValue;
    Count = CFArrayGetCount(ArrayValue);
    Mutable = CFArrayCreateMutable(v14, Count, &stru_1ED4CA328);
    if (Mutable)
    {
      v32 = BooleanValue;
      v33 = a3;
      v36 = a5;
      v34 = a4;
      if (Count < 1)
      {
LABEL_24:
        v24 = CFArrayGetCount(Mutable);
        if (v24)
        {
          v25 = v24;
          if (FigAssetRemoteCreateWithURL(v14, v6, 1, 0, &v39) || !v39)
          {
            OUTLINED_FUNCTION_374();
          }

          else
          {
            a5 = v36;
            a2 = v37;
            if (v25 < 1)
            {
LABEL_34:
              a3 = v33;
              a4 = v34;
              BooleanValue = v32;
              v16 = v35;
              goto LABEL_8;
            }

            v26 = 0;
            while (1)
            {
              ValueAtIndex = CFArrayGetValueAtIndex(Mutable, v26);
              v28 = v39;
              v29 = ValueAtIndex[1];
              v30 = *(*(CMBaseObjectGetVTable() + 16) + 40);
              if (!v30 || v30(v28, v29, &cf))
              {
                break;
              }

              if (cf)
              {
                CFRelease(cf);
                cf = 0;
              }

              if (v25 == ++v26)
              {
                goto LABEL_34;
              }
            }

            OUTLINED_FUNCTION_374();
          }

          goto LABEL_37;
        }
      }

      else
      {
        v21 = 0;
        while (1)
        {
          v43 = 0;
          v42 = 0;
          v22 = CFArrayGetValueAtIndex(v19, v21);
          if (!v22)
          {
            break;
          }

          v23 = CFGetTypeID(v22);
          if (v23 != CFDictionaryGetTypeID() || !FigCFDictionaryGetInt32IfPresent() || !FigCFDictionaryGetInt32IfPresent() || !FigCFDictionaryGetInt32IfPresent())
          {
            break;
          }

          value[0] = HIDWORD(v43);
          value[1] = v43;
          value[2] = v42;
          CFArrayAppendValue(Mutable, value);
          if (Count == ++v21)
          {
            goto LABEL_24;
          }
        }

        CFRelease(Mutable);
        Mutable = 0;
      }
    }
  }

  else
  {
    Mutable = 0;
  }

  OUTLINED_FUNCTION_374();
LABEL_37:
  v17 = FigSignalErrorAtGM();
LABEL_38:
  if (v39)
  {
    CFRelease(v39);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v6)
  {
    CFRelease(v6);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  return v17;
}

const __CFDictionary *figAssetExportSession_copyChannelSpecificAudioSettingForAudioTrack(uint64_t a1, const __CFDictionary *cf)
{
  MutableCopy = cf;
  theArray = 0;
  if (cf)
  {
    CFRetain(cf);
    Value = CFDictionaryGetValue(MutableCopy, @"audioSettingPerChannelCount");
    if (Value)
    {
      v5 = Value;
      CMBaseObject = FigAssetTrackGetCMBaseObject(a1);
      v7 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v7)
      {
        v7(CMBaseObject, @"FormatDescriptionArray", *MEMORY[0x1E695E480], &theArray);
        if (!theArray)
        {
          return MutableCopy;
        }

        Count = CFArrayGetCount(theArray);
        if (Count >= 1)
        {
          v9 = Count;
          v10 = 0;
          for (i = 0; i != v9; ++i)
          {
            ValueAtIndex = CFArrayGetValueAtIndex(theArray, i);
            StreamBasicDescription = CMAudioFormatDescriptionGetStreamBasicDescription(ValueAtIndex);
            if (StreamBasicDescription)
            {
              mChannelsPerFrame = StreamBasicDescription->mChannelsPerFrame;
              if (mChannelsPerFrame <= v10)
              {
                v15 = v10;
              }

              else
              {
                v15 = StreamBasicDescription->mChannelsPerFrame;
              }

              if (mChannelsPerFrame)
              {
                v10 = v15;
              }

              else
              {
                v10 = v10;
              }
            }
          }

          if (v10 > 0)
          {
            v16 = OUTLINED_FUNCTION_383();
            v19 = CFStringCreateWithFormat(v16, v17, v18, v10);
            if (v19)
            {
              v20 = v19;
              v21 = CFDictionaryGetValue(v5, v19);
              CFRelease(v20);
              if (v21)
              {
                CFRelease(MutableCopy);
                v22 = OUTLINED_FUNCTION_383();
                MutableCopy = CFDictionaryCreateMutableCopy(v22, v23, v21);
              }
            }
          }
        }
      }
    }

    if (theArray)
    {
      CFRelease(theArray);
    }
  }

  return MutableCopy;
}

uint64_t figAssetExportSession_GetVideoCodecType(uint64_t a1)
{
  result = 1851876449;
  if (a1)
  {
    FigCFDictionaryGetInt32IfPresent();
    FigCFDictionaryGetBooleanIfPresent();
    return 1851876449;
  }

  return result;
}

void figAssetExportSession_createProfileLevel(uint64_t a1, uint64_t a2, const __CFArray *a3, void *a4)
{
  cf = 0;
  if ((!a1 || (!FigCFEqual() || !FigVideoCompositorCopyDeviceSpecificCompositorName(1, &cf) && (FigCFEqual() || FigCFEqual())) && !FigCFEqual() && !FigCFEqual()) && figAssetExportSession_GetVideoCodecType(a2) == 1752589105)
  {
    MaximumBitsPerComponent = FigExportSettings_GetMaximumBitsPerComponent(a3);
    if (a4)
    {
      if (MaximumBitsPerComponent >= 10)
      {
        v8 = *MEMORY[0x1E6983F78];
        if (*MEMORY[0x1E6983F78])
        {
          v8 = CFRetain(v8);
        }

        *a4 = v8;
      }
    }
  }

  if (cf)
  {
    CFRelease(cf);
  }
}

void figAssetExportSession_createSegmentCandidateBoundaries()
{
  OUTLINED_FUNCTION_649();
  v2 = v1;
  v4 = v3;
  v112 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v6 = DerivedStorage;
  cf = 0;
  v101 = 0;
  v98 = 0;
  v99 = 0;
  v96 = 0;
  v97 = 0;
  HIWORD(v95) = 0;
  v7 = *(DerivedStorage + 24);
  v8 = MEMORY[0x1E695E480];
  if (v7 == 2)
  {
    goto LABEL_4;
  }

  if (v7 != 1)
  {
    if (v7)
    {
      goto LABEL_17;
    }

LABEL_4:
    FigAssetGetCMBaseObject(*(DerivedStorage + 16));
    if (!*(*(CMBaseObjectGetVTable() + 8) + 48))
    {
      goto LABEL_49;
    }

    v9 = OUTLINED_FUNCTION_68_14();
    if (!v10(v9))
    {
      if (!*(*(CMBaseObjectGetVTable() + 16) + 56))
      {
        goto LABEL_49;
      }

      v11 = OUTLINED_FUNCTION_92_9();
      if (!v12(v11))
      {
        FigBaseObject = FigTrackReaderGetFigBaseObject(v101);
        v14 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (!v14)
        {
          goto LABEL_17;
        }

        v15 = kFigTrackProperty_EditCursorService;
        goto LABEL_16;
      }
    }

LABEL_67:
    Mutable = 0;
    goto LABEL_50;
  }

  FigAssetGetCMBaseObject(*(DerivedStorage + 16));
  if (!*(*(CMBaseObjectGetVTable() + 8) + 48))
  {
    goto LABEL_49;
  }

  v16 = OUTLINED_FUNCTION_68_14();
  if (v17(v16))
  {
    goto LABEL_67;
  }

  if (!*(*(CMBaseObjectGetVTable() + 16) + 56))
  {
    goto LABEL_49;
  }

  v18 = OUTLINED_FUNCTION_92_9();
  if (v19(v18))
  {
    goto LABEL_67;
  }

  FigBaseObject = FigTrackReaderGetFigBaseObject(v101);
  v14 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v14)
  {
    goto LABEL_17;
  }

  v15 = kFigTrackProperty_SecondaryEditCursorService;
LABEL_16:
  if (v14(FigBaseObject, *v15, v0, &v97) == -12784)
  {
    goto LABEL_67;
  }

LABEL_17:
  v20 = v97;
  if (!v97)
  {
    FigSignalErrorAtGM();
    goto LABEL_67;
  }

  v21 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v21)
  {
LABEL_49:
    Mutable = 0;
    goto LABEL_50;
  }

  *v70 = *MEMORY[0x1E6960CC0];
  *v85 = *MEMORY[0x1E6960CC0];
  v22 = *(MEMORY[0x1E6960CC0] + 16);
  *v86 = v22;
  if (v21(v20, v85, &v96))
  {
    goto LABEL_67;
  }

  HIDWORD(v69) = v4;
  v23 = *(v6 + 240);
  value = *(v6 + 264);
  v94 = *(v6 + 256);
  *v92 = *(v6 + 272);
  *v93 = v23;
  Mutable = CFArrayCreateMutable(*v8, 0, &FAES_SegmentCallBacks);
  if (Mutable)
  {
    *v89 = *v70;
    v90 = v22;
    v26 = 0uLL;
    v68 = v4;
    while (1)
    {
      *v88 = v26;
      *&v88[16] = v26;
      *&v86[16] = v26;
      v87 = v26;
      *v85 = v26;
      *v86 = v26;
      v27 = v96;
      v28 = *(*(CMBaseObjectGetVTable() + 16) + 24);
      if (!v28)
      {
        break;
      }

      if (v28(v27, v85))
      {
        break;
      }

      v29 = v101;
      v30 = *(*(CMBaseObjectGetVTable() + 16) + 32);
      if (!v30 || v30(v29, &cf))
      {
        break;
      }

      v110 = *&v86[8];
      v111 = *&v86[16];
      v31 = *&v86[20];
      v32 = *&v86[24];
      v108 = *&v88[8];
      v109 = *&v88[16];
      v33 = *&v88[20];
      v34 = *&v88[24];
      v35 = (v86[20] & 0x1F) == 3 || (v88[20] & 0x1F) == 3;
      if (v35 && (OUTLINED_FUNCTION_58_14(), lhs.value = *&v86[8], lhs.timescale = *&v86[16], lhs.flags = v31, lhs.epoch = v32, v103.value = *&v88[8], v103.timescale = *&v88[16], v103.flags = v33, v103.epoch = v34, OUTLINED_FUNCTION_87_5(v36, v37, v38, v39, v40, v41, v42, v43, v64, v65, v66, v67, v68, v69, v70[0], v70[1], v71, v72, v73, v74, v75, v76, v77, v78, v79, v80, v81, v82, v83.value, *&v83.timescale, v83.epoch, v84, v85[0], v85[1], *v86, *&v86[8], *&v86[16], *&v86[24], v87, *(&v87 + 1), *v88, *&v88[8], *&v88[16], *&v88[24], v89[0], v89[1], v90, v91, v92[0], v92[1], v93[0], v93[1], v94, v95, v96, v97, v98, v99, cf, v101, v102.value, *&v102.timescale, v102.epoch), v44 = OUTLINED_FUNCTION_66_15(), CMTimeAbsoluteValue(v45, v44), OUTLINED_FUNCTION_43_24(&rhs), OUTLINED_FUNCTION_27_33() <= 0) || (time1.value = v110, time1.timescale = v111, time1.flags = v31, time1.epoch = v32, rhs.value = v108, rhs.timescale = v109, rhs.flags = v33, rhs.epoch = v34, v46 = OUTLINED_FUNCTION_54_20(), memset(&v83, 0, sizeof(v83)), !CMTimeCompare(v46, v47)))
      {
        *&v83.value = *v93;
        v83.epoch = v94;
      }

      else
      {
        *&time1.value = *v93;
        time1.epoch = v94;
        rhs = *&v86[8];
        lhs = *&v88[8];
        OUTLINED_FUNCTION_54_20();
        CMTimeMultiplyTimeByTimeRatio();
      }

      v80 = 0;
      v81 = 0;
      v82 = 0;
      *&time1.value = *v85;
      time1.epoch = *v86;
      rhs = v83;
      v48 = OUTLINED_FUNCTION_54_20();
      CMTimeAdd(v50, v48, v49);
      Count = CFArrayGetCount(Mutable);
      if (Count)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(Mutable, Count - 1);
        v53 = *ValueAtIndex;
        time1.epoch = *(ValueAtIndex + 2);
        *&time1.value = v53;
        lhs = *(ValueAtIndex + 1);
        v54 = OUTLINED_FUNCTION_22_40();
        CMTimeAdd(v56, v54, v55);
        OUTLINED_FUNCTION_65_16();
        OUTLINED_FUNCTION_113_4();
      }

      else
      {
        OUTLINED_FUNCTION_65_16();
        *&time1.value = *v70;
        time1.epoch = v22;
      }

      v107 = 1;
      CFArrayAppendValue(Mutable, &time1);
      *v89 = *&v88[8];
      v90 = *&v88[24];
      *v93 = *v70;
      v94 = v22;
      rhs.value = value;
      *&rhs.timescale = *v92;
      lhs = *&v88[8];
      v57 = OUTLINED_FUNCTION_66_15();
      CMTimeSubtract(v58, v57, &lhs);
      value = time1.value;
      *v92 = *&time1.timescale;
      OUTLINED_FUNCTION_110_2(MEMORY[0x1E6960C88]);
      v59 = OUTLINED_FUNCTION_54_20();
      if (!CMTimeCompare(v59, v60) || value)
      {
        v61 = v96;
        v62 = *(*(CMBaseObjectGetVTable() + 16) + 16);
        if (v62)
        {
          v63 = v62(v61, 1);
        }

        else
        {
          v63 = -12782;
        }

        if (cf)
        {
          CFRelease(cf);
          cf = 0;
        }

        if (v99)
        {
          CFRelease(v99);
          v99 = 0;
        }

        v26 = 0uLL;
        if (!v63)
        {
          continue;
        }
      }

      if (!v2)
      {
        break;
      }

      *v2 = Mutable;
      goto LABEL_67;
    }
  }

  else
  {
    FigSignalErrorAtGM();
  }

LABEL_50:
  if (v101)
  {
    CFRelease(v101);
  }

  if (v98)
  {
    CFRelease(v98);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (v97)
  {
    CFRelease(v97);
  }

  if (v96)
  {
    CFRelease(v96);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v99)
  {
    CFRelease(v99);
  }

  OUTLINED_FUNCTION_651();
}

void figAssetExportSession_createParallelizedSegmentBoundaries()
{
  OUTLINED_FUNCTION_649();
  v5 = v4;
  v146 = v6;
  v136 = v7;
  v180 = *MEMORY[0x1E69E9840];
  if (v1)
  {
    v8 = v2;
    v9 = v1;
    v10 = v0;
    v134 = v3;
    Count = CFArrayGetCount(v1);
    theArray = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, &FAES_SegmentCallBacks);
    v12 = CFArrayGetCount(v9);
    v13 = v12;
    v132 = v10;
    if (v12 >= v10)
    {
      v14 = v10;
    }

    else
    {
      v14 = v12;
    }

    LODWORD(v15) = v8->flags;
    v16 = MEMORY[0x1E6960CC0];
    v130 = v5;
    if (v15)
    {
      v173 = **&MEMORY[0x1E6960CC0];
      if (v12 >= 1)
      {
        v19 = 0;
        do
        {
          CFArrayGetValueAtIndex(v9, v19);
          OUTLINED_FUNCTION_42_27();
          *&v171.value = *(v20 + 24);
          OUTLINED_FUNCTION_32_28(*(v20 + 40));
          ++v19;
        }

        while (v13 != v19);
      }

      OUTLINED_FUNCTION_42_27();
      v171 = *v8;
      v18 = CMTimeDivide();
    }

    else if (v12 < 1)
    {
      v18 = 0;
    }

    else
    {
      v17 = 0;
      v18 = 0;
      do
      {
        v18 += *(CFArrayGetValueAtIndex(v9, v17++) + 6);
      }

      while (v13 != v17);
    }

    v21 = (v14 + v18 - 1) / v14;
    v154 = *v16;
    *&v169.value = *v16;
    v22 = *(v16 + 2);
    v169.epoch = v22;
    if (v21 <= v136)
    {
      v21 = v136;
    }

    v148 = v21;
    v167.epoch = v22;
    *&v167.value = v154;
    v150 = *(CFArrayGetValueAtIndex(v9, 0) + 2);
    v152 = v22;
    *&v165.value = v154;
    v165.epoch = v22;
    *&v163.value = v154;
    v163.epoch = v22;
    if (Count >= 1)
    {
      v23 = 0;
      v159 = 0;
      v24 = 0;
      v25 = 0;
      HIDWORD(v142) = v15;
      v138 = v8;
      v140 = v9;
      while (1)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(v9, v23);
        v35 = ValueAtIndex;
        v36 = ValueAtIndex[2];
        if (v36 == v150)
        {
          v37 = v24;
          if ((v15 & 1) == 0)
          {
            goto LABEL_26;
          }
        }

        else
        {
          v165 = v163;
          if (v15)
          {
            v51 = OUTLINED_FUNCTION_37_30(ValueAtIndex, v27, v28, v29, v30, v31, v32, v33, v130, v132, v134, v136, v138, v140, v142, theArray, v146, v148, v150, v152, v154, *(&v154 + 1), v157, v159, v161.value, *&v161.timescale, v161.epoch, v162, *&v163.value, v163.value);
            OUTLINED_FUNCTION_96_8(v52, v53, v54, v55, v56, v57, v58, v59, v131, v133, v135, v137, v139, v141, v143, theArraya, v147, v149, v151, v153, v155, v156, v158, v160, v161.value, *&v161.timescale, v161.epoch, v162, v163.value, *&v163.timescale, v163.epoch, v164, v165.value, *&v165.timescale, v163.epoch, v166, v167.value, *&v167.timescale, v167.epoch, v168, v51, v169.value);
            v60 = OUTLINED_FUNCTION_20_39();
            ValueAtIndex = CMTimeAdd(v62, v60, v61);
            v169.epoch = v152;
            *&v169.value = v154;
            v36 = v35[2];
          }

          v37 = 0;
          v34 = v154;
          *&v163.value = v154;
          v163.epoch = v152;
          v159 = v24;
          v150 = v36;
          if ((v15 & 1) == 0)
          {
LABEL_26:
            OUTLINED_FUNCTION_37_30(ValueAtIndex, v27, v28, v29, v30, v31, v32, v33, v130, v132, v134, v136, v138, v140, v142, theArray, v146, v148, v150, v152, v154, *(&v154 + 1), v157, v159, v161.value, *&v161.timescale, v161.epoch, v162, v34, v163.value);
            *&v172.value = *(v35 + 3);
            v39 = v35[6];
            v172.epoch = v35[5];
            v63 = OUTLINED_FUNCTION_20_39();
            v42 = CMTimeAdd(v65, v63, v64);
            goto LABEL_27;
          }
        }

        v172 = *(v35 + 1);
        *&v171.value = *&v169.value;
        OUTLINED_FUNCTION_32_28(v169.epoch);
        v172 = *v8;
        OUTLINED_FUNCTION_20_39();
        v38 = CMTimeDivide();
        if (v38 > 2147483646)
        {
          FigSignalErrorAtGM();
          goto LABEL_65;
        }

        v39 = v38;
        v173 = *v8;
        CMTimeMultiply(&v172, &v173, v38);
        v171 = v163;
        v40 = OUTLINED_FUNCTION_72_11();
        v42 = CMTimeAdd(v41, v40, &v172);
        v50 = *&v173.value;
        v163 = v173;
LABEL_27:
        v24 = v39 + v37;
        v66 = v39 + v37 + v159;
        if (v66 >= v148)
        {
          v67 = theArray;
          memset(&v161, 0, sizeof(v161));
          v173 = v165;
          v172 = v163;
          v68 = OUTLINED_FUNCTION_20_39();
          v71 = CMTimeAdd(v70, v68, v69);
          v178 = 0;
          v179 = 0;
          v176 = *v146;
          v79 = *(v146 + 12);
          v177 = *(v146 + 8);
          v80 = *(v146 + 16);
          v81 = 0 >> 96 == 3 || (v79 & 0x1F) == 3;
          if (v81 && (OUTLINED_FUNCTION_69_11(v71, v72, v73, v74, v75, v76, v77, v78, v130, v132, v134, v136, v138, v140, v142, theArray, v146, v148, v150, v152, v154, *(&v154 + 1), v157, v159, 0), v171.timescale = v82, v171.flags = 0 >> 96, v171.epoch = 0, OUTLINED_FUNCTION_70_13(), rhs.flags = v79, rhs.epoch = v80, v83 = OUTLINED_FUNCTION_103_5(), CMTimeSubtract(v84, v83, &rhs), CMTimeAbsoluteValue(&v173, &v172), OUTLINED_FUNCTION_43_24(&v172), *&v171.value = *&v173.value, OUTLINED_FUNCTION_53_20() <= 0) || (v173.value = v178, v173.timescale = v179, v173.flags = 0 >> 96, v173.epoch = 0, OUTLINED_FUNCTION_62_18(), v172.timescale = v85, v172.flags = v79, v172.epoch = v80, v86 = OUTLINED_FUNCTION_20_39(), v42 = CMTimeCompare(v86, v87), (v42 & 0x80000000) == 0))
          {
            v173 = v167;
            *&v174.value = *&v161.value;
            v174.epoch = 0;
            v175 = v66;
            CFArrayAppendValue(v67, &v173);
            v173 = v167;
            *&v172.value = *&v161.value;
            v172.epoch = 0;
            v88 = OUTLINED_FUNCTION_20_39();
            v42 = CMTimeAdd(v90, v88, v89);
            v24 = 0;
            v159 = 0;
            v50 = v154;
            *&v165.value = v154;
            v165.epoch = v152;
            *&v163.value = v154;
            ++v25;
            v163.epoch = v152;
          }

          LOBYTE(v15) = BYTE4(v142);
          v8 = v138;
          v9 = v140;
        }

        if (Count != 1)
        {
          goto LABEL_58;
        }

        OUTLINED_FUNCTION_37_30(v42, v43, v44, v45, v46, v47, v48, v49, v130, v132, v134, v136, v138, v140, v142, theArray, v146, v148, v150, v152, v154, *(&v154 + 1), v157, v159, v161.value, *&v161.timescale, v161.epoch, v162, v50, v163.value);
        *&v172.value = v154;
        v172.epoch = v152;
        v91 = OUTLINED_FUNCTION_20_39();
        if (!CMTimeCompare(v91, v92))
        {
          goto LABEL_58;
        }

        memset(&v161, 0, sizeof(v161));
        v173 = v165;
        v172 = v163;
        v93 = OUTLINED_FUNCTION_20_39();
        v96 = CMTimeAdd(v95, v93, v94);
        if (v24 >= v136)
        {
          v178 = 0;
          v179 = 0;
          v176 = *v146;
          v104 = *(v146 + 12);
          v177 = *(v146 + 8);
          v15 = *(v146 + 16);
          if (0 >> 96 == 3 || (v104 & 0x1F) == 3)
          {
            OUTLINED_FUNCTION_69_11(v96, v97, v98, v99, v100, v101, v102, v103, v130, v132, v134, v136, v138, v140, v142, theArray, v146, v148, v150, v152, v154, *(&v154 + 1), v157, v159, 0);
            v171.timescale = v106;
            v171.flags = 0 >> 96;
            v171.epoch = 0;
            OUTLINED_FUNCTION_70_13();
            rhs.flags = v104;
            rhs.epoch = v15;
            v107 = OUTLINED_FUNCTION_103_5();
            CMTimeSubtract(v108, v107, &rhs);
            CMTimeAbsoluteValue(&v173, &v172);
            OUTLINED_FUNCTION_43_24(&v172);
            *&v171.value = *&v173.value;
            v109 = OUTLINED_FUNCTION_53_20();
            if (v109 <= 0)
            {
              LOBYTE(v15) = BYTE4(v142);
LABEL_54:
              if (v25)
              {
                if (v15)
                {
                  OUTLINED_FUNCTION_96_8(v109, v110, v111, v112, v113, v114, v115, v116, v130, v132, v134, v136, v138, v140, v142, theArray, v146, v148, v150, v152, v154, *(&v154 + 1), v157, v159, v161.value, 0, 0, v162, v163.value, *&v163.timescale, v163.epoch, v164, v165.value, *&v165.timescale, v165.epoch, v166, v167.value, *&v167.timescale, v167.epoch, v168, v117, v169.value);
                  *&v171.value = *&v161.value;
                  OUTLINED_FUNCTION_32_28(v161.epoch);
                  v161 = v173;
                }

                *&v173.value = *&v167.value;
                *&v174.value = *&v161.value;
                OUTLINED_FUNCTION_93_6(v159 + v24);
                CFArrayAppendValue(theArray, v129);
                ++v25;
              }

              goto LABEL_58;
            }
          }

          v173.value = v178;
          v173.timescale = v179;
          v173.flags = 0 >> 96;
          v173.epoch = 0;
          OUTLINED_FUNCTION_62_18();
          v172.timescale = v118;
          v172.flags = v104;
          v172.epoch = v15;
          v119 = OUTLINED_FUNCTION_20_39();
          v109 = CMTimeCompare(v119, v120);
          LOBYTE(v15) = BYTE4(v142);
          if ((v109 & 0x80000000) == 0 || !v25)
          {
            goto LABEL_54;
          }

LABEL_50:
          v121 = CFArrayGetValueAtIndex(theArray, v25 - 1);
          OUTLINED_FUNCTION_104_5();
          v171 = v165;
          rhs = v163;
          v122 = OUTLINED_FUNCTION_72_11();
          CMTimeAdd(v123, v122, &rhs);
          v171 = *(v121 + 1);
          v124 = OUTLINED_FUNCTION_103_5();
          CMTimeAdd(v125, v124, &v173);
          if (v15)
          {
            v171 = v169;
            rhs = v172;
            v126 = OUTLINED_FUNCTION_72_11();
            CMTimeAdd(v127, v126, &rhs);
            OUTLINED_FUNCTION_42_27();
          }

          v128 = v159 + v24 + *(v121 + 6);
          v171 = *v121;
          v174 = v172;
          v173 = v171;
          v175 = v128;
          CFArraySetValueAtIndex(theArray, v25 - 1, &v173);
          goto LABEL_58;
        }

        if (v25)
        {
          goto LABEL_50;
        }

LABEL_58:
        ++v23;
        if (!--Count)
        {
          goto LABEL_61;
        }
      }
    }

    v25 = 0;
LABEL_61:
    if (v25 == v132)
    {
      if (v134)
      {
        *v134 = theArray;
        goto LABEL_67;
      }
    }

    else
    {
      *v134 = 0;
    }

LABEL_65:
    if (theArray)
    {
      CFRelease(theArray);
    }
  }

LABEL_67:
  OUTLINED_FUNCTION_651();
}

void figAssetExportSession_createSerializedSegmentBoundaries()
{
  OUTLINED_FUNCTION_649();
  v5 = v4;
  v79 = v6;
  v106 = *MEMORY[0x1E69E9840];
  if (!v0)
  {
    goto LABEL_37;
  }

  v7 = v3;
  v8 = v2;
  v9 = v1;
  v10 = v0;
  Count = CFArrayGetCount(v0);
  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, &FAES_SegmentCallBacks);
  HIDWORD(v86) = v9->flags;
  v84 = *MEMORY[0x1E6960CC0];
  *&v94.value = *MEMORY[0x1E6960CC0];
  v94.epoch = *(MEMORY[0x1E6960CC0] + 16);
  v93.epoch = v94.epoch;
  *&v93.value = v84;
  v80 = *(CFArrayGetValueAtIndex(v10, 0) + 2);
  v91 = v84;
  epoch = v94.epoch;
  *v89 = v84;
  v83 = v94.epoch;
  *&v89[16] = v94.epoch;
  if (Count >= 1)
  {
    v74 = v5;
    v75 = v7;
    v13 = 0;
    v87 = 0;
    v81 = 0;
    v14 = 0;
    v77 = v9;
    v78 = v8;
    v76 = v10;
    while (1)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(v10, v13);
      v24 = ValueAtIndex;
      v25 = ValueAtIndex[2];
      if (v25 == v80)
      {
        v26 = v14;
      }

      else
      {
        v91 = *v89;
        epoch = *&v89[16];
        if ((v86 & 0x100000000) != 0)
        {
          OUTLINED_FUNCTION_40_26(ValueAtIndex, v16, v17, v18, v19, v20, v21, v22, v73, v74, v75, v76, v77, v78, v79, v80, v81, v83, v84, *(&v84 + 1), v85, v86, v87, *v88, *&v88[8], *&v88[16], *v89, *v89);
          v97 = v94;
          v27 = OUTLINED_FUNCTION_20_39();
          ValueAtIndex = CMTimeAdd(v29, v27, v28);
          v94.epoch = v83;
          *&v94.value = v84;
          v25 = v24[2];
        }

        v26 = 0;
        v23 = v84;
        *v89 = v84;
        *&v89[16] = v83;
        v87 = v14;
        v80 = v25;
      }

      if ((v86 & 0x100000000) != 0)
      {
        v97 = *(v24 + 1);
        *&v96.value = *&v94.value;
        OUTLINED_FUNCTION_32_28(v94.epoch);
        v97 = *v9;
        OUTLINED_FUNCTION_20_39();
        v43 = CMTimeDivide();
        if (v43 > 2147483646)
        {
          OUTLINED_FUNCTION_40_0();
          FigSignalErrorAtGM();
          if (Mutable)
          {
            goto LABEL_36;
          }

          goto LABEL_37;
        }

        v30 = v43;
        v98 = *v9;
        CMTimeMultiply(&v97, &v98, v43);
        v96 = *v89;
        v44 = OUTLINED_FUNCTION_72_11();
        v34 = CMTimeAdd(v45, v44, &v97);
        v42 = *&v98.value;
        *v89 = v98;
      }

      else
      {
        OUTLINED_FUNCTION_40_26(ValueAtIndex, v16, v17, v18, v19, v20, v21, v22, v73, v74, v75, v76, v77, v78, v79, v80, v81, v83, v84, *(&v84 + 1), v85, v86, v87, *v88, *&v88[8], *&v88[16], v23, *v89);
        *&v97.value = *(v24 + 3);
        v30 = v24[6];
        v97.epoch = v24[5];
        v31 = OUTLINED_FUNCTION_20_39();
        v34 = CMTimeAdd(v33, v31, v32);
      }

      v14 = v30 + v26;
      v46 = v14 + v87;
      if (v14 + v87 >= v8)
      {
        *&v97.value = OUTLINED_FUNCTION_67_16(v34, v35, v36, v37, v38, v39, v40, v41, v73, v74, v75, v76, v77, v78, v79, v80, v81, v83, v84, *(&v84 + 1), v85, v86, v87, 0, 0, 0, *v89, *&v89[16], v90, v91, epoch);
        v97.epoch = *&v89[16];
        v47 = OUTLINED_FUNCTION_20_39();
        CMTimeAdd(v49, v47, v48);
        v104 = *v88;
        v105 = *&v88[8];
        v102 = *v79;
        v50 = *(v79 + 12);
        v103 = *(v79 + 8);
        v51 = *(v79 + 16);
        v52 = (v88[12] & 0x1F) == 3 || (v50 & 0x1F) == 3;
        if (v52 && (memset(&v98, 0, sizeof(v98)), v96 = *v88, rhs.value = *v79, rhs.timescale = *(v79 + 8), rhs.flags = v50, rhs.epoch = v51, v53 = OUTLINED_FUNCTION_103_5(), CMTimeSubtract(v54, v53, &rhs), CMTimeAbsoluteValue(&v98, &v97), OUTLINED_FUNCTION_43_24(&v97), *&v96.value = *&v98.value, OUTLINED_FUNCTION_53_20() <= 0) || (v98.value = v104, v98.timescale = v105, v98.flags = *&v88[12], v98.epoch = *&v88[16], v97.value = v102, v97.timescale = v103, v97.flags = v50, v97.epoch = v51, v55 = OUTLINED_FUNCTION_20_39(), v34 = CMTimeCompare(v55, v56), (v34 & 0x80000000) == 0))
        {
          v98 = v93;
          v99 = *v88;
          v100 = *&v88[16];
          v101 = v46;
          CFArrayAppendValue(Mutable, &v98);
          v98 = v93;
          v97 = *v88;
          v57 = OUTLINED_FUNCTION_20_39();
          v34 = CMTimeAdd(v59, v57, v58);
          v14 = 0;
          v87 = 0;
          v42 = v84;
          v91 = v84;
          epoch = v83;
          *v89 = v84;
          ++v81;
          *&v89[16] = v83;
        }

        v9 = v77;
        v8 = v78;
        v10 = v76;
      }

      if (Count == 1)
      {
        OUTLINED_FUNCTION_40_26(v34, v35, v36, v37, v38, v39, v40, v41, v73, v74, v75, v76, v77, v78, v79, v80, v81, v83, v84, *(&v84 + 1), v85, v86, v87, *v88, *&v88[8], *&v88[16], v42, *v89);
        *&v97.value = v84;
        v97.epoch = v83;
        v60 = OUTLINED_FUNCTION_20_39();
        if (CMTimeCompare(v60, v61))
        {
          OUTLINED_FUNCTION_104_5();
          *&v96.value = OUTLINED_FUNCTION_67_16(v62, v63, v64, v65, v66, v67, v68, v69, v73, v74, v75, v76, v77, v78, v79, v80, v81, v83, v84, *(&v84 + 1), v85, v86, v87, *v88, *&v88[8], *&v88[16], *v89, *&v89[16], v90, v91, epoch);
          v96.epoch = *&v89[16];
          CMTimeAdd(&v97, &v98, &v96);
          if (v82)
          {
            if ((v86 & 0x100000000) != 0)
            {
              v96 = v94;
              rhs = v97;
              v70 = OUTLINED_FUNCTION_72_11();
              CMTimeAdd(v71, v70, &rhs);
              v97 = v98;
            }

            *&v98.value = *&v93.value;
            v99 = *&v97.value;
            OUTLINED_FUNCTION_93_6(v87 + v14);
            CFArrayAppendValue(Mutable, v72);
            v81 = v82 + 1;
          }

          else
          {
            v81 = 0;
          }
        }
      }

      ++v13;
      if (!--Count)
      {
        v7 = v75;
        if (v81 < 2)
        {
          break;
        }

        if (v75)
        {
          *v75 = Mutable;
          goto LABEL_37;
        }

        goto LABEL_35;
      }
    }
  }

  *v7 = 0;
LABEL_35:
  if (Mutable)
  {
LABEL_36:
    CFRelease(Mutable);
  }

LABEL_37:
  OUTLINED_FUNCTION_651();
}

void figAssetExportSession_transferTrackProperties(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v27 = 0;
  v28 = 0;
  v26 = 0;
  CMBaseObject = FigAssetGetCMBaseObject(*(a1 + 16));
  v6 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (v6)
  {
    v7 = *MEMORY[0x1E695E480];
    if (!v6(CMBaseObject, @"assetProperty_FormatReader", *MEMORY[0x1E695E480], &v27))
    {
      v8 = v27;
      v9 = *(*(CMBaseObjectGetVTable() + 16) + 56);
      if (v9)
      {
        if (!v9(v8, a3, &v28, &v26))
        {
          cf = 0;
          FigBaseObject = FigTrackReaderGetFigBaseObject(v28);
          v11 = *(*(CMBaseObjectGetVTable() + 8) + 48);
          if (v11)
          {
            v11(FigBaseObject, @"TrackLanguageCode", v7, &cf);
            if (cf)
            {
              if (*(*(CMBaseObjectGetVTable() + 16) + 40))
              {
                v12 = OUTLINED_FUNCTION_177();
                v13(v12);
              }

              CFRelease(cf);
            }
          }

          v24 = 0;
          v14 = FigTrackReaderGetFigBaseObject(v28);
          v15 = *(*(CMBaseObjectGetVTable() + 8) + 48);
          if (v15)
          {
            v15(v14, @"ExtendedLanguageTagString", v7, &v24);
            if (v24)
            {
              if (*(*(CMBaseObjectGetVTable() + 16) + 40))
              {
                v16 = OUTLINED_FUNCTION_177();
                v17(v16);
              }

              CFRelease(v24);
            }
          }

          if (*(a1 + 384))
          {
            OUTLINED_FUNCTION_63();
            if (v18)
            {
              v23 = 0;
              v19 = FigTrackReaderGetFigBaseObject(v28);
              v20 = *(*(CMBaseObjectGetVTable() + 8) + 48);
              if (v20)
              {
                v20(v19, @"AlternateGroupID", v7, &v23);
                if (v23)
                {
                  if (*(*(CMBaseObjectGetVTable() + 16) + 40))
                  {
                    v21 = OUTLINED_FUNCTION_177();
                    v22(v21);
                  }

                  CFRelease(v23);
                }
              }
            }
          }
        }
      }
    }
  }

  if (v28)
  {
    CFRelease(v28);
  }

  if (v27)
  {
    CFRelease(v27);
  }
}

uint64_t figAssetExportSession_canPerformFastFrameRateConversionWithPreset(uint64_t a1, const __CFDictionary *a2, const void *a3)
{
  OUTLINED_FUNCTION_106(MEMORY[0x1E6960C70]);
  v14 = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v6 = DerivedStorage;
  if (*(DerivedStorage + 312) || *(DerivedStorage + 216) || !FigCFEqual() || FigCFEqual())
  {
    goto LABEL_2;
  }

  if (!a2 || !CFDictionaryGetValue(a2, @"maxFrameRate"))
  {
    if ((*(v6 + 300) & 0x1D) != 1)
    {
      *(v6 + 312) = 1;
      goto LABEL_2;
    }

    v15 = *(v6 + 288);
    if (a3)
    {
      goto LABEL_9;
    }

LABEL_16:
    FigSignalErrorAtGM();
    goto LABEL_2;
  }

  value.value = 0;
  FigCFDictionaryGetInt64IfPresent();
  FigCFDictionaryGetIntIfPresent();
  CMTimeMake(&v15, 0, 0);
  if (!a3)
  {
    goto LABEL_16;
  }

LABEL_9:
  v8 = CFGetTypeID(a3);
  v9 = *(v6 + 16);
  v10 = figAssetExportSession_IsAlphaPreset(*(v6 + 72));
  if (!remakerFamily_GetDefaultSourceVideoTrackFromAsset(v8, v9, v10, *(v6 + 98), &v14))
  {
    if (v14)
    {
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_31_29();
      FigNotificationCenterAddWeakListener();
      *(v6 + 328) = 1;
      v11 = v14;
      timescale = v15;
      v12 = *(*(CMBaseObjectGetVTable() + 16) + 128);
      if (v12)
      {
        value = timescale;
        if (!v12(a3, v11, &value))
        {
          dispatch_semaphore_wait(*(v6 + 336), 0xFFFFFFFFFFFFFFFFLL);
          OUTLINED_FUNCTION_31_29();
          FigNotificationCenterRemoveWeakListener();
        }
      }
    }
  }

LABEL_2:
  *(v6 + 328) = 0;
  return *(v6 + 312);
}

void figAssetExportSession_getSourceVideoFrameRate()
{
  cf = 0;
  if (*(*(CMBaseObjectGetVTable() + 16) + 48))
  {
    OUTLINED_FUNCTION_301();
    v0();
  }

  OUTLINED_FUNCTION_121_3();
}

uint64_t figAssetExportSession_computeAudioTrackByteRate(uint64_t result, int a2)
{
  v14 = 0;
  if (result)
  {
    Value = CFDictionaryGetValue(result, @"audioPreset");
    if (FigCFEqual())
    {
      return 0;
    }

    else
    {
      if (!a2)
      {
        goto LABEL_8;
      }

      Int64IfPresent = FigCFDictionaryGetInt64IfPresent();
      result = v14;
      if (Int64IfPresent)
      {
        result = v14 / 8;
        v14 /= 8;
      }

      if (!result)
      {
LABEL_8:
        v5 = FigCFDictionaryGetInt64IfPresent();
        v6 = v14;
        if (v5)
        {
          v6 = v14 / 8;
          v14 /= 8;
        }

        if (Value && !v6)
        {
          v12 = 0;
          v13 = 0;
          v10 = 0;
          v11 = 0;
          FigAudioCompressionOptionsGetPreset(Value, &v13, &v11, &v12, &v10);
          v7 = FigCFDictionaryGetInt64IfPresent();
          v6 = v14;
          if (v7)
          {
            v6 = v14 / 8;
          }

          if (!v6 && v13)
          {
            v8 = *(v13 + 20);
            if (v8)
            {
              *&v9 = v8;
              LODWORD(v9) = *(v13 + 16);
              v6 = (*v13 / v8 * v9);
            }

            else
            {
              v6 = 0;
            }
          }
        }

        if (v6)
        {
          return v6;
        }

        else
        {
          return 21000;
        }
      }
    }
  }

  return result;
}

CFErrorRef figAssetExportSession_createCFError(int a1, const char *a2)
{
  v3 = *MEMORY[0x1E695E480];
  if (a2)
  {
    Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (!Mutable)
    {
      return 0;
    }

    v6 = Mutable;
    v7 = CFStringCreateWithCString(v3, a2, 0x8000100u);
    CFDictionarySetValue(v6, *MEMORY[0x1E695E618], v7);
    v8 = CFErrorCreate(v3, @"FigAssetExportSession_ErrorDomain", a1, v6);
    if (v7)
    {
      CFRelease(v7);
    }

    CFRelease(v6);
    return v8;
  }

  else
  {
    v10 = a1;
    v11 = *MEMORY[0x1E695E480];

    return CFErrorCreate(v11, @"FigAssetExportSession_ErrorDomain", v10, 0);
  }
}

double figAssetExportSession_getTotalByteRateOfAllAssetTracks(uint64_t a1)
{
  v45 = 0;
  v46 = 0;
  v44 = 0;
  dictionaryRepresentation = 0;
  v42 = **&MEMORY[0x1E6960C70];
  CMBaseObject = FigAssetGetCMBaseObject(a1);
  v3 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  v4 = 0.0;
  if (v3)
  {
    v5 = *MEMORY[0x1E695E480];
    if (!v3(CMBaseObject, @"Duration", *MEMORY[0x1E695E480], &dictionaryRepresentation))
    {
      v6 = CMTimeMakeFromDictionary(&v42, dictionaryRepresentation);
      OUTLINED_FUNCTION_660(v6, v7, v8, v9, v10, v11, v12, v13, v35, v37, time2.value, *&time2.timescale, time2.epoch, v39, time1.value, *&time1.timescale, time1.epoch, v41, *&v42.value);
      time2 = **&MEMORY[0x1E6960CC0];
      if (CMTimeCompare(&time1, &time2))
      {
        v37 = 0;
        v14 = FigAssetGetCMBaseObject(a1);
        v15 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (v15)
        {
          if (!v15(v14, @"assetProperty_FormatReader", v5, &v44))
          {
            v16 = v44;
            v17 = *(*(CMBaseObjectGetVTable() + 16) + 8);
            if (v17)
            {
              v18 = v17(v16, &v37);
              if (!v18)
              {
                if (v37 < 1)
                {
LABEL_21:
                  OUTLINED_FUNCTION_660(v18, v19, v20, v21, v22, v23, v24, v25, v36, v37, time2.value, *&time2.timescale, time2.epoch, v39, time1.value, *&time1.timescale, time1.epoch, v41, *&v42.value);
                  v4 = v4 / CMTimeGetSeconds(&time1) + 0.0;
                }

                else
                {
                  v26 = 0;
                  v27 = 0;
                  while (1)
                  {
                    v4 = 0.0;
                    if (!*(*(CMBaseObjectGetVTable() + 16) + 48))
                    {
                      break;
                    }

                    v28 = OUTLINED_FUNCTION_104_0();
                    if (v29(v28))
                    {
                      break;
                    }

                    FigBaseObject = FigTrackReaderGetFigBaseObject(v46);
                    v31 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                    if (!v31)
                    {
                      break;
                    }

                    if (v31(FigBaseObject, @"UneditedNumDataBytes", v5, &v45))
                    {
                      break;
                    }

                    FigCFNumberGetFloat64();
                    if (v32 == 0.0)
                    {
                      break;
                    }

                    v33 = v32;
                    if (v45)
                    {
                      CFRelease(v45);
                      v45 = 0;
                    }

                    v18 = v46;
                    if (v46)
                    {
                      CFRelease(v46);
                      v46 = 0;
                    }

                    v27 = (v33 + v27);
                    if (v37 <= ++v26)
                    {
                      v4 = v27;
                      goto LABEL_21;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  if (dictionaryRepresentation)
  {
    CFRelease(dictionaryRepresentation);
  }

  if (v45)
  {
    CFRelease(v45);
  }

  if (v46)
  {
    CFRelease(v46);
  }

  if (v44)
  {
    CFRelease(v44);
  }

  return v4;
}

void figAssetExportSession_CategorizePresetsOnce(const __CFArray ***a1)
{
  if (qword_1EAF1A988 != -1)
  {
    OUTLINED_FUNCTION_64_14(a1, &qword_1EAF1A980);
  }

  v2 = qword_1EAF1A980;
  if (!qword_1EAF1A980)
  {
    return;
  }

  if (qword_1EAF1A9F8 != -1)
  {
    OUTLINED_FUNCTION_34_30(a1, &qword_1EAF1A9F0);
  }

  v3 = qword_1EAF1A9F0;
  if (!qword_1EAF1A9F0)
  {
    return;
  }

  Count = CFArrayGetCount(v2);
  range = CFArrayGetCount(v3);
  v5 = OUTLINED_FUNCTION_265();
  Mutable = CFArrayCreateMutable(v5, v6, v7);
  if (!Mutable)
  {
    return;
  }

  v8 = OUTLINED_FUNCTION_265();
  v50 = CFArrayCreateMutable(v8, v9, v10);
  if (!v50)
  {
    v45 = Mutable;
    goto LABEL_46;
  }

  v11 = OUTLINED_FUNCTION_265();
  v14 = CFArrayCreateMutable(v11, v12, v13);
  if (!v14)
  {
    v22 = 0;
    v26 = 0;
    v18 = 0;
LABEL_38:
    CFRelease(Mutable);
    CFRelease(v50);
    if (v14)
    {
      CFRelease(v14);
    }

    if (v18)
    {
      CFRelease(v18);
    }

    if (v22)
    {
      CFRelease(v22);
    }

    if (!v26)
    {
      return;
    }

    v45 = v26;
LABEL_46:

    CFRelease(v45);
    return;
  }

  v15 = OUTLINED_FUNCTION_265();
  v18 = CFArrayCreateMutable(v15, v16, v17);
  if (!v18)
  {
    v22 = 0;
    goto LABEL_37;
  }

  v19 = OUTLINED_FUNCTION_265();
  v22 = CFArrayCreateMutable(v19, v20, v21);
  if (!v22)
  {
LABEL_37:
    v26 = 0;
    goto LABEL_38;
  }

  v23 = OUTLINED_FUNCTION_265();
  v26 = CFArrayCreateMutable(v23, v24, v25);
  if (!v26)
  {
    goto LABEL_38;
  }

  v47 = v14;
  v48 = v18;
  theArray = v22;
  v27 = OUTLINED_FUNCTION_265();
  v30 = CFArrayCreateMutable(v27, v28, v29);
  if (!v30)
  {
    goto LABEL_38;
  }

  v31 = v30;
  v46 = v26;
  if (Count >= 1)
  {
    for (i = 0; Count != i; ++i)
    {
      ValueAtIndex = CFArrayGetValueAtIndex(v2, i);
      v34 = v3;
      v54.location = 0;
      v54.length = range;
      v35 = CFArrayContainsValue(v3, v54, ValueAtIndex);
      v36 = figAssetExportSession_IsAlphaPreset(ValueAtIndex);
      v37 = figAssetExportSession_IsStereoPreset(ValueAtIndex);
      if (v37)
      {
        if (v36)
        {
          goto LABEL_18;
        }
      }

      else
      {
        CFArrayAppendValue(Mutable, ValueAtIndex);
        if (v36)
        {
          goto LABEL_18;
        }
      }

      CFArrayAppendValue(v50, ValueAtIndex);
LABEL_18:
      if (v37 | v36)
      {
        if (!v35)
        {
          goto LABEL_31;
        }
      }

      else
      {
        CFArrayAppendValue(v47, ValueAtIndex);
        if (!v35)
        {
LABEL_31:
          CFArrayAppendValue(v48, ValueAtIndex);
        }
      }

      if (!(v37 | v35))
      {
        CFArrayAppendValue(theArray, ValueAtIndex);
      }

      v38 = v36 | v35;
      if (!v38)
      {
        CFArrayAppendValue(v46, ValueAtIndex);
      }

      v3 = v34;
      if (!(v38 | v37))
      {
        CFArrayAppendValue(v31, ValueAtIndex);
      }
    }
  }

  **a1 = v2;
  v55.length = CFArrayGetCount(Mutable);
  v55.location = 0;
  CFArraySortValues(Mutable, v55, figAssetExportSession_StringArrayNumericalComparatorFunction, 0);
  *a1[1] = Mutable;
  v39 = CFArrayGetCount(v50);
  OUTLINED_FUNCTION_15_59(v39);
  *a1[2] = v50;
  v40 = CFArrayGetCount(v47);
  OUTLINED_FUNCTION_15_59(v40);
  *a1[3] = v47;
  v41 = CFArrayGetCount(v48);
  OUTLINED_FUNCTION_15_59(v41);
  *a1[4] = v48;
  v42 = CFArrayGetCount(theArray);
  OUTLINED_FUNCTION_15_59(v42);
  *a1[5] = theArray;
  v43 = CFArrayGetCount(v46);
  OUTLINED_FUNCTION_15_59(v43);
  *a1[6] = v46;
  CFArrayGetCount(v31);
  v44 = OUTLINED_FUNCTION_60_7();
  CFArraySortValues(v44, v56, figAssetExportSession_StringArrayNumericalComparatorFunction, 0);
  *a1[7] = v31;
}

uint64_t FigAssetExportSessionCreateWithAsset_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionCreateWithAsset_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionCreateWithAsset_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionCreateWithAsset_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionCreateWithAsset_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionCreateWithAsset_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionVideoCompositionCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionVideoCompositionCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionVideoCompositionCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_maximumDuration_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_maximumDuration_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionEstimateMaximumDurationWithCompletionHandler_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionEstimateMaximumDurationWithCompletionHandler_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionEstimateMaximumDurationWithCompletionHandler_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigAssetExportSessionTaskCreate_cold_1(uint64_t a1, void *a2, const void *a3, _DWORD *a4)
{
  *a4 = FigSignalErrorAtGM();
  free(a2);

  CFRelease(a3);
}

uint64_t FigAssetExportSessionTaskCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionGetEstimatedOutputFileLength_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionGetEstimatedOutputFileLength_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionEstimateOutputFileLengthWithCompletionHandler_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionEstimateOutputFileLengthWithCompletionHandler_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAssetExportSessionEstimateOutputFileLengthWithCompletionHandler_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_7(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_8(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_9(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_10(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_11(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_12(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_13(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_14(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_15(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_CopyProperty_cold_16(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_releaseSegmentResources_cold_1(uint64_t a1, CFArrayRef *a2, uint64_t a3, uint64_t a4)
{
  v7 = 0;
  do
  {
    ValueAtIndex = CFArrayGetValueAtIndex(*a2, v7);
    v9 = *ValueAtIndex;
    v10 = OUTLINED_FUNCTION_262_1();
    figAssetExportSession_removeListeners(v10);
    if (_FigIsNotCurrentDispatchQueue())
    {
      FigReadWriteLockUnlockForWrite();
      OUTLINED_FUNCTION_35_26(*(a1 + 472));
      FigReadWriteLockLockForWrite();
    }

    if (*(a1 + 48) != 7 || ValueAtIndex[12] != 4)
    {
      FigFileDeleteFile();
    }

    result = FigRemakerGetFigBaseObject(v9);
    if (result)
    {
      v12 = result;
      VTable = CMBaseObjectGetVTable();
      v14 = *(VTable + 8);
      result = VTable + 8;
      v15 = *(v14 + 24);
      if (v15)
      {
        result = v15(v12);
      }
    }

    ++v7;
  }

  while (a4 != v7);
  return result;
}

void figAssetExportSession_releaseSegmentResources_cold_2(uint64_t *a1, uint64_t a2, uint64_t a3, CFTypeRef **a4)
{
  figAssetExportSession_removeListeners(*a1);
  if (_FigIsNotCurrentDispatchQueue())
  {
    OUTLINED_FUNCTION_35_26(*(a3 + 472));
  }

  v6 = *a4;
  if (*(a3 + 48) != 7 || *(v6 + 12) != 4)
  {
    FigFileDeleteFile();
    v6 = *a4;
  }

  FigBaseObject = FigRemakerGetFigBaseObject(*v6);
  if (FigBaseObject)
  {
    v8 = FigBaseObject;
    FigBaseObject = CMBaseObjectGetVTable();
    v9 = *(FigBaseObject + 8);
    LODWORD(FigBaseObject) = FigBaseObject + 8;
    v10 = *(v9 + 24);
    if (v10)
    {
      LODWORD(FigBaseObject) = v10(v8);
    }
  }

  FAES_RemakerConfigRelease(FigBaseObject, *a4);
  *a4 = 0;
}

uint64_t figAssetExportSession_ResolveIntermediateFakeTrackIDs_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_7(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_writeResumablePlistFile_cold_8(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_transitionToStatus_cold_1(uint64_t a1, uint64_t a2, CFTypeRef *a3, uint64_t a4)
{
  FigReadWriteLockUnlockForWrite();
  figAssetExportSession_updateProgress(a2);
  FigReadWriteLockLockForWrite();
  figAssetExportSession_removeListeners(*a3, a4);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v8 = *(DerivedStorage + 48);
  if (v8 == 6)
  {
    FigBaseObject = FigRemakerGetFigBaseObject(*(DerivedStorage + 40));
    v10 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (v10)
    {
      v11 = &kFigRemakerInvalidationReason_Cancelled;
      goto LABEL_7;
    }
  }

  else if (v8 == 7)
  {
    FigBaseObject = FigRemakerGetFigBaseObject(*(DerivedStorage + 40));
    v10 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (v10)
    {
      v11 = &kFigRemakerInvalidationReason_Paused;
LABEL_7:
      v10(FigBaseObject, @"Remaker_InvalidationReason", *v11);
    }
  }

  v12 = FigRemakerGetFigBaseObject(*a3);
  if (v12)
  {
    v13 = v12;
    v14 = *(*(CMBaseObjectGetVTable() + 8) + 24);
    if (v14)
    {
      v14(v13);
    }
  }

  if (*a3)
  {
    CFRelease(*a3);
    *a3 = 0;
  }

  return FigReadWriteLockUnlockForWrite();
}

uint64_t figAssetExportSesssion_setTrackMappings_cold_1(uint64_t a1, _DWORD *a2)
{
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t figAssetExportSession_createRemakerAndBeginExport_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_createRemakerAndBeginExport_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAssetExportSession_createRemakerAndBeginExport_cold_5(uint64_t a1, uint64_t a2, _BYTE *a3, _DWORD *a4)
{
  figAssetExportSession_addListeners(a1);
  started = FigRemakerStartOutput(a1);
  *a4 = started;
  if (!started)
  {
    return *a3 != 0;
  }

  FigSignalErrorAtGM();
  return 2;
}

uint64_t FigCPEOctaviaCreateNeroCryptor(uint64_t a1, uint64_t a2, const void *a3, uint64_t a4, void *a5, void *a6)
{
  v34 = *MEMORY[0x1E69E9840];
  *keys = 0u;
  v33 = 0u;
  *values = 0u;
  v31 = 0u;
  theSourceBuffer = 0;
  cf = 0;
  destination = 0;
  v29 = 0;
  v6 = 4294955146;
  if (!a1 || !a5)
  {
    goto LABEL_23;
  }

  keys[0] = @"ProtectionScheme";
  v12 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v12)
  {
    v6 = 4294954514;
    goto LABEL_23;
  }

  v13 = *MEMORY[0x1E695E480];
  v14 = v12(a1, *MEMORY[0x1E6961100], *MEMORY[0x1E695E480], values);
  if (v14)
  {
    v6 = v14;
    goto LABEL_23;
  }

  v15 = &values[1];
  if (!a2)
  {
    v19 = &keys[1];
    v18 = 1;
    if (!a3)
    {
      goto LABEL_11;
    }

    goto LABEL_10;
  }

  v25 = 0;
  FigCPEExternalProtectionMonitorGetSerializationToken(a2, &v25);
  keys[1] = @"OctaviaExternalProtectionMonitorSerializationToken";
  CFNumberFromRemoteObjectRef = FigTransportCreateCFNumberFromRemoteObjectRef();
  if (!CFNumberFromRemoteObjectRef)
  {
    v19 = &v33;
    v15 = &v31;
    v18 = 2;
    if (!a3)
    {
LABEL_11:
      v17 = CFDictionaryCreate(v13, keys, values, v18, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      if (v17)
      {
        SerializedAtomDataBlockBufferForCFType = FigRemote_CreateSerializedAtomDataBlockBufferForCFType();
        if (SerializedAtomDataBlockBufferForCFType || (FigTransportGetRemoteRootObject(), SerializedAtomDataBlockBufferForCFType = NeroTransportSendSyncMessageCreatingReply(), SerializedAtomDataBlockBufferForCFType) || (SerializedAtomDataBlockBufferForCFType = CMBlockBufferCopyDataBytes(theSourceBuffer, 0, 8uLL, &destination), SerializedAtomDataBlockBufferForCFType))
        {
          v6 = SerializedAtomDataBlockBufferForCFType;
        }

        else
        {
          v6 = CMBlockBufferCopyDataBytes(theSourceBuffer, 8uLL, 8uLL, &v29);
          if (!v6)
          {
            v21 = v29;
            *a5 = destination;
            *a6 = v21;
            destination = 0;
            v29 = 0;
          }
        }
      }

      else
      {
        v6 = 4294955145;
      }

      goto LABEL_17;
    }

LABEL_10:
    *v19 = @"SerializedState";
    *v15 = CFRetain(a3);
    ++v18;
    goto LABEL_11;
  }

  v6 = CFNumberFromRemoteObjectRef;
  v17 = 0;
  v18 = 1;
LABEL_17:
  v22 = v18 + 1;
  v23 = &values[v18 - 1];
  do
  {
    if (*v23)
    {
      CFRelease(*v23);
    }

    --v22;
    --v23;
  }

  while (v22 > 1);
  if (v17)
  {
    CFRelease(v17);
  }

LABEL_23:
  if (cf)
  {
    CFRelease(cf);
  }

  if (theSourceBuffer)
  {
    CFRelease(theSourceBuffer);
  }

  if (destination)
  {
    NeroTransportSendAsyncMessage();
  }

  return v6;
}

uint64_t FigOctaviaCPECryptorCopyProperty(uint64_t a1, const void *a2, uint64_t a3, void *a4)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_1_194();
  if (!*(v4 + 48))
  {
    if (CFEqual(a2, *MEMORY[0x1E6961098]))
    {
      v8 = 0;
      *a4 = *MEMORY[0x1E695E4C0];
      goto LABEL_6;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961118]))
    {
      SerializedAtomDataBlockBufferForCFType = FigRemote_CreateSerializedAtomDataBlockBufferForCFType();
      if (!SerializedAtomDataBlockBufferForCFType)
      {
        OUTLINED_FUNCTION_0_216();
        SerializedAtomDataBlockBufferForCFType = NeroTransportSendSyncMessageCreatingReply();
        if (!SerializedAtomDataBlockBufferForCFType)
        {
          SerializedAtomDataBlockBufferForCFType = FigRemote_CreateCFTypeFromSerializedAtomDataBlockBuffer();
        }
      }

      v8 = SerializedAtomDataBlockBufferForCFType;
      goto LABEL_6;
    }

    if (CFEqual(a2, *MEMORY[0x1E6961100]))
    {
      v11 = *(v4 + 24);
      if (!v11)
      {
LABEL_16:
        v8 = 0;
        *a4 = v11;
        goto LABEL_6;
      }
    }

    else
    {
      if (!CFEqual(a2, @"BC70EF27-5C84-4D7C-9C87-F8A091DFDC77"))
      {
        v8 = CMBaseObjectCopyProperty(*v4, a2, a3, a4);
        goto LABEL_6;
      }

      v11 = *(v4 + 32);
      if (!v11)
      {
        goto LABEL_16;
      }
    }

    v11 = CFRetain(v11);
    goto LABEL_16;
  }

  v8 = 4294954511;
LABEL_6:
  FigSimpleMutexUnlock();
  return v8;
}

uint64_t FigOctaviaCPECryptorSetProperty(uint64_t a1, const void *a2, const void *a3)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_1_194();
  if (*(v3 + 48))
  {
    v6 = 4294954511;
  }

  else if (CFEqual(a2, @"BC70EF27-5C84-4D7C-9C87-F8A091DFDC77"))
  {
    v7 = *(v3 + 32);
    *(v3 + 32) = a3;
    if (a3)
    {
      CFRetain(a3);
    }

    if (v7)
    {
      CFRelease(v7);
    }

    v6 = 0;
  }

  else if (CFEqual(a2, *MEMORY[0x1E69610F8]) || CFEqual(a2, *MEMORY[0x1E6961108]) || CFEqual(a2, *MEMORY[0x1E69610E0]) || CFEqual(a2, *MEMORY[0x1E6961088]) || CFEqual(a2, *MEMORY[0x1E6961118]))
  {
    SerializedAtomDataBlockBufferForKeyValuePair = FigRemote_CreateSerializedAtomDataBlockBufferForKeyValuePair();
    if (!SerializedAtomDataBlockBufferForKeyValuePair)
    {
      OUTLINED_FUNCTION_0_216();
      SerializedAtomDataBlockBufferForKeyValuePair = NeroTransportSendAsyncMessage();
    }

    v6 = SerializedAtomDataBlockBufferForKeyValuePair;
  }

  else
  {
    v6 = CMBaseObjectSetProperty(*v3, a2, a3);
  }

  FigSimpleMutexUnlock();
  return v6;
}

uint64_t FigOctaviaCPECryptorGetExternalProtectionMethods(uint64_t a1, _DWORD *a2)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_1_194();
  if (*(v2 + 48))
  {
    v4 = 4294954511;
  }

  else
  {
    v4 = 0;
    *a2 = 7;
  }

  FigSimpleMutexUnlock();
  return v4;
}

uint64_t FigOctaviaCPECryptorGetAggregateExternalProtectionStatus(uint64_t a1, uint64_t a2, uint64_t a3)
{
  CMBaseObjectGetDerivedStorage();
  if (!a3)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_1_194();
  if (*(v3 + 48))
  {
    v5 = 4294954511;
  }

  else
  {
    v6 = *v3;
    v7 = *(CMBaseObjectGetVTable() + 16);
    if (*v7 && (v8 = v7[9]) != 0)
    {
      v5 = v8(v6, a3);
    }

    else
    {
      v5 = 4294954514;
    }
  }

  FigSimpleMutexUnlock();
  return v5;
}

uint64_t FigOctaviaCPECryptorCreateKeyRequest(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  CMBaseObjectGetDerivedStorage();
  if (!a4)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_1_194();
  if (*(v4 + 48))
  {
    v6 = 4294954511;
  }

  else
  {
    SerializedAtomDataBlockBufferForCFType = FigRemote_CreateSerializedAtomDataBlockBufferForCFType();
    if (!SerializedAtomDataBlockBufferForCFType)
    {
      OUTLINED_FUNCTION_0_216();
      SerializedAtomDataBlockBufferForCFType = NeroTransportSendSyncMessageCreatingReply();
      if (!SerializedAtomDataBlockBufferForCFType)
      {
        SerializedAtomDataBlockBufferForCFType = FigRemote_CreateCFTypeFromSerializedAtomDataBlockBuffer();
      }
    }

    v6 = SerializedAtomDataBlockBufferForCFType;
  }

  FigSimpleMutexUnlock();
  return v6;
}

uint64_t FigOctaviaCPECryptorSetKeyRequestResponse(uint64_t a1, const void *a2, const void *a3)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_1_194();
  if (*(v3 + 48))
  {
    SerializedAtomDataBlockBufferForCFType = 4294954511;
  }

  else
  {
    Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 2, 0, 0);
    CFDictionaryAddValue(Mutable, @"KeyRequestResponse", a2);
    if (a3)
    {
      CFDictionaryAddValue(Mutable, @"KeyResponseOptions", a3);
    }

    SerializedAtomDataBlockBufferForCFType = FigRemote_CreateSerializedAtomDataBlockBufferForCFType();
    if (!SerializedAtomDataBlockBufferForCFType)
    {
      OUTLINED_FUNCTION_0_216();
      SerializedAtomDataBlockBufferForCFType = NeroTransportSendSyncMessageCreatingReply();
    }

    if (Mutable)
    {
      CFRelease(Mutable);
    }
  }

  FigSimpleMutexUnlock();
  return SerializedAtomDataBlockBufferForCFType;
}

uint64_t FigOctaviaCPECryptorGetSerializationToken(uint64_t a1, void *a2)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294955146;
  }

  OUTLINED_FUNCTION_1_194();
  if (*(v2 + 48))
  {
    v4 = 4294954511;
  }

  else
  {
    v4 = 0;
    *a2 = *(v2 + 16);
  }

  FigSimpleMutexUnlock();
  return v4;
}

uint64_t FigOctaviaCPECryptorTestAndSetKeyRequestState(uint64_t a1, uint64_t a2, uint64_t a3, BOOL *a4, void *a5)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (*(DerivedStorage + 48))
  {
    Mutable = 0;
    SInt32 = 0;
    v10 = 0;
    v11 = 4294954511;
    goto LABEL_10;
  }

  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  if (!Mutable)
  {
    SInt32 = 0;
    goto LABEL_22;
  }

  SInt32 = FigCFNumberCreateSInt32();
  if (!SInt32)
  {
LABEL_22:
    v10 = 0;
    goto LABEL_23;
  }

  v10 = FigCFNumberCreateSInt32();
  if (!v10)
  {
LABEL_23:
    v11 = 4294955145;
    goto LABEL_10;
  }

  CFArrayAppendValue(Mutable, SInt32);
  CFArrayAppendValue(Mutable, v10);
  SerializedAtomDataBlockBufferForCFType = FigRemote_CreateSerializedAtomDataBlockBufferForCFType();
  if (!SerializedAtomDataBlockBufferForCFType)
  {
    SerializedAtomDataBlockBufferForCFType = NeroTransportSendSyncMessageCreatingReply();
    if (!SerializedAtomDataBlockBufferForCFType)
    {
      SerializedAtomDataBlockBufferForCFType = FigRemote_CreateCFTypeFromSerializedAtomDataBlockBuffer();
    }
  }

  v11 = SerializedAtomDataBlockBufferForCFType;
LABEL_10:
  FigSimpleMutexUnlock();
  if (a4)
  {
    *a4 = *MEMORY[0x1E695E4D0] == 0;
  }

  if (a5)
  {
    *a5 = 0;
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (SInt32)
  {
    CFRelease(SInt32);
  }

  if (v10)
  {
    CFRelease(v10);
  }

  return v11;
}

uint64_t FigDataChannelGroupAddDataChannelWithFigTags(uint64_t a1, uint64_t a2, int a3)
{
  if (!a1 || !a2 || a3 <= 0 || (result = FigTagCollectionCreate(), !result))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t channelgroup_createFromDictionary(const __CFAllocator *a1, CFDictionaryRef theDict, void *a3)
{
  cf = 0;
  if (!theDict || !a3 || (v5 = CFDictionaryGetValue(theDict, @"ChannelList")) == 0)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
LABEL_21:
    v7 = FigSignalErrorAtGM();
    goto LABEL_22;
  }

  v6 = v5;
  v7 = dataChannelGroup_createDataChannelGroup(a1, &cf);
  if (v7)
  {
LABEL_22:
    v17 = v7;
    goto LABEL_14;
  }

  Count = CFArrayGetCount(v6);
  if (Count > 0)
  {
    v9 = Count;
    Mutable = CFArrayCreateMutable(a1, 0, MEMORY[0x1E695E9C0]);
    if (Mutable)
    {
      v11 = Mutable;
      v12 = 0;
      while (1)
      {
        value = 0;
        ValueAtIndex = CFArrayGetValueAtIndex(v6, v12);
        v14 = MEMORY[0x19A8D32E0](ValueAtIndex, a1, &value);
        if (v14)
        {
          break;
        }

        CFArrayAppendValue(v11, value);
        CFRelease(value);
        if (v9 == ++v12)
        {
          v15 = cf;
          v16 = *(cf + 2);
          v21.length = CFArrayGetCount(v11);
          v21.location = 0;
          CFArrayAppendArray(v16, v11, v21);
          goto LABEL_12;
        }
      }

      v17 = v14;
LABEL_13:
      CFRelease(v11);
      goto LABEL_14;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
    goto LABEL_21;
  }

  v11 = 0;
  v15 = cf;
LABEL_12:
  v17 = 0;
  *a3 = v15;
  cf = 0;
  if (v11)
  {
    goto LABEL_13;
  }

LABEL_14:
  if (cf)
  {
    CFRelease(cf);
  }

  return v17;
}

uint64_t FigDataChannelGroupCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void dataChannelGroup_createDataChannelGroup_cold_2(const void *a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a2 = FigSignalErrorAtGM();

  CFRelease(a1);
}

uint64_t dataChannelGroup_createDataChannelGroup_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupCreateFromDataChannelList_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupCreateFromDataChannelList_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupCreateForUseCase_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupCopyDataChannelList_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupCopyDataChannelList_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupCopyDataChannelList_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupGetCountOfDataChannels_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigDataChannelGroupAddDataChannel_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupAddDataChannel_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupGetDataChannelByIndex_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigDataChannelGroupGetDataChannelByIndex_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigDataChannelGroupGetFirstDataChannelWithTag_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigDataChannelGroupRemoveDataChannelByIndex_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupRemoveDataChannelByIndex_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t channelgroup_copyAsDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t channelgroup_copyAsDictionary_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t channelgroup_copyAsDictionary_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t channelgroup_copyAsDictionary_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t channelgroup_copyAsDictionary_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCopyAsDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCopyAsDictionary_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCopyAsDictionary_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCopyAsDictionary_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCreateFromDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCreateFromDictionary_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCreateFromDictionary_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCreateFromDictionary_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDataChannelGroupsArrayCreateFromDictionary_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigNetworkInterfaceReporterSamplePhysicalStatistics(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, int a5)
{
  v169 = *MEMORY[0x1E69E9840];
  theDict = 0;
  if (a1)
  {
    if (!a2)
    {
      if (!*(a1 + 328))
      {
        goto LABEL_34;
      }

      v18 = (a1 + 328);
      goto LABEL_19;
    }

    BOOLean = 0;
    v10 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (!v10 || v10(a2, @"FHRP_CFNetworkTimingData", *MEMORY[0x1E695E480], &theDict))
    {
      goto LABEL_34;
    }

    AllocatorForMedia = FigGetAllocatorForMedia();
    v12 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (v12 && !v12(a2, @"FHRP_IsExpensive", AllocatorForMedia, &BOOLean))
    {
      v13 = CFBooleanGetValue(BOOLean) == 0;
      if (!a3)
      {
        goto LABEL_182;
      }
    }

    else
    {
      v13 = 1;
      if (!a3)
      {
        goto LABEL_182;
      }
    }

    if (!a4)
    {
      goto LABEL_182;
    }

    v14 = theDict;
    if (!theDict)
    {
      goto LABEL_177;
    }

    buffer[0] = 0;
    LOBYTE(v167) = 0;
    Value = CFDictionaryGetValue(theDict, @"_kCFNTimingDataNetworkProtocolName");
    FigCFDictionaryGetBooleanIfPresent();
    BooleanIfPresent = FigCFDictionaryGetBooleanIfPresent();
    if (Value)
    {
      v17 = OUTLINED_FUNCTION_17_50(BooleanIfPresent, @"http/1.1");
      if (v17 == kCFCompareEqualTo)
      {
        if (buffer[0])
        {
          if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
          {
            goto LABEL_56;
          }
        }

        else if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
        {
          goto LABEL_56;
        }

        goto LABEL_55;
      }

      if (OUTLINED_FUNCTION_17_50(v17, @"h2") == kCFCompareEqualTo)
      {
        if (buffer[0])
        {
          if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
          {
            goto LABEL_56;
          }
        }

        else if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
        {
          goto LABEL_56;
        }

LABEL_55:
        v27 = OUTLINED_FUNCTION_177();
        v28(v27);
LABEL_56:
        v162 = 0.0;
        *buffer = 0.0;
        *&v167 = 0;
        if (FigCFDictionaryGetDoubleIfPresent() && *buffer > 0.0 && FigCFDictionaryGetDoubleIfPresent() && *&v167 > 0.0 && FigCFDictionaryGetDoubleIfPresent() && v162 > 0.0 && v162 > *buffer && *&v167 > *buffer)
        {
          if (*(*(CMBaseObjectGetVTable() + 16) + 32))
          {
            v30 = OUTLINED_FUNCTION_177();
            v31(v30);
          }

          if (!v13 && *(*(CMBaseObjectGetVTable() + 16) + 32))
          {
            v32 = OUTLINED_FUNCTION_177();
            v33(v32);
          }

          if (!*(a1 + 312))
          {
            *(a1 + 312) = (*buffer * -1000.0 + *&v167 * 1000.0);
            if (*(*(CMBaseObjectGetVTable() + 16) + 56))
            {
              v102 = OUTLINED_FUNCTION_177();
              v103(v102);
            }
          }

          if (a5 && *(*(CMBaseObjectGetVTable() + 16) + 56))
          {
            v34 = OUTLINED_FUNCTION_177();
            v35(v34);
          }
        }

        v36 = CFDictionaryGetValue(v14, @"_kCFNTimingDataNetworkProtocolName");
        if (!v36)
        {
          goto LABEL_177;
        }

        v37 = v36;
        v38 = FigCFDictionaryGetValue();
        if (v38)
        {
          v39 = v38;
          LODWORD(v162) = 0;
          FigSimpleMutexLock();
          Int32IfPresent = FigCFDictionaryGetInt32IfPresent();
          FigSimpleMutexUnlock();
          if (!Int32IfPresent)
          {
            v41 = socket(2, 2, 0);
            if ((v41 & 0x80000000) == 0)
            {
              v42 = v41;
              v167 = 0u;
              v168 = 0u;
              if (CFStringGetCString(v39, buffer, 256, 0x8000100u))
              {
                __strlcpy_chk();
                if ((ioctl(v42, 0xC02069ADuLL, &v167) & 0x80000000) == 0)
                {
                  LODWORD(v162) = v168;
                }

                close(v42);
                FigSimpleMutexLock();
                FigCFDictionarySetInt32();
                FigSimpleMutexUnlock();
              }
            }
          }

          v43 = LODWORD(v162);
          VTable = CMBaseObjectGetVTable();
          v45 = *(VTable + 16);
          v38 = VTable + 16;
          if (*(v45 + 96))
          {
            v46 = OUTLINED_FUNCTION_177();
            v38 = v47(v46);
          }

          if (v43 == 3)
          {
            if (*(a1 + 320))
            {
              v48 = CMBaseObjectGetVTable();
              v49 = *(v48 + 16);
              v38 = v48 + 16;
              if (*(v49 + 48))
              {
                v50 = OUTLINED_FUNCTION_177();
                v38 = v51(v50);
              }
            }
          }

          v52 = *(a1 + 152);
          if (v52)
          {
            if (v52 != v43)
            {
              v53 = CMBaseObjectGetVTable();
              v54 = *(v53 + 16);
              v38 = v53 + 16;
              if (*(v54 + 32))
              {
                v55 = OUTLINED_FUNCTION_177();
                v38 = v56(v55);
              }
            }
          }

          if (v43)
          {
            *(a1 + 152) = v43;
          }
        }

        v57 = OUTLINED_FUNCTION_17_50(v38, @"http/1.1");
        if (v57 && OUTLINED_FUNCTION_17_50(v57, @"h2"))
        {
          if (CFStringHasPrefix(v37, @"h3"))
          {
            *buffer = 0;
            if (CFDictionaryGetValue(v14, @"_kCFNTimingDataConnectionStartTimeCounts"))
            {
              if (CFDictionaryGetValue(v14, @"_kCFNTimingDataConnectionStopTimeCounts") && CFDictionaryGetValue(v14, @"_kCFNTimingDataConnectionUUID"))
              {
                FigCFDictionaryGetIntIfPresent();
                v58 = CMBaseObjectGetVTable();
                v63 = *(v58 + 16);
                v62 = v58 + 16;
                if (*(v63 + 40))
                {
                  v64 = OUTLINED_FUNCTION_177();
                  v62 = v65(v64);
                }

                v66 = OUTLINED_FUNCTION_6_123(v62, v59, @"_kCFNTimingDataQConnStatsBytesReceived", v60, v61, 0x1F0B65E98);
                v70 = OUTLINED_FUNCTION_6_123(v66, v67, @"_kCFNTimingDataQConnPacketsReordered", v68, v69, 0x1F0B65EB8);
                OUTLINED_FUNCTION_6_123(v70, v71, @"_kCFNTimingDataQConnStatsPacketsReceived", v72, v73, 0x1F0B65ED8);
                if (a5)
                {
                  v74 = CMBaseObjectGetVTable();
                  v79 = *(v74 + 16);
                  v78 = v74 + 16;
                  if (*(v79 + 56))
                  {
                    v80 = OUTLINED_FUNCTION_177();
                    v78 = v81(v80);
                  }

                  v82 = OUTLINED_FUNCTION_6_123(v78, v75, @"_kCFNTimingDataQConnStatsBytesReceived", v76, v77, 0x1F0B65F18);
                  OUTLINED_FUNCTION_6_123(v82, v83, @"_kCFNTimingDataQConnStatsStreamBytesReceived", v84, v85, 0x1F0B65F38);
                }
              }
            }
          }

          goto LABEL_177;
        }

        v86 = CFDictionaryGetValue(v14, @"_kCFNTimingDataTCPInfoAtStart");
        if (v86)
        {
          v87 = v86;
          v88 = CFDictionaryGetValue(v14, @"_kCFNTimingDataTCPInfoAtStop");
          if (v88)
          {
            v89 = v88;
            v90 = CFDictionaryGetValue(v14, @"_kCFNTimingDataConnectionInterfaceIdentifier");
            if (v90)
            {
              v91 = v90;
              if (CFDictionaryGetValue(v14, @"_kCFNTimingDataConnectionUUID"))
              {
                v92 = CFDictionaryGetValue(v87, v91);
                if (v92)
                {
                  v93 = v92;
                  v94 = CFDictionaryGetValue(v89, v91);
                  if (v94)
                  {
                    v95 = v94;
                    BytePtr = CFDataGetBytePtr(v93);
                    if (BytePtr)
                    {
                      v97 = BytePtr;
                      v98 = CFDataGetBytePtr(v95);
                      if (v98)
                      {
                        v99 = v98;
                        if (*(v97 + 70) == *(v98 + 70))
                        {
                          v100 = v98[1];
                          if ((v100 & 8) != 0)
                          {
                            v101 = 2;
                          }

                          else
                          {
                            v101 = ((*(v98 + 61) >> 15) & 1) == 0;
                          }

                          *(a1 + 8) = v101;
                          *(a1 + 12) = (v100 >> 1) & 1;
                          v164 = 0;
                          v165 = 0;
                          v166 = 0;
                          v104 = CFDictionaryGetValue(v14, @"_kCFNTimingDataTCPInfoAtStart");
                          if (v104)
                          {
                            v105 = *&v104;
                            v106 = CFDictionaryGetValue(v14, @"_kCFNTimingDataTCPInfoAtStop");
                            if (v106)
                            {
                              *buffer = v105;
                              CFDictionaryApplyFunction(v106, figNetworkInterfaceTCPInfoGetByteCountsForEachInterface, buffer);
                            }
                          }

                          v159 = *(a1 + 152);
                          if (*(*(CMBaseObjectGetVTable() + 16) + 56))
                          {
                            v107 = OUTLINED_FUNCTION_177();
                            v108(v107);
                          }

                          if ((v99[246] & 2) != 0)
                          {
                            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
                            {
                              v122 = OUTLINED_FUNCTION_177();
                              v123(v122);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
                            {
                              v124 = OUTLINED_FUNCTION_177();
                              v125(v124);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                            {
                              v126 = OUTLINED_FUNCTION_177();
                              v127(v126);
                            }

                            if (*(*(OUTLINED_FUNCTION_9_84() + 16) + 32))
                            {
                              v128 = OUTLINED_FUNCTION_177();
                              v129(v128);
                            }

                            if (*(*(OUTLINED_FUNCTION_7_106() + 16) + 32))
                            {
                              v130 = OUTLINED_FUNCTION_177();
                              v131(v130);
                            }

                            if (*(*(OUTLINED_FUNCTION_10_79() + 16) + 32))
                            {
                              v132 = OUTLINED_FUNCTION_177();
                              v133(v132);
                            }

                            v121 = a5;
                            if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                            {
                              v134 = OUTLINED_FUNCTION_177();
                              v135(v134);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                            {
                              v136 = OUTLINED_FUNCTION_177();
                              v137(v136);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                            {
                              goto LABEL_158;
                            }
                          }

                          else
                          {
                            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
                            {
                              v109 = OUTLINED_FUNCTION_177();
                              v110(v109);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
                            {
                              v111 = OUTLINED_FUNCTION_177();
                              v112(v111);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                            {
                              v113 = OUTLINED_FUNCTION_177();
                              v114(v113);
                            }

                            if (*(*(OUTLINED_FUNCTION_9_84() + 16) + 32))
                            {
                              v115 = OUTLINED_FUNCTION_177();
                              v116(v115);
                            }

                            if (*(*(OUTLINED_FUNCTION_7_106() + 16) + 32))
                            {
                              v117 = OUTLINED_FUNCTION_177();
                              v118(v117);
                            }

                            if (*(*(OUTLINED_FUNCTION_10_79() + 16) + 32))
                            {
                              v119 = OUTLINED_FUNCTION_177();
                              v120(v119);
                            }

                            v121 = a5;
                            if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                            {
LABEL_158:
                              v138 = OUTLINED_FUNCTION_177();
                              v139(v138);
                            }
                          }

                          if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                          {
                            v140 = OUTLINED_FUNCTION_177();
                            v141(v140);
                          }

                          if (*(*(CMBaseObjectGetVTable() + 16) + 32))
                          {
                            v142 = OUTLINED_FUNCTION_177();
                            v143(v142);
                          }

                          if (v159 == 4)
                          {
                            if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
                            {
                              goto LABEL_168;
                            }
                          }

                          else if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
                          {
                            goto LABEL_168;
                          }

                          v144 = OUTLINED_FUNCTION_177();
                          v145(v144);
LABEL_168:
                          if (v121)
                          {
                            if (*(*(CMBaseObjectGetVTable() + 16) + 56))
                            {
                              v146 = OUTLINED_FUNCTION_177();
                              v147(v146);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 56))
                            {
                              v148 = OUTLINED_FUNCTION_177();
                              v149(v148);
                            }

                            if (*(*(CMBaseObjectGetVTable() + 16) + 56))
                            {
                              v150 = OUTLINED_FUNCTION_177();
                              v151(v150);
                            }

                            if (*(*(OUTLINED_FUNCTION_9_84() + 16) + 56))
                            {
                              v152 = OUTLINED_FUNCTION_177();
                              v153(v152);
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }

LABEL_177:
        if (*(a1 + 320))
        {
          if (*(*(CMBaseObjectGetVTable() + 16) + 56))
          {
            v154 = OUTLINED_FUNCTION_177();
            v155(v154);
          }

          if (*(*(CMBaseObjectGetVTable() + 16) + 56))
          {
            v156 = OUTLINED_FUNCTION_177();
            v157(v156);
          }
        }

LABEL_182:
        if (!*(a1 + 328))
        {
          goto LABEL_34;
        }

        v158 = *(a1 + 152);
        v18 = (a1 + 328);
        if (v158)
        {
          if (*a1)
          {
            if (*a1 != v158)
            {
              *(a1 + 4) = 1;
            }

            if ((v158 - 3) <= 1)
            {
              goto LABEL_194;
            }
          }

          else
          {
            *a1 = v158;
            if ((v158 - 5) > 0xFFFFFFFD)
            {
LABEL_194:
              if (!*(a1 + 320))
              {
                *(a1 + 320) = figNetworkInterfaceRetainGlobalWifiMonitor();
              }

              goto LABEL_19;
            }

            if (*(a1 + 320))
            {
              if (qword_1ED4CBBE0)
              {
                dispatch_sync(qword_1ED4CBBA8, &__block_literal_global_125_0);
              }

              *(a1 + 320) = 0;
            }
          }
        }

LABEL_19:
        v19 = *(a1 + 320);
        if (v19)
        {
          v20 = *(v19 + 40);
          if (v20 != -1.0)
          {
            v21 = v20;
            v22 = *v18;
            if (!*v18)
            {
LABEL_30:
              if (a3 && a4 && *(*(CMBaseObjectGetVTable() + 16) + 40))
              {
                v25 = OUTLINED_FUNCTION_177();
                v26(v25);
              }

              goto LABEL_34;
            }

            v23 = *(v22 + 32);
            if (v23)
            {
              if (*v22 > v21)
              {
                *v22 = v21;
              }

              v24 = (v22 + 8);
              if (*(v22 + 8) >= v21)
              {
                goto LABEL_29;
              }
            }

            else
            {
              *v22 = v21;
              v24 = (v22 + 8);
            }

            *v24 = v21;
LABEL_29:
            *(v22 + 16) = *(v22 + 16) + v21;
            *(v22 + 24) = v21;
            *(v22 + 32) = v23 + 1;
            goto LABEL_30;
          }
        }

LABEL_34:
        if (theDict)
        {
          CFRelease(theDict);
        }

        return;
      }

      if (CFStringHasPrefix(Value, @"h3"))
      {
        if (buffer[0])
        {
          if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
          {
            goto LABEL_56;
          }
        }

        else if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
        {
          goto LABEL_56;
        }

        goto LABEL_55;
      }
    }

    if (buffer[0])
    {
      if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
      {
        goto LABEL_56;
      }
    }

    else if (!*(*(CMBaseObjectGetVTable() + 16) + 32))
    {
      goto LABEL_56;
    }

    goto LABEL_55;
  }
}

void FigAccessLogUpdateWithPhysicalStatistcs(int a1, uint64_t a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  if (a2)
  {
    v8 = OUTLINED_FUNCTION_16_56(a1, @"rssi", a3, a4, a5, a6, a7, a8, v36, 0);
    if (v8)
    {
      OUTLINED_FUNCTION_15_60(v8, @"c-rssi", v9, v10, v11, v12, v13, v14, v37, value);
    }

    v15 = OUTLINED_FUNCTION_16_56(v8, @"rsmn", v9, v10, v11, v12, v13, v14, v37, value);
    if (v15)
    {
      OUTLINED_FUNCTION_15_60(v15, @"c-rssi-min", v16, v17, v18, v19, v20, v21, v38, valuea);
    }

    v22 = OUTLINED_FUNCTION_16_56(v15, @"rsmx", v16, v17, v18, v19, v20, v21, v38, valuea);
    if (v22)
    {
      OUTLINED_FUNCTION_15_60(v22, @"c-rssi-max", v23, v24, v25, v26, v27, v28, v39, valueb);
    }

    v29 = OUTLINED_FUNCTION_16_56(v22, @"rsav", v23, v24, v25, v26, v27, v28, v39, valueb);
    if (v29)
    {
      OUTLINED_FUNCTION_15_60(v29, @"c-rssi-avg", v30, v31, v32, v33, v34, v35, v40, valuec);
    }
  }
}

void FigReportingAgentUpdateFinalTransactionMetrics(uint64_t a1, uint64_t a2, _BOOL4 a3, int a4)
{
  v47 = 0;
  v46 = 0;
  obj = 0;
  report = 0;
  v42 = 0;
  v43 = 0;
  v40 = 0;
  v41 = 0;
  v38 = 0;
  v39 = 0;
  v37 = 0;
  v36 = 0;
  if (a1)
  {
    if (a2)
    {
      v8 = *(*(CMBaseObjectGetVTable() + 16) + 40);
      if (v8)
      {
        if (!v8(a2, &v43, &v42, 0, &v41, &v40, &v39, &v38, &v37, &v36, &v46, &report, &obj))
        {
          if (a4 == 1)
          {
            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
            {
              v9 = OUTLINED_FUNCTION_3_162();
              v10(v9);
            }

            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
            {
              v11 = OUTLINED_FUNCTION_3_162();
              v12(v11);
            }

            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
            {
              v13 = OUTLINED_FUNCTION_3_162();
              v14(v13);
            }

            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
            {
              v15 = OUTLINED_FUNCTION_3_162();
              v16(v15);
            }

            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
            {
              v17 = OUTLINED_FUNCTION_3_162();
              v18(v17);
            }

            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
            {
              v19 = OUTLINED_FUNCTION_3_162();
              v20(v19);
            }

            v21 = *(*(CMBaseObjectGetVTable() + 16) + 40);
            if (v21)
            {
              v21(a1, 0x1F0B645B8, 0x1F0B671D8, 0);
            }

            if (*(*(CMBaseObjectGetVTable() + 16) + 40))
            {
              v22 = OUTLINED_FUNCTION_3_162();
              v23(v22);
            }
          }

          if (!a3)
          {
            v24 = *(*(CMBaseObjectGetVTable() + 8) + 48);
            if (v24)
            {
              a3 = v24(a2, @"FHRP_ErrorReturned", *MEMORY[0x1E695E480], &v47) == 0;
            }

            else
            {
              a3 = 0;
            }
          }

          figReportingAgentUpdatePrivacyStance(a1, v46, a3);
          v25 = report;
          if (report)
          {
            path_count = nw_data_transfer_report_get_path_count(report);
            if (path_count)
            {
              v27 = path_count;
              for (i = 0; i != v27; ++i)
              {
                path_radio_type = nw_data_transfer_report_get_path_radio_type(v25, i);
                received_application_byte_count = nw_data_transfer_report_get_received_application_byte_count(v25, i);
                switch(path_radio_type)
                {
                  case nw_interface_radio_type_cell_lte:
                    v31 = kFigReportingEventKey_PerRATRxBytes_4G;
                    break;
                  case nw_interface_radio_type_cell_endc_sub6:
                    v31 = kFigReportingEventKey_PerRATRxBytes_5G_NSA_FR1;
                    break;
                  case nw_interface_radio_type_cell_endc_mmw:
                    v31 = kFigReportingEventKey_PerRATRxBytes_5G_NSA_FR2;
                    break;
                  case nw_interface_radio_type_cell_nr_sa_sub6:
                    v31 = kFigReportingEventKey_PerRATRxBytes_5G_SA_FR1;
                    break;
                  case nw_interface_radio_type_cell_nr_sa_mmw:
                    v31 = kFigReportingEventKey_PerRATRxBytes_5G_SA_FR2;
                    break;
                  case nw_interface_radio_type_cell_wcdma:
                  case nw_interface_radio_type_cell_evdo:
                    v31 = kFigReportingEventKey_PerRATRxBytes_3G;
                    break;
                  case nw_interface_radio_type_cell_gsm:
                  case nw_interface_radio_type_cell_cdma:
                    v31 = kFigReportingEventKey_PerRATRxBytes_LegacyCell;
                    break;
                  default:
                    if (path_radio_type - 1 >= 6)
                    {
                      v31 = kFigReportingEventKey_PerRATRxBytes_Other;
                    }

                    else
                    {
                      v31 = kFigReportingEventKey_PerRATRxBytes_Wifi;
                    }

                    break;
                }

                v32 = *v31;
                if (*v31)
                {
                  v33 = *(*(CMBaseObjectGetVTable() + 16) + 32);
                  if (v33)
                  {
                    v33(a1, @"playerStats", v32, received_application_byte_count);
                  }
                }
              }
            }
          }

          if (obj)
          {
            v48 = 0;
            nw_establishment_report_get_accurate_ecn_state();
            if (HIDWORD(v48) <= 9)
            {
              v34 = *off_1E74984F8[HIDWORD(v48)];
              if (v34)
              {
                v35 = *(*(CMBaseObjectGetVTable() + 16) + 32);
                if (v35)
                {
                  v35(a1, @"playerStats", v34, 1);
                }
              }
            }
          }
        }
      }
    }
  }

  if (v47)
  {
    CFRelease(v47);
  }

  if (report)
  {
    nw_release(report);
  }

  if (obj)
  {
    nw_release(obj);
  }
}

uint64_t figReportingAgentUpdatePrivacyStance(uint64_t result, unsigned int a2, int a3)
{
  if (a2 <= 4)
  {
    v3 = &off_1E7498548[a2];
    if (!a3)
    {
      v3 = &off_1E7498570[a2];
    }

    v4 = **v3;
    if (v4)
    {
      v5 = result;
      if (result)
      {
        VTable = CMBaseObjectGetVTable();
        v7 = *(VTable + 16);
        result = VTable + 16;
        v8 = *(v7 + 32);
        if (v8)
        {

          return v8(v5, @"playerStats", v4, 1);
        }
      }
    }
  }

  return result;
}

uint64_t FigReportingAgentUpdateFinalReportFromCustomURLResponse(uint64_t result, CFDictionaryRef theDict, int a3)
{
  value = 0;
  if (theDict)
  {
    v4 = result;
    result = CFDictionaryGetValueIfPresent(theDict, *MEMORY[0x1E69615F0], &value);
    if (result)
    {
      SInt64 = FigCFNumberGetSInt64();
      return figReportingAgentUpdatePrivacyStance(v4, SInt64, a3);
    }
  }

  return result;
}

__CFDictionary *FigNetworkInterfaceReporterCopyPhysicalStatistics(uint64_t a1)
{
  if (!a1 || !*(a1 + 328))
  {
    return 0;
  }

  Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 4, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (Mutable)
  {
    if (*(a1 + 320))
    {
      OUTLINED_FUNCTION_2_49();
      OUTLINED_FUNCTION_43_7();
      v24 = __FigNetworkInterfaceReporterCopyPhysicalStatistics_block_invoke;
      v25 = &__block_descriptor_48_e5_v8__0l;
      v26 = a1;
      v27 = Mutable;
      dispatch_sync(v3, block);
    }

    v4 = *(a1 + 328);
    if (v4)
    {
      v5 = OUTLINED_FUNCTION_13_60();
      v8 = CFNumberCreate(v5, v6, v7);
      v9 = OUTLINED_FUNCTION_13_60();
      v11 = CFNumberCreate(v9, v10, v4);
      v12 = OUTLINED_FUNCTION_13_60();
      v15 = CFNumberCreate(v12, v13, v14);
      v16 = *(v4 + 32);
      if (v16)
      {
        v17 = *(v4 + 16) / v16;
      }

      else
      {
        v17 = 0.0;
      }

      v28 = v17;
      v18 = OUTLINED_FUNCTION_13_60();
      v21 = CFNumberCreate(v18, v19, v20);
      if (v8)
      {
        CFDictionarySetValue(Mutable, @"rssi", v8);
      }

      if (v11)
      {
        CFDictionarySetValue(Mutable, @"rsmn", v11);
      }

      if (v15)
      {
        CFDictionarySetValue(Mutable, @"rsmx", v15);
      }

      if (v21)
      {
        CFDictionarySetValue(Mutable, @"rsav", v21);
      }

      if (v8)
      {
        CFRelease(v8);
      }

      if (v11)
      {
        CFRelease(v11);
      }

      if (v15)
      {
        CFRelease(v15);
      }

      if (v21)
      {
        CFRelease(v21);
      }
    }
  }

  return Mutable;
}

CFMutableDictionaryRef FigNetworkInterfaceReporterCopyBandwidthEstimates(uint64_t a1)
{
  Mutable = 0;
  if (a1 && (_MergedGlobals_141 & 1) == 0)
  {
    v3 = *a1 > 4u || ((1 << *a1) & 0x19) == 0;
    if (!v3 && (*(a1 + 320) || (v4 = figNetworkInterfaceRetainGlobalWifiMonitor(), (*(a1 + 320) = v4) != 0)))
    {
      Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      if (Mutable)
      {
        FigCFDictionarySetInt64();
        FigCFDictionarySetInt64();
      }
    }

    else
    {
      return 0;
    }
  }

  return Mutable;
}

uint64_t figNetworkInterfaceRetainGlobalWifiMonitor()
{
  v10 = 0;
  v11 = &v10;
  v12 = 0x2020000000;
  v13 = 0;
  if (qword_1ED4CBBD8 != -1)
  {
    OUTLINED_FUNCTION_11_75();
    dispatch_once_f(v3, v4, v5);
  }

  if (qword_1ED4CBBA8 && qword_1ED4CBBC0)
  {
    OUTLINED_FUNCTION_2_49();
    OUTLINED_FUNCTION_43_7();
    v7 = __figNetworkInterfaceRetainGlobalWifiMonitor_block_invoke;
    v8 = &unk_1E7486A28;
    v9 = &v10;
    dispatch_sync(v0, block);
  }

  v1 = v11[3];
  _Block_object_dispose(&v10, 8);
  return v1;
}

uint64_t FigNetworkInterfaceReporterReportStreamingActivity(const __CFDictionary *a1)
{
  v15 = 0;
  value = 0;
  v13 = 0;
  v14 = 0;
  v11 = 0;
  v12 = 0;
  v10 = 0;
  if (!a1 || (_MergedGlobals_141 & 1) != 0)
  {
    return 0;
  }

  figNetworkMonitorInterfaceIRATEnsureService();
  if (qword_1ED4CBBA8)
  {
    FigCFDictionaryGetInt64IfPresent();
    FigCFDictionaryGetBooleanIfPresent();
    FigCFDictionaryGetInt64IfPresent();
    FigCFDictionaryGetInt64IfPresent();
    FigCFDictionaryGetInt64IfPresent();
    FigCFDictionaryGetInt64IfPresent();
    CFDictionaryGetValueIfPresent(a1, @"_CMSessID", &value);
    if (value)
    {
      CFRetain(a1);
      OUTLINED_FUNCTION_2_49();
      OUTLINED_FUNCTION_43_7();
      v5 = __FigNetworkInterfaceReporterReportStreamingActivity_block_invoke;
      v6 = &__block_descriptor_49_e5_v8__0l;
      v9 = v10;
      v7 = value;
      v8 = a1;
      dispatch_async(v2, block);
    }

    return 0;
  }

  return FigSignalErrorAtGM();
}

void __FigNetworkInterfaceReporterReportStreamingActivity_block_invoke(uint64_t a1)
{
  v9 = *MEMORY[0x1E69E9840];
  if (CFStringGetCString(*(a1 + 32), buffer, 256, 0x8000100u))
  {
    if (qword_1ED4CBBB0)
    {
      IRATStatusUpdateMessageApplicationEntry = figNetworkMonitorInterfaceCreateIRATStatusUpdateMessageApplicationEntry();
      if (IRATStatusUpdateMessageApplicationEntry)
      {
        v3 = IRATStatusUpdateMessageApplicationEntry;
        xpc_dictionary_set_uint64(IRATStatusUpdateMessageApplicationEntry, "kWRMVideoStreamingStarted", *(a1 + 48) != 0);
        if (*(a1 + 48))
        {
          v4 = dword_1ED4CBBA4 + 1;
        }

        else
        {
          v4 = dword_1ED4CBBA4 - 1;
        }

        dword_1ED4CBBA4 = v4;
        IRATStatusUpdateMessage = figNetworkMonitorInterfaceCreateIRATStatusUpdateMessage(v3);
        if (IRATStatusUpdateMessage)
        {
          v6 = IRATStatusUpdateMessage;
          xpc_connection_send_message(qword_1ED4CBBB0, IRATStatusUpdateMessage);
          xpc_release(v6);
        }

        xpc_release(v3);
      }
    }
  }

  v7 = *(a1 + 40);
  if (v7)
  {
    CFRelease(v7);
  }
}

xpc_object_t figNetworkMonitorInterfaceCreateIRATStatusUpdateMessageApplicationEntry()
{
  v0 = OUTLINED_FUNCTION_5_137();
  v1 = v0;
  if (v0)
  {
    xpc_dictionary_set_uint64(v0, "kWRMApplicationType", 0xC8uLL);
  }

  return v1;
}

void *figNetworkMonitorInterfaceCreateIRATStatusUpdateMessage(void *a1)
{
  v2 = xpc_array_create(0, 0);
  if (!v2)
  {
    return 0;
  }

  v3 = v2;
  xpc_array_append_value(v2, a1);
  v4 = OUTLINED_FUNCTION_5_137();
  if (v4)
  {
    v5 = v4;
    xpc_dictionary_set_value(v4, "kWRMApplicationTypeList", v3);
    v6 = OUTLINED_FUNCTION_5_137();
    v7 = v6;
    if (v6)
    {
      xpc_dictionary_set_uint64(v6, "kMessageId", 0x195uLL);
      xpc_dictionary_set_value(v7, "kMessageArgs", v5);
    }

    xpc_release(v3);
  }

  else
  {
    v7 = 0;
    v5 = v3;
  }

  xpc_release(v5);
  return v7;
}

uint64_t FigNetworkInterfaceReporterReportEstimatedMaximumDemand(const void *a1)
{
  if (_MergedGlobals_141)
  {
    return 0;
  }

  figNetworkMonitorInterfaceIRATEnsureService();
  if (qword_1ED4CBBA8)
  {
    if (a1)
    {
      CFRetain(a1);
    }

    OUTLINED_FUNCTION_0_52();
    OUTLINED_FUNCTION_8_90(v2, v3, v4, v5, v6, v7, v8, v9, v11, 3221225472, v12, v13, v14, v15);
    return 0;
  }

  return FigSignalErrorAtGM();
}

void __FigNetworkInterfaceReporterReportEstimatedMaximumDemand_block_invoke(uint64_t a1)
{
  v2 = *(a1 + 32);
  if (v2 >> 10 <= 1)
  {
    v3 = 1;
  }

  else
  {
    v3 = v2 >> 10;
  }

  if (v2 <= 0)
  {
    v4 = v2 >> 10;
  }

  else
  {
    v4 = v3;
  }

  if (qword_1ED4CBBB0)
  {
    IRATStatusUpdateMessageApplicationEntry = figNetworkMonitorInterfaceCreateIRATStatusUpdateMessageApplicationEntry();
    if (IRATStatusUpdateMessageApplicationEntry)
    {
      v6 = IRATStatusUpdateMessageApplicationEntry;
      xpc_dictionary_set_uint64(IRATStatusUpdateMessageApplicationEntry, "kMaxElgBrate", v4);
      if (!*(a1 + 40) || !FigXPCMessageSetCFString())
      {
        v7 = xpc_array_create(0, 0);
        if (v7)
        {
          v8 = v7;
          xpc_array_append_value(v7, v6);
          v9 = OUTLINED_FUNCTION_5_137();
          if (v9)
          {
            v10 = v9;
            xpc_dictionary_set_value(v9, "kWRMApplicationTypeList", v8);
            v11 = OUTLINED_FUNCTION_5_137();
            if (v11)
            {
              v12 = v11;
              xpc_dictionary_set_uint64(v11, "kMessageId", 0x1A2uLL);
              xpc_dictionary_set_value(v12, "kMessageArgs", v10);
              xpc_release(v8);
              xpc_release(v10);
              xpc_connection_send_message(qword_1ED4CBBB0, v12);
              v10 = v12;
            }

            else
            {
              xpc_release(v8);
            }
          }

          else
          {
            v10 = v8;
          }

          xpc_release(v10);
        }
      }

      xpc_release(v6);
    }
  }

  v13 = *(a1 + 40);
  if (v13)
  {

    CFRelease(v13);
  }
}

_BYTE *FigNetworkInterfaceReporterGetInterfaceType(_BYTE *result)
{
  if (result)
  {
    if (result[4])
    {
      return 0;
    }

    else
    {
      return *result;
    }
  }

  return result;
}

double FigNetworkInterfaceResetStatistics(uint64_t a1)
{
  if (a1)
  {
    *(a1 + 4) = 0;
    *a1 = 0;
    bzero((a1 + 8), 0x98uLL);
    v3 = *(a1 + 328);
    if (v3)
    {
      *(v3 + 32) = 0;
      result = 0.0;
      *v3 = 0u;
      *(v3 + 16) = 0u;
    }
  }

  return result;
}

void FigNetworkInterfaceReporterDestroy(void *a1)
{
  if (a1)
  {
    if (a1[40])
    {
      if (qword_1ED4CBBE0)
      {
        dispatch_sync(qword_1ED4CBBA8, &__block_literal_global_125_0);
      }

      a1[40] = 0;
    }

    v2 = a1[41];
    if (v2)
    {
      free(v2);
      a1[41] = 0;
    }

    if (qword_1ED4CBC40 && qword_1ED4CBC48)
    {
      OUTLINED_FUNCTION_11_75();
      dispatch_sync_f(v3, v4, v5);
    }

    free(a1);
  }
}

void *FigNetworkInterfaceReporterCreate()
{
  v0 = malloc_type_calloc(1uLL, 0x150uLL, 0x102004042D7ED1DuLL);
  if (v0)
  {
    if (qword_1ED4CBBB8 != -1)
    {
      OUTLINED_FUNCTION_2_193();
      dispatch_once_f(v6, v7, v8);
    }

    if (qword_1ED4CBBA8 && qword_1ED4CBBC0 && (v1 = malloc_type_calloc(1uLL, 0x28uLL, 0x10000407A37F5ACuLL), (v0[41] = v1) != 0))
    {
      v0[40] = figNetworkInterfaceRetainGlobalWifiMonitor();
      if (qword_1ED4CBC50 != -1)
      {
        OUTLINED_FUNCTION_11_75();
        dispatch_once_f(v9, v10, v11);
      }

      if (qword_1ED4CBC40 && qword_1ED4CBC48)
      {
        OUTLINED_FUNCTION_11_75();
        dispatch_sync_f(v2, v3, v4);
      }
    }

    else
    {
      FigNetworkInterfaceReporterDestroy(v0);
      return 0;
    }
  }

  return v0;
}

void *figNetworkInterfaceTCPInfoGetByteCountsForEachInterface(const void *a1, CFDataRef theData, uint64_t a3)
{
  result = CFDataGetBytePtr(theData);
  if (result)
  {
    v6 = result;
    result = CFDictionaryGetValue(*a3, a1);
    if (result && (result = CFDataGetBytePtr(result)) != 0)
    {
      v7 = result[27];
      v8 = result[23];
      v9 = result[19];
    }

    else
    {
      v7 = 0;
      v8 = 0;
      v9 = 0;
    }

    v10 = *(a3 + 16);
    v11 = v6[23];
    *(a3 + 8) += v6[27] - v7;
    *(a3 + 16) = v11 - v8 + v10;
    *(a3 + 24) += v6[19] - v9;
  }

  return result;
}

uint64_t figNetworkInterfaceAddToCountValue(uint64_t result, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  if (result && a2 && a3)
  {
    if (a6)
    {
      FigCFDictionaryGetInt64IfPresent();
      return FigCFDictionaryGetInt64IfPresent();
    }
  }

  return result;
}

void figNetworkinterfaceMonitorInitWifiOnce()
{
  if (qword_1ED4CBBB8 != -1)
  {
    OUTLINED_FUNCTION_2_193();
    dispatch_once_f(v0, v1, v2);
  }

  if (qword_1ED4CBBA8 && qword_1ED4CBBC0)
  {
    dispatch_async(qword_1ED4CBBC0, &__block_literal_global_82_2);

    figNetworkMonitorInterfaceIRATEnsureService();
  }
}

void __figNetworkInterfaceRetainGlobalWifiMonitor_block_invoke(uint64_t a1)
{
  if (qword_1ED4CBBE0 && qword_1ED4CBBE8)
  {
    *(*(*(a1 + 32) + 8) + 24) = qword_1ED4CBBE0;
    v2 = *(a1 + 32);
    v3 = *(*(v2 + 8) + 24);
    v4 = *v3;
    if (!*v3)
    {
      v5 = *(v3 + 1);
      if (v5)
      {
        dispatch_source_cancel(v5);
        OUTLINED_FUNCTION_2_4();
        dispatch_release(*(*(v6 + 24) + 8));
        OUTLINED_FUNCTION_2_4();
        *(*(v7 + 24) + 8) = 0;
        v2 = *(a1 + 32);
      }

      block[0] = MEMORY[0x1E69E9820];
      block[1] = 3221225472;
      block[2] = __figNetworkInterfaceRetainGlobalWifiMonitor_block_invoke_2;
      block[3] = &unk_1E7486A28;
      block[4] = v2;
      dispatch_async(qword_1ED4CBBC0, block);
      OUTLINED_FUNCTION_2_4();
      v3 = *(v8 + 24);
      v4 = *v3;
    }

    *v3 = v4 + 1;
  }
}

uint64_t __figNetworkInterfaceRetainGlobalWifiMonitor_block_invoke_2(uint64_t result)
{
  v1 = *(*(*(result + 32) + 8) + 24);
  if (v1)
  {
    result = *(v1 + 24);
    if (result)
    {
      off_1ED4CBBF0(result, figNetworkInterfaceMonitorWiFiLQMCallback, v1);
      OUTLINED_FUNCTION_2_4();
      v4 = *(*(v3 + 24) + 24);

      return v2(v4, figNetworkInterfaceMonitorBssidChangedCallback);
    }
  }

  return result;
}

void figNetworkInterfaceMonitorWiFiLQMCallback(int a1, CFTypeRef cf)
{
  if (cf)
  {
    CFRetain(cf);
    OUTLINED_FUNCTION_0_52();
    OUTLINED_FUNCTION_8_90(v2, v3, v4, v5, v6, v7, v8, v9, v10, 3221225472, v11, v12, v13, v14);
  }
}

void figNetworkInterfaceMonitorBssidChangedCallback(int a1, CFTypeRef cf)
{
  if (cf)
  {
    CFRetain(cf);
    OUTLINED_FUNCTION_0_52();
    OUTLINED_FUNCTION_8_90(v2, v3, v4, v5, v6, v7, v8, v9, v10, 3221225472, v11, v12, v13, v14);
  }
}

void __figNetworkMonitorInterfaceMobileWifiInit_block_invoke()
{
  v0 = dlopen("/System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi", 1);
  if (v0)
  {
    v1 = v0;
    off_1ED4CBC00 = dlsym(v0, "WiFiManagerClientCopyDevices");
    if (off_1ED4CBC00)
    {
      qword_1ED4CBC08 = dlsym(v1, "WiFiManagerClientGetDevice");
      if (qword_1ED4CBC08)
      {
        off_1ED4CBC10 = dlsym(v1, "WiFiManagerClientCreate");
        if (off_1ED4CBC10)
        {
          off_1ED4CBC18 = dlsym(v1, "WiFiDeviceClientGetInterfaceName");
          if (off_1ED4CBC18)
          {
            off_1ED4CBC20 = dlsym(v1, "WiFiDeviceClientCopyCurrentNetwork");
            if (off_1ED4CBC20)
            {
              off_1ED4CBC28 = dlsym(v1, "WiFiNetworkGetChannel");
              if (off_1ED4CBC28)
              {
                off_1ED4CBC30 = dlsym(v1, "WiFiNetworkGetChannelFreqBand");
                if (off_1ED4CBC30)
                {
                  off_1ED4CBBF8 = dlsym(v1, "WiFiDeviceClientRegisterBssidChangeCallback");
                  if (off_1ED4CBBF8)
                  {
                    off_1ED4CBBF0 = dlsym(v1, "WiFiDeviceClientRegisterLQMCallback");
                    if (off_1ED4CBBF0)
                    {
                      off_1ED4CBC38 = dlsym(v1, "WiFiManagerClientScheduleWithRunLoop");
                      if (off_1ED4CBC38)
                      {
                        qword_1ED4CBBE8 = off_1ED4CBC10(*MEMORY[0x1E695E480], 0);
                        if (qword_1ED4CBBE8)
                        {
                          v2 = off_1ED4CBC00();
                          if (v2)
                          {
                            v3 = v2;
                            if (CFArrayGetCount(v2) >= 1)
                            {
                              ValueAtIndex = CFArrayGetValueAtIndex(v3, 0);
                              if (ValueAtIndex)
                              {
                                v5 = ValueAtIndex;
                                v6 = off_1ED4CBC18();
                                if (v6)
                                {
                                  v7 = v6;
                                  v8 = malloc_type_calloc(1uLL, 0x58uLL, 0x10E0040EF2F2C8EuLL);
                                  if (v8)
                                  {
                                    v9 = v8;
                                    v8[3] = CFRetain(v5);
                                    v9[2] = CFRetain(v7);
                                    *v9 = 0;
                                    *(v9 + 10) = -1082130432;
                                    v10 = off_1ED4CBC20(v9[3]);
                                    if (v10)
                                    {
                                      v11 = v10;
                                      figNetworkInterfaceMonitorCopyWifiFrequency(v10, v9 + 4);
                                      CFRelease(v11);
                                    }

                                    OUTLINED_FUNCTION_2_49();
                                    OUTLINED_FUNCTION_43_7();
                                    v17 = __figNetworkMonitorInterfaceMobileWifiInit_block_invoke_2;
                                    v18 = &__block_descriptor_40_e5_v8__0l;
                                    v19 = v9;
                                    dispatch_sync(v12, block);
                                    v13 = off_1ED4CBC38;
                                    v14 = qword_1ED4CBBE8;
                                    GlobalNetworkBufferingRunloop = FigThreadGetGlobalNetworkBufferingRunloop();
                                    v13(v14, GlobalNetworkBufferingRunloop, *MEMORY[0x1E695E8E0]);
                                  }
                                }
                              }
                            }

                            CFRelease(v3);
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

void figNetworkMonitorInterfaceIRATInit()
{
  if (_MergedGlobals_141)
  {
    return;
  }

  if (qword_1ED4CBBB0)
  {
    return;
  }

  mach_service = xpc_connection_create_mach_service("com.apple.WirelessCoexManager", qword_1ED4CBBA8, 0);
  qword_1ED4CBBB0 = mach_service;
  if (!mach_service)
  {
    return;
  }

  xpc_connection_set_event_handler(mach_service, &__block_literal_global_115_1);
  xpc_connection_set_target_queue(qword_1ED4CBBB0, qword_1ED4CBBA8);
  xpc_connection_resume(qword_1ED4CBBB0);
  v1 = OUTLINED_FUNCTION_5_137();
  if (!v1)
  {
    return;
  }

  v2 = v1;
  xpc_dictionary_set_uint64(v1, "kWCMRegisterProcess_ProcessId", 0xDuLL);
  v3 = OUTLINED_FUNCTION_5_137();
  if (v3)
  {
    v4 = v3;
    xpc_dictionary_set_uint64(v3, "kMessageId", 1uLL);
    xpc_dictionary_set_value(v4, "kMessageArgs", v2);
    xpc_release(v2);
    xpc_connection_send_message(qword_1ED4CBBB0, v4);
    xpc_release(v4);
    v5 = OUTLINED_FUNCTION_5_137();
    if (!v5)
    {
      return;
    }

    v6 = v5;
    xpc_dictionary_set_uint64(v5, "kWRMApplicationType", 0xC8uLL);
    v7 = xpc_array_create(0, 0);
    if (v7)
    {
      v8 = v7;
      xpc_array_append_value(v7, v6);
      v9 = OUTLINED_FUNCTION_5_137();
      v10 = v9;
      if (v9)
      {
        xpc_dictionary_set_value(v9, "kWRMApplicationTypeList", v8);
        v11 = OUTLINED_FUNCTION_5_137();
        v2 = v11;
        if (v11)
        {
          xpc_dictionary_set_uint64(v11, "kMessageId", 0x194uLL);
          xpc_dictionary_set_value(v2, "kMessageArgs", v10);
        }
      }

      else
      {
        v2 = 0;
      }

      xpc_release(v6);
      xpc_release(v8);
      if (!v10)
      {
        goto LABEL_13;
      }
    }

    else
    {
      v2 = 0;
      v10 = v6;
    }

    xpc_release(v10);
LABEL_13:
    if (!v2)
    {
      return;
    }

    xpc_connection_send_message(qword_1ED4CBBB0, v2);
  }

  xpc_release(v2);
}

void __figNetworkMonitorInterfaceIRATInit_block_invoke(uint64_t a1, void *a2)
{
  v3 = MEMORY[0x19A8D7060](a2);
  if (v3 == MEMORY[0x1E69E9E98])
  {
    v16 = *MEMORY[0x1E69E9E28];
    if (a2 == MEMORY[0x1E69E9E20])
    {
      xpc_dictionary_get_string(MEMORY[0x1E69E9E20], v16);
      _MergedGlobals_141 = 1;
      v17 = qword_1ED4CBBB0;
      if (qword_1ED4CBBB0)
      {
        qword_1ED4CBBB0 = 0;

        xpc_release(v17);
      }
    }

    else
    {
      xpc_dictionary_get_string(a2, v16);
      v21 = qword_1ED4CBBB0;
      if (qword_1ED4CBBB0)
      {
        qword_1ED4CBBB0 = 0;
        xpc_release(v21);
      }

      figNetworkMonitorInterfaceIRATInit();
    }
  }

  else
  {
    v4 = v3;
    v5 = MEMORY[0x19A8D6EA0](a2);
    if (v5)
    {
      free(v5);
    }

    v6 = MEMORY[0x1E69E9E80];
    if (v4 == MEMORY[0x1E69E9E80] && xpc_dictionary_get_uint64(a2, "kMessageId") == 1302)
    {
      value = xpc_dictionary_get_value(a2, "kMessageArgs");
      if (value)
      {
        v8 = value;
        if (MEMORY[0x19A8D7060]() == v6)
        {
          v9 = xpc_dictionary_get_value(v8, "kWRMApplicationTypeList");
          if (v9)
          {
            v10 = v9;
            if (MEMORY[0x19A8D7060]() == MEMORY[0x1E69E9E50])
            {
              count = xpc_array_get_count(v10);
              if (count)
              {
                v12 = count;
                v13 = 0;
                while (1)
                {
                  v14 = xpc_array_get_value(v10, v13);
                  if (v14)
                  {
                    v15 = v14;
                    if (MEMORY[0x19A8D7060]() == v6 && xpc_dictionary_get_uint64(v15, "kWRMApplicationType") == 200)
                    {
                      break;
                    }
                  }

                  if (v12 == ++v13)
                  {
                    return;
                  }
                }

                if (xpc_dictionary_get_uint64(v15, "kWRMLinkType") == 1)
                {
                  v18 = qword_1ED4CBBE0;
                  if (qword_1ED4CBBE0)
                  {
                    uint64 = xpc_dictionary_get_uint64(v15, "kWRMCurrentLinkBandwidthEstimateMin");
                    v20 = xpc_dictionary_get_uint64(v15, "kWRMCurrentLinkBandwidthEstimateMax");
                    *(v18 + 64) = uint64;
                    *(v18 + 72) = v20;
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

uint64_t __figNetworkInterfaceReleaseGlobalWifiMonitor_block_invoke_3(uint64_t result)
{
  v1 = *(result + 32);
  if (v1)
  {
    v2 = result;
    result = *(v1 + 24);
    if (result)
    {
      off_1ED4CBBF0(result, 0, 0);
      v3 = off_1ED4CBBF8;
      v4 = *(*(v2 + 32) + 24);

      return (v3)(v4, 0, 0);
    }
  }

  return result;
}

void figPeriodicBandwidthMonitorInitOnce()
{
  figNetworkMonitorInterfaceIRATEnsureService();
  qword_1ED4CBC48 = dispatch_queue_create("com.apple.coremedia.FigPeriodicBandwidthMonitor", 0);
  v0 = malloc_type_calloc(1uLL, 0x20uLL, 0x10A00402946438FuLL);
  if (v0)
  {
    v1 = v0;
    FigNetworkHistoryGetGlobal();
    if (!FigNetworkHistoryCopySharedPredictor())
    {
      v2 = dispatch_source_create(MEMORY[0x1E69E9710], 0, 0, qword_1ED4CBC48);
      if (v2)
      {
        v3 = v2;
        v4 = dispatch_time(0, 5000000000);
        dispatch_source_set_timer(v3, v4, 0x12A05F200uLL, 0);
        dispatch_set_context(v3, 0);
        dispatch_source_set_event_handler_f(v3, figPeriodicBandwidthMonitorTimerCallback);
        v1[2] = v3;
LABEL_5:
        *v1 = 0;
        qword_1ED4CBC40 = v1;
        return;
      }

      if (!FigSignalErrorAtGM())
      {
        goto LABEL_5;
      }
    }

    free(v1);
  }
}

void fni_retainPeriodicBandwidthMonitor()
{
  v0 = qword_1ED4CBC40;
  if (qword_1ED4CBC40)
  {
    if (!*qword_1ED4CBC40)
    {
      v1 = *(qword_1ED4CBC40 + 8);
      if (v1)
      {
        dispatch_source_cancel(v1);
        dispatch_release(*(v0 + 8));
        *(v0 + 8) = 0;
      }

      else
      {
        dispatch_resume(*(qword_1ED4CBC40 + 16));
      }
    }

    ++*v0;
  }
}

void __figNetworkInterfaceReporterReportPeriodicDownloadActivity_block_invoke(uint64_t *a1)
{
  if (qword_1ED4CBBB0)
  {
    IRATStatusUpdateMessageApplicationEntry = figNetworkMonitorInterfaceCreateIRATStatusUpdateMessageApplicationEntry();
    if (IRATStatusUpdateMessageApplicationEntry)
    {
      v3 = IRATStatusUpdateMessageApplicationEntry;
      xpc_dictionary_set_uint64(IRATStatusUpdateMessageApplicationEntry, "kWRMCurrentLinkBandwidthAchieved", a1[4]);
      xpc_dictionary_set_uint64(v3, "kSesLatency", a1[5]);
      xpc_dictionary_set_uint64(v3, "kWRMStreamingDataSentCount", a1[6] >> 10);
      xpc_dictionary_set_uint64(v3, "kWRMStreamingDataSentDuration", a1[7]);
      IRATStatusUpdateMessage = figNetworkMonitorInterfaceCreateIRATStatusUpdateMessage(v3);
      if (IRATStatusUpdateMessage)
      {
        v5 = IRATStatusUpdateMessage;
        xpc_connection_send_message(qword_1ED4CBBB0, IRATStatusUpdateMessage);
        xpc_release(v5);
      }

      xpc_release(v3);
    }
  }
}

uint64_t fsd_replyingMessageHandler()
{
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
    return OpCode;
  }

  else
  {
    return 4294951138;
  }
}

uint64_t _produceUserDataAssetTrackProperty(uint64_t a1, __CFArray **a2)
{
  cf = 0;
  theArray = 0;
  v20 = 0;
  v21 = 0;
  v19 = 0;
  FigBaseObject = FigTrackReaderGetFigBaseObject(a1);
  v5 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v5 || (v6 = *MEMORY[0x1E695E480], v5(FigBaseObject, @"MetadataReaderTypes", *MEMORY[0x1E695E480], &theArray), !theArray))
  {
    v17 = 0;
    goto LABEL_22;
  }

  Count = CFArrayGetCount(theArray);
  v24.location = 0;
  v24.length = Count;
  if (!CFArrayContainsValue(theArray, v24, @"QuickTimeUserDataReader") || (v8 = FigTrackReaderGetFigBaseObject(a1), (v9 = *(*(CMBaseObjectGetVTable() + 8) + 48)) == 0) || (v9(v8, @"QuickTimeUserDataReader", v6, &cf), !cf) || (v10 = _copyAllMetadataItems(v6, cf, &v21), !v10))
  {
    v25.location = 0;
    v25.length = Count;
    if (!CFArrayContainsValue(theArray, v25, @"ISOUserDataReader") || (v11 = FigTrackReaderGetFigBaseObject(a1), (v12 = *(*(CMBaseObjectGetVTable() + 8) + 48)) == 0) || (v12(v11, @"ISOUserDataReader", v6, &v20), !v20))
    {
      v14 = v21;
      if (!v21)
      {
        v13 = 0;
        goto LABEL_19;
      }

LABEL_17:
      v17 = 0;
      *a2 = v14;
      v21 = 0;
      goto LABEL_20;
    }

    v10 = _copyAllMetadataItems(v6, v20, &v19);
    if (!v10)
    {
      v13 = v19;
      v14 = v21;
      if (v21 && v19)
      {
        MutableCopy = FigCFArrayCreateMutableCopy();
        if (MutableCopy)
        {
          v16 = MutableCopy;
          v26.length = CFArrayGetCount(v13);
          v26.location = 0;
          CFArrayAppendArray(v16, v13, v26);
          v17 = 0;
          *a2 = v16;
          goto LABEL_20;
        }

        OUTLINED_FUNCTION_0_27();
        v10 = FigSignalErrorAtGM();
        goto LABEL_34;
      }

      if (!v21)
      {
LABEL_19:
        v17 = 0;
        *a2 = v13;
        v19 = 0;
        goto LABEL_20;
      }

      goto LABEL_17;
    }
  }

LABEL_34:
  v17 = v10;
LABEL_20:
  if (theArray)
  {
    CFRelease(theArray);
  }

LABEL_22:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v21)
  {
    CFRelease(v21);
  }

  if (v20)
  {
    CFRelease(v20);
  }

  if (v19)
  {
    CFRelease(v19);
  }

  return v17;
}

uint64_t FigMediaCharacteristicsCopyMediaCharacteristicsWithTrackCallbacks(uint64_t a1, uint64_t a2, uint64_t (**a3)(uint64_t, int *), __CFArray **a4)
{
  v52 = 0;
  cf = 0;
  theArray = 0;
  v48 = 0;
  v49 = 0;
  v47 = 0;
  if (!*a3 || (v4 = a4, !a3[1]) && !a3[2] || !a3[4])
  {
    OUTLINED_FUNCTION_1_19();
    v7 = FigSignalErrorAtGM();
    goto LABEL_91;
  }

  if (!a4)
  {
    Mutable = 0;
    goto LABEL_30;
  }

  v7 = (*a3)(a2, &v52);
  if (v7)
  {
LABEL_91:
    v14 = v7;
    goto LABEL_77;
  }

  v8 = *MEMORY[0x1E695E480];
  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  if (!Mutable)
  {
LABEL_30:
    v14 = 0;
    goto LABEL_78;
  }

  v10 = FigMediaCharacteristicsCopyMediaCharacteristicsForMediaType(v8, v52, &theArray);
  if (v10)
  {
    goto LABEL_89;
  }

  v11 = theArray;
  if (theArray)
  {
    v54.length = CFArrayGetCount(theArray);
    v54.location = 0;
    CFArrayAppendArray(Mutable, v11, v54);
  }

  if (a3[1] || a3[2])
  {
    v12 = OUTLINED_FUNCTION_184();
    v14 = v13(v12);
  }

  else
  {
    v14 = 0;
  }

  v15 = a3[3];
  if (v15)
  {
    v14 = v15(a2, &v47);
    if (v47)
    {
      CFArrayAppendValue(Mutable, @"public.auxiliary-content");
    }

    v53.length = CFArrayGetCount(Mutable);
    v53.location = 0;
    if (!CFArrayContainsValue(Mutable, v53, @"public.auxiliary-content"))
    {
      CFArrayAppendValue(Mutable, @"public.main-program-content");
    }
  }

  if (v52 != 1935832172)
  {
    if (v52 != 1986618469)
    {
      if (v52 != 1952807028)
      {
LABEL_76:
        *v4 = Mutable;
LABEL_77:
        Mutable = 0;
        goto LABEL_78;
      }

      goto LABEL_21;
    }

    v23 = OUTLINED_FUNCTION_184();
    v10 = v24(v23);
    if (v10)
    {
      goto LABEL_89;
    }

    if (!v48)
    {
      goto LABEL_75;
    }

    Count = CFArrayGetCount(v48);
    if (Count < 1)
    {
      goto LABEL_75;
    }

    v39 = v4;
    v40 = Mutable;
    v25 = 0;
    v45 = 0;
    v26 = 0;
    v43 = 0;
    v27 = 0;
    v28 = 0;
    v29 = 0;
    v30 = 0;
    v31 = *MEMORY[0x1E6962740];
    extensionKey = *MEMORY[0x1E69627A0];
    v32 = *MEMORY[0x1E6960068];
    v33 = *MEMORY[0x1E6960090];
    theString2 = *MEMORY[0x1E6960138];
    do
    {
      ValueAtIndex = CFArrayGetValueAtIndex(v48, v25);
      if (FigVideoFormatDescriptionContainsWideColor())
      {
        v30 = 1;
      }

      if (FigVideoFormatDescriptionContainsHDR())
      {
        v29 = 1;
      }

      if (FigVideoFormatDescriptionContainsAlphaChannel())
      {
        v28 = 1;
      }

      if (FigVideoFormatDescriptionContainsStereoMultiviewVideo())
      {
        v27 = 1;
      }

      if (CMFormatDescriptionGetExtension(ValueAtIndex, v31) || CMFormatDescriptionGetExtension(ValueAtIndex, extensionKey))
      {
        v43 = 1;
      }

      if (CMFormatDescriptionGetExtension(ValueAtIndex, v32))
      {
        v26 = 1;
      }

      Extension = CMFormatDescriptionGetExtension(ValueAtIndex, v33);
      if (Extension)
      {
        v36 = CFStringCompare(Extension, theString2, 0);
        v37 = v45;
        if (v36)
        {
          v37 = 1;
        }

        v45 = v37;
      }

      ++v25;
    }

    while (Count != v25);
    if (v30)
    {
      Mutable = v40;
      CFArrayAppendValue(v40, @"public.uses-wide-gamut-color-space");
      if (!v29)
      {
LABEL_58:
        if (v28)
        {
          CFArrayAppendValue(Mutable, @"public.contains-alpha-channel");
        }

        v4 = v39;
        if (v27)
        {
          CFArrayAppendValue(Mutable, @"public.contains-stereo-multiview-video");
        }

        if (v43)
        {
          CFArrayAppendValue(Mutable, @"com.apple.quicktime.video.stereo-metadata");
        }

        if (v26)
        {
          CFArrayAppendValue(Mutable, @"public.indicates-horizontal-field-of-view");
          if (!v45)
          {
            goto LABEL_75;
          }
        }

        else if (!v45)
        {
LABEL_75:
          v14 = 0;
          goto LABEL_76;
        }

        v21 = kFigStdAssetMediaCharacteristic_IndicatesNonRectilinearProjection;
LABEL_74:
        CFArrayAppendValue(Mutable, *v21);
        goto LABEL_75;
      }
    }

    else
    {
      Mutable = v40;
      if (!v29)
      {
        goto LABEL_58;
      }
    }

    CFArrayAppendValue(Mutable, @"public.contains-hdr-video");
    goto LABEL_58;
  }

LABEL_21:
  v16 = OUTLINED_FUNCTION_184();
  v10 = v17(v16);
  if (!v10)
  {
    if (!v48)
    {
      goto LABEL_75;
    }

    v18 = CFArrayGetCount(v48);
    if (v18 < 1)
    {
      goto LABEL_75;
    }

    v19 = v18;
    v20 = 0;
    v21 = kFigStdAssetMediaCharacteristic_TaggedContainsOnlyForcedSubtitles;
    while (1)
    {
      v22 = CFArrayGetValueAtIndex(v48, v20);
      displayFlagsOut = 0;
      if (CMTextFormatDescriptionGetDisplayFlags(v22, &displayFlagsOut) || (displayFlagsOut & 0x80000000) == 0)
      {
        break;
      }

      if (v19 == ++v20)
      {
        goto LABEL_74;
      }
    }

    if (v19 != v20)
    {
      goto LABEL_75;
    }

    v21 = kFigStdAssetMediaCharacteristic_TaggedContainsOnlyForcedSubtitles;
    goto LABEL_74;
  }

LABEL_89:
  v14 = v10;
LABEL_78:
  if (theArray)
  {
    CFRelease(theArray);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v49)
  {
    CFRelease(v49);
  }

  if (v48)
  {
    CFRelease(v48);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  return v14;
}

uint64_t FigMediaCharacteristicsCopyMediaCharacteristicsForMediaType_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMediaCharacteristicsCreateMediaCharacteristicsForMediaOption_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMediaCharacteristicsCopyTaggedMediaCharacteristicsForTrackReader_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _createTaggedMediaCharacteristicsFromUserData_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTrackInformationCopyUserData_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMediaCharacteristicsCopyTaggedMediaCharacteristicsForAudioCompositionPresetDescription_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _copyAllMetadataItems_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

CFTypeRef FigClosedCaptionStringConformerCopyCurrentConformedStrings(uint64_t a1)
{
  result = *(a1 + 16);
  if (result)
  {
    return CFRetain(result);
  }

  return result;
}

double ccstringConformer_getFontSizeForAnnotatedElementAttributedString(const __CFAttributedString *a1)
{
  v9.location = 0;
  v9.length = 0;
  Length = CFAttributedStringGetLength(a1);
  v3 = 0.0;
  if (a1)
  {
    v4.length = Length;
    if (Length >= 1)
    {
      v4.location = 0;
      AttributeAndLongestEffectiveRange = CFAttributedStringGetAttributeAndLongestEffectiveRange(a1, 0, *MEMORY[0x1E6965658], v4, &v9);
      if (AttributeAndLongestEffectiveRange)
      {
        v6 = AttributeAndLongestEffectiveRange;
        v7 = CFGetTypeID(AttributeAndLongestEffectiveRange);
        if (v7 == CTFontGetTypeID())
        {
          return CTFontGetSize(v6);
        }
      }
    }
  }

  return v3;
}

uint64_t ccstringconformer_c608_createConformedAttributedStringFromCommandDataStringAndSuggestedAlignment(const __CFAttributedString *a1, uint64_t a2, int a3, __CFAttributedString **a4)
{
  Mutable = CFAttributedStringCreateMutable(*MEMORY[0x1E695E480], 0);
  CFAttributedStringGetLength(a1);
  String = CFAttributedStringGetString(a1);
  v64.location = 0;
  v64.length = 0;
  CFAttributedStringReplaceString(Mutable, v64, String);
  if (CFAttributedStringGetLength(a1) >= 1)
  {
    v8 = 0;
    attribute = *MEMORY[0x1E6965790];
    attrName = *MEMORY[0x1E6960858];
    v54 = *MEMORY[0x1E69607D0];
    v53 = *MEMORY[0x1E695E4D0];
    v62 = *MEMORY[0x1E6960880];
    v61 = *MEMORY[0x1E6960A48];
    v9 = *MEMORY[0x1E695E4C0];
    v60 = *MEMORY[0x1E69608A8];
    v59 = *MEMORY[0x1E6960990];
    v57 = *MEMORY[0x1E6960878];
    v56 = *MEMORY[0x1E6960810];
    do
    {
      effectiveRange.location = 0;
      effectiveRange.length = 0;
      Attributes = CFAttributedStringGetAttributes(a1, v8, &effectiveRange);
      if (a3)
      {
        v11 = OUTLINED_FUNCTION_1_195();
        v14 = v61;
        v13 = v62;
      }

      else
      {
        v15 = MACaptionAppearanceCopyFontDescriptorForStyle(kMACaptionAppearanceDomainUser, 0, kMACaptionAppearanceFontStyleDefault);
        v16 = CTFontDescriptorCopyAttribute(v15, attribute);
        if (v15)
        {
          CFRelease(v15);
        }

        if (!v16)
        {
          v16 = ccstringconformer_copyFontDescriptorAttributeForMediaAccessibilityFontStyle(attribute);
          if (!v16)
          {
            v16 = CFRetain(@"Courier New");
          }
        }

        v17 = OUTLINED_FUNCTION_1_195();
        CFAttributedStringSetAttribute(v17, v65, attrName, v16);
        CFRelease(v16);
        result = FigCFAttributedStringSetDouble();
        if (result)
        {
          return result;
        }

        v19 = OUTLINED_FUNCTION_1_195();
        CFAttributedStringSetAttribute(v19, v66, v54, v53);
        TextEdgeStyle = MACaptionAppearanceGetTextEdgeStyle(kMACaptionAppearanceDomainUser, 0);
        FigStringConformerEdgeStyleForMediaAccessibilityEdgeStyle(TextEdgeStyle);
        v11 = OUTLINED_FUNCTION_1_195();
      }

      CFAttributedStringSetAttribute(v11, v12, v13, v14);
      Value = CFDictionaryGetValue(Attributes, @"i");
      if (Value)
      {
        v22 = 0;
      }

      else
      {
        v22 = a3 == 0;
      }

      if (v22)
      {
        v23 = v9;
      }

      else
      {
        v23 = Value;
      }

      if (v23)
      {
        v24 = OUTLINED_FUNCTION_1_195();
        CFAttributedStringSetAttribute(v24, v67, v60, v25);
      }

      v26 = CFDictionaryGetValue(Attributes, @"u");
      if (v26)
      {
        v27 = 0;
      }

      else
      {
        v27 = a3 == 0;
      }

      if (v27)
      {
        v28 = v9;
      }

      else
      {
        v28 = v26;
      }

      if (v28)
      {
        v29 = OUTLINED_FUNCTION_1_195();
        CFAttributedStringSetAttribute(v29, v68, v59, v30);
      }

      WhiteARGBColorArray = FigTextMarkupCreateWhiteARGBColorArray();
      if (CFDictionaryGetValue(Attributes, @"t"))
      {
        ARGBColorArrayFromCGColor = FigTextMarkupCreateARGBColorArrayFromCGColor();
        v33 = ARGBColorArrayFromCGColor;
        if (a3)
        {
          if (!ARGBColorArrayFromCGColor)
          {
            goto LABEL_33;
          }

          ResolvedForegroundARGBColorArrayUsingMAXColorAndOpacity = CFRetain(ARGBColorArrayFromCGColor);
          CFRelease(WhiteARGBColorArray);
LABEL_36:
          CFRelease(v33);
          goto LABEL_37;
        }
      }

      else
      {
        if (a3)
        {
LABEL_33:
          v35 = WhiteARGBColorArray;
          goto LABEL_39;
        }

        v33 = 0;
      }

      ResolvedForegroundARGBColorArrayUsingMAXColorAndOpacity = FigStringConformerCreateResolvedForegroundARGBColorArrayUsingMAXColorAndOpacity(v33, WhiteARGBColorArray);
      CFRelease(WhiteARGBColorArray);
      if (v33)
      {
        goto LABEL_36;
      }

LABEL_37:
      if (!ResolvedForegroundARGBColorArrayUsingMAXColorAndOpacity)
      {
        goto LABEL_40;
      }

      v36 = OUTLINED_FUNCTION_1_195();
      CFAttributedStringSetAttribute(v36, v69, v57, ResolvedForegroundARGBColorArrayUsingMAXColorAndOpacity);
      v35 = ResolvedForegroundARGBColorArrayUsingMAXColorAndOpacity;
LABEL_39:
      CFRelease(v35);
LABEL_40:
      BlackARGBColorArray = FigTextMarkupCreateBlackARGBColorArray();
      if (!CFDictionaryGetValue(Attributes, @"b"))
      {
        if (a3)
        {
LABEL_45:
          v41 = BlackARGBColorArray;
LABEL_51:
          CFRelease(v41);
          goto LABEL_52;
        }

        v39 = 0;
LABEL_47:
        ResolvedBackgroundARGBColorArrayUsingMAXColorAndOpacity = FigStringConformerCreateResolvedBackgroundARGBColorArrayUsingMAXColorAndOpacity(v39, BlackARGBColorArray);
        CFRelease(BlackARGBColorArray);
        if (!v39)
        {
          goto LABEL_49;
        }

        goto LABEL_48;
      }

      v38 = FigTextMarkupCreateARGBColorArrayFromCGColor();
      v39 = v38;
      if (!a3)
      {
        goto LABEL_47;
      }

      if (!v38)
      {
        goto LABEL_45;
      }

      ResolvedBackgroundARGBColorArrayUsingMAXColorAndOpacity = CFRetain(v38);
      CFRelease(BlackARGBColorArray);
LABEL_48:
      CFRelease(v39);
LABEL_49:
      if (ResolvedBackgroundARGBColorArrayUsingMAXColorAndOpacity)
      {
        v42 = OUTLINED_FUNCTION_1_195();
        CFAttributedStringSetAttribute(v42, v70, v56, ResolvedBackgroundARGBColorArrayUsingMAXColorAndOpacity);
        v41 = ResolvedBackgroundARGBColorArrayUsingMAXColorAndOpacity;
        goto LABEL_51;
      }

LABEL_52:
      v8 = effectiveRange.length + effectiveRange.location;
    }

    while (v8 < CFAttributedStringGetLength(a1));
  }

  if (a2)
  {
    v43 = OUTLINED_FUNCTION_0_217();
    CFAttributedStringSetAttribute(v43, v71, v44, v45);
  }

  ClearARGBColorArray = FigTextMarkupCreateClearARGBColorArray();
  v47 = ClearARGBColorArray;
  if (a3)
  {
    goto LABEL_58;
  }

  ResolvedWindowARGBColorArrayUsingMAXColorAndOpacity = FigStringConformerCreateResolvedWindowARGBColorArrayUsingMAXColorAndOpacity(0, ClearARGBColorArray);
  CFRelease(v47);
  if (ResolvedWindowARGBColorArrayUsingMAXColorAndOpacity)
  {
    v49 = OUTLINED_FUNCTION_0_217();
    CFAttributedStringSetAttribute(v49, v72, v50, ResolvedWindowARGBColorArrayUsingMAXColorAndOpacity);
    ClearARGBColorArray = ResolvedWindowARGBColorArrayUsingMAXColorAndOpacity;
LABEL_58:
    CFRelease(ClearARGBColorArray);
  }

  OUTLINED_FUNCTION_0_217();
  result = FigCFAttributedStringSetDouble();
  if (!result)
  {
    OUTLINED_FUNCTION_0_217();
    result = FigCFAttributedStringSetDouble();
    if (!result)
    {
      OUTLINED_FUNCTION_0_217();
      result = FigCFAttributedStringSetDouble();
      if (!result)
      {
        if (a3 || (OUTLINED_FUNCTION_0_217(), result = FigCFAttributedStringSetDouble(), !result))
        {
          result = 0;
          *a4 = Mutable;
        }
      }
    }
  }

  return result;
}

uint64_t FigClosedCaptionStringConformerNew_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigClosedCaptionStringConformerNew_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigClosedCaptionStringConformerPushCommand_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fnpa_setProperty(uint64_t a1, const void *a2, const void *a3)
{
  v34 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  valuePtr = 0;
  if (!CFEqual(a2, @"NetworkPredictorProperty_EnableMLTraining"))
  {
    if (CFEqual(a2, @"NetworkPredictorProperty_EnableMLPredictions"))
    {
      *(DerivedStorage + 84) = *MEMORY[0x1E695E4D0] == a3;
      if (dword_1EAF17B78)
      {
        os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
        os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
        fig_log_call_emit_and_clean_up_after_send_and_compose();
      }

      goto LABEL_24;
    }

    if (CFEqual(a2, @"NetworkPredictorProperty_InterfaceType"))
    {
      if (!a3)
      {
        goto LABEL_64;
      }

      v12 = CFGetTypeID(a3);
      if (v12 != CFNumberGetTypeID())
      {
        goto LABEL_64;
      }

      CFNumberGetValue(a3, kCFNumberIntType, &valuePtr);
      v13 = valuePtr;
      if (valuePtr)
      {
        v14 = *(DerivedStorage + 40);
        if (v14)
        {
          v15 = *(*(CMBaseObjectGetVTable() + 8) + 56);
          if (!v15)
          {
            goto LABEL_31;
          }

          v10 = v15(v14, @"NetworkPredictorProperty_InterfaceType", a3);
          if (v10)
          {
            goto LABEL_8;
          }

          v13 = valuePtr;
        }

        v16 = *(DerivedStorage + 88);
        if (v16 && v13 != v16)
        {
          *(DerivedStorage + 72) = FigGetUpTimeNanoseconds();
          *(DerivedStorage + 80) = 2;
          v13 = valuePtr;
        }

        v7 = 0;
        *(DerivedStorage + 88) = v13;
        goto LABEL_32;
      }

LABEL_24:
      v7 = 0;
      goto LABEL_32;
    }

    if (CFEqual(a2, @"NetworkPredictorProperty_CMSessionID"))
    {
      if (a3)
      {
        v17 = CFGetTypeID(a3);
        if (v17 == CFStringGetTypeID())
        {
          v7 = *(DerivedStorage + 40);
          if (!v7)
          {
            goto LABEL_32;
          }

          v8 = *(*(CMBaseObjectGetVTable() + 8) + 56);
          if (v8)
          {
            v9 = @"NetworkPredictorProperty_CMSessionID";
            goto LABEL_7;
          }

LABEL_31:
          v7 = 4294954514;
          goto LABEL_32;
        }
      }

      goto LABEL_64;
    }

    if (CFEqual(a2, @"NetworkPredictorProperty_ReportingAgent"))
    {
      if (a3)
      {
        v19 = *(DerivedStorage + 96);
        *(DerivedStorage + 96) = a3;
        CFRetain(a3);
        if (v19)
        {
          CFRelease(v19);
        }

        v20 = *(DerivedStorage + 40);
        if (!v20)
        {
          goto LABEL_24;
        }

        v21 = @"NetworkPredictorProperty_ReportingAgent";
        goto LABEL_44;
      }
    }

    else
    {
      if (CFEqual(a2, @"NetworkPredictorProperty_ClientBundleIdentifier"))
      {
        if (!a3)
        {
          goto LABEL_64;
        }

        v22 = CFGetTypeID(a3);
        if (v22 != CFStringGetTypeID())
        {
          goto LABEL_64;
        }

        v20 = *(DerivedStorage + 40);
        if (!v20)
        {
          goto LABEL_24;
        }

        v21 = @"NetworkPredictorProperty_ClientBundleIdentifier";
LABEL_44:
        v10 = CMBaseObjectSetProperty(v20, v21, a3);
        goto LABEL_8;
      }

      if (CFEqual(a2, @"NetworkPredictorProperty_SSID"))
      {
        if (!a3)
        {
          goto LABEL_64;
        }

        v23 = CFGetTypeID(a3);
        if (v23 != CFStringGetTypeID())
        {
          goto LABEL_64;
        }

        if (!FigCFEqual())
        {
          *(DerivedStorage + 72) = FigGetUpTimeNanoseconds();
          *(DerivedStorage + 80) = 3;
        }

        v7 = *(DerivedStorage + 120);
        *(DerivedStorage + 120) = a3;
        CFRetain(a3);
        if (!v7)
        {
          goto LABEL_32;
        }

        CFRelease(v7);
        goto LABEL_24;
      }

      if (CFEqual(a2, @"NetworkPredictorProperty_RSSI"))
      {
        if (a3)
        {
          v24 = CFGetTypeID(a3);
          if (v24 == CFNumberGetTypeID())
          {
            UInt64 = FigCFNumberGetUInt64();
            if (UInt64 <= -40)
            {
              v26 = 2;
            }

            else
            {
              v26 = 3;
            }

            if (UInt64 < -60)
            {
              v27 = 1;
            }

            else
            {
              v27 = v26;
            }

            if (*(DerivedStorage + 128) != v27)
            {
              *(DerivedStorage + 72) = FigGetUpTimeNanoseconds();
              *(DerivedStorage + 80) = 4;
            }

            v7 = 0;
            *(DerivedStorage + 128) = v27;
            goto LABEL_32;
          }
        }

LABEL_64:
        OUTLINED_FUNCTION_239();
        v10 = FigSignalErrorAtGM();
        goto LABEL_8;
      }

      if (CFEqual(a2, @"NetworkPredictorProperty_GroupNetworkHistory"))
      {
        if (a3)
        {
          CFTypeID = FigNetworkHistoryGetCFTypeID();
          if (CFTypeID == CFGetTypeID(a3))
          {
            v10 = CMBaseObjectSetProperty(*DerivedStorage, *MEMORY[0x1E6962A10], a3);
            if (!v10)
            {
              v29 = *(DerivedStorage + 24);
              if (v29)
              {
                CFRelease(v29);
                *(DerivedStorage + 24) = 0;
              }

              v10 = FigNetworkHistoryCopySharedPredictor();
            }

            goto LABEL_8;
          }
        }

        goto LABEL_64;
      }

      if (CFEqual(a2, @"NetworkPredictorProperty_GroupBandwidthWeight"))
      {
        if (a3)
        {
          v30 = CFGetTypeID(a3);
          if (v30 == CFNumberGetTypeID())
          {
            FigCFNumberGetFloat32();
            if (v31 >= 0.0 && v31 <= 1.0)
            {
              v7 = 0;
              *(DerivedStorage + 32) = v31;
              goto LABEL_32;
            }
          }
        }

        goto LABEL_64;
      }
    }

    v7 = 4294949566;
    goto LABEL_32;
  }

  if (!a3)
  {
    goto LABEL_64;
  }

  v6 = CFGetTypeID(a3);
  if (v6 != CFBooleanGetTypeID())
  {
    goto LABEL_64;
  }

  v7 = *(DerivedStorage + 40);
  if (v7)
  {
    v8 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (v8)
    {
      v9 = @"NetworkPredictorProperty_EnableMLTraining";
LABEL_7:
      v10 = v8(v7, v9, a3);
LABEL_8:
      v7 = v10;
      goto LABEL_32;
    }

    goto LABEL_31;
  }

LABEL_32:
  FigSimpleMutexUnlock();
  return v7;
}

uint64_t FigNetworkPredictionArbiterCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigNetworkPredictionArbiterCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fnpa_makePrediction_cold_1(uint64_t result, uint64_t a2, uint64_t a3, int a4, _DWORD *a5)
{
  v9 = result;
  v10 = *(result + 80);
  if (v10)
  {
    v11 = *(result + 96);
    if (v11)
    {
      VTable = CMBaseObjectGetVTable();
      v13 = *(VTable + 16);
      result = VTable + 16;
      v14 = *(v13 + 56);
      if (v14)
      {
        result = v14(v11, 0x1F0B64558, 0x1F0B67AD8, v10, 0);
      }
    }
  }

  if (a2 - v9[9] < v9[8])
  {
    v15 = v9[12];
    if (v15)
    {
      v16 = CMBaseObjectGetVTable();
      v17 = *(v16 + 16);
      result = v16 + 16;
      v18 = *(v17 + 40);
      if (v18)
      {
        result = v18(v15, 0x1F0B64558, 0x1F0B67AF8, a3);
      }
    }
  }

  *a5 = a4;
  return result;
}

uint64_t fnpa_makePrediction_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCSSTokenGetTokenType_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_23();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCSSTokenCopyAttributes_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_23();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCSSBaseTokenCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCSSBaseTokenCreate_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_23();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fraoa_CreateOfflineAirPlayReportingPayload_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fraoa_CreateOfflineAirPlayReportingPayload_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fraoa_CreateOfflineAirPlayReportingPayload_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigReportingAgentOfflineAirPlayIssueReportingEvent_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigReportingAgentOfflineAirPlayIssueReportingEvent_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigReportingAgentOfflineAirPlayCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigReportingAgentOfflineAirPlayCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigReportingAgentOfflineAirPlayCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpra_determineAndDistributeBudgetToConsumers(uint64_t a1)
{
  result = fpra_getNumberOfActiveConsumers(a1);
  v11 = 0;
  v10 = 0u;
  v9 = 0u;
  v8 = a1;
  if (result >= 1)
  {
    v3 = *(a1 + 80);
    if (v3 != -1)
    {
      v4 = *(a1 + 88) * (result - 1);
      v5 = v3 >= v4;
      v6 = v3 - v4;
      if (v6 == 0 || !v5)
      {
        v6 = 1;
      }

      *(&v9 + 1) = v6;
      *&v10 = v6;
      result = FigCFArrayApplyFunction();
      if (v9)
      {
        fpra_allocateBudgetToConsumerByWeight(a1, &v8, v9, 1.0);
        *(&v9 + 1) -= *(v9 + 56);
        v7 = fpra_consumerInfoMaxDisplayPixelsNeeded(v9);
        *(&v10 + 1) -= v7;
        FigCFArrayApplyFunction();
        return FigCFArrayApplyFunction();
      }
    }
  }

  return result;
}

uint64_t fpra_determineAndDistributeNetworkBudgetToConsumers(uint64_t a1)
{
  result = fpra_getNumberOfActiveConsumers(a1);
  if (result >= 1)
  {
    result = _os_feature_enabled_impl();
    if (result)
    {
      for (i = 0; ; ++i)
      {
        result = *(a1 + 32);
        if (result)
        {
          result = CFArrayGetCount(result);
        }

        if (i >= result)
        {
          break;
        }

        CFArrayGetValueAtIndex(*(a1 + 32), i);
        BytePtr = FigStorageRefGetBytePtr();
        fpra_allocateBandwidthBudgetToGroup(a1, BytePtr);
      }
    }
  }

  return result;
}

uint64_t FigPlayerResourceArbiterCopyNetworkHistoryForConsumer(uint64_t a1, uint64_t a2, void *a3)
{
  if (a1 && a3)
  {
    if (!_os_feature_enabled_impl())
    {
      return 0;
    }

    FigSimpleMutexLock();
    GroupInfoForConsumer = fpra_getGroupInfoForConsumer(a1, a2);
    if (!GroupInfoForConsumer)
    {
      OUTLINED_FUNCTION_429();
      v14 = FigSignalErrorAtGM();
      v10 = 0;
      goto LABEL_15;
    }

    v7 = GroupInfoForConsumer;
    v9 = (GroupInfoForConsumer + 32);
    v8 = *(GroupInfoForConsumer + 32);
    if (v8)
    {
      v10 = 0;
      goto LABEL_13;
    }

    AllocatorForMedia = FigGetAllocatorForMedia();
    Mutable = CFDictionaryCreateMutable(AllocatorForMedia, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      v10 = Mutable;
      CFDictionarySetValue(Mutable, *MEMORY[0x1E6962A08], *MEMORY[0x1E695E4C0]);
      FigCFDictionarySetInt64();
      v13 = FigNetworkHistoryCreate();
      if (!v13)
      {
        v13 = FigNetworkHistoryCopySharedPredictor();
        if (!v13)
        {
          v13 = FigNetworkHistoryObserverCreate();
          if (!v13)
          {
            v13 = fpra_setupNetworkHistoryObserverConditionsForGroup(v7);
            if (!v13)
            {
              v8 = *v9;
              if (!*v9)
              {
LABEL_14:
                v14 = 0;
                *a3 = v8;
                goto LABEL_15;
              }

LABEL_13:
              v8 = CFRetain(v8);
              goto LABEL_14;
            }
          }
        }
      }

      v14 = v13;
LABEL_15:
      FigSimpleMutexUnlock();
      if (v10)
      {
        CFRelease(v10);
      }

      return v14;
    }
  }

  OUTLINED_FUNCTION_429();

  return FigSignalErrorAtGM();
}

void fpra_networkHistoryObserverCallback(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v4 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v4)
  {
    v5 = v4;
    FigSimpleMutexLock();
    v6 = 0;
    while (1)
    {
      Count = *(v5 + 32);
      if (Count)
      {
        Count = CFArrayGetCount(Count);
      }

      if (v6 >= Count)
      {
        break;
      }

      CFArrayGetValueAtIndex(*(v5 + 32), v6);
      BytePtr = FigStorageRefGetBytePtr();
      v9 = BytePtr;
      if (*(BytePtr + 56) == a3)
      {
        goto LABEL_9;
      }

      ++v6;
      if (*(BytePtr + 64) == a3)
      {
        a3 = *(BytePtr + 56);
LABEL_9:
        if (a3)
        {
          FigNetworkHistoryObserverRemoveCondition();
          v9[7] = 0;
        }

        if (v9[8])
        {
          FigNetworkHistoryObserverRemoveCondition();
          v9[8] = 0;
        }

        v9[6] = FigCFNumberGetSInt64();
        fpra_allocateBandwidthBudgetToGroup(v5, v9);
        fpra_setupNetworkHistoryObserverConditionsForGroup(v9);
        break;
      }
    }

    fpra_unlockAndNotifyClients(v5);

    CFRelease(v5);
  }
}

uint64_t fpra_setupNetworkHistoryObserverConditionsForGroup(void *a1)
{
  v11 = *MEMORY[0x1E69E9840];
  bzero(__src, 0xE4uLL);
  bzero(v9, 0xE4uLL);
  if (!a1[5])
  {
    return 0;
  }

  if (a1[7])
  {
    v2 = 0;
  }

  else
  {
    FigGetAllocatorForMedia();
    SInt64 = FigCFNumberCreateSInt64();
    if (!SInt64)
    {
      return 4294947685;
    }

    v2 = SInt64;
    fpra_setupNetworkPredictionInput(a1, v8);
    memcpy(&__src[4], v8, 0xE0uLL);
    *v8 = v2;
    *&v8[8] = 5;
    memcpy(&v8[12], __src, 0xE4uLL);
    v4 = FigNetworkHistoryObserverAddCondition();
    if (v4)
    {
      v5 = v4;
      v6 = 0;
      goto LABEL_12;
    }
  }

  if (a1[8] || a1[6] < 1)
  {
    v5 = 0;
    v6 = 0;
    if (!v2)
    {
      goto LABEL_13;
    }

LABEL_12:
    CFRelease(v2);
    goto LABEL_13;
  }

  FigGetAllocatorForMedia();
  v6 = FigCFNumberCreateSInt64();
  if (v6)
  {
    fpra_setupNetworkPredictionInput(a1, v8);
    memcpy(&v9[4], v8, 0xE0uLL);
    *v8 = v6;
    *&v8[8] = 6;
    memcpy(&v8[12], v9, 0xE4uLL);
    v5 = FigNetworkHistoryObserverAddCondition();
    if (!v2)
    {
      goto LABEL_13;
    }

    goto LABEL_12;
  }

  v5 = 4294947685;
  if (v2)
  {
    goto LABEL_12;
  }

LABEL_13:
  if (v6)
  {
    CFRelease(v6);
  }

  return v5;
}

uint64_t FigPlayerResourceArbiterSetSupportsNetworkArbitration(unsigned __int8 *a1, uint64_t a2, int a3, int a4)
{
  if (a1)
  {
    if (!_os_feature_enabled_impl())
    {
      return 0;
    }

    FigSimpleMutexLock();
    GroupInfoForConsumer = fpra_getGroupInfoForConsumer(a1, a2);
    if (!GroupInfoForConsumer)
    {
      v12 = FigSignalErrorAtGM();
      goto LABEL_15;
    }

    v9 = GroupInfoForConsumer;
    if (a3)
    {
      *(GroupInfoForConsumer + 25) = a4;
      *(GroupInfoForConsumer + 24) = 1;
      if (a4)
      {
        goto LABEL_18;
      }

LABEL_9:
      for (i = 0; ; ++i)
      {
        Count = *(v9 + 16);
        if (Count)
        {
          Count = CFArrayGetCount(Count);
        }

        if (i >= Count)
        {
          break;
        }

        CFArrayGetValueAtIndex(*(v9 + 16), i);
        *(FigStorageRefGetBytePtr() + 64) = 0;
      }

      v12 = 0;
      a1[97] = 1;
      goto LABEL_15;
    }

    if (*(GroupInfoForConsumer + 24))
    {
      if (!*(GroupInfoForConsumer + 25))
      {
        goto LABEL_9;
      }
    }

    else
    {
      *(GroupInfoForConsumer + 25) = a4;
      if (!a4)
      {
        goto LABEL_9;
      }
    }

LABEL_18:
    fpra_determineAndDistributeNetworkBudgetToConsumers(a1);
    v12 = 0;
LABEL_15:
    fpra_unlockAndNotifyClients(a1);
    return v12;
  }

  return FigSignalErrorAtGM();
}

uint64_t fpra_getNumberOfActiveConsumers(uint64_t a1)
{
  v2 = *(a1 + 40);
  if (!v2)
  {
    return 0;
  }

  Count = CFArrayGetCount(v2);
  if (Count < 1)
  {
    return 0;
  }

  v4 = Count;
  v5 = 0;
  for (i = 0; i != v4; ++i)
  {
    CFArrayGetValueAtIndex(*(a1 + 40), i);
    BytePtr = FigStorageRefGetBytePtr();
    v5 += fpra_isActiveConsumer(BytePtr);
  }

  return v5;
}

void fpra_allocateBandwidthBudgetToGroup(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 25))
  {
LABEL_2:
    v4 = 0;
    v5 = 0;
    v6 = 0;
    v7 = 0.0;
    v8 = 0.0;
    while (1)
    {
      Count = *(a2 + 16);
      if (Count)
      {
        Count = CFArrayGetCount(Count);
      }

      if (v5 >= Count)
      {
        break;
      }

      OUTLINED_FUNCTION_18_32();
      BytePtr = FigStorageRefGetBytePtr();
      *(BytePtr + 48) = *(BytePtr + 64);
      *(BytePtr + 64) = 0;
      if (fpra_consumerRequiresNetworkArbitration(BytePtr))
      {
        NetworkPriority = FigPlayerResourceArbiterPlayerSpecifierGetNetworkPriority(*(BytePtr + 72));
        v12 = 0.3;
        if (NetworkPriority <= 2)
        {
          v12 = flt_196E7BF10[NetworkPriority];
        }

        LowestBitrate = FigPlayerResourceArbiterNetworkSpecifierGetLowestBitrate(*(BytePtr + 80));
        if (LowestBitrate < 1)
        {
          v8 = v8 + v12;
        }

        else
        {
          v6 += LowestBitrate;
          v7 = v7 + (v12 * LowestBitrate);
          ++v4;
        }
      }

      ++v5;
    }

    if (v8 != 0.0)
    {
      if (v6 < 1)
      {
        LODWORD(v14) = v4;
      }

      else
      {
        v14 = v6 / v4;
      }

      v7 = v7 + (v8 * v14);
    }

    if (*(a2 + 48) >= 1 && fpra_moreThanOneActiveConsumerWithoutBandwidthBudget(a2))
    {
      v18 = 0;
      v19 = 0;
      v20 = *MEMORY[0x1E695F060];
      v21 = *(MEMORY[0x1E695F060] + 8);
      v22 = 0.0;
      v23 = 0.0;
      v24 = 0.0;
      while (1)
      {
        v25 = *(a2 + 16);
        if (v25)
        {
          v25 = CFArrayGetCount(v25);
        }

        if (v19 >= v25 || v18 > 1)
        {
          break;
        }

        OUTLINED_FUNCTION_18_32();
        v27 = FigStorageRefGetBytePtr();
        if (fpra_consumerRequiresNetworkArbitration(v27))
        {
          if (FigPlayerResourceArbiterPlayerSpecifierGetDisplaySize(*(v27 + 72)) == v20 && v28 == v21)
          {
            fpra_calculateNetworkBudgetForConsumer(v27);
            v24 = v24 + v30;
            v23 = v23 + fpra_getPriorTierToMeasuredBWWeight(a2, v27);
            v31 = FigPlayerResourceArbiterNetworkSpecifierGetCurrentBitrate(*(v27 + 80)) * 1.1 / *(a2 + 48);
            v22 = v22 + v31;
          }

          else
          {
            ++v18;
          }
        }

        ++v19;
      }

      if (v18 == 1)
      {
        v32 = fpra_getCurrentTierToMeasuredBWWeight;
        if ((v24 - v22) > 0.1 || (v32 = fpra_getPriorTierToMeasuredBWWeight, (v24 - v23) > 0.1))
        {
          fpra_allocateBudgetProportionalToMeasuredBWForConsumers(a2, fpra_consumerIsNotActivelyDisplaying, v32, v7);
          v7 = v37;
        }
      }
    }

    for (i = 0; ; ++i)
    {
      v34 = *(a2 + 16);
      if (v34)
      {
        v34 = CFArrayGetCount(v34);
      }

      if (i >= v34)
      {
        break;
      }

      OUTLINED_FUNCTION_18_32();
      v35 = FigStorageRefGetBytePtr();
      if (fpra_consumerRequiresNetworkArbitration(v35))
      {
        CurrentBitrate = FigPlayerResourceArbiterNetworkSpecifierGetCurrentBitrate(*(v35 + 80));
        if (CurrentBitrate != FigPlayerResourceArbiterNetworkSpecifierGetHighestBitrate(*(v35 + 80)))
        {
          fpra_allocateBudgetProportionalToMeasuredBWForConsumers(a2, fpra_consumerIsAtHighestBitrate, fpra_getCurrentTierToMeasuredBWWeight, v7);
          break;
        }
      }
    }

    for (j = 0; ; ++j)
    {
      v39 = *(a2 + 16);
      if (v39)
      {
        v39 = CFArrayGetCount(v39);
      }

      if (j >= v39)
      {
        break;
      }

      OUTLINED_FUNCTION_18_32();
      v40 = FigStorageRefGetBytePtr();
      if (fpra_consumerRequiresNetworkArbitration(v40))
      {
        v41 = *(v40 + 64);
        if (v41 == 0.0)
        {
          fpra_calculateNetworkBudgetForConsumer(v40);
          *(v40 + 64) = v41;
        }

        if (vabds_f32(*(v40 + 48), v41) > 0.001)
        {
          *(a1 + 97) = 1;
        }
      }
    }
  }

  else
  {
    for (k = 0; ; ++k)
    {
      v16 = *(a2 + 16);
      if (v16)
      {
        v16 = CFArrayGetCount(v16);
      }

      if (k >= v16)
      {
        break;
      }

      OUTLINED_FUNCTION_18_32();
      v17 = *(FigStorageRefGetBytePtr() + 72);
      if (v17 && FigPlayerResourceArbiterPlayerSpecifierGetNetworkPriority(v17))
      {
        goto LABEL_2;
      }
    }
  }

  bzero(&v49, 0xD8uLL);
  fpra_setupNetworkPredictionInput(a2, &__src);
  v47 = 0;
  v45 = 0u;
  v46 = 0u;
  v43 = 0u;
  v44 = 0u;
  v42 = 0u;
  if (*(a2 + 32))
  {
    FigNetworkHistoryCopySharedPredictor();
  }
}

uint64_t *fpra_allocateBudgetProportionalToMeasuredBWForConsumers(uint64_t *result, unsigned int (*a2)(uint64_t), float (*a3)(uint64_t *, uint64_t), float a4)
{
  v5 = 1.0;
  if (result[6] >= 1)
  {
    v8 = result;
    result = fpra_moreThanOneActiveConsumerWithoutBandwidthBudget(result);
    if (result)
    {
      v9 = 0;
      v10 = a4;
      while (1)
      {
        result = v8[2];
        if (result)
        {
          result = CFArrayGetCount(result);
        }

        if (v9 >= result)
        {
          break;
        }

        CFArrayGetValueAtIndex(v8[2], v9);
        BytePtr = FigStorageRefGetBytePtr();
        if (fpra_consumerRequiresNetworkArbitration(BytePtr))
        {
          fpra_calculateNetworkBudgetForConsumer(BytePtr);
          if (v12 != 0.0)
          {
            v13 = v12;
            if (*(BytePtr + 64) == 0.0)
            {
              if (a2(BytePtr))
              {
                v14 = a3(v8, BytePtr);
                if (v14 < v13)
                {
                  *(BytePtr + 64) = v14;
                  v5 = v5 - v14;
                  v10 = v10 - (v13 * a4);
                }
              }
            }
          }
        }

        ++v9;
      }
    }
  }

  return result;
}

uint64_t FigPlayerResourceArbiterRegisterConsumer_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterRegisterConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterRegisterConsumer_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterRegisterConsumer_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterRegisterConsumer_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterUnregisterConsumer_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterSetSpecifierForConsumer_cold_1(uint64_t a1, CFTypeRef cf, uint64_t a3)
{
  v5 = *(a1 + 72);
  *(a1 + 72) = cf;
  if (cf)
  {
    CFRetain(cf);
    if (!v5)
    {
LABEL_3:
      if (!cf)
      {
        goto LABEL_5;
      }

      goto LABEL_4;
    }
  }

  else if (!v5)
  {
    goto LABEL_3;
  }

  CFRelease(v5);
  if (cf)
  {
LABEL_4:
    FigPlayerResourceArbiterPlayerSpecifierMarkAsImmutable(cf);
  }

LABEL_5:
  fpra_determineAndDistributeBudgetToConsumers(a3);

  return fpra_determineAndDistributeNetworkBudgetToConsumers(a3);
}

uint64_t FigPlayerResourceArbiterSetSpecifierForConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterSetSpecifierForConsumer_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterSetNetworkSpecifierForConsumer_cold_1(uint64_t a1, CFTypeRef cf, uint64_t a3)
{
  v5 = *(a1 + 80);
  *(a1 + 80) = cf;
  if (cf)
  {
    CFRetain(cf);
    if (!v5)
    {
LABEL_3:
      if (!cf)
      {
        goto LABEL_5;
      }

      goto LABEL_4;
    }
  }

  else if (!v5)
  {
    goto LABEL_3;
  }

  CFRelease(v5);
  if (cf)
  {
LABEL_4:
    FigPlayerResourceArbiterNetworkSpecifierMarkAsImmutable(cf);
  }

LABEL_5:

  return fpra_determineAndDistributeNetworkBudgetToConsumers(a3);
}

uint64_t FigPlayerResourceArbiterSetNetworkSpecifierForConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterSetNetworkSpecifierForConsumer_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterGetBudgetForConsumer_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterGetBudgetForConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterGetNetworkBudgetForConsumer_cold_1(uint64_t a1, uint64_t a2, _DWORD *a3, int *a4)
{
  FigSimpleMutexLock();
  PrimaryConsumerInfo = fpra_getPrimaryConsumerInfo(a1, a2);
  if (PrimaryConsumerInfo)
  {
    if (a3 && (v9 = PrimaryConsumerInfo, _os_feature_enabled_impl()))
    {
      v10 = 0;
      *a3 = *(v9 + 64);
    }

    else
    {
      v10 = 0;
    }
  }

  else
  {
    v10 = -19610;
  }

  *a4 = v10;

  return FigSimpleMutexUnlock();
}

uint64_t FigPlayerResourceArbiterGetNetworkBudgetForConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterSetStorebagForConsumer_cold_1(uint64_t a1, CFTypeRef cf, uint64_t a3)
{
  v4 = *(a1 + 24);
  *(a1 + 24) = cf;
  if (cf)
  {
    CFRetain(cf);
  }

  if (v4)
  {
    CFRelease(v4);
  }

  return fpra_determineAndDistributeNetworkBudgetToConsumers(a3);
}

uint64_t FigPlayerResourceArbiterSetStorebagForConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterSetStorebagForConsumer_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterGetExtendedBufferingPolicyForConsumer_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterGetExtendedBufferingPolicyForConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterAssignReportingAgentForConsumer_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterAssignReportingAgentForConsumer_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterGetGlobalSingleton_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  dword_1ED4CBC68 = result;
  return result;
}

void FigPlayerResourceArbiterCreate_cold_1(uint64_t a1, const void *a2, _DWORD *a3)
{
  *a3 = FigSignalErrorAtGM();

  CFRelease(a2);
}

uint64_t FigPlayerResourceArbiterCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPlayerResourceArbiterCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigPartialSampleTableTryAppendSampleInformation(uint64_t a1, uint64_t a2, uint64_t *a3)
{
  if (!a1 || !*(a1 + 176) || !a2)
  {
    goto LABEL_167;
  }

  v6 = *(a1 + 16);
  v7 = v6[1];
  if (*(a1 + 160) <= 0x260uLL)
  {
    if (v7 > 0)
    {
LABEL_6:
      v8 = 0;
      goto LABEL_98;
    }

LABEL_167:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
    FigSignalErrorAtGM();
    goto LABEL_6;
  }

  v9 = *v6;
  if ((v9 & 8) != 0)
  {
    v175.value = 0;
    v10 = *(a1 + 216);
    if (!v10 || (v11 = v10[1], v12 = v7 - *v10, v13 = v10[2], *a2 != v11 + v13 * v12) || *(a2 + 8) != v13)
    {
      if (!*(a1 + 224))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 1, 8uLL, (a1 + 224));
        if (v97)
        {
          goto LABEL_6;
        }
      }

      v98 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v98, 1, 0x18uLL, v99);
      if (v100)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      *(v101 + 8) = *a2;
      OUTLINED_FUNCTION_4_158();
      *(a1 + 216) = v102;
      OUTLINED_FUNCTION_17_51();
    }
  }

  if ((~v9 & 0x18) == 0)
  {
    v175.value = 0;
    if (!*(a1 + 256) || *(a2 + 24) && (OUTLINED_FUNCTION_16_57(), !v14))
    {
      if (!*(a1 + 264))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 2, 8uLL, (a1 + 264));
        if (v147)
        {
          goto LABEL_6;
        }
      }

      v148 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v148, 2, 0x10uLL, v149);
      if (v150)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      *(v151 + 8) = *(a2 + 16) - *a2;
      OUTLINED_FUNCTION_4_158();
      *(a1 + 256) = v152;
    }

    v175.value = 0;
    if (!*(a1 + 296) || (OUTLINED_FUNCTION_16_57(), !v14))
    {
      if (!*(a1 + 304))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 3, 8uLL, (a1 + 304));
        if (v120)
        {
          goto LABEL_6;
        }
      }

      v121 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v121, 3, 0x10uLL, v122);
      if (v123)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      *(v124 + 8) = *(a2 + 24);
      OUTLINED_FUNCTION_4_158();
      *(a1 + 296) = v125;
    }

    OUTLINED_FUNCTION_17_51();
  }

  if ((v9 & 4) != 0)
  {
    v175.value = 0;
    v15 = *(a1 + 456);
    if (!v15 || *(a2 + 58) != *(v15 + 18) || *(a2 + 56) != *(v15 + 16) || *(a2 + 57) != *(v15 + 17) || *(a2 + 48) != *(v15 + 8) || *(a2 + 64) != *(v15 + 24) + v7 - *v15)
    {
      if (!*(a1 + 464))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 7, 8uLL, (a1 + 464));
        if (v16)
        {
          goto LABEL_6;
        }
      }

      v17 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v17, 7, 0x20uLL, v18);
      if (v19)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      *(v20 + 24) = *(a2 + 64);
      *(v20 + 8) = *(a2 + 48);
      OUTLINED_FUNCTION_4_158();
      *(a1 + 456) = v21;
    }

    v175.value = 0;
    v22 = *(a1 + 336);
    if (!v22 || *(a2 + 32) != *(v22 + 8) || *(a2 + 40) != *(v22 + 16))
    {
      if (!*(a1 + 344))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 4, 8uLL, (a1 + 344));
        if (v103)
        {
          goto LABEL_6;
        }
      }

      v104 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v104, 4, 0x18uLL, v105);
      if (v106)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      *(v107 + 8) = *(a2 + 32);
      OUTLINED_FUNCTION_4_158();
      *(a1 + 336) = v108;
    }

    OUTLINED_FUNCTION_17_51();
  }

  if ((v9 & 0xC) != 0)
  {
    if ((v9 & 0x40) != 0)
    {
      v175.value = 0;
      if (!*(a1 + 376) || (OUTLINED_FUNCTION_16_57(), !v14))
      {
        if (!*(a1 + 384))
        {
          fpst_writing_reserveMemoryForChangeType(a1, 5, 8uLL, (a1 + 384));
          if (v153)
          {
            goto LABEL_6;
          }
        }

        v154 = OUTLINED_FUNCTION_9_85();
        fpst_writing_reserveMemoryForChangeType(v154, 5, 0x10uLL, v155);
        if (v156)
        {
          goto LABEL_6;
        }

        OUTLINED_FUNCTION_8_91();
        *(v157 + 8) = *(a2 + 72);
        OUTLINED_FUNCTION_4_158();
        *(a1 + 376) = v158;
      }
    }

    else
    {
      v175.value = 0;
      v23 = *(a1 + 416);
      if (!v23 || *(a2 + 80) != *(v23 + 16) || (OUTLINED_FUNCTION_16_57(), !v14))
      {
        if (!*(a1 + 424))
        {
          fpst_writing_reserveMemoryForChangeType(a1, 6, 8uLL, (a1 + 424));
          if (v24)
          {
            goto LABEL_6;
          }
        }

        v25 = OUTLINED_FUNCTION_9_85();
        fpst_writing_reserveMemoryForChangeType(v25, 6, 0x18uLL, v26);
        if (v27)
        {
          goto LABEL_6;
        }

        OUTLINED_FUNCTION_8_91();
        *(v28 + 8) = *(a2 + 72);
        *(v28 + 16) = *(a2 + 80);
        OUTLINED_FUNCTION_4_158();
        *(a1 + 416) = v29;
      }
    }
  }

  v167 = 0;
  v30 = MEMORY[0x1E6960CC0];
  if ((*(a2 + 100) & 1) == 0 || (*(a2 + 148) & 1) == 0)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
LABEL_172:
    LODWORD(v79) = FigSignalErrorAtGM();
    goto LABEL_117;
  }

  v159 = *MEMORY[0x1E6960CC0];
  *&v175.value = *MEMORY[0x1E6960CC0];
  v31 = *(MEMORY[0x1E6960CC0] + 16);
  v175.epoch = v31;
  if (*(a2 + 220))
  {
    OUTLINED_FUNCTION_1_196(*(a2 + 224), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, *&time2.value, time2.epoch, v173, *(a2 + 208), *(a2 + 216), time1.epoch);
  }

  v32 = *(a1 + 576);
  if (v32)
  {
    time1 = v175;
    time2 = *(v32 + 32);
    if (!CMTimeCompare(&time1, &time2))
    {
      goto LABEL_53;
    }
  }

  memset(&v175, 0, sizeof(v175));
  CMTimeMake(&v175, 0, *(a2 + 96));
  if (*(a1 + 584) || (fpst_writing_reserveMemoryForChangeType(a1, 10, 8uLL, (a1 + 584)), !v79))
  {
    fpst_writing_reserveMemoryForChangeType(a1, 10, 0x38uLL, &v167);
    if (!v79)
    {
      if ((*(a2 + 220) & 1) == 0 || (time2 = *(a2 + 208), v87 = OUTLINED_FUNCTION_281(v79, v80, v81, v82, v83, v84, v85, v86, v159, *(&v159 + 1), v164, v167, *(a2 + 136), *(a2 + 144), *(a2 + 152), v171, time2.value), CMTimeSubtract(v89, v87, v88), v175 = time1, *&time2.value = v159, time2.epoch = v31, CMTimeCompare(&time1, &time2) > 0))
      {
        v90 = v167;
        *v167 = v7;
        OUTLINED_FUNCTION_18_49(v90, *(a2 + 136));
        *(v91 + 32) = v175;
        OUTLINED_FUNCTION_4_158();
        *(a1 + 576) = v92;
        goto LABEL_117;
      }

      fig_log_get_emitter();
      OUTLINED_FUNCTION_2_10();
      goto LABEL_172;
    }
  }

LABEL_117:
  if (v79)
  {
    goto LABEL_6;
  }

LABEL_53:
  time2.value = 0;
  if ((*(a2 + 100) & 1) == 0 || (v175 = *(a2 + 88), time1 = *v30, CMTimeCompare(&v175, &time1) < 0))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
    if (FigSignalErrorAtGM())
    {
      goto LABEL_6;
    }
  }

  else
  {
    v33 = *(a1 + 616);
    if (!v33 || (v175 = *(a2 + 88), OUTLINED_FUNCTION_7_107(v33, v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, time2.value, *&time2.timescale, time2.epoch, v173, *&time1.value, time1.epoch)))
    {
      if (!*(a1 + 624))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 11, 8uLL, (a1 + 624));
        if (v93)
        {
          goto LABEL_6;
        }
      }

      fpst_writing_reserveMemoryForChangeType(a1, 11, 0x20uLL, &time2);
      if (v94)
      {
        goto LABEL_6;
      }

      value = time2.value;
      *time2.value = v7;
      OUTLINED_FUNCTION_18_49(value, *(a2 + 88));
      OUTLINED_FUNCTION_4_158();
      *(a1 + 616) = v96;
    }
  }

  v167 = 0;
  if (*(a2 + 148) & 1) != 0 && (*(a2 + 124))
  {
    memset(&v175, 0, sizeof(v175));
    v34 = OUTLINED_FUNCTION_1_196(*(a2 + 128), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, *&time2.value, time2.epoch, v173, *(a2 + 112), *(a2 + 120), time1.epoch);
    v159 = *MEMORY[0x1E6960C70];
    *&time1.value = *MEMORY[0x1E6960C70];
    v42 = *(MEMORY[0x1E6960C70] + 16);
    time1.epoch = v42;
    if (*(a2 + 244))
    {
      time2 = *(a2 + 232);
      v43 = OUTLINED_FUNCTION_281(v34, v35, v36, v37, v38, v39, v40, v41, v159, *(&v159 + 1), v164, v167, *(a2 + 112), *(a2 + 120), *(a2 + 128), v171, time2.value);
      v34 = CMTimeSubtract(v45, v43, v44);
    }

    v46 = *(a1 + 656);
    if (!v46 || (time2 = v175, v47 = OUTLINED_FUNCTION_281(v34, v35, v36, v37, v38, v39, v40, v41, v159, *(&v159 + 1), v164, v167, v46[1], v46[2], v46[3], v171, v175.value), v49 = CMTimeCompare(v47, v48), v49) || (v57 = *(a1 + 656), time2 = time1, v58 = OUTLINED_FUNCTION_281(v49, v50, v51, v52, v53, v54, v55, v56, v159, *(&v159 + 1), v164, v167, v57[4], v57[5], v57[6], v171, time1.value), CMTimeCompare(v58, v59)))
    {
      if (!*(a1 + 664))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 12, 8uLL, (a1 + 664));
        if (v69)
        {
          goto LABEL_6;
        }
      }

      fpst_writing_reserveMemoryForChangeType(a1, 12, 0x38uLL, &v167);
      if (v70)
      {
        goto LABEL_6;
      }

      v71 = v167;
      *v167 = v7;
      OUTLINED_FUNCTION_1_196(*(a2 + 128), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, *&time2.value, time2.epoch, v173, *(a2 + 112), *(a2 + 120), time1.epoch);
      epoch = v175.epoch;
      *(v71 + 1) = *&v175.value;
      v71[3] = epoch;
      v71[6] = v42;
      *(v71 + 2) = v159;
      if (*(a2 + 244))
      {
        time1 = *(a2 + 232);
        time2 = *(a2 + 112);
        CMTimeSubtract(&v175, &time1, &time2);
        *(v71 + 4) = v175;
      }

      ++**(a1 + 664);
      *(a1 + 656) = v71;
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_2_10();
    if (FigSignalErrorAtGM())
    {
      goto LABEL_6;
    }
  }

  OUTLINED_FUNCTION_17_51();
  if ((v60 & 0x100) != 0)
  {
    time2.value = 0;
    v61 = *(a1 + 776);
    if (!v61 || (v175 = *(a2 + 256), OUTLINED_FUNCTION_7_107(v61, v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, time2.value, *&time2.timescale, time2.epoch, v173, *&time1.value, time1.epoch)) || (*&v175.value = *(a2 + 280), OUTLINED_FUNCTION_13_61(*(a2 + 296), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, time2.value, *&time2.timescale, time2.epoch, v173, *&time1.value, time1.epoch)))
    {
      if (!*(a1 + 784))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 15, 8uLL, (a1 + 784));
        if (v109)
        {
          goto LABEL_6;
        }
      }

      fpst_writing_reserveMemoryForChangeType(a1, 15, 0x38uLL, &time2);
      if (v110)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_18_49(time2.value, *(a2 + 256));
      OUTLINED_FUNCTION_20_40(v111);
      OUTLINED_FUNCTION_4_158();
      *(a1 + 776) = v112;
    }

    OUTLINED_FUNCTION_17_51();
  }

  if ((v60 & 0x200) != 0)
  {
    time2.value = 0;
    v62 = *(a1 + 816);
    if (!v62 || (v175 = *(a2 + 304), OUTLINED_FUNCTION_7_107(v62, v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, time2.value, *&time2.timescale, time2.epoch, v173, *&time1.value, time1.epoch)) || (*&v175.value = *(a2 + 328), OUTLINED_FUNCTION_13_61(*(a2 + 344), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, time2.value, *&time2.timescale, time2.epoch, v173, *&time1.value, time1.epoch)))
    {
      if (!*(a1 + 824) && (fpst_writing_reserveMemoryForChangeType(a1, 16, 8uLL, (a1 + 824)), v113) || (fpst_writing_reserveMemoryForChangeType(a1, 16, 0x38uLL, &time2), v113))
      {
        if (v113)
        {
          goto LABEL_6;
        }
      }

      else
      {
        OUTLINED_FUNCTION_18_49(time2.value, *(a2 + 304));
        OUTLINED_FUNCTION_20_40(v114);
        OUTLINED_FUNCTION_4_158();
        *(a1 + 816) = v115;
      }
    }
  }

  v63 = *(a1 + 16);
  v64 = *v63;
  if ((*v63 & 0x80) != 0)
  {
    v168 = 0;
    if (!*(a1 + 736) || (OUTLINED_FUNCTION_1_196(*(a2 + 176), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, *&time2.value, time2.epoch, v173, *(a2 + 160), *(a2 + 168), time1.epoch), OUTLINED_FUNCTION_7_107(*(a1 + 736), v160, v162, v165, v167, v168, v169, v170, v171, time2.value, *&time2.timescale, time2.epoch, v173, *&time1.value, time1.epoch)) || (OUTLINED_FUNCTION_1_196(*(a2 + 200), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, *&time2.value, time2.epoch, v173, *(a2 + 184), *(a2 + 192), time1.epoch), time1 = *(*(a1 + 736) + 32), CMTimeCompare(&v175, &time1)))
    {
      if (!*(a1 + 744))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 14, 8uLL, (a1 + 744));
        if (v116)
        {
          goto LABEL_6;
        }
      }

      fpst_writing_reserveMemoryForChangeType(a1, 14, 0x38uLL, &v168);
      if (v117)
      {
        goto LABEL_6;
      }

      v118 = v168;
      v168->value = v7;
      OUTLINED_FUNCTION_1_196(*(a2 + 176), v159, *(&v159 + 1), v164, v167, v168, v169, v170, v171, *&time2.value, time2.epoch, v173, *(a2 + 160), *(a2 + 168), time1.epoch);
      v119 = v175.epoch;
      *&v118->timescale = *&v175.value;
      v118[1].value = v119;
      OUTLINED_FUNCTION_1_196(*(a2 + 200), v161, v163, v166, v167, v168, v169, v170, v171, *&time2.value, time2.epoch, v173, *(a2 + 184), *(a2 + 192), time1.epoch);
      *(v118 + 32) = v175;
      ++**(a1 + 744);
      *(a1 + 736) = v118;
    }

    v63 = *(a1 + 16);
    v64 = *v63;
  }

  if (v64)
  {
    v175.value = 0;
    v65 = *(a1 + 536);
    if (!v65 || *(a2 + 352) != *(v65 + 8))
    {
      if (!*(a1 + 544))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 9, 8uLL, (a1 + 544));
        if (v126)
        {
          goto LABEL_6;
        }
      }

      v127 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v127, 9, 0x18uLL, v128);
      if (v129)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      *(v130 + 8) = *(a2 + 352);
      OUTLINED_FUNCTION_4_158();
      *(a1 + 536) = v131;
      v63 = *(a1 + 16);
    }

    v64 = *v63;
  }

  if ((v64 & 2) != 0)
  {
    v175.value = 0;
    v66 = *(a1 + 496);
    if (!v66 || memcmp((a2 + 360), (v66 + 8), 6uLL))
    {
      if (!*(a1 + 504))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 8, 8uLL, (a1 + 504));
        if (v132)
        {
          goto LABEL_6;
        }
      }

      v133 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v133, 8, 0x10uLL, v134);
      if (v135)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      v136 = *(a2 + 364);
      *(v137 + 8) = *(a2 + 360);
      *(v137 + 12) = v136;
      OUTLINED_FUNCTION_4_158();
      *(a1 + 496) = v138;
      v63 = *(a1 + 16);
    }

    v64 = *v63;
  }

  if ((v64 & 0x20) != 0)
  {
    v175.value = 0;
    v67 = *(a1 + 696);
    if (!v67 || memcmp((a2 + 366), (v67 + 8), 0x28uLL))
    {
      if (!*(a1 + 704))
      {
        fpst_writing_reserveMemoryForChangeType(a1, 13, 8uLL, (a1 + 704));
        if (v139)
        {
          goto LABEL_6;
        }
      }

      v140 = OUTLINED_FUNCTION_9_85();
      fpst_writing_reserveMemoryForChangeType(v140, 13, 0x30uLL, v141);
      if (v142)
      {
        goto LABEL_6;
      }

      OUTLINED_FUNCTION_8_91();
      v143 = *(a2 + 398);
      v144 = *(a2 + 382);
      *(v145 + 8) = *(a2 + 366);
      *(v145 + 24) = v144;
      *(v145 + 40) = v143;
      OUTLINED_FUNCTION_4_158();
      *(a1 + 696) = v146;
    }
  }

  v175.value = 0;
  if (!*(a1 + 856) || (OUTLINED_FUNCTION_16_57(), !v14))
  {
    if (!*(a1 + 864))
    {
      fpst_writing_reserveMemoryForChangeType(a1, 17, 8uLL, (a1 + 864));
      if (v73)
      {
        goto LABEL_6;
      }
    }

    v74 = OUTLINED_FUNCTION_9_85();
    fpst_writing_reserveMemoryForChangeType(v74, 17, 0x10uLL, v75);
    if (v76)
    {
      goto LABEL_6;
    }

    OUTLINED_FUNCTION_8_91();
    *(v77 + 8) = *(a2 + 408);
    OUTLINED_FUNCTION_4_158();
    *(a1 + 856) = v78;
  }

  v68 = *(a1 + 16);
  if ((*v68 & 7) == 4 && *(a2 + 58) && *(a2 + 56) && *(a2 + 57))
  {
    v8 = *(a2 + 48) - *(a2 + 64);
    v68[1] += v8;
  }

  else
  {
    ++v68[1];
    v8 = 1;
  }

LABEL_98:
  if (a3)
  {
    *a3 = v8;
  }
}

void FigPartialSampleTableFinishWriting(uint64_t a1)
{
  if (!a1 || !*(a1 + 176))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
    OUTLINED_FUNCTION_843();

    FigSignalErrorAtGM();
    return;
  }

  v2 = *(a1 + 168);
  v3 = *(a1 + 184);
  if (v3)
  {
    v2 += *v3;
  }

  v4 = 0;
  v5 = 16;
  while (1)
  {
    v7 = (a1 + v4 + 192);
    v6 = *v7;
    if (v7 == *(a1 + 184))
    {
      if (v6)
      {
        *(*(a1 + 16) + v5) = *(a1 + 168);
      }

      goto LABEL_14;
    }

    if (v6)
    {
      break;
    }

LABEL_14:
    v4 += 40;
    v5 += 8;
    if (v4 == 680)
    {
      goto LABEL_15;
    }
  }

  destination = 0;
  lengthAtOffsetOut = 0;
  if (*v7 <= CMBlockBufferGetDataLength(*(a1 + v4 + 208)))
  {
    if (CMBlockBufferGetDataPointer(*(a1 + 176), v2, &lengthAtOffsetOut, 0, &destination) || CMBlockBufferCopyDataBytes(*(a1 + v4 + 208), 0, *v7, destination))
    {
      goto LABEL_16;
    }

    *(*(a1 + 16) + v5) = v2;
    v2 += *v7;
    goto LABEL_14;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_20_0();
  if (!FigSignalErrorAtGM())
  {
LABEL_15:
    *(a1 + 24) = *(a1 + 176);
    *(a1 + 176) = 0;
  }

LABEL_16:
  OUTLINED_FUNCTION_843();
}

uint64_t FigPartialSampleTableCreateForWriting(int a1, CMBlockBufferRef theBuffer, uint64_t a3, uint64_t *a4)
{
  totalLengthOut = 0;
  dataPointerOut = 0;
  if (!a4 || !theBuffer)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();

    return FigSignalErrorAtGM();
  }

  DataPointer = CMBlockBufferAssureBlockMemory(theBuffer);
  if (DataPointer)
  {
    return DataPointer;
  }

  DataPointer = CMBlockBufferGetDataPointer(theBuffer, 0, 0, &totalLengthOut, &dataPointerOut);
  if (DataPointer)
  {
    return DataPointer;
  }

  if ((dataPointerOut & 3) != 0 || !CMBlockBufferIsRangeContiguous(theBuffer, 0, totalLengthOut))
  {
    goto LABEL_26;
  }

  if (_MergedGlobals_143 != -1)
  {
    dispatch_once_f(&_MergedGlobals_143, 0, fpst_registerFigPartialSampleTableType);
  }

  Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
LABEL_26:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
    return FigSignalErrorAtGM();
  }

  v9 = Instance;
  *(Instance + 160) = totalLengthOut;
  *(Instance + 176) = theBuffer;
  CFRetain(theBuffer);
  v10 = CMBlockBufferGetDataPointer(*(v9 + 176), 0, 0, 0, (v9 + 16));
  if (v10)
  {
    goto LABEL_29;
  }

  bzero(*(v9 + 16), 0x98uLL);
  **(v9 + 16) = a3;
  *(v9 + 160) -= 152;
  *(v9 + 168) = 152;
  v11 = CFGetAllocator(v9);
  blockBufferOut = 0;
  if (!*(v9 + 16))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
    v10 = FigSignalErrorAtGM();
    if (!v10)
    {
LABEL_18:
      v18 = 0;
      *a4 = v9;
      return v18;
    }

LABEL_29:
    v18 = v10;
    goto LABEL_22;
  }

  v12 = v11;
  v13 = 0;
  v14 = 1;
  while (1)
  {
    v15 = v9 + v13;
    if (!v13)
    {
      break;
    }

    v16 = fpst_sizeForChangeType(v14);
    *(v15 + 200) = 8;
    CMBlockBufferCreateWithMemoryBlock(v12, 0, 4 * v16 + 40, v12, 0, 0, 4 * v16 + 40, 0, &blockBufferOut);
LABEL_17:
    *(v9 + v13 + 208) = blockBufferOut;
    blockBufferOut = 0;
    ++v14;
    v13 += 40;
    if (v13 == 680)
    {
      goto LABEL_18;
    }
  }

  v17 = CMBlockBufferCreateWithBufferReference(v12, *(v9 + 176), *(v9 + 168), *(v9 + 160), 0, &blockBufferOut);
  if (!v17)
  {
    *(v9 + 184) = v15 + 192;
    goto LABEL_17;
  }

  v18 = v17;
  if (blockBufferOut)
  {
    CFRelease(blockBufferOut);
  }

LABEL_22:
  CFRelease(v9);
  return v18;
}

uint64_t FigPartialSampleTableCreateAccessorAtIndex(void *a1, uint64_t a2, CFTypeRef **a3)
{
  if (!a1 || a2 < 0 || *(a1[2] + 8) <= a2)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    v7 = FigSignalErrorAtGM();
    goto LABEL_8;
  }

  v6 = malloc_type_calloc(1uLL, 0x98uLL, 0x102004019573705uLL);
  bzero(v6 + 1, 0x90uLL);
  if (*v6)
  {
    CFRelease(*v6);
  }

  *v6 = a1;
  CFRetain(a1);
  v7 = fpst_accessor_moveToSampleIndex(v6, a2);
  if (!v7)
  {
    *a3 = v6;
LABEL_8:
    v6 = 0;
  }

  free(v6);
  return v7;
}

uint64_t fpst_accessor_moveToSampleIndex(uint64_t *a1, uint64_t a2)
{
  if (a1[18] == a2)
  {
    return 0;
  }

  dataPointerOut[11] = v2;
  dataPointerOut[12] = v3;
  v6 = *a1;
  v7 = a1 + 1;
  for (i = 1; i != 18; ++i)
  {
    v9 = &v7[i];
    if (a2)
    {
      v10 = a1[18];
      if (*(*(v6 + 16) + 8) - 1 == a2)
      {
        dataPointerOut[0] = 0;
        result = fpst_reading_runForType(v6, i, dataPointerOut);
        if (result == -17712)
        {
          continue;
        }

        if (result)
        {
          return result;
        }

        *(v9 - 1) = *dataPointerOut[0] - 1;
      }

      if (v10 >= a2)
      {
LABEL_16:
        if (v10 > a2)
        {
          dataPointerOut[0] = 0;
          v21 = OUTLINED_FUNCTION_178();
          result = fpst_reading_runForType(v21, v22, v23);
          if (result != -17712)
          {
            if (result)
            {
              return result;
            }
          }
        }
      }

      else
      {
        v12 = i - 1;
        while (1)
        {
          dataPointerOut[0] = 0;
          v13 = OUTLINED_FUNCTION_178();
          result = fpst_reading_runForType(v13, v14, v15);
          if (result == -17712)
          {
            break;
          }

          if (result)
          {
            return result;
          }

          v16 = v7[v12] + 1;
          if (v16 >= MEMORY[0])
          {
            break;
          }

          v17 = OUTLINED_FUNCTION_178();
          result = fpst_reading_runSegmentAtIndex(v17, v18, v16, v19);
          if (result)
          {
            return result;
          }

          v20 = dataPointerOut[0];
          if (*dataPointerOut[0] > a2)
          {
            break;
          }

          v7[v12] = v16;
          v10 = *v20;
          if (*v20 >= a2)
          {
            goto LABEL_16;
          }
        }
      }
    }

    else
    {
      *(v9 - 1) = 0;
    }
  }

  result = 0;
  a1[18] = a2;
  return result;
}

uint64_t FigPartialSampleTableAccessorStepInDecodeOrder(uint64_t *a1, uint64_t a2, uint64_t *a3)
{
  if (!a1)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
    result = FigSignalErrorAtGM();
    goto LABEL_15;
  }

  if (!a2)
  {
    result = 0;
LABEL_15:
    v8 = 0;
    if (!a3)
    {
      return result;
    }

    goto LABEL_10;
  }

  v4 = a1[18];
  v5 = v4 + a2;
  if (v4 + a2 < 0 != __OFADD__(v4, a2))
  {
    v6 = -v4;
  }

  else
  {
    v6 = a2;
  }

  v7 = *(*(*a1 + 16) + 8);
  if (v5 >= v7)
  {
    v8 = ~v5 + a2 + v7;
  }

  else
  {
    v8 = v6;
  }

  result = fpst_accessor_moveToSampleIndex(a1, v8 + v4);
  if (a3)
  {
LABEL_10:
    if (!result)
    {
      *a3 = v8;
    }
  }

  return result;
}

void FigPartialSampleTableAccessorGetUnrefinedSampleLocationInByteStreamOrDataSourceURL(uint64_t *a1, unint64_t a2, unint64_t a3, unint64_t a4, unint64_t a5)
{
  v24 = 0;
  if (!a1)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    goto LABEL_20;
  }

  if (!(a2 | a3))
  {
    goto LABEL_29;
  }

  if (fpst_reading_runSegmentAtIndex(*a1, 1, a1[1], &v24))
  {
    goto LABEL_35;
  }

  v10 = v24[2];
  v11 = v24[1] + (a1[18] - *v24) * v10;
  if (a2)
  {
    *a2 = v11;
    *(a2 + 8) = v10;
  }

  if (!a3)
  {
    goto LABEL_29;
  }

  fpst_reading_runSegmentAtIndex(*a1, 2, a1[2], &v24);
  OUTLINED_FUNCTION_33_12();
  if (v13)
  {
    v16 = 0;
    v17 = 0;
    v14 = 1;
  }

  else
  {
    if (v12)
    {
      goto LABEL_35;
    }

    v14 = 0;
    OUTLINED_FUNCTION_10_80();
    v16 = v15 + v11;
    v17 = 1;
  }

  *a3 = v16;
  v18 = fpst_reading_runSegmentAtIndex(*a1, 3, a1[3], &v24);
  if (!v17 || (OUTLINED_FUNCTION_33_12(), !v13))
  {
    v19 = v18 ? 0 : v14;
    if (v19 != 1)
    {
      OUTLINED_FUNCTION_33_12();
      if (v13)
      {
        v22 = 0;
LABEL_28:
        *(a3 + 8) = v22;
LABEL_29:
        if (a4 | a5 && !fpst_reading_runSegmentAtIndex(*a1, 6, a1[6], &v24))
        {
          if (a4)
          {
            OUTLINED_FUNCTION_10_80();
            *a4 = v23;
          }

          if (a5)
          {
            *a5 = v24[2];
          }
        }

        goto LABEL_35;
      }

      if (!v21)
      {
        OUTLINED_FUNCTION_10_80();
        goto LABEL_28;
      }

LABEL_35:
      OUTLINED_FUNCTION_843();
      return;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_3_5();
LABEL_20:
  OUTLINED_FUNCTION_843();

  FigSignalErrorAtGM();
}

void FigPartialSampleTableAccessorGetUnrefinedSampleLocationInByteSource(uint64_t *a1, unint64_t a2, unint64_t a3, void *a4)
{
  v21 = 0;
  if (!a1)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
    goto LABEL_20;
  }

  v7 = a1;
  if (!(a2 | a3))
  {
    goto LABEL_29;
  }

  a1 = fpst_reading_runSegmentAtIndex(*a1, 1, a1[1], &v21);
  if (a1)
  {
    goto LABEL_32;
  }

  v8 = v21[2];
  v9 = v21[1] + (v7[18] - *v21) * v8;
  if (a2)
  {
    *a2 = v9;
    *(a2 + 8) = v8;
  }

  if (!a3)
  {
    goto LABEL_29;
  }

  fpst_reading_runSegmentAtIndex(*v7, 2, v7[2], &v21);
  OUTLINED_FUNCTION_33_12();
  if (v11)
  {
    v14 = 0;
    v15 = 0;
    v12 = 1;
  }

  else
  {
    if (v10)
    {
      goto LABEL_32;
    }

    v12 = 0;
    OUTLINED_FUNCTION_10_80();
    v14 = v13 + v9;
    v15 = 1;
  }

  *a3 = v14;
  v16 = fpst_reading_runSegmentAtIndex(*v7, 3, v7[3], &v21);
  if (!v15 || (OUTLINED_FUNCTION_33_12(), !v11))
  {
    v17 = v16 ? 0 : v12;
    if (v17 != 1)
    {
      OUTLINED_FUNCTION_33_12();
      if (v11)
      {
        v19 = 0;
LABEL_28:
        *(a3 + 8) = v19;
LABEL_29:
        if (a4 && !OUTLINED_FUNCTION_25_38(a1))
        {
          OUTLINED_FUNCTION_10_80();
          *a4 = v20;
        }

        goto LABEL_32;
      }

      if (!a1)
      {
        OUTLINED_FUNCTION_10_80();
        goto LABEL_28;
      }

LABEL_32:
      OUTLINED_FUNCTION_652();
      return;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_20_0();
LABEL_20:
  OUTLINED_FUNCTION_652();

  FigSignalErrorAtGM();
}

void FigPartialSampleTableAccessorGetChunkDetailsInByteSource(uint64_t a1, __n128 *a2, void *a3, __n128 *a4, unint64_t a5)
{
  v30 = 0;
  if (!a1)
  {
    goto LABEL_16;
  }

  if (a2)
  {
    v9 = OUTLINED_FUNCTION_23_48(a1);
    if (v9)
    {
      goto LABEL_15;
    }

    *a2 = OUTLINED_FUNCTION_22_41(v9, v10, v11, v12, v13, v14, v15, v16, v29, 0);
  }

  if (!a3)
  {
    goto LABEL_8;
  }

  if (OUTLINED_FUNCTION_25_38(a1))
  {
LABEL_15:
    OUTLINED_FUNCTION_652();
    return;
  }

  OUTLINED_FUNCTION_10_80();
  *a3 = v17;
LABEL_8:
  if (!(a4 | a5))
  {
    goto LABEL_15;
  }

  v18 = OUTLINED_FUNCTION_24_37(a1);
  if (v18)
  {
    goto LABEL_15;
  }

  if (a4)
  {
    *a4 = OUTLINED_FUNCTION_22_41(v18, v19, v20, v21, v22, v23, v24, v25, v29, v30);
  }

  if (!a5)
  {
    goto LABEL_15;
  }

  OUTLINED_FUNCTION_11_76();
  if (!v27)
  {
    *a5 = v26;
    goto LABEL_15;
  }

LABEL_16:
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  OUTLINED_FUNCTION_652();

  FigSignalErrorAtGM();
}

void FigPartialSampleTableAccessorGetChunkDetailsInByteStreamOrDataSourceURL(uint64_t a1, __n128 *a2, unint64_t a3, unint64_t a4, __n128 *a5, unint64_t a6)
{
  v33 = 0;
  if (!a1)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    goto LABEL_21;
  }

  v11 = a1;
  if (a2)
  {
    v12 = OUTLINED_FUNCTION_23_48(a1);
    if (v12)
    {
      goto LABEL_18;
    }

    *a2 = OUTLINED_FUNCTION_22_41(v12, v13, v14, v15, v16, v17, v18, v19, v32, v33);
  }

  if (a3 | a4)
  {
    a1 = fpst_reading_runSegmentAtIndex(*v11, 6, v11[6], &v33);
    if (!a1)
    {
      if (a3)
      {
        OUTLINED_FUNCTION_10_80();
        *a3 = v20;
      }

      if (a4)
      {
        *a4 = *(v33 + 16);
      }

      goto LABEL_11;
    }

LABEL_18:
    OUTLINED_FUNCTION_843();
    return;
  }

LABEL_11:
  if (!(a5 | a6))
  {
    goto LABEL_18;
  }

  v21 = OUTLINED_FUNCTION_24_37(a1);
  if (v21)
  {
    goto LABEL_18;
  }

  if (a5)
  {
    *a5 = OUTLINED_FUNCTION_22_41(v21, v22, v23, v24, v25, v26, v27, v28, v32, v33);
  }

  if (!a6)
  {
    goto LABEL_18;
  }

  OUTLINED_FUNCTION_11_76();
  if (!v30)
  {
    *a6 = v29;
    goto LABEL_18;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
LABEL_21:
  OUTLINED_FUNCTION_843();

  FigSignalErrorAtGM();
}

void FigPartialSampleTableAccessorGetFormatDescriptionIdentifier(uint64_t *a1, void *a2)
{
  if (a1)
  {
    if (a2)
    {
      v3 = OUTLINED_FUNCTION_14_70(*a1);
      if (!fpst_reading_runSegmentAtIndex(v3, 17, v4, v5))
      {
        OUTLINED_FUNCTION_10_80();
        *a2 = v6;
      }
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();

    FigSignalErrorAtGM();
  }
}

void FigPartialSampleTableAccessorGetSyncInfo(uint64_t *a1, void *a2)
{
  if (a1)
  {
    if (a2)
    {
      v3 = OUTLINED_FUNCTION_14_70(*a1);
      if (!fpst_reading_runSegmentAtIndex(v3, 9, v4, v5))
      {
        OUTLINED_FUNCTION_10_80();
        *a2 = v6;
      }
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();

    FigSignalErrorAtGM();
  }
}

uint64_t FigPartialSampleTableAccessorGetDependencyInfo(uint64_t *a1, uint64_t a2)
{
  if (a1)
  {
    if (a2)
    {
      v3 = OUTLINED_FUNCTION_14_70(*a1);
      result = fpst_reading_runSegmentAtIndex(v3, 8, v4, v5);
      if (!result)
      {
        v7 = MEMORY[0xC];
        *a2 = MEMORY[8];
        *(a2 + 4) = v7;
      }
    }

    else
    {
      return 0;
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t FigPartialSampleTableAccessorGetExtendedDependencyAttributeInfo(uint64_t *a1, uint64_t a2)
{
  if (a1)
  {
    if (a2)
    {
      v3 = OUTLINED_FUNCTION_14_70(*a1);
      result = fpst_reading_runSegmentAtIndex(v3, 13, v4, v5);
      if (!result)
      {
        v7 = MEMORY[0x28];
        v8 = MEMORY[0x18];
        *a2 = MEMORY[8];
        *(a2 + 16) = v8;
        *(a2 + 32) = v7;
      }
    }

    else
    {
      return 0;
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t FigPartialSampleTableAccessorGetDecodeToPresentationTimeDeltaRange(uint64_t *a1, uint64_t a2, uint64_t a3)
{
  if (a1)
  {
    v5 = OUTLINED_FUNCTION_14_70(*a1);
    result = fpst_reading_runSegmentAtIndex(v5, 15, v6, v7);
    if (!result)
    {
      if (a2)
      {
        v9 = MEMORY[0x18];
        *a2 = MEMORY[8];
        *(a2 + 16) = v9;
      }

      result = 0;
      if (a3)
      {
        v10 = MEMORY[0x30];
        *a3 = MEMORY[0x20];
        *(a3 + 16) = v10;
      }
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t FigPartialSampleTableAccessorCopyUnrefinedSampleLocationInTranslatedByteStreamOrDataSourceURL(uint64_t *a1, unint64_t a2, unint64_t a3, CFTypeRef *a4, CFTypeRef *a5)
{
  v16 = 0;
  cf = 0;
  v14 = 0;
  v15 = 0;
  if (!a1)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    goto LABEL_16;
  }

  v7 = *a1;
  v8 = *(*a1 + 72);
  FigPartialSampleTableAccessorGetUnrefinedSampleLocationInByteStreamOrDataSourceURL(a1, a2, a3, &v15, &v14);
  if (v9)
  {
    goto LABEL_17;
  }

  if (a4 && v15)
  {
    v10 = *(v7 + 40);
    if (!v10)
    {
LABEL_15:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
LABEL_16:
      v9 = FigSignalErrorAtGM();
      goto LABEL_17;
    }

    v9 = v10(v8);
    if (v9)
    {
LABEL_17:
      v12 = v9;
      goto LABEL_18;
    }
  }

  if (!a5 || !v14)
  {
    goto LABEL_11;
  }

  v11 = *(v7 + 48);
  if (!v11)
  {
    goto LABEL_15;
  }

  v9 = v11(v8);
  if (v9)
  {
    goto LABEL_17;
  }

LABEL_11:
  if (a4)
  {
    *a4 = cf;
    cf = 0;
  }

  v12 = 0;
  if (a5)
  {
    *a5 = v16;
    v16 = 0;
  }

LABEL_18:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v16)
  {
    CFRelease(v16);
  }

  return v12;
}

void FigPartialSampleTableAccessorCopyTranslatedFormatDescription(uint64_t *a1, CFTypeRef *a2)
{
  v8 = 0;
  cf = 0;
  if (a1)
  {
    v3 = *a1;
    v4 = *(*a1 + 72);
    FigPartialSampleTableAccessorGetFormatDescriptionIdentifier(a1, &v8);
    if (!v5 && a2 && v8)
    {
      v6 = *(v3 + 56);
      if (v6)
      {
        if (v6(v4))
        {
          if (cf)
          {
            CFRelease(cf);
          }
        }

        else
        {
          *a2 = cf;
        }
      }

      else
      {
        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_4();
        FigSignalErrorAtGM();
      }
    }

    OUTLINED_FUNCTION_652();
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    OUTLINED_FUNCTION_652();

    FigSignalErrorAtGM();
  }
}

uint64_t FigPartialSampleTableAccessorCopyChunkDetailsInTranslatedByteStreamOrDataSourceURL(uint64_t a1, __n128 *a2, CFTypeRef *a3, CFTypeRef *a4, __n128 *a5, unint64_t a6)
{
  v17 = 0;
  cf = 0;
  v15 = 0;
  v16 = 0;
  if (!a1)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    goto LABEL_16;
  }

  v8 = *a1;
  v9 = *(*a1 + 72);
  FigPartialSampleTableAccessorGetChunkDetailsInByteStreamOrDataSourceURL(a1, a2, &v16, &v15, a5, a6);
  if (v10)
  {
    goto LABEL_17;
  }

  if (a3 && v16)
  {
    v11 = *(v8 + 40);
    if (!v11)
    {
LABEL_15:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
LABEL_16:
      v10 = FigSignalErrorAtGM();
      goto LABEL_17;
    }

    v10 = v11(v9);
    if (v10)
    {
LABEL_17:
      v13 = v10;
      goto LABEL_18;
    }
  }

  if (!a4 || !v15)
  {
    goto LABEL_11;
  }

  v12 = *(v8 + 48);
  if (!v12)
  {
    goto LABEL_15;
  }

  v10 = v12(v9);
  if (v10)
  {
    goto LABEL_17;
  }

LABEL_11:
  if (a3)
  {
    *a3 = cf;
    cf = 0;
  }

  v13 = 0;
  if (a4)
  {
    *a4 = v17;
    v17 = 0;
  }

LABEL_18:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v17)
  {
    CFRelease(v17);
  }

  return v13;
}

void fpst_writing_reserveMemoryForChangeType(void *a1, int a2, size_t a3, void **a4)
{
  v21 = 0;
  lengthAtOffsetOut = 0;
  v4 = a1[20];
  v5 = v4 > a3;
  v6 = v4 - a3;
  if (v5)
  {
    v11 = &a1[5 * a2];
    a1[20] = v6;
    if (!CMBlockBufferAssureBlockMemory(v11[21]))
    {
      DataLength = CMBlockBufferGetDataLength(v11[21]);
      v13 = v11[19];
      if (DataLength == v13)
      {
        v14 = CFGetAllocator(a1);
        v15 = fpst_sizeForChangeType(a2) + 8;
        v17 = v11[20];
        v16 = v11[21];
        v18 = v15 * v17;
        v19 = 2 * v17;
        if (v17 >= 512)
        {
          v19 = 1024;
        }

        v11[20] = v19;
        if (CMBlockBufferAppendMemoryBlock(v16, 0, v18, v14, 0, 0, v18, 1u))
        {
          goto LABEL_12;
        }

        v13 = v11[19];
      }

      if (!CMBlockBufferGetDataPointer(v11[21], v13, &lengthAtOffsetOut, 0, &v21))
      {
        if (lengthAtOffsetOut < a3)
        {
          fig_log_get_emitter();
          OUTLINED_FUNCTION_0_4();
          FigSignalErrorAtGM();
        }

        else
        {
          bzero(v21, a3);
          v11[19] += a3;
          *a4 = v21;
        }
      }
    }

LABEL_12:
    OUTLINED_FUNCTION_652();
    return;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  OUTLINED_FUNCTION_652();

  FigSignalErrorAtGM();
}

uint64_t FigPartialSampleTableCreateFromBlockBufferUsingTranslationCallbacks_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableCreateFromBlockBufferUsingTranslationCallbacks_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpst_outOfBandRegistry_copyByteStreamTranslatedFromOutOfBandID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpst_outOfBandRegistry_copyDataSourceTranslatedFromOutOfBandID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpst_outOfBandRegistry_copyFormatDescriptionTranslatedFromOutOfBandID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpst_accessor_stepByDecodeTimeInternal_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpst_accessor_stepByDecodeTimeInternal_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpst_accessor_stepByDecodeTimeInternal_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorStepInPresentationOrder_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorStepInPresentationOrder_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableGetDecodeTimeRange_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableGetDecodeTimeRange_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableGetDecodeTimeRange_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorGetSampleTiming_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorGetSampleTiming_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorGetMinimumUpcomingPresentationTime_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorGetPresentationTimeRange_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorCopy_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorCopy_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorCopy_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableGetSampleCount_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableGetSampleCount_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableRecommendSampleTableFlagsForCursor_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorCopyTranslatedSampleDependencyAttributes_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableAccessorCopyTranslatedSampleDependencyAttributes_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableBuildFromFigSampleCursorAndWriteToBlockBuffer_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableBuildFromFigSampleCursorAndWriteToBlockBuffer_cold_2(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t FigPartialSampleTableBuildFromFigSampleCursorAndWriteToBlockBuffer_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableBuildFromFigSampleCursorAndWriteToBlockBuffer_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableBuildFromFigSampleCursorAndWriteToBlockBuffer_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableBuildFromFigSampleCursorAndWriteToBlockBuffer_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableBuildFromFigSampleCursorAndWriteToBlockBuffer_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigPartialSampleTableOutOfBandObjectRegistryCreate_cold_2(uint64_t a1, const void *a2, _DWORD *a3)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a3 = FigSignalErrorAtGM();

  CFRelease(a2);
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryCreate_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupAndRetainObjectForID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupAndRetainObjectForID_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupAndRetainObjectForID_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupAndRetainObjectForID_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupAndRetainObjectForID_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupAndRetainObjectForID_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryRegisterObjectForKnownID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryRegisterObjectForKnownID_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryRegisterObjectForKnownID_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryRegisterObjectForKnownID_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryRegisterObjectForKnownID_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryRegisterObjectForKnownID_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryRegisterObjectForKnownID_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupOrMakeIDForObjectOfType_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupOrMakeIDForObjectOfType_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupOrMakeIDForObjectOfType_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupOrMakeIDForObjectOfType_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupOrMakeIDForObjectOfType_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupOrMakeIDForObjectOfType_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPartialSampleTableOutOfBandObjectRegistryLookupOrMakeIDForObjectOfType_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fpst_reading_runSegmentAtIndex_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAgglomeratorNew_cold_1(const void **a1, uint64_t a2, _DWORD *a3)
{
  v5 = FigSignalErrorAtGM();
  *a3 = v5;
  if (!v5)
  {
    return 1;
  }

  FigAgglomeratorDispose(a1);
  return 0;
}

uint64_t FigAgglomeratorSetObjectForKey_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAgglomeratorSetObjectForKey_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void audioRenderer_underrunTimerFire()
{
  v0 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v0)
  {
    v1 = v0;
    CMBaseObjectGetDerivedStorage();
    FigSimpleMutexLock();
    audioRenderer_updateUnderrunState(v1);
    FigSimpleMutexUnlock();

    CFRelease(v1);
  }
}

uint64_t audioRenderer_setPropertyOnAudioRenderPipeline(uint64_t a1, const void *a2, const void *a3, int a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v8 = *(DerivedStorage + 56);
  if (!v8)
  {
    if (a4 != 1)
    {
      return 0;
    }

LABEL_8:
    if (a3)
    {
      v12 = a3;
    }

    else
    {
      v12 = *MEMORY[0x1E695E738];
    }

    CFDictionarySetValue(*(DerivedStorage + 80), a2, v12);
    return 0;
  }

  FigBaseObject = FigRenderPipelineGetFigBaseObject(v8);
  v10 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v10)
  {
    return 4294954514;
  }

  result = v10(FigBaseObject, a2, a3);
  if (a4 == 1 && !result)
  {
    goto LABEL_8;
  }

  return result;
}

uint64_t audioRenderer_invalidate(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = *DerivedStorage;
  if (*DerivedStorage)
  {
    FigSimpleMutexLock();
  }

  if (!*(DerivedStorage + 473))
  {
    *(DerivedStorage + 473) = 1;
    audioRenderer_tearDownFARP(a1, 0);
    audioRenderer_removeNotificationListenerFromTimebase(a1, *(DerivedStorage + 24));
    FigStopForwardingMediaServicesProcessDeathNotification();
    v4 = *(DerivedStorage + 160);
    if (v4)
    {
      CFRelease(v4);
      *(DerivedStorage + 160) = 0;
    }

    v5 = *(DerivedStorage + 64);
    if (v5)
    {
      CFRelease(v5);
      *(DerivedStorage + 64) = 0;
    }

    audioRenderer_bapOutputRemoveWeakListeners(a1, *(DerivedStorage + 72));
    v6 = *(DerivedStorage + 72);
    if (v6)
    {
      CFRelease(v6);
      *(DerivedStorage + 72) = 0;
    }

    v7 = *(DerivedStorage + 24);
    if (v7)
    {
      CFRelease(v7);
      *(DerivedStorage + 24) = 0;
    }

    v8 = *(DerivedStorage + 88);
    if (v8)
    {
      CFRelease(v8);
      *(DerivedStorage + 88) = 0;
    }

    v9 = *(DerivedStorage + 112);
    if (v9)
    {
      CFRelease(v9);
      *(DerivedStorage + 112) = 0;
    }

    v10 = *(DerivedStorage + 120);
    if (v10)
    {
      CFRelease(v10);
      *(DerivedStorage + 120) = 0;
    }

    v11 = *(DerivedStorage + 128);
    if (v11)
    {
      CFRelease(v11);
      *(DerivedStorage + 128) = 0;
    }

    v12 = *(DerivedStorage + 144);
    if (v12)
    {
      CFRelease(v12);
      *(DerivedStorage + 144) = 0;
    }

    v13 = *(DerivedStorage + 80);
    if (v13)
    {
      CFRelease(v13);
      *(DerivedStorage + 80) = 0;
    }

    v14 = *(DerivedStorage + 176);
    if (v14)
    {
      CFRelease(v14);
      *(DerivedStorage + 176) = 0;
    }

    v15 = *(DerivedStorage + 184);
    if (v15)
    {
      CFRelease(v15);
      *(DerivedStorage + 184) = 0;
    }

    v16 = *(DerivedStorage + 200);
    if (v16)
    {
      CFRelease(v16);
      *(DerivedStorage + 200) = 0;
    }

    v17 = *(DerivedStorage + 480);
    if (v17)
    {
      CFRelease(v17);
      *(DerivedStorage + 480) = 0;
    }

    v18 = *(DerivedStorage + 168);
    if (v18)
    {
      CFRelease(v18);
      *(DerivedStorage + 168) = 0;
    }

    v19 = *(DerivedStorage + 408);
    if (v19)
    {
      CFRelease(v19);
      *(DerivedStorage + 408) = 0;
    }

    if (FPSupport_GetAudioSpatializationPreferencesMonitor())
    {
      CMNotificationCenterGetDefaultLocalCenter();
      FPSupport_GetAudioSpatializationPreferencesMonitor();
      FigNotificationCenterRemoveWeakListener();
    }

    if (*(DerivedStorage + 208))
    {
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_7_108();
      FigNotificationCenterRemoveWeakListener();
      v20 = *(DerivedStorage + 208);
      if (v20)
      {
        CFRelease(v20);
        *(DerivedStorage + 208) = 0;
      }
    }

    v21 = *(DerivedStorage + 352);
    if (v21)
    {
      dispatch_source_cancel(v21);
      v22 = *(DerivedStorage + 352);
      if (v22)
      {
        dispatch_release(v22);
        *(DerivedStorage + 352) = 0;
      }
    }
  }

  if (v3)
  {
    FigSimpleMutexUnlock();
  }

  return 0;
}

uint64_t audioRenderer_finalize(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  audioRenderer_invalidate(a1);
  v3 = DerivedStorage[1];
  if (v3)
  {
    dispatch_release(v3);
  }

  v4 = DerivedStorage[2];
  if (v4)
  {
    dispatch_release(v4);
  }

  result = *DerivedStorage;
  if (*DerivedStorage)
  {
    result = FigSimpleMutexDestroy();
    *DerivedStorage = 0;
  }

  return result;
}

uint64_t audioRenderer_copyProperty(uint64_t a1, const void *a2, uint64_t a3, void *a4)
{
  CMBaseObjectGetDerivedStorage();
  v8 = 4294950916;
  if (a2 && a4)
  {
    OUTLINED_FUNCTION_44_28();
    if (*(v4 + 473))
    {
      v8 = 4294954511;
      goto LABEL_19;
    }

    if (CFEqual(a2, @"IsBelowLowWaterLevel"))
    {
      v9 = *(v4 + 48);
      if (!v9)
      {
        goto LABEL_14;
      }

      goto LABEL_6;
    }

    if (CFEqual(a2, @"IsBelowPrerollLevel"))
    {
      if (!*(v4 + 48))
      {
        goto LABEL_14;
      }

      if (*(*(CMBaseObjectGetVTable() + 16) + 104))
      {
        v9 = *(v4 + 48);
        v10 = *(*(CMBaseObjectGetVTable() + 16) + 104);
        if (v10)
        {
LABEL_7:
          if (!v10(v9))
          {
            goto LABEL_15;
          }

LABEL_14:
          v11 = MEMORY[0x1E695E4D0];
LABEL_16:
          v12 = *v11;
LABEL_17:
          v12 = CFRetain(v12);
LABEL_18:
          v8 = 0;
          *a4 = v12;
LABEL_19:
          FigSimpleMutexUnlock();
          return v8;
        }

LABEL_15:
        v11 = MEMORY[0x1E695E4C0];
        goto LABEL_16;
      }

      v9 = *(v4 + 48);
LABEL_6:
      v10 = *(*(CMBaseObjectGetVTable() + 16) + 24);
      if (v10)
      {
        goto LABEL_7;
      }

      goto LABEL_15;
    }

    if (CFEqual(a2, @"Muted"))
    {
      v11 = MEMORY[0x1E695E4D0];
      if (!*(v4 + 104))
      {
        v11 = MEMORY[0x1E695E4C0];
      }

      goto LABEL_16;
    }

    if (CFEqual(a2, @"Volume"))
    {
      v12 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberFloat32Type, (v4 + 108));
      goto LABEL_18;
    }

    if (CFEqual(a2, @"VolumeCurves"))
    {
      v12 = *(v4 + 112);
      if (!v12)
      {
        goto LABEL_18;
      }

      goto LABEL_17;
    }

    if (CFEqual(a2, @"AudioOutputDeviceUniqueID"))
    {
      v12 = *(v4 + 120);
      if (!v12)
      {
        goto LABEL_18;
      }

      goto LABEL_17;
    }

    if (CFEqual(a2, @"AudioTimePitchAlgorithm"))
    {
      if (!*(v4 + 136))
      {
        v12 = *(v4 + 128);
        if (!v12)
        {
          goto LABEL_18;
        }

        goto LABEL_17;
      }

LABEL_62:
      v16 = FigSignalErrorAtGM();
      goto LABEL_45;
    }

    if (CFEqual(a2, @"AudioProcessingTap"))
    {
      v12 = *(v4 + 144);
      if (!v12)
      {
        goto LABEL_18;
      }

      goto LABEL_17;
    }

    if (CFEqual(a2, @"WillTrimShortDurationSamples"))
    {
      v14 = *(v4 + 56);
      if (v14)
      {
        FigBaseObject = FigRenderPipelineGetFigBaseObject(v14);
        v16 = CMBaseObjectCopyProperty(FigBaseObject, @"WillTrimShortDurationSamples", a3, a4);
LABEL_45:
        v8 = v16;
        goto LABEL_19;
      }

      v17 = MEMORY[0x1E695E4D0];
    }

    else
    {
      if (CFEqual(a2, @"ShouldFillDiscontinuitiesWithSilence"))
      {
        v17 = MEMORY[0x1E695E4D0];
        v18 = *(v4 + 103);
      }

      else if (CFEqual(a2, @"ShouldAttemptImmediatePlaybackStart"))
      {
        v17 = MEMORY[0x1E695E4D0];
        v18 = *(v4 + 100);
      }

      else if (CFEqual(a2, @"NonBAOPlaybackIsDisallowed"))
      {
        v17 = MEMORY[0x1E695E4D0];
        v18 = *(v4 + 101);
      }

      else
      {
        if (!CFEqual(a2, @"FARPAlwaysNotifyLatencyChange"))
        {
          if (CFEqual(a2, @"IsUnaccompaniedByVisuals"))
          {
            v12 = *(v4 + 200);
            if (!v12)
            {
              goto LABEL_18;
            }

            goto LABEL_17;
          }

          goto LABEL_62;
        }

        v17 = MEMORY[0x1E695E4D0];
        v18 = *(v4 + 102);
      }

      if (!v18)
      {
        v17 = MEMORY[0x1E695E4C0];
      }
    }

    v12 = *v17;
    if (!*v17)
    {
      goto LABEL_18;
    }

    goto LABEL_17;
  }

  return v8;
}

void audioRenderer_tearDownFARP(uint64_t a1, int a2)
{
  v32 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v23 = *MEMORY[0x1E6960C70];
  *&v24.value = *MEMORY[0x1E6960C70];
  v6 = *(MEMORY[0x1E6960C70] + 16);
  v24.epoch = v6;
  if (dword_1EAF17BD8 >= 2)
  {
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_46();
    if (v2)
    {
      if (a1)
      {
        v8 = (CMBaseObjectGetDerivedStorage() + 488);
      }

      else
      {
        v8 = "";
      }

      v9 = *(DerivedStorage + 56);
      v10 = "FrameworkInit";
      *v25 = 136316162;
      *&v25[4] = "audioRenderer_tearDownFARP";
      *&v25[12] = 2048;
      if (!a2)
      {
        v10 = "ClientInit";
      }

      *&v25[14] = a1;
      *&v25[22] = 2082;
      v26 = v8;
      v27 = 2048;
      v28 = v9;
      v29 = 2080;
      v30 = v10;
      OUTLINED_FUNCTION_5_138();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_238_0();
  }

  if (*(DerivedStorage + 56))
  {
    if (*(CMBaseObjectGetDerivedStorage() + 56))
    {
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_26_38();
      FigNotificationCenterRemoveWeakListener();
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_28_35();
      FigNotificationCenterRemoveWeakListener();
      CMNotificationCenterGetDefaultLocalCenter();
      FigNotificationCenterRemoveWeakListener();
      CMNotificationCenterGetDefaultLocalCenter();
      FigNotificationCenterRemoveWeakListener();
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_27_34();
      FigNotificationCenterRemoveWeakListener();
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_25_39();
      FigNotificationCenterRemoveWeakListener();
    }

    CMTimebaseGetTime(&v24, *(DerivedStorage + 24));
    FigBaseObject = FigRenderPipelineGetFigBaseObject(*(DerivedStorage + 56));
    if (FigBaseObject)
    {
      v12 = FigBaseObject;
      v13 = *(*(CMBaseObjectGetVTable() + 8) + 24);
      if (v13)
      {
        v13(v12);
      }
    }

    v14 = CMBaseObjectGetDerivedStorage();
    v15 = *(v14 + 48);
    if (v15)
    {
      v16 = v14;
      v17 = *(v14 + 40);
      v18 = *(*(CMBaseObjectGetVTable() + 16) + 40);
      if (v18)
      {
        v18(v15, v17);
      }

      v19 = *(v16 + 48);
      if (v19)
      {
        CFRelease(v19);
        *(v16 + 48) = 0;
      }
    }

    v20 = *(DerivedStorage + 56);
    if (v20)
    {
      CFRelease(v20);
      *(DerivedStorage + 56) = 0;
    }

    v21 = *(DerivedStorage + 152);
    if (v21)
    {
      CFRelease(v21);
      *(DerivedStorage + 152) = 0;
    }

    *(DerivedStorage + 220) = v23;
    *(DerivedStorage + 236) = v6;
    FigTimeRangeSetRemoveAllTimeRanges();
    if (*(DerivedStorage + 296) && !*(DerivedStorage + 473))
    {
      v22 = *(DerivedStorage + 300);
      v31[0] = *(DerivedStorage + 304);
      *v25 = *(DerivedStorage + 328);
      *&v25[16] = *(DerivedStorage + 344);
      audioRenderer_setRateAndTimeWithoutFARP(v22, a1, v31, v25);
      *(DerivedStorage + 296) = 0;
    }

    if (a2 == 1)
    {
      v31[0] = v24;
      audioRenderer_postWasFlushedAutomaticallyNotificationForTime(a1, v31);
    }
  }
}

uint64_t audioRenderer_readyToDecryptChanged(uint64_t a1, uint64_t a2)
{
  CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_44_28();
  if (!*(v2 + 473))
  {
    audioRenderer_updateFARPSuspendedState(a2, *(v2 + 56));
  }

  return FigSimpleMutexUnlock();
}

uint64_t audioRenderer_renderPipelineDecodeError()
{
  OUTLINED_FUNCTION_54_21();
  CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_44_28();
  if (!*(v0 + 473) && *(v0 + 56) == v2)
  {
    audioRenderer_flushWithType(v1, 1);
  }

  return FigSimpleMutexUnlock();
}

uint64_t audioRenderer_renderPipelinePrerollLost(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_106(MEMORY[0x1E6960C70]);
  FigSimpleMutexLock();
  if (!*(DerivedStorage + 473) && *(DerivedStorage + 56) == a4)
  {
    CMTimebaseGetTime(&v9, *(DerivedStorage + 24));
    v8 = v9;
    audioRenderer_postWasFlushedAutomaticallyNotificationForTime(a2, &v8);
  }

  return FigSimpleMutexUnlock();
}

uint64_t audioRenderer_renderPipelineRebuildCouldBenefitFidelity()
{
  OUTLINED_FUNCTION_54_21();
  CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_44_28();
  if (!*(v0 + 473) && *(v0 + 56) == v1)
  {
    audioRenderer_postNotification();
  }

  return FigSimpleMutexUnlock();
}

uint64_t audioRenderer_postNotification()
{
  OUTLINED_FUNCTION_400();
  result = CMBaseObjectGetDerivedStorage();
  if (!*(result + 473))
  {
    CMNotificationCenterGetDefaultLocalCenter();

    return FigDispatchAsyncPostNotification();
  }

  return result;
}

uint64_t audioRenderer_updateUnderrunStateExplicit(uint64_t a1, uint64_t a2, int a3)
{
  OUTLINED_FUNCTION_400();
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  while ((*(DerivedStorage + 396) & 1) != 0)
  {
    OUTLINED_FUNCTION_59_17();
    v8 = *v4;
    if (CMTimeCompare(&time1, &v8) > 0)
    {
      break;
    }

    OUTLINED_FUNCTION_59_17();
    result = audioRenderer_updateUnderrunStateOnce(v3, &time1, a3);
    if (result)
    {
      return result;
    }
  }

  time1 = *v4;
  return audioRenderer_updateUnderrunStateOnce(v3, &time1, a3);
}

uint64_t audioRenderer_updateUnderrunStateOnce(uint64_t a1, uint64_t a2, int a3)
{
  v135 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v7 = DerivedStorage;
  v8 = MEMORY[0x1E6960C70];
  *(DerivedStorage + 384) = *MEMORY[0x1E6960C70];
  *(DerivedStorage + 400) = *(v8 + 16);
  if (*(DerivedStorage + 473) || (*(DerivedStorage + 428) & 1) == 0 || (*(DerivedStorage + 452) & 1) == 0 || *(DerivedStorage + 456) || (*(DerivedStorage + 440) & 0x8000000000000000) != 0 || !a3 || (*(a2 + 12) & 1) == 0)
  {
    if (*(DerivedStorage + 372))
    {
      OUTLINED_FUNCTION_3_163();
      v10 = OUTLINED_FUNCTION_55_23();
      audioRenderer_endUnderrun(v10, v11);
    }

    return 0;
  }

  OUTLINED_FUNCTION_3_163();
  result = FigTimeRangeSetRemoveTimeRangesLessThanTime();
  if (!result)
  {
    FigTimeRangeSetGetEarliestTimeRange();
    value = time.start.value;
    flags = time.start.flags;
    LODWORD(v134) = time.start.timescale;
    epoch = time.start.epoch;
    v14 = time.duration.value;
    v15 = time.duration.flags;
    HIDWORD(v106) = time.duration.timescale;
    v110 = time.duration.epoch;
    if (dword_1EAF17BD8 < 3)
    {
      v17 = 0;
      v18 = 0;
    }

    else
    {
      v16 = *MEMORY[0x1E695E480];
      OUTLINED_FUNCTION_3_163();
      v17 = CMTimeCopyDescription(v16, &time.start);
      OUTLINED_FUNCTION_32_29();
      v18 = CMTimeRangeCopyDescription(v16, &time);
      if (dword_1EAF17BD8)
      {
        HIDWORD(v94) = v15;
        v98 = epoch;
        v102 = v17;
        HIDWORD(v114) = 0;
        BYTE3(v114) = 0;
        os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
        os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
        OUTLINED_FUNCTION_37();
        if (epoch)
        {
          if (a1)
          {
            v20 = (CMBaseObjectGetDerivedStorage() + 488);
          }

          else
          {
            v20 = "";
          }

          v21 = *(v7 + 408);
          LODWORD(v118.value) = 136316418;
          *(&v118.value + 4) = "audioRenderer_updateUnderrunStateOnce";
          LOWORD(v118.flags) = 2048;
          *(&v118.flags + 2) = a1;
          HIWORD(v118.epoch) = 2082;
          v119 = v20;
          *v120 = 2112;
          *&v120[2] = v17;
          *&v120[10] = 2112;
          *&v120[12] = v18;
          *&v120[20] = 2112;
          *&v120[22] = v21;
          LODWORD(v90) = 62;
          v86 = &v118;
          OUTLINED_FUNCTION_27();
          OUTLINED_FUNCTION_27_10();
        }

        OUTLINED_FUNCTION_7();
        OUTLINED_FUNCTION_449();
      }
    }

    v22 = (v7 + 384);
    OUTLINED_FUNCTION_3_163();
    v31 = OUTLINED_FUNCTION_61_19(v23, v24, v25, v26, v27, v28, v29, v30, v86, v90, v94, v98, v102, v106, v110, v114, *(v7 + 416), *(v7 + 424), *(v7 + 432), v119, *v120, *&v120[8], *&v120[16], *&v120[24], time.start.value);
    if (CMTimeCompare(v31, v32) < 0)
    {
      *v22 = *(v7 + 416);
      *(v7 + 400) = *(v7 + 432);
      v54 = *(v7 + 24);
      v55 = *(v7 + 352);
      *&time.start.value = *(v7 + 416);
      time.start.epoch = *(v7 + 432);
      CMTimebaseSetTimerDispatchSourceNextFireTime(v54, v55, &time.start, 1u);
LABEL_40:
      if (v17)
      {
        CFRelease(v17);
      }

      if (v18)
      {
        CFRelease(v18);
      }

      return 0;
    }

    OUTLINED_FUNCTION_32_29();
    CMTimeRangeGetEnd(&v118, &time);
    OUTLINED_FUNCTION_3_163();
    v41 = OUTLINED_FUNCTION_61_19(v33, v34, v35, v36, v37, v38, v39, v40, v87, v91, v95, v99, v103, v107, v111, v115, v118.value, *&v118.timescale, v118.epoch, v119, *v120, *&v120[8], *&v120[16], *&v120[24], time.start.value);
    if ((CMTimeCompare(v41, v42) & 0x80000000) == 0)
    {
      OUTLINED_FUNCTION_32_29();
      CMTimeRangeGetEnd(&v118, &time);
      audioRenderer_endUnderrun(a1, &v118);
      goto LABEL_40;
    }

    if (*(v7 + 372))
    {
      if ((flags & 1) == 0 || (v15 & 1) == 0 || v112 || v14 < 0)
      {
        goto LABEL_40;
      }

      time.start.value = value;
      OUTLINED_FUNCTION_46_19();
      v64 = OUTLINED_FUNCTION_61_19(v56, v57, v58, v59, v60, v61, v62, v63, v88, v92, v96, v100, v104, v108, v18, v116, *a2, *(a2 + 8), *(a2 + 16), v119, *v120, *&v120[8], *&v120[16], *&v120[24], time.start.value);
      if (CMTimeRangeContainsTime(v64, v65))
      {
        OUTLINED_FUNCTION_3_163();
        v84 = OUTLINED_FUNCTION_55_23();
        audioRenderer_endUnderrun(v84, v85);
LABEL_31:
        time.start.value = value;
        OUTLINED_FUNCTION_46_19();
        CMTimeRangeGetEnd(&v118, &time);
        *v22 = *&v118.value;
        *(v7 + 400) = v118.epoch;
LABEL_39:
        v66 = *(v7 + 24);
        v67 = *(v7 + 352);
        *&time.start.value = *v22;
        time.start.epoch = *(v7 + 400);
        CMTimebaseSetTimerDispatchSourceNextFireTime(v66, v67, &time.start, 1u);
        v18 = v113;
        goto LABEL_40;
      }
    }

    else
    {
      if ((flags & 1) == 0 || (v15 & 1) == 0 || v112 || v14 < 0)
      {
        OUTLINED_FUNCTION_3_163();
        v68 = OUTLINED_FUNCTION_55_23();
        audioRenderer_beginUnderrun(v68, v69, v70, v71, v72, v73, v74, v75, v88, v92, v96, v100, v104, v108, v112, v116, v118.value, *&v118.timescale, v118.epoch, v119, *v120, *&v120[8], *&v120[16], *&v120[24], time.start.value, *&time.start.timescale, time.start.epoch, time.duration.value, *&time.duration.timescale, time.duration.epoch, v122, v123, v124, v125, v126, v127, v128, v129, v130, v131, v132, value, v134, v135);
        goto LABEL_40;
      }

      OUTLINED_FUNCTION_3_163();
      v118.value = *v43;
      v118.timescale = *(v43 + 8);
      v118.flags = flags;
      v52 = OUTLINED_FUNCTION_61_19(v44, v45, v46, v47, v48, v49, v50, v51, v88, v92, v96, v100, v104, v108, v18, v116, v118.value, *&v118.timescale, epoch, v119, *v120, *&v120[8], *&v120[16], *&v120[24], time.start.value);
      if ((CMTimeCompare(v52, v53) & 0x80000000) == 0)
      {
        goto LABEL_31;
      }

      OUTLINED_FUNCTION_3_163();
      v76 = OUTLINED_FUNCTION_55_23();
      audioRenderer_beginUnderrun(v76, v77, v78, v79, v80, v81, v82, v83, v89, v93, v97, v101, v105, v109, v113, v117, v118.value, *&v118.timescale, v118.epoch, v119, *v120, *&v120[8], *&v120[16], *&v120[24], time.start.value, *&time.start.timescale, time.start.epoch, time.duration.value, *&time.duration.timescale, time.duration.epoch, v122, v123, v124, v125, v126, v127, v128, v129, v130, v131, v132, value, v134, v135);
    }

    *v22 = value;
    *(v7 + 392) = v134;
    *(v7 + 396) = flags;
    *(v7 + 400) = epoch;
    goto LABEL_39;
  }

  return result;
}

void audioRenderer_endUnderrun(uint64_t a1, CMTime *a2)
{
  v24 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 372))
  {
    v6 = DerivedStorage;
    v7 = *MEMORY[0x1E695E480];
    *&time[0].start.value = *&a2->value;
    time[0].start.epoch = a2->epoch;
    v8 = CMTimeCopyDescription(v7, &time[0].start);
    if (dword_1EAF17BD8)
    {
      LODWORD(end.value) = 0;
      type = OS_LOG_TYPE_DEFAULT;
      os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
      os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
      OUTLINED_FUNCTION_37();
      if (v2)
      {
        if (a1)
        {
          v10 = (CMBaseObjectGetDerivedStorage() + 488);
        }

        else
        {
          v10 = "";
        }

        value = v6[17].value;
        LODWORD(start.value) = 136316162;
        *(&start.value + 4) = "audioRenderer_endUnderrun";
        LOWORD(start.flags) = 2048;
        *(&start.flags + 2) = a1;
        HIWORD(start.epoch) = 2082;
        v18 = v10;
        v19 = 2112;
        v20 = v8;
        v21 = 2112;
        v22 = value;
        OUTLINED_FUNCTION_27();
        OUTLINED_FUNCTION_27_10();
      }

      OUTLINED_FUNCTION_7();
      OUTLINED_FUNCTION_449();
    }

    v12 = v6 + 15;
    Mutable = CFDictionaryCreateMutable(v7, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      start = *v12;
      end = *a2;
      CMTimeRangeFromTimeToTime(time, &start, &end);
      FigCFDictionarySetCMTimeRange();
      audioRenderer_postNotification();
    }

    v14 = MEMORY[0x1E6960C70];
    *&v12->value = *MEMORY[0x1E6960C70];
    v12->epoch = *(v14 + 16);
    if (v8)
    {
      CFRelease(v8);
    }

    if (Mutable)
    {
      CFRelease(Mutable);
    }
  }
}

void audioRenderer_timebaseRateChangedListener(uint64_t a1, const void *a2, uint64_t a3, void *a4)
{
  if (!*(CMBaseObjectGetDerivedStorage() + 473) && CMTimebaseGetRate(a4) != 0.0)
  {
    if (qword_1ED4CBC98 != -1)
    {
      dispatch_once_f(&qword_1ED4CBC98, &_MergedGlobals_144, audioRenderer_setupTimebaseRateChangedListenerAsyncQueue);
    }

    v6 = malloc_type_malloc(0x10uLL, 0x20040A4A59CD2uLL);
    CFRetain(a2);
    *v6 = a2;
    CFRetain(a4);
    v6[1] = a4;
    v7 = _MergedGlobals_144;

    dispatch_async_f(v7, v6, audioRenderer_timebaseRateChangedListenerAsync);
  }
}

void audioRenderer_updateFARPSuspendedState(uint64_t a1, uint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  cf = 0;
  if (a2 && !*(DerivedStorage + 473))
  {
    v4 = *(DerivedStorage + 208);
    if (v4)
    {
      v5 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v5)
      {
        v5(v4, *MEMORY[0x1E6961118], *MEMORY[0x1E695E480], &cf);
      }

      FigCFEqual();
    }

    FigRenderPipelineGetFigBaseObject(a2);
    if (*(*(CMBaseObjectGetVTable() + 8) + 56))
    {
      v6 = OUTLINED_FUNCTION_236();
      v7(v6);
    }
  }

  if (cf)
  {
    CFRelease(cf);
  }
}

uint64_t audioRenderer_setBufferedAirPlayOutput()
{
  OUTLINED_FUNCTION_400();
  CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_44_28();
  v3 = *(v0 + 72);
  if (v3 == v2)
  {
    goto LABEL_23;
  }

  audioRenderer_bapOutputRemoveWeakListeners(v1, v3);
  v4 = *(v0 + 72);
  *(v0 + 72) = v2;
  if (v2)
  {
    CFRetain(v2);
  }

  if (v4)
  {
    CFRelease(v4);
  }

  if (!*(v0 + 72) || (CMNotificationCenterGetDefaultLocalCenter(), OUTLINED_FUNCTION_186(), FigNotificationCenterAddWeakListeners(), !*(v0 + 72)))
  {
    audioRenderer_tearDownFARP(v1, 1);
    goto LABEL_23;
  }

  v5 = CFStringCreateWithCString(*MEMORY[0x1E695E480], (v0 + 488), 0x8000100u);
  if (!v5)
  {
LABEL_23:
    v9 = 0;
    goto LABEL_21;
  }

  v6 = v5;
  CMBaseObject = FigBufferedAirPlayOutputGetCMBaseObject(*(v0 + 72));
  v8 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (v8)
  {
    v9 = v8(CMBaseObject, @"LoggingID", v6);
  }

  else
  {
    v9 = 4294954514;
  }

  v10 = *(v0 + 160);
  if (v10)
  {
    v11 = FigBufferedAirPlayOutputGetCMBaseObject(*(v0 + 72));
    v12 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (!v12)
    {
      goto LABEL_19;
    }

    v9 = v12(v11, @"FigAudioSession", v10);
    if (v9)
    {
      goto LABEL_20;
    }
  }

  v13 = *(v0 + 168);
  if (!v13)
  {
LABEL_18:
    audioRenderer_tearDownFARP(v1, 1);
    goto LABEL_20;
  }

  v14 = FigBufferedAirPlayOutputGetCMBaseObject(*(v0 + 72));
  v15 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v15)
  {
LABEL_19:
    v9 = 4294954514;
    goto LABEL_20;
  }

  v9 = v15(v14, @"ClientAuditToken", v13);
  if (!v9)
  {
    goto LABEL_18;
  }

LABEL_20:
  CFRelease(v6);
LABEL_21:
  FigSimpleMutexUnlock();
  return v9;
}

uint64_t audioRenderer_setUnderrunTrackingTimeRange(uint64_t a1, const __CFDictionary *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = *(MEMORY[0x1E6960C98] + 16);
  *&v11.start.value = *MEMORY[0x1E6960C98];
  *&v11.start.epoch = v5;
  *&v11.duration.timescale = *(MEMORY[0x1E6960C98] + 32);
  FigSimpleMutexLock();
  if (!*(DerivedStorage + 473))
  {
    CMTimeRangeMakeFromDictionary(&v11, a2);
    range1 = v11;
    v6 = *(DerivedStorage + 432);
    *&v9.start.value = *(DerivedStorage + 416);
    *&v9.start.epoch = v6;
    *&v9.duration.timescale = *(DerivedStorage + 448);
    if (!CMTimeRangeEqual(&range1, &v9))
    {
      v7 = *&v11.start.epoch;
      *(DerivedStorage + 416) = *&v11.start.value;
      *(DerivedStorage + 432) = v7;
      *(DerivedStorage + 448) = *&v11.duration.timescale;
      audioRenderer_updateUnderrunState(a1);
    }
  }

  return FigSimpleMutexUnlock();
}

uint64_t audioRenderer_DuckVolume(uint64_t a1, int a2, float a3, float a4)
{
  CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_44_28();
  if (dword_1EAF17BD8)
  {
    v10 = OUTLINED_FUNCTION_12_75();
    OUTLINED_FUNCTION_304(v10, v11, v12, v13, v14, v15, v16, v17, v22, v23, v24, v25, SBYTE2(v25), BYTE3(v25), SHIDWORD(v25));
    OUTLINED_FUNCTION_46();
    if (v5)
    {
      if (a1)
      {
        CMBaseObjectGetDerivedStorage();
      }

      OUTLINED_FUNCTION_114();
      OUTLINED_FUNCTION_39();
      OUTLINED_FUNCTION_5_138();
      _os_log_send_and_compose_impl();
      OUTLINED_FUNCTION_507();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_238_0();
  }

  if (*(v4 + 473))
  {
    v20 = 4294954511;
    goto LABEL_21;
  }

  v18 = 0.0;
  if (a3 >= 0.0)
  {
    v18 = a3;
  }

  if (a2)
  {
    if (v18 < 1.0 && *(v4 + 464) == 0)
    {
      *(v4 + 468) = v18;
      *(v4 + 464) = 1;
      audioRenderer_applySoftwareVolume(a1, @"SoftwareVolume2", 1, v18, a4);
    }

    goto LABEL_20;
  }

  if (!*(v4 + 464))
  {
LABEL_20:
    v20 = 0;
    goto LABEL_21;
  }

  audioRenderer_applySoftwareVolume(a1, @"SoftwareVolume2", 0, v18, a4);
  v20 = 0;
  *(v4 + 464) = 0;
LABEL_21:
  FigSimpleMutexUnlock();
  return v20;
}

uint64_t audioRenderer_queueIsAboveHighWaterLevel()
{
  CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_44_28();
  if (*(v0 + 473))
  {
    v3 = 1;
  }

  else if (*(v0 + 56) && (v1 = *(v0 + 48), (v2 = *(*(CMBaseObjectGetVTable() + 16) + 16)) != 0))
  {
    v3 = v2(v1);
  }

  else
  {
    v3 = 0;
  }

  FigSimpleMutexUnlock();
  return v3;
}

uint64_t audioRenderer_enqueueSampleBuffer()
{
  OUTLINED_FUNCTION_400();
  v334 = *MEMORY[0x1E69E9840];
  CMBaseObjectGetDerivedStorage();
  v315 = *MEMORY[0x1E6960C98];
  v316 = *(MEMORY[0x1E6960C98] + 8);
  if (!v2)
  {
    return 4294950916;
  }

  OUTLINED_FUNCTION_44_28();
  if (*(v0 + 473))
  {
    v110 = 4294954511;
    goto LABEL_206;
  }

  v270 = v5;
  Decryptor = FigSampleBufferGetDecryptor();
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v8 = *(DerivedStorage + 208);
  if (v8 != Decryptor)
  {
    v34 = DerivedStorage;
    if (dword_1EAF17BD8)
    {
      v35 = OUTLINED_FUNCTION_4_159();
      os_log_type_enabled(v35, type.value);
      OUTLINED_FUNCTION_37();
      if (v4)
      {
        if (v1)
        {
          CMBaseObjectGetDerivedStorage();
        }

        LODWORD(start.value) = 136316162;
        *(&start.value + 4) = "audioRenderer_updateStashedCryptor";
        OUTLINED_FUNCTION_36_29();
        v321 = v210;
        *(v211 + 180) = Decryptor;
        OUTLINED_FUNCTION_8_92();
        OUTLINED_FUNCTION_27();
        OUTLINED_FUNCTION_27_10();
      }

      OUTLINED_FUNCTION_7();
      OUTLINED_FUNCTION_449();
      v8 = *(v34 + 208);
    }

    if (v8)
    {
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_7_108();
      FigNotificationCenterRemoveWeakListener();
      FormatDescription = *(v34 + 208);
    }

    else
    {
      FormatDescription = 0;
    }

    *(v34 + 208) = Decryptor;
    if (Decryptor)
    {
      CFRetain(Decryptor);
      if (!FormatDescription)
      {
LABEL_184:
        if (!Decryptor)
        {
LABEL_186:
          audioRenderer_updateFARPSuspendedState(v1, *(v34 + 56));
          goto LABEL_4;
        }

LABEL_185:
        CMNotificationCenterGetDefaultLocalCenter();
        OUTLINED_FUNCTION_7_108();
        OUTLINED_FUNCTION_186();
        FigNotificationCenterAddWeakListener();
        goto LABEL_186;
      }
    }

    else if (!FormatDescription)
    {
      goto LABEL_184;
    }

    CFRelease(FormatDescription);
    if (!Decryptor)
    {
      goto LABEL_186;
    }

    goto LABEL_185;
  }

LABEL_4:
  if (*(v0 + 56))
  {
    goto LABEL_147;
  }

  v9 = CMBaseObjectGetDerivedStorage();
  valuePtr.value = 0;
  FigSimpleMutexLock();
  if (*(v9 + 473))
  {
    v110 = 4294954511;
    goto LABEL_144;
  }

  FormatDescription = CMSampleBufferGetFormatDescription(v2);
  v10 = CMBaseObjectGetDerivedStorage();
  v310.value = 0;
  v309.value = 0;
  v308.value = 0;
  if (FormatDescription)
  {
    v11 = v10;
    if (FPSupport_CopyAndCheckClientOnAllowListForPrefDomainKey(*(v10 + 160), 1, 0x1F0B2FBF8, &v308) && !*(v11 + 192))
    {
      v12 = *(v11 + 184);
      v13 = *MEMORY[0x1E695E4D0];
      *(v11 + 184) = *MEMORY[0x1E695E4D0];
      if (v13)
      {
        CFRetain(v13);
      }

      if (v12)
      {
        CFRelease(v12);
      }
    }

    shouldEnableSpatialization = audioRenderer_shouldEnableSpatialization(v1, FormatDescription);
    v15 = CMBaseObjectGetDerivedStorage();
    v258 = v9;
    v264 = v0;
    v246 = FormatDescription;
    LODWORD(v252) = shouldEnableSpatialization;
    if (*(v15 + 292))
    {
      if (dword_1EAF17BD8)
      {
        v16 = OUTLINED_FUNCTION_4_159();
        OUTLINED_FUNCTION_21_41(v16, v17, v18, v19, v20, v21, v22, v23, v228, v234, v240, FormatDescription, v252, v9, v0, v5, v277, v284, v290, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value, *&v308.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, v310.value, *&v310.timescale, v310.epoch, v311.value, *&v311.timescale, v311.epoch, type.value);
        OUTLINED_FUNCTION_20_41();
        if (v9)
        {
          if (v1)
          {
            v24 = (CMBaseObjectGetDerivedStorage() + 488);
          }

          else
          {
            v24 = "";
          }

          LODWORD(start.value) = 136315650;
          *(&start.value + 4) = "audioRenderer_shouldAllowAtmosDecode";
          LOWORD(start.flags) = 2048;
          *(&start.flags + 2) = v1;
          HIWORD(start.epoch) = 2082;
          v318 = v24;
          OUTLINED_FUNCTION_8_92();
          OUTLINED_FUNCTION_36();
          _os_log_send_and_compose_impl();
        }

        OUTLINED_FUNCTION_7();
        fig_log_call_emit_and_clean_up_after_send_and_compose();
        v44 = 0;
        v0 = v264;
        goto LABEL_57;
      }

LABEL_56:
      v44 = 0;
      goto LABEL_57;
    }

    v25 = *MEMORY[0x1E695E4D0];
    if (*MEMORY[0x1E695E4D0] == *(v15 + 176))
    {
      if (dword_1EAF17BD8)
      {
        v36 = OUTLINED_FUNCTION_4_159();
        OUTLINED_FUNCTION_21_41(v36, v37, v38, v39, v40, v41, v42, v43, v228, v234, v240, v246, v252, v9, v0, v5, v277, v284, v290, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value, *&v308.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, v310.value, *&v310.timescale, v310.epoch, v311.value, *&v311.timescale, v311.epoch, type.value);
        OUTLINED_FUNCTION_20_41();
        if (v9)
        {
          if (v1)
          {
LABEL_31:
            CMBaseObjectGetDerivedStorage();
          }

LABEL_48:
          OUTLINED_FUNCTION_1_197();
          OUTLINED_FUNCTION_36();
          _os_log_send_and_compose_impl();
        }

LABEL_55:
        FormatDescription = v246;
        OUTLINED_FUNCTION_7();
        fig_log_call_emit_and_clean_up_after_send_and_compose();
        goto LABEL_56;
      }
    }

    else if (FigGetCFPreferenceBooleanWithDefault())
    {
      if (dword_1EAF17BD8)
      {
        v26 = OUTLINED_FUNCTION_4_159();
        OUTLINED_FUNCTION_21_41(v26, v27, v28, v29, v30, v31, v32, v33, v228, v234, v240, v246, v252, v9, v0, v5, v277, v284, v290, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value, *&v308.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, v310.value, *&v310.timescale, v310.epoch, v311.value, *&v311.timescale, v311.epoch, type.value);
        OUTLINED_FUNCTION_20_41();
        if (v9)
        {
          if (v1)
          {
            goto LABEL_31;
          }

          goto LABEL_48;
        }

        goto LABEL_55;
      }
    }

    else
    {
      cf[0].start.value = 0;
      v45 = *(CMBaseObjectGetDerivedStorage() + 72);
      if (!v45)
      {
        goto LABEL_43;
      }

      CMBaseObject = FigBufferedAirPlayOutputGetCMBaseObject(v45);
      v47 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v47)
      {
        v47(CMBaseObject, @"AtmosIsSupported", 0, cf);
        value = cf[0].start.value;
        if (cf[0].start.value)
        {
          CFRelease(cf[0].start.value);
        }
      }

      else
      {
        value = 0;
      }

      if (v25 != value)
      {
LABEL_43:
        if (dword_1EAF17BD8)
        {
          v49 = OUTLINED_FUNCTION_4_159();
          OUTLINED_FUNCTION_21_41(v49, v50, v51, v52, v53, v54, v55, v56, v228, v234, v240, v246, v252, v9, v0, v5, v277, v284, v290, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value, *&v308.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, v310.value, *&v310.timescale, v310.epoch, v311.value, *&v311.timescale, v311.epoch, type.value);
          OUTLINED_FUNCTION_20_41();
          if (v9)
          {
            if (v1)
            {
              CMBaseObjectGetDerivedStorage();
            }

            OUTLINED_FUNCTION_1_197();
            OUTLINED_FUNCTION_36();
            _os_log_send_and_compose_impl();
          }

          FormatDescription = v246;
          v44 = 1;
          OUTLINED_FUNCTION_110();
          fig_log_call_emit_and_clean_up_after_send_and_compose();
LABEL_57:
          v65 = CMBaseObjectGetDerivedStorage();
          Mutable = CFDictionaryCreateMutable(0, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
          if (!Mutable)
          {
            v110 = 4294950914;
            goto LABEL_128;
          }

          v67 = Mutable;
          CFDictionarySetValue(Mutable, @"FormatDescription", FormatDescription);
          v68 = *(v65 + 120);
          if (v68)
          {
            CFDictionarySetValue(v67, @"AudioDeviceUID", v68);
          }

          v69 = *MEMORY[0x1E695E4D0];
          FormatDescription = *MEMORY[0x1E695E4C0];
          OUTLINED_FUNCTION_49_19(@"EnableSpatialization", v252);
          if (v44)
          {
            v70 = FormatDescription;
          }

          else
          {
            v70 = v69;
          }

          CFDictionarySetValue(v67, @"AllowAtmosDecode", v70);
          v71 = *(v65 + 200);
          if (v71)
          {
            CFDictionarySetValue(v67, @"AudioOnly", v71);
          }

          OUTLINED_FUNCTION_49_19(@"AlwaysNotifyLatencyChange", *(v65 + 102));
          OUTLINED_FUNCTION_49_19(@"DisallowTimePitch", *(v65 + 136));
          CFDictionarySetValue(v67, @"AutomaticallyRestartsAfterConfigurationChange", FormatDescription);
          v72 = *(v65 + 160);
          if (v72)
          {
            CFDictionarySetValue(v67, @"AudioSession", v72);
          }

          v252 = *MEMORY[0x1E695E480];
          v73 = CFStringCreateWithCString(*MEMORY[0x1E695E480], (v65 + 488), 0x8000100u);
          if (v73)
          {
            v74 = v73;
            CFDictionarySetValue(v67, @"LoggingID", v73);
            CFRelease(v74);
          }

          else
          {
            v110 = FigSignalErrorAtGM();
            CFRelease(v67);
            if (v110)
            {
              goto LABEL_128;
            }

            v67 = 0;
          }

          v75 = *(v11 + 72);
          if (v75)
          {
            v76 = FigBufferedAirPlayAudioRenderPipelineCreate(0, v75, v67, &v310.value);
            if (v76)
            {
              goto LABEL_123;
            }

            if (dword_1EAF17BD8)
            {
              v77 = v11;
              v78 = OUTLINED_FUNCTION_4_159();
              if (OUTLINED_FUNCTION_68_15(v78, v79, v80, v81, v82, v83, v84, v85, v228, v234, v240, v246, v252, v258, v264, v270, v277, v284, v290, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value, *&v308.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, v310.value, *&v310.timescale, v310.epoch, v311.value, *&v311.timescale, v311.epoch, type.value))
              {
                LODWORD(FormatDescription) = v44;
              }

              else
              {
                LODWORD(FormatDescription) = v44 & 0xFFFFFFFE;
              }

              if (!FormatDescription)
              {
                goto LABEL_91;
              }

              if (v1)
              {
                v86 = (CMBaseObjectGetDerivedStorage() + 488);
              }

              else
              {
                v86 = "";
              }

              v95 = *(v11 + 72);
              LODWORD(start.value) = 136316162;
              *(&start.value + 4) = "audioRenderer_createFARPWithFormatDescription";
              LOWORD(start.flags) = 2048;
              *(&start.flags + 2) = v1;
              HIWORD(start.epoch) = 2082;
              v318 = v86;
              v319 = 2048;
              v320 = v310.value;
              v321 = 2048;
              v322 = v95;
              OUTLINED_FUNCTION_8_92();
LABEL_90:
              OUTLINED_FUNCTION_5_138();
              _os_log_send_and_compose_impl();
LABEL_91:
              OUTLINED_FUNCTION_7();
              fig_log_call_emit_and_clean_up_after_send_and_compose();
              v11 = v77;
              v0 = v264;
            }
          }

          else
          {
            v76 = FigAudioQueueRenderPipelineCreate(0, v67, &v310);
            if (v76)
            {
              goto LABEL_123;
            }

            if (dword_1EAF17BD8)
            {
              v77 = v11;
              v87 = OUTLINED_FUNCTION_4_159();
              if (OUTLINED_FUNCTION_68_15(v87, v88, v89, v90, v91, v92, v93, v94, v228, v234, v240, v246, v252, v258, v264, v270, v277, v284, v290, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value, *&v308.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, v310.value, *&v310.timescale, v310.epoch, v311.value, *&v311.timescale, v311.epoch, type.value))
              {
                LODWORD(FormatDescription) = v44;
              }

              else
              {
                LODWORD(FormatDescription) = v44 & 0xFFFFFFFE;
              }

              if (!FormatDescription)
              {
                goto LABEL_91;
              }

              if (v1)
              {
                CMBaseObjectGetDerivedStorage();
              }

              LODWORD(start.value) = 136315906;
              *(&start.value + 4) = "audioRenderer_createFARPWithFormatDescription";
              OUTLINED_FUNCTION_36_29();
              OUTLINED_FUNCTION_8_92();
              goto LABEL_90;
            }
          }

          FigBaseObject = FigRenderPipelineGetFigBaseObject(v310.value);
          v97 = *(*(CMBaseObjectGetVTable() + 8) + 56);
          if (v97)
          {
            v76 = v97(FigBaseObject, @"HandleFormatDescriptionChanges", v69);
            if (v76)
            {
              goto LABEL_123;
            }

            v98 = *(v11 + 128);
            if (v98 && !*(v11 + 136))
            {
              v120 = FigRenderPipelineGetFigBaseObject(v310.value);
              v121 = *(*(CMBaseObjectGetVTable() + 8) + 56);
              if (!v121)
              {
                goto LABEL_125;
              }

              v76 = v121(v120, @"TimePitchAlgorithm", v98);
              if (v76)
              {
                goto LABEL_123;
              }
            }

            v99 = *(v11 + 144);
            v100 = FigRenderPipelineGetFigBaseObject(v310.value);
            v101 = *(*(CMBaseObjectGetVTable() + 8) + 56);
            if (v101)
            {
              v76 = v101(v100, @"AudioProcessingTap", v99);
              if (v76)
              {
                goto LABEL_123;
              }

              v102 = v310.value;
              v103 = CMBaseObjectGetDerivedStorage();
              FigSimpleMutexLock();
              CFDictionaryApplyFunction(*(v103 + 80), audioRenderer_applyCachedPropertiesToFARPApplierFunction, v102);
              FigSimpleMutexUnlock();
              audioRenderer_updateFARPSuspendedState(v1, v310.value);
              v104 = v310.value;
              v105 = CMBaseObjectGetDerivedStorage();
              memset(cf, 0, 24);
              audioRenderer_getLowWaterDurationScaledForRate(&cf[0].start, *(v105 + 96));
              memset(&start, 0, sizeof(start));
              audioRenderer_getHighWaterDurationScaledForRate(&start, *(v105 + 96));
              v311.value = 0;
              v106 = FigRenderPipelineGetFigBaseObject(v104);
              v107 = *(*(CMBaseObjectGetVTable() + 8) + 48);
              if (v107 && !v107(v106, @"SourceSampleBufferConsumer", 0, &v309))
              {
LABEL_106:
                v112 = v309.value;
                v113 = CMBaseObjectGetDerivedStorage();
                if (!v112)
                {
                  v110 = 4294950916;
                  if (!v67)
                  {
                    goto LABEL_128;
                  }

                  goto LABEL_127;
                }

                FormatDescription = v113;
                *(v113 + 48) = CFRetain(v112);
                v114 = *(*(CMBaseObjectGetVTable() + 16) + 32);
                if (v114)
                {
                  v76 = v114(v112, audioRenderer_consumerReachedLowWaterCallback, v1, FormatDescription + 40);
                  if (!v76)
                  {
                    *(v11 + 56) = v310.value;
                    v115 = *(v11 + 152);
                    *(v11 + 152) = v246;
                    CFRetain(v246);
                    if (v115)
                    {
                      CFRelease(v115);
                    }

                    v310.value = 0;
                    if (*(CMBaseObjectGetDerivedStorage() + 56))
                    {
                      CMNotificationCenterGetDefaultLocalCenter();
                      OUTLINED_FUNCTION_26_38();
                      OUTLINED_FUNCTION_186();
                      FigNotificationCenterAddWeakListener();
                      CMNotificationCenterGetDefaultLocalCenter();
                      OUTLINED_FUNCTION_28_35();
                      OUTLINED_FUNCTION_186();
                      FigNotificationCenterAddWeakListener();
                      CMNotificationCenterGetDefaultLocalCenter();
                      OUTLINED_FUNCTION_186();
                      FigNotificationCenterAddWeakListener();
                      CMNotificationCenterGetDefaultLocalCenter();
                      OUTLINED_FUNCTION_186();
                      FigNotificationCenterAddWeakListener();
                      CMNotificationCenterGetDefaultLocalCenter();
                      OUTLINED_FUNCTION_27_34();
                      OUTLINED_FUNCTION_186();
                      FigNotificationCenterAddWeakListener();
                      CMNotificationCenterGetDefaultLocalCenter();
                      OUTLINED_FUNCTION_25_39();
                      OUTLINED_FUNCTION_186();
                      FigNotificationCenterAddWeakListener();
                    }

                    v116 = CMBaseObjectGetDerivedStorage();
                    *duration = 0;
                    v117 = *(v116 + 56);
                    if (v117)
                    {
                      v118 = FigRenderPipelineGetFigBaseObject(v117);
                      v119 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                      if (v119)
                      {
                        v119(v118, @"PreferredClock", v252, duration);
                        if (*duration)
                        {
                          if (CMSyncMightDrift(*(v116 + 64), *duration))
                          {
                            if (dword_1EAF17BD8)
                            {
                              LODWORD(type.value) = 0;
                              LOBYTE(v311.value) = 0;
                              v220 = OUTLINED_FUNCTION_69_12();
                              LODWORD(FormatDescription) = v220;
                              v221 = type.value;
                              if (os_log_type_enabled(v220, v311.value))
                              {
                                v222 = v221;
                              }

                              else
                              {
                                v222 = v221 & 0xFFFFFFFE;
                              }

                              if (v222)
                              {
                                if (v1)
                                {
                                  v223 = (CMBaseObjectGetDerivedStorage() + 488);
                                }

                                else
                                {
                                  v223 = "";
                                }

                                v225 = *(v116 + 64);
                                LODWORD(start.value) = 136316162;
                                *(&start.value + 4) = "audioRenderer_updateAudioClockFromFARP";
                                LOWORD(start.flags) = 2048;
                                *(&start.flags + 2) = v1;
                                HIWORD(start.epoch) = 2082;
                                v318 = v223;
                                v319 = 2112;
                                v320 = v225;
                                v321 = 2112;
                                v322 = *duration;
                                OUTLINED_FUNCTION_8_92();
                                OUTLINED_FUNCTION_27_10();
                              }

                              OUTLINED_FUNCTION_7();
                              fig_log_call_emit_and_clean_up_after_send_and_compose();
                            }

                            audioRenderer_postNotification();
                            v226 = *(v116 + 64);
                            v227 = *duration;
                            *(v116 + 64) = *duration;
                            if (v227)
                            {
                              CFRetain(v227);
                            }

                            if (v226)
                            {
                              CFRelease(v226);
                            }
                          }

                          if (*duration)
                          {
                            CFRelease(*duration);
                          }
                        }
                      }
                    }

                    v110 = 0;
                    if (!v67)
                    {
                      goto LABEL_128;
                    }

                    goto LABEL_127;
                  }

LABEL_123:
                  v110 = v76;
                  if (!v67)
                  {
                    goto LABEL_128;
                  }

                  goto LABEL_127;
                }

                goto LABEL_125;
              }

              v108 = FigRenderPipelineGetFigBaseObject(v104);
              v109 = *(*(CMBaseObjectGetVTable() + 8) + 48);
              if (v109)
              {
                v110 = v109(v108, @"SourceSampleBufferQueue", 0, &v311);
                v111 = v311.value;
                if (!v110)
                {
                  *duration = start;
                  type = cf[0].start;
                  v110 = FigSampleBufferConsumerCreateForBufferQueue(v311.value, duration, &type.value, &v309);
                  v111 = v311.value;
                }

                if (v111)
                {
                  CFRelease(v111);
                }

                if (v110)
                {
LABEL_126:
                  if (!v67)
                  {
LABEL_128:
                    v9 = v258;
                    goto LABEL_129;
                  }

LABEL_127:
                  CFRelease(v67);
                  goto LABEL_128;
                }

                goto LABEL_106;
              }
            }
          }

LABEL_125:
          v110 = 4294954514;
          goto LABEL_126;
        }

        v44 = 1;
LABEL_54:
        FormatDescription = v246;
        goto LABEL_57;
      }

      if (dword_1EAF17BD8)
      {
        v57 = OUTLINED_FUNCTION_4_159();
        OUTLINED_FUNCTION_21_41(v57, v58, v59, v60, v61, v62, v63, v64, v228, v234, v240, v246, v252, v9, v0, v5, v277, v284, v290, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value, *&v308.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, v310.value, *&v310.timescale, v310.epoch, v311.value, *&v311.timescale, v311.epoch, type.value);
        OUTLINED_FUNCTION_20_41();
        if (!v9)
        {
          goto LABEL_55;
        }

        if (!v1)
        {
          goto LABEL_48;
        }

        goto LABEL_31;
      }
    }

    v44 = 0;
    goto LABEL_54;
  }

  v110 = 4294950916;
LABEL_129:
  if (v310.value)
  {
    CFRelease(v310.value);
  }

  if (v309.value)
  {
    CFRelease(v309.value);
  }

  if (v308.value)
  {
    CFRelease(v308.value);
  }

  if (v110)
  {
    goto LABEL_144;
  }

  v122 = *(v9 + 24);
  v123 = FigRenderPipelineGetFigBaseObject(*(v9 + 56));
  v124 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v124)
  {
    v110 = 4294954514;
LABEL_144:
    FigSimpleMutexUnlock();
    goto LABEL_145;
  }

  v125 = v124(v123, @"Timebase", v122);
  if (v125)
  {
    v110 = v125;
    goto LABEL_144;
  }

  valuePtr.value = CMTimebaseGetRate(*(v9 + 24));
  if (*&valuePtr.value == 0.0)
  {
    v110 = 0;
    goto LABEL_144;
  }

  FormatDescription = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberFloat64Type, &valuePtr);
  v126 = FigRenderPipelineGetFigBaseObject(*(v9 + 56));
  v127 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (v127)
  {
    v127(v126, @"PipelineRate", FormatDescription);
  }

  v128 = *(v9 + 56);
  v129 = *(*(CMBaseObjectGetVTable() + 16) + 48);
  if (v129)
  {
    v110 = v129(v128);
  }

  else
  {
    v110 = 4294954514;
  }

  FigSimpleMutexUnlock();
  if (FormatDescription)
  {
    CFRelease(FormatDescription);
  }

LABEL_145:
  if (v110)
  {
LABEL_206:
    FigSimpleMutexUnlock();
    return v110;
  }

  if (!*(v0 + 56))
  {
    goto LABEL_205;
  }

LABEL_147:
  v130 = CMBaseObjectGetDerivedStorage();
  sampleBufferOut = 0;
  if (*(v130 + 232))
  {
    v131 = v130;
    CMSampleBufferGetOutputPresentationTimeStamp(&start, v2);
    CMSampleBufferGetOutputDuration(&type, v2);
    CMTimeRangeMake(cf, &start, &type);
    v132 = cf[0].start.value;
    *duration = *&cf[0].start.flags;
    *&duration[16] = *(&cf[0].duration.value + 4);
    timescale = cf[0].start.timescale;
    epoch_high = HIDWORD(cf[0].duration.epoch);
    OUTLINED_FUNCTION_18_50();
    start.value = v132;
    *(v134 + 148) = *duration;
    start.timescale = timescale;
    HIDWORD(start.epoch) = *&duration[8];
    if (CMTimeCompare(&cf[0].start, &start))
    {
      cf[0].start.value = v132;
      *&cf[0].start.flags = *duration;
      *(&cf[0].duration.value + 4) = *&duration[16];
      cf[0].start.timescale = timescale;
      HIDWORD(cf[0].duration.epoch) = epoch_high;
      CMTimeRangeGetEnd(&start, cf);
      OUTLINED_FUNCTION_18_50();
      if (CMTimeCompare(&start, &cf[0].start) > 0)
      {
        OUTLINED_FUNCTION_43_25();
        start = *(v131 + 220);
        if (CMTimeCompare(&cf[0].start, &start) < 0)
        {
          memset(&v302, 0, sizeof(v302));
          OUTLINED_FUNCTION_18_50();
          start.value = v132;
          *&start.flags = *duration;
          start.timescale = timescale;
          HIDWORD(start.epoch) = *&duration[8];
          CMTimeSubtract(&v302, &cf[0].start, &start);
          v278 = v302;
          timingArrayEntriesNeededOut = 0;
          v314 = 0;
          memset(cf, 0, 24);
          memset(&start, 0, sizeof(start));
          memset(&type, 0, sizeof(type));
          memset(&v311, 0, sizeof(v311));
          memset(&v310, 0, sizeof(v310));
          memset(&v309, 0, sizeof(v309));
          v136 = *MEMORY[0x1E6960560];
          v137 = CMGetAttachment(v2, *MEMORY[0x1E6960560], 0);
          v138 = MEMORY[0x1E6960CC0];
          if (v137)
          {
            CMTimeMakeFromDictionary(&v310, v137);
          }

          else
          {
            v310 = **&MEMORY[0x1E6960CC0];
          }

          CMSampleBufferGetOutputPresentationTimeStamp(&cf[0].start, v2);
          PresentationTimeStamp = CMSampleBufferGetPresentationTimeStamp(&start, v2);
          OUTLINED_FUNCTION_45_22(PresentationTimeStamp, v142, v143, v144, v145, v146, v147, v148, v228, v234, v240, v246, v252, v258, v264, v270, v278.value, *&v278.timescale, v278.epoch, v296, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, cf[0].start.value, *&cf[0].start.timescale, v308.epoch, v309.value, *&v309.timescale, v309.epoch, *&v310.value);
          v157 = OUTLINED_FUNCTION_52_22(v149, v150, v151, v152, v153, v154, v155, v156, v229, v235, v241, v247, v253, v259, v265, v271, v279, v285, v291, v297, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value);
          v160 = CMTimeSubtract(v159, v157, v158);
          *&v308.timescale = *&type.timescale;
          v308.epoch = type.epoch;
          v168 = OUTLINED_FUNCTION_52_22(v160, v161, v162, v163, v164, v165, v166, v167, v230, v236, v242, v248, v254, v260, v266, v272, v280, v286, v292, v298, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, start.value, *&start.timescale, start.epoch, v307, type.value);
          CMTimeSubtract(v170, v168, v169);
          CMSampleBufferGetSampleTimingInfoArray(v2, 0, 0, &timingArrayEntriesNeededOut);
          if (!timingArrayEntriesNeededOut)
          {
            v110 = FigSignalErrorAtGM();
            if (v110)
            {
              goto LABEL_206;
            }

            goto LABEL_194;
          }

          v171 = malloc_type_calloc(timingArrayEntriesNeededOut, 0x48uLL, 0x1000040FF89C88EuLL);
          SampleTimingInfoArray = CMSampleBufferGetSampleTimingInfoArray(v2, timingArrayEntriesNeededOut, v171, &timingArrayEntriesNeededOut);
          if (SampleTimingInfoArray)
          {
            v110 = SampleTimingInfoArray;
            free(v171);
            goto LABEL_206;
          }

          v308 = v311;
          v180 = OUTLINED_FUNCTION_52_22(SampleTimingInfoArray, v173, v174, v175, v176, v177, v178, v179, v231, v237, v243, v249, v255, v261, v267, v273, v281, v287, v293, v299, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, *v138, v138[1], v138[2], v307, v311.value);
          v182 = CMTimeCompare(v180, v181);
          v183 = timingArrayEntriesNeededOut;
          if (v182 && timingArrayEntriesNeededOut >= 1)
          {
            v184 = 0;
            p_presentationTimeStamp = &v171->presentationTimeStamp;
            do
            {
              v186 = *&p_presentationTimeStamp->value;
              valuePtr.epoch = p_presentationTimeStamp->epoch;
              *&valuePtr.value = v186;
              rhs = v311;
              CMTimeAdd(&v308, &valuePtr, &rhs);
              v187 = *&v308.value;
              p_presentationTimeStamp->epoch = v308.epoch;
              *&p_presentationTimeStamp->value = v187;
              p_presentationTimeStamp += 3;
              ++v184;
              v183 = timingArrayEntriesNeededOut;
            }

            while (timingArrayEntriesNeededOut > v184);
          }

          v188 = CMSampleBufferCreateCopyWithNewTiming(*MEMORY[0x1E695E480], v2, v183, v171, &v314);
          if (v188)
          {
            v110 = v188;
            v208 = v314;
          }

          else
          {
            OUTLINED_FUNCTION_45_22(v188, v189, v190, v191, v192, v193, v194, v195, v232, v238, v244, v250, v256, v262, v268, v274, v282, v288, v294, v300, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v282, v288, v308.epoch, v309.value, *&v309.timescale, v309.epoch, *&v310.value);
            v204 = OUTLINED_FUNCTION_52_22(v196, v197, v198, v199, v200, v201, v202, v203, v233, v239, v245, v251, v257, v263, v269, v275, v283, v289, v295, v301, v302.value, *&v302.timescale, v302.epoch, sampleBufferOut, rhs.value, *&rhs.timescale, rhs.epoch, v305, valuePtr.value, *&valuePtr.timescale, valuePtr.epoch, v307, v308.value);
            CMTimeAdd(v206, v204, v205);
            v308 = v309;
            v207 = CMTimeCopyAsDictionary(&v308, 0);
            v208 = v314;
            if (v207)
            {
              v209 = v207;
              CMSetAttachment(v314, v136, v207, 1u);
              sampleBufferOut = v314;
              v314 = 0;
              free(v171);
              CFRelease(v209);
              goto LABEL_194;
            }

            v110 = 4294950914;
          }

          free(v171);
          if (!v208)
          {
            goto LABEL_206;
          }

          v224 = v208;
        }

        else
        {
          v135 = CMSampleBufferCreateCopy(*MEMORY[0x1E695E480], v2, &sampleBufferOut);
          if (!v135)
          {
            if (*(v131 + 103))
            {
              CMSetAttachment(sampleBufferOut, *MEMORY[0x1E69604D0], *MEMORY[0x1E695E4D0], 1u);
            }

            else if (dword_1EAF17BD8)
            {
              LODWORD(type.value) = 0;
              LOBYTE(v311.value) = 0;
              v139 = OUTLINED_FUNCTION_69_12();
              os_log_type_enabled(v139, v311.value);
              OUTLINED_FUNCTION_46();
              if (FormatDescription)
              {
                if (v1)
                {
                  v140 = (CMBaseObjectGetDerivedStorage() + 488);
                }

                else
                {
                  v140 = "";
                }

                v276 = v140;
                OUTLINED_FUNCTION_18_50();
                Seconds = CMTimeGetSeconds(&cf[0].start);
                v213 = *(v131 + 220);
                v214 = *(v131 + 228);
                OUTLINED_FUNCTION_43_25();
                v215 = CMTimeGetSeconds(&cf[0].start);
                LODWORD(start.value) = 136317186;
                *(&start.value + 4) = "audioRenderer_copySBufUpdatedTimingForEnqueueing";
                LOWORD(start.flags) = 2048;
                *(&start.flags + 2) = v1;
                HIWORD(start.epoch) = 2082;
                v318 = v276;
                v319 = 2048;
                v320 = *&Seconds;
                v321 = 2048;
                v322 = v213;
                v323 = 1024;
                v324 = v214;
                v325 = 2048;
                v326 = v215;
                v327 = 2048;
                v328 = v132;
                v329 = 1024;
                v330 = timescale;
                OUTLINED_FUNCTION_8_92();
                _os_log_send_and_compose_impl();
              }

              OUTLINED_FUNCTION_7();
              OUTLINED_FUNCTION_238_0();
            }

LABEL_194:
            v2 = sampleBufferOut;
            if (sampleBufferOut)
            {
              goto LABEL_195;
            }

            goto LABEL_205;
          }

          v110 = v135;
          v224 = sampleBufferOut;
          if (!sampleBufferOut)
          {
            goto LABEL_206;
          }
        }

        CFRelease(v224);
        goto LABEL_206;
      }

LABEL_205:
      v110 = 0;
      goto LABEL_206;
    }
  }

  CFRetain(v2);
LABEL_195:
  FigEndpointStreamAudioEngineSbufTracerDebugPrint(v2);
  v216 = *(v0 + 48);
  v217 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (v217)
  {
    v218 = v217(v216, v2);
    if (v218)
    {
      v110 = v218;
    }

    else
    {
      CMSampleBufferGetOutputPresentationTimeStamp(&start, v2);
      CMSampleBufferGetOutputDuration(duration, v2);
      CMTimeRangeMake(cf, &start, duration);
      v315 = cf[0].start.value;
      v316 = cf[0].start.timescale;
      v110 = 0;
      if ((cf[0].start.flags & 1) != 0 && (cf[0].duration.flags & 1) != 0 && !cf[0].duration.epoch && (cf[0].duration.value & 0x8000000000000000) == 0)
      {
        OUTLINED_FUNCTION_31_30();
        CMTimeRangeGetEnd(&start, cf);
        *(v0 + 220) = start;
        OUTLINED_FUNCTION_31_30();
        v110 = FigTimeRangeSetAddTimeRange();
        if (!v110)
        {
          audioRenderer_updateUnderrunState(v1);
        }
      }
    }
  }

  else
  {
    v110 = 4294954514;
  }

  FigSimpleMutexUnlock();
  CFRelease(v2);
  return v110;
}

uint64_t audioRenderer_copyClock(uint64_t a1, CFTypeRef *a2)
{
  CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294950916;
  }

  OUTLINED_FUNCTION_44_28();
  if (*(v2 + 473))
  {
    v4 = 4294954511;
  }

  else
  {
    v4 = 0;
    *a2 = CFRetain(*(v2 + 64));
  }

  FigSimpleMutexUnlock();
  return v4;
}

uint64_t audioRenderer_isSpatializationAllowed()
{
  CMBaseObjectGetDerivedStorage();
  v0 = FigCFEqual();
  theDict = 0;
  v1 = *(CMBaseObjectGetDerivedStorage() + 160);
  if (v1)
  {
    v2 = v0 ? 1936684398 : 1836019574;
    if (!FPSupport_CreateAudioSessionSpatializationCapabilities(v1, v2, &theDict))
    {
      v3 = theDict;
      if (theDict)
      {
        Value = CFDictionaryGetValue(theDict, @"SpatialCapabilitiesKey_spatialAudioSources");
        if (Value)
        {
          v5 = Value;
          FigCFDictionaryGetBooleanIfPresent();
          if (CFArrayGetCount(v5) >= 1)
          {
            v6 = 0;
            do
            {
              FigCFArrayGetInt32AtIndex();
              ++v6;
            }

            while (v6 < CFArrayGetCount(v5));
          }

          FigCFEqual();
        }

        CFRelease(v3);
      }
    }
  }

  return 0;
}

uint64_t audioRenderer_setMasterTimebase()
{
  OUTLINED_FUNCTION_400();
  v36 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_106(MEMORY[0x1E6960C70]);
  if (dword_1EAF17BD8)
  {
    v4 = OUTLINED_FUNCTION_12_75();
    OUTLINED_FUNCTION_304(v4, v5, v6, v7, v8, v9, v10, v11, v26, v27, v28, v29, SBYTE2(v29), BYTE3(v29), SHIDWORD(v29));
    OUTLINED_FUNCTION_46();
    if (v2)
    {
      if (v0)
      {
        v12 = (CMBaseObjectGetDerivedStorage() + 488);
      }

      else
      {
        v12 = "";
      }

      LODWORD(time2.value) = 136315906;
      *(&time2.value + 4) = "audioRenderer_setMasterTimebase";
      LOWORD(time2.flags) = 2048;
      *(&time2.flags + 2) = v0;
      HIWORD(time2.epoch) = 2082;
      v32 = v12;
      v33 = 2048;
      v34 = v1;
      OUTLINED_FUNCTION_5_138();
      _os_log_send_and_compose_impl();
      OUTLINED_FUNCTION_507();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_238_0();
  }

  if (!v1)
  {
    return 4294950916;
  }

  FigSimpleMutexLock();
  if (*(DerivedStorage + 473))
  {
    v24 = 0;
    goto LABEL_25;
  }

  v13 = *(DerivedStorage + 56);
  if (!v13)
  {
    goto LABEL_14;
  }

  FigBaseObject = FigRenderPipelineGetFigBaseObject(v13);
  v15 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v15)
  {
    v24 = 4294954514;
    goto LABEL_25;
  }

  v16 = v15(FigBaseObject, @"Timebase", v1);
  if (!v16)
  {
LABEL_14:
    Rate = CMTimebaseGetRate(v1);
    *(DerivedStorage + 96) = Rate;
    v18 = *(DerivedStorage + 24);
    if (v18 != v1)
    {
      if (!v18 || (CMTimebaseGetTime(&time1, v18), CMTimebaseGetTime(&time2, v1), CMTimeCompare(&time1, &time2)))
      {
        CMTimebaseGetTime(&v30, v1);
      }

      audioRenderer_removeNotificationListenerFromTimebase(v0, *(DerivedStorage + 24));
      v19 = *(DerivedStorage + 24);
      *(DerivedStorage + 24) = v1;
      CFRetain(v1);
      if (v19)
      {
        CFRelease(v19);
      }

      v20 = *(DerivedStorage + 24);
      v21 = CMBaseObjectGetDerivedStorage();
      if (v20)
      {
        v22 = v21;
        CMNotificationCenterGetDefaultLocalCenter();
        OUTLINED_FUNCTION_186();
        FigNotificationCenterAddWeakListener();
        CMTimebaseAddTimerDispatchSource(v20, *(v22 + 352));
      }
    }

    v23 = *(DerivedStorage + 96);
    time1 = v30;
    v16 = audioRenderer_setRateAndAnchorTime(v0, &time1, MEMORY[0x1E6960C70], v23);
  }

  v24 = v16;
LABEL_25:
  FigSimpleMutexUnlock();
  return v24;
}

void audioRenderer_flushFromMediaTimeDispatchAsync(uint64_t a1)
{
  v49 = *MEMORY[0x1E69E9840];
  v3 = *(a1 + 32);
  v2 = *(a1 + 40);
  v4 = *a1;
  v35 = *(a1 + 8);
  v5 = *(a1 + 20);
  v36 = *(a1 + 16);
  v6 = *(a1 + 24);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (*(DerivedStorage + 473))
  {
    v14 = -12785;
    goto LABEL_41;
  }

  if (dword_1EAF17BD8)
  {
    v8 = v3;
    LODWORD(lhs.value) = 0;
    LOBYTE(type.value) = 0;
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_28();
    if (v2)
    {
      if (v4)
      {
        v10 = (CMBaseObjectGetDerivedStorage() + 488);
      }

      else
      {
        v10 = "";
      }

      *&time = v35;
      *(&time + 1) = __PAIR64__(v5, v36);
      *&time_16 = v6;
      LODWORD(time2.value) = 136316418;
      *(&time2.value + 4) = "audioRenderer_flushFromMediaTimeSync";
      LOWORD(time2.flags) = 2048;
      *(&time2.flags + 2) = v4;
      HIWORD(time2.epoch) = 2082;
      v38 = v10;
      v39 = 2048;
      Seconds = CMTimeGetSeconds(&time);
      v41 = 2048;
      v42 = v8;
      v43 = 2048;
      v44 = v2;
      OUTLINED_FUNCTION_4_7();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_417();
    v3 = v8;
  }

  if ((v5 & 1) == 0 || (v5 & 8) != 0 || (v5 & 0x10) != 0)
  {
    OUTLINED_FUNCTION_33_32();
    v13 = FigSignalErrorAtGM();
    goto LABEL_47;
  }

  if ((*(DerivedStorage + 232) & 1) == 0 || (time = *(DerivedStorage + 220), *&time_16 = *(DerivedStorage + 236), time2.value = v35, time2.timescale = v36, time2.flags = v5, time2.epoch = v6, CMTimeCompare(&time, &time2) < 1))
  {
    v14 = 0;
    goto LABEL_41;
  }

  if (*(*(CMBaseObjectGetVTable() + 16) + 88))
  {
    v11 = *(DerivedStorage + 56);
    v12 = *(*(CMBaseObjectGetVTable() + 16) + 88);
    if (!v12)
    {
      v14 = -12782;
      goto LABEL_41;
    }

    *&time = v35;
    *(&time + 1) = __PAIR64__(v5, v36);
    *&time_16 = v6;
    v13 = v12(v11, &time);
    if (!v13)
    {
      *(DerivedStorage + 220) = v35;
      *(DerivedStorage + 228) = v36;
      *(DerivedStorage + 232) = v5;
      *(DerivedStorage + 236) = v6;
LABEL_39:
      *&time = v35;
      *(&time + 1) = __PAIR64__(v5, v36);
      *&time_16 = v6;
      v14 = FigTimeRangeSetRemoveTimeRangesGreaterThanOrEqualToTime();
      if (!v14)
      {
        audioRenderer_updateUnderrunState(v4);
      }

      goto LABEL_41;
    }

LABEL_47:
    v14 = v13;
    goto LABEL_41;
  }

  v15 = CMBaseObjectGetDerivedStorage();
  v33 = 0;
  cf = 0;
  queueOut = 0;
  v48 = 0;
  time_16 = 0u;
  v47 = 0u;
  time = 0u;
  FigBaseObject = FigRenderPipelineGetFigBaseObject(*(v15 + 56));
  v17 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v17)
  {
    v14 = -12782;
    goto LABEL_32;
  }

  v18 = v17(FigBaseObject, @"SourceSampleBufferQueue", 0, &cf);
  if (!v18)
  {
    v19 = *MEMORY[0x1E695E480];
    CallbacksForUnsortedSampleBuffers = CMBufferQueueGetCallbacksForUnsortedSampleBuffers();
    v18 = CMBufferQueueCreate(v19, 0, CallbacksForUnsortedSampleBuffers, &queueOut);
    if (!v18)
    {
      v21 = CMBufferQueueGetCallbacksForUnsortedSampleBuffers();
      v18 = CMBufferQueueCreate(v19, 0, v21, &v33);
      if (!v18)
      {
        *&time = v4;
        *(&time + 1) = queueOut;
        *&time_16 = v33;
        *(&time_16 + 1) = v35;
        *&v47 = __PAIR64__(v5, v36);
        *(&v47 + 1) = v6;
        LODWORD(v48) = 0;
        MEMORY[0x19A8CE710](cf, audioRenderer_flushFromMediaTimeOnRenderPipelineInputQueueResetCallback, &time);
        if (!v48)
        {
          if (CMBufferQueueIsEmpty(*(&time + 1)))
          {
            LODWORD(v48) = -16385;
          }

          else if (!v48)
          {
            Head = CMBufferQueueGetHead(*(&time + 1));
            OUTLINED_FUNCTION_29_33();
            MEMORY[0x19A8CE710](v28, v29);
            CMSampleBufferGetOutputPresentationTimeStamp(&lhs, Head);
            CMSampleBufferGetOutputDuration(&type, Head);
            CMTimeAdd(&time2, &lhs, &type);
            *(v15 + 220) = time2;
            goto LABEL_31;
          }
        }

        OUTLINED_FUNCTION_29_33();
        MEMORY[0x19A8CE710](v22, v23);
LABEL_31:
        v14 = v48;
        goto LABEL_32;
      }
    }
  }

  v14 = v18;
LABEL_32:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v33)
  {
    CFRelease(v33);
  }

  if (queueOut)
  {
    CFRelease(queueOut);
  }

  if (!v14)
  {
    goto LABEL_39;
  }

LABEL_41:
  v24 = CMBaseObjectGetDerivedStorage();
  v25 = malloc_type_calloc(1uLL, 0x20uLL, 0x10A0040D98738FAuLL);
  if (v25)
  {
    v26 = v25;
    *v25 = CFRetain(v4);
    v26[1] = v3;
    v26[2] = v2;
    *(v26 + 6) = v14;
    dispatch_async_f(*(v24 + 8), v26, audioRenderer_callFlushFromMediaTimeCallbackAsync);
  }

  FigSimpleMutexUnlock();
  CFRelease(*a1);
  free(a1);
}

void audioRenderer_flushFromMediaTimeOnRenderPipelineInputQueueResetCallback()
{
  OUTLINED_FUNCTION_187();
  memset(&v19, 0, sizeof(v19));
  sampleBufferOut = 0;
  CMBufferQueueEnqueue(*(v2 + 16), v1);
  if (!*(v0 + 48))
  {
    CMSampleBufferGetOutputPresentationTimeStamp(&v19, v1);
    *&time1.start.value = *(v0 + 24);
    time1.start.epoch = *(v0 + 40);
    time2.start = v19;
    if (CMTimeCompare(&time1.start, &time2.start) < 0)
    {
      if (CMBufferQueueIsEmpty(*(v0 + 8)))
      {
        *(v0 + 48) = -16385;
      }
    }

    else
    {
      memset(&time1, 0, sizeof(time1));
      CMSampleBufferGetOutputDuration(&time2.start, v1);
      start = v19;
      CMTimeRangeMake(&time1, &start, &time2.start);
      OUTLINED_FUNCTION_57_18();
      CMTimeRangeGetEnd(&start, &time2);
      OUTLINED_FUNCTION_58_15();
      if (CMTimeCompare(&start, &time2.start) <= 0)
      {
        CMBufferQueueEnqueue(*(v0 + 8), v1);
      }

      else
      {
        *&start.value = *MEMORY[0x1E6960CC0];
        v3 = *(MEMORY[0x1E6960CC0] + 16);
        start.epoch = v3;
        *&v14.value = *&start.value;
        v14.epoch = v3;
        v11 = *&start.value;
        *&v13.value = *&start.value;
        v13.epoch = v3;
        v4 = *MEMORY[0x1E695E480];
        v5 = CFGetAllocator(*MEMORY[0x1E695E480]);
        v6 = CMSampleBufferCreateCopy(v5, v1, &sampleBufferOut);
        *(v0 + 48) = v6;
        if (!v6)
        {
          OUTLINED_FUNCTION_57_18();
          CMTimeRangeGetEnd(&lhs, &time2);
          OUTLINED_FUNCTION_58_15();
          CMTimeSubtract(&v14, &lhs, &time2.start);
          v7 = *MEMORY[0x1E6960558];
          v8 = CMGetAttachment(v1, *MEMORY[0x1E6960558], 0);
          if (v8)
          {
            CMTimeMakeFromDictionary(&start, v8);
          }

          else
          {
            *&start.value = v11;
            start.epoch = v3;
          }

          time2.start = start;
          lhs = v14;
          CMTimeAdd(&v13, &time2.start, &lhs);
          v9 = sampleBufferOut;
          time2.start = v13;
          v10 = CMTimeCopyAsDictionary(&time2.start, v4);
          CMSetAttachment(v9, v7, v10, 1u);
          if (v10)
          {
            CFRelease(v10);
          }

          CMBufferQueueEnqueue(*(v0 + 8), sampleBufferOut);
        }

        if (sampleBufferOut)
        {
          CFRelease(sampleBufferOut);
        }
      }
    }
  }
}

uint64_t audioRenderer_flushWithType_cold_1(uint64_t a1, uint64_t a2, int a3)
{
  OUTLINED_FUNCTION_187();
  v7 = *(v6 + 56);
  if (v7)
  {
    v8 = *(*(CMBaseObjectGetVTable() + 16) + 64);
    if (v8)
    {
      v8(v7, 1);
    }
  }

  audioRenderer_tearDownFARP(v3, a3);
  v9 = MEMORY[0x1E6960C98];
  v10 = *(MEMORY[0x1E6960C98] + 16);
  v4[26] = *MEMORY[0x1E6960C98];
  v4[27] = v10;
  v4[28] = *(v9 + 32);
  audioRenderer_updateUnderrunState(v3);
  FigSimpleMutexUnlock();
  OUTLINED_FUNCTION_270();
  return audioRenderer_postNotification();
}

uint64_t audioRenderer_setRateAndAnchorTime_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigStreamTrackListAddTrack_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL FigStreamTrackListAddTrack_cold_2(const void *a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v4 = FigSignalErrorAtGM();
  *a2 = v4;
  CFRelease(a1);
  return v4 == 0;
}

void FigStreamTrackListAddTrack_cold_3(void *cf, uint64_t a2, uint64_t a3, CFArrayRef *a4)
{
  v5 = cf[4];
  if (v5 != -1 && v5 >= a2)
  {
    if (!*a4 || CFArrayGetCount(*a4) <= 1)
    {
      a3 = -1;
    }

    cf[4] = a3;
  }

  CFRelease(cf);
}

uint64_t FigStreamTrackListAddTrack_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigStreamTrackListRemoveTrack_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigStreamTrackListRemoveTrack_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL FigStreamTrackListCreateIterator_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

uint64_t FigStreamTrackListCreateIterator_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigStreamTrackListCreate_cold_1(uint64_t a1, const void *a2, _DWORD *a3)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a3 = FigSignalErrorAtGM();

  CFRelease(a2);
}

uint64_t FigStreamTrackListCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigStreamTrackListCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigStreamTrackListIteratorResetAndCopyTrack_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigStreamTrackListIteratorCopyNextTrack_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigStreamTrackListIteratorCopyNextTrack_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSampleBufferRenderSynchronizerCentralCreate(const __CFAllocator *a1, const void *a2, void *a3)
{
  v3 = 4294950926;
  if (a2 && a3)
  {
    FigSampleBufferRenderSynchronizerGetClassID();
    v7 = CMDerivedObjectCreate();
    if (v7)
    {
      return v7;
    }

    else
    {
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      *DerivedStorage = a2;
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_3_164();
      FigNotificationCenterAddWeakListener();
      CFRetain(a2);
      Mutable = CFSetCreateMutable(a1, 0, MEMORY[0x1E695E9F8]);
      DerivedStorage[2] = Mutable;
      if (Mutable && (v10 = FigSimpleMutexCreate(), (DerivedStorage[1] = v10) != 0))
      {
        v3 = 0;
        *a3 = 0;
      }

      else
      {
        return 4294950924;
      }
    }
  }

  return v3;
}

uint64_t synchronizerCentral_Finalize(void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    CMNotificationCenterGetDefaultLocalCenter();
    OUTLINED_FUNCTION_3_164();
    FigNotificationCenterRemoveWeakListener();
    if (*DerivedStorage)
    {
      CFRelease(*DerivedStorage);
      *DerivedStorage = 0;
    }
  }

  v3 = CMBaseObjectGetDerivedStorage();
  v4 = *(v3 + 16);
  if (v4)
  {
    if (CFSetGetCount(v4) >= 1)
    {
      Copy = CFSetCreateCopy(*MEMORY[0x1E695E480], *(v3 + 16));
      CFSetApplyFunction(Copy, synchronizerCentral_unstashAllRenderersInFinalizeSetApplierFunction, a1);
      if (Copy)
      {
        CFRelease(Copy);
      }
    }
  }

  v6 = *(DerivedStorage + 16);
  if (v6)
  {
    CFRelease(v6);
    *(DerivedStorage + 16) = 0;
  }

  return FigSimpleMutexDestroy();
}

uint64_t synchronizerCentral_unstashRenderer(uint64_t a1, const void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (CFSetContainsValue(*(DerivedStorage + 16), a2))
  {
    CFSetRemoveValue(*(DerivedStorage + 16), a2);
    CMNotificationCenterGetDefaultLocalCenter();
    OUTLINED_FUNCTION_2_195();
    FigNotificationCenterRemoveWeakListener();
    CMNotificationCenterGetDefaultLocalCenter();
    OUTLINED_FUNCTION_1_198();
    FigNotificationCenterRemoveWeakListener();
  }

  return FigSimpleMutexUnlock();
}

void synchronizerCentral_audioRendererInterruptedNotificationHandler(uint64_t a1, unint64_t a2, uint64_t a3, const void *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  cf = 0;
  FigSimpleMutexLock();
  if (*(DerivedStorage + 52) || !CFSetContainsValue(*(DerivedStorage + 16), a4))
  {
    goto LABEL_11;
  }

  v7 = MEMORY[0x1E6960C70];
  if (*(DerivedStorage + 24) != 0.0)
  {
    v8 = CMBaseObjectGetDerivedStorage();
    context.epoch = 1;
    *&context.value = a2;
    v9 = OUTLINED_FUNCTION_0_219(v8);
    CFSetApplyFunction(v9, v10, &context);
    v11 = *DerivedStorage;
    v12 = *(*(CMBaseObjectGetVTable() + 16) + 24);
    if (!v12)
    {
      goto LABEL_11;
    }

    context = *v7;
    if (v12(v11, &context, 0.0))
    {
      goto LABEL_11;
    }

    v13 = CMBaseObjectGetDerivedStorage();
    context.epoch = 0;
    *&context.value = a2;
    v14 = OUTLINED_FUNCTION_0_219(v13);
    CFSetApplyFunction(v14, v15, &context);
  }

  v16 = *DerivedStorage;
  v17 = *(*(CMBaseObjectGetVTable() + 16) + 32);
  if (v17 && !v17(v16, &cf))
  {
    CMTimebaseGetTime(&context, cf);
    *(DerivedStorage + 28) = *&context.value;
    epoch = context.epoch;
  }

  else
  {
    *(DerivedStorage + 28) = *&v7->value;
    epoch = v7->epoch;
  }

  *(DerivedStorage + 44) = epoch;
  *(DerivedStorage + 52) = 1;
LABEL_11:
  FigSimpleMutexUnlock();
  if (cf)
  {
    CFRelease(cf);
  }
}

uint64_t synchronizerCentral_audioRendererInterruptionEndedNotificationHandler(uint64_t a1, uint64_t a2, uint64_t a3, const void *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (*(DerivedStorage + 52) && CFSetContainsValue(*(DerivedStorage + 16), a4))
  {
    *(DerivedStorage + 52) = 0;
    OUTLINED_FUNCTION_4_160(MEMORY[0x1E6960C70]);
  }

  return FigSimpleMutexUnlock();
}

uint64_t synchronizerCentral_AddAudioRenderer(uint64_t a1, const void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = *DerivedStorage;
  v6 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v6)
  {
    return 4294954514;
  }

  result = v6(v5, a2);
  if (!result)
  {
    v8 = CMBaseObjectGetDerivedStorage();
    FigSimpleMutexLock();
    if (!CFSetContainsValue(*(v8 + 16), a2))
    {
      CFSetAddValue(*(v8 + 16), a2);
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_2_195();
      OUTLINED_FUNCTION_5_139();
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_1_198();
      OUTLINED_FUNCTION_5_139();
    }

    FigSimpleMutexUnlock();
    FigSimpleMutexLock();
    if (*(DerivedStorage + 24) > 0.0 && CFSetGetCount(*(DerivedStorage + 16)) == 1)
    {
      v9 = *(DerivedStorage + 24);
      v10 = CMBaseObjectGetDerivedStorage();
      v16 = 1;
      context = a1;
      v14 = 0;
      v15 = v9;
      v11 = OUTLINED_FUNCTION_0_219(v10);
      CFSetApplyFunction(v11, v12, &context);
    }

    FigSimpleMutexUnlock();
    return 0;
  }

  return result;
}

uint64_t synchronizerCentral_RemoveAudioRenderer(uint64_t a1, const void *a2)
{
  v4 = *CMBaseObjectGetDerivedStorage();
  v5 = *(*(CMBaseObjectGetVTable() + 16) + 16);
  if (!v5)
  {
    return 4294954514;
  }

  result = v5(v4, a2);
  if (!result)
  {
    synchronizerCentral_unstashRenderer(a1, a2);
    return 0;
  }

  return result;
}

uint64_t synchronizerCentral_SetRateAndAnchorTime(uint64_t a1, __int128 *a2, __int128 *a3, float a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  v9 = CMBaseObjectGetDerivedStorage();
  v26 = 1;
  *&context = a1;
  DWORD2(context) = 0;
  *(&context + 3) = a4;
  v10 = OUTLINED_FUNCTION_0_219(v9);
  CFSetApplyFunction(v10, v11, &context);
  v12 = *DerivedStorage;
  v21 = *a2;
  v22 = *(a2 + 2);
  v19 = *a3;
  v20 = *(a3 + 2);
  v13 = *(*(CMBaseObjectGetVTable() + 16) + 56);
  if (v13)
  {
    context = v21;
    v26 = v22;
    v23 = v19;
    v24 = v20;
    v14 = v13(v12, &context, &v23, a4);
    if (!v14)
    {
      v15 = CMBaseObjectGetDerivedStorage();
      v26 = 0;
      *&context = a1;
      DWORD2(context) = 0;
      *(&context + 3) = a4;
      v16 = OUTLINED_FUNCTION_0_219(v15);
      CFSetApplyFunction(v16, v17, &context);
      *(DerivedStorage + 24) = a4;
      *(DerivedStorage + 52) = 0;
      OUTLINED_FUNCTION_4_160(MEMORY[0x1E6960C70]);
    }
  }

  else
  {
    v14 = 4294954514;
  }

  FigSimpleMutexUnlock();
  return v14;
}

uint64_t FigTTMLDocumentWriterCreateLanguageIdentifierInserter_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterCreateLanguageIdentifierInserter_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLDocumentWriterLanguageIdentifierInserter_CopyProperty_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLDocumentWriterLanguageIdentifierInserter_SetProperty_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLDocumentWriterLanguageIdentifierInserter_SetProperty_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetParameters(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  CMBaseObjectGetDerivedStorage();
  if (a4 < 1)
  {
    return 0;
  }

  while (1)
  {
    result = ATAudioProcessingNodeSetParameter();
    if (result)
    {
      break;
    }

    a3 += 4;
    a2 += 12;
    if (!--a4)
    {
      return 0;
    }
  }

  return result;
}

uint64_t FigAudioProcessingUnitCreateWithOptions_cold_1(uint64_t a1, uint64_t a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *(*a2 + 24) = result;
  return result;
}

uint64_t FigAudioProcessingUnitCreateCopy_cold_1(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t fapu_SetProperty_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_5()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t fapu_SetProperty_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_8()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t fapu_SetProperty_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_10(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fapu_SetProperty_cold_11()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t fapu_SetProperty_cold_12(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDDispatchKeyResponseNotification(uint64_t a1, uint64_t a2, uint64_t a3, int a4)
{
  if (!a4)
  {
    v5 = *MEMORY[0x1E695E480];
    Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (!Mutable)
    {
      fig_log_get_emitter();
      FigSignalErrorAtGM();
      return a2;
    }

    v7 = Mutable;
    if (a2)
    {
      v8 = CFErrorCreate(v5, *MEMORY[0x1E695E638], a2, 0);
      if (v8)
      {
        v9 = v8;
        CFDictionarySetValue(v7, *MEMORY[0x1E6961020], v8);
        FigCFDictionarySetInt64();
        dispatch_get_global_queue(0, 0);
        CMNotificationCenterGetDefaultLocalCenter();
        OUTLINED_FUNCTION_2_196();
        CFRelease(v7);
        v10 = v9;
LABEL_8:
        CFRelease(v10);
        return a2;
      }

      fig_log_get_emitter();
      FigSignalErrorAtGM();
    }

    else
    {
      FigCFDictionarySetInt64();
      dispatch_get_global_queue(0, 0);
      CMNotificationCenterGetDefaultLocalCenter();
      OUTLINED_FUNCTION_2_196();
    }

    v10 = v7;
    goto LABEL_8;
  }

  return a2;
}

uint64_t GetMovieIDGuts_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t GetMovieIDGuts_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDCopyInfoFromPackagedPersistentKey_cold_1(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t PKDCopyInfoFromPackagedPersistentKey_cold_2(char a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a2 = FigSignalErrorAtGM();
  return a1 & 1;
}

uint64_t PKDCopyInfoFromPackagedPersistentKey_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDCopyDefaultKeyIDFromSinfArray_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDPersistentKeyIsForCTRModeDecryption_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDPersistentKeyIsForCTRModeDecryption_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDCopyDecryptFormatTypeFromSinfArray_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigPKDParsePSSHAndCopyContentKeyInfo_cold_1(const void *a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a2 = FigSignalErrorAtGM();
  CFRelease(a1);
}

uint64_t FigPKDParsePSSHAndCopyContentKeyInfo_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDParsePSSHAndCopyContentKeyInfo_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDParsePSSHAndCopyContentKeyInfo_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDParsePSSHAndCopyContentKeyInfo_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigPKDParsePSSHAndCopyContentKeyInfo_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDGetCPCBitfieldFromLabels_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t PKDGetSystemCPC_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = PKDGetSystemCPC_err;
  return result;
}

uint64_t PKDCopyIdentifierForFormatDescription_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t ffp_BytePumpFn(int a1, int a2, OpaqueCMBlockBuffer *a3, char a4, int a5, int a6, int a7, __int128 *a8, uint64_t a9, uint64_t a10, uint64_t a11, CFErrorRef err)
{
  if (err)
  {
    Code = CFErrorGetCode(err);
  }

  else
  {
    Code = 0;
  }

  FigRetainProxyLockMutex();
  if (!FigRetainProxyIsInvalidated())
  {
    Owner = FigRetainProxyGetOwner();
    v18 = Owner;
    if (Code == -12648)
    {
      ffp_StartRun(Owner, *(Owner + 88) + 1);
    }

    else if (Code)
    {
      ffp_Halt(Owner, Code);
    }

    else
    {
      if (a4 & 0x10) != 0 && (*(a8 + 12))
      {
        v19 = *a8;
        *(Owner + 120) = *(a8 + 2);
        *(Owner + 104) = v19;
        *(Owner + 83) = 1;
      }

      if ((a4 & 0x20) != 0 && *(Owner + 83))
      {
        if (*(Owner + 88) == 3)
        {
          ++*(Owner + 160);
        }

        if (ffp_TakeNextStep(Owner) == -12648)
        {
          ffp_StartRun(v18, v18[11] + 1);
        }
      }

      if (a3)
      {
        if (v18[11] == 3)
        {
          v20 = v18[19] + CMBlockBufferGetDataLength(a3);
          v18[19] = v20;
          v21 = v18[21];
          if (v21)
          {
            v22 = *(*(CMBaseObjectGetVTable() + 16) + 40);
            if (v22)
            {
              v22(v21, 0x1F0B64578, 0x1F0B65678, v20 >> 10);
            }
          }
        }
      }
    }
  }

  return FigRetainProxyUnlockMutex();
}

uint64_t FigFramePrefetcherCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFramePrefetcherCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFramePrefetcherCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFramePrefetcherCreate_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFramePrefetcherCreate_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Identifier_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Position_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Position_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ClipOverflow_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ShowBackground_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Opacity_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ForcedDisplay_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_BackgroundColor_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_DisplayAlign_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Hidden_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Invisible_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Padding_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Padding_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Padding_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Padding_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Padding_cold_5(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ZIndex_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_DisplayAspectRatio_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_DisplayAspectRatio_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ActiveArea_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ActiveArea_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ActiveArea_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ActiveArea_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ActiveArea_cold_5(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_ActiveArea_cold_6(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_CellResolution_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_CellResolution_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_CellResolution_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_CellResolution_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_TextColor_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_FontWeight_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_FontStyle_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_Decoration_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_TextAlign_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_TextCombine_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_LinePadding_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_LinePadding_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_LineHeight_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_LineHeight_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_MultiRowAlign_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_TextOutline_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_PreventLineWrapping_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_FontFamily_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_FontFamily_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_FontSize_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_WritingDirection_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterMapPropertyToAttribute_FillLineGap_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigSubtitleStringConformerCopyConformedStringsForSubtitleSample(unsigned int *a1, __CFArray **a2)
{
  v2 = *a1;
  v74 = *(a1 + 1);
  v3 = *(a1 + 3);
  theDict = *(a1 + 5);
  LODWORD(v83) = *(a1 + 29);
  HIDWORD(v83) = *(a1 + 28);
  v86 = *(a1 + 5);
  v87 = *(a1 + 4);
  v4 = *(a1 + 6);
  v5 = *(a1 + 7);
  v88 = *(a1 + 4);
  v6 = *(a1 + 80);
  if (!v2 && v74 || v2 == 1 && v3)
  {
    v71 = a2;
    key = @"SubtitleContent";
    v7 = CFDictionaryGetValue(theDict, @"SubtitleContent");
    v8 = v7;
    if (v7)
    {
      Count = CFArrayGetCount(v7);
    }

    else
    {
      Count = 0;
    }

    allocator = *MEMORY[0x1E695E480];
    Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], Count, MEMORY[0x1E695E9C0]);
    LODWORD(v91[0].location) = 0;
    v79 = v3;
    FigCFDictionaryGetInt32IfPresent();
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
    if (!FigSignalErrorAtGM())
    {
      v11 = 0;
      if (Count >= 1)
      {
        v12 = 0;
        v77 = *(MEMORY[0x1E695F050] + 8);
        v78 = *MEMORY[0x1E695F050];
        v75 = *(MEMORY[0x1E695F050] + 24);
        v76 = *(MEMORY[0x1E695F050] + 16);
        v72 = vmuld_lane_f64(0.15, v88, 1);
        v80 = @"kFigSubtitleRenderer_SuggestTextLayout";
        attrName = @"kFigSubtitleRenderer_FontSizeToUse";
        while (1)
        {
          v13 = COERCE_DOUBLE(CFArrayGetValueAtIndex(v8, v12));
          value = 0;
          width = v4;
          height = v5;
          v16 = 0.0;
          y = v86;
          x = v87;
          if (!v6)
          {
            break;
          }

LABEL_34:
          if (!v11(*&v13, v6, &value, v88, v88.n128_f64[1], x, y, width, height, v16))
          {
            CFArrayAppendValue(Mutable, value);
          }

          if (value)
          {
            CFRelease(value);
          }

          if (Count == ++v12)
          {
            goto LABEL_41;
          }
        }

        v19 = *(MEMORY[0x1E695F050] + 16);
        rect.origin = *MEMORY[0x1E695F050];
        rect.size = v19;
        v100 = 0;
        valuePtr = 0.0;
        v99 = 0;
        longestEffectiveRange = rect.origin;
        v98 = v19;
        if (v2)
        {
          v20 = v79;
          FigCaptionRendererSessionClear(v79);
          FigCaptionRendererSessionSetLayoutContext_Viewport(v79);
          FigCaptionRendererSessionSetLayoutContext_VideoSize(v79, v88.n128_f64[0], v88.n128_f64[1]);
          FigCaptionRendererSessionSetLayoutContext_Gravity(v79, 0);
          FigCaptionRendererSessionSetLayoutContext_Overscan(v79, 0);
          v29 = OUTLINED_FUNCTION_1_200(v21, v22, v23, v24, v25, v26, v27, v28, v70, *&v71, v72, *&allocator, *&v74, v75, v76, v77, v78, *&v79, *&v80, *&attrName, *&key, v83, *&theDict, v85, v86, v87);
          FigSubtitleSampleCreatePropertyList(v30, v31, v32, v33, v29, v34, v35, v36);
          v91[0].location = 0;
          FigCaptionRendererLayoutContextCreate(v91);
          if (!v91[0].location)
          {
            v57 = 0;
LABEL_26:
            x = rect.origin.x;
            y = rect.origin.y;
            width = rect.size.width;
            height = rect.size.height;
            v16 = valuePtr;
            if (v99)
            {
              CFRelease(v99);
            }

            if (v100)
            {
              CFRelease(v100);
            }

            if (v57)
            {
              CFRelease(v57);
            }

            if (v2 == 1)
            {
              y = v88.n128_f64[1] - y - height;
            }

            goto LABEL_34;
          }

          FigCaptionRendererSessionSetCaptionSample(v20);
          FigCaptionRendererSessionUpdateLegibleOutputContext(v20, v91[0].location);
          cf = 0;
          FigCaptionRendererLayoutContextGetSubtitleSample(v91[0].location, &cf);
          if (cf)
          {
            v37 = CFRetain(cf);
          }

          else
          {
            v37 = 0;
          }

          v99 = v37;
          if (v91[0].location)
          {
            CFRelease(v91[0].location);
          }
        }

        else
        {
          v94 = 0;
          v93 = 0;
          MutableCopy = CFDictionaryCreateMutableCopy(allocator, 0, theDict);
          v45 = OUTLINED_FUNCTION_1_200(v39, v40, v41, v42, 0.0, 0.0, v43, v44, v70, *&v71, v72, *&allocator, *&v74, v75, v76, v77, v78, *&v79, *&v80, *&attrName, *&key, v83, *&theDict, v85, v86, v87);
          FigSubtitleSampleInsertInfoForRenderer(v46, v45, v49, v50, v51, v52, v53, v88.n128_f64[0], v72, v47, v48);
          v91[0].location = 0;
          v91[0].length = 0;
          v91[1] = v88;
          v91[2] = v88;
          v54 = *(MEMORY[0x1E695EFD0] + 16);
          v91[3] = *MEMORY[0x1E695EFD0];
          v91[4] = v54;
          v91[5] = *(MEMORY[0x1E695EFD0] + 32);
          v92 = 0;
          v95 = 0x3FF0000000000000;
          v96 = 1;
          FigSubtitleRendererLayout(v74, MutableCopy, v91, &longestEffectiveRange, &v99);
          if (MutableCopy)
          {
            CFRelease(MutableCopy);
          }

          v37 = v99;
        }

        v55 = CFDictionaryGetValue(v37, key);
        ValueAtIndex = CFArrayGetValueAtIndex(v55, v12);
        v57 = ValueAtIndex;
        if (ValueAtIndex)
        {
          v85 = v13;
          v58 = v6;
          v59 = v11;
          CFRetain(ValueAtIndex);
          Length = CFAttributedStringGetLength(v57);
          if (Length > 0)
          {
            v61 = Length;
            v91[0].location = 0;
            v91[0].length = 0;
            longestEffectiveRange.location = 0;
            longestEffectiveRange.length = 0;
            v103.location = 0;
            v103.length = Length;
            v62 = Mutable;
            v63 = Count;
            v64 = v8;
            v65 = v2;
            AttributeAndLongestEffectiveRange = CFAttributedStringGetAttributeAndLongestEffectiveRange(v57, 0, attrName, v103, v91);
            v104.location = 0;
            v104.length = v61;
            v67 = CFAttributedStringGetAttributeAndLongestEffectiveRange(v57, 0, v80, v104, &longestEffectiveRange);
            v68 = AttributeAndLongestEffectiveRange;
            v2 = v65;
            v8 = v64;
            Count = v63;
            Mutable = v62;
            CFNumberGetValue(v68, kCFNumberCGFloatType, &valuePtr);
            CGRectMakeWithDictionaryRepresentation(v67, &rect);
          }

          v11 = v59;
          v6 = v58;
          v13 = v85;
        }

        goto LABEL_26;
      }

LABEL_41:
      *v71 = Mutable;
    }

    OUTLINED_FUNCTION_812();
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();
    OUTLINED_FUNCTION_812();

    FigSignalErrorAtGM();
  }
}

uint64_t sbtlstringconformer_addPositioningAttributesToString(double a1, double a2)
{
  if (a1 > 0.0 && a2 > 0.0)
  {
    result = FigCFAttributedStringSetDouble();
    if (!result)
    {
      result = FigCFAttributedStringSetDouble();
      if (!result)
      {

        return FigCFAttributedStringSetDouble();
      }
    }
  }

  return result;
}

int64_t remoteXPCFigCaptionGroupConverter_CreateConverter(_OWORD *a1, uint64_t a2, uint64_t a3, void *a4)
{
  if (qword_1ED4CBCB0 != -1)
  {
    dispatch_once(&qword_1ED4CBCB0, &__block_literal_global_143);
  }

  int64 = _MergedGlobals_145;
  if (!_MergedGlobals_145)
  {
    FigCaptionGroupConverterFromSampleBufferGetClassID();
    v7 = CMDerivedObjectCreate();
    if (!v7)
    {
      v7 = FigXPCCreateBasicMessage();
      if (!v7)
      {
        CMBaseObjectGetDerivedStorage();
        v7 = FigXPCRemoteClientCopyMemoryOrigin();
        if (!v7)
        {
          v7 = FigXPCRemoteClientSendSyncMessageCreatingReply();
          if (!v7)
          {
            int64 = xpc_dictionary_get_int64(0, *MEMORY[0x1E6961590]);
            if (int64)
            {
              goto LABEL_14;
            }

            uint64 = xpc_dictionary_get_uint64(0, *MEMORY[0x1E69615A0]);
            DerivedStorage = CMBaseObjectGetDerivedStorage();
            if (!DerivedStorage)
            {
              fig_log_get_emitter();
              OUTLINED_FUNCTION_2_10();
              v11 = FigSignalErrorAtGM();
LABEL_12:
              int64 = v11;
              if (!v11)
              {
                *a4 = 0;
              }

              goto LABEL_14;
            }

            v10 = DerivedStorage;
            *DerivedStorage = uint64;
            DerivedStorage[8] = FigSemaphoreCreate();
            *(v10 + 3) = *a1;
            v7 = FigXPCRemoteClientAssociateObject();
            if (!v7)
            {
              v10[5] = 0;
              v10[7] = 0;
              v11 = FigCaptionSerializerCreate();
              goto LABEL_12;
            }
          }
        }
      }
    }

    int64 = v7;
  }

LABEL_14:
  FigXPCRemoteClientKillServerOnTimeout();
  return int64;
}

uint64_t remoteXPCFigCaptionGroupConverterClient_HandleServerMessage()
{
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
    return OpCode;
  }

  else
  {
    return 4294951138;
  }
}

uint64_t remoteXPCFigCaptionGroupConverter_Finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v1 = DerivedStorage;
  if (DerivedStorage)
  {
    if (!*(DerivedStorage + 8))
    {
      *(DerivedStorage + 8) = 1;
      if (!FigXPCRemoteClientDisassociateObject() && (*(v1 + 9) || !FigXPCCreateBasicMessage() && !FigXPCRemoteClientSendSyncMessage()))
      {
        *v1 = 0;
      }
    }
  }

  else
  {
    fig_log_get_emitter();
    FigSignalErrorAtGM();
  }

  FigXPCRelease();
  v2 = *(v1 + 40);
  if (v2)
  {
    CFRelease(v2);
    *(v1 + 40) = 0;
  }

  v3 = *(v1 + 48);
  if (v3)
  {
    CFRelease(v3);
    *(v1 + 48) = 0;
  }

  v4 = *(v1 + 56);
  if (v4)
  {
    CFRelease(v4);
    *(v1 + 56) = 0;
  }

  v5 = *(v1 + 16);
  if (v5)
  {
    CFRelease(v5);
    *(v1 + 16) = 0;
  }

  result = FigSemaphoreDestroy();
  *(v1 + 64) = 0;
  return result;
}

uint64_t remoteXPCFigCaptionGroupConverter_CopyProperty(uint64_t a1)
{
  v4 = 0;
  ObjectID = remoteXPCFigCaptionGroupConverter_GetObjectID(a1, &v4);
  if (!ObjectID)
  {
    OUTLINED_FUNCTION_2_197();
    ObjectID = FigXPCSendStdCopyPropertyMessage();
  }

  v2 = ObjectID;
  FigXPCRemoteClientKillServerOnTimeout();
  return v2;
}

uint64_t remoteXPCFigCaptionGroupConverter_SetProperty(uint64_t a1)
{
  v4 = 0;
  ObjectID = remoteXPCFigCaptionGroupConverter_GetObjectID(a1, &v4);
  if (!ObjectID)
  {
    OUTLINED_FUNCTION_2_197();
    ObjectID = FigXPCSendStdSetPropertyMessage();
  }

  v2 = ObjectID;
  FigXPCRemoteClientKillServerOnTimeout();
  return v2;
}

int64_t remoteXPCFigCaptionGroupConverter_AddSampleBuffer(uint64_t a1)
{
  v4[0] = 0;
  v4[1] = 0;
  ObjectID = remoteXPCFigCaptionGroupConverter_GetObjectID(a1, v4);
  if (ObjectID)
  {
    goto LABEL_9;
  }

  if (!CMBaseObjectGetDerivedStorage())
  {
    fig_log_get_emitter();
    ObjectID = FigSignalErrorAtGM();
LABEL_9:
    int64 = ObjectID;
    goto LABEL_7;
  }

  ObjectID = FigXPCCreateBasicMessage();
  if (ObjectID)
  {
    goto LABEL_9;
  }

  ObjectID = FigXPCMessageAddCMSampleBuffer();
  if (ObjectID)
  {
    goto LABEL_9;
  }

  ObjectID = FigXPCRemoteClientSendSyncMessageCreatingReply();
  if (ObjectID)
  {
    goto LABEL_9;
  }

  int64 = xpc_dictionary_get_int64(0, *MEMORY[0x1E6961590]);
LABEL_7:
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return int64;
}

uint64_t remoteXPCFigCaptionGroupConverter_Finish(uint64_t a1)
{
  v4[0] = 0;
  v4[1] = 0;
  ObjectID = remoteXPCFigCaptionGroupConverter_GetObjectID(a1, v4);
  if (ObjectID)
  {
    goto LABEL_9;
  }

  if (!CMBaseObjectGetDerivedStorage())
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    ObjectID = FigSignalErrorAtGM();
LABEL_9:
    v2 = ObjectID;
    goto LABEL_7;
  }

  ObjectID = FigXPCCreateBasicMessage();
  if (ObjectID)
  {
    goto LABEL_9;
  }

  ObjectID = FigXPCRemoteClientSendSyncMessage();
  if (ObjectID)
  {
    goto LABEL_9;
  }

  v2 = FigSemaphoreWaitRelative();
  if (v2)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    FigSignalErrorAtGM();
  }

LABEL_7:
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v2;
}

uint64_t sbp_tmf_processSampleBuffer(uint64_t a1, opaqueCMSampleBuffer *a2)
{
  v135 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FormatDescription = CMSampleBufferGetFormatDescription(a2);
  CMSampleBufferGetDataBuffer(a2);
  if (!FormatDescription)
  {
    if (a2)
    {
      v28 = *(DerivedStorage + 16);
      if (v28)
      {
        v28(*(DerivedStorage + 24), 0, a2);
      }
    }

    return 0;
  }

  v5 = CMFormatDescriptionEqual(*DerivedStorage, FormatDescription);
  v6 = MEMORY[0x1E695E480];
  v122 = DerivedStorage;
  if (!v5)
  {
    v7 = *DerivedStorage;
    *DerivedStorage = FormatDescription;
    CFRetain(FormatDescription);
    if (v7)
    {
      CFRelease(v7);
    }

    v8 = *(DerivedStorage + 8);
    if (v8)
    {
      CFRelease(v8);
      *(DerivedStorage + 8) = 0;
    }

    MediaSubType = CMFormatDescriptionGetMediaSubType(FormatDescription);
    *(DerivedStorage + 32) = MediaSubType;
    v10 = *v6;
    if (MediaSubType != 1835360888)
    {
      v30 = CMFormatDescriptionCreate(*v6, 0x6D657461u, 0x706C7374u, 0, (DerivedStorage + 8));
      if (v30)
      {
        return v30;
      }

      goto LABEL_88;
    }

    v118 = a2;
    v11 = MEMORY[0x1E695E9C0];
    v12 = OUTLINED_FUNCTION_266_0();
    Mutable = CFArrayCreateMutable(v12, v13, v11);
    v15 = OUTLINED_FUNCTION_266_0();
    v17 = CFArrayCreateMutable(v15, v16, v11);
    v18 = *(DerivedStorage + 40);
    if (v18)
    {
      CFRelease(v18);
      *(DerivedStorage + 40) = 0;
    }

    v19 = *(DerivedStorage + 48);
    if (v19)
    {
      CFRelease(v19);
      *(DerivedStorage + 48) = 0;
    }

    v123 = (DerivedStorage + 8);
    Extensions = CMFormatDescriptionGetExtensions(FormatDescription);
    v21 = Extensions;
    if (Extensions)
    {
      v22 = CFGetTypeID(Extensions);
      if (v22 == CFDictionaryGetTypeID())
      {
        Value = CFDictionaryGetValue(v21, *MEMORY[0x1E695FFE0]);
        if (Value)
        {
          v24 = Value;
          Count = CFDictionaryGetCount(Value);
          v26 = *(DerivedStorage + 56);
          if (v26)
          {
            v27 = CFArrayGetCount(v26);
          }

          else
          {
            v27 = 0;
          }

          v32 = *(DerivedStorage + 64);
          v120 = v10;
          if (v32)
          {
            v33 = CFArrayGetCount(v32);
          }

          else
          {
            v33 = 0;
          }

          v34 = malloc_type_calloc(Count, 8uLL, 0x6004044C4A2DFuLL);
          v31 = malloc_type_calloc(Count, 8uLL, 0x6004044C4A2DFuLL);
          v117 = v34;
          CFDictionaryGetKeysAndValues(v24, v34, v31);
          if (Count >= 1)
          {
            v35 = 0;
            while (1)
            {
              FigMetadataKeyGetLocalIDUInt32();
              IdentifierForLocalID = FigMetadataFormatDescriptionGetIdentifierForLocalID();
              v37 = *(v122 + 56);
              if (v37)
              {
                v136.location = 0;
                v136.length = v27;
                if (CFArrayContainsValue(v37, v136, IdentifierForLocalID))
                {
                  if (FigCFArrayAppendInt32())
                  {
                    break;
                  }
                }
              }

              v38 = *(v122 + 64);
              if (v38)
              {
                v137.location = 0;
                v137.length = v33;
                if (CFArrayContainsValue(v38, v137, IdentifierForLocalID))
                {
                  if (FigCFArrayAppendInt32())
                  {
                    break;
                  }
                }
              }

              if (Count == ++v35)
              {
                v6 = MEMORY[0x1E695E480];
                v10 = v120;
                v21 = v117;
                goto LABEL_39;
              }
            }

            v6 = MEMORY[0x1E695E480];
            v10 = v120;
            v21 = v117;
LABEL_43:
            free(v31);
            free(v21);
            if (v17)
            {
              CFRelease(v17);
            }

            DerivedStorage = v122;
            if (Mutable)
            {
              CFRelease(Mutable);
            }

            v40 = *(v122 + 40);
            v39 = *(v122 + 48);
            v41 = *(v122 + 72);
            blockBufferOut = 0;
            v42 = CFRetain(FormatDescription);
            desc = v42;
            v43 = CMFormatDescriptionGetExtensions(v42);
            if (v43)
            {
              v44 = CFRetain(v43);
            }

            else
            {
              v44 = 0;
            }

            Identifiers = CMMetadataFormatDescriptionGetIdentifiers(FormatDescription);
            if (Identifiers)
            {
              if (v41 && !sbp_tmf_isSubsetOf(Identifiers, v41))
              {
                sampleBufferOut[0] = FormatDescription;
                sampleBufferOut[1] = v41;
                timingArrayOut.duration.value = *MEMORY[0x1E695FFE0];
                memset(&timingArrayOut.duration.timescale, 0, 24);
                *&timingArrayOut.presentationTimeStamp.timescale = sbp_tmf_selectKeyByIdentifier;
                timingArrayOut.presentationTimeStamp.epoch = sampleBufferOut;
                v46 = *MEMORY[0x1E6960328];
                *&timingArrayOut.decodeTimeStamp.timescale = 0;
                timingArrayOut.decodeTimeStamp.epoch = 0;
                timingArrayOut.decodeTimeStamp.value = v46;
                *cf = 0u;
                *v129 = 0u;
                *v127 = 0u;
                LODWORD(v127[0]) = 1;
                if (v44)
                {
                  v47 = *MEMORY[0x1E695E4D0];
                  v127[1] = *MEMORY[0x1E6960360];
                  cf[0] = v47;
                  v48 = OUTLINED_FUNCTION_266_0();
                  cf[1] = CFArrayCreateMutable(v48, v49, 0);
                  v50 = OUTLINED_FUNCTION_266_0();
                  v129[0] = CFArrayCreateMutable(v50, v51, 0);
                  sbp_tmf_cfda_walk(0, v44, &timingArrayOut, 0, 3uLL, v127);
                  if (cf[1])
                  {
                    CFRelease(cf[1]);
                  }

                  if (v129[0])
                  {
                    CFRelease(v129[0]);
                  }

                  v52 = v129[1];
                  if (!v129[1])
                  {
                    v52 = CFRetain(v44);
                  }

                  CFRelease(v44);
                }

                else
                {
                  fig_log_get_emitter();
                  FigSignalErrorAtGM();
                  v52 = 0;
                }

                v44 = v52;
              }

              if (v40)
              {
                timingArrayOut.duration.value = *MEMORY[0x1E695FFE0];
                memset(&timingArrayOut.duration.timescale, 0, 24);
                *&timingArrayOut.presentationTimeStamp.timescale = sbp_tmf_doesNotContainLocalID;
                timingArrayOut.presentationTimeStamp.epoch = v40;
                v53 = sbp_tmf_CFDictionaryAccessorCreateAndRemoveValue(v44, &timingArrayOut);
                if (v44)
                {
                  CFRelease(v44);
                }

                v44 = v53;
              }

              if (v39)
              {
                timingArrayOut.duration.value = *MEMORY[0x1E695FFE0];
                memset(&timingArrayOut.duration.timescale, 0, 24);
                *&timingArrayOut.presentationTimeStamp.timescale = sbp_tmf_containsLocalID;
                timingArrayOut.presentationTimeStamp.epoch = v39;
                v54 = sbp_tmf_CFDictionaryAccessorCreateAndRemoveValue(v44, &timingArrayOut);
                if (v44)
                {
                  CFRelease(v44);
                }

                v44 = v54;
              }

              v42 = desc;
              if (v44 != CMFormatDescriptionGetExtensions(desc))
              {
                if (v42)
                {
                  CFRelease(v42);
                  desc = 0;
                }

                v55 = CMFormatDescriptionCreate(v10, 0x6D657461u, 0x6D656278u, v44, &desc);
                if (v55)
                {
                  goto LABEL_78;
                }

                v55 = CMMetadataFormatDescriptionCopyAsBigEndianMetadataDescriptionBlockBuffer(v10, desc, 0, &blockBufferOut);
                if (v55)
                {
                  goto LABEL_78;
                }

                if (desc)
                {
                  CFRelease(desc);
                  desc = 0;
                }

                v55 = CMMetadataFormatDescriptionCreateFromBigEndianMetadataDescriptionBlockBuffer(v10, blockBufferOut, 0, &desc);
                if (v55)
                {
LABEL_78:
                  v29 = v55;
                  goto LABEL_81;
                }

                v42 = desc;
              }
            }

            v29 = 0;
            *v123 = v42;
            desc = 0;
LABEL_81:
            if (v44)
            {
              CFRelease(v44);
            }

            if (blockBufferOut)
            {
              CFRelease(blockBufferOut);
            }

            a2 = v118;
            if (desc)
            {
              CFRelease(desc);
            }

            if (v29)
            {
              return v29;
            }

            goto LABEL_88;
          }

          v6 = MEMORY[0x1E695E480];
          v21 = v34;
          v10 = v120;
        }

        else
        {
          v21 = 0;
          v31 = 0;
        }

LABEL_39:
        if (*(v122 + 56))
        {
          *(v122 + 40) = Mutable;
          Mutable = 0;
        }

        if (*(v122 + 64))
        {
          *(v122 + 48) = v17;
          v17 = 0;
        }

        goto LABEL_43;
      }

      v21 = 0;
    }

    v31 = 0;
    goto LABEL_43;
  }

LABEL_88:
  if (*(DerivedStorage + 32) == 1835360888)
  {
    timingArrayOut.duration.value = 0;
    v127[0] = 0;
    sampleBufferOut[0] = 0;
    blockBufferOut = 0;
    desc = 0;
    allocator = *v6;
    appended = FigBoxedMetadataCreateFromBlockBuffer();
    if (!appended)
    {
      NumberOfItems = FigBoxedMetadataGetNumberOfItems();
      if (NumberOfItems >= 1)
      {
        v119 = a2;
        v57 = 0;
        v121 = 0;
        v58 = 0;
        while (1)
        {
          LocalIDOfItemAtIndex = FigBoxedMetadataGetLocalIDOfItemAtIndex();
          SizeOfItemAtIndex = FigBoxedMetadataGetSizeOfItemAtIndex();
          if (SizeOfItemAtIndex)
          {
            break;
          }

LABEL_126:
          if (++v57 == NumberOfItems)
          {
            v90 = v121 != 0;
            a2 = v119;
            goto LABEL_143;
          }
        }

        v61 = SizeOfItemAtIndex;
        if (v127[0])
        {
          CFRelease(v127[0]);
          v127[0] = 0;
        }

        appended = FigBoxedMetadataCopyValueOfItemAtIndexAsCFType();
        if (appended)
        {
          goto LABEL_196;
        }

        v62 = v61 + 8;
        v63 = *DerivedStorage;
        v64 = v127[0];
        v65 = *(DerivedStorage + 40);
        v66 = *(DerivedStorage + 48);
        LODWORD(valuePtr) = LocalIDOfItemAtIndex;
        if (!(v65 | v66))
        {
          goto LABEL_121;
        }

        v67 = CFArrayCreateMutable(allocator, 0, MEMORY[0x1E695E9C0]);
        if (!v67)
        {
LABEL_120:
          v121 = 1;
LABEL_125:
          v58 += v62;
          goto LABEL_126;
        }

        v68 = v67;
        if (v65 && !FigMetadataFormatDescriptionQuickTimeWellKnownTypeIsRecognized() || sbp_tmf_isARecordOrArrayCollection() && ((v131 = 0, sbp_tmf_getLocalIDs(v63, v64, v68, &v131)) || v65 && !v131))
        {
          CFRelease(v68);
          goto LABEL_120;
        }

        v69 = CFNumberCreate(allocator, kCFNumberSInt32Type, &valuePtr);
        CFArrayAppendValue(v68, v69);
        if (v65)
        {
          isSubsetOf = sbp_tmf_isSubsetOf(v68, v65);
          v71 = isSubsetOf == 0;
          if (!isSubsetOf || !v66)
          {
            goto LABEL_117;
          }
        }

        else if (!v66)
        {
          goto LABEL_116;
        }

        v72 = CFArrayGetCount(v66);
        v73 = CFArrayGetCount(v68);
        v74 = v73 - 1;
        if (v73 >= 1)
        {
          v75 = 0;
          do
          {
            ValueAtIndex = CFArrayGetValueAtIndex(v68, v75);
            v138.location = 0;
            v138.length = v72;
            v77 = CFArrayContainsValue(v66, v138, ValueAtIndex);
            v71 = v77 != 0;
            if (v77)
            {
              break;
            }
          }

          while (v74 != v75++);
LABEL_117:
          CFRelease(v68);
          if (v69)
          {
            CFRelease(v69);
          }

          DerivedStorage = v122;
          if (v71)
          {
            goto LABEL_120;
          }

LABEL_121:
          if (sampleBufferOut[0])
          {
            OUTLINED_FUNCTION_2_198();
            appended = CMBlockBufferAppendBufferReference(v79, v80, v81, v82, v83);
            if (appended)
            {
              goto LABEL_196;
            }
          }

          else
          {
            OUTLINED_FUNCTION_2_198();
            appended = CMBlockBufferCreateWithBufferReference(v84, v85, v86, v87, v88, v89);
            if (appended)
            {
              goto LABEL_196;
            }
          }

          goto LABEL_125;
        }

LABEL_116:
        v71 = 0;
        goto LABEL_117;
      }

      v90 = 0;
LABEL_143:
      v104 = sampleBufferOut[0];
      if (sampleBufferOut[0])
      {
        *(DerivedStorage + 80) = 1;
        goto LABEL_149;
      }

      if (!*(DerivedStorage + 80))
      {
        v104 = 0;
LABEL_149:
        DataLength = CMBlockBufferGetDataLength(v104);
        blockBufferOut = DataLength;
        if (a2)
        {
          v106 = CFRetain(a2);
        }

        else
        {
          v106 = 0;
        }

        desc = v106;
        if (*DerivedStorage == *(DerivedStorage + 8) && !v90)
        {
          v108 = 0;
          if (!DataLength)
          {
LABEL_167:
            v29 = 0;
            goto LABEL_168;
          }

LABEL_164:
          if (desc)
          {
            v111 = *(DerivedStorage + 16);
            if (v111)
            {
              v111(*(DerivedStorage + 24), 0);
            }
          }

          goto LABEL_167;
        }

        valuePtr = 0;
        OutputSampleTimingInfoArray = CMSampleBufferGetOutputSampleTimingInfoArray(a2, 0, 0, &valuePtr);
        v29 = OutputSampleTimingInfoArray;
        if (!OutputSampleTimingInfoArray || OutputSampleTimingInfoArray == -12736)
        {
          v108 = malloc_type_calloc(valuePtr, 0x48uLL, 0x1000040FF89C88EuLL);
          if (v108)
          {
            v109 = CMSampleBufferGetOutputSampleTimingInfoArray(a2, valuePtr, v108, 0);
            if (!v109 || (v29 = v109, v109 == -12736))
            {
              if (v106)
              {
                CFRelease(v106);
                desc = 0;
              }

              v110 = CMSampleBufferCreate(allocator, sampleBufferOut[0], 1u, 0, 0, *(DerivedStorage + 8), 1, valuePtr, v108, 1, &blockBufferOut, &desc);
              if (!v110)
              {
                CMPropagateAttachments(a2, desc);
                CMRemoveAttachment(desc, *MEMORY[0x1E6960560]);
                CMRemoveAttachment(desc, *MEMORY[0x1E6960558]);
                CMRemoveAttachment(desc, *MEMORY[0x1E6960540]);
                CMRemoveAttachment(desc, *MEMORY[0x1E6960520]);
                if (!blockBufferOut)
                {
                  goto LABEL_167;
                }

                goto LABEL_164;
              }

              v29 = v110;
            }
          }

LABEL_168:
          free(v108);
          if (desc)
          {
            CFRelease(desc);
          }

          if (sampleBufferOut[0])
          {
            CFRelease(sampleBufferOut[0]);
          }

          if (v127[0])
          {
            CFRelease(v127[0]);
          }

          v112 = timingArrayOut.duration.value;
          if (!timingArrayOut.duration.value)
          {
            return v29;
          }

LABEL_194:
          CFRelease(v112);
          return v29;
        }

LABEL_197:
        v108 = 0;
        goto LABEL_168;
      }

      appended = CMBlockBufferCreateWithMemoryBlock(allocator, &sbp_tmf_filterMetadataBox_emptyMetadata, 8uLL, *MEMORY[0x1E695E498], 0, 0, 8uLL, 0, sampleBufferOut);
      if (!appended)
      {
        *(DerivedStorage + 80) = 0;
        v104 = sampleBufferOut[0];
        goto LABEL_149;
      }
    }

LABEL_196:
    v29 = appended;
    goto LABEL_197;
  }

  v127[0] = 0;
  sampleBufferOut[0] = 0;
  blockBufferOut = 0;
  desc = 0;
  MetadataItemsFromSampleBuffer = FigMetadataCreateMetadataItemsFromSampleBuffer(a2);
  v92 = MetadataItemsFromSampleBuffer;
  if (MetadataItemsFromSampleBuffer)
  {
    v93 = *(DerivedStorage + 56);
    v94 = CFArrayGetCount(MetadataItemsFromSampleBuffer);
    v95 = *v6;
    v96 = CFArrayCreateMutable(*v6, 0, MEMORY[0x1E695E9C0]);
    if (v94 >= 1)
    {
      for (i = 0; i != v94; ++i)
      {
        v98 = CFArrayGetValueAtIndex(v92, i);
        if (sbp_tmf_isIdentifierIn(v98, v93))
        {
          CFArrayAppendValue(v96, v98);
        }
      }
    }
  }

  else
  {
    v95 = *v6;
    v96 = CFArrayCreateMutable(*v6, 0, MEMORY[0x1E695E9C0]);
  }

  memset(&timingArrayOut, 0, sizeof(timingArrayOut));
  FigPropertyListBlockBufferFromMetadataItems = FigMetadataCreateFigPropertyListBlockBufferFromMetadataItems(v95, v96, v127);
  if (FigPropertyListBlockBufferFromMetadataItems)
  {
    v29 = FigPropertyListBlockBufferFromMetadataItems;
    v102 = 0;
    goto LABEL_186;
  }

  blockBufferOut = CMBlockBufferGetDataLength(v127[0]);
  p_timingArrayOut = &timingArrayOut;
  SampleTimingInfoArray = CMSampleBufferGetSampleTimingInfoArray(a2, 1, &timingArrayOut, &desc);
  v102 = 0;
  if (SampleTimingInfoArray)
  {
    v29 = SampleTimingInfoArray;
    if (SampleTimingInfoArray != -12737)
    {
      goto LABEL_180;
    }

    v103 = desc;
    if (desc)
    {
      if (desc > 0x38E38E38E38E38ELL)
      {
        v102 = 0;
LABEL_179:
        v29 = CMSampleBufferGetSampleTimingInfoArray(a2, v103, v102, 0);
LABEL_180:
        p_timingArrayOut = v102;
        if (v29)
        {
          goto LABEL_186;
        }

        goto LABEL_181;
      }

      v113 = 72 * desc;
    }

    else
    {
      v113 = 0;
    }

    v102 = malloc_type_malloc(v113, 0x1000040FF89C88EuLL);
    v103 = desc;
    goto LABEL_179;
  }

LABEL_181:
  Ready = CMSampleBufferCreateReady(v95, v127[0], *(v122 + 8), 1, desc, p_timingArrayOut, 1, &blockBufferOut, sampleBufferOut);
  if (Ready)
  {
    v29 = Ready;
  }

  else
  {
    CMPropagateAttachments(a2, sampleBufferOut[0]);
    if (sampleBufferOut[0])
    {
      v115 = *(v122 + 16);
      if (v115)
      {
        v115(*(v122 + 24), 0);
      }
    }

    v29 = 0;
  }

LABEL_186:
  free(v102);
  if (sampleBufferOut[0])
  {
    CFRelease(sampleBufferOut[0]);
  }

  if (v127[0])
  {
    CFRelease(v127[0]);
  }

  if (v92)
  {
    CFRelease(v92);
  }

  if (v96)
  {
    v112 = v96;
    goto LABEL_194;
  }

  return v29;
}

const void *sbp_tmf_isIdentifierIn(const __CFDictionary *a1, CFArrayRef theArray)
{
  identifierOut = 0;
  if (theArray)
  {
    Count = CFArrayGetCount(theArray);
  }

  else
  {
    Count = 0;
  }

  Value = CFDictionaryGetValue(a1, @"key");
  if (Value)
  {
    v6 = CFDictionaryGetValue(a1, @"keyspace");
    if (v6 && (v7 = v6, v8 = CFGetTypeID(v6), v8 == CFStringGetTypeID()))
    {
      v9 = CMMetadataCreateIdentifierForKeyAndKeySpace(*MEMORY[0x1E695E480], Value, v7, &identifierOut);
      Value = 0;
      v10 = identifierOut;
      if (theArray && !v9)
      {
        v13.location = 0;
        v13.length = Count;
        Value = CFArrayContainsValue(theArray, v13, identifierOut);
        v10 = identifierOut;
      }

      if (v10)
      {
        CFRelease(v10);
      }
    }

    else
    {
      return 0;
    }
  }

  return Value;
}

uint64_t sbp_tmf_copyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t sbp_tmf_copyProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t sbp_tmf_setProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t sbp_tmf_CFDictionaryAccessorCreateAndRemoveValue_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t sbp_tmf_CFDictionaryAccessorCreateAndRemoveValue_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t sbp_tmf_containsLocalID_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t sbp_tmf_containsLocalID_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigTTMLDocumentWriterRegionTimelineAddRegionSlice_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterRegionTimelineAddRegionSlice_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterRegionTimelineAddRegionSlice_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterRegionTimelineCopyProperty_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterRegionTimelineWriteAttributesAndSetElements_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterRegionTimelineWriteAttributesAndSetElements_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigTTMLDocumentWriterRegionTimelineCreate_cold_1(const void *a1, _DWORD *a2)
{
  *a2 = FigSignalErrorAtGM();

  CFRelease(a1);
}

uint64_t FigTTMLDocumentWriterRegionTimelineCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterRegionTimelineCreate_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void flom_ensureRenderPipelinesForFormatDo_applier(void *key, const __CFDictionary *a2, uint64_t a3)
{
  Value = CFDictionaryGetValue(*(*a3 + 72), key);
  if (CMFormatDescriptionGetMediaType(*(a3 + 8)) != 1668047728)
  {
    if (CMFormatDescriptionGetMediaType(*(a3 + 8)) != 1935832172 && CMFormatDescriptionGetMediaType(*(a3 + 8)) != 1952807028)
    {
      return;
    }

    v6 = (Value + 72);
    v11 = *(Value + 9);
    if (v11)
    {
      if (!*(a3 + 24))
      {
        goto LABEL_19;
      }

      CFRelease(v11);
      *v6 = 0;
    }

    CFDictionaryGetValue(a2, @"LegibleOutputKey_SubTypesForNativeSamples");
    if (*(*a3 + 108))
    {
      OUTLINED_FUNCTION_2_199();
      if (FigCreateSubtitleRenderPipeline(v12, flom_subtitleRenderPipelineDidProduceStrings, v13, flom_subtitleRenderPipelineDidProduceNativeSample, v13, flom_renderPipelineDidFlush, v13, v14, v23, v24, v25))
      {
        return;
      }
    }

    else
    {
      OUTLINED_FUNCTION_2_199();
      if (FigCreateCaptionRenderPipeline(v15, flom_FigCaptionRenderPipelineDidProduceStrings, v16, flom_subtitleRenderPipelineDidProduceNativeSample, v16, flom_renderPipelineDidFlush, v16, v17, v23, v24, v25))
      {
        return;
      }
    }

    v11 = *v6;
LABEL_19:
    if (*(*a3 + 97))
    {
      v18 = MEMORY[0x1E695E4D0];
    }

    else
    {
      v18 = MEMORY[0x1E695E4C0];
    }

    FigBaseObject = FigRenderPipelineGetFigBaseObject(v11);
    v20 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (!v20 || v20(FigBaseObject, @"DisplayNonForcedSubtitles", *v18))
    {
      return;
    }

    goto LABEL_24;
  }

  v6 = (Value + 64);
  if (*(Value + 8) && !*(a3 + 24))
  {
LABEL_24:
    v8 = 0;
    goto LABEL_25;
  }

  v7 = CFDictionaryCreate(0, kFigRenderPipelineOption_SortSampleBufferQueueByOutputPTS, MEMORY[0x1E695E4D0], 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!v7)
  {
    fig_log_get_emitter();

    FigSignalErrorAtGM();
    return;
  }

  v8 = v7;
  if (*v6)
  {
    CFRelease(*v6);
    *v6 = 0;
  }

  v10 = *a3;
  v9 = *(a3 + 8);
  v26 = *(Value + 2);
  v27 = *(Value + 6);
  if (FigCreateClosedCaptionRenderPipeline(v9, flom_closedCaptionRenderPipelineDidProduceCommand, v10, flom_renderPipelineDidFlush, v10, &v26, v8, Value + 8))
  {
    goto LABEL_28;
  }

LABEL_25:
  v21 = *v6;
  if (v21)
  {
    v22 = OUTLINED_FUNCTION_4_161();
    CFDictionaryAddValue(v22, v21, Value);
    CFArrayAppendValue(*(a3 + 16), v21);
  }

  if (v8)
  {
LABEL_28:
    CFRelease(v8);
  }
}

void flom_closedCaptionRenderPipelineDidProduceCommandDo(int *a1)
{
  v13 = 0;
  if (*(a1 + 1))
  {
    v2 = OUTLINED_FUNCTION_4_161();
    Value = CFDictionaryGetValue(v2, v3);
    if (Value)
    {
      v5 = Value;
      if (!FigClosedCaptionStringConformerPushCommand(Value[1], a1[4], *(a1 + 3), *(Value + 56), &v13, *(*a1 + 80), *(*a1 + 88)))
      {
        if (*(*a1 + 96))
        {
          if (v13)
          {
            v8 = FigClosedCaptionStringConformerCopyCurrentConformedStrings(v5[1]);
            OUTLINED_FUNCTION_1_201();
            flom_addAttributedStringsAndInvokeCallback(v9, v10, v11, v12, v8);
            if (v8)
            {
              CFRelease(v8);
            }
          }
        }
      }
    }
  }

  if (*a1)
  {
    CFRelease(*a1);
  }

  v6 = *(a1 + 1);
  if (v6)
  {
    CFRelease(v6);
  }

  v7 = *(a1 + 3);
  if (v7)
  {
    CFRelease(v7);
  }

  free(a1);
}

void flom_addAttributedStringsAndInvokeCallback(uint64_t a1, uint64_t a2, const void *a3, CMTime *a4, const void *a5)
{
  if (!FigAgglomeratorSetObjectForKey(*(a2 + 16), a5, a3))
  {
    v8 = *a4;
    flom_collectAttributedStringsAndSampleBuffersAndInvokeCallbackForItemTime(a1, a2, &v8);
  }
}

void flom_combineArrayOfArraysIntoFlatArray(const void *a1, __CFArray *a2)
{
  v4 = CFGetTypeID(a1);
  if (v4 == CFArrayGetTypeID())
  {
    v5.length = CFArrayGetCount(a1);
    v5.location = 0;

    CFArrayAppendArray(a2, a1, v5);
  }
}

void flom_renderPipelineDidFlushDo(void *a1)
{
  if (a1[1])
  {
    v2 = OUTLINED_FUNCTION_4_161();
    Value = CFDictionaryGetValue(v2, v3);
    if (Value)
    {
      v5 = Value;
      FigAgglomeratorSetObjectForKey(*(Value + 2), 0, *(Value + 8));
      FigAgglomeratorSetObjectForKey(*(v5 + 2), 0, *(v5 + 9));
      FigAgglomeratorSetObjectForKey(*(v5 + 3), 0, *(v5 + 9));
      v6 = *v5;
      v8 = *(*a1 + 40);
      v7 = *(*a1 + 48);
      v9 = malloc_type_calloc(1uLL, 0x18uLL, 0xE00403260BBE2uLL);
      if (v6)
      {
        v10 = CFRetain(v6);
      }

      else
      {
        v10 = 0;
      }

      *v9 = v10;
      v9[1] = v8;
      if (v7)
      {
        v11 = CFRetain(v7);
      }

      else
      {
        v11 = 0;
      }

      v9[2] = v11;
      dispatch_async_f(*(*a1 + 24), v9, flom_invokeFlushCallbackAndDisposeContext);
    }
  }

  if (*a1)
  {
    CFRelease(*a1);
  }

  v12 = a1[1];
  if (v12)
  {
    CFRelease(v12);
  }

  free(a1);
}

void flom_subtitleRenderPipelineDidProduceStringsDo(uint64_t a1)
{
  v42 = 0;
  v43 = 0;
  if (!*(a1 + 8))
  {
    goto LABEL_31;
  }

  v2 = OUTLINED_FUNCTION_4_161();
  if (!CFDictionaryGetValue(v2, v3))
  {
    goto LABEL_31;
  }

  v4 = *(a1 + 24);
  if (v4)
  {
    if (*(*a1 + 97) || *(a1 + 56))
    {
      value = 0;
      ValueIfPresent = CFDictionaryGetValueIfPresent(v4, @"SubtitleSerializedCaptionGroup", &value);
      if (!ValueIfPresent)
      {
        MutableCopy = 0;
        v13 = *(a1 + 24);
LABEL_12:
        v16 = *(a1 + 16);
        v17 = *(a1 + 56);
        v18 = *(a1 + 80);
        v40 = *(a1 + 64);
        v41 = v18;
        v39 = *(*a1 + 80);
        LODWORD(v29) = 0;
        HIDWORD(v29) = v16;
        LODWORD(v30) = 0;
        *(&v30 + 4) = v13;
        WORD6(v30) = v17;
        OUTLINED_FUNCTION_6_124(ValueIfPresent, v6, v7, v8, v9, v10, v11, v12, v29, HIDWORD(v16), v30, *(&v30 + 1), v31, v32, v33, v34, v35, v36, v37, value, v39);
        LOBYTE(v37) = v19;
        *(&v37 + 1) = 0;
        BYTE3(v37) = 0;
        FigSubtitleStringConformerCopyConformedStringsForSubtitleSample(&v29, &v43);
        if (v20)
        {
          goto LABEL_16;
        }

        v15 = v43;
        goto LABEL_14;
      }

      ValueIfPresent = FigCaptionSerializerCreateCaptionGroupFromCFData();
      if (!ValueIfPresent)
      {
        v13 = v42;
        if (v42)
        {
          MutableCopy = CFDictionaryCreateMutableCopy(*MEMORY[0x1E695E480], 0, *(a1 + 24));
          ValueIfPresent = updateSubtitleSampleWithFigCaptionGroup(MutableCopy, v42);
          v13 = MutableCopy;
          if (ValueIfPresent)
          {
            goto LABEL_16;
          }
        }

        else
        {
          MutableCopy = 0;
        }

        goto LABEL_12;
      }
    }

LABEL_31:
    MutableCopy = 0;
    goto LABEL_16;
  }

  v15 = CFArrayCreate(*MEMORY[0x1E695E480], 0, 0, MEMORY[0x1E695E9C0]);
  MutableCopy = 0;
  v43 = v15;
LABEL_14:
  if (v15)
  {
    OUTLINED_FUNCTION_1_201();
    flom_addAttributedStringsAndInvokeCallback(v21, v22, v23, v24, v25);
  }

LABEL_16:
  if (v43)
  {
    CFRelease(v43);
  }

  if (MutableCopy)
  {
    CFRelease(MutableCopy);
  }

  if (v42)
  {
    CFRelease(v42);
  }

  if (*a1)
  {
    CFRelease(*a1);
  }

  v26 = *(a1 + 16);
  if (v26)
  {
    CFRelease(v26);
  }

  v27 = *(a1 + 8);
  if (v27)
  {
    CFRelease(v27);
  }

  v28 = *(a1 + 24);
  if (v28)
  {
    CFRelease(v28);
  }

  free(a1);
}

uint64_t updateSubtitleSampleWithFigCaptionGroup(const __CFDictionary *a1, uint64_t a2)
{
  v102 = 0;
  v5 = *MEMORY[0x1E695E480];
  theArray = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  if (!theArray)
  {
    return 4294954510;
  }

  valuePtr = 0;
  Value = CFDictionaryGetValue(a1, @"SubtitleFormat");
  CFNumberGetValue(Value, kCFNumberSInt32Type, &valuePtr);
  if (a2)
  {
    memset(&v100, 0, sizeof(v100));
    CMTimeMake(&v100, 0, 0);
    memset(&v99, 0, sizeof(v99));
    CMTimeMake(&v99, 0, 0);
    v7 = CFDictionaryGetValue(a1, @"SubtitleTimeRange");
    if (v7)
    {
      v8 = v7;
      ValueAtIndex = CFArrayGetValueAtIndex(v7, 0);
      v10 = CFArrayGetValueAtIndex(v8, 1);
      memset(&v98, 0, sizeof(v98));
      CMTimeMakeFromDictionary(&v98, ValueAtIndex);
      memset(&v97, 0, sizeof(v97));
      CMTimeMakeFromDictionary(&v97, v10);
      v100 = v98;
      v99 = v97;
    }

    SliceCount = FigCaptionGroupGetSliceCount();
    Mutable = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (!Mutable || (v13 = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8])) == 0)
    {
      v14 = 0;
      v64 = 4294954510;
      if (!Mutable)
      {
        goto LABEL_79;
      }

      goto LABEL_78;
    }

    v14 = v13;
    v66 = a1;
    if (SliceCount >= 1)
    {
      v15 = 0;
      v87 = 0;
      key = *MEMORY[0x1E6960A90];
      v85 = *MEMORY[0x1E6961368];
      v84 = *MEMORY[0x1E6960AF0];
      v79 = *MEMORY[0x1E6960800];
      v78 = *MEMORY[0x1E69607E8];
      v77 = *MEMORY[0x1E69607F0];
      v76 = *MEMORY[0x1E69607F8];
      v75 = *MEMORY[0x1E69607D8];
      v74 = *MEMORY[0x1E69607E0];
      attrName = *MEMORY[0x1E6960998];
      v72 = *MEMORY[0x1E69609A0];
      v71 = *MEMORY[0x1E6960978];
      v70 = *MEMORY[0x1E6960838];
      v68 = *MEMORY[0x1E69608D8];
      v67 = *MEMORY[0x1E69608E0];
      v69 = *MEMORY[0x1E6960830];
      v83 = SliceCount;
      v81 = Mutable;
      v82 = v5;
      v80 = v13;
      while (1)
      {
        CaptionData = FigCaptionGroupGetCaptionData();
        if (CaptionData)
        {
          break;
        }

LABEL_72:
        if (SliceCount == ++v15)
        {
          goto LABEL_76;
        }
      }

      v17 = CaptionData;
      if (v102)
      {
        CFRelease(v102);
        v102 = 0;
      }

      memset(&v98, 0, sizeof(v98));
      FigCaptionGroupGetDurationBeforeSlice();
      memset(&v97, 0, sizeof(v97));
      FigCaptionGroupGetDurationAfterSlice();
      effectiveRange = *&v100.value;
      epoch = v100.epoch;
      v94 = v99;
      v93 = v98;
      v92 = v97;
      v87 = FigCaptionDataToMarkupBasedAttributedString(v5, v17, &effectiveRange, &v94, &v93, &v92, &v102, Mutable, v14);
      v18 = valuePtr == 1937142900 || valuePtr == 2021028980;
      v19 = v18 || valuePtr == 2004251764;
      if (!v19 || (v20 = v102, (v21 = CFDictionaryGetValue(Mutable, key)) == 0) || (v22 = CFDictionaryGetValue(v21, v85)) == 0 || (v23 = CFDictionaryGetValue(v22, v84)) == 0)
      {
LABEL_71:
        CFArrayAppendValue(theArray, v102);
        goto LABEL_72;
      }

      v24 = v23;
      v25 = CFDictionaryGetValue(v23, v79);
      v26 = CFDictionaryGetValue(v24, v78);
      v27 = CFDictionaryGetValue(v24, v77);
      v28 = CFDictionaryGetValue(v24, v76);
      v29 = CFDictionaryGetValue(v24, v75);
      v89 = CFDictionaryGetValue(v24, v74);
      OUTLINED_FUNCTION_7_93();
      v31 = v30;
      OUTLINED_FUNCTION_7_93();
      v33 = v32;
      v34 = OUTLINED_FUNCTION_7_93();
      v90 = v35;
      v36 = *&v34;
      OUTLINED_FUNCTION_7_93();
      v38 = v37;
      OUTLINED_FUNCTION_7_93();
      OUTLINED_FUNCTION_7_109();
      effectiveRange.location = 0;
      effectiveRange.length = 0;
      if (CFAttributedStringGetAttribute(v20, 0, attrName, &effectiveRange))
      {
        if (v26)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v31 = v39;
        }

        if (v27)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v38 = v40;
        }

        if (v28)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v33 = v41;
        }

        SliceCount = v83;
        if (v29)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          OUTLINED_FUNCTION_7_109();
        }

        v42 = v31;
        if (v89)
        {
          v43 = FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v90 = v44;
          v36 = *&v43;
        }

        v45 = v38;
        if (FigCFEqual())
        {
          FigGeometryDimensionMakeMirrored();
          v45 = v46;
          FigGeometryDimensionMakeMirrored();
          OUTLINED_FUNCTION_7_109();
        }

        v5 = v82;
      }

      else
      {
        v42 = v31;
        if (v25)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v42 = v47;
        }

        v45 = v38;
        if (v27)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v33 = v48;
        }

        if (v28)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v45 = v49;
        }

        SliceCount = v83;
        if (v29)
        {
          v50 = FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          v90 = v51;
          v36 = *&v50;
        }

        if (v89)
        {
          FigTextMarkupDimensionMakeFromSimplifiedDictionary();
          OUTLINED_FUNCTION_7_109();
        }

        v5 = v82;
      }

      if (v42 == 622862368)
      {
        Float32 = FigCFNumberCreateFloat32();
        v53 = OUTLINED_FUNCTION_3_165();
        CFAttributedStringSetAttribute(v53, v103, v72, Float32);
        if (Float32)
        {
          CFRelease(Float32);
        }
      }

      v18 = v33 == 622862368;
      v14 = v80;
      if (v18)
      {
        v54 = FigCFNumberCreateFloat32();
        v55 = OUTLINED_FUNCTION_3_165();
        CFAttributedStringSetAttribute(v55, v104, v71, v54);
        if (v54)
        {
          CFRelease(v54);
        }
      }

      if (v90 == 622862368 && (v36 == 0.0 || v36 == 50.0 || v36 == 100.0))
      {
        v56 = OUTLINED_FUNCTION_3_165();
        CFAttributedStringSetAttribute(v56, v105, v70, v57);
      }

      Mutable = v81;
      if (v45 == 1818848869)
      {
        v58 = FigCFNumberCreateFloat32();
        v59 = OUTLINED_FUNCTION_3_165();
        v61 = v68;
      }

      else
      {
        if (v45 != 622862368)
        {
LABEL_66:
          if (v91 == 622862368 && (v2 == 0.0 || v2 == 50.0 || v2 == 100.0))
          {
            v62 = OUTLINED_FUNCTION_3_165();
            CFAttributedStringSetAttribute(v62, v106, v69, v63);
          }

          goto LABEL_71;
        }

        v58 = FigCFNumberCreateFloat32();
        v59 = OUTLINED_FUNCTION_3_165();
        v61 = v67;
      }

      CFAttributedStringSetAttribute(v59, v60, v61, v58);
      if (v58)
      {
        CFRelease(v58);
      }

      goto LABEL_66;
    }

    v87 = 0;
LABEL_76:
    a1 = v66;
    v64 = v87;
  }

  else
  {
    v14 = 0;
    Mutable = 0;
    v64 = 0;
  }

  CFDictionarySetValue(a1, @"SubtitleContent", theArray);
  if (Mutable)
  {
LABEL_78:
    CFRelease(Mutable);
  }

LABEL_79:
  if (v14)
  {
    CFRelease(v14);
  }

  if (v102)
  {
    CFRelease(v102);
  }

  CFRelease(theArray);
  return v64;
}

void flom_subtitleRenderPipelineDidProduceNativeSampleDo(void *a1)
{
  if (*(*a1 + 97) || *(a1 + 48))
  {
    v2 = *(a1 + 1);
    if (v2)
    {
      Value = CFDictionaryGetValue(*(*a1 + 64), v2);
      if (Value)
      {
        v4 = Value;
        if (!FigAgglomeratorSetObjectForKey(Value[3], *(a1 + 2), *(a1 + 1)))
        {
          v5 = *a1;
          v8 = *(a1 + 1);
          flom_collectAttributedStringsAndSampleBuffersAndInvokeCallbackForItemTime(v5, v4, &v8);
        }
      }
    }
  }

  if (*a1)
  {
    CFRelease(*a1);
  }

  v6 = *(a1 + 1);
  if (v6)
  {
    CFRelease(v6);
  }

  v7 = *(a1 + 2);
  if (v7)
  {
    CFRelease(v7);
  }

  free(a1);
}

void flom_FigCaptionRenderPipelineDidProduceStringsDo(uint64_t a1)
{
  v50 = 0;
  v51 = 0;
  if (!*(a1 + 8))
  {
    goto LABEL_48;
  }

  v2 = OUTLINED_FUNCTION_4_161();
  v4 = CFDictionaryGetValue(v2, v3);
  if (!v4)
  {
    goto LABEL_48;
  }

  v5 = v4;
  v6 = *(a1 + 32);
  v7 = MEMORY[0x1E695E480];
  if (!v6)
  {
    v11 = CFArrayCreate(*MEMORY[0x1E695E480], 0, 0, MEMORY[0x1E695E9C0]);
    MutableCopy = 0;
    v13 = 0;
    v51 = v11;
    goto LABEL_27;
  }

  if (!*(*a1 + 97) && !*(a1 + 64))
  {
    goto LABEL_48;
  }

  if (*(*a1 + 109))
  {
    v8 = 0;
    v9 = 0;
    v10 = *(a1 + 16);
  }

  else
  {
    v10 = 0;
    v8 = *(a1 + 24);
    v9 = 1;
  }

  value = 0;
  ValueIfPresent = CFDictionaryGetValueIfPresent(v6, @"SubtitleSerializedCaptionGroup", &value);
  if (!ValueIfPresent)
  {
    MutableCopy = 0;
    v13 = 0;
    v22 = *(a1 + 32);
    goto LABEL_25;
  }

  ValueIfPresent = FigCaptionSerializerCreateCaptionGroupFromCFData();
  if (ValueIfPresent)
  {
LABEL_48:
    v13 = 0;
    MutableCopy = 0;
    goto LABEL_29;
  }

  v22 = v50;
  if (!v50)
  {
    MutableCopy = 0;
    v13 = 0;
    goto LABEL_25;
  }

  v23 = *v7;
  MutableCopy = CFDictionaryCreateMutableCopy(*v7, 0, *(a1 + 32));
  if (FigCaptionGroupGetSliceCount() < 1)
  {
LABEL_21:
    v13 = CFArrayCreate(v23, 0, 0, MEMORY[0x1E695E9C0]);
    if (!v13)
    {
      goto LABEL_29;
    }

    CFDictionarySetValue(MutableCopy, @"SubtitleContent", v13);
    v22 = MutableCopy;
    goto LABEL_25;
  }

  v24 = 0;
  while (1)
  {
    CaptionData = FigCaptionGroupGetCaptionData();
    v26 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (v26)
    {
      break;
    }

    v27 = &stru_1F0B1AFB8;
    if (CaptionData)
    {
      goto LABEL_19;
    }

LABEL_20:
    if (++v24 >= FigCaptionGroupGetSliceCount())
    {
      goto LABEL_21;
    }
  }

  v27 = v26(CaptionData);
  if (!CaptionData)
  {
    goto LABEL_20;
  }

LABEL_19:
  if (CFStringGetLength(v27) <= 0)
  {
    goto LABEL_20;
  }

  ValueIfPresent = updateSubtitleSampleWithFigCaptionGroup(MutableCopy, v50);
  v13 = 0;
  v22 = MutableCopy;
  if (ValueIfPresent)
  {
    goto LABEL_29;
  }

LABEL_25:
  v28 = *(a1 + 64);
  v29 = *(a1 + 88);
  v48 = *(a1 + 72);
  v49 = v29;
  v47 = *(*a1 + 80);
  *v38 = v9;
  *&v38[4] = v10;
  *&v38[12] = v8;
  *&v38[20] = v22;
  *&v38[28] = v28;
  OUTLINED_FUNCTION_6_124(ValueIfPresent, v15, v16, v17, v18, v19, v20, v21, *v38, *&v38[8], *&v38[16], *&v38[24], v39, v40, v41, v42, v43, v44, v45, value, v47);
  LOBYTE(v45) = v30;
  *(&v45 + 1) = 0;
  BYTE3(v45) = 0;
  FigSubtitleStringConformerCopyConformedStringsForSubtitleSample(v38, &v51);
  if (v31)
  {
    goto LABEL_29;
  }

  v11 = v51;
LABEL_27:
  if (v11)
  {
    v32 = *a1;
    v33 = *(a1 + 8);
    *v38 = *(a1 + 40);
    *&v38[16] = *(a1 + 56);
    flom_addAttributedStringsAndInvokeCallback(v32, v5, v33, v38, v11);
  }

LABEL_29:
  if (v51)
  {
    CFRelease(v51);
  }

  if (v13)
  {
    CFRelease(v13);
  }

  if (MutableCopy)
  {
    CFRelease(MutableCopy);
  }

  if (v50)
  {
    CFRelease(v50);
  }

  v34 = *(a1 + 24);
  if (v34)
  {
    CFRelease(v34);
  }

  if (*a1)
  {
    CFRelease(*a1);
  }

  v35 = *(a1 + 16);
  if (v35)
  {
    CFRelease(v35);
  }

  v36 = *(a1 + 8);
  if (v36)
  {
    CFRelease(v36);
  }

  v37 = *(a1 + 32);
  if (v37)
  {
    CFRelease(v37);
  }

  free(a1);
}

uint64_t FigLegibleOutputManagerCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLegibleOutputManagerCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLegibleOutputManagerCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLegibleOutputManagerCreate_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLegibleOutputManagerCreate_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLegibleOutputManagerCreate_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLegibleOutputManagerCreate_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t flom_ensureRenderPipelinesForFormat_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

BOOL flom_rebuildFigLegibleOutputs_applier_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM() == 0;
}

uint64_t PSLPCMProcessData(uint64_t a1, CMBlockBufferRef theSourceBuffer, size_t offsetToData, char *__src, size_t a5, uint64_t a6)
{
  v6 = a5;
  v7 = __src;
  v8 = offsetToData;
  v11 = *(a1 + 48);
  v38 = 0;
  v36 = 0;
  v37 = 0;
  v35 = 0;
  v34 = 0;
  if (*(a6 + 24))
  {
    v12 = *(a6 + 16);
    *v11 = *a6;
    *(v11 + 16) = v12;
    v13 = 7;
    *(v11 + 32) = 7;
  }

  else
  {
    v13 = *(v11 + 32);
    if (!v13)
    {
      v16 = 0;
      offset = 0;
      goto LABEL_25;
    }
  }

  if (v13 >= a5)
  {
    v14 = a5;
  }

  else
  {
    v14 = v13;
  }

  v15 = v11 - v13;
  if (__src)
  {
    memcpy((v15 + 63), __src, v14);
    v16 = 0;
    offset = 0;
    v7 += v14;
  }

  else
  {
    v17 = CMBlockBufferCopyDataBytes(theSourceBuffer, offsetToData, v14, (v15 + 63));
    if (v17)
    {
      goto LABEL_62;
    }

    v7 = 0;
    if (v14 == 7)
    {
      v16 = theSourceBuffer;
    }

    else
    {
      v16 = 0;
    }

    if (v14 == 7)
    {
      v18 = v8;
    }

    else
    {
      v18 = 0;
    }

    offset = v18;
    v8 += v14;
  }

  v6 -= v14;
  v19 = *(v11 + 32) - v14;
  *(v11 + 32) = v19;
  if (v19)
  {
LABEL_25:
    v22 = 0;
    goto LABEL_26;
  }

  v17 = PSLPCMCheckHeader((v11 + 56));
  if (v17)
  {
LABEL_62:
    v28 = v17;
LABEL_63:
    PesErrorHandling(a1, v28);
    return v28;
  }

  started = PSLPCMGetByteOffsetToStartFrameOfPacket(v11 + 56);
  v21 = started;
  if (started > 3)
  {
    v21 = started - 4;
  }

  *(v11 + 48) = v21;
  if (!v21 || !*(v11 + 40))
  {
    goto LABEL_25;
  }

  v22 = v21 - *(a1 + 624) + *(a1 + 616);
  *(v11 + 48) = 0;
LABEL_26:
  v23 = *(v11 + 48);
  if (v23)
  {
    if (v23 >= v6)
    {
      v23 = v6;
    }

    v6 -= v23;
    v24 = v7 == 0;
    if (v7)
    {
      v7 += v23;
    }

    else
    {
      v7 = 0;
    }

    if (!v24)
    {
      v23 = 0;
    }

    v8 += v23;
  }

  while (v6)
  {
    if (v35 || !*(v11 + 40))
    {
      if (!*(v11 + 24))
      {
        return 0;
      }

      v17 = PSLPCMGetSampleFrequency(v11 + 56, &v38);
      if (v17)
      {
        goto LABEL_62;
      }

      if (v38 != *(a1 + 768))
      {
        FigMPEG2ParserSetAudioCharacteristics(a1, v38);
      }

      v17 = PSLPCMGetSamplesPerFrame(v11 + 56, &v37);
      if (v17)
      {
        goto LABEL_62;
      }

      v17 = PSLPCMGetBytesPerFrame(v11 + 56, &v36);
      if (v17)
      {
        goto LABEL_62;
      }

      v25 = v36;
      v26 = v25 * PSLPCMGetFrameCountOfPacket(v11 + 56) + 7;
      *(a1 + 624) = v26;
      if (v16)
      {
        v27 = PesAddBlockBufferToFrameBlockBuffer(a1, v16, offset, 7uLL, v26, &v34, &v35);
      }

      else
      {
        v27 = PesAddMemoryToFrameMemory(a1, (v11 + 56), 7uLL, v26, &v34, &v35);
      }

      v28 = v27;
      if (v27)
      {
        goto LABEL_63;
      }

      v29 = v37;
      *(a1 + 584) = PSLPCMGetFrameCountOfPacket(v11 + 56) * v29;
      v30 = *(v11 + 16);
      *(a1 + 480) = *v11;
      *(a1 + 496) = v30;
      *(v11 + 24) = 0;
      *(v11 + 40) = 1;
      v35 = 0;
    }

    if (v7)
    {
      v31 = PesAddMemoryToFrameMemory(a1, v7, v6, *(a1 + 624), &v34, &v35);
    }

    else
    {
      v31 = PesAddBlockBufferToFrameBlockBuffer(a1, theSourceBuffer, v8, v6, *(a1 + 624), &v34, &v35);
    }

    v28 = v31;
    if (v31)
    {
      goto LABEL_63;
    }

    v6 -= v34;
    v8 += v34;
    if (v35)
    {
      v17 = FigMPEG2AudioFrameQueueEntryAdjustTimestampsAndEmit(a1, a1 + 456);
      if (v17)
      {
        goto LABEL_62;
      }

      v8 += v22;
      if (v22)
      {
        v6 = (v22 + v6) & ~((v22 + v6) >> 31);
      }

      PesCleanAfterFrameEmit(a1);
      *(v11 + 40) = 0;
    }
  }

  return 0;
}

uint64_t CreatePesPrivateForPSLPCM_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t synchronizer_invalidate()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (OUTLINED_FUNCTION_172(DerivedStorage))
  {
    FigSimpleMutexLock();
  }

  if (!*(v0 + 53))
  {
    *(v0 + 53) = 1;
    if (*(v0 + 8))
    {
      CMNotificationCenterGetDefaultLocalCenter();
      FigNotificationCenterRemoveWeakListener();
    }

    v2 = *(v0 + 24);
    if (v2)
    {
      CFArrayRemoveAllValues(v2);
      v3 = *(v0 + 24);
      if (v3)
      {
        CFRelease(v3);
        *(v0 + 24) = 0;
      }
    }

    v4 = *(v0 + 32);
    if (v4)
    {
      CFRelease(v4);
      *(v0 + 32) = 0;
    }

    v5 = *(v0 + 40);
    if (v5)
    {
      CFRelease(v5);
      *(v0 + 40) = 0;
    }

    v6 = *(v0 + 8);
    if (v6)
    {
      CFRelease(v6);
      *(v0 + 8) = 0;
    }

    v7 = *(v0 + 16);
    if (v7)
    {
      CFRelease(v7);
      *(v0 + 16) = 0;
    }
  }

  if (*v0)
  {
    FigSimpleMutexUnlock();
  }

  return 0;
}

uint64_t synchronizer_finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  synchronizer_invalidate();
  result = *DerivedStorage;
  if (*DerivedStorage)
  {

    return FigSimpleMutexDestroy();
  }

  return result;
}

uint64_t synchronizer_copyProperty(uint64_t a1, uint64_t a2, uint64_t a3, CFTypeRef *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = 4294950925;
  if (a2 && a4)
  {
    if (FigCFEqual())
    {
      FigSimpleMutexLock();
      v8 = MEMORY[0x1E695E4D0];
      if (!*(DerivedStorage + 52))
      {
        v8 = MEMORY[0x1E695E4C0];
      }

      *a4 = CFRetain(*v8);
      FigSimpleMutexUnlock();
      return 0;
    }

    else
    {
      return 4294954509;
    }
  }

  return result;
}

uint64_t synchronizer_setProperty(uint64_t a1, uint64_t a2, const void *a3)
{
  if (!FigCFEqual())
  {
    return 4294954509;
  }

  if (!a3)
  {
    return 4294950925;
  }

  v5 = CFGetTypeID(a3);
  if (v5 != CFBooleanGetTypeID())
  {
    return 4294950925;
  }

  Value = CFBooleanGetValue(a3);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_172(DerivedStorage);
  FigSimpleMutexLock();
  if (*(a1 + 52) != Value)
  {
    *(a1 + 52) = Value;
    FigCFArrayApplyFunction();
  }

  FigSimpleMutexUnlock();
  return 0;
}

uint64_t synchronizer_addAudioRenderer(uint64_t a1, const void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294950926;
  }

  v5 = DerivedStorage;
  v6 = CFGetTypeID(a2);
  if (v6 != FigSampleBufferAudioRendererGetTypeID())
  {
    return 4294950925;
  }

  FigSimpleMutexLock();
  if (dword_1EAF17C18)
  {
    OUTLINED_FUNCTION_147();
    v7 = OUTLINED_FUNCTION_126();
    v15 = OUTLINED_FUNCTION_34_5(v7, v8, v9, v10, v11, v12, v13, v14, v28, v29, v30, v31, SBYTE2(v31), BYTE3(v31), SHIDWORD(v31));
    if (OUTLINED_FUNCTION_16_1(v15))
    {
      OUTLINED_FUNCTION_2_6();
      OUTLINED_FUNCTION_39();
      OUTLINED_FUNCTION_108();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_7();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  if (*(v5 + 53))
  {
    v25 = 4294954511;
    goto LABEL_24;
  }

  CFArrayGetCount(*(v5 + 24));
  v16 = OUTLINED_FUNCTION_15_61();
  if (CFArrayContainsValue(v16, v32, v17))
  {
    v20 = FigSignalErrorAtGM();
    goto LABEL_30;
  }

  CFArrayAppendValue(*(v5 + 24), a2);
  if (*(v5 + 52))
  {
    v18 = MEMORY[0x1E695E4D0];
  }

  else
  {
    v18 = MEMORY[0x1E695E4C0];
  }

  v19 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v19)
  {
    goto LABEL_23;
  }

  v20 = v19(a2, @"ShouldAttemptImmediatePlaybackStart", *v18);
  if (v20)
  {
    goto LABEL_30;
  }

  v20 = synchronizer_disturbPlayback(a1);
  if (v20)
  {
    goto LABEL_30;
  }

  if (v6)
  {
    v21 = *(*(CMBaseObjectGetVTable() + 16) + 32);
    if (v21)
    {
      v22 = a2;
      v23 = a1;
      v24 = 0;
      goto LABEL_18;
    }

LABEL_23:
    v25 = 4294954514;
    goto LABEL_24;
  }

  v20 = synchronizer_setUpAudioRendererAsTimebaseStarter(a1, a2);
  if (v20)
  {
    goto LABEL_30;
  }

  v26 = *(v5 + 8);
  v21 = *(*(CMBaseObjectGetVTable() + 16) + 32);
  if (!v21)
  {
    goto LABEL_23;
  }

  v22 = a2;
  v23 = a1;
  v24 = v26;
LABEL_18:
  v20 = v21(v22, v23, v24);
  if (v20)
  {
LABEL_30:
    v25 = v20;
    goto LABEL_24;
  }

  synchronizer_restorePlayback(a1);
  v25 = 0;
LABEL_24:
  FigSimpleMutexUnlock();
  return v25;
}

uint64_t synchronizer_removeAudioRenderer(uint64_t a1, uint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294950926;
  }

  OUTLINED_FUNCTION_172(DerivedStorage);
  FigSimpleMutexLock();
  if (dword_1EAF17C18)
  {
    OUTLINED_FUNCTION_147();
    v7 = OUTLINED_FUNCTION_126();
    v15 = OUTLINED_FUNCTION_34_5(v7, v8, v9, v10, v11, v12, v13, v14, v34, v35, v36, v37, SBYTE2(v37), BYTE3(v37), SHIDWORD(v37));
    if (OUTLINED_FUNCTION_16_1(v15))
    {
      OUTLINED_FUNCTION_2_6();
      OUTLINED_FUNCTION_39();
      OUTLINED_FUNCTION_108();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_7();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  if (*(v2 + 53))
  {
    v29 = 4294954511;
    goto LABEL_27;
  }

  if (!CFArrayGetCount(*(v2 + 24)))
  {
    v29 = 4294950925;
    goto LABEL_27;
  }

  v16 = OUTLINED_FUNCTION_15_61();
  FirstIndexOfValue = CFArrayGetFirstIndexOfValue(v16, v38, v17);
  if (FirstIndexOfValue == -1)
  {
    v21 = FigSignalErrorAtGM();
    goto LABEL_33;
  }

  v19 = FirstIndexOfValue;
  v20 = *(v2 + 32);
  v21 = synchronizer_disturbPlayback(a1);
  if (v21)
  {
LABEL_33:
    v29 = v21;
    goto LABEL_27;
  }

  if (v20 == a2)
  {
    v22 = CMBaseObjectGetDerivedStorage();
    v23 = *(v22 + 32);
    if (v23)
    {
      v24 = v22;
      CMNotificationCenterGetDefaultLocalCenter();
      FigSampleBufferAudioRendererGetFigBaseObject(v23);
      OUTLINED_FUNCTION_6_125();
      v21 = FigNotificationCenterRemoveWeakListener();
      if (v21)
      {
        goto LABEL_33;
      }

      CMNotificationCenterGetDefaultLocalCenter();
      FigSampleBufferAudioRendererGetFigBaseObject(v23);
      OUTLINED_FUNCTION_5_140();
      v21 = FigNotificationCenterRemoveWeakListener();
      if (v21)
      {
        goto LABEL_33;
      }

      v25 = *(v24 + 32);
      if (v25)
      {
        CFRelease(v25);
        *(v24 + 32) = 0;
      }
    }
  }

  CFArrayRemoveValueAtIndex(*(v2 + 24), v19);
  v26 = *(*(CMBaseObjectGetVTable() + 16) + 32);
  if (!v26)
  {
LABEL_26:
    v29 = 4294954514;
    goto LABEL_27;
  }

  v21 = v26(a2, 0, 0);
  if (v21)
  {
    goto LABEL_33;
  }

  if (v20 == a2)
  {
    if (v3 < 2)
    {
      v27 = *(v2 + 8);
      HostTimeClock = CMClockGetHostTimeClock();
      v21 = CMTimebaseSetSourceClock(v27, HostTimeClock);
      if (!v21)
      {
        goto LABEL_21;
      }

      goto LABEL_33;
    }

    ValueAtIndex = CFArrayGetValueAtIndex(*(v2 + 24), 0);
    v21 = synchronizer_setUpAudioRendererAsTimebaseStarter(a1, ValueAtIndex);
    if (v21)
    {
      goto LABEL_33;
    }

    v31 = *(v2 + 8);
    v32 = *(*(CMBaseObjectGetVTable() + 16) + 32);
    if (v32)
    {
      v21 = v32(ValueAtIndex, a1, v31);
      if (!v21)
      {
        goto LABEL_21;
      }

      goto LABEL_33;
    }

    goto LABEL_26;
  }

LABEL_21:
  synchronizer_restorePlayback(a1);
  v29 = 0;
LABEL_27:
  FigSimpleMutexUnlock();
  return v29;
}

uint64_t synchronizer_copyReadOnlyTimebase(uint64_t a1, void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294950926;
  }

  v4 = DerivedStorage;
  if (*(DerivedStorage + 53))
  {
    return 0;
  }

  v5 = *(DerivedStorage + 16);
  if (v5)
  {
    CFRetain(v5);
    v6 = *(v4 + 16);
  }

  else
  {
    v6 = 0;
  }

  result = 0;
  *a2 = v6;
  return result;
}

uint64_t synchronizer_acquirePlaybackAssertion(uint64_t a1, const void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294950926;
  }

  v4 = DerivedStorage;
  FigSimpleMutexLock();
  if (dword_1EAF17C18)
  {
    OUTLINED_FUNCTION_147();
    v5 = OUTLINED_FUNCTION_126();
    v13 = OUTLINED_FUNCTION_19_4(v5, v6, v7, v8, v9, v10, v11, v12, v16, v17, v18, v19, SBYTE2(v19), BYTE3(v19), SHIDWORD(v19));
    if (OUTLINED_FUNCTION_115_1(v13))
    {
      OUTLINED_FUNCTION_2_6();
      OUTLINED_FUNCTION_39();
      OUTLINED_FUNCTION_7_1();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_414();
  }

  if (!*(v4 + 53))
  {
    v14 = *(v4 + 40);
    v20.length = CFArrayGetCount(v14);
    v20.location = 0;
    if (!CFArrayContainsValue(v14, v20, a2))
    {
      CFArrayAppendValue(*(v4 + 40), a2);
    }
  }

  FigSimpleMutexUnlock();
  return 0;
}

uint64_t synchronizer_releasePlaybackAssertion(uint64_t a1, const void *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return 4294950926;
  }

  OUTLINED_FUNCTION_172(DerivedStorage);
  FigSimpleMutexLock();
  if (dword_1EAF17C18)
  {
    OUTLINED_FUNCTION_147();
    v5 = OUTLINED_FUNCTION_126();
    v13 = OUTLINED_FUNCTION_19_4(v5, v6, v7, v8, v9, v10, v11, v12, v18, v19, v20, v21, SBYTE2(v21), BYTE3(v21), SHIDWORD(v21));
    if (OUTLINED_FUNCTION_115_1(v13))
    {
      OUTLINED_FUNCTION_2_6();
      OUTLINED_FUNCTION_39();
      OUTLINED_FUNCTION_7_1();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_414();
  }

  if (!*(v2 + 53))
  {
    v14 = *(v2 + 40);
    v22.length = CFArrayGetCount(v14);
    v22.location = 0;
    FirstIndexOfValue = CFArrayGetFirstIndexOfValue(v14, v22, a2);
    if (FirstIndexOfValue == -1)
    {
      v16 = 4294950925;
      goto LABEL_10;
    }

    CFArrayRemoveValueAtIndex(*(v2 + 40), FirstIndexOfValue);
  }

  v16 = 0;
LABEL_10:
  FigSimpleMutexUnlock();
  return v16;
}

uint64_t synchronizer_convertTime(uint64_t a1, int a2, uint64_t a3, uint64_t a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 53))
  {
    return 4294954511;
  }

  if (!a4)
  {
    return 4294950926;
  }

  if (a2 == 1831681640)
  {
    v11 = *(DerivedStorage + 16);
    CMClockGetHostTimeClock();
    OUTLINED_FUNCTION_12_76();
    v8 = v11;
    goto LABEL_7;
  }

  if (a2 == 1747795565)
  {
    CMClockGetHostTimeClock();
    OUTLINED_FUNCTION_12_76();
LABEL_7:
    CMSyncConvertTime(v10, v7, v8, v9);
    result = 0;
    *a4 = v13;
    *(a4 + 16) = v14;
    return result;
  }

  return FigSignalErrorAtGM();
}

uint64_t synchronizer_disturbPlayback(uint64_t a1)
{
  if (*(CMBaseObjectGetDerivedStorage() + 48) == 0.0)
  {
    return 0;
  }

  if (dword_1EAF17C18)
  {
    OUTLINED_FUNCTION_147();
    v2 = OUTLINED_FUNCTION_126();
    if (os_log_type_enabled(v2, type))
    {
      v3 = v6;
    }

    else
    {
      v3 = v6 & 0xFFFFFFFE;
    }

    if (v3)
    {
      OUTLINED_FUNCTION_2_6();
      OUTLINED_FUNCTION_39();
      OUTLINED_FUNCTION_108();
      _os_log_send_and_compose_impl();
    }

    OUTLINED_FUNCTION_7();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  return synchronizer_setRateAndAnchorTimeLowLevel(0.0, a1, MEMORY[0x1E6960C70], MEMORY[0x1E6960C70], 0);
}

uint64_t synchronizer_setUpAudioRendererAsTimebaseStarter(uint64_t a1, const void *a2)
{
  v31 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  newSourceClock = 0;
  v5 = *(*(CMBaseObjectGetVTable() + 16) + 40);
  if (v5)
  {
    v6 = v5(a2, &newSourceClock);
    if (v6)
    {
      goto LABEL_15;
    }

    if (dword_1EAF17C18)
    {
      os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
      v15 = OUTLINED_FUNCTION_102_0(os_log_and_send_and_compose_flags_and_os_log_type, v8, v9, v10, v11, v12, v13, v14, v19, v20, *v21, v21[2], OS_LOG_TYPE_DEFAULT, 0);
      if (OUTLINED_FUNCTION_115_1(v15))
      {
        v16 = *(DerivedStorage + 8);
        v23 = 136315906;
        v24 = "synchronizer_setUpAudioRendererAsTimebaseStarter";
        v25 = 2048;
        v26 = a1;
        v27 = 2048;
        v28 = newSourceClock;
        v29 = 2048;
        v30 = v16;
        OUTLINED_FUNCTION_39();
        OUTLINED_FUNCTION_7_1();
      }

      OUTLINED_FUNCTION_7();
      OUTLINED_FUNCTION_414();
    }

    v6 = CMTimebaseSetSourceClock(*(DerivedStorage + 8), newSourceClock);
    if (v6 || (CMNotificationCenterGetDefaultLocalCenter(), FigSampleBufferAudioRendererGetFigBaseObject(a2), OUTLINED_FUNCTION_6_125(), v6 = OUTLINED_FUNCTION_20_42(), v6))
    {
LABEL_15:
      v17 = v6;
    }

    else
    {
      CMNotificationCenterGetDefaultLocalCenter();
      FigSampleBufferAudioRendererGetFigBaseObject(a2);
      OUTLINED_FUNCTION_5_140();
      v17 = OUTLINED_FUNCTION_20_42();
      if (!v17)
      {
        *(DerivedStorage + 32) = a2;
        CFRetain(a2);
      }
    }
  }

  else
  {
    v17 = 4294954514;
  }

  if (newSourceClock)
  {
    CFRelease(newSourceClock);
  }

  return v17;
}

uint64_t synchronizer_restorePlayback(uint64_t a1)
{
  result = CMBaseObjectGetDerivedStorage();
  v3 = *(result + 48);
  if (v3 != 0.0)
  {
    if (dword_1EAF17C18)
    {
      v4 = result;
      OUTLINED_FUNCTION_147();
      v5 = OUTLINED_FUNCTION_126();
      if (os_log_type_enabled(v5, type))
      {
        v6 = v8;
      }

      else
      {
        v6 = v8 & 0xFFFFFFFE;
      }

      if (v6)
      {
        OUTLINED_FUNCTION_2_6();
        OUTLINED_FUNCTION_39();
        OUTLINED_FUNCTION_108();
        _os_log_send_and_compose_impl();
      }

      OUTLINED_FUNCTION_7();
      fig_log_call_emit_and_clean_up_after_send_and_compose();
      v3 = *(v4 + 48);
    }

    return synchronizer_setRateAndAnchorTimeLowLevel(v3, a1, MEMORY[0x1E6960C70], MEMORY[0x1E6960C70], 0);
  }

  return result;
}

void synchronizer_audioRendererClockChangedNotificationHandler(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v45 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  newSourceClock = 0;
  if (dword_1EAF17C18)
  {
    v7 = OUTLINED_FUNCTION_7_110();
    v15 = OUTLINED_FUNCTION_102_0(v7, v8, v9, v10, v11, v12, v13, v14, v32, v33, type, SBYTE2(type), BYTE3(type), SHIDWORD(type));
    if (OUTLINED_FUNCTION_115_1(v15))
    {
      v36 = 136315650;
      v37 = "synchronizer_audioRendererClockChangedNotificationHandler";
      v38 = 2048;
      v39 = a2;
      v40 = 2048;
      v41 = a4;
      OUTLINED_FUNCTION_39();
      OUTLINED_FUNCTION_7_1();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_414();
  }

  v16 = *(*(CMBaseObjectGetVTable() + 16) + 40);
  if (v16 && !v16(a4, &newSourceClock))
  {
    FigSimpleMutexLock();
    if (!*(DerivedStorage + 53))
    {
      if (*(DerivedStorage + 32) == a4)
      {
        v17 = CMTimebaseCopySourceClock(*(DerivedStorage + 8));
        if (!CMTimebaseSetSourceClock(*(DerivedStorage + 8), newSourceClock) && dword_1EAF17C18)
        {
          v18 = OUTLINED_FUNCTION_7_110();
          v19 = os_log_type_enabled(v18, BYTE3(type));
          if (OUTLINED_FUNCTION_16_1(v19))
          {
            OUTLINED_FUNCTION_10_81();
            v42 = v17;
            v43 = v20;
            v44 = v21;
            OUTLINED_FUNCTION_39();
            OUTLINED_FUNCTION_108();
            _os_log_send_and_compose_impl();
          }

          OUTLINED_FUNCTION_7();
          fig_log_call_emit_and_clean_up_after_send_and_compose();
        }

        FigSimpleMutexUnlock();
        if (v17)
        {
          CFRelease(v17);
        }

        goto LABEL_16;
      }

      if (dword_1EAF17C18)
      {
        v22 = OUTLINED_FUNCTION_7_110();
        v30 = OUTLINED_FUNCTION_102_0(v22, v23, v24, v25, v26, v27, v28, v29, v32, v33, type, SBYTE2(type), BYTE3(type), SHIDWORD(type));
        if (OUTLINED_FUNCTION_115_1(v30))
        {
          OUTLINED_FUNCTION_10_81();
          v42 = v31;
          OUTLINED_FUNCTION_39();
          OUTLINED_FUNCTION_7_1();
        }

        OUTLINED_FUNCTION_7();
        OUTLINED_FUNCTION_414();
      }
    }

    FigSimpleMutexUnlock();
  }

LABEL_16:
  if (newSourceClock)
  {
    CFRelease(newSourceClock);
  }
}

uint64_t FigCaptionRendererFreeLayoutRegionCreate(uint64_t a1, uint64_t a2, void *a3)
{
  if (a3)
  {
    v18 = 0;
    MEMORY[0x19A8D3660](&FigCaptionRendererFreeLayoutRegionGetClassID_sRegisterFigCaptionRendererFreeLayoutRegionBaseTypeOnce, RegisterFigCaptionRendererFreeLayoutRegionBaseType);
    result = CMDerivedObjectCreate();
    if (!result)
    {
      v7 = v18;
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      DerivedStorage[7] = a2;
      DerivedStorage[8] = a1;
      v17 = 0;
      FigCaptionRendererNodeCreate(&v17);
      v9 = v17;
      *DerivedStorage = v17;
      FigCaptionRendererNodeProtocolGetProtocolID();
      ProtocolVTable = CMBaseObjectGetProtocolVTable();
      if (ProtocolVTable)
      {
        v11 = *(ProtocolVTable + 16);
        if (v11)
        {
          v12 = *(v11 + 216);
          if (v12)
          {
            v12(v9, 1);
          }
        }
      }

      v13 = *DerivedStorage;
      FigCaptionRendererNodeProtocolGetProtocolID();
      v14 = CMBaseObjectGetProtocolVTable();
      if (v14)
      {
        v15 = *(v14 + 16);
        if (v15)
        {
          v16 = *(v15 + 232);
          if (v16)
          {
            v16(v13, 1);
          }
        }
      }

      result = 0;
      *a3 = v7;
    }
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t FigCaptionRendererFreeLayoutRegion_FigCaptionRendererNodeProtocol_HasChildNode_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FigCaptionRendererFreeLayoutRegion_FigCaptionRendererNodeProtocol_Layout_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FigCaptionRendererFreeLayoutRegion_FigCaptionRendererNodeProtocol_Layout_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FigCaptionRendererFreeLayoutRegion_FigCaptionRendererNodeProtocol_Layout_cold_3()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FigCaptionRendererFreeLayoutRegion_FigCaptionRendererNodeProtocol_Layout_cold_4()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

BOOL FigSpeedRampDataIsValid(const void *a1)
{
  if (!a1)
  {
    return 0;
  }

  v2 = CFGetTypeID(a1);
  if (v2 != CFDataGetTypeID() || CFDataGetLength(a1) % 0x60uLL)
  {
    return 0;
  }

  return FigSpeedRampIsCMTimeMappingArrayDataContinuous(a1);
}

uint64_t figSpeedRampRenderPipelineReset(uint64_t a1, uint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  v4 = *(DerivedStorage + 128);
  if (v4)
  {
    CFRelease(v4);
    *(DerivedStorage + 128) = 0;
  }

  v5 = MEMORY[0x1E6960C70];
  *(DerivedStorage + 144) = *MEMORY[0x1E6960C70];
  *(DerivedStorage + 160) = *(v5 + 16);
  CFArrayRemoveAllValues(*(DerivedStorage + 168));
  FigSimpleMutexUnlock();
  result = CMBufferQueueReset(*(DerivedStorage + 8));
  if (!result)
  {
    v7 = *(DerivedStorage + 184);
    v8 = *(*(CMBaseObjectGetVTable() + 16) + 64);
    if (v8)
    {
      result = v8(v7, a2);
      if (!result)
      {
        v9 = *(DerivedStorage + 32);
        v10 = *(*(CMBaseObjectGetVTable() + 16) + 16);
        if (v10)
        {
          v10(v9);
        }

        return 0;
      }
    }

    else
    {
      return 4294954514;
    }
  }

  return result;
}

void speedramp_setTransferAheadSpeedRampData(CMTime *a1, const __CFData *a2)
{
  v135 = *MEMORY[0x1E69E9840];
  cf = a1;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v4 = *MEMORY[0x1E695E480];
  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
  if (a2 && (v6 = CFGetTypeID(a2), v6 == CFDataGetTypeID()))
  {
    BytePtr = CFDataGetBytePtr(a2);
    Length = CFDataGetLength(a2);
    if (Length >= 0x60)
    {
      theArray = Mutable;
      v91 = a2;
      v97 = DerivedStorage;
      v9 = 0;
      v10 = Length / 0x60;
      v86 = &BytePtr[96 * (Length / 0x60)];
      v81 = &v86[-4];
      v103 = (Length / 0x60);
      v11 = BytePtr + 48;
      v12 = Length / 0x60;
      while (1)
      {
        if (v103 - v9 >= 10)
        {
          v13 = 10;
        }

        else
        {
          v13 = v103 - v9;
        }

        v14 = CFStringCreateMutable(v4, 0);
        v15 = v13 + v9;
        v61 = (v15 - 1);
        v66 = v12;
        v56 = v9;
        CFStringAppendFormat(v14, 0, @"mappings %d..%d of %d, source range -> target range:");
        if ((v103 - v9) >= 1)
        {
          v27 = v15;
          v28 = v11;
          v29 = v9;
          do
          {
            v30 = OUTLINED_FUNCTION_0_220(*(v28 - 4), *(v28 - 3), v56, v61, v66, *&v71, v76, v81, v86, v91, v97, v103, theArray, theArray_8, cf, v124, time.value, *&time.timescale, time.epoch, v130, v131, v132, v133, v134);
            v31 = OUTLINED_FUNCTION_0_220(*(v28 + 2), *v28, v57, v62, v67, v72, v77, v82, v87, v92, v98, v104, theArraya, theArray_8a, cfa, v125, time.value, *&time.timescale, time.epoch, v130, v131, v132, v133, v134);
            v32 = OUTLINED_FUNCTION_0_220(*(v28 - 1), *(v28 - 24), v58, v63, v68, v73, v78, v83, v88, v93, v99, v105, theArrayb, theArray_8b, cfb, v126, time.value, *&time.timescale, time.epoch, v130, v131, v132, v133, v134);
            v33 = OUTLINED_FUNCTION_0_220(*(v28 + 5), *(v28 + 24), v59, v64, v69, v74, v79, v84, v89, v94, v100, v106, theArrayc, theArray_8c, cfc, v127, time.value, *&time.timescale, time.epoch, v130, v131, v132, v133, v134);
            v66 = *&v31;
            v71 = v32 / v33;
            v61 = *&v30;
            v56 = v29;
            CFStringAppendFormat(v14, 0, @"\n %3d: %7.3f -> %7.3f (rate %1.2f)");
            ++v29;
            v28 += 96;
          }

          while (v29 < v27);
        }

        v9 += 10;
        if (v10 <= v9)
        {
          break;
        }

        CFArrayAppendValue(theArray, v14);
        CFRelease(v14);
        v11 += 960;
      }

      OUTLINED_FUNCTION_2_200(v16, v17, v18, v19, v20, v21, v22, v23, *v81, v81[1], v81[2], v56, v61, v66, *&v71, v76, v81, v86, v91, v97, v103, theArray, theArray_8, cf, v124, time.value, *&time.timescale, time.epoch, v130, v131, v132, v24, v25, v26);
      Seconds = CMTimeGetSeconds(&time);
      OUTLINED_FUNCTION_2_200(v42, v43, v44, v45, v46, v47, v48, v49, *&v90[-2].value, *&v90[-2].epoch, *&v90[-1].timescale, v60, v65, v70, v75, v80, v85, v90, v95, v101, v107, theArrayd, theArray_8d, cfd, v128, time.value, *&time.timescale, time.epoch, v130, v131, v132, v50, v51, v52);
      v53 = CMTimeGetSeconds(&time);
      CFStringAppendFormat(v14, 0, @"\n end: %7.3f -> %7.3f", *&Seconds, *&v53);
      Mutable = theArraye;
      CFArrayAppendValue(theArraye, v14);
      CFRelease(v14);
      a2 = v96;
      DerivedStorage = v102;
    }
  }

  else
  {
    CFArrayAppendValue(Mutable, @"<no mappings>");
  }

  v34 = &dword_1EAF17000;
  if (Mutable)
  {
    Count = CFArrayGetCount(Mutable);
    if (Count >= 1)
    {
      v36 = Count;
      v37 = 0;
      v38 = dword_1EAF17C38;
      do
      {
        if (v38)
        {
          os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
          os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
          OUTLINED_FUNCTION_1_203();
          fig_log_call_emit_and_clean_up_after_send_and_compose();
          v38 = dword_1EAF17C38;
        }

        ++v37;
      }

      while (v36 != v37);
    }

    CFRelease(Mutable);
    v34 = &dword_1EAF17000;
  }

  if (v34[782])
  {
    v40 = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(v40, OS_LOG_TYPE_DEFAULT);
    OUTLINED_FUNCTION_1_203();
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  if (!a2 || FigSpeedRampIsCMTimeMappingArrayDataContinuous(a2))
  {
    v54 = *(DerivedStorage + 176);
    if (v54)
    {
      CFRelease(v54);
      *(DerivedStorage + 176) = 0;
    }

    if (a2)
    {
      v55 = CFGetAllocator(cf);
      *(DerivedStorage + 176) = CFDataCreateCopy(v55, a2);
    }
  }
}

uint64_t FigSpeedRampRenderPipelineCreate_cold_3(uint64_t a1, _DWORD *a2)
{
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t speedramp_remapAndTransferSampleBuffersUpToHighWaterLevel_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t speedramp_remapAndTransferSampleBuffersUpToHighWaterLevel_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t speedramp_remapAndTransferSampleBuffersUpToHighWaterLevel_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t speedramp_remapAndTransferSampleBuffersUpToHighWaterLevel_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t speedramp_remapAndTransferSampleBuffersUpToHighWaterLevel_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t speedramp_remapAndTransferSampleBuffersUpToHighWaterLevel_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figSpeedRampRenderPipelineStartAndUseTimebaseAtTransition_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figTTMLIntervalTreeInsert(__int128 *a1, const void *a2)
{
  memset(&v8, 0, sizeof(v8));
  result = FigTTMLNodeGetActiveTimeRange(a2, &v8);
  if (!result)
  {
    if ((v8.start.flags & 1) == 0 || (v8.duration.flags & 1) == 0 || v8.duration.epoch || v8.duration.value < 0)
    {
      return FigSignalErrorAtGM();
    }

    else
    {
      v6.start = v8.duration;
      time2 = **&MEMORY[0x1E6960CC0];
      result = CMTimeCompare(&v6.start, &time2);
      if (result)
      {
        if ((*(a1 + 12) & 1) == 0)
        {
          *a1 = *&v8.start.value;
          *(a1 + 2) = v8.start.epoch;
        }

        *&v6.start.value = *&v8.start.value;
        *&v6.start.epoch = *&v8.start.epoch;
        v5 = *a1;
        *&v6.duration.timescale = *&v8.duration.timescale;
        *&time2.value = v5;
        time2.epoch = *(a1 + 2);
        if (CMTimeRangeContainsTime(&v6, &time2))
        {
          figTTMLIntervalTreeInsertToSortedArray(*(a1 + 3), a2, figTTMLIntervalTreeCompareByStart);
          figTTMLIntervalTreeInsertToSortedArray(*(a1 + 4), a2, figTTMLIntervalTreeCompareByEnd);
          return 0;
        }

        else
        {
          v6 = v8;
          CMTimeRangeGetEnd(&time2, &v6);
          *&v6.start.value = *a1;
          v6.start.epoch = *(a1 + 2);
          if (CMTimeCompare(&time2, &v6.start) > 0)
          {
            if (!*(a1 + 6))
            {
              *(a1 + 6) = figTTMLIntervalCreateInterval();
            }
          }

          else if (!*(a1 + 5))
          {
            *(a1 + 5) = figTTMLIntervalCreateInterval();
          }

          return figTTMLIntervalTreeInsert();
        }
      }
    }
  }

  return result;
}

uint64_t FigTTMLIntervalTreeCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLIntervalTreeCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLIntervalTreeCreate_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLIntervalTreeAppendActiveNodesToArray_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLIntervalTreeAppendActiveNodesToArray_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCPEFairPlayCloudProtectorCreate(const void *a1, CFDictionaryRef theDict, void *a3)
{
  if (!theDict)
  {
    return 4294955146;
  }

  if (!CFDictionaryContainsKey(theDict, @"6519D6C3-E423-4DEA-811B-AA98B31B3180") || !CFDictionaryContainsKey(theDict, @"F0C26711-9A38-43E9-BA34-8DABABF5F69D"))
  {
    return 4294955136;
  }

  if (!a3)
  {
    return 4294955146;
  }

  MEMORY[0x19A8D3660](&FigFairPlayCPEProtectorCloudGetClassID_sRegisterFigFairPlayCPEProtectorCloudTypeOnce, RegisterFigFairPlayCPEProtectorCloudType);
  v6 = CMDerivedObjectCreate();
  if (!v6)
  {
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    if (DerivedStorage)
    {
      v8 = DerivedStorage;
      Copy = CFDictionaryCreateCopy(*MEMORY[0x1E695E480], theDict);
      v8[1] = Copy;
      cf = 0;
      FigBytePumpGetFigBaseObject(Copy);
      Value = CFDictionaryGetValue(theDict, @"StorageURL");
      if (!Value || (v11 = Value, v12 = CFGetTypeID(Value), v12 != CFURLGetTypeID()) || (v13 = CFRetain(v11)) == 0)
      {
        v13 = FigFairPlayCopyDefaultKeybagFolderURL();
      }

      v6 = FigFairPlaySharedContextCopyForKeybagURLAndClient(a1, v13, 0, &cf);
      if (!v6)
      {
        *v8 = cf;
        cf = 0;
      }

      if (v13)
      {
        CFRelease(v13);
      }

      if (cf)
      {
        CFRelease(cf);
      }

      if (!v6)
      {
        *a3 = 0;
      }
    }

    else
    {
      return 4294955145;
    }
  }

  return v6;
}

uint64_t FigFairPlayCPEProtectorCloudCopyProperty(uint64_t a1, const void *a2, uint64_t a3, void *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = 4294955146;
  if (a2 && a4)
  {
    if (CFEqual(a2, @"IsAirPlayPossible"))
    {
      if (*MEMORY[0x1E695E4D0])
      {
        v9 = CFRetain(*MEMORY[0x1E695E4D0]);
      }

      else
      {
        v9 = 0;
      }

      result = 0;
      *a4 = v9;
    }

    else
    {
      v10 = *DerivedStorage;
      v11 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v11)
      {

        return v11(v10, a2, a3, a4);
      }

      else
      {
        return 4294954514;
      }
    }
  }

  return result;
}

CFIndex FigFairPlayCPEProtectorCloudIsApplicationAuthorizedWithEntitlement(uint64_t a1, __SecTask *a2, int a3, int *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  Code = 4294955146;
  if (!a4 || !DerivedStorage)
  {
    return Code;
  }

  if (!a2)
  {
    goto LABEL_12;
  }

  error = 0;
  v9 = SecTaskCopyValueForEntitlement(a2, @"com.apple.coremedia.allow-protected-content-playback", &error);
  if (!error)
  {
    if (v9)
    {
      v11 = CFGetTypeID(v9);
      if (v11 == CFBooleanGetTypeID())
      {
        Code = 0;
        if (CFBooleanGetValue(v9))
        {
          v10 = a3 & 3;
        }

        else
        {
          v10 = 0;
        }
      }

      else
      {
        v10 = 0;
        Code = 0;
      }

      goto LABEL_14;
    }

LABEL_12:
    v10 = 0;
LABEL_18:
    Code = 0;
    *a4 = v10 & a3;
    return Code;
  }

  Code = CFErrorGetCode(error);
  v10 = 0;
  if (v9)
  {
LABEL_14:
    CFRelease(v9);
  }

  if (error)
  {
    CFRelease(error);
  }

  if (!Code)
  {
    goto LABEL_18;
  }

  return Code;
}

uint64_t FigFairPlayCPEProtectorCloudEndAirPlaySession()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!DerivedStorage)
  {
    return 4294955146;
  }

  v1 = DerivedStorage;
  result = *(DerivedStorage + 16);
  if (result)
  {
    FigFairPlayAirPlaySessionDestroy(result);
    result = 0;
    *(v1 + 16) = 0;
  }

  return result;
}

uint64_t figTTMLProfileConsumeChildNode(uint64_t a1, CFTypeRef *a2, void **a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v15 = 0;
  value = 0;
  cf = 0;
  v7 = FigTTMLGetLibXMLAccess();
  if (!v7)
  {
    v8 = FigSignalErrorAtGM();
    goto LABEL_24;
  }

  if ((*(v7 + 72))(a1) == 1)
  {
    v8 = FigTTMLCopyNamespaceAndLocalNameOfCurrentNode(a1, &v15, &cf);
    if (v8)
    {
      goto LABEL_24;
    }

    if (FigCFEqual() && FigCFEqual())
    {
      v9 = CFGetAllocator(*a2);
      v8 = FigTTMLFeaturesCreate(v9, a1, a2, &value);
      if (!v8)
      {
        v10 = *(DerivedStorage + 136);
LABEL_12:
        CFArrayAppendValue(v10, value);
        goto LABEL_14;
      }

      goto LABEL_24;
    }

    if (FigCFEqual() && FigCFEqual())
    {
      v11 = CFGetAllocator(*a2);
      v8 = FigTTMLExtensionsCreate(v11, a1, a2, &value);
      if (!v8)
      {
        v10 = *(DerivedStorage + 144);
        goto LABEL_12;
      }

LABEL_24:
      v12 = v8;
      goto LABEL_16;
    }
  }

  v8 = FigTTMLSkipNode(a1, a2, *(DerivedStorage + 128));
  if (v8)
  {
    goto LABEL_24;
  }

LABEL_14:
  v12 = 0;
  if (a3)
  {
    *a3 = value;
    value = 0;
  }

LABEL_16:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  if (value)
  {
    CFRelease(value);
  }

  return v12;
}

uint64_t FigTTMLProfileCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void fragManifold_TrackMetadataExtendedNotificationHandler(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, const __CFDictionary *a5)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v16 = 0;
  v15 = 0;
  if (a4)
  {
    if (a5)
    {
      v8 = DerivedStorage;
      if (!MovieTrackGetBasicInfo(a4, 0, &v16) && !fragManifold_ObtainTrackByID(v8, v16, &v15))
      {
        if (v15)
        {
          Value = CFDictionaryGetValue(a5, @"Metadata");
          if (Value)
          {
            v10 = &kFigMetadataFormat_QuickTimeUserData;
            if (*(v8 + 153))
            {
              v10 = &kFigMetadataFormat_ISOUserData;
            }

            v11 = CFDictionaryGetValue(Value, *v10);
            if (v11 && CFArrayGetCount(v11) >= 1)
            {
              ConcatenationOfTwoArrays = FigCFArrayCreateConcatenationOfTwoArrays();
              v13 = ConcatenationOfTwoArrays;
              v14 = *(v15 + 144);
              *(v15 + 144) = ConcatenationOfTwoArrays;
              if (ConcatenationOfTwoArrays)
              {
                CFRetain(ConcatenationOfTwoArrays);
              }

              if (v14)
              {
                CFRelease(v14);
              }

              if (v13)
              {
                CFRelease(v13);
              }
            }
          }
        }
      }
    }
  }
}

uint64_t MovieFragmentManifoldCopyCurrentFormatDescriptionForTrack(uint64_t a1, int a2, uint64_t *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v8 = 0;
  if (a3)
  {
    FigSimpleMutexLock();
    OUTLINED_FUNCTION_7_111();
    if (*DerivedStorage)
    {
      v6 = 4294954511;
    }

    else
    {
      v6 = fragManifold_ObtainTrackByID(DerivedStorage, a2, &v8);
      if (!v6)
      {
        *a3 = FigFormatDescriptionRetain();
      }
    }
  }

  else
  {
    v6 = FigSignalErrorAtGM();
  }

  OUTLINED_FUNCTION_19_49();
  return v6;
}

uint64_t MovieFragmentManifoldInstallCallbacksForTrack(uint64_t a1, int a2, void *a3, uint64_t a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v12 = 0;
  FigSimpleMutexLock();
  OUTLINED_FUNCTION_7_111();
  if (a3 && *DerivedStorage)
  {
    v10 = 4294954511;
  }

  else
  {
    v8 = fragManifold_ObtainTrackByID(DerivedStorage, a2, &v12);
    if (v8)
    {
      v10 = v8;
    }

    else
    {
      v9 = v12;
      if (a3)
      {
        __copy_constructor_8_8_pa0_6124_0_pa0_43336_8_pa0_40812_16(v12 + 1, a3);
        v9 = v12;
      }

      else
      {
        v12[1] = 0;
        v9[2] = 0;
        v9[3] = 0;
      }

      v10 = 0;
      v9[4] = a4;
    }
  }

  OUTLINED_FUNCTION_19_49();
  return v10;
}

uint64_t MovieFragmentManifoldCopyTrackProperty(uint64_t a1, int a2, const void *a3, const __CFAllocator *a4, void *a5)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v66 = 0;
  FigSimpleMutexLock();
  OUTLINED_FUNCTION_7_111();
  if (*DerivedStorage)
  {
    v14 = 4294954511;
    goto LABEL_25;
  }

  if (!DerivedStorage[18])
  {
    v14 = 4294954513;
    goto LABEL_25;
  }

  v10 = fragManifold_ObtainTrackByID(DerivedStorage, a2, &v66);
  if (v10)
  {
    v14 = v10;
    goto LABEL_25;
  }

  if (*(v66 + 40))
  {
    if (CFEqual(a3, @"FMFD_TrackAudioPrimingDuration"))
    {
      OUTLINED_FUNCTION_24_38();
      if (!v12)
      {
        goto LABEL_24;
      }

      v63 = *(v11 + 120);
      v13 = CMTimeCopyAsDictionary(&v63, a4);
    }

    else
    {
      v15 = CFEqual(a3, @"FMFD_TrackHasAudioDependencyInformation");
      if (v15)
      {
        v23 = OUTLINED_FUNCTION_27_35(v15, v16, v17, v18, v19, v20, v21, v22, v63.value, *&v63.timescale, v63.epoch, v64, v65, v66);
        HasAudioDependencyInformation = MovieTrackHasAudioDependencyInformation(v23);
      }

      else
      {
        v25 = CFEqual(a3, @"FMFD_TrackHasSeamSamples");
        if (v25)
        {
          v33 = OUTLINED_FUNCTION_27_35(v25, v26, v27, v28, v29, v30, v31, v32, v63.value, *&v63.timescale, v63.epoch, v64, v65, v66);
          HasAudioDependencyInformation = MovieTrackHasSeamSamples(v33);
        }

        else
        {
          v34 = CFEqual(a3, @"FMFD_TrackHasSampleEncryptionBox");
          if (v34)
          {
            v42 = OUTLINED_FUNCTION_27_35(v34, v35, v36, v37, v38, v39, v40, v41, v63.value, *&v63.timescale, v63.epoch, v64, v65, v66);
            HasAudioDependencyInformation = MovieTrackIsSampleEncryptionAtomPresent(v42);
          }

          else
          {
            v43 = CFEqual(a3, @"FMFD_TrackHasSampleAuxInfoBoxes");
            if (!v43)
            {
              v53 = CFEqual(a3, @"FMFD_TrackMatrixArray");
              if (!v53)
              {
LABEL_24:
                v14 = 4294954512;
                goto LABEL_25;
              }

              LODWORD(v65) = 0;
              v61 = OUTLINED_FUNCTION_27_35(v53, v54, v55, v56, v57, v58, v59, v60, 0, 0, 0, 0, v65, v66);
              MovieTrackGetSpatialInformation(v61, 0, 0, &v63);
              v13 = FigMatrixToCFArray(a4, &v63);
              goto LABEL_21;
            }

            v51 = OUTLINED_FUNCTION_27_35(v43, v44, v45, v46, v47, v48, v49, v50, v63.value, *&v63.timescale, v63.epoch, v64, v65, v66);
            HasAudioDependencyInformation = MovieTrackBothSampleAuxInfoAtomsPresent(v51);
          }
        }
      }

      v52 = MEMORY[0x1E695E4D0];
      if (!HasAudioDependencyInformation)
      {
        v52 = MEMORY[0x1E695E4C0];
      }

      v13 = CFRetain(*v52);
    }

LABEL_21:
    v14 = 0;
    *a5 = v13;
    goto LABEL_25;
  }

  v14 = 4294954509;
LABEL_25:
  OUTLINED_FUNCTION_19_49();
  return v14;
}

uint64_t MovieFragmentReannounceUnregisteredTracks(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFRetain(a1);
  FigSimpleMutexLock();
  OUTLINED_FUNCTION_25_40();
  if (*DerivedStorage)
  {
    v7 = 4294954511;
  }

  else
  {
    *(DerivedStorage + 2) = 0;
    if (MovieInformationGetTrackCount(*(DerivedStorage + 144)) < 1)
    {
LABEL_11:
      v7 = 0;
    }

    else
    {
      v3 = 0;
      v4 = 0;
      while (1)
      {
        v5 = *(DerivedStorage + 160) + v3;
        if (!*(v5 + 8) && !*(v5 + 16))
        {
          v6 = fragManifold_CallNewTrackCallback(DerivedStorage, v5);
          if (v6)
          {
            break;
          }

          v6 = fragManifold_CallFormatDescriptionCallback(DerivedStorage, v5);
          if (v6)
          {
            break;
          }
        }

        ++v4;
        v3 += 256;
        if (MovieInformationGetTrackCount(*(DerivedStorage + 144)) <= v4)
        {
          goto LABEL_11;
        }
      }

      v7 = v6;
    }
  }

  --*(DerivedStorage + 32);
  FigSimpleMutexUnlock();
  CFRelease(a1);
  return v7;
}

uint64_t fragManifold_PushBytes(uint64_t a1)
{
  v1020 = *MEMORY[0x1E69E9840];
  OUTLINED_FUNCTION_496();
  appended = CMBlockBufferAppendBufferReference(v3, v4, v5, v6, 0);
  if (appended)
  {
    return appended;
  }

  DataLength = CMBlockBufferGetDataLength(*(a1 + 80));
  v9 = MEMORY[0x1E695E480];
  v10 = MEMORY[0x1E6960FF0];
  v11 = MEMORY[0x1E69610C8];
  v12 = MEMORY[0x1E6961008];
  v13 = MEMORY[0x1E6961000];
  v14 = MEMORY[0x1E6961010];
  v15 = MEMORY[0x1E6960458];
  v16 = MEMORY[0x1E695E4D0];
  v17 = MEMORY[0x1E6960460];
  v18 = MEMORY[0x1E6960450];
  v19 = MEMORY[0x1E695E4C0];
  v20 = MEMORY[0x1E6960560];
  v21 = MEMORY[0x1E69604E8];
  v22 = MEMORY[0x1E69603F0];
  v23 = MEMORY[0x1E69603F8];
  v24 = MEMORY[0x1E69603E8];
  v31 = MEMORY[0x1E6962DD8];
  v25 = MEMORY[0x1E6962DF0];
  v26 = MEMORY[0x1E6960330];
  v27 = MEMORY[0x1E6962720];
  i = MEMORY[0x1E6962728];
  *(a1 + 88) = DataLength;
  *&v29 = 136315138;
  *v618 = v29;
  v30 = *v9;
  v902 = *v10;
  v838 = *v12;
  v864 = *v13;
  v747 = *v14;
  value = *v16;
  v695 = *v17;
  v682 = *v18;
  v656 = *v15;
  v669 = *v19;
  v799 = *v11;
  key = *v20;
  v786 = *v21;
  v967 = *v23;
  v980 = *v22;
  v928 = *v24;
  v941 = *v31;
  LODWORD(v31) = 1836019574;
  v915 = 0x1F0B4B258;
  v825 = *v25;
  v760 = *v26;
  v721 = *i;
  v734 = *v27;
  v708 = *MEMORY[0x1E6962718];
  v643 = *MEMORY[0x1E6962DB8];
  OUTLINED_FUNCTION_16_59();
  allocator = v30;
LABEL_3:
  switch(*(a1 + 112))
  {
    case 0:
      if (*(a1 + 88) < 8uLL)
      {
        return 0;
      }

      destination[0].duration.value = 0;
      appended = CMBlockBufferCopyDataBytes(*(a1 + 80), 0, 8uLL, destination);
      if (appended)
      {
        return appended;
      }

      v34 = destination[0].duration.value;
      v35 = bswap32(HIDWORD(destination[0].duration.value));
      *(a1 + 116) = v35;
      v36 = bswap32(v34);
      *(a1 + 120) = v36;
      if (v36 <= 7)
      {
        goto LABEL_760;
      }

      if (v35 == 1701671783)
      {
        goto LABEL_504;
      }

      v37 = v35 == 1718773093 || v35 == 2003395685;
      if (v37)
      {
        goto LABEL_20;
      }

      if (v35 != 1835295092)
      {
        if (v35 == 1836019558)
        {
          if (!*(a1 + 137) || *(a1 + 138))
          {
            goto LABEL_760;
          }

          *(a1 + 138) = 1;
        }

        else if (v35 == v31)
        {
          if (!*(a1 + 136) || *(a1 + 137))
          {
            goto LABEL_760;
          }

          *(a1 + 137) = 1;
        }

        else
        {
          if (v35 == 1936419184 || v35 == 1970628964)
          {
LABEL_20:
            *(a1 + 112) = 3;
            *(a1 + 128) = v36;
            goto LABEL_505;
          }

          if (v35 == 1718909296)
          {
            if (*(a1 + 136))
            {
              goto LABEL_760;
            }

            *(a1 + 136) = 1;
          }
        }

LABEL_504:
        *(a1 + 112) = 1;
        goto LABEL_505;
      }

      if (*(a1 + 152) && !*(a1 + 138))
      {
LABEL_760:
        OUTLINED_FUNCTION_0_221();
        return FigSignalErrorAtGM();
      }

      *(a1 + 240) = *(a1 + 72) + v36;
      if (!*(a1 + 216))
      {
        *(a1 + 216) = 64;
        v410 = OUTLINED_FUNCTION_32_12(0x1200uLL);
        *(a1 + 232) = OUTLINED_FUNCTION_21_42(v410);
      }

      ConsumeBufferedBytes(a1, 8);
      if (!*(a1 + 160))
      {
        OUTLINED_FUNCTION_0_221();
        v422 = FigSignalErrorAtGM();
        goto LABEL_524;
      }

      TrackCount = MovieInformationGetTrackCount(*(a1 + 144));
      v412 = TrackCount;
      if (TrackCount < 1)
      {
        if (!TrackCount)
        {
LABEL_525:
          *(a1 + 138) = 0;
          *(a1 + 112) = 2;
          OUTLINED_FUNCTION_11_77();
LABEL_505:
          v387 = 0;
          goto LABEL_506;
        }

LABEL_523:
        v422 = fragManifold_SelectEligibleTrackForEmitting(a1);
LABEL_524:
        ISOUserDataReader = v422;
        if (v422)
        {
          goto LABEL_759;
        }

        goto LABEL_525;
      }

      v413 = 0;
      while (1)
      {
        v31 = *(a1 + 160) + v413;
        v414 = MovieSampleAccessorCreate(*(a1 + 144), *(v31 + 40), (v31 + 168));
        if (v414 && v414 != -12842)
        {
          break;
        }

        if (*(v31 + 168))
        {
          v414 = fragManifold_ObtainChunkInformation(v31);
          if (v414)
          {
            break;
          }
        }

        v413 += 256;
        if (!--v412)
        {
          goto LABEL_523;
        }
      }

      ISOUserDataReader = v414;
LABEL_759:
      fragManifold_UnprepareTracksForSampleEmission(a1);
      return ISOUserDataReader;
    case 1:
      v382 = *(a1 + 120);
      if (*(a1 + 88) < v382)
      {
        return 0;
      }

      if (*(a1 + 116) == 1701671783)
      {
        time1.value = 0;
        time2.value = 0;
        v383 = OUTLINED_FUNCTION_30_31(appended, *(a1 + 80), v32, v382, v33, &time1);
        if (v383)
        {
          ISOUserDataReader = v383;
        }

        else
        {
          EMSGInformation = EMSGParseEventMessageAtomAndCreateEMSGInformation(time1.value, &time2);
          if (!EMSGInformation || (ISOUserDataReader = EMSGInformation, EMSGInformation == -17873))
          {
            ConsumeBufferedBytes(a1, *(a1 + 120));
            v385 = time2.value;
            if (time2.value)
            {
              blockBufferOut.value = 0;
              v386 = *(a1 + 280);
              if (v386)
              {
                ISOUserDataReader = 0;
              }

              else
              {
                destination[0].duration.value = 0;
                LODWORD(v31) = MovieInformationGetTrackCount(*(a1 + 144));
                do
                {
                  LODWORD(v31) = v31 + 1;
                }

                while (fragManifold_ObtainTrackByID(a1, v31, 0) != -16042);
                Mutable = CFDictionaryCreateMutable(v30, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
                if (Mutable)
                {
                  v417 = Mutable;
                  CFDictionarySetValue(Mutable, v760, *(v385 + 48));
                  v418 = CMFormatDescriptionCreate(v30, 0x6D657461u, 0x656D7367u, v417, destination);
                  if (!v418)
                  {
                    v419 = OUTLINED_FUNCTION_13_62(1uLL);
                    *(a1 + 280) = v419;
                    if (v419)
                    {
                      *v419 = v31;
                      v419[12] = 1835365473;
                      fragManifold_SetTrackLatestFormatDescription(a1, v419, destination[0].duration.value);
                      v418 = fragManifold_CallNewTrackCallback(a1, *(a1 + 280));
                      if (!v418)
                      {
                        v418 = fragManifold_CallFormatDescriptionCallback(a1, *(a1 + 280));
                      }
                    }

                    else
                    {
                      OUTLINED_FUNCTION_0_221();
                      v418 = FigSignalErrorAtGM();
                    }
                  }

                  ISOUserDataReader = v418;
                  OUTLINED_FUNCTION_11_77();
                  CFRelease(v417);
                  if (destination[0].duration.value)
                  {
                    CFRelease(destination[0].duration.value);
                  }
                }

                else
                {
                  OUTLINED_FUNCTION_0_221();
                  ISOUserDataReader = FigSignalErrorAtGM();
                  OUTLINED_FUNCTION_11_77();
                }

                v386 = *(a1 + 280);
                if (!v386)
                {
                  goto LABEL_638;
                }
              }

              if (*(v386 + 16))
              {
                time.value = CMBlockBufferGetDataLength(*(v385 + 56));
                memcpy(destination, MEMORY[0x1E6960CF0], 0x48uLL);
                v420 = *(v385 + 28);
                if (v420 == 0xFFFFFFFFLL)
                {
                  v421 = MEMORY[0x1E6960C70];
                  *&destination[0].duration.value = *MEMORY[0x1E6960C70];
                  destination[0].duration.epoch = *(MEMORY[0x1E6960C70] + 16);
                }

                else
                {
                  CMTimeMake(&destination[0].duration, v420, *(v385 + 16));
                  v421 = MEMORY[0x1E6960C70];
                }

                CMTimeMake(__dst, *(v385 + 20), *(v385 + 16));
                destination[0].presentationTimeStamp = __dst[0];
                destination[0].decodeTimeStamp = *v421;
                v512 = OUTLINED_FUNCTION_12_77();
                v518 = CMSampleBufferCreate(v512, v513, v514, v515, v516, v517, 1, 1, destination, 1, &time, &blockBufferOut);
                if (v518)
                {
                  ISOUserDataReader = v518;
                  v519 = 0;
                }

                else
                {
                  v519 = CFDictionaryCreateMutable(v30, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
                  if (v519)
                  {
                    FigCFDictionarySetValue();
                    FigCFDictionarySetValue();
                    FigCFDictionarySetInt32();
                    SampleAttachmentsArray = CMSampleBufferGetSampleAttachmentsArray(blockBufferOut.value, 1u);
                    if (SampleAttachmentsArray)
                    {
                      CFArrayGetValueAtIndex(SampleAttachmentsArray, 0);
                      FigCFDictionarySetValue();
                    }

                    v521 = fragManifold_CallPushSampleCallback(a1, *(a1 + 280), 0, blockBufferOut.value);
                  }

                  else
                  {
                    OUTLINED_FUNCTION_0_221();
                    v521 = FigSignalErrorAtGM();
                  }

                  ISOUserDataReader = v521;
                }

                if (blockBufferOut.value)
                {
                  CFRelease(blockBufferOut.value);
                }

                if (v519)
                {
                  CFRelease(v519);
                }
              }
            }

            else
            {
              ISOUserDataReader = 0;
            }
          }
        }

LABEL_638:
        if (time1.value)
        {
          CFRelease(time1.value);
        }

        appended = time2.value;
        if (time2.value)
        {
          goto LABEL_745;
        }

LABEL_746:
        if (ISOUserDataReader)
        {
          return ISOUserDataReader;
        }

LABEL_747:
        v387 = 0;
        goto LABEL_748;
      }

      *&sbuf = 0;
      v393 = OUTLINED_FUNCTION_30_31(appended, *(a1 + 80), v32, v382, v33, &sbuf);
      if (v393)
      {
        goto LABEL_663;
      }

      MoovParseMovieLevelAtom();
      if (v393)
      {
        goto LABEL_663;
      }

      v394 = *(a1 + 116);
      if (v394 == v31)
      {
        OUTLINED_FUNCTION_496();
        v393 = CMBlockBufferAppendBufferReference(v396, v397, v398, v399, 0);
        if (!v393)
        {
          goto LABEL_466;
        }

LABEL_663:
        ISOUserDataReader = v393;
        goto LABEL_744;
      }

      if (v394 == 1718909296)
      {
        v395 = sbuf;
        if (sbuf)
        {
          v395 = CFRetain(sbuf);
        }

        *(a1 + 96) = v395;
      }

LABEL_466:
      v400 = *(a1 + 144);
      if (v400[81])
      {
        v401 = v400[82] == 0;
      }

      else
      {
        v401 = v400[84] != 0;
      }

      *(a1 + 153) = v401;
      ConsumeBufferedBytes(a1, *(a1 + 120));
      v402 = *(a1 + 116);
      if (v402 != v31)
      {
        goto LABEL_670;
      }

      *(a1 + 312) = 0;
      *(a1 + 152) = MovieInformationCouldContainFragments(*(a1 + 144));
      if (MovieInformationGetTrackCount(*(a1 + 144)) && (v403 = MovieInformationGetTrackCount(*(a1 + 144)), v404 = OUTLINED_FUNCTION_13_62(v403), (*(a1 + 160) = v404) != 0))
      {
        NthTrackOfType = MovieInformationFindNthTrackOfType(*(a1 + 144), 0, 1986618469);
        v406 = NthTrackOfType;
        if (NthTrackOfType && (v407 = MovieTrackCopyFormatDescriptionArray(NthTrackOfType)) != 0)
        {
          v408 = v407;
          ValueAtIndex = CFArrayGetValueAtIndex(v407, 0);
          if (ValueAtIndex)
          {
            v954 = CFRetain(ValueAtIndex);
          }

          else
          {
            v954 = 0;
          }

          CFRelease(v408);
        }

        else
        {
          v954 = 0;
        }

        if (MovieInformationGetTrackCount(*(a1 + 144)) >= 1)
        {
          v31 = 0;
          while (1)
          {
            time2.value = *(MEMORY[0x1E6960C70] + 12);
            time2.timescale = *(MEMORY[0x1E6960C70] + 20);
            v423 = *(a1 + 160);
            v424 = *(*(*(a1 + 144) + 320) + 8 * v31);
            if (v424)
            {
              v424 = CFRetain(v424);
            }

            v425 = v423 + (v31 << 8);
            *(v425 + 40) = v424;
            CMNotificationCenterGetDefaultLocalCenter();
            FigNotificationCenterAddWeakListener();
            MovieTrackGetBasicInfo(*(v425 + 40), (v425 + 48), v425);
            v426 = MovieTrackCopyFormatDescriptionArray(*(v425 + 40));
            if (v426)
            {
              v30 = v426;
              if (v406)
              {
                if (*(v425 + 48) == 1835365473)
                {
                  Count = CFArrayGetCount(v426);
                  if (_os_feature_enabled_impl())
                  {
                    v428 = *(a1 + 144);
                    v429 = *(v428 + 328);
                    if (v429 >= 1)
                    {
                      v430 = (*(v428 + 344) + 8);
                      while (*(v430 - 1) != *v425 || *(v430 - 2) != v1 || *v430 != *(v406 + 144))
                      {
                        v430 += 3;
                        if (!--v429)
                        {
                          goto LABEL_551;
                        }
                      }
                    }

                    if (Count >= 1)
                    {
                      if (!*(a1 + 296) && FigSampleAttachmentCollectionRulesCopyForManifold(allocator, v954, (a1 + 296)))
                      {
                        OUTLINED_FUNCTION_0_221();
                        v437 = FigSignalErrorAtGM();
                        if (v437)
                        {
LABEL_614:
                          ISOUserDataReader = v437;
                          goto LABEL_615;
                        }
                      }

                      else
                      {
                        for (i = 0; i != Count; ++i)
                        {
                          v431 = CFArrayGetValueAtIndex(v30, i);
                          v432 = *(a1 + 296);
                          v433 = *(*(CMBaseObjectGetVTable() + 16) + 8);
                          if (v433 && v433(v432, v431))
                          {
                            *(v425 + 176) = 1;
                            ++*(a1 + 312);
                          }
                        }
                      }
                    }
                  }
                }
              }

LABEL_551:
              if (CFArrayGetCount(v30) == 1)
              {
                CFArrayGetValueAtIndex(v30, 0);
                v434 = OUTLINED_FUNCTION_177();
                v437 = fragManifold_SetTrackLatestFormatDescription(v434, v435, v436);
                if (v437)
                {
                  goto LABEL_614;
                }
              }

              else
              {
                *(v425 + 80) = 1;
              }

              CFRelease(v30);
            }

            v438 = OUTLINED_FUNCTION_177();
            v440 = fragManifold_CallNewTrackCallback(v438, v439);
            if (v440)
            {
              ISOUserDataReader = v440;
              v30 = 0;
LABEL_615:
              OUTLINED_FUNCTION_11_77();
              if (v30)
              {
                CFRelease(v30);
              }

              v30 = allocator;
              goto LABEL_656;
            }

            v441 = MEMORY[0x1E6960CC0];
            *(v425 + 96) = *MEMORY[0x1E6960CC0];
            *(v425 + 112) = *(v441 + 16);
            v442 = MEMORY[0x1E6960C70];
            *(v425 + 120) = *MEMORY[0x1E6960C70];
            *(v425 + 136) = *(v442 + 16);
            v443 = *(v425 + 40);
            v444 = *(a1 + 65);
            if (MovieTrackHasEditList(v443) && MovieTrackGetEditSegmentCount(v443) == 1)
            {
              memcpy(__dst, MEMORY[0x1E6960C78], sizeof(__dst));
              if (!MovieTrackGetEditSegmentWithIndex(v443, 0, __dst) && (__dst[0].flags & 1) != 0 && (__dst[1].flags & 1) != 0 && !__dst[1].epoch && (__dst[1].value & 0x8000000000000000) == 0 && (__dst[2].flags & 1) != 0 && (__dst[3].flags & 1) != 0 && !__dst[3].epoch && (__dst[3].value & 0x8000000000000000) == 0)
              {
                destination[0].duration = __dst[1];
                blockBufferOut = __dst[3];
                v448 = CMTimeCompare(&destination[0].duration, &blockBufferOut);
                if (!v448)
                {
                  break;
                }
              }
            }

LABEL_561:
            if (*(v425 + 64) && (!*(a1 + 64) || !*(v425 + 81)))
            {
              v445 = OUTLINED_FUNCTION_177();
              v447 = fragManifold_CallFormatDescriptionCallback(v445, v446);
              if (v447)
              {
                ISOUserDataReader = v447;
                v30 = 0;
                OUTLINED_FUNCTION_16_59();
                goto LABEL_615;
              }
            }

            ++v31;
            v30 = allocator;
            v1 = 1919837298;
            if (v31 >= MovieInformationGetTrackCount(*(a1 + 144)))
            {
              goto LABEL_618;
            }
          }

          blockBufferOut = __dst[2];
          OUTLINED_FUNCTION_7_35(v448, v449, v450, v451, v452, v453, v454, v455, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, *&__dst[0].value);
          v456 = CMTimeSubtract(&destination[0].duration, &blockBufferOut, &time);
          OUTLINED_FUNCTION_4_162(v456, v457, v458, v459, v460, v461, v462, v463, v574, v588, sampleSizeArrayk, sampleBufferOutj, v628, v640, v653, v666, v679, v692, v705, v718, v731, v744, v757, v770, valuej, v796, v809, keyj, v835, v848, v861, v874, v887, v899, v912, v925, v938, v951, v964, v977, v990, allocatorj, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
          if (!v444 || (OUTLINED_FUNCTION_63(), !v37))
          {
LABEL_611:
            time2.value = time1.value;
            v505 = time1.value;
            time2.timescale = time1.timescale;
            timescale = time1.timescale;
            *(v425 + 96) = v1;
            *(v425 + 104) = v30;
            *(v425 + 108) = v505;
            *(v425 + 116) = timescale;
            OUTLINED_FUNCTION_63();
            if (v37)
            {
              __dst[0].value = v1;
              __dst[0].timescale = v30;
              *&__dst[0].flags = time2.value;
              HIDWORD(__dst[0].epoch) = time2.timescale;
              CMTimeMultiply(&destination[0].duration, __dst, -1);
              v507 = *&destination[0].duration.value;
              *(v425 + 136) = destination[0].duration.epoch;
              *(v425 + 120) = v507;
            }

            goto LABEL_561;
          }

          v464 = MovieTrackCopyFormatDescriptionArray(v443);
          FirstValue = FigCFArrayGetFirstValue();
          if (!FirstValue || (time.value = 0, (FormatList = CMAudioFormatDescriptionGetFormatList(FirstValue, &time)) == 0) || !time.value || ((v467 = FormatList->mASBD.mFormatID & 0xEFFFFFFF, v467 != 1633772400) ? (v468 = v467 == 1633772392) : (v468 = 1), !v468))
          {
LABEL_609:
            if (v464)
            {
              CFRelease(v464);
            }

            goto LABEL_611;
          }

          if (v1 == -2112 && v30 == 48000)
          {
            v488 = CMTimeMake(&destination[0].duration, -2112, 24000);
            OUTLINED_FUNCTION_4_162(v488, v489, v490, v491, v492, v493, v494, v495, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
            LODWORD(theBuffer) = 0;
            LOBYTE(cf) = 0;
            os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
            if (OUTLINED_FUNCTION_39_26(os_log_and_send_and_compose_flags_and_os_log_type, v497, v498, v499, v500, v501, v502, v503, v576, v590, sampleSizeArraym, sampleBufferOutl, v630, v642, v655, v668, v681, v694, v707, v720, v733, v746, v759, v772, valuel, v798, v811, keyl, v837, v850, v863, v876, v889, v901, v914, v927, v940, v953, v966, v979, v992, allocatorl, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, SHIDWORD(cf), theBuffer))
            {
              v504 = i;
            }

            else
            {
              v504 = i & 0xFFFFFFFE;
            }

            if (!v504)
            {
              goto LABEL_608;
            }
          }

          else
          {
            if (v1 != -2112 || v30 != 44100)
            {
              goto LABEL_609;
            }

            v471 = CMTimeMake(&destination[0].duration, -2112, 22050);
            OUTLINED_FUNCTION_4_162(v471, v472, v473, v474, v475, v476, v477, v478, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
            LODWORD(theBuffer) = 0;
            LOBYTE(cf) = 0;
            v479 = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
            if (OUTLINED_FUNCTION_39_26(v479, v480, v481, v482, v483, v484, v485, v486, v575, v589, sampleSizeArrayl, sampleBufferOutk, v629, v641, v654, v667, v680, v693, v706, v719, v732, v745, v758, v771, valuek, v797, v810, keyk, v836, v849, v862, v875, v888, v900, v913, v926, v939, v952, v965, v978, v991, allocatork, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, SHIDWORD(cf), theBuffer))
            {
              v487 = i;
            }

            else
            {
              v487 = i & 0xFFFFFFFE;
            }

            if (!v487)
            {
LABEL_608:
              fig_log_call_emit_and_clean_up_after_send_and_compose();
              goto LABEL_609;
            }
          }

          LODWORD(blockBufferOut.value) = v618[0];
          OUTLINED_FUNCTION_18_51(&blockBufferOut);
          _os_log_send_and_compose_impl();
          LODWORD(i) = theBuffer;
          goto LABEL_608;
        }

LABEL_618:
        if (v406)
        {
          v508 = *(a1 + 296);
          if (*(a1 + 312) < 1)
          {
            if (v508)
            {
              CFRelease(*(a1 + 296));
              *(a1 + 296) = 0;
            }
          }

          else if (FigSampleAttachmentCollectorCreateSynchronous(v30, v508, 0, (a1 + 304)))
          {
            OUTLINED_FUNCTION_0_221();
            v509 = FigSignalErrorAtGM();
            if (v509)
            {
              ISOUserDataReader = v509;
              v510 = *(a1 + 296);
              if (v510)
              {
                CFRelease(v510);
                *(a1 + 296) = 0;
              }

              v511 = *(a1 + 304);
              if (v511)
              {
                CFRelease(v511);
                *(a1 + 304) = 0;
              }

              OUTLINED_FUNCTION_11_77();
              v30 = allocator;
              OUTLINED_FUNCTION_16_59();
              goto LABEL_656;
            }
          }
        }

        OUTLINED_FUNCTION_11_77();
        if (v522)
        {
          v523 = *(a1 + 32);
          *(a1 + 32) = 0;
          if (v523 >= 1)
          {
            v31 = v523;
            do
            {
              FigSimpleMutexUnlock();
              --v31;
            }

            while (v31);
            OUTLINED_FUNCTION_11_77();
          }

          v522(*(a1 + 8), *(a1 + 48));
          do
          {
            FigSimpleMutexLock();
            OUTLINED_FUNCTION_25_40();
          }

          while (v524 < v523);
          if (*a1)
          {
            ISOUserDataReader = 4294951251;
          }

          else if (*(a1 + 2))
          {
            ISOUserDataReader = 4294951251;
          }

          else
          {
            ISOUserDataReader = 0;
          }
        }

        else
        {
          ISOUserDataReader = 0;
        }

LABEL_656:
        if (v954)
        {
          CFRelease(v954);
        }

        if (ISOUserDataReader)
        {
LABEL_659:
          fragManifold_DisposeTracks(a1);
          goto LABEL_744;
        }
      }

      else
      {
        OUTLINED_FUNCTION_0_221();
        ISOUserDataReader = FigSignalErrorAtGM();
        if (ISOUserDataReader)
        {
          goto LABEL_659;
        }
      }

      v402 = *(a1 + 116);
LABEL_670:
      if ((v402 | 0x10) != v31)
      {
        ISOUserDataReader = 0;
        goto LABEL_744;
      }

      time.value = 0;
      LODWORD(time2.value) = 1819632756;
      LODWORD(i) = MovieInformationGetLastMovieFragmentInformation(*(a1 + 144), 0);
      if (MovieInformationGetTrackCount(*(a1 + 144)) < 1)
      {
        v525 = 0;
        ISOUserDataReader = 0;
        goto LABEL_735;
      }

      v31 = 0;
      v525 = 0;
      v1 = 0;
      LODWORD(v877) = i;
      while (1)
      {
        v526 = *(a1 + 160);
        OUTLINED_FUNCTION_63();
        if (!v37)
        {
          goto LABEL_725;
        }

        if (*(a1 + 153))
        {
          if (i)
          {
            v527 = v525;
            v528 = *(v526 + v31 + 144);
            if (!v528 || CFArrayGetCount(v528) < 1)
            {
              v532 = kFigISOUserDataKeyspace;
LABEL_689:
              v525 = v527;
              goto LABEL_693;
            }

            v529 = CFGetAllocator(*(a1 + 144));
            ISOUserDataReader = FigMetadataReaderCreateForISOUserDataArray(v529, *(v526 + v31 + 144), &time);
          }

          else
          {
            v533 = OUTLINED_FUNCTION_34_31();
            ISOUserDataReader = MovieTrackCreateISOUserDataReader(v533, v534, v535);
          }

          if (ISOUserDataReader)
          {
            goto LABEL_732;
          }

          v532 = kFigISOUserDataKeyspace;
        }

        else
        {
          if (i)
          {
            v527 = v525;
            v530 = *(v526 + v31 + 144);
            if (!v530 || CFArrayGetCount(v530) < 1)
            {
              v532 = kFigUserDataKeyspace;
              goto LABEL_689;
            }

            v531 = CFGetAllocator(*(a1 + 144));
            ISOUserDataReader = FigMetadataReaderCreateForQuickTimeUserDataArray(v531, *(v526 + v31 + 144), &time);
          }

          else
          {
            v536 = OUTLINED_FUNCTION_34_31();
            ISOUserDataReader = MovieTrackCreateQuickTimeUserDataReader(v536, v537, v538);
          }

          if (ISOUserDataReader)
          {
            goto LABEL_732;
          }

          v532 = kFigUserDataKeyspace;
        }

LABEL_693:
        v539 = time.value;
        if (time.value)
        {
          v540 = *v532;
          if (v525)
          {
            OUTLINED_FUNCTION_20_43();
            LODWORD(time1.value) = 8;
            blockBufferOut.value = 0;
            goto LABEL_697;
          }

          v525 = CFNumberCreate(allocator, kCFNumberSInt32Type, &time2);
          v539 = time.value;
          OUTLINED_FUNCTION_20_43();
          LODWORD(time1.value) = 8;
          blockBufferOut.value = 0;
          if (v539)
          {
LABEL_697:
            v541 = *(*(CMBaseObjectGetVTable() + 16) + 40);
            if (v541)
            {
              i = v525;
              v542 = v541(v539, v540, v525);
              v954 = (v542 - 1);
              if (v542 < 1 || (LastMovieFragmentInformation = MovieInformationGetLastMovieFragmentInformation(*(a1 + 144), 0), v544 = CFGetAllocator(*(a1 + 144)), (v545 = *(*(CMBaseObjectGetVTable() + 16) + 48)) == 0) || v545(v539, v540, i, v954, v544, destination, 0))
              {
                v30 = allocator;
                v525 = i;
                LODWORD(i) = v877;
                goto LABEL_719;
              }

              v30 = allocator;
              v525 = i;
              if (destination[0].duration.value)
              {
                v546 = LastMovieFragmentInformation;
                v547 = i;
                v548 = CFGetTypeID(destination[0].duration.value);
                if (v548 == CFDataGetTypeID())
                {
                  v549 = v526 + v31;
                  LODWORD(i) = v877;
                  if ((!*(v526 + v31 + 152) || v546) && !AudioFormatGetProperty(0x6C646C62u, 8u, destination, &time1, __dst) && !FigCFEqual())
                  {
                    CFGetAllocator(*(a1 + 144));
                    OUTLINED_FUNCTION_197();
                    if (!CMSampleBufferCreate(v550, v551, v552, v553, v554, 0, 0, 0, 0, 0, 0, &blockBufferOut))
                    {
                      CMSetAttachment(blockBufferOut.value, v825, __dst[0].value, 0);
                      if (!fragManifold_CallPushSampleCallback(a1, (v526 + v31), 0, blockBufferOut.value))
                      {
                        v555 = *(v549 + 152);
                        v556 = __dst[0].value;
                        *(v549 + 152) = __dst[0].value;
                        if (v556)
                        {
                          CFRetain(v556);
                        }

                        if (v555)
                        {
                          CFRelease(v555);
                        }

                        v525 = v547;
                        v557 = 1836019574;
                        if (v546)
                        {
                          v557 = 1836019558;
                        }

                        *(v526 + v31 + 160) = v557;
LABEL_719:
                        if (destination[0].duration.value)
                        {
                          CFRelease(destination[0].duration.value);
                        }

LABEL_721:
                        if (__dst[0].value)
                        {
                          CFRelease(__dst[0].value);
                        }

                        if (blockBufferOut.value)
                        {
                          CFRelease(blockBufferOut.value);
                        }

LABEL_725:
                        if (time.value)
                        {
                          CFRelease(time.value);
                          time.value = 0;
                        }

                        goto LABEL_727;
                      }
                    }
                  }
                }

                else
                {
                  LODWORD(i) = v877;
                }

                v525 = v547;
                goto LABEL_719;
              }

              LODWORD(i) = v877;
              goto LABEL_721;
            }
          }

          else
          {
            OUTLINED_FUNCTION_0_221();
            FigSignalErrorAtGM();
          }

          v30 = allocator;
          goto LABEL_719;
        }

LABEL_727:
        ++v1;
        v31 += 256;
        if (v1 >= MovieInformationGetTrackCount(*(a1 + 144)))
        {
          ISOUserDataReader = 0;
LABEL_732:
          OUTLINED_FUNCTION_16_59();
LABEL_735:
          if (MovieInformationGetTrackCount(*(a1 + 144)) >= 1)
          {
            v558 = 0;
            v31 = 144;
            do
            {
              v559 = *(a1 + 160);
              v560 = *(v559 + v31);
              if (v560)
              {
                CFRelease(v560);
                *(v559 + v31) = 0;
              }

              ++v558;
              v31 += 256;
            }

            while (v558 < MovieInformationGetTrackCount(*(a1 + 144)));
          }

          if (time.value)
          {
            CFRelease(time.value);
          }

          OUTLINED_FUNCTION_11_77();
          if (v525)
          {
            CFRelease(v525);
          }

LABEL_744:
          appended = sbuf;
          if (!sbuf)
          {
            goto LABEL_746;
          }

LABEL_745:
          CFRelease(appended);
          goto LABEL_746;
        }
      }

    case 2:
      v39 = *(a1 + 168);
      if (!v39)
      {
        OUTLINED_FUNCTION_0_221();
        appended = FigSignalErrorAtGM();
        if (appended)
        {
          return appended;
        }

        goto LABEL_505;
      }

      v40 = 0;
      LODWORD(v954) = 0;
      v31 = 0;
      break;
    case 3:
      if (*(a1 + 128) >= *(a1 + 88))
      {
        v378 = *(a1 + 88);
      }

      else
      {
        v378 = *(a1 + 128);
      }

      v379 = OUTLINED_FUNCTION_177();
      appended = ConsumeBufferedBytes(v379, v380);
      v381 = *(a1 + 128) - v378;
      *(a1 + 128) = v381;
      if (v381)
      {
        return 0;
      }

      goto LABEL_747;
    default:
      goto LABEL_505;
  }

  while (1)
  {
    v41 = *(a1 + 176);
    if (!v41)
    {
      cf = 0;
      theBuffer = 0;
      if (!*(v39 + 168))
      {
        goto LABEL_421;
      }

      OUTLINED_FUNCTION_24_38();
      if (v37)
      {
        v47 = *MEMORY[0x1E6960CC0];
        *&__dst[0].value = *MEMORY[0x1E6960CC0];
        v48 = *(MEMORY[0x1E6960CC0] + 16);
        __dst[0].epoch = v48;
        v1011 = 0;
        memset(&blockBufferOut, 0, sizeof(blockBufferOut));
        if (*(a1 + 288))
        {
          *&time.value = v47;
        }

        else
        {
          *&time.value = *(v39 + 96);
          v48 = *(v39 + 112);
        }

        time.epoch = v48;
        v68 = memcpy(destination, v46, sizeof(destination));
        if (*(a1 + 216) < *(v39 + 200))
        {
          free(*(a1 + 224));
          free(*(a1 + 232));
          v76 = *(v39 + 200) + 16;
          *(a1 + 216) = v76;
          v77 = OUTLINED_FUNCTION_32_12(72 * v76);
          v68 = OUTLINED_FUNCTION_21_42(v77);
          *(a1 + 232) = v68;
        }

        if (*(v39 + 209))
        {
          v78 = *(a1 + 224);
          v79 = OUTLINED_FUNCTION_33_33(v68, v69, v70, v71, v72, v73, v74, v75, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
          DTS = MovieSampleAccessorGetDTS(v79, v80);
          v89 = OUTLINED_FUNCTION_2_201(DTS, v82, v83, v84, v85, v86, v87, v88, v564, v579, sampleSizeArrayc, sampleBufferOutc, v620, v632, v645, v658, v671, v684, v697, v710, v723, v736, v749, v762, valuec, v788, v801, keyc, v827, v840, v853, v866, v879, v891, v904, v917, v930, v943, v956, v969, v982, allocatorc, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, sbuf, v1008, v1009, v1010, v1011, cf, theBuffer, *&time.value, time.epoch, v1015);
          v78[2] = time1;
          v90 = *(a1 + 224);
          v98 = OUTLINED_FUNCTION_33_33(v89, v91, v92, v93, v94, v95, v96, v97, v565, v580, sampleSizeArrayd, sampleBufferOutd, v621, v633, v646, v659, v672, v685, v698, v711, v724, v737, v750, v763, valued, v789, v802, keyd, v828, v841, v854, v867, v880, v892, v905, v918, v931, v944, v957, v970, v983, allocatord, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
          PTS = MovieSampleAccessorGetPTS(v98, v99);
          OUTLINED_FUNCTION_2_201(PTS, v101, v102, v103, v104, v105, v106, v107, v566, v581, sampleSizeArraye, sampleBufferOute, v622, v634, v647, v660, v673, v686, v699, v712, v725, v738, v751, v764, valuee, v790, v803, keye, v829, v842, v855, v868, v881, v893, v906, v919, v932, v945, v958, v971, v984, allocatore, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, sbuf, v1008, v1009, v1010, v1011, cf, theBuffer, *&time.value, time.epoch, v1015);
          v90[1] = time1;
          v108 = *(a1 + 224);
          blockBufferOut = *(v39 + 212);
          epoch = blockBufferOut.epoch;
          *v108 = *&blockBufferOut.value;
          *(v108 + 16) = epoch;
          v110 = 1;
        }

        else
        {
          v110 = 0;
        }

        *(a1 + 200) = v110;
        if (*(v39 + 208))
        {
          v1011 = *(v39 + 240);
          **(a1 + 232) = v1011;
          v111 = 1;
        }

        else
        {
          v111 = 0;
        }

        *(a1 + 208) = v111;
        OUTLINED_FUNCTION_496();
        MovieSampleAccessorGetSampleLocation(v112, v113, v114, v115, v116, v117, v118, v119, v562, v577, SHIDWORD(v577), sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708);
        if (appended)
        {
          goto LABEL_660;
        }

        v126 = *(v39 + 248);
        if (v126 < *(v39 + 200))
        {
          v67 = 0;
          i = 0;
          while (1)
          {
            OUTLINED_FUNCTION_32_30(appended, v120, v32, v121, v33, v122, v123, v124, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, v125, __dst[0].value);
            *&time2.value = fragManifold_ComputeSampleDetails_kMinAudioTime;
            time2.epoch = 0;
            appended = CMTimeCompare(&time1, &time2);
            if ((appended & 0x80000000) == 0)
            {
              goto LABEL_54;
            }

            if (!*(v39 + 209))
            {
              v1 = 72;
              v133 = *(a1 + 224) + 72 * *(a1 + 200);
              v134 = OUTLINED_FUNCTION_33_33(appended, v127, v32, v128, v33, v129, v130, v131, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
              v136 = MovieSampleAccessorGetDTS(v134, v135);
              v144 = OUTLINED_FUNCTION_2_201(v136, v137, v138, v139, v140, v141, v142, v143, v567, v582, sampleSizeArrayf, sampleBufferOutf, v623, v635, v648, v661, v674, v687, v700, v713, v726, v739, v752, v765, valuef, v791, v804, keyf, v830, v843, v856, v869, v882, v894, v907, v920, v933, v946, v959, v972, v985, allocatorf, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, sbuf, v1008, v1009, v1010, v1011, cf, theBuffer, *&time.value, time.epoch, v1015);
              v145 = *&time1.value;
              *(v133 + 64) = time1.epoch;
              *(v133 + 48) = v145;
              v146 = *(a1 + 224) + 72 * *(a1 + 200);
              v154 = OUTLINED_FUNCTION_33_33(v144, v147, v148, v149, v150, v151, v152, v153, v568, v583, sampleSizeArrayg, sampleBufferOutg, v624, v636, v649, v662, v675, v688, v701, v714, v727, v740, v753, v766, valueg, v792, v805, keyg, v831, v844, v857, v870, v883, v895, v908, v921, v934, v947, v960, v973, v986, allocatorg, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
              v156 = MovieSampleAccessorGetPTS(v154, v155);
              OUTLINED_FUNCTION_2_201(v156, v157, v158, v159, v160, v161, v162, v163, v569, v584, sampleSizeArrayh, sampleBufferOuth, v625, v637, v650, v663, v676, v689, v702, v715, v728, v741, v754, v767, valueh, v793, v806, keyh, v832, v845, v858, v871, v884, v896, v909, v922, v935, v948, v961, v974, v987, allocatorh, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, sbuf, v1008, v1009, v1010, v1011, cf, theBuffer, *&time.value, time.epoch, v1015);
              v164 = *&time1.value;
              *(v146 + 40) = time1.epoch;
              *(v146 + 24) = v164;
              SampleDuration = MovieSampleAccessorGetSampleDuration(destination, &blockBufferOut);
              if (SampleDuration)
              {
                ISOUserDataReader = SampleDuration;
                OUTLINED_FUNCTION_16_59();
                goto LABEL_661;
              }

              v166 = *(a1 + 224) + 72 * *(a1 + 200);
              v167 = *&blockBufferOut.value;
              *(v166 + 16) = blockBufferOut.epoch;
              *v166 = v167;
              ++*(a1 + 200);
              OUTLINED_FUNCTION_16_59();
            }

            if (!*(v39 + 208))
            {
              MovieSampleAccessorGetSampleLocation(destination, 0, &v1011, 0, v33, v129, v130, v131, v562, v577, SHIDWORD(v577), sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708);
              if (appended)
              {
                goto LABEL_660;
              }

              *(*(a1 + 232) + 8 * (*(a1 + 208))++) = v1011;
            }

            OUTLINED_FUNCTION_32_30(appended, v127, v32, v128, v33, v129, v130, v131, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, v132, __dst[0].value);
            time2 = blockBufferOut;
            CMTimeAdd(__dst, &time1, &time2);
            v67 = (v67 + v1011);
            theBuffer = v67;
            ++i;
            appended = MovieSampleAccessorStepCursor(destination, 1, 0);
            if (v126 + i >= *(v39 + 200))
            {
              goto LABEL_54;
            }
          }
        }

        v67 = 0;
        i = 0;
LABEL_54:
        *(a1 + 192) = i;
      }

      else
      {
        MovieSampleAccessorGetSampleLocation(v46, &cf, &theBuffer, 0, v42, v43, v44, v45, v562, v577, SHIDWORD(v577), sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708);
        if (appended)
        {
          goto LABEL_660;
        }

        *(a1 + 192) = vdupq_n_s64(1uLL);
        *(a1 + 208) = 1;
        **(a1 + 232) = theBuffer;
        v49 = *(a1 + 224);
        v50 = MovieSampleAccessorGetDTS(*(v39 + 168), __dst);
        OUTLINED_FUNCTION_22_42(v50, v51, v52, v53, v54, v55, v56, v57, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
        *(v49 + 48) = *&destination[0].duration.value;
        *(v49 + 64) = destination[0].duration.epoch;
        v58 = *(a1 + 224);
        v59 = MovieSampleAccessorGetPTS(*(v39 + 168), __dst);
        OUTLINED_FUNCTION_22_42(v59, v60, v61, v62, v63, v64, v65, v66, v563, v578, sampleSizeArrayb, sampleBufferOutb, v619, v631, v644, v657, v670, v683, v696, v709, v722, v735, v748, v761, valueb, v787, v800, keyb, v826, v839, v852, v865, v878, v890, v903, v916, v929, v942, v955, v968, v981, allocatorb, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
        *(v58 + 24) = *&destination[0].duration.value;
        *(v58 + 40) = destination[0].duration.epoch;
        appended = MovieSampleAccessorGetSampleDuration(*(v39 + 168), *(a1 + 224));
        if (appended)
        {
          goto LABEL_660;
        }

        v67 = theBuffer;
      }

      if (v67)
      {
        v168 = *(a1 + 72);
        v169 = (cf - v168);
        if (cf == v168 || cf > v168)
        {
          ISOUserDataReader = 0;
        }

        else
        {
          OUTLINED_FUNCTION_0_221();
          appended = FigSignalErrorAtGM();
          ISOUserDataReader = appended;
          v169 = 0;
          v67 = theBuffer;
        }

        *(a1 + 176) = v67;
        *(a1 + 184) = v169;
        if (ISOUserDataReader)
        {
          goto LABEL_661;
        }
      }

      else
      {
LABEL_421:
        OUTLINED_FUNCTION_0_221();
        appended = FigSignalErrorAtGM();
        ISOUserDataReader = appended;
        if (appended)
        {
          goto LABEL_661;
        }
      }

      v41 = *(a1 + 176);
    }

    if (*(a1 + 88) < (*(a1 + 184) + v41))
    {
      goto LABEL_444;
    }

    v171 = *(a1 + 168);
    if (*(v171 + 80))
    {
      destination[0].duration.value = 0;
      appended = MovieSampleAccessorGetFormatDescription(*(v171 + 168), destination);
      if (appended)
      {
        goto LABEL_660;
      }

      appended = FigCFEqual();
      if (!appended)
      {
        appended = fragManifold_SetTrackLatestFormatDescription(a1, *(a1 + 168), destination[0].duration.value);
        if (appended)
        {
          goto LABEL_660;
        }

        v205 = *(a1 + 168);
        v39 = *(v205 + 72);
        v206 = destination[0].duration.value;
        *(v205 + 72) = destination[0].duration.value;
        if (v206)
        {
          CFRetain(v206);
        }

        if (v39)
        {
          CFRelease(v39);
        }

        appended = fragManifold_CallFormatDescriptionCallback(a1, *(a1 + 168));
        if (appended)
        {
          goto LABEL_660;
        }
      }

      v171 = *(a1 + 168);
    }

    v172 = *(v171 + 176);
    if (!(v172 | (*(v171 + 16) != 0)))
    {
      goto LABEL_253;
    }

    time2.value = 0;
    *&sbuf = 0;
    cf = 0;
    theBuffer = 0;
    v1010 = 0;
    v1011 = 0;
    if (*(a1 + 264))
    {
      break;
    }

LABEL_154:
    if (!time2.value)
    {
      appended = OUTLINED_FUNCTION_30_31(appended, *(a1 + 80), v32, *(a1 + 176), v33, &time2);
      if (appended)
      {
        goto LABEL_411;
      }
    }

    if (*(v171 + 81))
    {
      appended = FigVideoCreateBlockBufferAndFormatDescriptionForHoistingInStreamParameterSets();
      if (appended)
      {
        goto LABEL_411;
      }

      if (cf)
      {
        v39 = time2.value;
        time2.value = cf;
        CFRetain(cf);
        if (v39)
        {
          CFRelease(v39);
        }
      }

      if (v1010)
      {
        appended = fragManifold_SetTrackLatestFormatDescription(a1, *(a1 + 168), v1010);
        if (appended)
        {
          goto LABEL_411;
        }

        appended = fragManifold_CallFormatDescriptionCallback(a1, *(a1 + 168));
        if (appended)
        {
          goto LABEL_411;
        }
      }
    }

    if (*(*(a1 + 168) + 84) && !CMBlockBufferIsRangeContiguous(time2.value, 0, 0))
    {
      OUTLINED_FUNCTION_6_126();
      appended = FigMemoryPoolCreateContiguousBlockBuffer();
      if (appended)
      {
        goto LABEL_411;
      }

      v39 = time2.value;
      time2.value = v1011;
      if (v1011)
      {
        CFRetain(v1011);
      }

      if (v39)
      {
        CFRelease(v39);
      }
    }

    sampleSizeArrayi = *(a1 + 232);
    v570 = *(a1 + 224);
    v585 = *(a1 + 208);
    v227 = OUTLINED_FUNCTION_12_77();
    appended = CMSampleBufferCreate(v227, v228, v229, v230, v231, v232, v233, v234, v570, v585, sampleSizeArrayi, &sbuf);
    if (appended)
    {
LABEL_411:
      ISOUserDataReader = appended;
      goto LABEL_108;
    }

    OUTLINED_FUNCTION_28_36();
    if (!v37)
    {
      LODWORD(v954) = 0;
      goto LABEL_179;
    }

    v40 = *(v235 + 168);
    v39 = sbuf;
    LOBYTE(__dst[0].value) = 0;
    LOBYTE(blockBufferOut.value) = 0;
    LOBYTE(time.value) = 0;
    OUTLINED_FUNCTION_197();
    appended = MovieSampleAccessorGetDependencyInfo(v236, v237, v238, v239, v240, 0, v241);
    if (appended)
    {
      goto LABEL_411;
    }

    v242 = CMSampleBufferGetSampleAttachmentsArray(v39, 1u);
    if (!v242)
    {
      goto LABEL_178;
    }

    v243 = CFArrayGetValueAtIndex(v242, 0);
    if (!v243)
    {
      goto LABEL_178;
    }

    v39 = v243;
    destination[0].duration.value = 0;
    ISOUserDataReader = MovieSampleAccessorCreateSampleDependencyAttributeDictionary(v30, v40, destination);
    if (!ISOUserDataReader && destination[0].duration.value)
    {
      OUTLINED_FUNCTION_9_86();
      CFDictionaryApplyFunction(v244, v245, v39);
      CFRelease(destination[0].duration.value);
LABEL_178:
      LODWORD(v954) = LOBYTE(__dst[0].value);
LABEL_179:
      OUTLINED_FUNCTION_24_38();
      if (!v37)
      {
        goto LABEL_203;
      }

      if (!*(a1 + 288))
      {
        v39 = sbuf;
        *&destination[0].duration.value = *MEMORY[0x1E6960C70];
        destination[0].duration.epoch = *(MEMORY[0x1E6960C70] + 16);
        __dst[0] = destination[0].duration;
        blockBufferOut = destination[0].duration;
        if ((v246[5].flags & 0x1D) == 1)
        {
          time = v246[5];
          v877 = *MEMORY[0x1E6960CC0];
          *&time1.value = *MEMORY[0x1E6960CC0];
          v40 = *(MEMORY[0x1E6960CC0] + 16);
          time1.epoch = v40;
          if (CMTimeCompare(&time, &time1) >= 1 && CMSampleBufferGetNumSamples(v39) >= 1)
          {
            DecodeTimeStamp = CMSampleBufferGetDecodeTimeStamp(&destination[0].duration, v39);
            OUTLINED_FUNCTION_35_27(DecodeTimeStamp, v248, v249, v250, v251, v252, v253, v254, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
            *&time1.value = v877;
            time1.epoch = v40;
            v255 = CMTimeCompare(&time, &time1);
            if ((v255 & 0x80000000) != 0)
            {
              OUTLINED_FUNCTION_35_27(v255, v256, v257, v258, v259, v260, v261, v262, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
              CMTimeMultiply(__dst, &time, -1);
              Duration = CMSampleBufferGetDuration(&blockBufferOut, v39);
              OUTLINED_FUNCTION_7_35(Duration, v264, v265, v266, v267, v268, v269, v270, v571, v586, sampleSizeArrayj, sampleBufferOuti, v626, v638, v651, v664, v677, v690, v703, v716, v729, v742, v755, v768, valuei, v794, v807, keyi, v833, v846, v859, v872, v885, v897, v910, v923, v936, v949, v962, v975, v988, allocatori, *&__dst[0].value);
              time1 = blockBufferOut;
              if (CMTimeCompare(&time, &time1) >= 1)
              {
                __dst[0] = blockBufferOut;
              }

              v271 = CFGetAllocator(v39);
              OUTLINED_FUNCTION_7_35(v271, v271, v272, v273, v274, v275, v276, v277, v572, v587, sampleSizeArraya, sampleBufferOuta, v627, v639, v652, v665, v678, v691, v704, v717, v730, v743, v756, v769, valuea, v795, v808, keya, v834, v847, v860, v873, v886, v898, v911, v924, v937, v950, v963, v976, v989, allocatora, *&__dst[0].value);
              v279 = CMTimeCopyAsDictionary(&time, v278);
              if (v279)
              {
                v40 = v279;
                CMSetAttachment(v39, key, v279, 1u);
                CFRelease(v40);
              }

              else
              {
                OUTLINED_FUNCTION_0_221();
                v377 = FigSignalErrorAtGM();
                if (v377)
                {
                  ISOUserDataReader = v377;
                  goto LABEL_239;
                }
              }
            }
          }
        }
      }

      v280 = FigAudioFormatDescriptionEmploysDependentPackets();
      if (!v280)
      {
        FormatDescription = CMSampleBufferGetFormatDescription(sbuf);
        GradualDecoderRefresh = FigGaplessInfoCreateGradualDecoderRefresh(FormatDescription);
        if (GradualDecoderRefresh)
        {
          v39 = GradualDecoderRefresh;
          CMSetAttachment(sbuf, v786, GradualDecoderRefresh, 1u);
          CFRelease(v39);
        }

        goto LABEL_203;
      }

      ISOUserDataReader = OUTLINED_FUNCTION_26_39(v280, v281, v282, v283, v284, v285, v286, v287, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
      v288 = destination[0].duration.value;
      if (!ISOUserDataReader)
      {
        memcpy((destination[0].duration.value + 80), (v40 + 80), 0x88uLL);
        v289 = CMSampleBufferGetSampleAttachmentsArray(v39, 1u);
        if (!v289 || (v39 = v289, v290 = CFArrayGetCount(v289), v290 < 1))
        {
LABEL_200:
          MovieSampleAccessorDispose(destination[0].duration.value);
          goto LABEL_203;
        }

        v40 = v290;
        v291 = 0;
        while (1)
        {
          v292 = CFArrayGetValueAtIndex(v39, v291);
          if (v292)
          {
            i = v292;
            __dst[0].value = 0;
            if (MovieSampleAccessorCreateSampleDependencyAttributeDictionary(v30, destination[0].duration.value, __dst) || FigCFDictionaryGetCount() < 1)
            {
              OUTLINED_FUNCTION_0_221();
              ISOUserDataReader = FigSignalErrorAtGM();
              MovieSampleAccessorDispose(destination[0].duration.value);
              if (ISOUserDataReader)
              {
                goto LABEL_239;
              }

LABEL_203:
              v297 = *(a1 + 168);
              if (*(a1 + 152))
              {
                i = sbuf;
                OUTLINED_FUNCTION_20_43();
                NumSamples = CMSampleBufferGetNumSamples(i);
                if (NumSamples)
                {
                  v39 = NumSamples;
                  v40 = MovieSampleAccessorCopyCryptorIVArray(*(v297 + 168), NumSamples, destination);
                  v299 = MovieSampleAccessorCopyCryptorSubsampleAuxDataArray(*(v297 + 168), v39, __dst);
                  if (v40 | v299)
                  {
                    v300 = v299;
                    v301 = CMSampleBufferGetSampleAttachmentsArray(i, 1u);
                    if (v301)
                    {
                      v302 = v301;
                      v303 = CFArrayGetCount(v301);
                      if (v39 >= 1 && v39 == v303)
                      {
                        for (j = 0; j != v39; ++j)
                        {
                          v306 = CFArrayGetValueAtIndex(v302, j);
                          if (!v306)
                          {
                            break;
                          }

                          i = v306;
                          if (v40)
                          {
                            v307 = CFArrayGetValueAtIndex(destination[0].duration.value, j);
                            CFDictionarySetValue(i, v980, v307);
                          }

                          if (v300)
                          {
                            v308 = CFArrayGetValueAtIndex(__dst[0].value, j);
                            CFDictionarySetValue(i, v967, v308);
                            if (CFDataGetLength(v308) >= 8)
                            {
                              blockBufferOut.value = 0;
                              v1021.location = 0;
                              v1021.length = 8;
                              CFDataGetBytes(v308, v1021, &blockBufferOut);
                              v309 = CFNumberCreate(allocator, kCFNumberSInt32Type, &blockBufferOut);
                              CFDictionarySetValue(i, v928, v309);
                              if (v309)
                              {
                                CFRelease(v309);
                              }
                            }
                          }
                        }
                      }
                    }
                  }

                  if (destination[0].duration.value)
                  {
                    CFRelease(destination[0].duration.value);
                  }

                  v30 = allocator;
                  if (__dst[0].value)
                  {
                    CFRelease(__dst[0].value);
                  }
                }

                v297 = *(a1 + 168);
              }

              HasSeamSamples = MovieTrackHasSeamSamples(*(v297 + 40));
              if (!HasSeamSamples)
              {
                ISOUserDataReader = 0;
                goto LABEL_239;
              }

              ISOUserDataReader = OUTLINED_FUNCTION_26_39(HasSeamSamples, v311, v312, v313, v314, v315, v316, v317, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
              if (!ISOUserDataReader)
              {
                memcpy((destination[0].duration.value + 80), (v40 + 80), 0x88uLL);
                v318 = CMSampleBufferGetSampleAttachmentsArray(v39, 1u);
                if (v318)
                {
                  v319 = v318;
                  v320 = CFArrayGetCount(v318);
                  if (v320 >= 1)
                  {
                    v321 = v320;
                    for (i = 0; i != v321; ++i)
                    {
                      v322 = CFArrayGetValueAtIndex(v319, i);
                      if (v322)
                      {
                        v323 = v322;
                        __dst[0].value = 0;
                        if (MovieSampleAccessorCopySeamIdentifier())
                        {
                          if (__dst[0].value)
                          {
                            CFDictionarySetValue(v323, v941, __dst[0].value);
                            CFRelease(__dst[0].value);
                          }
                        }
                      }

                      MovieSampleAccessorStepCursor(destination[0].duration.value, 1, 0);
                    }
                  }
                }
              }

              v288 = destination[0].duration.value;
              break;
            }

            OUTLINED_FUNCTION_9_86();
            CFDictionaryApplyFunction(v293, v294, i);
            CFRelease(__dst[0].value);
          }

          MovieSampleAccessorStepCursor(destination[0].duration.value, 1, 0);
          if (v40 == ++v291)
          {
            goto LABEL_200;
          }
        }
      }

      MovieSampleAccessorDispose(v288);
      goto LABEL_239;
    }

    if (!LOBYTE(__dst[0].value))
    {
      CFDictionarySetValue(v39, v656, value);
    }

    if (LOBYTE(blockBufferOut.value))
    {
      CFDictionarySetValue(v39, v695, value);
    }

    if (LOBYTE(time.value))
    {
      CFDictionarySetValue(v39, v682, v669);
    }

    LODWORD(v954) = LOBYTE(__dst[0].value);
    if (!ISOUserDataReader)
    {
      goto LABEL_179;
    }

LABEL_239:
    if (theBuffer)
    {
      CFRelease(theBuffer);
    }

    if (time2.value)
    {
      CFRelease(time2.value);
    }

    if (v1011)
    {
      CFRelease(v1011);
    }

    if (cf)
    {
      CFRelease(cf);
    }

    if (v1010)
    {
      CFRelease(v1010);
    }

    v40 = sbuf;
    if (ISOUserDataReader && sbuf)
    {
      CFRelease(sbuf);
      v387 = 0;
      v40 = 0;
      goto LABEL_445;
    }

    if (ISOUserDataReader)
    {
      goto LABEL_661;
    }

    v172 = *(*(a1 + 168) + 176);
LABEL_253:
    if (!v172)
    {
      if (!*(a1 + 304))
      {
        goto LABEL_256;
      }

      OUTLINED_FUNCTION_33();
      if (!v37)
      {
        goto LABEL_256;
      }

      destination[0].duration.value = 0;
      if (*(*(CMBaseObjectGetVTable() + 16) + 16))
      {
        v334 = OUTLINED_FUNCTION_627();
        ISOUserDataReader = v335(v334);
        if (!v40)
        {
LABEL_302:
          v40 = destination[0].duration.value;
          if (ISOUserDataReader)
          {
            goto LABEL_661;
          }

          goto LABEL_256;
        }
      }

      else
      {
        ISOUserDataReader = 4294954514;
        if (!v40)
        {
          goto LABEL_302;
        }
      }

      CFRelease(v40);
      goto LABEL_302;
    }

    if (!*(*(CMBaseObjectGetVTable() + 16) + 8))
    {
      v387 = 0;
      ISOUserDataReader = 4294954514;
LABEL_445:
      v388 = 1;
      if (!v31)
      {
        goto LABEL_447;
      }

LABEL_446:
      CFRelease(v31);
      goto LABEL_447;
    }

    v324 = OUTLINED_FUNCTION_627();
    appended = v325(v324);
    if (appended)
    {
      goto LABEL_660;
    }

LABEL_256:
    v326 = *(a1 + 184);
    if (v326)
    {
      ConsumeBufferedBytes(a1, v326);
      *(a1 + 184) = 0;
    }

    v327 = *(a1 + 168);
    if (*(v327 + 16))
    {
      if (*(v327 + 48) == 1935832172)
      {
        v328 = CMSampleBufferGetFormatDescription(v40);
        if (CMFormatDescriptionGetMediaSubType(v328) == 1937010800)
        {
          if (v31)
          {
            CFRelease(v31);
          }

          blockBufferOut.value = 0;
          __dst[0].value = 0;
          *&__dst[0].timescale = v30;
          destination[0].duration.value = fragManifold_FigCaptionGroupConverterOutputCallbackMPEG4Part30;
          *&destination[0].duration.timescale = __dst;
          v329 = FigTTMLCaptionGroupConverterFromSampleBufferCreate(destination, v30, &blockBufferOut);
          if (v329)
          {
            goto LABEL_423;
          }

          if (*(*(CMBaseObjectGetVTable() + 16) + 8))
          {
            v330 = OUTLINED_FUNCTION_627();
            v329 = v331(v330);
            if (v329)
            {
              goto LABEL_423;
            }

            v332 = blockBufferOut.value;
            v333 = *(*(CMBaseObjectGetVTable() + 16) + 16);
            if (v333)
            {
              v329 = v333(v332);
              if (!v329)
              {
                if (__dst[0].value)
                {
                  v31 = CFRetain(__dst[0].value);
                  ISOUserDataReader = 0;
LABEL_277:
                  if (__dst[0].value)
                  {
                    CFRelease(__dst[0].value);
                    __dst[0].value = 0;
                  }
                }

                else
                {
                  ISOUserDataReader = 0;
                  v31 = 0;
                }

                if (blockBufferOut.value)
                {
                  CFRelease(blockBufferOut.value);
                }

                if (ISOUserDataReader)
                {
LABEL_661:
                  v387 = 0;
                  goto LABEL_445;
                }

                if (v31 && CFArrayGetCount(v31) >= 1 && CFArrayGetCount(v31) >= 1)
                {
                  v336 = 0;
                  while (1)
                  {
                    v337 = CFArrayGetValueAtIndex(v31, v336);
                    appended = fragManifold_CallPushSampleCallback(a1, *(a1 + 168), v954, v337);
                    if (appended)
                    {
                      break;
                    }

                    if (++v336 >= CFArrayGetCount(v31))
                    {
                      goto LABEL_288;
                    }
                  }

LABEL_660:
                  ISOUserDataReader = appended;
                  goto LABEL_661;
                }

LABEL_288:
                ISOUserDataReader = 0;
LABEL_289:
                if (v40)
                {
                  CFRelease(v40);
                }

                if (ISOUserDataReader == -16045)
                {
                  v40 = 0;
LABEL_444:
                  ISOUserDataReader = 0;
                  v387 = 1;
                  goto LABEL_445;
                }

                v40 = 0;
                if (ISOUserDataReader)
                {
                  goto LABEL_661;
                }

                goto LABEL_293;
              }

LABEL_423:
              ISOUserDataReader = v329;
              v31 = 0;
              goto LABEL_277;
            }
          }

          v31 = 0;
          ISOUserDataReader = 4294954514;
          goto LABEL_277;
        }

        v327 = *(a1 + 168);
      }

      v340 = fragManifold_CallPushSampleCallback(a1, v327, v954, v40);
      if (v340)
      {
        ISOUserDataReader = v340;
        goto LABEL_289;
      }

      OUTLINED_FUNCTION_28_36();
      if (!v37)
      {
        goto LABEL_288;
      }

      MediaSubType = CMFormatDescriptionGetMediaSubType(*(v341 + 64));
      if (MediaSubType - 1718908515 > 0xD || ((1 << (MediaSubType - 99)) & 0x2021) == 0)
      {
        v343 = MediaSubType == 1635148593 || MediaSubType == 1635148595;
        v344 = v343 || MediaSubType == 1667331683;
        v345 = v344 || MediaSubType == 1667524657;
        v346 = v345 || MediaSubType == 1667790435;
        v347 = v346 || MediaSubType == 1684895096;
        v348 = v347 || MediaSubType == 1685220713;
        v349 = v348 || MediaSubType == 1685481521;
        v350 = v349 || MediaSubType == 1685481573;
        v351 = v350 || MediaSubType == 1700886115;
        v352 = v351 || MediaSubType == 1751479857;
        v353 = v352 || MediaSubType == 1752589105;
        v354 = v353 || MediaSubType == 1836415073;
        v355 = v354 || MediaSubType == 1869117027;
        v356 = v355 || MediaSubType == 1902212707;
        v357 = v356 || MediaSubType == 1902212709;
        v358 = v357 || MediaSubType == 1902405681;
        v359 = v358 || MediaSubType == 1902405733;
        v360 = v359 || MediaSubType == 1902407032;
        v361 = v360 || MediaSubType == 1902667126;
        v362 = v361 || MediaSubType == 1902671459;
        v363 = v362 || MediaSubType == 2053207651;
        if (!v363 && MediaSubType != 1902998904)
        {
          goto LABEL_288;
        }
      }

      __dst[0].value = 0;
      blockBufferOut.value = 0;
      v365 = *(a1 + 272);
      if (!v365)
      {
        v366 = MTSampleBufferCopyClosedCaptionSEIBlockBuffer(v40, __dst);
        if (!v366)
        {
          if (!__dst[0].value)
          {
            goto LABEL_401;
          }

          destination[0].duration.value = 0;
          v367 = MovieInformationGetTrackCount(*(a1 + 144));
          do
          {
            ++v367;
          }

          while (fragManifold_ObtainTrackByID(a1, v367, 0) != -16042);
          v368 = CMFormatDescriptionCreate(v30, 0x636C6370u, 0x61746363u, 0, destination);
          if (!v368)
          {
            v369 = OUTLINED_FUNCTION_13_62(1uLL);
            *(a1 + 272) = v369;
            if (v369)
            {
              *v369 = v367;
              v369[12] = 1668047728;
              fragManifold_SetTrackLatestFormatDescription(a1, v369, destination[0].duration.value);
              v368 = fragManifold_CallNewTrackCallback(a1, *(a1 + 272));
              if (!v368)
              {
                v368 = fragManifold_CallFormatDescriptionCallback(a1, *(a1 + 272));
              }
            }

            else
            {
              OUTLINED_FUNCTION_0_221();
              v368 = FigSignalErrorAtGM();
            }
          }

          ISOUserDataReader = v368;
          if (destination[0].duration.value)
          {
            CFRelease(destination[0].duration.value);
          }

          if (!ISOUserDataReader)
          {
LABEL_401:
            v365 = *(a1 + 272);
            if (v365)
            {
              goto LABEL_402;
            }

LABEL_412:
            ISOUserDataReader = 0;
          }

LABEL_413:
          if (__dst[0].value)
          {
            CFRelease(__dst[0].value);
          }

          if (blockBufferOut.value)
          {
            CFRelease(blockBufferOut.value);
          }

          goto LABEL_289;
        }

LABEL_408:
        ISOUserDataReader = v366;
        goto LABEL_413;
      }

LABEL_402:
      if (!*(v365 + 16))
      {
        goto LABEL_412;
      }

      v370 = __dst[0].value;
      if (!__dst[0].value)
      {
        v366 = MTSampleBufferCopyClosedCaptionSEIBlockBuffer(v40, __dst);
        if (v366)
        {
          goto LABEL_408;
        }

        v370 = __dst[0].value;
        if (!__dst[0].value)
        {
          goto LABEL_412;
        }
      }

      destination[0].duration.value = CMBlockBufferGetDataLength(v370);
      v573 = *(a1 + 224);
      v371 = OUTLINED_FUNCTION_12_77();
      v366 = CMSampleBufferCreate(v371, v372, v373, v374, v375, v376, 1, 1, v573, 1, destination, &blockBufferOut);
      if (!v366)
      {
        v366 = fragManifold_CallPushSampleCallback(a1, *(a1 + 272), 0, blockBufferOut.value);
      }

      goto LABEL_408;
    }

LABEL_293:
    ConsumeBufferedBytes(a1, *(a1 + 176));
    *(a1 + 176) = 0;
    v338 = MovieSampleAccessorStepCursor(*(*(a1 + 168) + 168), *(a1 + 192), 0);
    appended = *(a1 + 168);
    v339 = *(appended + 248) + *(a1 + 192);
    *(appended + 248) = v339;
    if (v339 == *(appended + 200))
    {
      if (v338 == -12840)
      {
        MovieSampleAccessorDispose(*(appended + 168));
        *(*(a1 + 168) + 168) = 0;
      }

      else
      {
        appended = (fragManifold_ObtainChunkInformation)();
        if (appended)
        {
          goto LABEL_660;
        }
      }

      appended = fragManifold_SelectEligibleTrackForEmitting(a1);
      if (appended)
      {
        goto LABEL_660;
      }
    }

    if (*(a1 + 72) != *(a1 + 240))
    {
      v39 = *(a1 + 168);
      if (*(v39 + 168))
      {
        continue;
      }
    }

    fragManifold_UnprepareTracksForSampleEmission(a1);
    v387 = 0;
    v388 = 0;
    ISOUserDataReader = 0;
    if (v31)
    {
      goto LABEL_446;
    }

LABEL_447:
    if (v40)
    {
      CFRelease(v40);
    }

    OUTLINED_FUNCTION_11_77();
    if (ISOUserDataReader)
    {
      return ISOUserDataReader;
    }

    if (v388)
    {
LABEL_506:
      if (v387)
      {
        return 0;
      }
    }

    else
    {
      v389 = *(a1 + 240);
      v390 = *(a1 + 72);
      v391 = v389 <= v390;
      v392 = v389 - v390;
      if (!v391)
      {
        *(a1 + 128) = v392;
        *(a1 + 112) = 3;
        if (v387)
        {
          return 0;
        }

        goto LABEL_3;
      }

LABEL_748:
      *(a1 + 112) = 0;
      if (v387)
      {
        return 0;
      }
    }

    goto LABEL_3;
  }

  if (*(v171 + 83))
  {
    OUTLINED_FUNCTION_20_43();
    OUTLINED_FUNCTION_6_126();
    appended = FigMemoryPoolCreateContiguousBlockBuffer();
    if (appended)
    {
      goto LABEL_411;
    }

    CMBlockBufferGetDataLength(theBuffer);
    v173 = CMBlockBufferGetDataLength(theBuffer);
    appended = OUTLINED_FUNCTION_15_62(v173, v174, v175, v176, v177, v178, v179, v180, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
    if (appended)
    {
      goto LABEL_411;
    }

    if (!FigCFEqual())
    {
      MovieSampleAccessorCopyCryptorIV(*(v171 + 168), destination);
      v181 = *(a1 + 248);
      v182 = destination[0].duration.value;
      v183 = *(*(CMBaseObjectGetVTable() + 8) + 56);
      if (v183)
      {
        ISOUserDataReader = v183(v181, v799, v182);
      }

      else
      {
        ISOUserDataReader = 4294954514;
      }

      if (destination[0].duration.value)
      {
        CFRelease(destination[0].duration.value);
      }

      if (ISOUserDataReader)
      {
        goto LABEL_108;
      }
    }

    MovieSampleAccessorCopyCryptorSubsampleAuxData(*(v171 + 168), __dst);
    v198 = *(a1 + 248);
    v199 = __dst[0].value;
    v200 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (v200)
    {
      ISOUserDataReader = v200(v198, v838, v199);
    }

    else
    {
      ISOUserDataReader = 4294954514;
    }

    if (__dst[0].value)
    {
      CFRelease(__dst[0].value);
    }

    if (ISOUserDataReader)
    {
      goto LABEL_108;
    }

    v40 = *(a1 + 248);
    v39 = *(v171 + 88);
    v201 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (!v201)
    {
      goto LABEL_107;
    }

    appended = v201(v40, v864, v39);
    if (appended)
    {
      goto LABEL_411;
    }

    v202 = *(OUTLINED_FUNCTION_37_31() + 16);
    if (*v202 < 4uLL || !v202[4])
    {
LABEL_107:
      ISOUserDataReader = 4294954514;
LABEL_108:
      LODWORD(v954) = 0;
      goto LABEL_239;
    }

LABEL_105:
    v203 = OUTLINED_FUNCTION_627();
    appended = v204(v203);
    if (appended)
    {
      goto LABEL_411;
    }

    goto LABEL_154;
  }

  v39 = *(v171 + 88);
  if (!v39)
  {
    goto LABEL_154;
  }

  if (*(v171 + 85))
  {
    v184 = *(a1 + 248);
    v185 = *(v171 + 56);
    v186 = *(*(CMBaseObjectGetVTable() + 8) + 56);
    if (!v186)
    {
      goto LABEL_127;
    }

    appended = v186(v184, v747, v185);
    if (appended)
    {
      goto LABEL_411;
    }

    v39 = *(v171 + 88);
  }

  v40 = *(a1 + 248);
  v187 = *(*(CMBaseObjectGetVTable() + 8) + 56);
  if (!v187)
  {
    goto LABEL_127;
  }

  ISOUserDataReader = v187(v40, v864, v39);
  if (ISOUserDataReader)
  {
    goto LABEL_108;
  }

  v39 = *(a1 + 248);
  OUTLINED_FUNCTION_20_43();
  if (v39 && !*(v171 + 83))
  {
    v188 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (v188)
    {
      v189 = v188(v39, v799, v30, destination);
      if (v189)
      {
        goto LABEL_90;
      }

      v190 = destination[0].duration.value;
      if (destination[0].duration.value)
      {
        ISOUserDataReader = 0;
        goto LABEL_118;
      }

      OUTLINED_FUNCTION_197();
      v189 = FigParseHLSfMP4SecurityInfoFromFormatDescriptionAndCopyIV(v191, v192, v193, v194, v195, v196);
      if (v189)
      {
        goto LABEL_90;
      }

      v40 = __dst[0].value;
      v197 = *(*(CMBaseObjectGetVTable() + 8) + 56);
      if (v197)
      {
        v189 = v197(v39, v799, v40);
LABEL_90:
        ISOUserDataReader = v189;
        goto LABEL_117;
      }
    }

    ISOUserDataReader = 4294954514;
  }

LABEL_117:
  v190 = destination[0].duration.value;
  if (!destination[0].duration.value)
  {
LABEL_119:
    if (__dst[0].value)
    {
      CFRelease(__dst[0].value);
    }

    if (ISOUserDataReader)
    {
      goto LABEL_108;
    }

    if (*(a1 + 192) != 1)
    {
      OUTLINED_FUNCTION_20_43();
      blockBufferOut.value = 0;
      Empty = CMBlockBufferCreateEmpty(v30, v216, 0, destination);
      if (Empty)
      {
        ISOUserDataReader = Empty;
      }

      else
      {
        if (*(a1 + 192) < 1)
        {
LABEL_144:
          ISOUserDataReader = 0;
          time2.value = destination[0].duration.value;
          destination[0].duration.value = 0;
        }

        else
        {
          v40 = 0;
          v39 = 0;
          v1 = 0;
          while (1)
          {
            if (v1 < *(a1 + 208))
            {
              v40 = *(*(a1 + 232) + 8 * v1);
            }

            Contiguous = CMBlockBufferCreateContiguous(v30, *(a1 + 80), v30, 0, v39, v40, 0, &blockBufferOut);
            if (Contiguous)
            {
              break;
            }

            Contiguous = CMBlockBufferCreateWithMemoryBlock(v30, 0, v40, v30, 0, 0, v40, 1u, __dst);
            if (Contiguous)
            {
              break;
            }

            v219 = *(a1 + 248);
            v220 = blockBufferOut.value;
            i = __dst[0].value;
            v221 = *(CMBaseObjectGetVTable() + 16);
            if (*v221 < 4uLL || (v222 = v221[4]) == 0)
            {
              ISOUserDataReader = 4294954514;
              goto LABEL_146;
            }

            Contiguous = v222(v219, v220, i);
            if (Contiguous)
            {
              break;
            }

            if (blockBufferOut.value)
            {
              CFRelease(blockBufferOut.value);
              blockBufferOut.value = 0;
            }

            OUTLINED_FUNCTION_496();
            Contiguous = CMBlockBufferAppendBufferReference(v223, v224, v225, v226, 0);
            if (Contiguous)
            {
              break;
            }

            if (__dst[0].value)
            {
              CFRelease(__dst[0].value);
              __dst[0].value = 0;
            }

            v39 += v40;
            if (++v1 >= *(a1 + 192))
            {
              goto LABEL_144;
            }
          }

          ISOUserDataReader = Contiguous;
        }

LABEL_146:
        OUTLINED_FUNCTION_16_59();
      }

      if (blockBufferOut.value)
      {
        CFRelease(blockBufferOut.value);
      }

      if (__dst[0].value)
      {
        CFRelease(__dst[0].value);
      }

      appended = destination[0].duration.value;
      if (destination[0].duration.value)
      {
        CFRelease(destination[0].duration.value);
      }

      if (ISOUserDataReader)
      {
        goto LABEL_108;
      }

      goto LABEL_154;
    }

    OUTLINED_FUNCTION_6_126();
    appended = FigMemoryPoolCreateContiguousBlockBuffer();
    if (appended)
    {
      goto LABEL_411;
    }

    v39 = CMBlockBufferGetDataLength(theBuffer);
    v207 = CMBlockBufferGetDataLength(theBuffer);
    appended = OUTLINED_FUNCTION_15_62(v207, v208, v209, v210, v211, v212, v213, v214, v562, v577, sampleSizeArray, sampleBufferOut, v618[0], v618[1], v643, v656, v669, v682, v695, v708, v721, v734, v747, v760, value, v786, v799, key, v825, v838, v851, v864, v877, *(&v877 + 1), v902, v915, v928, v941, v954, v967, v980, allocator, __dst[0].value, *&__dst[0].timescale, __dst[0].epoch, __dst[1].value, *&__dst[1].timescale, __dst[1].epoch, __dst[2].value, *&__dst[2].timescale, __dst[2].epoch, __dst[3].value, *&__dst[3].timescale, __dst[3].epoch, sbuf, *(&sbuf + 1), v1008, v1009, v1010, v1011, cf, theBuffer, time.value);
    if (appended)
    {
      goto LABEL_411;
    }

    v215 = *(OUTLINED_FUNCTION_37_31() + 16);
    if (*v215 < 4uLL || !v215[4])
    {
LABEL_127:
      LODWORD(v954) = 0;
      ISOUserDataReader = 4294954514;
      goto LABEL_239;
    }

    goto LABEL_105;
  }

LABEL_118:
  CFRelease(v190);
  goto LABEL_119;
}

uint64_t fragManifold_SetTrackLatestFormatDescription(uint64_t a1, uint64_t a2, CMFormatDescriptionRef desc)
{
  MediaSubType = CMFormatDescriptionGetMediaSubType(desc);
  v7 = MediaSubType;
  formatDescriptionOut = 0;
  v8 = MediaSubType == 1902212707 || MediaSubType == 1902212709;
  if (v8)
  {
    v12 = 1;
    goto LABEL_18;
  }

  if (MediaSubType == 1902407032 || MediaSubType == 1902667126 || MediaSubType == 1902998904 || MediaSubType == 1902671459)
  {
    v12 = 0;
LABEL_18:
    *(a2 + 84) = v12;
  }

  v13 = *(a2 + 64);
  *(a2 + 64) = desc;
  if (desc)
  {
    CFRetain(desc);
  }

  if (v13)
  {
    CFRelease(v13);
  }

  v14 = MEMORY[0x1E6962758];
  v15 = MEMORY[0x1E695E480];
  if (!*(a1 + 264))
  {
    if (v7 != 1937010800)
    {
      goto LABEL_107;
    }

    Extensions = CMFormatDescriptionGetExtensions(desc);
    *(a2 + 48) = 1935832172;
    v31 = CMFormatDescriptionCreate(*v15, 0x7362746Cu, 0x73747070u, Extensions, &formatDescriptionOut);
    if (v31)
    {
      goto LABEL_278;
    }

    goto LABEL_103;
  }

  v125 = 0;
  valuePtr = 0;
  v16 = CMFormatDescriptionGetMediaSubType(desc);
  OUTLINED_FUNCTION_14_72();
  if (!(!v8 & v17))
  {
    OUTLINED_FUNCTION_2_48();
    if (!v33)
    {
      goto LABEL_69;
    }
  }

  if (v16 != 1667331683 && v16 != 1667524657)
  {
    v19 = MEMORY[0x1E6960FF0];
    if (v16 == 1903587385)
    {
      Extension = CMFormatDescriptionGetExtension(desc, *v14);
      if (Extension)
      {
        v116 = Extension;
        v117 = CFGetTypeID(Extension);
        if (v117 == CFNumberGetTypeID())
        {
          CFNumberGetValue(v116, kCFNumberSInt32Type, &valuePtr);
          *(a2 + 83) = 1;
          v34 = *v19;
          goto LABEL_70;
        }
      }

LABEL_303:
      OUTLINED_FUNCTION_1_204();
      v29 = FigSignalErrorAtGM();
      v41 = 0;
      goto LABEL_304;
    }

    OUTLINED_FUNCTION_31_31();
    if (v8 || v16 == 1902211171)
    {
      goto LABEL_69;
    }

    OUTLINED_FUNCTION_31_31();
    if (!v8)
    {
      OUTLINED_FUNCTION_31_31();
      if (v8 || v16 == 1902212709)
      {
        v32 = MEMORY[0x1E6960FD8];
LABEL_73:
        *(a2 + 88) = *v32;
        goto LABEL_74;
      }

      if (v16 != 1902403958)
      {
        if (v16 != 1902405681 && v16 != 1902405733 && v16 != 1902407032)
        {
          if (v16 == 1902469939 || v16 == 1902537827)
          {
            goto LABEL_69;
          }

          if (v16 != 1902667126 && v16 != 1902671459)
          {
            if (v16 == 1902928227)
            {
              goto LABEL_69;
            }

            if (v16 != 1902998904)
            {
              if (v16 != 1903522657)
              {
                if (v16 != 1667790435)
                {
LABEL_97:
                  v41 = v125;
                  formatDescriptionOut = v125;
LABEL_98:
                  if (!v41)
                  {
                    goto LABEL_107;
                  }

                  v53 = *(a2 + 56);
                  v52 = *(a2 + 64);
                  *(a2 + 56) = v52;
                  if (v52)
                  {
                    CFRetain(v52);
                  }

                  if (v53)
                  {
                    CFRelease(v53);
                  }

LABEL_103:
                  v54 = *(a2 + 64);
                  v55 = formatDescriptionOut;
                  *(a2 + 64) = formatDescriptionOut;
                  if (v55)
                  {
                    CFRetain(v55);
                  }

                  if (v54)
                  {
                    CFRelease(v54);
                  }

LABEL_107:
                  OUTLINED_FUNCTION_33();
                  if (!v8)
                  {
LABEL_268:
                    v29 = 0;
LABEL_279:
                    v41 = formatDescriptionOut;
                    goto LABEL_280;
                  }

                  LODWORD(asbd.mSampleRate) = CMFormatDescriptionGetMediaSubType(*(a2 + 64));
                  if ((LODWORD(asbd.mSampleRate) - 1885430579) <= 0x3D && (OUTLINED_FUNCTION_2_48(), !v8) || (OUTLINED_FUNCTION_14_72(), !(!v8 & v17)) && (OUTLINED_FUNCTION_2_48(), !v119) || (mSampleRate_low - 1902212657) <= 0x34 && ((1 << (mSampleRate_low - 49)) & 0x14000000000001) != 0 || (mSampleRate_low - 2053202739) <= 0x3D && (OUTLINED_FUNCTION_2_48(), !v8) || (mSampleRate_low != 1633771875 ? (v57 = mSampleRate_low == 1667312947) : (v57 = 1), !v57 ? (v58 = mSampleRate_low == 1667326307) : (v58 = 1), !v58 ? (v59 = mSampleRate_low == 1667326824) : (v59 = 1), !v59 ? (v60 = mSampleRate_low == 1667326832) : (v60 = 1), !v60 ? (v61 = mSampleRate_low == 1667330147) : (v61 = 1), !v61 ? (v62 = mSampleRate_low == 1667331683) : (v62 = 1), !v62 ? (v63 = mSampleRate_low == 1667524657) : (v63 = 1), !v63 ? (v64 = mSampleRate_low == 1667574579) : (v64 = 1), !v64 ? (v65 = mSampleRate_low == 1667575091) : (v65 = 1), !v65 ? (v66 = mSampleRate_low == 1667656803) : (v66 = 1), !v66 ? (v67 = mSampleRate_low == 1667790435) : (v67 = 1), !v67 ? (v68 = mSampleRate_low == 1668047203) : (v68 = 1), !v68 ? (v69 = mSampleRate_low == 1668641633) : (v69 = 1), !v69 ? (v70 = mSampleRate_low == 1685220713) : (v70 = 1), !v70 ? (v71 = mSampleRate_low == 1700886115) : (v71 = 1), !v71 ? (v72 = mSampleRate_low == 1701733217) : (v72 = 1), !v72 ? (v73 = mSampleRate_low == 1701733238) : (v73 = 1), !v73 ? (v74 = mSampleRate_low == 1869117027) : (v74 = 1), !v74 ? (v75 = mSampleRate_low == 1882599480) : (v75 = 1), !v75 ? (v76 = mSampleRate_low == 1885430115) : (v76 = 1), !v76 ? (v77 = mSampleRate_low == 1885547315) : (v77 = 1), !v77 ? (v78 = mSampleRate_low == 1885692723) : (v78 = 1), !v78 ? (v79 = mSampleRate_low == 1886745441) : (v79 = 1), !v79 ? (v80 = mSampleRate_low == 1902207331) : (v80 = 1), !v80 ? (v81 = mSampleRate_low == 1902211171) : (v81 = 1), !v81 ? (v82 = mSampleRate_low == 1902324531) : (v82 = 1), !v82 ? (v83 = mSampleRate_low == 1902403958) : (v83 = 1), !v83 ? (v84 = mSampleRate_low == 1902405681) : (v84 = 1), !v84 ? (v85 = mSampleRate_low == 1902405733) : (v85 = 1), !v85 ? (v86 = mSampleRate_low == 1902407032) : (v86 = 1), !v86 ? (v87 = mSampleRate_low == 1902469939) : (v87 = 1), !v87 ? (v88 = mSampleRate_low == 1902537827) : (v88 = 1), !v88 ? (v89 = mSampleRate_low == 1902667126) : (v89 = 1), !v89 ? (v90 = mSampleRate_low == 1902671459) : (v90 = 1), !v90 ? (v91 = mSampleRate_low == 1902928227) : (v91 = 1), !v91 ? (v92 = mSampleRate_low == 1902998904) : (v92 = 1), !v92 ? (v93 = mSampleRate_low == 1903522657) : (v93 = 1), !v93 ? (v94 = mSampleRate_low == 1903587385) : (v94 = 1), !v94 ? (v95 = mSampleRate_low == 2053202275) : (v95 = 1), !v95 ? (v96 = mSampleRate_low == 2053207651) : (v96 = 1), !v96 ? (v97 = mSampleRate_low == 2053319475) : (v97 = 1), !v97 ? (v98 = mSampleRate_low == 2053464883) : (v98 = 1), !v98 ? (v99 = mSampleRate_low == 2054517601) : (v99 = 1), !v99 ? (v100 = mSampleRate_low == 2053923171) : (v100 = 1), v100))
                  {
                    v101 = CMFormatDescriptionGetExtension(*(a2 + 64), *v14);
                    if (!v101 || (v102 = v101, v103 = CFGetTypeID(v101), v103 != CFNumberGetTypeID()))
                    {
LABEL_277:
                      OUTLINED_FUNCTION_1_204();
                      v31 = FigSignalErrorAtGM();
LABEL_278:
                      v29 = v31;
                      goto LABEL_279;
                    }

                    CFNumberGetValue(v102, kCFNumberSInt32Type, &asbd);
                    mSampleRate_low = LODWORD(asbd.mSampleRate);
                  }

                  if (mSampleRate_low != 1635148595 && mSampleRate_low != 1751479857 && mSampleRate_low != 1685481573)
                  {
                    goto LABEL_268;
                  }

                  v106 = CMFormatDescriptionGetExtensions(*(a2 + 64));
                  if (!v106)
                  {
                    goto LABEL_277;
                  }

                  Value = CFDictionaryGetValue(v106, *MEMORY[0x1E69600A0]);
                  if (!Value)
                  {
                    goto LABEL_277;
                  }

                  if (LODWORD(asbd.mSampleRate) == 1635148595)
                  {
                    v109 = @"avcC";
                    v110 = 4;
                  }

                  else
                  {
                    if (LODWORD(asbd.mSampleRate) != 1751479857 && LODWORD(asbd.mSampleRate) != 1685481573)
                    {
                      goto LABEL_277;
                    }

                    v109 = @"hvcC";
                    v110 = 21;
                  }

                  v111 = CFDictionaryGetValue(Value, v109);
                  if (v111)
                  {
                    ValueAtIndex = v111;
                    v113 = CFGetTypeID(v111);
                    if ((v113 != CFArrayGetTypeID() || CFArrayGetCount(ValueAtIndex) == 1 && (ValueAtIndex = CFArrayGetValueAtIndex(ValueAtIndex, 0)) != 0) && CFDataGetLength(ValueAtIndex) > v110 && (~CFDataGetBytePtr(ValueAtIndex)[v110] & 3) == 0)
                    {
                      v29 = 0;
                      *(a2 + 81) = 1;
                      goto LABEL_279;
                    }
                  }

                  goto LABEL_277;
                }

                goto LABEL_60;
              }

LABEL_69:
              v34 = *MEMORY[0x1E6960FC0];
LABEL_70:
              *(a2 + 88) = v34;
              goto LABEL_75;
            }
          }
        }

        v32 = MEMORY[0x1E6960FE8];
        goto LABEL_73;
      }
    }

    *(a2 + 88) = *v19;
    *(a2 + 83) = 1;
LABEL_74:
    *(a2 + 85) = 1;
LABEL_75:
    OUTLINED_FUNCTION_197();
    v40 = FigParseHLSfMP4SecurityInfoFromFormatDescriptionAndCopyIV(v35, v36, v37, v38, v39, 0);
    if (v40)
    {
LABEL_76:
      v29 = v40;
      goto LABEL_77;
    }

    goto LABEL_78;
  }

LABEL_60:
  v26 = CMFormatDescriptionGetExtension(desc, *v14);
  if (!v26)
  {
    goto LABEL_303;
  }

  v27 = v26;
  v28 = CFGetTypeID(v26);
  if (v28 != CFNumberGetTypeID())
  {
    goto LABEL_303;
  }

  CFNumberGetValue(v27, kCFNumberSInt32Type, &valuePtr);
  *(a2 + 88) = *MEMORY[0x1E6960FE0];
  *(a2 + 83) = 1;
  OUTLINED_FUNCTION_33();
  if (!v8)
  {
    v29 = 4294951255;
LABEL_77:
    v41 = v125;
    formatDescriptionOut = v125;
    goto LABEL_280;
  }

LABEL_78:
  v42 = CMFormatDescriptionGetExtensions(desc);
  OUTLINED_FUNCTION_63();
  if (!v8)
  {
    OUTLINED_FUNCTION_33();
    if (v8)
    {
      Dimensions = CMVideoFormatDescriptionGetDimensions(desc);
      v40 = CMVideoFormatDescriptionCreate(*v15, valuePtr, Dimensions.width, Dimensions.height, v42, &v125);
      if (v40)
      {
        goto LABEL_76;
      }
    }

    goto LABEL_97;
  }

  v122 = 0;
  sizeOut = 0;
  StreamBasicDescription = CMAudioFormatDescriptionGetStreamBasicDescription(desc);
  if (StreamBasicDescription)
  {
    v46 = *&StreamBasicDescription->mSampleRate;
    v45 = *&StreamBasicDescription->mBytesPerPacket;
    *&asbd.mBitsPerChannel = *&StreamBasicDescription->mBitsPerChannel;
    *&asbd.mSampleRate = v46;
    *&asbd.mBytesPerPacket = v45;
    asbd.mFormatID = valuePtr;
    ChannelLayout = CMAudioFormatDescriptionGetChannelLayout(desc, &sizeOut);
    CMAudioFormatDescriptionGetMagicCookie(desc, &v122);
    OUTLINED_FUNCTION_31_31();
    if (v8 || v16 == 1902207848 || v16 == 1902207856 || v16 == 1903522657)
    {
      v48 += 8;
      v118 = v122 - 8;
      v122 -= 8;
    }

    else
    {
      v118 = v122;
    }

    v40 = CMAudioFormatDescriptionCreate(*v15, &asbd, sizeOut, ChannelLayout, v118, v48, v42, &v125);
    if (v40)
    {
      goto LABEL_76;
    }

    goto LABEL_97;
  }

  OUTLINED_FUNCTION_1_204();
  v29 = FigSignalErrorAtGM();
  v41 = v125;
LABEL_304:
  formatDescriptionOut = v41;
  if (!v29)
  {
    goto LABEL_98;
  }

LABEL_280:
  if (v41)
  {
    CFRelease(v41);
  }

  return v29;
}

uint64_t fragManifold_CallFormatDescriptionCallback(uint64_t a1, unsigned int *a2)
{
  if (!*(a2 + 1))
  {
    return 0;
  }

  OUTLINED_FUNCTION_63();
  if (v12)
  {
    CMFormatDescriptionGetMediaSubType(*(a2 + 8));
    OUTLINED_FUNCTION_14_72();
    v10 = (1 << v9) & 0x2020000000000001;
    if (!v12 & v11)
    {
      v12 = 1;
    }

    else
    {
      v12 = v10 == 0;
    }

    if (!v12 || v8 == 1902207331 || v8 == 1902211171 || v8 == 1902469939 || v8 == 1902537827 || v8 == 1903522657 || v8 == 1902928227)
    {
      v4 = *(a1 + 256);
      if (!v4)
      {
        v4 = *(a1 + 248);
      }

      goto LABEL_35;
    }
  }

  else
  {
    OUTLINED_FUNCTION_33();
    if (v12)
    {
      v4 = *(a1 + 248);
      if (v4)
      {
        v5 = *(a2 + 8);
        v6 = *(*(CMBaseObjectGetVTable() + 8) + 56);
        if (v6)
        {
          v6(v4, *MEMORY[0x1E6961010], v5);
        }
      }

      goto LABEL_35;
    }
  }

  v4 = 0;
LABEL_35:
  v19 = *(a1 + 32);
  *(a1 + 32) = 0;
  if (v19 >= 1)
  {
    v20 = v19;
    do
    {
      FigSimpleMutexUnlock();
      --v20;
    }

    while (v20);
  }

  v7 = (*(a2 + 1))(*(a1 + 8), *a2, *(a2 + 4), *(a2 + 8), v4);
  do
  {
    FigSimpleMutexLock();
    OUTLINED_FUNCTION_25_40();
  }

  while (v21 < v19);
  if (!v7)
  {
    if (*a1 || *(a1 + 2))
    {
      return 4294951251;
    }

    else
    {
      v7 = 0;
      *(a2 + 82) = 0;
    }
  }

  return v7;
}

uint64_t fragManifold_CallPushSampleCallback(uint64_t a1, unsigned int *a2, int a3, uint64_t a4)
{
  if (!*(a2 + 2))
  {
    return 0;
  }

  if (*(a2 + 82))
  {
    v13 = OUTLINED_FUNCTION_627();
    v15 = fragManifold_CallFormatDescriptionCallback(v13, v14);
    if (v15)
    {
      return v15;
    }
  }

  v8 = *(a1 + 32);
  *(a1 + 32) = 0;
  if (v8 >= 1)
  {
    v9 = v8;
    do
    {
      FigSimpleMutexUnlock();
      --v9;
    }

    while (v9);
  }

  v10 = (*(a2 + 2))(*(a1 + 8), *a2, *(a2 + 4), a3 != 0, *(a1 + 72), a4);
  do
  {
    FigSimpleMutexLock();
    OUTLINED_FUNCTION_7_111();
  }

  while (v11 < v8);
  if (!v10)
  {
    v10 = 4294951251;
    if (!*a1)
    {
      if (*(a1 + 2))
      {
        return 4294951251;
      }

      else
      {
        return 0;
      }
    }
  }

  return v10;
}

uint64_t fragManifold_CallNewTrackCallback(uint64_t a1, unsigned int *a2)
{
  if (*(a2 + 176))
  {
    return 0;
  }

  v3 = *(a1 + 40);
  if (!v3)
  {
    return 0;
  }

  v5 = *(a1 + 32);
  *(a1 + 32) = 0;
  if (v5 >= 1)
  {
    v6 = v5;
    do
    {
      FigSimpleMutexUnlock();
      --v6;
    }

    while (v6);
    v3 = *(a1 + 40);
  }

  v7 = v3(*(a1 + 8), *(a1 + 48), a2[12], *a2);
  do
  {
    FigSimpleMutexLock();
    OUTLINED_FUNCTION_7_111();
  }

  while (v8 < v5);
  if (!v7)
  {
    v7 = 4294951251;
    if (!*a1)
    {
      if (*(a1 + 2))
      {
        return 4294951251;
      }

      else
      {
        return 0;
      }
    }
  }

  return v7;
}

uint64_t fragManifold_FigCaptionGroupConverterOutputCallbackMPEG4Part30(uint64_t a1, uint64_t a2, CFMutableArrayRef *a3)
{
  if (!*a3)
  {
    Mutable = CFArrayCreateMutable(a3[1], 0, MEMORY[0x1E695E9C0]);
    *a3 = Mutable;
    if (!Mutable)
    {
      return 4294954510;
    }
  }

  v5 = FigSampleBufferCreateForCaptionGroup();
  if (!v5)
  {
    CFArrayAppendValue(*a3, 0);
  }

  return v5;
}

uint64_t FigManifoldCreateForMovieFragmentStream_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigManifoldCreateForMovieFragmentStream_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigManifoldCreateForMovieFragmentStream_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MovieFragmentManifoldSetProperty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MovieFragmentManifoldInjectData_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MovieFragmentManifoldInjectData_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MovieFragmentManifoldInjectData_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MovieFragmentManifoldNoteStreamEnd_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fragManifold_SelectEligibleTrackForEmitting_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetDefaultMediaTimeScaleFromSample(opaqueCMSampleBuffer *a1, CMTimeScale *a2)
{
  if (CMSampleBufferGetNumSamples(a1))
  {
    FormatDescription = CMSampleBufferGetFormatDescription(a1);
    if (FormatDescription)
    {
      v5 = FormatDescription;
      MediaType = CMFormatDescriptionGetMediaType(FormatDescription);
      if (MediaType == 1986618469)
      {
        timescale = 600;
        goto LABEL_10;
      }

      if (MediaType != 1936684398)
      {
        memset(&v10, 0, sizeof(v10));
        CMSampleBufferGetPresentationTimeStamp(&v10, a1);
        timescale = v10.timescale;
        if (v10.timescale <= 600)
        {
          timescale = 600;
        }

        goto LABEL_10;
      }

      MostCompatibleFormat = CMAudioFormatDescriptionGetMostCompatibleFormat(v5);
      if (MostCompatibleFormat)
      {
        timescale = MostCompatibleFormat->mASBD.mSampleRate;
LABEL_10:
        result = 0;
        *a2 = timescale;
        return result;
      }
    }
  }

  return 4294954516;
}

uint64_t FigMovieCreateDictionaryFromAuxiliaryXMLData(OpaqueCMBlockBuffer *a1, CFMutableDictionaryRef *a2)
{
  cf = 0;
  v3 = *MEMORY[0x1E695E480];
  v4 = FigXMLNodeCreateFromBlockBuffer(*MEMORY[0x1E695E480], a1, &cf);
  if (v4)
  {
    v11 = v4;
  }

  else
  {
    CountOfChildren = FigXMLNodeGetCountOfChildren(cf);
    Mutable = CFDictionaryCreateMutable(v3, CountOfChildren, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      v7 = Mutable;
      if (CountOfChildren >= 1)
      {
        for (i = 0; i != CountOfChildren; ++i)
        {
          ChildAtIndex = FigXMLNodeGetChildAtIndex(cf, i);
          if (ChildAtIndex)
          {
            v10 = ChildAtIndex;
            if (FigXMLNodeGetTag(ChildAtIndex))
            {
              FigXMLNodeGetContentAsCFString(v10);
              FigCFDictionarySetValue();
            }
          }
        }
      }

      v11 = 0;
      *a2 = v7;
    }

    else
    {
      v11 = 4294954305;
    }
  }

  if (cf)
  {
    CFRelease(cf);
  }

  return v11;
}

uint64_t FigMovieCreateContiguousBBufFromNonContiguousAudioSample_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCreateContiguousBBufFromNonContiguousAudioSample_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCreateContiguousBBufFromNonContiguousAudioSample_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCreateContiguousBBufFromNonContiguousAudioSample_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCreateContiguousBBufFromNonContiguousAudioSample_cold_6(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCreateContiguousBBufFromNonContiguousAudioSample_cold_7(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCreateContiguousBBufFromNonContiguousAudioSample_cold_8(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieIsNonInterleavedPCMAudioSample_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetAudioRollRecoveryValueFromSampleBufferAttachment_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetAudioRollRecoveryValueFromSampleBufferAttachment_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetAudioRollRecoveryValueFromSampleBufferAttachment_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCopySeamIdentifierFromSampleAttachment_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieCopySeamIdentifierFromSampleAttachment_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetAudioIndependentSampleDecoderRefreshCountFromSampleAttachment_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetAudioIndependentSampleDecoderRefreshCountFromSampleAttachment_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetAudioIndependentSampleDecoderRefreshCountFromSampleAttachment_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoSyncSampleEntryFromSampleAttachment_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoSyncSampleEntryFromSampleAttachment_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoSyncSampleEntryFromSampleAttachment_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_5(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_6(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_7(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_8(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_9(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_10(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_11(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_12(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_13(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_14(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_15(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_16(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieGetVideoTemporalLayerEntryFromSampleAttachment_cold_17(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMetricErrorEventDeserializeAndCopy(void *a1, void *a2)
{
  v13 = *MEMORY[0x1E6960C70];
  v14 = *(MEMORY[0x1E6960C70] + 16);
  v11 = 0;
  cf = 0;
  v10 = 0;
  if (a1 && a2)
  {
    v3 = xpc_dictionary_get_BOOL(a1, "DidRecover");
    CMTime = FigXPCMessageGetCMTime();
    if (!CMTime)
    {
      CMTime = FigXPCMessageCopyCFDate();
      if (!CMTime)
      {
        CMTime = FigXPCMessageCopyCFString();
        if (!CMTime)
        {
          CMTime = FigXPCMessageCopyCFError();
          if (!CMTime)
          {
            AllocatorForMedia = FigGetAllocatorForMedia();
            v8 = v13;
            v9 = v14;
            CMTime = FigMetricErrorEventCreateInternal(AllocatorForMedia, &v8, cf, v11, v3, v10, a2);
          }
        }
      }
    }
  }

  else
  {
    CMTime = FigSignalErrorAtGM();
  }

  v6 = CMTime;
  if (cf)
  {
    CFRelease(cf);
  }

  if (v11)
  {
    CFRelease(v11);
  }

  if (v10)
  {
    CFRelease(v10);
  }

  return v6;
}

uint64_t mee_serialize(uint64_t a1, void *a2)
{
  if (a1 && a2)
  {
    v4 = *(*(CMBaseObjectGetVTable() + 16) + 24);
    if (v4)
    {
      v5 = v4(a1);
    }

    else
    {
      v5 = -12782;
    }

    xpc_dictionary_set_int64(a2, "EventID", v5);
    v6 = *(*(CMBaseObjectGetVTable() + 16) + 56);
    if (v6)
    {
      v6(&v16, a1);
    }

    else
    {
      v16 = *MEMORY[0x1E6960C70];
      v17 = *(MEMORY[0x1E6960C70] + 16);
    }

    v7 = FigXPCMessageSetCMTime();
    if (v7)
    {
      return v7;
    }

    v8 = *(*(CMBaseObjectGetVTable() + 16) + 32);
    if (v8)
    {
      v8(a1);
    }

    v7 = FigXPCMessageSetCFDate();
    if (v7)
    {
      return v7;
    }

    v9 = *(*(CMBaseObjectGetVTable() + 16) + 40);
    if (v9)
    {
      v10 = v9(a1);
    }

    else
    {
      v10 = 0;
    }

    v11 = FigXPCMessageSetCFString();
    if (!v11)
    {
      v12 = *(*(CMBaseObjectGetVTable() + 24) + 8);
      if (v12)
      {
        v12(a1);
      }

      FigXPCMessageSetCFError();
      v13 = *(*(CMBaseObjectGetVTable() + 24) + 16);
      if (v13)
      {
        v14 = v13(a1) != 0;
      }

      else
      {
        v14 = 0;
      }

      xpc_dictionary_set_BOOL(a2, "DidRecover", v14);
    }

    if (v10)
    {
      CFRelease(v10);
    }

    return v11;
  }

  else
  {

    return FigSignalErrorAtGM();
  }
}

uint64_t FigMetricErrorEventCreateInternal_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t mee_setSessionID_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t mee_setMediaTime_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigClosedCaptionGetClosedCaptionTypeAndChannelNumber(const __CFString *a1, int *a2, SInt32 *a3)
{
  if (!a1)
  {
    return 0;
  }

  v6 = 1681272888;
  v7 = @"CC";
  HasPrefix = closedCaptionHasPrefix(a1, @"CC");
  if (!HasPrefix)
  {
    v7 = @"Service";
    if (!closedCaptionHasPrefix(a1, @"Service"))
    {
      return 0;
    }

    v6 = 1681338424;
  }

  Length = CFStringGetLength(v7);
  if (!Length)
  {
    return 0;
  }

  v10 = Length;
  v17.length = CFStringGetLength(a1) - Length;
  v17.location = v10;
  v11 = CFStringCreateWithSubstring(*MEMORY[0x1E695E480], a1, v17);
  IntValue = CFStringGetIntValue(v11);
  if (HasPrefix)
  {
    v13 = 4;
  }

  else
  {
    v13 = 63;
  }

  if (IntValue < 1 || v13 < IntValue)
  {
    v15 = 0;
    if (!v11)
    {
      return v15;
    }

    goto LABEL_22;
  }

  if (a2)
  {
    *a2 = v6;
  }

  if (a3)
  {
    *a3 = IntValue;
  }

  v15 = 1;
  if (v11)
  {
LABEL_22:
    CFRelease(v11);
  }

  return v15;
}

uint64_t FigClosedCaptionGetClosedCaptionServiceFormatAndServiceIndexFromFormatDescription(const opaqueCMFormatDescription *a1, unsigned int *a2, unsigned int *a3)
{
  *buffer = 0;
  if (a1 && a2 && a3)
  {
    Extension = CMFormatDescriptionGetExtension(a1, *MEMORY[0x1E69600A0]);
    if (Extension)
    {
      v6 = Extension;
      v7 = CFGetTypeID(Extension);
      if (v7 != CFDictionaryGetTypeID())
      {
        return 4294950853;
      }

      Value = CFDictionaryGetValue(v6, @"cccc");
      if (Value)
      {
        v9 = Value;
        v10 = CFGetTypeID(Value);
        if (v10 == CFDataGetTypeID() && CFDataGetLength(v9) == 8)
        {
          v16.location = 0;
          v16.length = 4;
          CFDataGetBytes(v9, v16, &buffer[4]);
          v17.location = 4;
          v17.length = 4;
          CFDataGetBytes(v9, v17, buffer);
          v11 = bswap32(*&buffer[4]);
          v12 = bswap32(*buffer);
LABEL_11:
          result = 0;
          *a2 = v11;
          *a3 = v12;
          return result;
        }

        return 4294950853;
      }
    }

    v12 = 0;
    v11 = 0;
    goto LABEL_11;
  }

  OUTLINED_FUNCTION_0_222();

  return FigSignalErrorAtGM();
}

uint64_t FigClosedCaptionCreateClosedCaptionChannelStringFromFormatDescription(const __CFAllocator *a1, const opaqueCMFormatDescription *a2, CFStringRef *a3)
{
  v11 = 0;
  v10 = 0;
  if (a2)
  {
    if (a3)
    {
      result = FigClosedCaptionGetClosedCaptionServiceFormatAndServiceIndexFromFormatDescription(a2, &v11, &v10);
      if (result)
      {
        return result;
      }

      if (v11)
      {
        if (v11 == 1681272888)
        {
          v6 = @"CC";
        }

        else
        {
          if (v11 != 1681338424)
          {
            return 4294950853;
          }

          v6 = @"Service";
        }

        if (v10)
        {
          if (v11 == 1681272888)
          {
            v7 = 4;
          }

          else
          {
            v7 = 63;
          }

          if (v10 >= 1 && v7 >= v10)
          {
            v8 = CFStringCreateWithFormat(a1, 0, @"%@%d", v6, v10);
            goto LABEL_19;
          }

          return 4294950853;
        }
      }

      v8 = 0;
LABEL_19:
      result = 0;
      *a3 = v8;
      return result;
    }

    OUTLINED_FUNCTION_0_222();
  }

  return FigSignalErrorAtGM();
}

uint64_t cclayout_getLocationFromCommandData(const __CFDictionary *a1, void *a2, void *a3)
{
  Value = CFDictionaryGetValue(a1, @"L");
  v6 = Value;
  if (!Value)
  {
    goto LABEL_8;
  }

  v7 = CFGetTypeID(Value);
  if (v7 == CFDictionaryGetTypeID())
  {
    v8 = CFDictionaryGetValue(v6, @"x");
    v9 = CFDictionaryGetValue(v6, @"y");
    v10 = 0;
    if (!v8)
    {
      goto LABEL_9;
    }

    v11 = v9;
    if (!v9)
    {
      goto LABEL_9;
    }

    MutableCopy = CFDictionaryCreateMutableCopy(*MEMORY[0x1E695E480], 0, v6);
    CFDictionaryRemoveValue(MutableCopy, @"x");
    CFDictionaryRemoveValue(MutableCopy, @"y");
    CFDictionaryApplyFunction(MutableCopy, cclayout_warnAboutUnhandledKeyInDictionary, "CC command data location sub-dictionary (kQTClosedCaptionLocationKey)");
    CFRelease(MutableCopy);
    v13 = CFGetTypeID(v8);
    if (v13 == CFNumberGetTypeID())
    {
      v14 = CFGetTypeID(v11);
      if (v14 == CFNumberGetTypeID())
      {
        CFNumberGetValue(v8, kCFNumberSInt32Type, a2);
        CFNumberGetValue(v11, kCFNumberSInt32Type, a3);
LABEL_8:
        v10 = 1;
        goto LABEL_9;
      }
    }
  }

  v10 = 0;
LABEL_9:
  if (v6)
  {
    return v10;
  }

  else
  {
    return 0;
  }
}

uint64_t cclayout_getPixelRectForCellRect_cold_1(const __CFArray *a1, double a2)
{
  v5 = 0;
  ValueAtIndex = CFArrayGetValueAtIndex(a1, 0);
  result = cclayout_getLocationFromCommandData(ValueAtIndex, 0, &v5);
  if (result)
  {
    if (((v5 - 1) - a2))
    {
      return FigCFDictionarySetCGFloat();
    }
  }

  return result;
}

uint64_t FigTTMLTextCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLTextCopyContent_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_RenderFrame(const void *a1, int a2, uint64_t a3, void *a4, int a5, uint64_t a6, void *a7, const void *a8)
{
  v10 = a5;
  value = 0;
  v11 = MEMORY[0x1E695E480];
  if (!a2)
  {
    v23 = 0;
    if (a5)
    {
      goto LABEL_19;
    }

LABEL_16:
    v24 = 0;
    goto LABEL_31;
  }

  v15 = *MEMORY[0x1E695E480];
  Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], a2, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!Mutable)
  {
    v23 = 0;
    v24 = 0;
    goto LABEL_50;
  }

  v17 = Mutable;
  if (a2 >= 1)
  {
    v35 = v10;
    v18 = a2;
    while (1)
    {
      if (*a4)
      {
        v19 = CFArrayCreateMutable(v15, 1, MEMORY[0x1E695E9C0]);
        if (!v19)
        {
          v24 = 0;
          v28 = 0;
          v33 = 4294954510;
LABEL_45:
          v23 = v17;
          goto LABEL_32;
        }

        OUTLINED_FUNCTION_332();
        v21 = FigVCPTimedSampleCreateWithPixelBuffer(v38, v20, &value);
        if (v21)
        {
          v33 = v21;
          v24 = 0;
          v28 = 0;
          goto LABEL_45;
        }

        CFArrayAppendValue(v19, value);
        if (value)
        {
          CFRelease(value);
          value = 0;
        }

        UInt64 = FigCFNumberCreateUInt64();
        CFDictionarySetValue(v17, UInt64, v19);
        if (UInt64)
        {
          CFRelease(UInt64);
        }

        CFRelease(v19);
      }

      a3 += 4;
      ++a4;
      if (!--v18)
      {
        v23 = v17;
        v10 = v35;
        goto LABEL_18;
      }
    }
  }

  v23 = Mutable;
LABEL_18:
  v11 = MEMORY[0x1E695E480];
  if (!v10)
  {
    goto LABEL_16;
  }

LABEL_19:
  v25 = *v11;
  v24 = CFDictionaryCreateMutable(*v11, v10, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (v24)
  {
    if (v10 >= 1)
    {
      v26 = v10;
      v27 = MEMORY[0x1E695E9C0];
      do
      {
        if (*a7)
        {
          v28 = CFArrayCreateMutable(v25, 1, v27);
          if (!v28)
          {
            v19 = 0;
            goto LABEL_47;
          }

          OUTLINED_FUNCTION_332();
          v30 = FigVCPTimedSampleCreateWithSampleBuffer(v38, v29, &value);
          if (v30)
          {
            v33 = v30;
            v19 = 0;
            goto LABEL_32;
          }

          CFArrayAppendValue(v28, value);
          if (value)
          {
            CFRelease(value);
            value = 0;
          }

          v31 = FigCFNumberCreateUInt64();
          CFDictionarySetValue(v24, v31, v28);
          if (v31)
          {
            CFRelease(v31);
          }

          CFRelease(v28);
        }

        a6 += 4;
        ++a7;
        --v26;
      }

      while (v26);
    }

LABEL_31:
    OUTLINED_FUNCTION_332();
    v33 = customVideoCompositor_RenderFrameFromWindow(a1, v23, v24, a8, v38, v32, 0);
    v19 = 0;
    v28 = 0;
    goto LABEL_32;
  }

LABEL_50:
  v19 = 0;
  v28 = 0;
LABEL_47:
  v33 = 4294954510;
LABEL_32:
  if (value)
  {
    CFRelease(value);
  }

  if (v19)
  {
    CFRelease(v19);
  }

  if (v23)
  {
    CFRelease(v23);
  }

  if (v28)
  {
    CFRelease(v28);
  }

  if (v24)
  {
    CFRelease(v24);
  }

  return v33;
}

uint64_t customVideoCompositor_CancelPendingFrames()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  v1 = *(DerivedStorage + 240);
  if (v1)
  {
    v1(*(DerivedStorage + 288));
    v2 = 0;
  }

  else
  {
    v2 = 4294954787;
  }

  FigSimpleMutexUnlock();
  return v2;
}

uint64_t customVideoCompositor_AnticipateRendering()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (*(DerivedStorage + 256))
  {
    OUTLINED_FUNCTION_2_202();
    v4 = v3(v1, v2);
  }

  else
  {
    v4 = 4294954787;
  }

  FigSimpleMutexUnlock();
  return v4;
}

uint64_t customVideoCompositor_PrerollForRendering()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (*(DerivedStorage + 264))
  {
    OUTLINED_FUNCTION_2_202();
    v4 = v3(v1, v2);
  }

  else
  {
    v4 = 4294954787;
  }

  FigSimpleMutexUnlock();
  return v4;
}

uint64_t FigVideoCompositorCreateCustom_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorCreateCustom_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FigVideoCompositorCreateCustom_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorCreateCustom_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorCreateCustom_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorCreateCustom_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorCreateCustom_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_SetProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL cvc_copyPerformanceDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

uint64_t customVideoCompositor_copySuitablePixelBufferAttributes_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void customVideoCompositor_copySuitablePixelBufferAttributes_cold_2(const void *a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a2 = FigSignalErrorAtGM();

  CFRelease(a1);
}

uint64_t customVideoCompositor_copySuitablePixelBufferAttributes_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_RenderFrameFromWindow_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void customVideoCompositor_RenderFrameFromWindow_cold_2(const void *a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a2 = FigSignalErrorAtGM();
  CFRelease(a1);
}

uint64_t customVideoCompositor_RenderFrameFromWindow_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_RenderFrameFromWindow_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_RenderFrameFromWindow_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_RenderFrameFromWindow_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_RenderFrameFromWindow_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t customVideoCompositor_copyPassthroughFrame_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL customVideoCompositor_copyPassthroughFrame_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

void customVideoCompositor_copyPassthroughFrame_cold_3(uint64_t a1, void *a2)
{
  VTPixelTransferSessionSetProperty();
  VTPixelTransferSessionSetProperty();
  VTPixelTransferSessionSetProperty();
  v6 = *(a1 + 8);
  v5 = (a1 + 8);
  v4 = v6;
  if (v6)
  {
    CFRelease(v4);
    *v5 = 0;
  }

  *a2 = v5;
}

uint64_t FigVideoCompositionRemoteCopyParametersFromRenderFrameFromWindowMessage(void *a1, __CFDictionary **a2, __CFDictionary **a3, CFTypeRef *a4, uint64_t a5, int64_t *a6)
{
  v52 = 0uLL;
  v53 = 0;
  cf = 0;
  FigXPCMessageGetCMTime();
  int64 = xpc_dictionary_get_int64(a1, "FrameID");
  valuePtr = xpc_dictionary_get_int64(a1, "CompositionInstructionID");
  v12 = MEMORY[0x1E695E480];
  if (valuePtr)
  {
    v13 = *MEMORY[0x1E695E480];
    values = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt64Type, &valuePtr);
    cf = CFDictionaryCreate(v13, kFigVideoCompositionInstruction_InstructionID, &values, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (values)
    {
      CFRelease(values);
    }
  }

  else
  {
    v14 = FigXPCMessageCopyCFDictionary();
    if (v14)
    {
      v41 = v14;
      goto LABEL_47;
    }
  }

  v44 = a2;
  v45 = a3;
  v46 = a5;
  v47 = a6;
  value = xpc_dictionary_get_value(a1, "SourceTimedFramesForTracks");
  v16 = &kFigReportingEventKey_TCPINFO_ECN_PercentOutOfOrderBytes;
  v17 = &kFigReportingEventKey_TCPINFO_ECN_PercentOutOfOrderBytes;
  if (value)
  {
    v18 = value;
    count = xpc_array_get_count(value);
    if (count)
    {
      v20 = count;
      theDict = CFDictionaryCreateMutable(*v12, count, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      for (i = 0; i != v20; ++i)
      {
        dictionary = xpc_array_get_dictionary(v18, i);
        if (dictionary)
        {
          v23 = dictionary;
          xpc_dictionary_get_uint64(dictionary, "TrackID");
          array = xpc_dictionary_get_array(v23, "TimedSamples");
          v25 = remoteVideoCompositor_copyTimedSampleArrayFromXPCArray(array);
          UInt64 = FigCFNumberCreateUInt64();
          CFDictionarySetValue(theDict, UInt64, v25);
          if (UInt64)
          {
            CFRelease(UInt64);
          }

          if (v25)
          {
            CFRelease(v25);
          }
        }
      }

      v17 = &kFigReportingEventKey_TCPINFO_ECN_PercentOutOfOrderBytes;
      v16 = &kFigReportingEventKey_TCPINFO_ECN_PercentOutOfOrderBytes;
      goto LABEL_16;
    }

    v41 = 0;
LABEL_47:
    v40 = 0;
    Mutable = 0;
    goto LABEL_37;
  }

  theDict = 0;
LABEL_16:
  v27 = xpc_dictionary_get_value(a1, "SourceTimedSampleBuffersForTracks");
  if (v27)
  {
    v28 = v27;
    v29 = xpc_array_get_count(v27);
    if (!v29)
    {
      v41 = 0;
      Mutable = 0;
      v40 = theDict;
      goto LABEL_37;
    }

    v30 = v29;
    Mutable = CFDictionaryCreateMutable(*v12, v29, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    v32 = 0;
    v33 = v16[383];
    v34 = v17[384];
    do
    {
      v35 = xpc_array_get_dictionary(v28, v32);
      if (v35)
      {
        v36 = v35;
        xpc_dictionary_get_uint64(v35, v33);
        v37 = xpc_dictionary_get_array(v36, v34);
        v38 = remoteVideoCompositor_copyTimedSampleArrayFromXPCArray(v37);
        v39 = FigCFNumberCreateUInt64();
        CFDictionarySetValue(Mutable, v39, v38);
        if (v39)
        {
          CFRelease(v39);
        }

        if (v38)
        {
          CFRelease(v38);
        }
      }

      ++v32;
    }

    while (v30 != v32);
  }

  else
  {
    Mutable = 0;
  }

  v40 = theDict;
  if (v44)
  {
    *v44 = theDict;
    v40 = 0;
  }

  if (v45)
  {
    *v45 = Mutable;
    Mutable = 0;
  }

  if (a4)
  {
    *a4 = cf;
    cf = 0;
  }

  if (v46)
  {
    *v46 = v52;
    *(v46 + 16) = v53;
  }

  v41 = 0;
  if (v47)
  {
    *v47 = int64;
  }

LABEL_37:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v40)
  {
    CFRelease(v40);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  return v41;
}

__CFArray *remoteVideoCompositor_copyTimedSampleArrayFromXPCArray(void *a1)
{
  v47 = 0;
  value = 0;
  v45 = 0;
  cf = 0;
  if (!a1)
  {
    goto LABEL_46;
  }

  if (MEMORY[0x19A8D7060]() != MEMORY[0x1E69E9E50])
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    FigSignalErrorAtGM();
LABEL_46:
    LODWORD(v26) = 0;
    Mutable = 0;
    goto LABEL_33;
  }

  count = xpc_array_get_count(a1);
  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], count, MEMORY[0x1E695E9C0]);
  if (count < 1)
  {
    LODWORD(v26) = 0;
  }

  else
  {
    v4 = 0;
    v5 = MEMORY[0x1E69E9ED0];
    while (1)
    {
      v43 = 0uLL;
      v44 = 0.0;
      v6 = xpc_array_get_value(a1, v4);
      uint64 = xpc_dictionary_get_uint64(v6, "SampleType");
      if (FigXPCMessageGetCMTime())
      {
        break;
      }

      v8 = xpc_dictionary_get_value(v6, "Sample");
      if (!v8 || (v17 = v8, MEMORY[0x19A8D7060]() == v5))
      {
        OUTLINED_FUNCTION_4_163(v9, v10, v11, v12, v13, v14, v15, v16, *&v41, *(&v41 + 1), v42, *&v43);
        LODWORD(v26) = FigVCPTimedSampleCreateWithNULL(v28, &value) != 0;
      }

      else
      {
        switch(uint64)
        {
          case 1:
            if (remoteVideoCompositor_copyPixelBufferFromXPCObject(v17, &v47))
            {
              goto LABEL_30;
            }

            v26 = v47;
            OUTLINED_FUNCTION_4_163(v18, v19, v20, v21, v22, v23, v24, v25, *&v41, *(&v41 + 1), v42, *&v43);
            if (FigVCPTimedSampleCreateWithPixelBuffer(v27, v26, &value))
            {
              goto LABEL_30;
            }

            if (v26)
            {
              CFRelease(v26);
              LODWORD(v26) = 0;
              v47 = 0;
            }

            break;
          case 2:
            if (remoteVideoCompositor_copySampleBufferFromXPCData(v17))
            {
              goto LABEL_30;
            }

            OUTLINED_FUNCTION_4_163(v29, v30, v31, v32, v33, v34, v35, v36, *&v41, *(&v41 + 1), v42, *&v43);
            if (FigVCPTimedSampleCreateWithSampleBuffer(v37, v38, &value))
            {
              goto LABEL_30;
            }

            if (cf)
            {
              CFRelease(cf);
              LODWORD(v26) = 0;
              cf = 0;
            }

            else
            {
              LODWORD(v26) = 0;
            }

            break;
          case 3:
            if (FigVideoCompositorClientServerCopyTaggedPixelBufferGroupFromXPCObject(v17, &v45))
            {
              goto LABEL_30;
            }

            v26 = v45;
            v41 = v43;
            v42 = v44;
            if (FigVCPTimedSampleCreateWithTaggedBufferGroup(&v41, v45, &value))
            {
              goto LABEL_30;
            }

            if (v26)
            {
              CFRelease(v26);
              LODWORD(v26) = 0;
              v45 = 0;
            }

            break;
          default:
            goto LABEL_30;
        }
      }

      CFArrayAppendValue(Mutable, value);
      if (value)
      {
        CFRelease(value);
        value = 0;
      }

      if (count == ++v4)
      {
        goto LABEL_33;
      }
    }

LABEL_30:
    if (value)
    {
      CFRelease(value);
    }

    LODWORD(v26) = 1;
  }

LABEL_33:
  if (v47)
  {
    CFRelease(v47);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v45)
  {
    CFRelease(v45);
  }

  if (Mutable)
  {
    v39 = v26;
  }

  else
  {
    v39 = 0;
  }

  if (v39 == 1)
  {
    CFRelease(Mutable);
    return 0;
  }

  return Mutable;
}

uint64_t FigVideoCompositorClientServerCopyTaggedPixelBufferGroupFromXPCObject(void *a1, void *a2)
{
  newCollectionOut = 0;
  cf = 0;
  value = 0;
  v4 = MEMORY[0x19A8D7060]();
  if (v4 != MEMORY[0x1E69E9E80])
  {
    if (v4 == MEMORY[0x1E69E9ED0])
    {
      v5 = 0;
      Mutable = 0;
      v7 = 0;
LABEL_22:
      v15 = 0;
      v20 = 0;
      *a2 = v5;
      cf = 0;
      goto LABEL_23;
    }

    goto LABEL_37;
  }

  v8 = xpc_dictionary_get_value(a1, "TagCollections");
  v9 = MEMORY[0x19A8D7060]();
  v10 = MEMORY[0x1E69E9E50];
  if (v9 != MEMORY[0x1E69E9E50] || (v11 = xpc_dictionary_get_value(a1, "PixelBuffers"), MEMORY[0x19A8D7060]() != v10) || (count = xpc_array_get_count(v8), count != xpc_array_get_count(v11)))
  {
LABEL_37:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();
    v20 = FigSignalErrorAtGM();
    v15 = 0;
    Mutable = 0;
LABEL_38:
    v7 = 0;
    goto LABEL_23;
  }

  v13 = *MEMORY[0x1E695E480];
  Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], count, MEMORY[0x1E695E9C0]);
  if (!Mutable)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();
    v20 = FigSignalErrorAtGM();
    v15 = 0;
    goto LABEL_38;
  }

  v7 = CFArrayCreateMutable(v13, count, MEMORY[0x1E695E9C0]);
  if (!v7)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();
    v18 = FigSignalErrorAtGM();
LABEL_41:
    v20 = v18;
    v15 = 0;
    goto LABEL_23;
  }

  if (count < 1)
  {
LABEL_20:
    v18 = MEMORY[0x19A8CF050](v13, Mutable, v7, &cf);
    if (!v18)
    {
      v5 = cf;
      goto LABEL_22;
    }

    goto LABEL_41;
  }

  v14 = 0;
  while (1)
  {
    xpc_array_get_value(v8, v14);
    v15 = _CFXPCCreateCFObjectFromXPCObject();
    v16 = CMTagCollectionCreateFromData(v15, v13, &newCollectionOut);
    if (v16)
    {
      break;
    }

    CFArrayAppendValue(Mutable, newCollectionOut);
    if (newCollectionOut)
    {
      CFRelease(newCollectionOut);
      newCollectionOut = 0;
    }

    if (v15)
    {
      CFRelease(v15);
    }

    v17 = xpc_array_get_value(v11, v14);
    v18 = remoteVideoCompositor_copyPixelBufferFromXPCObject(v17, &value);
    if (v18)
    {
      goto LABEL_41;
    }

    v19 = value;
    CFArrayAppendValue(v7, value);
    if (v19)
    {
      CFRelease(v19);
      value = 0;
    }

    if (count == ++v14)
    {
      goto LABEL_20;
    }
  }

  v20 = v16;
LABEL_23:
  if (newCollectionOut)
  {
    CFRelease(newCollectionOut);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (value)
  {
    CFRelease(value);
  }

  if (v7)
  {
    CFRelease(v7);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  return v20;
}

uint64_t FigVideoCompositionRemoteUpdateParametersFromIncrementalRenderFrameFromWindowMessage(void *a1, const __CFDictionary *a2, const __CFDictionary *a3, CFTypeRef *a4, uint64_t a5, int64_t *a6)
{
  v21 = 0;
  if ((FigXPCMessageGetInt32() & 2) != 0)
  {
    FigCFDictionaryRemoveAllValues();
    FigCFDictionaryRemoveAllValues();
  }

  v22 = 0uLL;
  v23 = 0;
  FigXPCMessageGetCMTime();
  int64 = xpc_dictionary_get_int64(a1, "FrameID");
  valuePtr = xpc_dictionary_get_int64(a1, "CompositionInstructionID");
  if (valuePtr)
  {
    v13 = *MEMORY[0x1E695E480];
    cf = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt64Type, &valuePtr);
    v21 = CFDictionaryCreate(v13, kFigVideoCompositionInstruction_InstructionID, &cf, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (cf)
    {
      CFRelease(cf);
    }
  }

  else
  {
    updated = FigXPCMessageCopyCFDictionary();
    if (updated)
    {
LABEL_18:
      v17 = updated;
      goto LABEL_15;
    }
  }

  value = xpc_dictionary_get_value(a1, "SourceTimedFramesForTracks");
  updated = remoteVideoCompositor_updateTimedSamplesForTracksWithXPCReducedSamples(value, a2);
  if (updated)
  {
    goto LABEL_18;
  }

  v16 = xpc_dictionary_get_value(a1, "SourceTimedSampleBuffersForTracks");
  updated = remoteVideoCompositor_updateTimedSamplesForTracksWithXPCReducedSamples(v16, a3);
  if (updated)
  {
    goto LABEL_18;
  }

  if (a4)
  {
    *a4 = v21;
    v21 = 0;
  }

  if (a5)
  {
    *a5 = v22;
    *(a5 + 16) = v23;
  }

  v17 = 0;
  if (a6)
  {
    *a6 = int64;
  }

LABEL_15:
  if (v21)
  {
    CFRelease(v21);
  }

  return v17;
}

uint64_t FigVideoCompositorCreateRemote(uint64_t a1, uint64_t a2, void *a3)
{
  v26 = 0;
  v27 = &v26;
  v28 = 0x2000000000;
  v29 = 0;
  block = MEMORY[0x1E69E9820];
  v31 = 0x40000000;
  v32 = __remoteVideoCompositor_EnsureClientEstablished_block_invoke;
  v33 = &unk_1E7499AD0;
  v34 = &v26;
  if (qword_1ED4CBCD8 != -1)
  {
    dispatch_once(&qword_1ED4CBCD8, &block);
  }

  v4 = *(v27 + 6);
  _Block_object_dispose(&v26, 8);
  if (!v4)
  {
    v5 = FigXPCCreateBasicMessage();
    if (v5 || (v5 = FigXPCMessageSetCFDictionary(), v5))
    {
      v4 = v5;
      goto LABEL_15;
    }

    v4 = FigXPCRemoteClientSendSyncMessageCreatingReply();
    if (!v4)
    {
      uint64 = xpc_dictionary_get_uint64(0, *MEMORY[0x1E69615A0]);
      v26 = 0;
      v33 = 0;
      v34 = 0;
      FigVideoCompositorGetClassID();
      v7 = CMDerivedObjectCreate();
      if (!v7)
      {
        DerivedStorage = CMBaseObjectGetDerivedStorage();
        *DerivedStorage = uint64;
        v9 = FigSimpleMutexCreate();
        DerivedStorage[2] = v9;
        if (v9)
        {
          block = 0;
          v31 = remoteVideoCompositor_clonePendingFrame;
          v32 = remoteVideoCompositor_freePendingFrame;
          v10 = OUTLINED_FUNCTION_249();
          Mutable = CFDictionaryCreateMutable(v10, v11, 0, v12);
          DerivedStorage[13] = Mutable;
          if (Mutable)
          {
            v14 = FigSimpleMutexCreate();
            DerivedStorage[12] = v14;
            if (v14)
            {
              v15 = OUTLINED_FUNCTION_249();
              v19 = CFDictionaryCreateMutable(v15, v16, v17, v18);
              DerivedStorage[14] = v19;
              if (v19)
              {
                v20 = OUTLINED_FUNCTION_249();
                v24 = CFDictionaryCreateMutable(v20, v21, v22, v23);
                DerivedStorage[15] = v24;
                if (v24)
                {
                  FigXPCRemoteClientAssociateObject();
                  v4 = 0;
LABEL_14:
                  *a3 = v26;
                  goto LABEL_15;
                }
              }
            }
          }
        }

        fig_log_get_emitter();
        OUTLINED_FUNCTION_20_0();
        v7 = FigSignalErrorAtGM();
      }

      v4 = v7;
      goto LABEL_14;
    }
  }

LABEL_15:
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v4;
}

void *remoteVideoCompositor_copySampleBufferFromXPCData(void *a1)
{
  blockBufferOut = 0;
  HIDWORD(customBlockSource.AllocateBlock) = 0;
  *&customBlockSource.version = 0;
  customBlockSource.FreeBlock = remoteVideoCompositor_bbufUtilXPCObjectReleaser;
  customBlockSource.refCon = a1;
  bytes_ptr = xpc_data_get_bytes_ptr(a1);
  if (bytes_ptr)
  {
    length = xpc_data_get_length(a1);
    SampleBufferFromSerializedAtomDataBlockBuffer = CMBlockBufferCreateWithMemoryBlock(*MEMORY[0x1E695E480], bytes_ptr, length, 0, &customBlockSource, 0, length, 0, &blockBufferOut);
    if (!SampleBufferFromSerializedAtomDataBlockBuffer)
    {
      FigXPCRetain();
      SampleBufferFromSerializedAtomDataBlockBuffer = FigRemote_CreateSampleBufferFromSerializedAtomDataBlockBuffer();
    }

    bytes_ptr = SampleBufferFromSerializedAtomDataBlockBuffer;
  }

  if (blockBufferOut)
  {
    CFRelease(blockBufferOut);
  }

  return bytes_ptr;
}

uint64_t remoteVideoCompositor_HandleVideoCompositorClientMessage()
{
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
    return OpCode;
  }

  else
  {
    return 4294966630;
  }
}

uint64_t remoteVideoCompositor_Finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v1 = CMBaseObjectGetDerivedStorage();
  if (!*(v1 + 8))
  {
    v2 = v1;
    *(v1 + 8) = 1;
    FigXPCRemoteClientDisassociateObject();
    if (!*(v2 + 9) && !FigXPCCreateBasicMessage())
    {
      FigXPCRemoteClientSendSyncMessage();
    }
  }

  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  v3 = DerivedStorage[14];
  if (v3)
  {
    CFRelease(v3);
  }

  v4 = DerivedStorage[15];
  if (v4)
  {
    CFRelease(v4);
  }

  FigSimpleMutexDestroy();
  DerivedStorage[2] = 0;
  v5 = DerivedStorage[13];
  if (v5)
  {
    CFRelease(v5);
    DerivedStorage[13] = 0;
  }

  result = FigSimpleMutexDestroy();
  DerivedStorage[12] = 0;
  return result;
}

uint64_t remoteVideoCompositor_CopyProperty(uint64_t a1, uint64_t a2, uint64_t a3, void *a4)
{
  v8 = 0;
  ObjectID = remoteVideoCompositor_GetObjectID(a1, &v8);
  if (!ObjectID)
  {
    ObjectID = FigXPCSendStdCopyPropertyMessage();
  }

  v6 = ObjectID;
  if (a4)
  {
    *a4 = 0;
  }

  FigXPCRemoteClientKillServerOnTimeout();
  return v6;
}

uint64_t remoteVideoCompositor_SetProperty(uint64_t a1)
{
  v4 = 0;
  ObjectID = remoteVideoCompositor_GetObjectID(a1, &v4);
  if (!ObjectID)
  {
    ObjectID = FigXPCSendStdSetPropertyMessage();
  }

  v2 = ObjectID;
  FigXPCRemoteClientKillServerOnTimeout();
  return v2;
}

uint64_t remoteVideoCompositor_CompletePreroll(uint64_t a1, int a2, int a3)
{
  v8 = 0;
  ObjectID = remoteVideoCompositor_GetObjectID(a1, &v8);
  if (ObjectID)
  {
    v6 = ObjectID;
  }

  else
  {
    v6 = FigXPCCreateBasicMessage();
    if (!v6)
    {
      xpc_dictionary_set_int64(0, "RequestID", a2);
      xpc_dictionary_set_int64(0, "PrerollStatus", a3);
      v6 = FigXPCRemoteClientSendSyncMessage();
    }
  }

  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v6;
}

uint64_t remoteVideoCompositor_outputCustomFrameCommon(uint64_t a1, const void *a2, int a3, __CVBuffer *a4, OpaqueCMTaggedBufferGroup *a5)
{
  v20 = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  ObjectID = remoteVideoCompositor_GetObjectID(a1, &v20);
  if (ObjectID)
  {
    goto LABEL_16;
  }

  ObjectID = FigXPCCreateBasicMessage();
  if (ObjectID)
  {
    goto LABEL_16;
  }

  xpc_dictionary_set_int64(0, "FrameID", a2);
  xpc_dictionary_set_int64(0, "CompositionStatus", a3);
  FigSimpleMutexLock();
  Value = CFDictionaryGetValue(*(DerivedStorage + 104), a2);
  if (Value)
  {
    v13 = Value;
    UpTimeNanoseconds = FigGetUpTimeNanoseconds();
    xpc_dictionary_set_int64(0, "ProcessingTime", UpTimeNanoseconds - *v13);
  }

  CFDictionaryRemoveValue(*(DerivedStorage + 104), a2);
  FigSimpleMutexUnlock();
  if (a4)
  {
    IOSurface = CVPixelBufferGetIOSurface(a4);
    if (IOSurface)
    {
      XPCObject = IOSurfaceCreateXPCObject(IOSurface);
      if (XPCObject)
      {
        xpc_dictionary_set_value(0, "ComposedBuffer", XPCObject);
        goto LABEL_13;
      }

LABEL_17:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      v18 = FigSignalErrorAtGM();
      goto LABEL_14;
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    ObjectID = FigSignalErrorAtGM();
LABEL_16:
    v18 = ObjectID;
    goto LABEL_14;
  }

  if (!a5)
  {
    goto LABEL_13;
  }

  v17 = FigVideoCompositorClientServerCopyTaggedPixelBufferGroupAsXPCObject(a5);
  if (!v17)
  {
    goto LABEL_17;
  }

  xpc_dictionary_set_value(0, "ComposedTaggedBufferGroup", v17);
LABEL_13:
  v18 = FigXPCRemoteClientSendSyncMessage();
LABEL_14:
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRemoteClientKillServerOnTimeout();
  return v18;
}

uint64_t remoteVideoCompositor_copyPixelBufferFromXPCObject_cold_1(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t remoteVideoCompositor_copyPixelBufferFromXPCObject_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteVideoCompositor_copyPixelBufferFromXPCObject_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteVideoCompositor_updateTimedSamplesForTracksWithXPCReducedSamples_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteVideoCompositor_updateTimedSamplesForTracksWithXPCReducedSamples_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteVideoCompositor_updateTimedSamplesForTracksWithXPCReducedSamples_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void remoteVideoCompositor_updateTimedSamplesForTracksWithXPCReducedSamples_cold_4(const void *a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a2 = FigSignalErrorAtGM();

  CFRelease(a1);
}

uint64_t remoteVideoCompositor_updateTimedSamplesForTracksWithXPCReducedSamples_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorRemoteGetObjectID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVideoCompositorRemoteGetObjectID_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteVideoCompositor_GetObjectID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteVideoCompositor_GetObjectID_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t remoteVideoCompositor_deepCopySourceTimedSamplesForTrackIDs_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t figWarehouseRenderPipelineReset(uint64_t a1, uint64_t a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  FigCFArrayRemoveAllValues();
  FigCFArrayRemoveAllValues();
  CFArrayRemoveAllValues(*(DerivedStorage + 128));
  FigSimpleMutexUnlock();
  result = CMBufferQueueReset(*(DerivedStorage + 16));
  if (!result)
  {
    v5 = *(DerivedStorage + 144);
    v6 = *(*(CMBaseObjectGetVTable() + 16) + 64);
    if (v6)
    {
      result = v6(v5, a2);
      if (!result)
      {
        v7 = *(DerivedStorage + 40);
        v8 = *(*(CMBaseObjectGetVTable() + 16) + 16);
        if (v8)
        {
          v8(v7);
        }

        return 0;
      }
    }

    else
    {
      return 4294954514;
    }
  }

  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_5(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_7(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_8(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_9(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigWarehouseRenderPipelineCreate_cold_10(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figWarehouseRenderPipelineStartAndUseTimebaseAtTransition_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figWarehouseRenderPipelineCopyProperty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figWarehouseRenderPipelineCopyProperty_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figWarehouseRenderPipelineSetProperty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t srcnull_finalize_cold_1()
{
  os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
  os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
  return fig_log_call_emit_and_clean_up_after_send_and_compose();
}

xpc_object_t FigVideoCompositorClientServerCopyTaggedPixelBufferGroupAsXPCObject(OpaqueCMTaggedBufferGroup *a1)
{
  Count = CMTaggedBufferGroupGetCount(a1);
  if (!a1)
  {
LABEL_16:
    empty = 0;
    goto LABEL_14;
  }

  v3 = Count;
  empty = xpc_dictionary_create_empty();
  v5 = OUTLINED_FUNCTION_10_82();
  v6 = OUTLINED_FUNCTION_10_82();
  if (v3 >= 1)
  {
    v7 = 0;
    v8 = *MEMORY[0x1E695E480];
    while (1)
    {
      CVPixelBufferAtIndex = CMTaggedBufferGroupGetCVPixelBufferAtIndex(a1, v7);
      TagCollectionAtIndex = CMTaggedBufferGroupGetTagCollectionAtIndex(a1, v7);
      if (!CVPixelBufferAtIndex)
      {
        break;
      }

      v11 = TagCollectionAtIndex;
      v12 = CFGetTypeID(CVPixelBufferAtIndex);
      if (v12 != CVPixelBufferGetTypeID())
      {
        break;
      }

      v13 = CMTagCollectionCopyAsData(v11, v8);
      v14 = _CFXPCCreateXPCObjectFromCFObject();
      if (v13)
      {
        CFRelease(v13);
      }

      xpc_array_append_value(v5, v14);
      if (v14)
      {
        xpc_release(v14);
      }

      v15 = serverVideoCompositor_copyPixelBufferAsXPCObject(CVPixelBufferAtIndex);
      if (!v15)
      {
        v15 = xpc_null_create();
      }

      xpc_array_append_value(v6, v15);
      FigXPCRelease();
      if (v3 == ++v7)
      {
        goto LABEL_13;
      }
    }

    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_2();
    FigSignalErrorAtGM();
    goto LABEL_16;
  }

LABEL_13:
  xpc_dictionary_set_value(empty, "TagCollections", v5);
  xpc_dictionary_set_value(empty, "PixelBuffers", v6);
LABEL_14:
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRelease();
  return empty;
}

uint64_t FigVideoCompositionServerCreateRenderFrameFromWindowMessage(uint64_t a1, const __CFDictionary *a2, const __CFDictionary *a3, uint64_t a4, uint64_t a5, int64_t a6)
{
  if (!FigXPCCreateBasicMessage())
  {
    OUTLINED_FUNCTION_3_167();
    FigXPCMessageSetCMTime();
    xpc_dictionary_set_int64(0, "FrameID", a6);
    if (a4)
    {
      if (FigCFDictionaryGetInt64IfPresent())
      {
        xpc_dictionary_set_int64(0, "CompositionInstructionID", 0);
      }

      else if (FigXPCMessageSetCFDictionary())
      {
        goto LABEL_10;
      }
    }

    if (FigCFDictionaryGetCount())
    {
      empty = xpc_array_create_empty();
      OUTLINED_FUNCTION_0_223();
      CFDictionaryApplyFunction(a2, v11, empty);
      xpc_dictionary_set_value(0, "SourceTimedFramesForTracks", empty);
    }

    if (FigCFDictionaryGetCount())
    {
      v12 = xpc_array_create_empty();
      OUTLINED_FUNCTION_0_223();
      CFDictionaryApplyFunction(a3, v13, v12);
      xpc_dictionary_set_value(0, "SourceTimedSampleBuffersForTracks", v12);
    }
  }

LABEL_10:
  FigXPCRelease();
  FigXPCRelease();
  return 0;
}

uint64_t AddTrackTimedSamplesToXPCArray(const void *a1, CFTypeRef cf, void *a3)
{
  if (!cf)
  {
    goto LABEL_42;
  }

  v6 = CFGetTypeID(cf);
  if (v6 != CFArrayGetTypeID())
  {
    goto LABEL_41;
  }

  if (!a1)
  {
    goto LABEL_41;
  }

  v7 = CFGetTypeID(a1);
  if (v7 != CFNumberGetTypeID())
  {
    goto LABEL_41;
  }

  if (!CFArrayGetCount(cf))
  {
    goto LABEL_42;
  }

  empty = xpc_dictionary_create_empty();
  if (!empty || (UInt64 = FigCFNumberGetUInt64(), xpc_dictionary_set_uint64(empty, "TrackID", UInt64), (v10 = OUTLINED_FUNCTION_10_82()) == 0))
  {
LABEL_41:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    FigSignalErrorAtGM();
    goto LABEL_42;
  }

  v28 = a3;
  Count = CFArrayGetCount(cf);
  if (Count < 1)
  {
LABEL_37:
    FigXPCRelease();
    v24 = v28;
    goto LABEL_38;
  }

  v12 = Count;
  v13 = 0;
  destructor = *MEMORY[0x1E69E9660];
  v14 = MEMORY[0x1E6960C70];
  while (1)
  {
    ValueAtIndex = CFArrayGetValueAtIndex(cf, v13);
    if (!ValueAtIndex)
    {
      break;
    }

    v16 = ValueAtIndex;
    v17 = CFGetTypeID(ValueAtIndex);
    if (v17 != FigVCPTimedSampleGetTypeID())
    {
      break;
    }

    v32 = *v14;
    v33 = *(v14 + 2);
    v18 = xpc_dictionary_create_empty();
    if (v18)
    {
      if (FigVCPTimedSampleContainsNULL(v16))
      {
        v19 = 0;
        v20 = 0;
LABEL_29:
        FigVCPTimedSampleGetPTS(v16, &v32);
        *buffer = v32;
        v30 = v33;
        FigXPCMessageSetCMTime();
        xpc_dictionary_set_uint64(v18, "SampleType", v20);
        xpc_dictionary_set_value(v18, "Sample", v19);
        v23 = v18;
        goto LABEL_30;
      }

      if (FigVCPTimedSampleContainsPixelBuffer(v16))
      {
        buffer[0] = 0;
        if (!FigVCPTimedSampleGetPixelBuffer(v16, buffer))
        {
          v19 = serverVideoCompositor_copyPixelBufferAsXPCObject(buffer[0]);
          v20 = 1;
          goto LABEL_29;
        }
      }

      else if (FigVCPTimedSampleContainsTaggedBufferGroup(v16))
      {
        buffer[0] = 0;
        if (!FigVCPTimedSampleGetTaggedBufferGroup(v16, buffer))
        {
          v19 = FigVideoCompositorClientServerCopyTaggedPixelBufferGroupAsXPCObject(buffer[0]);
          v20 = 3;
          goto LABEL_29;
        }
      }

      else if (FigVCPTimedSampleContainsSampleBuffer(v16))
      {
        v31 = 0;
        if (!FigVCPTimedSampleGetSampleBuffer(v16, &v31))
        {
          buffer[0] = 0;
          v34 = 0;
          if (!OUTLINED_FUNCTION_9_88())
          {
            v21 = dispatch_data_create(buffer[0], v34, 0, destructor);
            if (v21)
            {
              v22 = v21;
              v34 = 0;
              buffer[0] = 0;
              v19 = xpc_data_create_with_dispatch_data(v21);
              dispatch_release(v22);
              if (v19)
              {
LABEL_26:
                if (buffer[0])
                {
                  MEMORY[0x19A8D6C70](*MEMORY[0x1E69E9A60], buffer[0], v34);
                }

                v20 = 2;
                goto LABEL_29;
              }
            }

            fig_log_get_emitter();
            OUTLINED_FUNCTION_0_121();
            FigSignalErrorAtGM();
          }

          v19 = 0;
          goto LABEL_26;
        }
      }
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_121();
      FigSignalErrorAtGM();
    }

    v23 = 0;
LABEL_30:
    FigXPCRelease();
    FigXPCRelease();
    if (!v23)
    {
      break;
    }

    xpc_array_append_value(v10, v23);
    xpc_release(v23);
    if (v12 == ++v13)
    {
      goto LABEL_37;
    }
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_121();
  v25 = FigSignalErrorAtGM();
  FigXPCRelease();
  v24 = v28;
  if (v25)
  {
    goto LABEL_42;
  }

LABEL_38:
  xpc_dictionary_set_value(empty, "TimedSamples", v10);
  xpc_array_append_value(v24, empty);
LABEL_42:
  FigXPCRelease();
  return FigXPCRelease();
}

xpc_object_t FigVideoCompositionServerCreateIncrementalRenderFrameFromWindowMessage(uint64_t a1, const void *a2, const void **a3, const void *a4, const void **a5, uint64_t a6, uint64_t a7, int64_t a8, int a9, _DWORD *a10)
{
  v26 = 0;
  xdict = 0;
  if (!a3 || !a5)
  {
    fig_log_get_emitter();
    FigSignalErrorAtGM();
    goto LABEL_27;
  }

  if (*a10 == a9)
  {
    v16 = *a3;
  }

  else
  {
    v16 = 0;
  }

  if (*a10 == a9)
  {
    v17 = *a5;
  }

  else
  {
    v17 = 0;
  }

  if (!FigCFDictionaryGetCount())
  {
    FigCFDictionaryGetCount();
  }

  if (FigXPCCreateBasicMessage())
  {
    goto LABEL_27;
  }

  FigXPCMessageSetCMTime();
  xpc_dictionary_set_int64(xdict, "FrameID", a8);
  v18 = a4;
  if (a6)
  {
    if (FigCFDictionaryGetInt64IfPresent())
    {
      xpc_dictionary_set_int64(xdict, "CompositionInstructionID", 0);
      goto LABEL_15;
    }

    if (FigXPCMessageSetCFDictionary())
    {
LABEL_27:
      ReducedTimedSamplesForTracks = 0;
      v22 = 0;
      goto LABEL_20;
    }
  }

LABEL_15:
  FigXPCMessageSetInt32();
  ReducedTimedSamplesForTracks = serverVideoCompositor_createReducedTimedSamplesForTracks(a2, v16, &v26 + 1);
  empty = xpc_array_create_empty();
  if (ReducedTimedSamplesForTracks)
  {
    OUTLINED_FUNCTION_0_223();
    CFDictionaryApplyFunction(ReducedTimedSamplesForTracks, v21, empty);
  }

  xpc_dictionary_set_value(xdict, "SourceTimedFramesForTracks", empty);
  v22 = serverVideoCompositor_createReducedTimedSamplesForTracks(a4, v17, &v26);
  v23 = xpc_array_create_empty();
  if (v22)
  {
    OUTLINED_FUNCTION_0_223();
    CFDictionaryApplyFunction(v22, v24, v23);
  }

  xpc_dictionary_set_value(xdict, "SourceTimedSampleBuffersForTracks", v23);
  serverVideoCompositor_releaseAssignAndDeepCopySourceTimedSamplesForTrackIDs(a3, a2);
  serverVideoCompositor_releaseAssignAndDeepCopySourceTimedSamplesForTrackIDs(a5, v18);
  *a10 = a9;
LABEL_20:
  FigXPCRelease();
  FigXPCRelease();
  if (ReducedTimedSamplesForTracks)
  {
    CFRelease(ReducedTimedSamplesForTracks);
  }

  if (v22)
  {
    CFRelease(v22);
  }

  return xdict;
}

CFMutableDictionaryRef serverVideoCompositor_createReducedTimedSamplesForTracks(const void *a1, uint64_t a2, _DWORD *a3)
{
  v8 = 0;
  v9 = &v8;
  v10 = 0x2000000000;
  v11 = 0;
  if (FigCFDictionaryGetCount() < 1)
  {
    Mutable = 0;
  }

  else
  {
    v5 = CFGetAllocator(a1);
    Mutable = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      FigCFDictionaryApplyBlock();
      if (a3)
      {
        *a3 = *(v9 + 6);
      }
    }

    else
    {
      fig_log_get_emitter();
      FigSignalErrorAtGM();
    }
  }

  _Block_object_dispose(&v8, 8);
  return Mutable;
}

uint64_t HandleVideoCompositorMessage()
{
  OpCode = FigXPCMessageGetOpCode();
  if (OpCode)
  {
    return OpCode;
  }

  else
  {
    return 4294966630;
  }
}

__CVBuffer *serverVideoCompositor_copyPixelBufferAsXPCObject(__CVBuffer *result)
{
  if (result)
  {
    IOSurface = CVPixelBufferGetIOSurface(result);
    if (!IOSurface || (result = IOSurfaceCreateXPCObject(IOSurface)) == 0)
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      FigSignalErrorAtGM();
      return 0;
    }
  }

  return result;
}

uint64_t VCServerRenderFrame(CFMutableSetRef *a1, int a2, const void *a3, CVPixelBufferRef *a4, int a5, const void *a6, void *a7, const __CFDictionary *a8, uint64_t a9, const void *a10)
{
  LODWORD(v16) = a2;
  xdict = 0;
  v18 = FigXPCCreateBasicMessage();
  if (v18)
  {
    goto LABEL_43;
  }

  *value = *a9;
  v34 = *(a9 + 16);
  FigXPCMessageSetCMTime();
  xpc_dictionary_set_int64(xdict, "FrameID", a10);
  if (a8)
  {
    value[0] = 0;
    if (CFDictionaryGetValueIfPresent(a8, @"InstructionID", value))
    {
      valuePtr = 0;
      CFNumberGetValue(value[0], kCFNumberSInt64Type, &valuePtr);
      if (!valuePtr)
      {
LABEL_42:
        fig_log_get_emitter();
        OUTLINED_FUNCTION_3_2();
        v18 = FigSignalErrorAtGM();
        goto LABEL_43;
      }

      xpc_dictionary_set_int64(xdict, "CompositionInstructionID", valuePtr);
    }

    else
    {
      v18 = FigXPCMessageSetCFDictionary();
      if (v18)
      {
LABEL_43:
        v31 = v18;
        goto LABEL_37;
      }
    }
  }

  if (v16)
  {
    if (!a3)
    {
      goto LABEL_41;
    }

    if (a4)
    {
      xpc_dictionary_set_data(xdict, "SourceTrackIDArray", a3, 4 * v16);
      v19 = OUTLINED_FUNCTION_10_82();
      if (v19)
      {
        if (v16 >= 1)
        {
          v16 = v16;
          while (!*a4)
          {
            v22 = xpc_null_create();
            xpc_array_append_value(v19, v22);
            if (v22)
            {
              goto LABEL_18;
            }

LABEL_19:
            ++a4;
            if (!--v16)
            {
              goto LABEL_20;
            }
          }

          IOSurface = CVPixelBufferGetIOSurface(*a4);
          if (!IOSurface)
          {
            goto LABEL_41;
          }

          XPCObject = IOSurfaceCreateXPCObject(IOSurface);
          if (!XPCObject)
          {
            goto LABEL_41;
          }

          v22 = XPCObject;
          xpc_array_append_value(v19, XPCObject);
LABEL_18:
          xpc_release(v22);
          goto LABEL_19;
        }

LABEL_20:
        xpc_dictionary_set_value(xdict, "SourceFrameArray", v19);
        xpc_dictionary_set_data(xdict, "SourceSampleBufferTrackIDArray", a6, 4 * a5);
        v23 = OUTLINED_FUNCTION_10_82();
        if (v23)
        {
          if (a5 >= 1)
          {
            v24 = *MEMORY[0x1E69E9660];
            v25 = a5;
            v26 = MEMORY[0x1E69E9A60];
            do
            {
              if (!*a7)
              {
                goto LABEL_31;
              }

              value[0] = 0;
              valuePtr = 0;
              v27 = OUTLINED_FUNCTION_9_88();
              if (!v27)
              {
                v28 = dispatch_data_create(value[0], valuePtr, 0, v24);
                if (v28)
                {
                  v29 = v28;
                  valuePtr = 0;
                  value[0] = 0;
                  v30 = xpc_data_create_with_dispatch_data(v28);
                  dispatch_release(v29);
                  if (v30)
                  {
                    xpc_array_append_value(v23, v30);
                    xpc_release(v30);
                    v31 = 0;
                    goto LABEL_28;
                  }
                }

                fig_log_get_emitter();
                OUTLINED_FUNCTION_3_2();
                v27 = FigSignalErrorAtGM();
              }

              v31 = v27;
LABEL_28:
              if (value[0])
              {
                MEMORY[0x19A8D6C70](*v26, value[0], valuePtr);
              }

              if (v31)
              {
                goto LABEL_37;
              }

LABEL_31:
              ++a7;
              --v25;
            }

            while (v25);
          }

          xpc_dictionary_set_value(xdict, "SourceSampleBufferArray", v23);
          goto LABEL_36;
        }
      }

LABEL_41:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_3_2();
      v31 = FigSignalErrorAtGM();
      goto LABEL_37;
    }

    goto LABEL_42;
  }

LABEL_36:
  AddNewPendingFrame(a1, a10);
  xpc_connection_send_message(a1[4], xdict);
  v31 = 0;
LABEL_37:
  FigXPCRelease();
  FigXPCRelease();
  FigXPCRelease();
  return v31;
}

uint64_t VCServerCancelPendingFrames(uint64_t a1)
{
  v2 = FigXPCCreateBasicMessage();
  if (!v2)
  {
    xpc_connection_send_message(*(a1 + 32), 0);
  }

  FigXPCRelease();
  return v2;
}

uint64_t VCServerAnticipateRendering()
{
  OUTLINED_FUNCTION_12_79();
  v1 = FigXPCCreateBasicMessage();
  if (!v1)
  {
    OUTLINED_FUNCTION_7_113();
    FigXPCMessageSetCMTime();
    OUTLINED_FUNCTION_3_167();
    FigXPCMessageSetCMTime();
    OUTLINED_FUNCTION_8_94();
    FigXPCMessageSetCMTime();
    FigXPCMessageSetCMTime();
    xpc_connection_send_message(*(v0 + 32), message);
  }

  FigXPCRelease();
  return v1;
}

uint64_t VCServerPrerollForRendering(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, int a6)
{
  OUTLINED_FUNCTION_12_79();
  v8 = FigXPCCreateBasicMessage();
  if (!v8)
  {
    FigXPCMessageSetCMTime();
    OUTLINED_FUNCTION_7_113();
    FigXPCMessageSetCMTime();
    OUTLINED_FUNCTION_3_167();
    FigXPCMessageSetCMTime();
    OUTLINED_FUNCTION_8_94();
    FigXPCMessageSetCMTime();
    xpc_dictionary_set_int64(xdict, "RequestID", a6);
    xpc_connection_send_message(*(v6 + 32), xdict);
  }

  FigXPCRelease();
  return v8;
}

uint64_t serverVideoCompositor_releaseAssignAndDeepCopySourceTimedSamplesForTrackIDs_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigVideoCompositorServerRetainVideoCompositorForID_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __serverVideoCompositor_createReducedTimedSamplesForTracks_block_invoke_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t VCServerCopyPerformanceDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t LookupAndRetainVCByObjectIDForConnection_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigUpstreamMonitor_BeginMonitoring(uint64_t result)
{
  if (result)
  {
    if (*result)
    {
      return OUTLINED_FUNCTION_1_205(*(result + 16), *result);
    }
  }

  return result;
}

uint64_t FigUpstreamMonitor_EndMonitoring(uint64_t result)
{
  if (result)
  {
    if (*result)
    {
      return OUTLINED_FUNCTION_1_205(*(result + 24), *result);
    }
  }

  return result;
}

void *FigUpstreamMonitor_GetStatus(void *result, uint64_t a2, _DWORD *a3, _DWORD *a4, _BYTE *a5)
{
  v8 = result;
  v13 = 0;
  v12 = 0;
  v11 = 0;
  if (!result)
  {
    goto LABEL_6;
  }

  result = *result;
  if (!*v8)
  {
    LOBYTE(v8) = 0;
LABEL_6:
    v9 = 0;
    v10 = 0;
    goto LABEL_4;
  }

  result = (v8[4])(result);
  v9 = v13;
  v10 = HIDWORD(v13);
  LOBYTE(v8) = v12;
LABEL_4:
  *a3 = v10;
  *a4 = v9;
  *a5 = v8;
  return result;
}

uint64_t FigUpstreamMonitor_GetExternalProtectionState(uint64_t result, int a2)
{
  v7 = 0;
  if (result)
  {
    if (*result)
    {
      result = (*(result + 40))(*result, &v7);
      if (a2 != 7 && result == 2)
      {
        if ((a2 - 1) >= 2)
        {
          v4 = 1;
        }

        else
        {
          v4 = 2;
        }

        if (a2 == 1)
        {
          v5 = 2;
        }

        else
        {
          v5 = 1;
        }

        if (v7 == 1)
        {
          v6 = v5;
        }

        else
        {
          v6 = 2;
        }

        if (v7 == 2)
        {
          v6 = v4;
        }

        if (v7)
        {
          return v6;
        }

        else
        {
          return 0;
        }
      }
    }

    else
    {
      return 0;
    }
  }

  return result;
}

uint64_t FigVTTStringifyFigGeometryDimensionAndAppend_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTStringifyFigGeometryPointAndAppend_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

CFStringRef FigVTTCopyCMTimeAsTimeStamp_cold_1(CFStringRef *a1)
{
  FigSignalErrorAtGM();
  result = CFStringCreateWithFormat(*MEMORY[0x1E695E480], 0, &stru_1F0B1AFB8);
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_BackgroundColor_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_BackgroundColor_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_WritingMode_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_TextColor_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_TextColor_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_FontWeight_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_FontStyle_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_Decoration_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_TextAlign_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_FontFamily_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_FontFamily_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_FontFamily_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapPropertyToAttribute_FontSize_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_BackgroundColor_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_WritingMode_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_TextColor_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_FontWeight_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_FontStyle_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_Decoration_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_TextAlign_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_FontFamily_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterMapAttributeToCSS_FontSize_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figURLStorageSessionNSCommonCreate(void *a1, uint64_t a2, void *a3, void *a4)
{
  if (_MergedGlobals_150 != -1)
  {
    dispatch_once(&_MergedGlobals_150, &__block_literal_global_13_0);
  }

  if (!CMDerivedObjectCreate())
  {
    CMBaseObjectGetDerivedStorage();
    *a1 = [OUTLINED_FUNCTION_398() copy];
    a1[1] = a3;
    a1[2] = a4;
  }

  return 0;
}

uint64_t figURLStorageSessionCopyCookieDescArrayForURL(uint64_t a1, const __CFURL *a2, CFMutableArrayRef *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a3)
  {
    v6 = DerivedStorage;
    *a3 = 0;
    if (FigCFHTTPIsHTTPBasedURL(a2))
    {
      Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
      if (Mutable)
      {
        v8 = Mutable;
        v9 = objc_autoreleasePoolPush();
        if (!v6 || (v10 = [*v6 HTTPCookieStorage]) == 0)
        {
          v10 = [objc_msgSend(MEMORY[0x1E695AC80] "defaultSessionConfiguration")];
        }

        [v10 cookiesForURL:a2];
        OUTLINED_FUNCTION_2_49();
        v14 = 3221225472;
        v15 = __figURLStorageSessionCopyCookieDescArrayForURL_block_invoke;
        v16 = &__block_descriptor_40_e15_v32__0_8Q16_B24l;
        v17 = v8;
        [v11 enumerateObjectsUsingBlock:v13];
        objc_autoreleasePoolPop(v9);
        result = 0;
        *a3 = v8;
      }

      else
      {
        OUTLINED_FUNCTION_243();
        result = FigSignalErrorAtGM();
        *a3 = 0;
      }
    }

    else
    {
      return 4294954513;
    }
  }

  else
  {
    OUTLINED_FUNCTION_243();

    return FigSignalErrorAtGM();
  }

  return result;
}

uint64_t figURLStorageSessionCopyCredentialPlistForURL(uint64_t a1, const __CFURL *a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a3)
  {
    v6 = DerivedStorage;
    *a3 = 0;
    if (!FigCFHTTPIsHTTPBasedURL(a2))
    {
      return 4294954513;
    }

    v7 = objc_autoreleasePoolPush();
    if ((v6 && (v8 = [*v6 URLCredentialStorage]) != 0 || (v8 = objc_msgSend(MEMORY[0x1E695AC50], "sharedCredentialStorage")) != 0) && (v9 = v8, v10 = objc_msgSend(v8, "allCredentials"), objc_msgSend(MEMORY[0x1E695DF90], "dictionaryWithCapacity:", 0)))
    {
      OUTLINED_FUNCTION_2_49();
      v16 = 3221225472;
      v17 = __figURLStorageSessionCopyCredentialPlistForURL_block_invoke;
      v18 = &unk_1E7499D68;
      v19 = a2;
      v20 = v9;
      v21 = v11;
      [v10 enumerateKeysAndObjectsUsingBlock:v15];
      v12 = -12783;
    }

    else
    {
      OUTLINED_FUNCTION_243();
      v12 = FigSignalErrorAtGM();
    }

    if (*a3)
    {
      v13 = 0;
    }

    else
    {
      v13 = v12;
    }

    objc_autoreleasePoolPop(v7);
    return v13;
  }

  else
  {
    OUTLINED_FUNCTION_243();

    return FigSignalErrorAtGM();
  }
}

uint64_t __figURLStorageSessionCopyCredentialPlistForURL_block_invoke(id *a1, void *a2, void *a3)
{
  if (([a2 isProxy] & 1) != 0 || objc_msgSend(a2, "serverTrust") || (objc_msgSend(objc_msgSend(a1[4], "port"), "integerValue"), result = objc_msgSend(OUTLINED_FUNCTION_398(), "port"), v3 == result) && (objc_msgSend(a1[4], "host"), (result = objc_msgSend(v3, "caseInsensitiveCompare:", objc_msgSend(OUTLINED_FUNCTION_398(), "host"))) == 0) && (objc_msgSend(a1[4], "scheme"), (result = objc_msgSend(v3, "caseInsensitiveCompare:", objc_msgSend(OUTLINED_FUNCTION_398(), "protocol"))) == 0))
  {
    v7 = FigNSHTTPCreateSerializedObjectFromNSSecureCoding(a2);
    v8 = [MEMORY[0x1E695DF70] arrayWithCapacity:0];
    v9 = [a1[5] defaultCredentialForProtectionSpace:a2];
    v10 = v9;
    if (v9)
    {
      result = FigNSHTTPCreateSerializedObjectFromNSSecureCoding(v9);
    }

    else
    {
      result = [MEMORY[0x1E695DEF0] dataWithBytes:0 length:0];
    }

    if (result)
    {
      [v8 insertObject:result atIndex:0];
      v12[0] = MEMORY[0x1E69E9820];
      v12[1] = 3221225472;
      v12[2] = __figURLStorageSessionCopyCredentialPlistForURL_block_invoke_2;
      v12[3] = &unk_1E7499D40;
      v12[4] = v10;
      v12[5] = v8;
      [a3 enumerateKeysAndObjectsUsingBlock:v12];
      return [a1[6] setObject:v8 forKey:v7];
    }
  }

  return result;
}

uint64_t _FigURLStorageSessionNSCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigURLStorageSessionNSCreate_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figURLStorageSessionSetCredentialPlist_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figURLStorageSessionSetCredentialPlist_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figURLStorageSessionSetCredentialPlist_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figURLStorageSessionSetCredentialPlist_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figURLStorageSessionCreateHTTPSession_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAudioSessionClockCreate(uint64_t a1, const void *a2, int a3, CFTypeRef *a4)
{
  v25 = *MEMORY[0x1E69E9840];
  context = objc_autoreleasePoolPush();
  cf = 0;
  v22 = 0;
  v20 = 0;
  FigNote_AllowInternalDefaultLogs();
  OUTLINED_FUNCTION_7_25();
  fig_note_initialize_category_with_default_work_cf();
  OUTLINED_FUNCTION_7_25();
  fig_note_initialize_category_with_default_work_cf();
  if (!a2 || !a4)
  {
    goto LABEL_14;
  }

  if (a3)
  {
    if (a3 == 1)
    {
      v7 = kFigAudioSessionProperty_InputTimeObserver;
      goto LABEL_7;
    }

LABEL_14:
    OUTLINED_FUNCTION_243();
    v12 = FigSignalErrorAtGM();
    goto LABEL_15;
  }

  v7 = kFigAudioSessionProperty_OutputTimeObserver;
LABEL_7:
  v8 = *v7;
  v9 = *(CMBaseObjectGetVTable() + 16);
  if (!v9)
  {
    TimeCallback = 4294948075;
    goto LABEL_19;
  }

  v10 = *(v9 + 8);
  if (!v10)
  {
    TimeCallback = 4294948071;
    goto LABEL_19;
  }

  v11 = *MEMORY[0x1E695E480];
  v12 = v10(a2, v8, *MEMORY[0x1E695E480], &v22);
  if (v12)
  {
LABEL_15:
    TimeCallback = v12;
    goto LABEL_19;
  }

  v13 = *(CMBaseObjectGetVTable() + 16);
  if (v13)
  {
    v14 = *(v13 + 8);
    if (v14)
    {
      v14(a2, @"FAS_CoreSessionID", v11, &v20);
    }
  }

  FigCFNumberGetUInt64();
  CMClockGetHostTimeClock();
  v23 = *MEMORY[0x1E6960C70];
  v24 = *(MEMORY[0x1E6960C70] + 16);
  TimeCallback = FigDerivedClockCreateWithGetTimeCallback();
  if (!TimeCallback)
  {
    DerivedStorage = FigDerivedClockGetDerivedStorage();
    *(DerivedStorage + 16) = v22;
    *(DerivedStorage + 8) = CFRetain(a2);
    *a4 = cf;
    cf = 0;
  }

LABEL_19:
  if (dword_1EAF17CB8)
  {
    os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
    os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, OS_LOG_TYPE_DEFAULT);
    fig_log_call_emit_and_clean_up_after_send_and_compose();
  }

  if (cf)
  {
    CFRelease(cf);
  }

  if (v20)
  {
    CFRelease(v20);
  }

  objc_autoreleasePoolPop(context);
  return TimeCallback;
}

uint64_t FigAudioSessionClockCopyClockConfiguration(uint64_t a1, CFMutableDictionaryRef *a2)
{
  cf = 0;
  v17 = 0;
  if (!FigDerivedClockVerifyCallbacksMatch())
  {
    v9 = FigSignalErrorAtGM();
    goto LABEL_19;
  }

  DerivedStorage = FigDerivedClockGetDerivedStorage();
  v4 = *(DerivedStorage + 8);
  if (!v4)
  {
    goto LABEL_11;
  }

  v5 = DerivedStorage;
  v6 = *(CMBaseObjectGetVTable() + 16);
  if (!v6)
  {
    goto LABEL_11;
  }

  v7 = *(v6 + 8);
  if (!v7)
  {
LABEL_17:
    v13 = 4294948071;
    goto LABEL_12;
  }

  v8 = *MEMORY[0x1E695E480];
  v9 = v7(v4, @"FAS_CoreSessionID", *MEMORY[0x1E695E480], &v17);
  if (v9)
  {
LABEL_19:
    v13 = v9;
    goto LABEL_12;
  }

  v10 = *(v5 + 8);
  if (!v10 || (v11 = *(CMBaseObjectGetVTable() + 16)) == 0)
  {
LABEL_11:
    v13 = 4294948075;
    goto LABEL_12;
  }

  v12 = *(v11 + 16);
  if (!v12)
  {
    goto LABEL_17;
  }

  v13 = v12(v10, @"FAS_AudioSessionID", v8, &cf);
  if (!v13)
  {
    Mutable = CFDictionaryCreateMutable(v8, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    FigCFDictionarySetValue();
    FigCFDictionarySetValue();
    FigCFDictionarySetInt32();
    *a2 = Mutable;
  }

LABEL_12:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v17)
  {
    CFRelease(v17);
  }

  return v13;
}

BOOL FigAudioSessionClockConfigurationCanUseFigAudioSessionToCreateClock(uint64_t a1, _BOOL8 a2)
{
  cf = 0;
  if (!FigCFDictionaryGetValueIfPresent())
  {
    return 0;
  }

  if (!a2)
  {
    return a2;
  }

  v3 = *(CMBaseObjectGetVTable() + 16);
  if (!v3)
  {
    return 0;
  }

  v4 = *(v3 + 8);
  if (!v4)
  {
    return 0;
  }

  v5 = v4(a2, @"FAS_CoreSessionID", *MEMORY[0x1E695E480], &cf);
  v6 = cf;
  if (v5)
  {
    a2 = 0;
    if (!cf)
    {
      return a2;
    }

    goto LABEL_7;
  }

  a2 = FigCFEqual() != 0;
  v6 = cf;
  if (cf)
  {
LABEL_7:
    CFRelease(v6);
  }

  return a2;
}

uint64_t FigAudioSessionClockCreateForAVAudioSession(uint64_t a1, void *a2, int a3, CFTypeRef *a4)
{
  cf = 0;
  v7 = FigAudioSessionCreateWithAVAudioSession(a1, a2, &cf);
  if (!v7)
  {
    v7 = FigAudioSessionClockCreate(a1, cf, a3, a4);
  }

  v8 = v7;
  if (cf)
  {
    CFRelease(cf);
  }

  return v8;
}

uint64_t FigAudioSessionClockConfigurationCanUseAVAudioSessionToCreateClock(uint64_t a1, void *a2)
{
  result = FigCFDictionaryGetInt64IfPresent();
  if (result)
  {
    return [objc_msgSend(a2 getMXSessionProperty:*MEMORY[0x1E69AFDE8] error:{0), "unsignedLongLongValue"}] == 0;
  }

  return result;
}

uint64_t FigAudioSessionClockCreateFromClockConfigurationAndAuditToken(uint64_t a1, uint64_t a2, _OWORD *a3, CFTypeRef *a4)
{
  v7 = objc_autoreleasePoolPush();
  v13 = 0;
  v14 = 0;
  if ((FigServer_IsMediaplaybackd() || FigServer_IsMediaserverd() || FigServer_IsCameracaptured()) && FigCFDictionaryGetInt32IfPresent() && FigCFDictionaryGetInt32IfPresent())
  {
    v8 = a3[1];
    v12[0] = *a3;
    v12[1] = v8;
    v9 = FigAudioSessionCreateWithAVAudioSessionSiblingForAudioSessionID(a1, HIDWORD(v14), v12, @"FigAudioSessionClock", &v13);
    if (!v9)
    {
      v9 = FigAudioSessionClockCreate(a1, v13, v14, a4);
    }
  }

  else
  {
    OUTLINED_FUNCTION_243();
    v9 = FigSignalErrorAtGM();
  }

  v10 = v9;
  objc_autoreleasePoolPop(v7);
  return v10;
}

uint64_t FigAudioSessionClockCreateForSharedAudioSession(uint64_t a1, int a2, CFTypeRef *a3)
{
  v6 = objc_autoreleasePoolPush();
  v7 = FigAudioSessionClockCreateForAVAudioSession(a1, [MEMORY[0x1E698D710] sharedInstance], a2, a3);
  objc_autoreleasePoolPop(v6);
  return v7;
}

uint64_t FigAudioSessionClockCreateFromClockConfigurationAndExistingFigAudioSession_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAudioSessionClockCreateFromClockConfigurationAndExistingFigAudioSession_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAudioSessionClockCreateFromClockConfigurationAndExistingFigAudioSession_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAudioSessionClockCreateFromClockConfigurationAndExistingAVAudioSession_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAudioSessionClockCreateFromClockConfigurationAndExistingAVAudioSession_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigAudioSessionClockCreateFromClockConfigurationAndExistingAVAudioSession_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t audioSessionClock_getRateAndNanosecondTimeAndHostTime_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void eachNodeEmitCallback(uint64_t a1, uint64_t a2)
{
  v8 = 0;
  cf = 0;
  if (!*(a2 + 20))
  {
    NodeType = FigVTTNodeGetNodeType(a1, &v8);
    if (NodeType)
    {
      v5 = NodeType;
    }

    else
    {
      v5 = FigVTTNodeCopyDocumentSerialization(a1, &cf);
      v6 = cf;
      if (!v5 && cf)
      {
        CFStringAppendFormat(*a2, 0, @"%@", cf);
        if (!*(a2 + 16))
        {
          CFStringAppendFormat(*a2, 0, @"\n");
        }

        goto LABEL_9;
      }

      if (!v5)
      {
        goto LABEL_10;
      }
    }

    *(a2 + 20) = v5;
LABEL_9:
    v6 = cf;
LABEL_10:
    if (v6)
    {
      CFRelease(v6);
    }
  }
}

uint64_t FigVTTDocumentWriterCreateForVTT_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigVTTDocumentWriterCreateForVTT_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_CopyProperty_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_CopyProperty_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_SetProperty_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_SetProperty_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_SetProperty_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_SetProperty_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_37();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_CreateAndAddNode_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_CreateAndAddNode_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTDocumentWriterForVTT_Flush_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void FigCFHTTPCreateUserAgentOnce()
{
  v19 = 0;
  theString[0] = 0;
  appendedString = 0;
  v0 = 0;
  if (!FigCFHTTPCopyDeviceStrings(theString, &v19, &appendedString))
  {
    if (theString[0])
    {
      if (v19)
      {
        if (appendedString)
        {
          v1 = *MEMORY[0x1E695E480];
          Mutable = CFStringCreateMutable(*MEMORY[0x1E695E480], 0);
          v0 = Mutable;
          if (Mutable)
          {
            CFStringAppend(Mutable, @"AppleCoreMedia/1.0.0.");
            CFStringAppend(v0, appendedString);
            CFStringAppend(v0, @" (");
            v3 = theString[0];
            if (theString[0])
            {
              ExternalRepresentation = CFStringCreateExternalRepresentation(v1, theString[0], 0x600u, 0x20u);
              if (ExternalRepresentation)
              {
                v5 = ExternalRepresentation;
                v6 = CFStringCreateFromExternalRepresentation(v1, ExternalRepresentation, 0x600u);
                CFRelease(v5);
                v3 = theString[0];
                if (v6)
                {
                  CFRelease(theString[0]);
                  theString[0] = v6;
                  v3 = v6;
                }
              }

              else
              {
                v3 = theString[0];
              }
            }

            CFStringAppend(v0, v3);
            CFStringAppend(v0, @"; U; ");
            CFStringAppend(v0, @"CPU OS ");
            MutableCopy = CFStringCreateMutableCopy(v1, 0, v19);
            if (MutableCopy)
            {
              v8 = MutableCopy;
              v21.length = CFStringGetLength(MutableCopy);
              v21.location = 0;
              CFStringFindAndReplace(v8, @".", @"_", v21, 0);
              CFStringAppend(v0, v8);
              CFRelease(v8);
            }

            CFStringAppend(v0, @" like Mac OS X");
            v9 = CFLocaleCopyPreferredLanguages();
            if (!v9)
            {
              goto LABEL_26;
            }

            v10 = v9;
            theString[1] = 0;
            theString[2] = 0;
            if (CFArrayGetCount(v9) >= 1 && CFArrayGetValueAtIndex(v10, 0) && (CFBundleGetLocalizationInfoForLocalization(), (v11 = CFBundleCopyLocalizationForLocalizationInfo()) != 0))
            {
              v12 = v11;
              v13 = CFStringCreateMutableCopy(v1, 0, v11);
              System = CFLocaleGetSystem();
              CFStringLowercase(v13, System);
              location = CFStringFind(v13, @"_", 0).location;
              if (CFStringGetLength(v13) >= 3 && location == 3)
              {
                v22.length = CFStringGetLength(v13);
                v22.location = 0;
                CFStringFindAndReplace(v13, @"_", @"-", v22, 0);
              }

              CFRelease(v10);
              CFRelease(v12);
              if (!v13)
              {
                goto LABEL_26;
              }

              CFStringAppend(v0, @"; ");
              CFStringAppend(v0, v13);
              v17 = v13;
            }

            else
            {
              v17 = v10;
            }

            CFRelease(v17);
LABEL_26:
            CFStringAppend(v0, @""));
          }
        }
      }
    }
  }

  if (theString[0])
  {
    CFRelease(theString[0]);
  }

  if (v19)
  {
    CFRelease(v19);
  }

  if (appendedString)
  {
    CFRelease(appendedString);
  }

  gFigCFHTTPUserAgent = v0;
}

uint64_t FigCFHTTPCompareURLs(const void *a1, CFTypeRef cf2)
{
  v2 = 0;
  if (!a1)
  {
    return v2;
  }

  if (!cf2)
  {
    return v2;
  }

  v2 = CFEqual(a1, cf2);
  if (v2)
  {
    return v2;
  }

  if (!CFURLGetBaseURL(a1) && !CFURLGetBaseURL(cf2))
  {
    return 0;
  }

  v5 = CFURLCopyAbsoluteURL(a1);
  v6 = CFURLCopyAbsoluteURL(cf2);
  v7 = v6;
  if (v5 && v6)
  {
    v8 = CFEqual(v5, v6);
  }

  else
  {
    v8 = 0;
    v2 = 0;
    if (!v5)
    {
      goto LABEL_11;
    }
  }

  CFRelease(v5);
  v2 = v8;
LABEL_11:
  if (v7)
  {
    CFRelease(v7);
  }

  return v2;
}

const __CFString *FigCFHTTPGetContentLengthFromHeaderString(const __CFString *result, void *a2)
{
  v5 = *MEMORY[0x1E69E9840];
  if (result)
  {
    v3 = 0;
    result = CFStringGetCString(result, buffer, 200, 0x600u);
    if (result)
    {
      if (sscanf(buffer, "%lld", &v3) == 1)
      {
        if (a2)
        {
          *a2 = v3;
        }

        return 1;
      }

      else
      {
        return 0;
      }
    }
  }

  return result;
}

const __CFString *FigCFHTTPGetContentLengthFromHTTPResponse(__CFHTTPMessage *a1, void *a2)
{
  if (!a1)
  {
    return 0;
  }

  v3 = CFHTTPMessageCopyHeaderFieldValue(a1, @"Content-Length");
  v4 = FigCFHTTPGetContentLengthFromHeaderString(v3, a2);
  if (v3)
  {
    CFRelease(v3);
  }

  return v4;
}

const __CFString *FigCFHTTPGetContentRangeFromHeaderString(const __CFString *result, void *a2, void *a3, void *a4, _BYTE *a5)
{
  v14 = *MEMORY[0x1E69E9840];
  v11 = 0;
  v12 = 0;
  if (result)
  {
    v10 = 0;
    result = CFStringGetCString(result, buffer, 200, 0x600u);
    if (result)
    {
      if (sscanf(buffer, "bytes %lld-%lld/%lld", &v12, &v11, &v10) == 3)
      {
        if (a2)
        {
          *a2 = v12;
        }

        if (a3)
        {
          *a3 = v11;
        }

        if (a4)
        {
          *a4 = v10;
        }

        v9 = 1;
        if (!a5)
        {
          goto LABEL_22;
        }
      }

      else
      {