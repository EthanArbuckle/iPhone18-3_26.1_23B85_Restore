uint64_t OUTLINED_FUNCTION_4_99()
{

  return fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
}

uint64_t OUTLINED_FUNCTION_5_86()
{

  return fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
}

void OUTLINED_FUNCTION_7_62()
{
  *(v2 + 12) = 2048;
  *(v2 + 14) = v0;
  *(v2 + 22) = 1024;
  *(v2 + 24) = v1;
  *(v2 + 28) = 2114;
  *(v2 + 30) = v4;
  *(v2 + 38) = 2114;
  *(v2 + 40) = v3;
  *(v2 + 48) = 2048;
}

uint64_t OUTLINED_FUNCTION_8_48()
{

  return FigNotificationCenterAddWeakListener();
}

__n128 OUTLINED_FUNCTION_12_42()
{
  result = *v0;
  *(v1 - 144) = *v0;
  *(v1 - 128) = v0[1].n128_u64[0];
  return result;
}

double OUTLINED_FUNCTION_14_39(uint64_t a1, uint64_t a2, uint64_t a3, const __CFArray *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, __int128 a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, __int16 a36, char a37, char a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, uint64_t a52, uint64_t a53, uint64_t a54)
{
  a17 = *v55;
  a18 = *(v55 + 2);

  return figPlaybackCoordinator_getPlayerTimeFromGroupTime(v54, &a42, &a17, a4, &a38, &a54);
}

CFComparisonResult OUTLINED_FUNCTION_15_36()
{

  return CFStringCompare(v0, v1, 0);
}

uint64_t OUTLINED_FUNCTION_17_29()
{

  return fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
}

double OUTLINED_FUNCTION_18_28(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, __int128 a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, __int128 a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37)
{
  a26 = a21;
  *(v38 + 16) = a22;

  return figPlaybackCoordinator_getGroupTimeFromPlayerTime(v37, &a26, &a37);
}

uint64_t OUTLINED_FUNCTION_19_31(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, __int128 a17, uint64_t a18)
{
  *(v18 - 224) = a17;
  *(v18 - 208) = a18;
  return v18 - 192;
}

uint64_t OUTLINED_FUNCTION_22_23(uint64_t a1, uint64_t a2, __int128 a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, __int128 a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, CMTime *time2, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, __int128 time2a, uint64_t time2_16)
{
  time2a = a10;
  time2_16 = a11;

  return CMTimeCompare((v32 - 160), &time2a);
}

Float64 OUTLINED_FUNCTION_23_31(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, CMTime *time, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, uint64_t a52, uint64_t timea)
{
  *(v53 + 160) = *a14;
  *(v53 + 176) = *(a14 + 16);

  return CMTimeGetSeconds(&timea);
}

CMTime *OUTLINED_FUNCTION_27_20@<X0>(CMTime *a1@<X8>)
{

  return CMTimeMake(a1, 20, 1000);
}

uint64_t OUTLINED_FUNCTION_28_20()
{

  return FigCFWeakReferenceHolderCopyReferencedObject();
}

__n128 OUTLINED_FUNCTION_29_20()
{
  result = *(v0 - 144);
  *(v0 - 192) = result;
  *(v0 - 176) = *(v0 - 128);
  return result;
}

__n128 OUTLINED_FUNCTION_30_18(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, __n128 a27, uint64_t a28)
{
  result = a27;
  *(v28 - 192) = a27;
  *(v28 - 176) = a28;
  return result;
}

__n128 OUTLINED_FUNCTION_32_18()
{
  result = v1[10];
  *v0 = result;
  v0[1].n128_u64[0] = v1[11].n128_u64[0];
  return result;
}

__n128 OUTLINED_FUNCTION_36_18()
{
  result = *v0;
  v1[4] = *v0;
  v1[5].n128_u64[0] = v0[1].n128_u64[0];
  return result;
}

uint64_t OUTLINED_FUNCTION_42_15()
{

  return FigTimelineCoordinatorSetReadinessHintFromTimelineControl();
}

uint64_t FigTTMLHeadCreate(const __CFAllocator *a1, uint64_t a2, uint64_t a3, void *a4)
{
  if (a4)
  {
    FigTTMLNodeGetClassID();
    Default = CMDerivedObjectCreate();
    if (Default)
    {
      return Default;
    }

    DerivedStorage = CMBaseObjectGetDerivedStorage();
    Default = FigTTMLInitializeNodeBaseStorage(DerivedStorage, a3);
    if (Default)
    {
      return Default;
    }

    *(DerivedStorage + 152) = CFArrayCreateMutable(a1, 0, MEMORY[0x1E695E9C0]);
    Default = FigTTMLAddCurrentElementAttributesToDictionary(a2, *(DerivedStorage + 24));
    if (Default)
    {
      return Default;
    }

    *a3 = 0;
    *(a3 + 8) = 0;
    FigTTMLParseNode(a2, figTTMLHead_ConsumeChildNode, a3);
    if (Default)
    {
      return Default;
    }

    v11 = *(DerivedStorage + 144);
    v10 = (DerivedStorage + 144);
    if (!v11 && (Default = FigTTMLLayoutCreateDefault(a1, a3, v10), Default))
    {
      return Default;
    }

    else
    {
      v12 = 0;
      *a4 = 0;
    }
  }

  else
  {
    FigTTMLHeadCreate_cold_1(&v14);
    return v14;
  }

  return v12;
}

uint64_t FigTTMLHeadCreateDefault(const __CFAllocator *a1, uint64_t a2, void *a3)
{
  if (a3)
  {
    FigTTMLNodeGetClassID();
    Default = CMDerivedObjectCreate();
    if (!Default)
    {
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      v8 = FigTTMLInitializeNodeBaseStorage(DerivedStorage, a2);
      if (v8)
      {
        return v8;
      }

      else
      {
        *(DerivedStorage + 152) = CFArrayCreateMutable(a1, 0, MEMORY[0x1E695E9C0]);
        *a2 = 0;
        *(a2 + 8) = 0;
        Default = FigTTMLLayoutCreateDefault(a1, a2, (DerivedStorage + 144));
        if (!Default)
        {
          *a3 = 0;
        }
      }
    }
  }

  else
  {
    FigTTMLHeadCreateDefault_cold_1(&v10);
    return v10;
  }

  return Default;
}

void figTTMLHead_Finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v1 = DerivedStorage[17];
  if (v1)
  {
    CFRelease(v1);
    DerivedStorage[17] = 0;
  }

  v2 = DerivedStorage[18];
  if (v2)
  {
    CFRelease(v2);
    DerivedStorage[18] = 0;
  }

  v3 = DerivedStorage[19];
  if (v3)
  {
    CFRelease(v3);
    DerivedStorage[19] = 0;
  }

  FigTTMLReleaseNodeBaseStorage(DerivedStorage);
}

CFStringRef figTTMLHead_CopyDebugDesc()
{
  CMBaseObjectGetDerivedStorage();
  v0 = FigCFCopyCompactDescription();
  v1 = CFStringCreateWithFormat(*MEMORY[0x1E695E480], 0, @"head %@", v0);
  if (v0)
  {
    CFRelease(v0);
  }

  return v1;
}

uint64_t figTTMLHead_CopyChildNodeArray(const void *a1, __CFArray **a2)
{
  v3 = CFGetAllocator(a1);
  Mutable = CFArrayCreateMutable(v3, 0, MEMORY[0x1E695E9C0]);
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a2)
  {
    v6 = DerivedStorage;
    v7 = *(DerivedStorage + 152);
    if (v7)
    {
      v8.length = CFArrayGetCount(*(DerivedStorage + 152));
    }

    else
    {
      v8.length = 0;
    }

    v8.location = 0;
    CFArrayAppendArray(Mutable, v7, v8);
    v9 = *(v6 + 136);
    if (v9)
    {
      CFArrayAppendValue(Mutable, v9);
    }

    v10 = *(v6 + 144);
    if (v10)
    {
      CFArrayAppendValue(Mutable, v10);
    }

    v11 = 0;
    *a2 = Mutable;
  }

  else
  {
    v11 = FigSignalErrorAtGM();
    if (Mutable)
    {
      CFRelease(Mutable);
    }
  }

  return v11;
}

uint64_t figTTMLHead_GetNodeType(uint64_t a1, _DWORD *a2)
{
  if (a2)
  {
    result = 0;
    *a2 = 8;
  }

  else
  {
    v6 = v2;
    v7 = v3;
    figTTMLHead_GetNodeType_cold_1(&v5);
    return v5;
  }

  return result;
}

uint64_t CreateTrackReaderDictionary(const __CFAllocator *a1, uint64_t *a2)
{
  value = 0;
  MovieInformationLockForRead(a2[1]);
  v4 = FigSimpleMutexCreate();
  a2[2] = v4;
  if (!v4)
  {
    CreateTrackReaderDictionary_cold_2(&v16);
LABEL_14:
    v13 = v16;
    goto LABEL_8;
  }

  Mutable = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!Mutable)
  {
    CreateTrackReaderDictionary_cold_1(&v16);
    goto LABEL_14;
  }

  v6 = Mutable;
  TrackCount = MovieInformationGetTrackCount(a2[1]);
  if (TrackCount < 1)
  {
LABEL_7:
    v13 = 0;
    a2[3] = v6;
  }

  else
  {
    v8 = TrackCount;
    v9 = 0;
    while (1)
    {
      TrackForTrackIndex = MovieInformationFindTrackForTrackIndex(a2[1], v9);
      v11 = CreateTrackReaderForMovieTrack(a1, a2[1], TrackForTrackIndex, &value);
      v12 = value;
      if (v11)
      {
        break;
      }

      CFDictionarySetValue(v6, TrackForTrackIndex, value);
      CFRelease(v12);
      value = 0;
      if (v8 == ++v9)
      {
        goto LABEL_7;
      }
    }

    v13 = v11;
    if (value)
    {
      CFRelease(value);
    }

    CFRelease(v6);
  }

LABEL_8:
  MovieInformationUnlockForRead(a2[1]);
  return v13;
}

uint64_t MovieFormatReaderGetMovieInformation(uint64_t a1)
{
  if (a1)
  {
    if (CMBaseObjectGetVTable() == &kMovieFormatReaderVTable)
    {
      return *(CMBaseObjectGetDerivedStorage() + 8);
    }

    MovieFormatReaderGetMovieInformation_cold_1();
  }

  else
  {
    MovieFormatReaderGetMovieInformation_cold_2();
  }

  return 0;
}

uint64_t MovieFormatReaderCreateWithMovieInformation(void *a1, char a2, CFTypeRef *a3)
{
  cf = 0;
  if (!a1)
  {
    MovieFormatReaderCreateWithMovieInformation_cold_3(&v21);
LABEL_27:
    v13 = v21;
    goto LABEL_9;
  }

  v6 = CFGetAllocator(a1);
  FigFormatReaderGetClassID();
  DeepCopy = CMDerivedObjectCreate();
  if (DeepCopy)
  {
LABEL_8:
    v13 = DeepCopy;
    goto LABEL_9;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v9 = FigSimpleMutexCreate();
  *(DerivedStorage + 80) = v9;
  if (!v9)
  {
    MovieFormatReaderCreateWithMovieInformation_cold_2(&v21);
    goto LABEL_27;
  }

  v10 = FigSimpleMutexCreate();
  *(DerivedStorage + 72) = v10;
  if (!v10)
  {
    MovieFormatReaderCreateWithMovieInformation_cold_1(&v21);
    goto LABEL_27;
  }

  IsMutable = MovieInformationIsMutable(a1);
  v12 = !IsMutable;
  if (!IsMutable)
  {
LABEL_14:
    *(DerivedStorage + 8) = CFRetain(a1);
    goto LABEL_15;
  }

  if ((a2 & 1) == 0)
  {
    DeepCopy = MovieInformationLockForWrite(a1);
    if (DeepCopy)
    {
      goto LABEL_8;
    }

    v13 = MovieInformationEnsureMutationsWillNotify(a1);
    MovieInformationUnlockForWrite(a1);
    if (!v13)
    {
      goto LABEL_14;
    }

LABEL_9:
    if (cf)
    {
      CFRelease(cf);
    }

    return v13;
  }

  DeepCopy = MovieInformationCreateDeepCopy(*MEMORY[0x1E695E480], a1, 0, (DerivedStorage + 8));
  if (DeepCopy)
  {
    goto LABEL_8;
  }

  v12 = 1;
LABEL_15:
  DeepCopy = CreateTrackReaderDictionary(v6, DerivedStorage);
  if (DeepCopy)
  {
    goto LABEL_8;
  }

  MovieInformationLockForRead(*(DerivedStorage + 8));
  if (!v12)
  {
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterAddListener();
    *(DerivedStorage + 120) = 1;
    TrackCount = MovieInformationGetTrackCount(*(DerivedStorage + 8));
    if (TrackCount >= 1)
    {
      v15 = TrackCount;
      for (i = 0; i != v15; ++i)
      {
        v21 = 0;
        TrackForTrackIndex = MovieInformationFindTrackForTrackIndex(*(DerivedStorage + 8), i);
        CopyTrackReader(DerivedStorage, TrackForTrackIndex, &v21);
        v18 = v21;
        if (v21)
        {
          v19 = CMBaseObjectGetDerivedStorage();
          CMNotificationCenterGetDefaultLocalCenter();
          CMNotificationCenterAddListener();
          *(v19 + 64) = 1;
          CFRelease(v18);
        }
      }
    }
  }

  MovieInformationUnlockForRead(*(DerivedStorage + 8));
  v13 = 0;
  *a3 = cf;
  return v13;
}

void MovieMutationNotificationCallback(int a1, uint64_t a2, CFTypeRef cf1, uint64_t a4, const __CFDictionary *a5)
{
  v21 = 0;
  if (!CFEqual(cf1, @"MovieChanges"))
  {
    if (CFEqual(cf1, @"TrackAdded"))
    {
      if (!a5 || !CFDictionaryGetValueIfPresent(a5, @"TrackInfo", &v21))
      {
        return;
      }

      v12 = v21;
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      value = 0;
      if (CreateTrackReaderForMovieTrack(*MEMORY[0x1E695E480], *(DerivedStorage + 8), v12, &value))
      {
        v14 = value;
        if (!value)
        {
          goto LABEL_35;
        }
      }

      else
      {
        FigSimpleMutexLock();
        v14 = value;
        CFDictionarySetValue(*(DerivedStorage + 24), v12, value);
        FigSimpleMutexUnlock();
        CMNotificationCenterGetDefaultLocalCenter();
        CMNotificationCenterAddListener();
        *(CMBaseObjectGetDerivedStorage() + 64) = 1;
        if (!v14)
        {
LABEL_35:
          CMNotificationCenterGetDefaultLocalCenter();
          CMNotificationCenterPostNotification();
          return;
        }
      }

      v15 = v14;
    }

    else
    {
      v16 = CFEqual(cf1, @"TrackRemoved");
      if (!a5 || !v16 || !CFDictionaryGetValueIfPresent(a5, @"TrackInfo", &v21))
      {
        return;
      }

      v17 = v21;
      v18 = CMBaseObjectGetDerivedStorage();
      value = 0;
      CopyTrackReader(v18, v17, &value);
      v19 = value;
      if (!value)
      {
        FigSimpleMutexLock();
        CFDictionaryRemoveValue(*(v18 + 24), v17);
        FigSimpleMutexUnlock();
        goto LABEL_35;
      }

      *(CMBaseObjectGetDerivedStorage() + 64) = 0;
      CMNotificationCenterGetDefaultLocalCenter();
      CMNotificationCenterRemoveListener();
      CMNotificationCenterGetDefaultLocalCenter();
      CMNotificationCenterBarrier();
      FigSimpleMutexLock();
      CFDictionaryRemoveValue(*(v18 + 24), v17);
      FigSimpleMutexUnlock();
      v15 = v19;
    }

    CFRelease(v15);
    goto LABEL_35;
  }

  if (!a5)
  {
    return;
  }

  v8 = CFGetTypeID(a5);
  if (v8 != CFDictionaryGetTypeID())
  {
    return;
  }

  value = 0;
  if (!CFDictionaryGetValueIfPresent(a5, @"ChangeBits", &value))
  {
    return;
  }

  valuePtr = 0;
  CFNumberGetValue(value, kCFNumberSInt64Type, &valuePtr);
  Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  v10 = valuePtr;
  if (valuePtr)
  {
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterPostNotification();
    v10 = valuePtr;
  }

  v11 = MEMORY[0x1E695E4D0];
  if ((v10 & 0x100) != 0)
  {
    CFDictionarySetValue(Mutable, @"TrackReferenceDictionary", *MEMORY[0x1E695E4D0]);
    v10 = valuePtr;
    if ((valuePtr & 0x80) == 0)
    {
LABEL_9:
      if ((v10 & 0x200) == 0)
      {
        goto LABEL_10;
      }

      goto LABEL_39;
    }
  }

  else if ((v10 & 0x80) == 0)
  {
    goto LABEL_9;
  }

  v20 = *v11;
  CFDictionarySetValue(Mutable, @"AlternateGroupArray", *v11);
  CFDictionarySetValue(Mutable, @"AlternateGroupAssignmentsArray", v20);
  v10 = valuePtr;
  if ((valuePtr & 0x200) == 0)
  {
LABEL_10:
    if ((v10 & 0x400) == 0)
    {
      goto LABEL_11;
    }

    goto LABEL_40;
  }

LABEL_39:
  CFDictionarySetValue(Mutable, @"PreferredRate", *v11);
  v10 = valuePtr;
  if ((valuePtr & 0x400) == 0)
  {
LABEL_11:
    if ((v10 & 0x1000) == 0)
    {
      goto LABEL_12;
    }

    goto LABEL_41;
  }

LABEL_40:
  CFDictionarySetValue(Mutable, @"PreferredVolume", *v11);
  v10 = valuePtr;
  if ((valuePtr & 0x1000) == 0)
  {
LABEL_12:
    if ((v10 & 0x2000) == 0)
    {
      goto LABEL_13;
    }

    goto LABEL_42;
  }

LABEL_41:
  CFDictionarySetValue(Mutable, @"FormatDescriptionsChanged", *v11);
  v10 = valuePtr;
  if ((valuePtr & 0x2000) == 0)
  {
LABEL_13:
    if ((v10 & 0x4000) == 0)
    {
      goto LABEL_14;
    }

    goto LABEL_43;
  }

LABEL_42:
  CFDictionarySetValue(Mutable, @"EnabledTracksChanged", *v11);
  LOBYTE(v10) = valuePtr;
  if ((valuePtr & 0x4000) == 0)
  {
LABEL_14:
    if ((v10 & 8) == 0)
    {
      goto LABEL_15;
    }

    goto LABEL_44;
  }

LABEL_43:
  CFDictionarySetValue(Mutable, @"ContainsChapters", *v11);
  LOBYTE(v10) = valuePtr;
  if ((valuePtr & 8) == 0)
  {
LABEL_15:
    if ((v10 & 0x10) == 0)
    {
      goto LABEL_16;
    }

    goto LABEL_45;
  }

LABEL_44:
  ReactToMovieMetadataChange(a2, 8, Mutable);
  LOBYTE(v10) = valuePtr;
  if ((valuePtr & 0x10) == 0)
  {
LABEL_16:
    if ((v10 & 0x20) == 0)
    {
      goto LABEL_17;
    }

LABEL_46:
    ReactToMovieMetadataChange(a2, 32, Mutable);
    if ((valuePtr & 0x40) == 0)
    {
      goto LABEL_19;
    }

    goto LABEL_18;
  }

LABEL_45:
  ReactToMovieMetadataChange(a2, 16, Mutable);
  LOBYTE(v10) = valuePtr;
  if ((valuePtr & 0x20) != 0)
  {
    goto LABEL_46;
  }

LABEL_17:
  if ((v10 & 0x40) != 0)
  {
LABEL_18:
    ReactToMovieMetadataChange(a2, 64, Mutable);
  }

LABEL_19:
  if (CFDictionaryGetCount(Mutable))
  {
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterPostNotification();
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }
}

uint64_t CopyTrackReader(uint64_t a1, const void *a2, void *a3)
{
  FigSimpleMutexLock();
  Value = CFDictionaryGetValue(*(a1 + 24), a2);
  if (Value)
  {
    v7 = Value;
    CFRetain(Value);
    FigSimpleMutexUnlock();
    *a3 = v7;
    return 0;
  }

  else
  {
    FigSimpleMutexUnlock();
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }
}

void TrackMutationNotificationCallback(int a1, uint64_t a2, CFTypeRef cf1, uint64_t a4, const void *a5)
{
  if (CFEqual(cf1, @"TrackChanges"))
  {
    if (!a5)
    {
      return;
    }

    v8 = CFGetTypeID(a5);
    if (v8 != CFDictionaryGetTypeID())
    {
      return;
    }

    value = 0;
    if (!CFDictionaryGetValueIfPresent(a5, @"ChangeBits", &value))
    {
      return;
    }

    v17 = 0;
    CFNumberGetValue(value, kCFNumberSInt64Type, &v17);
    Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    v10 = v17;
    v11 = MEMORY[0x1E695E4D0];
    if (v17)
    {
      CMNotificationCenterGetDefaultLocalCenter();
      CMNotificationCenterPostNotification();
      v12 = *v11;
      CFDictionarySetValue(Mutable, @"UneditedSampleCount", *v11);
      CFDictionarySetValue(Mutable, @"UneditedTrackDuration", v12);
      CFDictionarySetValue(Mutable, @"NominalFrameRate", v12);
      CFDictionarySetValue(Mutable, @"MinSampleDuration", v12);
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      FigSimpleMutexLock();
      v14 = *(DerivedStorage + 56);
      if (v14)
      {
        CFRelease(v14);
        *(DerivedStorage + 56) = 0;
      }

      FigSimpleMutexUnlock();
      v10 = v17;
      if ((v17 & 4) == 0)
      {
LABEL_7:
        if ((v10 & 0x40) == 0)
        {
          goto LABEL_8;
        }

        goto LABEL_47;
      }
    }

    else if ((v17 & 4) == 0)
    {
      goto LABEL_7;
    }

    CFDictionarySetValue(Mutable, @"TrackFormatDescriptionArray", *v11);
    v10 = v17;
    if ((v17 & 0x40) == 0)
    {
LABEL_8:
      if ((v10 & 0x80) == 0)
      {
        goto LABEL_9;
      }

      goto LABEL_48;
    }

LABEL_47:
    CFDictionarySetValue(Mutable, @"TrackEnabled", *v11);
    v10 = v17;
    if ((v17 & 0x80) == 0)
    {
LABEL_9:
      if ((v10 & 0x100) == 0)
      {
        goto LABEL_10;
      }

      goto LABEL_49;
    }

LABEL_48:
    CFDictionarySetValue(Mutable, @"TrackLanguageCode", *v11);
    v10 = v17;
    if ((v17 & 0x100) == 0)
    {
LABEL_10:
      if ((v10 & 0x200) == 0)
      {
        goto LABEL_11;
      }

      goto LABEL_50;
    }

LABEL_49:
    CFDictionarySetValue(Mutable, @"ExtendedLanguageTagString", *v11);
    v10 = v17;
    if ((v17 & 0x200) == 0)
    {
LABEL_11:
      if ((v10 & 0x400) == 0)
      {
        goto LABEL_12;
      }

      goto LABEL_51;
    }

LABEL_50:
    CFDictionarySetValue(Mutable, @"CleanApertureDimensions", *v11);
    v10 = v17;
    if ((v17 & 0x400) == 0)
    {
LABEL_12:
      if ((v10 & 0x800) == 0)
      {
        goto LABEL_13;
      }

      goto LABEL_52;
    }

LABEL_51:
    CFDictionarySetValue(Mutable, @"TrackDimensions", *v11);
    v10 = v17;
    if ((v17 & 0x800) == 0)
    {
LABEL_13:
      if ((v10 & 0x1000) == 0)
      {
        goto LABEL_14;
      }

      goto LABEL_53;
    }

LABEL_52:
    CFDictionarySetValue(Mutable, @"TrackExcludeFromAutoSelection", *v11);
    v10 = v17;
    if ((v17 & 0x1000) == 0)
    {
LABEL_14:
      if ((v10 & 0x400000) == 0)
      {
        goto LABEL_15;
      }

      goto LABEL_54;
    }

LABEL_53:
    CFDictionarySetValue(Mutable, @"AlternateGroupID", *v11);
    v10 = v17;
    if ((v17 & 0x400000) == 0)
    {
LABEL_15:
      if ((v10 & 0x800000) == 0)
      {
        goto LABEL_16;
      }

      goto LABEL_55;
    }

LABEL_54:
    CFDictionarySetValue(Mutable, @"ProvisionalAlternateGroupID", *v11);
    v10 = v17;
    if ((v17 & 0x800000) == 0)
    {
LABEL_16:
      if ((v10 & 0x2000) == 0)
      {
        goto LABEL_17;
      }

      goto LABEL_56;
    }

LABEL_55:
    CFDictionarySetValue(Mutable, @"DefaultAlternateGroupID", *v11);
    v10 = v17;
    if ((v17 & 0x2000) == 0)
    {
LABEL_17:
      if ((v10 & 0x4000) == 0)
      {
        goto LABEL_18;
      }

      goto LABEL_57;
    }

LABEL_56:
    v15 = *v11;
    CFDictionarySetValue(Mutable, @"EstimatedDataRate", *v11);
    CFDictionarySetValue(Mutable, @"UneditedNumDataBytes", v15);
    v10 = v17;
    if ((v17 & 0x4000) == 0)
    {
LABEL_18:
      if ((v10 & 0x8000) == 0)
      {
        goto LABEL_19;
      }

      goto LABEL_58;
    }

LABEL_57:
    CFDictionarySetValue(Mutable, @"ProductionApertureDimensions", *v11);
    v10 = v17;
    if ((v17 & 0x8000) == 0)
    {
LABEL_19:
      if ((v10 & 0x10000) == 0)
      {
        goto LABEL_20;
      }

      goto LABEL_59;
    }

LABEL_58:
    CFDictionarySetValue(Mutable, @"EncodedPixelsDimensions", *v11);
    v10 = v17;
    if ((v17 & 0x10000) == 0)
    {
LABEL_20:
      if ((v10 & 0x20000) == 0)
      {
        goto LABEL_21;
      }

      goto LABEL_60;
    }

LABEL_59:
    CFDictionarySetValue(Mutable, @"Volume", *v11);
    v10 = v17;
    if ((v17 & 0x20000) == 0)
    {
LABEL_21:
      if ((v10 & 0x40000) == 0)
      {
        goto LABEL_22;
      }

      goto LABEL_61;
    }

LABEL_60:
    CFDictionarySetValue(Mutable, @"TrackLayer", *v11);
    v10 = v17;
    if ((v17 & 0x40000) == 0)
    {
LABEL_22:
      if ((v10 & 0x80000) == 0)
      {
        goto LABEL_23;
      }

      goto LABEL_62;
    }

LABEL_61:
    CFDictionarySetValue(Mutable, @"TrackQTLoadSettings", *v11);
    v10 = v17;
    if ((v17 & 0x80000) == 0)
    {
LABEL_23:
      if ((v10 & 0x100000) == 0)
      {
        goto LABEL_24;
      }

      goto LABEL_63;
    }

LABEL_62:
    CFDictionarySetValue(Mutable, @"TrackMatrix", *v11);
    v10 = v17;
    if ((v17 & 0x100000) == 0)
    {
LABEL_24:
      if ((v10 & 2) == 0)
      {
        goto LABEL_25;
      }

      goto LABEL_64;
    }

LABEL_63:
    CFDictionarySetValue(Mutable, @"TrackReferencesChanged", *v11);
    v10 = v17;
    if ((v17 & 2) == 0)
    {
LABEL_25:
      if ((v10 & 0x200000) == 0)
      {
        goto LABEL_26;
      }

      goto LABEL_65;
    }

LABEL_64:
    CFDictionarySetValue(Mutable, @"EditCursorService", *v11);
    v10 = v17;
    if ((v17 & 0x200000) == 0)
    {
LABEL_26:
      if ((v10 & 8) == 0)
      {
        goto LABEL_27;
      }

      goto LABEL_66;
    }

LABEL_65:
    CFDictionarySetValue(Mutable, @"ContainsChapters", *v11);
    v10 = v17;
    if ((v17 & 8) == 0)
    {
LABEL_27:
      if ((v10 & 0x10) == 0)
      {
        goto LABEL_28;
      }

      goto LABEL_67;
    }

LABEL_66:
    ReactToTrackMetadataChange(a2, 8, Mutable);
    v10 = v17;
    if ((v17 & 0x10) == 0)
    {
LABEL_28:
      if ((v10 & 0x20) == 0)
      {
        goto LABEL_29;
      }

      goto LABEL_68;
    }

LABEL_67:
    ReactToTrackMetadataChange(a2, 16, Mutable);
    v10 = v17;
    if ((v17 & 0x20) == 0)
    {
LABEL_29:
      if ((v10 & 0x1000000) == 0)
      {
        goto LABEL_30;
      }

      goto LABEL_69;
    }

LABEL_68:
    ReactToTrackMetadataChange(a2, 32, Mutable);
    v10 = v17;
    if ((v17 & 0x1000000) == 0)
    {
LABEL_30:
      if ((v10 & 0x2000000) == 0)
      {
        goto LABEL_31;
      }

      goto LABEL_70;
    }

LABEL_69:
    CFDictionarySetValue(Mutable, @"SampleGroupDescriptions", *v11);
    v10 = v17;
    if ((v17 & 0x2000000) == 0)
    {
LABEL_31:
      if ((v10 & 0x4000000) == 0)
      {
        goto LABEL_32;
      }

      goto LABEL_71;
    }

LABEL_70:
    CFDictionarySetValue(Mutable, @"HasRollInformation", *v11);
    v10 = v17;
    if ((v17 & 0x4000000) == 0)
    {
LABEL_32:
      if ((v10 & 0x8000000) == 0)
      {
LABEL_34:
        if (CFDictionaryGetCount(Mutable))
        {
          CMNotificationCenterGetDefaultLocalCenter();
          CMNotificationCenterPostNotification();
        }

        if (Mutable)
        {
          CFRelease(Mutable);
        }

        return;
      }

LABEL_33:
      CFDictionarySetValue(Mutable, @"HasAudioSampleDependencyInformation", *v11);
      goto LABEL_34;
    }

LABEL_71:
    v16 = *v11;
    CFDictionarySetValue(Mutable, @"HEVCSyncSampleNALUnitTypes", *v11);
    CFDictionarySetValue(Mutable, @"HEVCTemporalLevelInfoCombinations", v16);
    if ((v17 & 0x8000000) == 0)
    {
      goto LABEL_34;
    }

    goto LABEL_33;
  }

  if (CFEqual(cf1, @"TrackEditSegmentsChanged"))
  {
    CMNotificationCenterGetDefaultLocalCenter();

    CMNotificationCenterPostNotification();
  }
}

uint64_t MovieFormatReaderFinalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 120))
  {
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterRemoveListener();
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterBarrier();
  }

  if (*DerivedStorage)
  {
    CFRelease(*DerivedStorage);
    *DerivedStorage = 0;
  }

  v1 = *(DerivedStorage + 24);
  if (v1)
  {
    CFRelease(v1);
    *(DerivedStorage + 24) = 0;
  }

  if (*(DerivedStorage + 16))
  {
    FigSimpleMutexDestroy();
  }

  v2 = *(DerivedStorage + 8);
  if (v2)
  {
    CFRelease(v2);
    *(DerivedStorage + 8) = 0;
  }

  if (*(DerivedStorage + 80))
  {
    FigSimpleMutexDestroy();
  }

  v3 = *(DerivedStorage + 64);
  if (v3)
  {
    CFRelease(v3);
    *(DerivedStorage + 64) = 0;
  }

  v4 = *(DerivedStorage + 88);
  if (v4)
  {
    CFRelease(v4);
    *(DerivedStorage + 88) = 0;
  }

  v5 = *(DerivedStorage + 104);
  if (v5)
  {
    CFRelease(v5);
    *(DerivedStorage + 104) = 0;
  }

  v6 = *(DerivedStorage + 96);
  if (v6)
  {
    CFRelease(v6);
    *(DerivedStorage + 96) = 0;
  }

  v7 = *(DerivedStorage + 112);
  if (v7)
  {
    CFRelease(v7);
    *(DerivedStorage + 112) = 0;
  }

  return FigSimpleMutexDestroy();
}

__CFString *MovieFormatReaderCopyDebugDescription(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v3, 0);
  v5 = *(DerivedStorage + 8);
  if (v5)
  {
    if (*DerivedStorage)
    {
      v6 = CFCopyDescription(*DerivedStorage);
      v5 = *(DerivedStorage + 8);
    }

    else
    {
      v6 = 0;
    }

    TrackCount = MovieInformationGetTrackCount(v5);
    IsMutable = MovieInformationIsMutable(*(DerivedStorage + 8));
    v9 = " Mutable";
    if (!IsMutable)
    {
      v9 = "";
    }

    CFStringAppendFormat(Mutable, 0, @"\tMovieFormatReader: %p stream<%@> trackCount<%d>%s", a1, v6, TrackCount, v9);
    if (v6)
    {
      CFRelease(v6);
    }
  }

  else
  {
    CFStringAppendFormat(Mutable, 0, @"\tMovieFormatReader: %p APPEARS INVALIDATED", a1);
  }

  return Mutable;
}

uint64_t MovieFormatReaderCopyProperty(uint64_t a1, const void *a2, const __CFAllocator *a3, CFDictionaryRef *a4)
{
  v46 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*(DerivedStorage + 8));
  if (!a4)
  {
    MovieFormatReaderCopyProperty_cold_6(keys);
    goto LABEL_31;
  }

  *a4 = 0;
  if (CFEqual(a2, @"Duration"))
  {
    keys[1] = 0;
    *&v43 = 0;
    keys[0] = 0;
    MovieInformationGetMovieDuration(*(DerivedStorage + 8), keys);
    context = **&MEMORY[0x1E6960CC0];
    FigSimpleMutexLock();
    CFDictionaryApplyFunction(*(DerivedStorage + 24), FindMaximumEditedTrackDuration, &context);
    FigSimpleMutexUnlock();
    time1 = context;
    *&v40.value = *keys;
    v40.epoch = v43;
    if (CMTimeCompare(&time1, &v40) < 0)
    {
      *keys = *&context.value;
      *&v43 = context.epoch;
    }

    *&time1.value = *keys;
    time1.epoch = v43;
    v8 = CMTimeCopyAsDictionary(&time1, a3);
    *a4 = v8;
    if (!v8)
    {
      MovieFormatReaderCopyProperty_cold_1(&time1);
      value_low = LODWORD(time1.value);
      goto LABEL_10;
    }

LABEL_9:
    value_low = 0;
    goto LABEL_10;
  }

  if (CFEqual(a2, @"NominalDuration"))
  {
    keys[1] = 0;
    *&v43 = 0;
    keys[0] = 0;
    MovieInformationGetMovieDuration(*(DerivedStorage + 8), keys);
    *&context.value = *keys;
    context.epoch = v43;
    v10 = CMTimeCopyAsDictionary(&context, a3);
    *a4 = v10;
    if (v10)
    {
      goto LABEL_9;
    }

    MovieFormatReaderCopyProperty_cold_2(&context);
LABEL_38:
    value_low = LODWORD(context.value);
    goto LABEL_10;
  }

  if (CFEqual(a2, @"Identifier"))
  {
    v12 = kFigFormatReaderIdentifier_QuickTime_ISO;
LABEL_16:
    v13 = *v12;
LABEL_17:
    AlternateGroupArray = CFRetain(v13);
LABEL_18:
    value_low = 0;
LABEL_19:
    *a4 = AlternateGroupArray;
    goto LABEL_10;
  }

  if (CFEqual(a2, @"AccurateDurationIsKnown") || CFEqual(a2, @"SampleCursorTimeAccuracyIsExact"))
  {
LABEL_15:
    v12 = MEMORY[0x1E695E4D0];
    goto LABEL_16;
  }

  if (CFEqual(a2, @"ImportantResourceLocation"))
  {
    time1.value = 0;
    v40.value = 0;
    keys[0] = @"LocationOffset";
    keys[1] = @"LocationSize";
    MovieInformationGetMoovLocation(*(DerivedStorage + 8), &time1, &v40);
    v15 = *MEMORY[0x1E695E480];
    context.value = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt64Type, &time1);
    *&context.timescale = CFNumberCreate(v15, kCFNumberSInt64Type, &v40);
    *a4 = CFDictionaryCreate(a3, keys, &context, 2, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (context.value)
    {
      CFRelease(context.value);
    }

    v16 = *&context.timescale;
    if (!*&context.timescale)
    {
      goto LABEL_9;
    }

    goto LABEL_24;
  }

  if (CFEqual(a2, @"AlternateGroupArray"))
  {
    v17 = *(DerivedStorage + 8);
    v18 = a3;
    v19 = 1;
LABEL_29:
    AlternateGroupArray = MovieInformationCreateAlternateGroupArray(v18, v17, v19);
    goto LABEL_18;
  }

  if (CFEqual(a2, @"AlternateGroupAssignmentsArray"))
  {
    v17 = *(DerivedStorage + 8);
    v18 = a3;
    v19 = 0;
    goto LABEL_29;
  }

  if (CFEqual(a2, @"TrackReferenceDictionary"))
  {
    TrackReferenceDictionary = MovieInformationCreateTrackReferenceDictionary(a3, *(DerivedStorage + 8), a4);
LABEL_36:
    value_low = TrackReferenceDictionary;
    goto LABEL_10;
  }

  if (CFEqual(a2, @"Lyrics"))
  {
    TrackReferenceDictionary = GetLyricsFromMovieMetadata(a3, DerivedStorage, a4);
    goto LABEL_36;
  }

  if (CFEqual(a2, @"LyricsScanCompleted"))
  {
    value_low = 0;
    *a4 = *MEMORY[0x1E695E4D0];
    goto LABEL_10;
  }

  if (CFEqual(a2, @"PreferredRate"))
  {
    LODWORD(keys[0]) = 1065353216;
    v21 = *(DerivedStorage + 8);
    v22 = keys;
    v23 = 0;
LABEL_45:
    MovieInformationGetBasicMetrics(v21, v22, v23, 0, 0);
    v24 = *MEMORY[0x1E695E480];
    v25 = kCFNumberFloat32Type;
LABEL_46:
    AlternateGroupArray = CFNumberCreate(v24, v25, keys);
    goto LABEL_18;
  }

  if (CFEqual(a2, @"PreferredVolume"))
  {
    LODWORD(keys[0]) = 1065353216;
    v21 = *(DerivedStorage + 8);
    v23 = keys;
    v22 = 0;
    goto LABEL_45;
  }

  if (CFEqual(a2, @"Timescale"))
  {
    LODWORD(keys[0]) = 0;
    MovieInformationGetBasicMetrics(*(DerivedStorage + 8), 0, 0, keys, 0);
LABEL_49:
    v24 = *MEMORY[0x1E695E480];
    v25 = kCFNumberSInt32Type;
    goto LABEL_46;
  }

  if (CFEqual(a2, @"MovieMatrix"))
  {
    v44 = 0;
    *keys = 0u;
    v43 = 0u;
    MovieInformationGetBasicMetrics(*(DerivedStorage + 8), 0, 0, 0, keys);
    AlternateGroupArray = FigMatrixToCFArray(a3, keys);
    goto LABEL_18;
  }

  if (CFEqual(a2, @"iTunesGaplessInfo"))
  {
    AlternateGroupArray = CreateiTunesGaplessInfoDictionaryEnhanced(DerivedStorage);
    goto LABEL_18;
  }

  if (CFEqual(a2, @"iTunesSoundCheckVolumeNormalization"))
  {
    keys[0] = CopySoundCheckInfoDictionary_0(DerivedStorage);
    if (keys[0])
    {
      LODWORD(context.value) = 0;
      LODWORD(time1.value) = 4;
      if (AudioFormatGetProperty(0x73636462u, 8u, keys, &time1, &context))
      {
        CFRelease(keys[0]);
        goto LABEL_58;
      }

      v26 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberFloat32Type, &context);
      CFRelease(keys[0]);
      if (!v26)
      {
        goto LABEL_58;
      }

LABEL_62:
      value_low = 0;
      *a4 = v26;
      goto LABEL_10;
    }

LABEL_58:
    value_low = 4294954512;
    goto LABEL_10;
  }

  if (CFEqual(a2, @"SoundCheckInfo"))
  {
    AlternateGroupArray = CopySoundCheckInfoDictionary_0(DerivedStorage);
    goto LABEL_18;
  }

  if (!CFEqual(a2, @"iTunesStoreItemKind"))
  {
    if (CFEqual(a2, @"QuickTimeUserDataReader"))
    {
      AssureQuickTimeUserDataReaderCreated(DerivedStorage);
      v13 = *(DerivedStorage + 88);
      if (v13)
      {
        goto LABEL_17;
      }

LABEL_80:
      value_low = 4294954513;
      goto LABEL_10;
    }

    if (CFEqual(a2, @"QuickTimeMetadataReader"))
    {
      AssureQuickTimeMetadataReaderCreated(DerivedStorage);
      v13 = *(DerivedStorage + 96);
      if (v13)
      {
        goto LABEL_17;
      }

      goto LABEL_80;
    }

    if (CFEqual(a2, @"ISOUserDataReader"))
    {
      AssureISOUserDataReaderCreated(DerivedStorage);
      v13 = *(DerivedStorage + 104);
      if (v13)
      {
        goto LABEL_17;
      }

      goto LABEL_80;
    }

    if (CFEqual(a2, @"iTunesMetadataReader"))
    {
      AssureiTunesMetadataReaderCreated(DerivedStorage);
      v13 = *(DerivedStorage + 112);
      if (v13)
      {
        goto LABEL_17;
      }

      goto LABEL_80;
    }

    if (CFEqual(a2, @"MetadataReaders"))
    {
      AssureQuickTimeUserDataReaderCreated(DerivedStorage);
      AssureQuickTimeMetadataReaderCreated(DerivedStorage);
      AssureISOUserDataReaderCreated(DerivedStorage);
      AssureiTunesMetadataReaderCreated(DerivedStorage);
      if (!*(DerivedStorage + 88) && !*(DerivedStorage + 104) && !*(DerivedStorage + 96) && !*(DerivedStorage + 112))
      {
        goto LABEL_9;
      }

      Mutable = CFArrayCreateMutable(a3, 0, MEMORY[0x1E695E9C0]);
      if (Mutable)
      {
        v26 = Mutable;
        v30 = *(DerivedStorage + 96);
        if (v30)
        {
          CFArrayAppendValue(Mutable, v30);
        }

        v31 = *(DerivedStorage + 112);
        if (v31)
        {
          CFArrayAppendValue(v26, v31);
        }

        v32 = *(DerivedStorage + 88);
        if (v32)
        {
          CFArrayAppendValue(v26, v32);
        }

        v33 = *(DerivedStorage + 104);
        if (v33)
        {
          CFArrayAppendValue(v26, v33);
        }

        goto LABEL_62;
      }

      MovieFormatReaderCopyProperty_cold_3(keys);
      goto LABEL_31;
    }

    if (CFEqual(a2, @"MetadataReaderTypes"))
    {
      v34 = CFArrayCreateMutable(a3, 0, MEMORY[0x1E695E9C0]);
      if (v34)
      {
        v26 = v34;
        if (MovieInformationMetadataFormatIsAvailable(*(DerivedStorage + 8), @"com.apple.itunes"))
        {
          CFArrayAppendValue(v26, @"iTunesMetadataReader");
        }

        if (MovieInformationMetadataFormatIsAvailable(*(DerivedStorage + 8), @"com.apple.quicktime.mdta"))
        {
          CFArrayAppendValue(v26, @"QuickTimeMetadataReader");
        }

        if (MovieInformationMetadataFormatIsAvailable(*(DerivedStorage + 8), @"com.apple.quicktime.udta"))
        {
          CFArrayAppendValue(v26, @"QuickTimeUserDataReader");
        }

        if (MovieInformationMetadataFormatIsAvailable(*(DerivedStorage + 8), @"org.mp4ra"))
        {
          CFArrayAppendValue(v26, @"ISOUserDataReader");
        }

        if (CFArrayGetCount(v26) < 1)
        {
          v16 = v26;
LABEL_24:
          CFRelease(v16);
          goto LABEL_9;
        }

        goto LABEL_62;
      }

      MovieFormatReaderCopyProperty_cold_4(keys);
LABEL_31:
      value_low = LODWORD(keys[0]);
      goto LABEL_10;
    }

    if (CFEqual(a2, @"CreationDate"))
    {
      CopyCreationDate(a3, DerivedStorage, a4);
      goto LABEL_36;
    }

    if (CFEqual(a2, @"HasCompressedMovieAtom"))
    {
      HasCompressedMovieAtom = MovieInformationHasCompressedMovieAtom(*(DerivedStorage + 8));
      goto LABEL_110;
    }

    if (CFEqual(a2, @"CouldContainFragments"))
    {
      if (!MovieInformationCouldContainFragments(*(DerivedStorage + 8)))
      {
        goto LABEL_120;
      }
    }

    else
    {
      if (!CFEqual(a2, @"ContainsFragments"))
      {
        if (CFEqual(a2, @"MovieExtendsDuration"))
        {
          keys[1] = 0;
          *&v43 = 0;
          keys[0] = 0;
          MovieInformationGetMovieExtendsDuration(*(DerivedStorage + 8), keys);
          *&context.value = *keys;
          context.epoch = v43;
          v38 = CMTimeCopyAsDictionary(&context, a3);
          *a4 = v38;
          if (v38)
          {
            goto LABEL_9;
          }

          MovieFormatReaderCopyProperty_cold_5(&context);
          goto LABEL_38;
        }

        if (CFEqual(a2, @"CanMutate"))
        {
          HasCompressedMovieAtom = MovieInformationIsMutable(*(DerivedStorage + 8));
        }

        else if (CFEqual(a2, @"IsSelfContained"))
        {
          HasCompressedMovieAtom = MovieInformationAllTracksAreSelfContained(*(DerivedStorage + 8));
        }

        else
        {
          if (!CFEqual(a2, @"ContainsChapters"))
          {
            if (CFEqual(a2, @"PictureCollection"))
            {
              TrackReferenceDictionary = CopyPictureCollection(a3, DerivedStorage, a4);
              goto LABEL_36;
            }

            if (CFEqual(a2, @"FirstFragmentSequenceNumber"))
            {
              LODWORD(keys[0]) = 0;
              if (MovieInformationGetFirstFragmentSequenceNumber(*(DerivedStorage + 8), keys))
              {
                goto LABEL_49;
              }
            }

            else
            {
              if (!CFEqual(a2, @"FragmentCount"))
              {
                if (!CFEqual(a2, @"IsAssetAnalysisActive"))
                {
                  if (CFEqual(a2, @"AssetAnalysisMessages"))
                  {
                    if (MovieInformationGetAssetAnalysisReporter(*(DerivedStorage + 8)))
                    {
                      FigAssetAnalysisReporterCopyMessages();
                    }

                    goto LABEL_9;
                  }

                  goto LABEL_58;
                }

                AssetAnalysisReporter = MovieInformationGetAssetAnalysisReporter(*(DerivedStorage + 8));
                v12 = MEMORY[0x1E695E4D0];
                v36 = MEMORY[0x1E695E4C0];
                v37 = AssetAnalysisReporter == 0;
LABEL_111:
                if (v37)
                {
                  v12 = v36;
                }

                goto LABEL_16;
              }

              LODWORD(keys[0]) = 0;
              if (MovieInformationGetParsedFragmentCount(*(DerivedStorage + 8), keys))
              {
                goto LABEL_49;
              }
            }

            AlternateGroupArray = 0;
            goto LABEL_18;
          }

          HasCompressedMovieAtom = MovieInformationContainsChapters(*(DerivedStorage + 8));
        }

LABEL_110:
        v12 = MEMORY[0x1E695E4D0];
        v36 = MEMORY[0x1E695E4C0];
        v37 = HasCompressedMovieAtom == 0;
        goto LABEL_111;
      }

      if (!MovieInformationContainsFragments(*(DerivedStorage + 8)))
      {
LABEL_120:
        v12 = MEMORY[0x1E695E4C0];
        goto LABEL_16;
      }
    }

    if (!*(*(DerivedStorage + 8) + 91))
    {
      goto LABEL_15;
    }

    goto LABEL_120;
  }

  keys[0] = 0;
  value_low = CopyiTunesStoreItemKindValue(a3, DerivedStorage, keys);
  AlternateGroupArray = keys[0];
  if (!value_low)
  {
    if (keys[0])
    {
      v27 = CFGetTypeID(keys[0]);
      TypeID = CFNumberGetTypeID();
      AlternateGroupArray = keys[0];
      if (v27 == TypeID)
      {
        goto LABEL_19;
      }
    }
  }

  if (AlternateGroupArray)
  {
    CFRelease(AlternateGroupArray);
  }

LABEL_10:
  MovieInformationUnlockForRead(*(DerivedStorage + 8));
  return value_low;
}

uint64_t GetLyricsFromMovieMetadata(uint64_t a1, uint64_t a2, void *a3)
{
  *a3 = 0;
  AssureiTunesMetadataReaderCreated(a2);
  v6 = *(a2 + 112);
  if (!v6)
  {
    return 0;
  }

  v7 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v7)
  {
    return 4294954514;
  }

  return v7(v6, @"itsk", @"@lyr", 0, a1, a3, 0);
}

CFMutableDictionaryRef CreateiTunesGaplessInfoDictionaryEnhanced(uint64_t a1)
{
  if (*(a1 + 32))
  {
    if (!*(a1 + 33))
    {
      return 0;
    }
  }

  else
  {
    AssureiTunesMetadataReaderCreated(a1);
    v2 = FigGaplessInfoFetchiTunesParametersFromMetadataReader(*(a1 + 112), a1 + 40);
    *(a1 + 33) = v2;
    *(a1 + 32) = 1;
    if (!v2)
    {
      return 0;
    }
  }

  v3 = *(a1 + 8);
  v16 = **&MEMORY[0x1E6960C70];
  NthTrackOfType = MovieInformationFindNthTrackOfType(v3, 0, 1936684398);
  if (!NthTrackOfType)
  {
    return 0;
  }

  v5 = NthTrackOfType;
  v6 = MovieTrackCopyFormatDescriptionArray(NthTrackOfType);
  if (!v6)
  {
    return 0;
  }

  v7 = v6;
  if (CFArrayGetCount(v6) >= 1 && (ValueAtIndex = CFArrayGetValueAtIndex(v7, 0)) != 0)
  {
    v9 = ValueAtIndex;
    MovieTrackGetMediaDuration(v5, &v16);
    v10 = *(a1 + 40);
    v11 = *(a1 + 44);
    v12 = *(a1 + 48);
    v15 = v16;
    v13 = FigGaplessInfoCreateEnhanced_CorrectingWithUneditedDuration(v9, &v15, v10, v11, v12);
  }

  else
  {
    v13 = 0;
  }

  CFRelease(v7);
  return v13;
}

CFTypeRef CopySoundCheckInfoDictionary_0(uint64_t a1)
{
  v36 = *MEMORY[0x1E69E9840];
  cf = 0;
  FigSimpleMutexLock();
  if (*(a1 + 56))
  {
    goto LABEL_2;
  }

  *(a1 + 56) = 1;
  AssureiTunesMetadataReaderCreated(a1);
  v3 = *(a1 + 112);
  if (!v3)
  {
    goto LABEL_2;
  }

  v4 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v4)
  {
    goto LABEL_2;
  }

  alloc = *MEMORY[0x1E695E480];
  if (v4(v3, @"itlk", @"com.apple.iTunes.iTunNORM", 0) || cf == 0)
  {
    goto LABEL_2;
  }

  TypeID = CFStringGetTypeID();
  if (TypeID == CFGetTypeID(cf))
  {
    v7 = CFRetain(cf);
  }

  else
  {
    v8 = CFDataGetTypeID();
    if (v8 != CFGetTypeID(cf))
    {
LABEL_2:
      FigSimpleMutexUnlock();
      goto LABEL_3;
    }

    BytePtr = CFDataGetBytePtr(cf);
    Length = CFDataGetLength(cf);
    v7 = CFStringCreateWithBytes(alloc, BytePtr, Length, 0x8000100u, 0);
  }

  v11 = v7;
  if (!v7)
  {
    goto LABEL_2;
  }

  v12 = CFStringGetLength(v7);
  if (v12 <= 44)
  {
    CopySoundCheckInfoDictionary_cold_2();
  }

  else
  {
    v13 = v12;
    v14 = (v12 / 9) / 5;
    v26 = v12 / 9;
    if (5 * v14 == (v12 / 9))
    {
      v15 = malloc_type_malloc(v12 + 1, 0x4DAE81F8uLL);
      if (v15)
      {
        v16 = v15;
        if (CFStringGetCString(v11, v15, v13 + 1, 0))
        {
          v24 = v11;
          v17 = 0;
          keys[0] = xmmword_1E7490230;
          keys[1] = *off_1E7490240;
          v35 = @"sc peak amplitude msec";
          v33 = 0;
          if (v14 <= 1)
          {
            v18 = 1;
          }

          else
          {
            v18 = v14;
          }

          v25 = v18;
          *values = 0u;
          v32 = 0u;
          v23 = v16;
          do
          {
            v28 = 0;
            if (v26 >= 5)
            {
              v19 = cStr;
              v20 = v25;
              do
              {
                sscanf(v16, "%X", &v28);
                v16 += 9;
                snprintf(v19, values - v19, "%u%s", v28, " ");
                v19 += strlen(v19);
                --v20;
              }

              while (v20);
            }

            values[v17++] = CFStringCreateWithCString(alloc, cStr, 0);
          }

          while (v17 != 5);
          v21 = 0;
          *(a1 + 64) = CFDictionaryCreate(alloc, keys, values, 5, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
          v16 = v23;
          do
          {
            v22 = values[v21];
            if (v22)
            {
              CFRelease(v22);
            }

            ++v21;
          }

          while (v21 != 5);
          v11 = v24;
        }

        free(v16);
      }

      else
      {
        fig_log_get_emitter();
        FigSignalErrorAtGM();
      }
    }

    else
    {
      CopySoundCheckInfoDictionary_cold_1();
    }
  }

  FigSimpleMutexUnlock();
  CFRelease(v11);
LABEL_3:
  if (cf)
  {
    CFRelease(cf);
  }

  result = *(a1 + 64);
  if (result)
  {
    return CFRetain(result);
  }

  return result;
}

uint64_t CopyiTunesStoreItemKindValue(uint64_t a1, uint64_t a2, void *a3)
{
  *a3 = 0;
  AssureiTunesMetadataReaderCreated(a2);
  v6 = *(a2 + 112);
  if (!v6)
  {
    return 0;
  }

  v7 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v7)
  {
    return 4294954514;
  }

  return v7(v6, @"itsk", @"stik", 0, a1, a3, 0);
}

uint64_t AssureQuickTimeUserDataReaderCreated(uint64_t a1)
{
  FigSimpleMutexLock();
  if (!*(a1 + 88))
  {
    MovieInformationLockForRead(*(a1 + 8));
    MovieInformationCreateQuickTimeUserDataReader(*(a1 + 8), (a1 + 88));
    MovieInformationUnlockForRead(*(a1 + 8));
  }

  return FigSimpleMutexUnlock();
}

uint64_t AssureQuickTimeMetadataReaderCreated(uint64_t a1)
{
  FigSimpleMutexLock();
  if (!*(a1 + 96))
  {
    MovieInformationLockForRead(*(a1 + 8));
    MovieInformationCreateQuickTimeMetadataReader(*(a1 + 8), (a1 + 96));
    MovieInformationUnlockForRead(*(a1 + 8));
  }

  return FigSimpleMutexUnlock();
}

uint64_t AssureISOUserDataReaderCreated(uint64_t a1)
{
  FigSimpleMutexLock();
  if (!*(a1 + 104))
  {
    MovieInformationLockForRead(*(a1 + 8));
    MovieInformationCreateISOUserDataReader(*(a1 + 8), (a1 + 104));
    MovieInformationUnlockForRead(*(a1 + 8));
  }

  return FigSimpleMutexUnlock();
}

uint64_t AssureiTunesMetadataReaderCreated(uint64_t a1)
{
  FigSimpleMutexLock();
  if (!*(a1 + 112))
  {
    MovieInformationLockForRead(*(a1 + 8));
    MovieInformationCreateiTunesMetadataReader(*(a1 + 8), (a1 + 112));
    MovieInformationUnlockForRead(*(a1 + 8));
  }

  return FigSimpleMutexUnlock();
}

double FindMaximumEditedTrackDuration(uint64_t a1, const void *a2, CMTime *a3)
{
  memset(&v7, 0, sizeof(v7));
  GetTrackEditedDuration(a2, &v7);
  time1 = v7;
  v5 = *a3;
  if (CMTimeCompare(&time1, &v5) >= 1)
  {
    result = *&v7.value;
    *a3 = v7;
  }

  return result;
}

void GetTrackEditedDuration(const void *a1@<X0>, CMTime *a2@<X8>)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = *(DerivedStorage + 8);
  v6 = MEMORY[0x1E6960C70];
  v29 = 0;
  a2->epoch = *(MEMORY[0x1E6960C70] + 16);
  *&a2->value = *v6;
  if (*(v5 + 723))
  {
    if (*(v5 + 201))
    {
      v7 = MEMORY[0x1E6960C68];
      *&a2->value = *MEMORY[0x1E6960C68];
      a2->epoch = *(v7 + 16);
    }

    else
    {
      v19 = DerivedStorage;
      TrackDurationValue = MovieTrackGetTrackDurationValue(v5);
      v21 = *(*v19 + 240);

      CMTimeMake(a2, TrackDurationValue, v21);
    }
  }

  else
  {
    v27 = 0uLL;
    v28 = 0;
    MovieTrackGetMediaDuration(v5, &v27);
    v26 = 0;
    MovieTrackReaderCreateEditCursorService(a1, *MEMORY[0x1E695E480], &v26);
    memset(&v25, 0, sizeof(v25));
    GetGaplessSourceTimeRange(&v25);
    v8 = v26;
    *&range.start.value = v27;
    range.start.epoch = v28;
    v24 = v25;
    FigGaplessInfoCreateSegmentDataForTrack(v26, &range.start, &v24, &v29);
    if (v8)
    {
      CFRelease(v8);
    }

    if (v29 && (v9 = CFGetTypeID(v29), v9 == CFDataGetTypeID()))
    {
      v10 = MEMORY[0x1E6960CC0];
      *&a2->value = *MEMORY[0x1E6960CC0];
      a2->epoch = *(v10 + 16);
      Length = CFDataGetLength(v29);
      if (Length >= 0x60)
      {
        v12 = Length;
        BytePtr = CFDataGetBytePtr(v29);
        v14 = *(BytePtr + 4);
        *&v24.start.value = *(BytePtr + 3);
        *&v24.start.epoch = v14;
        *&v24.duration.timescale = *(BytePtr + 5);
        if (v12 >= 0xC0)
        {
          v15 = &BytePtr[96 * (v12 / 0x60)];
          v16 = *(BytePtr + 4);
          *&range.start.value = *(BytePtr + 3);
          *&range.start.epoch = v16;
          *&range.duration.timescale = *(BytePtr + 5);
          v17 = *(v15 - 3);
          v18 = *(v15 - 1);
          *&v22.start.epoch = *(v15 - 2);
          *&v22.duration.timescale = v18;
          *&v22.start.value = v17;
          CMTimeRangeGetUnion(&v24, &range, &v22);
        }

        *a2 = v24.duration;
      }
    }

    else
    {
      MovieTrackGetMediaDuration(v5, a2);
    }

    if (v29)
    {
      CFRelease(v29);
    }
  }
}

uint64_t MovieTrackReaderCreateEditCursorService(const void *a1, uint64_t a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v7 = *DerivedStorage;
  v6 = *(DerivedStorage + 8);
  if (MovieTrackIsValid(v6))
  {
    FigEditCursorServiceGetClassID();
    v8 = CMDerivedObjectCreate();
    if (!v8)
    {
      v9 = CMBaseObjectGetDerivedStorage();
      if (v7)
      {
        v10 = CFRetain(v7);
      }

      else
      {
        v10 = 0;
      }

      *v9 = v10;
      if (v6)
      {
        v11 = CFRetain(v6);
        v10 = *v9;
      }

      else
      {
        v11 = 0;
      }

      *(v9 + 8) = v11;
      if (v10[90])
      {
        if (a1)
        {
          v12 = CFRetain(a1);
        }

        else
        {
          v12 = 0;
        }

        *(v9 + 16) = v12;
        CMNotificationCenterGetDefaultLocalCenter();
        FigNotificationCenterAddWeakListener();
        *(v9 + 24) = 1;
        CMNotificationCenterGetDefaultLocalCenter();
        FigNotificationCenterAddWeakListener();
        *(v9 + 25) = 1;
      }

      v8 = 0;
      *a3 = 0;
    }
  }

  else
  {
    MovieTrackReaderCreateEditCursorService_cold_1(&v14);
    return v14;
  }

  return v8;
}

void GetGaplessSourceTimeRange(_OWORD *a1@<X8>)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = MEMORY[0x1E6960C98];
  v4 = *(MEMORY[0x1E6960C98] + 16);
  *a1 = *MEMORY[0x1E6960C98];
  a1[1] = v4;
  a1[2] = *(v3 + 32);
  v8 = 0;
  v6 = (DerivedStorage + 8);
  v5 = *(DerivedStorage + 8);
  if (*(v5 + 24) == 1936684398)
  {
    v7 = MovieTrackCopyFormatDescriptionArray(v5);
    if (v7)
    {
      GetGaplessSourceTimeRange_cold_1(v7, v6, &v8);
    }
  }
}

uint64_t MovieEditCursorServiceEditsChanged()
{
  CMNotificationCenterGetDefaultLocalCenter();

  return CMNotificationCenterPostNotification();
}

uint64_t MovieEditCursorServiceTimeRangesMayNoLongerIncrease()
{
  CMNotificationCenterGetDefaultLocalCenter();

  return CMNotificationCenterPostNotification();
}

void MovieEditCursorServiceFinalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 24))
  {
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    *(DerivedStorage + 24) = 0;
  }

  if (*(DerivedStorage + 25))
  {
    CMNotificationCenterGetDefaultLocalCenter();
    FigNotificationCenterRemoveWeakListener();
    *(DerivedStorage + 25) = 0;
  }

  v1 = *(DerivedStorage + 16);
  if (v1)
  {
    CFRelease(v1);
    *(DerivedStorage + 16) = 0;
  }

  if (*DerivedStorage)
  {
    CFRelease(*DerivedStorage);
    *DerivedStorage = 0;
  }

  v2 = *(DerivedStorage + 8);
  if (v2)
  {
    CFRelease(v2);
    *(DerivedStorage + 8) = 0;
  }
}

__CFString *MovieEditCursorServiceCopyDebugDescription(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v3, 0);
  v5 = *DerivedStorage;
  if (*DerivedStorage)
  {
    v6 = DerivedStorage[1];
    if (v6)
    {
      v9 = 1061109567;
      v8 = 0;
      MovieInformationLockForRead(v5);
      MovieTrackGetBasicInfo(v6, &v9, &v8);
      MovieInformationUnlockForRead(*DerivedStorage);
      CFStringAppendFormat(Mutable, 0, @"<MovieEditCursorService: '%c%c%c%c' trackID %d>", HIBYTE(v9), BYTE2(v9), BYTE1(v9), v9, v8);
    }
  }

  return Mutable;
}

void MovieEditCursorFinalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    CFRelease(*DerivedStorage);
    *DerivedStorage = 0;
  }

  v1 = *(DerivedStorage + 8);
  if (v1)
  {
    CFRelease(v1);
    *(DerivedStorage + 8) = 0;
  }
}

__CFString *MovieEditCursorCopyDebugDescription(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v3, 0);
  v5 = *DerivedStorage;
  if (*DerivedStorage)
  {
    v6 = *(DerivedStorage + 8);
    if (v6)
    {
      v8 = 0;
      MovieInformationLockForRead(v5);
      MovieTrackGetBasicInfo(v6, &v8, &v8 + 1);
      MovieInformationUnlockForRead(*DerivedStorage);
      CFStringAppendFormat(Mutable, 0, @"<MovieEditCursor: %c%c%c%c trackID %d, editIndex %d>", BYTE3(v8), BYTE2(v8), BYTE1(v8), v8, HIDWORD(v8), *(DerivedStorage + 16));
    }
  }

  return Mutable;
}

uint64_t MovieEditCursorCopyProperty(uint64_t a1, const void *a2, uint64_t a3, CFTypeRef *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (!a4)
  {
    MovieEditCursorCopyProperty_cold_1(&v12);
    v10 = v12;
    goto LABEL_13;
  }

  *a4 = 0;
  if (CFEqual(a2, @"TimeRangesMayIncrease"))
  {
    v7 = *MEMORY[0x1E695E4C0];
    if (*(*DerivedStorage + 90) && MovieInformationCouldContainFragments(*DerivedStorage))
    {
      v7 = *MEMORY[0x1E695E4D0];
    }

    v8 = v7;
  }

  else
  {
    if (!CFEqual(a2, @"RepeatsEdits"))
    {
      v10 = 4294954512;
      goto LABEL_13;
    }

    if (*(DerivedStorage[1] + 723))
    {
      v9 = MEMORY[0x1E695E4D0];
    }

    else
    {
      v9 = MEMORY[0x1E695E4C0];
    }

    v8 = *v9;
  }

  v10 = 0;
  *a4 = CFRetain(v8);
LABEL_13:
  MovieInformationUnlockForRead(*DerivedStorage);
  return v10;
}

uint64_t CopyCreationDateAsDictionary(const __CFAllocator *a1, const void *a2, const __CFDictionary *a3, __CFDictionary **a4)
{
  if (a4)
  {
    Mutable = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      v8 = Mutable;
      CFDictionaryAddValue(Mutable, @"CreationDate_Value", a2);
      if (a3 && CFDictionaryGetValue(a3, @"locale"))
      {
        v9 = MEMORY[0x19A8CD070]();
        if (v9)
        {
          CFDictionaryAddValue(v8, @"CreationDate_LocaleIdentifier", v9);
        }
      }

      result = 0;
      *a4 = v8;
    }

    else
    {
      CopyCreationDateAsDictionary_cold_1(&v11);
      return v11;
    }
  }

  else
  {
    CopyCreationDateAsDictionary_cold_2(&v12);
    return v12;
  }

  return result;
}

uint64_t MovieFormatReaderGetTrackCount(uint64_t a1, uint64_t *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*(DerivedStorage + 8));
  *a2 = MovieInformationGetTrackCount(*(DerivedStorage + 8));
  MovieInformationUnlockForRead(*(DerivedStorage + 8));
  return 0;
}

uint64_t CreateTrackReaderForMovieTrack(uint64_t a1, const void *a2, const void *a3, void *a4)
{
  FigTrackReaderGetClassID();
  v7 = CMDerivedObjectCreate();
  if (v7)
  {
    return v7;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a2)
  {
    v9 = CFRetain(a2);
  }

  else
  {
    v9 = 0;
  }

  *DerivedStorage = v9;
  if (a3)
  {
    v10 = CFRetain(a3);
  }

  else
  {
    v10 = 0;
  }

  DerivedStorage[1] = v10;
  v11 = FigReentrantMutexCreate();
  DerivedStorage[2] = v11;
  if (!v11)
  {
    v15 = 5379;
LABEL_15:
    CreateTrackReaderForMovieTrack_cold_1(v15, &v16);
    return v16;
  }

  v12 = FigSimpleMutexCreate();
  DerivedStorage[6] = v12;
  if (!v12)
  {
    v15 = 5382;
    goto LABEL_15;
  }

  v13 = 0;
  *a4 = 0;
  return v13;
}

void MovieTrackReaderFinalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 64))
  {
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterRemoveListener();
    CMNotificationCenterGetDefaultLocalCenter();
    CMNotificationCenterBarrier();
  }

  v1 = *(DerivedStorage + 24);
  if (v1)
  {
    CFRelease(v1);
    *(DerivedStorage + 24) = 0;
  }

  v2 = *(DerivedStorage + 40);
  if (v2)
  {
    CFRelease(v2);
    *(DerivedStorage + 40) = 0;
  }

  v3 = *(DerivedStorage + 32);
  if (v3)
  {
    CFRelease(v3);
    *(DerivedStorage + 32) = 0;
  }

  if (*(DerivedStorage + 16))
  {
    FigSimpleMutexDestroy();
    *(DerivedStorage + 16) = 0;
  }

  if (*(DerivedStorage + 48))
  {
    FigSimpleMutexDestroy();
    *(DerivedStorage + 48) = 0;
  }

  v4 = *(DerivedStorage + 56);
  if (v4)
  {
    CFRelease(v4);
    *(DerivedStorage + 56) = 0;
  }

  if (*DerivedStorage)
  {
    CFRelease(*DerivedStorage);
    *DerivedStorage = 0;
  }

  v5 = *(DerivedStorage + 8);
  if (v5)
  {
    CFRelease(v5);
    *(DerivedStorage + 8) = 0;
  }
}

CFMutableStringRef MovieTrackReaderCopyDebugDescription(const void *a1)
{
  v34 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v3, 0);
  if (*DerivedStorage)
  {
    v5 = DerivedStorage[1];
    if (v5)
    {
      TrackType = MovieTrackGetTrackType(DerivedStorage[1]);
      v31 = 0;
      MovieInformationLockForRead(*DerivedStorage);
      MovieTrackGetMediaDuration(v5, &time);
      timescale = time.timescale;
      value = time.value;
      v32 = *&time.flags;
      epoch_high = HIDWORD(time.epoch);
      MovieTrackGetBasicInfo(v5, &v31, &v31 + 1);
      NumFormatDescriptions = MovieTrackGetNumFormatDescriptions(v5);
      v8 = *(*DerivedStorage + 48);
      v27 = Mutable;
      if (v8)
      {
        v26 = CFCopyDescription(v8);
      }

      else
      {
        v26 = 0;
      }

      v9 = HIDWORD(v31);
      v23 = BYTE3(v31);
      v22 = BYTE2(v31);
      v20 = v31;
      v21 = BYTE1(v31);
      if (MovieTrackIsValid(v5))
      {
        v10 = "";
      }

      else
      {
        v10 = " (Invalidated)";
      }

      v11 = *(v5 + 288);
      time.value = value;
      time.timescale = timescale;
      *&time.flags = v32;
      HIDWORD(time.epoch) = epoch_high;
      Seconds = CMTimeGetSeconds(&time);
      v13 = "s";
      if (NumFormatDescriptions == 1)
      {
        v13 = "";
      }

      v19 = v10;
      Mutable = v27;
      CFStringAppendFormat(v27, 0, @"\tMovieTrackReader: stream<%@> mediaType %c%c%c%c trackType %c%c%c%c trackID %d%s contains %d samples media duration %1.3f seconds (%lld/%d) has %d formatDescription%s", v26, v23, v22, v21, v20, HIBYTE(TrackType), BYTE2(TrackType), BYTE1(TrackType), TrackType, v9, v19, v11, *&Seconds, value, timescale, NumFormatDescriptions, v13);
      v14 = *(v5 + 728);
      if (v14 && *(v14 + 56))
      {
        v15 = *(v14 + 8);
        CMTimeMake(&time, *v14, *(v5 + 232));
        v16 = CMTimeGetSeconds(&time);
        CMTimeMake(&lhs, *(v5 + 224), *(v5 + 232));
        CMTimeMake(&rhs, **(v5 + 728), *(v5 + 232));
        CMTimeAdd(&time, &lhs, &rhs);
        v17 = CMTimeGetSeconds(&time);
        CFStringAppendFormat(v27, 0, @"\nFragments supply %d samples or %1.3f seconds (%1.3f total media duration)", v15, *&v16, *&v17);
      }

      if (v26)
      {
        CFRelease(v26);
      }

      MovieInformationUnlockForRead(*DerivedStorage);
    }
  }

  return Mutable;
}

uint64_t MovieTrackReaderCopyProperty(const void *a1, const void *a2, const __CFAllocator *a3, CFDictionaryRef *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage && DerivedStorage[1])
  {
    v9 = CMBaseObjectGetDerivedStorage();
    v10 = *v9;
    v11 = v9[1];
    MovieInformationLockForRead(*v9);
    if (!a4)
    {
      MovieTrackReaderCopyProperty_cold_4(&valuePtr);
      goto LABEL_35;
    }

    if (!MovieTrackIsValid(v11))
    {
      MovieTrackReaderCopyProperty_cold_3(&valuePtr);
      goto LABEL_35;
    }

    *a4 = 0;
    if (CFEqual(a2, @"TrackFormatDescriptionArray"))
    {
      value = MovieTrackCopyFormatDescriptionArray(v11);
LABEL_19:
      MustBeShown = 0;
LABEL_20:
      *a4 = value;
LABEL_21:
      MovieInformationUnlockForRead(v10);
      return MustBeShown;
    }

    if (CFEqual(a2, @"TrackTimescale"))
    {
      MediaTimeScale = MovieTrackGetMediaTimeScale(v11);
LABEL_12:
      LODWORD(valuePtr.start.value) = MediaTimeScale;
      v15 = *MEMORY[0x1E695E480];
      v16 = kCFNumberSInt32Type;
LABEL_13:
      value = CFNumberCreate(v15, v16, &valuePtr);
      goto LABEL_19;
    }

    if (CFEqual(a2, @"TrackDuration"))
    {
      memset(&valuePtr, 0, 24);
      GetTrackEditedDuration(a1, &valuePtr.start);
LABEL_18:
      *&v49.start.value = *&valuePtr.start.value;
      v49.start.epoch = valuePtr.start.epoch;
      value = CMTimeCopyAsDictionary(&v49.start, a3);
      goto LABEL_19;
    }

    if (CFEqual(a2, @"UneditedTrackDuration"))
    {
      memset(&valuePtr, 0, 24);
      MovieTrackGetMediaDuration(v11, &valuePtr);
      goto LABEL_18;
    }

    if (CFEqual(a2, @"UneditedNumDataBytes"))
    {
      valuePtr.start.value = 0;
      MustBeShown = MovieTrackComputeTotalTrackBytes(v10, v11, &valuePtr.start.value);
      if (MustBeShown)
      {
        goto LABEL_21;
      }

      v18 = *MEMORY[0x1E695E480];
      p_valuePtr = &valuePtr;
      v20 = kCFNumberSInt64Type;
      goto LABEL_25;
    }

    if (CFEqual(a2, @"UneditedSampleCount"))
    {
      MediaTimeScale = MovieTrackGetSampleCount(v11);
      goto LABEL_12;
    }

    if (CFEqual(a2, @"EstimatedDataRate"))
    {
      v51 = 0;
      MustBeShown = MovieTrackComputeTotalTrackBytes(v10, v11, &v51);
      if (MustBeShown)
      {
        goto LABEL_21;
      }

      memset(&valuePtr, 0, 24);
      MovieTrackGetMediaDuration(v11, &valuePtr);
      v21 = v51;
      *&v49.start.value = *&valuePtr.start.value;
      v49.start.epoch = valuePtr.start.epoch;
      v22 = v21 / CMTimeGetSeconds(&v49.start);
      v52 = v22;
      v18 = *MEMORY[0x1E695E480];
      p_valuePtr = &v52;
      goto LABEL_40;
    }

    if (CFEqual(a2, @"PeakDataRate"))
    {
      LODWORD(valuePtr.start.value) = 0;
      v23 = MovieTrackComputePeakDataRate();
LABEL_38:
      MustBeShown = v23;
      if (v23)
      {
        goto LABEL_21;
      }

      v18 = *MEMORY[0x1E695E480];
      p_valuePtr = &valuePtr;
LABEL_40:
      v20 = kCFNumberFloat32Type;
LABEL_25:
      value = CFNumberCreate(v18, v20, p_valuePtr);
      goto LABEL_20;
    }

    if (CFEqual(a2, @"NominalFrameRate"))
    {
      LODWORD(valuePtr.start.value) = 0;
      v23 = MovieTrackComputeNominalFrameRate();
      goto LABEL_38;
    }

    if (CFEqual(a2, @"Volume"))
    {
      LODWORD(valuePtr.start.value) = MovieTrackGetVolume(v11);
      v15 = *MEMORY[0x1E695E480];
      v16 = kCFNumberFloat32Type;
      goto LABEL_13;
    }

    if (CFEqual(a2, @"LoudnessInfo"))
    {
      EditCursorService = CopyLoudnessDictionaryFromUserData(v9, a3, a4);
    }

    else
    {
      if (CFEqual(a2, @"TrackFrameReorderingRequired"))
      {
        v24 = *(v11 + 24);
        MustBeShown = 4294954452;
        if (v24 > 1935893869)
        {
          if (v24 != 1986618469)
          {
            v25 = 1935893870;
LABEL_53:
            if (v24 != v25)
            {
              goto LABEL_21;
            }
          }
        }

        else if (v24 != 1635088502)
        {
          v25 = 1885954932;
          goto LABEL_53;
        }

        IsFrameReorderingRequired = MovieTrackIsFrameReorderingRequired(v10, v11);
        goto LABEL_55;
      }

      if (CFEqual(a2, @"TrackLanguageCode"))
      {
        valuePtr.start.value = 0;
        MovieTrackGetLanguageInformation(v11, 0, &valuePtr, 0);
        value = valuePtr.start.value;
        if (!valuePtr.start.value)
        {
          goto LABEL_19;
        }

        goto LABEL_58;
      }

      if (CFEqual(a2, @"ExtendedLanguageTagString"))
      {
        valuePtr.start.value = 0;
        MovieTrackGetLanguageInformation(v11, 0, 0, &valuePtr);
        value = valuePtr.start.value;
        if (valuePtr.start.value)
        {
          goto LABEL_58;
        }

LABEL_61:
        MustBeShown = 4294954513;
        goto LABEL_21;
      }

      if (CFEqual(a2, @"TrackQTLoadSettings"))
      {
        QTLoadSettingsDictionary = MovieInformationCreateQTLoadSettingsDictionary(a3, v10, v11);
        *a4 = QTLoadSettingsDictionary;
        if (QTLoadSettingsDictionary)
        {
          MustBeShown = 0;
        }

        else
        {
          MustBeShown = 4294954513;
        }

        goto LABEL_21;
      }

      if (CFEqual(a2, @"TrackEnabled"))
      {
        IsEnabled = MovieTrackIsEnabled(v11);
        goto LABEL_70;
      }

      if (CFEqual(a2, @"TrackDimensions"))
      {
        LODWORD(valuePtr.start.value) = 0;
        LODWORD(v49.start.value) = 0;
        MovieTrackGetSpatialInformation(v11, &valuePtr, &v49, 0);
        goto LABEL_75;
      }

      if (CFEqual(a2, @"CleanApertureDimensions"))
      {
        LODWORD(valuePtr.start.value) = 0;
        LODWORD(v49.start.value) = 0;
        MovieTrackGetCleanApertureDimensions(v11, &valuePtr, &v49);
        if (!v31)
        {
          goto LABEL_61;
        }

LABEL_75:
        v54.width = *&valuePtr.start.value;
        v54.height = *&v49.start.value;
        value = CGSizeCreateDictionaryRepresentation(v54);
        goto LABEL_19;
      }

      if (CFEqual(a2, @"ProductionApertureDimensions"))
      {
        LODWORD(valuePtr.start.value) = 0;
        LODWORD(v49.start.value) = 0;
        MovieTrackGetProductionApertureDimensions(v11, &valuePtr, &v49);
        if (!v32)
        {
          goto LABEL_61;
        }

        goto LABEL_75;
      }

      if (CFEqual(a2, @"EncodedPixelsDimensions"))
      {
        LODWORD(valuePtr.start.value) = 0;
        LODWORD(v49.start.value) = 0;
        MovieTrackGetEncodedPixelsDimensions(v11, &valuePtr, &v49);
        if (!v33)
        {
          goto LABEL_61;
        }

        goto LABEL_75;
      }

      if (CFEqual(a2, @"TrackMatrix"))
      {
        memset(&valuePtr, 0, 36);
        MovieTrackGetSpatialInformation(v11, 0, 0, &valuePtr);
        value = FigMatrixToCFArray(a3, &valuePtr);
        goto LABEL_19;
      }

      if (CFEqual(a2, @"TrackLayer"))
      {
        Layer = MovieTrackGetLayer(v11);
LABEL_91:
        LOWORD(valuePtr.start.value) = Layer;
LABEL_92:
        v15 = *MEMORY[0x1E695E480];
        v16 = kCFNumberSInt16Type;
        goto LABEL_13;
      }

      if (CFEqual(a2, @"AlternateGroupID"))
      {
        Layer = MovieInformationGetTrackAlternateGroupID(v10, v11);
        goto LABEL_91;
      }

      if (CFEqual(a2, @"ProvisionalAlternateGroupID"))
      {
        LOWORD(valuePtr.start.value) = 0;
        if (!MovieTrackGetProvisionalAlternateGroupID(v11, &valuePtr))
        {
          value = 0;
          goto LABEL_19;
        }

        goto LABEL_92;
      }

      if (CFEqual(a2, @"DefaultAlternateGroupID"))
      {
        Layer = MovieTrackGetDefaultAlternateGroupID(v11);
        goto LABEL_91;
      }

      if (CFEqual(a2, @"TrackExcludeFromAutoSelection"))
      {
        IsEnabled = MovieTrackIsExcludedFromAutoSelection(v11);
LABEL_70:
        v27 = MEMORY[0x1E695E4D0];
        if (IsEnabled != 1)
        {
          v27 = MEMORY[0x1E695E4C0];
        }

        goto LABEL_57;
      }

      if (CFEqual(a2, @"TrackIsSelfContained"))
      {
        IsFrameReorderingRequired = MovieTrackIsSelfContained(v11);
        goto LABEL_55;
      }

      if (CFEqual(a2, @"ContainsUnsupportedDataReferences"))
      {
        IsFrameReorderingRequired = MovieTrackContainsUnsupportedDataReferences(v10, v11);
        goto LABEL_55;
      }

      if (CFEqual(a2, @"AdvanceDecodeDelta"))
      {
        value = MovieTrackCreateAdvanceDecodeDeltaDictionary(a3, v10, v11);
        goto LABEL_19;
      }

      if (CFEqual(a2, @"ShowTimeCode"))
      {
        LOBYTE(valuePtr.start.value) = 0;
        MustBeShown = MovieTrackGetTimecodeMustBeShown(v11, &valuePtr);
        if (MustBeShown)
        {
          goto LABEL_21;
        }

        v35 = MEMORY[0x1E695E4D0];
        if (LOBYTE(valuePtr.start.value) != 1)
        {
          v35 = MEMORY[0x1E695E4C0];
        }

        value = CFRetain(*v35);
        goto LABEL_20;
      }

      if (CFEqual(a2, @"TrackName"))
      {
        value = CreateTrackNameDictionary(a3, v9);
        goto LABEL_19;
      }

      if (CFEqual(a2, @"QuickTimeUserDataReader"))
      {
        value = AssureTrackQuickTimeUserDataReaderCreated(v9);
        if (value)
        {
          goto LABEL_58;
        }

        goto LABEL_61;
      }

      if (CFEqual(a2, @"ISOUserDataReader"))
      {
        value = AssureTrackISOUserDataReaderCreated(v9);
        if (value)
        {
          goto LABEL_58;
        }

        goto LABEL_61;
      }

      if (CFEqual(a2, @"QuickTimeMetadataReader"))
      {
        value = AssureTrackQuickTimeMetadataReaderCreated(v9);
        if (value)
        {
          goto LABEL_58;
        }

        goto LABEL_61;
      }

      if (CFEqual(a2, @"MetadataReaders"))
      {
        v36 = AssureTrackQuickTimeUserDataReaderCreated(v9);
        v37 = AssureTrackQuickTimeMetadataReaderCreated(v9);
        v38 = AssureTrackISOUserDataReaderCreated(v9);
        v39 = v38;
        if (v36 || v38 || v37)
        {
          Mutable = CFArrayCreateMutable(a3, 0, MEMORY[0x1E695E9C0]);
          if (Mutable)
          {
            v41 = Mutable;
            if (v37)
            {
              CFArrayAppendValue(Mutable, v37);
            }

            if (v36)
            {
              CFArrayAppendValue(v41, v36);
            }

            if (v39)
            {
              CFArrayAppendValue(v41, v39);
            }

            MustBeShown = 0;
            *a4 = v41;
            goto LABEL_21;
          }

          MovieTrackReaderCopyProperty_cold_1(&valuePtr);
          goto LABEL_35;
        }

LABEL_147:
        MustBeShown = 0;
        goto LABEL_21;
      }

      if (CFEqual(a2, @"MetadataReaderTypes"))
      {
        v42 = CFArrayCreateMutable(a3, 0, MEMORY[0x1E695E9C0]);
        if (v42)
        {
          v43 = v42;
          if (MovieTrackMetadataFormatIsAvailable(v10, v11, @"com.apple.quicktime.udta"))
          {
            CFArrayAppendValue(v43, @"QuickTimeUserDataReader");
          }

          if (MovieTrackMetadataFormatIsAvailable(v10, v11, @"org.mp4ra"))
          {
            CFArrayAppendValue(v43, @"ISOUserDataReader");
          }

          if (MovieTrackMetadataFormatIsAvailable(v10, v11, @"com.apple.quicktime.mdta"))
          {
            CFArrayAppendValue(v43, @"QuickTimeMetadataReader");
          }

          if (CFArrayGetCount(v43) >= 1)
          {
            MustBeShown = 0;
            *a4 = v43;
            goto LABEL_21;
          }

          CFRelease(v43);
          goto LABEL_147;
        }

        MovieTrackReaderCopyProperty_cold_2(&valuePtr);
LABEL_35:
        MustBeShown = LODWORD(valuePtr.start.value);
        goto LABEL_21;
      }

      if (CFEqual(a2, @"EditCursorService"))
      {
        EditCursorService = MovieTrackReaderCreateEditCursorService(a1, a3, a4);
        goto LABEL_63;
      }

      if (CFEqual(a2, @"HasRollInformation"))
      {
        IsFrameReorderingRequired = MovieTrackHasRollInformation(v11);
        goto LABEL_55;
      }

      if (CFEqual(a2, @"HasAudioSampleDependencyInformation"))
      {
        IsFrameReorderingRequired = MovieTrackHasAudioDependencyInformation(v11);
        goto LABEL_55;
      }

      if (CFEqual(a2, @"EditsExcludePrimingAndRemainderDuration"))
      {
        IsFrameReorderingRequired = MovieTrackEditsExcludeAudioPrimingAndRemainderDuration(v11);
        goto LABEL_55;
      }

      if (CFEqual(a2, @"GaplessSourceTimeRange"))
      {
        memset(&valuePtr, 0, sizeof(valuePtr));
        GetGaplessSourceTimeRange(&valuePtr);
        v49 = valuePtr;
        value = CMTimeRangeCopyAsDictionary(&v49, a3);
        goto LABEL_19;
      }

      if (CFEqual(a2, @"HasSeamSamples"))
      {
        IsFrameReorderingRequired = MovieTrackHasSeamSamples(v11);
        goto LABEL_55;
      }

      if (CFEqual(a2, @"ContainsChapters"))
      {
        IsFrameReorderingRequired = MovieTrackIsChapterTrack(v10, v11);
LABEL_55:
        v27 = MEMORY[0x1E695E4D0];
        if (!IsFrameReorderingRequired)
        {
          v27 = MEMORY[0x1E695E4C0];
        }

LABEL_57:
        value = *v27;
LABEL_58:
        value = CFRetain(value);
        goto LABEL_19;
      }

      if (CFEqual(a2, @"MinSampleDuration"))
      {
        EditCursorService = CopyMinSampleDurationDictionary(v9, a4);
      }

      else if (CFEqual(a2, @"MaxEditRate"))
      {
        EditCursorService = CopyMaxEditRateNumber(v9, a4);
      }

      else if (CFEqual(a2, @"SampleDescriptionAtomLocation"))
      {
        EditCursorService = MovieTrackCreateSampleDescriptionAtomLocationDictionary(v11, a4);
      }

      else if (CFEqual(a2, @"ExternalDataReferenceSchemes"))
      {
        EditCursorService = MovieTrackCopyExternalDataReferenceSchemes(v10, v11, a4);
      }

      else if (CFEqual(a2, @"MediaCharacteristicArray"))
      {
        EditCursorService = FigMediaCharacteristicsCopyMediaCharacteristicsForTrackInformation(a3, v11, a4);
      }

      else if (CFEqual(a2, @"HEVCSyncSampleNALUnitTypes"))
      {
        MovieTrackCopySyncSampleCombinations(a3, v11, a4, v44, v45, v46, v47, v48, v49.start.value, *&v49.start.timescale, v49.start.epoch, v49.duration.value, *&v49.duration.timescale, v49.duration.epoch, valuePtr.start.value, *&valuePtr.start.timescale, valuePtr.start.epoch, valuePtr.duration.value, *&valuePtr.duration.timescale, valuePtr.duration.epoch);
      }

      else if (CFEqual(a2, @"HEVCTemporalLevelInfoCombinations"))
      {
        EditCursorService = MovieTrackCopyTemporalLevelCombinations(a3, v11, a4);
      }

      else if (CFEqual(a2, @"SampleGroupDescriptions"))
      {
        EditCursorService = MovieTrackCopySampleGroupDescriptionDictionary(a3, v11, a4);
      }

      else
      {
        if (!CFEqual(a2, @"LatentBaseDecodeTimeStampOfFirstTrackFragment"))
        {
          if (CFEqual(a2, @"UsesAudibleDRM"))
          {
            IsFrameReorderingRequired = MovieTrackUsesAudibleDRM(v11);
          }

          else if (CFEqual(a2, @"AudibleContentIsAuthorized"))
          {
            IsFrameReorderingRequired = MovieTrackAudibleContentIsAuthorized(v10, v11);
          }

          else
          {
            if (!CFEqual(a2, @"HasEditListBox"))
            {
              MustBeShown = 4294954512;
              goto LABEL_21;
            }

            IsFrameReorderingRequired = MovieTrackHasEditList(v11);
          }

          goto LABEL_55;
        }

        EditCursorService = MovieTrackCopyLatentBaseDecodeTimeStampOfFirstTrackFragmentDictionary(a3, v11, a4);
      }
    }

LABEL_63:
    MustBeShown = EditCursorService;
    goto LABEL_21;
  }

  fig_log_get_emitter();

  return FigSignalErrorAtGM();
}

__CFDictionary *CreateTrackNameDictionary(const __CFAllocator *a1, uint64_t a2)
{
  v4 = AssureTrackQuickTimeUserDataReaderCreated(a2);
  if (!v4)
  {
    return 0;
  }

  v5 = v4;
  v6 = *(*(CMBaseObjectGetVTable() + 16) + 40);
  if (!v6 || (v7 = v6(v5, @"udta", @"tnam")) == 0)
  {
    value = 0;
    v18 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (!v18)
    {
      goto LABEL_34;
    }

    v19 = v18(v5, @"udta", @"name", 0, *MEMORY[0x1E695E480], &value, 0);
    v20 = value;
    if (v19)
    {
      v21 = 1;
    }

    else
    {
      v21 = value == 0;
    }

    if (v21)
    {
      Mutable = 0;
      if (!value)
      {
        return Mutable;
      }

      goto LABEL_36;
    }

    v22 = CFGetTypeID(value);
    if (v22 == CFStringGetTypeID())
    {
      theDict = @"eng";
      Mutable = CFDictionaryCreate(a1, &theDict, &value, 1, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    }

    else
    {
LABEL_34:
      Mutable = 0;
    }

    v20 = value;
    if (!value)
    {
      return Mutable;
    }

LABEL_36:
    CFRelease(v20);
    return Mutable;
  }

  v8 = v7;
  if (v7 < 1)
  {
    return 0;
  }

  v9 = 0;
  Mutable = 0;
  v11 = *MEMORY[0x1E695E480];
  do
  {
    theDict = 0;
    value = 0;
    v12 = *(*(CMBaseObjectGetVTable() + 16) + 48);
    if (v12 && !v12(v5, @"udta", @"tnam", v9, v11, &value, &theDict))
    {
      valuePtr = 0;
      v13 = CFDictionaryGetValue(theDict, @"languageCode");
      if (v13)
      {
        CFNumberGetValue(v13, kCFNumberSInt16Type, &valuePtr);
        v14 = *a2;
        v15 = *(*a2 + 81) ? *(v14 + 82) == 0 : *(v14 + 84) != 0;
        StringForLanguageCode = FigCreateStringForLanguageCode(v11, valuePtr, v15);
        if (StringForLanguageCode)
        {
          v17 = StringForLanguageCode;
          if (Mutable || (Mutable = CFDictionaryCreateMutable(a1, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8])) != 0)
          {
            CFDictionarySetValue(Mutable, v17, value);
          }

          CFRelease(v17);
        }
      }

      if (value)
      {
        CFRelease(value);
      }

      if (theDict)
      {
        CFRelease(theDict);
      }
    }

    ++v9;
  }

  while (v8 != v9);
  return Mutable;
}

uint64_t AssureTrackQuickTimeUserDataReaderCreated(uint64_t a1)
{
  FigSimpleMutexLock();
  if (!*(a1 + 24))
  {
    MovieInformationLockForRead(*a1);
    MovieTrackCreateQuickTimeUserDataReader(*a1, *(a1 + 8), (a1 + 24));
    MovieInformationUnlockForRead(*a1);
  }

  FigSimpleMutexUnlock();
  return *(a1 + 24);
}

uint64_t AssureTrackISOUserDataReaderCreated(uint64_t a1)
{
  FigSimpleMutexLock();
  if (!*(a1 + 32))
  {
    MovieInformationLockForRead(*a1);
    MovieTrackCreateISOUserDataReader(*a1, *(a1 + 8), (a1 + 32));
    MovieInformationUnlockForRead(*a1);
  }

  FigSimpleMutexUnlock();
  return *(a1 + 32);
}

uint64_t AssureTrackQuickTimeMetadataReaderCreated(uint64_t a1)
{
  FigSimpleMutexLock();
  if (!*(a1 + 40))
  {
    MovieInformationLockForRead(*a1);
    MovieTrackCreateQuickTimeMetadataReader(*a1, *(a1 + 8), (a1 + 40));
    MovieInformationUnlockForRead(*a1);
  }

  FigSimpleMutexUnlock();
  return *(a1 + 40);
}

uint64_t CopyMinSampleDurationDictionary(uint64_t a1, void *a2)
{
  FigSimpleMutexLock();
  v4 = *(a1 + 56);
  if (v4)
  {
    v5 = 0;
    goto LABEL_5;
  }

  memset(&v8[1], 0, sizeof(CMTime));
  v5 = MovieTrackComputeMinSampleDuration();
  if (!v5)
  {
    v7 = CFGetAllocator(*(a1 + 8));
    v8[0] = v8[1];
    v4 = CMTimeCopyAsDictionary(v8, v7);
    *(a1 + 56) = v4;
    if (!v4)
    {
      goto LABEL_6;
    }

    goto LABEL_5;
  }

  v4 = *(a1 + 56);
  if (v4)
  {
LABEL_5:
    v4 = CFRetain(v4);
  }

LABEL_6:
  *a2 = v4;
  FigSimpleMutexUnlock();
  return v5;
}

uint64_t CopyMaxEditRateNumber(uint64_t a1, CFNumberRef *a2)
{
  valuePtr = 1065353216;
  v3 = MovieTrackComputeMaxEditRate();
  if (!v3)
  {
    *a2 = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberFloat32Type, &valuePtr);
  }

  return v3;
}

uint64_t MovieTrackReaderGetTrackInfo(uint64_t a1, _DWORD *a2, _DWORD *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage && DerivedStorage[1])
  {
    MovieInformationLockForRead(*DerivedStorage);
    BasicInfo = MovieTrackGetBasicInfo(DerivedStorage[1], a3, a2);
    MovieInformationUnlockForRead(*DerivedStorage);
    return BasicInfo;
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }
}

uint64_t MovieTrackReaderGetTrackEditCount()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage && DerivedStorage[1])
  {
    MovieInformationLockForRead(*DerivedStorage);
    EditSegmentCount = MovieTrackGetEditSegmentCount(DerivedStorage[1]);
    MovieInformationUnlockForRead(*DerivedStorage);
    return EditSegmentCount;
  }

  else
  {
    fig_log_get_emitter();
    FigSignalErrorAtGM();
    return 0;
  }
}

uint64_t MovieTrackReaderGetTrackEditWithIndex(uint64_t a1, uint64_t a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage && DerivedStorage[1])
  {
    if (a3)
    {
      MovieInformationLockForRead(*DerivedStorage);
      EditSegmentWithIndex = MovieTrackGetEditSegmentWithIndex(DerivedStorage[1], a2, a3);
      MovieInformationUnlockForRead(*DerivedStorage);
      return EditSegmentWithIndex;
    }

    else
    {
      MovieTrackReaderGetTrackEditWithIndex_cold_1(&v8);
      return v8;
    }
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }
}

uint64_t MovieTrackReaderGetTrackEditIndexWithTrackTime(uint64_t a1, __int128 *a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage && DerivedStorage[1])
  {
    MovieInformationLockForRead(*DerivedStorage);
    v6 = DerivedStorage[1];
    v14 = *a2;
    v15 = *(a2 + 2);
    EditIndexForTrackTime = MovieTrackFindEditIndexForTrackTime(v6, &v14, a3, v7, v8, v9, v10, v11);
    MovieInformationUnlockForRead(*DerivedStorage);
    return EditIndexForTrackTime;
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }
}

void MovieCursorService_finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*DerivedStorage)
  {
    CFRelease(*DerivedStorage);
    *DerivedStorage = 0;
  }

  v1 = *(DerivedStorage + 8);
  if (v1)
  {
    CFRelease(v1);
    *(DerivedStorage + 8) = 0;
  }
}

__CFString *MovieCursorService_copyDebugDescription(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v3, 0);
  CFStringAppendFormat(Mutable, 0, @"<FigFormatReader_Movie_CursorService %p>{ track %p }", a1, *(DerivedStorage + 8));
  return Mutable;
}

uint64_t CreateMovieSampleCursor(uint64_t a1, const void *a2, uint64_t a3, void *a4)
{
  if (MovieTrackIsValid(a3))
  {
    FigSampleCursorGetClassID();
    v7 = CMDerivedObjectCreate();
    if (v7)
    {
      v11 = v7;
      CreateMovieSampleCursor_cold_1();
    }

    else
    {
      DerivedStorage = CMBaseObjectGetDerivedStorage();
      v9 = MovieSampleAccessorCreate(a2, a3, (DerivedStorage + 8));
      if (v9)
      {
        v11 = v9;
      }

      else
      {
        if (a2)
        {
          v10 = CFRetain(a2);
        }

        else
        {
          v10 = 0;
        }

        v11 = 0;
        *DerivedStorage = v10;
      }
    }
  }

  else
  {
    CreateMovieSampleCursor_cold_2(&v13);
    v11 = v13;
  }

  *a4 = 0;
  return v11;
}

void MovieCursor_finalize()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieSampleAccessorDispose(*(DerivedStorage + 8));
  if (*DerivedStorage)
  {
    CFRelease(*DerivedStorage);
  }

  v1 = *(DerivedStorage + 16);
  if (v1)
  {
    CFRelease(v1);
  }

  *DerivedStorage = 0;
  *(DerivedStorage + 8) = 0;
  *(DerivedStorage + 16) = 0;
}

__CFString *MovieCursor_copyDebugDescription(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = CFGetAllocator(a1);
  Mutable = CFStringCreateMutable(v3, 0);
  TrackType = MovieTrackGetTrackType(*(DerivedStorage[1] + 8));
  v19 = 0;
  MovieInformationLockForRead(*DerivedStorage);
  MovieTrackGetBasicInfo(*(DerivedStorage[1] + 8), 0, &v19);
  MovieInformationUnlockForRead(*DerivedStorage);
  v6 = DerivedStorage[1];
  v7 = *(v6 + 80);
  v8 = v19;
  IsValid = MovieTrackIsValid(*(v6 + 8));
  v10 = "";
  if (!IsValid)
  {
    v10 = " (INVALIDATED)";
  }

  CFStringAppendFormat(Mutable, 0, @"<Movie_SampleCursor %p>{ sampleNum %d, Track ID %d%s, Type %c%c%c%c }", a1, v7, v8, v10, HIBYTE(TrackType), BYTE2(TrackType), BYTE1(TrackType), TrackType);
  v11 = DerivedStorage[1];
  v12 = *(v11 + 8);
  v13 = *(v12 + 728);
  if (v13)
  {
    if (*(v13 + 56))
    {
      v14 = *(v11 + 80);
      v15 = *(v12 + 288);
      v16 = v14 >= v15;
      v17 = v14 - v15;
      if (v17 != 0 && v16)
      {
        CFStringAppendFormat(Mutable, 0, @"\nFragment Sample %d of %d [Fragment %p Run %p IndexInRun %u/%d]", v17, *(v13 + 8), *(v11 + 200), *(v11 + 208), v14 - *(*(v11 + 208) + 16), *(*(v11 + 208) + 40));
      }
    }
  }

  return Mutable;
}

uint64_t MovieCursor_copyProperty(uint64_t a1, const void *a2, const __CFAllocator *a3, CMTimeValue *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (!a4)
  {
    MovieCursor_copyProperty_cold_2(&v22);
LABEL_36:
    value_low = LODWORD(v22.value);
    goto LABEL_30;
  }

  if (!MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    MovieCursor_copyProperty_cold_1(&v22);
    goto LABEL_36;
  }

  *a4 = 0;
  if (!CFEqual(a2, @"CursorPlayableHorizon"))
  {
    if (CFEqual(a2, @"SampleDependencyAttributes"))
    {
      v22.value = 0;
      SampleDependencyAttributeDictionary = MovieSampleAccessorCreateSampleDependencyAttributeDictionary(a3, DerivedStorage[1], &v22);
LABEL_8:
      value_low = SampleDependencyAttributeDictionary;
      if (SampleDependencyAttributeDictionary)
      {
        goto LABEL_30;
      }

      value = v22.value;
LABEL_16:
      *a4 = value;
      goto LABEL_30;
    }

    if (CFEqual(a2, @"GradualDecoderRefresh"))
    {
      LOWORD(v22.value) = 0;
      if (!MovieSampleAccessorGetRollValue())
      {
        value_low = 4294954513;
        goto LABEL_30;
      }

      LOWORD(v21.value) = -LOWORD(v22.value);
      AdvanceDecodeDeltaDictionary = CFNumberCreate(*MEMORY[0x1E695E480], kCFNumberSInt16Type, &v21);
    }

    else
    {
      if (CFEqual(a2, @"SeamIdentifier"))
      {
        v22.value = 0;
        v18 = MovieSampleAccessorCopySeamIdentifier();
        value_low = 0;
        value = 0;
        if (!v18)
        {
          value = 0;
        }

        goto LABEL_16;
      }

      if (CFEqual(a2, @"AdvanceDecodeDelta"))
      {
        AdvanceDecodeDeltaDictionary = DerivedStorage[2];
        if (!AdvanceDecodeDeltaDictionary)
        {
          AdvanceDecodeDeltaDictionary = MovieTrackCreateAdvanceDecodeDeltaDictionary(a3, *DerivedStorage[1], *(DerivedStorage[1] + 8));
          DerivedStorage[2] = AdvanceDecodeDeltaDictionary;
          if (!AdvanceDecodeDeltaDictionary)
          {
            goto LABEL_28;
          }
        }
      }

      else
      {
        if (!CFEqual(a2, @"MoreSamplesMayBeForthcoming"))
        {
          if (!CFEqual(a2, @"SampleGroupData"))
          {
            value_low = 4294954512;
            goto LABEL_30;
          }

          v22.value = 0;
          SampleDependencyAttributeDictionary = MovieSampleAccessorCreateSampleGroupDataDictionary(a3, DerivedStorage[1], &v22);
          goto LABEL_8;
        }

        v19 = *MEMORY[0x1E695E4C0];
        if (*(*DerivedStorage + 90) && MovieInformationCouldContainFragments(*DerivedStorage))
        {
          v19 = *MEMORY[0x1E695E4D0];
        }

        AdvanceDecodeDeltaDictionary = v19;
      }

      AdvanceDecodeDeltaDictionary = CFRetain(AdvanceDecodeDeltaDictionary);
    }

LABEL_28:
    value_low = 0;
    goto LABEL_29;
  }

  memset(&v22, 0, sizeof(v22));
  value_low = MovieSampleAccessorComputePlayableHorizon(DerivedStorage[1], &v22, v8, v9, v10, v11, v12, v13);
  if (!value_low)
  {
    v21 = v22;
    AdvanceDecodeDeltaDictionary = CMTimeCopyAsDictionary(&v21, a3);
LABEL_29:
    *a4 = AdvanceDecodeDeltaDictionary;
  }

LABEL_30:
  MovieInformationUnlockForRead(*DerivedStorage);
  return value_low;
}

uint64_t MovieCursor_copy(const void *a1, CFTypeRef *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v11 = 0;
  cf = 0;
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    CFGetAllocator(a1);
    FigSampleCursorGetClassID();
    v5 = CMDerivedObjectCreate();
    if (v5)
    {
      v9 = v5;
      MovieCursor_copy_cold_1();
    }

    else
    {
      v6 = CMBaseObjectGetDerivedStorage();
      v7 = MovieSampleAccessorCopy(DerivedStorage[1], &v11);
      if (!v7)
      {
        v6[1] = v11;
        v11 = 0;
        v8 = *DerivedStorage;
        if (*DerivedStorage)
        {
          v8 = CFRetain(v8);
        }

        v9 = 0;
        *v6 = v8;
        *a2 = cf;
        cf = 0;
        goto LABEL_7;
      }

      v9 = v7;
    }
  }

  else
  {
    MovieCursor_copy_cold_2(&v13);
    v9 = v13;
  }

  if (cf)
  {
    CFRelease(cf);
  }

LABEL_7:
  MovieInformationUnlockForRead(*DerivedStorage);
  MovieSampleAccessorDispose(v11);
  return v9;
}

uint64_t MovieCursor_compareInDecodeOrder()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v1 = CMBaseObjectGetDerivedStorage();
  v2 = *(*(DerivedStorage + 8) + 80);
  v3 = *(*(v1 + 8) + 80);
  v4 = v2 >= v3;
  v5 = v2 > v3;
  if (v4)
  {
    return v5;
  }

  else
  {
    return -1;
  }
}

uint64_t MovieCursor_getPresentationTimeStamp(uint64_t a1, CMTime *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    MovieSampleAccessorGetPTS(DerivedStorage[1], &v6);
    value_low = 0;
    *a2 = v6;
  }

  else
  {
    MovieCursor_getPresentationTimeStamp_cold_1(&v6);
    value_low = LODWORD(v6.value);
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return value_low;
}

uint64_t MovieCursor_getDecodeTimeStamp(uint64_t a1, CMTime *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    MovieSampleAccessorGetDTS(DerivedStorage[1], &v6);
    value_low = 0;
    *a2 = v6;
  }

  else
  {
    MovieCursor_getDecodeTimeStamp_cold_1(&v6);
    value_low = LODWORD(v6.value);
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return value_low;
}

uint64_t MovieCursor_getDuration(uint64_t a1, CMTime *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    SampleDuration = MovieSampleAccessorGetSampleDuration(DerivedStorage[1], a2);
  }

  else
  {
    MovieCursor_getDuration_cold_1(&v6);
    SampleDuration = v6;
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return SampleDuration;
}

uint64_t MovieCursor_getDependencyInfo(uint64_t a1, _BYTE *a2, _BYTE *a3, _DWORD *a4, BOOL *a5)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    DependencyInfo = MovieSampleAccessorGetDependencyInfo(DerivedStorage[1], a2, a3, 0, 0, a4, a5);
    MovieInformationUnlockForRead(*DerivedStorage);
    return DependencyInfo;
  }

  else
  {
    MovieCursor_getDependencyInfo_cold_1(&v12);
    return v12;
  }
}

BOOL MovieCursor_testReorderingBoundary(uint64_t a1, uint64_t a2, int a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = CMBaseObjectGetDerivedStorage();
  v10 = 0;
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    DTSTimeValue = MovieSampleAccessorGetDTSTimeValue(DerivedStorage[1]);
    PTSTimeValue = MovieSampleAccessorGetPTSTimeValue(*(v5 + 8));
    MovieTrackGetCompositionOffsetRange(*DerivedStorage[1], *(DerivedStorage[1] + 8), &v10 + 1, &v10);
    if (a3)
    {
      v8 = DTSTimeValue + SHIDWORD(v10) >= PTSTimeValue;
    }

    else
    {
      v8 = DTSTimeValue + v10 <= PTSTimeValue;
    }
  }

  else
  {
    MovieCursor_testReorderingBoundary_cold_1();
    v8 = 0;
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return v8;
}

uint64_t MovieCursor_stepByDecodeTime(uint64_t a1, CMTime *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v10, 0, sizeof(v10));
  v9 = 0;
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    MovieSampleAccessorGetDTS(DerivedStorage[1], &v10);
    lhs = v10;
    v6 = *a2;
    CMTimeAdd(&v8, &lhs, &v6);
    v10 = v8;
    MovieSampleAccessorMoveToSampleForDTS(DerivedStorage[1], &v8, &v9 + 1, &v9);
    if (HIBYTE(v9) | v9)
    {
      value_low = 4294954456;
    }

    else
    {
      value_low = 0;
    }
  }

  else
  {
    MovieCursor_stepByDecodeTime_cold_1(&v8);
    value_low = LODWORD(v8.value);
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return value_low;
}

uint64_t MovieCursor_stepByPresentationTime(uint64_t a1, CMTime *a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v11, 0, sizeof(v11));
  v10 = 0;
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    MovieSampleAccessorGetPTS(DerivedStorage[1], &v11);
    lhs = v11;
    v7 = *a2;
    CMTimeAdd(&v9, &lhs, &v7);
    v11 = v9;
    MovieSampleAccessorMoveToSampleAtPTS(DerivedStorage[1], &v9, &v10 + 1, &v10);
    value_low = v4;
    if (!v4)
    {
      if (HIBYTE(v10) | v10)
      {
        value_low = 4294954456;
      }

      else
      {
        value_low = 0;
      }
    }
  }

  else
  {
    MovieCursor_stepByPresentationTime_cold_1(&v9);
    value_low = LODWORD(v9.value);
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return value_low;
}

uint64_t MovieCursor_copyChunkDetails(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t *a4, uint64_t *a5, void *a6, void *a7, BOOL *a8, BOOL *a9, _BYTE *a10)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v21 = 0;
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    MovieSampleAccessorGetChunkDetails(DerivedStorage[1], &v21, a4, a5, a6, a7, a8, a9, a10);
    v19 = v18;
    if (!v18)
    {
      if (a2 | a3)
      {
        v19 = MovieTrackCopyDataSourceForSampleDescriptionID(*DerivedStorage, *(DerivedStorage[1] + 8), v21, a3, a2);
      }

      else
      {
        v19 = 0;
      }
    }
  }

  else
  {
    MovieCursor_copyChunkDetails_cold_1(&v22);
    v19 = v22;
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return v19;
}

uint64_t MovieCursor_stepInDecodeOrderAndReportStepsTaken(uint64_t a1, uint64_t a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    v6 = MovieSampleAccessorStepCursor(DerivedStorage[1], a2, a3);
    if (v6 == -12840)
    {
      v7 = 0;
    }

    else
    {
      v7 = v6;
    }
  }

  else
  {
    MovieCursor_stepInDecodeOrderAndReportStepsTaken_cold_1(&v9);
    v7 = v9;
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return v7;
}

uint64_t MovieCursor_stepInPresentationOrderAndReportStepsTaken(uint64_t a1, uint64_t a2, void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  MovieInformationLockForRead(*DerivedStorage);
  if (!MovieTrackIsValid(*(DerivedStorage[1] + 8)))
  {
    MovieCursor_stepInPresentationOrderAndReportStepsTaken_cold_1(&v12);
    v10 = v12;
    goto LABEL_17;
  }

  if (a2 < 0)
  {
    v6 = a2;
    while (1)
    {
      MovieSampleAccessorStepBackPTS(DerivedStorage[1]);
      if (v7)
      {
        break;
      }

      if (__CFADD__(v6++, 1))
      {
        goto LABEL_13;
      }
    }

LABEL_14:
    v10 = v7;
    if (v7 != -12840)
    {
      goto LABEL_17;
    }

    goto LABEL_15;
  }

  if (a2)
  {
    v6 = a2;
    do
    {
      MovieSampleAccessorStepFwdPTS(DerivedStorage[1]);
      if (v7)
      {
        goto LABEL_14;
      }
    }

    while (v6-- > 1);
  }

LABEL_13:
  v6 = 0;
LABEL_15:
  v10 = 0;
  if (a3)
  {
    *a3 = a2 - v6;
  }

LABEL_17:
  MovieInformationUnlockForRead(*DerivedStorage);
  return v10;
}

uint64_t MovieCursor_getDecodeToPresentationTimeDeltaRange(uint64_t a1, CMTime *a2, CMTime *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v14 = 0;
  MovieInformationLockForRead(*DerivedStorage);
  v6 = *(*(DerivedStorage + 8) + 8);
  if (MovieTrackIsValid(v6))
  {
    MovieTrackGetCompositionOffsetRange(**(DerivedStorage + 8), v6, &v14 + 1, &v14);
    if (a2)
    {
      v7 = SHIDWORD(v14);
      MediaTimeScale = MovieTrackGetMediaTimeScale(v6);
      CMTimeMake(&v13, v7, MediaTimeScale);
      *a2 = v13;
    }

    if (a3)
    {
      v9 = v14;
      v10 = MovieTrackGetMediaTimeScale(v6);
      CMTimeMake(&v13, v9, v10);
      value_low = 0;
      *a3 = v13;
    }

    else
    {
      value_low = 0;
    }
  }

  else
  {
    MovieCursor_getDecodeToPresentationTimeDeltaRange_cold_1(&v13);
    value_low = LODWORD(v13.value);
  }

  MovieInformationUnlockForRead(*DerivedStorage);
  return value_low;
}

void ReactToMovieMetadataChange(uint64_t a1, uint64_t a2, __CFDictionary *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  v6 = __ROR8__(a2 - 8, 3);
  if (v6 > 2)
  {
    if (v6 == 3)
    {
      v7 = @"QuickTimeMetadataReader";
      v9 = DerivedStorage + 12;
      v8 = DerivedStorage[12];
      if (v8)
      {
        goto LABEL_5;
      }
    }

    else
    {
      if (v6 != 7)
      {
        goto LABEL_15;
      }

      v7 = @"iTunesMetadataReader";
      v9 = DerivedStorage + 14;
      v8 = DerivedStorage[14];
      if (v8)
      {
        goto LABEL_5;
      }
    }

LABEL_6:
    FigSimpleMutexUnlock();
    if (v7)
    {
      v10 = *MEMORY[0x1E695E4D0];
      CFDictionarySetValue(a3, v7, *MEMORY[0x1E695E4D0]);
      CFDictionarySetValue(a3, @"MetadataReaderTypes", v10);

      CFDictionarySetValue(a3, @"MetadataReaders", v10);
    }

    return;
  }

  if (!v6)
  {
    v7 = @"ISOUserDataReader";
    v9 = DerivedStorage + 13;
    v8 = DerivedStorage[13];
    if (!v8)
    {
      goto LABEL_6;
    }

LABEL_5:
    CFRelease(v8);
    *v9 = 0;
    goto LABEL_6;
  }

  if (v6 == 1)
  {
    v7 = @"QuickTimeUserDataReader";
    v9 = DerivedStorage + 11;
    v8 = DerivedStorage[11];
    if (!v8)
    {
      goto LABEL_6;
    }

    goto LABEL_5;
  }

LABEL_15:

  FigSimpleMutexUnlock();
}

void ReactToTrackMetadataChange(uint64_t a1, uint64_t a2, __CFDictionary *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  switch(a2)
  {
    case 8:
      v6 = @"ISOUserDataReader";
      v8 = DerivedStorage + 4;
      v7 = DerivedStorage[4];
      if (!v7)
      {
LABEL_8:
        FigSimpleMutexUnlock();
        if (v6)
        {
          v9 = *MEMORY[0x1E695E4D0];
          CFDictionarySetValue(a3, v6, *MEMORY[0x1E695E4D0]);
          CFDictionarySetValue(a3, @"MetadataReaderTypes", v9);

          CFDictionarySetValue(a3, @"MetadataReaders", v9);
        }

        return;
      }

LABEL_7:
      CFRelease(v7);
      *v8 = 0;
      goto LABEL_8;
    case 16:
      v6 = @"QuickTimeUserDataReader";
      v8 = DerivedStorage + 3;
      v7 = DerivedStorage[3];
      if (!v7)
      {
        goto LABEL_8;
      }

      goto LABEL_7;
    case 32:
      v6 = @"QuickTimeMetadataReader";
      v8 = DerivedStorage + 5;
      v7 = DerivedStorage[5];
      if (!v7)
      {
        goto LABEL_8;
      }

      goto LABEL_7;
  }

  FigSimpleMutexUnlock();
}

uint64_t OUTLINED_FUNCTION_5_87()
{

  return CMNotificationCenterPostNotification();
}

uint64_t MoovIsParsingError(int a1)
{
  result = 1;
  if (a1 <= -12720)
  {
    v4 = a1 + 12896;
    if (v4 > 0x33 || ((1 << v4) & 0x900000000007FLL) == 0)
    {
      return 0;
    }
  }

  else
  {
    if (a1 <= -207)
    {
      v3 = a1 + 12719;
      if (v3 <= 9 && ((1 << v3) & 0x23D) != 0)
      {
        return result;
      }

      return 0;
    }

    if (a1 <= 560360819)
    {
      if (a1 == -206)
      {
        return result;
      }

      v5 = 560226676;
LABEL_15:
      if (a1 == v5)
      {
        return result;
      }

      return 0;
    }

    if (a1 != 560360820 && a1 != 1718449215)
    {
      v5 = 2003329396;
      goto LABEL_15;
    }
  }

  return result;
}

uint64_t ParseMovieAtom(uint64_t a1, uint64_t a2)
{
  v4 = *a2;
  v18[1] = 0;
  v19 = 0;
  v17 = 0;
  v18[0] = a2;
  v16 = 0;
  FigAtomStreamGetCurrentAtomTypeAndDataLength();
  v5 = 0;
  if (*(v4 + 85))
  {
    v9 = "File contains multiple 'moov' atoms";
    v10 = v4;
    v11 = a1;
    v12 = 3;
LABEL_16:
    _MovieAtomReportParsingMessage(v10, 0, v11, v9, v12);
    goto LABEL_19;
  }

  memset(v15, 0, sizeof(v15));
  if (!*(v4 + 56))
  {
    if (*(v4 + 80))
    {
      v14 = 0;
      BBuf = FigAtomStreamReadCurrentAtomAndCreateBBuf();
      if (BBuf)
      {
        goto LABEL_18;
      }

      v5 = CMByteStreamCreateForBlockBuffer();
      if (v5)
      {
        goto LABEL_19;
      }

      *(v4 + 56) = v17;
      BBuf = FigAtomStreamInitWithByteStream();
      if (BBuf)
      {
        goto LABEL_18;
      }
    }

    else
    {
      v8 = *(v4 + 48);
      if (v8)
      {
        v8 = CFRetain(v8);
      }

      *(v4 + 56) = v8;
    }
  }

  BBuf = FigAtomStreamInitWithParent();
  if (BBuf)
  {
LABEL_18:
    v5 = BBuf;
    goto LABEL_19;
  }

  v7 = ParseChildAtoms(v4, v15, 7, &ParseMovieAtom_atomDispatch, v18);
  if (v7)
  {
    v5 = v7;
    v9 = "while parsing";
    v10 = v4;
    v11 = a1;
    v12 = 6;
    goto LABEL_16;
  }

  if (*(v4 + 87))
  {
    if (!v19 || (BBuf = ParseMovieExtendsAtomFromBBuf(v19, v18), !BBuf))
    {
      v5 = 0;
      *(v4 + 85) = 1;
      goto LABEL_19;
    }

    goto LABEL_18;
  }

  ParseMovieAtom_cold_1();
  v5 = v14;
LABEL_19:
  if (v17)
  {
    CFRelease(v17);
  }

  if (v19)
  {
    CFRelease(v19);
  }

  if (v5)
  {
    if (*(v4 + 89) && *(v4 + 85))
    {
      *(v4 + 85) = 0;
    }
  }

  else if (*(v4 + 154))
  {
    return 0;
  }

  else if (*(a2 + 26))
  {
    return 0;
  }

  else
  {
    return 1937010544;
  }

  return v5;
}

uint64_t ParseMovieFragmentAtom(uint64_t a1, uint64_t *a2)
{
  v2 = *a2;
  v12 = 0u;
  v13 = 0u;
  v9 = 0;
  if (!*(v2 + 154))
  {
    return 0;
  }

  v11 = 0;
  v10 = 0;
  memset(v8, 0, sizeof(v8));
  FigAtomStreamGetCurrentAtomTypeAndDataLength();
  BBuf = FigAtomStreamReadCurrentAtomDataAndCreateBBuf();
  if (BBuf)
  {
    goto LABEL_13;
  }

  BBuf = FigAtomStreamInitWithBBuf();
  if (BBuf)
  {
    goto LABEL_13;
  }

  if (!*(a2 + 8))
  {
    BBuf = FigAtomStreamGetCurrentAtomGlobalOffset();
    if (!BBuf)
    {
      goto LABEL_6;
    }

LABEL_13:
    v6 = BBuf;
    goto LABEL_8;
  }

  *(&v12 + 1) = a2[2];
LABEL_6:
  *&v12 = a2;
  *&v13 = a1;
  v6 = ParseChildAtoms(v2, v8, 2, &ParseMovieFragmentAtom_atomDispatch, &v12);
  if (v6)
  {
    _MovieAtomReportParsingMessage(v2, 0, a1, "Encountered an error during parsing of movie fragment atom", 3);
  }

  else
  {
    *(v2 + 156) = 1;
  }

LABEL_8:
  if (v9)
  {
    CFRelease(v9);
  }

  return v6;
}

uint64_t ParseMovieMetaDataAtom(uint64_t a1, void ***a2)
{
  v3 = **a2;
  v10 = 0;
  v9 = 0;
  memset(v8, 0, sizeof(v8));
  v7 = 0;
  FigAtomStreamGetCurrentAtomVersionAndFlags();
  v4 = FigAtomStreamInitWithParent();
  if (!v4)
  {
    v4 = ParseChildAtoms(v3, v8, 1, &ParseMovieMetaDataAtom_atomDispatch, &v7);
  }

  if (v4 == -12893 || v4 == 0)
  {
    v4 = 0;
  }

  else
  {
    _MovieAtomReportParsingMessage(v3, 0, a1, "while parsing", 6);
  }

  if (v7 == 1835299937)
  {
    return FigAtomStreamGetCurrentAtomGlobalOffset();
  }

  return v4;
}

uint64_t ParseEditListAtom(uint64_t a1, uint64_t a2)
{
  v4 = *a2;
  v3 = *(a2 + 8);
  CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomTypeAndDataLength();
  if (CurrentAtomTypeAndDataLength)
  {
    v7 = CurrentAtomTypeAndDataLength;
  }

  else
  {
    _MovieAtomReportParsingMessage(v4, v3, a1, "'elst' atom size less than minimum", 2);
    fig_log_get_emitter();
    v7 = FigSignalErrorAtGM();
    if (!v7)
    {
      return v7;
    }
  }

  v8 = *(v3 + 696);
  if (v8)
  {
    CFRelease(v8);
  }

  *(v3 + 696) = 0;
  *(v3 + 704) = 0;
  return v7;
}

uint64_t ParseMediaInfoAtom(__int128 *a1, uint64_t ****a2)
{
  v43 = *MEMORY[0x1E69E9840];
  v4 = *(a2 + 2);
  v5 = bswap32(v4);
  if (v5 <= 1885954931)
  {
    if (!v5)
    {
      v16 = a1[5];
      v40 = a1[4];
      v41 = v16;
      v42 = a1[6];
      v17 = a1[1];
      dataPointerOut = *a1;
      v37 = v17;
      v18 = a1[3];
      v38 = a1[2];
      v39 = v18;
      if (!FigAtomStreamAdvanceToNextAtomWithType())
      {
        v19 = ParseMediaHandlerAtom();
        if (v19)
        {
          return v19;
        }
      }

      v4 = *(a2 + 2);
      goto LABEL_20;
    }

    v6 = 1635088502;
LABEL_7:
    if (v5 == v6)
    {
      goto LABEL_8;
    }

LABEL_20:
    v7 = (*a2)[1];
    v8 = ****a2;
    *(&v34[0] + 1) = a2;
    dataPointerOut = 0u;
    v37 = 0u;
    v38 = 0u;
    v39 = 0u;
    v40 = 0u;
    v41 = 0u;
    v42 = 0u;
    *&v34[0] = bswap32(v4);
    MovieTrackSetParsedTrackType(v7, v34[0]);
    v9 = FigAtomStreamInitWithParent();
    if (v9)
    {
      goto LABEL_49;
    }

    v10 = &ParseMediaInfoAtomForGenericMedia_atomDispatch;
    v11 = v8;
    v12 = 4;
    goto LABEL_22;
  }

  if (v5 == 1885954932)
  {
LABEL_8:
    v7 = (*a2)[1];
    v8 = ****a2;
    *(&v34[0] + 1) = a2;
    dataPointerOut = 0u;
    v37 = 0u;
    v38 = 0u;
    v39 = 0u;
    v40 = 0u;
    v41 = 0u;
    v42 = 0u;
    *&v34[0] = v5;
    MovieTrackSetParsedTrackType(v7, v5);
    v9 = FigAtomStreamInitWithParent();
    if (v9)
    {
      goto LABEL_49;
    }

    v10 = &ParseVideoMediaInfoAtom_atomDispatch;
    v11 = v8;
    v12 = 3;
LABEL_22:
    v9 = ParseChildAtoms(v11, &dataPointerOut, v12, v10, v34);
    if (!v9)
    {
      v20 = ConvertSampleDescriptionsToFormatDescriptions(v8, v7);
      goto LABEL_24;
    }

LABEL_49:
    v21 = v9;
    goto LABEL_50;
  }

  if (v5 != 1936684398)
  {
    v6 = 1986618469;
    goto LABEL_7;
  }

  v7 = (*a2)[1];
  v8 = ****a2;
  memset(v34, 0, sizeof(v34));
  v35[0] = 1936684398;
  v35[1] = a2;
  MovieTrackSetParsedTrackType(v7, 1936684398);
  v9 = FigAtomStreamInitWithParent();
  if (v9)
  {
    goto LABEL_49;
  }

  v9 = ParseChildAtoms(v8, v34, 3, &ParseSoundMediaInfoAtom_atomDispatch, v35);
  if (v9)
  {
    goto LABEL_49;
  }

  v13 = v7[7];
  if (v13)
  {
    *&dataPointerOut = 0;
    if (CFArrayGetCount(v13) && (v14 = CFArrayGetValueAtIndex(v7[7], 0)) != 0 && v7[5])
    {
      ValueAtIndex = CFArrayGetValueAtIndex(v7[5], *v14);
    }

    else
    {
      ValueAtIndex = 0;
    }

    lengthAtOffsetOut = 0;
    CMBlockBufferGetDataPointer(ValueAtIndex, 0, &lengthAtOffsetOut, 0, &dataPointerOut);
    if (lengthAtOffsetOut <= 0x23)
    {
      _MovieAtomReportParsingMessage(v8, v7, a1, "Invalid size for sound description", 2);
    }

    else
    {
      if (*(dataPointerOut + 16) || !*(v8 + 82) || !*(v8 + 84))
      {
        if (*(v8 + 81))
        {
          if (*(v8 + 82))
          {
LABEL_33:
            v23 = MEMORY[0x1E6960620];
            goto LABEL_38;
          }
        }

        else if (!*(v8 + 84))
        {
          goto LABEL_33;
        }

        v23 = MEMORY[0x1E6960618];
LABEL_38:
        v24 = CMDoesBigEndianSoundDescriptionRequireLegacyCBRSampleTableLayout(ValueAtIndex, *v23);
        MovieTrackSetSampleOverrides(v7, 0, 0);
        v9 = ConvertSampleDescriptionsToFormatDescriptions(v8, v7);
        if (v9)
        {
          goto LABEL_49;
        }

        if (v24)
        {
          FirstFormatDescription = GetFirstFormatDescription(v7);
          if (FirstFormatDescription)
          {
            StreamBasicDescription = CMAudioFormatDescriptionGetStreamBasicDescription(FirstFormatDescription);
            MovieTrackSetSampleOverrides(v7, StreamBasicDescription->mBytesPerPacket, StreamBasicDescription->mFramesPerPacket);
          }

          return 0;
        }

        goto LABEL_42;
      }

      _MovieAtomReportParsingMessage(v8, v7, a1, "V0 sound description in file with QT ftyp and ISO file extension", 2);
    }

    fig_log_get_emitter();
    goto LABEL_55;
  }

  v9 = ConvertSampleDescriptionsToFormatDescriptions(v8, v7);
  if (v9)
  {
    goto LABEL_49;
  }

LABEL_42:
  v27 = GetFirstFormatDescription(v7);
  if (!v27)
  {
    return 0;
  }

  v28 = CMAudioFormatDescriptionGetStreamBasicDescription(v27);
  mFormatID = v28->mFormatID;
  if (mFormatID == 1634492791 || mFormatID == 1970037111)
  {
    return 0;
  }

  v31 = v28;
  if (!v28->mBytesPerPacket)
  {
    return 0;
  }

  CommonSampleSize = MovieSampleTableGetCommonSampleSize(v7);
  if (!CommonSampleSize || v31->mBytesPerPacket == CommonSampleSize)
  {
    return 0;
  }

  snprintf(&dataPointerOut, 0x100uLL, "ASBD mBytesPerPacket %d expected to match common sample size %d from the sample table", v31->mBytesPerPacket, CommonSampleSize);
  _MovieAtomReportParsingMessage(v8, v7, a1, &dataPointerOut, 5);
  _MovieAtomReportParsingMessage(v8, v7, 0, "ASBD mBytesPerPacket does not match the common sample size", 2);
  fig_log_get_emitter();
LABEL_55:
  v20 = FigSignalErrorAtGM();
LABEL_24:
  v21 = v20;
  if (v20)
  {
LABEL_50:
    _MovieAtomReportParsingMessage(v8, v7, a1, "while parsing", 5);
  }

  return v21;
}

uint64_t ParseSampleTableAtom(uint64_t a1, uint64_t a2)
{
  v2 = **(a2 + 8);
  v3 = v2[1];
  v4 = **v2;
  v5 = *v4;
  if (!*(v4 + 24))
  {
    CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomTypeAndDataLength();
    if (CurrentAtomTypeAndDataLength)
    {
      goto LABEL_5;
    }

    DoPostParsingSampleTableCommon(v5, v3, v8);
LABEL_7:
    CurrentAtomTypeAndDataLength = v6;
    goto LABEL_5;
  }

  FigAtomStreamGetCurrentAtomGlobalOffset();
  v6 = FigAtomStreamGetCurrentAtomTypeAndDataLength();
  if (v6)
  {
    goto LABEL_7;
  }

  CurrentAtomTypeAndDataLength = 0;
  *(v3 + 718) = 1;
LABEL_5:
  *(v3 + 712) = CurrentAtomTypeAndDataLength;
  return CurrentAtomTypeAndDataLength;
}

uint64_t ParseSampleDescriptionAtom(uint64_t a1, uint64_t a2)
{
  v3 = **(a2 + 8);
  v4 = *(v3 + 8);
  v5 = ***v3;
  v20 = 0;
  v19 = 0;
  v18 = 0;
  v16 = 0u;
  v17 = 0u;
  v14 = 0u;
  v15 = 0u;
  v12 = 0u;
  v13 = 0u;
  v11 = 0u;
  theSourceBuffer = 0;
  v9 = 0;
  CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomTypeAndDataLength();
  if (CurrentAtomTypeAndDataLength)
  {
    v7 = CurrentAtomTypeAndDataLength;
  }

  else
  {
    FigAtomStreamGetCurrentAtomGlobalOffset();
    ParseSampleDescriptionAtom_cold_5(v5, v4, a1, &v21);
    v7 = v21;
    if (!v21)
    {
      goto LABEL_4;
    }
  }

  ReleaseSampleDescriptionInfoArray(v4);
LABEL_4:
  if (theSourceBuffer)
  {
    CFRelease(theSourceBuffer);
  }

  return v7;
}

uint64_t ParseSampleToGroupAtom(uint64_t a1, uint64_t a2)
{
  v3 = **(a2 + 8);
  v4 = *(v3 + 8);
  v5 = ***v3;
  v14 = 0;
  v13 = 0;
  v11 = 0;
  v12 = 0;
  cf = 0;
  ArrayBBuf = CommonSampleToGroupAtomParseAndCreateArrayBBuf(v5, v4, a1);
  if (!ArrayBBuf)
  {
    MovieTrackAddAndRetainSampleGroup(v4, v12, v13, &cf);
    if (!ArrayBBuf)
    {
      v7 = v11;
      v8 = MovieSampleGroupSet_sbgp(cf, v14, v11);
      if (!v7)
      {
        goto LABEL_5;
      }

      goto LABEL_4;
    }
  }

  v8 = ArrayBBuf;
  v7 = v11;
  if (v11)
  {
LABEL_4:
    CFRelease(v7);
  }

LABEL_5:
  if (cf)
  {
    CFRelease(cf);
  }

  return v8;
}

uint64_t ParseMOVCompactSampleToGroupAtom(uint64_t a1, uint64_t a2)
{
  v2 = **(a2 + 8);
  v3 = *(v2 + 8);
  v4 = ***v2;
  v15 = 0;
  cf = 0;
  v14 = 0;
  v11 = 0;
  v12 = 0;
  v9[0] = 0;
  v9[1] = 0;
  v10 = 0;
  ArrayBBuf = CommonMOVCompactSampleToGroupAtomParseAndCreateArrayBBuf(v4, v3, a1);
  if (!ArrayBBuf)
  {
    MovieTrackAddAndRetainSampleGroup(v3, v14, v15, &v11);
    if (!ArrayBBuf)
    {
      v6 = v12;
      v7 = MovieSampleGroupSet_csgp(v11, v9, cf, v12);
      if (!v6)
      {
        goto LABEL_5;
      }

      goto LABEL_4;
    }
  }

  v7 = ArrayBBuf;
  v6 = v12;
  if (v12)
  {
LABEL_4:
    CFRelease(v6);
  }

LABEL_5:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v11)
  {
    CFRelease(v11);
  }

  return v7;
}

uint64_t ParseISOCompactSampleToGroupAtom(uint64_t a1, uint64_t a2)
{
  v2 = **(a2 + 8);
  v3 = *(v2 + 8);
  v4 = ***v2;
  v15 = 0;
  cf = 0;
  v14 = 0;
  v11 = 0;
  v12 = 0;
  v9[0] = 0;
  v9[1] = 0;
  v10 = 0;
  ArrayBBuf = CommonISOCompactSampleToGroupAtomParseAndCreateArrayBBuf(v4, v3, a1);
  if (!ArrayBBuf)
  {
    MovieTrackAddAndRetainSampleGroup(v3, v14, v15, &v11);
    if (!ArrayBBuf)
    {
      v6 = v12;
      v7 = MovieSampleGroupSet_csgp(v11, v9, cf, v12);
      if (!v6)
      {
        goto LABEL_5;
      }

      goto LABEL_4;
    }
  }

  v7 = ArrayBBuf;
  v6 = v12;
  if (v12)
  {
LABEL_4:
    CFRelease(v6);
  }

LABEL_5:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v11)
  {
    CFRelease(v11);
  }

  return v7;
}

uint64_t CommonSampleToGroupAtomParseAndCreateArrayBBuf(void *a1, uint64_t a2, uint64_t a3)
{
  result = FigAtomStreamGetCurrentAtomTypeAndDataLength();
  if (!result)
  {
    result = FigAtomStreamGetCurrentAtomVersionAndFlags();
    if (!result)
    {
      _MovieAtomReportParsingMessage(a1, a2, a3, "'sbgp' V0 atom size less than minimum", 2);
      fig_log_get_emitter();
      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t CommonMOVCompactSampleToGroupAtomParseAndCreateArrayBBuf(void *a1, uint64_t a2, uint64_t a3)
{
  v19 = 0;
  blockBufferOut = 0;
  v18 = 0;
  sourceBuffer = 0;
  cf = 0;
  v12 = 0;
  v13 = 0;
  *(v14 + 6) = 0;
  v14[0] = 0;
  v11 = 0;
  v10 = 0;
  CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomTypeAndDataLength();
  if (CurrentAtomTypeAndDataLength || (CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomVersionAndFlags(), CurrentAtomTypeAndDataLength))
  {
    v8 = CurrentAtomTypeAndDataLength;
  }

  else
  {
    CommonMOVCompactSampleToGroupAtomParseAndCreateArrayBBuf_cold_4(a1, a2, a3, &dataPointerOut);
    v8 = dataPointerOut;
  }

  if (blockBufferOut)
  {
    CFRelease(blockBufferOut);
  }

  if (sourceBuffer)
  {
    CFRelease(sourceBuffer);
  }

  return v8;
}

uint64_t CommonISOCompactSampleToGroupAtomParseAndCreateArrayBBuf(void *a1, uint64_t a2, uint64_t a3)
{
  v18 = 0;
  v16 = 0;
  v17 = 0;
  v14 = 0;
  v15 = 0;
  v13 = 0;
  v12 = 0;
  memset(&v10[2], 0, 24);
  v11 = 0;
  dataPointerOut[1] = 0;
  v10[0] = 0;
  *(v10 + 6) = 0;
  CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomTypeAndDataLength();
  if (CurrentAtomTypeAndDataLength || (CurrentAtomTypeAndDataLength = FigAtomStreamGetCurrentAtomVersionAndFlags(), CurrentAtomTypeAndDataLength))
  {
    v8 = CurrentAtomTypeAndDataLength;
  }

  else
  {
    if ((((4 << ((v12 >> 4) & 3)) + (4 << ((v12 >> 2) & 3))) & 4) != 0)
    {
      CommonISOCompactSampleToGroupAtomParseAndCreateArrayBBuf_cold_2(a1, a2, a3, dataPointerOut);
    }

    else
    {
      CommonISOCompactSampleToGroupAtomParseAndCreateArrayBBuf_cold_6(a1, a2, a3, dataPointerOut);
    }

    v8 = LODWORD(dataPointerOut[0]);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  if (v16)
  {
    CFRelease(v16);
  }

  return v8;
}

uint64_t GetISOCompactSampleToGroupPatternEntryValue(uint64_t result, unsigned int **a2, int a3, unsigned int *a4)
{
  v4 = 0;
  HIDWORD(v6) = result - 4;
  LODWORD(v6) = result - 4;
  v5 = v6 >> 2;
  if (v5 > 2)
  {
    if (v5 == 3)
    {
      v7 = *a2 + 2;
      v4 = bswap32(**a2) >> 16;
      goto LABEL_12;
    }

    if (v5 == 7)
    {
      v7 = (*a2 + 1);
      v4 = bswap32(**a2);
      goto LABEL_12;
    }
  }

  else if (v5)
  {
    if (v5 == 1)
    {
      v7 = *a2 + 1;
      v4 = **a2;
LABEL_12:
      *a2 = v7;
    }
  }

  else
  {
    v8 = **a2;
    if (!a3)
    {
      v4 = v8 & 0xF;
      v7 = *a2 + 1;
      goto LABEL_12;
    }

    v4 = v8 >> 4;
  }

  *a4 = v4;
  return result;
}

const void *GetFirstFormatDescription(uint64_t a1)
{
  v2 = *(a1 + 56);
  if (!v2)
  {
    return 0;
  }

  if (!CFArrayGetCount(v2))
  {
    return 0;
  }

  ValueAtIndex = CFArrayGetValueAtIndex(*(a1 + 56), 0);
  if (!ValueAtIndex || !*(a1 + 48))
  {
    return 0;
  }

  v4 = *ValueAtIndex;
  v5 = *(a1 + 48);

  return CFArrayGetValueAtIndex(v5, v4);
}

uint64_t ParseGenericMediaInfoHeaderAtom(uint64_t a1, uint64_t a2)
{
  v3 = **(a2 + 8);
  v4 = *(v3 + 8);
  v5 = ***v3;
  FigAtomStreamGetCurrentAtomTypeAndDataLength();
  ParseGenericMediaInfoHeaderAtom_cold_1(v5, v4, a1, &v7);
  return v7;
}

uint64_t SaveiTunesMetaDataAtomLocation(uint64_t a1, uint64_t a2)
{
  if (*(**a2 + 136) <= 0)
  {
    return FigAtomStreamGetCurrentAtomGlobalOffset();
  }

  else
  {
    return 0;
  }
}

uint64_t ParseMetaDataHandlerAtom(uint64_t a1, _DWORD *a2)
{
  result = FigAtomStreamReadCurrentAtomData();
  if (!result)
  {
    *a2 = bswap32(0);
  }

  return result;
}

uint64_t ParseDataCompressionAtom(uint64_t a1, uint64_t a2)
{
  result = FigAtomStreamReadCurrentAtomData();
  *(a2 + 12) = bswap32(0);
  return result;
}

void *InitInflatorLibrary_0()
{
  result = dlopen("/usr/lib/libz.dylib", 6);
  if (result)
  {
    v1 = result;
    _MergedGlobals_94 = dlsym(result, "inflateInit_");
    off_1ED4CB478 = dlsym(v1, "inflate");
    result = dlsym(v1, "inflateEnd");
    off_1ED4CB480 = result;
  }

  return result;
}

uint64_t ParseFragmentSampleToGroupAtom(uint64_t a1, uint64_t a2)
{
  v5 = *a2;
  v4 = *(a2 + 8);
  v6 = *v5;
  v16 = 0;
  v15 = 0;
  cf = 0;
  v14 = 0;
  v12 = 0;
  if (v4)
  {
    ArrayBBuf = CommonSampleToGroupAtomParseAndCreateArrayBBuf(v6, v4, a1);
    if (ArrayBBuf)
    {
      v10 = ArrayBBuf;
    }

    else
    {
      v8 = FragmentInfoAddAndRetainSampleGroup(*(a2 + 8), *(a2 + 16), v14, v15, &v12);
      v9 = cf;
      if (!v8)
      {
        v8 = MovieSampleGroupSet_sbgp(v12, v16, cf);
      }

      v10 = v8;
      if (v9)
      {
        CFRelease(v9);
      }
    }
  }

  else
  {
    ParseFragmentSampleToGroupAtom_cold_1();
    v10 = v17;
  }

  if (v12)
  {
    CFRelease(v12);
  }

  return v10;
}

uint64_t ParseFragmentMOVCompactSampleToGroupAtom(uint64_t a1, uint64_t a2)
{
  v5 = *a2;
  v4 = *(a2 + 8);
  v6 = *v5;
  v18 = 0;
  v17 = 0;
  cf = 0;
  v16 = 0;
  v14 = 0;
  v12[0] = 0;
  v12[1] = 0;
  v13 = 0;
  if (v4)
  {
    ArrayBBuf = CommonMOVCompactSampleToGroupAtomParseAndCreateArrayBBuf(v6, v4, a1);
    if (ArrayBBuf)
    {
      v10 = ArrayBBuf;
    }

    else
    {
      v8 = FragmentInfoAddAndRetainSampleGroup(*(a2 + 8), *(a2 + 16), v17, v18, &v14);
      v9 = cf;
      if (!v8)
      {
        v8 = MovieSampleGroupSet_csgp(v14, v12, v16, cf);
      }

      v10 = v8;
      if (v9)
      {
        CFRelease(v9);
      }
    }
  }

  else
  {
    ParseFragmentMOVCompactSampleToGroupAtom_cold_1();
    v10 = v19;
  }

  if (v16)
  {
    CFRelease(v16);
  }

  if (v14)
  {
    CFRelease(v14);
  }

  return v10;
}

uint64_t ParseFragmentISOCompactSampleToGroupAtom(uint64_t a1, uint64_t a2)
{
  v5 = *a2;
  v4 = *(a2 + 8);
  v6 = *v5;
  v18 = 0;
  v17 = 0;
  cf = 0;
  v16 = 0;
  v14 = 0;
  v12[0] = 0;
  v12[1] = 0;
  v13 = 0;
  if (v4)
  {
    ArrayBBuf = CommonISOCompactSampleToGroupAtomParseAndCreateArrayBBuf(v6, v4, a1);
    if (ArrayBBuf)
    {
      v10 = ArrayBBuf;
    }

    else
    {
      v8 = FragmentInfoAddAndRetainSampleGroup(*(a2 + 8), *(a2 + 16), v17, v18, &v14);
      v9 = cf;
      if (!v8)
      {
        v8 = MovieSampleGroupSet_csgp(v14, v12, v16, cf);
      }

      v10 = v8;
      if (v9)
      {
        CFRelease(v9);
      }
    }
  }

  else
  {
    ParseFragmentISOCompactSampleToGroupAtom_cold_1();
    v10 = v19;
  }

  if (v16)
  {
    CFRelease(v16);
  }

  if (v14)
  {
    CFRelease(v14);
  }

  return v10;
}

uint64_t ParseSampleEncryptionAtomInTraf(uint64_t a1, uint64_t a2)
{
  v2 = *(a2 + 8);
  if (v2)
  {
    MovieTrackNoteSampleEncryptionAtomPresent(v2);
    return 0;
  }

  else
  {
    ParseSampleEncryptionAtomInTraf_cold_1();
    return v4;
  }
}

uint64_t FragmentInfoAddAndRetainSampleGroupDescriptionArray(const void *a1, uint64_t a2, int a3, void *a4)
{
  Mutable = *(a2 + 112);
  if (!Mutable)
  {
    Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, 0, MEMORY[0x1E695E9E8]);
    *(a2 + 112) = Mutable;
    if (!Mutable)
    {
      FragmentInfoAddAndRetainSampleGroupDescriptionArray_cold_1();
      return 0;
    }
  }

  v9 = CFDictionaryGetValue(Mutable, a3);
  value = v9;
  if (v9)
  {
    v10 = v9;
    CFRetain(v9);
LABEL_7:
    v13 = 0;
    *a4 = v10;
    return v13;
  }

  v11 = CFGetAllocator(a1);
  v12 = MovieSampleGroupDescriptionArrayCreate(v11, a3, &value);
  if (!v12)
  {
    CFDictionarySetValue(*(a2 + 112), a3, value);
    v10 = value;
    goto LABEL_7;
  }

  v13 = v12;
  if (value)
  {
    CFRelease(value);
  }

  return v13;
}

void MovieAtomReportChildAtomParsingFailureMessage(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  if (a1[8])
  {
    v6 = CFGetAllocator(a1);
    Mutable = CFDictionaryCreateMutable(v6, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      v8 = Mutable;
      v9 = CFGetAllocator(a1);
      v10 = CFStringCreateMutable(v9, 0);
      if (v10)
      {
        v11 = v10;
        CFStringAppendFormat(v10, 0, @"%s.", a4);
        CFStringForOSTypeValue = FigGetCFStringForOSTypeValue();
        FigAtomStreamGetCurrentAtomGlobalOffset();
        CFStringAppendFormat(v11, 0, @" Atom: '%@' Offset: %lld", CFStringForOSTypeValue, 0);
        FigCFDictionarySetInt64();
        FigCFDictionarySetInt32();
        FigCFDictionarySetInt64();
        CFDictionarySetValue(v8, *MEMORY[0x1E6960D58], v11);
        FigCFDictionarySetInt32();
        FigAssetAnalysisReporterAddMessage();
        CFRelease(v11);
      }

      CFRelease(v8);
    }
  }
}

void OUTLINED_FUNCTION_15_37(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(v5, v4, 0, a4, 2);
}

void OUTLINED_FUNCTION_22_24(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, v4, v5, a4, 2);
}

uint64_t OUTLINED_FUNCTION_25_23()
{

  return FigAtomStreamReadCurrentAtomData();
}

uint64_t OUTLINED_FUNCTION_31_19()
{

  return FigAtomStreamReadCurrentAtomData();
}

uint64_t OUTLINED_FUNCTION_36_19(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12)
{
  a11 = 0;
  a12 = 0;
  a9 = 0;
  a10 = 0;

  return ParseDiscoveredUUIDBoxLocation(a1, &a9, &a12, &a11);
}

uint64_t OUTLINED_FUNCTION_37_20()
{
  *(v0 - 20) = 0;

  return FigAtomStreamGetCurrentAtomTypeAndDataLength();
}

void OUTLINED_FUNCTION_40_16(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, v4, v5, a4, 2);
}

void OUTLINED_FUNCTION_42_16(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(v6, v5, v4, a4, 5);
}

void OUTLINED_FUNCTION_44_17(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(v5, v4, 0, a4, 2);
}

void OUTLINED_FUNCTION_45_14(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, void *a10)
{

  _MovieAtomReportParsingMessage(a10, v10, 0, a4, 2);
}

void OUTLINED_FUNCTION_50_10(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, a2, v4, a4, 2);
}

void OUTLINED_FUNCTION_52_15(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, a2, 0, a4, 2);
}

void OUTLINED_FUNCTION_55_15(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, a2, v4, a4, 2);
}

uint64_t OUTLINED_FUNCTION_57_9()
{

  return FigAtomStreamGetCurrentAtomTypeAndDataLength();
}

uint64_t OUTLINED_FUNCTION_59_11()
{

  return FigAtomStreamReadCurrentAtomData();
}

void OUTLINED_FUNCTION_67_11(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, 0, a3, a4, 3);
}

uint64_t OUTLINED_FUNCTION_69_6()
{

  return FigSignalErrorAtGM();
}

uint64_t OUTLINED_FUNCTION_82_6(float a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, __int128 a22)
{
  v25 = vcvts_n_f32_s32(bswap32(v22), 0x10uLL);

  return MovieTrackSetSpatialInformation(v23, &a22, a1, v25);
}

uint64_t OUTLINED_FUNCTION_83_6(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{

  return ParseChildAtoms(v9, &a9, 1, a4, v10);
}

uint64_t OUTLINED_FUNCTION_84_4()
{

  return FigAtomStreamReadCurrentAtomDataAndCreateBBuf();
}

void OUTLINED_FUNCTION_85_4(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, a2, v4, a4, 3);
}

void OUTLINED_FUNCTION_86_6(void *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{

  _MovieAtomReportParsingMessage(a1, a2, v4, a4, 2);
}

const __CFArray *MovieTrackGetNumDataSources(uint64_t a1)
{
  result = *(a1 + 64);
  if (result)
  {
    return CFArrayGetCount(result);
  }

  return result;
}

const void *MovieTrackSetDataSourceAtIndex(void *a1, uint64_t a2, CFIndex idx, int a4, const void *a5)
{
  if (idx < 0)
  {
    goto LABEL_15;
  }

  Count = *(a2 + 64);
  if (Count)
  {
    Count = CFArrayGetCount(Count);
  }

  if (Count <= idx)
  {
LABEL_15:
    MovieTrackSetDataSourceAtIndex_cold_1(a1, a2, &v16);
    return v16;
  }

  else
  {
    ValueAtIndex = CFArrayGetValueAtIndex(*(a2 + 64), idx);
    v12 = ValueAtIndex;
    if (a4)
    {
      v13 = 0;
    }

    else
    {
      v13 = 1970433056;
    }

    *ValueAtIndex = v13;
    v14 = ValueAtIndex[2];
    ValueAtIndex[2] = a5;
    if (a5)
    {
      CFRetain(a5);
    }

    if (v14)
    {
      CFRelease(v14);
    }

    result = v12[1];
    if (result)
    {
      CFRelease(result);
      result = 0;
      v12[1] = 0;
    }
  }

  return result;
}

void SampleGroupDescCollectingApplierFunction(unsigned int a1, uint64_t a2, void *a3)
{
  theArray = 0;
  MovieSampleGroupDescriptionArrayCopyInfo(a2, 0, &theArray, 0, 0, 0);
  if (!theArray)
  {
    return;
  }

  if (!CFArrayGetCount(theArray))
  {
    goto LABEL_13;
  }

  v5 = CFGetAllocator(a3);
  Copy = CFArrayCreateCopy(v5, theArray);
  if (!Copy)
  {
    SampleGroupDescCollectingApplierFunction_cold_2();
LABEL_13:
    v9 = 0;
    goto LABEL_7;
  }

  v7 = Copy;
  v8 = CFGetAllocator(a3);
  v9 = CFStringCreateWithFormat(v8, 0, @"%c%c%c%c", HIBYTE(a1), BYTE2(a1), BYTE1(a1), a1);
  if (v9)
  {
    CFDictionarySetValue(a3, v9, v7);
  }

  else
  {
    SampleGroupDescCollectingApplierFunction_cold_1();
  }

  CFRelease(v7);
LABEL_7:
  if (theArray)
  {
    CFRelease(theArray);
  }

  if (v9)
  {
    CFRelease(v9);
  }
}

uint64_t MovieTrackCopySampleGroupDescriptionArrays(uint64_t a1, void *a2)
{
  v3 = *(a1 + 80);
  if (v3)
  {
    v3 = CFRetain(v3);
  }

  *a2 = v3;
  return 0;
}

uint64_t MovieTrackAddAndRetainSampleGroupDescriptionArray(void *a1, int a2, void *a3)
{
  cf = 0;
  MovieTrackCopySampleGroupDescriptionArray(a1, a2, &cf);
  v6 = cf;
  if (cf)
  {
    if (!a3)
    {
      v7 = 0;
LABEL_11:
      CFRelease(v6);
      return v7;
    }

    goto LABEL_8;
  }

  v8 = CFGetAllocator(a1);
  v9 = MovieSampleGroupDescriptionArrayCreate(v8, a2, &cf);
  v6 = cf;
  if (v9)
  {
    v7 = v9;
    if (!cf)
    {
      return v7;
    }

    goto LABEL_11;
  }

  v10 = MovieTrackAddSampleGroupDescriptionArray(a1, cf);
  v7 = v10;
  v6 = cf;
  if (a3 && !v10)
  {
    if (!cf)
    {
      v11 = 0;
      goto LABEL_9;
    }

LABEL_8:
    v11 = CFRetain(v6);
    v6 = cf;
LABEL_9:
    v7 = 0;
    *a3 = v11;
  }

  if (v6)
  {
    goto LABEL_11;
  }

  return v7;
}

uint64_t MovieTrackGetSampleDescriptionInformationAtIndex(uint64_t a1, CFIndex a2, void *a3, void *a4)
{
  v5 = *(a1 + 56);
  if (v5)
  {
    if (a2 < 0 || CFArrayGetCount(v5) <= a2)
    {
      MovieTrackGetSampleDescriptionInformationAtIndex_cold_1(&v12);
      return v12;
    }

    else
    {
      ValueAtIndex = CFArrayGetValueAtIndex(*(a1 + 56), a2);
      v10 = ValueAtIndex;
      if (a3)
      {
        *a3 = *ValueAtIndex;
      }

      result = 0;
      if (a4)
      {
        *a4 = v10[1];
      }
    }
  }

  else
  {
    MovieTrackGetSampleDescriptionInformationAtIndex_cold_2(&v13);
    return v13;
  }

  return result;
}

uint64_t MovieTrackAddParsedDataReference(uint64_t a1, int a2, int a3, const void *a4)
{
  if (a3 == 1)
  {
    v6 = 0;
  }

  else
  {
    if (a3)
    {
      MovieTrackAddParsedDataReference_cold_4(a1, &v12);
      return v12;
    }

    v6 = a2;
    if (!a4)
    {
      MovieTrackAddParsedDataReference_cold_1(a1, &v12);
      return v12;
    }
  }

  if (!*(a1 + 64))
  {
    Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, 0);
    *(a1 + 64) = Mutable;
    if (!Mutable)
    {
      MovieTrackAddParsedDataReference_cold_3(&v12);
      return v12;
    }
  }

  v8 = malloc_type_calloc(1uLL, 0x18uLL, 0x1060040ABACF81FuLL);
  if (!v8)
  {
    MovieTrackAddParsedDataReference_cold_2(&v12);
    return v12;
  }

  v9 = v8;
  *v8 = v6;
  if (a4)
  {
    v10 = CFRetain(a4);
  }

  else
  {
    v10 = 0;
  }

  v9[1] = v10;
  CFArrayAppendValue(*(a1 + 64), v9);
  return 0;
}

uint64_t TotalRunDataSize(uint64_t a1, uint64_t a2)
{
  v2 = *(a2 + 52);
  if ((v2 & 2) == 0)
  {
    return (*(a1 + 64) * *(a2 + 40));
  }

  v4 = *(a2 + 40);
  if (v4 < 1)
  {
    return 0;
  }

  result = 0;
  v5 = kPerSampleInfo_SizeInInt32s[v2];
  v6 = (a2 + 4 * kPerSampleInfo_SizeIndex[v2] + 56);
  v7 = 4 * v5;
  do
  {
    result += bswap32(*v6);
    v6 = (v6 + v7);
    --v4;
  }

  while (v4);
  return result;
}

CMTime *GetRevisedTrackDuration@<X0>(CMTime *result@<X0>, CMTime *a2@<X8>)
{
  value = result[34].value;
  v3 = (value - 1);
  if (value < 1)
  {
LABEL_5:
    v6 = MEMORY[0x1E6960CC0];
    *&a2->value = *MEMORY[0x1E6960CC0];
    a2->epoch = *(v6 + 16);
  }

  else
  {
    v4 = v3 + 1;
    v5 = (result[33].epoch + 96 * v3 + 48);
    while ((*(v5 - 36) & 1) == 0)
    {
      --v4;
      v5 -= 6;
      if (v4 < 1)
      {
        goto LABEL_5;
      }
    }

    v7 = *v5;
    v8 = v5[2];
    *&v9.start.epoch = v5[1];
    *&v9.duration.timescale = v8;
    *&v9.start.value = v7;
    return CMTimeRangeGetEnd(a2, &v9);
  }

  return result;
}

uint64_t MovieDurationWithFragmentContribution@<X0>(uint64_t result@<X0>, uint64_t a2@<X8>)
{
  v2 = result;
  if (*(result + 155))
  {
    *a2 = *(result + 160);
    epoch = *(result + 176);
  }

  else
  {
    v9 = **&MEMORY[0x1E6960CC0];
    memset(&v8, 0, sizeof(v8));
    if (*(result + 304) >= 1)
    {
      v5 = 0;
      do
      {
        GetRevisedTrackDuration(*(*(v2 + 320) + 8 * v5), &v8);
        time1 = v8;
        v6 = v9;
        result = CMTimeCompare(&time1, &v6);
        if (result >= 1)
        {
          v9 = v8;
        }

        ++v5;
      }

      while (v5 < *(v2 + 304));
    }

    *a2 = *&v9.value;
    epoch = v9.epoch;
  }

  *(a2 + 16) = epoch;
  return result;
}

void FreeSampleAuxInfo(uint64_t a1)
{
  if (a1)
  {
    v2 = *(a1 + 88);
    if (v2)
    {
      if (v2[2])
      {
        CFRelease(v2[2]);
        v2 = *(a1 + 88);
      }

      if (v2[3])
      {
        CFRelease(v2[3]);
        v2 = *(a1 + 88);
      }

      if (v2[4])
      {
        CFRelease(v2[4]);
        v2 = *(a1 + 88);
      }

      free(v2);
      *(a1 + 88) = 0;
    }
  }
}

void MovieTrackDisposeFragments(uint64_t a1)
{
  v2 = *(a1 + 728);
  if (v2)
  {
    FreeFragmentInfos(v2);
    v3 = *(a1 + 728);
    *(v3 + 56) = 0;
    *(v3 + 8) = 0;
    *v3 = 0;
  }
}

void FreeFragmentInfos(uint64_t a1)
{
  v1 = *(a1 + 56);
  if (v1)
  {
    do
    {
      v2 = *v1;
      v3 = v1[9];
      if (v3)
      {
        do
        {
          v4 = *v3;
          free(v3);
          v3 = v4;
        }

        while (v4);
      }

      v5 = v1[12];
      if (v5)
      {
        CFRelease(v5);
        v1[12] = 0;
      }

      v6 = v1[13];
      if (v6)
      {
        CFRelease(v6);
        v1[13] = 0;
      }

      v7 = v1[14];
      if (v7)
      {
        CFRelease(v7);
        v1[14] = 0;
      }

      v8 = v1[15];
      if (v8)
      {
        CFRelease(v8);
        v1[15] = 0;
      }

      v9 = v1[16];
      if (v9)
      {
        CFRelease(v9);
        v1[16] = 0;
      }

      v10 = v1[17];
      if (v10)
      {
        CFRelease(v10);
        v1[17] = 0;
      }

      v11 = v1[18];
      if (v11)
      {
        CFRelease(v11);
        v1[18] = 0;
      }

      v12 = v1[19];
      if (v12)
      {
        CFRelease(v12);
        v1[19] = 0;
      }

      v13 = v1[20];
      if (v13)
      {
        CFRelease(v13);
        v1[20] = 0;
      }

      v14 = v1[21];
      if (v14)
      {
        CFRelease(v14);
        v1[21] = 0;
      }

      FreeSampleAuxInfo(v1);
      free(v1);
      v1 = v2;
    }

    while (v2);
  }
}

uint64_t MovieSampleAccessorStepCursor(uint64_t a1, uint64_t a2, void *a3)
{
  v6 = *(a1 + 80);
  if (a3)
  {
    *a3 = 0;
  }

  v7 = v6 + a2;
  v8 = *(a1 + 8);
  if (a2 >= 1)
  {
    if (v7 >= 0x100000000)
    {
      MovieSampleAccessorStepCursor_cold_3(&v24);
      return v24;
    }

    LODWORD(v9) = *(v8 + 288);
    v10 = *(v8 + 728);
    if (v10)
    {
      if (*(v10 + 56) && v6 > v9)
      {
        goto LABEL_42;
      }
    }

    if (*(v8 + 240))
    {
      LODWORD(v9) = v9 / *(v8 + 244);
    }

    v12 = v9 < v7;
    if (v9 >= v7)
    {
      v13 = v7;
    }

    else
    {
      v13 = v9;
    }

    if (v10)
    {
      v14 = v9 >= v7;
    }

    else
    {
      v14 = 1;
    }

    if (v14)
    {
      LODWORD(v9) = v13;
      goto LABEL_45;
    }

    v20 = *(v10 + 56);
    if (v20)
    {
      *(a1 + 192) = v10;
      *(a1 + 200) = v20;
      v21 = *(v20 + 72);
      *(a1 + 208) = v21;
      *(a1 + 184) = v6;
      *(a1 + 80) = *(v21 + 16);
LABEL_42:
      result = StepFragmentCursorTo(a1, v7);
      if (a3)
      {
        *a3 = (*(a1 + 80) - v6);
      }

      return result;
    }

    v12 = 1;
LABEL_45:
    while (*(a1 + 112) + *(a1 + 116) <= v9)
    {
      result = stepDownEntry(a1);
      if (result)
      {
        return result;
      }
    }

    goto LABEL_53;
  }

  v15 = *(v8 + 728);
  if (!v15 || (v16 = *(v15 + 56)) == 0 || v6 <= *(v8 + 288))
  {
    v19 = -a2;
    v12 = v6 <= v19;
    if (v6 <= v19)
    {
      v9 = 1;
    }

    else
    {
      v9 = v7;
    }

    if (HIDWORD(v9))
    {
      MovieSampleAccessorStepCursor_cold_2(&v23);
      return v23;
    }

    while (*(a1 + 116) > v9)
    {
      result = stepUpEntry(a1);
      if (result)
      {
        return result;
      }
    }

    goto LABEL_53;
  }

  v12 = v7 < 1;
  if (v7 >= 0x100000000)
  {
    MovieSampleAccessorStepCursor_cold_1(&v22);
    return v22;
  }

  if (v7 <= 1)
  {
    LODWORD(v9) = 1;
  }

  else
  {
    LODWORD(v9) = v7;
  }

  if (*(v16 + 32) > v9)
  {
    v17 = *(a1 + 184);
    *(a1 + 80) = v17;
    if (v17 >= v9)
    {
      if (v17 > v9)
      {
        while (*(a1 + 116) > v9)
        {
          result = stepUpEntry(a1);
          if (result)
          {
            return result;
          }
        }
      }
    }

    else
    {
      while (*(a1 + 112) + *(a1 + 116) <= v9)
      {
        result = stepDownEntry(a1);
        if (result)
        {
          return result;
        }
      }
    }

LABEL_53:
    LODWORD(result) = 0;
    goto LABEL_54;
  }

  LODWORD(result) = StepFragmentCursorTo(a1, v9);
LABEL_54:
  if (a3)
  {
    *a3 = v9 - v6;
  }

  *(a1 + 80) = v9;
  if (v12)
  {
    return 4294954456;
  }

  else
  {
    return result;
  }
}

uint64_t StepFragmentCursorTo(uint64_t a1, unsigned int a2)
{
  v2 = *(a1 + 208);
  v3 = *(v2 + 4);
  v4 = *(v2 + 10);
  if (v4 + v3 <= a2)
  {
    while (1)
    {
      v2 = *v2;
      if (!v2)
      {
        v6 = **(a1 + 200);
        if (!v6)
        {
          a2 = v3 + v4 - 1;
LABEL_13:
          v7 = 4294954456;
          goto LABEL_14;
        }

        *(a1 + 200) = v6;
        v2 = *(v6 + 72);
      }

      *(a1 + 208) = v2;
      v3 = *(v2 + 4);
      v4 = *(v2 + 10);
      if (v4 + v3 > a2)
      {
        goto LABEL_11;
      }
    }
  }

  while (v3 > a2)
  {
    v2 = v2[1];
    if (!v2)
    {
      v5 = *(*(a1 + 200) + 8);
      if (!v5)
      {
        goto LABEL_13;
      }

      *(a1 + 200) = v5;
      v2 = *(v5 + 80);
    }

    *(a1 + 208) = v2;
    v3 = *(v2 + 4);
  }

LABEL_11:
  v7 = 0;
LABEL_14:
  *(a1 + 80) = a2;
  return v7;
}

uint64_t AssureTrackFragmentFixups(uint64_t result)
{
  v1 = *(result + 728);
  if (!*(v1 + 12))
  {
    v2 = *(v1 + 56);
    if (v2)
    {
      v3 = *(result + 288);
      do
      {
        *(v2 + 8) += v3;
        for (i = v2[9]; i; i = *i)
        {
          *(i + 4) += v3;
        }

        v2 = *v2;
      }

      while (v2);
    }

    *(v1 + 12) = 1;
  }

  return result;
}

uint64_t MovieTrackGetSampleCount(uint64_t a1)
{
  result = *(a1 + 288);
  v3 = *(a1 + 728);
  if (v3)
  {
    return (*(v3 + 8) + result);
  }

  return result;
}

uint64_t MovieSampleAccessorMoveToSampleForDTS(uint64_t a1, CMTime *a2, char *a3, char *a4)
{
  memset(&v50, 0, sizeof(v50));
  v8 = *(*(a1 + 8) + 232);
  v49 = *a2;
  result = CMTimeConvertScale(&v50, &v49, v8, kCMTimeRoundingMethod_RoundTowardNegativeInfinity);
  v10 = a2->flags & 9;
  v11 = (~a2->flags & 5) == 0 || v10 == 9;
  if (v11)
  {
    v11 = v10 == 9;
    v12 = 0x8000000000000000;
    if (!v11)
    {
      v12 = 0x7FFFFFFFFFFFFFFFLL;
    }

    v50.value = v12;
  }

  v13 = *(a1 + 8);
  v14 = *(v13 + 728);
  if (!v14 || (v15 = *(v14 + 56)) == 0)
  {
    value = v50.value;
LABEL_24:
    if (value >= *(a1 + 96))
    {
      while (1)
      {
        while (1)
        {
          v25 = *(a1 + 96);
          v26 = *(a1 + 104);
          v30 = *(a1 + 112) * v26;
          v31 = (*(a1 + 112) * v26) >> 64 != v30 >> 63;
          v32 = v25 + v30;
          v33 = __OFADD__(v25, v30);
          if (!v31 && !v33)
          {
            break;
          }

          fig_log_get_emitter();
          result = FigSignalErrorAtGM();
          if (result)
          {
            goto LABEL_38;
          }
        }

        v24 = v50.value;
        if (v50.value < v32)
        {
          break;
        }

        result = stepDownEntry(a1);
        if (result)
        {
          goto LABEL_38;
        }
      }

LABEL_28:
      v27 = 0;
      v28 = 0;
      v29 = *(a1 + 116) + (v24 - v25) / v26;
    }

    else
    {
      while (1)
      {
        result = stepUpEntry(a1);
        if (result)
        {
          break;
        }

        v24 = v50.value;
        v25 = *(a1 + 96);
        if (v50.value >= v25)
        {
          v26 = *(a1 + 104);
          goto LABEL_28;
        }
      }

LABEL_38:
      if (v50.value >= *(a1 + 96))
      {
        v27 = 0;
        v29 = *(*(a1 + 8) + 288);
        v28 = 1;
      }

      else
      {
        v28 = 0;
        v29 = 1;
        v27 = 1;
      }
    }

    *(a1 + 80) = v29;
    *a3 = v27;
    *a4 = v28;
    return result;
  }

  if (*(a1 + 80) <= *(v13 + 288))
  {
    value = v50.value;
    if (v50.value < *(v13 + 224))
    {
      goto LABEL_24;
    }
  }

  v17 = *(a1 + 80);
  if (v17 <= *(v13 + 288))
  {
    v18 = *(v15 + 32);
    *(a1 + 192) = v14;
    *(a1 + 200) = v15;
    v19 = *(v15 + 72);
    *(a1 + 208) = v19;
    *(a1 + 184) = v17;
    *(a1 + 80) = *(v19 + 16);
    result = StepFragmentCursorTo(a1, v18);
  }

  value = v50.value;
  *a4 = 0;
  v20 = *(a1 + 200);
  v21 = v20[2];
  if (value >= v21)
  {
    LOBYTE(v23) = 1;
  }

  else
  {
    v22 = *(a1 + 208);
    do
    {
      v22 = *(v22 + 8);
      if (!v22)
      {
        v23 = v20[1];
        if (!v23)
        {
          goto LABEL_22;
        }

        *(a1 + 200) = v23;
        v22 = v23[10];
        v20 = v23;
      }

      *(a1 + 208) = v22;
    }

    while (value < *(v22 + 24));
    LOBYTE(v23) = 1;
LABEL_22:
    v21 = v20[2];
  }

  if (value >= v21)
  {
    while (value >= v20[2] + v20[3])
    {
      v35 = *v20;
      if (!*v20)
      {
        v41 = v20[9];
        do
        {
          v42 = v41;
          if (!v41)
          {
            break;
          }

          v41 = *v41;
        }

        while (*v42);
        v34 = 0;
        *(a1 + 208) = v42;
        *(a1 + 80) = *(v42 + 4) + *(v42 + 10) - 1;
        *a4 = 1;
        if (a3)
        {
          goto LABEL_46;
        }

        goto LABEL_47;
      }

      v36 = v35[9];
      *(a1 + 200) = v35;
      *(a1 + 208) = v36;
      v20 = v35;
      if ((v23 & 1) == 0)
      {
        v34 = 0;
        if (a3)
        {
          goto LABEL_46;
        }

        goto LABEL_47;
      }
    }

    v37 = v20[9];
    if (v37 && value >= v37[3])
    {
      do
      {
        v39 = v37;
        v37 = *v37;
      }

      while (v37 && value >= v37[3]);
      *(a1 + 208) = v39;
      v40 = *(v39 + 13);
      if (v40)
      {
        v43 = *(v39 + 10);
        if (v43 < 1)
        {
          v44 = 0;
        }

        else
        {
          v44 = 0;
          v45 = kPerSampleInfo_SizeInInt32s[v40];
          v46 = (v39 + 7);
          v47 = v39[3];
          v48 = 4 * v45;
          while (1)
          {
            v47 += bswap32(*v46);
            if (v47 > value)
            {
              break;
            }

            ++v44;
            v46 = (v46 + v48);
            if (v43 == v44)
            {
              v44 = *(v39 + 10);
              break;
            }
          }
        }

        v34 = 0;
        v38 = *(v39 + 4) + v44;
      }

      else
      {
        v34 = 0;
        v38 = *(v39 + 4) + (value - v39[3]) / *(v20 + 15);
      }
    }

    else
    {
      v34 = 0;
      *(a1 + 208) = v37;
      v38 = *(v37 + 4);
    }

    *(a1 + 80) = v38;
    if (a3)
    {
      goto LABEL_46;
    }
  }

  else
  {
    *(a1 + 80) = *(*(a1 + 208) + 16);
    v34 = 1;
    if (a3)
    {
LABEL_46:
      *a3 = v34;
    }
  }

LABEL_47:
  if (value < v21 && *(*(a1 + 8) + 288))
  {
    *(a1 + 80) = *(a1 + 184);
    goto LABEL_24;
  }

  return result;
}

uint64_t MovieSampleAccessorMoveToLastSampleInDecodeOrder(uint64_t a1)
{
  v2 = *(a1 + 8);
  v3 = *(v2 + 728);
  if (v3 && (v4 = *(v3 + 56)) != 0)
  {
    v5 = *(v4 + 32) + *(v3 + 8) - 1;
    v6 = *(a1 + 80);
    if (v6 <= *(v2 + 288))
    {
      *(a1 + 192) = v3;
      *(a1 + 200) = v4;
      v7 = *(v4 + 72);
      *(a1 + 208) = v7;
      *(a1 + 184) = v6;
      *(a1 + 80) = *(v7 + 16);
    }

    StepFragmentCursorTo(a1, v5);
  }

  else
  {
      ;
    }

    v8 = *(a1 + 116) + *(a1 + 112) - 1;
    *(a1 + 80) = v8;
    v9 = *(a1 + 8);
    v10 = *(v9 + 244);
    v11 = *(v9 + 288);
    if (v10)
    {
      v11 /= v10;
    }

    if (v8 != v11)
    {
      MovieSampleAccessorMoveToLastSampleInDecodeOrder_cold_1(&v13);
      return v13;
    }
  }

  return 0;
}

uint64_t MovieSampleAccessorCreate(const void *a1, uint64_t a2, const void ***a3)
{
  v6 = *(a2 + 288);
  v7 = *(a2 + 728);
  if (v7 && *(v7 + 56))
  {
    v6 += *(v7 + 8);
  }

  if (!v6)
  {
    v8 = 0;
    v10 = 4294954454;
    goto LABEL_10;
  }

  v8 = malloc_type_calloc(1uLL, 0xD8uLL, 0x106004069928606uLL);
  if (!v8)
  {
    MovieSampleAccessorCreate_cold_1(&v12);
    v10 = v12;
    if (!v12)
    {
      goto LABEL_11;
    }

    goto LABEL_10;
  }

  if (a1)
  {
    v9 = CFRetain(a1);
  }

  else
  {
    v9 = 0;
  }

  *v8 = v9;
  v8[1] = CFRetain(a2);
  v10 = resetTrackCursor(v8);
  if (v10)
  {
LABEL_10:
    MovieSampleAccessorDispose(v8);
    v8 = 0;
  }

LABEL_11:
  *a3 = v8;
  return v10;
}

void MovieSampleAccessorDispose(const void **a1)
{
  if (a1)
  {
    v2 = *a1;
    if (v2)
    {
      CFRelease(v2);
      *a1 = 0;
    }

    v3 = a1[1];
    if (v3)
    {
      CFRelease(v3);
      a1[1] = 0;
    }

    v4 = a1[2];
    if (v4)
    {
      CFRelease(v4);
      a1[2] = 0;
    }

    v5 = a1[3];
    if (v5)
    {
      CFRelease(v5);
      a1[3] = 0;
    }

    v6 = a1[4];
    if (v6)
    {
      CFRelease(v6);
      a1[4] = 0;
    }

    v7 = a1[5];
    if (v7)
    {
      CFRelease(v7);
      a1[5] = 0;
    }

    v8 = a1[6];
    if (v8)
    {
      CFRelease(v8);
      a1[6] = 0;
    }

    v9 = a1[7];
    if (v9)
    {
      CFRelease(v9);
      a1[7] = 0;
    }

    v10 = a1[8];
    if (v10)
    {
      CFRelease(v10);
      a1[8] = 0;
    }

    v11 = a1[9];
    if (v11)
    {
      CFRelease(v11);
    }

    free(a1);
  }
}

void CopyMovieSampleGroupAccessorIntoNewDictionary(const void *a1, uint64_t a2, __CFDictionary *a3)
{
  value = 0;
  MovieSampleGroupAccessorCopy(a2, &value);
  if (value)
  {
    CFDictionarySetValue(a3, a1, value);
    CFRelease(value);
  }
}

uint64_t MovieSampleAccessorGetDTSTimeValue(uint64_t a1)
{
  v1 = *(a1 + 8);
  v2 = *(v1 + 728);
  if (v2 && *(v2 + 56) && *(a1 + 80) > *(v1 + 288))
  {
    return FragmentCursorGetDTSTimeValue(a1);
  }

  else
  {
    return *(a1 + 96) + *(a1 + 104) * (*(a1 + 80) - *(a1 + 116));
  }
}

uint64_t FragmentCursorGetDTSTimeValue(uint64_t a1)
{
  v1 = *(a1 + 208);
  v2 = *(v1 + 24);
  v3 = *(a1 + 80);
  v4 = *(v1 + 16);
  LODWORD(v5) = v3 - v4;
  if (v3 < v4)
  {
    FragmentCursorGetDTSTimeValue_cold_2();
  }

  else if (v3 >= *(v1 + 40) + v4)
  {
    FragmentCursorGetDTSTimeValue_cold_1();
  }

  else
  {
    v6 = *(v1 + 52);
    if (v6)
    {
      if (v5 >= 1)
      {
        v5 = v5;
        v7 = (v1 + 56);
        v8 = 4 * kPerSampleInfo_SizeInInt32s[v6];
        do
        {
          v2 += bswap32(*v7);
          v7 = (v7 + v8);
          --v5;
        }

        while (v5);
      }
    }

    else
    {
      v2 += *(*(a1 + 200) + 60) * v5;
    }
  }

  return v2;
}

uint64_t MovieSampleAccessorGetPTSTimeValue(uint64_t a1)
{
  v2 = *(a1 + 80);
  v3 = *(a1 + 132);
  v4 = *(a1 + 8);
  v5 = *(v4 + 728);
  if (v5 && *(v5 + 56) && v2 > *(v4 + 288))
  {
    DTSTimeValue = FragmentCursorGetDTSTimeValue(a1);
    v7 = *(a1 + 208);
    v8 = v7[13];
    if ((v8 & 8) != 0)
    {
      v24 = *(a1 + 80);
      v25 = v7[4];
      if (v24 < v25)
      {
        v26 = DTSTimeValue;
        MovieSampleAccessorGetPTSTimeValue_cold_2();
      }

      else
      {
        if (v24 < v7[10] + v25)
        {
          v9 = bswap32(v7[kPerSampleInfo_SizeInInt32s[v8] * (v24 - v25) + 14 + kPerSampleInfo_CompTimeOffIndex[v8]]);
          return DTSTimeValue + v9;
        }

        v26 = DTSTimeValue;
        MovieSampleAccessorGetPTSTimeValue_cold_1();
      }

      DTSTimeValue = v26;
    }

    v9 = 0;
    return DTSTimeValue + v9;
  }

  v10 = *(v4 + 464);
  if (v10)
  {
    while (1)
    {
      v11 = *(a1 + 128);
      destination = 0;
      CMBlockBufferCopyDataBytes(v10, 8 * v11, 8uLL, &destination);
      v12 = *(a1 + 132);
      v13 = v12 + bswap32(destination);
      if (v12 <= v2 && v2 < v13)
      {
        break;
      }

      v15 = *(a1 + 128);
      if (v2 >= v3)
      {
        v19 = v15 + 1;
        v18 = *(a1 + 8);
        if (v19 >= *(v18 + 456))
        {
          goto LABEL_18;
        }

        *(a1 + 128) = v19;
      }

      else
      {
        v16 = v15 - 1;
        if (v15 < 1)
        {
          goto LABEL_18;
        }

        *(a1 + 128) = v16;
        v17 = *(a1 + 8);
        destination = 0;
        CMBlockBufferCopyDataBytes(*(v17 + 464), 8 * v16, 8uLL, &destination);
        v13 = *(a1 + 132) - bswap32(destination);
        v18 = *(a1 + 8);
      }

      *(a1 + 132) = v13;
      v10 = *(v18 + 464);
    }

    v20 = *(a1 + 8);
    v21 = *(a1 + 128);
    destination = 0;
    CMBlockBufferCopyDataBytes(*(v20 + 464), 8 * v21, 8uLL, &destination);
    v22 = bswap32(HIDWORD(destination));
  }

  else
  {
LABEL_18:
    v22 = 0;
  }

  return MovieSampleAccessorGetDTSTimeValue(a1) + v22;
}

uint64_t MovieSampleTableGetCompositionOffsetDisplayOffset(uint64_t a1, int a2)
{
  destination = 0;
  CMBlockBufferCopyDataBytes(*(a1 + 464), 8 * a2, 8uLL, &destination);
  return bswap32(HIDWORD(destination));
}

uint64_t MovieSampleAccessorGetSampleDuration(uint64_t a1, CMTime *a2)
{
  v4 = *(a1 + 176);
  v25[10] = *(a1 + 160);
  v25[11] = v4;
  v25[12] = *(a1 + 192);
  v26 = *(a1 + 208);
  v5 = *(a1 + 112);
  v25[6] = *(a1 + 96);
  v25[7] = v5;
  v6 = *(a1 + 144);
  v25[8] = *(a1 + 128);
  v25[9] = v6;
  v7 = *(a1 + 48);
  v25[2] = *(a1 + 32);
  v25[3] = v7;
  v8 = *(a1 + 80);
  v25[4] = *(a1 + 64);
  v25[5] = v8;
  v9 = *(a1 + 16);
  v25[0] = *a1;
  v25[1] = v9;
  MovieSampleAccessorStepFwdPTS(v25);
  if (v10 == -12840)
  {
    v11 = *(a1 + 8);
    v12 = *(v11 + 728);
    if (!v12 || !*(v12 + 56) || (v13 = *(a1 + 80), v13 <= *(v11 + 288)))
    {
      v19 = *(a1 + 104);
LABEL_9:
      CMTimeMake(&v24, v19, *(v11 + 232));
      goto LABEL_10;
    }

    v14 = *(a1 + 208);
    v15 = v14[13];
    if ((v15 & 1) == 0)
    {
      v16 = *(*(a1 + 200) + 60);
LABEL_14:
      v19 = v16;
      v11 = *(a1 + 8);
      goto LABEL_9;
    }

    v21 = v14[4];
    if (v13 < v21)
    {
      MovieSampleAccessorGetSampleDuration_cold_2();
    }

    else
    {
      if (v13 < v14[10] + v21)
      {
        v16 = bswap32(v14[kPerSampleInfo_SizeInInt32s[v15] * (v13 - v21) + 14]);
        goto LABEL_14;
      }

      MovieSampleAccessorGetSampleDuration_cold_1();
    }

    v16 = 0;
    goto LABEL_14;
  }

  PTSTimeValue = MovieSampleAccessorGetPTSTimeValue(v25);
  CMTimeMake(&lhs, PTSTimeValue, *(*(&v25[0] + 1) + 232));
  v18 = MovieSampleAccessorGetPTSTimeValue(a1);
  CMTimeMake(&rhs, v18, *(*(a1 + 8) + 232));
  CMTimeSubtract(&v24, &lhs, &rhs);
LABEL_10:
  *a2 = v24;
  return 0;
}

__n128 MovieSampleAccessorStepFwdPTS(uint64_t a1)
{
  v47 = 0;
  v45 = 0u;
  v46 = 0u;
  v43 = 0u;
  v44 = 0u;
  v41 = 0u;
  v42 = 0u;
  v39 = 0u;
  v40 = 0u;
  PTSTimeValue = MovieSampleAccessorGetPTSTimeValue(a1);
  v3 = PTSTimeValue;
  v4 = *(a1 + 8);
  v5 = *(v4 + 728);
  if (v5 && *(v5 + 56) && *(a1 + 80) > *(v4 + 288))
  {
    if (!*(v5 + 13))
    {
      v8 = 0;
      v9 = 0;
      goto LABEL_8;
    }

    v6 = (v5 + 32);
    v7 = (v5 + 36);
  }

  else
  {
    v6 = (v4 + 112);
    v7 = (v4 + 116);
  }

  v8 = *v6;
  v9 = *v7;
LABEL_8:
  v10 = *(a1 + 160);
  v11 = *(a1 + 192);
  v34 = *(a1 + 176);
  v35 = v11;
  v12 = *(a1 + 96);
  v13 = *(a1 + 128);
  v14 = *(a1 + 144);
  v30 = *(a1 + 112);
  v31 = v13;
  v38 = 0;
  v36 = *(a1 + 208);
  v32 = v14;
  v33 = v10;
  v15 = *(a1 + 48);
  v27[2] = *(a1 + 32);
  v27[3] = v15;
  v16 = *(a1 + 80);
  v27[4] = *(a1 + 64);
  v28 = v16;
  v29 = v12;
  v17 = *(a1 + 16);
  v27[0] = *a1;
  v27[1] = v17;
  CMTimeMake(&v26, (PTSTimeValue - v8) & ~((PTSTimeValue - v8) >> 63), *(*(&v27[0] + 1) + 232));
  MovieSampleAccessorMoveToSampleForDTS(v27, &v26, &v38, &v37);
  v18 = 0;
  v19 = 0;
  v20 = 1;
  do
  {
    while (1)
    {
      v21 = MovieSampleAccessorGetPTSTimeValue(v27);
      if (v21 <= v3)
      {
        break;
      }

      if (v20 & 1 | (v21 < v19))
      {
        v45 = v34;
        v46 = v35;
        v47 = v36;
        v41 = v30;
        v42 = v31;
        v43 = v32;
        v44 = v33;
        v18 = v21 - v9;
        v19 = v21;
        v39 = v28;
        v40 = v29;
      }

      if (MovieSampleAccessorGetDTSTimeValue(v27) <= v18)
      {
        v20 = 0;
        if (!MovieSampleAccessorStepCursor(v27, 1, 0))
        {
          continue;
        }
      }

      goto LABEL_18;
    }
  }

  while (!MovieSampleAccessorStepCursor(v27, 1, 0));
  if (v20)
  {
    return result;
  }

LABEL_18:
  *(a1 + 208) = v47;
  v23 = v46;
  *(a1 + 176) = v45;
  *(a1 + 192) = v23;
  v24 = v42;
  *(a1 + 112) = v41;
  *(a1 + 128) = v24;
  v25 = v44;
  *(a1 + 144) = v43;
  *(a1 + 160) = v25;
  result = v40;
  *(a1 + 80) = v39;
  *(a1 + 96) = result;
  return result;
}

CMTime *MovieSampleAccessorGetPTS@<X0>(uint64_t a1@<X0>, CMTime *a2@<X8>)
{
  PTSTimeValue = MovieSampleAccessorGetPTSTimeValue(a1);
  v5 = *(*(a1 + 8) + 232);

  return CMTimeMake(a2, PTSTimeValue, v5);
}

CMTime *MovieSampleAccessorGetDTS@<X0>(uint64_t a1@<X0>, CMTime *a2@<X8>)
{
  DTSTimeValue = MovieSampleAccessorGetDTSTimeValue(a1);
  v5 = *(*(a1 + 8) + 232);

  return CMTimeMake(a2, DTSTimeValue, v5);
}

__n128 MovieSampleAccessorMoveToSampleAtPTS(uint64_t a1, uint64_t a2, _BYTE *a3, _BYTE *a4)
{
  v57 = *MEMORY[0x1E69E9840];
  memset(&v48, 0, sizeof(v48));
  v8 = *(*(a1 + 8) + 232);
  *time = *a2;
  *&time[16] = *(a2 + 16);
  CMTimeConvertScale(&v48, time, v8, kCMTimeRoundingMethod_RoundTowardNegativeInfinity);
  v9 = *(a2 + 12) & 9;
  if ((~*(a2 + 12) & 5) == 0 || v9 == 9)
  {
    v10 = v9 == 9;
    v11 = 0x8000000000000000;
    if (!v10)
    {
      v11 = 0x7FFFFFFFFFFFFFFFLL;
    }

    v48.value = v11;
  }

  v47 = 0;
  *time = v48;
  MovieSampleAccessorMoveToSampleForDTS(a1, time, &v47 + 1, &v47);
  v13 = *(a1 + 8);
  v14 = *(v13 + 728);
  if (v14)
  {
    LODWORD(v14) = *(v14 + 13) != 0;
  }

  if (*(v13 + 720) || v14)
  {
    v16 = *(v13 + 112);
    v15 = *(v13 + 116);
    v17 = 0x7FFFFFFFFFFFFFFFLL;
    if (v48.value <= 0)
    {
      v17 = 0x8000000000000000;
    }

    v18 = __OFSUB__(v48.value, v15);
    v19 = v48.value - v15;
    if (v18)
    {
      v20 = v17;
    }

    else
    {
      v20 = v19;
    }

    if (a3)
    {
      *a3 = 0;
    }

    if (a4)
    {
      *a4 = 0;
    }

    v21 = 0;
    do
    {
      if (MovieSampleAccessorStepCursor(a1, 1, 0))
      {
        break;
      }

      PTSTimeValue = MovieSampleAccessorGetPTSTimeValue(a1);
      if (PTSTimeValue == v48.value)
      {
        return result;
      }

      if (PTSTimeValue > v48.value)
      {
        v21 = 1;
      }
    }

    while (MovieSampleAccessorGetDTSTimeValue(a1) <= v20);
    v55 = 0uLL;
    v56 = 0;
    memset(time, 0, sizeof(time));
    v50 = 0u;
    v51 = 0u;
    v52 = 0u;
    v53 = 0u;
    v54 = 0;
    v23 = *(a1 + 8);
    v24 = *(v23 + 288);
    v25 = *(v23 + 728);
    v46 = a4;
    if (v25)
    {
      v24 += *(v25 + 8);
    }

    v26 = 0;
    v27 = 0;
    v28 = 0;
    if (*(a1 + 80) + 1 <= v24)
    {
      v29 = 1;
    }

    else
    {
      v29 = v21;
    }

    v30 = 0x7FFFFFFFFFFFFFFFLL;
    do
    {
      v31 = MovieSampleAccessorGetPTSTimeValue(a1);
      v32 = v31;
      if (v48.value == v31)
      {
        break;
      }

      if ((v31 & 0x8000000000000000) == 0 && v48.value > v31 && v48.value - v31 < v30)
      {
        v26 = *(a1 + 80);
        v55 = *(a1 + 84);
        v56 = *(a1 + 100);
        v27 = *(a1 + 104);
        v33 = *(a1 + 192);
        v52 = *(a1 + 176);
        v53 = v33;
        v54 = *(a1 + 208);
        v34 = *(a1 + 128);
        *time = *(a1 + 112);
        *&time[16] = v34;
        v35 = *(a1 + 160);
        v30 = v48.value - v31;
        v28 = v31;
        v50 = *(a1 + 144);
        v51 = v35;
      }

      if (v48.value < v31)
      {
        v29 = 1;
      }
    }

    while ((!v26 || MovieSampleAccessorGetDTSTimeValue(a1) + v16 > v28) && !MovieSampleAccessorStepCursor(a1, -1, 0));
    if (v32 != v48.value)
    {
      if (v26 && (v29 || v28 + v27 > v48.value))
      {
        *(a1 + 80) = v26;
        *(a1 + 84) = v55;
        *(a1 + 100) = v56;
        *(a1 + 104) = v27;
        v44 = v53;
        *(a1 + 176) = v52;
        *(a1 + 192) = v44;
        *(a1 + 208) = v54;
        v45 = *&time[16];
        *(a1 + 112) = *time;
        *(a1 + 128) = v45;
        result = v51;
        *(a1 + 144) = v50;
        *(a1 + 160) = result;
      }

      else if (v48.value >= v32)
      {
        v37 = 0x8000000000000000;
        do
        {
          v38 = MovieSampleAccessorGetPTSTimeValue(a1);
          if (v37 < v38)
          {
            v26 = *(a1 + 80);
            v55 = *(a1 + 84);
            v56 = *(a1 + 100);
            v27 = *(a1 + 104);
            v39 = *(a1 + 192);
            v52 = *(a1 + 176);
            v53 = v39;
            v54 = *(a1 + 208);
            v40 = *(a1 + 128);
            *time = *(a1 + 112);
            *&time[16] = v40;
            v41 = *(a1 + 160);
            v37 = v38;
            v50 = *(a1 + 144);
            v51 = v41;
          }
        }

        while (!MovieSampleAccessorStepCursor(a1, 1, 0));
        *(a1 + 80) = v26;
        *(a1 + 84) = v55;
        *(a1 + 100) = v56;
        *(a1 + 104) = v27;
        v42 = v53;
        *(a1 + 176) = v52;
        *(a1 + 192) = v42;
        *(a1 + 208) = v54;
        v43 = *&time[16];
        *(a1 + 112) = *time;
        *(a1 + 128) = v43;
        result = v51;
        *(a1 + 144) = v50;
        *(a1 + 160) = result;
        if (v46)
        {
          *v46 = 1;
        }
      }

      else
      {
        v36 = resetTrackCursor(a1);
        if (a3 && !v36)
        {
          *a3 = 1;
        }
      }
    }
  }

  else
  {
    if (a3)
    {
      *a3 = HIBYTE(v47);
    }

    if (a4)
    {
      *a4 = v47;
    }
  }

  return result;
}

void MovieSampleAccessorStepBackPTS(uint64_t a1)
{
  PTSTimeValue = MovieSampleAccessorGetPTSTimeValue(a1);
  v3 = PTSTimeValue < 1;
  v4 = PTSTimeValue - 1;
  if (!v3)
  {
    v6 = 0;
    CMTimeMake(&v5, v4, *(*(a1 + 8) + 232));
    MovieSampleAccessorMoveToSampleAtPTS(a1, &v5, &v6 + 1, &v6);
  }
}

uint64_t MovieSampleAccessorComputePlayableHorizon(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v10 = *(a1 + 176);
  v97 = *(a1 + 160);
  v98 = v10;
  v99 = *(a1 + 192);
  v100 = *(a1 + 208);
  v11 = *(a1 + 112);
  v93 = *(a1 + 96);
  v94 = v11;
  v12 = *(a1 + 144);
  v95 = *(a1 + 128);
  v96 = v12;
  v13 = *(a1 + 48);
  v92[2] = *(a1 + 32);
  v92[3] = v13;
  v14 = *(a1 + 80);
  v92[4] = *(a1 + 64);
  v92[5] = v14;
  v15 = *(a1 + 16);
  v92[0] = *a1;
  v92[1] = v15;
  v90 = 0;
  v91 = 0;
  v89 = 0;
  v88 = **&MEMORY[0x1E6960C70];
  v87 = v88;
  v16 = (a1 + 8);
  v17 = *(*(a1 + 8) + 728);
  if (v17 && *(v17 + 56))
  {
    MovieSampleAccessorComputePlayableHorizon_cold_1(a1, a1 + 8, &v87, &v88);
    v28 = 0;
    goto LABEL_60;
  }

  MovieSampleAccessorGetSampleLocation(a1, &v90, &v91, 0, a5, a6, a7, a8, v71, v73, SHIDWORD(v73), v76, v78, v80, v82, rhs.value, *&rhs.timescale, rhs.epoch, v85, lhs.value, *&lhs.timescale);
  if (v18)
  {
    goto LABEL_64;
  }

  v19 = v90;
  if ((v91 | v90) < 0 || (v20 = *a1, v21 = *(*a1 + 72), v21 <= v90) || v91 + v90 > v21)
  {
    fig_log_get_emitter();
    v18 = FigSignalErrorAtGM();
    if (v18)
    {
LABEL_64:
      v28 = v18;
      goto LABEL_60;
    }

    v20 = *a1;
    v19 = v90;
  }

  v22 = *(v20 + 48);
  v23 = *(*(CMBaseObjectGetVTable() + 16) + 24);
  if (!v23)
  {
    v28 = 4294954514;
    goto LABEL_60;
  }

  v18 = v23(v22, v19, &v89);
  if (v18)
  {
    goto LABEL_64;
  }

  if (!v89)
  {
    v28 = 0;
    v29 = MEMORY[0x1E6960CC0];
    *a2 = *MEMORY[0x1E6960CC0];
    v30 = *(v29 + 16);
    goto LABEL_61;
  }

  v24 = v90 + v89;
  v25 = *(a1 + 80);
  v26 = *(a1 + 136);
  v79 = a2;
  if (*(*(a1 + 8) + 432) == 1)
  {
    v27 = 1;
  }

  else
  {
    v27 = *(a1 + 140);
  }

  v31 = 0;
  lhs.value = 0;
  rhs.value = 0;
  v32 = *(a1 + 144);
  v33 = *(a1 + 148);
  LODWORD(v81) = v25;
  v34 = v27 + (v25 - v27) / v33 * v33;
  v35 = 1;
  while (2)
  {
    while (2)
    {
      HIDWORD(v81) = v35;
      v83 = __PAIR64__(v34, v31);
      v77 = v24;
      v36 = 12 * v26;
      v37 = 12 * (v26 + 1);
      while (1)
      {
        v38 = v27 + v32 * v33;
        v39 = v34 - v27;
        if (v34 < v27)
        {
          v40 = *v16;
          goto LABEL_23;
        }

        v40 = *v16;
        if (v34 < v38)
        {
          break;
        }

LABEL_23:
        v41 = *(v40 + 432);
        if (v26 + 1 >= v41)
        {
          goto LABEL_52;
        }

        if (v41 != 1)
        {
          DWORD2(destination) = 0;
          *&destination = 0;
          CMBlockBufferCopyDataBytes(*(v40 + 440), v37, 0xCuLL, &destination);
          v33 = bswap32(DWORD1(destination));
          v40 = *v16;
        }

        v33 /= *(v40 + 244);
        if (v26 + 2 == *(v40 + 432))
        {
          v42 = (*(v40 + 624))() + 1;
        }

        else
        {
          DWORD2(destination) = 0;
          *&destination = 0;
          CMBlockBufferCopyDataBytes(*(v40 + 440), 12 * (v26 + 2), 0xCuLL, &destination);
          v42 = bswap32(destination);
        }

        v43 = *v16;
        DWORD2(destination) = 0;
        *&destination = 0;
        CMBlockBufferCopyDataBytes(*(v43 + 440), v37, 0xCuLL, &destination);
        v32 = v42 - bswap32(destination);
        v36 += 12;
        v37 += 12;
        ++v26;
        v27 = v38;
        v34 = HIDWORD(v83);
      }

      DWORD2(destination) = 0;
      *&destination = 0;
      CMBlockBufferCopyDataBytes(*(v40 + 440), v36, 0xCuLL, &destination);
      v75 = bswap32(destination);
      v44 = CheckChunkNumber(*v16, v75 - 1);
      if (v44)
      {
        goto LABEL_67;
      }

      v45 = v39 / v33;
      v44 = CheckChunkNumber(*v16, v39 / v33 + v75 - 1);
      if (v44)
      {
        goto LABEL_67;
      }

      v46 = (*(*v16 + 616))();
      v24 = v77;
      if (v46 >= v77)
      {
        v47 = *(*a1 + 48);
        v48 = *(*(CMBaseObjectGetVTable() + 16) + 24);
        if (v48)
        {
          v44 = v48(v47, v46, &rhs);
          if (!v44)
          {
            if (rhs.value)
            {
              v24 = rhs.value + v46;
              goto LABEL_37;
            }

LABEL_52:
            v31 = v83;
            if ((v81 & 0x100000000) != 0)
            {
              v31 = v81;
            }

            goto LABEL_54;
          }

LABEL_67:
          v28 = v44;
        }

        else
        {
          v28 = 4294954514;
        }

        a2 = v79;
        goto LABEL_60;
      }

LABEL_37:
      if (v45 + v75 < (*(*v16 + 624))())
      {
        v49 = (*(*v16 + 616))();
        if (v46 < v49 && v49 <= v24)
        {
          v35 = 0;
          v31 = HIDWORD(v83) + v33;
          v34 = HIDWORD(v83) + v33;
          continue;
        }
      }

      break;
    }

    v115 = 0;
    v51 = *(a1 + 176);
    v111 = *(a1 + 160);
    v112 = v51;
    v113 = *(a1 + 192);
    v114 = *(a1 + 208);
    v52 = *(a1 + 112);
    v107 = *(a1 + 96);
    v108 = v52;
    v53 = *(a1 + 144);
    v109 = *(a1 + 128);
    v110 = v53;
    v54 = *(a1 + 48);
    v103 = *(a1 + 32);
    v104 = v54;
    v55 = *(a1 + 80);
    v105 = *(a1 + 64);
    v106 = v55;
    v56 = *(a1 + 16);
    v31 = HIDWORD(v83);
    v57 = HIDWORD(v83) + v33;
    destination = *a1;
    v102 = v56;
    MovieSampleAccessorStepCursor(&destination, (HIDWORD(v83) + v33 + ~v106), 0);
    MovieSampleAccessorGetSampleLocation(&destination, &lhs, &v115, 0, v58, v59, v60, v61, v72, v74, v75, v77, v79, v81, v83, rhs.value, *&rhs.timescale, rhs.epoch, v85, lhs.value, *&lhs.timescale);
    if (!v62)
    {
      v35 = 0;
      if (v115 + lhs.value <= v24)
      {
        v63 = v57;
      }

      else
      {
        v63 = v31;
      }

      if (v63 <= v81)
      {
        v31 = v81;
      }

      else
      {
        v31 = v63;
      }

      v34 = v57;
      if (v115 + lhs.value > v24)
      {
        goto LABEL_54;
      }

      continue;
    }

    break;
  }

  if (v31 <= v81)
  {
    v31 = v81;
  }

LABEL_54:
  PTSTimeValue = MovieSampleAccessorGetPTSTimeValue(a1);
  CMTimeMake(&v87, PTSTimeValue, *(*(a1 + 8) + 232));
  v65 = MovieSampleAccessorStepCursor(v92, (v31 - *(a1 + 80)), 0);
  if (v65 == -12840)
  {
    MovieSampleAccessorMoveToSampleAtPTS(v92, MEMORY[0x1E6960C88], 0, 0);
    v28 = v68;
    a2 = v79;
    if (v68)
    {
      goto LABEL_60;
    }

    v69 = MovieSampleAccessorGetPTSTimeValue(v92);
    v67 = *(*(&v92[0] + 1) + 232);
    v66 = *(&v93 + 1) + v69;
  }

  else
  {
    v28 = v65;
    a2 = v79;
    if (v65)
    {
      goto LABEL_60;
    }

    v66 = MovieSampleAccessorGetPTSTimeValue(v92);
    v67 = *(*v16 + 232);
  }

  CMTimeMake(&v88, v66, v67);
LABEL_60:
  lhs = v88;
  rhs = v87;
  CMTimeSubtract(&destination, &lhs, &rhs);
  *a2 = destination;
  v30 = v102;
LABEL_61:
  *(a2 + 16) = v30;
  return v28;
}

double MovieTrackGetMediaDuration@<D0>(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  *a2 = 0;
  *(a2 + 8) = 0;
  *(a2 + 16) = 0;
  CMTimeMake(a2, *(a1 + 224), *(a1 + 232));
  v5 = *(a1 + 728);
  if (v5)
  {
    if (v5[7])
    {
      CMTimeMake(&rhs, *v5, *(a1 + 232));
      v6 = *a2;
      CMTimeAdd(&v8, &v6, &rhs);
      result = *&v8.value;
      *a2 = v8;
    }
  }

  return result;
}

uint64_t MovieSampleAccessorGetDependencyInfo(uint64_t a1, _BYTE *a2, _BYTE *a3, _BYTE *a4, _BYTE *a5, _DWORD *a6, BOOL *a7)
{
  v14 = *(a1 + 8);
  v15 = *(v14 + 728);
  if (v15 && *(v15 + 56) && *(a1 + 80) > *(v14 + 288))
  {
    SampleFlags = FragmentCursorGetSampleFlags(a1);
    if (a2)
    {
      *a2 = (SampleFlags & 0x10000) == 0;
    }

    if (a3)
    {
      *a3 = 0;
    }

    if (a6)
    {
      *a6 = 2;
    }

    if (a7)
    {
      *a7 = (SampleFlags & 0xC00000) == 0x800000;
    }

    v17 = FragmentCursorGetSampleFlags(a1);
    if (a4 && a5)
    {
      v18 = v17;
      v19 = *(a1 + 200);
      v20 = *(v19 + 96);
      if (!v20 || CMBlockBufferCopyDataBytes(v20, (*(a1 + 80) - *(v19 + 32)), 1uLL, a5))
      {
        *a5 = (v18 >> 20) & 0x7F;
      }

      *a4 = 1;
    }
  }

  else
  {
    if (a2)
    {
      if (*(v14 + 488))
      {
        v21 = *(v14 + 480);
        if (v21)
        {
          SampleInTable = NEW_findSampleInTable(v14, MovieSampleTableGetSyncSampleNumber, v21, *(a1 + 80), (a1 + 152));
        }

        else
        {
          SampleInTable = 0;
        }
      }

      else
      {
        SampleInTable = 1;
      }

      *a2 = SampleInTable;
    }

    if (a3)
    {
      v23 = *(a1 + 8);
      if (*(v23 + 512) && (v24 = *(v23 + 504), v24))
      {
        v25 = NEW_findSampleInTable(v23, MovieSampleTableGetPartialSyncSampleNumber, v24, *(a1 + 80), (a1 + 156));
      }

      else
      {
        v25 = 0;
      }

      *a3 = v25;
    }

    if (a4 && a5)
    {
      v26 = *(a1 + 8);
      v27 = *(v26 + 536);
      if (v27)
      {
        *a5 = MovieSampleTableGetSampleDependencyFlags(v26, *(a1 + 80) - 1);
        LOBYTE(v27) = 1;
      }

      *a4 = v27;
    }

    if (a6)
    {
      *a6 = 2;
    }

    if (a7)
    {
      v28 = *(a1 + 8);
      if (*(v28 + 536))
      {
        *a7 = (MovieSampleTableGetSampleDependencyFlags(v28, *(a1 + 80) - 1) & 8) != 0;
      }

      else
      {
        *a7 = 0;
      }
    }
  }

  return 0;
}

uint64_t FragmentCursorGetSampleFlags(uint64_t a1)
{
  v1 = *(a1 + 80);
  v2 = *(a1 + 208);
  v3 = *(v2 + 16);
  if (v1 != v3 || !*(v2 + 44))
  {
    v5 = *(v2 + 52);
    if ((v5 & 4) == 0)
    {
      return *(*(a1 + 200) + 68);
    }

    if (v1 < v3)
    {
      FragmentCursorGetSampleFlags_cold_2();
    }

    else
    {
      if (v1 < *(v2 + 40) + v3)
      {
        v4 = *(v2 + 4 * kPerSampleInfo_SizeInInt32s[v5] * (v1 - v3) + 4 * kPerSampleInfo_FlagsIndex[v5] + 56);
        return bswap32(v4);
      }

      FragmentCursorGetSampleFlags_cold_1();
    }

    return 0;
  }

  v4 = *(v2 + 48);
  return bswap32(v4);
}

uint64_t MovieSampleTableGetSampleDependencyFlags(uint64_t a1, int a2)
{
  result = 0;
  destination = 0;
  if (*(a1 + 528) > a2)
  {
    CMBlockBufferCopyDataBytes(*(a1 + 536), a2, 1uLL, &destination);
    return destination;
  }

  return result;
}

const __CFArray *MovieTrackGetNumSampleDescriptions(uint64_t a1)
{
  result = *(a1 + 56);
  if (result)
  {
    return CFArrayGetCount(result);
  }

  return result;
}

void *MovieInformationClearChangeBits(void *result, int a2)
{
  result[5] = 0;
  if (a2)
  {
    v2 = result[38];
    if (v2 >= 1)
    {
      v3 = result[40];
      do
      {
        v4 = *v3++;
        *(v4 + 16) = 0;
        --v2;
      }

      while (v2);
    }
  }

  return result;
}

uint64_t MovieInformationFindTrackForTrackIndex(uint64_t a1, uint64_t a2)
{
  if (a2 < 0 || *(a1 + 304) <= a2)
  {
    return 0;
  }

  else
  {
    return *(*(a1 + 320) + 8 * a2);
  }
}

uint64_t MovieTrackFindOrAddSampleDescription(uint64_t a1, const void *a2, const void *a3, _DWORD *a4)
{
  if (!*(a1 + 56))
  {
    Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, 0);
    *(a1 + 56) = Mutable;
    if (!Mutable)
    {
      MovieTrackFindOrAddSampleDescription_cold_5(&v25);
      return v25;
    }
  }

  if (!*(a1 + 64))
  {
    v9 = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, 0);
    *(a1 + 64) = v9;
    if (!v9)
    {
      MovieTrackFindOrAddSampleDescription_cold_4(&v25);
      return v25;
    }
  }

  v10 = *(a1 + 48);
  if (!v10)
  {
    v10 = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
    *(a1 + 48) = v10;
    if (!v10)
    {
      MovieTrackFindOrAddSampleDescription_cold_3(&v25);
      return v25;
    }
  }

  v26.length = CFArrayGetCount(v10);
  v26.location = 0;
  FirstIndexOfValue = CFArrayGetFirstIndexOfValue(v10, v26, a2);
  for (i = 0; ; ++i)
  {
    Count = *(a1 + 64);
    if (Count)
    {
      Count = CFArrayGetCount(Count);
    }

    if (i >= Count)
    {
      break;
    }

    CFArrayGetValueAtIndex(*(a1 + 64), i);
    if (FigCFEqual())
    {
      if (FirstIndexOfValue != -1)
      {
        v18 = CFArrayGetCount(*(a1 + 56));
        while (v18-- >= 1)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(*(a1 + 56), v18);
          if (*ValueAtIndex == FirstIndexOfValue && ValueAtIndex[1] == i)
          {
            v22 = v18 + 1;
            goto LABEL_31;
          }
        }
      }

      goto LABEL_27;
    }
  }

  v14 = malloc_type_malloc(0x18uLL, 0x1060040ABACF81FuLL);
  if (!v14)
  {
    MovieTrackFindOrAddSampleDescription_cold_1(&v25);
    return v25;
  }

  v15 = v14;
  v14[1] = 0;
  if (a3)
  {
    v16 = CFRetain(a3);
    v17 = 1970433056;
  }

  else
  {
    v17 = 0;
    v16 = 0;
  }

  v15[2] = v16;
  *v15 = v17;
  CFArrayAppendValue(*(a1 + 64), v15);
  i = CFArrayGetCount(*(a1 + 64)) - 1;
LABEL_27:
  if (FirstIndexOfValue == -1)
  {
    CFArrayAppendValue(*(a1 + 48), a2);
    FirstIndexOfValue = CFArrayGetCount(*(a1 + 48)) - 1;
    *(a1 + 16) |= 4uLL;
  }

  v23 = malloc_type_malloc(0x10uLL, 0x1000040451B5BE8uLL);
  if (!v23)
  {
    MovieTrackFindOrAddSampleDescription_cold_2(&v25);
    return v25;
  }

  *v23 = FirstIndexOfValue;
  v23[1] = i;
  CFArrayAppendValue(*(a1 + 56), v23);
  v22 = CFArrayGetCount(*(a1 + 56));
LABEL_31:
  result = 0;
  if (a4)
  {
    *a4 = v22;
  }

  return result;
}

void AllSampleGroupCollectionApplierFunction(void *a1, __CFDictionary *a2)
{
  key = 0;
  value = 0;
  MovieSampleGroupAccessorCreate(a1, &value);
  if (value)
  {
    MovieSampleGroupCopyGroupTypeKeyString(a1, &key);
    if (key)
    {
      CFDictionarySetValue(a2, key, value);
    }

    else
    {
      AllSampleGroupCollectionApplierFunction_cold_1();
    }
  }

  if (key)
  {
    CFRelease(key);
  }

  if (value)
  {
    CFRelease(value);
  }
}

void CopySampleGroupAccessorDataApplierFunction(const void *a1, uint64_t a2, CFMutableDictionaryRef *a3)
{
  value = 0;
  MovieSampleGroupAccessorCopyDescriptionForSample(a2, *a3, &value);
  if (value)
  {
    CFDictionarySetValue(a3[1], a1, value);
    CFRelease(value);
  }
}

uint64_t MovieSampleAccessorCreateSampleDependencyAttributeDictionary(CFAllocatorRef allocator, uint64_t a2, __CFDictionary **a3)
{
  v6 = *(a2 + 8);
  if (*(v6 + 24) != 1936684398 || *(v6 + 536))
  {
    HIWORD(v27[0]) = 0;
    LODWORD(v27[0]) = 0;
    HIDWORD(v26) = 0;
    *&v22[4] = 0;
    *v22 = 0;
    BYTE3(v26) = 0;
    BYTE6(v25) = 0;
    Mutable = CFDictionaryCreateMutable(allocator, 8, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (Mutable)
    {
      v9 = Mutable;
      WORD2(v27[0]) = 0;
      MovieSampleAccessorGetDependencyInfo(a2, v27 + 5, v27 + 4, v27 + 6, v27 + 7, 0, 0);
      v10 = MEMORY[0x1E695E4D0];
      if (!BYTE5(v27[0]))
      {
        CFDictionarySetValue(v9, *MEMORY[0x1E6960458], *MEMORY[0x1E695E4D0]);
      }

      if (BYTE4(v27[0]))
      {
        CFDictionarySetValue(v9, *MEMORY[0x1E6960460], *v10);
      }

      if (BYTE6(v27[0]))
      {
        v11 = HIBYTE(v27[0]);
        v12 = MEMORY[0x1E695E4C0];
        if ((v27[0] & 0xC00000000000000) != 0 && (HIBYTE(v27[0]) & 0xC) != 0xC)
        {
          if ((v27[0] & 0x400000000000000) != 0)
          {
            v13 = v10;
          }

          else
          {
            v13 = MEMORY[0x1E695E4C0];
          }

          CFDictionarySetValue(v9, *MEMORY[0x1E6960450], *v13);
          v11 = HIBYTE(v27[0]);
        }

        if ((v11 & 0x30) != 0 && (v11 & 0x30) != 0x30)
        {
          if ((v11 & 0x10) != 0)
          {
            v14 = v10;
          }

          else
          {
            v14 = v12;
          }

          CFDictionarySetValue(v9, *MEMORY[0x1E6960400], *v14);
          v11 = HIBYTE(v27[0]);
        }

        if ((v11 & 3) != 0 && (v11 & 3) != 3)
        {
          if (v11)
          {
            v15 = v10;
          }

          else
          {
            v15 = v12;
          }

          CFDictionarySetValue(v9, *MEMORY[0x1E6960448], *v15);
          v11 = HIBYTE(v27[0]);
        }

        if ((v11 & 0x40) != 0)
        {
          v16 = v10;
        }

        else
        {
          v16 = v12;
        }

        CFDictionarySetValue(v9, *MEMORY[0x1E6960418], *v16);
      }

      desc = 0;
      MovieSampleAccessorGetFormatDescription(a2, &desc);
      MovieSampleAccessorGetTsclValues(a2, v27 + 3, v27 + 2, v27 + 1, v27, &v26 + 4, v22, &v26 + 3, &v26 + 2, &v26 + 1, &v26, (&v25 + 7), *v22, v23, desc, v25, v26, v27[0], v27[1], v27[2], v27[3], v27[4], v27[5], v27[6], v27[7], v27[8], v27[9], v27[10]);
      v17 = 0;
      v18 = 0;
      v19 = 0;
      if (v20)
      {
        v17 = CFDictionaryCreateMutable(allocator, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
        v18 = CFDataCreate(allocator, &v26 + 4, 4);
        v19 = CFDataCreate(allocator, v22, 6);
        FigCFDictionarySetInt();
        FigCFDictionarySetInt();
        FigCFDictionarySetInt();
        FigCFDictionarySetInt();
        CFDictionarySetValue(v17, *MEMORY[0x1E69601A0], v18);
        CFDictionarySetValue(v17, *MEMORY[0x1E6960190], v19);
        FigCFDictionarySetInt();
        CFDictionarySetValue(v9, *MEMORY[0x1E6960438], v17);
      }

      if (MovieSampleAccessorGetSyncValues())
      {
        FigCFDictionarySetInt();
      }

      if (MovieSampleAccessorIsInTsas())
      {
        CFDictionarySetValue(v9, *MEMORY[0x1E6960440], *v10);
      }

      if (MovieSampleAccessorIsInStsa())
      {
        CFDictionarySetValue(v9, *MEMORY[0x1E6960428], *v10);
      }

      if (desc)
      {
        if (CMFormatDescriptionGetMediaType(desc) == 1936684398)
        {
          if (FigAudioFormatDescriptionEmploysDependentPackets())
          {
            HIWORD(v23) = 0;
            if (BYTE5(v27[0]) || MovieSampleAccessorGetIndependentFramePrerollPacketCount())
            {
              FigCFDictionarySetInt();
            }
          }
        }
      }

      if (!CFDictionaryGetCount(v9))
      {
        CFRelease(v9);
        v9 = 0;
      }

      *a3 = v9;
      if (v17)
      {
        CFRelease(v17);
      }

      if (v18)
      {
        CFRelease(v18);
      }

      if (v19)
      {
        CFRelease(v19);
      }

      return 0;
    }

    else
    {
      MovieSampleAccessorCreateSampleDependencyAttributeDictionary_cold_1(&desc);
      return desc;
    }
  }

  else
  {
    desc = 0;
    MovieSampleAccessorGetFormatDescription(a2, &desc);
    if (FigAudioFormatDescriptionEmploysDependentPackets() || (v21 = *(a2 + 8), *(v21 + 24) == 1936684398) && (*(v21 + 488) || MovieTrackHasIndependentFramePrerollPacketCount(v21)))
    {
      *v22 = 0;
      WORD2(v26) = 0;
      BYTE6(v23) = 0;
      MovieSampleAccessorGetDependencyInfo(a2, &v23 + 6, 0, 0, 0, 0, 0);
      if (!BYTE6(v23))
      {
        MovieSampleAccessorGetIndependentFramePrerollPacketCount();
      }

      result = FigPacketDependencyInfoCopyAsSampleDependencyAttributeDictionary();
      *a3 = *v22;
    }

    else
    {
      result = 0;
      *a3 = 0;
    }
  }

  return result;
}

uint64_t MovieTrackCopySampleGroupDescriptionArray(uint64_t a1, int a2, const __CFDictionary **a3)
{
  Value = *(a1 + 80);
  if (Value)
  {
    Value = CFDictionaryGetValue(Value, a2);
    if (Value)
    {
      Value = CFRetain(Value);
    }
  }

  *a3 = Value;
  return 0;
}

uint64_t MovieTrackRemoveSampleGroupInfoForGroupingType(uint64_t a1, int a2)
{
  v4 = *(a1 + 72);
  if (v4)
  {
    MovieSampleGroupCollectionRemoveAllGroupsWithGroupingType(v4, a2);
  }

  v5 = *(a1 + 80);
  if (v5)
  {
    CFDictionaryRemoveValue(v5, a2);
  }

  return 0;
}

uint64_t MovieTrackRemoveAllSampleGroups(uint64_t a1)
{
  v2 = *(a1 + 72);
  if (v2)
  {
    CFRelease(v2);
    *(a1 + 72) = 0;
  }

  v3 = *(a1 + 80);
  if (v3)
  {
    CFRelease(v3);
    *(a1 + 80) = 0;
  }

  return 0;
}

uint64_t MovieTrackCopySampleGroupArray(uint64_t a1, CFArrayRef *a2)
{
  v3 = *(a1 + 72);
  if (v3)
  {
    v4 = MovieSampleGroupCollectionCopySampleGroupArray(*MEMORY[0x1E695E480], v3);
  }

  else
  {
    v4 = 0;
  }

  *a2 = v4;
  return 0;
}

uint64_t MovieTrackSetSampleOverrides(uint64_t a1, int a2, int a3)
{
  *(a1 + 244) = a3;
  *(a1 + 248) = a2;
  if (a2)
  {
    v3 = a3 == 0;
  }

  else
  {
    v3 = 1;
  }

  v4 = !v3;
  *(a1 + 240) = v4;
  return 0;
}

uint64_t MovieTrackGetSampleOverrides(uint64_t a1, _DWORD *a2, _DWORD *a3)
{
  if (a2)
  {
    *a2 = *(a1 + 248);
  }

  if (a3)
  {
    *a3 = *(a1 + 244);
  }

  return *(a1 + 240);
}

uint64_t MovieTrackSetCleanApertureDimensions(uint64_t a1, float a2, float a3)
{
  *(a1 + 252) = 1;
  *(a1 + 256) = a2;
  *(a1 + 260) = a3;
  *(a1 + 16) |= 0x200uLL;
  return 0;
}

uint64_t MovieTrackSetProductionApertureDimensions(uint64_t a1, float a2, float a3)
{
  *(a1 + 264) = 1;
  *(a1 + 268) = a2;
  *(a1 + 272) = a3;
  *(a1 + 16) |= 0x4000uLL;
  return 0;
}

uint64_t MovieTrackSetEncodedPixelsDimensions(uint64_t a1, float a2, float a3)
{
  *(a1 + 276) = 1;
  *(a1 + 280) = a2;
  *(a1 + 284) = a3;
  *(a1 + 16) |= 0x8000uLL;
  return 0;
}

uint64_t MovieTrackGetLoadSettings(uint64_t a1, _OWORD *a2)
{
  result = *(a1 + 880);
  if (a2)
  {
    if (result)
    {
      *a2 = *(a1 + 864);
      return *(a1 + 880);
    }
  }

  return result;
}

uint64_t MovieTrackSetLoadSettings(uint64_t a1, uint64_t a2, uint64_t a3)
{
  *(a1 + 880) = 1;
  *(a1 + 864) = a2;
  *(a1 + 872) = a3;
  *(a1 + 16) |= 0x40000uLL;
  return 0;
}

uint64_t MovieTrackSetExtendedLanguageTagString(uint64_t a1, CFTypeRef cf)
{
  v3 = *(a1 + 848);
  *(a1 + 848) = cf;
  if (cf)
  {
    CFRetain(cf);
  }

  if (v3)
  {
    CFRelease(v3);
  }

  *(a1 + 16) |= 0x100uLL;
  return 0;
}

uint64_t MovieTrackSetExcludeFromAutoSelection(uint64_t a1, char a2)
{
  *(a1 + 883) = a2;
  *(a1 + 16) |= 0x800uLL;
  return 0;
}

uint64_t MovieTrackSetEnabled(uint64_t a1, char a2)
{
  *(a1 + 200) = a2;
  *(a1 + 16) |= 0x40uLL;
  return 0;
}

uint64_t MovieTrackUsesAudibleDRM(uint64_t a1)
{
  v1 = MovieTrackCopyFormatDescriptionArray(a1);
  if (!v1)
  {
    return 0;
  }

  v2 = v1;
  Count = CFArrayGetCount(v1);
  if (Count < 1)
  {
LABEL_6:
    v6 = 0;
  }

  else
  {
    v4 = Count;
    v5 = 0;
    while (1)
    {
      CFArrayGetValueAtIndex(v2, v5);
      if (FigAudioFormatDescriptionUsesAudibleDRM())
      {
        break;
      }

      if (v4 == ++v5)
      {
        goto LABEL_6;
      }
    }

    v6 = 1;
  }

  CFRelease(v2);
  return v6;
}

CFArrayRef MovieTrackCopyFormatDescriptionArray(uint64_t a1)
{
  result = *(a1 + 48);
  if (result)
  {
    v3 = CFGetAllocator(result);
    v4 = *(a1 + 48);

    return CFArrayCreateCopy(v3, v4);
  }

  return result;
}

uint64_t MovieTrackAudibleContentIsAuthorized(uint64_t a1, uint64_t a2)
{
  if (!*(a1 + 296))
  {
    return 0;
  }

  v2 = MovieTrackCopyFormatDescriptionArray(a2);
  if (!v2)
  {
    return 0;
  }

  v3 = v2;
  Count = CFArrayGetCount(v2);
  if (Count < 1)
  {
LABEL_7:
    v7 = 0;
  }

  else
  {
    v5 = Count;
    v6 = 0;
    while (1)
    {
      CFArrayGetValueAtIndex(v3, v6);
      if (FigAudioFormatDescriptionAudibleContentIsAuthorized())
      {
        break;
      }

      if (v5 == ++v6)
      {
        goto LABEL_7;
      }
    }

    v7 = 1;
  }

  CFRelease(v3);
  return v7;
}

uint64_t MovieTrackEstablishFirstFragmentBaseDecodeTime(int a1, uint64_t a2, int64_t value)
{
  if ((*(a2 + 756) & 1) == 0)
  {
    v3 = (a2 + 744);
    CMTimeMake(&v5, value, *(a2 + 232));
    *v3 = v5;
  }

  return 0;
}

uint64_t MovieTrackFragmentGetCompositionOffsetRange(uint64_t a1, uint64_t a2, _DWORD *a3, _DWORD *a4)
{
  if (a3)
  {
    result = TrackFragmentBuilderGetMinDecodeToDisplay(*(a2 + 768), a3);
    if (!a4 || result)
    {
      return result;
    }
  }

  else if (!a4)
  {
    return 0;
  }

  v7 = *(a2 + 768);

  return TrackFragmentBuilderGetMaxDecodeToDisplay(v7, a4);
}

const __CFArray *MovieTrackGetNumFormatDescriptions(uint64_t a1)
{
  result = *(a1 + 48);
  if (result)
  {
    return CFArrayGetCount(result);
  }

  return result;
}

uint64_t MovieTrackReplaceFormatDescriptionArray(uint64_t a1, CFArrayRef theArray)
{
  if (theArray)
  {
    Count = CFArrayGetCount(theArray);
    v5 = *(a1 + 48);
    if (v5)
    {
      v5 = CFArrayGetCount(v5);
    }

    if (Count == v5)
    {
      v6 = CFArrayGetCount(theArray);
      if (v6 >= 1)
      {
        v7 = v6;
        for (i = 0; v7 != i; ++i)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(theArray, i);
          MediaType = CMFormatDescriptionGetMediaType(ValueAtIndex);
          v11 = *(a1 + 24);
          if (MediaType != v11)
          {
            if (v11 != 1885954932 && MediaType == 1986618469)
            {
              if (v11 != 1635088502)
              {
                goto LABEL_24;
              }
            }

            else if (MediaType != 1986618469 || v11 != 1885954932)
            {
LABEL_24:
              MovieTrackReplaceFormatDescriptionArray_cold_2(&v19);
              return v19;
            }
          }
        }
      }

      v13 = CFGetAllocator(a1);
      MutableCopy = CFArrayCreateMutableCopy(v13, 0, theArray);
      v15 = MutableCopy;
      v16 = *(a1 + 48);
      *(a1 + 48) = MutableCopy;
      if (MutableCopy)
      {
        CFRetain(MutableCopy);
      }

      if (v16)
      {
        CFRelease(v16);
      }

      *(a1 + 16) |= 4uLL;
      if (v15)
      {
        CFRelease(v15);
      }

      return 0;
    }

    else
    {
      MovieTrackReplaceFormatDescriptionArray_cold_1(&v18);
      return v18;
    }
  }

  else
  {
    MovieTrackReplaceFormatDescriptionArray_cold_3(&v20);
    return v20;
  }
}

uint64_t MovieTrackSetMediaTimeScale(uint64_t a1, int a2)
{
  if (a2)
  {
    v2 = *(a1 + 288);
    v3 = *(a1 + 728);
    if (v3)
    {
      v2 = (*(v3 + 8) + v2);
    }

    if (v2)
    {
      MovieTrackSetMediaTimeScale_cold_1(&v5);
      return v5;
    }

    else
    {
      *(a1 + 232) = a2;
    }
  }

  else
  {
    MovieTrackSetMediaTimeScale_cold_2(&v6);
    return v6;
  }

  return v2;
}

uint64_t FigPersistentTrackIDToTrackIndex(uint64_t a1, int a2)
{
  v2 = *(a1 + 304);
  if (v2 < 1)
  {
    return -1;
  }

  result = 0;
  v5 = *(a1 + 320);
  while (*(*(v5 + 8 * result) + 144) != a2)
  {
    if (v2 == ++result)
    {
      return -1;
    }
  }

  return result;
}

uint64_t MovieInformationFindTrackForTrackID(uint64_t a1, int a2)
{
  v2 = *(a1 + 304);
  if (v2 < 1)
  {
    return 0;
  }

  for (i = *(a1 + 320); ; ++i)
  {
    result = *i;
    if (*(*i + 144) == a2)
    {
      break;
    }

    if (!--v2)
    {
      return 0;
    }
  }

  return result;
}

uint64_t MovieInformationFindNthTrackOfType(uint64_t a1, uint64_t a2, int a3)
{
  v3 = *(a1 + 304);
  if (v3 >= 1)
  {
    v4 = 0;
    v5 = *(a1 + 320);
    do
    {
      result = *v5;
      if (*(*v5 + 24) == a3)
      {
        if (v4 == a2)
        {
          return result;
        }

        ++v4;
      }

      ++v5;
      --v3;
    }

    while (v3);
  }

  return 0;
}

uint64_t MovieTrackGetBasicInfo(uint64_t a1, _DWORD *a2, _DWORD *a3)
{
  if (a1)
  {
    if (a2)
    {
      *a2 = *(a1 + 24);
    }

    result = 0;
    if (a3)
    {
      *a3 = *(a1 + 144);
    }
  }

  else
  {
    v8 = v3;
    v9 = v4;
    MovieTrackGetBasicInfo_cold_1(&v7);
    return v7;
  }

  return result;
}

uint64_t MovieTrackGetTrackTimeInfo(uint64_t a1, void *a2, void *a3)
{
  if (a2)
  {
    *a2 = *(a1 + 120);
  }

  if (a3)
  {
    *a3 = *(a1 + 128);
  }

  return 0;
}

uint64_t MovieTrackGetMediaTimeInfo(uint64_t a1, void *a2, void *a3)
{
  if (a2)
  {
    *a2 = *(a1 + 208);
  }

  if (a3)
  {
    *a3 = *(a1 + 216);
  }

  return 0;
}

uint64_t MovieTrackSetParsedTrackCreateAndModTimes(uint64_t a1, uint64_t a2, uint64_t a3)
{
  *(a1 + 120) = a2;
  *(a1 + 128) = a3;
  return 0;
}

uint64_t MovieTrackSetParsedMediaCreateAndModTimes(uint64_t a1, uint64_t a2, uint64_t a3)
{
  *(a1 + 208) = a2;
  *(a1 + 216) = a3;
  return 0;
}

uint64_t MovieTrackSetVolume(uint64_t a1, float a2)
{
  *(a1 + 196) = a2;
  *(a1 + 16) |= 0x10000uLL;
  return 0;
}

__n128 MovieTrackGetSpatialInformation(uint64_t a1, _DWORD *a2, _DWORD *a3, uint64_t a4)
{
  if (a2)
  {
    result.n128_u32[0] = *(a1 + 188);
    *a2 = result.n128_u32[0];
  }

  if (a3)
  {
    result.n128_u32[0] = *(a1 + 192);
    *a3 = result.n128_u32[0];
  }

  if (a4)
  {
    result = *(a1 + 152);
    v5 = *(a1 + 168);
    *(a4 + 32) = *(a1 + 184);
    *a4 = result;
    *(a4 + 16) = v5;
  }

  return result;
}

uint64_t MovieTrackSetSpatialInformation(uint64_t a1, __int128 *a2, float a3, float a4)
{
  *(a1 + 188) = a3;
  *(a1 + 192) = a4;
  v4 = *(a1 + 16);
  *(a1 + 16) = v4 | 0x400;
  if (a2)
  {
    v5 = *a2;
    v6 = a2[1];
    *(a1 + 184) = *(a2 + 8);
    *(a1 + 168) = v6;
    *(a1 + 152) = v5;
  }

  else
  {
    *(a1 + 184) = 1065353216;
    *(a1 + 152) = kIdentityMatrix_0;
    *(a1 + 168) = unk_196E788D0;
  }

  *(a1 + 16) = v4 | 0x80400;
  return 0;
}

uint64_t MovieTrackSetTrackDimensions(uint64_t a1, float a2, float a3)
{
  *(a1 + 188) = a2;
  *(a1 + 192) = a3;
  *(a1 + 16) |= 0x400uLL;
  return 0;
}

uint64_t MovieTrackSetTrackMatrix(uint64_t a1, __int128 *a2)
{
  if (a2)
  {
    v2 = *a2;
    v3 = a2[1];
    *(a1 + 184) = *(a2 + 8);
    *(a1 + 168) = v3;
    *(a1 + 152) = v2;
  }

  else
  {
    *(a1 + 184) = 1065353216;
    *(a1 + 152) = kIdentityMatrix_0;
    *(a1 + 168) = unk_196E788D0;
  }

  *(a1 + 16) |= 0x80000uLL;
  return 0;
}

float MovieTrackGetCleanApertureDimensions(uint64_t a1, float *a2, float *a3)
{
  if (*(a1 + 252))
  {
    if (a2)
    {
      result = *(a1 + 256);
      *a2 = result;
    }

    if (a3)
    {
      result = *(a1 + 260);
      *a3 = result;
    }
  }

  return result;
}

float MovieTrackGetProductionApertureDimensions(uint64_t a1, float *a2, float *a3)
{
  if (*(a1 + 264))
  {
    if (a2)
    {
      result = *(a1 + 268);
      *a2 = result;
    }

    if (a3)
    {
      result = *(a1 + 272);
      *a3 = result;
    }
  }

  return result;
}

float MovieTrackGetEncodedPixelsDimensions(uint64_t a1, float *a2, float *a3)
{
  if (*(a1 + 276))
  {
    if (a2)
    {
      result = *(a1 + 280);
      *a2 = result;
    }

    if (a3)
    {
      result = *(a1 + 284);
      *a3 = result;
    }
  }

  return result;
}

uint64_t MovieTrackGetLanguageInformation(uint64_t result, _WORD *a2, void *a3, void *a4)
{
  if (a2)
  {
    *a2 = *(result + 236);
  }

  if (a3)
  {
    *a3 = *(result + 856);
  }

  if (a4)
  {
    *a4 = *(result + 848);
  }

  return result;
}

uint64_t MovieTrackSetLanguageCodeString(uint64_t a1, const __CFString *cf)
{
  if (cf)
  {
    v4 = *(a1 + 856);
    *(a1 + 856) = cf;
    CFRetain(cf);
    if (v4)
    {
      CFRelease(v4);
    }

    ISOLanguageCodeForString = FigGetISOLanguageCodeForString(cf);
    result = 0;
    *(a1 + 236) = ISOLanguageCodeForString;
    *(a1 + 16) |= 0x80uLL;
  }

  else
  {
    MovieTrackSetLanguageCodeString_cold_1(&v7);
    return v7;
  }

  return result;
}

uint64_t MovieTrackSetDefaultAlternateGroupID(uint64_t a1, __int16 a2)
{
  *(a1 + 150) = a2;
  *(a1 + 16) |= 0x800000uLL;
  return 0;
}

uint64_t MovieTrackGetProvisionalAlternateGroupID(uint64_t a1, _WORD *a2)
{
  if (a2)
  {
    *a2 = *(a1 + 738);
  }

  return *(a1 + 740);
}