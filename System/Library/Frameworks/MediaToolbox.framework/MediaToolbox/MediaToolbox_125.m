uint64_t __HandlePlayerServerMessage_block_invoke_cold_22(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_23(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_24(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_25(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_26(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_27(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_28(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_29(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_30(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_31(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_32(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_33(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_34(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_35(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_36(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_37(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_38(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_39(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_40(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_41(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_42(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_43(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_44(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_45(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_46(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_47(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_48(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_49(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_50(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_51(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_52(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_53(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_54(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_55(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_56(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_57(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_58(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_59(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_60(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_61(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_62(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_63(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a2 = FigSignalErrorAtGM();

  return FigSimpleMutexUnlock();
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_64(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_65(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_66(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_67(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_68(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_69(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_70(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_71(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_72(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_73(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_74(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_75(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_76(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_77(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_78(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_79(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_80(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_81(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_82(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_83(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_84(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_85(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_86(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_87(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_88(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_89(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_90(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_91(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_92(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_93(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_94(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_95(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_96(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_97(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_98(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_99(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_100(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_101(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_102(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_103(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_104(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_105(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_106(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_107(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_108(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_109(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_110(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_111(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_112(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_113(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_114(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_115(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_116(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_117(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_118(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_119(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void __HandlePlayerServerMessage_block_invoke_cold_121(uint64_t a1, const void *a2, _DWORD *a3)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  *a3 = FigSignalErrorAtGM();
  CFRelease(a2);
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_122(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_123(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_124(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_125(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_126(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_127(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_128(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_129(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_130(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_131(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_132(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_133(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t __HandlePlayerServerMessage_block_invoke_cold_134(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL serverXPCItem_rebuildTimebaseSync_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM() == 0;
}

CFTypeRef serverXPCItem_rebuildTimebaseSync_cold_2(uint64_t a1, void *a2)
{
  result = *(a1 + 88);
  if (result)
  {
    result = CFRetain(result);
  }

  a2[2] = a1;
  v5 = *(a1 + 16);
  *a2 = result;
  a2[1] = v5;
  return result;
}

uint64_t serverXPCItem_NotificationFilter_cold_1()
{
  OUTLINED_FUNCTION_400();
  OUTLINED_FUNCTION_1_20();
  v4 = 0;
  v1 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v1 && !serverXPCItem_getSyntheticSyncMomentL(v0, v3) && !FigXPCCreateBasicMessage())
  {
    xpc_dictionary_set_data(v4, "TimeBaseSyncMoment", v3, 0x78uLL);
    xpc_connection_send_message(v1, v4);
  }

  FigXPCRelease();
  return FigXPCRelease();
}

uint64_t serverXPCItem_NotificationFilter_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t serverXPCItem_getSyntheticSyncMomentL_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fps_addSampleBuffersToMessage_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fps_addSampleBuffersToMessage_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

__CFData *FPSupport_CopyAudioSessionPreferredOutputChannelLayout(const __CFAllocator *a1, uint64_t a2)
{
  theDict = 0;
  if (checkPlayerAudioDeviceTrace_checkPlayerAudioDeviceTraceOnce == -1)
  {
    if (a2)
    {
      goto LABEL_3;
    }

LABEL_18:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    FigSignalErrorAtGM();
    goto LABEL_19;
  }

  dispatch_once_f(&checkPlayerAudioDeviceTrace_checkPlayerAudioDeviceTraceOnce, 0, checkPlayerAudioDeviceTraceCallback);
  if (!a2)
  {
    goto LABEL_18;
  }

LABEL_3:
  v4 = *(CMBaseObjectGetVTable() + 16);
  if (!v4)
  {
    goto LABEL_18;
  }

  v5 = *(v4 + 48);
  if (!v5 || v5(a2, *MEMORY[0x1E69AFEF0], *MEMORY[0x1E695E480], &theDict))
  {
    goto LABEL_18;
  }

  if (!theDict)
  {
    return 0;
  }

  Value = CFDictionaryGetValue(theDict, *MEMORY[0x1E69B0640]);
  if (!Value)
  {
    goto LABEL_18;
  }

  v7 = Value;
  if (CFArrayGetCount(Value) <= 0)
  {
    goto LABEL_18;
  }

  ValueAtIndex = CFArrayGetValueAtIndex(v7, 0);
  v9 = CFDictionaryGetValue(ValueAtIndex, *MEMORY[0x1E69B05D8]);
  if (!v9)
  {
    goto LABEL_18;
  }

  Count = CFArrayGetCount(v9);
  if (Count <= 0)
  {
    goto LABEL_18;
  }

  v11 = Count;
  v12 = 20 * Count + 12;
  Mutable = CFDataCreateMutable(a1, v12);
  v14 = Mutable;
  if (Mutable)
  {
    CFDataSetLength(Mutable, v12);
    MutableBytePtr = CFDataGetMutableBytePtr(v14);
    *MutableBytePtr = 0;
    FigCFArrayApplyFunction();
    if (v11 != *(MutableBytePtr + 2))
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      if (FigSignalErrorAtGM())
      {
        CFRelease(v14);
LABEL_19:
        v14 = 0;
      }
    }
  }

  else
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    FigSignalErrorAtGM();
  }

  if (theDict)
  {
    CFRelease(theDict);
  }

  return v14;
}

uint64_t FPSupport_IsAnAudioDeviceAvailable(uint64_t result)
{
  if (result)
  {
    v1 = result;
    v2 = *MEMORY[0x1E695E4C0];
    v6 = *MEMORY[0x1E695E4C0];
    v3 = *(CMBaseObjectGetVTable() + 16);
    if (v3)
    {
      v4 = *(v3 + 8);
      if (v4)
      {
        v4(v1, @"FAS_AudioDeviceIsAvailable", *MEMORY[0x1E695E480], &v6);
        v2 = v6;
      }
    }

    if (v2)
    {
      CFRelease(v2);
    }

    if (qword_1ED4CAF80 != -1)
    {
      dispatch_once(&qword_1ED4CAF80, &__block_literal_global_48);
    }

    if ((byte_1ED4CAF79 & 1) != 0 || byte_1ED4CAF7A)
    {
      v5 = 1;
      _MergedGlobals_84 = 1;
    }

    else
    {
      v5 = _MergedGlobals_84 | (v2 == *MEMORY[0x1E695E4D0]);
    }

    return v5 & 1;
  }

  return result;
}

void FPSupport_GetAudioSessionOutputChannelCount_cold_2(const __CFNumber *a1, int *valuePtr, const __CFAllocator *a3, uint64_t a4)
{
  CFNumberGetValue(a1, kCFNumberSInt32Type, valuePtr);
  if (*valuePtr >= 3)
  {
    v7 = FPSupport_CopyAudioSessionPreferredOutputChannelLayout(a3, a4);
    if (v7)
    {
      v8 = v7;
      Length = CFDataGetLength(v7);
      if (Length < 0xC)
      {
        CFRelease(v8);
      }

      else
      {
        v10 = Length;
        BytePtr = CFDataGetBytePtr(v8);
        HasVerticalHeightChannel = FPSupport_AudioChannelLayoutHasVerticalHeightChannel(BytePtr, v10);
        CFRelease(v8);
        if (HasVerticalHeightChannel)
        {
          *valuePtr = 16;
        }
      }
    }
  }
}

uint64_t FPSupport_CreateMaxSampleRateDictonary_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FPSupport_CreateMaxSampleRateDictonary_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FPSupport_CreateFigSpatializationCapabilitiesFromSpatialAudioPreferences_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FPSupport_CreateFigSpatializationCapabilitiesFromSpatialAudioPreferences_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FPSupport_CreateAudioSessionSpatializationCapabilities_cold_1(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t FPSupport_AudioChannelLayoutHasVerticalHeightChannel_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FPSupport_AudioChannelLayoutHasVerticalHeightChannel_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FPSupport_AudioChannelLayoutHasVerticalHeightChannel_cold_3()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t FigStreamingAssetDownloadCacheTranslatorCreate(uint64_t a1, const void *a2, char a3, CFTypeRef *a4)
{
  v18 = 0;
  cf = 0;
  v7 = malloc_type_calloc(1uLL, 0x10uLL, 0x20040A4A59CD2uLL);
  if (!a2 || !a4 || !FigCFURLIsLocalResource())
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
LABEL_21:
    v8 = FigSignalErrorAtGM();
LABEL_22:
    v16 = v8;
    goto LABEL_13;
  }

  MEMORY[0x19A8D3660](&FigStreamingAssetDownloadCacheTranslatorGetClassID_sRegisterFigStreamingAssetDownloadCacheTranslatorBaseTypeOnce, RegisterFigStreamingAssetDownloadCacheTranslatorBaseType);
  v8 = CMDerivedObjectCreate();
  if (v8)
  {
    goto LABEL_22;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  *(DerivedStorage + 16) = a3;
  *(DerivedStorage + 8) = CFRetain(a2);
  v10 = CFGetAllocator(cf);
  v8 = FigHLSPersistentStoreCreateAtURL(v10, a2, 0, 1, &v18);
  if (v8)
  {
    goto LABEL_22;
  }

  v11 = FigSimpleMutexCreate();
  *(DerivedStorage + 24) = v11;
  if (!v11 || (v12 = dispatch_queue_create("com.apple.coremedia.downloadtranslator.ioqueue", 0)) == 0)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_5();
    goto LABEL_21;
  }

  v13 = v12;
  FigSimpleMutexLock();
  v14 = cf;
  if (cf)
  {
    v14 = CFRetain(cf);
  }

  *v7 = v14;
  v15 = v18;
  if (v18)
  {
    v15 = CFRetain(v18);
  }

  v7[1] = v15;
  dispatch_async_f(v13, v7, fsadct_PrepareOfflinePlayableAlternatesAndWritePlaylistsDispatchFunction);
  *a4 = cf;
  cf = 0;
  dispatch_release(v13);
  v16 = 0;
  v7 = 0;
LABEL_13:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v18)
  {
    CFRelease(v18);
  }

  free(v7);
  return v16;
}

void fsadct_PrepareOfflinePlayableAlternatesAndWritePlaylistsDispatchFunction(const __CFString **a1)
{
  v2 = a1;
  v3 = *a1;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = v2[1];
  v6 = CMBaseObjectGetDerivedStorage();
  v7 = *(*(CMBaseObjectGetVTable() + 16) + 16);
  if (!v7)
  {
    v24 = 0;
    v22 = 0;
LABEL_32:
    v21 = -12782;
    goto LABEL_33;
  }

  v8 = v7(v5, 1, 0);
  if (v8)
  {
    v21 = v8;
    v24 = 0;
    v22 = 0;
    goto LABEL_33;
  }

  v9 = CFGetAllocator(v3);
  URLString[0] = 0;
  values = 0;
  keys[0] = 0;
  LODWORD(v252) = 0;
  v10 = CMBaseObjectGetDerivedStorage();
  FigBaseObject = FigHLSPersistentStoreGetFigBaseObject(v5);
  v12 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v12)
  {
    v22 = 0;
    v21 = -12782;
    goto LABEL_16;
  }

  v13 = v12(FigBaseObject, @"MasterPlaylistNetworkURL", v9, keys);
  if (!v13)
  {
    if (CFURLCreateWithString(v9, keys[0], 0))
    {
      OUTLINED_FUNCTION_12_39();
      v14 = *(*(CMBaseObjectGetVTable() + 16) + 48);
      if (v14)
      {
        v15 = v14(v5, @"NetworkPlaylist", 0, 0, 0, &values);
        if (v15)
        {
          v21 = v15;
        }

        else
        {
          v21 = OUTLINED_FUNCTION_11_45(values, v16, v17, &v252, v18, v19, v20, *(v10 + 16), 0, 0, 0, 0, URLString, 0);
          v22 = URLString[0];
          if (!v21)
          {
            if (!URLString[0])
            {
              v21 = 0;
              goto LABEL_15;
            }

            Alternates = FigMultivariantPlaylistGetAlternates(URLString[0]);
            v22 = URLString[0];
            if (Alternates)
            {
              v21 = 0;
              URLString[0] = 0;
LABEL_15:
              CFRelease(v9);
              goto LABEL_16;
            }
          }

          if (!v22)
          {
            goto LABEL_15;
          }

          CFRelease(v22);
        }

        v22 = 0;
        goto LABEL_15;
      }

      v22 = 0;
      v21 = -12782;
      goto LABEL_15;
    }

    fig_log_get_emitter();
    v13 = FigSignalErrorAtGM();
  }

  v21 = v13;
  v22 = 0;
LABEL_16:
  if (values)
  {
    CFRelease(values);
  }

  if (keys[0])
  {
    CFRelease(keys[0]);
  }

  if (v21)
  {
    goto LABEL_227;
  }

  v25 = *(*(CMBaseObjectGetVTable() + 16) + 16);
  if (!v25)
  {
    v24 = 0;
    goto LABEL_32;
  }

  v26 = v25(v5, 0xFFFFFFFFLL, 0);
  if (v26)
  {
    v21 = v26;
LABEL_227:
    v24 = 0;
    goto LABEL_33;
  }

  v230 = v1;
  v234 = v6;
  v252 = 0;
  if (!v22 || !FigMultivariantPlaylistGetAlternates(v22))
  {
    v24 = 0;
    goto LABEL_65;
  }

  URLString[0] = 0;
  values = 0;
  keys[0] = 0;
  v27 = CMBaseObjectGetDerivedStorage();
  CFGetAllocator(v3);
  v28 = OUTLINED_FUNCTION_12_39();
  v29 = FigHLSPersistentStoreGetFigBaseObject(v28);
  v30 = *(*(CMBaseObjectGetVTable() + 8) + 48);
  if (!v30)
  {
    v42 = 0;
    v39 = 0;
    v9 = 0;
    v21 = -12782;
    goto LABEL_47;
  }

  v31 = v30(v29, @"MasterPlaylistNetworkURL", v9, URLString);
  if (!v31)
  {
    v32 = CFGetAllocator(v3);
    v9 = CFURLCreateWithString(v32, URLString[0], 0);
    v33 = *MEMORY[0x1E695E480];
    v34 = OUTLINED_FUNCTION_312();
    Mutable = CFDictionaryCreateMutable(v34, v35, v36, v37);
    v39 = Mutable;
    if (Mutable)
    {
      CFDictionarySetValue(Mutable, @"FSC_DownloadDestinationURL", *(v27 + 8));
      v40 = CFGetAllocator(v3);
      v41 = FigStreamingCacheCreate(v40, v9, v39, keys);
      if (!v41)
      {
        v21 = FigAlternateOfflinePlayableForMediaSelectionFilterCreate(v33, keys[0], 0, 0, &values);
        if (!v21)
        {
          v42 = values;
          values = 0;
          goto LABEL_47;
        }

        goto LABEL_211;
      }
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_69();
      v41 = FigSignalErrorAtGM();
    }

    v21 = v41;
LABEL_211:
    v42 = 0;
    goto LABEL_47;
  }

  v21 = v31;
  v42 = 0;
  v39 = 0;
  v9 = 0;
LABEL_47:
  if (keys[0])
  {
    CFRelease(keys[0]);
  }

  if (v39)
  {
    CFRelease(v39);
  }

  if (values)
  {
    CFRelease(values);
  }

  v6 = v234;
  if (v9)
  {
    CFRelease(v9);
  }

  if (URLString[0])
  {
    CFRelease(URLString[0]);
  }

  if (v21)
  {
    goto LABEL_232;
  }

  v9 = FigMultivariantPlaylistGetAlternates(v22);
  v44 = *(*(CMBaseObjectGetVTable() + 16) + 24);
  if (!v44)
  {
    v24 = 0;
    v21 = -12782;
    goto LABEL_62;
  }

  v21 = v44(v42, v9, &v252);
  v24 = v252;
  if (!v21)
  {
    v252 = 0;
    goto LABEL_62;
  }

  if (v252)
  {
    CFRelease(v252);
LABEL_232:
    v24 = 0;
  }

LABEL_62:
  if (v42)
  {
    CFRelease(v42);
  }

  if (!v21)
  {
LABEL_65:
    v45 = *(*(CMBaseObjectGetVTable() + 16) + 16);
    if (!v45 || v45(v5, 1, 1))
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_69();
      v21 = FigSignalErrorAtGM();
      goto LABEL_33;
    }

    v224 = DerivedStorage;
    v46 = CFGetAllocator(v3);
    cf = CFSetCreateMutable(v46, 0, MEMORY[0x1E695E9F8]);
    v47 = CFGetAllocator(v3);
    URLString[0] = 0;
    keys[0] = 0;
    v48 = CFDictionaryCreateMutable(v47, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    if (v48)
    {
      v49 = v48;
      v50 = *(*(CMBaseObjectGetVTable() + 16) + 24);
      if (v50)
      {
        v51 = v50(v5, URLString);
        if (!v51)
        {
          for (i = 0; ; ++i)
          {
            Count = URLString[0];
            if (URLString[0])
            {
              Count = CFArrayGetCount(URLString[0]);
            }

            if (i >= Count)
            {
              break;
            }

            CFArrayGetValueAtIndex(URLString[0], i);
            OUTLINED_FUNCTION_12_39();
            v54 = *(*(CMBaseObjectGetVTable() + 16) + 72);
            if (!v54)
            {
              goto LABEL_80;
            }

            v51 = v54(v5, v9, keys);
            if (v51)
            {
              goto LABEL_225;
            }

            FigCFDictionarySetValue();
            if (keys[0])
            {
              CFRelease(keys[0]);
              keys[0] = 0;
            }
          }

          v21 = 0;
          v55 = v49;
          goto LABEL_83;
        }

LABEL_225:
        v21 = v51;
      }

      else
      {
LABEL_80:
        v21 = -12782;
      }

      CFRelease(v49);
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_69();
      v21 = FigSignalErrorAtGM();
    }

    v55 = 0;
LABEL_83:
    v56 = cf;
    if (URLString[0])
    {
      CFRelease(URLString[0]);
    }

    if (v21)
    {
LABEL_194:
      if (!v55)
      {
        goto LABEL_196;
      }

      goto LABEL_195;
    }

    if (v22)
    {
      v57 = CFGetAllocator(v3);
      v58 = CFStringCreateMutable(v57, 0);
      if (!v58)
      {
        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_69();
        v21 = FigSignalErrorAtGM();
        if (!v55)
        {
LABEL_196:
          v6 = v234;
          if (v56)
          {
            CFRelease(v56);
          }

          goto LABEL_33;
        }

LABEL_195:
        CFRelease(v55);
        goto LABEL_196;
      }

      v59 = v58;
      *&v191 = "#EXTM3U";
      CFStringAppendFormat(v58, 0, @"%s\n");
      if (FigMultivariantPlaylistGetVersion(v22))
      {
        *&v191 = "#EXT-X-VERSION";
        *(&v191 + 1) = FigMultivariantPlaylistGetVersion(v22);
        v60 = OUTLINED_FUNCTION_9_2();
        CFStringAppendFormat(v60, v61, v62);
      }

      if (FigMultivariantPlaylistHasIndependentSegments(v22))
      {
        *&v191 = "#EXT-X-INDEPENDENT-SEGMENTS";
        v63 = OUTLINED_FUNCTION_9_2();
        CFStringAppendFormat(v63, v64, v65);
      }

      v247 = 0u;
      URLString[0] = v3;
      URLString[1] = v5;
      *&v246 = v55;
      *(&v246 + 1) = v59;
      v248 = v22;
      v249 = cf;
      v250 = 0;
      AudioGroups = FigMultivariantPlaylistGetAudioGroups(v22);
      v74 = OUTLINED_FUNCTION_8_43(AudioGroups, v67, v68, v69, v70, v71, v72, v73, v191, *(&v191 + 1), v199, v203, v207, v211, v215, v219, v224, cf, v1, v234, v235, v240, URLString[0]);
      v77 = fsadct_WritePlaylistsForMediaTypeToMovpkgAndAddToMutlivariantPlaylist(v74, v75, v76, 1936684398);
      if (v77 || (SubtitleGroups = FigMultivariantPlaylistGetSubtitleGroups(v22), v86 = OUTLINED_FUNCTION_8_43(SubtitleGroups, v79, v80, v81, v82, v83, v84, v85, v192, v195, v200, v204, v208, v212, v216, v220, v225, cfa, v231, v234, v236, v241, URLString[0]), (v77 = fsadct_WritePlaylistsForMediaTypeToMovpkgAndAddToMutlivariantPlaylist(v86, v87, v88, 1935832172)) != 0) || (ClosedCaptionGroups = FigMultivariantPlaylistGetClosedCaptionGroups(v22), v97 = OUTLINED_FUNCTION_8_43(ClosedCaptionGroups, v90, v91, v92, v93, v94, v95, v96, v193, v196, v201, v205, v209, v213, v217, v221, v226, cfa, v232, v234, v237, v242, URLString[0]), (v77 = fsadct_WritePlaylistsForMediaTypeToMovpkgAndAddToMutlivariantPlaylist(v97, v98, v99, 1668047728)) != 0))
      {
        v21 = v77;
        v56 = cfa;
        goto LABEL_193;
      }

      VideoGroups = FigMultivariantPlaylistGetVideoGroups(v22);
      v108 = OUTLINED_FUNCTION_8_43(VideoGroups, v101, v102, v103, v104, v105, v106, v107, v194, v197, v202, v206, v210, v214, v218, v222, v227, cfa, v233, v234, v238, v243, URLString[0]);
      v111 = fsadct_WritePlaylistsForMediaTypeToMovpkgAndAddToMutlivariantPlaylist(v108, v109, v110, 1986618469);
      if (v111)
      {
        v21 = v111;
LABEL_193:
        CFRelease(v59);
        goto LABEL_194;
      }
    }

    else
    {
      v59 = 0;
    }

    values = 0;
    keys[0] = 0;
    *&v247 = 0;
    *URLString = 0u;
    v246 = 0u;
    if (!v55)
    {
      goto LABEL_212;
    }

    if (v24)
    {
      if (CFArrayGetCount(v24) >= 1)
      {
        v244 = v55;
        v223 = v2;
        v112 = 0;
        v239 = @"Unknown";
        while (1)
        {
          ValueAtIndex = CFArrayGetValueAtIndex(v24, v112);
          URLForCacheLookup = FigAlternateGetURLForCacheLookup(ValueAtIndex);
          v115 = fsadct_CopyPersistentStreamIDFromNetworkURL(v244, URLForCacheLookup, &values);
          if (v115)
          {
            break;
          }

          v116 = CFGetAllocator(v3);
          v115 = OUTLINED_FUNCTION_13_33(v116, v117, v118, v119, v120, v121, v122, v123, v191, *(&v191 + 1), v199, v203, v207, v211, v215, v223, v224, cf, v230, v234, v239, v244, URLString[0]);
          if (v115)
          {
            break;
          }

          v115 = fsadct_EnsureArrayOfWriteLockedPersistentStreamInfosAndAddEntry(v3, URLString[0]);
          if (v115)
          {
            break;
          }

          v115 = fsadct_WriteMediaPlaylistAndAddToMovpkg(v3, URLString, v22);
          if (v115)
          {
            break;
          }

          if (v22 && FigMultivariantPlaylistGetAlternates(v22))
          {
            if (v59 && v56 && ValueAtIndex)
            {
              if (!FigAlternateGetAudioGroupIDString(ValueAtIndex) || FigAlternateIsAudioGroupSynthesized(ValueAtIndex) || (v124 = FigAlternateGetAudioGroupIDString(ValueAtIndex), OUTLINED_FUNCTION_10_42(v124)))
              {
                if (!FigAlternateGetSubtitleGroupIDString(ValueAtIndex) || FigAlternateIsSubtitleGroupSynthesized(ValueAtIndex) || (v125 = FigAlternateGetSubtitleGroupIDString(ValueAtIndex), OUTLINED_FUNCTION_10_42(v125)))
                {
                  if (!FigAlternateGetVideoGroupIDString(ValueAtIndex) || FigAlternateIsVideoGroupSynthesized(ValueAtIndex) || (v126 = FigAlternateGetVideoGroupIDString(ValueAtIndex), OUTLINED_FUNCTION_10_42(v126)))
                  {
                    v127 = OUTLINED_FUNCTION_9_2();
                    CFStringAppendFormat(v127, v128, @"%s:", "#EXT-X-STREAM-INF");
                    FigAlternateGetPeakBitRate(ValueAtIndex);
                    v129 = OUTLINED_FUNCTION_2_115();
                    CFStringAppendFormat(v129, v130, @"%s=%d");
                    if (FigAlternateGetAverageBitRate(ValueAtIndex) >= 1)
                    {
                      FigAlternateGetAverageBitRate(ValueAtIndex);
                      v131 = OUTLINED_FUNCTION_2_115();
                      CFStringAppendFormat(v131, v132, @",%s=%d");
                    }

                    FigAlternateGetVideoRangeString(ValueAtIndex);
                    if (!FigCFEqual())
                    {
                      FigAlternateGetVideoRangeString(ValueAtIndex);
                      v133 = OUTLINED_FUNCTION_2_115();
                      CFStringAppendFormat(v133, v134, @",%s=%@");
                    }

                    FigAlternateGetCodecString(ValueAtIndex);
                    v135 = OUTLINED_FUNCTION_2_115();
                    CFStringAppendFormat(v135, v136, @",%s=%@");
                    FigAlternateGetResolution(ValueAtIndex);
                    if (v137 != 0.0 && FigAlternateGetResolution(ValueAtIndex) != 0.0)
                    {
                      Resolution = FigAlternateGetResolution(ValueAtIndex);
                      FigAlternateGetResolution(ValueAtIndex);
                      v199 = v139;
                      v140 = OUTLINED_FUNCTION_9_2();
                      CFStringAppendFormat(v140, v141, @",%s=%llux%llu", "RESOLUTION", Resolution);
                    }

                    if (FigAlternateGetFrameRate(ValueAtIndex) > 0.0)
                    {
                      FrameRate = FigAlternateGetFrameRate(ValueAtIndex);
                      v142 = OUTLINED_FUNCTION_9_2();
                      CFStringAppendFormat(v142, v143, @",%s=%f", "FRAME-RATE", *&FrameRate);
                    }

                    if (FigAlternateGetClosedCaptionGroupIDString(ValueAtIndex))
                    {
                      ClosedCaptionGroupIDString = FigAlternateGetClosedCaptionGroupIDString(ValueAtIndex);
                      if (OUTLINED_FUNCTION_10_42(ClosedCaptionGroupIDString))
                      {
                        FigAlternateGetClosedCaptionGroupIDString(ValueAtIndex);
                        v145 = OUTLINED_FUNCTION_2_115();
                        CFStringAppendFormat(v145, v146, @",%s=%@");
                      }
                    }

                    if (FigAlternateGetAudioGroupIDString(ValueAtIndex))
                    {
                      AudioGroupIDString = FigAlternateGetAudioGroupIDString(ValueAtIndex);
                      if (OUTLINED_FUNCTION_10_42(AudioGroupIDString))
                      {
                        FigAlternateGetAudioGroupIDString(ValueAtIndex);
                        v148 = OUTLINED_FUNCTION_2_115();
                        CFStringAppendFormat(v148, v149, @",%s=%@");
                      }
                    }

                    if (FigAlternateGetSubtitleGroupIDString(ValueAtIndex))
                    {
                      SubtitleGroupIDString = FigAlternateGetSubtitleGroupIDString(ValueAtIndex);
                      if (OUTLINED_FUNCTION_10_42(SubtitleGroupIDString))
                      {
                        FigAlternateGetSubtitleGroupIDString(ValueAtIndex);
                        v151 = OUTLINED_FUNCTION_2_115();
                        CFStringAppendFormat(v151, v152, @",%s=%@");
                      }
                    }

                    if (FigAlternateGetVideoGroupIDString(ValueAtIndex))
                    {
                      VideoGroupIDString = FigAlternateGetVideoGroupIDString(ValueAtIndex);
                      if (OUTLINED_FUNCTION_10_42(VideoGroupIDString))
                      {
                        FigAlternateGetVideoGroupIDString(ValueAtIndex);
                        v154 = OUTLINED_FUNCTION_2_115();
                        CFStringAppendFormat(v154, v155, @",%s=%@");
                      }
                    }

                    HDCPLevel = FigAlternateGetHDCPLevel(ValueAtIndex);
                    if (HDCPLevel != -2)
                    {
                      FigAlternateGetPlaylistStringFromHDCPLevel(HDCPLevel);
                      v157 = OUTLINED_FUNCTION_2_115();
                      CFStringAppendFormat(v157, v158, @",%s=%@");
                    }

                    if (FigAlternateGetStableStreamIdentifier(ValueAtIndex))
                    {
                      FigAlternateGetStableStreamIdentifier(ValueAtIndex);
                      v159 = OUTLINED_FUNCTION_2_115();
                      CFStringAppendFormat(v159, v160, @",%s=%@");
                    }

                    v191 = __PAIR128__(v246, URLString[1]);
                    v161 = OUTLINED_FUNCTION_9_2();
                    CFStringAppendFormat(v161, v162, @"\n../%@/%@\n");
                  }
                }
              }
            }

            else
            {
              fig_log_get_emitter();
              OUTLINED_FUNCTION_0_69();
              v115 = FigSignalErrorAtGM();
              if (v115)
              {
                break;
              }
            }
          }

          fsadct_DestroyMediaPlaylistWriterHelper(URLString);
          if (values)
          {
            CFRelease(values);
            values = 0;
          }

          if (++v112 >= CFArrayGetCount(v24))
          {
            v21 = 0;
            goto LABEL_154;
          }
        }

        v21 = v115;
LABEL_154:
        v2 = v223;
        v55 = v244;
LABEL_162:
        fsadct_DestroyMediaPlaylistWriterHelper(URLString);
        if (values)
        {
          CFRelease(values);
        }

        if (!v22 || v21)
        {
LABEL_192:
          if (!v59)
          {
            goto LABEL_194;
          }

          goto LABEL_193;
        }

        blockBufferOut = 0;
        v252 = 0;
        if (!v59)
        {
          fig_log_get_emitter();
          OUTLINED_FUNCTION_0_69();
          v21 = FigSignalErrorAtGM();
          goto LABEL_182;
        }

        v172 = v55;
        v173 = CFGetAllocator(v3);
        appended = CMBlockBufferCreateEmpty(v173, 0, 0, &blockBufferOut);
        if (!appended)
        {
          CFGetAllocator(v3);
          BytesFromCFString = FigCreateBytesFromCFString();
          if (BytesFromCFString)
          {
            v176 = BytesFromCFString;
            v177 = blockBufferOut;
            v178 = v252;
            v179 = CFGetAllocator(v3);
            appended = CMBlockBufferAppendMemoryBlock(v177, v176, v178, v179, 0, 0, v252, 0);
            if (!appended)
            {
              v180 = blockBufferOut;
              v181 = *(*(CMBaseObjectGetVTable() + 16) + 40);
              if (!v181)
              {
                v21 = -12782;
LABEL_181:
                v55 = v172;
LABEL_182:
                v56 = cf;
LABEL_190:
                if (blockBufferOut)
                {
                  CFRelease(blockBufferOut);
                }

                goto LABEL_192;
              }

              appended = v181(v5, @"OfflineAvailableMedia", @"LocallyHostedPlaylist.m3u8", 0, v180);
              if (!appended)
              {
                URLString[0] = 0;
                values = 0;
                keys[0] = 0;
                v182 = CMBaseObjectGetDerivedStorage();
                if (*v182)
                {
LABEL_179:
                  v21 = 0;
LABEL_184:
                  v55 = v172;
                  v56 = cf;
                  if (URLString[0])
                  {
                    CFRelease(URLString[0]);
                  }

                  if (keys[0])
                  {
                    CFRelease(keys[0]);
                  }

                  if (values)
                  {
                    CFRelease(values);
                  }

                  goto LABEL_190;
                }

                if (!v5)
                {
                  goto LABEL_219;
                }

                v183 = v182;
                v184 = *(*(CMBaseObjectGetVTable() + 16) + 48);
                if (v184)
                {
                  v185 = v184(v5, @"OfflineAvailableMedia", keys, URLString, 0, 0);
                  if (v185)
                  {
                    goto LABEL_220;
                  }

                  CFGetAllocator(v3);
                  v186 = OUTLINED_FUNCTION_12_39();
                  v187 = FigHLSPersistentStoreGetFigBaseObject(v186);
                  v188 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                  if (v188)
                  {
                    v185 = v188(v187, @"DataDirectory", @"OfflineAvailableMedia", &values);
                    if (!v185)
                    {
                      v189 = CFGetAllocator(v3);
                      v190 = CFURLCreateCopyAppendingPathComponent(v189, values, URLString[0], 0);
                      *v183 = v190;
                      if (v190)
                      {
                        goto LABEL_179;
                      }

LABEL_219:
                      fig_log_get_emitter();
                      OUTLINED_FUNCTION_0_69();
                      v185 = FigSignalErrorAtGM();
                    }

LABEL_220:
                    v21 = v185;
                    goto LABEL_184;
                  }
                }

                v21 = -12782;
                goto LABEL_184;
              }
            }
          }

          else
          {
            fig_log_get_emitter();
            OUTLINED_FUNCTION_0_69();
            appended = FigSignalErrorAtGM();
          }
        }

        v21 = appended;
        goto LABEL_181;
      }

LABEL_153:
      v21 = 0;
      goto LABEL_162;
    }

    if (v22)
    {
      goto LABEL_153;
    }

    if (FigCFDictionaryGetCount() == 1 && (CFDictionaryGetKeysAndValues(v55, keys, &values), keys[0]) && values)
    {
      v163 = CFGetAllocator(v3);
      v171 = OUTLINED_FUNCTION_13_33(v163, v164, v165, v166, v167, v168, v169, v170, v191, *(&v191 + 1), v199, v203, v207, v211, v215, v219, v224, cf, v230, v234, v235, v240, URLString[0]);
      if (!v171)
      {
        v171 = fsadct_EnsureArrayOfWriteLockedPersistentStreamInfosAndAddEntry(v3, URLString[0]);
        if (!v171)
        {
          v21 = fsadct_WriteMediaPlaylistAndAddToMovpkg(v3, URLString, 0);
          if (!v21)
          {
            values = 0;
          }

          goto LABEL_162;
        }
      }
    }

    else
    {
LABEL_212:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_69();
      v171 = FigSignalErrorAtGM();
    }

    v21 = v171;
    goto LABEL_162;
  }

LABEL_33:
  v43 = *(*(CMBaseObjectGetVTable() + 16) + 16);
  if (v43)
  {
    v43(v5, 0xFFFFFFFFLL, 1);
  }

  if (v21)
  {
    *(v6 + 20) = v21;
  }

  if (v22)
  {
    CFRelease(v22);
  }

  if (v24)
  {
    CFRelease(v24);
  }

  FigSimpleMutexUnlock();
  if (v3)
  {
    CFRelease(v3);
  }

  if (v5)
  {
    CFRelease(v5);
  }

  free(v2);
}

uint64_t fsadct_WritePlaylistsForMediaTypeToMovpkgAndAddToMutlivariantPlaylist(_DWORD *context, int a2, CFDictionaryRef theDict, int a4)
{
  if (!theDict)
  {
    return 0;
  }

  context[8] = a4;
  CFDictionaryApplyFunction(theDict, fsadct_WritePlaylistsForMediaGroupApplierFunction, context);
  result = context[16];
  if (!result)
  {
    v6 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v6, v7, v8);
    return 0;
  }

  return result;
}

void fsadct_WritePlaylistsForPersistentIDApplierFunction(int a1, CFDictionaryRef theDict, uint64_t a3)
{
  v5 = *a3;
  v6 = *(a3 + 8);
  v8 = *(a3 + 16);
  v7 = *(a3 + 24);
  v9 = *(a3 + 32);
  v10 = *(a3 + 48);
  v81 = *(a3 + 40);
  Value = CFDictionaryGetValue(theDict, *MEMORY[0x1E6962BB0]);
  v85 = 0;
  v83 = 0u;
  v84 = 0u;
  cf = 0;
  v12 = *(a3 + 56);
  if (!v12)
  {
    fig_log_get_emitter();
LABEL_61:
    MediaPlaylistWriterHelper = FigSignalErrorAtGM();
    goto LABEL_62;
  }

  if (Value)
  {
    MediaPlaylistWriterHelper = fsadct_CopyPersistentStreamIDFromNetworkURL(v8, Value, &cf);
    if (MediaPlaylistWriterHelper)
    {
LABEL_62:
      v20 = MediaPlaylistWriterHelper;
      goto LABEL_56;
    }

    if (!cf)
    {
      goto LABEL_18;
    }

    v14 = CFGetAllocator(v5);
    MediaPlaylistWriterHelper = fsadct_MakeMediaPlaylistWriterHelper(v14, v5, v6, cf, &v83);
    if (MediaPlaylistWriterHelper)
    {
      goto LABEL_62;
    }

    MediaPlaylistWriterHelper = fsadct_EnsureArrayOfWriteLockedPersistentStreamInfosAndAddEntry(v5, v83);
    if (MediaPlaylistWriterHelper)
    {
      goto LABEL_62;
    }

    MediaPlaylistWriterHelper = fsadct_WriteMediaPlaylistAndAddToMovpkg(v5, &v83, v10);
    if (MediaPlaylistWriterHelper)
    {
      goto LABEL_62;
    }

    if (!cf)
    {
LABEL_18:
      v20 = 0;
      goto LABEL_58;
    }

    v12 = *(a3 + 56);
  }

  theSet = v12;
  v79 = CFDictionaryGetValue(theDict, *MEMORY[0x1E6962B68]);
  v15 = CFDictionaryGetValue(theDict, *MEMORY[0x1E6962B98]);
  v16 = CFDictionaryGetValue(theDict, *MEMORY[0x1E6962BC0]);
  v17 = CFDictionaryGetValue(theDict, *MEMORY[0x1E6962B78]);
  v18 = CFDictionaryGetValue(theDict, *MEMORY[0x1E6962BA8]);
  v19 = CFDictionaryGetValue(theDict, *MEMORY[0x1E6962B70]);
  v20 = 0;
  v87 = 0;
  v86 = 0;
  if (v9 != 1986618469 && v16 && v15)
  {
    if (v7)
    {
      v21 = v19;
      if (v9 == 1668047728)
      {
        v23 = "CLOSED-CAPTIONS";
        v22 = v81;
      }

      else
      {
        v22 = v81;
        if (v9 == 1935832172)
        {
          v23 = "SUBTITLES";
        }

        else
        {
          if (v9 != 1936684398)
          {
LABEL_22:
            if (v22)
            {
              v27 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v27, v28, v29, "GROUP-ID", v22);
            }

            v30 = OUTLINED_FUNCTION_383();
            CFStringAppendFormat(v30, v31, @",%s=%@", "LANGUAGE", v16);
            v32 = OUTLINED_FUNCTION_383();
            CFStringAppendFormat(v32, v33, @",%s=%@", "NAME", v15);
            if (v17)
            {
              v34 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v34, v35, v36, "INSTREAM-ID", v17);
            }

            if (FigCFDictionaryGetBooleanIfPresent())
            {
              if (v87)
              {
                v37 = "YES";
              }

              else
              {
                v37 = "NO";
              }

              v73 = v37;
              v38 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v38, v39, v40, "AUTOSELECT", v73);
            }

            if (FigCFDictionaryGetBooleanIfPresent())
            {
              if (HIBYTE(v87))
              {
                v41 = "YES";
              }

              else
              {
                v41 = "NO";
              }

              v74 = v41;
              v42 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v42, v43, v44, "FORCED", v74);
            }

            if (FigCFDictionaryGetBooleanIfPresent())
            {
              if (v86)
              {
                v45 = "YES";
              }

              else
              {
                v45 = "NO";
              }

              v75 = v45;
              v46 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v46, v47, v48, "DEFAULT", v75);
            }

            if (v79)
            {
              v49 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v49, v50, v51, "CHANNELS", v79);
            }

            if (v18)
            {
              v52 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v52, v53, v54, "STABLE-RENDITION-ID", v18);
            }

            if (v21)
            {
              v55 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v55, v56, v57, "CHARACTERISTICS");
              if (CFArrayGetCount(v21) >= 1)
              {
                v58 = 0;
                do
                {
                  ValueAtIndex = CFArrayGetValueAtIndex(v21, v58);
                  if (v58)
                  {
                    v60 = OUTLINED_FUNCTION_383();
                    CFStringAppendFormat(v60, v61, @",");
                  }

                  v62 = OUTLINED_FUNCTION_383();
                  CFStringAppendFormat(v62, v63, @"%@", ValueAtIndex);
                  ++v58;
                }

                while (v58 < CFArrayGetCount(v21));
              }

              v64 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v64, v65, v66);
              v22 = v81;
            }

            if (*(&v83 + 1) && v84)
            {
              v76 = *(&v83 + 1);
              v78 = v84;
              v67 = OUTLINED_FUNCTION_383();
              CFStringAppendFormat(v67, v68, v69, "URI", v76, v78);
            }

            v70 = OUTLINED_FUNCTION_383();
            CFStringAppendFormat(v70, v71, v72);
            CFSetSetValue(theSet, v22);
            v20 = 0;
            goto LABEL_56;
          }

          v23 = "AUDIO";
        }
      }

      v77 = v23;
      v24 = OUTLINED_FUNCTION_383();
      CFStringAppendFormat(v24, v25, v26, "#EXT-X-MEDIA", "TYPE", v77);
      goto LABEL_22;
    }

    fig_log_get_emitter();
    goto LABEL_61;
  }

LABEL_56:
  if (cf)
  {
    CFRelease(cf);
  }

LABEL_58:
  fsadct_DestroyMediaPlaylistWriterHelper(&v83);
  *(a3 + 64) = v20;
}

uint64_t fsadct_MakeMediaPlaylistWriterHelper(uint64_t a1, int a2, uint64_t a3, CFTypeRef cf, CFStringRef *a5)
{
  v63 = *MEMORY[0x1E695E4C0];
  if (cf && a1 && a3 && a5)
  {
    a5[1] = CFRetain(cf);
    URLString = 0;
    v9 = *MEMORY[0x1E695E480];
    Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
    v11 = MEMORY[0x1E695E4D0];
    if (Mutable)
    {
      v12 = Mutable;
      CFDictionarySetValue(Mutable, @"StreamInfoDemandWriteAccess", *MEMORY[0x1E695E4D0]);
      v13 = *(*(CMBaseObjectGetVTable() + 16) + 32);
      if (v13)
      {
        v14 = v13(a3, cf, v12, &URLString);
        if (v14)
        {
          if (URLString)
          {
            CFRelease(URLString);
          }
        }

        else
        {
          *a5 = URLString;
          URLString = 0;
        }
      }

      else
      {
        v14 = 4294954514;
      }

      CFRelease(v12);
      if (v14)
      {
        return v14;
      }
    }

    else
    {
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      v14 = FigSignalErrorAtGM();
      if (v14)
      {
        return v14;
      }
    }

    FigBaseObject = FigHLSPersistentStreamInfoGetFigBaseObject(*a5);
    v16 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (!v16)
    {
      return 4294954514;
    }

    v17 = v16(FigBaseObject, @"StreamInfoCompleteState", a1, &v63);
    if (v17)
    {
      return v17;
    }

    if (v63 == *v11)
    {
      v18 = *a5;
      URLString = 0;
      if (v18)
      {
        v19 = FigHLSPersistentStreamInfoGetFigBaseObject(v18);
        v20 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (!v20)
        {
          v22 = 0;
          v14 = 4294954514;
          goto LABEL_21;
        }

        v21 = v20(v19, @"StreamInfoMediaPlaylistNetworkURL", v9, &URLString);
        if (!v21)
        {
          v22 = CFURLCreateWithString(v9, URLString, 0);
          if (v22)
          {
            v14 = 0;
          }

          else
          {
            fig_log_get_emitter();
            OUTLINED_FUNCTION_0_4();
            v14 = FigSignalErrorAtGM();
          }

LABEL_21:
          if (URLString)
          {
            CFRelease(URLString);
          }

          if (v14)
          {
            goto LABEL_60;
          }

          v23 = *a5;
          URLString = 0;
          v67 = 0;
          cfa = 0;
          HIDWORD(v64) = 0;
          DerivedStorage = CMBaseObjectGetDerivedStorage();
          if (v22 && v23)
          {
            v25 = DerivedStorage;
            v26 = *(*(CMBaseObjectGetVTable() + 16) + 16);
            if (!v26)
            {
              v14 = 4294954514;
              goto LABEL_31;
            }

            v27 = v26(v23, @"NetworkPlaylist", &URLString, &cfa);
            if (!v27)
            {
              v14 = OUTLINED_FUNCTION_11_45(cfa, v28, v29, &v64 + 1, v30, v31, v32, *(v25 + 16), 0, 0, 0, 0, 0, &v67);
              if (!v14)
              {
                a5[3] = v67;
                v67 = 0;
              }

LABEL_31:
              if (URLString)
              {
                CFRelease(URLString);
              }

              if (cfa)
              {
                CFRelease(cfa);
              }

              if (v67)
              {
                CFRelease(v67);
              }

              if (v14)
              {
                goto LABEL_60;
              }

              if (a5[1] && (v57 = a5[1], v58 = "LocallyHostedPlaylist.m3u8", v33 = OUTLINED_FUNCTION_383(), (v36 = CFStringCreateWithFormat(v33, v34, v35)) != 0))
              {
                a5[2] = v36;
              }

              else
              {
                fig_log_get_emitter();
                OUTLINED_FUNCTION_0_4();
                v14 = FigSignalErrorAtGM();
                if (v14)
                {
LABEL_60:
                  if (v22)
                  {
                    CFRelease(v22);
                  }

                  return v14;
                }
              }

              v37 = *a5;
              v67 = 0;
              cfa = 0;
              URLString = 0;
              v66 = 0;
              if (!v37)
              {
                fig_log_get_emitter();
                OUTLINED_FUNCTION_0_4();
                v40 = FigSignalErrorAtGM();
                goto LABEL_75;
              }

              v38 = FigHLSPersistentStreamInfoGetFigBaseObject(v37);
              v39 = *(*(CMBaseObjectGetVTable() + 8) + 48);
              if (v39)
              {
                v40 = v39(v38, @"StreamInfoMediaSegmentList", a1, &cfa);
                if (v40)
                {
                  goto LABEL_75;
                }

                v41 = FigHLSPersistentStreamInfoGetFigBaseObject(v37);
                v42 = *(*(CMBaseObjectGetVTable() + 8) + 48);
                if (v42)
                {
                  v40 = v42(v41, @"StreamInfoMediaInitializationSegmentList", a1, &v67);
                  if (!v40)
                  {
                    v43 = OUTLINED_FUNCTION_383();
                    v47 = CFDictionaryCreateMutable(v43, v44, v45, v46);
                    v55 = v47;
                    if (!v47)
                    {
                      fig_log_get_emitter();
                      OUTLINED_FUNCTION_0_4();
                      v14 = FigSignalErrorAtGM();
                      goto LABEL_54;
                    }

                    URLString = v47;
                    if (v67)
                    {
                      OUTLINED_FUNCTION_7_60(v67, v48, v49, v50, v51, v52, v53, v54, v57, v58, v59, v60, v61, v62, v63, v64, URLString);
                      v14 = v66;
                      if (v66)
                      {
                        goto LABEL_54;
                      }
                    }

                    if (cfa)
                    {
                      OUTLINED_FUNCTION_7_60(cfa, v48, v49, v50, v51, v52, v53, v54, v57, v58, v59, v60, v61, v62, v63, v64, URLString);
                      v14 = v66;
                      if (v66)
                      {
                        goto LABEL_54;
                      }
                    }

                    v14 = 0;
                    a5[4] = v55;
                    goto LABEL_52;
                  }

LABEL_75:
                  v14 = v40;
LABEL_52:
                  v55 = 0;
LABEL_54:
                  if (cfa)
                  {
                    CFRelease(cfa);
                  }

                  if (v67)
                  {
                    CFRelease(v67);
                  }

                  if (v55)
                  {
                    CFRelease(v55);
                  }

                  goto LABEL_60;
                }
              }

              v55 = 0;
              v14 = 4294954514;
              goto LABEL_54;
            }
          }

          else
          {
            fig_log_get_emitter();
            OUTLINED_FUNCTION_0_4();
            v27 = FigSignalErrorAtGM();
          }

          v14 = v27;
          goto LABEL_31;
        }
      }

      else
      {
        fig_log_get_emitter();
        OUTLINED_FUNCTION_0_4();
        v21 = FigSignalErrorAtGM();
      }

      v14 = v21;
      v22 = 0;
      goto LABEL_21;
    }

    return 0;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t fsadct_AppendCryptKeyToPlaylistString(uint64_t a1, uint64_t a2, const __CFData *a3)
{
  if (!a1 || !a2)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_11();
    return FigSignalErrorAtGM();
  }

  if (!FigContentKeySpecifierGetIdentifier(a2))
  {
    return 0;
  }

  Identifier = FigContentKeySpecifierGetIdentifier(a2);
  KeySystem = FigContentKeySpecifierGetKeySystem(a2);
  v7 = &stru_1F0B1AFB8;
  v8 = @"identity";
  if (KeySystem != 2)
  {
    v8 = &stru_1F0B1AFB8;
  }

  if (KeySystem == 1)
  {
    v9 = @"com.apple.streamingkeydelivery";
  }

  else
  {
    v9 = v8;
  }

  v10 = FigContentKeySpecifierGetEncryptionMethod(a2) - 1;
  if (v10 <= 4)
  {
    v7 = off_1E748EE98[v10];
  }

  if (!a3 || (CFDataGetLength(a3) != 16 ? (fig_log_get_emitter(), OUTLINED_FUNCTION_1_11(), HexStringFromCFData = FigSignalErrorAtGM()) : (HexStringFromCFData = FigCreateHexStringFromCFData()), v12 = HexStringFromCFData, !HexStringFromCFData))
  {
    v13 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v13, v14, v15, "#EXT-X-KEY", "URI", Identifier);
    if (CFStringGetLength(v9) >= 1)
    {
      v16 = OUTLINED_FUNCTION_312();
      CFStringAppendFormat(v16, v17, v18, "KEYFORMAT", v9);
    }

    if (CFStringGetLength(v7) >= 1)
    {
      v19 = OUTLINED_FUNCTION_312();
      CFStringAppendFormat(v19, v20, v21, "METHOD", v7);
    }

    if (FigContentKeySpecifierGetSupportedProtocolVersions(a2))
    {
      v22 = OUTLINED_FUNCTION_312();
      CFStringAppendFormat(v22, v23, v24, "KEYFORMATVERSIONS");
      v25 = 0;
      for (i = 1; ; i = 0)
      {
        SupportedProtocolVersions = FigContentKeySpecifierGetSupportedProtocolVersions(a2);
        if (SupportedProtocolVersions)
        {
          SupportedProtocolVersions = CFArrayGetCount(SupportedProtocolVersions);
        }

        if (v25 >= SupportedProtocolVersions)
        {
          break;
        }

        v28 = FigContentKeySpecifierGetSupportedProtocolVersions(a2);
        CFArrayGetValueAtIndex(v28, v25);
        SInt64 = FigCFNumberGetSInt64();
        if ((i & 1) == 0)
        {
          v30 = OUTLINED_FUNCTION_312();
          CFStringAppendFormat(v30, v31, @"/");
        }

        v32 = OUTLINED_FUNCTION_312();
        CFStringAppendFormat(v32, v33, @"%lld", SInt64);
        ++v25;
      }

      v34 = OUTLINED_FUNCTION_312();
      CFStringAppendFormat(v34, v35, v36);
    }

    v37 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v37, v38, v39);
    return 0;
  }

  return v12;
}

uint64_t fsadct_CopyDebugDescription_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

void fsadct_CopyPersistentStreamIDFromNetworkURL_cold_1(const __CFDictionary *a1, const void *a2, CFTypeRef *a3)
{
  Value = CFDictionaryGetValue(a1, a2);
  if (Value)
  {
    *a3 = CFRetain(Value);
  }

  CFRelease(a2);
}

uint64_t fsadct_CopyPersistentStreamIDFromNetworkURL_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CopyPersistentStreamIDFromNetworkURL_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CopyPersistentStreamIDFromNetworkURL_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CopyPersistentStreamIDFromNetworkURL_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_EnsureArrayOfWriteLockedPersistentStreamInfosAndAddEntry_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL fsadct_WriteMediaPlaylistAndAddToMovpkg_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

uint64_t fsadct_WriteMediaPlaylistAndAddToMovpkg_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  LODWORD(result) = FigSignalErrorAtGM();
  if (result || (fig_log_get_emitter(), result = FigSignalErrorAtGM(), result))
  {
    *a1 = result;
    return 1;
  }

  return result;
}

uint64_t fsadct_WriteMediaPlaylistAndAddToMovpkg_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_WriteMediaPlaylistAndAddToMovpkg_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_WriteMediaPlaylistAndAddToMovpkg_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void fsadct_WriteMediaPlaylistAndAddToMovpkg_cold_6(__CFString *a1, uint64_t *a2)
{
  CFStringAppendFormat(a1, 0, @"%s\n", "#EXTM3U");
  TargetDuration = FigMediaPlaylistGetTargetDuration(*a2);
  v3 = OUTLINED_FUNCTION_312();
  CFStringAppendFormat(v3, v4, v5, "#EXT-X-TARGETDURATION", TargetDuration);
  if (FigMediaPlaylistGetVersion(*a2))
  {
    Version = FigMediaPlaylistGetVersion(*a2);
    v6 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v6, v7, v8, "#EXT-X-VERSION", Version);
  }

  v9 = OUTLINED_FUNCTION_312();
  CFStringAppendFormat(v9, v10, v11, "#EXT-X-MEDIA-SEQUENCE", 0);
  v12 = OUTLINED_FUNCTION_312();
  CFStringAppendFormat(v12, v13, v14, "#EXT-X-PLAYLIST-TYPE", "VOD");
  if (FigMediaPlaylistHasIndependentSegments(*a2))
  {
    v15 = OUTLINED_FUNCTION_312();
    CFStringAppendFormat(v15, v16, v17, "#EXT-X-INDEPENDENT-SEGMENTS");
  }
}

uint64_t fsadct_WriteMediaPlaylistAndAddToMovpkg_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CreateMediaMapKeyToFilePathMappingOutApplierFunction_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CreateMediaMapKeyToFilePathMappingOutApplierFunction_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CreateMediaMapKeyToFilePathMappingOutApplierFunction_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CreateMediaMapKeyToFilePathMappingOutApplierFunction_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_CreateMediaMapKeyToFilePathMappingOutApplierFunction_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_AppendSegmentToPlaylistString_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_AppendSegmentToPlaylistString_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_AppendSegmentToPlaylistString_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_AppendSegmentToPlaylistString_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fsadct_AppendSegmentToPlaylistString_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigCaptionRendererMACacheLoad(void *a1, int a2)
{
  if (!a1[42])
  {
    return 0;
  }

  v4 = OUTLINED_FUNCTION_1_117();
  if (!v4)
  {
    return 4294950095;
  }

  *v4 = CFRetain(a1);
  OUTLINED_FUNCTION_0_130();
  if (a2)
  {
    dispatch_sync_f(v5, v6, v7);
  }

  else
  {
    dispatch_async_f(v5, v6, v7);
  }

  return 0;
}

void mediaAccessibilityDidChange_0(uint64_t a1, void *a2)
{
  if (a2[42])
  {
    v3 = OUTLINED_FUNCTION_1_117();
    if (v3)
    {
      *v3 = CFRetain(a2);
      OUTLINED_FUNCTION_0_130();

      dispatch_async_f(v4, v5, v6);
    }
  }
}

uint64_t FigCaptionRendererMACacheCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

const AudioStreamBasicDescription *faf_canProcessTrim(const AudioStreamBasicDescription *result)
{
  if (result)
  {
    v1 = result;
    if (CMFormatDescriptionGetMediaSubType(result) == 1819304813)
    {
      result = CMAudioFormatDescriptionGetStreamBasicDescription(v1);
      if (result)
      {
        return ((result->mFormatFlags & 0x20) == 0);
      }
    }

    else
    {
      return 0;
    }
  }

  return result;
}

uint64_t figAudioFileWriter_CopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_CopyProperty_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_CopyProperty_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_CopyTrackProperty_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_CopyTrackProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_CopyTrackProperty_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_4(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_SetTrackProperty_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_3()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_4()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_5()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_6()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_7(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_8()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_9()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_10(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_11()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_12(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_13()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t figAudioFileWriter_AddSampleBufferToTrack_cold_14(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t faf_getTrimsOfSampleBuffer_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t faf_getTrimsOfSampleBuffer_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFileStarByteStreamCreateForFileURL(const __CFURL *a1, uint64_t a2, void *a3)
{
  v15 = *MEMORY[0x1E69E9840];
  bzero(buffer, 0x400uLL);
  if (FigIsPersistentURL())
  {
    PathForPersistentURL = FigCreatePathForPersistentURL();
    if (!PathForPersistentURL)
    {
LABEL_16:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      return FigSignalErrorAtGM();
    }

    v6 = PathForPersistentURL;
    CFStringGetFileSystemRepresentation(PathForPersistentURL, buffer, 1023);
    CFRelease(v6);
  }

  else if (!CFURLGetFileSystemRepresentation(a1, 1u, buffer, 1024))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_0_4();
    return FigSignalErrorAtGM();
  }

  CMByteStreamGetClassID();
  v7 = CMDerivedObjectCreate();
  if (v7)
  {
    return v7;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v9 = FigSimpleMutexCreate();
  *(DerivedStorage + 40) = v9;
  if (!v9)
  {
    goto LABEL_16;
  }

  *DerivedStorage = CFRetain(a1);
  v10 = fopen(buffer, "rb");
  *(DerivedStorage + 8) = v10;
  if (!v10 || (v11 = fileno(v10), *(DerivedStorage + 16) = v11, v11 == -1))
  {
    fig_log_get_emitter();
    __error();
    OUTLINED_FUNCTION_1_118();
    return FigSignalErrorAtGM();
  }

  fcntl(v11, 48, 1);
  FigByteStreamStatsSetupWorker();
  v12 = 0;
  *a3 = 0;
  return v12;
}

uint64_t FigFileStarByteStreamCreateForFile(uint64_t a1, const __CFAllocator *a2, void *a3)
{
  DarwinPath = FigFileGetDarwinPath();
  v6 = strlen(DarwinPath);
  v7 = CFURLCreateFromFileSystemRepresentation(a2, DarwinPath, v6, 0);
  v8 = FigFileStarByteStreamCreateForFileURL(v7, a2, a3);
  if (v7)
  {
    CFRelease(v7);
  }

  return v8;
}

uint64_t FigFileStarByteStreamRead_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  __error();
  OUTLINED_FUNCTION_1_118();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFileStarByteStreamGetAvailableLengthAtOffset_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t EstimateByteTimingForTrack(uint64_t a1, unint64_t a2, int a3, CMTime *a4)
{
  v40[0] = 0;
  v39 = **&MEMORY[0x1E6960CC0];
  v38 = **&MEMORY[0x1E6960C88];
  v36 = 0u;
  v37 = 0u;
  v34 = 0u;
  v35 = 0u;
  v32 = 0u;
  *cf = 0u;
  v31 = 0u;
  memset(v30, 0, sizeof(v30));
  v8 = *(*(CMBaseObjectGetVTable() + 16) + 32);
  if (!v8)
  {
    goto LABEL_11;
  }

  updated = v8(a1, v40);
  if (!updated)
  {
    v10 = v40[0];
    v11 = *(*(CMBaseObjectGetVTable() + 16) + 24);
    if (!v11)
    {
      goto LABEL_11;
    }

    updated = v11(v10, cf);
    if (!updated)
    {
      v12 = cf[0];
      v13 = *(*(CMBaseObjectGetVTable() + 16) + 8);
      if (v13)
      {
        updated = v13(v12, v30);
        if (!updated)
        {
          updated = UpdateCursorState(cf);
          if (!updated)
          {
            updated = UpdateCursorState(v30);
            if (!updated)
            {
              v14 = v32;
              v39 = *(&v30[1] + 4);
              if (MoveCursorByOne(v30))
              {
LABEL_10:
                v15 = 0;
                *a4 = v38;
                goto LABEL_12;
              }

              v17 = a3;
              while (1)
              {
                OUTLINED_FUNCTION_0_131();
                Seconds = CMTimeGetSeconds(&time);
                v19 = v32 + v14;
                if (v32 + v14 + (Seconds * v17) > a2)
                {
                  break;
                }

                time2 = v39;
                *&v27.value = *(v30 | 0xC);
                v27.epoch = *((v30 | 0xC) + 0x10);
                CMTimeAdd(&time, &time2, &v27);
                v39 = time;
                v14 = v19;
LABEL_37:
                if (MoveCursorByOne(v30))
                {
                  goto LABEL_10;
                }
              }

              while (1)
              {
                OUTLINED_FUNCTION_0_131();
                time2 = v38;
                if (CMTimeCompare(&time, &time2) < 0)
                {
                  v38 = v39;
                }

                v20 = v37;
                OUTLINED_FUNCTION_0_131();
                *&time2.value = *(cf | 0xC);
                time2.epoch = *((cf | 0xC) + 0x10);
                CMTimeSubtract(&v39, &time, &time2);
                v15 = MoveCursorByOne(cf);
                v21 = cf[0];
                v22 = v30[0];
                v23 = *(CMBaseObjectGetVTable() + 16);
                if (v23)
                {
                  v24 = v23;
                  if (!v22)
                  {
                    goto LABEL_29;
                  }
                }

                else
                {
                  v24 = 0;
                  if (!v22)
                  {
                    goto LABEL_29;
                  }
                }

                v25 = *(CMBaseObjectGetVTable() + 16);
                if (!v25)
                {
LABEL_29:
                  v26 = 0;
                  goto LABEL_30;
                }

                v26 = v25;
LABEL_30:
                if (v24 != v26 || !*(v24 + 32) || (*(v26 + 32))(v21, v22) != -1 || v15)
                {
                  goto LABEL_12;
                }

                v14 -= v20;
                if (BYTE8(v37))
                {
                  goto LABEL_37;
                }
              }
            }
          }
        }

        goto LABEL_39;
      }

LABEL_11:
      v15 = 4294954514;
      goto LABEL_12;
    }
  }

LABEL_39:
  v15 = updated;
LABEL_12:
  if (v40[0])
  {
    CFRelease(v40[0]);
  }

  if (cf[0])
  {
    CFRelease(cf[0]);
  }

  if (v30[0])
  {
    CFRelease(v30[0]);
  }

  return v15;
}

uint64_t UpdateCursorState(uint64_t *a1)
{
  v2 = a1 + 12;
  v3 = *a1;
  v4 = *(*(CMBaseObjectGetVTable() + 16) + 56);
  if (!v4)
  {
    return 4294954514;
  }

  result = v4(v3, v2);
  if (result)
  {
    return result;
  }

  v6 = *a1;
  v7 = *(*(CMBaseObjectGetVTable() + 16) + 144);
  if (!v7)
  {
    return 4294954514;
  }

  result = v7(v6, 0, (a1 + 8), 0, 0);
  if (result)
  {
    return result;
  }

  v8 = *a1;
  v9 = *(*(CMBaseObjectGetVTable() + 16) + 40);
  if (!v9)
  {
    return 4294954514;
  }

  result = v9(v8, a1 + 36);
  if (!result)
  {
    *(a1 + 72) = 1;
    v10 = a1 + 9;
    v11 = *a1;
    v12 = *(*(CMBaseObjectGetVTable() + 16) + 64);
    if (v12)
    {
      v12(v11, v10, 0, 0, 0);
    }

    return 0;
  }

  return result;
}

uint64_t MoveCursorByOne(uint64_t a1)
{
  v6 = 0;
  v2 = *a1;
  v3 = *(*(CMBaseObjectGetVTable() + 16) + 168);
  if (v3)
  {
    LODWORD(result) = v3(v2, 1, &v6);
    v5 = v6 != 1;
  }

  else
  {
    LODWORD(result) = -12782;
    v5 = 1;
  }

  if (result == 0 && v5)
  {
    result = 4294954456;
  }

  else
  {
    result = result;
  }

  if (!result)
  {
    ++*(a1 + 8);
    return UpdateCursorState(a1);
  }

  return result;
}

uint64_t FigGetDecoderMaxPixelsPerSecondFromPlist(int a1, int *a2)
{
  cf = 0;
  v12 = 0;
  MediaValidatorPropertyList = FigMediaValidatorCreateMediaValidatorPropertyList(@"MediaValidator.plist", &cf);
  if (MediaValidatorPropertyList)
  {
    goto LABEL_52;
  }

  if (!cf)
  {
    MediaValidatorPropertyList = FigSignalErrorAtGM();
    goto LABEL_52;
  }

  CFStringForOSTypeValue = FigGetCFStringForOSTypeValue();
  if (a1 == 1752589105)
  {
    MediaValidatorPropertyList = vdmst_getCodecMaxVideoLevelFromValidationDictionary(cf, CFStringForOSTypeValue, &v12);
    if (!MediaValidatorPropertyList)
    {
      if (v12 == 30)
      {
        v10 = 1225195520;
      }

      else if (v12 == 186)
      {
LABEL_33:
        v10 = 1333723136;
      }

      else
      {
        if (v12 != 63)
        {
          if (v12 == 90)
          {
            v11 = 1266491392;
          }

          else
          {
            if (v12 != 93)
            {
              switch(v12)
              {
                case 120:
                  v10 = 1283391488;
                  break;
                case 123:
                  v10 = 1291780096;
                  break;
                case 150:
                  v10 = 1300168704;
                  break;
                case 153:
                  v10 = 1308557312;
                  break;
                case 156:
                case 180:
LABEL_31:
                  v10 = 1316945920;
                  break;
                case 183:
LABEL_34:
                  v10 = 1325334528;
                  break;
                case 60:
                  v10 = 1247870976;
                  break;
                default:
                  v6 = 4294948175;
                  goto LABEL_6;
              }

              goto LABEL_48;
            }

            v11 = 1274880000;
          }

LABEL_49:
          v6 = 0;
          *a2 = v11;
          goto LABEL_6;
        }

        v10 = 1256259584;
      }

LABEL_48:
      v11 = v10;
      goto LABEL_49;
    }

LABEL_52:
    v6 = MediaValidatorPropertyList;
    goto LABEL_6;
  }

  if (a1 != 1635148593)
  {
    v6 = 4294948174;
    goto LABEL_6;
  }

  MediaValidatorPropertyList = vdmst_getCodecMaxVideoLevelFromValidationDictionary(cf, CFStringForOSTypeValue, &v12);
  if (MediaValidatorPropertyList)
  {
    goto LABEL_52;
  }

  v6 = 4294948175;
  if (!(!v9 & v8))
  {
    v11 = 1192562688;
    switch(v12)
    {
      case 10:
        goto LABEL_49;
      case 11:
        v11 = 1228636160;
        goto LABEL_49;
      case 12:
        v11 = 1237024768;
        goto LABEL_49;
      case 13:
      case 20:
        v11 = 1245290496;
        goto LABEL_49;
      case 14:
      case 15:
      case 16:
      case 17:
      case 18:
      case 19:
        goto LABEL_6;
      case 21:
        v11 = 1251651584;
        goto LABEL_49;
      case 22:
        v11 = 1251881984;
        goto LABEL_49;
      default:
        JUMPOUT(0);
    }
  }

  switch(v12)
  {
    case '2':
      v10 = 1292894208;
      goto LABEL_48;
    case '3':
      v10 = 1299185664;
      goto LABEL_48;
    case '4':
      v11 = 1308434432;
      goto LABEL_49;
    case '<':
      goto LABEL_31;
    case '=':
      goto LABEL_34;
    case '>':
      goto LABEL_33;
    default:
      break;
  }

LABEL_6:
  if (cf)
  {
    CFRelease(cf);
  }

  return v6;
}

uint64_t vdmst_getCodecMaxVideoLevelFromValidationDictionary(uint64_t a1, uint64_t a2, _DWORD *a3)
{
  cf = 0;
  v22 = 0;
  TypeID = CFNumberGetTypeID();
  if (!OUTLINED_FUNCTION_3_92(TypeID, v5, v6, v7, TypeID, &cf))
  {
    if (cf)
    {
      v8 = CFGetTypeID(cf);
      if (v8 == CFNumberGetTypeID())
      {
        if (CFNumberGetValue(cf, kCFNumberSInt32Type, a3))
        {
          return 0;
        }
      }
    }
  }

  v10 = CFArrayGetTypeID();
  result = OUTLINED_FUNCTION_3_92(v10, v11, v12, v13, v10, &v22);
  if (!result)
  {
    if (v22 && (v14 = CFGetTypeID(v22), v14 == CFArrayGetTypeID()) && CFArrayGetCount(v22) >= 1)
    {
      Count = CFArrayGetCount(v22);
      if (Count < 1)
      {
        return FigSignalErrorAtGM();
      }

      v16 = Count;
      v17 = 0;
      for (i = 0; i != v16; ++i)
      {
        valuePtr = 0;
        ValueAtIndex = CFArrayGetValueAtIndex(v22, i);
        CFNumberGetValue(ValueAtIndex, kCFNumberSInt32Type, &valuePtr);
        if (v17 <= valuePtr)
        {
          v17 = valuePtr;
        }
      }

      if (v17)
      {
        result = 0;
        *a3 = v17;
      }

      else
      {
        return FigSignalErrorAtGM();
      }
    }

    else
    {
      return 4294948176;
    }
  }

  return result;
}

uint64_t FigGetEstimatedMaxFullFramePlaybackSpeedForFormatDescriptionAndNominalFrameRate(CMFormatDescriptionRef desc, float *a2, float a3)
{
  v86 = *MEMORY[0x1E69E9840];
  if (sVDMSTCheckLogOnce != -1)
  {
    OUTLINED_FUNCTION_1_119();
    dispatch_once_f(v66, v67, v68);
  }

  MediaSubType = CMFormatDescriptionGetMediaSubType(desc);
  if (MediaSubType != 1635135537 && MediaSubType != 1635148593 && MediaSubType != 1987063865 && MediaSubType != 1752589105)
  {
    return 4294948174;
  }

  v10 = MediaSubType;
  Dimensions = CMVideoFormatDescriptionGetDimensions(desc);
  v12 = Dimensions;
  if (Dimensions)
  {
    v13 = HIDWORD(Dimensions);
    if (HIDWORD(Dimensions))
    {
      LODWORD(v71) = 0;
      valuePtr = 0;
      v14 = MGCopyAnswer();
      if (!v14)
      {
        goto LABEL_69;
      }

      v15 = v14;
      CFNumberGetValue(v14, kCFNumberSInt64Type, &valuePtr);
      CFRelease(v15);
      v16 = valuePtr;
      if (valuePtr < 1)
      {
        goto LABEL_69;
      }

      v72 = 0;
      *v73 = 0;
      HIBYTE(v71) = 0;
      Extension = CMFormatDescriptionGetExtension(desc, *MEMORY[0x1E69600A0]);
      if (!Extension)
      {
        goto LABEL_67;
      }

      v18 = Extension;
      v19 = CFGetTypeID(Extension);
      if (v19 != CFDictionaryGetTypeID())
      {
        goto LABEL_67;
      }

      switch(v10)
      {
        case 1635135537:
          Value = CFDictionaryGetValue(v18, @"av1C");
          if (!Value)
          {
            break;
          }

          v28 = Value;
          v29 = CFGetTypeID(Value);
          if (v29 == CFArrayGetTypeID())
          {
            v28 = OUTLINED_FUNCTION_4_95();
            if (!v28)
            {
              break;
            }
          }

          else
          {
            v46 = CFGetTypeID(v28);
            if (v46 != CFDataGetTypeID())
            {
              break;
            }
          }

          v47 = CFGetTypeID(v28);
          if (v47 == CFDataGetTypeID())
          {
            CFDataGetBytePtr(v28);
            CFDataGetLength(v28);
            if (FigAV1Bridge_GetChromaFormatAndBitDepthsFromAV1CodecConfigurationRecord())
            {
              goto LABEL_69;
            }

            v59 = 3.0;
            goto LABEL_68;
          }

          break;
        case 1635148593:
          v30 = CFDictionaryGetValue(v18, @"avcC");
          if (!v30)
          {
            break;
          }

          v31 = v30;
          v32 = CFGetTypeID(v30);
          if (v32 == CFArrayGetTypeID())
          {
            v31 = OUTLINED_FUNCTION_4_95();
            if (!v31)
            {
              break;
            }
          }

          else
          {
            v48 = CFGetTypeID(v31);
            if (v48 != CFDataGetTypeID())
            {
              break;
            }
          }

          v49 = CFGetTypeID(v31);
          if (v49 == CFDataGetTypeID())
          {
            CFDataGetBytePtr(v31);
            CFDataGetLength(v31);
            SPSFromAVCC = FigH264Bridge_GetSPSFromAVCC();
            if (SPSFromAVCC)
            {
              goto LABEL_69;
            }

            OUTLINED_FUNCTION_2_116(SPSFromAVCC, v51, v52, v53, v54, v55, v56, v57, v69, v70, v71, v72, *v73);
            if (FigH264Bridge_GetSPSChromaFormatAndBitDepths())
            {
              goto LABEL_69;
            }

LABEL_60:
            v45 = HIBYTE(v71);
            goto LABEL_61;
          }

          break;
        case 1987063865:
          v24 = CFDictionaryGetValue(v18, @"vpcC");
          if (!v24)
          {
            break;
          }

          v25 = v24;
          v26 = CFGetTypeID(v24);
          if (v26 == CFArrayGetTypeID())
          {
            v25 = OUTLINED_FUNCTION_4_95();
            if (!v25)
            {
              break;
            }
          }

          else
          {
            v43 = CFGetTypeID(v25);
            if (v43 != CFDataGetTypeID())
            {
              break;
            }
          }

          v44 = CFGetTypeID(v25);
          if (v44 == CFDataGetTypeID())
          {
            v85 = 0;
            valuePtr = 0;
            if (FigVP9Bridge_ParseVPCC())
            {
              goto LABEL_69;
            }

            v45 = BYTE4(valuePtr);
            HIBYTE(v71) = BYTE4(valuePtr);
LABEL_61:
            if (v45 <= 3)
            {
              if (v10 == 1987063865)
              {
                v58 = &vdmst_getCoefficientsPerPixelFromFormatDesc_sVP9ChromaFormatCoefficientsPerPixel;
              }

              else
              {
                v58 = &vdmst_getCoefficientsPerPixelFromFormatDesc_sH264AndHEVCChromaFormatCoefficientsPerPixel;
              }

              v59 = v58[v45];
LABEL_68:
              v61 = (v16 & ~(v16 >> 63)) / v59;
              *&v71 = v61;
              if (v61 != 0.0)
              {
LABEL_71:
                *a2 = v61 / ((v12 * a3) * v13);
                if (dword_1EAF174F0)
                {
                  LODWORD(v72) = 0;
                  HIBYTE(v71) = 0;
                  os_log_and_send_and_compose_flags_and_os_log_type = fig_log_emitter_get_os_log_and_send_and_compose_flags_and_os_log_type();
                  v63 = v72;
                  if (os_log_type_enabled(os_log_and_send_and_compose_flags_and_os_log_type, HIBYTE(v71)))
                  {
                    v64 = v63;
                  }

                  else
                  {
                    v64 = v63 & 0xFFFFFFFE;
                  }

                  if (v64)
                  {
                    v65 = *a2;
                    *v73 = 136316418;
                    *&v73[4] = "FigGetEstimatedMaxFullFramePlaybackSpeedForFormatDescriptionAndNominalFrameRate";
                    v74 = 2048;
                    v75 = v61;
                    v76 = 2048;
                    v77 = a3;
                    v78 = 1024;
                    v79 = v12;
                    v80 = 1024;
                    v81 = v13;
                    v82 = 2048;
                    v83 = v65;
                    _os_log_send_and_compose_impl();
                  }

                  fig_log_call_emit_and_clean_up_after_send_and_compose();
                }

                return 0;
              }

LABEL_69:
              result = FigGetDecoderMaxPixelsPerSecondFromPlist(v10, &v71);
              if (result)
              {
                return result;
              }

              v61 = *&v71;
              goto LABEL_71;
            }
          }

          break;
        case 1752589105:
          v20 = CFDictionaryGetValue(v18, @"hvcC");
          if (!v20)
          {
            break;
          }

          v21 = v20;
          v22 = CFGetTypeID(v20);
          if (v22 == CFArrayGetTypeID())
          {
            v21 = OUTLINED_FUNCTION_4_95();
            if (!v21)
            {
              break;
            }
          }

          else
          {
            v33 = CFGetTypeID(v21);
            if (v33 != CFDataGetTypeID())
            {
              break;
            }
          }

          v34 = CFGetTypeID(v21);
          if (v34 == CFDataGetTypeID())
          {
            HEVCParameterSetAtIndex = FigHEVCBridge_GetHEVCParameterSetAtIndex();
            if (HEVCParameterSetAtIndex)
            {
              goto LABEL_69;
            }

            OUTLINED_FUNCTION_2_116(HEVCParameterSetAtIndex, v36, v37, v38, v39, v40, v41, v42, v69, v70, v71, v72, *v73);
            if (FigHEVCBridge_GetSPSChromaFormatAndBitDepths())
            {
              goto LABEL_69;
            }

            goto LABEL_60;
          }

          break;
        default:
          goto LABEL_69;
      }

LABEL_67:
      OUTLINED_FUNCTION_0_132();
      v60 = FigSignalErrorAtGM();
      v59 = 0.0;
      if (v60)
      {
        goto LABEL_69;
      }

      goto LABEL_68;
    }
  }

  OUTLINED_FUNCTION_0_132();

  return FigSignalErrorAtGM();
}

uint64_t FigGetEstimatedMaxFullFramePlaybackSpeedForTrackReader_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t vdmst_getCodecProperty_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t vdmst_getCodecProperty_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t vdmst_getCodecProperty_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigMovieUsesFragments(uint64_t a1, _BYTE *a2)
{
  result = CMByteStreamCreateForFileURL();
  if (!result)
  {
    return MovieUsesFragments(0, a2, 0);
  }

  return result;
}

uint64_t FigConsolidateMovieFragments()
{
  result = CMByteStreamCreateForFileURL();
  if (!result)
  {
    return DeMoofMovieFile(0);
  }

  return result;
}

uint64_t insertBeforeIfNotExist(uint64_t a1, uint64_t *a2)
{
  value = 0;
  v2 = *a2;
  v3 = a2[2];
  if (*(a1 + 16) == *(*a2 + 4 * v3))
  {
    v5 = v3 + 1;
    a2[2] = v5;
    if (v5 == a2[1])
    {
      a2[3] = a1;
      return 2;
    }

    v7 = *(v2 + 4 * v5);
    Count = CFArrayGetCount(*(a1 + 32));
    if (Count < 1)
    {
LABEL_10:
      v13 = FigTTMLDocumentWriterElementCreate(Count, v7, a1, &value);
      v14 = value;
      if (!v13)
      {
        CFArrayInsertValueAtIndex(*(a1 + 32), 0, value);
      }

      if (v14)
      {
        CFRelease(v14);
      }
    }

    else
    {
      v9 = Count;
      v10 = 0;
      while (1)
      {
        Count = CFArrayGetValueAtIndex(*(a1 + 32), v10);
        if (Count)
        {
          v11 = Count;
          v12 = CFGetTypeID(Count);
          OUTLINED_FUNCTION_0_133();
          Count = MEMORY[0x19A8D3660](&FigTTMLDocumentWriterElementGetTypeID_sRegisterElementOnce);
          if (v12 == sElementTypeID && *(v11 + 16) == v7)
          {
            break;
          }
        }

        if (v9 == ++v10)
        {
          goto LABEL_10;
        }
      }
    }
  }

  return 0;
}

void FigTTMLDocumentWriterElementRemoveChildNode(uint64_t a1, void *a2)
{
  v4 = *(a1 + 32);
  v10.length = CFArrayGetCount(v4);
  v10.location = 0;
  FirstIndexOfValue = CFArrayGetFirstIndexOfValue(v4, v10, a2);
  if ((FirstIndexOfValue & 0x8000000000000000) == 0)
  {
    v6 = FirstIndexOfValue;
    if (a2)
    {
      v7 = CFGetTypeID(a2);
      OUTLINED_FUNCTION_0_133();
      MEMORY[0x19A8D3660]();
      if (v7 == sElementTypeID)
      {
        a2[3] = 0;
      }
    }

    v8 = *(a1 + 32);

    CFArrayRemoveValueAtIndex(v8, v6);
  }
}

uint64_t writeStartElement(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 8))
  {
    goto LABEL_9;
  }

  v4 = *(a1 + 16);
  if (v4 == 5)
  {
    if (!CFDictionaryGetCount(*(a1 + 40)))
    {
LABEL_9:
      v8 = 0;
      goto LABEL_17;
    }

    v4 = *(a1 + 16);
  }

  started = FigTTMLDocumentWriterStartElement(*a2, v4);
  *(a2 + 8) = started;
  if (started)
  {
    goto LABEL_9;
  }

  Count = FigCFDictionaryGetCount();
  if (!Count)
  {
    goto LABEL_9;
  }

  v7 = Count;
  if ((Count - 0x2000000000000000) >= 0xE000000000000001 && (v9 = malloc_type_malloc(8 * Count, 0x6004044C4A2DFuLL)) != 0)
  {
    v8 = v9;
    CFDictionaryGetKeysAndValues(*(a1 + 40), v9, 0);
    qsort(v8, v7, 8uLL, compareCFString);
    v10 = 0;
    v11 = v7 - 1;
    do
    {
      v12 = v8[v10];
      Value = CFDictionaryGetValue(*(a1 + 40), v12);
      v14 = FigTTMLDocumentWriterSetAttribute(*a2, v12, Value);
      *(a2 + 8) = v14;
      if (v14)
      {
        v15 = 1;
      }

      else
      {
        v15 = v11 == v10;
      }

      ++v10;
    }

    while (!v15);
  }

  else
  {
    OUTLINED_FUNCTION_0_27();
    v8 = 0;
    *(a2 + 8) = FigSignalErrorAtGM();
  }

LABEL_17:
  free(v8);
  return 2 * (*(a2 + 8) != 0);
}

uint64_t writeEndElement(uint64_t a1, uint64_t a2)
{
  v3 = *(a2 + 8);
  if (!v3)
  {
    if (*(a1 + 16) == 5 && !CFDictionaryGetCount(*(a1 + 40)))
    {
      v3 = *(a2 + 8);
    }

    else
    {
      v3 = FigTTMLDocumentWriterEndElement(*a2);
      *(a2 + 8) = v3;
    }
  }

  return 2 * (v3 != 0);
}

uint64_t writeCaptionData(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 8))
  {
    return 2;
  }

  v3 = FigTTMLDocumentWriterAddCaptionData(*a2, a1);
  *(a2 + 8) = v3;
  return 2 * (v3 != 0);
}

void FigTTMLDocumentWriterElementCreate_cold_1(const void *a1, _DWORD *a2)
{
  OUTLINED_FUNCTION_0_27();
  *a2 = FigSignalErrorAtGM();

  CFRelease(a1);
}

uint64_t FigTTMLDocumentWriterElementCreate_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterElementCreate_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterElementInsertBeforeIfNotExist_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterElementCopyElementsAtPath_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigTTMLDocumentWriterElementCopyElementsAtPath_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void figHTTPCustomURLLoaderCredentialCallback()
{
  v0 = objc_autoreleasePoolPush();
  FigRetainProxyLockMutex();
  if (!FigRetainProxyIsInvalidated())
  {
    FigRetainProxyGetOwner();
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    FigCustomURLResponseInfoCopyNSURLCredential();
    FigCustomURLResponseInfoGetNSURLSessionAuthChallengeDisposition();
    v2 = *(DerivedStorage + 472);
    if (v2)
    {
      (*(v2 + 16))();
      _Block_release(*(DerivedStorage + 472));
      *(DerivedStorage + 472) = 0;
    }
  }

  FigRetainProxyUnlockMutex();

  objc_autoreleasePoolPop(v0);
}

void figHttpRequestCloseNSURLSessionTask()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 544))
  {
    nw_activity_complete_with_reason();
    v1 = *(DerivedStorage + 544);
    if (v1)
    {
      CFRelease(v1);
      *(DerivedStorage + 544) = 0;
    }
  }

  v2 = *(DerivedStorage + 504);
  if (v2)
  {
    [v2 cancel];
    [*(DerivedStorage + 56) _deregisterFigHTTPRequestForDataTask:*(DerivedStorage + 504)];

    *(DerivedStorage + 504) = 0;
  }
}

uint64_t _FigHTTPRequestSessionCreateNSURLSessionDataDelegate(int a1, void *a2)
{
  if (!a2)
  {
    return 4294954516;
  }

  v4 = objc_autoreleasePoolPush();
  *a2 = [[FigHTTPRequestSessionDataDelegate alloc] initWithResponseDispositionOption:a1 != 0];
  objc_autoreleasePoolPop(v4);
  return 0;
}

uint64_t figHttpRequestSendOutputBlockBuffer(uint64_t a1, unsigned int a2)
{
  Owner = FigRetainProxyGetOwner();
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v5 = *(DerivedStorage + 392);
  v6 = *(DerivedStorage + 384);
  v7 = *(DerivedStorage + 400) - v5;
  *(DerivedStorage + 424) += v7;
  *(DerivedStorage + 432) = 1;
  figHTTPRequestPerformReadCallback(Owner, v6, v5, v7, a2, 0);
  if (FigRetainProxyIsInvalidated())
  {
    return 4294954511;
  }

  *(DerivedStorage + 432) = 0;
  if ((a2 & 2) != 0 || !*(DerivedStorage + 408))
  {
    v9 = *(DerivedStorage + 384);
    if (v9)
    {
      CFRelease(v9);
      *(DerivedStorage + 384) = 0;
    }

    result = 0;
    *(DerivedStorage + 392) = 0;
    *(DerivedStorage + 400) = 0;
    *(DerivedStorage + 408) = 0;
  }

  else
  {
    result = 0;
    *(DerivedStorage + 392) = *(DerivedStorage + 400);
  }

  return result;
}

uint64_t figHTTPRequestGetOutputBuffer(uint64_t a1, char **a2, size_t *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  *a2 = 0;
  *a3 = 0;
  if (!*(DerivedStorage + 16))
  {
    return 0;
  }

  v7 = DerivedStorage;
  lengthAtOffsetOut = 0;
  dataPointerOut = 0;
  v8 = *(DerivedStorage + 384);
  if (v8)
  {
    goto LABEL_28;
  }

  v9 = CMBaseObjectGetDerivedStorage();
  v10 = *v9;
  v27 = 0;
  theBuffer = 0;
  if (v10)
  {
    CFRetain(v10);
  }

  v24 = *(v9 + 16);
  v11 = *(v9 + 32);
  if (v11)
  {
    v12 = CFRetain(v11);
  }

  else
  {
    v12 = 0;
  }

  v13 = *(v9 + 136);
  v14 = *(v9 + 416);
  if (v14 < 1)
  {
    v16 = 0;
  }

  else
  {
    v15 = v14 - *(v9 + 424);
    if (*(v9 + 169))
    {
      v16 = v15 + 1;
    }

    else
    {
      v16 = v15;
    }
  }

  FigRetainProxyUnlockAll();
  v17 = v24(v12, a1, v13, v16, &theBuffer, &v27);
  FigRetainProxyRelock();
  if (v12)
  {
    CFRelease(v12);
  }

  if (v17)
  {
LABEL_21:
    if (!v10)
    {
      goto LABEL_23;
    }

    goto LABEL_22;
  }

  if (FigRetainProxyIsInvalidated())
  {
    v17 = 4294954511;
    if (!v10)
    {
      goto LABEL_23;
    }

LABEL_22:
    CFRelease(v10);
    goto LABEL_23;
  }

  v18 = theBuffer;
  if (theBuffer)
  {
    v19 = v27;
    *(v9 + 392) = v27;
    *(v9 + 400) = v19;
    *(v9 + 384) = v18;
    v17 = 0;
    *(v9 + 408) = CMBlockBufferGetDataLength(v18) - *(v9 + 400);
    theBuffer = 0;
    goto LABEL_21;
  }

  v17 = 0;
  if (v10)
  {
    goto LABEL_22;
  }

LABEL_23:
  if (theBuffer)
  {
    CFRelease(theBuffer);
  }

  if (!FigRetainProxyIsInvalidated() && !v17)
  {
    v8 = v7[48];
    if (v8)
    {
LABEL_28:
      v20 = v7[51];
      DataPointer = CMBlockBufferGetDataPointer(v8, v7[50], &lengthAtOffsetOut, 0, &dataPointerOut);
      if (!DataPointer)
      {
        v22 = lengthAtOffsetOut;
        if (v20 < lengthAtOffsetOut)
        {
          v22 = v20;
        }

        if (v22)
        {
          v17 = 0;
          *a2 = dataPointerOut;
          *a3 = v22;
          return v17;
        }

        return FigSignalErrorAtGM();
      }

      return DataPointer;
    }

    return 0;
  }

  return v17;
}

void figHTTPSetActivelyUsingNetwork(uint64_t a1, int a2)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  UpTimeNanoseconds = FigGetUpTimeNanoseconds();
  if (*(DerivedStorage + 456) != a2)
  {
    *(DerivedStorage + 456) = a2;
    if (!a2)
    {
      v7 = UpTimeNanoseconds;
      if (*(DerivedStorage + 457) == 1)
      {
        FigBytePumpGetFigBaseObject(UpTimeNanoseconds);
      }

      if (figHTTPShouldReportNetworkHistory(DerivedStorage) && *(DerivedStorage + 496))
      {
        figHTTPCapUptimeToResponseEndTime(DerivedStorage, v7);
        FigNetworkHistoryRequestBecameInactive();
        *(DerivedStorage + 496) = 0;
        *(DerivedStorage + 177) = 0;
      }
    }

    v5 = *(DerivedStorage + 448);
    if (v5)
    {
      v6 = CFRetain(v5);
      v8[0] = MEMORY[0x1E69E9820];
      v8[1] = 3221225472;
      v8[2] = __figHTTPSetActivelyUsingNetwork_block_invoke;
      v8[3] = &__block_descriptor_41_e5_v8__0l;
      v9 = a2;
      v8[4] = v6;
      dispatch_async(gApplicationNetworkActivityQueue, v8);
    }
  }
}

uint64_t figHTTPRequestNSURLSessionInvalidate(uint64_t a1)
{
  if (!a1)
  {
    return 4294954516;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!OUTLINED_FUNCTION_172(DerivedStorage))
  {
    return 0;
  }

  FigRetainProxyLockMutex();
  if (*(v1 + 8))
  {
    v9 = 4294954511;
  }

  else
  {
    FigRetainProxyInvalidate();
    *(v1 + 8) = 1;
    if (*(v1 + 363))
    {
      FigHTTPRequestCommonMandatoryRequestFinish();
      *(v1 + 363) = 0;
    }

    v4 = objc_autoreleasePoolPush();
    figHTTPSetActivelyUsingNetwork(a1, 0);
    figHttpRequestCloseNSURLSessionTask();
    if (*(v1 + 472))
    {
      v5 = *(v1 + 464);
      v6 = *(v1 + 480);
      v7 = *(*(CMBaseObjectGetVTable() + 16) + 32);
      if (v7)
      {
        v7(v5, v6);
      }

      OUTLINED_FUNCTION_3_93();
      v8();
      _Block_release(*(v1 + 472));
      *(v1 + 472) = 0;
    }

    objc_autoreleasePoolPop(v4);
    v9 = 0;
  }

  FigRetainProxyUnlockMutex();
  return v9;
}

void figHTTPRequestNSURLSessionFinalize(uint64_t a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v3 = objc_autoreleasePoolPush();
  figHTTPRequestNSURLSessionInvalidate(a1);
  v4 = *(DerivedStorage + 560);
  if (v4)
  {

    *(DerivedStorage + 560) = 0;
  }

  v5 = *(DerivedStorage + 88);
  if (v5)
  {
    CFRelease(v5);
    *(DerivedStorage + 88) = 0;
  }

  v6 = *(DerivedStorage + 96);
  if (v6)
  {
    CFRelease(v6);
    *(DerivedStorage + 96) = 0;
  }

  v7 = *(DerivedStorage + 104);
  if (v7)
  {
    CFRelease(v7);
    *(DerivedStorage + 104) = 0;
  }

  v8 = *(DerivedStorage + 544);
  if (v8)
  {
    CFRelease(v8);
    *(DerivedStorage + 544) = 0;
  }

  v9 = *(DerivedStorage + 352);
  if (v9)
  {
    nw_release(v9);
  }

  *(DerivedStorage + 352) = 0;
  v10 = *(DerivedStorage + 344);
  if (v10)
  {
    nw_release(v10);
  }

  *(DerivedStorage + 344) = 0;
  v11 = *(DerivedStorage + 64);
  if (v11)
  {
    dispatch_release(v11);
  }

  *(DerivedStorage + 64) = 0;
  v12 = *(DerivedStorage + 152);
  if (v12)
  {
    CFRelease(v12);
    *(DerivedStorage + 152) = 0;
  }

  *(DerivedStorage + 144) = 0;
  v13 = *(DerivedStorage + 160);
  if (v13)
  {
    CFRelease(v13);
    *(DerivedStorage + 160) = 0;
  }

  v14 = *(DerivedStorage + 464);
  if (v14)
  {
    CFRelease(v14);
    *(DerivedStorage + 464) = 0;
  }

  v15 = *(DerivedStorage + 472);
  if (v15)
  {
    _Block_release(v15);
  }

  v16 = *(DerivedStorage + 80);
  if (v16)
  {
    CFRelease(v16);
    *(DerivedStorage + 80) = 0;
  }

  v17 = *(DerivedStorage + 72);
  if (v17)
  {
    CFRelease(v17);
    *(DerivedStorage + 72) = 0;
  }

  v18 = *(DerivedStorage + 384);
  if (v18)
  {
    CFRelease(v18);
    *(DerivedStorage + 384) = 0;
  }

  v19 = *(DerivedStorage + 112);
  if (v19)
  {
    CFRelease(v19);
    *(DerivedStorage + 112) = 0;
  }

  v20 = *(DerivedStorage + 448);
  if (v20)
  {
    CFRelease(v20);
    *(DerivedStorage + 448) = 0;
  }

  v21 = *(DerivedStorage + 368);
  if (v21)
  {
    CFRelease(v21);
    *(DerivedStorage + 368) = 0;
  }

  v22 = *(DerivedStorage + 512);
  if (v22)
  {
    CFRelease(v22);
    *(DerivedStorage + 512) = 0;
  }

  v23 = *(DerivedStorage + 520);
  if (v23)
  {
    CFRelease(v23);
    *(DerivedStorage + 520) = 0;
  }

  v24 = *(DerivedStorage + 440);
  if (v24)
  {
    CFRelease(v24);
    *(DerivedStorage + 440) = 0;
  }

  v25 = *(DerivedStorage + 488);
  if (v25)
  {
    CFRelease(v25);
    *(DerivedStorage + 488) = 0;
  }

  v26 = *(DerivedStorage + 32);
  if (v26)
  {
    CFRelease(v26);
    *(DerivedStorage + 32) = 0;
  }

  v27 = *(DerivedStorage + 40);
  if (v27)
  {
    CFRelease(v27);
    *(DerivedStorage + 40) = 0;
  }

  if (*DerivedStorage)
  {
    CFRelease(*DerivedStorage);
    *DerivedStorage = 0;
  }

  objc_autoreleasePoolPop(v3);
}

uint64_t figHTTPRequestNSURLSessionSetProperty(uint64_t a1, const void *a2, const void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  OUTLINED_FUNCTION_172(DerivedStorage);
  FigRetainProxyLockMutex();
  if (FigRetainProxyIsInvalidated())
  {
    v16 = 4294954511;
    goto LABEL_22;
  }

  v8 = CFEqual(a2, @"FHRP_ExpectedProgressTarget");
  if (v8)
  {
    if (a3)
    {
      OUTLINED_FUNCTION_2_117(v8, v9, v10, v11, v12, v13, v14, v15, v37, 0);
      a3 = FigNanosecondsToHostTime();
      FigGetContinuousUpTimeNanoseconds();
    }

    [*(v3 + 504) set_expectedProgressTarget:a3];
    goto LABEL_6;
  }

  if (CFEqual(a2, @"FHRP_DefaultLatency"))
  {
    if (a3)
    {
      v17 = CFGetTypeID(a3);
      TypeID = CFNumberGetTypeID();
      if (v17 == TypeID)
      {
        OUTLINED_FUNCTION_2_117(TypeID, v19, v20, v21, v22, v23, v24, v25, v37, 0);
        v16 = 0;
        *(v3 + 248) = *valuePtr;
        goto LABEL_22;
      }
    }

LABEL_21:
    OUTLINED_FUNCTION_239();
    v16 = FigSignalErrorAtGM();
    goto LABEL_22;
  }

  if (CFEqual(a2, @"FHRP_NWActivityCompletionReason"))
  {
    if (a3)
    {
      v26 = CFGetTypeID(a3);
      v27 = CFNumberGetTypeID();
      if (v26 == v27)
      {
        OUTLINED_FUNCTION_2_117(v27, v28, v29, v30, v31, v32, v33, v34, v37, 0);
        v16 = 0;
        *(v3 + 552) = valuePtra;
        goto LABEL_22;
      }
    }

    goto LABEL_21;
  }

  if (!CFEqual(a2, @"FHRP_IsDormant"))
  {
    v16 = 4294954512;
    goto LABEL_22;
  }

  if (!a3)
  {
    goto LABEL_21;
  }

  v35 = CFGetTypeID(a3);
  if (v35 != CFBooleanGetTypeID())
  {
    goto LABEL_21;
  }

  figHTTPSetIsDormant(a1, *MEMORY[0x1E695E4D0] == a3);
LABEL_6:
  v16 = 0;
LABEL_22:
  FigRetainProxyUnlockMutex();
  return v16;
}

uint64_t figHTTPRequestNSURLSessionCopyTaskMetrics(uint64_t a1, void *a2)
{
  result = 4294954516;
  if (a1 && a2)
  {
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    if (DerivedStorage && (v6 = DerivedStorage, *DerivedStorage))
    {
      FigRetainProxyLockMutex();
      *a2 = v6[32];
      FigRetainProxyUnlockMutex();
      return 0;
    }

    else
    {
      return 4294954516;
    }
  }

  return result;
}

uint64_t figHTTPRequestNSURLSessionCopyByteRangeAsCFDictionary(uint64_t a1, CFMutableDictionaryRef *a2)
{
  result = 4294954516;
  if (a1 && a2)
  {
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    if (DerivedStorage && *DerivedStorage)
    {
      Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
      if (Mutable)
      {
        v7 = Mutable;
        FigRetainProxyLockMutex();
        FigCFDictionarySetInt64();
        FigCFDictionarySetInt64();
        FigRetainProxyUnlockMutex();
        result = 0;
        *a2 = v7;
      }

      else
      {
        OUTLINED_FUNCTION_239();

        return FigSignalErrorAtGM();
      }
    }

    else
    {
      return 4294954516;
    }
  }

  return result;
}

uint64_t figHTTPRequestNSURLSessionPause()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = OUTLINED_FUNCTION_172(DerivedStorage);
  if (result)
  {
    FigRetainProxyLockMutex();
    if (!*(v0 + 8))
    {
      [*(v0 + 504) suspend];
    }

    return FigRetainProxyUnlockMutex();
  }

  return result;
}

uint64_t figHTTPRequestNSURLSessionResume()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  result = OUTLINED_FUNCTION_172(DerivedStorage);
  if (result)
  {
    FigRetainProxyLockMutex();
    if (!*(v0 + 8))
    {
      [*(v0 + 504) resume];
    }

    return FigRetainProxyUnlockMutex();
  }

  return result;
}

uint64_t figHTTPRequestNSURLSessionGetBandwidthInfo(uint64_t a1, uint64_t *a2, uint64_t *a3, uint64_t *a4)
{
  if (!a1)
  {
    return 4294954516;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!DerivedStorage)
  {
    return 4294954516;
  }

  v8 = DerivedStorage;
  if (!*DerivedStorage)
  {
    return 4294954516;
  }

  FigRetainProxyLockMutex();
  if (a2)
  {
    v9 = v8[53];
    if (*(v8 + 432) != 1)
    {
      v9 = v8[50] + v9 - v8[49];
    }

    *a2 = v9;
  }

  if (a3)
  {
    if (!*(v8 + 173) && !*(v8 + 174) || (v10 = v8[31], v10 <= 0))
    {
      v11 = v8[27];
      v12 = v8[25];
      v13 = v11 < v12;
      v10 = v11 - v12;
      if (v13)
      {
        v10 = 0;
      }
    }

    *a3 = v10;
  }

  if (a4)
  {
    v15 = v8[27];
    v14 = v8[28];
    v13 = v14 < v15;
    v16 = v14 - v15;
    if (v13)
    {
      if (v15 < 1)
      {
        v16 = 0;
      }

      else
      {
        v16 = FigGetUpTimeNanoseconds() - v8[27];
      }
    }

    *a4 = v16;
  }

  FigRetainProxyUnlockMutex();
  return 0;
}

uint64_t figHTTPRequestNSURLSessionGetBufferFilledOffset(uint64_t a1, uint64_t a2, void *a3)
{
  v3 = 4294954516;
  if (a1)
  {
    if (a2)
    {
      if (a3)
      {
        DerivedStorage = CMBaseObjectGetDerivedStorage();
        if (DerivedStorage)
        {
          v7 = DerivedStorage;
          if (*DerivedStorage)
          {
            FigRetainProxyLockMutex();
            if (v7[48] == a2)
            {
              v3 = 0;
              *a3 = v7[50];
            }

            FigRetainProxyUnlockMutex();
          }
        }
      }
    }
  }

  return v3;
}

uint64_t figHTTPRequestNSURLSessionCopyTransactionMetrics(uint64_t a1, void *a2, void *a3, void *a4, void *a5, void *a6, void *a7, void *a8, _BYTE *a9, void *a10, _DWORD *a11, void *a12, void *a13)
{
  if (!a1)
  {
    return 4294954516;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!DerivedStorage || !OUTLINED_FUNCTION_172(DerivedStorage))
  {
    return 4294954516;
  }

  FigRetainProxyLockMutex();
  if (a2)
  {
    *a2 = *(v13 + 264);
  }

  if (a3)
  {
    *a3 = *(v13 + 272);
  }

  if (a4)
  {
    *a4 = *(v13 + 280);
  }

  if (a5)
  {
    *a5 = *(v13 + 288);
  }

  if (a6)
  {
    *a6 = *(v13 + 296);
  }

  if (a7)
  {
    *a7 = *(v13 + 304);
  }

  if (a8)
  {
    *a8 = *(v13 + 312);
  }

  if (a9)
  {
    *a9 = *(v13 + 320);
  }

  if (a10)
  {
    *a10 = *(v13 + 328);
  }

  if (a11)
  {
    *a11 = *(v13 + 336);
  }

  if (a12)
  {
    v22 = *(v13 + 352);
    if (v22)
    {
      nw_retain(v22);
      v23 = *(v13 + 352);
    }

    else
    {
      v23 = 0;
    }

    *a12 = v23;
  }

  if (a13)
  {
    v24 = *(v13 + 344);
    if (v24)
    {
      nw_retain(v24);
      v25 = *(v13 + 344);
    }

    else
    {
      v25 = 0;
    }

    *a13 = v25;
  }

  FigRetainProxyUnlockMutex();
  return 0;
}

uint64_t figHTTPRequestPerformReadCallback_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figHTTPRequestPerformReadCallback_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figHTTPRequestPerformReadCallback_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_6(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_8(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_9(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_10(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_11(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

BOOL _FigHTTPRequestCreateWithNSURLSession_cold_21(_DWORD *a1)
{
  v2 = FigSignalErrorAtGM();
  *a1 = v2;
  return v2 == 0;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_22(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_23(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_24(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_25(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_26(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_27(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t _FigHTTPRequestCreateWithNSURLSession_cold_28(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

void inEndpointStreamUtil_createSyncContext_cold_1(void *a1, uint64_t a2, void *a3)
{
  if (FigSignalErrorAtGM())
  {
    free(a1);
    a1 = 0;
  }

  *a3 = a1;
}

const void *MTSidebandVideoPropertiesGetValueForKey(uint64_t a1, const void *a2)
{
  if (a1 && a2)
  {
    return CFDictionaryGetValue(*(a1 + 24), a2);
  }

  else
  {
    return 0;
  }
}

void MTSidebandVideoPropertiesCreateMutable_cold_1(const void *a1, _DWORD *a2)
{
  OUTLINED_FUNCTION_0_27();
  *a2 = FigSignalErrorAtGM();

  CFRelease(a1);
}

uint64_t MTSidebandVideoPropertiesCreateMutable_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesCreateMutable_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesCopyAsDictionary_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesCopyAsDictionary_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesCopyAsDictionary_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesCreateFromDictionary_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesCreateFromDictionary_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesSetValue_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesSetValue_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesSetValue_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesSetValue_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesRemoveValue_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesRemoveValue_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t MTSidebandVideoPropertiesRemoveValue_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSidebandVideoPropertiesCopyAsFormatDescriptionExtensions_cold_1(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSidebandVideoPropertiesCopyAsFormatDescriptionExtensions_cold_2(_DWORD *a1)
{
  OUTLINED_FUNCTION_0_27();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSidebandVideoPropertiesCopyAsFormatDescriptionExtensions_cold_3(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSidebandVideoPropertiesCopyAsFormatDescriptionExtensions_cold_4(_DWORD *a1)
{
  OUTLINED_FUNCTION_1_19();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHLSSessionDataCopyChapterMetadataAndCopyErrorLogEntryInProcess(const void *a1, const void *Value, const __CFURL *a3, uint64_t a4, __CFArray **a5, void *a6, double a7)
{
  v81 = 0;
  v82 = 0;
  v80[0] = a3;
  v80[1] = a4;
  if (!CFEqual(a1, @"com.apple.hls.chapters"))
  {
    return 0;
  }

  if (!Value)
  {
    ErrorLogEntry = createErrorLogEntry(v80, "chapter data contains no data");
    v15 = 0;
LABEL_97:
    v16 = 0;
LABEL_105:
    OUTLINED_FUNCTION_3_94();
    Mutable = 0;
    goto LABEL_65;
  }

  v7 = *MEMORY[0x1E695E480];
  PathComponent = CFURLCreateCopyDeletingLastPathComponent(*MEMORY[0x1E695E480], a3);
  v15 = PathComponent;
  if (!PathComponent)
  {
    fig_log_get_emitter();
    ErrorLogEntry = FigSignalErrorAtGM();
    goto LABEL_97;
  }

  v16 = FigCFHTTPCreateURLString(PathComponent);
  if (!v16)
  {
    fig_log_get_emitter();
    v59 = FigSignalErrorAtGM();
LABEL_104:
    ErrorLogEntry = v59;
    goto LABEL_105;
  }

  v17 = CFGetTypeID(Value);
  if (v17 != CFDictionaryGetTypeID())
  {
    v59 = FigSessionDataParseJSONChapter(v80, Value, v16, a5, a7);
    goto LABEL_104;
  }

  if (CFDictionaryContainsKey(Value, @"chapters"))
  {
    Value = CFDictionaryGetValue(Value, @"chapters");
  }

  v18 = CFDictionaryGetValue(Value, @"chapter-list");
  if (!v18)
  {
    v60 = "Chapter array missing";
LABEL_103:
    v59 = createErrorLogEntry(v80, v60);
    goto LABEL_104;
  }

  v19 = v18;
  TypeID = CFArrayGetTypeID();
  if (TypeID != CFGetTypeID(v19))
  {
    v60 = "Chapter array is not an array";
    goto LABEL_103;
  }

  v61 = v8;
  v62 = a5;
  v21 = CFDictionaryGetValue(Value, @"locales");
  if (v21)
  {
    v22 = CFArrayGetTypeID();
    if (v22 != CFGetTypeID(v21))
    {
      v60 = "locale array is not an array";
      goto LABEL_103;
    }
  }

  v75 = v16;
  v23 = CFDictionaryGetValue(Value, @"nominal-image-resolutions");
  if (v23)
  {
    v24 = CFArrayGetTypeID();
    if (v24 != CFGetTypeID(v23))
    {
      ErrorLogEntry = createErrorLogEntry(v80, "image resolution array is not an array");
      OUTLINED_FUNCTION_3_94();
      Mutable = 0;
      goto LABEL_87;
    }
  }

  v63 = v15;
  v64 = a6;
  Mutable = CFArrayCreateMutable(v7, 0, MEMORY[0x1E695E9C0]);
  Count = CFArrayGetCount(v19);
  if (Count < 1)
  {
LABEL_62:
    v16 = v75;
    OUTLINED_FUNCTION_3_94();
    ErrorLogEntry = 0;
    if (v62)
    {
      *v55 = Mutable;
      Mutable = 0;
    }

    v15 = v63;
    a6 = v64;
    goto LABEL_65;
  }

  v26 = 0;
  v27 = 0;
  key = @"ChapterTime";
  v69 = @"ChapterDuration";
  v73 = @"comn";
  v74 = @"title";
  v65 = @"ChapterMetadataItems";
  v66 = v19;
  v28 = 0.0;
  theArray = Mutable;
  while (1)
  {
    ValueAtIndex = CFArrayGetValueAtIndex(v19, v26);
    memset(&v79, 0, sizeof(v79));
    memset(&v78, 0, sizeof(v78));
    valuePtr = 0.0;
    if (ValueAtIndex)
    {
      break;
    }

    ++v26;
LABEL_61:
    if (v26 == Count)
    {
      goto LABEL_62;
    }
  }

  v30 = ValueAtIndex;
  a5 = CFDictionaryCreateMutable(v7, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
  if (!a5)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_6_3();
    ErrorLogEntry = FigSignalErrorAtGM();
    v7 = 0;
    v15 = v63;
    a6 = v64;
LABEL_87:
    v16 = v75;
    goto LABEL_65;
  }

  v31 = CFDictionaryGetValue(v30, @"start");
  if (!v31)
  {
    v58 = "Missing start time for chapter metadata";
    goto LABEL_83;
  }

  v32 = v31;
  v33 = CFStringGetTypeID();
  if (v33 == CFGetTypeID(v32))
  {
    DoubleValue = CFStringGetDoubleValue(v32);
    valuePtr = DoubleValue;
  }

  else
  {
    v35 = CFNumberGetTypeID();
    if (v35 != CFGetTypeID(v32))
    {
      v58 = "illegal type for start time for chapter metadata";
      goto LABEL_83;
    }

    if (!CFNumberGetValue(v32, kCFNumberDoubleType, &valuePtr))
    {
      v58 = "illegal number for start time for chapter metadata";
      goto LABEL_83;
    }

    DoubleValue = valuePtr;
  }

  if (DoubleValue < 0.0)
  {
    v58 = "Negative start time not allowed.";
    goto LABEL_83;
  }

  CMTimeMakeWithSeconds(&v78, DoubleValue, 100000);
  v36 = OUTLINED_FUNCTION_1_120(v78.epoch, v61, v62, v63, v64, v65, v66, key, theArray, v69, theDict, Count, v73, v74, v75, v78.value, *&v78.timescale, v76.epoch);
  CFDictionaryAddValue(a5, key, v36);
  if (v36)
  {
    CFRelease(v36);
  }

  if (v27)
  {
    if (valuePtr > v28)
    {
      CMTimeMakeWithSeconds(&v79, valuePtr - v28, 100000);
      v37 = OUTLINED_FUNCTION_1_120(v79.epoch, v61, v62, v63, v64, v65, v66, key, theArray, v69, theDicta, Count, v73, v74, v75, v79.value, *&v79.timescale, v76.epoch);
      CFDictionaryAddValue(v27, v69, v37);
      if (v37)
      {
        CFRelease(v37);
      }

      goto LABEL_32;
    }

    v58 = "Chapter starts before previous chapter";
LABEL_83:
    ErrorLogEntry = createErrorLogEntry(v80, v58);
    v7 = 0;
    v15 = v63;
    a6 = v64;
    v16 = v75;
    Mutable = theArray;
    goto LABEL_65;
  }

LABEL_32:
  v28 = valuePtr;
  if (++v26 != Count)
  {
    goto LABEL_36;
  }

  if (valuePtr >= a7)
  {
    v58 = "last chapter start time exceeds playlist duration";
    goto LABEL_83;
  }

  CMTimeMakeWithSeconds(&v76, a7 - valuePtr, 1000000);
  v79 = v76;
  v38 = OUTLINED_FUNCTION_1_120(v76.epoch, v61, v62, v63, v64, v65, v66, key, theArray, v69, theDicta, Count, v73, v74, v75, v76.value, *&v76.timescale, v76.epoch);
  CFDictionaryAddValue(a5, v69, v38);
  if (v38)
  {
    CFRelease(v38);
  }

LABEL_36:
  theDict = a5;
  v39 = CFDictionaryGetValue(v30, @"titles");
  a5 = v7;
  v7 = CFArrayCreateMutable(v7, 0, MEMORY[0x1E695E9C0]);
  if (v7)
  {
    if (v21 && v39 && CFArrayGetCount(v21) >= 1)
    {
      v40 = 0;
      do
      {
        v41 = CFArrayGetValueAtIndex(v21, v40);
        if (v41)
        {
          v42 = v41;
          v43 = CFDictionaryGetValue(v39, v41);
          if (v43)
          {
            ChapterMetadataArtworkItem = createMetadataItem(v74, v43, v42, v73, &v82);
            if (ChapterMetadataArtworkItem)
            {
              goto LABEL_85;
            }

            v45 = v82;
            CFArrayAppendValue(v7, v82);
            if (v45)
            {
              CFRelease(v45);
              v82 = 0;
            }
          }
        }

        ++v40;
      }

      while (v40 < CFArrayGetCount(v21));
    }

    v46 = CFDictionaryGetValue(v30, @"images");
    if (v23)
    {
      v47 = v46;
      if (v46)
      {
        if (CFArrayGetCount(v23) >= 1)
        {
          for (i = 0; i < CFArrayGetCount(v23); ++i)
          {
            v49 = CFArrayGetValueAtIndex(v23, i);
            if (v49)
            {
              v50 = v49;
              v76.value = 0;
              v51 = CFDictionaryGetValue(v47, v49);
              if (!v51 || (v52 = v51, v53 = CFGetTypeID(v51), v53 != CFDictionaryGetTypeID()))
              {
                ChapterMetadataArtworkItem = createErrorLogEntry(v80, "images entry is not a dictionary");
                goto LABEL_85;
              }

              ChapterMetadataArtworkItem = createChapterMetadataArtworkItem(v80, v50, v52, v75, &v76);
              if (ChapterMetadataArtworkItem)
              {
                goto LABEL_85;
              }

              v54 = v76.value;
              CFArrayAppendValue(v7, v76.value);
              if (v54)
              {
                CFRelease(v54);
              }
            }
          }
        }
      }
    }

    v27 = theDict;
    if (CFArrayGetCount(v7) >= 1)
    {
      CFDictionaryAddValue(theDict, v65, v7);
    }

    CFRelease(v7);
    Mutable = theArray;
    CFArrayAppendValue(theArray, theDict);
    CFRelease(theDict);
    v7 = a5;
    v19 = v66;
    goto LABEL_61;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_6_3();
  ChapterMetadataArtworkItem = FigSignalErrorAtGM();
LABEL_85:
  ErrorLogEntry = ChapterMetadataArtworkItem;
  v15 = v63;
  a6 = v64;
  v16 = v75;
  Mutable = theArray;
  a5 = theDict;
LABEL_65:
  if (v82)
  {
    CFRelease(v82);
  }

  if (a5)
  {
    CFRelease(a5);
  }

  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (v7)
  {
    CFRelease(v7);
  }

  if (v15)
  {
    CFRelease(v15);
  }

  if (v16)
  {
    CFRelease(v16);
  }

  if (a6)
  {
    *a6 = v81;
  }

  else if (v81)
  {
    CFRelease(v81);
  }

  return ErrorLogEntry;
}

uint64_t FigSessionDataParseJSONChapter_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSessionDataParseJSONChapter_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t createMetadataItem_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t createChapterMetadataArtworkItem_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigHLSSessionDataCopyMetadataEntryInProcess_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t sdpp_AddMetadataItemToChapterDictionary_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDCP_FindAtomData(uint64_t a1, uint64_t a2, int a3, uint64_t a4, unint64_t a5)
{
  if (a4 | a5)
  {
    result = FigAtomStreamInitWithByteStream();
    if (result)
    {
      return result;
    }

    while (1)
    {
      result = FigAtomStreamGetCurrentAtomTypeAndDataLength();
      if (result)
      {
        return result;
      }

      if (!a3)
      {
        break;
      }

      LODWORD(result) = FigAtomStreamAdvanceToNextAtom();
      if (result)
      {
        if (result == -12890)
        {
          return 0;
        }

        else
        {
          return result;
        }
      }
    }

    if (a4)
    {
      result = FigAtomStreamGetCurrentAtomDataGlobalOffset();
      if (!a5 || result)
      {
        return result;
      }
    }

    else if (!a5)
    {
      return 0;
    }

    result = 0;
    *a5 = 0;
    return result;
  }

  fig_log_get_emitter();

  return FigSignalErrorAtGM();
}

uint64_t FigDCP_CopyAtomDataFromCacheFile(uint64_t a1, uint64_t a2, int a3, __CFData **a4)
{
  capacity = 0;
  v16 = 0;
  AtomData = FigDCP_FindAtomData(a1, a2, a3, &v16, &capacity);
  if (AtomData)
  {
    return AtomData;
  }

  Mutable = CFDataCreateMutable(*MEMORY[0x1E695E480], capacity);
  if (!Mutable)
  {
    fig_log_get_emitter();
    return FigSignalErrorAtGM();
  }

  v8 = Mutable;
  CFDataSetLength(Mutable, capacity);
  v9 = capacity;
  v10 = v16;
  MutableBytePtr = CFDataGetMutableBytePtr(v8);
  v12 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v12)
  {
    v13 = 4294954514;
    goto LABEL_7;
  }

  v13 = v12(a1, v9, v10, MutableBytePtr, 0);
  if (v13)
  {
LABEL_7:
    CFRelease(v8);
    return v13;
  }

  *a4 = v8;
  return v13;
}

uint64_t FigDCP_CopyIDFromCacheFile(uint64_t a1, uint64_t a2, void *a3)
{
  data = 0;
  v4 = FigDCP_CopyAtomDataFromCacheFile(a1, a2, 1937008996, &data);
  if (v4)
  {
    return v4;
  }

  v5 = data;
  v6 = CFPropertyListCreateWithData(*MEMORY[0x1E695E480], data, 0, 0, 0);
  *a3 = v6;
  if (v6)
  {
    v7 = 0;
    if (!v5)
    {
      return v7;
    }

    goto LABEL_6;
  }

  fig_log_get_emitter();
  OUTLINED_FUNCTION_20_0();
  v7 = FigSignalErrorAtGM();
  if (v5)
  {
LABEL_6:
    CFRelease(v5);
  }

  return v7;
}

uint64_t FigDCP_GetCacheFileVersion(uint64_t a1, uint64_t a2, _DWORD *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  result = OUTLINED_FUNCTION_4_96(a1, a2, a3, a4, a5, a6, a7, a8, v12, v13, v14, v15);
  if (!result)
  {
    if (v14 == 4)
    {
      v11 = *(*(CMBaseObjectGetVTable() + 16) + 8);
      if (v11)
      {
        result = v11(a1, 4, v15, &v13 + 4, 0);
        if (a3)
        {
          if (!result)
          {
            *a3 = bswap32(HIDWORD(v13));
          }
        }
      }

      else
      {
        return 4294954514;
      }
    }

    else
    {
      fig_log_get_emitter();
      return FigSignalErrorAtGM();
    }
  }

  return result;
}

uint64_t FigDCP_InitializeDiskCache()
{
  v0 = MEMORY[0x1EEE9AC00]();
  v27 = *MEMORY[0x1E69E9840];
  v2 = (v0 + 40);
  if (*(v0 + 40))
  {
    return 0;
  }

  v3 = v1;
  v4 = v0;
  *(v0 + 90) = 1;
  v5 = FigShared_CopyDiskCacheParams(*(v0 + 8));
  if (v5)
  {
    return v5;
  }

  v7 = (v4 + 32);
  v6 = *(v4 + 32);
  if (v6)
  {
    CFRelease(v6);
    *v7 = 0;
  }

  v8 = FigShared_CheckOutOfDiskCache(*(v4 + 8));
  v9 = v8;
  if (v3 || !v8)
  {
    if (v8)
    {
LABEL_11:
      v16 = *(v4 + 64);
      if (v16)
      {
        CFRelease(v16);
        *(v4 + 64) = 0;
      }

      if (*v7)
      {
        CFRelease(*v7);
        *v7 = 0;
      }

LABEL_15:
      if (*(v4 + 64))
      {
        return v9;
      }

      bzero(v26, 0x2000uLL);
      *(v4 + 72) = 0x200000000002;
      if (*(v4 + 40))
      {
        if (*(v4 + 48))
        {
          CFRelease(*(v4 + 48));
          *(v4 + 48) = 0;
        }

        FigFileForkClose();
        *v2 = 0;
      }

      if (*v7)
      {
        CFRelease(*v7);
        *v7 = 0;
      }

      v9 = FigDCP_NewDiskCacheFile(0, *(v4 + 90), (v4 + 32));
      if (v9)
      {
        if (v9 == 69 || v9 == 28)
        {
          FigShared_MakeRoomInDiskCache(*(v4 + 8));
        }

        return v9;
      }

      v5 = FigByteStreamCreateFromOpenFile();
      if (!v5)
      {
        v18 = *(v4 + 48);
        v19 = *(v4 + 76);
        v20 = *(*(CMBaseObjectGetVTable() + 16) + 16);
        if (!v20)
        {
          return 4294954514;
        }

        v5 = v20(v18, v19, 0, v26, 0);
        if (!v5)
        {
          v5 = FigShared_CheckIntoAndOutOfDiskCache(*(v4 + 8));
          if (!v5)
          {
            v21 = *v4;
            *v4 = 0;
            if (v21)
            {
              CFRelease(v21);
            }

            return 0;
          }
        }
      }

      return v5;
    }

    CacheFileVersion = FigFileForkOpenMainByCFURL();
    if (CacheFileVersion)
    {
      goto LABEL_10;
    }

    CacheFileVersion = FigByteStreamCreateFromOpenFile();
    if (CacheFileVersion)
    {
      goto LABEL_10;
    }

    CacheFileVersion = FigDCP_GetCacheFileVersion(*(v4 + 48), 0, (v4 + 72), v11, v12, v13, v14, v15);
    if (CacheFileVersion)
    {
      goto LABEL_10;
    }

    v23 = *(v4 + 72);
    if (v23 == 1)
    {
      v24 = 4096;
    }

    else
    {
      if (v23 != 2)
      {
        fig_log_get_emitter();
        CacheFileVersion = FigSignalErrorAtGM();
        if (!CacheFileVersion)
        {
          goto LABEL_48;
        }

LABEL_10:
        v9 = CacheFileVersion;
        goto LABEL_11;
      }

      v24 = 0x2000;
    }

    *(v4 + 76) = v24;
LABEL_48:
    CacheFileVersion = FigDCP_CopyIDFromCacheFile(*(v4 + 48), 0, (v4 + 64));
    if (!CacheFileVersion)
    {
      CacheFileVersion = FigDCP_FindAtomData(*(v4 + 48), 0, 1937007475, 0, v4 + 24);
      if (!CacheFileVersion)
      {
        v25 = *v4;
        *v4 = 0;
        if (v25)
        {
          CFRelease(v25);
        }

        v9 = 0;
        goto LABEL_15;
      }
    }

    goto LABEL_10;
  }

  return v9;
}

uint64_t FigLimitedDiskCacheProvider_SetProperty(const void *a1, const void *a2, const void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    goto LABEL_16;
  }

  v7 = DerivedStorage;
  if (*(DerivedStorage + 88))
  {
    goto LABEL_16;
  }

  if (!CFEqual(a2, @"CacheIdentifier"))
  {
    if (!CFEqual(a2, @"CacheMap"))
    {
      if (CFEqual(a2, @"CacheBlockSize"))
      {
        if (a3)
        {
          v8 = CFGetTypeID(a3);
          if (v8 == CFNumberGetTypeID())
          {
            v9 = (v7 + 80);
LABEL_14:
            CFNumberGetValue(a3, kCFNumberSInt32Type, v9);
            return 0;
          }
        }
      }

      else if (CFEqual(a2, @"CacheMapEntrySize"))
      {
        if (a3)
        {
          v10 = CFGetTypeID(a3);
          if (v10 == CFNumberGetTypeID())
          {
            v9 = (v7 + 84);
            goto LABEL_14;
          }
        }
      }

      else
      {
        if (CFEqual(a2, @"CacheSize"))
        {
          return 4294954509;
        }

        if (!CFEqual(a2, @"NoPersistentCache"))
        {
          return 4294954512;
        }

        if (a3)
        {
          v30 = CFGetTypeID(a3);
          if (v30 == CFBooleanGetTypeID())
          {
            Value = CFBooleanGetValue(a3);
            result = 0;
            *(v7 + 91) = Value;
            return result;
          }
        }
      }

      goto LABEL_16;
    }

    CFGetAllocator(a1);
    result = FigDCP_InitializeDiskCache();
    if (result)
    {
      return result;
    }

    v14 = *(v7 + 40);
    if (!v14)
    {
      goto LABEL_16;
    }

    if (!a3)
    {
LABEL_65:
      result = FigDCP_TruncateFile(v14, 0);
      *(v7 + 24) = 0;
      return result;
    }

    v15 = CFGetTypeID(a3);
    if (v15 == CFDataGetTypeID())
    {
      v46 = 0;
      cf = 0;
      v16 = bswap32(*(v7 + 72));
      v44 = 0;
      v45 = 0;
      v43 = v16;
      v17 = *(v7 + 24);
      err = 0;
      v18 = *MEMORY[0x1E695E480];
      v19 = FigByteStreamCreateFromOpenFile();
      if (v19)
      {
        goto LABEL_77;
      }

      v20 = v17 - 4294967288;
      if (v20 >= 0xFFFFFFFF00000000)
      {
        v21 = -8;
      }

      else
      {
        v21 = -16;
      }

      v46 = bswap32(*(v7 + 76) + v21) | 0x6965726600000000;
      v22 = *(*(CMBaseObjectGetVTable() + 16) + 16);
      if (v22)
      {
        v19 = v22(cf, 8, 0, &v46, 0);
        if (v19)
        {
          goto LABEL_77;
        }

        if (v20 > 0xFFFFFFFEFFFFFFFFLL)
        {
          v46 = bswap32(*(v7 + 24) + 8) | 0x7363747300000000;
          v32 = cf;
          v33 = *(v7 + 76);
          v25 = *(*(CMBaseObjectGetVTable() + 16) + 16);
          if (v25)
          {
            v26 = v33 - 8;
            v27 = &v46;
            v28 = v32;
            v29 = 8;
LABEL_51:
            Code = v25(v28, v29, v26, v27, 0);
            if (!Code)
            {
              v19 = FigDCP_TruncateFile(*(v7 + 40), *(v7 + 24) + *(v7 + 76));
              if (!v19)
              {
                v35 = CFPropertyListCreateData(v18, *(v7 + 64), kCFPropertyListXMLFormat_v1_0, 0, &err);
                if (err)
                {
                  v36 = CFErrorCopyFailureReason(err);
                  Code = CFErrorGetCode(err);
                  if (v36)
                  {
                    CFRelease(v36);
                  }

                  if (!v35)
                  {
                    goto LABEL_59;
                  }

                  goto LABEL_72;
                }

                if (v35)
                {
                  HIDWORD(v46) = 1684632691;
                  LODWORD(v46) = CFDataGetLength(v35) + 8;
                  v37 = cf;
                  BytePtr = CFDataGetBytePtr(v35);
                  v39 = FigDCP_WriteAtomToFile(v37, &v46, BytePtr);
                  if (!v39)
                  {
                    HIDWORD(v46) = 1953723507;
                    LODWORD(v46) = CFDataGetLength(a3) + 8;
                    v40 = cf;
                    v41 = CFDataGetBytePtr(a3);
                    v39 = FigDCP_WriteAtomToFile(v40, &v46, v41);
                    if (!v39)
                    {
                      v46 = 0x7A7265760000000CLL;
                      v39 = FigDCP_WriteAtomToFile(cf, &v46, &v43);
                    }
                  }

                  Code = v39;
LABEL_72:
                  CFRelease(v35);
                  goto LABEL_59;
                }

                fig_log_get_emitter();
                OUTLINED_FUNCTION_20_0();
                v19 = FigSignalErrorAtGM();
              }

LABEL_77:
              Code = v19;
            }

LABEL_59:
            if (cf)
            {
              CFRelease(cf);
            }

            if (err)
            {
              CFRelease(err);
            }

            if (!Code)
            {
              return 0;
            }

            v14 = *(v7 + 40);
            goto LABEL_65;
          }
        }

        else
        {
          v44 = 0x7363747301000000;
          v45 = bswap64(*(v7 + 24) + 16);
          v23 = cf;
          v24 = *(v7 + 76);
          v25 = *(*(CMBaseObjectGetVTable() + 16) + 16);
          if (v25)
          {
            v26 = v24 - 16;
            v27 = &v44;
            v28 = v23;
            v29 = 16;
            goto LABEL_51;
          }
        }
      }

      Code = -12782;
      goto LABEL_59;
    }

LABEL_16:
    fig_log_get_emitter();
    OUTLINED_FUNCTION_20_0();

    return FigSignalErrorAtGM();
  }

  CFGetAllocator(a1);
  result = FigDCP_InitializeDiskCache();
  if (result)
  {
    return result;
  }

  if (!*(v7 + 40))
  {
    goto LABEL_16;
  }

  v12 = *(v7 + 64);
  if (v12)
  {
    CFRelease(v12);
  }

  if (a3)
  {
    v13 = CFRetain(a3);
  }

  else
  {
    v13 = 0;
  }

  result = 0;
  *(v7 + 64) = v13;
  return result;
}

uint64_t FigDCP_GetCacheSizeLimit(uint64_t a1, void *a2)
{
  v17 = 0;
  v15 = 0;
  v16 = 0;
  v13 = 0;
  v14 = 0;
  v12 = 0;
  theArray = 0;
  if (a2)
  {
    CacheFileSize = FigShared_CopyDiskCacheParams(*(a1 + 8));
    if (CacheFileSize)
    {
      return CacheFileSize;
    }

    CacheFileSize = FigShared_GetCacheFileSize(*(a1 + 8));
    if (CacheFileSize)
    {
      return CacheFileSize;
    }

    v5 = FigShared_CopyDiskCacheCheckedInIDs(*(a1 + 8), &theArray);
    v6 = theArray;
    if (!v5)
    {
      if (theArray && CFArrayGetCount(theArray) >= 1)
      {
        v7 = 0;
        do
        {
          CFArrayGetValueAtIndex(theArray, v7);
          if (!FigShared_GetCacheFileSize(*(a1 + 8)))
          {
            v17 -= v14;
          }

          ++v7;
        }

        while (v7 < CFArrayGetCount(theArray));
      }

      v8 = v17;
      if (v17 < 0)
      {
        v8 = 0;
        v17 = 0;
      }

      v5 = 0;
      v9 = ((v16 - v8) & ~((v16 - v8) >> 63)) + v13;
      if (v9 >= v15)
      {
        v9 = v15;
      }

      *a2 = v9;
      v6 = theArray;
    }

    if (v6)
    {
      CFRelease(v6);
    }

    return v5;
  }

  else
  {
    fig_log_get_emitter();

    return FigSignalErrorAtGM();
  }
}

uint64_t FigDCP_WriteAtomToFile(uint64_t a1, _DWORD *a2, uint64_t a3)
{
  v23 = 0;
  if (*(*(CMBaseObjectGetVTable() + 16) + 8))
  {
    v6 = 0;
    do
    {
      v7 = OUTLINED_FUNCTION_3_95();
      if (v8(v7))
      {
        break;
      }

      v9 = v23;
      v10 = bswap32(v23);
      LODWORD(v23) = v10;
      if (v9 != 0x1000000 && v10 <= 7)
      {
        goto LABEL_8;
      }

      if (HIDWORD(v23) == 1768256102)
      {
        v12 = *a2;
        if (v10 == v12)
        {
          break;
        }

        if (v12 + 8 <= v10)
        {
          v18 = v10 - v12;
          LODWORD(v23) = bswap32(v10 - v12);
          if (!*(*(CMBaseObjectGetVTable() + 16) + 16))
          {
            return 4294954514;
          }

          v19 = OUTLINED_FUNCTION_3_95();
          result = v20(v19);
          if (result)
          {
            return result;
          }

          v6 += v18;
          break;
        }
      }

      else if (v9 == 0x1000000)
      {
        v22 = 0;
        v13 = *(*(CMBaseObjectGetVTable() + 16) + 8);
        if (!v13)
        {
          return 4294954514;
        }

        result = v13(a1, 8, v6 + 8, &v22, 0);
        if (result)
        {
          return result;
        }

        v10 = bswap64(v22);
        v22 = v10;
        if (v10 <= 0xF)
        {
LABEL_8:
          fig_log_get_emitter();
          OUTLINED_FUNCTION_1_4();
          return FigSignalErrorAtGM();
        }
      }

      v6 += v10;
    }

    while (*(*(CMBaseObjectGetVTable() + 16) + 8));
  }

  else
  {
    v6 = 0;
  }

  v14 = *a2;
  *a2 = bswap32(v14);
  if (*(*(CMBaseObjectGetVTable() + 16) + 16))
  {
    v15 = OUTLINED_FUNCTION_3_95();
    result = v16(v15);
    if (result)
    {
      return result;
    }

    v17 = *(*(CMBaseObjectGetVTable() + 16) + 16);
    if (v17)
    {
      return v17(a1, v14 - 8, v6 + 8, a3, 0);
    }
  }

  return 4294954514;
}

uint64_t FigLimitedDiskCacheProvider_GetBacking(const void *a1, uint64_t a2, uint64_t a3, unint64_t a4, unint64_t a5)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (*(DerivedStorage + 88) || !(a4 | a5))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_4();
    FigSignalErrorAtGM();
    return 0;
  }

  v10 = DerivedStorage;
  CFGetAllocator(a1);
  if (FigDCP_InitializeDiskCache() || !*(v10 + 40) || *(v10 + 89))
  {
    return 0;
  }

  v11 = *(v10 + 24) + a2;
  v12 = *(v10 + 80);
  v13 = v11 + *(v10 + 76);
  if (v12)
  {
    v14 = *(v10 + 84);
    if (v14)
    {
      v13 += (v11 + v12 - 1) / v12 * v14;
    }
  }

  if (FigShared_ReserveDiskCacheBacking(*(v10 + 8), *v10, v13))
  {
    return 0;
  }

  v16 = *(v10 + 56);
  v17 = *(v10 + 24) + a2;
  v18 = v17 + *(v10 + 76);
  v19 = v16 - 0x100000;
  v20 = (v17 + *(v10 + 80) - 1) / *(v10 + 80);
  do
  {
    v21 = *(v10 + 84);
    v22 = v18;
    if (v21)
    {
      v22 = v18 + v20 * v21;
    }

    v19 += 0x100000;
  }

  while (v22 > v19);
  if (v19 > v16)
  {
    *(v10 + 56) = v19;
    v23 = FigDCP_TruncateFile(*(v10 + 40), v19);
    if (v23 == 69 || v23 == 28)
    {
      result = 0;
      *(v10 + 89) = 1;
      return result;
    }

    if (v23)
    {
      return 0;
    }
  }

  if (a4)
  {
    *a4 = *(v10 + 40);
  }

  v25 = *(v10 + 24);
  if (a5)
  {
    *a5 = v25 + *(v10 + 76);
    v25 = *(v10 + 24);
  }

  *(v10 + 24) = v25 + a2;
  return 1;
}

uint64_t FigLimitedDiskCacheProvider_GetBackingFile(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  CFGetAllocator(a1);
  FigDCP_InitializeDiskCache();
  return *(DerivedStorage + 40);
}

uint64_t FigLimitedDiskCacheProviderCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLimitedDiskCacheProviderCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLimitedDiskCacheProvider_CopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigLimitedDiskCacheProvider_CopyProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDCP_NewDiskCacheFile_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDCP_NewDiskCacheFile_cold_2(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

void serializeOneAttributeToCSSProperty(void *key, uint64_t a2, uint64_t a3)
{
  if (*(a3 + 16) || !*a3)
  {
    return;
  }

  Value = CFDictionaryGetValue(*a3, key);
  if (!Value)
  {
    OUTLINED_FUNCTION_239();
    v8 = FigSignalErrorAtGM();
    Mutable = 0;
    goto LABEL_14;
  }

  v6 = Value;
  Mutable = CFDictionaryCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9D8], 0);
  if (!Mutable)
  {
    goto LABEL_13;
  }

  v8 = v6(a2, Mutable);
  if (v8)
  {
LABEL_15:
    *(a3 + 16) = v8;
LABEL_16:
    if (!Mutable)
    {
      return;
    }

    goto LABEL_9;
  }

  v9 = CFDictionaryGetValue(Mutable, @"name");
  v10 = CFDictionaryGetValue(Mutable, @"value");
  if (!v9 || !v10)
  {
LABEL_13:
    OUTLINED_FUNCTION_239();
    v8 = FigSignalErrorAtGM();
LABEL_14:
    if (!v8)
    {
      goto LABEL_16;
    }

    goto LABEL_15;
  }

  CFStringAppendFormat(*(a3 + 8), 0, @"%@:%@;\n", v9, v10);
LABEL_9:

  CFRelease(Mutable);
}

uint64_t FigVTTStyleCreate_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTStyle_GetNodeType_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTStyle_copyNodeDocumentSerialization_cold_1(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTStyle_copyNodeDocumentSerialization_cold_2(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTStyle_copyNodeDocumentSerialization_cold_3(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t figVTTStyle_copyNodeDocumentSerialization_cold_4(_DWORD *a1)
{
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDCP_CheckCacheFileVersion(uint64_t a1, uint64_t a2)
{
  v7 = 0;
  v8 = 0;
  v6 = 0;
  result = FigDCP_FindAtomData(a1, a2, 1986359930, &v8, &v7);
  if (!result)
  {
    if (v7 != 4)
    {
LABEL_9:
      fig_log_get_emitter();
      OUTLINED_FUNCTION_0_4();
      return FigSignalErrorAtGM();
    }

    v4 = v8;
    v5 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (v5)
    {
      result = v5(a1, 4, v4, &v6, 0);
      if (!result)
      {
        if (v6 == 0x1000000)
        {
          return 0;
        }

        goto LABEL_9;
      }
    }

    else
    {
      return 4294954514;
    }
  }

  return result;
}

BOOL FigDCP_IsFileEmpty(uint64_t a1, void *a2)
{
  number = 0;
  cf = 0;
  valuePtr = 0;
  v3 = *MEMORY[0x1E695E480];
  if (FigByteStreamCreateFromOpenFile() || (CMBaseObject = CMByteStreamGetCMBaseObject(), (v5 = *(*(CMBaseObjectGetVTable() + 8) + 48)) == 0) || v5(CMBaseObject, *MEMORY[0x1E695FF78], v3, &number))
  {
    v6 = 0;
  }

  else
  {
    CFNumberGetValue(number, kCFNumberSInt64Type, &valuePtr);
    v6 = valuePtr == 0;
    if (a2)
    {
      *a2 = valuePtr;
    }
  }

  if (number)
  {
    CFRelease(number);
  }

  if (cf)
  {
    CFRelease(cf);
  }

  return v6;
}

uint64_t FigDCP_RemoveCacheMap(uint64_t a1, off_t a2)
{
  FigSimpleMutexLock();
  v4 = CFDictionaryContainsKey(_MergedGlobals_86, *(a1 + 8));
  FigSimpleMutexUnlock();
  if (v4)
  {
    return 4294954754;
  }

  result = *(a1 + 24);
  if (result)
  {
    DarwinFileDesc = FigFileGetDarwinFileDesc();
    fremovexattr(DarwinFileDesc, "com.apple.coremedia.cachemap.offset", 0);
    v7 = *(a1 + 32);
    if (v7)
    {
      CFRelease(v7);
      *(a1 + 32) = 0;
    }

    v8 = *(a1 + 24);

    return FigDCP_TruncateFile(v8, a2);
  }

  return result;
}

uint64_t FigFullDownloadDiskCacheProviderCreate_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProviderCreate_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProviderCreate_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProviderCreate_cold_4(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProviderCreate_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProviderCreate_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProvider_CopyProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProvider_CopyProperty_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProvider_SetProperty_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProvider_SetProperty_cold_2(uint64_t a1, CFNumberRef number)
{
  CFNumberGetValue(number, kCFNumberSInt64Type, (a1 + 16));
  bzero(&v7, 0x90uLL);
  DarwinFileDesc = FigFileGetDarwinFileDesc();
  v4 = *(a1 + 16);
  result = fstat(DarwinFileDesc, &v7);
  if (!result)
  {
    v4 = *(a1 + 16) - (v7.st_blocks << 9);
  }

  if (v4 >= 1 && v4 <= *(a1 + 16))
  {
    v6[0] = 0x300000008;
    v6[1] = 0;
    v6[2] = v4;
    v6[3] = 0;
    return fcntl(DarwinFileDesc, 42, v6);
  }

  return result;
}

uint64_t FigFullDownloadDiskCacheProvider_SetProperty_cold_3(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigDCP_WriteOutCacheFile_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigFullDownloadDiskCacheProvider_GetBacking_cold_1()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigFullDownloadDiskCacheProvider_GetBacking_cold_2()
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();

  return FigSignalErrorAtGM();
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptions(const __CFURL *a1, unsigned int a2, const __CFDictionary *a3, void *a4, void *a5, void *a6, void *a7, void *a8)
{
  cf = 0;
  if (_MergedGlobals_87 != -1)
  {
    dispatch_once_f(&_MergedGlobals_87, 0, fbsfCompletionRegisterClass);
  }

  Instance = _CFRuntimeCreateInstance();
  if (!Instance)
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_11();
    v25 = FigSignalErrorAtGM();
    v16 = 0;
    goto LABEL_33;
  }

  v16 = FigCFWeakReferenceHolderCreateWithReferencedObject();
  if (!v16 || (v17 = FigSemaphoreCreate(), (*(Instance + 40) = v17) == 0))
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_1_11();
LABEL_45:
    v25 = FigSignalErrorAtGM();
    goto LABEL_33;
  }

  cf = CFRetain(v16);
  *(Instance + 64) = a7 != 0;
  if (FigThreadRegisterAbortAction())
  {
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_2();
    goto LABEL_45;
  }

  CFRetain(v16);
  StreamFromURLWithOptionsAsync = FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync(a1, a2, a3, fbsf_createStreamFromURL_callback, v16);
  if (StreamFromURLWithOptionsAsync)
  {
    v25 = StreamFromURLWithOptionsAsync;
    CFRelease(v16);
LABEL_48:
    FigThreadUnregisterAbortAction();
    goto LABEL_33;
  }

  v19 = FigSemaphoreWaitRelative();
  if (v19)
  {
    v25 = v19;
    goto LABEL_48;
  }

  FigThreadUnregisterAbortAction();
  if (((a2 >> 5) & 0x1E) != 0 && *(Instance + 48) && !FigIsReferenceAllowedBySecurityPolicy())
  {
    v25 = 4294955014;
    *(Instance + 24) = -12282;
    fig_log_get_emitter();
    OUTLINED_FUNCTION_3_2();
    FigSignalErrorAtGM();
  }

  else
  {
    if (a4)
    {
      v20 = *(Instance + 16);
      if (v20)
      {
        v20 = CFRetain(v20);
      }

      *a4 = v20;
    }

    if (a8)
    {
      v21 = *(Instance + 32);
      if (v21)
      {
        v21 = CFRetain(v21);
      }

      *a8 = v21;
    }

    if (a5)
    {
      v22 = *(Instance + 48);
      if (v22)
      {
        v22 = CFRetain(v22);
      }

      *a5 = v22;
    }

    if (a6)
    {
      v23 = *(Instance + 56);
      if (v23)
      {
        v23 = CFRetain(v23);
      }

      *a6 = v23;
    }

    if (a7)
    {
      v24 = *(Instance + 72);
      if (v24)
      {
        v24 = CFRetain(v24);
      }

      *a7 = v24;
    }

    v25 = *(Instance + 24);
  }

LABEL_33:
  if (cf)
  {
    CFRelease(cf);
  }

  if (Instance)
  {
    CFRelease(Instance);
  }

  if (v16)
  {
    CFRelease(v16);
  }

  return v25;
}

void fbsfCreateStreamAbortHandler(uint64_t a1)
{
  v2 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v2)
  {
    v3 = v2;
    *(a1 + 8) = -12785;
    FigSemaphoreSignal();

    CFRelease(v3);
  }
}

void fbsf_createStreamFromURL_callback(const void *a1, const void *a2, int Code, const void *a4, const void *a5, const void *a6)
{
  v12 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (!v12)
  {
    goto LABEL_23;
  }

  v13 = v12;
  if (a2)
  {
    CFRetain(a2);
    *(v13 + 16) = a2;
    if (Code)
    {
      if (!a4)
      {
LABEL_27:
        CMBaseObject = CMByteStreamGetCMBaseObject();
        v20 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (v20)
        {
          v20(CMBaseObject, *MEMORY[0x1E6960DD8], *MEMORY[0x1E695E480], v13 + 32);
        }

        goto LABEL_16;
      }

      goto LABEL_15;
    }

    cf = 0;
    if (*(v13 + 64))
    {
      v14 = CMByteStreamGetCMBaseObject();
      v15 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v15)
      {
        v15(v14, @"CRABS_ReadAheadAssertion", 0, v13 + 72);
      }
    }

    v16 = CMByteStreamGetCMBaseObject();
    v17 = *(*(CMBaseObjectGetVTable() + 8) + 48);
    if (v17)
    {
      Code = v17(v16, *MEMORY[0x1E695FF78], 0, &cf);
      if (cf)
      {
        CFRelease(cf);
      }
    }

    else
    {
      Code = -12782;
    }
  }

  if (Code)
  {
    if (a4)
    {
LABEL_15:
      *(v13 + 32) = CFRetain(a4);
      goto LABEL_16;
    }

    if (a2)
    {
      goto LABEL_27;
    }
  }

LABEL_16:
  v18 = *(v13 + 32);
  if (v18)
  {
    Code = CFErrorGetCode(v18);
  }

  *(v13 + 24) = Code;
  if (a5)
  {
    *(v13 + 48) = CFRetain(a5);
  }

  if (a6)
  {
    *(v13 + 56) = CFRetain(a6);
  }

  FigSemaphoreSignal();
  CFRelease(v13);
LABEL_23:
  if (a1)
  {
    CFRelease(a1);
  }
}

void fbfs_FigHTTPOpenCallback(uint64_t a1, uint64_t a2, int a3)
{
  v27 = 0;
  v28 = 0;
  v26 = 0;
  FigThreadUnregisterAbortAction();
  if (*(a1 + 48))
  {
    v5 = *MEMORY[0x1E695E480];
    if (*(*(CMBaseObjectGetVTable() + 8) + 48))
    {
      v6 = OUTLINED_FUNCTION_188();
      v7(v6);
    }

    if (*(*(CMBaseObjectGetVTable() + 8) + 48))
    {
      v8 = OUTLINED_FUNCTION_188();
      v9(v8);
    }

    if (!a3)
    {
      goto LABEL_12;
    }

    if (*(*(CMBaseObjectGetVTable() + 8) + 48))
    {
      v10 = OUTLINED_FUNCTION_188();
      v11(v10);
    }

    if (*(a1 + 92))
    {
      a3 = *(a1 + 96);
    }

    if (!a3)
    {
LABEL_12:
      v12 = *(a1 + 48);
      v13 = *(*(CMBaseObjectGetVTable() + 8) + 48);
      if (v13)
      {
        v13(v12, @"FBF_EntireLengthAvailableOnDemand", v5, &v26);
      }

      v14 = *MEMORY[0x1E695E4D0];
      if (v26 == *MEMORY[0x1E695E4D0])
      {
        Mutable = CFDictionaryCreateMutable(v5, 0, MEMORY[0x1E695E9D8], MEMORY[0x1E695E9E8]);
        v22 = Mutable;
        if ((*(a1 + 72) & 0x10) != 0)
        {
          CFDictionarySetValue(Mutable, @"DoNotLogURLs", v14);
        }

        LOWORD(a3) = FigByteStreamCreateForByteFlume(*(a1 + 48), v5, v22, &v27);
        if (v22)
        {
          CFRelease(v22);
        }
      }

      else
      {
        if ((*(a1 + 72) & 4) != 0)
        {
          v15 = *(a1 + 32);
          if (v15)
          {
            FigBaseObject = FigDiskCacheProviderGetFigBaseObject(v15);
            v17 = *(*(CMBaseObjectGetVTable() + 8) + 56);
            if (v17)
            {
              v17(FigBaseObject, @"NoPersistentCache", v14);
            }
          }
        }

        LOWORD(a3) = FigCRABSCreate(*(a1 + 48), 0, *(a1 + 56), *(a1 + 32), *(a1 + 72), &v28);
        if (!a3)
        {
          v18 = FigCRABSGetByteStream(v28);
          if (v18)
          {
            v18 = CFRetain(v18);
          }

          v27 = v18;
          CMByteStreamGetCMBaseObject();
          if (*(*(CMBaseObjectGetVTable() + 8) + 56))
          {
            v19 = OUTLINED_FUNCTION_188();
            v20(v19);
          }
        }
      }
    }

    (*a1)(*(a1 + 8), v27, a3, 0, 0, 0);
    if (a3)
    {
      v23 = FigByteFlumeGetFigBaseObject(*(a1 + 48));
      if (v23)
      {
        v24 = v23;
        v25 = *(*(CMBaseObjectGetVTable() + 8) + 24);
        if (v25)
        {
          v25(v24);
        }
      }
    }

    fbfs_FreeFigHTTPOpenCompletion(a1);
    if (v28)
    {
      CFRelease(v28);
    }

    if (v27)
    {
      CFRelease(v27);
    }

    if (v26)
    {
      CFRelease(v26);
    }
  }
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync_cold_1(uint64_t a1, _DWORD *a2)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a2 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync_cold_2(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync_cold_5(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync_cold_6(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync_cold_7(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync_cold_8(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURLWithOptionsAsync_cold_9(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURL_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigByteStreamFactoryCreateStreamFromURLAsync_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t fbfs_CreateFlumeAsync_cold_1(_DWORD *a1)
{
  fig_log_get_emitter();
  OUTLINED_FUNCTION_0_4();
  result = FigSignalErrorAtGM();
  *a1 = result;
  return result;
}

uint64_t FigSteeringManifestCreateRemote()
{
  v3 = 0;
  v4 = &v3;
  v5 = 0x2000000000;
  v6 = 0;
  block[0] = MEMORY[0x1E69E9820];
  block[1] = 0x40000000;
  block[2] = __FigSteeringManifest_ensureClientEstablished_block_invoke;
  block[3] = &unk_1E748F230;
  block[4] = &v3;
  if (qword_1ED4CAFF8 != -1)
  {
    dispatch_once(&qword_1ED4CAFF8, block);
  }

  v0 = *(v4 + 6);
  _Block_object_dispose(&v3, 8);
  if (!v0)
  {
    FigXPCCreateBasicMessage();
    fig_log_get_emitter();
    v0 = FigSignalErrorAtGM();
  }

  FigXPCRelease();
  FigXPCRelease();
  return v0;
}

uint64_t FigVideoCompositionWindowGetFromSerializedConfigurationForTrack(CFTypeRef cf, int a2, void *__dst)
{
  v4 = *MEMORY[0x1E6960CC0];
  *&__src[0].value = v4;
  v5 = *(MEMORY[0x1E6960CC0] + 16);
  __src[0].epoch = v5;
  *&__src[1].value = v4;
  __src[1].epoch = v5;
  *&__src[2].value = v4;
  __src[2].epoch = v5;
  *&__src[3].value = v4;
  __src[3].epoch = v5;
  if (!__dst)
  {
    return 0;
  }

  if (!cf)
  {
LABEL_37:
    memcpy(__dst, __src, 0x60uLL);
    return 0;
  }

  v32 = v4;
  v9 = CFGetTypeID(cf);
  if (v9 == CFArrayGetTypeID())
  {
    Count = CFArrayGetCount(cf);
    if (Count >= 1)
    {
      v11 = Count;
      v12 = 0;
      while (1)
      {
        ValueAtIndex = CFArrayGetValueAtIndex(cf, v12);
        v38 = 0;
        if (!ValueAtIndex)
        {
          return FigSignalErrorAtGM();
        }

        v14 = CFGetTypeID(ValueAtIndex);
        if (v14 != CFDictionaryGetTypeID() || !FigCFDictionaryGetInt32IfPresent())
        {
          return FigSignalErrorAtGM();
        }

        if (v38 == a2)
        {
          break;
        }

        if (v11 == ++v12)
        {
          goto LABEL_37;
        }
      }

      Value = FigCFDictionaryGetValue();
      if (Value)
      {
        v17 = CFGetTypeID(Value);
        if (v17 != CFDictionaryGetTypeID())
        {
          return FigSignalErrorAtGM();
        }
      }

      v18 = FigCFDictionaryGetValue();
      if (v18)
      {
        v19 = CFGetTypeID(v18);
        if (v19 != CFDictionaryGetTypeID())
        {
          return FigSignalErrorAtGM();
        }
      }

      v20 = FigCFDictionaryGetValue();
      if (v20)
      {
        v21 = CFGetTypeID(v20);
        if (v21 != CFDictionaryGetTypeID())
        {
          return FigSignalErrorAtGM();
        }
      }

      v22 = FigCFDictionaryGetValue();
      if (v22)
      {
        v23 = CFGetTypeID(v22);
        if (v23 != CFDictionaryGetTypeID())
        {
          return FigSignalErrorAtGM();
        }
      }

      FigCFDictionaryGetCMTimeIfPresent();
      FigCFDictionaryGetCMTimeIfPresent();
      FigCFDictionaryGetCMTimeIfPresent();
      FigCFDictionaryGetCMTimeIfPresent();
      if ((__src[0].flags & 1) == 0)
      {
        *&__src[0].value = v32;
        __src[0].epoch = v5;
      }

      if ((__src[1].flags & 1) == 0)
      {
        *&__src[1].value = v32;
        __src[1].epoch = v5;
      }

      if ((__src[2].flags & 1) == 0)
      {
        *&__src[2].value = v32;
        __src[2].epoch = v5;
      }

      if ((__src[3].flags & 1) == 0)
      {
        *&__src[3].value = v32;
        __src[3].epoch = v5;
      }

      if ((__src[0].flags & 0x1D) != 1)
      {
        return FigSignalErrorAtGM();
      }

      if ((__src[1].flags & 0x1D) != 1)
      {
        return FigSignalErrorAtGM();
      }

      if ((__src[2].flags & 0x1D) != 1)
      {
        return FigSignalErrorAtGM();
      }

      if ((__src[3].flags & 0x1D) != 1)
      {
        return FigSignalErrorAtGM();
      }

      time1 = __src[0];
      *&time2.value = v32;
      time2.epoch = v5;
      if (CMTimeCompare(&time1, &time2) < 0 || (OUTLINED_FUNCTION_0_135(v24, __src[1].epoch, v27, v3, v32, *&time2.value, time2.epoch, v36, __src[1].value, *&__src[1].timescale, time1.epoch) & 0x80000000) != 0 || (OUTLINED_FUNCTION_0_135(v25, __src[2].epoch, v28, v30, v33, *&time2.value, time2.epoch, v36, __src[2].value, *&__src[2].timescale, time1.epoch) & 0x80000000) != 0 || (OUTLINED_FUNCTION_0_135(v26, __src[3].epoch, v29, v31, v34, *&time2.value, time2.epoch, v36, __src[3].value, *&__src[3].timescale, time1.epoch) & 0x80000000) != 0)
      {
        return FigSignalErrorAtGM();
      }
    }

    goto LABEL_37;
  }

  return FigSignalErrorAtGM();
}

__n128 fbapoprp_clearRenderPipelineSetRateAndAnchorTimeContext(uint64_t a1)
{
  if (a1)
  {
    *(a1 + 184) = 0;
    v1 = MEMORY[0x1E6960C70];
    result = *MEMORY[0x1E6960C70];
    *(a1 + 192) = *MEMORY[0x1E6960C70];
    v3 = *(v1 + 16);
    *(a1 + 208) = v3;
    *(a1 + 216) = result;
    *(a1 + 240) = 0;
    *(a1 + 248) = 0;
    *(a1 + 232) = v3;
  }

  return result;
}

void fbapoprp_clearRenderPipelineSynchronizeToTimebaseContext(uint64_t a1)
{
  if (a1)
  {
    *(a1 + 104) = 0xFFFFFFFLL;
    *(a1 + 112) = 0;
    v2 = MEMORY[0x1E6960C70];
    v3 = *MEMORY[0x1E6960C70];
    *(a1 + 120) = *MEMORY[0x1E6960C70];
    v4 = *(v2 + 16);
    *(a1 + 136) = v4;
    *(a1 + 144) = v3;
    *(a1 + 160) = v4;
    v5 = *(a1 + 168);
    if (v5)
    {
      CFRelease(v5);
      *(a1 + 168) = 0;
    }
  }
}

void fbapoprp_renderPipelineStateReleaseDeferResetContext(uint64_t a1)
{
  if (a1)
  {
    v2 = *(a1 + 176);
    if (v2)
    {
      CFAllocatorDeallocate(*MEMORY[0x1E695E480], v2);
      *(a1 + 176) = 0;
    }
  }
}

void fampb_submitNetworkHistory()
{
  v28[1] = *MEMORY[0x1E69E9840];
  cf = 0;
  v25 = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v23 = 0;
  if (*(DerivedStorage + 112))
  {
    v1 = DerivedStorage;
    if (*(DerivedStorage + 200) || (v2 = CMBaseObjectGetDerivedStorage(), FigRCLGetDoubleWithDefault(*(v2 + 752), @"ABRHistoryNonStallSampleRate"), FigGetCFPreferenceDoubleWithDefault(), v3 > 0.0) && (bytes = 0.0, v4 = vcvtd_n_u64_f64(v3, 0x3FuLL), SecRandomCopyBytes(*MEMORY[0x1E697B308], 8uLL, &bytes), (*&bytes & 0x7FFFFFFFFFFFFFFFuLL) <= v4))
    {
      v5 = *MEMORY[0x1E695E480];
      v6 = OUTLINED_FUNCTION_298();
      if (!FigAlternatePlaybackBitrateMonitorCopySerializedRecordData(v6, v7, v8))
      {
        Length = CFDataGetLength(cf);
        v10 = [MEMORY[0x1E695DEF0] dataWithBytes:CFDataGetBytePtr(cf) length:Length];
        v11 = [v10 compressedDataUsingAlgorithm:3 error:&v23];
        v12 = v11;
        if (v23)
        {
          v13 = 0;
        }

        else
        {
          v14 = [v11 length];
          v13 = v14 < [v10 length];
        }

        v15 = [MEMORY[0x1E695DF90] dictionaryWithCapacity:8];
        [v15 setObject:@"ABRTrace" forKeyedSubscript:@"type"];
        [v15 setObject:@"3" forKeyedSubscript:@"version"];
        [v15 setObject:@"CM-HLS" forKeyedSubscript:@"sender"];
        [v15 setObject:*(v1 + 80) forKeyedSubscript:@"sessionID"];
        [v15 setObject:objc_msgSend(MEMORY[0x1E696AD98] forKeyedSubscript:{"numberWithUnsignedInt:", *(v1 + 200)), @"stalls"}];
        [v15 setObject:*(v1 + 96) forKeyedSubscript:@"clientName"];
        v16 = *(v1 + 88);
        if (v16)
        {
          [v15 setObject:v16 forKeyedSubscript:@"serviceName"];
        }

        if (v13)
        {
          v17 = @"zlib";
        }

        else
        {
          v17 = @"none";
        }

        [v15 setObject:v17 forKeyedSubscript:@"compression"];
        v18 = MEMORY[0x1E69B7C00];
        v27 = *MEMORY[0x1E69B7C60];
        v28[0] = &unk_1F0B6F400;
        v19 = [MEMORY[0x1E695DF20] dictionaryWithObjects:v28 forKeys:&v27 count:1];
        v21[0] = MEMORY[0x1E69E9820];
        v21[1] = 3221225472;
        v21[2] = __fampb_submitNetworkHistory_block_invoke;
        v21[3] = &unk_1E748F3F8;
        v22 = v13;
        v21[4] = v12;
        v21[5] = v10;
        if ([v18 createForSubmission:@"241" metadata:v15 options:v19 error:&v25 writing:v21])
        {
          bytes = CFAbsoluteTimeGetCurrent();
          v20 = CFNumberCreate(v5, kCFNumberDoubleType, &bytes);
          CFPreferencesSetValue(@"ABRHistoryLastSubmissionTime", v20, @"com.apple.coremedia", *MEMORY[0x1E695E8B8], *MEMORY[0x1E695E898]);
          if (v20)
          {
            CFRelease(v20);
          }
        }
      }
    }
  }
}

void fampb_networkHistoryObserverCallbackUnlocked(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v4 = FigCFWeakReferenceHolderCopyReferencedObject();
  if (v4)
  {
    v5 = v4;
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    MainSegmentBytesInTransitUnlocked = fampb_getMainSegmentBytesInTransitUnlocked();
    FigSimpleMutexLock();
    *(DerivedStorage + 392) = MainSegmentBytesInTransitUnlocked;
    if (*(DerivedStorage + 740))
    {
      v8 = *(DerivedStorage + 728);
    }

    else
    {
      CMTimebaseGetTimeClampedAboveAnchorTime();
    }

    if ((BYTE12(v8) & 1) != 0 && (*(DerivedStorage + 1232) == a3 || *(DerivedStorage + 344)))
    {
      fampb_attemptToSwitch(v5, *(DerivedStorage + 1224) == a3, 0);
    }

    FigSimpleMutexUnlock();
    CFRelease(v5);
  }
}

uint64_t fampb_getMainSegmentBytesInTransitUnlocked()
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v8 = 0;
  number = 0;
  if (*(DerivedStorage + 344))
  {
    v1 = DerivedStorage;
    FigSimpleMutexLock();
    if (*(v1 + 344) && *(v1 + 40))
    {
      v2 = FigCFWeakReferenceHolderCopyReferencedObject();
      FigSimpleMutexUnlock();
      if (v2)
      {
        FigBaseObject = FigBytePumpGetFigBaseObject(v2);
        v4 = *(*(CMBaseObjectGetVTable() + 8) + 48);
        if (v4)
        {
          v5 = v4(FigBaseObject, 0x1F0B1F798, *MEMORY[0x1E695E480], &number);
          v6 = number;
          if (!v5)
          {
            CFNumberGetValue(number, kCFNumberSInt64Type, &v8);
            v6 = number;
          }

          if (v6)
          {
            CFRelease(v6);
          }
        }

        CFRelease(v2);
      }
    }

    else
    {
      FigSimpleMutexUnlock();
    }
  }

  return v8;
}

void fampb_attemptToSwitch(const void *a1, int a2, char *a3)
{
  v375 = *MEMORY[0x1E69E9840];
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  memset(&v366, 0, sizeof(v366));
  fampb_calculateDuration(DerivedStorage, &v366);
  PeakBitRate = FigAlternateGetPeakBitRate(*(DerivedStorage + 272));
  FigAlternateGetExpectedAverageBitrate(*(DerivedStorage + 272));
  v365 = 0;
  if (*(DerivedStorage + 1248) <= 0)
  {
    v8 = 100000;
  }

  else
  {
    v8 = *(DerivedStorage + 1248);
  }

  v9 = *(DerivedStorage + 767);
  if (!v9)
  {
    goto LABEL_9;
  }

  if ((v366.flags & 1) == 0)
  {
    goto LABEL_8;
  }

  v10 = *(DerivedStorage + 432);
  v11 = CMBaseObjectGetDerivedStorage();
  if (*(v11 + 768) >= 1 && *(v11 + 420) == 0.0)
  {
    goto LABEL_8;
  }

  if (fampb_getPredictionBandwidth(DerivedStorage, &v365, (DerivedStorage + 408)))
  {
    goto LABEL_8;
  }

  v19 = v10 * PeakBitRate;
  v20 = v365;
  *(DerivedStorage + 400) = v365;
  v21 = v20;
  v22 = fabsf(*(DerivedStorage + 420));
  if (v22 <= 1.0)
  {
    v22 = 1.0;
  }

  v23 = ceilf(v22);
  shouldSwitchUpConcurrently = *(DerivedStorage + 592);
  if (shouldSwitchUpConcurrently)
  {
    Rate = CMTimebaseGetRate(shouldSwitchUpConcurrently);
  }

  else
  {
    Rate = 0.0;
  }

  v26 = v19;
  *(DerivedStorage + 424) = Rate;
  v27 = v21 / v23;
  if (*(DerivedStorage + 344) && *(DerivedStorage + 345))
  {
    OUTLINED_FUNCTION_4_97(shouldSwitchUpConcurrently, v365, v13, v14, v15, v16, v17, v18, v223, v240, v257, v276, v293, v309, v325, v344, v365, *&v366.value);
    shouldSwitchUpConcurrently = fampb_shouldSwitchUpConcurrently(DerivedStorage + 264, v82, v8, &time);
    v28 = shouldSwitchUpConcurrently == 0;
  }

  else
  {
    v28 = 0;
  }

  v29 = v27;
  if (a2)
  {
    if (*(DerivedStorage + 344))
    {
      if (dword_1EAF17490)
      {
        OUTLINED_FUNCTION_21_21();
        v30 = OUTLINED_FUNCTION_26_21();
        value = v371.value;
        v326 = v30;
        LODWORD(v309) = LOBYTE(type.value);
        if (os_log_type_enabled(v30, type.value))
        {
          v32 = value;
        }

        else
        {
          v32 = value & 0xFFFFFFFE;
        }

        if (v32)
        {
          OUTLINED_FUNCTION_49_8();
          OUTLINED_FUNCTION_4_97(v33, v34, v35, v36, v37, v38, v39, v40, v223, v240, v42, v41, *(DerivedStorage + 432), v309, v326, v344, v365, *&v366.value);
          CMTimeGetSeconds(&time);
          OUTLINED_FUNCTION_5_82(v43, v44, v45, v46, v47, v48, v49, v50, v224, v241, v258, v277, v294, v310, v327, v345, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, *&time.value, time.epoch);
          OUTLINED_FUNCTION_25_21(v51, v52, v53, v54, v55, v56, v57, v58, v225, v242, v259, v278, v295, v311, v328, v346, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, time.value);
          CMTimeGetSeconds(&time);
          OUTLINED_FUNCTION_56_11();
          v59 = *(DerivedStorage + 764);
          OUTLINED_FUNCTION_11_46(v60, v61, v62, v63, v64, v65, v66, v67, v226, v243, v260, v279, v296, v312, v329, v347, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, *&time.value, time.epoch);
          OUTLINED_FUNCTION_48_13();
          LODWORD(time.value) = 136319490;
          OUTLINED_FUNCTION_3_96();
          OUTLINED_FUNCTION_47_11();
          OUTLINED_FUNCTION_46_10();
          OUTLINED_FUNCTION_0_136(v68, v69, v70, v71, v72, v73, v74, v75, v227, v244, v261, v280, v297, v313, v330, v348, v361);
          *(v76 + 118) = v59;
          OUTLINED_FUNCTION_1_121(v77, v78);
          OUTLINED_FUNCTION_108();
          _os_log_send_and_compose_impl();
          OUTLINED_FUNCTION_45_12();
        }

        OUTLINED_FUNCTION_7();
        OUTLINED_FUNCTION_454();
      }

      if (!v28 && fampb_ConcurrentSwitchUpValidForLongEnough(DerivedStorage + 264))
      {
        v81 = v365;
LABEL_64:
        v180 = a1;
        v181 = 1;
LABEL_65:
        v9 = fampb_configurePlaybackFilterAsync(v180, v81, v181) == 0;
        goto LABEL_9;
      }
    }

    else if (v29 > v26)
    {
      v9 = *(DerivedStorage + 764);
      if (!v9)
      {
        goto LABEL_9;
      }

      if (dword_1EAF17490)
      {
        OUTLINED_FUNCTION_21_21();
        v80 = OUTLINED_FUNCTION_26_21();
        os_log_type_enabled(v80, type.value);
        OUTLINED_FUNCTION_70();
        if (v28)
        {
          OUTLINED_FUNCTION_49_8();
          OUTLINED_FUNCTION_4_97(v133, v134, v135, v136, v137, v138, v139, v140, v223, v240, v257, v276, v142, v141, *(DerivedStorage + 432), v344, v365, *&v366.value);
          CMTimeGetSeconds(&time);
          OUTLINED_FUNCTION_5_82(v143, v144, v145, v146, v147, v148, v149, v150, v233, v250, v268, v285, v302, v318, v337, v354, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, *&time.value, time.epoch);
          OUTLINED_FUNCTION_25_21(v151, v152, v153, v154, v155, v156, v157, v158, v234, v251, v269, v286, v303, v319, v338, v355, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, time.value);
          CMTimeGetSeconds(&time);
          OUTLINED_FUNCTION_56_11();
          OUTLINED_FUNCTION_30_16();
          LODWORD(v287) = v159;
          OUTLINED_FUNCTION_11_46(v160, v161, v162, v163, v164, v165, v166, v167, v235, v252, v270, v287, v304, v320, v339, v356, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, *&time.value, time.epoch);
          OUTLINED_FUNCTION_48_13();
          LODWORD(time.value) = 136319490;
          OUTLINED_FUNCTION_3_96();
          OUTLINED_FUNCTION_47_11();
          OUTLINED_FUNCTION_46_10();
          OUTLINED_FUNCTION_0_136(v168, v169, v170, v171, v172, v173, v174, v175, v236, v253, v271, v288, v305, v321, v340, v357, v363);
          *(v176 + 118) = v289;
          OUTLINED_FUNCTION_1_121(v177, v178);
          OUTLINED_FUNCTION_19_29();
          _os_log_send_and_compose_impl();
          OUTLINED_FUNCTION_45_12();
        }

        OUTLINED_FUNCTION_7();
        OUTLINED_FUNCTION_454();
      }

      time.value = 0;
      fampb_createRecordABREventEntryForNowAndInsertQ(a1, &time);
      v179 = time.value;
      if (time.value)
      {
        *(time.value + 16) = 1;
        *(v179 + 8) = 7;
      }

      v81 = (v365 / 1.1);
      v365 = v81;
      goto LABEL_64;
    }

LABEL_8:
    v9 = 0;
    goto LABEL_9;
  }

  if (!*(DerivedStorage + 344))
  {
    if (v29 < v26 && !*(DerivedStorage + 766))
    {
      OUTLINED_FUNCTION_4_97(shouldSwitchUpConcurrently, v12, v13, v14, v15, v16, v17, v18, v223, v240, v257, v276, v293, v309, v325, v344, v365, *&v366.value);
      v374 = *(DerivedStorage + 364);
      Seconds = CMTimeGetSeconds(&time);
      time = v374;
      if (Seconds <= CMTimeGetSeconds(&time))
      {
        if (dword_1EAF17490)
        {
          OUTLINED_FUNCTION_21_21();
          v331 = OUTLINED_FUNCTION_26_21();
          os_log_type_enabled(v331, type.value);
          OUTLINED_FUNCTION_70();
          if (v28)
          {
            OUTLINED_FUNCTION_49_8();
            OUTLINED_FUNCTION_4_97(v184, v185, v186, v187, v188, v189, v190, v191, v228, v245, v262, v193, v192, *(DerivedStorage + 432), v331, v349, v365, *&v366.value);
            CMTimeGetSeconds(&time);
            OUTLINED_FUNCTION_5_82(v194, v195, v196, v197, v198, v199, v200, v201, v237, v254, v272, v290, v306, v322, v341, v358, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, *&time.value, time.epoch);
            OUTLINED_FUNCTION_25_21(v202, v203, v204, v205, v206, v207, v208, v209, v238, v255, v273, v291, v307, v323, v342, v359, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, time.value);
            CMTimeGetSeconds(&time);
            OUTLINED_FUNCTION_56_11();
            OUTLINED_FUNCTION_30_16();
            LODWORD(v274) = v210;
            time = *(DerivedStorage + 364);
            CMTimeGetSeconds(&time);
            OUTLINED_FUNCTION_48_13();
            LODWORD(time.value) = 136319490;
            OUTLINED_FUNCTION_3_96();
            OUTLINED_FUNCTION_47_11();
            OUTLINED_FUNCTION_46_10();
            OUTLINED_FUNCTION_0_136(v211, v212, v213, v214, v215, v216, v217, v218, v239, v256, v274, v292, v308, v324, v343, v360, v364);
            *(v219 + 118) = v275;
            OUTLINED_FUNCTION_1_121(v220, v221);
            OUTLINED_FUNCTION_19_29();
            _os_log_send_and_compose_impl();
            OUTLINED_FUNCTION_45_12();
          }

          OUTLINED_FUNCTION_7();
          OUTLINED_FUNCTION_454();
        }

        time.value = 0;
        fampb_createRecordABREventEntryForNowAndInsertQ(a1, &time);
        v222 = time.value;
        if (time.value)
        {
          *(time.value + 16) = 0;
          *(v222 + 8) = 7;
        }

        v81 = v365;
        v180 = a1;
        v181 = 0;
        goto LABEL_65;
      }
    }

    goto LABEL_8;
  }

  if (dword_1EAF17490)
  {
    OUTLINED_FUNCTION_21_21();
    v332 = OUTLINED_FUNCTION_26_21();
    os_log_type_enabled(v332, type.value);
    OUTLINED_FUNCTION_70();
    if (v28)
    {
      OUTLINED_FUNCTION_49_8();
      OUTLINED_FUNCTION_4_97(v83, v84, v85, v86, v87, v88, v89, v90, v223, v240, v257, v92, v91, *(DerivedStorage + 432), v332, v344, v365, *&v366.value);
      CMTimeGetSeconds(&time);
      OUTLINED_FUNCTION_5_82(v93, v94, v95, v96, v97, v98, v99, v100, v229, v246, v263, v281, v298, v314, v333, v350, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, *&time.value, time.epoch);
      OUTLINED_FUNCTION_25_21(v101, v102, v103, v104, v105, v106, v107, v108, v230, v247, v264, v282, v299, v315, v334, v351, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, time.value);
      CMTimeGetSeconds(&time);
      OUTLINED_FUNCTION_56_11();
      OUTLINED_FUNCTION_30_16();
      LODWORD(v265) = v109;
      OUTLINED_FUNCTION_11_46(v110, v111, v112, v113, v114, v115, v116, v117, v231, v248, v265, v283, v300, v316, v335, v352, v365, v366.value, *&v366.timescale, v366.epoch, rhs.value, *&rhs.timescale, rhs.epoch, v368, lhs.value, *&lhs.timescale, lhs.epoch, type.value, *&type.timescale, type.epoch, v371.value, *&v371.timescale, v371.epoch, v372, *&time.value, time.epoch);
      OUTLINED_FUNCTION_48_13();
      LODWORD(time.value) = 136319490;
      OUTLINED_FUNCTION_3_96();
      OUTLINED_FUNCTION_47_11();
      OUTLINED_FUNCTION_46_10();
      OUTLINED_FUNCTION_0_136(v118, v119, v120, v121, v122, v123, v124, v125, v232, v249, v266, v284, v301, v317, v336, v353, v362);
      *(v126 + 118) = v267;
      OUTLINED_FUNCTION_1_121(v127, v128);
      OUTLINED_FUNCTION_19_29();
      _os_log_send_and_compose_impl();
      OUTLINED_FUNCTION_45_12();
    }

    OUTLINED_FUNCTION_7();
    OUTLINED_FUNCTION_454();
  }

  v129 = v365;
  v130 = CMBaseObjectGetDerivedStorage();
  v131 = v130;
  if (*(v130 + 1248) <= 0)
  {
    v132 = 100000;
  }

  else
  {
    v132 = *(v130 + 1248);
  }

  memset(&time, 0, sizeof(time));
  fampb_calculateDuration(v130, &time);
  v374 = **&MEMORY[0x1E6960C70];
  v371 = time;
  if (!fampb_shouldSwitchDownConcurrently(v131 + 264, v129, v132, &v371, &v374))
  {
    if (v374.flags)
    {
      memset(&v371, 0, sizeof(v371));
      if (*(v131 + 740))
      {
        v371 = *(v131 + 728);
      }

      else
      {
        CMTimebaseGetTimeClampedAboveAnchorTime();
      }

      lhs = v371;
      rhs = v374;
      CMTimeAdd(&type, &lhs, &rhs);
      fampb_primeTimeTillDryTimer(a1, &type);
    }

    goto LABEL_8;
  }

  v182 = *(v131 + 280);
  if (v182)
  {
    CFRelease(v182);
    *(v131 + 280) = 0;
    if (fampb_setBandwidthConditions(a1))
    {
      goto LABEL_8;
    }

    v183 = 2;
  }

  else
  {
    v183 = 0;
  }

  fampb_configurePlaybackFilterAsync(a1, v129, v183);
  v9 = 1;
LABEL_9:
  if (a3)
  {
    *a3 = v9;
  }
}

uint64_t FigAlternatePlaybackBitrateMonitorSetPumpOffset(uint64_t a1, uint64_t a2)
{
  if (a1)
  {
    DerivedStorage = CMBaseObjectGetDerivedStorage();
    FigSimpleMutexLock();
    v4 = *(a2 + 16);
    *(DerivedStorage + 704) = *a2;
    *(DerivedStorage + 720) = v4;
    FigSimpleMutexUnlock();
  }

  return 0;
}

uint64_t FigAlternateFilterMonitorForPlaybackBitrateStartup(const void *a1)
{
  if (!a1)
  {
    return 0;
  }

  DerivedStorage = CMBaseObjectGetDerivedStorage();
  FigSimpleMutexLock();
  if (*(DerivedStorage + 8))
  {
    v3 = FigCFWeakReferenceHolderCopyReferencedObject();
  }

  else
  {
    v3 = 0;
  }

  v4 = *(DerivedStorage + 24);
  v5 = *(DerivedStorage + 264);
  v6 = *(DerivedStorage + 296);
  v7 = *(DerivedStorage + 304);
  v8 = *(DerivedStorage + 346);
  v9 = *(DerivedStorage + 416);
  v33 = 0;
  fampb_createRecordABREventEntryForNowAndInsertQ(a1, &v33);
  if (v33)
  {
    *(v33 + 2) = 20;
  }

  FigSimpleMutexUnlock();
  v28 = 0;
  v29 = 0;
  v26 = 0;
  v27 = 0;
  v24 = 0;
  v25 = 0;
  v23 = 0;
  AllocatorForMedia = FigGetAllocatorForMedia();
  inserted = FigAlternateFilterTreeCreate(AllocatorForMedia, &v23);
  if (inserted)
  {
    goto LABEL_75;
  }

  v12 = v23;
  if (!v23)
  {
    OUTLINED_FUNCTION_243();
    inserted = FigSignalErrorAtGM();
    goto LABEL_75;
  }

  if (!v5)
  {
    v18 = 0;
    v19 = 0;
    goto LABEL_51;
  }

  inserted = FigAlternateFilterTreeInsertLeaf(v23, v5, 500);
  if (inserted)
  {
    goto LABEL_75;
  }

  v13 = MEMORY[0x1E695E480];
  if (v9 != 0x7FFFFFFF)
  {
    inserted = FigAlternatePeakBitRateCapFilterCreate(*MEMORY[0x1E695E480], v9, &v25);
    if (inserted)
    {
      goto LABEL_75;
    }

    inserted = FigAlternateFilterTreeInsertLeaf(v23, v25, 460);
    if (inserted)
    {
      goto LABEL_75;
    }
  }

  if (v8)
  {
    if (v4 && v3)
    {
      v4(v3);
    }

    v14 = *v13;
    inserted = FigAlternateStartupScoreFilterCreate(*v13, &v26);
    if (inserted)
    {
      goto LABEL_75;
    }

    inserted = FigAlternateFilterTreeInsertLeaf(v23, v26, 420);
    if (inserted)
    {
      goto LABEL_75;
    }

    inserted = FigAlternateHighestRankingScoreFilterCreate(v14, &v28);
    if (inserted)
    {
      goto LABEL_75;
    }

    v15 = v23;
    v16 = v28;
    v17 = 310;
  }

  else
  {
    v14 = *v13;
    inserted = FigAlternateLowestIndexAlternateFilterCreate(*v13, &v24);
    if (inserted)
    {
      goto LABEL_75;
    }

    v15 = v23;
    v16 = v24;
    v17 = 430;
  }

  v18 = FigAlternateFilterTreeInsertLeaf(v15, v16, v17);
  if (v18)
  {
    goto LABEL_76;
  }

  inserted = FigAlternateFinalSelectionHighestPeakBitRateFilterCreate(v14, &v27);
  if (inserted || (inserted = FigAlternateFilterTreeInsertLeaf(v23, v27, 100), inserted) || (inserted = FigAlternateFilterTreeCreateFilter(v23, @"BitrateFilterTree", 600, &v29), inserted))
  {
LABEL_75:
    v18 = inserted;
    goto LABEL_76;
  }

  v19 = v29;
  if (!v7)
  {
LABEL_49:
    v18 = 0;
    v29 = 0;
    goto LABEL_50;
  }

  cf = 0;
  v33 = 0;
  v30 = 0;
  v31 = 0;
  v20 = FigGetAllocatorForMedia();
  v21 = FigAlternateFilterTreeCreate(v20, &cf);
  if (v21 || (v21 = FigAlternateFilterTreeInsertLeaf(cf, v5, 500), v21) || (v21 = FigAlternateTransitionBiasFilterCreate(v14, v6, v7, &v30), v21) || (v21 = FigAlternateFilterTreeInsertLeaf(cf, v30, 320), v21) || (v21 = FigAlternateFinalSelectionHighestPeakBitRateFilterCreate(v14, &v31), v21) || (v21 = FigAlternateFilterTreeInsertLeaf(cf, v31, 100), v21) || (v21 = FigAlternateFilterTreeSetFallbackBranch(cf, v19), v21))
  {
    v18 = v21;
  }

  else
  {
    v18 = FigAlternateFilterTreeCreateFilter(cf, @"GaplessItemTransitionTree", 600, &v33);
    if (!v18)
    {
      v19 = v33;
      v33 = 0;
      goto LABEL_38;
    }
  }

  v19 = 0;
LABEL_38:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v33)
  {
    CFRelease(v33);
  }

  if (v31)
  {
    CFRelease(v31);
  }

  if (v30)
  {
    CFRelease(v30);
  }

  if (!v18)
  {
    if (v29)
    {
      CFRelease(v29);
    }

    goto LABEL_49;
  }

LABEL_76:
  v19 = 0;
LABEL_50:
  v12 = v23;
  if (v23)
  {
LABEL_51:
    CFRelease(v12);
  }

  if (v25)
  {
    CFRelease(v25);
  }

  if (v26)
  {
    CFRelease(v26);
  }

  if (v24)
  {
    CFRelease(v24);
  }

  if (v27)
  {
    CFRelease(v27);
  }

  if (v29)
  {
    CFRelease(v29);
  }

  if (v28)
  {
    CFRelease(v28);
  }

  if (!v18)
  {
    v18 = fampb_notifyFilterChangeAndRecordStallRiskListUnlocked(a1, v19, 0);
  }

  if (v3)
  {
    CFRelease(v3);
  }

  if (v19)
  {
    CFRelease(v19);
  }

  return v18;
}

const void *fampb_notifyFilterChangeAndRecordStallRiskListUnlocked(const void *a1, const void *a2, const void *a3)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a2)
  {
    return a2;
  }

  v7 = DerivedStorage;
  FigSimpleMutexLock();
  v8 = v7[8];
  if (v8)
  {
    v9 = *(*(CMBaseObjectGetVTable() + 16) + 8);
    if (v9)
    {
      v9(v8);
    }

    if (FigCFEqual())
    {
      goto LABEL_11;
    }

    v10 = v7[8];
    v11 = v7[9];
    v7[9] = v10;
    if (v10)
    {
      CFRetain(v10);
    }
  }

  else
  {
    v11 = v7[9];
    v7[9] = 0;
  }

  if (v11)
  {
    CFRelease(v11);
  }

LABEL_11:
  v12 = v7[8];
  v7[8] = CFRetain(a2);
  v13 = v7[13];
  v7[13] = a3;
  if (a3)
  {
    CFRetain(a3);
  }

  if (v13)
  {
    CFRelease(v13);
  }

  FigSimpleMutexUnlock();
  a2 = FigAlternateFilterMonitorUtilityPostStateChangedNotificationForNewFilterIfNecessary(a1, v12, a2, 0, 0);
  if (v12)
  {
    CFRelease(v12);
  }

  return a2;
}

uint64_t fampb_getPredictionBandwidth(uint64_t a1, void *a2, void *a3)
{
  v34 = *MEMORY[0x1E69E9840];
  v23 = 0;
  v21 = 0u;
  v22 = 0u;
  v19 = 0u;
  v20 = 0u;
  v18 = 0u;
  if (*(a1 + 344))
  {
    v17 = *(a1 + 1000);
    memcpy(v16, (a1 + 1024), sizeof(v16));
    v6 = *(a1 + 1168);
    OUTLINED_FUNCTION_43_12(a1 + 1176);
    v7 = *(a1 + 1240);
  }

  else
  {
    v17 = *(a1 + 776);
    v7 = *(a1 + 792);
    memcpy(v16, (a1 + 800), sizeof(v16));
    v6 = *(a1 + 944);
    OUTLINED_FUNCTION_43_12(a1 + 952);
  }

  OUTLINED_FUNCTION_28_18();
  if (v10 ^ v11 | v9)
  {
    UpTimeNanoseconds = FigGetUpTimeNanoseconds();
  }

  else
  {
    UpTimeNanoseconds = ((*(a1 + 472) - v8) * 1000000000.0);
  }

  v13 = *(a1 + 48);
  v14 = *(*(CMBaseObjectGetVTable() + 16) + 8);
  if (!v14)
  {
    return 4294954514;
  }

  v24 = v17;
  v25 = v7;
  memcpy(v26, v16, sizeof(v26));
  v27 = v6 | 0x18;
  v28 = v31;
  v29 = v32;
  v30 = v33;
  result = v14(v13, UpTimeNanoseconds, &v24, &v18);
  if (!result)
  {
    if (a2)
    {
      *a2 = (*(&v19 + 1) * v18);
    }

    result = 0;
    if (a3)
    {
      *a3 = v20;
    }
  }

  return result;
}

CFTypeRef fampb_copyLowerSwitchCandidate(uint64_t *a1, uint64_t a2, int a3)
{
  v23 = 0;
  v21 = 0;
  v22 = 0;
  cf = 0;
  theArray = 0;
  v17 = 0;
  v18 = 0;
  NormalizedPeakBitrate = FigAlternateGetNormalizedPeakBitrate(a2);
  if (a3)
  {
    v6 = NormalizedPeakBitrate - 1;
  }

  else
  {
    v6 = 19 * NormalizedPeakBitrate / 20;
  }

  fampb_copyValidAlternateList(*a1, &v21);
  if (!v21)
  {
    goto LABEL_23;
  }

  AllocatorForMedia = FigGetAllocatorForMedia();
  if (FigAlternateFilterTreeCreate(AllocatorForMedia, &v22))
  {
    goto LABEL_23;
  }

  v8 = *MEMORY[0x1E695E480];
  if (FigAlternateNormalizedPeakBitRateCapFilterCreate(*MEMORY[0x1E695E480], v6, 1, &cf) || FigAlternateFilterTreeInsertLeaf(v22, cf, 240))
  {
    goto LABEL_23;
  }

  if (a3)
  {
    if (FigAlternateLowestVideoThenAudioFilterCreate(v8, &v17))
    {
      goto LABEL_23;
    }

    v9 = v22;
    v10 = v17;
    v11 = 230;
  }

  else
  {
    if (FigAlternatePlaybackScoreAndBitRateFilterCreate(v8, &v18) || FigAlternateFilterTreeInsertLeaf(v22, v18, 200) || FigAlternateFinalSelectionHighestPeakBitRateFilterCreate(v8, &v17))
    {
      goto LABEL_23;
    }

    v9 = v22;
    v10 = v17;
    v11 = 100;
  }

  if (!FigAlternateFilterTreeInsertLeaf(v9, v10, v11) && !FigAlternateFilterTreeCreateFilter(v22, @"selectSwitchCandidate", 100, &v23))
  {
    if (*(*(CMBaseObjectGetVTable() + 16) + 24))
    {
      v12 = OUTLINED_FUNCTION_298();
      if (!v13(v12))
      {
        if (theArray)
        {
          if (CFArrayGetCount(theArray) >= 1)
          {
            ValueAtIndex = CFArrayGetValueAtIndex(theArray, 0);
            if (ValueAtIndex)
            {
              v15 = CFRetain(ValueAtIndex);
              goto LABEL_24;
            }
          }
        }
      }
    }
  }

LABEL_23:
  v15 = 0;
LABEL_24:
  if (cf)
  {
    CFRelease(cf);
  }

  if (v18)
  {
    CFRelease(v18);
  }

  if (v17)
  {
    CFRelease(v17);
  }

  if (theArray)
  {
    CFRelease(theArray);
  }

  if (v21)
  {
    CFRelease(v21);
  }

  if (v22)
  {
    CFRelease(v22);
  }

  if (v23)
  {
    CFRelease(v23);
  }

  return v15;
}

uint64_t FigAlternatePlaybackBitrateMonitorIsAlternateStillValid(uint64_t a1, uint64_t a2)
{
  cf = 0;
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (a2)
  {
    v4 = DerivedStorage;
    FigSimpleMutexLock();
    fampb_copyValidAlternateList(*(v4 + 264), &cf);
    a2 = FigCFArrayContainsValue();
    FigSimpleMutexUnlock();
    if (cf)
    {
      CFRelease(cf);
    }
  }

  return a2;
}

uint64_t FigAlternateFilterMonitorPrimeForSwitch(const void *a1)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  v6 = 0;
  v7 = 0;
  FigSimpleMutexLock();
  PredictionBandwidth = fampb_getPredictionBandwidth(DerivedStorage, &v6, (DerivedStorage + 408));
  if (PredictionBandwidth)
  {
    v4 = PredictionBandwidth;
    FigSimpleMutexUnlock();
  }

  else
  {
    v4 = fampb_createPlaybackFilterConfigurationRec(a1, v6, 0, &v7);
    FigSimpleMutexUnlock();
    if (!v4)
    {
      fampb_configurePlaybackFilterUnlocked(v7);
    }
  }

  return v4;
}

uint64_t fampb_createPlaybackFilterConfigurationRec(const void *a1, uint64_t a2, int a3, void *a4)
{
  DerivedStorage = CMBaseObjectGetDerivedStorage();
  if (!a4)
  {
    return 0;
  }

  v9 = DerivedStorage;
  v10 = malloc_type_calloc(1uLL, 0x178uLL, 0x10E00409B9F9786uLL);
  if (v10)
  {
    v11 = v10;
    v12 = v9[42];
    if (v12)
    {
      CFRetain(v12);
    }

    v13 = v9[39];
    if (v13)
    {
      CFRetain(v13);
    }

    v14 = v9[34];
    if (v14)
    {
      CFRetain(v14);
    }

    v15 = v9[35];
    if (v15)
    {
      CFRetain(v15);
    }

    v16 = v9[36];
    if (v16)
    {
      CFRetain(v16);
    }

    v17 = v9[37];
    if (v17)
    {
      CFRetain(v17);
    }

    v18 = v9[38];
    if (v18)
    {
      CFRetain(v18);
    }

    v19 = v9[33];
    if (v19)
    {
      CFRetain(v19);
    }

    memcpy(v11 + 32, v9 + 33, 0x100uLL);
    if (a1)
    {
      v27 = CFRetain(a1);
    }

    else
    {
      v27 = 0;
    }

    *v11 = v27;
    TimeClampedAboveAnchorTime = v9[1];
    if (TimeClampedAboveAnchorTime)
    {
      TimeClampedAboveAnchorTime = FigCFWeakReferenceHolderCopyReferencedObject();
    }

    *(v11 + 1) = TimeClampedAboveAnchorTime;
    *(v11 + 2) = v9[2];
    if (*(v9 + 740))
    {
      theArray = *(v9 + 91);
    }

    else
    {
      TimeClampedAboveAnchorTime = CMTimebaseGetTimeClampedAboveAnchorTime();
    }

    v29 = OUTLINED_FUNCTION_281(TimeClampedAboveAnchorTime, v20, v21, v22, v23, v24, v25, v26, v39, v40, v42, v43, v9[88], v9[89], v9[90], v45, theArray.value);
    CMTimeAdd(v31, v29, v30);
    *(v11 + 296) = v41;
    *(v11 + 39) = v44;
    *(v11 + 80) = a3;
    *(v11 + 41) = a2;
    v32 = v9[156];
    if (v32 <= 0)
    {
      v32 = 100000;
    }

    *(v11 + 46) = v32;
    fampb_calculateDuration(v9, &theArray);
    *(v11 + 14) = theArray;
    *(v11 + 36) = 0;
    v11[360] = *(v9 + 765);
    if (*(v9 + 767))
    {
      v33 = *(v9 + 347);
    }

    else
    {
      v33 = 1;
    }

    v11[115] = v33;
    v34 = *(v9 + 190);
    if ((v34 & 0x80000000) != 0)
    {
      goto LABEL_33;
    }

    theArray.value = 0;
    if (fampb_copyAlternateListSortedByQuality(v9 + 33, *MEMORY[0x1E695E480], 0, &theArray))
    {
      goto LABEL_46;
    }

    if (!theArray.value)
    {
LABEL_33:
      *(v9 + 190) = -1;
      *(v9 + 347) = 0;
      *a4 = v11;
      return 0;
    }

    if (CFArrayGetCount(theArray.value) < 1)
    {
LABEL_46:
      if (theArray.value)
      {
        CFRelease(theArray.value);
      }

      goto LABEL_33;
    }

    value = theArray.value;
    if (theArray.value)
    {
      Count = CFArrayGetCount(theArray.value);
      value = theArray.value;
      if (Count > v34)
      {
LABEL_43:
        ValueAtIndex = CFArrayGetValueAtIndex(value, v34);
        if (ValueAtIndex)
        {
          ValueAtIndex = CFRetain(ValueAtIndex);
        }

        *(v11 + 36) = ValueAtIndex;
        goto LABEL_46;
      }

      if (theArray.value)
      {
        v34 = CFArrayGetCount(theArray.value) - 1;
        value = theArray.value;
        goto LABEL_43;
      }
    }

    v34 = -1;
    goto LABEL_43;
  }

  return FigSignalErrorAtGM();
}

void fampb_configurePlaybackFilterUnlocked(uint64_t a1)
{
  v105 = 0;
  if (!*a1)
  {
    goto LABEL_248;
  }

  if (!*(a1 + 40))
  {
    goto LABEL_248;
  }

  AllocatorForMedia = FigGetAllocatorForMedia();
  if (FigAlternateFilterTreeCreate(AllocatorForMedia, &v105))
  {
    goto LABEL_248;
  }

  if (!v105)
  {
    OUTLINED_FUNCTION_29_17();
    FigSignalErrorAtGM();
LABEL_248:
    v93 = 0;
    Mutable = 0;
    goto LABEL_223;
  }

  v3 = *(a1 + 32);
  if (!v3 || FigAlternateFilterTreeInsertLeaf(v105, v3, 500))
  {
    goto LABEL_248;
  }

  v4 = MEMORY[0x1E695E480];
  if (!*(a1 + 112))
  {
    v32 = *(a1 + 320);
    if (v32 == 1)
    {
      v33 = *(a1 + 128);
      if ((v33 & 1) == 0)
      {
        if ((v33 & 6) != 0)
        {
          goto LABEL_89;
        }

LABEL_88:
        if ((v33 & 8) != 0)
        {
          goto LABEL_89;
        }

LABEL_85:
        Mutable = 0;
        goto LABEL_178;
      }

      if ((v33 & 6) == 0 && !*(a1 + 360))
      {
        goto LABEL_88;
      }
    }

    else if (v32 || *(a1 + 192) == 0.0)
    {
      goto LABEL_85;
    }

LABEL_89:
    Mutable = v105;
    HIDWORD(v104) = *(a1 + 192) != 0.0;
    v111 = 0;
    theArray = 0;
    ExpectedAverageBitrate = FigAlternateGetExpectedAverageBitrate(*(a1 + 40));
    v103 = Mutable;
    if (Mutable)
    {
      if (*(a1 + 40))
      {
        if (!*(a1 + 115))
        {
          v37 = ExpectedAverageBitrate;
          fampb_copyValidAlternateList(*(a1 + 32), &v111);
          if (v111)
          {
            v113 = 0;
            PixelCount = FigAlternateGetPixelCount(*(a1 + 40));
            v39 = *(a1 + 128);
            if ((v39 & 4) != 0)
            {
              if (FigAlternateIsAudioOnly(*(a1 + 40)))
              {
                v40 = 1;
              }

              else
              {
                v40 = !FigAlternateHasHDVideoResolution(*(a1 + 40));
              }
            }

            else
            {
              v40 = 0;
            }

            if (*(a1 + 320) == 1)
            {
              if (((PixelCount != 0) & (v39 >> 3)) != 0)
              {
                v43 = *v4;
                v44 = *(a1 + 328);
                PeakBitRate = FigAlternateGetPeakBitRate(*(a1 + 40));
                OUTLINED_FUNCTION_39_15();
                v46 = FigAlternateFilterTreeCreate(v43, &v109);
                if (v46 || (v47 = (PixelCount + PixelCount), (v46 = FigAlternateMinimumRequiredPixelCountFilterCreate(v43, (v47 + v47), &v108)) != 0) || (v46 = FigAlternateAggressiveWalkBackFilterCreate(v43, v44, PeakBitRate, cf)) != 0)
                {
                  Filter = v46;
                }

                else
                {
                  inserted = FigAlternatePassthroughFilterCreate(v43, @"ProgressiveFallbackFilter", 601, &v114);
                  if (inserted || (inserted = FigAlternateFilterTreeInsertLeaf(v109.value, cf[0], 306)) != 0 || (inserted = FigAlternateFilterTreeInsertLeaf(v109.value, v108.value, 305)) != 0 || (inserted = FigAlternateFilterTreeSetFallbackBranch(v109.value, v114)) != 0)
                  {
                    Filter = inserted;
                    v50 = 0;
                    goto LABEL_113;
                  }

                  Filter = FigAlternateFilterTreeCreateFilter(v109.value, @"ProgressiveSwitchUpTree", 530, v115);
                  v50 = v115[0];
                  if (!Filter)
                  {
                    v115[0] = 0;
                    goto LABEL_113;
                  }

                  if (!v115[0])
                  {
LABEL_113:
                    if (v108.value)
                    {
                      CFRelease(v108.value);
                    }

                    if (v109.value)
                    {
                      CFRelease(v109.value);
                    }

                    if (v114)
                    {
                      CFRelease(v114);
                    }

                    if (cf[0])
                    {
                      CFRelease(cf[0]);
                    }

                    if (Filter)
                    {
                      goto LABEL_129;
                    }

                    v51 = FigAlternateFilterTreeInsertLeaf(v103, v50, 305);
                    if (v51 != 0 || !v40)
                    {
LABEL_128:
                      Filter = v51;
LABEL_129:
                      if (v50)
                      {
                        CFRelease(v50);
                      }

                      goto LABEL_132;
                    }

LABEL_126:
                    v52 = *(a1 + 120);
                    v53 = FigAlternateGetPeakBitRate(*(a1 + 40));
                    v51 = FigAlternateMinimumRequiredBitrateFilterCreate(v43, (v52 * v53 / *(a1 + 200)), &v113);
                    if (!v51)
                    {
                      v51 = FigAlternateFilterTreeInsertLeaf(v103, v113, 349);
                    }

                    goto LABEL_128;
                  }

                  CFRelease(v115[0]);
                }

                v50 = 0;
                goto LABEL_113;
              }

              if (v40)
              {
                v50 = 0;
                v43 = *v4;
                goto LABEL_126;
              }
            }

            Filter = 0;
LABEL_132:
            if (v113)
            {
              CFRelease(v113);
            }

            if (Filter)
            {
LABEL_170:
              Mutable = 0;
              v92 = 0;
              goto LABEL_172;
            }

            v54 = *MEMORY[0x1E695E480];
            Mutable = CFArrayCreateMutable(*MEMORY[0x1E695E480], 0, MEMORY[0x1E695E9C0]);
            if (!Mutable)
            {
              OUTLINED_FUNCTION_29_17();
              v92 = FigSignalErrorAtGM() == 0;
              goto LABEL_172;
            }

            v55 = 0;
            for (i = 0; ; ++i)
            {
              Count = v111;
              if (v111)
              {
                Count = CFArrayGetCount(v111);
              }

              if (i >= Count)
              {
                v88 = v37 != FigAlternateGetExpectedAverageBitrate(*(a1 + 40)) || v55 == 0;
                if (!v88 && *(a1 + 320) == 1)
                {
                  goto LABEL_169;
                }

                v89 = CFArrayGetCount(Mutable) + 1;
                v90 = v111;
                if (v111)
                {
                  v90 = CFArrayGetCount(v111);
                }

                if (v89 == v90)
                {
                  if (v55)
                  {
                    if (!*(a1 + 320))
                    {
                      OUTLINED_FUNCTION_16_30();
                      v108 = *(a1 + 132);
                      Seconds = CMTimeGetSeconds(&v109);
                      v109 = v108;
                      if (Seconds <= CMTimeGetSeconds(&v109))
                      {
                        CFArrayAppendValue(Mutable, *(a1 + 40));
                      }
                    }
                  }
                }

                if (CFArrayGetCount(Mutable) >= 1 && (FigAlternateDenyListFilterCreate(v54, Mutable, @"MonitorStallListFilter", 0x257u, 1, &theArray) || FigAlternateFilterTreeInsertLeaf(v103, theArray, 345)))
                {
LABEL_169:
                  CFRelease(Mutable);
                  goto LABEL_170;
                }

                v92 = 1;
LABEL_172:
                v4 = MEMORY[0x1E695E480];
LABEL_173:
                if (theArray)
                {
                  CFRelease(theArray);
                }

                if (v111)
                {
                  CFRelease(v111);
                }

                if (!v92)
                {
                  goto LABEL_222;
                }

LABEL_178:
                v93 = v105;
                OUTLINED_FUNCTION_39_15();
                v113 = 0;
                v111 = 0;
                theArray = 0;
                v110 = 0;
                if (v93)
                {
                  v94 = *(a1 + 288);
                  v95 = *v4;
                  if ((!v94 || !FigAlternateSingleAlternateFilterCreate(*v4, v94, 0, @"GearIndexAlternateFilter", 590, &v108) && !FigAlternateFilterTreeInsertLeaf(v93, v108.value, 410)) && !FigAlternateMeasuredBitrateCapFilterCreate(v95, *(a1 + 328), 0, &v114, *(a1 + 200), *(a1 + 192)) && !FigAlternateFilterTreeInsertLeaf(v93, v114, 350))
                  {
                    v96 = *(a1 + 184);
                    if ((v96 == 0x7FFFFFFF || !FigAlternatePeakBitRateCapFilterCreate(v95, v96, &v113) && !FigAlternateFilterTreeInsertLeaf(v93, v113, 460)) && (!CelestialShouldLimitConcurrent4K60HEVCDecoding() || !FigAlternateLimitConcurrent4K60HEVCDecodeFilterCreate(v95, *(a1 + 40), &v109) && !FigAlternateFilterTreeInsertLeaf(v93, v109.value, 340)) && !FigAlternateHighestRankingScoreFilterCreate(v95, &v110) && !FigAlternateFilterTreeInsertLeaf(v93, v110, 310) && !FigAlternateFrameRateSwitchCapFilterCreate(v95, cf) && !FigAlternateFilterTreeInsertLeaf(v93, cf[0], 300) && !FigAlternatePlaybackScoreAndBitRateFilterCreate(v95, v115) && !FigAlternateFilterTreeInsertLeaf(v93, v115[0], 200) && !FigAlternateFinalSelectionHighestPeakBitRateFilterCreate(v95, &theArray) && !FigAlternateFilterTreeInsertLeaf(v93, theArray, 100) && !FigAlternateFilterTreeCreateFilter(v93, @"BitrateFilterTree", 600, &v111))
                    {
                      v93 = v111;
                      v111 = 0;
                      goto LABEL_200;
                    }
                  }

                  v93 = 0;
                  v97 = 0;
                }

                else
                {
LABEL_200:
                  v97 = 1;
                }

                if (v109.value)
                {
                  CFRelease(v109.value);
                }

                if (v108.value)
                {
                  CFRelease(v108.value);
                }

                if (cf[0])
                {
                  CFRelease(cf[0]);
                }

                if (v115[0])
                {
                  CFRelease(v115[0]);
                }

                if (v114)
                {
                  CFRelease(v114);
                }

                if (v113)
                {
                  CFRelease(v113);
                }

                if (theArray)
                {
                  CFRelease(theArray);
                }

                if (v111)
                {
                  CFRelease(v111);
                }

                if (v110)
                {
                  CFRelease(v110);
                }

                if (v97 && v93)
                {
                  fampb_notifyFilterChangeAndRecordStallRiskListUnlocked(*a1, v93, Mutable);
                }

                goto LABEL_223;
              }

              ValueAtIndex = CFArrayGetValueAtIndex(v111, i);
              if (FigCFEqual())
              {
                v55 = 1;
              }

              else
              {
                FigAlternateScaleBitrateFractionToNewAlternate(*(a1 + 40), ValueAtIndex);
                if (v59 * FigAlternateGetPeakBitRate(ValueAtIndex) > *(a1 + 328))
                {
                  goto LABEL_145;
                }

                if (!FigCFEqual())
                {
                  v60 = *(a1 + 16);
                  if (v60 && (v61 = *(a1 + 8)) != 0)
                  {
                    OUTLINED_FUNCTION_9_43();
                    v70 = OUTLINED_FUNCTION_281(v62, v63, v64, v65, v66, v67, v68, v69, v102, v103, v104, v105, kStallCheckMargin, *(&kStallCheckMargin + 1), 0, v107, v108.value);
                    CMTimeSubtract(v72, v70, v71);
                    v73 = OUTLINED_FUNCTION_15_34();
                    *&v108.value = v74;
                    v108.epoch = *(a1 + 312);
                    if (v60(v61, ValueAtIndex, &v108, &v109, HIDWORD(v104), v73))
                    {
                      goto LABEL_145;
                    }
                  }

                  else
                  {
                    OUTLINED_FUNCTION_9_43();
                    v83 = OUTLINED_FUNCTION_281(v75, v76, v77, v78, v79, v80, v81, v82, v102, v103, v104, v105, kStallCheckMargin, *(&kStallCheckMargin + 1), 0, v107, v108.value);
                    CMTimeSubtract(v85, v83, v84);
                    v86 = OUTLINED_FUNCTION_15_34();
                    *&v108.value = v87;
                    v108.epoch = *(a1 + 312);
                    if (fampb_rejectSwitchDueToStallRisk(a1 + 32, ValueAtIndex, &v108, &v109, v86))
                    {
LABEL_145:
                      CFArrayAppendValue(Mutable, ValueAtIndex);
                      continue;
                    }
                  }
                }
              }

              if (v37 < FigAlternateGetExpectedAverageBitrate(ValueAtIndex))
              {
                v37 = FigAlternateGetExpectedAverageBitrate(ValueAtIndex);
              }
            }
          }
        }
      }

      Mutable = 0;
    }

    v92 = 1;
    goto LABEL_173;
  }

  v5 = v105;
  cf[0] = 0;
  v114 = 0;
  v115[0] = 0;
  v113 = 0;
  theArray = 0;
  if (!v105 || !*(a1 + 40))
  {
    Mutable = 0;
    v10 = 0;
    v8 = 0;
LABEL_55:
    v7 = 1;
    goto LABEL_66;
  }

  v6 = *MEMORY[0x1E695E480];
  v7 = 1;
  v8 = fampb_copyAlternateListSortedByQuality((a1 + 32), *MEMORY[0x1E695E480], 1, &theArray);
  Mutable = 0;
  if (v8)
  {
    v10 = 0;
    goto LABEL_66;
  }

  v10 = 0;
  if (!theArray)
  {
    goto LABEL_66;
  }

  v10 = CFArrayCreateMutable(v6, 0, MEMORY[0x1E695E9C0]);
  if (!v10)
  {
    OUTLINED_FUNCTION_29_17();
    v27 = FigSignalErrorAtGM();
    goto LABEL_250;
  }

  v11 = *(a1 + 328);
  if (*(a1 + 113))
  {
    memset(&v109, 0, sizeof(v109));
    OUTLINED_FUNCTION_9_43();
    shouldSwitchUpConcurrently = fampb_shouldSwitchUpConcurrently(a1 + 32, v11, v41, &v108);
    if (*(a1 + 48))
    {
      Mutable = 0;
      v7 = 0;
      v8 = 0;
      goto LABEL_66;
    }

    v100 = shouldSwitchUpConcurrently;
    if (fampb_trialSwitchDownInProgress(a1 + 32) || (OUTLINED_FUNCTION_9_43(), fampb_shouldSwitchDownConcurrently(a1 + 32, v11, v101, &v108, &v109)))
    {
      v12 = 0;
    }

    else if (v100)
    {
      if (fampb_ConcurrentSwitchUpValidForLongEnough(a1 + 32))
      {
        v12 = 1;
      }

      else
      {
        v12 = 2;
      }
    }

    else
    {
      v12 = 2;
    }

    if (*(a1 + 113))
    {
      goto LABEL_17;
    }
  }

  else
  {
    v12 = *(a1 + 320);
  }

  if (v12 == 1)
  {
    v11 -= FigAlternateGetExpectedAverageBitrate(*(a1 + 40));
  }

LABEL_17:
  for (j = 0; ; ++j)
  {
    v14 = theArray;
    if (theArray)
    {
      v14 = CFArrayGetCount(theArray);
    }

    if (j >= v14)
    {
      break;
    }

    v15 = CFArrayGetValueAtIndex(theArray, j);
    if (FigCFEqual())
    {
      if (!v12 && *(a1 + 113) && j)
      {
        goto LABEL_44;
      }
    }

    else
    {
      if (*(a1 + 115) || *(a1 + 113) && !j)
      {
        v16 = 0;
      }

      else if (*(a1 + 16) && *(a1 + 8))
      {
        v21 = OUTLINED_FUNCTION_15_34();
        *&v109.value = v22;
        v109.epoch = *(a1 + 312);
        v108 = *(a1 + 336);
        v16 = v23(v21);
      }

      else
      {
        v25 = OUTLINED_FUNCTION_15_34();
        *&v109.value = v26;
        v109.epoch = *(a1 + 312);
        v108 = *(a1 + 336);
        v16 = fampb_rejectSwitchDueToStallRisk(a1 + 32, v15, &v109, &v108, v25);
      }

      if (!v16 && v12 == 1)
      {
        OUTLINED_FUNCTION_16_30();
        canSwitchDownConcurrentlyWithoutStall = fampb_canSwitchDownConcurrentlyWithoutStall(a1 + 32, 0.75, &v109, v24, v11, v15, 0);
LABEL_42:
        v16 = canSwitchDownConcurrentlyWithoutStall ^ 1;
LABEL_43:
        if (!v16)
        {
          continue;
        }

LABEL_44:
        CFArrayAppendValue(v10, v15);
        continue;
      }

      if (v16 | v12)
      {
        goto LABEL_43;
      }

      if (*(a1 + 113) && j)
      {
        if (v11 >= fampb_getRequiredBWForLowLatencyAlternate(a1 + 32, v15))
        {
          v17 = FigAlternateGetPeakBitRate(v15);
          if (v17 >= FigAlternateGetPeakBitRate(*(a1 + 40)))
          {
            continue;
          }

          OUTLINED_FUNCTION_16_30();
          canSwitchDownConcurrentlyWithoutStall = fampb_canSwitchDownConcurrentlyToAlternateWithoutStall(v15, a1 + 32, &v109, v18, v11, v19, 0, 1.0);
          goto LABEL_42;
        }

        goto LABEL_44;
      }
    }
  }

  if (CFArrayGetCount(v10) > 0)
  {
    v7 = 1;
    v27 = FigAlternateDenyListFilterCreate(v6, v10, @"ConcurrentDenyListFilter", 0x257u, 1, &v114);
    if (v27 || (v27 = FigAlternateFilterTreeInsertLeaf(v5, v114, 345)) != 0)
    {
LABEL_250:
      v8 = v27;
      Mutable = 0;
      goto LABEL_66;
    }
  }

  if (v12 == 1)
  {
    v28 = FigAlternateNextHighestPeakBitRateFilterCreate(v6, *(a1 + 40), &v113, 1.1);
    if (!v28)
    {
      v29 = v113;
      v30 = v5;
      v31 = 250;
      goto LABEL_53;
    }

    goto LABEL_54;
  }

  if ((v12 | 2) == 2)
  {
    v34 = FigAlternateGetPeakBitRate(*(a1 + 40));
    v28 = FigAlternatePeakBitRateCapFilterCreate(v6, v34, cf);
    if (v28)
    {
      goto LABEL_54;
    }

    v28 = FigAlternateFilterTreeInsertLeaf(v5, cf[0], 460);
    if (v28)
    {
      goto LABEL_54;
    }

    if (!v12 && !*(a1 + 113))
    {
      v28 = FigAlternateLowestVideoThenAudioFilterCreate(v6, v115);
      if (v28)
      {
        goto LABEL_54;
      }

      v29 = v115[0];
      v30 = v5;
      v31 = 230;
LABEL_53:
      v28 = FigAlternateFilterTreeInsertLeaf(v30, v29, v31);
      if (v28)
      {
LABEL_54:
        v8 = v28;
        Mutable = 0;
        goto LABEL_55;
      }
    }
  }

  v8 = 0;
  v7 = 1;
  Mutable = v10;
  v10 = 0;
LABEL_66:
  if (v114)
  {
    CFRelease(v114);
  }

  if (cf[0])
  {
    CFRelease(cf[0]);
  }

  if (v115[0])
  {
    CFRelease(v115[0]);
  }

  if (v113)
  {
    CFRelease(v113);
  }

  if (v10)
  {
    CFRelease(v10);
  }

  if (theArray)
  {
    CFRelease(theArray);
  }

  if (v8)
  {
    v35 = 0;
  }

  else
  {
    v35 = v7;
  }

  if (v35)
  {
    v4 = MEMORY[0x1E695E480];
    goto LABEL_178;
  }

LABEL_222:
  v93 = 0;
LABEL_223:
  fampb_releaseAndClearPlaybackFilterConfig(a1 + 32);
  v98 = *(a1 + 8);
  if (v98)
  {
    CFRelease(v98);
  }

  if (*a1)
  {
    CFRelease(*a1);
  }

  v99 = *(a1 + 288);
  if (v99)
  {
    CFRelease(v99);
  }

  free(a1);
  if (Mutable)
  {
    CFRelease(Mutable);
  }

  if (v105)
  {
    CFRelease(v105);
  }

  if (v93)
  {
    CFRelease(v93);
  }
}