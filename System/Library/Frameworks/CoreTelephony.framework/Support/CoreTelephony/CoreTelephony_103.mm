void sub_1006AF938(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 167) < 0)
  {
    operator delete(*(a2 + 144));
  }

  if (*(a2 + 136) == 1)
  {
    v3 = *(a2 + 112);
    if (v3)
    {
      *(a2 + 120) = v3;
      operator delete(v3);
    }
  }

  v4 = *(a2 + 88);
  if (v4)
  {
    *(a2 + 96) = v4;
    operator delete(v4);
  }

  v5 = *(a2 + 64);
  if (v5)
  {
    *(a2 + 72) = v5;
    operator delete(v5);
  }

  v6 = *(a2 + 40);
  if (v6)
  {
    *(a2 + 48) = v6;
    operator delete(v6);
  }

  if (*(a2 + 23) < 0)
  {
    v7 = *a2;

    operator delete(v7);
  }
}

void sub_1006AF9DC(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 167) < 0)
  {
    operator delete(*(a2 + 144));
  }

  if (*(a2 + 136) == 1)
  {
    v3 = *(a2 + 112);
    if (v3)
    {
      *(a2 + 120) = v3;
      operator delete(v3);
    }
  }

  v4 = *(a2 + 88);
  if (v4)
  {
    *(a2 + 96) = v4;
    operator delete(v4);
  }

  v5 = *(a2 + 64);
  if (v5)
  {
    *(a2 + 72) = v5;
    operator delete(v5);
  }

  v6 = *(a2 + 40);
  if (v6)
  {
    *(a2 + 48) = v6;
    operator delete(v6);
  }

  if (*(a2 + 23) < 0)
  {
    v7 = *a2;

    operator delete(v7);
  }
}

void sub_1006AFA80(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 199) < 0)
  {
    operator delete(*(a2 + 176));
  }

  if (*(a2 + 167) < 0)
  {
    operator delete(*(a2 + 144));
  }

  if (*(a2 + 136) == 1)
  {
    v3 = *(a2 + 112);
    if (v3)
    {
      *(a2 + 120) = v3;
      operator delete(v3);
    }
  }

  v4 = *(a2 + 88);
  if (v4)
  {
    *(a2 + 96) = v4;
    operator delete(v4);
  }

  v5 = *(a2 + 64);
  if (v5)
  {
    *(a2 + 72) = v5;
    operator delete(v5);
  }

  v6 = *(a2 + 40);
  if (v6)
  {
    *(a2 + 48) = v6;
    operator delete(v6);
  }

  if (*(a2 + 23) < 0)
  {
    v7 = *a2;

    operator delete(v7);
  }
}

void sub_1006AFB34(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 167) < 0)
  {
    operator delete(*(a2 + 144));
  }

  if (*(a2 + 136) == 1)
  {
    v3 = *(a2 + 112);
    if (v3)
    {
      *(a2 + 120) = v3;
      operator delete(v3);
    }
  }

  v4 = *(a2 + 88);
  if (v4)
  {
    *(a2 + 96) = v4;
    operator delete(v4);
  }

  v5 = *(a2 + 64);
  if (v5)
  {
    *(a2 + 72) = v5;
    operator delete(v5);
  }

  v6 = *(a2 + 40);
  if (v6)
  {
    *(a2 + 48) = v6;
    operator delete(v6);
  }

  if (*(a2 + 23) < 0)
  {
    v7 = *a2;

    operator delete(v7);
  }
}

void sub_1006AFBE0(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 167) < 0)
  {
    operator delete(*(a2 + 144));
  }

  if (*(a2 + 136) == 1)
  {
    v3 = *(a2 + 112);
    if (v3)
    {
      *(a2 + 120) = v3;
      operator delete(v3);
    }
  }

  v4 = *(a2 + 88);
  if (v4)
  {
    *(a2 + 96) = v4;
    operator delete(v4);
  }

  v5 = *(a2 + 64);
  if (v5)
  {
    *(a2 + 72) = v5;
    operator delete(v5);
  }

  v6 = *(a2 + 40);
  if (v6)
  {
    *(a2 + 48) = v6;
    operator delete(v6);
  }

  if (*(a2 + 23) < 0)
  {
    v7 = *a2;

    operator delete(v7);
  }
}

uint64_t sub_1006AFC8C(uint64_t a1)
{
  v2 = *(a1 + 200);
  if (v2)
  {
    *(a1 + 208) = v2;
    operator delete(v2);
  }

  v3 = *(a1 + 176);
  if (v3)
  {
    *(a1 + 184) = v3;
    operator delete(v3);
  }

  if (*(a1 + 167) < 0)
  {
    operator delete(*(a1 + 144));
  }

  if (*(a1 + 136) == 1)
  {
    v4 = *(a1 + 112);
    if (v4)
    {
      *(a1 + 120) = v4;
      operator delete(v4);
    }
  }

  v5 = *(a1 + 88);
  if (v5)
  {
    *(a1 + 96) = v5;
    operator delete(v5);
  }

  v6 = *(a1 + 64);
  if (v6)
  {
    *(a1 + 72) = v6;
    operator delete(v6);
  }

  v7 = *(a1 + 40);
  if (v7)
  {
    *(a1 + 48) = v7;
    operator delete(v7);
  }

  if (*(a1 + 23) < 0)
  {
    operator delete(*a1);
  }

  return a1;
}

uint64_t sub_1006AFD3C(uint64_t a1)
{
  v7 = (a1 + 176);
  sub_10003CA58(&v7);
  if (*(a1 + 167) < 0)
  {
    operator delete(*(a1 + 144));
  }

  if (*(a1 + 136) == 1)
  {
    v2 = *(a1 + 112);
    if (v2)
    {
      *(a1 + 120) = v2;
      operator delete(v2);
    }
  }

  v3 = *(a1 + 88);
  if (v3)
  {
    *(a1 + 96) = v3;
    operator delete(v3);
  }

  v4 = *(a1 + 64);
  if (v4)
  {
    *(a1 + 72) = v4;
    operator delete(v4);
  }

  v5 = *(a1 + 40);
  if (v5)
  {
    *(a1 + 48) = v5;
    operator delete(v5);
  }

  if (*(a1 + 23) < 0)
  {
    operator delete(*a1);
  }

  return a1;
}

uint64_t sub_1006AFDE4(uint64_t a1)
{
  v2 = *(a1 + 176);
  if (v2)
  {
    *(a1 + 184) = v2;
    operator delete(v2);
  }

  if (*(a1 + 167) < 0)
  {
    operator delete(*(a1 + 144));
  }

  if (*(a1 + 136) == 1)
  {
    v3 = *(a1 + 112);
    if (v3)
    {
      *(a1 + 120) = v3;
      operator delete(v3);
    }
  }

  v4 = *(a1 + 88);
  if (v4)
  {
    *(a1 + 96) = v4;
    operator delete(v4);
  }

  v5 = *(a1 + 64);
  if (v5)
  {
    *(a1 + 72) = v5;
    operator delete(v5);
  }

  v6 = *(a1 + 40);
  if (v6)
  {
    *(a1 + 48) = v6;
    operator delete(v6);
  }

  if (*(a1 + 23) < 0)
  {
    operator delete(*a1);
  }

  return a1;
}

uint64_t sub_1006AFE8C(char **a1, uint64_t a2)
{
  v3 = *a1;
  sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v4 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v4;
  }

  v5 = *(a2 + 168);
  *(v3 + 22) = 0;
  *(v3 + 21) = v5;
  *(v3 + 23) = 0;
  *(v3 + 24) = 0;
  return sub_100581F6C((v3 + 176), *(a2 + 176), *(a2 + 184), (*(a2 + 184) - *(a2 + 176)) >> 5);
}

uint64_t sub_1006AFF30(char **a1, uint64_t a2)
{
  v3 = *a1;
  sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v4 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v4;
  }

  v5 = *(a2 + 168);
  *(v3 + 22) = 0;
  *(v3 + 21) = v5;
  *(v3 + 23) = 0;
  *(v3 + 24) = 0;
  return sub_100581F6C((v3 + 176), *(a2 + 176), *(a2 + 184), (*(a2 + 184) - *(a2 + 176)) >> 5);
}

uint64_t sub_1006AFFD4(char **a1, uint64_t a2)
{
  v3 = *a1;
  sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v4 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v4;
  }

  v5 = *(a2 + 168);
  *(v3 + 22) = 0;
  *(v3 + 21) = v5;
  *(v3 + 23) = 0;
  *(v3 + 24) = 0;
  return sub_100581F6C((v3 + 176), *(a2 + 176), *(a2 + 184), (*(a2 + 184) - *(a2 + 176)) >> 5);
}

void *sub_1006B0078(char **a1, uint64_t a2)
{
  v3 = *a1;
  result = sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    result = sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v5 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v5;
  }

  *(v3 + 21) = *(a2 + 168);
  return result;
}

void *sub_1006B00E8(char **a1, uint64_t a2)
{
  v3 = *a1;
  result = sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    result = sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v5 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v5;
  }

  *(v3 + 21) = *(a2 + 168);
  return result;
}

void *sub_1006B0158(char **a1, uint64_t a2)
{
  v3 = *a1;
  result = sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    result = sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v5 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v5;
  }

  *(v3 + 21) = *(a2 + 168);
  if (*(a2 + 199) < 0)
  {
    return sub_100005F2C(v3 + 176, *(a2 + 176), *(a2 + 184));
  }

  v6 = *(a2 + 176);
  *(v3 + 24) = *(a2 + 192);
  *(v3 + 11) = v6;
  return result;
}

void sub_1006B01DC(_Unwind_Exception *a1)
{
  if (*(v1 + 167) < 0)
  {
    operator delete(*(v1 + 144));
  }

  sub_100581DC0(v1);
  _Unwind_Resume(a1);
}

void *sub_1006B0208(char **a1, uint64_t a2)
{
  v3 = *a1;
  result = sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    result = sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v5 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v5;
  }

  *(v3 + 21) = *(a2 + 168);
  return result;
}

uint64_t sub_1006B0278(char **a1, uint64_t a2)
{
  v3 = *a1;
  sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v4 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v4;
  }

  v5 = *(a2 + 168);
  *(v3 + 22) = 0;
  *(v3 + 21) = v5;
  *(v3 + 23) = 0;
  *(v3 + 24) = 0;
  return sub_100034C50((v3 + 176), *(a2 + 176), *(a2 + 184), *(a2 + 184) - *(a2 + 176));
}

void *sub_1006B0318(char **a1, uint64_t a2)
{
  v3 = *a1;
  result = sub_100581E40(*a1, a2);
  if (*(a2 + 167) < 0)
  {
    result = sub_100005F2C(v3 + 144, *(a2 + 144), *(a2 + 152));
  }

  else
  {
    v5 = *(a2 + 144);
    *(v3 + 20) = *(a2 + 160);
    *(v3 + 9) = v5;
  }

  *(v3 + 21) = *(a2 + 168);
  return result;
}

uint64_t sub_1006B0390(uint64_t a1)
{
  v8 = (a1 + 168);
  sub_10003CA58(&v8);
  v2 = *(a1 + 144);
  if (v2)
  {
    *(a1 + 152) = v2;
    operator delete(v2);
  }

  if (*(a1 + 136) == 1)
  {
    v3 = *(a1 + 112);
    if (v3)
    {
      *(a1 + 120) = v3;
      operator delete(v3);
    }
  }

  v4 = *(a1 + 88);
  if (v4)
  {
    *(a1 + 96) = v4;
    operator delete(v4);
  }

  v5 = *(a1 + 64);
  if (v5)
  {
    *(a1 + 72) = v5;
    operator delete(v5);
  }

  v6 = *(a1 + 40);
  if (v6)
  {
    *(a1 + 48) = v6;
    operator delete(v6);
  }

  if (*(a1 + 23) < 0)
  {
    operator delete(*a1);
  }

  return a1;
}

uint64_t sub_1006B0438(uint64_t a1)
{
  if (*(a1 + 168) == 1)
  {
    v2 = *(a1 + 144);
    if (v2)
    {
      *(a1 + 152) = v2;
      operator delete(v2);
    }

    if (*(a1 + 136) == 1)
    {
      v3 = *(a1 + 112);
      if (v3)
      {
        *(a1 + 120) = v3;
        operator delete(v3);
      }
    }

    v4 = *(a1 + 88);
    if (v4)
    {
      *(a1 + 96) = v4;
      operator delete(v4);
    }

    v5 = *(a1 + 64);
    if (v5)
    {
      *(a1 + 72) = v5;
      operator delete(v5);
    }

    v6 = *(a1 + 40);
    if (v6)
    {
      *(a1 + 48) = v6;
      operator delete(v6);
    }

    if (*(a1 + 23) < 0)
    {
      operator delete(*a1);
    }
  }

  return a1;
}

uint64_t sub_1006B04D4(uint64_t a1, uint64_t a2)
{
  *a1 = 0;
  *(a1 + 224) = -1;
  sub_1006B050C(a1, a2);
  return a1;
}

uint64_t sub_1006B050C(uint64_t a1, uint64_t a2)
{
  result = sub_1006AF788(a1);
  v5 = *(a2 + 224);
  if (v5 != -1)
  {
    v6 = a1;
    result = (off_101E706D8[v5])(&v6, a2);
    *(a1 + 224) = v5;
  }

  return result;
}

uint64_t sub_1006B0570(uint64_t a1, uint64_t a2)
{
  *a1 = 0;
  *(a1 + 200) = -1;
  sub_1006B05A8(a1, a2);
  return a1;
}

uint64_t sub_1006B05A8(uint64_t a1, uint64_t a2)
{
  result = sub_100583454(a1);
  v5 = *(a2 + 200);
  if (v5 != -1)
  {
    v6 = a1;
    result = (off_101E70730[v5])(&v6, a2);
    *(a1 + 200) = v5;
  }

  return result;
}

uint64_t sub_1006B060C(uint64_t a1, uint64_t a2)
{
  *a1 = 0;
  *(a1 + 32) = -1;
  sub_1006B0644(a1, a2);
  return a1;
}

uint64_t sub_1006B0644(uint64_t a1, uint64_t a2)
{
  result = sub_100582310(a1);
  v5 = *(a2 + 32);
  if (v5 != -1)
  {
    v6 = a1;
    result = (*(&off_101E70790 + v5))(&v6, a2);
    *(a1 + 32) = v5;
  }

  return result;
}

uint64_t sub_1006B06A8(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

void *sub_1006B0728(void *a1)
{
  *a1 = off_101E707C0;
  v2 = a1[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B0774(void *a1)
{
  *a1 = off_101E707C0;
  v1 = a1[3];
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }

  operator delete();
}

uint64_t sub_1006B0854(uint64_t result, uint64_t a2)
{
  *a2 = off_101E707C0;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 24);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  return result;
}

void sub_1006B0894(uint64_t a1)
{
  v1 = *(a1 + 24);
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }
}

void sub_1006B08A4(void *__p)
{
  v2 = __p[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(__p);
}

void sub_1006B08E4(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_1017796E4();
        }
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B09A0(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

void *sub_1006B09EC(void *a1)
{
  *a1 = off_101E70840;
  sub_100683200((a1 + 1));
  return a1;
}

void sub_1006B0A30(void *a1)
{
  *a1 = off_101E70840;
  sub_100683200((a1 + 1));

  operator delete();
}

void sub_1006B0B40(void *a1)
{
  sub_100683200(a1 + 8);

  operator delete(a1);
}

uint64_t sub_1006B0B7C(uint64_t a1, uint64_t a2)
{
  sub_1006B04D4(v98, a2 + 8);
  v3 = *(a1 + 152);
  if (v3)
  {
    v4 = *(a1 + 8);
    v5 = std::__shared_weak_count::lock(v3);
    if (v5)
    {
      v6 = v5;
      if (!*(a1 + 144))
      {
LABEL_196:
        sub_100004A34(v6);
        return sub_1006AF788(v98);
      }

      dispatch_assert_queue_V2(*(v4 + 24));
      sub_1006AF6DC(v138, v98);
      if (v138[56])
      {
        v7 = 0;
        v94[0] = 0;
      }

      else
      {
        sub_100583134(v94, v138);
        v7 = 1;
      }

      v97 = v7;
      sub_1006AF788(v138);
      if (v97 == 1)
      {
        __p[0] = 0;
        __p[1] = 0;
        v37[0] = 0;
        sub_100034C50(__p, *(a1 + 112), *(a1 + 120), *(a1 + 120) - *(a1 + 112));
        sub_1006AD8F0(buf, v95, v96, __p);
        v99[0] = xpc_data_create(__p[0], __p[1] - __p[0]);
        if (!v99[0])
        {
          v99[0] = xpc_null_create();
        }

        *buf = a1 + 136;
        *&buf[8] = ims::lazuli::kBody;
        sub_10000F688(buf, v99, &object);
        xpc_release(object);
        object = 0;
        xpc_release(v99[0]);
        v99[0] = 0;
        v8 = *(a1 + 136);
        v85 = v8;
        if (v8)
        {
          xpc_retain(v8);
        }

        else
        {
          v85 = xpc_null_create();
        }

        LOBYTE(__dst[0]) = 1;
        LOBYTE(__dst[1]) = 0;
        v137 = 0;
        buf[0] = 1;
        buf[8] = 0;
        v109 = 0;
        v110 = 1;
        sub_10067E76C();
        if (v110 == 1 && v109 == 1)
        {
          sub_1002AF7A0(&v102);
        }

        if (v137 == 1)
        {
          sub_1002AF7A0(&v120);
        }

        xpc_release(v85);
        v85 = 0;
        v10 = *(v4 + 432);
        if (v10)
        {
          if (*(a1 + 183) < 0)
          {
            sub_100005F2C(__dst, *(a1 + 160), *(a1 + 168));
          }

          else
          {
            *__dst = *(a1 + 160);
            *&v120 = *(a1 + 176);
          }

          (*(*v10 + 32))(v10, __dst, 0);
          sub_101760E98(__dst);
        }

        if (__p[0])
        {
          __p[1] = __p[0];
          operator delete(__p[0]);
        }

        goto LABEL_194;
      }

      sub_1006AF6DC(v112, v98);
      if (v118 == 8)
      {
        sub_100581E40(v88, v112);
        if (SHIBYTE(v114) < 0)
        {
          sub_100005F2C(&v89, __src, *(&__src + 1));
        }

        else
        {
          v89 = __src;
          v90 = v114;
        }

        v91 = v115;
        memset(&v92, 0, sizeof(v92));
        sub_100034C50(&v92, v116, v117, v117 - v116);
        v9 = 1;
      }

      else
      {
        v9 = 0;
        v88[0] = 0;
      }

      v93[0] = v9;
      sub_1006AF788(v112);
      if (v93[0] == 1)
      {
        if ((*(a1 + 40) & 1) == 0 && *(a1 + 41) != 1)
        {
          v16 = *(v4 + 240);
          if (*(a1 + 39) < 0)
          {
            sub_100005F2C(buf, *(a1 + 16), *(a1 + 24));
          }

          else
          {
            *buf = *(a1 + 16);
            v102 = *(a1 + 32);
          }

          LOBYTE(v103) = 0;
          LOBYTE(v104) = 0;
          BYTE8(v104) = 0;
          v106 = 0;
          LazuliMLSMessageId::toString(&v92, __dst);
          BYTE8(v120) = 0;
          BYTE8(v121) = 0;
          LOBYTE(v122[0]) = 0;
          BYTE8(v124) = 0;
          sub_100C17E6C(__p, a1 + 48);
          sub_100B98290(v16, buf, __dst);
        }

        v86 = 0;
        v85 = 0;
        sub_100686968(a1 + 48, buf);
        sub_100679904(v4, buf, &v85);
        if (SHIBYTE(v102) < 0)
        {
          operator delete(*buf);
        }

        if (v85)
        {
          v11 = *(v4 + 240);
          if (*(a1 + 39) < 0)
          {
            sub_100005F2C(__dst, *(a1 + 16), *(a1 + 24));
          }

          else
          {
            *__dst = *(a1 + 16);
            *&v120 = *(a1 + 32);
          }

          BYTE8(v120) = 0;
          BYTE8(v121) = 0;
          LOBYTE(v122[0]) = 0;
          BYTE8(v124) = 0;
          LazuliMLSMessageId::toString(&v92, __p);
          LOBYTE(v37[1]) = 0;
          BYTE8(v38) = 0;
          LOBYTE(v39[0]) = 0;
          BYTE8(v41) = 0;
          sub_10091601C(v85, buf);
          sub_100C17E6C(v99, &v89);
          sub_100B98558(v11, __dst, __p);
        }

        v14 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
        if (os_log_type_enabled(*v14, OS_LOG_TYPE_ERROR))
        {
          sub_1017797B4();
        }

        v15 = *(v4 + 432);
        if (v15)
        {
          if (*(a1 + 183) < 0)
          {
            sub_100005F2C(buf, *(a1 + 160), *(a1 + 168));
          }

          else
          {
            *buf = *(a1 + 160);
            v102 = *(a1 + 176);
          }

          (*(*v15 + 32))(v15, buf, 0x200000000);
          if (SHIBYTE(v102) < 0)
          {
            operator delete(*buf);
          }
        }

        if (v86)
        {
          sub_100004A34(v86);
        }

LABEL_193:
        sub_10177982C(v93, v88);
LABEL_194:
        if (v97 == 1)
        {
          sub_1006AFC8C(v94);
        }

        goto LABEL_196;
      }

      sub_1006AF6DC(&v99[1], v98);
      if (v100 == 10)
      {
        sub_1005833A8(&v85, &v99[1]);
        v12 = 1;
      }

      else
      {
        v12 = 0;
        LOBYTE(v85) = 0;
      }

      v87 = v12;
      sub_1006AF788(&v99[1]);
      if (v87 != 1)
      {
        v13 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
        if (os_log_type_enabled(*v13, OS_LOG_TYPE_ERROR))
        {
          sub_101779718();
        }

        goto LABEL_191;
      }

      sub_1005833A8(v72, &v85);
      if (v78 == 6)
      {
        sub_100581E40(v79, v72);
        if (SHIBYTE(v74) < 0)
        {
          sub_100005F2C(&v80, v73, *(&v73 + 1));
        }

        else
        {
          v80 = v73;
          v81 = v74;
        }

        v82 = v75;
        memset(&v83, 0, sizeof(v83));
        sub_100034C50(&v83, v76, v77, v77 - v76);
        v17 = 1;
      }

      else
      {
        v17 = 0;
        v79[0] = 0;
      }

      v84[0] = v17;
      sub_100583454(v72);
      if (v84[0] != 1)
      {
        v18 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
        if (os_log_type_enabled(*v18, OS_LOG_TYPE_ERROR))
        {
          sub_10177974C();
        }

        goto LABEL_190;
      }

      v70 = 0u;
      v71 = 0u;
      v68 = 0u;
      *v69 = 0u;
      *v66 = 0u;
      v67 = 0u;
      sub_100A972E8(v66);
      BYTE8(v67) = 0;
      BYTE8(v68) = 0;
      LOBYTE(v69[0]) = 0;
      BYTE8(v71) = 0;
      *v64 = 0u;
      v65 = 0u;
      memset(v63, 0, sizeof(v63));
      *v61 = 0u;
      v62 = 0u;
      *v60 = 0u;
      if (SHIBYTE(v81) < 0)
      {
        sub_100005F2C(v60, v80, *(&v80 + 1));
      }

      else
      {
        *v60 = v80;
        v61[0] = v81;
      }

      BYTE8(v63[0]) = 0;
      LOBYTE(v64[0]) = 0;
      v65 = 0uLL;
      v64[1] = 0;
      v62 = 0uLL;
      v61[1] = 0;
      LOBYTE(v63[0]) = 0;
      v59 = 0;
      v57 = 0u;
      v58 = 0u;
      v55 = 0u;
      *v56 = 0u;
      *v53 = 0u;
      v54 = 0u;
      LODWORD(v53[0]) = 5;
      LazuliMLSMessageId::toString(&v83, &v53[1]);
      LOBYTE(v55) = 0;
      LOBYTE(v56[0]) = 0;
      LOBYTE(v56[1]) = 0;
      LOBYTE(v59) = 0;
      if ((*(a1 + 40) & 1) != 0 || *(a1 + 41) == 1)
      {
        v136 = 0;
        v135 = 0u;
        memset(v134, 0, sizeof(v134));
        v133 = 0u;
        v132 = 0u;
        v131 = 0u;
        v130 = 0u;
        v129 = 0u;
        v128 = 0u;
        v127 = 0u;
        v126 = 0u;
        v125 = 0u;
        v124 = 0u;
        v123 = 0u;
        *v122 = 0u;
        v121 = 0u;
        v120 = 0u;
        *__dst = 0u;
        v19 = *(v4 + 232);
        if (v19)
        {
          v20 = std::__shared_weak_count::lock(v19);
          if (v20)
          {
            v21 = *(v4 + 224);
            if (v21)
            {
              *v39 = 0u;
              v40 = 0u;
              *v37 = 0u;
              v38 = 0u;
              *__p = 0u;
              sub_100679330(v4, (a1 + 72), __p);
              if ((BYTE8(v40) & 1) == 0)
              {
                v22 = *(*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
                if (os_log_type_enabled(v22, OS_LOG_TYPE_DEFAULT))
                {
                  *buf = 0;
                  _os_log_impl(&_mh_execute_header, v22, OS_LOG_TYPE_DEFAULT, "#I Falling back to deprecated fDestination ctor.", buf, 2u);
                }

                if (*(a1 + 95) < 0)
                {
                  sub_100005F2C(buf, *(a1 + 72), *(a1 + 80));
                }

                else
                {
                  *buf = *(a1 + 72);
                  v102 = *(a1 + 88);
                }

                v105 = 0u;
                v104 = 0u;
                v103 = 0u;
                sub_1000D1E08(__p, buf);
                sub_1000CFBA0(buf);
              }

              (*(*v21 + 48))(buf, v21, *(v4 + 96), v66, __p);
              sub_1006B2470(__dst, buf);
              if (v108 == 1)
              {
                if (v107)
                {
                  sub_100004A34(v107);
                }

                sub_100C18C58(buf);
              }

              if (BYTE8(v40) == 1)
              {
                if (SBYTE7(v40) < 0)
                {
                  operator delete(v39[0]);
                }

                if (SHIBYTE(v38) < 0)
                {
                  operator delete(v37[1]);
                }

                if (SHIBYTE(v37[0]) < 0)
                {
                  operator delete(__p[0]);
                }
              }

              goto LABEL_118;
            }
          }
        }

        else
        {
          v20 = 0;
        }

        v23 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
        if (os_log_type_enabled(*v23, OS_LOG_TYPE_ERROR))
        {
          sub_101779780();
        }

        if (!v20)
        {
LABEL_119:
          v30 = v136;
          if (v136)
          {
            v52 = 0u;
            v50 = 0u;
            memset(v51, 0, sizeof(v51));
            v48 = 0u;
            v49 = 0u;
            v46 = 0u;
            v47 = 0u;
            v44 = 0u;
            v45 = 0u;
            v42 = 0u;
            v43 = 0u;
            v40 = 0u;
            v41 = 0u;
            v38 = 0u;
            *v39 = 0u;
            *__p = 0u;
            *v37 = 0u;
            sub_1006A0A6C(__p, __dst);
            __p[0] = off_101EC8DD8;
            if (SHIBYTE(v134[3]) < 0)
            {
              sub_100005F2C(v51 + 8, v134[1], v134[2]);
            }

            else
            {
              *(v51 + 8) = *&v134[1];
              *(&v51[1] + 1) = v134[3];
            }

            v32 = v135;
            v52 = v135;
            if (*(&v135 + 1))
            {
              atomic_fetch_add_explicit((*(&v135 + 1) + 8), 1uLL, memory_order_relaxed);
              v32 = v52;
            }

            buf[0] = 1;
            buf[8] = 0;
            v109 = 0;
            v33 = sub_10069A078(v32, __p, v60, v53, buf);
            if (v109 == 1)
            {
              sub_1002AF7A0(&v102);
            }

            v34 = *(v4 + 432);
            if (v34)
            {
              if (*(a1 + 183) < 0)
              {
                sub_100005F2C(buf, *(a1 + 160), *(a1 + 168));
              }

              else
              {
                *buf = *(a1 + 160);
                v102 = *(a1 + 176);
              }

              (*(*v34 + 32))(v34, buf, (2 * v33) & 0x200000000);
              sub_101760E98(buf);
            }

            if (*(&v52 + 1))
            {
              sub_100004A34(*(&v52 + 1));
            }

            sub_100C18C58(__p);
          }

          else
          {
            v31 = *(v4 + 432);
            if (v31)
            {
              if (*(a1 + 183) < 0)
              {
                sub_100005F2C(buf, *(a1 + 160), *(a1 + 168));
              }

              else
              {
                *buf = *(a1 + 160);
                v102 = *(a1 + 176);
              }

              (*(*v31 + 32))(v31, buf, 0x200000000);
              sub_101760E98(buf);
            }
          }

          if (v136 == 1)
          {
            if (*(&v135 + 1))
            {
              sub_100004A34(*(&v135 + 1));
            }

            sub_100C18C58(__dst);
          }

          if (v30)
          {
            if (v59 == 1 && SHIBYTE(v57) < 0)
            {
              operator delete(v56[1]);
            }

            if (SHIBYTE(v54) < 0)
            {
              operator delete(v53[1]);
            }

            if (SHIBYTE(v65) < 0)
            {
              operator delete(v64[1]);
            }

            if (LOBYTE(v64[0]) == 1)
            {
              __dst[0] = v63 + 8;
              sub_1000087B4(__dst);
            }

            if (SHIBYTE(v62) < 0)
            {
              operator delete(v61[1]);
            }

            if (SHIBYTE(v61[0]) < 0)
            {
              operator delete(v60[0]);
            }

            if (BYTE8(v71) == 1 && SBYTE7(v70) < 0)
            {
              operator delete(v69[0]);
            }

            if (SBYTE7(v67) < 0)
            {
              operator delete(v66[0]);
            }

LABEL_190:
            sub_10177982C(v84, v79);
LABEL_191:
            if (v87 == 1)
            {
              sub_100583454(&v85);
            }

            goto LABEL_193;
          }

LABEL_149:
          if (v59 == 1 && SHIBYTE(v57) < 0)
          {
            operator delete(v56[1]);
          }

          if (SHIBYTE(v54) < 0)
          {
            operator delete(v53[1]);
          }

          if (SHIBYTE(v65) < 0)
          {
            operator delete(v64[1]);
          }

          if (LOBYTE(v64[0]) == 1)
          {
            __dst[0] = v63 + 8;
            sub_1000087B4(__dst);
          }

          if (SHIBYTE(v62) < 0)
          {
            operator delete(v61[1]);
          }

          if (SHIBYTE(v61[0]) < 0)
          {
            operator delete(v60[0]);
          }

          if (BYTE8(v71) == 1 && SBYTE7(v70) < 0)
          {
            operator delete(v69[0]);
          }

          if (SBYTE7(v67) < 0)
          {
            operator delete(v66[0]);
          }

          if (v84[0] == 1)
          {
            sub_1006AFDE4(v79);
          }

          if (v87 == 1)
          {
            sub_100583454(&v85);
          }

          goto LABEL_193;
        }

LABEL_118:
        sub_100004A34(v20);
        goto LABEL_119;
      }

      v136 = 0;
      v135 = 0u;
      memset(v134, 0, sizeof(v134));
      v133 = 0u;
      v132 = 0u;
      v131 = 0u;
      v130 = 0u;
      v129 = 0u;
      v128 = 0u;
      v127 = 0u;
      v126 = 0u;
      v125 = 0u;
      v124 = 0u;
      v123 = 0u;
      *v122 = 0u;
      v121 = 0u;
      v120 = 0u;
      *__dst = 0u;
      v24 = *(v4 + 232);
      if (v24)
      {
        v25 = std::__shared_weak_count::lock(v24);
        if (v25)
        {
          v26 = *(v4 + 224);
          if (v26)
          {
            (*(*v26 + 40))(buf);
            sub_1006B2638(__dst, buf);
            sub_10067AAC8(buf);
LABEL_97:
            sub_100004A34(v25);
LABEL_98:
            if (v136)
            {
              v52 = 0u;
              v50 = 0u;
              memset(v51, 0, sizeof(v51));
              v48 = 0u;
              v49 = 0u;
              v46 = 0u;
              v47 = 0u;
              v44 = 0u;
              v45 = 0u;
              v42 = 0u;
              v43 = 0u;
              v40 = 0u;
              v41 = 0u;
              v38 = 0u;
              *v39 = 0u;
              *__p = 0u;
              *v37 = 0u;
              sub_1006A09EC(__p, __dst);
              v28 = v135;
              v52 = v135;
              if (*(&v135 + 1))
              {
                atomic_fetch_add_explicit((*(&v135 + 1) + 8), 1uLL, memory_order_relaxed);
                v28 = v52;
              }

              buf[0] = 1;
              buf[8] = 0;
              v109 = 0;
              sub_100697FE4(v28, __p, v53);
            }

            v29 = *(v4 + 432);
            if (v29)
            {
              if (*(a1 + 183) < 0)
              {
                sub_100005F2C(buf, *(a1 + 160), *(a1 + 168));
              }

              else
              {
                *buf = *(a1 + 160);
                v102 = *(a1 + 176);
              }

              (*(*v29 + 32))(v29, buf, 0x200000000);
              sub_101760E98(buf);
            }

            sub_10067AAC8(__dst);
            goto LABEL_149;
          }
        }
      }

      else
      {
        v25 = 0;
      }

      v27 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
      if (os_log_type_enabled(*v27, OS_LOG_TYPE_ERROR))
      {
        sub_101779780();
      }

      if (!v25)
      {
        goto LABEL_98;
      }

      goto LABEL_97;
    }
  }

  return sub_1006AF788(v98);
}

void sub_1006B1D5C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void *a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, char a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, uint64_t a52, uint64_t a53, uint64_t a54, uint64_t a55, uint64_t a56, uint64_t a57, uint64_t a58, char a59)
{
  sub_1006A0C08(&a9);
  sub_10067AAC8(&STACK[0xAB0]);
  sub_1006B2728(&a45);
  sub_10067AA50(&a59);
  sub_10067A5EC(&STACK[0x200]);
  if (LOBYTE(STACK[0x3F8]) == 1)
  {
    sub_1006AFDE4(&STACK[0x330]);
  }

  if (LOBYTE(STACK[0x4D0]) == 1)
  {
    sub_100583454(&STACK[0x400]);
  }

  if (LOBYTE(STACK[0x5A0]) == 1)
  {
    sub_1006AFDE4(&STACK[0x4D8]);
  }

  if (LOBYTE(STACK[0x688]) == 1)
  {
    sub_1006AFC8C(&STACK[0x5A8]);
  }

  sub_100004A34(v59);
  sub_1006AF788(v60 + 8);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B21BC(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B2208(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  if (*(a2 + 31) < 0)
  {
    sub_100005F2C((a1 + 8), *(a2 + 8), *(a2 + 16));
  }

  else
  {
    v4 = *(a2 + 8);
    *(a1 + 24) = *(a2 + 24);
    *(a1 + 8) = v4;
  }

  *(a1 + 32) = *(a2 + 32);
  if (*(a2 + 63) < 0)
  {
    sub_100005F2C((a1 + 40), *(a2 + 40), *(a2 + 48));
  }

  else
  {
    v5 = *(a2 + 40);
    *(a1 + 56) = *(a2 + 56);
    *(a1 + 40) = v5;
  }

  if (*(a2 + 87) < 0)
  {
    sub_100005F2C((a1 + 64), *(a2 + 64), *(a2 + 72));
  }

  else
  {
    v6 = *(a2 + 64);
    *(a1 + 80) = *(a2 + 80);
    *(a1 + 64) = v6;
  }

  v7 = *(a2 + 96);
  *(a1 + 88) = *(a2 + 88);
  *(a1 + 96) = v7;
  if (v7)
  {
    atomic_fetch_add_explicit((v7 + 8), 1uLL, memory_order_relaxed);
  }

  *(a1 + 104) = 0;
  *(a1 + 112) = 0;
  *(a1 + 120) = 0;
  sub_100034C50(a1 + 104, *(a2 + 104), *(a2 + 112), *(a2 + 112) - *(a2 + 104));
  v8 = *(a2 + 128);
  *(a1 + 128) = v8;
  if (v8)
  {
    xpc_retain(v8);
  }

  else
  {
    *(a1 + 128) = xpc_null_create();
  }

  v9 = *(a2 + 144);
  *(a1 + 136) = *(a2 + 136);
  *(a1 + 144) = v9;
  if (v9)
  {
    atomic_fetch_add_explicit((v9 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 175) < 0)
  {
    sub_100005F2C((a1 + 152), *(a2 + 152), *(a2 + 160));
  }

  else
  {
    v10 = *(a2 + 152);
    *(a1 + 168) = *(a2 + 168);
    *(a1 + 152) = v10;
  }

  if (*(a2 + 199) < 0)
  {
    sub_100005F2C((a1 + 176), *(a2 + 176), *(a2 + 184));
  }

  else
  {
    v11 = *(a2 + 176);
    *(a1 + 192) = *(a2 + 192);
    *(a1 + 176) = v11;
  }

  *(a1 + 200) = *(a2 + 200);
  if (*(a2 + 231) < 0)
  {
    sub_100005F2C((a1 + 208), *(a2 + 208), *(a2 + 216));
  }

  else
  {
    v12 = *(a2 + 208);
    *(a1 + 224) = *(a2 + 224);
    *(a1 + 208) = v12;
  }

  return a1;
}

void sub_1006B23B8(_Unwind_Exception *a1)
{
  if (*(v1 + 199) < 0)
  {
    operator delete(*(v1 + 176));
  }

  if (*(v1 + 175) < 0)
  {
    operator delete(*(v1 + 152));
  }

  v6 = *(v1 + 144);
  if (v6)
  {
    std::__shared_weak_count::__release_weak(v6);
  }

  sub_100DC3ED0(v4);
  v7 = *v3;
  if (*v3)
  {
    *(v1 + 112) = v7;
    operator delete(v7);
  }

  v8 = *(v1 + 96);
  if (v8)
  {
    sub_100004A34(v8);
  }

  if (*(v1 + 87) < 0)
  {
    operator delete(*(v1 + 64));
  }

  if (*(v1 + 63) < 0)
  {
    operator delete(*(v1 + 40));
  }

  if (*(v1 + 31) < 0)
  {
    operator delete(*v2);
  }

  _Unwind_Resume(a1);
}

__n128 sub_1006B2470(__n128 *a1, uint64_t a2)
{
  if (a1[18].n128_u8[0] == *(a2 + 288))
  {
    if (a1[18].n128_u8[0])
    {

      sub_1006B2560(a1, a2);
    }
  }

  else if (a1[18].n128_u8[0])
  {
    v5 = a1[17].n128_u64[1];
    if (v5)
    {
      sub_100004A34(v5);
    }

    sub_100C18C58(a1);
    a1[18].n128_u8[0] = 0;
  }

  else
  {
    v6 = sub_1006A0A6C(a1, a2);
    *v6 = off_101EC8DD8;
    v7 = v6 + 31;
    if (*(a2 + 271) < 0)
    {
      sub_100005F2C(v7, *(a2 + 248), *(a2 + 256));
    }

    else
    {
      v8 = *(a2 + 248);
      v7[2] = *(a2 + 264);
      *v7 = v8;
    }

    result = *(a2 + 272);
    a1[17] = result;
    *(a2 + 272) = 0;
    *(a2 + 280) = 0;
    a1[18].n128_u8[0] = 1;
  }

  return result;
}

void sub_1006B2560(uint64_t a1, uint64_t a2)
{
  std::string::operator=((a1 + 8), (a2 + 8));
  std::string::operator=((a1 + 32), (a2 + 32));
  v4 = *(a2 + 72);
  *(a1 + 56) = *(a2 + 56);
  *(a1 + 72) = v4;
  sub_10046562C((a1 + 80), (a2 + 80));
  std::string::operator=((a1 + 128), (a2 + 128));
  v5 = *(a2 + 152);
  *(a1 + 160) = *(a2 + 160);
  *(a1 + 152) = v5;
  LOBYTE(v5) = *(a2 + 176);
  *(a1 + 168) = *(a2 + 168);
  *(a1 + 176) = v5;
  sub_10012BF3C((a1 + 184), (a2 + 184));
  sub_10012BF3C((a1 + 216), (a2 + 216));
  std::string::operator=((a1 + 248), (a2 + 248));
  v6 = *(a2 + 272);
  *(a2 + 272) = 0;
  *(a2 + 280) = 0;
  v7 = *(a1 + 280);
  *(a1 + 272) = v6;
  if (v7)
  {

    sub_100004A34(v7);
  }
}

__n128 sub_1006B2638(__n128 *a1, uint64_t a2)
{
  if (a1[18].n128_u8[0] == *(a2 + 288))
  {
    if (a1[18].n128_u8[0])
    {

      sub_1006B2560(a1, a2);
    }
  }

  else if (a1[18].n128_u8[0])
  {
    v5 = a1[17].n128_u64[1];
    if (v5)
    {
      sub_100004A34(v5);
    }

    sub_100C189A8(a1);
    a1[18].n128_u8[0] = 0;
  }

  else
  {
    v6 = sub_1006A0A6C(a1, a2);
    *v6 = off_101EC8DB8;
    v7 = v6 + 31;
    if (*(a2 + 271) < 0)
    {
      sub_100005F2C(v7, *(a2 + 248), *(a2 + 256));
    }

    else
    {
      v8 = *(a2 + 248);
      v7[2] = *(a2 + 264);
      *v7 = v8;
    }

    result = *(a2 + 272);
    a1[17] = result;
    *(a2 + 272) = 0;
    *(a2 + 280) = 0;
    a1[18].n128_u8[0] = 1;
  }

  return result;
}

uint64_t sub_1006B2728(uint64_t a1)
{
  if (*(a1 + 96) == 1 && *(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  if (*(a1 + 31) < 0)
  {
    operator delete(*(a1 + 8));
  }

  return a1;
}

void *sub_1006B2778(void *a1)
{
  *a1 = off_101E708C0;
  v2 = a1[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B27C4(void *a1)
{
  *a1 = off_101E708C0;
  v1 = a1[3];
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }

  operator delete();
}

uint64_t sub_1006B28A4(uint64_t result, uint64_t a2)
{
  *a2 = off_101E708C0;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 24);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  return result;
}

void sub_1006B28E4(uint64_t a1)
{
  v1 = *(a1 + 24);
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }
}

void sub_1006B28F4(void *__p)
{
  v2 = __p[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(__p);
}

void sub_1006B2934(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_1017796E4();
        }
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B29F0(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B2A3C(uint64_t a1)
{
  *a1 = off_101E70940;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B2A98(uint64_t a1)
{
  *a1 = off_101E70940;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006B2BB8(_Unwind_Exception *a1)
{
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

char *sub_1006B2BD8(char *result, uint64_t a2)
{
  *a2 = off_101E70940;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 3);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  if (result[55] < 0)
  {
    return sub_100005F2C((a2 + 32), *(result + 4), *(result + 5));
  }

  v3 = *(result + 2);
  *(a2 + 48) = *(result + 6);
  *(a2 + 32) = v3;
  return result;
}

void sub_1006B2C5C(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006B2C7C(void *a1)
{
  sub_10028F698(a1 + 8);

  operator delete(a1);
}

uint64_t sub_1006B2CB8(uint64_t a1, uint64_t a2)
{
  sub_1006B04D4(v12, a2 + 8);
  v3 = *(a1 + 24);
  if (v3)
  {
    v4 = *(a1 + 8);
    v5 = std::__shared_weak_count::lock(v3);
    if (v5)
    {
      v6 = v5;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v4 + 24));
        v7 = *(*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
        if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
        {
          LOWORD(v10) = 0;
          _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "#I IMDispositionNotification, server failure handled", &v10, 2u);
        }

        v8 = *(v4 + 432);
        if (v8)
        {
          if (*(a1 + 55) < 0)
          {
            sub_100005F2C(&v10, *(a1 + 32), *(a1 + 40));
          }

          else
          {
            v10 = *(a1 + 32);
            v11 = *(a1 + 48);
          }

          (*(*v8 + 32))(v8, &v10, 0);
          sub_101760E98(&v10);
        }
      }

      sub_100004A34(v6);
    }
  }

  return sub_1006AF788(v12);
}

uint64_t sub_1006B2E74(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

void *sub_1006B2EC0(void *a1)
{
  *a1 = off_101E709C0;
  v2 = a1[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B2F0C(void *a1)
{
  *a1 = off_101E709C0;
  v1 = a1[3];
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }

  operator delete();
}

uint64_t sub_1006B2FEC(uint64_t result, uint64_t a2)
{
  *a2 = off_101E709C0;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 24);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  return result;
}

void sub_1006B302C(uint64_t a1)
{
  v1 = *(a1 + 24);
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }
}

void sub_1006B303C(void *__p)
{
  v2 = __p[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(__p);
}

void sub_1006B307C(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_1017798D0();
        }
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B3138(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B3184(uint64_t a1)
{
  *a1 = off_101E70A40;
  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B31FC(uint64_t a1)
{
  *a1 = off_101E70A40;
  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006B3350(_Unwind_Exception *a1)
{
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

_BYTE *sub_1006B3398(uint64_t a1, uint64_t a2)
{
  *a2 = off_101E70A40;
  *(a2 + 8) = *(a1 + 8);
  v4 = *(a1 + 24);
  *(a2 + 24) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a1 + 55) < 0)
  {
    sub_100005F2C((a2 + 32), *(a1 + 32), *(a1 + 40));
  }

  else
  {
    v5 = *(a1 + 32);
    *(a2 + 48) = *(a1 + 48);
    *(a2 + 32) = v5;
  }

  sub_10068360C(a2 + 56, a1 + 56);
  return sub_1006A3010((a2 + 224), a1 + 224);
}

void sub_1006B3438(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006B3478(uint64_t a1)
{
  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {

    std::__shared_weak_count::__release_weak(v2);
  }
}

void sub_1006B34E8(uint64_t a1)
{
  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(a1);
}

void sub_1006B3554(uint64_t a1, __int128 *a2)
{
  v3 = *a2;
  v16 = *(a2 + 2);
  *(a2 + 1) = 0;
  *(a2 + 2) = 0;
  *a2 = 0;
  v14 = *(a2 + 40);
  v15 = v3;
  *(a2 + 5) = 0;
  *(a2 + 6) = 0;
  v13 = a2[4];
  *(a2 + 9) = 0;
  *(a2 + 10) = 0;
  *(a2 + 7) = 0;
  *(a2 + 8) = 0;
  v12 = *(a2 + 88);
  *(a2 + 11) = 0;
  *(a2 + 12) = 0;
  *(a2 + 13) = 0;
  LOBYTE(v17[0]) = 0;
  v4 = *(a2 + 136);
  if (v4 == 1)
  {
    *v17 = a2[7];
    *(a2 + 15) = 0;
    *(a2 + 16) = 0;
    *(a2 + 14) = 0;
  }

  *__p = a2[9];
  v5 = *(a2 + 20);
  *(a2 + 19) = 0;
  *(a2 + 20) = 0;
  *(a2 + 18) = 0;
  v19 = HIBYTE(v5);
  v6 = *(a1 + 24);
  if (v6)
  {
    v7 = *(a1 + 8);
    v8 = std::__shared_weak_count::lock(v6);
    if (v8)
    {
      v9 = v8;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v7 + 24));
        v10 = *(*(**(v7 + 48) + 16))(*(v7 + 48), *(v7 + 96));
        if (os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT))
        {
          *buf = 0;
          _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_DEFAULT, "#I IMDispositionNotification signature verified", buf, 2u);
        }

        sub_1006A3010(buf, a1 + 224);
        sub_100681FD0(a1 + 56, buf);
        if (v23 == 1)
        {
          sub_1006A27BC(buf);
        }

        v11 = *(v7 + 432);
        if (v11)
        {
          if (*(a1 + 55) < 0)
          {
            sub_100005F2C(&__dst, *(a1 + 32), *(a1 + 40));
          }

          else
          {
            __dst = *(a1 + 32);
            v21 = *(a1 + 48);
          }

          (*(*v11 + 32))(v11, &__dst, 0);
          sub_101760E98(&__dst);
        }
      }

      sub_100004A34(v9);
    }
  }

  if (v19 < 0)
  {
    operator delete(__p[0]);
    if (!v4)
    {
      goto LABEL_22;
    }
  }

  else if (!v4)
  {
    goto LABEL_22;
  }

  if (v17[0])
  {
    operator delete(v17[0]);
  }

LABEL_22:
  if (v12)
  {
    operator delete(v12);
  }

  if (v13)
  {
    operator delete(v13);
  }

  if (v14)
  {
    operator delete(v14);
  }

  if (SHIBYTE(v16) < 0)
  {
    operator delete(v15);
  }
}

uint64_t sub_1006B3860(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B38AC(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

void *sub_1006B392C(void *a1)
{
  *a1 = off_101E70AD0;
  v2 = a1[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B3978(void *a1)
{
  *a1 = off_101E70AD0;
  v1 = a1[3];
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }

  operator delete();
}

uint64_t sub_1006B3A58(uint64_t result, uint64_t a2)
{
  *a2 = off_101E70AD0;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 24);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  return result;
}

void sub_1006B3A98(uint64_t a1)
{
  v1 = *(a1 + 24);
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }
}

void sub_1006B3AA8(void *__p)
{
  v2 = __p[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(__p);
}

void sub_1006B3AE8(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_101779904();
        }
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B3BA4(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B3BF0(uint64_t a1)
{
  *a1 = off_101E70B50;
  v2 = *(a1 + 1200);
  if (v2)
  {
    *(a1 + 1208) = v2;
    operator delete(v2);
  }

  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006B3C78(uint64_t a1)
{
  *a1 = off_101E70B50;
  v2 = *(a1 + 1200);
  if (v2)
  {
    *(a1 + 1208) = v2;
    operator delete(v2);
  }

  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006B3DC4(uint64_t a1)
{
  v2 = *(a1 + 1200);
  if (v2)
  {
    *(a1 + 1208) = v2;
    operator delete(v2);
  }

  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {

    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006B3E44(uint64_t a1)
{
  v2 = *(a1 + 1200);
  if (v2)
  {
    *(a1 + 1208) = v2;
    operator delete(v2);
  }

  if (*(a1 + 1192) == 1)
  {
    sub_1006A27BC(a1 + 224);
  }

  sub_1006837A4(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

uint64_t sub_1006B3EC0(uint64_t a1, uint64_t a2)
{
  sub_1006B04D4(v24, a2 + 8);
  v3 = *(a1 + 24);
  if (v3)
  {
    v4 = *(a1 + 8);
    v5 = std::__shared_weak_count::lock(v3);
    if (v5)
    {
      v6 = v5;
      if (!*(a1 + 16))
      {
LABEL_41:
        sub_100004A34(v6);
        return sub_1006AF788(v24);
      }

      dispatch_assert_queue_V2(*(v4 + 24));
      sub_1006AF6DC(v30, v24);
      if (v30[56])
      {
        v7 = 0;
        v21[0] = 0;
      }

      else
      {
        sub_100583134(v21, v30);
        v7 = 1;
      }

      v23 = v7;
      sub_1006AF788(v30);
      v8 = *(**(v4 + 48) + 16);
      if (v23 != 1)
      {
        v14 = v8();
        if (os_log_type_enabled(*v14, OS_LOG_TYPE_ERROR))
        {
          sub_101779938();
        }

        goto LABEL_39;
      }

      v9 = *v8();
      if (os_log_type_enabled(v9, OS_LOG_TYPE_DEFAULT))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_DEFAULT, "#I Secure incoming file transfer: Succesfully decrypted mlsFileInfo", buf, 2u);
      }

      if ((*(a1 + 824) & 1) == 0)
      {
        sub_1000D1644();
      }

      sub_1006A03A8(v4, (a1 + 1200), &v22, (a1 + 520), buf);
      sub_1006ADA1C(a1 + 528, buf);
      if (v27 == 1)
      {
        sub_1002AF7A0(&buf[8]);
      }

      if (*(a1 + 816))
      {
        sub_1006A390C(v29, a1 + 536);
        v10 = v29[68];
        sub_1002AF7A0(v29);
        v11 = *(**(v4 + 48) + 16);
        if (!v10)
        {
          v16 = *v11();
          if (os_log_type_enabled(v16, OS_LOG_TYPE_DEFAULT))
          {
            *buf = 0;
            _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_DEFAULT, "#I Secure incoming file transfer: Succesfully decoded protobuf in decrypted mlsFileInfo", buf, 2u);
          }

          sub_1006A28D8(buf, a1 + 224);
          sub_100681FD0(a1 + 56, buf);
          if (v28 == 1)
          {
            sub_1006A27BC(buf);
          }

          v17 = *(v4 + 432);
          if (v17)
          {
            if (*(a1 + 55) < 0)
            {
              sub_100005F2C(&v19, *(a1 + 32), *(a1 + 40));
            }

            else
            {
              v19 = *(a1 + 32);
              v20 = *(a1 + 48);
            }

            (*(*v17 + 32))(v17, &v19, 0);
            sub_101760E98(&v19);
          }

          goto LABEL_39;
        }

        v12 = v11();
        if (os_log_type_enabled(*v12, OS_LOG_TYPE_ERROR))
        {
          sub_1017799A0();
        }

        v13 = *(v4 + 432);
        if (!v13)
        {
LABEL_39:
          if (v23 == 1)
          {
            sub_1006AFC8C(v21);
          }

          goto LABEL_41;
        }

        if ((*(a1 + 55) & 0x80000000) == 0)
        {
          *buf = *(a1 + 32);
          v26 = *(a1 + 48);
LABEL_35:
          (*(*v13 + 32))(v13, buf, 0x200000000);
          sub_101760E98(buf);
          goto LABEL_39;
        }
      }

      else
      {
        v15 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
        if (os_log_type_enabled(*v15, OS_LOG_TYPE_ERROR))
        {
          sub_10177996C();
        }

        v13 = *(v4 + 432);
        if (!v13)
        {
          goto LABEL_39;
        }

        if ((*(a1 + 55) & 0x80000000) == 0)
        {
          *buf = *(a1 + 32);
          v26 = *(a1 + 48);
          goto LABEL_35;
        }
      }

      sub_100005F2C(buf, *(a1 + 32), *(a1 + 40));
      goto LABEL_35;
    }
  }

  return sub_1006AF788(v24);
}

void sub_1006B4324(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, char a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, char a43)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  if (a43 == 1)
  {
    sub_1006AFC8C(&a15);
  }

  sub_100004A34(v43);
  sub_1006AF788(v44 + 8);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B43EC(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B4438(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  sub_10068360C(a1 + 48, a2 + 48);
  sub_1006A3010((a1 + 216), a2 + 216);
  *(a1 + 1208) = 0;
  *(a1 + 1192) = 0u;
  sub_100034C50(a1 + 1192, *(a2 + 1192), *(a2 + 1200), *(a2 + 1200) - *(a2 + 1192));
  return a1;
}

void sub_1006B44E0(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 16);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void *sub_1006B453C(void *a1)
{
  *a1 = off_101E70BD0;
  v2 = a1[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B4588(void *a1)
{
  *a1 = off_101E70BD0;
  v1 = a1[3];
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }

  operator delete();
}

uint64_t sub_1006B4668(uint64_t result, uint64_t a2)
{
  *a2 = off_101E70BD0;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 24);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  return result;
}

void sub_1006B46A8(uint64_t a1)
{
  v1 = *(a1 + 24);
  if (v1)
  {
    std::__shared_weak_count::__release_weak(v1);
  }
}

void sub_1006B46B8(void *__p)
{
  v2 = __p[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(__p);
}

void sub_1006B46F8(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_1017799D4();
        }
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B47B4(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

void sub_1006B4874(void *a1, uint64_t a2, uint64_t a3)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = off_101E70568;
  sub_1009FF928((a1 + 3), a2, a3);
}

uint64_t sub_1006B48D0(uint64_t a1)
{
  *a1 = off_101E70C50;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B492C(uint64_t a1)
{
  *a1 = off_101E70C50;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006B4A4C(_Unwind_Exception *a1)
{
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

char *sub_1006B4A6C(char *result, uint64_t a2)
{
  *a2 = off_101E70C50;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 3);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  if (result[55] < 0)
  {
    return sub_100005F2C((a2 + 32), *(result + 4), *(result + 5));
  }

  v3 = *(result + 2);
  *(a2 + 48) = *(result + 6);
  *(a2 + 32) = v3;
  return result;
}

void sub_1006B4AF0(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006B4B10(void *a1)
{
  sub_10028F698(a1 + 8);

  operator delete(a1);
}

void sub_1006B4B4C(uint64_t a1, uint64_t a2)
{
  *v11 = *a2;
  v12 = *(a2 + 16);
  *(a2 + 8) = 0;
  *(a2 + 16) = 0;
  *a2 = 0;
  *v13 = *(a2 + 40);
  *(a2 + 40) = 0;
  *(a2 + 48) = 0;
  *v14 = *(a2 + 64);
  *(a2 + 72) = 0;
  *(a2 + 80) = 0;
  *(a2 + 56) = 0;
  *(a2 + 64) = 0;
  *v15 = *(a2 + 88);
  *(a2 + 88) = 0;
  *(a2 + 96) = 0;
  *(a2 + 104) = 0;
  LOBYTE(v16[0]) = 0;
  v17 = 0;
  if (*(a2 + 136) == 1)
  {
    *v16 = *(a2 + 112);
    *(a2 + 120) = 0;
    *(a2 + 128) = 0;
    *(a2 + 112) = 0;
    v17 = 1;
  }

  *__p = *(a2 + 144);
  v3 = *(a2 + 160);
  *(a2 + 152) = 0;
  *(a2 + 160) = 0;
  *(a2 + 144) = 0;
  v19 = HIBYTE(v3);
  v20 = *(a2 + 176);
  v21 = *(a2 + 192);
  *(a2 + 176) = 0;
  *(a2 + 184) = 0;
  *(a2 + 192) = 0;
  v4 = *(a1 + 24);
  if (v4)
  {
    v5 = *(a1 + 8);
    v6 = std::__shared_weak_count::lock(v4);
    if (v6)
    {
      v7 = v6;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v5 + 24));
        v8 = *(*(**(v5 + 48) + 16))(*(v5 + 48), *(v5 + 96));
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
        {
          v9 = a1 + 32;
          if (*(a1 + 55) < 0)
          {
            v9 = *(a1 + 32);
          }

          *buf = 136315138;
          *&buf[4] = v9;
          _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_DEFAULT, "#I joinGroup operation completed (operationId: %s)", buf, 0xCu);
        }

        v10 = *(v5 + 432);
        if (v10)
        {
          if (*(a1 + 55) < 0)
          {
            sub_100005F2C(buf, *(a1 + 32), *(a1 + 40));
          }

          else
          {
            *buf = *(a1 + 32);
            v23 = *(a1 + 48);
          }

          (*(*v10 + 32))(v10, buf, 0);
          sub_101760E98(buf);
        }
      }

      sub_100004A34(v7);
    }
  }

  *buf = &v20;
  sub_10003CA58(buf);
  if (v19 < 0)
  {
    operator delete(__p[0]);
  }

  if (v17 == 1 && v16[0])
  {
    operator delete(v16[0]);
  }

  if (v15[0])
  {
    operator delete(v15[0]);
  }

  if (v14[0])
  {
    operator delete(v14[0]);
  }

  if (v13[0])
  {
    operator delete(v13[0]);
  }

  if (SHIBYTE(v12) < 0)
  {
    operator delete(v11[0]);
  }
}

uint64_t sub_1006B4E58(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B4EA4(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

uint64_t sub_1006B4F24(uint64_t a1)
{
  *a1 = off_101E70CE0;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B4F80(uint64_t a1)
{
  *a1 = off_101E70CE0;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006B50A0(_Unwind_Exception *a1)
{
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

char *sub_1006B50C0(char *result, uint64_t a2)
{
  *a2 = off_101E70CE0;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 3);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  if (result[55] < 0)
  {
    return sub_100005F2C((a2 + 32), *(result + 4), *(result + 5));
  }

  v3 = *(result + 2);
  *(a2 + 48) = *(result + 6);
  *(a2 + 32) = v3;
  return result;
}

void sub_1006B5144(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006B5164(void *a1)
{
  sub_10028F698(a1 + 8);

  operator delete(a1);
}

void sub_1006B51A0(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_101779A08(a1);
        }
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B5260(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

void *sub_1006B5320(void *a1)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = off_101E70518;
  sub_100914CA8(a1 + 3);
  return a1;
}

uint64_t sub_1006B537C(uint64_t a1)
{
  *a1 = off_101E70D60;
  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = *(a1 + 64);
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = *(a1 + 48);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = *(a1 + 24);
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  return a1;
}

void sub_1006B53FC(uint64_t a1)
{
  *a1 = off_101E70D60;
  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = *(a1 + 64);
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = *(a1 + 48);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = *(a1 + 24);
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  operator delete();
}

void sub_1006B5540(uint64_t a1)
{
  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = *(a1 + 64);
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = *(a1 + 48);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = *(a1 + 24);
  if (v5)
  {

    std::__shared_weak_count::__release_weak(v5);
  }
}

void sub_1006B55B8(void **__p)
{
  if (*(__p + 111) < 0)
  {
    operator delete(__p[11]);
  }

  v2 = __p[10];
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = __p[8];
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = __p[6];
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = __p[3];
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  operator delete(__p);
}

void sub_1006B562C(void *a1, char *a2)
{
  v3 = a1[3];
  if (v3)
  {
    v4 = *a2;
    v5 = a1[1];
    v6 = std::__shared_weak_count::lock(v3);
    if (v6)
    {
      v7 = v6;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v5 + 24));
        v8 = *(**(v5 + 48) + 16);
        if (v4)
        {
          v9 = *v8();
          if (os_log_type_enabled(v9, OS_LOG_TYPE_DEFAULT))
          {
            *v11 = 0;
            _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_DEFAULT, "#I Secure group exists", v11, 2u);
          }

          sub_100686A88(a1 + 4);
        }

        else
        {
          v10 = v8();
          if (os_log_type_enabled(*v10, OS_LOG_TYPE_ERROR))
          {
            sub_101779A78();
          }
        }
      }

      sub_100004A34(v7);
    }
  }
}

uint64_t sub_1006B5750(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B579C(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v3 = *(a2 + 16);
  *(a1 + 16) = v3;
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 16), 1uLL, memory_order_relaxed);
  }

  *(a1 + 24) = *(a2 + 24);
  v4 = *(a2 + 40);
  *(a1 + 40) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  v6 = *(a2 + 48);
  v5 = *(a2 + 56);
  *(a1 + 56) = v5;
  *(a1 + 48) = v6;
  if (v5)
  {
    atomic_fetch_add_explicit((v5 + 8), 1uLL, memory_order_relaxed);
  }

  v7 = *(a2 + 72);
  *(a1 + 64) = *(a2 + 64);
  *(a1 + 72) = v7;
  if (v7)
  {
    atomic_fetch_add_explicit((v7 + 8), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 103) < 0)
  {
    sub_100005F2C((a1 + 80), *(a2 + 80), *(a2 + 88));
  }

  else
  {
    v8 = *(a2 + 80);
    *(a1 + 96) = *(a2 + 96);
    *(a1 + 80) = v8;
  }

  return a1;
}

void sub_1006B587C(_Unwind_Exception *a1)
{
  v6 = *(v2 + 72);
  if (v6)
  {
    sub_100004A34(v6);
  }

  sub_101779AAC(v4, v3, v1);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B58A4(uint64_t a1)
{
  *a1 = off_101E70DE0;
  if (*(a1 + 135) < 0)
  {
    operator delete(*(a1 + 112));
  }

  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = *(a1 + 64);
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = *(a1 + 48);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = *(a1 + 24);
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  return a1;
}

void sub_1006B5934(uint64_t a1)
{
  *a1 = off_101E70DE0;
  if (*(a1 + 135) < 0)
  {
    operator delete(*(a1 + 112));
  }

  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = *(a1 + 64);
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = *(a1 + 48);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = *(a1 + 24);
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  operator delete();
}

void sub_1006B5A88(uint64_t a1)
{
  if (*(a1 + 135) < 0)
  {
    operator delete(*(a1 + 112));
  }

  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = *(a1 + 64);
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = *(a1 + 48);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = *(a1 + 24);
  if (v5)
  {

    std::__shared_weak_count::__release_weak(v5);
  }
}

void sub_1006B5B10(void **__p)
{
  if (*(__p + 135) < 0)
  {
    operator delete(__p[14]);
  }

  if (*(__p + 111) < 0)
  {
    operator delete(__p[11]);
  }

  v2 = __p[10];
  if (v2)
  {
    sub_100004A34(v2);
  }

  v3 = __p[8];
  if (v3)
  {
    sub_100004A34(v3);
  }

  v4 = __p[6];
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  v5 = __p[3];
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  operator delete(__p);
}

void sub_1006B5B94(uint64_t a1, uint64_t a2)
{
  *v11 = *a2;
  v12 = *(a2 + 16);
  *(a2 + 8) = 0;
  *(a2 + 16) = 0;
  *a2 = 0;
  *v13 = *(a2 + 40);
  *(a2 + 40) = 0;
  *(a2 + 48) = 0;
  *v14 = *(a2 + 64);
  *(a2 + 72) = 0;
  *(a2 + 80) = 0;
  *(a2 + 56) = 0;
  *(a2 + 64) = 0;
  *v15 = *(a2 + 88);
  *(a2 + 88) = 0;
  *(a2 + 96) = 0;
  *(a2 + 104) = 0;
  LOBYTE(v16[0]) = 0;
  v17 = 0;
  if (*(a2 + 136) == 1)
  {
    *v16 = *(a2 + 112);
    *(a2 + 120) = 0;
    *(a2 + 128) = 0;
    *(a2 + 112) = 0;
    v17 = 1;
  }

  *__p = *(a2 + 144);
  v3 = *(a2 + 160);
  *(a2 + 152) = 0;
  *(a2 + 160) = 0;
  *(a2 + 144) = 0;
  v19 = HIBYTE(v3);
  v20 = *(a2 + 176);
  v21 = *(a2 + 192);
  *(a2 + 176) = 0;
  *(a2 + 184) = 0;
  *(a2 + 192) = 0;
  v4 = *(a1 + 24);
  if (v4)
  {
    v5 = *(a1 + 8);
    v6 = std::__shared_weak_count::lock(v4);
    if (v6)
    {
      v7 = v6;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v5 + 24));
        v8 = *(*(**(v5 + 48) + 16))(*(v5 + 48), *(v5 + 96));
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
        {
          v9 = a1 + 112;
          if (*(a1 + 135) < 0)
          {
            v9 = *(a1 + 112);
          }

          *buf = 136315138;
          *&buf[4] = v9;
          _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_DEFAULT, "#I joinGroup operation completed (operationId: %s)", buf, 0xCu);
        }

        sub_100686A88((a1 + 32));
        v10 = *(v5 + 432);
        if (v10)
        {
          if (*(a1 + 135) < 0)
          {
            sub_100005F2C(buf, *(a1 + 112), *(a1 + 120));
          }

          else
          {
            *buf = *(a1 + 112);
            v23 = *(a1 + 128);
          }

          (*(*v10 + 32))(v10, buf, 0);
          sub_101760E98(buf);
        }
      }

      sub_100004A34(v7);
    }
  }

  *buf = &v20;
  sub_10003CA58(buf);
  if (v19 < 0)
  {
    operator delete(__p[0]);
  }

  if (v17 == 1 && v16[0])
  {
    operator delete(v16[0]);
  }

  if (v15[0])
  {
    operator delete(v15[0]);
  }

  if (v14[0])
  {
    operator delete(v14[0]);
  }

  if (v13[0])
  {
    operator delete(v13[0]);
  }

  if (SHIBYTE(v12) < 0)
  {
    operator delete(v11[0]);
  }
}

uint64_t sub_1006B5EA8(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B5EF4(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  *(a1 + 24) = *(a2 + 24);
  v5 = *(a2 + 40);
  *(a1 + 40) = v5;
  if (v5)
  {
    atomic_fetch_add_explicit((v5 + 16), 1uLL, memory_order_relaxed);
  }

  v6 = *(a2 + 56);
  *(a1 + 48) = *(a2 + 48);
  *(a1 + 56) = v6;
  if (v6)
  {
    atomic_fetch_add_explicit((v6 + 8), 1uLL, memory_order_relaxed);
  }

  v7 = *(a2 + 72);
  *(a1 + 64) = *(a2 + 64);
  *(a1 + 72) = v7;
  if (v7)
  {
    atomic_fetch_add_explicit((v7 + 8), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 103) < 0)
  {
    sub_100005F2C((a1 + 80), *(a2 + 80), *(a2 + 88));
  }

  else
  {
    v8 = *(a2 + 80);
    *(a1 + 96) = *(a2 + 96);
    *(a1 + 80) = v8;
  }

  if (*(a2 + 127) < 0)
  {
    sub_100005F2C((a1 + 104), *(a2 + 104), *(a2 + 112));
  }

  else
  {
    v9 = *(a2 + 104);
    *(a1 + 120) = *(a2 + 120);
    *(a1 + 104) = v9;
  }

  return a1;
}

void sub_1006B5FE8(_Unwind_Exception *a1)
{
  sub_100686FD0(v2);
  v4 = *(v1 + 16);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_1006B6034(uint64_t a1)
{
  *a1 = off_101E70E60;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B6090(uint64_t a1)
{
  *a1 = off_101E70E60;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006B61B0(_Unwind_Exception *a1)
{
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

char *sub_1006B61D0(char *result, uint64_t a2)
{
  *a2 = off_101E70E60;
  *(a2 + 8) = *(result + 8);
  v2 = *(result + 3);
  *(a2 + 24) = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 16), 1uLL, memory_order_relaxed);
  }

  if (result[55] < 0)
  {
    return sub_100005F2C((a2 + 32), *(result + 4), *(result + 5));
  }

  v3 = *(result + 2);
  *(a2 + 48) = *(result + 6);
  *(a2 + 32) = v3;
  return result;
}

void sub_1006B6254(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006B6274(void *a1)
{
  sub_10028F698(a1 + 8);

  operator delete(a1);
}

void sub_1006B62B0(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_101779A08(a1);
        }
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B6370(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B63BC(uint64_t a1, void **a2)
{
  v3 = 0;
  result = *sub_100005C2C(a1, &v3, a2);
  if (!result)
  {
    sub_1006B6460();
  }

  return result;
}

void sub_1006B64EC(_Unwind_Exception *a1)
{
  *v1 = 0;
  sub_1006B657C(v3, v2);
  _Unwind_Resume(a1);
}

void *sub_1006B6508(void *__dst, __int128 **a2)
{
  v3 = *a2;
  if (*(*a2 + 23) < 0)
  {
    sub_100005F2C(__dst, *v3, *(v3 + 1));
  }

  else
  {
    v4 = *v3;
    __dst[2] = *(v3 + 2);
    *__dst = v4;
  }

  sub_1009CCC10(__dst + 3);
  return __dst;
}

void sub_1006B6560(_Unwind_Exception *exception_object)
{
  if (*(v1 + 23) < 0)
  {
    operator delete(*v1);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006B657C(uint64_t a1, void *__p)
{
  if (*(a1 + 8) == 1)
  {
    sub_1006AE218(*a1, __p + 32);
  }

  if (__p)
  {

    operator delete(__p);
  }
}

void *sub_1006B65DC(void *a1)
{
  *a1 = off_101E70EE0;
  sub_10068FEEC((a1 + 1));
  return a1;
}

void sub_1006B6620(void *a1)
{
  *a1 = off_101E70EE0;
  sub_10068FEEC((a1 + 1));

  operator delete();
}

void sub_1006B6730(void *a1)
{
  sub_10068FEEC(a1 + 8);

  operator delete(a1);
}

void sub_1006B676C(void *a1, uint64_t a2)
{
  *v12 = *a2;
  v13 = *(a2 + 16);
  *(a2 + 8) = 0;
  *(a2 + 16) = 0;
  *a2 = 0;
  *__val = *(a2 + 24);
  *v15 = *(a2 + 40);
  *(a2 + 40) = 0;
  *(a2 + 48) = 0;
  *v16 = *(a2 + 64);
  *(a2 + 72) = 0;
  *(a2 + 80) = 0;
  *(a2 + 56) = 0;
  *(a2 + 64) = 0;
  *v17 = *(a2 + 88);
  *(a2 + 88) = 0;
  *(a2 + 96) = 0;
  *(a2 + 104) = 0;
  LOBYTE(v18[0]) = 0;
  v19 = 0;
  if (*(a2 + 136) == 1)
  {
    *v18 = *(a2 + 112);
    *(a2 + 120) = 0;
    *(a2 + 128) = 0;
    *(a2 + 112) = 0;
    v19 = 1;
  }

  v20 = *(a2 + 144);
  v3 = v20;
  v21 = *(a2 + 160);
  *(a2 + 152) = 0;
  *(a2 + 160) = 0;
  *(a2 + 144) = 0;
  v4 = a1[3];
  v5 = v3;
  if (v4)
  {
    v6 = a1[1];
    v7 = std::__shared_weak_count::lock(v4);
    if (v7)
    {
      v8 = v7;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v6 + 24));
        v48 = 0;
        memset(v47, 0, sizeof(v47));
        sub_100B27D98(v47);
        sub_100B27E08(v47, "imdn <urn:ietf:params:imdn>");
        sub_100A972E8(__p);
        if ((SBYTE7(v30) & 0x80u) == 0)
        {
          v9 = __p;
        }

        else
        {
          v9 = __p[0];
        }

        sub_100B27E1C(v47, "imdn.Message-ID", v9);
        if (SBYTE7(v30) < 0)
        {
          operator delete(__p[0]);
        }

        sub_100B27E08(v47, "mls <http://www.gsma.com/rcs/mls>");
        ctu::base64::encode();
        if ((SBYTE7(v30) & 0x80u) == 0)
        {
          v10 = __p;
        }

        else
        {
          v10 = __p[0];
        }

        sub_100B27E1C(v47, "mls.Epoch-Authenticator", v10);
        if (SBYTE7(v30) < 0)
        {
          operator delete(__p[0]);
        }

        std::to_string(__p, __val[0]);
        if ((SBYTE7(v30) & 0x80u) == 0)
        {
          v11 = __p;
        }

        else
        {
          v11 = __p[0];
        }

        sub_100B27E1C(v47, "mls.Era-Id", v11);
        if (SBYTE7(v30) < 0)
        {
          operator delete(__p[0]);
        }

        v46 = 0;
        v44 = 0u;
        v45 = 0u;
        v42 = 0u;
        v43 = 0u;
        v40 = 0u;
        v41 = 0u;
        v38 = 0u;
        v39 = 0u;
        v36 = 0u;
        v37 = 0u;
        v34 = 0u;
        v35 = 0u;
        v32 = 0u;
        v33 = 0u;
        v30 = 0u;
        v31 = 0u;
        *__p = 0u;
        sub_100BE2724(__p, "message/mls-rcs-client");
        v26 = 0;
        v27 = 0;
        v28 = 0;
        sub_100BE2728(__p, &v20, &v24);
        sub_100B27EC8(v47, &v24, &v26);
        if (v24)
        {
          v25 = v24;
          operator delete(v24);
        }

        v22 = xpc_data_create(v26, v27 - v26);
        if (!v22)
        {
          v22 = xpc_null_create();
        }

        v24 = a1 + 54;
        v25 = ims::lazuli::kMlsBinaryBlob;
        sub_10000F688(&v24, &v22, &object);
        xpc_release(object);
        object = 0;
        xpc_release(v22);
        v22 = 0;
        sub_10068F794(a1 + 7, (a1 + 54));
        sub_101779B0C(&v26);
      }

      sub_100004A34(v8);
      v5 = v20;
    }
  }

  if (v5)
  {
    *(&v20 + 1) = v5;
    operator delete(v5);
  }

  if (v19 == 1 && v18[0])
  {
    operator delete(v18[0]);
  }

  if (v17[0])
  {
    operator delete(v17[0]);
  }

  if (v16[0])
  {
    operator delete(v16[0]);
  }

  if (v15[0])
  {
    operator delete(v15[0]);
  }

  if (SHIBYTE(v13) < 0)
  {
    operator delete(v12[0]);
  }
}

void sub_1006B6B18(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, void *__p, uint64_t a37, uint64_t a38, void *a39)
{
  if (__p)
  {
    a37 = __p;
    operator delete(__p);
  }

  sub_10068C9D8(&a39);
  sub_10068C9D8(&STACK[0x210]);
  sub_100004A34(v39);
  sub_100582180(&a9);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B6BC0(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B6C0C(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  *(a1 + 48) = *(a2 + 48);
  v6 = *(a2 + 64);
  *(a1 + 64) = v6;
  if (v6)
  {
    atomic_fetch_add_explicit((v6 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 95) < 0)
  {
    sub_100005F2C((a1 + 72), *(a2 + 72), *(a2 + 80));
  }

  else
  {
    v7 = *(a2 + 72);
    *(a1 + 88) = *(a2 + 88);
    *(a1 + 72) = v7;
  }

  sub_1000D4128(a1 + 96, a2 + 96);
  v8 = *(a2 + 424);
  *(a1 + 424) = v8;
  if (v8)
  {
    xpc_retain(v8);
  }

  else
  {
    *(a1 + 424) = xpc_null_create();
  }

  if (*(a2 + 455) < 0)
  {
    sub_100005F2C((a1 + 432), *(a2 + 432), *(a2 + 440));
  }

  else
  {
    v9 = *(a2 + 432);
    *(a1 + 448) = *(a2 + 448);
    *(a1 + 432) = v9;
  }

  return a1;
}

void sub_1006B6D20(_Unwind_Exception *a1)
{
  sub_100DC3ED0((v1 + 424));
  sub_10068FC50(v2);
  if (*(v1 + 47) < 0)
  {
    operator delete(*(v1 + 24));
  }

  v4 = *(v1 + 16);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_1006B6D90(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

uint64_t sub_1006B6E10(uint64_t a1)
{
  *a1 = off_101E70F70;
  xpc_release(*(a1 + 408));
  *(a1 + 408) = 0;
  sub_1000D45B0(a1 + 80);
  if (*(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006B6E90(uint64_t a1)
{
  *a1 = off_101E70F70;
  xpc_release(*(a1 + 408));
  *(a1 + 408) = 0;
  sub_1000D45B0(a1 + 80);
  if (*(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006B6FD4(uint64_t a1)
{
  xpc_release(*(a1 + 408));
  *(a1 + 408) = 0;
  sub_1000D45B0(a1 + 80);
  if (*(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {

    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006B704C(uint64_t a1)
{
  xpc_release(*(a1 + 408));
  *(a1 + 408) = 0;
  sub_1000D45B0(a1 + 80);
  if (*(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

void sub_1006B70C0(void *a1)
{
  v2 = a1[3];
  if (v2)
  {
    v3 = a1[1];
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = (*(**(v3 + 48) + 16))(*(v3 + 48), *(v3 + 96));
        if (os_log_type_enabled(*v6, OS_LOG_TYPE_ERROR))
        {
          sub_101779C80();
        }

        sub_10068F794(a1 + 4, (a1 + 51));
      }

      sub_100004A34(v5);
    }
  }
}

uint64_t sub_1006B7188(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B71D4(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  *(a1 + 24) = *(a2 + 24);
  v5 = *(a2 + 40);
  *(a1 + 40) = v5;
  if (v5)
  {
    atomic_fetch_add_explicit((v5 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 71) < 0)
  {
    sub_100005F2C((a1 + 48), *(a2 + 48), *(a2 + 56));
  }

  else
  {
    v6 = *(a2 + 48);
    *(a1 + 64) = *(a2 + 64);
    *(a1 + 48) = v6;
  }

  sub_1000D4128(a1 + 72, a2 + 72);
  v7 = *(a2 + 400);
  *(a1 + 400) = v7;
  if (v7)
  {
    xpc_retain(v7);
  }

  else
  {
    *(a1 + 400) = xpc_null_create();
  }

  return a1;
}

void sub_1006B728C(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 40);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  v4 = *(v1 + 16);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_1006B72CC(uint64_t a1)
{
  *a1 = off_101E70FF0;
  sub_1000D45B0(a1 + 112);
  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  xpc_release(*(a1 + 56));
  *(a1 + 56) = 0;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006B7358(uint64_t a1)
{
  *a1 = off_101E70FF0;
  sub_1000D45B0(a1 + 112);
  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  xpc_release(*(a1 + 56));
  *(a1 + 56) = 0;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006B74A8(uint64_t a1)
{
  sub_1000D45B0(a1 + 112);
  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  xpc_release(*(a1 + 56));
  *(a1 + 56) = 0;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {

    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006B7530(uint64_t a1)
{
  sub_1000D45B0(a1 + 112);
  if (*(a1 + 111) < 0)
  {
    operator delete(*(a1 + 88));
  }

  v2 = *(a1 + 80);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  xpc_release(*(a1 + 56));
  *(a1 + 56) = 0;
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

uint64_t sub_1006B75B4(uint64_t a1, uint64_t a2)
{
  sub_1006B0570(v25, a2);
  v3 = *(a1 + 24);
  if (v3)
  {
    v4 = *(a1 + 8);
    v5 = std::__shared_weak_count::lock(v3);
    if (v5)
    {
      v6 = v5;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v4 + 24));
        sub_1005833A8(v64, v25);
        if (v69)
        {
          v7 = 0;
          v70[0] = 0;
        }

        else
        {
          sub_100581E40(v70, v64);
          memset(v72, 0, sizeof(v72));
          sub_100034C50(v72, v65, v66, v66 - v65);
          memset(v73, 0, sizeof(v73));
          sub_100581F6C(v73, v67, v68, (v68 - v67) >> 5);
          v7 = 1;
        }

        v74[0] = v7;
        sub_100583454(v64);
        if (v74[0] == 1)
        {
          v63 = 0;
          v62 = 0u;
          v60 = 0u;
          v61 = 0u;
          v58 = 0u;
          v59 = 0u;
          memset(v57, 0, sizeof(v57));
          memset(v56, 0, sizeof(v56));
          sub_100B27D98(v56);
          sub_100B27E08(v56, "imdn <urn:ietf:params:imdn>");
          sub_100A972E8(__p);
          if ((SBYTE7(v39) & 0x80u) == 0)
          {
            v8 = __p;
          }

          else
          {
            v8 = __p[0];
          }

          sub_100B27E1C(v56, "imdn.Message-ID", v8);
          if (SBYTE7(v39) < 0)
          {
            operator delete(__p[0]);
          }

          sub_100B27E08(v56, "mls <http://www.gsma.com/rcs/mls>");
          ctu::base64::encode();
          if ((SBYTE7(v39) & 0x80u) == 0)
          {
            v9 = __p;
          }

          else
          {
            v9 = __p[0];
          }

          sub_100B27E1C(v56, "mls.Epoch-Authenticator", v9);
          if (SBYTE7(v39) < 0)
          {
            operator delete(__p[0]);
          }

          std::to_string(__p, __val);
          if ((SBYTE7(v39) & 0x80u) == 0)
          {
            v10 = __p;
          }

          else
          {
            v10 = __p[0];
          }

          sub_100B27E1C(v56, "mls.Era-Id", v10);
          if (SBYTE7(v39) < 0)
          {
            operator delete(__p[0]);
          }

          v55 = 0;
          v53 = 0u;
          v54 = 0u;
          v51 = 0u;
          v52 = 0u;
          v49 = 0u;
          v50 = 0u;
          v47 = 0u;
          v48 = 0u;
          v45 = 0u;
          v46 = 0u;
          v43 = 0u;
          v44 = 0u;
          v41 = 0u;
          v42 = 0u;
          v39 = 0u;
          v40 = 0u;
          *__p = 0u;
          sub_100BE2724(__p, "message/mls-rcs-client");
          v33 = 0;
          v34 = 0;
          v35 = 0;
          sub_100BE2728(__p, v72, &v26);
          sub_100B27EC8(v56, &v26, &v33);
          if (v26)
          {
            v27 = v26;
            operator delete(v26);
          }

          __dst[0] = xpc_data_create(v33, v34 - v33);
          if (!__dst[0])
          {
            __dst[0] = xpc_null_create();
          }

          v26 = (a1 + 56);
          v27 = ims::lazuli::kMlsBinaryBlob;
          sub_10000F688(&v26, __dst, object);
          xpc_release(object[0]);
          object[0] = 0;
          xpc_release(__dst[0]);
          __dst[0] = 0;
          sub_10068F794((a1 + 64), (a1 + 56));
          sub_101779B0C(&v33);
        }

        else
        {
          sub_1005833A8(v56, v25);
          if (DWORD2(v58) == 11)
          {
            sub_100581E40(&v33, v56);
            sub_100582264(v36, v57);
            v17 = 1;
          }

          else
          {
            v17 = 0;
            LOBYTE(v33) = 0;
          }

          v37[0] = v17;
          sub_100583454(v56);
          if (v37[0] == 1)
          {
            sub_100582264(__p, v36);
            v18 = v40;
            sub_100582310(__p);
            if (v18)
            {
              v19 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v19, OS_LOG_TYPE_ERROR))
              {
                asString(v36);
                sub_101779CE8();
              }
            }

            v20 = *(v4 + 432);
            if (v20)
            {
              if (*(a1 + 55) < 0)
              {
                sub_100005F2C(__dst, *(a1 + 32), *(a1 + 40));
              }

              else
              {
                *__dst = *(a1 + 32);
                v30 = *(a1 + 48);
              }

              v28 = 5;
              (*(*v20 + 24))(v20, __dst, &v26);
              sub_101779600(&v26, __dst);
            }
          }

          else
          {
            sub_1005833A8(__p, v25);
            v21 = DWORD2(v50);
            sub_100583454(__p);
            if (v21 == 10)
            {
              v22 = *(v4 + 432);
              if (v22)
              {
                if (*(a1 + 55) < 0)
                {
                  sub_100005F2C(object, *(a1 + 32), *(a1 + 40));
                }

                else
                {
                  *object = *(a1 + 32);
                  v32 = *(a1 + 48);
                }

                v28 = 0;
                (*(*v22 + 24))(v22, object, &v26);
                sub_101779600(&v26, object);
              }
            }

            else
            {
              v23 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v23, OS_LOG_TYPE_ERROR))
              {
                sub_101779CB4();
              }
            }
          }

          sub_101779D3C(v37, &v33);
        }

        sub_101779DC0(v74, v70, v11, v12, v13, v14, v15, v16);
      }

      sub_100004A34(v6);
    }
  }

  return sub_100583454(v25);
}

void sub_1006B7B5C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, void *__p, uint64_t a44, uint64_t a45, uint64_t a46, void *a47)
{
  sub_1006B7E88(&a47);
  if (LOBYTE(STACK[0x5B8]) == 1)
  {
    sub_1006B0390(&STACK[0x4F8]);
  }

  sub_100004A34(v47);
  sub_100583454(&a9);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B7CF0(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B7D3C(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  v6 = *(a2 + 48);
  *(a1 + 48) = v6;
  if (v6)
  {
    xpc_retain(v6);
  }

  else
  {
    *(a1 + 48) = xpc_null_create();
  }

  *(a1 + 56) = *(a2 + 56);
  v7 = *(a2 + 72);
  *(a1 + 72) = v7;
  if (v7)
  {
    atomic_fetch_add_explicit((v7 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 103) < 0)
  {
    sub_100005F2C((a1 + 80), *(a2 + 80), *(a2 + 88));
  }

  else
  {
    v8 = *(a2 + 80);
    *(a1 + 96) = *(a2 + 96);
    *(a1 + 80) = v8;
  }

  sub_1000D4128(a1 + 104, a2 + 104);
  return a1;
}

void sub_1006B7E28(_Unwind_Exception *a1)
{
  v4 = *(v1 + 72);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  sub_100DC3ED0(v2);
  if (*(v1 + 47) < 0)
  {
    operator delete(*(v1 + 24));
  }

  v5 = *(v1 + 16);
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_1006B7E88(uint64_t a1)
{
  if (*(a1 + 184) == 1)
  {
    sub_100582310(a1 + 144);
    if (*(a1 + 136) == 1)
    {
      v2 = *(a1 + 112);
      if (v2)
      {
        *(a1 + 120) = v2;
        operator delete(v2);
      }
    }

    v3 = *(a1 + 88);
    if (v3)
    {
      *(a1 + 96) = v3;
      operator delete(v3);
    }

    v4 = *(a1 + 64);
    if (v4)
    {
      *(a1 + 72) = v4;
      operator delete(v4);
    }

    v5 = *(a1 + 40);
    if (v5)
    {
      *(a1 + 48) = v5;
      operator delete(v5);
    }

    if (*(a1 + 23) < 0)
    {
      operator delete(*a1);
    }
  }

  return a1;
}

uint64_t sub_1006B7F1C(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

uint64_t sub_1006B7F9C(uint64_t a1)
{
  *a1 = off_101E71080;
  sub_1000D45B0(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006B7FFC(uint64_t a1)
{
  *a1 = off_101E71080;
  sub_1000D45B0(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006B812C(_Unwind_Exception *a1)
{
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B8164(uint64_t a1, uint64_t a2)
{
  *a2 = off_101E71080;
  *(a2 + 8) = *(a1 + 8);
  v4 = *(a1 + 24);
  *(a2 + 24) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a1 + 55) < 0)
  {
    sub_100005F2C((a2 + 32), *(a1 + 32), *(a1 + 40));
  }

  else
  {
    v5 = *(a1 + 32);
    *(a2 + 48) = *(a1 + 48);
    *(a2 + 32) = v5;
  }

  return sub_1000D4128(a2 + 56, a1 + 56);
}

void sub_1006B81F8(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006B8228(uint64_t a1)
{
  sub_1000D45B0(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {

    std::__shared_weak_count::__release_weak(v2);
  }
}

void sub_1006B8284(uint64_t a1)
{
  sub_1000D45B0(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(a1);
}

void sub_1006B82DC(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2)
  {
    v3 = *(a1 + 8);
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (!*(a1 + 16))
      {
LABEL_27:
        sub_100004A34(v5);
        return;
      }

      dispatch_assert_queue_V2(*(v3 + 24));
      v6 = *(v3 + 432);
      if (v6)
      {
        if (*(a1 + 55) < 0)
        {
          sub_100005F2C(__p, *(a1 + 32), *(a1 + 40));
        }

        else
        {
          *__p = *(a1 + 32);
          v27 = *(a1 + 48);
        }

        v25 = 5;
        (*(*v6 + 24))(v6, __p, v24);
        sub_1006A6204(v24);
        if (SHIBYTE(v27) < 0)
        {
          operator delete(__p[0]);
        }
      }

      ServiceMap = Registry::getServiceMap(*(v3 + 80));
      v8 = ServiceMap;
      v9 = "17TMRouterInterface";
      if (("17TMRouterInterface" & 0x8000000000000000) != 0)
      {
        v10 = ("17TMRouterInterface" & 0x7FFFFFFFFFFFFFFFLL);
        v11 = 5381;
        do
        {
          v9 = v11;
          v12 = *v10++;
          v11 = (33 * v11) ^ v12;
        }

        while (v12);
      }

      std::mutex::lock(ServiceMap);
      v18 = v9;
      v13 = sub_100009510(&v8[1].__m_.__sig, &v18);
      if (v13)
      {
        v15 = v13[3];
        v14 = v13[4];
        if (v14)
        {
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          std::mutex::unlock(v8);
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          sub_100004A34(v14);
          v16 = 0;
          if (!v15)
          {
            goto LABEL_24;
          }

          goto LABEL_19;
        }
      }

      else
      {
        v15 = 0;
      }

      std::mutex::unlock(v8);
      v14 = 0;
      v16 = 1;
      if (!v15)
      {
LABEL_24:
        if ((v16 & 1) == 0)
        {
          sub_100004A34(v14);
        }

        sub_1000D379C(*(v3 + 376), (a1 + 32), (v3 + 40));
        goto LABEL_27;
      }

LABEL_19:
      v17 = *(v3 + 96);
      LOBYTE(v18) = 0;
      BYTE4(v18) = 0;
      v19 = 0;
      if (*(a1 + 55) < 0)
      {
        sub_100005F2C(v20, *(a1 + 32), *(a1 + 40));
      }

      else
      {
        *v20 = *(a1 + 32);
        v21 = *(a1 + 48);
      }

      v22 = 5;
      v23 = 1;
      (*(*v15 + 456))(v15, v17, a1 + 56, &v18);
      if (SHIBYTE(v21) < 0)
      {
        operator delete(v20[0]);
      }

      goto LABEL_24;
    }
  }
}

void sub_1006B8520(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, void *__p, uint64_t a12, int a13, __int16 a14, char a15, char a16, uint64_t a17, char a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22, uint64_t a23, int a24, __int16 a25, char a26, char a27)
{
  if ((v29 & 1) == 0)
  {
    sub_100004A34(v28);
  }

  sub_100004A34(v27);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B8588(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B85D4(uint64_t a1)
{
  *a1 = off_101E71100;
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v5 = (a1 + 376);
  sub_1000D48DC(&v5);
  v5 = (a1 + 352);
  sub_1000087B4(&v5);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006B867C(uint64_t a1)
{
  *a1 = off_101E71100;
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v4 = (a1 + 376);
  sub_1000D48DC(&v4);
  v4 = (a1 + 352);
  sub_1000087B4(&v4);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006B87DC(uint64_t a1)
{
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v4 = (a1 + 376);
  sub_1000D48DC(&v4);
  v4 = (a1 + 352);
  sub_1000087B4(&v4);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006B8864(uint64_t a1)
{
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v4 = (a1 + 376);
  sub_1000D48DC(&v4);
  v4 = (a1 + 352);
  sub_1000087B4(&v4);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

uint64_t sub_1006B88F4(uint64_t a1, uint64_t a2)
{
  sub_1006B0570(v16, a2);
  v3 = *(a1 + 24);
  if (v3)
  {
    v4 = *(a1 + 8);
    v5 = std::__shared_weak_count::lock(v3);
    if (v5)
    {
      v6 = v5;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v4 + 24));
        sub_1005833A8(v36, v16);
        if (v39 == 1)
        {
          sub_100581E40(v40, v36);
          v44 = 0;
          v45 = 0;
          v46 = 0;
          sub_100034C50(&v44, v37, v38, v38 - v37);
          v7 = 1;
        }

        else
        {
          v7 = 0;
          v40[0] = 0;
        }

        v47[0] = v7;
        sub_100583454(v36);
        if (v47[0] == 1)
        {
          memset(v29, 0, sizeof(v29));
          sub_100034C50(v29, v44, v45, v45 - v44);
          v30 = 1;
          v18 = 0;
          v19 = 0;
          __p = 0;
          sub_100034C50(&__p, v42, v43, v43 - v42);
          v20 = 1;
          v32 = v41;
          v33 = 1;
          sub_1006911D4(a1 + 56, v29, 0);
          if (v20 == 1 && __p)
          {
            v18 = __p;
            operator delete(__p);
          }

          if (v30 == 1 && v29[0])
          {
            v29[1] = v29[0];
            operator delete(v29[0]);
          }
        }

        else
        {
          sub_1005833A8(v29, v16);
          if (v31[14] == 11)
          {
            sub_100581E40(&v32, v29);
            sub_100582264(v34, v31);
            v8 = 1;
          }

          else
          {
            v8 = 0;
            LOBYTE(v32) = 0;
          }

          v35[0] = v8;
          sub_100583454(v29);
          if (v35[0] == 1)
          {
            sub_100582264(&__p, v34);
            v9 = v21;
            sub_100582310(&__p);
            if (v9)
            {
              v10 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v10, OS_LOG_TYPE_ERROR))
              {
                asString(v34);
                sub_101779E90();
              }
            }

            v11 = *(v4 + 432);
            if (v11)
            {
              if (*(a1 + 55) < 0)
              {
                sub_100005F2C(&__dst, *(a1 + 32), *(a1 + 40));
              }

              else
              {
                __dst = *(a1 + 32);
                v26 = *(a1 + 48);
              }

              v24 = 5;
              (*(*v11 + 24))(v11, &__dst, v23);
              sub_101779600(v23, &__dst);
            }
          }

          else
          {
            sub_1005833A8(&__p, v16);
            v12 = v22;
            sub_100583454(&__p);
            if (v12 == 10)
            {
              v13 = *(v4 + 432);
              if (v13)
              {
                if (*(a1 + 55) < 0)
                {
                  sub_100005F2C(&v27, *(a1 + 32), *(a1 + 40));
                }

                else
                {
                  v27 = *(a1 + 32);
                  v28 = *(a1 + 48);
                }

                v24 = 0;
                (*(*v13 + 24))(v13, &v27, v23);
                sub_101779600(v23, &v27);
              }
            }

            else
            {
              v14 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v14, OS_LOG_TYPE_ERROR))
              {
                sub_101779E5C();
              }
            }
          }

          sub_101779D3C(v35, &v32);
        }

        sub_101779EE4(v47, v40);
      }

      sub_100004A34(v6);
    }
  }

  return sub_100583454(v16);
}

void sub_1006B8CF0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{
  sub_1006B7E88(&STACK[0x2D0]);
  sub_1006B0438(v10 - 256);
  sub_100004A34(v9);
  sub_100583454(&a9);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B8E10(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B8E5C(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  *(a1 + 48) = *(a2 + 48);
  v6 = *(a2 + 64);
  *(a1 + 64) = v6;
  if (v6)
  {
    atomic_fetch_add_explicit((v6 + 16), 1uLL, memory_order_relaxed);
  }

  sub_1006A0A6C(a1 + 72, a2 + 72);
  *(a1 + 72) = off_101EC8DD8;
  if (*(a2 + 343) < 0)
  {
    sub_100005F2C((a1 + 320), *(a2 + 320), *(a2 + 328));
  }

  else
  {
    v7 = *(a2 + 320);
    *(a1 + 336) = *(a2 + 336);
    *(a1 + 320) = v7;
  }

  *(a1 + 344) = 0;
  *(a1 + 352) = 0;
  *(a1 + 360) = 0;
  sub_10004EFD0(a1 + 344, *(a2 + 344), *(a2 + 352), 0xAAAAAAAAAAAAAAABLL * ((*(a2 + 352) - *(a2 + 344)) >> 3));
  *(a1 + 368) = 0;
  *(a1 + 376) = 0;
  *(a1 + 384) = 0;
  sub_1000D4704(a1 + 368, *(a2 + 368), *(a2 + 376), (*(a2 + 376) - *(a2 + 368)) >> 5);
  v8 = (a1 + 392);
  if (*(a2 + 415) < 0)
  {
    sub_100005F2C(v8, *(a2 + 392), *(a2 + 400));
  }

  else
  {
    v9 = *(a2 + 392);
    *(a1 + 408) = *(a2 + 408);
    *v8 = v9;
  }

  return a1;
}

void sub_1006B8FC4(_Unwind_Exception *a1)
{
  sub_1000D2230(v3);
  sub_100C18C58(v2);
  v5 = *(v1 + 64);
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  if (*(v1 + 47) < 0)
  {
    operator delete(*(v1 + 24));
  }

  v6 = *(v1 + 16);
  if (v6)
  {
    std::__shared_weak_count::__release_weak(v6);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_1006B9044(uint64_t a1)
{
  *a1 = off_101E71180;
  v2 = (a1 + 56);
  v5 = (a1 + 80);
  sub_1000D48DC(&v5);
  v5 = v2;
  sub_1000087B4(&v5);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006B90C8(uint64_t a1)
{
  *a1 = off_101E71180;
  v2 = (a1 + 56);
  v4 = (a1 + 80);
  sub_1000D48DC(&v4);
  v4 = v2;
  sub_1000087B4(&v4);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006B9204(uint64_t a1)
{
  v2 = (a1 + 56);
  v4 = (a1 + 80);
  sub_1000D48DC(&v4);
  v4 = v2;
  sub_1000087B4(&v4);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006B9268(uint64_t a1)
{
  v2 = (a1 + 56);
  v4 = (a1 + 80);
  sub_1000D48DC(&v4);
  v4 = v2;
  sub_1000087B4(&v4);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

void sub_1006B92D4(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2)
  {
    v3 = *(a1 + 8);
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (!*(a1 + 16))
      {
LABEL_31:
        sub_100004A34(v5);
        return;
      }

      dispatch_assert_queue_V2(*(v3 + 24));
      v6 = *(v3 + 432);
      if (v6)
      {
        if (*(a1 + 55) < 0)
        {
          sub_100005F2C(&__dst, *(a1 + 32), *(a1 + 40));
        }

        else
        {
          __dst = *(a1 + 32);
          v31 = *(a1 + 48);
        }

        v29 = 5;
        (*(*v6 + 24))(v6, &__dst, v28);
        sub_1006A6204(v28);
        if (SHIBYTE(v31) < 0)
        {
          operator delete(__dst);
        }
      }

      ServiceMap = Registry::getServiceMap(*(v3 + 80));
      v8 = ServiceMap;
      v9 = "17TMRouterInterface";
      if (("17TMRouterInterface" & 0x8000000000000000) != 0)
      {
        v10 = ("17TMRouterInterface" & 0x7FFFFFFFFFFFFFFFLL);
        v11 = 5381;
        do
        {
          v9 = v11;
          v12 = *v10++;
          v11 = (33 * v11) ^ v12;
        }

        while (v12);
      }

      std::mutex::lock(ServiceMap);
      v26[0] = v9;
      v13 = sub_100009510(&v8[1].__m_.__sig, v26);
      if (v13)
      {
        v15 = v13[3];
        v14 = v13[4];
        if (v14)
        {
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          std::mutex::unlock(v8);
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          sub_100004A34(v14);
          v16 = 0;
          if (!v15)
          {
            goto LABEL_28;
          }

          goto LABEL_19;
        }
      }

      else
      {
        v15 = 0;
      }

      std::mutex::unlock(v8);
      v14 = 0;
      v16 = 1;
      if (!v15)
      {
LABEL_28:
        if ((v16 & 1) == 0)
        {
          sub_100004A34(v14);
        }

        sub_1000D379C(*(v3 + 376), (a1 + 32), (v3 + 40));
        goto LABEL_31;
      }

LABEL_19:
      v17 = *(v3 + 96);
      sub_1006B9778(v26, (a1 + 56));
      sub_1006B9778(v24, (a1 + 56));
      LOBYTE(v18) = 0;
      BYTE4(v18) = 0;
      v19 = 0;
      if (*(a1 + 55) < 0)
      {
        sub_100005F2C(__p, *(a1 + 32), *(a1 + 40));
      }

      else
      {
        *__p = *(a1 + 32);
        v21 = *(a1 + 48);
      }

      v22 = 5;
      v23 = 1;
      (*(*v15 + 464))(v15, v17, v26, v24, &v18);
      if (SHIBYTE(v21) < 0)
      {
        operator delete(__p[0]);
      }

      if (v25[24] == 1)
      {
        v18 = v25;
        sub_1000D48DC(&v18);
        v18 = v24;
        sub_1000087B4(&v18);
      }

      if (v27[24] == 1)
      {
        v24[0] = v27;
        sub_1000D48DC(v24);
        v24[0] = v26;
        sub_1000087B4(v24);
      }

      goto LABEL_28;
    }
  }
}

void sub_1006B9594(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, void *__p, uint64_t a12, int a13, __int16 a14, char a15, char a16, uint64_t a17, char a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, char a25)
{
  sub_1006B980C(&a18);
  sub_1006B980C(&a25);
  if ((v27 & 1) == 0)
  {
    sub_100004A34(v26);
  }

  sub_100004A34(v25);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B9620(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006B966C(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  *(a1 + 48) = 0;
  *(a1 + 56) = 0;
  *(a1 + 64) = 0;
  sub_10004EFD0(a1 + 48, *(a2 + 48), *(a2 + 56), 0xAAAAAAAAAAAAAAABLL * ((*(a2 + 56) - *(a2 + 48)) >> 3));
  *(a1 + 72) = 0;
  *(a1 + 80) = 0;
  *(a1 + 88) = 0;
  sub_1000D4704(a1 + 72, *(a2 + 72), *(a2 + 80), (*(a2 + 80) - *(a2 + 72)) >> 5);
  return a1;
}

void sub_1006B9734(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  v12 = *(v10 + 16);
  if (v12)
  {
    std::__shared_weak_count::__release_weak(v12);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_1006B9778(uint64_t a1, uint64_t *a2)
{
  *a1 = 0;
  *(a1 + 8) = 0;
  *(a1 + 16) = 0;
  sub_10004EFD0(a1, *a2, a2[1], 0xAAAAAAAAAAAAAAABLL * ((a2[1] - *a2) >> 3));
  *(a1 + 24) = 0;
  *(a1 + 32) = 0;
  *(a1 + 40) = 0;
  sub_1000D4704(a1 + 24, a2[3], a2[4], (a2[4] - a2[3]) >> 5);
  *(a1 + 48) = 1;
  return a1;
}

void sub_1006B97F4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_1000087B4(va);
  _Unwind_Resume(a1);
}

uint64_t sub_1006B980C(uint64_t a1)
{
  if (*(a1 + 48) == 1)
  {
    v3 = (a1 + 24);
    sub_1000D48DC(&v3);
    v3 = a1;
    sub_1000087B4(&v3);
  }

  return a1;
}

uint64_t sub_1006B9860(uint64_t a1)
{
  *a1 = off_101E71200;
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v5 = (a1 + 376);
  sub_1000D48DC(&v5);
  v5 = (a1 + 352);
  sub_1000087B4(&v5);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006B9908(uint64_t a1)
{
  *a1 = off_101E71200;
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v4 = (a1 + 376);
  sub_1000D48DC(&v4);
  v4 = (a1 + 352);
  sub_1000087B4(&v4);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006B9A68(uint64_t a1)
{
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v4 = (a1 + 376);
  sub_1000D48DC(&v4);
  v4 = (a1 + 352);
  sub_1000087B4(&v4);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006B9AF0(uint64_t a1)
{
  if (*(a1 + 423) < 0)
  {
    operator delete(*(a1 + 400));
  }

  v4 = (a1 + 376);
  sub_1000D48DC(&v4);
  v4 = (a1 + 352);
  sub_1000087B4(&v4);
  sub_100C18C58(a1 + 80);
  v2 = *(a1 + 72);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

uint64_t sub_1006B9B80(uint64_t a1, uint64_t a2)
{
  sub_1006B0570(v30, a2);
  v3 = *(a1 + 24);
  if (v3)
  {
    v4 = *(a1 + 8);
    v5 = std::__shared_weak_count::lock(v3);
    if (v5)
    {
      v6 = v5;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v4 + 24));
        sub_1005833A8(v73, v30);
        if (v78 == 2)
        {
          sub_100581E40(v79, v73);
          memset(v81, 0, sizeof(v81));
          sub_100034C50(v81, v74, v75, v75 - v74);
          memset(v82, 0, sizeof(v82));
          sub_100581F6C(v82, v76, v77, (v77 - v76) >> 5);
          v7 = 1;
        }

        else
        {
          v7 = 0;
          v79[0] = 0;
        }

        v83[0] = v7;
        sub_100583454(v73);
        if (v83[0] == 1)
        {
          v72 = 0;
          v71 = 0u;
          v70 = 0u;
          v68 = 0u;
          v69 = 0u;
          v67 = 0u;
          memset(v66, 0, sizeof(v66));
          v64 = 0u;
          v65 = 0u;
          *v62 = 0u;
          v63 = 0u;
          v60 = 0u;
          memset(v61, 0, sizeof(v61));
          v59 = 0u;
          sub_100B27D98(&v59);
          sub_100B27E08(&v59, "imdn <urn:ietf:params:imdn>");
          sub_100A972E8(__p);
          if ((SBYTE7(v44) & 0x80u) == 0)
          {
            v8 = __p;
          }

          else
          {
            v8 = __p[0];
          }

          sub_100B27E1C(&v59, "imdn.Message-ID", v8);
          if (SBYTE7(v44) < 0)
          {
            operator delete(__p[0]);
          }

          sub_100B27E08(&v59, "mls <http://www.gsma.com/rcs/mls>");
          ctu::base64::encode();
          if ((SBYTE7(v44) & 0x80u) == 0)
          {
            v9 = __p;
          }

          else
          {
            v9 = __p[0];
          }

          sub_100B27E1C(&v59, "mls.Epoch-Authenticator", v9);
          if (SBYTE7(v44) < 0)
          {
            operator delete(__p[0]);
          }

          std::to_string(__p, __val);
          if ((SBYTE7(v44) & 0x80u) == 0)
          {
            v10 = __p;
          }

          else
          {
            v10 = __p[0];
          }

          sub_100B27E1C(&v59, "mls.Era-Id", v10);
          if (SBYTE7(v44) < 0)
          {
            operator delete(__p[0]);
          }

          v58 = 0;
          v56 = 0u;
          v57 = 0u;
          v54 = 0u;
          v55 = 0u;
          v52 = 0u;
          v53 = 0u;
          v50 = 0u;
          v51 = 0u;
          v48 = 0u;
          v49 = 0u;
          *v46 = 0u;
          v47 = 0u;
          v44 = 0u;
          memset(v45, 0, sizeof(v45));
          *__p = 0u;
          sub_100BE2724(__p, "message/mls-rcs-client");
          v31[0] = 0;
          v31[1] = 0;
          v32 = 0;
          sub_100BE2728(__p, v81, v38);
          sub_100B27EC8(&v59, v38, v31);
          if (v38[0])
          {
            v38[1] = v38[0];
            operator delete(v38[0]);
          }

          v29 = v31[0];
          *v38 = *v31;
          v39 = v32;
          v31[0] = 0;
          v31[1] = 0;
          v32 = 0;
          v40 = 1;
          sub_100693070(a1 + 56, v38, 0);
          if (v29)
          {
            operator delete(v29);
          }

          if (v31[0])
          {
            v31[1] = v31[0];
            operator delete(v31[0]);
          }

          v14 = v12;
          *&v44 = v12;
          if (SHIBYTE(v47) < 0)
          {
            operator delete(v46[1]);
          }

          std::locale::~locale(v45);
          std::iostream::~basic_iostream();
          std::ios::~ios();
          *&v59 = v11;
          *(&v59 + *(v11 - 24)) = v13;
          *&v60 = v14;
          if (SHIBYTE(v63) < 0)
          {
            operator delete(v62[1]);
          }

          std::locale::~locale(v61);
          std::iostream::~basic_iostream();
          std::ios::~ios();
        }

        else
        {
          sub_1005833A8(&v59, v30);
          if (DWORD2(v67) == 11)
          {
            sub_100581E40(v38, &v59);
            sub_100582264(v41, v66);
            v21 = 1;
          }

          else
          {
            v21 = 0;
            LOBYTE(v38[0]) = 0;
          }

          v42[0] = v21;
          sub_100583454(&v59);
          if (v42[0] == 1)
          {
            sub_100582264(__p, v41);
            v22 = v45[0];
            sub_100582310(__p);
            if (v22)
            {
              v23 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v23, OS_LOG_TYPE_ERROR))
              {
                asString(v41);
                sub_101779FAC();
              }
            }

            v24 = *(v4 + 432);
            if (v24)
            {
              if (*(a1 + 55) < 0)
              {
                sub_100005F2C(&__dst, *(a1 + 32), *(a1 + 40));
              }

              else
              {
                __dst = *(a1 + 32);
                v35 = *(a1 + 48);
              }

              v33 = 5;
              (*(*v24 + 24))(v24, &__dst, v31);
              sub_101779600(v31, &__dst);
            }
          }

          else
          {
            sub_1005833A8(__p, v30);
            v25 = DWORD2(v53);
            sub_100583454(__p);
            if (v25 == 10)
            {
              v26 = *(v4 + 432);
              if (v26)
              {
                if (*(a1 + 55) < 0)
                {
                  sub_100005F2C(&v36, *(a1 + 32), *(a1 + 40));
                }

                else
                {
                  v36 = *(a1 + 32);
                  v37 = *(a1 + 48);
                }

                v33 = 0;
                (*(*v26 + 24))(v26, &v36, v31);
                sub_101779600(v31, &v36);
              }
            }

            else
            {
              v27 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v27, OS_LOG_TYPE_ERROR))
              {
                sub_101779F78();
              }
            }
          }

          sub_101779D3C(v42, v38);
        }

        sub_101779DC0(v83, v79, v15, v16, v17, v18, v19, v20);
      }

      sub_100004A34(v6);
    }
  }

  return sub_100583454(v30);
}

void sub_1006BA304(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, char a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, void *a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, void *__p, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49)
{
  sub_1006B7E88(&a49);
  if (LOBYTE(STACK[0x5C8]) == 1)
  {
    sub_1006B0390(&STACK[0x508]);
  }

  sub_100004A34(v49);
  sub_100583454(&a11);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BA48C(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BA4D8(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  *(a1 + 48) = *(a2 + 48);
  v6 = *(a2 + 64);
  *(a1 + 64) = v6;
  if (v6)
  {
    atomic_fetch_add_explicit((v6 + 16), 1uLL, memory_order_relaxed);
  }

  sub_1006A0A6C(a1 + 72, a2 + 72);
  *(a1 + 72) = off_101EC8DD8;
  if (*(a2 + 343) < 0)
  {
    sub_100005F2C((a1 + 320), *(a2 + 320), *(a2 + 328));
  }

  else
  {
    v7 = *(a2 + 320);
    *(a1 + 336) = *(a2 + 336);
    *(a1 + 320) = v7;
  }

  *(a1 + 344) = 0;
  *(a1 + 352) = 0;
  *(a1 + 360) = 0;
  sub_10004EFD0(a1 + 344, *(a2 + 344), *(a2 + 352), 0xAAAAAAAAAAAAAAABLL * ((*(a2 + 352) - *(a2 + 344)) >> 3));
  *(a1 + 368) = 0;
  *(a1 + 376) = 0;
  *(a1 + 384) = 0;
  sub_1000D4704(a1 + 368, *(a2 + 368), *(a2 + 376), (*(a2 + 376) - *(a2 + 368)) >> 5);
  v8 = (a1 + 392);
  if (*(a2 + 415) < 0)
  {
    sub_100005F2C(v8, *(a2 + 392), *(a2 + 400));
  }

  else
  {
    v9 = *(a2 + 392);
    *(a1 + 408) = *(a2 + 408);
    *v8 = v9;
  }

  return a1;
}

void sub_1006BA640(_Unwind_Exception *a1)
{
  sub_1000D2230(v3);
  sub_100C18C58(v2);
  v5 = *(v1 + 64);
  if (v5)
  {
    std::__shared_weak_count::__release_weak(v5);
  }

  if (*(v1 + 47) < 0)
  {
    operator delete(*(v1 + 24));
  }

  v6 = *(v1 + 16);
  if (v6)
  {
    std::__shared_weak_count::__release_weak(v6);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_1006BA6C0(uint64_t a1)
{
  *a1 = off_101E71280;
  v2 = (a1 + 56);
  v5 = (a1 + 80);
  sub_1000D48DC(&v5);
  v5 = v2;
  sub_1000087B4(&v5);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006BA744(uint64_t a1)
{
  *a1 = off_101E71280;
  v2 = (a1 + 56);
  v4 = (a1 + 80);
  sub_1000D48DC(&v4);
  v4 = v2;
  sub_1000087B4(&v4);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006BA880(uint64_t a1)
{
  v2 = (a1 + 56);
  v4 = (a1 + 80);
  sub_1000D48DC(&v4);
  v4 = v2;
  sub_1000087B4(&v4);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006BA8E4(uint64_t a1)
{
  v2 = (a1 + 56);
  v4 = (a1 + 80);
  sub_1000D48DC(&v4);
  v4 = v2;
  sub_1000087B4(&v4);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

void sub_1006BA950(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2)
  {
    v3 = *(a1 + 8);
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (!*(a1 + 16))
      {
LABEL_31:
        sub_100004A34(v5);
        return;
      }

      dispatch_assert_queue_V2(*(v3 + 24));
      v6 = *(v3 + 432);
      if (v6)
      {
        if (*(a1 + 55) < 0)
        {
          sub_100005F2C(&__dst, *(a1 + 32), *(a1 + 40));
        }

        else
        {
          __dst = *(a1 + 32);
          v31 = *(a1 + 48);
        }

        v29 = 5;
        (*(*v6 + 24))(v6, &__dst, v28);
        sub_1006A6204(v28);
        if (SHIBYTE(v31) < 0)
        {
          operator delete(__dst);
        }
      }

      ServiceMap = Registry::getServiceMap(*(v3 + 80));
      v8 = ServiceMap;
      v9 = "17TMRouterInterface";
      if (("17TMRouterInterface" & 0x8000000000000000) != 0)
      {
        v10 = ("17TMRouterInterface" & 0x7FFFFFFFFFFFFFFFLL);
        v11 = 5381;
        do
        {
          v9 = v11;
          v12 = *v10++;
          v11 = (33 * v11) ^ v12;
        }

        while (v12);
      }

      std::mutex::lock(ServiceMap);
      v26[0] = v9;
      v13 = sub_100009510(&v8[1].__m_.__sig, v26);
      if (v13)
      {
        v15 = v13[3];
        v14 = v13[4];
        if (v14)
        {
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          std::mutex::unlock(v8);
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          sub_100004A34(v14);
          v16 = 0;
          if (!v15)
          {
            goto LABEL_28;
          }

          goto LABEL_19;
        }
      }

      else
      {
        v15 = 0;
      }

      std::mutex::unlock(v8);
      v14 = 0;
      v16 = 1;
      if (!v15)
      {
LABEL_28:
        if ((v16 & 1) == 0)
        {
          sub_100004A34(v14);
        }

        sub_1000D379C(*(v3 + 376), (a1 + 32), (v3 + 40));
        goto LABEL_31;
      }

LABEL_19:
      v17 = *(v3 + 96);
      sub_1006B9778(v26, (a1 + 56));
      sub_1006B9778(v24, (a1 + 56));
      LOBYTE(v18) = 0;
      BYTE4(v18) = 0;
      v19 = 0;
      if (*(a1 + 55) < 0)
      {
        sub_100005F2C(__p, *(a1 + 32), *(a1 + 40));
      }

      else
      {
        *__p = *(a1 + 32);
        v21 = *(a1 + 48);
      }

      v22 = 5;
      v23 = 1;
      (*(*v15 + 472))(v15, v17, v26, v24, &v18);
      if (SHIBYTE(v21) < 0)
      {
        operator delete(__p[0]);
      }

      if (v25[24] == 1)
      {
        v18 = v25;
        sub_1000D48DC(&v18);
        v18 = v24;
        sub_1000087B4(&v18);
      }

      if (v27[24] == 1)
      {
        v24[0] = v27;
        sub_1000D48DC(v24);
        v24[0] = v26;
        sub_1000087B4(v24);
      }

      goto LABEL_28;
    }
  }
}

void sub_1006BAC10(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, void *__p, uint64_t a12, int a13, __int16 a14, char a15, char a16, uint64_t a17, char a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, char a25)
{
  sub_1006B980C(&a18);
  sub_1006B980C(&a25);
  if ((v27 & 1) == 0)
  {
    sub_100004A34(v26);
  }

  sub_100004A34(v25);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BAC9C(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BACE8(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  *(a1 + 48) = 0;
  *(a1 + 56) = 0;
  *(a1 + 64) = 0;
  sub_10004EFD0(a1 + 48, *(a2 + 48), *(a2 + 56), 0xAAAAAAAAAAAAAAABLL * ((*(a2 + 56) - *(a2 + 48)) >> 3));
  *(a1 + 72) = 0;
  *(a1 + 80) = 0;
  *(a1 + 88) = 0;
  sub_1000D4704(a1 + 72, *(a2 + 72), *(a2 + 80), (*(a2 + 80) - *(a2 + 72)) >> 5);
  return a1;
}

void sub_1006BADB0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  v12 = *(v10 + 16);
  if (v12)
  {
    std::__shared_weak_count::__release_weak(v12);
  }

  _Unwind_Resume(exception_object);
}

void *sub_1006BAE68(void *a1, int *a2, uint64_t a3)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = off_101E71300;
  sub_1006BAF60((a1 + 3), a2, a3);
  return a1;
}

void sub_1006BAEE4(std::__shared_weak_count *a1)
{
  a1->__vftable = off_101E71300;
  std::__shared_weak_count::~__shared_weak_count(a1);

  operator delete();
}

uint64_t sub_1006BAF60(uint64_t a1, int *a2, uint64_t a3)
{
  v4 = *a2;
  if (*(a3 + 23) < 0)
  {
    sub_100005F2C(__p, *a3, *(a3 + 8));
  }

  else
  {
    *__p = *a3;
    v7 = *(a3 + 16);
  }

  sub_1000D3354(a1, v4, __p);
  if (SHIBYTE(v7) < 0)
  {
    operator delete(__p[0]);
  }

  return a1;
}

void sub_1006BAFD8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void *sub_1006BAFF4(void *a1)
{
  *a1 = off_101E71350;
  sub_100695030((a1 + 1));
  return a1;
}

void sub_1006BB038(void *a1)
{
  *a1 = off_101E71350;
  sub_100695030((a1 + 1));

  operator delete();
}

void sub_1006BB148(void *a1)
{
  sub_100695030(a1 + 8);

  operator delete(a1);
}

void sub_1006BB184(uint64_t a1, char *a2)
{
  v3 = *(a1 + 24);
  if (v3)
  {
    v4 = *a2;
    v5 = *(a1 + 8);
    v6 = std::__shared_weak_count::lock(v3);
    if (v6)
    {
      v7 = v6;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v5 + 24));
        if (v4)
        {
          if (*(v5 + 432))
          {
            if (*(a1 + 455) < 0)
            {
              sub_100005F2C(&__dst, *(a1 + 432), *(a1 + 440));
            }

            else
            {
              __dst = *(a1 + 432);
              v18 = *(a1 + 448);
            }

            if (*(a1 + 479) < 0)
            {
              sub_100005F2C(&v15, *(a1 + 456), *(a1 + 464));
            }

            else
            {
              v15 = *(a1 + 456);
              v16 = *(a1 + 472);
            }

            v10 = *(a1 + 16);
            v9 = *(a1 + 24);
            v12[0] = v5;
            v12[1] = v10;
            v12[2] = v9;
            if (v9)
            {
              atomic_fetch_add_explicit(v9 + 2, 1uLL, memory_order_relaxed);
            }

            sub_100694E90(&v13, a1 + 32);
            v11 = *(a1 + 352);
            object = v11;
            if (v11)
            {
              xpc_retain(v11);
            }

            else
            {
              object = xpc_null_create();
            }

            v19 = 0;
            operator new();
          }

          sub_1006BB9C4((a1 + 360));
        }

        else
        {
          v8 = *(a1 + 352);
          v12[0] = v8;
          if (v8)
          {
            xpc_retain(v8);
          }

          else
          {
            v8 = xpc_null_create();
            v12[0] = v8;
          }

          sub_100694B78(a1 + 32, v12);
          xpc_release(v8);
        }
      }

      sub_100004A34(v7);
    }
  }
}

void sub_1006BB57C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, std::__shared_weak_count *a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, char a22, uint64_t a23, std::__shared_weak_count *a24)
{
  if (*(v25 + 55) < 0)
  {
    operator delete(*(v25 + 32));
  }

  v28 = *(v25 + 24);
  if (v28)
  {
    std::__shared_weak_count::__release_weak(v28);
  }

  operator delete(v25);
  sub_100694F98(&a9);
  sub_1006BC91C(v26 - 88);
  sub_1006BBC6C(&a22);
  if (*(v26 - 153) < 0)
  {
    operator delete(*(v26 - 176));
  }

  if (*(v26 - 121) < 0)
  {
    operator delete(*(v26 - 144));
  }

  sub_100004A34(v24);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BB6B4(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BB700(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  *(a1 + 16) = *(a2 + 16);
  *(a2 + 8) = 0;
  *(a2 + 16) = 0;
  sub_1006A0A6C(a1 + 24, a2 + 24);
  *(a1 + 24) = off_101EC8DD8;
  if (*(a2 + 295) < 0)
  {
    sub_100005F2C((a1 + 272), *(a2 + 272), *(a2 + 280));
  }

  else
  {
    v4 = *(a2 + 272);
    *(a1 + 288) = *(a2 + 288);
    *(a1 + 272) = v4;
  }

  v5 = (a1 + 296);
  if (*(a2 + 319) < 0)
  {
    sub_100005F2C(v5, *(a2 + 296), *(a2 + 304));
  }

  else
  {
    v6 = *(a2 + 296);
    *(a1 + 312) = *(a2 + 312);
    *v5 = v6;
  }

  return a1;
}

void sub_1006BB7C4(_Unwind_Exception *a1)
{
  sub_100C18C58(v2);
  v4 = *(v1 + 16);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_1006BB7FC(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  sub_100694E90(a1 + 24, a2 + 24);
  v5 = *(a2 + 344);
  *(a1 + 344) = v5;
  if (v5)
  {
    xpc_retain(v5);
  }

  else
  {
    *(a1 + 344) = xpc_null_create();
  }

  *(a1 + 352) = *(a2 + 352);
  v6 = *(a2 + 368);
  *(a1 + 368) = v6;
  if (v6)
  {
    atomic_fetch_add_explicit((v6 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 399) < 0)
  {
    sub_100005F2C((a1 + 376), *(a2 + 376), *(a2 + 384));
  }

  else
  {
    v7 = *(a2 + 376);
    *(a1 + 392) = *(a2 + 392);
    *(a1 + 376) = v7;
  }

  if (*(a2 + 423) < 0)
  {
    sub_100005F2C((a1 + 400), *(a2 + 400), *(a2 + 408));
  }

  else
  {
    v8 = *(a2 + 400);
    *(a1 + 416) = *(a2 + 416);
    *(a1 + 400) = v8;
  }

  if (*(a2 + 447) < 0)
  {
    sub_100005F2C((a1 + 424), *(a2 + 424), *(a2 + 432));
  }

  else
  {
    v9 = *(a2 + 424);
    *(a1 + 440) = *(a2 + 440);
    *(a1 + 424) = v9;
  }

  if (*(a2 + 471) < 0)
  {
    sub_100005F2C((a1 + 448), *(a2 + 448), *(a2 + 456));
  }

  else
  {
    v10 = *(a2 + 448);
    *(a1 + 464) = *(a2 + 464);
    *(a1 + 448) = v10;
  }

  return a1;
}

void sub_1006BB944(_Unwind_Exception *a1)
{
  if (*(v1 + 447) < 0)
  {
    operator delete(*v2);
  }

  sub_100694F98(v1 + 352);
  sub_100DC3ED0((v1 + 344));
  sub_100694FE8(v1 + 24);
  v4 = *(v1 + 16);
  if (v4)
  {
    std::__shared_weak_count::__release_weak(v4);
  }

  _Unwind_Resume(a1);
}

void sub_1006BB9C4(uint64_t *a1)
{
  v2 = a1[2];
  if (v2)
  {
    v3 = *a1;
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (!a1[1])
      {
LABEL_27:
        sub_100004A34(v5);
        return;
      }

      dispatch_assert_queue_V2(*(v3 + 24));
      v6 = *(v3 + 432);
      if (v6)
      {
        if (*(a1 + 71) < 0)
        {
          sub_100005F2C(__p, a1[6], a1[7]);
        }

        else
        {
          *__p = *(a1 + 3);
          v27 = a1[8];
        }

        v25 = 5;
        (*(*v6 + 24))(v6, __p, v24);
        sub_1006A6204(v24);
        if (SHIBYTE(v27) < 0)
        {
          operator delete(__p[0]);
        }
      }

      ServiceMap = Registry::getServiceMap(*(v3 + 80));
      v8 = ServiceMap;
      v9 = "17TMRouterInterface";
      if (("17TMRouterInterface" & 0x8000000000000000) != 0)
      {
        v10 = ("17TMRouterInterface" & 0x7FFFFFFFFFFFFFFFLL);
        v11 = 5381;
        do
        {
          v9 = v11;
          v12 = *v10++;
          v11 = (33 * v11) ^ v12;
        }

        while (v12);
      }

      std::mutex::lock(ServiceMap);
      v18 = v9;
      v13 = sub_100009510(&v8[1].__m_.__sig, &v18);
      if (v13)
      {
        v15 = v13[3];
        v14 = v13[4];
        if (v14)
        {
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          std::mutex::unlock(v8);
          atomic_fetch_add_explicit(&v14->__shared_owners_, 1uLL, memory_order_relaxed);
          sub_100004A34(v14);
          v16 = 0;
          if (!v15)
          {
            goto LABEL_24;
          }

          goto LABEL_19;
        }
      }

      else
      {
        v15 = 0;
      }

      std::mutex::unlock(v8);
      v14 = 0;
      v16 = 1;
      if (!v15)
      {
LABEL_24:
        if ((v16 & 1) == 0)
        {
          sub_100004A34(v14);
        }

        sub_1000D379C(*(v3 + 376), a1 + 6, (v3 + 40));
        goto LABEL_27;
      }

LABEL_19:
      v17 = *(v3 + 96);
      LOBYTE(v18) = 0;
      BYTE4(v18) = 0;
      v19 = 0;
      if (*(a1 + 71) < 0)
      {
        sub_100005F2C(v20, a1[6], a1[7]);
      }

      else
      {
        *v20 = *(a1 + 3);
        v21 = a1[8];
      }

      v22 = 5;
      v23 = 1;
      (*(*v15 + 480))(v15, v17, &v18);
      if (SHIBYTE(v21) < 0)
      {
        operator delete(v20[0]);
      }

      goto LABEL_24;
    }
  }
}

void sub_1006BBC04(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, void *__p, uint64_t a12, int a13, __int16 a14, char a15, char a16, uint64_t a17, char a18, uint64_t a19, uint64_t a20, uint64_t a21, void *a22, uint64_t a23, int a24, __int16 a25, char a26, char a27)
{
  if ((v29 & 1) == 0)
  {
    sub_100004A34(v28);
  }

  sub_100004A34(v27);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BBC6C(uint64_t a1)
{
  xpc_release(*(a1 + 344));
  *(a1 + 344) = 0;
  if (*(a1 + 343) < 0)
  {
    operator delete(*(a1 + 320));
  }

  sub_100C18C58(a1 + 48);
  v2 = *(a1 + 40);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 16);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

uint64_t sub_1006BBCD0(uint64_t a1)
{
  *a1 = off_101E713C0;
  xpc_release(*(a1 + 352));
  *(a1 + 352) = 0;
  if (*(a1 + 351) < 0)
  {
    operator delete(*(a1 + 328));
  }

  sub_100C18C58(a1 + 56);
  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006BBD50(uint64_t a1)
{
  *a1 = off_101E713C0;
  xpc_release(*(a1 + 352));
  *(a1 + 352) = 0;
  if (*(a1 + 351) < 0)
  {
    operator delete(*(a1 + 328));
  }

  sub_100C18C58(a1 + 56);
  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006BBE98(_Unwind_Exception *a1)
{
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

xpc_object_t sub_1006BBEB8(uint64_t a1, uint64_t a2)
{
  *a2 = off_101E713C0;
  *(a2 + 8) = *(a1 + 8);
  v4 = *(a1 + 24);
  *(a2 + 24) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  sub_100694E90(a2 + 32, a1 + 32);
  v5 = *(a1 + 352);
  *(a2 + 352) = v5;
  if (v5)
  {
    return xpc_retain(v5);
  }

  result = xpc_null_create();
  *(a2 + 352) = result;
  return result;
}

void sub_1006BBF44(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006BBF5C(uint64_t a1)
{
  xpc_release(*(a1 + 352));
  *(a1 + 352) = 0;
  if (*(a1 + 351) < 0)
  {
    operator delete(*(a1 + 328));
  }

  sub_100C18C58(a1 + 56);
  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {

    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006BBFD4(uint64_t a1)
{
  xpc_release(*(a1 + 352));
  *(a1 + 352) = 0;
  if (*(a1 + 351) < 0)
  {
    operator delete(*(a1 + 328));
  }

  sub_100C18C58(a1 + 56);
  v2 = *(a1 + 48);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

void sub_1006BC048(void *a1, uint64_t a2)
{
  *v13 = *a2;
  v14 = *(a2 + 16);
  *(a2 + 8) = 0;
  *(a2 + 16) = 0;
  *a2 = 0;
  *__val = *(a2 + 24);
  *v16 = *(a2 + 40);
  *(a2 + 40) = 0;
  *(a2 + 48) = 0;
  *v17 = *(a2 + 64);
  *(a2 + 72) = 0;
  *(a2 + 80) = 0;
  *(a2 + 56) = 0;
  *(a2 + 64) = 0;
  *v18 = *(a2 + 88);
  *(a2 + 88) = 0;
  *(a2 + 96) = 0;
  *(a2 + 104) = 0;
  LOBYTE(v19[0]) = 0;
  v20 = 0;
  if (*(a2 + 136) == 1)
  {
    *v19 = *(a2 + 112);
    *(a2 + 120) = 0;
    *(a2 + 128) = 0;
    *(a2 + 112) = 0;
    v20 = 1;
  }

  v21 = *(a2 + 144);
  v3 = v21;
  v22 = *(a2 + 160);
  *(a2 + 152) = 0;
  *(a2 + 160) = 0;
  *(a2 + 144) = 0;
  v4 = a1[3];
  v5 = v3;
  if (v4)
  {
    v6 = a1[1];
    v7 = std::__shared_weak_count::lock(v4);
    if (v7)
    {
      v8 = v7;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v6 + 24));
        v49 = 0;
        memset(v48, 0, sizeof(v48));
        sub_100B27D98(v48);
        sub_100B27E08(v48, "imdn <urn:ietf:params:imdn>");
        sub_100A972E8(__p);
        if ((SBYTE7(v31) & 0x80u) == 0)
        {
          v9 = __p;
        }

        else
        {
          v9 = __p[0];
        }

        sub_100B27E1C(v48, "imdn.Message-ID", v9);
        if (SBYTE7(v31) < 0)
        {
          operator delete(__p[0]);
        }

        sub_100B27E08(v48, "mls <http://www.gsma.com/rcs/mls>");
        ctu::base64::encode();
        if ((SBYTE7(v31) & 0x80u) == 0)
        {
          v10 = __p;
        }

        else
        {
          v10 = __p[0];
        }

        sub_100B27E1C(v48, "mls.Epoch-Authenticator", v10);
        if (SBYTE7(v31) < 0)
        {
          operator delete(__p[0]);
        }

        std::to_string(__p, __val[0]);
        if ((SBYTE7(v31) & 0x80u) == 0)
        {
          v11 = __p;
        }

        else
        {
          v11 = __p[0];
        }

        sub_100B27E1C(v48, "mls.Era-Id", v11);
        if (SBYTE7(v31) < 0)
        {
          operator delete(__p[0]);
        }

        v47 = 0;
        v45 = 0u;
        v46 = 0u;
        v43 = 0u;
        v44 = 0u;
        v41 = 0u;
        v42 = 0u;
        v39 = 0u;
        v40 = 0u;
        v37 = 0u;
        v38 = 0u;
        v35 = 0u;
        v36 = 0u;
        v33 = 0u;
        v34 = 0u;
        v31 = 0u;
        v32 = 0u;
        *__p = 0u;
        sub_100BE2724(__p, "message/mls-rcs-client");
        v27 = 0;
        v28 = 0;
        v29 = 0;
        sub_100BE2728(__p, &v21, &v25);
        sub_100B27EC8(v48, &v25, &v27);
        if (v25)
        {
          v26 = v25;
          operator delete(v25);
        }

        v23 = xpc_data_create(v27, v28 - v27);
        if (!v23)
        {
          v23 = xpc_null_create();
        }

        v25 = a1 + 44;
        v26 = ims::lazuli::kMlsBinaryBlob;
        sub_10000F688(&v25, &v23, &object);
        xpc_release(object);
        object = 0;
        xpc_release(v23);
        v23 = 0;
        v12 = a1[44];
        v25 = v12;
        if (v12)
        {
          xpc_retain(v12);
        }

        else
        {
          v12 = xpc_null_create();
          v25 = v12;
        }

        sub_100694B78((a1 + 4), &v25);
        xpc_release(v12);
        sub_101779B0C(&v27);
      }

      sub_100004A34(v8);
      v5 = v21;
    }
  }

  if (v5)
  {
    *(&v21 + 1) = v5;
    operator delete(v5);
  }

  if (v20 == 1 && v19[0])
  {
    operator delete(v19[0]);
  }

  if (v18[0])
  {
    operator delete(v18[0]);
  }

  if (v17[0])
  {
    operator delete(v17[0]);
  }

  if (v16[0])
  {
    operator delete(v16[0]);
  }

  if (SHIBYTE(v14) < 0)
  {
    operator delete(v13[0]);
  }
}

void sub_1006BC424(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, void *__p, uint64_t a37, uint64_t a38, void *a39)
{
  xpc_release(v40);
  if (__p)
  {
    a37 = __p;
    operator delete(__p);
  }

  sub_10068C9D8(&a39);
  sub_10068C9D8(&STACK[0x210]);
  sub_100004A34(v39);
  sub_100582180(&a9);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BC4DC(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BC528(uint64_t a1)
{
  *a1 = off_101E71450;
  if (*(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006BC594(uint64_t a1)
{
  *a1 = off_101E71450;
  if (*(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006BC6EC(_Unwind_Exception *a1)
{
  if (*(v1 + 55) < 0)
  {
    operator delete(*(v1 + 32));
  }

  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

char *sub_1006BC724(char *result, uint64_t a2)
{
  v3 = result;
  *a2 = off_101E71450;
  *(a2 + 8) = *(result + 8);
  v4 = *(result + 3);
  *(a2 + 24) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (result[55] < 0)
  {
    result = sub_100005F2C((a2 + 32), *(result + 4), *(result + 5));
  }

  else
  {
    v5 = *(result + 2);
    *(a2 + 48) = *(result + 6);
    *(a2 + 32) = v5;
  }

  if (v3[79] < 0)
  {
    return sub_100005F2C((a2 + 56), *(v3 + 7), *(v3 + 8));
  }

  v6 = *(v3 + 56);
  *(a2 + 72) = *(v3 + 9);
  *(a2 + 56) = v6;
  return result;
}

void sub_1006BC7D4(_Unwind_Exception *exception_object)
{
  if (*(v1 + 55) < 0)
  {
    operator delete(*(v1 + 32));
  }

  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006BC804(uint64_t a1)
{
  if (*(a1 + 79) < 0)
  {
    operator delete(*(a1 + 56));
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {

    std::__shared_weak_count::__release_weak(v2);
  }
}

void sub_1006BC868(void **__p)
{
  if (*(__p + 79) < 0)
  {
    operator delete(__p[7]);
  }

  if (*(__p + 55) < 0)
  {
    operator delete(__p[4]);
  }

  v2 = __p[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(__p);
}

uint64_t sub_1006BC8D0(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BC91C(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

uint64_t sub_1006BC99C(uint64_t a1)
{
  *a1 = off_101E714E0;
  if (*(a1 + 360) == 1)
  {
    v2 = *(a1 + 336);
    if (v2)
    {
      *(a1 + 344) = v2;
      operator delete(v2);
    }
  }

  if (*(a1 + 335) < 0)
  {
    operator delete(*(a1 + 312));
  }

  sub_1006A6E54(a1 + 32);
  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006BCA1C(uint64_t a1)
{
  *a1 = off_101E714E0;
  if (*(a1 + 360) == 1)
  {
    v2 = *(a1 + 336);
    if (v2)
    {
      *(a1 + 344) = v2;
      operator delete(v2);
    }
  }

  if (*(a1 + 335) < 0)
  {
    operator delete(*(a1 + 312));
  }

  sub_1006A6E54(a1 + 32);
  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006BCB88(_Unwind_Exception *a1)
{
  sub_1006A6E54((v1 + 4));
  v3 = v1[3];
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(v1);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BCBD0(uint64_t a1, uint64_t a2)
{
  *a2 = off_101E714E0;
  *(a2 + 8) = *(a1 + 8);
  v4 = *(a1 + 24);
  *(a2 + 24) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  sub_1006A7D20((a2 + 32), (a1 + 32));
  if (*(a1 + 335) < 0)
  {
    sub_100005F2C((a2 + 312), *(a1 + 312), *(a1 + 320));
  }

  else
  {
    v5 = *(a1 + 312);
    *(a2 + 328) = *(a1 + 328);
    *(a2 + 312) = v5;
  }

  return sub_1006A7B80(a2 + 336, a1 + 336);
}

void sub_1006BCC80(_Unwind_Exception *a1)
{
  sub_1006A6E54(v1 + 32);
  v3 = *(v1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(a1);
}

void sub_1006BCCC0(uint64_t a1)
{
  if (*(a1 + 360) == 1)
  {
    v2 = *(a1 + 336);
    if (v2)
    {
      *(a1 + 344) = v2;
      operator delete(v2);
    }
  }

  if (*(a1 + 335) < 0)
  {
    operator delete(*(a1 + 312));
  }

  sub_1006A6E54(a1 + 32);
  v3 = *(a1 + 24);
  if (v3)
  {

    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006BCD38(uint64_t a1)
{
  if (*(a1 + 360) == 1)
  {
    v2 = *(a1 + 336);
    if (v2)
    {
      *(a1 + 344) = v2;
      operator delete(v2);
    }
  }

  if (*(a1 + 335) < 0)
  {
    operator delete(*(a1 + 312));
  }

  sub_1006A6E54(a1 + 32);
  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

void sub_1006BCDAC(uint64_t a1, uint64_t a2)
{
  *v38 = *a2;
  v39 = *(a2 + 16);
  *(a2 + 8) = 0;
  *(a2 + 16) = 0;
  *a2 = 0;
  *__val = *(a2 + 24);
  *v41 = *(a2 + 40);
  v42 = *(a2 + 56);
  *(a2 + 40) = 0;
  *(a2 + 48) = 0;
  *v43 = *(a2 + 64);
  v44 = *(a2 + 80);
  *(a2 + 72) = 0;
  *(a2 + 80) = 0;
  *(a2 + 56) = 0;
  *(a2 + 64) = 0;
  *v45 = *(a2 + 88);
  v46 = *(a2 + 104);
  *(a2 + 88) = 0;
  *(a2 + 96) = 0;
  *(a2 + 104) = 0;
  LOBYTE(v47[0]) = 0;
  v49 = 0;
  if (*(a2 + 136) == 1)
  {
    *v47 = *(a2 + 112);
    v48 = *(a2 + 128);
    *(a2 + 120) = 0;
    *(a2 + 128) = 0;
    *(a2 + 112) = 0;
    v49 = 1;
  }

  v50 = *(a2 + 144);
  v3 = v50;
  v51 = *(a2 + 160);
  *(a2 + 152) = 0;
  *(a2 + 160) = 0;
  *(a2 + 144) = 0;
  v4 = *(a1 + 24);
  v5 = v3;
  if (v4)
  {
    v6 = *(a1 + 8);
    v7 = std::__shared_weak_count::lock(v4);
    if (v7)
    {
      v8 = v7;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v6 + 24));
        v94 = 0uLL;
        v95 = 0;
        if (*(*(a1 + 152) + 128) == 4)
        {
          v93 = 0;
          v91 = 0u;
          v92 = 0u;
          v89 = 0u;
          v90 = 0u;
          *v87 = 0u;
          v88 = 0u;
          *v85 = 0u;
          v86 = 0u;
          *v83 = 0u;
          v84 = 0u;
          *v81 = 0u;
          v82 = 0u;
          v79 = 0u;
          *v80 = 0u;
          v77 = 0u;
          *v78 = 0u;
          *__dst = 0u;
          sub_100B27D98(__dst);
          sub_100B27E08(__dst, "mls <http://www.gsma.com/rcs/mls>");
          ctu::base64::encode();
          if ((SBYTE7(v53) & 0x80u) == 0)
          {
            v9 = __p;
          }

          else
          {
            v9 = __p[0];
          }

          sub_100B27E1C(__dst, "mls.Epoch-Authenticator", v9);
          if (SBYTE7(v53) < 0)
          {
            operator delete(__p[0]);
          }

          std::to_string(__p, __val[0]);
          if ((SBYTE7(v53) & 0x80u) == 0)
          {
            v10 = __p;
          }

          else
          {
            v10 = __p[0];
          }

          sub_100B27E1C(__dst, "mls.Era-Id", v10);
          if (SBYTE7(v53) < 0)
          {
            operator delete(__p[0]);
          }

          if (*(a1 + 360) == 1)
          {
            LazuliMLSMessageId::toString((a1 + 336), __p);
            v11 = (SBYTE7(v53) & 0x80u) == 0 ? __p : __p[0];
            sub_100B27E1C(__dst, "mls.Original-Message-ID", v11);
            if (SBYTE7(v53) < 0)
            {
              operator delete(__p[0]);
            }
          }

          sub_100B27EC4(__dst, &v70);
          v12 = *(a1 + 191);
          if (v12 >= 0)
          {
            v13 = (a1 + 168);
          }

          else
          {
            v13 = *(a1 + 168);
          }

          if (v12 >= 0)
          {
            v14 = *(a1 + 191);
          }

          else
          {
            v14 = *(a1 + 176);
          }

          v15 = std::string::append(&v70, v13, v14);
          v16 = *&v15->__r_.__value_.__l.__data_;
          v71.__r_.__value_.__r.__words[2] = v15->__r_.__value_.__r.__words[2];
          *&v71.__r_.__value_.__l.__data_ = v16;
          v15->__r_.__value_.__l.__size_ = 0;
          v15->__r_.__value_.__r.__words[2] = 0;
          v15->__r_.__value_.__r.__words[0] = 0;
          v17 = std::string::append(&v71, "<mls-file>", 0xAuLL);
          v18 = *&v17->__r_.__value_.__l.__data_;
          v72.__r_.__value_.__r.__words[2] = v17->__r_.__value_.__r.__words[2];
          *&v72.__r_.__value_.__l.__data_ = v18;
          v17->__r_.__value_.__l.__size_ = 0;
          v17->__r_.__value_.__r.__words[2] = 0;
          v17->__r_.__value_.__r.__words[0] = 0;
          ctu::base64::encode();
          if ((v69 & 0x80u) == 0)
          {
            v19 = v68;
          }

          else
          {
            v19 = v68[0];
          }

          if ((v69 & 0x80u) == 0)
          {
            v20 = v69;
          }

          else
          {
            v20 = v68[1];
          }

          v21 = std::string::append(&v72, v19, v20);
          v22 = *&v21->__r_.__value_.__l.__data_;
          v73.__r_.__value_.__r.__words[2] = v21->__r_.__value_.__r.__words[2];
          *&v73.__r_.__value_.__l.__data_ = v22;
          v21->__r_.__value_.__l.__size_ = 0;
          v21->__r_.__value_.__r.__words[2] = 0;
          v21->__r_.__value_.__r.__words[0] = 0;
          v23 = std::string::append(&v73, "</mls-file></file>", 0x12uLL);
          v24 = *&v23->__r_.__value_.__l.__data_;
          v75 = v23->__r_.__value_.__r.__words[2];
          *v74 = v24;
          v23->__r_.__value_.__l.__size_ = 0;
          v23->__r_.__value_.__r.__words[2] = 0;
          v23->__r_.__value_.__r.__words[0] = 0;
          if (v75 >= 0)
          {
            v25 = v74;
          }

          else
          {
            v25 = v74[0];
          }

          if (v75 >= 0)
          {
            v26 = HIBYTE(v75);
          }

          else
          {
            v26 = v74[1];
          }

          __p[1] = 0;
          *&v53 = 0;
          __p[0] = 0;
          sub_1001E0D88(__p, v25, v25 + v26, v26);
          v94 = *__p;
          v95 = v53;
          __p[1] = 0;
          *&v53 = 0;
          __p[0] = 0;
          if (SHIBYTE(v75) < 0)
          {
            operator delete(v74[0]);
          }

          if (SHIBYTE(v73.__r_.__value_.__r.__words[2]) < 0)
          {
            operator delete(v73.__r_.__value_.__l.__data_);
          }

          if (v69 < 0)
          {
            operator delete(v68[0]);
          }

          if (SHIBYTE(v72.__r_.__value_.__r.__words[2]) < 0)
          {
            operator delete(v72.__r_.__value_.__l.__data_);
          }

          if (SHIBYTE(v71.__r_.__value_.__r.__words[2]) < 0)
          {
            operator delete(v71.__r_.__value_.__l.__data_);
          }

          if (SHIBYTE(v70.__r_.__value_.__r.__words[2]) < 0)
          {
            operator delete(v70.__r_.__value_.__l.__data_);
          }

          *&v77 = v27;
          if (SHIBYTE(v82) < 0)
          {
            operator delete(v81[1]);
          }

          std::locale::~locale(v78);
          std::iostream::~basic_iostream();
        }

        else
        {
          v93 = 0;
          v91 = 0u;
          v92 = 0u;
          v89 = 0u;
          v90 = 0u;
          *v87 = 0u;
          v88 = 0u;
          *v85 = 0u;
          v86 = 0u;
          *v83 = 0u;
          v84 = 0u;
          *v81 = 0u;
          v82 = 0u;
          v79 = 0u;
          *v80 = 0u;
          v28 = *(a1 + 168);
          v77 = 0u;
          *v78 = 0u;
          if (*(a1 + 191) >= 0)
          {
            v29 = a1 + 168;
          }

          else
          {
            v29 = v28;
          }

          *__dst = 0uLL;
          sub_100B27E04(__dst, v29);
          sub_100B27E08(__dst, "mls <http://www.gsma.com/rcs/mls>");
          ctu::base64::encode();
          if ((SBYTE7(v53) & 0x80u) == 0)
          {
            v30 = __p;
          }

          else
          {
            v30 = __p[0];
          }

          sub_100B27E1C(__dst, "mls.Epoch-Authenticator", v30);
          if (SBYTE7(v53) < 0)
          {
            operator delete(__p[0]);
          }

          std::to_string(__p, __val[0]);
          if ((SBYTE7(v53) & 0x80u) == 0)
          {
            v31 = __p;
          }

          else
          {
            v31 = __p[0];
          }

          sub_100B27E1C(__dst, "mls.Era-Id", v31);
          if (SBYTE7(v53) < 0)
          {
            operator delete(__p[0]);
          }

          if (*(a1 + 360) == 1)
          {
            LazuliMLSMessageId::toString((a1 + 336), __p);
            v32 = (SBYTE7(v53) & 0x80u) == 0 ? __p : __p[0];
            sub_100B27E1C(__dst, "mls.Original-Message-ID", v32);
            if (SBYTE7(v53) < 0)
            {
              operator delete(__p[0]);
            }
          }

          v67 = 0;
          v65 = 0u;
          v66 = 0u;
          v63 = 0u;
          v64 = 0u;
          v61 = 0u;
          v62 = 0u;
          v59 = 0u;
          v60 = 0u;
          v57 = 0u;
          v58 = 0u;
          *v55 = 0u;
          v56 = 0u;
          v53 = 0u;
          memset(v54, 0, sizeof(v54));
          *__p = 0u;
          sub_100BE2724(__p, "message/mls");
          sub_100BE2728(__p, &v50, &v73);
          sub_100B27EC8(__dst, &v73.__r_.__value_.__l.__data_, v74);
          v94 = *v74;
          v95 = v75;
          v75 = 0;
          v74[0] = 0;
          v74[1] = 0;
          if (v73.__r_.__value_.__r.__words[0])
          {
            v73.__r_.__value_.__l.__size_ = v73.__r_.__value_.__r.__words[0];
            operator delete(v73.__r_.__value_.__l.__data_);
          }

          v36 = v34;
          *&v53 = v34;
          if (SHIBYTE(v56) < 0)
          {
            operator delete(v55[1]);
          }

          std::locale::~locale(v54);
          std::iostream::~basic_iostream();
          std::ios::~ios();
          __dst[0] = v33;
          *(__dst + *(v33 - 3)) = v35;
          *&v77 = v36;
          if (SHIBYTE(v82) < 0)
          {
            operator delete(v81[1]);
          }

          std::locale::~locale(v78);
          std::iostream::~basic_iostream();
        }

        std::ios::~ios();
        v74[1] = 0;
        v74[0] = 0;
        sub_100679DF8(v6, a1 + 312, v74);
        v37 = v74[0];
        __p[1] = 0;
        *&v53 = 0;
        __p[0] = 0;
        sub_100581E40(__dst, v38);
        LOBYTE(v85[0]) = 0;
        BYTE8(v86) = 0;
        LOBYTE(v87[0]) = 0;
        BYTE8(v88) = 0;
        sub_1009CE42C(v37, __p, __dst);
        if (BYTE8(v88) == 1 && SBYTE7(v88) < 0)
        {
          operator delete(v87[0]);
        }

        if (BYTE8(v86) == 1 && v85[0])
        {
          v85[1] = v85[0];
          operator delete(v85[0]);
        }

        if (BYTE8(v84) == 1 && v83[0])
        {
          v83[1] = v83[0];
          operator delete(v83[0]);
        }

        if (v81[1])
        {
          *&v82 = v81[1];
          operator delete(v81[1]);
        }

        if (v80[0])
        {
          v80[1] = v80[0];
          operator delete(v80[0]);
        }

        if (v78[1])
        {
          *&v79 = v78[1];
          operator delete(v78[1]);
        }

        if (SBYTE7(v77) < 0)
        {
          operator delete(__dst[0]);
        }

        if (SBYTE7(v53) < 0)
        {
          operator delete(__p[0]);
        }

        sub_100B97900(*(v6 + 240), v74[0] + 19, a1 + 32, &v94, v38);
        sub_10177A000(v74);
      }

      sub_100004A34(v8);
      v5 = v50;
    }
  }

  if (v5)
  {
    *(&v50 + 1) = v5;
    operator delete(v5);
  }

  if (v49 == 1 && v47[0])
  {
    v47[1] = v47[0];
    operator delete(v47[0]);
  }

  if (v45[0])
  {
    v45[1] = v45[0];
    operator delete(v45[0]);
  }

  if (v43[0])
  {
    v43[1] = v43[0];
    operator delete(v43[0]);
  }

  if (v41[0])
  {
    v41[1] = v41[0];
    operator delete(v41[0]);
  }

  if (SHIBYTE(v39) < 0)
  {
    operator delete(v38[0]);
  }
}

void sub_1006BD818(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, void *__p, uint64_t a32, int a33, __int16 a34, char a35, char a36)
{
  if (a36 < 0)
  {
    operator delete(__p);
  }

  sub_10068C9D8(&STACK[0x280]);
  sub_100004A34(v36);
  sub_100582180(&a9);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BD9A4(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BD9F0(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

uint64_t sub_1006BDA70(uint64_t a1)
{
  *a1 = off_101E71570;
  if (*(a1 + 151) < 0)
  {
    operator delete(*(a1 + 128));
  }

  if (*(a1 + 120) == 1 && *(a1 + 103) < 0)
  {
    operator delete(*(a1 + 80));
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

void sub_1006BDAF8(uint64_t a1)
{
  *a1 = off_101E71570;
  if (*(a1 + 151) < 0)
  {
    operator delete(*(a1 + 128));
  }

  if (*(a1 + 120) == 1 && *(a1 + 103) < 0)
  {
    operator delete(*(a1 + 80));
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete();
}

void sub_1006BDC44(uint64_t a1)
{
  if (*(a1 + 151) < 0)
  {
    operator delete(*(a1 + 128));
  }

  if (*(a1 + 120) == 1 && *(a1 + 103) < 0)
  {
    operator delete(*(a1 + 80));
  }

  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v2 = *(a1 + 24);
  if (v2)
  {

    std::__shared_weak_count::__release_weak(v2);
  }
}

void sub_1006BDCC4(void **__p)
{
  if (*(__p + 151) < 0)
  {
    operator delete(__p[16]);
  }

  if (*(__p + 120) == 1 && *(__p + 103) < 0)
  {
    operator delete(__p[10]);
  }

  if (*(__p + 55) < 0)
  {
    operator delete(__p[4]);
  }

  v2 = __p[3];
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  operator delete(__p);
}

void sub_1006BDD40(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2)
  {
    v3 = *(a1 + 8);
    v4 = std::__shared_weak_count::lock(v2);
    if (v4)
    {
      v5 = v4;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v3 + 24));
        v6 = *(v3 + 240);
        v9 = 5;
        v10 = 1;
        sub_100BA290C(v6, (a1 + 32), &v9);
        v7 = *(v3 + 240);
        LOBYTE(v9) = 0;
        v10 = 0;
        sub_100BA24AC(v7, (a1 + 128), &v9);
        v8 = *(v3 + 432);
        if (v8)
        {
          if (*(a1 + 151) < 0)
          {
            sub_100005F2C(&__dst, *(a1 + 128), *(a1 + 136));
          }

          else
          {
            __dst = *(a1 + 128);
            v13 = *(a1 + 144);
          }

          v11 = 5;
          (*(*v8 + 24))(v8, &__dst, &v9);
          sub_101779600(&v9, &__dst);
        }
      }

      sub_100004A34(v5);
    }
  }
}

void sub_1006BDE50(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18)
{
  sub_1006A6204(&a9);
  if (a18 < 0)
  {
    operator delete(__p);
  }

  sub_100004A34(v18);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BDE8C(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BDED8(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  v6 = *(a2 + 48);
  *(a1 + 64) = *(a2 + 64);
  *(a1 + 48) = v6;
  sub_1006A7ED8((a1 + 72), (a2 + 72));
  if (*(a2 + 143) < 0)
  {
    sub_100005F2C((a1 + 120), *(a2 + 120), *(a2 + 128));
  }

  else
  {
    v7 = *(a2 + 120);
    *(a1 + 136) = *(a2 + 136);
    *(a1 + 120) = v7;
  }

  return a1;
}

void sub_1006BDF8C(_Unwind_Exception *a1)
{
  sub_10067A5EC(v1 + 24);
  v3 = *(v1 + 16);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(a1);
}

void *sub_1006BDFCC(void *a1)
{
  *a1 = off_101E715F0;
  sub_1006964A4((a1 + 1));
  return a1;
}

void sub_1006BE010(void *a1)
{
  *a1 = off_101E715F0;
  sub_1006964A4((a1 + 1));

  operator delete();
}

void sub_1006BE120(void *a1)
{
  sub_1006964A4(a1 + 8);

  operator delete(a1);
}

void sub_1006BE15C(void *a1, unsigned __int8 *a2)
{
  v3 = a1[3];
  if (v3)
  {
    v4 = *a2;
    v5 = a1[1];
    v6 = std::__shared_weak_count::lock(v3);
    if (v6)
    {
      v7 = v6;
      if (a1[2])
      {
        dispatch_assert_queue_V2(*(v5 + 24));
        if (v4)
        {
          sub_1006950E0(v5, (a1 + 7), (a1 + 10));
        }

        else
        {
          v8 = *(v5 + 400);
          if (v8)
          {
            v9 = std::__shared_weak_count::lock(v8);
            if (v9 && *(v5 + 392))
            {
              v13 = 0;
              v11 = 0u;
              v12 = 0u;
              sub_1006827C4((a1 + 4));
            }
          }

          else
          {
            v9 = 0;
          }

          v10 = (*(**(v5 + 48) + 16))(*(v5 + 48), *(v5 + 96));
          if (os_log_type_enabled(*v10, OS_LOG_TYPE_ERROR))
          {
            sub_101777D94();
          }

          LOBYTE(__p) = 0;
          LOBYTE(__src) = 0;
          sub_1006BEBC8(a1 + 45, &__p);
          if (v9)
          {
            sub_100004A34(v9);
          }
        }
      }

      sub_100004A34(v7);
    }
  }
}

void sub_1006BE8A0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, std::__shared_weak_count *a11, char a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, char a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, void *__p, uint64_t a44, int a45, __int16 a46, char a47, char a48, uint64_t a49, void *a50, uint64_t a51, uint64_t a52, uint64_t a53, uint64_t a54, uint64_t a55, uint64_t a56, uint64_t a57, uint64_t a58, uint64_t a59, uint64_t a60, void *a61, uint64_t a62, int a63)
{
  sub_100695CEC(v76);
  operator delete(v75);
  sub_1006BED24(&a12);
  sub_1006B7F1C(v77 - 136);
  sub_1006BEDA0(&a73);
  sub_10069057C(&a33);
  if (a48 < 0)
  {
    operator delete(__p);
  }

  sub_100004A34(a11);
  sub_10069057C(&a50);
  if (a66 < 0)
  {
    operator delete(a61);
  }

  if (a72 < 0)
  {
    operator delete(a67);
  }

  sub_100004A34(v74);
  sub_100004A34(v73);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BEA74(uint64_t a1, uint64_t a2)
{
  {
    return a1 + 8;
  }

  else
  {
    return 0;
  }
}

uint64_t sub_1006BEAC0(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  v4 = *(a2 + 16);
  *(a1 + 16) = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 16), 1uLL, memory_order_relaxed);
  }

  if (*(a2 + 47) < 0)
  {
    sub_100005F2C((a1 + 24), *(a2 + 24), *(a2 + 32));
  }

  else
  {
    v5 = *(a2 + 24);
    *(a1 + 40) = *(a2 + 40);
    *(a1 + 24) = v5;
  }

  if (*(a2 + 71) < 0)
  {
    sub_100005F2C((a1 + 48), *(a2 + 48), *(a2 + 56));
  }

  else
  {
    v6 = *(a2 + 48);
    *(a1 + 64) = *(a2 + 64);
    *(a1 + 48) = v6;
  }

  sub_1006A7D20((a1 + 72), (a2 + 72));
  sub_1006963B0(a1 + 352, a2 + 352);
  return a1;
}

void sub_1006BEB70(_Unwind_Exception *exception_object)
{
  if (*(v1 + 47) < 0)
  {
    operator delete(*(v1 + 24));
  }

  v3 = *(v1 + 16);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_1006BEBC8(uint64_t *a1, __int128 *a2)
{
  v3 = a1[2];
  if (v3)
  {
    v5 = *a1;
    v6 = std::__shared_weak_count::lock(v3);
    if (v6)
    {
      v7 = v6;
      if (a1[1])
      {
        dispatch_assert_queue_V2(*(v5 + 3));
        v8 = *(v5 + 30);
        v14 = 5;
        v15 = 1;
        sub_100BA290C(v8, a1 + 3, &v14);
        v9 = *(v5 + 30);
        LOBYTE(v14) = 0;
        v15 = 0;
        sub_100BA24AC(v9, a1 + 15, &v14);
        v10 = *(v5 + 54);
        if (v10)
        {
          if (*(a2 + 24) == 1)
          {
            if (*(a2 + 23) < 0)
            {
              sub_100005F2C(&__dst, *a2, *(a2 + 1));
            }

            else
            {
              __dst = *a2;
              v13 = *(a2 + 2);
            }

            v11[6] = 5;
            (*(*v10 + 24))(v10, &__dst, v11);
            sub_101779600(v11, &__dst);
          }
        }
      }

      sub_100004A34(v7);
    }
  }
}

void sub_1006BECE8(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18)
{
  sub_1006A6204(&a9);
  if (a18 < 0)
  {
    operator delete(__p);
  }

  sub_100004A34(v18);
  _Unwind_Resume(a1);
}

uint64_t sub_1006BED24(uint64_t a1)
{
  if (*(a1 + 167) < 0)
  {
    operator delete(*(a1 + 144));
  }

  if (*(a1 + 143) < 0)
  {
    operator delete(*(a1 + 120));
  }

  if (*(a1 + 112) == 1 && *(a1 + 95) < 0)
  {
    operator delete(*(a1 + 72));
  }

  if (*(a1 + 47) < 0)
  {
    operator delete(*(a1 + 24));
  }

  v2 = *(a1 + 16);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }

  return a1;
}

uint64_t sub_1006BEDA0(uint64_t a1)
{
  v2 = *(a1 + 360);
  if (v2)
  {
    sub_100004A34(v2);
  }

  if (*(a1 + 351) < 0)
  {
    operator delete(*(a1 + 328));
  }

  sub_1006A6E54(a1 + 48);
  if (*(a1 + 47) < 0)
  {
    operator delete(*(a1 + 24));
  }

  v3 = *(a1 + 16);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

uint64_t sub_1006BEE04(uint64_t a1)
{
  *a1 = off_101E71660;
  v2 = *(a1 + 368);
  if (v2)
  {
    sub_100004A34(v2);
  }

  if (*(a1 + 359) < 0)
  {
    operator delete(*(a1 + 336));
  }

  sub_1006A6E54(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void sub_1006BEE84(uint64_t a1)
{
  *a1 = off_101E71660;
  v2 = *(a1 + 368);
  if (v2)
  {
    sub_100004A34(v2);
  }

  if (*(a1 + 359) < 0)
  {
    operator delete(*(a1 + 336));
  }

  sub_1006A6E54(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete();
}

void sub_1006BEFC8(uint64_t a1)
{
  v2 = *(a1 + 368);
  if (v2)
  {
    sub_100004A34(v2);
  }

  if (*(a1 + 359) < 0)
  {
    operator delete(*(a1 + 336));
  }

  sub_1006A6E54(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {

    std::__shared_weak_count::__release_weak(v3);
  }
}

void sub_1006BF040(uint64_t a1)
{
  v2 = *(a1 + 368);
  if (v2)
  {
    sub_100004A34(v2);
  }

  if (*(a1 + 359) < 0)
  {
    operator delete(*(a1 + 336));
  }

  sub_1006A6E54(a1 + 56);
  if (*(a1 + 55) < 0)
  {
    operator delete(*(a1 + 32));
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  operator delete(a1);
}

uint64_t sub_1006BF0B4(uint64_t a1, uint64_t a2)
{
  sub_1006B0570(v30, a2);
  v3 = *(a1 + 24);
  if (v3)
  {
    v4 = *(a1 + 8);
    v5 = std::__shared_weak_count::lock(v3);
    if (v5)
    {
      v6 = v5;
      if (*(a1 + 16))
      {
        dispatch_assert_queue_V2(*(v4 + 24));
        sub_1005833A8(v64, v30);
        if (v69)
        {
          v7 = 0;
          LOBYTE(v70) = 0;
        }

        else
        {
          sub_100581E40(&v70, v64);
          memset(v72, 0, sizeof(v72));
          sub_100034C50(v72, v65, v66, v66 - v65);
          memset(v73, 0, sizeof(v73));
          sub_100581F6C(v73, v67, v68, (v68 - v67) >> 5);
          v7 = 1;
        }

        v74[0] = v7;
        sub_100583454(v64);
        if (v74[0] == 1)
        {
          v63 = 0;
          v61 = 0u;
          v62 = 0u;
          v59 = 0u;
          v60 = 0u;
          v58 = 0u;
          memset(v57, 0, sizeof(v57));
          memset(v56, 0, sizeof(v56));
          sub_100B27D98(v56);
          sub_100B27E08(v56, "imdn <urn:ietf:params:imdn>");
          sub_100A972E8(__p);
          if ((SBYTE7(v39) & 0x80u) == 0)
          {
            v8 = __p;
          }

          else
          {
            v8 = __p[0];
          }

          sub_100B27E1C(v56, "imdn.Message-ID", v8);
          if (SBYTE7(v39) < 0)
          {
            operator delete(__p[0]);
          }

          sub_100B27E08(v56, "mls <http://www.gsma.com/rcs/mls>");
          ctu::base64::encode();
          if ((SBYTE7(v39) & 0x80u) == 0)
          {
            v9 = __p;
          }

          else
          {
            v9 = __p[0];
          }

          sub_100B27E1C(v56, "mls.Epoch-Authenticator", v9);
          if (SBYTE7(v39) < 0)
          {
            operator delete(__p[0]);
          }

          std::to_string(__p, __val);
          if ((SBYTE7(v39) & 0x80u) == 0)
          {
            v10 = __p;
          }

          else
          {
            v10 = __p[0];
          }

          sub_100B27E1C(v56, "mls.Era-Id", v10);
          if (SBYTE7(v39) < 0)
          {
            operator delete(__p[0]);
          }

          v55 = 0;
          v53 = 0u;
          v54 = 0u;
          v51 = 0u;
          v52 = 0u;
          v49 = 0u;
          v50 = 0u;
          v47 = 0u;
          v48 = 0u;
          v45 = 0u;
          v46 = 0u;
          v43 = 0u;
          v44 = 0u;
          v41 = 0u;
          v42 = 0u;
          v39 = 0u;
          v40 = 0u;
          *__p = 0u;
          sub_100BE2724(__p, "message/mls-rcs-client");
          v92[0] = 0;
          v92[1] = 0;
          sub_100679DF8(v4, a1 + 32, v92);
          v11 = v92[0];
          v31[1] = 0;
          v32 = 0;
          v31[0] = 0;
          sub_100581E40(buf, &v70);
          sub_100BE2728(__p, v72, __dst);
          sub_100B27EC8(v56, __dst, v36);
          *v86 = *v36;
          v87 = v37;
          v36[1] = 0;
          v37 = 0;
          v36[0] = 0;
          v88 = 1;
          if (*(a1 + 359) < 0)
          {
            sub_100005F2C(&v89, *(a1 + 336), *(a1 + 344));
          }

          else
          {
            v89 = *(a1 + 336);
            v90 = *(a1 + 352);
          }

          v91 = 1;
          sub_1009CE42C(v11, v31, buf);
          if (v91 == 1 && SHIBYTE(v90) < 0)
          {
            operator delete(v89);
          }

          if (v88 == 1 && v86[0])
          {
            v86[1] = v86[0];
            operator delete(v86[0]);
          }

          if (v85 == 1 && v83)
          {
            v84 = v83;
            operator delete(v83);
          }

          if (v81)
          {
            v82 = v81;
            operator delete(v81);
          }

          if (v79)
          {
            v80 = v79;
            operator delete(v79);
          }

          if (v77)
          {
            v78 = v77;
            operator delete(v77);
          }

          if (v76 < 0)
          {
            operator delete(*buf);
          }

          if (v36[0])
          {
            v36[1] = v36[0];
            operator delete(v36[0]);
          }

          if (__dst[0])
          {
            __dst[1] = __dst[0];
            operator delete(__dst[0]);
          }

          if (SHIBYTE(v32) < 0)
          {
            operator delete(v31[0]);
          }

          v18 = *(a1 + 360);
          v19 = *v18;
          v20 = *(v4 + 40);
          v21 = os_log_type_enabled(v20, OS_LOG_TYPE_DEFAULT);
          if (v19 == 1)
          {
            if (v21)
            {
              *buf = 134217984;
              *&buf[4] = v18;
              _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_DEFAULT, "#I Token: %p was already used, bailing...", buf, 0xCu);
            }
          }

          else
          {
            if (v21)
            {
              *buf = 134217984;
              *&buf[4] = v18;
              _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_DEFAULT, "#I Marking token: %p as used, and calling applicationEncryptAndSendHelper", buf, 0xCu);
              v18 = *(a1 + 360);
            }

            *v18 = 1;
            sub_1006950E0(v4, a1 + 32, a1 + 56);
          }

          sub_10177A038(v92, v56, __p);
        }

        else
        {
          sub_1005833A8(v56, v30);
          if (DWORD2(v58) == 11)
          {
            sub_100581E40(buf, v56);
            sub_100582264(v86, v57);
            v12 = 1;
          }

          else
          {
            v12 = 0;
            buf[0] = 0;
          }

          BYTE8(v89) = v12;
          sub_100583454(v56);
          if (BYTE8(v89) == 1)
          {
            sub_100582264(__p, v86);
            v13 = v40;
            sub_100582310(__p);
            if (v13)
            {
              v14 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v14, OS_LOG_TYPE_ERROR))
              {
                asString(v86);
                sub_101779CE8();
              }
            }

            v15 = *(v4 + 432);
            if (v15)
            {
              if (*(a1 + 359) < 0)
              {
                sub_100005F2C(__dst, *(a1 + 336), *(a1 + 344));
              }

              else
              {
                *__dst = *(a1 + 336);
                v35 = *(a1 + 352);
              }

              v33 = 5;
              (*(*v15 + 24))(v15, __dst, v31);
              sub_101779600(v31, __dst);
            }
          }

          else
          {
            sub_1005833A8(__p, v30);
            v16 = DWORD2(v50);
            sub_100583454(__p);
            if (v16 == 10)
            {
              v17 = *(v4 + 432);
              if (v17)
              {
                if (*(a1 + 359) < 0)
                {
                  sub_100005F2C(v36, *(a1 + 336), *(a1 + 344));
                }

                else
                {
                  *v36 = *(a1 + 336);
                  v37 = *(a1 + 352);
                }

                v33 = 0;
                (*(*v17 + 24))(v17, v36, v31);
                sub_101779600(v31, v36);
              }
            }

            else
            {
              v28 = (*(**(v4 + 48) + 16))(*(v4 + 48), *(v4 + 96));
              if (os_log_type_enabled(*v28, OS_LOG_TYPE_ERROR))
              {
                sub_101779CB4();
              }
            }
          }

          sub_101779D3C(&v89 + 8, buf);
        }

        sub_101779DC0(v74, &v70, v22, v23, v24, v25, v26, v27);
      }

      sub_100004A34(v6);
    }
  }

  return sub_100583454(v30);
}