void sub_239D21CA4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21CB8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21CCC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21CE0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21CF4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D08(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D1C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D30(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D44(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D58(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D6C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D80(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

void sub_239D21D94(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  MPSAutoCache::~MPSAutoCache(va);
  _Unwind_Resume(a1);
}

uint64_t sub_239D22058(uint64_t a1, char *a2, const char *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v10 = *(a1 + *MEMORY[0x277CD7350]);
  v11 = *(a1 + *MEMORY[0x277CD7370]);
  v12 = *(a1 + 344);
  v75[0] = *(a1 + 328);
  v75[1] = v12;
  v13 = *(a1 + 272);
  v75[2] = *(a1 + 360);
  v14 = *(a1 + 376);
  v15 = *(a1 + 380);
  v16 = *(a4 + 168);
  v17 = objc_msgSend_kernelWidth(a1, a2, a3, a4, a5, a6, a7, a8);
  objc_msgSend_kernelHeight(a1, v18, v19, v20, v21, v22, v23, v24);
  v32 = objc_msgSend_dilationRateX(a1, v25, v26, v27, v28, v29, v30, v31);
  objc_msgSend_dilationRateY(a1, v33, v34, v35, v36, v37, v38, v39);
  memset(v89, 0, sizeof(v89));
  v87 = 0u;
  v88 = 0u;
  v76 = vdupq_n_s64(1uLL);
  v77 = 0;
  v40 = *(a4 + 16);
  v78 = *a4;
  v79 = v40;
  v80 = *(a4 + 32);
  v41 = *(a4 + 56);
  v81 = *(a4 + 48);
  v42 = *(a4 + 64);
  v43 = *(a4 + 96);
  v83 = *(a4 + 80);
  v84 = v43;
  v82 = v42;
  v44 = *(a4 + 104);
  v85 = *(a4 + 112);
  v86 = v41;
  LODWORD(v87) = *(a4 + 80);
  *(&v87 + 1) = v44;
  *&v42 = vmovn_s64(*(a4 + 120));
  LOWORD(v40) = v42;
  WORD1(v40) = WORD2(v42);
  DWORD1(v40) = ((*(a4 + 192) + 3) >> 2);
  *&v42 = vmovn_s64(*(a4 + 144));
  v45 = *(a4 + 88);
  WORD3(v43) = 1;
  LOWORD(v43) = v42;
  WORD1(v43) = WORD2(v42);
  WORD2(v43) = (v45 + 3) >> 2;
  *&v88 = v40;
  *(&v88 + 1) = v43;
  LOWORD(v89[0]) = v45;
  WORD2(v89[0]) = 1;
  WORD5(v89[0]) = objc_msgSend_maxBatchSize(a1, v46, v47, v48, v49, v50, v51, v52);
  *(v89 + 12) = 0;
  DWORD2(v89[1]) = *(a4 + 16);
  v90 = *(a4 + 40);
  v92 = v16 - (v17 >> 1) * v32;
  v91 = v92;
  v93 = 0;
  v95 = v17;
  v94 = v17;
  v97 = v16;
  v96 = v16;
  v98 = objc_msgSend_strideInPixelsX(a1, v53, v54, v55, v56, v57, v58, v59);
  v99 = objc_msgSend_strideInPixelsY(a1, v60, v61, v62, v63, v64, v65, v66);
  v101 = v32;
  v100 = v32;
  v68 = *(a4 + 192);
  v67 = *(a4 + 200);
  v102 = v67;
  v69 = *(a4 + 24);
  v103 = v69;
  v70 = *(a4 + 152);
  v107 = *(a4 + 136);
  v108 = v70;
  v71 = *(a4 + 184);
  v104 = v71;
  v105 = 0;
  v106 = *(a4 + 120);
  v109 = *(a4 + 168);
  v110 = v71;
  v111 = v68;
  v112 = v67;
  return sub_239D2462C(a2, a3, v10, v11, v75, v13, v14, v69, v15, a1, &v76);
}

uint64_t sub_239D222C4(uint64_t a1, void *a2, const char *a3, __int128 *a4)
{
  v6 = *(a1 + *MEMORY[0x277CD7350]);
  v7 = *(a1 + *MEMORY[0x277CD7370]);
  v8 = *(a1 + 272);
  v9 = *(a1 + 344);
  v28[0] = *(a1 + 328);
  v28[1] = v9;
  v10 = *(a1 + 360);
  v11 = *(a1 + 376);
  v12 = *(a1 + 380);
  v42 = 0u;
  v43 = 0u;
  v40 = 0u;
  v41 = 0u;
  v13 = *a4;
  v28[2] = v10;
  v29 = v13;
  v14 = *(a4 + 3);
  v30 = *(a4 + 2);
  v16 = *v14;
  v15 = v14[1];
  v17 = *(v14 + 6);
  v33 = v14[2];
  v34 = v17;
  v31 = v16;
  v32 = v15;
  v18 = *(v14 + 56);
  v19 = *(v14 + 13);
  v20 = *(v14 + 88);
  v36 = *(v14 + 72);
  v37 = v20;
  v38 = v19;
  v35 = v18;
  v39 = *(v14 + 14);
  LODWORD(v40) = *(a4 + 8);
  *(&v40 + 1) = *(a4 + 5);
  v21 = a4[4];
  v41 = a4[3];
  v42 = v21;
  *&v43 = *(a4 + 10);
  DWORD2(v43) = *(a4 + 22);
  v22 = *(a4 + 12);
  v23 = *(a4 + 104);
  v46 = *(a4 + 120);
  v45 = v23;
  v24 = *(a4 + 136);
  v25 = *(a4 + 168);
  v48 = *(a4 + 152);
  v49 = v25;
  v47 = v24;
  v50 = *(a4 + 184);
  v26 = *(a4 + 25);
  v44 = v22;
  v51 = v26;
  v52 = a4[13];
  return sub_239D2462C(a2, a3, v6, v7, v28, v8, v11, *(v14 + 3), v12, a1, &v29);
}

uint64_t sub_239D23560(uint64_t a1, char *a2, const char *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v120 = *(a1 + *MEMORY[0x277CD7350]);
  v119 = *(a1 + *MEMORY[0x277CD7370]);
  v118 = *(a1 + 352);
  v10 = *(a1 + 536);
  v11 = *(a1 + 552);
  v117 = *(a1 + 360);
  v124[0] = *(a1 + 520);
  v124[1] = v10;
  v124[2] = v11;
  v12 = *(a1 + 480);
  v123[0] = *(a1 + 464);
  v123[1] = v12;
  v123[2] = *(a1 + 496);
  v116 = *(a1 + 512);
  v13 = *(a4 + 224);
  v14 = objc_msgSend_primaryKernelWidth(a1, a2, a3, a4, a5, a6, a7, a8);
  objc_msgSend_primaryKernelHeight(a1, v15, v16, v17, v18, v19, v20, v21);
  v29 = objc_msgSend_primaryDilationRateX(a1, v22, v23, v24, v25, v26, v27, v28);
  objc_msgSend_primaryDilationRateY(a1, v30, v31, v32, v33, v34, v35, v36);
  v37 = *(a4 + 280);
  v45 = objc_msgSend_secondaryKernelWidth(a1, v38, v39, v40, v41, v42, v43, v44);
  objc_msgSend_secondaryKernelHeight(a1, v46, v47, v48, v49, v50, v51, v52);
  v60 = objc_msgSend_secondaryDilationRateX(a1, v53, v54, v55, v56, v57, v58, v59);
  objc_msgSend_secondaryDilationRateY(a1, v61, v62, v63, v64, v65, v66, v67);
  v144 = 0u;
  v145 = 0u;
  v143 = 0u;
  memset(v142, 0, sizeof(v142));
  v141 = 0u;
  v140 = 0u;
  v125 = vdupq_n_s64(1uLL);
  v126 = 0;
  v68 = *(a4 + 16);
  v127 = *a4;
  v128 = v68;
  v129 = *(a4 + 32);
  v130 = *(a4 + 48);
  v69 = *(a4 + 56);
  v70 = *(a4 + 88);
  v132 = *(a4 + 72);
  v133 = v70;
  v131 = v69;
  v135 = *(a4 + 120);
  v136 = *(a4 + 136);
  v137 = *(a4 + 152);
  v71 = *(a4 + 112);
  v73 = *(a4 + 160);
  v72 = *(a4 + 168);
  v134 = *(a4 + 104);
  v138 = v72;
  v139 = v71;
  LODWORD(v140) = *(a4 + 136);
  *(&v140 + 1) = v73;
  *&v69 = vmovn_s64(*(a4 + 176));
  LOWORD(v68) = v69;
  WORD1(v68) = WORD2(v69);
  DWORD1(v68) = ((*(a4 + 304) + 3) >> 2);
  *&v69 = vmovn_s64(*(a4 + 200));
  v74 = *(a4 + 144);
  WORD3(v70) = 1;
  LOWORD(v70) = v69;
  WORD1(v70) = WORD2(v69);
  WORD2(v70) = (v74 + 3) >> 2;
  *&v141 = v68;
  *(&v141 + 1) = v70;
  LOWORD(v142[0]) = v74;
  LOWORD(v142[1]) = 1;
  HIWORD(v142[2]) = objc_msgSend_maxBatchSize(a1, v75, v76, v77, v78, v79, v80, v81);
  v142[6] = *(a4 + 16);
  *&v143 = *(a4 + 40);
  WORD5(v143) = v13 - (v14 >> 1) * v29;
  WORD4(v143) = WORD5(v143);
  HIDWORD(v143) = 0;
  WORD1(v144) = v14;
  LOWORD(v144) = v14;
  WORD3(v144) = v13;
  WORD2(v144) = v13;
  WORD4(v144) = objc_msgSend_primaryStrideInPixelsX(a1, v82, v83, v84, v85, v86, v87, v88);
  WORD5(v144) = objc_msgSend_primaryStrideInPixelsY(a1, v89, v90, v91, v92, v93, v94, v95);
  HIWORD(v144) = v29;
  WORD6(v144) = v29;
  LOWORD(v145) = *(a4 + 312);
  WORD1(v145) = *(a4 + 24);
  DWORD1(v145) = *(a4 + 240);
  DWORD2(v145) = *(a4 + 72);
  v146 = *(a4 + 96);
  v148 = v37 - (v45 >> 1) * v60;
  v147 = v148;
  v149 = 0;
  v151 = v45;
  v150 = v45;
  v153 = v37;
  v152 = v37;
  v154 = objc_msgSend_secondaryStrideInPixelsX(a1, v96, v97, v98, v99, v100, v101, v102);
  v155 = objc_msgSend_secondaryStrideInPixelsY(a1, v103, v104, v105, v106, v107, v108, v109);
  v157 = v60;
  v156 = v60;
  v110 = *(a4 + 320);
  v158 = v110;
  v159 = *(a4 + 80);
  v160 = *(a4 + 296);
  v161 = 0;
  v111 = *(a4 + 192);
  v162 = *(a4 + 176);
  v163 = v111;
  v112 = *(a4 + 224);
  v164 = *(a4 + 208);
  v165 = v112;
  v113 = *(a4 + 240);
  v167 = *(a4 + 280);
  v114 = *(a4 + 296);
  v166 = v113;
  v168 = v114;
  v169 = *(a4 + 304);
  v170 = v110;
  return sub_239D252BC(a2, a3, v120, v119, v124, v123, v118, v117, v116, *(a4 + 24), a1, &v125);
}

uint64_t sub_239D238E8(uint64_t a1, void *a2, const char *a3, __int128 *a4)
{
  v6 = *(a1 + *MEMORY[0x277CD7350]);
  v7 = *(a1 + *MEMORY[0x277CD7370]);
  v8 = *(a1 + 352);
  v9 = *(a1 + 360);
  v10 = *(a1 + 536);
  v37[0] = *(a1 + 520);
  v37[1] = v10;
  v11 = *(a1 + 552);
  v12 = *(a1 + 480);
  v36[0] = *(a1 + 464);
  v36[1] = v12;
  v36[2] = *(a1 + 496);
  v13 = *(a1 + 512);
  memset(&v57[16], 0, 32);
  *v57 = 0u;
  v56 = 0u;
  v55 = 0u;
  v54 = 0u;
  v53 = 0u;
  v14 = *a4;
  v37[2] = v11;
  v38 = v14;
  v15 = *(a4 + 3);
  v39 = *(a4 + 2);
  v17 = *v15;
  v16 = v15[1];
  v18 = *(v15 + 6);
  v42 = v15[2];
  v43 = v18;
  v40 = v17;
  v41 = v16;
  v19 = *(v15 + 56);
  v20 = *(v15 + 13);
  v21 = *(v15 + 88);
  v45 = *(v15 + 72);
  v46 = v21;
  v47 = v20;
  v44 = v19;
  v22 = v15[7];
  v23 = v15[8];
  v24 = v15[9];
  v51 = *(v15 + 20);
  v50 = v24;
  v49 = v23;
  v48 = v22;
  v52 = *(v15 + 21);
  LODWORD(v53) = *(a4 + 8);
  v25 = *(a4 + 5);
  v26 = a4[4];
  v54 = a4[3];
  v55 = v26;
  v27 = *(a4 + 10);
  *(&v53 + 1) = v25;
  *&v56 = v27;
  DWORD2(v56) = *(a4 + 22);
  *v57 = *(a4 + 12);
  v28 = *(a4 + 120);
  *&v57[8] = *(a4 + 104);
  *&v57[24] = v28;
  *&v57[40] = *(a4 + 34);
  v58 = *(a4 + 18);
  v29 = *(a4 + 168);
  v59 = *(a4 + 152);
  v60 = v29;
  v30 = *(a4 + 200);
  v31 = *(a4 + 216);
  v61 = *(a4 + 184);
  v62 = v30;
  v32 = *(a4 + 232);
  v33 = *(a4 + 31);
  v63 = v31;
  v64 = v32;
  v66 = a4[16];
  v34 = *(a4 + 34);
  v65 = v33;
  v67 = v34;
  v68 = *(a4 + 280);
  v69 = *(a4 + 37);
  return sub_239D252BC(a2, a3, v6, v7, v37, v36, v8, v9, v13, *(v15 + 3), a1, &v38);
}

uint64_t sub_239D2462C(void *a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, float a9, void *a10, uint64_t a11)
{
  v278 = *MEMORY[0x277D85DE8];
  v248 = *(a11 + 264);
  v249 = *(a11 + 272);
  v14 = *(a11 + 280);
  v15 = *(a11 + 32);
  v16 = *(a11 + 88);
  v17 = *(a11 + 208);
  v242 = *(a11 + 248);
  LODWORD(v247) = a7;
  v243 = a2;
  if ((*(a11 + 200) & 2) != 0)
  {
    v17 = objc_msgSend_objectAtIndexedSubscript_(v17, a2, 0, a4, a5, a6, a7, a8);
    v18 = objc_msgSend_objectAtIndexedSubscript_(*(a11 + 152), v19, 0, v20, v21, v22, v23, v24);
    if (v15 != v16)
    {
      goto LABEL_8;
    }
  }

  else
  {
    v18 = *(a11 + 152);
    if (v15 != v16)
    {
      goto LABEL_8;
    }
  }

  if (v17 == v18 || (objc_msgSend_isEqual_(v17, a2, v18, a4, a5, a6, a7, a8) & 1) != 0)
  {
    return -18;
  }

LABEL_8:
  if (v14)
  {
    v26 = v249 == 0;
  }

  else
  {
    v26 = 1;
  }

  if (v26)
  {
    return 0;
  }

  v240 = a8;
  v241 = v18;
  v28 = *a5;
  v29 = *(a5 + 24);
  v264.origin.z = *(a5 + 16);
  v30 = *(a5 + 32);
  v31 = *(a11 + 242) - *(a11 + 240);
  v32 = v31 + 3;
  v33 = v31 + 6;
  if (v32 >= 0)
  {
    v33 = v32;
  }

  v34 = v33 >> 2;
  *&v264.origin.x = v28;
  memset(v263, 0, sizeof(v263));
  v258.width = objc_msgSend_width(v17, a2, a3, a4, a5, a6, a7, a8);
  v258.height = objc_msgSend_height(v17, v35, v36, v37, v38, v39, v40, v41);
  v258.depth = objc_msgSend_arrayLength(v17, v42, v43, v44, v45, v46, v47, v48);
  v264.size.width = v29;
  v264.size.height = v30;
  v264.size.depth = v34;
  MPSGetEffectiveClipRegion(v263[0].i64, &v258, &v264);
  v25 = -3;
  if (v263[2].i64[0] && v263[1].i64[1])
  {
    v56 = *v15;
    v57 = BYTE3(*v15) & 0xF;
    v58 = (v57 == 4 || v57 == 2) && (*v16 & 0xF000000) == 0x1000000;
    v237 = v58;
    v59 = 52;
    switch(v247)
    {
      case 0:
        if (v240 <= 4)
        {
          v59 = 0;
        }

        else
        {
          v59 = 26;
        }

        v60 = (v247 & 0xFFFFFFFB) == 3;
        if (v247 == 15)
        {
          goto LABEL_70;
        }

        goto LABEL_34;
      case 1:
        if (v240 <= 4)
        {
          v59 = 2;
        }

        else
        {
          v59 = 28;
        }

        v60 = (v247 & 0xFFFFFFFB) == 3;
        if (v247 != 15)
        {
          goto LABEL_34;
        }

        goto LABEL_70;
      case 2:
        if (v240 <= 4)
        {
          v59 = 4;
        }

        else
        {
          v59 = 30;
        }

        v60 = (v247 & 0xFFFFFFFB) == 3;
        if (v247 != 15)
        {
          goto LABEL_34;
        }

        goto LABEL_70;
      case 3:
        v62 = v240 > 4;
        v63 = 6;
        v64 = 32;
        goto LABEL_72;
      case 4:
        if (v240 <= 4)
        {
          v59 = 8;
        }

        else
        {
          v59 = 34;
        }

        v60 = (v247 & 0xFFFFFFFB) == 3;
        if (v247 != 15)
        {
          goto LABEL_34;
        }

        goto LABEL_70;
      case 5:
        if (v240 <= 4)
        {
          v59 = 10;
        }

        else
        {
          v59 = 36;
        }

        goto LABEL_69;
      case 6:
        if (v240 <= 4)
        {
          v59 = 12;
        }

        else
        {
          v59 = 38;
        }

        v60 = (v247 & 0xFFFFFFFB) == 3;
        if (v247 != 15)
        {
          goto LABEL_34;
        }

        goto LABEL_70;
      case 7:
        v62 = v240 > 4;
        v63 = 14;
        v64 = 40;
LABEL_72:
        if (v62)
        {
          LODWORD(v59) = v64;
        }

        else
        {
          LODWORD(v59) = v63;
        }

        v236 = a10;
        v60 = (v247 & 0xFFFFFFFB) == 3;
        goto LABEL_76;
      case 8:
      case 11:
        if (v240 <= 4)
        {
          v59 = 16;
        }

        else
        {
          v59 = 42;
        }

        if ((v247 & 0xFFFFFFFB) == 3)
        {
          goto LABEL_28;
        }

        goto LABEL_33;
      case 9:
      case 12:
        if (v240 <= 4)
        {
          v59 = 18;
        }

        else
        {
          v59 = 44;
        }

        if ((v247 & 0xFFFFFFFB) != 3)
        {
          goto LABEL_33;
        }

        goto LABEL_28;
      case 10:
      case 13:
      case 14:
        if (v240 <= 4)
        {
          v59 = 20;
        }

        else
        {
          v59 = 46;
        }

        if ((v247 & 0xFFFFFFFB) == 3)
        {
          goto LABEL_28;
        }

        goto LABEL_33;
      case 15:
LABEL_69:
        v60 = (v247 & 0xFFFFFFFB) == 3;
        if (v247 == 15)
        {
          goto LABEL_70;
        }

        goto LABEL_34;
      default:
        v59 = 0;
        if ((v247 & 0xFFFFFFFB) == 3)
        {
LABEL_28:
          v236 = a10;
          v60 = 1;
LABEL_76:
          v61 = (*(v16 + 5) & 6) == 0;
        }

        else
        {
LABEL_33:
          v60 = 0;
          if (v247 == 15)
          {
LABEL_70:
            objc_msgSend_pixelFormat(v241, v49, v50, v51, v52, v53, v54, v55);
            v235 = 0;
            v238 = 0;
            v72 = objc_msgSend_maxBatchSize(a10, v65, v66, v67, v68, v69, v70, v71);
            goto LABEL_104;
          }

LABEL_34:
          v236 = a10;
          v61 = (v56 & 0xF000000) != 0x1000000;
        }

        v59 = v59 | v61;
        v73 = objc_msgSend_pixelFormat(v241, v49, v50, v51, v52, v53, v54, v55);
        v238 = 0;
        v235 = v247 == 10;
        if (v247 > 0xE || ((1 << v247) & 0x64CC) == 0)
        {
          goto LABEL_103;
        }

        v81 = v73;
        *(a11 + 144) &= ~1u;
        if (v60)
        {
          v82 = objc_msgSend_pixelFormat(v241, v74, v75, v76, v77, v78, v79, v80);
          if (v82 == 20)
          {
            v81 = 23;
          }

          else if (v82 == 10)
          {
            v81 = 13;
          }
        }

        if (objc_msgSend_textureType(v241, v74, v75, v76, v77, v78, v79, v80) == 3)
        {
          v90 = objc_alloc(MEMORY[0x277CBEB18]);
          v97 = objc_msgSend_initWithCapacity_(v90, v91, *(a11 + 8), v92, v93, v94, v95, v96);
          v238 = v97;
          if ((*(a11 + 144) & 2) == 0)
          {
            v98 = v97;
            v99 = objc_msgSend_newTextureViewWithPixelFormat_textureType_levels_slices_(v241, v74, v81, 2, 0, 1, v248, 1);
LABEL_87:
            v100 = v99;
            v101 = v99;
            objc_msgSend_setObject_atIndexedSubscript_(v98, v102, v101, 0, v103, v104, v105, v106);

            goto LABEL_103;
          }

          if (*(a11 + 8))
          {
            v107 = 0;
            do
            {
              v108 = objc_msgSend_objectAtIndexedSubscript_(*(a11 + 152), v74, v107, v76, v77, v78, v79, v80);
              v110 = objc_msgSend_newTextureViewWithPixelFormat_textureType_levels_slices_(v108, v109, v81, 2, 0, 1, v248, 1);
              v111 = v110;
              objc_msgSend_setObject_atIndexedSubscript_(v238, v112, v111, v107, v113, v114, v115, v116);

              ++v107;
            }

            while (v107 < *(a11 + 8));
          }
        }

        else if (objc_msgSend_textureType(v241, v83, v84, v85, v86, v87, v88, v89) == 2 && objc_msgSend_pixelFormat(v241, v74, v75, v76, v77, v78, v79, v80) != v81)
        {
          v117 = objc_alloc(MEMORY[0x277CBEB18]);
          v124 = objc_msgSend_initWithCapacity_(v117, v118, *(a11 + 8), v119, v120, v121, v122, v123);
          v238 = v124;
          if ((*(a11 + 144) & 2) == 0)
          {
            v98 = v124;
            v99 = objc_msgSend_newTextureViewWithPixelFormat_(v241, v74, v81, v76, v77, v78, v79, v80);
            goto LABEL_87;
          }

          if (*(a11 + 8))
          {
            v125 = 0;
            do
            {
              v126 = objc_msgSend_objectAtIndexedSubscript_(*(a11 + 152), v74, v125, v76, v77, v78, v79, v80);
              v133 = objc_msgSend_newTextureViewWithPixelFormat_(v126, v127, v81, v128, v129, v130, v131, v132);
              v134 = v133;
              objc_msgSend_setObject_atIndexedSubscript_(v238, v135, v134, v125, v136, v137, v138, v139);

              ++v125;
            }

            while (v125 < *(a11 + 8));
          }
        }

        else
        {
          v238 = 0;
        }

LABEL_103:
        v72 = objc_msgSend_maxBatchSize(v236, v74, v75, v76, v77, v78, v79, v80);
LABEL_104:
        v140 = v72;
        v141 = *(a4 + 32);
        (*(*v141 + 16))(v141, v59);
        v25 = -1;
        v262 = -1;
        *&v142 = -1;
        *(&v142 + 1) = -1;
        v261 = v142;
        v260 = v142;
        v259 = v142;
        v143 = *(a11 + 144) & 0x3F | ((*(a11 + 200) & 0x3Fu) << 6);
        v258.width = v140;
        v258.height = v143;
        v258.depth = -1;
        UberShaderKey = MPSLibrary::CreateUberShaderKey();
        PipelineStateForMPSKey = MPSLibrary::GetPipelineStateForMPSKey();
        if (!PipelineStateForMPSKey)
        {
          return v25;
        }

        v152 = PipelineStateForMPSKey;
        objc_msgSend_setComputePipelineState_(a1, v146, PipelineStateForMPSKey, v147, v148, v149, v150, v151, 0, 0, 0, 0, 0);
        v160 = objc_msgSend_threadExecutionWidth(v152, v153, v154, v155, v156, v157, v158, v159);
        MPSLibrary::ReleaseComputeState();
        MPSLibrary::ReleaseMPSKey();
        v161 = (*(*v141 + 24))(v141);
        if (v161)
        {
          v169 = v161;
        }

        else
        {
          v169 = v160;
        }

        if (v169 <= 0x20)
        {
          v169 = 32;
        }

        break;
    }

    v245 = v169;
    v170 = v248;
    v171 = v237;
    switch(v247)
    {
      case 0:
      case 4:
      case 8:
      case 11:
        v243 = *(a11 + 8) * ((v240 + 3) >> 2);
        if (v247 == 8)
        {
          v172 = 1.0 / v263[1].u64[1];
        }

        else
        {
          v172 = 1.0;
        }

        v247 = 1;
        UberShaderKey = v14;
        goto LABEL_127;
      case 1:
      case 5:
      case 9:
      case 12:
        v243 = *(a11 + 8) * ((v240 + 3) >> 2);
        if (v247 == 9)
        {
          v172 = 1.0 / v263[2].u64[0];
        }

        else
        {
          v172 = 1.0;
        }

        v247 = 1;
        goto LABEL_126;
      case 2:
      case 3:
      case 6:
      case 7:
      case 10:
      case 13:
      case 14:
        v247 = *(a11 + 8);
        v172 = 1.0;
        if (v237)
        {
          v173 = v14;
          if (!v235)
          {
            goto LABEL_121;
          }

          v174 = v240;
        }

        else
        {
          v173 = v14;
          if (!v235)
          {
            goto LABEL_121;
          }

          v174 = v263[2].u64[1];
        }

        v172 = 1.0 / v174;
LABEL_121:
        v243 = v173;
LABEL_126:
        UberShaderKey = v249;
LABEL_127:
        *&v257[4] = 0;
        v175 = vmovn_s64(v263[0]);
        v175.i16[1] = v175.i16[2];
        v175.i16[2] = v263[1].i16[0];
        v176 = vmovn_s64(*(&v263[1] + 8));
        v176.i16[1] = v176.i16[2];
        v176.i16[2] = v263[2].i16[4];
        v177 = vmovn_s64(v242);
        v252[0] = v175;
        v252[1] = v176;
        v177.i16[1] = v177.i16[2];
        v177.i16[2] = v170;
        v252[2] = v177;
        v253 = v172;
        v254 = a9;
        v255 = v171;
        v256 = v240;
        v178 = v240 + 3;
        if (((v240 + 3) & 0x3FFF8) != 0)
        {
          v179 = (v178 >> 2);
          v180 = __clz(0x80000000 / v179);
          v181 = (0x80000000 / v179) >> (16 - v180);
          v182 = v180 + 15;
          v183 = -65536 * (v178 >> 2) * v181 / v179;
          if (v183 <= v181)
          {
            v184 = v181;
          }

          else
          {
            v184 = v181 + 1;
          }

          if (v183 <= v181)
          {
            LOWORD(v181) = 0;
          }

          *v257 = (v182 << 48) | ((v183 - v181) << 32) | (v184 << 16) | (v178 >> 2);
          v239 = UberShaderKey;
          if ((*(a11 + 200) & 2) == 0)
          {
            goto LABEL_134;
          }
        }

        else
        {
          *v257 = 65537;
          v239 = UberShaderKey;
          if ((*(a11 + 200) & 2) == 0)
          {
LABEL_134:
            objc_msgSend_setTexture_atIndex_(a1, v162, v17, v140, v165, v166, v167, v168);
            goto LABEL_155;
          }
        }

        v189 = *(a11 + 208);
        v190 = objc_msgSend_count(v189, v162, v163, v164, v165, v166, v167, v168);
        v276 = 0u;
        v277 = 0u;
        v274 = 0u;
        v275 = 0u;
        v272 = 0u;
        v273 = 0u;
        v270 = 0u;
        v271 = 0u;
        v268 = 0u;
        v269 = 0u;
        v266 = 0u;
        v267 = 0u;
        v265 = 0u;
        memset(&v264, 0, sizeof(v264));
        if (v140)
        {
          v191 = v190;
          for (i = 0; i < v140; i += v194)
          {
            if (v191 <= i)
            {
              v193 = 0;
              if (v140 - i >= 0x20)
              {
                v194 = 32;
              }

              else
              {
                v194 = v140 - i;
              }

              v195 = v194;
              if (!v194)
              {
                goto LABEL_139;
              }
            }

            else
            {
              if (v191 - i >= 0x20)
              {
                v193 = 32;
                objc_msgSend_getObjects_range_(v189, v185, &v264, i, 32, v186, v187, v188);
              }

              else
              {
                v193 = v191 - i;
                objc_msgSend_getObjects_range_(v189, v185, &v264, i, v191 - i, v186, v187, v188);
              }

              if (v140 - i >= 0x20)
              {
                v194 = 32;
              }

              else
              {
                v194 = v140 - i;
              }

              v195 = v194 - v193;
              if (v194 == v193)
              {
                goto LABEL_139;
              }
            }

            bzero(&v264.origin.x + v193, 8 * v195);
LABEL_139:
            objc_msgSend_setTextures_withRange_(a1, v185, &v264, i + v140, v194, v186, v187, v188);
          }
        }

        UberShaderKey = v239;
LABEL_155:
        objc_msgSend_setBytes_length_atIndex_(a1, v185, a11 + 216, 32, 1, v186, v187, v188);
        if ((*(a11 + 144) & 2) == 0)
        {
          v203 = v238;
          if (v238)
          {
            v241 = objc_msgSend_objectAtIndexedSubscript_(v238, v196, 0, v198, v199, v200, v201, v202);
          }

          objc_msgSend_setTexture_atIndex_(a1, v196, v241, 0, v199, v200, v201, v202);
          goto LABEL_180;
        }

        v208 = v238;
        if (!v238)
        {
          v208 = *(a11 + 152);
        }

        v209 = objc_msgSend_count(v208, v196, v197, v198, v199, v200, v201, v202);
        v276 = 0u;
        v277 = 0u;
        v274 = 0u;
        v275 = 0u;
        v272 = 0u;
        v273 = 0u;
        v270 = 0u;
        v271 = 0u;
        v268 = 0u;
        v269 = 0u;
        v266 = 0u;
        v267 = 0u;
        v265 = 0u;
        memset(&v264, 0, sizeof(v264));
        if (!v140)
        {
LABEL_179:
          v203 = v238;
          UberShaderKey = v239;
LABEL_180:
          objc_msgSend_setBytes_length_atIndex_(a1, v204, a11 + 160, 40, 0, v205, v206, v207);
          objc_msgSend_setBytes_length_atIndex_(a1, v215, v252, 48, 30, v216, v217, v218);
          Sampler = MPSDevice::GetSampler();
          objc_msgSend_setSamplerState_atIndex_(a1, v220, Sampler, 0, v221, v222, v223, v224);
          objc_msgSend_setThreadgroupMemoryLength_atIndex_(a1, v225, 16 * v245, 0, v226, v227, v228, v229);
          v264.origin.x = v247;
          v264.origin.y = UberShaderKey;
          v264.origin.z = v243;
          v250 = v245;
          v251 = vdupq_n_s64(1uLL);
          objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a1, v230, &v264, &v250, v231, v232, v233, v234);
          if (v203)
          {
          }

          return 0;
        }

        v210 = v209;
        v211 = 0;
        break;
      case 15:
        v247 = *(a11 + 8);
        v172 = 1.0;
        v243 = v14;
        goto LABEL_126;
      default:
        v172 = 0.0;
        v170 = v248;
        v171 = v237;
        goto LABEL_127;
    }

    while (1)
    {
      if (v210 <= v211)
      {
        v212 = 0;
        if (v140 - v211 >= 0x20)
        {
          v213 = 32;
        }

        else
        {
          v213 = v140 - v211;
        }

        v214 = v213;
        if (!v213)
        {
          goto LABEL_164;
        }
      }

      else
      {
        if (v210 - v211 >= 0x20)
        {
          v212 = 32;
          objc_msgSend_getObjects_range_(v208, v204, &v264, v211, 32, v205, v206, v207);
        }

        else
        {
          v212 = v210 - v211;
          objc_msgSend_getObjects_range_(v208, v204, &v264, v211, v210 - v211, v205, v206, v207);
        }

        if (v140 - v211 >= 0x20)
        {
          v213 = 32;
        }

        else
        {
          v213 = v140 - v211;
        }

        v214 = v213 - v212;
        if (v213 == v212)
        {
          goto LABEL_164;
        }
      }

      bzero(&v264.origin.x + v212, 8 * v214);
LABEL_164:
      objc_msgSend_setTextures_withRange_(a1, v204, &v264, v211, v213, v205, v206, v207);
      v211 += v213;
      if (v211 >= v140)
      {
        goto LABEL_179;
      }
    }
  }

  return v25;
}

uint64_t sub_239D252BC(void *a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, int a9, unint64_t a10, void *a11, uint64_t a12)
{
  v12 = a5;
  v13 = a1;
  v326 = *MEMORY[0x277D85DE8];
  v14 = *(a12 + 368);
  v293 = *(a12 + 376);
  v15 = *(a12 + 32);
  v16 = *(a12 + 88);
  v17 = *(a12 + 144);
  v18 = *(a12 + 264);
  v286 = *(a12 + 352);
  if ((*(a12 + 256) & 2) == 0)
  {
    v292 = *(a12 + 312);
    v19 = *(a12 + 208);
    if (v15 != v17 && v16 != v17)
    {
      goto LABEL_16;
    }

LABEL_12:
    if (v18 == v19)
    {
      return -18;
    }

    v280 = v17;
    v282 = v15;
    v278 = v16;
    v39 = v14;
    v40 = a7;
    v14 = v18;
    v41 = v18;
    v42 = v19;
    v49 = -18;
    if (objc_msgSend_isEqual_(v41, a2, v19, a4, a5, a6, a7, a8))
    {
      return v49;
    }

    if (v292 == v42)
    {
      return v49;
    }

    isEqual = objc_msgSend_isEqual_(v292, v43, v42, v44, v45, v46, v47, v48);
    v19 = v42;
    a7 = v40;
    v18 = v14;
    LOWORD(v14) = v39;
    v16 = v278;
    v17 = v280;
    v15 = v282;
    if (isEqual)
    {
      return v49;
    }

    goto LABEL_16;
  }

  v22 = *(a12 + 368);
  v14 = *(a12 + 32);
  v23 = *(a12 + 88);
  v24 = a7;
  v18 = objc_msgSend_objectAtIndexedSubscript_(v18, a2, 0, a4, a5, a6, a7, a8);
  v292 = objc_msgSend_objectAtIndexedSubscript_(*(a12 + 312), v25, 0, v26, v27, v28, v29, v30);
  v37 = objc_msgSend_objectAtIndexedSubscript_(*(a12 + 208), v31, 0, v32, v33, v34, v35, v36);
  a7 = v24;
  v16 = v23;
  v15 = v14;
  LOWORD(v14) = v22;
  v13 = a1;
  v12 = a5;
  v19 = v37;
  if (v15 == v17 || v23 == v17)
  {
    goto LABEL_12;
  }

LABEL_16:
  if (v293.i64[1])
  {
    v51 = v293.i64[0] == 0;
  }

  else
  {
    v51 = 1;
  }

  if (v51)
  {
    return 0;
  }

  v283 = v15;
  v285 = v13;
  v277 = v19;
  v52 = *v12;
  v53 = *(v12 + 24);
  v312.origin.z = *(v12 + 16);
  v54 = *(v12 + 32);
  v55 = *(a12 + 298) - *(a12 + 296);
  v56 = v55 + 3;
  v57 = v55 + 6;
  if (v56 >= 0)
  {
    v57 = v56;
  }

  v58 = v57 >> 2;
  *&v312.origin.x = v52;
  memset(v311, 0, sizeof(v311));
  v303.width = objc_msgSend_width(v18, a2, a3, a4, a5, a6, a7, a8);
  v303.height = objc_msgSend_height(v18, v59, v60, v61, v62, v63, v64, v65);
  v303.depth = objc_msgSend_arrayLength(v18, v66, v67, v68, v69, v70, v71, v72);
  v312.size.width = v53;
  v312.size.height = v54;
  v312.size.depth = v58;
  MPSGetEffectiveClipRegion(v311[0].i64, &v303, &v312);
  v49 = -3;
  if (v311[2].i64[0] && v311[1].i64[1])
  {
    v279 = v16;
    v281 = v17;
    v80 = *a6;
    v81 = *(a6 + 24);
    v310 = *(a6 + 16);
    v82 = *(a6 + 32);
    v83 = *(a12 + 346) - *(a12 + 344);
    v84 = v83 + 3;
    v85 = v83 + 6;
    if (v84 >= 0)
    {
      v85 = v84;
    }

    v86 = v85 >> 2;
    v309 = v80;
    memset(v308, 0, sizeof(v308));
    v87 = objc_msgSend_width(v292, v73, v74, v75, v76, v77, v78, v79);
    v95 = objc_msgSend_height(v292, v88, v89, v90, v91, v92, v93, v94);
    v103 = objc_msgSend_arrayLength(v292, v96, v97, v98, v99, v100, v101, v102);
    v303.width = v87;
    v303.height = v95;
    v303.depth = v103;
    *&v312.origin.x = v309;
    v312.origin.z = v310;
    v312.size.width = v81;
    v312.size.height = v82;
    v312.size.depth = v86;
    MPSGetEffectiveClipRegion(v308[0].i64, &v303, &v312);
    v49 = -3;
    if (v308[2].i64[0])
    {
      if (v308[1].i64[1])
      {
        v276 = v18;
        if (a9 == 15)
        {
          v112 = a10;
          v115 = objc_msgSend_maxBatchSize(a11, v104, v105, v106, v107, v108, v109, v110);
          v291 = 0;
          v116 = 52;
          v117 = 1;
          v111 = a4;
        }

        else
        {
          v111 = a4;
          if (a9 == 14)
          {
            v112 = a10;
            v113 = a10 <= 4 ? 24 : 50;
            v291 = 1;
          }

          else
          {
            v291 = 0;
            v112 = a10;
            v113 = a10 <= 4 ? 22 : 48;
          }

          v115 = objc_msgSend_maxBatchSize(a11, v104, v105, v106, v107, v108, v109, v110);
          v117 = 0;
          v116 = (*v283 & 0xF000000) == 0x1000000 ? v113 : (v113 + 1);
        }

        v118 = *(v111 + 32);
        (*(*v118 + 16))(v118, v116);
        v49 = -1;
        *&v119 = -1;
        *(&v119 + 1) = -1;
        v306 = v119;
        v305 = v119;
        v304 = v119;
        v120 = *(a12 + 200) & 0x3F | ((*(a12 + 256) & 0x3F) << 6) & 0xFFF | ((*(a12 + 304) & 0x3Fu) << 12);
        v303.width = v115;
        v303.height = v120;
        v307 = -1;
        v303.depth = -1;
        MPSLibrary::CreateUberShaderKey();
        PipelineStateForMPSKey = MPSLibrary::GetPipelineStateForMPSKey();
        if (PipelineStateForMPSKey)
        {
          v128 = PipelineStateForMPSKey;
          objc_msgSend_setComputePipelineState_(v285, v122, PipelineStateForMPSKey, v123, v124, v125, v126, v127, 0, 0, 0, 0, 0);
          v136 = objc_msgSend_threadExecutionWidth(v128, v129, v130, v131, v132, v133, v134, v135);
          MPSLibrary::ReleaseComputeState();
          MPSLibrary::ReleaseMPSKey();
          v137 = (*(*v118 + 24))(v118);
          v287 = v136;
          if (v137)
          {
            v145 = v137;
          }

          else
          {
            v145 = v136;
          }

          v146 = BYTE3(*v283) & 0xF;
          v275 = v145;
          v148 = (v146 == 2 || v146 == 4 || (v147 = *(v279 + 3) & 0xF, v147 == 4) || v147 == 2) && (*v281 & 0xF000000) == 0x1000000;
          v149 = 1.0;
          v150 = v285;
          if (a9 == 10)
          {
            v151 = 2;
            if (!v148)
            {
              v151 = 0;
            }

            v149 = 1.0 / (v311[2].i64[1] << v151);
          }

          v289 = *(a12 + 8);
          v152 = vmovn_s64(v311[0]);
          v152.i16[1] = v152.i16[2];
          v152.i16[2] = v311[1].i16[0];
          v153 = vmovn_s64(*(&v311[1] + 8));
          v153.i16[1] = v153.i16[2];
          v153.i16[2] = v311[2].i16[4];
          v296[0] = v152;
          v296[1] = v153;
          v154 = vmovn_s64(v308[0]);
          v154.i16[1] = v154.i16[2];
          v154.i16[2] = v308[1].i16[0];
          v155 = vmovn_s64(*(&v308[1] + 8));
          v156 = 65537;
          v155.i16[1] = v155.i16[2];
          v155.i16[2] = v308[2].i16[4];
          *&v302[6] = 0;
          v157 = vmovn_s64(v286);
          v157.i16[1] = v157.i16[2];
          v157.i16[2] = v14;
          v158 = vmovn_s64(v293);
          v296[2] = v154;
          v296[3] = v155;
          v158.i16[1] = v158.i16[2];
          v158.i16[2] = (*(a12 + 160) + 3) >> 2;
          v296[4] = v157;
          v296[5] = v158;
          v297 = 0;
          v298 = v149;
          v299 = v148;
          v300 = v112;
          v301 = v291;
          v159 = v112 + 3;
          v160 = 65537;
          if (((v112 + 3) & 0x3FFF8) != 0)
          {
            v161 = (v159 >> 2);
            v162 = __clz(0x80000000 / v161);
            v163 = (0x80000000 / v161) >> (16 - v162);
            v164 = v162 + 15;
            v165 = -65536 * (v159 >> 2) * v163 / v161;
            if (v165 <= v163)
            {
              v166 = v163;
            }

            else
            {
              v166 = v163 + 1;
            }

            if (v165 <= v163)
            {
              LOWORD(v163) = 0;
            }

            v160 = (v164 << 48) | ((v165 - v163) << 32) | (v166 << 16) | (v159 >> 2);
          }

          *v302 = v160;
          if (v117)
          {
            v167 = objc_msgSend_windowInX(a11, v138, v139, v140, v141, v142, v143, v144);
            v175 = objc_msgSend_windowInY(a11, v168, v169, v170, v171, v172, v173, v174);
            LOWORD(v297) = v167;
            WORD1(v297) = v175;
            v183 = objc_msgSend_strideInX(a11, v176, v177, v178, v179, v180, v181, v182);
            v191 = objc_msgSend_strideInY(a11, v184, v185, v186, v187, v188, v189, v190);
            WORD2(v297) = v183;
            HIWORD(v297) = v191;
            if ((!v183 || !v191) && MTLReportFailureTypeEnabled())
            {
              v273 = objc_opt_class();
              v274 = NSStringFromClass(v273);
              MTLReportFailure();
            }

            v192 = (((2 * v175) | 1) * ((2 * v167) | 1));
            v193 = (v192 + 3) >> 2;
            if (v192 >= 5)
            {
              v194 = __clz(0x80000000 / v193);
              v195 = (0x80000000 / v193) >> (16 - v194);
              v196 = v194 + 15;
              v197 = -65536 * v193 * v195 / v193;
              if (v197 <= v195)
              {
                v198 = v195;
              }

              else
              {
                v198 = v195 + 1;
              }

              if (v197 <= v195)
              {
                LOWORD(v195) = 0;
              }

              v156 = (v196 << 48) | ((v197 - v195) << 32) | (v198 << 16) | v193;
            }

            *v302 = v156;
            v289 *= v193;
          }

          if ((*(a12 + 256) & 2) == 0)
          {
            objc_msgSend_setTexture_atIndex_(v285, v138, v276, v115, v141, v142, v143, v144);
LABEL_95:
            objc_msgSend_setBytes_length_atIndex_(v285, v199, a12 + 272, 32, 1, v200, v201, v202, v274);
            if ((*(a12 + 304) & 2) == 0)
            {
              objc_msgSend_setTexture_atIndex_(v285, v210, v292, 2 * v115, v213, v214, v215, v216);
LABEL_115:
              objc_msgSend_setBytes_length_atIndex_(v150, v217, a12 + 320, 32, 2, v218, v219, v220);
              if ((*(a12 + 200) & 2) == 0)
              {
                objc_msgSend_setTexture_atIndex_(v150, v228, v277, 0, v231, v232, v233, v234);
LABEL_134:
                objc_msgSend_setBytes_length_atIndex_(v150, v235, a12 + 216, 40, 0, v236, v237, v238);
                objc_msgSend_setBytes_length_atIndex_(v150, v246, v296, 80, 30, v247, v248, v249);
                Sampler = MPSDevice::GetSampler();
                objc_msgSend_setSamplerState_atIndex_(v150, v251, Sampler, 0, v252, v253, v254, v255);
                v256 = MPSDevice::GetSampler();
                objc_msgSend_setSamplerState_atIndex_(v150, v257, v256, 1, v258, v259, v260, v261);
                v267 = 4 * v287;
                if (!v291)
                {
                  v267 = 0;
                }

                objc_msgSend_setThreadgroupMemoryLength_atIndex_(v150, v262, v267 + 16 * v275, 0, v263, v264, v265, v266);
                v312.origin.x = v289;
                *&v312.origin.y = v293;
                v294 = v275;
                v295 = vdupq_n_s64(1uLL);
                objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(v150, v268, &v312, &v294, v269, v270, v271, v272);
                return 0;
              }

              v239 = *(a12 + 208);
              v240 = objc_msgSend_count(v239, v228, v229, v230, v231, v232, v233, v234);
              v324 = 0u;
              v325 = 0u;
              v322 = 0u;
              v323 = 0u;
              v320 = 0u;
              v321 = 0u;
              v318 = 0u;
              v319 = 0u;
              v316 = 0u;
              v317 = 0u;
              v314 = 0u;
              v315 = 0u;
              v313 = 0u;
              memset(&v312, 0, sizeof(v312));
              if (!v115)
              {
                goto LABEL_134;
              }

              v241 = v240;
              v242 = 0;
              while (1)
              {
                if (v241 <= v242)
                {
                  v243 = 0;
                  if (v115 - v242 >= 0x20)
                  {
                    v244 = 32;
                  }

                  else
                  {
                    v244 = v115 - v242;
                  }

                  v245 = v244;
                  if (!v244)
                  {
                    goto LABEL_119;
                  }
                }

                else
                {
                  if (v241 - v242 >= 0x20)
                  {
                    v243 = 32;
                    objc_msgSend_getObjects_range_(v239, v235, &v312, v242, 32, v236, v237, v238);
                  }

                  else
                  {
                    v243 = v241 - v242;
                    objc_msgSend_getObjects_range_(v239, v235, &v312, v242, v241 - v242, v236, v237, v238);
                  }

                  if (v115 - v242 >= 0x20)
                  {
                    v244 = 32;
                  }

                  else
                  {
                    v244 = v115 - v242;
                  }

                  v245 = v244 - v243;
                  if (v244 == v243)
                  {
                    goto LABEL_119;
                  }
                }

                bzero(&v312.origin.x + v243, 8 * v245);
LABEL_119:
                objc_msgSend_setTextures_withRange_(v150, v235, &v312, v242, v244, v236, v237, v238);
                v242 += v244;
                if (v242 >= v115)
                {
                  goto LABEL_134;
                }
              }
            }

            v221 = *(a12 + 312);
            v222 = objc_msgSend_count(v221, v210, v211, v212, v213, v214, v215, v216);
            v324 = 0u;
            v325 = 0u;
            v322 = 0u;
            v323 = 0u;
            v320 = 0u;
            v321 = 0u;
            v318 = 0u;
            v319 = 0u;
            v316 = 0u;
            v317 = 0u;
            v314 = 0u;
            v315 = 0u;
            v313 = 0u;
            memset(&v312, 0, sizeof(v312));
            if (!v115)
            {
LABEL_114:
              v150 = v285;
              goto LABEL_115;
            }

            v223 = v222;
            v224 = 0;
            while (1)
            {
              if (v223 <= v224)
              {
                v225 = 0;
                if (v115 - v224 >= 0x20)
                {
                  v226 = 32;
                }

                else
                {
                  v226 = v115 - v224;
                }

                v227 = v226;
                if (!v226)
                {
                  goto LABEL_99;
                }
              }

              else
              {
                if (v223 - v224 >= 0x20)
                {
                  v225 = 32;
                  objc_msgSend_getObjects_range_(v221, v217, &v312, v224, 32, v218, v219, v220);
                }

                else
                {
                  v225 = v223 - v224;
                  objc_msgSend_getObjects_range_(v221, v217, &v312, v224, v223 - v224, v218, v219, v220);
                }

                if (v115 - v224 >= 0x20)
                {
                  v226 = 32;
                }

                else
                {
                  v226 = v115 - v224;
                }

                v227 = v226 - v225;
                if (v226 == v225)
                {
                  goto LABEL_99;
                }
              }

              bzero(&v312.origin.x + v225, 8 * v227);
LABEL_99:
              objc_msgSend_setTextures_withRange_(v285, v217, &v312, v224 + 2 * v115, v226, v218, v219, v220);
              v224 += v226;
              if (v224 >= v115)
              {
                goto LABEL_114;
              }
            }
          }

          v203 = *(a12 + 264);
          v204 = objc_msgSend_count(v203, v138, v139, v140, v141, v142, v143, v144);
          v324 = 0u;
          v325 = 0u;
          v322 = 0u;
          v323 = 0u;
          v320 = 0u;
          v321 = 0u;
          v318 = 0u;
          v319 = 0u;
          v316 = 0u;
          v317 = 0u;
          v314 = 0u;
          v315 = 0u;
          v313 = 0u;
          memset(&v312, 0, sizeof(v312));
          if (!v115)
          {
            goto LABEL_95;
          }

          v205 = v204;
          v206 = 0;
          while (1)
          {
            if (v205 <= v206)
            {
              v207 = 0;
              if (v115 - v206 >= 0x20)
              {
                v208 = 32;
              }

              else
              {
                v208 = v115 - v206;
              }

              v209 = v208;
              if (!v208)
              {
                goto LABEL_80;
              }
            }

            else
            {
              if (v205 - v206 >= 0x20)
              {
                v207 = 32;
                objc_msgSend_getObjects_range_(v203, v199, &v312, v206, 32, v200, v201, v202, v274);
              }

              else
              {
                v207 = v205 - v206;
                objc_msgSend_getObjects_range_(v203, v199, &v312, v206, v205 - v206, v200, v201, v202, v274);
              }

              if (v115 - v206 >= 0x20)
              {
                v208 = 32;
              }

              else
              {
                v208 = v115 - v206;
              }

              v209 = v208 - v207;
              if (v208 == v207)
              {
                goto LABEL_80;
              }
            }

            bzero(&v312.origin.x + v207, 8 * v209);
LABEL_80:
            objc_msgSend_setTextures_withRange_(v285, v199, &v312, v206 + v115, v208, v200, v201, v202, v274);
            v206 += v208;
            if (v206 >= v115)
            {
              goto LABEL_95;
            }
          }
        }
      }
    }
  }

  return v49;
}

id sub_239D2668C(void *a1, const char *a2, uint64_t a3, Class *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v38 = 0;
  v12 = objc_msgSend_decodeBytesForKey_returnedLength_(a1, a2, a2, &v38, a5, a6, a7, a8);
  if (v38)
  {
    v13 = v12 == 0;
  }

  else
  {
    v13 = 1;
  }

  if (!v13)
  {
    v14 = v12;
    v15 = objc_alloc(MEMORY[0x277CCACA8]);
    v20 = objc_msgSend_initWithBytes_length_encoding_(v15, v16, v14, v38 - 1, 1, v17, v18, v19);
    v21 = v20;
    if (v20)
    {
      v22 = NSClassFromString(v20);
      if (v22)
      {
        v29 = v22;
        if (!a4 || (v30 = NSStringFromClass(*a4), objc_msgSend_isEqual_(v30, v31, v20, v32, v33, v34, v35, v36)))
        {
          if (!a5 || objc_msgSend_conformsToProtocol_(v29, v23, a5, v24, v25, v26, v27, v28))
          {
            return objc_msgSend_decodeObjectOfClass_forKey_(a1, v23, v29, a3, v25, v26, v27, v28);
          }
        }
      }

      else if (MTLReportFailureTypeEnabled())
      {
        MTLReportFailure();
      }
    }
  }

  return 0;
}

void sub_239D29B10(_Unwind_Exception *exception_object, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, a2, a3, a4, a5, a6, a7, a8);
  }

  _Unwind_Resume(exception_object);
}

MPSImage *sub_239D29B30(uint64_t a1, const char *a2, MPSImage *a3, uint64_t a4, unint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v10 = a3;
  if (a4)
  {
    if ((a4 & 3) != 0)
    {
      context = objc_autoreleasePoolPush();
      v12 = [MPSNNSlice alloc];
      v19 = objc_msgSend_initWithDevice_(v12, v13, (*(&v10->super.isa + *MEMORY[0x277CD72E8]))[2], v14, v15, v16, v17, v18);
      v20 = *(&v10->super.isa + *MEMORY[0x277CD72F0]);
      v21 = *(&v10->super.isa + *MEMORY[0x277CD7330]);
      v22 = MEMORY[0x277CD7220];
      v23 = MEMORY[0x277CD7308];
      v24 = *(&v10->super.isa + *MEMORY[0x277CD7308]);
      v32 = objc_msgSend_numberOfImages(v10, v25, v26, v27, v28, v29, v30, v31);
      v34 = objc_msgSend_imageDescriptorWithChannelFormat_width_height_featureChannels_numberOfImages_usage_(v22, v33, v20, v21, v24, a5, v32, 19);
      v40 = objc_msgSend_temporaryImageWithCommandBuffer_imageDescriptor_(MEMORY[0x277CD72A8], v35, a1, v34, v36, v37, v38, v39);
      v90 = 0u;
      v91 = 0u;
      v94 = 0;
      v93 = 0u;
      v92 = 0u;
      v41 = MEMORY[0x277CD7318];
      v42 = v10 + *MEMORY[0x277CD7318];
      v43 = MEMORY[0x277CD72F8];
      v44 = *(&v10->super.isa + *MEMORY[0x277CD72F8]);
      v45 = MEMORY[0x277CD7328];
      v89[0] = v10;
      v89[1] = v42;
      v46 = *(&v10->super.isa + *MEMORY[0x277CD7328]);
      *(&v90 + 1) = v44;
      *&v91 = v46;
      v54 = objc_msgSend_texture(v10, v47, v48, v49, v50, v51, v52, v53);
      v55 = MEMORY[0x277CD7300];
      v56 = *(&v10->super.isa + *MEMORY[0x277CD7300]);
      *(&v91 + 1) = v54;
      v92 = v56;
      *&v93 = v40;
      *(&v93 + 1) = &v40[*v41];
      v57 = *&v40[*v45];
      v95 = *&v40[*v43];
      v96 = v57;
      v65 = objc_msgSend_texture(v40, v58, v59, v60, v61, v62, v63, v64);
      v71 = a2;
      v72 = 0;
      v73 = *&v40[*v55];
      v97 = v65;
      v98 = v73;
      v100 = 0;
      v101 = 0;
      v99 = 0;
      v102 = *&v40[*MEMORY[0x277CD7330]];
      v103 = *&v40[*v23];
      v74 = *&v40[*MEMORY[0x277CD7310]];
      v105 = 0u;
      v106 = 0u;
      v104 = v74;
      v107 = a4;
      v108 = xmmword_239D7E290;
      if ((*(v19 + *MEMORY[0x277CD7378]) & 8) != 0)
      {
        v84 = *(v19 + *MEMORY[0x277CD7360]);
        if (!v84)
        {
          v85 = objc_opt_class();
          v86 = NSStringFromClass(v85);
          v71 = a2;
          v84 = v86;
        }

        objc_msgSend_pushDebugGroup_(v71, v71, v84, v66, v67, v68, v69, v70);
        v71 = a2;
        v72 = a2;
      }

      (*(v19 + 288))(*(v19 + 304), v71, a1, v89);
      if (v72)
      {
        objc_msgSend_popDebugGroup(v72, v75, v76, v77, v78, v79, v80, v81);
      }

      objc_autoreleasePoolPop(context);
      v82 = 0;
      goto LABEL_9;
    }

LABEL_8:
    v82 = objc_msgSend_subImageWithFeatureChannelRange_(a3, a2, a4, a5, a5, a6, a7, a8);
LABEL_9:
    MPSDecrementReadCount(v10);
    return v82;
  }

  if (a5 < *(&a3->super.isa + *MEMORY[0x277CD72F8]))
  {
    goto LABEL_8;
  }

  return v10;
}

void sub_239D29E20(_Unwind_Exception *exception_object, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, a2, a3, a4, a5, a6, a7, a8);
  }

  _Unwind_Resume(exception_object);
}

void sub_239D2A7B4(_Unwind_Exception *a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, ...)
{
  va_start(va, a21);
  sub_239BACD2C(va, a2, a3, a4, a5, a6, a7, a8);
  _Unwind_Resume(a1);
}

void sub_239D2BA20(_Unwind_Exception *exception_object, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, a2, a3, a4, a5, a6, a7, a8);
  }

  _Unwind_Resume(exception_object);
}

void *sub_239D2BA48(void *a1, char *a2, uint64_t a3, unint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v13 = objc_msgSend_count(a1, a2, a3, a4, a5, a6, a7, a8);
  if (v13 >= a4)
  {
    v20 = a4;
  }

  else
  {
    v20 = v13;
  }

  if (!v20)
  {
    return 0;
  }

  v134 = a5;
  v21 = objc_msgSend_objectAtIndexedSubscript_(a1, v14, 0, v15, v16, v17, v18, v19);
  v29 = objc_msgSend_featureChannels(v21, v22, v23, v24, v25, v26, v27, v28);
  v37 = objc_msgSend_retainedReferences(a2, v30, v31, v32, v33, v34, v35, v36);
  v38 = objc_alloc(MEMORY[0x277CBEB18]);
  v45 = objc_msgSend_initWithCapacity_(v38, v39, v20, v40, v41, v42, v43, v44);
  if (v29 < 5)
  {
    v46 = 2;
  }

  else
  {
    v46 = 3;
  }

  context = objc_autoreleasePoolPush();
  for (i = 0; i != v20; ++i)
  {
    v54 = objc_msgSend_objectAtIndexedSubscript_(a1, v47, a3 + i, v48, v49, v50, v51, v52);
    v62 = objc_msgSend_texture(v54, v55, v56, v57, v58, v59, v60, v61);
    if (objc_msgSend_textureType(v62, v63, v64, v65, v66, v67, v68, v69) == v46)
    {
      v71 = 1;
      if (!v62)
      {
        goto LABEL_13;
      }

LABEL_12:
      objc_msgSend_setObject_atIndexedSubscript_(v45, v47, v62, i, v49, v50, v51, v52);
      goto LABEL_13;
    }

    v72 = objc_msgSend_pixelFormat(v62, v47, v70, v48, v49, v50, v51, v52);
    v74 = objc_msgSend_newTextureViewWithPixelFormat_textureType_levels_slices_(v62, v73, v72, v46, 0, 1, 0, 1);
    v71 = v74 == 0;
    if (v74)
    {
      v62 = v74;
    }

    if (v62)
    {
      goto LABEL_12;
    }

LABEL_13:
    if (!v71)
    {
    }
  }

  if ((v37 & 1) == 0)
  {
    v75 = v45;
    v135[0] = MEMORY[0x277D85DD0];
    v135[1] = 3221225472;
    v135[2] = sub_239D2DF2C;
    v135[3] = &unk_278B28F28;
    v135[4] = v45;
    objc_msgSend_addCompletedHandler_(a2, v76, v135, v77, v78, v79, v80, v81);
  }

  objc_autoreleasePoolPop(context);
  if (v134)
  {
    v88 = objc_msgSend_objectAtIndexedSubscript_(a1, v82, 0, v83, v84, v85, v86, v87);
    v96 = objc_msgSend_featureChannelFormat(v88, v89, v90, v91, v92, v93, v94, v95);
    v103 = objc_msgSend_objectAtIndexedSubscript_(v45, v97, 0, v98, v99, v100, v101, v102);
    v111 = objc_msgSend_textureType(v103, v104, v105, v106, v107, v108, v109, v110);
    if (v96 - 1 > 4)
    {
      v119 = 0;
    }

    else
    {
      v119 = dword_239D91650[v96 - 1];
    }

    if (v111 == 3)
    {
      v120 = v119 + 1;
    }

    else
    {
      v120 = v119;
    }

    objc_msgSend_device(v103, v112, v113, v114, v115, v116, v117, v118);
    MPSDevice = MPSDevice::GetMPSDevice();
    v129 = objc_msgSend_pixelFormat(v103, v122, v123, v124, v125, v126, v127, v128);
    PixelInfo = MPSDevice::GetPixelInfo(MPSDevice, v129, v96);
    v131 = v120 | 4;
    if ((PixelInfo & 0x3000000) == 0)
    {
      v131 = v120;
    }

    *v134 = v131 | 2;
  }

  return v45;
}

uint64_t sub_239D2DEF0(uint64_t a1, void *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v9 = objc_msgSend_userDictionary(a2, a2, a3, a4, a5, a6, a7, a8);
  v15 = *(a1 + 32);

  return MEMORY[0x2821F9670](v9, sel_removeObjectForKey_, v15, v10, v11, v12, v13, v14);
}

uint64_t sub_239D2E29C(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNPoolingMax alloc];
  v8 = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[9], v4[10], v7);
  *(a1 + 104) = v8;

  return objc_msgSend_setEdgeMode_(v8, v9, 1, v10, v11, v12, v13, v14);
}

BOOL sub_239D2E318(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = *(a1 + 104);
  if (v8)
  {
    if (objc_msgSend_kernelWidth(*(a1 + 104), a2, a3, a4, a5, a6, a7, a8) == 1 && objc_msgSend_kernelHeight(v8, v9, v10, v11, v12, v13, v14, v15) == 1 && objc_msgSend_strideInPixelsX(v8, v16, v17, v18, v19, v20, v21, v22) == 1)
    {
      return objc_msgSend_strideInPixelsY(v8, v23, v24, v25, v26, v27, v28, v29) == 1;
    }
  }

  else
  {
    v31 = *(a1 + 112);
    if (v31[7] == 1 && v31[8] == 1 && v31[9] == 1)
    {
      return v31[10] == 1;
    }
  }

  return 0;
}

uint64_t sub_239D2E480(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNPoolingAverage alloc];
  v8 = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[9], v4[10], v7);
  *(a1 + 104) = v8;

  return objc_msgSend_setEdgeMode_(v8, v9, 1, v10, v11, v12, v13, v14);
}

BOOL sub_239D2E4FC(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = *(a1 + 104);
  if (v8)
  {
    if (objc_msgSend_kernelWidth(*(a1 + 104), a2, a3, a4, a5, a6, a7, a8) == 1 && objc_msgSend_kernelHeight(v8, v9, v10, v11, v12, v13, v14, v15) == 1 && objc_msgSend_strideInPixelsX(v8, v16, v17, v18, v19, v20, v21, v22) == 1)
    {
      return objc_msgSend_strideInPixelsY(v8, v23, v24, v25, v26, v27, v28, v29) == 1;
    }
  }

  else
  {
    v31 = *(a1 + 112);
    if (v31[7] == 1 && v31[8] == 1 && v31[9] == 1)
    {
      return v31[10] == 1;
    }
  }

  return 0;
}

uint64_t sub_239D2E664(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNPoolingL2Norm alloc];
  v8 = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[9], v4[10], v7);
  *(a1 + 104) = v8;

  return objc_msgSend_setEdgeMode_(v8, v9, 1, v10, v11, v12, v13, v14);
}

uint64_t sub_239D2EA2C(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNDilatedPoolingMax alloc];
  result = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_dilationRateX_dilationRateY_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[11], v4[12], v4[9], v4[10]);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D2EE2C(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNPoolingMaxGradient alloc];
  result = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[9], v4[10], v7);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D2EF1C(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNPoolingAverageGradient alloc];
  result = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[9], v4[10], v7);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D2F00C(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNPoolingL2NormGradient alloc];
  result = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[9], v4[10], v7);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D2F30C(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNDilatedPoolingMaxGradient alloc];
  result = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_dilationRateX_dilationRateY_strideInPixelsX_strideInPixelsY_(v5, v6, a2, v4[7], v4[8], v4[11], v4[12], v4[9], v4[10]);
  *(a1 + 104) = result;
  return result;
}

void sub_239D2F390(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

void sub_239D2F3DC(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

void sub_239D2F428(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

void sub_239D2F474(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

void sub_239D2F4B8(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

void sub_239D2F504(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

void sub_239D2F550(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

void sub_239D2F59C(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

uint64_t sub_239D30C70(uint64_t a1, uint64_t a2)
{
  v3 = MPSCreateFunctionConstantValues();
  v8 = v3;
  v12 = 1;
  v9 = *(a2 + 64);
  if ((v9 & 2) == 0)
  {
    if ((v9 & 4) == 0)
    {
      goto LABEL_3;
    }

LABEL_7:
    objc_msgSend_setConstantValue_type_atIndex_(v8, v4, &v12, 53, 2, v5, v6, v7);
    if ((*(a2 + 64) & 0x10) == 0)
    {
      goto LABEL_5;
    }

    goto LABEL_4;
  }

  objc_msgSend_setConstantValue_type_atIndex_(v3, v4, &v12, 53, 1, v5, v6, v7);
  v9 = *(a2 + 64);
  if ((v9 & 4) != 0)
  {
    goto LABEL_7;
  }

LABEL_3:
  if ((v9 & 0x10) != 0)
  {
LABEL_4:
    objc_msgSend_setConstantValue_type_atIndex_(v8, v4, &v12, 53, 4, v5, v6, v7);
  }

LABEL_5:
  v10 = _MPSNewSpecializedFunction();

  return v10;
}

void sub_239D31A0C(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D31B78(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D31CE4(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D31E50(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D31FBC(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D32128(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D32294(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D32400(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D3256C(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D33844(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D339B0(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D33B1C(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D33C88(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D33DF4(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D35394(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v2);
  MEMORY[0x23EE7D130](v4, v1);
  _Unwind_Resume(a1);
}

void sub_239D3549C(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D35E7C(_Unwind_Exception *a1)
{
  v4 = sub_239C14794(v2);
  MEMORY[0x23EE7D130](v4, v1);
  _Unwind_Resume(a1);
}

void sub_239D35E98(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v2);
  MEMORY[0x23EE7D130](v4, v1);
  _Unwind_Resume(a1);
}

void sub_239D36030(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

void sub_239D362DC(_Unwind_Exception *a1)
{
  v4 = sub_239C13FBC(v1);
  MEMORY[0x23EE7D130](v4, v2);
  _Unwind_Resume(a1);
}

uint64_t sub_239D38B10(uint64_t a1, unsigned __int16 *a2, unint64_t a3)
{
  if (a3 < 2)
  {
    return 0;
  }

  v3 = bswap32(*a2) >> 16;
  if (v3 > 0x64)
  {
    return 0;
  }

  else
  {
    return (*(qword_278B35DF8[3 * v3 + 1] + 16))();
  }
}

uint64_t sub_239D38CD0(void *a1)
{
  v2 = (*(*a1 + 240))(a1);
  v3 = v2;
  v4 = a1[13];
  v5 = MEMORY[0x277CD7378];
  if (v4 && (*(v4 + *MEMORY[0x277CD7378]) & 1) == 0 && (v2 - 1) >= 0x64 && MTLReportFailureTypeEnabled())
  {
    MTLReportFailure();
  }

  v6 = (*(qword_278B35DF8[3 * v3 + 2] + 16))();
  v7 = v6;
  v8 = a1[13];
  if (v8)
  {
    if ((*(v8 + *v5) & 1) == 0)
    {
      (*(*v6 + 240))(v6);
      if (v3 != (*(*v7 + 240))(v7))
      {
        if (MTLReportFailureTypeEnabled())
        {
          (*(*v7 + 240))(v7);
          MTLReportFailure();
        }
      }
    }
  }

  return v7;
}

uint64_t sub_239D38E78(void *a1)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  return 0;
}

__n128 sub_239D38E9C@<Q0>(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  v2 = *(a1 + 80);
  *(a2 + 64) = *(a1 + 64);
  *(a2 + 80) = v2;
  *(a2 + 96) = *(a1 + 96);
  v3 = *(a1 + 16);
  *a2 = *a1;
  *(a2 + 16) = v3;
  result = *(a1 + 48);
  *(a2 + 32) = *(a1 + 32);
  *(a2 + 48) = result;
  return result;
}

__n128 sub_239D39020@<Q0>(uint64_t a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X2>, uint64_t a4@<X3>, int a5@<W4>, int a6@<W5>, _OWORD *a7@<X8>)
{
  if (a6)
  {
    v7 = *(a1 + 96);
    if (v7)
    {
      v8 = *(a1 + 104);
      if (!v8)
      {
LABEL_4:
        v9 = 0;
        goto LABEL_5;
      }
    }

    else
    {
      v17 = 64;
      if (a5)
      {
        v17 = 80;
      }

      v7 = *(a1 + v17);
      v8 = *(a1 + 104);
      if (!v8)
      {
        goto LABEL_4;
      }
    }
  }

  else
  {
    v15 = 64;
    if (a5)
    {
      v15 = 80;
    }

    v16 = 72;
    if (a5)
    {
      v16 = 88;
    }

    v7 = *(a1 + v15);
    v8 = *(a1 + v16);
    if (!v8)
    {
      goto LABEL_4;
    }
  }

  v9 = 0;
  v18 = 0;
  v19 = (a3 + 1) >> 1;
  v20 = (a4 + 1) >> 1;
  v21 = (v7 + 92);
  v22 = 0.0;
  do
  {
    v25 = *(v21 - 13);
    if (*v21)
    {
      v23 = 4 * (v20 * v19 - 1 + v25) / v25 * v25;
    }

    else
    {
      v23 = (a4 - 1 + *(v21 - 11)) / *(v21 - 11) * *(v21 - 11) * (a3 - 1 + v25) / v25 * v25;
    }

    v24 = (4 * a2 * v19 * v20) / (v23 * ((a2 - 1 + *(v21 - 5)) / *(v21 - 5) * *(v21 - 5)));
    if ((*(v21 - 1) * v24) > v22)
    {
      v22 = *(v21 - 1) * v24;
      v9 = v18;
    }

    ++v18;
    v21 += 24;
  }

  while (v8 != v18);
LABEL_5:
  v10 = v7 + 96 * v9;
  v11 = *(v10 + 48);
  a7[2] = *(v10 + 32);
  a7[3] = v11;
  v12 = *(v10 + 80);
  a7[4] = *(v10 + 64);
  a7[5] = v12;
  result = *v10;
  v14 = *(v10 + 16);
  *a7 = *v10;
  a7[1] = v14;
  return result;
}

_WORD *sub_239D391C4(uint64_t a1, _WORD *a2, unsigned __int16 *a3)
{
  v5 = (*(*a1 + 264))(a1);

  return sub_239C1A5B8(a2, a3, v5);
}

uint64_t sub_239D39230(uint64_t a1, uint64_t a2, void *a3, void *a4, uint64_t a5)
{
  v8 = *a2;
  v9 = *(a2 + 8);
  v10 = *(a2 + 32);
  v11 = *(a2 + 40);
  v12 = *(a2 + 56);
  v13 = *(a2 + 168);
  v14 = *(a2 + 128);
  if (v14 == -1)
  {
    v15 = 268435472;
  }

  else
  {
    v15 = 8;
  }

  BYTE4(v144) = v13 != 0;
  LODWORD(v144) = v15;
  if ((*(*a1 + 272))(a1, v8, v9, *(a2 + 16), *(a2 + 24), *(a2 + 64), *(a2 + 72), v10))
  {
    v162 = *(a5 + 24);
    v161 = *(a5 + 200);
    v163 = *(a5 + 184);
    v23 = objc_msgSend_numberOfImages(*a5, v16, v17, v18, v19, v20, v21, v22);
    v24 = vmovn_s64(*(a5 + 120));
    v25 = v24.i16[2];
    LOWORD(v26) = v24.i16[0];
    v27 = vmovn_s64(*(a5 + 144));
    HIDWORD(v28) = 65537;
    LOWORD(v28) = v27.i16[0];
    v164 = v23;
    HIWORD(v26) = v25;
    v156 = *(a5 + 88);
    WORD1(v28) = v27.i16[2];
    v154 = v26;
    v155 = v28;
    v157 = objc_msgSend_numberOfImages(*(a5 + 64), v29, v30, v31, v32, v33, v34, v35);
    v158 = objc_msgSend_numberOfImages(*a5, v36, v37, v38, v39, v40, v41, v42);
    v159 = 0x10000;
    v43 = *(a5 + 168);
    v153 = *(a5 + 184);
    v44 = *(a5 + 136);
    v149 = *(a5 + 120);
    v150 = v44;
    v151 = *(a5 + 152);
    v152 = v43;
    v45 = *(a5 + 16);
    v46 = *(a5 + 80);
    v54 = objc_msgSend_featureChannelFormat(*a5, v47, v48, v49, v50, v51, v52, v53);
    v62 = objc_msgSend_featureChannelFormat(*(a5 + 64), v55, v56, v57, v58, v59, v60, v61);
    return (*(*a1 + 280))(a1, a2, a3, a4, &v152, &v149, v45, v46, v54, v62, *(a5 + 8), *(a5 + 72), *(a5 + 200), *(a5 + 192), *(a5 + 184), *(a5 + 136), *(a5 + 160), v160, &v154, *(a5 + 40), *(a5 + 104));
  }

  if (qword_27DF882B8 == -1)
  {
    if (v13)
    {
      goto LABEL_14;
    }
  }

  else
  {
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    if (v13)
    {
      goto LABEL_14;
    }
  }

  if (v12 == 1 && v14 == -1 && v10 >= 4 && v9 * v8 * v10 >= 0x100 && v11 >= 0x20 && (byte_27DF882A9 & 1) == 0)
  {
    v162 = *(a5 + 24);
    v161 = *(a5 + 200);
    v163 = *(a5 + 184);
    v104 = objc_msgSend_numberOfImages(*a5, v16, v17, v18, v19, v20, v21, v22);
    v105 = vmovn_s64(*(a5 + 120));
    v106 = v105.i16[2];
    LOWORD(v107) = v105.i16[0];
    v108 = vmovn_s64(*(a5 + 144));
    HIDWORD(v109) = 65537;
    LOWORD(v109) = v108.i16[0];
    v164 = v104;
    HIWORD(v107) = v106;
    v156 = *(a5 + 88);
    WORD1(v109) = v108.i16[2];
    v154 = v107;
    v155 = v109;
    v157 = objc_msgSend_numberOfImages(*(a5 + 64), v110, v111, v112, v113, v114, v115, v116);
    v158 = objc_msgSend_numberOfImages(*a5, v117, v118, v119, v120, v121, v122, v123);
    v159 = 0x10000;
    v124 = *(a5 + 168);
    v153 = *(a5 + 184);
    v125 = *(a5 + 136);
    v149 = *(a5 + 120);
    v150 = v125;
    v151 = *(a5 + 152);
    v152 = v124;
    v126 = *(a5 + 16);
    v127 = *(a5 + 80);
    v135 = objc_msgSend_featureChannelFormat(*a5, v128, v129, v130, v131, v132, v133, v134);
    v143 = objc_msgSend_featureChannelFormat(*(a5 + 64), v136, v137, v138, v139, v140, v141, v142);
    return (*(*a1 + 288))(a1, a2, a3, a4, &v152, &v149, v126, v127, v135, v143, *(a5 + 8), *(a5 + 72), *(a5 + 200), *(a5 + 192), *(a5 + 184), *(a5 + 136), *(a5 + 160), v160, &v154, *(a5 + 40), *(a5 + 104));
  }

LABEL_14:
  v162 = *(a5 + 24);
  v161 = *(a5 + 200);
  v163 = *(a5 + 184);
  v64 = objc_msgSend_numberOfImages(*a5, v16, v17, v18, v19, v20, v21, v22);
  v65 = vmovn_s64(*(a5 + 120));
  v66 = v65.i16[2];
  LOWORD(v67) = v65.i16[0];
  v68 = vmovn_s64(*(a5 + 144));
  HIDWORD(v69) = 65537;
  LOWORD(v69) = v68.i16[0];
  v164 = v64;
  HIWORD(v67) = v66;
  v156 = *(a5 + 88);
  WORD1(v69) = v68.i16[2];
  v154 = v67;
  v155 = v69;
  v157 = objc_msgSend_numberOfImages(*(a5 + 64), v70, v71, v72, v73, v74, v75, v76);
  v158 = objc_msgSend_numberOfImages(*a5, v77, v78, v79, v80, v81, v82, v83);
  v159 = 0x10000;
  v84 = *(a5 + 168);
  v153 = *(a5 + 184);
  v85 = *(a5 + 136);
  v149 = *(a5 + 120);
  v150 = v85;
  v151 = *(a5 + 152);
  v152 = v84;
  v86 = *(a5 + 16);
  v87 = *(a5 + 80);
  v95 = objc_msgSend_featureChannelFormat(*a5, v88, v89, v90, v91, v92, v93, v94);
  objc_msgSend_featureChannelFormat(*(a5 + 64), v96, v97, v98, v99, v100, v101, v102);
  return sub_239C21F2C(a2, a3, a4, &v152, &v149, v86, v87, v95, v103, v11, *(a5 + 8), v144, *(a5 + 200), *(a5 + 192), v145, v146, *(a5 + 160), v160, &v154, *(a5 + 40), *(a5 + 104));
}

uint64_t sub_239D3972C(uint64_t a1, uint64_t a2, void *a3, void *a4, uint64_t a5)
{
  v8 = *a2;
  v9 = *(a2 + 8);
  v10 = *(a2 + 32);
  v11 = *(a2 + 40);
  v12 = *(a2 + 56);
  v13 = *(a2 + 168);
  v14 = *(a2 + 128);
  if (v14 == -1)
  {
    v15 = 268435472;
  }

  else
  {
    v15 = 8;
  }

  BYTE4(v147) = v13 != 0;
  LODWORD(v147) = v15;
  if ((*(*a1 + 272))(a1, v8, v9, *(a2 + 16), *(a2 + 24), *(a2 + 64), *(a2 + 72), v10))
  {
    v165 = *(a5 + 24);
    v164 = *(a5 + 312);
    v166 = *(a5 + 240);
    v23 = objc_msgSend_numberOfImages(*a5, v16, v17, v18, v19, v20, v21, v22);
    v24 = vmovn_s64(*(a5 + 176));
    v25 = v24.i16[2];
    LOWORD(v26) = v24.i16[0];
    v27 = vmovn_s64(*(a5 + 200));
    HIDWORD(v28) = 65537;
    LOWORD(v28) = v27.i16[0];
    v167 = v23;
    HIWORD(v26) = v25;
    v159 = *(a5 + 144);
    WORD1(v28) = v27.i16[2];
    v157 = v26;
    v158 = v28;
    v160 = objc_msgSend_numberOfImages(*(a5 + 120), v29, v30, v31, v32, v33, v34, v35);
    v43 = objc_msgSend_numberOfImages(*a5, v36, v37, v38, v39, v40, v41, v42);
    v44 = *(a5 + 224);
    v154 = *(a5 + 208);
    v155 = v44;
    v45 = *(a5 + 192);
    v152 = *(a5 + 176);
    v153 = v45;
    v161 = v43;
    v162 = 0x10000;
    v156 = *(a5 + 240);
    v46 = *(a5 + 16);
    v47 = *(a5 + 136);
    v55 = objc_msgSend_featureChannelFormat(*a5, v48, v49, v50, v51, v52, v53, v54);
    v63 = objc_msgSend_featureChannelFormat(*(a5 + 120), v56, v57, v58, v59, v60, v61, v62);
    return (*(*a1 + 280))(a1, a2, a3, a4, &v155, &v152, v46, v47, v55, v63, *(a5 + 8), *(a5 + 128), *(a5 + 312), *(a5 + 304), *(a5 + 240), *(a5 + 192), *(a5 + 216), v163, &v157, *(a5 + 40), *(a5 + 160));
  }

  if (qword_27DF882B8 == -1)
  {
    if (v13)
    {
      goto LABEL_14;
    }
  }

  else
  {
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    if (v13)
    {
      goto LABEL_14;
    }
  }

  if (v12 == 1 && v14 == -1 && v10 >= 4 && v9 * v8 * v10 >= 0x100 && v11 >= 0x20 && (byte_27DF882A9 & 1) == 0)
  {
    v165 = *(a5 + 24);
    v164 = *(a5 + 312);
    v166 = *(a5 + 240);
    v106 = objc_msgSend_numberOfImages(*a5, v16, v17, v18, v19, v20, v21, v22);
    v107 = vmovn_s64(*(a5 + 176));
    v108 = v107.i16[2];
    LOWORD(v109) = v107.i16[0];
    v110 = vmovn_s64(*(a5 + 200));
    HIDWORD(v111) = 65537;
    LOWORD(v111) = v110.i16[0];
    v167 = v106;
    HIWORD(v109) = v108;
    v159 = *(a5 + 144);
    WORD1(v111) = v110.i16[2];
    v157 = v109;
    v158 = v111;
    v160 = objc_msgSend_numberOfImages(*(a5 + 120), v112, v113, v114, v115, v116, v117, v118);
    v126 = objc_msgSend_numberOfImages(*a5, v119, v120, v121, v122, v123, v124, v125);
    v127 = *(a5 + 224);
    v154 = *(a5 + 208);
    v155 = v127;
    v128 = *(a5 + 192);
    v152 = *(a5 + 176);
    v153 = v128;
    v161 = v126;
    v162 = 0x10000;
    v156 = *(a5 + 240);
    v129 = *(a5 + 16);
    v130 = *(a5 + 136);
    v138 = objc_msgSend_featureChannelFormat(*a5, v131, v132, v133, v134, v135, v136, v137);
    v146 = objc_msgSend_featureChannelFormat(*(a5 + 120), v139, v140, v141, v142, v143, v144, v145);
    return (*(*a1 + 288))(a1, a2, a3, a4, &v155, &v152, v129, v130, v138, v146, *(a5 + 8), *(a5 + 128), *(a5 + 312), *(a5 + 304), *(a5 + 240), *(a5 + 192), *(a5 + 216), v163, &v157, *(a5 + 40), *(a5 + 160));
  }

LABEL_14:
  v165 = *(a5 + 24);
  v164 = *(a5 + 312);
  v166 = *(a5 + 240);
  v65 = objc_msgSend_numberOfImages(*a5, v16, v17, v18, v19, v20, v21, v22);
  v66 = vmovn_s64(*(a5 + 176));
  v67 = v66.i16[2];
  LOWORD(v68) = v66.i16[0];
  v69 = vmovn_s64(*(a5 + 200));
  HIDWORD(v70) = 65537;
  LOWORD(v70) = v69.i16[0];
  v167 = v65;
  HIWORD(v68) = v67;
  v159 = *(a5 + 144);
  WORD1(v70) = v69.i16[2];
  v157 = v68;
  v158 = v70;
  v160 = objc_msgSend_numberOfImages(*(a5 + 120), v71, v72, v73, v74, v75, v76, v77);
  v85 = objc_msgSend_numberOfImages(*a5, v78, v79, v80, v81, v82, v83, v84);
  v86 = *(a5 + 224);
  v154 = *(a5 + 208);
  v155 = v86;
  v87 = *(a5 + 192);
  v152 = *(a5 + 176);
  v153 = v87;
  v161 = v85;
  v162 = 0x10000;
  v156 = *(a5 + 240);
  v88 = *(a5 + 16);
  v89 = *(a5 + 136);
  v97 = objc_msgSend_featureChannelFormat(*a5, v90, v91, v92, v93, v94, v95, v96);
  objc_msgSend_featureChannelFormat(*(a5 + 120), v98, v99, v100, v101, v102, v103, v104);
  return sub_239C21F2C(a2, a3, a4, &v155, &v152, v88, v89, v97, v105, v11, *(a5 + 8), v147, *(a5 + 312), *(a5 + 304), v148, v149, *(a5 + 216), v163, &v157, *(a5 + 40), *(a5 + 160));
}

uint64_t sub_239D39C10(uint64_t a1, uint64_t a2, void *a3, void *a4, uint64_t a5)
{
  v8 = *a2;
  v9 = *(a2 + 8);
  v10 = *(a2 + 32);
  v11 = *(a2 + 40);
  v12 = *(a2 + 56);
  v13 = *(a2 + 168);
  v14 = *(a2 + 128);
  if (v14 == -1)
  {
    v15 = 268435472;
  }

  else
  {
    v15 = 8;
  }

  BYTE4(v69) = v13 != 0;
  LODWORD(v69) = v15;
  if ((*(*a1 + 272))(a1, v8, v9, *(a2 + 16), *(a2 + 24), *(a2 + 64), *(a2 + 72), v10))
  {
    v23 = *(a5 + 120);
    v82 = *(a5 + 104);
    v83 = v23;
    v24 = *(a5 + 64);
    v79 = *(a5 + 48);
    v80 = v24;
    v81 = *(a5 + 80);
    v25 = *(a5 + 184);
    v78 = *(a5 + 200);
    v26 = *(a5 + 152);
    v74 = *(a5 + 136);
    v75 = v26;
    v76 = *(a5 + 168);
    v77 = v25;
    v27 = *(a5 + 88);
    v28 = *(a5 + 32);
    v29 = objc_msgSend_featureChannelFormat(**(a5 + 24), v16, v17, v18, v19, v20, v21, v22);
    v37 = objc_msgSend_featureChannelFormat(*(*(a5 + 24) + 56), v30, v31, v32, v33, v34, v35, v36);
    return (*(*a1 + 280))(a1, a2, a3, a4, &v77, &v74, v27, v28, v29, v37, *(*(a5 + 24) + 8), *(*(a5 + 24) + 64), *(a5 + 216), *(a5 + 208), *(a5 + 200), *(a5 + 152), *(a5 + 8), &v82, &v79, *(a5 + 96), *(a5 + 40));
  }

  if (qword_27DF882B8 == -1)
  {
    if (v13)
    {
      goto LABEL_14;
    }
  }

  else
  {
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    if (v13)
    {
      goto LABEL_14;
    }
  }

  if (v12 == 1 && v14 == -1 && v10 >= 4 && v9 * v8 * v10 >= 0x100 && v11 >= 0x20 && (byte_27DF882A9 & 1) == 0)
  {
    v54 = *(a5 + 120);
    v82 = *(a5 + 104);
    v83 = v54;
    v55 = *(a5 + 64);
    v79 = *(a5 + 48);
    v80 = v55;
    v81 = *(a5 + 80);
    v56 = *(a5 + 184);
    v78 = *(a5 + 200);
    v57 = *(a5 + 152);
    v74 = *(a5 + 136);
    v75 = v57;
    v76 = *(a5 + 168);
    v77 = v56;
    v58 = *(a5 + 88);
    v59 = *(a5 + 32);
    v60 = objc_msgSend_featureChannelFormat(**(a5 + 24), v16, v17, v18, v19, v20, v21, v22);
    v68 = objc_msgSend_featureChannelFormat(*(*(a5 + 24) + 56), v61, v62, v63, v64, v65, v66, v67);
    return (*(*a1 + 288))(a1, a2, a3, a4, &v77, &v74, v58, v59, v60, v68, *(*(a5 + 24) + 8), *(*(a5 + 24) + 64), *(a5 + 216), *(a5 + 208), *(a5 + 200), *(a5 + 152), *(a5 + 8), &v82, &v79, *(a5 + 96), *(a5 + 40));
  }

LABEL_14:
  v39 = *(a5 + 120);
  v82 = *(a5 + 104);
  v83 = v39;
  v40 = *(a5 + 64);
  v79 = *(a5 + 48);
  v80 = v40;
  v81 = *(a5 + 80);
  v41 = *(a5 + 184);
  v78 = *(a5 + 200);
  v42 = *(a5 + 152);
  v74 = *(a5 + 136);
  v75 = v42;
  v76 = *(a5 + 168);
  v77 = v41;
  v43 = *(a5 + 88);
  v44 = *(a5 + 32);
  v45 = objc_msgSend_featureChannelFormat(**(a5 + 24), v16, v17, v18, v19, v20, v21, v22);
  objc_msgSend_featureChannelFormat(*(*(a5 + 24) + 56), v46, v47, v48, v49, v50, v51, v52);
  return sub_239C21F2C(a2, a3, a4, &v77, &v74, v43, v44, v45, v53, v11, *(*(a5 + 24) + 8), v69, *(a5 + 216), *(a5 + 208), v70, v71, *(a5 + 8), &v82, &v79, *(a5 + 96), *(a5 + 40));
}

uint64_t sub_239D3A004(uint64_t a1, uint64_t a2, void *a3, void *a4, uint64_t a5)
{
  v8 = *a2;
  v9 = *(a2 + 8);
  v10 = *(a2 + 32);
  v11 = *(a2 + 40);
  v12 = *(a2 + 56);
  v13 = *(a2 + 168);
  v14 = *(a2 + 128);
  if (v14 == -1)
  {
    v15 = 268435472;
  }

  else
  {
    v15 = 8;
  }

  BYTE4(v69) = v13 != 0;
  LODWORD(v69) = v15;
  if ((*(*a1 + 272))(a1, v8, v9, *(a2 + 16), *(a2 + 24), *(a2 + 64), *(a2 + 72), v10))
  {
    v23 = *(a5 + 120);
    v82 = *(a5 + 104);
    v83 = v23;
    v24 = *(a5 + 64);
    v79 = *(a5 + 48);
    v80 = v24;
    v81 = *(a5 + 80);
    v25 = *(a5 + 232);
    v78 = *(a5 + 248);
    v26 = *(a5 + 200);
    v74 = *(a5 + 184);
    v75 = v26;
    v76 = *(a5 + 216);
    v77 = v25;
    v27 = *(a5 + 88);
    v28 = *(a5 + 32);
    v29 = objc_msgSend_featureChannelFormat(**(a5 + 24), v16, v17, v18, v19, v20, v21, v22);
    v37 = objc_msgSend_featureChannelFormat(*(*(a5 + 24) + 112), v30, v31, v32, v33, v34, v35, v36);
    return (*(*a1 + 280))(a1, a2, a3, a4, &v77, &v74, v27, v28, v29, v37, *(*(a5 + 24) + 8), *(*(a5 + 24) + 120), *(a5 + 288), *(a5 + 280), *(a5 + 248), *(a5 + 200), *(a5 + 8), &v82, &v79, *(a5 + 96), *(a5 + 40));
  }

  if (qword_27DF882B8 == -1)
  {
    if (v13)
    {
      goto LABEL_14;
    }
  }

  else
  {
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    if (v13)
    {
      goto LABEL_14;
    }
  }

  if (v12 == 1 && v14 == -1 && v10 >= 4 && v9 * v8 * v10 >= 0x100 && v11 >= 0x20 && (byte_27DF882A9 & 1) == 0)
  {
    v54 = *(a5 + 120);
    v82 = *(a5 + 104);
    v83 = v54;
    v55 = *(a5 + 64);
    v79 = *(a5 + 48);
    v80 = v55;
    v81 = *(a5 + 80);
    v56 = *(a5 + 232);
    v78 = *(a5 + 248);
    v57 = *(a5 + 200);
    v74 = *(a5 + 184);
    v75 = v57;
    v76 = *(a5 + 216);
    v77 = v56;
    v58 = *(a5 + 88);
    v59 = *(a5 + 32);
    v60 = objc_msgSend_featureChannelFormat(**(a5 + 24), v16, v17, v18, v19, v20, v21, v22);
    v68 = objc_msgSend_featureChannelFormat(*(*(a5 + 24) + 112), v61, v62, v63, v64, v65, v66, v67);
    return (*(*a1 + 288))(a1, a2, a3, a4, &v77, &v74, v58, v59, v60, v68, *(*(a5 + 24) + 8), *(*(a5 + 24) + 120), *(a5 + 288), *(a5 + 280), *(a5 + 248), *(a5 + 200), *(a5 + 8), &v82, &v79, *(a5 + 96), *(a5 + 40));
  }

LABEL_14:
  v39 = *(a5 + 120);
  v82 = *(a5 + 104);
  v83 = v39;
  v40 = *(a5 + 64);
  v79 = *(a5 + 48);
  v80 = v40;
  v81 = *(a5 + 80);
  v41 = *(a5 + 232);
  v78 = *(a5 + 248);
  v42 = *(a5 + 200);
  v74 = *(a5 + 184);
  v75 = v42;
  v76 = *(a5 + 216);
  v77 = v41;
  v43 = *(a5 + 88);
  v44 = *(a5 + 32);
  v45 = objc_msgSend_featureChannelFormat(**(a5 + 24), v16, v17, v18, v19, v20, v21, v22);
  objc_msgSend_featureChannelFormat(*(*(a5 + 24) + 112), v46, v47, v48, v49, v50, v51, v52);
  return sub_239C21F2C(a2, a3, a4, &v77, &v74, v43, v44, v45, v53, v11, *(*(a5 + 24) + 8), v69, *(a5 + 288), *(a5 + 280), v70, v71, *(a5 + 8), &v82, &v79, *(a5 + 96), *(a5 + 40));
}

uint64_t sub_239D3A3F8(__n128 a1, uint64_t a2, uint64_t *a3, void *a4, void *a5, void *a6, int64x2_t *a7, char a8, char a9, uint64_t a10, uint64_t a11, void *a12, uint64_t a13, unint64_t a14, uint64_t a15, __int16 a16, int a17, __int32 a18, uint64_t a19, _WORD *a20, uint64_t a21, void *a22, void *a23)
{
  v25 = a21;
  v26 = a15;
  v27 = a10;
  v269 = *MEMORY[0x277D85DE8];
  v212 = a3[2];
  v210 = a3[3];
  v28 = a3[5];
  v213 = a3[4];
  v211 = a3[8];
  v207 = a3[9];
  v208 = *a3;
  v215 = a3[6];
  v29 = a3[25];
  v205 = a3[24];
  v206 = a3[1];
  v217 = a3[14];
  v192 = a3[15];
  v193 = a3[13];
  v30 = *(a3 + 20);
  a1.n128_u64[0] = *(a3 + 84);
  v31 = *(a3 + 23);
  v32 = *(a3 + 184);
  v33 = a3[22];
  v34 = a3[18];
  if ((a3[19] & 1) == 0)
  {
    v35 = a3[7];
    v36 = *(a21 + 16);
    v37 = v28 / (v35 * v35);
    if (v37 + a15 > v36)
    {
      v200 = a3[18];
      v220 = a7;
      v164 = a3[25];
      v174 = *(a3 + 23);
      v180 = a1;
      v195 = *(a3 + 20);
      v158 = *(a3 + 184);
      v186 = a6;
      v140 = MTLReportFailureTypeEnabled();
      v27 = a10;
      LOWORD(v29) = v164;
      a6 = v186;
      v32 = v158;
      v30 = v195;
      v25 = a21;
      v31 = v174;
      a1 = v180;
      v26 = a15;
      a7 = v220;
      v34 = v200;
      if (v140)
      {
        MTLReportFailure();
        v27 = a10;
        LOWORD(v29) = v164;
        a6 = v186;
        v32 = v158;
        v30 = v195;
        v25 = a21;
        v31 = v174;
        a1 = v180;
        v26 = a15;
        a7 = v220;
        v34 = v200;
      }
    }

    if (v28 % (v35 * v35))
    {
      v198 = v25;
      v201 = v34;
      v221 = a7;
      v165 = v29;
      v170 = v26;
      v175 = v31;
      v181 = a1;
      v196 = v30;
      v141 = v32;
      v187 = a6;
      v160 = v27;
      v142 = MTLReportFailureTypeEnabled();
      v27 = v160;
      LOWORD(v29) = v165;
      a6 = v187;
      v32 = v141;
      v30 = v196;
      v25 = v198;
      v31 = v175;
      a1 = v181;
      v26 = v170;
      a7 = v221;
      v34 = v201;
      if (v142)
      {
        MTLReportFailure();
        v27 = v160;
        LOWORD(v29) = v165;
        a6 = v187;
        v32 = v141;
        v30 = v196;
        v25 = v198;
        v31 = v175;
        a1 = v181;
        v26 = v170;
        a7 = v221;
        v34 = v201;
      }
    }

    if (v37 > v36)
    {
      v199 = v25;
      v202 = v34;
      v222 = a7;
      v166 = v29;
      v171 = v26;
      v176 = v31;
      v182 = a1;
      v143 = v30;
      v144 = v32;
      v188 = a6;
      v161 = v27;
      v145 = MTLReportFailureTypeEnabled();
      v27 = v161;
      LOWORD(v29) = v166;
      a6 = v188;
      v32 = v144;
      v30 = v143;
      v31 = v176;
      a1 = v182;
      v26 = v171;
      a7 = v222;
      v25 = v199;
      v34 = v202;
      if (v145)
      {
        MTLReportFailure();
        v27 = v161;
        LOWORD(v29) = v166;
        a6 = v188;
        v32 = v144;
        v30 = v143;
        v31 = v176;
        a1 = v182;
        v26 = v171;
        a7 = v222;
        v25 = v199;
        v34 = v202;
      }
    }

    if (!v33)
    {
      if (((*a12 >> 34) & 0x3FuLL) >= 3)
      {
        v203 = v34;
        v146 = v25;
        v147 = a7;
        v167 = v29;
        v172 = v26;
        v177 = v31;
        v183 = a1;
        v148 = v30;
        v149 = v32;
        v189 = a6;
        v162 = v27;
        v150 = MTLReportFailureTypeEnabled();
        v27 = v162;
        LOWORD(v29) = v167;
        a6 = v189;
        v32 = v149;
        v30 = v148;
        v31 = v177;
        a1 = v183;
        v26 = v172;
        a7 = v147;
        v25 = v146;
        v34 = v203;
        if (v150)
        {
          MTLReportFailure();
          v27 = v162;
          LOWORD(v29) = v167;
          a6 = v189;
          v32 = v149;
          v30 = v148;
          v31 = v177;
          a1 = v183;
          v26 = v172;
          a7 = v147;
          v25 = v146;
          v34 = v203;
        }
      }

      if (v27 == 5)
      {
        v204 = v34;
        v151 = v25;
        v152 = a7;
        v153 = v26;
        v178 = v31;
        v184 = a1;
        v154 = v30;
        v159 = v32;
        v190 = a6;
        v168 = v29;
        v155 = MTLReportFailureTypeEnabled();
        LOWORD(v29) = v168;
        a6 = v190;
        v32 = v159;
        v30 = v154;
        v31 = v178;
        a1 = v184;
        v26 = v153;
        a7 = v152;
        v25 = v151;
        v34 = v204;
        if (v155)
        {
          MTLReportFailure();
          LOWORD(v29) = v168;
          a6 = v190;
          v32 = v159;
          v30 = v154;
          v31 = v178;
          a1 = v184;
          v26 = v153;
          a7 = v152;
          v25 = v151;
          v34 = v204;
        }
      }
    }
  }

  if (v26 + ((v28 + 3) >> 2) > *(v25 + 16))
  {
    return -6;
  }

  v39 = a7[1].i64[1];
  v40 = a7[2].i64[0];
  v219 = a7;
  v41 = *(v34 + 32);
  v197 = v25;
  v169 = v26;
  v173 = v31;
  v179 = a1;
  v194 = v30;
  v42 = v29;
  v43 = a6;
  v44 = v32;
  v251 = 0u;
  v252 = 0u;
  v249 = 0u;
  v250 = 0u;
  v247 = 0u;
  v248 = 0u;
  v45 = v39;
  v185 = v40;
  (*(*v41 + 296))(&v247);
  v46 = *v43;
  v47 = v43[1];
  if (v44)
  {
    LOWORD(v47) = v42 + v47 * v210;
    LOWORD(v46) = v205 + v46 * v212;
  }

  v156 = v46;
  v157 = v47;
  if (BYTE12(v252))
  {
    v163 = (*(&v249 + 1) + ((v185 + 1) >> 1) * ((v45 + 1) >> 1) - 1) / *(&v249 + 1);
  }

  else
  {
    v163 = (v185 + v250 - 1) / v250 * ((v45 + *(&v249 + 1) - 1) / *(&v249 + 1));
  }

  v48 = v249;
  v49 = v248;
  v50 = a3[26];
  v240 = v50;
  v241 = a9 & 0x3F | ((a8 & 0x3F) << 6);
  v243 = 0u;
  v244 = 0u;
  v245 = 0u;
  v242 = -1;
  v246 = 0;
  v191 = (v28 / v215 + *(&v251 + 1) - 1) / *(&v251 + 1);
  MPSLibrary::CreateUberShaderKey();
  PipelineStateForMPSKey = MPSLibrary::GetPipelineStateForMPSKey();
  objc_msgSend_setComputePipelineState_(a4, v52, PipelineStateForMPSKey, v53, v54, v55, v56, v57, 0, 0, 0);
  a20[3] = v205;
  a20[2] = v205;
  a20[5] = v206;
  a20[4] = v208;
  a20[7] = v157;
  a20[6] = v156;
  a20[9] = v210;
  a20[8] = v212;
  a20[11] = v207;
  a20[10] = v211;
  v226[1] = v185;
  v226[0] = v45;
  *a20 = v156 - (v211 * (v208 - 1) + 1) / 2;
  LOWORD(v58) = v156 - (v211 * (v208 - 1) + 1) / 2;
  WORD1(v58) = v157 - (v207 * (v206 - 1) + 1) / 2;
  WORD2(v58) = a16;
  HIWORD(v58) = a14 >> 2;
  v209 = v58;
  a20[1] = WORD1(v58);
  *(v197 + 22) = WORD4(v49) * v49 * v48;
  *(v197 + 28) = 0;
  v228 = v219[2].i64[1];
  MPSGetUIntDivisorMagicNumber();
  v227 = v59;
  v230 = v213 / v215;
  v229 = v213;
  v232 = v28 / v215;
  v231 = v28;
  v233 = (v28 + 3) >> 2;
  v236 = v215;
  MPSGetUShortDivisorMagicNumber();
  v237 = v67;
  v68.i32[0] = a18;
  v68.i32[1] = v169 >> 2;
  v69 = vuzp1_s16(vmovn_s64(*v219), v68);
  v234 = v209;
  v235 = v69;
  v238 = v194;
  v70 = v179;
  v70.n128_u32[2] = v173;
  v239 = v70;
  if ((a8 & 2) == 0)
  {
    objc_msgSend_setTexture_atIndex_(a4, v60, a22, v50, v63, v64, v65, v66);
    goto LABEL_34;
  }

  v75 = objc_msgSend_count(a22, v60, v61, v62, v63, v64, v65, v66);
  v267 = 0u;
  v268 = 0u;
  v265 = 0u;
  v266 = 0u;
  v263 = 0u;
  v264 = 0u;
  v261 = 0u;
  v262 = 0u;
  v259 = 0u;
  v260 = 0u;
  v257 = 0u;
  v258 = 0u;
  v255 = 0u;
  v256 = 0u;
  v253 = 0u;
  v254 = 0u;
  if (v50)
  {
    v76 = v75;
    for (i = 0; i < v50; i += v79)
    {
      if (v76 <= i)
      {
        v78 = 0;
        if (v50 - i >= 0x20)
        {
          v79 = 32;
        }

        else
        {
          v79 = v50 - i;
        }

        v80 = v79;
        if (!v79)
        {
          goto LABEL_19;
        }
      }

      else
      {
        if (v76 - i >= 0x20)
        {
          v78 = 32;
          objc_msgSend_getObjects_range_(a22, v71, &v253, i, 32, v72, v73, v74);
        }

        else
        {
          v78 = v76 - i;
          objc_msgSend_getObjects_range_(a22, v71, &v253, i, v76 - i, v72, v73, v74);
        }

        if (v50 - i >= 0x20)
        {
          v79 = 32;
        }

        else
        {
          v79 = v50 - i;
        }

        v80 = v79 - v78;
        if (v79 == v78)
        {
          goto LABEL_19;
        }
      }

      bzero(&v253 + 8 * v78, 8 * v80);
LABEL_19:
      objc_msgSend_setTextures_withRange_(a4, v71, &v253, i + v50, v79, v72, v73, v74);
    }
  }

LABEL_34:
  objc_msgSend_setBytes_length_atIndex_(a4, v71, a20, 32, 1, v72, v73, v74);
  if ((a9 & 2) != 0)
  {
    v92 = objc_msgSend_count(a23, v81, v82, v83, v84, v85, v86, v87);
    v267 = 0u;
    v268 = 0u;
    v265 = 0u;
    v266 = 0u;
    v263 = 0u;
    v264 = 0u;
    v261 = 0u;
    v262 = 0u;
    v259 = 0u;
    v260 = 0u;
    v257 = 0u;
    v258 = 0u;
    v255 = 0u;
    v256 = 0u;
    v253 = 0u;
    v254 = 0u;
    if (!v50)
    {
      goto LABEL_53;
    }

    v93 = v92;
    v94 = 0;
    while (1)
    {
      if (v93 <= v94)
      {
        v95 = 0;
        if (v50 - v94 >= 0x20)
        {
          v96 = 32;
        }

        else
        {
          v96 = v50 - v94;
        }

        v97 = v96;
        if (!v96)
        {
          goto LABEL_38;
        }
      }

      else
      {
        if (v93 - v94 >= 0x20)
        {
          v95 = 32;
          objc_msgSend_getObjects_range_(a23, v88, &v253, v94, 32, v89, v90, v91);
        }

        else
        {
          v95 = v93 - v94;
          objc_msgSend_getObjects_range_(a23, v88, &v253, v94, v93 - v94, v89, v90, v91);
        }

        if (v50 - v94 >= 0x20)
        {
          v96 = 32;
        }

        else
        {
          v96 = v50 - v94;
        }

        v97 = v96 - v95;
        if (v96 == v95)
        {
          goto LABEL_38;
        }
      }

      bzero(&v253 + 8 * v95, 8 * v97);
LABEL_38:
      objc_msgSend_setTextures_withRange_(a4, v88, &v253, v94, v96, v89, v90, v91);
      v94 += v96;
      if (v94 >= v50)
      {
        goto LABEL_53;
      }
    }
  }

  objc_msgSend_setTexture_atIndex_(a4, v81, a23, 0, v84, v85, v86, v87);
LABEL_53:
  objc_msgSend_setBytes_length_atIndex_(a4, v88, v197, 40, 0, v89, v90, v91);
  objc_msgSend_setBytes_length_atIndex_(a4, v98, v226, 112, 30, v99, v100, v101);
  objc_msgSend_setBuffer_offset_atIndex_(a4, v102, v193, 0, 29, v103, v104, v105);
  objc_msgSend_setBuffer_offset_atIndex_(a4, v106, v217, 0, 28, v107, v108, v109);
  objc_msgSend_setThreadgroupMemoryLength_atIndex_(a4, v110, v252, 0, v111, v112, v113, v114);
  objc_msgSend_setBuffer_offset_atIndex_(a4, v115, v192, 0, 27, v116, v117, v118);
  *&v253 = a19;
  *(&v253 + 1) = v163;
  *&v254 = v191 * v215;
  v224 = v49;
  v225 = v48;
  objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a4, v119, &v253, &v224, v120, v121, v122, v123);
  if ((objc_msgSend_retainedReferences(a5, v124, v125, v126, v127, v128, v129, v130) & 1) == 0)
  {
    v131 = v193;
    v132 = v217;
    v133 = v192;
    v223[0] = MEMORY[0x277D85DD0];
    v223[1] = 3221225472;
    v223[2] = sub_239D3B1A8;
    v223[3] = &unk_278B2F2A0;
    v223[4] = v193;
    v223[5] = v217;
    v223[6] = v192;
    objc_msgSend_addCompletedHandler_(a5, v134, v223, v135, v136, v137, v138, v139);
  }

  MPSLibrary::ReleaseMPSKey();
  return 0;
}

uint64_t sub_239D3B010(uint64_t a1, uint64_t a2, __int128 *a3)
{
  v4 = *(a2 + 64);
  v5 = MPSCreateFunctionConstantValues();
  v10 = v5;
  v51 = (v4 >> 4) & 1;
  v50 = (v4 >> 5) & 0x1F;
  v49 = (v4 & 0x400) != 0;
  v48 = (v4 & 0x800) != 0;
  v47 = (v4 & 0x1000) != 0;
  v46 = (v4 & 0x2000) != 0;
  v45 = (v4 & 0x100000) != 0;
  v52 = v4 & 0xF;
  if ((v4 & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v5, v6, &v52, 41, 115, v7, v8, v9);
  }

  if ((v4 >> 4))
  {
    objc_msgSend_setConstantValue_type_atIndex_(v10, v6, &v51, 41, 114, v7, v8, v9);
  }

  objc_msgSend_setConstantValue_type_atIndex_(v10, v6, &v50, 41, 113, v7, v8, v9);
  objc_msgSend_setConstantValue_type_atIndex_(v10, v11, &v49, 53, 112, v12, v13, v14);
  objc_msgSend_setConstantValue_type_atIndex_(v10, v15, &v48, 53, 111, v16, v17, v18);
  objc_msgSend_setConstantValue_type_atIndex_(v10, v19, &v47, 53, 110, v20, v21, v22);
  objc_msgSend_setConstantValue_type_atIndex_(v10, v23, &v46, 53, 109, v24, v25, v26);
  objc_msgSend_setConstantValue_type_atIndex_(v10, v27, &v45, 53, 108, v28, v29, v30);
  v39 = *a3;
  v40 = -1;
  v41 = 0u;
  v42 = 0u;
  v43 = 0u;
  v44 = 0;
  sub_239C19E34(v10, &v39, v31, v32, v33, v34, v35, v36);
  v37 = _MPSNewSpecializedFunction();

  return v37;
}

void sub_239D3B1A8(uint64_t a1)
{
  v2 = *(a1 + 48);
}

uint64_t sub_239D3B1EC(__n128 a1, uint64_t a2, uint64_t *a3, void *a4, void *a5, uint64_t *a6, uint64_t *a7, char a8, char a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, unint64_t a14, unint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, _WORD *a19, uint64_t a20, void *a21, void *a22)
{
  v334 = *MEMORY[0x277D85DE8];
  v265 = a3[1];
  v266 = *a3;
  v267 = a3[2];
  v273 = a3[3];
  v260 = *(a3 + 20);
  a1.n128_u64[0] = *(a3 + 84);
  v255 = a1;
  v254 = *(a3 + 23);
  v257 = a3[13];
  v269 = a3[14];
  v24 = a3[7];
  v279 = a3[6];
  v263 = a3[9];
  v264 = a3[8];
  v25 = a3[18];
  v256 = a3[15];
  v249 = *a6;
  v248 = a6[1];
  v250 = a6[2];
  v252 = *a7;
  v253 = a7[1];
  v251 = a7[2];
  v272 = a7[3];
  v270 = v25;
  v271 = a7[4];
  v26 = a3[22];
  v246 = *(a3 + 184);
  v27 = a3[25];
  v262 = a3[24];
  v258 = *(a3 + 56);
  v28 = a3[5];
  v261 = a3[4];
  v244 = a19[13];
  v29 = *(a20 + 16);
  v30 = v24 * v24;
  v280 = v29;
  v283 = v28;
  if ((a3[19] & 1) == 0)
  {
    v31 = v28 / v30;
    if (v28 / v30 + a15 > v29)
    {
      v276 = v26;
      v219 = MTLReportFailureTypeEnabled();
      v29 = v280;
      v28 = v283;
      v25 = v270;
      v26 = v276;
      if (v219)
      {
        v229 = a3[5];
        v230 = v280;
        v228 = a15;
        MTLReportFailure();
        v29 = v280;
        v28 = v283;
        v25 = v270;
        v26 = v276;
      }
    }

    if (v28 != v31 * v30)
    {
      v277 = v26;
      v220 = MTLReportFailureTypeEnabled();
      v29 = v280;
      v25 = v270;
      v26 = v277;
      if (v220)
      {
        v228 = v283;
        v229 = v24;
        MTLReportFailure();
        v29 = v280;
        v25 = v270;
        v26 = v277;
      }
    }

    if (v31 > v29)
    {
      v278 = v26;
      v221 = v25;
      v222 = MTLReportFailureTypeEnabled();
      v25 = v221;
      v26 = v278;
      if (v222)
      {
        v228 = v280;
        v229 = v31;
        MTLReportFailure();
        v25 = v221;
        v26 = v278;
      }
    }

    if (!v26)
    {
      if (((*a12 >> 34) & 0x3FuLL) >= 3)
      {
        v223 = v25;
        v224 = MTLReportFailureTypeEnabled();
        v25 = v223;
        v26 = 0;
        if (v224)
        {
          v228 = *(a12 + 4);
          MTLReportFailure();
          v25 = v223;
          v26 = 0;
        }
      }

      if (a10 == 5)
      {
        v225 = v26;
        v226 = v25;
        v227 = MTLReportFailureTypeEnabled();
        v25 = v226;
        v26 = v225;
        if (v227)
        {
          MTLReportFailure();
          v25 = v226;
          v26 = v225;
        }
      }
    }
  }

  if (!(*(**(v25 + 32) + 120))(*(v25 + 32), v26))
  {
    v39 = a10;
    v40 = v283 / v30;
    if (v283 / v30 + a15 <= v280)
    {
      goto LABEL_10;
    }

    return -6;
  }

  v39 = a10;
  v40 = v283 / v30;
  if (v283 / v30 + a15 > v280)
  {
    return -6;
  }

LABEL_10:
  result = 0;
  if (!v272 || !v271)
  {
    return result;
  }

  v42 = v40 + 3;
  v240 = (v261 / v279);
  if (v240 <= 4)
  {
    v43 = 4;
  }

  else
  {
    v43 = 8;
  }

  v235 = v43;
  if ((a8 & 2) != 0)
  {
    v53 = objc_msgSend_objectAtIndexedSubscript_(a22, v32, 0, v34, v35, v36, v37, v38);
    v51 = objc_msgSend_height(v53, v54, v55, v56, v57, v58, v59, v60);
    v52 = objc_msgSend_objectAtIndexedSubscript_(a22, v61, 0, v62, v63, v64, v65, v66);
  }

  else
  {
    v51 = objc_msgSend_height(a22, v32, v33, v34, v35, v36, v37, v38);
    v52 = a22;
  }

  v67 = *&v42 & 0x3FFFCLL;
  v243 = v283 / v279;
  v233 = objc_msgSend_width(v52, v44, v45, v46, v47, v48, v49, v50, v228, v229, v230);
  v234 = v51;
  v241 = v233 * v51;
  v75 = 1;
  if (v258 == 268435488)
  {
    v76 = 2;
  }

  else
  {
    v76 = 1;
  }

  v77 = 1024;
  if (v39 == 4)
  {
    v77 = 512;
  }

  v237 = v77;
  v238 = v76;
  if (v39 == 4)
  {
    v75 = 2;
  }

  v236 = v75;
  v78 = objc_msgSend_commandQueue(a5, v68, v69, v70, v71, v72, v73, v74);
  objc_msgSend_device(v78, v79, v80, v81, v82, v83, v84, v85);
  MPSDevice::GetMPSDevice();
  if (qword_27DF882B0 != -1)
  {
    dispatch_once(&qword_27DF882B0, &unk_284CC9FC0);
  }

  v231 = v67 * v30;
  v232 = v241 >> 17;
  if (v241 >> 17)
  {
    v86 = 8;
  }

  else
  {
    v86 = 32;
  }

  if (v241 >> 17)
  {
    v87 = 4;
  }

  else
  {
    v87 = 1;
  }

  v88 = a3[26];
  v311 = v88;
  v312 = a9 & 0x3F | ((a8 & 0x3F) << 6);
  v314 = 0u;
  v315 = 0u;
  v316 = 0u;
  v313 = -1;
  v259 = v86;
  v242 = v87;
  v317 = 0;
  MPSLibrary::CreateUberShaderKey();
  PipelineStateForMPSKey = MPSLibrary::GetPipelineStateForMPSKey();
  v245 = v244 + 3;
  v96 = v280 + 3;
  v97 = v264 * (v266 - 1) + 1;
  v98 = v263 * (v265 - 1) + 1;
  if (v246)
  {
    v99 = v27 + v248 * v273;
  }

  else
  {
    v99 = v248;
  }

  if (v246)
  {
    v100 = v262 + v249 * v267;
  }

  else
  {
    v100 = v249;
  }

  if ((a8 & 2) != 0)
  {
    v109 = objc_msgSend_objectAtIndexedSubscript_(a21, v89, 0, v91, v92, v93, v94, v95, 0, 0, 0, 0, 0);
    v281 = objc_msgSend_height(v109, v110, v111, v112, v113, v114, v115, v116);
    v108 = objc_msgSend_objectAtIndexedSubscript_(a21, v117, 0, v118, v119, v120, v121, v122);
  }

  else
  {
    v281 = objc_msgSend_height(a21, v89, v90, v91, v92, v93, v94, v95, 0, 0, 0, 0, 0);
    v108 = a21;
  }

  v247 = objc_msgSend_width(v108, v101, v102, v103, v104, v105, v106, v107);
  LOWORD(v124) = v100 - v97 / 2;
  WORD1(v124) = v99 - v98 / 2;
  WORD2(v124) = v250;
  v290 = a14 >> 2;
  LOWORD(v125) = v252;
  WORD1(v125) = v253;
  WORD2(v125) = v251;
  LOWORD(v126) = v272;
  WORD1(v126) = v271;
  v291 = a15 >> 2;
  v299 = v245 >> 2;
  if (v240 <= 4)
  {
    v127 = -4;
  }

  else
  {
    v127 = -8;
  }

  v300 = (v261 / v279 + v235 - 1) & v127;
  v301 = (v240 + 3) >> 2;
  v305 = v283;
  v303 = v96 >> 2;
  v306 = v260;
  v304 = (v243 + 3) >> 2;
  v288 = v124;
  v289 = v125;
  v287[1] = v265;
  v287[0] = v266;
  WORD2(v123) = (2 * v243 - 1) / v243 * v279;
  WORD1(v123) = v271 + v253;
  LOWORD(v123) = v272 + v252;
  v292 = v123;
  WORD2(v126) = v231 >> 2;
  v294 = v126;
  v296 = v273;
  v295 = v267;
  v297 = a18;
  v298 = v279;
  v302 = v235;
  v128 = v255;
  v128.n128_u32[2] = v254;
  v307 = v128;
  v309 = v263;
  v308 = v264;
  MPSGetUShortDivisorMagicNumber();
  v130 = v129;
  MPSGetUShortDivisorMagicNumber();
  v138 = vtrn1_s16(v130, v137);
  v139 = vzip2_s16(vzip1_s16(v130, v137), v138);
  v138.i16[0] = v247;
  v138.i16[1] = v281;
  v138.i16[2] = v261;
  v310 = v139;
  v293 = v138;
  a19[1] = v99 - v98 / 2;
  *a19 = v100 - v97 / 2;
  a19[3] = v262;
  v140 = 5;
  a19[2] = v262;
  if (v232)
  {
    v140 = 3;
  }

  v282 = v140;
  a19[5] = v265;
  a19[4] = v266;
  a19[7] = v99;
  a19[6] = v100;
  a19[9] = v273;
  a19[8] = v267;
  a19[11] = v263;
  a19[10] = v264;
  *(a20 + 22) = 8 * v235;
  *(a20 + 28) = 0;
  objc_msgSend_setComputePipelineState_(a4, v131, PipelineStateForMPSKey, v132, v133, v134, v135, v136);
  if ((a8 & 2) == 0)
  {
    objc_msgSend_setTexture_atIndex_(a4, v141, a21, v88, v144, v145, v146, v147);
    goto LABEL_69;
  }

  v152 = objc_msgSend_count(a21, v141, v142, v143, v144, v145, v146, v147);
  v333 = 0u;
  v332 = 0u;
  v331 = 0u;
  v330 = 0u;
  v329 = 0u;
  v327 = 0u;
  v328 = 0u;
  v325 = 0u;
  v326 = 0u;
  v323 = 0u;
  v324 = 0u;
  v321 = 0u;
  v322 = 0u;
  v319 = 0u;
  v320 = 0u;
  v318 = 0u;
  if (v88)
  {
    v153 = v152;
    for (i = 0; i < v88; i += v156)
    {
      if (v153 <= i)
      {
        v155 = 0;
        if (v88 - i >= 0x20)
        {
          v156 = 32;
        }

        else
        {
          v156 = v88 - i;
        }

        v157 = v156;
        if (!v156)
        {
          goto LABEL_54;
        }
      }

      else
      {
        if (v153 - i >= 0x20)
        {
          v155 = 32;
          objc_msgSend_getObjects_range_(a21, v148, &v318, i, 32, v149, v150, v151);
        }

        else
        {
          v155 = v153 - i;
          objc_msgSend_getObjects_range_(a21, v148, &v318, i, v153 - i, v149, v150, v151);
        }

        if (v88 - i >= 0x20)
        {
          v156 = 32;
        }

        else
        {
          v156 = v88 - i;
        }

        v157 = v156 - v155;
        if (v156 == v155)
        {
          goto LABEL_54;
        }
      }

      bzero(&v318 + 8 * v155, 8 * v157);
LABEL_54:
      objc_msgSend_setTextures_withRange_(a4, v148, &v318, i + v88, v156, v149, v150, v151);
    }
  }

LABEL_69:
  v158 = v237 << v238;
  objc_msgSend_setBytes_length_atIndex_(a4, v148, a19, 32, 1, v149, v150, v151);
  if ((a9 & 2) != 0)
  {
    v171 = objc_msgSend_count(a22, v159, a22, v160, v161, v162, v163, v164);
    v333 = 0u;
    v332 = 0u;
    v331 = 0u;
    v330 = 0u;
    v329 = 0u;
    v327 = 0u;
    v328 = 0u;
    v325 = 0u;
    v326 = 0u;
    v323 = 0u;
    v324 = 0u;
    v321 = 0u;
    v322 = 0u;
    v319 = 0u;
    v320 = 0u;
    v318 = 0u;
    if (!v88)
    {
LABEL_88:
      v169 = a5;
      v170 = v256;
      v158 = v237 << v238;
      goto LABEL_89;
    }

    v172 = v171;
    v173 = 0;
    while (1)
    {
      if (v172 <= v173)
      {
        v174 = 0;
        if (v88 - v173 >= 0x20)
        {
          v175 = 32;
        }

        else
        {
          v175 = v88 - v173;
        }

        v176 = v175;
        if (!v175)
        {
          goto LABEL_73;
        }
      }

      else
      {
        if (v172 - v173 >= 0x20)
        {
          v174 = 32;
          objc_msgSend_getObjects_range_(a22, v165, &v318, v173, 32, v166, v167, v168);
        }

        else
        {
          v174 = v172 - v173;
          objc_msgSend_getObjects_range_(a22, v165, &v318, v173, v172 - v173, v166, v167, v168);
        }

        if (v88 - v173 >= 0x20)
        {
          v175 = 32;
        }

        else
        {
          v175 = v88 - v173;
        }

        v176 = v175 - v174;
        if (v175 == v174)
        {
          goto LABEL_73;
        }
      }

      bzero(&v318 + 8 * v174, 8 * v176);
LABEL_73:
      objc_msgSend_setTextures_withRange_(a4, v165, &v318, v173, v175, v166, v167, v168);
      v173 += v175;
      if (v173 >= v88)
      {
        goto LABEL_88;
      }
    }
  }

  objc_msgSend_setTexture_atIndex_(a4, v159, a22, 0, v161, v162, v163, v164);
  v169 = a5;
  v170 = v256;
LABEL_89:
  objc_msgSend_setBytes_length_atIndex_(a4, v165, a20, 40, 0, v166, v167, v168);
  objc_msgSend_setBytes_length_atIndex_(a4, v177, v287, 192, 30, v178, v179, v180);
  objc_msgSend_setBuffer_offset_atIndex_(a4, v181, v257, 0, 29, v182, v183, v184);
  objc_msgSend_setBuffer_offset_atIndex_(a4, v185, v269, 0, 28, v186, v187, v188);
  objc_msgSend_setBuffer_offset_atIndex_(a4, v189, v170, 0, 26, v190, v191, v192);
  objc_msgSend_setThreadgroupMemoryLength_atIndex_(a4, v193, v158 + (v237 << v236), 0, v194, v195, v196, v197);
  *&v318 = (v259 + ((v234 + v242 - 1) >> (2 * (v232 != 0))) * v233 - 1) >> v282;
  *(&v318 + 1) = 1;
  *&v319 = v279 * a18 * ((v243 + 31) >> 5);
  v286[0] = v259;
  v286[1] = v242;
  v286[2] = v235 >> 2;
  objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a4, v198, &v318, v286, v199, v200, v201, v202);
  if ((objc_msgSend_retainedReferences(v169, v203, v204, v205, v206, v207, v208, v209) & 1) == 0)
  {
    v210 = v257;
    v211 = v269;
    v212 = v170;
    v284[0] = MEMORY[0x277D85DD0];
    v284[1] = 3221225472;
    v284[2] = sub_239D3C270;
    v284[3] = &unk_278B2F278;
    v284[4] = v257;
    v284[5] = v269;
    v285 = 0;
    v284[6] = v170;
    v284[7] = PipelineStateForMPSKey;
    objc_msgSend_addCompletedHandler_(v169, v213, v284, v214, v215, v216, v217, v218);
  }

  MPSLibrary::ReleaseMPSKey();
  return 0;
}

char *sub_239D3BF54()
{
  result = getenv("MPS_DIRECTCONV_NODMA");
  if (result)
  {
    byte_27DF882A8 = 1;
  }

  return result;
}

uint64_t sub_239D3BF84(uint64_t a1, uint64_t a2, __int128 *a3, uint64_t a4, uint64_t a5)
{
  v6 = *(a2 + 64);
  v7 = MPSCreateFunctionConstantValues();
  v12 = v7;
  v90 = v6 >> 4;
  v89 = (v6 >> 8) & 0xF;
  v88[1] = v6 >> 12;
  v88[0] = v6 >> 12;
  v87 = BYTE2(v6) & 1;
  v86 = (v6 >> 17) & 0x1F;
  v85 = (v6 >> 23) & 0xF;
  v84 = (v6 >> 27) & 0xF;
  v83 = (v6 & 0x400000) != 0;
  v82 = (v6 & 0x80000000) != 0;
  v81 = BYTE4(v6) & 1;
  v80 = (v6 & 0x200000000) != 0;
  v79 = (v6 & 0x400000000) != 0;
  v78 = (v6 >> 46) & 7;
  v77 = (v6 >> 49) & 7;
  v76 = (v6 >> 52) & 7;
  v75 = (v6 >> 35) & 0x3F;
  v74 = (v6 >> 41) & 0x1F;
  v73 = (v6 & 0x200000000000000) != 0;
  v91 = v6 & 0xF;
  if ((v6 & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v7, v8, &v91, 37, 115, v9, v10, v11);
  }

  if (v6 >> 4)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v90, 37, 114, v9, v10, v11);
  }

  if (v6 >= 0x1000u)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, v88, 42, 113, v9, v10, v11);
  }

  if (((v6 >> 8) & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v89, 41, 112, v9, v10, v11);
  }

  if ((v6 & 0x10000) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v87, 41, 111, v9, v10, v11);
  }

  objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v86, 41, 110, v9, v10, v11, a4, a5);
  if (((v6 >> 23) & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v13, &v85, 37, 109, v14, v15, v16);
  }

  if (((v6 >> 27) & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v13, &v84, 37, 108, v14, v15, v16);
  }

  objc_msgSend_setConstantValue_type_atIndex_(v12, v13, &v83, 53, 107, v14, v15, v16);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v17, &v81, 53, 106, v18, v19, v20);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v21, &v80, 53, 105, v22, v23, v24);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v25, &v79, 53, 104, v26, v27, v28);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v29, &v82, 53, 103, v30, v31, v32);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v33, &v75, 41, 102, v34, v35, v36);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v37, &v74, 41, 101, v38, v39, v40);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v41, &v78, 41, 100, v42, v43, v44);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v45, &v77, 41, 99, v46, v47, v48);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v49, &v76, 41, 98, v50, v51, v52);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v53, &v73, 53, 97, v54, v55, v56);
  v67 = *a3;
  v68 = -1;
  v69 = 0u;
  v70 = 0u;
  v71 = 0u;
  v72 = 0;
  sub_239C19E34(v12, &v67, v57, v58, v59, v60, v61, v62);
  v63 = _MPSNewSpecializedFunction();

  return v63;
}

void sub_239D3C270(uint64_t a1)
{
  if (*(a1 + 64) == 1)
  {
    v2 = *(a1 + 56);
  }
}

uint64_t sub_239D3C2D4(uint64_t a1, uint64_t a2, void *a3, void *a4, uint64_t a5, int64x2_t *a6, uint64_t a7, uint64_t a8)
{
  v247 = *MEMORY[0x277D85DE8];
  if (!*(a2 + 88) && (*(a2 + 96) & 1) == 0)
  {
    v177 = *(a2 + 120);
    v193 = *(a2 + 128);
    v199 = *a2;
    v189 = *(a2 + 24);
    v190 = *(a2 + 40);
    v191 = *(a2 + 8);
    v13 = *(a2 + 56);
    v14 = *(a2 + 64);
    v15 = *(a2 + 112);
    MEMORY[0x23EE7D040](v231, a4, 0);
    v16 = MEMORY[0x277CD7480];
    v198 = a7;
    if (!*(a7 + *MEMORY[0x277CD7480]))
    {
      v194 = 0;
      explicit = 0;
      goto LABEL_14;
    }

    v17 = a7;
    v18 = MEMORY[0x277CD7488];
    v19 = (*(v17 + *MEMORY[0x277CD7488]) + 8);
    explicit = atomic_load_explicit(v19, memory_order_acquire);
    if (explicit)
    {
      if (*(v17 + *v16))
      {
        goto LABEL_6;
      }
    }

    else
    {
      MPSAutoBuffer::AllocateBuffer(v19, 0);
      explicit = atomic_load_explicit(v19, memory_order_acquire);
      v17 = v198;
      if (*(v198 + *v16))
      {
LABEL_6:
        v20 = (*(v17 + *v18) + 80);
        v194 = atomic_load_explicit(v20, memory_order_acquire);
        if (!v194)
        {
          MPSAutoBuffer::AllocateBuffer(v20, 0);
          v194 = atomic_load_explicit(v20, memory_order_acquire);
        }

LABEL_14:
        v22 = v13 / v199;
        v23 = v13 / v199 * v191.i64[1] * v191.i64[0];
        v174 = v23 * v14 + 3;
        v24 = v14 + 3;
        v182 = *(a2 + 136);
        v25 = 32;
        if (v13 / v199 > 4 && *(a5 + 80) * *(a5 + 72) <= 0x1000uLL)
        {
          v25 = 16;
        }

        v187 = v25;
        v186 = a4;
        v175 = v14 + 3;
        v176 = a8;
        v180 = v191.i64[1] * v191.i64[0];
        if (a8)
        {
          v26 = *(v198 + 336);
          if (v26 >= 2)
          {
            v185 = *(v198 + 304);
            v184 = *(v198 + 312);
LABEL_27:
            v188 = v26;
            if (v26 >= v193)
            {
              v35 = v193;
            }

            else
            {
              v35 = v26;
            }

            v178 = v14 / v199;
            v179 = v35;
            v36 = ((v14 / v199 + 3) >> 2) * v199;
            if ((v22 + 3) >> 2 >= 4)
            {
              LOWORD(v37) = 4;
            }

            else
            {
              v37 = (v22 + 3) >> 2;
            }

            if (v36 >= 4)
            {
              v38 = 4;
            }

            else
            {
              v38 = ((v14 / v199 + 3) >> 2) * v199;
            }

            v181 = *a6;
            v229 = 0u;
            v230 = 0u;
            v225 = 0;
            v221 = 0;
            v214 = 0u;
            v211[0] = v22;
            v211[1] = v14;
            v39 = vmovn_s64(v182);
            v212 = v23;
            v39.i16[1] = v39.i16[2];
            v39.i16[2] = v193;
            v213 = v39;
            MPSGetUShortDivisorMagicNumber();
            v40 = vmovn_s64(v181);
            v41 = vmovn_s64(v191);
            *&v214 = v42;
            WORD5(v214) = v41.i16[2];
            v43 = vmovn_s64(v189);
            WORD4(v214) = v41.i16[0];
            v43.i16[1] = v43.i16[2];
            v43.i16[2] = v188;
            v215 = v43;
            v44 = vmovn_s64(v190);
            v217 = v44.i16[2];
            v216 = v44.i16[0];
            v218 = 0;
            v220 = v40.i16[2];
            v219 = v40.i16[0];
            MPSGetUShortDivisorMagicNumber();
            v222 = v45;
            v224 = v38;
            v223 = v37;
            MPSGetUShortDivisorMagicNumber();
            v226 = v46;
            MPSGetUShortDivisorMagicNumber();
            v227 = v47;
            MPSGetUShortDivisorMagicNumber();
            v48 = (v22 + 3) & 0xFFFFFFFFFFFFFFFCLL;
            v228 = v49;
            *&v229 = 0;
            v50 = __PAIR64__(v36, v174 & 0xFFFFFFFC);
            v51 = a6;
            v52 = a5;
            v53 = vmovn_s64(*(a5 + 72));
            *(&v229 + 1) = v50;
            *&v230 = v53;
            WORD4(v230) = v199;
            v54 = 1;
            if (v22 > 4)
            {
              v54 = 2;
            }

            v192 = v54;
            if (v22 > 4)
            {
              v48 = (v22 + 7) & 0xFFFFFFFFFFFFFFF8;
            }

            v183 = v48;
            v55 = ((*(a5 + 24) & 0x3F) << 6) & 0xFFF | ((a6[1].i32[2] & 0x3Fu) << 12);
            v204 = v15;
            v205 = v55;
            v206 = -1;
            v207 = 0uLL;
            v208 = 0uLL;
            v209 = 0uLL;
            v210 = 0;
            v56 = v187;
            MPSLibrary::CreateUberShaderKey();
            v57 = v186;
            PipelineStateForMPSKey = MPSLibrary::GetPipelineStateForMPSKey();
            *(v198 + 288) = 1;
            objc_msgSend_setComputePipelineState_(a3, v59, PipelineStateForMPSKey, v60, v61, v62, v63, v64, 0, 0, 0);
            v72 = *(a5 + 64);
            if ((*(a5 + 24) & 2) == 0)
            {
              objc_msgSend_setTexture_atIndex_(a3, v65, *(a5 + 64), 0, v68, v69, v70, v71);
LABEL_61:
              objc_msgSend_setBytes_length_atIndex_(a3, v73, v52 + 28, 32, 0, v74, v75, v76);
              v90 = v51[4].i64[0];
              if ((v51[1].i8[8] & 2) == 0)
              {
                objc_msgSend_setTexture_atIndex_(a3, v83, v51[4].i64[0], v15, v86, v87, v88, v89);
LABEL_82:
                objc_msgSend_setBytes_length_atIndex_(a3, v91, &v51[1].i64[1] + 4, 32, 1, v92, v93, v94);
                objc_msgSend_setBytes_length_atIndex_(a3, v101, v211, 128, 30, v102, v103, v104);
                objc_msgSend_setBuffer_offset_atIndex_(a3, v105, v185, 0, 29, v106, v107, v108);
                objc_msgSend_setBuffer_offset_atIndex_(a3, v109, v184, 0, 28, v110, v111, v112);
                v118 = 32 * v56;
                v119 = 1;
                if (*(v52 + 88) == 3)
                {
                  v120 = 1;
                }

                else
                {
                  v120 = 2;
                }

                v121 = v118 << v120;
                if (v51[5].i64[1] != 3)
                {
                  v119 = 2;
                }

                objc_msgSend_setThreadgroupMemoryLength_atIndex_(a3, v113, (v118 << v119) + v121, 0, v114, v115, v116, v117);
                *&v232[0] = (v183 * v180 + 31) >> 5;
                *(&v232[0] + 1) = ((v178 + 31) >> 5) * v199;
                *&v232[1] = v179;
                *&v202 = v56;
                *(&v202 + 1) = 1;
                v203 = v192;
                objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a3, v122, v232, &v202, v123, v124, v125, v126);
                if (v188 >= 2 && v193 + v176 == v177)
                {
                  v201[0] = v188;
                  v201[1] = v174 >> 2;
                  v201[2] = v175 >> 2;
                  MPSLibrary::CreateUberShaderKey();
                  v134 = MPSLibrary::GetPipelineStateForMPSKey();
                  MPSLibrary::ReleaseMPSKey();
                  objc_msgSend_setComputePipelineState_(a3, v135, v134, v136, v137, v138, v139, v140, 0, 0, 0, 0, 0);
                  objc_msgSend_setBytes_length_atIndex_(a3, v141, v201, 12, 30, v142, v143, v144);
                  objc_msgSend_setBuffer_offset_atIndex_(a3, v145, v185, 0, 29, v146, v147, v148);
                  objc_msgSend_setBuffer_offset_atIndex_(a3, v149, v184, 0, 28, v150, v151, v152);
                  objc_msgSend_setBuffer_offset_atIndex_(a3, v153, explicit, 0, 27, v154, v155, v156);
                  objc_msgSend_setBuffer_offset_atIndex_(a3, v157, v194, 0, 26, v158, v159, v160);
                  *&v232[0] = ((v174 >> 2) + 255) >> 8;
                  *(v232 + 8) = vdupq_n_s64(1uLL);
                  v202 = xmmword_239D7E320;
                  v203 = 1;
                  objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a3, v161, v232, &v202, v162, v163, v164, v165);
                  MPSReturnTemporaryBufferToCommandBufferCache();
                  MPSReturnTemporaryBufferToCommandBufferCache();
                }

                if ((objc_msgSend_retainedReferences(v57, v127, v128, v129, v130, v131, v132, v133) & 1) == 0)
                {
                  v166 = explicit;
                  v167 = v194;
                  v200[0] = MEMORY[0x277D85DD0];
                  v200[1] = 3221225472;
                  v200[2] = sub_239D3D200;
                  v200[3] = &unk_278B2F6B0;
                  v200[4] = explicit;
                  v200[5] = v194;
                  objc_msgSend_addCompletedHandler_(v57, v168, v200, v169, v170, v171, v172, v173);
                }

                MPSLibrary::ReleaseMPSKey();
                MPSAutoCache::~MPSAutoCache(v231);
                return 0;
              }

              v95 = objc_msgSend_count(v51[4].i64[0], v83, v84, v85, v86, v87, v88, v89);
              v245 = 0u;
              v246 = 0u;
              v243 = 0u;
              v244 = 0u;
              v241 = 0u;
              v242 = 0u;
              v239 = 0u;
              v240 = 0u;
              v237 = 0u;
              v238 = 0u;
              v235 = 0u;
              v236 = 0u;
              v233 = 0u;
              v234 = 0u;
              memset(v232, 0, sizeof(v232));
              if (!v15)
              {
LABEL_81:
                v56 = v187;
                v52 = a5;
                v51 = a6;
                v57 = v186;
                goto LABEL_82;
              }

              v96 = v95;
              v97 = 0;
              while (1)
              {
                if (v96 <= v97)
                {
                  v98 = 0;
                  if (v15 - v97 >= 0x20)
                  {
                    v99 = 32;
                  }

                  else
                  {
                    v99 = v15 - v97;
                  }

                  v100 = v99;
                  if (!v99)
                  {
                    goto LABEL_74;
                  }
                }

                else
                {
                  if (v96 - v97 >= 0x20)
                  {
                    v98 = 32;
                    objc_msgSend_getObjects_range_(v90, v91, v232, v97, 32, v92, v93, v94);
                  }

                  else
                  {
                    v98 = v96 - v97;
                    objc_msgSend_getObjects_range_(v90, v91, v232, v97, v96 - v97, v92, v93, v94);
                  }

                  if (v15 - v97 >= 0x20)
                  {
                    v99 = 32;
                  }

                  else
                  {
                    v99 = v15 - v97;
                  }

                  v100 = v99 - v98;
                  if (v99 == v98)
                  {
                    goto LABEL_74;
                  }
                }

                bzero(v232 + 8 * v98, 8 * v100);
LABEL_74:
                objc_msgSend_setTextures_withRange_(a3, v91, v232, v97 + v15, v99, v92, v93, v94);
                v97 += v99;
                if (v97 >= v15)
                {
                  goto LABEL_81;
                }
              }
            }

            v77 = objc_msgSend_count(*(a5 + 64), v65, v66, v67, v68, v69, v70, v71);
            v245 = 0u;
            v246 = 0u;
            v243 = 0u;
            v244 = 0u;
            v241 = 0u;
            v242 = 0u;
            v239 = 0u;
            v240 = 0u;
            v237 = 0u;
            v238 = 0u;
            v235 = 0u;
            v236 = 0u;
            v233 = 0u;
            v234 = 0u;
            memset(v232, 0, sizeof(v232));
            if (!v15)
            {
LABEL_60:
              v56 = v187;
              v52 = a5;
              v51 = a6;
              v57 = v186;
              goto LABEL_61;
            }

            v78 = v77;
            v79 = 0;
            while (1)
            {
              if (v78 <= v79)
              {
                v80 = 0;
                if (v15 - v79 >= 0x20)
                {
                  v81 = 32;
                }

                else
                {
                  v81 = v15 - v79;
                }

                v82 = v81;
                if (!v81)
                {
                  goto LABEL_53;
                }
              }

              else
              {
                if (v78 - v79 >= 0x20)
                {
                  v80 = 32;
                  objc_msgSend_getObjects_range_(v72, v73, v232, v79, 32, v74, v75, v76);
                }

                else
                {
                  v80 = v78 - v79;
                  objc_msgSend_getObjects_range_(v72, v73, v232, v79, v78 - v79, v74, v75, v76);
                }

                if (v15 - v79 >= 0x20)
                {
                  v81 = 32;
                }

                else
                {
                  v81 = v15 - v79;
                }

                v82 = v81 - v80;
                if (v81 == v80)
                {
                  goto LABEL_53;
                }
              }

              bzero(v232 + 8 * v80, 8 * v82);
LABEL_53:
              objc_msgSend_setTextures_withRange_(a3, v73, v232, v79, v81, v74, v75, v76);
              v79 += v81;
              if (v79 >= v15)
              {
                goto LABEL_60;
              }
            }
          }
        }

        else
        {
          v27 = 4 * ((v174 & 0xFFFFFFFFFFFFFFFCLL) + (v24 & 0xFFFFFFFFFFFFFFFCLL));
          v28 = v193;
          if (v15 < v193)
          {
            v28 = v15;
          }

          v29 = v24 >> 2;
          v30 = v29 * (16 * v28 + 16);
          v31 = 16 * v29;
          do
          {
            v32 = v28--;
            v30 -= v31;
          }

          while (v32 >= 2 && v27 * v32 > 0x100000);
          v26 = v28 + 1;
          *(v198 + 336) = v28 + 1;
          if (v32 >= 2)
          {
            v33 = v28 + 1;
            v185 = MPSGetTemporaryBufferFromCommandBufferCache();
            v34 = MPSGetTemporaryBufferFromCommandBufferCache();
            *(v198 + 304) = v185;
            v184 = v34;
            *(v198 + 312) = v34;
            *(v198 + 288) = 0;
            v26 = v33;
            goto LABEL_27;
          }
        }

        v184 = v194;
        v185 = explicit;
        goto LABEL_27;
      }
    }

    v194 = 0;
    goto LABEL_14;
  }

  return sub_239C2570C(a1, a2, a3, a4, a5, a6->i64, a7, a8);
}

uint64_t sub_239D3CF4C(uint64_t a1, uint64_t a2, __int128 *a3, uint64_t a4, uint64_t a5)
{
  v6 = *(a2 + 64);
  v7 = MPSCreateFunctionConstantValues();
  v12 = v7;
  v80 = v6 >> 4;
  v79 = (v6 >> 8) & 0xF;
  v78[1] = v6 >> 12;
  v78[0] = v6 >> 12;
  v77 = BYTE2(v6) & 1;
  v76 = (v6 >> 18) & 0xF;
  v75 = (v6 >> 22) & 0xF;
  v74 = (v6 & 0x20000) != 0;
  v73 = (v6 & 0x4000000) != 0;
  v72 = (v6 & 0x8000000) != 0;
  v71 = (v6 >> 39) & 7;
  v70 = (v6 >> 42) & 7;
  v69 = (v6 >> 45) & 7;
  v68 = (v6 >> 28) & 0x3F;
  v67 = (v6 >> 34) & 0x1F;
  v66 = BYTE6(v6) & 1;
  v65 = (v6 & 0x2000000000000) != 0;
  v81 = v6 & 0xF;
  if ((v6 & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v7, v8, &v81, 37, 115, v9, v10, v11);
  }

  if (v6 >> 4)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v80, 37, 114, v9, v10, v11);
  }

  if (v6 >= 0x1000u)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, v78, 38, 113, v9, v10, v11);
  }

  if (((v6 >> 8) & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v79, 41, 112, v9, v10, v11);
  }

  if ((v6 & 0x10000) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v77, 41, 111, v9, v10, v11);
  }

  if (((v6 >> 18) & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v76, 37, 109, v9, v10, v11);
  }

  if (((v6 >> 22) & 0xF) != 0)
  {
    objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v75, 37, 108, v9, v10, v11);
  }

  objc_msgSend_setConstantValue_type_atIndex_(v12, v8, &v74, 53, 107, v9, v10, v11, a4, a5);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v13, &v73, 53, 105, v14, v15, v16);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v17, &v72, 53, 104, v18, v19, v20);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v21, &v68, 41, 102, v22, v23, v24);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v25, &v67, 41, 101, v26, v27, v28);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v29, &v71, 41, 100, v30, v31, v32);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v33, &v70, 41, 99, v34, v35, v36);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v37, &v69, 41, 98, v38, v39, v40);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v41, &v66, 53, 97, v42, v43, v44);
  objc_msgSend_setConstantValue_type_atIndex_(v12, v45, &v65, 53, 96, v46, v47, v48);
  v59 = *a3;
  v60 = -1;
  v61 = 0u;
  v62 = 0u;
  v63 = 0u;
  v64 = 0;
  sub_239C19E34(v12, &v59, v49, v50, v51, v52, v53, v54);
  v55 = _MPSNewSpecializedFunction();

  return v55;
}

void sub_239D3D200(uint64_t a1)
{
  v2 = *(a1 + 40);
}

void sub_239D3D23C(uint64_t a1, char *a2, void **a3, _DWORD *a4, uint64_t a5, uint64_t a6, void *a7, uint64_t a8)
{
  v167 = a6;
  v9 = a5;
  v175 = objc_msgSend_sourceGradientFeatureChannels(a7, a2, a3, a4, a5, a6, a7, a8);
  v19 = objc_msgSend_sourceImageFeatureChannels(a7, v12, v13, v14, v15, v16, v17, v18);
  v169 = objc_msgSend_groups(a7, v20, v21, v22, v23, v24, v25, v26);
  v34 = objc_msgSend_primaryKernelWidth(a7, v27, v28, v29, v30, v31, v32, v33);
  v42 = objc_msgSend_primaryKernelHeight(a7, v35, v36, v37, v38, v39, v40, v41);
  v171 = objc_msgSend_primaryStrideInPixelsX(a7, v43, v44, v45, v46, v47, v48, v49);
  v57 = objc_msgSend_primaryStrideInPixelsY(a7, v50, v51, v52, v53, v54, v55, v56);
  v65 = objc_msgSend_primaryDilationRateX(a7, v58, v59, v60, v61, v62, v63, v64);
  v73 = objc_msgSend_primaryDilationRateY(a7, v66, v67, v68, v69, v70, v71, v72);
  v166 = objc_msgSend_channelMultiplier(a7, v74, v75, v76, v77, v78, v79, v80);
  BYTE4(v165) = v166 != 0;
  v174 = v9;
  LODWORD(v165) = v9;
  v168 = v19;
  if ((*(*a1 + 272))(a1, v34, v42, v171, v57, v65, v73, v175, v19, 1, v165))
  {
    if (a3)
    {
      v86 = v175 / v169;
      v87 = (v175 / v169 + 3) & 0xFFFFFFFFFFFFFFFCLL;
      v88 = 1;
      if (v174 == 268435488)
      {
        v88 = 2;
      }

      v89 = v19 / v169;
      v90 = v42 * v34 * v169 * (v19 / v169) * (v87 << v88);
      v91 = objc_msgSend_newBufferWithLength_options_(a2, v81, v90, 0, v82, v83, v84, v85);
      *a3 = v91;
      v99 = objc_msgSend_contents(v91, v92, v93, v94, v95, v96, v97, v98);
      bzero(v99, v90);
      if (a4 && *a3)
      {
        if (v167)
        {
          if (v169 <= v168 && v169 <= v175 && v34 && v42)
          {
            v100 = v86 * v89;
            v101 = v87 * v89;
            v102 = v169;
            if (v169 <= 1)
            {
              v102 = 1;
            }

            if (v174 == 268435488)
            {
              for (i = 0; i != v102; ++i)
              {
                v104 = 0;
                do
                {
                  v105 = 0;
                  do
                  {
                    for (j = 0; j != v34; ++j)
                    {
                      v107 = 0;
                      v108 = v42;
                      do
                      {
                        *(v99 + (j + (v104 * v87 + i * v101 + v105) * v34) * v42 + v107) = a4[v34 + ~j + (v42 + v42 * (v104 + i * v100 + v105 * v89) + ~v107) * v34];
                        ++v107;
                        --v108;
                      }

                      while (v108);
                    }

                    ++v105;
                  }

                  while (v105 < v86);
                  ++v104;
                }

                while (v104 < v89);
              }
            }

            else
            {
              for (k = 0; k != v102; ++k)
              {
                v141 = 0;
                do
                {
                  v142 = 0;
                  do
                  {
                    for (m = 0; m != v34; ++m)
                    {
                      v144 = 0;
                      v145 = v42;
                      do
                      {
                        *(v99 + (m + (v141 * v87 + k * v101 + v142) * v34) * v42 + v144) = *(a4 + v34 + ~m + (v42 + v42 * (v141 + k * v100 + v142 * v89) + ~v144) * v34);
                        ++v144;
                        --v145;
                      }

                      while (v145);
                    }

                    ++v142;
                  }

                  while (v142 < v86);
                  ++v141;
                }

                while (v141 < v89);
              }
            }
          }
        }

        else if (v169 <= v168 && v169 <= v175 && v34 && v42)
        {
          v132 = v87 * v89;
          v133 = v169;
          if (v169 <= 1)
          {
            v133 = 1;
          }

          if (v174 == 268435488)
          {
            for (n = 0; n != v133; ++n)
            {
              v135 = 0;
              do
              {
                v136 = 0;
                do
                {
                  for (ii = 0; ii != v34; ++ii)
                  {
                    v138 = 0;
                    v139 = v42;
                    do
                    {
                      *(v99 + (ii + (v135 * v87 + n * v132 + v136) * v34) * v42 + v138) = a4[v135 + (v34 + ~ii + ((n * v86 + 1 + v136) * v42 + ~v138) * v34) * v89];
                      ++v138;
                      --v139;
                    }

                    while (v139);
                  }

                  ++v136;
                }

                while (v136 < v86);
                ++v135;
              }

              while (v135 < v89);
            }
          }

          else
          {
            for (jj = 0; jj != v133; ++jj)
            {
              v147 = 0;
              do
              {
                v148 = 0;
                do
                {
                  for (kk = 0; kk != v34; ++kk)
                  {
                    v150 = 0;
                    v151 = v42;
                    do
                    {
                      *(v99 + (kk + (v147 * v87 + jj * v132 + v148) * v34) * v42 + v150) = *(a4 + v147 + (v34 + ~kk + ((jj * v86 + 1 + v148) * v42 + ~v150) * v34) * v89);
                      ++v150;
                      --v151;
                    }

                    while (v151);
                  }

                  ++v148;
                }

                while (v148 < v86);
                ++v147;
              }

              while (v147 < v89);
            }
          }
        }
      }
    }

    return;
  }

  if (qword_27DF882B8 != -1)
  {
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    if (v9 != 8)
    {
      goto LABEL_28;
    }

LABEL_33:

    sub_239C1CC0C(a1, a2, a3, a4, v9, v167, a7, v85);
    return;
  }

  if (v9 == 8)
  {
    goto LABEL_33;
  }

LABEL_28:
  if (v166)
  {
    goto LABEL_33;
  }

  if (v175 < 4)
  {
    goto LABEL_33;
  }

  if (v19 < 0x20)
  {
    goto LABEL_33;
  }

  v109 = v42 * v34;
  if (v42 * v34 * v175 < 0x100 || (byte_27DF882A9 & 1) != 0)
  {
    goto LABEL_33;
  }

  v110 = v175 / v169;
  v111 = (v175 / v169 + 7) & 0xFFFFFFFFFFFFFFF8;
  if (v175 / v169 <= 8)
  {
    v111 = 8;
  }

  if (v110 >= 5)
  {
    v112 = v111;
  }

  else
  {
    v112 = 4;
  }

  v113 = 1;
  if (v174 == 268435488)
  {
    v113 = 2;
  }

  v114 = v109 * v168 * (v112 << v113);
  v115 = objc_msgSend_newBufferWithLength_options_(a2, v81, v114, 0, v82, v83, v84, v85);
  *a3 = v115;
  if (a4 && v115)
  {
    v123 = v168 / v169;
    v124 = v168 / v169 * v109;
    v125 = v112 * v109;
    v173 = v112 * v109 * (v168 / v169);
    v126 = objc_msgSend_contents(v115, v116, v117, v118, v119, v120, v121, v122);
    bzero(v126, v114);
    v127 = 2;
    if (v110 >= 5)
    {
      v127 = 3;
    }

    v128 = 7;
    if (v110 < 5)
    {
      v128 = 3;
    }

    v129 = (v42 << v127) * v34;
    if (v167)
    {
      if (v124)
      {
        if (v174 == 268435488)
        {
          for (mm = 0; mm != v175; ++mm)
          {
            for (nn = 0; nn < v124; ++nn)
            {
              *&v126[4 * mm / v110 * v173 + 4 * nn / v109 * v125 + 4 * ((v34 + ~(nn % v109 % v34) + (v42 + ~(nn % v109 / v34)) * v34) << v127) + 4 * ((mm % v110) & v128) + 4 * ((mm % v110) >> v127) * v129] = a4[mm * v124 + nn];
            }
          }
        }

        else
        {
          for (i1 = 0; i1 != v175; ++i1)
          {
            for (i2 = 0; i2 < v124; ++i2)
            {
              *&v126[2 * i1 / v110 * v173 + 2 * i2 / v109 * v125 + 2 * ((v34 + ~(i2 % v109 % v34) + (v42 + ~(i2 % v109 / v34)) * v34) << v127) + 2 * ((i1 % v110) & v128) + 2 * ((i1 % v110) >> v127) * v129] = *(a4 + i1 * v124 + i2);
            }
          }
        }
      }
    }

    else if (v124)
    {
      for (i3 = 0; i3 != v175; ++i3)
      {
        v153 = (i3 % v110) & v128;
        v154 = ((i3 % v110) >> v127) * v129;
        v155 = i3 * v124;
        v156 = i3 / v110 * v173;
        if (v174 == 268435488)
        {
          v157 = 0;
          v158 = &a4[v155];
          v159 = &v126[4 * v156];
          do
          {
            *&v159[4 * v157 % v123 * v125 + 4 * ((v34 + ~(v157 / v123 % v34) + (v42 + ~(v157 / v123 / v34)) * v34) << v127) + 4 * v153 + 4 * v154] = v158[v157];
            ++v157;
          }

          while (v157 < v124);
        }

        else
        {
          v160 = 0;
          v161 = a4 + 2 * v155;
          v162 = &v126[2 * v156];
          do
          {
            *&v162[2 * v160 % v123 * v125 + 2 * ((v34 + ~(v160 / v123 % v34) + (v42 + ~(v160 / v123 / v34)) * v34) << v127) + 2 * v153 + 2 * v154] = *&v161[2 * v160];
            ++v160;
          }

          while (v160 < v124);
        }
      }
    }
  }
}

uint64_t sub_239D3DB0C(uint64_t a1, char *a2, _WORD *a3, uint64_t a4, uint64_t a5, void *a6, uint64_t a7, uint64_t a8)
{
  v164 = a5;
  v9 = a4;
  v12 = objc_msgSend_sourceGradientFeatureChannels(a6, a2, a3, a4, a5, a6, a7, a8);
  v20 = objc_msgSend_sourceImageFeatureChannels(a6, v13, v14, v15, v16, v17, v18, v19);
  v160 = objc_msgSend_groups(a6, v21, v22, v23, v24, v25, v26, v27);
  v35 = objc_msgSend_primaryKernelWidth(a6, v28, v29, v30, v31, v32, v33, v34);
  v43 = objc_msgSend_primaryKernelHeight(a6, v36, v37, v38, v39, v40, v41, v42);
  v158 = objc_msgSend_primaryStrideInPixelsX(a6, v44, v45, v46, v47, v48, v49, v50);
  v157 = objc_msgSend_primaryStrideInPixelsY(a6, v51, v52, v53, v54, v55, v56, v57);
  v65 = objc_msgSend_primaryDilationRateX(a6, v58, v59, v60, v61, v62, v63, v64);
  v73 = objc_msgSend_primaryDilationRateY(a6, v66, v67, v68, v69, v70, v71, v72);
  v156 = objc_msgSend_channelMultiplier(a6, v74, v75, v76, v77, v78, v79, v80);
  BYTE4(v155) = v156 != 0;
  v165 = v9;
  LODWORD(v155) = v9;
  v81 = v20;
  if ((*(*a1 + 272))(a1, v35, v43, v158, v157, v65, v73, v12, v20, 1, v155))
  {
    v89 = v12 / v160;
    v90 = (v12 / v160 + 3) & 0xFFFFFFFFFFFFFFFCLL;
    v91 = v81 / v160;
    result = objc_msgSend_contents(a2, v82, v83, v84, v85, v86, v87, v88);
    v93 = v90 * (v81 / v160);
    v94 = v160;
    if (v164)
    {
      if (v160 <= v81 && v160 <= v12 && v35 && v43)
      {
        v95 = v89 * v91;
        if (v160 <= 1)
        {
          v94 = 1;
        }

        if (v165 == 268435488)
        {
          v96 = 0;
          v97 = (result + 4 * v35);
          do
          {
            v98 = 0;
            do
            {
              v99 = 0;
              result = v98 + v96 * v95;
              do
              {
                for (i = 0; i != v35; ++i)
                {
                  v101 = 0;
                  v102 = v43;
                  do
                  {
                    *&v97[2 * ~i + 2 * (v43 + v43 * (result + v99 * v91) + ~v101) * v35] = *&a3[2 * (i + (v98 * v90 + v96 * v93 + v99) * v35) * v43 + 2 * v101];
                    ++v101;
                    --v102;
                  }

                  while (v102);
                }

                ++v99;
              }

              while (v99 < v89);
              ++v98;
            }

            while (v98 < v91);
            ++v96;
          }

          while (v96 != v94);
        }

        else
        {
          v115 = 0;
          v116 = (result + 2 * v35);
          do
          {
            v117 = 0;
            do
            {
              v118 = 0;
              result = v117 + v115 * v95;
              do
              {
                for (j = 0; j != v35; ++j)
                {
                  v120 = 0;
                  v121 = v43;
                  do
                  {
                    v116[~j + (v43 + v43 * (result + v118 * v91) + ~v120) * v35] = a3[(j + (v117 * v90 + v115 * v93 + v118) * v35) * v43 + v120];
                    ++v120;
                    --v121;
                  }

                  while (v121);
                }

                ++v118;
              }

              while (v118 < v89);
              ++v117;
            }

            while (v117 < v91);
            ++v115;
          }

          while (v115 != v94);
        }
      }
    }

    else if (v160 <= v81 && v160 <= v12 && v35 && v43)
    {
      if (v160 <= 1)
      {
        v108 = 1;
      }

      else
      {
        v108 = v160;
      }

      if (v165 == 268435488)
      {
        for (k = 0; k != v108; ++k)
        {
          v110 = 0;
          do
          {
            v111 = 0;
            do
            {
              for (m = 0; m != v35; ++m)
              {
                v113 = 0;
                v114 = v43;
                do
                {
                  *(result + 4 * v110 + 4 * (v35 + ~m + ((k * v89 + 1 + v111) * v43 + ~v113) * v35) * v91) = *&a3[2 * (m + (v110 * v90 + k * v93 + v111) * v35) * v43 + 2 * v113];
                  ++v113;
                  --v114;
                }

                while (v114);
              }

              ++v111;
            }

            while (v111 < v89);
            ++v110;
          }

          while (v110 < v91);
        }
      }

      else
      {
        for (n = 0; n != v108; ++n)
        {
          v137 = 0;
          do
          {
            v138 = 0;
            do
            {
              for (ii = 0; ii != v35; ++ii)
              {
                v140 = 0;
                v141 = v43;
                do
                {
                  *(result + 2 * v137 + 2 * (v35 + ~ii + ((n * v89 + 1 + v138) * v43 + ~v140) * v35) * v91) = a3[(ii + (v137 * v90 + n * v93 + v138) * v35) * v43 + v140];
                  ++v140;
                  --v141;
                }

                while (v141);
              }

              ++v138;
            }

            while (v138 < v89);
            ++v137;
          }

          while (v137 < v91);
        }
      }
    }

    return result;
  }

  v159 = v12;
  if (qword_27DF882B8 != -1)
  {
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    v103 = v165;
    v104 = v12;
    v105 = v164;
    v106 = a2;
    if (v165 != 8)
    {
      goto LABEL_23;
    }

LABEL_28:

    return sub_239C1DD50(a1, v106, a3, v103, v105, a6, v87, v88);
  }

  v103 = v165;
  v104 = v12;
  v105 = v164;
  v106 = a2;
  if (v165 == 8)
  {
    goto LABEL_28;
  }

LABEL_23:
  if (v156)
  {
    goto LABEL_28;
  }

  if (v104 < 4)
  {
    goto LABEL_28;
  }

  if (v20 < 0x20)
  {
    goto LABEL_28;
  }

  v107 = v43 * v35;
  if (v43 * v35 * v104 < 0x100 || (byte_27DF882A9 & 1) != 0)
  {
    goto LABEL_28;
  }

  v122 = v104 / v160;
  if (v104 / v160 <= 8)
  {
    v123 = 8;
  }

  else
  {
    v123 = (v104 / v160 + 7) & 0xFFFFFFFFFFFFFFF8;
  }

  if (v103 == 268435488)
  {
    v124 = 2;
  }

  else
  {
    v124 = 1;
  }

  v125 = v81 / v160;
  v126 = objc_msgSend_contents(v106, v106, v83, v103, v105, v86, v87, v88);
  v127 = 4;
  if (v122 >= 5)
  {
    v127 = v123;
  }

  v128 = v107 * v81 * (v127 << v124);
  v129 = v125 * v107;
  v130 = v127 * v107;
  v161 = v127 * v107 * v125;
  v163 = v126;
  if (v122 < 5)
  {
    v131 = 2;
  }

  else
  {
    v131 = 3;
  }

  if (v122 >= 5)
  {
    v132 = 7;
  }

  else
  {
    v132 = 3;
  }

  bzero(v126, v128);
  v133 = (v43 << v131) * v35;
  if (v164)
  {
    result = v161;
    if (v129)
    {
      if (v165 == 268435488)
      {
        v134 = 0;
        do
        {
          for (jj = 0; jj < v129; ++jj)
          {
            *&v163[2 * v134 / v122 * v161 + 2 * jj / v107 * v130 + 2 * jj] = *&a3[2 * v134 * v129 + 2 * ((v134 % v122) & v132) + 2 * ((v134 % v122) >> v131) * v133 + 2 * ((v35 + ~(jj % v107 % v35) + (v43 + ~(jj % v107 / v35)) * v35) << v131)];
          }

          ++v134;
        }

        while (v134 != v159);
      }

      else
      {
        v153 = 0;
        do
        {
          for (kk = 0; kk < v129; ++kk)
          {
            v163[v153 / v122 * v161 + kk / v107 * v130 + kk] = a3[v153 * v129 + ((v153 % v122) & v132) + ((v153 % v122) >> v131) * v133 + ((v35 + ~(kk % v107 % v35) + (v43 + ~(kk % v107 / v35)) * v35) << v131)];
          }

          ++v153;
        }

        while (v153 != v159);
      }
    }
  }

  else
  {
    result = v163;
    if (v129)
    {
      v142 = 0;
      do
      {
        v143 = (v142 % v122) & v132;
        v144 = ((v142 % v122) >> v131) * v133;
        v145 = v142 * v129;
        v146 = v142 / v122 * v161;
        if (v165 == 268435488)
        {
          v147 = 0;
          v148 = &v163[2 * v146];
          v149 = &a3[2 * v145 + 2 * v143 + 2 * v144];
          do
          {
            *&v148[2 * v147 % v125 * v130 + 2 * v147] = *(v149 + 4 * ((v35 + ~(v147 / v125 % v35) + (v43 + ~(v147 / v125 / v35)) * v35) << v131));
            ++v147;
          }

          while (v147 < v129);
        }

        else
        {
          v150 = 0;
          v151 = &v163[v146];
          v152 = &a3[v145 + v143 + v144];
          do
          {
            v151[v150 % v125 * v130 + v150] = *(v152 + 2 * ((v35 + ~(v150 / v125 % v35) + (v43 + ~(v150 / v125 / v35)) * v35) << v131));
            ++v150;
          }

          while (v150 < v129);
        }

        ++v142;
      }

      while (v142 != v159);
    }
  }

  return result;
}

uint64_t sub_239D3E340(uint64_t a1, char *a2, void **a3, void **a4, void *a5, char *a6, float32x4_t *a7, char *a8, unsigned __int8 a9, unsigned int a10, int a11, uint64_t a12, void *a13)
{
  v256 = objc_msgSend_inputFeatureChannels(a13, a2, a3, a4, a5, a6, a7, a8);
  v22 = objc_msgSend_outputFeatureChannels(a13, v15, v16, v17, v18, v19, v20, v21);
  v255 = objc_msgSend_groups(a13, v23, v24, v25, v26, v27, v28, v29);
  v37 = objc_msgSend_kernelWidth(a13, v30, v31, v32, v33, v34, v35, v36);
  v45 = objc_msgSend_kernelHeight(a13, v38, v39, v40, v41, v42, v43, v44);
  v260 = objc_msgSend_strideInPixelsX(a13, v46, v47, v48, v49, v50, v51, v52);
  v259 = objc_msgSend_strideInPixelsY(a13, v53, v54, v55, v56, v57, v58, v59);
  v67 = objc_msgSend_dilationRateX(a13, v60, v61, v62, v63, v64, v65, v66);
  v75 = objc_msgSend_dilationRateY(a13, v68, v69, v70, v71, v72, v73, v74);
  v245 = objc_msgSend_channelMultiplier(a13, v76, v77, v78, v79, v80, v81, v82);
  BYTE4(v243) = v245 != 0;
  LODWORD(v243) = a10;
  v90 = objc_msgSend_subPixelScaleFactor(a13, v83, v84, v85, v86, v87, v88, v89);
  if (!(*(*a1 + 272))(a1, v37, v45, v260, v259, v67, v75, v256, v22, v90, v243))
  {
    if (qword_27DF882B8 == -1)
    {
      v136 = a10;
      if (v245)
      {
        goto LABEL_50;
      }
    }

    else
    {
      dispatch_once(&qword_27DF882B8, &unk_284CC8640);
      v136 = a10;
      if (v245)
      {
        goto LABEL_50;
      }
    }

    if (v136 != 8 && v90 == 1 && v256 >= 4 && v22 >= 0x20)
    {
      v137 = v45 * v37;
      if (v137 * v256 >= 0x100 && (byte_27DF882A9 & 1) == 0)
      {
        v164 = v256 / v255;
        v165 = (v256 / v255 + 7) & 0xFFFFFFFFFFFFFFF8;
        if (v256 / v255 <= 8)
        {
          v165 = 8;
        }

        if (v164 >= 5)
        {
          v166 = v165;
        }

        else
        {
          v166 = 4;
        }

        v167 = 1;
        if (v136 == 268435488)
        {
          v167 = 2;
        }

        v168 = v166 << v167;
        v169 = v137 * v22 * v168;
        v170 = *a3;
        if (!*a3)
        {
          v170 = objc_msgSend_newBufferWithLength_options_(a2, v91, v137 * v22 * v168, 0, v94, v95, v96, v97);
          *a3 = v170;
          if (!v170)
          {
            return 1;
          }
        }

        v171 = v166 * v137;
        v172 = v164 * v137;
        v173 = objc_msgSend_contents(v170, v91, v92, v93, v94, v95, v96, v97);
        bzero(v173, v169);
        v179 = 2;
        if (v164 >= 5)
        {
          v179 = 3;
        }

        v180 = 7;
        if (v164 < 5)
        {
          v180 = 3;
        }

        v181 = v137 << v179;
        if (a11)
        {
          v182 = a10;
          v183 = v22;
          if (v172)
          {
            if (a10 == 268435488)
            {
              for (i = 0; i != v22; ++i)
              {
                for (j = 0; j < v172; ++j)
                {
                  *(v173 + i * v171 + ((j / v137) >> v179) * v181 + ((j / v137) & v180) + ((j % v137) << v179)) = *&a6[4 * i * v172 + 4 * j];
                }
              }
            }

            else
            {
              for (k = 0; k != v22; ++k)
              {
                for (m = 0; m < v172; ++m)
                {
                  *(v173 + k * v171 + ((m / v137) >> v179) * v181 + ((m / v137) & v180) + ((m % v137) << v179)) = *&a6[2 * k * v172 + 2 * m];
                }
              }
            }
          }
        }

        else
        {
          v182 = a10;
          v183 = v22;
          if (v172)
          {
            if (a10 == 268435488)
            {
              for (n = 0; n != v22; ++n)
              {
                for (ii = 0; ii < v172; ++ii)
                {
                  *(v173 + n * v171 + ((ii % v164) >> v179) * v181 + ((ii % v164) & v180) + ((ii / v164) << v179)) = *&a6[4 * n * v172 + 4 * ii];
                }
              }
            }

            else
            {
              for (jj = 0; jj != v22; ++jj)
              {
                for (kk = 0; kk < v172; ++kk)
                {
                  *(v173 + jj * v171 + ((kk % v164) >> v179) * v181 + ((kk % v164) & v180) + ((kk / v164) << v179)) = *&a6[2 * jj * v172 + 2 * kk];
                }
              }
            }
          }
        }

        v221 = v183 / v255;
        v222 = a7;
        if (a4)
        {
          v223 = v221 * v255;
          v224 = *a4;
          if (v182 == 268435488)
          {
            v225 = 4 * v223;
            if (!v224)
            {
              v224 = objc_msgSend_newBufferWithLength_options_(a2, v182, v225, 0, v175, v176, v177, v178);
              *a4 = v224;
              if (!v224)
              {
                return 1;
              }
            }

            v226 = objc_msgSend_contents(v224, v182, v183, v174, v175, v176, v177, v178);
            bzero(v226, v225);
            if (a7)
            {
              v227 = 4 * v221;
              if (v255 <= 1)
              {
                v228 = 1;
              }

              else
              {
                v228 = v255;
              }

              do
              {
                memcpy(v226, v222, 4 * v221);
                v226 += v227;
                v222 = (v222 + v227);
                --v228;
              }

              while (v228);
            }
          }

          else
          {
            if (!v224)
            {
              v224 = objc_msgSend_newBufferWithLength_options_(a2, v182, 2 * v223, 0, v175, v176, v177, v178);
              *a4 = v224;
              if (!v224)
              {
                return 1;
              }
            }

            v229 = objc_msgSend_contents(v224, v182, v183, v174, v175, v176, v177, v178);
            bzero(v229, v221 * v255);
            if (a7)
            {
              if (v255 <= 1)
              {
                v230 = 1;
              }

              else
              {
                v230 = v255;
              }

              do
              {
                MPSConvertFloatToHalf();
                v229 += 2 * v221;
                v222 = (v222 + 4 * v221);
                --v230;
              }

              while (v230);
            }
          }
        }

        if (a5)
        {
          *a5 = 0;
          v231 = a8;
          if (a8)
          {
            v232 = 4 * v221;
            v233 = objc_msgSend_newBufferWithLength_options_(a2, v182, v232 * v255, 0, v175, v176, v177, v178);
            *a5 = v233;
            v241 = objc_msgSend_contents(v233, v234, v235, v236, v237, v238, v239, v240);
            bzero(v241, v232 * v255);
            if (v255 <= 1)
            {
              v242 = 1;
            }

            else
            {
              v242 = v255;
            }

            do
            {
              memcpy(v241, v231, v232);
              v241 += v232;
              v231 += v232;
              --v242;
            }

            while (v242);
          }
        }

        return 0;
      }
    }

LABEL_50:

    return sub_239C1EEEC(a1, a2, a3, a4, a5, a6, a7, a8, a9, v136, a11, a12, a13);
  }

  v98 = v256 / v255;
  v246 = v256 / v255 + 3;
  v99 = 1;
  if (a10 == 268435488)
  {
    v99 = 2;
  }

  v261 = v246 & 0xFFFFFFFFFFFFFFFCLL;
  v100 = (v246 & 0xFFFFFFFFFFFFFFFCLL) << v99;
  v101 = v45 * v37 * v22;
  v102 = v101 * v100;
  v103 = *a3;
  if (!*a3)
  {
    v103 = objc_msgSend_newBufferWithLength_options_(a2, v91, v101 * v100, 0, v94, v95, v96, v97);
    *a3 = v103;
    if (!v103)
    {
      return 1;
    }
  }

  v104 = objc_msgSend_contents(v103, v91, v92, v93, v94, v95, v96, v97);
  bzero(v104, v102);
  if (v22)
  {
    v111 = v255 > v256;
  }

  else
  {
    v111 = 1;
  }

  v112 = v111;
  v113 = v22;
  if (!a11)
  {
    if ((v112 & 1) == 0 && v37 && v45)
    {
      if (a10 == 268435488)
      {
        v159 = 0;
        do
        {
          v160 = 0;
          do
          {
            for (mm = 0; mm != v37; ++mm)
            {
              v162 = 0;
              v163 = v45;
              do
              {
                *&v104[4 * (mm + (v160 + v159 * v261) * v37) * v45 + 4 * v162] = *&a6[4 * v160 + 4 * (mm + (v162 + v159 * v45) * v37) * v98];
                ++v162;
                --v163;
              }

              while (v163);
            }

            ++v160;
          }

          while (v160 < v98);
          ++v159;
        }

        while (v159 != v22);
      }

      else
      {
        v212 = 0;
        do
        {
          v213 = 0;
          do
          {
            for (nn = 0; nn != v37; ++nn)
            {
              v215 = 0;
              v216 = v45;
              do
              {
                *&v104[2 * (nn + (v213 + v212 * v261) * v37) * v45 + 2 * v215] = *&a6[2 * v213 + 2 * (nn + (v215 + v212 * v45) * v37) * v98];
                ++v215;
                --v216;
              }

              while (v216);
            }

            ++v213;
          }

          while (v213 < v98);
          ++v212;
        }

        while (v212 != v22);
      }
    }

    goto LABEL_54;
  }

  if ((v112 & 1) != 0 || !v37 || !v45)
  {
    goto LABEL_54;
  }

  v114 = v37 * v45;
  v115 = v37 * v45 * (v246 >> 2);
  v116 = v45 * v98;
  v117 = v45 + v37;
  if (a10 == 268435488)
  {
    v118 = 0;
    v263 = 16 * v115;
    v119 = 4 * v114;
    v257 = 4 * v116;
    v120 = 4 * v45;
    v247 = &a6[4 * v117 - 4];
    v122 = v45 > 7 && v37 == 1;
    do
    {
      v123 = 0;
      v105 = v118 * v98;
      v106 = &v104[v263 * v118];
      v107 = &v104[v119 + v263 * v118];
      v108 = &a6[v257 * v118];
      v109 = v247 + v257 * v118;
      do
      {
        v110 = 0;
        v124 = (v123 + v105) * v45;
        v126 = v106 + v119 * v123 < v109 + v120 * v123 && v108 + v120 * v123 < v107 + v119 * v123 || (v45 & 0x2000000000000000) != 0;
        v127 = v126 | ~v122;
        do
        {
          v128 = &a6[4 * v110];
          v129 = &v104[4 * (v110 + (v123 + v118 * v261) * v37) * v45];
          v130 = 0;
          if (v127)
          {
            goto LABEL_39;
          }

          v131 = v45 & 0xDFFFFFFFFFFFFFF8;
          do
          {
            v132 = &v128[4 * v124 + 4 * v130];
            v133 = *(v132 + 1);
            v134 = &v129[4 * v130];
            *v134 = *v132;
            *(v134 + 1) = v133;
            v130 += 8;
            v131 -= 8;
          }

          while (v131);
          v130 = v45 & 0xDFFFFFFFFFFFFFF8;
          if (v45 != (v45 & 0xDFFFFFFFFFFFFFF8))
          {
LABEL_39:
            v135 = v45 - v130;
            do
            {
              *&v129[4 * v130] = *&v128[4 * (v130 + v124) * v37];
              ++v130;
              --v135;
            }

            while (v135);
          }

          ++v110;
        }

        while (v110 != v37);
        ++v123;
      }

      while (v123 < v98);
      ++v118;
      v113 = v22;
    }

    while (v118 != v22);
    goto LABEL_54;
  }

  v186 = 0;
  v251 = 8 * v115;
  v248 = 2 * v116;
  v264 = 2 * v45;
  v187 = 2 * v114;
  v244 = &v104[2 * v114];
  v189 = v45 > 3 && v37 == 1;
  v190 = v45 & 0xBFFFFFFFFFFFFFFCLL;
  v105 = (v45 >> 62) & 1;
  while (2)
  {
    v191 = 0;
    v106 = v186 * v98;
    v107 = v186 * v261;
    v258 = v186;
    v108 = &v104[v251 * v186];
    v109 = &v244[v251 * v186];
    v110 = &a6[v248 * v186];
    v192 = &a6[2 * v117 - 2 + v248 * v186];
    while (2)
    {
      v193 = 0;
      v194 = (v191 + v106) * v45;
      v196 = v108 + v187 * v191 < (v192 + v264 * v191) && v110 + v264 * v191 < (v109 + v187 * v191) || (v45 & 0x4000000000000000) != 0;
      v197 = v196 | ~v189;
      do
      {
        v198 = &a6[2 * v193];
        v199 = &v104[2 * (v193 + (v191 + v107) * v37) * v45];
        if (v197)
        {
          v200 = 0;
LABEL_140:
          v209 = v45 - v200;
          do
          {
            *&v199[2 * v200] = *&v198[2 * (v200 + v194) * v37];
            ++v200;
            --v209;
          }

          while (v209);
          goto LABEL_128;
        }

        v201 = &v198[2 * v194];
        if (v45 >= 0x10)
        {
          v203 = 0;
          v204 = v45 & 0xBFFFFFFFFFFFFFF0;
          do
          {
            v205 = &v201[2 * v203];
            v206 = *(v205 + 1);
            v207 = &v199[2 * v203];
            *v207 = *v205;
            *(v207 + 1) = v206;
            v203 += 16;
            v204 -= 16;
          }

          while (v204);
          if (v45 == (v45 & 0xBFFFFFFFFFFFFFF0))
          {
            goto LABEL_128;
          }

          v202 = v45 & 0xBFFFFFFFFFFFFFF0;
          v200 = v45 & 0xBFFFFFFFFFFFFFF0;
          if ((v45 & 0xC) == 0)
          {
            goto LABEL_140;
          }
        }

        else
        {
          v202 = 0;
        }

        v208 = v190 - v202;
        do
        {
          *&v199[2 * v202] = *&v201[2 * v202];
          v202 += 4;
          v208 -= 4;
        }

        while (v208);
        v200 = v45 & 0xBFFFFFFFFFFFFFFCLL;
        if (v45 != v190)
        {
          goto LABEL_140;
        }

LABEL_128:
        ++v193;
      }

      while (v193 != v37);
      if (++v191 < v98)
      {
        continue;
      }

      break;
    }

    v186 = v258 + 1;
    v113 = v22;
    if (v258 + 1 != v22)
    {
      continue;
    }

    break;
  }

LABEL_54:
  v139 = v113 / v255;
  v140 = (v113 / v255 + 7) & 0xFFFFFFFFFFFFFFF8;
  v141 = v140 * v255;
  v142 = a8;
  v143 = a7;
  if (!a4)
  {
LABEL_71:
    if (a5)
    {
      *a5 = 0;
      if (a8)
      {
        v149 = objc_msgSend_newBufferWithLength_options_(a2, v105, 4 * v141, 0, v107, v108, v109, v110);
        *a5 = v149;
        v157 = objc_msgSend_contents(v149, v150, v151, v152, v153, v154, v155, v156);
        bzero(v157, 4 * v141);
        if (v255 <= 1)
        {
          v158 = 1;
        }

        else
        {
          v158 = v255;
        }

        do
        {
          memcpy(v157, v142, 4 * v139);
          v157 += 4 * v140;
          v142 += 4 * v139;
          --v158;
        }

        while (v158);
      }
    }

    return 0;
  }

  v144 = *a4;
  if (a10 != 268435488)
  {
    if (!v144)
    {
      v144 = objc_msgSend_newBufferWithLength_options_(a2, v105, 2 * v141, 0, v107, v108, v109, v110);
      *a4 = v144;
      if (!v144)
      {
        return 1;
      }
    }

    v147 = objc_msgSend_contents(v144, v105, v113, v106, v107, v108, v109, v110);
    bzero(v147, 2 * v141);
    if (a7)
    {
      if (v255 <= 1)
      {
        v148 = 1;
      }

      else
      {
        v148 = v255;
      }

      do
      {
        MPSConvertFloatToHalf();
        v147 += 2 * v140;
        v143 = (v143 + 4 * v139);
        --v148;
      }

      while (v148);
    }

    goto LABEL_71;
  }

  if (v144 || (v144 = objc_msgSend_newBufferWithLength_options_(a2, v105, 4 * v141, 0, v107, v108, v109, v110), (*a4 = v144) != 0))
  {
    v145 = objc_msgSend_contents(v144, v105, v113, v106, v107, v108, v109, v110);
    bzero(v145, 4 * v141);
    if (a7)
    {
      if (v255 <= 1)
      {
        v146 = 1;
      }

      else
      {
        v146 = v255;
      }

      do
      {
        memcpy(v145, v143, 4 * v139);
        v145 += 4 * v140;
        v143 = (v143 + 4 * v139);
        --v146;
      }

      while (v146);
    }

    goto LABEL_71;
  }

  return 1;
}

void sub_239D3EF98(uint64_t a1, char *a2, char *a3, void *a4, uint64_t a5, uint64_t a6, uint64_t a7, void *a8, uint64_t a9, unsigned __int8 a10)
{
  v243 = a7;
  v10 = a5;
  v246 = objc_msgSend_kernelWidth(a3, a2, a3, a4, a5, a6, a7, a8);
  v244 = objc_msgSend_kernelHeight(a3, v13, v14, v15, v16, v17, v18, v19);
  v27 = objc_msgSend_strideInPixelsX(a3, v20, v21, v22, v23, v24, v25, v26);
  v35 = objc_msgSend_strideInPixelsY(a3, v28, v29, v30, v31, v32, v33, v34);
  v43 = objc_msgSend_dilationRateX(a3, v36, v37, v38, v39, v40, v41, v42);
  v51 = objc_msgSend_dilationRateY(a3, v44, v45, v46, v47, v48, v49, v50);
  v59 = objc_msgSend_inputFeatureChannels(a3, v52, v53, v54, v55, v56, v57, v58);
  v67 = objc_msgSend_outputFeatureChannels(a3, v60, v61, v62, v63, v64, v65, v66);
  v75 = objc_msgSend_subPixelScaleFactor(a3, v68, v69, v70, v71, v72, v73, v74);
  BYTE4(v237) = objc_msgSend_channelMultiplier(a3, v76, v77, v78, v79, v80, v81, v82) != 0;
  v249 = v10;
  LODWORD(v237) = v10;
  v247 = (*(*a1 + 272))(a1, v246, v244, v27, v35, v43, v51, v59, v67, v75, v237);
  v90 = objc_msgSend_subPixelScaleFactor(a3, v83, v84, v85, v86, v87, v88, v89);
  v98 = objc_msgSend_channelMultiplier(a3, v91, v92, v93, v94, v95, v96, v97);
  v106 = objc_msgSend_kernelWidth(a3, v99, v100, v101, v102, v103, v104, v105);
  v114 = objc_msgSend_kernelHeight(a3, v107, v108, v109, v110, v111, v112, v113);
  v122 = objc_msgSend_inputFeatureChannels(a3, v115, v116, v117, v118, v119, v120, v121);
  v130 = objc_msgSend_outputFeatureChannels(a3, v123, v124, v125, v126, v127, v128, v129);
  if (qword_27DF882B8 == -1)
  {
    v131 = 0;
    v132 = a10;
    if (v249 == 8)
    {
      goto LABEL_9;
    }
  }

  else
  {
    v236 = v130;
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    v130 = v236;
    v131 = 0;
    v132 = a10;
    if (v249 == 8)
    {
      goto LABEL_9;
    }
  }

  if (v90 == 1 && !v98)
  {
    v131 = 0;
    if (v122 >= 4 && v114 * v106 * v122 >= 0x100 && v130 >= 0x20)
    {
      v131 = byte_27DF882A9 ^ 1;
    }
  }

LABEL_9:
  v239 = v131;
  v245 = v132;
  if (v132)
  {
    v133 = @"export";
  }

  else
  {
    v133 = @"reloadForward";
  }

  v134 = objc_alloc(MEMORY[0x277CD7210]);
  v147 = objc_msgSend_initWithCommandBuffer_withDispatchType_(v134, v135, a2, 0, v136, v137, v138, v139);
  if ((a3[*MEMORY[0x277CD7378]] & 0x18) != 0)
  {
    v148 = *&a3[*MEMORY[0x277CD7360]];
    if (v148 || (v149 = objc_opt_class(), v148 = NSStringFromClass(v149), objc_msgSend_setLabel_(a3, v150, v148, v151, v152, v153, v154, v155), v148))
    {
      v156 = objc_msgSend_stringWithFormat_(MEMORY[0x277CCACA8], v140, @"_%@", v142, v143, v144, v145, v146, v133);
      v163 = objc_msgSend_stringByAppendingString_(v148, v157, v156, v158, v159, v160, v161, v162);
      if (v163)
      {
        objc_msgSend_setLabel_(v147, v140, v163, v142, v143, v144, v145, v146);
      }
    }
  }

  v238 = *&a3[*MEMORY[0x277CD7370]];
  v164 = objc_msgSend_weights(a3, v140, v141, v142, v143, v144, v145, v146);
  v172 = objc_msgSend_weightsDataType(a3, v165, v166, v167, v168, v169, v170, v171);
  v180 = objc_msgSend_biases(a3, v173, v174, v175, v176, v177, v178, v179);
  v188 = objc_msgSend_inputFeatureChannels(a3, v181, v182, v183, v184, v185, v186, v187);
  v196 = objc_msgSend_outputFeatureChannels(a3, v189, v190, v191, v192, v193, v194, v195);
  v204 = objc_msgSend_groups(a3, v197, v198, v199, v200, v201, v202, v203);
  v212 = objc_msgSend_kernelWidth(a3, v205, v206, v207, v208, v209, v210, v211);
  v220 = objc_msgSend_kernelHeight(a3, v213, v214, v215, v216, v217, v218, v219);
  v228 = objc_msgSend_channelMultiplier(a3, v221, v222, v223, v224, v225, v226, v227);
  sub_239C1FA68(a2, v147, v238, v164, a4, v249, v172, v243, a6, v180, a8, a9, v188, v196, v204, v212, v220, v228 != 0, 0, v245, v247, v239 & 1);
  objc_msgSend_endEncoding(v147, v229, v230, v231, v232, v233, v234, v235);
}

void sub_239D3F384(uint64_t a1, char *a2, char *a3, void *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v215 = a6;
  v8 = a5;
  v216 = objc_msgSend_primaryKernelWidth(a3, a2, a3, a4, a5, a6, a7, a8);
  v18 = objc_msgSend_primaryKernelHeight(a3, v11, v12, v13, v14, v15, v16, v17);
  v26 = objc_msgSend_primaryStrideInPixelsX(a3, v19, v20, v21, v22, v23, v24, v25);
  v34 = objc_msgSend_primaryStrideInPixelsY(a3, v27, v28, v29, v30, v31, v32, v33);
  v42 = objc_msgSend_primaryDilationRateX(a3, v35, v36, v37, v38, v39, v40, v41);
  v50 = objc_msgSend_primaryDilationRateY(a3, v43, v44, v45, v46, v47, v48, v49);
  v58 = objc_msgSend_sourceGradientFeatureChannels(a3, v51, v52, v53, v54, v55, v56, v57);
  v66 = objc_msgSend_sourceImageFeatureChannels(a3, v59, v60, v61, v62, v63, v64, v65);
  BYTE4(v211) = objc_msgSend_channelMultiplier(a3, v67, v68, v69, v70, v71, v72, v73) != 0;
  v219 = v8;
  LODWORD(v211) = v8;
  v217 = (*(*a1 + 272))(a1, v216, v18, v26, v34, v42, v50, v58, v66, 1, v211);
  v81 = objc_msgSend_channelMultiplier(a3, v74, v75, v76, v77, v78, v79, v80);
  v89 = objc_msgSend_primaryKernelWidth(a3, v82, v83, v84, v85, v86, v87, v88);
  v97 = objc_msgSend_primaryKernelHeight(a3, v90, v91, v92, v93, v94, v95, v96);
  v105 = objc_msgSend_sourceGradientFeatureChannels(a3, v98, v99, v100, v101, v102, v103, v104);
  v113 = objc_msgSend_sourceImageFeatureChannels(a3, v106, v107, v108, v109, v110, v111, v112);
  if (qword_27DF882B8 == -1)
  {
    v114 = 0;
    if (v219 == 8)
    {
      goto LABEL_8;
    }
  }

  else
  {
    v210 = v113;
    dispatch_once(&qword_27DF882B8, &unk_284CC8640);
    v113 = v210;
    v114 = 0;
    if (v219 == 8)
    {
      goto LABEL_8;
    }
  }

  if (!v81)
  {
    v114 = 0;
    if (v105 >= 4 && v97 * v89 * v105 >= 0x100 && v113 >= 0x20)
    {
      v114 = byte_27DF882A9 ^ 1;
    }
  }

LABEL_8:
  v212 = v114;
  v115 = objc_alloc(MEMORY[0x277CD7210]);
  v128 = objc_msgSend_initWithCommandBuffer_withDispatchType_(v115, v116, a2, 0, v117, v118, v119, v120);
  if ((a3[*MEMORY[0x277CD7378]] & 0x18) != 0)
  {
    v129 = *&a3[*MEMORY[0x277CD7360]];
    if (v129 || (v130 = objc_opt_class(), v129 = NSStringFromClass(v130), objc_msgSend_setLabel_(a3, v131, v129, v132, v133, v134, v135, v136), v129))
    {
      v137 = objc_msgSend_stringWithFormat_(MEMORY[0x277CCACA8], v121, @"_%@", v123, v124, v125, v126, v127, @"reloadBackward");
      v144 = objc_msgSend_stringByAppendingString_(v129, v138, v137, v139, v140, v141, v142, v143);
      if (v144)
      {
        objc_msgSend_setLabel_(v128, v121, v144, v123, v124, v125, v126, v127);
      }
    }
  }

  v145 = *&a3[*MEMORY[0x277CD7370]];
  v146 = objc_msgSend_weights(a3, v121, v122, v123, v124, v125, v126, v127);
  v154 = objc_msgSend_preferredWeightsDataType(a3, v147, v148, v149, v150, v151, v152, v153);
  v162 = objc_msgSend_sourceGradientFeatureChannels(a3, v155, v156, v157, v158, v159, v160, v161);
  v170 = objc_msgSend_sourceImageFeatureChannels(a3, v163, v164, v165, v166, v167, v168, v169);
  v178 = objc_msgSend_groups(a3, v171, v172, v173, v174, v175, v176, v177);
  v186 = objc_msgSend_primaryKernelWidth(a3, v179, v180, v181, v182, v183, v184, v185);
  v194 = objc_msgSend_primaryKernelHeight(a3, v187, v188, v189, v190, v191, v192, v193);
  v202 = objc_msgSend_channelMultiplier(a3, v195, v196, v197, v198, v199, v200, v201) != 0;
  sub_239C1FA68(a2, v128, v145, v146, a4, v219, v154, v215, a7, 0, 0, 0, v162, v170, v178, v186, v194, v202, 1, 0, v217, v212 & 1);
  objc_msgSend_endEncoding(v128, v203, v204, v205, v206, v207, v208, v209);
}

uint64_t sub_239D3F774(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, unint64_t a8, unint64_t a9, uint64_t a10, int a11, char a12)
{
  if (qword_27DF882C0 == -1)
  {
    v12 = 0;
    if (a2 != 3)
    {
      return v12 & 1;
    }
  }

  else
  {
    v15 = a8;
    v16 = a7;
    v17 = a6;
    v18 = a5;
    v19 = a4;
    v20 = a3;
    dispatch_once(&qword_27DF882C0, &unk_284CC9F40);
    a3 = v20;
    a4 = v19;
    a5 = v18;
    a6 = v17;
    a7 = v16;
    a8 = v15;
    v12 = 0;
    if (a2 != 3)
    {
      return v12 & 1;
    }
  }

  if (a3 == 3 && a4 == 1 && a5 == 1 && a6 == 1 && a7 == 1 && a10 == 1 && a11 != 8)
  {
    v12 = 0;
    if (a9 >= 5 && a8 >= 8 && !a12)
    {
      v12 = byte_27DF882AA ^ 1;
    }
  }

  return v12 & 1;
}

char *sub_239D3F8A8()
{
  result = getenv("MPS_DISABLE_SIMDMATMUL");
  if (result)
  {
    byte_27DF882A9 = 1;
  }

  return result;
}

char *sub_239D3F8D8()
{
  result = getenv("MPS_DIRECT_CONVOLUTION");
  if (result)
  {
    byte_27DF882AA = 1;
  }

  return result;
}

void *sub_239D42A38(void *a1, char *a2, uint64_t a3, unint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v13 = objc_msgSend_count(a1, a2, a3, a4, a5, a6, a7, a8);
  if (v13 >= a4)
  {
    v20 = a4;
  }

  else
  {
    v20 = v13;
  }

  if (!v20)
  {
    return 0;
  }

  v134 = a5;
  v21 = objc_msgSend_objectAtIndexedSubscript_(a1, v14, 0, v15, v16, v17, v18, v19);
  v29 = objc_msgSend_featureChannels(v21, v22, v23, v24, v25, v26, v27, v28);
  v37 = objc_msgSend_retainedReferences(a2, v30, v31, v32, v33, v34, v35, v36);
  v38 = objc_alloc(MEMORY[0x277CBEB18]);
  v45 = objc_msgSend_initWithCapacity_(v38, v39, v20, v40, v41, v42, v43, v44);
  if (v29 < 5)
  {
    v46 = 2;
  }

  else
  {
    v46 = 3;
  }

  context = objc_autoreleasePoolPush();
  for (i = 0; i != v20; ++i)
  {
    v54 = objc_msgSend_objectAtIndexedSubscript_(a1, v47, a3 + i, v48, v49, v50, v51, v52);
    v62 = objc_msgSend_texture(v54, v55, v56, v57, v58, v59, v60, v61);
    if (objc_msgSend_textureType(v62, v63, v64, v65, v66, v67, v68, v69) == v46)
    {
      v71 = 1;
      if (!v62)
      {
        goto LABEL_13;
      }

LABEL_12:
      objc_msgSend_setObject_atIndexedSubscript_(v45, v47, v62, i, v49, v50, v51, v52);
      goto LABEL_13;
    }

    v72 = objc_msgSend_pixelFormat(v62, v47, v70, v48, v49, v50, v51, v52);
    v74 = objc_msgSend_newTextureViewWithPixelFormat_textureType_levels_slices_(v62, v73, v72, v46, 0, 1, 0, 1);
    v71 = v74 == 0;
    if (v74)
    {
      v62 = v74;
    }

    if (v62)
    {
      goto LABEL_12;
    }

LABEL_13:
    if (!v71)
    {
    }
  }

  if ((v37 & 1) == 0)
  {
    v75 = v45;
    v135[0] = MEMORY[0x277D85DD0];
    v135[1] = 3221225472;
    v135[2] = sub_239D44B68;
    v135[3] = &unk_278B28F28;
    v135[4] = v45;
    objc_msgSend_addCompletedHandler_(a2, v76, v135, v77, v78, v79, v80, v81);
  }

  objc_autoreleasePoolPop(context);
  if (v134)
  {
    v88 = objc_msgSend_objectAtIndexedSubscript_(a1, v82, 0, v83, v84, v85, v86, v87);
    v96 = objc_msgSend_featureChannelFormat(v88, v89, v90, v91, v92, v93, v94, v95);
    v103 = objc_msgSend_objectAtIndexedSubscript_(v45, v97, 0, v98, v99, v100, v101, v102);
    v111 = objc_msgSend_textureType(v103, v104, v105, v106, v107, v108, v109, v110);
    if (v96 - 1 > 4)
    {
      v119 = 0;
    }

    else
    {
      v119 = dword_239D98170[v96 - 1];
    }

    if (v111 == 3)
    {
      v120 = v119 + 1;
    }

    else
    {
      v120 = v119;
    }

    objc_msgSend_device(v103, v112, v113, v114, v115, v116, v117, v118);
    MPSDevice = MPSDevice::GetMPSDevice();
    v129 = objc_msgSend_pixelFormat(v103, v122, v123, v124, v125, v126, v127, v128);
    PixelInfo = MPSDevice::GetPixelInfo(MPSDevice, v129, v96);
    v131 = v120 | 4;
    if ((PixelInfo & 0x3000000) == 0)
    {
      v131 = v120;
    }

    *v134 = v131 | 2;
  }

  return v45;
}

MPSImage *sub_239D44850(uint64_t a1, const char *a2, MPSImage *a3, uint64_t a4, unint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v10 = a3;
  if (a4)
  {
    if ((a4 & 3) != 0)
    {
      context = objc_autoreleasePoolPush();
      v12 = [MPSNNSlice alloc];
      v19 = objc_msgSend_initWithDevice_(v12, v13, (*(&v10->super.isa + *MEMORY[0x277CD72E8]))[2], v14, v15, v16, v17, v18);
      v20 = *(&v10->super.isa + *MEMORY[0x277CD72F0]);
      v21 = *(&v10->super.isa + *MEMORY[0x277CD7330]);
      v22 = MEMORY[0x277CD7220];
      v23 = MEMORY[0x277CD7308];
      v24 = *(&v10->super.isa + *MEMORY[0x277CD7308]);
      v32 = objc_msgSend_numberOfImages(v10, v25, v26, v27, v28, v29, v30, v31);
      v34 = objc_msgSend_imageDescriptorWithChannelFormat_width_height_featureChannels_numberOfImages_usage_(v22, v33, v20, v21, v24, a5, v32, 19);
      v40 = objc_msgSend_temporaryImageWithCommandBuffer_imageDescriptor_(MEMORY[0x277CD72A8], v35, a1, v34, v36, v37, v38, v39);
      v90 = 0u;
      v91 = 0u;
      v94 = 0;
      v93 = 0u;
      v92 = 0u;
      v41 = MEMORY[0x277CD7318];
      v42 = v10 + *MEMORY[0x277CD7318];
      v43 = MEMORY[0x277CD72F8];
      v44 = *(&v10->super.isa + *MEMORY[0x277CD72F8]);
      v45 = MEMORY[0x277CD7328];
      v89[0] = v10;
      v89[1] = v42;
      v46 = *(&v10->super.isa + *MEMORY[0x277CD7328]);
      *(&v90 + 1) = v44;
      *&v91 = v46;
      v54 = objc_msgSend_texture(v10, v47, v48, v49, v50, v51, v52, v53);
      v55 = MEMORY[0x277CD7300];
      v56 = *(&v10->super.isa + *MEMORY[0x277CD7300]);
      *(&v91 + 1) = v54;
      v92 = v56;
      *&v93 = v40;
      *(&v93 + 1) = &v40[*v41];
      v57 = *&v40[*v45];
      v95 = *&v40[*v43];
      v96 = v57;
      v65 = objc_msgSend_texture(v40, v58, v59, v60, v61, v62, v63, v64);
      v71 = a2;
      v72 = 0;
      v73 = *&v40[*v55];
      v97 = v65;
      v98 = v73;
      v100 = 0;
      v101 = 0;
      v99 = 0;
      v102 = *&v40[*MEMORY[0x277CD7330]];
      v103 = *&v40[*v23];
      v74 = *&v40[*MEMORY[0x277CD7310]];
      v105 = 0u;
      v106 = 0u;
      v104 = v74;
      v107 = a4;
      v108 = xmmword_239D7E290;
      if ((*(v19 + *MEMORY[0x277CD7378]) & 8) != 0)
      {
        v84 = *(v19 + *MEMORY[0x277CD7360]);
        if (!v84)
        {
          v85 = objc_opt_class();
          v86 = NSStringFromClass(v85);
          v71 = a2;
          v84 = v86;
        }

        objc_msgSend_pushDebugGroup_(v71, v71, v84, v66, v67, v68, v69, v70);
        v71 = a2;
        v72 = a2;
      }

      (*(v19 + 288))(*(v19 + 304), v71, a1, v89);
      if (v72)
      {
        objc_msgSend_popDebugGroup(v72, v75, v76, v77, v78, v79, v80, v81);
      }

      objc_autoreleasePoolPop(context);
      v82 = 0;
      goto LABEL_9;
    }

LABEL_8:
    v82 = objc_msgSend_subImageWithFeatureChannelRange_(a3, a2, a4, a5, a5, a6, a7, a8);
LABEL_9:
    MPSDecrementReadCount(v10);
    return v82;
  }

  if (a5 < *(&a3->super.isa + *MEMORY[0x277CD72F8]))
  {
    goto LABEL_8;
  }

  return v10;
}

void sub_239D44B48(_Unwind_Exception *exception_object, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, a2, a3, a4, a5, a6, a7, a8);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_239D44B70(uint64_t a1, void *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v9 = objc_msgSend_userDictionary(a2, a2, a3, a4, a5, a6, a7, a8);
  v15 = *(a1 + 32);

  return MEMORY[0x2821F9670](v9, sel_removeObjectForKey_, v15, v10, v11, v12, v13, v14);
}

uint64_t sub_239D44C80(void *a1, char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v10 = *(a4 + 224);
  v11 = objc_msgSend_primaryKernelWidth(a1, a2, a3, a4, a5, a6, a7, a8);
  objc_msgSend_primaryKernelHeight(a1, v12, v13, v14, v15, v16, v17, v18);
  v26 = objc_msgSend_primaryDilationRateX(a1, v19, v20, v21, v22, v23, v24, v25);
  objc_msgSend_primaryDilationRateY(a1, v27, v28, v29, v30, v31, v32, v33);
  v34 = *(a4 + 280);
  v42 = objc_msgSend_secondaryKernelWidth(a1, v35, v36, v37, v38, v39, v40, v41);
  objc_msgSend_secondaryKernelHeight(a1, v43, v44, v45, v46, v47, v48, v49);
  v57 = objc_msgSend_secondaryDilationRateX(a1, v50, v51, v52, v53, v54, v55, v56);
  objc_msgSend_secondaryDilationRateY(a1, v58, v59, v60, v61, v62, v63, v64);
  v138 = 0u;
  v139 = 0u;
  v137 = 0u;
  memset(v136, 0, sizeof(v136));
  v135 = 0u;
  v134 = 0u;
  v119 = vdupq_n_s64(1uLL);
  v120 = 0;
  v65 = *(a4 + 16);
  v121 = *a4;
  v122 = v65;
  v123 = *(a4 + 32);
  v124 = *(a4 + 48);
  v66 = *(a4 + 56);
  v67 = *(a4 + 88);
  v126 = *(a4 + 72);
  v127 = v67;
  v125 = v66;
  v129 = *(a4 + 120);
  v130 = *(a4 + 136);
  v131 = *(a4 + 152);
  v68 = *(a4 + 112);
  v70 = *(a4 + 160);
  v69 = *(a4 + 168);
  v128 = *(a4 + 104);
  v132 = v69;
  v133 = v68;
  LODWORD(v134) = *(a4 + 136);
  *(&v134 + 1) = v70;
  *&v66 = vmovn_s64(*(a4 + 176));
  LOWORD(v65) = v66;
  WORD1(v65) = WORD2(v66);
  DWORD1(v65) = ((*(a4 + 304) + 3) >> 2);
  *&v66 = vmovn_s64(*(a4 + 200));
  v71 = *(a4 + 144);
  WORD3(v67) = 1;
  LOWORD(v67) = v66;
  WORD1(v67) = WORD2(v66);
  WORD2(v67) = (v71 + 3) >> 2;
  *&v135 = v65;
  *(&v135 + 1) = v67;
  LOWORD(v136[0]) = v71;
  LOWORD(v136[1]) = 1;
  HIWORD(v136[2]) = objc_msgSend_maxBatchSize(a1, v72, v73, v74, v75, v76, v77, v78);
  v136[6] = *(a4 + 16);
  *&v137 = *(a4 + 40);
  WORD5(v137) = v10 - (v11 >> 1) * v26;
  WORD4(v137) = WORD5(v137);
  HIDWORD(v137) = 0;
  WORD1(v138) = v11;
  LOWORD(v138) = v11;
  WORD3(v138) = v10;
  WORD2(v138) = v10;
  WORD4(v138) = objc_msgSend_primaryStrideInPixelsX(a1, v79, v80, v81, v82, v83, v84, v85);
  WORD5(v138) = objc_msgSend_primaryStrideInPixelsY(a1, v86, v87, v88, v89, v90, v91, v92);
  HIWORD(v138) = v26;
  WORD6(v138) = v26;
  LOWORD(v139) = *(a4 + 312);
  WORD1(v139) = *(a4 + 24);
  DWORD1(v139) = *(a4 + 240);
  DWORD2(v139) = *(a4 + 72);
  v140 = *(a4 + 96);
  v142 = v34 - (v42 >> 1) * v57;
  v141 = v142;
  v143 = 0;
  v145 = v42;
  v144 = v42;
  v147 = v34;
  v146 = v34;
  v148 = objc_msgSend_secondaryStrideInPixelsX(a1, v93, v94, v95, v96, v97, v98, v99);
  v149 = objc_msgSend_secondaryStrideInPixelsY(a1, v100, v101, v102, v103, v104, v105, v106);
  v151 = v57;
  v150 = v57;
  v107 = *(a4 + 320);
  v152 = v107;
  v153 = *(a4 + 80);
  v154 = *(a4 + 296);
  v155 = 0;
  v108 = *(a4 + 192);
  v156 = *(a4 + 176);
  v157 = v108;
  v109 = *(a4 + 224);
  v158 = *(a4 + 208);
  v159 = v109;
  v110 = *(a4 + 240);
  v161 = *(a4 + 280);
  v111 = *(a4 + 296);
  v160 = v110;
  v162 = v111;
  v163 = *(a4 + 304);
  v164 = v107;
  return sub_239D45C38(a1, a2, a3, &v119, v112, v113, v114, v115);
}

uint64_t sub_239D44F58(void *a1, char *a2, uint64_t a3, __int128 *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  memset(&v48[16], 0, 32);
  *v48 = 0u;
  v47 = 0u;
  v46 = 0u;
  v45 = 0u;
  v44 = 0u;
  v29 = *a4;
  v8 = *(a4 + 3);
  v30 = *(a4 + 2);
  v10 = *v8;
  v9 = v8[1];
  v11 = *(v8 + 6);
  v33 = v8[2];
  v34 = v11;
  v31 = v10;
  v32 = v9;
  v12 = *(v8 + 56);
  v13 = *(v8 + 13);
  v14 = *(v8 + 88);
  v36 = *(v8 + 72);
  v37 = v14;
  v38 = v13;
  v35 = v12;
  v15 = v8[7];
  v16 = v8[8];
  v17 = v8[9];
  v42 = *(v8 + 20);
  v41 = v17;
  v40 = v16;
  v39 = v15;
  v43 = *(v8 + 21);
  LODWORD(v44) = *(a4 + 8);
  v18 = *(a4 + 5);
  v19 = a4[4];
  v45 = a4[3];
  v46 = v19;
  v20 = *(a4 + 10);
  *(&v44 + 1) = v18;
  *&v47 = v20;
  DWORD2(v47) = *(a4 + 22);
  *v48 = *(a4 + 12);
  v21 = *(a4 + 120);
  *&v48[8] = *(a4 + 104);
  *&v48[24] = v21;
  *&v48[40] = *(a4 + 34);
  v49 = *(a4 + 18);
  v22 = *(a4 + 168);
  v50 = *(a4 + 152);
  v51 = v22;
  v23 = *(a4 + 200);
  v24 = *(a4 + 216);
  v52 = *(a4 + 184);
  v53 = v23;
  v25 = *(a4 + 232);
  v26 = *(a4 + 31);
  v54 = v24;
  v55 = v25;
  v27 = *(a4 + 34);
  v57 = a4[16];
  v56 = v26;
  v58 = v27;
  v59 = *(a4 + 280);
  v60 = *(a4 + 37);
  return sub_239D45C38(a1, a2, a3, &v29, a5, a6, a7, a8);
}

uint64_t sub_239D454C0(void *a1, char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v10 = *(a4 + 224);
  v11 = objc_msgSend_primaryKernelWidth(a1, a2, a3, a4, a5, a6, a7, a8);
  objc_msgSend_primaryKernelHeight(a1, v12, v13, v14, v15, v16, v17, v18);
  v26 = objc_msgSend_primaryDilationRateX(a1, v19, v20, v21, v22, v23, v24, v25);
  objc_msgSend_primaryDilationRateY(a1, v27, v28, v29, v30, v31, v32, v33);
  v34 = *(a4 + 280);
  v42 = objc_msgSend_secondaryKernelWidth(a1, v35, v36, v37, v38, v39, v40, v41);
  objc_msgSend_secondaryKernelHeight(a1, v43, v44, v45, v46, v47, v48, v49);
  v57 = objc_msgSend_secondaryDilationRateX(a1, v50, v51, v52, v53, v54, v55, v56);
  objc_msgSend_secondaryDilationRateY(a1, v58, v59, v60, v61, v62, v63, v64);
  v138 = 0u;
  v139 = 0u;
  v137 = 0u;
  memset(v136, 0, sizeof(v136));
  v135 = 0u;
  v134 = 0u;
  v119 = vdupq_n_s64(1uLL);
  v120 = 0;
  v65 = *(a4 + 16);
  v121 = *a4;
  v122 = v65;
  v123 = *(a4 + 32);
  v124 = *(a4 + 48);
  v66 = *(a4 + 56);
  v67 = *(a4 + 88);
  v126 = *(a4 + 72);
  v127 = v67;
  v125 = v66;
  v129 = *(a4 + 120);
  v130 = *(a4 + 136);
  v131 = *(a4 + 152);
  v68 = *(a4 + 112);
  v70 = *(a4 + 160);
  v69 = *(a4 + 168);
  v128 = *(a4 + 104);
  v132 = v69;
  v133 = v68;
  LODWORD(v134) = *(a4 + 136);
  *(&v134 + 1) = v70;
  *&v66 = vmovn_s64(*(a4 + 176));
  LOWORD(v65) = v66;
  WORD1(v65) = WORD2(v66);
  DWORD1(v65) = ((*(a4 + 304) + 3) >> 2);
  *&v66 = vmovn_s64(*(a4 + 200));
  v71 = *(a4 + 144);
  WORD3(v67) = 1;
  LOWORD(v67) = v66;
  WORD1(v67) = WORD2(v66);
  WORD2(v67) = (v71 + 3) >> 2;
  *&v135 = v65;
  *(&v135 + 1) = v67;
  LOWORD(v136[0]) = v71;
  LOWORD(v136[1]) = 1;
  HIWORD(v136[2]) = objc_msgSend_maxBatchSize(a1, v72, v73, v74, v75, v76, v77, v78);
  v136[6] = *(a4 + 16);
  *&v137 = *(a4 + 40);
  WORD5(v137) = v10 - (v11 >> 1) * v26;
  WORD4(v137) = WORD5(v137);
  HIDWORD(v137) = 0;
  WORD1(v138) = v11;
  LOWORD(v138) = v11;
  WORD3(v138) = v10;
  WORD2(v138) = v10;
  WORD4(v138) = objc_msgSend_primaryStrideInPixelsX(a1, v79, v80, v81, v82, v83, v84, v85);
  WORD5(v138) = objc_msgSend_primaryStrideInPixelsY(a1, v86, v87, v88, v89, v90, v91, v92);
  HIWORD(v138) = v26;
  WORD6(v138) = v26;
  LOWORD(v139) = *(a4 + 312);
  WORD1(v139) = *(a4 + 24);
  DWORD1(v139) = *(a4 + 240);
  DWORD2(v139) = *(a4 + 72);
  v140 = *(a4 + 96);
  v142 = v34 - (v42 >> 1) * v57;
  v141 = v142;
  v143 = 0;
  v145 = v42;
  v144 = v42;
  v147 = v34;
  v146 = v34;
  v148 = objc_msgSend_secondaryStrideInPixelsX(a1, v93, v94, v95, v96, v97, v98, v99);
  v149 = objc_msgSend_secondaryStrideInPixelsY(a1, v100, v101, v102, v103, v104, v105, v106);
  v151 = v57;
  v150 = v57;
  v107 = *(a4 + 320);
  v152 = v107;
  v153 = *(a4 + 80);
  v154 = *(a4 + 296);
  v155 = 0;
  v108 = *(a4 + 192);
  v156 = *(a4 + 176);
  v157 = v108;
  v109 = *(a4 + 224);
  v158 = *(a4 + 208);
  v159 = v109;
  v110 = *(a4 + 240);
  v161 = *(a4 + 280);
  v111 = *(a4 + 296);
  v160 = v110;
  v162 = v111;
  v163 = *(a4 + 304);
  v164 = v107;
  return sub_239D47158(a1, a2, a3, &v119, v112, v113, v114, v115);
}

uint64_t sub_239D45798(void *a1, char *a2, uint64_t a3, __int128 *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  memset(&v48[16], 0, 32);
  *v48 = 0u;
  v47 = 0u;
  v46 = 0u;
  v45 = 0u;
  v44 = 0u;
  v29 = *a4;
  v8 = *(a4 + 3);
  v30 = *(a4 + 2);
  v10 = *v8;
  v9 = v8[1];
  v11 = *(v8 + 6);
  v33 = v8[2];
  v34 = v11;
  v31 = v10;
  v32 = v9;
  v12 = *(v8 + 56);
  v13 = *(v8 + 13);
  v14 = *(v8 + 88);
  v36 = *(v8 + 72);
  v37 = v14;
  v38 = v13;
  v35 = v12;
  v15 = v8[7];
  v16 = v8[8];
  v17 = v8[9];
  v42 = *(v8 + 20);
  v41 = v17;
  v40 = v16;
  v39 = v15;
  v43 = *(v8 + 21);
  LODWORD(v44) = *(a4 + 8);
  v18 = *(a4 + 5);
  v19 = a4[4];
  v45 = a4[3];
  v46 = v19;
  v20 = *(a4 + 10);
  *(&v44 + 1) = v18;
  *&v47 = v20;
  DWORD2(v47) = *(a4 + 22);
  *v48 = *(a4 + 12);
  v21 = *(a4 + 120);
  *&v48[8] = *(a4 + 104);
  *&v48[24] = v21;
  *&v48[40] = *(a4 + 34);
  v49 = *(a4 + 18);
  v22 = *(a4 + 168);
  v50 = *(a4 + 152);
  v51 = v22;
  v23 = *(a4 + 200);
  v24 = *(a4 + 216);
  v52 = *(a4 + 184);
  v53 = v23;
  v25 = *(a4 + 232);
  v26 = *(a4 + 31);
  v54 = v24;
  v55 = v25;
  v27 = *(a4 + 34);
  v57 = a4[16];
  v56 = v26;
  v58 = v27;
  v59 = *(a4 + 280);
  v60 = *(a4 + 37);
  return sub_239D47158(a1, a2, a3, &v29, a5, a6, a7, a8);
}

uint64_t sub_239D45C38(void *a1, char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v513 = *MEMORY[0x277D85DE8];
  v466 = *(a1 + *MEMORY[0x277CD7350]);
  v458 = a1[54];
  if (*(a4 + 416) && MTLReportFailureTypeEnabled())
  {
    v452 = objc_opt_class();
    v457 = NSStringFromClass(v452);
    MTLReportFailure();
  }

  if (*(a4 + 416) != *(a4 + 440) && MTLReportFailureTypeEnabled())
  {
    v453 = objc_opt_class();
    v457 = NSStringFromClass(v453);
    MTLReportFailure();
  }

  if (*(a4 + 368) && MTLReportFailureTypeEnabled())
  {
    v454 = objc_opt_class();
    v457 = NSStringFromClass(v454);
    MTLReportFailure();
  }

  if (*(a4 + 48) - *(a4 + 456) != *(a4 + 104) - *(a4 + 464) && MTLReportFailureTypeEnabled())
  {
    v455 = objc_opt_class();
    v457 = NSStringFromClass(v455);
    MTLReportFailure();
  }

  if (*(a4 + 48) - *(a4 + 456) > *(a4 + 160) - *(a4 + 448) && MTLReportFailureTypeEnabled())
  {
    v456 = objc_opt_class();
    v457 = NSStringFromClass(v456);
    MTLReportFailure();
  }

  v11 = (*(a4 + 456) + 3) >> 2;
  v12 = (*(a4 + 464) + 3) >> 2;
  v13 = *(a4 + 448) + 3;
  v467 = *(a4 + 400);
  v14 = vmovn_s64(v467);
  v494 = v11;
  v493 = vuzp1_s16(v14, v14).u32[0];
  v463 = *(a4 + 424);
  v15 = vmovn_s64(*(a4 + 424));
  v462 = v15.i16[2];
  v496 = v12;
  v495 = vuzp1_s16(v15, v15).u32[0];
  v16 = *(a4 + 352);
  v17 = vmovn_s64(v16);
  v498 = v13 >> 2;
  v497 = vuzp1_s16(v17, *v16.i8).u32[0];
  v459 = *(a4 + 376);
  *v16.i8 = vmovn_s64(v459);
  v500 = v16.i16[2];
  v499 = v16.i16[0];
  v501 = *(a4 + 48);
  v502 = *(a4 + 160);
  v25 = objc_msgSend_maxBatchSize(a1, a2, a3, a4, a5, a6, a7, a8, v457);
  v26 = vmovn_s32(vuzp1q_s32(v467, vdupq_lane_s64(v463, 0)));
  v26.i16[2] = v11;
  if (*&v26 || v462 || v12 || (v27 = objc_msgSend_width(*(a4 + 64), v18, v19, v20, v21, v22, v23, v24), v27 != objc_msgSend_width(*(a4 + 120), v28, v29, v30, v31, v32, v33, v34)) || (v42 = objc_msgSend_height(*(a4 + 64), v35, v36, v37, v38, v39, v40, v41), v42 != objc_msgSend_height(*(a4 + 120), v43, v44, v45, v46, v47, v48, v49)) || *(a4 + 48) != *(a4 + 104) || (v57 = vtst_s32(v17, 0xFFFF0000FFFFLL), (v57.i8[0] & 1) != 0) || (v57.i8[4] & 1) != 0 || (v13 >> 2) || objc_msgSend_width(*(a4 + 120), v50, v51, v52, v53, v54, v55, v56) != v459.u16[0] || objc_msgSend_width(*(a4 + 64), v58, v59, v60, v61, v62, v63, v64) != v459.u16[0] || objc_msgSend_height(*(a4 + 120), v65, v66, v67, v68, v69, v70, v71) != v459.u16[4] || objc_msgSend_height(*(a4 + 64), v72, v73, v74, v75, v76, v77, v78) != v459.u16[4])
  {
    *&v237 = -1;
    *(&v237 + 1) = -1;
    *v477 = v237;
    *&v477[16] = v237;
    v475 = v237;
    v476 = v237;
    v238 = *(a4 + 200) & 0x3F | ((*(a4 + 256) & 0x3F) << 6) & 0xFFF | ((*(a4 + 304) & 0x3Fu) << 12);
    *&v474 = v25;
    *(&v474 + 1) = v238;
    MPSLibrary::CreateUberShaderKey();
    PipelineStateForMPSKey = MPSLibrary::GetPipelineStateForMPSKey();
    objc_msgSend_setComputePipelineState_(a2, v239, PipelineStateForMPSKey, v240, v241, v242, v243, v244, 0, 0, 0, 0, 0);
    MPSLibrary::ReleaseComputeState();
    MPSLibrary::ReleaseMPSKey();
    if ((*(a4 + 256) & 2) == 0)
    {
      objc_msgSend_setTexture_atIndex_(a2, v245, *(a4 + 64), v25, v248, v249, v250, v251);
LABEL_44:
      objc_msgSend_setBytes_length_atIndex_(a2, v252, a4 + 272, 32, 1, v253, v254, v255);
      if ((*(a4 + 304) & 2) == 0)
      {
        objc_msgSend_setTexture_atIndex_(a2, v263, *(a4 + 120), 2 * v25, v266, v267, v268, v269);
LABEL_64:
        objc_msgSend_setBytes_length_atIndex_(a2, v270, a4 + 320, 32, 2, v271, v272, v273);
        if ((*(a4 + 200) & 2) == 0)
        {
          objc_msgSend_setTexture_atIndex_(a2, v281, *(a4 + 176), 0, v284, v285, v286, v287);
LABEL_84:
          objc_msgSend_setBytes_length_atIndex_(a2, v288, a4 + 216, 40, 0, v289, v290, v291);
          Sampler = MPSDevice::GetSampler();
          objc_msgSend_setSamplerState_atIndex_(a2, v300, Sampler, 0, v301, v302, v303, v304);
          objc_msgSend_setBytes_length_atIndex_(a2, v305, &v493, 32, 30, v306, v307, v308);
          v316 = objc_msgSend_threadExecutionWidth(PipelineStateForMPSKey, v309, v310, v311, v312, v313, v314, v315);
          if (v316 <= 1)
          {
            v324 = 1;
          }

          else
          {
            v324 = v316;
          }

          v325 = objc_msgSend_maxTotalThreadsPerThreadgroup(PipelineStateForMPSKey, v317, v318, v319, v320, v321, v322, v323);
          v326 = *(a4 + 8);
          v327 = (v325 / v324 + *(a4 + 384) - 1) / (v325 / v324);
          *&v503[0] = (v324 + *(a4 + 376) - 1) / v324;
          *(&v503[0] + 1) = v327;
          *&v503[1] = v326;
          *&v486[0] = v324;
          *(&v486[0] + 1) = v325 / v324;
          *&v486[1] = 1;
          objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a2, v328, v503, v486, v329, v330, v331, v332);
          return 0;
        }

        v292 = *(a4 + 208);
        v293 = objc_msgSend_count(v292, v281, v282, v283, v284, v285, v286, v287);
        memset(v507, 0, 32);
        v505 = 0u;
        v506 = 0u;
        memset(v504, 0, sizeof(v504));
        memset(v503, 0, sizeof(v503));
        if (!v25)
        {
          goto LABEL_84;
        }

        v294 = v293;
        v295 = 0;
        while (1)
        {
          if (v294 <= v295)
          {
            v296 = 0;
            if (v25 - v295 >= 0x20)
            {
              v297 = 32;
            }

            else
            {
              v297 = v25 - v295;
            }

            v298 = v297;
            if (!v297)
            {
              goto LABEL_77;
            }
          }

          else
          {
            if (v294 - v295 >= 0x20)
            {
              v296 = 32;
              objc_msgSend_getObjects_range_(v292, v288, v503, v295, 32, v289, v290, v291);
            }

            else
            {
              v296 = v294 - v295;
              objc_msgSend_getObjects_range_(v292, v288, v503, v295, v294 - v295, v289, v290, v291);
            }

            if (v25 - v295 >= 0x20)
            {
              v297 = 32;
            }

            else
            {
              v297 = v25 - v295;
            }

            v298 = v297 - v296;
            if (v297 == v296)
            {
              goto LABEL_77;
            }
          }

          bzero(v503 + 8 * v296, 8 * v298);
LABEL_77:
          objc_msgSend_setTextures_withRange_(a2, v288, v503, v295, v297, v289, v290, v291);
          v295 += v297;
          if (v295 >= v25)
          {
            goto LABEL_84;
          }
        }
      }

      v274 = *(a4 + 312);
      v275 = objc_msgSend_count(v274, v263, v264, v265, v266, v267, v268, v269);
      memset(v507, 0, 32);
      v505 = 0u;
      v506 = 0u;
      memset(v504, 0, sizeof(v504));
      memset(v503, 0, sizeof(v503));
      if (!v25)
      {
        goto LABEL_64;
      }

      v276 = v275;
      v277 = 0;
      while (1)
      {
        if (v276 <= v277)
        {
          v278 = 0;
          if (v25 - v277 >= 0x20)
          {
            v279 = 32;
          }

          else
          {
            v279 = v25 - v277;
          }

          v280 = v279;
          if (!v279)
          {
            goto LABEL_57;
          }
        }

        else
        {
          if (v276 - v277 >= 0x20)
          {
            v278 = 32;
            objc_msgSend_getObjects_range_(v274, v270, v503, v277, 32, v271, v272, v273);
          }

          else
          {
            v278 = v276 - v277;
            objc_msgSend_getObjects_range_(v274, v270, v503, v277, v276 - v277, v271, v272, v273);
          }

          if (v25 - v277 >= 0x20)
          {
            v279 = 32;
          }

          else
          {
            v279 = v25 - v277;
          }

          v280 = v279 - v278;
          if (v279 == v278)
          {
            goto LABEL_57;
          }
        }

        bzero(v503 + 8 * v278, 8 * v280);
LABEL_57:
        objc_msgSend_setTextures_withRange_(a2, v270, v503, v277 + 2 * v25, v279, v271, v272, v273);
        v277 += v279;
        if (v277 >= v25)
        {
          goto LABEL_64;
        }
      }
    }

    v256 = *(a4 + 264);
    v257 = objc_msgSend_count(v256, v245, v246, v247, v248, v249, v250, v251);
    memset(v507, 0, 32);
    v505 = 0u;
    v506 = 0u;
    memset(v504, 0, sizeof(v504));
    memset(v503, 0, sizeof(v503));
    if (!v25)
    {
      goto LABEL_44;
    }

    v258 = v257;
    v259 = 0;
    while (1)
    {
      if (v258 <= v259)
      {
        v260 = 0;
        if (v25 - v259 >= 0x20)
        {
          v261 = 32;
        }

        else
        {
          v261 = v25 - v259;
        }

        v262 = v261;
        if (!v261)
        {
          goto LABEL_37;
        }
      }

      else
      {
        if (v258 - v259 >= 0x20)
        {
          v260 = 32;
          objc_msgSend_getObjects_range_(v256, v252, v503, v259, 32, v253, v254, v255);
        }

        else
        {
          v260 = v258 - v259;
          objc_msgSend_getObjects_range_(v256, v252, v503, v259, v258 - v259, v253, v254, v255);
        }

        if (v25 - v259 >= 0x20)
        {
          v261 = 32;
        }

        else
        {
          v261 = v25 - v259;
        }

        v262 = v261 - v260;
        if (v261 == v260)
        {
          goto LABEL_37;
        }
      }

      bzero(v503 + 8 * v260, 8 * v262);
LABEL_37:
      objc_msgSend_setTextures_withRange_(a2, v252, v503, v259 + v25, v261, v253, v254, v255);
      v259 += v261;
      if (v259 >= v25)
      {
        goto LABEL_44;
      }
    }
  }

  PixelInfo = MPSDevice::GetPixelInfo(v466, MTLPixelFormatR32Float, MPSImageFeatureChannelFormatNone);
  v79 = MEMORY[0x277CD7220];
  v87 = objc_msgSend_width(*(a4 + 24), v80, v81, v82, v83, v84, v85, v86);
  v468 = objc_msgSend_height(*(a4 + 24), v88, v89, v90, v91, v92, v93, v94);
  v102 = objc_msgSend_numberOfImages(*(a4 + 24), v95, v96, v97, v98, v99, v100, v101);
  v110 = objc_msgSend_usage(*(a4 + 24), v103, v104, v105, v106, v107, v108, v109);
  v112 = objc_msgSend_imageDescriptorWithChannelFormat_width_height_featureChannels_numberOfImages_usage_(v79, v111, 4, v87, v468, 1, v102, v110);
  v490 = objc_msgSend_width(v112, v113, v114, v115, v116, v117, v118, v119);
  v491 = objc_msgSend_height(v112, v120, v121, v122, v123, v124, v125, v126);
  v492 = (objc_msgSend_featureChannels(v112, v127, v128, v129, v130, v131, v132, v133) + 3) >> 2;
  MEMORY[0x23EE7D040](v488, a3, 0);
  v134 = objc_alloc(MEMORY[0x277CBEB18]);
  v141 = objc_msgSend_initWithCapacity_(v134, v135, *(a4 + 8), v136, v137, v138, v139, v140);
  TempTexture = MPSAutoCache::GetTempTexture();
  objc_msgSend_addObject_(v141, v143, TempTexture, v144, v145, v146, v147, v148);
  v469 = objc_alloc(MEMORY[0x277CD7218]);
  v155 = objc_msgSend_objectAtIndexedSubscript_(v141, v149, 0, v150, v151, v152, v153, v154);
  v163 = objc_msgSend_featureChannels(v112, v156, v157, v158, v159, v160, v161, v162);
  v169 = objc_msgSend_initWithTexture_featureChannels_(v469, v164, v155, v163, v165, v166, v167, v168);
  v487 = *&v169[*MEMORY[0x277CD7318]];
  v464 = objc_msgSend_width(v169, v170, v171, v172, v173, v174, v175, v176);
  v184 = objc_msgSend_height(v169, v177, v178, v179, v180, v181, v182, v183);
  v460 = *(a4 + 392);
  memset(v486, 0, 40);
  v185 = *MEMORY[0x277CD72F8];
  LOWORD(v186) = v464;
  v461 = v184;
  WORD1(v186) = v184;
  WORD2(v186) = (*&v169[v185] + 3) >> 2;
  HIWORD(v186) = *(a4 + 8);
  *(&v486[0] + 1) = v186;
  v470 = v169;
  LOWORD(v486[1]) = *&v169[v185];
  WORD2(v486[1]) = 1;
  WORD5(v486[1]) = objc_msgSend_maxBatchSize(a1, v187, v188, v189, v190, v191, v192, v193);
  sub_239D46F08(&v485, v458, a2, v194, v195, v196, v197, v198);
  if ((*(a4 + 256) & 2) != 0)
  {
    v334 = *(a4 + 8);
    if (v334 >= 2)
    {
      for (i = 1; i < v334; ++i)
      {
        v336 = MPSAutoCache::GetTempTexture();
        objc_msgSend_addObject_(v141, v337, v336, v338, v339, v340, v341, v342);
        v334 = *(a4 + 8);
      }
    }

    v343 = *(a4 + 40);
    v474 = *(a4 + 24);
    v475 = v343;
    v476 = *(a4 + 56);
    v482 = 0u;
    v483 = 0u;
    v484 = 0u;
    v344 = *(a4 + 96);
    *&v477[8] = *(a4 + 80);
    *&v503[0] = *a4;
    *(&v503[0] + 1) = v334;
    *&v503[1] = *(a4 + 16);
    *v477 = *(a4 + 72);
    *&v477[24] = v344;
    v478 = *(a4 + 112);
    v479 = *(a4 + 128);
    v480 = v169;
    v481 = &v487;
    LODWORD(v482) = sub_239D46F94(v169, v199, v200, v201, v202, v203, v204, v205);
    *(&v482 + 1) = *&v169[*MEMORY[0x277CD72F8]];
    *&v483 = *&v169[*MEMORY[0x277CD7328]];
    v345 = &v169[*MEMORY[0x277CD7320]];
    explicit = atomic_load_explicit(v345, memory_order_acquire);
    if (!explicit)
    {
      MPSAutoTexture::AllocateTexture(v345, 0);
      explicit = atomic_load_explicit(v345, memory_order_acquire);
    }

    *(&v483 + 1) = explicit;
    v347 = *&v470[*MEMORY[0x277CD7300]];
    v503[3] = v486[0];
    v503[4] = v486[1];
    v348 = *(a4 + 272);
    *(&v503[7] + 8) = *(a4 + 288);
    *(&v503[6] + 8) = v348;
    v349 = *(a4 + 320);
    *&v504[3] = *(a4 + 336);
    v350 = *(a4 + 192);
    *&v484 = v347;
    *(&v484 + 1) = v350;
    *(&v503[1] + 1) = &v474;
    LODWORD(v503[2]) = v482;
    *(&v503[2] + 1) = v141;
    *&v503[5] = *&v486[2];
    DWORD2(v503[5]) = *(a4 + 256);
    *&v503[6] = *(a4 + 264);
    DWORD2(v503[8]) = *(a4 + 304);
    v351 = *(a4 + 312);
    *&v504[1] = v349;
    v504[0] = v351;
    v504[5] = 0;
    v505 = 0uLL;
    *&v506 = v464;
    *(&v506 + 1) = v461;
    v352 = *(a4 + 400);
    v353 = *(a4 + 416);
    *&v507[0] = v460;
    *(&v507[1] + 1) = v353;
    *(v507 + 8) = v352;
    v354 = *(a4 + 440);
    v507[2] = *(a4 + 424);
    v509 = *(a4 + 448);
    v355 = *(a4 + 464);
    v508 = v354;
    v510 = v355;
    v229 = (*(*(v458 + 392) + 384))(*(*(v458 + 392) + 392), a2, a3, v503);
    if (v229)
    {

      goto LABEL_97;
    }

LABEL_98:
    *&v357 = -1;
    *(&v357 + 1) = -1;
    *(&v503[3] + 8) = v357;
    *(&v503[2] + 8) = v357;
    *(&v503[1] + 8) = v357;
    *(v503 + 8) = v357;
    *(&v503[4] + 1) = -1;
    *&v503[0] = v25;
    v358 = *(a4 + 200);
    v359 = *(a4 + 256);
    v360 = *(a4 + 304);
    *(&v503[0] + 1) = v358 & 0x3F | ((v359 & 0x3F) << 6) & 0xFFF | ((v360 & 0x3F) << 12) | (sub_239D46F94(v470, v222, v223, v224, v225, v226, v227, v228) << 18);
    MPSLibrary::CreateUberShaderKey();
    v361 = MPSLibrary::GetPipelineStateForMPSKey();
    objc_msgSend_setComputePipelineState_(a2, v362, v361, v363, v364, v365, v366, v367, 0, 0, 0, 0, 0);
    MPSLibrary::ReleaseComputeState();
    MPSLibrary::ReleaseMPSKey();
    if ((*(a4 + 256) & 2) != 0)
    {
      sub_239D46DC0(a2, *(a4 + 264), v25, v25, v369, v370, v371, v372);
    }

    else
    {
      objc_msgSend_setTexture_atIndex_(a2, v368, *(a4 + 64), v25, v369, v370, v371, v372);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v373, a4 + 272, 32, 1, v374, v375, v376);
    if ((*(a4 + 304) & 2) != 0)
    {
      sub_239D46DC0(a2, *(a4 + 312), 2 * v25, v25, v378, v379, v380, v381);
    }

    else
    {
      objc_msgSend_setTexture_atIndex_(a2, v377, *(a4 + 120), 2 * v25, v378, v379, v380, v381);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v382, a4 + 320, 32, 2, v383, v384, v385);
    if ((*(a4 + 256) & 2) != 0)
    {
      sub_239D46DC0(a2, v141, 3 * v25, v25, v389, v390, v391, v392);
    }

    else
    {
      v393 = objc_msgSend_texture(v470, v386, v387, v388, v389, v390, v391, v392);
      objc_msgSend_setTexture_atIndex_(a2, v394, v393, 3 * v25, v395, v396, v397, v398);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v399, v486, 40, 3, v400, v401, v402);
    if ((*(a4 + 200) & 2) != 0)
    {
      sub_239D46DC0(a2, *(a4 + 208), 0, v25, v404, v405, v406, v407);
    }

    else
    {
      objc_msgSend_setTexture_atIndex_(a2, v403, *(a4 + 176), 0, v404, v405, v406, v407);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v408, a4 + 216, 40, 0, v409, v410, v411);
    v412 = MPSDevice::GetSampler();
    objc_msgSend_setSamplerState_atIndex_(a2, v413, v412, 0, v414, v415, v416, v417);
    v418 = MPSDevice::GetSampler();
    objc_msgSend_setSamplerState_atIndex_(a2, v419, v418, 1, v420, v421, v422, v423);
    objc_msgSend_setBytes_length_atIndex_(a2, v424, &v493, 32, 30, v425, v426, v427);
    v435 = objc_msgSend_threadExecutionWidth(v361, v428, v429, v430, v431, v432, v433, v434);
    v443 = objc_msgSend_maxTotalThreadsPerThreadgroup(v361, v436, v437, v438, v439, v440, v441, v442);
    if (v435 <= 1)
    {
      v449 = 1;
    }

    else
    {
      v449 = v435;
    }

    v450 = *(a4 + 8);
    v451 = (v443 / v449 + *(a4 + 384) - 1) / (v443 / v449);
    *&v474 = (v449 + *(a4 + 376) - 1) / v449;
    *(&v474 + 1) = v451;
    *&v475 = v450;
    v473[0] = v449;
    v473[1] = v443 / v449;
    v473[2] = 1;
    objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a2, v444, &v474, v473, v445, v446, v447, v448);

    v229 = 0;
    v356 = 1;
    goto LABEL_114;
  }

  v206 = *(a4 + 40);
  v503[0] = *(a4 + 24);
  v503[1] = v206;
  v503[2] = *(a4 + 56);
  v207 = *(a4 + 96);
  *(&v503[3] + 8) = *(a4 + 80);
  v208 = *(a4 + 72);
  *(&v503[4] + 8) = v207;
  *(&v503[5] + 8) = *(a4 + 112);
  v209 = *(a4 + 128);
  *&v503[3] = v208;
  *(&v503[6] + 1) = v209;
  v210 = *(a4 + 192);
  v509 = *(a4 + 424);
  v211 = *(a4 + 464);
  v510 = *(a4 + 440);
  v512 = v211;
  v212 = *(a4 + 416);
  v507[0] = *(a4 + 400);
  v511 = *(a4 + 448);
  *&v503[7] = v210;
  v504[4] = 0;
  v504[5] = 0;
  *&v505 = 0;
  *(&v505 + 1) = v464;
  *&v506 = v461;
  *&v507[1] = v212;
  *(&v506 + 1) = v460;
  v465 = sub_239D46F94(v169, v199, v200, v201, v202, v203, v204, v205);
  v217 = *&v169[*MEMORY[0x277CD72F8]];
  v218 = *&v169[*MEMORY[0x277CD7328]];
  v219 = &v169[*MEMORY[0x277CD7320]];
  v220 = atomic_load_explicit(v219, memory_order_acquire);
  if (!v220)
  {
    MPSAutoTexture::AllocateTexture(v219, 0);
    v220 = atomic_load_explicit(v219, memory_order_acquire);
  }

  v221 = *&v470[*MEMORY[0x277CD7300]];
  *(&v503[7] + 1) = v470;
  *&v503[8] = &v487;
  DWORD2(v503[8]) = v465;
  v504[0] = v217;
  v504[1] = v218;
  v504[2] = v220;
  v504[3] = v221;
  v229 = sub_239D47064(*(v458 + 392), a2, a3, v503, v213, v214, v215, v216);
  if (!v229)
  {
    goto LABEL_98;
  }

LABEL_97:
  v356 = 0;
LABEL_114:
  if (v485)
  {
    objc_msgSend_popDebugGroup(v485, v230, v231, v232, v233, v234, v235, v236);
  }

  MPSAutoCache::~MPSAutoCache(v488);
  if (v356)
  {
    return 0;
  }

  return v229;
}

void sub_239D46CF0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, uint64_t a52, uint64_t a53, uint64_t a54, uint64_t a55, uint64_t a56, uint64_t a57, uint64_t a58, uint64_t a59, uint64_t a60, uint64_t a61, char a62)
{
  if (a2)
  {
    sub_239BAD79C(exception_object);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_239D46DC0(void *a1, void *a2, uint64_t a3, unint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v23 = *MEMORY[0x277D85DE8];
  result = objc_msgSend_count(a2, a2, a3, a4, a5, a6, a7, a8);
  memset(v22, 0, sizeof(v22));
  if (a4)
  {
    v17 = result;
    v18 = 0;
    do
    {
      if (v17 <= v18)
      {
        v19 = 0;
        if (a4 - v18 >= 0x20)
        {
          v20 = 32;
        }

        else
        {
          v20 = a4 - v18;
        }

        v21 = v20;
        if (!v20)
        {
          goto LABEL_3;
        }
      }

      else
      {
        if (v17 - v18 >= 0x20)
        {
          v19 = 32;
          objc_msgSend_getObjects_range_(a2, v13, v22, v18, 32, v14, v15, v16);
        }

        else
        {
          v19 = v17 - v18;
          objc_msgSend_getObjects_range_(a2, v13, v22, v18, v17 - v18, v14, v15, v16);
        }

        if (a4 - v18 >= 0x20)
        {
          v20 = 32;
        }

        else
        {
          v20 = a4 - v18;
        }

        v21 = v20 - v19;
        if (v20 == v19)
        {
          goto LABEL_3;
        }
      }

      bzero(v22 + 8 * v19, 8 * v21);
LABEL_3:
      result = objc_msgSend_setTextures_withRange_(a1, v13, v22, v18 + a3, v20, v14, v15, v16);
      v18 += v20;
    }

    while (v18 < a4);
  }

  return result;
}

void *sub_239D46F08(void *result, const char *a2, void *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  *result = 0;
  if ((a2[*MEMORY[0x277CD7378]] & 8) != 0)
  {
    v8 = result;
    v9 = *&a2[*MEMORY[0x277CD7360]];
    if (!v9)
    {
      v13 = a3;
      v10 = objc_opt_class();
      v11 = NSStringFromClass(v10);
      a3 = v13;
      v9 = v11;
    }

    v12 = a3;
    objc_msgSend_pushDebugGroup_(a3, a2, v9, a4, a5, a6, a7, a8);
    result = v8;
    *v8 = v12;
  }

  return result;
}

uint64_t sub_239D46F94(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v9 = a1 + *MEMORY[0x277CD7320];
  explicit = atomic_load_explicit(v9, memory_order_acquire);
  if ((*(v9 + 56) & 2) != 0)
  {
    if (*(v9 + 52) < 2u)
    {
      v11 = 2;
    }

    else
    {
      v11 = 3;
    }
  }

  else
  {
    if (!explicit)
    {
      explicit = *(v9 + 40);
    }

    v11 = objc_msgSend_textureType(explicit, a2, a3, a4, a5, a6, a7, a8);
  }

  v12 = *(a1 + *MEMORY[0x277CD72F0]) - 1;
  if (v12 > 4)
  {
    v13 = 0;
  }

  else
  {
    v13 = dword_239D98188[v12];
  }

  if (v11 == 3)
  {
    ++v13;
  }

  if (*(a1 + *MEMORY[0x277CD7310]) > 1uLL)
  {
    v13 |= 2u;
  }

  if ((*(a1 + *MEMORY[0x277CD7318] + 3) & 3) != 0)
  {
    return v13 | 4;
  }

  else
  {
    return v13;
  }
}

uint64_t sub_239D47064(uint64_t a1, void *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if ((*(a1 + *MEMORY[0x277CD7378]) & 8) != 0)
  {
    v18 = a1;
    v19 = *(a1 + *MEMORY[0x277CD7360]);
    if (!v19)
    {
      v20 = a2;
      v21 = objc_opt_class();
      v22 = NSStringFromClass(v21);
      a2 = v20;
      v19 = v22;
    }

    v8 = a2;
    objc_msgSend_pushDebugGroup_(a2, a2, v19, a4, a5, a6, a7, a8);
    a1 = v18;
  }

  else
  {
    v8 = 0;
  }

  v16 = (*(a1 + 376))(*(a1 + 392));
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, v9, v10, v11, v12, v13, v14, v15);
  }

  return v16;
}

void sub_239D47138(_Unwind_Exception *exception_object, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, a2, a3, a4, a5, a6, a7, a8);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_239D47158(void *a1, char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v494 = *MEMORY[0x277D85DE8];
  v451 = *(a1 + *MEMORY[0x277CD7350]);
  v11 = a1[54];
  if (*(a4 + 416) && MTLReportFailureTypeEnabled())
  {
    v440 = objc_opt_class();
    v445 = NSStringFromClass(v440);
    MTLReportFailure();
  }

  if (*(a4 + 416) != *(a4 + 440) && MTLReportFailureTypeEnabled())
  {
    v441 = objc_opt_class();
    v445 = NSStringFromClass(v441);
    MTLReportFailure();
  }

  if (*(a4 + 368) && MTLReportFailureTypeEnabled())
  {
    v442 = objc_opt_class();
    v445 = NSStringFromClass(v442);
    MTLReportFailure();
  }

  if (*(a4 + 48) - *(a4 + 456) != *(a4 + 104) - *(a4 + 464) && MTLReportFailureTypeEnabled())
  {
    v443 = objc_opt_class();
    v445 = NSStringFromClass(v443);
    MTLReportFailure();
  }

  if (*(a4 + 48) - *(a4 + 456) + *(a4 + 448) > *(a4 + 160) && MTLReportFailureTypeEnabled())
  {
    v444 = objc_opt_class();
    v445 = NSStringFromClass(v444);
    MTLReportFailure();
  }

  v12 = (*(a4 + 456) + 3) >> 2;
  v13 = (*(a4 + 464) + 3) >> 2;
  v14 = *(a4 + 448) + 3;
  v452 = *(a4 + 400);
  v15 = vmovn_s64(v452);
  v473 = v12;
  v472 = vuzp1_s16(v15, v15).u32[0];
  v449 = *(a4 + 424);
  v16 = vmovn_s64(*(a4 + 424));
  v448 = v16.i16[2];
  v475 = v13;
  v474 = vuzp1_s16(v16, v16).u32[0];
  v17 = *(a4 + 352);
  v18 = vmovn_s64(v17);
  v477 = v14 >> 2;
  v476 = vuzp1_s16(v18, *v17.i8).u32[0];
  v446 = *(a4 + 376);
  *v17.i8 = vmovn_s64(v446);
  v479 = v17.i16[2];
  v478 = v17.i16[0];
  v480 = *(a4 + 48);
  v481 = *(a4 + 160);
  v26 = objc_msgSend_maxBatchSize(a1, a2, a3, a4, a5, a6, a7, a8, v445);
  v27 = vmovn_s32(vuzp1q_s32(v452, vdupq_lane_s64(v449, 0)));
  v27.i16[2] = v12;
  if (*&v27 || v448 || v13 || (v28 = objc_msgSend_width(*(a4 + 64), v19, v20, v21, v22, v23, v24, v25), v28 != objc_msgSend_width(*(a4 + 120), v29, v30, v31, v32, v33, v34, v35)) || (v43 = objc_msgSend_height(*(a4 + 64), v36, v37, v38, v39, v40, v41, v42), v43 != objc_msgSend_height(*(a4 + 120), v44, v45, v46, v47, v48, v49, v50)) || *(a4 + 48) != *(a4 + 104) || (v58 = vtst_s32(v18, 0xFFFF0000FFFFLL), (v58.i8[0] & 1) != 0) || (v58.i8[4] & 1) != 0 || (v14 >> 2) || objc_msgSend_width(*(a4 + 120), v51, v52, v53, v54, v55, v56, v57) != v446.u16[0] || objc_msgSend_width(*(a4 + 64), v59, v60, v61, v62, v63, v64, v65) != v446.u16[0] || objc_msgSend_height(*(a4 + 120), v66, v67, v68, v69, v70, v71, v72) != v446.u16[4] || objc_msgSend_height(*(a4 + 64), v73, v74, v75, v76, v77, v78, v79) != v446.u16[4])
  {
    *&v227 = -1;
    *(&v227 + 1) = -1;
    v460 = v227;
    *v461 = v227;
    v458 = v227;
    v459 = v227;
    v228 = *(a4 + 200) & 0x3F | ((*(a4 + 256) & 0x3F) << 6) & 0xFFF | ((*(a4 + 304) & 0x3Fu) << 12);
    *&v457 = v26;
    *(&v457 + 1) = v228;
    MPSLibrary::CreateUberShaderKey();
    PipelineStateForMPSKey = MPSLibrary::GetPipelineStateForMPSKey();
    objc_msgSend_setComputePipelineState_(a2, v229, PipelineStateForMPSKey, v230, v231, v232, v233, v234, 0, 0, 0, 0, 0);
    MPSLibrary::ReleaseComputeState();
    MPSLibrary::ReleaseMPSKey();
    if ((*(a4 + 256) & 2) == 0)
    {
      objc_msgSend_setTexture_atIndex_(a2, v235, *(a4 + 64), v26, v238, v239, v240, v241);
LABEL_44:
      objc_msgSend_setBytes_length_atIndex_(a2, v242, a4 + 272, 32, 1, v243, v244, v245);
      if ((*(a4 + 304) & 2) == 0)
      {
        objc_msgSend_setTexture_atIndex_(a2, v253, *(a4 + 120), 2 * v26, v256, v257, v258, v259);
LABEL_64:
        objc_msgSend_setBytes_length_atIndex_(a2, v260, a4 + 320, 32, 2, v261, v262, v263);
        if ((*(a4 + 200) & 2) == 0)
        {
          objc_msgSend_setTexture_atIndex_(a2, v271, *(a4 + 176), 0, v274, v275, v276, v277);
LABEL_84:
          objc_msgSend_setBytes_length_atIndex_(a2, v278, a4 + 216, 40, 0, v279, v280, v281);
          Sampler = MPSDevice::GetSampler();
          objc_msgSend_setSamplerState_atIndex_(a2, v290, Sampler, 0, v291, v292, v293, v294);
          objc_msgSend_setBytes_length_atIndex_(a2, v295, &v472, 32, 30, v296, v297, v298);
          v306 = objc_msgSend_threadExecutionWidth(PipelineStateForMPSKey, v299, v300, v301, v302, v303, v304, v305);
          if (v306 <= 1)
          {
            v314 = 1;
          }

          else
          {
            v314 = v306;
          }

          v315 = objc_msgSend_maxTotalThreadsPerThreadgroup(PipelineStateForMPSKey, v307, v308, v309, v310, v311, v312, v313);
          v316 = *(a4 + 8);
          v317 = (v315 / v314 + *(a4 + 384) - 1) / (v315 / v314);
          *&v482 = (v314 + *(a4 + 376) - 1) / v314;
          *(&v482 + 1) = v317;
          *&v483 = v316;
          *v464 = v314;
          *&v464[8] = v315 / v314;
          *&v464[16] = 1;
          objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a2, v318, &v482, v464, v319, v320, v321, v322);
          return 0;
        }

        v282 = *(a4 + 208);
        v283 = objc_msgSend_count(v282, v271, v272, v273, v274, v275, v276, v277);
        v492 = 0u;
        v493 = 0u;
        v491 = 0u;
        memset(v490, 0, sizeof(v490));
        v489 = 0u;
        memset(v488, 0, sizeof(v488));
        v486 = 0u;
        v487 = 0u;
        v484 = 0u;
        v485 = 0u;
        v482 = 0u;
        v483 = 0u;
        if (!v26)
        {
          goto LABEL_84;
        }

        v284 = v283;
        v285 = 0;
        while (1)
        {
          if (v284 <= v285)
          {
            v286 = 0;
            if (v26 - v285 >= 0x20)
            {
              v287 = 32;
            }

            else
            {
              v287 = v26 - v285;
            }

            v288 = v287;
            if (!v287)
            {
              goto LABEL_77;
            }
          }

          else
          {
            if (v284 - v285 >= 0x20)
            {
              v286 = 32;
              objc_msgSend_getObjects_range_(v282, v278, &v482, v285, 32, v279, v280, v281);
            }

            else
            {
              v286 = v284 - v285;
              objc_msgSend_getObjects_range_(v282, v278, &v482, v285, v284 - v285, v279, v280, v281);
            }

            if (v26 - v285 >= 0x20)
            {
              v287 = 32;
            }

            else
            {
              v287 = v26 - v285;
            }

            v288 = v287 - v286;
            if (v287 == v286)
            {
              goto LABEL_77;
            }
          }

          bzero(&v482 + 8 * v286, 8 * v288);
LABEL_77:
          objc_msgSend_setTextures_withRange_(a2, v278, &v482, v285, v287, v279, v280, v281);
          v285 += v287;
          if (v285 >= v26)
          {
            goto LABEL_84;
          }
        }
      }

      v264 = *(a4 + 312);
      v265 = objc_msgSend_count(v264, v253, v254, v255, v256, v257, v258, v259);
      v492 = 0u;
      v493 = 0u;
      v491 = 0u;
      memset(v490, 0, sizeof(v490));
      v489 = 0u;
      memset(v488, 0, sizeof(v488));
      v486 = 0u;
      v487 = 0u;
      v484 = 0u;
      v485 = 0u;
      v482 = 0u;
      v483 = 0u;
      if (!v26)
      {
        goto LABEL_64;
      }

      v266 = v265;
      v267 = 0;
      while (1)
      {
        if (v266 <= v267)
        {
          v268 = 0;
          if (v26 - v267 >= 0x20)
          {
            v269 = 32;
          }

          else
          {
            v269 = v26 - v267;
          }

          v270 = v269;
          if (!v269)
          {
            goto LABEL_57;
          }
        }

        else
        {
          if (v266 - v267 >= 0x20)
          {
            v268 = 32;
            objc_msgSend_getObjects_range_(v264, v260, &v482, v267, 32, v261, v262, v263);
          }

          else
          {
            v268 = v266 - v267;
            objc_msgSend_getObjects_range_(v264, v260, &v482, v267, v266 - v267, v261, v262, v263);
          }

          if (v26 - v267 >= 0x20)
          {
            v269 = 32;
          }

          else
          {
            v269 = v26 - v267;
          }

          v270 = v269 - v268;
          if (v269 == v268)
          {
            goto LABEL_57;
          }
        }

        bzero(&v482 + 8 * v268, 8 * v270);
LABEL_57:
        objc_msgSend_setTextures_withRange_(a2, v260, &v482, v267 + 2 * v26, v269, v261, v262, v263);
        v267 += v269;
        if (v267 >= v26)
        {
          goto LABEL_64;
        }
      }
    }

    v246 = *(a4 + 264);
    v247 = objc_msgSend_count(v246, v235, v236, v237, v238, v239, v240, v241);
    v492 = 0u;
    v493 = 0u;
    v491 = 0u;
    memset(v490, 0, sizeof(v490));
    v489 = 0u;
    memset(v488, 0, sizeof(v488));
    v486 = 0u;
    v487 = 0u;
    v484 = 0u;
    v485 = 0u;
    v482 = 0u;
    v483 = 0u;
    if (!v26)
    {
      goto LABEL_44;
    }

    v248 = v247;
    v249 = 0;
    while (1)
    {
      if (v248 <= v249)
      {
        v250 = 0;
        if (v26 - v249 >= 0x20)
        {
          v251 = 32;
        }

        else
        {
          v251 = v26 - v249;
        }

        v252 = v251;
        if (!v251)
        {
          goto LABEL_37;
        }
      }

      else
      {
        if (v248 - v249 >= 0x20)
        {
          v250 = 32;
          objc_msgSend_getObjects_range_(v246, v242, &v482, v249, 32, v243, v244, v245);
        }

        else
        {
          v250 = v248 - v249;
          objc_msgSend_getObjects_range_(v246, v242, &v482, v249, v248 - v249, v243, v244, v245);
        }

        if (v26 - v249 >= 0x20)
        {
          v251 = 32;
        }

        else
        {
          v251 = v26 - v249;
        }

        v252 = v251 - v250;
        if (v251 == v250)
        {
          goto LABEL_37;
        }
      }

      bzero(&v482 + 8 * v250, 8 * v252);
LABEL_37:
      objc_msgSend_setTextures_withRange_(a2, v242, &v482, v249 + v26, v251, v243, v244, v245);
      v249 += v251;
      if (v249 >= v26)
      {
        goto LABEL_44;
      }
    }
  }

  PixelInfo = MPSDevice::GetPixelInfo(v451, MTLPixelFormatR32Float, MPSImageFeatureChannelFormatNone);
  v80 = MEMORY[0x277CD7220];
  v88 = objc_msgSend_width(*(a4 + 24), v81, v82, v83, v84, v85, v86, v87);
  v96 = objc_msgSend_height(*(a4 + 24), v89, v90, v91, v92, v93, v94, v95);
  v104 = objc_msgSend_numberOfImages(*(a4 + 24), v97, v98, v99, v100, v101, v102, v103);
  v112 = objc_msgSend_usage(*(a4 + 24), v105, v106, v107, v108, v109, v110, v111);
  v114 = objc_msgSend_imageDescriptorWithChannelFormat_width_height_featureChannels_numberOfImages_usage_(v80, v113, 4, v88, v96, 1, v104, v112);
  v469 = objc_msgSend_width(v114, v115, v116, v117, v118, v119, v120, v121);
  v470 = objc_msgSend_height(v114, v122, v123, v124, v125, v126, v127, v128);
  v471 = (objc_msgSend_featureChannels(v114, v129, v130, v131, v132, v133, v134, v135) + 3) >> 2;
  MEMORY[0x23EE7D040](v467, a3, 0);
  v136 = objc_alloc(MEMORY[0x277CBEB18]);
  v143 = objc_msgSend_initWithCapacity_(v136, v137, *(a4 + 8), v138, v139, v140, v141, v142);
  TempTexture = MPSAutoCache::GetTempTexture();
  objc_msgSend_addObject_(v143, v145, TempTexture, v146, v147, v148, v149, v150);
  v151 = objc_alloc(MEMORY[0x277CD7218]);
  v158 = objc_msgSend_objectAtIndexedSubscript_(v143, v152, 0, v153, v154, v155, v156, v157);
  v166 = objc_msgSend_featureChannels(v114, v159, v160, v161, v162, v163, v164, v165);
  v172 = objc_msgSend_initWithTexture_featureChannels_(v151, v167, v158, v166, v168, v169, v170, v171);
  v466 = *&v172[*MEMORY[0x277CD7318]];
  v453 = objc_msgSend_width(v172, v173, v174, v175, v176, v177, v178, v179);
  v450 = objc_msgSend_height(v172, v180, v181, v182, v183, v184, v185, v186);
  v447 = *(a4 + 392);
  sub_239D46F08(&v465, v11, a2, v187, v188, v189, v190, v191);
  memset(v464, 0, sizeof(v464));
  v192 = *MEMORY[0x277CD72F8];
  LOWORD(v193) = v453;
  WORD1(v193) = v450;
  WORD2(v193) = (*&v172[v192] + 3) >> 2;
  HIWORD(v193) = *(a4 + 8);
  *&v464[8] = v193;
  *&v464[16] = *&v172[v192];
  *&v464[20] = 1;
  *&v464[26] = objc_msgSend_maxBatchSize(a1, v194, v195, v196, v197, v198, v199, v200);
  if ((*(a4 + 256) & 2) != 0)
  {
    if (*(a4 + 8) >= 2uLL)
    {
      v324 = 1;
      do
      {
        v325 = MPSAutoCache::GetTempTexture();
        objc_msgSend_addObject_(v143, v326, v325, v327, v328, v329, v330, v331);
        ++v324;
      }

      while (v324 < *(a4 + 8));
    }

    v463 = 0u;
    v462 = 0u;
    *&v461[8] = 0u;
    v332 = *(a4 + 40);
    v457 = *(a4 + 24);
    v458 = v332;
    v459 = *(a4 + 56);
    *&v460 = *(a4 + 72);
    *(&v460 + 1) = v172;
    v210 = v172;
    *v461 = &v466;
    *&v461[8] = sub_239D46F94(v172, v201, v202, v203, v204, v205, v206, v207);
    *&v461[16] = *&v172[*MEMORY[0x277CD72F8]];
    *&v462 = *&v172[*MEMORY[0x277CD7328]];
    v337 = &v172[*MEMORY[0x277CD7320]];
    explicit = atomic_load_explicit(v337, memory_order_acquire);
    if (!explicit)
    {
      MPSAutoTexture::AllocateTexture(v337, 0);
      explicit = atomic_load_explicit(v337, memory_order_acquire);
    }

    *(&v462 + 1) = explicit;
    v339 = *&v172[*MEMORY[0x277CD7300]];
    v484 = 0u;
    v485 = 0u;
    v482 = *a4;
    v485 = *v464;
    v486 = 0u;
    v340 = *(a4 + 192);
    *&v463 = v339;
    *(&v463 + 1) = v340;
    *&v483 = *(a4 + 16);
    *(&v483 + 1) = &v457;
    LODWORD(v484) = *&v461[8];
    v486 = *&v464[16];
    v487 = 0u;
    *(&v484 + 1) = v143;
    *&v487 = *&v464[32];
    DWORD2(v487) = *(a4 + 256);
    v341 = *(a4 + 264);
    v342 = *(a4 + 272);
    *&v488[3] = *(a4 + 288);
    *&v488[1] = v342;
    v488[0] = v341;
    v488[5] = 0;
    v489 = 0uLL;
    v490[0] = v453;
    v490[1] = v450;
    v343 = *(a4 + 400);
    v344 = *(a4 + 416);
    v490[2] = v447;
    v490[5] = v344;
    *&v490[3] = v343;
    v345 = *(a4 + 456);
    *&v491 = 0;
    *(&v491 + 1) = v345;
    v219 = sub_239D48200(*(v11 + 304), a2, a3, &v482, v333, v334, v335, v336);
    if (v219)
    {

      goto LABEL_97;
    }

LABEL_98:
    *&v347 = -1;
    *(&v347 + 1) = -1;
    v485 = v347;
    v486 = v347;
    v483 = v347;
    v484 = v347;
    v348 = *(a4 + 200) & 0x3F | ((*(a4 + 256) & 0x3F) << 6) & 0xFFF | ((*(a4 + 304) & 0x3Fu) << 12);
    *&v482 = v26;
    *(&v482 + 1) = v348;
    MPSLibrary::CreateUberShaderKey();
    v349 = MPSLibrary::GetPipelineStateForMPSKey();
    objc_msgSend_setComputePipelineState_(a2, v350, v349, v351, v352, v353, v354, v355, 0, 0, 0, 0, 0);
    MPSLibrary::ReleaseComputeState();
    MPSLibrary::ReleaseMPSKey();
    if ((*(a4 + 256) & 2) != 0)
    {
      sub_239D46DC0(a2, *(a4 + 264), v26, v26, v357, v358, v359, v360);
    }

    else
    {
      objc_msgSend_setTexture_atIndex_(a2, v356, *(a4 + 64), v26, v357, v358, v359, v360);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v361, a4 + 272, 32, 1, v362, v363, v364);
    if ((*(a4 + 304) & 2) != 0)
    {
      sub_239D46DC0(a2, *(a4 + 312), 2 * v26, v26, v366, v367, v368, v369);
    }

    else
    {
      objc_msgSend_setTexture_atIndex_(a2, v365, *(a4 + 120), 2 * v26, v366, v367, v368, v369);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v370, a4 + 320, 32, 2, v371, v372, v373);
    if ((*(a4 + 256) & 2) != 0)
    {
      sub_239D46DC0(a2, v143, 3 * v26, v26, v377, v378, v379, v380);
    }

    else
    {
      v381 = objc_msgSend_texture(v210, v374, v375, v376, v377, v378, v379, v380);
      objc_msgSend_setTexture_atIndex_(a2, v382, v381, 3 * v26, v383, v384, v385, v386);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v387, v464, 40, 3, v388, v389, v390);
    if ((*(a4 + 200) & 2) != 0)
    {
      sub_239D46DC0(a2, *(a4 + 208), 0, v26, v392, v393, v394, v395);
    }

    else
    {
      objc_msgSend_setTexture_atIndex_(a2, v391, *(a4 + 176), 0, v392, v393, v394, v395);
    }

    objc_msgSend_setBytes_length_atIndex_(a2, v396, a4 + 216, 40, 0, v397, v398, v399);
    v400 = MPSDevice::GetSampler();
    objc_msgSend_setSamplerState_atIndex_(a2, v401, v400, 0, v402, v403, v404, v405);
    v406 = MPSDevice::GetSampler();
    objc_msgSend_setSamplerState_atIndex_(a2, v407, v406, 1, v408, v409, v410, v411);
    objc_msgSend_setBytes_length_atIndex_(a2, v412, &v472, 32, 30, v413, v414, v415);
    v423 = objc_msgSend_threadExecutionWidth(v349, v416, v417, v418, v419, v420, v421, v422);
    v431 = objc_msgSend_maxTotalThreadsPerThreadgroup(v349, v424, v425, v426, v427, v428, v429, v430);
    if (v423 <= 1)
    {
      v437 = 1;
    }

    else
    {
      v437 = v423;
    }

    v438 = *(a4 + 8);
    v439 = (v431 / v437 + *(a4 + 384) - 1) / (v431 / v437);
    *&v457 = (v437 + *(a4 + 376) - 1) / v437;
    *(&v457 + 1) = v439;
    *&v458 = v438;
    v456[0] = v437;
    v456[1] = v431 / v437;
    v456[2] = 1;
    objc_msgSend_dispatchThreadgroups_threadsPerThreadgroup_(a2, v432, &v457, v456, v433, v434, v435, v436);

    v219 = 0;
    v346 = 1;
    goto LABEL_114;
  }

  v491 = 0u;
  memset(v490, 0, sizeof(v490));
  v489 = 0u;
  memset(v488, 0, sizeof(v488));
  v487 = 0u;
  v208 = *(a4 + 40);
  v482 = *(a4 + 24);
  v483 = v208;
  v484 = *(a4 + 56);
  v209 = *(a4 + 192);
  *&v485 = *(a4 + 72);
  *(&v485 + 1) = v209;
  v210 = v172;
  *&v486 = v172;
  *(&v486 + 1) = &v466;
  LODWORD(v487) = sub_239D46F94(v172, v201, v202, v203, v204, v205, v206, v207);
  *(&v487 + 1) = *&v172[*MEMORY[0x277CD72F8]];
  v488[0] = *&v172[*MEMORY[0x277CD7328]];
  v488[1] = 0;
  v488[2] = *&v172[*MEMORY[0x277CD7300]];
  memset(&v488[3], 0, 24);
  *&v489 = v453;
  *(&v489 + 1) = v450;
  memset(&v490[1], 0, 32);
  v215 = *(a4 + 456);
  v490[0] = v447;
  v490[5] = v215;
  v216 = *a4;
  *&v491 = *(a4 + 16);
  *(&v491 + 1) = v216;
  v217 = &v172[*MEMORY[0x277CD7320]];
  v218 = atomic_load_explicit(v217, memory_order_acquire);
  if (!v218)
  {
    MPSAutoTexture::AllocateTexture(v217, 0);
    v218 = atomic_load_explicit(v217, memory_order_acquire);
  }

  v488[1] = v218;
  v219 = sub_239D482F4(*(v11 + 304), a2, a3, &v482, v211, v212, v213, v214);
  if (!v219)
  {
    goto LABEL_98;
  }

LABEL_97:
  v346 = 0;
LABEL_114:
  if (v465)
  {
    objc_msgSend_popDebugGroup(v465, v220, v221, v222, v223, v224, v225, v226);
  }

  MPSAutoCache::~MPSAutoCache(v467);
  if (v346)
  {
    return 0;
  }

  return v219;
}

void sub_239D48144(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, uint64_t a52, uint64_t a53, char a54)
{
  if (a2)
  {
    sub_239BAD79C(exception_object);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_239D48200(uint64_t a1, void *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if ((*(a1 + *MEMORY[0x277CD7378]) & 8) != 0)
  {
    v18 = a1;
    v19 = *(a1 + *MEMORY[0x277CD7360]);
    if (!v19)
    {
      v20 = a2;
      v21 = objc_opt_class();
      v22 = NSStringFromClass(v21);
      a2 = v20;
      v19 = v22;
    }

    v8 = a2;
    objc_msgSend_pushDebugGroup_(a2, a2, v19, a4, a5, a6, a7, a8);
    a1 = v18;
  }

  else
  {
    v8 = 0;
  }

  v16 = (*(a1 + 296))(*(a1 + 304));
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, v9, v10, v11, v12, v13, v14, v15);
  }

  return v16;
}

void sub_239D482D4(_Unwind_Exception *exception_object, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, a2, a3, a4, a5, a6, a7, a8);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_239D482F4(uint64_t a1, void *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if ((*(a1 + *MEMORY[0x277CD7378]) & 8) != 0)
  {
    v18 = a1;
    v19 = *(a1 + *MEMORY[0x277CD7360]);
    if (!v19)
    {
      v20 = a2;
      v21 = objc_opt_class();
      v22 = NSStringFromClass(v21);
      a2 = v20;
      v19 = v22;
    }

    v8 = a2;
    objc_msgSend_pushDebugGroup_(a2, a2, v19, a4, a5, a6, a7, a8);
    a1 = v18;
  }

  else
  {
    v8 = 0;
  }

  v16 = (*(a1 + 288))(*(a1 + 304));
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, v9, v10, v11, v12, v13, v14, v15);
  }

  return v16;
}

void sub_239D483C8(_Unwind_Exception *exception_object, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (v8)
  {
    objc_msgSend_popDebugGroup(v8, a2, a3, a4, a5, a6, a7, a8);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_239D48718(uint64_t a1, uint64_t a2)
{
  v4 = [MPSNNConcatenation alloc];
  result = objc_msgSend_initWithDevice_(v4, v5, a2, v6, v7, v8, v9, v10);
  *(a1 + 104) = result;
  return result;
}

void *sub_239D48754()
{
  v0 = MEMORY[0x28223BE20]();
  v2 = v1;
  v4 = v3;
  v6 = v5;
  v8 = v7;
  v9 = v0;
  v152 = *MEMORY[0x277D85DE8];
  v13 = objc_msgSend_count(v5, v7, v5, v3, v10, v1, v11, v12);
  if (*(v9 + 129) == 1)
  {
    result = objc_msgSend_count(v4, v14, v15, v16, v17, v18, v19, v20);
    if (result)
    {
      v28 = result;
      for (i = 0; i != v28; ++i)
      {
        v30 = objc_msgSend_objectAtIndexedSubscript_(v4, v22, i, v23, v24, v25, v26, v27);
        result = MPSDecrementReadCount(v30);
      }
    }
  }

  else
  {
    v31 = v13;
    objc_msgSend_encodeToCommandBuffer_sourceImages_destinationImage_(*(v9 + 104), v14, v8, v6, v2, v18, v19, v20);
    result = *(v9 + 104);
    if ((*(result + *MEMORY[0x277CD7378]) & 0x10) != 0)
    {
      if (v31)
      {
        v39 = 0;
        v40 = 0;
        do
        {
          if (v39)
          {
            v40 += snprintf(&v151[v40], 0x3FFF - v40, ", ");
          }

          v41 = objc_msgSend_objectAtIndexedSubscript_(v6, v32, v39, v34, v35, v36, v37, v38);
          v49 = objc_msgSend_width(v41, v42, v43, v44, v45, v46, v47, v48);
          v56 = objc_msgSend_objectAtIndexedSubscript_(v6, v50, v39, v51, v52, v53, v54, v55);
          v64 = objc_msgSend_height(v56, v57, v58, v59, v60, v61, v62, v63);
          v71 = objc_msgSend_objectAtIndexedSubscript_(v6, v65, v39, v66, v67, v68, v69, v70);
          v79 = objc_msgSend_featureChannels(v71, v72, v73, v74, v75, v76, v77, v78);
          v80 = *(*(v9 + 32) + 8 * v39);
          do
          {
            v81 = v80;
            v80 = *(v80 + 40);
          }

          while (v80);
          v40 += snprintf(&v151[v40], 0x3FFF - v40, "{%lu x %lu x %lu}[%lu](offset:0)", v49, v64, v79, *(v81 + 64));
          ++v39;
        }

        while (v39 != v31);
        result = *(v9 + 104);
      }

      if (objc_msgSend_label(result, v32, v33, v34, v35, v36, v37, v38))
      {
        v89 = MEMORY[0x277CCACA8];
        v90 = objc_msgSend_label(*(v9 + 104), v82, v83, v84, v85, v86, v87, v88);
        v97 = objc_msgSend_stringWithFormat_(v89, v91, @"%@", v92, v93, v94, v95, v96, v90);
        v104 = objc_msgSend_cStringUsingEncoding_(v97, v98, 4, v99, v100, v101, v102, v103);
      }

      else
      {
        v104 = "";
      }

      v105 = *(v9 + 104);
      v106 = objc_opt_class();
      v107 = NSStringFromClass(v106);
      v114 = objc_msgSend_cStringUsingEncoding_(v107, v108, 1, v109, v110, v111, v112, v113);
      v115 = *(v9 + 120);
      v123 = objc_msgSend_width(v2, v116, v117, v118, v119, v120, v121, v122);
      v131 = objc_msgSend_height(v2, v124, v125, v126, v127, v128, v129, v130);
      v146 = objc_msgSend_featureChannels(v2, v132, v133, v134, v135, v136, v137, v138);
      v147 = *(v9 + 16);
      if (!v147)
      {
        v147 = *(v9 + 8);
      }

      v148 = *(v147 + 64);
      v149 = objc_msgSend_destinationFeatureChannelOffset(*(v9 + 104), v139, v140, v141, v142, v143, v144, v145);
      return sub_239BE215C(v105, v150, "%s (%lu) [%s] -> {%lu x %lu x %lu}[%lu]\toffset: %lu\t%s\n\tpadding policy: n/a\n", v114, v115, v151, v123, v131, v146, v148, v149, v104);
    }
  }

  return result;
}

void *sub_239D489F0()
{
  v0 = MEMORY[0x28223BE20]();
  v2 = v1;
  v4 = v3;
  v6 = v5;
  v8 = v7;
  v9 = v0;
  v215 = *MEMORY[0x277D85DE8];
  result = objc_msgSend_count(v5, v7, v5, v3, v10, v1, v11, v12);
  if (*(v9 + 129) == 1)
  {
    if (v4)
    {
      result = objc_msgSend_count(v4, v14, v15, v16, v17, v18, v19, v20);
      if (result)
      {
        v27 = result;
        for (i = 0; i != v27; ++i)
        {
          objc_msgSend_objectAtIndexedSubscript_(v4, v21, i, v22, v23, v24, v25, v26);
          result = MPSDecrementReadCount();
        }
      }
    }
  }

  else
  {
    v29 = result;
    objc_msgSend_encodeBatchToCommandBuffer_sourceImages_destinationImage_(*(v9 + 104), v14, v8, v6, v2, v18, v19, v20);
    result = *(v9 + 104);
    if ((*(result + *MEMORY[0x277CD7378]) & 0x10) != 0)
    {
      if (v29)
      {
        v37 = 0;
        v38 = 0;
        do
        {
          if (v37)
          {
            v38 += snprintf(&v214[v38], 0x3FFF - v38, ", ");
          }

          v39 = objc_msgSend_objectAtIndexedSubscript_(v6, v30, v37, v32, v33, v34, v35, v36);
          v46 = objc_msgSend_objectAtIndexedSubscript_(v39, v40, 0, v41, v42, v43, v44, v45);
          v54 = objc_msgSend_width(v46, v47, v48, v49, v50, v51, v52, v53);
          v61 = objc_msgSend_objectAtIndexedSubscript_(v6, v55, v37, v56, v57, v58, v59, v60);
          v68 = objc_msgSend_objectAtIndexedSubscript_(v61, v62, 0, v63, v64, v65, v66, v67);
          v76 = objc_msgSend_height(v68, v69, v70, v71, v72, v73, v74, v75);
          v83 = objc_msgSend_objectAtIndexedSubscript_(v6, v77, v37, v78, v79, v80, v81, v82);
          v90 = objc_msgSend_objectAtIndexedSubscript_(v83, v84, 0, v85, v86, v87, v88, v89);
          v98 = objc_msgSend_featureChannels(v90, v91, v92, v93, v94, v95, v96, v97);
          v99 = *(*(v9 + 32) + 8 * v37);
          do
          {
            v100 = v99;
            v99 = *(v99 + 40);
          }

          while (v99);
          v38 += snprintf(&v214[v38], 0x3FFF - v38, "{%lu x %lu x %lu}[%lu](offset:0)", v54, v76, v98, *(v100 + 64));
          ++v37;
        }

        while (v37 != v29);
        result = *(v9 + 104);
      }

      if (objc_msgSend_label(result, v30, v31, v32, v33, v34, v35, v36))
      {
        v108 = MEMORY[0x277CCACA8];
        v109 = objc_msgSend_label(*(v9 + 104), v101, v102, v103, v104, v105, v106, v107);
        v116 = objc_msgSend_stringWithFormat_(v108, v110, @"%@", v111, v112, v113, v114, v115, v109);
        v213 = objc_msgSend_cStringUsingEncoding_(v116, v117, 4, v118, v119, v120, v121, v122);
      }

      else
      {
        v213 = "";
      }

      v123 = *(v9 + 104);
      v124 = objc_opt_class();
      v125 = NSStringFromClass(v124);
      v132 = objc_msgSend_cStringUsingEncoding_(v125, v126, 1, v127, v128, v129, v130, v131);
      v133 = *(v9 + 120);
      v140 = objc_msgSend_objectAtIndexedSubscript_(v6, v134, 0, v135, v136, v137, v138, v139);
      v148 = objc_msgSend_count(v140, v141, v142, v143, v144, v145, v146, v147);
      v156 = objc_msgSend_count(v2, v149, v150, v151, v152, v153, v154, v155);
      v163 = objc_msgSend_objectAtIndexedSubscript_(v2, v157, 0, v158, v159, v160, v161, v162);
      v171 = objc_msgSend_width(v163, v164, v165, v166, v167, v168, v169, v170);
      v178 = objc_msgSend_objectAtIndexedSubscript_(v2, v172, 0, v173, v174, v175, v176, v177);
      v186 = objc_msgSend_height(v178, v179, v180, v181, v182, v183, v184, v185);
      v193 = objc_msgSend_objectAtIndexedSubscript_(v2, v187, 0, v188, v189, v190, v191, v192);
      v208 = objc_msgSend_featureChannels(v193, v194, v195, v196, v197, v198, v199, v200);
      v209 = *(v9 + 16);
      if (!v209)
      {
        v209 = *(v9 + 8);
      }

      v210 = *(v209 + 64);
      v211 = objc_msgSend_destinationFeatureChannelOffset(*(v9 + 104), v201, v202, v203, v204, v205, v206, v207);
      return sub_239BE215C(v123, v212, "%s (%lu) %lu*[%s] -> %lu*{%lu x %lu x %lu}[%lu]\toffset: %lu\t%s\n\tpadding policy: n/a\n", v132, v133, v148, v214, v156, v171, v186, v208, v210, v211, v213);
    }
  }

  return result;
}

uint64_t sub_239D48CF4(uint64_t a1, void *a2, unsigned __int16 **a3, unint64_t *a4)
{
  result = sub_239C140D4(a1, a2, a3, a4);
  *result = &unk_284CD28E8;
  v7 = *a4;
  if (*a4 <= 1)
  {
    exception = __cxa_allocate_exception(4uLL);
    *exception = 1;
    __cxa_throw(exception, &unk_284CD31F8, 0);
  }

  v8 = *a3;
  if (**a3 != 1)
  {
    v10 = __cxa_allocate_exception(4uLL);
    *v10 = 2;
    __cxa_throw(v10, &unk_284CD31F8, 0);
  }

  *(result + 129) = *(v8 + 1) != 0;
  *a4 = v7 - 2;
  *a3 = v8 + 1;
  return result;
}

char *sub_239D48DF4(uint64_t a1, void *a2)
{
  v8 = 0;
  v4 = sub_239C14460(a1, &v8);
  v5 = v8 + 2;
  result = malloc_type_realloc(v4, v8 + 2, 0x59F710EEuLL);
  if (result)
  {
    v7 = &result[v8];
    *v7 = 1;
    v7[1] = *(a1 + 129);
    *a2 = v5;
  }

  else
  {
    *a2 = 0;
  }

  return result;
}

uint64_t sub_239D4913C(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSNNConcatenationGradient alloc];
  result = objc_msgSend_initWithDevice_sourceIndex_(v5, v6, a2, *(v4 + 56), v7, v8, v9, v10);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D49190(uint64_t result, const char *a2, void *a3, void *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if ((*(result + 129) & 1) == 0)
  {
    v9 = result;
    v15 = objc_msgSend_objectAtIndexedSubscript_(a4, a2, 0, a4, a5, a6, a7, a8);
    v16 = v9[13];
    v23 = objc_msgSend_objectAtIndexedSubscript_(a3, v17, 0, v18, v19, v20, v21, v22);
    v30 = objc_msgSend_objectAtIndexedSubscript_(a3, v24, 1, v25, v26, v27, v28, v29);
    objc_msgSend_encodeToCommandBuffer_sourceGradient_sourceImage_gradientState_destinationGradient_(v16, v31, a2, v23, v30, v15, a6, v32);
    v33 = *(*v9 + 184);

    return v33(v9, a2, a3, a4, a5, a6);
  }

  return result;
}

uint64_t sub_239D49284(uint64_t result, const char *a2, void *a3, void *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if ((*(result + 129) & 1) == 0)
  {
    v12 = result;
    v15 = objc_msgSend_objectAtIndexedSubscript_(a4, a2, 0, a4, a5, a6, a7, a8);
    (*(*v12 + 192))(v12, a2, a3, a4, a5, a6);
    v16 = v12[13];
    v23 = objc_msgSend_objectAtIndexedSubscript_(a3, v17, 0, v18, v19, v20, v21, v22);
    v31 = objc_msgSend_objectAtIndexedSubscript_(a3, v24, 1, v25, v26, v27, v28, v29);

    return objc_msgSend_encodeBatchToCommandBuffer_sourceGradients_sourceImages_gradientStates_destinationGradients_(v16, v30, a2, v23, v31, v15, a6, v32);
  }

  return result;
}

void *sub_239D49370(uint64_t a1, size_t *a2)
{
  result = sub_239C14460(a1, a2);
  if (result)
  {
    result = reallocf(result, *a2 + 1);
    if (result)
    {
      v5 = (*a2)++;
      *(result + v5) = *(a1 + 129);
    }
  }

  return result;
}

uint64_t (***sub_239D493C0(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8))(void)
{
  v10 = *(a1 + 104);
  v11 = objc_msgSend_destinationFeatureChannelOffset(v10, a2, a3, a4, a5, a6, a7, a8);
  result = objc_msgSend_setDestinationFeatureChannelOffset_(v10, v12, &a2[v11], v13, v14, v15, v16, v17);
  if (*(a1 + 129))
  {
    if (*(a1 + 40))
    {
      v19 = **(a1 + 32);
      if (v19)
      {
        result = *(v19 + 32);
        if (result)
        {
          v20 = **result;

          return v20();
        }
      }
    }
  }

  return result;
}

void sub_239D49470(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

uint64_t sub_239D494A8(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  result = objc_msgSend_setDestinationFeatureChannelOffset_(*(a1 + 104), a2, 0, a4, a5, a6, a7, a8);
  if (*(a1 + 129))
  {
    if (*(a1 + 40))
    {
      v10 = **(a1 + 32);
      if (v10)
      {
        result = *(v10 + 32);
        if (result)
        {
          v11 = *(*result + 56);

          return v11();
        }
      }
    }
  }

  return result;
}

void *sub_239D4953C(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (a5)
  {
    return 0;
  }

  v10 = *(a1 + 104);
  if (a7)
  {
    result = objc_msgSend_temporaryResultStateForCommandBuffer_sourceImages_sourceStates_destinationImage_(v10, a2, a6, a2, a3, a4, a7, a8);
    if (!result)
    {
      return result;
    }

    v17 = *(**(a1 + 80) + 72) + *(**(a1 + 80) + 80);
    if (v17 != 1)
    {
      v18 = result;
      objc_msgSend_setReadCount_(result, v11, v17, v12, v13, v14, v15, v16);
      result = v18;
    }
  }

  else
  {
    result = objc_msgSend_resultStateForSourceImages_sourceStates_destinationImage_(v10, a2, a2, a3, a4, a6, a7, a8);
    if (!result)
    {
      return result;
    }
  }

  v19 = **(a1 + 8);
  if (v19)
  {
    v20 = result;
    v21 = objc_msgSend_label(v19, v11, v17, v12, v13, v14, v15, v16);
    if (v21)
    {
      objc_msgSend_setLabel_(v20, v22, v21, v23, v24, v25, v26, v27);
    }

    return v20;
  }

  return result;
}

void *sub_239D49600(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (a5)
  {
    return 0;
  }

  v11 = *(a1 + 104);
  if (a7)
  {
    v12 = objc_msgSend_temporaryResultStateBatchForCommandBuffer_sourceImages_sourceStates_destinationImage_(v11, a2, a6, a2, a3, a4, a7, a8);
    v8 = v12;
    if (!v12)
    {
      return v8;
    }

    v19 = *(**(a1 + 80) + 72) + *(**(a1 + 80) + 80);
    v20 = (v19 - 1);
    if (v19 != 1)
    {
      MPSStateBatchIncrementReadCount(v12, v20);
    }
  }

  else
  {
    v8 = objc_msgSend_resultStateBatchForSourceImages_sourceStates_destinationImage_(v11, a2, a2, a3, a4, a6, a7, a8);
    if (!v8)
    {
      return v8;
    }
  }

  v21 = **(a1 + 8);
  if (v21)
  {
    v22 = objc_msgSend_label(v21, v20, v13, v14, v15, v16, v17, v18);
    if (v22)
    {
      v30 = v22;
      v31 = objc_msgSend_count(v8, v23, v24, v25, v26, v27, v28, v29);
      if (v31)
      {
        v38 = v31;
        for (i = 0; i != v38; ++i)
        {
          v40 = objc_msgSend_objectAtIndexedSubscript_(v8, v32, i, v33, v34, v35, v36, v37);
          objc_msgSend_setLabel_(v40, v41, v30, v42, v43, v44, v45, v46);
        }
      }
    }
  }

  return v8;
}

void sub_239D4970C(uint64_t a1)
{
  sub_239C13FBC(a1);

  JUMPOUT(0x23EE7D130);
}

uint64_t sub_239D4975C(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (*(a1 + 129) != 1)
  {
    return 0;
  }

  v9 = objc_msgSend_primarySourceFeatureChannelOffset(*(a1 + 104), a2, a3, a4, a5, a6, a7, a8);
  objc_msgSend_primarySourceFeatureChannelMaxCount(*(a1 + 104), v10, v11, v12, v13, v14, v15, v16);
  return v9;
}

uint64_t sub_239D49AEC(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNSpatialNormalization alloc];
  v10 = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_(v5, v6, a2, *(v4 + 72), *(v4 + 80), v7, v8, v9);
  LODWORD(v11) = *(v4 + 56);
  objc_msgSend_setAlpha_(v10, v12, v13, v14, v15, v16, v17, v18, v11);
  LODWORD(v19) = *(v4 + 60);
  objc_msgSend_setBeta_(v10, v20, v21, v22, v23, v24, v25, v26, v19);
  LODWORD(v27) = *(v4 + 64);
  result = objc_msgSend_setDelta_(v10, v28, v29, v30, v31, v32, v33, v34, v27);
  *(a1 + 104) = v10;
  return result;
}

uint64_t sub_239D49F20(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNSpatialNormalizationGradient alloc];
  v10 = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_(v5, v6, a2, *(v4 + 56), *(v4 + 64), v7, v8, v9);
  LODWORD(v11) = *(v4 + 72);
  objc_msgSend_setAlpha_(v10, v12, v13, v14, v15, v16, v17, v18, v11);
  LODWORD(v19) = *(v4 + 76);
  objc_msgSend_setBeta_(v10, v20, v21, v22, v23, v24, v25, v26, v19);
  LODWORD(v27) = *(v4 + 80);
  result = objc_msgSend_setDelta_(v10, v28, v29, v30, v31, v32, v33, v34, v27);
  *(a1 + 104) = v10;
  return result;
}

uint64_t sub_239D4A258(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNLocalContrastNormalization alloc];
  v10 = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_(v5, v6, a2, *(v4 + 80), *(v4 + 88), v7, v8, v9);
  LODWORD(v11) = *(v4 + 56);
  objc_msgSend_setAlpha_(v10, v12, v13, v14, v15, v16, v17, v18, v11);
  LODWORD(v19) = *(v4 + 60);
  objc_msgSend_setBeta_(v10, v20, v21, v22, v23, v24, v25, v26, v19);
  LODWORD(v27) = *(v4 + 64);
  objc_msgSend_setDelta_(v10, v28, v29, v30, v31, v32, v33, v34, v27);
  LODWORD(v35) = *(v4 + 76);
  objc_msgSend_setP0_(v10, v36, v37, v38, v39, v40, v41, v42, v35);
  LODWORD(v43) = *(v4 + 72);
  objc_msgSend_setPs_(v10, v44, v45, v46, v47, v48, v49, v50, v43);
  LODWORD(v51) = *(v4 + 68);
  result = objc_msgSend_setPm_(v10, v52, v53, v54, v55, v56, v57, v58, v51);
  *(a1 + 104) = v10;
  return result;
}

uint64_t sub_239D4A780(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNLocalContrastNormalizationGradient alloc];
  v10 = objc_msgSend_initWithDevice_kernelWidth_kernelHeight_(v5, v6, a2, *(v4 + 56), *(v4 + 64), v7, v8, v9);
  LODWORD(v11) = *(v4 + 72);
  objc_msgSend_setAlpha_(v10, v12, v13, v14, v15, v16, v17, v18, v11);
  LODWORD(v19) = *(v4 + 76);
  objc_msgSend_setBeta_(v10, v20, v21, v22, v23, v24, v25, v26, v19);
  LODWORD(v27) = *(v4 + 80);
  objc_msgSend_setDelta_(v10, v28, v29, v30, v31, v32, v33, v34, v27);
  LODWORD(v35) = *(v4 + 84);
  objc_msgSend_setP0_(v10, v36, v37, v38, v39, v40, v41, v42, v35);
  LODWORD(v43) = *(v4 + 92);
  objc_msgSend_setPs_(v10, v44, v45, v46, v47, v48, v49, v50, v43);
  LODWORD(v51) = *(v4 + 88);
  result = objc_msgSend_setPm_(v10, v52, v53, v54, v55, v56, v57, v58, v51);
  *(a1 + 104) = v10;
  return result;
}

uint64_t sub_239D4AA20(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNCrossChannelNormalization alloc];
  v11 = objc_msgSend_initWithDevice_kernelSize_(v5, v6, a2, *(v4 + 72), v7, v8, v9, v10);
  LODWORD(v12) = *(v4 + 56);
  objc_msgSend_setAlpha_(v11, v13, v14, v15, v16, v17, v18, v19, v12);
  LODWORD(v20) = *(v4 + 60);
  objc_msgSend_setBeta_(v11, v21, v22, v23, v24, v25, v26, v27, v20);
  LODWORD(v28) = *(v4 + 64);
  result = objc_msgSend_setDelta_(v11, v29, v30, v31, v32, v33, v34, v35, v28);
  *(a1 + 104) = v11;
  return result;
}

uint64_t sub_239D4AD70(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNCrossChannelNormalizationGradient alloc];
  result = objc_msgSend_initWithDevice_kernelSize_(v5, v6, a2, *(v4 + 56), v7, v8, v9, v10);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D4B034(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 112);
  v5 = [MPSCNNInstanceNormalization alloc];
  result = objc_msgSend_initWithDevice_dataSource_(v5, v6, a2, *(v4 + 56), v7, v8, v9, v10);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D4B340(uint64_t a1, uint64_t a2)
{
  v4 = [MPSCNNInstanceNormalizationGradient alloc];
  result = objc_msgSend_initWithDevice_(v4, v5, a2, v6, v7, v8, v9, v10);
  *(a1 + 104) = result;
  return result;
}

uint64_t sub_239D4B37C(uint64_t result, char *a2, uint64_t a3, void *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v69[1] = *MEMORY[0x277D85DE8];
  if (*(result + 136))
  {
    v10 = result;
    result = objc_msgSend_count(a4, a2, a3, a4, a5, a6, a7, a8);
    if (result)
    {
      v17 = result;
      v18 = 0;
      while (1)
      {
        v19 = objc_msgSend_objectAtIndexedSubscript_(a4, v11, v18, v12, v13, v14, v15, v16);
        objc_opt_class();
        result = objc_opt_isKindOfClass();
        if (result)
        {
          break;
        }

        if (v17 == ++v18)
        {
          return result;
        }
      }

      if (v19)
      {
        v21 = objc_msgSend_instanceNormalization(v19, v11, v20, v12, v13, v14, v15, v16);
        result = objc_msgSend_dataSource(v21, v22, v23, v24, v25, v26, v27, v28);
        v29 = result;
        if ((*(v10 + 136) & 2) != 0)
        {
          objc_opt_respondsToSelector();
          if ((objc_opt_respondsToSelector() & 1) == 0 && MTLReportFailureTypeEnabled())
          {
            v67 = v29;
            MTLReportFailure();
          }

          v69[0] = v19;
          v35 = objc_msgSend_arrayWithObjects_count_(MEMORY[0x277CBEA60], v30, v69, 1, v31, v32, v33, v34, v67);
          result = objc_msgSend_updateGammaAndBetaWithCommandBuffer_instanceNormalizationStateBatch_(v29, v36, a2, v35, v37, v38, v39, v40);
          if (result)
          {
            result = objc_msgSend_reloadGammaAndBetaWithCommandBuffer_gammaAndBetaState_(v21, v41, a2, result, v42, v43, v44, v45);
          }
        }

        if (*(v10 + 136))
        {
          if ((*(v19 + *MEMORY[0x277CD7470]) & 1) != 0 && MTLReportFailureTypeEnabled())
          {
            v67 = objc_msgSend_debugDescription(v19, v60, v61, v62, v63, v64, v65, v66);
            MTLReportFailure();
          }

          objc_opt_respondsToSelector();
          if ((objc_opt_respondsToSelector() & 1) == 0)
          {
            if (MTLReportFailureTypeEnabled())
            {
              v67 = v29;
              MTLReportFailure();
            }
          }

          objc_msgSend_synchronizeOnCommandBuffer_(v19, v46, a2, v47, v48, v49, v50, v51, v67);
          v52 = v19;
          v53 = v21;
          v68[0] = MEMORY[0x277D85DD0];
          v68[1] = 3221225472;
          v68[2] = sub_239D4B60C;
          v68[3] = &unk_278B2F2A0;
          v68[4] = v29;
          v68[5] = v19;
          v68[6] = v21;
          return objc_msgSend_addCompletedHandler_(a2, v54, v68, v55, v56, v57, v58, v59);
        }
      }
    }
  }

  return result;
}

void sub_239D4B60C(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v24[1] = *MEMORY[0x277D85DE8];
  v9 = *(a1 + 32);
  v24[0] = *(a1 + 40);
  v10 = objc_msgSend_arrayWithObjects_count_(MEMORY[0x277CBEA60], a2, v24, 1, a5, a6, a7, a8);
  if (objc_msgSend_updateGammaAndBetaWithInstanceNormalizationStateBatch_(v9, v11, v10, v12, v13, v14, v15, v16))
  {
    objc_msgSend_reloadGammaAndBetaFromDataSource(*(a1 + 48), v17, v18, v19, v20, v21, v22, v23);
  }
}

uint64_t sub_239D4B6A4(uint64_t result, char *a2, uint64_t a3, void *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  if (*(result + 136))
  {
    v10 = result;
    result = objc_msgSend_count(a4, a2, a3, a4, a5, a6, a7, a8);
    if (result)
    {
      v17 = result;
      v18 = 0;
      for (i = objc_msgSend_objectAtIndexedSubscript_(a4, v11, 0, v12, v13, v14, v15, v16); ; i = objc_msgSend_objectAtIndexedSubscript_(a4, v26, v18, v27, v28, v29, v30, v31))
      {
        objc_msgSend_objectAtIndexedSubscript_(i, v20, 0, v21, v22, v23, v24, v25);
        objc_opt_class();
        result = objc_opt_isKindOfClass();
        if (result)
        {
          v32 = objc_msgSend_objectAtIndexedSubscript_(a4, v26, v18, v27, v28, v29, v30, v31);
          result = objc_msgSend_count(v32, v33, v34, v35, v36, v37, v38, v39);
          if (result)
          {
            break;
          }
        }

        if (v17 == ++v18)
        {
          return result;
        }
      }

      result = objc_msgSend_objectAtIndexedSubscript_(a4, v26, v18, v27, v28, v29, v30, v31);
      if (result)
      {
        v46 = result;
        v47 = objc_msgSend_objectAtIndexedSubscript_(result, v40, 0, v41, v42, v43, v44, v45);
        v55 = objc_msgSend_instanceNormalization(v47, v48, v49, v50, v51, v52, v53, v54);
        result = objc_msgSend_dataSource(v55, v56, v57, v58, v59, v60, v61, v62);
        v69 = result;
        if ((*(v10 + 136) & 2) != 0)
        {
          objc_opt_respondsToSelector();
          if ((objc_opt_respondsToSelector() & 1) == 0 && MTLReportFailureTypeEnabled())
          {
            v99 = v69;
            MTLReportFailure();
          }

          result = objc_msgSend_updateGammaAndBetaWithCommandBuffer_instanceNormalizationStateBatch_(v69, v70, a2, v46, v71, v72, v73, v74, v99);
          if (result)
          {
            v76 = result;
            result = objc_msgSend_gamma(result, v63, v75, v64, v65, v66, v67, v68);
            if (result)
            {
              result = objc_msgSend_beta(v76, v63, v77, v64, v65, v66, v67, v68);
              if (result)
              {
                result = objc_msgSend_reloadGammaAndBetaWithCommandBuffer_gammaAndBetaState_(v55, v63, a2, v76, v65, v66, v67, v68);
              }
            }
          }
        }

        if (*(v10 + 136))
        {
          objc_msgSend_objectAtIndexedSubscript_(v46, v63, 0, v64, v65, v66, v67, v68);
          if ((*(objc_msgSend_objectAtIndexedSubscript_(v46, v78, 0, v79, v80, v81, v82, v83) + *MEMORY[0x277CD7470]) & 1) != 0 && MTLReportFailureTypeEnabled())
          {
            objc_msgSend_debugDescription(v46, v92, v93, v94, v95, v96, v97, v98);
            MTLReportFailure();
          }

          objc_opt_respondsToSelector();
          if ((objc_opt_respondsToSelector() & 1) == 0)
          {
            if (MTLReportFailureTypeEnabled())
            {
              MTLReportFailure();
            }
          }

          MPSStateBatchSynchronize(v46, a2);
          v84 = v46;
          v85 = v55;
          v100[0] = MEMORY[0x277D85DD0];
          v100[1] = 3221225472;
          v100[2] = sub_239D4B954;
          v100[3] = &unk_278B2F2A0;
          v100[4] = v69;
          v100[5] = v46;
          v100[6] = v55;
          return objc_msgSend_addCompletedHandler_(a2, v86, v100, v87, v88, v89, v90, v91);
        }
      }
    }
  }

  return result;
}