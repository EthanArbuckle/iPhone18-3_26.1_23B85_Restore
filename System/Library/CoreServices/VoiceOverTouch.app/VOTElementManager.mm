@interface VOTElementManager
+ (void)_exitThread:(id)thread;
+ (void)initialize;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserAllSelection:(id)selection inString:(id)string rightward:(BOOL)rightward;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserCharacterSelection:(id)selection inString:(id)string rightward:(BOOL)rightward;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserLineSelectionInElement:(id)element currentRange:(id)range rightward:(BOOL)rightward;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserPageSelection:(id)selection inString:(id)string rightward:(BOOL)rightward;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserWordSelectionInElement:(id)element currentRange:(id)range rightward:(BOOL)rightward;
- ($7159EBE1BBBCDCA1B95AF1FC27B9DE98)_appInfoForCurrentElement;
- (BOOL)_addApplicationLabelsAndSummariesToRequest:(id)request applicationNames:(id *)names summaryElements:(id *)elements;
- (BOOL)_addElementCommunityNameIfNeededToRequest:(id)request oldElementCommunity:(id)community newElementCommunity:(id)elementCommunity element:(id)element;
- (BOOL)_bookContentElementInteraction:(CGPoint)interaction element:(id)element;
- (BOOL)_bundleIdentifierIsHostedByPineBoard:(id)board;
- (BOOL)_canActivateTapticTime;
- (BOOL)_chartElementDidChangeForElement:(id)element oldElement:(id)oldElement;
- (BOOL)_continueTrackingKeyboardKey:(id)key;
- (BOOL)_continueTrackingRoadElementWithPoint:(CGPoint)point;
- (BOOL)_currentElementIsTrappedInAuthentication;
- (BOOL)_didFocusUpdateOriginateFromFocusedApp:(id)app;
- (BOOL)_echoLineInElement:(id)element forEvent:(id)event forDifferentElement:(BOOL)differentElement;
- (BOOL)_elementMonitoringOutputElement:(id)element userMonitored:(BOOL)monitored;
- (BOOL)_finishHandlingMoveToElementNotification:(id)notification shouldSyncNativeFocusElement:(id)element shouldEchoSameTouchContainer:(id)container shouldScrollToElement:(id)toElement shouldPlayTrackingSound:(id)sound shouldRefocusIfSameElement:(id)sameElement;
- (BOOL)_handleBookNavigateOverPageBoundary:(int64_t)boundary unit:(int64_t)unit;
- (BOOL)_handleMoreBookContentElements;
- (BOOL)_handleMoveIn:(id)in;
- (BOOL)_handleMoveOut:(id)out;
- (BOOL)_handleMovementForElementFollowingElement:(id)element direction:(int64_t)direction unit:(int64_t)unit mode:(int64_t)mode;
- (BOOL)_handleNextAutofill:(id)autofill reverse:(BOOL)reverse;
- (BOOL)_handleSimulatedLongPress:(id)press;
- (BOOL)_hasApplicationMatchingBlock:(id)block inApplications:(id)applications;
- (BOOL)_hasCurrentApplicationMatchingBlock:(id)block;
- (BOOL)_ignoreTextEditingNotificationsForPickerElementUsage;
- (BOOL)_isDictationInProgressForCurrentApp;
- (BOOL)_isElementValidForFirstResponder:(id)responder;
- (BOOL)_isKeyboardLineMovement;
- (BOOL)_isPoint:(CGPoint)point withinRangeForDividerElement:(id)element;
- (BOOL)_isShowingTodayViewForPhone;
- (BOOL)_isTouchTypingEventTooCloseToEdge:(id)edge;
- (BOOL)_isWebAppStillOpen;
- (BOOL)_languageRotorItemsContainLanguage:(id)language;
- (BOOL)_moveElementToFlowTo:(id)to;
- (BOOL)_moveToWebItemDuringLoadIfNecessary;
- (BOOL)_needsPhoneticBrailleForLanauge:(id)lanauge;
- (BOOL)_notificationData:(id)data containsToken:(id)token;
- (BOOL)_prepareElementOutputHeaders:(id)headers currentElement:(id)element request:(id)request;
- (BOOL)_prepareStitchedWebReadAll:(id)all request:(id)request setCurrentElement:(BOOL *)element;
- (BOOL)_processWatchSpecificOverrides:(id)overrides;
- (BOOL)_reDispatchUpdateAppFromTimerIfBundlesAreNotReady;
- (BOOL)_savedDescriptionToPhoto:(id)photo description:(id)description element:(id)element;
- (BOOL)_sendTVRemoteCommandOverrideForAXCommand:(int64_t)command;
- (BOOL)_setCurrentElement:(id)element isProtectedApp:(BOOL)app shouldResetTextSelection:(BOOL)selection shouldResetCharacterRange:(BOOL)range ignoreIsAccessibilityElementCheck:(BOOL)check shouldSetBrailleElement:(BOOL)brailleElement;
- (BOOL)_setCurrentElement:(id)element shouldSetBrailleElement:(id)brailleElement;
- (BOOL)_shouldAllowSpeakThisGesture;
- (BOOL)_shouldAnnounceCustomRotorHintForElement:(id)element;
- (BOOL)_shouldDismissKeyboardForMovingTooFarAlongYAxisWithEvent:(id)event;
- (BOOL)_shouldIgnoreNotificationForContinuityDisplay:(id)display withElement:(__AXUIElement *)element;
- (BOOL)_shouldIncludeContainerInDescriptionForCurrentElement:(id)element previousElement:(id)previousElement;
- (BOOL)_shouldMoveToLastWebFormControl;
- (BOOL)_shouldNotSpeakForIncomingCall;
- (BOOL)_shouldSuppressWebPageLoadedBehaviorForNotification:(id)notification;
- (BOOL)_shouldSwitchToFirstResponder:(id)responder;
- (BOOL)_touchContainerDidChangeForElement:(id)element oldElement:(id)oldElement;
- (BOOL)_updateCursorAfterPressForElement:(id)element currentElementRange:(_NSRange)range request:(id)request didHaveCursor:(BOOL)cursor doesHaveCursor:(BOOL)haveCursor;
- (BOOL)_updateWithMostRecentElementCommunity:(id)community;
- (BOOL)_useLineFrameBoundsForTouch:(id)touch;
- (BOOL)allowsSystemControlEventForPosition:(int)position;
- (BOOL)determineFullImageDescriptionsEnabled:(id)enabled;
- (BOOL)determineSceneDetectionsEnabled:(id)enabled;
- (BOOL)elementEligibleToFindTitleElement:(id)element;
- (BOOL)eventIsSystemEvent:(id)event;
- (BOOL)exploreFocusAffectsNativeFocus;
- (BOOL)forceRotorOffGesturedTextInputIfNeeded:(BOOL)needed;
- (BOOL)handleTVMenuButtonClicked;
- (BOOL)inDirectTouchMode;
- (BOOL)isTutorialActive;
- (BOOL)isValidElementForImageExploration;
- (BOOL)mlElement:(id)element sharesLabel:(id)label;
- (BOOL)shouldElement:(id)element beCombined:(id)combined combineLinks:(BOOL)links;
- (BOOL)shouldSilenceAnnouncements;
- (BOOL)shouldSnarfCrown;
- (BOOL)shouldTutorialIgnoreCommand:(id)command;
- (BOOL)speakNonfocusableElementsAfterDelay;
- (BOOL)speakTableHeadersForElement:(id)element;
- (BOOL)speakTableRowAndColumnForElement:(id)element;
- (BOOL)stringIsTextAttachment:(id)attachment;
- (CGPoint)indefiniteLongPressPoint;
- (CGRect)currentLineFrame;
- (VOTElementManager)init;
- (VOTElementUpdateProtocol)updateDelegate;
- (_NSRange)_characterRangeWithFaultTolerance:(int64_t)tolerance forward:(BOOL)forward element:(id)element;
- (_NSRange)_elementSelectionRange;
- (_NSRange)_highlightedCharacterRange;
- (_NSRange)_lineRangeWithFaultTolerance:(int64_t)tolerance forward:(BOOL)forward element:(id)element;
- (_NSRange)_outputRangeForCharacterSegment:(id)segment direction:(int64_t)direction;
- (_NSRange)_rangeOfLine:(id)line inBookContent:(id)content;
- (_NSRange)outputRangeForTextSegmentUnit:(int64_t)unit direction:(int64_t)direction string:(id)string element:(id)element;
- (__AXUIElement)_firstResponderAXUIElementRefFromCurrentApplications;
- (double)_alternativeKeyActivateTime;
- (double)_brailleMaxOrigin;
- (double)_realTimeAdjustableUpdateFrequency:(id)frequency;
- (double)keyboardKeyPenumbra:(id)penumbra;
- (double)rotorRate;
- (id)__consumeAppTransitionForAnnouncingIfNeeded:(id)needed;
- (id)__targetElementForFocusElement:(id)element mustBeAccessibilityElement:(BOOL)accessibilityElement;
- (id)_activeSceneIdentifier;
- (id)_additionalElementCommunities;
- (id)_allElementCommunitiesWithFocusedApplications:(id)applications;
- (id)_applicationMatchingBlock:(id)block inApplications:(id)applications;
- (id)_audioDuckingModeString;
- (id)_brailleAutoAdvanceSpeedString;
- (id)_buildWebRefocusHashFromURL:(id)l activeTabDocumentIdentifier:(id)identifier;
- (id)_cachedLaunchIcon:(id)icon;
- (id)_checkDataDetectorIfPresent:(CGRect)present element:(id)element includeLinks:(BOOL)links;
- (id)_computeChangedFontAttributes:(id)attributes storedAttributes:(id)storedAttributes haveMisspellCheck:(BOOL)check;
- (id)_convertTextMarkerArrayToString:(id)string addInContentExtras:(BOOL)extras;
- (id)_copyMatchBlockAnyElement;
- (id)_copyMatchBlockArticleStart;
- (id)_copyMatchBlockButton;
- (id)_copyMatchBlockCheckbox;
- (id)_copyMatchBlockDifferent;
- (id)_copyMatchBlockForHeadingLevel:(int64_t)level searchType:(int64_t *)type;
- (id)_copyMatchBlockForRotorType:(int64_t)type searchType:(int64_t *)searchType;
- (id)_copyMatchBlockForTextAttribute:(int64_t)attribute searchType:(int64_t *)type;
- (id)_copyMatchBlockFormElement;
- (id)_copyMatchBlockFrameStart;
- (id)_copyMatchBlockHeader;
- (id)_copyMatchBlockImage;
- (id)_copyMatchBlockInternalLink;
- (id)_copyMatchBlockLandmarkStart;
- (id)_copyMatchBlockLink;
- (id)_copyMatchBlockListStart;
- (id)_copyMatchBlockNonVisitedLink;
- (id)_copyMatchBlockRadioGroup;
- (id)_copyMatchBlockSameBlockquote;
- (id)_copyMatchBlockSameHeading;
- (id)_copyMatchBlockSearchField;
- (id)_copyMatchBlockSearchText;
- (id)_copyMatchBlockSimilar;
- (id)_copyMatchBlockStaticText;
- (id)_copyMatchBlockTableStart;
- (id)_copyMatchBlockTextField;
- (id)_copyMatchBlockVisitedLink;
- (id)_copyRangeMatchBlockForRotorType:(int64_t)type;
- (id)_copySideAppDividerElementIfApplicableForPoint:(CGPoint)point;
- (id)_currentCachedCustomActionCategories;
- (id)_currentCustomActionCategory;
- (id)_currentCustomActions;
- (id)_currentElementAtCenterPointOfElement:(id)element;
- (id)_currentMedusaApplications;
- (id)_currentResponder;
- (id)_currentRotorSelection;
- (id)_currentTextLineInBookElement:(BOOL)element;
- (id)_currentlyFocusedSafariTabIdentifier:(id)identifier;
- (id)_customActionDefaultActionString;
- (id)_customActionsAddingDragCancelActionIfNecessaryForActions:(id)actions;
- (id)_dockElementForDisplay;
- (id)_echoDifferentTouchContainer:(id)container forEvent:(id)event;
- (id)_elementCommunityForElement:(id)element;
- (id)_elementToFocusWhenSwitchingToElementCommunity:(id)community;
- (id)_findPreviousWebElement:(id)element;
- (id)_firstElementForFocusFromElementCommunities:(id)communities currentElement:(id)element;
- (id)_firstElementWithCurrentElement:(id)element focusedApplications:(id)applications;
- (id)_firstResponderForApplications:(id)applications;
- (id)_firstResponderFromCurrentApplications;
- (id)_firstResponderFromCurrentElement;
- (id)_focusElementForFocusUpdate:(id)update;
- (id)_fontDisplayNameForFontName:(id)name;
- (id)_frontmostItemContainerElement;
- (id)_getAutoSpeakWatchFaceElements:(id)elements;
- (id)_getNewElementExplorer;
- (id)_getNextFocusedElementInElementCommunityPrevious:(BOOL)previous shouldUseCache:(BOOL)cache shouldWrapAround:(BOOL)around;
- (id)_getSpeakableContainerForContainer:(id)container;
- (id)_handleEditingStyleResolutionForAnnouncement:(id)announcement;
- (id)_handleProtectedAppLogicForEvent:(id)event element:(id)element point:(CGPoint)point;
- (id)_imageExplorerCachedResults;
- (id)_listItemLabelForAXAttributedString:(id)string;
- (id)_localizedStringForCurrentBrailleTextMode;
- (id)_localizedTypingModeStringForCurrentMode;
- (id)_monitoredElementCachedText:(id)text;
- (id)_navigationDirectionModeString:(int64_t)string;
- (id)_nearestElementWithMatch:(id)match startElement:(id)element;
- (id)_nearestElementWithMatch:(id)match startElement:(id)element forward:(BOOL)forward itemCheckCount:(int64_t)count;
- (id)_notificationData:(id)data consumingToken:(id)token;
- (id)_occludedMultitaskingApps;
- (id)_orderedMonitoredFontAttributes;
- (id)_phoneticStringForLetter:(id)letter language:(id)language;
- (id)_retrieveCachedFocusedElementForElementCommunity:(id)community;
- (id)_retrieveCurrentCharacterFromEditableElement;
- (id)_retrieveDefaultElementForPosition:(CGPoint)position;
- (id)_sideAppDividerElement;
- (id)_similarMonitoredElement:(id)element;
- (id)_sonarElementFromPoint:(CGPoint)point inForwardDirection:(BOOL)direction limit:(int64_t)limit;
- (id)_speechPhoneticsString;
- (id)_textAttachmentElementForString:(id)string inRange:(_NSRange)range;
- (id)_treePositionForMathSegment:(id)segment;
- (id)_typingEchoString;
- (id)_updateTouchContainerForElement:(id)element playSound:(BOOL)sound;
- (id)_valueForKeyPathOnElementManagerThread:(id)thread;
- (id)_verifiedElementWithElement:(id)element;
- (id)_verifiedElementWithElement:(id)element atPoint:(CGPoint)point;
- (id)_votElementFromWebElementHierarchyIndexPath:(id)path webArea:(id)area;
- (id)availableAudiographActionsForElement:(id)element;
- (id)currentApplications;
- (id)currentElement;
- (id)determineActivityForElement:(id)element;
- (id)focusedApplication:(id)application;
- (id)webCustomRotorDictionary:(id)dictionary direction:(int64_t)direction forElement:(id)element;
- (id)webEditableAncestor:(id)ancestor;
- (int64_t)_adjustedRotorIndex:(int64_t)index inDirection:(int64_t)direction rotorItems:(id)items validationBlock:(id)block;
- (int64_t)_newNavigationDirectionModeForRotorDirection:(int64_t)direction;
- (int64_t)modifierKeyChoiceForElement:(id)element;
- (int64_t)typingFeedbackForKeyboardType;
- (unint64_t)_currentMathGranularityLevel;
- (unint64_t)filterTraitsByPriority:(unint64_t)priority;
- (void)__handleExpandedStatusChanged;
- (void)__handleTVMenuButtonClicked;
- (void)__handleTVSelectButtonClicked;
- (void)__handleUpdateVisualsTimer;
- (void)__interruptSpeachAndPlayBorderHitSound;
- (void)__retrieveValueForKeyPath:(id)path intoPointedToLocation:(id)location semaphore:(id)semaphore;
- (void)__sendHIDEvents:(id)events postEventDelays:(id)delays;
- (void)__sendOutputRequest:(id)request;
- (void)__sendTVRemoteCommand:(unint64_t)command;
- (void)__tvOS_handleUpdatePreferredTVInteractionModeTimer;
- (void)__tvOS_handleValueChangedWithType:(id)type oldValue:(id)value newValue:(id)newValue insertedTextOrNil:(id)nil isSecureText:(BOOL)text;
- (void)__tvOS_toggleAudioDescriptions;
- (void)__tvOS_toggleExploreFocusAffectsNativeFocusPreference;
- (void)__tvOS_toggleSilenceAnnouncementsUserPreference;
- (void)__tvOS_toggleSpeakNonfocusableElementsAfterDelayUserPreference;
- (void)__updateElementVisuals;
- (void)_activateAlternativeKeyboardKey:(id)key;
- (void)_activateBrailleScreenInputIfNeededForElement:(id)element;
- (void)_addCopiedSpeechString:(id)string;
- (void)_addDescription:(id)description toRequest:(id)request withOptions:(unint64_t)options;
- (void)_addDescription:(id)description toRequest:(id)request withOptions:(unint64_t)options lastSeenContextDescriptors:(id)descriptors;
- (void)_addFormattedStringToRequest:(id)request formattedString:(id)string withElement:(id)element;
- (void)_appSuspensionSoundTimer;
- (void)_appendCurrentRotorValue:(id)value forRotor:(id)rotor;
- (void)_cacheFocusedElement:(id)element forElementCommunity:(id)community;
- (void)_cachePreviousWebElement:(id)element;
- (void)_cancelIndefiniteLongPress;
- (void)_captionsDisplayedWithTextRuns:(id)runs;
- (void)_cleanupMapInteractionOnIdle;
- (void)_cleanupStateForUnitTesting;
- (void)_clearWebLoadedSound;
- (void)_closeItemChooser;
- (void)_continueReadAllWithElement:(id)element setCurrentElement:(BOOL *)currentElement;
- (void)_continuousPathIdleTimer:(id)timer;
- (void)_customPublicRotorMatchForType:(id)type range:(_NSRange *)range element:(id *)element direction:(int64_t)direction lastSearchUUID:(id *)d;
- (void)_deactivateGesturedTextInputIfNeeded:(id)needed;
- (void)_disableQuickNavStateTemporarily;
- (void)_dismissAlternativeKeyboardKeys;
- (void)_dragStarted;
- (void)_dragTerminated;
- (void)_echoDifferentElement:(id)element forEvent:(id)event onlyOutputTouchContainerAndSounds:(BOOL)sounds canSetAsCurrentElement:(BOOL)currentElement shouldPlayGuideWireSound:(BOOL)sound isProtectedApp:(BOOL)app includeHint:(BOOL)hint boundaryHit:(BOOL)self0;
- (void)_echoFlickNavigationElement:(id)element;
- (void)_echoLineInBookElement:(id)element forEvent:(id)event;
- (void)_echoNoElementForEvent:(id)event;
- (void)_echoSameElement:(id)element forEvent:(id)event;
- (void)_echoSearchNavigationElement:(id)element forRangeAdjustment:(BOOL)adjustment;
- (void)_echoSearchTypeNotFound:(int64_t)found;
- (void)_echoStatusBarStatus:(id)status;
- (void)_elementFetchFoundDirectTouchElements:(id)elements;
- (void)_elementFetchFoundElement:(id)element;
- (void)_elementSelectionRangeDidChange:(_NSRange)change reason:(int64_t)reason;
- (void)_elementUpdatesFrequently;
- (void)_elementsRetrieved:(id)retrieved finished:(id)finished;
- (void)_endNativeSliding:(BOOL)sliding;
- (void)_endTextSearchMode;
- (void)_fetchElementsFrom:(id)from inDirection:(id)direction count:(id)count scroll:(id)scroll block:(id)block;
- (void)_finishHandlingLineMovementInWeb:(id)web direction:(id)direction withCurrentElement:(id)element markerArray:(id)array textObjects:(id)objects existingRequest:(id)request;
- (void)_finishHandlingNextAutofillWithElement:(id)element;
- (void)_finishPassthroughMode;
- (void)_forceVisionRefresh;
- (void)_handleActivateBrailleScreenInput:(id)input;
- (void)_handleActivateBrailleScreenInputCommand:(id)command;
- (void)_handleActivateBrailleScreenInputPreferringSingleHand:(id)hand;
- (void)_handleActivateBrailleUI:(id)i;
- (void)_handleActivateHomeButton:(id)button;
- (void)_handleActivityRotorChange:(BOOL)change;
- (void)_handleAdjustTextSelectionSegmentType:(id)type;
- (void)_handleAdjustValue:(id)value reverse:(BOOL)reverse;
- (void)_handleAlertReceived:(id)received forApplication:(__AXUIElement *)application;
- (void)_handleAnnounceQuickNav:(id)nav;
- (void)_handleAnnouncementNotification:(id)notification;
- (void)_handleAnnouncementWithData:(id)data pid:(int)pid;
- (void)_handleAppSuspendAnimationProgressNotification:(id)notification;
- (void)_handleAppSwitch:(id)switch;
- (void)_handleAudioDestination:(BOOL)destination;
- (void)_handleAudioDuckingAmountChange:(BOOL)change;
- (void)_handleAudioDuckingChange:(BOOL)change;
- (void)_handleAudioDuckingModeChange:(BOOL)change;
- (void)_handleAudiographAction:(int64_t)action event:(id)event;
- (void)_handleAudiographPlaybackStateNotification:(id)notification;
- (void)_handleAudiographSelectedSeriesChangedNotification:(id)notification;
- (void)_handleAutoCorrectionDisplayNotification:(id)notification;
- (void)_handleAutoCorrectionMadeNotification:(id)notification;
- (void)_handleAutomationGeneratedChordChangeEvent:(id)event;
- (void)_handleAutomationGeneratedTouchCancelEvent:(id)event;
- (void)_handleAutomationGeneratedTouchDownEvent:(id)event;
- (void)_handleAutomationGeneratedTouchMoveEvent:(id)event;
- (void)_handleAutomationGeneratedTouchUpEvent:(id)event;
- (void)_handleBSINextRotor:(id)rotor;
- (void)_handleBSIPreviousRotor:(id)rotor;
- (void)_handleBarcodeVisibilityNotification:(id)notification;
- (void)_handleBookContentMovement:(id)movement direction:(int64_t)direction unit:(int64_t)unit generateOutput:(BOOL)output;
- (void)_handleBookPageFlipAndContinue;
- (void)_handleBottomEdgePanDown:(id)down;
- (void)_handleBottomEdgePanExtraLong:(id)long;
- (void)_handleBottomEdgePanLong:(id)long;
- (void)_handleBottomEdgePanShort:(id)short;
- (void)_handleBrailleDecreaseAutoAdvanceSpeed:(id)speed;
- (void)_handleBrailleEnableAutoAdvance:(id)advance;
- (void)_handleBrailleEvent:(id)event;
- (void)_handleBrailleIncreaseAutoAdvanceSpeed:(id)speed;
- (void)_handleBrailleRefreshEvent:(id)event;
- (void)_handleBrailleWordWrapToggleEvent:(id)event;
- (void)_handleCameraCenteredNotification:(id)notification;
- (void)_handleCancelSpeaking:(id)speaking;
- (void)_handleCaptionsDisplayedNotification:(id)notification;
- (void)_handleCharacterMovement:(id)movement;
- (void)_handleClearCopiedSpeech;
- (void)_handleColumnMovement:(id)movement;
- (void)_handleContainerMovement:(id)movement;
- (void)_handleContainerMovement:(id)movement direction:(int64_t)direction;
- (void)_handleContextMenuStatusNotification:(id)notification;
- (void)_handleContinueSpeaking:(id)speaking;
- (void)_handleCopiedSpeechRotorMovement:(int64_t)movement;
- (void)_handleCopySpeechToClipboard:(id)clipboard;
- (void)_handleCurrentContentReadingLineUpdated:(id)updated;
- (void)_handleCurrentStateChanged:(id)changed;
- (void)_handleCursorMovementByTextSegment:(id)segment;
- (void)_handleCustomRotorAction:(id)action direction:(int64_t)direction;
- (void)_handleCustomRotorContent:(id)content direction:(int64_t)direction;
- (void)_handleDeactivateBrailleScreenInput:(id)input;
- (void)_handleDecreaseSystemVolume:(id)volume;
- (void)_handleDecreaseVolume:(id)volume;
- (void)_handleDescribeCameraScene:(id)scene;
- (void)_handleDescribeImage:(id)image;
- (void)_handleDescribedMediaMode:(id)mode direction:(int64_t)direction;
- (void)_handleDetectionModeMovement:(id)movement direction:(int64_t)direction;
- (void)_handleDidReceiveVisionEngineResult:(id)result;
- (void)_handleDirectElementSearch:(id)search;
- (void)_handleDirectTouchExplorationMode:(id)mode direction:(int64_t)direction;
- (void)_handleDoubleTap:(id)tap;
- (void)_handleDuckingDisabling:(id)disabling;
- (void)_handleEdgeSwipeBottom:(id)bottom;
- (void)_handleEdgeSwipeTop:(id)top;
- (void)_handleElementChangedNotification:(id)notification;
- (void)_handleElementInteraction:(id)interaction;
- (void)_handleElementMoveToStatusBar:(id)bar;
- (void)_handleElementMoved:(__AXUIElement *)moved;
- (void)_handleElementMovement:(id)movement;
- (void)_handleElementSearch:(id)search rotorType:(int64_t)type direction:(int64_t)direction;
- (void)_handleEscape:(id)escape;
- (void)_handleEvent:(id)event;
- (void)_handleFireStewie;
- (void)_handleFirstResponderChangedNotification:(id)notification;
- (void)_handleFlashlightNotification;
- (void)_handleFocusedElementContentChangeNotification:(id)notification;
- (void)_handleGenericTextSegmentMovement:(id)movement direction:(int64_t)direction granulary:(int64_t)granulary;
- (void)_handleGuideElementMovement:(id)movement direction:(int64_t)direction;
- (void)_handleHideDetectionUIWithMagnifierService:(id)service;
- (void)_handleHintsSettingMode:(id)mode direction:(int64_t)direction;
- (void)_handleHomeButtonPress;
- (void)_handleIdle:(id)idle;
- (void)_handleImageDescriptionsToggle:(int64_t)toggle;
- (void)_handleIncreaseSystemVolume:(id)volume;
- (void)_handleIncreaseVolume:(id)volume;
- (void)_handleIntraContainerMovement:(id)movement;
- (void)_handleInvalidStatusChanged:(id)changed;
- (void)_handleInvalidTextInputNotification:(id)notification;
- (void)_handleItemChooserSelection:(id)selection;
- (void)_handleItemChooserSelectionMade:(id)made;
- (void)_handleKBPopupVariantsNotification:(id)notification;
- (void)_handleKeyboardChangedNotification;
- (void)_handleKeyboardCommandEvent:(id)event;
- (void)_handleKeyboardContinuousPathDidBegin:(id)begin;
- (void)_handleKeyboardKeySelectedNotification:(id)notification;
- (void)_handleLabelElement:(id)element;
- (void)_handleLabelElementAcceptedNotification:(id)notification;
- (void)_handleLaunchDetectionMode:(id)mode;
- (void)_handleLayoutChange:(BOOL)change;
- (void)_handleLetterMovement:(id)movement direction:(int64_t)direction;
- (void)_handleLineMovement:(id)movement;
- (void)_handleLineMovementInWeb:(id)web direction:(int64_t)direction existingRequest:(id)request;
- (void)_handleLiveContinuousToneBeginNotification:(id)notification;
- (void)_handleLiveContinuousToneEndNotification:(id)notification;
- (void)_handleLiveContinuousToneUpdateNotification:(id)notification;
- (void)_handleMLElementModeWithDirection:(int64_t)direction verboseOutput:(BOOL)output;
- (void)_handleMapSameElement:(id)element forEvent:(id)event;
- (void)_handleMathGranularMovement:(int64_t)movement event:(id)event;
- (void)_handleMisspelledWordRotorAction:(BOOL)action;
- (void)_handleMonitorElement:(id)element;
- (void)_handleMoveToElementNotification:(id)notification;
- (void)_handleMoveToLinkedUI:(id)i;
- (void)_handleMoveToNativeFocusedElement:(id)element;
- (void)_handleNativeFocusItemChangedNotification:(id)notification;
- (void)_handleNavigationDirectionChangeWithDirection:(int64_t)direction;
- (void)_handleNavigationStyleMovement:(id)movement direction:(int64_t)direction;
- (void)_handleNextTextOperationInDirection:(int64_t)direction withEvent:(id)event;
- (void)_handleNonEditableValueChange:(id)change;
- (void)_handleOngoingTextSearch:(id)search;
- (void)_handleOpenVoiceOverOptions:(id)options;
- (void)_handleOutputCellRowColumnInfo:(id)info;
- (void)_handleOutputCharacter:(id)character;
- (void)_handleOutputCharacterPhonetically:(id)phonetically;
- (void)_handleOutputColumnOrRowContents:(id)contents row:(BOOL)row;
- (void)_handleOutputColumnOrRowHeader:(id)header row:(BOOL)row;
- (void)_handleOutputComputerVisionAnalysisSummary:(id)summary explicitUserRequest:(BOOL)request;
- (void)_handleOutputElementSummary:(id)summary;
- (void)_handleOutputFocusedElementSummary:(id)summary;
- (void)_handleOutputLineCount:(id)count;
- (void)_handleOutputTableRowColumnInfo:(id)info;
- (void)_handleOutputTextStyle:(id)style;
- (void)_handleParagraphMovement:(id)movement;
- (void)_handlePasteCopiedSpeech;
- (void)_handlePauseSpeaking:(id)speaking;
- (void)_handlePauseSpeechAndHapticsNotification:(id)notification;
- (void)_handlePerformAudiographAction:(id)action;
- (void)_handlePerformCustomAction:(id)action;
- (void)_handlePerformPressAction:(id)action;
- (void)_handlePerformTapAutofill:(id)autofill;
- (void)_handlePerformTextOperation:(id)operation;
- (void)_handlePlayPauseButtonPress;
- (void)_handlePressActionResultAtTime:(id)time;
- (void)_handlePublicCustomRotorMovement:(id)movement direction:(int64_t)direction;
- (void)_handleQuickNavFeedback:(BOOL)feedback;
- (void)_handleReadAll:(id)all;
- (void)_handleReadAllBookContent:(id)content fromTop:(BOOL)top;
- (void)_handleReadAllNextElement;
- (void)_handleReadFromTop:(id)top;
- (void)_handleReadItemHint:(id)hint;
- (void)_handleReadLine:(id)line;
- (void)_handleReadScreenSummary:(id)summary;
- (void)_handleReadURL:(id)l;
- (void)_handleReadWord:(id)word;
- (void)_handleRealtimeElementMovement:(id)movement;
- (void)_handleRealtimeElementUpdate:(id)update;
- (void)_handleReconnectBrailleDisplays:(id)displays;
- (void)_handleRequestExclusiveAudioHardware;
- (void)_handleRotateOrientation:(id)orientation;
- (void)_handleRotor2DBrailleDisplayMode:(int64_t)mode withEvent:(id)event;
- (void)_handleRotor2DBrailleEdgeIntensity:(int64_t)intensity withEvent:(id)event;
- (void)_handleRotor2DBrailleInvert:(int64_t)invert withEvent:(id)event;
- (void)_handleRotor2DBraillePanHorizontal:(int64_t)horizontal withEvent:(id)event;
- (void)_handleRotor2DBraillePanVertical:(int64_t)vertical withEvent:(id)event;
- (void)_handleRotor2DBrailleZoom:(int64_t)zoom withEvent:(id)event;
- (void)_handleRotorBrailleAutoAdvanceMovement:(int64_t)movement withEvent:(id)event;
- (void)_handleRotorBrailleInputLanguageMovement:(int64_t)movement withEvent:(id)event;
- (void)_handleRotorBrailleLanguageMovement:(int64_t)movement withEvent:(id)event;
- (void)_handleRotorContinusPathChange:(int64_t)change withEvent:(id)event;
- (void)_handleRotorTextSelectionMovement:(id)movement direction:(int64_t)direction;
- (void)_handleRotorTypingModeMovement:(int64_t)movement withEvent:(id)event;
- (void)_handleRotorVoiceMovement:(int64_t)movement withEvent:(id)event;
- (void)_handleRowMovement:(id)movement direction:(int64_t)direction;
- (void)_handleScreenChange:(id)change sound:(id)sound;
- (void)_handleScreenLock:(id)lock;
- (void)_handleScreenOff;
- (void)_handleScreenOn;
- (void)_handleScreenWillChangeNotification:(id)notification;
- (void)_handleScreenWillWakeNotification:(id)notification;
- (void)_handleScribbleMovement:(BOOL)movement;
- (void)_handleScrollByPage:(id)page;
- (void)_handleScrollByPageNotification:(id)notification;
- (void)_handleScrollDownPage:(id)page;
- (void)_handleScrollToBottom:(id)bottom;
- (void)_handleScrollToPoint:(id)point;
- (void)_handleScrollToTop:(id)top;
- (void)_handleSearchRotorDirection:(int64_t)direction event:(id)event;
- (void)_handleSearchRotorDirection:(int64_t)direction event:(id)event notifyUser:(BOOL)user;
- (void)_handleSearchRotorEcho:(id)echo;
- (void)_handleSearchRotorMovement:(BOOL)movement event:(id)event;
- (void)_handleSearchRotorMovementWithoutRotorUpdateInDirectionUp:(BOOL)up event:(id)event;
- (void)_handleSearchRotorSetMathPosition:(id)position;
- (void)_handleSearchTextEvent:(id)event;
- (void)_handleSelectedTextOutput:(id)output;
- (void)_handleSelectionChangedNotification:(id)notification;
- (void)_handleSendCancelEvent:(id)event;
- (void)_handleSentenceMovement:(id)movement;
- (void)_handleShowDetectionUIWithMagnifierService:(id)service;
- (void)_handleShowEditingHUD:(id)d;
- (void)_handleSimpleTap:(id)tap;
- (void)_handleSimulatedForceTouchEvent:(id)event;
- (void)_handleSingleLetterSearch:(id)search;
- (void)_handleSiriFinishedTalking:(id)talking;
- (void)_handleSiriShortcutEvent:(id)event;
- (void)_handleSiriStartedListening:(id)listening;
- (void)_handleSortDirectionChanged:(id)changed;
- (void)_handleSoundRotorChange:(BOOL)change;
- (void)_handleSpeakScreen:(id)screen;
- (void)_handleSpeechPhoneticsChange:(BOOL)change;
- (void)_handleSpeechPunctuationChange:(BOOL)change;
- (void)_handleSpeechRateChange:(BOOL)change;
- (void)_handleSpeechRotorChange:(id)change;
- (void)_handleSpeechRotorValueChange:(id)change;
- (void)_handleSpeechVoiceChange:(id)change;
- (void)_handleStartHelpMode:(id)mode;
- (void)_handleStartSiri:(id)siri;
- (void)_handleStartStopTextSelection:(id)selection;
- (void)_handleStartStopToggle:(id)toggle;
- (void)_handleStartTextSearch:(id)search;
- (void)_handleStateReset;
- (void)_handleStewieAnnouncementInRange:(BOOL)range heading:(double)heading;
- (void)_handleStopSpeaking;
- (void)_handleStopSpeakingAndClearAllQueues;
- (void)_handleStopSpeakingAndClearQueue;
- (void)_handleSwitchToElementCommunityPrevious:(BOOL)previous event:(id)event;
- (void)_handleSwitchToLeftElementCommunity:(id)community;
- (void)_handleSwitchToRightElementCommunity:(id)community;
- (void)_handleSystemCommandActivateAccessibilityShortcut:(id)shortcut;
- (void)_handleSystemCommandActivateLockButton:(id)button;
- (void)_handleSystemCommandControlCenter:(id)center;
- (void)_handleSystemCommandNotificationCenter:(id)center;
- (void)_handleSystemCommandSpotlight:(id)spotlight;
- (void)_handleSystemCommandSwitchToNextApp:(id)app;
- (void)_handleSystemCommandSwitchToPreviousApp:(id)app;
- (void)_handleSystemCommandTakeScreenshot:(id)screenshot;
- (void)_handleSystemCommandToggleAppSwitcher:(id)switcher;
- (void)_handleSystemCommandToggleDock:(id)dock;
- (void)_handleSystemCommandToggleQuickNote:(id)note;
- (void)_handleSystemCommandToggleReachability:(id)reachability;
- (void)_handleSystemControlActivation:(id)activation;
- (void)_handleSystemLockedOutputBehavior:(id)behavior shouldSendRequest:(BOOL *)request startElement:(id *)element;
- (void)_handleSystemVolumeChange:(float)change;
- (void)_handleTapAndHoldEventMonitor:(id)monitor;
- (void)_handleTemporaryScreenCurtainDisablement;
- (void)_handleTextDocumentMovement:(id)movement;
- (void)_handleTextReplacementOccurredNotification:(id)notification;
- (void)_handleTextRotorSelectionAction:(BOOL)action;
- (void)_handleTextWordMovement:(id)movement;
- (void)_handleToggleBrailleUI:(id)i;
- (void)_handleToggleCaptionPanel:(id)panel;
- (void)_handleToggleCrownNavigation:(id)navigation;
- (void)_handleToggleIgnoreTrackpad:(id)trackpad;
- (void)_handleToggleKeyboardBraileUI:(id)i;
- (void)_handleToggleLiveRegions:(int64_t)regions;
- (void)_handleToggleMute:(id)mute;
- (void)_handleTogglePerkinsKeyboardInput:(id)input;
- (void)_handleToggleQuickNav:(id)nav;
- (void)_handleToggleRotationCapability:(id)capability;
- (void)_handleToggleScreenCurtain:(id)curtain;
- (void)_handleToggleSettingsHUD:(id)d;
- (void)_handleToggleSideApp:(id)app;
- (void)_handleToggleSideAppIfAvailableInGestures:(id)gestures;
- (void)_handleToggleSingleLetterQuickNav:(id)nav;
- (void)_handleToggleSoundCurtain:(id)curtain;
- (void)_handleToggleSpeaking:(id)speaking;
- (void)_handleToggleTypeToSiri:(id)siri;
- (void)_handleToggleVoiceOverModifierKeyLock:(id)lock;
- (void)_handleTopEdgePanDown:(id)down;
- (void)_handleTopEdgePanLong:(id)long;
- (void)_handleTopEdgePanShort:(id)short;
- (void)_handleTracking:(id)tracking;
- (void)_handleTrackingDetailMovement:(BOOL)movement event:(id)event;
- (void)_handleTripleTap:(id)tap;
- (void)_handleTypingEchoChange:(BOOL)change;
- (void)_handleUnmuteEligibleEventOccured;
- (void)_handleUpdateAppFromTimer;
- (void)_handleUpdatedMathElementIndex;
- (void)_handleUsePitchChange:(BOOL)change;
- (void)_handleUserSelection:(id)selection;
- (void)_handleValidatedCustomActionMovementThroughActions:(id)actions forEvent:(id)event inDirection:(int64_t)direction;
- (void)_handleValueChangedNotification:(id)notification associatedElement:(id)element;
- (void)_handleVerticalMovement:(id)movement direction:(int64_t)direction;
- (void)_handleVolumeChange:(float)change;
- (void)_handleWatchWakeDoubleTap:(id)tap;
- (void)_handleWatchWakeTap:(id)tap;
- (void)_handleWatchWakeTripleTap:(id)tap;
- (void)_handleWebFormControlInteractionEndNotification:(id)notification;
- (void)_handleWebFormControlInteractionStartNotification:(id)notification;
- (void)_handleWebPageLoaded:(id)loaded;
- (void)_handleWebSearchResult:(int64_t)result withEvent:(id)event;
- (void)_handleWebSelection:(id)selection;
- (void)_handleWebSelectionChangedNotification:(id)notification;
- (void)_handleWebTextAvailableNotification:(id)notification;
- (void)_handleWebTextMatchSelectedNotification:(id)notification;
- (void)_handleWordMovement:(id)movement;
- (void)_handleWordMovement:(id)movement direction:(int64_t)direction;
- (void)_handleZoomMovement:(int64_t)movement event:(id)event;
- (void)_hideVisualRotor;
- (void)_initializeCommands;
- (void)_initializeElementManagerThread;
- (void)_initializeSystemEventThread;
- (void)_migratePerAppDirectTouchBehavior;
- (void)_monitorElements;
- (void)_moveCursorForElement:(id)element direction:(int64_t)direction unit:(int64_t)unit;
- (void)_moveDetectionModeRotor:(id)rotor;
- (void)_moveFocusToUpdatedRange:(_NSRange)range element:(id)element searchType:(int64_t)type;
- (void)_moveToElement:(id)element shouldPlaySound:(BOOL)sound echoSameTouchContainer:(BOOL)container shouldScroll:(BOOL)scroll moveToElementNotification:(BOOL)notification shouldPlayTrackingSound:(BOOL)trackingSound;
- (void)_outputCurrentElementRotor;
- (void)_outputDataDetectorIfPresent:(CGRect)present element:(id)element includeLinks:(BOOL)links;
- (void)_outputNavigationDirectionMode:(int64_t)mode;
- (void)_outputNextTextSegmentUnit:(int64_t)unit direction:(int64_t)direction;
- (void)_outputRequestFinished:(id)finished;
- (void)_outputRotorTypeCount;
- (void)_outputSelectionDifference:(_NSRange)difference oldRange:(_NSRange)range string:(id)string language:(id)language;
- (void)_outputWebLineWithMarkerRange:(id)range withElement:(id)element;
- (void)_pausedSpeechInterrupted:(id)interrupted;
- (void)_performPressOnElement:(id)element withEvent:(id)event centerPoint:(CGPoint)point;
- (void)_performTouchTypingKeyPress:(id)press;
- (void)_pointerDidMoveToGlobalPoint:(id)point;
- (void)_processExternalElementUpdate;
- (void)_processExternalScrollToVisible:(id)visible;
- (void)_processMisspelledWordTextReplacement;
- (void)_processPassthroughAllowedWithEvent:(id)event initialTouch:(BOOL)touch;
- (void)_processSilentValueChange;
- (void)_processValueChangeWithFirstResponder:(id)responder existingFirstResponder:(BOOL)firstResponder changeType:(id)type changeOrigination:(int64_t)origination isQuiet:(BOOL)quiet;
- (void)_reachabilityWaitForTrackingTimeout;
- (void)_readExplorerElementsAfterSpeechFinishedTimerFired;
- (void)_reallySimulateLongPressForElement:(id)element;
- (void)_refreshMathSegmentsIfNeededWithPreferredDirection:(int64_t)direction;
- (void)_resetElementLabel;
- (void)_resetElementUnitIndexes;
- (void)_resetItemChooserCache;
- (void)_resetMathGranularMovementState;
- (void)_resetOtherTapInputModes;
- (void)_resetQuickNavState;
- (void)_reupdateTextSelectionInformation;
- (void)_sendAutomationTouchCommand:(unsigned int)command location:(CGPoint)location;
- (void)_sendBSIStateChangedNotification:(BOOL)notification usage:(int64_t)usage preferSingleHand:(BOOL)hand;
- (void)_sendBrailleAlert:(id)alert;
- (void)_sendSystemNotificationForFlashlight;
- (void)_sendUserEventOccurredIfNeeded;
- (void)_setDirectInteractionElement:(id)element;
- (void)_setElementRotorToNumberType:(id)type saveToNumberPreferences:(id)preferences numberUserInitiated:(id)initiated;
- (void)_setElementRotorToType:(int64_t)type saveToPreferences:(BOOL)preferences userInitiated:(BOOL)initiated;
- (void)_setElementUnitIndexesToEndOfElement:(id)element;
- (void)_setFetchManager:(id)manager;
- (void)_setNearestElementMovingForward:(BOOL)forward;
- (void)_setPreviousTouchTypingKey:(id)key;
- (void)_setSelectedTextRange:(_NSRange)range onElement:(id)element refreshBraille:(BOOL)braille isVoiceOverSelectionMovement:(BOOL)movement;
- (void)_showItemChooser:(id)chooser;
- (void)_showVisualRotor:(id)rotor direction:(BOOL)direction;
- (void)_simulatedForceTouchLift;
- (void)_simulatedPressOutputTimer:(id)timer;
- (void)_speak:(id)_speak cannotBeInterrupted:(BOOL)interrupted pitch:(int64_t)pitch announcement:(BOOL)announcement brailleOnly:(BOOL)only;
- (void)_speakBrailleAutoAdvanceSpeed;
- (void)_speakElementFromPointerEvent:(id)event;
- (void)_speakMessages:(id)messages cannotBeInterrupted:(BOOL)interrupted pitch:(int64_t)pitch announcement:(BOOL)announcement brailleOnly:(BOOL)only;
- (void)_startReadingBookForNewPage;
- (void)_stopReadAll;
- (void)_switchToOtherRoad;
- (void)_systemNotificationInProgressForRequest:(id)request;
- (void)_systemServerDied;
- (void)_tvOS_handleUpdateWithNativeFocusFromTimer;
- (void)_tvOS_retryUpdateWithNativeFocus;
- (void)_tvOS_updateWithNativeFocus;
- (void)_tvOS_updateWithNativeFocus:(id)focus withDelay:(double)delay;
- (void)_tvOS_updateWithNativeFocus:(id)focus withDelayNumber:(id)number;
- (void)_updateAnyThreadElementAccess;
- (void)_updateApplicationAndSpeak:(id)speak;
- (void)_updateAutomationAccessibilityApps;
- (void)_updateContextDescriptors;
- (void)_updateContinuousPathTimeout;
- (void)_updateCurrentElementForTextInputSelectionChangeIfNeeded;
- (void)_updateCurrentElementFrame;
- (void)_updateCurrentWordContextForBook:(id)book;
- (void)_updateCursorFrameAfterLift;
- (void)_updateCursorFrameForElementIfNeeded:(id)needed;
- (void)_updateCursorFrameForLineFrameMovement:(id)movement;
- (void)_updateDisplayWithCurrentElement;
- (void)_updateExplorerElementsIfNeeded;
- (void)_updateExternalAccessory:(id)accessory;
- (void)_updateFirstResponder;
- (void)_updateFirstResponderTypingBuffer;
- (void)_updateFlashlightEnabledStatus;
- (void)_updateForContinuityStateChange;
- (void)_updateJindoApplicationCache;
- (void)_updateMLElementAutorefresh;
- (void)_updateMostRecentElementCommunity;
- (void)_updateRotorForCurrentElement;
- (void)_updateRotorForCurrentElement:(id)element completion:(id)completion;
- (void)_updateStateForNotificationData:(id)data;
- (void)_updateSwipeFrames;
- (void)_valueWait:(id)wait oldValue:(id)value waitTime:(double)time borderHitIfNoChange:(BOOL)change;
- (void)_visionEngine:(id)engine updatedResult:(id)result forElement:(id)element event:(id)event visionOptions:(id)options;
- (void)_webPageElementFinder;
- (void)_webPageLoadingSound;
- (void)cancelDrag;
- (void)clearExpiredCopiedSpeech;
- (void)deactivateGesturedTextInputIfNeeded:(BOOL)needed;
- (void)dealloc;
- (void)didTerminateDragForDragManager:(id)manager;
- (void)dropDrag;
- (void)elementsCounted:(int64_t)counted;
- (void)elementsRetrieved:(id)retrieved finished:(BOOL)finished;
- (void)explorerElementManager:(id)manager didFinishReadAll:(BOOL)all;
- (void)explorerElementManager:(id)manager willReadElement:(id)element;
- (void)fetchElementsFrom:(id)from inDirection:(int64_t)direction count:(unint64_t)count scroll:(BOOL)scroll block:(id)block;
- (void)gestureRepeater:(id)repeater repeaterEventDidFire:(int64_t)fire;
- (void)gestureRepeaterWillSendFirstRepeaterEvent:(id)event;
- (void)handleEvent:(id)event;
- (void)handleHomeButtonPress;
- (void)handleLaunchVoiceOverImageExplorer;
- (void)handleNotification:(int)notification withData:(id)data forElement:(__AXUIElement *)element;
- (void)handleReachabilityToggled;
- (void)hideVisualRotor;
- (void)moveDragToPoint:(CGPoint)point;
- (void)observeValueForKeyPath:(id)path ofObject:(id)object change:(id)change context:(void *)context;
- (void)outputNextTextSegmentUnit:(int64_t)unit direction:(int64_t)direction string:(id)string element:(id)element;
- (void)outputTextSegmentForRange:(_NSRange)range string:(id)string element:(id)element usePhonetics:(BOOL)phonetics segment:(int64_t)segment;
- (void)pointerDidMoveToGlobalPoint:(CGPoint)point;
- (void)processExternalScrollToVisible:(CGPoint)visible;
- (void)refreshBraille;
- (void)regionDescriptionForElement:(id)element withCompletion:(id)completion;
- (void)removeElementExplorer:(id)explorer;
- (void)resetTextAndSelectionCaches;
- (void)rotor:(id)rotor didChangeFrom:(int64_t)from to:(int64_t)to userInitiated:(BOOL)initiated;
- (void)sendRequest:(id)request;
- (void)setCurrentElement:(id)element shouldSetBrailleElement:(BOOL)brailleElement;
- (void)setCurrentElementToWebEditableAncestor;
- (void)setCurrentTextSelectionSegmentType:(int64_t)type;
- (void)setElementRotorToType:(int64_t)type saveToPreferences:(BOOL)preferences userInitiated:(BOOL)initiated;
- (void)setExploreFocusAffectsNativeFocus:(BOOL)focus;
- (void)setFirstResponder:(id)responder;
- (void)setShouldSilenceAnnouncements:(BOOL)announcements;
- (void)setSpeakNonfocusableElementsAfterDelay:(BOOL)delay;
- (void)showElementLabelPanel:(BOOL)panel currentLabel:(id)label;
- (void)toggleDetectionMode;
- (void)tutorialSetRecognizedGesture:(id)gesture;
- (void)updateApplicationAndSpeak:(id)speak;
- (void)updateCurrentElementFrame;
- (void)updateIndexesForOutputRange:(_NSRange)range segment:(int64_t)segment direction:(int64_t)direction outputStringLength:(unint64_t)length;
- (void)updateRotorForCurrentElement:(BOOL)element completion:(id)completion;
- (void)updateRunningApplications;
- (void)updateTitleElementLabels:(id)labels;
- (void)visionEngine:(id)engine updatedResult:(id)result forElement:(id)element event:(int64_t)event visionOptions:(id)options;
@end

@implementation VOTElementManager

- (void)_cleanupStateForUnitTesting
{
  self->_lastTextPressAction = 0;
  self->_lastElementChangeAction = 0;
  self->_lastPressOnMediaSessionElement = -3061152000.0;
}

+ (void)initialize
{
  if (!qword_1001FEC40)
  {
    v2 = [objc_allocWithZone(AXIndexMap) init];
    v3 = qword_1001FEC40;
    qword_1001FEC40 = v2;

    v4 = objc_allocWithZone(NSArray);
    v10 = 0u;
    v11 = 0u;
    v12 = 0u;
    v13 = 0u;
    v5 = [v4 initWithObjects:{kVOTEventCommandIncreaseVolume, kVOTEventCommandDecreaseVolume, kVOTEventCommandIdle, kVOTEventCommandToggleScreenCurtain, kVOTEventCommandToggleSoundCurtain, kVOTEventCommandVolumeUpButtonPress, kVOTEventCommandVolumeDownButtonPress, kVOTEventCommandPauseSpeaking, kVOTEventCommandContinueSpeaking, kVOTEventCommandToggleSpeaking, kVOTEventCommandBraillePanRight, kVOTEventCommandBraillePanLeft, kVOTEventCommandBraillePanBeginning, kVOTEventCommandBraillePanEnd, kVOTEventCommandBrailleRefreshBrailleLine, 0}];
    v6 = [v5 countByEnumeratingWithState:&v10 objects:v14 count:16];
    if (v6)
    {
      v7 = v6;
      v8 = *v11;
      do
      {
        v9 = 0;
        do
        {
          if (*v11 != v8)
          {
            objc_enumerationMutation(v5);
          }

          [qword_1001FEC40 setObject:kCFBooleanTrue forIndex:{objc_msgSend(*(*(&v10 + 1) + 8 * v9), "hash")}];
          v9 = v9 + 1;
        }

        while (v7 != v9);
        v7 = [v5 countByEnumeratingWithState:&v10 objects:v14 count:16];
      }

      while (v7);
    }
  }
}

- (VOTElementManager)init
{
  v126.receiver = self;
  v126.super_class = VOTElementManager;
  v2 = [(VOTElementManager *)&v126 init];
  v3 = v2;
  if (v2)
  {
    v2->_lastTextPressAction = 0;
    v2->_lastAlertTime = -3061152000.0;
    v4 = vdupq_n_s64(0xC1E6CEAF20000000);
    *&v2->_timeSpentOnNothing = v4;
    v2->_lastLayoutChangeNotificationTime = -3061152000.0;
    v2->_lastAnnouncementNotificationTime = -3061152000.0;
    *&v2->_lastScreenChangeNotificationTime = v4;
    v2->_lastFirstResponderChangeTime = -3061152000.0;
    *&v2->_lastTemporaryQuickNavDisableTime = v4;
    v2->_lastValueChangeTime = -3061152000.0;
    v2->_lastWebPageLoadTime = -3061152000.0;
    v2->_lastPopupTime = -3061152000.0;
    v2->_lastAdjustValueTime = -3061152000.0;
    v2->_switchedToRoadTime = -3061152000.0;
    v2->_lastSilencedAlertTime = -3061152000.0;
    *&v2->_lastScreenWakeViaPlayPause = v4;
    *&v2->_lastFolderOperationTime = v4;
    v2->_lastWebKeyboardDismissTime = -3061152000.0;
    v2->_lastBlockedRequestBySiriOrDictationTime = -3061152000.0;
    v2->_lastAttemptToShowContextMenuTime = -3061152000.0;
    v2->_lastSentBannerTimerReset = -3061152000.0;
    [(VOTElementManager *)v2 setLastEventCommand:0];
    v3->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
    v5 = objc_alloc_init(_VOTTextMarkerRange);
    textMarkerRange = v3->_textMarkerRange;
    v3->_textMarkerRange = v5;

    v7 = +[NSMutableArray array];
    previousTableOrCollectionViewList = v3->_previousTableOrCollectionViewList;
    v3->_previousTableOrCollectionViewList = v7;

    v9 = +[NSMutableDictionary dictionary];
    previousTableOrCollectionViewToMetadata = v3->_previousTableOrCollectionViewToMetadata;
    v3->_previousTableOrCollectionViewToMetadata = v9;

    v11 = [objc_allocWithZone(VOTElementFetcher) init];
    fetchManager = v3->_fetchManager;
    v3->_fetchManager = v11;

    [(VOTElementFetcher *)v3->_fetchManager setDelegate:v3];
    v13 = [objc_allocWithZone(NSMutableString) init];
    elementTypingBuffer = v3->_elementTypingBuffer;
    v3->_elementTypingBuffer = v13;

    v3->_elementSelectionRangeBufferInternal = xmmword_10017E110;
    v3->_elementSelectionRangeBufferForValueChange = xmmword_10017E110;
    v3->_elementSelectionRangeBufferForSelectionChange = xmmword_10017E110;
    v15 = objc_alloc_init(NSMutableDictionary);
    focusedElementsByElementCommunityIdentifier = v3->_focusedElementsByElementCommunityIdentifier;
    v3->_focusedElementsByElementCommunityIdentifier = v15;

    v3->_anyThreadCurrentElementLock._os_unfair_lock_opaque = 0;
    v17 = objc_alloc_init(SCRCThread);
    elementManagerThread = v3->_elementManagerThread;
    v3->_elementManagerThread = v17;

    v19 = v3->_elementManagerThread;
    v20 = objc_opt_class();
    v21 = NSStringFromClass(v20);
    [(SCRCThread *)v19 setName:v21];

    [(SCRCThread *)v3->_elementManagerThread performSelector:"_initializeElementManagerThread" onTarget:v3 count:0 objects:0];
    v22 = [[SCRCThreadKey alloc] initWithObject:v3];
    threadKey = v3->_threadKey;
    v3->_threadKey = v22;

    v24 = objc_alloc_init(SCRCThread);
    systemEventThread = v3->_systemEventThread;
    v3->_systemEventThread = v24;

    [(SCRCThread *)v3->_systemEventThread setName:@"VOTSystemEvent"];
    [(SCRCThread *)v3->_systemEventThread performSelector:"_initializeSystemEventThread" onTarget:v3 count:0 objects:0];
    v26 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_drawTouchContainerFrame" thread:v3->_elementManagerThread];
    containerFrameDrawingTimer = v3->_containerFrameDrawingTimer;
    v3->_containerFrameDrawingTimer = v26;

    v28 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_hideVisualRotor" thread:v3->_elementManagerThread];
    visualRotorFadeTimer = v3->_visualRotorFadeTimer;
    v3->_visualRotorFadeTimer = v28;

    v30 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_handleLayoutChangeFromTimer" thread:v3->_elementManagerThread];
    updateLayoutTimer = v3->_updateLayoutTimer;
    v3->_updateLayoutTimer = v30;

    v32 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_appSuspensionSoundTimer" thread:v3->_elementManagerThread];
    appSuspensionSoundTimer = v3->_appSuspensionSoundTimer;
    v3->_appSuspensionSoundTimer = v32;

    v34 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_simulatedPressOutputTimer:" thread:v3->_elementManagerThread];
    simulatedPressOutputTimer = v3->_simulatedPressOutputTimer;
    v3->_simulatedPressOutputTimer = v34;

    v36 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_switchToOtherRoad" thread:v3->_elementManagerThread];
    switchRoadsAtIntersectionTimer = v3->_switchRoadsAtIntersectionTimer;
    v3->_switchRoadsAtIntersectionTimer = v36;

    v38 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_activateAlternativeKeyboardKey:" thread:v3->_elementManagerThread];
    keyboardAlternativeModeActivationTimer = v3->_keyboardAlternativeModeActivationTimer;
    v3->_keyboardAlternativeModeActivationTimer = v38;

    v40 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_dismissAlternativeKeyboardKeys" thread:v3->_elementManagerThread];
    alternativeKeyDismissalTimer = v3->_alternativeKeyDismissalTimer;
    v3->_alternativeKeyDismissalTimer = v40;

    v42 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_continuousPathIdleTimer:" thread:v3->_elementManagerThread];
    continuousPathIdleTimer = v3->_continuousPathIdleTimer;
    v3->_continuousPathIdleTimer = v42;

    v44 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:0 thread:v3->_elementManagerThread];
    elementMonitorTimer = v3->_elementMonitorTimer;
    v3->_elementMonitorTimer = v44;

    v46 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_speakElementFromPointerEvent:" thread:v3->_elementManagerThread];
    pointerSpeakElementTimer = v3->_pointerSpeakElementTimer;
    v3->_pointerSpeakElementTimer = v46;

    [(SCRCTargetSelectorTimer *)v3->_appSuspensionSoundTimer cancel];
    v48 = [[SCRCTargetSelectorTimer alloc] initWithTarget:v3 selector:"_elementUpdatesFrequently" thread:v3->_elementManagerThread];
    elementUpdatesFrequentlyTimer = v3->_elementUpdatesFrequentlyTimer;
    v3->_elementUpdatesFrequentlyTimer = v48;

    v50 = +[NSNotificationCenter defaultCenter];
    [v50 addObserver:v3 selector:"_pausedSpeechInterrupted:" name:off_1001FDB20 object:0];

    *&v3->_didPeekEvent = 0;
    v51 = objc_alloc_init(NSMutableArray);
    touchEventElements = v3->_touchEventElements;
    v3->_touchEventElements = v51;

    v53 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_simulatedForceTouchLift" thread:v3->_elementManagerThread];
    simulatedForceLiftTimer = v3->_simulatedForceLiftTimer;
    v3->_simulatedForceLiftTimer = v53;

    v55 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_handleUpdateAppFromTimer" thread:v3->_elementManagerThread];
    updateAppFromTimer = v3->_updateAppFromTimer;
    v3->_updateAppFromTimer = v55;

    v57 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_reachabilityWaitForTrackingTimeout" thread:v3->_elementManagerThread];
    reachabilityWaitForTrackingTimer = v3->_reachabilityWaitForTrackingTimer;
    v3->_reachabilityWaitForTrackingTimer = v57;

    DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
    CFNotificationCenterAddObserver(DarwinNotifyCenter, v3, sub_10005A0B8, kAXSVoiceOverJindoHostedApplicationsChangedNotification, 0, CFNotificationSuspensionBehaviorDeliverImmediately);
    v60 = CFNotificationCenterGetDarwinNotifyCenter();
    CFNotificationCenterAddObserver(v60, v3, sub_10005A0C0, kAXSContinuityDisplayStateChangedNotification, 0, CFNotificationSuspensionBehaviorDeliverImmediately);
    v61 = objc_opt_new();
    elementMonitorCache = v3->_elementMonitorCache;
    v3->_elementMonitorCache = v61;

    v63 = [objc_allocWithZone(AXIndexMap) init];
    commands = v3->_commands;
    v3->_commands = v63;

    v65 = objc_alloc_init(NSMutableDictionary);
    fingersFromTouchCommands = v3->_fingersFromTouchCommands;
    v3->_fingersFromTouchCommands = v65;

    v67 = [objc_allocWithZone(VOTElementRotor) init];
    elementRotor = v3->_elementRotor;
    v3->_elementRotor = v67;

    [(VOTRotor *)v3->_elementRotor setDelegate:v3];
    v69 = [objc_allocWithZone(VOTSpeechRotor) init];
    speechRotor = v3->_speechRotor;
    v3->_speechRotor = v69;

    v71 = [[VOTTextMovementManager alloc] initWithSegments:&off_1001DB708];
    textSelectionMovementManager = v3->_textSelectionMovementManager;
    v3->_textSelectionMovementManager = v71;

    v3->_elementMathIndex = 0x7FFFFFFFFFFFFFFFLL;
    v3->_elementMathSegmentGranularity = 0;
    v73 = [objc_allocWithZone(NSMutableDictionary) init];
    lastSeenFontProperties = v3->_lastSeenFontProperties;
    v3->_lastSeenFontProperties = v73;

    [(VOTElementManager *)v3 _migratePerAppDirectTouchBehavior];
    v75 = objc_alloc_init(NSMutableSet);
    directInteractionElements = v3->_directInteractionElements;
    v3->_directInteractionElements = v75;

    v77 = objc_alloc_init(NSMutableArray);
    cachedLaunchIcons = v3->_cachedLaunchIcons;
    v3->_cachedLaunchIcons = v77;

    v79 = objc_alloc_init(NSLock);
    trackingLock = v3->_trackingLock;
    v3->_trackingLock = v79;

    [(VOTElementManager *)v3 _resetElementUnitIndexes];
    [(VOTElementManager *)v3 _initializeCommands];
    objc_initWeak(&location, v3);
    [(VOTElementManager *)v3 _updateContinuousPathTimeout];
    v81 = +[AXSettings sharedInstance];
    v123[0] = _NSConcreteStackBlock;
    v123[1] = 3221225472;
    v123[2] = sub_10005A0E0;
    v123[3] = &unk_1001C78D8;
    objc_copyWeak(&v124, &location);
    [v81 registerUpdateBlock:v123 forRetrieveSelector:"voiceOverContinuousPathKeyboardStartTimeout" withListener:v3];

    objc_destroyWeak(&v124);
    v82 = +[AXSettings sharedInstance];
    v121[0] = _NSConcreteStackBlock;
    v121[1] = 3221225472;
    v121[2] = sub_10005A120;
    v121[3] = &unk_1001C78D8;
    objc_copyWeak(&v122, &location);
    [v82 registerUpdateBlock:v121 forRetrieveSelector:"voiceOverRotorItems" withListener:v3];

    objc_destroyWeak(&v122);
    v83 = +[AXSettings sharedInstance];
    voiceOverDirectTouchEnabledApps = [v83 voiceOverDirectTouchEnabledApps];
    v85 = [voiceOverDirectTouchEnabledApps mutableCopy];
    [(VOTElementManager *)v3 setDirectTouchApps:v85];

    v86 = +[AXSettings sharedInstance];
    v119[0] = _NSConcreteStackBlock;
    v119[1] = 3221225472;
    v119[2] = sub_10005A168;
    v119[3] = &unk_1001C78D8;
    objc_copyWeak(&v120, &location);
    [v86 registerUpdateBlock:v119 forRetrieveSelector:"voiceOverDirectTouchEnabledApps" withListener:v3];

    objc_destroyWeak(&v120);
    v117[0] = _NSConcreteStackBlock;
    v117[1] = 3221225472;
    v117[2] = sub_10005A1F4;
    v117[3] = &unk_1001C76E8;
    v87 = v3;
    v118 = v87;
    v88 = objc_retainBlock(v117);
    v89 = +[AXSettings sharedInstance];
    [v89 registerUpdateBlock:v88 forRetrieveSelector:"automaticAccessibilityModes" withListener:v87];

    (v88[2])(v88);
    if (MGGetBoolAnswer() && _os_feature_enabled_impl())
    {
      [v87 _updateFlashlightEnabledStatus];
      v90 = +[AXSettings sharedInstance];
      v115[0] = _NSConcreteStackBlock;
      v115[1] = 3221225472;
      v115[2] = sub_10005A214;
      v115[3] = &unk_1001C78D8;
      objc_copyWeak(&v116, &location);
      [v90 registerUpdateBlock:v115 forRetrieveSelector:"voiceOverFlashlightNotificationsEnabled" withListener:v87];

      objc_destroyWeak(&v116);
    }

    v91 = objc_alloc_init(AXScribbleManager);
    v92 = v87[263];
    v87[263] = v91;

    v93 = objc_alloc_init(NSMutableDictionary);
    v94 = v87[314];
    v87[314] = v93;

    if (([VOTSharedWorkspace inUnitTestMode] & 1) == 0 && +[AXSpringBoardServer isAvailable](AXSpringBoardServer, "isAvailable"))
    {
      v95 = +[AXSpringBoardServer server];
      v113[0] = _NSConcreteStackBlock;
      v113[1] = 3221225472;
      v113[2] = sub_10005A254;
      v113[3] = &unk_1001C8CC8;
      objc_copyWeak(&v114, &location);
      v111[0] = _NSConcreteStackBlock;
      v111[1] = 3221225472;
      v111[2] = sub_10005A320;
      v111[3] = &unk_1001C8CF0;
      objc_copyWeak(&v112, &location);
      [v95 registerSpringBoardActionHandler:v113 withIdentifierCallback:v111];

      objc_destroyWeak(&v112);
      objc_destroyWeak(&v114);
    }

    v96 = +[VOTWorkspace sharedWorkspace];
    visionEngine = [v96 visionEngine];
    [visionEngine setResultUpdateDelegate:v87];

    v87[325] = 0xC1E6CEAF20000000;
    v87[236] = 0x7FFFFFFFFFFFFFFFLL;
    *(v87 + 200) = -1;
    v98 = [AXDragManager alloc];
    v99 = [v98 initWithMachServiceName:AXDragServiceNameVoiceOver];
    v100 = v87[253];
    v87[253] = v99;

    [v87[253] setDelegate:v87];
    v101 = objc_opt_new();
    v102 = v87[254];
    v87[254] = v101;

    v103 = +[AXSettings sharedInstance];
    LODWORD(visionEngine) = [v103 laserEnabled];

    if (visionEngine)
    {
      v104 = +[VOTDisplayManager displayManager];
      [v104 registerForPointerEvents:v87];
    }

    v105 = +[AXPISystemActionHelper sharedInstance];
    [v105 warm];

    v106 = objc_opt_new();
    v107 = v87[352];
    v87[352] = v106;

    v108 = objc_opt_new();
    v109 = v87[264];
    v87[264] = v108;

    [v87 _updateForContinuityStateChange];
    objc_destroyWeak(&location);
  }

  return v3;
}

- (void)dealloc
{
  v3 = +[VOTOutputManager outputManager];
  [v3 removeOutputManagerObserver:self];

  [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:0];
  startTrackingRoadRequest = self->_startTrackingRoadRequest;
  self->_startTrackingRoadRequest = 0;

  [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCompletionDelegate:0];
  switchRoadsOutputRequest = self->_switchRoadsOutputRequest;
  self->_switchRoadsOutputRequest = 0;

  [(VOTOutputRequest *)self->_endOfRoadApproachingRequest setCompletionDelegate:0];
  endOfRoadApproachingRequest = self->_endOfRoadApproachingRequest;
  self->_endOfRoadApproachingRequest = 0;

  [(VOTOutputRequest *)self->_bookPageContentOutputRequest setCompletionDelegate:0];
  bookPageContentOutputRequest = self->_bookPageContentOutputRequest;
  self->_bookPageContentOutputRequest = 0;

  [(VOTOutputRequest *)self->_readAllOutputRequest setCompletionDelegate:0];
  readAllOutputRequest = self->_readAllOutputRequest;
  self->_readAllOutputRequest = 0;

  [(VOTOutputRequest *)self->_announcementRequest setCompletionDelegate:0];
  announcementRequest = self->_announcementRequest;
  self->_announcementRequest = 0;

  bookPageScrollString = self->_bookPageScrollString;
  self->_bookPageScrollString = 0;

  v11 = +[AXSpringBoardServer server];
  [v11 removeActionHandler:self->_springBoardActionHandlerIdentifier];

  [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer invalidate];
  visualRotorFadeTimer = self->_visualRotorFadeTimer;
  self->_visualRotorFadeTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer invalidate];
  [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer invalidate];
  keyboardAlternativeModeActivationTimer = self->_keyboardAlternativeModeActivationTimer;
  self->_keyboardAlternativeModeActivationTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer invalidate];
  alternativeKeyDismissalTimer = self->_alternativeKeyDismissalTimer;
  self->_alternativeKeyDismissalTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer invalidate];
  containerFrameDrawingTimer = self->_containerFrameDrawingTimer;
  self->_containerFrameDrawingTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer invalidate];
  webPageLoadingSoundTimer = self->_webPageLoadingSoundTimer;
  self->_webPageLoadingSoundTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_invalidStatusChangedTimer invalidate];
  invalidStatusChangedTimer = self->_invalidStatusChangedTimer;
  self->_invalidStatusChangedTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_appSuspensionSoundTimer invalidate];
  appSuspensionSoundTimer = self->_appSuspensionSoundTimer;
  self->_appSuspensionSoundTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer invalidate];
  updateLayoutTimer = self->_updateLayoutTimer;
  self->_updateLayoutTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_simulatedPressOutputTimer invalidate];
  simulatedPressOutputTimer = self->_simulatedPressOutputTimer;
  self->_simulatedPressOutputTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer invalidate];
  switchRoadsAtIntersectionTimer = self->_switchRoadsAtIntersectionTimer;
  self->_switchRoadsAtIntersectionTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_simulatedForceLiftTimer invalidate];
  simulatedForceLiftTimer = self->_simulatedForceLiftTimer;
  self->_simulatedForceLiftTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer invalidate];
  updateAppFromTimer = self->_updateAppFromTimer;
  self->_updateAppFromTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateWithNativeFocusTimer invalidate];
  updateWithNativeFocusTimer = self->_updateWithNativeFocusTimer;
  self->_updateWithNativeFocusTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateVisualsTimer invalidate];
  updateVisualsTimer = self->_updateVisualsTimer;
  self->_updateVisualsTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updatePreferredTVInteractionModeTimer invalidate];
  updatePreferredTVInteractionModeTimer = self->_updatePreferredTVInteractionModeTimer;
  self->_updatePreferredTVInteractionModeTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer invalidate];
  elementUpdatesFrequentlyTimer = self->_elementUpdatesFrequentlyTimer;
  self->_elementUpdatesFrequentlyTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_reachabilityWaitForTrackingTimer invalidate];
  reachabilityWaitForTrackingTimer = self->_reachabilityWaitForTrackingTimer;
  self->_reachabilityWaitForTrackingTimer = 0;

  [(SCRCThread *)self->_elementManagerThread performSelector:"_exitThread:" onTarget:objc_opt_class() count:1 objects:self->_elementManagerThread, 0];
  DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
  CFNotificationCenterRemoveEveryObserver(DarwinNotifyCenter, self);
  v30.receiver = self;
  v30.super_class = VOTElementManager;
  [(VOTElementManager *)&v30 dealloc];
}

+ (void)_exitThread:(id)thread
{
  [thread setIsInvalid:1];

  +[NSThread exit];
}

- (void)_initializeElementManagerThread
{
  AXSetThreadPriority();
  v4 = +[NSThread currentThread];
  v2 = objc_opt_class();
  v3 = NSStringFromClass(v2);
  [v4 setName:v3];
}

- (void)_initializeSystemEventThread
{
  AXSetThreadPriority();
  v2 = +[NSThread currentThread];
  [v2 setName:@"VOTSystemEvent"];
}

- (void)_migratePerAppDirectTouchBehavior
{
  v3 = +[AXSettings sharedInstance];
  voiceOverDirectTouchEnabledApps = [v3 voiceOverDirectTouchEnabledApps];

  if (voiceOverDirectTouchEnabledApps)
  {
    v44 = 0u;
    v45 = 0u;
    v42 = 0u;
    v43 = 0u;
    v5 = [LSApplicationRecord enumeratorWithOptions:0];
    v6 = [v5 countByEnumeratingWithState:&v42 objects:v49 count:16];
    if (v6)
    {
      v7 = v6;
      v8 = *v43;
      while (2)
      {
        for (i = 0; i != v7; i = i + 1)
        {
          if (*v43 != v8)
          {
            objc_enumerationMutation(v5);
          }

          v10 = *(*(&v42 + 1) + 8 * i);
          v11 = +[AXSettings sharedInstance];
          voiceOverDirectTouchEnabledApps2 = [v11 voiceOverDirectTouchEnabledApps];
          bundleIdentifier = [v10 bundleIdentifier];
          v14 = [voiceOverDirectTouchEnabledApps2 objectForKeyedSubscript:bundleIdentifier];

          if (!v14)
          {

            goto LABEL_12;
          }
        }

        v7 = [v5 countByEnumeratingWithState:&v42 objects:v49 count:16];
        if (v7)
        {
          continue;
        }

        break;
      }
    }
  }

  else
  {
LABEL_12:
    v15 = +[VOTConfiguration rootConfiguration];
    v16 = [v15 preferenceForKey:@"DirectTouchMode"];
    v17 = v16;
    v18 = &__kCFBooleanTrue;
    if (v16)
    {
      v18 = v16;
    }

    v5 = v18;

    directTouchApps = [(VOTElementManager *)self directTouchApps];

    if (!directTouchApps)
    {
      v20 = objc_opt_new();
      [(VOTElementManager *)self setDirectTouchApps:v20];
    }

    v40 = 0u;
    v41 = 0u;
    v38 = 0u;
    v39 = 0u;
    v21 = [LSApplicationRecord enumeratorWithOptions:0, 0];
    v22 = [v21 countByEnumeratingWithState:&v38 objects:v48 count:16];
    if (v22)
    {
      v23 = v22;
      v24 = *v39;
      do
      {
        for (j = 0; j != v23; j = j + 1)
        {
          if (*v39 != v24)
          {
            objc_enumerationMutation(v21);
          }

          v26 = *(*(&v38 + 1) + 8 * j);
          directTouchApps2 = [(VOTElementManager *)self directTouchApps];
          bundleIdentifier2 = [v26 bundleIdentifier];
          [directTouchApps2 setObject:v5 forKeyedSubscript:bundleIdentifier2];
        }

        v23 = [v21 countByEnumeratingWithState:&v38 objects:v48 count:16];
      }

      while (v23);
    }

    directTouchApps3 = [(VOTElementManager *)self directTouchApps];
    v30 = +[AXSettings sharedInstance];
    [v30 setVoiceOverDirectTouchEnabledApps:directTouchApps3];

    v31 = VOTLogCommon();
    if (os_log_type_enabled(v31, OS_LOG_TYPE_INFO))
    {
      directTouchApps4 = [(VOTElementManager *)self directTouchApps];
      *buf = 138412290;
      v47 = directTouchApps4;
      _os_log_impl(&_mh_execute_header, v31, OS_LOG_TYPE_INFO, "1: %@", buf, 0xCu);
    }

    v33 = VOTLogCommon();
    if (os_log_type_enabled(v33, OS_LOG_TYPE_INFO))
    {
      *buf = 138412290;
      v47 = v5;
      _os_log_impl(&_mh_execute_header, v33, OS_LOG_TYPE_INFO, "Migrate direct touch settings with default value: %@", buf, 0xCu);
    }

    v34 = VOTLogCommon();
    if (os_log_type_enabled(v34, OS_LOG_TYPE_INFO))
    {
      v35 = +[AXSettings sharedInstance];
      voiceOverDirectTouchEnabledApps3 = [v35 voiceOverDirectTouchEnabledApps];
      *buf = 138412290;
      v47 = voiceOverDirectTouchEnabledApps3;
      _os_log_impl(&_mh_execute_header, v34, OS_LOG_TYPE_INFO, "2: %@", buf, 0xCu);
    }

    v37 = +[VOTConfiguration rootConfiguration];
    [v37 setPreference:0 forKey:@"DirectTouchMode"];
  }
}

- (void)pointerDidMoveToGlobalPoint:(CGPoint)point
{
  y = point.y;
  x = point.x;
  if (([VOTSharedWorkspace speakUnderPointer] & 1) != 0 || objc_msgSend(VOTSharedWorkspace, "pointerVoiceOverCursorOption") == 2)
  {
    elementManagerThread = self->_elementManagerThread;
    v7 = [NSValue valueWithCGPoint:x, y];
    [(SCRCThread *)elementManagerThread performSelector:"_pointerDidMoveToGlobalPoint:" onTarget:self cancelMask:0xFFFFFFFFLL count:1 objects:v7];
  }
}

- (void)_pointerDidMoveToGlobalPoint:(id)point
{
  [point CGPointValue];
  v9 = [[VOTElement alloc] initWithPosition:v4, v5];
  if ([VOTSharedWorkspace pointerVoiceOverCursorOption] == 2)
  {
    if (v9)
    {
      _currentElement = [(VOTElementManager *)self _currentElement];
      v7 = [(VOTElement *)v9 isEqual:_currentElement];

      if ((v7 & 1) == 0)
      {
        [(VOTElementManager *)self _echoDifferentElement:v9 forEvent:0];
      }
    }
  }

  else if ([VOTSharedWorkspace speakUnderPointer])
  {
    pointerSpeakElementTimer = self->_pointerSpeakElementTimer;
    [VOTSharedWorkspace speakUnderPointerDelay];
    [(SCRCTargetSelectorTimer *)pointerSpeakElementTimer dispatchAfterDelay:v9 withObject:?];
  }
}

- (void)_speakElementFromPointerEvent:(id)event
{
  eventCopy = event;
  if (([eventCopy isEqual:self->_lastSpeakUnderPointerElement] & 1) == 0)
  {
    objc_storeStrong(&self->_lastSpeakUnderPointerElement, event);
    LOWORD(v5) = 0;
    [(VOTElementManager *)self _echoDifferentElement:eventCopy forEvent:0 onlyOutputTouchContainerAndSounds:0 canSetAsCurrentElement:0 shouldPlayGuideWireSound:0 isProtectedApp:0 includeHint:v5 boundaryHit:?];
  }
}

- (void)_initializeCommands
{
  commands = self->_commands;
  v4 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTracking:"];
  -[AXIndexMap setObject:forIndex:](commands, "setObject:forIndex:", v4, [kVOTEventCommandTracking hash]);

  v5 = self->_commands;
  v6 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTapAndHoldEventMonitor:"];
  -[AXIndexMap setObject:forIndex:](v5, "setObject:forIndex:", v6, [kVOTEventCommandTapAndHoldEventMonitor hash]);

  v7 = self->_commands;
  v8 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIdle:"];
  -[AXIndexMap setObject:forIndex:](v7, "setObject:forIndex:", v8, [kVOTEventCommandIdle hash]);

  v9 = self->_commands;
  v10 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimulatedLongPress:"];
  -[AXIndexMap setObject:forIndex:](v9, "setObject:forIndex:", v10, [kVOTEventCommandSimulatedLongPress hash]);

  v11 = self->_commands;
  v12 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformHomeButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v11, "setObject:forIndex:", v12, [kVOTEventCommandHomeButtonPress hash]);

  v13 = self->_commands;
  v14 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartSiri:"];
  -[AXIndexMap setObject:forIndex:](v13, "setObject:forIndex:", v14, [kVOTEventCommandStartSiri hash]);

  v15 = self->_commands;
  v16 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v15, "setObject:forIndex:", v16, [kVOTEventCommandPreviousElement hash]);

  v17 = self->_commands;
  v18 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v17, "setObject:forIndex:", v18, [kVOTEventCommandNextElement hash]);

  v19 = self->_commands;
  v20 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v19, "setObject:forIndex:", v20, [kVOTEventCommandFirstElement hash]);

  v21 = self->_commands;
  v22 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v21, "setObject:forIndex:", v22, [kVOTEventCommandLastElement hash]);

  v23 = self->_commands;
  v24 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v23, "setObject:forIndex:", v24, [kVOTEventCommandCenterElement hash]);

  v25 = self->_commands;
  v26 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToElementAbove:"];
  -[AXIndexMap setObject:forIndex:](v25, "setObject:forIndex:", v26, [kVOTEventCommandElementAbove hash]);

  v27 = self->_commands;
  v28 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToElementBelow:"];
  -[AXIndexMap setObject:forIndex:](v27, "setObject:forIndex:", v28, [kVOTEventCommandElementBelow hash]);

  v29 = self->_commands;
  v30 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementInteraction:"];
  -[AXIndexMap setObject:forIndex:](v29, "setObject:forIndex:", v30, [kVOTEventCommandMoveIn hash]);

  v31 = self->_commands;
  v32 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementInteraction:"];
  -[AXIndexMap setObject:forIndex:](v31, "setObject:forIndex:", v32, [kVOTEventCommandMoveOut hash]);

  v33 = self->_commands;
  v34 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v33, "setObject:forIndex:", v34, [kVOTEventCommandFirstWord hash]);

  v35 = self->_commands;
  v36 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v35, "setObject:forIndex:", v36, [kVOTEventCommandLastWord hash]);

  v37 = self->_commands;
  v38 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextDocumentMovement:"];
  -[AXIndexMap setObject:forIndex:](v37, "setObject:forIndex:", v38, [kVOTEventCommandDocumentTop hash]);

  v39 = self->_commands;
  v40 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextDocumentMovement:"];
  -[AXIndexMap setObject:forIndex:](v39, "setObject:forIndex:", v40, [kVOTEventCommandDocumentBottom hash]);

  v41 = self->_commands;
  v42 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMoveToStatusBar:"];
  -[AXIndexMap setObject:forIndex:](v41, "setObject:forIndex:", v42, [kVOTEventCommandMoveToStatusBar hash]);

  v43 = self->_commands;
  v44 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCharacterMovement:"];
  -[AXIndexMap setObject:forIndex:](v43, "setObject:forIndex:", v44, [kVOTEventCommandNextCharacter hash]);

  v45 = self->_commands;
  v46 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCharacterMovement:"];
  -[AXIndexMap setObject:forIndex:](v45, "setObject:forIndex:", v46, [kVOTEventCommandPreviousCharacter hash]);

  v47 = self->_commands;
  v48 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v47, "setObject:forIndex:", v48, [kVOTEventCommandNextWord hash]);

  v49 = self->_commands;
  v50 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v49, "setObject:forIndex:", v50, [kVOTEventCommandPreviousWord hash]);

  v51 = self->_commands;
  v52 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLineMovement:"];
  -[AXIndexMap setObject:forIndex:](v51, "setObject:forIndex:", v52, [kVOTEventCommandNextLine hash]);

  v53 = self->_commands;
  v54 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLineMovement:"];
  -[AXIndexMap setObject:forIndex:](v53, "setObject:forIndex:", v54, [kVOTEventCommandPreviousLine hash]);

  v55 = self->_commands;
  v56 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSentenceMovement:"];
  -[AXIndexMap setObject:forIndex:](v55, "setObject:forIndex:", v56, [kVOTEventCommandNextSentence hash]);

  v57 = self->_commands;
  v58 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSentenceMovement:"];
  -[AXIndexMap setObject:forIndex:](v57, "setObject:forIndex:", v58, [kVOTEventCommandPreviousSentence hash]);

  v59 = self->_commands;
  v60 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleParagraphMovement:"];
  -[AXIndexMap setObject:forIndex:](v59, "setObject:forIndex:", v60, [kVOTEventCommandNextParagraph hash]);

  v61 = self->_commands;
  v62 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleParagraphMovement:"];
  -[AXIndexMap setObject:forIndex:](v61, "setObject:forIndex:", v62, [kVOTEventCommandPreviousParagraph hash]);

  v63 = self->_commands;
  v64 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCursorMovementByTextSegment:"];
  -[AXIndexMap setObject:forIndex:](v63, "setObject:forIndex:", v64, [kVOTEventCommandNextTextSegment hash]);

  v65 = self->_commands;
  v66 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCursorMovementByTextSegment:"];
  -[AXIndexMap setObject:forIndex:](v65, "setObject:forIndex:", v66, [kVOTEventCommandPreviousTextSegment hash]);

  v67 = self->_commands;
  v68 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v67, "setObject:forIndex:", v68, [kVOTEventCommandPreviousContainer hash]);

  v69 = self->_commands;
  v70 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v69, "setObject:forIndex:", v70, [kVOTEventCommandNextContainer hash]);

  v71 = self->_commands;
  v72 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIntraContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v71, "setObject:forIndex:", v72, [kVOTEventCommandContainerTop hash]);

  v73 = self->_commands;
  v74 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIntraContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v73, "setObject:forIndex:", v74, [kVOTEventCommandContainerBottom hash]);

  v75 = self->_commands;
  v76 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIncreaseVolume:"];
  -[AXIndexMap setObject:forIndex:](v75, "setObject:forIndex:", v76, [kVOTEventCommandIncreaseVolume hash]);

  v77 = self->_commands;
  v78 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDecreaseVolume:"];
  -[AXIndexMap setObject:forIndex:](v77, "setObject:forIndex:", v78, [kVOTEventCommandDecreaseVolume hash]);

  v79 = self->_commands;
  v80 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIncreaseSystemVolume:"];
  -[AXIndexMap setObject:forIndex:](v79, "setObject:forIndex:", v80, [kVOTEventCommandIncreaseSystemVolume hash]);

  v81 = self->_commands;
  v82 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDecreaseSystemVolume:"];
  -[AXIndexMap setObject:forIndex:](v81, "setObject:forIndex:", v82, [kVOTEventCommandDecreaseSystemVolume hash]);

  v83 = self->_commands;
  v84 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRotateOrientation:"];
  -[AXIndexMap setObject:forIndex:](v83, "setObject:forIndex:", v84, [kVOTEventCommandRotateOrientationLeft hash]);

  v85 = self->_commands;
  v86 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRotateOrientation:"];
  -[AXIndexMap setObject:forIndex:](v85, "setObject:forIndex:", v86, [kVOTEventCommandRotateOrientationRight hash]);

  v87 = self->_commands;
  v88 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputColumnHeader:"];
  -[AXIndexMap setObject:forIndex:](v87, "setObject:forIndex:", v88, [kVOTEventCommandOutputColumnHeader hash]);

  v89 = self->_commands;
  v90 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputColumnContents:"];
  -[AXIndexMap setObject:forIndex:](v89, "setObject:forIndex:", v90, [kVOTEventCommandOutputContentsOfColumn hash]);

  v91 = self->_commands;
  v92 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputCharacter:"];
  -[AXIndexMap setObject:forIndex:](v91, "setObject:forIndex:", v92, [kVOTEventCommandOutputCharacter hash]);

  v93 = self->_commands;
  v94 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputCharacterPhonetically:"];
  -[AXIndexMap setObject:forIndex:](v93, "setObject:forIndex:", v94, [kVOTEventCommandOutputCharacterPhonetically hash]);

  v95 = self->_commands;
  v96 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputTableRowColumnInfo:"];
  -[AXIndexMap setObject:forIndex:](v95, "setObject:forIndex:", v96, [kVOTEventCommandOutputTableRowColumnInfo hash]);

  v97 = self->_commands;
  v98 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputCellRowColumnInfo:"];
  -[AXIndexMap setObject:forIndex:](v97, "setObject:forIndex:", v98, [kVOTEventCommandOutputCellRowColumnInfo hash]);

  v99 = self->_commands;
  v100 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputRowContents:"];
  -[AXIndexMap setObject:forIndex:](v99, "setObject:forIndex:", v100, [kVOTEventCommandOutputContentsOfRow hash]);

  v101 = self->_commands;
  v102 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRealtimeElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v101, "setObject:forIndex:", v102, [kVOTEventCommandNextRealtimeElement hash]);

  v103 = self->_commands;
  v104 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRealtimeElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v103, "setObject:forIndex:", v104, [kVOTEventCommandPreviousRealtimeElement hash]);

  v105 = self->_commands;
  v106 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleShowEditingHUD:"];
  -[AXIndexMap setObject:forIndex:](v105, "setObject:forIndex:", v106, [kVOTEventCommandShowEditingHUD hash]);

  v107 = self->_commands;
  v108 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v107, "setObject:forIndex:", v108, [kVOTEventCommandSystemShowControlCenter hash]);

  v109 = self->_commands;
  v110 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v109, "setObject:forIndex:", v110, [kVOTEventCommandSystemShowNotificationCenter hash]);

  v111 = self->_commands;
  v112 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleTypeToSiri:"];
  -[AXIndexMap setObject:forIndex:](v111, "setObject:forIndex:", v112, [kVOTEventCommandSystemToggleTypeToSiri hash]);

  v113 = self->_commands;
  v114 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v113, "setObject:forIndex:", v114, [kVOTEventCommandSystemControlRight hash]);

  v115 = self->_commands;
  v116 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v115, "setObject:forIndex:", v116, [kVOTEventCommandSystemControlLeft hash]);

  v117 = self->_commands;
  v118 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v117, "setObject:forIndex:", v118, [kVOTEventCommandSystemControlTwoTop hash]);

  v119 = self->_commands;
  v120 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandNotificationCenter:"];
  -[AXIndexMap setObject:forIndex:](v119, "setObject:forIndex:", v120, [kVOTEventCommandSystemShowNotificationCenter hash]);

  v121 = self->_commands;
  v122 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandControlCenter:"];
  -[AXIndexMap setObject:forIndex:](v121, "setObject:forIndex:", v122, [kVOTEventCommandSystemShowControlCenter hash]);

  v123 = self->_commands;
  v124 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandActivateSpeakScreen:"];
  -[AXIndexMap setObject:forIndex:](v123, "setObject:forIndex:", v124, [kVOTEventCommandSystemActivateSpeakScreen hash]);

  v125 = self->_commands;
  v126 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleDock:"];
  -[AXIndexMap setObject:forIndex:](v125, "setObject:forIndex:", v126, [kVOTEventCommandSystemToggleDock hash]);

  v127 = self->_commands;
  v128 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleAppSwitcher:"];
  -[AXIndexMap setObject:forIndex:](v127, "setObject:forIndex:", v128, [kVOTEventCommandSystemToggleAppSwitcher hash]);

  v129 = self->_commands;
  v130 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandActivateLockButton:"];
  -[AXIndexMap setObject:forIndex:](v129, "setObject:forIndex:", v130, [kVOTEventCommandSystemActivateLockButton hash]);

  v131 = self->_commands;
  v132 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandSpotlight:"];
  -[AXIndexMap setObject:forIndex:](v131, "setObject:forIndex:", v132, [kVOTEventCommandSystemShowSpotlight hash]);

  v133 = self->_commands;
  v134 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandActivateAccessibilityShortcut:"];
  -[AXIndexMap setObject:forIndex:](v133, "setObject:forIndex:", v134, [kVOTEventCommandSystemActivateAccessibilityShortcut hash]);

  v135 = self->_commands;
  v136 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleReachability:"];
  -[AXIndexMap setObject:forIndex:](v135, "setObject:forIndex:", v136, [kVOTEventCommandSystemToggleReachability hash]);

  v137 = self->_commands;
  v138 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandTakeScreenshot:"];
  -[AXIndexMap setObject:forIndex:](v137, "setObject:forIndex:", v138, [kVOTEventCommandSystemTakeScreenshot hash]);

  v139 = self->_commands;
  v140 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandSwitchToPreviousApp:"];
  -[AXIndexMap setObject:forIndex:](v139, "setObject:forIndex:", v140, [kVOTEventCommandSystemSwitchToPreviousApp hash]);

  v141 = self->_commands;
  v142 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandSwitchToNextApp:"];
  -[AXIndexMap setObject:forIndex:](v141, "setObject:forIndex:", v142, [kVOTEventCommandSystemSwitchToNextApp hash]);

  v143 = self->_commands;
  v144 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleQuickNote:"];
  -[AXIndexMap setObject:forIndex:](v143, "setObject:forIndex:", v144, [kVOTEventCommandSystemToggleQuickNote hash]);

  v145 = self->_commands;
  v146 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCancelSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v145, "setObject:forIndex:", v146, [kVOTEventCommandCancelSpeaking hash]);

  v147 = self->_commands;
  v148 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePauseSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v147, "setObject:forIndex:", v148, [kVOTEventCommandPauseSpeaking hash]);

  v149 = self->_commands;
  v150 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleContinueSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v149, "setObject:forIndex:", v150, [kVOTEventCommandContinueSpeaking hash]);

  v151 = self->_commands;
  v152 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v151, "setObject:forIndex:", v152, [kVOTEventCommandToggleSpeaking hash]);

  v153 = self->_commands;
  v154 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadAll:"];
  -[AXIndexMap setObject:forIndex:](v153, "setObject:forIndex:", v154, [kVOTEventCommandReadAll hash]);

  v155 = self->_commands;
  v156 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadFromTop:"];
  -[AXIndexMap setObject:forIndex:](v155, "setObject:forIndex:", v156, [kVOTEventCommandReadFromTop hash]);

  v157 = self->_commands;
  v158 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadScreenSummary:"];
  -[AXIndexMap setObject:forIndex:](v157, "setObject:forIndex:", v158, [kVOTEventCommandReadScreenSummary hash]);

  if (AXRuntimeCheck_SupportsVoiceOverReadPrefixes())
  {
    v159 = self->_commands;
    v160 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadAll:"];
    -[AXIndexMap setObject:forIndex:](v159, "setObject:forIndex:", v160, [kVOTEventCommandReadAllPrefixes hash]);

    v161 = self->_commands;
    v162 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadFromTop:"];
    -[AXIndexMap setObject:forIndex:](v161, "setObject:forIndex:", v162, [kVOTEventCommandReadFromTopPrefixes hash]);
  }

  v163 = self->_commands;
  v164 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCopySpeechToClipboard:"];
  -[AXIndexMap setObject:forIndex:](v163, "setObject:forIndex:", v164, [kVOTEventCommandCopySpeechToClipboard hash]);

  v165 = self->_commands;
  v166 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformTapAutofill:"];
  -[AXIndexMap setObject:forIndex:](v165, "setObject:forIndex:", v166, [kVOTEventCommandTapAutofill hash]);

  v167 = self->_commands;
  v168 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputTextStyle:"];
  -[AXIndexMap setObject:forIndex:](v167, "setObject:forIndex:", v168, [kVOTEventCommandOutputTextStyle hash]);

  v169 = self->_commands;
  v170 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"handleSearchRotorUp:"];
  -[AXIndexMap setObject:forIndex:](v169, "setObject:forIndex:", v170, [kVOTEventCommandSearchRotorUp hash]);

  v171 = self->_commands;
  v172 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"handleSearchRotorDown:"];
  -[AXIndexMap setObject:forIndex:](v171, "setObject:forIndex:", v172, [kVOTEventCommandSearchRotorDown hash]);

  v173 = self->_commands;
  v174 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorLeft:"];
  -[AXIndexMap setObject:forIndex:](v173, "setObject:forIndex:", v174, [kVOTEventCommandSearchRotorLeft hash]);

  v175 = self->_commands;
  v176 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorRight:"];
  -[AXIndexMap setObject:forIndex:](v175, "setObject:forIndex:", v176, [kVOTEventCommandSearchRotorRight hash]);

  v177 = self->_commands;
  v178 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorEcho:"];
  -[AXIndexMap setObject:forIndex:](v177, "setObject:forIndex:", v178, [kVOTEventCommandSearchRotorEcho hash]);

  v179 = self->_commands;
  v180 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartTextSearch:"];
  -[AXIndexMap setObject:forIndex:](v179, "setObject:forIndex:", v180, [kVOTEventCommandStartTextSearch hash]);

  v181 = self->_commands;
  v182 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOngoingTextSearch:"];
  -[AXIndexMap setObject:forIndex:](v181, "setObject:forIndex:", v182, [kVOTEventCommandTextSearchForward hash]);

  v183 = self->_commands;
  v184 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOngoingTextSearch:"];
  -[AXIndexMap setObject:forIndex:](v183, "setObject:forIndex:", v184, [kVOTEventCommandTextSearchBackward hash]);

  v185 = self->_commands;
  v186 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleItemChooserSelection:"];
  -[AXIndexMap setObject:forIndex:](v185, "setObject:forIndex:", v186, [kVOTEventCommandItemChooser hash]);

  v187 = self->_commands;
  v188 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorSetMathPosition:"];
  -[AXIndexMap setObject:forIndex:](v187, "setObject:forIndex:", v188, [kVOTEventCommandSearchRotorSetMathPosition hash]);

  v189 = self->_commands;
  v190 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToLinkedUI:"];
  -[AXIndexMap setObject:forIndex:](v189, "setObject:forIndex:", v190, [kVOTEventCommandMoveToLinkedUI hash]);

  v191 = self->_commands;
  v192 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToNativeFocusedElement:"];
  -[AXIndexMap setObject:forIndex:](v191, "setObject:forIndex:", v192, [kVOTEventCommandMoveToNativeFocusedElement hash]);

  v193 = self->_commands;
  v194 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v193, "setObject:forIndex:", v194, [kVOTEventCommandNextGraphic hash]);

  v195 = self->_commands;
  v196 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v195, "setObject:forIndex:", v196, [kVOTEventCommandPreviousGraphic hash]);

  v197 = self->_commands;
  v198 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v197, "setObject:forIndex:", v198, [kVOTEventCommandNextHeading hash]);

  v199 = self->_commands;
  v200 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v199, "setObject:forIndex:", v200, [kVOTEventCommandPreviousHeading hash]);

  v201 = self->_commands;
  v202 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v201, "setObject:forIndex:", v202, [kVOTEventCommandNextTable hash]);

  v203 = self->_commands;
  v204 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v203, "setObject:forIndex:", v204, [kVOTEventCommandPreviousTable hash]);

  v205 = self->_commands;
  v206 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v205, "setObject:forIndex:", v206, [kVOTEventCommandNextList hash]);

  v207 = self->_commands;
  v208 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v207, "setObject:forIndex:", v208, [kVOTEventCommandPreviousList hash]);

  v209 = self->_commands;
  v210 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v209, "setObject:forIndex:", v210, [kVOTEventCommandNextControl hash]);

  v211 = self->_commands;
  v212 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v211, "setObject:forIndex:", v212, [kVOTEventCommandPreviousControl hash]);

  v213 = self->_commands;
  v214 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v213, "setObject:forIndex:", v214, [kVOTEventCommandNextRadioGroup hash]);

  v215 = self->_commands;
  v216 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v215, "setObject:forIndex:", v216, [kVOTEventCommandPreviousRadioGroup hash]);

  v217 = self->_commands;
  v218 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v217, "setObject:forIndex:", v218, [kVOTEventCommandNextCheckbox hash]);

  v219 = self->_commands;
  v220 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v219, "setObject:forIndex:", v220, [kVOTEventCommandPreviousCheckbox hash]);

  v221 = self->_commands;
  v222 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v221, "setObject:forIndex:", v222, [kVOTEventCommandNextLink hash]);

  v223 = self->_commands;
  v224 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v223, "setObject:forIndex:", v224, [kVOTEventCommandPreviousLink hash]);

  v225 = self->_commands;
  v226 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v225, "setObject:forIndex:", v226, [kVOTEventCommandNextVisitedLink hash]);

  v227 = self->_commands;
  v228 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v227, "setObject:forIndex:", v228, [kVOTEventCommandPreviousVisitedLink hash]);

  v229 = self->_commands;
  v230 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v229, "setObject:forIndex:", v230, [kVOTEventCommandNextSameHeading hash]);

  v231 = self->_commands;
  v232 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v231, "setObject:forIndex:", v232, [kVOTEventCommandPreviousSameHeading hash]);

  v233 = self->_commands;
  v234 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v233, "setObject:forIndex:", v234, [kVOTEventCommandNextBoldText hash]);

  v235 = self->_commands;
  v236 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v235, "setObject:forIndex:", v236, [kVOTEventCommandPreviousBoldText hash]);

  v237 = self->_commands;
  v238 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v237, "setObject:forIndex:", v238, [kVOTEventCommandNextItalicText hash]);

  v239 = self->_commands;
  v240 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v239, "setObject:forIndex:", v240, [kVOTEventCommandPreviousItalicText hash]);

  v241 = self->_commands;
  v242 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v241, "setObject:forIndex:", v242, [kVOTEventCommandNextUnderlineText hash]);

  v243 = self->_commands;
  v244 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v243, "setObject:forIndex:", v244, [kVOTEventCommandPreviousUnderlineText hash]);

  v245 = self->_commands;
  v246 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v245, "setObject:forIndex:", v246, [kVOTEventCommandNextMisspelledWord hash]);

  v247 = self->_commands;
  v248 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v247, "setObject:forIndex:", v248, [kVOTEventCommandPreviousMisspelledWord hash]);

  v249 = self->_commands;
  v250 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v249, "setObject:forIndex:", v250, [kVOTEventCommandNextPlainText hash]);

  v251 = self->_commands;
  v252 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v251, "setObject:forIndex:", v252, [kVOTEventCommandPreviousPlainText hash]);

  v253 = self->_commands;
  v254 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v253, "setObject:forIndex:", v254, [kVOTEventCommandNextColorChange hash]);

  v255 = self->_commands;
  v256 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v255, "setObject:forIndex:", v256, [kVOTEventCommandPreviousColorChange hash]);

  v257 = self->_commands;
  v258 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v257, "setObject:forIndex:", v258, [kVOTEventCommandNextFontChange hash]);

  v259 = self->_commands;
  v260 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v259, "setObject:forIndex:", v260, [kVOTEventCommandPreviousFontChange hash]);

  v261 = self->_commands;
  v262 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v261, "setObject:forIndex:", v262, [kVOTEventCommandNextStyleChange hash]);

  v263 = self->_commands;
  v264 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v263, "setObject:forIndex:", v264, [kVOTEventCommandPreviousStyleChange hash]);

  v265 = self->_commands;
  v266 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v265, "setObject:forIndex:", v266, [kVOTEventCommandNextSameElement hash]);

  v267 = self->_commands;
  v268 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v267, "setObject:forIndex:", v268, [kVOTEventCommandPreviousSameElement hash]);

  v269 = self->_commands;
  v270 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v269, "setObject:forIndex:", v270, [kVOTEventCommandNextDifferentElement hash]);

  v271 = self->_commands;
  v272 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v271, "setObject:forIndex:", v272, [kVOTEventCommandPreviousDifferentElement hash]);

  v273 = self->_commands;
  v274 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v273, "setObject:forIndex:", v274, [kVOTEventCommandNextFrame hash]);

  v275 = self->_commands;
  v276 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v275, "setObject:forIndex:", v276, [kVOTEventCommandPreviousFrame hash]);

  v277 = self->_commands;
  v278 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleColumnMovement:"];
  -[AXIndexMap setObject:forIndex:](v277, "setObject:forIndex:", v278, [kVOTEventCommandNextColumn hash]);

  v279 = self->_commands;
  v280 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleColumnMovement:"];
  -[AXIndexMap setObject:forIndex:](v279, "setObject:forIndex:", v280, [kVOTEventCommandPreviousColumn hash]);

  v281 = self->_commands;
  v282 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v281, "setObject:forIndex:", v282, [kVOTEventCommandNextBlockquote hash]);

  v283 = self->_commands;
  v284 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v283, "setObject:forIndex:", v284, [kVOTEventCommandPreviousBlockquote hash]);

  v285 = self->_commands;
  v286 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v285, "setObject:forIndex:", v286, [kVOTEventCommandNextSameBlockquote hash]);

  v287 = self->_commands;
  v288 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v287, "setObject:forIndex:", v288, [kVOTEventCommandPreviousSameBlockquote hash]);

  v289 = self->_commands;
  v290 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimpleTap:"];
  -[AXIndexMap setObject:forIndex:](v289, "setObject:forIndex:", v290, [kVOTEventCommandSimpleTap hash]);

  v291 = self->_commands;
  v292 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDoubleTap:"];
  -[AXIndexMap setObject:forIndex:](v291, "setObject:forIndex:", v292, [kVOTEventCommandDoubleTap hash]);

  v293 = self->_commands;
  v294 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTripleTap:"];
  -[AXIndexMap setObject:forIndex:](v293, "setObject:forIndex:", v294, [kVOTEventCommandTripleTap hash]);

  v295 = self->_commands;
  v296 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimpleTap:"];
  -[AXIndexMap setObject:forIndex:](v295, "setObject:forIndex:", v296, [kVOTEventCommandSplitTapTap hash]);

  v297 = self->_commands;
  v298 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartStopToggle:"];
  -[AXIndexMap setObject:forIndex:](v297, "setObject:forIndex:", v298, [kVOTEventCommandStartStopToggle hash]);

  v299 = self->_commands;
  v300 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLabelElement:"];
  -[AXIndexMap setObject:forIndex:](v299, "setObject:forIndex:", v300, [kVOTEventCommandLabelElement hash]);

  v301 = self->_commands;
  v302 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMonitorElement:"];
  -[AXIndexMap setObject:forIndex:](v301, "setObject:forIndex:", v302, [kVOTEventCommandMonitorElement hash]);

  v303 = self->_commands;
  v304 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleCrownNavigation:"];
  -[AXIndexMap setObject:forIndex:](v303, "setObject:forIndex:", v304, [kVOTEventCommandToggleCrownNaviation hash]);

  v305 = self->_commands;
  v306 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimulatedForceTouchEvent:"];
  -[AXIndexMap setObject:forIndex:](v305, "setObject:forIndex:", v306, [kVOTEventCommandSimulatedForceTouch hash]);

  v307 = self->_commands;
  v308 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleChangeAudioDuckingMode:"];
  -[AXIndexMap setObject:forIndex:](v307, "setObject:forIndex:", v308, [kVOTEventCommandChangeAudioDuckingMode hash]);

  v309 = self->_commands;
  v310 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomaticAppAccessibilityToggle:"];
  -[AXIndexMap setObject:forIndex:](v309, "setObject:forIndex:", v310, [kVOTEventCommandToggleAutomaticAccessibility hash]);

  v311 = self->_commands;
  v312 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleLiveRegionCommand:"];
  -[AXIndexMap setObject:forIndex:](v311, "setObject:forIndex:", v312, [kVOTEventCommandToggleLiveRegions hash]);

  v313 = self->_commands;
  v314 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSettingsHUD:"];
  -[AXIndexMap setObject:forIndex:](v313, "setObject:forIndex:", v314, [kVOTEventCommandToggleSettingsHUD hash]);

  v315 = self->_commands;
  v316 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWatchWakeTap:"];
  -[AXIndexMap setObject:forIndex:](v315, "setObject:forIndex:", v316, [kVOTEventCommandWatchWakeTap hash]);

  v317 = self->_commands;
  v318 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWatchWakeDoubleTap:"];
  -[AXIndexMap setObject:forIndex:](v317, "setObject:forIndex:", v318, [kVOTEventCommandWatchWakeDoubleTap hash]);

  v319 = self->_commands;
  v320 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWatchWakeTripleTap:"];
  -[AXIndexMap setObject:forIndex:](v319, "setObject:forIndex:", v320, [kVOTEventCommandWatchWakeTripleTap hash]);

  v321 = self->_commands;
  v322 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateHomeButton:"];
  -[AXIndexMap setObject:forIndex:](v321, "setObject:forIndex:", v322, [kVOTEventCommandActivateHomeButton hash]);

  v323 = self->_commands;
  v324 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStingPress:"];
  -[AXIndexMap setObject:forIndex:](v323, "setObject:forIndex:", v324, [kVOTEventCommandStingPress hash]);

  v325 = self->_commands;
  v326 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStingKeycordPress:"];
  -[AXIndexMap setObject:forIndex:](v325, "setObject:forIndex:", v326, [kVOTEventCommandStingKeycordPress hash]);

  v327 = self->_commands;
  v328 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchUpEvent:"];
  -[AXIndexMap setObject:forIndex:](v327, "setObject:forIndex:", v328, [kVOTEventCommandTouchUp hash]);

  v329 = self->_commands;
  v330 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchDownEvent:"];
  -[AXIndexMap setObject:forIndex:](v329, "setObject:forIndex:", v330, [kVOTEventCommandTouchDown hash]);

  v331 = self->_commands;
  v332 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchMoveEvent:"];
  -[AXIndexMap setObject:forIndex:](v331, "setObject:forIndex:", v332, [kVOTEventCommandTouchMove hash]);

  v333 = self->_commands;
  v334 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchCancelEvent:"];
  -[AXIndexMap setObject:forIndex:](v333, "setObject:forIndex:", v334, [kVOTEventCommandTouchCancel hash]);

  v335 = self->_commands;
  v336 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadWord:"];
  -[AXIndexMap setObject:forIndex:](v335, "setObject:forIndex:", v336, [kVOTEventCommandReadWord hash]);

  v337 = self->_commands;
  v338 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadLine:"];
  -[AXIndexMap setObject:forIndex:](v337, "setObject:forIndex:", v338, [kVOTEventCommandReadLine hash]);

  v339 = self->_commands;
  v340 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSingleLetterQuickNav:"];
  -[AXIndexMap setObject:forIndex:](v339, "setObject:forIndex:", v340, [kVOTEventCommandToggleSingleLetterQuickNav hash]);

  v341 = self->_commands;
  v342 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleVoiceOverModifierKeyLock:"];
  -[AXIndexMap setObject:forIndex:](v341, "setObject:forIndex:", v342, [kVOTEventCommandLockVOKeyboardKeys hash]);

  v343 = self->_commands;
  v344 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputLineCount:"];
  -[AXIndexMap setObject:forIndex:](v343, "setObject:forIndex:", v344, [kVOTEventCommandOutputLineCount hash]);

  v345 = self->_commands;
  v346 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadURL:"];
  -[AXIndexMap setObject:forIndex:](v345, "setObject:forIndex:", v346, [kVOTEventCommandReadURL hash]);

  v347 = self->_commands;
  v348 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadItemHint:"];
  -[AXIndexMap setObject:forIndex:](v347, "setObject:forIndex:", v348, [kVOTEventCommandReadHint hash]);

  v349 = self->_commands;
  v350 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v349, "setObject:forIndex:", v350, [kVOTEventCommandScrollLeftPage hash]);

  v351 = self->_commands;
  v352 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v351, "setObject:forIndex:", v352, [kVOTEventCommandScrollRightPage hash]);

  v353 = self->_commands;
  v354 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v353, "setObject:forIndex:", v354, [kVOTEventCommandScrollUpPage hash]);

  v355 = self->_commands;
  v356 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v355, "setObject:forIndex:", v356, [kVOTEventCommandScrollDownPage hash]);

  v357 = self->_commands;
  v358 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollToTop:"];
  -[AXIndexMap setObject:forIndex:](v357, "setObject:forIndex:", v358, [kVOTEventCommandScrollToTop hash]);

  v359 = self->_commands;
  v360 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollToBottom:"];
  -[AXIndexMap setObject:forIndex:](v359, "setObject:forIndex:", v360, [kVOTEventCommandScrollToBottom hash]);

  v361 = self->_commands;
  v362 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputElementSummary:"];
  -[AXIndexMap setObject:forIndex:](v361, "setObject:forIndex:", v362, [kVOTEventCommandOutputElementSummary hash]);

  v363 = self->_commands;
  v364 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputComputerVisionAnalysisSummary:"];
  -[AXIndexMap setObject:forIndex:](v363, "setObject:forIndex:", v364, [kVOTEventCommandOutputElementCVAnalysisSummary hash]);

  v365 = self->_commands;
  v366 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputFocusedElementSummary:"];
  -[AXIndexMap setObject:forIndex:](v365, "setObject:forIndex:", v366, [kVOTEventCommandOutputFocusedElementSummary hash]);

  v367 = self->_commands;
  v368 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSelectedTextOutput:"];
  -[AXIndexMap setObject:forIndex:](v367, "setObject:forIndex:", v368, [kVOTEventCommandOutputSelectedInformation hash]);

  v369 = self->_commands;
  v370 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputFocusedElementSummary:"];
  -[AXIndexMap setObject:forIndex:](v369, "setObject:forIndex:", v370, [kVOTEventCommandOutputDetailedFocusedElementSummary hash]);

  v371 = self->_commands;
  v372 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollToPoint:"];
  -[AXIndexMap setObject:forIndex:](v371, "setObject:forIndex:", v372, [kVOTEventCommandScrollToPoint hash]);

  v373 = self->_commands;
  v374 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAppSwitch:"];
  -[AXIndexMap setObject:forIndex:](v373, "setObject:forIndex:", v374, [kVOTEventAppSwitchNext hash]);

  v375 = self->_commands;
  v376 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAppSwitch:"];
  -[AXIndexMap setObject:forIndex:](v375, "setObject:forIndex:", v376, [kVOTEventAppSwitchPrevious hash]);

  v377 = self->_commands;
  v378 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSingleLetterSearch:"];
  -[AXIndexMap setObject:forIndex:](v377, "setObject:forIndex:", v378, [kVOTEventCommandSingleLetterSearch hash]);

  v379 = self->_commands;
  v380 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeRight:"];
  -[AXIndexMap setObject:forIndex:](v379, "setObject:forIndex:", v380, [kVOTEventCommandEdgeRight hash]);

  v381 = self->_commands;
  v382 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeLeft:"];
  -[AXIndexMap setObject:forIndex:](v381, "setObject:forIndex:", v382, [kVOTEventCommandEdgeLeft hash]);

  v383 = self->_commands;
  v384 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeTop:"];
  -[AXIndexMap setObject:forIndex:](v383, "setObject:forIndex:", v384, [kVOTEventCommandEdgeTop hash]);

  v385 = self->_commands;
  v386 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeBottom:"];
  -[AXIndexMap setObject:forIndex:](v385, "setObject:forIndex:", v386, [kVOTEventCommandEdgeBottom hash]);

  v387 = self->_commands;
  v388 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBottomEdgePanDown:"];
  -[AXIndexMap setObject:forIndex:](v387, "setObject:forIndex:", v388, [kVOTEventCommandBottomEdgePanDown hash]);

  v389 = self->_commands;
  v390 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBottomEdgePanShort:"];
  -[AXIndexMap setObject:forIndex:](v389, "setObject:forIndex:", v390, [kVOTEventCommandBottomEdgePanShort hash]);

  v391 = self->_commands;
  v392 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBottomEdgePanLong:"];
  -[AXIndexMap setObject:forIndex:](v391, "setObject:forIndex:", v392, [kVOTEventCommandBottomEdgePanLong hash]);

  v393 = self->_commands;
  v394 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTopEdgePanDown:"];
  -[AXIndexMap setObject:forIndex:](v393, "setObject:forIndex:", v394, [kVOTEventCommandTopEdgePanDown hash]);

  v395 = self->_commands;
  v396 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTopEdgePanShort:"];
  -[AXIndexMap setObject:forIndex:](v395, "setObject:forIndex:", v396, [kVOTEventCommandTopEdgePanShort hash]);

  v397 = self->_commands;
  v398 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTopEdgePanLong:"];
  -[AXIndexMap setObject:forIndex:](v397, "setObject:forIndex:", v398, [kVOTEventCommandTopEdgePanLong hash]);

  v399 = self->_commands;
  v400 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToLeftElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v399, "setObject:forIndex:", v400, [kVOTEventCommandLeftElementCommunity hash]);

  v401 = self->_commands;
  v402 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToRightElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v401, "setObject:forIndex:", v402, [kVOTEventCommandRightElementCommunity hash]);

  v403 = self->_commands;
  v404 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToNextElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v403, "setObject:forIndex:", v404, [kVOTEventCommandNextElementCommunity hash]);

  v405 = self->_commands;
  v406 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToPreviousElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v405, "setObject:forIndex:", v406, [kVOTEventCommandPreviousElementCommunity hash]);

  v407 = self->_commands;
  v408 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSideApp:"];
  -[AXIndexMap setObject:forIndex:](v407, "setObject:forIndex:", v408, [kVOTEventCommandShowSideApp hash]);

  v409 = self->_commands;
  v410 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOpenVoiceOverOptions:"];
  -[AXIndexMap setObject:forIndex:](v409, "setObject:forIndex:", v410, [kVOTEventCommandOpenVoiceOverSettings hash]);

  v411 = self->_commands;
  v412 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleNextKeyboardLanguage:"];
  -[AXIndexMap setObject:forIndex:](v411, "setObject:forIndex:", v412, [kVOTEventCommandNextKeyboardLanguage hash]);

  v413 = self->_commands;
  v414 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechVoiceChange:"];
  -[AXIndexMap setObject:forIndex:](v413, "setObject:forIndex:", v414, [kVOTEventCommandSpeechNextVoice hash]);

  v415 = self->_commands;
  v416 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechVoiceChange:"];
  -[AXIndexMap setObject:forIndex:](v415, "setObject:forIndex:", v416, [kVOTEventCommandSpeechPreviousVoice hash]);

  if (AXIsInternalInstall())
  {
    v417 = self->_commands;
    v418 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSendCancelEvent:"];
    -[AXIndexMap setObject:forIndex:](v417, "setObject:forIndex:", v418, [@"VOTEventCommandSendCancel" hash]);
  }

  v419 = self->_commands;
  v420 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSiriShortcutEvent:"];
  -[AXIndexMap setObject:forIndex:](v419, "setObject:forIndex:", v420, [kVOTEventCommandRunSiriShortcut hash]);

  v421 = self->_commands;
  v422 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleUserSelection:"];
  -[AXIndexMap setObject:forIndex:](v421, "setObject:forIndex:", v422, [kVOTEventCommandSelectRight hash]);

  v423 = self->_commands;
  v424 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleUserSelection:"];
  -[AXIndexMap setObject:forIndex:](v423, "setObject:forIndex:", v424, [kVOTEventCommandSelectLeft hash]);

  v425 = self->_commands;
  v426 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAdjustTextSelectionSegmentType:"];
  -[AXIndexMap setObject:forIndex:](v425, "setObject:forIndex:", v426, [kVOTEventCommandNextTextSegmentType hash]);

  v427 = self->_commands;
  v428 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAdjustTextSelectionSegmentType:"];
  -[AXIndexMap setObject:forIndex:](v427, "setObject:forIndex:", v428, [kVOTEventCommandPreviousTextSegmentType hash]);

  v429 = self->_commands;
  v430 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartStopTextSelection:"];
  -[AXIndexMap setObject:forIndex:](v429, "setObject:forIndex:", v430, [kVOTEventCommandStartStopTextSelection hash]);

  v431 = self->_commands;
  v432 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleMute:"];
  -[AXIndexMap setObject:forIndex:](v431, "setObject:forIndex:", v432, [kVOTEventCommandToggleMute hash]);

  v433 = self->_commands;
  v434 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleScreenCurtain:"];
  -[AXIndexMap setObject:forIndex:](v433, "setObject:forIndex:", v434, [kVOTEventCommandToggleScreenCurtain hash]);

  v435 = self->_commands;
  v436 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSoundCurtain:"];
  -[AXIndexMap setObject:forIndex:](v435, "setObject:forIndex:", v436, [kVOTEventCommandToggleSoundCurtain hash]);

  v437 = self->_commands;
  v438 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleCaptionPanel:"];
  -[AXIndexMap setObject:forIndex:](v437, "setObject:forIndex:", v438, [kVOTEventCommandToggleCaptionPanel hash]);

  v439 = self->_commands;
  v440 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleIgnoreTrackpad:"];
  -[AXIndexMap setObject:forIndex:](v439, "setObject:forIndex:", v440, [kVOTEventCommandToggleIgnoreTrackpad hash]);

  v441 = self->_commands;
  v442 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDescribeImage:"];
  -[AXIndexMap setObject:forIndex:](v441, "setObject:forIndex:", v442, [kVOTEventCommandDescribeImage hash]);

  v443 = self->_commands;
  v444 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLaunchDetectionMode:"];
  -[AXIndexMap setObject:forIndex:](v443, "setObject:forIndex:", v444, [kVOTEventCommandLaunchDetectionMode hash]);

  v445 = self->_commands;
  v446 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleRotationCapability:"];
  -[AXIndexMap setObject:forIndex:](v445, "setObject:forIndex:", v446, [kVOTEventCommandToggleRotationCapability hash]);

  v447 = self->_commands;
  v448 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleQuickNav:"];
  -[AXIndexMap setObject:forIndex:](v447, "setObject:forIndex:", v448, [kVOTEventCommandToggleQuickNav hash]);

  v449 = self->_commands;
  v450 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAnnounceQuickNav:"];
  -[AXIndexMap setObject:forIndex:](v449, "setObject:forIndex:", v450, [kVOTEventCommandAnnounceQuickNav hash]);

  v451 = self->_commands;
  v452 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEscape:"];
  -[AXIndexMap setObject:forIndex:](v451, "setObject:forIndex:", v452, [kVOTEventCommandEscape hash]);

  v453 = self->_commands;
  v454 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleShowDetectionUIWithMagnifierService:"];
  -[AXIndexMap setObject:forIndex:](v453, "setObject:forIndex:", v454, [kVOTEventCommandShowDetectionUIWithMagnifierService hash]);

  v455 = self->_commands;
  v456 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleHideDetectionUIWithMagnifierService:"];
  -[AXIndexMap setObject:forIndex:](v455, "setObject:forIndex:", v456, [kVOTEventCommandHideDetectionUIWithMagnifierService hash]);

  v457 = self->_commands;
  v458 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDescribeCameraScene:"];
  -[AXIndexMap setObject:forIndex:](v457, "setObject:forIndex:", v458, [kVOTEventCommandDescribeCameraScene hash]);

  v459 = self->_commands;
  v460 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTogglePerkinsKeyboardInput:"];
  -[AXIndexMap setObject:forIndex:](v459, "setObject:forIndex:", v460, [kVOTEventCommandTogglePerkinsKeyboardInput hash]);

  v461 = self->_commands;
  v462 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleKeyboardBraileUI:"];
  -[AXIndexMap setObject:forIndex:](v461, "setObject:forIndex:", v462, [kVOTEventCommandToggleKeyboardBrailleUI hash]);

  v463 = self->_commands;
  v464 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v463, "setObject:forIndex:", v464, [kVOTEventCommandToggleBrailleUI hash]);

  v465 = self->_commands;
  v466 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v465, "setObject:forIndex:", v466, [kVOTEventCommandActivateBrailleUILaunchApp hash]);

  v467 = self->_commands;
  v468 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v467, "setObject:forIndex:", v468, [kVOTEventCommandActivateBrailleUIChooseItem hash]);

  v469 = self->_commands;
  v470 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v469, "setObject:forIndex:", v470, [kVOTEventCommandActivateBrailleUIBrailleNotes hash]);

  v471 = self->_commands;
  v472 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v471, "setObject:forIndex:", v472, [kVOTEventCommandActivateBrailleUIFinder hash]);

  v473 = self->_commands;
  v474 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v473, "setObject:forIndex:", v474, [kVOTEventCommandActivateBrailleUINemethCalculator hash]);

  v475 = self->_commands;
  v476 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v475, "setObject:forIndex:", v476, [kVOTEventCommandActivateBrailleUILiveCaptions hash]);

  v477 = self->_commands;
  v478 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v477, "setObject:forIndex:", v478, [kVOTEventCommandActivateBrailleUIDateTime hash]);

  v479 = self->_commands;
  v480 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleScreenInput:"];
  -[AXIndexMap setObject:forIndex:](v479, "setObject:forIndex:", v480, [kVOTEventCommandActivateBrailleScreenInput hash]);

  v481 = self->_commands;
  v482 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleScreenInputCommand:"];
  -[AXIndexMap setObject:forIndex:](v481, "setObject:forIndex:", v482, [kVOTEventCommandActivateBrailleScreenInputCommand hash]);

  v483 = self->_commands;
  v484 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDeactivateBrailleScreenInput:"];
  -[AXIndexMap setObject:forIndex:](v483, "setObject:forIndex:", v484, [kVOTEventCommandBSIExit hash]);

  v485 = self->_commands;
  v486 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBSIPreviousRotor:"];
  -[AXIndexMap setObject:forIndex:](v485, "setObject:forIndex:", v486, [kVOTEventCommandBSIPreviousRotor hash]);

  v487 = self->_commands;
  v488 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBSINextRotor:"];
  -[AXIndexMap setObject:forIndex:](v487, "setObject:forIndex:", v488, [kVOTEventCommandBSINextRotor hash]);

  v489 = self->_commands;
  v490 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDeactivateBrailleScreenInput:"];
  -[AXIndexMap setObject:forIndex:](v489, "setObject:forIndex:", v490, [kVOTEventCommandBSIEscape hash]);

  v491 = self->_commands;
  v492 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleScreenInputPreferringSingleHand:"];
  -[AXIndexMap setObject:forIndex:](v491, "setObject:forIndex:", v492, [kVOTEventCommandActivateBrailleScreenInputPreferringSingleHand hash]);

  v493 = self->_commands;
  v494 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReconnectBrailleDisplays:"];
  -[AXIndexMap setObject:forIndex:](v493, "setObject:forIndex:", v494, [kVOTEventCommandReconnectBrailleDisplays hash]);

  v495 = self->_commands;
  v496 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v495, "setObject:forIndex:", v496, [kVOTEventCommandBraillePanLeft hash]);

  v497 = self->_commands;
  v498 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v497, "setObject:forIndex:", v498, [kVOTEventCommandBraillePanRight hash]);

  v499 = self->_commands;
  v500 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v499, "setObject:forIndex:", v500, [kVOTEventCommandBraillePanBeginning hash]);

  v501 = self->_commands;
  v502 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v501, "setObject:forIndex:", v502, [kVOTEventCommandBraillePanEnd hash]);

  v503 = self->_commands;
  v504 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBraille2DInvert:"];
  -[AXIndexMap setObject:forIndex:](v503, "setObject:forIndex:", v504, [kVOTEventCommandBraille2DInvert hash]);

  v505 = self->_commands;
  v506 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v505, "setObject:forIndex:", v506, [kVOTEventCommandBrailleNextInputTable hash]);

  v507 = self->_commands;
  v508 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v507, "setObject:forIndex:", v508, [kVOTEventCommandBrailleNextOutputTable hash]);

  v509 = self->_commands;
  v510 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v509, "setObject:forIndex:", v510, [kVOTEventCommandBrailleAnnouncementModeOn hash]);

  v511 = self->_commands;
  v512 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v511, "setObject:forIndex:", v512, [kVOTEventCommandBrailleRouter hash]);

  v513 = self->_commands;
  v514 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v513, "setObject:forIndex:", v514, [kVOTEventCommandBrailleStatusRouter hash]);

  v515 = self->_commands;
  v516 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v515, "setObject:forIndex:", v516, [kVOTEventCommandBrailleTranslate hash]);

  v517 = self->_commands;
  v518 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleRefreshEvent:"];
  -[AXIndexMap setObject:forIndex:](v517, "setObject:forIndex:", v518, [kVOTEventCommandBrailleRefreshBrailleLine hash]);

  v519 = self->_commands;
  v520 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleWordWrapToggleEvent:"];
  -[AXIndexMap setObject:forIndex:](v519, "setObject:forIndex:", v520, [kVOTEventCommandBrailleToggleWordWrap hash]);

  v521 = self->_commands;
  v522 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEnableAutoAdvance:"];
  -[AXIndexMap setObject:forIndex:](v521, "setObject:forIndex:", v522, [kVOTEventCommandBrailleEnableAutoAdvance hash]);

  v523 = self->_commands;
  v524 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleIncreaseAutoAdvanceSpeed:"];
  -[AXIndexMap setObject:forIndex:](v523, "setObject:forIndex:", v524, [kVOTEventCommandBrailleIncreaseAutoAdvanceSpeed hash]);

  v525 = self->_commands;
  v526 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleDecreaseAutoAdvanceSpeed:"];
  -[AXIndexMap setObject:forIndex:](v525, "setObject:forIndex:", v526, [kVOTEventCommandBrailleDecreaseAutoAdvanceSpeed hash]);

  v527 = self->_commands;
  v528 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v527, "setObject:forIndex:", v528, [kVOTEventCommandLeftArrow hash]);

  v529 = self->_commands;
  v530 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v529, "setObject:forIndex:", v530, [kVOTEventCommandRightArrow hash]);

  v531 = self->_commands;
  v532 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v531, "setObject:forIndex:", v532, [kVOTEventCommandUpArrow hash]);

  v533 = self->_commands;
  v534 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v533, "setObject:forIndex:", v534, [kVOTEventCommandDownArrow hash]);

  v535 = self->_commands;
  v536 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v535, "setObject:forIndex:", v536, [kVOTEventCommandDelete hash]);

  v537 = self->_commands;
  v538 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v537, "setObject:forIndex:", v538, [kVOTEventCommandReturn hash]);

  v539 = self->_commands;
  v540 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v539, "setObject:forIndex:", v540, [kVOTEventCommandTab hash]);

  v541 = self->_commands;
  v542 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v541, "setObject:forIndex:", v542, [kVOTEventCommandShiftTab hash]);

  v543 = self->_commands;
  v544 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v543, "setObject:forIndex:", v544, [kVOTEventCommandCut hash]);

  v545 = self->_commands;
  v546 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v545, "setObject:forIndex:", v546, [kVOTEventCommandCopy hash]);

  v547 = self->_commands;
  v548 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v547, "setObject:forIndex:", v548, [kVOTEventCommandPaste hash]);

  v549 = self->_commands;
  v550 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v549, "setObject:forIndex:", v550, [kVOTEventCommandSelectAll hash]);

  v551 = self->_commands;
  v552 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v551, "setObject:forIndex:", v552, [kVOTEventCommandUndo hash]);

  v553 = self->_commands;
  v554 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v553, "setObject:forIndex:", v554, [kVOTEventCommandRedo hash]);

  v555 = self->_commands;
  v556 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformVolumeUpButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v555, "setObject:forIndex:", v556, [kVOTEventCommandVolumeUpButtonPress hash]);

  v557 = self->_commands;
  v558 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformVolumeDownButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v557, "setObject:forIndex:", v558, [kVOTEventCommandVolumeDownButtonPress hash]);

  v559 = self->_commands;
  v560 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformEjectButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v559, "setObject:forIndex:", v560, [kVOTEventCommandEjectButtonPress hash]);

  v561 = self->_commands;
  v562 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartHelpMode:"];
  -[AXIndexMap setObject:forIndex:](v561, "setObject:forIndex:", v562, [kVOTEventCommandStartHelp hash]);

  v563 = self->_commands;
  v564 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorChange:"];
  -[AXIndexMap setObject:forIndex:](v563, "setObject:forIndex:", v564, [kVOTEventCommandSpeechRotorNext hash]);

  v565 = self->_commands;
  v566 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorChange:"];
  -[AXIndexMap setObject:forIndex:](v565, "setObject:forIndex:", v566, [kVOTEventCommandSpeechRotorPrevious hash]);

  v567 = self->_commands;
  v568 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorValueChange:"];
  -[AXIndexMap setObject:forIndex:](v567, "setObject:forIndex:", v568, [kVOTEventCommandSpeechRotorIncrementValue hash]);

  v569 = self->_commands;
  v570 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorValueChange:"];
  -[AXIndexMap setObject:forIndex:](v569, "setObject:forIndex:", v570, [kVOTEventCommandSpeechRotorDecrementValue hash]);
}

- (BOOL)eventIsSystemEvent:(id)event
{
  v3 = qword_1001FEC50;
  eventCopy = event;
  if (v3 != -1)
  {
    sub_10012A65C();
  }

  v5 = qword_1001FEC48;
  command = [eventCopy command];

  v7 = [v5 containsObject:command];
  return v7;
}

- (BOOL)isTutorialActive
{
  tutorialPage = [(VOTElementManager *)self tutorialPage];
  tutorialRestrictedCommands = [(VOTElementManager *)self tutorialRestrictedCommands];
  _currentElement = [(VOTElementManager *)self _currentElement];
  application = [_currentElement application];
  bundleIdentifier = [application bundleIdentifier];

  v8 = [bundleIdentifier isEqualToString:@"com.apple.AXUIViewService"] && (tutorialPage | tutorialRestrictedCommands || -[VOTElementManager tutorialListeningForGestureNotifications](self, "tutorialListeningForGestureNotifications"));
  return v8;
}

- (BOOL)shouldTutorialIgnoreCommand:(id)command
{
  commandCopy = command;
  tutorialActiveRestrictionType = [(VOTElementManager *)self tutorialActiveRestrictionType];
  if (!tutorialActiveRestrictionType)
  {
    goto LABEL_5;
  }

  if (tutorialActiveRestrictionType != 2)
  {
    if (tutorialActiveRestrictionType != 1)
    {
      goto LABEL_5;
    }

    tutorialRestrictedCommands = [(VOTElementManager *)self tutorialRestrictedCommands];
    v7 = [tutorialRestrictedCommands containsObject:commandCopy];

    if ((v7 & 1) == 0)
    {
      goto LABEL_5;
    }

LABEL_7:
    v8 = 1;
    goto LABEL_8;
  }

  tutorialRestrictedCommands2 = [(VOTElementManager *)self tutorialRestrictedCommands];
  v10 = [tutorialRestrictedCommands2 containsObject:commandCopy];

  if (!v10)
  {
    goto LABEL_7;
  }

LABEL_5:
  v8 = 0;
LABEL_8:

  return v8;
}

- (void)tutorialSetRecognizedGesture:(id)gesture
{
  gestureCopy = gesture;
  v7 = gestureCopy;
  if (qword_1001FEC60 == -1)
  {
    v5 = gestureCopy;
  }

  else
  {
    sub_10012A670();
    v5 = v7;
  }

  if ([qword_1001FEC58 containsObject:v5])
  {
    [(VOTElementManager *)self setTutorialRecognizedGesture:v7];
    DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
    CFNotificationCenterPostNotification(DarwinNotifyCenter, kAXSVoiceOverTouchTutorialRecognizedGestureNotification, 0, 0, 1u);
  }
}

- (void)toggleDetectionMode
{
  currentRotorDetectionMode = [VOTSharedWorkspace currentRotorDetectionMode];
  v13 = [NSNumber numberWithUnsignedInt:currentRotorDetectionMode];
  v3 = +[AXSettings sharedInstance];
  enabledLiveRecognitionModes = [v3 enabledLiveRecognitionModes];
  v5 = [enabledLiveRecognitionModes mutableCopy];

  if ([v5 containsObject:v13])
  {
    [v5 removeObject:v13];
    v6 = @"element.off.text";
  }

  else
  {
    [v5 addObject:v13];
    v6 = @"element.on.text";
  }

  v7 = off_1001FDDD0;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v9 = sub_1000516CC(v7, v6, 0, selectedLanguage);
  v10 = sub_1000095FC(v9, 0, 0);

  if (currentRotorDetectionMode <= 2)
  {
    if (currentRotorDetectionMode)
    {
      if (currentRotorDetectionMode == 1)
      {
        v11 = +[VOTMagnifierService shared];
        [v11 toggleDoorDetection];
      }

      else
      {
        if (currentRotorDetectionMode != 2)
        {
          goto LABEL_20;
        }

        v11 = +[VOTMagnifierService shared];
        [v11 toggleImageDescriptions];
      }
    }

    else
    {
      v11 = +[VOTMagnifierService shared];
      [v11 togglePeopleDetection];
    }
  }

  else if (currentRotorDetectionMode > 4)
  {
    if (currentRotorDetectionMode == 5)
    {
      v11 = +[VOTMagnifierService shared];
      [v11 toggleFurnitureDetection];
    }

    else
    {
      if (currentRotorDetectionMode != 6)
      {
        goto LABEL_20;
      }

      v11 = +[VOTMagnifierService shared];
      [v11 toggleCurrentActivity];
    }
  }

  else
  {
    +[VOTMagnifierService shared];
    if (currentRotorDetectionMode == 3)
      v11 = {;
      [v11 togglePointAndSpeak];
    }

    else
      v11 = {;
      [v11 toggleTextDetection];
    }
  }

LABEL_20:
  if (![v5 count])
  {
    v12 = +[VOTMagnifierService shared];
    [v12 dismissDetectionUI];
  }
}

- (void)handleEvent:(id)event
{
  eventCopy = event;
  command = [eventCopy command];
  if ([(VOTElementManager *)self isTutorialActive])
  {
    [(VOTElementManager *)self tutorialSetRecognizedGesture:command];
    if ([(VOTElementManager *)self shouldTutorialIgnoreCommand:command])
    {
      goto LABEL_47;
    }
  }

  if ([(VOTElementManager *)self detectionModeRotorActive])
  {
    if (([command isEqualToString:kVOTEventCommandSearchRotorRight] & 1) == 0 && (objc_msgSend(command, "isEqualToString:", kVOTEventCommandSearchRotorLeft) & 1) == 0 && (objc_msgSend(command, "isEqualToString:", kVOTEventCommandSearchRotorUp) & 1) == 0 && (objc_msgSend(command, "isEqualToString:", kVOTEventCommandSearchRotorDown) & 1) == 0 && (objc_msgSend(command, "isEqualToString:", kVOTEventCommandIdle) & 1) == 0 && (objc_msgSend(command, "isEqualToString:", kVOTEventCommandSimpleTap) & 1) == 0)
    {
      [(SCRCThread *)self->_elementManagerThread performSelector:"_moveDetectionModeRotor:" onTarget:self count:1 objects:eventCopy, 0];
    }

    if ([command isEqualToString:kVOTEventCommandSimpleTap])
    {
      [(VOTElementManager *)self toggleDetectionMode];
      goto LABEL_47;
    }
  }

  if (![eventCopy origin])
  {
    v34 = @"The Event did not have a type set to it: %@";
    v35 = eventCopy;
    LOBYTE(v33) = 1;
    _AXLogWithFacility();
  }

  v6 = [VOTCommandHelper commandHelper:v33];
  command2 = [eventCopy command];
  v8 = [command2 isEqualToString:kVOTEventCommandEscape];

  if (v8)
  {
    [eventCopy setBypassHelp:1];
  }

  v9 = +[VOTCommandHelper commandHelper];
  [v9 practiceRegion];
  v11 = v10;
  v13 = v12;
  v15 = v14;
  v17 = v16;

  if ([v6 helpEnabled])
  {
    command3 = [eventCopy command];
    if ([command3 isEqualToString:kVOTEventCommandTracking])
    {
      [eventCopy touchPoint];
      v38.x = v19;
      v38.y = v20;
      v39.origin.x = v11;
      v39.origin.y = v13;
      v39.size.width = v15;
      v39.size.height = v17;
      v21 = CGRectContainsPoint(v39, v38);
    }

    else
    {
      v21 = 1;
    }
  }

  else
  {
    v21 = 1;
  }

  if (![v6 helpEnabled] || (objc_msgSend(eventCopy, "bypassHelp") & 1) != 0)
  {
    goto LABEL_29;
  }

  v22 = CGSizeZero.width == v15;
  if (CGSizeZero.height != v17)
  {
    v22 = 0;
  }

  if (!v22 && !v21)
  {
LABEL_29:
    command4 = [eventCopy command];
    v24 = kVOTEventCommandTracking;

    if (command4 == v24)
    {
      [(NSLock *)self->_trackingLock lock];
      objc_storeStrong(&self->_mostRecentTrackingEvent, event);
      [(NSLock *)self->_trackingLock unlock];
LABEL_40:
      elementManagerThread = self->_elementManagerThread;
LABEL_41:
      [(SCRCThread *)elementManagerThread performSelector:"_handleEvent:" onTarget:self count:1 objects:eventCopy, 0];
      goto LABEL_42;
    }

    if ([(VOTElementManager *)self directTouchModeHandledEvent:eventCopy])
    {
      goto LABEL_42;
    }

    command5 = [eventCopy command];
    if (command5 != kVOTEventCommandNextElement)
    {
      command6 = [eventCopy command];
      v27 = command6;
      if (command6 != kVOTEventCommandPreviousElement)
      {
        command7 = [eventCopy command];
        v29 = kVOTEventCommandAnnouncement;

        if (command7 != v29)
        {
          if ([(VOTElementManager *)self eventIsSystemEvent:eventCopy])
          {
            elementManagerThread = self->_systemEventThread;
          }

          else
          {
            elementManagerThread = self->_elementManagerThread;
          }

          goto LABEL_41;
        }

        goto LABEL_39;
      }
    }

LABEL_39:
    v31 = +[VOTOutputManager outputManager];
    [v31 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

    goto LABEL_40;
  }

  [v6 processHelpForEvent:{eventCopy, CGSizeZero.width}];
LABEL_42:
  command8 = [eventCopy command];
  [(VOTElementManager *)self setLastEventCommand:command8];

  if (CFAbsoluteTimeGetCurrent() - self->_lastEventOccurredTime > 4.0)
  {
    if (qword_1001FEC70 != -1)
    {
      sub_10012A684();
    }

    dispatch_async(qword_1001FEC68, &stru_1001C8D70);
    self->_lastEventOccurredTime = CFAbsoluteTimeGetCurrent();
  }

LABEL_47:
}

- (id)_similarMonitoredElement:(id)element
{
  elementCopy = element;
  [elementCopy centerPoint];
  v6 = v5;
  v7 = v4;
  y = CGPointZero.y;
  if (CGPointZero.x == v5 && y == v4)
  {
    [elementCopy frame];
    AX_CGRectGetCenter();
    v6 = v10;
    v7 = v11;
  }

  if (CGPointZero.x == v6 && y == v7)
  {
    v25 = 0;
  }

  else
  {
    v13 = +[VOTElement systemWideElement];
    [v13 convertPoint:objc_msgSend(elementCopy fromContextId:{"windowContextId"), v6, v7}];
    v15 = v14;
    v17 = v16;

    v18 = [[VOTElement alloc] initWithPosition:v15, v17];
    [(VOTElement *)v18 frame];
    v20 = v19;
    [elementCopy frame];
    if (vabdd_f64(v20, v21) >= 10.0 || (-[VOTElement frame](v18, "frame"), v23 = v22, [elementCopy frame], vabdd_f64(v23, v24) >= 10.0))
    {
      v25 = 0;
    }

    else
    {
      v25 = v18;
    }
  }

  return v25;
}

- (id)_monitoredElementCachedText:(id)text
{
  textCopy = text;
  label = [textCopy label];
  value = [textCopy value];

  v6 = __AXStringForVariables();

  return v6;
}

- (void)_monitorElements
{
  selfCopy = self;
  v3 = [(NSArray *)self->_currentApplications mutableCopy];
  v4 = +[VOTElement systemAppApplication];
  if (v4)
  {
    [v3 addObject:v4];
  }

  v30 = v4;
  v43 = 0u;
  v44 = 0u;
  v41 = 0u;
  v42 = 0u;
  obj = v3;
  v33 = [obj countByEnumeratingWithState:&v41 objects:v50 count:16];
  if (v33)
  {
    v32 = *v42;
    v35 = selfCopy;
    do
    {
      v5 = 0;
      do
      {
        if (*v42 != v32)
        {
          objc_enumerationMutation(obj);
        }

        v34 = v5;
        v6 = *(*(&v41 + 1) + 8 * v5);
        elementMonitorCache = selfCopy->_elementMonitorCache;
        bundleIdentifier = [v6 bundleIdentifier];
        v9 = [(NSMutableDictionary *)elementMonitorCache objectForKeyedSubscript:bundleIdentifier];

        v10 = VOTLogCommon();
        if (os_log_type_enabled(v10, OS_LOG_TYPE_DEBUG))
        {
          *buf = 138412290;
          v46 = v9;
          _os_log_debug_impl(&_mh_execute_header, v10, OS_LOG_TYPE_DEBUG, "Checking in on: %@", buf, 0xCu);
        }

        v39 = 0u;
        v40 = 0u;
        v37 = 0u;
        v38 = 0u;
        allKeys = [v9 allKeys];
        v12 = [allKeys copy];

        v13 = [v12 countByEnumeratingWithState:&v37 objects:v49 count:16];
        if (v13)
        {
          v14 = v13;
          v15 = *v38;
          do
          {
            for (i = 0; i != v14; i = i + 1)
            {
              if (*v38 != v15)
              {
                objc_enumerationMutation(v12);
              }

              v17 = *(*(&v37 + 1) + 8 * i);
              if ([v17 isAlive])
              {
                [v17 updateCache];
                v18 = [(VOTElementManager *)selfCopy _monitoredElementCachedText:v17];
                v19 = [v9 objectForKeyedSubscript:v17];
                if ([v19 isEqualToString:v18])
                {

                  v20 = 0;
                }

                else
                {
                  v20 = [v18 length];

                  if (v20)
                  {
                    v20 = v17;
                    [v9 setObject:v18 forKeyedSubscript:v20];
                  }
                }

                v21 = VOTLogCommon();
                if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
                {
                  *buf = 138412546;
                  v46 = v17;
                  v47 = 2112;
                  v48 = v18;
                  _os_log_debug_impl(&_mh_execute_header, v21, OS_LOG_TYPE_DEBUG, "Checked element with newText: %@, %@", buf, 0x16u);
                }
              }

              else
              {
                v18 = [(VOTElementManager *)selfCopy _similarMonitoredElement:v17];
                v21 = [(VOTElementManager *)selfCopy _monitoredElementCachedText:v18];
                v22 = VOTLogCommon();
                if (os_log_type_enabled(v22, OS_LOG_TYPE_DEBUG))
                {
                  *buf = 138412546;
                  v46 = v17;
                  v47 = 2112;
                  v48 = v18;
                  _os_log_debug_impl(&_mh_execute_header, v22, OS_LOG_TYPE_DEBUG, "Element not alive: %@, using: %@", buf, 0x16u);
                }

                v23 = [v9 objectForKeyedSubscript:v17];
                if ([v23 isEqualToString:v21])
                {

                  v20 = 0;
                }

                else
                {
                  v24 = v14;
                  v25 = v15;
                  v26 = v12;
                  v27 = [v21 length];

                  if (v27)
                  {
                    v20 = v18;
                    [v9 setObject:v21 forKeyedSubscript:v20];
                  }

                  else
                  {
                    v20 = 0;
                  }

                  v12 = v26;
                  v15 = v25;
                  v14 = v24;
                  selfCopy = v35;
                }

                [v9 removeObjectForKey:v17];
              }

              if (v20)
              {
                [(VOTElementManager *)selfCopy _elementMonitoringOutputElement:v20 userMonitored:1];
              }
            }

            v14 = [v12 countByEnumeratingWithState:&v37 objects:v49 count:16];
          }

          while (v14);
        }

        v5 = v34 + 1;
      }

      while ((v34 + 1) != v33);
      v33 = [obj countByEnumeratingWithState:&v41 objects:v50 count:16];
    }

    while (v33);
  }

  v28 = VOTLogCommon();
  if (os_log_type_enabled(v28, OS_LOG_TYPE_DEBUG))
  {
    sub_10012A698();
  }

  if (selfCopy->_flags.isMonitoringElements)
  {
    elementMonitorTimer = selfCopy->_elementMonitorTimer;
    v36[0] = _NSConcreteStackBlock;
    v36[1] = 3221225472;
    v36[2] = sub_100060D5C;
    v36[3] = &unk_1001C76E8;
    v36[4] = selfCopy;
    [(SCRCTargetSelectorTimer *)elementMonitorTimer dispatchAfterDelay:v36 withBlock:0.75];
  }
}

- (void)_updateAutomationAccessibilityApps
{
  automaticAccessibilityEnabled = [VOTSharedWorkspace automaticAccessibilityEnabled];
  v3 = AXLogAppAccessibility();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    *buf = 67109120;
    LODWORD(v21) = automaticAccessibilityEnabled;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "Automatic app mode stats %d", buf, 8u);
  }

  v4 = +[AXSettings sharedInstance];
  automaticAccessibilityModes = [v4 automaticAccessibilityModes];

  v18 = 0u;
  v19 = 0u;
  v16 = 0u;
  v17 = 0u;
  v6 = automaticAccessibilityModes;
  v7 = [v6 countByEnumeratingWithState:&v16 objects:v24 count:16];
  if (v7)
  {
    v8 = v7;
    v9 = *v17;
    do
    {
      for (i = 0; i != v8; i = i + 1)
      {
        if (*v17 != v9)
        {
          objc_enumerationMutation(v6);
        }

        v11 = *(*(&v16 + 1) + 8 * i);
        if (automaticAccessibilityEnabled)
        {
          v12 = [v6 objectForKeyedSubscript:*(*(&v16 + 1) + 8 * i)];
          if ([v12 intValue] == 1)
          {
            v13 = j__VOSProcessAllowsScreenRecognition();
          }

          else
          {
            v13 = 0;
          }
        }

        else
        {
          v13 = 0;
        }

        AXSetProcessWantsMLElementForBundle();
        v14 = AXLogAppAccessibility();
        if (os_log_type_enabled(v14, OS_LOG_TYPE_INFO))
        {
          *buf = 138412546;
          v21 = v11;
          v22 = 1024;
          v23 = v13;
          _os_log_impl(&_mh_execute_header, v14, OS_LOG_TYPE_INFO, "Loading automatic mode for %@:%d", buf, 0x12u);
        }
      }

      v8 = [v6 countByEnumeratingWithState:&v16 objects:v24 count:16];
    }

    while (v8);
  }

  [(VOTElementManager *)self _updateMLElementAutorefresh];
}

- (void)_updateContinuousPathTimeout
{
  v3 = +[AXSettings sharedInstance];
  [v3 voiceOverContinuousPathKeyboardStartTimeout];
  [(VOTElementManager *)self setContinuousPathTimeout:?];

  v4 = VOTLogCommon();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_INFO))
  {
    [(VOTElementManager *)self continuousPathTimeout];
    v6 = 134217984;
    v7 = v5;
    _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_INFO, "Updated continuous path timeout: %f", &v6, 0xCu);
  }
}

- (void)_handleEvent:(id)event
{
  eventCopy = event;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  command = [eventCopy command];
  v6 = [command isEqualToString:kVOTEventCommandSimulatedLongPress];

  if ((v6 & 1) == 0)
  {
    [(VOTElementManager *)self _cancelIndefiniteLongPress];
  }

  if (AXDeviceIsTV())
  {
    v7 = +[AXSettings sharedInstance];
    voiceOverUseTVToggleStyleNavigation = [v7 voiceOverUseTVToggleStyleNavigation];

    if (voiceOverUseTVToggleStyleNavigation)
    {
      if (([eventCopy isKeyEvent] & 1) != 0 || objc_msgSend(eventCopy, "isBrailleEvent"))
      {
        [VOTSharedWorkspace setTvInteractionModeWithoutSaving:2];
      }

      _currentElement = [(VOTElementManager *)self _currentElement];

      if (!_currentElement)
      {
        nativeFocusElement = [(VOTElementManager *)self nativeFocusElement];
        [(VOTElementManager *)self _setCurrentElement:nativeFocusElement];
      }
    }
  }

  command2 = [eventCopy command];
  v12 = [command2 hash];

  if (![(VOTElementManager *)self directTouchModeHandledEvent:eventCopy])
  {
    v13 = [qword_1001FEC40 objectForIndex:v12];
    bOOLValue = [v13 BOOLValue];

    if ((bOOLValue & 1) == 0)
    {
      [(VOTElementManager *)self _stopReadAll];
    }

    v15 = [(AXIndexMap *)self->_commands objectForIndex:v12];
    if ((v12 == [kVOTEventCommandSearchRotorUp hash] || v12 == objc_msgSend(kVOTEventCommandSearchRotorDown, "hash")) && self->_lastHandledEventWasRotorMovement)
    {
      self->_flags.shouldUpdateRotorForElement = 0;
    }

    if (v15)
    {
      target = [v15 target];
      [target performSelector:objc_msgSend(v15 withObject:{"selector"), eventCopy}];
    }

    else if ([eventCopy isKeyEvent] && self->_flags.inSearchTextMode)
    {
      [(VOTElementManager *)self _handleSearchTextEvent:eventCopy];
    }

    if (qword_1001FEC80 != -1)
    {
      sub_10012A710();
    }

    v17 = qword_1001FEC78;
    command3 = [eventCopy command];
    v19 = [v17 containsObject:command3];

    if ((([eventCopy isTouchEvent] & 1) != 0 || v19) && (-[SCRCTargetSelectorTimer isCancelled](self->_updateAppFromTimer, "isCancelled") & 1) == 0)
    {
      [(VOTElementManager *)self _currentElement];
      v33[0] = _NSConcreteStackBlock;
      v33[1] = 3221225472;
      v33[2] = sub_10006163C;
      v20 = v33[3] = &unk_1001C8DB8;
      v34 = v20;
      if ([(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:v33])
      {
        if (v19)
        {
          [(VOTElementManager *)self setLastUserElementTouchTime:CFAbsoluteTimeGetCurrent()];
        }

        [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
      }
    }

    _currentElement2 = [(VOTElementManager *)self _currentElement];
    if ([_currentElement2 isBannerNotification] && CFAbsoluteTimeGetCurrent() - self->_lastSentBannerTimerReset > 0.5)
    {
      command4 = [eventCopy command];
      if ([command4 isEqualToString:kVOTEventCommandIdle])
      {
      }

      else
      {
        command5 = [eventCopy command];
        v24 = [command5 isEqualToString:kVOTEventCommandTracking];

        if ((v24 & 1) == 0)
        {
          v25 = VOTLogElement();
          if (os_log_type_enabled(v25, OS_LOG_TYPE_DEBUG))
          {
            sub_10012A724(eventCopy);
          }

          self->_lastSentBannerTimerReset = CFAbsoluteTimeGetCurrent();
          [_currentElement2 resetBannerTimer];
        }
      }
    }

    if (self->_currentPublicCustomRotorItemResult && v12 != [kVOTEventCommandSearchRotorUp hash] && v12 != objc_msgSend(kVOTEventCommandSearchRotorDown, "hash") && !self->_inTextProcessingRotorMode)
    {
      self->_flags.shouldUpdateRotorForElement = 1;
    }

    command6 = [eventCopy command];
    v27 = kVOTEventCommandAnnouncement;

    if (command6 == v27)
    {
      v28 = [eventCopy objectForIndex:116];
      [(VOTElementManager *)self _handleAnnouncement:v28];
    }

    elementManagerHandledEventCallback = [(VOTElementManager *)self elementManagerHandledEventCallback];

    if (elementManagerHandledEventCallback)
    {
      elementManagerHandledEventCallback2 = [(VOTElementManager *)self elementManagerHandledEventCallback];
      (elementManagerHandledEventCallback2)[2](elementManagerHandledEventCallback2, self, eventCopy);
    }

    command7 = [eventCopy command];
    if (command7 == kVOTEventCommandSearchRotorDown)
    {
      self->_lastHandledEventWasRotorMovement = 1;
    }

    else
    {
      command8 = [eventCopy command];
      self->_lastHandledEventWasRotorMovement = command8 == kVOTEventCommandSearchRotorUp;
    }
  }
}

- (void)_pausedSpeechInterrupted:(id)interrupted
{
  v4 = VOTLogSpeech();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_DEFAULT))
  {
    *v5 = 0;
    _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_DEFAULT, "Paused speech interrupted, cancelling reading all", v5, 2u);
  }

  *&self->_flags.isReadingAll = 0;
}

- (void)_updateJindoApplicationCache
{
  v5 = +[AXSpringBoardServer server];
  jindoAppBundleIndentifiers = [v5 jindoAppBundleIndentifiers];
  jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
  self->_jindoAppBundleIdentifiers = jindoAppBundleIndentifiers;
}

- (void)_moveDetectionModeRotor:(id)rotor
{
  elementRotor = self->_elementRotor;
  origin = [rotor origin];

  [(VOTRotor *)elementRotor incrementDetectionRotor:origin];
}

- (void)_handleElementInteraction:(id)interaction
{
  interactionCopy = interaction;
  command = [interactionCopy command];
  v5 = [command isEqualToString:kVOTEventCommandMoveIn];

  if (![VOTSharedWorkspace navigationStyleHonorsGroups])
  {
    goto LABEL_6;
  }

  if (!v5)
  {
    if ([(VOTElementManager *)self _handleMoveOut:interactionCopy])
    {
      goto LABEL_7;
    }

    goto LABEL_6;
  }

  if (![(VOTElementManager *)self _handleMoveIn:interactionCopy])
  {
LABEL_6:
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent UnknownCommand];
    [v6 sendEvent:v7];
  }

LABEL_7:
}

- (BOOL)_handleMoveIn:(id)in
{
  inCopy = in;
  isAccessibleGroup = [(VOTElement *)self->_currentElement isAccessibleGroup];
  if (isAccessibleGroup)
  {
    firstContainedElement = [(VOTElement *)self->_currentElement firstContainedElement];
    [(VOTElementManager *)self _echoDifferentElement:firstContainedElement forEvent:inCopy];
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent InteractIn];
    [v7 sendEvent:v8];

    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
  }

  return isAccessibleGroup;
}

- (BOOL)_handleMoveOut:(id)out
{
  outCopy = out;
  groupedParent = [(VOTElement *)self->_currentElement groupedParent];
  if (groupedParent)
  {
    [(VOTElementManager *)self _echoDifferentElement:groupedParent forEvent:outCopy];
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent InteractOut];
    [v6 sendEvent:v7];

    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
  }

  return groupedParent != 0;
}

- (void)_updateStateForNotificationData:(id)data
{
  dataCopy = data;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (dataCopy)
  {
    if (qword_1001FEC90 != -1)
    {
      sub_10012A7B0();
    }

    v5 = CFGetTypeID(dataCopy);
    if (v5 == AXUIElementGetTypeID())
    {
      v6 = 0;
      v7 = dataCopy;
      goto LABEL_9;
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v8 = dataCopy;
      v7 = [VOTElement elementWithUIElement:v8];
      v6 = 0;
      if (!v7)
      {
        goto LABEL_19;
      }

LABEL_13:
      if ([(VOTElement *)v7 isVisible]&& [(VOTElement *)v7 isValid]&& ([(VOTElement *)v7 frame], !CGRectIsEmpty(v55)))
      {
        selfCopy2 = self;
        [(VOTElementManager *)self setNextElementToFocus:v7];
        v10 = VOTLogLayoutChange();
        if (os_log_type_enabled(v10, OS_LOG_TYPE_DEBUG))
        {
          sub_10012A7C4();
        }
      }

      else
      {
        selfCopy2 = self;
        v10 = VOTLogLayoutChange();
        if (os_log_type_enabled(v10, OS_LOG_TYPE_DEBUG))
        {
          sub_10012A834();
        }
      }

      self = selfCopy2;
LABEL_19:
      if (v6)
      {
LABEL_20:
        [(VOTElementManager *)self setNextStringToSpeakOnScreenChange:v6, v36];
        v11 = VOTLogLayoutChange();
        if (os_log_type_enabled(v11, OS_LOG_TYPE_DEBUG))
        {
          sub_10012A8A4();
        }
      }

LABEL_23:

      goto LABEL_24;
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      if (([qword_1001FEC88 containsObject:dataCopy] & 1) == 0)
      {
        v6 = dataCopy;
        v8 = 0;
        v7 = 0;
        goto LABEL_20;
      }

      goto LABEL_67;
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      selfCopy3 = self;
      v50 = 0u;
      v51 = 0u;
      v48 = 0u;
      v49 = 0u;
      allValues2 = dataCopy;
      v13 = [(VOTElement *)allValues2 countByEnumeratingWithState:&v48 objects:v54 count:16];
      if (v13)
      {
        v14 = v13;
        v36 = dataCopy;
        v6 = 0;
        v7 = 0;
        v15 = *v49;
        p_name = &OBJC_PROTOCOL___VOTRotorDelegate.name;
        v38 = allValues2;
        while (1)
        {
          for (i = 0; i != v14; i = i + 1)
          {
            if (*v49 != v15)
            {
              objc_enumerationMutation(allValues2);
            }

            v18 = *(*(&v48 + 1) + 8 * i);
            v19 = CFGetTypeID(v18);
            if (v19 == AXUIElementGetTypeID())
            {
              v7 = v18;
              continue;
            }

            objc_opt_class();
            if (objc_opt_isKindOfClass())
            {
              if ([p_name[401] containsObject:v18])
              {
                continue;
              }

              v20 = v18;
              allValues = v6;
              v6 = v20;
            }

            else
            {
              objc_opt_class();
              if ((objc_opt_isKindOfClass() & 1) == 0)
              {
                continue;
              }

              v46 = 0u;
              v47 = 0u;
              v44 = 0u;
              v45 = 0u;
              allValues = [(VOTElement *)v18 allValues];
              v22 = [allValues countByEnumeratingWithState:&v44 objects:v53 count:16];
              if (v22)
              {
                v23 = v22;
                v39 = v6;
                v24 = *v45;
                do
                {
                  for (j = 0; j != v23; j = j + 1)
                  {
                    if (*v45 != v24)
                    {
                      objc_enumerationMutation(allValues);
                    }

                    v26 = *(*(&v44 + 1) + 8 * j);
                    v27 = CFGetTypeID(v26);
                    if (v27 == AXUIElementGetTypeID())
                    {
                      v7 = v26;
                    }
                  }

                  v23 = [allValues countByEnumeratingWithState:&v44 objects:v53 count:16];
                }

                while (v23);
                allValues2 = v38;
                v6 = v39;
                p_name = (&OBJC_PROTOCOL___VOTRotorDelegate + 8);
              }
            }
          }

          v14 = [(VOTElement *)allValues2 countByEnumeratingWithState:&v48 objects:v54 count:16];
          if (!v14)
          {
            dataCopy = v36;
            self = selfCopy3;
            goto LABEL_70;
          }
        }
      }

      v6 = 0;
      v7 = 0;
    }

    else
    {
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
LABEL_67:
        v8 = 0;
        v6 = 0;
        v7 = 0;
        goto LABEL_23;
      }

      v42 = 0u;
      v43 = 0u;
      v40 = 0u;
      v41 = 0u;
      allValues2 = [(VOTElement *)dataCopy allValues];
      v28 = [(VOTElement *)allValues2 countByEnumeratingWithState:&v40 objects:v52 count:16];
      if (v28)
      {
        v29 = v28;
        selfCopy4 = self;
        v31 = dataCopy;
        v7 = 0;
        v32 = *v41;
        do
        {
          for (k = 0; k != v29; k = k + 1)
          {
            if (*v41 != v32)
            {
              objc_enumerationMutation(allValues2);
            }

            v34 = *(*(&v40 + 1) + 8 * k);
            v35 = CFGetTypeID(v34);
            if (v35 == AXUIElementGetTypeID())
            {
              v7 = v34;
            }
          }

          v29 = [(VOTElement *)allValues2 countByEnumeratingWithState:&v40 objects:v52 count:16];
        }

        while (v29);
        v6 = 0;
        dataCopy = v31;
        self = selfCopy4;
      }

      else
      {
        v6 = 0;
        v7 = 0;
      }
    }

LABEL_70:

    if (!v7)
    {
      v8 = 0;
      goto LABEL_19;
    }

LABEL_9:
    v7 = [[VOTElement alloc] initWithAXElement:v7];
    v8 = 0;
    if (!v7)
    {
      goto LABEL_19;
    }

    goto LABEL_13;
  }

LABEL_24:
}

- (void)handleNotification:(int)notification withData:(id)data forElement:(__AXUIElement *)element
{
  dataCopy = data;
  v9 = VOTLogNotifications();
  if (os_log_type_enabled(v9, OS_LOG_TYPE_DEBUG))
  {
    sub_10012A914();
  }

  if (![(VOTElementManager *)self _shouldIgnoreNotificationForContinuityDisplay:dataCopy withElement:element])
  {
    if (notification <= 2024)
    {
      switch(notification)
      {
        case 1000:
          v18 = VOTLogLayoutChange();
          if (os_log_type_enabled(v18, OS_LOG_TYPE_DEBUG))
          {
            sub_10012AA1C();
          }

          if (_AXSAutomationEnabled())
          {
            v19 = +[NSDistributedNotificationCenter defaultCenter];
            [v19 postNotificationName:@"VoiceOverEventOccurred" object:@"DidReceiveScreenChange"];
          }

          if ([(VOTElementManager *)self _notificationData:dataCopy containsToken:kAXScreenChangePopup])
          {
            v20 = +[VOTOutputManager outputManager];
            v21 = +[VOSOutputEvent PopoverDidAppear];
            [v20 sendEvent:v21];
          }

          [(SCRCThread *)self->_elementManagerThread performSelector:"_updateStateForNotificationData:" onTarget:self cancelMask:0 count:1 objects:dataCopy, 0];
          [(SCRCThread *)self->_elementManagerThread performSelector:"_notificationThreadCancel" onTarget:self cancelMask:1574144 count:0 objects:0];
          v22 = [(VOTElementManager *)self _notificationData:dataCopy containsToken:kAXPerformElementUpdateImmediatelyToken];
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenChange:sound:";
          if (v22)
          {
            goto LABEL_103;
          }

          elementCopy = 0;
          v30 = 0;
          selfCopy12 = self;
          v13 = 256;
          goto LABEL_104;
        case 1001:
          if (_AXSAutomationEnabled())
          {
            v24 = +[NSDistributedNotificationCenter defaultCenter];
            [v24 postNotificationName:@"VoiceOverEventOccurred" object:@"DidReceiveLayoutChange"];
          }

          v25 = VOTLogLayoutChange();
          if (os_log_type_enabled(v25, OS_LOG_TYPE_DEBUG))
          {
            sub_10012A9AC();
          }

          if ([(VOTElementManager *)self _notificationData:dataCopy containsToken:kAXForceUpdateChangeToken])
          {
            [(VOTElementManager *)self setDidReceiveForceUpdateChangeToken:1];
          }

          [(SCRCThread *)self->_elementManagerThread performSelector:"_updateStateForNotificationData:" onTarget:self cancelMask:0 count:1 objects:dataCopy, 0];
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleElementChangedNotification:";
          elementCopy = 0;
          selfCopy12 = self;
          v13 = 1024;
          goto LABEL_113;
        case 1004:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenLock:";
          goto LABEL_112;
        case 1005:
          v16 = self->_elementManagerThread;
          v17 = [[VOTElement alloc] initWithAXElement:element];
          [(SCRCThread *)v16 performSelector:"_handleValueChangedNotification:associatedElement:" onTarget:self cancelMask:0 count:2 objects:dataCopy, v17, 0];

          goto LABEL_116;
        case 1006:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAlertReceived:forApplication:";
          elementCopy = element;
          v30 = 0;
          selfCopy12 = self;
          v13 = 2048;
          goto LABEL_104;
        case 1007:
        case 1072:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebPageLoaded:";
          goto LABEL_112;
        case 1008:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAnnouncementNotification:";
          goto LABEL_112;
        case 1009:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScrollByPageNotification:";
          elementCopy = 0;
          selfCopy12 = self;
          v13 = 512;
          goto LABEL_113;
        case 1010:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAutoCorrectionMadeNotification:";
          goto LABEL_81;
        case 1012:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKeyboardKeySelectedNotification:";
          elementCopy = 0;
          selfCopy12 = self;
          v13 = 0x8000;
          goto LABEL_113;
        case 1013:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAutoCorrectionDisplayNotification:";
LABEL_81:
          elementCopy = 0;
          selfCopy12 = self;
          v13 = 4096;
          goto LABEL_113;
        case 1014:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKeyboardChangedNotification";
          goto LABEL_96;
        case 1016:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleElementMoved:";
          goto LABEL_112;
        case 1017:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleSelectionChangedNotification:";
          elementCopy = 0;
          selfCopy12 = self;
          v13 = 0x10000;
          goto LABEL_113;
        case 1018:
          [(SCRCThread *)self->_elementManagerThread performSelector:"_notificationThreadCancel" onTarget:self cancelMask:0x10000 count:0 objects:0];
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleFirstResponderChangedNotification:";
          elementCopy = 0;
          selfCopy12 = self;
          v13 = 0x20000;
          goto LABEL_113;
        case 1020:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleMoveToElementNotification:";
          goto LABEL_112;
        case 1022:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebSelectionChangedNotification:";
          goto LABEL_112;
        case 1023:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleInvalidTextInputNotification:";
          goto LABEL_112;
        case 1024:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAppSuspendAnimationProgressNotification:";
          goto LABEL_112;
        case 1026:
          block[0] = _NSConcreteStackBlock;
          block[1] = 3221225472;
          block[2] = sub_100062B08;
          block[3] = &unk_1001C76E8;
          block[4] = self;
          if (qword_1001FEC98 != -1)
          {
            dispatch_once(&qword_1001FEC98, block);
          }

          [(SCRCTargetSelectorTimer *)self->_invalidStatusChangedTimer cancel];
          [(SCRCTargetSelectorTimer *)self->_invalidStatusChangedTimer dispatchAfterDelay:dataCopy withObject:1.0];
          goto LABEL_116;
        case 1029:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKBPopupVariantsNotification:";
          goto LABEL_112;
        case 1030:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenUnlock";
          goto LABEL_96;
        case 1032:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleCurrentContentReadingLineUpdated:";
          goto LABEL_112;
        case 1035:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleCameraCenteredNotification:";
          goto LABEL_112;
        case 1038:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleBarcodeVisibilityNotification:";
          goto LABEL_112;
        case 1039:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOn";
          goto LABEL_96;
        case 1040:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOff";
          goto LABEL_96;
        case 1041:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleStopSpeaking";
          goto LABEL_96;
        case 1042:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOnSilently";
          goto LABEL_96;
        case 1043:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOffSilently";
          goto LABEL_96;
        case 1044:
          v14 = self->_elementManagerThread;
          v15 = "_handleVisualsUpdate:";
          goto LABEL_100;
        case 1045:
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v23 = [dataCopy isEqualToNumber:&__kCFBooleanTrue];
            self->_isInPreview = v23;
            if ((v23 & 1) == 0)
            {
              [(VOTElementManager *)self _simulatedForceTouchLift];
            }
          }

          goto LABEL_116;
        case 1046:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleExpandedStatusChanged:";
          goto LABEL_112;
        case 1047:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleFocusedElementContentChangeNotification:";
          goto LABEL_112;
        case 1048:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleRequestExclusiveAudioHardware";
          goto LABEL_96;
        case 1049:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleReleaseExclusiveAudioHardware";
          goto LABEL_96;
        case 1050:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleUnmuteEligibleEventOccured";
          goto LABEL_96;
        case 1052:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleTextReplacementOccurredNotification:";
          goto LABEL_112;
        case 1053:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleNativeFocusItemChangedNotification:";
          elementCopy = 0;
          selfCopy12 = self;
          v13 = 0x100000;
          goto LABEL_113;
        case 1055:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenWillChangeNotification:";
          goto LABEL_112;
        case 1056:
          v14 = self->_elementManagerThread;
          v15 = "_handleDidReceiveVisionEngineResult:";
          goto LABEL_100;
        case 1057:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleRealtimeElementUpdate:";
          goto LABEL_112;
        case 1059:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenWillWakeNotification:";
          goto LABEL_112;
        case 1061:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebFormControlInteractionStartNotification:";
          goto LABEL_112;
        case 1062:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebFormControlInteractionEndNotification:";
          goto LABEL_112;
        case 1063:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKeyboardContinuousPathDidBegin:";
          goto LABEL_112;
        case 1064:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLiveContinuousToneBeginNotification:";
          goto LABEL_112;
        case 1065:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLiveContinuousToneUpdateNotification:";
          goto LABEL_112;
        case 1066:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLiveContinuousToneEndNotification:";
          goto LABEL_112;
        case 1068:
          v14 = self->_elementManagerThread;
          v15 = "_handleCaptionsDisplayedNotification:";
LABEL_100:
          [(SCRCThread *)v14 performSelector:v15 onTarget:self count:1 objects:dataCopy, 0];
          goto LABEL_116;
        case 1070:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleContextMenuStatusNotification:";
          goto LABEL_112;
        case 1071:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleDuckingDisabling:";
          goto LABEL_112;
        case 1073:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handlePauseSpeechAndHapticsNotification:";
          goto LABEL_112;
        case 1074:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAudiographSelectedSeriesChangedNotification:";
          goto LABEL_112;
        case 1075:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAudiographPlaybackStateNotification:";
          goto LABEL_112;
        case 1080:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleStopSpeakingAndClearQueue";
LABEL_96:
          selfCopy12 = self;
          v13 = 0;
          v26 = 0;
          v27 = 0;
          goto LABEL_115;
        default:
          goto LABEL_116;
      }
    }

    if (notification > 4999)
    {
      if (notification > 5700)
      {
        switch(notification)
        {
          case 5701:
            elementManagerThread = self->_elementManagerThread;
            v11 = "_handleSiriFinishedTalking:";
            break;
          case 5702:
            elementManagerThread = self->_elementManagerThread;
            v11 = "_handleSiriStartedListening:";
            break;
          case 5703:
            elementManagerThread = self->_elementManagerThread;
            v11 = "_handleSiriFinishedListening:";
            break;
          default:
            goto LABEL_116;
        }
      }

      else
      {
        if (notification == 5000)
        {
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v28 = [NSMutableDictionary dictionaryWithDictionary:dataCopy];
            [v28 setObject:&__kCFBooleanTrue forKeyedSubscript:kAXPerformElementUpdateImmediatelyToken];
          }

          else
          {
            v28 = kAXPerformElementUpdateImmediatelyToken;
          }

          [(SCRCThread *)self->_elementManagerThread performSelector:"_handleScreenChange:sound:" onTarget:self count:2 objects:v28, 0, 0];
          dataCopy = v28;
          goto LABEL_116;
        }

        if (notification == 5001)
        {
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenChange:sound:";
LABEL_103:
          elementCopy = 0;
          v30 = 0;
          selfCopy12 = self;
          v13 = 0x80000;
LABEL_104:
          v26 = 2;
          goto LABEL_114;
        }

        if (notification != 5700)
        {
          goto LABEL_116;
        }

        elementManagerThread = self->_elementManagerThread;
        v11 = "_handleSiriStartedTalking:";
      }
    }

    else if (notification > 3026)
    {
      switch(notification)
      {
        case 3027:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebTextMatchSelectedNotification:";
          break;
        case 3032:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleCurrentStateChanged:";
          break;
        case 3033:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleSortDirectionChanged:";
          break;
        default:
          goto LABEL_116;
      }
    }

    else
    {
      switch(notification)
      {
        case 2025:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLabelElementAcceptedNotification:";
          break;
        case 2026:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleItemChooserSelectionMade:";
          break;
        case 3026:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebTextAvailableNotification:";
          break;
        default:
          goto LABEL_116;
      }
    }

LABEL_112:
    elementCopy = 0;
    selfCopy12 = self;
    v13 = 0;
LABEL_113:
    v26 = 1;
LABEL_114:
    v27 = dataCopy;
LABEL_115:
    [(SCRCThread *)elementManagerThread performSelector:v11 onTarget:selfCopy12 cancelMask:v13 count:v26 objects:v27, elementCopy, v30];
  }

LABEL_116:
}

- (void)_handleLiveContinuousToneBeginNotification:(id)notification
{
  notificationCopy = notification;
  if (AXDeviceSupportsSonification())
  {
    v3 = +[VOTAudiographManager sharedManager];
    [v3 beginLiveModeSession];

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      [notificationCopy floatValue];
      v5 = v4;
      if (v5 > 1.0)
      {
        v5 = 1.0;
      }

      v6 = fmax(v5, 0.0);
      v7 = +[VOTAudiographManager sharedManager];
      [v7 setLiveModeValue:v6];
    }
  }
}

- (void)_handleLiveContinuousToneUpdateNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    [notificationCopy floatValue];
    v4 = v3;
    if (v4 > 1.0)
    {
      v4 = 1.0;
    }

    v5 = fmax(v4, 0.0);
    v6 = +[VOTAudiographManager sharedManager];
    [v6 setLiveModeValue:v5];
  }
}

- (void)_handleLiveContinuousToneEndNotification:(id)notification
{
  v3 = +[VOTAudiographManager sharedManager];
  [v3 endLiveModeSession];
}

- (BOOL)_notificationData:(id)data containsToken:(id)token
{
  dataCopy = data;
  tokenCopy = token;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v7 = [dataCopy containsObject:tokenCopy];
LABEL_7:
    v9 = v7;
    goto LABEL_10;
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v7 = [dataCopy isEqual:tokenCopy];
    goto LABEL_7;
  }

  allKeys = [dataCopy allKeys];
  if ([allKeys containsObject:tokenCopy])
  {
    v9 = 1;
  }

  else
  {
    v10 = [dataCopy objectForKey:kAXNotificationDataKey];
    v9 = [v10 isEqual:tokenCopy];
  }

LABEL_10:
  return v9;
}

- (id)_notificationData:(id)data consumingToken:(id)token
{
  dataCopy = data;
  tokenCopy = token;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [dataCopy containsObject:tokenCopy])
  {
    v7 = [dataCopy mutableCopy];
    [v7 removeObject:tokenCopy];
    if ([v7 count])
    {
      v8 = v7;
    }

    else
    {
      v8 = 0;
    }
  }

  else if ([dataCopy isEqual:tokenCopy])
  {
    v8 = 0;
  }

  else
  {
    v8 = dataCopy;
  }

  return v8;
}

- (void)sendRequest:(id)request
{
  requestCopy = request;
  v5 = VOTLogCommon();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012AA8C();
  }

  if ([VOTSharedWorkspace pauseSpeechAndHaptics])
  {
    v6 = VOTLogAudio();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "Not sending request because speech and haptics is currently paused", buf, 2u);
    }
  }

  else
  {
    if (![(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:&stru_1001C8E18])
    {
      application = [(VOTElement *)self->_currentElement application];
      if ([application isDictationListening])
      {
      }

      else
      {
        remoteApplication = [(VOTElement *)self->_currentElement remoteApplication];
        isDictationListening = [remoteApplication isDictationListening];

        if (!isDictationListening)
        {
          [requestCopy send];
          goto LABEL_14;
        }
      }
    }

    v10 = VOTLogAudio();
    if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
    {
      *v11 = 0;
      _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "Not sending request because either siri or dictation is listening", v11, 2u);
    }

    [(VOTElementManager *)self setLastBlockedRequestBySiriOrDictationTime:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self setLastRequestBlockedBySiriOrDictation:requestCopy];
  }

LABEL_14:
}

- (double)keyboardKeyPenumbra:(id)penumbra
{
  [penumbra frame];
  result = v3 + v3 / -6.0;
  if (result > 33.0)
  {
    return 33.0;
  }

  return result;
}

- (void)_showVisualRotor:(id)rotor direction:(BOOL)direction
{
  directionCopy = direction;
  rotorCopy = rotor;
  v6 = +[VOTCommandHelper commandHelper];
  helpEnabled = [v6 helpEnabled];

  if ((helpEnabled & 1) == 0)
  {
    self->_flags.visualRotorDisplayed = 1;
    currentVisualRotorString = [rotorCopy currentVisualRotorString];
    v9 = objc_allocWithZone(NSDictionary);
    v10 = [NSNumber numberWithBool:directionCopy];
    v11 = +[NSNumber numberWithInteger:](NSNumber, "numberWithInteger:", [rotorCopy rotorCount]);
    v12 = [NSNumber numberWithBool:1];
    v13 = [v9 initWithObjectsAndKeys:{v10, @"increment", v11, @"count", currentVisualRotorString, @"title", v12, @"show", 0}];

    v14 = +[VOTDisplayManager displayManager];
    [v14 updateVisualRotor:v13];
  }

  [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer cancel];
  [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer dispatchAfterDelay:1.5];
}

- (void)_hideVisualRotor
{
  if (!self->_flags.visualRotorDisplayed || ([(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer isCancelled]& 1) != 0)
  {
    goto LABEL_8;
  }

  if ([VOTSharedWorkspace fingerCount] != 2)
  {
    v3 = objc_allocWithZone(NSDictionary);
    v4 = [NSNumber numberWithBool:0];
    v5 = [v3 initWithObjectsAndKeys:{v4, @"show", 0}];

    v6 = +[VOTDisplayManager displayManager];
    [v6 updateVisualRotor:v5];

LABEL_8:
    self->_flags.visualRotorDisplayed = 0;
    return;
  }

  [(VOTElementManager *)self hideVisualRotor];
}

- (void)hideVisualRotor
{
  if (![(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer isPending]|| [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer isCancelled])
  {
    [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer cancel];
    visualRotorFadeTimer = self->_visualRotorFadeTimer;

    [(SCRCTargetSelectorTimer *)visualRotorFadeTimer dispatchAfterDelay:0.75];
  }
}

- (void)_resetElementUnitIndexes
{
  self->_elementUnitIndex = -1;
  self->_elementUnitOutputRange = 0u;
  self->_bookCursorPosition = -1;
  self->_bookLineRange = xmmword_10017E110;
  self->_bookLineNumber = 0x7FFFFFFFLL;
  if (!self->_bookUpdatedCurrentLine)
  {
    bookLineString = self->_bookLineString;
    self->_bookLineString = 0;
  }

  self->_readWordCyclingCount = 0;
}

- (void)_setElementUnitIndexesToEndOfElement:(id)element
{
  elementCopy = element;
  if ([elementCopy isReadingContent])
  {
    pageContent = [elementCopy pageContent];
    v5 = [pageContent length];
    v6 = 0;
    v7 = 0;
    self->_elementUnitIndex = v5;
    self->_elementUnitOutputRange.location = v5;
    self->_elementUnitOutputRange.length = 0;
    do
    {
      v8 = v6;
      if (v7 >= v5)
      {
        break;
      }

      v9 = [elementCopy stringForLineNumber:v6];
      v10 = [v9 length];

      v7 += v10;
      v6 = v8 + 1;
    }

    while (v10);
    if (v8)
    {
      v11 = v8 + 1;
      v12 = elementCopy;
      while (--v11 >= 0)
      {
        v13 = [elementCopy stringForLineNumber:v11];
        v14 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
        v15 = [v13 stringByTrimmingCharactersInSet:v14];

        v16 = [v15 length];
        v12 = elementCopy;
        if (v16)
        {
          goto LABEL_13;
        }
      }

      v11 = -1;
LABEL_13:
      self->_bookLineNumber = v11;
      if ([v12 supportsRangeForLineNumber])
      {
        location = [elementCopy rangeForLineNumber:v11];
        self->_bookLineRange.location = location;
        self->_bookLineRange.length = length;
      }

      else
      {
        v22 = [elementCopy stringForLineNumber:v11];
        self->_bookLineRange.location = [(VOTElementManager *)self _rangeOfLine:v22 inBookContent:pageContent];
        self->_bookLineRange.length = v23;

        location = self->_bookLineRange.location;
        length = self->_bookLineRange.length;
      }

      v18 = location + length;
    }

    else
    {
      self->_bookLineRange = xmmword_10017E110;
      self->_bookLineNumber = 0x7FFFFFFFLL;
      v18 = -1;
    }

    v19 = 720;
  }

  else
  {
    pageContent = [elementCopy visibleText];
    v17 = [pageContent length];
    v18 = 0;
    self->_elementUnitIndex = v17;
    self->_elementUnitOutputRange.location = v17;
    self->_elementUnitOutputRange.length = 0;
    self->_bookCursorPosition = -1;
    self->_bookLineNumber = 0x7FFFFFFFLL;
    v19 = 712;
    self->_bookLineRange.location = 0x7FFFFFFFLL;
  }

  *(&self->super.isa + v19) = v18;
}

- (void)_setPreviousTouchTypingKey:(id)key
{
  keyCopy = key;
  previousTouchTypingKey = self->_previousTouchTypingKey;
  p_previousTouchTypingKey = &self->_previousTouchTypingKey;
  if (previousTouchTypingKey != keyCopy)
  {
    v8 = keyCopy;
    objc_storeStrong(p_previousTouchTypingKey, key);
    keyCopy = v8;
  }
}

- (BOOL)_isTouchTypingEventTooCloseToEdge:(id)edge
{
  [edge touchPoint];
  [VOTSharedWorkspace convertDevicePointToZoomedPoint:?];
  v4 = v3;
  v6 = v5;
  deviceOrientation = [VOTSharedWorkspace deviceOrientation];
  v8 = 1.5;
  if (AXDeviceIsPhoneIdiom())
  {
    if ((AXDeviceIsTallPhoneIdiom() & ((deviceOrientation - 3) < 2)) != 0)
    {
      v8 = 0.0;
    }

    else
    {
      v8 = 2.0;
    }
  }

  v9 = &xmmword_1001FF150;
  if (deviceOrientation == 3)
  {
    v10 = v6;
  }

  else
  {
    v10 = v4;
  }

  if (deviceOrientation == 3)
  {
    v9 = &xmmword_1001FF150 + 1;
  }

  if (deviceOrientation == 4)
  {
    v10 = v6;
    v9 = &xmmword_1001FF150 + 1;
  }

  return v10 >= *v9 - v8 || v10 <= v8;
}

- (void)_performTouchTypingKeyPress:(id)press
{
  pressCopy = press;
  _currentElement = [(VOTElementManager *)self _currentElement];
  [(VOTElementManager *)self keyboardKeyPenumbra:_currentElement];
  v6 = v5;
  v7 = [(VOTElementManager *)self _isTouchTypingEventTooCloseToEdge:pressCopy];
  [_currentElement frame];
  v9 = v8;
  v11 = v10;
  v13 = v12;
  v15 = v14;
  v16 = +[VOTElement systemWideElement];
  [v16 convertRect:objc_msgSend(_currentElement fromContextId:{"windowContextId"), v9, v11, v13, v15}];
  v18 = v17;
  v20 = v19;
  v22 = v21;
  v24 = v23;

  v25 = VOTSharedWorkspace;
  [pressCopy touchPoint];
  v27 = v26;
  v29 = v28;

  [v25 convertDevicePointToZoomedPoint:{v27, v29}];
  if ((v7 & 1) == 0)
  {
    v32 = v30;
    v33 = v31;
    if ([_currentElement keyboardKeyAllowsTouchTyping])
    {
      v39.origin.x = v18;
      v39.origin.y = v20;
      v39.size.width = v22;
      v39.size.height = v24;
      v40 = CGRectInset(v39, -v6, -v6);
      v38.x = v32;
      v38.y = v33;
      v34 = CGRectContainsPoint(v40, v38);
      if (!pressCopy || v34)
      {
        v35 = +[VOTOutputManager outputManager];
        [v35 stopSpeakingAtBoundary:0];

        [_currentElement performSimpleTap];
        [(VOTElementManager *)self _setPreviousTouchTypingKey:_currentElement];
      }
    }
  }
}

- (void)_cleanupMapInteractionOnIdle
{
  [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCancelRequest:1];
  switchRoadsOutputRequest = self->_switchRoadsOutputRequest;
  self->_switchRoadsOutputRequest = 0;

  self->_flags.shouldSpeakSameLineTouched = 1;
  self->_flags.didTouchTypingOutputStart = 0;
  upcomingRoadElement = self->_upcomingRoadElement;
  self->_upcomingRoadElement = 0;

  [(VOTOutputRequest *)self->_startTrackingRoadRequest setCancelRequest:1];
  [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:0];
  startTrackingRoadRequest = self->_startTrackingRoadRequest;
  self->_startTrackingRoadRequest = 0;
}

- (void)_handleIdle:(id)idle
{
  idleCopy = idle;
  if ([VOTSharedWorkspace typingMode] == 1 && self->_flags.didTouchTypingOutputStart)
  {
    if (CFAbsoluteTimeGetCurrent() > self->_touchTypingStartTime || (-[VOTElementManager _currentElement](self, "_currentElement"), v4 = objc_claimAutoreleasedReturnValue(), v5 = [v4 isEqual:self->_previousTouchTypingKey], v4, v5))
    {
      [(VOTElementManager *)self _performTouchTypingKeyPress:idleCopy];
    }

    else
    {
      [(VOTElementManager *)self _setPreviousTouchTypingKey:0];
    }
  }

  if ([VOTSharedWorkspace reachabilityActive] && self->_flags.setReachabilityIsActiveWhileFingerDown)
  {
    [(VOTElementManager *)self _reachabilityHandleTrackingStopped];
  }

  [(VOTElementManager *)self _cleanupMapInteractionOnIdle];
  self->_shouldContinueRoadTracking = 0;
  [(VOTElementManager *)self hideVisualRotor];
  self->_flags.lastEventWasIdle = 1;
  self->_flags.usePenumbraForKeyboardKeys = 0;
  fetchManager = self->_fetchManager;
  _currentElement = [(VOTElementManager *)self _currentElement];
  [(VOTElementFetcher *)fetchManager updateCacheWithElement:_currentElement];

  v8 = CGPointZero;
  self->_firstRoadTravelPoint = CGPointZero;
  self->_lastRoadTravelPoint = v8;
  [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer cancel];
  [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer cancel];
  self->_flags.shouldTriggerAlternativeKeyActivation = 0;
  self->_keyboardAlternativesVisible = 0;
  [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer cancel];
  [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer cancel];
  *&self->_flags.continuousPathActivationDesired = 0;
  continuousPathSuggestion = self->_continuousPathSuggestion;
  self->_continuousPathSuggestion = 0;

  self->_flags.isContinuousPathOutsideBounds = 0;
  if (self->_flags.inPassthroughMode)
  {
    [(VOTElementManager *)self _finishPassthroughMode];
  }
}

- (void)_setSelectedTextRange:(_NSRange)range onElement:(id)element refreshBraille:(BOOL)braille isVoiceOverSelectionMovement:(BOOL)movement
{
  movementCopy = movement;
  brailleCopy = braille;
  length = range.length;
  location = range.location;
  elementCopy = element;
  [elementCopy selectedTextRange];
  v13 = v12;
  [elementCopy setSelectedTextRange:location refreshBraille:length isVoiceOverSelectionMovement:{brailleCopy, movementCopy}];

  if ((!v13 && length || v13 && !length) && !self->_inTextProcessingRotorMode)
  {
    self->_flags.shouldUpdateRotorForElement = 1;
  }
}

- (_NSRange)_rangeOfLine:(id)line inBookContent:(id)content
{
  contentCopy = content;
  v6 = [line stringByReplacingOccurrencesOfString:@"" withString:&stru_1001CBF90];
  v7 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
  v8 = [v6 stringByTrimmingCharactersInSet:v7];

  if (v8)
  {
    v9 = v8;
    v10 = 0;
    v11 = [v9 length] / 0xA;
    do
    {
      v12 = v9;
      v13 = [contentCopy rangeOfString:v9];
      v15 = v14;
      v9 = [v9 substringToIndex:{objc_msgSend(v9, "length") - v11}];

      if (v10 > 8)
      {
        break;
      }

      ++v10;
    }

    while (v13 == 0x7FFFFFFFFFFFFFFFLL);
    if (v13 == 0x7FFFFFFFFFFFFFFFLL)
    {
      v15 = 0;
    }
  }

  else
  {
    v15 = 0;
    v13 = 0x7FFFFFFFFFFFFFFFLL;
  }

  v16 = v13;
  v17 = v15;
  result.length = v17;
  result.location = v16;
  return result;
}

- (void)_handleCurrentContentReadingLineUpdated:(id)updated
{
  updatedCopy = updated;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v4 = [updatedCopy objectForKey:@"lineString"];

    if (v4)
    {
      v5 = [updatedCopy objectForKey:@"lineString"];
      v6 = [v5 copy];
      bookLineString = self->_bookLineString;
      self->_bookLineString = v6;
    }

    else
    {
      v8 = [updatedCopy objectForKey:@"lineNumber"];

      if (!v8)
      {
LABEL_7:
        self->_bookUpdatedCurrentLine = 1;
        goto LABEL_8;
      }

      v5 = [updatedCopy objectForKey:@"lineNumber"];
      self->_bookLineNumber = [v5 integerValue];
    }

    goto LABEL_7;
  }

LABEL_8:

  _objc_release_x1();
}

- (void)_handleBookContentMovement:(id)movement direction:(int64_t)direction unit:(int64_t)unit generateOutput:(BOOL)output
{
  outputCopy = output;
  movementCopy = movement;
  bookCursorPosition = self->_bookCursorPosition;
  value = [movementCopy value];
  v12 = [movementCopy attributedValueForRange:{0, objc_msgSend(value, "length")}];

  if (![v12 length])
  {
    pageContent = [movementCopy pageContent];

    v12 = pageContent;
  }

  v14 = [v12 length];
  v15 = self->_bookCursorPosition;
  if (v15 == 0x7FFFFFFFFFFFFFFFLL || (bookLineNumber = self->_bookLineNumber, bookLineNumber == -1) || self->_bookLineRange.location == 0x7FFFFFFF || !self->_bookLineRange.length)
  {
    v17 = [movementCopy stringForLineNumber:0];
    if ([v17 length])
    {
      objc_storeStrong(&self->_bookLineString, v17);
      if ([movementCopy supportsRangeForLineNumber])
      {
        v18 = [movementCopy rangeForLineNumber:0];
      }

      else
      {
        v18 = [(VOTElementManager *)self _rangeOfLine:self->_bookLineString inBookContent:v12];
      }

      self->_bookLineRange.location = v18;
      self->_bookLineRange.length = v19;
      self->_bookCursorPosition = 0;
      self->_bookLineNumber = 0;
    }

    v15 = self->_bookCursorPosition;
    bookLineNumber = self->_bookLineNumber;
  }

  if ((unit - 1) <= 1)
  {
    v90 = v14;
    if (unit == 1)
    {
      if (direction == 1 && v15 < v14)
      {
        v20 = v15 & ~(v15 >> 63);
      }

      else
      {
        v23 = 0;
        v21 = 0x7FFFFFFFFFFFFFFFLL;
        if (direction != 2 || (v20 = v15 - 1, v15 < 1))
        {
LABEL_30:
          if ([(VOTElementManager *)self _handleMovementForElementFollowingElement:movementCopy direction:direction unit:unit mode:1])
          {
            goto LABEL_87;
          }

          if ([movementCopy readingContentCausesPageTurn])
          {
            selfCopy2 = self;
            directionCopy4 = direction;
            unitCopy = unit;
            goto LABEL_33;
          }

          goto LABEL_71;
        }
      }

      v24 = [v12 rangeOfComposedCharacterSequenceAtIndex:v20];
    }

    else
    {
      v24 = [v12 wordFromPosition:v15 inDirection:direction];
    }

    v21 = v24;
    v23 = v25;
    if (v24 != 0x7FFFFFFF && v24 != 0x7FFFFFFFFFFFFFFFLL)
    {
      if (direction == 1)
      {
        v30 = v25;
      }

      else
      {
        v30 = 0;
      }

      v31 = v24 + v30;
      self->_bookCursorPosition = v31;
      location = self->_bookLineRange.location;
      if (v31 >= location)
      {
        if (v31 > self->_bookLineRange.length + location)
        {
          ++self->_bookLineNumber;
          v36 = [movementCopy stringForLineNumber:?];
          if (v36 || ([(VOTElementManager *)self _currentTextLineInBookElement:0], (v36 = objc_claimAutoreleasedReturnValue()) != 0))
          {
            v92 = bookLineNumber;
            v37 = v23;
            directionCopy2 = direction;
            bookLineString = self->_bookLineString;
            self->_bookLineString = v36;
            v39 = v36;

            direction = directionCopy2;
            v23 = v37;
            bookLineNumber = v92;
          }

          else
          {
            --self->_bookLineNumber;
            self->_bookCursorPosition = v90;
          }
        }
      }

      else
      {
        v33 = self->_bookLineNumber;
        v26 = v33 - 1;
        if (v33 >= 1)
        {
          self->_bookLineNumber = v26;
          v34 = [movementCopy stringForLineNumber:?];
          if (!v34)
          {
            v34 = [(VOTElementManager *)self _currentTextLineInBookElement:0];
          }

          v35 = self->_bookLineString;
          self->_bookLineString = v34;
        }
      }

      if (self->_bookLineNumber != bookLineNumber && [(NSString *)self->_bookLineString length])
      {
        if ([movementCopy supportsRangeForLineNumber])
        {
          v40 = [movementCopy rangeForLineNumber:self->_bookLineNumber];
        }

        else
        {
          v40 = [(VOTElementManager *)self _rangeOfLine:self->_bookLineString inBookContent:v12];
        }

        self->_bookLineRange.location = v40;
        self->_bookLineRange.length = v41;
      }

      goto LABEL_71;
    }

    goto LABEL_30;
  }

  if (unit != 3)
  {
    v23 = 0;
    v21 = 0x7FFFFFFFFFFFFFFFLL;
    goto LABEL_71;
  }

  v91 = v14;
  v21 = self->_bookLineRange.location;
  v22 = self->_bookLineRange.length + v21;
  v23 = v15 - v21;
  if (v15 > v21 && v22 > v15)
  {
    if (direction != 1)
    {
LABEL_56:
      self->_bookCursorPosition = v21;
      goto LABEL_71;
    }

LABEL_45:
    v23 = v22 - v15;
    self->_bookCursorPosition = v22;
    v21 = v15;
    goto LABEL_71;
  }

  if (direction == 1)
  {
    if (v15 == v21)
    {
      goto LABEL_45;
    }

    v89 = 1;
  }

  else
  {
    v89 = -1;
    if (direction == 2 && v22 == v15)
    {
      goto LABEL_56;
    }
  }

  directionCopy3 = direction;
  v42 = v89 + bookLineNumber;
  if (v89 + bookLineNumber < 0)
  {
    direction = directionCopy3;
    if ([(VOTElementManager *)self _handleMovementForElementFollowingElement:movementCopy direction:directionCopy3 unit:3 mode:1])
    {
      goto LABEL_87;
    }

    v23 = 0;
    v21 = 0x7FFFFFFFFFFFFFFFLL;
  }

  else
  {
    v43 = movementCopy;
    v88 = outputCopy;
    v87 = bookCursorPosition;
    while (1)
    {
      v44 = [v43 stringForLineNumber:v42];
      if (![v44 length])
      {

LABEL_91:
        v23 = 0;
        v21 = 0x7FFFFFFFFFFFFFFFLL;
        direction = directionCopy3;
        goto LABEL_92;
      }

      if ([movementCopy supportsRangeForLineNumber])
      {
        v21 = [movementCopy rangeForLineNumber:v42];
        v86 = v45;
      }

      else
      {
        pageContent2 = [movementCopy pageContent];
        v21 = [(VOTElementManager *)self _rangeOfLine:v44 inBookContent:pageContent2];
        v86 = v47;
      }

      v48 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
      v49 = [v44 stringByTrimmingCharactersInSet:v48];

      if ([v49 length])
      {
        break;
      }

      v42 += v89;

      v43 = movementCopy;
      outputCopy = v88;
      bookCursorPosition = v87;
      if (v42 < 0)
      {
        goto LABEL_91;
      }
    }

    self->_bookLineRange.location = v21;
    self->_bookLineRange.length = v86;
    self->_bookLineNumber = v42;
    v82 = self->_bookLineString;
    self->_bookLineString = v44;

    v83 = self->_bookLineRange.location;
    direction = directionCopy3;
    outputCopy = v88;
    if (directionCopy3 == 1)
    {
      v83 += self->_bookLineRange.length;
    }

    self->_bookCursorPosition = v83;

    v23 = v86;
    bookCursorPosition = v87;
    if (v21 < v91)
    {
      goto LABEL_71;
    }
  }

LABEL_92:
  if ([(VOTElementManager *)self _handleMovementForElementFollowingElement:movementCopy direction:direction unit:3 mode:1])
  {
    goto LABEL_87;
  }

  if ([movementCopy readingContentCausesPageTurn])
  {
    self->_bookDidTurnPage = 1;
    selfCopy2 = self;
    directionCopy4 = direction;
    unitCopy = 3;
LABEL_33:
    if ([(VOTElementManager *)selfCopy2 _handleBookNavigateOverPageBoundary:directionCopy4 unit:unitCopy])
    {
      goto LABEL_87;
    }
  }

LABEL_71:
  if (bookLineNumber != self->_bookLineNumber)
  {
    [movementCopy frameForLineNumber:?];
    v51 = v50;
    v53 = v52;
    v55 = v54;
    v57 = v56;
    +[VOTElement systemWideElement];
    v59 = v58 = v23;
    [v59 convertRect:objc_msgSend(movementCopy fromContextId:{"windowContextId"), v51, v53, v55, v57}];
    self->_lineFrame.origin.x = v60;
    self->_lineFrame.origin.y = v61;
    self->_lineFrame.size.width = v62;
    self->_lineFrame.size.height = v63;

    v64 = +[VOTDisplayManager displayManager];
    [v64 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

    v23 = v58;
  }

  if (unit == 4 || v15 != self->_bookCursorPosition)
  {
    if (unit == 2)
    {
      if ([movementCopy supportsFrameForRange] && (objc_msgSend(movementCopy, "frameForRange:", v21, v23), x = v95.origin.x, y = v95.origin.y, width = v95.size.width, height = v95.size.height, !CGRectIsEmpty(v95)))
      {
        v69 = v23;
        directionCopy7 = direction;
        v71 = +[VOTElement systemWideElement];
        [v71 convertRect:objc_msgSend(movementCopy fromContextId:{"windowContextId"), x, y, width, height}];
        self->_lineFrame.origin.x = v72;
        self->_lineFrame.origin.y = v73;
        self->_lineFrame.size.width = v74;
        self->_lineFrame.size.height = v75;

        v76 = +[VOTDisplayManager displayManager];
        [v76 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];
      }

      else
      {
        v69 = v23;
        directionCopy7 = direction;
      }
    }

    else
    {
      v69 = v23;
      directionCopy7 = direction;
      if (unit == 4)
      {
        v69 = [v12 length];
        v21 = 0;
      }
    }

    v77 = +[VOTBrailleManager manager];
    [v77 setLastRefreshTrigger:1];

    [(VOTElementManager *)self _setSelectedTextRange:self->_bookCursorPosition onElement:0 refreshBraille:movementCopy, 1];
    if (directionCopy7 != 1)
    {
      bookCursorPosition = self->_bookCursorPosition;
    }

    v78 = +[VOTBrailleManager manager];
    [v78 setTrailingBookCursorPosition:bookCursorPosition];

    v79 = +[VOTBrailleManager manager];
    [v79 setBookCursorPosition:self->_bookCursorPosition];

    selectedTextRange = [movementCopy selectedTextRange];
    [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v81, 0];
    v23 = v69;
  }

  self->_highlightedCharacterRange.location = v21;
  self->_highlightedCharacterRange.length = v23;
  if (outputCopy)
  {
    [(VOTElementManager *)self outputTextSegmentForRange:v21 string:v23 element:v12 usePhonetics:movementCopy segment:0, unit];
  }

LABEL_87:
}

- (BOOL)_handleMovementForElementFollowingElement:(id)element direction:(int64_t)direction unit:(int64_t)unit mode:(int64_t)mode
{
  elementCopy = element;
  v11 = elementCopy;
  if (direction == 1)
  {
    nextTextNavigationElement = [elementCopy nextTextNavigationElement];
  }

  else
  {
    if (direction != 2)
    {
      v13 = 0;
LABEL_11:
      v14 = 0;
      goto LABEL_20;
    }

    nextTextNavigationElement = [elementCopy previousTextNavigationElement];
  }

  v13 = nextTextNavigationElement;
  v14 = 0;
  if (nextTextNavigationElement && nextTextNavigationElement != v11)
  {
    if ([(VOTElementManager *)self _setCurrentElement:nextTextNavigationElement])
    {
      if (direction == 1)
      {
        [(VOTElementManager *)self _resetElementUnitIndexes];
      }

      else
      {
        [(VOTElementManager *)self _setElementUnitIndexesToEndOfElement:v13];
      }

      [(VOTElementManager *)self _updateCursorFrameForElementIfNeeded:v13];
      switch(mode)
      {
        case 3:
          [(VOTElementManager *)self _outputNextTextSegmentUnit:unit direction:direction];
          break;
        case 2:
          [(VOTElementManager *)self _moveCursorForElement:v13 direction:direction unit:unit];
          break;
        case 1:
          v14 = 1;
          [(VOTElementManager *)self _handleBookContentMovement:v13 direction:direction unit:unit generateOutput:1];
          goto LABEL_20;
      }

      v14 = 1;
      goto LABEL_20;
    }

    goto LABEL_11;
  }

LABEL_20:

  return v14;
}

- (id)_convertTextMarkerArrayToString:(id)string addInContentExtras:(BOOL)extras
{
  extrasCopy = extras;
  stringCopy = string;
  v5 = [objc_allocWithZone(NSMutableString) init];
  v6 = +[NSMutableArray array];
  v38 = 0u;
  v39 = 0u;
  v40 = 0u;
  v41 = 0u;
  v7 = stringCopy;
  v8 = [v7 countByEnumeratingWithState:&v38 objects:v43 count:16];
  v30 = v7;
  v31 = v6;
  if (v8)
  {
    v9 = v8;
    v10 = *v39;
    v32 = kAXImageTrait;
    do
    {
      for (i = 0; i != v9; i = i + 1)
      {
        if (*v39 != v10)
        {
          objc_enumerationMutation(v7);
        }

        v12 = *(*(&v38 + 1) + 8 * i);
        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          v13 = +[NSCharacterSet whitespaceCharacterSet];
          v14 = [v12 stringByTrimmingCharactersInSet:v13];

          [v5 appendString:v14];
LABEL_8:

          continue;
        }

        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          label = [v12 label];
          v14 = [label stringByReplacingOccurrencesOfString:@"\n" withString:@" "];

          if ([v12 doesHaveTraits:v32])
          {
            v16 = [v14 stringByReplacingOccurrencesOfString:@"image" withString:&stru_1001CBF90];

            v14 = v16;
          }

          if ([v14 length])
          {
            [v5 appendFormat:@" %@ ", v14];
          }

          if (extrasCopy)
          {
            arrayOfTraitsAsStrings = [v12 arrayOfTraitsAsStrings];
            v18 = [arrayOfTraitsAsStrings componentsJoinedByString:@" "];
            if ([v18 length])
            {
              if ([v5 length])
              {
                [v5 appendString:@" "];
              }

              [v5 appendString:v18];
              v19 = +[NSValue valueWithRange:](NSValue, "valueWithRange:", [v5 length] - objc_msgSend(v18, "length"), objc_msgSend(v18, "length"));
              v6 = v31;
              [v31 addObject:v19];

              v7 = v30;
            }
          }

          goto LABEL_8;
        }
      }

      v9 = [v7 countByEnumeratingWithState:&v38 objects:v43 count:16];
    }

    while (v9);
  }

  if ([v6 count])
  {
    v20 = [AXAttributedString axAttributedStringWithString:v5];
    v34 = 0u;
    v35 = 0u;
    v36 = 0u;
    v37 = 0u;
    v21 = v6;
    v22 = [v21 countByEnumeratingWithState:&v34 objects:v42 count:16];
    if (v22)
    {
      v23 = v22;
      v24 = *v35;
      do
      {
        for (j = 0; j != v23; j = j + 1)
        {
          if (*v35 != v24)
          {
            objc_enumerationMutation(v21);
          }

          v26 = UIAccessibilityTokenLowPitch;
          rangeValue = [*(*(&v34 + 1) + 8 * j) rangeValue];
          [v20 setAttribute:kCFBooleanTrue forKey:v26 withRange:{rangeValue, v28}];
        }

        v23 = [v21 countByEnumeratingWithState:&v34 objects:v42 count:16];
      }

      while (v23);
    }

    v7 = v30;
    v6 = v31;
  }

  else
  {
    v20 = v5;
  }

  return v20;
}

- (id)_currentTextLineInBookElement:(BOOL)element
{
  bookLineString = self->_bookLineString;
  if (bookLineString)
  {
    v4 = bookLineString;
  }

  else
  {
    elementCopy = element;
    _currentElement = [(VOTElementManager *)self _currentElement];
    v8 = [_currentElement textMarkerArrayOfText:self->_lineArray];

    v19 = 0u;
    v20 = 0u;
    v17 = 0u;
    v18 = 0u;
    v9 = v8;
    v10 = [v9 countByEnumeratingWithState:&v17 objects:v21 count:16];
    if (v10)
    {
      v11 = *v18;
      while (2)
      {
        for (i = 0; i != v10; ++i)
        {
          if (*v18 != v11)
          {
            objc_enumerationMutation(v9);
          }

          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            LOBYTE(v10) = 1;
            goto LABEL_13;
          }
        }

        v10 = [v9 countByEnumeratingWithState:&v17 objects:v21 count:16];
        if (v10)
        {
          continue;
        }

        break;
      }
    }

LABEL_13:

    v13 = [(VOTElementManager *)self _convertTextMarkerArrayToString:v9 addInContentExtras:elementCopy, v17];
    v14 = v13;
    if ((v10 & 1) != 0 || [v13 rangeOfString:@"\n"] == 0x7FFFFFFFFFFFFFFFLL)
    {
      v4 = v14;
    }

    else
    {
      lineArray = self->_lineArray;
      self->_lineArray = 0;

      v4 = 0;
    }
  }

  return v4;
}

- (BOOL)_bookContentElementInteraction:(CGPoint)interaction element:(id)element
{
  y = interaction.y;
  x = interaction.x;
  elementCopy = element;
  v8 = +[VOTElement systemWideElement];
  [v8 convertPoint:objc_msgSend(elementCopy toContextId:{"windowContextId"), x, y}];
  v10 = v9;
  v12 = v11;

  v13 = [objc_allocWithZone(VOTElement) initWithPosition:elementCopy startWithElement:{v10, v12}];
  kAXLinkTrait = [v13 doesHaveTraits:kAXTextEntryTrait | kAXButtonTrait | kAXLinkTrait];
  if (kAXLinkTrait && ([v13 isEqual:self->_bookSubelement] & 1) == 0)
  {
    [(VOTElementManager *)self _echoDifferentElement:v13 forEvent:0];
    objc_storeStrong(&self->_bookSubelement, v13);
  }

  return kAXLinkTrait;
}

- (void)_echoLineInBookElement:(id)element forEvent:(id)event
{
  elementCopy = element;
  eventCopy = event;
  self->_flags.isReadingAllBook = 0;
  if (self->_flags.lastEventWasIdle)
  {
    lineArray = self->_lineArray;
    self->_lineArray = 0;
  }

  [eventCopy touchPoint];
  v10 = v9;
  v12 = v11;
  v13 = [elementCopy lineNumberForPoint:?];
  if (v13 != 0x7FFFFFFF)
  {
    v27 = v13;
    if (self->_bookLineNumber == v13 && !self->_flags.shouldSpeakSameLineTouched)
    {
      v35 = 0;
      v36 = 0;
      goto LABEL_72;
    }

    [elementCopy frameForLineNumber:v13];
    x = v28;
    v31 = v30;
    height = v33;
    width = v32;
    v34 = [elementCopy stringForLineNumber:v27];
    v35 = v34;
    if (![v35 length])
    {
      [(VOTElementManager *)self _echoNoElementForEvent:eventCopy];
      v36 = v35;
      goto LABEL_72;
    }

    self->_bookLineNumber = v27;
    objc_storeStrong(&self->_bookLineString, v34);
    self->_flags.shouldSpeakSameLineTouched = 0;
    v36 = v35;
    goto LABEL_52;
  }

  [elementCopy elementFrameLocation:3];
  v132 = v14;
  v133 = v15;
  [elementCopy elementFrameLocation:4];
  v17 = v16;
  v19 = v18;
  [elementCopy elementFrameLocation:5];
  v134 = v20;
  deviceOrientation = [VOTSharedWorkspace deviceOrientation];
  selfCopy = self;
  v22 = eventCopy;
  if (deviceOrientation == 3)
  {
    v37 = v133;
    v23 = [NSValue valueWithPoint:v10, v133 + 3.0];
    v24 = [NSValue valueWithPoint:v10, v37 + (v19 - v37) / 3.0];
    v25 = [NSValue valueWithPoint:v10, v37 + (v19 - v37 + v19 - v37) / 3.0];
    v26 = v19 + -3.0;
    goto LABEL_12;
  }

  if (deviceOrientation == 4)
  {
    v23 = [NSValue valueWithPoint:v10, v19 + 3.0];
    v24 = [NSValue valueWithPoint:v10, v19 + (v133 - v19) / 3.0];
    v25 = [NSValue valueWithPoint:v10, v19 + (v133 - v19 + v133 - v19) / 3.0];
    v26 = v133 + -3.0;
LABEL_12:
    v38 = v10;
    goto LABEL_14;
  }

  v39 = v132;
  v23 = [NSValue valueWithPoint:v132 + 3.0, v12];
  v24 = [NSValue valueWithPoint:v39 + (v17 - v39) / 3.0, v12];
  v25 = [NSValue valueWithPoint:v39 + (v17 - v39 + v17 - v39) / 3.0, v12];
  v38 = v17 + -3.0;
  v26 = v12;
LABEL_14:
  v40 = [NSValue valueWithPoint:v38, v26];
  v130 = v22;
  y = CGRectZero.origin.y;
  height = CGRectZero.size.height;
  width = CGRectZero.size.width;
  v41 = objc_allocWithZone(NSMutableArray);
  v42 = [NSValue valueWithPoint:v10, v12];
  v43 = v40;
  v123 = v25;
  v125 = v24;
  v126 = v23;
  v44 = [v41 initWithObjects:{v42, v23, v24, v25, v40, 0}];

  v122 = v44;
  v45 = [elementCopy textMarkersForPoints:v44];
  showsDualPages = [elementCopy showsDualPages];
  v138 = 0u;
  v139 = 0u;
  v140 = 0u;
  v141 = 0u;
  obj = v45;
  v46 = [obj countByEnumeratingWithState:&v138 objects:v142 count:16];
  if (v46)
  {
    v47 = v46;
    v48 = 0;
    v49 = 0;
    v50 = *v139;
    v51 = v17 - v132;
LABEL_16:
    v52 = 0;
    v53 = v48;
    v54 = v49;
    while (1)
    {
      if (*v139 != v50)
      {
        objc_enumerationMutation(obj);
      }

      v48 = [elementCopy textLineStartMarker:*(*(&v138 + 1) + 8 * v52)];

      v49 = [elementCopy textLineEndMarker:v48];

      v55 = [NSArray arrayWithObjects:v48, v49, 0];
      [elementCopy textMarkerFrame:v55];
      v57 = v56;
      v59 = v58;
      v61 = v60;
      v63 = v62;

      v64 = +[VOTElement systemWideElement];
      [v64 convertRect:objc_msgSend(elementCopy fromContextId:{"windowContextId"), v57, v59, v61, v63}];
      v66 = v65;
      v68 = v67;
      v70 = v69;
      v72 = v71;

      if (deviceOrientation == 3)
      {
        v73 = v43;
        if (!showsDualPages)
        {
          v72 = v19 - v133;
          goto LABEL_31;
        }

        if (v68 < v134)
        {
          v72 = v134 - v133;
LABEL_31:
          v68 = v133;
          goto LABEL_37;
        }

        if (v68 < v19)
        {
          v72 = v19 - v134;
          goto LABEL_36;
        }
      }

      else
      {
        v73 = v43;
        if (deviceOrientation != 4)
        {
          v70 = v51;
          v66 = v132;
          goto LABEL_37;
        }

        if (!showsDualPages)
        {
          v72 = v133 - v19;
          goto LABEL_29;
        }

        if (v68 < v134)
        {
          v72 = v134 - v19;
LABEL_29:
          v68 = v19;
          goto LABEL_37;
        }

        if (v68 < v133)
        {
          v72 = v133 - v134;
LABEL_36:
          v68 = v134;
        }
      }

LABEL_37:
      v144.origin.x = v66;
      v144.origin.y = v68;
      v144.size.width = v70;
      v144.size.height = v72;
      v143.x = v10;
      v143.y = v12;
      if (CGRectContainsPoint(v144, v143))
      {

        if (!v48)
        {
          self = selfCopy;
          eventCopy = v130;
          v31 = y;
          x = CGRectZero.origin.x;
          goto LABEL_49;
        }

        lastObject = [(NSArray *)selfCopy->_lineArray lastObject];
        v75 = [lastObject isEqual:v49];

        eventCopy = v130;
        v31 = y;
        x = CGRectZero.origin.x;
        if (v75)
        {
          self = selfCopy;
          goto LABEL_49;
        }

        if ([v48 isEqual:v49])
        {
          self = selfCopy;
          [(VOTElementManager *)selfCopy _echoNoElementForEvent:v130];
          goto LABEL_50;
        }

        [(VOTElementManager *)selfCopy _resetElementUnitIndexes];
        v115 = [objc_allocWithZone(NSArray) initWithObjects:{v48, v49, 0}];
        v116 = selfCopy->_lineArray;
        selfCopy->_lineArray = v115;

        v36 = [(VOTElementManager *)selfCopy _currentTextLineInBookElement:0];
        v35 = [(VOTElementManager *)selfCopy _currentTextLineInBookElement:1];
        if ([v35 length])
        {
          v117 = selfCopy;
          if (selfCopy->_lineArray)
          {
            [elementCopy textMarkerFrame:?];
            x = v118;
            v31 = v119;
            height = v121;
            width = v120;
          }
        }

        else
        {
          v117 = selfCopy;
        }

        v76 = 1;
        self = v117;
        goto LABEL_51;
      }

      v52 = v52 + 1;
      v53 = v48;
      v54 = v49;
      if (v47 == v52)
      {
        v47 = [obj countByEnumeratingWithState:&v138 objects:v142 count:16];
        if (v47)
        {
          goto LABEL_16;
        }

        goto LABEL_45;
      }
    }
  }

  v49 = 0;
  v48 = 0;
LABEL_45:

  self = selfCopy;
  eventCopy = v130;
  v31 = y;
  x = CGRectZero.origin.x;
  v73 = v43;
LABEL_49:
  [(VOTElementManager *)self _bookContentElementInteraction:elementCopy element:v10, v12];
LABEL_50:
  v76 = 0;
  v35 = 0;
  v36 = 0;
LABEL_51:

  if (v76)
  {
LABEL_52:
    if (![(VOTElementManager *)self _bookContentElementInteraction:elementCopy element:v10, v12])
    {
      v77 = +[VOTElement systemWideElement];
      [v77 convertRect:objc_msgSend(elementCopy fromContextId:{"windowContextId"), x, v31, width, height}];
      v79 = v78;
      v81 = v80;
      v83 = v82;
      v85 = v84;

      bookSubelement = self->_bookSubelement;
      self->_bookSubelement = 0;

      if ([v35 length])
      {
        if ([elementCopy supportsRangeForLineNumber])
        {
          location = [elementCopy rangeForLineNumber:self->_bookLineNumber];
          self->_bookLineRange.location = location;
          self->_bookLineRange.length = v88;
        }

        else
        {
          pageContent = [elementCopy pageContent];
          self->_bookLineRange.location = [(VOTElementManager *)self _rangeOfLine:v36 inBookContent:pageContent];
          self->_bookLineRange.length = v90;

          location = self->_bookLineRange.location;
        }

        self->_bookCursorPosition = location;
        if (location == 0x7FFFFFFFFFFFFFFFLL)
        {
          self->_bookCursorPosition = -1;
        }

        else
        {
          [(VOTElementManager *)self _setSelectedTextRange:location onElement:0 refreshBraille:elementCopy, 0];
          v91 = +[VOTBrailleManager manager];
          [v91 setBookCursorPosition:self->_bookCursorPosition];

          selectedTextRange = [elementCopy selectedTextRange];
          [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v93, 0];
        }

        self->_highlightedCharacterRange = self->_bookLineRange;
        v94 = [objc_allocWithZone(VOTOutputRequest) init];
        scrollStatus = [elementCopy scrollStatus];
        language = [elementCopy language];
        v137 = scrollStatus;
        if (([scrollStatus isEqualToString:self->_bookPageScrollString] & 1) == 0)
        {
          v97 = [v94 addString:scrollStatus withLanguage:language];
          if ([VOTSharedWorkspace typingPitchChangeEnabled])
          {
            [v94 lastAction];
            v99 = v98 = self;
            LODWORD(v100) = 1062836634;
            v101 = [NSNumber numberWithFloat:v100];
            [v99 setObject:v101 forVariant:32];

            self = v98;
            scrollStatus = v137;
          }

          objc_storeStrong(&self->_bookPageScrollString, scrollStatus);
        }

        selfCopy2 = self;
        systemSpokenLanguage = [VOTSharedWorkspace systemSpokenLanguage];
        v104 = sub_100051E20(systemSpokenLanguage, language);

        if (v104)
        {

          language = 0;
        }

        v131 = eventCopy;
        if ([v35 isAXAttributedString])
        {
          v105 = [v94 addAttributedString:v35 withLanguage:language];
        }

        else
        {
          v106 = [v94 addString:v35 withLanguage:language];
        }

        lastAction = [v94 lastAction];
        [lastAction setPerformPunctuationTranslation:1];

        lastAction2 = [v94 lastAction];
        [lastAction2 setReplaceCommas:1];

        lastAction3 = [v94 lastAction];
        [lastAction3 setObject:kCFBooleanTrue forVariant:59];

        [v94 setGeneratesBraille:1];
        v110 = selfCopy2;
        [v94 setBrailleLineRange:{selfCopy2->_bookLineRange.location, selfCopy2->_bookLineRange.length}];
        [v94 setBrailleType:4];
        [(VOTElementManager *)selfCopy2 sendRequest:v94];
        selfCopy2->_lineFrame.origin.x = v79;
        selfCopy2->_lineFrame.origin.y = v81;
        selfCopy2->_lineFrame.size.width = v83;
        selfCopy2->_lineFrame.size.height = v85;
        v111 = +[VOTDisplayManager displayManager];
        windowContextId = [elementCopy windowContextId];
        uiElement = [elementCopy uiElement];
        v114 = [uiElement numberWithAXAttribute:2123];
        [v111 setCursorFrame:0 withPath:windowContextId withContextId:objc_msgSend(v114 withDisplayId:"unsignedIntValue") element:elementCopy forceRefresh:{0, v79, v81, v83, v85}];

        v110->_textRangeBeingDisplayed = 1;
        eventCopy = v131;
      }
    }
  }

LABEL_72:
}

- (BOOL)_handleMoreBookContentElements
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  pageContent = [_currentElement pageContent];

  v15[0] = _NSConcreteStackBlock;
  v15[1] = 3221225472;
  v15[2] = sub_100065B90;
  v15[3] = &unk_1001C8E40;
  v5 = pageContent;
  v16 = v5;
  _currentElement2 = [(VOTElementManager *)self _currentElement];
  v7 = [(VOTElementManager *)self _nearestElementWithMatch:v15 startElement:_currentElement2 forward:1];

  if (v7 && (-[VOTElementManager _currentElement](self, "_currentElement"), v8 = objc_claimAutoreleasedReturnValue(), v9 = [v7 isEqual:v8], v8, (v9 & 1) == 0))
  {
    v13[0] = _NSConcreteStackBlock;
    v13[1] = 3221225472;
    v13[2] = sub_100065C2C;
    v13[3] = &unk_1001C7778;
    v13[4] = self;
    v11 = v7;
    v14 = v11;
    [v11 scrollToElementForDirectional:1 withCompletion:v13];
    [(VOTElementManager *)self _setCurrentElement:v11];
    if (self->_flags.isReadingAllBook && [v11 doesHaveTraits:kAXWebContentTrait])
    {
      [(VOTElementManager *)self _continueReadAllWithElement:v11 setCurrentElement:0];
    }

    else
    {
      [(VOTElementManager *)self _handleReadAllBookContent:v11 fromTop:1];
    }

    v10 = 1;
  }

  else
  {
    v10 = 0;
  }

  return v10;
}

- (void)_handleBookPageFlipAndContinue
{
  currentElement = [(VOTElementManager *)self currentElement];
  isReadingContent = [currentElement isReadingContent];

  if ((isReadingContent & 1) != 0 || !self->_flags.userInitiatedBooksScroll)
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    scrollNextPage = [_currentElement scrollNextPage];

    if ((scrollNextPage & 1) == 0)
    {
      _currentElement2 = [(VOTElementManager *)self _currentElement];
      [_currentElement2 scrollRightPage];
    }
  }

  else
  {
    self->_flags.isReadingAll = 0;
    self->_flags.userInitiatedBooksScroll = 0;
  }
}

- (BOOL)_handleBookNavigateOverPageBoundary:(int64_t)boundary unit:(int64_t)unit
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  v8 = _currentElement;
  if (boundary == 2)
  {
    if (([_currentElement scrollPreviousPage] & 1) == 0)
    {
      [v8 scrollLeftPage];
    }
  }

  else
  {
    if (boundary != 1)
    {
      v9 = 0;
      goto LABEL_9;
    }

    if (([_currentElement scrollNextPage] & 1) == 0)
    {
      [v8 scrollRightPage];
    }
  }

  v9 = 1;
  self->_flags.previousScrollWasBookContentMovement = 1;
  self->_bookLastContentMovementUnit = unit;
  self->_bookLastContentMovementDirection = boundary;
LABEL_9:

  return v9;
}

- (void)_startReadingBookForNewPage
{
  application = [(VOTElement *)self->_currentElement application];
  if (!application)
  {
    firstObject = [(NSArray *)self->_currentApplications firstObject];
    application = [firstObject application];
  }

  firstElementInApplication = [application firstElementInApplication];
  if (!firstElementInApplication)
  {
    if (!self->_inUnitTestingMode)
    {
      _AXAssert();
    }

    firstElementInApplication = self->_currentElement;
  }

  v13 = firstElementInApplication;
  if (!self->_flags.lastScrollWasFromBraillePanning || self->_bookLastContentMovementDirection != 2 || ([application lastContainedElement], v6 = objc_claimAutoreleasedReturnValue(), -[VOTElementManager _nearestElementWithMatch:startElement:forward:](self, "_nearestElementWithMatch:startElement:forward:", &stru_1001C8E80, v6, 0), v7 = objc_claimAutoreleasedReturnValue(), v6, firstElementInApplication = v13, !v7))
  {
    if (![(VOTElement *)firstElementInApplication readingContentCausesPageTurn]&& ![(VOTElement *)v13 isReadingContent]&& ![(VOTElement *)v13 includeDuringContentReading]|| (v8 = v13) == 0)
    {
      v8 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C8E80 startElement:v13];
      if (!v8)
      {
        goto LABEL_21;
      }
    }

    v7 = v8;
  }

  isReadingAllBook = self->_flags.isReadingAllBook;
  v10 = [v7 isEqual:self->_currentElement];
  [(VOTElementManager *)self _setCurrentElement:v7];
  if (v10)
  {
    v11 = +[VOTBrailleManager manager];
    [v11 setBrailleElement:v7];
  }

  [(VOTElementManager *)self _handleReadFromTop:0];
  if (!isReadingAllBook)
  {
    self->_flags.isReadingAllBook = 0;
    bookPageContentOutputRequest = self->_bookPageContentOutputRequest;
    self->_bookPageContentOutputRequest = 0;
  }

  [(VOTElementFetcher *)self->_fetchManager forceUpdate];
  [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v13];

LABEL_21:
}

- (void)_handleReadAllBookContent:(id)content fromTop:(BOOL)top
{
  topCopy = top;
  contentCopy = content;
  if ([VOTSharedWorkspace speechMuted])
  {
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent UnknownCommand];
    [v7 sendEvent:v8];
  }

  else
  {
    *&self->_flags.isReadingAllBook = 1;
    [contentCopy updatePageContent];
    pageContent = [contentCopy pageContent];
    if (([contentCopy isReadingContent] & 1) == 0)
    {
      [contentCopy updateValue];
      value = [contentCopy value];

      topCopy = 1;
      pageContent = value;
    }

    v11 = +[VOTDisplayManager displayManager];
    [v11 setCursorFrameForElement:0];

    if (topCopy && !self->_bookUpdatedCurrentLine)
    {
      v12 = 0;
    }

    else if ([contentCopy supportsRangeForLineNumber])
    {
      v12 = [contentCopy rangeForLineNumber:self->_bookLineNumber];
    }

    else
    {
      bookLineString = self->_bookLineString;
      if (bookLineString)
      {
        v14 = bookLineString;
      }

      else
      {
        v34 = pageContent;
        v15 = [contentCopy textMarkerArrayOfText:self->_lineArray];
        v16 = [v15 mutableCopyWithZone:0];
        v35 = 0u;
        v36 = 0u;
        v37 = 0u;
        v38 = 0u;
        v17 = v15;
        v18 = [v17 countByEnumeratingWithState:&v35 objects:v39 count:16];
        if (v18)
        {
          v19 = v18;
          v20 = *v36;
          v21 = kAXImageTrait;
          do
          {
            v22 = 0;
            do
            {
              if (*v36 != v20)
              {
                objc_enumerationMutation(v17);
              }

              v23 = *(*(&v35 + 1) + 8 * v22);
              objc_opt_class();
              if ((objc_opt_isKindOfClass() & 1) != 0 && [v23 doesHaveTraits:v21])
              {
                [v16 removeObject:v23];
              }

              v22 = v22 + 1;
            }

            while (v19 != v22);
            v19 = [v17 countByEnumeratingWithState:&v35 objects:v39 count:16];
          }

          while (v19);
        }

        v14 = [(VOTElementManager *)self _convertTextMarkerArrayToString:v16 addInContentExtras:0];

        pageContent = v34;
      }

      v12 = [(VOTElementManager *)self _rangeOfLine:v14 inBookContent:pageContent];
    }

    if (v12 >= [pageContent length])
    {
      v24 = 0;
    }

    else
    {
      v24 = v12;
    }

    v25 = [pageContent substringFromIndex:v24];
    v26 = [objc_allocWithZone(VOTOutputRequest) init];
    objc_storeStrong(&self->_bookPageContentOutputRequest, v26);
    [v26 setCompletionDelegate:self];
    language = [contentCopy language];
    systemSpokenLanguage = [VOTSharedWorkspace systemSpokenLanguage];
    v29 = sub_100051E20(systemSpokenLanguage, language);

    if (v29)
    {

      language = 0;
    }

    v30 = [v26 addAttributedString:v25 withLanguage:language];
    lastAction = [v26 lastAction];
    [lastAction setObject:kCFBooleanTrue forVariant:59];

    outputActions = [v26 outputActions];
    [outputActions enumerateObjectsUsingBlock:&stru_1001C8EC0];

    [(VOTElementManager *)self sendRequest:v26];
    v33 = +[VOTUserEventManager sharedInstance];
    [v33 userEventOccurred];

    self->_bookUpdatedCurrentLine = 0;
  }
}

- (void)_stopReadAll
{
  if (self->_flags.isReadingAll)
  {
    v3 = +[VOTOutputManager outputManager];
    [v3 stopSpeakingAtBoundary:1];
    *&self->_flags.isReadingAll = 0;
  }

  self->_shouldReadExplorerElementsAfterSpeechFinished = 0;
}

- (void)_handleReadAllNextElement
{
  _copyMatchBlockAnyElement = [(VOTElementManager *)self _copyMatchBlockAnyElement];
  fetchManager = self->_fetchManager;
  _currentElement = [(VOTElementManager *)self _currentElement];
  elementSearchGeneration = self->_elementSearchGeneration;
  LOBYTE(v6) = [VOTSharedWorkspace navigationStyleHonorsGroups];
  [(VOTElementFetcher *)fetchManager searchForElementInDirection:1 fromElement:_currentElement matchBlock:_copyMatchBlockAnyElement rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:0x7FFFFFFFLL groupNavigationStyle:0, v6];
}

- (BOOL)_prepareStitchedWebReadAll:(id)all request:(id)request setCurrentElement:(BOOL *)element
{
  allCopy = all;
  requestCopy = request;
  uiElement = [allCopy uiElement];
  [VOTSharedWorkspace deviceOrientation];
  v10 = AXReadAllUtilitiesElementsToCombineForReadAll();

  v84 = +[NSMutableString string];
  v11 = allCopy;
  v82 = [objc_allocWithZone(NSMutableArray) init];
  if ([v10 count] == 1)
  {
    firstObject = [v10 firstObject];
    uiElement2 = [v11 uiElement];
    v14 = [firstObject isEqual:uiElement2];

    if (v14)
    {
      v15 = 0;
      v16 = v11;
      goto LABEL_43;
    }
  }

  selfCopy = self;
  v80 = requestCopy;
  y = CGRectZero.origin.y;
  width = CGRectZero.size.width;
  height = CGRectZero.size.height;
  v91 = 0u;
  v92 = 0u;
  v89 = 0u;
  v90 = 0u;
  v78 = v10;
  obj = v10;
  v20 = [obj countByEnumeratingWithState:&v89 objects:v94 count:16];
  v79 = v11;
  if (v20)
  {
    v21 = v20;
    v22 = *v90;
    v23 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
    v83 = kAXLinkTrait;
    v24 = height;
    v25 = width;
    v26 = y;
    x = CGRectZero.origin.x;
    v16 = v11;
    v28 = obj;
    do
    {
      v29 = 0;
      v30 = v16;
      do
      {
        if (*v90 != v22)
        {
          objc_enumerationMutation(v28);
        }

        v16 = [v23 + 546 elementWithUIElement:*(*(&v89 + 1) + 8 * v29)];
        v95.origin.x = CGRectZero.origin.x;
        v95.origin.y = y;
        v95.size.width = width;
        v95.size.height = height;
        v97.origin.x = x;
        v97.origin.y = v26;
        v97.size.width = v25;
        v97.size.height = v24;
        v31 = CGRectEqualToRect(v95, v97);
        [v16 frame];
        v36 = v32;
        v37 = v33;
        v38 = v34;
        v39 = v35;
        if (!v31)
        {
          v96.origin.x = x;
          v96.origin.y = v26;
          v96.size.width = v25;
          v96.size.height = v24;
          *&v32 = CGRectUnion(v96, *&v36);
        }

        x = v32;
        v26 = v33;
        v25 = v34;
        v24 = v35;
        v40 = [v84 length];
        label = [v16 label];
        [v84 appendFormat:@"%@ ", label];

        if ([v16 doesHaveTraits:v83])
        {
          v42 = v21;
          v43 = v23;
          v44 = v22;
          v45 = +[AXSettings sharedInstance];
          voiceOverLinkFeedback = [v45 voiceOverLinkFeedback];

          if ((voiceOverLinkFeedback & 2) != 0)
          {
            v48 = sub_1000511CC(off_1001FDDD0, @"element.link.text", @"link");
            v47 = [NSString stringWithFormat:@", %@, ", v48];
            [v84 appendString:v47];
            v49 = [v84 length];
            v50 = v49 - [v47 length];
            v51 = [v47 length];
            v52 = v50;
            v28 = obj;
            v53 = [NSValue valueWithRange:v52, v51];
            [v82 addObject:v53];
          }

          else
          {
            v47 = +[NSValue valueWithRange:](NSValue, "valueWithRange:", v40, [v84 length] - v40);
            [v82 addObject:v47];
          }

          v22 = v44;
          v23 = v43;
          v21 = v42;
        }

        v29 = v29 + 1;
        v30 = v16;
      }

      while (v21 != v29);
      v21 = [v28 countByEnumeratingWithState:&v89 objects:v94 count:16];
    }

    while (v21);
  }

  else
  {
    v24 = height;
    v25 = width;
    v26 = y;
    x = CGRectZero.origin.x;
    v16 = v11;
    v28 = obj;
  }

  v11 = v79;
  requestCopy = v80;
  if ([v84 length])
  {
    v54 = +[AXSettings sharedInstance];
    voiceOverLinkFeedback2 = [v54 voiceOverLinkFeedback];

    v56 = +[AXSettings sharedInstance];
    voiceOverLinkFeedback3 = [v56 voiceOverLinkFeedback];

    if (voiceOverLinkFeedback2 & 8 | (voiceOverLinkFeedback3 & 4) && [v82 count])
    {
      language2 = [AXAttributedString axAttributedStringWithString:v84];
      v85 = 0u;
      v86 = 0u;
      v87 = 0u;
      v88 = 0u;
      v59 = v82;
      v60 = [v59 countByEnumeratingWithState:&v85 objects:v93 count:16];
      if (!v60)
      {
        goto LABEL_35;
      }

      v61 = v60;
      v62 = *v86;
      while (1)
      {
        for (i = 0; i != v61; i = i + 1)
        {
          if (*v86 != v62)
          {
            objc_enumerationMutation(v59);
          }

          v64 = *(*(&v85 + 1) + 8 * i);
          if ((voiceOverLinkFeedback2 & 8) != 0)
          {
            v65 = UIAccessibilityTokenLowPitch;
            rangeValue = [v64 rangeValue];
            v68 = language2;
            v69 = kCFBooleanTrue;
          }

          else
          {
            if ((voiceOverLinkFeedback3 & 4) == 0)
            {
              continue;
            }

            v65 = UIAccessibilityTokenPlaySoundSimultaneously;
            rangeValue = [v64 rangeValue];
            v68 = language2;
            v69 = @"Sounds/LinkBegin.aiff";
          }

          [v68 setAttribute:v69 forKey:v65 withRange:{rangeValue, v66}];
        }

        v61 = [v59 countByEnumeratingWithState:&v85 objects:v93 count:16];
        if (!v61)
        {
LABEL_35:

          language = [v16 language];
          requestCopy = v80;
          v71 = [v80 addAttributedString:language2 withLanguage:language];

          v11 = v79;
          goto LABEL_37;
        }
      }
    }

    language2 = [v16 language];
    v72 = [v80 addString:v84 withLanguage:language2];
LABEL_37:
  }

  v10 = v78;
  if (v16 != v11)
  {
    [(VOTElementManager *)selfCopy _setCurrentElement:v16];
    if (element)
    {
      *element = 1;
    }

    v73 = +[VOTDisplayManager displayManager];
    [v73 setCursorFrame:{x, v26, v25, v24}];
  }

  outputActions = [requestCopy outputActions];
  v15 = [outputActions count] != 0;

LABEL_43:
  return v15;
}

- (void)_continueReadAllWithElement:(id)element setCurrentElement:(BOOL *)currentElement
{
  elementCopy = element;
  if ([VOTSharedWorkspace speechMuted])
  {
    self->_flags.lastScrollWasFromBraillePanning = 0;
  }

  else if ([elementCopy isReadingContent] && self->_flags.isReadingAllBook)
  {
    [(VOTElementManager *)self _handleMoreBookContentElements];
  }

  else
  {
    v7 = [objc_allocWithZone(VOTOutputRequest) init];
    if (self->_flags.lastScrollWasFromBraillePanning)
    {
      self->_flags.lastScrollWasFromBraillePanning = 0;
    }

    else
    {
      self->_flags.isReadingAll = 1;
      objc_storeStrong(&self->_readAllOutputRequest, v7);
      [v7 setCompletionDelegate:self];
    }

    v8 = kAXWebContentTrait;
    if (![elementCopy doesHaveAllTraits:kAXStaticTextTrait | kAXWebContentTrait] || !-[VOTElementManager _prepareStitchedWebReadAll:request:setCurrentElement:](self, "_prepareStitchedWebReadAll:request:setCurrentElement:", elementCopy, v7, currentElement))
    {
      [(VOTElementManager *)self _prepareElementOutputHeaders:elementCopy currentElement:elementCopy request:v7];
      [(VOTElementManager *)self _addDescription:elementCopy toRequest:v7 withOptions:64];
      [(VOTElementManager *)self _setCurrentElement:elementCopy];
      if (currentElement)
      {
        *currentElement = 1;
      }
    }

    combinedActionString = [v7 combinedActionString];
    v10 = [combinedActionString length];

    if (v10)
    {
      if (self->_flags.shouldSpeakPrefixes)
      {
        combinedActionString2 = [v7 combinedActionString];
        v12 = [combinedActionString2 copy];

        v42.length = CFStringGetLength(v12);
        v42.location = 0;
        v13 = CFStringTokenizerCreate(kCFAllocatorDefault, v12, v42, 0, 0);
        v14 = 1;
        do
        {
          v15 = v14;
          if (!CFStringTokenizerAdvanceToNextToken(v13))
          {
            break;
          }

          v14 = 0;
        }

        while ((v15 & 1) != 0);
        combinedActionString3 = [v7 combinedActionString];
        CurrentTokenRange = CFStringTokenizerGetCurrentTokenRange(v13);
        if (CurrentTokenRange.location != -1)
        {
          combinedActionString4 = [v7 combinedActionString];
          v19 = [combinedActionString4 substringToIndex:CurrentTokenRange.location + CurrentTokenRange.length];

          combinedActionString3 = v19;
        }

        outputActions = [v7 outputActions];
        [outputActions removeAllObjects];

        v21 = [v7 addString:combinedActionString3];
        CFRelease(v13);
      }

      v22 = +[VOTOutputManager outputManager];
      v23 = +[VOSOutputEvent DidFocusOnElement];
      [v22 sendEvent:v23];
    }

    if (sub_100050834())
    {
      _currentElement = [(VOTElementManager *)self _currentElement];
      touchContainer = [elementCopy touchContainer];
      touchContainer2 = [_currentElement touchContainer];
      v27 = touchContainer2;
      if (!touchContainer && touchContainer2 || touchContainer && !touchContainer2 || touchContainer && touchContainer2 && ([touchContainer2 isEqual:touchContainer] & 1) == 0)
      {
        [(VOTElementManager *)self _addDescription:touchContainer toRequest:v7 withOptions:1];
        if ([VOTSharedWorkspace typingPitchChangeEnabled])
        {
          lastAction = [v7 lastAction];
          LODWORD(v29) = 1062836634;
          v30 = [NSNumber numberWithFloat:v29];
          [lastAction setObject:v30 forVariant:32];
        }
      }
    }

    if ([elementCopy doesHaveTraits:v8])
    {
      v39 = 0u;
      v40 = 0u;
      v37 = 0u;
      v38 = 0u;
      outputActions2 = [v7 outputActions];
      v32 = [outputActions2 countByEnumeratingWithState:&v37 objects:v41 count:16];
      if (v32)
      {
        v33 = v32;
        v34 = *v38;
        do
        {
          for (i = 0; i != v33; i = i + 1)
          {
            if (*v38 != v34)
            {
              objc_enumerationMutation(outputActions2);
            }

            [*(*(&v37 + 1) + 8 * i) setObject:kCFBooleanTrue forVariant:63];
          }

          v33 = [outputActions2 countByEnumeratingWithState:&v37 objects:v41 count:16];
        }

        while (v33);
      }
    }

    [(VOTElementManager *)self sendRequest:v7];
    v36 = +[VOTUserEventManager sharedInstance];
    [v36 userEventOccurred];
  }
}

- (void)_handleReadScreenSummary:(id)summary
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_flags.isReadingAll = 1;
  self->_explorerElementsNeedUpdate = 1;
  [(VOTElementManager *)self _updateExplorerElementsIfNeeded];
  v5 = +[VOTExplorerElementManagerContext context];
  [v5 setUserInitiated:1];
  explorerElementManager = [(VOTElementManager *)self explorerElementManager];
  [explorerElementManager readAll:v5];
}

- (void)_handleReadAll:(id)all
{
  allCopy = all;
  command = [allCopy command];
  self->_flags.shouldSpeakPrefixes = [command isEqualToString:kVOTEventCommandReadAllPrefixes];

  if ([VOTSharedWorkspace speechMuted])
  {
    _currentElement = +[VOTOutputManager outputManager];
    v6 = +[VOSOutputEvent UnknownCommand];
    [_currentElement sendEvent:v6];
  }

  else
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    self->_flags.userInitiatedBooksScroll = 0;
    if ([_currentElement doesHaveTraits:kAXStatusBarElementTrait] && -[VOTElementManager _shouldAllowSpeakThisGesture](self, "_shouldAllowSpeakThisGesture"))
    {
      [(VOTElementManager *)self _handleSpeakScreen:allCopy];
    }

    else
    {
      [(VOTElementManager *)self setInitialReadAllElement:_currentElement];
      if ([_currentElement isReadingContent])
      {
        [(VOTElementManager *)self _handleReadAllBookContent:_currentElement fromTop:0];
      }

      else
      {
        _currentElement2 = [(VOTElementManager *)self _currentElement];
        [(VOTElementManager *)self _continueReadAllWithElement:_currentElement2 setCurrentElement:0];
      }
    }
  }
}

- (void)_handleCopySpeechToClipboard:(id)clipboard
{
  v4 = +[VOTOutputRequest previousRequests];
  firstObject = [v4 firstObject];

  v6 = +[NSMutableString string];
  v22 = 0u;
  v23 = 0u;
  v24 = 0u;
  v25 = 0u;
  outputActions = [firstObject outputActions];
  v8 = [outputActions countByEnumeratingWithState:&v22 objects:v27 count:16];
  if (v8)
  {
    v9 = v8;
    v10 = *v23;
    do
    {
      for (i = 0; i != v9; i = i + 1)
      {
        if (*v23 != v10)
        {
          objc_enumerationMutation(outputActions);
        }

        v12 = *(*(&v22 + 1) + 8 * i);
        if (![v12 component] && (objc_msgSend(v12, "isVoiceOverGeneratedContent") & 1) == 0)
        {
          originalString = [v12 originalString];
          if ([originalString length])
          {
            if ([v6 length])
            {
              [v6 appendString:@" "];
            }

            [v6 appendString:originalString];
          }
        }
      }

      v9 = [outputActions countByEnumeratingWithState:&v22 objects:v27 count:16];
    }

    while (v9);
  }

  if ([v6 length])
  {
    v14 = +[NSMutableDictionary dictionary];
    identifier = [UTTypeUTF8PlainText identifier];
    [v14 setObject:v6 forKey:identifier];

    v16 = +[UIPasteboard generalPasteboard];
    v26 = v14;
    v17 = [NSArray arrayWithObjects:&v26 count:1];
    [v16 setItems:v17];

    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    v19 = sub_1000516CC(off_1001FDDD0, @"copy.to.pasteboard", 0, selectedLanguage);
    v20 = [NSString stringWithFormat:v19, v6];

    v21 = sub_1000095FC(v20, 0, selectedLanguage);
    [(VOTElementManager *)self _addCopiedSpeechString:v6];
  }
}

- (void)_addCopiedSpeechString:(id)string
{
  stringCopy = string;
  copiedSpeechItems = self->_copiedSpeechItems;
  if (!copiedSpeechItems)
  {
    v5 = +[NSMutableArray array];
    v6 = self->_copiedSpeechItems;
    self->_copiedSpeechItems = v5;

    copiedSpeechItems = self->_copiedSpeechItems;
  }

  if ([(NSMutableArray *)copiedSpeechItems count]== 25)
  {
    [(NSMutableArray *)self->_copiedSpeechItems removeLastObject];
  }

  if (self->_copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    self->_copiedSpeechIndex = 0;
  }

  v7 = [[_VOTCopiedSpeechItem alloc] initWithText:stringCopy];
  [(NSMutableArray *)self->_copiedSpeechItems insertObject:v7 atIndex:0];
}

- (void)_handleCopiedSpeechRotorMovement:(int64_t)movement
{
  v5 = +[VOTLockStateManager sharedInstance];
  isLocked = [v5 isLocked];

  if (isLocked)
  {
    v7 = off_1001FDDD0;
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    v8 = sub_1000516CC(v7, @"unlock.copied.speech", 0, selectedLanguage);
    v9 = sub_1000095FC(v8, 0, 0);
  }

  else
  {
    copiedSpeechIndex = self->_copiedSpeechIndex;
    if (copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      copiedSpeechIndex = 0;
      self->_copiedSpeechIndex = 0;
    }

    if (movement == 2)
    {
      if (!copiedSpeechIndex)
      {
        copiedSpeechIndex = [(NSMutableArray *)self->_copiedSpeechItems count]+ 1;
      }

      self->_copiedSpeechIndex = --copiedSpeechIndex;
    }

    else if (movement == 1)
    {
      self->_copiedSpeechIndex = (copiedSpeechIndex + 1);
      if (copiedSpeechIndex + 1 <= [(NSMutableArray *)self->_copiedSpeechItems count])
      {
        copiedSpeechIndex = self->_copiedSpeechIndex;
      }

      else
      {
        copiedSpeechIndex = 0;
        self->_copiedSpeechIndex = 0;
      }
    }

    if (copiedSpeechIndex == [(NSMutableArray *)self->_copiedSpeechItems count])
    {
      v11 = off_1001FDDD0;
      selectedLanguage2 = [VOTSharedWorkspace selectedLanguage];
      sub_1000516CC(v11, @"clear.copied.speech", 0, selectedLanguage2);
    }

    else
    {
      selectedLanguage2 = [(NSMutableArray *)self->_copiedSpeechItems objectAtIndex:self->_copiedSpeechIndex];
      [selectedLanguage2 text];
    }
    selectedLanguage = ;

    v13 = sub_1000095FC(selectedLanguage, 0, 0);
  }
}

- (void)_handlePasteCopiedSpeech
{
  copiedSpeechIndex = self->_copiedSpeechIndex;
  if (copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL || copiedSpeechIndex >= [(NSMutableArray *)self->_copiedSpeechItems count])
  {
    text = VOTLogCommon();
    if (os_log_type_enabled(text, OS_LOG_TYPE_ERROR))
    {
      sub_10012AAFC();
    }
  }

  else
  {
    v4 = [(NSMutableArray *)self->_copiedSpeechItems objectAtIndex:self->_copiedSpeechIndex];
    text = [v4 text];

    v6 = +[NSMutableDictionary dictionary];
    identifier = [UTTypeUTF8PlainText identifier];
    [v6 setObject:text forKey:identifier];

    v8 = +[UIPasteboard generalPasteboard];
    v12 = v6;
    v9 = [NSArray arrayWithObjects:&v12 count:1];
    [v8 setItems:v9];

    _currentResponder = [(VOTElementManager *)self _currentResponder];
    textOperationsOperator = _currentResponder;
    if ([_currentResponder doesHaveTraits:kAXWebContentTrait])
    {
      textOperationsOperator = [_currentResponder textOperationsOperator];
    }

    [textOperationsOperator performTextOperation:kAXTextOperationActionPaste];
  }
}

- (void)_handleClearCopiedSpeech
{
  copiedSpeechItems = self->_copiedSpeechItems;
  self->_copiedSpeechItems = 0;

  self->_copiedSpeechIndex = 0x7FFFFFFFFFFFFFFFLL;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v4 = sub_1000516CC(off_1001FDDD0, @"cleared.copied.speech", 0, selectedLanguage);
  v5 = sub_1000095FC(v4, 0, selectedLanguage);
}

- (void)clearExpiredCopiedSpeech
{
  copiedSpeechItems = self->_copiedSpeechItems;
  if (copiedSpeechItems)
  {
    v4 = [(NSMutableArray *)copiedSpeechItems ax_filteredArrayUsingBlock:&stru_1001C8F00];
    v5 = [NSMutableArray arrayWithArray:v4];
    v6 = self->_copiedSpeechItems;
    self->_copiedSpeechItems = v5;

    copiedSpeechIndex = self->_copiedSpeechIndex;
    if (copiedSpeechIndex > [(NSMutableArray *)self->_copiedSpeechItems count])
    {
      self->_copiedSpeechIndex = 0x7FFFFFFFFFFFFFFFLL;
    }
  }
}

- (void)_handleReadFromTop:(id)top
{
  topCopy = top;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v25 = topCopy;
  command = [topCopy command];
  self->_flags.shouldSpeakPrefixes = [command isEqualToString:kVOTEventCommandReadFromTopPrefixes];

  _currentElement = [(VOTElementManager *)self _currentElement];
  if (![_currentElement isReadingContent])
  {
    application = [_currentElement application];
    firstElementInApplicationForReadFromTop = [application firstElementInApplicationForReadFromTop];
    if (([_currentElement readingContentCausesPageTurn] & 1) != 0 || (v11 = firstElementInApplicationForReadFromTop, objc_msgSend(_currentElement, "includeDuringContentReading")))
    {
      v11 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C8F48 startElement:firstElementInApplicationForReadFromTop];

      if (v11)
      {
        goto LABEL_13;
      }

      v11 = _currentElement;
    }

    if (!v11)
    {
      v18 = +[VOTOutputManager outputManager];
      v19 = +[VOSOutputEvent BoundaryEncountered];
      [v18 sendEvent:v19];

LABEL_30:
      goto LABEL_31;
    }

LABEL_13:
    if ([application isSafari])
    {
      v12 = kAXWebContentTrait;
      if (([v11 doesHaveTraits:kAXWebContentTrait] & 1) == 0)
      {
        [v11 elementsInDirection:1 withCount:10];
        v30 = 0u;
        v31 = 0u;
        v28 = 0u;
        v13 = v29 = 0u;
        v14 = [v13 countByEnumeratingWithState:&v28 objects:v43 count:16];
        if (v14)
        {
          v15 = *v29;
          while (2)
          {
            for (i = 0; i != v14; i = i + 1)
            {
              if (*v29 != v15)
              {
                objc_enumerationMutation(v13);
              }

              v17 = *(*(&v28 + 1) + 8 * i);
              if ([v17 doesHaveTraits:v12])
              {
                v20 = v17;

                v11 = v20;
                goto LABEL_26;
              }
            }

            v14 = [v13 countByEnumeratingWithState:&v28 objects:v43 count:16];
            if (v14)
            {
              continue;
            }

            break;
          }
        }

LABEL_26:
      }
    }

    if ([v11 shouldPlaySoundWhenFocused])
    {
      v21 = +[VOTOutputManager outputManager];
      v22 = +[VOSOutputEvent DidFocusOnElement];
      [v21 sendEvent:v22];
    }

    v26[0] = _NSConcreteStackBlock;
    v26[1] = 3221225472;
    v26[2] = sub_100068154;
    v26[3] = &unk_1001C7778;
    v26[4] = self;
    v27 = v11;
    v23 = v11;
    [v23 scrollToElementForDirectional:1 withCompletion:v26];
    [(VOTElementManager *)self _setCurrentElement:v23];
    [(VOTElementManager *)self setInitialReadAllElement:v23];
    [(VOTElementManager *)self _continueReadAllWithElement:v23 setCurrentElement:0];

    goto LABEL_30;
  }

  v37 = 0;
  v38 = &v37;
  v39 = 0x3032000000;
  v40 = sub_100068050;
  v41 = sub_100068060;
  v42 = 0;
  v34[0] = _NSConcreteStackBlock;
  v34[1] = 3221225472;
  v34[2] = sub_100068068;
  v34[3] = &unk_1001C8F28;
  _currentElement = _currentElement;
  v35 = _currentElement;
  v36 = &v37;
  v7 = [(VOTElementManager *)self _nearestElementWithMatch:v34 startElement:_currentElement forward:0 itemCheckCount:30];
  v8 = v38[5];
  if (v8)
  {
    v9 = v8;

    v32[0] = _NSConcreteStackBlock;
    v32[1] = 3221225472;
    v32[2] = sub_1000680E0;
    v32[3] = &unk_1001C7778;
    v32[4] = self;
    _currentElement = v9;
    v33 = _currentElement;
    [_currentElement scrollToElementForDirectional:1 withCompletion:v32];
    [(VOTElementManager *)self _resetElementUnitIndexes];
    [(VOTElementManager *)self _setCurrentElement:_currentElement];
  }

  [(VOTElementManager *)self _handleReadAllBookContent:_currentElement fromTop:1];

  _Block_object_dispose(&v37, 8);
LABEL_31:
}

- (void)_handleContinueSpeaking:(id)speaking
{
  v4 = +[VOTOutputManager outputManager];
  [v4 continueSpeaking];

  if (AXDeviceSupportsSonification())
  {
    if ([(VOTElement *)self->_currentElement supportsAudiographs])
    {
      v5 = +[VOTAudiographManager sharedManager];
      isPaused = [v5 isPaused];

      if (isPaused)
      {
        v7 = +[VOTAudiographManager sharedManager];
        [v7 play];
      }
    }
  }
}

- (void)_handlePauseSpeaking:(id)speaking
{
  v3 = +[VOTOutputManager outputManager];
  [v3 pauseSpeakingAtBoundary:0];

  if (AXDeviceSupportsSonification())
  {
    v4 = +[VOTAudiographManager sharedManager];
    isPlaying = [v4 isPlaying];

    if (isPlaying)
    {
      v6 = +[VOTAudiographManager sharedManager];
      [v6 pause];
    }
  }
}

- (void)_handleToggleSpeaking:(id)speaking
{
  speakingCopy = speaking;
  v4 = +[VOTOutputManager outputManager];
  if ([v4 isSpeaking])
  {
    HIDWORD(v18) = [v4 isPaused] ^ 1;
  }

  else
  {
    HIDWORD(v18) = 0;
  }

  if (AXDeviceSupportsSonification())
  {
    v5 = +[VOTAudiographManager sharedManager];
    LODWORD(v18) = [v5 isPlaying];
  }

  else
  {
    LODWORD(v18) = 0;
  }

  v23 = 0u;
  v24 = 0u;
  v21 = 0u;
  v22 = 0u;
  v6 = self->_currentApplications;
  v7 = [(NSArray *)v6 countByEnumeratingWithState:&v21 objects:v25 count:16];
  if (v7)
  {
    v8 = v7;
    v9 = *v22;
    while (2)
    {
      for (i = 0; i != v8; i = i + 1)
      {
        if (*v22 != v9)
        {
          objc_enumerationMutation(v6);
        }

        application = [*(*(&v21 + 1) + 8 * i) application];
        bundleIdentifier = [application bundleIdentifier];
        v13 = [bundleIdentifier isEqualToString:@"com.apple.Magnifier"];

        if (v13)
        {

          DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
          CFNotificationCenterPostNotification(DarwinNotifyCenter, @"MagnifierPauseSpeech", 0, 0, 1u);
          goto LABEL_17;
        }
      }

      v8 = [(NSArray *)v6 countByEnumeratingWithState:&v21 objects:v25 count:16];
      if (v8)
      {
        continue;
      }

      break;
    }
  }

LABEL_17:
  v15 = +[AXSettings sharedInstance];
  liveRecognitionActive = [v15 liveRecognitionActive];

  if (liveRecognitionActive)
  {
    v17 = +[VOTMagnifierService shared];
    [v17 stopSpeech];
  }

  if ((HIDWORD(v19) | v19))
  {
    [(VOTElementManager *)self _handlePauseSpeaking:speakingCopy];
  }

  else
  {
    [(VOTElementManager *)self _handleContinueSpeaking:speakingCopy];
  }
}

- (void)_handleCancelSpeaking:(id)speaking
{
  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0];
}

- (void)_endTextSearchMode
{
  self->_flags.inSearchTextMode = 0;
  v2 = +[VOTKeyboardManager keyboardManager];
  [v2 setCaptureModeEnabled:0];

  v3 = +[VOTTextSearchManager sharedManager];
  [v3 endTextSearchSession];

  v4 = +[VOTBrailleManager manager];
  [v4 setTextSearchModeOn:0];

  v5 = +[VOTBrailleManager manager];
  [v5 refreshBrailleLine];
}

- (void)_handleSearchTextEvent:(id)event
{
  eventCopy = event;
  keyInfo = [eventCopy keyInfo];
  if ([keyInfo keyDown] && objc_msgSend(keyInfo, "keyCode") == 40)
  {
    if (-[VOTElement doesHaveTraits:](self->_currentElement, "doesHaveTraits:", kAXTextEntryTrait) && (-[VOTElement value](self->_currentElement, "value"), v5 = objc_claimAutoreleasedReturnValue(), v6 = [v5 length], v5, v6))
    {
      v7 = +[VOTTextSearchManager sharedManager];
      currentSearchValue = [v7 currentSearchValue];

      selectedTextRange = [(VOTElement *)self->_currentElement selectedTextRange];
      v11 = v10;
      value = [(VOTElement *)self->_currentElement value];
      v13 = value;
      if (selectedTextRange == 0x7FFFFFFF)
      {
        v14 = 0;
      }

      else
      {
        v14 = &selectedTextRange[v11];
      }

      v15 = ([value length] - v14);
      v16 = +[NSLocale currentLocale];
      v17 = [v13 rangeOfString:currentSearchValue options:1 range:v14 locale:{v15, v16}];

      if (v17 != 0x7FFFFFFFFFFFFFFFLL)
      {
        if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXIsEditingTrait])
        {
          [(VOTElement *)self->_currentElement setSelectedTextRange:v17 refreshBraille:0, 1];
          [(VOTElementManager *)self _moveCursorForElement:self->_currentElement direction:1 unit:2];
        }

        else
        {
          self->_elementUnitOutputRange.location = v17;
          self->_elementUnitOutputRange.length = 0;
          [(VOTElementManager *)self _outputNextTextSegmentUnit:2 direction:1];
        }
      }

      [(VOTElementManager *)self _endTextSearchMode];
    }

    else
    {
      self->_flags.performedSearch = 1;
      currentSearchValue = [(VOTElementManager *)self _copyMatchBlockSearchText];
      fetchManager = self->_fetchManager;
      _currentElement = [(VOTElementManager *)self _currentElement];
      elementSearchGeneration = self->_elementSearchGeneration;
      selectedTextRange2 = [(VOTElement *)self->_currentElement selectedTextRange];
      v23 = v22;
      LOBYTE(v24) = [VOTSharedWorkspace navigationStyleHonorsGroups];
      [(VOTElementFetcher *)fetchManager searchForElementInDirection:1 fromElement:_currentElement matchBlock:currentSearchValue rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:selectedTextRange2 groupNavigationStyle:v23, v24];

      [(VOTElementManager *)self _endTextSearchMode];
    }
  }

  else
  {
    currentSearchValue = +[VOTTextSearchManager sharedManager];
    [currentSearchValue handleTextSearchEvent:eventCopy];
  }
}

- (void)_outputCurrentElementRotor
{
  generateRotorTypeRequest = [(VOTRotor *)self->_elementRotor generateRotorTypeRequest];
  [(VOTElementManager *)self _appendCurrentRotorValue:generateRotorTypeRequest forRotor:self->_elementRotor];
  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:generateRotorTypeRequest];
  [generateRotorTypeRequest setCannotBeInterrupted:1];
  [generateRotorTypeRequest send];
}

- (void)_handleDescribeImage:(id)image
{
  [(VOTElementManager *)self setPreviouslySpokenImageCaptionResults:0];
  v7 = objc_opt_new();
  [v7 setIncludeFullImageDescriptionsForAllElements:1];
  [v7 setIncludeSceneDetection:0];
  [v7 setUserCommandInitiated:1];
  v4 = +[VOTOutputManager outputManager];
  [v4 stopSpeakingAtBoundary:0];

  visionEngine = [VOTSharedWorkspace visionEngine];
  _currentElement = [(VOTElementManager *)self _currentElement];
  [visionEngine analyzeElement:_currentElement withOptions:v7];
}

- (void)_handleLaunchDetectionMode:(id)mode
{
  v3 = +[AXSettings sharedInstance];
  liveRecognitionActive = [v3 liveRecognitionActive];

  v5 = +[VOTMagnifierService shared];
  v6 = v5;
  if (liveRecognitionActive)
  {
    [v5 dismissDetectionUI];
  }

  else
  {
    [v5 showDetectionUI];
  }
}

- (void)_handleDescribedMediaMode:(id)mode direction:(int64_t)direction
{
  v5 = +[AXSettings sharedInstance];
  voiceOverDescribedMedia = [v5 voiceOverDescribedMedia];

  if ((voiceOverDescribedMedia & 3u) > 1uLL)
  {
    if ((voiceOverDescribedMedia & 3) == 2)
    {
      if (direction != 1)
      {
        direction = 1;
        goto LABEL_13;
      }

LABEL_7:
      direction = 3;
      goto LABEL_13;
    }

    if (direction != 1)
    {
LABEL_9:
      direction = 2;
      goto LABEL_13;
    }

LABEL_11:
    direction = 0;
    goto LABEL_13;
  }

  if ((voiceOverDescribedMedia & 3) != 0)
  {
    if (direction == 1)
    {
      goto LABEL_9;
    }

    goto LABEL_11;
  }

  if (direction != 1)
  {
    goto LABEL_7;
  }

LABEL_13:
  v7 = +[AXSettings sharedInstance];
  [v7 setVoiceOverDescribedMedia:direction];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v8 = AXVoiceOverMediaDescriptionLocString();
  v9 = sub_1000095FC(v8, 0, selectedLanguage);
}

- (void)_handleHintsSettingMode:(id)mode direction:(int64_t)direction
{
  v4 = [AXSettings sharedInstance:mode];
  voiceOverHintsEnabled = [v4 voiceOverHintsEnabled];

  v6 = +[AXSettings sharedInstance];
  [v6 setVoiceOverHintsEnabled:voiceOverHintsEnabled ^ 1];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v11 = selectedLanguage;
  if (voiceOverHintsEnabled)
  {
    v8 = @"hints.disabled";
  }

  else
  {
    v8 = @"hints.enabled";
  }

  v9 = sub_1000516CC(off_1001FDDD0, v8, 0, selectedLanguage);
  v10 = sub_1000095FC(v9, 0, v11);
}

- (void)_handleDirectTouchExplorationMode:(id)mode direction:(int64_t)direction
{
  modeCopy = mode;
  _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
  v7 = v6;
  if (!self->_directTouchApps)
  {
    v8 = objc_opt_new();
    [(VOTElementManager *)self setDirectTouchApps:v8];
  }

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = [(NSMutableDictionary *)self->_directTouchApps objectForKeyedSubscript:_appInfoForCurrentElement];
  bOOLValue = [v10 BOOLValue];

  v12 = [NSNumber numberWithInt:bOOLValue ^ 1];
  [(NSMutableDictionary *)self->_directTouchApps setObject:v12 forKeyedSubscript:_appInfoForCurrentElement];

  if (bOOLValue)
  {
    v13 = @"direct.touch.off.for.app";
  }

  else
  {
    v13 = @"direct.touch.on.for.app";
  }

  v14 = sub_1000516CC(off_1001FDDD0, v13, 0, selectedLanguage);
  v15 = AXCFormattedString();
  v16 = sub_1000095FC(v15, 0, selectedLanguage);

  directTouchApps = [(VOTElementManager *)self directTouchApps];
  v18 = +[AXSettings sharedInstance];
  [v18 setVoiceOverDirectTouchEnabledApps:directTouchApps];
}

- (BOOL)inDirectTouchMode
{
  if (AXDeviceSupportsSonification())
  {
    v3 = +[VOTAudiographManager sharedManager];
    isScrubbing = [v3 isScrubbing];

    if (isScrubbing)
    {
      return 0;
    }
  }

  directTouchApps = [(VOTElementManager *)self directTouchApps];
  _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
  v9 = v8;
  v10 = [directTouchApps objectForKeyedSubscript:_appInfoForCurrentElement];
  bOOLValue = [v10 BOOLValue];

  return bOOLValue;
}

- (void)_systemServerDied
{
  [(VOTElementManager *)self _didDismissItemChooser];
  allElements = self->_allElements;
  self->_allElements = 0;
}

- (void)_resetItemChooserCache
{
  if (!self->_flags.itemChooserVisible)
  {
    self->_allElements = 0;
    _objc_release_x1();
  }
}

- (void)_showItemChooser:(id)chooser
{
  chooserCopy = chooser;
  v53 = [objc_allocWithZone(NSMutableArray) initWithCapacity:{objc_msgSend(chooserCopy, "count")}];
  v52 = [objc_allocWithZone(NSMutableArray) init];
  v54 = [objc_allocWithZone(NSMutableSet) init];
  v51 = [objc_allocWithZone(NSMutableArray) initWithCapacity:{objc_msgSend(chooserCopy, "count")}];
  v66 = 0u;
  v67 = 0u;
  v68 = 0u;
  v69 = 0u;
  obj = chooserCopy;
  v4 = [obj countByEnumeratingWithState:&v66 objects:v71 count:16];
  if (v4)
  {
    v5 = v4;
    v49 = *v67;
    v47 = kAXButtonTrait;
    v45 = kAXPopupButtonTrait | kAXTextAreaTrait | kAXToggleTrait | kAXRadioButtonTrait | kAXSearchFieldTrait | kAXTextEntryTrait | kAXButtonTrait;
    v43 = kAXWebContentTrait;
    v42 = kAXVisitedTrait;
    v44 = kAXVisitedTrait | kAXLinkTrait;
    v48 = kAXHeaderTrait;
    v46 = kAXLinkTrait;
    v41 = kAXLinkTrait | kAXHeaderTrait;
    v6 = kAXSearchFieldTrait;
    v7 = kAXTextEntryTrait | kAXSearchFieldTrait;
    v8 = kAXImageTrait;
    v9 = kAXStaticTextTrait;
    do
    {
      for (i = 0; i != v5; i = i + 1)
      {
        if (*v67 != v49)
        {
          objc_enumerationMutation(obj);
        }

        v11 = *(*(&v66 + 1) + 8 * i);
        objc_opt_class();
        if ((objc_opt_isKindOfClass() & 1) == 0)
        {
          v38 = v11;
          _AXAssert();
        }

        [v11 frame];
        [v11 adaptFrameForSystemElement:?];
        v12 = NSStringFromCGRect(v72);
        [v51 addObject:v12];

        v13 = [objc_allocWithZone(NSMutableArray) init];
        traits = [v11 traits];
        if ((v48 & traits) != 0)
        {
          [v13 addObject:&off_1001D9BF0];
        }

        if ((v46 & traits) != 0)
        {
          [v13 addObject:&off_1001D9C08];
        }

        if ((v45 & traits) != 0 && (v43 & traits) != 0)
        {
          [v13 addObject:&off_1001D9C20];
        }

        if ((v44 & ~traits) == 0)
        {
          [v13 addObject:&off_1001D9C38];
        }

        if ((v46 & traits) != 0 && (v42 & traits) == 0)
        {
          [v13 addObject:&off_1001D9C50];
        }

        if ((v8 & traits) != 0)
        {
          [v13 addObject:&off_1001D9C68];
        }

        if ((v9 & traits) != 0 && (v41 & traits) == 0)
        {
          [v13 addObject:&off_1001D9C80];
        }

        if ((v47 & traits) != 0)
        {
          [v13 addObject:&off_1001D9C98];
        }

        if ((v7 & traits) != 0)
        {
          [v13 addObject:&off_1001D9CB0];
        }

        if ((v6 & traits) != 0)
        {
          [v13 addObject:&off_1001D9CC8];
        }

        [v52 addObject:v13];
        [v54 addObjectsFromArray:v13];
        itemChooserName = [v11 itemChooserName];
        [v53 addObject:itemChooserName];
      }

      v5 = [obj countByEnumeratingWithState:&v66 objects:v71 count:16];
    }

    while (v5);
  }

  v16 = +[AXSettings sharedInstance];
  voiceOverRotorItems = [v16 voiceOverRotorItems];

  v50 = [objc_allocWithZone(NSMutableArray) init];
  v62 = 0u;
  v63 = 0u;
  v64 = 0u;
  v65 = 0u;
  v18 = voiceOverRotorItems;
  v19 = [v18 countByEnumeratingWithState:&v62 objects:v70 count:16];
  if (v19)
  {
    v20 = v19;
    v21 = *v63;
    do
    {
      for (j = 0; j != v20; j = j + 1)
      {
        if (*v63 != v21)
        {
          objc_enumerationMutation(v18);
        }

        v23 = *(*(&v62 + 1) + 8 * j);
        v24 = [v23 objectForKey:@"Enabled"];
        bOOLValue = [v24 BOOLValue];

        if (bOOLValue)
        {
          v26 = [v23 objectForKey:@"RotorItem"];
          v27 = &off_1001D9C08;
          if ([v26 isEqualToString:kAXSVoiceOverTouchRotorItemLink] & 1) != 0 || (v27 = &off_1001D9BF0, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemHeader)) || (v27 = &off_1001D9C20, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemFormElement)) || (v27 = &off_1001D9CE0, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemTableStart)) || (v27 = &off_1001D9CF8, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemListStart)) || (v27 = &off_1001D9C38, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemVisitedLink)) || (v27 = &off_1001D9C50, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemNonVisitedLink)) || (v27 = &off_1001D9C68, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemImage)) || (v27 = &off_1001D9C80, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemStaticText)) || (v27 = &off_1001D9D10, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemLandmark)) || (v27 = &off_1001D9C98, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemButton)) || (v27 = &off_1001D9CB0, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemTextField)) || (v27 = &off_1001D9CC8, objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemSearchField)))
          {
            if ([v54 containsObject:v27])
            {
              [v50 addObject:v27];
            }
          }
        }
      }

      v20 = [v18 countByEnumeratingWithState:&v62 objects:v70 count:16];
    }

    while (v20);
  }

  v28 = [objc_allocWithZone(NSMutableDictionary) init];
  [v28 setObject:v53 forKey:@"items"];
  [v28 setObject:v50 forKey:@"categories"];
  [v28 setObject:v52 forKey:@"mappings"];
  lastItemChooserSearchTerm = [(VOTElementManager *)self lastItemChooserSearchTerm];
  v30 = lastItemChooserSearchTerm;
  if (lastItemChooserSearchTerm)
  {
    v31 = lastItemChooserSearchTerm;
  }

  else
  {
    v31 = &stru_1001CBF90;
  }

  [v28 setObject:v31 forKey:@"searchTerm"];

  v59[0] = _NSConcreteStackBlock;
  v59[1] = 3221225472;
  v59[2] = sub_10006992C;
  v59[3] = &unk_1001C7778;
  v32 = v28;
  v60 = v32;
  selfCopy = self;
  v33 = objc_retainBlock(v59);
  v34 = +[VOTDisplayManager displayManager];
  v55[0] = _NSConcreteStackBlock;
  v55[1] = 3221225472;
  v55[2] = sub_100069984;
  v55[3] = &unk_1001C8F70;
  v56 = obj;
  v57 = v32;
  v58 = v33;
  v35 = v33;
  v36 = v32;
  v37 = obj;
  [v34 convertFramesToCursorSpace:v51 displayID:&off_1001D9D28 completion:v55];
}

- (void)_elementsRetrieved:(id)retrieved finished:(id)finished
{
  retrievedCopy = retrieved;
  if ([finished BOOLValue] && objc_msgSend(retrievedCopy, "count") <= 0x3E8)
  {
    v6 = sub_1000535B8(retrievedCopy);
    allElements = self->_allElements;
    self->_allElements = v6;

    [(VOTElementManager *)self _showItemChooser:self->_allElements];
  }
}

- (void)elementsRetrieved:(id)retrieved finished:(BOOL)finished
{
  elementManagerThread = self->_elementManagerThread;
  v6 = &kCFBooleanFalse;
  if (finished)
  {
    v6 = &kCFBooleanTrue;
  }

  [(SCRCThread *)elementManagerThread performSelector:"_elementsRetrieved:finished:" onTarget:self count:2 objects:retrieved, *v6, 0];
}

- (void)_handleMoveToLinkedUI:(id)i
{
  iCopy = i;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (([iCopy isTouchEvent] & 1) == 0)
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    application = [_currentElement application];
    webSearchResultsActive = [application webSearchResultsActive];

    if (webSearchResultsActive)
    {
      if ([_currentElement doesHaveTraits:kAXWebContentTrait])
      {
        application2 = [(VOTElement *)self->_currentElement application];
        firstResponderElement = [application2 firstResponderElement];
        firstObject2 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C8F90 startElement:firstResponderElement];
        goto LABEL_10;
      }

      identifier = [_currentElement identifier];
      v12 = [identifier isEqualToString:@"SFFindOnPageBarIdentifier"];

      if (v12)
      {
        application3 = [(VOTElement *)self->_currentElement application];
        firstElementInApplicationForFocus = [application3 firstElementInApplicationForFocus];
        application2 = [(VOTElementManager *)self _nearestWebElement:firstElementInApplicationForFocus];

        firstResponderElement = [application2 textMarkerRangeForSelection];
        firstObject = [firstResponderElement firstObject];
        firstObject2 = [application2 elementForTextMarker:firstObject];

LABEL_10:
        if (firstObject2)
        {
          goto LABEL_14;
        }
      }
    }

    linkedUIElements = [_currentElement linkedUIElements];
    v17 = VOTLogCommon();
    if (os_log_type_enabled(v17, OS_LOG_TYPE_INFO))
    {
      v19 = 138412546;
      v20 = _currentElement;
      v21 = 2112;
      v22 = linkedUIElements;
      _os_log_impl(&_mh_execute_header, v17, OS_LOG_TYPE_INFO, "Linked ui movement: %@ -> %@", &v19, 0x16u);
    }

    firstObject2 = [linkedUIElements firstObject];

    if (!firstObject2)
    {
      firstObject2 = +[VOTOutputManager outputManager];
      v18 = +[VOSOutputEvent BoundaryEncountered];
      [firstObject2 sendEvent:v18];

      goto LABEL_16;
    }

LABEL_14:
    -[VOTElementManager _moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:](self, "_moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:", firstObject2, [firstObject2 shouldPlaySoundWhenFocused], 0, 0);
LABEL_16:
  }
}

- (void)_handleMoveToNativeFocusedElement:(id)element
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {

    _AXAssert();
  }
}

- (void)_handleItemChooserSelectionMade:(id)made
{
  madeCopy = made;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v5 = +[VOTOutputManager outputManager];
    [v5 stopSpeakingAtBoundary:0];

    [(SCRCThread *)self->_elementManagerThread performSelector:"_notificationThreadCancel" onTarget:self cancelMask:1574144 count:0 objects:0];
    v6 = [madeCopy objectForKey:@"row"];
    v7 = [madeCopy objectForKey:@"activate"];
    bOOLValue = [v7 BOOLValue];

    v9 = [madeCopy objectForKey:@"searchTerm"];
    [(VOTElementManager *)self setLastItemChooserSearchTerm:v9];
    integerValue = [v6 integerValue];
    if (integerValue > 0x7FFFFFFFFFFFFFFELL || (v11 = integerValue, integerValue >= [(NSArray *)self->_allElements count]))
    {
      v12 = self->_previousItemChooserElement;
      v13 = 1;
    }

    else
    {
      v12 = [(NSArray *)self->_allElements objectAtIndex:v11];
      v13 = 0;
    }

    v14 = +[VOTElement springBoardApplication];
    isSystemSleeping = [v14 isSystemSleeping];

    if ((isSystemSleeping & 1) == 0)
    {
      v16 = +[VOTOutputManager outputManager];
      v17 = +[VOSOutputEvent ScreenDidChange];
      [v16 sendEvent:v17];
    }

    v23[0] = _NSConcreteStackBlock;
    v23[1] = 3221225472;
    v23[2] = sub_10006A208;
    v23[3] = &unk_1001C83D0;
    v23[4] = self;
    v18 = v12;
    v24 = v18;
    v25 = bOOLValue;
    [(VOTElement *)v18 scrollToElementForDirectional:1 withCompletion:v23];
    if ((bOOLValue & 1) == 0)
    {
      if (v13)
      {
        selectedLanguage = [VOTSharedWorkspace selectedLanguage];
        v20 = sub_1000516CC(off_1001FDDD0, @"closing.item.chooser", 0, selectedLanguage);
        v21 = sub_1000095FC(v20, 0, selectedLanguage);

        [(VOTElementManager *)self _setCurrentElement:v18];
      }

      else
      {
        [(VOTElementManager *)self _echoDifferentElement:v18 forEvent:0];
      }
    }

    previousItemChooserElement = self->_previousItemChooserElement;
    self->_previousItemChooserElement = 0;

    [(VOTElementManager *)self _didDismissItemChooser];
    self->_flags.focusIsOnElement = 1;
  }
}

- (void)_closeItemChooser
{
  if (self->_flags.itemChooserVisible)
  {
    v4 = +[VOTItemChooserAdapter sharedInstance];
    [v4 showItemChooser:0 withItems:0];

    [(VOTElementManager *)self _didDismissItemChooser];
  }
}

- (void)_handleItemChooserSelection:(id)selection
{
  selectionCopy = selection;
  if (!self->_flags.itemChooserVisible)
  {
    v5 = +[AXSettings sharedInstance];
    securePayAssertionActive = [v5 securePayAssertionActive];

    if (securePayAssertionActive)
    {
      _currentElement2 = AXLogAssertions();
      if (os_log_type_enabled(_currentElement2, OS_LOG_TYPE_DEFAULT))
      {
        *v14 = 0;
        _os_log_impl(&_mh_execute_header, _currentElement2, OS_LOG_TYPE_DEFAULT, "Not processing item chooser because secure pay mode active", v14, 2u);
      }

      goto LABEL_9;
    }

    v8 = +[VOTElement springBoardApplication];
    isSystemLocked = [v8 isSystemLocked];

    if ((isSystemLocked & 1) == 0)
    {
      _currentElement = [(VOTElementManager *)self _currentElement];
      v11 = [_currentElement copyWithZone:0];
      previousItemChooserElement = self->_previousItemChooserElement;
      self->_previousItemChooserElement = v11;

      if (![(NSArray *)self->_allElements count])
      {
        fetchManager = self->_fetchManager;
        _currentElement2 = [(VOTElementManager *)self _currentElement];
        -[VOTElementFetcher retrieveElementsWithElement:groupNavigationStyle:](fetchManager, "retrieveElementsWithElement:groupNavigationStyle:", _currentElement2, [VOTSharedWorkspace navigationStyleHonorsGroups]);
LABEL_9:

        goto LABEL_10;
      }

      [(VOTElementManager *)self _showItemChooser:self->_allElements];
    }
  }

LABEL_10:
}

- (void)_handleOngoingTextSearch:(id)search
{
  command = [search command];
  if ([command isEqualToString:kVOTEventCommandTextSearchForward])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  self->_flags.performedSearch = 1;
  _copyMatchBlockSearchText = [(VOTElementManager *)self _copyMatchBlockSearchText];
  fetchManager = self->_fetchManager;
  _currentElement = [(VOTElementManager *)self _currentElement];
  elementSearchGeneration = self->_elementSearchGeneration;
  selectedTextRange = [(VOTElement *)self->_currentElement selectedTextRange];
  v11 = v10;
  LOBYTE(v12) = [VOTSharedWorkspace navigationStyleHonorsGroups];
  [(VOTElementFetcher *)fetchManager searchForElementInDirection:v5 fromElement:_currentElement matchBlock:_copyMatchBlockSearchText rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:selectedTextRange groupNavigationStyle:v11, v12];
}

- (void)_handleStartTextSearch:(id)search
{
  if (!self->_flags.inSearchTextMode)
  {
    self->_flags.inSearchTextMode = 1;
    v10 = +[VOTTextSearchManager sharedManager];
    v4 = +[VOTBrailleManager manager];
    [v10 setBrailleManager:v4];

    [v10 beginNewTextSearchSession];
    v5 = +[VOTKeyboardManager keyboardManager];
    [v5 setCaptureModeEnabled:1];

    v6 = +[VOTBrailleManager manager];
    [v6 setTextSearchModeOn:1];

    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    v8 = sub_1000516CC(off_1001FDDD0, @"enter.search.text.mode", 0, selectedLanguage);
    v9 = sub_1000095FC(v8, 0, selectedLanguage);
  }
}

- (void)updateRotorForCurrentElement:(BOOL)element completion:(id)completion
{
  elementCopy = element;
  elementManagerThread = self->_elementManagerThread;
  completionCopy = completion;
  v9 = [NSNumber numberWithBool:elementCopy];
  v8 = _Block_copy(completionCopy);

  [(SCRCThread *)elementManagerThread performSelector:"_updateRotorForCurrentElement:completion:" onTarget:self count:2 objects:v9, v8, 0];
}

- (void)_updateRotorForCurrentElement:(id)element completion:(id)completion
{
  elementCopy = element;
  completionCopy = completion;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ([elementCopy BOOLValue])
  {
    [(VOTElementRotor *)self->_elementRotor _updateWebRotorItems];
  }

  _currentElement = [(VOTElementManager *)self _currentElement];
  if (!_currentElement)
  {
    _currentElement = self->_touchContainer;
  }

  lastElementChangeAction = [(VOTElementManager *)self lastElementChangeAction];
  v9 = lastElementChangeAction == 1;
  if ([(VOTElementManager *)self lastElementChangeAction]== 2 && [(VOTRotor *)self->_elementRotor currentRotorType]== 37)
  {
    containerTypes = [(VOTElement *)_currentElement containerTypes];
    v11 = [containerTypes containsObject:&off_1001D9D40];

    if (lastElementChangeAction == 1)
    {
      v9 = 1;
    }

    else
    {
      v9 = v11;
    }
  }

  [(VOTElementRotor *)self->_elementRotor updateRotorForElement:_currentElement shouldPreserveRotorNavigation:v9 firstResponder:self->_firstResponderElement];
  currentPublicCustomRotorItemResult = self->_currentPublicCustomRotorItemResult;
  self->_currentPublicCustomRotorItemResult = 0;

  self->_lastSeenApplicationOrientation = [VOTSharedWorkspace applicationOrientation];
  self->_flags.shouldUpdateRotorForElement = 0;
  if (completionCopy)
  {
    completionCopy[2](completionCopy);
  }
}

- (void)_updateRotorForCurrentElement
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self _updateRotorForCurrentElement:0 completion:0];
}

- (void)_handleSearchRotorEcho:(id)echo
{
  [(VOTElementManager *)self _updateRotorForCurrentElement];
  generateRotorTypeRequest = [(VOTRotor *)self->_elementRotor generateRotorTypeRequest];
  [(VOTElementManager *)self _appendCurrentRotorValue:generateRotorTypeRequest forRotor:self->_elementRotor];
  [generateRotorTypeRequest setGeneratesBraille:1];
  [generateRotorTypeRequest setBrailleType:1];
  [generateRotorTypeRequest send];
}

- (double)rotorRate
{
  v10 = 0;
  v11 = &v10;
  v12 = 0x2020000000;
  v13 = 0;
  v2 = dispatch_semaphore_create(0);
  votSettings = [VOTSharedWorkspace votSettings];
  v7[0] = _NSConcreteStackBlock;
  v7[1] = 3221225472;
  v7[2] = sub_10006AA9C;
  v7[3] = &unk_1001C8FB8;
  v9 = &v10;
  v4 = v2;
  v8 = v4;
  [votSettings rotorRateWithCompletionHandler:v7];

  dispatch_semaphore_wait(v4, 0xFFFFFFFFFFFFFFFFLL);
  v5 = v11[3];

  _Block_object_dispose(&v10, 8);
  return v5;
}

- (void)_appendCurrentRotorValue:(id)value forRotor:(id)rotor
{
  valueCopy = value;
  rotorCopy = rotor;
  [VOTSharedWorkspace selectedLanguage];
  v107[0] = _NSConcreteStackBlock;
  v107[1] = 3221225472;
  v107[2] = sub_10006B84C;
  v8 = v107[3] = &unk_1001C8FE0;
  v108 = v8;
  v9 = objc_retainBlock(v107);
  currentRotorType = [rotorCopy currentRotorType];
  if (currentRotorType > 31)
  {
    switch(currentRotorType)
    {
      case '6':
        _currentCustomActions = [(VOTElementManager *)self _currentCustomActions];
        name2 = _currentCustomActions;
        customActionIndex = self->_customActionIndex;
        if (customActionIndex == 0x7FFFFFFFFFFFFFFFLL)
        {
          _customActionDefaultActionString = [(VOTElementManager *)self _customActionDefaultActionString];
          goto LABEL_76;
        }

        if (customActionIndex >= [(__CFString *)_currentCustomActions count])
        {
          goto LABEL_80;
        }

        _appInfoForCurrentElement = [(__CFString *)name2 objectAtIndex:customActionIndex];
        name = [(__CFString *)_appInfoForCurrentElement name];
        v84 = [valueCopy addString:name];
        goto LABEL_72;
      case '7':
      case '8':
      case '9':
      case ':':
      case '<':
      case '=':
      case '>':
      case '@':
      case 'A':
      case 'E':
      case 'F':
      case 'G':
      case 'H':
      case 'I':
      case 'J':
      case 'K':
      case 'L':
      case 'M':
      case 'N':
      case 'O':
      case 'Y':
      case '\\':
      case '^':
        goto LABEL_81;
      case ';':
        _typingEchoString = (v9[2])(v9, [VOTSharedWorkspace hintsEnabled]);
        goto LABEL_59;
      case '?':
        name2 = +[AXSettings sharedInstance];
        [(__CFString *)name2 voiceOverDescribedMedia];
        _customActionDefaultActionString = AXVoiceOverMediaDescriptionLocString();
        goto LABEL_76;
      case 'B':
        _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
        name2 = v46;
        v47 = +[AXSettings sharedInstance];
        v48 = [v47 automaticAccessibilityModeForBundleIdentifier:_appInfoForCurrentElement];

        name = (v9[2])(v9, v48 == 1);
        v50 = [valueCopy addString:name withLanguage:v8];
        goto LABEL_72;
      case 'C':
        _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
        name2 = v62;
        v63 = +[AXSettings sharedInstance];
        imageCaptioningDisabledApps = [v63 imageCaptioningDisabledApps];
        name = [imageCaptioningDisabledApps mutableCopy];

        v65 = (v9[2])(v9, [name containsObject:_appInfoForCurrentElement] ^ 1);
        v66 = [valueCopy addString:v65 withLanguage:v8];

        goto LABEL_72;
      case 'D':
        v59 = off_1001FDDD0;
        v60 = +[AXSettings sharedInstance];
        if ([v60 voiceOverNavigationStyle] == 1)
        {
          v61 = @"NAVIGATION_STYLE_GROUPS";
        }

        else
        {
          v61 = @"NAVIGATION_STYLE_FLAT";
        }

        name2 = sub_1000516CC(v59, v61, 0, v8);

        goto LABEL_60;
      case 'P':
        name2 = +[AXSettings sharedInstance];
        [(__CFString *)name2 voiceOverEffectiveSpeakingVolume];
        _appInfoForCurrentElement = AXFormatFloatWithPercentage();
        v76 = valueCopy;
        v77 = _appInfoForCurrentElement;
        goto LABEL_88;
      case 'Q':
        [(VOTElementManager *)self rotorRate];
        _brailleAutoAdvanceSpeedString = AXFormatFloatWithPercentage();
        goto LABEL_100;
      case 'R':
        _typingEchoString = [(VOTElementManager *)self _typingEchoString];
        goto LABEL_59;
      case 'S':
        _typingEchoString = [(VOTElementManager *)self _speechPhoneticsString];
        goto LABEL_59;
      case 'T':
        name2 = +[AXSettings sharedInstance];
        voiceOverPitchChangeEnabled = [(__CFString *)name2 voiceOverPitchChangeEnabled];
        goto LABEL_74;
      case 'U':
        v53 = +[AXSettings sharedInstance];
        _appInfoForCurrentElement = [v53 voiceOverPunctuationGroup];

        if (_appInfoForCurrentElement)
        {
          punctuationGroups = [VOTSharedWorkspace punctuationGroups];
          v103[0] = _NSConcreteStackBlock;
          v103[1] = 3221225472;
          v103[2] = sub_10006B8C4;
          v103[3] = &unk_1001C8940;
          v104 = _appInfoForCurrentElement;
          v55 = [punctuationGroups indexOfObjectPassingTest:v103];
          if (v55 == 0x7FFFFFFFFFFFFFFFLL)
          {
            name2 = 0;
          }

          else
          {
            v88 = [punctuationGroups objectAtIndexedSubscript:v55];
            name2 = [v88 name];
          }
        }

        else
        {
          punctuationGroups = [VOTSharedWorkspace defaultPunctuationGroup];
          name2 = [punctuationGroups name];
        }

        v76 = valueCopy;
        v77 = name2;
LABEL_88:
        v89 = [v76 addString:v77];
        goto LABEL_79;
      case 'V':
        name2 = +[AXSettings sharedInstance];
        voiceOverPitchChangeEnabled = [(__CFString *)name2 voiceOverSoundEffectsEnabled];
        goto LABEL_74;
      case 'W':
        if (!AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
        {
          name2 = +[AXSettings sharedInstance];
          voiceOverPitchChangeEnabled = [(__CFString *)name2 voiceOverAudioDuckingEnabled];
          goto LABEL_74;
        }

        v78 = off_1001FDDD0;
        name2 = [(VOTElementManager *)self _audioDuckingModeString];
        v51 = v78;
        v52 = name2;
LABEL_66:
        _customActionDefaultActionString = sub_1000516CC(v51, v52, 0, v8);
        goto LABEL_76;
      case 'X':
        if (!AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
        {
          goto LABEL_81;
        }

        v56 = +[AXSettings sharedInstance];
        [v56 voiceOverMediaDuckingAmount];
        v58 = v57;

        name2 = sub_1000516CC(off_1001FDDD0, @"ducking.amount.short", 0, v8);
        v101 = v58 * 100.0;
        _customActionDefaultActionString = AXCFormattedString();
        goto LABEL_76;
      case 'Z':
        _typingEchoString = -[VOTElementManager _navigationDirectionModeString:](self, "_navigationDirectionModeString:", [VOTSharedWorkspace navigationDirection]);
        goto LABEL_59;
      case '[':
        name2 = [VOTSharedWorkspace selectedActivity];
        _appInfoForCurrentElement = [(__CFString *)name2 name];
        if (_appInfoForCurrentElement)
        {
          goto LABEL_77;
        }

        v51 = off_1001FDDD0;
        v52 = @"no.activity.selected";
        goto LABEL_66;
      case ']':
        currentRotorDetectionMode = [VOTSharedWorkspace currentRotorDetectionMode];
        name2 = AXLocalizedNameForDetectionMode();
        v41 = +[AXSettings sharedInstance];
        v42 = v41;
        if (currentRotorDetectionMode == 6)
        {
          liveRecognitionActivity = [v41 liveRecognitionActivity];
          [liveRecognitionActivity name];
          v44 = 0;
          name2 = v45 = name2;
        }

        else
        {
          liveRecognitionActivity = [v41 enabledLiveRecognitionModes];
          v45 = [NSNumber numberWithUnsignedInt:currentRotorDetectionMode];
          v44 = [liveRecognitionActivity containsObject:v45];
        }

        v83 = [valueCopy addString:name2 withLanguage:v8];
        (v9[2])(v9, v44);
        goto LABEL_75;
      case '_':
        _appInfoForCurrentElement2 = [(VOTElementManager *)self _appInfoForCurrentElement];
        name2 = v68;
        _appInfoForCurrentElement = _appInfoForCurrentElement2;
        webAreaURL = [(VOTElement *)self->_currentElement webAreaURL];
        host = [webAreaURL host];

        v71 = _appInfoForCurrentElement;
        if ([host length])
        {
          v71 = host;
        }

        v72 = +[AXSettings sharedInstance];
        v73 = [v72 liveRegionStatusForWebOrApp:v71];

        if (v73)
        {
          bOOLValue = [v73 BOOLValue];
        }

        else
        {
          bOOLValue = 1;
        }

        v86 = (v9[2])(v9, bOOLValue);
        v87 = [valueCopy addString:v86 withLanguage:v8];

        goto LABEL_79;
        if (![(VOTElementManager *)self hasCopiedSpeech])
        {
          goto LABEL_81;
        }

        v36 = +[VOTLockStateManager sharedInstance];
        isLocked = [v36 isLocked];

        if (isLocked)
        {
          v38 = off_1001FDDD0;
          v39 = @"unlock.copied.speech";
LABEL_99:
          _brailleAutoAdvanceSpeedString = sub_1000516CC(v38, v39, 0, v8);
          goto LABEL_100;
        }

        copiedSpeechIndex = self->_copiedSpeechIndex;
        if (copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL || copiedSpeechIndex > [(NSMutableArray *)self->_copiedSpeechItems count])
        {
          v91 = 0;
          self->_copiedSpeechIndex = 0;
        }

        else
        {
          v91 = self->_copiedSpeechIndex;
        }

        if (v91 == [(NSMutableArray *)self->_copiedSpeechItems count])
        {
          v38 = off_1001FDDD0;
          v39 = @"clear.copied.speech";
          goto LABEL_99;
        }

        v100 = [(NSMutableArray *)self->_copiedSpeechItems objectAtIndex:self->_copiedSpeechIndex];
        name2 = [v100 text];

        break;
      default:
        if (currentRotorType == 42)
        {
          _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
          name2 = v79;
          v80 = [(NSMutableDictionary *)self->_directTouchApps objectForKeyedSubscript:_appInfoForCurrentElement];
          bOOLValue2 = [v80 BOOLValue];

          name = (v9[2])(v9, bOOLValue2);
          v82 = [valueCopy addString:name withLanguage:v8];
LABEL_72:

          goto LABEL_79;
        }

        if (currentRotorType != 32)
        {
          goto LABEL_81;
        }

        name2 = [(VOTElementManager *)self _localizedStringForCurrentBrailleTextMode];
        if (!name2)
        {
          name2 = sub_1000511CC(off_1001FDDD0, @"default.action.suffix", 0);
        }

        v25 = valueCopy;
        v26 = name2;
        v27 = 0;
        goto LABEL_61;
    }

    goto LABEL_101;
  }

  if (currentRotorType <= 23)
  {
    if (currentRotorType == 21)
    {
      _typingEchoString = [(VOTElementManager *)self _localizedTypingModeStringForCurrentMode];
LABEL_59:
      name2 = _typingEchoString;
LABEL_60:
      v25 = valueCopy;
      v26 = name2;
      v27 = v8;
LABEL_61:
      v75 = [v25 addString:v26 withLanguage:v27];
      goto LABEL_80;
    }

    if (currentRotorType != 22)
    {
      if (currentRotorType == 23)
      {
        name2 = [VOTSharedWorkspace selectedLanguage];
        v15 = +[AXSettings sharedInstance];
        voiceOverVoiceRotors = [v15 voiceOverVoiceRotors];

        v17 = +[AXSettings sharedInstance];
        voiceOverCurrentRotorVoiceIdentifier = [v17 voiceOverCurrentRotorVoiceIdentifier];

        if (!voiceOverCurrentRotorVoiceIdentifier || ([voiceOverCurrentRotorVoiceIdentifier isEqualToString:&stru_1001CBF90] & 1) != 0 || (v105[0] = _NSConcreteStackBlock, v105[1] = 3221225472, v105[2] = sub_10006B880, v105[3] = &unk_1001C9008, v106 = voiceOverCurrentRotorVoiceIdentifier, v19 = objc_msgSend(voiceOverVoiceRotors, "indexOfObjectPassingTest:", v105), v106, v19 == 0x7FFFFFFFFFFFFFFFLL))
        {
          userDefinedName2 = sub_1000511CC(off_1001FDDD0, @"voice.primary.suffix", 0);
        }

        else
        {
          v102 = [voiceOverVoiceRotors objectAtIndexedSubscript:v19];
          identifier = [v102 identifier];
          v93 = +[AXSettings sharedInstance];
          [v93 setVoiceOverCurrentRotorVoiceIdentifier:identifier];

          v94 = [voiceOverVoiceRotors objectAtIndexedSubscript:v19];
          userDefinedName = [v94 userDefinedName];

          v96 = [voiceOverVoiceRotors objectAtIndexedSubscript:v19];
          v97 = v96;
          if (userDefinedName)
          {
            userDefinedName2 = [v96 userDefinedName];
          }

          else
          {
            voiceId = [v96 voiceId];
            userDefinedName2 = AXVoiceNameForVoiceId();
          }
        }

        v21 = sub_1000511CC(off_1001FDDD0, @"voice.current.suffix", 0);
        v22 = [NSString stringWithFormat:v21, userDefinedName2];
        v23 = [valueCopy addString:v22 withLanguage:name2];

        goto LABEL_80;
      }

      goto LABEL_81;
    }

    name2 = +[VOSSettingsHelper sharedInstance];
    voiceOverPitchChangeEnabled = [(__CFString *)name2 isSlideToTypeEnabled];
LABEL_74:
    (v9[2])(v9, voiceOverPitchChangeEnabled);
    _customActionDefaultActionString = LABEL_75:;
LABEL_76:
    _appInfoForCurrentElement = _customActionDefaultActionString;
LABEL_77:
    v33 = valueCopy;
    v34 = _appInfoForCurrentElement;
    v35 = v8;
LABEL_78:
    v85 = [v33 addString:v34 withLanguage:{v35, *&v101}];
LABEL_79:

    goto LABEL_80;
  }

  switch(currentRotorType)
  {
    case 24:
      selectedBrailleTable = [VOTSharedWorkspace selectedBrailleTable];
      goto LABEL_27;
    case 25:
      selectedBrailleTable = [VOTSharedWorkspace selectedBrailleInputTable];
LABEL_27:
      name2 = selectedBrailleTable;
      v31 = +[VOTBrailleManager manager];
      _appInfoForCurrentElement = [v31 nameForSpokenAnnouncementOfBrailleTable:name2];

      if (!_appInfoForCurrentElement)
      {
        _appInfoForCurrentElement = sub_1000511CC(off_1001FDDD0, @"default.action.suffix", 0);
      }

      v33 = valueCopy;
      v34 = _appInfoForCurrentElement;
      v35 = 0;
      goto LABEL_78;
    case 26:
      _brailleAutoAdvanceSpeedString = [(VOTElementManager *)self _brailleAutoAdvanceSpeedString];
LABEL_100:
      name2 = _brailleAutoAdvanceSpeedString;
LABEL_101:
      v99 = [valueCopy addString:name2];
LABEL_80:

      break;
  }

LABEL_81:
}

- (void)setCurrentTextSelectionSegmentType:(int64_t)type
{
  textSelectionMovementManager = [(VOTElementManager *)self textSelectionMovementManager];
  [textSelectionMovementManager setSegment:type];
}

- (void)setElementRotorToType:(int64_t)type saveToPreferences:(BOOL)preferences userInitiated:(BOOL)initiated
{
  initiatedCopy = initiated;
  preferencesCopy = preferences;
  if (self->_inUnitTestingMode)
  {

    [VOTElementManager _setElementRotorToType:"_setElementRotorToType:saveToPreferences:userInitiated:" saveToPreferences:type userInitiated:?];
  }

  else
  {
    elementManagerThread = self->_elementManagerThread;
    v11 = [NSNumber numberWithInteger:type];
    v9 = [NSNumber numberWithBool:preferencesCopy];
    v10 = [NSNumber numberWithBool:initiatedCopy];
    [(SCRCThread *)elementManagerThread performSelector:"_setElementRotorToNumberType:saveToNumberPreferences:numberUserInitiated:" onTarget:self count:3 objects:v11, v9, v10, 0];
  }
}

- (void)_setElementRotorToNumberType:(id)type saveToNumberPreferences:(id)preferences numberUserInitiated:(id)initiated
{
  initiatedCopy = initiated;
  preferencesCopy = preferences;
  integerValue = [type integerValue];
  bOOLValue = [preferencesCopy BOOLValue];

  bOOLValue2 = [initiatedCopy BOOLValue];

  [(VOTElementManager *)self _setElementRotorToType:integerValue saveToPreferences:bOOLValue userInitiated:bOOLValue2];
}

- (void)_setElementRotorToType:(int64_t)type saveToPreferences:(BOOL)preferences userInitiated:(BOOL)initiated
{
  [(VOTRotor *)self->_elementRotor setCurrentRotorType:type saveToPreferences:preferences userInitiated:initiated];
  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 6)
  {
    _inMisspelledWordRotor = 1;
  }

  else
  {
    _inMisspelledWordRotor = [(VOTElementManager *)self _inMisspelledWordRotor];
  }

  self->_inTextProcessingRotorMode = _inMisspelledWordRotor;
}

- (BOOL)forceRotorOffGesturedTextInputIfNeeded:(BOOL)needed
{
  neededCopy = needed;
  currentRotorType = [(VOTRotor *)self->_elementRotor currentRotorType];
  if (!sub_1000F8768([(VOTRotor *)self->_elementRotor currentRotorType]))
  {
    return 0;
  }

  do
  {
    [(VOTElementManager *)self _handleSearchRotorDirection:2 event:0 notifyUser:neededCopy];
    currentRotorType2 = [(VOTRotor *)self->_elementRotor currentRotorType];
    v7 = currentRotorType != currentRotorType2;
  }

  while (currentRotorType != currentRotorType2 && sub_1000F8768([(VOTRotor *)self->_elementRotor currentRotorType]));
  return v7;
}

- (void)elementsCounted:(int64_t)counted
{
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  switch([(VOTElementManager *)self currentRotorType])
  {
    case 8:
      v6 = @"header.count";
      v7 = off_1001FDDD0;
      v8 = @"header.count.high";
      goto LABEL_18;
    case 9:
      v6 = @"link.count";
      v7 = off_1001FDDD0;
      v8 = @"link.count.high";
      goto LABEL_18;
    case 0xALL:
      v6 = @"formelement.count";
      v7 = off_1001FDDD0;
      v8 = @"formelement.count.high";
      goto LABEL_18;
    case 0xBLL:
      v6 = @"radiogroup.count";
      v7 = off_1001FDDD0;
      v8 = @"radiogroup.count.high";
      goto LABEL_18;
    case 0xCLL:
      v6 = @"table.count";
      v7 = off_1001FDDD0;
      v8 = @"table.count.high";
      goto LABEL_18;
    case 0xDLL:
      v6 = @"frame.count";
      v7 = off_1001FDDD0;
      v8 = @"frame.count.high";
      goto LABEL_18;
    case 0xELL:
      v6 = @"list.count";
      v7 = off_1001FDDD0;
      v8 = @"list.count.high";
      goto LABEL_18;
    case 0xFLL:
      v6 = @"visitedlink.count";
      v7 = off_1001FDDD0;
      v8 = @"visitedlink.count.high";
      goto LABEL_18;
    case 0x10:
      v6 = @"nonvisited.count";
      v7 = off_1001FDDD0;
      v8 = @"nonvisited.count.high";
      goto LABEL_18;
    case 0x11:
      v6 = @"image.count";
      v7 = off_1001FDDD0;
      v8 = @"image.count.high";
      goto LABEL_18;
    case 0x21:
      v6 = @"landmark.count";
      v7 = off_1001FDDD0;
      v8 = @"landmark.count.high";
      goto LABEL_18;
    case 0x22:
      v6 = @"article.count";
      v7 = off_1001FDDD0;
      v8 = @"article.count.high";
      goto LABEL_18;
    case 0x23:
      v6 = @"button.count";
      v7 = off_1001FDDD0;
      v8 = @"button.count.high";
      goto LABEL_18;
    case 0x24:
      v6 = @"textfield.count";
      v7 = off_1001FDDD0;
      v8 = @"textfield.count.high";
      goto LABEL_18;
    case 0x28:
      v6 = @"searchfield.count";
      v7 = off_1001FDDD0;
      v8 = @"searchfield.count.high";
      goto LABEL_18;
    case 0x29:
      v6 = @"checkbox.count";
      v7 = off_1001FDDD0;
      v8 = @"checkbox.count.high";
LABEL_18:
      if (counted == 0x7FFFFFFFFFFFFFFFLL)
      {
        v9 = v8;
      }

      else
      {
        v9 = v6;
      }

      v10 = sub_1000516CC(v7, v9, 0, selectedLanguage);
      counted = [NSString localizedStringWithFormat:v10, counted];

      if (counted)
      {
        CFAbsoluteTimeGetCurrent();
        if (counted != 0x7FFFFFFFFFFFFFFFLL)
        {
          v14 = AXFormatInteger();
          v12 = AXCFormattedString();

          counted = v12;
        }

        [(VOTElementManager *)self cancelElementCountOutput];
        v15 = selectedLanguage;
        v13 = counted;
        AXPerformBlockOnMainThreadAfterDelay();
      }

      break;
    default:
      break;
  }
}

- (id)webEditableAncestor:(id)ancestor
{
  ancestorCopy = ancestor;
  v4 = kAXWebContentTrait;
  if ([ancestorCopy doesHaveTraits:kAXWebContentTrait])
  {
    directParent = [ancestorCopy directParent];
    if (!directParent)
    {
      goto LABEL_9;
    }

    v6 = kAXIsEditingTrait;
    do
    {
      if (![directParent doesHaveTraits:v4])
      {
        break;
      }

      if ([directParent doesHaveTraits:v6])
      {
        goto LABEL_9;
      }

      v5DirectParent = [directParent directParent];

      directParent = v5DirectParent;
    }

    while (v5DirectParent);
  }

  directParent = 0;
LABEL_9:

  return directParent;
}

- (void)setCurrentElementToWebEditableAncestor
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXWebContentTrait]&& ![(VOTElement *)self->_currentElement doesHaveTraits:kAXIsEditingTrait])
  {
    v3 = [(VOTElementManager *)self webEditableAncestor:self->_currentElement];
    if (v3)
    {
      [(VOTElementManager *)self _setCurrentElement:v3];
    }

    _objc_release_x1();
  }
}

- (void)_outputRotorTypeCount
{
  [(VOTElementManager *)self cancelElementCountOutput];
  qword_1001FECA0 = CFAbsoluteTimeGetCurrent();
  currentRotorType = [(VOTRotor *)self->_elementRotor currentRotorType];
  _currentElement = [(VOTElementManager *)self _currentElement];
  v5 = [(VOTElementManager *)self _rotorTypeSupportsCounting:currentRotorType];
  application = [_currentElement application];
  isSafari = [application isSafari];
  if (v5)
  {
    if ((isSafari & 1) != 0 || [application isGoogleChrome])
    {
      v9 = 0;
      v8 = [(VOTElementManager *)self _copyMatchBlockForRotorType:currentRotorType searchType:&v9];
      [(VOTElementFetcher *)self->_fetchManager cancelPreviousCount];
      [(VOTElementFetcher *)self->_fetchManager countElementsMatchingBlock:v8];
    }
  }

  else if ((isSafari & 1) != 0 || [application isGoogleChrome])
  {
    [(VOTElementFetcher *)self->_fetchManager cancelPreviousCount];
  }
}

- (void)_handleSearchRotorDirection:(int64_t)direction event:(id)event
{
  [(VOTElementManager *)self _handleSearchRotorDirection:direction event:event notifyUser:1];
  elementManager = [VOTSharedWorkspace elementManager];
  elementRotor = [elementManager elementRotor];
  currentRotorType = [elementRotor currentRotorType];

  if (currentRotorType == 4)
  {

    [(VOTElementManager *)self tutorialSetRecognizedGesture:@"RotorWords"];
  }
}

- (void)_handleSearchRotorDirection:(int64_t)direction event:(id)event notifyUser:(BOOL)user
{
  userCopy = user;
  eventCopy = event;
  if ([VOTSharedWorkspace voiceOverMuted])
  {
    if ([eventCopy isKeyEvent])
    {
      v9 = +[VOTBrailleManager manager];
      bluetoothBrailleDisplayConnected = [v9 bluetoothBrailleDisplayConnected];

      if ((bluetoothBrailleDisplayConnected & 1) == 0)
      {
        [VOTSharedWorkspace setVoiceOverMuted:0];
      }
    }
  }

  if (userCopy && ![(VOTElementRotor *)self->_elementRotor ignoreDefaultTypeAutofill])
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    v12 = [_currentElement doesHaveTraits:kAXIsEditingTrait];

    if (v12)
    {
      [(VOTElementRotor *)self->_elementRotor setIgnoreDefaultTypeAutofill:1];
    }
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 5 || [(VOTRotor *)self->_elementRotor currentRotorType]== 6)
  {
    [(VOTElementManager *)self setCurrentElementToWebEditableAncestor];
  }

  if (self->_flags.shouldUpdateRotorForElement || (lastSeenApplicationOrientation = self->_lastSeenApplicationOrientation, lastSeenApplicationOrientation != [VOTSharedWorkspace applicationOrientation]))
  {
    _currentElement2 = [(VOTElementManager *)self _currentElement];
    [_currentElement2 updateTraits];

    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }

  v18 = 0;
  if (direction == 1)
  {
    -[VOTRotor increment:userInitiated:eventOrigin:](self->_elementRotor, "increment:userInitiated:eventOrigin:", &v18, 1, [eventCopy origin]);
  }

  else if (direction == 2)
  {
    -[VOTRotor decrement:userInitiated:eventOrigin:](self->_elementRotor, "decrement:userInitiated:eventOrigin:", &v18, 1, [eventCopy origin]);
  }

  if ([eventCopy fingerCount])
  {
    [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer cancel];
  }

  else
  {
    [(VOTElementManager *)self hideVisualRotor];
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 54)
  {
    self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
    customActionIdentifier = self->_customActionIdentifier;
    self->_customActionIdentifier = 0;
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 92)
  {
    self->_customContentIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

  _inMisspelledWordRotor = [(VOTElementManager *)self _inMisspelledWordRotor];
  self->_inTextProcessingRotorMode = ([(VOTRotor *)self->_elementRotor currentRotorType]== 6) | _inMisspelledWordRotor & 1;
  if ((_inMisspelledWordRotor & 1) == 0)
  {
    self->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

  if (userCopy)
  {
    [(VOTElementManager *)self _showVisualRotor:self->_elementRotor direction:direction == 1];
    generateRotorTypeRequest = [(VOTRotor *)self->_elementRotor generateRotorTypeRequest];
    [(VOTElementManager *)self _appendCurrentRotorValue:generateRotorTypeRequest forRotor:self->_elementRotor];
    [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:generateRotorTypeRequest];
    [generateRotorTypeRequest send];
  }

  [(VOTElementManager *)self _outputRotorTypeCount];
}

- (void)didTerminateDragForDragManager:(id)manager
{
  [(SCRCThread *)self->_elementManagerThread performSelector:"_dragTerminated" onTarget:self count:0 objects:0];
  dragOutputManager = self->_dragOutputManager;

  [(VOTDragOutputManager *)dragOutputManager dragEnded];
}

- (void)_dragTerminated
{
  _currentCustomActions = [(VOTElementManager *)self _currentCustomActions];
  customActionIndex = self->_customActionIndex;
  if (customActionIndex >= 1)
  {
    v9 = _currentCustomActions;
    v5 = customActionIndex >= [_currentCustomActions count];
    _currentCustomActions = v9;
    if (!v5)
    {
      v6 = [v9 objectAtIndexedSubscript:self->_customActionIndex];
      v7 = [v6 isValidForContext:self];

      _currentCustomActions = v9;
      if ((v7 & 1) == 0)
      {
        self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
        customActionIdentifier = self->_customActionIdentifier;
        self->_customActionIdentifier = 0;

        _currentCustomActions = v9;
      }
    }
  }
}

- (void)_dragStarted
{
  [(VOTDragOutputManager *)self->_dragOutputManager dragSessionStarted];
  [(VOTElementManager *)self _layoutChangeForDragSessionStart];
  _currentCustomActions = [(VOTElementManager *)self _currentCustomActions];
  customActionIndex = self->_customActionIndex;
  if (customActionIndex >= 1)
  {
    v9 = _currentCustomActions;
    v5 = customActionIndex >= [_currentCustomActions count];
    _currentCustomActions = v9;
    if (!v5)
    {
      v6 = [v9 objectAtIndexedSubscript:self->_customActionIndex];
      v7 = [v6 isValidForContext:self];

      _currentCustomActions = v9;
      if ((v7 & 1) == 0)
      {
        self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
        customActionIdentifier = self->_customActionIdentifier;
        self->_customActionIdentifier = 0;

        _currentCustomActions = v9;
      }
    }
  }
}

- (void)cancelDrag
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(AXDragManager *)self->_dragManager cancelDrag];
  [(VOTDragOutputManager *)self->_dragOutputManager dragCancelled];
  [(VOTElementFetcher *)self->_fetchManager forceUpdate];

  [(VOTElementManager *)self _handleLayoutChange:0];
}

- (void)dropDrag
{
  [(AXDragManager *)self->_dragManager drop];
  dragOutputManager = self->_dragOutputManager;

  [(VOTDragOutputManager *)dragOutputManager dragDropped];
}

- (void)moveDragToPoint:(CGPoint)point
{
  [(AXDragManager *)self->_dragManager moveToPoint:point.x, point.y];
  dragOutputManager = self->_dragOutputManager;

  [(VOTDragOutputManager *)dragOutputManager dragMoved];
}

- (void)_updateContextDescriptors
{
  currentContextDescriptors = [(VOTElementManager *)self currentContextDescriptors];
  [(VOTElementManager *)self setPreviousContextDescriptors:currentContextDescriptors];

  _currentElement = [(VOTElementManager *)self _currentElement];
  contextDescriptors = [_currentElement contextDescriptors];

  if ([contextDescriptors count])
  {
    v6 = +[NSMutableDictionary dictionaryWithCapacity:](NSMutableDictionary, "dictionaryWithCapacity:", [contextDescriptors count]);
    v16 = 0u;
    v17 = 0u;
    v18 = 0u;
    v19 = 0u;
    v15 = contextDescriptors;
    v7 = contextDescriptors;
    v8 = [v7 countByEnumeratingWithState:&v16 objects:v20 count:16];
    if (v8)
    {
      v9 = v8;
      v10 = *v17;
      do
      {
        for (i = 0; i != v9; i = i + 1)
        {
          if (*v17 != v10)
          {
            objc_enumerationMutation(v7);
          }

          v12 = *(*(&v16 + 1) + 8 * i);
          v13 = [v12 objectForKeyedSubscript:@"value"];
          v14 = [v12 objectForKeyedSubscript:@"category"];
          [v6 setObject:v13 forKeyedSubscript:v14];
        }

        v9 = [v7 countByEnumeratingWithState:&v16 objects:v20 count:16];
      }

      while (v9);
    }

    [(VOTElementManager *)self setCurrentContextDescriptors:v6];
    contextDescriptors = v15;
  }

  else
  {
    [(VOTElementManager *)self setCurrentContextDescriptors:0];
  }
}

- (BOOL)_touchContainerDidChangeForElement:(id)element oldElement:(id)oldElement
{
  oldElementCopy = oldElement;
  labeledTouchContainer = [element labeledTouchContainer];
  uiElement = [labeledTouchContainer uiElement];

  labeledTouchContainer2 = [oldElementCopy labeledTouchContainer];

  uiElement2 = [labeledTouchContainer2 uiElement];

  axElement = [uiElement axElement];
  axElement2 = [uiElement2 axElement];
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    axElement = uiElement;
  }

  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v12 = uiElement2;
  }

  else
  {
    v12 = axElement2;
  }

  if (v12 | axElement)
  {
    v13 = (axElement != 0) != (v12 != 0) || CFEqual(axElement, v12) == 0;
  }

  else
  {
    v13 = 0;
  }

  return v13;
}

- (BOOL)_chartElementDidChangeForElement:(id)element oldElement:(id)oldElement
{
  elementCopy = element;
  oldElementCopy = oldElement;
  if (AXDeviceSupportsSonification() && ([elementCopy chartElement], v7 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v7, "uiElement"), v8 = objc_claimAutoreleasedReturnValue(), v9 = objc_msgSend(v8, "axElement"), v8, v7, objc_msgSend(oldElementCopy, "chartElement"), v10 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v10, "uiElement"), v11 = objc_claimAutoreleasedReturnValue(), v12 = objc_msgSend(v11, "axElement"), v11, v10, v9 | v12))
  {
    v13 = (v9 != 0) != (v12 != 0) || CFEqual(v9, v12) == 0;
  }

  else
  {
    v13 = 0;
  }

  return v13;
}

- (BOOL)_shouldIncludeContainerInDescriptionForCurrentElement:(id)element previousElement:(id)previousElement
{
  elementCopy = element;
  previousElementCopy = previousElement;
  if (!previousElementCopy)
  {
    if (CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime <= 2.0)
    {
      previousElementCopy = self->_elementBeforeScreenChange;
    }

    else
    {
      previousElementCopy = 0;
    }
  }

  labeledTouchContainer = [(VOTElement *)previousElementCopy labeledTouchContainer];
  label = [labeledTouchContainer label];

  labeledTouchContainer2 = [elementCopy labeledTouchContainer];
  label2 = [labeledTouchContainer2 label];

  v12 = [(VOTElementManager *)self _elementCommunityForElement:elementCopy];
  v13 = [(VOTElementManager *)self _elementCommunityForElement:previousElementCopy];
  v14 = (label != label2) & ~[label isEqualToString:label2];
  v15 = [v12 isEqual:v13] ^ 1;
  v16 = [(VOTElementManager *)self _touchContainerDidChangeForElement:elementCopy oldElement:previousElementCopy];
  if (v15 & 1) == 0 && v14 && ([elementCopy labeledTouchContainer], v23 = elementCopy, v17 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v12, "labeledTouchContainer"), v22 = label, v18 = objc_claimAutoreleasedReturnValue(), v19 = objc_msgSend(v17, "isEqual:", v18), v18, label = v22, v17, elementCopy = v23, (v19))
  {
    v20 = 0;
  }

  else
  {
    v20 = v16 & (v15 | v14);
  }

  return v20;
}

- (void)_echoFlickNavigationElement:(id)element
{
  elementCopy = element;
  _currentElement = [(VOTElementManager *)self _currentElement];
  sub_10006C77C(elementCopy, _currentElement);
  v5 = [objc_allocWithZone(VOTOutputRequest) init];
  v6 = [(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:elementCopy previousElement:_currentElement];
  v7 = [(VOTElementManager *)self _updateTouchContainerForElement:elementCopy playSound:1];
  if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:elementCopy])
  {
    v8 = 0x200800802;
  }

  else
  {
    v8 = 8390658;
  }

  isDragActive = [(AXDragManager *)self->_dragManager isDragActive];
  v10 = 0x40000000;
  if (!isDragActive)
  {
    v10 = 0;
  }

  v11 = v10 | v8;
  if ([elementCopy containedIn:2] && objc_msgSend(elementCopy, "rowRange") == self->_lastTableRow)
  {
    v11 |= 0x400000uLL;
  }

  if (v6)
  {
    shouldSpeakScrollStatusOnEntry = [elementCopy shouldSpeakScrollStatusOnEntry];
    v13 = 32;
    if (shouldSpeakScrollStatusOnEntry)
    {
      v13 = 32800;
    }

    v11 |= v13;
  }

  if (AXDeviceSupportsSonification() && [elementCopy supportsAudiographs] && -[VOTElementManager _chartElementDidChangeForElement:oldElement:](self, "_chartElementDidChangeForElement:oldElement:", elementCopy, _currentElement))
  {
    v11 |= 0x4100000000uLL;
  }

  blockquoteLevel = [elementCopy blockquoteLevel];
  if (blockquoteLevel == [_currentElement blockquoteLevel])
  {
    v15 = v11;
  }

  else
  {
    v15 = v11 | 0x20000;
  }

  if (_currentElement)
  {
    applicationIsRTL = [elementCopy applicationIsRTL];
    if (applicationIsRTL != [_currentElement applicationIsRTL])
    {
      v15 |= 0x8000000000uLL;
    }
  }

  [(VOTElementManager *)self _prepareElementOutputHeaders:elementCopy currentElement:_currentElement request:v5];
  currentContextDescriptors = [(VOTElementManager *)self currentContextDescriptors];
  [(VOTElementManager *)self _addDescription:elementCopy toRequest:v5 withOptions:v15 lastSeenContextDescriptors:currentContextDescriptors];

  [(VOTElementManager *)self sendRequest:v5];
  if ([elementCopy doesHaveTraits:kAXLinkTrait])
  {
    v18 = [elementCopy url];

    if (v18)
    {
      [elementCopy frame];
      [(VOTElementManager *)self _outputDataDetectorIfPresent:elementCopy element:0 includeLinks:?];
    }
  }
}

- (void)_echoSearchNavigationElement:(id)element forRangeAdjustment:(BOOL)adjustment
{
  adjustmentCopy = adjustment;
  elementCopy = element;
  v6 = [objc_allocWithZone(VOTOutputRequest) init];
  _currentElement = [(VOTElementManager *)self _currentElement];
  [(VOTElementManager *)self _prepareElementOutputHeaders:elementCopy currentElement:_currentElement request:v6];

  _currentElement2 = [(VOTElementManager *)self _currentElement];
  v9 = [(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:_currentElement2 previousElement:elementCopy];

  if (v9)
  {
    v10 = 8388642;
  }

  else
  {
    v10 = 8388610;
  }

  if (adjustmentCopy)
  {
    [v6 setDoesNotInterrupt:1];
    v10 = 0x2000000;
  }

  [(VOTElementManager *)self _addDescription:elementCopy toRequest:v6 withOptions:v10];
  [(VOTElementManager *)self sendRequest:v6];
  if ([elementCopy doesHaveTraits:kAXLinkTrait])
  {
    v11 = [elementCopy url];

    if (v11)
    {
      [elementCopy frame];
      [(VOTElementManager *)self _outputDataDetectorIfPresent:elementCopy element:0 includeLinks:?];
    }
  }
}

- (void)_echoSearchTypeNotFound:(int64_t)found
{
  currentRotorType = [VOTRotor rotorTypeForSearchType:?];
  if (!currentRotorType)
  {
    currentRotorType = [(VOTRotor *)self->_elementRotor currentRotorType];
  }

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v13 = selectedLanguage;
  if (found)
  {
    v7 = selectedLanguage;
    v8 = currentRotorType - 8;
    if ((currentRotorType - 8) > 0x23 || ((0xB1E0007FFuLL >> v8) & 1) == 0)
    {
      v10 = 0;
      goto LABEL_10;
    }

    v9 = *(&off_1001CA2F8 + v8);
  }

  else
  {
    v9 = @"generic.notfound";
  }

  v11 = sub_1000516CC(off_1001FDDD0, v9, 0, selectedLanguage);
  v7 = v13;
  v10 = v11;
LABEL_10:
  v12 = sub_1000095FC(v10, 0, v7);
}

- (BOOL)_isShowingTodayViewForPhone
{
  if ([(NSArray *)self->_currentApplications count]!= 2)
  {
    return 0;
  }

  firstObject = [(NSArray *)self->_currentApplications firstObject];
  if ([firstObject isSpotlight])
  {
    lastObject = [(NSArray *)self->_currentApplications lastObject];
    isSpringBoard = [lastObject isSpringBoard];
  }

  else
  {
    isSpringBoard = 0;
  }

  return isSpringBoard;
}

- (void)_elementFetchFoundElement:(id)element
{
  elementCopy = element;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  element = [elementCopy element];
  uiElement = [element uiElement];
  [uiElement enableCache:1];

  if ([elementCopy clientGeneration] == self->_elementSearchGeneration)
  {
    v7 = objc_autoreleasePoolPush();
    [(VOTElementManager *)self _resetReadAllRequest];
    _currentElement = [(VOTElementManager *)self _currentElement];
    navigationStyleHonorsGroups = [VOTSharedWorkspace navigationStyleHonorsGroups];
    if (!element)
    {
      v11 = navigationStyleHonorsGroups;
      if (!_AXSClarityBoardEnabled() || (v12 = [elementCopy direction], v12 != 1) && objc_msgSend(elementCopy, "direction") != 2 || (-[VOTElementManager _getNextFocusedElementInElementCommunityPrevious:shouldUseCache:shouldWrapAround:](self, "_getNextFocusedElementInElementCommunityPrevious:shouldUseCache:shouldWrapAround:", v12 != 1, 0, 0), (v13 = objc_claimAutoreleasedReturnValue()) == 0))
      {
        if (-[VOTRotor publicCustomRotorIndex](self->_elementRotor, "publicCustomRotorIndex") != 0x7FFFFFFFFFFFFFFFLL && (!v11 || ([elementCopy searchEndedWithDifferentGroup] & 1) == 0))
        {
          directParent = [_currentElement directParent];
          application = [directParent application];
          if ([directParent isValidForApplication:application])
          {
            isAccessibleElement = [directParent isAccessibleElement];

            if (isAccessibleElement)
            {
              [(VOTElementManager *)self _setCurrentElement:directParent];
              [(VOTElementManager *)self _resetElementUnitIndexes];
              _copyMatchBlockAnyElement = [(VOTElementManager *)self _copyMatchBlockAnyElement];
              fetchManager = self->_fetchManager;
              direction = [elementCopy direction];
              elementSearchGeneration = self->_elementSearchGeneration;
              LOBYTE(v54) = [VOTSharedWorkspace navigationStyleHonorsGroups];
              [(VOTElementFetcher *)fetchManager searchForElementInDirection:direction fromElement:directParent matchBlock:_copyMatchBlockAnyElement rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:0x7FFFFFFFLL groupNavigationStyle:0, v54];

              element = 0;
LABEL_45:

              objc_autoreleasePoolPop(v7);
              goto LABEL_46;
            }
          }

          else
          {
          }
        }

        element = 0;
        v10 = 1;
LABEL_21:
        v60[0] = _NSConcreteStackBlock;
        v60[1] = 3221225472;
        v60[2] = sub_10006E03C;
        v60[3] = &unk_1001C9058;
        v21 = _currentElement;
        v61 = v21;
        element = element;
        v62 = element;
        v22 = objc_retainBlock(v60);
        if (v10)
        {
          if (!self->_flags.performedElementUpdateForSelectionChange && !self->_flags.performedSearch)
          {
            v23 = +[VOTOutputManager outputManager];
            v24 = +[VOSOutputEvent BoundaryEncountered];
            [v23 sendEvent:v24];
          }

          if (self->_flags.performedSearch)
          {
            -[VOTElementManager _echoSearchTypeNotFound:](self, "_echoSearchTypeNotFound:", [elementCopy searchType]);
            _currentElement2 = +[VOTOutputManager outputManager];
            v26 = +[VOSOutputEvent NoResultsFound];
            [_currentElement2 sendEvent:v26];
          }

          else
          {
            if (!self->_flags.performedFlickNavigation)
            {
              if (self->_flags.isReadingAll)
              {
                (v22[2])(v22);
              }

              else if (([v21 verifyElementExists:0] & 1) == 0)
              {
                [(VOTElementManager *)self _handleLayoutChange:0];
              }

              goto LABEL_40;
            }

            _currentElement2 = [(VOTElementManager *)self _currentElement];
            LOWORD(v53) = 257;
            [(VOTElementManager *)self _echoDifferentElement:_currentElement2 forEvent:0 onlyOutputTouchContainerAndSounds:0 canSetAsCurrentElement:0 shouldPlayGuideWireSound:0 isProtectedApp:0 includeHint:v53 boundaryHit:?];
          }

LABEL_40:
          self->_flags.isReadingAll = 0;
          v34 = +[VOTBrailleManager manager];
          [v34 setAutoAdvanceEnabled:0];

LABEL_41:
          v35 = VOTLogElement();
          if (os_signpost_enabled(v35))
          {
            *buf = 0;
            _os_signpost_emit_with_name_impl(&_mh_execute_header, v35, OS_SIGNPOST_INTERVAL_END, 0xEEEEB0B5B2B2EEEELL, "ElementTraversal", "", buf, 2u);
          }

          [(VOTElementManager *)self _resetSearchType];
LABEL_44:

          goto LABEL_45;
        }

        [elementCopy range];
        v28 = v27;
        if ([element isEqual:v21])
        {
          v31 = self->_highlightedCharacterRange.location != [elementCopy range] || self->_highlightedCharacterRange.length != v29;
          if (v28 && v31)
          {
            range = [elementCopy range];
            -[VOTElementManager _moveFocusToUpdatedRange:element:searchType:](self, "_moveFocusToUpdatedRange:element:searchType:", range, v33, element, [elementCopy searchType]);
          }

          goto LABEL_44;
        }

        if (v28)
        {
          self->_flags.performedElementUpdateForSelectionChange = 1;
        }

        if (([element includeDuringContentReading] & 1) != 0 || (objc_msgSend(element, "isReadingContent") & 1) != 0 || self->_flags.performedElementUpdateForSelectionChange || self->_flags.isReadingAll)
        {
          [element shouldPlaySoundWhenFocused];
        }

        else if ([element shouldPlaySoundWhenFocused])
        {
          _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
          v55 = v48;
          v56 = _appInfoForCurrentElement;
          v49 = +[AXSettings sharedInstance];
          v50 = [v49 automaticAccessibilityModeForBundleIdentifier:v56];

          v51 = +[VOTOutputManager outputManager];
          if (v50 == 1)
          {
            +[VOSOutputEvent DidFocusOnScreenRecognitionElement];
          }

          else
          {
            +[VOSOutputEvent DidFocusOnElement];
          }
          v52 = ;
          [v51 sendEvent:v52];
        }

        localOpaqueParent = [element localOpaqueParent];
        if (localOpaqueParent && (v37 = localOpaqueParent, [element remoteParent], v38 = objc_claimAutoreleasedReturnValue(), v38, v37, !v38))
        {
          v40 = 1;
        }

        else
        {
          if (!self->_flags.performedElementUpdateForSelectionChange)
          {
            v39 = sub_100052438(self->_flags.lastElementMovement);
            v58[0] = _NSConcreteStackBlock;
            v58[1] = 3221225472;
            v58[2] = sub_10006E0F8;
            v58[3] = &unk_1001C7778;
            v58[4] = self;
            v59 = element;
            [v59 scrollToElementForDirectional:v39 withCompletion:v58];
          }

          v40 = 0;
        }

        [element updateCache];
        buf[0] = 0;
        if (self->_flags.isReadingAll)
        {
          if ((v22[2])(v22))
          {
LABEL_72:
            v43 = 1;
LABEL_73:
            if ((buf[0] & 1) == 0)
            {
              [(VOTElementManager *)self _setCurrentElement:element isProtectedApp:0 shouldResetTextSelection:1 shouldResetCharacterRange:v43 ignoreIsAccessibilityElementCheck:0];
            }

            if (v40)
            {
              [(VOTElementManager *)self _updateCursorFrameForElementIfNeeded:element];
            }

            goto LABEL_41;
          }

          [(VOTElementManager *)self _continueReadAllWithElement:element setCurrentElement:buf];
          v41 = self->_fetchManager;
          v42 = v21;
        }

        else
        {
          if (!self->_flags.performedFlickNavigation)
          {
            if (self->_flags.performedSearch)
            {
              [elementCopy range];
              v43 = v44 == 0;
              if (v44)
              {
                range2 = [elementCopy range];
                -[VOTElementManager _moveFocusToUpdatedRange:element:searchType:](self, "_moveFocusToUpdatedRange:element:searchType:", range2, v46, element, [elementCopy searchType]);
                v40 = 0;
                self->_flags.performedElementUpdateForSelectionChange = 1;
              }

              [(VOTElementManager *)self _echoSearchNavigationElement:element forRangeAdjustment:v28 != 0];
            }

            else
            {
              v43 = 1;
              if (self->_flags.performedElementUpdateForSelectionChange)
              {
                [(VOTElementManager *)self _setCurrentElement:element isProtectedApp:0 shouldResetTextSelection:0 shouldResetCharacterRange:0 ignoreIsAccessibilityElementCheck:0];
                buf[0] = 1;
              }
            }

            goto LABEL_73;
          }

          [(VOTElementManager *)self _echoFlickNavigationElement:element];
          if ([elementCopy needsForceCacheUpdate])
          {
            [(VOTElementFetcher *)self->_fetchManager forceUpdate];
          }

          v41 = self->_fetchManager;
          v42 = element;
        }

        [(VOTElementFetcher *)v41 updateCacheWithElement:v42];
        goto LABEL_72;
      }

      element = v13;
    }

    v10 = 0;
    goto LABEL_21;
  }

LABEL_46:
}

- (id)_copyMatchBlockSearchText
{
  v2 = [&stru_1001C9078 copy];

  return v2;
}

- (id)_copyMatchBlockForTextAttribute:(int64_t)attribute searchType:(int64_t *)type
{
  if ((attribute - 70) <= 7)
  {
    *type = attribute - 68;
  }

  v6 = [&stru_1001C9098 copy];

  return v6;
}

- (id)_copyMatchBlockAnyElement
{
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10006E358;
  v5[3] = &unk_1001C8E40;
  v5[4] = self;
  v2 = objc_retainBlock(v5);
  v3 = [v2 copy];

  return v3;
}

- (id)_copyMatchBlockImage
{
  v2 = [&stru_1001C90B8 copy];

  return v2;
}

- (id)_copyMatchBlockVisitedLink
{
  v2 = [&stru_1001C90D8 copy];

  return v2;
}

- (id)_copyMatchBlockHeader
{
  v2 = [&stru_1001C90F8 copy];

  return v2;
}

- (id)_copyMatchBlockForHeadingLevel:(int64_t)level searchType:(int64_t *)type
{
  v8[0] = 0;
  v8[1] = v8;
  v8[2] = 0x2020000000;
  v8[3] = level;
  v7[0] = _NSConcreteStackBlock;
  v7[1] = 3221225472;
  v7[2] = sub_10006E8A8;
  v7[3] = &unk_1001C9120;
  v7[4] = v8;
  v7[5] = type;
  v4 = objc_retainBlock(v7);
  v5 = [v4 copy];

  _Block_object_dispose(v8, 8);

  return v5;
}

- (id)_copyMatchBlockNonVisitedLink
{
  v2 = [&stru_1001C9140 copy];

  return v2;
}

- (id)_copyMatchBlockLink
{
  v2 = [&stru_1001C9160 copy];

  return v2;
}

- (id)_copyMatchBlockStaticText
{
  v2 = +[NSCharacterSet alphanumericCharacterSet];
  invertedSet = [v2 invertedSet];

  v8[0] = _NSConcreteStackBlock;
  v8[1] = 3221225472;
  v8[2] = sub_10006EB1C;
  v8[3] = &unk_1001C8E40;
  v9 = invertedSet;
  v4 = invertedSet;
  v5 = objc_retainBlock(v8);
  v6 = [v5 copy];

  return v6;
}

- (id)_copyMatchBlockFormElement
{
  v2 = [&stru_1001C9180 copy];

  return v2;
}

- (id)_copyMatchBlockListStart
{
  v2 = [&stru_1001C91A0 copy];

  return v2;
}

- (id)_copyMatchBlockFrameStart
{
  v2 = [&stru_1001C91C0 copy];

  return v2;
}

- (id)_copyMatchBlockTableStart
{
  v2 = [&stru_1001C91E0 copy];

  return v2;
}

- (id)_copyMatchBlockArticleStart
{
  v2 = [&stru_1001C9200 copy];

  return v2;
}

- (id)_copyMatchBlockLandmarkStart
{
  v2 = [&stru_1001C9220 copy];

  return v2;
}

- (id)_copyMatchBlockInternalLink
{
  v2 = [&stru_1001C9240 copy];

  return v2;
}

- (id)_copyMatchBlockButton
{
  v2 = [&stru_1001C9260 copy];

  return v2;
}

- (unint64_t)filterTraitsByPriority:(unint64_t)priority
{
  result = kAXHeaderTrait;
  if ((kAXHeaderTrait & priority) == 0)
  {
    result = kAXPickerElementTrait;
    if ((kAXPickerElementTrait & priority) == 0)
    {
      if ((kAXWebContentTrait & priority) != 0)
      {
        v4 = kAXLinkTrait;
        if ((kAXLinkTrait & priority) != 0)
        {
          return v4 | kAXWebContentTrait;
        }

        v4 = kAXTextEntryTrait;
        if ((kAXTextEntryTrait & priority) != 0)
        {
          return v4 | kAXWebContentTrait;
        }

        v5 = kAXWebContentTrait;
      }

      else
      {
        v5 = 0;
      }

      v6 = kAXImageTrait;
      if ((kAXImageTrait & priority) != 0)
      {
        return v6 | v5;
      }

      v6 = kAXButtonTrait;
      if ((kAXButtonTrait & priority) != 0)
      {
        return v6 | v5;
      }

      v6 = kAXLinkTrait;
      if ((kAXLinkTrait & priority) != 0)
      {
        return v6 | v5;
      }

      else
      {
        v7 = kAXStaticTextTrait | v5;
        if ((kAXStaticTextTrait & priority) != 0)
        {
          return v7;
        }

        else
        {
          return kAXWebContentTrait;
        }
      }
    }
  }

  return result;
}

- (id)_copyMatchBlockSameBlockquote
{
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10006F37C;
  v5[3] = &unk_1001C8E40;
  v5[4] = self;
  v2 = objc_retainBlock(v5);
  v3 = objc_retainBlock(v2);

  return v3;
}

- (id)_copyMatchBlockSameHeading
{
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10006F484;
  v5[3] = &unk_1001C8E40;
  v5[4] = self;
  v2 = objc_retainBlock(v5);
  v3 = objc_retainBlock(v2);

  return v3;
}

- (id)_copyMatchBlockSimilar
{
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastSearchForElementsTime];
  if (Current - v4 > 1.5)
  {
    [(VOTElementManager *)self setCurrentSimilarTraits:[(VOTElementManager *)self filterTraitsByPriority:[(VOTElement *)self->_currentElement traits]]];
  }

  v8[0] = _NSConcreteStackBlock;
  v8[1] = 3221225472;
  v8[2] = sub_10006F628;
  v8[3] = &unk_1001C8E40;
  v8[4] = self;
  v5 = objc_retainBlock(v8);
  v6 = [v5 copy];

  return v6;
}

- (id)_copyMatchBlockDifferent
{
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastSearchForElementsTime];
  if (Current - v4 > 1.5)
  {
    [(VOTElementManager *)self setCurrentSimilarTraits:[(VOTElementManager *)self filterTraitsByPriority:[(VOTElement *)self->_currentElement traits]]];
  }

  v8[0] = _NSConcreteStackBlock;
  v8[1] = 3221225472;
  v8[2] = sub_10006F758;
  v8[3] = &unk_1001C8E40;
  v8[4] = self;
  v5 = objc_retainBlock(v8);
  v6 = [v5 copy];

  return v6;
}

- (id)_copyMatchBlockTextField
{
  v2 = [&stru_1001C92A0 copy];

  return v2;
}

- (id)_copyMatchBlockRadioGroup
{
  v2 = [&stru_1001C92C0 copy];

  return v2;
}

- (id)_copyMatchBlockCheckbox
{
  v2 = [&stru_1001C92E0 copy];

  return v2;
}

- (id)_copyMatchBlockSearchField
{
  v2 = [&stru_1001C9300 copy];

  return v2;
}

- (id)_copyMatchBlockForRotorType:(int64_t)type searchType:(int64_t *)searchType
{
  _copyMatchBlockHeader = 0;
  switch(type)
  {
    case 8:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockHeader];
      v7 = 1;
      goto LABEL_28;
    case 9:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockLink];
      v7 = 11;
      goto LABEL_28;
    case 10:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockFormElement];
      v7 = 13;
      goto LABEL_28;
    case 11:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockRadioGroup];
      v7 = 19;
      goto LABEL_28;
    case 12:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockTableStart];
      v7 = 22;
      goto LABEL_28;
    case 13:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockFrameStart];
      v7 = 27;
      goto LABEL_28;
    case 14:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockListStart];
      v7 = 23;
      goto LABEL_28;
    case 15:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockVisitedLink];
      v7 = 14;
      goto LABEL_28;
    case 16:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockNonVisitedLink];
      v7 = 15;
      goto LABEL_28;
    case 17:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockImage];
      v7 = 10;
      goto LABEL_28;
    case 18:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockStaticText];
      v7 = 16;
      goto LABEL_28;
    case 33:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockLandmarkStart];
      v7 = 24;
      goto LABEL_28;
    case 34:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockArticleStart];
      v7 = 12;
      goto LABEL_28;
    case 35:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockButton];
      v7 = 21;
      goto LABEL_28;
    case 36:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockTextField];
      v7 = 17;
      goto LABEL_28;
    case 40:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockSearchField];
      v7 = 18;
      goto LABEL_28;
    case 41:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockCheckbox];
      v7 = 20;
      goto LABEL_28;
    case 43:
      _copyMatchBlockSimilar = [(VOTElementManager *)self _copyMatchBlockSimilar];
      goto LABEL_4;
    case 44:
      _copyMatchBlockSimilar = [(VOTElementManager *)self _copyMatchBlockAnyElement];
      goto LABEL_4;
    case 45:
    case 46:
    case 47:
    case 48:
    case 49:
    case 50:
      _copyMatchBlockSimilar = [VOTElementManager _copyMatchBlockForHeadingLevel:"_copyMatchBlockForHeadingLevel:searchType:" searchType:?];
      goto LABEL_4;
    case 51:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockSameHeading];
      v7 = 26;
      goto LABEL_28;
    case 52:
      _copyMatchBlockSimilar = [(VOTElementManager *)self _copyMatchBlockDifferent];
      goto LABEL_4;
    case 70:
    case 71:
    case 72:
    case 73:
    case 74:
    case 75:
    case 76:
    case 77:
      _copyMatchBlockSimilar = [VOTElementManager _copyMatchBlockForTextAttribute:"_copyMatchBlockForTextAttribute:searchType:" searchType:?];
LABEL_4:
      _copyMatchBlockHeader = _copyMatchBlockSimilar;
      break;
    case 78:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockBlockquote];
      v7 = 25;
      goto LABEL_28;
    case 79:
      _copyMatchBlockHeader = [(VOTElementManager *)self _copyMatchBlockSameBlockquote];
      v7 = 28;
LABEL_28:
      *searchType = v7;
      break;
    default:
      break;
  }

  v8 = objc_retainBlock(_copyMatchBlockHeader);

  return v8;
}

- (void)_customPublicRotorMatchForType:(id)type range:(_NSRange *)range element:(id *)element direction:(int64_t)direction lastSearchUUID:(id *)d
{
  v12 = [*element customPublicRotorForSystemType:type];
  v13 = v12;
  if (!v12)
  {
    goto LABEL_4;
  }

  if (d)
  {
    if ([v12 isEqual:*d])
    {
LABEL_4:
      *range = xmmword_10017E110;
      *element = 0;
      goto LABEL_15;
    }

    v14 = v13;
    *d = v13;
  }

  direction = [VOTElement customPublicRotorDictionaryForRotorId:v13 startRange:range->location direction:range->length, direction];
  v16 = [*element customPublicRotorResultWithItem:direction startElement:*element];
  v17 = v16;
  if (v16)
  {
    if (self->_inUnitTestingMode)
    {
      v18 = [v16 objectForKeyedSubscript:@"targetElement"];
    }

    else
    {
      v19 = [v16 objectForKeyedSubscript:@"targetElement"];
      v20 = [AXUIElement uiElementWithAXElement:v19];
      v18 = [VOTElement elementWithUIElement:v20];
    }

    v21 = [v17 objectForKeyedSubscript:{@"targetRange", 0x7FFFFFFFLL, 0}];

    if (v21)
    {
      v22 = [v17 objectForKeyedSubscript:@"targetRange"];
      AXValueGetValue(v22, kAXValueTypeCFRange, &v24);
    }

    *range = v24;
    v23 = v18;
    *element = v18;
  }

  else
  {
    *range = xmmword_10017E110;
    *element = 0;
  }

LABEL_15:
}

- (id)_copyRangeMatchBlockForRotorType:(int64_t)type
{
  v4 = [VOTRotor systemRotorTypeForRotorType:type];
  v5 = v4;
  if (v4)
  {
    v9 = _NSConcreteStackBlock;
    v10 = 3221225472;
    v11 = sub_10006FFBC;
    v12 = &unk_1001C9328;
    selfCopy = self;
    v14 = v4;
    v6 = objc_retainBlock(&v9);
    v7 = [v6 copy];
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (void)_handleElementSearch:(id)search rotorType:(int64_t)type direction:(int64_t)direction
{
  v15 = 0;
  v8 = [(VOTElementManager *)self _copyMatchBlockForRotorType:type searchType:&v15];
  if (v8)
  {
    v9 = [(VOTElementManager *)self _copyRangeMatchBlockForRotorType:type];
    self->_flags.performedSearch = 1;
    fetchManager = self->_fetchManager;
    _currentElement = [(VOTElementManager *)self _currentElement];
    v12 = v15;
    elementSearchGeneration = self->_elementSearchGeneration;
    LOBYTE(v14) = [VOTSharedWorkspace navigationStyleHonorsGroups];
    [(VOTElementFetcher *)fetchManager searchForElementInDirection:direction fromElement:_currentElement matchBlock:v8 rangeMatch:v9 searchType:v12 generation:elementSearchGeneration startingRange:self->_highlightedCharacterRange.location groupNavigationStyle:self->_highlightedCharacterRange.length, v14];

    [(VOTElementManager *)self setLastSearchForElementsTime:CFAbsoluteTimeGetCurrent()];
  }
}

- (void)_handleSearchRotorMovement:(BOOL)movement event:(id)event
{
  movementCopy = movement;
  eventCopy = event;
  if (self->_flags.shouldUpdateRotorForElement)
  {
    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }

  [(VOTElementManager *)self _handleSearchRotorMovementWithoutRotorUpdateInDirectionUp:movementCopy event:eventCopy];
  [(VOTElementManager *)self setLastElementChangeAction:1];
}

- (void)_handleColumnMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  v5 = [command isEqualToString:kVOTEventCommandNextColumn];

  if ([(VOTElement *)self->_currentElement containedIn:2]&& ((v6 = [(VOTElement *)self->_currentElement columnRange], v8 = v7, v9 = [(VOTElement *)self->_currentElement columnCount], !v5) ? (v10 = -1) : (v10 = v8), (v11 = &v6[v10], &v6[v10] >= 0) && v11 < v9 && ([(VOTElement *)self->_currentElement elementAtRow:[(VOTElement *)self->_currentElement rowRange] andColumn:v11], (v12 = objc_claimAutoreleasedReturnValue()) != 0)))
  {
    v13 = v12;
    [(VOTElementManager *)self _echoDifferentElement:v12 forEvent:movementCopy];
  }

  else
  {
    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];
  }
}

- (void)_handleDirectElementSearch:(id)search
{
  searchCopy = search;
  if (qword_1001FECB0 != -1)
  {
    sub_10012AB64();
  }

  v5 = qword_1001FECA8;
  command = [searchCopy command];
  v7 = [v5 objectForKeyedSubscript:command];

  if (v7)
  {
    v8 = 0;
    v9 = 0;
    (v7)[2](v7, &v9, &v8);
    [(VOTElementManager *)self _handleElementSearch:searchCopy rotorType:v9 direction:v8];
  }
}

- (void)_handleSearchRotorMovementWithoutRotorUpdateInDirectionUp:(BOOL)up event:(id)event
{
  upCopy = up;
  eventCopy = event;
  lastSeenApplicationOrientation = self->_lastSeenApplicationOrientation;
  if (lastSeenApplicationOrientation != [VOTSharedWorkspace applicationOrientation])
  {
    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }

  if (upCopy)
  {
    v7 = 2;
  }

  else
  {
    v7 = 1;
  }

  currentRotorType = [(VOTRotor *)self->_elementRotor currentRotorType];
  switch(currentRotorType)
  {
    case 1:
      [(VOTElementManager *)self _handleAdjustValue:eventCopy reverse:upCopy ^ 1];
      break;
    case 2:
      [(VOTElementManager *)self _handleNextAutofill:eventCopy reverse:upCopy];
      break;
    case 3:
      [(VOTElementManager *)self _handleLetterMovement:eventCopy direction:v7];
      break;
    case 4:
      [(VOTElementManager *)self _handleWordMovement:eventCopy direction:v7];
      break;
    case 5:
      [(VOTElementManager *)self _handleGenericTextSegmentMovement:eventCopy direction:v7 granulary:3];
      break;
    case 6:
      [(VOTElementManager *)self _handleRotorTextSelectionMovement:eventCopy direction:v7];
      break;
    case 7:
      [(VOTElementManager *)self _handleVerticalMovement:eventCopy direction:v7];
      break;
    case 8:
    case 9:
    case 10:
    case 11:
    case 12:
    case 13:
    case 14:
    case 15:
    case 16:
    case 17:
    case 18:
    case 33:
    case 34:
    case 35:
    case 36:
    case 40:
    case 41:
    case 43:
    case 44:
    case 51:
    case 52:
    case 70:
    case 78:
    case 79:
      [(VOTElementManager *)self _handleElementSearch:eventCopy rotorType:currentRotorType direction:v7];
      break;
    case 19:
      [(VOTElementManager *)self _handleNextTextOperationInDirection:v7 withEvent:eventCopy];
      break;
    case 20:
      if (upCopy)
      {
        v11 = 4;
      }

      else
      {
        v11 = 3;
      }

      [(VOTElementManager *)self _handleZoomMovement:v11 event:eventCopy];
      break;
    case 21:
      [(VOTElementManager *)self _handleRotorTypingModeMovement:v7 withEvent:eventCopy];
      break;
    case 22:
      [(VOTElementManager *)self _handleRotorContinusPathChange:v7 withEvent:eventCopy];
      break;
    case 23:
      [(VOTElementManager *)self _handleRotorVoiceMovement:v7 withEvent:eventCopy];
      break;
    case 24:
      [(VOTElementManager *)self _handleRotorBrailleLanguageMovement:v7 withEvent:eventCopy];
      break;
    case 25:
      [(VOTElementManager *)self _handleRotorBrailleInputLanguageMovement:v7 withEvent:eventCopy];
      break;
    case 26:
      [(VOTElementManager *)self _handleRotorBrailleAutoAdvanceMovement:v7 withEvent:eventCopy];
      break;
    case 27:
      [(VOTElementManager *)self _handleRotor2DBrailleZoom:v7 withEvent:eventCopy];
      break;
    case 28:
      [(VOTElementManager *)self _handleRotor2DBraillePanHorizontal:v7 withEvent:eventCopy];
      break;
    case 29:
      [(VOTElementManager *)self _handleRotor2DBraillePanVertical:v7 withEvent:eventCopy];
      break;
    case 30:
      [(VOTElementManager *)self _handleRotor2DBrailleInvert:v7 withEvent:eventCopy];
      break;
    case 31:
      [(VOTElementManager *)self _handleRotor2DBrailleEdgeIntensity:v7 withEvent:eventCopy];
      break;
    case 32:
      [(VOTElementManager *)self _handleRotor2DBrailleDisplayMode:v7 withEvent:eventCopy];
      break;
    case 37:
      [(VOTElementManager *)self _handleRowMovement:eventCopy direction:v7];
      break;
    case 38:
      [(VOTElementManager *)self _handleContainerMovement:eventCopy direction:v7];
      break;
    case 39:
      [(VOTElementManager *)self _handleWebSearchResult:v7 withEvent:eventCopy];
      break;
    case 42:
      [(VOTElementManager *)self _handleDirectTouchExplorationMode:eventCopy direction:v7];
      break;
    case 53:
      [(VOTElementManager *)self _handlePublicCustomRotorMovement:eventCopy direction:v7];
      break;
    case 54:
      [(VOTElementManager *)self _handleCustomRotorAction:eventCopy direction:v7];
      break;
    case 55:
    case 56:
    case 57:
    case 58:
      [(VOTElementManager *)self _handleMathGranularMovement:v7 event:eventCopy];
      break;
    case 59:
      [(VOTElementManager *)self _handleHintsSettingMode:eventCopy direction:v7];
      break;
    case 62:
      [(VOTElementManager *)self _handleTrackingDetailMovement:upCopy event:eventCopy];
      break;
    case 63:
      [(VOTElementManager *)self _handleDescribedMediaMode:eventCopy direction:v7];
      break;
    case 65:
      [(VOTElementManager *)self _handleAudiographAction:v7 event:eventCopy];
      break;
    case 66:
      [(VOTElementManager *)self _handleMLElementModeWithDirection:v7 verboseOutput:0];
      break;
    case 67:
      [(VOTElementManager *)self _handleImageDescriptionsToggle:v7];
      break;
    case 68:
      [(VOTElementManager *)self _handleNavigationStyleMovement:eventCopy direction:v7];
      break;
    case 80:
      if (upCopy)
      {
        [(VOTElementManager *)self _handleIncreaseVolume:eventCopy];
      }

      else
      {
        [(VOTElementManager *)self _handleDecreaseVolume:eventCopy];
      }

      break;
    case 81:
      [(VOTElementManager *)self _handleSpeechRateChange:upCopy];
      break;
    case 85:
      [(VOTElementManager *)self _handleSpeechPunctuationChange:upCopy];
      break;
    case 86:
      [(VOTElementManager *)self _handleSoundRotorChange:upCopy];
      break;
    case 87:
      v9 = AXRuntimeCheck_SupportsVoiceoverIndepedentVolume();
      v10 = upCopy ^ 1;
      if (v9)
      {
        [(VOTElementManager *)self _handleAudioDuckingModeChange:v10];
      }

      else
      {
        [(VOTElementManager *)self _handleAudioDuckingChange:v10];
      }

      break;
    case 88:
      if (AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
      {
        [(VOTElementManager *)self _handleAudioDuckingAmountChange:upCopy ^ 1];
      }

      break;
    case 89:
      [(VOTElementManager *)self _handleAudioDestination:upCopy ^ 1];
      break;
    case 90:
      [(VOTElementManager *)self _handleNavigationDirectionChangeWithDirection:v7];
      break;
    case 91:
      [(VOTElementManager *)self _handleActivityRotorChange:upCopy ^ 1];
      break;
    case 92:
      [(VOTElementManager *)self _handleCustomRotorContent:eventCopy direction:v7];
      break;
    case 93:
      [(VOTElementManager *)self _handleDetectionModeMovement:eventCopy direction:v7];
      break;
    case 94:
      [(VOTElementManager *)self _handleScribbleMovement:upCopy];
      break;
    case 95:
      [(VOTElementManager *)self _handleToggleLiveRegions:v7];
      break;
    case 96:
      [(VOTElementManager *)self _handleCopiedSpeechRotorMovement:v7];
      break;
    default:
      v12 = [NSNumber numberWithInteger:currentRotorType];
      _AXLogWithFacility();

      break;
  }

  if (sub_1000F80D4(currentRotorType))
  {
    self->_flags.performedRotorTextNavigation = 1;
  }

  self->_lastPressOnMediaSessionElement = -3061152000.0;
}

- (void)_handleSingleLetterSearch:(id)search
{
  searchCopy = search;
  v4 = +[VOTKeyboardManager keyboardManager];
  keyInfo = [searchCopy keyInfo];
  v6 = [v4 singleLetterCommandForKeyInfo:keyInfo];

  if (v6)
  {
    if (qword_1001FECC0 != -1)
    {
      sub_10012AB78();
    }

    v7 = [qword_1001FECB8 objectForKey:v6];
    v8 = v7;
    if (v7)
    {
      v9 = [v7 objectAtIndexedSubscript:0];
      intValue = [v9 intValue];

      v11 = [v8 objectAtIndexedSubscript:1];
      intValue2 = [v11 intValue];

      [(VOTElementManager *)self _handleElementSearch:searchCopy rotorType:intValue2 direction:intValue];
      goto LABEL_9;
    }

    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];
  }

  else
  {
    v8 = +[VOTOutputManager outputManager];
    v13 = +[VOSOutputEvent BoundaryEncountered];
    [v8 sendEvent:v13];
  }

LABEL_9:
}

- (void)_handleSpeakScreen:(id)screen
{
  v4 = +[VOTOutputManager outputManager];
  [v4 stopSpeakingAtBoundary:0];

  _currentElement = [(VOTElementManager *)self _currentElement];
  if (_currentElement)
  {
    v5 = +[VOTElement systemWideElement];
    [_currentElement frame];
    [v5 convertRect:objc_msgSend(_currentElement fromContextId:{"windowContextId"), v6, v7, v8, v9}];
    v11 = v10;
    v13 = v12;
    v15 = v14;
    v17 = v16;

    v23.origin.x = v11;
    v23.origin.y = v13;
    v23.size.width = v15;
    v23.size.height = v17;
    MidX = CGRectGetMidX(v23);
    v24.origin.x = v11;
    v24.origin.y = v13;
    v24.size.width = v15;
    v24.size.height = v17;
    MidY = CGRectGetMidY(v24);
    sharedInstance = [sub_100071640() sharedInstance];
    [sharedInstance speakThisWithOptions:12 useAppAtPoint:&stru_1001C99A8 errorHandler:{MidX, MidY}];
  }

  else
  {
    sharedInstance = [sub_100071640() sharedInstance];
    [sharedInstance speakThisWithOptions:12 errorHandler:&stru_1001C99C8];
  }
}

- (void)_resetOtherTapInputModes
{
  *&self->_flags.tapShouldHandleAutofill = 0;
  [(_VOTTextMarkerRange *)self->_textMarkerRange setEndMarker:0];
  [(_VOTTextMarkerRange *)self->_textMarkerRange setStartMarker:0];
  autofillCurrentElement = self->_autofillCurrentElement;
  self->_autofillCurrentElement = 0;

  textMarker = self->_textMarker;
  self->_textMarker = 0;
}

- (void)_handleRotorVoiceMovement:(int64_t)movement withEvent:(id)event
{
  eventCopy = event;
  [VOTSharedWorkspace setPreviousRotorVoiceIdentifier:0];
  v7 = +[AXSettings sharedInstance];
  voiceOverVoiceRotors = [v7 voiceOverVoiceRotors];

  v9 = +[AXSettings sharedInstance];
  voiceOverCurrentRotorVoiceIdentifier = [v9 voiceOverCurrentRotorVoiceIdentifier];

  if (voiceOverCurrentRotorVoiceIdentifier && ([voiceOverCurrentRotorVoiceIdentifier isEqualToString:&stru_1001CBF90] & 1) == 0)
  {
    v54[0] = _NSConcreteStackBlock;
    v54[1] = 3221225472;
    v54[2] = sub_100071DFC;
    v54[3] = &unk_1001C9008;
    v55 = voiceOverCurrentRotorVoiceIdentifier;
    v12 = [voiceOverVoiceRotors indexOfObjectPassingTest:v54];
    if (movement == 1)
    {
      v13 = v12 + 1;
    }

    else
    {
      v13 = v12;
    }

    if (movement == 2)
    {
      v11 = (v12 - 1);
    }

    else
    {
      v11 = v13;
    }
  }

  else if (movement == 2)
  {
    v11 = [voiceOverVoiceRotors count] - 1;
  }

  else
  {
    v11 = 0;
  }

  v14 = +[TTSAXResourceManager sharedInstance];
  v15 = [voiceOverVoiceRotors count];
  v46 = v14;
  if ((v11 & 0x8000000000000000) != 0 || v11 >= v15)
  {
    v30 = +[AXSettings sharedInstance];
    [v30 setVoiceOverCurrentRotorVoiceIdentifier:0];

    selectedActivity = [VOTSharedWorkspace selectedActivity];
    voiceIdentifier = [selectedActivity voiceIdentifier];

    if (voiceIdentifier)
    {
      voiceIdentifier2 = [selectedActivity voiceIdentifier];
      v34 = [v14 speechVoiceWithVoiceId:voiceIdentifier2];

      localizedNameWithFootprint = [v34 localizedNameWithFootprint];
      v35 = sub_1000511CC(off_1001FDDD0, @"default.voices.activity.format", 0);
      name = [selectedActivity name];
      userDefinedName2 = [NSString stringWithFormat:v35, localizedNameWithFootprint, name];
    }

    else
    {
      votSettings = [VOTSharedWorkspace votSettings];
      systemVoiceSelection = [votSettings systemVoiceSelection];
      voiceId = [systemVoiceSelection voiceId];
      v34 = [v14 speechVoiceWithVoiceId:voiceId];

      localizedNameWithFootprint = [v34 localizedNameWithFootprint];
      v35 = sub_1000511CC(off_1001FDDD0, @"default.voices.format", 0);
      userDefinedName2 = [NSString stringWithFormat:v35, localizedNameWithFootprint];
    }

LABEL_28:
    v43 = +[VOTOutputManager outputManager];
    [v43 speakSimpleString:userDefinedName2];

    goto LABEL_29;
  }

  selfCopy = self;
  v45 = eventCopy;
  v16 = [voiceOverVoiceRotors objectAtIndexedSubscript:v11];
  identifier = [v16 identifier];
  v18 = +[AXSettings sharedInstance];
  [v18 setVoiceOverCurrentRotorVoiceIdentifier:identifier];

  v19 = [voiceOverVoiceRotors objectAtIndexedSubscript:v11];
  voiceId2 = [v19 voiceId];
  v21 = [v14 speechVoiceWithVoiceId:voiceId2];

  language = [v21 language];
  localizedNameWithFootprint = [v21 nameAndFootprintForLanguage:language];

  v50 = 0;
  v51 = &v50;
  v52 = 0x2020000000;
  v53 = 0;
  v24 = dispatch_semaphore_create(0);
  votSettings2 = [VOTSharedWorkspace votSettings];
  voiceId3 = [v21 voiceId];
  v47[0] = _NSConcreteStackBlock;
  v47[1] = 3221225472;
  v47[2] = sub_100071E40;
  v47[3] = &unk_1001C99F0;
  v49 = &v50;
  v27 = v24;
  v48 = v27;
  [votSettings2 voiceHasSuperCompactCounterpart:voiceId3 completionHandler:v47];

  dispatch_semaphore_wait(v27, 0xFFFFFFFFFFFFFFFFLL);
  if (localizedNameWithFootprint && (([v21 isInstalled] & 1) != 0 || *(v51 + 24) != 1))
  {
    v37 = [voiceOverVoiceRotors objectAtIndexedSubscript:v11];
    userDefinedName = [v37 userDefinedName];
    if (userDefinedName)
    {
      v39 = [voiceOverVoiceRotors objectAtIndexedSubscript:v11];
      userDefinedName2 = [v39 userDefinedName];
    }

    else
    {
      userDefinedName2 = localizedNameWithFootprint;
    }

    v29 = 1;
  }

  else
  {
    [(VOTElementManager *)selfCopy _handleRotorVoiceMovement:movement withEvent:v45];
    userDefinedName2 = 0;
    v29 = 0;
  }

  _Block_object_dispose(&v50, 8);
  eventCopy = v45;
  if (v29)
  {
    goto LABEL_28;
  }

LABEL_29:
}

- (void)_handleRotorBrailleLanguageMovement:(int64_t)movement withEvent:(id)event
{
  v11 = 0;
  v5 = [VOTBrailleManager manager:movement];
  v6 = [v5 adjustBrailleLanguageRotorInDirection:movement isDefault:&v11];

  v7 = VOTLogBraille();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
  {
    selectedBrailleTable = [VOTSharedWorkspace selectedBrailleTable];
    *buf = 138412546;
    v13 = v6;
    v14 = 2112;
    v15 = selectedBrailleTable;
    _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "Did set braille table. %@ (settings: %@)", buf, 0x16u);
  }

  v9 = +[VOTBrailleManager manager];
  [v9 announceBrailleTable:v6 isDefault:v11];

  v10 = +[NSNotificationCenter defaultCenter];
  [v10 postNotificationName:off_1001FDB28 object:0];
}

- (void)_handleRotorBrailleInputLanguageMovement:(int64_t)movement withEvent:(id)event
{
  v11 = 0;
  v5 = [VOTBrailleManager manager:movement];
  v6 = [v5 adjustBrailleInputLanguageRotorInDirection:movement isDefault:&v11];

  v7 = VOTLogBraille();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
  {
    selectedBrailleInputTable = [VOTSharedWorkspace selectedBrailleInputTable];
    *buf = 138412546;
    v13 = v6;
    v14 = 2112;
    v15 = selectedBrailleInputTable;
    _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "Did set braille input table. %@ (settings: %@)", buf, 0x16u);
  }

  v9 = +[VOTBrailleManager manager];
  [v9 announceBrailleTable:v6 isDefault:v11];

  v10 = +[NSNotificationCenter defaultCenter];
  [v10 postNotificationName:off_1001FDB28 object:0];
}

- (void)_handleRotorBrailleAutoAdvanceMovement:(int64_t)movement withEvent:(id)event
{
  if (movement == 1)
  {
    [(VOTElementManager *)self _handleBrailleIncreaseAutoAdvanceSpeed:event];
  }

  else
  {
    [(VOTElementManager *)self _handleBrailleDecreaseAutoAdvanceSpeed:event];
  }
}

- (double)_brailleMaxOrigin
{
  v2 = +[VOTPlanarBrailleManager manager];
  [v2 imageZoom];
  v4 = v3 + -1.0;

  v5 = +[VOTPlanarBrailleManager manager];
  [v5 imageZoom];
  v7 = v4 / v6;

  return v7;
}

- (void)_forceVisionRefresh
{
  if ([VOTVisionEngine shouldAnalyzeElement:self->_currentElement])
  {
    v3 = +[VOTWorkspace sharedWorkspace];
    visionEngine = [v3 visionEngine];

    v4 = objc_opt_new();
    [v4 setIncludeFullImageDescriptionsForValidElements:{-[VOTElementManager determineFullImageDescriptionsEnabled:](self, "determineFullImageDescriptionsEnabled:", self->_currentElement)}];
    [v4 setIncludeSceneDetection:{-[VOTElementManager determineSceneDetectionsEnabled:](self, "determineSceneDetectionsEnabled:", self->_currentElement)}];
    [visionEngine analyzeElement:self->_currentElement withOptions:v4];
  }
}

- (void)_handleRotor2DBrailleZoom:(int64_t)zoom withEvent:(id)event
{
  v29 = 0u;
  v30 = 0u;
  v31 = 0u;
  v32 = 0u;
  v6 = [&off_1001DBA80 countByEnumeratingWithState:&v29 objects:v33 count:16];
  if (!v6)
  {
    if (zoom != 1)
    {
      goto LABEL_18;
    }

    v8 = 0;
    goto LABEL_15;
  }

  v7 = v6;
  v8 = 0;
  v9 = *v30;
  do
  {
    for (i = 0; i != v7; i = i + 1)
    {
      if (*v30 != v9)
      {
        objc_enumerationMutation(&off_1001DBA80);
      }

      v11 = *(*(&v29 + 1) + 8 * i);
      v12 = +[VOTPlanarBrailleManager manager];
      [v12 imageZoom];
      v14 = v13;
      [v11 doubleValue];
      v16 = v15;

      if (v14 >= v16)
      {
        ++v8;
      }
    }

    v7 = [&off_1001DBA80 countByEnumeratingWithState:&v29 objects:v33 count:16];
  }

  while (v7);
  if (zoom == 1)
  {
LABEL_15:
    if ([&off_1001DBA80 count] > v8)
    {
      v17 = v8;
      goto LABEL_17;
    }

LABEL_18:
    v18 = +[VOTOutputManager outputManager];
    v21 = +[VOSOutputEvent BoundaryEncountered];
    [v18 sendEvent:v21];
    goto LABEL_19;
  }

  if (v8 <= 1)
  {
    goto LABEL_18;
  }

  v17 = v8 - 2;
LABEL_17:
  v18 = [&off_1001DBA80 objectAtIndexedSubscript:v17];
  [v18 doubleValue];
  v20 = v19;
  v21 = +[VOTPlanarBrailleManager manager];
  [v21 setImageZoom:v20];
LABEL_19:

  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v23 = sub_1000511CC(off_1001FDDD0, @"braille.zoom.level", 0);
  v24 = +[VOTPlanarBrailleManager manager];
  [v24 imageZoom];
  v26 = [NSString localizedStringWithFormat:v23, v25];
  v27 = [v22 addString:v26];

  [(VOTElementManager *)self sendRequest:v22];
  v28 = +[VOTPlanarBrailleManager manager];
  [v28 refreshPlanarBraille];
}

- (void)_handleRotor2DBrailleEdgeIntensity:(int64_t)intensity withEvent:(id)event
{
  v29 = 0u;
  v30 = 0u;
  v31 = 0u;
  v32 = 0u;
  v6 = [&off_1001DBA98 countByEnumeratingWithState:&v29 objects:v33 count:16];
  if (!v6)
  {
    if (intensity != 1)
    {
      goto LABEL_18;
    }

    v8 = 0;
    goto LABEL_15;
  }

  v7 = v6;
  v8 = 0;
  v9 = *v30;
  do
  {
    for (i = 0; i != v7; i = i + 1)
    {
      if (*v30 != v9)
      {
        objc_enumerationMutation(&off_1001DBA98);
      }

      v11 = *(*(&v29 + 1) + 8 * i);
      v12 = +[VOTPlanarBrailleManager manager];
      [v12 imageIntensity];
      v14 = v13;
      [v11 doubleValue];
      v16 = v15;

      if (v14 >= v16)
      {
        ++v8;
      }
    }

    v7 = [&off_1001DBA98 countByEnumeratingWithState:&v29 objects:v33 count:16];
  }

  while (v7);
  if (intensity == 1)
  {
LABEL_15:
    if ([&off_1001DBA98 count] > v8)
    {
      v17 = v8;
      goto LABEL_17;
    }

LABEL_18:
    v18 = +[VOTOutputManager outputManager];
    v21 = +[VOSOutputEvent BoundaryEncountered];
    [v18 sendEvent:v21];
    goto LABEL_19;
  }

  if (v8 <= 1)
  {
    goto LABEL_18;
  }

  v17 = v8 - 2;
LABEL_17:
  v18 = [&off_1001DBA98 objectAtIndexedSubscript:v17];
  [v18 doubleValue];
  v20 = v19;
  v21 = +[VOTPlanarBrailleManager manager];
  [v21 setImageIntensity:v20];
LABEL_19:

  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v23 = sub_1000511CC(off_1001FDDD0, @"braille.thickness.level", 0);
  v24 = +[VOTPlanarBrailleManager manager];
  [v24 imageIntensity];
  v26 = [NSString localizedStringWithFormat:v23, v25];
  v27 = [v22 addString:v26];

  [(VOTElementManager *)self sendRequest:v22];
  v28 = +[VOTPlanarBrailleManager manager];
  [v28 refreshPlanarBraille];
}

- (void)_handleRotor2DBraillePanHorizontal:(int64_t)horizontal withEvent:(id)event
{
  [(VOTElementManager *)self _brailleMaxOrigin:horizontal];
  v7 = v6;
  v8 = +[VOTPlanarBrailleManager manager];
  [v8 imageZoom];
  v10 = 1.0 / v9 * 0.5;

  v11 = +[VOTPlanarBrailleManager manager];
  [v11 imageOrigin];
  v13 = v12;
  v15 = v14;

  if (horizontal == 1)
  {
    if (v13 < v7)
    {
      v13 = v10 + v13;
      if (v13 > v7)
      {
        v13 = v7;
      }

      goto LABEL_9;
    }

LABEL_8:
    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];

    goto LABEL_9;
  }

  if (v13 <= 0.0)
  {
    goto LABEL_8;
  }

  v13 = v13 - v10;
  if (v13 < 0.0)
  {
    v13 = 0.0;
  }

LABEL_9:
  v18 = +[VOTPlanarBrailleManager manager];
  [v18 setImageOrigin:{v13, v15}];

  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v19 = AXFormatFloatWithPercentage();
  v20 = [v22 addString:v19];

  [(VOTElementManager *)self sendRequest:v22];
  v21 = +[VOTPlanarBrailleManager manager];
  [v21 refreshPlanarBraille];
}

- (void)_handleRotor2DBraillePanVertical:(int64_t)vertical withEvent:(id)event
{
  [(VOTElementManager *)self _brailleMaxOrigin:vertical];
  v7 = v6;
  v8 = +[VOTPlanarBrailleManager manager];
  [v8 imageZoom];
  v10 = 1.0 / v9 * 0.5;

  v11 = +[VOTPlanarBrailleManager manager];
  [v11 imageOrigin];
  v13 = v12;
  v15 = v14;

  if (vertical == 1)
  {
    if (v15 < v7)
    {
      v15 = v10 + v15;
      if (v15 > v7)
      {
        v15 = v7;
      }

      goto LABEL_9;
    }

LABEL_8:
    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];

    goto LABEL_9;
  }

  if (v15 <= 0.0)
  {
    goto LABEL_8;
  }

  v15 = v15 - v10;
  if (v15 < 0.0)
  {
    v15 = 0.0;
  }

LABEL_9:
  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v18 = AXFormatFloatWithPercentage();
  v19 = [v22 addString:v18];

  [(VOTElementManager *)self sendRequest:v22];
  v20 = +[VOTPlanarBrailleManager manager];
  [v20 setImageOrigin:{v13, v15}];

  v21 = +[VOTPlanarBrailleManager manager];
  [v21 refreshPlanarBraille];
}

- (void)_handleRotor2DBrailleInvert:(int64_t)invert withEvent:(id)event
{
  v5 = [VOTPlanarBrailleManager manager:invert];
  imageInvert = [v5 imageInvert];
  v7 = +[VOTPlanarBrailleManager manager];
  [v7 setImageInvert:imageInvert ^ 1];

  v14 = [objc_allocWithZone(VOTOutputRequest) init];
  v8 = off_1001FDDD0;
  v9 = +[VOTPlanarBrailleManager manager];
  if ([v9 imageInvert])
  {
    v10 = @"braille.image.inverted";
  }

  else
  {
    v10 = @"braille.image.uninverted";
  }

  v11 = sub_1000511CC(v8, v10, 0);
  v12 = [v14 addString:v11];

  [(VOTElementManager *)self sendRequest:v14];
  v13 = +[VOTPlanarBrailleManager manager];
  [v13 refreshPlanarBraille];
}

- (id)_localizedStringForCurrentBrailleTextMode
{
  v2 = +[VOTPlanarBrailleManager manager];
  mode = [v2 mode];

  if ((mode - 1) > 2)
  {
    v4 = @"braille.text.mode.images";
  }

  else
  {
    v4 = *(&off_1001CA418 + (mode - 1));
  }

  v5 = off_1001FDDD0;

  return sub_1000511CC(v5, v4, 0);
}

- (void)_handleRotor2DBrailleDisplayMode:(int64_t)mode withEvent:(id)event
{
  v6 = [VOTPlanarBrailleManager manager:mode];
  mode = [v6 mode];

  v8 = mode - 1;
  if (mode < 1)
  {
    v8 = 3;
  }

  if (mode <= 2)
  {
    v9 = mode + 1;
  }

  else
  {
    v9 = 0;
  }

  if (mode != 1)
  {
    v9 = mode;
  }

  if (mode == 2)
  {
    v10 = v8;
  }

  else
  {
    v10 = v9;
  }

  v11 = +[VOTPlanarBrailleManager manager];
  [v11 setMode:v10];

  v12 = +[VOTPlanarBrailleManager manager];
  [v12 avoidImageModeWithDirection:mode];

  v16 = [objc_allocWithZone(VOTOutputRequest) init];
  _localizedStringForCurrentBrailleTextMode = [(VOTElementManager *)self _localizedStringForCurrentBrailleTextMode];
  v14 = [v16 addString:_localizedStringForCurrentBrailleTextMode];

  [(VOTElementManager *)self sendRequest:v16];
  v15 = +[VOTBrailleManager manager];
  [v15 setBrailleElement:self->_currentElement];
}

- (int64_t)_adjustedRotorIndex:(int64_t)index inDirection:(int64_t)direction rotorItems:(id)items validationBlock:(id)block
{
  itemsCopy = items;
  blockCopy = block;
  if ([itemsCopy count])
  {
    if (direction == 2)
    {
      v11 = -1;
    }

    else
    {
      v11 = 1;
    }

    indexCopy2 = index;
    do
    {
      v13 = indexCopy2 + v11;
      v14 = [itemsCopy count];
      if (v13 >= v14)
      {
        v15 = 0;
      }

      else
      {
        v15 = v13;
      }

      if (v13 >= 0)
      {
        indexCopy2 = v15;
      }

      else
      {
        indexCopy2 = v14 - 1;
      }

      if (indexCopy2 == index || blockCopy == 0)
      {
        break;
      }

      v17 = [itemsCopy objectAtIndexedSubscript:indexCopy2];
      v18 = blockCopy[2](blockCopy, v17);
    }

    while (!v18);
  }

  else
  {
    indexCopy2 = index;
  }

  return indexCopy2;
}

- (void)_handleRotorContinusPathChange:(int64_t)change withEvent:(id)event
{
  v4 = [VOSSettingsHelper sharedInstance:change];
  isSlideToTypeEnabled = [v4 isSlideToTypeEnabled];

  v6 = +[VOSSettingsHelper sharedInstance];
  [v6 setSlideToTypeEnabled:isSlideToTypeEnabled ^ 1];

  v9 = +[VOTOutputManager outputManager];
  if (isSlideToTypeEnabled)
  {
    v7 = @"SlideToTypeOff";
  }

  else
  {
    v7 = @"SlideToTypeOn";
  }

  v8 = sub_1000511CC(off_1001FDDD0, v7, 0);
  [v9 speakSimpleString:v8];
}

- (void)_handleRotorTypingModeMovement:(int64_t)movement withEvent:(id)event
{
  typingMode = [VOTSharedWorkspace typingMode];
  v7 = movement != 1;
  v8 = 1;
  if (movement != 1)
  {
    v8 = 2;
  }

  if (typingMode != 2)
  {
    v7 = v8;
  }

  if (typingMode == 1)
  {
    v9 = 2 * (movement == 1);
  }

  else
  {
    v9 = v7;
  }

  [VOTSharedWorkspace setTypingMode:v9];
  _localizedTypingModeStringForCurrentMode = [(VOTElementManager *)self _localizedTypingModeStringForCurrentMode];
  if (_localizedTypingModeStringForCurrentMode)
  {
    v12 = _localizedTypingModeStringForCurrentMode;
    v11 = +[VOTOutputManager outputManager];
    [v11 speakSimpleString:v12];

    _localizedTypingModeStringForCurrentMode = v12;
  }
}

- (id)_localizedTypingModeStringForCurrentMode
{
  typingMode = [VOTSharedWorkspace typingMode];
  if (typingMode > 2)
  {
    v3 = 0;
  }

  else
  {
    v3 = sub_1000511CC(off_1001FDDD0, *(&off_1001CA430 + typingMode), 0);
  }

  return v3;
}

- (id)_fontDisplayNameForFontName:(id)name
{
  v3 = [UIFont fontWithName:name size:10.0];
  v4 = CTFontCopyDisplayName(v3);
  if ([(__CFString *)v4 hasPrefix:@"."])
  {
    v5 = sub_1000511CC(off_1001FDDD0, @"system.font.name", 0);

    v4 = v5;
  }

  return v4;
}

- (id)_orderedMonitoredFontAttributes
{
  if (qword_1001FECD0 != -1)
  {
    sub_10012AB8C();
  }

  v3 = qword_1001FECC8;

  return v3;
}

- (id)_computeChangedFontAttributes:(id)attributes storedAttributes:(id)storedAttributes haveMisspellCheck:(BOOL)check
{
  checkCopy = check;
  attributesCopy = attributes;
  storedAttributesCopy = storedAttributes;
  v8 = +[NSString string];
  selfCopy = self;
  _orderedMonitoredFontAttributes = [(VOTElementManager *)self _orderedMonitoredFontAttributes];
  v10 = [storedAttributesCopy count];
  if (storedAttributesCopy && !v10)
  {
    v119[0] = UIAccessibilityTokenListItemLabel;
    v119[1] = AXUIAccessibilityTextAttributeHeadingLevel;
    v119[2] = AXUIAccessibilityTextAttributeCustom;
    v11 = [NSArray arrayWithObjects:v119 count:3];

    _orderedMonitoredFontAttributes = v11;
  }

  firstResponderElement = self->_firstResponderElement;
  if (firstResponderElement)
  {
    v13 = ![(VOTElement *)firstResponderElement shouldAnnounceFontInfo];
  }

  else
  {
    v13 = 0;
  }

  v116 = 0u;
  v117 = 0u;
  v114 = 0u;
  v115 = 0u;
  obj = _orderedMonitoredFontAttributes;
  v110 = [obj countByEnumeratingWithState:&v114 objects:v118 count:16];
  if (!v110)
  {
    v14 = attributesCopy;
    goto LABEL_131;
  }

  v111 = 0;
  v113 = 0;
  v108 = storedAttributesCopy;
  v109 = *v115;
  v106 = AXUIAccessibilityTextAttributeCustom;
  v107 = AXUIAccessibilityTextAttributeHeadingLevel;
  v14 = attributesCopy;
  do
  {
    v15 = 0;
    do
    {
      if (*v115 != v109)
      {
        objc_enumerationMutation(obj);
      }

      v16 = *(*(&v114 + 1) + 8 * v15);
      v17 = [v14 objectForKey:{v16, v86}];
      v18 = [storedAttributesCopy objectForKey:v16];
      v19 = v18;
      if (v17)
      {
        v20 = 1;
      }

      else
      {
        v20 = v18 == 0;
      }

      if (!v20 || (v17 ? (v21 = v18 == 0) : (v21 = 0), v21 || v17 && ([v17 isEqual:v18] & 1) == 0))
      {
        if ([v16 isEqualToString:UIAccessibilityTokenMisspelled])
        {
          if ([v17 BOOLValue] && checkCopy)
          {
            v87 = sub_1000511CC(off_1001FDDD0, @"misspelled", 0);
            v102 = @"__AXStringForVariablesSentinel";
            v23 = __AXStringForVariables();

            v8 = v23;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenStyleName, v87, v102}])
        {
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v24 = v17;
            if ([v24 length])
            {
              v88 = v24;
              v102 = @"__AXStringForVariablesSentinel";
              v25 = __AXStringForVariables();

              v8 = v25;
            }
          }
        }

        if (!(v13 & 1 | (([v16 isEqualToString:{UIAccessibilityTokenFontFamily, v88}] & 1) == 0)))
        {
          v26 = [(VOTElementManager *)selfCopy _fontDisplayNameForFontName:v17];
          if ([v26 length])
          {
            v89 = v26;
            v102 = @"__AXStringForVariablesSentinel";
            v27 = __AXStringForVariables();

            v8 = v27;
          }

          v113 = 1;
        }

        if (!(v13 & 1 | (([v16 isEqualToString:{UIAccessibilityTokenLineSpacing, v89}] & 1) == 0)))
        {
          v28 = objc_allocWithZone(NSString);
          v29 = sub_1000511CC(off_1001FDDD0, @"line.spacing", 0);
          v30 = [v28 initWithFormat:v29, v17];

          v90 = v30;
          v102 = @"__AXStringForVariablesSentinel";
          v31 = __AXStringForVariables();

          v8 = v31;
        }

        if (!(v13 & 1 | (([v16 isEqualToString:{UIAccessibilityTokenFontSize, v90}] & 1) == 0)))
        {
          v32 = objc_allocWithZone(NSString);
          v33 = sub_1000511CC(off_1001FDDD0, @"font.size.format", 0);
          [v17 floatValue];
          v34 = AXFormatFloat();
          v35 = [v32 initWithFormat:v33, v34];

          v91 = v35;
          v102 = @"__AXStringForVariablesSentinel";
          v36 = __AXStringForVariables();

          v8 = v36;
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenForegroundColor, v91}])
        {
          v92 = v17;
          v102 = @"__AXStringForVariablesSentinel";
          v37 = __AXStringForVariables();

          v8 = v37;
        }

        if (([v16 isEqualToString:{UIAccessibilityTokenBold, v92}] & 1) != 0 || !(v111 & 1 | ((objc_msgSend(v16, "isEqualToString:", UIAccessibilityTokenFontName) & 1) == 0)))
        {
          if ([v16 isEqualToString:UIAccessibilityTokenBold])
          {
            bOOLValue = [v17 BOOLValue];
            bOOLValue2 = [v19 BOOLValue];
            if (bOOLValue)
            {
              goto LABEL_48;
            }

LABEL_50:
            v40 = @"bold.not";
            if (bOOLValue2)
            {
              goto LABEL_51;
            }
          }

          else
          {
            v41 = [v17 isEqualToString:@"Helvetica Neue Medium"];
            bOOLValue2 = [v19 isEqualToString:@"Helvetica Neue Medium"];
            if ((v41 & 1) == 0)
            {
              goto LABEL_50;
            }

LABEL_48:
            v40 = @"bold";
LABEL_51:
            v93 = sub_1000511CC(off_1001FDDD0, v40, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v42 = __AXStringForVariables();

            v8 = v42;
          }

          if ((v113 | v13))
          {
            v111 = 1;
          }

          else
          {
            v43 = [v14 objectForKey:UIAccessibilityTokenFontFamily];
            v44 = [(VOTElementManager *)selfCopy _fontDisplayNameForFontName:v43];

            if ([v44 length])
            {
              v93 = v44;
              v102 = @"__AXStringForVariablesSentinel";
              v45 = __AXStringForVariables();

              v8 = v45;
            }

            v111 = 1;
            v113 = 1;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenHighlightedText, v93}])
        {
          if (v17)
          {
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) != 0 && [v17 length])
            {
              v94 = v17;
              v102 = @"__AXStringForVariablesSentinel";
              v46 = __AXStringForVariables();
              goto LABEL_65;
            }

            v47 = off_1001FDDD0;
            v48 = @"highlighted";
          }

          else
          {
            v47 = off_1001FDDD0;
            v48 = @"unhighlighted";
          }

          v94 = sub_1000511CC(v47, v48, 0);
          v102 = @"__AXStringForVariablesSentinel";
          v46 = __AXStringForVariables();

          v8 = v94;
LABEL_65:

          v8 = v46;
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenItalic, v94}])
        {
          bOOLValue3 = [v17 BOOLValue];
          v50 = @"italic";
          if ((bOOLValue3 & 1) != 0 || (v51 = [v19 BOOLValue], v50 = @"italic.not", v51))
          {
            v95 = sub_1000511CC(off_1001FDDD0, v50, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v52 = __AXStringForVariables();

            v8 = v52;
          }

          if (((v113 | v13) & 1) == 0)
          {
            v95 = [v14 objectForKey:UIAccessibilityTokenFontFamily];
            v102 = @"__AXStringForVariablesSentinel";
            v53 = __AXStringForVariables();

            v113 = 1;
            v8 = v53;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenUnderline, v95}])
        {
          bOOLValue4 = [v17 BOOLValue];
          v55 = @"underline";
          if ((bOOLValue4 & 1) != 0 || (v56 = [v19 BOOLValue], v55 = @"underline.not", v56))
          {
            v96 = sub_1000511CC(off_1001FDDD0, v55, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v57 = __AXStringForVariables();

            v8 = v57;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenStrikethrough, v96}])
        {
          bOOLValue5 = [v17 BOOLValue];
          v59 = @"strikethrough";
          if ((bOOLValue5 & 1) != 0 || (v60 = [v19 BOOLValue], v59 = @"strikethrough.not", v60))
          {
            v97 = sub_1000511CC(off_1001FDDD0, v59, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v61 = __AXStringForVariables();

            v8 = v61;
          }
        }

        if (![v16 isEqualToString:{v107, v97}])
        {
          goto LABEL_93;
        }

        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          integerValue = [v17 integerValue];
          if (integerValue >= 1)
          {
            if (!v19 || [v19 integerValue] != integerValue)
            {
              v63 = sub_1000511CC(off_1001FDDD0, @"element.header.text", 0);
              v64 = AXFormatInteger();
              v98 = [NSString stringWithFormat:v63, v64];
              v102 = @"__AXStringForVariablesSentinel";
              v65 = __AXStringForVariables();

              v8 = v64;
              v14 = attributesCopy;
              goto LABEL_92;
            }

            goto LABEL_93;
          }
        }

        else
        {
          integerValue = 0;
        }

        if (!integerValue && v17 && (!v19 || [v19 integerValue]))
        {
          v63 = sub_1000511CC(off_1001FDDD0, @"element.header.text.nolevel", 0);
          v98 = v63;
          v102 = @"__AXStringForVariablesSentinel";
          v65 = __AXStringForVariables();
LABEL_92:

          v8 = v65;
        }

LABEL_93:
        if ([v16 isEqualToString:{v106, v98}])
        {
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v66 = v17;
          }

          else
          {
            v66 = 0;
          }

          v67 = v66;
          v68 = v67;
          if (v67 && ([v67 isEqual:v19] & 1) == 0)
          {
            v99 = [v68 componentsJoinedByString:{@", "}];
            v102 = @"__AXStringForVariablesSentinel";
            v69 = __AXStringForVariables();

            v14 = attributesCopy;
            v8 = v69;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenBlockquoteLevel, v99}])
        {
          integerValue2 = [v17 integerValue];
          if (integerValue2 > 0 || !integerValue2 && (!v19 || [v19 integerValue]))
          {
            v71 = sub_1000511CC(off_1001FDDD0, @"blockquote.level", 0);
            v72 = AXFormatInteger();
            v100 = [NSString stringWithFormat:v71, v72];
            v102 = @"__AXStringForVariablesSentinel";
            v73 = __AXStringForVariables();

            v14 = attributesCopy;
            v8 = v73;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenIndentationLevel, v100}])
        {
          integerValue3 = [v17 integerValue];
          if (integerValue3 > 0 || !integerValue3 && (!v19 || [v19 integerValue]))
          {
            v75 = sub_1000511CC(off_1001FDDD0, @"indentation.level", 0);
            v76 = AXFormatInteger();
            v101 = [NSString stringWithFormat:v75, v76];
            v102 = @"__AXStringForVariablesSentinel";
            v77 = __AXStringForVariables();

            v8 = v77;
          }

          v14 = attributesCopy;
        }

        storedAttributesCopy = v108;
        if ([v16 isEqualToString:{UIAccessibilityTokenParagraphAlignment, v101}])
        {
          integerValue4 = [v17 integerValue];
          if (integerValue4 <= 4)
          {
            v87 = sub_1000511CC(off_1001FDDD0, *(&off_1001CA448 + integerValue4), 0);
            v102 = @"__AXStringForVariablesSentinel";
            v79 = __AXStringForVariables();

            v14 = attributesCopy;
            v8 = v79;
          }
        }
      }

      if (![v16 isEqualToString:{UIAccessibilityTokenListItemLabel, v87}])
      {
        goto LABEL_120;
      }

      if (![v19 length])
      {
        v81 = [v17 length];
        v80 = @"entered.list";
        if (v81)
        {
          goto LABEL_119;
        }
      }

      if ([v19 length] && !objc_msgSend(v17, "length"))
      {
        v80 = @"exited.list";
LABEL_119:
        v86 = sub_1000511CC(off_1001FDDD0, v80, 0);
        v102 = @"__AXStringForVariablesSentinel";
        v82 = __AXStringForVariables();

        v14 = attributesCopy;
        v8 = v82;
      }

LABEL_120:

      v15 = v15 + 1;
    }

    while (v110 != v15);
    v83 = [obj countByEnumeratingWithState:&v114 objects:v118 count:16];
    v110 = v83;
  }

  while (v83);
LABEL_131:

  if (![storedAttributesCopy count] || objc_msgSend(v14, "count"))
  {
    [storedAttributesCopy removeAllObjects];
    [storedAttributesCopy addEntriesFromDictionary:v14];
  }

  v84 = [AXAttributedString axAttributedStringWithString:v8, v86];

  return v84;
}

- (void)_handleReadURL:(id)l
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  v11 = [_currentElement url];

  absoluteString = [v11 absoluteString];
  v6 = [absoluteString length];

  if (v6)
  {
    v7 = +[VOTOutputRequest createRequest];
    absoluteString2 = [v11 absoluteString];
    v9 = [v7 addString:absoluteString2];

    [(VOTElementManager *)self sendRequest:v7];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v10];
  }
}

- (void)_handleReadItemHint:(id)hint
{
  hint = [(VOTElement *)self->_currentElement hint];
  if ([hint length])
  {
    hint2 = [(VOTElement *)self->_currentElement hint];
    v5 = +[VOTOutputRequest createRequest];
    language = [(VOTElement *)self->_currentElement language];
    v7 = [v5 addString:hint2 withLanguage:language];

    [(VOTElementManager *)self sendRequest:v5];
  }

  else
  {
    hint2 = +[VOTOutputManager outputManager];
    v5 = +[VOSOutputEvent BoundaryEncountered];
    [hint2 sendEvent:v5];
  }
}

- (void)_handleOutputLineCount:(id)count
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXTextEntryTrait])
  {
    value = [(VOTElement *)self->_currentElement value];
    v4 = +[NSCharacterSet newlineCharacterSet];
    v5 = [value componentsSeparatedByCharactersInSet:v4];
    v6 = [v5 count];

    v7 = +[VOTOutputRequest createRequest];
    v8 = off_1001FDDD0;
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    v10 = sub_1000511CC(v8, @"line.count", selectedLanguage);
    v11 = [NSString localizedStringWithFormat:v10, v6];
    v12 = [v7 addString:v11];

    [(VOTElementManager *)self sendRequest:v7];
  }

  else
  {
    value = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [value sendEvent:v7];
  }
}

- (void)_handleReadLine:(id)line
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveTraits:kAXIsEditingTrait])
  {
    location = [_currentElement selectedTextRange];
    value = [_currentElement value];
  }

  else
  {
    if (self->_elementUnitOutputRange.location == 0x7FFFFFFF)
    {
      location = 0;
    }

    else
    {
      location = self->_elementUnitOutputRange.location;
    }

    value = [_currentElement visibleText];
  }

  v6 = value;
  v7 = [value ax_lineRangeForPosition:location];
  if (v7 == 0x7FFFFFFF || (v9 = v7, v10 = v8, &v7[v8] > [v6 length]))
  {
    v11 = 0;
  }

  else
  {
    v11 = [v6 substringWithRange:{v9, v10}];
  }

  if ([v11 length])
  {
    v12 = +[VOTOutputRequest createRequest];
    language = [_currentElement language];
    v14 = [v12 addString:v11 withLanguage:language];

    [(VOTElementManager *)self sendRequest:v12];
  }

  else
  {
    v12 = +[VOTOutputManager outputManager];
    v15 = +[VOSOutputEvent BoundaryEncountered];
    [v12 sendEvent:v15];
  }
}

- (id)_phoneticStringForLetter:(id)letter language:(id)language
{
  elementManagerThread = self->_elementManagerThread;
  languageCopy = language;
  letterCopy = letter;
  if (([(SCRCThread *)elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  application = [(VOTElement *)self->_firstResponderElement application];
  currentSoftwareKeyboardLanguage = [application currentSoftwareKeyboardLanguage];
  v11 = sub_100052450(letterCopy, languageCopy, currentSoftwareKeyboardLanguage);

  return v11;
}

- (void)_handleReadWord:(id)word
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveTraits:kAXIsEditingTrait])
  {
    value = [_currentElement value];
    v6 = [value wordFromPosition:objc_msgSend(_currentElement inDirection:{"selectedTextRange"), 1}];
    if (v6 == 0x7FFFFFFFFFFFFFFFLL)
    {
LABEL_10:
      v13 = 0;
      goto LABEL_12;
    }

    location = v6;
    v9 = v7;
    v10 = v7 + v6;
  }

  else
  {
    visibleText = [_currentElement visibleText];
    value = visibleText;
    location = self->_elementUnitOutputRange.location;
    length = self->_elementUnitOutputRange.length;
    if (length)
    {
      v9 = (length + 1);
    }

    else
    {
      v9 = [visibleText length];
    }

    if (location == 0x7FFFFFFFFFFFFFFFLL)
    {
      goto LABEL_10;
    }

    v10 = v9 + location;
  }

  if (v10 > [value length])
  {
    goto LABEL_10;
  }

  v13 = [value substringWithRange:{location, v9}];
LABEL_12:

  if ([v13 length])
  {
    v29 = _currentElement;
    v14 = [v13 length];
    v15 = +[NSMutableString string];
    v16 = v15;
    v17 = self->_readWordCyclingCount % 3;
    if (v17)
    {
      if (v14 >= 1)
      {
        v18 = 0;
        do
        {
          v19 = [v13 characterAtIndex:v18];
          v30 = v19;
          if (v19 == 32)
          {
            selectedLanguage = [VOTSharedWorkspace selectedLanguage];
            v21 = sub_100051B24(32, @"UnicodeHex.", @"VOTOutputPunctuation", selectedLanguage);

            if (!v21)
            {
              v21 = @" ";
            }

            [v16 appendString:v21];
          }

          else if (v17 == 2)
          {
            v22 = [NSString stringWithCharacters:&v30 length:1];
            v23 = [(VOTElementManager *)self _phoneticStringForLetter:v22 language:0];

            if (v23)
            {
              [v16 appendFormat:@"%@", v23];
            }

            else
            {
              [v16 appendFormat:@"%C", v30];
            }
          }

          else if (v17 == 1)
          {
            [v16 appendFormat:@"%C", v19];
          }

          if (v14 != 1)
          {
            [v16 appendString:{@", "}];
          }

          ++v18;
          --v14;
        }

        while (v14);
      }
    }

    else
    {
      [v15 setString:v13];
    }

    v26 = +[VOTOutputRequest createRequest];
    _currentElement = v29;
    language = [v29 language];
    v28 = [v26 addString:v16 withLanguage:language];

    [(VOTElementManager *)self sendRequest:v26];
    ++self->_readWordCyclingCount;
  }

  else
  {
    v24 = +[VOTOutputManager outputManager];
    v25 = +[VOSOutputEvent BoundaryEncountered];
    [v24 sendEvent:v25];
  }
}

- (void)_handleCursorMovementByTextSegment:(id)segment
{
  segmentCopy = segment;
  command = [segmentCopy command];
  if ([command isEqualToString:kVOTEventCommandNextTextSegment])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  v6 = [segmentCopy objectForIndex:118];
  integerValue = [v6 integerValue];

  if (integerValue == 2)
  {
    [(VOTElementManager *)self _handleWordMovement:segmentCopy direction:v5];
  }

  else if (integerValue == 3)
  {
    [(VOTElementManager *)self _handleGenericTextSegmentMovement:segmentCopy direction:v5 granulary:3];
  }

  else
  {
    [(VOTElementManager *)self _handleLetterMovement:segmentCopy direction:v5];
  }
}

- (void)_moveCursorForElement:(id)element direction:(int64_t)direction unit:(int64_t)unit
{
  elementCopy = element;
  textInputElement = [elementCopy textInputElement];
  v10 = textInputElement;
  if (textInputElement)
  {
    v11 = textInputElement;

    elementCopy = v11;
  }

  v68 = xmmword_10017E110;
  if ((unit - 2) > 4)
  {
    v12 = 0;
  }

  else
  {
    v12 = qword_10017E408[unit - 2];
  }

  v13 = +[AXSettings sharedInstance];
  voiceOverCursorOutputStyle = [v13 voiceOverCursorOutputStyle];

  uiElement = [elementCopy uiElement];
  selectedTextRange = [elementCopy selectedTextRange];
  v17 = [uiElement nextCursorRangeInDirection:direction != 1 unit:v12 outputRange:&v68 currentCursorRange:selectedTextRange outputStyleSpeakToRight:{v16, voiceOverCursorOutputStyle == 2}];
  v19 = v18;

  v20 = [(VOTElementManager *)self _characterRangeWithFaultTolerance:v17 forward:direction == 1 element:elementCopy];
  if (v20 == 0x7FFFFFFF)
  {
    v21 = v19;
  }

  else
  {
    v21 = 0;
  }

  range = v21;
  if (v20 == 0x7FFFFFFF)
  {
    v22 = v17;
  }

  else
  {
    v22 = v20;
  }

  v23 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging = [v23 ignoreLogging];

  if ((ignoreLogging & 1) == 0)
  {
    v25 = +[AXSubsystemVoiceOver identifier];
    v26 = AXLoggerForFacility();

    v27 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v26, v27))
    {
      v28 = AXColorizeFormatLog();
      v71.location = v22;
      v71.length = range;
      v64 = NSStringFromRange(v71);
      v29 = _AXStringForArgs();

      if (os_log_type_enabled(v26, v27))
      {
        *buf = 138543362;
        v70 = v29;
        _os_log_impl(&_mh_execute_header, v26, v27, "%{public}@", buf, 0xCu);
      }
    }
  }

  if (unit == 2)
  {
    [(NSMutableDictionary *)self->_lastSeenFontProperties removeObjectForKey:UIAccessibilityTokenMisspelled];
  }

  if (unit == 1 || v68.location == 0x7FFFFFFF)
  {
    width = CGRectZero.size.width;
    height = CGRectZero.size.height;
    x = CGRectZero.origin.x;
    y = CGRectZero.origin.y;
    self->_highlightedCharacterRange = xmmword_10017E110;
    v44 = width;
    v42 = y;
    v40 = CGRectZero.origin.x;
  }

  else
  {
    [elementCopy boundsForRange:v68];
    x = v30;
    y = v32;
    width = v34;
    v37 = v36;
    v38 = +[VOTElement systemWideElement];
    [v38 convertRect:objc_msgSend(elementCopy fromContextId:{"windowContextId"), x, y, width, v37}];
    v40 = v39;
    v42 = v41;
    v44 = v43;
    height = v45;

    self->_highlightedCharacterRange = v68;
  }

  if (v22 == 0x7FFFFFFF)
  {
    v47 = +[VOTOutputManager outputManager];
    v48 = +[VOSOutputEvent BoundaryEncountered];
    [v47 sendEvent:v48];
  }

  else
  {
    v66 = v10;
    v49 = +[AXSubsystemVoiceOver sharedInstance];
    ignoreLogging2 = [v49 ignoreLogging];

    if ((ignoreLogging2 & 1) == 0)
    {
      v51 = +[AXSubsystemVoiceOver identifier];
      v52 = AXLoggerForFacility();

      v53 = AXOSLogLevelFromAXLogLevel();
      if (os_log_type_enabled(v52, v53))
      {
        v54 = AXColorizeFormatLog();
        v72.location = v22;
        v72.length = range;
        v64 = NSStringFromRange(v72);
        v55 = _AXStringForArgs();

        if (os_log_type_enabled(v52, v53))
        {
          *buf = 138543362;
          v70 = v55;
          _os_log_impl(&_mh_execute_header, v52, v53, "%{public}@", buf, 0xCu);
        }
      }
    }

    [(VOTElementManager *)self _setSelectedTextRange:v22 onElement:range refreshBraille:elementCopy isVoiceOverSelectionMovement:1, 1, v64];
    v56 = +[VOTOutputManager outputManager];
    v57 = +[VOSOutputEvent InsertionPointDidMove];
    [v56 sendEvent:v57];

    if (direction == 1 && voiceOverCursorOutputStyle == 2)
    {
      value = [elementCopy value];
      v59 = [value length];

      if (v22 == v59)
      {
        v60 = sub_1000511CC(off_1001FDDD0, @"cursor.blank", 0);
        selectedLanguage = [VOTSharedWorkspace selectedLanguage];
        v62 = sub_1000095FC(v60, 0, selectedLanguage);
      }
    }

    v74.origin.x = CGRectZero.origin.x;
    v74.origin.y = CGRectZero.origin.y;
    v74.size.width = CGRectZero.size.width;
    v74.size.height = CGRectZero.size.height;
    v73.origin.x = v40;
    v73.origin.y = v42;
    v73.size.width = v44;
    v73.size.height = height;
    if (!CGRectEqualToRect(v73, v74))
    {
      v63 = +[VOTDisplayManager displayManager];
      [v63 setCursorFrame:{v40, v42, v44, height}];

      self->_textRangeBeingDisplayed = 1;
      [elementCopy scrollRectToVisible:0 withCompletion:{x, y, width, 10.0}];
    }

    self->_cursorBorderHitCount = 0;
    v10 = v66;
  }
}

- (void)_handleCharacterMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  if ([command isEqualToString:kVOTEventCommandNextCharacter])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self setInTextSelection:0];
  [(VOTElementManager *)self _handleLetterMovement:movementCopy direction:v5];
}

- (void)_handleWordMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  if ([command isEqualToString:kVOTEventCommandNextWord])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self setInTextSelection:0];
  [(VOTElementManager *)self _handleWordMovement:movementCopy direction:v5];
}

- (void)_handleLetterMovement:(id)movement direction:(int64_t)direction
{
  obj = [(VOTElementManager *)self _currentElement];
  if ([obj isEqual:self->_firstResponderElement])
  {
    objc_storeStrong(&self->_firstResponderElement, obj);
  }

  self->_lastCharacterRotorMovement = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self setInTextSelection:0];
  if ([obj isReadingContent])
  {
    [(VOTElementManager *)self _handleBookContentMovement:obj direction:direction unit:1 generateOutput:1];
    goto LABEL_13;
  }

  if ([obj doesHaveTraits:kAXKeyboardKeyTrait] && (objc_msgSend(obj, "doesHaveTraits:", kAXAutoCorrectCandidateTrait) & 1) == 0)
  {
    firstResponderElement = [(VOTElement *)self->_lastApplication firstResponderElement];
  }

  else
  {
    if (![obj doesHaveTraits:kAXIsEditingTrait])
    {
      goto LABEL_12;
    }

    firstResponderElement = obj;
  }

  v7 = firstResponderElement;
  if (firstResponderElement)
  {
    [(VOTElementManager *)self _moveCursorForElement:firstResponderElement direction:direction unit:1];

    goto LABEL_13;
  }

LABEL_12:
  [(VOTElementManager *)self _outputNextTextSegmentUnit:1 direction:direction];
LABEL_13:
}

- (void)_handleWordMovement:(id)movement direction:(int64_t)direction
{
  obj = [(VOTElementManager *)self _currentElement];
  if ([obj isEqual:self->_firstResponderElement])
  {
    objc_storeStrong(&self->_firstResponderElement, obj);
  }

  [(VOTElementManager *)self setInTextSelection:0];
  self->_lastWordRotorMovement = CFAbsoluteTimeGetCurrent();
  v6 = [obj doesHaveTraits:kAXKeyboardKeyTrait];
  if ([obj isReadingContent])
  {
    [(VOTElementManager *)self _handleBookContentMovement:obj direction:direction unit:2 generateOutput:1];
  }

  else if (([obj doesHaveTraits:kAXIsEditingTrait] | v6))
  {
    if (v6)
    {
      firstResponderElement = [(VOTElement *)self->_lastApplication firstResponderElement];

      v8 = firstResponderElement;
    }

    else
    {
      v8 = obj;
    }

    obj = v8;
    [(VOTElementManager *)self _moveCursorForElement:v8 direction:direction unit:2];
  }

  else
  {
    [(VOTElementManager *)self _outputNextTextSegmentUnit:2 direction:direction];
  }
}

- (void)_finishHandlingLineMovementInWeb:(id)web direction:(id)direction withCurrentElement:(id)element markerArray:(id)array textObjects:(id)objects existingRequest:(id)request
{
  webCopy = web;
  elementCopy = element;
  arrayCopy = array;
  objectsCopy = objects;
  requestCopy = request;
  integerValue = [direction integerValue];
  _currentElement = [(VOTElementManager *)self _currentElement];

  if (_currentElement == elementCopy)
  {
    [elementCopy textMarkerFrame:arrayCopy];
    v24 = v23;
    v26 = v25;
    if (v21 >= 4.0)
    {
      v27 = v21;
    }

    else
    {
      v27 = 4.0;
    }

    if (v22 >= 4.0)
    {
      v28 = v22;
    }

    else
    {
      v28 = 4.0;
    }

    v29 = +[VOTElement systemWideElement];
    [v29 convertRect:objc_msgSend(elementCopy fromContextId:{"windowContextId"), v24, v26, v27, v28}];
    self->_lineFrame.origin.x = v30;
    self->_lineFrame.origin.y = v31;
    self->_lineFrame.size.width = v32;
    self->_lineFrame.size.height = v33;

    v34 = +[VOTDisplayManager displayManager];
    [v34 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

    self->_textRangeBeingDisplayed = 1;
    v35 = VOTLogElement();
    if (os_log_type_enabled(v35, OS_LOG_TYPE_DEBUG))
    {
      v36 = NSStringFromCGRect(self->_lineFrame);
      v37 = 138543618;
      v38 = v36;
      v39 = 2114;
      v40 = objectsCopy;
      _os_log_debug_impl(&_mh_execute_header, v35, OS_LOG_TYPE_DEBUG, "got data %{public}@ == %{public}@", &v37, 0x16u);
    }

    if ([(NSArray *)self->_lineArray count])
    {
      [(VOTElementManager *)self _handleLineMovementInWeb:webCopy direction:integerValue existingRequest:requestCopy];
    }
  }
}

- (void)_handleLineMovementInWeb:(id)web direction:(int64_t)direction existingRequest:(id)request
{
  webCopy = web;
  _currentElement = [(VOTElementManager *)self _currentElement];
  p_lineArray = &self->_lineArray;
  lineArray = self->_lineArray;
  if (lineArray)
  {
    lineArrayPosition = self->_lineArrayPosition;
    if (lineArrayPosition < [(NSArray *)lineArray count])
    {
      if (request)
      {
        requestCopy = request;
      }

      else
      {
        requestCopy = objc_alloc_init(VOTOutputRequest);
      }

      v16 = requestCopy;
      v22 = [(NSArray *)self->_lineArray objectAtIndex:self->_lineArrayPosition];
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
        objc_opt_class();
        v23 = v22;
        if (objc_opt_isKindOfClass())
        {
          v29 = +[NSCharacterSet whitespaceCharacterSet];
          v30 = [v22 stringByTrimmingCharactersInSet:v29];

          v31 = VOTLogElement();
          if (os_log_type_enabled(v31, OS_LOG_TYPE_DEBUG))
          {
            sub_10012ABA0();
          }

          if (![(__CFString *)v30 length])
          {
            if (direction == 1)
            {
              v84 = 1;
            }

            else
            {
              v84 = -1;
            }

            self->_lineArrayPosition += v84;
            [VOTElementManager _handleLineMovementInWeb:"_handleLineMovementInWeb:direction:existingRequest:" direction:webCopy existingRequest:?];

            goto LABEL_106;
          }

          v32 = webCopy;
          v33 = +[VOTDisplayManager displayManager];
          [v33 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

          self->_textRangeBeingDisplayed = 1;
          v34 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
          v35 = [(__CFString *)v30 stringByTrimmingCharactersInSet:v34];
          v36 = [v35 length];

          if (!v36)
          {

            v30 = @"\n";
          }

          elementHeadersForOutput = [(VOTOutputRequest *)v16 elementHeadersForOutput];

          webCopy = v32;
          if (elementHeadersForOutput)
          {
            [(VOTElement *)self->_currentElement applyHeaderElementsToRequest:v16];
          }

          v38 = [(VOTOutputRequest *)v16 addString:v30];
          lastAction = [(VOTOutputRequest *)v16 lastAction];
          [lastAction setPerformPunctuationTranslation:1];

          lastAction2 = [(VOTOutputRequest *)v16 lastAction];
          [lastAction2 setReplaceCommas:1];
        }

        goto LABEL_69;
      }

      [(VOTElementManager *)self _addDescription:v22 toRequest:v16 withOptions:1];
      [(VOTElementManager *)self _setCurrentElement:v22];
      v104[0] = _NSConcreteStackBlock;
      v104[1] = 3221225472;
      v104[2] = sub_100076440;
      v104[3] = &unk_1001C7778;
      v104[4] = self;
      v23 = v22;
      v24 = v22;
      v105 = v24;
      [v24 scrollToElementForDirectional:1 withCompletion:v104];
      textMarkerRange = [v24 textMarkerRange];
      v26 = textMarkerRange;
      v27 = self->_lineArrayPosition;
      if (direction == 1)
      {
        if (v27 != -[NSArray count](*p_lineArray, "count") - 1 || [v26 count] <= 1)
        {
          goto LABEL_68;
        }

        v28 = 1;
      }

      else
      {
        if (v27 || ![textMarkerRange count])
        {
          goto LABEL_68;
        }

        v28 = 0;
      }

      v58 = [v26 objectAtIndex:v28];
      textMarker = self->_textMarker;
      self->_textMarker = v58;

LABEL_68:
LABEL_69:
      v60 = VOTLogElement();
      if (os_log_type_enabled(v60, OS_LOG_TYPE_DEBUG))
      {
        sub_10012AC14();
      }

      [(VOTElementManager *)self sendRequest:v16];
      directionCopy = direction;
      if (direction != 1)
      {
        directionCopy = -1;
      }

      self->_lineArrayPosition += directionCopy;
      goto LABEL_106;
    }

    v13 = *p_lineArray;
  }

  else
  {
    v13 = 0;
  }

  *p_lineArray = 0;
  self->_lineArrayPosition = 0;

  v14 = kAXIsEditingTrait;
  if ([_currentElement doesHaveTraits:kAXIsEditingTrait])
  {
    v15 = _currentElement;
  }

  else
  {
    v15 = [(VOTElementManager *)self webEditableAncestor:_currentElement];
  }

  v16 = v15;
  textMarkerRange2 = [_currentElement textMarkerRange];
  location = &self->_lineArray;
  requestCopy2 = request;
  v93 = textMarkerRange2;
  v90 = v14;
  if (self->_textMarker)
  {
    v18 = VOTLogElement();
    if (os_log_type_enabled(v18, OS_LOG_TYPE_DEBUG))
    {
      sub_10012ACAC();
    }

    v19 = self->_textMarker;
LABEL_40:
    v94 = v16;
    p_super = &v19->super;
    v46 = webCopy;
    if ([0 count])
    {
      v47 = 0;
      v48 = 0;
      v49 = 0;
      goto LABEL_77;
    }

    v50 = 0;
    v48 = 0;
    v47 = 0;
    while (1)
    {
      v51 = VOTLogElement();
      if (os_log_type_enabled(v51, OS_LOG_TYPE_DEBUG))
      {
        *buf = 138478083;
        v107 = _currentElement;
        v108 = 2113;
        v109 = p_super;
        _os_log_debug_impl(&_mh_execute_header, v51, OS_LOG_TYPE_DEBUG, "start: %{private}@ -- %{private}@", buf, 0x16u);
      }

      v52 = v48;
      v48 = +[NSMutableArray array];

      if (direction == 1)
      {
        v53 = [_currentElement textLineEndMarker:p_super];

        if (v53)
        {
          [v48 addObject:p_super];
          v54 = v48;
          v55 = v53;
LABEL_50:
          [v54 addObject:v55];
          v47 = v53;
          goto LABEL_52;
        }
      }

      else
      {
        v53 = [_currentElement textLineStartMarker:p_super];

        if (v53)
        {
          [v48 addObject:v53];
          v54 = v48;
          v55 = p_super;
          goto LABEL_50;
        }
      }

      v47 = 0;
LABEL_52:
      if ([v48 count] != 2)
      {
        goto LABEL_76;
      }

      if ([v52 isEqual:v48])
      {

        v48 = 0;
        goto LABEL_76;
      }

      v49 = [_currentElement textMarkerArrayOfText:v48];

      v56 = VOTLogElement();
      if (os_log_type_enabled(v56, OS_LOG_TYPE_DEBUG))
      {
        *buf = 138478083;
        v107 = v48;
        v108 = 2113;
        v109 = v49;
        _os_log_debug_impl(&_mh_execute_header, v56, OS_LOG_TYPE_DEBUG, "markers: %{private}@ got textObjs: %{private}@", buf, 0x16u);
      }

      if (!v49)
      {
        v50 = 0;
LABEL_76:

        v49 = v50;
LABEL_77:
        if ([v48 count] == 2)
        {
          objc_storeStrong(location, v49);
          webCopy = v46;
          if (direction == 1)
          {
            v62 = 0;
          }

          else
          {
            v62 = [*location count] - 1;
          }

          self->_lineArrayPosition = v62;
          objc_storeStrong(&self->_textMarker, v47);
          v66 = [v48 objectAtIndex:0];
          [(_VOTTextMarkerRange *)self->_textMarkerRange setStartMarker:v66];

          v67 = [v48 objectAtIndex:1];
          [(_VOTTextMarkerRange *)self->_textMarkerRange setEndMarker:v67];

          startMarker = [(_VOTTextMarkerRange *)self->_textMarkerRange startMarker];
          v69 = [_currentElement rangeForTextMarker:startMarker];

          textMarkerRange3 = [_currentElement textMarkerRange];
          v65 = textMarkerRange3;
          if (v69 != 0x7FFFFFFF)
          {
            firstObject = [textMarkerRange3 firstObject];
            v72 = [_currentElement rangeForTextMarker:firstObject];

            self->_elementUnitIndex = v69 - v72;
          }

          v73 = [_currentElement elementForTextMarker:v47];
          v74 = VOTLogElement();
          if (os_log_type_enabled(v74, OS_LOG_TYPE_DEBUG))
          {
            sub_10012ADD0();
          }

          if (!v73 || ([v73 isEqual:_currentElement] & 1) != 0 || (objc_msgSend(v73, "accessibleAncestor"), v75 = objc_claimAutoreleasedReturnValue(), v76 = objc_msgSend(v75, "isEqual:", _currentElement), v75, (v76 & 1) != 0))
          {
            v77 = [NSNumber numberWithInteger:direction];
            [(VOTElementManager *)self _finishHandlingLineMovementInWeb:webCopy direction:v77 withCurrentElement:_currentElement markerArray:v48 textObjects:v49 existingRequest:0];
          }

          else
          {
            [(VOTElementManager *)self _setCurrentElement:v73 isProtectedApp:0 shouldResetTextSelection:1 shouldResetCharacterRange:1 ignoreIsAccessibilityElementCheck:1];
            v81 = +[VOTOutputRequest createRequest];
            [(VOTElementManager *)self _prepareElementOutputHeaders:v73 currentElement:_currentElement request:v81];
            objc_storeStrong(location, v49);
            v97[0] = _NSConcreteStackBlock;
            v97[1] = 3221225472;
            v97[2] = sub_100076478;
            v97[3] = &unk_1001C9A38;
            v97[4] = self;
            v98 = webCopy;
            directionCopy2 = direction;
            v99 = v73;
            v100 = v48;
            v101 = v49;
            v102 = v81;
            v77 = v81;
            [v99 scrollToElementForDirectional:1 withCompletion:v97];
          }

          v16 = v94;
          if (v94)
          {
            if ([_currentElement doesHaveTraits:v90])
            {
              if (([(VOTOutputRequest *)v94 isEqual:_currentElement]& 1) != 0)
              {
LABEL_97:
                if (direction == 1)
                {
                  [v48 lastObject];
                }

                else
                {
                  [v48 firstObject];
                }
                v80 = ;
                v16 = v94;
                [(VOTOutputRequest *)v94 setSelectionToTextMarker:v80, v87, v88, v89];

                goto LABEL_101;
              }
            }

            else
            {
              v78 = [(VOTElementManager *)self webEditableAncestor:_currentElement];
              v79 = [(VOTOutputRequest *)v94 isEqual:v78];

              if (v79)
              {
                goto LABEL_97;
              }
            }

            [(VOTElementManager *)self webEditableAncestor:_currentElement];
            v89 = v88 = _currentElement;
            v87 = v94;
            _AXAssert();

            goto LABEL_97;
          }

LABEL_101:
        }

        else
        {
          v63 = +[VOTOutputManager outputManager];
          v64 = +[VOSOutputEvent BoundaryEncountered];
          [v63 sendEvent:v64];

          v65 = VOTLogElement();
          webCopy = v46;
          if (os_log_type_enabled(v65, OS_LOG_TYPE_DEBUG))
          {
            sub_10012AD60();
          }
        }

LABEL_103:
        request = requestCopy2;
        goto LABEL_104;
      }

      if (![v49 count])
      {
        if (direction == 1)
        {
          [_currentElement textNextMarker:p_super];
        }

        else
        {
          [_currentElement textPreviousMarker:p_super];
        }
        v57 = ;

        p_super = v57;
      }

      v50 = v49;
      if ([v49 count])
      {
        goto LABEL_77;
      }
    }
  }

  if (v16)
  {
    textMarkerRangeForSelection = [(VOTOutputRequest *)v16 textMarkerRangeForSelection];
    v21 = textMarkerRangeForSelection;
    if (direction == 1)
    {
      [textMarkerRangeForSelection lastObject];
    }

    else
    {
      [textMarkerRangeForSelection firstObject];
    }
    v44 = ;
    v45 = VOTLogElement();
    if (os_log_type_enabled(v45, OS_LOG_TYPE_DEBUG))
    {
      sub_10012ACE8();
    }

    v19 = v44;
    goto LABEL_40;
  }

  v41 = textMarkerRange2;
  if ([textMarkerRange2 count])
  {
    v42 = [v41 objectAtIndex:0];
    v43 = VOTLogElement();
    if (os_log_type_enabled(v43, OS_LOG_TYPE_DEBUG))
    {
      sub_10012AD24();
    }

    v19 = v42;
    goto LABEL_40;
  }

  v82 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging = [v82 ignoreLogging];

  if (ignoreLogging)
  {
    v23 = 0;
  }

  else
  {
    v85 = +[AXSubsystemVoiceOver identifier];
    v49 = AXLoggerForFacility();

    v86 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v49, v86))
    {
      v47 = AXColorizeFormatLog();
      v48 = _AXStringForArgs();
      if (os_log_type_enabled(v49, v86))
      {
        *buf = 138543362;
        v107 = v48;
        _os_log_impl(&_mh_execute_header, v49, v86, "%{public}@", buf, 0xCu);
      }

      p_super = 0;
      goto LABEL_103;
    }

    p_super = 0;
LABEL_104:

    v23 = p_super;
  }

LABEL_106:
}

- (void)_handleLineMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  if ([command isEqualToString:kVOTEventCommandNextLine])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleGenericTextSegmentMovement:movementCopy direction:v5 granulary:3];
}

- (void)_handleSentenceMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  if ([command isEqualToString:kVOTEventCommandNextSentence])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleGenericTextSegmentMovement:movementCopy direction:v5 granulary:5];
}

- (void)_handleParagraphMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  if ([command isEqualToString:kVOTEventCommandNextParagraph])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleGenericTextSegmentMovement:movementCopy direction:v5 granulary:6];
}

- (void)_handleAdjustTextSelectionSegmentType:(id)type
{
  typeCopy = type;
  command = [typeCopy command];
  if ([command isEqualToString:kVOTEventCommandNextTextSegmentType])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleRotorTextSelectionMovement:typeCopy direction:v5];
}

- (void)_handleRotorTextSelectionMovement:(id)movement direction:(int64_t)direction
{
  self->_inTextProcessingRotorMode = 1;
  textSelectionMovementManager = [(VOTElementManager *)self textSelectionMovementManager];
  v7 = textSelectionMovementManager;
  if (direction == 1)
  {
    [textSelectionMovementManager nextSegment];
  }

  else
  {
    [textSelectionMovementManager previousSegment];
  }

  textSelectionMovementManager2 = [(VOTElementManager *)self textSelectionMovementManager];
  localizedSegmentNameForSelection = [textSelectionMovementManager2 localizedSegmentNameForSelection];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = sub_1000095FC(localizedSegmentNameForSelection, 0, selectedLanguage);
}

- (void)_handleTextDocumentMovement:(id)movement
{
  movementCopy = movement;
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    command = [movementCopy command];
    v6 = [command isEqualToString:kVOTEventCommandDocumentTop];

    if (v6)
    {
      v7 = 0;
    }

    else
    {
      value = [_currentElement value];
      v7 = [value length];
    }

    [_currentElement setSelectedTextRange:v7 refreshBraille:{0, 1}];
  }

  else
  {
    v8 = +[VOTOutputManager outputManager];
    v9 = +[VOSOutputEvent BoundaryEncountered];
    [v8 sendEvent:v9];
  }
}

- (void)_handleTextWordMovement:(id)movement
{
  command = [movement command];
  v5 = [command isEqualToString:kVOTEventCommandFirstWord];

  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    value = [_currentElement value];
    v7 = value;
    if (v5)
    {
      v8 = 0;
      v9 = 1;
    }

    else
    {
      v8 = [value length];
      v9 = 2;
    }

    [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:{objc_msgSend(VOTSharedWorkspace, "suppressSelectionChangeNotificationCount") + 1}];
    [(VOTElementManager *)self _setSelectedTextRange:v8 onElement:0 refreshBraille:_currentElement, 1];
    v11 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent InsertionPointDidMove];
    [v11 sendEvent:v12];

    v13 = [v7 wordFromPosition:v8 inDirection:v9];
    if (v13 == 0x7FFFFFFFFFFFFFFFLL || (v15 = v13, v16 = v14, &v13[v14] > [v7 length]))
    {
      v10 = 0;
    }

    else
    {
      v10 = [v7 substringWithRange:{v15, v16}];
    }

    if ([v10 length])
    {
      v17 = +[VOTOutputRequest createRequest];
      language = [_currentElement language];
      v19 = [v17 addString:v10 withLanguage:language];

      [(VOTElementManager *)self sendRequest:v17];
    }

    else
    {
      v17 = +[VOTOutputManager outputManager];
      v20 = +[VOSOutputEvent BoundaryEncountered];
      [v17 sendEvent:v20];
    }
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v10];
  }
}

- (void)_handleGenericTextSegmentMovement:(id)movement direction:(int64_t)direction granulary:(int64_t)granulary
{
  movementCopy = movement;
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement isEqual:self->_firstResponderElement])
  {
    objc_storeStrong(&self->_firstResponderElement, _currentElement);
  }

  [(VOTElementManager *)self setInTextSelection:0];
  if ([_currentElement doesHaveTraits:kAXWebContentTrait])
  {
    if (granulary == 3)
    {
      [(VOTElementManager *)self _handleLineMovementInWeb:movementCopy direction:direction existingRequest:0];
      goto LABEL_14;
    }
  }

  else if ([_currentElement isReadingContent])
  {
    [(VOTElementManager *)self _handleBookContentMovement:_currentElement direction:direction unit:granulary generateOutput:1];
    goto LABEL_14;
  }

  if ([_currentElement doesHaveTraits:kAXKeyboardKeyTrait])
  {
    firstResponderElement = [(VOTElement *)self->_lastApplication firstResponderElement];

    _currentElement = firstResponderElement;
  }

  if ([_currentElement doesHaveTraits:kAXTextEntryTrait] && objc_msgSend(_currentElement, "doesHaveTraits:", kAXIsEditingTrait))
  {
    [(VOTElementManager *)self _moveCursorForElement:_currentElement direction:direction unit:granulary];
  }

  else
  {
    [(VOTElementManager *)self _outputNextTextSegmentUnit:granulary direction:direction];
  }

LABEL_14:
}

- (void)_handleRowMovement:(id)movement direction:(int64_t)direction
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  rowRange = [_currentElement rowRange];
  v9 = v8;
  columnRange = [_currentElement columnRange];
  [(VOTElementManager *)self setInTextSelection:0];
  v11 = &rowRange[v9];
  if (direction != 1)
  {
    v11 = rowRange;
  }

  if (direction == 2)
  {
    v12 = rowRange - 1;
  }

  else
  {
    v12 = v11;
  }

  v13 = [_currentElement elementAtRow:v12 andColumn:columnRange];
  if ([v13 isEqual:_currentElement] || !v13)
  {
    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];
  }

  else
  {
    v14 = [objc_allocWithZone(VOTOutputRequest) init];
    [(VOTElementManager *)self _prepareElementOutputHeaders:v13 currentElement:_currentElement request:v14];
    [(VOTElementManager *)self _addDescription:v13 toRequest:v14 withOptions:2097154];
    [(VOTElementManager *)self sendRequest:v14];
    [(VOTElementManager *)self _setCurrentElement:v13];
    v15 = sub_100052438(direction);
    v18[0] = _NSConcreteStackBlock;
    v18[1] = 3221225472;
    v18[2] = sub_100076EF4;
    v18[3] = &unk_1001C7778;
    v18[4] = self;
    v19 = v13;
    [v19 scrollToElementForDirectional:v15 withCompletion:v18];
  }
}

- (id)_retrieveCurrentCharacterFromEditableElement
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXIsEditingTrait]&& self->_elementSelectionRangeBufferInternal.location != 0x7FFFFFFF)
  {
    value = [(VOTElement *)self->_currentElement value];
    location = self->_elementSelectionRangeBufferInternal.location;
    if (location >= [value length])
    {
      v3 = 0;
    }

    else
    {
      v6 = +[TTSEmojiUtilities emojiRangeFromString:withSearchRange:](TTSEmojiUtilities, "emojiRangeFromString:withSearchRange:", value, self->_elementSelectionRangeBufferInternal.location, [value length] - self->_elementSelectionRangeBufferInternal.location);
      if (v6 != self->_elementSelectionRangeBufferInternal.location)
      {
        v6 = [value rangeOfComposedCharacterSequenceAtIndex:?];
      }

      v3 = [value substringWithRange:{v6, v7}];
    }
  }

  else
  {
    v3 = 0;
  }

  return v3;
}

- (void)_handleOutputCharacter:(id)character
{
  _retrieveCurrentCharacterFromEditableElement = [(VOTElementManager *)self _retrieveCurrentCharacterFromEditableElement];
  if ([_retrieveCurrentCharacterFromEditableElement length])
  {
    v3 = +[VOTOutputRequest createRequest];
    [v3 setGeneratesBraille:1];
    [v3 setBrailleType:2];
    v4 = [v3 addString:_retrieveCurrentCharacterFromEditableElement];
    [v3 send];
  }

  else
  {
    v3 = +[VOTOutputManager outputManager];
    v5 = +[VOSOutputEvent BoundaryEncountered];
    [v3 sendEvent:v5];
  }
}

- (void)_handleOutputColumnOrRowContents:(id)contents row:(BOOL)row
{
  rowCopy = row;
  contentsCopy = contents;
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    columnRange = [(VOTElement *)self->_currentElement columnRange];
    columnCount = [(VOTElement *)self->_currentElement columnCount];
    rowRange = [(VOTElement *)self->_currentElement rowRange];
    rowCount = [(VOTElement *)self->_currentElement rowCount];
    v10 = +[VOTOutputRequest createRequest];
    v20 = columnRange;
    v11 = rowRange;
    if (rowCopy)
    {
      rowRange = columnRange;
      v12 = columnCount;
    }

    else
    {
      v12 = rowCount;
    }

    if (rowRange >= v12)
    {
      v13 = 0;
    }

    else
    {
      v13 = 0;
      if (rowCopy)
      {
        v14 = 402669568;
      }

      else
      {
        v14 = 335560704;
      }

      do
      {
        if (rowCopy)
        {
          v15 = v11;
          v16 = rowRange;
        }

        else
        {
          v15 = rowRange;
          v16 = v20;
        }

        v17 = [(VOTElement *)self->_currentElement elementAtRow:v15 andColumn:v16];
        if (([v17 isEqual:v13] & 1) == 0)
        {
          [v17 addTextualInformationToRequest:v10 options:v14 dataPackage:0];
          v18 = v17;

          v13 = v18;
        }

        ++rowRange;
      }

      while (v12 != rowRange);
    }

    [v10 setGeneratesBraille:1];
    [v10 setBrailleType:2];
    [v10 send];
  }

  else
  {
    v10 = +[VOTOutputManager outputManager];
    v13 = +[VOSOutputEvent BoundaryEncountered];
    [v10 sendEvent:v13];
  }
}

- (void)_handleOutputCellRowColumnInfo:(id)info
{
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    v7 = +[VOTOutputRequest createRequest];
    currentElement = self->_currentElement;
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    [(VOTElement *)currentElement announceTableInfo:v7 options:0 language:selectedLanguage];

    [v7 setGeneratesBraille:1];
    [v7 setBrailleType:2];
    [v7 send];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v6 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v6];
  }
}

- (void)_handleOutputTableRowColumnInfo:(id)info
{
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    v7 = +[VOTOutputRequest createRequest];
    currentElement = self->_currentElement;
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    [(VOTElement *)currentElement applyTableDimension:v7 language:selectedLanguage];

    [v7 setGeneratesBraille:1];
    [v7 setBrailleType:2];
    [v7 send];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v6 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v6];
  }
}

- (void)_handleOutputColumnOrRowHeader:(id)header row:(BOOL)row
{
  rowCopy = row;
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    currentElement = self->_currentElement;
    if (rowCopy)
    {
      [(VOTElement *)currentElement headerElementsForRow:[(VOTElement *)currentElement rowRange]];
    }

    else
    {
      [(VOTElement *)currentElement headerElementsForColumn:[(VOTElement *)currentElement columnRange]];
    }
    v8 = ;
    v9 = +[VOTOutputRequest createRequest];
    v16 = 0u;
    v17 = 0u;
    v18 = 0u;
    v19 = 0u;
    v10 = v8;
    v11 = [v10 countByEnumeratingWithState:&v16 objects:v20 count:16];
    if (v11)
    {
      v12 = v11;
      v13 = *v17;
      do
      {
        for (i = 0; i != v12; i = i + 1)
        {
          if (*v17 != v13)
          {
            objc_enumerationMutation(v10);
          }

          [*(*(&v16 + 1) + 8 * i) addTextualInformationToRequest:v9 options:268451840 dataPackage:0];
        }

        v12 = [v10 countByEnumeratingWithState:&v16 objects:v20 count:16];
      }

      while (v12);
    }

    [v9 setGeneratesBraille:1];
    [v9 setBrailleType:2];
    [v9 send];
  }

  else
  {
    v15 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [v15 sendEvent:v7];
  }
}

- (void)_handleOutputCharacterPhonetically:(id)phonetically
{
  _retrieveCurrentCharacterFromEditableElement = [(VOTElementManager *)self _retrieveCurrentCharacterFromEditableElement];
  if ([_retrieveCurrentCharacterFromEditableElement length])
  {
    language = [(VOTElement *)self->_currentElement language];
    v5 = [(VOTElementManager *)self _phoneticStringForLetter:_retrieveCurrentCharacterFromEditableElement language:language];

    if (![v5 length])
    {
      v6 = _retrieveCurrentCharacterFromEditableElement;

      v5 = v6;
    }

    v7 = +[VOTOutputRequest createRequest];
    [v7 setGeneratesBraille:1];
    [v7 setBrailleType:2];
    v8 = [v7 addString:v5];
    [v7 send];
  }

  else
  {
    v5 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [v5 sendEvent:v7];
  }
}

- (void)_outputNextTextSegmentUnit:(int64_t)unit direction:(int64_t)direction
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  textInputElement = [_currentElement textInputElement];
  if (textInputElement)
  {
    if (self->_elementUnitIndex == -1)
    {
      textInputElementRange = [_currentElement textInputElementRange];
      if (textInputElementRange != 0x7FFFFFFF)
      {
        self->_elementUnitIndex = textInputElementRange;
      }
    }

    v10 = textInputElement;

    _currentElement = v10;
  }

  visibleText = [_currentElement visibleText];
  v12 = [visibleText mutableCopy];

  v13 = [(VOTElementManager *)self outputRangeForTextSegmentUnit:unit direction:direction string:v12 element:_currentElement];
  v15 = v14;
  if (v13 != 0x7FFFFFFF || ![(VOTElementManager *)self _handleMovementForElementFollowingElement:_currentElement direction:direction unit:unit mode:3])
  {
    -[VOTElementManager updateIndexesForOutputRange:segment:direction:outputStringLength:](self, "updateIndexesForOutputRange:segment:direction:outputStringLength:", v13, v15, unit, direction, [v12 length]);
    [(VOTElementManager *)self outputTextSegmentForRange:v13 string:v15 element:v12 usePhonetics:_currentElement segment:unit == 1, unit];
    if ((TTSisSpeakableEmojiString() & 1) != 0 || [v12 length] == 1)
    {
      v16 = +[VOTWorkspace sharedWorkspace];
      visionEngine = [v16 visionEngine];
      [visionEngine processStringFor2DBrailleDisplay:v12];
    }

    if (_currentElement)
    {
      if (([_currentElement doesHaveTraits:kAXTextAreaTrait] & 1) != 0 || objc_msgSend(_currentElement, "doesHaveTraits:", kAXWebContentTrait))
      {
        location = self->_elementUnitOutputRange.location;
        if (location != 0x7FFFFFFF)
        {
          length = self->_elementUnitOutputRange.length;
          v20 = +[VOTElement systemWideElement];
          [_currentElement boundsForRange:{location, length + 1}];
          [v20 convertRect:objc_msgSend(_currentElement fromContextId:{"windowContextId"), v21, v22, v23, v24}];
          self->_lineFrame.origin.x = v25;
          self->_lineFrame.origin.y = v26;
          self->_lineFrame.size.width = v27;
          self->_lineFrame.size.height = v28;

          if (unit != 1)
          {
            [(VOTElementManager *)self _outputDataDetectorIfPresent:_currentElement element:1 includeLinks:self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height];
          }

          v51.origin.x = CGRectZero.origin.x;
          v51.origin.y = CGRectZero.origin.y;
          v51.size.width = CGRectZero.size.width;
          v51.size.height = CGRectZero.size.height;
          if (!CGRectEqualToRect(self->_lineFrame, v51))
          {
            v49[0] = _NSConcreteStackBlock;
            v49[1] = 3221225472;
            v49[2] = sub_100077BC8;
            v49[3] = &unk_1001C7778;
            v49[4] = self;
            v50 = _currentElement;
            [v50 scrollRectToVisible:v49 withCompletion:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];
          }
        }
      }

      else
      {
        identifier = [_currentElement identifier];
        v30 = [identifier isEqualToString:@"VOTImageExplorerTextElement"];

        if (v30)
        {
          [_currentElement boundsForRange:{v13, v15}];
          v32 = v31;
          v34 = v33;
          v36 = v35;
          v38 = v37;
          v39 = +[VOTElement systemWideElement];
          [v39 convertRect:objc_msgSend(_currentElement fromContextId:{"windowContextId"), v32, v34, v36, v38}];
          v41 = v40;
          v43 = v42;
          v45 = v44;
          v47 = v46;

          v48 = +[VOTDisplayManager displayManager];
          [v48 setCursorFrame:{v41, v43, v45, v47}];
        }

        else
        {
          v48 = +[VOTDisplayManager displayManager];
          [v48 setCursorFrameForElement:_currentElement];
        }
      }
    }
  }
}

- (void)_handleWebSelection:(id)selection
{
  selectionCopy = selection;
  _currentElement = [(VOTElementManager *)self _currentElement];
  command = [selectionCopy command];

  v6 = [command isEqualToString:kVOTEventCommandSelectRight];
  if (self->_inTextProcessingRotorMode)
  {
    textSelectionMovementManager = [(VOTElementManager *)self textSelectionMovementManager];
    segment = [textSelectionMovementManager segment];
  }

  else
  {
    currentRotorType = [(VOTRotor *)self->_elementRotor currentRotorType];
    v10 = 1;
    if (currentRotorType == 4)
    {
      v10 = 2;
    }

    if (currentRotorType == 5)
    {
      segment = 3;
    }

    else
    {
      segment = v10;
    }
  }

  if (![(NSString *)self->_webSelectionText length])
  {
    if (self->_textMarker)
    {
      startMarker = [(_VOTTextMarkerRange *)self->_textMarkerRange startMarker];
      goto LABEL_16;
    }

    if (self->_elementUnitIndex == 0x7FFFFFFFFFFFFFFFLL || [(NSString *)self->_webSelectionText length])
    {
      startMarker = 0;
      goto LABEL_16;
    }

    if ([(NSArray *)self->_lineArray count]== 2)
    {
      startMarker = [(NSArray *)self->_lineArray objectAtIndex:0];
      if (!self->_elementUnitOutputRange.length)
      {
        goto LABEL_16;
      }

      pageTextMarkerRange = [_currentElement pageTextMarkerRange];
      if ([pageTextMarkerRange count])
      {
        v14 = [pageTextMarkerRange objectAtIndex:0];
        v15 = [_currentElement rangeForTextMarker:v14];

        v16 = [_currentElement textMarkersForRange:{&v15[self->_elementUnitOutputRange.location], self->_elementUnitOutputRange.length}];
        if ([v16 count] == 2)
        {
          v17 = [v16 objectAtIndex:0];

          startMarker = v17;
        }
      }
    }

    else
    {
      pageTextMarkerRange = [_currentElement textMarkersForRange:{self->_elementUnitOutputRange.location, self->_elementUnitOutputRange.length}];
      startMarker = [pageTextMarkerRange objectAtIndex:0];
    }

LABEL_16:
    [_currentElement setSelectionToTextMarker:startMarker];

    if (v6)
    {
      goto LABEL_10;
    }

    goto LABEL_17;
  }

  if (v6)
  {
LABEL_10:
    [_currentElement increaseWebSelection:segment];
    goto LABEL_18;
  }

LABEL_17:
  [_currentElement decreaseWebSelection:segment];
LABEL_18:
  remoteParent = [_currentElement remoteParent];
  [remoteParent increaseWebSelection:segment];
  self->_flags.shouldUpdateRotorForElement = 1;
}

- (void)_handleTextRotorSelectionAction:(BOOL)action
{
  v4 = &kVOTEventCommandSelectLeft;
  if (action)
  {
    v4 = &kVOTEventCommandSelectRight;
  }

  v5 = [VOTEvent internalEventWithCommand:*v4 info:0];
  [(VOTElementManager *)self _handleUserSelection:v5];
}

- (void)_processMisspelledWordTextReplacement
{
  application = [(VOTElement *)self->_currentElement application];
  textReplacements = [application textReplacements];

  misspelledWordReplacementCycleIndex = self->_misspelledWordReplacementCycleIndex;
  v5 = misspelledWordReplacementCycleIndex >= [textReplacements count];
  v6 = textReplacements;
  if (v5)
  {
    goto LABEL_13;
  }

  v7 = [textReplacements objectAtIndexedSubscript:self->_misspelledWordReplacementCycleIndex];
  v8 = self->_currentElement;
  if ([(VOTElement *)v8 doesHaveTraits:kAXKeyboardKeyTrait])
  {
    textInputElement = [(VOTElement *)v8 textInputElement];
    if (textInputElement)
    {
      firstResponderElement = textInputElement;
LABEL_6:
      v12 = firstResponderElement;

      v8 = v12;
      goto LABEL_7;
    }

    application2 = [(VOTElement *)v8 application];
    firstResponderElement = [application2 firstResponderElement];

    if (firstResponderElement)
    {
      goto LABEL_6;
    }
  }

LABEL_7:
  if ([(VOTElement *)v8 doesHaveTraits:kAXWebContentTrait])
  {
    v13 = [v7 stringByAppendingString:@" "];

    v7 = v13;
  }

  selectedTextRange = [(VOTElement *)v8 selectedTextRange];
  v16 = [(VOTElement *)v8 replaceTextInRange:selectedTextRange withString:v15, v7];
  v17 = +[VOTOutputManager outputManager];
  if (v16)
  {
    +[VOSOutputEvent DidActivateElement];
  }

  else
  {
    +[VOSOutputEvent BoundaryEncountered];
  }
  v18 = ;
  [v17 sendEvent:v18];

  v6 = textReplacements;
LABEL_13:
  self->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
}

- (void)_handleMisspelledWordRotorAction:(BOOL)action
{
  actionCopy = action;
  application = [(VOTElement *)self->_currentElement application];
  textReplacements = [application textReplacements];

  if ([textReplacements count])
  {
    misspelledWordReplacementCycleIndex = self->_misspelledWordReplacementCycleIndex;
    if (misspelledWordReplacementCycleIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      v7 = textReplacements;
      if (actionCopy)
      {
        v8 = 0;
        self->_misspelledWordReplacementCycleIndex = 0;
        goto LABEL_11;
      }

      v8 = [textReplacements count] - 1;
    }

    else if (actionCopy)
    {
      v8 = misspelledWordReplacementCycleIndex + 1;
    }

    else
    {
      v8 = misspelledWordReplacementCycleIndex - 1;
    }

    v7 = textReplacements;
    self->_misspelledWordReplacementCycleIndex = v8;
    if ((v8 & 0x8000000000000000) != 0)
    {
      self->_misspelledWordReplacementCycleIndex = [textReplacements count] - 1;
      v15 = +[VOTOutputManager outputManager];
      v16 = +[VOSOutputEvent DidWrapBackwards];
      goto LABEL_14;
    }

LABEL_11:
    if (v8 < [v7 count])
    {
LABEL_15:
      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v19 = selectedLanguage;
      if (selectedLanguage)
      {
        currentSoftwareKeyboardLanguage = selectedLanguage;
      }

      else
      {
        application2 = [(VOTElement *)self->_currentElement application];
        currentSoftwareKeyboardLanguage = [application2 currentSoftwareKeyboardLanguage];
      }

      v14 = [objc_allocWithZone(VOTOutputRequest) init];
      v21 = [textReplacements objectAtIndexedSubscript:self->_misspelledWordReplacementCycleIndex];
      v22 = [v14 addString:v21 withLanguage:currentSoftwareKeyboardLanguage];

      lastAction = [v14 lastAction];
      [lastAction setObject:kCFBooleanTrue forVariant:50];

      [v14 setGeneratesBraille:1];
      [(VOTElementManager *)self sendRequest:v14];
      goto LABEL_19;
    }

    self->_misspelledWordReplacementCycleIndex = 0;
    v15 = +[VOTOutputManager outputManager];
    v16 = +[VOSOutputEvent DidWrapForwards];
LABEL_14:
    v17 = v16;
    [v15 sendEvent:v16];

    goto LABEL_15;
  }

  v9 = +[VOTOutputManager outputManager];
  v10 = off_1001FDDD0;
  selectedLanguage2 = [VOTSharedWorkspace selectedLanguage];
  v12 = sub_1000516CC(v10, @"no.text.replacements", 0, selectedLanguage2);
  [v9 speakSimpleString:v12];

  currentSoftwareKeyboardLanguage = +[VOTOutputManager outputManager];
  v14 = +[VOSOutputEvent BoundaryEncountered];
  [currentSoftwareKeyboardLanguage sendEvent:v14];
LABEL_19:
}

- (void)_handleStartStopTextSelection:(id)selection
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXTextEntryTrait])
  {
    if (self->_flags.inKeyboardTextSelectionMode)
    {
      selectedTextRange = [(VOTElement *)self->_currentElement selectedTextRange];
      location = self->_keyboardTextSelectionStartRange.location;
      if (selectedTextRange >= location)
      {
        v7 = self->_keyboardTextSelectionStartRange.location;
      }

      else
      {
        v7 = selectedTextRange;
      }

      v8 = self->_keyboardTextSelectionStartRange.length + location;
      if (selectedTextRange + v5 > v8)
      {
        v8 = selectedTextRange + v5;
      }

      [(VOTElement *)self->_currentElement setSelectedTextRange:v7 refreshBraille:v8 - v7, 1];
      v9 = 0;
    }

    else
    {
      self->_keyboardTextSelectionStartRange.location = [(VOTElement *)self->_currentElement selectedTextRange];
      self->_keyboardTextSelectionStartRange.length = v11;
      v9 = 1;
    }

    self->_flags.inKeyboardTextSelectionMode = v9;
  }

  else
  {
    v12 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v12 sendEvent:v10];
  }
}

- (void)_updateCursorFrameAfterLift
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (!self->_textRangeBeingDisplayed)
  {
    v3 = +[VOTDisplayManager displayManager];
    [v3 setCursorFrameForElement:self->_currentElement];
  }
}

- (void)_handleUserSelection:(id)selection
{
  selectionCopy = selection;
  selectingRightward = self->_selectingRightward;
  command = [selectionCopy command];
  v7 = [command isEqualToString:kVOTEventCommandSelectRight];

  v8 = 1;
  if (!v7)
  {
    v8 = 2;
  }

  self->_lastUserTextSelectionDirection = v8;
  _currentResponder = [(VOTElementManager *)self _currentResponder];
  v10 = [_currentResponder doesHaveTraits:kAXIsEditingTrait];
  if ((v10 & 1) == 0)
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    if ([_currentElement doesHaveTraits:kAXWebContentTrait])
    {
      [(VOTElementManager *)self _handleWebSelection:selectionCopy];
      goto LABEL_60;
    }
  }

  LODWORD(v42) = selectingRightward;
  currentRotorType = [(VOTRotor *)self->_elementRotor currentRotorType];
  _currentElement = [_currentResponder value];
  selectedTextRange = [_currentResponder selectedTextRange];
  v15 = v14;
  if (v14)
  {
    v16 = 1;
  }

  else
  {
    v16 = v10;
  }

  if ((v16 & 1) == 0)
  {
    p_highlightedCharacterRange = &self->_highlightedCharacterRange;
    location = self->_highlightedCharacterRange.location;
    if (location == 0x7FFFFFFF || location >= [_currentElement length])
    {
      v19 = self->_elementUnitOutputRange.location;
      if (v19 == 0x7FFFFFFF || v19 >= [_currentElement length])
      {
        goto LABEL_17;
      }

      p_highlightedCharacterRange = &self->_elementUnitOutputRange;
    }

    selectedTextRange = p_highlightedCharacterRange->location;
  }

LABEL_17:
  v20 = VOTLogElement();
  if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
  {
    sub_10012AE44();
  }

  if (!v15)
  {
    self->_selectedTextStartLocation = selectedTextRange;
    self->_inTextSelection = 1;
    self->_selectingRightward = v7;
  }

  v21 = VOTLogElement();
  if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
  {
    sub_10012AEAC();
  }

  if ([_currentElement isAXAttributedString] && objc_msgSend(_currentElement, "hasAttribute:", UIAccessibilityTokenPlaceholder))
  {
    v22 = +[VOTOutputManager outputManager];
    v23 = +[VOSOutputEvent BoundaryEncountered];
    [v22 sendEvent:v23];
  }

  else
  {
    v45 = selectedTextRange;
    textSelectionMovementManager = [(VOTElementManager *)self textSelectionMovementManager];
    segment = [textSelectionMovementManager segment];

    v26 = [selectionCopy objectForIndex:118];
    v22 = v26;
    if (v26)
    {
      segment = [v26 integerValue];
    }

    v27 = VOTLogElement();
    if (os_log_type_enabled(v27, OS_LOG_TYPE_DEBUG))
    {
      v41 = self->_selectingRightward;
      *buf = 134218752;
      v47 = currentRotorType;
      v48 = 2048;
      v49 = segment;
      v50 = 1024;
      v51 = v7;
      v52 = 1024;
      v53 = v41;
      _os_log_debug_impl(&_mh_execute_header, v27, OS_LOG_TYPE_DEBUG, "dispatching selection change: rotor:%ld, textSelectionRotor:%ld, rightward:%d, selectingRightward:%d)", buf, 0x22u);
    }

    if (currentRotorType == 4 || segment == 2)
    {
      v28 = [(VOTElementManager *)self _handleUserWordSelectionInElement:_currentResponder currentRange:v45 rightward:v15, v7];
    }

    else if (currentRotorType == 5 || segment == 3)
    {
      v28 = [(VOTElementManager *)self _handleUserLineSelectionInElement:_currentResponder currentRange:v45 rightward:v15, v7];
    }

    else if (segment == 7)
    {
      v28 = [(VOTElementManager *)self _handleUserAllSelection:v45 inString:v15 rightward:_currentElement, v7];
    }

    else if (segment == 4)
    {
      v28 = [(VOTElementManager *)self _handleUserPageSelection:v45 inString:v15 rightward:_currentElement, v7];
    }

    else
    {
      v28 = [(VOTElementManager *)self _handleUserCharacterSelection:v45 inString:v15 rightward:_currentElement, v7];
    }

    v30 = v28;
    v31 = v29;
    v32 = VOTLogElement();
    if (os_log_type_enabled(v32, OS_LOG_TYPE_DEBUG))
    {
      sub_10012AF20();
    }

    if (v15 == v31 || (v30 & 0x8000000000000000) != 0 || v30 + v31 > [_currentElement length])
    {
      currentSoftwareKeyboardLanguage = +[VOTOutputManager outputManager];
      v34 = +[VOSOutputEvent BoundaryEncountered];
      [currentSoftwareKeyboardLanguage sendEvent:v34];
    }

    else
    {
      v35 = VOTLogElement();
      if (os_log_type_enabled(v35, OS_LOG_TYPE_DEBUG))
      {
        sub_10012AF88();
      }

      [(VOTElementManager *)self _setSelectedTextRange:v30 onElement:v31 refreshBraille:_currentResponder, 1];
      if (v43 == self->_selectingRightward || !self->_inTextSelection)
      {
        v36 = +[VOTOutputManager outputManager];
        v37 = +[VOSOutputEvent InsertionPointDidMove];
      }

      else
      {
        v36 = +[VOTOutputManager outputManager];
        v37 = +[VOSOutputEvent DidChangeTextSelectionDirection];
      }

      v38 = v37;
      [v36 sendEvent:v37];

      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v40 = selectedLanguage;
      if (selectedLanguage)
      {
        currentSoftwareKeyboardLanguage = selectedLanguage;
      }

      else
      {
        application = [_currentResponder application];
        currentSoftwareKeyboardLanguage = [application currentSoftwareKeyboardLanguage];
      }

      [(VOTElementManager *)self _outputSelectionDifference:v30 oldRange:v31 string:v45 language:v15, _currentElement, currentSoftwareKeyboardLanguage];
      [(VOTElementManager *)self _updateCurrentElementForTextInputSelectionChangeIfNeeded];
    }

    v23 = VOTLogElement();
    if (os_log_type_enabled(v23, OS_LOG_TYPE_DEBUG))
    {
      sub_10012AFF0();
    }
  }

LABEL_60:
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserWordSelectionInElement:(id)element currentRange:(id)range rightward:(BOOL)rightward
{
  rightwardCopy = rightward;
  var1 = range.var1;
  var0 = range.var0;
  v9 = range.var0 + range.var1;
  if (self->_selectingRightward)
  {
    v10 = range.var0 + range.var1;
  }

  else
  {
    v10 = range.var0;
  }

  if (rightward)
  {
    v11 = 1;
  }

  else
  {
    v11 = 2;
  }

  value = [element value];
  v13 = [value wordFromPosition:v10 inDirection:v11];
  v15 = v14;
  v16 = VOTLogElement();
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEBUG))
  {
    if (v13 == 0x7FFFFFFF)
    {
      v21 = @"<NOT FOUND>";
    }

    else
    {
      v21 = [value substringWithRange:{v13, v15}];
    }

    v22 = 134218499;
    v23 = v13;
    v24 = 2048;
    v25 = v15;
    v26 = 2113;
    v27 = v21;
    _os_log_debug_impl(&_mh_execute_header, v16, OS_LOG_TYPE_DEBUG, "word range: %lu, %lu (%{private}@)", &v22, 0x20u);
    if (v13 != 0x7FFFFFFF)
    {
    }
  }

  if (v13 != 0x7FFFFFFF)
  {
    if (self->_selectingRightward)
    {
      if (rightwardCopy)
      {
        var1 = &v13[v15 - var0];
      }

      else
      {
        var1 = &v13[-var0] & ~(&v13[-var0] >> 63);
      }
    }

    else
    {
      v17 = &v13[v15];
      v18 = (v9 - &v13[v15]) & ~((v9 - &v13[v15]) >> 63);
      if (v9 <= v13)
      {
        v17 = v13;
        v18 = 0;
      }

      if (rightwardCopy)
      {
        var0 = v17;
      }

      else
      {
        var0 = v13;
      }

      if (rightwardCopy)
      {
        var1 = v18;
      }

      else
      {
        var1 = v9 - v13;
      }
    }
  }

  v19 = var0;
  v20 = var1;
  result.var1 = v20;
  result.var0 = v19;
  return result;
}

- (_NSRange)_lineRangeWithFaultTolerance:(int64_t)tolerance forward:(BOOL)forward element:(id)element
{
  forwardCopy = forward;
  v8 = 0;
  v9 = -1;
  do
  {
    if (forwardCopy)
    {
      v10 = v8 + 1;
    }

    else
    {
      v10 = v9;
    }

    tolerance = [element lineRangeForPosition:v10 + tolerance];
    if (v8 > 1)
    {
      break;
    }

    ++v8;
    --v9;
  }

  while (tolerance == 0x7FFFFFFF);
  result.length = v12;
  result.location = tolerance;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserLineSelectionInElement:(id)element currentRange:(id)range rightward:(BOOL)rightward
{
  rightwardCopy = rightward;
  var1 = range.var1;
  var0 = range.var0;
  elementCopy = element;
  v10 = (var0 + var1);
  if (self->_selectingRightward)
  {
    v11 = var0 + var1;
  }

  else
  {
    v11 = var0;
  }

  v12 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:v11 forward:rightwardCopy element:elementCopy];
  v14 = v13;
  v15 = VOTLogElement();
  if (os_log_type_enabled(v15, OS_LOG_TYPE_DEBUG))
  {
    v26.location = v12;
    v26.length = v14;
    sub_10012B02C(v26);
  }

  if (v12 != 0x7FFFFFFF)
  {
    if (self->_selectingRightward)
    {
      if (rightwardCopy)
      {
        if (v10 == &v12[v14])
        {
          v18 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 + var1 forward:1 element:elementCopy];
          if (v18 != 0x7FFFFFFF)
          {
            v14 = v19;
            v12 = v18;
          }
        }

        var1 = &v12[v14 - var0];
      }

      else
      {
        if (v12 == v10)
        {
          if (!v10 || (v12 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 + var1 forward:0 element:elementCopy], v12 == 0x7FFFFFFF))
          {
            v12 = (var0 + var1);
          }
        }

        if (v12 <= var0)
        {
          var1 &= var1 >> 63;
        }

        else
        {
          var1 = &v12[-var0];
        }
      }

      goto LABEL_7;
    }

    if (rightwardCopy)
    {
      v20 = &v12[v14];
      if (&v12[v14] == var0)
      {
        v21 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 + 1 forward:1 element:elementCopy];
        if (v21 == 0x7FFFFFFF)
        {
          v23 = v14;
        }

        else
        {
          v23 = v22;
        }

        if (v21 == 0x7FFFFFFF)
        {
          v24 = v12;
        }

        else
        {
          v24 = v21;
        }

        v20 = &v24[v23];
      }

      if (v10 >= v20)
      {
        var0 = v20;
      }

      else
      {
        var0 += var1;
      }

      if (v10 >= v20)
      {
        var1 = v10 - v20;
      }

      else
      {
        var1 = 0;
      }

      goto LABEL_7;
    }

    if (v12 != var0)
    {
      goto LABEL_38;
    }

    if (var0 < 1)
    {
      v25 = var0;
    }

    else
    {
      v12 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 forward:0 element:elementCopy];
      v25 = var0;
      if (v12 != 0x7FFFFFFF)
      {
LABEL_38:
        if (var0 > v12)
        {
          var1 = v10 - v12;
          var0 = v12;
          goto LABEL_7;
        }

        v25 = v12;
      }
    }

    if (var0 > 0)
    {
      var0 = v25;
      var1 = 0;
    }
  }

LABEL_7:

  v16 = var0;
  v17 = var1;
  result.var1 = v17;
  result.var0 = v16;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserPageSelection:(id)selection inString:(id)string rightward:(BOOL)rightward
{
  rightwardCopy = rightward;
  var1 = selection.var1;
  var0 = selection.var0;
  stringCopy = string;
  v10 = stringCopy;
  if (self->_selectingRightward)
  {
    if (rightwardCopy)
    {
      if (&var1[var0] < [stringCopy length])
      {
        var1 = [v10 length] - var0;
      }
    }

    else
    {
      var1 = 0;
    }
  }

  else
  {
    if (var0 <= 0)
    {
      v11 = var1;
    }

    else
    {
      v11 = var0;
    }

    if (rightwardCopy)
    {
      var0 = var1;
    }

    else
    {
      var0 &= var0 >> 63;
    }

    if (rightwardCopy)
    {
      var1 = 0;
    }

    else
    {
      var1 = v11;
    }
  }

  v12 = var0;
  v13 = var1;
  result.var1 = v13;
  result.var0 = v12;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserAllSelection:(id)selection inString:(id)string rightward:(BOOL)rightward
{
  rightwardCopy = rightward;
  var1 = selection.var1;
  var0 = selection.var0;
  stringCopy = string;
  v9 = stringCopy;
  if (rightwardCopy)
  {
    var1 = [stringCopy length];
    var0 = 0;
  }

  else if (!var0 && var1 == [stringCopy length])
  {
    var1 = 0;
    var0 = 0;
  }

  v10 = var0;
  v11 = var1;
  result.var1 = v11;
  result.var0 = v10;
  return result;
}

- (_NSRange)_characterRangeWithFaultTolerance:(int64_t)tolerance forward:(BOOL)forward element:(id)element
{
  v13 = 0x7FFFFFFFLL;
  if (tolerance == 0x7FFFFFFF)
  {
    v14 = 0;
  }

  else
  {
    v26 = v10;
    v27 = v9;
    v28 = v8;
    v29 = v7;
    v30 = v6;
    v31 = v5;
    v32 = v11;
    v33 = v12;
    forwardCopy = forward;
    v18 = 0;
    v19 = 0;
    do
    {
      if (forwardCopy)
      {
        v20 = v19;
      }

      else
      {
        v20 = v18;
      }

      v21 = [element characterRangeForPosition:{v20 + tolerance, v26, v27, v28, v29, v30, v31, v32, v33}];
      v22 = v21 <= tolerance || forwardCopy;
      if (v21 >= tolerance)
      {
        v23 = v21;
      }

      else
      {
        v23 = 0x7FFFFFFFLL;
      }

      if (v22)
      {
        v24 = v21;
      }

      else
      {
        v24 = 0x7FFFFFFFLL;
      }

      if (forwardCopy)
      {
        v13 = v23;
      }

      else
      {
        v13 = v24;
      }

      v25 = v13 != 0x7FFFFFFF || v19++ >= 2;
      --v18;
    }

    while (!v25);
  }

  result.length = v14;
  result.location = v13;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserCharacterSelection:(id)selection inString:(id)string rightward:(BOOL)rightward
{
  rightwardCopy = rightward;
  var1 = selection.var1;
  var0 = selection.var0;
  stringCopy = string;
  v10 = stringCopy;
  if (var0 == 0x7FFFFFFFFFFFFFFFLL || var0 == 0x7FFFFFFF)
  {
    v11 = VOTLogCommon();
    if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
    {
      v31.location = var0;
      v31.length = var1;
      v24 = NSStringFromRange(v31);
      v25 = 138412802;
      v26 = v24;
      v27 = 2112;
      v28 = v10;
      v29 = 1024;
      v30 = rightwardCopy;
      _os_log_error_impl(&_mh_execute_header, v11, OS_LOG_TYPE_ERROR, "Invalid range passed into handle user selection: %@ > %@[%d]", &v25, 0x1Cu);
    }
  }

  else if (self->_selectingRightward)
  {
    v14 = var0 + var1;
    if (rightwardCopy)
    {
      if (v14 < [stringCopy length] && objc_msgSend(v10, "rangeOfComposedCharacterSequenceAtIndex:", var0 + var1) != 0x7FFFFFFFFFFFFFFFLL)
      {
        v16 = v15 + var1;
        if (v15 + var1 <= [v10 length])
        {
          var1 = v16;
        }
      }
    }

    else
    {
      v20 = [stringCopy length];
      if (v14 >= 1 && v14 - 1 < v20 && [v10 rangeOfComposedCharacterSequenceAtIndex:?] != 0x7FFFFFFFFFFFFFFFLL)
      {
        if (var1 < 1)
        {
          var0 -= v21;
          var1 = v21;
        }

        else
        {
          var1 -= v21;
        }
      }
    }
  }

  else if (rightwardCopy)
  {
    if (var0 < [stringCopy length])
    {
      v17 = [v10 rangeOfComposedCharacterSequenceAtIndex:var0];
      v19 = var1 - v18;
      if (var1 < v18)
      {
        v19 = 0;
      }

      if (v17 != 0x7FFFFFFFFFFFFFFFLL)
      {
        var0 += v18;
        var1 = v19;
      }
    }
  }

  else if (var0 >= 1)
  {
    if ([stringCopy rangeOfComposedCharacterSequenceAtIndex:var0 - 1] == 0x7FFFFFFFFFFFFFFFLL)
    {
      v23 = 0;
    }

    else
    {
      v23 = v22;
    }

    var0 -= v23;
    var1 += v23;
  }

  v12 = var0;
  v13 = var1;
  result.var1 = v13;
  result.var0 = v12;
  return result;
}

- (void)_handleZoomMovement:(int64_t)movement event:(id)event
{
  eventCopy = event;
  _currentElement = [(VOTElementManager *)self _currentElement];
  v7 = _currentElement;
  if (!_currentElement || ([(VOTElement *)_currentElement application], v8 = objc_claimAutoreleasedReturnValue(), v9 = [(VOTElement *)v7 isValidForApplication:v8], v8, (v9 & 1) == 0))
  {
    v10 = self->_touchContainer;

    v7 = v10;
  }

  if ([(VOTElement *)v7 mapFeatureType]|| [(VOTElement *)v7 doesHaveTraits:kAXWebContentTrait])
  {
    [(VOTElement *)v7 centerPoint];
    v12 = v11;
    v14 = v13;
  }

  else
  {
    v16 = [eventCopy objectForIndex:101];
    [v16 pointValue];
    v12 = v17;
    v14 = v18;
  }

  if (movement == 4)
  {
    [(VOTElement *)v7 zoomOutAtLocation:v12, v14];
  }

  else if (movement == 3)
  {
    [(VOTElement *)v7 zoomInAtLocation:v12, v14];
  }

  v15 = +[VOTDisplayManager displayManager];
  [v15 setCursorFrameForElement:v7];
}

- (void)_handleTrackingDetailMovement:(BOOL)movement event:(id)event
{
  movementCopy = movement;
  v10 = [(VOTElementManager *)self _currentElement:movement];
  if (!v10 || ([(VOTElement *)v10 application], v6 = objc_claimAutoreleasedReturnValue(), v7 = [(VOTElement *)v10 isValidForApplication:v6], v6, v8 = v10, (v7 & 1) == 0))
  {
    v9 = self->_touchContainer;

    v8 = v9;
  }

  v11 = v8;
  if (movementCopy)
  {
    [(VOTElement *)v8 increaseTrackingDetail];
  }

  else
  {
    [(VOTElement *)v8 decreaseTrackingDetail];
  }
}

- (void)_handleNavigationDirectionChangeWithDirection:(int64_t)direction
{
  v4 = [(VOTElementManager *)self _newNavigationDirectionModeForRotorDirection:direction];
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverNavigationDirectionMode:v4];

  [(VOTElementManager *)self _outputNavigationDirectionMode:v4];
  [(VOTElement *)self->_currentElement setNavigationDirectionMode:v4];
  remoteParent = [(VOTElement *)self->_currentElement remoteParent];
  if (remoteParent)
  {
    [remoteParent setNavigationDirectionMode:v4];
  }

  [(VOTElementFetcher *)self->_fetchManager forceUpdate];
}

- (void)_handleScribbleMovement:(BOOL)movement
{
  movementCopy = movement;
  lastSearchPoint = [(AXScribbleManager *)self->_safariScribbleManager lastSearchPoint];
  v6 = [(AXScribbleManager *)self->_safariScribbleManager nextSearchPoint:movementCopy];
  if (v6 == lastSearchPoint)
  {
    v7 = 0;
LABEL_7:
    v10 = +[VOTOutputManager outputManager];
    v11 = +[VOSOutputEvent NoResultsFound];
    goto LABEL_8;
  }

  v8 = v6;
  v7 = 0;
  while (1)
  {
    v9 = v7;
    v7 = [(VOTElement *)self->_currentElement scribbleAreaForSearchPoint:v8];

    if (v7)
    {
      if (([(AXScribbleManager *)self->_safariScribbleManager isUniqueElement:v7]& 1) != 0)
      {
        break;
      }
    }

    v8 = [(AXScribbleManager *)self->_safariScribbleManager nextSearchPoint:movementCopy];
    if (v8 == lastSearchPoint)
    {
      goto LABEL_7;
    }
  }

  [(AXScribbleManager *)self->_safariScribbleManager foundScribbleElement:v7 atSearchPoint:[(AXScribbleManager *)self->_safariScribbleManager lastSearchPoint]];
  if ([(AXScribbleManager *)self->_safariScribbleManager lastSearchPoint]!= lastSearchPoint)
  {
    v10 = +[VOTOutputManager outputManager];
    v11 = +[VOSOutputEvent DidWrapForwards];
LABEL_8:
    v12 = v11;
    [v10 sendEvent:v11];
  }

  v13 = +[AXHapticFeedbackManager sharedManager];
  [v13 playHapticFeedbackForType:12];

  if (v7)
  {
    objc_opt_class();
    renderedText = [v7 renderedText];
    v15 = __UIAccessibilityCastAsClass();

    v16 = off_1001FDDE0;
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    v18 = sub_1000511CC(v16, @"scribble.hidable.item", selectedLanguage);
    v19 = @"No Rendered Text";
    if (v15)
    {
      v19 = v15;
    }

    v24 = v19;
    v20 = __AXStringForVariables();
    [VOTOutputRequest sendRequestWithString:v20, v24, @"__AXStringForVariablesSentinel"];

    v21 = off_1001FDDE0;
    selectedLanguage2 = [VOTSharedWorkspace selectedLanguage];
    v23 = sub_1000511CC(v21, @"scribble.hide.hint", selectedLanguage2);
    [VOTOutputRequest sendRequestWithString:v23 shouldQueue:1];
  }

  else
  {
    v15 = VOTLogCommon();
    if (os_log_type_enabled(v15, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v15, OS_LOG_TYPE_DEFAULT, "[Scribble] no hidable areas found", buf, 2u);
    }
  }
}

- (int64_t)_newNavigationDirectionModeForRotorDirection:(int64_t)direction
{
  navigationDirection = [VOTSharedWorkspace navigationDirection];
  if (navigationDirection == 2)
  {
    return direction != 1;
  }

  if (navigationDirection == 1)
  {
    return 2 * (direction == 1);
  }

  v5 = 1;
  if (direction != 1)
  {
    return 2;
  }

  return v5;
}

- (id)_navigationDirectionModeString:(int64_t)string
{
  if (string > 2)
  {
    v3 = 0;
  }

  else
  {
    v3 = *(&off_1001CA470 + string);
  }

  v4 = off_1001FDDD0;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v6 = sub_1000516CC(v4, v3, 0, selectedLanguage);

  return v6;
}

- (void)_outputNavigationDirectionMode:(int64_t)mode
{
  v3 = [(VOTElementManager *)self _navigationDirectionModeString:mode];
  [VOTOutputRequest sendRequestWithString:v3];
}

- (void)_resetMathGranularMovementState
{
  elementMathSegments = self->_elementMathSegments;
  self->_elementMathSegments = 0;
  self->_elementMathSegmentGranularity = 0;

  self->_elementMathIndex = 0x7FFFFFFFFFFFFFFFLL;
}

- (unint64_t)_currentMathGranularityLevel
{
  currentRotorType = [(VOTRotor *)self->_elementRotor currentRotorType];
  if ((currentRotorType - 55) >= 4)
  {
    return 0;
  }

  else
  {
    return currentRotorType - 54;
  }
}

- (void)_refreshMathSegmentsIfNeededWithPreferredDirection:(int64_t)direction
{
  _currentMathGranularityLevel = [(VOTElementManager *)self _currentMathGranularityLevel];
  if (_currentMathGranularityLevel)
  {
    v6 = _currentMathGranularityLevel;
    if (self->_elementMathSegmentGranularity != _currentMathGranularityLevel)
    {
      self->_elementMathSegmentGranularity = _currentMathGranularityLevel;
      if (self->_elementMathIndex == 0x7FFFFFFFFFFFFFFFLL)
      {
        v7 = 0;
      }

      else
      {
        v8 = [(NSArray *)self->_elementMathSegments objectAtIndex:?];
        v9 = [v8 attributesAtIndex:0 effectiveRange:0];
        v7 = [v9 objectForKey:UIAccessibilityTokenMathTreePosition];
      }

      _currentElement = [(VOTElementManager *)self _currentElement];
      v11 = [_currentElement mathSegmentsWithGranularityLevel:v6];
      elementMathSegments = self->_elementMathSegments;
      self->_elementMathSegments = v11;

      if (v7)
      {
        v18 = 0;
        v19 = &v18;
        v20 = 0x2020000000;
        v21 = 0x7FFFFFFFFFFFFFFFLL;
        v13 = self->_elementMathSegments;
        v15[0] = _NSConcreteStackBlock;
        v15[1] = 3221225472;
        v15[2] = sub_100079CB0;
        v15[3] = &unk_1001C9A60;
        v15[4] = self;
        v16 = v7;
        v17 = &v18;
        [(NSArray *)v13 enumerateObjectsWithOptions:2 * (direction == 2) usingBlock:v15];
        v14 = v19[3];
        if (v14 == 0x7FFFFFFFFFFFFFFFLL)
        {
          _AXLogWithFacility();
          v14 = 0;
          v19[3] = 0;
        }

        self->_elementMathIndex = v14;

        _Block_object_dispose(&v18, 8);
      }
    }
  }
}

- (void)_handleUpdatedMathElementIndex
{
  v7 = objc_alloc_init(VOTOutputRequest);
  v3 = [(NSArray *)self->_elementMathSegments objectAtIndex:self->_elementMathIndex];
  v4 = [(VOTOutputRequest *)v7 addAttributedString:v3];

  [(VOTElementManager *)self sendRequest:v7];
  v5 = VOTSharedWorkspace;
  _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
  [v5 refreshBraille:0 rotorSelection:_currentRotorSelection];
}

- (id)_treePositionForMathSegment:(id)segment
{
  v3 = [segment attributesAtIndex:0 effectiveRange:0];
  v4 = [v3 objectForKey:UIAccessibilityTokenMathTreePosition];

  return v4;
}

- (void)_handleMathGranularMovement:(int64_t)movement event:(id)event
{
  eventCopy = event;
  elementMathSegments = self->_elementMathSegments;
  v7 = elementMathSegments;
  if (!elementMathSegments)
  {
    [(VOTElementManager *)self _refreshMathSegmentsIfNeededWithPreferredDirection:movement];
    v7 = self->_elementMathSegments;
  }

  v8 = [(NSArray *)v7 count];
  if (!v8)
  {
    goto LABEL_21;
  }

  elementMathIndex = self->_elementMathIndex;
  if (elementMathIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    if (movement == 1)
    {
      v10 = 0;
    }

    else
    {
      v10 = (v8 - 1);
    }

LABEL_18:
    v11 = 0;
    self->_elementMathIndex = v10;
    if (!elementMathSegments)
    {
      goto LABEL_20;
    }

    goto LABEL_19;
  }

  if (movement != 1 || elementMathIndex != v8 - 1)
  {
    if (movement == 2)
    {
      if (!elementMathIndex)
      {
        goto LABEL_10;
      }
    }

    else if (movement == 1)
    {
      v10 = elementMathIndex + 1;
      goto LABEL_18;
    }

    v10 = elementMathIndex - 1;
    goto LABEL_18;
  }

LABEL_10:
  v11 = 1;
  if (elementMathSegments)
  {
LABEL_19:
    [(VOTElementManager *)self _refreshMathSegmentsIfNeededWithPreferredDirection:movement];
  }

LABEL_20:
  if (v11)
  {
LABEL_21:
    v12 = +[VOTOutputManager outputManager];
    [v12 stopSpeakingAtBoundary:0];

    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];

    goto LABEL_23;
  }

  [(VOTElementManager *)self _handleUpdatedMathElementIndex];
LABEL_23:
}

- (id)_currentRotorSelection
{
  [(VOTElementManager *)self _refreshMathSegmentsIfNeeded];
  _currentElement = [(VOTElementManager *)self _currentElement];
  if (!sub_1000FA5FC([(VOTRotor *)self->_elementRotor currentRotorType]))
  {
    goto LABEL_10;
  }

  if (![_currentElement doesHaveTraits:kAXMathEquationTrait])
  {
    goto LABEL_10;
  }

  elementMathIndex = self->_elementMathIndex;
  if (elementMathIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    goto LABEL_10;
  }

  if (elementMathIndex >= [(NSArray *)self->_elementMathSegments count])
  {
    v11 = self->_elementMathIndex;
    elementMathSegments = self->_elementMathSegments;
    _AXAssert();
  }

  v5 = self->_elementMathIndex;
  if (v5 < [(NSArray *)self->_elementMathSegments count:v11])
  {
    v6 = [(NSArray *)self->_elementMathSegments objectAtIndex:self->_elementMathIndex];
    v7 = [(VOTElementManager *)self _treePositionForMathSegment:v6];
    v8 = v7;
    if (v7)
    {
      v9 = v7;
    }
  }

  else
  {
LABEL_10:
    v8 = 0;
  }

  return v8;
}

- (void)_handleSearchRotorSetMathPosition:(id)position
{
  positionCopy = position;
  if (!sub_1000FA5FC([(VOTRotor *)self->_elementRotor currentRotorType]))
  {
    [(VOTElementManager *)self _setElementRotorToType:55 saveToPreferences:1 userInitiated:1];
  }

  [(VOTElementManager *)self _refreshMathSegmentsIfNeeded];
  v4 = [positionCopy objectForIndex:109];
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v5 = v4;
    v6 = [(NSArray *)self->_elementMathSegments count];
    if (!v6)
    {
      goto LABEL_11;
    }

    v7 = v6;
    v8 = 0;
    while (1)
    {
      v9 = [(NSArray *)self->_elementMathSegments objectAtIndex:v8];
      v10 = [(VOTElementManager *)self _treePositionForMathSegment:v9];
      v11 = sub_1000530E0(v10, v5);

      if (v11)
      {
        break;
      }

      if (v7 == ++v8)
      {
        goto LABEL_11;
      }
    }

    if (v8 != 0x7FFFFFFFFFFFFFFFLL)
    {
      self->_elementMathIndex = v8;
      [(VOTElementManager *)self _handleUpdatedMathElementIndex];
    }

    else
    {
LABEL_11:
      _AXLogWithFacility();
    }
  }

  else
  {
    _AXAssert();
  }
}

- (void)_handleOutputTextStyle:(id)style
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveTraits:kAXIsEditingTrait])
  {
    v4 = [_currentElement attributedValueForRange:{objc_msgSend(_currentElement, "selectedTextRange"), 1}];
    [VOTSharedWorkspace addMisspellingsForString:v4];
    coalescedFontAttributes = [v4 coalescedFontAttributes];
    v6 = [(VOTElementManager *)self _computeChangedFontAttributes:coalescedFontAttributes storedAttributes:0 haveMisspellCheck:1];
    if ([v6 length])
    {
      v7 = objc_alloc_init(VOTOutputRequest);
      v8 = [(VOTOutputRequest *)v7 addAttributedString:v6];
      [(VOTOutputRequest *)v7 setGeneratesBraille:1];
      [(VOTOutputRequest *)v7 setBrailleType:2];
      [(VOTElementManager *)self sendRequest:v7];
    }

    else
    {
      v7 = +[VOTOutputManager outputManager];
      v9 = +[VOSOutputEvent BoundaryEncountered];
      [(VOTOutputRequest *)v7 sendEvent:v9];
    }
  }

  else
  {
    v4 = +[VOTOutputManager outputManager];
    coalescedFontAttributes = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:coalescedFontAttributes];
  }
}

- (void)_handlePerformTapAutofill:(id)autofill
{
  v4 = self->_autofillCurrentElement;
  traits = [(VOTElement *)v4 traits];
  v6 = kAXSelectionDismissesItemTrait & traits;
  v7 = +[VOTOutputManager outputManager];
  if (v6)
  {
    +[VOSOutputEvent AutofillDidDismiss];
  }

  else
  {
    +[VOSOutputEvent DidSelectAutofill];
  }
  v8 = ;
  [v7 sendEvent:v8];

  [(VOTElement *)v4 performSimpleTap];
  v11 = [objc_allocWithZone(VOTOutputRequest) init];
  [(VOTElementManager *)self _addDescription:v4 toRequest:v11 withOptions:1];

  [v11 setCannotBeInterrupted:1];
  [(VOTElementManager *)self sendRequest:v11];
  v9 = +[VOTDisplayManager displayManager];
  _currentElement = [(VOTElementManager *)self _currentElement];
  [_currentElement frame];
  [v9 setCursorFrame:?];

  [(VOTElementManager *)self _resetOtherTapInputModes];
}

- (void)_finishHandlingNextAutofillWithElement:(id)element
{
  elementCopy = element;
  [elementCopy updateFrame];
  [elementCopy updateCenterPoint];
  v12 = +[VOTDisplayManager displayManager];
  [elementCopy frame];
  v5 = v4;
  v7 = v6;
  v9 = v8;
  v11 = v10;

  [v12 setCursorFrame:{v5, v7, v9, v11}];
}

- (BOOL)_handleNextAutofill:(id)autofill reverse:(BOOL)reverse
{
  reverseCopy = reverse;
  application = [(VOTElement *)self->_currentElement application];
  uiElement = [application uiElement];
  [uiElement updateCache:3004];

  typingCandidateElements = [application typingCandidateElements];
  v9 = [typingCandidateElements count];
  if (!v9)
  {
    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];

    autofillCurrentElement = self->_autofillCurrentElement;
    self->_autofillCurrentElement = 0;

    goto LABEL_6;
  }

  v10 = self->_autofillCurrentElement;
  if (v10)
  {
    v11 = v9;
    v12 = [typingCandidateElements indexOfObject:?];
    if (v12 == 0x7FFFFFFFFFFFFFFFLL)
    {
      v10 = 0;
      goto LABEL_13;
    }

    if (reverseCopy)
    {
      if (v12)
      {
        v10 = (v12 - 1);
        goto LABEL_13;
      }
    }

    else if (v12 != v11 - 1)
    {
      v10 = (v12 + 1);
      goto LABEL_13;
    }

    v17 = +[VOTOutputManager outputManager];
    v18 = +[VOSOutputEvent BoundaryEncountered];
    [v17 sendEvent:v18];

LABEL_6:
    v16 = 0;
    goto LABEL_19;
  }

LABEL_13:
  v19 = [typingCandidateElements objectAtIndex:v10];
  v20 = self->_autofillCurrentElement;
  self->_autofillCurrentElement = v19;

  v21 = self->_autofillCurrentElement;
  v22 = self->_autofillCurrentElement;
  v23 = !reverseCopy;
  v16 = 1;
  if (v23)
  {
    v24 = 1;
  }

  else
  {
    v24 = 2;
  }

  v29 = _NSConcreteStackBlock;
  v30 = 3221225472;
  v31 = sub_10007A850;
  v32 = &unk_1001C7778;
  selfCopy = self;
  v25 = v21;
  v34 = v25;
  [(VOTElement *)v22 scrollToElementForDirectional:v24 withCompletion:&v29];
  v26 = [(VOTElement *)v25 label:v29];
  if ([v26 length])
  {
    v27 = [objc_allocWithZone(VOTOutputRequest) init];
    [(VOTElement *)v25 addTextualInformationToRequest:v27 options:6 dataPackage:0];
    [(VOTElementManager *)self sendRequest:v27];
  }

  self->_flags.tapShouldHandleAutofill = 1;

LABEL_19:
  return v16;
}

- (void)_valueWait:(id)wait oldValue:(id)value waitTime:(double)time borderHitIfNoChange:(BOOL)change
{
  changeCopy = change;
  waitCopy = wait;
  valueCopy = value;
  Current = CFAbsoluteTimeGetCurrent();
  v27 = 0;
  v28 = &v27;
  v29 = 0x3032000000;
  v30 = sub_100068050;
  v31 = sub_100068060;
  v32 = 0;
  v23[0] = _NSConcreteStackBlock;
  v23[1] = 3221225472;
  v23[2] = sub_10007AB10;
  v23[3] = &unk_1001C9A88;
  v12 = waitCopy;
  v24 = v12;
  v26 = &v27;
  v13 = valueCopy;
  v25 = v13;
  v14 = objc_retainBlock(v23);
  if (((v14[2])() & 1) == 0)
  {
    while (CFAbsoluteTimeGetCurrent() - Current < 0.5)
    {
      [NSThread sleepForTimeInterval:time];
      if ((v14[2])(v14))
      {
        break;
      }

      v15 = [NSScanner localizedScannerWithString:v28[5]];
      v22 = 0;
      if ([v15 scanFloat:&v22])
      {
        [v12 absoluteValue];
        v17 = vabdd_f64(0.0, v16);
        v18 = vabdd_f64(1.0, v16);
        if (v17 < 2.22044605e-16 || v18 < 2.22044605e-16)
        {

          break;
        }
      }
    }

    if (changeCopy && v28[5] && [v13 isEqualToString:?])
    {
      v20 = +[VOTOutputManager outputManager];
      v21 = +[VOSOutputEvent BoundaryEncountered];
      [v20 sendEvent:v21];
    }
  }

  _Block_object_dispose(&v27, 8);
}

- (void)_handleAdjustValue:(id)value reverse:(BOOL)reverse
{
  reverseCopy = reverse;
  _currentElement = [(VOTElementManager *)self _currentElement];
  [_currentElement centerPoint];
  v7 = v6;
  v9 = v8;
  value = [_currentElement value];
  if (reverseCopy)
  {
    [_currentElement decrementAction];
  }

  else
  {
    [_currentElement incrementAction];
  }

  application = [_currentElement application];
  v12 = [_currentElement isValidForApplication:application];

  if ((v12 & 1) == 0)
  {
    v13 = [(VOTElementManager *)self _currentElementAtCenterPointOfElement:_currentElement];
    if (([v13 isEqual:_currentElement] & 1) == 0)
    {
      [(VOTElementManager *)self _setCurrentElement:v13];
      v14 = v13;

      _currentElement = v14;
    }
  }

  [(VOTElementManager *)self _valueWait:_currentElement oldValue:value waitTime:0.05];
  [(VOTElement *)self->_currentElement updateTraits];
  uiElement = [(VOTElement *)self->_currentElement uiElement];
  [uiElement updateCache:2027];

  v16 = [objc_allocWithZone(VOTOutputRequest) init];
  [(VOTElementManager *)self _addDescription:_currentElement toRequest:v16 withOptions:65544];
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXToggleTrait])
  {
    toggleStatusLabel = [(VOTElement *)self->_currentElement toggleStatusLabel];
    v18 = [v16 addString:toggleStatusLabel];
  }

  if (![(VOTElement *)self->_currentElement doesHaveTraits:kAXStartsMediaSessionTrait])
  {
    [(VOTElementManager *)self sendRequest:v16];
  }

  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXUpdatesFrequentlyTrait])
  {
    [(VOTElementManager *)self resetFrequentUpdateTextCache];
  }

  if (([_currentElement isValid] & 1) == 0)
  {
    v19 = [objc_allocWithZone(VOTElement) initWithPosition:{v7, v9}];
    v20 = v19;
    if (v19 && ([v19 isEqual:_currentElement] & 1) == 0)
    {
      [(VOTElementManager *)self _setCurrentElement:v20];
      v21 = +[VOTDisplayManager displayManager];
      [v21 setCursorFrameForElement:v20];
    }
  }

  [(VOTElement *)self->_currentElement updateEquivalenceTag];
  v22 = VOTSharedWorkspace;
  _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
  [v22 refreshBraille:1 rotorSelection:_currentRotorSelection];

  self->_lastAdjustValueTime = CFAbsoluteTimeGetCurrent();
}

- (void)_handleKBPopupVariantsNotification:(id)notification
{
  fingerLocation = self->_fingerLocation;
  self->_keyboardAlternativeVisibleTrackingPoint = fingerLocation;
  self->_keyboardAlternativeVisibleStartPoint = fingerLocation;
  self->_keyboardAlternativesVisible = 1;
  if ([VOTSharedWorkspace tapAndHoldMode])
  {
    [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer dispatchAfterDelay:10.0];
  }

  application = [(VOTElement *)self->_currentElement application];
  currentSoftwareKeyboardLayout = [application currentSoftwareKeyboardLayout];

  if ((sub_100052974(currentSoftwareKeyboardLayout) & 1) == 0)
  {
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent PopoverDidAppear];
    [v6 sendEvent:v7];
  }
}

- (void)_handleCameraCenteredNotification:(id)notification
{
  v3 = +[VOTOutputManager outputManager];
  [v3 playSoundFast:@"Sounds/RoadWalking.aiff"];
}

- (void)_handleBarcodeVisibilityNotification:(id)notification
{
  bOOLValue = [notification BOOLValue];
  v4 = +[VOTWorkspace sharedWorkspace];
  screenCurtainEnabled = [v4 screenCurtainEnabled];

  if (bOOLValue)
  {
    if (screenCurtainEnabled)
    {
      v6 = +[VOTWorkspace sharedWorkspace];
      [v6 setScreenCurtainSuspended:1];
    }

    v7 = +[VOTDisplayManager displayManager];
    [v7 clearCursorFrame];
  }

  else
  {
    if (!screenCurtainEnabled)
    {
      return;
    }

    v7 = +[VOTWorkspace sharedWorkspace];
    [v7 setScreenCurtainSuspended:0];
  }
}

- (void)_handleFocusedElementContentChangeNotification:(id)notification
{
  v4 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent DidEnterSecureText];
  [v4 sendEvent:v3];
}

- (void)_handleScreenWillChangeNotification:(id)notification
{
  notificationCopy = notification;
  if (![(VOTElementManager *)self webPageLoadedGenerationMark])
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      if ([notificationCopy isEqualToString:kAXScreenChangePopup])
      {
        self->_lastPopupTime = CFAbsoluteTimeGetCurrent();
        _currentElement = [(VOTElementManager *)self _currentElement];
        elementBeforePopup = self->_elementBeforePopup;
        self->_elementBeforePopup = _currentElement;

        v8 = VOTLogCommon();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
        {
          sub_10012B164();
        }

LABEL_11:

        goto LABEL_12;
      }

      if ([notificationCopy isEqualToString:kAXScreenChangeMenuBar])
      {
        _currentElement2 = [(VOTElementManager *)self _currentElement];
        elementBeforeMenuBar = self->_elementBeforeMenuBar;
        self->_elementBeforeMenuBar = _currentElement2;

        v8 = VOTLogCommon();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
        {
          sub_10012B0F4();
        }

        goto LABEL_11;
      }
    }

LABEL_12:
    _currentElement3 = [(VOTElementManager *)self _currentElement];
    elementBeforeScreenChange = self->_elementBeforeScreenChange;
    self->_elementBeforeScreenChange = _currentElement3;

    [(VOTElementManager *)self setCurrentElement:0];
    [(VOTElementManager *)self _resetItemChooserCache];
    v5 = +[VOTDisplayManager displayManager];
    [v5 setCursorFrameForElement:0];
    goto LABEL_13;
  }

  v5 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B0B8();
  }

LABEL_13:
}

- (void)_handleRealtimeElementUpdate:(id)update
{
  updateCopy = update;
  v13 = updateCopy;
  if (updateCopy && (v6 = CFGetTypeID(updateCopy), TypeID = AXUIElementGetTypeID(), v5 = v13, v6 == TypeID))
  {
    v8 = [AXUIElement uiElementWithAXElement:v13];
    application = [VOTElement elementWithUIElement:v8];
  }

  else
  {
    application = [(VOTElement *)self->_currentElement application];
  }

  realtimeElements = [application realtimeElements];
  v11 = +[VOTBrailleManager manager];
  [v11 updateRealtimeElements:realtimeElements];

  realTimeElementsCache = self->_realTimeElementsCache;
  self->_realTimeElementsCache = realtimeElements;
}

- (void)_handleScreenWillWakeNotification:(id)notification
{
  [VOTSharedWorkspace setScreenOn:1 silently:1];
  delayedNotificationAnnouncementRequest = [(VOTElementManager *)self delayedNotificationAnnouncementRequest];
  if (delayedNotificationAnnouncementRequest)
  {
    v5 = delayedNotificationAnnouncementRequest;
    [(VOTElementManager *)self _systemNotificationInProgressForRequest:delayedNotificationAnnouncementRequest];
    [(VOTElementManager *)self sendRequest:v5];
  }

  _objc_release_x1();
}

- (void)_handleWebFormControlInteractionStartNotification:(id)notification
{
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement isAlive] && objc_msgSend(_currentElement, "doesHaveTraits:", kAXWebContentTrait))
  {
    v4 = _currentElement;
    webFormControlBeforeInteraction = self->_webFormControlBeforeInteraction;
    self->_webFormControlBeforeInteraction = v4;
  }

  else
  {
    webFormControlBeforeInteraction = self->_webFormControlBeforeInteraction;
    self->_webFormControlBeforeInteraction = 0;
  }
}

- (void)_handleWebFormControlInteractionEndNotification:(id)notification
{
  self->_lastWebKeyboardDismissTime = CFAbsoluteTimeGetCurrent();
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  updateAppFromTimer = self->_updateAppFromTimer;

  [(SCRCTargetSelectorTimer *)updateAppFromTimer dispatchAfterDelay:1.0];
}

- (BOOL)_shouldMoveToLastWebFormControl
{
  if (!self->_webFormControlBeforeInteraction)
  {
    return 0;
  }

  if (CFAbsoluteTimeGetCurrent() - self->_lastWebKeyboardDismissTime < 2.0 && [(VOTElement *)self->_webFormControlBeforeInteraction isAlive])
  {
    remoteParent = [(VOTElement *)self->_webFormControlBeforeInteraction remoteParent];
    if (remoteParent)
    {
      v4 = remoteParent;
      uiElement = [remoteParent uiElement];
      v6 = [uiElement BOOLWithAXAttribute:2025];

      if (v6)
      {
        return 1;
      }
    }

    else
    {
      uiElement2 = [(VOTElement *)self->_webFormControlBeforeInteraction uiElement];
      v9 = [uiElement2 BOOLWithAXAttribute:2025];

      if (v9)
      {
        return 1;
      }
    }
  }

  webFormControlBeforeInteraction = self->_webFormControlBeforeInteraction;
  self->_webFormControlBeforeInteraction = 0;

  return 0;
}

- (void)_handleWebTextMatchSelectedNotification:(id)notification
{
  application = [(VOTElement *)self->_currentElement application];
  firstElementInApplicationForFocus = [application firstElementInApplicationForFocus];

  v5 = [(VOTElementManager *)self _nearestWebElement:firstElementInApplicationForFocus];
  textMarkerRangeForSelection = [v5 textMarkerRangeForSelection];
  textMarkerRangeForSelection2 = [v5 textMarkerRangeForSelection];
  [(VOTElementManager *)self _outputWebLineWithMarkerRange:textMarkerRangeForSelection2 withElement:v5];

  if ([textMarkerRangeForSelection count])
  {
    v8 = [textMarkerRangeForSelection objectAtIndex:0];
    v9 = [v5 elementForTextMarker:v8];

    [(VOTElementManager *)self _setCurrentElement:v9];
    v10 = +[VOTDisplayManager displayManager];
    [v10 setCursorFrameForElement:v9];

    v11 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent DidFocusOnElement];
    [v11 sendEvent:v12];
  }
}

- (void)_handleWebSearchResult:(int64_t)result withEvent:(id)event
{
  v6 = [(VOTElementManager *)self _currentElement:result];
  [v6 findSearchResult:result == 1 withSearchText:self->_webSearchText];
}

- (void)_handleWebTextAvailableNotification:(id)notification
{
  notificationCopy = notification;
  if (!notificationCopy || (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0))
  {
    objc_storeStrong(&self->_webSearchText, notification);
    [(VOTElementRotor *)self->_elementRotor setShowsWebSearchResults:notificationCopy != 0];
    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }
}

- (BOOL)_savedDescriptionToPhoto:(id)photo description:(id)description element:(id)element
{
  photoCopy = photo;
  descriptionCopy = description;
  if (([element savePhotoLabeliCloud:descriptionCopy] & 1) == 0)
  {
    if (AXDeviceIsAudioAccessory())
    {
      v9 = 0;
      goto LABEL_12;
    }

    absoluteString = [photoCopy absoluteString];
    pathExtension = [absoluteString pathExtension];
    lowercaseString = [pathExtension lowercaseString];

    if ([lowercaseString hasSuffix:@"mov"])
    {
      v13 = UIAccessibilityAddMetadataDescriptionToVideo();
    }

    else
    {
      if (([lowercaseString hasPrefix:@"jp"] & 1) == 0 && !objc_msgSend(lowercaseString, "hasSuffix:", @"png"))
      {
        v9 = 0;
        goto LABEL_11;
      }

      v13 = UIAccessibilityAddMetadataDescriptionToImage();
    }

    v9 = v13;
LABEL_11:

    goto LABEL_12;
  }

  v9 = 1;
LABEL_12:

  return v9;
}

- (void)_handleLabelElementAcceptedNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && self->_labeledElementIdentification)
  {
    v4 = [(VOTElement *)self->_cachedLabelElement url];
    if (![(VOTElementManager *)self _savedDescriptionToPhoto:v4 description:notificationCopy element:self->_cachedLabelElement])
    {
      v5 = +[VOTElementLabelCache sharedManager];
      [v5 storeUserLabel:notificationCopy forIdentification:self->_labeledElementIdentification];

      uniqueIdentification = [(VOTElement *)self->_currentElement uniqueIdentification];
      v7 = [uniqueIdentification isEqual:self->_labeledElementIdentification];

      if (v7)
      {
        [(VOTElement *)self->_currentElement setUserDefinedLabel:notificationCopy];
      }
    }

    labeledElementIdentification = self->_labeledElementIdentification;
    self->_labeledElementIdentification = 0;

    cachedLabelElement = self->_cachedLabelElement;
    self->_cachedLabelElement = 0;
  }
}

- (void)_resetElementLabel
{
  labeledElementIdentification = self->_labeledElementIdentification;
  if (labeledElementIdentification)
  {
    self->_labeledElementIdentification = 0;

    [(VOTElementManager *)self showElementLabelPanel:0 currentLabel:0];
  }

  cachedLabelElement = self->_cachedLabelElement;
  self->_cachedLabelElement = 0;
}

- (void)_handleMonitorElement:(id)element
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  application = [_currentElement application];
  bundleIdentifier = [application bundleIdentifier];

  if (bundleIdentifier)
  {
    v7 = [(NSMutableDictionary *)self->_elementMonitorCache objectForKeyedSubscript:bundleIdentifier];
    if (!v7)
    {
      v7 = +[NSMutableDictionary dictionary];
      [(NSMutableDictionary *)self->_elementMonitorCache setObject:v7 forKeyedSubscript:bundleIdentifier];
    }

    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    v9 = [v7 objectForKeyedSubscript:_currentElement];

    if (v9)
    {
      v10 = [v7 objectForKeyedSubscript:_currentElement];
      v11 = sub_1000516CC(off_1001FDDD0, @"monitored.element.removed", 0, selectedLanguage);
      v12 = [NSString stringWithFormat:v11, v10];
      v13 = sub_1000095FC(v12, 0, selectedLanguage);

      [v7 setObject:0 forKeyedSubscript:_currentElement];
      if (![v7 count])
      {
        [(NSMutableDictionary *)self->_elementMonitorCache setObject:0 forKeyedSubscript:bundleIdentifier];
      }

      v14 = VOTLogCommon();
      if (!os_log_type_enabled(v14, OS_LOG_TYPE_INFO))
      {
        goto LABEL_14;
      }

      *buf = 138412290;
      v26 = _currentElement;
      v15 = "Removing monitoring: %@";
      v16 = v14;
      v17 = 12;
    }

    else
    {
      v10 = [(VOTElementManager *)self _monitoredElementCachedText:_currentElement];
      v18 = sub_1000516CC(off_1001FDDD0, @"monitored.element.added", 0, selectedLanguage);
      v19 = [NSString stringWithFormat:v18, v10];
      v20 = sub_1000095FC(v19, 0, selectedLanguage);

      [v7 setObject:v10 forKeyedSubscript:_currentElement];
      v14 = VOTLogCommon();
      if (!os_log_type_enabled(v14, OS_LOG_TYPE_INFO))
      {
LABEL_14:

        if ([(NSMutableDictionary *)self->_elementMonitorCache count])
        {
          if (!self->_flags.isMonitoringElements)
          {
            self->_flags.isMonitoringElements = 1;
            v21 = VOTLogCommon();
            if (os_log_type_enabled(v21, OS_LOG_TYPE_INFO))
            {
              *buf = 0;
              _os_log_impl(&_mh_execute_header, v21, OS_LOG_TYPE_INFO, "Starting monitoring of all elements", buf, 2u);
            }

            elementMonitorTimer = self->_elementMonitorTimer;
            v24[0] = _NSConcreteStackBlock;
            v24[1] = 3221225472;
            v24[2] = sub_10007BE28;
            v24[3] = &unk_1001C76E8;
            v24[4] = self;
            [(SCRCTargetSelectorTimer *)elementMonitorTimer dispatchAfterDelay:v24 withBlock:5.0];
          }
        }

        else
        {
          [(SCRCTargetSelectorTimer *)self->_elementMonitorTimer cancel];
          self->_flags.isMonitoringElements = 0;
          v23 = VOTLogCommon();
          if (os_log_type_enabled(v23, OS_LOG_TYPE_INFO))
          {
            *buf = 0;
            _os_log_impl(&_mh_execute_header, v23, OS_LOG_TYPE_INFO, "Stopping monitoring of all elements", buf, 2u);
          }
        }

        goto LABEL_23;
      }

      *buf = 138412546;
      v26 = _currentElement;
      v27 = 2112;
      v28 = v10;
      v15 = "Monitoring: %@, %@";
      v16 = v14;
      v17 = 22;
    }

    _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, v15, buf, v17);
    goto LABEL_14;
  }

  v7 = VOTLogCommon();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_ERROR))
  {
    sub_10012B1D4();
  }

LABEL_23:
}

- (void)_handleLabelElement:(id)element
{
  obj = [(VOTElementManager *)self _currentElement];
  uniqueIdentification = [obj uniqueIdentification];
  labeledElementIdentification = self->_labeledElementIdentification;
  self->_labeledElementIdentification = uniqueIdentification;

  objc_storeStrong(&self->_cachedLabelElement, obj);
  elementStoredUserLabel = [obj elementStoredUserLabel];
  if (!elementStoredUserLabel)
  {
    elementStoredUserLabel = [obj userDefinedLabel];
    if (!elementStoredUserLabel)
    {
      elementStoredUserLabel = [obj label];
    }
  }

  v7 = elementStoredUserLabel;
  [(VOTElementManager *)self showElementLabelPanel:1 currentLabel:elementStoredUserLabel];
}

- (void)showElementLabelPanel:(BOOL)panel currentLabel:(id)label
{
  panelCopy = panel;
  labelCopy = label;
  v6 = +[VOTSpringBoardConnection defaultConnection];
  [v6 showElementLabelPanel:panelCopy currentLabel:labelCopy];
}

- (BOOL)shouldSnarfCrown
{
  v2 = +[VOTWorkspace sharedWorkspace];
  useDigitalCrownNavigation = [v2 useDigitalCrownNavigation];

  return useDigitalCrownNavigation;
}

- (void)_handleToggleCrownNavigation:(id)navigation
{
  v3 = +[VOTWorkspace sharedWorkspace];
  useDigitalCrownNavigation = [v3 useDigitalCrownNavigation];

  v5 = +[VOTWorkspace sharedWorkspace];
  [v5 setUseDigitalCrownNavigationEnabled:useDigitalCrownNavigation ^ 1];

  v9 = objc_alloc_init(VOTOutputRequest);
  if (useDigitalCrownNavigation)
  {
    v6 = @"crown.navigation.off";
  }

  else
  {
    v6 = @"crown.navigation.on";
  }

  v7 = sub_1000511CC(off_1001FDDD0, v6, 0);
  v8 = [(VOTOutputRequest *)v9 addString:v7];

  [(VOTOutputRequest *)v9 send];
}

- (void)_handleStartStopToggle:(id)toggle
{
  v4 = +[VOTOutputManager outputManager];
  [v4 stopSpeakingAtBoundary:0];

  v5 = +[VOTElement systemAppApplication];
  v6 = +[AXSystemAppServer server];
  toggleIncomingCall = [v6 toggleIncomingCall];

  Current = CFAbsoluteTimeGetCurrent();
  [VOTSharedWorkspace lastTelephonyCallActive];
  v10 = Current - v9;
  v11 = +[AXSubsystemMagicTapToggle sharedInstance];
  ignoreLogging = [v11 ignoreLogging];

  if ((ignoreLogging & 1) == 0)
  {
    v13 = +[AXSubsystemMagicTapToggle identifier];
    v14 = AXLoggerForFacility();

    v15 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v14, v15))
    {
      v16 = AXColorizeFormatLog();
      v28 = NSStringFromBOOL();
      v17 = _AXStringForArgs();

      if (os_log_type_enabled(v14, v15))
      {
        *buf = 138543362;
        v34 = v17;
        _os_log_impl(&_mh_execute_header, v14, v15, "%{public}@", buf, 0xCu);
      }
    }
  }

  if (v10 <= 10.0)
  {
    v18 = 1;
  }

  else
  {
    v18 = toggleIncomingCall;
  }

  if ((v18 & 1) == 0)
  {
    v31[0] = _NSConcreteStackBlock;
    v31[1] = 3221225472;
    v31[2] = sub_10007C44C;
    v31[3] = &unk_1001C7778;
    v31[4] = self;
    v32 = v5;
    v19 = objc_retainBlock(v31);
    if (_AXSSpeakThisEnabled())
    {
      sharedInstance = [sub_100071640() sharedInstance];
      v29[0] = _NSConcreteStackBlock;
      v29[1] = 3221225472;
      v29[2] = sub_10007C58C;
      v29[3] = &unk_1001C9AB0;
      v30 = v19;
      [sharedInstance toggleSpeaking:v29];
    }

    else
    {
      v21 = +[AXSubsystemMagicTapToggle sharedInstance];
      ignoreLogging2 = [v21 ignoreLogging];

      if ((ignoreLogging2 & 1) == 0)
      {
        v23 = +[AXSubsystemMagicTapToggle identifier];
        v24 = AXLoggerForFacility();

        v25 = AXOSLogLevelFromAXLogLevel();
        if (os_log_type_enabled(v24, v25))
        {
          v26 = AXColorizeFormatLog();
          v27 = _AXStringForArgs();
          if (os_log_type_enabled(v24, v25))
          {
            *buf = 138543362;
            v34 = v27;
            _os_log_impl(&_mh_execute_header, v24, v25, "%{public}@", buf, 0xCu);
          }
        }
      }

      (v19[2])(v19);
    }
  }

  if (self->_flags.currentElementAllowsDirectTouch)
  {
    self->_flags.avoidAnnouncingDirectTouchArea = [(VOTElement *)self->_currentElement avoidAnnouncingDirectTouchArea];
  }

  self->_lastPressOnMediaSessionElement = CFAbsoluteTimeGetCurrent();
}

- (void)_handleDoubleTap:(id)tap
{
  if (AXDeviceIsTV())
  {

    [(VOTElementManager *)self __tvOS_toggleAudioDescriptions];
  }

  else
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    if (sub_100050834() && !_currentElement)
    {
      _currentElement = [(VOTElementManager *)self touchContainer];
    }

    [(VOTElementManager *)self setLastUserElementTouchTime:0.0];
    if ([_currentElement supportsSecondaryActivate])
    {
      if (([_currentElement doesHaveTraits:kAXPlaysSoundTrait] & 1) == 0)
      {
        v5 = +[VOTOutputManager outputManager];
        v6 = +[VOSOutputEvent DidActivateElement];
        [v5 sendEvent:v6];
      }

      [_currentElement performDoubleTap];
      if ([_currentElement doesHaveTraits:kAXLaunchIconTrait])
      {
        cachedLaunchIcons = self->_cachedLaunchIcons;
        uniqueIdentification = [_currentElement uniqueIdentification];
        [(NSMutableArray *)cachedLaunchIcons addObject:uniqueIdentification];
      }
    }

    else
    {
      [_currentElement performSimpleTap];
      [NSThread sleepForTimeInterval:0.2];
      [_currentElement performSimpleTap:1];
    }

    v9 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self _pressActionResultDelay];
    v10 = v9;
    AXPerformBlockOnMainThreadAfterDelay();
  }
}

- (void)_handleTripleTap:(id)tap
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if (sub_100050834() && !_currentElement)
  {
    _currentElement = [(VOTElementManager *)self touchContainer];
  }

  [_currentElement performSimpleTap];
  [NSThread sleepForTimeInterval:0.2];
  [_currentElement performSimpleTap:1];
  [NSThread sleepForTimeInterval:0.2];
  [_currentElement performSimpleTap:1];
  v5 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent()];
  [(VOTElementManager *)self _pressActionResultDelay];
  v6 = v5;
  AXPerformBlockOnMainThreadAfterDelay();
}

- (BOOL)_useLineFrameBoundsForTouch:(id)touch
{
  x = self->_lineFrame.origin.x;
  y = self->_lineFrame.origin.y;
  width = self->_lineFrame.size.width;
  height = self->_lineFrame.size.height;
  v7 = CGRectZero.origin.y;
  v8 = CGRectZero.size.width;
  v9 = CGRectZero.size.height;
  touchCopy = touch;
  v14.origin.x = x;
  v14.origin.y = y;
  v14.size.width = width;
  v14.size.height = height;
  v15.origin.x = CGRectZero.origin.x;
  v15.origin.y = v7;
  v15.size.width = v8;
  v15.size.height = v9;
  v11 = !CGRectEqualToRect(v14, v15);
  kAXWebContentTrait = [touchCopy doesHaveTraits:kAXStaticTextTrait | kAXWebContentTrait];

  return v11 & kAXWebContentTrait;
}

- (void)_updateCurrentWordContextForBook:(id)book
{
  bookCopy = book;
  if ([(NSArray *)self->_lineArray count])
  {
    v5 = [(NSArray *)self->_lineArray objectAtIndex:0];
  }

  else
  {
    v5 = 0;
  }

  v6 = self->_elementUnitOutputRange.length + 1;
  valuePtr[0] = self->_elementUnitOutputRange.location - self->_bookLineRange.location;
  valuePtr[1] = v6;
  v7 = AXValueCreate(kAXValueTypeCFRange, valuePtr);
  v8 = [objc_allocWithZone(NSDictionary) initWithObjectsAndKeys:{v7, @"contextRange", v5, @"startTextMarker", 0}];
  if (v7)
  {
    CFRelease(v7);
  }

  [bookCopy setCurrentWordContextForBook:v8];
}

- (BOOL)_updateCursorAfterPressForElement:(id)element currentElementRange:(_NSRange)range request:(id)request didHaveCursor:(BOOL)cursor doesHaveCursor:(BOOL)haveCursor
{
  cursorCopy = cursor;
  length = range.length;
  location = range.location;
  elementCopy = element;
  requestCopy = request;
  if (location != 0x7FFFFFFF)
  {
    selectedTextRange = [elementCopy selectedTextRange];
    lastSeenLineAndColumn = self->_lastSeenLineAndColumn;
    if (!lastSeenLineAndColumn || (-[NSDictionary objectForKey:](lastSeenLineAndColumn, "objectForKey:", @"lineNumber"), v16 = objc_claimAutoreleasedReturnValue(), v17 = [v16 integerValue], v16, (v17 & 0x8000000000000000) != 0))
    {
      v21 = 0;
      v20 = 0;
      v18 = 0x7FFFFFFFLL;
    }

    else
    {
      v18 = [elementCopy rangeForLineNumberAndColumn:self->_lastSeenLineAndColumn];
      v20 = v19;
      v21 = 1;
    }

    if (v18 == 0x7FFFFFFF)
    {
      v22 = 0;
    }

    else
    {
      v22 = v21 & !cursorCopy;
    }

    if (!cursorCopy)
    {
      goto LABEL_19;
    }

    v23 = v21 ^ 1;
    if (!self->_lastSeenLineAndColumn)
    {
      v23 = 1;
    }

    if (v23)
    {
LABEL_19:
      v27 = 0;
    }

    else
    {
      v24 = [elementCopy rangeForLineNumberAndColumn:?];
      v27 = selectedTextRange < v24 || selectedTextRange - v24 >= v25;
    }

    if (((v22 | v27) & 1) != 0 && ((lastTextPressAction = self->_lastTextPressAction, lastTextPressAction == 3) || !lastTextPressAction))
    {
      [(VOTElementManager *)self _setSelectedTextRange:v18 onElement:0 refreshBraille:elementCopy, 1];
      v29 = [elementCopy valueForRange:{v18, v20}];
      if ([v29 length])
      {
        v30 = sub_1000511CC(off_1001FDDD0, @"cursor.at.start.of.line", 0);
        v31 = [NSString stringWithFormat:v30, v29];
        v32 = [requestCopy addString:v31];
      }

      self->_lastTextPressAction = 1;
    }

    else
    {
      if (cursorCopy)
      {
        v33 = 0;
        v34 = 1;
      }

      else
      {
        v34 = [elementCopy doesHaveTraits:kAXTextAreaTrait];
        application = [elementCopy application];
        if ([application isMail])
        {
          v33 = [elementCopy doesHaveTraits:kAXWebContentTrait];
        }

        else
        {
          v33 = 0;
        }
      }

      if ((selectedTextRange != location) & v34) != 0 || (v33)
      {
        [(VOTElementManager *)self _setSelectedTextRange:location onElement:0 refreshBraille:elementCopy, 1];
        v39 = sub_1000511CC(off_1001FDDD0, @"cursor.at.start", 0);
        v40 = [requestCopy addString:v39];

        v38 = 2;
      }

      else
      {
        [(VOTElementManager *)self _setSelectedTextRange:location + length onElement:0 refreshBraille:elementCopy, 1];
        v36 = sub_1000511CC(off_1001FDDD0, @"cursor.at.end", 0);
        v37 = [requestCopy addString:v36];

        v38 = 3;
      }

      self->_lastTextPressAction = v38;
    }
  }

  return location != 0x7FFFFFFF;
}

- (void)_performPressOnElement:(id)element withEvent:(id)event centerPoint:(CGPoint)point
{
  y = point.y;
  x = point.x;
  elementCopy = element;
  eventCopy = event;
  v9 = eventCopy;
  v10 = CGPointZero.y;
  if (CGPointZero.x == x && v10 == y)
  {
    v12 = [eventCopy objectForIndex:{101, CGPointZero.x, v10}];
    [v12 pointValue];
    v14 = v13;
    v16 = v15;

    [elementCopy frame];
    v22.x = v14;
    v22.y = v16;
    if (CGRectContainsPoint(v23, v22))
    {
      v17 = [v9 objectForIndex:111];
      [v17 floatValue];
      v19 = v18;

      [elementCopy performTapAtPoint:1 withForce:v14 playSound:{v16, v19}];
    }
  }

  else
  {
    [elementCopy performSimpleTap];
  }
}

- (id)_votElementFromWebElementHierarchyIndexPath:(id)path webArea:(id)area
{
  pathCopy = path;
  areaCopy = area;
  if ([pathCopy length])
  {
    v7 = 0;
    v8 = 0;
    v9 = areaCopy;
    while (1)
    {
      v10 = [pathCopy indexAtPosition:v7];
      children = [v9 children];
      if (v10 >= [children count])
      {
        break;
      }

      v12 = [children objectAtIndex:v10];

      v8 = v12;
      ++v7;
      v9 = v8;
      if ([pathCopy length] <= v7)
      {
        goto LABEL_7;
      }
    }

    v13 = 0;
  }

  else
  {
    v8 = 0;
    v9 = areaCopy;
LABEL_7:
    v8 = v8;
    v13 = v8;
  }

  return v13;
}

- (id)_currentlyFocusedSafariTabIdentifier:(id)identifier
{
  identifierCopy = identifier;
  if ([identifierCopy doesHaveTraits:kAXWebContentTrait])
  {
    remoteParent = [identifierCopy remoteParent];
    window = [remoteParent window];

    safariWindowActiveTabDocumentIdentifier = [window safariWindowActiveTabDocumentIdentifier];
  }

  else
  {
    safariWindowActiveTabDocumentIdentifier = 0;
  }

  return safariWindowActiveTabDocumentIdentifier;
}

- (id)_buildWebRefocusHashFromURL:(id)l activeTabDocumentIdentifier:(id)identifier
{
  lCopy = l;
  identifierCopy = identifier;
  v7 = [NSString alloc];
  v8 = v7;
  if (lCopy)
  {
    absoluteString = [lCopy absoluteString];
    identifierCopy = [v8 initWithFormat:@"Refocus.%@.%@", absoluteString, identifierCopy];
  }

  else
  {
    identifierCopy = [v7 initWithFormat:@"Refocus.%@.%@", @"None", identifierCopy];
  }

  return identifierCopy;
}

- (void)_cachePreviousWebElement:(id)element
{
  elementCopy = element;
  v5 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    *v13 = 0;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "Caching a new previous web element", v13, 2u);
  }

  webArea = [elementCopy webArea];
  v7 = [elementCopy webHierarchyIndexPathFromWebArea:webArea];
  webAreaURL = [elementCopy webAreaURL];
  v9 = [(VOTElementManager *)self _currentlyFocusedSafariTabIdentifier:elementCopy];
  v10 = v9;
  if (webArea && v7 && webAreaURL && v9)
  {
    v11 = [(VOTElementManager *)self _buildWebRefocusHashFromURL:webAreaURL activeTabDocumentIdentifier:v9];
    v12 = [[_VOTWebElementMetadata alloc] initFromElement:elementCopy indexPath:v7];
    [(NSMutableDictionary *)self->_previousWebElements setObject:v12 forKey:v11];
  }
}

- (id)_findPreviousWebElement:(id)element
{
  elementCopy = element;
  webArea = [elementCopy webArea];
  v6 = [(VOTElementManager *)self _currentlyFocusedSafariTabIdentifier:elementCopy];
  webAreaURL = [elementCopy webAreaURL];

  v8 = [(VOTElementManager *)self _buildWebRefocusHashFromURL:webAreaURL activeTabDocumentIdentifier:v6];
  v9 = [(NSMutableDictionary *)self->_previousWebElements objectForKey:v8];
  v10 = v9;
  if (v9)
  {
    indexPathFromWebArea = [v9 indexPathFromWebArea];
    v12 = [(VOTElementManager *)self _votElementFromWebElementHierarchyIndexPath:indexPathFromWebArea webArea:webArea];

    label = [v12 label];
    label2 = [v10 label];
    v15 = [label isEqualToString:label2];

    if (v15)
    {
      v16 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v16, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, "Found previous web element using index path", buf, 2u);
      }

      v12 = v12;
      v17 = v12;
      goto LABEL_21;
    }

    v18 = [VOTElement alloc];
    [v10 centerPoint];
    v19 = [(VOTElement *)v18 initWithPosition:?];
    v20 = v19;
    if (v19 && [(VOTElement *)v19 doesHaveTraits:kAXWebContentTrait])
    {
      webAreaURL2 = [(VOTElement *)v20 webAreaURL];
      webAreaURL3 = [v10 webAreaURL];
      if ([webAreaURL2 isEqual:webAreaURL3])
      {
        [(VOTElement *)v20 label];
        v23 = v29 = webAreaURL2;
        label3 = [v10 label];
        v28 = [v23 isEqualToString:label3];

        if (v28)
        {
          v25 = VOTLogWebPageMovement();
          if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
          {
            *v30 = 0;
            _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "Found previous web element using fallback hit test", v30, 2u);
          }

          v17 = v20;
LABEL_20:

          goto LABEL_21;
        }
      }

      else
      {
      }
    }

    v26 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v26, OS_LOG_TYPE_ERROR))
    {
      sub_10012B23C();
    }

    v17 = 0;
    goto LABEL_20;
  }

  v12 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v12, OS_LOG_TYPE_ERROR))
  {
    sub_10012B27C();
  }

  v17 = 0;
LABEL_21:

  return v17;
}

- (void)_handlePerformPressAction:(id)action
{
  actionCopy = action;
  _currentElement = [(VOTElementManager *)self _currentElement];
  if (sub_100050834() && !_currentElement)
  {
    _currentElement = [(VOTElementManager *)self touchContainer];
  }

  v6 = kAXLaunchIconTrait;
  if ([(VOTElement *)_currentElement doesHaveTraits:kAXLaunchIconTrait])
  {
    cachedLaunchIcons = self->_cachedLaunchIcons;
    uniqueIdentification = [(VOTElement *)_currentElement uniqueIdentification];
    [(NSMutableArray *)cachedLaunchIcons addObject:uniqueIdentification];
  }

  if ([actionCopy isTouchEvent] && objc_msgSend(VOTSharedWorkspace, "typingMode") == 1 && -[VOTElement keyboardKeyAllowsTouchTyping](_currentElement, "keyboardKeyAllowsTouchTyping"))
  {
    self->_flags.didTouchTypingOutputStart = 0;
  }

  [(VOTElement *)_currentElement centerPoint];
  v10 = v9;
  v12 = v11;
  if ([(VOTElement *)_currentElement isReadingContent])
  {
    bookSubelement = self->_bookSubelement;
    if (!bookSubelement)
    {
      if ([(VOTElement *)_currentElement supportsFrameForRange])
      {
        v86.origin.x = CGRectZero.origin.x;
        v86.origin.y = CGRectZero.origin.y;
        v86.size.width = CGRectZero.size.width;
        v86.size.height = CGRectZero.size.height;
        if (!CGRectEqualToRect(self->_lineFrame, v86))
        {
          MidX = CGRectGetMidX(self->_lineFrame);
          MidY = CGRectGetMidY(self->_lineFrame);
          v49 = [actionCopy objectForIndex:111];
          [v49 floatValue];
          v51 = v50;

          [(VOTElement *)_currentElement performTapAtPoint:1 withForce:MidX playSound:MidY, v51];
          goto LABEL_16;
        }
      }

      [(VOTElementManager *)self _updateCurrentWordContextForBook:_currentElement];
      bookSubelement = _currentElement;
    }

    [(VOTElement *)bookSubelement performSimpleTap];
LABEL_16:
    toggleStatusLabel = 0;
    v14 = 0;
LABEL_57:
    self->_lastTextPressAction = 0;
    goto LABEL_58;
  }

  if ([(VOTElement *)_currentElement isInTableCell])
  {
    self->_previousTableOrCollectionViewRowTime = CFAbsoluteTimeGetCurrent();
    parentTableOrCollectionView = [(VOTElement *)_currentElement parentTableOrCollectionView];
    if (parentTableOrCollectionView)
    {
      v16 = objc_opt_new();
      indexPathAsRange = [(VOTElement *)_currentElement indexPathAsRange];
      [v16 setIndexPath:{indexPathAsRange, v18}];
      label = [(VOTElement *)_currentElement label];
      [v16 setLabel:label];

      previousTableOrCollectionViewToMetadata = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
      [previousTableOrCollectionViewToMetadata setObject:v16 forKeyedSubscript:parentTableOrCollectionView];

      previousTableOrCollectionViewList = [(VOTElementManager *)self previousTableOrCollectionViewList];
      [previousTableOrCollectionViewList addObject:parentTableOrCollectionView];
    }

    application = [(VOTElement *)_currentElement application];
    [(VOTElementManager *)self setPreviousTableOrCollectionViewApplication:application];
  }

  v79 = v6;
  v23 = kAXWebContentTrait;
  if ([(VOTElement *)_currentElement doesHaveTraits:kAXWebContentTrait])
  {
    [(VOTElementManager *)self _cachePreviousWebElement:_currentElement];
  }

  v24 = kAXIsEditingTrait;
  v25 = kAXTextEntryTrait;
  if ([(VOTElement *)_currentElement doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    v26 = ![(VOTElement *)_currentElement shouldIgnoreTextEditingTrait];
  }

  else
  {
    v26 = 0;
  }

  v27 = CGRectGetMidX(self->_lineFrame);
  v28 = CGRectGetMidY(self->_lineFrame);
  v29 = +[VOTElement systemWideElement];
  [v29 convertPoint:-[VOTElement windowContextId](_currentElement toContextId:{"windowContextId"), v27, v28}];
  v31 = v30;
  v33 = v32;

  v78 = v26;
  if ((v26 & 1) != 0 || ![(VOTElement *)_currentElement doesHaveTraits:kAXTextAreaTrait])
  {
    v34 = 0;
  }

  else
  {
    v34 = [(VOTElement *)_currentElement dataDetectorURL:v31, v33];
  }

  v35 = [(VOTElementManager *)self _useLineFrameBoundsForTouch:_currentElement];
  if ([(VOTElement *)_currentElement doesHaveAllTraits:v25 | v24]&& ![(VOTElement *)_currentElement shouldIgnoreTextEditingTrait])
  {
    elementUnitIndex = [(VOTElement *)_currentElement selectedTextRange];
  }

  else
  {
    elementUnitIndex = self->_elementUnitIndex;
    if (elementUnitIndex == -1)
    {
      v37 = 0;
      v38 = 0x7FFFFFFFLL;
      goto LABEL_36;
    }
  }

  v38 = [(VOTElement *)_currentElement lineRangeForPosition:elementUnitIndex];
LABEL_36:
  if (v38 != 0x7FFFFFFF)
  {
    v39 = actionCopy;
    v40 = [(VOTElement *)_currentElement attributedValueForRange:v38, v37];
    v41 = -[VOTElementManager _textAttachmentElementForString:inRange:](self, "_textAttachmentElementForString:inRange:", v40, 0, [v40 length]);
    if (v41)
    {
      v42 = v41;
      [v41 performSimpleTap];

      v14 = 0;
      toggleStatusLabel = 0;
      actionCopy = v39;
LABEL_56:

      v6 = v79;
      goto LABEL_57;
    }
  }

  if ((v34 != 0) | v35 & 1)
  {
    v43 = [actionCopy objectForIndex:111];
    [v43 floatValue];
    v45 = v44;

    [(VOTElement *)_currentElement performTapAtPoint:1 withForce:v31 playSound:v33, v45];
    v14 = 0;
    toggleStatusLabel = 0;
    goto LABEL_56;
  }

  if ([(VOTElement *)_currentElement doesHaveAllTraits:kAXStaticTextTrait | v23])
  {
    previousElement = [(VOTElement *)_currentElement previousElement];
    if ([previousElement doesHaveTraits:kAXToggleTrait | kAXRadioButtonTrait])
    {
      toggleStatusLabel = [previousElement toggleStatusLabel];
      v14 = previousElement;
    }

    else
    {
      v14 = 0;
      toggleStatusLabel = 0;
    }
  }

  else
  {
    v14 = 0;
    toggleStatusLabel = 0;
  }

  [(VOTElementManager *)self _performPressOnElement:_currentElement withEvent:actionCopy centerPoint:v10, v12];
  if (![(VOTElement *)_currentElement doesHaveAllTraits:v25 | v24]|| [(VOTElement *)_currentElement shouldIgnoreTextEditingTrait])
  {
    if ([(VOTElement *)_currentElement doesHaveTraits:kAXStartsMediaSessionTrait])
    {
      v52 = +[VOTOutputManager outputManager];
      [v52 clearQueue];

      v53 = +[VOTOutputManager outputManager];
      [v53 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:&off_1001D9FE0];

      v54 = VOTLogCommon();
      if (os_log_type_enabled(v54, OS_LOG_TYPE_INFO))
      {
        *buf = 138412290;
        v85 = _currentElement;
        _os_log_impl(&_mh_execute_header, v54, OS_LOG_TYPE_INFO, "Media Session element : %@", buf, 0xCu);
      }

      self->_lastPressOnMediaSessionElement = CFAbsoluteTimeGetCurrent();
    }

    v55 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self _pressActionResultDelay];
    v83 = v55;
    v56 = v55;
    AXPerformBlockOnMainThreadAfterDelay();

    goto LABEL_56;
  }

  v67 = actionCopy;
  v68 = [objc_allocWithZone(VOTOutputRequest) init];
  textInputElement = [(VOTElement *)_currentElement textInputElement];
  if (textInputElement)
  {
    v70 = textInputElement;
    textInputElementRange = [(VOTElement *)_currentElement textInputElementRange];
    v73 = v72;
  }

  else
  {
    v70 = _currentElement;
    value = [(VOTElement *)v70 value];
    v73 = [value length];

    textInputElementRange = 0;
  }

  v75 = [(VOTElementManager *)self _updateCursorAfterPressForElement:v70 currentElementRange:textInputElementRange request:v73 didHaveCursor:v68 doesHaveCursor:v78, 1];
  [(VOTElementManager *)self sendRequest:v68];
  if (v75)
  {
    selectedTextRange = [(VOTElement *)_currentElement selectedTextRange];
    [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v77, 0];
  }

  [(VOTElementManager *)self _updateLastFirstResponderChangedTime];

  actionCopy = v67;
  v6 = v79;
LABEL_58:
  if ([(VOTElement *)_currentElement doesHaveTraits:kAXLinkTrait])
  {
    linkedElement = [(VOTElement *)_currentElement linkedElement];
    if (linkedElement)
    {
      [(VOTElementManager *)self _setCurrentElement:linkedElement];
      v58 = linkedElement;

      _currentElement = v58;
    }
  }

  [(VOTElement *)_currentElement updateTraits];
  v59 = kAXIsEditingTrait;
  if ([(VOTElement *)_currentElement doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    [(VOTElementManager *)self _disableQuickNavStateTemporarily];
  }

  if ([(VOTElement *)_currentElement doesHaveTraits:kAXTabButtonTrait])
  {
    application2 = [(VOTElement *)_currentElement application];
    v61 = [(VOTElement *)_currentElement isValidForApplication:application2];

    if ((v61 & 1) == 0)
    {
      v62 = [objc_allocWithZone(VOTElement) initWithPosition:{v10, v12}];
      v63 = v62;
      if (v62 && ([v62 isEqual:_currentElement] & 1) == 0)
      {
        [(VOTElementManager *)self _setCurrentElement:v63];
        v64 = v63;

        _currentElement = v64;
      }
    }
  }

  v65 = [(VOTElement *)_currentElement copy];
  AXPerformBlockOnMainThreadAfterDelay();
  if ([(VOTElement *)_currentElement doesHaveTraits:kAXWebContentTrait])
  {
    v81 = toggleStatusLabel;
    v82 = v14;
    AXPerformBlockOnMainThreadAfterDelay();
  }

  if ([(VOTElement *)_currentElement doesHaveTraits:v6]&& ![(VOTElement *)_currentElement doesHaveTraits:v59])
  {
    [(VOTElementManager *)self _setCurrentElement:0];
    v66 = +[VOTDisplayManager displayManager];
    [v66 setCursorFrame:{CGRectZero.origin.x, CGRectZero.origin.y, CGRectZero.size.width, CGRectZero.size.height}];
  }

  self->_lastActivationTime = CFAbsoluteTimeGetCurrent();
}

- (void)_disableQuickNavStateTemporarily
{
  v3 = VOTLogCommon();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B2BC();
  }

  if (GSEventIsHardwareKeyboardAttached())
  {
    v4 = +[VOTKeyboardManager keyboardManager];
    isQuickNavOn = [v4 isQuickNavOn];

    if (isQuickNavOn)
    {
      [VOTSharedWorkspace temporarilyChangeQuickNavState:0];
      [(VOTElementManager *)self _handleQuickNavFeedback:0];
      self->_lastTemporaryQuickNavDisableTime = CFAbsoluteTimeGetCurrent();
    }
  }
}

- (void)_handlePerformCustomAction:(id)action
{
  actionCopy = action;
  if (self->_customActionIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    goto LABEL_25;
  }

  _currentCachedCustomActionCategories = [(VOTElementManager *)self _currentCachedCustomActionCategories];
  elementRotor = [(VOTElementManager *)self elementRotor];
  v7 = [_currentCachedCustomActionCategories objectAtIndexedSubscript:{objc_msgSend(elementRotor, "customActionIndex")}];
  actions = [v7 actions];

  customActionIndex = self->_customActionIndex;
  if ((customActionIndex & 0x8000000000000000) != 0 || customActionIndex >= [actions count])
  {
LABEL_24:

LABEL_25:
    _currentCachedCustomActionCategories = +[VOTOutputManager outputManager];
    actions = +[VOSOutputEvent BoundaryEncountered];
    [_currentCachedCustomActionCategories sendEvent:actions];
    goto LABEL_26;
  }

  v10 = [actions objectAtIndexedSubscript:self->_customActionIndex];
  indexPathAsRange = [(VOTElement *)self->_currentElement indexPathAsRange];
  v13 = v12;
  uiElement = [(VOTElement *)self->_currentElement uiElement];
  [uiElement updateCache:2078];

  if (indexPathAsRange != [(VOTElement *)self->_currentElement indexPathAsRange]|| v13 != v15)
  {
    v16 = VOTLogCommon();
    if (os_log_type_enabled(v16, OS_LOG_TYPE_INFO))
    {
      LOWORD(v30) = 0;
      _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, "Custom action has gone to wrong cell!", &v30, 2u);
    }

    parentTableOrCollectionView = [(VOTElement *)self->_currentElement parentTableOrCollectionView];
    v18 = parentTableOrCollectionView;
    if (parentTableOrCollectionView)
    {
      v19 = [parentTableOrCollectionView elementAtRow:indexPathAsRange andColumn:v13];
      if (([v19 isEqual:self->_currentElement] & 1) == 0)
      {
        [(VOTElementManager *)self _setCurrentElement:v19];
        v20 = VOTLogCommon();
        if (os_log_type_enabled(v20, OS_LOG_TYPE_INFO))
        {
          v30 = 138412290;
          v31 = v19;
          _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "Resetting element to %@", &v30, 0xCu);
        }
      }
    }
  }

  [v10 activationPoint];
  if (CGPointZero.x == v22 && CGPointZero.y == v21)
  {
    v23 = [v10 performWithContext:self];
  }

  else
  {
    currentElement = self->_currentElement;
    [v10 activationPoint];
    v23 = [VOTElement performTapAtPoint:"performTapAtPoint:withForce:playSound:" withForce:0 playSound:?];
  }

  v25 = v23;
  v26 = +[VOTOutputManager outputManager];
  v27 = +[VOSOutputEvent DidActivateElement];
  [v26 sendEvent:v27];

  if (!v25)
  {

    goto LABEL_24;
  }

  customRotorActions = [(VOTElement *)self->_currentElement customRotorActions];
  v29 = [customRotorActions containsObject:v10];

  if ((v29 & 1) == 0)
  {
    self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

LABEL_26:
}

- (void)_handlePerformAudiographAction:(id)action
{
  if (!AXDeviceSupportsSonification())
  {
    return;
  }

  v21 = [(VOTElementManager *)self availableAudiographActionsForElement:self->_currentElement];
  if (![v21 containsObject:self->_audiographActionIdentifier])
  {
    goto LABEL_16;
  }

  v4 = +[VOTAudiographManager sharedManager];
  v5 = +[VOTOutputManager outputManager];
  audiographActionIdentifier = self->_audiographActionIdentifier;
  v7 = off_1001FDDD0;
  language = [(VOTElement *)self->_currentElement language];
  v9 = sub_1000511CC(v7, @"search.rotor.audiograph.describe.chart", language);
  LODWORD(audiographActionIdentifier) = [(NSString *)audiographActionIdentifier isEqualToString:v9];

  if (!audiographActionIdentifier)
  {
    v11 = self->_audiographActionIdentifier;
    v12 = off_1001FDDD0;
    language2 = [(VOTElement *)self->_currentElement language];
    v14 = sub_1000511CC(v12, @"search.rotor.audiograph.chart.details", language2);
    LODWORD(v11) = [(NSString *)v11 isEqualToString:v14];

    if (v11)
    {
      chartDescriptor = [(VOTElement *)self->_currentElement chartDescriptor];
      if (chartDescriptor)
      {
        v15 = +[AXSpringBoardServer server];
        dictionaryRepresentation = [chartDescriptor dictionaryRepresentation];
        [v15 showRemoteView:5 withData:dictionaryRepresentation];
      }

      goto LABEL_9;
    }

    v17 = self->_audiographActionIdentifier;
    v18 = off_1001FDDD0;
    language3 = [(VOTElement *)self->_currentElement language];
    v20 = sub_1000511CC(v18, @"search.rotor.audiograph.play.sonification", language3);
    LODWORD(v17) = [(NSString *)v17 isEqualToString:v20];

    if (v17)
    {
      if ([v4 isScrubbing])
      {
        [v4 endScrubbingSession];
      }

      if (([v4 isPlaying] & 1) == 0)
      {
        [v4 play];
      }

      goto LABEL_17;
    }

LABEL_16:
    v4 = +[VOTOutputManager outputManager];
    v5 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v5];
    goto LABEL_17;
  }

  chartDescriptor = [(VOTElement *)self->_currentElement chartStructureDescription];
  [v5 speakSimpleString:chartDescriptor];
LABEL_9:

LABEL_17:
}

- (void)_handleSimpleTap:(id)tap
{
  tapCopy = tap;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (AXDeviceIsTV())
  {
    if ([tapCopy origin] == 4 || objc_msgSend(tapCopy, "origin") == 5 || objc_msgSend(tapCopy, "origin") == 6)
    {
      if ([(VOTElementManager *)self isItemChooserVisible])
      {
        [(VOTElementManager *)self _closeItemChooser];
      }

      else
      {
        [(VOTElementManager *)self __handleTVSelectButtonClicked];
      }

      goto LABEL_50;
    }

    v13 = +[AXSubsystemVoiceOver sharedInstance];
    ignoreLogging = [v13 ignoreLogging];

    if (ignoreLogging)
    {
      goto LABEL_50;
    }

    v15 = +[AXSubsystemVoiceOver identifier];
    v10 = AXLoggerForFacility();

    v16 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v10, v16))
    {
      v17 = AXColorizeFormatLog();
      v18 = _AXStringForArgs();
      if (os_log_type_enabled(v10, v16))
      {
        *buf = 138543362;
        v26 = v18;
        _os_log_impl(&_mh_execute_header, v10, v16, "%{public}@", buf, 0xCu);
      }
    }

LABEL_12:

    goto LABEL_50;
  }

  if ([(VOTElementManager *)self _shouldSendTapStraightToSystem])
  {
    v5 = [tapCopy objectForIndex:101];
    [v5 pointValue];
    v7 = v6;
    v9 = v8;

    v10 = +[VOTElement systemWideElement];
    [v10 performSimpleTapAtPoint:0 forElement:v7, v9];
    goto LABEL_12;
  }

  command = [tapCopy command];
  if ([command isEqualToString:kVOTEventCommandSplitTapTap])
  {
    currentElementAllowsDirectTouch = [(VOTElementManager *)self currentElementAllowsDirectTouch];

    if (currentElementAllowsDirectTouch)
    {
      goto LABEL_50;
    }
  }

  else
  {
  }

  if (self->_flags.tapShouldHandleAutofill)
  {
    [(VOTElementManager *)self _handlePerformTapAutofill:tapCopy];
  }

  else if (self->_flags.tapShouldHandleTextOperation)
  {
    [(VOTElementManager *)self _handlePerformTextOperation:tapCopy];
  }

  else if (-[VOTRotor currentRotorType](self->_elementRotor, "currentRotorType") != 54 || (customActionIndex = self->_customActionIndex, customActionIndex == 0x7FFFFFFFFFFFFFFFLL) || (-[VOTElementManager _currentCustomActions](self, "_currentCustomActions"), v20 = objc_claimAutoreleasedReturnValue(), v21 = [v20 count], v20, customActionIndex >= v21))
  {
    if (AXDeviceSupportsSonification() && [(VOTRotor *)self->_elementRotor currentRotorType]== 65 && self->_audiographActionIdentifier && [(VOTElement *)self->_currentElement supportsAudiographs])
    {
      [(VOTElementManager *)self _handlePerformAudiographAction:tapCopy];
    }

    else if (self->_inTextProcessingRotorMode && self->_misspelledWordReplacementCycleIndex != 0x7FFFFFFFFFFFFFFFLL)
    {
      [(VOTElementManager *)self _processMisspelledWordTextReplacement];
    }

    else if ([(VOTRotor *)self->_elementRotor currentRotorType]== 96 && (copiedSpeechIndex = self->_copiedSpeechIndex, copiedSpeechIndex != 0x7FFFFFFFFFFFFFFFLL))
    {
      if (copiedSpeechIndex >= 1 && copiedSpeechIndex == [(NSMutableArray *)self->_copiedSpeechItems count])
      {
        [(VOTElementManager *)self _handleClearCopiedSpeech];
      }

      else
      {
        [(VOTElementManager *)self _handlePasteCopiedSpeech];
      }
    }

    else
    {
      if (self->_flags.wasSendingToNativeSlide)
      {
        [(VOTElementManager *)self _endNativeSliding:1];
      }

      [(VOTElementManager *)self _handlePerformPressAction:tapCopy];
      application = [(VOTElement *)self->_currentElement application];
      bundleIdentifier = [application bundleIdentifier];

      if (([bundleIdentifier hasPrefix:@"com.apple."] & 1) == 0)
      {
        AXPerformBlockOnMainThreadAfterDelay();
      }
    }
  }

  else
  {
    [(VOTElementManager *)self _handlePerformCustomAction:tapCopy];
  }

LABEL_50:
}

- (void)_handleAutomationGeneratedTouchUpEvent:(id)event
{
  eventCopy = event;
  v13 = [eventCopy objectForIndex:114];
  fingersFromTouchCommands = [(VOTElementManager *)self fingersFromTouchCommands];
  [fingersFromTouchCommands removeObjectForKey:v13];

  fingersFromTouchCommands2 = [(VOTElementManager *)self fingersFromTouchCommands];
  allKeys = [fingersFromTouchCommands2 allKeys];
  v8 = [allKeys count];

  if (v8)
  {
    [(VOTElementManager *)self _handleAutomationGeneratedChordChangeEvent:eventCopy];
  }

  else
  {
    [eventCopy touchPoint];
    v10 = v9;
    v12 = v11;

    [(VOTElementManager *)self _sendAutomationTouchCommand:6 location:v10, v12];
  }
}

- (void)_handleAutomationGeneratedTouchDownEvent:(id)event
{
  eventCopy = event;
  v14 = [eventCopy objectForIndex:114];
  [eventCopy touchPoint];
  v5 = [NSValue valueWithPoint:?];
  fingersFromTouchCommands = [(VOTElementManager *)self fingersFromTouchCommands];
  [fingersFromTouchCommands setObject:v5 forKey:v14];

  fingersFromTouchCommands2 = [(VOTElementManager *)self fingersFromTouchCommands];
  allKeys = [fingersFromTouchCommands2 allKeys];
  v9 = [allKeys count];

  if (v9 < 2)
  {
    [eventCopy touchPoint];
    v11 = v10;
    v13 = v12;

    [(VOTElementManager *)self _sendAutomationTouchCommand:1 location:v11, v13];
  }

  else
  {
    [(VOTElementManager *)self _handleAutomationGeneratedChordChangeEvent:eventCopy];
  }
}

- (void)_handleAutomationGeneratedTouchMoveEvent:(id)event
{
  eventCopy = event;
  v11 = [eventCopy objectForIndex:114];
  [eventCopy touchPoint];
  v5 = [NSValue valueWithPoint:?];
  fingersFromTouchCommands = [(VOTElementManager *)self fingersFromTouchCommands];
  [fingersFromTouchCommands setObject:v5 forKey:v11];

  [eventCopy touchPoint];
  v8 = v7;
  v10 = v9;

  [(VOTElementManager *)self _sendAutomationTouchCommand:2 location:v8, v10];
}

- (void)_handleAutomationGeneratedTouchCancelEvent:(id)event
{
  eventCopy = event;
  fingersFromTouchCommands = [(VOTElementManager *)self fingersFromTouchCommands];
  [fingersFromTouchCommands removeAllObjects];

  [eventCopy touchPoint];
  v7 = v6;
  v9 = v8;

  [(VOTElementManager *)self _sendAutomationTouchCommand:8 location:v7, v9];
}

- (void)_handleAutomationGeneratedChordChangeEvent:(id)event
{
  eventCopy = event;
  v5 = +[AXEventTapManager sharedManager];
  [eventCopy touchPoint];
  v6 = [AXEventRepresentation touchRepresentationWithHandType:5 location:?];
  [v6 setSenderID:0x8000000817319377];
  fingersFromTouchCommands = [(VOTElementManager *)self fingersFromTouchCommands];
  allKeys = [fingersFromTouchCommands allKeys];

  v12 = 0;
  v13 = &v12;
  v14 = 0x3032000000;
  v15 = sub_100068050;
  v16 = sub_100068060;
  v17 = +[NSMutableArray array];
  v11[0] = _NSConcreteStackBlock;
  v11[1] = 3221225472;
  v11[2] = sub_10007F400;
  v11[3] = &unk_1001C9AD8;
  v11[4] = self;
  v11[5] = &v12;
  [allKeys enumerateObjectsUsingBlock:v11];
  v9 = v13[5];
  handInfo = [v6 handInfo];
  [handInfo setPaths:v9];

  [v5 sendHIDSystemEvent:v6 senderID:0x8000000817319377];
  _Block_object_dispose(&v12, 8);
}

- (void)_sendAutomationTouchCommand:(unsigned int)command location:(CGPoint)location
{
  y = location.y;
  x = location.x;
  v6 = *&command;
  v8 = +[AXEventTapManager sharedManager];
  v7 = [AXEventRepresentation touchRepresentationWithHandType:v6 location:x, y];
  [v7 setSenderID:0x8000000817319377];
  [v8 sendHIDSystemEvent:v7 senderID:0x8000000817319377];
}

- (void)_handleSimulatedForceTouchEvent:(id)event
{
  lastEventCommand = [(VOTElementManager *)self lastEventCommand];
  v5 = [lastEventCommand isEqualToString:kVOTEventCommandSimulatedForceTouch];

  if (v5 && self->_didPeekEvent)
  {
    AXForceTouchThresholdPeek();
    v7 = v6;
    v8 = 1;
    AXForceTouchThresholdPop();
    v10 = v9;
  }

  else
  {
    v7 = 20.0;
    AXForceTouchThresholdPeek();
    v10 = v11;
    v8 = 0;
  }

  _currentElement = [(VOTElementManager *)self _currentElement];
  windowContextId = [_currentElement windowContextId];
  [_currentElement centerPoint];
  if (v7 < v10)
  {
    v15 = v13;
    v16 = v14;
    do
    {
      v17 = +[VOTElement systemWideElement];
      [v17 postFingerTouchAtPoint:windowContextId withForce:v15 withContextId:{v16, v7}];

      usleep(0x1388u);
      v7 = v7 + 20.0;
    }

    while (v7 < v10);
  }

  if (([(NSMutableArray *)self->_touchEventElements containsObject:_currentElement]& 1) == 0)
  {
    [(NSMutableArray *)self->_touchEventElements addObject:_currentElement];
  }

  v18 = 3.0;
  if (v8)
  {
    v18 = 0.5;
  }

  [(SCRCTargetSelectorTimer *)self->_simulatedForceLiftTimer dispatchAfterDelay:v18];
  self->_didPeekEvent = v8 ^ 1;
}

- (void)_handleWatchWakeTap:(id)tap
{
  tapCopy = tap;
  v5 = AXLogTapticTime();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    v8 = 138412290;
    v9 = tapCopy;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "_handleWatchWakeTap: %@", &v8, 0xCu);
  }

  v6 = +[AXSettings sharedInstance];
  voiceOverTapticTimeMode = [v6 voiceOverTapticTimeMode];

  if (voiceOverTapticTimeMode)
  {
    [(VOTElementManager *)self _handleUnmuteEligibleEventOccured];
    [(VOTElementManager *)self _handleScreenOn];
  }
}

- (void)_handleToggleSettingsHUD:(id)d
{
  dCopy = d;
  v5 = +[AXSettings sharedInstance];
  securePayAssertionActive = [v5 securePayAssertionActive];

  if (securePayAssertionActive)
  {
    v7 = AXLogAssertions();
    if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
    {
      LOWORD(v15) = 0;
      _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "Not processing quick settings because secure pay mode active", &v15, 2u);
    }
  }

  else
  {
    v7 = [[AXQuickSettingsData alloc] init];
    _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
    v10 = v9;
    webAreaURL = [(VOTElement *)self->_currentElement webAreaURL];
    host = [webAreaURL host];
    [v7 setWebAreaURL:host];

    [v7 setFrontmostAppIdentifier:_appInfoForCurrentElement];
    v13 = VOTLogCommon();
    if (os_log_type_enabled(v13, OS_LOG_TYPE_DEFAULT))
    {
      v15 = 138412290;
      v16 = v7;
      _os_log_impl(&_mh_execute_header, v13, OS_LOG_TYPE_DEFAULT, "Launching settings HUD with data %@", &v15, 0xCu);
    }

    v14 = +[AXSpringBoardServer server];
    [v14 launchVoiceOverQuickSettingsViewService:v7];
  }
}

- (void)_handleWatchWakeDoubleTap:(id)tap
{
  tapCopy = tap;
  v5 = AXLogTapticTime();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    v9 = 138412290;
    v10 = tapCopy;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "_handleWatchWakeDoubleTap: %@", &v9, 0xCu);
  }

  if ([(VOTElementManager *)self _canActivateTapticTime])
  {
    v6 = +[AXTapticTimeManager sharedInstance];
    v7 = +[AXSettings sharedInstance];
    [v6 outputHoursAndMinutes:{objc_msgSend(v7, "voiceOverTapticTimeEncoding")}];

    v8 = dispatch_get_global_queue(-32768, 0);
    dispatch_async(v8, &stru_1001C9AF8);
  }

  else
  {
    [(VOTElementManager *)self _handleUnmuteEligibleEventOccured];
    v8 = [VOTEvent internalEventWithCommand:kVOTEventCommandSimpleTap info:0];
    [(VOTElementManager *)self _handleDoubleTap:v8];
  }
}

- (void)_handleWatchWakeTripleTap:(id)tap
{
  tapCopy = tap;
  v5 = AXLogTapticTime();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    v8 = 138412290;
    v9 = tapCopy;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "_handleWatchWakeTripleTap: %@", &v8, 0xCu);
  }

  if ([(VOTElementManager *)self _canActivateTapticTime])
  {
    v6 = +[AXTapticTimeManager sharedInstance];
    v7 = +[AXSettings sharedInstance];
    [v6 outputMinutes:{objc_msgSend(v7, "voiceOverTapticTimeEncoding")}];
  }

  else
  {
    [(VOTElementManager *)self _handleUnmuteEligibleEventOccured];
    v6 = [VOTEvent internalEventWithCommand:kVOTEventCommandDoubleTap info:0];
    [(VOTElementManager *)self _handleDoubleTap:v6];
  }
}

- (void)_handleActivateHomeButton:(id)button
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateHomeButton];
}

- (BOOL)_canActivateTapticTime
{
  v2 = +[AXSettings sharedInstance];
  voiceOverTapticTimeMode = [v2 voiceOverTapticTimeMode];

  if ((voiceOverTapticTimeMode & 1) == 0)
  {
    v5 = AXLogTapticTime();
    if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
    {
      v13 = 0;
      v8 = "Taptic time not enabled";
      v9 = &v13;
LABEL_9:
      _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, v8, v9, 2u);
    }

LABEL_10:
    v7 = 0;
    goto LABEL_11;
  }

  v4 = AXIsBuddyCompleted();
  v5 = AXLogTapticTime();
  v6 = os_log_type_enabled(v5, OS_LOG_TYPE_INFO);
  if ((v4 & 1) == 0)
  {
    if (v6)
    {
      *buf = 0;
      v8 = "Buddy not completed!";
      v9 = buf;
      goto LABEL_9;
    }

    goto LABEL_10;
  }

  if (v6)
  {
    *v11 = 0;
    v7 = 1;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "Can activate taptic time", v11, 2u);
  }

  else
  {
    v7 = 1;
  }

LABEL_11:

  return v7;
}

- (void)_simulatedForceTouchLift
{
  if (!self->_isInPreview)
  {
    if ([(NSMutableArray *)self->_touchEventElements count])
    {
      v3 = 0;
      do
      {
        v4 = [(NSMutableArray *)self->_touchEventElements objectAtIndex:v3];
        windowContextId = [v4 windowContextId];
        v6 = +[AXBackBoardServer server];
        v7 = [v6 contextIdHostingContextId:windowContextId];

        [v4 centerPoint];
        v9 = v8;
        v11 = v10;
        v12 = +[VOTElement systemWideElement];
        [v12 postFingerLiftAtPoint:windowContextId withContextId:{v9, v11}];

        v13 = +[VOTElement systemWideElement];
        [v13 postFingerLiftAtPoint:v7 withContextId:{v9, v11}];

        ++v3;
      }

      while ([(NSMutableArray *)self->_touchEventElements count]> v3);
    }

    self->_didPeekEvent = 0;
    [(NSMutableArray *)self->_touchEventElements removeAllObjects];
  }

  simulatedForceLiftTimer = self->_simulatedForceLiftTimer;

  [(SCRCTargetSelectorTimer *)simulatedForceLiftTimer cancel];
}

- (void)_handleToggleMute:(id)mute
{
  v3 = VOTSharedWorkspace;
  v4 = [VOTSharedWorkspace voiceOverMuted] ^ 1;

  [v3 setVoiceOverMuted:v4];
}

- (void)_handleToggleRotationCapability:(id)capability
{
  v3 = +[VOTConfiguration rootConfiguration];
  v14 = [v3 preferenceForKey:@"DeviceRotation"];

  if (v14)
  {
    v4 = [v14 BOOLValue] ^ 1;
  }

  else
  {
    v4 = 0;
  }

  v5 = +[VOTElement systemWideElement];
  v6 = v5;
  v7 = v4 & 1;
  if (v7)
  {
    v8 = @"rotation.capability.on";
  }

  else
  {
    v8 = @"rotation.capability.off";
  }

  [v5 setRotationCapabilityEnabled:v7];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = sub_1000516CC(off_1001FDDD0, v8, 0, selectedLanguage);
  v11 = sub_1000095FC(v10, 0, selectedLanguage);

  v12 = +[VOTConfiguration rootConfiguration];
  v13 = [NSNumber numberWithBool:v7];
  [v12 setPreference:v13 forKey:@"DeviceRotation"];
}

- (void)_handleToggleScreenCurtain:(id)curtain
{
  v3 = VOTSharedWorkspace;
  v4 = [VOTSharedWorkspace screenCurtainEnabled] ^ 1;

  [v3 setScreenCurtainEnabled:v4];
}

- (void)_handleToggleSoundCurtain:(id)curtain
{
  v3 = +[AXSettings sharedInstance];
  voiceOverSoundCurtain = [v3 voiceOverSoundCurtain];

  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSoundCurtain:voiceOverSoundCurtain ^ 1];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = selectedLanguage;
  if (voiceOverSoundCurtain)
  {
    v7 = @"soundcurtain.off";
  }

  else
  {
    v7 = @"soundcurtain.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, selectedLanguage);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleToggleCaptionPanel:(id)panel
{
  v3 = +[AXSettings sharedInstance];
  enableVoiceOverCaptions = [v3 enableVoiceOverCaptions];

  v5 = +[AXSettings sharedInstance];
  [v5 setEnableVoiceOverCaptions:enableVoiceOverCaptions ^ 1];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = selectedLanguage;
  if (enableVoiceOverCaptions)
  {
    v7 = @"vocaptions.off";
  }

  else
  {
    v7 = @"vocaptions.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, selectedLanguage);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleToggleIgnoreTrackpad:(id)trackpad
{
  v3 = +[AXSettings sharedInstance];
  voiceOverIgnoreTrackpad = [v3 voiceOverIgnoreTrackpad];

  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverIgnoreTrackpad:voiceOverIgnoreTrackpad ^ 1];
}

- (void)_handleStartSiri:(id)siri
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateSiri];
}

- (void)_handleToggleTypeToSiri:(id)siri
{
  v3 = +[AXSpringBoardServer server];
  isTypeToSiriVisible = [v3 isTypeToSiriVisible];

  if (isTypeToSiriVisible)
  {
    if ([VOTSharedWorkspace supportsHomeGestures])
    {
      v5 = +[AXSpringBoardServer server];
      dismissBuddyIfNecessary = [v5 dismissBuddyIfNecessary];

      if ((dismissBuddyIfNecessary & 1) == 0)
      {
        v7 = VOTSharedWorkspace;

        [v7 performHomeButtonPress];
      }
    }
  }

  else
  {
    v8 = +[AXPISystemActionHelper sharedInstance];
    [v8 activateTypeToSiri];
  }
}

- (void)_cancelIndefiniteLongPress
{
  if ([(VOTElementManager *)self isIndefiniteLongPressOngoing])
  {
    [(VOTElementManager *)self setIsIndefiniteLongPressOngoing:0];
    v5 = +[VOTElement systemWideElement];
    [(VOTElementManager *)self indefiniteLongPressPoint];
    [v5 postFingerLiftAtPoint:-[VOTElementManager indefiniteLongPressContextId](self withContextId:{"indefiniteLongPressContextId"), v3, v4}];
  }
}

- (void)_reallySimulateLongPressForElement:(id)element
{
  elementCopy = element;
  windowContextId = [elementCopy windowContextId];
  [elementCopy visiblePoint];
  if (v7 == -1.0 && v6 == -1.0)
  {
    [elementCopy centerPoint];
    if (v9 == -1.0 && v10 == -1.0)
    {
      [elementCopy frame];
      AX_CGRectGetCenter();
      v16 = v15;
      v18 = v17;
      v14 = VOTLogElement();
      if (os_log_type_enabled(v14, OS_LOG_TYPE_DEBUG))
      {
        sub_10012B400(v16, v18);
      }
    }

    else
    {
      v12 = v9;
      v13 = v10;
      v14 = VOTLogElement();
      if (os_log_type_enabled(v14, OS_LOG_TYPE_DEBUG))
      {
        sub_10012B374(v12, v13);
      }
    }
  }

  [elementCopy displayId];
  AXConvertPointFromHostedCoordinates();
  v20 = v19;
  v22 = v21;
  if ([elementCopy longPressHostContextId])
  {
    windowContextId = [elementCopy windowContextIdImmediateRemoteParent:windowContextId];
  }

  Current = CFAbsoluteTimeGetCurrent();
  if ([(VOTElementManager *)self isIndefiniteLongPressOngoing])
  {
    [(VOTElementManager *)self _cancelIndefiniteLongPress];
  }

  else
  {
    [(VOTElementManager *)self lastSimulatedLongPressTime];
    if (Current - v24 >= 0.5)
    {
      [(VOTElementManager *)self setLastSimulatedLongPressTime:Current];
      [(VOTElementManager *)self setIndefiniteLongPressPoint:v20, v22];
      [(VOTElementManager *)self setIndefiniteLongPressContextId:windowContextId];
      v26 = +[VOTElement systemWideElement];
      [v26 postFingerTouchAtPoint:windowContextId withForce:v20 withContextId:{v22, 0.0}];

      v27 = [[AXDispatchTimer alloc] initWithTargetSerialQueue:&_dispatch_main_q];
      [(VOTElementManager *)self setSimulatedLongPressTimer:v27];

      simulatedLongPressTimer = [(VOTElementManager *)self simulatedLongPressTimer];
      v29[0] = _NSConcreteStackBlock;
      v29[1] = 3221225472;
      v29[2] = sub_1000807F8;
      v29[3] = &unk_1001C9B18;
      *&v29[4] = v20;
      *&v29[5] = v22;
      v30 = windowContextId;
      [simulatedLongPressTimer afterDelay:v29 processBlock:1.0];
    }

    else
    {
      [(VOTElementManager *)self setIsIndefiniteLongPressOngoing:1];
      simulatedLongPressTimer2 = [(VOTElementManager *)self simulatedLongPressTimer];
      [simulatedLongPressTimer2 cancel];

      [(VOTElementManager *)self setSimulatedLongPressTimer:0];
    }
  }
}

- (BOOL)_handleSimulatedLongPress:(id)press
{
  v4 = +[VOTOutputManager outputManager];
  v5 = +[VOSOutputEvent DidBeginPassthrough];
  [v4 sendEvent:v5];

  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveTraits:kAXWebContentTrait])
  {
    [_currentElement centerPoint];
    v7 = [NSValue valueWithCGPoint:?];
  }

  else
  {
    v7 = 0;
  }

  if ([_currentElement attemptToShowContextMenuWithTargetPointValue:v7])
  {
    [(VOTElementManager *)self setLastAttemptToShowContextMenuTime:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self setLastElementForAttemptToShowContextMenu:_currentElement];
  }

  else
  {
    [(VOTElementManager *)self _reallySimulateLongPressForElement:_currentElement];
  }

  return 1;
}

- (void)_handleDuckingDisabling:(id)disabling
{
  disablingCopy = disabling;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v8 = VOTLogCommon();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_ERROR))
    {
      sub_10012B48C();
    }

    goto LABEL_8;
  }

  duckingTemporarilyDisabled = [VOTSharedWorkspace duckingTemporarilyDisabled];
  if (duckingTemporarilyDisabled != [disablingCopy BOOLValue])
  {
    [(VOTElementManager *)self setLastDuckingDisablementSessionStart:CFAbsoluteTimeGetCurrent()];
    v6 = VOTLogCommon();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
    {
      v9 = 138412290;
      v10 = disablingCopy;
      _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "Temporarily disabling ducking: %@", &v9, 0xCu);
    }

    bOOLValue = [disablingCopy BOOLValue];
    [VOTSharedWorkspace setDuckingTemporarilyDisabled:bOOLValue];
    v8 = +[VOTOutputManager outputManager];
    [v8 updateAudioSessionProperties];
LABEL_8:
  }
}

- (void)_handlePauseSpeechAndHapticsNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v8 = VOTLogCommon();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_ERROR))
    {
      sub_10012B4F4();
    }

    goto LABEL_9;
  }

  pauseSpeechAndHaptics = [VOTSharedWorkspace pauseSpeechAndHaptics];
  if (pauseSpeechAndHaptics != [notificationCopy BOOLValue])
  {
    [(VOTElementManager *)self setLastPauseSpeechAndHapticsStart:CFAbsoluteTimeGetCurrent()];
    v6 = VOTLogCommon();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
    {
      v9 = 138412290;
      v10 = notificationCopy;
      _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "Temporarily pausing speech and haptics: %@", &v9, 0xCu);
    }

    bOOLValue = [notificationCopy BOOLValue];
    [VOTSharedWorkspace setPauseSpeechAndHaptics:bOOLValue];
    if ([VOTSharedWorkspace pauseSpeechAndHaptics])
    {
      v8 = +[VOTOutputManager outputManager];
      [v8 stopSpeakingAtBoundary:0];
LABEL_9:
    }
  }
}

- (void)_handleAudiographSelectedSeriesChangedNotification:(id)notification
{
  notificationCopy = notification;
  if (AXDeviceSupportsSonification())
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      integerValue = [notificationCopy integerValue];
      v5 = +[AXMDataSonifier sharedInstance];
      [v5 setCurrentSeriesIndex:integerValue];
    }

    else
    {
      v6 = VOTLogCommon();
      if (os_log_type_enabled(v6, OS_LOG_TYPE_ERROR))
      {
        sub_10012B55C();
      }
    }
  }
}

- (void)_handleAudiographPlaybackStateNotification:(id)notification
{
  bOOLValue = [notification BOOLValue];
  v4 = +[VOTAudiographManager sharedManager];
  v5 = v4;
  if (bOOLValue)
  {
    [v4 play];
  }

  else
  {
    [v4 pause];
  }
}

- (void)_handleContextMenuStatusNotification:(id)notification
{
  notificationCopy = notification;
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastAttemptToShowContextMenuTime];
  if (Current - v6 < 1.0)
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      if (![notificationCopy intValue])
      {
        lastElementForAttemptToShowContextMenu = [(VOTElementManager *)self lastElementForAttemptToShowContextMenu];
        [(VOTElementManager *)self _reallySimulateLongPressForElement:lastElementForAttemptToShowContextMenu];
      }
    }

    else
    {
      v8 = VOTLogCommon();
      if (os_log_type_enabled(v8, OS_LOG_TYPE_FAULT))
      {
        sub_10012B5C4();
      }
    }
  }
}

- (id)_currentElementAtCenterPointOfElement:(id)element
{
  elementCopy = element;
  v4 = +[VOTElement systemWideElement];
  [elementCopy centerPoint];
  v6 = v5;
  v8 = v7;
  windowContextId = [elementCopy windowContextId];

  [v4 convertPoint:windowContextId fromContextId:{v6, v8}];
  v11 = v10;
  v13 = v12;

  v14 = [[VOTElement alloc] initWithPosition:v11, v13];

  return v14;
}

- (void)_simulatedPressOutputTimer:(id)timer
{
  timerCopy = timer;
  v4 = [objc_allocWithZone(VOTOutputRequest) init];
  v5 = [timerCopy doesHaveTraits:kAXKeyboardKeyTrait];
  v6 = [timerCopy doesHaveTraits:kAXStartsMediaSessionTrait];
  useElementAtPositionAfterActivation = [timerCopy useElementAtPositionAfterActivation];
  v8 = v5 | v6;
  if (((v5 | v6) & 1) == 0)
  {
    [timerCopy updateLabel];
    [timerCopy updateHint];
    [timerCopy updateRoleDescription];
  }

  [timerCopy updateTraits];
  [timerCopy updateValue];
  [timerCopy updateEquivalenceTag];
  [timerCopy updateExpandedStatus];
  if ([timerCopy doesHaveTraits:kAXWebContentTrait])
  {
    [timerCopy updateRoleDescription];
    isValid = [timerCopy isValid];
  }

  else
  {
    application = [timerCopy application];
    isValid = [timerCopy isValidForApplication:application];
  }

  if (!(useElementAtPositionAfterActivation & 1 | ((isValid & 1) == 0)))
  {
    v14 = 4;
    goto LABEL_16;
  }

  v11 = [(VOTElementManager *)self _currentElementAtCenterPointOfElement:timerCopy];
  equivalenceTag = [timerCopy equivalenceTag];
  equivalenceTag2 = [v11 equivalenceTag];
  if (useElementAtPositionAfterActivation)
  {
    if (([v11 isValid] & 1) == 0)
    {
LABEL_14:
      isValid = [timerCopy isAlive] & (useElementAtPositionAfterActivation ^ 1);
      v14 = 4;
      goto LABEL_15;
    }
  }

  else if (equivalenceTag && ![equivalenceTag isEqualToString:equivalenceTag2])
  {
    goto LABEL_14;
  }

  v15 = v11;

  [(VOTElementManager *)self _setCurrentElement:v15];
  v14 = 0;
  isValid = 1;
  timerCopy = v15;
LABEL_15:

LABEL_16:
  if ([timerCopy doesHaveTraits:kAXToggleTrait])
  {
    roleDescription = [timerCopy roleDescription];
    v17 = [roleDescription length] == 0;
  }

  else
  {
    v17 = 0;
  }

  if (([timerCopy doesHaveTraits:kAXIsEditingTrait] & 1) == 0 && (objc_msgSend(timerCopy, "doesHaveTraits:", kAXWebInteractiveVideoTrait) & 1) == 0 && ((isValid ^ 1) & 1) == 0)
  {
    if (v17)
    {
      toggleStatusLabel = [timerCopy toggleStatusLabel];
      v21 = [v4 addString:toggleStatusLabel];
    }

    else
    {
      value = [timerCopy value];
      v23 = [value length];

      if (v23 <= 0x64)
      {
        v24 = v14;
      }

      else
      {
        v24 = v14 | 0x1000;
      }

      [(VOTElementManager *)self _addDescription:timerCopy toRequest:v4 withOptions:v24];
    }
  }

  if (((v6 | [timerCopy doesHaveTraits:kAXDeleteKeyTrait]) & 1) == 0 && objc_msgSend(v4, "containsActions") && objc_msgSend(timerCopy, "isEqual:", self->_currentElement))
  {
    [v4 setRequestQueueMixinBehavior:&stru_1001C9B58];
    [(VOTElementManager *)self sendRequest:v4];
  }

  if (((v8 ^ 1 | v6) & 1) == 0)
  {
    [timerCopy updateLabel];
    [timerCopy updateHint];
    [timerCopy updateRoleDescription];
  }

  v18 = VOTSharedWorkspace;
  _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
  [v18 refreshBraille:0 rotorSelection:_currentRotorSelection];
}

- (void)_handlePressActionResultAtTime:(id)time
{
  lastScreenChangeNotificationTime = self->_lastScreenChangeNotificationTime;
  [time doubleValue];
  if (lastScreenChangeNotificationTime <= v5)
  {
    self->_lastScreenChangeNotificationTime = -3061152000.0;
    v14 = +[VOTOutputManager outputManager];
    _currentElement = [(VOTElementManager *)self _currentElement];
    v7 = _currentElement;
    if (_currentElement)
    {
      if ([_currentElement doesHaveTraits:kAXLaunchIconTrait])
      {
        v8 = +[VOTDisplayManager displayManager];
        [v8 setCursorFrameForElement:0];
      }

      else
      {
        [(VOTElementManager *)self _resetDirectInteractionCache];
        Current = CFAbsoluteTimeGetCurrent();
        if (Current - self->_lastFirstResponderChangeTime >= 0.25 || (+[VOTOutputManager outputManager](VOTOutputManager, "outputManager"), v10 = objc_claimAutoreleasedReturnValue(), v11 = [v10 isSpeaking], v10, (v11 & 1) == 0))
        {
          if (![v7 doesHaveTraits:kAXKeyboardKeyTrait] || Current - self->_lastAnnouncementNotificationTime >= 0.25 && objc_msgSend(v7, "doesHaveTraits:", kAXButtonTrait) && Current - self->_lastValueChangeTime >= 0.25)
          {
            [v14 stopSpeakingAtBoundary:0];
            [v7 delayBeforeUpdatingOnActivation];
            if (v12 <= 0.0)
            {
              [(VOTElementManager *)self _simulatedPressOutputTimer:v7];
            }

            else
            {
              v13 = v12;
              [(SCRCTargetSelectorTimer *)self->_simulatedPressOutputTimer cancel];
              [(SCRCTargetSelectorTimer *)self->_simulatedPressOutputTimer dispatchAfterDelay:v7 withObject:v13];
            }
          }
        }
      }
    }
  }
}

- (void)_handleScreenLock:(id)lock
{
  lockCopy = lock;
  [VOTSharedWorkspace screenLockOccurred];
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v5 = [lockCopy objectForKey:@"isUserLocked"];
    bOOLValue = [v5 BOOLValue];

    v7 = [lockCopy objectForKey:@"playLockSound"];
    bOOLValue2 = [v7 BOOLValue];

    v9 = bOOLValue2 ^ 1;
  }

  else
  {
    bOOLValue = 0;
    v9 = 0;
  }

  v10 = +[VOTOutputManager outputManager];
  [v10 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:&off_1001D9FE0];

  v11 = +[AXSettings sharedInstance];
  liveRecognitionActive = [v11 liveRecognitionActive];

  if (liveRecognitionActive)
  {
    v13 = +[VOTMagnifierService shared];
    [v13 dismissDetectionUI];
  }

  v14 = +[VOTElement iosSystemAppApplication];
  isSystemSleeping = [v14 isSystemSleeping];

  if (isSystemSleeping)
  {
    if (![VOTSharedWorkspace isRingerSwitchSilent] || self->_lastEventOccurredTime > self->_lastSilencedAlertTime || (objc_msgSend(VOTSharedWorkspace, "lastLockButtonPressTime"), v16 > self->_lastSilencedAlertTime))
    {
      if ([VOTSharedWorkspace soundEffectsEnabled])
      {
        if ((([VOTSharedWorkspace isRingerSwitchSilent] | v9 | bOOLValue) & 1) == 0)
        {
          goto LABEL_15;
        }

        v17 = +[VOTOutputManager outputManager];
        selectedLanguage = +[VOSOutputEvent ScreenDidTurnOff];
        [v17 sendEvent:selectedLanguage];
      }

      else
      {
        v17 = sub_1000511CC(off_1001FDDD0, @"screen.locked.message", 0);
        selectedLanguage = [VOTSharedWorkspace selectedLanguage];
        v19 = sub_1000095FC(v17, 0, selectedLanguage);
      }
    }

LABEL_15:
    if ([(VOTElementManager *)self _flashlightNotificationsEnabled])
    {
      AXPerformBlockOnMainThreadAfterDelay();
    }
  }

  v20 = +[VOTDisplayManager displayManager];
  [v20 setCursorFrameForElement:0];

  [(VOTElementManager *)self _setCurrentElement:0];
  [(VOTElementManager *)self hideVisualRotor];
  [(VOTElementManager *)self _resetElementLabel];
  previousTableOrCollectionViewList = [(VOTElementManager *)self previousTableOrCollectionViewList];
  [previousTableOrCollectionViewList removeAllObjects];

  previousTableOrCollectionViewToMetadata = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
  [previousTableOrCollectionViewToMetadata removeAllObjects];

  [(VOTElementManager *)self setPreviousTableOrCollectionViewApplication:0];
  self->_systemIsSleeping = 1;
  [(VOTElementManager *)self _closeItemChooser];
  [VOTSharedWorkspace setScreenOn:0 silently:1];
}

- (void)observeValueForKeyPath:(id)path ofObject:(id)object change:(id)change context:(void *)context
{
  pathCopy = path;
  objectCopy = object;
  changeCopy = change;
  if (([pathCopy isEqualToString:@"available"] & 1) != 0 || (objc_msgSend(pathCopy, "isEqualToString:", @"overheated") & 1) != 0 || objc_msgSend(pathCopy, "isEqualToString:", @"flashlightLevel"))
  {
    [(AVFlashlight *)self->_flashlightDevice flashlightLevel];
    v14 = v13 > 0.0;
    if (self->_flashlightOnStatus != v14)
    {
      v15 = v13;
      ++self->_flashlightStatusGeneration;
      v16 = VOTLogCommon();
      if (os_log_type_enabled(v16, OS_LOG_TYPE_INFO))
      {
        *buf = 67109120;
        v19 = v14;
        _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, "Flashlight status change: %d", buf, 8u);
      }

      if (v15 <= 0.0)
      {
        [(SCRCTargetSelectorTimer *)self->_flashlightSystemTimer cancel];
        sub_10008197C(@"VoiceOverFlashlightID");
      }
    }

    self->_flashlightOnStatus = v14;
  }

  else
  {
    v17.receiver = self;
    v17.super_class = VOTElementManager;
    [(VOTElementManager *)&v17 observeValueForKeyPath:pathCopy ofObject:objectCopy change:changeCopy context:context];
  }
}

- (void)_updateFlashlightEnabledStatus
{
  v3 = +[AXSettings sharedInstance];
  self->_flashlightNotificationsEnabled = [v3 voiceOverFlashlightNotificationsEnabled];

  if (self->_flashlightNotificationsEnabled)
  {
    if (!self->_flashlightDevice)
    {
      v4 = [[AVFlashlight alloc] init];
      flashlightDevice = self->_flashlightDevice;
      self->_flashlightDevice = v4;

      [(AVFlashlight *)self->_flashlightDevice addObserver:self forKeyPath:@"available" options:0 context:0];
      [(AVFlashlight *)self->_flashlightDevice addObserver:self forKeyPath:@"overheated" options:0 context:0];
      [(AVFlashlight *)self->_flashlightDevice addObserver:self forKeyPath:@"flashlightLevel" options:0 context:0];
      v6 = [[SCRCTargetSelectorTimer alloc] initWithTarget:self selector:"_sendSystemNotificationForFlashlight" thread:self->_elementManagerThread];
      flashlightSystemTimer = self->_flashlightSystemTimer;
      self->_flashlightSystemTimer = v6;

      sub_100081D18();
      self->_flashlightNotificationGeneration = -1;
      v8 = VOTLogCommon();
      if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
      {
        v9 = self->_flashlightDevice;
        v10 = 138412290;
        v11 = v9;
        _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_DEFAULT, "Initialization flashlight observer: %@", &v10, 0xCu);
      }
    }
  }

  else
  {
    self->_flashlightNotificationGeneration = -1;
  }
}

- (void)_handleFlashlightNotification
{
  if ([(VOTElementManager *)self _flashlightNotificationsEnabled])
  {
    [(AVFlashlight *)self->_flashlightDevice flashlightLevel];
    if (v3 > 0.0 && self->_flashlightStatusGeneration != self->_flashlightNotificationGeneration)
    {
      v4 = sub_1000511CC(off_1001FDDD0, @"flashlight.enabled", 0);
      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v6 = sub_1000095FC(v4, 0, selectedLanguage);

      v7 = VOTLogCommon();
      if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
      {
        *v8 = 0;
        _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "Flashlight not available, speaking message", v8, 2u);
      }

      [(SCRCTargetSelectorTimer *)self->_flashlightSystemTimer dispatchAfterDelay:60.0];
      self->_flashlightNotificationGeneration = self->_flashlightStatusGeneration;
    }
  }
}

- (void)_sendSystemNotificationForFlashlight
{
  v2 = sub_1000516CC(off_1001FDDD0, @"flashlight.notification.title", 0, 0);
  v15 = 0;
  v16 = &v15;
  v17 = 0x2050000000;
  v3 = qword_1001FED40;
  v18 = qword_1001FED40;
  if (!qword_1001FED40)
  {
    *&buf = _NSConcreteStackBlock;
    *(&buf + 1) = 3221225472;
    v20 = sub_1000B2104;
    v21 = &unk_1001C8370;
    v22 = &v15;
    sub_1000B2104(&buf);
    v3 = v16[3];
  }

  v4 = v3;
  _Block_object_dispose(&v15, 8);
  v5 = objc_opt_new();
  [v5 setBody:{0, v15}];
  [v5 setCategoryIdentifier:@"com.apple.VoiceOver.message"];
  [v5 setTitle:v2];
  [v5 setThreadIdentifier:@"VoiceOverFlashlightID"];
  [v5 setShouldSuppressDefaultAction:0];
  [v5 setShouldAuthenticateDefaultAction:0];
  v6 = +[NSDate date];
  v7 = [v6 dateByAddingTimeInterval:21600.0];
  [v5 setExpirationDate:v7];

  v15 = 0;
  v16 = &v15;
  v17 = 0x2050000000;
  v8 = qword_1001FED48;
  v18 = qword_1001FED48;
  if (!qword_1001FED48)
  {
    *&buf = _NSConcreteStackBlock;
    *(&buf + 1) = 3221225472;
    v20 = sub_1000B215C;
    v21 = &unk_1001C8370;
    v22 = &v15;
    sub_1000B215C(&buf);
    v8 = v16[3];
  }

  v9 = v8;
  _Block_object_dispose(&v15, 8);
  v10 = +[NSUUID UUID];
  uUIDString = [v10 UUIDString];
  v12 = [v8 requestWithIdentifier:uUIDString content:v5 trigger:0];

  v13 = VOTLogCommon();
  if (os_log_type_enabled(v13, OS_LOG_TYPE_INFO))
  {
    LODWORD(buf) = 138412290;
    *(&buf + 4) = v12;
    _os_log_impl(&_mh_execute_header, v13, OS_LOG_TYPE_INFO, "Posting local notification: %@", &buf, 0xCu);
  }

  v14 = sub_1000B1C6C();
  [v14 addNotificationRequest:v12 withCompletionHandler:&stru_1001CA2D8];
}

- (void)refreshBraille
{
  v2 = VOTSharedWorkspace;
  _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
  [v2 refreshBraille:0 rotorSelection:_currentRotorSelection];
}

- (id)_currentResponder
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveTraits:kAXKeyboardKeyTrait])
  {
    [(VOTElement *)self->_lastApplication firstResponderElement];
    _currentElement = v4 = _currentElement;
  }

  else
  {
    textInputElement = [_currentElement textInputElement];
    v4 = textInputElement;
    if (textInputElement)
    {
      v4 = textInputElement;

      _currentElement = v4;
    }
  }

  return _currentElement;
}

- (void)_handleNextTextOperationInDirection:(int64_t)direction withEvent:(id)event
{
  v26 = [(VOTElementManager *)self _currentResponder:direction];
  textOperationsOperator = v26;
  if ([v26 doesHaveTraits:kAXWebContentTrait])
  {
    textOperationsOperator = [v26 textOperationsOperator];
  }

  textOperations = [textOperationsOperator textOperations];
  selectedTextOperation = self->_selectedTextOperation;
  if (direction == 2)
  {
    v9 = selectedTextOperation - 1;
  }

  else
  {
    v9 = selectedTextOperation + 1;
  }

  self->_selectedTextOperation = v9;
  _currentCachedCustomActionCategories = [(VOTElementManager *)self _currentCachedCustomActionCategories];
  v11 = [_currentCachedCustomActionCategories ax_firstObjectUsingBlock:&stru_1001C9BD8];

  v12 = [textOperations count];
  actions = [v11 actions];
  v14 = v12 + [actions count];

  v15 = self->_selectedTextOperation;
  if (v15 < 0)
  {
    v15 = v14 - 1;
  }

  else
  {
    if (v15 < v14)
    {
      goto LABEL_11;
    }

    v15 = 0;
  }

  self->_selectedTextOperation = v15;
  if (v14 < 1)
  {
    goto LABEL_55;
  }

LABEL_11:
  if (v15 >= v14)
  {
    goto LABEL_55;
  }

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v17 = self->_selectedTextOperation;
  if (v17 < [textOperations count])
  {
    v18 = [textOperations objectAtIndex:self->_selectedTextOperation];
    if ([v18 isEqualToString:kAXTextOperationActionCopy])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.copy";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionScanText])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.scan.text";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionCut])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.cut";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionPaste])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.paste";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSelect])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.select";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSelectAll])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.selectAll";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionDelete])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.delete";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionReplace])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.replace";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionDefine])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.define";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionShare])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.share";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionBold])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.bold";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionItalics])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.italic";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionUnderline])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.underline";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionUndo])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.undo";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionRedo])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.redo";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSpeak])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.speak";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSpeakSentence])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.speak.sentence";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSpeakSpellOut])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.speak.spell.out";
    }

    else
    {
      if (![v18 isEqualToString:kAXTextOperationActionWritingTools])
      {
        if ([v18 rangeOfString:@"AXTextOperationAction"] != 0x7FFFFFFFFFFFFFFFLL)
        {
          name = 0;
          goto LABEL_54;
        }

        v24 = v18;
        v18 = v24;
        goto LABEL_53;
      }

      v19 = off_1001FDDD0;
      v20 = @"text.operation.writing.tools";
    }

    v24 = sub_1000516CC(v19, v20, 0, selectedLanguage);
LABEL_53:
    name = v24;
    goto LABEL_54;
  }

  actions2 = [v11 actions];
  v18 = [actions2 objectAtIndex:{self->_selectedTextOperation - objc_msgSend(textOperations, "count")}];

  [v18 prepareWithContext:self];
  language = [v18 language];

  name = [v18 name];
  selectedLanguage = language;
LABEL_54:

  v25 = sub_1000095FC(name, 0, selectedLanguage);
  self->_flags.tapShouldHandleTextOperation = 1;

LABEL_55:
}

- (void)_handlePerformTextOperation:(id)operation
{
  _currentResponder = [(VOTElementManager *)self _currentResponder];
  textOperationsOperator = _currentResponder;
  if ([_currentResponder doesHaveTraits:kAXWebContentTrait])
  {
    textOperationsOperator = [_currentResponder textOperationsOperator];
  }

  _currentCachedCustomActionCategories = [(VOTElementManager *)self _currentCachedCustomActionCategories];
  v6 = [_currentCachedCustomActionCategories ax_firstObjectUsingBlock:&stru_1001C9BF8];

  textOperations = [textOperationsOperator textOperations];
  selectedTextOperation = self->_selectedTextOperation;
  if (selectedTextOperation < [textOperations count])
  {
    v9 = [textOperations objectAtIndex:self->_selectedTextOperation];
    if (v9)
    {
      v10 = v9;
      [textOperationsOperator performTextOperation:v9];
      v11 = +[VOTOutputManager outputManager];
      v12 = +[VOSOutputEvent DidSelectAutofill];
      [v11 sendEvent:v12];

LABEL_9:
      goto LABEL_10;
    }
  }

  v13 = self->_selectedTextOperation;
  v14 = v13 - [textOperations count];
  actions = [v6 actions];
  v16 = [actions count];

  if (v14 >= v16 || ([v6 actions], v17 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v17, "objectAtIndex:", v14), v18 = objc_claimAutoreleasedReturnValue(), v17, v19 = objc_msgSend(v18, "performWithContext:", self), v18, (v19 & 1) == 0))
  {
    v10 = +[VOTOutputManager outputManager];
    v11 = +[VOSOutputEvent BoundaryEncountered];
    [v10 sendEvent:v11];
    goto LABEL_9;
  }

LABEL_10:
}

- (void)_outputSelectionDifference:(_NSRange)difference oldRange:(_NSRange)range string:(id)string language:(id)language
{
  length = range.length;
  location = range.location;
  v9 = difference.length;
  v10 = difference.location;
  stringCopy = string;
  languageCopy = language;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  if (!(v9 | length))
  {
    goto LABEL_48;
  }

  Current = CFAbsoluteTimeGetCurrent();
  selfCopy = self;
  if (v9 && Current - self->_performedTextSelectionOperation < 0.25)
  {
    goto LABEL_4;
  }

  v16 = &v10[-location];
  if (v10 < location)
  {
    if (&v10[v9] <= location + length)
    {
      v16 = (location - v10);
    }

    else
    {
      v16 = v9;
    }

    v43 = @"element.selected.text";
    goto LABEL_10;
  }

  if (v10 <= location)
  {
    v17 = (location + length);
    if (&v10[v9] <= location + length)
    {
      if (&v10[v9] < v17)
      {
        v16 = (length - v9);
        v43 = @"element.unselected.text";
        v17 = &v10[v9];
        goto LABEL_11;
      }

      v16 = 0;
      v17 = 0;
    }

    else
    {
      v16 = (v9 - length);
    }

    v43 = @"element.selected.text";
  }

  else
  {
    if (!length && v9)
    {
LABEL_4:
      v43 = @"element.selected.text";
      v16 = v9;
LABEL_10:
      v17 = v10;
      goto LABEL_11;
    }

    v43 = @"element.unselected.text";
    v17 = location;
  }

LABEL_11:
  v18 = VOTLogElement();
  if (os_log_type_enabled(v18, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B638();
  }

  v19 = VOTLogElement();
  if (os_log_type_enabled(v19, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B6A0();
  }

  v20 = VOTLogElement();
  if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B708();
  }

  if (v16 && &v16[v17] <= [stringCopy length])
  {
    _currentElement = selfCopy->_firstResponderElement;
    if (!_currentElement)
    {
      _currentElement = [(VOTElementManager *)selfCopy _currentElement];
    }

    v22 = [(VOTElement *)_currentElement attributedValueForRange:v17, v16];
    if (!v22)
    {
      v23 = [(VOTElement *)_currentElement valueForRange:v17, v16];
      v22 = [AXAttributedString axAttributedStringWithString:v23];
    }

    65532 = [NSString stringWithFormat:@"%C", 65532];
    v42 = [NSCharacterSet characterSetWithCharactersInString:65532];
    if ([v22 rangeOfCharacterFromSet:?] != 0x7FFFFFFFFFFFFFFFLL && objc_msgSend(v22, "length"))
    {
      v47 = 0;
      v48 = &v47;
      v49 = 0x3032000000;
      v50 = sub_100068050;
      v51 = sub_100068060;
      v52 = [v22 copy];
      v46[0] = 0;
      v46[1] = v46;
      v46[2] = 0x2020000000;
      v46[3] = 0;
      v45[0] = _NSConcreteStackBlock;
      v45[1] = 3221225472;
      v45[2] = sub_100083224;
      v45[3] = &unk_1001C9C20;
      v45[4] = selfCopy;
      v45[5] = v46;
      v45[6] = &v47;
      [v22 enumerateAttribute:UIAccessibilityTokenAttachment inRange:0 options:objc_msgSend(v22 usingBlock:{"length"), 0, v45}];
      v25 = v48[5];
      v26 = sub_1000516CC(off_1001FDDD0, @"attachment", 0, selectedLanguage);
      v27 = [v25 axAttributedStringByReplacingOccurrencesOfString:65532 withString:v26];

      _Block_object_dispose(v46, 8);
      _Block_object_dispose(&v47, 8);

      v22 = v27;
    }

    v28 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
    v29 = [v22 rangeOfCharacterFromSet:v28];
    v31 = v30;
    v32 = [v22 length];

    if (v29 || v31 != v32)
    {
      v33 = [v22 axAttributedStringByReplacingOccurrencesOfString:@"\n" withString:@" "];

      v22 = v33;
    }

    v34 = [objc_allocWithZone(VOTOutputRequest) init];
    v35 = [v34 addString:v22 withLanguage:languageCopy];
    lastAction = [v34 lastAction];
    [lastAction setObject:kCFBooleanTrue forVariant:50];

    v37 = sub_1000516CC(off_1001FDDD0, v43, 0, selectedLanguage);
    v38 = [v34 addString:v37 withLanguage:selectedLanguage];

    [(VOTElementManager *)selfCopy sendRequest:v34];
    goto LABEL_46;
  }

  if (v10)
  {
    if (!v9)
    {
LABEL_35:
      _currentElement = +[VOTOutputManager outputManager];
      if (v10)
      {
        if (v10 != [stringCopy length])
        {
LABEL_47:

          goto LABEL_48;
        }

        v40 = @"bottom.document";
      }

      else
      {
        v40 = @"top.document";
      }

      v41 = sub_1000516CC(off_1001FDDD0, v40, 0, selectedLanguage);
      [(VOTElement *)_currentElement speakSimpleString:v41 braille:0 language:selectedLanguage];

      v22 = +[VOSOutputEvent BoundaryEncountered];
      [(VOTElement *)_currentElement sendEvent:v22];
LABEL_46:

      goto LABEL_47;
    }
  }

  else
  {
    v39 = [stringCopy length];
    if (!v9 && v39)
    {
      goto LABEL_35;
    }
  }

LABEL_48:
}

- (id)determineActivityForElement:(id)element
{
  elementCopy = element;
  selectedActivity = [VOTSharedWorkspace selectedActivity];
  if (selectedActivity)
  {
    firstObject = selectedActivity;
    activities = 0;
LABEL_3:
    v8 = VOTLogActivities();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_INFO))
    {
      *buf = 138412290;
      v24 = firstObject;
      _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_INFO, "Using activity: %@", buf, 0xCu);
    }

    goto LABEL_6;
  }

  activities = [VOTSharedWorkspace activities];
  if ([activities count])
  {
    textualContext = [elementCopy textualContext];
    if (textualContext)
    {
      v11 = textualContext;
      v22[0] = _NSConcreteStackBlock;
      v22[1] = 3221225472;
      v22[2] = sub_100083620;
      v22[3] = &unk_1001C76A0;
      v22[4] = textualContext;
      v12 = [activities ax_filteredArrayUsingBlock:v22];
      firstObject = [v12 firstObject];

      if (firstObject)
      {
        goto LABEL_3;
      }
    }
  }

  if (![activities count])
  {
    firstObject = 0;
    goto LABEL_6;
  }

  application = [elementCopy application];
  firstObject = [application bundleIdentifier];

  if ([firstObject isEqualToString:@"com.apple.InputUI"])
  {
    bundleIdentifier = [(VOTElement *)self->_lastApplication bundleIdentifier];

    firstObject = bundleIdentifier;
  }

  if (firstObject)
  {
    v17 = _NSConcreteStackBlock;
    v18 = 3221225472;
    v19 = sub_100083664;
    v20 = &unk_1001C76A0;
    v21 = firstObject;
    v15 = firstObject;
    v16 = [activities ax_filteredArrayUsingBlock:&v17];
    firstObject = [v16 firstObject];

    if (firstObject)
    {
      goto LABEL_3;
    }
  }

LABEL_6:

  return firstObject;
}

- (int64_t)modifierKeyChoiceForElement:(id)element
{
  v3 = [(VOTElementManager *)self determineActivityForElement:element];
  modifierKeys = [v3 modifierKeys];

  if (modifierKeys)
  {
    modifierKeys2 = [v3 modifierKeys];
    integerValue = [modifierKeys2 integerValue];
  }

  else
  {
    modifierKeys2 = +[AXSettings sharedInstance];
    integerValue = [modifierKeys2 voiceOverKeyboardModifierChoice];
  }

  v7 = integerValue;

  return v7;
}

- (BOOL)determineSceneDetectionsEnabled:(id)enabled
{
  enabledCopy = enabled;
  v5 = [(VOTElementManager *)self determineActivityForElement:enabledCopy];
  imageDescriptions = [v5 imageDescriptions];

  if (imageDescriptions)
  {
    imageDescriptions2 = [v5 imageDescriptions];
    bOOLValue = [imageDescriptions2 BOOLValue];
  }

  else
  {
    imageCaptioningDisabledApps = [VOTSharedWorkspace imageCaptioningDisabledApps];
    application = [enabledCopy application];
    bundleIdentifier = [application bundleIdentifier];
    v12 = [imageCaptioningDisabledApps containsObject:bundleIdentifier];

    if (v12)
    {
      bOOLValue = 0;
    }

    else
    {
      bOOLValue = [VOTSharedWorkspace imageCaptionsEnabled];
    }
  }

  return bOOLValue;
}

- (BOOL)determineFullImageDescriptionsEnabled:(id)enabled
{
  enabledCopy = enabled;
  v5 = [(VOTElementManager *)self determineActivityForElement:enabledCopy];
  imageDescriptions = [v5 imageDescriptions];

  if (imageDescriptions)
  {
    imageDescriptions2 = [v5 imageDescriptions];
    bOOLValue = [imageDescriptions2 BOOLValue];
  }

  else
  {
    imageCaptioningDisabledApps = [VOTSharedWorkspace imageCaptioningDisabledApps];
    application = [enabledCopy application];
    bundleIdentifier = [application bundleIdentifier];
    v12 = [imageCaptioningDisabledApps containsObject:bundleIdentifier];

    if (v12)
    {
      bOOLValue = 0;
    }

    else
    {
      bOOLValue = [VOTSharedWorkspace imageCaptionsEnabled];
    }
  }

  return bOOLValue;
}

- (BOOL)speakTableRowAndColumnForElement:(id)element
{
  v3 = [(VOTElementManager *)self determineActivityForElement:element];
  tableRowAndColumn = [v3 tableRowAndColumn];

  if (tableRowAndColumn)
  {
    tableRowAndColumn2 = [v3 tableRowAndColumn];
    bOOLValue = [tableRowAndColumn2 BOOLValue];
  }

  else
  {
    tableRowAndColumn2 = +[AXSettings sharedInstance];
    bOOLValue = [tableRowAndColumn2 voiceOverSpeakTableColumnRowInformation];
  }

  v7 = bOOLValue;

  return v7;
}

- (BOOL)speakTableHeadersForElement:(id)element
{
  v3 = [(VOTElementManager *)self determineActivityForElement:element];
  tableHeaders = [v3 tableHeaders];

  if (tableHeaders)
  {
    tableHeaders2 = [v3 tableHeaders];
    bOOLValue = [tableHeaders2 BOOLValue];
  }

  else
  {
    tableHeaders2 = +[AXSettings sharedInstance];
    bOOLValue = [tableHeaders2 voiceOverSpeakTableHeaders];
  }

  v7 = bOOLValue;

  return v7;
}

- (BOOL)_prepareElementOutputHeaders:(id)headers currentElement:(id)element request:(id)request
{
  headersCopy = headers;
  elementCopy = element;
  requestCopy = request;
  if ([headersCopy supportsHeaderElementOutput] && -[VOTElementManager speakTableHeadersForElement:](self, "speakTableHeadersForElement:", headersCopy))
  {
    if ([headersCopy containedIn:2] && objc_msgSend(elementCopy, "containedIn:", 2))
    {
      v11 = [headersCopy headerElementsForRow:{objc_msgSend(headersCopy, "rowRange")}];
      if ([v11 containsObject:headersCopy])
      {

        v11 = &__NSArray0__struct;
      }

      v12 = [headersCopy headerElementsForColumn:{objc_msgSend(headersCopy, "columnRange")}];
      if ([v12 containsObject:headersCopy])
      {

        v11 = &__NSArray0__struct;
      }

      headerElements = [v11 arrayByAddingObjectsFromArray:v12];
      v14 = [elementCopy headerElementsForRow:{objc_msgSend(elementCopy, "rowRange")}];

      v15 = [elementCopy headerElementsForColumn:{objc_msgSend(elementCopy, "columnRange")}];

      headerElements2 = [v14 arrayByAddingObjectsFromArray:v15];
    }

    else
    {
      headerElements = [headersCopy headerElements];
      headerElements2 = [elementCopy headerElements];
    }

    v18 = +[NSMutableArray arrayWithCapacity:](NSMutableArray, "arrayWithCapacity:", [headerElements count]);
    v27 = 0u;
    v28 = 0u;
    v29 = 0u;
    v30 = 0u;
    v19 = headerElements;
    v20 = [v19 countByEnumeratingWithState:&v27 objects:v31 count:16];
    if (v20)
    {
      v21 = v20;
      v22 = *v28;
      do
      {
        for (i = 0; i != v21; i = i + 1)
        {
          if (*v28 != v22)
          {
            objc_enumerationMutation(v19);
          }

          v24 = *(*(&v27 + 1) + 8 * i);
          if (([headerElements2 containsObject:{v24, v27}] & 1) == 0)
          {
            [v18 addObject:v24];
          }
        }

        v21 = [v19 countByEnumeratingWithState:&v27 objects:v31 count:16];
      }

      while (v21);
    }

    v25 = [v18 count];
    v17 = v25 != 0;
    if (v25)
    {
      [requestCopy setElementHeadersForOutput:v18];
    }
  }

  else
  {
    v17 = 0;
  }

  return v17;
}

- (id)_sonarElementFromPoint:(CGPoint)point inForwardDirection:(BOOL)direction limit:(int64_t)limit
{
  directionCopy = direction;
  y = point.y;
  x = point.x;
  v9 = *(&xmmword_1001FF150 + 1);
  v10 = *&xmmword_1001FF150;
  Current = CFAbsoluteTimeGetCurrent();
  v12 = sub_100050834();
  v13 = 0;
  v14 = v10 + -10.0;
  v15 = kAXStatusBarElementTrait;
  v16 = kAXSpacerTrait;
  v11 = v9 / 12.0;
  if (directionCopy)
  {
    v17 = (v11 + v11) / 12.0;
  }

  else
  {
    v17 = -((v11 + v11) / 12.0);
  }

  if (directionCopy)
  {
    v18 = v10 / 12.0;
  }

  else
  {
    v18 = -(v10 / 12.0);
  }

  if (directionCopy)
  {
    v10 = 0.0;
  }

  limitCopy = limit;
  while (1)
  {
    v19 = y <= v9 + -10.0;
    if (!directionCopy)
    {
      v19 = y >= 10.0;
    }

    if (!v19)
    {
LABEL_53:
      v22 = 0;
      goto LABEL_54;
    }

    v20 = objc_autoreleasePoolPush();
    v21 = x <= v14;
    if (!directionCopy)
    {
      v21 = x >= 10.0;
    }

    if (v21)
    {
      break;
    }

    objc_autoreleasePoolPop(v20);
LABEL_50:
    if (limitCopy < 1 || v13 <= limitCopy)
    {
      x = v10;
      if (CFAbsoluteTimeGetCurrent() - Current <= 3.0)
      {
        continue;
      }
    }

    goto LABEL_53;
  }

  context = v20;
  v22 = 0;
  do
  {
    v23 = v22;
    v22 = [objc_allocWithZone(VOTElement) initWithPosition:{x, y}];

    bundleIdentifier = [v22 bundleIdentifier];
    v25 = [bundleIdentifier isEqualToString:@"com.apple.assistivetouchd"];

    if (v25)
    {
      goto LABEL_42;
    }

    v26 = VOTLogElement();
    if (os_log_type_enabled(v26, OS_LOG_TYPE_INFO))
    {
      bundleIdentifier2 = [v22 bundleIdentifier];
      *buf = 138412290;
      v44 = *&bundleIdentifier2;
      _os_log_impl(&_mh_execute_header, v26, OS_LOG_TYPE_INFO, "element %@", buf, 0xCu);
    }

    if (v12 && [v22 isTouchContainer])
    {
      touchContainer = [(VOTElement *)self->_lastValidElement touchContainer];
      v29 = [touchContainer isEqual:v22];

      if (v29)
      {
        v30 = 0;
      }

      else
      {
        if (directionCopy)
        {
          [v22 firstContainedElement];
        }

        else
        {
          [v22 lastContainedElement];
        }
        v30 = ;
        if ([v30 isEqual:v22])
        {

          ++v13;
          v22 = 0;
          goto LABEL_42;
        }
      }

      v22 = v30;
    }

    v31 = VOTLogElement();
    if (os_log_type_enabled(v31, OS_LOG_TYPE_DEBUG))
    {
      *buf = 134218498;
      v44 = x;
      v45 = 2048;
      v46 = y;
      v47 = 2114;
      v48 = v22;
      _os_log_debug_impl(&_mh_execute_header, v31, OS_LOG_TYPE_DEBUG, "Sonar: {%f, %f} = %{public}@", buf, 0x20u);
    }

    if ((![v22 doesHaveTraits:v15] || !directionCopy) && (objc_msgSend(v22, "doesHaveTraits:", v16) & 1) == 0)
    {
      if (![v22 isBannerNotification] || !directionCopy)
      {
        if (v22)
        {
          objc_autoreleasePoolPop(context);
          goto LABEL_54;
        }

        goto LABEL_41;
      }

      v32 = VOTLogElement();
      if (os_log_type_enabled(v32, OS_LOG_TYPE_DEBUG))
      {
        sub_10012B770(&v41, v42, v32);
      }
    }

LABEL_41:
    v22 = 0;
    ++v13;
    y = v17 + y;
LABEL_42:
    x = v18 + x;
    v33 = x <= v14;
    if (!directionCopy)
    {
      v33 = x >= 10.0;
    }
  }

  while (v33);
  objc_autoreleasePoolPop(context);
  if (!v22)
  {
    goto LABEL_50;
  }

LABEL_54:
  v34 = VOTLogElement();
  if (os_log_type_enabled(v34, OS_LOG_TYPE_DEBUG))
  {
    v36 = CFAbsoluteTimeGetCurrent();
    *buf = 138543874;
    v44 = *&v22;
    v45 = 2048;
    v46 = v36 - Current;
    v47 = 2048;
    v48 = v13;
    _os_log_debug_impl(&_mh_execute_header, v34, OS_LOG_TYPE_DEBUG, "found sonar element: %{public}@ - %f[%ld]", buf, 0x20u);
  }

  return v22;
}

- (void)_setNearestElementMovingForward:(BOOL)forward
{
  v4 = [(VOTElementManager *)self _sonarElementInForwardDirection:forward limit:-1];
  v5 = v4;
  if (self->_inUnitTestingMode)
  {
    v9 = v4;
    v6 = self->_currentElement;

    v5 = v6;
  }

  v10 = v5;
  if (v5)
  {
    [(VOTElementManager *)self _echoDifferentElement:v5 forEvent:0];
    [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v10];
    self->_flags.focusIsOnElement = 1;
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v8];
  }
}

- (BOOL)_moveElementToFlowTo:(id)to
{
  toCopy = to;
  v5 = [toCopy doesHaveTraits:kAXWebContentTrait];
  v6 = [toCopy doesHaveTraits:kAXTableIndexTrait];
  if ((v5 & 1) != 0 || v6)
  {
    if (v6)
    {
      [toCopy updateFlowToElements];
    }

    flowToElements = [toCopy flowToElements];
    v9 = [flowToElements count];
    v7 = v9 != 0;
    if (v9)
    {
      v10 = [flowToElements indexOfObjectPassingTest:&stru_1001C9C60];
      if (v10 == 0x7FFFFFFFFFFFFFFFLL)
      {
        v11 = 0;
      }

      else
      {
        v11 = [flowToElements objectAtIndex:v10];
      }

      elementSearchGeneration = self->_elementSearchGeneration;
      selectedTextRange = [v11 selectedTextRange];
      v15 = [VOTElementFetchFoundData fetchFoundData:v11 forceUpdate:0 direction:1 generation:elementSearchGeneration range:selectedTextRange searchType:v14, 0];
      [(VOTElementManager *)self _elementFetchFoundElement:v15];

      if (v5)
      {
        if (!self->_flowFromElements)
        {
          v16 = [objc_allocWithZone(NSMutableDictionary) init];
          flowFromElements = self->_flowFromElements;
          self->_flowFromElements = v16;
        }

        v21[0] = [v11 nonPersistentUniqueId];
        v21[1] = v18;
        v19 = [NSValue value:v21 withObjCType:"{?=QQ}"];
        [(NSMutableDictionary *)self->_flowFromElements setObject:toCopy forKey:v19];
      }
    }
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (void)_handleElementMovement:(id)movement
{
  movementCopy = movement;
  [(VOTElementManager *)self setLastElementChangeAction:2];
  command = [movementCopy command];
  v6 = [command isEqualToString:kVOTEventCommandNextElement];

  command2 = [movementCopy command];
  v8 = [command2 isEqualToString:kVOTEventCommandPreviousElement];

  command3 = [movementCopy command];
  v10 = [command3 isEqualToString:kVOTEventCommandFirstElement];

  command4 = [movementCopy command];
  v12 = [command4 isEqualToString:kVOTEventCommandLastElement];

  _currentElement = [(VOTElementManager *)self _currentElement];
  if (self->_inTextProcessingRotorMode && ((v6 | v8) & 1) != 0)
  {
    v14 = [movementCopy objectForIndex:119];
    bOOLValue = [v14 BOOLValue];

    if ((bOOLValue & 1) == 0)
    {
      if ([(VOTElementManager *)self _inMisspelledWordRotor])
      {
        [(VOTElementManager *)self _handleMisspelledWordRotorAction:v6];
      }

      else if ([(VOTRotor *)self->_elementRotor currentRotorType]== 6)
      {
        [(VOTElementManager *)self _handleTextRotorSelectionAction:v6];
      }

      goto LABEL_13;
    }
  }

  if (!self->_flags.focusIsOnElement || ([_currentElement isValid] & 1) == 0)
  {
    [(VOTElementManager *)self _setNearestElementMovingForward:v6];
    goto LABEL_13;
  }

  if ((v10 | v12))
  {
    remoteParent = [_currentElement remoteParent];
    if (remoteParent && [_currentElement remoteParentIsViewHost])
    {
      isolatedWindow = [_currentElement isolatedWindow];
      v18 = isolatedWindow;
      if (!isolatedWindow)
      {
        isolatedWindow = remoteParent;
      }

      application = [isolatedWindow application];
    }

    else
    {
      application = [_currentElement application];
    }

    if ([(VOTElementManager *)self _isShowingTodayViewForPhone])
    {
      currentApplications = self->_currentApplications;
      if (v10)
      {
        [(NSArray *)currentApplications firstObject];
      }

      else
      {
        [(NSArray *)currentApplications lastObject];
      }
      v34 = ;

      application = v34;
    }

    if ([VOTSharedWorkspace navigationStyleHonorsGroups] && !-[VOTElement isAccessibleGroup](self->_currentElement, "isAccessibleGroup"))
    {
      groupedParent = [(VOTElement *)self->_currentElement groupedParent];

      if (v10)
      {
        if (groupedParent)
        {
          groupedParent2 = [(VOTElement *)self->_currentElement groupedParent];
          firstContainedElement = [groupedParent2 firstContainedElement];

          goto LABEL_48;
        }

LABEL_47:
        firstContainedElement = [application firstContainedElement];
LABEL_48:
        v36 = 2;
LABEL_59:
        self->_flags.lastElementMovement = v36;
        if ([firstContainedElement isEqual:_currentElement])
        {
          v40 = +[VOTOutputManager outputManager];
          v41 = +[VOSOutputEvent BoundaryEncountered];
          [v40 sendEvent:v41];

          v42 = [objc_allocWithZone(VOTOutputRequest) init];
          [(VOTElementManager *)self _addDescription:firstContainedElement toRequest:v42 withOptions:0x800000];
          [(VOTElementManager *)self sendRequest:v42];
        }

        else
        {
          if ((v6 | v12))
          {
            v43 = 1;
          }

          else
          {
            v43 = 2;
          }

          v59[0] = _NSConcreteStackBlock;
          v59[1] = 3221225472;
          v59[2] = sub_100084C24;
          v59[3] = &unk_1001C7778;
          v59[4] = self;
          v44 = firstContainedElement;
          v60 = v44;
          [v44 scrollToElementForDirectional:v43 withCompletion:v59];
          [(VOTElementManager *)self _echoDifferentElement:v44 forEvent:0];
          fetchManager = self->_fetchManager;
          _currentElement2 = [(VOTElementManager *)self _currentElement];
          [(VOTElementFetcher *)fetchManager updateCacheWithElement:_currentElement2];
        }

        goto LABEL_13;
      }

      if (groupedParent)
      {
        groupedParent3 = [(VOTElement *)self->_currentElement groupedParent];
        firstContainedElement = [groupedParent3 lastContainedElement];

LABEL_58:
        v36 = 1;
        goto LABEL_59;
      }
    }

    else if (v10)
    {
      goto LABEL_47;
    }

    if ([_currentElement doesHaveTraits:kAXStatusBarElementTrait])
    {
      [application lastElementInStatusBar];
    }

    else
    {
      [application lastContainedElement];
    }
    firstContainedElement = ;
    goto LABEL_58;
  }

  if ((v6 | v8))
  {
    v20 = VOTLogElement();
    if (os_signpost_enabled(v20))
    {
      *buf = 0;
      _os_signpost_emit_with_name_impl(&_mh_execute_header, v20, OS_SIGNPOST_INTERVAL_BEGIN, 0xEEEEB0B5B2B2EEEELL, "ElementTraversal", "", buf, 2u);
    }

    if (v6)
    {
      v21 = 1;
    }

    else
    {
      v21 = 2;
    }

    self->_flags.lastElementMovement = v21;
    if ((v8 & 1) != 0 && [(NSMutableDictionary *)self->_flowFromElements count])
    {
      _currentElement3 = [(VOTElementManager *)self _currentElement];
      *buf = [_currentElement3 nonPersistentUniqueId];
      v58 = v23;

      v24 = [NSValue value:buf withObjCType:"{?=QQ}"];
      v25 = [(NSMutableDictionary *)self->_flowFromElements objectForKey:v24];
      if (v25)
      {
        v26 = v25;
        [(VOTElementManager *)self _echoDifferentElement:v25 forEvent:0];

        goto LABEL_18;
      }
    }

    v47 = +[VOTOutputManager outputManager];
    [v47 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

    if (sub_100050834() && !_currentElement && ([(VOTElementManager *)self touchContainer], v48 = objc_claimAutoreleasedReturnValue(), v48, v48))
    {
      touchContainer = [(VOTElementManager *)self touchContainer];
      v50 = touchContainer;
      if (v6)
      {
        [touchContainer firstContainedElement];
      }

      else
      {
        [touchContainer lastContainedElement];
      }
      _copyMatchBlockAnyElement = ;

      [(VOTElementManager *)self _echoDifferentElement:_copyMatchBlockAnyElement forEvent:0];
    }

    else
    {
      self->_flags.performedKeyboardNavigation = [movementCopy isKeyEvent];
      self->_flags.performedFlickNavigation = 1;
      if ((v8 & 1) == 0 && [(VOTElementManager *)self _moveElementToFlowTo:_currentElement])
      {
        goto LABEL_13;
      }

      if ([_currentElement elementVisibilityAffectsLayout])
      {
        [_currentElement scrollToElementForDirectional:2 withCompletion:0];
        [(VOTElementFetcher *)self->_fetchManager forceUpdate];
      }

      _copyMatchBlockAnyElement = [(VOTElementManager *)self _copyMatchBlockAnyElement];
      v51 = self->_fetchManager;
      elementSearchGeneration = self->_elementSearchGeneration;
      selectedTextRange = [_currentElement selectedTextRange];
      v55 = v54;
      LOBYTE(v56) = [VOTSharedWorkspace navigationStyleHonorsGroups];
      [(VOTElementFetcher *)v51 searchForElementInDirection:v21 fromElement:_currentElement matchBlock:_copyMatchBlockAnyElement rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:selectedTextRange groupNavigationStyle:v55, v56];
    }
  }

  else
  {
    command5 = [movementCopy command];
    v29 = [command5 isEqualToString:kVOTEventCommandCenterElement];

    if (!v29)
    {
      goto LABEL_13;
    }

    _copyMatchBlockAnyElement = [VOTEvent touchEventWithCommand:kVOTEventCommandTracking info:0];
    [VOTSharedWorkspace convertDevicePointToZoomedPoint:sub_1000517DC(0.5)];
    [_copyMatchBlockAnyElement setTouchPoint:?];
    v31 = [VOTElement alloc];
    [_copyMatchBlockAnyElement touchPoint];
    v32 = [(VOTElement *)v31 initWithPosition:?];
    if (v32 || ([(VOTElementManager *)self _sonarElementInForwardDirection:1 limit:10], (v32 = objc_claimAutoreleasedReturnValue()) != 0) || ([(VOTElementManager *)self _sonarElementInForwardDirection:0 limit:10], (v32 = objc_claimAutoreleasedReturnValue()) != 0))
    {
      v33 = v32;
      [(VOTElementManager *)self _echoDifferentElement:v32 forEvent:0];
    }
  }

LABEL_13:
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXLaunchIconTrait]&& ![(VOTElement *)self->_currentElement isInFolder])
  {
    [(NSMutableArray *)self->_cachedLaunchIcons removeAllObjects];
  }

  [(VOTElementManager *)self _resetOtherTapInputModes];
  if ([(VOTElement *)self->_currentElement isSafariScribbleActive])
  {
    [(VOTElement *)self->_currentElement clearSelectedScribbleElement];
  }

LABEL_18:
}

- (void)_handleRealtimeElementMovement:(id)movement
{
  movementCopy = movement;
  application = [(VOTElement *)self->_currentElement application];
  realtimeElements = [application realtimeElements];

  if ([realtimeElements count])
  {
    command = [movementCopy command];
    v7 = [command isEqualToString:kVOTEventCommandNextRealtimeElement];

    v8 = [realtimeElements indexOfObject:self->_currentElement];
    if (v8 == 0x7FFFFFFFFFFFFFFFLL)
    {
      if (v7)
      {
        [realtimeElements firstObject];
      }

      else
      {
        [realtimeElements lastObject];
      }
      v9 = ;
      [(VOTElementManager *)self _setCurrentElement:v9];
      v17 = +[VOTDisplayManager displayManager];
      [v17 setCursorFrameForElement:v9];
    }

    else
    {
      if (v7)
      {
        v11 = v8 + 1;
      }

      else
      {
        v11 = v8 - 1;
      }

      v12 = [realtimeElements count] + v11;
      v13 = v12 % [realtimeElements count];
      v14 = [realtimeElements objectAtIndex:v13];
      [(VOTElementManager *)self _setCurrentElement:v14];

      v15 = +[VOTDisplayManager displayManager];
      v16 = [realtimeElements objectAtIndex:v13];
      [v15 setCursorFrameForElement:v16];

      v9 = [realtimeElements objectAtIndex:v13];
    }

    [(VOTElementManager *)self _echoDifferentElement:v9 forEvent:movementCopy];
  }

  else
  {
    v9 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v9 sendEvent:v10];
  }
}

- (void)_handleShowEditingHUD:(id)d
{
  v4 = +[VOTOutputManager outputManager];
  v5 = +[VOSOutputEvent DidBeginPassthrough];
  [v4 sendEvent:v5];

  _currentElement = [(VOTElementManager *)self _currentElement];
  application = [_currentElement application];
  [application showEditingHUD];
}

- (void)_handleVerticalMovement:(id)movement direction:(int64_t)direction
{
  movementCopy = movement;
  [(VOTElement *)self->_currentElement frame];
  v8 = v7;
  v10 = v9;
  v12 = v11;
  v14 = v13;
  v15 = +[VOTElement systemWideElement];
  [v15 convertRect:-[VOTElement windowContextId](self->_currentElement fromContextId:{"windowContextId"), v8, v10, v12, v14}];
  v17 = v16;
  v19 = v18;
  v21 = v20;
  v23 = v22;

  AX_CGRectGetCenter();
  v25 = v24;
  v27 = v26;
  v28 = 10.0;
  if (sub_10005083C())
  {
    v29 = 20.0;
  }

  else
  {
    v29 = 10.0;
  }

  v47 = v29;
  if (sub_10005083C())
  {
    v28 = 20.0;
  }

  deviceOrientation = [VOTSharedWorkspace deviceOrientation];
  v48[0] = _NSConcreteStackBlock;
  v48[1] = 3221225472;
  v48[2] = sub_10008524C;
  v48[3] = &unk_1001C9C88;
  v48[4] = self;
  v31 = movementCopy;
  v49 = v31;
  v32 = objc_retainBlock(v48);
  if ((deviceOrientation - 1) > 1)
  {
    if ((deviceOrientation - 3) <= 1)
    {
      v50.origin.x = v17;
      v50.origin.y = v19;
      v50.size.width = v21;
      v50.size.height = v23;
      if (v27 > CGRectGetMinY(v50) - v23)
      {
        if (deviceOrientation == 3)
        {
          v28 = -v28;
        }

        if ((direction == 2) != (deviceOrientation == 3))
        {
          v43 = -v47;
        }

        else
        {
          v43 = v47;
        }

        do
        {
          v51.origin.x = v17;
          v51.origin.y = v19;
          v51.size.width = v21;
          v51.size.height = v23;
          if (v27 >= v23 + CGRectGetMaxY(v51))
          {
            break;
          }

          while (v25 >= 0.0 && v25 <= *&xmmword_1001FF150)
          {
            if ((v32[2])(v32, v25, v27))
            {
              goto LABEL_51;
            }

            v25 = v43 + v25;
          }

          v27 = v28 + v27;
          v52.origin.x = v17;
          v52.origin.y = v19;
          v52.size.width = v21;
          v52.size.height = v23;
        }

        while (v27 > CGRectGetMinY(v52) - v23);
      }
    }

    goto LABEL_50;
  }

  v33 = v25 + v28 * -3.0;
  v34 = v25 + v28 * 3.0;
  if (v25 <= v33 || v25 >= v34)
  {
LABEL_50:
    v45 = +[VOTOutputManager outputManager];
    v46 = +[VOSOutputEvent BoundaryEncountered];
    [v45 sendEvent:v46];

    goto LABEL_51;
  }

  if (deviceOrientation == 2)
  {
    v36 = -v28;
  }

  else
  {
    v36 = v28;
  }

  if ((direction == 2) != (deviceOrientation == 2))
  {
    v37 = -v47;
  }

  else
  {
    v37 = v47;
  }

  v38 = *(&xmmword_1001FF150 + 1);
  while (v27 < 0.0 || v27 > v38)
  {
LABEL_30:
    v25 = v36 + v25;
    if (v25 <= v33 || v25 >= v34)
    {
      goto LABEL_50;
    }
  }

  v40 = v27;
  while (((v32[2])(v32, v25, v40) & 1) == 0)
  {
    v40 = v37 + v40;
    v38 = *(&xmmword_1001FF150 + 1);
    if (v40 < 0.0 || v40 > *(&xmmword_1001FF150 + 1))
    {
      goto LABEL_30;
    }
  }

LABEL_51:
}

- (id)webCustomRotorDictionary:(id)dictionary direction:(int64_t)direction forElement:(id)element
{
  dictionaryCopy = dictionary;
  elementCopy = element;
  v10 = +[NSMutableDictionary dictionary];
  v11 = elementCopy;
  v12 = kAXIsEditingTrait;
  v13 = v11;
  if (([v11 doesHaveTraits:kAXIsEditingTrait] & 1) == 0)
  {
    v14 = [(VOTElementManager *)self webEditableAncestor:v11];
    v15 = v14;
    v13 = v11;
    if (v14)
    {
      v13 = v14;
    }
  }

  if ([v13 doesHaveTraits:v12])
  {
    [v10 setObject:dictionaryCopy forKeyedSubscript:@"uuid"];
    v16 = +[NSMutableDictionary dictionary];
    [v10 setObject:v16 forKeyedSubscript:@"currentItem"];

    v17 = [v10 objectForKeyedSubscript:@"currentItem"];
    [v17 setObject:v13 forKeyedSubscript:@"targetElement"];

    textMarkerRangeForSelection = [v13 textMarkerRangeForSelection];
    if ([textMarkerRangeForSelection count] == 2)
    {
      v19 = [v10 objectForKeyedSubscript:@"currentItem"];
      [v19 setObject:textMarkerRangeForSelection forKeyedSubscript:@"targetRange"];
    }

    v20 = [NSNumber numberWithInteger:direction == 1];
    [v10 setObject:v20 forKeyedSubscript:@"direction"];
  }

  return v10;
}

- (void)_handlePublicCustomRotorMovement:(id)movement direction:(int64_t)direction
{
  publicCustomRotorIndex = [(VOTRotor *)self->_elementRotor publicCustomRotorIndex];
  customPublicRotors = [(VOTRotor *)self->_elementRotor customPublicRotors];
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ((publicCustomRotorIndex & 0x8000000000000000) == 0 && publicCustomRotorIndex < [customPublicRotors count])
  {
    v9 = [customPublicRotors objectAtIndexedSubscript:publicCustomRotorIndex];
    v10 = [v9 objectForKeyedSubscript:@"uuid"];

    v11 = [customPublicRotors objectAtIndexedSubscript:publicCustomRotorIndex];
    v12 = [v11 objectForKeyedSubscript:@"element"];

    if (v12)
    {
      v13 = [customPublicRotors objectAtIndexedSubscript:publicCustomRotorIndex];
      v14 = [v13 objectForKeyedSubscript:@"element"];

      _currentElement = v14;
    }

    v15 = [customPublicRotors objectAtIndexedSubscript:publicCustomRotorIndex];
    v16 = [v15 objectForKeyedSubscript:@"name"];
    v17 = [(VOTElementManager *)self _customRotorTypeRequiresFirstElementProcessing:v16];

    if (v17)
    {
      if ([_currentElement doesHaveTraits:kAXKeyboardKeyTrait])
      {
        textInputElement = [_currentElement textInputElement];
        if (textInputElement || ([(VOTElement *)self->_lastApplication firstResponderElement], (textInputElement = objc_claimAutoreleasedReturnValue()) != 0))
        {
          v19 = textInputElement;

          _currentElement = v19;
        }
      }
    }

    if ([_currentElement doesHaveTraits:kAXWebContentTrait])
    {
      v20 = [(VOTElementManager *)self webCustomRotorDictionary:v10 direction:direction forElement:_currentElement];
      v21 = [v20 objectForKeyedSubscript:@"currentItem"];
      v22 = [v21 objectForKeyedSubscript:@"targetElement"];

      if (v22)
      {
        goto LABEL_20;
      }
    }

    else
    {
      v20 = 0;
    }

    v22 = _currentElement;
    if (![v22 doesHaveTraits:kAXIsEditingTrait] || (objc_msgSend(v22, "doesHaveTraits:", kAXStaticTextTrait) & 1) != 0 || (v25 = objc_msgSend(v22, "selectedTextRange"), v25 == 0x7FFFFFFF))
    {
      location = self->_highlightedCharacterRange.location;
      length = self->_highlightedCharacterRange.length;
    }

    else
    {
      location = v25;
      length = v26;
    }

    direction = [VOTElement customPublicRotorDictionaryForRotorId:v10 startRange:location direction:length, direction];

    v20 = direction;
LABEL_20:
    v53 = v10;
    v30 = [_currentElement customPublicRotorResultWithItem:v20 startElement:v22];
    v54 = v30;
    if ([VOTSharedWorkspace inUnitTestMode])
    {
      v31 = [v30 objectForKeyedSubscript:@"targetElement"];
    }

    else
    {
      v32 = [v30 objectForKeyedSubscript:@"targetElement"];
      v33 = [AXUIElement uiElementWithAXElement:v32];
      v31 = [VOTElement elementWithUIElement:v33];

      v30 = v54;
    }

    if ([v31 isRemoteElement])
    {
      v34 = [v31 elementForAttribute:3009];

      v31 = v34;
    }

    valuePtr = xmmword_10017E110;
    v35 = [v30 objectForKeyedSubscript:@"targetRange"];
    if (v35)
    {
      TypeID = AXValueGetTypeID();
      if (TypeID == CFGetTypeID(v35))
      {
        AXValueGetValue(v35, kAXValueTypeCFRange, &valuePtr);
LABEL_32:
        v37 = 0;
        goto LABEL_33;
      }
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v37 = 0;
      *&valuePtr = [(__AXValue *)v35 rangeValue];
      *(&valuePtr + 1) = v38;
    }

    else
    {
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
        goto LABEL_32;
      }

      v37 = v35;
    }

LABEL_33:
    if (!v31 || [v31 isEqual:v22] && valuePtr == 0x7FFFFFFFLL && (!v37 || -[__AXValue count](v37, "count") != 2))
    {
      v46 = +[VOTOutputManager outputManager];
      v47 = +[VOSOutputEvent BoundaryEncountered];
      [v46 sendEvent:v47];

LABEL_69:
      goto LABEL_70;
    }

    v52 = v20;
    preventCustomRotorItemIndexReset = self->_flags.preventCustomRotorItemIndexReset;
    self->_flags.preventCustomRotorItemIndexReset = 1;
    v39 = [v31 isEqual:v22];
    v40 = v39;
    v44 = (self->_highlightedCharacterRange.location != valuePtr || self->_highlightedCharacterRange.length != *(&valuePtr + 1)) && valuePtr != 0x7FFFFFFFLL || v37 != 0;
    if ((v39 & 1) != 0 || v44)
    {
      if (!(v39 & 1 | !v44))
      {
        [(VOTElementManager *)self _setCurrentElement:v31];
        [v31 scrollToElementForDirectional:sub_100052438(direction) withCompletion:0];
      }
    }

    else
    {
      [(VOTElementManager *)self _echoDifferentElement:v31 forEvent:0];
      self->_flags.focusIsOnElement = 1;
      v45 = sub_100052438(direction);
      v55[0] = _NSConcreteStackBlock;
      v55[1] = 3221225472;
      v55[2] = sub_100085BE8;
      v55[3] = &unk_1001C7778;
      v55[4] = self;
      v56 = v31;
      [v56 scrollToElementForDirectional:v45 withCompletion:v55];
    }

    if (v44)
    {
      self->_performedTextSelectionOperation = CFAbsoluteTimeGetCurrent();
      if (valuePtr == 0x7FFFFFFFLL)
      {
        v20 = v52;
        if (v37)
        {
          firstObject = [(__AXValue *)v37 firstObject];
          [v31 setSelectionToTextMarker:firstObject];

          v49 = [v31 customPublicRotorName:v53];
          if ([VOTRotor rotorTypeForSystemRotorType:v49]== 73)
          {
            [v31 increaseWebSelection:2];
          }

          goto LABEL_67;
        }
      }

      else
      {
        [(VOTElementManager *)self _moveFocusToUpdatedRange:valuePtr element:v31 searchType:0];
        v20 = v52;
      }
    }

    else
    {
      self->_performedTextSelectionOperation = -3061152000.0;
      v20 = v52;
      if (v40)
      {
        if (*&self->_highlightedCharacterRange != valuePtr)
        {
          v49 = +[VOTOutputManager outputManager];
          v50 = +[VOSOutputEvent BoundaryEncountered];
          [v49 sendEvent:v50];

LABEL_67:
          goto LABEL_68;
        }

        [VOTElementManager _moveFocusToUpdatedRange:"_moveFocusToUpdatedRange:element:searchType:" element:? searchType:?];
      }
    }

LABEL_68:
    [(VOTElementManager *)self _resetOtherTapInputModes];
    self->_flags.shouldUpdateRotorForElement = 0;
    self->_flags.preventCustomRotorItemIndexReset = preventCustomRotorItemIndexReset;
    goto LABEL_69;
  }

  v23 = +[VOTOutputManager outputManager];
  v24 = +[VOSOutputEvent BoundaryEncountered];
  [v23 sendEvent:v24];

LABEL_70:
}

- (void)_moveFocusToUpdatedRange:(_NSRange)range element:(id)element searchType:(int64_t)type
{
  length = range.length;
  location = range.location;
  elementCopy = element;
  if ([elementCopy isReadingContent] && objc_msgSend(elementCopy, "supportsFrameForRange"))
  {
    [elementCopy frameForRange:{location, length}];
  }

  else
  {
    [elementCopy boundsForRange:{location, length}];
  }

  v13 = v9;
  v14 = v10;
  v15 = v11;
  v16 = v12;
  v17 = +[VOTElement systemWideElement];
  [v17 convertRect:objc_msgSend(elementCopy fromContextId:{"windowContextId"), v13, v14, v15, v16}];
  v19 = v18;
  v21 = v20;
  v23 = v22;
  v25 = v24;

  self->_lineFrame.origin.x = v19;
  self->_lineFrame.origin.y = v21;
  self->_lineFrame.size.width = v23;
  self->_lineFrame.size.height = v25;
  self->_highlightedCharacterRange.location = location;
  self->_highlightedCharacterRange.length = length;
  v26 = [elementCopy doesHaveTraits:kAXIsEditingTrait];
  if (v26)
  {
    if (type == 5)
    {
      value = [elementCopy value];
      location = [value wordFromPosition:location inDirection:1];
      length = v28;
    }

    [(VOTElementManager *)self _setSelectedTextRange:location onElement:length refreshBraille:elementCopy, 1];
    v29 = +[VOTOutputManager outputManager];
    v30 = +[VOSOutputEvent InsertionPointDidMove];
    [v29 sendEvent:v30];
  }

  v45.origin.x = CGRectZero.origin.x;
  v45.origin.y = CGRectZero.origin.y;
  v45.size.width = CGRectZero.size.width;
  v45.size.height = CGRectZero.size.height;
  v42.origin.x = v19;
  v42.origin.y = v21;
  v42.size.width = v23;
  v42.size.height = v25;
  v31 = CGRectEqualToRect(v42, v45);
  v32 = +[VOTDisplayManager displayManager];
  v33 = v32;
  if (v31)
  {
    [v32 setCursorFrameForElement:elementCopy];
  }

  else
  {
    [v32 setCursorFrame:{v19, v21, v23, v25}];
  }

  value2 = [elementCopy value];
  if (length == 1)
  {
    v35 = 1;
  }

  else
  {
    v35 = 2;
  }

  [(VOTElementManager *)self outputTextSegmentForRange:location string:length element:value2 usePhonetics:elementCopy segment:length == 1, v35];

  if ([elementCopy isReadingContent])
  {
    self->_bookLineRange.location = location;
    self->_bookLineRange.length = length;
    self->_bookCursorPosition = location;
    v43.origin.x = v19;
    v43.origin.y = v21;
    v43.size.width = v23;
    v43.size.height = v25;
    MidX = CGRectGetMidX(v43);
    v44.origin.x = v19;
    v44.origin.y = v21;
    v44.size.width = v23;
    v44.size.height = v25;
    self->_bookLineNumber = [elementCopy lineNumberForPoint:{MidX, CGRectGetMidY(v44)}];
  }

  if (location == 0x7FFFFFFFFFFFFFFFLL)
  {
    v37 = 1;
  }

  else
  {
    v37 = v26;
  }

  if ((v37 & 1) == 0)
  {
    [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:{objc_msgSend(VOTSharedWorkspace, "suppressSelectionChangeNotificationCount") + 1}];
    [(VOTElementManager *)self _setSelectedTextRange:location onElement:0 refreshBraille:elementCopy, 0];
    selectedTextRange = [elementCopy selectedTextRange];
    [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v39, 0];
  }

  self->_cursorBorderHitCount = 0;
}

- (void)_handleValidatedCustomActionMovementThroughActions:(id)actions forEvent:(id)event inDirection:(int64_t)direction
{
  actionsCopy = actions;
  eventCopy = event;
  v10 = [actionsCopy count];
  v24[0] = _NSConcreteStackBlock;
  v24[1] = 3221225472;
  v24[2] = sub_100086100;
  v24[3] = &unk_1001C9CB0;
  v23 = eventCopy;
  v25 = v23;
  selfCopy = self;
  v11 = objc_retainBlock(v24);
  if (direction == 1)
  {
    v12 = 1;
  }

  else
  {
    v12 = -1;
  }

  v13 = v10 - 1;
  do
  {
    customActionIndex = self->_customActionIndex;
    if (customActionIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      v15 = v13;
      if (direction == 1)
      {
        v15 = 0;
        self->_customActionIndex = 0;
        goto LABEL_10;
      }
    }

    else
    {
      v15 = customActionIndex + v12;
    }

    self->_customActionIndex = v15;
    if ((v15 & 0x8000000000000000) != 0)
    {
      break;
    }

LABEL_10:
    if (v15 >= [actionsCopy count])
    {
      break;
    }

    v16 = [actionsCopy objectAtIndexedSubscript:self->_customActionIndex];
    v17 = (v11[2])(v11, v16);
  }

  while (!v17);
  customActionIdentifier = self->_customActionIdentifier;
  self->_customActionIdentifier = 0;

  v19 = self->_customActionIndex;
  if ((v19 & 0x8000000000000000) != 0 || v19 >= [actionsCopy count])
  {
    self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

  else
  {
    v20 = [actionsCopy objectAtIndexedSubscript:self->_customActionIndex];
    identifier = [v20 identifier];
    v22 = self->_customActionIdentifier;
    self->_customActionIdentifier = identifier;
  }
}

- (id)_customActionsAddingDragCancelActionIfNecessaryForActions:(id)actions
{
  actionsCopy = actions;
  if ([(AXDragManager *)self->_dragManager isDragActive])
  {
    firstObject = [actionsCopy firstObject];
    actions = [firstObject actions];
    v7 = objc_opt_new();
    [actions addObject:v7];
  }

  return actionsCopy;
}

- (id)_currentCachedCustomActionCategories
{
  cachedCustomRotorActions = [(VOTElement *)self->_currentElement cachedCustomRotorActions];
  v4 = [VOTElement organizedActionsByCategory:cachedCustomRotorActions];
  v5 = [(VOTElementManager *)self _customActionsAddingDragCancelActionIfNecessaryForActions:v4];

  return v5;
}

- (id)_currentCustomActions
{
  elementRotor = [(VOTElementManager *)self elementRotor];
  customActionIndex = [elementRotor customActionIndex];
  _currentCustomActionCategory = [(VOTElementManager *)self _currentCustomActionCategory];
  v6 = [_currentCustomActionCategory count];

  if (customActionIndex >= v6)
  {
    actions = 0;
  }

  else
  {
    _currentCustomActionCategory2 = [(VOTElementManager *)self _currentCustomActionCategory];
    elementRotor2 = [(VOTElementManager *)self elementRotor];
    v9 = [_currentCustomActionCategory2 objectAtIndexedSubscript:{objc_msgSend(elementRotor2, "customActionIndex")}];
    actions = [v9 actions];
  }

  return actions;
}

- (id)_currentCustomActionCategory
{
  customRotorActions = [(VOTElement *)self->_currentElement customRotorActions];
  v4 = [VOTElement organizedActionsByCategory:customRotorActions];
  v5 = [(VOTElementManager *)self _customActionsAddingDragCancelActionIfNecessaryForActions:v4];

  return v5;
}

- (void)_handleCustomRotorContent:(id)content direction:(int64_t)direction
{
  customContent = [(VOTElement *)self->_currentElement customContent];
  if (![customContent count])
  {
    goto LABEL_21;
  }

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  customContentIndex = self->_customContentIndex;
  if (customContentIndex)
  {
    if (direction == 2 && customContentIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      goto LABEL_5;
    }

LABEL_7:
    if (customContentIndex == [customContent count] - 1)
    {
      if (direction != 1)
      {
        v9 = [customContent count] - 1;
        goto LABEL_15;
      }
    }

    else if (direction != 1 || self->_customContentIndex != 0x7FFFFFFFFFFFFFFFLL)
    {
      v9 = [customContent count] - 1;
      if (direction == 1)
      {
        v10 = 1;
        goto LABEL_16;
      }

LABEL_15:
      v10 = -1;
LABEL_16:
      v11 = (self->_customContentIndex + v10);
      if (v9 >= v11)
      {
        v9 = v11;
      }

      goto LABEL_18;
    }

    v9 = 0;
    goto LABEL_18;
  }

  if (direction != 2)
  {
    goto LABEL_7;
  }

LABEL_5:
  v9 = [customContent count] - 1;
LABEL_18:
  self->_customContentIndex = v9;
  v12 = VOTLogAudio();
  if (os_log_type_enabled(v12, OS_LOG_TYPE_DEFAULT))
  {
    v13 = self->_customContentIndex;
    v24[0] = 67109120;
    v24[1] = v13;
    _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_DEFAULT, "Content: %d", v24, 8u);
  }

  v14 = [customContent objectAtIndexedSubscript:self->_customContentIndex];
  v15 = +[VOTOutputRequest createRequest];
  v16 = [AXAttributedString alloc];
  attributedValue = [v14 attributedValue];
  v18 = [v16 initWithStringOrAttributedString:attributedValue];
  v19 = [v15 addAttributedString:v18 withLanguage:selectedLanguage];

  v20 = [AXAttributedString alloc];
  attributedLabel = [v14 attributedLabel];
  v22 = [v20 initWithStringOrAttributedString:attributedLabel];
  v23 = [v15 addAttributedString:v22 withLanguage:selectedLanguage];

  [v15 setGeneratesBraille:1];
  [v15 setBrailleType:1];
  [(VOTElementManager *)self sendRequest:v15];
  [(VOTElementManager *)self _resetOtherTapInputModes];

LABEL_21:
}

- (id)_customActionDefaultActionString
{
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXWebInteractiveVideoTrait])
  {
    uiElement = [(VOTElement *)self->_currentElement uiElement];
    [uiElement updateCache:2179];

    uiElement2 = [(VOTElement *)self->_currentElement uiElement];
    LODWORD(uiElement) = [uiElement2 BOOLWithAXAttribute:2179];

    v6 = off_1001FDDD0;
    if (uiElement)
    {
      v7 = @"web.interactive.video.pause.action";
    }

    else
    {
      v7 = @"web.interactive.video.play.action";
    }
  }

  else
  {
    v6 = off_1001FDDD0;
    v7 = @"activate.action";
  }

  v8 = sub_1000516CC(v6, v7, 0, selectedLanguage);

  return v8;
}

- (void)_handleCustomRotorAction:(id)action direction:(int64_t)direction
{
  actionCopy = action;
  _currentCustomActions = [(VOTElementManager *)self _currentCustomActions];
  [VOTElementManager _handleValidatedCustomActionMovementThroughActions:"_handleValidatedCustomActionMovementThroughActions:forEvent:inDirection:" forEvent:? inDirection:?];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  if (self->_customActionIndex != 0x7FFFFFFFFFFFFFFFLL)
  {
    _customActionDefaultActionString = [_currentCustomActions objectAtIndex:?];
    [_customActionDefaultActionString prepareWithContext:self];
    name = [_customActionDefaultActionString name];
    if (!selectedLanguage)
    {
      selectedLanguage = [_customActionDefaultActionString language];
    }

LABEL_9:

    goto LABEL_11;
  }

  if ([_currentCustomActions count])
  {
    if (self->_flags.itemChooserVisible && [(VOTElement *)self->_currentElement isInTableCell])
    {
      name = sub_1000516CC(off_1001FDDD0, @"item.chooser.default.action", 0, selectedLanguage);
      goto LABEL_11;
    }

    _customActionDefaultActionString = [(VOTElementManager *)self _customActionDefaultActionString];
    v9 = sub_1000516CC(off_1001FDDD0, @"default.action.suffix", 0, selectedLanguage);
    name = [AXAttributedString axAttributedStringWithString:_customActionDefaultActionString];
    v10 = [AXAttributedString axAttributedStringWithString:v9];
    [v10 setAttribute:&__kCFBooleanTrue forKey:UIAccessibilityTokenLowPitch];
    [name appendAXAttributedString:v10];

    goto LABEL_9;
  }

  name = 0;
LABEL_11:
  [(VOTElementManager *)self _resetOtherTapInputModes];
  v11 = objc_opt_new();
  v12 = [v11 addString:name withLanguage:selectedLanguage];
  [v11 setBrailleType:1];
  [v11 setGeneratesBraille:1];
  outputActions = [v11 outputActions];
  lastObject = [outputActions lastObject];
  [lastObject setObject:&__kCFBooleanTrue forVariant:76];

  [v11 send];
}

- (id)availableAudiographActionsForElement:(id)element
{
  elementCopy = element;
  v4 = +[NSMutableArray array];
  if (AXDeviceSupportsSonification())
  {
    v5 = off_1001FDDD0;
    language = [elementCopy language];
    v7 = sub_1000511CC(v5, @"search.rotor.audiograph.describe.chart", language);
    [v4 addObject:v7];

    if ([elementCopy supportsAudiographs])
    {
      v8 = off_1001FDDD0;
      language2 = [elementCopy language];
      v10 = sub_1000511CC(v8, @"search.rotor.audiograph.play.sonification", language2);
      [v4 addObject:v10];

      v11 = +[AXSpringBoardServer server];
      LOBYTE(language2) = [v11 isShowingRemoteView:5];

      if ((language2 & 1) == 0)
      {
        v12 = off_1001FDDD0;
        language3 = [elementCopy language];
        v14 = sub_1000511CC(v12, @"search.rotor.audiograph.chart.details", language3);
        [v4 addObject:v14];
      }
    }
  }

  v15 = [v4 copy];

  return v15;
}

- (void)_handleAudiographAction:(int64_t)action event:(id)event
{
  if (AXDeviceSupportsSonification())
  {
    v15 = [(VOTElementManager *)self availableAudiographActionsForElement:self->_currentElement];
    if ([v15 count])
    {
      v6 = [v15 count];
      v7 = self->_audiographActionIdentifier;
      v8 = [v15 indexOfObject:v7];
      if (v8 == 0x7FFFFFFFFFFFFFFFLL)
      {
        v9 = 0;
      }

      else
      {
        if (action == 1)
        {
          v10 = 1;
        }

        else
        {
          v10 = -1;
        }

        v9 = (v8 + v6 + v10) % v6;
      }

      v11 = [v15 objectAtIndexedSubscript:v9];
      audiographActionIdentifier = self->_audiographActionIdentifier;
      self->_audiographActionIdentifier = v11;

      [(VOTElementManager *)self _resetOtherTapInputModes];
      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v14 = sub_1000095FC(self->_audiographActionIdentifier, 0, selectedLanguage);
    }
  }
}

- (void)_handleToggleLiveRegions:(int64_t)regions
{
  _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
  v6 = v5;
  v7 = _appInfoForCurrentElement;
  v8 = v6;
  webAreaURL = [(VOTElement *)self->_currentElement webAreaURL];
  host = [webAreaURL host];

  v11 = VOTLogCommon();
  if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
  {
    *buf = 138478083;
    v28 = _appInfoForCurrentElement;
    v29 = 2113;
    v30 = host;
    _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_DEFAULT, "Toggling live region for: %{private}@ %{private}@", buf, 0x16u);
  }

  v12 = v8;
  v13 = v7;
  if ([host length])
  {
    v14 = host;

    v12 = v14;
    v13 = v12;
  }

  v15 = +[AXSettings sharedInstance];
  v16 = [v15 liveRegionStatusForWebOrApp:v13];

  v17 = &__kCFBooleanFalse;
  if (v16 && ![v16 BOOLValue])
  {
    v17 = &__kCFBooleanTrue;
  }

  v18 = off_1001FDDD0;
  bOOLValue = [v17 BOOLValue];
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  if (bOOLValue)
  {
    v21 = @"search.rotor.toggle.live.regions.on";
  }

  else
  {
    v21 = @"search.rotor.toggle.live.regions.off";
  }

  v22 = sub_1000516CC(v18, v21, 0, selectedLanguage);

  v23 = AXCFormattedString();
  selectedLanguage2 = [VOTSharedWorkspace selectedLanguage];
  v25 = sub_1000095FC(v23, 0, selectedLanguage2);

  v26 = +[AXSettings sharedInstance];
  [v26 setLiveRegionStatusForWebOrApp:v13 status:v17];
}

- (void)_handleMLElementModeWithDirection:(int64_t)direction verboseOutput:(BOOL)output
{
  outputCopy = output;
  _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
  v26 = v8;
  if (j__VOSProcessAllowsScreenRecognition())
  {
    v9 = +[AXSettings sharedInstance];
    v10 = [v9 automaticAccessibilityModeForBundleIdentifier:_appInfoForCurrentElement];

    if (v10 >= 1)
    {
      v11 = 1;
    }

    else
    {
      v11 = v10;
    }

    if (direction == 1)
    {
      if (v10 > 0)
      {
LABEL_13:
        v12 = off_1001FDDD0;
        [VOTSharedWorkspace selectedLanguage];
        if (outputCopy)
          v13 = {;
          v14 = sub_1000516CC(v12, @"search.rotor.neural.vision.off", 0, v13);

          v25 = v26;
          AXCFormattedString();
        }

        else
          v14 = {;
          sub_1000516CC(v12, @"element.off.text", 0, v14);
        }
        v18 = ;

        if (![(VOTElement *)self->_currentElement isInAppSwitcher])
        {
          v19 = +[VOTDisplayManager displayManager];
          [v19 setElementFrames:&__NSArray0__struct];

          v20 = +[VOTDisplayManager displayManager];
          [v20 setCursorFrameForElement:0];

          [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer dispatchAfterDelay:1.0];
        }

        v11 = 0;
        goto LABEL_24;
      }

      ++v11;
    }

    else if (direction == 2)
    {
      if (!v10)
      {
        goto LABEL_15;
      }

      --v11;
    }

    if (v11 != 1)
    {
      if (!v11)
      {
        goto LABEL_13;
      }

      v18 = 0;
LABEL_24:
      v21 = +[AXSettings sharedInstance];
      [v21 setAutomaticAccessibilityMode:v11 forBundleIdentifier:_appInfoForCurrentElement];

      AXSetProcessWantsMLElementForBundle();
      v22 = +[AXSettings sharedInstance];
      [v22 setAutomaticAccessibilityMode:v11 forBundleIdentifier:_appInfoForCurrentElement];

      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v24 = sub_1000095FC(v18, 0, selectedLanguage);

      goto LABEL_25;
    }

LABEL_15:
    v15 = off_1001FDDD0;
    [VOTSharedWorkspace selectedLanguage];
    if (outputCopy)
      v16 = {;
      v17 = sub_1000516CC(v15, @"search.rotor.neural.vision.on", 0, v16);

      v25 = v26;
      AXCFormattedString();
    }

    else
      v17 = {;
      sub_1000516CC(v15, @"element.on.text", 0, v17);
    }
    v18 = ;

    v11 = 1;
    goto LABEL_24;
  }

LABEL_25:
}

- ($7159EBE1BBBCDCA1B95AF1FC27B9DE98)_appInfoForCurrentElement
{
  if (![(VOTElement *)self->_currentElement isInStatusBar]|| ([(NSArray *)self->_currentApplications firstObject], (application = objc_claimAutoreleasedReturnValue()) == 0))
  {
    application = [(VOTElement *)self->_currentElement application];
    if (!application)
    {
      application = [(NSArray *)self->_currentApplications firstObject];
    }
  }

  v4 = application;
  bundleIdentifier = [application bundleIdentifier];
  label = [v4 label];
  if ([(VOTElement *)self->_currentElement isInAppSwitcher])
  {
    bundleIdentifier2 = [(VOTElement *)self->_currentElement bundleIdentifier];

    label2 = [(VOTElement *)self->_currentElement label];

    bundleIdentifier = bundleIdentifier2;
    label = label2;
  }

  v9 = bundleIdentifier;
  v10 = label;
  result.var1 = v10;
  result.var0 = v9;
  return result;
}

- (void)_handleNavigationStyleMovement:(id)movement direction:(int64_t)direction
{
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v5 = +[AXSettings sharedInstance];
  voiceOverNavigationStyle = [v5 voiceOverNavigationStyle];

  v7 = +[AXSettings sharedInstance];
  v8 = v7;
  v9 = voiceOverNavigationStyle != 1;
  if (voiceOverNavigationStyle == 1)
  {
    v10 = @"NAVIGATION_STYLE_FLAT";
  }

  else
  {
    v10 = @"NAVIGATION_STYLE_GROUPS";
  }

  [v7 setVoiceOverNavigationStyle:v9];

  v11 = sub_1000516CC(off_1001FDDD0, v10, 0, selectedLanguage);
  v12 = sub_1000095FC(v11, 0, selectedLanguage);
  [(VOTElementFetcher *)self->_fetchManager forceUpdate];
}

- (void)_handleDetectionModeMovement:(id)movement direction:(int64_t)direction
{
  currentRotorDetectionMode = [VOTSharedWorkspace currentRotorDetectionMode];
  v6 = +[AXSettings sharedInstance];
  voiceOverDetectionModeItems = [v6 voiceOverDetectionModeItems];

  if (![voiceOverDetectionModeItems count])
  {
    goto LABEL_60;
  }

  if ([voiceOverDetectionModeItems count])
  {
    v7 = 0;
    while (1)
    {
      v8 = [voiceOverDetectionModeItems objectAtIndexedSubscript:v7];
      v9 = [v8 valueForKey:@"Detector"];
      stringValue = [v9 stringValue];
      v11 = AXDetectionModeForName();

      if (v11 == currentRotorDetectionMode)
      {
        break;
      }

      if ([voiceOverDetectionModeItems count] <= ++v7)
      {
        goto LABEL_6;
      }
    }
  }

  else
  {
LABEL_6:
    LODWORD(v7) = 0;
  }

  if (direction == 2)
  {
    if (currentRotorDetectionMode == 6)
    {
      v22 = +[AXSettings sharedInstance];
      liveRecognitionActivity = [v22 liveRecognitionActivity];
      name = [liveRecognitionActivity name];

      v24 = +[AXSettings sharedInstance];
      liveRecognitionActivities = [v24 liveRecognitionActivities];
      allKeys = [liveRecognitionActivities allKeys];

      v26 = [allKeys indexOfObject:name];
      if (v26 && v26 != 0x7FFFFFFFFFFFFFFFLL)
      {
        v21 = v26 - 1;
        v20 = allKeys;
LABEL_46:
        v17AllKeys = [v20 objectAtIndexedSubscript:v21];
        v69 = +[AXSettings sharedInstance];
        liveRecognitionActivities2 = [v69 liveRecognitionActivities];
        v61 = [liveRecognitionActivities2 objectForKeyedSubscript:v17AllKeys];

        stringValue2 = +[AXSettings sharedInstance];
        [stringValue2 setLiveRecognitionActivity:v61];
        currentRotorDetectionMode = 6;
LABEL_47:

        goto LABEL_52;
      }

      v27 = v7;
      while (v27-- >= 1)
      {
        v29 = [voiceOverDetectionModeItems objectAtIndexedSubscript:v27];
        v30 = [v29 valueForKey:@"Enabled"];
        bOOLValue = [v30 BOOLValue];

        v32 = voiceOverDetectionModeItems;
        if (bOOLValue)
        {
LABEL_36:
          v17AllKeys = [v32 objectAtIndexedSubscript:v27];
          v61 = [v17AllKeys valueForKey:@"Detector"];
          stringValue2 = [v61 stringValue];
          currentRotorDetectionMode = AXDetectionModeForName();
          goto LABEL_47;
        }
      }

      v45 = voiceOverDetectionModeItems;
    }

    else
    {
      v45 = voiceOverDetectionModeItems;
      if (v7)
      {
        v46 = v7 + 1;
        while (1)
        {
          v47 = [v45 objectAtIndexedSubscript:v46 - 2];
          v48 = [v47 valueForKey:@"Enabled"];
          bOOLValue2 = [v48 BOOLValue];

          if (bOOLValue2)
          {
            v50 = [voiceOverDetectionModeItems objectAtIndexedSubscript:v46 - 2];
            v51 = [v50 valueForKey:@"Detector"];
            stringValue3 = [v51 stringValue];
            currentRotorDetectionMode = AXDetectionModeForName();

            if (currentRotorDetectionMode != 6)
            {
              goto LABEL_53;
            }

            v53 = +[AXSettings sharedInstance];
            liveRecognitionActivities3 = [v53 liveRecognitionActivities];
            allKeys2 = [liveRecognitionActivities3 allKeys];
            v56 = [allKeys2 count];

            if (v56)
            {
              break;
            }
          }

          --v46;
          v45 = voiceOverDetectionModeItems;
          if (v46 <= 1)
          {
            goto LABEL_41;
          }
        }

        v71 = +[AXSettings sharedInstance];
        liveRecognitionActivities4 = [v71 liveRecognitionActivities];
        allKeys3 = [liveRecognitionActivities4 allKeys];
        lastObject = [allKeys3 lastObject];
LABEL_50:
        name = lastObject;

        v75 = +[AXSettings sharedInstance];
        liveRecognitionActivities5 = [v75 liveRecognitionActivities];
        allKeys = [liveRecognitionActivities5 objectForKeyedSubscript:name];

        v17AllKeys = +[AXSettings sharedInstance];
        [v17AllKeys setLiveRecognitionActivity:allKeys];
        goto LABEL_51;
      }
    }

LABEL_41:
    lastObject2 = [v45 lastObject];
    v66 = [lastObject2 valueForKey:@"Detector"];
    stringValue4 = [v66 stringValue];
    currentRotorDetectionMode = AXDetectionModeForName();

    if (currentRotorDetectionMode == 6)
    {
      name = +[AXSettings sharedInstance];
      allKeys = [name liveRecognitionActivities];
      v17AllKeys = [allKeys allKeys];
      if (![v17AllKeys count])
      {
        v68 = [voiceOverDetectionModeItems count];

        if (v68 < 2)
        {
          currentRotorDetectionMode = 6;
          goto LABEL_53;
        }

        v64 = [voiceOverDetectionModeItems count] - 2;
        v63 = voiceOverDetectionModeItems;
        goto LABEL_39;
      }

LABEL_51:
      currentRotorDetectionMode = 6;
      goto LABEL_52;
    }
  }

  else if (direction == 1)
  {
    if (currentRotorDetectionMode == 6)
    {
      v12 = +[AXSettings sharedInstance];
      liveRecognitionActivity2 = [v12 liveRecognitionActivity];
      name = [liveRecognitionActivity2 name];

      v15 = +[AXSettings sharedInstance];
      liveRecognitionActivities6 = [v15 liveRecognitionActivities];
      allKeys = [liveRecognitionActivities6 allKeys];

      v18 = [allKeys indexOfObject:name];
      if (v18 != 0x7FFFFFFFFFFFFFFFLL)
      {
        v19 = v18 + 1;
        if (v18 + 1 < [allKeys count])
        {
          v20 = allKeys;
          v21 = v19;
          goto LABEL_46;
        }
      }

      v27 = v7;
      v32 = voiceOverDetectionModeItems;
      while ([v32 count] > ++v27)
      {
        v57 = [voiceOverDetectionModeItems objectAtIndexedSubscript:v27];
        v58 = [v57 valueForKey:@"Enabled"];
        bOOLValue3 = [v58 BOOLValue];

        v32 = voiceOverDetectionModeItems;
        if (bOOLValue3)
        {
          goto LABEL_36;
        }
      }

      goto LABEL_38;
    }

    v33 = (v7 + 1);
    if ([voiceOverDetectionModeItems count] <= v33)
    {
LABEL_38:
      v63 = voiceOverDetectionModeItems;
      v64 = 0;
LABEL_39:
      name = [v63 objectAtIndexedSubscript:v64];
      allKeys = [name valueForKey:@"Detector"];
      v17AllKeys = [allKeys stringValue];
      currentRotorDetectionMode = AXDetectionModeForName();
LABEL_52:

      goto LABEL_53;
    }

    while (1)
    {
      v34 = [voiceOverDetectionModeItems objectAtIndexedSubscript:v33];
      v35 = [v34 valueForKey:@"Enabled"];
      bOOLValue4 = [v35 BOOLValue];

      v37 = voiceOverDetectionModeItems;
      if (bOOLValue4)
      {
        v38 = [voiceOverDetectionModeItems objectAtIndexedSubscript:v33];
        v39 = [v38 valueForKey:@"Detector"];
        stringValue5 = [v39 stringValue];
        currentRotorDetectionMode = AXDetectionModeForName();

        if (currentRotorDetectionMode != 6)
        {
          goto LABEL_53;
        }

        v41 = +[AXSettings sharedInstance];
        liveRecognitionActivities7 = [v41 liveRecognitionActivities];
        allKeys4 = [liveRecognitionActivities7 allKeys];
        v44 = [allKeys4 count];

        v37 = voiceOverDetectionModeItems;
        if (v44)
        {
          break;
        }
      }

      if ([v37 count] <= ++v33)
      {
        goto LABEL_38;
      }
    }

    v71 = +[AXSettings sharedInstance];
    liveRecognitionActivities4 = [v71 liveRecognitionActivities];
    allKeys3 = [liveRecognitionActivities4 allKeys];
    lastObject = [allKeys3 firstObject];
    goto LABEL_50;
  }

LABEL_53:
  [VOTSharedWorkspace setCurrentRotorDetectionMode:currentRotorDetectionMode];
  if (currentRotorDetectionMode == 6)
  {
    v77 = +[AXSettings sharedInstance];
    liveRecognitionActivity3 = [v77 liveRecognitionActivity];
    if ([liveRecognitionActivity3 isActive])
    {
      v79 = +[AXSettings sharedInstance];
      enabledLiveRecognitionModes = [v79 enabledLiveRecognitionModes];
      v81 = [NSNumber numberWithUnsignedInt:6];
      v82 = [enabledLiveRecognitionModes containsObject:v81];
    }

    else
    {
      v82 = 0;
    }

    v83 = +[AXSettings sharedInstance];
    liveRecognitionActivity4 = [v83 liveRecognitionActivity];
    name2 = [liveRecognitionActivity4 name];
    v86 = sub_100087D3C(name2, v82);
    v89 = [NSString stringWithFormat:@"%@, %@", name2, v86];
  }

  else
  {
    v83 = AXLocalizedNameForDetectionMode();
    liveRecognitionActivity4 = +[AXSettings sharedInstance];
    name2 = [liveRecognitionActivity4 enabledLiveRecognitionModes];
    v86 = [NSNumber numberWithUnsignedInt:currentRotorDetectionMode];
    v87 = [name2 containsObject:v86];
    v88 = sub_100087D3C(v87, v87);
    v89 = [NSString stringWithFormat:@"%@, %@", v83, v88];
  }

  v90 = sub_1000095FC(v89, 0, 0);
LABEL_60:

  _objc_release_x1();
}

- (void)_handleImageDescriptionsToggle:(int64_t)toggle
{
  _appInfoForCurrentElement = [(VOTElementManager *)self _appInfoForCurrentElement];
  v18 = v4;
  v5 = +[AXSettings sharedInstance];
  imageCaptioningDisabledApps = [v5 imageCaptioningDisabledApps];
  v7 = [imageCaptioningDisabledApps mutableCopy];

  if (!v7)
  {
    v7 = +[NSMutableSet set];
  }

  if ([v7 containsObject:_appInfoForCurrentElement])
  {
    [v7 removeObject:_appInfoForCurrentElement];
    v8 = off_1001FDDD0;
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    sub_1000516CC(v8, @"image.descriptions.on.for.app", 0, selectedLanguage);
  }

  else
  {
    [v7 addObject:_appInfoForCurrentElement];
    v10 = off_1001FDDD0;
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    sub_1000516CC(v10, @"image.descriptions.off.for.app", 0, selectedLanguage);
  }
  v11 = ;

  allObjects = [v7 allObjects];
  v13 = +[AXSettings sharedInstance];
  [v13 setImageCaptioningDisabledApps:allObjects];

  visionEngine = [VOTSharedWorkspace visionEngine];
  [visionEngine purgeCache];

  v15 = AXCFormattedString();
  selectedLanguage2 = [VOTSharedWorkspace selectedLanguage];
  v17 = sub_1000095FC(v15, 0, selectedLanguage2);
}

- (void)_handleIntraContainerMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  v5 = [command isEqualToString:kVOTEventCommandContainerTop];

  touchContainer = [(VOTElement *)self->_currentElement touchContainer];
  v7 = touchContainer;
  if (v5)
  {
    [touchContainer firstContainedElement];
  }

  else
  {
    [touchContainer lastContainedElement];
  }
  v8 = ;
  if (v8)
  {
    [(VOTElementManager *)self _echoDifferentElement:v8 forEvent:movementCopy];
  }

  else
  {
    v9 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v9 sendEvent:v10];
  }
}

- (void)_handleContainerMovement:(id)movement
{
  movementCopy = movement;
  command = [movementCopy command];
  if ([command isEqualToString:kVOTEventCommandNextContainer])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleContainerMovement:movementCopy direction:v5];
}

- (void)_handleGuideElementMovement:(id)movement direction:(int64_t)direction
{
  movementCopy = movement;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  _currentElement = [(VOTElementManager *)self _currentElement];
  v8 = _currentElement;
  if (direction == 1)
  {
    [_currentElement nextGuideElement];
  }

  else
  {
    [_currentElement previousGuideElement];
  }
  v9 = ;
  if (![v9 isAccessibleElement])
  {
    accessibleDescendants = [v9 accessibleDescendants];
    firstObject = [accessibleDescendants firstObject];

    if (firstObject)
    {
      goto LABEL_9;
    }

LABEL_11:
    v14 = +[VOTOutputManager outputManager];
    v15 = +[VOSOutputEvent BoundaryEncountered];
    [v14 sendEvent:v15];

    goto LABEL_12;
  }

  firstObject = v9;
  if (!firstObject)
  {
    goto LABEL_11;
  }

LABEL_9:
  v11 = sub_100052438(direction);
  v16 = _NSConcreteStackBlock;
  v17 = 3221225472;
  v18 = sub_100088338;
  v19 = &unk_1001C7778;
  selfCopy = self;
  v12 = firstObject;
  v21 = v12;
  [v12 scrollToElementForDirectional:v11 withCompletion:&v16];
  [movementCopy setIsGuideElementMovementEvent:{1, v16, v17, v18, v19, selfCopy}];
  [(VOTElementManager *)self _echoDifferentElement:v12 forEvent:movementCopy];
  [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v12];

LABEL_12:
}

- (void)_handleContainerMovement:(id)movement direction:(int64_t)direction
{
  movementCopy = movement;
  _currentElement = [(VOTElementManager *)self _currentElement];
  v8 = _currentElement;
  if (direction == 1)
  {
    nextContainer = [_currentElement nextContainer];
    v10 = 0;
  }

  else
  {
    touchContainer = [_currentElement touchContainer];
    firstContainedElement = [touchContainer firstContainedElement];
    v13 = firstContainedElement;
    if (touchContainer && ![firstContainedElement isEqual:v8])
    {
      v10 = v13;
      nextContainer = 0;
    }

    else
    {
      nextContainer = [v8 previousContainer];
      v10 = 0;
    }
  }

  if ([nextContainer isTouchContainer])
  {
    firstContainedElement2 = [nextContainer firstContainedElement];
  }

  else
  {
    firstContainedElement2 = nextContainer;
  }

  firstContainedElement3 = firstContainedElement2;
  v17 = firstContainedElement2 == 0;
  if (firstContainedElement2 || !nextContainer)
  {
    v18 = nextContainer;
  }

  else
  {
    *&v15 = 138412546;
    v25 = v15;
    do
    {
      if (direction == 1)
      {
        [nextContainer nextContainer];
      }

      else
      {
        [nextContainer previousContainer];
      }
      v18 = ;

      firstContainedElement3 = [v18 firstContainedElement];
      v19 = VOTLogElement();
      if (os_log_type_enabled(v19, OS_LOG_TYPE_DEBUG))
      {
        *buf = v25;
        v33 = v18;
        v34 = 2112;
        v35 = firstContainedElement3;
        _os_log_debug_impl(&_mh_execute_header, v19, OS_LOG_TYPE_DEBUG, "found empty container, trying next container: %@, with found element: %@", buf, 0x16u);
      }

      v17 = firstContainedElement3 == 0;
      if (firstContainedElement3)
      {
        break;
      }

      nextContainer = v18;
    }

    while (v18);
  }

  if (!v17 && ([firstContainedElement3 isEqual:v8] & 1) == 0)
  {
    v23 = firstContainedElement3;

    firstVisibleElementInList = [v23 firstVisibleElementInList];
    if (firstVisibleElementInList)
    {
      v10 = firstVisibleElementInList;

      goto LABEL_30;
    }

    v10 = v23;
LABEL_26:
    v20 = sub_100052438(direction);
    v26 = _NSConcreteStackBlock;
    v27 = 3221225472;
    v28 = sub_100088698;
    v29 = &unk_1001C7778;
    selfCopy = self;
    v10 = v10;
    v31 = v10;
    [v10 scrollToElementForDirectional:v20 withCompletion:&v26];

LABEL_30:
    [(VOTElementManager *)self _echoDifferentElement:v10 forEvent:movementCopy, v25, v26, v27, v28, v29, selfCopy];
    [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v10];
    goto LABEL_31;
  }

  if (v10)
  {
    goto LABEL_26;
  }

  v21 = +[VOTOutputManager outputManager];
  v22 = +[VOSOutputEvent BoundaryEncountered];
  [v21 sendEvent:v22];

LABEL_31:
}

- (void)_handleElementMoveToStatusBar:(id)bar
{
  barCopy = bar;
  v5 = kAXStatusBarElementTrait;
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXStatusBarElementTrait])
  {
    firstElementInStatusBar = self->_elementBeforeStatusBarMovement;
    if (![(VOTElement *)firstElementInStatusBar isValid])
    {
      v7 = +[VOTElement systemAppApplication];
      focusedApplications = [v7 focusedApplications];
      firstObject = [focusedApplications firstObject];
      firstElementInApplication = [firstObject firstElementInApplication];

      firstElementInStatusBar = firstElementInApplication;
    }

    elementBeforeStatusBarMovement = self->_elementBeforeStatusBarMovement;
    self->_elementBeforeStatusBarMovement = 0;

    [(VOTElementManager *)self _echoDifferentElement:firstElementInStatusBar forEvent:barCopy];
  }

  else
  {
    objc_storeStrong(&self->_elementBeforeStatusBarMovement, self->_currentElement);
    v12 = +[VOTElement systemAppApplication];
    firstElementInStatusBar = [v12 firstElementInStatusBar];

    v33 = 0u;
    v34 = 0u;
    v31 = 0u;
    v32 = 0u;
    v13 = +[VOTElement systemAppApplication];
    statusBarElements = [v13 statusBarElements];

    v15 = [statusBarElements countByEnumeratingWithState:&v31 objects:v35 count:16];
    if (v15)
    {
      v29 = firstElementInStatusBar;
      v30 = barCopy;
      v16 = *v32;
      while (2)
      {
        for (i = 0; i != v15; i = (i + 1))
        {
          if (*v32 != v16)
          {
            objc_enumerationMutation(statusBarElements);
          }

          v18 = *(*(&v31 + 1) + 8 * i);
          if ([v18 doesHaveTraits:{v5, v29, v30}])
          {
            roleDescription = [v18 roleDescription];
            windowSceneIdentifier = [(VOTElement *)self->_currentElement windowSceneIdentifier];
            v21 = [roleDescription isEqualToString:windowSceneIdentifier];

            if (v21)
            {
              v15 = v18;
              goto LABEL_16;
            }
          }
        }

        v15 = [statusBarElements countByEnumeratingWithState:&v31 objects:v35 count:16];
        if (v15)
        {
          continue;
        }

        break;
      }

LABEL_16:
      firstElementInStatusBar = v29;
      barCopy = v30;
    }

    window = [(VOTElement *)firstElementInStatusBar window];
    window2 = [(VOTElement *)v15 window];
    v24 = [window isEqual:window2];

    if ((v15 == 0) | v24 & 1)
    {
      v25 = firstElementInStatusBar;
    }

    else
    {
      v25 = v15;
    }

    v26 = v25;
    if ([(VOTElement *)v26 doesHaveTraits:v5])
    {
      [(VOTElementManager *)self _echoDifferentElement:v26 forEvent:barCopy];
    }

    else
    {
      v27 = +[VOTOutputManager outputManager];
      v28 = +[VOSOutputEvent NoItemExists];
      [v27 sendEvent:v28];
    }
  }
}

- (void)_dismissAlternativeKeyboardKeys
{
  [(VOTElement *)self->_currentElement dismissAlternativeKeyboardPicker];
  self->_keyboardAlternativesVisible = 0;
  v3 = CGPointZero;
  self->_keyboardAlternativeVisibleTrackingPoint = CGPointZero;
  self->_keyboardAlternativeVisibleStartPoint = v3;
  [VOTSharedWorkspace cancelTapAndHoldMode];
  v4 = +[VOTElement systemWideElement];
  [v4 sendTouchCancelledEvent];

  application = [(VOTElement *)self->_currentElement application];
  currentSoftwareKeyboardLayout = [application currentSoftwareKeyboardLayout];

  if ((sub_100052974(currentSoftwareKeyboardLayout) & 1) == 0)
  {
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent PopoverDidAppear];
    [v6 sendEvent:v7];
  }
}

- (void)_activateAlternativeKeyboardKey:(id)key
{
  if (self->_flags.shouldTriggerAlternativeKeyActivation)
  {
    application = [(VOTElement *)self->_currentElement application];
    activeKeyboard = [application activeKeyboard];
    isKeyboardContinuousPathAvailable = [activeKeyboard isKeyboardContinuousPathAvailable];

    if (isKeyboardContinuousPathAvailable)
    {
      v7 = +[AXHapticFeedbackManager sharedManager];
      [v7 playHapticFeedbackForType:17];
    }

    self->_flags.shouldTriggerAlternativeKeyActivation = 0;
    v8 = !self->_flags.continuousPathActivationDesired;
    v9 = VOTLogCommon();
    if (os_log_type_enabled(v9, OS_LOG_TYPE_INFO))
    {
      v10[0] = 67109120;
      v10[1] = v8;
      _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_INFO, "Starting alternative keyboard key: play sound: %d", v10, 8u);
    }

    [VOTSharedWorkspace startTapAndHoldMode:v8];
    self->_flags.continuousPathActivationDesired = 0;
  }
}

- (void)_resetQuickNavState
{
  v6 = +[VOTKeyboardManager keyboardManager];
  if ([v6 isQuickNavOn])
  {
  }

  else
  {
    v3 = +[VOTConfiguration rootConfiguration];
    v4 = [v3 preferenceForKey:@"VOTQuickNavEnabled"];
    bOOLValue = [v4 BOOLValue];

    if (bOOLValue && CFAbsoluteTimeGetCurrent() - self->_lastTemporaryQuickNavDisableTime > 0.5)
    {
      [VOTSharedWorkspace temporarilyChangeQuickNavState:1];

      [(VOTElementManager *)self _handleQuickNavFeedback:1];
    }
  }
}

- (void)_updateExternalAccessory:(id)accessory
{
  accessoryCopy = accessory;
  v4 = +[VOTExternalAccessoryManager accessoryManager];
  [v4 updateCurrentItemProperties:accessoryCopy];
}

- (BOOL)_languageRotorItemsContainLanguage:(id)language
{
  languageCopy = language;
  v15 = 0u;
  v16 = 0u;
  v17 = 0u;
  v18 = 0u;
  languageRotorItems = [VOTSharedWorkspace languageRotorItems];
  v5 = [languageRotorItems countByEnumeratingWithState:&v15 objects:v19 count:16];
  if (v5)
  {
    v6 = v5;
    v7 = *v16;
    while (2)
    {
      for (i = 0; i != v6; i = i + 1)
      {
        if (*v16 != v7)
        {
          objc_enumerationMutation(languageRotorItems);
        }

        v9 = [*(*(&v15 + 1) + 8 * i) objectForKeyedSubscript:@"RotorItem"];
        if ([v9 isEqualToString:languageCopy])
        {

LABEL_13:
          v13 = 1;
          goto LABEL_14;
        }

        v10 = AXLanguageConvertToCanonicalForm();
        v11 = AXLanguageConvertToCanonicalForm();
        v12 = [v10 isEqualToString:v11];

        if (v12)
        {
          goto LABEL_13;
        }
      }

      v6 = [languageRotorItems countByEnumeratingWithState:&v15 objects:v19 count:16];
      v13 = 0;
      if (v6)
      {
        continue;
      }

      break;
    }
  }

  else
  {
    v13 = 0;
  }

LABEL_14:

  return v13;
}

- (void)_updateMostRecentElementCommunity
{
  v3 = [(VOTElementManager *)self _elementCommunityForElement:self->_currentElement];
  [(VOTElementManager *)self _updateWithMostRecentElementCommunity:v3];
}

- (BOOL)_updateWithMostRecentElementCommunity:(id)community
{
  communityCopy = community;
  if (communityCopy && (-[VOTElementManager mostRecentElementCommunity](self, "mostRecentElementCommunity"), v5 = objc_claimAutoreleasedReturnValue(), v6 = [v5 isEqual:communityCopy], v5, (v6 & 1) == 0))
  {
    [(VOTElementManager *)self setMostRecentElementCommunity:communityCopy];
    [(VOTElementManager *)self _updateMLElementAutorefresh];
    v7 = 1;
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (BOOL)_isElementValidForFirstResponder:(id)responder
{
  responderCopy = responder;
  v5 = responderCopy;
  if (self->_firstResponderElement)
  {
    if ([responderCopy isEqual:?])
    {
      v6 = 1;
    }

    else
    {
      textInputElement = [v5 textInputElement];
      v6 = [textInputElement isEqual:self->_firstResponderElement];
    }
  }

  else
  {
    v6 = 0;
  }

  return v6;
}

- (BOOL)_setCurrentElement:(id)element shouldSetBrailleElement:(id)brailleElement
{
  elementCopy = element;
  LOBYTE(brailleElement) = -[VOTElementManager _setCurrentElement:isProtectedApp:shouldResetTextSelection:shouldResetCharacterRange:ignoreIsAccessibilityElementCheck:shouldSetBrailleElement:](self, "_setCurrentElement:isProtectedApp:shouldResetTextSelection:shouldResetCharacterRange:ignoreIsAccessibilityElementCheck:shouldSetBrailleElement:", elementCopy, 0, 1, 1, 0, [brailleElement BOOLValue]);

  return brailleElement;
}

- (BOOL)_setCurrentElement:(id)element isProtectedApp:(BOOL)app shouldResetTextSelection:(BOOL)selection shouldResetCharacterRange:(BOOL)range ignoreIsAccessibilityElementCheck:(BOOL)check shouldSetBrailleElement:(BOOL)brailleElement
{
  brailleElementCopy = brailleElement;
  checkCopy = check;
  rangeCopy = range;
  selectionCopy = selection;
  appCopy = app;
  elementCopy = element;
  v16 = VOTLogElement();
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B7B0();
  }

  IsTV = AXDeviceIsTV();
  if (elementCopy && IsTV && [VOTSharedWorkspace tvInteractionMode] != 2)
  {
    bundleIdentifier2 = VOTLogElement();
    if (os_log_type_enabled(bundleIdentifier2, OS_LOG_TYPE_ERROR))
    {
      sub_10012B820();
    }

    goto LABEL_64;
  }

  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v115 = brailleElementCopy;
  if (!elementCopy && appCopy)
  {
    _AXAssert();
  }

  if (AXDeviceHasJindo())
  {
    jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
    bundleIdentifier = [elementCopy bundleIdentifier];
    if (-[NSArray containsObject:](jindoAppBundleIdentifiers, "containsObject:", bundleIdentifier) && ([elementCopy isInJindoWindow] & 1) == 0)
    {
      isInAppSwitcher = [elementCopy isInAppSwitcher];

      if ((isInAppSwitcher & 1) == 0)
      {
        goto LABEL_66;
      }
    }

    else
    {
    }
  }

  if ([VOTSharedWorkspace brailleInputActive] && (objc_msgSend(VOTSharedWorkspace, "brailleInputAllowsElementMovement") & 1) == 0)
  {
    bundleIdentifier2 = VOTLogElement();
    if (os_log_type_enabled(bundleIdentifier2, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, bundleIdentifier2, OS_LOG_TYPE_DEFAULT, "Stopping _setCurrentElement to prevent the focus from moving while we're editing text in BSI", buf, 2u);
    }

    goto LABEL_64;
  }

  if ([VOTSharedWorkspace navigationStyleHonorsGroups])
  {
    isAccessibleGroup = [elementCopy isAccessibleGroup];
    if (!elementCopy)
    {
LABEL_23:
      if ([elementCopy isBannerNotification])
      {
        v21 = VOTLogElement();
        if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
        {
          sub_10012B98C();
        }
      }

      v114 = isAccessibleGroup;
      p_currentElement = &self->_currentElement;
      if ([elementCopy isEqual:self->_currentElement])
      {
        objc_storeStrong(&self->_currentElement, element);
        [(VOTElementManager *)self _updateMostRecentElementCommunity];
        [(VOTElementManager *)self _updateExternalAccessory:elementCopy];
        if ([elementCopy doesHaveTraits:kAXIsEditingTrait])
        {
          [(VOTElementManager *)self _updateFirstResponder];
        }

        application = [(VOTElement *)*p_currentElement application];
        bundleIdentifier2 = [application bundleIdentifier];

        if (([bundleIdentifier2 isEqualToString:@"com.apple.InputUI"]& 1) == 0)
        {
          application2 = [(VOTElement *)self->_currentElement application];
          lastApplication = self->_lastApplication;
          self->_lastApplication = application2;
        }

        if ((AXDeviceIsAudioAccessory() & 1) == 0)
        {
          if (([elementCopy mediaAnalysisOptions] & 0x40000) != 0)
          {
            v27 = +[VOTWorkspace sharedWorkspace];
            visionEngine = [v27 visionEngine];
            [visionEngine purgeCache];
          }

          v29 = +[VOTWorkspace sharedWorkspace];
          visionEngine2 = [v29 visionEngine];

          if (([visionEngine2 wasCachePurged] & 1) != 0 || (objc_msgSend(visionEngine2, "resultsForElement:", *p_currentElement), v31 = objc_claimAutoreleasedReturnValue(), v32 = objc_msgSend(v31, "count"), v31, !v32))
          {
            v33 = *p_currentElement;
            if ([VOTVisionEngine shouldAnalyzeElement:v33])
            {
              v34 = objc_opt_new();
              [v34 setIncludeFullImageDescriptionsForValidElements:{-[VOTElementManager determineFullImageDescriptionsEnabled:](self, "determineFullImageDescriptionsEnabled:", v33)}];
              [v34 setIncludeSceneDetection:{-[VOTElementManager determineSceneDetectionsEnabled:](self, "determineSceneDetectionsEnabled:", v33)}];
              [visionEngine2 analyzeElement:v33 withOptions:v34];
            }
          }
        }

        [(VOTElementManager *)self _updateContextDescriptors];
        [(VOTElementManager *)self _updateAnyThreadElementAccess];
        goto LABEL_64;
      }

      v35 = VOTLogElement();
      if (os_log_type_enabled(v35, OS_LOG_TYPE_DEBUG))
      {
        sub_10012BA28();
      }

      v36 = +[VOTWorkspace sharedWorkspace];
      visionEngine3 = [v36 visionEngine];
      [visionEngine3 purgeCache];

      application3 = [elementCopy application];
      supportedLanguageIfNecessary = [application3 supportedLanguageIfNecessary];

      v109 = rangeCopy;
      v110 = selectionCopy;
      if ([elementCopy doesHaveTraits:kAXStatusBarElementTrait])
      {

        supportedLanguageIfNecessary = 0;
      }

      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v41 = AXLanguageCanonicalFormToGeneralLanguage();

      selectedLanguage2 = [VOTSharedWorkspace selectedLanguage];
      systemSpokenLanguage = [VOTSharedWorkspace systemSpokenLanguage];
      v111 = v41;
      v112 = supportedLanguageIfNecessary;
      if ([selectedLanguage2 isEqualToString:systemSpokenLanguage] || !supportedLanguageIfNecessary || !v41 || (-[NSObject hasPrefix:](supportedLanguageIfNecessary, "hasPrefix:", v41) & 1) != 0)
      {

LABEL_53:
        [VOTSharedWorkspace setAdditionalLanguageRotorItem:supportedLanguageIfNecessary];
        v44 = [elementCopy doesHaveTraits:kAXKeyboardKeyTrait];
        if (([elementCopy isEditableTextArea] & 1) != 0 || v44)
        {
          [(VOTElementManager *)self _updateFirstResponder];
        }

        v45 = +[VOTCommandHelper commandHelper];
        if ([elementCopy handlesGestureArea])
        {
          [v45 setHelpEnabled:1];
          [elementCopy gesturePracticeRegion];
          [v45 setPracticeRegion:?];
          [v45 setPracticeElement:elementCopy];
        }

        else if ([v45 helpEnabled])
        {
          [v45 setHelpEnabled:0];
        }

        v107 = v45;
        customRotorActions = [elementCopy customRotorActions];
        customActionGroupIdentifier = [elementCopy customActionGroupIdentifier];
        customActionGroupIdentifier2 = [(VOTElement *)*p_currentElement customActionGroupIdentifier];
        v113 = customRotorActions;
        if ([customActionGroupIdentifier isEqualToString:customActionGroupIdentifier2])
        {
        }

        else
        {
          cachedCustomRotorActions = [(VOTElement *)self->_currentElement cachedCustomRotorActions];
          v53 = [(VOTElementManager *)self customRotorActionsEqual:customRotorActions otherActions:cachedCustomRotorActions ignoreDragItems:1];

          if (!v53)
          {
            retainsCustomRotorActionSetting = 0;
            goto LABEL_74;
          }
        }

        retainsCustomRotorActionSetting = [elementCopy retainsCustomRotorActionSetting];
LABEL_74:
        v54 = [(VOTElementManager *)self webEditableAncestor:elementCopy];
        bundleIdentifier2 = v112;
        if (!v54 || (-[VOTElementManager webEditableAncestor:](self, "webEditableAncestor:", self->_currentElement), v55 = objc_claimAutoreleasedReturnValue(), v56 = [v54 isEqual:v55], v55, (v56 & 1) == 0))
        {
          [(NSMutableDictionary *)self->_lastSeenFontProperties removeAllObjects];
        }

        [(VOTElementManager *)self _setLastSeenLineAndColumn:0];
        [(VOTElement *)self->_currentElement setVoiceOverFocused:0];
        [elementCopy setVoiceOverFocused:1];
        if (v114 && ![(NSString *)self->_lastEventCommand isEqualToString:kVOTEventCommandMoveOut])
        {
          v57 = +[VOTOutputManager outputManager];
          v58 = +[VOSOutputEvent IsInteractable];
          [v57 sendEvent:v58];
        }

        v59 = [(VOTElement *)*p_currentElement pid];
        if (v59 != [elementCopy pid])
        {
          [elementCopy setNavigationDirectionMode:{objc_msgSend(VOTSharedWorkspace, "navigationDirection")}];
        }

        if ([elementCopy isInMenuBar] && !self->_elementBeforeMenuBar)
        {
          objc_storeStrong(&self->_elementBeforeMenuBar, *p_currentElement);
        }

        objc_storeStrong(&self->_previousElement, self->_currentElement);
        objc_storeStrong(&self->_currentElement, element);
        opaqueParent = [elementCopy opaqueParent];
        currentOpaqueParent = self->_currentOpaqueParent;
        self->_currentOpaqueParent = opaqueParent;

        [(VOTElementManager *)self setElementGeneration:[(VOTElementManager *)self elementGeneration]+ 1];
        [(VOTElementManager *)self setLastElementChangeTime:CFAbsoluteTimeGetCurrent()];
        v62 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v62, OS_LOG_TYPE_DEBUG))
        {
          sub_10012BA98();
        }

        v63 = [(VOTElementManager *)self _elementCommunityForElement:elementCopy];
        if (!appCopy)
        {
          [(VOTElementManager *)self _cacheFocusedElement:elementCopy forElementCommunity:v63];
        }

        application4 = [(VOTElement *)*p_currentElement application];
        bundleIdentifier3 = [application4 bundleIdentifier];

        if (([bundleIdentifier3 isEqualToString:@"com.apple.InputUI"] & 1) == 0)
        {
          application5 = [(VOTElement *)self->_currentElement application];
          v67 = self->_lastApplication;
          self->_lastApplication = application5;
        }

        [(VOTDragOutputManager *)self->_dragOutputManager currentElementChanged];
        [(VOTElementManager *)self resetFrequentUpdateTextCache];
        if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXUpdatesFrequentlyTrait])
        {
          [(VOTElementManager *)self _realTimeAdjustableUpdateFrequency:self->_currentElement];
          [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer dispatchAfterDelay:?];
          if (!v115)
          {
            goto LABEL_96;
          }
        }

        else
        {
          [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer cancel];
          if (!v115)
          {
LABEL_96:
            if (!self->_firstResponderElement && [(VOTElement *)*p_currentElement doesHaveTraits:kAXIsEditingTrait])
            {
              [(VOTElementManager *)self _updateFirstResponder];
            }

            if (![(VOTElementManager *)self _isElementValidForFirstResponder:self->_currentElement])
            {
              [(VOTElementManager *)self _resetQuickNavState];
            }

            [(VOTElementManager *)self _resetElementUnitIndexes];
            if (retainsCustomRotorActionSetting && self->_customActionIdentifier)
            {
              v116[0] = _NSConcreteStackBlock;
              v116[1] = 3221225472;
              v116[2] = sub_100089FC8;
              v116[3] = &unk_1001C9CD8;
              v116[4] = self;
              v69 = [v113 indexOfObjectPassingTest:v116];
              self->_customActionIndex = v69;
              if (v69 != 0x7FFFFFFFFFFFFFFFLL)
              {
LABEL_107:
                self->_copiedSpeechIndex = 0x7FFFFFFFFFFFFFFFLL;
                [(VOTElementManager *)self _resetMathGranularMovementState];
                webSelectionText = self->_webSelectionText;
                self->_webSelectionText = 0;

                lineArray = self->_lineArray;
                self->_lineArray = 0;

                size = CGRectZero.size;
                self->_lineFrame.origin = CGRectZero.origin;
                self->_lineFrame.size = size;
                self->_textRangeBeingDisplayed = 0;
                self->_lastNothingSoundTime = -3061152000.0;
                previouslySpokenImageCaptionResults = self->_previouslySpokenImageCaptionResults;
                self->_previouslySpokenImageCaptionResults = 0;

                if (v109)
                {
                  self->_highlightedCharacterRange = xmmword_10017E110;
                }

                if (![(VOTElementRotor *)self->_elementRotor showsWebSearchResults])
                {
                  goto LABEL_115;
                }

                application6 = [(VOTElement *)*p_currentElement application];
                if ([application6 webSearchResultsActive])
                {
                  webSearchText = self->_webSearchText;

                  if (webSearchText)
                  {
LABEL_115:
                    if ([(VOTElementManager *)self _inMisspelledWordRotor])
                    {
                      [(VOTElementManager *)self _updateRotorForCurrentElement:&__kCFBooleanTrue completion:0];
                    }

                    if (v110 && ![(VOTElementManager *)self _inMisspelledWordRotor])
                    {
                      self->_lastUserTextSelectionDirection = 0;
                      self->_inTextProcessingRotorMode = 0;
                      self->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
                      self->_flags.inKeyboardTextSelectionMode = 0;
                    }

                    self->_flags.shouldTriggerAlternativeKeyActivation = 0;
                    [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer cancel];
                    currentPublicCustomRotorItemResult = self->_currentPublicCustomRotorItemResult;
                    self->_currentPublicCustomRotorItemResult = 0;

                    self->_flags.shouldUpdateRotorForElement = 1;
                    v78 = [(VOTElement *)self->_currentElement doesHaveTraits:kAXAllowsDirectInteractionTrait];
                    avoidAnnouncingDirectTouchArea = 0;
                    self->_flags.currentElementAllowsDirectTouch = v78;
                    if (v78)
                    {
                      avoidAnnouncingDirectTouchArea = [(VOTElement *)*p_currentElement avoidAnnouncingDirectTouchArea];
                    }

                    self->_flags.avoidAnnouncingDirectTouchArea = avoidAnnouncingDirectTouchArea;
                    currentElement = self->_currentElement;
                    if (currentElement)
                    {
                      shouldSkipValidateElement = [(VOTElement *)currentElement shouldSkipValidateElement];
                      v82 = *p_currentElement;
                      if ((shouldSkipValidateElement & 1) == 0)
                      {
                        v83 = v54;
                        application7 = [(VOTElement *)v82 application];
                        v85 = [(VOTElement *)v82 isValidForApplication:application7];

                        v82 = *p_currentElement;
                        if (v85)
                        {
                          [(VOTElement *)*p_currentElement centerPoint];
                          self->_lastValidElementLocation.x = v86;
                          self->_lastValidElementLocation.y = v87;
                          v82 = self->_currentElement;
                        }

                        v54 = v83;
                      }
                    }

                    else
                    {
                      v82 = 0;
                    }

                    if ([(VOTElement *)v82 doesHaveTraits:kAXHeaderTrait])
                    {
                      v88 = [(VOTElement *)*p_currentElement doesHaveAllTraits:kAXWebContentTrait];
                      v89 = *p_currentElement;
                      if (v88)
                      {
                        [(VOTElement *)v89 value];
                      }

                      else
                      {
                        [(VOTElement *)v89 headingLevelValue];
                      }
                      v90 = ;
                      -[VOTElementManager setLastElementHeadingLevel:](self, "setLastElementHeadingLevel:", [v90 intValue]);
                    }

                    [(VOTElementManager *)self setLastElementBlockquoteLevel:[(VOTElement *)self->_currentElement blockquoteLevel]];
                    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
                    [WeakRetained currentElementDidUpdate:self->_currentElement];

                    [(VOTElementManager *)self _updateExternalAccessory:elementCopy];
                    [(VOTElementManager *)self _updateAnyThreadElementAccess];
                    [(VOTElementManager *)self _forceVisionRefresh];
                    [(VOTElementManager *)self _updateContextDescriptors];
                    currentElementChangedCallback = [(VOTElementManager *)self currentElementChangedCallback];

                    if (currentElementChangedCallback)
                    {
                      currentElementChangedCallback2 = [(VOTElementManager *)self currentElementChangedCallback];
                      (currentElementChangedCallback2)[2](currentElementChangedCallback2, self, self->_currentElement);
                    }

                    if (AXDeviceSupportsSonification())
                    {
                      v94 = +[VOTAudiographManager sharedManager];
                      isPlaying = [v94 isPlaying];

                      if (isPlaying)
                      {
                        v96 = +[VOTAudiographManager sharedManager];
                        [v96 stopPlaying];
                      }

                      audiographActionIdentifier = self->_audiographActionIdentifier;
                      self->_audiographActionIdentifier = 0;
                    }

                    if ([VOTSharedWorkspace pointerVoiceOverCursorOption] == 1)
                    {
                      v98 = +[VOTDisplayManager displayManager];
                      [(VOTElement *)*p_currentElement centerPoint];
                      [v98 movePointerToPoint:-[VOTElement windowContextId](*p_currentElement contextId:{"windowContextId"), v99, v100}];
                    }

                    if (_AXSAutomationEnabled())
                    {
                      v101 = +[NSDistributedNotificationCenter defaultCenter];
                      [v101 postNotificationName:@"VoiceOverEventOccurred" object:@"CurrentElementDidChange"];
                    }

                    v47 = 1;
                    goto LABEL_144;
                  }
                }

                else
                {
                }

                [(VOTElementRotor *)self->_elementRotor setShowsWebSearchResults:0];
                goto LABEL_115;
              }
            }

            else
            {
              self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
            }

            customActionIdentifier = self->_customActionIdentifier;
            self->_customActionIdentifier = 0;

            goto LABEL_107;
          }
        }

        v68 = +[VOTBrailleManager manager];
        [v68 setBrailleElement:*p_currentElement];

        goto LABEL_96;
      }

      additionalLanguageRotorItem = [VOTSharedWorkspace additionalLanguageRotorItem];
      selectedLanguage3 = [VOTSharedWorkspace selectedLanguage];
      if ([additionalLanguageRotorItem isEqualToString:selectedLanguage3])
      {

        supportedLanguageIfNecessary = v112;
      }

      else
      {
        selectedLanguage4 = [VOTSharedWorkspace selectedLanguage];
        v108 = [(VOTElementManager *)self _languageRotorItemsContainLanguage:selectedLanguage4];

        supportedLanguageIfNecessary = v112;
        if (v108)
        {
          goto LABEL_53;
        }
      }

      [VOTSharedWorkspace setSelectedLanguage:0];
      goto LABEL_53;
    }
  }

  else
  {
    isAccessibleGroup = 0;
    if (!elementCopy)
    {
      goto LABEL_23;
    }
  }

  if (([elementCopy isAccessibleElement] | (checkCopy || appCopy) | isAccessibleGroup))
  {
    goto LABEL_23;
  }

  v46 = VOTLogElement();
  if (os_log_type_enabled(v46, OS_LOG_TYPE_ERROR))
  {
    sub_10012B8D0(elementCopy);
  }

  if (_AXSInUnitTestMode())
  {
    bundleIdentifier2 = [elementCopy description];
    [bundleIdentifier2 UTF8String];
    _AXAssert();
LABEL_64:
    v47 = 0;
LABEL_144:

    goto LABEL_145;
  }

LABEL_66:
  v47 = 0;
LABEL_145:

  return v47;
}

- (void)_updateAnyThreadElementAccess
{
  os_unfair_lock_lock(&self->_anyThreadCurrentElementLock);
  objc_storeStrong(&self->_anyThreadCurrentElement, self->_currentElement);

  os_unfair_lock_unlock(&self->_anyThreadCurrentElementLock);
}

- (void)_updateSwipeFrames
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if (_currentElement)
  {
    v4 = [(VOTElement *)self->_currentElement elementsInDirection:1 withCount:5];
    v5 = [(VOTElement *)self->_currentElement elementsInDirection:2 withCount:5];
    v6 = +[NSMutableArray array];
    v7 = +[NSMutableArray array];
    v20[0] = _NSConcreteStackBlock;
    v20[1] = 3221225472;
    v20[2] = sub_10008A28C;
    v20[3] = &unk_1001C9D00;
    v8 = v6;
    v21 = v8;
    [v5 enumerateObjectsWithOptions:2 usingBlock:v20];
    [v8 addObject:_currentElement];
    [v8 addObjectsFromArray:v4];
    v18 = 0u;
    v19 = 0u;
    v16 = 0u;
    v17 = 0u;
    v9 = v8;
    v10 = [v9 countByEnumeratingWithState:&v16 objects:v22 count:16];
    if (v10)
    {
      v11 = v10;
      v12 = *v17;
      do
      {
        v13 = 0;
        do
        {
          if (*v17 != v12)
          {
            objc_enumerationMutation(v9);
          }

          [*(*(&v16 + 1) + 8 * v13) frame];
          v14 = NSStringFromRect(v23);
          if (v14)
          {
            [v7 addObject:v14];
          }

          v13 = v13 + 1;
        }

        while (v11 != v13);
        v11 = [v9 countByEnumeratingWithState:&v16 objects:v22 count:16];
      }

      while (v11);
    }

    v15 = +[VOTDisplayManager displayManager];
    [v15 setElementFrames:v7];
  }
}

- (BOOL)mlElement:(id)element sharesLabel:(id)label
{
  elementCopy = element;
  labelCopy = label;
  label = [elementCopy label];
  label2 = [labelCopy label];
  if (([label isEqualToString:label2] & 1) == 0)
  {
    label3 = [labelCopy label];
    if (label3)
    {
      label4 = [elementCopy label];
      label5 = [labelCopy label];
      if ([label4 containsString:label5])
      {
        v10 = 1;
LABEL_12:

LABEL_13:
        goto LABEL_14;
      }

      v18 = label4;
    }

    label6 = [elementCopy label];
    if (label6)
    {
      v14 = label6;
      label7 = [labelCopy label];
      label8 = [elementCopy label];
      v10 = [label7 containsString:label8];
    }

    else
    {
      v10 = 0;
    }

    label4 = v18;
    if (!label3)
    {
      goto LABEL_13;
    }

    goto LABEL_12;
  }

  v10 = 1;
LABEL_14:

  return v10;
}

- (void)_processExternalScrollToVisible:(id)visible
{
  [visible pointValue];
  [(VOTElement *)self->_currentElement frame];
  AX_CGRectGetCenter();
  v5 = v4;
  v7 = v6;
  [AXUIMLElement setPerformFuzzyHitTestNextTime:1];
  v8 = [VOTElement alloc];
  application = [(VOTElement *)self->_currentElement application];
  v10 = [(VOTElement *)v8 initWithPosition:application application:[(VOTElement *)self->_currentElement windowContextId] contextId:v5, v7];

  v11 = AXMediaLogMLElement();
  if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
  {
    v20.x = v5;
    v20.y = v7;
    v12 = NSStringFromCGPoint(v20);
    currentElement = self->_currentElement;
    v14 = 138412802;
    v15 = v12;
    v16 = 2112;
    v17 = currentElement;
    v18 = 2112;
    v19 = v10;
    _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_DEFAULT, "Scroll to visible occurred -- looking for same element at %@\ncurrent %@\nfound: %@", &v14, 0x20u);
  }

  if (v10)
  {
    [(VOTElementManager *)self _setCurrentElement:v10];
  }
}

- (void)processExternalScrollToVisible:(CGPoint)visible
{
  elementManagerThread = self->_elementManagerThread;
  v5 = [NSValue valueWithPoint:visible.x, visible.y];
  [(SCRCThread *)elementManagerThread performSelector:"_processExternalScrollToVisible:" onTarget:self count:1 objects:v5, 0];
}

- (void)_processExternalElementUpdate
{
  v3 = AXMediaLogElementVision();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    currentElement = self->_currentElement;
    v5 = 138412290;
    v6 = currentElement;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "External element update with current: %@", &v5, 0xCu);
  }

  if (self->_currentElement)
  {
    self->_flags.shouldSpeakNextLayoutChange = 1;
    [(VOTElementManager *)self _handleLayoutChangeFromTimer];
  }

  else
  {
    [(VOTElementManager *)self _handleScreenChange:0 sound:0];
  }
}

- (_NSRange)_highlightedCharacterRange
{
  length = self->_highlightedCharacterRange.length;
  location = self->_highlightedCharacterRange.location;
  result.length = length;
  result.location = location;
  return result;
}

- (CGRect)currentLineFrame
{
  x = self->_lineFrame.origin.x;
  y = self->_lineFrame.origin.y;
  width = self->_lineFrame.size.width;
  height = self->_lineFrame.size.height;
  result.size.height = height;
  result.size.width = width;
  result.origin.y = y;
  result.origin.x = x;
  return result;
}

- (void)__retrieveValueForKeyPath:(id)path intoPointedToLocation:(id)location semaphore:(id)semaphore
{
  dsema = semaphore;
  locationCopy = location;
  v9 = [(VOTElementManager *)self valueForKeyPath:path];
  pointerValue = [locationCopy pointerValue];

  v11 = *pointerValue;
  *pointerValue = v9;

  dispatch_semaphore_signal(dsema);
}

- (id)_valueForKeyPathOnElementManagerThread:(id)thread
{
  threadCopy = thread;
  v5 = dispatch_semaphore_create(0);
  v9 = 0;
  v6 = [NSValue valueWithPointer:&v9];
  [(SCRCThread *)self->_elementManagerThread performSelector:"__retrieveValueForKeyPath:intoPointedToLocation:semaphore:" onTarget:self count:3 objects:threadCopy, v6, v5, 0];

  dispatch_semaphore_wait(v5, 0xFFFFFFFFFFFFFFFFLL);
  v7 = v9;

  return v7;
}

- (id)currentElement
{
  os_unfair_lock_lock(&self->_anyThreadCurrentElementLock);
  copyWithCache = [(VOTElement *)self->_anyThreadCurrentElement copyWithCache];
  os_unfair_lock_unlock(&self->_anyThreadCurrentElementLock);

  return copyWithCache;
}

- (id)currentApplications
{
  if ([(VOTElementManager *)self isOnElementManagerThread])
  {
    _AXAssert();
  }

  v3 = [(VOTElementManager *)self _valueForKeyPathOnElementManagerThread:@"_currentApplications"];
  v4 = [v3 copyWithZone:0];

  return v4;
}

- (void)_handleStartHelpMode:(id)mode
{
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v3 = sub_1000516CC(off_1001FDDD0, @"starting.help.mode", 0, selectedLanguage);
  v4 = sub_1000095FC(v3, 0, selectedLanguage);

  v5 = sub_1000516CC(off_1001FDDD0, @"starting.help.mode.help", 0, selectedLanguage);
  v6 = sub_1000095FC(v5, 2, selectedLanguage);

  v7 = +[AXSettings sharedInstance];
  [v7 setVoiceOverHelpMode:0];

  v8 = +[VOTCommandHelper commandHelper];
  [v8 setHelpEnabled:1];

  v9 = xmmword_1001FF150;
  v10 = +[VOTCommandHelper commandHelper];
  [v10 setPracticeRegion:{0.0, 0.0, v9}];
}

- (void)_handleEscape:(id)escape
{
  escapeCopy = escape;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v6 = +[VOTCommandHelper commandHelper];
  helpEnabled = [v6 helpEnabled];

  if (!helpEnabled)
  {
    if (![VOTSharedWorkspace brailleInputActive] || objc_msgSend(VOTSharedWorkspace, "brailleInputShouldBeDeactivatedByEscape"))
    {
      elementRotor = [(VOTElementManager *)self elementRotor];
      currentRotorType = [elementRotor currentRotorType];

      if ([(VOTElementManager *)self forceRotorOffGesturedTextInputIfNeeded:1])
      {
        if (currentRotorType == 60)
        {
          _currentElement = sub_1000516CC(off_1001FDDD0, @"stopping.handwriting", 0, selectedLanguage);
        }

        else
        {
          _currentElement = 0;
        }

        v27 = sub_1000095FC(_currentElement, 1, selectedLanguage);
        goto LABEL_42;
      }

      if ([VOTSharedWorkspace brailleInputActive])
      {
        [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
        goto LABEL_43;
      }
    }

    if (self->_flags.inSearchTextMode)
    {
      v16 = sub_1000516CC(off_1001FDDD0, @"stopping.search.text.mode", 0, selectedLanguage);
      v17 = sub_1000095FC(v16, 0, selectedLanguage);

      self->_flags.inSearchTextMode = 0;
      _currentElement = +[VOTKeyboardManager keyboardManager];
      [_currentElement setCaptureModeEnabled:0];
      goto LABEL_42;
    }

    _currentElement = [(VOTElementManager *)self _currentElement];
    application = [_currentElement application];
    v19 = [_currentElement doesHaveTraits:kAXStatusBarElementTrait];
    performEscape = [_currentElement performEscape];
    if (v19)
    {
      if ((performEscape & 1) == 0)
      {
        v21 = self->_elementBeforeStatusBarMovement;
        if (![(VOTElement *)v21 isValid])
        {
          v22 = +[VOTElement systemAppApplication];
          focusedApplications = [v22 focusedApplications];
          firstObject = [focusedApplications firstObject];
          firstElementInApplication = [firstObject firstElementInApplication];

          v21 = firstElementInApplication;
        }

        [(VOTElementManager *)self _echoDifferentElement:v21 forEvent:escapeCopy];
        elementBeforeStatusBarMovement = self->_elementBeforeStatusBarMovement;
        self->_elementBeforeStatusBarMovement = 0;
      }

      goto LABEL_41;
    }

    if (performEscape & 1) != 0 || (-[VOTElementManager touchContainer](self, "touchContainer"), v28 = objc_claimAutoreleasedReturnValue(), v29 = [v28 performEscape], v28, (v29))
    {
LABEL_41:

      goto LABEL_42;
    }

    firstElementInApplication2 = [application firstElementInApplication];
    if ([firstElementInApplication2 performEscape])
    {
LABEL_40:

      goto LABEL_41;
    }

    [firstElementInApplication2 elementsInDirection:1 withCount:20];
    v41 = 0u;
    v42 = 0u;
    v43 = 0u;
    v31 = v44 = 0u;
    v32 = [v31 countByEnumeratingWithState:&v41 objects:v45 count:16];
    if (v32)
    {
      v33 = v32;
      v34 = *v42;
      while (2)
      {
        v35 = 0;
        do
        {
          if (*v42 != v34)
          {
            objc_enumerationMutation(v31);
          }

          if ([*(*(&v41 + 1) + 8 * v35) performEscape])
          {
            v37 = v31;
            goto LABEL_38;
          }

          v35 = v35 + 1;
        }

        while (v33 != v35);
        v33 = [v31 countByEnumeratingWithState:&v41 objects:v45 count:16];
        if (v33)
        {
          continue;
        }

        break;
      }
    }

    if (_AXSClarityBoardEnabled())
    {
      v36 = +[VOTElement systemAppApplication];
      if ([application isEqual:v36])
      {
      }

      else
      {
        firstElementInApplication3 = [v36 firstElementInApplication];
        performEscape2 = [firstElementInApplication3 performEscape];

        if (performEscape2)
        {
LABEL_39:

          goto LABEL_40;
        }
      }
    }

    v37 = +[VOTOutputManager outputManager];
    v40 = +[VOSOutputEvent BoundaryEncountered];
    [v37 sendEvent:v40];

LABEL_38:
    goto LABEL_39;
  }

  v8 = +[VOTCommandHelper commandHelper];
  [v8 processHelpForEvent:escapeCopy];

  if (![escapeCopy isTouchEvent] || (+[VOTCommandHelper commandHelper](VOTCommandHelper, "commandHelper"), v9 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v9, "practiceElement"), v10 = objc_claimAutoreleasedReturnValue(), v10, v9, !v10))
  {
    v11 = sub_1000516CC(off_1001FDDD0, @"stopping.help.mode", 0, selectedLanguage);
    v12 = sub_1000095FC(v11, 2, selectedLanguage);

    _currentElement = +[VOTCommandHelper commandHelper];
    [_currentElement setHelpEnabled:0];
LABEL_42:
  }

LABEL_43:
}

- (void)_handleSpeechRateChange:(BOOL)change
{
  changeCopy = change;
  [(VOTElementManager *)self rotorRate];
  v6 = -0.0500000007;
  if (changeCopy)
  {
    v6 = 0.0500000007;
  }

  v7 = v6 + v5;
  v8 = 0.0;
  if (v7 >= 0.0)
  {
    v8 = v7;
    if (v7 > 1.0)
    {
      v8 = 1.0;
    }
  }

  v9 = dispatch_semaphore_create(0);
  votSettings = [VOTSharedWorkspace votSettings];
  v11 = v8;
  v17[0] = _NSConcreteStackBlock;
  v17[1] = 3221225472;
  v17[2] = sub_10008B0F8;
  v17[3] = &unk_1001C76E8;
  v18 = v9;
  v12 = v9;
  *&v13 = v11;
  [votSettings setRotorRate:v17 completionHandler:v13];

  dispatch_semaphore_wait(v12, 0xFFFFFFFFFFFFFFFFLL);
  v14 = [objc_allocWithZone(VOTOutputRequest) init];
  v15 = AXFormatFloatWithPercentage();
  v16 = [v14 addString:v15];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v14];
  [(VOTElementManager *)self sendRequest:v14];
}

- (void)_handleSoundRotorChange:(BOOL)change
{
  v3 = +[AXSettings sharedInstance];
  voiceOverSoundEffectsEnabled = [v3 voiceOverSoundEffectsEnabled];

  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSoundEffectsEnabled:voiceOverSoundEffectsEnabled ^ 1];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = selectedLanguage;
  if (voiceOverSoundEffectsEnabled)
  {
    v7 = @"soundchange.off";
  }

  else
  {
    v7 = @"soundchange.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, selectedLanguage);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleSpeechPunctuationChange:(BOOL)change
{
  changeCopy = change;
  defaultPunctuationGroup = [VOTSharedWorkspace defaultPunctuationGroup];
  v5 = +[AXSettings sharedInstance];
  voiceOverPunctuationGroup = [v5 voiceOverPunctuationGroup];

  punctuationGroups = [VOTSharedWorkspace punctuationGroups];
  if ([punctuationGroups count])
  {
    if (!voiceOverPunctuationGroup)
    {
      voiceOverPunctuationGroup = [defaultPunctuationGroup uuid];
    }

    v27 = _NSConcreteStackBlock;
    v28 = 3221225472;
    v29 = sub_10008B4EC;
    v30 = &unk_1001C8940;
    voiceOverPunctuationGroup = voiceOverPunctuationGroup;
    v31 = voiceOverPunctuationGroup;
    v8 = [punctuationGroups indexOfObjectPassingTest:&v27];
    if (v8 == 0x7FFFFFFFFFFFFFFFLL)
    {
      v9 = AXLogPunctuationStorage();
      if (os_log_type_enabled(v9, OS_LOG_TYPE_FAULT))
      {
        sub_10012BB1C();
      }

      v8 = 0;
    }

    if (changeCopy)
    {
      v10 = v8 + 1;
    }

    else
    {
      v10 = v8 - 1;
    }

    if ((v10 & 0x8000000000000000) != 0)
    {
      v10 = [punctuationGroups count] - 1;
    }

    if (v10 >= [punctuationGroups count])
    {
      v11 = 0;
    }

    else
    {
      v11 = v10;
    }

    v12 = [punctuationGroups objectAtIndexedSubscript:v11];
    uuid = [v12 uuid];
    v14 = +[AXSettings sharedInstance];
    [v14 setVoiceOverPunctuationGroup:uuid];

    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    name = [v12 name];
    uuid2 = [v12 uuid];
    uuid3 = [defaultPunctuationGroup uuid];
    v19 = [uuid2 isEqual:uuid3];

    if (v19)
    {
      v20 = +[AXSettings sharedInstance];
      [v20 setVoiceOverPunctuationGroup:0];

      v21 = sub_1000511CC(off_1001FDDD0, @"default.punctuation.format", 0);
      name2 = [v12 name];
      v23 = [NSString stringWithFormat:v21, name2, v27, v28, v29, v30];

      name = v23;
    }

    v24 = sub_1000095FC(name, 0, selectedLanguage);
  }

  else
  {
    v25 = +[VOTOutputManager outputManager];
    v26 = +[VOSOutputEvent BoundaryEncountered];
    [v25 sendEvent:v26];
  }
}

- (id)_typingEchoString
{
  v2 = +[AXSettings sharedInstance];
  voiceOverHardwareTypingFeedback = [v2 voiceOverHardwareTypingFeedback];

  if (voiceOverHardwareTypingFeedback > 3)
  {
    v4 = 0;
  }

  else
  {
    v4 = *(&off_1001CA488 + voiceOverHardwareTypingFeedback);
  }

  v5 = off_1001FDDD0;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v7 = sub_1000516CC(v5, v4, 0, selectedLanguage);

  return v7;
}

- (void)_handleTypingEchoChange:(BOOL)change
{
  changeCopy = change;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v5 = +[AXSettings sharedInstance];
  voiceOverHardwareTypingFeedback = [v5 voiceOverHardwareTypingFeedback];

  v7 = 3;
  if (!changeCopy)
  {
    v7 = 1;
  }

  v8 = 2;
  if (changeCopy)
  {
    v8 = 0;
  }

  if (voiceOverHardwareTypingFeedback != 3)
  {
    v8 = 0;
  }

  if (voiceOverHardwareTypingFeedback != 2)
  {
    v7 = v8;
  }

  v9 = 3;
  if (changeCopy)
  {
    v9 = 1;
  }

  v10 = 2;
  if (!changeCopy)
  {
    v10 = 0;
  }

  if (voiceOverHardwareTypingFeedback != 1)
  {
    v10 = 0;
  }

  if (voiceOverHardwareTypingFeedback)
  {
    v9 = v10;
  }

  if (voiceOverHardwareTypingFeedback <= 1)
  {
    v11 = v9;
  }

  else
  {
    v11 = v7;
  }

  v12 = +[AXSettings sharedInstance];
  [v12 setVoiceOverHardwareTypingFeedback:v11];

  _typingEchoString = [(VOTElementManager *)self _typingEchoString];
  v14 = sub_1000095FC(_typingEchoString, 0, selectedLanguage);
}

- (id)_speechPhoneticsString
{
  v2 = +[AXSettings sharedInstance];
  voiceOverPhoneticsFeedback = [v2 voiceOverPhoneticsFeedback];

  if (voiceOverPhoneticsFeedback > 2)
  {
    return 0;
  }

  else
  {
    return *(&off_1001CA4A8 + voiceOverPhoneticsFeedback);
  }
}

- (void)_handleSpeechPhoneticsChange:(BOOL)change
{
  changeCopy = change;
  v5 = +[AXSettings sharedInstance];
  voiceOverPhoneticsFeedback = [v5 voiceOverPhoneticsFeedback];

  v7 = 1;
  if (!changeCopy)
  {
    v7 = 2;
  }

  v8 = !changeCopy;
  v9 = 2;
  if (!changeCopy)
  {
    v9 = 0;
  }

  if (voiceOverPhoneticsFeedback != 1)
  {
    v9 = voiceOverPhoneticsFeedback;
  }

  if (voiceOverPhoneticsFeedback != 2)
  {
    v8 = v9;
  }

  if (voiceOverPhoneticsFeedback)
  {
    v10 = v8;
  }

  else
  {
    v10 = v7;
  }

  v11 = +[AXSettings sharedInstance];
  [v11 setVoiceOverPhoneticsFeedback:v10];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v12 = off_1001FDDD0;
  _speechPhoneticsString = [(VOTElementManager *)self _speechPhoneticsString];
  v14 = sub_1000516CC(v12, _speechPhoneticsString, 0, selectedLanguage);
  v15 = sub_1000095FC(v14, 0, selectedLanguage);
}

- (void)_handleActivityRotorChange:(BOOL)change
{
  changeCopy = change;
  selectedActivity = [VOTSharedWorkspace selectedActivity];
  activities = [VOTSharedWorkspace activities];
  v6 = VOTLogActivities();
  if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
  {
    v23 = 138412546;
    v24 = selectedActivity;
    v25 = 2112;
    v26 = activities;
    _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "VO current activity: %@ activities: %@", &v23, 0x16u);
  }

  if (changeCopy)
  {
    v7 = 0;
    if (!selectedActivity)
    {
      goto LABEL_12;
    }
  }

  else
  {
    v7 = [activities count] - 1;
    if (!selectedActivity)
    {
      goto LABEL_12;
    }
  }

  v8 = [activities indexOfObject:selectedActivity];
  v9 = v8 - 1;
  if (changeCopy)
  {
    v9 = v8 + 1;
  }

  if (v8 == 0x7FFFFFFFFFFFFFFFLL)
  {
    v7 = 0;
  }

  else
  {
    v7 = v9;
  }

LABEL_12:
  v10 = VOTLogActivities();
  if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
  {
    v23 = 67109120;
    LODWORD(v24) = v7;
    _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "VO activity index: %d", &v23, 8u);
  }

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v12 = [activities count];
  if ((v7 & 0x8000000000000000) != 0 || v7 >= v12)
  {
    [VOTSharedWorkspace setSelectedActivity:0];
    previousRotorVoiceIdentifier = [VOTSharedWorkspace previousRotorVoiceIdentifier];
    v21 = +[AXSettings sharedInstance];
    [v21 setVoiceOverCurrentRotorVoiceIdentifier:previousRotorVoiceIdentifier];

    [VOTSharedWorkspace setPreviousRotorVoiceIdentifier:0];
    v13 = sub_1000516CC(off_1001FDDD0, @"no.activity.selected", 0, selectedLanguage);
    v22 = sub_1000095FC(v13, 0, selectedLanguage);
  }

  else
  {
    v13 = [activities objectAtIndexedSubscript:v7];
    selectedActivity2 = [VOTSharedWorkspace selectedActivity];

    if (!selectedActivity2)
    {
      v15 = +[AXSettings sharedInstance];
      voiceOverCurrentRotorVoiceIdentifier = [v15 voiceOverCurrentRotorVoiceIdentifier];
      [VOTSharedWorkspace setPreviousRotorVoiceIdentifier:voiceOverCurrentRotorVoiceIdentifier];

      v17 = +[AXSettings sharedInstance];
      [v17 setVoiceOverCurrentRotorVoiceIdentifier:0];
    }

    name = [v13 name];
    v19 = sub_1000095FC(name, 0, selectedLanguage);

    [VOTSharedWorkspace setSelectedActivity:v13];
  }
}

- (void)_handleAudioDestination:(BOOL)destination
{
  audioDestinationRequestExternal = [VOTSharedWorkspace audioDestinationRequestExternal];
  [VOTSharedWorkspace setAudioDestinationRequestExternal:audioDestinationRequestExternal ^ 1];
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v4 = off_1001FDDD0;
  if ([VOTSharedWorkspace audioDestinationRequestExternal])
  {
    v5 = @"audiodestination.external";
  }

  else
  {
    v5 = @"audiodestination.local";
  }

  v6 = sub_1000516CC(v4, v5, 0, selectedLanguage);
  v7 = sub_1000095FC(v6, 0, selectedLanguage);

  v8 = +[VOTOutputManager outputManager];
  [v8 updateAudioSessionProperties];
}

- (void)_handleAudioDuckingAmountChange:(BOOL)change
{
  changeCopy = change;
  v4 = +[AXSettings sharedInstance];
  [v4 voiceOverMediaDuckingAmount];
  v6 = v5;

  v7 = 0.05;
  if (changeCopy)
  {
    v7 = -0.05;
  }

  v8 = (v7 + v6) * 100.0;
  if (v8 % 5 <= 2)
  {
    v9 = 0;
  }

  else
  {
    v9 = 5;
  }

  v10 = fmax((5 * (v8 / 5) + v9) / 100.0, 0.01);
  if (v10 <= 0.99)
  {
    v11 = v10;
  }

  else
  {
    v11 = 0.99;
  }

  v12 = +[AXSettings sharedInstance];
  [v12 setVoiceOverMediaDuckingAmount:v11];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v13 = sub_1000516CC(off_1001FDDD0, @"ducking.amount.short", 0, selectedLanguage);
  v14 = AXCFormattedString();
  v15 = sub_1000095FC(v14, 0, selectedLanguage);
}

- (void)_handleAudioDuckingChange:(BOOL)change
{
  v3 = +[AXSettings sharedInstance];
  voiceOverAudioDuckingEnabled = [v3 voiceOverAudioDuckingEnabled];
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverAudioDuckingEnabled:voiceOverAudioDuckingEnabled ^ 1];

  AXPerformBlockOnMainThreadAfterDelay();
}

- (id)_audioDuckingModeString
{
  v2 = +[AXSettings sharedInstance];
  voiceOverMediaDuckingMode = [v2 voiceOverMediaDuckingMode];

  if (voiceOverMediaDuckingMode > 2)
  {
    return &stru_1001CBF90;
  }

  else
  {
    return *(&off_1001CA4C0 + voiceOverMediaDuckingMode);
  }
}

- (void)_handleAudioDuckingModeChange:(BOOL)change
{
  changeCopy = change;
  v5 = +[AXSettings sharedInstance];
  voiceOverMediaDuckingMode = [v5 voiceOverMediaDuckingMode];

  v7 = 1;
  if (!changeCopy)
  {
    v7 = 2;
  }

  v8 = 2;
  if (!changeCopy)
  {
    v8 = 0;
  }

  v9 = !changeCopy;
  if (voiceOverMediaDuckingMode != 2)
  {
    v9 = voiceOverMediaDuckingMode;
  }

  if (voiceOverMediaDuckingMode != 1)
  {
    v8 = v9;
  }

  if (voiceOverMediaDuckingMode)
  {
    v10 = v8;
  }

  else
  {
    v10 = v7;
  }

  v11 = +[AXSettings sharedInstance];
  [v11 setVoiceOverMediaDuckingMode:v10];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v12 = off_1001FDDD0;
  _audioDuckingModeString = [(VOTElementManager *)self _audioDuckingModeString];
  v14 = sub_1000516CC(v12, _audioDuckingModeString, 0, selectedLanguage);
  v15 = sub_1000095FC(v14, 0, selectedLanguage);
}

- (void)_handleUsePitchChange:(BOOL)change
{
  typingPitchChangeEnabled = [VOTSharedWorkspace typingPitchChangeEnabled];
  v4 = +[AXSettings sharedInstance];
  [v4 setVoiceOverPitchChangeEnabled:typingPitchChangeEnabled ^ 1];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v9 = selectedLanguage;
  if (typingPitchChangeEnabled)
  {
    v6 = @"pitchchange.off";
  }

  else
  {
    v6 = @"pitchchange.on";
  }

  v7 = sub_1000516CC(off_1001FDDD0, v6, 0, selectedLanguage);
  v8 = sub_1000095FC(v7, 0, v9);
}

- (void)_handleSpeechRotorChange:(id)change
{
  changeCopy = change;
  command = [changeCopy command];
  v6 = [command isEqualToString:kVOTEventCommandSpeechRotorNext];

  v10 = 0;
  speechRotor = self->_speechRotor;
  origin = [changeCopy origin];

  if (v6)
  {
    [(VOTRotor *)speechRotor increment:&v10 userInitiated:1 eventOrigin:origin];
  }

  else
  {
    [(VOTRotor *)speechRotor decrement:&v10 userInitiated:1 eventOrigin:origin];
  }

  [(VOTElementManager *)self _showVisualRotor:self->_speechRotor direction:v6];
  generateRotorTypeRequest = [(VOTRotor *)self->_speechRotor generateRotorTypeRequest];
  [(VOTElementManager *)self _appendCurrentRotorValue:generateRotorTypeRequest forRotor:self->_speechRotor];
  [generateRotorTypeRequest setGeneratesBraille:1];
  [generateRotorTypeRequest setBrailleType:1];
  [generateRotorTypeRequest send];
}

- (void)_handleSpeechRotorValueChange:(id)change
{
  changeCopy = change;
  command = [changeCopy command];
  v5 = [command isEqualToString:kVOTEventCommandSpeechRotorIncrementValue];

  currentRotorType = [(VOTRotor *)self->_speechRotor currentRotorType];
  if (currentRotorType <= 83)
  {
    if (currentRotorType > 81)
    {
      if (currentRotorType == 82)
      {
        [(VOTElementManager *)self _handleTypingEchoChange:v5];
      }

      else
      {
        [(VOTElementManager *)self _handleSpeechPhoneticsChange:v5];
      }
    }

    else if (currentRotorType == 80)
    {
      if (v5)
      {
        [(VOTElementManager *)self _handleIncreaseVolume:changeCopy];
      }

      else
      {
        [(VOTElementManager *)self _handleDecreaseVolume:changeCopy];
      }
    }

    else if (currentRotorType == 81)
    {
      [(VOTElementManager *)self _handleSpeechRateChange:v5];
    }
  }

  else if (currentRotorType <= 85)
  {
    if (currentRotorType == 84)
    {
      [(VOTElementManager *)self _handleUsePitchChange:v5];
    }

    else
    {
      [(VOTElementManager *)self _handleSpeechPunctuationChange:v5];
    }
  }

  else
  {
    switch(currentRotorType)
    {
      case 'V':
        [(VOTElementManager *)self _handleSoundRotorChange:v5];
        break;
      case 'W':
        if (AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
        {
          [(VOTElementManager *)self _handleAudioDuckingModeChange:v5];
        }

        else
        {
          [(VOTElementManager *)self _handleAudioDuckingChange:v5];
        }

        break;
      case 'Y':
        [(VOTElementManager *)self _handleAudioDestination:v5];
        break;
    }
  }
}

- (void)_handleAppSwitch:(id)switch
{
  command = [switch command];
  v4 = [command isEqualToString:kVOTEventAppSwitchNext];

  v5 = +[VOTSpringBoardConnection defaultConnection];
  [v5 sendProgrammaticAppSwitch:v4];
}

- (id)_nearestElementWithMatch:(id)match startElement:(id)element forward:(BOOL)forward itemCheckCount:(int64_t)count
{
  forwardCopy = forward;
  matchCopy = match;
  elementCopy = element;
  v11 = elementCopy;
  if (forwardCopy)
  {
    v12 = 1;
  }

  else
  {
    v12 = 2;
  }

  [elementCopy elementsInDirection:v12 withCount:count];
  v19 = 0u;
  v20 = 0u;
  v21 = 0u;
  v13 = v22 = 0u;
  v14 = [v13 countByEnumeratingWithState:&v19 objects:v23 count:16];
  if (v14)
  {
    v15 = *v20;
    while (2)
    {
      for (i = 0; i != v14; i = i + 1)
      {
        if (*v20 != v15)
        {
          objc_enumerationMutation(v13);
        }

        v17 = *(*(&v19 + 1) + 8 * i);
        if (matchCopy[2](matchCopy, v17, v11))
        {
          v14 = v17;
          goto LABEL_14;
        }
      }

      v14 = [v13 countByEnumeratingWithState:&v19 objects:v23 count:16];
      if (v14)
      {
        continue;
      }

      break;
    }
  }

LABEL_14:

  return v14;
}

- (id)_nearestElementWithMatch:(id)match startElement:(id)element
{
  matchCopy = match;
  elementCopy = element;
  if (matchCopy[2](matchCopy, elementCopy, elementCopy))
  {
    v8 = elementCopy;
  }

  else
  {
    v9 = [(VOTElementManager *)self _nearestElementWithMatch:matchCopy startElement:elementCopy forward:1];
    v10 = v9;
    if (v9)
    {
      v8 = v9;
    }

    else
    {
      v11 = [(VOTElementManager *)self _nearestElementWithMatch:matchCopy startElement:elementCopy forward:0];
      v8 = v11;
      if (v11)
      {
        v12 = v11;
      }
    }
  }

  return v8;
}

- (void)_handleScrollToTop:(id)top
{
  if (![(VOTElement *)self->_currentElement scrollToTop])
  {
    v4 = +[VOTOutputManager outputManager];
    v3 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v3];
  }
}

- (void)_handleScrollToBottom:(id)bottom
{
  if (![(VOTElement *)self->_currentElement scrollToBottom])
  {
    v4 = +[VOTOutputManager outputManager];
    v3 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v3];
  }
}

- (void)_handleScrollByPage:(id)page
{
  pageCopy = page;
  self->_lastScreenChangeNotificationTime = -3061152000.0;
  _currentElement = [(VOTElementManager *)self _currentElement];
  self->_flags.userInitiatedBooksScroll = 1;
  if (([_currentElement isValid] & 1) == 0)
  {
    [_currentElement centerPoint];
    if (_currentElement)
    {
      v7 = v5;
    }

    else
    {
      v7 = 0.0;
    }

    if (_currentElement)
    {
      v8 = v6;
    }

    else
    {
      v8 = 40.0;
    }

    y = CGPointZero.y;
    if (CGPointZero.x == v7 && y == v8)
    {
      [_currentElement frame];
      AX_CGRectGetCenter();
      v7 = v11;
      v8 = v12;
    }

    v13 = [objc_allocWithZone(VOTElement) initWithPosition:{v7, v8}];

    if (v13)
    {
      _currentElement = v13;
    }

    else
    {
      _currentElement = [(VOTElementManager *)self _sonarElementFromPoint:1 inForwardDirection:20 limit:v7, v8];
      if (!_currentElement)
      {
        goto LABEL_18;
      }
    }

    [(VOTElementManager *)self _setCurrentElement:_currentElement];
    v14 = +[VOTDisplayManager displayManager];
    [v14 setCursorFrameForElement:_currentElement];
  }

LABEL_18:
  if (([_currentElement doesHaveTraits:kAXScrollableTrait] & 1) == 0)
  {
    v15 = [(VOTElementManager *)self _nearestScrollableElement:_currentElement];

    _currentElement = v15;
  }

  *&self->_flags.isReadingAll = 0;
  command = [pageCopy command];
  if ([command isEqualToString:kVOTEventCommandScrollUpPage])
  {
    _currentElement2 = [(VOTElementManager *)self _currentElement];
    v18 = [_currentElement2 doesHaveTraits:kAXStatusBarElementTrait];

    if (v18)
    {
      v19 = +[VOTElement systemAppApplication];
      [v19 showBulletinBoard:1];
LABEL_26:

      goto LABEL_47;
    }

    [_currentElement scrollUpPage];
    goto LABEL_47;
  }

  if (![command isEqualToString:kVOTEventCommandScrollDownPage])
  {
    if (([command isEqualToString:kVOTEventCommandScrollRightPage] & 1) == 0 && !objc_msgSend(command, "isEqualToString:", kVOTEventCommandScrollLeftPage))
    {
      goto LABEL_47;
    }

    v22 = [command isEqualToString:kVOTEventCommandScrollRightPage];
    if (![_currentElement isReadingContent])
    {
      v25 = 1;
      if (!v22)
      {
        v25 = 2;
      }

      self->_bookLastContentMovementDirection = v25;
      v26 = [pageCopy objectForIndex:119];
      self->_flags.lastScrollWasFromBraillePanning = [v26 BOOLValue];

      goto LABEL_44;
    }

    v23 = _currentElement;
    if ([v23 isRTL])
    {
      if (!v22)
      {
LABEL_33:
        scrollNextPage = [v23 scrollNextPage];
        goto LABEL_40;
      }
    }

    else if (v22)
    {
      goto LABEL_33;
    }

    scrollNextPage = [v23 scrollPreviousPage];
LABEL_40:
    v27 = scrollNextPage;
    self->_bookLastContentMovementUnit = 4;
    self->_flags.previousScrollWasBookContentMovement = 1;

    if (v22)
    {
      v28 = 1;
    }

    else
    {
      v28 = 2;
    }

    self->_bookLastContentMovementDirection = v28;
    v29 = [pageCopy objectForIndex:119];
    self->_flags.lastScrollWasFromBraillePanning = [v29 BOOLValue];

    if (v27)
    {
      goto LABEL_47;
    }

LABEL_44:
    if (v22)
    {
      [_currentElement scrollRightPage];
    }

    else
    {
      [_currentElement scrollLeftPage];
    }

    goto LABEL_47;
  }

  _currentElement3 = [(VOTElementManager *)self _currentElement];
  v21 = [_currentElement3 doesHaveTraits:kAXStatusBarElementTrait];

  if (v21)
  {
    v19 = +[VOTElement systemAppApplication];
    [v19 showControlCenter:1];
    goto LABEL_26;
  }

  [_currentElement scrollDownPage];
LABEL_47:
  if ([_currentElement doesHaveTraits:kAXAdjustableTrait])
  {
    value = [_currentElement value];
    [(VOTElementManager *)self _valueWait:_currentElement oldValue:value waitTime:0 borderHitIfNoChange:0.3];
    value2 = [_currentElement value];
    if (([value isEqualToString:value2] & 1) == 0)
    {
      v32 = [objc_allocWithZone(VOTOutputRequest) init];
      [(VOTElementManager *)self _addDescription:_currentElement toRequest:v32 withOptions:8];
      [(VOTElementManager *)self sendRequest:v32];
    }
  }
}

- (void)_handleScrollDownPage:(id)page
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveTraits:kAXScrollableTrait])
  {
    v4 = _currentElement;
  }

  else
  {
    v5 = [(VOTElementManager *)self _nearestScrollableElement:_currentElement];

    v4 = v5;
  }

  v7 = v4;
  [v4 scrollDownPage];
}

- (void)_handleScrollToPoint:(id)point
{
  v4 = [point objectForIndex:101];
  [v4 pointValue];
  v6 = v5;
  v8 = v7;

  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement doesHaveTraits:kAXScrollableTrait])
  {
    v9 = _currentElement;
  }

  else
  {
    v10 = [(VOTElementManager *)self _nearestScrollableElement:_currentElement];

    v9 = v10;
  }

  v12 = v9;
  [v9 scrollToPoint:{v6, v8}];
}

- (void)_handleSelectedTextOutput:(id)output
{
  outputCopy = output;
  v4 = self->_firstResponderElement;
  v5 = v4;
  if (v4 && [(VOTElement *)v4 selectedTextRange]!= 0x7FFFFFFF)
  {
    v6 = +[VOTOutputRequest createRequest];
    language = [(VOTElement *)v5 language];
    [(VOTElement *)v5 applySelectedText:v6 language:language];

    language2 = [(VOTElement *)v5 language];
    [(VOTElement *)v5 applyTextEditingInformation:language2 request:v6 options:0];

    [v6 setBrailleType:2];
    [v6 setGeneratesBraille:1];
    [v6 send];
  }

  else
  {
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [v6 sendEvent:v7];
  }
}

- (void)_handleOutputFocusedElementSummary:(id)summary
{
  command = [summary command];
  v5 = [command isEqualToString:kVOTEventCommandOutputDetailedFocusedElementSummary];

  v9 = self->_firstResponderElement;
  if (v9)
  {
    if (v5)
    {
      v6 = 0x1000000;
    }

    else
    {
      v6 = 553648128;
    }

    v7 = +[VOTOutputRequest createRequest];
    [(VOTElement *)v9 addTextualInformationToRequest:v7 options:v6 dataPackage:0];
    [v7 send];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v8];
  }
}

- (void)visionEngine:(id)engine updatedResult:(id)result forElement:(id)element event:(int64_t)event visionOptions:(id)options
{
  elementManagerThread = self->_elementManagerThread;
  optionsCopy = options;
  elementCopy = element;
  resultCopy = result;
  engineCopy = engine;
  v17 = [NSNumber numberWithInteger:event];
  [(SCRCThread *)elementManagerThread performSelector:"_visionEngine:updatedResult:forElement:event:visionOptions:" onTarget:self count:5 objects:engineCopy, resultCopy, elementCopy, v17, optionsCopy, 0];
}

- (void)_visionEngine:(id)engine updatedResult:(id)result forElement:(id)element event:(id)event visionOptions:(id)options
{
  resultCopy = result;
  elementCopy = element;
  optionsCopy = options;
  integerValue = [event integerValue];
  v15 = VOTLogCommon();
  if (os_log_type_enabled(v15, OS_LOG_TYPE_INFO))
  {
    v25 = 134218498;
    v26 = integerValue;
    v27 = 2112;
    v28 = elementCopy;
    v29 = 2112;
    v30 = resultCopy;
    _os_log_impl(&_mh_execute_header, v15, OS_LOG_TYPE_INFO, "Element manager received async update event from vision engine. event: %ld. updateElement: %@. result: %@", &v25, 0x20u);
  }

  if ([elementCopy isEqual:self->_currentElement])
  {
    v16 = +[VOTWorkspace sharedWorkspace];
    visionEngine = [v16 visionEngine];
    v18 = [visionEngine resultsForElement:elementCopy];

    previouslySpokenImageCaptionResults = [(VOTElementManager *)self previouslySpokenImageCaptionResults];
    LOBYTE(visionEngine) = [v18 isEqual:previouslySpokenImageCaptionResults];

    v20 = VOTLogCommon();
    v21 = os_log_type_enabled(v20, OS_LOG_TYPE_INFO);
    if (visionEngine)
    {
      if (v21)
      {
        currentElement = self->_currentElement;
        v25 = 138412290;
        v26 = currentElement;
        _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "Already announced vision update for this element. Will not announce again: %@", &v25, 0xCu);
      }
    }

    else
    {
      if (v21)
      {
        v24 = self->_currentElement;
        v25 = 138412290;
        v26 = v24;
        _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "Have not yet announced vision update for this element. Will announce now: %@", &v25, 0xCu);
      }

      [(VOTElementManager *)self setPreviouslySpokenImageCaptionResults:v18];
      -[VOTElementManager _handleOutputComputerVisionAnalysisSummary:explicitUserRequest:](self, "_handleOutputComputerVisionAnalysisSummary:explicitUserRequest:", 0, [optionsCopy userCommandInitiated]);
    }
  }

  else
  {
    v18 = VOTLogCommon();
    if (os_log_type_enabled(v18, OS_LOG_TYPE_INFO))
    {
      v23 = self->_currentElement;
      v25 = 138412290;
      v26 = v23;
      _os_log_impl(&_mh_execute_header, v18, OS_LOG_TYPE_INFO, "Vision update element and current element differnet. Will not announce vision update. Current element: %@", &v25, 0xCu);
    }
  }
}

- (void)_handleOutputComputerVisionAnalysisSummary:(id)summary explicitUserRequest:(BOOL)request
{
  requestCopy = request;
  _currentElement = [(VOTElementManager *)self _currentElement];
  v6 = +[VOTOutputRequest createRequest];
  [_currentElement applyCVMLGeneratedContentToRequest:v6 explicitUserRequest:requestCopy];
  if ([v6 containsActions])
  {
    [v6 setIsComputerVisionAsynchrousRequest:requestCopy ^ 1];
    [v6 setDoesNotInterrupt:requestCopy ^ 1];
    [v6 setGeneratesBraille:0];
    [(VOTElementManager *)self sendRequest:v6];
    v7 = +[VOTBrailleManager manager];
    brailleElement = [v7 brailleElement];
    v9 = [brailleElement isEqual:_currentElement];

    if (!v9)
    {
      goto LABEL_7;
    }

    supplementalBrailleDescription = [v6 supplementalBrailleDescription];
    v11 = +[VOTBrailleManager manager];
    brailleElement2 = [v11 brailleElement];
    [brailleElement2 setSupplementalBrailleDescription:supplementalBrailleDescription];

    v13 = +[VOTBrailleManager manager];
    [v13 refreshBrailleLine];
  }

  else
  {
    if (!requestCopy)
    {
      goto LABEL_7;
    }

    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent NoResultsFound];
    [v13 sendEvent:v14];
  }

LABEL_7:
}

- (id)_imageExplorerCachedResults
{
  v3 = +[VOTWorkspace sharedWorkspace];
  visionEngine = [v3 visionEngine];

  _currentElement = [(VOTElementManager *)self _currentElement];
  v6 = [visionEngine resultsForElement:_currentElement];

  return v6;
}

- (BOOL)isValidElementForImageExploration
{
  currentElement = [(VOTElementManager *)self currentElement];
  imageAssetLocalIdentifier = [currentElement imageAssetLocalIdentifier];

  if (imageAssetLocalIdentifier)
  {
    LOBYTE(v5) = 1;
  }

  else
  {
    v12 = 0u;
    v13 = 0u;
    v10 = 0u;
    v11 = 0u;
    _imageExplorerCachedResults = [(VOTElementManager *)self _imageExplorerCachedResults];
    v5 = [_imageExplorerCachedResults countByEnumeratingWithState:&v10 objects:v14 count:16];
    if (v5)
    {
      v7 = *v11;
      while (2)
      {
        for (i = 0; i != v5; i = i + 1)
        {
          if (*v11 != v7)
          {
            objc_enumerationMutation(_imageExplorerCachedResults);
          }

          if ([*(*(&v10 + 1) + 8 * i) includesFeaturesForImageExploration])
          {
            LOBYTE(v5) = 1;
            goto LABEL_13;
          }
        }

        v5 = [_imageExplorerCachedResults countByEnumeratingWithState:&v10 objects:v14 count:16];
        if (v5)
        {
          continue;
        }

        break;
      }
    }

LABEL_13:
  }

  return v5;
}

- (void)handleLaunchVoiceOverImageExplorer
{
  v3 = +[AXSettings sharedInstance];
  securePayAssertionActive = [v3 securePayAssertionActive];

  if (securePayAssertionActive)
  {
    _imageExplorerCachedResults = AXLogAssertions();
    if (os_log_type_enabled(_imageExplorerCachedResults, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, _imageExplorerCachedResults, OS_LOG_TYPE_DEFAULT, "Not processing image explorer because secure pay mode active", buf, 2u);
    }
  }

  else
  {
    v6 = VOTLogImageExplorer();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BB98();
    }

    v26 = 0u;
    v27 = 0u;
    v24 = 0u;
    v25 = 0u;
    _imageExplorerCachedResults = [(VOTElementManager *)self _imageExplorerCachedResults];
    v7 = [_imageExplorerCachedResults countByEnumeratingWithState:&v24 objects:v34 count:16];
    if (v7)
    {
      v8 = v7;
      v9 = *v25;
      do
      {
        v10 = 0;
        do
        {
          if (*v25 != v9)
          {
            objc_enumerationMutation(_imageExplorerCachedResults);
          }

          v11 = *(*(&v24 + 1) + 8 * v10);
          v12 = VOTLogImageExplorer();
          if (os_log_type_enabled(v12, OS_LOG_TYPE_DEBUG))
          {
            v19 = objc_opt_class();
            v20 = NSStringFromClass(v19);
            includesFeaturesForImageExploration = [v11 includesFeaturesForImageExploration];
            *buf = 138412802;
            v22 = @"NO";
            if (includesFeaturesForImageExploration)
            {
              v22 = @"YES";
            }

            v29 = v20;
            v30 = 2112;
            v31 = v22;
            v32 = 2112;
            v33 = v11;
            _os_log_debug_impl(&_mh_execute_header, v12, OS_LOG_TYPE_DEBUG, "%@ - Image Explorer result includes features for exploration: %@, engineResult : %@", buf, 0x20u);
          }

          if ([v11 includesFeaturesForImageExploration])
          {
            v13 = [[AXSBImageExplorerData alloc] init];
            application = [(VOTElement *)self->_currentElement application];
            bundleIdentifier = [application bundleIdentifier];
            [v13 setHostAppBundleID:bundleIdentifier];

            label = [(VOTElement *)self->_currentElement label];
            [v13 setAxLabel:label];

            customContent = [(VOTElement *)self->_currentElement customContent];
            [v13 setCustomContent:customContent];

            v18 = +[AXSpringBoardServer server];
            [v18 launchVoiceOverImageExplorerViewServiceForResult:v11 withData:v13];
          }

          v10 = v10 + 1;
        }

        while (v8 != v10);
        v23 = [_imageExplorerCachedResults countByEnumeratingWithState:&v24 objects:v34 count:16];
        v8 = v23;
      }

      while (v23);
    }
  }
}

- (void)_handleOutputElementSummary:(id)summary
{
  summaryCopy = summary;
  _currentElement = [(VOTElementManager *)self _currentElement];
  v6 = +[VOTOutputRequest createRequest];
  isKeyEvent = [summaryCopy isKeyEvent];

  if (isKeyEvent)
  {
    [_currentElement addTextualInformationToRequest:v6 options:1 dataPackage:0];
  }

  touchContainer = [_currentElement touchContainer];
  [touchContainer addTextualInformationToRequest:v6 options:16793600 dataPackage:0];

  if ([_currentElement doesHaveTraits:kAXWebContentTrait])
  {
    textMarkerRangeForSelection = [_currentElement textMarkerRangeForSelection];
    v10 = [_currentElement stringForTextMarkers:textMarkerRangeForSelection];
    v11 = [v10 length];
    if (v11)
    {
      v12 = sub_1000511CC(off_1001FDDD0, @"scrollstatus.selected.text", @"Selected Text");
      v13 = [NSString stringWithFormat:v12, v10];
      v14 = [v6 addString:v13];
    }

    shouldAnnounceTableInfo = [_currentElement shouldAnnounceTableInfo];
    if (v11)
    {
      v16 = 0;
LABEL_51:
      v55[0] = _NSConcreteStackBlock;
      v55[1] = 3221225472;
      v55[2] = sub_10008E208;
      v55[3] = &unk_1001C9DB0;
      v49 = _currentElement;
      v56 = v49;
      selfCopy = self;
      v50 = v6;
      v58 = v50;
      v59 = shouldAnnounceTableInfo;
      v51 = objc_retainBlock(v55);
      if (v16 && [v49 shouldIncludeRegionDescription])
      {
        v52[0] = _NSConcreteStackBlock;
        v52[1] = 3221225472;
        v52[2] = sub_10008E374;
        v52[3] = &unk_1001C9DD8;
        v53 = v50;
        v54 = v51;
        [(VOTElementManager *)self regionDescriptionForElement:v49 withCompletion:v52];
      }

      else
      {
        (v51[2])(v51);
      }

      v26 = v56;
      goto LABEL_56;
    }
  }

  else
  {
    shouldAnnounceTableInfo = [_currentElement shouldAnnounceTableInfo];
  }

  selectedTextRange = [_currentElement selectedTextRange];
  if (selectedTextRange == 0x7FFFFFFF)
  {
    v19 = 1;
  }

  else
  {
    v19 = isKeyEvent;
  }

  if ((v19 & 1) == 0)
  {
    v20 = selectedTextRange;
    v21 = v18;
    if (([_currentElement doesHaveTraits:kAXIsEditingTrait] & 1) != 0 || v21)
    {
      if (v21)
      {
        v27 = [_currentElement attributedValueForRange:{v20, v21}];
        if ([v27 length])
        {
          v28 = sub_1000511CC(off_1001FDDD0, @"scrollstatus.selected.text", @"Selected Text");
          v29 = [NSString stringWithFormat:v28, v27];
          v30 = [v6 addString:v29];
        }
      }

      else
      {
        v27 = [_currentElement attributedValueForRange:{v20, 1}];
      }

      [VOTSharedWorkspace addMisspellingsForString:v27];
      coalescedFontAttributes = [v27 coalescedFontAttributes];

      v41 = [(VOTElementManager *)self _computeChangedFontAttributes:coalescedFontAttributes storedAttributes:0 haveMisspellCheck:1];
      if ([v41 length])
      {
        v42 = [v6 addAttributedString:v41];
      }

      language = [_currentElement language];
      [_currentElement applyTextEditingInformation:language request:v6 options:0];

      v16 = 0;
      goto LABEL_49;
    }
  }

  if (!AXDeviceSupportsMapsDescriptions())
  {
    goto LABEL_25;
  }

  firstObject = [(NSArray *)self->_currentApplications firstObject];
  if (([firstObject isMaps] & 1) == 0)
  {

    goto LABEL_25;
  }

  isMapPOIItem = [_currentElement isMapPOIItem];

  if (!isMapPOIItem)
  {
LABEL_25:
    coalescedFontAttributes = [_currentElement label];
    if ([coalescedFontAttributes isAXAttributedString])
    {
      v31CoalescedFontAttributes = [coalescedFontAttributes coalescedFontAttributes];
      v33 = [(VOTElementManager *)self _computeChangedFontAttributes:v31CoalescedFontAttributes storedAttributes:0 haveMisspellCheck:1];
      if ([v33 length])
      {
        v34 = [v6 addAttributedString:v33];
      }
    }

    else if ([coalescedFontAttributes length])
    {
      v35 = [v6 addString:coalescedFontAttributes];
    }

    if ([_currentElement doesHaveTraits:kAXMathEquationTrait])
    {
      mathSummary = [_currentElement mathSummary];
      if ([mathSummary length])
      {
        v37 = [v6 addString:mathSummary];
      }
    }

    if ([_currentElement isAccessibleGroup])
    {
      [_currentElement applyGroupChildrenCountToRequest:v6];
    }

    if (([_currentElement doesHaveTraits:kAXScrollableTrait] & 1) != 0 || objc_msgSend(_currentElement, "doesHaveTraits:", kAXLaunchIconTrait))
    {
      scrollStatus = [_currentElement scrollStatus];
      if ([scrollStatus length])
      {
        v39 = [v6 addString:scrollStatus];
      }
    }

    if ((shouldAnnounceTableInfo & 1) == 0)
    {
      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      sub_100051EEC(_currentElement, v6, selectedLanguage, 1, 1, 0);
    }

    [_currentElement applyCVMLGeneratedContentToRequest:v6 explicitUserRequest:0];
    v16 = 1;
LABEL_49:

    uiElement = [_currentElement uiElement];
    v45 = [uiElement numberWithAXAttribute:2123];
    unsignedIntValue = [v45 unsignedIntValue];

    if (unsignedIntValue >= 2)
    {
      v47 = sub_1000511CC(off_1001FDDD0, @"extended.display", 0);
      v48 = [v6 addString:v47];
    }

    goto LABEL_51;
  }

  v24 = AXLogVoiceOverMapsAI();
  if (os_log_type_enabled(v24, OS_LOG_TYPE_INFO))
  {
    *buf = 0;
    _os_log_impl(&_mh_execute_header, v24, OS_LOG_TYPE_INFO, "Smart Maps Descriptions", buf, 2u);
  }

  firstObject2 = [(NSArray *)self->_currentApplications firstObject];
  v26 = [firstObject2 elementsForAttribute:3015];

  v60[0] = _NSConcreteStackBlock;
  v60[1] = 3221225472;
  v60[2] = sub_10008E108;
  v60[3] = &unk_1001C9D88;
  v61 = v6;
  selfCopy2 = self;
  [_TtC3vot13VOMapsAdapter describeMapsWithElements:v26 focusedElement:_currentElement completionHandler:v60];

LABEL_56:
}

- (void)regionDescriptionForElement:(id)element withCompletion:(id)completion
{
  v6[0] = _NSConcreteStackBlock;
  v6[1] = 3221225472;
  v6[2] = sub_10008E478;
  v6[3] = &unk_1001C9E00;
  completionCopy = completion;
  v5 = completionCopy;
  [element regionDescriptionWithCompletion:v6];
}

- (BOOL)elementEligibleToFindTitleElement:(id)element
{
  elementCopy = element;
  if ([elementCopy doesHaveTraits:kAXWebContentTrait])
  {
    if ([elementCopy doesHaveTraits:kAXTextEntryTrait] & 1) != 0 || (objc_msgSend(elementCopy, "doesHaveTraits:", kAXPopupButtonTrait))
    {
      v4 = 1;
    }

    else
    {
      v4 = [elementCopy doesHaveTraits:kAXToggleTrait];
    }
  }

  else
  {
    v4 = 0;
  }

  return v4;
}

- (BOOL)shouldElement:(id)element beCombined:(id)combined combineLinks:(BOOL)links
{
  elementCopy = element;
  combinedCopy = combined;
  if (!-[VOTElementManager elementEligibleToFindTitleElement:](self, "elementEligibleToFindTitleElement:", elementCopy) || ![combinedCopy doesHaveTraits:kAXStaticTextTrait] || !objc_msgSend(combinedCopy, "doesHaveTraits:", kAXWebContentTrait) || !links && (objc_msgSend(combinedCopy, "doesHaveTraits:", kAXLinkTrait) & 1) != 0)
  {
    goto LABEL_8;
  }

  label = [elementCopy label];
  if (![label length])
  {

    goto LABEL_11;
  }

  label2 = [elementCopy label];
  label3 = [combinedCopy label];
  v13 = [label2 isEqualToString:label3];

  if (v13)
  {
LABEL_11:
    v14 = [elementCopy elementOnSameLine:combinedCopy];
    goto LABEL_9;
  }

LABEL_8:
  v14 = 0;
LABEL_9:

  return v14;
}

- (void)updateTitleElementLabels:(id)labels
{
  labelsCopy = labels;
  titleElements = [labelsCopy titleElements];
  application = [labelsCopy application];
  if ([titleElements count])
  {
    v26 = 0u;
    v27 = 0u;
    v24 = 0u;
    v25 = 0u;
    v21 = titleElements;
    obj = titleElements;
    v6 = [obj countByEnumeratingWithState:&v24 objects:v28 count:16];
    if (v6)
    {
      v7 = v6;
      v8 = *v25;
      v9 = kAXLinkTrait;
      v10 = kAXButtonTrait;
      v11 = &stru_1001CBF90;
      do
      {
        for (i = 0; i != v7; i = i + 1)
        {
          if (*v25 != v8)
          {
            objc_enumerationMutation(obj);
          }

          v13 = *(*(&v24 + 1) + 8 * i);
          if (([v13 isEqual:labelsCopy] & 1) == 0)
          {
            label = [v13 label];
            v15 = [label length];

            if (v15)
            {
              label2 = [v13 label];
              v17 = [NSString stringWithFormat:@"%@ %@", v11, label2];

              v11 = v17;
            }

            if (([v13 doesHaveTraits:v10 | v9] & 1) == 0)
            {
              [application addTitleElementToCache:v13];
            }
          }
        }

        v7 = [obj countByEnumeratingWithState:&v24 objects:v28 count:16];
      }

      while (v7);
    }

    else
    {
      v11 = &stru_1001CBF90;
    }

    if ([(__CFString *)v11 length])
    {
      [labelsCopy setDefinedLabel:v11];
    }

    titleElements = v21;
  }

  else if ([(VOTElementManager *)self elementEligibleToFindTitleElement:labelsCopy])
  {
    if ([labelsCopy doesHaveTraits:kAXToggleTrait])
    {
      nextElement = [labelsCopy nextElement];
      if (([labelsCopy elementOnSameLine:nextElement] & 1) == 0)
      {
        previousElement = [labelsCopy previousElement];

        nextElement = previousElement;
      }
    }

    else
    {
      nextElement = [labelsCopy previousElement];
    }

    if (([application elementActsAsTitleElement:nextElement] & 1) == 0 && -[VOTElementManager shouldElement:beCombined:combineLinks:](self, "shouldElement:beCombined:combineLinks:", labelsCopy, nextElement, 0))
    {
      label3 = [nextElement label];
      [labelsCopy setDefinedLabel:label3];
    }
  }
}

- (void)_addDescription:(id)description toRequest:(id)request withOptions:(unint64_t)options
{
  requestCopy = request;
  descriptionCopy = description;
  previousContextDescriptors = [(VOTElementManager *)self previousContextDescriptors];
  [(VOTElementManager *)self _addDescription:descriptionCopy toRequest:requestCopy withOptions:options lastSeenContextDescriptors:previousContextDescriptors];
}

- (void)_addDescription:(id)description toRequest:(id)request withOptions:(unint64_t)options lastSeenContextDescriptors:(id)descriptors
{
  descriptionCopy = description;
  descriptorsCopy = descriptors;
  requestCopy = request;
  v13 = objc_opt_new();
  v14 = [descriptionCopy isEqual:self->_currentElement];
  v15 = 64;
  if (v14)
  {
    v15 = 72;
  }

  [v13 setPreviousElement:*(&self->super.isa + v15)];
  [v13 setLastSeenContextDescriptors:descriptorsCopy];

  [(VOTElementManager *)self updateTitleElementLabels:descriptionCopy];
  if ([descriptionCopy containedIn:2])
  {
    rowRange = [descriptionCopy rowRange];
  }

  else
  {
    rowRange = 0x7FFFFFFFLL;
  }

  self->_lastTableRow = rowRange;
  if (self->_flags.performedFlickNavigation && ![VOTSharedWorkspace hintsEnabled])
  {
    options |= 0x2000uLL;
  }

  [v13 setLastSeenLineAndColumn:self->_lastSeenLineAndColumn];
  cachedCustomRotorActions = [descriptionCopy cachedCustomRotorActions];
  v24[0] = _NSConcreteStackBlock;
  v24[1] = 3221225472;
  v24[2] = sub_10008EBFC;
  v24[3] = &unk_1001C9E28;
  v24[4] = self;
  v18 = [cachedCustomRotorActions axFilterObjectsUsingBlock:v24];
  firstObject = [v18 firstObject];
  [v13 setCustomAction:firstObject];

  if ([descriptionCopy includeRoleDescription])
  {
    options |= 0x1000000uLL;
  }

  if ((options & 0x40) != 0 && [descriptionCopy doesHaveTraits:kAXTextAreaTrait])
  {
    initialReadAllElement = [(VOTElementManager *)self initialReadAllElement];
    v21 = [initialReadAllElement isEqual:descriptionCopy];
    v22 = 0x80000;
    if (!v21)
    {
      v22 = 0;
    }

    options |= v22;
  }

  [descriptionCopy addTextualInformationToRequest:requestCopy options:options dataPackage:v13];
  imageCaptionResults = [requestCopy imageCaptionResults];

  if ([imageCaptionResults count])
  {
    [(VOTElementManager *)self setPreviouslySpokenImageCaptionResults:imageCaptionResults];
  }
}

- (void)_endNativeSliding:(BOOL)sliding
{
  v4 = &kCFBooleanFalse;
  if (sliding)
  {
    v4 = &kCFBooleanTrue;
  }

  v6 = [NSDictionary dictionaryWithObject:*v4 forKey:@"disabledOnTap"];
  v5 = +[NSNotificationCenter defaultCenter];
  [v5 postNotificationName:off_1001FDF10 object:0 userInfo:v6];

  self->_flags.wasSendingToNativeSlide = 0;
}

- (id)_elementToFocusWhenSwitchingToElementCommunity:(id)community
{
  communityCopy = community;
  _sideAppDividerElement = [(VOTElementManager *)self _sideAppDividerElement];
  _dockElementForDisplay = [(VOTElementManager *)self _dockElementForDisplay];
  if (_sideAppDividerElement == communityCopy)
  {
    v8 = _sideAppDividerElement;
  }

  else
  {
    v7 = [communityCopy hash];
    if (v7 == [_dockElementForDisplay hash])
    {
      v8 = _dockElementForDisplay;
    }

    else
    {
      v8 = [(VOTElementManager *)self _retrieveCachedFocusedElementForElementCommunity:communityCopy];
    }
  }

  v9 = v8;
  if (!v8)
  {
    firstResponderElementForFocus = [communityCopy firstResponderElementForFocus];
    if (!firstResponderElementForFocus)
    {
      firstResponderElementForFocus = [communityCopy firstElementInApplicationForFocus];
      if (!firstResponderElementForFocus)
      {
        firstResponderElementForFocus = [communityCopy firstElementInApplication];
      }
    }

    v9 = firstResponderElementForFocus;
  }

  v11 = v9;

  return v9;
}

- (id)_additionalElementCommunities
{
  cachedAdditionalElementCommunities = [(VOTElementManager *)self cachedAdditionalElementCommunities];

  if (!cachedAdditionalElementCommunities)
  {
    v4 = +[NSMutableArray array];
    v5 = +[VOTElement systemWideElement];
    v6 = [v5 elementForAttribute:1005];

    if (v6)
    {
      uiElement = [v6 uiElement];
      [uiElement updateCache:14000];

      v8 = [v6 elementsForAttribute:14000];
      [v4 addObjectsFromArray:v8];
    }

    v9 = +[VOTElement systemWideElement];
    v10 = [v9 elementForAttribute:1006];

    if (v10)
    {
      [v4 addObject:v10];
    }

    v11 = +[VOTElement systemWideElement];
    v12 = [v11 elementForAttribute:1010];

    if (v12)
    {
      [v4 addObject:v12];
    }

    v13 = +[VOTElement systemAppApplication];
    v14 = [v13 elementForAttribute:1513];

    if (v14)
    {
      [v4 addObject:v14];
    }

    [(VOTElementManager *)self setCachedAdditionalElementCommunities:v4];
  }

  return [(VOTElementManager *)self cachedAdditionalElementCommunities];
}

- (id)_dockElementForDisplay
{
  uiElement = [(VOTElement *)self->_currentElement uiElement];
  v3 = [uiElement numberWithAXAttribute:2123];
  v4 = +[NSNumber numberWithUnsignedInt:](NSNumber, "numberWithUnsignedInt:", [v3 unsignedIntValue]);

  v5 = +[VOTElement systemAppApplication];
  v6 = [v5 elementForParameterizedAttribute:91513 parameter:v4];

  return v6;
}

- (id)_allElementCommunitiesWithFocusedApplications:(id)applications
{
  applicationsCopy = applications;
  v5 = +[NSMutableArray array];
  [v5 addObjectsFromArray:applicationsCopy];

  _sideAppDividerElement = [(VOTElementManager *)self _sideAppDividerElement];
  if (_sideAppDividerElement)
  {
    if (![v5 count])
    {
      _AXAssert();
    }

    if ([v5 count])
    {
      [v5 insertObject:_sideAppDividerElement atIndex:{objc_msgSend(v5, "count") - 1}];
    }
  }

  _dockElementForDisplay = [(VOTElementManager *)self _dockElementForDisplay];
  if (_dockElementForDisplay)
  {
    [v5 addObject:_dockElementForDisplay];
  }

  _additionalElementCommunities = [(VOTElementManager *)self _additionalElementCommunities];
  [v5 addObjectsFromArray:_additionalElementCommunities];

  return v5;
}

- (id)_getNextFocusedElementInElementCommunityPrevious:(BOOL)previous shouldUseCache:(BOOL)cache shouldWrapAround:(BOOL)around
{
  aroundCopy = around;
  cacheCopy = cache;
  v9 = [(VOTElementManager *)self _allElementCommunitiesWithFocusedApplications:self->_currentApplications];
  if (self->_currentElement)
  {
    v10 = [(VOTElementManager *)self _elementCommunityForElement:?];
    v11 = [v9 indexOfObject:v10];
    if (v11 == 0x7FFFFFFFFFFFFFFFLL || (v12 = v11, [v9 count] < 2))
    {
      _AXLogWithFacility();
      v13 = 0;
    }

    else
    {
      if (previous)
      {
        v13 = 0;
        v14 = v12 - 1;
        while (1)
        {
          if ((v14 & 0x8000000000000000) != 0)
          {
            if (!aroundCopy)
            {
              goto LABEL_17;
            }

            v14 = [v9 count] - 1;
          }

          v15 = [v9 objectAtIndexedSubscript:v14];
          v16 = v15;
          if (cacheCopy)
          {
            [(VOTElementManager *)self _elementToFocusWhenSwitchingToElementCommunity:v15];
          }

          else
          {
            [v15 lastElementInApplication];
          }
          v17 = ;

          if (v17)
          {
            if (![v17 isRemoteElement])
            {
              break;
            }
          }

          --v14;
          v13 = v17;
          if (v14 == v12)
          {
            goto LABEL_35;
          }
        }

LABEL_36:
        v13 = v17;
        goto LABEL_18;
      }

      v13 = 0;
      v19 = v12 + 1;
      while (1)
      {
        v20 = [v9 count];
        v21 = v19 == v20 ? 0 : v19;
        if (v19 == v20 && !aroundCopy)
        {
          break;
        }

        v22 = [v9 objectAtIndexedSubscript:v21];
        v16 = v22;
        if (cacheCopy)
        {
          [(VOTElementManager *)self _elementToFocusWhenSwitchingToElementCommunity:v22];
        }

        else
        {
          [v22 firstElementInApplication];
        }
        v17 = ;

        if (v17 && ![v17 isRemoteElement])
        {
          goto LABEL_36;
        }

        v19 = v21 + 1;
        v13 = v17;
        if (v21 + 1 == v12)
        {
LABEL_35:
          v16 = 0;
          goto LABEL_36;
        }
      }
    }

LABEL_17:
    v16 = 0;
LABEL_18:

    goto LABEL_20;
  }

  v13 = 0;
  v16 = 0;
LABEL_20:

  return v13;
}

- (void)_handleSwitchToElementCommunityPrevious:(BOOL)previous event:(id)event
{
  previousCopy = previous;
  eventCopy = event;
  v7 = [(VOTElementManager *)self _getNextFocusedElementInElementCommunityPrevious:previousCopy shouldUseCache:1 shouldWrapAround:1];
  if (v7)
  {
    [(VOTElementManager *)self _echoDifferentElement:v7 forEvent:eventCopy];
    if (previousCopy)
    {
      v8 = 2;
    }

    else
    {
      v8 = 1;
    }

    v11[0] = _NSConcreteStackBlock;
    v11[1] = 3221225472;
    v11[2] = sub_10008F498;
    v11[3] = &unk_1001C7778;
    v11[4] = self;
    v12 = v7;
    [v12 scrollToElementForDirectional:v8 withCompletion:v11];
  }

  else
  {
    v9 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v9 sendEvent:v10];
  }
}

- (void)_handleEdgeSwipeTop:(id)top
{
  v3 = +[VOTElement springBoardApplication];
  [v3 showBulletinBoard:1];
}

- (void)_handleEdgeSwipeBottom:(id)bottom
{
  v3 = +[VOTElement springBoardApplication];
  [v3 showControlCenter:1];
}

- (void)_handleBottomEdgePanDown:(id)down
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    IsPhone = AXDeviceIsPhone();
    v4 = +[AXSpringBoardServer server];
    v5 = v4;
    if (IsPhone)
    {
      [v4 toggleReachability];
    }

    else
    {
      [v4 toggleDock];
    }
  }
}

- (void)_handleBottomEdgePanShort:(id)short
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[AXSettings sharedInstance];
    liveRecognitionOverlayOpen = [v3 liveRecognitionOverlayOpen];

    if (liveRecognitionOverlayOpen)
    {
      v8 = +[VOTMagnifierService shared];
      [v8 hideDetectionUI];
    }

    else
    {
      v5 = +[AXSpringBoardServer server];
      dismissBuddyIfNecessary = [v5 dismissBuddyIfNecessary];

      if ((dismissBuddyIfNecessary & 1) == 0)
      {
        v7 = VOTSharedWorkspace;

        [v7 performHomeButtonPress];
      }
    }
  }
}

- (void)_handleBottomEdgePanLong:(id)long
{
  if ([VOTSharedWorkspace supportsHomeGestures] && !-[VOTElementManager isContinuitySessionActive](self, "isContinuitySessionActive"))
  {
    v4 = VOTLogCommon();
    if (os_log_type_enabled(v4, OS_LOG_TYPE_DEFAULT))
    {
      *v6 = 0;
      _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_DEFAULT, "App switcher gesture detected. Will perform openAppSwitcher command.", v6, 2u);
    }

    v5 = +[AXSpringBoardServer server];
    [v5 openAppSwitcher];
  }
}

- (void)_handleBottomEdgePanExtraLong:(id)long
{
  v3 = +[AXSpringBoardServer server];
  isTypeToSiriVisible = [v3 isTypeToSiriVisible];

  if (isTypeToSiriVisible)
  {
    if ([VOTSharedWorkspace supportsHomeGestures])
    {
      v5 = +[AXSpringBoardServer server];
      dismissBuddyIfNecessary = [v5 dismissBuddyIfNecessary];

      if ((dismissBuddyIfNecessary & 1) == 0)
      {
        v7 = VOTSharedWorkspace;

        [v7 performHomeButtonPress];
      }
    }
  }

  else
  {
    v8 = +[AXPISystemActionHelper sharedInstance];
    [v8 activateTypeToSiri];
  }
}

- (void)_handleTopEdgePanDown:(id)down
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[AXSBMenuBarManager sharedInstance];
    isMenuBarSupported = [v3 isMenuBarSupported];

    if (isMenuBarSupported)
    {
      v5 = +[AXSBMenuBarManager sharedInstance];
      [v5 toggleMenuBar];
    }
  }
}

- (void)_handleTopEdgePanShort:(id)short
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[VOTElement springBoardApplication];
    v4 = +[AXSpringBoardServer server];
    v5 = [v3 showControlCenter:{objc_msgSend(v4, "isControlCenterVisible") ^ 1}];

    if ((v5 & 1) == 0)
    {
      v7 = +[VOTOutputManager outputManager];
      v6 = +[VOSOutputEvent BoundaryEncountered];
      [v7 sendEvent:v6];
    }
  }
}

- (void)_handleTopEdgePanLong:(id)long
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[VOTElement systemAppApplication];
    v4 = [v3 showBulletinBoard:1];

    if ((v4 & 1) == 0)
    {
      v6 = +[VOTOutputManager outputManager];
      v5 = +[VOSOutputEvent BoundaryEncountered];
      [v6 sendEvent:v5];
    }
  }
}

- (void)_handleSwitchToLeftElementCommunity:(id)community
{
  communityCopy = community;
  v4 = +[VOTElement springBoardApplication];
  applicationIsRTL = [v4 applicationIsRTL];

  if (applicationIsRTL)
  {
    [(VOTElementManager *)self _handleSwitchToNextElementCommunity:communityCopy];
  }

  else
  {
    [(VOTElementManager *)self _handleSwitchToPreviousElementCommunity:communityCopy];
  }
}

- (void)_handleSwitchToRightElementCommunity:(id)community
{
  communityCopy = community;
  v4 = +[VOTElement springBoardApplication];
  applicationIsRTL = [v4 applicationIsRTL];

  if (applicationIsRTL)
  {
    [(VOTElementManager *)self _handleSwitchToPreviousElementCommunity:communityCopy];
  }

  else
  {
    [(VOTElementManager *)self _handleSwitchToNextElementCommunity:communityCopy];
  }
}

- (void)_handleOpenVoiceOverOptions:(id)options
{
  v4 = [NSURL URLWithString:@"prefs:root=ACCESSIBILITY&path=VOICEOVER_TITLE"];
  v3 = +[LSApplicationWorkspace defaultWorkspace];
  [v3 openSensitiveURL:v4 withOptions:0];
}

- (void)_handleSpeechVoiceChange:(id)change
{
  changeCopy = change;
  command = [changeCopy command];
  if ([command isEqualToString:kVOTEventCommandSpeechNextVoice])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleRotorVoiceMovement:v5 withEvent:changeCopy];
}

- (void)_handleShowDetectionUIWithMagnifierService:(id)service
{
  v3 = +[VOTMagnifierService shared];
  [v3 showDetectionUI];
}

- (void)_handleHideDetectionUIWithMagnifierService:(id)service
{
  v3 = +[VOTMagnifierService shared];
  [v3 hideDetectionUI];
}

- (void)_handleToggleSideAppIfAvailableInGestures:(id)gestures
{
  gesturesCopy = gestures;
  v10 = 0u;
  v11 = 0u;
  v12 = 0u;
  v13 = 0u;
  v4 = [&off_1001DBAB0 countByEnumeratingWithState:&v10 objects:v14 count:16];
  if (v4)
  {
    v5 = v4;
    v6 = *v11;
    while (2)
    {
      for (i = 0; i != v5; i = i + 1)
      {
        if (*v11 != v6)
        {
          objc_enumerationMutation(&off_1001DBAB0);
        }

        v8 = *(*(&v10 + 1) + 8 * i);
        if ([gesturesCopy containsObject:v8])
        {
          v9 = +[AXSpringBoardServer server];
          [v9 performMedusaGesture:{objc_msgSend(v8, "unsignedIntegerValue")}];

          goto LABEL_11;
        }
      }

      v5 = [&off_1001DBAB0 countByEnumeratingWithState:&v10 objects:v14 count:16];
      if (v5)
      {
        continue;
      }

      break;
    }
  }

LABEL_11:
}

- (void)_handleToggleSideApp:(id)app
{
  v4 = +[AXSpringBoardServer server];
  allowedMedusaGestures = [v4 allowedMedusaGestures];

  [(VOTElementManager *)self _handleToggleSideAppIfAvailableInGestures:allowedMedusaGestures];
}

- (BOOL)_continueTrackingRoadElementWithPoint:(CGPoint)point
{
  result = 0;
  if (self->_shouldContinueRoadTracking)
  {
    y = point.y;
    x = point.x;
    if ([(VOTElement *)self->_currentElement mapFeatureType]== 1 && [(VOTElement *)self->_currentElement roadContainsTrackingPoint:x, y])
    {
      return 1;
    }
  }

  return result;
}

- (BOOL)_continueTrackingKeyboardKey:(id)key
{
  keyCopy = key;
  currentElement = self->_currentElement;
  v6 = keyCopy | currentElement;
  if (keyCopy | currentElement)
  {
    v6 = ![(VOTElement *)currentElement isEqual:keyCopy];
  }

  if (!keyCopy)
  {
    v6 = 1;
  }

  v7 = !self->_flags.usePenumbraForKeyboardKeys || v6 == 0;
  if (!v7 && [(VOTElement *)self->_currentElement doesHaveTraits:kAXKeyboardKeyTrait])
  {
    [(VOTElement *)self->_currentElement centerPoint];
    SCRCMathGetDistanceBetweenPoints();
    v9 = v8;
    [(VOTElementManager *)self keyboardKeyPenumbra:self->_currentElement];
    if (v9 < v10)
    {
      v12 = 1;
      goto LABEL_15;
    }

    v11 = VOTLogCommon();
    if (os_log_type_enabled(v11, OS_LOG_TYPE_INFO))
    {
      *v14 = 0;
      _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_INFO, "Canceling alt keyboard activation timer since we moved too far", v14, 2u);
    }

    [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer cancel];
  }

  v12 = 0;
LABEL_15:

  return v12;
}

- (void)_setDirectInteractionElement:(id)element
{
  elementCopy = element;
  [elementCopy frame];
  v5 = v4;
  v7 = v6;
  v9 = v8;
  v11 = v10;
  v12 = +[VOTElement systemWideElement];
  [v12 convertRect:objc_msgSend(elementCopy fromContextId:{"windowContextId"), v5, v7, v9, v11}];
  v14 = v13;
  v16 = v15;
  v18 = v17;
  v20 = v19;

  v21 = +[VOTDisplayManager displayManager];
  [v21 setCursorFrame:{v14, v16, v18, v20}];

  [(VOTElementManager *)self _setCurrentElement:elementCopy];
  if (![(VOTElementManager *)self avoidAnnouncingDirectTouchArea])
  {
    v22 = +[VOTOutputRequest createRequest];
    [(VOTElementManager *)self _addDescription:elementCopy toRequest:v22 withOptions:0x4000];
    [v22 send];
  }
}

- (BOOL)_isPoint:(CGPoint)point withinRangeForDividerElement:(id)element
{
  y = point.y;
  x = point.x;
  elementCopy = element;
  if (!elementCopy)
  {
    _AXAssert();
  }

  [elementCopy frame];
  v8 = v7;
  v10 = v9;
  v12 = v11;
  v14 = v13;
  deviceOrientation = [VOTSharedWorkspace deviceOrientation];
  v16 = v8;
  v17 = v10;
  v18 = v12;
  v19 = v14;
  if ((deviceOrientation - 1) > 1)
  {
    if (y >= CGRectGetMinY(*&v16) + -10.0)
    {
      v25.origin.x = v8;
      v25.origin.y = v10;
      v25.size.width = v12;
      v25.size.height = v14;
      if (y < CGRectGetMaxY(v25) + 10.0)
      {
        v26.origin.x = v8;
        v26.origin.y = v10;
        v26.size.width = v12;
        v26.size.height = v14;
        y = CGRectGetMidY(v26);
        goto LABEL_10;
      }
    }

LABEL_11:
    v21 = 0;
    goto LABEL_12;
  }

  if (x < CGRectGetMinX(*&v16) + -10.0)
  {
    goto LABEL_11;
  }

  v23.origin.x = v8;
  v23.origin.y = v10;
  v23.size.width = v12;
  v23.size.height = v14;
  if (x >= CGRectGetMaxX(v23) + 10.0)
  {
    goto LABEL_11;
  }

  v24.origin.x = v8;
  v24.origin.y = v10;
  v24.size.width = v12;
  v24.size.height = v14;
  x = CGRectGetMidX(v24);
LABEL_10:
  v20 = [[VOTElement alloc] initWithPosition:x, y];
  v21 = [(VOTElement *)v20 isEqual:elementCopy];

LABEL_12:
  return v21;
}

- (id)_sideAppDividerElement
{
  if (![(VOTElementManager *)self didCacheSideAppDividerElement])
  {
    v3 = +[VOTElement systemAppApplication];
    v4 = [v3 elementForAttribute:5040];
    [(VOTElementManager *)self setCachedSideAppDividerElement:v4];

    [(VOTElementManager *)self setDidCacheSideAppDividerElement:1];
  }

  return [(VOTElementManager *)self cachedSideAppDividerElement];
}

- (id)_occludedMultitaskingApps
{
  cachedOccludedMultitaskingApps = [(VOTElementManager *)self cachedOccludedMultitaskingApps];

  if (!cachedOccludedMultitaskingApps)
  {
    v4 = +[VOTElement springBoardApplication];
    occludedMultitaskingApps = [v4 occludedMultitaskingApps];
    [(VOTElementManager *)self setCachedOccludedMultitaskingApps:occludedMultitaskingApps];
  }

  return [(VOTElementManager *)self cachedOccludedMultitaskingApps];
}

- (id)_frontmostItemContainerElement
{
  cachedFrontmostItemContainerElement = [(VOTElementManager *)self cachedFrontmostItemContainerElement];

  if (!cachedFrontmostItemContainerElement)
  {
    v4 = +[VOTElement springBoardApplication];
    frontmostItemContainer = [v4 frontmostItemContainer];
    [(VOTElementManager *)self setCachedFrontmostItemContainerElement:frontmostItemContainer];
  }

  return [(VOTElementManager *)self cachedFrontmostItemContainerElement];
}

- (id)_activeSceneIdentifier
{
  v2 = +[VOTElement springBoardApplication];
  activeSceneIdentifier = [v2 activeSceneIdentifier];

  return activeSceneIdentifier;
}

- (id)_copySideAppDividerElementIfApplicableForPoint:(CGPoint)point
{
  y = point.y;
  x = point.x;
  _sideAppDividerElement = [(VOTElementManager *)self _sideAppDividerElement];
  if (_sideAppDividerElement && [(VOTElementManager *)self _isPoint:_sideAppDividerElement withinRangeForDividerElement:x, y])
  {
    v7 = _sideAppDividerElement;
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (id)_currentMedusaApplications
{
  currentApplications = self->_currentApplications;
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10009068C;
  v5[3] = &unk_1001C9E50;
  v5[4] = self;
  v3 = [(NSArray *)currentApplications ax_filteredArrayUsingBlock:v5];

  return v3;
}

- (id)_handleProtectedAppLogicForEvent:(id)event element:(id)element point:(CGPoint)point
{
  y = point.y;
  x = point.x;
  elementCopy = element;
  v10 = [event objectForIndex:113];
  if (!v10)
  {
    v16 = 0;
    goto LABEL_41;
  }

  _currentMedusaApplications = [(VOTElementManager *)self _currentMedusaApplications];
  v12 = [_currentMedusaApplications ax_filteredArrayUsingBlock:&stru_1001C9E70];

  if ([v12 count] >= 2)
  {
    if ((AXDeviceSupportsSideApp() & 1) == 0)
    {
      v13 = VOTLogCommon();
      if (os_log_type_enabled(v13, OS_LOG_TYPE_ERROR))
      {
        sub_10012BC48();
      }
    }

    v14 = sub_100050834();
    if (v14)
    {
      if (([elementCopy isAccessibleElement] & 1) == 0)
      {
        LOBYTE(v14) = [elementCopy isTouchContainer];
        if (!elementCopy)
        {
          goto LABEL_16;
        }

LABEL_11:
        if ((v14 & 1) == 0)
        {
          v15 = [(VOTElementManager *)self _elementCommunityForElement:elementCopy];
          goto LABEL_27;
        }

LABEL_16:
        v29 = 0u;
        v30 = 0u;
        v27 = 0u;
        v28 = 0u;
        v17 = v12;
        v15 = [v17 countByEnumeratingWithState:&v27 objects:v31 count:16];
        if (v15)
        {
          v18 = *v28;
          while (2)
          {
            for (i = 0; i != v15; i = i + 1)
            {
              if (*v28 != v18)
              {
                objc_enumerationMutation(v17);
              }

              v20 = *(*(&v27 + 1) + 8 * i);
              [v20 frame];
              v33.x = x;
              v33.y = y;
              if (CGRectContainsPoint(v34, v33))
              {
                v15 = v20;
                goto LABEL_26;
              }
            }

            v15 = [v17 countByEnumeratingWithState:&v27 objects:v31 count:16];
            if (v15)
            {
              continue;
            }

            break;
          }
        }

LABEL_26:

LABEL_27:
        if ([v10 BOOLValue])
        {
          if (v15 && [v12 containsObject:v15])
          {
            selfCopy2 = self;
            v22 = v15;
          }

          else
          {
            selfCopy2 = self;
            v22 = 0;
          }

          [(VOTElementManager *)selfCopy2 setFirstTrackedAppInGesture:v22];
        }

        else
        {
          firstTrackedAppInGesture = [(VOTElementManager *)self firstTrackedAppInGesture];

          v16 = 0;
          if (!firstTrackedAppInGesture || !v15)
          {
            goto LABEL_39;
          }

          if ([v12 containsObject:v15])
          {
            firstTrackedAppInGesture2 = [(VOTElementManager *)self firstTrackedAppInGesture];
            v25 = [v15 isEqual:firstTrackedAppInGesture2];

            if ((v25 & 1) == 0)
            {
              v16 = v15;
LABEL_39:

              goto LABEL_40;
            }
          }
        }

        v16 = 0;
        goto LABEL_39;
      }

      LOBYTE(v14) = 0;
    }

    if (!elementCopy)
    {
      goto LABEL_16;
    }

    goto LABEL_11;
  }

  v16 = 0;
LABEL_40:

LABEL_41:

  return v16;
}

- (void)_handleTracking:(id)tracking
{
  trackingCopy = tracking;
  if (AXDeviceIsTV())
  {
    [(VOTElementManager *)self _tvOS_handleIdleAndTrackingEvents:trackingCopy];
    goto LABEL_113;
  }

  [(NSLock *)self->_trackingLock lock];
  if (!self->_mostRecentTrackingEvent)
  {
    [(NSLock *)self->_trackingLock unlock];
    goto LABEL_113;
  }

  [(VOTElementManager *)self setLastElementChangeAction:3];
  [(VOTElementManager *)self setLastUserElementTouchTime:CFAbsoluteTimeGetCurrent()];
  mostRecentTrackingEvent = self->_mostRecentTrackingEvent;
  if (mostRecentTrackingEvent)
  {
    v6 = mostRecentTrackingEvent;

    v7 = self->_mostRecentTrackingEvent;
    self->_mostRecentTrackingEvent = 0;

    trackingCopy = v6;
  }

  [(NSLock *)self->_trackingLock unlock];
  [(VOTEvent *)trackingCopy touchPoint];
  v9 = v8;
  v11 = v10;
  if ([(VOTElementManager *)self _continueTrackingRoadElementWithPoint:?])
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
  }

  else
  {
    _currentElement = [(VOTElementManager *)self _copySideAppDividerElementIfApplicableForPoint:v9, v11];
  }

  v13 = _currentElement;
  if (!_currentElement)
  {
    v13 = [objc_allocWithZone(VOTElement) initWithPosition:{v9, v11}];
  }

  if (AXDeviceSupportsMultitasking())
  {
    fbSceneIdentifier = [v13 fbSceneIdentifier];
    _occludedMultitaskingApps = [(VOTElementManager *)self _occludedMultitaskingApps];
    v16 = [_occludedMultitaskingApps objectForKey:fbSceneIdentifier];
    v17 = objc_allocWithZone(VOTElement);
    _frontmostItemContainerElement = [(VOTElementManager *)self _frontmostItemContainerElement];
    v19 = [v17 initWithAXElement:_frontmostItemContainerElement];

    if (v19 && ([v19 frame], v66.x = v9, v66.y = v11, CGRectContainsPoint(v68, v66)) && (objc_msgSend(v13, "doesHaveTraits:", kAXSnapshotItemContainerTrait) & 1) != 0)
    {
      v20 = 0;
    }

    else
    {
      if (!v16)
      {
LABEL_20:

        goto LABEL_21;
      }

      v20 = [objc_allocWithZone(VOTElement) initWithAXElement:v16];
    }

    v13 = v20;
    goto LABEL_20;
  }

LABEL_21:
  [VOTSharedWorkspace convertDevicePointToZoomedPoint:{v9, v11}];
  self->_fingerLocation.x = v21;
  self->_fingerLocation.y = v22;
  [(VOTElementManager *)self _resetOtherTapInputModes];
  [(VOTElementManager *)self _resetSearchType];
  [(VOTElementManager *)self _resetRotorTextNavigation];
  [(VOTElementManager *)self _cancelPreviousElementSearch];
  v23 = VOTLogElement();
  if (os_log_type_enabled(v23, OS_LOG_TYPE_DEBUG))
  {
    sub_10012BCB0();
  }

  [(VOTElementManager *)self _stopReadAll];
  if ([v13 doesHaveTraits:kAXSpacerTrait])
  {

    v13 = 0;
  }

  v24 = kAXAllowsDirectInteractionTrait;
  if ([v13 doesHaveTraits:kAXAllowsDirectInteractionTrait])
  {
    [(NSMutableSet *)self->_directInteractionElements addObject:v13];
    if ([(VOTElementManager *)self inDirectTouchMode])
    {
      v25 = [(VOTEvent *)trackingCopy objectForIndex:108];
      isDownEvent = [v25 isDownEvent];

      if (isDownEvent)
      {
        [(VOTElementManager *)self setShouldTurnTrackingIntoDirectTouch:1];
      }
    }

    else
    {
      v27 = [objc_allocWithZone(VOTElement) initWithPosition:v13 startWithElement:{v9, v11}];
      v28 = v27;
      if (v27)
      {
        v29 = v27;

        v13 = v29;
      }
    }
  }

  _currentElement2 = [(VOTElementManager *)self _currentElement];
  v31 = _currentElement2;
  if (v13 | _currentElement2)
  {
    v32 = [_currentElement2 isEqual:v13];
  }

  else
  {
    v32 = 1;
  }

  if ([(VOTElementManager *)self _continueTrackingKeyboardKey:v13])
  {
    v33 = v31;

    v32 = 1;
    v13 = v33;
  }

  [v13 setShouldSkipValidateElement:1];
  if (v13)
  {
    if (sub_100050834())
    {
      v34 = [v13 isTouchContainer] ^ 1;
    }

    else
    {
      LOBYTE(v34) = 1;
    }
  }

  else
  {
    LOBYTE(v34) = 0;
  }

  self->_flags.focusIsOnElement = v34;
  v35 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging = [v35 ignoreLogging];

  if ((ignoreLogging & 1) == 0)
  {
    v37 = +[AXSubsystemVoiceOver identifier];
    v38 = AXLoggerForFacility();

    v39 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v38, v39))
    {
      v63 = v24;
      v40 = AXColorizeFormatLog();
      v61 = v13;
      v62 = v32;
      v60 = v31;
      v41 = _AXStringForArgs();
      v42 = v38;
      if (os_log_type_enabled(v42, v39))
      {
        *buf = 138543362;
        v65 = v41;
        _os_log_impl(&_mh_execute_header, v42, v39, "%{public}@", buf, 0xCu);
      }

      v24 = v63;
    }
  }

  if (v13)
  {
    v43 = 1;
  }

  else
  {
    v43 = v32;
  }

  if ((v43 & 1) == 0)
  {
    [v31 frame];
    v67.x = v9;
    v67.y = v11;
    if (CGRectContainsPoint(v69, v67) && [v31 doesHaveTraits:kAXWebContentTrait])
    {
      v13 = v31;
      LODWORD(v32) = 1;
    }

    else
    {
      LODWORD(v32) = 0;
      v13 = 0;
    }
  }

  isReadingContent = [v13 isReadingContent];
  if (![v13 doesHaveTraits:kAXTextAreaTrait] || (objc_msgSend(v13, "doesHaveTraits:", kAXStaticTextTrait) & 1) != 0)
  {
    v45 = 0;
    if (v13)
    {
      goto LABEL_59;
    }

LABEL_75:
    self->_flags.touchingOnNothing = 1;
    [(VOTElementManager *)self _echoNoElementForEvent:trackingCopy];
    v48 = +[VOTOutputManager outputManager];
    [v48 stopSpeakingAtBoundary:0];
    goto LABEL_76;
  }

  value = [v13 value];
  v45 = [value length] != 0;

  if (!v13)
  {
    goto LABEL_75;
  }

LABEL_59:
  if (!v32 || self->_flags.lastEventWasIdle || self->_flags.touchingOnNothing)
  {
    if (-[VOTElementManager inDirectTouchMode](self, "inDirectTouchMode") && [v13 doesHaveTraits:v24] && (objc_msgSend(v13, "avoidAnnouncingDirectTouchArea") & 1) != 0)
    {
      goto LABEL_69;
    }

    if ((isReadingContent | v45))
    {
      if (v32 & 1 | ((isReadingContent & 1) == 0))
      {
        if (v32)
        {
          goto LABEL_69;
        }
      }

      else if (self->_bookSubelement)
      {
LABEL_69:
        if (v45 && ![(VOTElementManager *)self _echoLineInElement:v13 forEvent:trackingCopy forDifferentElement:v32 ^ 1])
        {
          value2 = [v13 value];
          if ([value2 isAXAttributedString] && objc_msgSend(value2, "hasAttribute:", UIAccessibilityTokenPlaceholder))
          {
            [(VOTElementManager *)self _echoDifferentElement:v13 forEvent:trackingCopy];
          }

          else
          {
            [(VOTElementManager *)self _echoNoElementForEvent:trackingCopy];
          }
        }

        if (([v13 isTouchContainer] & 1) == 0)
        {
          self->_timeSpentOnNothing = -3061152000.0;
        }

        self->_flags.touchingOnNothing = !self->_flags.focusIsOnElement;
        currentSubElement = self->_currentSubElement;
        self->_currentSubElement = 0;

        goto LABEL_84;
      }
    }

    [(VOTElementManager *)self _echoDifferentElement:v13 forEvent:trackingCopy onlyOutputTouchContainerAndSounds:(isReadingContent | v45) & 1 shouldPlayGuideWireSound:1 isProtectedApp:0];
    goto LABEL_69;
  }

  if (!v45)
  {
    if ((isReadingContent & 1) == 0)
    {
      [(VOTElementManager *)self _echoSameElement:v13 forEvent:trackingCopy];
      self->_flags.touchingOnNothing = 0;
    }

    goto LABEL_84;
  }

  v59 = [[VOTElement alloc] initWithPosition:v13 startWithElement:v9, v11];
  v48 = v59;
  if (v59)
  {
    if (![(VOTElement *)v59 isEqual:self->_currentSubElement])
    {
      [(VOTElementManager *)self _echoDifferentElement:v48 forEvent:trackingCopy onlyOutputTouchContainerAndSounds:0 shouldPlayGuideWireSound:1 isProtectedApp:0];
      [(VOTElementManager *)self _setCurrentElement:v13];
      objc_storeStrong(&self->_currentSubElement, v48);
    }
  }

  else if (![(VOTElementManager *)self _echoLineInElement:v13 forEvent:trackingCopy forDifferentElement:0])
  {
    [(VOTElementManager *)self _echoNoElementForEvent:trackingCopy];
  }

LABEL_76:

LABEL_84:
  v50 = sub_100050834();
  if (v50)
  {
    if ([v13 isAccessibleElement])
    {
      LOBYTE(v50) = 0;
    }

    else
    {
      LOBYTE(v50) = [v13 isTouchContainer];
    }
  }

  if (v13 && (v50 & 1) == 0)
  {
    if (![(VOTElement *)self->_lastValidElement isEqual:v13])
    {
      objc_storeStrong(&self->_lastValidElement, v13);
    }

    [(VOTElementManager *)self _setCurrentElement:self->_lastValidElement isProtectedApp:0];
    v51 = self->_lastValidElement;

    v13 = v51;
  }

  if (isReadingContent)
  {
    [(VOTElementManager *)self _echoLineInBookElement:v13 forEvent:trackingCopy];
  }

  v52 = kAXAllowsNativeSlidingTrait;
  if ([v13 doesHaveTraits:kAXAllowsNativeSlidingTrait])
  {
    if (!self->_flags.wasSendingToNativeSlide && v13)
    {
      v53 = [v13 copy];
      if (v53)
      {
        v54 = [NSDictionary dictionaryWithObject:v53 forKey:@"element"];
      }

      else
      {
        v54 = 0;
      }

      v55 = +[NSNotificationCenter defaultCenter];
      [v55 postNotificationName:off_1001FDF08 object:0 userInfo:v54];

      self->_flags.wasSendingToNativeSlide = 1;
    }
  }

  else if (self->_flags.wasSendingToNativeSlide && ([v13 doesHaveTraits:v52] & 1) == 0)
  {
    [(VOTElementManager *)self _endNativeSliding:0];
  }

  if ([v13 doesHaveTraits:kAXLaunchIconTrait])
  {
    if (([v13 isInFolder] & 1) == 0)
    {
      v56 = [(VOTEvent *)trackingCopy objectForIndex:112];
      bOOLValue = [v56 BOOLValue];

      if ((bOOLValue & 1) == 0)
      {
        [(NSMutableArray *)self->_cachedLaunchIcons removeAllObjects];
      }
    }
  }

  [(VOTElementManager *)self hideVisualRotor];
  self->_lastItemSelectionFromTouch = CFAbsoluteTimeGetCurrent();
  self->_flags.lastEventWasIdle = 0;
  if ([VOTSharedWorkspace reachabilityActive] && !self->_flags.setReachabilityIsActiveWhileFingerDown)
  {
    [(SCRCTargetSelectorTimer *)self->_reachabilityWaitForTrackingTimer cancel];
    v58 = +[AXSpringBoardServer server];
    [v58 setReachabilityActive:1];

    self->_flags.setReachabilityIsActiveWhileFingerDown = 1;
  }

LABEL_113:
}

- (void)_handleKeyboardContinuousPathDidBegin:(id)begin
{
  self->_flags.continuousPathKeyboardBegan = 1;
  v3 = VOTLogCommon();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    *v6 = 0;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "Continuous path did begin", v6, 2u);
  }

  v4 = +[VOTOutputManager outputManager];
  [v4 playSoundFast:@"Sounds/VOTOrbSound1-OrbHW.aiff"];

  v5 = +[AXHapticFeedbackManager sharedManager];
  [v5 playHapticFeedbackForType:13];
}

- (void)_continuousPathIdleTimer:(id)timer
{
  v4 = VOTLogCommon();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_INFO))
  {
    continuousPathSuggestion = self->_continuousPathSuggestion;
    v17 = 138412290;
    v18 = continuousPathSuggestion;
    _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_INFO, "Continuous path idle timer fired: %@", &v17, 0xCu);
  }

  if (-[NSString length](self->_continuousPathSuggestion, "length") && (CFAbsoluteTimeGetCurrent() - *&qword_1001FECD8 > 1.0 || ([qword_1001FECE0 isEqualToString:self->_continuousPathSuggestion] & 1) == 0))
  {
    v6 = +[VOTOutputRequest createRequest];
    application = [(VOTElement *)self->_firstResponderElement application];
    currentSoftwareKeyboardLanguage = [application currentSoftwareKeyboardLanguage];
    [v6 setKeyboardLanguageHint:currentSoftwareKeyboardLanguage];

    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    v10 = selectedLanguage;
    if (selectedLanguage)
    {
      keyboardLanguageHint = selectedLanguage;
    }

    else
    {
      keyboardLanguageHint = [v6 keyboardLanguageHint];
    }

    v12 = keyboardLanguageHint;

    v13 = [v6 addString:self->_continuousPathSuggestion withLanguage:v12];
    lastAction = [v6 lastAction];
    [lastAction setObject:kCFBooleanTrue forVariant:50];

    [v6 setBrailleType:2];
    [v6 setGeneratesBraille:1];
    [(VOTElementManager *)self sendRequest:v6];
    v15 = [(NSString *)self->_continuousPathSuggestion copy];
    v16 = qword_1001FECE0;
    qword_1001FECE0 = v15;

    qword_1001FECD8 = CFAbsoluteTimeGetCurrent();
  }
}

- (void)_reachabilityWaitForTrackingTimeout
{
  v2 = +[AXSpringBoardServer server];
  [v2 setReachabilityActive:0];
}

- (void)handleReachabilityToggled
{
  if ([VOTSharedWorkspace reachabilityActive])
  {
    [(SCRCTargetSelectorTimer *)self->_reachabilityWaitForTrackingTimer dispatchAfterDelay:8.0];
  }

  [(VOTElementManager *)self updateCurrentElementFrame];
}

- (void)_handleTapAndHoldEventMonitor:(id)monitor
{
  monitorCopy = monitor;
  v5 = monitorCopy;
  if (self->_keyboardAlternativesVisible)
  {
    [monitorCopy touchPoint];
    SCRCMathGetDistanceBetweenPoints();
    if (v6 <= 15.0)
    {
      if ([(VOTElementManager *)self _shouldDismissKeyboardForMovingTooFarAlongYAxisWithEvent:v5])
      {
        [(VOTElementManager *)self _dismissAlternativeKeyboardKeys];
      }
    }

    else
    {
      [v5 touchPoint];
      self->_keyboardAlternativeVisibleTrackingPoint.x = v7;
      self->_keyboardAlternativeVisibleTrackingPoint.y = v8;
      [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer cancel];
      [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer dispatchAfterDelay:5.0];
    }
  }

  else if (self->_flags.continuousPathKeyboardBegan)
  {
    v9 = VOTLogCommon();
    if (os_log_type_enabled(v9, OS_LOG_TYPE_INFO))
    {
      isPending = [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isPending];
      v29 = 67109120;
      v30 = isPending;
      _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_INFO, "KB tracking: %d", &v29, 8u);
    }

    if ((![(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isPending]|| [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isCancelled]) && !self->_flags.isContinuousPathOutsideBounds)
    {
      v11 = VOTLogCommon();
      if (os_log_type_enabled(v11, OS_LOG_TYPE_INFO))
      {
        LOWORD(v29) = 0;
        _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_INFO, "Waiting to speak suggestions for continuous path", &v29, 2u);
      }

      [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer dispatchAfterDelay:0.45];
    }

    application = [(VOTElement *)self->_currentElement application];
    activeKeyboard = [application activeKeyboard];

    if ([activeKeyboard isKeyboardContinuousPathTracking])
    {
      [activeKeyboard frame];
      v15 = v14;
      v17 = v16;
      v19 = v18;
      v21 = v20;
      [v5 touchPoint];
      v33.x = v22;
      v33.y = v23;
      v34.origin.x = v15;
      v34.origin.y = v17;
      v34.size.width = v19;
      v34.size.height = v21;
      v24 = !CGRectContainsPoint(v34, v33);
    }

    else
    {
      v24 = 0;
    }

    v25 = VOTLogCommon();
    if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
    {
      isContinuousPathOutsideBounds = self->_flags.isContinuousPathOutsideBounds;
      v29 = 67109376;
      v30 = v24;
      v31 = 1024;
      v32 = isContinuousPathOutsideBounds;
      _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "Outside bounds for continuous path: %d (already out? %d)", &v29, 0xEu);
    }

    if (v24)
    {
      if (!self->_flags.isContinuousPathOutsideBounds)
      {
        v27 = +[AXHapticFeedbackManager sharedManager];
        [v27 playHapticFeedbackForType:16];

        self->_flags.isContinuousPathOutsideBounds = 1;
        [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer cancel];
      }
    }

    else
    {
      if (self->_flags.isContinuousPathOutsideBounds)
      {
        v28 = +[AXHapticFeedbackManager sharedManager];
        [v28 playHapticFeedbackForType:13];
      }

      self->_flags.isContinuousPathOutsideBounds = 0;
    }
  }
}

- (BOOL)_shouldDismissKeyboardForMovingTooFarAlongYAxisWithEvent:(id)event
{
  eventCopy = event;
  if ([VOTSharedWorkspace applicationOrientation] == 3 || objc_msgSend(VOTSharedWorkspace, "applicationOrientation") == 4)
  {
    x = self->_keyboardAlternativeVisibleStartPoint.x;
    [eventCopy touchPoint];
    v7 = x - v6;
  }

  else
  {
    y = self->_keyboardAlternativeVisibleStartPoint.y;
    [eventCopy touchPoint];
    v7 = y - v9;
  }

  v10 = fabs(v7) > 220.0;

  return v10;
}

- (id)_checkDataDetectorIfPresent:(CGRect)present element:(id)element includeLinks:(BOOL)links
{
  height = present.size.height;
  width = present.size.width;
  y = present.origin.y;
  x = present.origin.x;
  elementCopy = element;
  v26.origin.x = x;
  v26.origin.y = y;
  v26.size.width = width;
  v26.size.height = height;
  MidX = CGRectGetMidX(v26);
  v27.origin.x = x;
  v27.origin.y = y;
  v27.size.width = width;
  v27.size.height = height;
  MidY = CGRectGetMidY(v27);
  v13 = +[VOTElement systemWideElement];
  [v13 convertPoint:objc_msgSend(elementCopy toContextId:{"windowContextId"), MidX, MidY}];
  v15 = v14;
  v17 = v16;

  v18 = [elementCopy dataDetectorURL:{v15, v17}];

  if (v18)
  {
    v19 = @"address";
    if (([(__CFString *)v18 hasPrefix:@"address"]& 1) != 0)
    {
LABEL_9:

      v18 = v19;
LABEL_10:
      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v21 = off_1001FDDD0;
      v22 = [NSString stringWithFormat:@"data-detector.%@", v18];
      v23 = sub_1000516CC(v21, v22, 0, selectedLanguage);

      goto LABEL_14;
    }

    if (([(__CFString *)v18 hasPrefix:@"event"]& 1) != 0)
    {
      v19 = @"calendar";
      goto LABEL_9;
    }

    if (([(__CFString *)v18 hasPrefix:@"tracking-number"]& 1) != 0)
    {
      v19 = @"track";
      goto LABEL_9;
    }

    if (([(__CFString *)v18 hasPrefix:@"item-number"]& 1) != 0)
    {
      v19 = @"item";
      goto LABEL_9;
    }

    if (([(__CFString *)v18 hasPrefix:@"http"]& 1) == 0)
    {
      v19 = @"mailto";
      if (([(__CFString *)v18 hasPrefix:@"mailto"]& 1) == 0)
      {
        v19 = @"tel";
        if (([(__CFString *)v18 hasPrefix:@"tel"]& 1) == 0)
        {
          v19 = @"facetime";
          if (([(__CFString *)v18 hasPrefix:@"facetime"]& 1) == 0)
          {
            v19 = @"ibooks";
            if (([(__CFString *)v18 hasPrefix:@"ibooks"]& 1) == 0)
            {
              goto LABEL_10;
            }
          }
        }
      }

      goto LABEL_9;
    }

    v18 = @"http";
    if (links)
    {
      goto LABEL_10;
    }
  }

  v23 = 0;
LABEL_14:

  return v23;
}

- (void)_outputDataDetectorIfPresent:(CGRect)present element:(id)element includeLinks:(BOOL)links
{
  v7 = [(VOTElementManager *)self _checkDataDetectorIfPresent:element element:links includeLinks:present.origin.x, present.origin.y, present.size.width, present.size.height];
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v6 = sub_1000095FC(v7, 2, selectedLanguage);
}

- (BOOL)_echoLineInElement:(id)element forEvent:(id)event forDifferentElement:(BOOL)differentElement
{
  differentElementCopy = differentElement;
  elementCopy = element;
  [event touchPoint];
  v10 = v9;
  v12 = v11;
  if (([VOTSharedWorkspace inUnitTestMode] & 1) == 0)
  {
    [VOTSharedWorkspace convertDevicePointToZoomedPoint:{v10, v12}];
    v14 = v13;
    v16 = v15;
    v17 = +[VOTElement systemWideElement];
    [v17 convertPoint:objc_msgSend(elementCopy toContextId:{"windowContextId"), v14, v16}];
    v10 = v18;
    v12 = v19;
  }

  v20 = [elementCopy lineNumberAndColumnForPoint:{v10, v12}];
  v21 = v20;
  if (v20)
  {
    if ([v20 isEqual:self->_lastSeenLineAndColumn])
    {
LABEL_45:
      v46 = 1;
      goto LABEL_46;
    }

    v22 = [v21 objectForKey:@"lineNumber"];
    intValue = [v22 intValue];

    if (intValue != -1)
    {
      v90 = differentElementCopy;
      [(VOTElementManager *)self _setLastSeenLineAndColumn:v21];
      v89 = [elementCopy doesHaveTraits:kAXIsEditingTrait];
      v24 = [elementCopy rangeForLineNumberAndColumn:self->_lastSeenLineAndColumn];
      v26 = v25;
      v97 = [elementCopy attributedValueForRange:{v24, v25}];
      [elementCopy boundsForRange:{v24, v26}];
      v28 = v27;
      v30 = v29;
      v32 = v31;
      v34 = v33;
      v35 = +[VOTElement systemWideElement];
      [v35 convertRect:objc_msgSend(elementCopy fromContextId:{"windowContextId"), v28, v30, v32, v34}];
      v37 = v36;
      v39 = v38;
      v41 = v40;
      v43 = v42;

      self->_lineFrame.origin.x = v37;
      self->_lineFrame.origin.y = v39;
      self->_lineFrame.size.width = v41;
      self->_lineFrame.size.height = v43;
      v44 = [(VOTElementManager *)self _checkDataDetectorIfPresent:elementCopy element:1 includeLinks:v37, v39, v41, v43];
      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      if (self->_lastSeenLineStartPositionForFontProperties == v24)
      {
        v45 = 0;
      }

      else
      {
        v45 = [(VOTElementManager *)self _listItemLabelForAXAttributedString:v97];
      }

      v94 = v45;
      self->_lastSeenLineStartPositionForFontProperties = v24;
      v47 = [(VOTElementManager *)self _textAttachmentElementForString:v97 inRange:0, v26];
      v95 = v24;
      v92 = v44;
      v93 = v26;
      v91 = v47;
      if ([(VOTElementManager *)self stringIsTextAttachment:v97])
      {
        v48 = [AXAttributedString alloc];
        if (v47)
        {
          label = [v47 label];
          value = [v47 value];
          v51 = __AXStringForVariables();
          v52 = [v48 initWithString:{v51, value, @"__AXStringForVariablesSentinel"}];

          v53 = 0;
          v97 = v52;
        }

        else
        {
          label = sub_1000511CC(off_1001FDDD0, @"attachment", 0);
          v60 = [v48 initWithString:label];

          v53 = 0;
          v97 = v60;
        }

LABEL_20:

        if ([elementCopy doesHaveTraits:kAXTextAreaTrait])
        {
          self->_elementUnitIndex = v95;
        }

        if (v89)
        {
          [(VOTElementManager *)self _elementSelectionRangeDidChange:v95 + v93 reason:0, 0];
          if (!v93)
          {
            value2 = [elementCopy value];
            v62 = [value2 length];

            if (v95 < v62)
            {
              [(VOTElementManager *)self _elementSelectionRangeDidChange:self->_elementSelectionRangeBufferInternal.location + 1 reason:self->_elementSelectionRangeBufferInternal.length, 0];
            }
          }
        }

        v63 = [objc_allocWithZone(VOTOutputRequest) init];
        if ([v94 length])
        {
          v64 = [v63 addString:v94];
          lastAction = [v63 lastAction];
          LODWORD(v66) = 1062836634;
          v67 = [NSNumber numberWithFloat:v66];
          [lastAction setObject:v67 forVariant:32];
        }

        if (v90)
        {
          label2 = [elementCopy label];
          v69 = [v63 addString:label2];

          if ([VOTSharedWorkspace typingPitchChangeEnabled])
          {
            lastAction2 = [v63 lastAction];
            LODWORD(v71) = 1062836634;
            v72 = [NSNumber numberWithFloat:v71];
            [lastAction2 setObject:v72 forVariant:32];
          }
        }

        v73 = [(VOTElementManager *)self stringIsTextAttachment:v97];
        if ((v73 & 1) == 0)
        {
          v74 = [NSCharacterSet characterSetWithCharactersInString:@"\r\n"];
          v75 = [v97 stringByTrimmingCharactersInSet:v74];

          v97 = v75;
        }

        if ([v97 length])
        {
          v76 = [v63 addString:v97];
          lastAction3 = [v63 lastAction];
          [lastAction3 setPerformPunctuationTranslation:v73 ^ 1];

          lastAction4 = [v63 lastAction];
          [lastAction4 setReplaceCommas:v73 ^ 1];

          language = [elementCopy language];

          if (!language)
          {
LABEL_38:
            if ([v53 length])
            {
              v82 = [v63 addString:v53];
              lastAction5 = [v63 lastAction];
              LODWORD(v84) = 1062836634;
              v85 = [NSNumber numberWithFloat:v84];
              [lastAction5 setObject:v85 forVariant:32];
            }

            [v63 setGeneratesBraille:1];
            [v63 setBrailleLineRange:{v95, v93}];
            [v63 setBrailleType:4];
            [(VOTElementManager *)self sendRequest:v63];
            if (v95 != 0x7FFFFFFF)
            {
              v86 = sub_1000095FC(v92, 2, selectedLanguage);
              v99.origin.x = CGRectZero.origin.x;
              v99.origin.y = CGRectZero.origin.y;
              v99.size.width = CGRectZero.size.width;
              v99.size.height = CGRectZero.size.height;
              v98.origin.x = v37;
              v98.origin.y = v39;
              v98.size.width = v41;
              v98.size.height = v43;
              if (!CGRectEqualToRect(v98, v99))
              {
                v87 = +[VOTDisplayManager displayManager];
                [v87 setCursorFrame:{v37, v39, v41, v43}];

                self->_textRangeBeingDisplayed = 1;
              }

              self->_highlightedCharacterRange.location = v95;
              self->_highlightedCharacterRange.length = v93;
            }

            goto LABEL_45;
          }

          language2 = [elementCopy language];
          [v63 setLanguage:language2];
        }

        else
        {
          language2 = sub_1000516CC(off_1001FDDD0, @"empty.line", 0, selectedLanguage);
          v81 = [v63 addString:language2];
        }

        goto LABEL_38;
      }

      [VOTSharedWorkspace addMisspellingsForString:v97];
      label = [v97 coalescedFontAttributes];
      if (v44)
      {
        v54 = sub_1000516CC(off_1001FDDD0, @"data-detector.http", 0, selectedLanguage);
        v55 = [v44 isEqualToString:v54];

        lastSeenFontProperties = self->_lastSeenFontProperties;
        if (v55)
        {
          selfCopy2 = self;
          v58 = label;
          v59 = 0;
LABEL_19:
          v53 = [(VOTElementManager *)selfCopy2 _computeChangedFontAttributes:v58 storedAttributes:lastSeenFontProperties haveMisspellCheck:v59];
          goto LABEL_20;
        }
      }

      else
      {
        lastSeenFontProperties = self->_lastSeenFontProperties;
      }

      selfCopy2 = self;
      v58 = label;
      v59 = 1;
      goto LABEL_19;
    }
  }

  v46 = 0;
LABEL_46:

  return v46;
}

- (void)_echoStatusBarStatus:(id)status
{
  if ([status doesHaveTraits:kAXStatusBarElementTrait])
  {
    inStatusBar = self->_flags.inStatusBar;
    self->_flags.inStatusBar = 1;
    if (!inStatusBar)
    {
      v7 = [objc_allocWithZone(VOTOutputRequest) init];
      v5 = sub_1000511CC(off_1001FDDD0, @"entered.status.bar", 0);
      v6 = [v7 addString:v5];

      [v7 setCannotBeInterrupted:1];
      [(VOTElementManager *)self sendRequest:v7];
    }
  }

  else
  {
    self->_flags.inStatusBar = 0;
  }
}

- (void)_finishPassthroughMode
{
  v3 = +[VOTElement systemWideElement];
  [v3 postFingerLiftAtPoint:0 withContextId:{self->_passthroughFinish.x, self->_passthroughFinish.y}];

  v4 = CGPointZero;
  self->_passthroughOffset = CGPointZero;
  self->_passthroughStart = v4;
  self->_passthroughFinish = v4;
  self->_flags.inPassthroughMode = 0;
}

- (void)_processPassthroughAllowedWithEvent:(id)event initialTouch:(BOOL)touch
{
  touchCopy = touch;
  eventCopy = event;
  _currentElement = [(VOTElementManager *)self _currentElement];
  [_currentElement centerPoint];
  v8 = v7;
  v10 = v9;
  v11 = [(VOTElementManager *)self _useLineFrameBoundsForTouch:_currentElement];
  if (v8 == CGPointZero.x && v10 == CGPointZero.y)
  {
    [eventCopy touchPoint];
    MidX = v15;
    MidY = v16;
  }

  else if (v11)
  {
    MidX = CGRectGetMidX(self->_lineFrame);
    MidY = CGRectGetMidY(self->_lineFrame);
  }

  else
  {
    [eventCopy touchPoint];
    v18 = v17 - self->_passthroughStart.x;
    v20 = v19 - self->_passthroughStart.y;
    self->_passthroughOffset.x = v18;
    self->_passthroughOffset.y = v20;
    MidX = v8 + v18;
    MidY = v10 + v20;
  }

  [_currentElement frame];
  x = v29.origin.x;
  y = v29.origin.y;
  width = v29.size.width;
  height = v29.size.height;
  if (MidX >= CGRectGetMaxX(v29))
  {
    v30.origin.x = x;
    v30.origin.y = y;
    v30.size.width = width;
    v30.size.height = height;
    MidX = CGRectGetMaxX(v30) + -1.0;
  }

  v31.origin.x = x;
  v31.origin.y = y;
  v31.size.width = width;
  v31.size.height = height;
  if (MidY >= CGRectGetMaxY(v31))
  {
    v32.origin.x = x;
    v32.origin.y = y;
    v32.size.width = width;
    v32.size.height = height;
    MidY = CGRectGetMaxY(v32) + -1.0;
  }

  self->_passthroughFinish.x = MidX;
  self->_passthroughFinish.y = MidY;
  v25 = +[VOTElement systemWideElement];
  [eventCopy touchForce];
  if (touchCopy)
  {
    [v25 postFingerTouchAtPoint:0 withForce:MidX withContextId:{MidY, v26}];
  }

  else
  {
    [v25 postFingerDragAtPoint:0 withForce:MidX withContextId:{MidY, v26}];
  }
}

- (void)_switchToOtherRoad
{
  if (self->_upcomingRoadElement)
  {
    v8 = +[VOTOutputRequest createRequest];
    v3 = sub_1000511CC(off_1001FDDD0, @"map-interaction.switch.to.road", 0);
    [(VOTElementManager *)self _addFormattedStringToRequest:v8 formattedString:v3 withElement:self->_upcomingRoadElement];
    [(VOTElementManager *)self _setCurrentElement:self->_upcomingRoadElement];
    v4 = +[VOTDisplayManager displayManager];
    [v4 setCursorFrameForElement:self->_currentElement];

    [v8 send];
    upcomingRoadElement = self->_upcomingRoadElement;
    self->_upcomingRoadElement = 0;

    self->_firstRoadTravelPoint = self->_lastRoadTravelPoint;
    self->_switchedToRoadTime = CFAbsoluteTimeGetCurrent();
    self->_intersectionTravelPoint = CGPointZero;
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent DidFocusOnElement];
    [v6 sendEvent:v7];
  }
}

- (void)_addFormattedStringToRequest:(id)request formattedString:(id)string withElement:(id)element
{
  requestCopy = request;
  stringCopy = string;
  elementCopy = element;
  label = [elementCopy label];
  if (label)
  {
    v10 = label;
  }

  else
  {
    v10 = &stru_1001CBF90;
  }

  v11 = AXCFormattedString();
  v12 = [AXAttributedString axAttributedStringWithString:v11, v10];
  language = [elementCopy language];

  if (language)
  {
    v14 = [stringCopy length];
    v15 = [v11 length];
    v16 = v15 - [stringCopy length];
    language2 = [elementCopy language];
    [v12 setAttribute:language2 forKey:UIAccessibilityTokenLanguage withRange:{v14 + 1, v16}];
  }

  v18 = [requestCopy addAttributedString:v12];
}

- (void)_handleMapSameElement:(id)element forEvent:(id)event
{
  elementCopy = element;
  [event touchPoint];
  v8 = v7;
  v10 = v9;
  touchContainer = [elementCopy touchContainer];
  [touchContainer mapsExplorationRecordTouchpoint:{v8, v10}];

  if (self->_startTrackingRoadRequest)
  {
    self->_explorationStartPoint.x = v8;
    p_y = &self->_explorationStartPoint.y;
LABEL_50:
    *p_y = v10;
    goto LABEL_51;
  }

  if (self->_shouldContinueRoadTracking)
  {
    SCRCMathGetDistanceBetweenPoints();
    y = CGPointZero.y;
    if (CGPointZero.x == self->_lastRoadTravelPoint.x && y == self->_lastRoadTravelPoint.y)
    {
      goto LABEL_36;
    }

    v16 = v13;
    v17 = y == self->_firstRoadTravelPoint.y && CGPointZero.x == self->_firstRoadTravelPoint.x;
    v18 = !v17 && v16 <= 6.0;
    if (v18 || CFAbsoluteTimeGetCurrent() - self->_switchedToRoadTime <= 2.0)
    {
      goto LABEL_36;
    }

    v47[5] = 0;
    v47[6] = 0;
    SCRCMathGetVectorAndDistanceForPoints();
    SCRCMathUpdateAngleAverage();
    SCRCMathGetAverage();
    v20 = v19;
    *&v21 = v20;
    v22 = [(VOTElement *)self->_currentElement upcomingRoadsAtPoint:v8 withDirection:v10, v21];
    firstObject = [v22 firstObject];
    if (v16 <= 20.0)
    {
      p_approachingEndOfRoad = &self->_approachingEndOfRoad;
      v26 = -1.0;
    }

    else
    {
      *&v24 = v20;
      [(VOTElement *)self->_currentElement distanceToEndOfRoad:v8 withDirection:v10, v24];
      v26 = v25;
      p_approachingEndOfRoad = &self->_approachingEndOfRoad;
      if (self->_approachingEndOfRoad && v25 > 20.0)
      {
        *p_approachingEndOfRoad = 0;
      }
    }

    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    if (v26 < 20.0 && v26 > 0.0 && !*p_approachingEndOfRoad)
    {
      v29 = +[VOTOutputRequest createRequest];
      endOfRoadApproachingRequest = self->_endOfRoadApproachingRequest;
      self->_endOfRoadApproachingRequest = v29;

      v31 = self->_endOfRoadApproachingRequest;
      v32 = sub_1000516CC(off_1001FDDD0, @"approaching.end.of.road", 0, selectedLanguage);
      v33 = [(VOTOutputRequest *)v31 addString:v32 withLanguage:selectedLanguage];

      self->_approachingEndOfRoad = 1;
      [(VOTOutputRequest *)self->_endOfRoadApproachingRequest setCompletionDelegate:self];
      [(VOTOutputRequest *)self->_endOfRoadApproachingRequest setDoesNotInterrupt:1];
      [(VOTOutputRequest *)self->_endOfRoadApproachingRequest send];
    }

    if (firstObject)
    {
      if (![(VOTElement *)self->_upcomingRoadElement isEqual:firstObject])
      {
        v34 = +[VOTOutputRequest createRequest];
        switchRoadsOutputRequest = self->_switchRoadsOutputRequest;
        self->_switchRoadsOutputRequest = v34;

        upcomingRoadElement = sub_1000516CC(off_1001FDDD0, @"map-interaction.upcoming.road.juncture", 0, selectedLanguage);
        [(VOTElementManager *)self _addFormattedStringToRequest:self->_switchRoadsOutputRequest formattedString:upcomingRoadElement withElement:firstObject];
        lastAction = [(VOTOutputRequest *)self->_switchRoadsOutputRequest lastAction];
        LODWORD(v38) = 1062836634;
        v39 = [NSNumber numberWithFloat:v38];
        [lastAction setObject:v39 forVariant:32];

        if ([v22 count] == 2)
        {
          v40 = [v22 objectAtIndex:1];
          if (v40)
          {
            v41 = sub_1000511CC(off_1001FDDD0, @"map-interaction.next.road", 0);
            [(VOTElementManager *)self _addFormattedStringToRequest:self->_switchRoadsOutputRequest formattedString:v41 withElement:v40];
          }
        }

        [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCompletionDelegate:self];
        [(VOTOutputRequest *)self->_switchRoadsOutputRequest setDoesNotInterrupt:0];
        [(VOTOutputRequest *)self->_switchRoadsOutputRequest send];
        self->_intersectionTravelPoint.x = v8;
        self->_intersectionTravelPoint.y = v10;
        [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer cancel];
        objc_storeStrong(&self->_upcomingRoadElement, firstObject);
        goto LABEL_34;
      }
    }

    else if (!self->_switchRoadsOutputRequest)
    {
      upcomingRoadElement = self->_upcomingRoadElement;
      self->_upcomingRoadElement = 0;
LABEL_34:
    }

    self->_firstRoadTravelPoint = CGPointZero;

LABEL_36:
    if (self->_intersectionTravelPoint.x != CGPointZero.x || self->_intersectionTravelPoint.y != y)
    {
      SCRCMathGetDistanceBetweenPoints();
      if (v43 > 50.0 && self->_switchRoadsOutputRequest && self->_endOfRoadApproachingRequest)
      {
        v44 = +[VOTOutputManager outputManager];
        [v44 stopSpeakingAtBoundary:0];
      }
    }

    p_y = &self->_lastRoadTravelPoint.y;
    if (!self->_playingMapSound)
    {
      if ([elementCopy lastHitTestNearBorder])
      {
        v45 = @"Sounds/RoadWalkingNearBorder.aiff";
      }

      else
      {
        v45 = @"Sounds/RoadWalking.aiff";
      }

      self->_playingMapSound = 1;
      v46 = +[VOTOutputManager outputManager];
      v47[0] = _NSConcreteStackBlock;
      v47[1] = 3221225472;
      v47[2] = sub_1000930C4;
      v47[3] = &unk_1001C7890;
      v47[4] = self;
      [v46 playSoundFast:v45 completionBlock:v47];
    }

    self->_lastRoadTravelPoint.x = v8;
    goto LABEL_50;
  }

LABEL_51:
}

- (void)_echoSameElement:(id)element forEvent:(id)event
{
  elementCopy = element;
  eventCopy = event;
  if ([elementCopy mapFeatureType] == 1)
  {
    [(VOTElementManager *)self _handleMapSameElement:elementCopy forEvent:eventCopy];
  }
}

- (void)_echoNoElementForEvent:(id)event
{
  [event time];
  v5 = v4;
  timeSpentOnNothing = self->_timeSpentOnNothing;
  if (timeSpentOnNothing == -3061152000.0)
  {
    p_timeSpentOnNothing = &self->_timeSpentOnNothing;
LABEL_6:
    *p_timeSpentOnNothing = v5;
    goto LABEL_7;
  }

  if (v5 - timeSpentOnNothing > 0.025)
  {
    p_timeSpentOnNothing = &self->_lastNothingSoundTime;
    if (v5 - self->_lastNothingSoundTime > 0.100000001)
    {
      v8 = +[VOTOutputManager outputManager];
      v9 = +[VOSOutputEvent NoItemExists];
      [v8 sendEvent:v9];

      v10 = +[VOTDisplayManager displayManager];
      [v10 setCursorFrameForElement:0];

      self->_timeSpentOnNothing = -3061152000.0;
      goto LABEL_6;
    }
  }

LABEL_7:
  self->_flags.elementCenterSoundPlaying = 0;
}

- (id)_echoDifferentTouchContainer:(id)container forEvent:(id)event
{
  containerCopy = container;
  eventCopy = event;
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  isTouchContainer = [containerCopy isTouchContainer];
  if (sub_100050834() && isTouchContainer)
  {
    if (![(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer isPending]|| [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer isCancelled])
    {
      [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer dispatchAfterDelay:0.5];
    }

    touchContainer = [(VOTElementManager *)self touchContainer];
    v10 = [containerCopy isEqual:touchContainer];

    if (v10)
    {
      [(VOTElementManager *)self _echoNoElementForEvent:eventCopy];
      v11 = +[NSNull null];
      goto LABEL_12;
    }

    if (([VOTSharedWorkspace containerOutputFeedback] & 4) != 0)
    {
      v12 = +[VOTOutputManager outputManager];
      v13 = +[VOSOutputEvent DidEnterTouchContainer];
      [v12 sendEvent:v13];
    }

    [(VOTElementManager *)self setTouchContainer:containerCopy];
    [(VOTElementManager *)self _setCurrentElement:0];
    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
    [WeakRetained currentElementDidUpdate:self->_touchContainer];
  }

  v11 = [(VOTElementManager *)self _updateTouchContainerForElement:containerCopy playSound:1];
LABEL_12:
  v15 = v11;

  return v15;
}

- (BOOL)_addElementCommunityNameIfNeededToRequest:(id)request oldElementCommunity:(id)community newElementCommunity:(id)elementCommunity element:(id)element
{
  requestCopy = request;
  communityCopy = community;
  elementCommunityCopy = elementCommunity;
  elementCopy = element;
  v14 = 0;
  if (communityCopy && elementCommunityCopy)
  {
    if ([elementCommunityCopy isEqual:communityCopy])
    {
      goto LABEL_5;
    }

    _sideAppDividerElement = [(VOTElementManager *)self _sideAppDividerElement];
    v16 = [elementCommunityCopy isEqual:_sideAppDividerElement];

    if (v16)
    {
      goto LABEL_5;
    }

    _additionalElementCommunities = [(VOTElementManager *)self _additionalElementCommunities];
    _currentMedusaApplications = [(VOTElementManager *)self _currentMedusaApplications];
    if ([_currentMedusaApplications count] > 1 || objc_msgSend(_additionalElementCommunities, "containsObject:", elementCommunityCopy))
    {
    }

    else
    {
      v33 = [_additionalElementCommunities containsObject:communityCopy];

      if (!v33)
      {
LABEL_5:
        v14 = 0;
        goto LABEL_17;
      }
    }

    label = [elementCommunityCopy label];
    v20 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
    v21 = [label stringByTrimmingCharactersInSet:v20];

    v22 = [v21 length];
    v14 = v22 != 0;
    if (v22)
    {
      v23 = [requestCopy addString:v21];
      fbSceneIdentifier = [elementCopy fbSceneIdentifier];
      if (fbSceneIdentifier)
      {
        _activeSceneIdentifier = [(VOTElementManager *)self _activeSceneIdentifier];
        v26 = [fbSceneIdentifier isEqualToString:_activeSceneIdentifier];

        if (v26)
        {
          v27 = sub_100053524(@"active.window");
          v28 = [requestCopy addString:v27];
        }
      }

      if ([VOTSharedWorkspace typingPitchChangeEnabled])
      {
        lastAction = [requestCopy lastAction];
        LODWORD(v30) = 1062836634;
        v31 = [NSNumber numberWithFloat:v30];
        [lastAction setObject:v31 forVariant:32];
      }
    }
  }

LABEL_17:

  return v14;
}

- (id)_getSpeakableContainerForContainer:(id)container
{
  containerCopy = container;
  label = [containerCopy label];
  v5 = [label length];

  if (v5)
  {
    touchContainerParent = containerCopy;
  }

  else
  {
    touchContainerParent = [containerCopy touchContainerParent];
    if (touchContainerParent)
    {
      do
      {
        label2 = [touchContainerParent label];
        v9 = [label2 length];

        if (v9)
        {
          break;
        }

        v6TouchContainerParent = [touchContainerParent touchContainerParent];
        v11 = [v6TouchContainerParent isEqual:touchContainerParent];

        if (v11)
        {

          touchContainerParent = 0;
          break;
        }

        touchContainerParent = v6TouchContainerParent;
      }

      while (v6TouchContainerParent);
    }
  }

  return touchContainerParent;
}

- (void)_echoDifferentElement:(id)element forEvent:(id)event onlyOutputTouchContainerAndSounds:(BOOL)sounds canSetAsCurrentElement:(BOOL)currentElement shouldPlayGuideWireSound:(BOOL)sound isProtectedApp:(BOOL)app includeHint:(BOOL)hint boundaryHit:(BOOL)self0
{
  appCopy = app;
  soundCopy = sound;
  currentElementCopy = currentElement;
  elementCopy = element;
  eventCopy = event;
  if ([VOTSharedWorkspace navigationStyleHonorsGroups] && (objc_msgSend(elementCopy, "isAccessibleGroup") & 1) != 0)
  {
    command = [eventCopy command];
    v18 = [command isEqualToString:kVOTEventCommandTracking];

    isTouchContainer = [elementCopy isTouchContainer] & v18;
    if (!v18)
    {
      touchContainer = 0;
      v20 = 0;
      v21 = 0;
      if (!soundCopy)
      {
        goto LABEL_12;
      }

LABEL_10:
      if ([elementCopy shouldPlaySoundWhenFocused])
      {
        v23 = +[VOTOutputManager outputManager];
        v24 = +[VOSOutputEvent DidFocusOnElement];
        [v23 sendEvent:v24];
      }

LABEL_12:
      if (sub_100050834() && ([elementCopy isAccessibleElement] & 1) == 0)
      {
        v25 = v21 & [elementCopy isTouchContainer];
      }

      else
      {
        v25 = 0;
      }

      _currentElement = [(VOTElementManager *)self _currentElement];
      mostRecentElementCommunity = [(VOTElementManager *)self mostRecentElementCommunity];
      if (AXDeviceHasJindo())
      {
        jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
        bundleIdentifier = [elementCopy bundleIdentifier];
        if (-[NSArray containsObject:](jindoAppBundleIdentifiers, "containsObject:", bundleIdentifier) && ([elementCopy isInJindoWindow] & 1) == 0)
        {
          isInAppSwitcher = [elementCopy isInAppSwitcher];

          if ((isInAppSwitcher & 1) == 0)
          {
LABEL_110:

            goto LABEL_111;
          }
        }

        else
        {
        }
      }

      if (((v25 | !currentElementCopy) & 1) == 0)
      {
        [(VOTElementManager *)self _setCurrentElement:elementCopy isProtectedApp:appCopy];
      }

      if ((isTouchContainer | !currentElementCopy))
      {
        [(VOTElementRotor *)self->_elementRotor updateRotorForElement:elementCopy shouldPreserveRotorNavigation:0 firstResponder:self->_firstResponderElement];
        if (sounds)
        {
          goto LABEL_97;
        }
      }

      else
      {
        v28 = +[VOTDisplayManager displayManager];
        [v28 setCursorFrameForElement:elementCopy];

        [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer cancel];
        if (sounds)
        {
          goto LABEL_97;
        }
      }

      v29 = +[VOTOutputManager outputManager];
      [v29 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

      v30 = [objc_allocWithZone(VOTOutputRequest) init];
      if ([eventCopy isGuideElementMovementEvent])
      {
        guideElementHeaderText = [elementCopy guideElementHeaderText];
        if ([guideElementHeaderText length] && (objc_msgSend(guideElementHeaderText, "isEqualToString:", self->_lastSpokenGuideElementHeaderText) & 1) == 0)
        {
          v32 = [[AXAttributedString alloc] initWithString:guideElementHeaderText];
          [v32 setAttribute:&off_1001D9A30 forKey:AXUIAccessibilitySpeechAttributePitch];
          v33 = [v30 addAttributedString:v32];
          objc_storeStrong(&self->_lastSpokenGuideElementHeaderText, guideElementHeaderText);
        }
      }

      v92 = [(VOTElementManager *)self _elementCommunityForElement:elementCopy];
      [VOTElementManager _addElementCommunityNameIfNeededToRequest:"_addElementCommunityNameIfNeededToRequest:oldElementCommunity:newElementCommunity:element:" oldElementCommunity:v30 newElementCommunity:mostRecentElementCommunity element:?];
      v34 = kAXWebContentTrait;
      if ([elementCopy doesHaveAllTraits:kAXWebContentTrait])
      {
        v35 = [elementCopy containedIn:1];
      }

      else
      {
        v35 = 0;
      }

      v93 = v30;
      if ([elementCopy doesHaveAllTraits:v34] && objc_msgSend(elementCopy, "containedIn:", 8))
      {
        label = [elementCopy label];
        label2 = [v20 label];
        v38 = [label isEqual:label2];
      }

      else
      {
        v38 = 0;
      }

      v39 = [(VOTElementManager *)self _getSpeakableContainerForContainer:v20];
      v40 = [(VOTElementManager *)self _getSpeakableContainerForContainer:touchContainer];
      command2 = [eventCopy command];
      v42 = [command2 isEqualToString:kVOTEventCommandMoveIn];

      if (v42)
      {
        groupedParent = [elementCopy groupedParent];

        v20 = groupedParent;
        v40 = 0;
        v39 = v20;
      }

      v89 = v40;
      if (v20 && (([v20 isEqual:{elementCopy, v40}] | v35 | v38) & 1) == 0)
      {
        v44 = [v39 isEqual:v40] ^ 1;
        if (!v39)
        {
          LOBYTE(v44) = 1;
        }
      }

      else
      {
        LOBYTE(v44) = 0;
      }

      if (v39)
      {
        v45 = v42;
      }

      else
      {
        v45 = 0;
      }

      if ((v44 & 1) != 0 || v45)
      {
        v46 = sub_100050834();
        v47 = 0x4000;
        if (v46)
        {
          v47 = 16386;
        }

        v48 = 0x1000000000;
        if (!v45)
        {
          v48 = 0;
        }

        v49 = v47 | v48;
        if (v39)
        {
          v50 = v39;

          v20 = v50;
        }

        else if (![v20 includeRoleOnlyForGroupNavigation])
        {
          v49 |= 0x1000000uLL;
        }

        containerOutputFeedback = [VOTSharedWorkspace containerOutputFeedback];
        v91 = v20;
        if ((containerOutputFeedback & 2) != 0)
        {
          [(VOTElementManager *)self _addDescription:v20 toRequest:v93 withOptions:v49];
          if ((containerOutputFeedback & 8) != 0 && [VOTSharedWorkspace typingPitchChangeEnabled])
          {
            lastAction = [v93 lastAction];
            LODWORD(v54) = 1062836634;
            v55 = [NSNumber numberWithFloat:v54];
            [lastAction setObject:v55 forVariant:32];
          }

          lastAction2 = [v93 lastAction];
          [lastAction2 setObject:&__kCFBooleanTrue forVariant:68];
        }
      }

      else
      {
        v91 = v20;
      }

      keyboardKeyAllowsTouchTyping = [elementCopy keyboardKeyAllowsTouchTyping];
      if (hit)
      {
        v58 = 0x20000000;
      }

      else
      {
        v58 = 0;
      }

      command3 = [eventCopy command];
      v60 = [command3 isEqualToString:kVOTEventCommandMoveOut];

      if (v60)
      {
        v58 |= 0x2000000000uLL;
      }

      if (hint)
      {
        v61 = [(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:elementCopy];
        v62 = 2050;
        if (v61)
        {
          v62 = 0x200000802;
        }

        v58 |= v62;
      }

      isDragActive = [(AXDragManager *)self->_dragManager isDragActive];
      [(VOTElementManager *)self _prepareElementOutputHeaders:elementCopy currentElement:_currentElement request:v93];
      blockquoteLevel = [elementCopy blockquoteLevel];
      blockquoteLevel2 = [_currentElement blockquoteLevel];
      if (!appCopy)
      {
        v66 = 0x40000000;
        if (!isDragActive)
        {
          v66 = 0;
        }

        v67 = v66 | v58;
        if (blockquoteLevel != blockquoteLevel2)
        {
          v67 |= 0x20000uLL;
        }

        [(VOTElementManager *)self _addDescription:elementCopy toRequest:v93 withOptions:v67 | 0x800000];
      }

      if (keyboardKeyAllowsTouchTyping)
      {
        self->_touchTypingStartTime = CFAbsoluteTimeGetCurrent();
        self->_flags.didTouchTypingOutputStart = 1;
        v68 = v39;
        v20 = v91;
        if ([VOTSharedWorkspace typingMode] - 1 <= 1)
        {
          application = [elementCopy application];
          activeKeyboard = [application activeKeyboard];
          isKeyboardContinuousPathAvailable = [activeKeyboard isKeyboardContinuousPathAvailable];

          if (isKeyboardContinuousPathAvailable)
          {
            Current = CFAbsoluteTimeGetCurrent();
            v103[0] = _NSConcreteStackBlock;
            v103[1] = 3221225472;
            v103[2] = sub_1000942AC;
            v103[3] = &unk_1001C9E98;
            v104 = elementCopy;
            selfCopy = self;
            v106 = Current;
            [v93 setActionCompletionBlock:v103];
          }

          v100[0] = _NSConcreteStackBlock;
          v100[1] = 3221225472;
          v100[2] = sub_1000944D4;
          v100[3] = &unk_1001C9EC0;
          v102 = isKeyboardContinuousPathAvailable;
          v100[4] = self;
          v73 = elementCopy;
          v101 = v73;
          [v93 setCompletionBlock:v100];
          if (([VOTSharedWorkspace typingMode] == 2 || (objc_msgSend(v73, "doesHaveTraits:", kAXDeleteKeyTrait) & 1) == 0) && objc_msgSend(v73, "allowsAutoAlternativeCharacterActivation"))
          {
            self->_flags.shouldTriggerAlternativeKeyActivation = 1;
          }
        }
      }

      else
      {
        [(VOTElementManager *)self _setPreviousTouchTypingKey:0];
        v68 = v39;
        v20 = v91;
      }

      if ([elementCopy isBannerNotification])
      {
        v98[0] = _NSConcreteStackBlock;
        v98[1] = 3221225472;
        v98[2] = sub_10009453C;
        v98[3] = &unk_1001C9EE8;
        v99 = elementCopy;
        [v93 setCompletionBlock:v98];
      }

      [(VOTElementManager *)self sendRequest:v93];
      if ([elementCopy doesHaveTraits:kAXLinkTrait])
      {
        v74 = [elementCopy url];

        if (v74)
        {
          [elementCopy frame];
          [(VOTElementManager *)self _outputDataDetectorIfPresent:elementCopy element:0 includeLinks:?];
        }
      }

LABEL_97:
      application2 = [elementCopy application];
      if ([(NSArray *)self->_currentApplications containsObject:application2])
      {
        goto LABEL_104;
      }

      v76 = CFAbsoluteTimeGetCurrent();
      [(VOTElementManager *)self lastTrackingUpdateAppsFailureTime];
      if (v76 - v77 > 0.25)
      {
        [(VOTElementManager *)self setLastTrackingUpdateAppsFailureTime:-3061152000.0];
        [(VOTElementManager *)self setLastTrackingUpdateAppsFailureApplication:0];
      }

      lastTrackingUpdateAppsFailureApplication = [(VOTElementManager *)self lastTrackingUpdateAppsFailureApplication];
      if (([lastTrackingUpdateAppsFailureApplication isEqual:application2] & 1) == 0)
      {
        _sideAppDividerElement = [(VOTElementManager *)self _sideAppDividerElement];
        v80 = [_sideAppDividerElement isEqual:elementCopy];

        if (v80)
        {
          goto LABEL_103;
        }

        v88 = +[VOTWorkspace sharedWorkspace];
        lastTrackingUpdateAppsFailureApplication = [v88 focusedApplications];

        objc_storeStrong(&self->_currentApplications, lastTrackingUpdateAppsFailureApplication);
        if (![(NSArray *)self->_currentApplications containsObject:application2])
        {
          [(VOTElementManager *)self setLastTrackingUpdateAppsFailureTime:v76];
          [(VOTElementManager *)self setLastTrackingUpdateAppsFailureApplication:application2];
        }
      }

LABEL_103:
      [(VOTElementManager *)self _handleKeyboardChangedNotification];
LABEL_104:
      if ([elementCopy mapFeatureType] == 1 && !self->_shouldContinueRoadTracking)
      {
        v81 = +[VOTOutputRequest createRequest];
        startTrackingRoadRequest = self->_startTrackingRoadRequest;
        self->_startTrackingRoadRequest = v81;

        selectedLanguage = [VOTSharedWorkspace selectedLanguage];
        v84 = sub_1000516CC(off_1001FDDD0, @"map.follow.road.hint", 0, selectedLanguage);
        v85 = [(VOTOutputRequest *)self->_startTrackingRoadRequest addString:v84 withLanguage:selectedLanguage];
        [(VOTOutputRequest *)self->_startTrackingRoadRequest setDoesNotInterrupt:1];
        [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:self];
        [(VOTElementManager *)self sendRequest:self->_startTrackingRoadRequest];
      }

      if ([elementCopy doesHaveTraits:kAXKeyboardKeyTrait])
      {
        self->_flags.usePenumbraForKeyboardKeys = 1;
      }

      self->_flags.elementCenterSoundPlaying = 0;
      [eventCopy touchPoint];
      self->_firstRoadTravelPoint.x = v86;
      self->_firstRoadTravelPoint.y = v87;
      self->_approachingEndOfRoad = 0;

      goto LABEL_110;
    }
  }

  else
  {
    isTouchContainer = [elementCopy isTouchContainer];
  }

  touchContainer = [(VOTElementManager *)self touchContainer];
  v20 = [(VOTElementManager *)self _echoDifferentTouchContainer:elementCopy forEvent:eventCopy];
  v22 = +[NSNull null];

  if (v20 != v22)
  {
    v21 = 1;
    if ((sub_100050834() & isTouchContainer & 1) != 0 || !soundCopy)
    {
      goto LABEL_12;
    }

    goto LABEL_10;
  }

LABEL_111:
}

- (id)_updateTouchContainerForElement:(id)element playSound:(BOOL)sound
{
  soundCopy = sound;
  elementCopy = element;
  touchContainer = [(VOTElementManager *)self touchContainer];
  touchContainerAXElement = [elementCopy touchContainerAXElement];

  uiElement = [touchContainer uiElement];
  axElement = [uiElement axElement];

  if (touchContainerAXElement && axElement && CFEqual(touchContainerAXElement, axElement))
  {
    v11 = 0;
  }

  else
  {
    v12 = [AXUIElement uiElementWithAXElement:touchContainerAXElement];
    v11 = [VOTElement elementWithUIElement:v12];

    if (soundCopy && sub_100050834() && v11 && ([VOTSharedWorkspace containerOutputFeedback] & 4) != 0)
    {
      v13 = +[VOTOutputManager outputManager];
      v14 = +[VOSOutputEvent DidEnterTouchContainer];
      [v13 sendEvent:v14];
    }

    [(VOTElementManager *)self setTouchContainer:v11];
  }

  self->_touchContainersTouchedCount = 0;

  return v11;
}

- (double)_alternativeKeyActivateTime
{
  application = [(VOTElement *)self->_currentElement application];
  currentSoftwareKeyboardLayout = [application currentSoftwareKeyboardLayout];

  v4 = sub_1000529CC(currentSoftwareKeyboardLayout);
  return v4;
}

- (void)_outputRequestFinished:(id)finished
{
  finishedCopy = finished;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_bookPageContentOutputRequest == finishedCopy)
  {
    if ([(VOTOutputRequest *)finishedCopy finishedSuccessfully])
    {
      if ([(VOTElementManager *)self _handleMoreBookContentElements])
      {
        goto LABEL_36;
      }

      _currentElement = [(VOTElementManager *)self _currentElement];
      if ([_currentElement readingContentCausesPageTurn])
      {

LABEL_28:
        [(VOTElementManager *)self _handleBookPageFlipAndContinue];
        goto LABEL_29;
      }

      _currentElement2 = [(VOTElementManager *)self _currentElement];
      includeDuringContentReading = [_currentElement2 includeDuringContentReading];

      if (includeDuringContentReading)
      {
        goto LABEL_28;
      }
    }

LABEL_29:
    [(VOTOutputRequest *)self->_bookPageContentOutputRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_bookPageContentOutputRequest;
    self->_bookPageContentOutputRequest = 0;
    goto LABEL_30;
  }

  if (self->_readAllOutputRequest == finishedCopy)
  {
    if (!self->_flags.isReadingAll)
    {
LABEL_35:
      [(VOTElementManager *)self _resetReadAllRequest];
      goto LABEL_36;
    }

    if ([(VOTOutputRequest *)finishedCopy finishedSuccessfully])
    {
      _currentElement3 = [(VOTElementManager *)self _currentElement];
      readingContentCausesPageTurn = [_currentElement3 readingContentCausesPageTurn];

      if (readingContentCausesPageTurn)
      {
LABEL_19:
        [(VOTElementManager *)self _handleBookPageFlipAndContinue];
        goto LABEL_35;
      }

      _currentElement4 = [(VOTElementManager *)self _currentElement];
      includeDuringContentReading2 = [_currentElement4 includeDuringContentReading];

      if (includeDuringContentReading2)
      {
        _currentElement5 = [(VOTElementManager *)self _currentElement];
        v19 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C9F08 startElement:_currentElement5 forward:1];

        if (!v19)
        {
          goto LABEL_19;
        }
      }
    }

    [(VOTElementManager *)self _handleReadAllNextElement];
    goto LABEL_35;
  }

  if (self->_switchRoadsOutputRequest == finishedCopy)
  {
    if ([(VOTOutputRequest *)finishedCopy finishedSuccessfully])
    {
      [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer dispatchAfterDelay:0.01];
    }

    [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_switchRoadsOutputRequest;
    self->_switchRoadsOutputRequest = 0;
    goto LABEL_30;
  }

  endOfRoadApproachingRequest = self->_endOfRoadApproachingRequest;
  if (endOfRoadApproachingRequest == finishedCopy)
  {
    [(VOTOutputRequest *)endOfRoadApproachingRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_endOfRoadApproachingRequest;
    self->_endOfRoadApproachingRequest = 0;
LABEL_30:

    goto LABEL_36;
  }

  if (self->_startTrackingRoadRequest == finishedCopy)
  {
    if ([(VOTOutputRequest *)finishedCopy finishedSuccessfully])
    {
      *&self->_playingMapSound = 256;
      v11 = +[VOTOutputManager outputManager];
      [v11 playSoundFast:@"Sounds/RoadWalking.aiff"];

      v12 = +[VOTOutputRequest createRequest];
      v13 = sub_1000511CC(off_1001FDDD0, @"map-interaction.switch.to.road", 0);
      [(VOTElementManager *)self _addFormattedStringToRequest:v12 formattedString:v13 withElement:self->_currentElement];
      [(VOTElementManager *)self sendRequest:v12];
    }

    [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_startTrackingRoadRequest;
    self->_startTrackingRoadRequest = 0;
    goto LABEL_30;
  }

  if (self->_announcementRequest == finishedCopy)
  {
    if (self->_announcementPid == -1)
    {
      v20 = +[VOTElement systemAppApplication];
      focusedApplications = [v20 focusedApplications];

      v31 = 0u;
      v32 = 0u;
      v29 = 0u;
      v30 = 0u;
      v6 = focusedApplications;
      v22 = [v6 countByEnumeratingWithState:&v29 objects:v33 count:16];
      if (v22)
      {
        v23 = v22;
        v24 = *v30;
        do
        {
          v25 = 0;
          do
          {
            if (*v30 != v24)
            {
              objc_enumerationMutation(v6);
            }

            [*(*(&v29 + 1) + 8 * v25) notifyAnnouncementFinishedWithString:self->_announcementOriginalString didFinishSuccessfully:{-[VOTOutputRequest finishedSuccessfully](finishedCopy, "finishedSuccessfully", v29)}];
            v25 = v25 + 1;
          }

          while (v23 != v25);
          v23 = [v6 countByEnumeratingWithState:&v29 objects:v33 count:16];
        }

        while (v23);
      }
    }

    else
    {
      v6 = [VOTSharedWorkspace applicationForPID:?];
      [v6 notifyAnnouncementFinishedWithString:self->_announcementOriginalString didFinishSuccessfully:{-[VOTOutputRequest finishedSuccessfully](finishedCopy, "finishedSuccessfully")}];
    }

    [(VOTOutputRequest *)self->_announcementRequest setCompletionDelegate:0];
    announcementRequest = self->_announcementRequest;
    self->_announcementRequest = 0;

    self->_announcementPid = -1;
    announcementOriginalString = self->_announcementOriginalString;
    self->_announcementOriginalString = 0;

    if (self->_readAllOutputRequest)
    {
      v28 = +[VOTOutputManager outputManager];
      [v28 resumeCurrentRequest];
    }
  }

LABEL_36:
}

- (id)_cachedLaunchIcon:(id)icon
{
  iconCopy = icon;
  lastObject = [(NSMutableArray *)self->_cachedLaunchIcons lastObject];
  uniqueIdentification = [iconCopy uniqueIdentification];
  v7 = [lastObject isEqual:uniqueIdentification];

  if (v7)
  {
    v8 = iconCopy;
  }

  else
  {
    v9 = [iconCopy elementsInDirection:1 withCount:28];
    lastObject2 = [(NSMutableArray *)self->_cachedLaunchIcons lastObject];
    v18 = 0u;
    v19 = 0u;
    v20 = 0u;
    v21 = 0u;
    v11 = v9;
    v8 = [v11 countByEnumeratingWithState:&v18 objects:v22 count:16];
    if (v8)
    {
      v12 = *v19;
      while (2)
      {
        for (i = 0; i != v8; i = i + 1)
        {
          if (*v19 != v12)
          {
            objc_enumerationMutation(v11);
          }

          v14 = *(*(&v18 + 1) + 8 * i);
          uniqueIdentification2 = [v14 uniqueIdentification];
          v16 = [lastObject2 isEqual:uniqueIdentification2];

          if (v16)
          {
            v8 = v14;
            goto LABEL_13;
          }
        }

        v8 = [v11 countByEnumeratingWithState:&v18 objects:v22 count:16];
        if (v8)
        {
          continue;
        }

        break;
      }
    }

LABEL_13:
  }

  return v8;
}

- (BOOL)_reDispatchUpdateAppFromTimerIfBundlesAreNotReady
{
  v3 = +[VOTWorkspace sharedWorkspace];
  focusedApplications = [v3 focusedApplications];

  v16 = 0u;
  v17 = 0u;
  v14 = 0u;
  v15 = 0u;
  v5 = focusedApplications;
  v6 = [v5 countByEnumeratingWithState:&v14 objects:v18 count:16];
  if (v6)
  {
    v7 = *v15;
    while (2)
    {
      for (i = 0; i != v6; i = i + 1)
      {
        if (*v15 != v7)
        {
          objc_enumerationMutation(v5);
        }

        v9 = *(*(&v14 + 1) + 8 * i);
        uiElement = [v9 uiElement];
        [uiElement updateCache:3045];

        uiElement2 = [v9 uiElement];
        LOBYTE(uiElement) = [uiElement2 BOOLWithAXAttribute:3045];

        if ((uiElement & 1) == 0)
        {
          v12 = CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime;
          LOBYTE(v6) = v12 < 1.0;
          if (v12 < 1.0)
          {
            [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer dispatchAfterDelay:0.300000012];
            LOBYTE(v6) = 1;
          }

          goto LABEL_12;
        }
      }

      v6 = [v5 countByEnumeratingWithState:&v14 objects:v18 count:16];
      if (v6)
      {
        continue;
      }

      break;
    }
  }

LABEL_12:

  return v6;
}

- (void)_handleUpdateAppFromTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (![(VOTElementManager *)self _reDispatchUpdateAppFromTimerIfBundlesAreNotReady])
  {
    _shouldSuppressSpeechForPlayPause = [(VOTElementManager *)self _shouldSuppressSpeechForPlayPause];
    v4 = &kCFBooleanFalse;
    if (!_shouldSuppressSpeechForPlayPause)
    {
      v4 = &kCFBooleanTrue;
    }

    v5 = *v4;

    [(VOTElementManager *)self _updateApplicationAndSpeak:v5];
  }
}

- (void)updateApplicationAndSpeak:(id)speak
{
  speakCopy = speak;
  if (!speakCopy)
  {
    speakCopy = kCFBooleanFalse;
  }

  v5 = speakCopy;
  [(SCRCThread *)self->_elementManagerThread performSelector:"_updateApplicationAndSpeak:" onTarget:self count:1 objects:speakCopy, 0];
}

- (id)_firstResponderForApplications:(id)applications
{
  v11 = 0u;
  v12 = 0u;
  v13 = 0u;
  v14 = 0u;
  applicationsCopy = applications;
  v4 = [applicationsCopy countByEnumeratingWithState:&v11 objects:v15 count:16];
  if (v4)
  {
    v5 = v4;
    v6 = *v12;
    while (2)
    {
      for (i = 0; i != v5; i = i + 1)
      {
        if (*v12 != v6)
        {
          objc_enumerationMutation(applicationsCopy);
        }

        firstResponderElementForFocus = [*(*(&v11 + 1) + 8 * i) firstResponderElementForFocus];
        if (firstResponderElementForFocus)
        {
          v9 = firstResponderElementForFocus;
          goto LABEL_11;
        }
      }

      v5 = [applicationsCopy countByEnumeratingWithState:&v11 objects:v15 count:16];
      if (v5)
      {
        continue;
      }

      break;
    }
  }

  v9 = 0;
LABEL_11:

  return v9;
}

- (id)_firstElementForFocusFromElementCommunities:(id)communities currentElement:(id)element
{
  communitiesCopy = communities;
  elementCopy = element;
  if (elementCopy)
  {
    [(VOTElementManager *)self _elementCommunityForElement:elementCopy];
  }

  else
  {
    [(VOTElementManager *)self mostRecentElementCommunity];
  }
  v8 = ;
  if ([communitiesCopy containsObject:v8])
  {
    _sideAppDividerElement = [(VOTElementManager *)self _sideAppDividerElement];
    v10 = [v8 isEqual:_sideAppDividerElement];

    if (v10)
    {
      firstElementInApplication = v8;
    }

    else
    {
      firstElementInApplicationForFocus = [v8 firstElementInApplicationForFocus];
      if (firstElementInApplicationForFocus)
      {
        goto LABEL_11;
      }

      firstElementInApplication = [v8 firstElementInApplication];
    }

    firstElementInApplicationForFocus = firstElementInApplication;
    if (firstElementInApplication)
    {
LABEL_11:
      if ([firstElementInApplicationForFocus isAccessibleElement])
      {
        goto LABEL_24;
      }
    }
  }

  else
  {
    firstElementInApplicationForFocus = 0;
  }

  v23 = 0u;
  v24 = 0u;
  v21 = 0u;
  v22 = 0u;
  v13 = communitiesCopy;
  v14 = [v13 countByEnumeratingWithState:&v21 objects:v25 count:16];
  if (!v14)
  {
    goto LABEL_23;
  }

  v15 = v14;
  v16 = *v22;
  do
  {
    for (i = 0; i != v15; i = i + 1)
    {
      if (*v22 != v16)
      {
        objc_enumerationMutation(v13);
      }

      v18 = *(*(&v21 + 1) + 8 * i);
      firstElementInApplicationForFocus2 = [v18 firstElementInApplicationForFocus];

      if (firstElementInApplicationForFocus2)
      {
        firstElementInApplicationForFocus = firstElementInApplicationForFocus2;
      }

      else
      {
        firstElementInApplicationForFocus = [v18 firstElementInApplication];
        if (!firstElementInApplicationForFocus)
        {
          continue;
        }
      }

      if ([firstElementInApplicationForFocus isAccessibleElement])
      {
        goto LABEL_23;
      }
    }

    v15 = [v13 countByEnumeratingWithState:&v21 objects:v25 count:16];
  }

  while (v15);
LABEL_23:

LABEL_24:

  return firstElementInApplicationForFocus;
}

- (id)_elementCommunityForElement:(id)element
{
  elementCopy = element;
  application = [elementCopy application];
  _sideAppDividerElement = [(VOTElementManager *)self _sideAppDividerElement];
  if ([elementCopy isEqual:_sideAppDividerElement])
  {
    elementCommunity = _sideAppDividerElement;
  }

  else
  {
    elementCommunity = [elementCopy elementCommunity];
  }

  v8 = elementCommunity;

  return v8;
}

- (void)_cacheFocusedElement:(id)element forElementCommunity:(id)community
{
  elementCopy = element;
  elementCommunityIdentifier = [community elementCommunityIdentifier];
  uiElement = [elementCopy uiElement];

  axElement = [uiElement axElement];
  v9 = elementCommunityIdentifier;
  if (axElement && elementCommunityIdentifier)
  {
    [(NSMutableDictionary *)self->_focusedElementsByElementCommunityIdentifier setObject:axElement forKey:elementCommunityIdentifier];
    v9 = elementCommunityIdentifier;
  }
}

- (id)_retrieveCachedFocusedElementForElementCommunity:(id)community
{
  communityCopy = community;
  elementCommunityIdentifier = [communityCopy elementCommunityIdentifier];
  if (elementCommunityIdentifier && (v6 = [(NSMutableDictionary *)self->_focusedElementsByElementCommunityIdentifier objectForKey:elementCommunityIdentifier]) != 0)
  {
    v7 = [AXUIElement uiElementWithAXElement:v6];
    v8 = [VOTElement elementWithUIElement:v7];

    application = [communityCopy application];
    uiElement = [application uiElement];
    v11 = [uiElement pid];
    uiElement2 = [v8 uiElement];
    v13 = [uiElement2 pid];

    if (v11 != v13)
    {
      uiElement3 = [v8 uiElement];
      [uiElement3 axElement];
      v15 = AXUICreateApplicationElementForElement();

      if (v15)
      {
        v16 = [AXUIElement uiElementWithAXElement:v15];
        v17 = [VOTElement elementWithUIElement:v16];

        CFRelease(v15);
        application = v17;
      }
    }

    if ([v8 isValidForApplication:application])
    {
      v18 = v8;
    }

    else
    {
      [(NSMutableDictionary *)self->_focusedElementsByElementCommunityIdentifier removeObjectForKey:elementCommunityIdentifier];
      v18 = 0;
    }
  }

  else
  {
    v18 = 0;
  }

  return v18;
}

- (BOOL)_addApplicationLabelsAndSummariesToRequest:(id)request applicationNames:(id *)names summaryElements:(id *)elements
{
  requestCopy = request;
  v9 = +[NSMutableArray array];
  v10 = +[NSMutableArray array];
  v24 = 0;
  v25 = &v24;
  v26 = 0x2020000000;
  v27 = 0;
  currentApplications = self->_currentApplications;
  v19[0] = _NSConcreteStackBlock;
  v19[1] = 3221225472;
  v19[2] = sub_1000958D4;
  v19[3] = &unk_1001C9F30;
  v19[4] = self;
  v12 = requestCopy;
  v20 = v12;
  v13 = v9;
  v21 = v13;
  v23 = &v24;
  v14 = v10;
  v22 = v14;
  [(NSArray *)currentApplications enumerateObjectsUsingBlock:v19];
  if (names)
  {
    v15 = v13;
    *names = v13;
  }

  if (elements)
  {
    v16 = v14;
    *elements = v14;
  }

  v17 = *(v25 + 24);

  _Block_object_dispose(&v24, 8);
  return v17;
}

- (BOOL)_isWebAppStillOpen
{
  v2 = [(NSArray *)self->_currentApplications ax_filteredArrayUsingBlock:&stru_1001C9F50];
  v3 = [v2 count] != 0;

  return v3;
}

- (void)_updateApplicationAndSpeak:(id)speak
{
  speakCopy = speak;
  nextElementToFocus = [(VOTElementManager *)self nextElementToFocus];
  [(VOTElementManager *)self setNextElementToFocus:0];
  nextStringToSpeakOnScreenChange = [(VOTElementManager *)self nextStringToSpeakOnScreenChange];
  v7 = [nextStringToSpeakOnScreenChange copy];

  [(VOTElementManager *)self setNextStringToSpeakOnScreenChange:0];
  v8 = VOTLogLayoutChange();
  if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
  {
    sub_10012BD7C();
  }

  if ([VOTSharedWorkspace screenOn])
  {
    v9 = VOTLogElement();
    if (os_signpost_enabled(v9))
    {
      *buf = 0;
      _os_signpost_emit_with_name_impl(&_mh_execute_header, v9, OS_SIGNPOST_EVENT, 0xEEEEB0B5B2B2EEEELL, "BeginAppUpdate", "", buf, 2u);
    }

    AXPerformBlockOnMainThreadAfterDelay();
    v10 = CFAbsoluteTimeGetCurrent() - self->_lastPopupTime;
    _currentElement = [(VOTElementManager *)self _currentElement];
    if ([VOTSharedWorkspace tapAndHoldMode])
    {
      if (v10 >= 1.25)
      {
        application = [_currentElement application];
        v13 = [_currentElement isValidForApplication:application];

        if (v13)
        {
          goto LABEL_359;
        }
      }
    }

    v14 = +[VOTElement springBoardApplication];
    if ([v14 isSystemSleeping])
    {
      v15 = +[VOTWorkspace sharedWorkspace];
      currentCallState = [v15 currentCallState];

      if (!currentCallState)
      {
        [(VOTElementManager *)self _closeItemChooser];
        [(VOTElementManager *)self _setCurrentElement:0];
        [(VOTElementFetcher *)self->_fetchManager forceUpdate];
        [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
        v19 = +[VOTDisplayManager displayManager];
        [v19 setCursorFrameForElement:0];
        goto LABEL_26;
      }
    }

    v17 = +[VOTWorkspace sharedWorkspace];
    if ([v17 currentCallState] == 1 && _AXSVoiceOverTouchShouldRouteToSpeakerWithProximity())
    {

      if (!nextElementToFocus)
      {
        v18 = VOTLogCommon();
        if (os_log_type_enabled(v18, OS_LOG_TYPE_INFO))
        {
          *buf = 0;
          _os_log_impl(&_mh_execute_header, v18, OS_LOG_TYPE_INFO, "Staying on current element because we're in a phone call and the proximity sensor is causing the screen to go off and on", buf, 2u);
        }

        nextElementToFocus = self->_currentElement;
      }
    }

    else
    {
    }

    if (([v14 isVoiceControlRunning] & 1) != 0 || objc_msgSend(v14, "isSystemWideGestureInProgress"))
    {
      v19 = +[VOTOutputManager outputManager];
      [v19 stopSpeakingAtBoundary:0];
LABEL_26:

      byte_1001FECE8 = 0;
LABEL_358:

LABEL_359:
      goto LABEL_360;
    }

    v20 = +[VOTWorkspace sharedWorkspace];
    focusedApplications = [v20 focusedApplications];

    v22 = VOTLogLayoutChange();
    if (os_log_type_enabled(v22, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BDEC();
    }

    fingerCount = [VOTSharedWorkspace fingerCount];
    if ([speakCopy BOOLValue])
    {
      v342 = [objc_allocWithZone(VOTOutputRequest) init];
    }

    else
    {
      v342 = 0;
    }

    p_currentApplications = &self->_currentApplications;
    v24 = [(NSArray *)self->_currentApplications isEqualToArray:focusedApplications];
    application2 = [_currentElement application];
    v340 = application2;
    if (application2)
    {
      v26 = [focusedApplications containsObject:application2];
    }

    else
    {
      v26 = 0;
    }

    v334 = &self->_currentApplications;
    if (![(VOTElementManager *)self _isWebAppStillOpen])
    {
      v27 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v27, OS_LOG_TYPE_DEBUG))
      {
        sub_10012BE58();
      }

      [(VOTElementManager *)self _clearWebLoadedSound];
      p_currentApplications = &self->_currentApplications;
    }

    v324 = v24;
    if (v24)
    {
      Current = CFAbsoluteTimeGetCurrent();
      [(VOTElementManager *)self lastPauseSpeechAndHapticsStart];
      if (Current - v29 > 30.0)
      {
        [(VOTElementManager *)self _handlePauseSpeechAndHapticsNotification:&__kCFBooleanFalse];
      }

      v338 = 0;
      v339 = 0;
      v325 = 0;
    }

    else
    {
      objc_storeStrong(p_currentApplications, focusedApplications);
      v349 = 0;
      v350 = 0;
      v325 = [(VOTElementManager *)self _addApplicationLabelsAndSummariesToRequest:v342 applicationNames:&v350 summaryElements:&v349];
      v338 = v350;
      v339 = v349;
      v30 = CFAbsoluteTimeGetCurrent();
      [(VOTElementManager *)self lastDuckingDisablementSessionStart];
      if (v30 - v31 > 1.0)
      {
        [(VOTElementManager *)self _handleDuckingDisabling:&__kCFBooleanFalse];
      }

      [(VOTElementManager *)self _handlePauseSpeechAndHapticsNotification:&__kCFBooleanFalse];
      elementBeforePopup = self->_elementBeforePopup;
      self->_elementBeforePopup = 0;

      v33 = VOTLogCommon();
      if (os_log_type_enabled(v33, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v33, OS_LOG_TYPE_INFO, "Application is no longer valid, resetting", buf, 2u);
      }
    }

    currentApplications = self->_currentApplications;
    previousTableOrCollectionViewApplication = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
    LOBYTE(currentApplications) = [(NSArray *)currentApplications containsObject:previousTableOrCollectionViewApplication];

    if ((currentApplications & 1) == 0)
    {
      self->_previousTableOrCollectionViewRowTime = -3061152000.0;
      previousTableOrCollectionViewList = [(VOTElementManager *)self previousTableOrCollectionViewList];
      [previousTableOrCollectionViewList removeAllObjects];

      previousTableOrCollectionViewToMetadata = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
      [previousTableOrCollectionViewToMetadata removeAllObjects];

      [(VOTElementManager *)self setPreviousTableOrCollectionViewApplication:0];
    }

    if ((v26 & 1) == 0)
    {
      lastScrollStatus = self->_lastScrollStatus;
      self->_lastScrollStatus = 0;
    }

    p_currentElement = &self->_currentElement;
    v39 = [(VOTElement *)self->_currentElement verifyElementExists:0];
    v40 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v40, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BE94(p_currentElement, v39);
    }

    v41 = CFAbsoluteTimeGetCurrent();
    [(VOTElementManager *)self lastUserElementTouchTime];
    if (((v41 - v42 < 1.0) & v39) == 1)
    {
      p_super = VOTLogCommon();
      if (os_log_type_enabled(p_super, OS_LOG_TYPE_INFO))
      {
        v44 = *p_currentElement;
        *buf = 138412290;
        *v352 = v44;
        _os_log_impl(&_mh_execute_header, p_super, OS_LOG_TYPE_INFO, "Not moving focus for screen change because we touched recently on an element and it still exists{%@}", buf, 0xCu);
      }

      goto LABEL_357;
    }

    v333 = focusedApplications;
    if ([focusedApplications count] == 1 && (objc_msgSend(focusedApplications, "firstObject"), v45 = objc_claimAutoreleasedReturnValue(), v46 = objc_msgSend(v45, "isClipViewService"), v45, v46))
    {
    }

    else if (nextElementToFocus)
    {
      p_super = nextElementToFocus;
      v47 = 0;
      nextElementToFocus = p_super;
      goto LABEL_59;
    }

    p_super = [(VOTElementManager *)self _firstElementWithCurrentElement:_currentElement focusedApplications:focusedApplications];

    nextElementToFocus = 0;
    v47 = 1;
LABEL_59:
    v332 = _currentElement;
    v48 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v48, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BF64();
    }

    v321 = v39;
    if (v39 && (v47 & [(VOTElement *)*p_currentElement hasNativeFocus]) == 1)
    {
      v49 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
      {
        sub_10012BFD0();
      }

      if (!-[VOTElement doesHaveTraits:](*p_currentElement, "doesHaveTraits:", kAXWebContentTrait) || (-[VOTElementManager webPageLoadURL](self, "webPageLoadURL"), (v50 = objc_claimAutoreleasedReturnValue()) == 0) || (v51 = v50, -[VOTElementManager webPageLoadURL](self, "webPageLoadURL"), v52 = p_super, v53 = objc_claimAutoreleasedReturnValue(), -[VOTElement webAreaURL](self->_currentElement, "webAreaURL"), v54 = objc_claimAutoreleasedReturnValue(), v55 = [v53 isEqual:v54], v54, v53, p_super = v52, v51, v55))
      {
        v56 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v56, OS_LOG_TYPE_INFO))
        {
          v57 = *p_currentElement;
          [p_super webAreaURL];
          v59 = v58 = p_super;
          *buf = 138412802;
          *v352 = v57;
          *&v352[8] = 2112;
          *v353 = v58;
          *&v353[8] = 2112;
          *&v353[10] = v59;
          _os_log_impl(&_mh_execute_header, v56, OS_LOG_TYPE_INFO, "Current element has native focus, not moving focus again: %@ -> %@:newElement:%@", buf, 0x20u);

          p_super = v58;
        }

        _currentElement = v332;
LABEL_356:
        focusedApplications = v333;
LABEL_357:

        goto LABEL_358;
      }
    }

    v320 = speakCopy;
    v322 = v14;
    v323 = v7;
    if (CFAbsoluteTimeGetCurrent() - self->_previousTableOrCollectionViewRowTime <= 1.0)
    {
      _currentElement = v332;
      focusedApplications = v333;
LABEL_102:
      v327 = kAXStatusBarElementTrait;
      if ((-[NSObject doesHaveTraits:](p_super, "doesHaveTraits:") & 1) != 0 || (-[NSObject uiElement](p_super, "uiElement"), v92 = objc_claimAutoreleasedReturnValue(), v93 = [v92 BOOLWithAXAttribute:2238], v92, v93))
      {

        v94 = VOTLogLayoutChange();
        if (os_log_type_enabled(v94, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C0F4();
        }

        p_super = 0;
      }

      if (![_currentElement isValid])
      {
LABEL_121:
        if ([p_super isBannerNotification])
        {
          v108 = VOTLogElement();
          if (os_log_type_enabled(v108, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C1A0();
          }

          p_super = 0;
        }

        titleElements = p_super;
        bundleIdentifier = [p_super bundleIdentifier];
        if ([bundleIdentifier isEqualToString:@"com.apple.assistivetouchd"])
        {
          bundleIdentifier2 = [(VOTElement *)*p_currentElement bundleIdentifier];
          v112 = [bundleIdentifier2 isEqualToString:@"com.apple.assistivetouchd"];

          v14 = v322;
          if ((v112 & 1) == 0)
          {
            v113 = VOTLogElement();
            if (os_log_type_enabled(v113, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C1DC();
            }

            p_super = titleElements;
            goto LABEL_357;
          }
        }

        else
        {
        }

        v114 = VOTLogWebPageMovement();
        p_super = titleElements;
        if (os_log_type_enabled(v114, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C218();
        }

        v115 = v10 >= 1.25 && fingerCount == 1;
        v116 = !v115;
        v330 = v116;
        if (v115)
        {
          v127 = objc_allocWithZone(VOTElement);
          [VOTSharedWorkspace fingerPosition];
          v128 = [v127 initWithPosition:?];
          _currentElement2 = [(VOTElementManager *)self _currentElement];
          v130 = [v128 isEqual:_currentElement2];

          if (!v130)
          {
LABEL_282:
            v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
LABEL_283:
            v260 = v330;
            goto LABEL_314;
          }

          v128 = v128;
          p_super = v128;
LABEL_313:
          v260 = v330;

          v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
LABEL_314:

          v277 = +[VOTElement springBoardApplication];
          isSystemLocked = [v277 isSystemLocked];

          sharedWorkspace = [v259 + 806 sharedWorkspace];
          currentCallState2 = [sharedWorkspace currentCallState];

          sharedWorkspace2 = [v259 + 806 sharedWorkspace];
          if ([sharedWorkspace2 currentCallState] == 2)
          {
            v337 = 1;
          }

          else
          {
            sharedWorkspace3 = [v259 + 806 sharedWorkspace];
            v337 = [sharedWorkspace3 currentCallState] == 1;
          }

          _shouldNotSpeakForIncomingCall = [(VOTElementManager *)self _shouldNotSpeakForIncomingCall];
          v331 = currentCallState2;
          if (currentCallState2 == 1 && [focusedApplications count] == 1)
          {
            firstObject = [focusedApplications firstObject];
            if ([firstObject isSpringBoard])
            {
              isMobilePhone = 1;
            }

            else
            {
              firstObject2 = [focusedApplications firstObject];
              isMobilePhone = [firstObject2 isMobilePhone];
            }
          }

          else
          {
            isMobilePhone = 0;
          }

          v328 = p_super;
          if (isSystemLocked)
          {
            v287 = +[VOTElement springBoardApplication];
            isAlarmRinging = [v287 isAlarmRinging];
          }

          else
          {
            isAlarmRinging = 0;
          }

          v289 = CFAbsoluteTimeGetCurrent();
          [(VOTElementManager *)self lastLayoutChangeNotificationTime];
          v291 = isSystemLocked;
          if (v289 - v290 >= 0.5)
          {
            v292 = 0;
          }

          else
          {
            v292 = [v328 isEqual:*p_currentElement];
          }

          v293 = _shouldNotSpeakForIncomingCall | isMobilePhone | v260 ^ 1 | isAlarmRinging | v292;
          v294 = VOTLogCommon();
          if (os_log_type_enabled(v294, OS_LOG_TYPE_INFO))
          {
            *buf = 67110656;
            *v352 = v291;
            *&v352[4] = 1024;
            *&v352[6] = v331;
            *v353 = 1024;
            *&v353[2] = _shouldNotSpeakForIncomingCall;
            *&v353[6] = 1024;
            *&v353[8] = isMobilePhone;
            *&v353[12] = 1024;
            *&v353[14] = isAlarmRinging;
            v354 = 1024;
            v355 = v292;
            v356 = 1024;
            v357 = v293 & 1;
            _os_log_impl(&_mh_execute_header, v294, OS_LOG_TYPE_INFO, "Screen change data: locked: %d, callState: %d, shouldSquelchForIncomingCall: %d, shouldSquelchForActiveCall: %d, alarming Ringing: %d, layout change just happened: %d = should not send: %d", buf, 0x2Cu);
          }

          v295 = VOTLogCommon();
          if (os_log_type_enabled(v295, OS_LOG_TYPE_INFO))
          {
            v296 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent() - self->_lastPressOnMediaSessionElement];
            *buf = 138412290;
            *v352 = v296;
            _os_log_impl(&_mh_execute_header, v295, OS_LOG_TYPE_INFO, "Screen change should send? %@", buf, 0xCu);
          }

          v297 = (CFAbsoluteTimeGetCurrent() - self->_lastPressOnMediaSessionElement < 3.5) | v293;
          v7 = v323;
          _currentElement = v332;
          if (v291)
          {
            v298 = CFAbsoluteTimeGetCurrent();
            [VOTSharedWorkspace screenOnTime];
            speakCopy = v320;
            if (v298 - v299 < 2.0 && !v337)
            {
              buf[0] = (v297 & 1) == 0;
              v344 = v328;
              [(VOTElementManager *)self _handleSystemLockedOutputBehavior:v342 shouldSendRequest:buf startElement:&v344];
              v300 = v344;

              v297 = buf[0] ^ 1;
              if ((v297 & 1) == 0)
              {
                self->_lastLockScreenAlertSpokenTime = CFAbsoluteTimeGetCurrent();
              }

              v328 = v300;
            }
          }

          else
          {
            speakCopy = v320;
          }

          if ([v342 containsActions])
          {
            if (v297)
            {
LABEL_345:
              p_super = v328;
              if (!v328)
              {
                goto LABEL_350;
              }

              label = [v328 label];
              if ([label length])
              {
              }

              else
              {
                traits = [v328 traits];

                if (!traits)
                {
                  goto LABEL_350;
                }
              }

              v343 = v328;
              AXPerformBlockOnMainThreadAfterDelay();

LABEL_350:
              [(NSMutableString *)self->_elementTypingBuffer setString:&stru_1001CBF90];
              [(VOTElementManager *)self _elementSelectionRangeDidChange:0x7FFFFFFFLL reason:0, 0];
              [(VOTElementManager *)self _setCurrentElement:v328];
              [(VOTElementFetcher *)self->_fetchManager setTriggerSignpostCollection:1];
              [(VOTElementFetcher *)self->_fetchManager forceUpdate];
              fetchManager = self->_fetchManager;
              _currentElement3 = [(VOTElementManager *)self _currentElement];
              [(VOTElementFetcher *)fetchManager updateCacheWithElement:_currentElement3];

              lastValidElement = self->_lastValidElement;
              self->_lastValidElement = 0;

              if ([(VOTElementManager *)self _isElementValidForFirstResponder:v328]&& [v328 doesHaveTraits:kAXTextEntryTrait])
              {
                [(VOTElementManager *)self _disableQuickNavStateTemporarily];
              }

              self->_flags.focusIsOnElement = 1;
              byte_1001FECE8 = 0;
              [(VOTElementManager *)self _resetDirectInteractionCache];
              v308 = VOTLogElement();
              v14 = v322;
              if (os_signpost_enabled(v308))
              {
                *buf = 0;
                _os_signpost_emit_with_name_impl(&_mh_execute_header, v308, OS_SIGNPOST_EVENT, 0xEEEEB0B5B2B2EEEELL, "EndAppUpdate", "", buf, 2u);
              }

              goto LABEL_356;
            }
          }

          else
          {
            _currentElement4 = [(VOTElementManager *)self _currentElement];
            v302 = [v328 isEqual:_currentElement4];

            if ((v302 | v297))
            {
              goto LABEL_345;
            }
          }

          [(VOTElementManager *)self sendRequest:v342];
          goto LABEL_345;
        }

        application3 = [titleElements application];
        isSystemApp = [application3 isSystemApp];

        if (isSystemApp && CFAbsoluteTimeGetCurrent() - self->_lastItemSelectionFromTouch > 1.0)
        {
          v119 = [(VOTElementManager *)self _cachedLaunchIcon:titleElements];
          v120 = VOTLogElement();
          if (os_log_type_enabled(v120, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C2C0();
          }

          [v119 updateIsVisible];
          if ([v119 isVisible])
          {
            p_super = v119;

            v121 = VOTLogElement();
            if (os_log_type_enabled(v121, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C410();
            }

            v122 = v321;
            if ([focusedApplications count] == 1)
            {
              firstObject3 = [focusedApplications firstObject];
              isSystemApp2 = [firstObject3 isSystemApp];

              if (isSystemApp2)
              {
                [(NSMutableArray *)self->_cachedLaunchIcons removeLastObject];
              }
            }

            v125 = 1;
            v139 = p_super;
            goto LABEL_167;
          }

          p_super = titleElements;
        }

        if (!self->_elementBeforeAlert)
        {
          v125 = 0;
          v122 = v321;
          goto LABEL_168;
        }

        v122 = v321;
        if (([p_super doesHaveTraits:kAXIsEditingTrait]& 1) != 0)
        {
          v125 = 0;
          goto LABEL_168;
        }

        p_elementBeforeAlert = &self->_elementBeforeAlert;
        v132 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v132, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C330();
        }

        v133 = +[VOTElement systemWideElement];
        [(VOTElement *)*p_elementBeforeAlert centerPoint];
        [v133 convertPoint:-[VOTElement windowContextId](*p_elementBeforeAlert fromContextId:{"windowContextId"), v134, v135}];
        v137 = v136;
        v139 = v138;

        v139 = [[VOTElement alloc] initWithPosition:v137, v139];
        [(VOTElement *)v139 frame];
        v141 = v140;
        v143 = v142;
        v145 = v144;
        v147 = v146;
        [(VOTElement *)*p_elementBeforeAlert frame];
        v363.origin.x = v148;
        v363.origin.y = v149;
        v363.size.width = v150;
        v363.size.height = v151;
        v359.origin.x = v141;
        v359.origin.y = v143;
        v359.size.width = v145;
        v359.size.height = v147;
        v360 = CGRectIntersection(v359, v363);
        if (v360.size.width <= 0.0 || CFAbsoluteTimeGetCurrent() - self->_lastAlertTime <= 3.0)
        {
          v125 = 0;
        }

        else
        {
          v317 = v139;

          v152 = VOTLogLayoutChange();
          if (os_log_type_enabled(v152, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C3A0();
          }

          v153 = *p_elementBeforeAlert;
          *p_elementBeforeAlert = 0;

          v125 = 1;
          v139 = v317;
          p_super = &v317->super;
        }

        v7 = v323;
LABEL_167:

LABEL_168:
        v154 = AXLogCommon();
        if (os_log_type_enabled(v154, OS_LOG_TYPE_DEFAULT))
        {
          isVisible = [(VOTElement *)self->_elementBeforePopup isVisible];
          v156 = self->_elementBeforePopup;
          *buf = 67109634;
          *v352 = v125;
          *&v352[4] = 1024;
          *&v352[6] = isVisible;
          *v353 = 2112;
          *&v353[2] = v156;
          _os_log_impl(&_mh_execute_header, v154, OS_LOG_TYPE_DEFAULT, "Chose new: %d, before pops: %d, %@", buf, 0x18u);
        }

        if (v125)
        {
LABEL_204:
          if ([(VOTElementManager *)self _shouldMoveToLastWebFormControl])
          {
            p_webFormControlBeforeInteraction = &self->_webFormControlBeforeInteraction;
            [(VOTElement *)self->_webFormControlBeforeInteraction updateLabel];
            [(VOTElement *)self->_webFormControlBeforeInteraction updateValue];
            v198 = self->_webFormControlBeforeInteraction;

            v199 = VOTLogWebPageMovement();
            if (os_log_type_enabled(v199, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C7CC();
            }

            application6 = *p_webFormControlBeforeInteraction;
            *p_webFormControlBeforeInteraction = 0;
            goto LABEL_208;
          }

          application4 = [p_super application];
          isSafari = [application4 isSafari];

          if (isSafari)
          {
            v206 = VOTLogWebPageMovement();
            if (os_log_type_enabled(v206, OS_LOG_TYPE_DEBUG))
            {
              webPageLoadedGenerationMark = [(VOTElementManager *)self webPageLoadedGenerationMark];
              currentElement = self->_currentElement;
              *buf = 134218498;
              *v352 = webPageLoadedGenerationMark;
              *&v352[8] = 1024;
              *v353 = v122;
              *&v353[4] = 2112;
              *&v353[6] = currentElement;
              _os_log_debug_impl(&_mh_execute_header, v206, OS_LOG_TYPE_DEBUG, "In safari, web generation: %lld\nstill valid: %d current: %@", buf, 0x1Cu);
            }

            if ([(VOTElementManager *)self webPageLoadedGenerationMark])
            {
              immediateRemoteParent = [p_super immediateRemoteParent];
              firstWebElement = [immediateRemoteParent firstWebElement];

              if (firstWebElement)
              {
                firstElementInApplication = 0;
                v14 = v322;
              }

              else
              {
                application5 = [p_super application];
                firstElementInApplication = [application5 firstElementInApplication];

                v14 = v322;
                if (!firstElementInApplication)
                {
                  v238 = VOTLogWebPageMovement();
                  if (os_log_type_enabled(v238, OS_LOG_TYPE_DEBUG))
                  {
                    sub_10012C6B0();
                  }

                  firstElementInApplication = p_super;
                }

                firstWebElement = [(VOTElementManager *)self _nearestWebElement:firstElementInApplication];
                if (!firstWebElement)
                {
                  goto LABEL_255;
                }
              }

              if (self->_previousWebElements)
              {
                v239 = [(VOTElementManager *)self _findPreviousWebElement:firstWebElement];
                v240 = v239;
                if (v239)
                {
                  v241 = v239;
                }

                else
                {
                  v241 = firstWebElement;
                }

                v242 = v241;

                v14 = v322;
                firstWebElement = v242;
              }

LABEL_255:
              v243 = VOTLogWebPageMovement();
              if (os_log_type_enabled(v243, OS_LOG_TYPE_DEBUG))
              {
                webPageLoadedGenerationMark2 = [(VOTElementManager *)self webPageLoadedGenerationMark];
                *buf = 134218498;
                *v352 = webPageLoadedGenerationMark2;
                *&v352[8] = 2112;
                *v353 = firstWebElement;
                *&v353[8] = 2112;
                *&v353[10] = firstElementInApplication;
                _os_log_debug_impl(&_mh_execute_header, v243, OS_LOG_TYPE_DEBUG, "Looking for webPageElement: %lld Nearest web element %@\n - starting with: %@", buf, 0x20u);
              }

              if (!firstWebElement)
              {
                v246 = VOTLogWebPageMovement();
                if (os_log_type_enabled(v246, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012C720();
                }

                _currentElement = v332;
                goto LABEL_357;
              }

              v244 = firstWebElement;
              v245 = p_super;
              application6 = v244;

              v198 = application6;
              _currentElement = v332;
              goto LABEL_208;
            }

            if ((v122 & 1) != 0 || (v230 = CFAbsoluteTimeGetCurrent(), [(VOTElementManager *)self lastElementChangeTime], v230 - v231 < 1.0))
            {
              _currentElement = v332;
              if ([(VOTElement *)*p_currentElement doesHaveTraits:kAXWebContentTrait])
              {
                v232 = VOTLogWebPageMovement();
                if (os_log_type_enabled(v232, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012C75C();
                }

                v14 = v322;
                goto LABEL_357;
              }
            }

            else
            {
              _currentElement = v332;
            }
          }

          else if ([(VOTElement *)*p_currentElement hasNativeFocus])
          {
            v198 = p_super;
            application6 = [(VOTElement *)*p_currentElement application];
            if ([(VOTElement *)application6 isVisible])
            {
              v216 = +[VOTElement systemAppApplication];
              focusedApplications2 = [v216 focusedApplications];
              application7 = [(VOTElement *)*p_currentElement application];
              v335 = [focusedApplications2 containsObject:application7];

              if (!v335)
              {
                goto LABEL_209;
              }

              [(VOTElement *)*p_currentElement updateIsVisible];
              immediateRemoteParent2 = [(VOTElement *)*p_currentElement immediateRemoteParent];
              [immediateRemoteParent2 updateIsVisible];

              if (![(VOTElement *)*p_currentElement isVisible])
              {
                goto LABEL_209;
              }

              immediateRemoteParent3 = [(VOTElement *)*p_currentElement immediateRemoteParent];
              if (immediateRemoteParent3)
              {
                v221 = immediateRemoteParent3;
                immediateRemoteParent4 = [(VOTElement *)*p_currentElement immediateRemoteParent];
                isVisible2 = [immediateRemoteParent4 isVisible];

                if (!isVisible2)
                {
                  goto LABEL_209;
                }
              }

              v224 = VOTLogWebPageMovement();
              if (os_log_type_enabled(v224, OS_LOG_TYPE_DEBUG))
              {
                sub_10012C640();
              }

              application6 = v198;
              v198 = *p_currentElement;
            }

LABEL_208:

LABEL_209:
            p_super = &v198->super;
          }

          _currentElement5 = [(VOTElementManager *)self _currentElement];
          v202 = [p_super isEqual:_currentElement5];

          if (v202)
          {
            v203 = 1;
LABEL_265:
            v249 = VOTLogLayoutChange();
            if (os_log_type_enabled(v249, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C83C();
            }

            v128 = [(VOTElementManager *)self _firstResponderForApplications:focusedApplications];
            brailleInputActive = [VOTSharedWorkspace brailleInputActive];
            traits2 = [v128 traits];
            if ((kAXIsEditingTrait & traits2) != 0)
            {
              v252 = brailleInputActive;
            }

            else
            {
              v252 = 0;
            }

            if (((v203 | v252) & 1) == 0)
            {
              [(VOTElementManager *)self deactivateGesturedTextInputIfNeeded:0];
            }

            if (+[AXSpringBoardServer isAvailable]&& AXDeviceHasJindo())
            {
              v253 = +[AXSpringBoardServer server];
              jindoAppBundleIndentifiers = [v253 jindoAppBundleIndentifiers];
              jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
              self->_jindoAppBundleIdentifiers = jindoAppBundleIndentifiers;

              v256 = self->_jindoAppBundleIdentifiers;
              bundleIdentifier3 = [p_super bundleIdentifier];
              if ([(NSArray *)v256 containsObject:bundleIdentifier3]&& ([p_super isInJindoWindow]& 1) == 0)
              {
                isInAppSwitcher = [p_super isInAppSwitcher];

                if ((isInAppSwitcher & 1) == 0)
                {

                  speakCopy = v320;
                  v14 = v322;
                  v7 = v323;
                  goto LABEL_357;
                }
              }

              else
              {
              }
            }

            [p_super scrollToElementForDirectional:1 withCompletion:0];
            [(VOTElementManager *)self _setCurrentElement:p_super];
            if ([v323 length])
            {
              v258 = [v342 addAttributedString:v323];
            }

            if (v325 && ([v339 containsObject:p_super] & 1) != 0)
            {
              focusedApplications = v333;
              goto LABEL_282;
            }

            if (v203)
            {
              focusedApplications = v333;
              v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
              if (![p_super isInAppSwitcher])
              {
                goto LABEL_283;
              }
            }

            else
            {
              label2 = [p_super label];
              focusedApplications = v333;
              v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
              if (label2)
              {
                v262 = label2;
                [p_super label];
                v264 = v263 = p_super;
                if ([v338 containsObject:v264])
                {
                  isInAppSwitcher2 = [v263 isInAppSwitcher];

                  p_super = v263;
                  if ((isInAppSwitcher2 & 1) == 0)
                  {
                    goto LABEL_283;
                  }
                }

                else
                {

                  p_super = v263;
                }
              }
            }

            [v340 updateTitleElements];
            titleElements = [v340 titleElements];
            if ([titleElements count])
            {
              v266 = [titleElements objectAtIndex:0];

              if (v266 && ([v266 isEqual:p_super] & 1) == 0)
              {
                label3 = [v266 label];
                lastTitleElemenTitle = self->_lastTitleElemenTitle;
                self->_lastTitleElemenTitle = label3;

                [(VOTElementManager *)self _addDescription:v266 toRequest:v342 withOptions:128];
              }
            }

            else
            {
              v266 = 0;
            }

            if (self->_flags.watchDisplayDidTurnOn)
            {
              v336 = v266;
              v269 = p_super;
              [(VOTElementManager *)self _getAutoSpeakWatchFaceElements:p_super];
              v345 = 0u;
              v346 = 0u;
              v347 = 0u;
              v270 = v348 = 0u;
              v271 = [v270 countByEnumeratingWithState:&v345 objects:v358 count:16];
              if (v271)
              {
                v272 = v271;
                v273 = *v346;
                do
                {
                  for (i = 0; i != v272; i = i + 1)
                  {
                    if (*v346 != v273)
                    {
                      objc_enumerationMutation(v270);
                    }

                    [(VOTElementManager *)self _addDescription:*(*(&v345 + 1) + 8 * i) toRequest:v342 withOptions:2];
                  }

                  v272 = [v270 countByEnumeratingWithState:&v345 objects:v358 count:16];
                }

                while (v272);
              }

              self->_flags.watchDisplayDidTurnOn = 0;
              focusedApplications = v333;
              v266 = v336;
              p_super = v269;
            }

            else
            {
              traits3 = [p_super traits];
              if (!v252 || ((kAXKeyboardKeyTrait | kAXAutoCorrectCandidateTrait) & traits3) == 0)
              {
                if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:p_super])
                {
                  v276 = 0x200000822;
                }

                else
                {
                  v276 = 2082;
                }

                [(VOTElementManager *)self _addDescription:p_super toRequest:v342 withOptions:v276];
              }
            }

            goto LABEL_313;
          }

          label4 = [p_super label];
          [(VOTElementManager *)self _currentElement];
          v212 = v211 = p_super;
          label5 = [v212 label];
          if ([label4 isEqualToString:label5])
          {
            _currentElement6 = [(VOTElementManager *)self _currentElement];
            v215 = sub_10002620C(v211, _currentElement6);

            if (v215)
            {
              v203 = 0;
              _currentElement = v332;
              p_super = v211;
              goto LABEL_265;
            }

            v228 = !v215;
            v225 = v211;
            application8 = [v211 application];
            label4 = [application8 titleElements];

            if ([label4 count])
            {
              v212 = [label4 objectAtIndex:0];
            }

            else
            {
              v212 = 0;
            }

            label6 = [v212 label];
            v248 = [label6 isEqualToString:self->_lastTitleElemenTitle];

            v203 = v248 & v228;
          }

          else
          {
            v225 = v211;

            v203 = 0;
          }

          _currentElement = v332;
          p_super = v225;
          goto LABEL_265;
        }

        v157 = self->_elementBeforePopup;
        if (!v157)
        {
          goto LABEL_190;
        }

        p_elementBeforePopup = &self->_elementBeforePopup;
        [(VOTElement *)v157 updateIsVisible];
        if (![(VOTElement *)self->_elementBeforePopup isVisible]|| ![(VOTElement *)*p_elementBeforePopup doesHaveTraits:kAXLaunchIconTrait | kAXWebContentTrait]&& ![(VOTElement *)*p_elementBeforePopup isChronod])
        {
          goto LABEL_190;
        }

        if (([p_super doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait]& 1) != 0)
        {
          goto LABEL_190;
        }

        v318 = p_super;
        v159 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v159, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C480();
        }

        application9 = [(VOTElement *)*p_elementBeforePopup application];
        uiElement = [application9 uiElement];
        v162 = [uiElement pid];
        uiElement2 = [(VOTElement *)*p_elementBeforePopup uiElement];
        v164 = [uiElement2 pid];

        v165 = application9;
        if (v162 != v164)
        {
          uiElement3 = [(VOTElement *)*p_elementBeforePopup uiElement];
          [uiElement3 axElement];
          v167 = AXUICreateApplicationElementForElement();

          v165 = application9;
          if (v167)
          {
            v168 = [AXUIElement uiElementWithAXElement:v167];
            v165 = [VOTElement elementWithUIElement:v168];

            CFRelease(v167);
          }
        }

        v165 = [(VOTElement *)*p_elementBeforePopup isValidForApplication:v165, v165];
        v170 = +[VOTElement systemWideElement];
        [(VOTElement *)*p_elementBeforePopup centerPoint];
        [v170 convertPoint:-[VOTElement windowContextId](*p_elementBeforePopup fromContextId:{"windowContextId"), v171, v172}];
        v174 = v173;
        v176 = v175;

        v176 = [[VOTElement alloc] initWithPosition:v174, v176];
        speakCopy = v320;
        if ([focusedApplications containsObject:application9])
        {
          if (!v165)
          {
            goto LABEL_189;
          }
        }

        else if (([(VOTElement *)*p_elementBeforePopup isChronod]& v165 & 1) == 0)
        {
LABEL_189:

          v7 = v323;
          _currentElement = v332;
          p_super = v318;
LABEL_190:
          if (self->_elementBeforeMenuBar && ([p_super isInMenuBar]& 1) == 0)
          {
            v319 = p_super;
            v226 = +[AXSpringBoardServer server];
            isMenuBarModal = [v226 isMenuBarModal];

            if (isMenuBarModal)
            {
              v193 = 0;
              v192 = v319;
            }

            else
            {
              p_elementBeforeMenuBar = &self->_elementBeforeMenuBar;
              [(VOTElement *)self->_elementBeforeMenuBar updateIsVisible];
              isVisible3 = [(VOTElement *)self->_elementBeforeMenuBar isVisible];
              v193 = isVisible3;
              if (isVisible3)
              {
                v235 = *p_elementBeforeMenuBar;

                v236 = VOTLogLayoutChange();
                if (os_log_type_enabled(v236, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012C560();
                }

                _currentElement = v332;
              }

              else
              {
                v235 = v319;
              }

              v310 = *p_elementBeforeMenuBar;
              *p_elementBeforeMenuBar = 0;

              v192 = &v235->super;
            }
          }

          else
          {
            v192 = p_super;
            v193 = 0;
          }

          if (v193 & 1) != 0 || ((v324 ^ 1))
          {
            p_super = v192;
          }

          else
          {
            p_super = v192;
            if ((byte_1001FECE8 & 1) == 0)
            {
              if ([v192 doesHaveTraits:v327])
              {
                if ([(NSArray *)*v334 count]== 1)
                {
                  firstObject4 = [(NSArray *)*v334 firstObject];
                  isSpringBoard = [firstObject4 isSpringBoard];

                  if (isSpringBoard)
                  {
                    v196 = VOTLogWebPageMovement();
                    v14 = v322;
                    if (os_log_type_enabled(v196, OS_LOG_TYPE_DEBUG))
                    {
                      sub_10012C5D0();
                    }

                    [(VOTElementManager *)self _handleScreenChange:0 sound:0];
                    byte_1001FECE8 = 1;
                    goto LABEL_357;
                  }
                }
              }
            }
          }

          goto LABEL_203;
        }

        [(VOTElement *)v176 frame];
        v179 = v178;
        v181 = v180;
        v183 = v182;
        v185 = v184;
        [(VOTElement *)*p_elementBeforePopup frame];
        v364.origin.x = v186;
        v364.origin.y = v187;
        v364.size.width = v188;
        v364.size.height = v189;
        v361.origin.x = v179;
        v361.origin.y = v181;
        v361.size.width = v183;
        v361.size.height = v185;
        v362 = CGRectIntersection(v361, v364);
        if (v362.size.width > 0.0)
        {
          p_super = v176;

          v190 = VOTLogLayoutChange();
          if (os_log_type_enabled(v190, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C4F0();
          }

          v191 = *p_elementBeforePopup;
          *p_elementBeforePopup = 0;

          v7 = v323;
          _currentElement = v332;
LABEL_203:
          v122 = v321;
          goto LABEL_204;
        }

        goto LABEL_189;
      }

      v95 = p_super;
      uiElement4 = [_currentElement uiElement];
      if ([uiElement4 BOOLWithAXAttribute:2211])
      {
      }

      else
      {
        if (!AXDeviceHasJindo())
        {
          goto LABEL_119;
        }

        isInJindoWindow = [_currentElement isInJindoWindow];

        if ((isInJindoWindow & 1) == 0)
        {
          p_super = v95;
          goto LABEL_121;
        }
      }

      v97 = +[VOTElement systemWideElement];
      [_currentElement centerPoint];
      [v97 convertPoint:objc_msgSend(_currentElement fromContextId:{"windowContextId"), v98, v99}];
      v101 = v100;
      v103 = v102;

      v103 = [[VOTElement alloc] initWithPosition:v101, v103];
      uiElement4 = v103;
      if (v103 && [(VOTElement *)v103 isEqual:_currentElement]&& v10 >= 1.25)
      {
        v105 = _currentElement;

        v106 = VOTLogLayoutChange();
        if (os_log_type_enabled(v106, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C130();
        }

        goto LABEL_120;
      }

LABEL_119:
      v105 = v95;
LABEL_120:

      p_super = v105;
      goto LABEL_121;
    }

    previousTableOrCollectionViewApplication2 = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
    focusedApplications = v333;
    if ([previousTableOrCollectionViewApplication2 isSpringBoard])
    {
      _currentElement = v332;
LABEL_101:

      v7 = v323;
      goto LABEL_102;
    }

    v326 = p_super;
    previousTableOrCollectionViewApplication3 = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
    isSetupBuddy = [previousTableOrCollectionViewApplication3 isSetupBuddy];

    _currentElement = v332;
    if (isSetupBuddy)
    {
      v7 = v323;
      p_super = v326;
      goto LABEL_102;
    }

    previousTableOrCollectionViewList2 = [(VOTElementManager *)self previousTableOrCollectionViewList];
    v64 = [previousTableOrCollectionViewList2 count];

    if ((v64 - 1) < 0)
    {
      previousTableOrCollectionViewApplication2 = 0;
      v65 = 0;
LABEL_95:
      if (![_currentElement isEqual:previousTableOrCollectionViewApplication2])
      {
        p_super = v326;
        goto LABEL_100;
      }

      v91 = VOTLogLayoutChange();
      p_super = v326;
      if (os_log_type_enabled(v91, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v91, OS_LOG_TYPE_INFO, "Not restoring focus to previous table cell because the previous table cell element is the same as the element we are currently focused on.", buf, 2u);
      }
    }

    else
    {
      v316 = nextElementToFocus;
      v65 = 0;
      while (1)
      {
        v66 = v65;
        v67 = (v64 - 1);
        previousTableOrCollectionViewList3 = [(VOTElementManager *)self previousTableOrCollectionViewList];
        v69 = [previousTableOrCollectionViewList3 objectAtIndexedSubscript:v64 - 1];

        previousTableOrCollectionViewToMetadata2 = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
        v71 = [previousTableOrCollectionViewToMetadata2 objectForKey:v69];
        indexPath = [v71 indexPath];
        v74 = v73;

        previousTableOrCollectionViewToMetadata3 = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
        v76 = [previousTableOrCollectionViewToMetadata3 objectForKey:v69];
        label7 = [v76 label];

        if (indexPath != 0x7FFFFFFFFFFFFFFFLL)
        {
          previousTableOrCollectionViewApplication4 = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
          previousTableOrCollectionViewApplication2 = [previousTableOrCollectionViewApplication4 cellWithRowIndexPath:indexPath parentView:{v74, v69}];

          if (previousTableOrCollectionViewApplication2)
          {
            break;
          }
        }

        --v64;
        v65 = label7;
        if (v67 <= 0)
        {
          previousTableOrCollectionViewApplication2 = 0;
          speakCopy = v320;
          _currentElement = v332;
          focusedApplications = v333;
LABEL_94:
          nextElementToFocus = v316;
          goto LABEL_95;
        }
      }

      previousTableOrCollectionViewList4 = [(VOTElementManager *)self previousTableOrCollectionViewList];
      previousTableOrCollectionViewList5 = [(VOTElementManager *)self previousTableOrCollectionViewList];
      [previousTableOrCollectionViewList4 removeObjectsInRange:{v64, objc_msgSend(previousTableOrCollectionViewList5, "count") - v64}];

      _currentElement = v332;
      if ([v332 isEqual:previousTableOrCollectionViewApplication2])
      {
        speakCopy = v320;
        focusedApplications = v333;
        v65 = label7;
        goto LABEL_94;
      }

      application10 = [previousTableOrCollectionViewApplication2 application];
      application11 = [v326 application];
      v83 = [application10 isEqual:application11];

      speakCopy = v320;
      focusedApplications = v333;
      v65 = label7;
      if (!v83)
      {
        goto LABEL_94;
      }

      label8 = [previousTableOrCollectionViewApplication2 label];
      v85 = [_PASLevenshtein distanceBetweenStrings:v65 and:label8];
      v86 = [v65 length];
      v314 = label8;
      v87 = [label8 length];
      if (v86 <= v87)
      {
        v88 = v87;
      }

      else
      {
        v88 = v86;
      }

      nextElementToFocus = v316;
      if (v88 && (v88 - v85) / v88 <= 0.8)
      {
        v90 = VOTLogLayoutChange();
        if (os_log_type_enabled(v90, OS_LOG_TYPE_INFO))
        {
          *buf = 0;
          _os_log_impl(&_mh_execute_header, v90, OS_LOG_TYPE_INFO, "Not restoring focus to previous table cell because the previous table cell element has a different label from its current counterpart - table view may have changed out from under us.", buf, 2u);
        }

        v89 = v326;
      }

      else
      {
        v89 = previousTableOrCollectionViewApplication2;

        v90 = VOTLogLayoutChange();
        if (os_log_type_enabled(v90, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C084();
        }
      }

      v91 = v314;

      p_super = v89;
    }

LABEL_100:
    goto LABEL_101;
  }

LABEL_360:
}

- (id)_getAutoSpeakWatchFaceElements:(id)elements
{
  elementsCopy = elements;
  v4 = +[NSMutableArray array];
  v5 = v4;
  if (elementsCopy)
  {
    [v4 addObject:elementsCopy];
  }

  autoSpeakWatchElements = [elementsCopy autoSpeakWatchElements];
  if ([autoSpeakWatchElements count])
  {
    [v5 addObjectsFromArray:autoSpeakWatchElements];
  }

  return v5;
}

- (id)_firstElementWithCurrentElement:(id)element focusedApplications:(id)applications
{
  elementCopy = element;
  applicationsCopy = applications;
  v8 = [(VOTElementManager *)self _firstResponderForApplications:applicationsCopy];
  v9 = VOTLogLayoutChange();
  if (os_log_type_enabled(v9, OS_LOG_TYPE_DEBUG))
  {
    sub_10012C8AC();
  }

  if (!v8)
  {
    v10 = [(VOTElementManager *)self _allElementCommunitiesWithFocusedApplications:applicationsCopy];
    v11 = [(VOTElementManager *)self _elementCommunityForElement:elementCopy];
    if (!elementCopy && CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime <= 2.0)
    {
      v12 = [(VOTElementManager *)self _elementCommunityForElement:self->_elementBeforeScreenChange];

      v11 = v12;
    }

    v8 = [(VOTElementManager *)self _firstElementForFocusFromElementCommunities:v10 currentElement:elementCopy];
    v13 = [(VOTElementManager *)self _elementCommunityForElement:v8];
    v14 = VOTLogLayoutChange();
    if (os_log_type_enabled(v14, OS_LOG_TYPE_DEBUG))
    {
      sub_10012C91C();
    }

    if (([v8 isAlive] & 1) == 0)
    {
      v15 = VOTLogLayoutChange();
      if (os_log_type_enabled(v15, OS_LOG_TYPE_DEBUG))
      {
        sub_10012C988();
      }

      v8 = 0;
    }
  }

  return v8;
}

- (void)_handleSystemLockedOutputBehavior:(id)behavior shouldSendRequest:(BOOL *)request startElement:(id *)element
{
  behaviorCopy = behavior;
  isRingerSwitchSilent = [VOTSharedWorkspace isRingerSwitchSilent];
  useRingerSwitchForNotificationOutput = [VOTSharedWorkspace useRingerSwitchForNotificationOutput];
  notificationsWhenLockedOutput = [VOTSharedWorkspace notificationsWhenLockedOutput];
  if (useRingerSwitchForNotificationOutput)
  {
    v12 = isRingerSwitchSilent == 0;
  }

  else
  {
    v12 = 1;
  }

  if (v12 || ([VOTSharedWorkspace userUnlockedDevice] & 1) != 0)
  {
    v13 = [*element elementsInDirection:1 withCount:100];
    v14 = [NSMutableArray arrayWithArray:v13];

    if (*element && ([v14 containsObject:?] & 1) == 0)
    {
      [v14 insertObject:*element atIndex:0];
    }

    v35 = 0u;
    v36 = 0u;
    v33 = 0u;
    v34 = 0u;
    v15 = v14;
    v16 = [v15 countByEnumeratingWithState:&v33 objects:v37 count:16];
    if (v16)
    {
      v17 = *v34;
      while (2)
      {
        for (i = 0; i != v16; i = i + 1)
        {
          if (*v34 != v17)
          {
            objc_enumerationMutation(v15);
          }

          v19 = *(*(&v33 + 1) + 8 * i);
          if ([v19 isAwayAlertItem])
          {
            v16 = v19;
            goto LABEL_19;
          }
        }

        v16 = [v15 countByEnumeratingWithState:&v33 objects:v37 count:16];
        if (v16)
        {
          continue;
        }

        break;
      }
    }

LABEL_19:

    v20 = +[VOTElement springBoardApplication];
    notificationCount = [v20 notificationCount];

    if (notificationCount >= 1)
    {
      v22 = [VOTSharedWorkspace userRecentlyUnlockedDevice] ^ 1;
      v23 = +[VOTElement springBoardApplication];
      v32 = [v23 notificationSummary:v22];

      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      sub_1000516CC(off_1001FDDD0, @"number.of.alerts", 0, selectedLanguage);
      v26 = v25 = notificationsWhenLockedOutput;
      v27 = [NSString localizedStringWithFormat:v26, notificationCount];

      if (v25 == 1)
      {
        v28 = v32;
        if (([VOTSharedWorkspace userRecentlyUnlockedDevice] & 1) == 0)
        {
          [behaviorCopy removeActions];
        }
      }

      else
      {
        if (v16 && ([VOTSharedWorkspace userUnlockedDevice] & 1) == 0)
        {
          v29 = v16;
          *element = v16;
          [behaviorCopy removeActions];
        }

        if ((v25 & 0x30) != 0)
        {
          v30 = [behaviorCopy addString:v27 withLanguage:selectedLanguage];
        }

        v28 = v32;
        if ((v25 & 0x12) != 0)
        {
          v31 = [behaviorCopy addString:v32];
        }

        if (v25 == 16)
        {
          [behaviorCopy setLimitToComponentType:3];
        }
      }
    }
  }

  else
  {
    self->_lastSilencedAlertTime = CFAbsoluteTimeGetCurrent();
    *request = 0;
  }
}

- (void)_handleElementChangedNotification:(id)notification
{
  notificationCopy = notification;
  v5 = VOTLogLayoutChange();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012C9C4();
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![(VOTElementManager *)self _shouldIgnoreElementMovementNotification:notificationCopy])
  {
    didReceiveForceUpdateChangeToken = [(VOTElementManager *)self didReceiveForceUpdateChangeToken];
    [(VOTElementManager *)self setDidReceiveForceUpdateChangeToken:0];
    if ([(VOTElementManager *)self _notificationData:notificationCopy containsToken:kAXPerformElementUpdateImmediatelyToken])
    {
      v7 = 0.05;
    }

    else
    {
      v7 = 0.75;
    }

    if ([(VOTElementManager *)self _notificationData:notificationCopy containsToken:kAXAnnouncementTypeStopSpeech])
    {
      self->_flags.shouldSpeakNextLayoutChange = 0;
      if (didReceiveForceUpdateChangeToken)
      {
        goto LABEL_17;
      }
    }

    else
    {
      if (CFAbsoluteTimeGetCurrent() - self->_lastActivationTime < 0.25)
      {
        goto LABEL_17;
      }

      nextElementToFocus = [(VOTElementManager *)self nextElementToFocus];
      if (nextElementToFocus)
      {
        _currentElement = [(VOTElementManager *)self _currentElement];
        uniqueIdentification = [_currentElement uniqueIdentification];
        nextElementToFocus2 = [(VOTElementManager *)self nextElementToFocus];
        uniqueIdentification2 = [nextElementToFocus2 uniqueIdentification];
        v13 = [uniqueIdentification isEqual:uniqueIdentification2] ^ 1;
      }

      else
      {
        v13 = 1;
      }

      self->_flags.shouldSpeakNextLayoutChange = v13;
      if (didReceiveForceUpdateChangeToken)
      {
        goto LABEL_17;
      }
    }

    _currentElement2 = [(VOTElementManager *)self _currentElement];
    application = [_currentElement2 application];
    isIBooks = [application isIBooks];

    if (!isIBooks)
    {
LABEL_18:
      [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer cancel];
      [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer dispatchAfterDelay:v7];
      goto LABEL_19;
    }

LABEL_17:
    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
    goto LABEL_18;
  }

LABEL_19:
}

- (void)_handleLayoutChange:(BOOL)change
{
  changeCopy = change;
  [(VOTElementManager *)self setCachedAdditionalElementCommunities:0];
  nextElementToFocus = [(VOTElementManager *)self nextElementToFocus];
  [(VOTElementManager *)self setNextElementToFocus:0];
  [(VOTElementManager *)self setNextStringToSpeakOnScreenChange:0];
  v6 = VOTLogLayoutChange();
  if (os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG))
  {
    sub_10012CA34();
  }

  v7 = +[VOTElement springBoardApplication];
  isSystemSleeping = [v7 isSystemSleeping];

  if ((isSystemSleeping & 1) == 0)
  {
    v9 = +[VOTElement systemAppApplication];
    isVoiceControlRunning = [v9 isVoiceControlRunning];

    if ((isVoiceControlRunning & 1) == 0)
    {
      if ([(VOTElementManager *)self _currentElementIsTrappedInAuthentication])
      {
        _currentElement = VOTLogElement();
        if (!os_log_type_enabled(_currentElement, OS_LOG_TYPE_DEFAULT))
        {
LABEL_9:

          goto LABEL_15;
        }

        LOWORD(buf) = 0;
        v12 = "Not moving VO focus, current element is an Authentication element";
LABEL_8:
        _os_log_impl(&_mh_execute_header, _currentElement, OS_LOG_TYPE_DEFAULT, v12, &buf, 2u);
        goto LABEL_9;
      }

      if ([VOTSharedWorkspace brailleInputActive] && (objc_msgSend(VOTSharedWorkspace, "brailleInputAllowsElementMovement") & 1) == 0)
      {
        _currentElement = VOTLogElement();
        if (!os_log_type_enabled(_currentElement, OS_LOG_TYPE_DEFAULT))
        {
          goto LABEL_9;
        }

        LOWORD(buf) = 0;
        v12 = "Stopping _handleLayoutChange to prevent the focus from moving while we're editing text in BSI";
        goto LABEL_8;
      }

      if (([VOTSharedWorkspace tapAndHoldMode] & 1) == 0 && !self->_flags.isReadingAll && !self->_flags.performedElementUpdateForSelectionChange)
      {
        _currentElement = [(VOTElementManager *)self _currentElement];
        if (self->_systemIsSleeping)
        {
          v13 = +[VOTElement springBoardApplication];
          firstElementInApplicationForFocus = [v13 firstElementInApplicationForFocus];

          v15 = firstElementInApplicationForFocus;
        }

        else
        {
          v15 = nextElementToFocus;
        }

        v16 = kAXWebContentTrait;
        v169 = kAXWebContentTrait;
        v170 = v15;
        if (v15)
        {
          v17 = [v15 doesHaveTraits:?];
          v16 = v169;
        }

        else
        {
          v17 = 1;
        }

        v168 = kAXIsEditingTrait;
        if ([_currentElement doesHaveAllTraits:kAXIsEditingTrait | v16])
        {
          application = [_currentElement application];
          isMail = [application isMail];

          if ((isMail & v17) != 0)
          {
            v20 = VOTLogLayoutChange();
            if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
            {
              sub_10012D0F4();
            }

LABEL_231:

            nextElementToFocus = v170;
            goto LABEL_9;
          }
        }

        self->_systemIsSleeping = 0;
        if ([(VOTElementManager *)self webPageLoadedGenerationMark])
        {
          v20 = VOTLogWebPageMovement();
          if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
          {
            sub_10012CAA4(self);
          }

          goto LABEL_231;
        }

        v21 = VOTLogLayoutChange();
        if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
        {
          sub_10012CB28();
        }

        [_currentElement centerPoint];
        v23 = v22;
        v25 = v24;
        [_currentElement updateCenterPoint];
        [_currentElement centerPoint];
        v27 = v26;
        v29 = v28;
        remoteParent = [_currentElement remoteParent];
        v31 = nextElementToFocus == 0;
        if (remoteParent)
        {

          if (nextElementToFocus)
          {
            goto LABEL_56;
          }
        }

        else
        {
          application2 = [_currentElement application];
          v33 = [_currentElement isValidForApplication:application2];

          if (!v31)
          {
            goto LABEL_56;
          }

          if ((v33 & 1) == 0)
          {
            x = CGPointZero.x;
            y = CGPointZero.y;
LABEL_42:
            if (v23 == x && v25 == y)
            {
              v36 = VOTLogLayoutChange();
              if (os_log_type_enabled(v36, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CB94(self);
              }

              v27 = self->_lastValidElementLocation.x;
              v29 = self->_lastValidElementLocation.y;
            }

            else
            {
              v37 = sub_100052310();
              v38 = xmmword_1001FF150;
              v39 = +[VOTElement systemWideElement];
              [v39 convertPoint:-[NSObject windowContextId](_currentElement fromContextId:{"windowContextId"), v27, v29}];
              v41 = v40;

              if (v41 >= 0.0)
              {
                if (v37)
                {
                  v43 = *(&v38 + 1);
                }

                else
                {
                  v43 = *&v38;
                }

                v44 = v43;
                if (v41 < v44)
                {
                  v29 = v25;
                  v27 = v23;
                  goto LABEL_56;
                }

                previousElement = [_currentElement previousElement];
              }

              else
              {
                previousElement = [_currentElement nextElement];
              }

              v170 = previousElement;
            }

LABEL_56:
            opaqueParent = [_currentElement opaqueParent];
            if ([v170 isValid])
            {
              currentOpaqueElement = v170;
              goto LABEL_104;
            }

            if ([_currentElement doesHaveTraits:kAXMenuItemTrait]&& (p_firstResponderElement = &self->_firstResponderElement, firstResponderElement = self->_firstResponderElement, [(VOTElement *)firstResponderElement application], v48 = objc_claimAutoreleasedReturnValue(), LODWORD(firstResponderElement) = [(VOTElement *)firstResponderElement isValidForApplication:v48], v48, firstResponderElement))
            {
              if (![(VOTElement *)*p_firstResponderElement isAccessibleElement])
              {
                goto LABEL_109;
              }

              currentOpaqueElement = *p_firstResponderElement;
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CEBC();
              }
            }

            else if ([(VOTElementManager *)self _isElementValidForFirstResponder:_currentElement]&& [_currentElement isAlive]&& (v27 != CGPointZero.x || v29 != CGPointZero.y) && (currentApplications = self->_currentApplications, [_currentElement application], v51 = objc_claimAutoreleasedReturnValue(), LODWORD(currentApplications) = [(NSArray *)currentApplications containsObject:v51], v51, currentApplications))
            {
              currentOpaqueElement = _currentElement;
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CC34();
              }
            }

            else if (opaqueParent && ((-[NSObject remoteParent](_currentElement, "remoteParent"), (v52 = objc_claimAutoreleasedReturnValue()) == 0) || (-[NSObject localOpaqueParent](_currentElement, "localOpaqueParent"), v53 = objc_claimAutoreleasedReturnValue(), v54 = [opaqueParent isEqual:v53], v53, v52, v54)))
            {
              opaqueParent2 = [_currentElement opaqueParent];
              currentOpaqueElement = [opaqueParent2 currentOpaqueElement];

              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CC70();
              }
            }

            else if ([_currentElement doesHaveTraits:v169]&& ((v56 = [_currentElement isAlive], v23 != 0.0) ? (v57 = v56) : (v57 = 0), v57 == 1 && v25 != 0.0))
            {
              currentOpaqueElement = _currentElement;
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CE30(currentOpaqueElement);
              }
            }

            else
            {
              if ([_currentElement verifyElementExists:0])
              {
                v58 = _currentElement;
              }

              else
              {
                v59 = +[VOTElement systemWideElement];
                [v59 convertPoint:-[NSObject windowContextId](_currentElement fromContextId:{"windowContextId"), v27, v29}];
                v61 = v60;
                v63 = v62;

                v64 = objc_allocWithZone(VOTElement);
                application3 = [_currentElement application];
                v58 = [v64 initWithPosition:application3 application:-[NSObject windowContextId](_currentElement contextId:{"windowContextId"), v61, v63}];

                if (!v58)
                {
                  v58 = [objc_allocWithZone(VOTElement) initWithPosition:{v61, v63}];
                }

                v66 = VOTLogLayoutChange();
                if (os_log_type_enabled(v66, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012CCE0(v61, v63);
                }
              }

              if ([(VOTElement *)v58 isEqual:self->_currentElement])
              {
                goto LABEL_103;
              }

              if ([VOTSharedWorkspace navigationStyleHonorsGroups] && -[VOTElement isAccessibleGroup](self->_currentElement, "isAccessibleGroup") && -[VOTElement elementIsDescendant:](self->_currentElement, "elementIsDescendant:", v58))
              {
                currentOpaqueElement = self->_currentElement;

                goto LABEL_104;
              }

              if (([_currentElement updateVisiblePoint], [_currentElement visiblePoint], v69 = v67, v70 = v68, v67 == CGPointZero.x) && v68 == CGPointZero.y || v67 == -1.0 && v68 == -1.0)
              {
LABEL_103:
                currentOpaqueElement = v58;
                goto LABEL_104;
              }

              v151 = +[VOTElement systemWideElement];
              [v151 convertPoint:-[NSObject windowContextId](_currentElement fromContextId:{"windowContextId"), v69, v70}];
              v153 = v152;
              v155 = v154;

              currentOpaqueElement = [objc_allocWithZone(VOTElement) initWithPosition:{v153, v155}];
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CD88(v153, v155);
              }
            }

LABEL_104:
            if (currentOpaqueElement)
            {
              if (!-[VOTElement isTouchContainer](currentOpaqueElement, "isTouchContainer") || [VOTSharedWorkspace navigationStyleHonorsGroups] && -[VOTElement isAccessibleGroup](currentOpaqueElement, "isAccessibleGroup"))
              {
                p_super = &currentOpaqueElement->super;
                goto LABEL_118;
              }

              p_super = [(VOTElement *)currentOpaqueElement firstContainedElement];

              application6 = VOTLogLayoutChange();
              if (os_log_type_enabled(application6, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CF2C();
              }

              goto LABEL_117;
            }

LABEL_109:
            p_super = [(VOTElementManager *)self _sonarElementInForwardDirection:0 limit:20];
            v72 = VOTLogLayoutChange();
            if (os_log_type_enabled(v72, OS_LOG_TYPE_DEBUG))
            {
              sub_10012CF9C();
            }

            if (p_super)
            {
LABEL_118:
              if ([p_super doesHaveTraits:kAXStatusBarElementTrait]&& ([p_super doesHaveTraits:kAXAllowsLayoutChangeInStatusBarTrait]& 1) == 0)
              {

                v75 = VOTLogLayoutChange();
                if (os_log_type_enabled(v75, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012D07C();
                }

                p_super = 0;
              }

              if ([p_super doesHaveTraits:v169])
              {
                application4 = [p_super application];
                firstResponderElement = [application4 firstResponderElement];

                if ([firstResponderElement doesHaveAllTraits:v168 | v169] && (-[NSObject doesHaveTraits:](_currentElement, "doesHaveTraits:", kAXKeyboardKeyTrait) & 1) == 0 && (self->_lastActivationTime > self->_lastElementChangeTime || v170))
                {
                  v78 = firstResponderElement;

                  p_super = v78;
                }
              }

              if ([p_super doesHaveTraits:kAXAutoCorrectCandidateTrait])
              {
                firstVisibleElementInList = [p_super firstVisibleElementInList];
                v80 = firstVisibleElementInList;
                if (firstVisibleElementInList)
                {
                  v81 = firstVisibleElementInList;

                  p_super = v81;
                }
              }

              if ([p_super doesHaveTraits:kAXLaunchIconTrait]&& CFAbsoluteTimeGetCurrent() - self->_lastItemSelectionFromTouch > 1.0)
              {
                v82 = [(VOTElementManager *)self _cachedLaunchIcon:p_super];
                v83 = +[AXSubsystemVoiceOver sharedInstance];
                ignoreLogging = [v83 ignoreLogging];

                if ((ignoreLogging & 1) == 0)
                {
                  v85 = +[AXSubsystemVoiceOver identifier];
                  v86 = AXLoggerForFacility();

                  v87 = AXOSLogLevelFromAXLogLevel();
                  if (os_log_type_enabled(v86, v87))
                  {
                    v165 = AXColorizeFormatLog();
                    v161 = v82;
                    v163 = _AXStringForArgs();
                    v88 = v86;
                    if (os_log_type_enabled(v88, v87))
                    {
                      LODWORD(buf) = 138543362;
                      *(&buf + 4) = v163;
                      _os_log_impl(&_mh_execute_header, v88, v87, "%{public}@", &buf, 0xCu);
                    }
                  }
                }

                if (v82)
                {
                  v89 = v82;

                  p_super = v89;
                }
              }

              v90 = kAXKeyboardKeyTrait;
              if ([_currentElement doesHaveTraits:kAXKeyboardKeyTrait, v161]&& [_currentElement isInternationalKeyboardKey]&& ([p_super isInternationalKeyboardKey]& 1) == 0)
              {
                v91 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C9F90 startElement:p_super];
                v92 = v91;
                if (v91)
                {
                  v93 = v91;

                  p_super = v93;
                }
              }

              if ([p_super isBannerNotification]&& ([_currentElement isBannerNotification]& 1) == 0)
              {
                v94 = VOTLogElement();
                if (os_log_type_enabled(v94, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012D0B8();
                }

                p_super = 0;
              }

              fingerCount = [VOTSharedWorkspace fingerCount];
              if (!p_super || !changeCopy)
              {
                v20 = p_super;
LABEL_213:
                v129 = v169;
                if (v20)
                {
                  if (!fingerCount)
                  {
                    if (([v20 isSiriTalkingOrListening]& 1) == 0)
                    {
                      [(VOTElementManager *)self _setCurrentElement:v20];

                      [v20 updateFrame];
                      [v20 updateCenterPoint];
                      [v20 updateTraits];
                      [v20 updateEquivalenceTag];
                      location = self->_highlightedCharacterRange.location;
                      if (location == 0x7FFFFFFF || ([v20 boundsForRange:location, self->_highlightedCharacterRange.length], v131 = v185.origin.x, v132 = v185.origin.y, width = v185.size.width, height = v185.size.height, v186.origin.x = CGRectZero.origin.x, v186.origin.y = CGRectZero.origin.y, v186.size.width = CGRectZero.size.width, v186.size.height = CGRectZero.size.height, CGRectEqualToRect(v185, v186)))
                      {
                        v135 = +[VOTDisplayManager displayManager];
                        [v135 setCursorFrameForElement:v20];
                      }

                      else
                      {
                        v140 = +[VOTElement systemWideElement];
                        [v140 convertRect:-[NSObject windowContextId](v20 fromContextId:{"windowContextId"), v131, v132, width, height}];
                        v142 = v141;
                        v144 = v143;
                        v146 = v145;
                        v148 = v147;

                        v135 = +[VOTDisplayManager displayManager];
                        [v135 setCursorFrame:{v142, v144, v146, v148}];
                      }

                      _currentElement = 0;
                    }

                    v129 = v169;
                  }

                  if (([v20 doesHaveTraits:v129]& 1) == 0)
                  {
                    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
                    [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v20];
                  }
                }

                else
                {
                  v136 = +[VOTDisplayManager displayManager];
                  [v136 setCursorFrameForElement:0];
                }

                _currentElement2 = [(VOTElementManager *)self _currentElement];
                v150 = [_currentElement2 doesHaveTraits:kAXAllowsDirectInteractionTrait];

                if ((v150 & 1) == 0)
                {
                  [(VOTElementManager *)self _resetDirectInteractionCache];
                }

                [(VOTElementManager *)self setLastLayoutChangeNotificationTime:CFAbsoluteTimeGetCurrent()];
                [(VOTElementManager *)self _resetItemChooserCache];

                goto LABEL_231;
              }

              v162 = [_currentElement isEqual:p_super];
              application5 = [_currentElement application];
              isSpringBoard = [application5 isSpringBoard];
              if (_currentElement)
              {
                v97 = isSpringBoard;
              }

              else
              {
                v97 = 1;
              }

              if (v97 == 1)
              {
                v98 = +[VOTElement springBoardApplication];
                isSystemLocked = [v98 isSystemLocked];
              }

              else
              {
                isSystemLocked = 0;
              }

              equivalenceTag = [_currentElement equivalenceTag];
              equivalenceTag2 = [p_super equivalenceTag];
              v101 = [equivalenceTag isEqualToString:equivalenceTag2];
              if ((v101 & isSystemLocked) == 1)
              {
                isAwayAlertItem = [_currentElement isAwayAlertItem];

                if (!(v162 & 1 | ((isAwayAlertItem & 1) == 0)))
                {
                  goto LABEL_167;
                }
              }

              else
              {

                if (!v101)
                {
LABEL_167:
                  if (v162)
                  {
                    v103 = [_currentElement doesHaveTraits:kAXUpdatesFrequentlyTrait]^ 1 | isSystemLocked;
                  }

                  else
                  {
                    LOBYTE(v103) = 1;
                  }

LABEL_172:
                  v105 = v170;
                  *&buf = 0;
                  *(&buf + 1) = &buf;
                  v181 = 0x3032000000;
                  v182 = sub_100068050;
                  v183 = sub_100068060;
                  v184 = 0;
                  if ((v103 & 1) == 0)
                  {
                    v20 = p_super;
LABEL_212:
                    _Block_object_dispose(&buf, 8);

                    goto LABEL_213;
                  }

                  if (!v170)
                  {
                    opaqueParent3 = [p_super opaqueParent];
                    v107 = opaqueParent3 == 0;

                    v105 = 0;
                    if (v107)
                    {
                      [_currentElement frame];
                      v173[0] = _NSConcreteStackBlock;
                      v173[1] = 3221225472;
                      v173[2] = sub_10009A058;
                      v173[3] = &unk_1001C9FB8;
                      v176 = v108;
                      v177 = v109;
                      v178 = v110;
                      v179 = v111;
                      v174 = _currentElement;
                      p_buf = &buf;
                      v112 = objc_retainBlock(v173);
                      v113 = [p_super elementsInDirection:2 withCount:10];
                      [v113 enumerateObjectsUsingBlock:v112];
                      if (!*(*(&buf + 1) + 40))
                      {
                        v114 = [p_super elementsInDirection:1 withCount:10];
                        [v114 enumerateObjectsUsingBlock:v112];
                      }

                      v105 = 0;
                    }
                  }

                  Current = CFAbsoluteTimeGetCurrent();
                  bundleIdentifier = [v105 bundleIdentifier];
                  if ([bundleIdentifier isEqualToString:AXInCallServiceName])
                  {
                    v117 = +[VOTWorkspace sharedWorkspace];
                    v118 = [v117 currentCallState] == 1;
                  }

                  else
                  {
                    v118 = 0;
                  }

                  _shouldNotSpeakForIncomingCall = [(VOTElementManager *)self _shouldNotSpeakForIncomingCall];
                  if (Current - self->_lastLiveRegionUpdate > 1.0 && Current - self->_lastPressOnMediaSessionElement > 3.5 && !fingerCount)
                  {
                    v120 = _shouldNotSpeakForIncomingCall;
                    v121 = +[VOTElement systemAppApplication];
                    if (([v121 isSiriTalkingOrListening] | v118 | v120))
                    {
                    }

                    else
                    {
                      v137 = +[VOTElement systemAppApplication];
                      if ([v137 isSystemLocked])
                      {
                        v138 = +[VOTElement systemAppApplication];
                        isAlarmRinging = [v138 isAlarmRinging];

                        v172 = isAlarmRinging ^ 1;
                        if (isAlarmRinging)
                        {
                          goto LABEL_188;
                        }
                      }

                      else
                      {

                        v172 = 1;
                      }

                      if (![p_super doesHaveTraits:v90])
                      {
                        goto LABEL_188;
                      }

                      if ([(VOTElement *)self->_firstResponderElement doesHaveTraits:kAXSecureTextFieldTrait]|| Current + -0.75 - self->_lastValueChangeTime < 0.5 || Current - self->_lastSelectionChangeTime < 1.0)
                      {
                        v172 = 0;
                      }

                      if (![_currentElement doesHaveTraits:v90])
                      {
                        goto LABEL_188;
                      }

                      label = [_currentElement label];
                      lowercaseString = [label lowercaseString];
                      label2 = [p_super label];
                      lowercaseString2 = [label2 lowercaseString];
                      v160 = [lowercaseString isEqualToString:lowercaseString2];

                      if (!v160)
                      {
                        goto LABEL_188;
                      }
                    }
                  }

                  v172 = 0;
LABEL_188:
                  if (v172 == 1 && (Current - self->_lastValueChangeTime < 1.5 || Current - self->_lastSelectionChangeTime < 1.5) && [p_super doesHaveTraits:v168])
                  {
                    v172 = 0;
                  }

                  v122 = *(*(&buf + 1) + 40);
                  if (v122)
                  {
                    v20 = v122;
                    v123 = p_super;
                  }

                  else
                  {
                    v123 = [objc_allocWithZone(VOTOutputRequest) init];
                    if ([(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:p_super previousElement:_currentElement])
                    {
                      v124 = 34;
                    }

                    else
                    {
                      v124 = 2;
                    }

                    [(VOTElementManager *)self _addDescription:p_super toRequest:v123 withOptions:v124];
                    if ((v162 & 1) != 0 || [_currentElement rowRange]!= 0x7FFFFFFF && [p_super rowRange]!= 0x7FFFFFFF || (systemNotificationInProgress = self->_systemNotificationInProgress))
                    {
                      [v123 setDoesNotInterrupt:1];
                      systemNotificationInProgress = self->_systemNotificationInProgress;
                    }

                    if (((systemNotificationInProgress | isSystemLocked ^ 1) & 1) != 0 || (v126 = CFAbsoluteTimeGetCurrent(), [VOTSharedWorkspace screenOnTime], v126 - v127 >= 2.0))
                    {
                      v20 = p_super;
                    }

                    else
                    {
                      v171 = p_super;
                      [(VOTElementManager *)self _handleSystemLockedOutputBehavior:v123 shouldSendRequest:&v172 startElement:&v171];
                      v20 = v171;

                      if (v172 == 1 && [v20 isAwayAlertItem])
                      {
                        self->_lastLockScreenAlertSpokenTime = CFAbsoluteTimeGetCurrent();
                        [v123 setCannotBeInterrupted:1];
                      }
                    }

                    [v123 setGeneratesBraille:0];
                    v128 = +[VOTBrailleManager manager];
                    [v128 setBrailleElement:v20 resetBrailleCursor:0 rotorSelection:0];

                    if (v172 == 1)
                    {
                      [(VOTElementManager *)self sendRequest:v123];
                    }
                  }

                  goto LABEL_212;
                }
              }

              traits = [_currentElement traits];
              LOBYTE(v103) = traits != [p_super traits];
              goto LABEL_172;
            }

            application6 = [_currentElement application];
            p_super = [application6 firstElementInApplication];
            v74 = VOTLogLayoutChange();
            if (os_log_type_enabled(v74, OS_LOG_TYPE_DEBUG))
            {
              sub_10012D00C();
            }

LABEL_117:
            goto LABEL_118;
          }
        }

        x = CGPointZero.x;
        if (v27 != CGPointZero.x)
        {
          goto LABEL_56;
        }

        y = CGPointZero.y;
        if (v29 != y)
        {
          goto LABEL_56;
        }

        goto LABEL_42;
      }
    }
  }

LABEL_15:
}

- (void)_updateFirstResponderTypingBuffer
{
  [(VOTElement *)self->_firstResponderElement updateValue];
  value = [(VOTElement *)self->_firstResponderElement value];
  if (!value)
  {
    value = &stru_1001CBF90;
  }

  v7 = value;
  if ([(__CFString *)value isAXAttributedString]&& ([(__CFString *)v7 hasAttribute:UIAccessibilityTokenPlaceholder]& 1) != 0)
  {
    v4 = &stru_1001CBF90;
  }

  else
  {
    v4 = v7;
  }

  [(NSMutableString *)self->_elementTypingBuffer setString:v4];
  selectedTextRange = [(VOTElement *)self->_firstResponderElement selectedTextRange];
  [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v6, 0];
  [(NSMutableDictionary *)self->_lastSeenFontProperties removeAllObjects];
  [(VOTElementManager *)self _setLastSeenLineAndColumn:0];
}

- (void)setCurrentElement:(id)element shouldSetBrailleElement:(BOOL)brailleElement
{
  brailleElementCopy = brailleElement;
  inUnitTestingMode = self->_inUnitTestingMode;
  elementCopy = element;
  if (inUnitTestingMode)
  {
    [(VOTElementManager *)self _setCurrentElement:elementCopy];

    self->_flags.focusIsOnElement = 1;
  }

  else
  {
    v8 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D130();
    }

    elementManagerThread = self->_elementManagerThread;
    v10 = [NSNumber numberWithBool:brailleElementCopy];
    [(SCRCThread *)elementManagerThread performSelector:"_setCurrentElement:shouldSetBrailleElement:" onTarget:self count:2 objects:elementCopy, v10, 0];
  }
}

- (void)setFirstResponder:(id)responder
{
  responderCopy = responder;
  if (![(VOTElement *)self->_firstResponderElement isEqual:?]|| self->_inUnitTestingMode)
  {
    objc_storeStrong(&self->_firstResponderElement, responder);
    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
    [WeakRetained firstResponderDidUpdate:responderCopy];

    v6 = +[VOTKeyboardManager keyboardManager];
    [v6 setExplictlyEnabledQuickNav:0];

    [(VOTElementManager *)self _handleKeyboardChangedNotification];
    v7 = +[VOTBrailleManager manager];
    [v7 updateKeyboardSettings];

LABEL_4:
    [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
    goto LABEL_5;
  }

  if (self->_elementSelectionRangeBufferInternal.location == 0x7FFFFFFF)
  {
    goto LABEL_4;
  }

LABEL_5:
  [(VOTElementManager *)self _activateBrailleScreenInputIfNeededForElement:self->_firstResponderElement];
}

- (__AXUIElement)_firstResponderAXUIElementRefFromCurrentApplications
{
  v14 = 0u;
  v15 = 0u;
  v16 = 0u;
  v17 = 0u;
  uiElement3 = self->_currentApplications;
  v4 = [(NSArray *)uiElement3 countByEnumeratingWithState:&v14 objects:v18 count:16];
  if (v4)
  {
    v5 = v4;
    v6 = *v15;
LABEL_3:
    v7 = 0;
    while (1)
    {
      if (*v15 != v6)
      {
        objc_enumerationMutation(uiElement3);
      }

      uiElement = [*(*(&v14 + 1) + 8 * v7) uiElement];
      [uiElement updateCache:3002];
      v9 = [uiElement objectWithAXAttribute:3002];

      if (v9)
      {
        goto LABEL_11;
      }

      if (v5 == ++v7)
      {
        v5 = [(NSArray *)uiElement3 countByEnumeratingWithState:&v14 objects:v18 count:16];
        if (v5)
        {
          goto LABEL_3;
        }

        break;
      }
    }
  }

  v10 = +[VOTElement systemAppApplication];
  uiElement2 = [v10 uiElement];

  [uiElement2 updateCache:3002];
  v9 = [uiElement2 objectWithAXAttribute:3002];

  if (!v9)
  {
    application = [(VOTElement *)self->_currentElement application];
    uiElement3 = [application uiElement];

    [(NSArray *)uiElement3 updateCache:3002];
    v9 = [(NSArray *)uiElement3 objectWithAXAttribute:3002];
LABEL_11:
  }

  return v9;
}

- (void)_updateFirstResponder
{
  if (!self->_inUnitTestingMode)
  {
    currentElement = [(VOTElementManager *)self currentElement];
    uiElement = [currentElement uiElement];
    _firstResponderAXUIElementRefFromCurrentApplications = [uiElement objectWithAXAttribute:3002];

    if (!_firstResponderAXUIElementRefFromCurrentApplications)
    {
      _firstResponderAXUIElementRefFromCurrentApplications = [(VOTElementManager *)self _firstResponderAXUIElementRefFromCurrentApplications];
    }

    uiElement2 = [(VOTElement *)self->_firstResponderElement uiElement];
    [uiElement2 axElement];

    if (AXSafeEqual())
    {
      if (self->_elementSelectionRangeBufferInternal.location == 0x7FFFFFFF)
      {

        [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
      }
    }

    else
    {
      v7 = [AXUIElement uiElementWithAXElement:_firstResponderAXUIElementRefFromCurrentApplications];
      v8 = [VOTElement elementWithUIElement:v7];

      [(VOTElementManager *)self setFirstResponder:v8];
    }
  }
}

- (id)_firstResponderFromCurrentElement
{
  currentElement = [(VOTElementManager *)self currentElement];
  uiElement = [currentElement uiElement];
  _firstResponderAXUIElementRefFromCurrentApplications = [uiElement objectWithAXAttribute:3002];

  if (!_firstResponderAXUIElementRefFromCurrentApplications)
  {
    _firstResponderAXUIElementRefFromCurrentApplications = [(VOTElementManager *)self _firstResponderAXUIElementRefFromCurrentApplications];
  }

  v6 = [AXUIElement uiElementWithAXElement:_firstResponderAXUIElementRefFromCurrentApplications];
  v7 = [VOTElement elementWithUIElement:v6];

  return v7;
}

- (void)_updateCurrentElementFrame
{
  v4 = +[VOTDisplayManager displayManager];
  _currentElement = [(VOTElementManager *)self _currentElement];
  [v4 setCursorFrameForElement:_currentElement];
}

- (void)_updateCursorFrameForElementIfNeeded:(id)needed
{
  neededCopy = needed;
  _currentElement = [(VOTElementManager *)self _currentElement];

  v5 = neededCopy;
  if (_currentElement == neededCopy)
  {
    [neededCopy updateFrame];
    [(VOTElementManager *)self _updateCurrentElementFrame];
    v5 = neededCopy;
  }
}

- (void)_updateCursorFrameForLineFrameMovement:(id)movement
{
  location = self->_elementUnitOutputRange.location;
  length = self->_elementUnitOutputRange.length;
  movementCopy = movement;
  [movementCopy boundsForRange:{location, length}];
  self->_lineFrame.origin.x = v7;
  self->_lineFrame.origin.y = v8;
  self->_lineFrame.size.width = v9;
  self->_lineFrame.size.height = v10;
  v11 = +[VOTElement systemWideElement];
  windowContextId = [movementCopy windowContextId];

  [v11 convertRect:windowContextId fromContextId:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];
  self->_lineFrame.origin.x = v13;
  self->_lineFrame.origin.y = v14;
  self->_lineFrame.size.width = v15;
  self->_lineFrame.size.height = v16;

  v17 = +[VOTDisplayManager displayManager];
  [v17 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

  self->_textRangeBeingDisplayed = 1;
}

- (void)updateCurrentElementFrame
{
  if ([(VOTElementManager *)self isOnElementManagerThread])
  {
    _AXAssert();
  }

  elementManagerThread = self->_elementManagerThread;

  [(SCRCThread *)elementManagerThread performSelector:"_updateCurrentElementFrame" onTarget:self count:0 objects:0];
}

- (void)_elementFetchFoundDirectTouchElements:(id)elements
{
  elementsCopy = elements;
  v3 = elementsCopy;
  AXPerformBlockOnMainThread();
}

- (BOOL)_shouldAnnounceCustomRotorHintForElement:(id)element
{
  elementCopy = element;
  touchContainerParent = [elementCopy touchContainerParent];
  lastContainerForCustomRotorHint = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  selfCopy = self;
  v30 = touchContainerParent;
  if (!lastContainerForCustomRotorHint && touchContainerParent)
  {
    goto LABEL_6;
  }

  lastContainerForCustomRotorHint2 = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  v8 = lastContainerForCustomRotorHint2;
  if (lastContainerForCustomRotorHint2 && !touchContainerParent)
  {

    goto LABEL_6;
  }

  lastContainerForCustomRotorHint3 = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  v25 = lastContainerForCustomRotorHint3;
  if (!lastContainerForCustomRotorHint3 || !touchContainerParent)
  {

    v28 = 0;
    goto LABEL_7;
  }

  lastContainerForCustomRotorHint4 = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  v27 = [lastContainerForCustomRotorHint4 isEqual:touchContainerParent];

  if ((v27 & 1) == 0)
  {
LABEL_6:
    lastContainerForCustomRotorHint = [elementCopy touchContainerParent];
    [(VOTElementManager *)self setLastContainerForCustomRotorHint:lastContainerForCustomRotorHint];
    v28 = 1;
LABEL_7:

    goto LABEL_8;
  }

  v28 = 0;
LABEL_8:
  customPublicRotors = [elementCopy customPublicRotors];
  v10 = +[NSMutableSet set];
  v31 = 0u;
  v32 = 0u;
  v33 = 0u;
  v34 = 0u;
  v11 = customPublicRotors;
  v12 = [v11 countByEnumeratingWithState:&v31 objects:v35 count:16];
  if (v12)
  {
    v13 = v12;
    v14 = *v32;
    do
    {
      for (i = 0; i != v13; i = i + 1)
      {
        if (*v32 != v14)
        {
          objc_enumerationMutation(v11);
        }

        v16 = *(*(&v31 + 1) + 8 * i);
        if ([elementCopy customPublicRotorIsVisibleInTouchRotor:v16])
        {
          v17 = [elementCopy customPublicRotorName:v16];
          v18 = [VOTRotor rotorTypeForSystemRotorType:v17];
          if (v18)
          {
            v19 = [VOTRotor stringForRotorType:v18];

            v17 = v19;
          }

          if (v17)
          {
            [v10 addObject:v16];
          }
        }
      }

      v13 = [v11 countByEnumeratingWithState:&v31 objects:v35 count:16];
    }

    while (v13);
  }

  previousCustomRotorsForRotorHint = [(VOTElementManager *)selfCopy previousCustomRotorsForRotorHint];
  v21 = [v10 isEqualToSet:previousCustomRotorsForRotorHint];

  v22 = v28;
  if ((v21 & 1) == 0)
  {
    [(VOTElementManager *)selfCopy setPreviousCustomRotorsForRotorHint:v10];
    v22 = 1;
  }

  return v22;
}

- (BOOL)_shouldNotSpeakForIncomingCall
{
  v2 = +[VOTWorkspace sharedWorkspace];
  currentCallState = [v2 currentCallState];

  v4 = +[AVSystemController sharedAVSystemController];
  v5 = [v4 routeForCategory:AVAudioSessionCategoryVoiceOver];

  if ([v5 isEqualToString:@"Headset"] & 1) != 0 || (objc_msgSend(v5, "isEqualToString:", @"HeadsetBT") & 1) != 0 || (objc_msgSend(v5, "isEqualToString:", @"Headphone"))
  {
    v6 = 0;
  }

  else
  {
    v6 = [v5 isEqualToString:@"HeadphonesBT"] ^ 1;
  }

  isRingerSwitchSilent = [VOTSharedWorkspace isRingerSwitchSilent];
  v8 = VOTLogCommon();
  if (os_log_type_enabled(v8, OS_LOG_TYPE_INFO))
  {
    v10[0] = 67109632;
    v10[1] = currentCallState == 2;
    v11 = 1024;
    v12 = isRingerSwitchSilent;
    v13 = 1024;
    v14 = v6;
    _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_INFO, "Should not speak for incoming call? %d & %d & %d", v10, 0x14u);
  }

  return (currentCallState == 2) & v6 & isRingerSwitchSilent;
}

- (id)_verifiedElementWithElement:(id)element
{
  elementCopy = element;
  [elementCopy frame];
  v6 = v5;
  v8 = v7;
  v10 = v9;
  v12 = v11;
  [elementCopy centerPoint];
  v13 = [NSValue valueWithCGPoint:?];
  v42[0] = v13;
  v14 = [NSValue valueWithCGPoint:v6 + 2.0, v8 + 2.0];
  v42[1] = v14;
  v44.origin.x = v6;
  v44.origin.y = v8;
  v44.size.width = v10;
  v44.size.height = v12;
  v15 = [NSValue valueWithCGPoint:v6 + 2.0, v8 + CGRectGetHeight(v44) + -2.0];
  v42[2] = v15;
  v45.origin.x = v6;
  v45.origin.y = v8;
  v45.size.width = v10;
  v45.size.height = v12;
  v16 = [NSValue valueWithCGPoint:v6 + CGRectGetWidth(v45) + -2.0, v8 + 2.0];
  v42[3] = v16;
  v46.origin.x = v6;
  v46.origin.y = v8;
  v46.size.width = v10;
  v46.size.height = v12;
  v17 = v6 + CGRectGetWidth(v46) + -2.0;
  v47.origin.x = v6;
  v47.origin.y = v8;
  v47.size.width = v10;
  v47.size.height = v12;
  v18 = [NSValue valueWithCGPoint:v17, v8 + CGRectGetHeight(v47) + -2.0];
  v42[4] = v18;
  v19 = [NSArray arrayWithObjects:v42 count:5];

  v39 = 0u;
  v40 = 0u;
  v37 = 0u;
  v38 = 0u;
  v20 = v19;
  v21 = [v20 countByEnumeratingWithState:&v37 objects:v41 count:16];
  if (v21)
  {
    v22 = v21;
    v23 = *v38;
    while (2)
    {
      for (i = 0; i != v22; i = i + 1)
      {
        if (*v38 != v23)
        {
          objc_enumerationMutation(v20);
        }

        v25 = *(*(&v37 + 1) + 8 * i);
        v26 = +[VOTElement systemWideElement];
        [v25 CGPointValue];
        [v26 convertPoint:objc_msgSend(elementCopy fromContextId:{"windowContextId"), v27, v28}];
        v30 = v29;
        v32 = v31;

        v33 = [(VOTElementManager *)self _verifiedElementWithElement:elementCopy atPoint:v30, v32];
        if (v33)
        {
          v35 = v33;

          v34 = v35;
          goto LABEL_11;
        }
      }

      v22 = [v20 countByEnumeratingWithState:&v37 objects:v41 count:16];
      if (v22)
      {
        continue;
      }

      break;
    }
  }

  v34 = 0;
  v35 = v20;
LABEL_11:

  return v34;
}

- (id)_verifiedElementWithElement:(id)element atPoint:(CGPoint)point
{
  y = point.y;
  x = point.x;
  elementCopy = element;
  v7 = [objc_allocWithZone(VOTElement) initWithPosition:{x, y}];
  v8 = v7;
  if (v7 && ([v7 label], v9 = objc_claimAutoreleasedReturnValue(), objc_msgSend(elementCopy, "label"), v10 = objc_claimAutoreleasedReturnValue(), v11 = objc_msgSend(v9, "isEqual:", v10), v10, v9, v11))
  {
    v12 = v8;
  }

  else
  {
    v12 = 0;
  }

  return v12;
}

- (BOOL)_finishHandlingMoveToElementNotification:(id)notification shouldSyncNativeFocusElement:(id)element shouldEchoSameTouchContainer:(id)container shouldScrollToElement:(id)toElement shouldPlayTrackingSound:(id)sound shouldRefocusIfSameElement:(id)sameElement
{
  notificationCopy = notification;
  elementCopy = element;
  containerCopy = container;
  toElementCopy = toElement;
  soundCopy = sound;
  sameElementCopy = sameElement;
  v20 = [(VOTElementManager *)self _verifiedElementWithElement:notificationCopy];
  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([_currentElement isEqual:notificationCopy] && !objc_msgSend(sameElementCopy, "BOOLValue"))
  {

    if (notificationCopy)
    {
      goto LABEL_14;
    }

LABEL_11:
    if ([soundCopy BOOLValue])
    {
      v47 = +[VOTOutputManager outputManager];
      v48 = +[VOSOutputEvent NoItemExists];
      [v47 sendEvent:v48];
    }

    notificationCopy = 0;
    goto LABEL_14;
  }

  if (!notificationCopy)
  {
    goto LABEL_11;
  }

  if ((([sameElementCopy BOOLValue] & 1) != 0 || (objc_msgSend(notificationCopy, "isEqual:", v20) & 1) == 0) && v20)
  {
    [notificationCopy frame];
    v23 = v22;
    v25 = v24;
    v27 = v26;
    v29 = v28;
    [v20 frame];
    v63.origin.x = v30;
    v63.origin.y = v31;
    v63.size.width = v32;
    v63.size.height = v33;
    v61.origin.x = v23;
    v61.origin.y = v25;
    v61.size.width = v27;
    v61.size.height = v29;
    if (CGRectIntersectsRect(v61, v63))
    {
      [notificationCopy frame];
      v35 = v34;
      v37 = v36;
      v39 = v38;
      v41 = v40;
      [v20 frame];
      v64.origin.x = v42;
      v64.origin.y = v43;
      v64.size.width = v44;
      v64.size.height = v45;
      v62.origin.x = v35;
      v62.origin.y = v37;
      v62.size.width = v39;
      v62.size.height = v41;
      v60 = elementCopy;
      if (CGRectEqualToRect(v62, v64))
      {
        v46 = v20;

        notificationCopy = v46;
      }

      goto LABEL_16;
    }

LABEL_14:
    v49 = 0;
    goto LABEL_25;
  }

  v60 = elementCopy;
LABEL_16:
  v50 = +[VOTElement springBoardApplication];
  v51 = containerCopy;
  if ([v50 isVoiceControlRunning])
  {
    LOBYTE(v52) = 0;
  }

  else
  {
    v53 = +[VOTElement springBoardApplication];
    v52 = [v53 isSystemLocked] ^ 1;
  }

  v54 = +[VOTWorkspace sharedWorkspace];
  if ([v54 currentCallState] == 2)
  {
    v55 = +[AXSpringBoardServer server];
    isRingerMuted = [v55 isRingerMuted];

    LOBYTE(v52) = (isRingerMuted ^ 1) & v52;
  }

  else
  {
  }

  containerCopy = v51;
  bOOLValue = [v51 BOOLValue];
  toElementCopy = v59;
  -[VOTElementManager _moveToElement:shouldPlaySound:echoSameTouchContainer:shouldScroll:moveToElementNotification:shouldPlayTrackingSound:](self, "_moveToElement:shouldPlaySound:echoSameTouchContainer:shouldScroll:moveToElementNotification:shouldPlayTrackingSound:", notificationCopy, v52 & 1, bOOLValue, [v59 BOOLValue], 1, objc_msgSend(soundCopy, "BOOLValue"));
  elementCopy = v60;
  if ([v60 BOOLValue])
  {
    [notificationCopy setNativeFocus];
  }

  self->_lastFirstResponderChangeTime = CFAbsoluteTimeGetCurrent();
  self->_flags.tapShouldHandleTextOperation = 0;
  v49 = 1;
LABEL_25:

  return v49;
}

- (void)_moveToElement:(id)element shouldPlaySound:(BOOL)sound echoSameTouchContainer:(BOOL)container shouldScroll:(BOOL)scroll moveToElementNotification:(BOOL)notification shouldPlayTrackingSound:(BOOL)trackingSound
{
  trackingSoundCopy = trackingSound;
  notificationCopy = notification;
  scrollCopy = scroll;
  containerCopy = container;
  soundCopy = sound;
  elementCopy = element;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  _currentElement = [(VOTElementManager *)self _currentElement];
  if (-[VOTElementManager _setCurrentElement:](self, "_setCurrentElement:", elementCopy) || ([elementCopy isEqual:_currentElement] & 1) != 0 || !notificationCopy)
  {
    if (soundCopy)
    {
      v16 = +[VOTOutputManager outputManager];
      v17 = +[VOSOutputEvent DidFocusOnElement];
      [v16 sendEvent:v17];
    }

    if (scrollCopy)
    {
      v26[0] = _NSConcreteStackBlock;
      v26[1] = 3221225472;
      v26[2] = sub_10009B9B8;
      v26[3] = &unk_1001C7778;
      v26[4] = self;
      v27 = elementCopy;
      [v27 scrollToElementForDirectional:1 withCompletion:v26];
    }

    else
    {
      [(SCRCThread *)self->_elementManagerThread performSelector:"_updateCursorFrameForElementIfNeeded:" onTarget:self count:1 objects:elementCopy, 0];
    }

    v20 = [objc_allocWithZone(VOTOutputRequest) init];
    if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:elementCopy])
    {
      v21 = 0x200800802;
    }

    else
    {
      v21 = 8390658;
    }

    if (containerCopy)
    {
      v22 = v21 | 0x20;
    }

    else if ([(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:elementCopy previousElement:_currentElement])
    {
      v22 = v21 | 0x20;
    }

    else
    {
      v22 = v21;
    }

    if (AXDeviceSupportsSonification() && [elementCopy supportsAudiographs] && -[VOTElementManager _chartElementDidChangeForElement:oldElement:](self, "_chartElementDidChangeForElement:oldElement:", elementCopy, _currentElement))
    {
      v22 |= 0x4100000000uLL;
    }

    if (notificationCopy)
    {
      v23 = v22 | 0x80000000;
    }

    else
    {
      v23 = v22;
    }

    [v20 setGeneratesBraille:1];
    isDragActive = [(AXDragManager *)self->_dragManager isDragActive];
    v25 = 0x40000000;
    if (!isDragActive)
    {
      v25 = 0;
    }

    [(VOTElementManager *)self _addDescription:elementCopy toRequest:v20 withOptions:v25 | v23];
    if (trackingSoundCopy)
    {
      [v20 setBrailleType:1];
    }

    if ([elementCopy shouldStartReadAllOnFocus])
    {
      [(VOTElementManager *)self _continueReadAllWithElement:elementCopy setCurrentElement:0];
    }

    else if (soundCopy)
    {
      [(VOTElementManager *)self sendRequest:v20];
    }
  }

  else if (trackingSoundCopy)
  {
    v18 = +[VOTOutputManager outputManager];
    v19 = +[VOSOutputEvent NoItemExists];
    [v18 sendEvent:v19];
  }
}

- (void)_handleMoveToElementNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![(VOTElementManager *)self _shouldIgnoreElementMovementNotification:notificationCopy])
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v5 = [notificationCopy objectForKey:kAXMoveToElementNotificationKeyElement];
      v6 = [notificationCopy objectForKey:kAXMoveToElementNotificationKeySyncNativeFocus];
      v7 = v6;
      if (v6)
      {
        bOOLValue = [v6 BOOLValue];
      }

      else
      {
        bOOLValue = 0;
      }

      v16 = [notificationCopy objectForKey:kAXMoveToElementNotificationKeyIgnoreTouchInProgress];
      v17 = v16;
      if (v16)
      {
        bOOLValue2 = [v16 BOOLValue];
      }

      else
      {
        bOOLValue2 = 0;
      }

      v19 = [notificationCopy objectForKey:kAXMoveToElementNotificationKeyEchoSameTouchContainer];
      v20 = v19;
      if (v19)
      {
        bOOLValue3 = [v19 BOOLValue];
      }

      else
      {
        bOOLValue3 = 1;
      }

      v21 = [notificationCopy objectForKey:kAXMoveToElementNotificationKeyShouldScrollToElement];
      v56 = bOOLValue;
      if (v21)
      {
        bOOLValue4 = [v20 BOOLValue];
      }

      else
      {
        bOOLValue4 = 1;
      }

      v55 = v5;
      v22 = [notificationCopy objectForKey:kAXMoveToElementNotificationKeyShouldPlayTrackingSound];
      v23 = v22;
      v24 = bOOLValue2;
      if (v22 && [v22 BOOLValue])
      {
        selfCopy2 = self;
        [(VOTElementManager *)self setLastUserElementTouchTime:CFAbsoluteTimeGetCurrent()];
        v10 = 1;
      }

      else
      {
        selfCopy2 = self;
        v10 = 0;
      }

      v26 = [notificationCopy objectForKey:kAXMoveToElementNotificationKeyShouldRefocusIfSameElement];
      v27 = v26;
      if (v26)
      {
        bOOLValue5 = [v26 BOOLValue];
      }

      else
      {
        bOOLValue5 = 0;
      }

      v12 = v56;
      v13 = bOOLValue3;
      self = selfCopy2;
      v11 = v24;
      v9 = v55;
      if (!v55)
      {
        goto LABEL_26;
      }
    }

    else
    {
      v9 = notificationCopy;
      v10 = 0;
      v11 = 0;
      v12 = 0;
      bOOLValue5 = 0;
      bOOLValue4 = 1;
      v13 = 1;
      if (!v9)
      {
LABEL_26:
        v15 = 0;
LABEL_27:
        objc_opt_class();
        isKindOfClass = objc_opt_isKindOfClass();
        if ((v10 | v15 | isKindOfClass))
        {
          v29 = isKindOfClass;
          v30 = +[VOTElement springBoardApplication];
          if ([v30 isSystemLocked])
          {
            v31 = CFAbsoluteTimeGetCurrent() - self->_lastItemSelectionFromTouch;

            if (v31 < 2.0)
            {
              goto LABEL_50;
            }
          }

          else
          {
          }

          if ([VOTSharedWorkspace brailleInputActive] && (objc_msgSend(VOTSharedWorkspace, "brailleInputAllowsElementMovement") & 1) == 0)
          {
            v54 = VOTLogElement();
            if (os_log_type_enabled(v54, OS_LOG_TYPE_DEFAULT))
            {
              *buf = 0;
              _os_log_impl(&_mh_execute_header, v54, OS_LOG_TYPE_DEFAULT, "Stopping _handleMoveToElementNotification to prevent the focus from moving while we're editing text in BSI", buf, 2u);
            }
          }

          else
          {
            if (v29)
            {
              v32 = v9;
            }

            else
            {
              v32 = [objc_allocWithZone(VOTElement) initWithAXElement:v9];
            }

            v33 = v32;
            if ((v11 & 1) == 0 && [VOTSharedWorkspace fingerCount] && self->_flags.focusIsOnElement && (-[VOTElement frame](self->_currentElement, "frame"), v35 = v34, v37 = v36, v39 = v38, v41 = v40, objc_msgSend(v33, "frame"), v63.origin.x = v42, v63.origin.y = v43, v63.size.width = v44, v63.size.height = v45, v62.origin.x = v35, v62.origin.y = v37, v62.size.width = v39, v62.size.height = v41, !CGRectIntersectsRect(v62, v63)))
            {
              [(VOTElementManager *)self _handleLayoutChange:1];
            }

            else if (!self->_flags.isReadingAll || (v46 = kAXWebContentTrait, !-[VOTElement doesHaveTraits:](self->_currentElement, "doesHaveTraits:", kAXWebContentTrait)) || ([v33 doesHaveTraits:v46] & 1) == 0)
            {
              v58 = v33;
              elementManagerThread = self->_elementManagerThread;
              v48 = [NSNumber numberWithBool:v12];
              v49 = [NSNumber numberWithBool:v13];
              v50 = [NSNumber numberWithBool:bOOLValue4];
              v51 = [NSNumber numberWithBool:v10];
              v52 = [NSNumber numberWithBool:bOOLValue5];
              v53 = elementManagerThread;
              v33 = v58;
              [(SCRCThread *)v53 performSelector:"_finishHandlingMoveToElementNotification:shouldSyncNativeFocusElement:shouldEchoSameTouchContainer:shouldScrollToElement:shouldPlayTrackingSound:shouldRefocusIfSameElement:" onTarget:self cancelMask:0x40000 count:6 objects:v58, v48, v49, v50, v51, v52, 0];
            }
          }

          goto LABEL_50;
        }

        [(VOTElementManager *)self _handleLayoutChange:1];
LABEL_50:

        goto LABEL_51;
      }
    }

    v14 = CFGetTypeID(v9);
    v15 = v14 == AXUIElementGetTypeID();
    goto LABEL_27;
  }

LABEL_51:
}

- (id)_firstResponderFromCurrentApplications
{
  v10 = 0u;
  v11 = 0u;
  v12 = 0u;
  v13 = 0u;
  v2 = self->_currentApplications;
  v3 = [(NSArray *)v2 countByEnumeratingWithState:&v10 objects:v14 count:16];
  if (v3)
  {
    v4 = v3;
    v5 = *v11;
    while (2)
    {
      for (i = 0; i != v4; i = i + 1)
      {
        if (*v11 != v5)
        {
          objc_enumerationMutation(v2);
        }

        firstResponderElement = [*(*(&v10 + 1) + 8 * i) firstResponderElement];
        if (firstResponderElement)
        {
          v8 = firstResponderElement;
          goto LABEL_11;
        }
      }

      v4 = [(NSArray *)v2 countByEnumeratingWithState:&v10 objects:v14 count:16];
      if (v4)
      {
        continue;
      }

      break;
    }
  }

  v8 = 0;
LABEL_11:

  return v8;
}

- (void)_handleNativeFocusItemChangedNotification:(id)notification
{
  notificationCopy = notification;
  if (notificationCopy)
  {
    if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
    {
      _AXAssert();
    }

    if (self->_systemIsSleeping)
    {
      v5 = VOTLogCommon();
      if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
      {
        *v11 = 0;
        _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "Ignoring focus update, system is sleeping", v11, 2u);
      }

LABEL_20:

      goto LABEL_21;
    }

    v6 = CFGetTypeID(notificationCopy);
    if (v6 == AXUIElementGetTypeID())
    {
      v5 = [objc_allocWithZone(VOTElement) initWithAXElement:notificationCopy];
      if (!v5)
      {
        goto LABEL_21;
      }

      goto LABEL_17;
    }

    v7 = CFGetTypeID(notificationCopy);
    if (v7 == CFDictionaryGetTypeID())
    {
      v8 = [notificationCopy objectForKeyedSubscript:kAXElementKey];
      v9 = v8;
      if (v8 && (v10 = CFGetTypeID(v8), v10 == AXUIElementGetTypeID()))
      {
        v5 = [objc_allocWithZone(VOTElement) initWithAXElement:v9];
      }

      else
      {
        v5 = 0;
      }

      if (v5)
      {
LABEL_17:
        if ([(VOTElementManager *)self _setCurrentElement:v5])
        {
          [(VOTElementManager *)self _echoDifferentElement:v5 forEvent:0];
        }

        [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v5];
        goto LABEL_20;
      }
    }
  }

LABEL_21:
}

- (void)_handleFirstResponderChangedNotification:(id)notification
{
  notificationCopy = notification;
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  v5 = +[VOTWorkspace sharedWorkspace];
  focusedApplications = [v5 focusedApplications];

  v7 = VOTLogLayoutChange();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEBUG))
  {
    sub_10012BDEC();
  }

  objc_storeStrong(&self->_currentApplications, focusedApplications);
  _firstResponderFromCurrentElement = [(VOTElementManager *)self _firstResponderFromCurrentElement];
  v9 = VOTLogCommon();
  if (os_log_type_enabled(v9, OS_LOG_TYPE_INFO))
  {
    *buf = 138412290;
    v43 = _firstResponderFromCurrentElement;
    _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_INFO, "First responder element: %@", buf, 0xCu);
  }

  if (_firstResponderFromCurrentElement)
  {
LABEL_14:
    if (CFAbsoluteTimeGetCurrent() - self->_lastExternalUnlockTime < 0.25)
    {
      v41 = notificationCopy;
      AXPerformBlockOnMainThreadAfterDelay();
    }

    if (!_firstResponderFromCurrentElement || [(VOTElement *)self->_firstResponderElement isEqual:_firstResponderFromCurrentElement]|| ![(VOTElement *)_firstResponderFromCurrentElement isAccessibleElement])
    {
      goto LABEL_39;
    }

    _currentElement = [(VOTElementManager *)self _currentElement];
    [(VOTElement *)_firstResponderFromCurrentElement frame];
    v15 = v14;
    v17 = v16;
    v19 = v18;
    v21 = v20;
    [_currentElement frame];
    v45.origin.x = v22;
    v45.origin.y = v23;
    v45.size.width = v24;
    v45.size.height = v25;
    v44.origin.x = v15;
    v44.origin.y = v17;
    v44.size.width = v19;
    v44.size.height = v21;
    if (!CGRectEqualToRect(v44, v45))
    {
      value = [(VOTElement *)_firstResponderFromCurrentElement value];
      if ([value length])
      {
        value2 = [_currentElement value];
        v28 = [value isEqualToString:value2];

        if (!v28)
        {

          goto LABEL_29;
        }
      }

      v29 = kAXIsEditingTrait;
      if ([(VOTElement *)_firstResponderFromCurrentElement doesHaveTraits:kAXIsEditingTrait])
      {
        v30 = [_currentElement doesHaveTraits:v29];

        if ((v30 & 1) == 0)
        {
          goto LABEL_29;
        }
      }

      else
      {
      }
    }

    if (self->_firstResponderElement)
    {
LABEL_38:

LABEL_39:
      [(VOTElementRotor *)self->_elementRotor setIgnoreDefaultTypeAutofill:1];
      _currentElement2 = [(VOTElementManager *)self _currentElement];
      [_currentElement2 clearElementForGesturedTextInput];

      [(VOTElementManager *)self _updateLastFirstResponderChangedTime];
      [(VOTElementManager *)self _updateRotorForCurrentElement];
      v39 = +[VOTBrailleManager manager];
      [v39 updateKeyboardSettings];

      [(VOTElementManager *)self _updateFirstResponder];
      [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
      goto LABEL_40;
    }

LABEL_29:
    [(VOTElementManager *)self _setCurrentElement:_firstResponderFromCurrentElement];
    fetchManager = self->_fetchManager;
    _currentElement3 = [(VOTElementManager *)self _currentElement];
    [(VOTElementFetcher *)fetchManager updateCacheWithElement:_currentElement3];

    if (![(VOTElementManager *)self _shouldSuppressSpeechForPlayPause]&& ![(VOTElement *)_firstResponderFromCurrentElement isInAlert])
    {
      v33 = [objc_allocWithZone(VOTOutputRequest) init];
      if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:_firstResponderFromCurrentElement])
      {
        v34 = 0x200800802;
      }

      else
      {
        v34 = 8390658;
      }

      isDragActive = [(AXDragManager *)self->_dragManager isDragActive];
      v36 = 0x40000000;
      if (!isDragActive)
      {
        v36 = 0;
      }

      [(VOTElementManager *)self _addDescription:_firstResponderFromCurrentElement toRequest:v33 withOptions:v36 | v34];
      [v33 setOriginationType:2];
      [v33 setRequestQueueMixinBehavior:&stru_1001C9FD8];
      [(VOTElementManager *)self sendRequest:v33];
    }

    v37 = +[VOTDisplayManager displayManager];
    [v37 setCursorFrameForElement:_firstResponderFromCurrentElement];

    v40 = _firstResponderFromCurrentElement;
    AXPerformBlockOnMainThreadAfterDelay();
    [(VOTElementManager *)self _disableQuickNavStateTemporarily];

    goto LABEL_38;
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![notificationCopy isEqualToString:@"retry"])
  {
    AXPerformBlockOnMainThreadAfterDelay();
    goto LABEL_14;
  }

  currentElement = self->_currentElement;
  if (!currentElement || ![(VOTElement *)currentElement isVisible])
  {
    v11 = VOTLogCommon();
    if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
    {
      v12 = self->_currentElement;
      *buf = 138412290;
      v43 = v12;
      _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_DEFAULT, "First responder failed to retrieve twice, update app: %@", buf, 0xCu);
    }

    [(VOTElementManager *)self _handleUpdateAppFromTimer];
  }

LABEL_40:
}

- (BOOL)_shouldSwitchToFirstResponder:(id)responder
{
  responderCopy = responder;
  if (CFAbsoluteTimeGetCurrent() - self->_lastAdjustValueTime >= 0.5)
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    if ([_currentElement isEqual:responderCopy])
    {
      LOBYTE(v5) = 0;
    }

    else
    {
      textInputElement = [_currentElement textInputElement];
      if ([textInputElement isEqual:responderCopy])
      {
        LOBYTE(v5) = 0;
      }

      else
      {
        application = [_currentElement application];
        if ([application isSoftwareKeyboardActive] & 1) != 0 || (objc_msgSend(_currentElement, "doesHaveTraits:", kAXKeyboardKeyTrait))
        {
          LOBYTE(v5) = 0;
        }

        else
        {
          v5 = [_currentElement doesHaveTraits:kAXAllowsDirectInteractionTrait] ^ 1;
        }
      }
    }
  }

  else
  {
    LOBYTE(v5) = 0;
  }

  return v5;
}

- (void)_outputWebLineWithMarkerRange:(id)range withElement:(id)element
{
  rangeCopy = range;
  elementCopy = element;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [rangeCopy count] == 2)
  {
    v7 = [rangeCopy objectAtIndex:0];
    v8 = [elementCopy textLineStartMarker:v7];

    v9 = [rangeCopy objectAtIndex:1];
    v10 = [elementCopy textLineEndMarker:v9];

    v11 = [NSArray arrayWithObjects:v8, v10, 0];
    v12 = [elementCopy stringForTextMarkers:v11];

    v13 = [objc_allocWithZone(VOTOutputRequest) init];
    language = [elementCopy language];
    v15 = [v13 addString:v12 withLanguage:language];

    lastAction = [v13 lastAction];
    [lastAction setPerformPunctuationTranslation:1];

    lastAction2 = [v13 lastAction];
    [lastAction2 setReplaceCommas:1];

    [(VOTElementManager *)self sendRequest:v13];
  }
}

- (id)_applicationMatchingBlock:(id)block inApplications:(id)applications
{
  blockCopy = block;
  v12 = 0u;
  v13 = 0u;
  v14 = 0u;
  v15 = 0u;
  applicationsCopy = applications;
  v7 = [applicationsCopy countByEnumeratingWithState:&v12 objects:v16 count:16];
  if (v7)
  {
    v8 = *v13;
    while (2)
    {
      for (i = 0; i != v7; i = i + 1)
      {
        if (*v13 != v8)
        {
          objc_enumerationMutation(applicationsCopy);
        }

        v10 = *(*(&v12 + 1) + 8 * i);
        if (blockCopy[2](blockCopy, v10))
        {
          v7 = v10;
          goto LABEL_11;
        }
      }

      v7 = [applicationsCopy countByEnumeratingWithState:&v12 objects:v16 count:16];
      if (v7)
      {
        continue;
      }

      break;
    }
  }

LABEL_11:

  return v7;
}

- (BOOL)_hasApplicationMatchingBlock:(id)block inApplications:(id)applications
{
  v4 = [(VOTElementManager *)self _applicationMatchingBlock:block inApplications:applications];
  v5 = v4 != 0;

  return v5;
}

- (BOOL)_hasCurrentApplicationMatchingBlock:(id)block
{
  v3 = [(VOTElementManager *)self _currentApplicationMatchingBlock:block];
  v4 = v3 != 0;

  return v4;
}

- (void)_handleWebSelectionChangedNotification:(id)notification
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  if (![(VOTElement *)_currentElement doesHaveTraits:kAXKeyboardKeyTrait])
  {
    v5 = kAXWebContentTrait;
LABEL_6:
    v7 = _currentElement;
    goto LABEL_7;
  }

  firstResponderElement = self->_firstResponderElement;
  v5 = kAXWebContentTrait;
  if (!firstResponderElement || ![(VOTElement *)firstResponderElement doesHaveTraits:kAXWebContentTrait])
  {
    goto LABEL_6;
  }

  v6 = self->_firstResponderElement;

  v7 = v6;
LABEL_7:
  v34 = v7;
  if ([(VOTElement *)v7 doesHaveTraits:v5]|| [(VOTElement *)v34 isReadingContent])
  {
    textMarkerRangeForSelection = [(VOTElement *)v34 textMarkerRangeForSelection];
    firstElementInApplicationForFocus = [(VOTElement *)v34 stringForTextMarkers:textMarkerRangeForSelection];
    p_webSelectionText = &self->_webSelectionText;
    v11 = [(NSString *)self->_webSelectionText length];
    v12 = [firstElementInApplicationForFocus length];
    if (!v12)
    {
      v21 = self->_firstResponderElement;
      if (v21)
      {
        if ([(VOTElement *)v21 doesHaveTraits:v5])
        {
          [(VOTElementManager *)self _handleSelectionChangedNotification:0];
          webSelectionText = self->_webSelectionText;
          self->_webSelectionText = 0;
          goto LABEL_42;
        }
      }
    }

    if (v12 | v11)
    {
      v13 = VOTSharedWorkspace;
      _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
      [v13 refreshBraille:1 rotorSelection:_currentRotorSelection];
    }

    v15 = [objc_allocWithZone(VOTOutputRequest) init];
    if (CFAbsoluteTimeGetCurrent() - self->_performedTextSelectionOperation < 0.25 && [firstElementInApplicationForFocus length] || v11 < 1)
    {
      v18 = firstElementInApplicationForFocus;
LABEL_21:
      webSelectionText = v18;
      v20 = @"element.selected.text";
LABEL_39:
      if ([webSelectionText length])
      {
        language = [(VOTElement *)v34 language];
        v29 = [v15 addString:webSelectionText withLanguage:language];

        selectedLanguage = [VOTSharedWorkspace selectedLanguage];
        v31 = sub_1000516CC(off_1001FDDD0, v20, 0, selectedLanguage);
        v32 = [v15 addString:v31 withLanguage:selectedLanguage];

        [v15 setInterruptsEverything:1];
        [v15 setGeneratesBraille:1];
        [v15 setBrailleType:4];
        [(VOTElementManager *)self sendRequest:v15];
      }

      objc_storeStrong(&self->_webSelectionText, firstElementInApplicationForFocus);

      goto LABEL_42;
    }

    if (v12 > v11)
    {
      v16 = [firstElementInApplicationForFocus rangeOfString:*p_webSelectionText];
      if (v16 != 0x7FFFFFFFFFFFFFFFLL)
      {
        if (self->_lastUserTextSelectionDirection > 1uLL)
        {
          [firstElementInApplicationForFocus substringToIndex:v16];
        }

        else
        {
          [firstElementInApplicationForFocus substringFromIndex:&v16[v17]];
        }
        v18 = ;
        goto LABEL_21;
      }

      goto LABEL_30;
    }

    if (v11 > v12)
    {
      v24 = *p_webSelectionText;
      if (v12)
      {
        v25 = [(NSString *)v24 rangeOfString:firstElementInApplicationForFocus];
        if (v25 == 0x7FFFFFFFFFFFFFFFLL)
        {
          goto LABEL_30;
        }

        if ((self->_lastUserTextSelectionDirection | 2) == 2)
        {
          [(NSString *)*p_webSelectionText substringFromIndex:&v25[v26]];
        }

        else
        {
          [(NSString *)*p_webSelectionText substringToIndex:v25];
        }
        v27 = ;
      }

      else
      {
        v27 = v24;
      }

      webSelectionText = v27;
      goto LABEL_38;
    }

LABEL_30:
    webSelectionText = 0;
LABEL_38:
    v20 = @"element.unselected.text";
    goto LABEL_39;
  }

  v22 = [(VOTElementManager *)self _currentApplicationMatchingBlock:&stru_1001C9FF8];
  textMarkerRangeForSelection = v22;
  if (!v22)
  {
    goto LABEL_43;
  }

  firstElementInApplicationForFocus = [v22 firstElementInApplicationForFocus];
  webSelectionText = [(VOTElementManager *)self _nearestWebElement:firstElementInApplicationForFocus];
  textMarkerRangeForSelection2 = [webSelectionText textMarkerRangeForSelection];
  [(VOTElementManager *)self _outputWebLineWithMarkerRange:textMarkerRangeForSelection2 withElement:webSelectionText];

LABEL_42:
LABEL_43:
}

- (BOOL)_isKeyboardLineMovement
{
  keyboardPressInfo = [VOTSharedWorkspace keyboardPressInfo];
  v3 = [keyboardPressInfo keyCode] - 81;

  if (v3 >= 2)
  {
    v5 = +[VOTKeyboardManager keyboardManager];
    lastDispatchedKeyEvent = [v5 lastDispatchedKeyEvent];
    if (lastDispatchedKeyEvent)
    {
      v7 = +[VOTKeyboardManager keyboardManager];
      lastReleasedToSystemKeyEvent = [v7 lastReleasedToSystemKeyEvent];
      if (lastReleasedToSystemKeyEvent)
      {
        v9 = +[VOTKeyboardManager keyboardManager];
        [v9 lastDispatchedKeyEventTime];
        v11 = v10;
        v12 = +[VOTKeyboardManager keyboardManager];
        [v12 lastReleasedToSystemKeyEventTime];
        v14 = v11 > v13;
      }

      else
      {
        v14 = 0;
      }
    }

    else
    {
      v14 = 0;
    }

    Current = CFAbsoluteTimeGetCurrent();
    v16 = +[VOTKeyboardManager keyboardManager];
    lastDispatchedKeyEvent2 = [v16 lastDispatchedKeyEvent];
    keyInfo = [lastDispatchedKeyEvent2 keyInfo];
    if ([keyInfo keyCode] - 81 >= 2)
    {

      if (v14)
      {
        LOBYTE(v4) = 0;
        return v4;
      }
    }

    else
    {
      v19 = +[VOTKeyboardManager keyboardManager];
      [v19 lastDispatchedKeyEventTime];
      v4 = Current - v20 < 0.2;

      if (v4 || v14)
      {
        return v4;
      }
    }

    v21 = +[VOTKeyboardManager keyboardManager];
    lastReleasedToSystemKeyEvent2 = [v21 lastReleasedToSystemKeyEvent];
    if ([lastReleasedToSystemKeyEvent2 keyCode] - 81 > 1)
    {
      LOBYTE(v4) = 0;
    }

    else
    {
      v23 = +[VOTKeyboardManager keyboardManager];
      [v23 lastReleasedToSystemKeyEventTime];
      LOBYTE(v4) = Current - v24 < 0.2;
    }
  }

  else
  {
    LOBYTE(v4) = 1;
  }

  return v4;
}

- (void)_handleSelectionChangedNotification:(id)notification
{
  notificationCopy = notification;
  if ([VOTSharedWorkspace suppressSelectionChangeNotificationCount] < 1)
  {
    v13 = self->_firstResponderElement;
    [(VOTElementManager *)self _updateFirstResponder];
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v14 = [notificationCopy objectForKey:kAXSelectionChangedRemoteUserOperation];
      bOOLValue = [v14 BOOLValue];
    }

    else
    {
      bOOLValue = 0;
    }

    if ([(VOTElementManager *)self _ignoreTextEditingNotificationsForPickerElementUsage])
    {
      goto LABEL_36;
    }

    v221 = bOOLValue;
    v226 = v13;
    v233[0] = _NSConcreteStackBlock;
    v233[1] = 3221225472;
    v233[2] = sub_10009ED6C;
    v233[3] = &unk_1001CA020;
    v233[4] = self;
    v16 = objc_retainBlock(v233);
    v17 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
    v18 = +[NSCharacterSet punctuationCharacterSet];
    v229[0] = _NSConcreteStackBlock;
    v229[1] = 3221225472;
    v229[2] = sub_10009EDE0;
    v229[3] = &unk_1001CA048;
    v225 = v16;
    v232 = v225;
    v223 = v18;
    v230 = v223;
    v222 = v17;
    v231 = v222;
    v224 = objc_retainBlock(v229);
    Current = CFAbsoluteTimeGetCurrent();
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    lastCharacterRotorMovement = self->_lastCharacterRotorMovement;
    lastWordRotorMovement = self->_lastWordRotorMovement;
    v22 = +[VOTKeyboardManager keyboardManager];
    lastDispatchedKeyEvent = [v22 lastDispatchedKeyEvent];
    if (lastDispatchedKeyEvent && (+[VOTKeyboardManager keyboardManager](VOTKeyboardManager, "keyboardManager"), v3 = objc_claimAutoreleasedReturnValue(), [v3 lastDispatchedKeyEventTime], Current - v24 < 0.2))
    {
      v25 = 1;
      v26 = selectedLanguage;
    }

    else
    {
      v27 = +[VOTKeyboardManager keyboardManager];
      lastReleasedToSystemKeyEvent = [v27 lastReleasedToSystemKeyEvent];
      if (lastReleasedToSystemKeyEvent)
      {
        v29 = +[VOTKeyboardManager keyboardManager];
        [v29 lastReleasedToSystemKeyEventTime];
        v31 = Current - v30 < 0.2;

        v25 = v31;
      }

      else
      {
        v25 = 0;
      }

      v26 = selectedLanguage;

      if (!lastDispatchedKeyEvent)
      {
LABEL_21:

        self->_lastSelectionChangeTime = Current;
        v13 = v226;
        if (!self->_didIgnoreLastFirstResponderChangeOnSelectionChange && Current - self->_lastFirstResponderChangeTime < 1.5)
        {
          self->_didIgnoreLastFirstResponderChangeOnSelectionChange = 1;
LABEL_35:

LABEL_36:
          goto LABEL_37;
        }

        if (Current - self->_lastValueChangeTime < 0.1)
        {
          goto LABEL_32;
        }

        v32 = VOTLogCommon();
        if (os_log_type_enabled(v32, OS_LOG_TYPE_INFO))
        {
          v33 = [NSNumber numberWithDouble:Current - self->_lastPressOnMediaSessionElement];
          *buf = 138412290;
          v235 = v33;
          _os_log_impl(&_mh_execute_header, v32, OS_LOG_TYPE_INFO, "layout change: last media session press: %@", buf, 0xCu);
        }

        if (Current - self->_lastPressOnMediaSessionElement < 3.5 || !self->_firstResponderElement)
        {
LABEL_32:
          v36 = 0;
LABEL_33:
          v37 = VOTSharedWorkspace;
          _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
          [v37 refreshBraille:1 rotorSelection:_currentRotorSelection];

LABEL_34:
          [(VOTElementManager *)self _resetRotorTextNavigation];
          [(VOTElementManager *)self _updateCurrentElementForTextInputSelectionChangeIfNeeded];

          goto LABEL_35;
        }

        if ([(VOTElementManager *)self _shouldSwitchToFirstResponder:?]&& [(VOTElement *)self->_firstResponderElement isAccessibleElement])
        {
          [(VOTElementManager *)self _setCurrentElement:self->_firstResponderElement];
          v34 = +[VOTDisplayManager displayManager];
          [v34 setCursorFrameForElement:self->_firstResponderElement];

          v35 = 0;
        }

        else
        {
          v35 = 1;
        }

        if (![(VOTElement *)v226 isEqual:self->_firstResponderElement])
        {
          goto LABEL_35;
        }

        v220 = v35;
        v215 = v25;
        v39 = +[AXSettings sharedInstance];
        voiceOverCursorOutputStyle = [v39 voiceOverCursorOutputStyle];

        selectedTextRange = [(VOTElement *)self->_firstResponderElement selectedTextRange];
        v43 = v42;
        v44 = +[AXSubsystemVoiceOver sharedInstance];
        ignoreLogging = [v44 ignoreLogging];

        if ((ignoreLogging & 1) == 0)
        {
          v213 = voiceOverCursorOutputStyle;
          range = v43;
          v46 = selectedTextRange;
          v47 = +[AXSubsystemVoiceOver identifier];
          v48 = AXLoggerForFacility();

          v49 = AXOSLogLevelFromAXLogLevel();
          if (os_log_type_enabled(v48, v49))
          {
            v50 = AXColorizeFormatLog();
            v236.location = v46;
            v236.length = range;
            v51 = NSStringFromRange(v236);
            NSStringFromRange(self->_elementSelectionRangeBufferForSelectionChange);
            v192 = suppressSelectionChangeNotificationCount = v51;
            v210 = v50;
            v52 = _AXStringForArgs();

            v53 = v48;
            if (os_log_type_enabled(v53, v49))
            {
              *buf = 138543362;
              v235 = v52;
              _os_log_impl(&_mh_execute_header, v53, v49, "%{public}@", buf, 0xCu);
            }

            v26 = selectedLanguage;
          }

          selectedTextRange = v46;
          v43 = range;
          voiceOverCursorOutputStyle = v213;
        }

        if (v43 || self->_elementSelectionRangeBufferForSelectionChange.length)
        {
          if (v221)
          {
            v36 = 0;
            goto LABEL_56;
          }

          if (v26)
          {
            currentSoftwareKeyboardLanguage = v26;
          }

          else
          {
            application = [(VOTElement *)self->_firstResponderElement application];
            currentSoftwareKeyboardLanguage = [application currentSoftwareKeyboardLanguage];
          }

          v56 = [(VOTElement *)self->_firstResponderElement value:suppressSelectionChangeNotificationCount];
          [(VOTElementManager *)self _outputSelectionDifference:selectedTextRange oldRange:v43 string:self->_elementSelectionRangeBufferForSelectionChange.location language:self->_elementSelectionRangeBufferForSelectionChange.length, v56, currentSoftwareKeyboardLanguage];
          v36 = 0;
          goto LABEL_54;
        }

        location = self->_elementSelectionRangeBufferForSelectionChange.location;
        value = [(VOTElement *)self->_firstResponderElement value];
        currentSoftwareKeyboardLanguage = value;
        v214 = value;
        if (selectedTextRange <= location)
        {
          if (selectedTextRange >= location)
          {
            if (selectedTextRange || self->_elementSelectionRangeBufferForSelectionChange.location)
            {
              if (selectedTextRange != [value length] || (v73 = self->_elementSelectionRangeBufferForSelectionChange.location, v162 = v73 == objc_msgSend(currentSoftwareKeyboardLanguage, "length"), v26 = selectedLanguage, !v162))
              {
                v74 = +[AXSubsystemVoiceOver sharedInstance];
                ignoreLogging2 = [v74 ignoreLogging];

                if (ignoreLogging2)
                {
                  v36 = 0;
LABEL_98:
                  currentSoftwareKeyboardLanguage = v214;
                  goto LABEL_55;
                }

                v93 = selectedTextRange;
                v94 = +[AXSubsystemVoiceOver identifier];
                v95 = AXLoggerForFacility();

                v56 = v95;
                v96 = AXOSLogLevelFromAXLogLevel();
                if (!os_log_type_enabled(v56, v96))
                {
                  v36 = 0;
                  selectedTextRange = v93;
                  currentSoftwareKeyboardLanguage = v214;
LABEL_54:

LABEL_55:
LABEL_56:
                  [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v43, 1, suppressSelectionChangeNotificationCount];
                  if (!v220)
                  {
                    goto LABEL_34;
                  }

                  goto LABEL_33;
                }

                v216 = AXColorizeFormatLog();
                v196 = _AXStringForArgs();
                if (os_log_type_enabled(v56, v96))
                {
                  *buf = 138543362;
                  v235 = v196;
                  _os_log_impl(&_mh_execute_header, v56, v96, "%{public}@", buf, 0xCu);
                }

                v36 = 0;
                selectedTextRange = v93;
                currentSoftwareKeyboardLanguage = v214;
LABEL_226:

                goto LABEL_54;
              }
            }

            v211 = location;
            if ([VOTSharedWorkspace fingerCount])
            {
              v36 = 0;
              goto LABEL_55;
            }

            v198 = selectedTextRange;
            application2 = [(VOTElement *)self->_firstResponderElement application];
            isDictationListening = [application2 isDictationListening];

            if (isDictationListening)
            {
              v36 = 0;
              v13 = v226;
              v26 = selectedLanguage;
              goto LABEL_98;
            }

            v105 = +[AXSubsystemVoiceOver sharedInstance];
            ignoreLogging3 = [v105 ignoreLogging];

            if ((ignoreLogging3 & 1) == 0)
            {
              v107 = +[AXSubsystemVoiceOver identifier];
              v108 = AXLoggerForFacility();

              v109 = AXOSLogLevelFromAXLogLevel();
              if (os_log_type_enabled(v108, v109))
              {
                v110 = AXColorizeFormatLog();
                v111 = _AXStringForArgs();
                v112 = v108;
                if (os_log_type_enabled(v112, v109))
                {
                  *buf = 138543362;
                  v235 = v111;
                  _os_log_impl(&_mh_execute_header, v112, v109, "%{public}@", buf, 0xCu);
                }
              }
            }

            v113 = +[VOTOutputManager outputManager];
            v114 = +[VOSOutputEvent BoundaryEncountered];
            [v113 sendEvent:v114];

            if ([v214 length] && (-[VOTElement doesHaveTraits:](self->_firstResponderElement, "doesHaveTraits:", kAXTextAreaTrait) || -[VOTElement doesHaveAllTraits:](self->_firstResponderElement, "doesHaveAllTraits:", kAXTextEntryTrait | kAXWebContentTrait | kAXIsEditingTrait)))
            {
              if (v198)
              {
                v36 = sub_1000511CC(off_1001FDDD0, @"bottom.document", 0);

                v70 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v198 - 1];
                v208 = v115;
              }

              else
              {
                v36 = sub_1000511CC(off_1001FDDD0, @"top.document", 0);

                [(VOTElement *)self->_firstResponderElement lineRangeForPosition:0];
                v208 = v190;
                v70 = 0;
              }
            }

            else
            {
              v208 = 0;
              v70 = 0;
              v36 = 0;
            }

            v67 = 0;
            v13 = v226;
            v26 = selectedLanguage;
            selectedTextRange = v198;
            v43 = 0;
            currentSoftwareKeyboardLanguage = v214;
            v69 = v208;
          }

          else
          {
            v211 = location;
            v67 = 0;
            v68 = self->_elementSelectionRangeBufferForSelectionChange.location;
            self->_cursorBorderHitCount = 0;
            if (v68 == 0x7FFFFFFF)
            {
              v69 = 1;
              v70 = selectedTextRange;
              v36 = 0;
              goto LABEL_97;
            }

            v69 = v68 - selectedTextRange;
            v36 = 0;
            v70 = selectedTextRange;
          }

LABEL_96:
          if (v69 < 1)
          {
            goto LABEL_55;
          }

LABEL_97:
          v202 = v67;
          v80 = currentSoftwareKeyboardLanguage;
          v81 = v70;
          v200 = &v70[v69];
          if (&v70[v69] > [v80 length])
          {
            goto LABEL_98;
          }

          v207 = v69;
          v82 = (v225[2])(v225, v70, v69);
          v83 = +[NSCharacterSet newlineCharacterSet];
          [v82 rangeOfCharacterFromSet:v83];
          v85 = v84;

          v197 = selectedTextRange;
          rangea = v43;
          v204 = v81;
          if (!self->_flags.performedRotorTextNavigation)
          {
            keyboardPressInfo = [VOTSharedWorkspace keyboardPressInfo];
            v87 = (keyboardPressInfo != 0) | v215;

            if ((v87 & 1) == 0)
            {
              v97 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:selectedTextRange + 1];
              if (v97 != -[VOTElement lineRangeForPosition:](self->_firstResponderElement, "lineRangeForPosition:", selectedTextRange) + 1 && ![v82 isEqualToString:@"\n"])
              {
                goto LABEL_143;
              }

              v124 = sub_1000511CC(off_1001FDDD0, @"empty.line", 0);
LABEL_142:

              v82 = v124;
LABEL_143:
              v26 = selectedLanguage;
              goto LABEL_150;
            }

            v88 = v82;
            if ([(VOTElementManager *)self _isKeyboardLineMovement])
            {
              v89 = selectedTextRange;
              v90 = selectedTextRange + 1;
              v91 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v90];
              if (v91 == [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v89]+ 1)
              {
                v124 = @"\n";
              }

              else
              {
                if (v197 == [v214 length])
                {
                  v116 = v197 - 1;
                }

                else
                {
                  v117 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v197];
                  v116 = v197;
                  if (v197 == &v117[v118])
                  {
                    v119 = [(VOTElement *)self->_firstResponderElement valueForRange:v197, 1];
                    v120 = +[NSCharacterSet newlineCharacterSet];
                    v121 = [v119 rangeOfCharacterFromSet:v120];

                    if (v121 == 0x7FFFFFFFFFFFFFFFLL)
                    {
                      v116 = v90;
                    }

                    else
                    {
                      v116 = v197;
                    }
                  }
                }

                firstResponderElement = self->_firstResponderElement;
                v123 = [(VOTElement *)firstResponderElement lineRangeForPosition:v116];
                v124 = [(VOTElement *)firstResponderElement valueForRange:v123, v124];
              }

              goto LABEL_142;
            }

            if (v85 != 1)
            {
              if ([v82 length] < 2)
              {
                v217 = v207;
              }

              else
              {
                value2 = [(VOTElement *)self->_firstResponderElement value];
                if (&v81[v207] >= [value2 length])
                {
                  v101 = 0;
                  v217 = v207;
                }

                else
                {
                  v101 = 0;
                  v217 = v207;
                  v102 = v200;
                  do
                  {
                    v103 = +[NSCharacterSet punctuationCharacterSet];
                    v104 = [v103 characterIsMember:{objc_msgSend(value2, "characterAtIndex:", v102)}];

                    if (!v104)
                    {
                      break;
                    }

                    ++v217;

                    value2 = [(VOTElement *)self->_firstResponderElement value];
                    ++v102;
                    v101 = 1;
                  }

                  while (v102 < [value2 length]);
                }

                if (v101)
                {
                  v217 = [(VOTElement *)self->_firstResponderElement valueForRange:v204, v217];

                  v88 = v217;
                }
              }

              if (v207 != 1)
              {
                v184 = v197 >= v211 ? v202 : 0;
                v185 = v197 < v211 ? 1 : 2;
                v186 = [v88 wordFromPosition:v184 inDirection:v185];
                if (v187)
                {
                  v188 = v186;
                  if (v186 != 0x7FFFFFFFFFFFFFFFLL)
                  {
                    v189 = v187;
                    if (&v186[v187] <= [v88 length])
                    {
                      v82 = v88;
                      v124 = [v88 substringWithRange:{v188, v189}];
                      v207 = v217;
                      goto LABEL_142;
                    }
                  }
                }
              }

              v207 = v217;
            }

            v26 = selectedLanguage;
            v82 = v88;
          }

LABEL_150:
          v126 = [v82 length];
          v127 = +[NSCharacterSet whitespaceCharacterSet];
          if (v126 < 1)
          {
            v130 = 1;
          }

          else
          {
            v128 = 0;
            v129 = 0;
            do
            {
              v129 += [v127 characterIsMember:{objc_msgSend(v82, "characterAtIndex:", v128++)}];
            }

            while (v126 != v128);
            v130 = v129 < 2;
            v26 = selectedLanguage;
          }

          if ([v82 length] > 1)
          {
            v131 = [v82 stringByReplacingOccurrencesOfString:@"\n" withString:@" "];

            v82 = v131;
          }

          v132 = [(VOTElement *)self->_firstResponderElement doesHaveTraits:kAXSecureTextFieldTrait];
          v207 = [(VOTElement *)self->_firstResponderElement attributedValueForRange:v204, v207];
          [VOTSharedWorkspace addMisspellingsForString:?];
          v196 = v127;
          if (v132)
          {
            v139 = 0;
            v201 = 0;
            v203 = 0;
            goto LABEL_174;
          }

          lineStartPosition = [(VOTElement *)self->_firstResponderElement lineStartPosition];
          if (lineStartPosition == self->_lastSeenLineStartPositionForFontProperties)
          {
            v203 = 0;
          }

          else
          {
            v134 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v197];
            v135 = [(VOTElement *)self->_firstResponderElement attributedValueForRange:v134, v135];
            v203 = [(VOTElementManager *)self _listItemLabelForAXAttributedString:v135];
          }

          self->_lastSeenLineStartPositionForFontProperties = lineStartPosition;
          string = [v207 string];
          v138 = [(VOTElementManager *)self stringIsTextAttachment:string];

          v139 = [v207 length];
          if (v138)
          {
            v139 = [(VOTElementManager *)self _textAttachmentElementForString:v207 inRange:0, v139];
            if (v139)
            {
              v130 = 0;
              v201 = 0;
              goto LABEL_174;
            }

            sub_1000511CC(off_1001FDDD0, @"attachment", 0);
            v130 = 0;
            v201 = 0;
            v82 = v142 = v82;
          }

          else
          {
            if (v139)
            {
              v140 = [v207 length];
              if ((v140 - 1) >= (((__PAIR128__(v197, v211) - v197) >> 64) - v204))
              {
                v141 = (((__PAIR128__(v197, v211) - v197) >> 64) - v204);
              }

              else
              {
                v141 = v140 - 1;
              }

              v142 = [v207 attributesAtIndex:v141 effectiveRange:0];
            }

            else
            {
              v142 = 0;
            }

            v201 = [(VOTElementManager *)self _computeChangedFontAttributes:v142 storedAttributes:self->_lastSeenFontProperties haveMisspellCheck:1];
            v26 = selectedLanguage;
          }

          v139 = 0;
LABEL_174:
          v143 = +[VOTOutputRequest createRequest];
          v144 = VOTLogCommon();
          if (os_log_type_enabled(v144, OS_LOG_TYPE_INFO))
          {
            keyboardLanguageHint = [v143 keyboardLanguageHint];
            *buf = 138412290;
            v235 = keyboardLanguageHint;
            _os_log_impl(&_mh_execute_header, v144, OS_LOG_TYPE_INFO, "Keyboard language hint: %@", buf, 0xCu);
          }

          application3 = [(VOTElement *)self->_firstResponderElement application];
          [application3 currentSoftwareKeyboardLanguage];
          v148 = v147 = v143;
          [v147 setKeyboardLanguageHint:v148];

          v228 = v147;
          keyboardLanguageHint2 = [v147 keyboardLanguageHint];
          if (([keyboardLanguageHint2 hasPrefix:@"ar"] & 1) != 0 || objc_msgSend(keyboardLanguageHint2, "hasPrefix:", @"he"))
          {

            v150 = 0;
            selectedTextRange = v197;
            currentSoftwareKeyboardLanguage = v214;
          }

          else
          {
            selectedTextRange = v197;
            currentSoftwareKeyboardLanguage = v214;
            v150 = keyboardLanguageHint2;
          }

          v195 = v150;
          if (v26)
          {
            v150 = v26;
          }

          v205 = v150;
          if ([v36 length])
          {
            v151 = [v228 addString:v36 withLanguage:v26 category:@"TopBottomString"];
          }

          v194 = v130;
          if (v139)
          {
            [v139 addTextualInformationToRequest:v228 options:0x4000 dataPackage:0];
            v152 = sub_1000511CC(off_1001FDDD0, @"attachment", v26);
            v153 = [v228 addString:v152];

            v82 = 0;
          }

          if ([v203 length])
          {
            v154 = [v228 addString:v203];
            lastAction = [v228 lastAction];
            LODWORD(v156) = 1062836634;
            v157 = [NSNumber numberWithFloat:v156];
            [lastAction setObject:v157 forVariant:32];

            currentSoftwareKeyboardLanguage = v214;
          }

          v158 = +[AXSettings sharedInstance];
          voiceOverPhoneticsFeedback = [v158 voiceOverPhoneticsFeedback];

          v209 = 0;
          if ([v82 length] == 1 && voiceOverPhoneticsFeedback)
          {
            v209 = [(VOTElementManager *)self _phoneticStringForLetter:v82 language:v205];
          }

          if ([v82 isAXAttributedString])
          {
            _orderedMonitoredFontAttributes = [(VOTElementManager *)self _orderedMonitoredFontAttributes];
            [v82 removeAttributes:_orderedMonitoredFontAttributes];
          }

          v216 = v82;
          v161 = [v209 length];
          if (v161)
          {
            v162 = voiceOverPhoneticsFeedback == 0;
          }

          else
          {
            v162 = 1;
          }

          v163 = !v162;
          if (!v161 || voiceOverPhoneticsFeedback != 2)
          {
            v193 = voiceOverPhoneticsFeedback;
            v173 = [v228 addString:v216 withLanguage:v205];
            lastAction2 = [v228 lastAction];
            [lastAction2 setObject:kCFBooleanTrue forVariant:50];

            if (v194)
            {
              lastAction3 = [v228 lastAction];
              v177 = [VOTSharedWorkspace punctuationGroupForUUID:AXSSVoiceOverPunctuationGroupAll];
              [lastAction3 setObject:v177 forVariant:30];

              currentSoftwareKeyboardLanguage = v214;
            }

            v43 = rangea;
            v56 = v139;
            if (!v163)
            {
              goto LABEL_217;
            }

            if (v193 != 2)
            {
              LODWORD(v175) = 1061158912;
              [v228 addPause:v175];
            }
          }

          v164 = +[AXSettings sharedInstance];
          voiceOverCapitalLetterFeedback = [v164 voiceOverCapitalLetterFeedback];

          if (voiceOverCapitalLetterFeedback || !sub_10005088C(v216))
          {
            v169 = [v228 addString:v209];
          }

          else
          {
            v166 = sub_1000511CC(off_1001FDDD0, @"CapitalLetterFormat", 0);
            v209 = [NSString stringWithFormat:v166, v209];

            v168 = [v228 addString:v209];
          }

          v56 = v139;
          currentSoftwareKeyboardLanguage = v214;
          v43 = rangea;
          if ([(VOTElementManager *)self _needsPhoneticBrailleForLanauge:v205])
          {
            [(VOTElementManager *)self _sendBrailleAlert:v209];
          }

          if ([v216 length] == 1)
          {
            if (sub_10005088C(v216))
            {
              v170 = +[AXSettings sharedInstance];
              voiceOverCapitalLetterFeedback2 = [v170 voiceOverCapitalLetterFeedback];

              v162 = voiceOverCapitalLetterFeedback2 == 1;
              v56 = v139;
              currentSoftwareKeyboardLanguage = v214;
              if (v162)
              {
                lastAction4 = [v228 lastAction];
                [lastAction4 setObject:&off_1001D9940 forVariant:32];

                v56 = v139;
              }
            }
          }

LABEL_217:
          if ((TTSisSpeakableEmojiString() & 1) != 0 || [v216 length] == 1)
          {
            v178 = +[VOTWorkspace sharedWorkspace];
            visionEngine = [v178 visionEngine];
            [visionEngine processStringFor2DBrailleDisplay:v216];

            currentSoftwareKeyboardLanguage = v214;
            v56 = v139;
          }

          v13 = v226;
          if ([v201 length])
          {
            v180 = [v228 addAttributedString:v201];
            if ([VOTSharedWorkspace typingPitchChangeEnabled])
            {
              lastAction5 = [v228 lastAction];
              LODWORD(v182) = 1062836634;
              v183 = [NSNumber numberWithFloat:v182];
              [lastAction5 setObject:v183 forVariant:32];

              currentSoftwareKeyboardLanguage = v214;
              v56 = v139;
            }
          }

          if ((v221 & 1) == 0)
          {
            [(VOTElementManager *)self sendRequest:v228];
          }

          goto LABEL_226;
        }

        v59 = Current - lastWordRotorMovement;
        v60 = "ntManagerDelegate>";
        v211 = location;
        if (voiceOverCursorOutputStyle == 2 && v59 >= 0.35)
        {
          if (v215)
          {
            v61 = +[VOTKeyboardManager keyboardManager];
            lastDispatchedKeyEvent2 = [v61 lastDispatchedKeyEvent];
            [lastDispatchedKeyEvent2 keyInfo];
            v64 = v63 = selectedTextRange;
            modifierState = [v64 modifierState];

            selectedTextRange = v63;
            voiceOverCursorOutputStyle = 2;

            currentSoftwareKeyboardLanguage = v214;
            v60 = "@<VOTExplorerElementManagerDelegate>" + 19;
            if ((modifierState & 2) != 0)
            {
              v65 = [v214 length];
              if ((v65 - selectedTextRange) >= 0x64)
              {
                v66 = 100;
              }

              else
              {
                v66 = v65 - selectedTextRange;
              }

              [(VOTElement *)self->_firstResponderElement setSelectedTextRange:&selectedTextRange[(v224[2])(v224 refreshBraille:selectedTextRange, v66, 0)], 0, 1];
              self->_lastWordRotorMovement = CFAbsoluteTimeGetCurrent();

              goto LABEL_35;
            }
          }
        }

        else if (voiceOverCursorOutputStyle == 2)
        {
          v67 = 0;
          self->_cursorBorderHitCount = 0;
          v72 = selectedTextRange;
LABEL_86:
          v76 = *(v60 + 66);
          if (Current - lastCharacterRotorMovement >= v76)
          {
            v70 = v72;
            if (v59 < v76)
            {
              v77 = v67;
              v78 = [currentSoftwareKeyboardLanguage length];
              if ((v78 - &v70[v77]) >= 0x64)
              {
                v79 = 100;
              }

              else
              {
                v79 = v78 - &v70[v77];
              }

              v67 = (v224[2])(v224, v70, v79, 1);
            }

            v36 = 0;
          }

          else
          {
            v36 = 0;
            v70 = v72 + 1;
          }

          v69 = v67;
          goto LABEL_96;
        }

        v71 = self->_elementSelectionRangeBufferForSelectionChange.location;
        if (v71 == 0x7FFFFFFF)
        {
          v67 = 0;
          v72 = 0;
        }

        else
        {
          v72 = (self->_elementSelectionRangeBufferInternal.length + v71);
          v67 = selectedTextRange - v72;
        }

        self->_cursorBorderHitCount = 0;
        v43 = 0;
        if (voiceOverCursorOutputStyle != 2)
        {
          v36 = 0;
          v69 = v67;
          v70 = v72;
          goto LABEL_96;
        }

        goto LABEL_86;
      }
    }

    goto LABEL_21;
  }

  [(VOTElementManager *)self _reupdateTextSelectionInformation];
  v6 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging4 = [v6 ignoreLogging];

  if ((ignoreLogging4 & 1) == 0)
  {
    v8 = +[AXSubsystemVoiceOver identifier];
    v9 = AXLoggerForFacility();

    v10 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v9, v10))
    {
      v11 = AXColorizeFormatLog();
      suppressSelectionChangeNotificationCount = [VOTSharedWorkspace suppressSelectionChangeNotificationCount];
      v12 = _AXStringForArgs();
      if (os_log_type_enabled(v9, v10))
      {
        *buf = 138543362;
        v235 = v12;
        _os_log_impl(&_mh_execute_header, v9, v10, "%{public}@", buf, 0xCu);
      }
    }
  }

  [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:{objc_msgSend(VOTSharedWorkspace, "suppressSelectionChangeNotificationCount", suppressSelectionChangeNotificationCount) - 1}];
LABEL_37:
}

- (void)_elementSelectionRangeDidChange:(_NSRange)change reason:(int64_t)reason
{
  if (reason <= 2)
  {
    self->_elementSelectionRangeBufferInternal = change;
    self->_elementSelectionRangeBufferForValueChange = change;
    self->_elementSelectionRangeBufferForSelectionChange = change;
  }
}

- (_NSRange)_elementSelectionRange
{
  length = self->_elementSelectionRangeBufferInternal.length;
  location = self->_elementSelectionRangeBufferInternal.location;
  result.length = length;
  result.location = location;
  return result;
}

- (void)_updateCurrentElementForTextInputSelectionChangeIfNeeded
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  _currentElement = [(VOTElementManager *)self _currentElement];
  v4 = _currentElement;
  if (self->_firstResponderElement)
  {
    textInputElement = [_currentElement textInputElement];
    v6 = [textInputElement isEqual:self->_firstResponderElement];

    if (v6)
    {
      textInputElementRange = [v4 textInputElementRange];
      if (textInputElementRange != 0x7FFFFFFF)
      {
        v9 = textInputElementRange;
        v10 = v8;
        uiElement = [(VOTElement *)self->_firstResponderElement uiElement];
        [uiElement rectWithAXAttribute:2057];
        v13 = v12;
        v15 = v14;
        v17 = v16;
        v19 = v18;

        location = self->_elementSelectionRangeBufferInternal.location;
        length = self->_elementSelectionRangeBufferInternal.length;
        if (v9 > length + location || v9 + v10 < location)
        {
          if (v9 <= length + location)
          {
            v28 = 1;
          }

          else
          {
            v28 = 2;
          }

LABEL_19:
          self->_flags.performedElementUpdateForSelectionChange = 1;
          [(VOTElementManager *)self _cancelPreviousElementSearch];
          fetchManager = self->_fetchManager;
          v34[0] = _NSConcreteStackBlock;
          v34[1] = 3221225472;
          v34[2] = sub_10009F19C;
          v34[3] = &unk_1001CA070;
          v34[4] = self;
          v34[5] = location;
          v34[6] = length;
          *&v34[7] = v13;
          *&v34[8] = v15;
          *&v34[9] = v17;
          *&v34[10] = v19;
          elementSearchGeneration = self->_elementSearchGeneration;
          LOBYTE(v31) = [VOTSharedWorkspace navigationStyleHonorsGroups];
          [(VOTElementFetcher *)fetchManager searchForElementInDirection:v28 fromElement:v4 matchBlock:v34 rangeMatch:0 searchType:999999 generation:elementSearchGeneration startingRange:0x7FFFFFFFLL groupNavigationStyle:0, v31];
          goto LABEL_20;
        }

        [v4 updateFrame];
        [v4 frame];
        x = v35.origin.x;
        y = v35.origin.y;
        width = v35.size.width;
        height = v35.size.height;
        v41.origin.x = v13;
        v41.origin.y = v15;
        v41.size.width = v17;
        v41.size.height = v19;
        v36 = CGRectIntersection(v35, v41);
        if (CGRectIsEmpty(v36))
        {
          v37.origin.x = x;
          v37.origin.y = y;
          v37.size.width = width;
          v37.size.height = height;
          MaxY = CGRectGetMaxY(v37);
          v38.origin.x = v13;
          v38.origin.y = v15;
          v38.size.width = v17;
          v38.size.height = v19;
          MinY = CGRectGetMinY(v38);
          v39.origin.x = x;
          v39.origin.y = y;
          v39.size.width = width;
          v39.size.height = height;
          v26 = CGRectGetMinY(v39);
          v40.origin.x = v13;
          v40.origin.y = v15;
          v40.size.width = v17;
          v40.size.height = v19;
          v27 = CGRectGetMaxY(v40);
          v28 = v26 < v27 ? 1 : 2;
          if (v26 >= v27 || MaxY <= MinY)
          {
            goto LABEL_19;
          }
        }
      }
    }
  }

LABEL_20:
}

- (int64_t)typingFeedbackForKeyboardType
{
  if ([VOTSharedWorkspace brailleInputActive])
  {
    v3 = +[AXSettings sharedInstance];
    voiceOverBrailleGesturesTypingFeedback = [v3 voiceOverBrailleGesturesTypingFeedback];
LABEL_9:
    v7 = voiceOverBrailleGesturesTypingFeedback;

    return v7;
  }

  elementRotor = [(VOTElementManager *)self elementRotor];
  currentRotorType = [elementRotor currentRotorType];

  if (currentRotorType != 60)
  {
    v8 = [(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:&stru_1001CA090];
    v9 = [(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:&stru_1001CA0B0];
    v10 = +[AXSettings sharedInstance];
    v3 = v10;
    if (v8 || v9)
    {
      voiceOverBrailleGesturesTypingFeedback = [v10 voiceOverHardwareTypingFeedback];
    }

    else
    {
      voiceOverBrailleGesturesTypingFeedback = [v10 voiceOverSoftwareTypingFeedback];
    }

    goto LABEL_9;
  }

  return 2;
}

- (BOOL)_ignoreTextEditingNotificationsForPickerElementUsage
{
  v3 = VOTLogCommon();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    v4 = CFAbsoluteTimeGetCurrent() - self->_lastAdjustValueTime;
    v11 = 134217984;
    v12 = v4;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "Ignore text editing for picker usage change: %f", &v11, 0xCu);
  }

  if (CFAbsoluteTimeGetCurrent() - self->_lastAdjustValueTime >= 0.300000012)
  {
    return 0;
  }

  _currentElement = [(VOTElementManager *)self _currentElement];
  if ([(VOTElementManager *)self _isElementValidForFirstResponder:_currentElement])
  {
    v6 = 0;
  }

  else
  {
    _currentElement2 = [(VOTElementManager *)self _currentElement];
    if ([_currentElement2 doesHaveTraits:kAXAdjustableTrait])
    {
      _currentElement3 = [(VOTElementManager *)self _currentElement];
      value = [_currentElement3 value];
      v6 = [value length] != 0;
    }

    else
    {
      v6 = 0;
    }
  }

  return v6;
}

- (void)_handleNonEditableValueChange:(id)change
{
  changeCopy = change;
  v5 = [(VOTElement *)self->_currentElement isEqual:changeCopy];
  v6 = VOTLogCommon();
  v7 = os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG);
  if (v5)
  {
    if (v7)
    {
      sub_10012D200();
    }

    v6 = +[VOTBrailleManager manager];
    [v6 setBrailleElement:changeCopy resetBrailleCursor:0 rotorSelection:0];
  }

  else if (v7)
  {
    sub_10012D1C4();
  }
}

- (void)_handleValueChangedNotification:(id)notification associatedElement:(id)element
{
  notificationCopy = notification;
  elementCopy = element;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v8 = notificationCopy;
  }

  else
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v8 = [notificationCopy objectForKey:kAXValueChangeUserInfoKeyChangeType];
      v9 = [notificationCopy objectForKey:kAXValueChangeUserInfoKeyIsQuiet];
      bOOLValue = [v9 BOOLValue];

      goto LABEL_9;
    }

    if (elementCopy && ([elementCopy doesHaveTraits:kAXIsEditingTrait] & 1) == 0)
    {
      [(VOTElementManager *)self _handleNonEditableValueChange:elementCopy];
      v25 = VOTLogCommon();
      if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "Non editable value change element present, processing offline", buf, 2u);
      }

      v8 = 0;
      goto LABEL_37;
    }

    v8 = 0;
  }

  bOOLValue = 0;
LABEL_9:
  if ([VOTSharedWorkspace suppressValueChangeNotificationCount] >= 1)
  {
    suppressValueChangeNotificationCount = [VOTSharedWorkspace suppressValueChangeNotificationCount];
    [VOTSharedWorkspace setSuppressValueChangeNotificationCount:suppressValueChangeNotificationCount - 1];
    goto LABEL_37;
  }

  if (self->_firstResponderElement)
  {
    [(VOTElementManager *)self setPreviousFirstResponder:?];
  }

  [(VOTElementManager *)self _updateFirstResponder];
  if (![(VOTElementManager *)self _ignoreTextEditingNotificationsForPickerElementUsage])
  {
    v12 = self->_firstResponderElement;
    previousFirstResponder = v12;
    if (!v12)
    {
      previousFirstResponder = [(VOTElementManager *)self previousFirstResponder];
    }

    previousFirstResponderValue = [(VOTElementManager *)self previousFirstResponderValue];
    [previousFirstResponder updateValue];
    value = [previousFirstResponder value];
    if (![previousFirstResponder doesHaveTraits:kAXSecureTextFieldTrait])
    {
      firstResponderElement = self->_firstResponderElement;
      if (firstResponderElement)
      {
        v32 = value;
        application = [(VOTElement *)firstResponderElement application];
        if (!-[NSArray containsObject:](self->_currentApplications, "containsObject:", application) || (v20 = [application valueChangeOriginationSource]) == 0)
        {
          v34 = previousFirstResponderValue;
          Current = CFAbsoluteTimeGetCurrent();
          v22 = +[VOTKeyboardManager keyboardManager];
          [v22 lastDispatchedKeyEventTime];
          v24 = Current - v23;

          if (v24 >= 0.5)
          {
            if ([VOTSharedWorkspace brailleInputActive])
            {
              v20 = 3;
            }

            else
            {
              elementRotor = [(VOTElementManager *)self elementRotor];
              v27 = [elementRotor currentRotorType] == 60;

              v20 = 4 * v27;
            }
          }

          else
          {
            v20 = 1;
          }

          previousFirstResponderValue = v34;
        }

        [(VOTElementManager *)self _processValueChangeWithFirstResponder:self->_firstResponderElement existingFirstResponder:1 changeType:v8 changeOrigination:v20 isQuiet:bOOLValue];
        self->_lastValueChangeTime = CFAbsoluteTimeGetCurrent();

        value = v32;
      }

      if (v12)
      {
        goto LABEL_36;
      }

      goto LABEL_41;
    }

    if ((bOOLValue & 1) == 0)
    {
      if ([value length] || objc_msgSend(previousFirstResponderValue, "length") == 1)
      {
        if ([previousFirstResponderValue isEqualToString:value])
        {
          goto LABEL_40;
        }

        v33 = previousFirstResponderValue;
        v16 = +[VOTOutputManager outputManager];
        v17 = +[VOSOutputEvent DidEnterSecureText];
      }

      else
      {
        v33 = previousFirstResponderValue;
        v16 = +[VOTOutputManager outputManager];
        v17 = +[VOSOutputEvent BoundaryEncountered];
      }

      v29 = v17;
      [v16 sendEvent:v17];

      previousFirstResponderValue = v33;
    }

LABEL_40:
    v30 = VOTSharedWorkspace;
    _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
    [v30 refreshBraille:1 rotorSelection:_currentRotorSelection];

    self->_lastValueChangeTime = CFAbsoluteTimeGetCurrent();
    if (v12)
    {
LABEL_36:
      [(VOTElementManager *)self setPreviousFirstResponderValue:value];
      autofillCurrentElement = self->_autofillCurrentElement;
      self->_autofillCurrentElement = 0;

      [(VOTElementManager *)self _updateCurrentElementForTextInputSelectionChangeIfNeeded];
      goto LABEL_37;
    }

LABEL_41:
    [(VOTElementManager *)self setPreviousFirstResponder:0];
    goto LABEL_36;
  }

LABEL_37:
}

- (void)_handleTextReplacementOccurredNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [notificationCopy length])
  {
    v4 = objc_opt_new();
    v5 = [v4 addString:notificationCopy];
    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      outputActions = [v4 outputActions];
      lastObject = [outputActions lastObject];
      [lastObject setObject:&off_1001D9940 forVariant:32];
    }

    outputActions2 = [v4 outputActions];
    lastObject2 = [outputActions2 lastObject];
    [lastObject2 setObject:&__kCFBooleanTrue forVariant:57];

    suppressValueChangeNotificationCount = [VOTSharedWorkspace suppressValueChangeNotificationCount];
    [VOTSharedWorkspace setSuppressValueChangeNotificationCount:suppressValueChangeNotificationCount + 1];
    suppressSelectionChangeNotificationCount = [VOTSharedWorkspace suppressSelectionChangeNotificationCount];
    [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:suppressSelectionChangeNotificationCount + 1];
    [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
    [v4 send];
  }
}

- (void)resetTextAndSelectionCaches
{
  self->_selectedTextStartLocation = 0;
  [(NSMutableString *)self->_elementTypingBuffer setString:&stru_1001CBF90];

  [(VOTElementManager *)self _elementSelectionRangeDidChange:0x7FFFFFFFLL reason:0, 0];
}

- (void)_processValueChangeWithFirstResponder:(id)responder existingFirstResponder:(BOOL)firstResponder changeType:(id)type changeOrigination:(int64_t)origination isQuiet:(BOOL)quiet
{
  firstResponderCopy = firstResponder;
  responderCopy = responder;
  typeCopy = type;
  p_elementTypingBuffer = &self->_elementTypingBuffer;
  if (!self->_elementTypingBuffer)
  {
    value = [responderCopy value];
    v15 = [value mutableCopyWithZone:0];
    v16 = *p_elementTypingBuffer;
    *p_elementTypingBuffer = v15;

    v17 = VOTLogElement();
    if (os_log_type_enabled(v17, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D270();
    }
  }

  [responderCopy updateValue];
  value2 = [responderCopy value];
  v194 = firstResponderCopy;
  if ([(__CFString *)value2 isAXAttributedString]&& [(__CFString *)value2 hasAttribute:UIAccessibilityTokenPlaceholder])
  {

    value2 = &stru_1001CBF90;
  }

  selectedTextRange = [responderCopy selectedTextRange];
  v214 = v19;
  application = [responderCopy application];
  v21 = [objc_allocWithZone(VOTOutputRequest) init];
  v216 = v21;
  if (origination == 3)
  {
    selectedBrailleGesturesInputTable = [VOTSharedWorkspace selectedBrailleGesturesInputTable];
    localeIdentifier = [selectedBrailleGesturesInputTable localeIdentifier];

    if (localeIdentifier && [localeIdentifier length])
    {
      currentSoftwareKeyboardLanguage = AXLanguageConvertToCanonicalForm();

      HIDWORD(v189) = 1;
      v25 = v216;
      if (currentSoftwareKeyboardLanguage)
      {
        goto LABEL_16;
      }
    }

    else
    {

      HIDWORD(v189) = 0;
      v25 = v216;
    }
  }

  else
  {
    v25 = v21;
    HIDWORD(v189) = 0;
  }

  currentSoftwareKeyboardLanguage = [application currentSoftwareKeyboardLanguage];
LABEL_16:
  [v25 setKeyboardLanguageHint:currentSoftwareKeyboardLanguage];
  if (value2)
  {
    v26 = value2;
  }

  else
  {
    v26 = &stru_1001CBF90;
  }

  v27 = [*p_elementTypingBuffer length];
  v215 = v26;
  v28 = [(__CFString *)v26 length];
  v29 = v27 - v28;
  if (v27 != v28 && [(VOTElementManager *)self _shouldSwitchToFirstResponder:responderCopy])
  {
    [(VOTElementManager *)self _setCurrentElement:responderCopy];
    v30 = +[VOTDisplayManager displayManager];
    [v30 setCursorFrameForElement:responderCopy];
  }

  v201 = currentSoftwareKeyboardLanguage;
  v196 = application;
  v31 = VOTLogElement();
  if (os_log_type_enabled(v31, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D2E0();
  }

  v204 = &self->_elementTypingBuffer;

  v32 = [typeCopy isEqualToString:kAXValueChangeTypeDelete];
  if ([typeCopy isEqualToString:kAXValueChangeTypeInsert])
  {
    v33 = 1;
  }

  else
  {
    v33 = [typeCopy isEqualToString:kAXValueChangeTypeSingleInsert];
  }

  v209 = 0;
  originationCopy = origination;
  v193 = [typeCopy isEqualToString:kAXValueChangeTypeReplacement];
  if (origination <= 1)
  {
    if (origination)
    {
      if (origination != 1)
      {
        goto LABEL_40;
      }

      v34 = +[AXSettings sharedInstance];
      voiceOverHardwareTypingFeedback = [v34 voiceOverHardwareTypingFeedback];
    }

    else
    {
      v34 = +[AXSettings sharedInstance];
      voiceOverHardwareTypingFeedback = [v34 voiceOverSoftwareTypingFeedback];
    }

    goto LABEL_39;
  }

  if (origination == 2)
  {
    v36 = 3;
LABEL_37:
    v209 = v36;
    goto LABEL_40;
  }

  if (origination == 4)
  {
    v36 = 2;
    goto LABEL_37;
  }

  if (origination != 3)
  {
    goto LABEL_40;
  }

  v34 = +[AXSettings sharedInstance];
  voiceOverHardwareTypingFeedback = [v34 voiceOverBrailleGesturesTypingFeedback];
LABEL_39:
  v209 = voiceOverHardwareTypingFeedback;

LABEL_40:
  keyboardLanguageHint2 = VOTLogElement();
  if (os_log_type_enabled(keyboardLanguageHint2, OS_LOG_TYPE_DEBUG))
  {
    location = self->_elementSelectionRangeBufferForValueChange.location;
    length = self->_elementSelectionRangeBufferForValueChange.length;
    *buf = 134218752;
    *&buf[4] = location;
    *&buf[12] = 2048;
    *&buf[14] = length;
    v233 = 2048;
    v234 = selectedTextRange;
    v235 = 2048;
    v236 = v214;
    _os_log_debug_impl(&_mh_execute_header, keyboardLanguageHint2, OS_LOG_TYPE_DEBUG, "Old selection: %lu, %lu -- new selection:%lu %lu", buf, 0x2Au);
  }

  if (self->_elementSelectionRangeBufferForValueChange.length)
  {
    v38 = v214 == 0;
  }

  else
  {
    v38 = 0;
  }

  v39 = v38;
  v206 = v39;
  v40 = (v39 | v33) & 1;
  v230 = 0;
  if (v32)
  {
    v40 = 2;
  }

  v199 = v40;
  v229 = 0;
  v41 = typeCopy && ([typeCopy isEqualToString:kAXValueChangeTypeSingleInsert] & 1) != 0 || v29 == -1;
  v197 = v41;
  v228 = 0;
  *buf = xmmword_10017E110;
  v227 = 0;
  v42 = +[AXAttributedString string];
  v43 = +[NSString string];
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v203 = typeCopy;
  selfCopy = self;
  v195 = selectedLanguage;
  if (!selectedLanguage)
  {
    v45 = responderCopy;
LABEL_58:
    keyboardLanguageHint = [v25 keyboardLanguageHint];

    if (!selectedLanguage)
    {
      goto LABEL_60;
    }

    goto LABEL_59;
  }

  keyboardLanguageHint2 = [v25 keyboardLanguageHint];
  v32 = AXLanguageCanonicalFormToGeneralLanguage();
  v45 = responderCopy;
  if (![keyboardLanguageHint2 hasPrefix:v32])
  {
    goto LABEL_58;
  }

  keyboardLanguageHint = selectedLanguage;
LABEL_59:

LABEL_60:
  if (v209 < 3)
  {
    v46 = v209 + 1;
  }

  else
  {
    v46 = 0;
  }

  v47 = +[AXFirstResponderValueChangeManager sharedInstance];
  elementTypingBuffer = selfCopy->_elementTypingBuffer;
  [VOTSharedWorkspace lastKeyboardKeyPress];
  v225 = v43;
  v226 = v42;
  LOBYTE(v189) = 0;
  BYTE1(v188) = v206;
  LOBYTE(v188) = v197;
  LOBYTE(v187) = originationCopy != 2;
  outputActions2 = [v47 outputValueChangeForNewValue:v215 oldValue:elementTypingBuffer isFirstResponderValid:v45 != 0 selectedTextRange:selectedTextRange oldSelectedTextRange:v214 shouldEchoDeletion:selfCopy->_elementSelectionRangeBufferForValueChange.location optionalValueChangeType:selfCopy->_elementSelectionRangeBufferForValueChange.length derivedValueChangeType:v187 didHitBorder:v199 isBreakSpaceCharacter:&v230 isSingleInsert:&v229 + 1 selectionDeleted:&v229 feedbackType:v188 textOperationOccurred:v46 lastKeyboardKeyPress:&selfCopy->_flags.tapShouldHandleTextOperation isSingleCharacterInsertOrDelete:&v227 singleInsertDeleteAttString:&v226 singleInsertDeleteString:&v225 isSingleCharacterUpdate:&v228 wordRangeToFindMisspelled:buf pasteOperationSucceeded:&v228 + 1 processApostrophes:v189];
  v200 = v226;

  v198 = v225;
  if ([(__CFString *)outputActions2 length]== 1)
  {
    v50 = TTSChoseong_JongseongToHangul();

    outputActions2 = v50;
  }

  v51 = 0;
  v52 = v45;
  v53 = selfCopy;
  v54 = v216;
  if (v230)
  {
    v55 = v203;
    if (v230 == 1)
    {
      v192 = 1;
    }

    else if (v230 == 2)
    {
      v192 = 0;
      v51 = 1;
    }

    else
    {
      v51 = 0;
      v192 = 0;
    }

    [(VOTElementRotor *)selfCopy->_elementRotor setIgnoreDefaultTypeAutofill:0];
  }

  else
  {
    v192 = 0;
    v55 = v203;
  }

  if (HIBYTE(v229) == 1 && !quiet)
  {
    v56 = +[VOTOutputManager outputManager];
    v57 = +[VOSOutputEvent BoundaryEncountered];
    [v56 sendEvent:v57];
  }

  if (v229 != 1)
  {
    v191 = 0;
    v58 = 0;
    goto LABEL_90;
  }

  if (![(NSMutableString *)*v204 length])
  {
    goto LABEL_85;
  }

  v58 = 0;
  if ([(__CFString *)v215 length]< 2)
  {
    v59 = 1;
  }

  else
  {
    v59 = v51;
  }

  if ((v59 & 1) == 0 && !v214 && selectedTextRange >= 3)
  {
    if (selectedTextRange > [(NSMutableString *)*v204 length]+ 1)
    {
LABEL_85:
      v58 = 0;
      goto LABEL_86;
    }

    if (selectedTextRange <= [(__CFString *)v215 length]+ 1)
    {
      v181 = [(NSMutableString *)*v204 characterAtIndex:selectedTextRange - 2];
      v182 = [(__CFString *)v215 characterAtIndex:selectedTextRange - 2];
      v183 = [(__CFString *)v215 characterAtIndex:selectedTextRange - 1];
      if ((v181 & 0xFFFFFF7F) == 0x20 && v182 == 46 && (v183 & 0xFFFFFF7F) == 0x20)
      {

        v58 = 0;
        outputActions2 = @". ";
        v191 = 1;
        v55 = v203;
        goto LABEL_90;
      }

      keyboardLanguageHint3 = [v216 keyboardLanguageHint];
      v185 = sub_100051B24(32, @"UnicodeHex.", @"VOTOutputPunctuation", keyboardLanguageHint3);

      v58 = 1;
      outputActions2 = v185;
    }

    else
    {
      v58 = 0;
    }

    v55 = v203;
  }

LABEL_86:
  v191 = 0;
  if (!outputActions2)
  {
    outputActions2 = @" ";
  }

LABEL_90:
  if (v193)
  {
    v60 = v215;
    v61 = v215;
LABEL_106:

    outputActions2 = v61;
    goto LABEL_107;
  }

  if (v227 == 1)
  {
    if (v209 != 3)
    {
      if ([(__CFString *)v215 isAXAttributedString])
      {
        v62 = [v216 addAttributedString:v200 withLanguage:keyboardLanguageHint];
      }

      else
      {
        v63 = [v216 addString:v198 withLanguage:keyboardLanguageHint];
      }
    }

    typingPitchChangeEnabled = [VOTSharedWorkspace typingPitchChangeEnabled];
    if (originationCopy != 3 && typingPitchChangeEnabled)
    {
      outputActions = [v216 outputActions];
      lastObject = [outputActions lastObject];
      LODWORD(v67) = 1.5;
      v68 = [NSNumber numberWithFloat:v67];
      [lastObject setObject:v68 forVariant:32];

      v54 = v216;
    }

    v60 = v215;
    if ((([(__CFString *)outputActions2 length]> 1) & ~v58) == 0)
    {

      outputActions2 = 0;
    }

    v61 = outputActions2;
    outputActions2 = [v54 outputActions];
    lastObject2 = [(__CFString *)outputActions2 lastObject];
    [lastObject2 setObject:&__kCFBooleanTrue forVariant:57];

    goto LABEL_106;
  }

  v60 = v215;
LABEL_107:
  if (*buf != 0x7FFFFFFFLL || *&buf[8])
  {
    outputActions4 = [v52 attributedValueForRange:?];
    [VOTSharedWorkspace addMisspellingsForString:outputActions4];
    v210 = [outputActions4 hasAttribute:UIAccessibilityTokenMisspelled];
  }

  else if (HIBYTE(v228) == 1)
  {
    outputActions4 = sub_1000511CC(off_1001FDDD0, @"paste.operation.succeeded", 0);
    v71 = [(__CFString *)outputActions2 stringByAppendingFormat:@", %@", outputActions4];

    v210 = 0;
    outputActions2 = v71;
  }

  else
  {
    if (v228 != 1)
    {
      v210 = 0;
      goto LABEL_113;
    }

    if ([(__CFString *)v60 isAXAttributedString])
    {
      v85 = [v54 addAttributedString:v200 withLanguage:keyboardLanguageHint];
    }

    else
    {
      v86 = [v54 addString:v198 withLanguage:keyboardLanguageHint];
    }

    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      outputActions3 = [v54 outputActions];
      lastObject3 = [outputActions3 lastObject];
      LODWORD(v89) = 1.5;
      v90 = [NSNumber numberWithFloat:v89];
      [lastObject3 setObject:v90 forVariant:32];

      v54 = v216;
    }

    if ([(__CFString *)outputActions2 length]<= 1)
    {

      outputActions2 = 0;
    }

    outputActions4 = [v54 outputActions];
    lastObject4 = [outputActions4 lastObject];
    [lastObject4 setObject:&__kCFBooleanTrue forVariant:57];

    v210 = 0;
  }

LABEL_113:
  if (v194 && ([v52 doesHaveTraits:kAXSecureTextFieldTrait] & 1) == 0 && !quiet && -[NSMutableString isEqualToString:](*v204, "isEqualToString:", v60) && !-[__CFString length](v60, "length") && CFAbsoluteTimeGetCurrent() - selfCopy->_lastFirstResponderChangeTime > 0.25)
  {
    v72 = +[VOTOutputManager outputManager];
    v73 = +[VOSOutputEvent BoundaryEncountered];
    [v72 sendEvent:v73];
  }

  v74 = VOTLogElement();
  if (os_log_type_enabled(v74, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D354();
  }

  if ([(__CFString *)v60 isAXAttributedString]&& ([(__CFString *)v60 hasAttribute:UIAccessibilityTokenPlaceholder]& 1) != 0)
  {
    v75 = &stru_1001CBF90;
  }

  else
  {
    v75 = v60;
  }

  [(NSMutableString *)*v204 setString:v75];
  if (v52)
  {
    selectedTextRange2 = [v52 selectedTextRange];
    v78 = v77;
  }

  else
  {
    v78 = 0;
    selectedTextRange2 = 0x7FFFFFFFLL;
  }

  [(VOTElementManager *)selfCopy _elementSelectionRangeDidChange:selectedTextRange2 reason:v78, 0];
  if ([VOTSharedWorkspace brailleInputActive])
  {
    v79 = +[AXSettings sharedInstance];
    voiceOverBrailleGesturesTypingFeedback = [v79 voiceOverBrailleGesturesTypingFeedback];

    if ((v51 & 1) == 0)
    {
      if (voiceOverBrailleGesturesTypingFeedback)
      {
        if (voiceOverBrailleGesturesTypingFeedback == 3)
        {
LABEL_150:

          outputActions2 = &stru_1001CBF90;
          goto LABEL_151;
        }

        if (voiceOverBrailleGesturesTypingFeedback != 2)
        {
          goto LABEL_151;
        }
      }

      if ([(__CFString *)outputActions2 length])
      {
        v81 = [(__CFString *)outputActions2 characterAtIndex:[(__CFString *)outputActions2 length]- 1];
        v82 = +[NSCharacterSet whitespaceCharacterSet];
        LODWORD(v81) = [v82 characterIsMember:v81];

        v83 = [(__CFString *)outputActions2 hasSuffix:@"\n"];
        if (v81)
        {
          v54 = v216;
          v84 = [v216 addString:@" " withLanguage:keyboardLanguageHint];
          goto LABEL_149;
        }

        v54 = v216;
        if (!v83)
        {
LABEL_149:
          if (voiceOverBrailleGesturesTypingFeedback)
          {
            goto LABEL_151;
          }

          goto LABEL_150;
        }
      }

      else if (([(__CFString *)outputActions2 hasSuffix:@"\n"]& 1) == 0)
      {
        goto LABEL_149;
      }

      v94 = [v54 addString:@"\n"];
      goto LABEL_149;
    }
  }

LABEL_151:
  v95 = VOTLogElement();
  if (os_log_type_enabled(v95, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D3C4();
  }

  if (v206)
  {
    v96 = sub_1000511CC(off_1001FDDD0, @"selection.deleted", 0);
    v97 = [v54 addString:v96];
  }

  if (![(__CFString *)outputActions2 length])
  {
    goto LABEL_208;
  }

  if ([(__CFString *)v60 isAXAttributedString])
  {
    v98 = [(__CFString *)v60 copyWithZone:0];
    [v98 replaceString:outputActions2];
    if (v51)
    {
      v99 = +[AXSettings sharedInstance];
      voiceOverDeletionFeedback = [v99 voiceOverDeletionFeedback];

      v101 = v191;
      if (voiceOverDeletionFeedback)
      {
        v102 = 0;
        v103 = 0x7FFFFFFFFFFFFFFFLL;
        if (!v191)
        {
          goto LABEL_169;
        }
      }

      else
      {
        v175 = sub_1000516CC(off_1001FDDD0, @"delete.text.prefix", 0, keyboardLanguageHint);
        v103 = [v175 rangeOfString:@"%@"];
        v205 = v176;
        v102 = [v98 length];
        v207 = AXCFormattedString();
        [AXAttributedString axAttributedStringWithString:v207, v98];
        v221[0] = _NSConcreteStackBlock;
        v221[1] = 3221225472;
        v221[2] = sub_1000A1368;
        v221[3] = &unk_1001CA0D8;
        v223 = v103;
        v177 = v224 = v205;
        v222 = v177;
        [v98 enumerateAttributesUsingBlock:v221];
        v178 = v177;

        v53 = selfCopy;
        v98 = v178;
        if (!v191)
        {
LABEL_169:
          v113 = [v216 addAttributedString:v98 withLanguage:keyboardLanguageHint];
          if (v102 == 1)
          {
            v114 = 1;
          }

          else
          {
            v114 = v101;
          }

          if (v103 != 0x7FFFFFFFFFFFFFFFLL && v114)
          {
            v109 = +[NSMutableIndexSet indexSet];
            v110 = v109;
            v111 = v103;
            v112 = v102;
            goto LABEL_175;
          }

          goto LABEL_176;
        }
      }
    }

    else
    {
      v102 = 0;
      v103 = 0x7FFFFFFFFFFFFFFFLL;
      v101 = v191;
      if (!v191)
      {
        goto LABEL_169;
      }
    }

    v103 = [v98 length] - 2;
    v102 = 2;
    goto LABEL_169;
  }

  v98 = [(__CFString *)outputActions2 copy];
  if (v51 && (+[AXSettings sharedInstance](AXSettings, "sharedInstance"), v104 = objc_claimAutoreleasedReturnValue(), v105 = [v104 voiceOverDeletionFeedback], v104, !v105))
  {
    v179 = sub_1000516CC(off_1001FDDD0, @"delete.text.prefix", 0, keyboardLanguageHint);
    v107 = [v179 rangeOfString:@"%@"];
    v106 = [v98 length];
    v186 = v98;
    v180 = AXCFormattedString();

    v98 = v180;
    v53 = selfCopy;
  }

  else
  {
    v106 = 0;
    v107 = 0x7FFFFFFFFFFFFFFFLL;
  }

  v108 = [v216 addString:v98 withLanguage:{keyboardLanguageHint, v186}];
  if (v107 != 0x7FFFFFFFFFFFFFFFLL && v106 == 1)
  {
    v109 = +[NSMutableIndexSet indexSet];
    v110 = v109;
    v111 = v107;
    v112 = 1;
LABEL_175:
    [v109 addIndexesInRange:{v111, v112}];
    v115 = v192;
    v116 = v216;
    outputActions5 = [v216 outputActions];
    lastObject5 = [outputActions5 lastObject];
    [lastObject5 setObject:v110 forVariant:29];

    v53 = selfCopy;
    goto LABEL_177;
  }

LABEL_176:
  v116 = v216;
  v115 = v192;
LABEL_177:

  outputActions6 = [v116 outputActions];
  lastObject6 = [outputActions6 lastObject];
  [lastObject6 setObject:&__kCFBooleanTrue forVariant:57];

  v54 = v116;
  if (v51)
  {
    v121 = +[AXSettings sharedInstance];
    voiceOverDeletionFeedback2 = [v121 voiceOverDeletionFeedback];

    if (voiceOverDeletionFeedback2 == 2)
    {
      outputActions7 = [v116 outputActions];
      [outputActions7 enumerateObjectsUsingBlock:&stru_1001CA118];
    }

    if ([(__CFString *)outputActions2 length]== 1)
    {
      v124 = +[AXLanguageManager sharedInstance];
      keyboardLanguageHint4 = [v116 keyboardLanguageHint];
      v126 = [v124 descriptionOfWord:outputActions2 forLanguage:keyboardLanguageHint4];

      v54 = v216;
      if ([v126 length])
      {
        v127 = [AXAttributedString axAttributedStringWithString:v126];
        keyboardLanguageHint5 = [v216 keyboardLanguageHint];
        [v127 setAttribute:keyboardLanguageHint5 forKey:UIAccessibilityTokenLanguage];

        v54 = v216;
        v129 = [v216 addString:v126];
      }
    }
  }

  if (![(__CFString *)outputActions2 length])
  {
    lastAction = [v54 lastAction];
    [lastAction setObject:kCFBooleanTrue forVariant:28];
  }

  typingPitchChangeEnabled2 = [VOTSharedWorkspace typingPitchChangeEnabled];
  if ((v51 | v115) == 1 && typingPitchChangeEnabled2)
  {
    if (v51)
    {
      v132 = +[AXSettings sharedInstance];
      voiceOverDeletionFeedback3 = [v132 voiceOverDeletionFeedback];

      if (voiceOverDeletionFeedback3 == 1)
      {
        v134 = 0.75;
      }

      else
      {
        v134 = 1.0;
      }
    }

    else if (v115)
    {
      v134 = 1.5;
    }

    else
    {
      v134 = 1.0;
    }

    v219 = 0u;
    v220 = 0u;
    v217 = 0u;
    v218 = 0u;
    outputActions8 = [v54 outputActions];
    v136 = [outputActions8 countByEnumeratingWithState:&v217 objects:v231 count:16];
    if (v136)
    {
      v138 = v136;
      v139 = *v218;
      do
      {
        for (i = 0; i != v138; i = i + 1)
        {
          if (*v218 != v139)
          {
            objc_enumerationMutation(outputActions8);
          }

          v141 = *(*(&v217 + 1) + 8 * i);
          *&v137 = v134;
          v142 = [NSNumber numberWithFloat:v137];
          [v141 setObject:v142 forVariant:32];
        }

        v138 = [outputActions8 countByEnumeratingWithState:&v217 objects:v231 count:16];
      }

      while (v138);
    }

    v55 = v203;
    v53 = selfCopy;
    v54 = v216;
  }

  if (!v210)
  {
LABEL_208:
    v151 = 0;
    v145 = v196;
    goto LABEL_209;
  }

  v143 = +[UIKeyboardPreferencesController sharedPreferencesController];
  v144 = [v143 BOOLForKey:10];

  v145 = v196;
  if (v144)
  {
    v146 = sub_1000511CC(off_1001FDDD0, @"misspelled", 0);
    v147 = [v54 addString:v146];

    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      lastAction2 = [v54 lastAction];
      LODWORD(v149) = 1062836634;
      v150 = [NSNumber numberWithFloat:v149];
      [lastAction2 setObject:v150 forVariant:32];
    }

    v151 = 1;
  }

  else
  {
    v151 = 0;
  }

LABEL_209:
  if ([v54 containsActions] && (objc_msgSend(v55, "isEqualToString:", kAXValueChangeTypeDictation) & 1) == 0)
  {
    if ([v201 hasPrefix:@"zh"])
    {
      if (AXUIKeyboardIsOOP())
      {
        v152 = +[VOTElement inputUIApplication];
        uiElement = [v152 uiElement];
        [uiElement updateCache:3004];

        v154 = +[VOTElement inputUIApplication];
        typingCandidateElements = [v154 typingCandidateElements];
      }

      else
      {
        uiElement2 = [v145 uiElement];
        [uiElement2 updateCache:3004];

        typingCandidateElements = [v145 typingCandidateElements];
      }

      firstObject = [typingCandidateElements firstObject];
      label = [firstObject label];

      if ([label length])
      {
        LODWORD(v159) = 1061158912;
        [v216 addPause:v159];
        v160 = [v216 addString:label withLanguage:v201];
      }
    }

    v161 = +[VOTBrailleManager manager];
    brailleElement = [v161 brailleElement];
    v163 = [v52 isEqual:brailleElement];

    v54 = v216;
    if (originationCopy != 1 && (v163 & 1) == 0)
    {
      [v216 setGeneratesBraille:1];
    }

    v164 = +[AXSettings sharedInstance];
    voiceOverTouchBrailleDisplayInputMode = [v164 voiceOverTouchBrailleDisplayInputMode];

    if (voiceOverTouchBrailleDisplayInputMode == 2)
    {
      v166 = 1;
    }

    else
    {
      v166 = v151;
    }

    if (voiceOverTouchBrailleDisplayInputMode == 2)
    {
      v167 = 4;
    }

    else
    {
      v167 = 2;
    }

    if ((v166 & 1) == 0)
    {
      outputActions9 = [v216 outputActions];
      firstObject2 = [outputActions9 firstObject];
      string = [firstObject2 string];
      v171 = [string length];

      v54 = v216;
      if (v171 <= 1)
      {
        v167 = 4;
      }

      else
      {
        v167 = 2;
      }
    }

    v55 = v203;
    [v54 setBrailleType:v167];
    if (v190)
    {
      outputActions10 = [v54 outputActions];
      [outputActions10 enumerateObjectsUsingBlock:&stru_1001CA138];
    }

    if (!quiet)
    {
      [(VOTElementManager *)v53 sendRequest:v54];
    }
  }

  v173 = VOTSharedWorkspace;
  _currentRotorSelection = [(VOTElementManager *)v53 _currentRotorSelection];
  [v173 refreshBraille:1 rotorSelection:_currentRotorSelection];

  v53->_highlightedCharacterRange = xmmword_10017E110;
  [(VOTElementManager *)v53 _elementSelectionRangeDidChange:selectedTextRange reason:v214, 2];
  v53->_elementSelectionRangeBufferForValueChange = v53->_elementSelectionRangeBufferInternal;
}

- (void)_processSilentValueChange
{
  [(VOTElement *)self->_firstResponderElement updateValue];
  elementTypingBuffer = self->_elementTypingBuffer;
  value = [(VOTElement *)self->_firstResponderElement value];
  v5 = value;
  if (value)
  {
    v6 = value;
  }

  else
  {
    v6 = &stru_1001CBF90;
  }

  [(NSMutableString *)elementTypingBuffer setString:v6];

  [(VOTElementManager *)self _reupdateTextSelectionInformation];
  v7 = VOTSharedWorkspace;
  _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
  [v7 refreshBraille:1 rotorSelection:_currentRotorSelection];
}

- (void)_handleElementMoved:(__AXUIElement *)moved
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  v5 = [AXUIElement uiElementWithAXElement:moved];
  v6 = [VOTElement elementWithUIElement:v5];

  if ([_currentElement isEqual:v6])
  {
    x = CGRectZero.origin.x;
    y = CGRectZero.origin.y;
    width = CGRectZero.size.width;
    height = CGRectZero.size.height;
    location = self->_highlightedCharacterRange.location;
    if (location == 0x7FFFFFFF)
    {
      v12 = 0;
      v13 = _currentElement;
    }

    else
    {
      [_currentElement boundsForRange:{location, self->_highlightedCharacterRange.length}];
      v14 = v26.origin.x;
      v15 = v26.origin.y;
      v16 = v26.size.width;
      v17 = v26.size.height;
      v27.origin.x = CGRectZero.origin.x;
      v27.origin.y = y;
      v27.size.width = width;
      v27.size.height = height;
      v18 = !CGRectEqualToRect(v26, v27);
      v13 = _currentElement;
      if (v18)
      {
        height = v17;
      }

      v12 = v18;
      if (v18)
      {
        width = v16;
      }

      if (v18)
      {
        y = v15;
      }

      if (v18)
      {
        x = v14;
      }
    }

    [v13 updateFrame];
    [_currentElement updateCenterPoint];
    if ((v12 & 1) == 0)
    {
      [_currentElement frame];
      x = v19;
      y = v20;
      width = v21;
      height = v22;
    }

    v23 = +[VOTDisplayManager displayManager];
    [v23 setCursorFrame:{x, y, width, height}];
  }
}

- (void)_handleKeyboardKeySelectedNotification:(id)notification
{
  notificationCopy = notification;
  v20 = notificationCopy;
  if (!notificationCopy || (objc_opt_class(), isKindOfClass = objc_opt_isKindOfClass(), notificationCopy = v20, (isKindOfClass & 1) != 0))
  {
    v6 = [notificationCopy isAXAttributedString] ? objc_msgSend(v20, "hasAttribute:", UIAccessibilityTableIndexToken) : 0;
    if ([VOTSharedWorkspace typingMode] != 2 || v6 != 0)
    {
      if (v20)
      {
        v8 = [objc_allocWithZone(VOTOutputRequest) init];
        v9 = +[AXSettings sharedInstance];
        voiceOverPhoneticsFeedback = [v9 voiceOverPhoneticsFeedback];

        if (voiceOverPhoneticsFeedback == 2)
        {
          v11 = [(VOTElementManager *)self _phoneticStringForLetter:v20 language:0];
          v12 = v11;
          if (v11)
          {
            v13 = v11;

            v20 = v13;
          }
        }

        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          v14 = [v8 addAttributedString:v20];
        }

        else
        {
          v17 = [v8 addString:v20];
        }

        v18 = sub_1000511CC(off_1001FDDD0, @"element.selected.text", 0);
        v19 = [v8 addString:v18];

        [v8 setGeneratesBraille:1];
        [v8 setBrailleType:2];
        [(VOTElementManager *)self sendRequest:v8];
      }

      else
      {
        v15 = +[VOTOutputManager outputManager];
        [v15 stopSpeakingAtBoundary:0];

        v8 = +[VOTOutputManager outputManager];
        v16 = +[VOSOutputEvent BoundaryEncountered];
        [v8 sendEvent:v16];
      }
    }
  }

  _objc_release_x1();
}

- (void)_appSuspensionSoundTimer
{
  if (*&qword_1001FECF0 != 0.0)
  {
    v3 = +[VOTOutputManager outputManager];
    v4 = +[VOSOutputEvent ItemIsLoading];
    [v3 sendEvent:v4];

    appSuspensionSoundTimer = self->_appSuspensionSoundTimer;
    v6 = *&qword_1001FECF0;

    [(SCRCTargetSelectorTimer *)appSuspensionSoundTimer dispatchAfterDelay:v6];
  }
}

- (void)_handleAppSuspendAnimationProgressNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    [notificationCopy floatValue];
    if (v4 == -1.0)
    {
      v5 = *&qword_1001FECF0;
      if (*&qword_1001FECF0 > 0.0)
      {
        qword_1001FECF0 = 0;
        [(VOTElementManager *)self _handleScreenChange:0 sound:0, v5];
      }
    }

    else
    {
      v6 = v4;
      if (v6 > 1.0)
      {
        v6 = 1.0;
      }

      *&qword_1001FECF0 = (1.0 - fmax(v6, 0.0)) * 0.5 + 0.01;
      if (([(SCRCTargetSelectorTimer *)self->_appSuspensionSoundTimer isCancelled]& 1) != 0 || ([(SCRCTargetSelectorTimer *)self->_appSuspensionSoundTimer isPending]& 1) == 0)
      {
        [(VOTElementManager *)self _appSuspensionSoundTimer];
      }
    }
  }
}

- (void)__handleExpandedStatusChanged
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  expandedStatus = [_currentElement expandedStatus];
  [_currentElement updateExpandedStatus];
  expandedStatus2 = [_currentElement expandedStatus];
  if ([_currentElement doesHaveTraits:kAXWebContentTrait] && (objc_msgSend(_currentElement, "isAlive") & 1) == 0 && objc_msgSend(_currentElement, "isValid"))
  {
    v6 = +[VOTElement systemWideElement];
    [_currentElement centerPoint];
    [v6 convertPoint:objc_msgSend(_currentElement fromContextId:{"windowContextId"), v7, v8}];
    v10 = v9;
    v12 = v11;

    v13 = [[VOTElement alloc] initWithPosition:v10, v12];
    v20[0] = _NSConcreteStackBlock;
    v20[1] = 3221225472;
    v20[2] = sub_1000A1C1C;
    v20[3] = &unk_1001C8E40;
    v21 = _currentElement;
    v14 = [(VOTElementManager *)self _nearestElementWithMatch:v20 startElement:v13];
    v15 = v14;
    if (v14)
    {
      expandedStatus2 = [v14 expandedStatus];
      [(VOTElementManager *)self _setCurrentElement:v15];
    }
  }

  if (expandedStatus != expandedStatus2)
  {
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    if (expandedStatus2 == 1)
    {
      v17 = @"expanded";
    }

    else
    {
      v17 = @"collapsed";
    }

    v18 = sub_1000516CC(off_1001FDDD0, v17, 0, selectedLanguage);
    v19 = sub_1000095FC(v18, 1, selectedLanguage);
  }
}

- (void)_handleCurrentStateChanged:(id)changed
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  uiElement = [_currentElement uiElement];
  [uiElement updateCache:2116];
}

- (void)_handleSortDirectionChanged:(id)changed
{
  _currentElement = [(VOTElementManager *)self _currentElement];
  uiElement = [_currentElement uiElement];
  [uiElement updateCache:2152];
}

- (void)_handleInvalidStatusChanged:(id)changed
{
  changedCopy = changed;
  if (changedCopy)
  {
    v8 = changedCopy;
    v4 = CFGetTypeID(changedCopy);
    v5 = v4 == AXUIElementGetTypeID();
    changedCopy = v8;
    if (v5)
    {
      v6 = [objc_allocWithZone(VOTElement) initWithAXElement:v8];
      v7 = +[VOTOutputRequest createRequest];
      [v6 applyInvalidStatusToRequest:v7];
      [v7 setDoesNotInterrupt:1];
      [v7 send];

      changedCopy = v8;
    }
  }
}

- (void)_handleInvalidTextInputNotification:(id)notification
{
  v4 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent BoundaryEncountered];
  [v4 sendEvent:v3];
}

- (void)_reupdateTextSelectionInformation
{
  selectedTextRange = [(VOTElement *)self->_firstResponderElement selectedTextRange];

  [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v3, 0];
}

- (void)_handleAnnouncementNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v4 = [notificationCopy objectForKeyedSubscript:kAXPidKey];
    intValue = [v4 intValue];

    v6 = [notificationCopy objectForKeyedSubscript:kAXNotificationDataKey];
    if (!v6)
    {
      v6 = [notificationCopy objectForKeyedSubscript:kAXAnnouncementUserInfoKeyAnnouncement];
      if (!v6)
      {
        v6 = notificationCopy;
      }
    }

    v7 = v6;
    [(VOTElementManager *)self _handleAnnouncementWithData:v6 pid:intValue];
  }
}

- (void)_handleFireStewie
{
  stewieRangeTimer = self->_stewieRangeTimer;
  stewieRepeatDuration = self->_stewieRepeatDuration;
  v4[0] = _NSConcreteStackBlock;
  v4[1] = 3221225472;
  v4[2] = sub_1000A210C;
  v4[3] = &unk_1001C76E8;
  v4[4] = self;
  [(AXDispatchTimer *)stewieRangeTimer afterDelay:v4 processBlock:stewieRepeatDuration];
}

- (void)_handleStewieAnnouncementInRange:(BOOL)range heading:(double)heading
{
  rangeCopy = range;
  Current = CFAbsoluteTimeGetCurrent();
  stewieRangeTimer = self->_stewieRangeTimer;
  if (Current - *&qword_1001FECF8 <= 10.0)
  {
    if (!stewieRangeTimer)
    {
      v10 = [[AXDispatchTimer alloc] init];
      v11 = self->_stewieRangeTimer;
      self->_stewieRangeTimer = v10;

      [(VOTElementManager *)self _handleFireStewie];
    }

    self->_stewieRepeatDuration = fabs(heading) / 180.0 * 1.3 + 0.2;
    if (byte_1001FED00 != rangeCopy && rangeCopy)
    {
      v12 = +[VOTOutputManager outputManager];
      [v12 playSoundFast:@"Sounds/Reorder.aiff"];
    }

    byte_1001FED00 = rangeCopy;
  }

  else
  {
    [(AXDispatchTimer *)stewieRangeTimer cancel];
    v9 = self->_stewieRangeTimer;
    self->_stewieRangeTimer = 0;
  }

  qword_1001FECF8 = CFAbsoluteTimeGetCurrent();
}

- (void)_handleAnnouncementWithData:(id)data pid:(int)pid
{
  v4 = *&pid;
  dataCopy = data;
  dataCopy2 = data;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v8 = dataCopy2;
  if (!v8 || (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0) && ![v8 length])
  {
    v24 = VOTLogSpeech();
    if (os_log_type_enabled(v24, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v24, OS_LOG_TYPE_INFO, "Stopping speaking because we got zero length announcement", buf, 2u);
    }

    v14 = +[VOTOutputManager outputManager];
    [v14 stopSpeakingAtBoundary:0];
    goto LABEL_28;
  }

  if (v4)
  {
    v9 = +[AXSettings sharedInstance];
    liveRegionStatusEverSet = [v9 liveRegionStatusEverSet];

    if (liveRegionStatusEverSet)
    {
      selfCopy = self;
      v12 = dataCopy;
      v13 = v4;
      v14 = [[VOTElement alloc] initApplicationWithPid:v4];
      bundleIdentifier = [v14 bundleIdentifier];
      firstWebElement = [v14 firstWebElement];
      webAreaURL = [firstWebElement webAreaURL];

      v18 = +[AXSettings sharedInstance];
      v19 = [v18 liveRegionStatusForWebOrApp:bundleIdentifier];

      if (!v19 && webAreaURL)
      {
        v20 = +[AXSettings sharedInstance];
        host = [webAreaURL host];
        v19 = [v20 liveRegionStatusForWebOrApp:host];
      }

      if (v19 && ([v19 BOOLValue] & 1) == 0)
      {
        v28 = VOTLogCommon();
        if (os_log_type_enabled(v28, OS_LOG_TYPE_DEFAULT))
        {
          *buf = 138478083;
          v164 = bundleIdentifier;
          v165 = 2113;
          v166 = webAreaURL;
          _os_log_impl(&_mh_execute_header, v28, OS_LOG_TYPE_DEFAULT, "Skipping live region updates for %{private}@ %{private}@", buf, 0x16u);
        }

        goto LABEL_27;
      }

      LODWORD(v4) = v13;
      dataCopy = v12;
      self = selfCopy;
    }
  }

  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v14 = v8;
    bundleIdentifier = [v14 objectForKeyedSubscript:@"key"];
    if (([bundleIdentifier isEqualToString:@"STEWIE_TARGET_IN_RANGE"] & 1) != 0 || objc_msgSend(bundleIdentifier, "isEqualToString:", @"STEWIE_TARGET_OUT_OF_RANGE"))
    {
      v22 = [bundleIdentifier isEqualToString:@"STEWIE_TARGET_IN_RANGE"];
      v23 = [v14 objectForKeyedSubscript:@"heading"];
      [v23 doubleValue];
      [(VOTElementManager *)self _handleStewieAnnouncementInRange:v22 heading:?];

LABEL_27:
      goto LABEL_28;
    }

    buf[0] = 0;
    v25 = [v14 objectForKeyedSubscript:@"AX_VOICEOVER_DISABLE_SCREEN_CURTAIN"];
    v26 = __UIAccessibilitySafeClass();

    v27 = v26;
    LODWORD(v25) = [v27 BOOLValue];

    if (v25)
    {
      v157 = _NSConcreteStackBlock;
      v158 = 3221225472;
      v159 = sub_1000A3CC0;
      v160 = &unk_1001C76E8;
      selfCopy2 = self;
      AXPerformBlockOnMainThreadAfterDelay();
      goto LABEL_27;
    }
  }

  v29 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging = [v29 ignoreLogging];

  if ((ignoreLogging & 1) == 0)
  {
    v31 = +[AXSubsystemVoiceOver identifier];
    v32 = AXLoggerForFacility();

    v33 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v32, v33))
    {
      selfCopy3 = self;
      v35 = dataCopy;
      v36 = v4;
      v37 = AXColorizeFormatLog();
      v140 = v8;
      v38 = _AXStringForArgs();
      v4 = v32;
      if (os_log_type_enabled(v4, v33))
      {
        *buf = 138543362;
        v164 = v38;
        _os_log_impl(&_mh_execute_header, v4, v33, "%{public}@", buf, 0xCu);
      }

      LODWORD(v4) = v36;
      dataCopy = v35;
      self = selfCopy3;
    }
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v46 = +[AXSubsystemVoiceOver sharedInstance];
    ignoreLogging2 = [v46 ignoreLogging];

    if (ignoreLogging2)
    {
      goto LABEL_29;
    }

    v48 = +[AXSubsystemVoiceOver identifier];
    v14 = AXLoggerForFacility();

    v49 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v14, v49))
    {
      v50 = AXColorizeFormatLog();
      v51 = _AXStringForArgs();
      if (os_log_type_enabled(v14, v49))
      {
        *buf = 138543362;
        v164 = v51;
        _os_log_impl(&_mh_execute_header, v14, v49, "%{public}@", buf, 0xCu);
      }
    }

    goto LABEL_28;
  }

  Current = CFAbsoluteTimeGetCurrent();
  self->_lastAnnouncementNotificationTime = Current;
  if ([(VOTElementManager *)self _shouldSuppressSpeechForPlayPause])
  {
    goto LABEL_29;
  }

  if ([v8 isAXAttributedString])
  {
    v40 = [v8 attributeValueForKey:UIAccessibilityTokenPassthroughOnlyReordering];
    bOOLValue = [v40 BOOLValue];

    if (bOOLValue)
    {
      if (([(AXDragManager *)self->_dragManager isDragActive]& 1) != 0)
      {
        goto LABEL_29;
      }

      v42 = +[VOTOutputManager outputManager];
      v43 = +[VOSOutputEvent DidReorderItem];
      [v42 sendEvent:v43];
    }
  }

  if ([v8 isEqualToString:{kAXAnnouncementTypeReorderSound, v140}])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent DidReorderItem];
LABEL_54:
    v52 = v45;
    [v44 sendEvent:v45];

LABEL_55:
    v14 = 0;
    v145 = 0;
    v142 = 0;
    v147 = 0;
LABEL_56:
    v53 = 0;
    goto LABEL_57;
  }

  if ([v8 isEqualToString:kAXAnnouncementCollaborationOccurredSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent CollaborationOccurred];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeScrollSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent DidScrollByPage];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeFolderOpeningSound])
  {
    v91 = +[VOTOutputManager outputManager];
    v92 = +[VOSOutputEvent FolderWillOpen];
LABEL_139:
    v95 = v92;
    [v91 sendEvent:v92];

    v14 = 0;
    v145 = 0;
    v142 = 0;
    v147 = 0;
    v53 = 0;
    self->_lastFolderOperationTime = Current;
    goto LABEL_57;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeFolderOpenedSound])
  {
    v91 = +[VOTOutputManager outputManager];
    v92 = +[VOSOutputEvent FolderDidOpen];
    goto LABEL_139;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeFolderClosedSound])
  {
    v91 = +[VOTOutputManager outputManager];
    v92 = +[VOSOutputEvent FolderDidClose];
    goto LABEL_139;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeKeyboardAppearSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent KeyboardAppeared];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeKeyboardDisappearSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent KeyboardDisappeared];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementAppSwitchBorderSound])
  {
    v44 = +[VOTOutputManager outputManager];
    [v44 playSoundFast:@"Sounds/AppSwitchBorder.aiff"];
    goto LABEL_55;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeStopSpeech])
  {
    v44 = +[VOTOutputManager outputManager];
    [v44 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:&off_1001D9FE0];
    goto LABEL_55;
  }

  v96 = v4;
  if ([v8 isEqualToString:kAXAnnouncementWebPageLoadingSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent ItemIsLoading];
LABEL_150:
    v99 = v98;
    [v97 sendEvent:v98];

LABEL_154:
    v14 = 0;
LABEL_155:
    v145 = 0;
    v142 = 0;
    v147 = 0;
    goto LABEL_56;
  }

  if ([v8 isEqualToString:kAXAnnouncementStackShotSound])
  {
    v100 = +[VOTOutputManager outputManager];
    v97 = v100;
    v101 = @"Sounds/StackShot.aiff";
LABEL_153:
    [v100 playSoundFast:v101];
    goto LABEL_154;
  }

  if ([v8 isEqualToString:kAXAnnouncementBorderHitSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent BoundaryEncountered];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementEnteredValidStateSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidEnterTargetArea];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementExitedValidStateSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidLeaveTargetArea];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeLockScreenTouchIDAuthenticationSuccessSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TouchIDAuthenticated];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeLockScreenAuthenticationFailureSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TouchIDFailed];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypePassthroughSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidBeginPassthrough];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeProgressMadeSound] || objc_msgSend(v8, "isEqualToString:", kAXAnnouncementTypeSuccessSound))
  {
    v100 = +[VOTOutputManager outputManager];
    v97 = v100;
    v101 = @"Sounds/Reorder.aiff";
    goto LABEL_153;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeDockShowSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DockDidAppear];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeDockHideSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DockDidDisappear];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeTutorialSuccess])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TutorialSuccess];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeTutorialMagicTapStart])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TutorialMagicTapStart];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeTutorialMagicTapStop])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TutorialMagicTapStop];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeDidActivateElementSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidActivateElement];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeNoItemExistsSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent NoItemExists];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeWindowingUnstashedSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent ReachabilityDidBegin];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeWindowingStashedSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent ReachabilityDidEnd];
    goto LABEL_150;
  }

  if (![v8 isAXAttributedString])
  {
    v14 = +[VOTOutputRequest createRequest];
    v109 = [v14 addString:v8];
    goto LABEL_155;
  }

  v4 = v8;
  v102 = [v4 attributesAtIndex:0 effectiveRange:0];
  v103 = [v102 objectForKey:UIAccessibilityTokenAssistantString];
  HIDWORD(v145) = [v103 BOOLValue];

  v152 = v102;
  v104 = [v102 objectForKey:UIAccessibilityTokenAnnouncementPriority];

  if (v104)
  {
    v105 = [v102 objectForKey:UIAccessibilityTokenAnnouncementPriority];
    intValue = [v105 intValue];
LABEL_192:
    v150 = intValue;

    goto LABEL_193;
  }

  v137 = AXUIAccessibilitySpeechAttributeAnnouncementPriority;
  v138 = [v102 objectForKey:AXUIAccessibilitySpeechAttributeAnnouncementPriority];

  if (v138)
  {
    v105 = [v152 objectForKey:v137];
    if ([v105 isEqualToString:AXUIAccessibilityAnnouncementPriorityLow])
    {
      intValue = 10;
    }

    else
    {
      v139 = [v105 isEqualToString:AXUIAccessibilityAnnouncementPriorityHigh];
      intValue = 5;
      if (v139)
      {
        intValue = 1;
      }
    }

    goto LABEL_192;
  }

  v150 = 5;
LABEL_193:
  v107 = [v152 objectForKey:UIAccessibilityTokenPassthroughOnlyPasteboardOp];
  HIDWORD(v142) = [v107 BOOLValue];

  if (v150 < 10)
  {
    BYTE4(v147) = 0;
  }

  else
  {
    v108 = +[VOTOutputManager outputManager];
    HIDWORD(v147) = [v108 isSpeaking] & (HIDWORD(v145) ^ 1);
  }

  v110 = [v152 objectForKey:UIAccessibilityTokenRequiresEditingStyleResolution];

  if (v110)
  {
    v111 = [(VOTElementManager *)self _handleEditingStyleResolutionForAnnouncement:v4];

    v4 = v111;
  }

  v112 = [v152 objectForKey:UIAccessibilityTokenHint];
  if ([v112 BOOLValue])
  {
    hintsEnabled = [VOTSharedWorkspace hintsEnabled];

    if ((hintsEnabled & 1) == 0)
    {
      goto LABEL_222;
    }
  }

  else
  {
  }

  v114 = [v152 objectForKey:UIAccessibilityTokenTextDeletion];
  if ([v114 BOOLValue])
  {
    typingPitchChangeEnabled = [VOTSharedWorkspace typingPitchChangeEnabled];

    if (!typingPitchChangeEnabled)
    {
      goto LABEL_207;
    }

    v114 = [NSMutableDictionary dictionaryWithDictionary:v152];
    [v114 setObject:kCFBooleanTrue forKey:UIAccessibilityTokenLowPitch];
    [v4 setAttributes:v114];
  }

LABEL_207:
  v116 = [v152 objectForKey:UIAccessibilityTokenLiveRegionAnnouncement];
  bOOLValue2 = [v116 BOOLValue];

  if (bOOLValue2)
  {
    self->_lastLiveRegionUpdate = Current;
  }

  v118 = [v152 objectForKey:UIAccessibilityTokenDictationAnnouncement];
  bOOLValue3 = [v118 BOOLValue];

  if (bOOLValue3)
  {
    [(VOTElementManager *)self _processSilentValueChange];
  }

  v120 = [v152 objectForKey:UIAccessibilityTokenTextOperationRelated];
  bOOLValue4 = [v120 BOOLValue];

  if (bOOLValue4)
  {
    [(VOTElementManager *)self _reupdateTextSelectionInformation];
  }

  v122 = [v152 objectForKey:UIAccessibilityTokenBrailleDisplayOnly];
  LOBYTE(v147) = [v122 BOOLValue];

  v123 = [v152 objectForKey:UIAccessibilityTokenSystemNotificationAlert];
  bOOLValue5 = [v123 BOOLValue];

  v125 = [v152 objectForKey:UIAccessibilityTokenAnnounceEvenIfSystemSleeping];
  LODWORD(v145) = [v125 BOOLValue];

  v126 = [v152 objectForKey:UIAccessibilityTokenTextInsertion];
  bOOLValue6 = [v126 BOOLValue];

  if (bOOLValue6)
  {
    v128 = +[NSCharacterSet wordBreakCharacterSet];
    v129 = [v4 rangeOfCharacterFromSet:v128];

    if (v129 == 0x7FFFFFFFFFFFFFFFLL && ([(VOTElementManager *)self typingFeedbackForKeyboardType]& 0xFFFFFFFFFFFFFFFDLL) == 1)
    {
      goto LABEL_222;
    }

    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      v130 = [NSMutableDictionary dictionaryWithDictionary:v152];
      [v130 setObject:kCFBooleanTrue forKey:UIAccessibilityTokenHighPitch];
      [v4 setAttributes:v130];
    }

    BYTE4(v147) |= CFAbsoluteTimeGetCurrent() - self->_lastTextInsertionAnnouncementTime < 0.25;
    self->_lastTextInsertionAnnouncementTime = Current;
  }

  v131 = [v152 objectForKey:UIAccessibilityTokenSystemAnnouncement];
  if ([v131 BOOLValue] && -[VOTElementManager isReadingAll](self, "isReadingAll"))
  {
    v132 = +[VOTOutputManager outputManager];
    isPaused = [v132 isPaused];

    if (!isPaused)
    {
LABEL_222:

      v14 = 0;
      goto LABEL_28;
    }
  }

  else
  {
  }

  v14 = [objc_allocWithZone(VOTOutputRequest) init];
  v134 = [v14 addAttributedString:v4];
  if ([v4 hasAttribute:UIAccessibilityTokenVeryPoliteAnnouncement])
  {
    v135 = +[VOTOutputManager outputManager];
    isSpeaking = [v135 isSpeaking];

    if (!(bOOLValue2 & 1 | ((isSpeaking & 1) == 0)))
    {

      v14 = 0;
    }

    BYTE4(v147) = 1;
  }

  if (([v4 hasAttribute:UIAccessibilityTokenPoliteAnnouncement]& 1) != 0 || ([v4 hasAttribute:AXUIAccessibilitySpeechAttributeQueueAnnouncement]& 1) != 0)
  {
    BYTE4(v147) = 1;
  }

  else if (v150 == 1)
  {
    [v14 setCannotBeInterrupted:1];
  }

  LOBYTE(v142) = [v4 hasAttribute:UIAccessibilityTokenSuppressBrailleOutput];

  LODWORD(v4) = v96;
  v53 = bOOLValue5;
LABEL_57:
  v143 = v4;
  useRingerSwitchForNotificationOutput = [VOTSharedWorkspace useRingerSwitchForNotificationOutput];
  bannerNotificationsOutput = [VOTSharedWorkspace bannerNotificationsOutput];
  bannerNotificationsOutput2 = [VOTSharedWorkspace bannerNotificationsOutput];
  bannerNotificationsOutput3 = [VOTSharedWorkspace bannerNotificationsOutput];
  v55 = +[VOTWorkspace sharedWorkspace];
  if ([v55 currentCallState])
  {
    v56 = +[VOTWorkspace sharedWorkspace];
    v57 = [v56 currentCallState] == 2;
  }

  else
  {
    v57 = 1;
  }

  v58 = +[VOTElement springBoardApplication];
  isSystemSleeping = [v58 isSystemSleeping];

  v59 = +[VOTElement springBoardApplication];
  isSystemLocked = [v59 isSystemLocked];

  v61 = +[VOTElement springBoardApplication];
  v149 = v53;
  v62 = v53 ^ 1;
  isAlarmRinging = 1;
  if (![v61 isVoiceControlRunning] && ((v57 | v62) & 1) != 0 && (objc_msgSend(VOTSharedWorkspace, "tapAndHoldMode") & v149 & 1) == 0 && ((v149 & useRingerSwitchForNotificationOutput) != 1 || (objc_msgSend(VOTSharedWorkspace, "isRingerSwitchSilent") & 1) == 0))
  {
    if (v145 & 1 | ((v149 & isSystemSleeping & 1) == 0))
    {
      v64 = (bannerNotificationsOutput & 2) != 0 ? 0 : v149;
      isAlarmRinging = (bannerNotificationsOutput3 & 0x10) != 0 ? 0 : v64;
      if ((isAlarmRinging & 1) == 0 && ((isSystemLocked ^ 1) & 1) == 0)
      {
        v65 = +[VOTElement systemAppApplication];
        isAlarmRinging = [v65 isAlarmRinging];
      }
    }
  }

  if ((bannerNotificationsOutput3 & 0x10) != 0)
  {
    v66 = v62;
  }

  else
  {
    v66 = 1;
  }

  if ((bannerNotificationsOutput3 & 0x10) != 0)
  {
    v67 = 0;
  }

  else
  {
    v67 = v149;
  }

  if (v66)
  {
    v68 = v147;
  }

  else
  {
    v68 = ((bannerNotificationsOutput & 2) == 0) | v147;
  }

  v148 = v68;
  if (v149)
  {
    v69 = ((bannerNotificationsOutput & 2) >> 1) | BYTE4(v147);
  }

  else
  {
    v69 = BYTE4(v147);
  }

  if ((v149 & ((bannerNotificationsOutput2 & 0x40) != 0)) == 1)
  {
    v70 = +[VOTOutputManager outputManager];
    v71 = +[VOSOutputEvent NotificationDidAppear];
    [v70 sendEvent:v71];
  }

  [v14 setOriginationType:1];
  if ((bannerNotificationsOutput & 2) != 0)
  {
    v72 = v62;
  }

  else
  {
    v72 = 1;
  }

  if (v72 == 1)
  {
    if (v69)
    {
      [v14 setDoesNotInterrupt:1];
      v73 = +[VOTOutputManager outputManager];
      isPaused2 = [v73 isPaused];

      if (!isPaused2)
      {
        goto LABEL_100;
      }
    }

    else
    {
      *&self->_flags.isReadingAll = 0;
    }

    v75 = VOTLogSpeech();
    if (os_log_type_enabled(v75, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v75, OS_LOG_TYPE_INFO, "Speech paused or not queued, so resetting read all", buf, 2u);
    }

    *&self->_flags.isReadingAll = 0;
  }

LABEL_100:
  if (v14)
  {
    if (!(BYTE4(v145) & 1 | ((isAlarmRinging & 1) == 0)))
    {
      v155 = 0u;
      v156 = 0u;
      v153 = 0u;
      v154 = 0u;
      v86 = self->_currentApplications;
      v87 = [(NSArray *)v86 countByEnumeratingWithState:&v153 objects:v162 count:16];
      if (v87)
      {
        v88 = v87;
        v89 = *v154;
        do
        {
          for (i = 0; i != v88; i = i + 1)
          {
            if (*v154 != v89)
            {
              objc_enumerationMutation(v86);
            }

            [*(*(&v153 + 1) + 8 * i) notifyAnnouncementFinishedWithString:v8 didFinishSuccessfully:0];
          }

          v88 = [(NSArray *)v86 countByEnumeratingWithState:&v153 objects:v162 count:16];
        }

        while (v88);
      }

      goto LABEL_28;
    }

    v76 = v67 | v142;
    if (self->_readAllOutputRequest)
    {
      v77 = +[VOTOutputManager outputManager];
      isPaused3 = [v77 isPaused];

      if ((isPaused3 & 1) == 0)
      {
        v79 = +[VOTOutputManager outputManager];
        [v79 holdCurrentRequest];

        LODWORD(v80) = 0.5;
        [v14 addPause:v80];
        outputActions = [v14 outputActions];
        v82 = [outputActions count];

        if (v82 >= 2)
        {
          outputActions2 = [v14 outputActions];
          [outputActions2 exchangeObjectAtIndex:1 withObjectAtIndex:0];
        }
      }
    }

    [v14 setGeneratesBraille:(v76 & 1) == 0];
    [v14 setBrailleType:2];
    [v14 setCompletionDelegate:self];
    if (v148)
    {
      [v14 setLimitToComponentType:3];
    }

    if (HIDWORD(v142))
    {
      outputActions3 = [v14 outputActions];
      [outputActions3 enumerateObjectsUsingBlock:&stru_1001CA158];
    }

    if (self->_announcementRequest)
    {
      [(VOTElementManager *)self _outputRequestFinished:?];
      [(VOTOutputRequest *)self->_announcementRequest setCompletionDelegate:0];
      announcementRequest = self->_announcementRequest;
      self->_announcementRequest = 0;
    }

    objc_storeStrong(&self->_announcementRequest, v14);
    self->_announcementPid = v143;
    objc_storeStrong(&self->_announcementOriginalString, dataCopy);
    if ((bannerNotificationsOutput & 2) == 0) | v62 & 1 || ((v145 ^ 1) & 1) != 0 || ((isSystemSleeping ^ 1))
    {
      if (v149)
      {
        [(VOTElementManager *)self _systemNotificationInProgressForRequest:v14];
        if (((bannerNotificationsOutput & 2) != 0) | BYTE4(v147) & 1)
        {
          [v14 setDoesNotInterrupt:1];
        }

        else
        {
          [v14 setInterruptsEverything:1];
        }

        v93 = +[VOTElement springBoardApplication];
        if ([v93 isSystemLocked])
        {
          isRingerSwitchSilent = [VOTSharedWorkspace isRingerSwitchSilent];

          if (isRingerSwitchSilent)
          {
            goto LABEL_28;
          }
        }

        else
        {
        }
      }

      [(VOTElementManager *)self sendRequest:v14];
      goto LABEL_28;
    }

    [(VOTElementManager *)self setDelayedNotificationAnnouncementRequest:v14];
    AXPerformBlockOnMainThreadAfterDelay();
  }

LABEL_28:

LABEL_29:
}

- (id)_handleEditingStyleResolutionForAnnouncement:(id)announcement
{
  firstResponderElement = self->_firstResponderElement;
  announcementCopy = announcement;
  resolvedEditingStyles = [(VOTElement *)firstResponderElement resolvedEditingStyles];
  coalescedAttributes = [announcementCopy coalescedAttributes];

  v7 = [coalescedAttributes objectForKey:UIAccessibilityTokenRequiresEditingStyleResolution];

  if ([v7 isEqualToString:UIAccessibilityTokenBold])
  {
    v8 = off_1001FDDD0;
    v9 = [resolvedEditingStyles objectForKeyedSubscript:UIAccessibilityTokenBold];
    bOOLValue = [v9 BOOLValue];
    v11 = @"bold.off";
    v12 = @"bold.on";
LABEL_7:
    if (bOOLValue)
    {
      v13 = v12;
    }

    else
    {
      v13 = v11;
    }

    v14 = sub_1000511CC(v8, v13, 0);
    goto LABEL_11;
  }

  if ([v7 isEqualToString:UIAccessibilityTokenUnderline])
  {
    v8 = off_1001FDDD0;
    v9 = [resolvedEditingStyles objectForKeyedSubscript:UIAccessibilityTokenUnderline];
    bOOLValue = [v9 BOOLValue];
    v11 = @"underline.off";
    v12 = @"underline.on";
    goto LABEL_7;
  }

  if ([v7 isEqualToString:UIAccessibilityTokenItalic])
  {
    v8 = off_1001FDDD0;
    v9 = [resolvedEditingStyles objectForKeyedSubscript:UIAccessibilityTokenItalic];
    bOOLValue = [v9 BOOLValue];
    v11 = @"italic.off";
    v12 = @"italic.on";
    goto LABEL_7;
  }

  if ([v7 isEqualToString:UIAccessibilityTokenFontSize])
  {
    v9 = sub_1000511CC(off_1001FDDD0, @"font.size", 0);
    v17 = [resolvedEditingStyles objectForKeyedSubscript:UIAccessibilityTokenFontSize];
    v14 = +[NSString localizedStringWithFormat:](NSString, "localizedStringWithFormat:", v9, [v17 intValue]);

LABEL_11:
    goto LABEL_12;
  }

  v14 = 0;
LABEL_12:
  v15 = [AXAttributedString axAttributedStringWithString:v14];

  return v15;
}

- (void)_systemNotificationInProgressForRequest:(id)request
{
  self->_systemNotificationInProgress = 1;
  v3[0] = _NSConcreteStackBlock;
  v3[1] = 3221225472;
  v3[2] = sub_1000A4088;
  v3[3] = &unk_1001C9EE8;
  v3[4] = self;
  [request setCompletionBlock:v3];
}

- (id)_retrieveDefaultElementForPosition:(CGPoint)position
{
  [VOTSharedWorkspace convertDevicePointToZoomedPoint:{position.x, position.y}];
  v4 = v3;
  v6 = v5;
  v7 = [objc_allocWithZone(VOTElement) initApplicationWithPosition:{v3, v5}];
  v8 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging = [v8 ignoreLogging];

  if ((ignoreLogging & 1) == 0)
  {
    v10 = +[AXSubsystemVoiceOver identifier];
    v11 = AXLoggerForFacility();

    v12 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v11, v12))
    {
      v13 = AXColorizeFormatLog();
      v29.x = v4;
      v29.y = v6;
      NSStringFromPoint(v29);
      v25 = v24 = v7;
      v14 = _AXStringForArgs();

      if (os_log_type_enabled(v11, v12))
      {
        *buf = 138543362;
        v27 = v14;
        _os_log_impl(&_mh_execute_header, v11, v12, "%{public}@", buf, 0xCu);
      }
    }
  }

  firstResponderElementForFocus = [v7 firstResponderElementForFocus];
  if (!firstResponderElementForFocus)
  {
    firstResponderElementForFocus = [v7 firstElementInApplication];
  }

  v16 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging2 = [v16 ignoreLogging];

  if ((ignoreLogging2 & 1) == 0)
  {
    v18 = +[AXSubsystemVoiceOver identifier];
    v19 = AXLoggerForFacility();

    v20 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v19, v20))
    {
      v21 = AXColorizeFormatLog();
      v22 = _AXStringForArgs();
      if (os_log_type_enabled(v19, v20))
      {
        *buf = 138543362;
        v27 = v22;
        _os_log_impl(&_mh_execute_header, v19, v20, "%{public}@", buf, 0xCu);
      }
    }
  }

  return firstResponderElementForFocus;
}

- (void)_handleAlertReceived:(id)received forApplication:(__AXUIElement *)application
{
  receivedCopy = received;
  v7 = [AXUIElement uiElementWithAXElement:application];
  v8 = [VOTElement elementWithUIElement:v7];

  v9 = +[VOTCommandHelper commandHelper];
  [v9 setHelpEnabled:0];

  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  [(VOTElementManager *)self _resetItemChooserCache];
  [(VOTElementManager *)self _resetDirectInteractionCache];
  v10 = +[NSNotificationCenter defaultCenter];
  [v10 postNotificationName:@"UpdateElement" object:0];

  if (receivedCopy && (objc_opt_class(), (objc_opt_isKindOfClass() & 1) == 0))
  {
    v31 = +[AXSubsystemVoiceOver sharedInstance];
    ignoreLogging = [v31 ignoreLogging];

    if ((ignoreLogging & 1) == 0)
    {
      v33 = +[AXSubsystemVoiceOver identifier];
      v22 = AXLoggerForFacility();

      v34 = AXOSLogLevelFromAXLogLevel();
      if (!os_log_type_enabled(v22, v34))
      {
LABEL_45:

        goto LABEL_46;
      }

      selectedLanguage = AXColorizeFormatLog();
      objc_opt_class();
      v25 = _AXStringForArgs();
      if (os_log_type_enabled(v22, v34))
      {
        *buf = 138543362;
        v63 = v25;
        _os_log_impl(&_mh_execute_header, v22, v34, "%{public}@", buf, 0xCu);
      }

LABEL_44:

      goto LABEL_45;
    }
  }

  else
  {
    v11 = +[VOTElement springBoardApplication];
    isSystemSleeping = [v11 isSystemSleeping];

    v13 = +[VOTElement springBoardApplication];
    isQuietModeEnabled = [v13 isQuietModeEnabled];

    if ((isQuietModeEnabled & 1) == 0 && (isSystemSleeping & 1) == 0)
    {
      v15 = +[VOTElement springBoardApplication];
      isSystemLocked = [v15 isSystemLocked];

      Current = CFAbsoluteTimeGetCurrent();
      if (![VOTSharedWorkspace isRingerSwitchSilent] || !isSystemLocked || (objc_msgSend(VOTSharedWorkspace, "lastLockButtonPress"), Current - v18 <= 1.5) || (objc_msgSend(VOTSharedWorkspace, "lastHomeButtonPress"), Current - v19 <= 1.5))
      {
        if (CFAbsoluteTimeGetCurrent() - self->_lastAlertTime >= 1.25)
        {
          v20 = +[VOTOutputManager outputManager];
          v21 = +[VOSOutputEvent AlertDidAppear];
          [v20 sendEvent:v21];

          v22 = [objc_allocWithZone(VOTOutputRequest) init];
          [v22 setCannotBeInterrupted:1];
          [v22 setInterruptsEverything:1];
          selectedLanguage = [VOTSharedWorkspace selectedLanguage];
          v24 = sub_1000516CC(off_1001FDDD0, @"alert.message", 0, selectedLanguage);
          v25 = [v22 addString:v24 withLanguage:selectedLanguage];

          [v25 enumerateObjectsUsingBlock:&stru_1001CA178];
          v26 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
          v27 = [receivedCopy stringByTrimmingCharactersInSet:v26];
          v28 = [v27 length];

          if (v28)
          {
            v29 = [v22 addString:receivedCopy];
          }

          v30 = ![receivedCopy isAXAttributedString] || (objc_msgSend(receivedCopy, "hasAttribute:", UIAccessibilityTokenSuppressBrailleOutput) & 1) == 0;
          [v22 setGeneratesBraille:v30];
          [v22 setBrailleType:2];
          [(VOTElementManager *)self sendRequest:v22];
          if (!self->_elementBeforeAlert)
          {
            _currentElement = [(VOTElementManager *)self _currentElement];
            elementBeforeAlert = self->_elementBeforeAlert;
            self->_elementBeforeAlert = _currentElement;
          }

          [NSThread sleepForTimeInterval:0.05];
          v37 = self->_elementBeforeAlert;
          if (v37)
          {
            application = [(VOTElement *)v37 application];
            v39 = application;
            if (application)
            {
              [application frame];
              x = v64.origin.x;
              y = v64.origin.y;
              width = v64.size.width;
              height = v64.size.height;
              MidX = CGRectGetMidX(v64);
              v65.origin.x = x;
              v65.origin.y = y;
              v65.size.width = width;
              v65.size.height = height;
              v45 = [(VOTElementManager *)self _retrieveDefaultElementForPosition:MidX, CGRectGetMidY(v65)];
            }

            else
            {
              v45 = 0;
            }

            if (!v8)
            {
LABEL_30:
              if (!v45)
              {
                v47 = +[VOTElement systemAppApplication];
                [v47 centerPointOfScreen];
                v45 = [(VOTElementManager *)self _retrieveDefaultElementForPosition:?];

                if (!v45)
                {
                  v48 = [(VOTElementManager *)self _retrieveDefaultElementForPosition:*&qword_1001FF180, *algn_1001FF188];
                  if (!v48)
                  {
LABEL_43:
                    self->_lastAlertTime = CFAbsoluteTimeGetCurrent();
                    goto LABEL_44;
                  }

                  v45 = v48;
                }
              }

              v59 = v25;
              [(VOTElementManager *)self _cancelPreviousElementSearch];
              [(VOTElementFetcher *)self->_fetchManager forceUpdate];
              [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v45];
              [(VOTElementManager *)self _setCurrentElement:v45];
              application2 = [v45 application];
              v50 = application2;
              if (application2)
              {
                currentApplications = self->_currentApplications;
                v61 = application2;
                v52 = [NSArray arrayWithObjects:&v61 count:1];
                LODWORD(currentApplications) = [(NSArray *)currentApplications isEqualToArray:v52];

                if (currentApplications)
                {
                  v60 = v50;
                  v53 = [NSArray arrayWithObjects:&v60 count:1];
                  v54 = self->_currentApplications;
                  self->_currentApplications = v53;
                }

                if (!v28)
                {
                  goto LABEL_41;
                }
              }

              else
              {
                v58 = v45;
                _AXAssert();
                if (!v28)
                {
                  goto LABEL_41;
                }
              }

              if (![v45 doesHaveTraits:{kAXIsEditingTrait, v58}])
              {
LABEL_42:
                v25 = v59;
                AXPerformBlockOnMainThreadAfterDelay();

                goto LABEL_43;
              }

LABEL_41:
              v55 = [objc_allocWithZone(VOTOutputRequest) init];

              [(VOTElementManager *)self _addDescription:v45 toRequest:v55 withOptions:1];
              [(VOTElementManager *)self sendRequest:v55];
              [(VOTElementManager *)self setFirstResponder:v45];
              selectedTextRange = [v45 selectedTextRange];
              [(VOTElementManager *)self _elementSelectionRangeDidChange:selectedTextRange reason:v57, 0];
              v22 = v55;
              goto LABEL_42;
            }
          }

          else
          {
            v45 = 0;
            if (!v8)
            {
              goto LABEL_30;
            }
          }

          firstElementInApplicationForFocus = [v8 firstElementInApplicationForFocus];

          v45 = firstElementInApplicationForFocus;
          goto LABEL_30;
        }
      }
    }
  }

LABEL_46:
}

- (void)_updateDisplayWithCurrentElement
{
  v3 = +[VOTDisplayManager displayManager];
  [v3 setCursorFrameForElement:self->_currentElement];
}

- (void)_updateMLElementAutorefresh
{
  automaticAccessibilityEnabled = [VOTSharedWorkspace automaticAccessibilityEnabled];
  v3 = AXMediaLogMLElement();
  v4 = v3;
  if (automaticAccessibilityEnabled)
  {
    if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_INFO, "Turning on auto refresh", buf, 2u);
    }

    v5 = +[VOTElement systemAppApplication];
    focusedApplications = [v5 focusedApplications];

    v7 = [focusedApplications ax_mappedArrayUsingBlock:&stru_1001CA1B8];
    [AXUIMLElement clearCachesForAppsExcluding:v7];

    v24 = 0u;
    v25 = 0u;
    v22 = 0u;
    v23 = 0u;
    v4 = focusedApplications;
    v8 = [v4 countByEnumeratingWithState:&v22 objects:v30 count:16];
    if (v8)
    {
      v10 = v8;
      v11 = *v23;
      *&v9 = 138412546;
      v21 = v9;
      do
      {
        for (i = 0; i != v10; i = i + 1)
        {
          if (*v23 != v11)
          {
            objc_enumerationMutation(v4);
          }

          v13 = *(*(&v22 + 1) + 8 * i);
          bundleIdentifier = [v13 bundleIdentifier];
          if ([bundleIdentifier isEqualToString:@"com.apple.springboard"])
          {
            v15 = [v4 count];

            if (v15 > 1)
            {
              continue;
            }
          }

          else
          {
          }

          bundleIdentifier2 = [v13 bundleIdentifier];
          v17 = AXProcessWantsMLElementsForBundle();

          v18 = AXMediaLogMLElement();
          if (os_log_type_enabled(v18, OS_LOG_TYPE_DEFAULT))
          {
            *buf = v21;
            v27 = v13;
            v28 = 1024;
            v29 = v17;
            _os_log_impl(&_mh_execute_header, v18, OS_LOG_TYPE_DEFAULT, "For app: %@ -> %d", buf, 0x12u);
          }

          uiElement = [v13 uiElement];
          [AXUIMLElement setAutoRefresh:v17 forApp:uiElement];

          if (v17)
          {
            v20 = 2;
          }

          else
          {
            v20 = 0;
          }

          [v13 setTemporaryVoiceOverStatus:v20];
        }

        v10 = [v4 countByEnumeratingWithState:&v22 objects:v30 count:16];
      }

      while (v10);
    }
  }

  else if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D434();
  }
}

- (void)_updateForContinuityStateChange
{
  if ((+[AXSpringBoardServer isAvailable]& 1) != 0)
  {
    v3 = +[AXSpringBoardServer server];
    -[VOTElementManager setIsContinuitySessionActive:](self, "setIsContinuitySessionActive:", [v3 isContinuitySessionActive]);
  }

  else
  {
    [(VOTElementManager *)self setIsContinuitySessionActive:0];
  }

  isContinuitySessionActive = [(VOTElementManager *)self isContinuitySessionActive];
  v5 = +[AXEventTapManager sharedManager];
  [v5 setIgnoreEventsForContinuitySession:isContinuitySessionActive];

  v6 = VOTLogCommon();
  if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
  {
    isContinuitySessionActive2 = [(VOTElementManager *)self isContinuitySessionActive];
    v8 = @"NO";
    if (isContinuitySessionActive2)
    {
      v8 = @"YES";
    }

    v9 = 136315394;
    v10 = "[VOTElementManager _updateForContinuityStateChange]";
    v11 = 2112;
    v12 = v8;
    _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "%s isContinuitySessionActive: %@", &v9, 0x16u);
  }
}

- (BOOL)_shouldIgnoreNotificationForContinuityDisplay:(id)display withElement:(__AXUIElement *)element
{
  displayCopy = display;
  if (![(VOTElementManager *)self isContinuitySessionActive])
  {
    goto LABEL_5;
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    goto LABEL_5;
  }

  v7 = [AXUIElement uiElementWithAXElement:element];
  v8 = [VOTElement elementWithUIElement:v7];

  v9 = [displayCopy objectForKey:kAXPidKey];
  LODWORD(v7) = [v9 intValue];

  v10 = +[VOTElement springBoardApplication];
  if (v7 != [v10 pid])
  {

    goto LABEL_8;
  }

  v11 = [v8 pid];
  v12 = +[VOTElement springBoardApplication];
  v13 = [v12 pid];

  if (v11 != v13)
  {
LABEL_8:
    v14 = 1;
    goto LABEL_6;
  }

LABEL_5:
  v14 = 0;
LABEL_6:

  return v14;
}

- (BOOL)_currentElementIsTrappedInAuthentication
{
  application = [(VOTElement *)self->_currentElement application];
  bundleIdentifier = [application bundleIdentifier];
  if ([bundleIdentifier isEqualToString:@"com.apple.CoreAuthUI"] && -[VOTElement isAlive](self->_currentElement, "isAlive"))
  {
    isVisible = [(VOTElement *)self->_currentElement isVisible];

    if (isVisible)
    {
      return 1;
    }
  }

  else
  {
  }

  return 0;
}

- (void)_handleScreenChange:(id)change sound:(id)sound
{
  changeCopy = change;
  soundCopy = sound;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v8 = VOTLogLayoutChange();
  if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D470();
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![(VOTElementManager *)self _shouldIgnoreElementMovementNotification:changeCopy])
  {
    Current = CFAbsoluteTimeGetCurrent();
    v10 = +[VOTBrailleManager manager];
    [v10 setPanEnabled:1];

    if ((AXDeviceIsAudioAccessory() & 1) == 0)
    {
      v11 = +[VOTWorkspace sharedWorkspace];
      visionEngine = [v11 visionEngine];
      [visionEngine purgeCache];
    }

    [(VOTElementManager *)self _updateMLElementAutorefresh];
    [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer cancel];
    [(VOTElementManager *)self setCachedSideAppDividerElement:0];
    [(VOTElementManager *)self setDidCacheSideAppDividerElement:0];
    [(VOTElementManager *)self setCachedOccludedMultitaskingApps:0];
    [(VOTElementManager *)self setCachedFrontmostItemContainerElement:0];
    [(VOTElementManager *)self setCachedAdditionalElementCommunities:0];
    [(VOTElementManager *)self setLastTrackingUpdateAppsFailureApplication:0];
    [(VOTElementManager *)self setLastTrackingUpdateAppsFailureTime:-3061152000.0];
    [(AXDispatchTimer *)self->_stewieRangeTimer cancel];
    v13 = +[VOTCommandHelper commandHelper];
    [v13 setHelpEnabled:0];

    if ([(VOTElementManager *)self _notificationData:changeCopy containsToken:kAXAnnouncementTypeStopSpeech])
    {
      v14 = +[VOTOutputManager outputManager];
      [v14 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

      v15 = [(VOTElementManager *)self _notificationData:changeCopy consumingToken:kAXAnnouncementTypeStopSpeech];

      changeCopy = v15;
    }

    if ([(VOTElementManager *)self _notificationData:changeCopy containsToken:kAXPerformElementUpdateImmediatelyToken])
    {
      v16 = 0.005;
    }

    else
    {
      v16 = 0.75;
    }

    v17 = +[NSNotificationCenter defaultCenter];
    [v17 postNotificationName:@"UpdateElement" object:0];

    v18 = objc_allocWithZone(VOTElement);
    v19 = +[VOTElement systemAppApplication];
    [v19 centerPointOfScreen];
    v20 = [v18 initApplicationWithPosition:?];

    if (Current - self->_lastAlertTime < 1.25 || ([(VOTElementManager *)self lastValueChangeTime], Current - v21 < 0.75))
    {
      firstElementInApplication = [v20 firstElementInApplication];
      _currentElement = [(VOTElementManager *)self _currentElement];
      if ([_currentElement isEqual:firstElementInApplication] & 1) != 0 || (objc_msgSend(_currentElement, "updateTraits"), objc_msgSend(_currentElement, "isValid")) && (objc_msgSend(_currentElement, "doesHaveTraits:", kAXKeyboardKeyTrait | kAXIsEditingTrait))
      {

        goto LABEL_19;
      }
    }

    v24 = [(VOTElementManager *)self _notificationData:changeCopy containsToken:kAXScreenChangePopup];
    [VOTSharedWorkspace tapAndHoldMode];
    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
    directInteractionGestureInProgress = [WeakRetained directInteractionGestureInProgress];

    if (directInteractionGestureInProgress)
    {
      goto LABEL_24;
    }

    if ([(VOTElementManager *)self _currentElementIsTrappedInAuthentication])
    {
      firstElementInApplication = VOTLogElement();
      if (os_log_type_enabled(firstElementInApplication, OS_LOG_TYPE_DEFAULT))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, firstElementInApplication, OS_LOG_TYPE_DEFAULT, "Not moving VO focus, current element is an Authentication element", buf, 2u);
      }
    }

    else
    {
      [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
      objc_opt_class();
      if (objc_opt_isKindOfClass())
      {
        firstElementInApplication = [changeCopy objectForKey:kAXScreenChangeSourceIdentifier];
      }

      else
      {
        firstElementInApplication = 0;
      }

      if (!-[NSNumber isEqual:](self->_lastScreenChangeSourceIdentifier, "isEqual:", firstElementInApplication) || Current - self->_lastScreenChangeNotificationTime >= 2.5 || [VOTSharedWorkspace brailleInputActive])
      {
        objc_storeStrong(&self->_lastScreenChangeSourceIdentifier, firstElementInApplication);
        if ([(VOTElementManager *)self screenCurtainIsTemporarilyDisabled])
        {
          v27 = VOTLogElement();
          if (os_log_type_enabled(v27, OS_LOG_TYPE_DEFAULT))
          {
            *buf = 0;
            _os_log_impl(&_mh_execute_header, v27, OS_LOG_TYPE_DEFAULT, "Screen curtain re-enabled after temporary disablement", buf, 2u);
          }

          [(VOTElementManager *)self setScreenCurtainIsTemporarilyDisabled:0];
          v28 = +[VOTWorkspace sharedWorkspace];
          [v28 setScreenCurtainSuspended:0];
        }

        v29 = +[VOTDisplayManager displayManager];
        [v29 setCursorFrameForElement:0];

        v43[0] = _NSConcreteStackBlock;
        v43[1] = 3221225472;
        v43[2] = sub_1000A57C8;
        v43[3] = &unk_1001CA1E0;
        v43[4] = self;
        v44 = v16;
        v30 = objc_retainBlock(v43);
        if (Current - self->_lastScreenChangeNotificationTime >= 2.5 || -[VOTElement doesHaveTraits:](self->_currentElement, "doesHaveTraits:", kAXAdjustableTrait) || [VOTSharedWorkspace brailleInputActive])
        {
          [(VOTElementManager *)self _resetDirectInteractionCache];
          [(VOTElementManager *)self _resetItemChooserCache];
          [(NSMutableDictionary *)self->_flowFromElements removeAllObjects];
          self->_lastScreenChangeNotificationTime = CFAbsoluteTimeGetCurrent();
          lastFirstResponderChangeTime = self->_lastFirstResponderChangeTime;
          v32 = +[VOTElement springBoardApplication];
          isSystemSleeping = [v32 isSystemSleeping];

          if ((isSystemSleeping & 1) == 0)
          {
            v34 = Current - lastFirstResponderChangeTime;
            v35 = +[VOTElement springBoardApplication];
            isVoiceControlRunning = [v35 isVoiceControlRunning];

            v37 = CFAbsoluteTimeGetCurrent() - self->_lastFolderOperationTime;
            if (v34 >= 0.5 || isVoiceControlRunning)
            {
              v38 = +[VOTOutputManager outputManager];
              [v38 stopSpeakingAtBoundary:0];
            }

            if (v37 < 0.25)
            {
              v39 = 1;
            }

            else
            {
              v39 = isVoiceControlRunning;
            }

            if (((v39 | v24) & 1) == 0)
            {
              v40 = +[VOTOutputManager outputManager];
              v41 = v40;
              if (soundCopy)
              {
                [v40 playSoundFast:soundCopy];
              }

              else
              {
                v42 = +[VOSOutputEvent ScreenDidChange];
                [v41 sendEvent:v42];
              }
            }
          }
        }

        (v30[2])(v30);
      }
    }

LABEL_19:

LABEL_24:
  }
}

- (void)_clearWebLoadedSound
{
  [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer invalidate];
  webPageLoadingSoundTimer = self->_webPageLoadingSoundTimer;
  self->_webPageLoadingSoundTimer = 0;

  v4 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D4DC();
  }
}

- (void)_webPageElementFinder
{
  v3 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D518();
  }

  _moveToWebItemDuringLoadIfNecessary = [(VOTElementManager *)self _moveToWebItemDuringLoadIfNecessary];
  v5 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D554();
  }

  webPageElementFinder = self->_webPageElementFinder;
  if (_moveToWebItemDuringLoadIfNecessary)
  {
    [(SCRCTargetSelectorTimer *)webPageElementFinder invalidate];
    v7 = self->_webPageElementFinder;
    self->_webPageElementFinder = 0;
  }

  else
  {
    [(SCRCTargetSelectorTimer *)webPageElementFinder dispatchAfterDelay:0.5];
  }
}

- (void)_webPageLoadingSound
{
  if ([(VOTElementManager *)self _isWebAppStillOpen])
  {
    v3 = +[VOTOutputManager outputManager];
    v4 = +[VOSOutputEvent ItemIsLoading];
    [v3 sendEvent:v4];

    [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer dispatchAfterDelay:1.0];
    v5 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D5C4();
    }
  }
}

- (BOOL)_moveToWebItemDuringLoadIfNecessary
{
  v3 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D600();
  }

  if ([(VOTElementManager *)self webPageLoadedGenerationMark]&& (v4 = [(VOTElementManager *)self webPageLoadedGenerationMark], v4 >= [(VOTElementManager *)self elementGeneration]))
  {
    [(VOTElementManager *)self _resetItemChooserCache];
    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
    v7 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v7, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D694();
    }

    [(VOTElementManager *)self _updateApplicationAndSpeak:&__kCFBooleanTrue];
    if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXWebContentTrait])
    {
      hasNativeFocus = [(VOTElement *)self->_currentElement hasNativeFocus];
    }

    else
    {
      hasNativeFocus = 0;
    }

    v9 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v9, OS_LOG_TYPE_DEBUG))
    {
      webPageLoadedGenerationMark = [(VOTElementManager *)self webPageLoadedGenerationMark];
      elementGeneration = [(VOTElementManager *)self elementGeneration];
      currentElement = self->_currentElement;
      v16[0] = 67109890;
      v16[1] = hasNativeFocus;
      v17 = 2048;
      v18 = webPageLoadedGenerationMark;
      v19 = 2048;
      v20 = elementGeneration;
      v21 = 2112;
      v22 = currentElement;
      _os_log_debug_impl(&_mh_execute_header, v9, OS_LOG_TYPE_DEBUG, "Did we move from for web movement(has hasWebFocus: %d): web generation: %lld, element: %lld\nElement: %@", v16, 0x26u);
    }

    webPageLoadedGenerationMark2 = [(VOTElementManager *)self webPageLoadedGenerationMark];
    if ((webPageLoadedGenerationMark2 < [(VOTElementManager *)self elementGeneration]) | hasNativeFocus & 1)
    {
      v11 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v11, OS_LOG_TYPE_DEBUG))
      {
        sub_10012D6D0();
      }

      goto LABEL_20;
    }
  }

  else
  {
    elementGeneration2 = [(VOTElementManager *)self elementGeneration];
    if (elementGeneration2 > [(VOTElementManager *)self webPageLoadedGenerationMark])
    {
      v6 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG))
      {
        sub_10012D754();
      }

LABEL_20:
      [(VOTElementManager *)self setWebPageLoadedGenerationMark:0];
      return 1;
    }
  }

  return 0;
}

- (void)_handleWebPageLoaded:(id)loaded
{
  loadedCopy = loaded;
  v5 = [(VOTElementManager *)self _shouldSuppressWebPageLoadedBehaviorForNotification:loadedCopy];
  v6 = loadedCopy;
  objc_opt_class();
  v7 = v6;
  if (objc_opt_isKindOfClass())
  {
    v8 = [v6 objectForKeyedSubscript:kAXNotificationDataKey];
    v9 = v8;
    v7 = v6;
    if (v8)
    {
      v7 = v8;
    }
  }

  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v10 = [v7 objectForKey:@"progress"];
    objc_opt_class();
    v11 = 0.0;
    if (objc_opt_isKindOfClass())
    {
      v12 = [v7 objectForKey:@"progress"];
      [v12 doubleValue];
      v11 = v13;
    }

    v14 = [v7 objectForKey:@"url"];
  }

  else
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      [v7 floatValue];
      v14 = 0;
      v11 = v15;
    }

    else
    {
      v14 = 0;
      v11 = 0.0;
    }
  }

  v16 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D7C8();
  }

  if (v11 != 1.0 && v11 >= 0.0)
  {
    if (!self->_webPageLoadingSoundTimer)
    {
      [(VOTElementManager *)self setWebPageLoadedGenerationMark:[(VOTElementManager *)self elementGeneration]];
      [(VOTElementManager *)self setWebPageLoadURL:v14];
      v17 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v17, OS_LOG_TYPE_DEBUG))
      {
        sub_10012D838(self);
      }

      v18 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:self selector:"_webPageLoadingSound" thread:self->_elementManagerThread];
      webPageLoadingSoundTimer = self->_webPageLoadingSoundTimer;
      self->_webPageLoadingSoundTimer = v18;

      [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer dispatchAfterDelay:0.0];
      if ((v5 & 1) == 0)
      {
        v20 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:self selector:"_webPageElementFinder" thread:self->_elementManagerThread];
        webPageElementFinder = self->_webPageElementFinder;
        self->_webPageElementFinder = v20;

        [(SCRCTargetSelectorTimer *)self->_webPageElementFinder dispatchAfterDelay:0.0];
      }
    }

    goto LABEL_31;
  }

  [(VOTElementManager *)self _clearWebLoadedSound];
  if (CFAbsoluteTimeGetCurrent() - self->_lastWebPageLoadTime > 3.0)
  {
    self->_lastWebPageLoadTime = CFAbsoluteTimeGetCurrent();
    self->_webPageLoadingProgress = 0.0;
    selectedLanguage = +[VOTOutputManager outputManager];
    if (([selectedLanguage isSpeaking] & 1) == 0 && objc_msgSend(VOTSharedWorkspace, "hintsEnabled"))
    {

      if (v5)
      {
LABEL_27:
        v25 = +[VOTOutputManager outputManager];
        v26 = +[VOSOutputEvent ItemDidLoad];
        [v25 sendEvent:v26];

        goto LABEL_28;
      }

      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      v23 = sub_1000516CC(off_1001FDDD0, @"webpage.loaded", 0, selectedLanguage);
      v24 = sub_1000095FC(v23, 1, selectedLanguage);
    }

    goto LABEL_27;
  }

LABEL_28:
  v27 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v27, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D8B8();
  }

LABEL_31:
}

- (BOOL)_shouldSuppressWebPageLoadedBehaviorForNotification:(id)notification
{
  notificationCopy = notification;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v4 = [notificationCopy objectForKeyedSubscript:kAXPidKey];
    if (v4 && (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0) && (v5 = [v4 intValue], v5 >= 1))
    {
      v6 = [[VOTElement alloc] initApplicationWithPid:v5];
      bundleIdentifier = [v6 bundleIdentifier];
      if (([bundleIdentifier isEqualToString:AX_AppleTVAppBundleName] & 1) != 0 || objc_msgSend(bundleIdentifier, "isEqualToString:", AX_MusicBundleName))
      {
        v8 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
        {
          sub_10012D930();
        }

        v9 = 1;
      }

      else
      {
        v9 = 0;
      }
    }

    else
    {
      v9 = 0;
    }
  }

  else
  {
    v9 = 0;
  }

  return v9;
}

- (void)_captionsDisplayedWithTextRuns:(id)runs
{
  runsCopy = runs;
  v4 = +[AXSettings sharedInstance];
  voiceOverDescribedMedia = [v4 voiceOverDescribedMedia];

  if ((voiceOverDescribedMedia & 3) == 0)
  {
    goto LABEL_25;
  }

  v19 = 0u;
  v20 = 0u;
  v17 = 0u;
  v18 = 0u;
  v6 = runsCopy;
  v7 = [(VOTOutputRequest *)v6 countByEnumeratingWithState:&v17 objects:v21 count:16];
  if (!v7)
  {
    v9 = v6;
    goto LABEL_24;
  }

  v8 = v7;
  v16 = runsCopy;
  v9 = 0;
  v10 = *v18;
  do
  {
    for (i = 0; i != v8; i = i + 1)
    {
      if (*v18 != v10)
      {
        objc_enumerationMutation(v6);
      }

      v12 = *(*(&v17 + 1) + 8 * i);
      objc_opt_class();
      if (objc_opt_isKindOfClass())
      {
        string = [v12 string];
      }

      else
      {
        objc_opt_class();
        if ((objc_opt_isKindOfClass() & 1) == 0)
        {
          continue;
        }

        string = v12;
      }

      v14 = string;
      if (string)
      {
        if (!v9)
        {
          v9 = objc_alloc_init(VOTOutputRequest);
        }

        v15 = [(VOTOutputRequest *)v9 addString:v14];
      }
    }

    v8 = [(VOTOutputRequest *)v6 countByEnumeratingWithState:&v17 objects:v21 count:16];
  }

  while (v8);

  runsCopy = v16;
  if (v9)
  {
    if ((voiceOverDescribedMedia & 2) != 0)
    {
      [(VOTOutputRequest *)v9 setGeneratesBraille:1];
    }

    if ((voiceOverDescribedMedia & 1) == 0)
    {
      [(VOTOutputRequest *)v9 setLimitToComponentType:3];
    }

    [(VOTOutputRequest *)v9 setBrailleType:1];
    [(VOTOutputRequest *)v9 send];
LABEL_24:
  }

LABEL_25:
}

- (void)_handleCaptionsDisplayedNotification:(id)notification
{
  notificationCopy = notification;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ((AXDeviceIsAudioAccessory() & 1) == 0 && CFAbsoluteTimeGetCurrent() - self->_lastEventOccurredTime >= 2.0)
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v4 = [notificationCopy objectForKeyedSubscript:kAXCaptionsDisplayedTextRuns];
      objc_opt_class();
      if (objc_opt_isKindOfClass())
      {
        [(VOTElementManager *)self _captionsDisplayedWithTextRuns:v4];
      }
    }
  }
}

- (void)_handleDidReceiveVisionEngineResult:(id)result
{
  resultCopy = result;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ((AXDeviceIsAudioAccessory() & 1) == 0 && CFAbsoluteTimeGetCurrent() - self->_lastEventOccurredTime >= 2.0)
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v5 = objc_opt_class();
      v6 = AXMSecureCodingClasses();
      v20 = 0;
      v7 = [NSKeyedUnarchiver axmSecurelyUnarchiveData:resultCopy withExpectedClass:v5 otherAllowedClasses:v6 error:&v20];
      v8 = v20;

      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0 || v8)
      {
        _AXAssert();
      }

      else
      {
        v8 = objc_opt_new();
        v16 = 0u;
        v17 = 0u;
        v18 = 0u;
        v19 = 0u;
        features = [v7 features];
        v10 = [features countByEnumeratingWithState:&v16 objects:v21 count:16];
        if (v10)
        {
          v11 = v10;
          v12 = *v17;
          do
          {
            for (i = 0; i != v11; i = i + 1)
            {
              if (*v17 != v12)
              {
                objc_enumerationMutation(features);
              }

              v14 = *(*(&v16 + 1) + 8 * i);
              if ([v14 featureType] == 12)
              {
                value = [v14 value];
                [v8 addObject:value];
              }
            }

            v11 = [features countByEnumeratingWithState:&v16 objects:v21 count:16];
          }

          while (v11);
        }

        [(VOTElementManager *)self _captionsDisplayedWithTextRuns:v8];
      }
    }

    else
    {
      _AXAssert();
    }
  }
}

- (void)_handleScreenOn
{
  [VOTSharedWorkspace setScreenOn:1 silently:0];
  [(VOTElementManager *)self _setCurrentElement:0];
  v3 = kAXPerformElementUpdateImmediatelyToken;

  [(VOTElementManager *)self _handleScreenChange:v3 sound:0];
}

- (void)_handleScreenOff
{
  v2 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent ScreenDidTurnOff];
  [v2 sendEvent:v3];

  v4 = VOTSharedWorkspace;

  [v4 setScreenOn:0 silently:0];
}

- (void)_handleStopSpeaking
{
  v2 = +[VOTOutputManager outputManager];
  [v2 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

  v3 = +[VOTOutputManager outputManager];
  [v3 toggleAudioSessionActive:0];
}

- (void)_handleStopSpeakingAndClearQueue
{
  v2 = +[VOTOutputManager outputManager];
  [v2 clearQueue];

  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];
}

- (void)_handleStopSpeakingAndClearAllQueues
{
  v2 = +[VOTOutputManager outputManager];
  [v2 clearAllQueues];

  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];
}

- (void)_handleTemporaryScreenCurtainDisablement
{
  v3 = VOTLogElement();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEFAULT))
  {
    *v6 = 0;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_DEFAULT, "Screen curtain turned off for temporary disablement", v6, 2u);
  }

  if ([VOTSharedWorkspace screenCurtainEnabled])
  {
    if (([VOTSharedWorkspace screenCurtainSuspended] & 1) == 0)
    {
      [(VOTElementManager *)self setScreenCurtainIsTemporarilyDisabled:1];
      v4 = +[VOTWorkspace sharedWorkspace];
      [v4 setScreenCurtainSuspended:1];

      v5 = +[VOTDisplayManager displayManager];
      [v5 clearCursorFrame];
    }
  }
}

- (void)_handleRequestExclusiveAudioHardware
{
  v2 = +[VOTOutputManager outputManager];
  [v2 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

  v3 = +[VOTOutputManager outputManager];
  [v3 toggleAudioSessionActive:0];

  v4 = VOTSharedWorkspace;

  [v4 setOutputDisabled:1];
}

- (void)_handleUnmuteEligibleEventOccured
{
  v2 = +[VOTWorkspace sharedWorkspace];
  [v2 unmuteEligibleEventOccured];
}

- (void)_handleAutoCorrectionDisplayNotification:(id)notification
{
  notificationCopy = notification;
  autofillCurrentElement = self->_autofillCurrentElement;
  self->_autofillCurrentElement = 0;

  application = [(VOTElement *)self->_currentElement application];
  activeKeyboard = [application activeKeyboard];
  isKeyboardContinuousPathTracking = [activeKeyboard isKeyboardContinuousPathTracking];

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [notificationCopy hasAttribute:kAXAutoCorrectionForContinuousPathKey])
  {
    objc_storeStrong(&self->_continuousPathSuggestion, notification);
  }

  v10 = VOTLogCommon();
  if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
  {
    continuousPathSuggestion = self->_continuousPathSuggestion;
    v14 = 138412802;
    v15 = notificationCopy;
    v16 = 2112;
    v17 = continuousPathSuggestion;
    v18 = 1024;
    v19 = isKeyboardContinuousPathTracking;
    _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "Auto correct displayed: %@, continuous path: %@[%d]", &v14, 0x1Cu);
  }

  if (isKeyboardContinuousPathTracking)
  {
    if ([(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isPending])
    {
      [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer cancel];
      [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer dispatchAfterDelay:0.0];
    }
  }

  else
  {
    v12 = +[VOTOutputManager outputManager];
    v13 = +[VOSOutputEvent AutofillDidAppear];
    [v12 sendEvent:v13];
  }
}

- (void)_handleKeyboardChangedNotification
{
  v2 = +[VOTKeyboardManager keyboardManager];
  [v2 loadKeyboardMap];

  v3 = +[VOTBrailleManager manager];
  [v3 handleKeyboardChanged];

  v4 = +[VOTBrailleManager manager];
  [v4 refreshBrailleLine];
}

- (void)_handleAutoCorrectionMadeNotification:(id)notification
{
  notificationCopy = notification;
  if ([notificationCopy length])
  {
    v5 = +[AXSubsystemVoiceOver sharedInstance];
    ignoreLogging = [v5 ignoreLogging];

    if ((ignoreLogging & 1) == 0)
    {
      v7 = +[AXSubsystemVoiceOver identifier];
      v8 = AXLoggerForFacility();

      v9 = AXOSLogLevelFromAXLogLevel();
      if (os_log_type_enabled(v8, v9))
      {
        v10 = AXColorizeFormatLog();
        v11 = _AXStringForArgs();
        if (os_log_type_enabled(v8, v9))
        {
          *buf = 138543362;
          v16 = v11;
          _os_log_impl(&_mh_execute_header, v8, v9, "%{public}@", buf, 0xCu);
        }
      }
    }

    v12 = sub_1000511CC(off_1001FDDD0, @"autocorrection.text", 0);
    notificationCopy = [NSString stringWithFormat:v12, notificationCopy];

    v14 = +[VOTOutputManager outputManager];
    [v14 speakSimpleString:notificationCopy];
  }

  [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
}

- (void)_handleScrollByPageNotification:(id)notification
{
  notificationCopy = notification;
  if (!notificationCopy || (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0))
  {
    v5 = [notificationCopy isEqualToString:kAXPageScrollFailed];
    v6 = v5;
    if (v5)
    {

      notificationCopy = 0;
    }

    _currentElement = [(VOTElementManager *)self _currentElement];
    if ([_currentElement isReadingContent])
    {
      includeDuringContentReading = 1;
    }

    else
    {
      _currentElement2 = [(VOTElementManager *)self _currentElement];
      includeDuringContentReading = [_currentElement2 includeDuringContentReading];
    }

    tapAndHoldMode = [VOTSharedWorkspace tapAndHoldMode];
    if ([notificationCopy isAXAttributedString])
    {
      v11 = [notificationCopy hasAttribute:kAXPageScrollIsCrownScroll];
    }

    else
    {
      v11 = 0;
    }

    v106 = [notificationCopy isEqualToString:kAXScrollWithContentPullDown];
    if (v106)
    {
      sub_1000511CC(off_1001FDDD0, @"scroll.content.pulldown", 0);
      notificationCopy = v12 = notificationCopy;
LABEL_24:

      goto LABEL_25;
    }

    if ((v6 & 1) != 0 || (includeDuringContentReading & 1) == 0 && (!notificationCopy || -[NSString isEqualToString:](self->_lastScrollStatus, "isEqualToString:", notificationCopy) && [notificationCopy length]))
    {
      _currentElement3 = [(VOTElementManager *)self _currentElement];
      v14 = [_currentElement3 mapFeatureType] != 0;

      if (((v14 | v11 | tapAndHoldMode) & 1) == 0)
      {
        v12 = +[VOTOutputManager outputManager];
        v15 = +[VOSOutputEvent BoundaryEncountered];
LABEL_23:
        v16 = v15;
        [v12 sendEvent:v15];

        goto LABEL_24;
      }
    }

    else if ((v11 & 1) == 0)
    {
      v12 = +[VOTOutputManager outputManager];
      v15 = +[VOSOutputEvent DidScrollByPage];
      goto LABEL_23;
    }

LABEL_25:
    v17 = [objc_allocWithZone(VOTOutputRequest) init];
    v105 = includeDuringContentReading;
    if (![notificationCopy length] || includeDuringContentReading && self->_flags.isReadingAllBook)
    {
      v104 = 0;
LABEL_35:
      v24 = v17;
      [v17 setCannotBeInterrupted:1];
      _currentElement4 = [(VOTElementManager *)self _currentElement];
      v26 = self->_currentOpaqueParent;
      application = [_currentElement4 application];
      if ((v106 & 1) == 0 && ([_currentElement4 isValidForApplication:application] & 1) == 0)
      {
        firstVisibleElementInList = [_currentElement4 firstVisibleElementInList];
        if (firstVisibleElementInList)
        {
          midY = firstVisibleElementInList;
          v29 = 27;
          while (1)
          {
            if ([midY isValidForApplication:application])
            {
              [_currentElement4 readingContentCausesPageTurn];
              v35 = v24;
              goto LABEL_107;
            }

            nextElement = [midY nextElement];
            if ([nextElement isEqual:midY])
            {
              break;
            }

            v31 = nextElement;

            if (!--v29)
            {
              midY = v31;
              break;
            }

            midY = v31;
            if (!v31)
            {
              goto LABEL_43;
            }
          }

          readingContentCausesPageTurn = [_currentElement4 readingContentCausesPageTurn];
          v35 = v24;
          if (!midY)
          {
            goto LABEL_44;
          }

LABEL_107:
          [(VOTElementManager *)self _setCurrentElement:midY];
          if (([midY doesHaveTraits:kAXLaunchIconTrait] | v104))
          {
            [(VOTElementManager *)self _addDescription:midY toRequest:v35 withOptions:0x800000];
          }

          if (!self->_flags.previousScrollWasBookContentMovement)
          {
            v79 = +[VOTDisplayManager displayManager];
            [v79 setCursorFrameForElement:midY];
          }

          fetchManager = self->_fetchManager;
          _currentElement5 = [(VOTElementManager *)self _currentElement];
          [(VOTElementFetcher *)fetchManager updateCacheWithElement:_currentElement5];

          goto LABEL_123;
        }
      }

LABEL_43:
      readingContentCausesPageTurn = [_currentElement4 readingContentCausesPageTurn];
LABEL_44:
      v33 = readingContentCausesPageTurn;
      if (v6 & 1) == 0 && ((readingContentCausesPageTurn | v105))
      {
        [_currentElement4 updateCache];
        [_currentElement4 updatePageContent];
        lastValidElement = self->_lastValidElement;
        self->_lastValidElement = 0;

        [(VOTElementManager *)self _resetElementUnitIndexes];
        self->_flags.shouldUpdateRotorForElement = 1;
        if (!self->_flags.previousScrollWasBookContentMovement)
        {
          isReadingContent = [_currentElement4 isReadingContent];
          v35 = v24;
          if ((isReadingContent & v33 & 1) != 0 || (isReadingContent & 1) == 0 && (self->_flags.isReadingAll || self->_flags.userInitiatedBooksScroll))
          {
            AXPerformBlockOnMainThreadAfterDelay();
            objc_storeStrong(&self->_lastScrollStatus, notificationCopy);
            self->_flags.previousScrollWasBookContentMovement = 0;
LABEL_125:
            v103 = +[NSNotificationCenter defaultCenter];
            [v103 postNotificationName:@"UpdateElement" object:0];

            [(VOTElementManager *)self _resetItemChooserCache];
            goto LABEL_126;
          }

LABEL_124:
          objc_storeStrong(&self->_lastScrollStatus, notificationCopy);
          self->_flags.previousScrollWasBookContentMovement = 0;
          v101 = VOTSharedWorkspace;
          _currentRotorSelection = [(VOTElementManager *)self _currentRotorSelection];
          [v101 refreshBraille:0 rotorSelection:_currentRotorSelection];

          goto LABEL_125;
        }

        v35 = v24;
        if (self->_bookLastContentMovementDirection == 2)
        {
          [(VOTElementManager *)self _setElementUnitIndexesToEndOfElement:_currentElement4];
        }

        pageContent = [_currentElement4 pageContent];
        midY = pageContent;
        bookLastContentMovementUnit = self->_bookLastContentMovementUnit;
        if (bookLastContentMovementUnit == 3)
        {
          bookLineNumber = self->_bookLineNumber;
          if (bookLineNumber == 0x7FFFFFFF)
          {
            if (self->_bookLastContentMovementDirection == 1)
            {
              bookLineNumber = 0;
              self->_bookLineNumber = 0;
            }

            else
            {
              bookLineNumber = 0x7FFFFFFFLL;
            }
          }

          v82 = [_currentElement4 stringForLineNumber:bookLineNumber];
          v83 = [v24 addString:v82];
          [_currentElement4 frameForLineNumber:self->_bookLineNumber];
          v85 = v84;
          v87 = v86;
          v89 = v88;
          v91 = v90;
          v92 = +[VOTElement systemWideElement];
          [v92 convertRect:objc_msgSend(_currentElement4 fromContextId:{"windowContextId"), v85, v87, v89, v91}];
          self->_lineFrame.origin.x = v93;
          self->_lineFrame.origin.y = v94;
          self->_lineFrame.size.width = v95;
          self->_lineFrame.size.height = v96;

          goto LABEL_119;
        }

        if (bookLastContentMovementUnit == 2)
        {
          v74 = [pageContent wordFromPosition:self->_bookCursorPosition inDirection:self->_bookLastContentMovementDirection];
LABEL_118:
          v82 = [midY substringWithRange:{v74, v75}];
          v98 = [v24 addString:v82];
LABEL_119:

          goto LABEL_120;
        }

        if (bookLastContentMovementUnit != 1)
        {
LABEL_120:
          if ([v35 containsActions])
          {
            v99 = +[VOTOutputManager outputManager];
            [v99 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

            [(VOTElementManager *)self sendRequest:v35];
          }

          -[VOTElementManager _handleBookContentMovement:direction:unit:generateOutput:](self, "_handleBookContentMovement:direction:unit:generateOutput:", _currentElement4, self->_bookLastContentMovementDirection, self->_bookLastContentMovementUnit, [v35 containsActions] ^ 1);
          v100 = +[VOTDisplayManager displayManager];
          [v100 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

LABEL_123:
          goto LABEL_124;
        }

        bookLastContentMovementDirection = self->_bookLastContentMovementDirection;
        if (bookLastContentMovementDirection == 1)
        {
          bookCursorPosition = self->_bookCursorPosition;
          if (bookCursorPosition < [pageContent length])
          {
            v37 = self->_bookCursorPosition & ~(self->_bookCursorPosition >> 63);
LABEL_117:
            v74 = [midY rangeOfComposedCharacterSequenceAtIndex:v37];
            goto LABEL_118;
          }

          bookLastContentMovementDirection = self->_bookLastContentMovementDirection;
        }

        if (bookLastContentMovementDirection != 2)
        {
          goto LABEL_120;
        }

        v97 = self->_bookCursorPosition;
        v37 = v97 - 1;
        if (v97 < 1)
        {
          goto LABEL_120;
        }

        goto LABEL_117;
      }

      [_currentElement4 centerPoint];
      MidX = v41;
      MidY = v43;
      y = CGPointZero.y;
      if (CGPointZero.x == v41 && y == MidY)
      {
        midY = _currentElement4;
        v35 = v24;
      }

      else
      {
        if ([_currentElement4 doesHaveTraits:{kAXWebContentTrait, CGPointZero.x, y}])
        {
          application2 = [_currentElement4 application];
          isSafari = [application2 isSafari];

          if (isSafari)
          {
            remoteParent = [_currentElement4 remoteParent];
            v50 = remoteParent;
            if (remoteParent)
            {
              uiElement = [remoteParent uiElement];
              [uiElement rectWithAXAttribute:2057];
              v53 = v52;
              v55 = v54;
              v57 = v56;
              v59 = v58;

              v108.origin.x = v53;
              v108.origin.y = v55;
              v108.size.width = v57;
              v108.size.height = v59;
              MidX = CGRectGetMidX(v108);
              v109.origin.x = v53;
              v109.origin.y = v55;
              v109.size.width = v57;
              v109.size.height = v59;
              MidY = CGRectGetMidY(v109);
            }
          }
        }

        windowContextId = [_currentElement4 windowContextId];
        if (windowContextId)
        {
          v61 = +[VOTElement systemWideElement];
          [v61 convertPoint:windowContextId fromContextId:{MidX, MidY}];
          MidX = v62;
          MidY = v63;
        }

        v64 = objc_allocWithZone(VOTElement);
        application3 = [_currentElement4 application];
        midY = [v64 initWithPosition:application3 application:windowContextId contextId:{MidX, MidY}];

        parentTableOrCollectionView = [midY parentTableOrCollectionView];
        parentTableOrCollectionView2 = [_currentElement4 parentTableOrCollectionView];
        v68 = [parentTableOrCollectionView isEqual:parentTableOrCollectionView2];

        if (!midY)
        {
          midY = [(VOTElementManager *)self _sonarElementFromPoint:1 inForwardDirection:10 limit:MidX, MidY];
        }

        v35 = v24;
        if (([midY isInTableCell] & 1) == 0 && (objc_msgSend(_currentElement4, "isInTableCell") & 1) != 0 || !(v68 & 1 | ((objc_msgSend(midY, "isInTableCell") & 1) == 0)))
        {
          if (![_currentElement4 isAlive] || (objc_msgSend(_currentElement4, "firstVisibleElementInList"), (firstVisibleElementInList2 = objc_claimAutoreleasedReturnValue()) == 0))
          {
            firstVisibleElementInList2 = [(VOTElement *)v26 firstVisibleElementInList];
          }

          nextElement2 = [firstVisibleElementInList2 nextElement];

          if (!nextElement2)
          {
            nextElement2 = firstVisibleElementInList2;
          }

          midY = nextElement2;
        }
      }

      if (![midY isValid])
      {
        [_currentElement4 updateCache];
        goto LABEL_102;
      }

      if (v106)
      {
        firstVisibleElementInList3 = [midY firstVisibleElementInList];
      }

      else
      {
        if ([midY isEqual:_currentElement4])
        {
LABEL_101:
          [(VOTElementFetcher *)self->_fetchManager forceUpdate];
          self->_flags.shouldUpdateRotorForElement = 1;
LABEL_102:
          if ([v35 containsActions])
          {
            v78 = +[VOTOutputManager outputManager];
            [v78 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

            [(VOTElementManager *)self sendRequest:v35];
          }

          goto LABEL_123;
        }

        firstVisibleElementInList3 = midY;
      }

      v73 = firstVisibleElementInList3;
      if (firstVisibleElementInList3)
      {
        [(VOTElementManager *)self _setCurrentElement:firstVisibleElementInList3];
        if (v104)
        {
          [(VOTElementManager *)self _addDescription:v73 toRequest:v35 withOptions:0x800000];
        }

        else if (([v73 isReadingContent] & 1) != 0 || objc_msgSend(v73, "includeDuringContentReading"))
        {
          [(VOTElementManager *)self _startReadingBookForNewPage];
        }

        v77 = +[VOTDisplayManager displayManager];
        [v77 setCursorFrameForElement:v73];
      }

      goto LABEL_101;
    }

    if ([notificationCopy isAXAttributedString])
    {
      v18 = v17;
      v104 = [notificationCopy hasAttribute:kAXPageScrollShouldSpeakElement];
      v19 = +[NSCharacterSet whitespaceCharacterSet];
      v20 = [notificationCopy stringByTrimmingCharactersInSet:v19];

      if (v11)
      {
        notificationCopy = v20;
        v17 = v18;
        goto LABEL_35;
      }

      v17 = v18;
      v23 = [v18 addAttributedString:v20];
    }

    else
    {
      v21 = +[NSCharacterSet whitespaceCharacterSet];
      v20 = [notificationCopy stringByTrimmingCharactersInSet:v21];

      v22 = [v17 addString:v20];
      v104 = 0;
    }

    notificationCopy = v20;
    goto LABEL_35;
  }

  _AXAssert();
LABEL_126:
}

- (void)_handleSystemControlActivation:(id)activation
{
  activationCopy = activation;
  command = [activationCopy command];
  v5 = [command isEqualToString:kVOTEventCommandSystemShowNotificationCenter];

  if (v5)
  {
    v6 = +[AXPISystemActionHelper sharedInstance];
    [v6 toggleNotificationCenter];
LABEL_5:

    goto LABEL_6;
  }

  command2 = [activationCopy command];
  v8 = [command2 isEqualToString:kVOTEventCommandSystemShowControlCenter];

  if (v8)
  {
    v6 = +[AXPISystemActionHelper sharedInstance];
    [v6 toggleControlCenter];
    goto LABEL_5;
  }

  command3 = [activationCopy command];
  v10 = [command3 isEqualToString:kVOTEventCommandSystemControlTwoTop];

  if (v10)
  {
    [(VOTElementManager *)self _handleSpeakScreen:activationCopy];
  }

LABEL_6:
}

- (void)_handleSystemCommandNotificationCenter:(id)center
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleNotificationCenter];
}

- (void)_handleSystemCommandControlCenter:(id)center
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleControlCenter];
}

- (void)_handleSystemCommandToggleDock:(id)dock
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleDock];
}

- (void)_handleSystemCommandToggleAppSwitcher:(id)switcher
{
  if (![(VOTElementManager *)self isContinuitySessionActive])
  {
    v3 = +[AXPISystemActionHelper sharedInstance];
    [v3 toggleAppSwitcher];
  }
}

- (void)_handleSystemCommandActivateLockButton:(id)button
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateLockButton];
}

- (void)_handleSystemCommandSpotlight:(id)spotlight
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleSpotlight];
}

- (void)_handleSystemCommandActivateAccessibilityShortcut:(id)shortcut
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateTripleClick];
}

- (void)_handleSystemCommandToggleReachability:(id)reachability
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleReachability];
}

- (void)_handleSystemCommandTakeScreenshot:(id)screenshot
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 takeScreenshot];
}

- (void)_handleSystemCommandSwitchToPreviousApp:(id)app
{
  v3 = +[VOTSpringBoardConnection defaultConnection];
  [v3 sendProgrammaticAppSwitch:0];
}

- (void)_handleSystemCommandSwitchToNextApp:(id)app
{
  v3 = +[VOTSpringBoardConnection defaultConnection];
  [v3 sendProgrammaticAppSwitch:1];
}

- (void)_handleSystemCommandToggleQuickNote:(id)note
{
  v3 = +[AXSpringBoardServer server];
  [v3 toggleQuickNote];
}

- (void)_handleSendCancelEvent:(id)event
{
  v3 = +[AXElement systemWideElement];
  [v3 performAction:5007];

  v4 = sub_1000095FC(@"Cancel event sent", 1, 0);
}

- (void)_handleSiriShortcutEvent:(id)event
{
  v3 = [event objectForIndex:117];
  if (v3)
  {
    v5 = v3;
    v4 = +[AXSiriShortcutsManager sharedManager];
    [v4 performShortcut:v5];

    v3 = v5;
  }
}

- (BOOL)allowsSystemControlEventForPosition:(int)position
{
  if ((position - 1) < 2)
  {
    if (([VOTSharedWorkspace supportsHomeGestures] & 1) == 0)
    {
      v3 = +[AXSpringBoardServer server];
      if ([v3 isNotificationCenterVisible])
      {
        LOBYTE(v4) = 0;
      }

      else
      {
        v6 = +[AXSpringBoardServer server];
        v4 = [v6 isControlCenterVisible] ^ 1;
      }

      return v4;
    }

LABEL_9:
    LOBYTE(v4) = 0;
    return v4;
  }

  if (position != 5)
  {
    goto LABEL_9;
  }

  return [(VOTElementManager *)self _shouldAllowSpeakThisGesture];
}

- (BOOL)_shouldAllowSpeakThisGesture
{
  v2 = _AXSSpeakThisEnabled();
  if (v2)
  {
    v3 = +[AXSpringBoardServer server];
    isSpeakThisTemporarilyDisabled = [v3 isSpeakThisTemporarilyDisabled];

    if (isSpeakThisTemporarilyDisabled)
    {
      LOBYTE(v2) = 0;
    }

    else
    {
      v5 = +[AXSpringBoardServer server];
      hasActiveOrPendingCallOrFaceTime = [v5 hasActiveOrPendingCallOrFaceTime];

      LOBYTE(v2) = hasActiveOrPendingCallOrFaceTime ^ 1;
    }
  }

  return v2;
}

- (void)_handleRotateOrientation:(id)orientation
{
  command = [orientation command];
  v4 = [command isEqualToString:kVOTEventCommandRotateOrientationRight];

  v5 = VOTSharedWorkspace;

  [v5 rotateDeviceOrientation:v4];
}

- (void)_handleVolumeChange:(float)change
{
  v5 = +[AXSettings sharedInstance];
  [v5 voiceOverEffectiveSpeakingVolume];
  v7 = v6;

  v8 = change + v7;
  v9 = (v8 * 100.0);
  v10 = (change * 100.0);
  v11 = v9 % v10;
  if (v9 % v10)
  {
    v12 = v10 + (v10 >> 31);
    if (v10 < 0)
    {
      v10 = -v10;
    }

    if (v11 <= v12 >> 1)
    {
      v10 = 0;
    }

    v9 = v9 - v11 + v10;
  }

  v13 = fmax(v9 / 100.0, 0.0500000007);
  if (v13 <= 1.0)
  {
    v14 = v13;
  }

  else
  {
    v14 = 1.0;
  }

  v15 = VOTLogAudio();
  if (os_log_type_enabled(v15, OS_LOG_TYPE_INFO))
  {
    v16 = [NSNumber numberWithDouble:v8];
    v17 = [NSNumber numberWithDouble:v14];
    v24 = 138412546;
    v25 = v16;
    v26 = 2112;
    v27 = v17;
    _os_log_impl(&_mh_execute_header, v15, OS_LOG_TYPE_INFO, "Set VO Rotor volume from %@ to %@", &v24, 0x16u);
  }

  v18 = +[AXSettings sharedInstance];
  v19 = v14;
  *&v20 = v19;
  [v18 setVoiceOverEffectiveSpeakingVolume:v20];

  v21 = [objc_allocWithZone(VOTOutputRequest) init];
  v22 = AXFormatFloatWithPercentage();
  v23 = [v21 addString:v22];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v21];
  [(VOTElementManager *)self sendRequest:v21];
}

- (void)_handleIncreaseVolume:(id)volume
{
  v4 = [volume objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
  }

  else
  {
    LODWORD(v5) = 1028443341;
  }

  [(VOTElementManager *)self _handleVolumeChange:v5];
}

- (void)_handleDecreaseVolume:(id)volume
{
  v4 = [volume objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
    *&v5 = -*&v5;
  }

  else
  {
    LODWORD(v5) = -1119040307;
  }

  [(VOTElementManager *)self _handleVolumeChange:v5];
}

- (void)_handleSystemVolumeChange:(float)change
{
  v5 = +[VOTOutputManager outputManager];
  [v5 volume];
  v7 = v6;

  v8 = (v7 + change) * 100.0;
  if (v8 % 5 <= 2)
  {
    v9 = 0;
  }

  else
  {
    v9 = 5;
  }

  v10 = fmax((5 * (v8 / 5) + v9) / 100.0, 0.0500000007);
  if (v10 <= 1.0)
  {
    v11 = v10;
  }

  else
  {
    v11 = 1.0;
  }

  v12 = VOTLogEvent();
  if (os_log_type_enabled(v12, OS_LOG_TYPE_INFO))
  {
    v13 = [NSNumber numberWithDouble:v7];
    v14 = [NSNumber numberWithDouble:v11];
    v21 = 138412546;
    v22 = v13;
    v23 = 2112;
    v24 = v14;
    _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_INFO, "Set system volume from %@ to %@", &v21, 0x16u);
  }

  v15 = +[VOTOutputManager outputManager];
  v16 = v11;
  *&v17 = v16;
  [v15 setSystemVolume:v17];

  v18 = [objc_allocWithZone(VOTOutputRequest) init];
  v19 = AXFormatFloatWithPercentage();
  v20 = [v18 addString:v19];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v18];
  [(VOTElementManager *)self sendRequest:v18];
}

- (void)_handleIncreaseSystemVolume:(id)volume
{
  v4 = [volume objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
  }

  else
  {
    LODWORD(v5) = 1028443341;
  }

  [(VOTElementManager *)self _handleSystemVolumeChange:v5];
}

- (void)_handleDecreaseSystemVolume:(id)volume
{
  v4 = [volume objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
    *&v5 = -*&v5;
  }

  else
  {
    LODWORD(v5) = -1119040307;
  }

  [(VOTElementManager *)self _handleSystemVolumeChange:v5];
}

- (void)_handleStateReset
{
  [(VOTElementManager *)self _resetElementLabel];
  [(VOTElementManager *)self _stopReadAll];
  [(VOTElementManager *)self _endTextSearchMode];
  if (self->_flags.itemChooserVisible)
  {
    [(VOTElementManager *)self _closeItemChooser];
  }

  flowFromElements = self->_flowFromElements;

  [(NSMutableDictionary *)flowFromElements removeAllObjects];
}

- (void)_handlePlayPauseButtonPress
{
  self->_flags.shouldSpeakNextLayoutChange = 0;
  if (![(VOTElementManager *)self _shouldSuppressSpeechForPlayPause])
  {
    self->_lastScreenWakeViaPlayPause = CFAbsoluteTimeGetCurrent();
  }
}

- (void)handleHomeButtonPress
{
  v3 = VOTLogLayoutChange();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D9A0();
  }

  [(SCRCThread *)self->_elementManagerThread performSelector:"_handleHomeButtonPress" onTarget:self count:0 objects:0];
}

- (void)_handleHomeButtonPress
{
  self->_lastItemSelectionFromTouch = -3061152000.0;
  [(VOTElementManager *)self setLastHomeButtonPressTime:CFAbsoluteTimeGetCurrent()];
  firstObject = +[VOTOutputManager outputManager];
  v4 = +[VOSOutputEvent ScreenDidChange];
  [firstObject sendEvent:v4];

  v5 = [(NSArray *)self->_currentApplications count];
  if (v5 == 1)
  {
    firstObject = [(NSArray *)self->_currentApplications firstObject];
    if ([firstObject isSpringBoard])
    {
      goto LABEL_8;
    }
  }

  v6 = +[VOTElement springBoardApplication];
  isVoiceControlRunning = [v6 isVoiceControlRunning];

  if (v5 == 1)
  {
  }

  if ((isVoiceControlRunning & 1) == 0)
  {
    v8 = +[VOTWorkspace sharedWorkspace];
    currentCallState = [v8 currentCallState];

    if (!currentCallState)
    {
      firstObject = [VOTSharedWorkspace selectedLanguage];
      v10 = sub_1000516CC(off_1001FDDD0, @"home.button.pressed", 0, firstObject);
      v11 = sub_1000095FC(v10, 1, firstObject);

LABEL_8:
    }
  }

  v12 = +[VOTElement systemAppApplication];
  v20 = v12;
  v13 = [NSArray arrayWithObjects:&v20 count:1];
  currentApplications = self->_currentApplications;
  self->_currentApplications = v13;

  firstObject2 = [(NSArray *)self->_currentApplications firstObject];
  firstElementInApplication = [firstObject2 firstElementInApplication];

  v17 = [(VOTElementManager *)self _cachedLaunchIcon:firstElementInApplication];
  v18 = v17;
  if (v17)
  {
    v19 = v17;

    firstElementInApplication = v19;
  }

  [(VOTElementManager *)self _echoDifferentElement:firstElementInApplication forEvent:0];
  AXPerformBlockOnMainThreadAfterDelay();
}

- (void)updateRunningApplications
{
  v5 = +[VOTWorkspace sharedWorkspace];
  focusedApplications = [v5 focusedApplications];
  currentApplications = self->_currentApplications;
  self->_currentApplications = focusedApplications;
}

- (void)_handleSiriFinishedTalking:(id)talking
{
  [VOTSharedWorkspace setIsSiriTalking:0];
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastBlockedRequestBySiriOrDictationTime];
  if (Current - v5 < 0.1)
  {
    lastRequestBlockedBySiriOrDictation = [(VOTElementManager *)self lastRequestBlockedBySiriOrDictation];
    [lastRequestBlockedBySiriOrDictation send];
  }

  [(VOTElementManager *)self setLastRequestBlockedBySiriOrDictation:0];
}

- (void)_handleSiriStartedListening:(id)listening
{
  [VOTSharedWorkspace setIsSiriListening:1];
  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0];
}

- (void)_handleToggleVoiceOverModifierKeyLock:(id)lock
{
  v3 = +[VOTKeyboardManager keyboardManager];
  [v3 toggleVoiceOverModifierKeyLock];

  v4 = +[VOTKeyboardManager keyboardManager];
  modifierKeyLockEnabled = [v4 modifierKeyLockEnabled];

  if (modifierKeyLockEnabled)
  {
    v6 = @"modifier.keys.locked";
  }

  else
  {
    v6 = @"modifier.keys.unlocked";
  }

  v9 = sub_1000511CC(off_1001FDDD0, v6, 0);
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v8 = sub_1000095FC(v9, 0, selectedLanguage);
}

- (void)_handleToggleSingleLetterQuickNav:(id)nav
{
  allowSingleLetterSearching = [VOTSharedWorkspace allowSingleLetterSearching];
  [VOTSharedWorkspace setAllowSingleLetterSearching:allowSingleLetterSearching ^ 1];
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v4 = +[VOTBrailleManager manager];
  [v4 setSingleLetterQuickNavOn:{objc_msgSend(VOTSharedWorkspace, "allowSingleLetterSearching")}];

  v5 = +[VOTKeyboardManager keyboardManager];
  isQuickNavOn = [v5 isQuickNavOn];

  v7 = +[VOTOutputManager outputManager];
  if (isQuickNavOn)
  {
    +[VOSOutputEvent DidEnableQuickNav];
  }

  else
  {
    +[VOSOutputEvent DidDisableQuickNav];
  }
  v8 = ;
  [v7 sendEvent:v8];

  if (allowSingleLetterSearching)
  {
    v9 = @"single.letter.quick.nav.off";
  }

  else
  {
    v9 = @"single.letter.quick.nav.on";
  }

  v10 = sub_1000511CC(off_1001FDDD0, v9, 0);
  v11 = sub_1000511CC(off_1001FDDD0, v9, 0);
  v12 = off_1001FDDD0;
  v13 = +[VOTKeyboardManager keyboardManager];
  if ([v13 isQuickNavOn])
  {
    v14 = @"quick.nav.on";
  }

  else
  {
    v14 = @"quick.nav.off";
  }

  v15 = sub_1000511CC(v12, v14, 0);
  v16 = [NSString stringWithFormat:@"%@, %@", v11, v15];

  v17 = [objc_allocWithZone(VOTOutputRequest) init];
  v18 = [v17 addString:v10 brailleString:v16 withLanguage:selectedLanguage];
  [v17 setGeneratesBraille:1];
  outputActions = [v17 outputActions];
  lastObject = [outputActions lastObject];
  [lastObject setObject:&__kCFBooleanTrue forVariant:76];

  sub_100009588(v17);
  [v17 send];
}

- (void)_handleToggleQuickNav:(id)nav
{
  v4 = +[VOTKeyboardManager keyboardManager];
  isQuickNavOn = [v4 isQuickNavOn];

  v6 = +[VOTKeyboardManager keyboardManager];
  [v6 updateQuickNavState:isQuickNavOn ^ 1];

  [(VOTElementManager *)self _handleAnnounceQuickNav:0];
  v8 = +[VOTConfiguration rootConfiguration];
  v7 = [NSNumber numberWithBool:isQuickNavOn ^ 1];
  [v8 setPreference:v7 forKey:@"VOTQuickNavEnabled"];
}

- (void)_handleAnnounceQuickNav:(id)nav
{
  v4 = +[VOTKeyboardManager keyboardManager];
  isQuickNavOn = [v4 isQuickNavOn];

  [(VOTElementManager *)self _handleQuickNavFeedback:isQuickNavOn];
  v7 = +[VOTConfiguration rootConfiguration];
  v6 = [NSNumber numberWithBool:isQuickNavOn];
  [v7 setPreference:v6 forKey:@"VOTQuickNavEnabled"];
}

- (void)_handleQuickNavFeedback:(BOOL)feedback
{
  feedbackCopy = feedback;
  v4 = +[AXSettings sharedInstance];
  voiceOverQuickNavAnnouncementFeedback = [v4 voiceOverQuickNavAnnouncementFeedback];

  v21 = +[VOTOutputRequest createRequest];
  if ((voiceOverQuickNavAnnouncementFeedback & 2) != 0)
  {
    v6 = @"quick.nav.off";
    if (feedbackCopy)
    {
      v6 = @"quick.nav.on";
    }

    v7 = VOTSharedWorkspace;
    v8 = v6;
    selectedLanguage = [v7 selectedLanguage];
    v10 = sub_1000516CC(off_1001FDDD0, v8, 0, selectedLanguage);

    v11 = [v21 addString:v10 withLanguage:selectedLanguage];
    if ((voiceOverQuickNavAnnouncementFeedback & 8) != 0)
    {
      lastAction = [v21 lastAction];
      [lastAction setObject:&off_1001D9950 forVariant:32];
    }

    if ((voiceOverQuickNavAnnouncementFeedback & 4) == 0)
    {
LABEL_3:
      if ((voiceOverQuickNavAnnouncementFeedback & 0x10) == 0)
      {
        goto LABEL_23;
      }

      goto LABEL_17;
    }
  }

  else if ((voiceOverQuickNavAnnouncementFeedback & 4) == 0)
  {
    goto LABEL_3;
  }

  if (feedbackCopy)
  {
    +[VOSOutputEvent DidEnableQuickNav];
  }

  else
  {
    +[VOSOutputEvent DidDisableQuickNav];
  }
  v13 = ;
  lastAction2 = [v21 lastAction];
  v15 = lastAction2;
  if (lastAction2)
  {
    [lastAction2 addOutputEvent:v13];
  }

  else
  {
    v16 = +[VOTOutputManager outputManager];
    [v16 sendEvent:v13];
  }

  if ((voiceOverQuickNavAnnouncementFeedback & 0x10) == 0)
  {
    goto LABEL_23;
  }

LABEL_17:
  if ((voiceOverQuickNavAnnouncementFeedback & 2) == 0)
  {
    if (feedbackCopy)
    {
      v17 = @"quick.nav.on";
    }

    else
    {
      v17 = @"quick.nav.off";
    }

    v18 = sub_1000511CC(off_1001FDDD0, v17, 0);
    v19 = [v21 addString:v18];
    lastAction3 = [v21 lastAction];
    [lastAction3 setObject:&__kCFBooleanTrue forVariant:76];

    [v21 setLimitToComponentType:3];
  }

  [v21 setGeneratesBraille:1];
LABEL_23:
  [v21 setCannotBeInterrupted:1];
  [v21 send];
}

- (void)fetchElementsFrom:(id)from inDirection:(int64_t)direction count:(unint64_t)count scroll:(BOOL)scroll block:(id)block
{
  scrollCopy = scroll;
  elementManagerThread = self->_elementManagerThread;
  blockCopy = block;
  fromCopy = from;
  v18 = [NSNumber numberWithInteger:direction];
  v15 = [NSNumber numberWithUnsignedInteger:count];
  v16 = [NSNumber numberWithBool:scrollCopy];
  v17 = objc_retainBlock(blockCopy);

  [(SCRCThread *)elementManagerThread performSelector:"_fetchElementsFrom:inDirection:count:scroll:block:" onTarget:self count:5 objects:fromCopy, v18, v15, v16, v17];
}

- (void)_fetchElementsFrom:(id)from inDirection:(id)direction count:(id)count scroll:(id)scroll block:(id)block
{
  blockCopy = block;
  scrollCopy = scroll;
  countCopy = count;
  directionCopy = direction;
  fromCopy = from;
  _getNewElementExplorer = [(VOTElementManager *)self _getNewElementExplorer];
  integerValue = [directionCopy integerValue];

  unsignedIntegerValue = [countCopy unsignedIntegerValue];
  bOOLValue = [scrollCopy BOOLValue];

  [_getNewElementExplorer fetchElementsFrom:fromCopy inDirection:integerValue count:unsignedIntegerValue scroll:bOOLValue block:blockCopy];
}

- (id)_getNewElementExplorer
{
  v3 = [_VOTElementExplorer alloc];
  _copyMatchBlockAnyElement = [(VOTElementManager *)self _copyMatchBlockAnyElement];
  v5 = [(_VOTElementExplorer *)v3 initWithElementManager:self MatchBlock:_copyMatchBlockAnyElement];

  [(NSLock *)self->_explorersLock lock];
  [(NSMutableArray *)self->_explorers addObject:v5];
  [(NSLock *)self->_explorersLock unlock];

  return v5;
}

- (void)removeElementExplorer:(id)explorer
{
  explorersLock = self->_explorersLock;
  explorerCopy = explorer;
  [(NSLock *)explorersLock lock];
  [(NSMutableArray *)self->_explorers removeObject:explorerCopy];

  v6 = self->_explorersLock;

  [(NSLock *)v6 unlock];
}

- (void)_sendBSIStateChangedNotification:(BOOL)notification usage:(int64_t)usage preferSingleHand:(BOOL)hand
{
  handCopy = hand;
  v12[0] = @"VOTBSIStateChangedNotificationActive";
  v7 = [NSNumber numberWithBool:?];
  v13[0] = v7;
  v12[1] = @"VOTBSIStateChangedNotificationUsage";
  v8 = [NSNumber numberWithInteger:usage];
  v13[1] = v8;
  v12[2] = @"VOTBSIStateChangedNotificationPreferSingleHand";
  v9 = [NSNumber numberWithBool:handCopy];
  v13[2] = v9;
  v10 = [NSDictionary dictionaryWithObjects:v13 forKeys:v12 count:3];

  v11 = v10;
  AXPerformBlockOnMainThreadAfterDelay();
}

- (void)deactivateGesturedTextInputIfNeeded:(BOOL)needed
{
  elementManagerThread = self->_elementManagerThread;
  v5 = [NSNumber numberWithBool:needed];
  [(SCRCThread *)elementManagerThread performSelector:"_deactivateGesturedTextInputIfNeeded:" onTarget:self count:1 objects:v5];
}

- (void)_deactivateGesturedTextInputIfNeeded:(id)needed
{
  neededCopy = needed;
  if (([VOTSharedWorkspace brailleInputWantsToStayActive] & 1) == 0 && !-[VOTElementManager forceRotorOffGesturedTextInputIfNeeded:](self, "forceRotorOffGesturedTextInputIfNeeded:", objc_msgSend(neededCopy, "BOOLValue")) && objc_msgSend(VOTSharedWorkspace, "brailleInputActive"))
  {
    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }
}

- (void)_handleActivateBrailleScreenInput:(id)input
{
  v4 = +[AXSettings sharedInstance];
  voiceOverTouchBrailleGesturesActivationGestureEnabled = [v4 voiceOverTouchBrailleGesturesActivationGestureEnabled];

  if (voiceOverTouchBrailleGesturesActivationGestureEnabled && ([VOTSharedWorkspace brailleInputActive] & 1) == 0)
  {
    if (self->_flags.shouldUpdateRotorForElement)
    {
      [(VOTElementManager *)self _updateRotorForCurrentElement];
    }

    if ([(VOTRotor *)self->_elementRotor indexOfRotorItem:61]== -1)
    {

      [(VOTElementManager *)self _sendBSIStateChangedNotification:1 usage:0];
    }

    else
    {
      v6 = VOTLogBrailleGestures();
      if (os_log_type_enabled(v6, OS_LOG_TYPE_DEFAULT))
      {
        *v7 = 0;
        _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_DEFAULT, "Activate BSI: BSI in the rotor. Setting the rotor to BSI.", v7, 2u);
      }

      [(VOTElementManager *)self _setElementRotorToType:61 saveToPreferences:1 userInitiated:1];
    }
  }
}

- (void)_handleActivateBrailleScreenInputCommand:(id)command
{
  v4 = +[AXSettings sharedInstance];
  voiceOverTouchBrailleGesturesActivationGestureEnabled = [v4 voiceOverTouchBrailleGesturesActivationGestureEnabled];

  if (voiceOverTouchBrailleGesturesActivationGestureEnabled && ([VOTSharedWorkspace brailleInputActive] & 1) == 0)
  {

    [(VOTElementManager *)self _sendBSIStateChangedNotification:1 usage:1];
  }
}

- (void)_handleActivateBrailleScreenInputPreferringSingleHand:(id)hand
{
  if (([VOTSharedWorkspace brailleInputActive] & 1) == 0)
  {

    [(VOTElementManager *)self _sendBSIStateChangedNotification:1 usage:0 preferSingleHand:1];
  }
}

- (void)_handleDeactivateBrailleScreenInput:(id)input
{
  if ([VOTSharedWorkspace brailleInputActive])
  {
    if (self->_flags.shouldUpdateRotorForElement)
    {
      [(VOTElementManager *)self _updateRotorForCurrentElement];
    }

    if ([(VOTRotor *)self->_elementRotor currentRotorType]== 61)
    {
      brailleInputShouldBeDeactivatedByEscape = [VOTSharedWorkspace brailleInputShouldBeDeactivatedByEscape];
      previousRotorType = [(VOTRotor *)self->_elementRotor previousRotorType];
      if (sub_1000F8768(previousRotorType) || [(VOTRotor *)self->_elementRotor indexOfRotorItem:previousRotorType]== -1)
      {
        v8 = VOTLogBrailleGestures();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
        {
          LOWORD(v9) = 0;
          _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_DEFAULT, "Deactivate BSI: force rotor off gestured text input if needed.", &v9, 2u);
        }

        [(VOTElementManager *)self forceRotorOffGesturedTextInputIfNeeded:0];
        if (brailleInputShouldBeDeactivatedByEscape)
        {
          goto LABEL_18;
        }
      }

      else
      {
        v6 = VOTLogBrailleGestures();
        if (os_log_type_enabled(v6, OS_LOG_TYPE_DEFAULT))
        {
          v7 = [NSNumber numberWithInteger:previousRotorType];
          v9 = 138412290;
          v10 = v7;
          _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_DEFAULT, "Deactivate BSI: setting rotor to the previous one (%@).", &v9, 0xCu);
        }

        [(VOTElementManager *)self _setElementRotorToType:previousRotorType saveToPreferences:1 userInitiated:1];
        if (brailleInputShouldBeDeactivatedByEscape)
        {
          goto LABEL_18;
        }
      }

      [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
LABEL_18:
      [(VOTElementManager *)self _outputCurrentElementRotor];
      return;
    }

    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }
}

- (void)_handleReconnectBrailleDisplays:(id)displays
{
  v3 = VOTLogBraille();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEFAULT))
  {
    *v12 = 0;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_DEFAULT, "Posting kAXSVoiceOverTouchBrailleReconnectionTriggeredNotification", v12, 2u);
  }

  DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
  CFNotificationCenterPostNotification(DarwinNotifyCenter, kAXSVoiceOverTouchBrailleReconnectionTriggeredNotification, 0, 0, 1u);
  v5 = +[VOTOutputManager outputManager];
  v6 = +[VOSOutputEvent BrailleDisplayReconnectionTriggered];
  [v5 sendEvent:v6];

  v7 = objc_alloc_init(VOTOutputRequest);
  v8 = off_1001FDDD0;
  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = sub_1000516CC(v8, @"braille.display.reconnection.triggered", 0, selectedLanguage);
  v11 = [(VOTOutputRequest *)v7 addString:v10];

  [(VOTOutputRequest *)v7 send];
}

- (void)_handleTogglePerkinsKeyboardInput:(id)input
{
  perkinsKeyboardInputEnabled = [VOTSharedWorkspace perkinsKeyboardInputEnabled];
  [VOTSharedWorkspace setPerkinsKeyboardInputEnabled:perkinsKeyboardInputEnabled ^ 1];
  if (perkinsKeyboardInputEnabled)
  {
    v4 = @"perkins.keyboard.input.off";
  }

  else
  {
    v4 = @"perkins.keyboard.input.on";
  }

  v5 = sub_1000511CC(off_1001FDDD0, v4, 0);
  v6 = +[VOTOutputManager outputManager];
  [v6 speakSimpleString:v5];

  v7 = VOTLogBraille();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
  {
    v8 = [NSNumber numberWithBool:perkinsKeyboardInputEnabled ^ 1];
    v9 = 138412290;
    v10 = v8;
    _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "Braille Keyboard Input: %@", &v9, 0xCu);
  }
}

- (void)_handleToggleKeyboardBraileUI:(id)i
{
  keyboardBrailleUIEnabled = [VOTSharedWorkspace keyboardBrailleUIEnabled];
  [VOTSharedWorkspace setKeyboardBrailleUIEnabled:keyboardBrailleUIEnabled ^ 1];
  v4 = +[VOTBrailleManager manager];
  [v4 setBrailleUIActive:keyboardBrailleUIEnabled ^ 1 withOptions:&__NSDictionary0__struct];
}

- (void)_handleToggleBrailleUI:(id)i
{
  v3 = +[VOTBrailleManager manager];
  [v3 toggleBrailleUIActive];
}

- (void)_handleActivateBrailleUI:(id)i
{
  iCopy = i;
  v5 = +[VOTBrailleManager manager];
  command = [iCopy command];

  [v5 activateBrailleUIWithCommand:command];
}

- (void)_handleBSIPreviousRotor:(id)rotor
{
  rotorCopy = rotor;
  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 61)
  {
    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }

  [(VOTElementManager *)self _handleSearchRotorLeft:rotorCopy];
}

- (void)_handleBSINextRotor:(id)rotor
{
  rotorCopy = rotor;
  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 61)
  {
    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }

  [(VOTElementManager *)self _handleSearchRotorRight:rotorCopy];
}

- (void)_handleBrailleEvent:(id)event
{
  eventCopy = event;
  v4 = +[VOTBrailleManager manager];
  [v4 handleEvent:eventCopy];
}

- (void)_handleBrailleRefreshEvent:(id)event
{
  eventCopy = event;
  v9 = +[VOTBrailleManager manager];
  _currentElement = [(VOTElementManager *)self _currentElement];
  v6 = [eventCopy objectForIndex:106];
  bOOLValue = [v6 BOOLValue];
  v8 = [eventCopy objectForIndex:109];

  [v9 setBrailleElement:_currentElement resetBrailleCursor:bOOLValue rotorSelection:v8];
}

- (void)_handleBrailleWordWrapToggleEvent:(id)event
{
  v4 = +[AXSettings sharedInstance];
  voiceOverBrailleWordWrapEnabled = [v4 voiceOverBrailleWordWrapEnabled];

  v6 = +[AXSettings sharedInstance];
  [v6 setVoiceOverBrailleWordWrapEnabled:voiceOverBrailleWordWrapEnabled ^ 1];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v11 = selectedLanguage;
  if (voiceOverBrailleWordWrapEnabled)
  {
    v8 = @"braille.word.wrap.off";
  }

  else
  {
    v8 = @"braille.word.wrap.on";
  }

  v9 = sub_1000516CC(off_1001FDDD0, v8, 0, selectedLanguage);
  v10 = sub_1000095FC(v9, 0, v11);

  [(VOTElementManager *)self _handleBrailleRefreshEvent:0];
}

- (void)_handleBrailleEnableAutoAdvance:(id)advance
{
  v3 = +[VOTBrailleManager manager];
  autoAdvanceEnabled = [v3 autoAdvanceEnabled];

  v5 = +[VOTBrailleManager manager];
  [v5 setAutoAdvanceEnabled:autoAdvanceEnabled ^ 1];

  selectedLanguage = [VOTSharedWorkspace selectedLanguage];
  v10 = selectedLanguage;
  if (autoAdvanceEnabled)
  {
    v7 = @"braille.auto.advance.off";
  }

  else
  {
    v7 = @"braille.auto.advance.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, selectedLanguage);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleBrailleDecreaseAutoAdvanceSpeed:(id)speed
{
  [(VOTElementManager *)self _brailleAutoAdvanceStepFactor];
  v5 = v4;
  v6 = +[AXSettings sharedInstance];
  [v6 voiceOverBrailleAutoAdvanceDuration];
  v8 = v5 * v7;

  if (v8 >= kAXSVoiceOverBrailleAutoAdvanceDurationMax)
  {
    v8 = kAXSVoiceOverBrailleAutoAdvanceDurationMax;
  }

  v9 = +[AXSettings sharedInstance];
  [v9 voiceOverBrailleAutoAdvanceDuration];
  v11 = v10;

  if (vabdd_f64(v8, v11) >= 0.0001)
  {
    v13 = +[AXSettings sharedInstance];
    [v13 setVoiceOverBrailleAutoAdvanceDuration:v8];

    [(VOTElementManager *)self _speakBrailleAutoAdvanceSpeed];
  }

  else
  {
    v14 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent BoundaryEncountered];
    [v14 sendEvent:v12];
  }
}

- (void)_handleBrailleIncreaseAutoAdvanceSpeed:(id)speed
{
  [(VOTElementManager *)self _brailleAutoAdvanceStepFactor];
  v5 = v4;
  v6 = +[AXSettings sharedInstance];
  [v6 voiceOverBrailleAutoAdvanceDuration];
  v8 = v7 / v5;

  if (v8 < kAXSVoiceOverBrailleAutoAdvanceDurationMin)
  {
    v8 = kAXSVoiceOverBrailleAutoAdvanceDurationMin;
  }

  v9 = +[AXSettings sharedInstance];
  [v9 voiceOverBrailleAutoAdvanceDuration];
  v11 = v10;

  if (vabdd_f64(v8, v11) >= 0.0001)
  {
    v13 = +[AXSettings sharedInstance];
    [v13 setVoiceOverBrailleAutoAdvanceDuration:v8];

    [(VOTElementManager *)self _speakBrailleAutoAdvanceSpeed];
  }

  else
  {
    v14 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent BoundaryEncountered];
    [v14 sendEvent:v12];
  }
}

- (id)_brailleAutoAdvanceSpeedString
{
  v3 = +[AXSettings sharedInstance];
  [v3 voiceOverBrailleAutoAdvanceDuration];
  v5 = v4;

  [(VOTElementManager *)self _brailleAutoAdvanceStepFactor];
  v6 = +[AXSettings sharedInstance];
  [v6 voiceOverBrailleAutoAdvanceDuration];

  v7.n128_f32[0] = round(v5 * 10.0) / 10.0;

  return _AXTimeStringForType(1, v7);
}

- (void)_speakBrailleAutoAdvanceSpeed
{
  v5 = [objc_allocWithZone(VOTOutputRequest) init];
  _brailleAutoAdvanceSpeedString = [(VOTElementManager *)self _brailleAutoAdvanceSpeedString];
  v4 = [v5 addString:_brailleAutoAdvanceSpeedString];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v5];
  [(VOTElementManager *)self sendRequest:v5];
}

- (void)_activateBrailleScreenInputIfNeededForElement:(id)element
{
  if ([element doesHaveAllTraits:kAXIsEditingTrait | kAXTextEntryTrait])
  {
    v4 = +[AXSettings sharedInstance];
    if ([v4 voiceOverBrailleGesturesEnabled])
    {
      brailleStartAutoActivateOnTextFields = [VOTSharedWorkspace brailleStartAutoActivateOnTextFields];

      if (brailleStartAutoActivateOnTextFields)
      {
        AXPerformBlockOnMainThreadAfterDelay();
      }
    }

    else
    {
    }
  }
}

- (void)_handleKeyboardCommandEvent:(id)event
{
  eventCopy = event;
  v74 = eventCopy;
  if (!self->_keyboardKeyCommands)
  {
    v58 = objc_allocWithZone(NSDictionary);
    v64 = [NSNumber numberWithUnsignedShort:79];
    selfCopy = self;
    v73 = [NSArray arrayWithObjects:v64, &stru_1001CBF90, 0];
    v55 = kVOTEventCommandRightArrow;
    v63 = [NSNumber numberWithUnsignedShort:80];
    v72 = [NSArray arrayWithObjects:v63, &stru_1001CBF90, 0];
    v54 = kVOTEventCommandLeftArrow;
    v62 = [NSNumber numberWithUnsignedShort:81];
    v71 = [NSArray arrayWithObjects:v62, &stru_1001CBF90, 0];
    v51 = kVOTEventCommandDownArrow;
    v61 = [NSNumber numberWithUnsignedShort:82];
    v70 = [NSArray arrayWithObjects:v61, &stru_1001CBF90, 0];
    v50 = kVOTEventCommandUpArrow;
    v60 = [NSNumber numberWithUnsignedShort:42];
    v59 = [NSString stringWithUnichar:127];
    v69 = [NSArray arrayWithObjects:v60, v59, 0];
    v46 = kVOTEventCommandDelete;
    v57 = [NSNumber numberWithUnsignedShort:40];
    v56 = [NSString stringWithUnichar:10];
    v68 = [NSArray arrayWithObjects:v57, v56, 0];
    v43 = kVOTEventCommandReturn;
    v53 = [NSNumber numberWithUnsignedShort:43];
    v52 = [NSString stringWithUnichar:9];
    v67 = [NSArray arrayWithObjects:v53, v52, 0];
    v42 = kVOTEventCommandTab;
    v49 = [NSNumber numberWithUnsignedShort:43];
    v48 = [NSString stringWithUnichar:9];
    v47 = [NSNumber numberWithUnsignedInteger:8];
    v39 = [NSArray arrayWithObjects:v49, v48, v47, 0];
    v38 = kVOTEventCommandShiftTab;
    v45 = [NSNumber numberWithUnsignedShort:27];
    v44 = [NSNumber numberWithUnsignedInteger:1];
    v66 = [NSArray arrayWithObjects:v45, @"x", v44, 0];
    v35 = kVOTEventCommandCut;
    v41 = [NSNumber numberWithUnsignedShort:6];
    v40 = [NSNumber numberWithUnsignedInteger:1];
    v32 = [NSArray arrayWithObjects:v41, @"c", v40, 0];
    v31 = kVOTEventCommandCopy;
    v37 = [NSNumber numberWithUnsignedShort:25];
    v36 = [NSNumber numberWithUnsignedInteger:1];
    v30 = [NSArray arrayWithObjects:v37, @"v", v36, 0];
    v28 = kVOTEventCommandPaste;
    v34 = [NSNumber numberWithUnsignedShort:4];
    v33 = [NSNumber numberWithUnsignedInteger:1];
    v5 = [NSArray arrayWithObjects:v34, @"a", v33, 0];
    v6 = kVOTEventCommandSelectAll;
    v29 = [NSNumber numberWithUnsignedShort:29];
    v7 = [NSNumber numberWithUnsignedInteger:1];
    v8 = [NSArray arrayWithObjects:v29, @"z", v7, 0];
    v9 = kVOTEventCommandUndo;
    v10 = [NSNumber numberWithUnsignedShort:29];
    v11 = [NSNumber numberWithUnsignedInteger:9];
    v12 = [NSArray arrayWithObjects:v10, @"z", v11, 0];
    v27 = v6;
    self = selfCopy;
    v13 = [v58 initWithObjectsAndKeys:{v73, v55, v72, v54, v71, v51, v70, v50, v69, v46, v68, v43, v67, v42, v39, v38, v66, v35, v32, v31, v30, v28, v5, v27, v8, v9, v12, kVOTEventCommandRedo, 0}];
    keyboardKeyCommands = selfCopy->_keyboardKeyCommands;
    selfCopy->_keyboardKeyCommands = v13;

    eventCopy = v74;
  }

  command = [eventCopy command];
  v16 = [command isEqualToString:kVOTEventCommandPaste];

  if (v16)
  {
    _currentResponder = [(VOTElementManager *)self _currentResponder];
    textOperationsOperator = _currentResponder;
    if ([_currentResponder doesHaveTraits:kAXWebContentTrait])
    {
      textOperationsOperator = [_currentResponder textOperationsOperator];
    }

    [textOperationsOperator performTextOperation:kAXTextOperationActionPaste];
    v19 = +[VOTOutputManager outputManager];
    v20 = +[VOSOutputEvent DidSelectAutofill];
    [v19 sendEvent:v20];
  }

  else
  {
    v21 = self->_keyboardKeyCommands;
    command2 = [v74 command];
    _currentResponder = [(NSDictionary *)v21 objectForKey:command2];

    if (!_currentResponder)
    {
      goto LABEL_13;
    }

    v23 = [_currentResponder objectAtIndex:1];
    if ([_currentResponder count] < 3)
    {
      unsignedIntValue = 0;
    }

    else
    {
      v24 = [_currentResponder objectAtIndex:2];
      unsignedIntValue = [v24 unsignedIntValue];
    }

    v26 = VOTSharedWorkspace;
    textOperationsOperator = [_currentResponder objectAtIndex:0];
    [v26 postKeyboardEventWithCharacters:v23 originalCharacters:v23 modifiers:unsignedIntValue keyCode:{objc_msgSend(textOperationsOperator, "unsignedShortValue")}];
  }

LABEL_13:
}

- (BOOL)_processWatchSpecificOverrides:(id)overrides
{
  v4 = [overrides isEqualToString:kVOTEventCommandSelectAll];
  if (v4)
  {
    _currentResponder = [(VOTElementManager *)self _currentResponder];
    [_currentResponder performTextOperation:kAXTextOperationActionSelectAll];
  }

  return v4;
}

- (void)_handleDescribeCameraScene:(id)scene
{
  v4 = +[VOTWorkspace sharedWorkspace];
  imageCaptionsEnabled = [v4 imageCaptionsEnabled];

  if (imageCaptionsEnabled)
  {
    visionEngine = [VOTSharedWorkspace visionEngine];
    preferredMediaAnalysisLocale = [visionEngine preferredMediaAnalysisLocale];

    cameraSceneDescriber = [(VOTElementManager *)self cameraSceneDescriber];
    [cameraSceneDescriber setIncludeTextDetection:1];

    cameraSceneDescriber2 = [(VOTElementManager *)self cameraSceneDescriber];
    [cameraSceneDescriber2 imageDescriptionForCurrentCameraScene:&stru_1001CA248 withPreferredLocale:preferredMediaAnalysisLocale];
  }

  else
  {
    preferredMediaAnalysisLocale = objc_alloc_init(VOTOutputRequest);
    v9 = sub_100053524(@"NoCaptionModel");
    v10 = [(VOTOutputRequest *)preferredMediaAnalysisLocale addString:v9];

    [(VOTOutputRequest *)preferredMediaAnalysisLocale setLanguage:0];
    [(VOTOutputRequest *)preferredMediaAnalysisLocale setBrailleType:2];
    [(VOTOutputRequest *)preferredMediaAnalysisLocale setCannotBeInterrupted:1];
    [(VOTOutputRequest *)preferredMediaAnalysisLocale send];
  }
}

- (id)focusedApplication:(id)application
{
  applicationCopy = application;
  if ([(VOTElementManager *)self isOnElementManagerThread])
  {
    currentApplications = self->_currentApplications;
  }

  else
  {
    currentApplications = [(VOTElementManager *)self currentApplications];
  }

  v6 = currentApplications;
  appTransition = [applicationCopy appTransition];

  if (!appTransition)
  {
    goto LABEL_17;
  }

  v23 = 0u;
  v24 = 0u;
  v21 = 0u;
  v22 = 0u;
  v8 = v6;
  v9 = [(NSArray *)v8 countByEnumeratingWithState:&v21 objects:v25 count:16];
  if (!v9)
  {

LABEL_17:
    lastObject = [(NSArray *)v6 lastObject];
    goto LABEL_18;
  }

  v10 = v9;
  v20 = v6;
  lastObject = 0;
  v12 = *v22;
  do
  {
    for (i = 0; i != v10; i = i + 1)
    {
      if (*v22 != v12)
      {
        objc_enumerationMutation(v8);
      }

      v14 = *(*(&v21 + 1) + 8 * i);
      v15 = [v14 pid];
      appTransition2 = [applicationCopy appTransition];
      v17 = [appTransition2 pid];

      if (v15 == v17)
      {
        v18 = v14;

        lastObject = v18;
      }
    }

    v10 = [(NSArray *)v8 countByEnumeratingWithState:&v21 objects:v25 count:16];
  }

  while (v10);

  v6 = v20;
  if (!lastObject)
  {
    goto LABEL_17;
  }

LABEL_18:

  return lastObject;
}

- (BOOL)speakNonfocusableElementsAfterDelay
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  return self->_speakNonfocusableElementsAfterDelay;
}

- (void)setSpeakNonfocusableElementsAfterDelay:(BOOL)delay
{
  delayCopy = delay;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_speakNonfocusableElementsAfterDelay = delayCopy;
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSpeakNonfocusableElementsAfterDelay:delayCopy];
}

- (BOOL)shouldSilenceAnnouncements
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  return self->_shouldSilenceAnnouncements;
}

- (void)setShouldSilenceAnnouncements:(BOOL)announcements
{
  announcementsCopy = announcements;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_shouldSilenceAnnouncements = announcementsCopy;
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSilenceAnnouncements:announcementsCopy];
}

- (BOOL)exploreFocusAffectsNativeFocus
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  return self->_exploreFocusAffectsNativeFocus;
}

- (void)setExploreFocusAffectsNativeFocus:(BOOL)focus
{
  focusCopy = focus;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_exploreFocusAffectsNativeFocus = focusCopy;
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverExploreFocusAffectsNativeFocus:focusCopy];
}

- (BOOL)_isDictationInProgressForCurrentApp
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = [(VOTElementManager *)self focusedApplication:0];
  isDictationListening = [v3 isDictationListening];

  return isDictationListening;
}

- (BOOL)handleTVMenuButtonClicked
{
  if (self->_flags.itemChooserVisible)
  {
    [(VOTElementManager *)self _closeItemChooser];
    return 1;
  }

  if ([VOTSharedWorkspace tvInteractionMode] == 2)
  {
    [(SCRCThread *)self->_elementManagerThread performSelector:"__handleTVMenuButtonClicked" onTarget:self count:0 objects:0];
    return 1;
  }

  return 0;
}

- (void)__handleTVMenuButtonClicked
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ([VOTSharedWorkspace tvInteractionMode] == 2)
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    if (([_currentElement isContainedByPreferredNativeFocusElement] & 1) != 0 || objc_msgSend(_currentElement, "allowsActivationWithoutBeingNativeFocused"))
    {
      performEscape = [_currentElement performEscape];

      if (performEscape)
      {
        return;
      }
    }

    else
    {
    }
  }

  [(VOTElementManager *)self __sendTVRemoteCommand:6];
}

- (void)__handleTVSelectButtonClicked
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 54)
  {

    [(VOTElementManager *)self _handlePerformCustomAction:0];
    return;
  }

  if (self->_flags.itemChooserVisible)
  {

    [(VOTElementManager *)self _closeItemChooser];
    return;
  }

  if (![VOTSharedWorkspace tvInteractionMode] || objc_msgSend(VOTSharedWorkspace, "tvInteractionMode") == 1)
  {

    [(VOTElementManager *)self __sendTVRemoteCommand:4];
    return;
  }

  if ([VOTSharedWorkspace tvInteractionMode] == 2)
  {
    _currentElement = [(VOTElementManager *)self _currentElement];
    v10 = _currentElement;
    if (!_currentElement)
    {
      v5 = +[AXSystemAppServer server];
      isScreenSaverVisible = [v5 isScreenSaverVisible];

      if (isScreenSaverVisible)
      {
        [(VOTElementManager *)self __sendTVRemoteCommand:6];
      }

      goto LABEL_35;
    }

    if ([_currentElement allowsActivationWithoutBeingNativeFocused])
    {
      if ([v10 activateIfSupported])
      {
LABEL_35:

        return;
      }

      v4 = +[VOTOutputManager outputManager];
    }

    else
    {
      if ([v10 isContainedByPreferredNativeFocusElement])
      {
        if (([v10 activateIfSupported] & 1) == 0)
        {
          [(VOTElementManager *)self __sendTVRemoteCommand:4];
        }

        v4 = +[VOTOutputManager outputManager];
        v7 = +[VOSOutputEvent DidActivateElement];
        goto LABEL_34;
      }

      setNativeFocus = [v10 setNativeFocus];
      v4 = +[VOTOutputManager outputManager];
      if (setNativeFocus)
      {
        v7 = +[VOSOutputEvent DidFocusOnElement];
LABEL_34:
        v9 = v7;
        [v4 sendEvent:v7];

        goto LABEL_35;
      }
    }

    v7 = +[VOSOutputEvent BoundaryEncountered];
    goto LABEL_34;
  }

  _AXAssert();
}

- (BOOL)_sendTVRemoteCommandOverrideForAXCommand:(int64_t)command
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = command - 8;
  if ((command - 8) > 9 || ((0x303u >> v5) & 1) == 0)
  {
    return 0;
  }

  [(VOTElementManager *)self __sendTVRemoteCommand:qword_10017E430[v5]];
  return 1;
}

- (void)__sendTVRemoteCommand:(unint64_t)command
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = +[AXSettings sharedInstance];
  if ([v5 voiceOverUseTVToggleStyleNavigation])
  {
    tvIsInteractingWithRotor = [(VOTElementManager *)self tvIsInteractingWithRotor];

    if (tvIsInteractingWithRotor)
    {

      [(VOTElementManager *)self setTvIsInteractingWithRotor:0];
      return;
    }
  }

  else
  {
  }

  v7 = [(VOTElementManager *)self focusedApplication:0];
  v8 = 0.05;
  if (command > 3)
  {
    if (command <= 5)
    {
      if (command == 4)
      {
        v10 = 1219;
        v11 = 1218;
      }

      else
      {
        v10 = 1223;
        v11 = 1222;
      }

LABEL_32:
      v16 = [AXEventRepresentation buttonRepresentationWithType:v11];
      v12 = [AXEventRepresentation buttonRepresentationWithType:v10];
      v9 = v12;
      if (v16 && v12)
      {
        v13 = [NSMutableArray arrayWithObjects:v16, v12, 0];
        v14 = [NSNumber numberWithDouble:v8];
        v15 = [NSMutableArray arrayWithObjects:v14, &off_1001D9FE0, 0];

        [(VOTElementManager *)self __sendHIDEvents:v13 postEventDelays:v15];
      }

      goto LABEL_35;
    }

    if (command != 6)
    {
      v9 = 0;
      v16 = 0;
      if (command != 7)
      {
        goto LABEL_35;
      }

      v8 = 1.25;
    }

    v10 = 1217;
    v11 = 1216;
    goto LABEL_32;
  }

  if (command > 1)
  {
    if (command == 2)
    {
      if (([v7 applicationHandleRemoteDownButton] & 1) == 0)
      {
        v10 = 1203;
        v11 = 1202;
        goto LABEL_32;
      }
    }

    else if (([v7 applicationHandleRemoteLeftButton] & 1) == 0)
    {
      v10 = 1205;
      v11 = 1204;
      goto LABEL_32;
    }

    goto LABEL_30;
  }

  if (!command)
  {
    if (([v7 applicationHandleRemoteUpButton] & 1) == 0)
    {
      v10 = 1201;
      v11 = 1200;
      goto LABEL_32;
    }

LABEL_30:
    v16 = 0;
    v9 = 0;
    goto LABEL_35;
  }

  v9 = 0;
  v16 = 0;
  if (command == 1)
  {
    if (([v7 applicationHandleRemoteRightButton] & 1) == 0)
    {
      v10 = 1207;
      v11 = 1206;
      goto LABEL_32;
    }

    goto LABEL_30;
  }

LABEL_35:
}

- (void)__sendHIDEvents:(id)events postEventDelays:(id)delays
{
  eventsCopy = events;
  delaysCopy = delays;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v8 = [eventsCopy count];
  if (v8 == [delaysCopy count])
  {
    firstObject = [eventsCopy firstObject];
    firstObject2 = [delaysCopy firstObject];
    [firstObject2 doubleValue];
    v12 = v11;

    if (firstObject)
    {
      v13 = +[AXEventTapManager sharedManager];
      [v13 sendHIDSystemEvent:firstObject repostCreatorHIDEvent:0 senderID:0x8000000817319373];
    }

    [eventsCopy removeObjectAtIndex:0];
    [delaysCopy removeObjectAtIndex:0];
    if ([eventsCopy count])
    {
      v14 = dispatch_time(0, (v12 * 1000000000.0));
      v15 = dispatch_get_global_queue(2, 0);
      block[0] = _NSConcreteStackBlock;
      block[1] = 3221225472;
      block[2] = sub_1000AC5C4;
      block[3] = &unk_1001C8C70;
      block[4] = self;
      v17 = eventsCopy;
      v18 = delaysCopy;
      dispatch_after(v14, v15, block);
    }
  }

  else
  {
    _AXAssert();
  }
}

- (void)__tvOS_toggleAudioDescriptions
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (_AXSInUnitTestMode() || (-[VOTElementManager focusedApplication:](self, "focusedApplication:", 0), v3 = objc_claimAutoreleasedReturnValue(), v4 = [v3 fullscreenVideoViewIsVisible], v3, v4))
  {
    v5 = MAAudibleMediaPrefCopyPreferDescriptiveVideo();
    if (v5 || ([NSNumber numberWithBool:0], (v5 = objc_claimAutoreleasedReturnValue()) != 0))
    {
      v6 = v5;
      selectedLanguage = [VOTSharedWorkspace selectedLanguage];
      if (CFBooleanGetValue(v6))
      {
        v7 = @"audio.descriptions.disabled";
      }

      else
      {
        v7 = @"audio.descriptions.enabled";
      }

      MAAudibleMediaPrefSetPreferDescriptiveVideo();
      v8 = sub_1000516CC(off_1001FDDD0, v7, 0, selectedLanguage);
      v9 = sub_1000095FC(v8, 0, selectedLanguage);

      CFRelease(v6);
    }
  }
}

- (void)__tvOS_toggleSpeakNonfocusableElementsAfterDelayUserPreference
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self setSpeakNonfocusableElementsAfterDelay:[(VOTElementManager *)self speakNonfocusableElementsAfterDelay]^ 1];
  v3 = +[VOTWorkspace sharedWorkspace];
  selectedLanguage = [v3 selectedLanguage];

  if ([(VOTElementManager *)self speakNonfocusableElementsAfterDelay])
  {
    v4 = @"element.on.text";
  }

  else
  {
    v4 = @"element.off.text";
  }

  v5 = sub_1000516CC(off_1001FDDD0, v4, 0, selectedLanguage);
  [(VOTElementManager *)self _speak:v5 cannotBeInterrupted:0];
}

- (void)__tvOS_toggleSilenceAnnouncementsUserPreference
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self setShouldSilenceAnnouncements:[(VOTElementManager *)self shouldSilenceAnnouncements]^ 1];
  v3 = +[VOTWorkspace sharedWorkspace];
  selectedLanguage = [v3 selectedLanguage];

  if ([(VOTElementManager *)self shouldSilenceAnnouncements])
  {
    v4 = @"element.on.text";
  }

  else
  {
    v4 = @"element.off.text";
  }

  v5 = sub_1000516CC(off_1001FDDD0, v4, 0, selectedLanguage);
  [(VOTElementManager *)self _speak:v5 cannotBeInterrupted:0];
}

- (void)__tvOS_toggleExploreFocusAffectsNativeFocusPreference
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self setExploreFocusAffectsNativeFocus:[(VOTElementManager *)self exploreFocusAffectsNativeFocus]^ 1];
  v3 = +[VOTWorkspace sharedWorkspace];
  selectedLanguage = [v3 selectedLanguage];

  if ([(VOTElementManager *)self exploreFocusAffectsNativeFocus])
  {
    v4 = @"element.on.text";
  }

  else
  {
    v4 = @"element.off.text";
  }

  v5 = sub_1000516CC(off_1001FDDD0, v4, 0, selectedLanguage);
  [(VOTElementManager *)self _speak:v5 cannotBeInterrupted:0];
}

- (void)__updateElementVisuals
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  _currentElement = [(VOTElementManager *)self _currentElement];
  if (_currentElement)
  {
    v7 = _currentElement;
    explorerElementManager = [(VOTElementManager *)self explorerElementManager];
    currentExplorerElement = [explorerElementManager currentExplorerElement];

    _currentElement = v7;
    if (!currentExplorerElement)
    {
      [v7 updateFrame];
      [v7 updatePaths];
      v6 = +[VOTDisplayManager displayManager];
      [v6 setCursorFrameForElement:v7 animated:0];

      _currentElement = v7;
    }
  }
}

- (BOOL)_didFocusUpdateOriginateFromFocusedApp:(id)app
{
  appCopy = app;
  senderPID = [appCopy senderPID];
  if (senderPID == -1 || (v6 = senderPID, ([appCopy senderIsAppExtension] & 1) != 0) || objc_msgSend(appCopy, "reason") == 5 && (objc_msgSend(appCopy, "focusElement"), v7 = objc_claimAutoreleasedReturnValue(), v7, v7))
  {
    v8 = 0;
LABEL_6:
    v9 = 1;
    goto LABEL_7;
  }

  v8 = [(VOTElementManager *)self focusedApplication:appCopy];
  if ([v8 pid] == v6)
  {
    goto LABEL_6;
  }

  bundleIdentifier = [v8 bundleIdentifier];
  v12 = [bundleIdentifier isEqualToString:@"com.apple.PineBoard"];

  if (v12)
  {
    senderBundleID = [appCopy senderBundleID];
    if (([senderBundleID isEqualToString:@"com.apple.siri"] & 1) != 0 || (objc_msgSend(senderBundleID, "isEqualToString:", @"com.apple.TVWLAccessService") & 1) != 0 || objc_msgSend(senderBundleID, "isEqualToString:", @"com.apple.TVSystemMenuService"))
    {

      goto LABEL_6;
    }
  }

  v14 = VOTLogTVFocus();
  if (os_log_type_enabled(v14, OS_LOG_TYPE_ERROR))
  {
    v15 = [NSNumber numberWithInt:v6];
    senderBundleID2 = [appCopy senderBundleID];
    v17 = 138543874;
    v18 = v15;
    v19 = 2114;
    v20 = senderBundleID2;
    v21 = 2114;
    v22 = v8;
    _os_log_error_impl(&_mh_execute_header, v14, OS_LOG_TYPE_ERROR, "update focus request did not come from focused app. ignoring.\nSender PID: %{public}@. BundleID: %{public}@. \nCurrent App: %{public}@", &v17, 0x20u);
  }

  v9 = 0;
LABEL_7:

  return v9;
}

- (void)_tvOS_updateWithNativeFocus:(id)focus withDelayNumber:(id)number
{
  focusCopy = focus;
  [number doubleValue];
  [(VOTElementManager *)self _tvOS_updateWithNativeFocus:focusCopy withDelay:?];
}

- (void)_tvOS_updateWithNativeFocus:(id)focus withDelay:(double)delay
{
  focusCopy = focus;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (![(VOTElementManager *)self _isDictationInProgressForCurrentApp]&& [(VOTElementManager *)self _didFocusUpdateOriginateFromFocusedApp:focusCopy])
  {
    [(NSLock *)self->_tvAccessLock lock];
    self->_needsUpdateFocus = 1;
    [(VOTElementManager *)self setUpdateFocusContext:focusCopy];
    v7 = VOTLogTVFocus();
    if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
    {
      v8 = [NSNumber numberWithBool:self->_isUpdatingFocus];
      v9 = 138543874;
      v10 = v8;
      v11 = 2048;
      delayCopy = delay;
      v13 = 2114;
      v14 = focusCopy;
      _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "asking to update. isUpdating: %{public}@. delay: %.2f\n%{public}@", &v9, 0x20u);
    }

    [(SCRCTargetSelectorTimer *)self->_updateWithNativeFocusTimer dispatchAfterDelay:delay];
    [(NSLock *)self->_tvAccessLock unlock];
  }
}

- (void)_tvOS_handleUpdateWithNativeFocusFromTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (!self->_isUpdatingFocus)
  {
    self->_isUpdatingFocus = 1;

    [(VOTElementManager *)self _tvOS_updateWithNativeFocus];
  }
}

- (id)_focusElementForFocusUpdate:(id)update
{
  updateCopy = update;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = [(VOTElementManager *)self focusedApplication:updateCopy];
  focusElement = [updateCopy focusElement];
  if (!focusElement)
  {
    if (v5)
    {
      focusElement = [v5 nativeFocusPreferredElement];
    }

    else
    {
      v7 = VOTLogTVFocus();
      if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
      {
        *v9 = 0;
        _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "Suspicious: currentApp was nil", v9, 2u);
      }

      focusElement = 0;
    }

    [updateCopy setFocusElement:focusElement];
  }

  return focusElement;
}

- (void)_tvOS_retryUpdateWithNativeFocus
{
  [(VOTElementManager *)self setWaitingToRetryFocus:0];
  if ([(VOTElementManager *)self focusRetryAttempts]<= 0x13)
  {
    v3 = +[VOTOutputManager outputManager];
    isSpeaking = [v3 isSpeaking];

    if (isSpeaking)
    {
      [(VOTElementManager *)self setWaitingToRetryFocus:0];
      v5 = dispatch_time(0, (kSCRCThreadWaitShort * 1000000000.0));
      block[0] = _NSConcreteStackBlock;
      block[1] = 3221225472;
      block[2] = sub_1000AD248;
      block[3] = &unk_1001C76E8;
      block[4] = self;
      dispatch_after(v5, &_dispatch_main_q, block);
    }

    else
    {
      [(VOTElementManager *)self setFocusRetryAttempts:[(VOTElementManager *)self focusRetryAttempts]+ 1];

      [(VOTElementManager *)self _tvOS_updateWithNativeFocus];
    }
  }
}

- (void)_tvOS_updateWithNativeFocus
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (![(VOTElementManager *)self waitingToRetryFocus])
  {
    tvInteractionMode = [VOTSharedWorkspace tvInteractionMode];
    if (tvInteractionMode == 2 && CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime < 1.0 && ![(VOTElementManager *)self forceUpdateMask])
    {
      v31 = VOTLogTVFocus();
      if (os_log_type_enabled(v31, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v31, OS_LOG_TYPE_INFO, "Ignoring focusUpdate because a screen change was just handled", buf, 2u);
      }

      updateFocusContext = 0;
      v28 = 0;
      v14 = 0;
      v5 = 0;
      v9 = 0;
      self->_isUpdatingFocus = 0;
      goto LABEL_70;
    }

    updateFocusContext = 0;
    v48 = 0;
    v5 = 0;
    for (i = 0; ; i = v14)
    {
      v7 = updateFocusContext;
      self->_needsUpdateFocus = 0;
      [(NSLock *)self->_tvAccessLock lock];
      updateFocusContext = [(VOTElementManager *)self updateFocusContext];

      [(NSLock *)self->_tvAccessLock unlock];
      if (([updateFocusContext shouldIgnorePreviousFocusedElement] & 1) != 0 || -[VOTElementManager forceUpdateMask](self, "forceUpdateMask"))
      {
        tvSpeechRequestManager = [(VOTElementManager *)self tvSpeechRequestManager];
        [tvSpeechRequestManager reset];
      }

      v9 = [(VOTElementManager *)self _focusElementForFocusUpdate:updateFocusContext];

      v10 = VOTLogTVFocus();
      if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
      {
        *buf = 138543362;
        v51 = v9;
        _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "Update FocusElement Candidate: %{public}@", buf, 0xCu);
      }

      if (!v9)
      {
        break;
      }

      if (([v9 isEqual:i] & 1) != 0 || !objc_msgSend(v9, "differenceAspectMask:", i))
      {
        forceUpdateMask = [(VOTElementManager *)self forceUpdateMask];
        v12 = VOTLogTVFocus();
        v13 = os_log_type_enabled(v12, OS_LOG_TYPE_INFO);
        if (!forceUpdateMask)
        {
          if (v13)
          {
            *buf = 0;
            _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_INFO, "Pending and focus element the same after short delay. Going with original", buf, 2u);
          }

          goto LABEL_48;
        }

        if (v13)
        {
          *buf = 138543362;
          v51 = v9;
          _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_INFO, "Force update mask set. proceeding with element: %{public}@", buf, 0xCu);
        }
      }

      v14 = v9;

      if (tvInteractionMode == 2)
      {
        v15 = [(VOTElementManager *)self __targetElementForFocusElement:v14 mustBeAccessibilityElement:1];

        [(VOTElementRotor *)self->_elementRotor updateRotorForElement:v15 shouldPreserveRotorNavigation:1 firstResponder:self->_firstResponderElement];
      }

      else
      {
        v15 = v14;

        [(VOTElementRotor *)self->_elementRotor updateRotorForElement:v15 shouldPreserveRotorNavigation:1 firstResponder:self->_firstResponderElement];
        tvSpeechRequestManager2 = [(VOTElementManager *)self tvSpeechRequestManager];
        v17 = [tvSpeechRequestManager2 updateHeadersAndElementsWithTarget:v15 ignoreLastUpdate:{objc_msgSend(updateFocusContext, "shouldIgnorePreviousFocusedElement")}];

        if (v17)
        {
          v49 = 0;
          tvSpeechRequestManager3 = [(VOTElementManager *)self tvSpeechRequestManager];
          v19 = [tvSpeechRequestManager3 generateOutputRequest:&v49];

          if ((v49 & 1) == 0)
          {
            v20 = VOTLogTVFocus();
            if (os_log_type_enabled(v20, OS_LOG_TYPE_INFO))
            {
              *buf = 0;
              _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "result outputRequest same as last time. setting to nil", buf, 2u);
            }

            v19 = 0;
          }

          v48 = v19;
        }

        explorerElementManager = [(VOTElementManager *)self explorerElementManager];
        [explorerElementManager cancelCurrentReadAll];

        explorerElementManager2 = [(VOTElementManager *)self explorerElementManager];
        explorerElements = [explorerElementManager2 explorerElements];
        v24 = [explorerElements count];

        if (!v24)
        {
          self->_explorerElementsNeedUpdate = 1;
        }
      }

      v5 = v15;
      if (!self->_needsUpdateFocus)
      {
        v28 = v48;
        goto LABEL_50;
      }

      v25 = VOTLogTVFocus();
      if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "reject focus change. Going again", buf, 2u);
      }
    }

    v26 = VOTLogTVFocus();
    if (os_log_type_enabled(v26, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v26, OS_LOG_TYPE_INFO, "FocusElement was nil", buf, 2u);
    }

    [(VOTElementManager *)self setNativeFocusElement:0];
    tvSpeechRequestManager4 = [(VOTElementManager *)self tvSpeechRequestManager];
    [tvSpeechRequestManager4 reset];

    v28 = v48;
    if (tvInteractionMode == 2)
    {
      v14 = 0;
      goto LABEL_50;
    }

    v29 = +[VOTDisplayManager displayManager];
    [v29 setCursorFrameForElement:0];

    [(VOTElementRotor *)self->_elementRotor updateRotorForElement:0 shouldPreserveRotorNavigation:1 firstResponder:self->_firstResponderElement];
    v12 = [(VOTElementManager *)self __consumeAppTransitionForAnnouncingIfNeeded:updateFocusContext];
    if (v12)
    {
      v28 = objc_alloc_init(VOTOutputRequest);

      v30 = [(VOTOutputRequest *)v28 addString:v12 breakWords:0 withLanguage:0 atIndex:0];
      [(VOTOutputRequest *)v28 setGeneratesBraille:1];
      i = 0;
      goto LABEL_49;
    }

    self->_explorerElementsNeedUpdate = 1;
    [(VOTElementManager *)self _updateExplorerElementsIfNeeded];
    v32 = +[VOTExplorerElementManagerContext context];
    explorerElementManager3 = [(VOTElementManager *)self explorerElementManager];
    [explorerElementManager3 readAll:v32];

    i = 0;
LABEL_48:
    v28 = v48;
LABEL_49:

    v14 = i;
LABEL_50:
    v34 = VOTLogTVFocus();
    if (os_log_type_enabled(v34, OS_LOG_TYPE_INFO))
    {
      *buf = 138543618;
      v51 = v9;
      v52 = 2114;
      v53 = v28;
      _os_log_impl(&_mh_execute_header, v34, OS_LOG_TYPE_INFO, "Did accept focus change: %{public}@\nOutputRequest:%{public}@", buf, 0x16u);
    }

    [(VOTElementManager *)self setNativeFocusElement:v9];
    self->_forceUpdateMask = 0;
    self->_isUpdatingFocus = 0;
    self->_explorerElementsNeedUpdate = 1;
    explorerElementManager4 = [(VOTElementManager *)self explorerElementManager];
    [explorerElementManager4 setCurrentExplorerElement:0];

    self->_elementUnitIndex = -1;
    if (tvInteractionMode != 2)
    {
      v40 = +[VOTCommandHelper commandHelper];
      if ([v9 handlesGestureArea])
      {
        [v40 setHelpEnabled:1];
        [v40 setPracticeRegion:{0.0, 0.0, xmmword_1001FF150}];
        [v40 setPracticeElement:v9];
      }

      else if ([v40 helpEnabled])
      {
        [v40 setHelpEnabled:0];
      }

      outputActions = [(VOTOutputRequest *)v28 outputActions];
      v42 = [outputActions count];

      if (v42)
      {
        explorerElementManager5 = [(VOTElementManager *)self explorerElementManager];
        [explorerElementManager5 cancelPendingReadAll];

        self->_shouldReadExplorerElementsAfterSpeechFinished = 1;
        v44 = [(VOTElementManager *)self __consumeAppTransitionForAnnouncingIfNeeded:updateFocusContext];
        if (v44)
        {
          v45 = [(VOTOutputRequest *)v28 addString:v44 breakWords:0 withLanguage:0 atIndex:0];
        }

        [(VOTElementManager *)self __sendOutputRequest:v28];
      }

      [(VOTElementManager *)self _setCurrentElement:0];

      _currentElement = +[VOTDisplayManager displayManager];
      [_currentElement setCursorFrameForElement:v9];
      goto LABEL_68;
    }

    _currentElement = [(VOTElementManager *)self _currentElement];
    traits = [_currentElement traits];
    if (((kAXTextEntryTrait | kAXSearchFieldTrait) & traits) != 0)
    {
      traits2 = [v5 traits];
      v39 = (kAXKeyboardKeyTrait & traits2) != 0;
      if (!v5)
      {
LABEL_68:

        [(VOTElementManager *)self __updateVoiceOverEnabledWarningBannerVisibility];
        updateFocusComplete = [updateFocusContext updateFocusComplete];

        if (updateFocusComplete)
        {
          updateFocusComplete2 = [updateFocusContext updateFocusComplete];
          updateFocusComplete2[2]();
        }

LABEL_70:

        return;
      }
    }

    else
    {
      v39 = 0;
      if (!v5)
      {
        goto LABEL_68;
      }
    }

    if ([v5 differenceAspectMask:_currentElement] != 0 && !v39)
    {
      -[VOTElementManager _moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:](self, "_moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:", v5, [v5 shouldPlaySoundWhenFocused], 0, 0);
    }

    goto LABEL_68;
  }
}

- (BOOL)_bundleIdentifierIsHostedByPineBoard:(id)board
{
  boardCopy = board;
  if ([boardCopy isEqualToString:@"com.apple.TVScreenSaver"] & 1) != 0 || (objc_msgSend(boardCopy, "isEqualToString:", @"com.apple.TVIdleScreen") & 1) != 0 || (objc_msgSend(boardCopy, "isEqualToString:", @"com.apple.TVAirPlay") & 1) != 0 || (objc_msgSend(boardCopy, "isEqualToString:", @"com.apple.TVConferenceRoomDisplay"))
  {
    v4 = 1;
  }

  else
  {
    v4 = [boardCopy isEqualToString:@"com.apple.TVPeripheralAgent"];
  }

  return v4;
}

- (id)__consumeAppTransitionForAnnouncingIfNeeded:(id)needed
{
  neededCopy = needed;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  appTransition = [neededCopy appTransition];
  if (appTransition)
  {
    v6 = [(VOTElementManager *)self focusedApplication:neededCopy];
    v7 = [appTransition pid];
    if (v7 == [v6 pid] || objc_msgSend(v6, "isSystemApp") && (objc_msgSend(appTransition, "bundleID"), v9 = objc_claimAutoreleasedReturnValue(), v10 = -[VOTElementManager _bundleIdentifierIsHostedByPineBoard:](self, "_bundleIdentifierIsHostedByPineBoard:", v9), v9, v10))
    {
      announcableName = [appTransition announcableName];
    }

    else
    {
      v14 = appTransition;
      v15 = v6;
      v13 = @"appTransition:%@ does not represent our currentApp:%@";
      LOBYTE(v12) = 1;
      _AXLogWithFacility();
      announcableName = 0;
    }
  }

  else
  {
    announcableName = 0;
  }

  [neededCopy setAppTransition:{0, v12, v13, v14, v15}];

  return announcableName;
}

- (id)__targetElementForFocusElement:(id)element mustBeAccessibilityElement:(BOOL)accessibilityElement
{
  accessibilityElementCopy = accessibilityElement;
  elementCopy = element;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  accessibleAncestor = [elementCopy accessibleAncestor];
  if (!accessibleAncestor)
  {
    accessibleDescendants = [elementCopy accessibleDescendants];
    firstObject = [accessibleDescendants firstObject];

    if (firstObject)
    {
      goto LABEL_7;
    }

    accessibleAncestor = elementCopy;
  }

  firstObject = accessibleAncestor;
LABEL_7:
  if (accessibilityElementCopy && ([firstObject isAccessibleElement] & 1) == 0)
  {

    firstObject = 0;
  }

  return firstObject;
}

- (void)__handleUpdateVisualsTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self __updateElementVisuals];
}

- (void)__tvOS_handleUpdatePreferredTVInteractionModeTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = +[AXSettings sharedInstance];
  [v3 setVoiceOverPreferredTVInteractionMode:{objc_msgSend(VOTSharedWorkspace, "tvInteractionMode")}];
}

- (void)_readExplorerElementsAfterSpeechFinishedTimerFired
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_shouldReadExplorerElementsAfterSpeechFinished)
  {
    self->_shouldReadExplorerElementsAfterSpeechFinished = 0;
    currentRotorType = [(VOTElementManager *)self currentRotorType];
    if (!self->_flags.isReadingAll)
    {
      v4 = currentRotorType;
      if ([(VOTElementManager *)self speakNonfocusableElementsAfterDelay])
      {
        if (v4 != 1)
        {
          _currentElement = [(VOTElementManager *)self _currentElement];
          if (!_currentElement || [_currentElement shouldSpeakExplorerElementsAfterFocus])
          {
            [(VOTElementManager *)self _updateExplorerElementsIfNeeded];
            explorerElementManager = [(VOTElementManager *)self explorerElementManager];
            v7 = +[VOTExplorerElementManagerContext context];
            [explorerElementManager readAll:v7];
          }

          _objc_release_x1();
        }
      }
    }
  }
}

- (void)__tvOS_handleValueChangedWithType:(id)type oldValue:(id)value newValue:(id)newValue insertedTextOrNil:(id)nil isSecureText:(BOOL)text
{
  textCopy = text;
  typeCopy = type;
  newValueCopy = newValue;
  elementManagerThread = self->_elementManagerThread;
  nilCopy = nil;
  valueCopy = value;
  if (([(SCRCThread *)elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (newValueCopy)
  {
    v16 = newValueCopy;
  }

  else
  {
    v16 = &stru_1001CBF90;
  }

  v17 = v16;

  if (valueCopy)
  {
    v18 = valueCopy;
  }

  else
  {
    v18 = &stru_1001CBF90;
  }

  v19 = v18;

  if (nilCopy)
  {
    v20 = nilCopy;
  }

  else
  {
    v20 = &stru_1001CBF90;
  }

  v21 = v20;

  if ([(__CFString *)v21 rangeOfString:@""]!= 0x7FFFFFFFFFFFFFFFLL)
  {

    v21 = 0;
  }

  if (textCopy && ([(__CFString *)v17 length]|| [(__CFString *)v19 length]== 1))
  {
    v22 = +[VOTOutputManager outputManager];
    v23 = +[VOSOutputEvent DidEnterSecureText];
    [v22 sendEvent:v23];
  }

  v24 = +[NSMutableArray array];
  v25 = [(__CFString *)v17 length];
  if ([typeCopy isEqualToString:kAXValueChangeTypeInsert])
  {
    if (textCopy)
    {
      [v24 axSafelyAddObject:v21];
      if ([(__CFString *)v17 length])
      {
        v26 = [AXAttributedString axAttributedStringWithString:v17];
        [v26 setAttribute:kCFBooleanTrue forKey:off_1001FDF30];
        [v24 addObject:v26];
      }

      v27 = 1;
      goto LABEL_43;
    }

    v28 = 1;
    goto LABEL_30;
  }

  if (![typeCopy isEqualToString:kAXValueChangeTypeDelete])
  {
    v28 = 0;
    v27 = 0;
    if ([typeCopy isEqualToString:kAXValueChangeTypeReplacement])
    {
LABEL_30:
      v29 = [(__CFString *)v17 stringByReplacingOccurrencesOfString:v19 withString:&stru_1001CBF90];
      [v24 axSafelyAddObject:v29];

      v27 = v28;
    }

LABEL_31:
    if (!textCopy && v25 && ([v24 containsObject:v17] & 1) == 0)
    {
      if ([v24 count])
      {
        [v24 addObject:off_1001FDF20];
      }

      [v24 addObject:v17];
    }

    goto LABEL_43;
  }

  if (textCopy)
  {
    [v24 axSafelyAddObject:v17];
    if (v25)
    {
LABEL_27:
      v27 = 2;
      goto LABEL_31;
    }
  }

  else
  {
    v30 = [(__CFString *)v19 stringByReplacingOccurrencesOfString:v17 withString:&stru_1001CBF90];
    if ([v30 length])
    {
      [v24 axSafelyAddObject:v30];
    }

    if (v25)
    {
      goto LABEL_27;
    }
  }

  if (-[VOTElementManager _isDictationInProgressForCurrentApp](self, "_isDictationInProgressForCurrentApp") || [v24 count])
  {
    v27 = 2;
LABEL_43:
    [(VOTElementManager *)self _speakMessages:v24 cannotBeInterrupted:0 pitch:v27];
    goto LABEL_44;
  }

  v31 = +[VOTOutputManager outputManager];
  v32 = +[VOSOutputEvent BoundaryEncountered];
  [v31 sendEvent:v32];

LABEL_44:
}

- (void)_speak:(id)_speak cannotBeInterrupted:(BOOL)interrupted pitch:(int64_t)pitch announcement:(BOOL)announcement brailleOnly:(BOOL)only
{
  onlyCopy = only;
  announcementCopy = announcement;
  interruptedCopy = interrupted;
  _speakCopy = _speak;
  if ([_speakCopy length])
  {
    v14 = _speakCopy;
    v13 = [NSArray arrayWithObjects:&v14 count:1];
    [(VOTElementManager *)self _speakMessages:v13 cannotBeInterrupted:interruptedCopy pitch:pitch announcement:announcementCopy brailleOnly:onlyCopy];
  }
}

- (void)_speakMessages:(id)messages cannotBeInterrupted:(BOOL)interrupted pitch:(int64_t)pitch announcement:(BOOL)announcement brailleOnly:(BOOL)only
{
  onlyCopy = only;
  announcementCopy = announcement;
  interruptedCopy = interrupted;
  messagesCopy = messages;
  if ([messagesCopy count])
  {
    v28 = interruptedCopy;
    v29 = announcementCopy;
    v12 = [objc_allocWithZone(VOTOutputRequest) init];
    v13 = v12;
    if (onlyCopy)
    {
      [v12 setLimitToComponentType:3];
    }

    v34 = 0u;
    v35 = 0u;
    v32 = 0u;
    v33 = 0u;
    v14 = messagesCopy;
    v15 = [v14 countByEnumeratingWithState:&v32 objects:v36 count:16];
    if (v15)
    {
      v16 = v15;
      v17 = *v33;
      v31 = v13;
      do
      {
        v18 = 0;
        do
        {
          if (*v33 != v17)
          {
            objc_enumerationMutation(v14);
          }

          v19 = *(*(&v32 + 1) + 8 * v18);
          if ([v19 isEqualToString:off_1001FDF18])
          {
            LODWORD(v20) = 0.25;
LABEL_15:
            [v13 addPause:v20];
            goto LABEL_16;
          }

          if ([v19 isEqualToString:off_1001FDF20])
          {
            LODWORD(v20) = 0.5;
            goto LABEL_15;
          }

          if ([v19 isEqualToString:off_1001FDF28])
          {
            LODWORD(v20) = 0.75;
            goto LABEL_15;
          }

          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v21 = v19;
            v13 = v31;
            if ([v21 hasAttribute:off_1001FDF30])
            {
              goto LABEL_27;
            }
          }

          else
          {
            v21 = [AXAttributedString axAttributedStringWithString:v19];
            v13 = v31;
          }

          v22 = [v21 length];
          if (pitch == 1)
          {
            v23 = &UIAccessibilityTokenHighPitch;
            goto LABEL_26;
          }

          if (pitch == 2)
          {
            v23 = &UIAccessibilityTokenLowPitch;
LABEL_26:
            [v21 setAttribute:&__kCFBooleanTrue forKey:*v23 withRange:{0, v22}];
          }

LABEL_27:
          v24 = [v13 addAttributedString:v21];

LABEL_16:
          v18 = v18 + 1;
        }

        while (v16 != v18);
        v25 = [v14 countByEnumeratingWithState:&v32 objects:v36 count:16];
        v16 = v25;
      }

      while (v25);
    }

    [v13 setGeneratesBraille:0];
    [v13 setCannotBeInterrupted:v28];
    if (v29)
    {
      objc_storeStrong(&self->_announcementRequest, v13);
      self->_announcementPid = -1;
      firstObject = [v14 firstObject];
      announcementOriginalString = self->_announcementOriginalString;
      self->_announcementOriginalString = firstObject;

      [v13 setCompletionDelegate:self];
    }

    [(VOTElementManager *)self sendRequest:v13];
  }
}

- (void)__sendOutputRequest:(id)request
{
  requestCopy = request;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [requestCopy send];
}

- (void)__interruptSpeachAndPlayBorderHitSound
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0];

  v5 = +[VOTOutputManager outputManager];
  v4 = +[VOSOutputEvent BoundaryEncountered];
  [v5 sendEvent:v4];
}

- (void)_updateExplorerElementsIfNeeded
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_explorerElementsNeedUpdate)
  {
    v13 = [(VOTElementManager *)self focusedApplication:0];
    explorerElements = [v13 explorerElements];
    if ([v13 isHeadBoard])
    {
      v4 = +[VOTElement systemAppApplication];
      explorerElements2 = [v4 explorerElements];
      v6 = [explorerElements arrayByAddingObjectsFromArray:explorerElements2];

      explorerElements = v6;
    }

    nativeFocusElement = [v13 nativeFocusElement];
    explorerElementManager = [(VOTElementManager *)self explorerElementManager];
    v9 = [(VOTElementManager *)self __targetElementForFocusElement:nativeFocusElement mustBeAccessibilityElement:0];
    [explorerElementManager updateWithExplorerElements:explorerElements focusedElement:v9];

    explorerElementManager2 = [(VOTElementManager *)self explorerElementManager];
    tvSpeechRequestManager = [explorerElementManager2 tvSpeechRequestManager];
    tvSpeechRequestManager2 = [(VOTElementManager *)self tvSpeechRequestManager];
    [tvSpeechRequestManager transferHeadersFrom:tvSpeechRequestManager2];

    self->_explorerElementsNeedUpdate = 0;
  }
}

- (void)explorerElementManager:(id)manager willReadElement:(id)element
{
  elementCopy = element;
  v6 = +[VOTDisplayManager displayManager];
  [v6 setCursorFrameForElement:elementCopy];

  [(VOTElementManager *)self _sendUserEventOccurredIfNeeded];
}

- (void)explorerElementManager:(id)manager didFinishReadAll:(BOOL)all
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread:manager]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = +[VOTDisplayManager displayManager];
  _currentElement = [(VOTElementManager *)self _currentElement];
  [v5 setCursorFrameForElement:_currentElement];

  self->_flags.isReadingAll = 0;
}

- (void)_sendUserEventOccurredIfNeeded
{
  +[NSDate timeIntervalSinceReferenceDate];
  if (vabdd_f64(v3, self->_lastUserEventNotificationTime) > 4.0)
  {
    self->_lastUserEventNotificationTime = v3;

    dispatch_async(&_dispatch_main_q, &stru_1001CA268);
  }
}

- (void)gestureRepeaterWillSendFirstRepeaterEvent:(id)event
{
  v4 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent DidBeginPassthrough];
  [v4 sendEvent:v3];
}

- (void)gestureRepeater:(id)repeater repeaterEventDidFire:(int64_t)fire
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ((fire - 1) <= 3)
  {

    [(VOTElementManager *)self __sendTVRemoteCommand:?];
  }
}

- (_NSRange)_outputRangeForCharacterSegment:(id)segment direction:(int64_t)direction
{
  segmentCopy = segment;
  v7 = [segmentCopy length];
  v8 = v7;
  if (direction == 2)
  {
    elementUnitIndex = self->_elementUnitIndex;
    if (elementUnitIndex > v7)
    {
      self->_elementUnitIndex = v7;
      elementUnitIndex = v7;
    }

    if (elementUnitIndex >= 1)
    {
      v15 = [segmentCopy rangeOfComposedCharacterSequenceAtIndex:elementUnitIndex - 1];
      v17 = v19;
      self->_elementUnitIndex = v15;
      goto LABEL_19;
    }

    v17 = 0;
    self->_elementUnitIndex = -1;
LABEL_18:
    v15 = 0x7FFFFFFFFFFFFFFFLL;
    goto LABEL_19;
  }

  if (direction != 1)
  {
    v17 = 0;
    goto LABEL_18;
  }

  if (self->_elementUnitIndex < 0)
  {
    self->_elementUnitIndex = 0;
  }

  v9 = +[AXSettings sharedInstance];
  voiceOverCursorOutputStyle = [v9 voiceOverCursorOutputStyle];

  if (voiceOverCursorOutputStyle == 2)
  {
    v11 = self->_elementUnitIndex + 1;
  }

  else
  {
    v11 = self->_elementUnitIndex;
  }

  if (v11 >= v8)
  {
    v17 = 0;
    v15 = 0x7FFFFFFFFFFFFFFFLL;
  }

  else
  {
    v12 = [segmentCopy rangeOfComposedCharacterSequenceAtIndex:?];
    v14 = v13;
    v15 = [segmentCopy rangeOfComposedCharacterSequenceAtIndex:v11];
    v17 = v16;
    v8 = v12 + v14;
  }

  self->_elementUnitIndex = v8;
LABEL_19:

  v20 = v15;
  v21 = v17;
  result.length = v21;
  result.location = v20;
  return result;
}

- (void)outputNextTextSegmentUnit:(int64_t)unit direction:(int64_t)direction string:(id)string element:(id)element
{
  elementCopy = element;
  stringCopy = string;
  v11 = [(VOTElementManager *)self outputRangeForTextSegmentUnit:unit direction:direction string:stringCopy element:elementCopy];
  v13 = v12;
  -[VOTElementManager updateIndexesForOutputRange:segment:direction:outputStringLength:](self, "updateIndexesForOutputRange:segment:direction:outputStringLength:", v11, v12, unit, direction, [stringCopy length]);
  [(VOTElementManager *)self outputTextSegmentForRange:v11 string:v13 element:stringCopy usePhonetics:elementCopy segment:unit == 1, unit];
}

- (_NSRange)outputRangeForTextSegmentUnit:(int64_t)unit direction:(int64_t)direction string:(id)string element:(id)element
{
  stringCopy = string;
  elementCopy = element;
  v12 = 0;
  v13 = 0x7FFFFFFFLL;
  if (unit > 2)
  {
    if (unit != 3)
    {
      if (unit == 5)
      {
        v14 = [stringCopy sentenceFromPosition:self->_elementUnitIndex inDirection:direction];
        goto LABEL_13;
      }

      if (unit == 6)
      {
        v14 = [stringCopy paragraphFromPosition:self->_elementUnitIndex inDirection:direction];
LABEL_13:
        v13 = v14;
        v12 = v15;
        goto LABEL_14;
      }

      goto LABEL_14;
    }

    lastSeenLineAndColumn = self->_lastSeenLineAndColumn;
    if (lastSeenLineAndColumn)
    {
      v17 = lastSeenLineAndColumn;
    }

    else
    {
      v59[0] = @"lineNumber";
      v59[1] = @"lineColumn";
      v60[0] = &off_1001D9FE0;
      v60[1] = &off_1001D9FE0;
      v17 = [NSDictionary dictionaryWithObjects:v60 forKeys:v59 count:2];
    }

    v20 = v17;
    v21 = [elementCopy rangeForLineNumberAndColumn:v17];
    if (v21 == 0x7FFFFFFF)
    {
      v23 = [stringCopy lineFromPosition:self->_elementUnitIndex inDirection:direction];
LABEL_18:
      v13 = v23;
      v12 = v24;
LABEL_40:

      goto LABEL_14;
    }

    v13 = v21;
    v25 = v22;
    p_lastSeenLineAndColumn = &self->_lastSeenLineAndColumn;
    if (!*p_lastSeenLineAndColumn)
    {
      objc_storeStrong(p_lastSeenLineAndColumn, v20);
      v12 = v25;
      goto LABEL_40;
    }

    if (direction == 1)
    {
      v27 = &v21[v22];
      if (&v21[v22] < [stringCopy length])
      {
        v57[0] = @"lineNumber";
        v28 = [NSNumber numberWithUnsignedInteger:v27];
        v57[1] = @"lineColumn";
        v58[0] = v28;
        v58[1] = &off_1001D9FE0;
        v29 = [NSDictionary dictionaryWithObjects:v58 forKeys:v57 count:2];

        objc_storeStrong(p_lastSeenLineAndColumn, v29);
        v13 = [elementCopy rangeForLineNumberAndColumn:v29];
        v12 = v30;
        v20 = v29;
        goto LABEL_40;
      }

      v12 = 0;
LABEL_39:
      v13 = 0x7FFFFFFFLL;
      goto LABEL_40;
    }

    v12 = 0;
    if (direction != 2 || !v21)
    {
      goto LABEL_39;
    }

    if (v21 >= v22)
    {
      v31 = &v21[-v22];
    }

    else
    {
      v31 = 0;
    }

    v55[0] = @"lineNumber";
    v32 = [NSNumber numberWithUnsignedInteger:v31];
    v55[1] = @"lineColumn";
    v56[0] = v32;
    v56[1] = &off_1001D9FE0;
    v33 = [NSDictionary dictionaryWithObjects:v56 forKeys:v55 count:2];

    v34 = [elementCopy rangeForLineNumberAndColumn:v33];
    v36 = &v34[v35];
    v37 = v33;
    v38 = v37;
    if (v36 == v13)
    {
      if (v34 != 0x7FFFFFFF)
      {
        v39 = v37;
        while (v31 < [stringCopy length])
        {
          v20 = v38;

          --v31;
          v53[0] = @"lineNumber";
          v40 = [NSNumber numberWithUnsignedInteger:v31];
          v53[1] = @"lineColumn";
          v54[0] = v40;
          v54[1] = &off_1001D9FE0;
          v38 = [NSDictionary dictionaryWithObjects:v54 forKeys:v53 count:2];

          v41 = [elementCopy rangeForLineNumberAndColumn:v38];
          v43 = v41 != 0x7FFFFFFF && &v41[v42] == v13;
          v39 = v20;
          if (!v43)
          {
            goto LABEL_53;
          }
        }

        v20 = v39;
        goto LABEL_53;
      }
    }

    else if (v34 != 0x7FFFFFFF)
    {
      v44 = v13 - v25;
      if (v13 < v25)
      {
        v44 = 0;
      }

      v45 = v44 + 1;
      v46 = v37;
      do
      {
        v20 = v38;

        v47 = [NSNumber numberWithUnsignedInteger:v45, @"lineNumber"];
        v51[1] = @"lineColumn";
        v52[0] = v47;
        v52[1] = &off_1001D9FE0;
        v38 = [NSDictionary dictionaryWithObjects:v52 forKeys:v51 count:2];

        v48 = [elementCopy rangeForLineNumberAndColumn:v38];
        ++v45;
        v50 = v48 == 0x7FFFFFFF || &v48[v49] == v13;
        v46 = v20;
      }

      while (!v50);
      goto LABEL_53;
    }

    v20 = v37;
LABEL_53:

    objc_storeStrong(p_lastSeenLineAndColumn, v20);
    v23 = [elementCopy rangeForLineNumberAndColumn:v20];
    goto LABEL_18;
  }

  if (unit == 1)
  {
    v14 = [(VOTElementManager *)self _outputRangeForCharacterSegment:stringCopy direction:direction];
    goto LABEL_13;
  }

  if (unit == 2)
  {
    v14 = [stringCopy wordFromPosition:self->_elementUnitIndex inDirection:direction];
    goto LABEL_13;
  }

LABEL_14:

  v18 = v13;
  v19 = v12;
  result.length = v19;
  result.location = v18;
  return result;
}

- (void)updateIndexesForOutputRange:(_NSRange)range segment:(int64_t)segment direction:(int64_t)direction outputStringLength:(unint64_t)length
{
  if (segment != 1)
  {
    if (direction != 1)
    {
      length = -1;
    }

    if (direction == 1)
    {
      length = range.length;
    }

    else
    {
      length = 0;
    }

    v8 = length + range.location;
    if (range.location != 0x7FFFFFFF)
    {
      length = v8;
    }

    self->_elementUnitIndex = length;
  }
}

- (id)_listItemLabelForAXAttributedString:(id)string
{
  v3 = [string attributeValueForKey:UIAccessibilityTokenListItemLabel];
  if ([v3 length])
  {
    v4 = sub_1000511CC(off_1001FDDD0, @"list.item.label", 0);
    v5 = [NSString stringWithFormat:v4, v3];
  }

  else
  {
    v5 = 0;
  }

  return v5;
}

- (void)outputTextSegmentForRange:(_NSRange)range string:(id)string element:(id)element usePhonetics:(BOOL)phonetics segment:(int64_t)segment
{
  phoneticsCopy = phonetics;
  length = range.length;
  location = range.location;
  stringCopy = string;
  elementCopy = element;
  self->_elementUnitOutputRange.location = location;
  self->_elementUnitOutputRange.length = length;
  v14 = [stringCopy length];
  if (location == 0x7FFFFFFFFFFFFFFFLL || !length || stringCopy && (location > v14 || location + length > v14))
  {
    v15 = +[VOTOutputManager outputManager];
    [v15 stopSpeakingAtBoundary:0];

    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];
    goto LABEL_49;
  }

  segmentCopy = segment;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    [stringCopy attributedSubstringFromRange:{location, length}];
  }

  else
  {
    [stringCopy substringWithRange:{location, length}];
  }
  v17 = ;
  v18 = [objc_allocWithZone(VOTOutputRequest) init];
  language = [elementCopy language];
  v20 = +[AXSettings sharedInstance];
  voiceOverPhoneticsFeedback = [v20 voiceOverPhoneticsFeedback];

  if (phoneticsCopy)
  {
    v55 = 0;
    if ([v17 length] == 1 && voiceOverPhoneticsFeedback)
    {
      v55 = [(VOTElementManager *)self _phoneticStringForLetter:v17 language:language];
    }
  }

  else
  {
    v55 = 0;
  }

  v22 = [elementCopy attributedValueForRange:{location, length}];
  v23 = [elementCopy lineRangeForPosition:location];
  v24 = [(VOTElementManager *)self _listItemLabelForAXAttributedString:v22];
  v54 = v24;
  if ([v24 length] && objc_msgSend(v24, "length") && v23 != self->_lastSeenLineStartPositionForFontProperties)
  {
    v25 = [v18 addString:v24];
    [v18 setGeneratesBraille:1];
    [v18 lastAction];
    v27 = v26 = language;
    LODWORD(v28) = 1062836634;
    v29 = [NSNumber numberWithFloat:v28];
    [v27 setObject:v29 forVariant:32];

    language = v26;
  }

  self->_lastSeenLineStartPositionForFontProperties = v23;
  string = [v22 string];
  v31 = [(VOTElementManager *)self stringIsTextAttachment:string];

  if (v31)
  {
    v52 = language;
    v32 = -[VOTElementManager _textAttachmentElementForString:inRange:](self, "_textAttachmentElementForString:inRange:", v22, 0, [v22 length]);
    v33 = v32;
    if (v32)
    {
      value = [v32 value];
      label = [v33 label];
      v51 = @"__AXStringForVariablesSentinel";
      v16 = __AXStringForVariables();
    }

    else
    {
      v16 = sub_1000511CC(off_1001FDDD0, @"attachment", 0);
    }

    language = v52;
  }

  else
  {
    v16 = v17;
  }

  v35 = [v55 length];
  if (v35)
  {
    v36 = voiceOverPhoneticsFeedback == 0;
  }

  else
  {
    v36 = 1;
  }

  v37 = !v36;
  if (!v35 || voiceOverPhoneticsFeedback != 2)
  {
    v47 = [v18 addAttributedString:v16 withLanguage:language];
    if (segmentCopy == 1)
    {
      lastAction = [v18 lastAction];
      [lastAction setObject:kCFBooleanTrue forVariant:28];
    }

    if (!v37)
    {
      goto LABEL_48;
    }

    if (voiceOverPhoneticsFeedback != 2)
    {
      LODWORD(v48) = 1061158912;
      [v18 addPause:v48];
    }
  }

  v38 = +[AXSettings sharedInstance];
  voiceOverCapitalLetterFeedback = [v38 voiceOverCapitalLetterFeedback];

  if (!voiceOverCapitalLetterFeedback && voiceOverPhoneticsFeedback == 2 && sub_10005088C(v17))
  {
    v40 = sub_1000511CC(off_1001FDDD0, @"CapitalLetterFormat", 0);
    v41 = [NSString stringWithFormat:v40, v55];

    v42 = [v18 addString:v41];
  }

  else
  {
    v43 = [v18 addString:v55];
  }

  if ([(VOTElementManager *)self _needsPhoneticBrailleForLanauge:language])
  {
    [(VOTElementManager *)self _sendBrailleAlert:v55];
  }

  if (sub_10005088C(v17))
  {
    v44 = +[AXSettings sharedInstance];
    voiceOverCapitalLetterFeedback2 = [v44 voiceOverCapitalLetterFeedback];

    if (voiceOverCapitalLetterFeedback2 == 1)
    {
      lastAction2 = [v18 lastAction];
      [lastAction2 setObject:&off_1001D9940 forVariant:32];
    }
  }

LABEL_48:
  --self->_elementUnitOutputRange.length;
  [(VOTElementManager *)self sendRequest:v18];

LABEL_49:
}

- (id)_textAttachmentElementForString:(id)string inRange:(_NSRange)range
{
  v5 = [string attributedSubstringFromRange:{range.location, range.length}];
  v6 = v5;
  if (self->_inUnitTestingMode)
  {
    [v5 attributeValueForKey:UIAccessibilityTokenAttachment];
  }

  else
  {
    +[AXUIElement uiElementWithAXElement:](AXUIElement, "uiElementWithAXElement:", [v5 attributeValueForKey:UIAccessibilityTokenAttachment]);
  }
  v7 = ;
  v8 = [VOTElement elementWithUIElement:v7];

  return v8;
}

- (BOOL)stringIsTextAttachment:(id)attachment
{
  attachmentCopy = attachment;
  v4 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
  v5 = [attachmentCopy stringByTrimmingCharactersInSet:v4];

  v6 = [v5 length] == 1 && objc_msgSend(v5, "characterAtIndex:", 0) == 65532;
  return v6;
}

- (BOOL)_elementMonitoringOutputElement:(id)element userMonitored:(BOOL)monitored
{
  monitoredCopy = monitored;
  elementCopy = element;
  value = [elementCopy value];
  v8 = [value length];

  v9 = +[VOTElement springBoardApplication];
  isSystemSleeping = [v9 isSystemSleeping];

  if ((isSystemSleeping & 1) == 0)
  {
    if (v8)
    {
      v12 = 8;
    }

    else
    {
      v12 = 1;
    }

    [elementCopy updateLanguage];
    v13 = [objc_allocWithZone(VOTOutputRequest) init];
    v14 = 1;
    [v13 setDoesNotInterrupt:1];
    [(VOTElementManager *)self _addDescription:elementCopy toRequest:v13 withOptions:v12];
    label = [elementCopy label];
    if ([label isAXAttributedString])
    {
      coalescedAttributes = [label coalescedAttributes];
      v17 = [coalescedAttributes objectForKey:UIAccessibilityTokenBrailleDisplayOnly];
      bOOLValue = [v17 BOOLValue];

      if (!bOOLValue)
      {
        v14 = 1;
        if (monitoredCopy)
        {
LABEL_10:
          [v13 setGeneratesBraille:1];
          [v13 setBrailleType:2];
          if (!v14)
          {
            goto LABEL_16;
          }

LABEL_14:
          v19 = +[VOTOutputManager outputManager];
          isSpeaking = [v19 isSpeaking];

          if (isSpeaking)
          {
            v11 = 0;
LABEL_23:

            goto LABEL_24;
          }

LABEL_16:
          v21 = +[AXSubsystemVoiceOver sharedInstance];
          ignoreLogging = [v21 ignoreLogging];

          if ((ignoreLogging & 1) == 0)
          {
            v23 = +[AXSubsystemVoiceOver identifier];
            v24 = AXLoggerForFacility();

            v25 = AXOSLogLevelFromAXLogLevel();
            if (os_log_type_enabled(v24, v25))
            {
              v26 = AXColorizeFormatLog();
              v29 = v13;
              v27 = _AXStringForArgs();
              if (os_log_type_enabled(v24, v25))
              {
                *buf = 138543362;
                v31 = v27;
                _os_log_impl(&_mh_execute_header, v24, v25, "%{public}@", buf, 0xCu);
              }
            }
          }

          [(VOTElementManager *)self sendRequest:v13, v29];
          v11 = 1;
          goto LABEL_23;
        }

LABEL_13:
        [(VOTElementManager *)self refreshBraille];
        if (!v14)
        {
          goto LABEL_16;
        }

        goto LABEL_14;
      }

      [v13 setLimitToComponentType:3];
      v14 = 0;
    }

    if (monitoredCopy)
    {
      goto LABEL_10;
    }

    goto LABEL_13;
  }

  v11 = 0;
LABEL_24:

  return v11;
}

- (double)_realTimeAdjustableUpdateFrequency:(id)frequency
{
  frequencyCopy = frequency;
  v5 = 1.0;
  if (![(NSArray *)self->_realTimeElementsCache containsObject:frequencyCopy])
  {
    v5 = 0.5;
    if (([frequencyCopy doesHaveTraits:kAXAdjustableTrait] & 1) == 0)
    {
      if ([frequencyCopy isLiveCaptionsTextView])
      {
        v5 = 1.0;
      }

      else
      {
        v5 = 3.0;
      }
    }
  }

  return v5;
}

- (void)_elementUpdatesFrequently
{
  getCurrentElement = [(VOTElementManager *)self getCurrentElement];
  v4 = +[AXSubsystemVoiceOver sharedInstance];
  ignoreLogging = [v4 ignoreLogging];

  if ((ignoreLogging & 1) == 0)
  {
    v6 = +[AXSubsystemVoiceOver identifier];
    v7 = AXLoggerForFacility();

    v8 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v7, v8))
    {
      v9 = AXColorizeFormatLog();
      v23 = getCurrentElement;
      v10 = _AXStringForArgs();
      if (os_log_type_enabled(v7, v8))
      {
        *buf = 138543362;
        v26 = v10;
        _os_log_impl(&_mh_execute_header, v7, v8, "%{public}@", buf, 0xCu);
      }
    }
  }

  if ((-[SCRCTargetSelectorTimer isCancelled](self->_elementUpdatesFrequentlyTimer, "isCancelled", v23) & 1) == 0 && [getCurrentElement doesHaveTraits:kAXUpdatesFrequentlyTrait])
  {
    [(VOTElementManager *)self _realTimeAdjustableUpdateFrequency:getCurrentElement];
    v12 = v11;
    label = [getCurrentElement label];
    value = [getCurrentElement value];
    v15 = [NSString stringWithFormat:@"%@%@", label, value];

    v16 = +[AXSubsystemVoiceOver sharedInstance];
    LOBYTE(value) = [v16 ignoreLogging];

    if ((value & 1) == 0)
    {
      v17 = +[AXSubsystemVoiceOver identifier];
      v18 = AXLoggerForFacility();

      v19 = AXOSLogLevelFromAXLogLevel();
      if (os_log_type_enabled(v18, v19))
      {
        v20 = AXColorizeFormatLog();
        v24 = v15;
        v21 = _AXStringForArgs();
        if (os_log_type_enabled(v18, v19))
        {
          *buf = 138543362;
          v26 = v21;
          _os_log_impl(&_mh_execute_header, v18, v19, "%{public}@", buf, 0xCu);
        }
      }
    }

    cachedFrequentUpdateText = self->_cachedFrequentUpdateText;
    if (!cachedFrequentUpdateText)
    {
      objc_storeStrong(&self->_cachedFrequentUpdateText, v15);
      cachedFrequentUpdateText = self->_cachedFrequentUpdateText;
    }

    if (![(NSString *)cachedFrequentUpdateText isEqualToString:v15, v24]&& [(VOTElementManager *)self _elementMonitoringOutputElement:getCurrentElement userMonitored:0])
    {
      v12 = v12 / 3.0;
      objc_storeStrong(&self->_cachedFrequentUpdateText, v15);
    }

    [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer dispatchAfterDelay:v12];
  }
}

- (BOOL)_needsPhoneticBrailleForLanauge:(id)lanauge
{
  lanaugeCopy = lanauge;
  selectedLanguage = lanaugeCopy;
  if (!lanaugeCopy)
  {
    selectedLanguage = [VOTSharedWorkspace selectedLanguage];
    if (!selectedLanguage)
    {
      selectedLanguage = [VOTSharedWorkspace systemSpokenLanguage];
    }
  }

  if ([selectedLanguage hasPrefix:@"ja"])
  {
    v5 = 1;
  }

  else
  {
    v5 = [selectedLanguage hasPrefix:@"zh"];
  }

  return v5;
}

- (void)_sendBrailleAlert:(id)alert
{
  alertCopy = alert;
  v3 = +[VOTOutputRequest createRequest];
  v4 = [v3 addString:alertCopy];
  [v3 setGeneratesBraille:1];
  [v3 setLimitToComponentType:3];
  [v3 setBrailleType:2];
  [v3 send];
}

- (void)rotor:(id)rotor didChangeFrom:(int64_t)from to:(int64_t)to userInitiated:(BOOL)initiated
{
  rotorCopy = rotor;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_elementRotor == rotorCopy)
  {
    v7 = +[AXSettings sharedInstance];
    [v7 voiceOverUseTVToggleStyleNavigation];
  }

  if (_AXSAutomationEnabled())
  {
    v8 = +[NSDistributedNotificationCenter defaultCenter];
    [v8 postNotificationName:@"VoiceOverEventOccurred" object:@"RotorTypeDidChange"];
  }
}

- (void)_setFetchManager:(id)manager
{
  managerCopy = manager;
  fetchManager = self->_fetchManager;
  if (fetchManager != managerCopy)
  {
    v7 = managerCopy;
    [(VOTElementFetcher *)fetchManager setDelegate:0];
    objc_storeStrong(&self->_fetchManager, manager);
    fetchManager = [(VOTElementFetcher *)self->_fetchManager setDelegate:self];
    managerCopy = v7;
  }

  _objc_release_x1(fetchManager, managerCopy);
}

- (VOTElementUpdateProtocol)updateDelegate
{
  WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);

  return WeakRetained;
}

- (CGPoint)indefiniteLongPressPoint
{
  x = self->_indefiniteLongPressPoint.x;
  y = self->_indefiniteLongPressPoint.y;
  result.y = y;
  result.x = x;
  return result;
}

@end