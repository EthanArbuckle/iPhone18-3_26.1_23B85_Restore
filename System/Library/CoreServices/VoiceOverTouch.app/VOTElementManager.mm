@interface VOTElementManager
+ (void)_exitThread:(id)a3;
+ (void)initialize;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserAllSelection:(id)a3 inString:(id)a4 rightward:(BOOL)a5;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserCharacterSelection:(id)a3 inString:(id)a4 rightward:(BOOL)a5;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserLineSelectionInElement:(id)a3 currentRange:(id)a4 rightward:(BOOL)a5;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserPageSelection:(id)a3 inString:(id)a4 rightward:(BOOL)a5;
- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserWordSelectionInElement:(id)a3 currentRange:(id)a4 rightward:(BOOL)a5;
- ($7159EBE1BBBCDCA1B95AF1FC27B9DE98)_appInfoForCurrentElement;
- (BOOL)_addApplicationLabelsAndSummariesToRequest:(id)a3 applicationNames:(id *)a4 summaryElements:(id *)a5;
- (BOOL)_addElementCommunityNameIfNeededToRequest:(id)a3 oldElementCommunity:(id)a4 newElementCommunity:(id)a5 element:(id)a6;
- (BOOL)_bookContentElementInteraction:(CGPoint)a3 element:(id)a4;
- (BOOL)_bundleIdentifierIsHostedByPineBoard:(id)a3;
- (BOOL)_canActivateTapticTime;
- (BOOL)_chartElementDidChangeForElement:(id)a3 oldElement:(id)a4;
- (BOOL)_continueTrackingKeyboardKey:(id)a3;
- (BOOL)_continueTrackingRoadElementWithPoint:(CGPoint)a3;
- (BOOL)_currentElementIsTrappedInAuthentication;
- (BOOL)_didFocusUpdateOriginateFromFocusedApp:(id)a3;
- (BOOL)_echoLineInElement:(id)a3 forEvent:(id)a4 forDifferentElement:(BOOL)a5;
- (BOOL)_elementMonitoringOutputElement:(id)a3 userMonitored:(BOOL)a4;
- (BOOL)_finishHandlingMoveToElementNotification:(id)a3 shouldSyncNativeFocusElement:(id)a4 shouldEchoSameTouchContainer:(id)a5 shouldScrollToElement:(id)a6 shouldPlayTrackingSound:(id)a7 shouldRefocusIfSameElement:(id)a8;
- (BOOL)_handleBookNavigateOverPageBoundary:(int64_t)a3 unit:(int64_t)a4;
- (BOOL)_handleMoreBookContentElements;
- (BOOL)_handleMoveIn:(id)a3;
- (BOOL)_handleMoveOut:(id)a3;
- (BOOL)_handleMovementForElementFollowingElement:(id)a3 direction:(int64_t)a4 unit:(int64_t)a5 mode:(int64_t)a6;
- (BOOL)_handleNextAutofill:(id)a3 reverse:(BOOL)a4;
- (BOOL)_handleSimulatedLongPress:(id)a3;
- (BOOL)_hasApplicationMatchingBlock:(id)a3 inApplications:(id)a4;
- (BOOL)_hasCurrentApplicationMatchingBlock:(id)a3;
- (BOOL)_ignoreTextEditingNotificationsForPickerElementUsage;
- (BOOL)_isDictationInProgressForCurrentApp;
- (BOOL)_isElementValidForFirstResponder:(id)a3;
- (BOOL)_isKeyboardLineMovement;
- (BOOL)_isPoint:(CGPoint)a3 withinRangeForDividerElement:(id)a4;
- (BOOL)_isShowingTodayViewForPhone;
- (BOOL)_isTouchTypingEventTooCloseToEdge:(id)a3;
- (BOOL)_isWebAppStillOpen;
- (BOOL)_languageRotorItemsContainLanguage:(id)a3;
- (BOOL)_moveElementToFlowTo:(id)a3;
- (BOOL)_moveToWebItemDuringLoadIfNecessary;
- (BOOL)_needsPhoneticBrailleForLanauge:(id)a3;
- (BOOL)_notificationData:(id)a3 containsToken:(id)a4;
- (BOOL)_prepareElementOutputHeaders:(id)a3 currentElement:(id)a4 request:(id)a5;
- (BOOL)_prepareStitchedWebReadAll:(id)a3 request:(id)a4 setCurrentElement:(BOOL *)a5;
- (BOOL)_processWatchSpecificOverrides:(id)a3;
- (BOOL)_reDispatchUpdateAppFromTimerIfBundlesAreNotReady;
- (BOOL)_savedDescriptionToPhoto:(id)a3 description:(id)a4 element:(id)a5;
- (BOOL)_sendTVRemoteCommandOverrideForAXCommand:(int64_t)a3;
- (BOOL)_setCurrentElement:(id)a3 isProtectedApp:(BOOL)a4 shouldResetTextSelection:(BOOL)a5 shouldResetCharacterRange:(BOOL)a6 ignoreIsAccessibilityElementCheck:(BOOL)a7 shouldSetBrailleElement:(BOOL)a8;
- (BOOL)_setCurrentElement:(id)a3 shouldSetBrailleElement:(id)a4;
- (BOOL)_shouldAllowSpeakThisGesture;
- (BOOL)_shouldAnnounceCustomRotorHintForElement:(id)a3;
- (BOOL)_shouldDismissKeyboardForMovingTooFarAlongYAxisWithEvent:(id)a3;
- (BOOL)_shouldIgnoreNotificationForContinuityDisplay:(id)a3 withElement:(__AXUIElement *)a4;
- (BOOL)_shouldIncludeContainerInDescriptionForCurrentElement:(id)a3 previousElement:(id)a4;
- (BOOL)_shouldMoveToLastWebFormControl;
- (BOOL)_shouldNotSpeakForIncomingCall;
- (BOOL)_shouldSuppressWebPageLoadedBehaviorForNotification:(id)a3;
- (BOOL)_shouldSwitchToFirstResponder:(id)a3;
- (BOOL)_touchContainerDidChangeForElement:(id)a3 oldElement:(id)a4;
- (BOOL)_updateCursorAfterPressForElement:(id)a3 currentElementRange:(_NSRange)a4 request:(id)a5 didHaveCursor:(BOOL)a6 doesHaveCursor:(BOOL)a7;
- (BOOL)_updateWithMostRecentElementCommunity:(id)a3;
- (BOOL)_useLineFrameBoundsForTouch:(id)a3;
- (BOOL)allowsSystemControlEventForPosition:(int)a3;
- (BOOL)determineFullImageDescriptionsEnabled:(id)a3;
- (BOOL)determineSceneDetectionsEnabled:(id)a3;
- (BOOL)elementEligibleToFindTitleElement:(id)a3;
- (BOOL)eventIsSystemEvent:(id)a3;
- (BOOL)exploreFocusAffectsNativeFocus;
- (BOOL)forceRotorOffGesturedTextInputIfNeeded:(BOOL)a3;
- (BOOL)handleTVMenuButtonClicked;
- (BOOL)inDirectTouchMode;
- (BOOL)isTutorialActive;
- (BOOL)isValidElementForImageExploration;
- (BOOL)mlElement:(id)a3 sharesLabel:(id)a4;
- (BOOL)shouldElement:(id)a3 beCombined:(id)a4 combineLinks:(BOOL)a5;
- (BOOL)shouldSilenceAnnouncements;
- (BOOL)shouldSnarfCrown;
- (BOOL)shouldTutorialIgnoreCommand:(id)a3;
- (BOOL)speakNonfocusableElementsAfterDelay;
- (BOOL)speakTableHeadersForElement:(id)a3;
- (BOOL)speakTableRowAndColumnForElement:(id)a3;
- (BOOL)stringIsTextAttachment:(id)a3;
- (CGPoint)indefiniteLongPressPoint;
- (CGRect)currentLineFrame;
- (VOTElementManager)init;
- (VOTElementUpdateProtocol)updateDelegate;
- (_NSRange)_characterRangeWithFaultTolerance:(int64_t)a3 forward:(BOOL)a4 element:(id)a5;
- (_NSRange)_elementSelectionRange;
- (_NSRange)_highlightedCharacterRange;
- (_NSRange)_lineRangeWithFaultTolerance:(int64_t)a3 forward:(BOOL)a4 element:(id)a5;
- (_NSRange)_outputRangeForCharacterSegment:(id)a3 direction:(int64_t)a4;
- (_NSRange)_rangeOfLine:(id)a3 inBookContent:(id)a4;
- (_NSRange)outputRangeForTextSegmentUnit:(int64_t)a3 direction:(int64_t)a4 string:(id)a5 element:(id)a6;
- (__AXUIElement)_firstResponderAXUIElementRefFromCurrentApplications;
- (double)_alternativeKeyActivateTime;
- (double)_brailleMaxOrigin;
- (double)_realTimeAdjustableUpdateFrequency:(id)a3;
- (double)keyboardKeyPenumbra:(id)a3;
- (double)rotorRate;
- (id)__consumeAppTransitionForAnnouncingIfNeeded:(id)a3;
- (id)__targetElementForFocusElement:(id)a3 mustBeAccessibilityElement:(BOOL)a4;
- (id)_activeSceneIdentifier;
- (id)_additionalElementCommunities;
- (id)_allElementCommunitiesWithFocusedApplications:(id)a3;
- (id)_applicationMatchingBlock:(id)a3 inApplications:(id)a4;
- (id)_audioDuckingModeString;
- (id)_brailleAutoAdvanceSpeedString;
- (id)_buildWebRefocusHashFromURL:(id)a3 activeTabDocumentIdentifier:(id)a4;
- (id)_cachedLaunchIcon:(id)a3;
- (id)_checkDataDetectorIfPresent:(CGRect)a3 element:(id)a4 includeLinks:(BOOL)a5;
- (id)_computeChangedFontAttributes:(id)a3 storedAttributes:(id)a4 haveMisspellCheck:(BOOL)a5;
- (id)_convertTextMarkerArrayToString:(id)a3 addInContentExtras:(BOOL)a4;
- (id)_copyMatchBlockAnyElement;
- (id)_copyMatchBlockArticleStart;
- (id)_copyMatchBlockButton;
- (id)_copyMatchBlockCheckbox;
- (id)_copyMatchBlockDifferent;
- (id)_copyMatchBlockForHeadingLevel:(int64_t)a3 searchType:(int64_t *)a4;
- (id)_copyMatchBlockForRotorType:(int64_t)a3 searchType:(int64_t *)a4;
- (id)_copyMatchBlockForTextAttribute:(int64_t)a3 searchType:(int64_t *)a4;
- (id)_copyMatchBlockFormElement;
- (id)_copyMatchBlockFrameStart;
- (id)_copyMatchBlockHeader;
- (id)_copyMatchBlockImage;
- (id)_copyMatchBlockInternalLink;
- (id)_copyMatchBlockLandmarkStart;
- (id)_copyMatchBlockLink;
- (id)_copyMatchBlockListStart;
- (id)_copyMatchBlockNonVisitedLink;
- (id)_copyMatchBlockRadioGroup;
- (id)_copyMatchBlockSameBlockquote;
- (id)_copyMatchBlockSameHeading;
- (id)_copyMatchBlockSearchField;
- (id)_copyMatchBlockSearchText;
- (id)_copyMatchBlockSimilar;
- (id)_copyMatchBlockStaticText;
- (id)_copyMatchBlockTableStart;
- (id)_copyMatchBlockTextField;
- (id)_copyMatchBlockVisitedLink;
- (id)_copyRangeMatchBlockForRotorType:(int64_t)a3;
- (id)_copySideAppDividerElementIfApplicableForPoint:(CGPoint)a3;
- (id)_currentCachedCustomActionCategories;
- (id)_currentCustomActionCategory;
- (id)_currentCustomActions;
- (id)_currentElementAtCenterPointOfElement:(id)a3;
- (id)_currentMedusaApplications;
- (id)_currentResponder;
- (id)_currentRotorSelection;
- (id)_currentTextLineInBookElement:(BOOL)a3;
- (id)_currentlyFocusedSafariTabIdentifier:(id)a3;
- (id)_customActionDefaultActionString;
- (id)_customActionsAddingDragCancelActionIfNecessaryForActions:(id)a3;
- (id)_dockElementForDisplay;
- (id)_echoDifferentTouchContainer:(id)a3 forEvent:(id)a4;
- (id)_elementCommunityForElement:(id)a3;
- (id)_elementToFocusWhenSwitchingToElementCommunity:(id)a3;
- (id)_findPreviousWebElement:(id)a3;
- (id)_firstElementForFocusFromElementCommunities:(id)a3 currentElement:(id)a4;
- (id)_firstElementWithCurrentElement:(id)a3 focusedApplications:(id)a4;
- (id)_firstResponderForApplications:(id)a3;
- (id)_firstResponderFromCurrentApplications;
- (id)_firstResponderFromCurrentElement;
- (id)_focusElementForFocusUpdate:(id)a3;
- (id)_fontDisplayNameForFontName:(id)a3;
- (id)_frontmostItemContainerElement;
- (id)_getAutoSpeakWatchFaceElements:(id)a3;
- (id)_getNewElementExplorer;
- (id)_getNextFocusedElementInElementCommunityPrevious:(BOOL)a3 shouldUseCache:(BOOL)a4 shouldWrapAround:(BOOL)a5;
- (id)_getSpeakableContainerForContainer:(id)a3;
- (id)_handleEditingStyleResolutionForAnnouncement:(id)a3;
- (id)_handleProtectedAppLogicForEvent:(id)a3 element:(id)a4 point:(CGPoint)a5;
- (id)_imageExplorerCachedResults;
- (id)_listItemLabelForAXAttributedString:(id)a3;
- (id)_localizedStringForCurrentBrailleTextMode;
- (id)_localizedTypingModeStringForCurrentMode;
- (id)_monitoredElementCachedText:(id)a3;
- (id)_navigationDirectionModeString:(int64_t)a3;
- (id)_nearestElementWithMatch:(id)a3 startElement:(id)a4;
- (id)_nearestElementWithMatch:(id)a3 startElement:(id)a4 forward:(BOOL)a5 itemCheckCount:(int64_t)a6;
- (id)_notificationData:(id)a3 consumingToken:(id)a4;
- (id)_occludedMultitaskingApps;
- (id)_orderedMonitoredFontAttributes;
- (id)_phoneticStringForLetter:(id)a3 language:(id)a4;
- (id)_retrieveCachedFocusedElementForElementCommunity:(id)a3;
- (id)_retrieveCurrentCharacterFromEditableElement;
- (id)_retrieveDefaultElementForPosition:(CGPoint)a3;
- (id)_sideAppDividerElement;
- (id)_similarMonitoredElement:(id)a3;
- (id)_sonarElementFromPoint:(CGPoint)a3 inForwardDirection:(BOOL)a4 limit:(int64_t)a5;
- (id)_speechPhoneticsString;
- (id)_textAttachmentElementForString:(id)a3 inRange:(_NSRange)a4;
- (id)_treePositionForMathSegment:(id)a3;
- (id)_typingEchoString;
- (id)_updateTouchContainerForElement:(id)a3 playSound:(BOOL)a4;
- (id)_valueForKeyPathOnElementManagerThread:(id)a3;
- (id)_verifiedElementWithElement:(id)a3;
- (id)_verifiedElementWithElement:(id)a3 atPoint:(CGPoint)a4;
- (id)_votElementFromWebElementHierarchyIndexPath:(id)a3 webArea:(id)a4;
- (id)availableAudiographActionsForElement:(id)a3;
- (id)currentApplications;
- (id)currentElement;
- (id)determineActivityForElement:(id)a3;
- (id)focusedApplication:(id)a3;
- (id)webCustomRotorDictionary:(id)a3 direction:(int64_t)a4 forElement:(id)a5;
- (id)webEditableAncestor:(id)a3;
- (int64_t)_adjustedRotorIndex:(int64_t)a3 inDirection:(int64_t)a4 rotorItems:(id)a5 validationBlock:(id)a6;
- (int64_t)_newNavigationDirectionModeForRotorDirection:(int64_t)a3;
- (int64_t)modifierKeyChoiceForElement:(id)a3;
- (int64_t)typingFeedbackForKeyboardType;
- (unint64_t)_currentMathGranularityLevel;
- (unint64_t)filterTraitsByPriority:(unint64_t)a3;
- (void)__handleExpandedStatusChanged;
- (void)__handleTVMenuButtonClicked;
- (void)__handleTVSelectButtonClicked;
- (void)__handleUpdateVisualsTimer;
- (void)__interruptSpeachAndPlayBorderHitSound;
- (void)__retrieveValueForKeyPath:(id)a3 intoPointedToLocation:(id)a4 semaphore:(id)a5;
- (void)__sendHIDEvents:(id)a3 postEventDelays:(id)a4;
- (void)__sendOutputRequest:(id)a3;
- (void)__sendTVRemoteCommand:(unint64_t)a3;
- (void)__tvOS_handleUpdatePreferredTVInteractionModeTimer;
- (void)__tvOS_handleValueChangedWithType:(id)a3 oldValue:(id)a4 newValue:(id)a5 insertedTextOrNil:(id)a6 isSecureText:(BOOL)a7;
- (void)__tvOS_toggleAudioDescriptions;
- (void)__tvOS_toggleExploreFocusAffectsNativeFocusPreference;
- (void)__tvOS_toggleSilenceAnnouncementsUserPreference;
- (void)__tvOS_toggleSpeakNonfocusableElementsAfterDelayUserPreference;
- (void)__updateElementVisuals;
- (void)_activateAlternativeKeyboardKey:(id)a3;
- (void)_activateBrailleScreenInputIfNeededForElement:(id)a3;
- (void)_addCopiedSpeechString:(id)a3;
- (void)_addDescription:(id)a3 toRequest:(id)a4 withOptions:(unint64_t)a5;
- (void)_addDescription:(id)a3 toRequest:(id)a4 withOptions:(unint64_t)a5 lastSeenContextDescriptors:(id)a6;
- (void)_addFormattedStringToRequest:(id)a3 formattedString:(id)a4 withElement:(id)a5;
- (void)_appSuspensionSoundTimer;
- (void)_appendCurrentRotorValue:(id)a3 forRotor:(id)a4;
- (void)_cacheFocusedElement:(id)a3 forElementCommunity:(id)a4;
- (void)_cachePreviousWebElement:(id)a3;
- (void)_cancelIndefiniteLongPress;
- (void)_captionsDisplayedWithTextRuns:(id)a3;
- (void)_cleanupMapInteractionOnIdle;
- (void)_cleanupStateForUnitTesting;
- (void)_clearWebLoadedSound;
- (void)_closeItemChooser;
- (void)_continueReadAllWithElement:(id)a3 setCurrentElement:(BOOL *)a4;
- (void)_continuousPathIdleTimer:(id)a3;
- (void)_customPublicRotorMatchForType:(id)a3 range:(_NSRange *)a4 element:(id *)a5 direction:(int64_t)a6 lastSearchUUID:(id *)a7;
- (void)_deactivateGesturedTextInputIfNeeded:(id)a3;
- (void)_disableQuickNavStateTemporarily;
- (void)_dismissAlternativeKeyboardKeys;
- (void)_dragStarted;
- (void)_dragTerminated;
- (void)_echoDifferentElement:(id)a3 forEvent:(id)a4 onlyOutputTouchContainerAndSounds:(BOOL)a5 canSetAsCurrentElement:(BOOL)a6 shouldPlayGuideWireSound:(BOOL)a7 isProtectedApp:(BOOL)a8 includeHint:(BOOL)a9 boundaryHit:(BOOL)a10;
- (void)_echoFlickNavigationElement:(id)a3;
- (void)_echoLineInBookElement:(id)a3 forEvent:(id)a4;
- (void)_echoNoElementForEvent:(id)a3;
- (void)_echoSameElement:(id)a3 forEvent:(id)a4;
- (void)_echoSearchNavigationElement:(id)a3 forRangeAdjustment:(BOOL)a4;
- (void)_echoSearchTypeNotFound:(int64_t)a3;
- (void)_echoStatusBarStatus:(id)a3;
- (void)_elementFetchFoundDirectTouchElements:(id)a3;
- (void)_elementFetchFoundElement:(id)a3;
- (void)_elementSelectionRangeDidChange:(_NSRange)a3 reason:(int64_t)a4;
- (void)_elementUpdatesFrequently;
- (void)_elementsRetrieved:(id)a3 finished:(id)a4;
- (void)_endNativeSliding:(BOOL)a3;
- (void)_endTextSearchMode;
- (void)_fetchElementsFrom:(id)a3 inDirection:(id)a4 count:(id)a5 scroll:(id)a6 block:(id)a7;
- (void)_finishHandlingLineMovementInWeb:(id)a3 direction:(id)a4 withCurrentElement:(id)a5 markerArray:(id)a6 textObjects:(id)a7 existingRequest:(id)a8;
- (void)_finishHandlingNextAutofillWithElement:(id)a3;
- (void)_finishPassthroughMode;
- (void)_forceVisionRefresh;
- (void)_handleActivateBrailleScreenInput:(id)a3;
- (void)_handleActivateBrailleScreenInputCommand:(id)a3;
- (void)_handleActivateBrailleScreenInputPreferringSingleHand:(id)a3;
- (void)_handleActivateBrailleUI:(id)a3;
- (void)_handleActivateHomeButton:(id)a3;
- (void)_handleActivityRotorChange:(BOOL)a3;
- (void)_handleAdjustTextSelectionSegmentType:(id)a3;
- (void)_handleAdjustValue:(id)a3 reverse:(BOOL)a4;
- (void)_handleAlertReceived:(id)a3 forApplication:(__AXUIElement *)a4;
- (void)_handleAnnounceQuickNav:(id)a3;
- (void)_handleAnnouncementNotification:(id)a3;
- (void)_handleAnnouncementWithData:(id)a3 pid:(int)a4;
- (void)_handleAppSuspendAnimationProgressNotification:(id)a3;
- (void)_handleAppSwitch:(id)a3;
- (void)_handleAudioDestination:(BOOL)a3;
- (void)_handleAudioDuckingAmountChange:(BOOL)a3;
- (void)_handleAudioDuckingChange:(BOOL)a3;
- (void)_handleAudioDuckingModeChange:(BOOL)a3;
- (void)_handleAudiographAction:(int64_t)a3 event:(id)a4;
- (void)_handleAudiographPlaybackStateNotification:(id)a3;
- (void)_handleAudiographSelectedSeriesChangedNotification:(id)a3;
- (void)_handleAutoCorrectionDisplayNotification:(id)a3;
- (void)_handleAutoCorrectionMadeNotification:(id)a3;
- (void)_handleAutomationGeneratedChordChangeEvent:(id)a3;
- (void)_handleAutomationGeneratedTouchCancelEvent:(id)a3;
- (void)_handleAutomationGeneratedTouchDownEvent:(id)a3;
- (void)_handleAutomationGeneratedTouchMoveEvent:(id)a3;
- (void)_handleAutomationGeneratedTouchUpEvent:(id)a3;
- (void)_handleBSINextRotor:(id)a3;
- (void)_handleBSIPreviousRotor:(id)a3;
- (void)_handleBarcodeVisibilityNotification:(id)a3;
- (void)_handleBookContentMovement:(id)a3 direction:(int64_t)a4 unit:(int64_t)a5 generateOutput:(BOOL)a6;
- (void)_handleBookPageFlipAndContinue;
- (void)_handleBottomEdgePanDown:(id)a3;
- (void)_handleBottomEdgePanExtraLong:(id)a3;
- (void)_handleBottomEdgePanLong:(id)a3;
- (void)_handleBottomEdgePanShort:(id)a3;
- (void)_handleBrailleDecreaseAutoAdvanceSpeed:(id)a3;
- (void)_handleBrailleEnableAutoAdvance:(id)a3;
- (void)_handleBrailleEvent:(id)a3;
- (void)_handleBrailleIncreaseAutoAdvanceSpeed:(id)a3;
- (void)_handleBrailleRefreshEvent:(id)a3;
- (void)_handleBrailleWordWrapToggleEvent:(id)a3;
- (void)_handleCameraCenteredNotification:(id)a3;
- (void)_handleCancelSpeaking:(id)a3;
- (void)_handleCaptionsDisplayedNotification:(id)a3;
- (void)_handleCharacterMovement:(id)a3;
- (void)_handleClearCopiedSpeech;
- (void)_handleColumnMovement:(id)a3;
- (void)_handleContainerMovement:(id)a3;
- (void)_handleContainerMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleContextMenuStatusNotification:(id)a3;
- (void)_handleContinueSpeaking:(id)a3;
- (void)_handleCopiedSpeechRotorMovement:(int64_t)a3;
- (void)_handleCopySpeechToClipboard:(id)a3;
- (void)_handleCurrentContentReadingLineUpdated:(id)a3;
- (void)_handleCurrentStateChanged:(id)a3;
- (void)_handleCursorMovementByTextSegment:(id)a3;
- (void)_handleCustomRotorAction:(id)a3 direction:(int64_t)a4;
- (void)_handleCustomRotorContent:(id)a3 direction:(int64_t)a4;
- (void)_handleDeactivateBrailleScreenInput:(id)a3;
- (void)_handleDecreaseSystemVolume:(id)a3;
- (void)_handleDecreaseVolume:(id)a3;
- (void)_handleDescribeCameraScene:(id)a3;
- (void)_handleDescribeImage:(id)a3;
- (void)_handleDescribedMediaMode:(id)a3 direction:(int64_t)a4;
- (void)_handleDetectionModeMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleDidReceiveVisionEngineResult:(id)a3;
- (void)_handleDirectElementSearch:(id)a3;
- (void)_handleDirectTouchExplorationMode:(id)a3 direction:(int64_t)a4;
- (void)_handleDoubleTap:(id)a3;
- (void)_handleDuckingDisabling:(id)a3;
- (void)_handleEdgeSwipeBottom:(id)a3;
- (void)_handleEdgeSwipeTop:(id)a3;
- (void)_handleElementChangedNotification:(id)a3;
- (void)_handleElementInteraction:(id)a3;
- (void)_handleElementMoveToStatusBar:(id)a3;
- (void)_handleElementMoved:(__AXUIElement *)a3;
- (void)_handleElementMovement:(id)a3;
- (void)_handleElementSearch:(id)a3 rotorType:(int64_t)a4 direction:(int64_t)a5;
- (void)_handleEscape:(id)a3;
- (void)_handleEvent:(id)a3;
- (void)_handleFireStewie;
- (void)_handleFirstResponderChangedNotification:(id)a3;
- (void)_handleFlashlightNotification;
- (void)_handleFocusedElementContentChangeNotification:(id)a3;
- (void)_handleGenericTextSegmentMovement:(id)a3 direction:(int64_t)a4 granulary:(int64_t)a5;
- (void)_handleGuideElementMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleHideDetectionUIWithMagnifierService:(id)a3;
- (void)_handleHintsSettingMode:(id)a3 direction:(int64_t)a4;
- (void)_handleHomeButtonPress;
- (void)_handleIdle:(id)a3;
- (void)_handleImageDescriptionsToggle:(int64_t)a3;
- (void)_handleIncreaseSystemVolume:(id)a3;
- (void)_handleIncreaseVolume:(id)a3;
- (void)_handleIntraContainerMovement:(id)a3;
- (void)_handleInvalidStatusChanged:(id)a3;
- (void)_handleInvalidTextInputNotification:(id)a3;
- (void)_handleItemChooserSelection:(id)a3;
- (void)_handleItemChooserSelectionMade:(id)a3;
- (void)_handleKBPopupVariantsNotification:(id)a3;
- (void)_handleKeyboardChangedNotification;
- (void)_handleKeyboardCommandEvent:(id)a3;
- (void)_handleKeyboardContinuousPathDidBegin:(id)a3;
- (void)_handleKeyboardKeySelectedNotification:(id)a3;
- (void)_handleLabelElement:(id)a3;
- (void)_handleLabelElementAcceptedNotification:(id)a3;
- (void)_handleLaunchDetectionMode:(id)a3;
- (void)_handleLayoutChange:(BOOL)a3;
- (void)_handleLetterMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleLineMovement:(id)a3;
- (void)_handleLineMovementInWeb:(id)a3 direction:(int64_t)a4 existingRequest:(id)a5;
- (void)_handleLiveContinuousToneBeginNotification:(id)a3;
- (void)_handleLiveContinuousToneEndNotification:(id)a3;
- (void)_handleLiveContinuousToneUpdateNotification:(id)a3;
- (void)_handleMLElementModeWithDirection:(int64_t)a3 verboseOutput:(BOOL)a4;
- (void)_handleMapSameElement:(id)a3 forEvent:(id)a4;
- (void)_handleMathGranularMovement:(int64_t)a3 event:(id)a4;
- (void)_handleMisspelledWordRotorAction:(BOOL)a3;
- (void)_handleMonitorElement:(id)a3;
- (void)_handleMoveToElementNotification:(id)a3;
- (void)_handleMoveToLinkedUI:(id)a3;
- (void)_handleMoveToNativeFocusedElement:(id)a3;
- (void)_handleNativeFocusItemChangedNotification:(id)a3;
- (void)_handleNavigationDirectionChangeWithDirection:(int64_t)a3;
- (void)_handleNavigationStyleMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleNextTextOperationInDirection:(int64_t)a3 withEvent:(id)a4;
- (void)_handleNonEditableValueChange:(id)a3;
- (void)_handleOngoingTextSearch:(id)a3;
- (void)_handleOpenVoiceOverOptions:(id)a3;
- (void)_handleOutputCellRowColumnInfo:(id)a3;
- (void)_handleOutputCharacter:(id)a3;
- (void)_handleOutputCharacterPhonetically:(id)a3;
- (void)_handleOutputColumnOrRowContents:(id)a3 row:(BOOL)a4;
- (void)_handleOutputColumnOrRowHeader:(id)a3 row:(BOOL)a4;
- (void)_handleOutputComputerVisionAnalysisSummary:(id)a3 explicitUserRequest:(BOOL)a4;
- (void)_handleOutputElementSummary:(id)a3;
- (void)_handleOutputFocusedElementSummary:(id)a3;
- (void)_handleOutputLineCount:(id)a3;
- (void)_handleOutputTableRowColumnInfo:(id)a3;
- (void)_handleOutputTextStyle:(id)a3;
- (void)_handleParagraphMovement:(id)a3;
- (void)_handlePasteCopiedSpeech;
- (void)_handlePauseSpeaking:(id)a3;
- (void)_handlePauseSpeechAndHapticsNotification:(id)a3;
- (void)_handlePerformAudiographAction:(id)a3;
- (void)_handlePerformCustomAction:(id)a3;
- (void)_handlePerformPressAction:(id)a3;
- (void)_handlePerformTapAutofill:(id)a3;
- (void)_handlePerformTextOperation:(id)a3;
- (void)_handlePlayPauseButtonPress;
- (void)_handlePressActionResultAtTime:(id)a3;
- (void)_handlePublicCustomRotorMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleQuickNavFeedback:(BOOL)a3;
- (void)_handleReadAll:(id)a3;
- (void)_handleReadAllBookContent:(id)a3 fromTop:(BOOL)a4;
- (void)_handleReadAllNextElement;
- (void)_handleReadFromTop:(id)a3;
- (void)_handleReadItemHint:(id)a3;
- (void)_handleReadLine:(id)a3;
- (void)_handleReadScreenSummary:(id)a3;
- (void)_handleReadURL:(id)a3;
- (void)_handleReadWord:(id)a3;
- (void)_handleRealtimeElementMovement:(id)a3;
- (void)_handleRealtimeElementUpdate:(id)a3;
- (void)_handleReconnectBrailleDisplays:(id)a3;
- (void)_handleRequestExclusiveAudioHardware;
- (void)_handleRotateOrientation:(id)a3;
- (void)_handleRotor2DBrailleDisplayMode:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotor2DBrailleEdgeIntensity:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotor2DBrailleInvert:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotor2DBraillePanHorizontal:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotor2DBraillePanVertical:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotor2DBrailleZoom:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotorBrailleAutoAdvanceMovement:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotorBrailleInputLanguageMovement:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotorBrailleLanguageMovement:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotorContinusPathChange:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotorTextSelectionMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleRotorTypingModeMovement:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRotorVoiceMovement:(int64_t)a3 withEvent:(id)a4;
- (void)_handleRowMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleScreenChange:(id)a3 sound:(id)a4;
- (void)_handleScreenLock:(id)a3;
- (void)_handleScreenOff;
- (void)_handleScreenOn;
- (void)_handleScreenWillChangeNotification:(id)a3;
- (void)_handleScreenWillWakeNotification:(id)a3;
- (void)_handleScribbleMovement:(BOOL)a3;
- (void)_handleScrollByPage:(id)a3;
- (void)_handleScrollByPageNotification:(id)a3;
- (void)_handleScrollDownPage:(id)a3;
- (void)_handleScrollToBottom:(id)a3;
- (void)_handleScrollToPoint:(id)a3;
- (void)_handleScrollToTop:(id)a3;
- (void)_handleSearchRotorDirection:(int64_t)a3 event:(id)a4;
- (void)_handleSearchRotorDirection:(int64_t)a3 event:(id)a4 notifyUser:(BOOL)a5;
- (void)_handleSearchRotorEcho:(id)a3;
- (void)_handleSearchRotorMovement:(BOOL)a3 event:(id)a4;
- (void)_handleSearchRotorMovementWithoutRotorUpdateInDirectionUp:(BOOL)a3 event:(id)a4;
- (void)_handleSearchRotorSetMathPosition:(id)a3;
- (void)_handleSearchTextEvent:(id)a3;
- (void)_handleSelectedTextOutput:(id)a3;
- (void)_handleSelectionChangedNotification:(id)a3;
- (void)_handleSendCancelEvent:(id)a3;
- (void)_handleSentenceMovement:(id)a3;
- (void)_handleShowDetectionUIWithMagnifierService:(id)a3;
- (void)_handleShowEditingHUD:(id)a3;
- (void)_handleSimpleTap:(id)a3;
- (void)_handleSimulatedForceTouchEvent:(id)a3;
- (void)_handleSingleLetterSearch:(id)a3;
- (void)_handleSiriFinishedTalking:(id)a3;
- (void)_handleSiriShortcutEvent:(id)a3;
- (void)_handleSiriStartedListening:(id)a3;
- (void)_handleSortDirectionChanged:(id)a3;
- (void)_handleSoundRotorChange:(BOOL)a3;
- (void)_handleSpeakScreen:(id)a3;
- (void)_handleSpeechPhoneticsChange:(BOOL)a3;
- (void)_handleSpeechPunctuationChange:(BOOL)a3;
- (void)_handleSpeechRateChange:(BOOL)a3;
- (void)_handleSpeechRotorChange:(id)a3;
- (void)_handleSpeechRotorValueChange:(id)a3;
- (void)_handleSpeechVoiceChange:(id)a3;
- (void)_handleStartHelpMode:(id)a3;
- (void)_handleStartSiri:(id)a3;
- (void)_handleStartStopTextSelection:(id)a3;
- (void)_handleStartStopToggle:(id)a3;
- (void)_handleStartTextSearch:(id)a3;
- (void)_handleStateReset;
- (void)_handleStewieAnnouncementInRange:(BOOL)a3 heading:(double)a4;
- (void)_handleStopSpeaking;
- (void)_handleStopSpeakingAndClearAllQueues;
- (void)_handleStopSpeakingAndClearQueue;
- (void)_handleSwitchToElementCommunityPrevious:(BOOL)a3 event:(id)a4;
- (void)_handleSwitchToLeftElementCommunity:(id)a3;
- (void)_handleSwitchToRightElementCommunity:(id)a3;
- (void)_handleSystemCommandActivateAccessibilityShortcut:(id)a3;
- (void)_handleSystemCommandActivateLockButton:(id)a3;
- (void)_handleSystemCommandControlCenter:(id)a3;
- (void)_handleSystemCommandNotificationCenter:(id)a3;
- (void)_handleSystemCommandSpotlight:(id)a3;
- (void)_handleSystemCommandSwitchToNextApp:(id)a3;
- (void)_handleSystemCommandSwitchToPreviousApp:(id)a3;
- (void)_handleSystemCommandTakeScreenshot:(id)a3;
- (void)_handleSystemCommandToggleAppSwitcher:(id)a3;
- (void)_handleSystemCommandToggleDock:(id)a3;
- (void)_handleSystemCommandToggleQuickNote:(id)a3;
- (void)_handleSystemCommandToggleReachability:(id)a3;
- (void)_handleSystemControlActivation:(id)a3;
- (void)_handleSystemLockedOutputBehavior:(id)a3 shouldSendRequest:(BOOL *)a4 startElement:(id *)a5;
- (void)_handleSystemVolumeChange:(float)a3;
- (void)_handleTapAndHoldEventMonitor:(id)a3;
- (void)_handleTemporaryScreenCurtainDisablement;
- (void)_handleTextDocumentMovement:(id)a3;
- (void)_handleTextReplacementOccurredNotification:(id)a3;
- (void)_handleTextRotorSelectionAction:(BOOL)a3;
- (void)_handleTextWordMovement:(id)a3;
- (void)_handleToggleBrailleUI:(id)a3;
- (void)_handleToggleCaptionPanel:(id)a3;
- (void)_handleToggleCrownNavigation:(id)a3;
- (void)_handleToggleIgnoreTrackpad:(id)a3;
- (void)_handleToggleKeyboardBraileUI:(id)a3;
- (void)_handleToggleLiveRegions:(int64_t)a3;
- (void)_handleToggleMute:(id)a3;
- (void)_handleTogglePerkinsKeyboardInput:(id)a3;
- (void)_handleToggleQuickNav:(id)a3;
- (void)_handleToggleRotationCapability:(id)a3;
- (void)_handleToggleScreenCurtain:(id)a3;
- (void)_handleToggleSettingsHUD:(id)a3;
- (void)_handleToggleSideApp:(id)a3;
- (void)_handleToggleSideAppIfAvailableInGestures:(id)a3;
- (void)_handleToggleSingleLetterQuickNav:(id)a3;
- (void)_handleToggleSoundCurtain:(id)a3;
- (void)_handleToggleSpeaking:(id)a3;
- (void)_handleToggleTypeToSiri:(id)a3;
- (void)_handleToggleVoiceOverModifierKeyLock:(id)a3;
- (void)_handleTopEdgePanDown:(id)a3;
- (void)_handleTopEdgePanLong:(id)a3;
- (void)_handleTopEdgePanShort:(id)a3;
- (void)_handleTracking:(id)a3;
- (void)_handleTrackingDetailMovement:(BOOL)a3 event:(id)a4;
- (void)_handleTripleTap:(id)a3;
- (void)_handleTypingEchoChange:(BOOL)a3;
- (void)_handleUnmuteEligibleEventOccured;
- (void)_handleUpdateAppFromTimer;
- (void)_handleUpdatedMathElementIndex;
- (void)_handleUsePitchChange:(BOOL)a3;
- (void)_handleUserSelection:(id)a3;
- (void)_handleValidatedCustomActionMovementThroughActions:(id)a3 forEvent:(id)a4 inDirection:(int64_t)a5;
- (void)_handleValueChangedNotification:(id)a3 associatedElement:(id)a4;
- (void)_handleVerticalMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleVolumeChange:(float)a3;
- (void)_handleWatchWakeDoubleTap:(id)a3;
- (void)_handleWatchWakeTap:(id)a3;
- (void)_handleWatchWakeTripleTap:(id)a3;
- (void)_handleWebFormControlInteractionEndNotification:(id)a3;
- (void)_handleWebFormControlInteractionStartNotification:(id)a3;
- (void)_handleWebPageLoaded:(id)a3;
- (void)_handleWebSearchResult:(int64_t)a3 withEvent:(id)a4;
- (void)_handleWebSelection:(id)a3;
- (void)_handleWebSelectionChangedNotification:(id)a3;
- (void)_handleWebTextAvailableNotification:(id)a3;
- (void)_handleWebTextMatchSelectedNotification:(id)a3;
- (void)_handleWordMovement:(id)a3;
- (void)_handleWordMovement:(id)a3 direction:(int64_t)a4;
- (void)_handleZoomMovement:(int64_t)a3 event:(id)a4;
- (void)_hideVisualRotor;
- (void)_initializeCommands;
- (void)_initializeElementManagerThread;
- (void)_initializeSystemEventThread;
- (void)_migratePerAppDirectTouchBehavior;
- (void)_monitorElements;
- (void)_moveCursorForElement:(id)a3 direction:(int64_t)a4 unit:(int64_t)a5;
- (void)_moveDetectionModeRotor:(id)a3;
- (void)_moveFocusToUpdatedRange:(_NSRange)a3 element:(id)a4 searchType:(int64_t)a5;
- (void)_moveToElement:(id)a3 shouldPlaySound:(BOOL)a4 echoSameTouchContainer:(BOOL)a5 shouldScroll:(BOOL)a6 moveToElementNotification:(BOOL)a7 shouldPlayTrackingSound:(BOOL)a8;
- (void)_outputCurrentElementRotor;
- (void)_outputDataDetectorIfPresent:(CGRect)a3 element:(id)a4 includeLinks:(BOOL)a5;
- (void)_outputNavigationDirectionMode:(int64_t)a3;
- (void)_outputNextTextSegmentUnit:(int64_t)a3 direction:(int64_t)a4;
- (void)_outputRequestFinished:(id)a3;
- (void)_outputRotorTypeCount;
- (void)_outputSelectionDifference:(_NSRange)a3 oldRange:(_NSRange)a4 string:(id)a5 language:(id)a6;
- (void)_outputWebLineWithMarkerRange:(id)a3 withElement:(id)a4;
- (void)_pausedSpeechInterrupted:(id)a3;
- (void)_performPressOnElement:(id)a3 withEvent:(id)a4 centerPoint:(CGPoint)a5;
- (void)_performTouchTypingKeyPress:(id)a3;
- (void)_pointerDidMoveToGlobalPoint:(id)a3;
- (void)_processExternalElementUpdate;
- (void)_processExternalScrollToVisible:(id)a3;
- (void)_processMisspelledWordTextReplacement;
- (void)_processPassthroughAllowedWithEvent:(id)a3 initialTouch:(BOOL)a4;
- (void)_processSilentValueChange;
- (void)_processValueChangeWithFirstResponder:(id)a3 existingFirstResponder:(BOOL)a4 changeType:(id)a5 changeOrigination:(int64_t)a6 isQuiet:(BOOL)a7;
- (void)_reachabilityWaitForTrackingTimeout;
- (void)_readExplorerElementsAfterSpeechFinishedTimerFired;
- (void)_reallySimulateLongPressForElement:(id)a3;
- (void)_refreshMathSegmentsIfNeededWithPreferredDirection:(int64_t)a3;
- (void)_resetElementLabel;
- (void)_resetElementUnitIndexes;
- (void)_resetItemChooserCache;
- (void)_resetMathGranularMovementState;
- (void)_resetOtherTapInputModes;
- (void)_resetQuickNavState;
- (void)_reupdateTextSelectionInformation;
- (void)_sendAutomationTouchCommand:(unsigned int)a3 location:(CGPoint)a4;
- (void)_sendBSIStateChangedNotification:(BOOL)a3 usage:(int64_t)a4 preferSingleHand:(BOOL)a5;
- (void)_sendBrailleAlert:(id)a3;
- (void)_sendSystemNotificationForFlashlight;
- (void)_sendUserEventOccurredIfNeeded;
- (void)_setDirectInteractionElement:(id)a3;
- (void)_setElementRotorToNumberType:(id)a3 saveToNumberPreferences:(id)a4 numberUserInitiated:(id)a5;
- (void)_setElementRotorToType:(int64_t)a3 saveToPreferences:(BOOL)a4 userInitiated:(BOOL)a5;
- (void)_setElementUnitIndexesToEndOfElement:(id)a3;
- (void)_setFetchManager:(id)a3;
- (void)_setNearestElementMovingForward:(BOOL)a3;
- (void)_setPreviousTouchTypingKey:(id)a3;
- (void)_setSelectedTextRange:(_NSRange)a3 onElement:(id)a4 refreshBraille:(BOOL)a5 isVoiceOverSelectionMovement:(BOOL)a6;
- (void)_showItemChooser:(id)a3;
- (void)_showVisualRotor:(id)a3 direction:(BOOL)a4;
- (void)_simulatedForceTouchLift;
- (void)_simulatedPressOutputTimer:(id)a3;
- (void)_speak:(id)a3 cannotBeInterrupted:(BOOL)a4 pitch:(int64_t)a5 announcement:(BOOL)a6 brailleOnly:(BOOL)a7;
- (void)_speakBrailleAutoAdvanceSpeed;
- (void)_speakElementFromPointerEvent:(id)a3;
- (void)_speakMessages:(id)a3 cannotBeInterrupted:(BOOL)a4 pitch:(int64_t)a5 announcement:(BOOL)a6 brailleOnly:(BOOL)a7;
- (void)_startReadingBookForNewPage;
- (void)_stopReadAll;
- (void)_switchToOtherRoad;
- (void)_systemNotificationInProgressForRequest:(id)a3;
- (void)_systemServerDied;
- (void)_tvOS_handleUpdateWithNativeFocusFromTimer;
- (void)_tvOS_retryUpdateWithNativeFocus;
- (void)_tvOS_updateWithNativeFocus;
- (void)_tvOS_updateWithNativeFocus:(id)a3 withDelay:(double)a4;
- (void)_tvOS_updateWithNativeFocus:(id)a3 withDelayNumber:(id)a4;
- (void)_updateAnyThreadElementAccess;
- (void)_updateApplicationAndSpeak:(id)a3;
- (void)_updateAutomationAccessibilityApps;
- (void)_updateContextDescriptors;
- (void)_updateContinuousPathTimeout;
- (void)_updateCurrentElementForTextInputSelectionChangeIfNeeded;
- (void)_updateCurrentElementFrame;
- (void)_updateCurrentWordContextForBook:(id)a3;
- (void)_updateCursorFrameAfterLift;
- (void)_updateCursorFrameForElementIfNeeded:(id)a3;
- (void)_updateCursorFrameForLineFrameMovement:(id)a3;
- (void)_updateDisplayWithCurrentElement;
- (void)_updateExplorerElementsIfNeeded;
- (void)_updateExternalAccessory:(id)a3;
- (void)_updateFirstResponder;
- (void)_updateFirstResponderTypingBuffer;
- (void)_updateFlashlightEnabledStatus;
- (void)_updateForContinuityStateChange;
- (void)_updateJindoApplicationCache;
- (void)_updateMLElementAutorefresh;
- (void)_updateMostRecentElementCommunity;
- (void)_updateRotorForCurrentElement;
- (void)_updateRotorForCurrentElement:(id)a3 completion:(id)a4;
- (void)_updateStateForNotificationData:(id)a3;
- (void)_updateSwipeFrames;
- (void)_valueWait:(id)a3 oldValue:(id)a4 waitTime:(double)a5 borderHitIfNoChange:(BOOL)a6;
- (void)_visionEngine:(id)a3 updatedResult:(id)a4 forElement:(id)a5 event:(id)a6 visionOptions:(id)a7;
- (void)_webPageElementFinder;
- (void)_webPageLoadingSound;
- (void)cancelDrag;
- (void)clearExpiredCopiedSpeech;
- (void)deactivateGesturedTextInputIfNeeded:(BOOL)a3;
- (void)dealloc;
- (void)didTerminateDragForDragManager:(id)a3;
- (void)dropDrag;
- (void)elementsCounted:(int64_t)a3;
- (void)elementsRetrieved:(id)a3 finished:(BOOL)a4;
- (void)explorerElementManager:(id)a3 didFinishReadAll:(BOOL)a4;
- (void)explorerElementManager:(id)a3 willReadElement:(id)a4;
- (void)fetchElementsFrom:(id)a3 inDirection:(int64_t)a4 count:(unint64_t)a5 scroll:(BOOL)a6 block:(id)a7;
- (void)gestureRepeater:(id)a3 repeaterEventDidFire:(int64_t)a4;
- (void)gestureRepeaterWillSendFirstRepeaterEvent:(id)a3;
- (void)handleEvent:(id)a3;
- (void)handleHomeButtonPress;
- (void)handleLaunchVoiceOverImageExplorer;
- (void)handleNotification:(int)a3 withData:(id)a4 forElement:(__AXUIElement *)a5;
- (void)handleReachabilityToggled;
- (void)hideVisualRotor;
- (void)moveDragToPoint:(CGPoint)a3;
- (void)observeValueForKeyPath:(id)a3 ofObject:(id)a4 change:(id)a5 context:(void *)a6;
- (void)outputNextTextSegmentUnit:(int64_t)a3 direction:(int64_t)a4 string:(id)a5 element:(id)a6;
- (void)outputTextSegmentForRange:(_NSRange)a3 string:(id)a4 element:(id)a5 usePhonetics:(BOOL)a6 segment:(int64_t)a7;
- (void)pointerDidMoveToGlobalPoint:(CGPoint)a3;
- (void)processExternalScrollToVisible:(CGPoint)a3;
- (void)refreshBraille;
- (void)regionDescriptionForElement:(id)a3 withCompletion:(id)a4;
- (void)removeElementExplorer:(id)a3;
- (void)resetTextAndSelectionCaches;
- (void)rotor:(id)a3 didChangeFrom:(int64_t)a4 to:(int64_t)a5 userInitiated:(BOOL)a6;
- (void)sendRequest:(id)a3;
- (void)setCurrentElement:(id)a3 shouldSetBrailleElement:(BOOL)a4;
- (void)setCurrentElementToWebEditableAncestor;
- (void)setCurrentTextSelectionSegmentType:(int64_t)a3;
- (void)setElementRotorToType:(int64_t)a3 saveToPreferences:(BOOL)a4 userInitiated:(BOOL)a5;
- (void)setExploreFocusAffectsNativeFocus:(BOOL)a3;
- (void)setFirstResponder:(id)a3;
- (void)setShouldSilenceAnnouncements:(BOOL)a3;
- (void)setSpeakNonfocusableElementsAfterDelay:(BOOL)a3;
- (void)showElementLabelPanel:(BOOL)a3 currentLabel:(id)a4;
- (void)toggleDetectionMode;
- (void)tutorialSetRecognizedGesture:(id)a3;
- (void)updateApplicationAndSpeak:(id)a3;
- (void)updateCurrentElementFrame;
- (void)updateIndexesForOutputRange:(_NSRange)a3 segment:(int64_t)a4 direction:(int64_t)a5 outputStringLength:(unint64_t)a6;
- (void)updateRotorForCurrentElement:(BOOL)a3 completion:(id)a4;
- (void)updateRunningApplications;
- (void)updateTitleElementLabels:(id)a3;
- (void)visionEngine:(id)a3 updatedResult:(id)a4 forElement:(id)a5 event:(int64_t)a6 visionOptions:(id)a7;
@end

@implementation VOTElementManager

- (void)_cleanupStateForUnitTesting
{
  self->_lastTextPressAction = 0;
  self->_lastElementChangeAction = 0;
  self->_lastPressOnMediaSessionElement = -3061152000.0;
}

+ (void)initialize
{
  if (!qword_1001FEC40)
  {
    v2 = [objc_allocWithZone(AXIndexMap) init];
    v3 = qword_1001FEC40;
    qword_1001FEC40 = v2;

    v4 = objc_allocWithZone(NSArray);
    v10 = 0u;
    v11 = 0u;
    v12 = 0u;
    v13 = 0u;
    v5 = [v4 initWithObjects:{kVOTEventCommandIncreaseVolume, kVOTEventCommandDecreaseVolume, kVOTEventCommandIdle, kVOTEventCommandToggleScreenCurtain, kVOTEventCommandToggleSoundCurtain, kVOTEventCommandVolumeUpButtonPress, kVOTEventCommandVolumeDownButtonPress, kVOTEventCommandPauseSpeaking, kVOTEventCommandContinueSpeaking, kVOTEventCommandToggleSpeaking, kVOTEventCommandBraillePanRight, kVOTEventCommandBraillePanLeft, kVOTEventCommandBraillePanBeginning, kVOTEventCommandBraillePanEnd, kVOTEventCommandBrailleRefreshBrailleLine, 0}];
    v6 = [v5 countByEnumeratingWithState:&v10 objects:v14 count:16];
    if (v6)
    {
      v7 = v6;
      v8 = *v11;
      do
      {
        v9 = 0;
        do
        {
          if (*v11 != v8)
          {
            objc_enumerationMutation(v5);
          }

          [qword_1001FEC40 setObject:kCFBooleanTrue forIndex:{objc_msgSend(*(*(&v10 + 1) + 8 * v9), "hash")}];
          v9 = v9 + 1;
        }

        while (v7 != v9);
        v7 = [v5 countByEnumeratingWithState:&v10 objects:v14 count:16];
      }

      while (v7);
    }
  }
}

- (VOTElementManager)init
{
  v126.receiver = self;
  v126.super_class = VOTElementManager;
  v2 = [(VOTElementManager *)&v126 init];
  v3 = v2;
  if (v2)
  {
    v2->_lastTextPressAction = 0;
    v2->_lastAlertTime = -3061152000.0;
    v4 = vdupq_n_s64(0xC1E6CEAF20000000);
    *&v2->_timeSpentOnNothing = v4;
    v2->_lastLayoutChangeNotificationTime = -3061152000.0;
    v2->_lastAnnouncementNotificationTime = -3061152000.0;
    *&v2->_lastScreenChangeNotificationTime = v4;
    v2->_lastFirstResponderChangeTime = -3061152000.0;
    *&v2->_lastTemporaryQuickNavDisableTime = v4;
    v2->_lastValueChangeTime = -3061152000.0;
    v2->_lastWebPageLoadTime = -3061152000.0;
    v2->_lastPopupTime = -3061152000.0;
    v2->_lastAdjustValueTime = -3061152000.0;
    v2->_switchedToRoadTime = -3061152000.0;
    v2->_lastSilencedAlertTime = -3061152000.0;
    *&v2->_lastScreenWakeViaPlayPause = v4;
    *&v2->_lastFolderOperationTime = v4;
    v2->_lastWebKeyboardDismissTime = -3061152000.0;
    v2->_lastBlockedRequestBySiriOrDictationTime = -3061152000.0;
    v2->_lastAttemptToShowContextMenuTime = -3061152000.0;
    v2->_lastSentBannerTimerReset = -3061152000.0;
    [(VOTElementManager *)v2 setLastEventCommand:0];
    v3->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
    v5 = objc_alloc_init(_VOTTextMarkerRange);
    textMarkerRange = v3->_textMarkerRange;
    v3->_textMarkerRange = v5;

    v7 = +[NSMutableArray array];
    previousTableOrCollectionViewList = v3->_previousTableOrCollectionViewList;
    v3->_previousTableOrCollectionViewList = v7;

    v9 = +[NSMutableDictionary dictionary];
    previousTableOrCollectionViewToMetadata = v3->_previousTableOrCollectionViewToMetadata;
    v3->_previousTableOrCollectionViewToMetadata = v9;

    v11 = [objc_allocWithZone(VOTElementFetcher) init];
    fetchManager = v3->_fetchManager;
    v3->_fetchManager = v11;

    [(VOTElementFetcher *)v3->_fetchManager setDelegate:v3];
    v13 = [objc_allocWithZone(NSMutableString) init];
    elementTypingBuffer = v3->_elementTypingBuffer;
    v3->_elementTypingBuffer = v13;

    v3->_elementSelectionRangeBufferInternal = xmmword_10017E110;
    v3->_elementSelectionRangeBufferForValueChange = xmmword_10017E110;
    v3->_elementSelectionRangeBufferForSelectionChange = xmmword_10017E110;
    v15 = objc_alloc_init(NSMutableDictionary);
    focusedElementsByElementCommunityIdentifier = v3->_focusedElementsByElementCommunityIdentifier;
    v3->_focusedElementsByElementCommunityIdentifier = v15;

    v3->_anyThreadCurrentElementLock._os_unfair_lock_opaque = 0;
    v17 = objc_alloc_init(SCRCThread);
    elementManagerThread = v3->_elementManagerThread;
    v3->_elementManagerThread = v17;

    v19 = v3->_elementManagerThread;
    v20 = objc_opt_class();
    v21 = NSStringFromClass(v20);
    [(SCRCThread *)v19 setName:v21];

    [(SCRCThread *)v3->_elementManagerThread performSelector:"_initializeElementManagerThread" onTarget:v3 count:0 objects:0];
    v22 = [[SCRCThreadKey alloc] initWithObject:v3];
    threadKey = v3->_threadKey;
    v3->_threadKey = v22;

    v24 = objc_alloc_init(SCRCThread);
    systemEventThread = v3->_systemEventThread;
    v3->_systemEventThread = v24;

    [(SCRCThread *)v3->_systemEventThread setName:@"VOTSystemEvent"];
    [(SCRCThread *)v3->_systemEventThread performSelector:"_initializeSystemEventThread" onTarget:v3 count:0 objects:0];
    v26 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_drawTouchContainerFrame" thread:v3->_elementManagerThread];
    containerFrameDrawingTimer = v3->_containerFrameDrawingTimer;
    v3->_containerFrameDrawingTimer = v26;

    v28 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_hideVisualRotor" thread:v3->_elementManagerThread];
    visualRotorFadeTimer = v3->_visualRotorFadeTimer;
    v3->_visualRotorFadeTimer = v28;

    v30 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_handleLayoutChangeFromTimer" thread:v3->_elementManagerThread];
    updateLayoutTimer = v3->_updateLayoutTimer;
    v3->_updateLayoutTimer = v30;

    v32 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_appSuspensionSoundTimer" thread:v3->_elementManagerThread];
    appSuspensionSoundTimer = v3->_appSuspensionSoundTimer;
    v3->_appSuspensionSoundTimer = v32;

    v34 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_simulatedPressOutputTimer:" thread:v3->_elementManagerThread];
    simulatedPressOutputTimer = v3->_simulatedPressOutputTimer;
    v3->_simulatedPressOutputTimer = v34;

    v36 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_switchToOtherRoad" thread:v3->_elementManagerThread];
    switchRoadsAtIntersectionTimer = v3->_switchRoadsAtIntersectionTimer;
    v3->_switchRoadsAtIntersectionTimer = v36;

    v38 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_activateAlternativeKeyboardKey:" thread:v3->_elementManagerThread];
    keyboardAlternativeModeActivationTimer = v3->_keyboardAlternativeModeActivationTimer;
    v3->_keyboardAlternativeModeActivationTimer = v38;

    v40 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_dismissAlternativeKeyboardKeys" thread:v3->_elementManagerThread];
    alternativeKeyDismissalTimer = v3->_alternativeKeyDismissalTimer;
    v3->_alternativeKeyDismissalTimer = v40;

    v42 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_continuousPathIdleTimer:" thread:v3->_elementManagerThread];
    continuousPathIdleTimer = v3->_continuousPathIdleTimer;
    v3->_continuousPathIdleTimer = v42;

    v44 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:0 thread:v3->_elementManagerThread];
    elementMonitorTimer = v3->_elementMonitorTimer;
    v3->_elementMonitorTimer = v44;

    v46 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_speakElementFromPointerEvent:" thread:v3->_elementManagerThread];
    pointerSpeakElementTimer = v3->_pointerSpeakElementTimer;
    v3->_pointerSpeakElementTimer = v46;

    [(SCRCTargetSelectorTimer *)v3->_appSuspensionSoundTimer cancel];
    v48 = [[SCRCTargetSelectorTimer alloc] initWithTarget:v3 selector:"_elementUpdatesFrequently" thread:v3->_elementManagerThread];
    elementUpdatesFrequentlyTimer = v3->_elementUpdatesFrequentlyTimer;
    v3->_elementUpdatesFrequentlyTimer = v48;

    v50 = +[NSNotificationCenter defaultCenter];
    [v50 addObserver:v3 selector:"_pausedSpeechInterrupted:" name:off_1001FDB20 object:0];

    *&v3->_didPeekEvent = 0;
    v51 = objc_alloc_init(NSMutableArray);
    touchEventElements = v3->_touchEventElements;
    v3->_touchEventElements = v51;

    v53 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_simulatedForceTouchLift" thread:v3->_elementManagerThread];
    simulatedForceLiftTimer = v3->_simulatedForceLiftTimer;
    v3->_simulatedForceLiftTimer = v53;

    v55 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_handleUpdateAppFromTimer" thread:v3->_elementManagerThread];
    updateAppFromTimer = v3->_updateAppFromTimer;
    v3->_updateAppFromTimer = v55;

    v57 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:v3 selector:"_reachabilityWaitForTrackingTimeout" thread:v3->_elementManagerThread];
    reachabilityWaitForTrackingTimer = v3->_reachabilityWaitForTrackingTimer;
    v3->_reachabilityWaitForTrackingTimer = v57;

    DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
    CFNotificationCenterAddObserver(DarwinNotifyCenter, v3, sub_10005A0B8, kAXSVoiceOverJindoHostedApplicationsChangedNotification, 0, CFNotificationSuspensionBehaviorDeliverImmediately);
    v60 = CFNotificationCenterGetDarwinNotifyCenter();
    CFNotificationCenterAddObserver(v60, v3, sub_10005A0C0, kAXSContinuityDisplayStateChangedNotification, 0, CFNotificationSuspensionBehaviorDeliverImmediately);
    v61 = objc_opt_new();
    elementMonitorCache = v3->_elementMonitorCache;
    v3->_elementMonitorCache = v61;

    v63 = [objc_allocWithZone(AXIndexMap) init];
    commands = v3->_commands;
    v3->_commands = v63;

    v65 = objc_alloc_init(NSMutableDictionary);
    fingersFromTouchCommands = v3->_fingersFromTouchCommands;
    v3->_fingersFromTouchCommands = v65;

    v67 = [objc_allocWithZone(VOTElementRotor) init];
    elementRotor = v3->_elementRotor;
    v3->_elementRotor = v67;

    [(VOTRotor *)v3->_elementRotor setDelegate:v3];
    v69 = [objc_allocWithZone(VOTSpeechRotor) init];
    speechRotor = v3->_speechRotor;
    v3->_speechRotor = v69;

    v71 = [[VOTTextMovementManager alloc] initWithSegments:&off_1001DB708];
    textSelectionMovementManager = v3->_textSelectionMovementManager;
    v3->_textSelectionMovementManager = v71;

    v3->_elementMathIndex = 0x7FFFFFFFFFFFFFFFLL;
    v3->_elementMathSegmentGranularity = 0;
    v73 = [objc_allocWithZone(NSMutableDictionary) init];
    lastSeenFontProperties = v3->_lastSeenFontProperties;
    v3->_lastSeenFontProperties = v73;

    [(VOTElementManager *)v3 _migratePerAppDirectTouchBehavior];
    v75 = objc_alloc_init(NSMutableSet);
    directInteractionElements = v3->_directInteractionElements;
    v3->_directInteractionElements = v75;

    v77 = objc_alloc_init(NSMutableArray);
    cachedLaunchIcons = v3->_cachedLaunchIcons;
    v3->_cachedLaunchIcons = v77;

    v79 = objc_alloc_init(NSLock);
    trackingLock = v3->_trackingLock;
    v3->_trackingLock = v79;

    [(VOTElementManager *)v3 _resetElementUnitIndexes];
    [(VOTElementManager *)v3 _initializeCommands];
    objc_initWeak(&location, v3);
    [(VOTElementManager *)v3 _updateContinuousPathTimeout];
    v81 = +[AXSettings sharedInstance];
    v123[0] = _NSConcreteStackBlock;
    v123[1] = 3221225472;
    v123[2] = sub_10005A0E0;
    v123[3] = &unk_1001C78D8;
    objc_copyWeak(&v124, &location);
    [v81 registerUpdateBlock:v123 forRetrieveSelector:"voiceOverContinuousPathKeyboardStartTimeout" withListener:v3];

    objc_destroyWeak(&v124);
    v82 = +[AXSettings sharedInstance];
    v121[0] = _NSConcreteStackBlock;
    v121[1] = 3221225472;
    v121[2] = sub_10005A120;
    v121[3] = &unk_1001C78D8;
    objc_copyWeak(&v122, &location);
    [v82 registerUpdateBlock:v121 forRetrieveSelector:"voiceOverRotorItems" withListener:v3];

    objc_destroyWeak(&v122);
    v83 = +[AXSettings sharedInstance];
    v84 = [v83 voiceOverDirectTouchEnabledApps];
    v85 = [v84 mutableCopy];
    [(VOTElementManager *)v3 setDirectTouchApps:v85];

    v86 = +[AXSettings sharedInstance];
    v119[0] = _NSConcreteStackBlock;
    v119[1] = 3221225472;
    v119[2] = sub_10005A168;
    v119[3] = &unk_1001C78D8;
    objc_copyWeak(&v120, &location);
    [v86 registerUpdateBlock:v119 forRetrieveSelector:"voiceOverDirectTouchEnabledApps" withListener:v3];

    objc_destroyWeak(&v120);
    v117[0] = _NSConcreteStackBlock;
    v117[1] = 3221225472;
    v117[2] = sub_10005A1F4;
    v117[3] = &unk_1001C76E8;
    v87 = v3;
    v118 = v87;
    v88 = objc_retainBlock(v117);
    v89 = +[AXSettings sharedInstance];
    [v89 registerUpdateBlock:v88 forRetrieveSelector:"automaticAccessibilityModes" withListener:v87];

    (v88[2])(v88);
    if (MGGetBoolAnswer() && _os_feature_enabled_impl())
    {
      [v87 _updateFlashlightEnabledStatus];
      v90 = +[AXSettings sharedInstance];
      v115[0] = _NSConcreteStackBlock;
      v115[1] = 3221225472;
      v115[2] = sub_10005A214;
      v115[3] = &unk_1001C78D8;
      objc_copyWeak(&v116, &location);
      [v90 registerUpdateBlock:v115 forRetrieveSelector:"voiceOverFlashlightNotificationsEnabled" withListener:v87];

      objc_destroyWeak(&v116);
    }

    v91 = objc_alloc_init(AXScribbleManager);
    v92 = v87[263];
    v87[263] = v91;

    v93 = objc_alloc_init(NSMutableDictionary);
    v94 = v87[314];
    v87[314] = v93;

    if (([VOTSharedWorkspace inUnitTestMode] & 1) == 0 && +[AXSpringBoardServer isAvailable](AXSpringBoardServer, "isAvailable"))
    {
      v95 = +[AXSpringBoardServer server];
      v113[0] = _NSConcreteStackBlock;
      v113[1] = 3221225472;
      v113[2] = sub_10005A254;
      v113[3] = &unk_1001C8CC8;
      objc_copyWeak(&v114, &location);
      v111[0] = _NSConcreteStackBlock;
      v111[1] = 3221225472;
      v111[2] = sub_10005A320;
      v111[3] = &unk_1001C8CF0;
      objc_copyWeak(&v112, &location);
      [v95 registerSpringBoardActionHandler:v113 withIdentifierCallback:v111];

      objc_destroyWeak(&v112);
      objc_destroyWeak(&v114);
    }

    v96 = +[VOTWorkspace sharedWorkspace];
    v97 = [v96 visionEngine];
    [v97 setResultUpdateDelegate:v87];

    v87[325] = 0xC1E6CEAF20000000;
    v87[236] = 0x7FFFFFFFFFFFFFFFLL;
    *(v87 + 200) = -1;
    v98 = [AXDragManager alloc];
    v99 = [v98 initWithMachServiceName:AXDragServiceNameVoiceOver];
    v100 = v87[253];
    v87[253] = v99;

    [v87[253] setDelegate:v87];
    v101 = objc_opt_new();
    v102 = v87[254];
    v87[254] = v101;

    v103 = +[AXSettings sharedInstance];
    LODWORD(v97) = [v103 laserEnabled];

    if (v97)
    {
      v104 = +[VOTDisplayManager displayManager];
      [v104 registerForPointerEvents:v87];
    }

    v105 = +[AXPISystemActionHelper sharedInstance];
    [v105 warm];

    v106 = objc_opt_new();
    v107 = v87[352];
    v87[352] = v106;

    v108 = objc_opt_new();
    v109 = v87[264];
    v87[264] = v108;

    [v87 _updateForContinuityStateChange];
    objc_destroyWeak(&location);
  }

  return v3;
}

- (void)dealloc
{
  v3 = +[VOTOutputManager outputManager];
  [v3 removeOutputManagerObserver:self];

  [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:0];
  startTrackingRoadRequest = self->_startTrackingRoadRequest;
  self->_startTrackingRoadRequest = 0;

  [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCompletionDelegate:0];
  switchRoadsOutputRequest = self->_switchRoadsOutputRequest;
  self->_switchRoadsOutputRequest = 0;

  [(VOTOutputRequest *)self->_endOfRoadApproachingRequest setCompletionDelegate:0];
  endOfRoadApproachingRequest = self->_endOfRoadApproachingRequest;
  self->_endOfRoadApproachingRequest = 0;

  [(VOTOutputRequest *)self->_bookPageContentOutputRequest setCompletionDelegate:0];
  bookPageContentOutputRequest = self->_bookPageContentOutputRequest;
  self->_bookPageContentOutputRequest = 0;

  [(VOTOutputRequest *)self->_readAllOutputRequest setCompletionDelegate:0];
  readAllOutputRequest = self->_readAllOutputRequest;
  self->_readAllOutputRequest = 0;

  [(VOTOutputRequest *)self->_announcementRequest setCompletionDelegate:0];
  announcementRequest = self->_announcementRequest;
  self->_announcementRequest = 0;

  bookPageScrollString = self->_bookPageScrollString;
  self->_bookPageScrollString = 0;

  v11 = +[AXSpringBoardServer server];
  [v11 removeActionHandler:self->_springBoardActionHandlerIdentifier];

  [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer invalidate];
  visualRotorFadeTimer = self->_visualRotorFadeTimer;
  self->_visualRotorFadeTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer invalidate];
  [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer invalidate];
  keyboardAlternativeModeActivationTimer = self->_keyboardAlternativeModeActivationTimer;
  self->_keyboardAlternativeModeActivationTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer invalidate];
  alternativeKeyDismissalTimer = self->_alternativeKeyDismissalTimer;
  self->_alternativeKeyDismissalTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer invalidate];
  containerFrameDrawingTimer = self->_containerFrameDrawingTimer;
  self->_containerFrameDrawingTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer invalidate];
  webPageLoadingSoundTimer = self->_webPageLoadingSoundTimer;
  self->_webPageLoadingSoundTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_invalidStatusChangedTimer invalidate];
  invalidStatusChangedTimer = self->_invalidStatusChangedTimer;
  self->_invalidStatusChangedTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_appSuspensionSoundTimer invalidate];
  appSuspensionSoundTimer = self->_appSuspensionSoundTimer;
  self->_appSuspensionSoundTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer invalidate];
  updateLayoutTimer = self->_updateLayoutTimer;
  self->_updateLayoutTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_simulatedPressOutputTimer invalidate];
  simulatedPressOutputTimer = self->_simulatedPressOutputTimer;
  self->_simulatedPressOutputTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer invalidate];
  switchRoadsAtIntersectionTimer = self->_switchRoadsAtIntersectionTimer;
  self->_switchRoadsAtIntersectionTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_simulatedForceLiftTimer invalidate];
  simulatedForceLiftTimer = self->_simulatedForceLiftTimer;
  self->_simulatedForceLiftTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer invalidate];
  updateAppFromTimer = self->_updateAppFromTimer;
  self->_updateAppFromTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateWithNativeFocusTimer invalidate];
  updateWithNativeFocusTimer = self->_updateWithNativeFocusTimer;
  self->_updateWithNativeFocusTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updateVisualsTimer invalidate];
  updateVisualsTimer = self->_updateVisualsTimer;
  self->_updateVisualsTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_updatePreferredTVInteractionModeTimer invalidate];
  updatePreferredTVInteractionModeTimer = self->_updatePreferredTVInteractionModeTimer;
  self->_updatePreferredTVInteractionModeTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer invalidate];
  elementUpdatesFrequentlyTimer = self->_elementUpdatesFrequentlyTimer;
  self->_elementUpdatesFrequentlyTimer = 0;

  [(SCRCTargetSelectorTimer *)self->_reachabilityWaitForTrackingTimer invalidate];
  reachabilityWaitForTrackingTimer = self->_reachabilityWaitForTrackingTimer;
  self->_reachabilityWaitForTrackingTimer = 0;

  [(SCRCThread *)self->_elementManagerThread performSelector:"_exitThread:" onTarget:objc_opt_class() count:1 objects:self->_elementManagerThread, 0];
  DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
  CFNotificationCenterRemoveEveryObserver(DarwinNotifyCenter, self);
  v30.receiver = self;
  v30.super_class = VOTElementManager;
  [(VOTElementManager *)&v30 dealloc];
}

+ (void)_exitThread:(id)a3
{
  [a3 setIsInvalid:1];

  +[NSThread exit];
}

- (void)_initializeElementManagerThread
{
  AXSetThreadPriority();
  v4 = +[NSThread currentThread];
  v2 = objc_opt_class();
  v3 = NSStringFromClass(v2);
  [v4 setName:v3];
}

- (void)_initializeSystemEventThread
{
  AXSetThreadPriority();
  v2 = +[NSThread currentThread];
  [v2 setName:@"VOTSystemEvent"];
}

- (void)_migratePerAppDirectTouchBehavior
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 voiceOverDirectTouchEnabledApps];

  if (v4)
  {
    v44 = 0u;
    v45 = 0u;
    v42 = 0u;
    v43 = 0u;
    v5 = [LSApplicationRecord enumeratorWithOptions:0];
    v6 = [v5 countByEnumeratingWithState:&v42 objects:v49 count:16];
    if (v6)
    {
      v7 = v6;
      v8 = *v43;
      while (2)
      {
        for (i = 0; i != v7; i = i + 1)
        {
          if (*v43 != v8)
          {
            objc_enumerationMutation(v5);
          }

          v10 = *(*(&v42 + 1) + 8 * i);
          v11 = +[AXSettings sharedInstance];
          v12 = [v11 voiceOverDirectTouchEnabledApps];
          v13 = [v10 bundleIdentifier];
          v14 = [v12 objectForKeyedSubscript:v13];

          if (!v14)
          {

            goto LABEL_12;
          }
        }

        v7 = [v5 countByEnumeratingWithState:&v42 objects:v49 count:16];
        if (v7)
        {
          continue;
        }

        break;
      }
    }
  }

  else
  {
LABEL_12:
    v15 = +[VOTConfiguration rootConfiguration];
    v16 = [v15 preferenceForKey:@"DirectTouchMode"];
    v17 = v16;
    v18 = &__kCFBooleanTrue;
    if (v16)
    {
      v18 = v16;
    }

    v5 = v18;

    v19 = [(VOTElementManager *)self directTouchApps];

    if (!v19)
    {
      v20 = objc_opt_new();
      [(VOTElementManager *)self setDirectTouchApps:v20];
    }

    v40 = 0u;
    v41 = 0u;
    v38 = 0u;
    v39 = 0u;
    v21 = [LSApplicationRecord enumeratorWithOptions:0, 0];
    v22 = [v21 countByEnumeratingWithState:&v38 objects:v48 count:16];
    if (v22)
    {
      v23 = v22;
      v24 = *v39;
      do
      {
        for (j = 0; j != v23; j = j + 1)
        {
          if (*v39 != v24)
          {
            objc_enumerationMutation(v21);
          }

          v26 = *(*(&v38 + 1) + 8 * j);
          v27 = [(VOTElementManager *)self directTouchApps];
          v28 = [v26 bundleIdentifier];
          [v27 setObject:v5 forKeyedSubscript:v28];
        }

        v23 = [v21 countByEnumeratingWithState:&v38 objects:v48 count:16];
      }

      while (v23);
    }

    v29 = [(VOTElementManager *)self directTouchApps];
    v30 = +[AXSettings sharedInstance];
    [v30 setVoiceOverDirectTouchEnabledApps:v29];

    v31 = VOTLogCommon();
    if (os_log_type_enabled(v31, OS_LOG_TYPE_INFO))
    {
      v32 = [(VOTElementManager *)self directTouchApps];
      *buf = 138412290;
      v47 = v32;
      _os_log_impl(&_mh_execute_header, v31, OS_LOG_TYPE_INFO, "1: %@", buf, 0xCu);
    }

    v33 = VOTLogCommon();
    if (os_log_type_enabled(v33, OS_LOG_TYPE_INFO))
    {
      *buf = 138412290;
      v47 = v5;
      _os_log_impl(&_mh_execute_header, v33, OS_LOG_TYPE_INFO, "Migrate direct touch settings with default value: %@", buf, 0xCu);
    }

    v34 = VOTLogCommon();
    if (os_log_type_enabled(v34, OS_LOG_TYPE_INFO))
    {
      v35 = +[AXSettings sharedInstance];
      v36 = [v35 voiceOverDirectTouchEnabledApps];
      *buf = 138412290;
      v47 = v36;
      _os_log_impl(&_mh_execute_header, v34, OS_LOG_TYPE_INFO, "2: %@", buf, 0xCu);
    }

    v37 = +[VOTConfiguration rootConfiguration];
    [v37 setPreference:0 forKey:@"DirectTouchMode"];
  }
}

- (void)pointerDidMoveToGlobalPoint:(CGPoint)a3
{
  y = a3.y;
  x = a3.x;
  if (([VOTSharedWorkspace speakUnderPointer] & 1) != 0 || objc_msgSend(VOTSharedWorkspace, "pointerVoiceOverCursorOption") == 2)
  {
    elementManagerThread = self->_elementManagerThread;
    v7 = [NSValue valueWithCGPoint:x, y];
    [(SCRCThread *)elementManagerThread performSelector:"_pointerDidMoveToGlobalPoint:" onTarget:self cancelMask:0xFFFFFFFFLL count:1 objects:v7];
  }
}

- (void)_pointerDidMoveToGlobalPoint:(id)a3
{
  [a3 CGPointValue];
  v9 = [[VOTElement alloc] initWithPosition:v4, v5];
  if ([VOTSharedWorkspace pointerVoiceOverCursorOption] == 2)
  {
    if (v9)
    {
      v6 = [(VOTElementManager *)self _currentElement];
      v7 = [(VOTElement *)v9 isEqual:v6];

      if ((v7 & 1) == 0)
      {
        [(VOTElementManager *)self _echoDifferentElement:v9 forEvent:0];
      }
    }
  }

  else if ([VOTSharedWorkspace speakUnderPointer])
  {
    pointerSpeakElementTimer = self->_pointerSpeakElementTimer;
    [VOTSharedWorkspace speakUnderPointerDelay];
    [(SCRCTargetSelectorTimer *)pointerSpeakElementTimer dispatchAfterDelay:v9 withObject:?];
  }
}

- (void)_speakElementFromPointerEvent:(id)a3
{
  v6 = a3;
  if (([v6 isEqual:self->_lastSpeakUnderPointerElement] & 1) == 0)
  {
    objc_storeStrong(&self->_lastSpeakUnderPointerElement, a3);
    LOWORD(v5) = 0;
    [(VOTElementManager *)self _echoDifferentElement:v6 forEvent:0 onlyOutputTouchContainerAndSounds:0 canSetAsCurrentElement:0 shouldPlayGuideWireSound:0 isProtectedApp:0 includeHint:v5 boundaryHit:?];
  }
}

- (void)_initializeCommands
{
  commands = self->_commands;
  v4 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTracking:"];
  -[AXIndexMap setObject:forIndex:](commands, "setObject:forIndex:", v4, [kVOTEventCommandTracking hash]);

  v5 = self->_commands;
  v6 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTapAndHoldEventMonitor:"];
  -[AXIndexMap setObject:forIndex:](v5, "setObject:forIndex:", v6, [kVOTEventCommandTapAndHoldEventMonitor hash]);

  v7 = self->_commands;
  v8 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIdle:"];
  -[AXIndexMap setObject:forIndex:](v7, "setObject:forIndex:", v8, [kVOTEventCommandIdle hash]);

  v9 = self->_commands;
  v10 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimulatedLongPress:"];
  -[AXIndexMap setObject:forIndex:](v9, "setObject:forIndex:", v10, [kVOTEventCommandSimulatedLongPress hash]);

  v11 = self->_commands;
  v12 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformHomeButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v11, "setObject:forIndex:", v12, [kVOTEventCommandHomeButtonPress hash]);

  v13 = self->_commands;
  v14 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartSiri:"];
  -[AXIndexMap setObject:forIndex:](v13, "setObject:forIndex:", v14, [kVOTEventCommandStartSiri hash]);

  v15 = self->_commands;
  v16 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v15, "setObject:forIndex:", v16, [kVOTEventCommandPreviousElement hash]);

  v17 = self->_commands;
  v18 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v17, "setObject:forIndex:", v18, [kVOTEventCommandNextElement hash]);

  v19 = self->_commands;
  v20 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v19, "setObject:forIndex:", v20, [kVOTEventCommandFirstElement hash]);

  v21 = self->_commands;
  v22 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v21, "setObject:forIndex:", v22, [kVOTEventCommandLastElement hash]);

  v23 = self->_commands;
  v24 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v23, "setObject:forIndex:", v24, [kVOTEventCommandCenterElement hash]);

  v25 = self->_commands;
  v26 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToElementAbove:"];
  -[AXIndexMap setObject:forIndex:](v25, "setObject:forIndex:", v26, [kVOTEventCommandElementAbove hash]);

  v27 = self->_commands;
  v28 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToElementBelow:"];
  -[AXIndexMap setObject:forIndex:](v27, "setObject:forIndex:", v28, [kVOTEventCommandElementBelow hash]);

  v29 = self->_commands;
  v30 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementInteraction:"];
  -[AXIndexMap setObject:forIndex:](v29, "setObject:forIndex:", v30, [kVOTEventCommandMoveIn hash]);

  v31 = self->_commands;
  v32 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementInteraction:"];
  -[AXIndexMap setObject:forIndex:](v31, "setObject:forIndex:", v32, [kVOTEventCommandMoveOut hash]);

  v33 = self->_commands;
  v34 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v33, "setObject:forIndex:", v34, [kVOTEventCommandFirstWord hash]);

  v35 = self->_commands;
  v36 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v35, "setObject:forIndex:", v36, [kVOTEventCommandLastWord hash]);

  v37 = self->_commands;
  v38 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextDocumentMovement:"];
  -[AXIndexMap setObject:forIndex:](v37, "setObject:forIndex:", v38, [kVOTEventCommandDocumentTop hash]);

  v39 = self->_commands;
  v40 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTextDocumentMovement:"];
  -[AXIndexMap setObject:forIndex:](v39, "setObject:forIndex:", v40, [kVOTEventCommandDocumentBottom hash]);

  v41 = self->_commands;
  v42 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleElementMoveToStatusBar:"];
  -[AXIndexMap setObject:forIndex:](v41, "setObject:forIndex:", v42, [kVOTEventCommandMoveToStatusBar hash]);

  v43 = self->_commands;
  v44 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCharacterMovement:"];
  -[AXIndexMap setObject:forIndex:](v43, "setObject:forIndex:", v44, [kVOTEventCommandNextCharacter hash]);

  v45 = self->_commands;
  v46 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCharacterMovement:"];
  -[AXIndexMap setObject:forIndex:](v45, "setObject:forIndex:", v46, [kVOTEventCommandPreviousCharacter hash]);

  v47 = self->_commands;
  v48 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v47, "setObject:forIndex:", v48, [kVOTEventCommandNextWord hash]);

  v49 = self->_commands;
  v50 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWordMovement:"];
  -[AXIndexMap setObject:forIndex:](v49, "setObject:forIndex:", v50, [kVOTEventCommandPreviousWord hash]);

  v51 = self->_commands;
  v52 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLineMovement:"];
  -[AXIndexMap setObject:forIndex:](v51, "setObject:forIndex:", v52, [kVOTEventCommandNextLine hash]);

  v53 = self->_commands;
  v54 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLineMovement:"];
  -[AXIndexMap setObject:forIndex:](v53, "setObject:forIndex:", v54, [kVOTEventCommandPreviousLine hash]);

  v55 = self->_commands;
  v56 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSentenceMovement:"];
  -[AXIndexMap setObject:forIndex:](v55, "setObject:forIndex:", v56, [kVOTEventCommandNextSentence hash]);

  v57 = self->_commands;
  v58 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSentenceMovement:"];
  -[AXIndexMap setObject:forIndex:](v57, "setObject:forIndex:", v58, [kVOTEventCommandPreviousSentence hash]);

  v59 = self->_commands;
  v60 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleParagraphMovement:"];
  -[AXIndexMap setObject:forIndex:](v59, "setObject:forIndex:", v60, [kVOTEventCommandNextParagraph hash]);

  v61 = self->_commands;
  v62 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleParagraphMovement:"];
  -[AXIndexMap setObject:forIndex:](v61, "setObject:forIndex:", v62, [kVOTEventCommandPreviousParagraph hash]);

  v63 = self->_commands;
  v64 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCursorMovementByTextSegment:"];
  -[AXIndexMap setObject:forIndex:](v63, "setObject:forIndex:", v64, [kVOTEventCommandNextTextSegment hash]);

  v65 = self->_commands;
  v66 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCursorMovementByTextSegment:"];
  -[AXIndexMap setObject:forIndex:](v65, "setObject:forIndex:", v66, [kVOTEventCommandPreviousTextSegment hash]);

  v67 = self->_commands;
  v68 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v67, "setObject:forIndex:", v68, [kVOTEventCommandPreviousContainer hash]);

  v69 = self->_commands;
  v70 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v69, "setObject:forIndex:", v70, [kVOTEventCommandNextContainer hash]);

  v71 = self->_commands;
  v72 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIntraContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v71, "setObject:forIndex:", v72, [kVOTEventCommandContainerTop hash]);

  v73 = self->_commands;
  v74 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIntraContainerMovement:"];
  -[AXIndexMap setObject:forIndex:](v73, "setObject:forIndex:", v74, [kVOTEventCommandContainerBottom hash]);

  v75 = self->_commands;
  v76 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIncreaseVolume:"];
  -[AXIndexMap setObject:forIndex:](v75, "setObject:forIndex:", v76, [kVOTEventCommandIncreaseVolume hash]);

  v77 = self->_commands;
  v78 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDecreaseVolume:"];
  -[AXIndexMap setObject:forIndex:](v77, "setObject:forIndex:", v78, [kVOTEventCommandDecreaseVolume hash]);

  v79 = self->_commands;
  v80 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleIncreaseSystemVolume:"];
  -[AXIndexMap setObject:forIndex:](v79, "setObject:forIndex:", v80, [kVOTEventCommandIncreaseSystemVolume hash]);

  v81 = self->_commands;
  v82 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDecreaseSystemVolume:"];
  -[AXIndexMap setObject:forIndex:](v81, "setObject:forIndex:", v82, [kVOTEventCommandDecreaseSystemVolume hash]);

  v83 = self->_commands;
  v84 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRotateOrientation:"];
  -[AXIndexMap setObject:forIndex:](v83, "setObject:forIndex:", v84, [kVOTEventCommandRotateOrientationLeft hash]);

  v85 = self->_commands;
  v86 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRotateOrientation:"];
  -[AXIndexMap setObject:forIndex:](v85, "setObject:forIndex:", v86, [kVOTEventCommandRotateOrientationRight hash]);

  v87 = self->_commands;
  v88 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputColumnHeader:"];
  -[AXIndexMap setObject:forIndex:](v87, "setObject:forIndex:", v88, [kVOTEventCommandOutputColumnHeader hash]);

  v89 = self->_commands;
  v90 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputColumnContents:"];
  -[AXIndexMap setObject:forIndex:](v89, "setObject:forIndex:", v90, [kVOTEventCommandOutputContentsOfColumn hash]);

  v91 = self->_commands;
  v92 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputCharacter:"];
  -[AXIndexMap setObject:forIndex:](v91, "setObject:forIndex:", v92, [kVOTEventCommandOutputCharacter hash]);

  v93 = self->_commands;
  v94 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputCharacterPhonetically:"];
  -[AXIndexMap setObject:forIndex:](v93, "setObject:forIndex:", v94, [kVOTEventCommandOutputCharacterPhonetically hash]);

  v95 = self->_commands;
  v96 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputTableRowColumnInfo:"];
  -[AXIndexMap setObject:forIndex:](v95, "setObject:forIndex:", v96, [kVOTEventCommandOutputTableRowColumnInfo hash]);

  v97 = self->_commands;
  v98 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputCellRowColumnInfo:"];
  -[AXIndexMap setObject:forIndex:](v97, "setObject:forIndex:", v98, [kVOTEventCommandOutputCellRowColumnInfo hash]);

  v99 = self->_commands;
  v100 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputRowContents:"];
  -[AXIndexMap setObject:forIndex:](v99, "setObject:forIndex:", v100, [kVOTEventCommandOutputContentsOfRow hash]);

  v101 = self->_commands;
  v102 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRealtimeElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v101, "setObject:forIndex:", v102, [kVOTEventCommandNextRealtimeElement hash]);

  v103 = self->_commands;
  v104 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleRealtimeElementMovement:"];
  -[AXIndexMap setObject:forIndex:](v103, "setObject:forIndex:", v104, [kVOTEventCommandPreviousRealtimeElement hash]);

  v105 = self->_commands;
  v106 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleShowEditingHUD:"];
  -[AXIndexMap setObject:forIndex:](v105, "setObject:forIndex:", v106, [kVOTEventCommandShowEditingHUD hash]);

  v107 = self->_commands;
  v108 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v107, "setObject:forIndex:", v108, [kVOTEventCommandSystemShowControlCenter hash]);

  v109 = self->_commands;
  v110 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v109, "setObject:forIndex:", v110, [kVOTEventCommandSystemShowNotificationCenter hash]);

  v111 = self->_commands;
  v112 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleTypeToSiri:"];
  -[AXIndexMap setObject:forIndex:](v111, "setObject:forIndex:", v112, [kVOTEventCommandSystemToggleTypeToSiri hash]);

  v113 = self->_commands;
  v114 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v113, "setObject:forIndex:", v114, [kVOTEventCommandSystemControlRight hash]);

  v115 = self->_commands;
  v116 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v115, "setObject:forIndex:", v116, [kVOTEventCommandSystemControlLeft hash]);

  v117 = self->_commands;
  v118 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemControlActivation:"];
  -[AXIndexMap setObject:forIndex:](v117, "setObject:forIndex:", v118, [kVOTEventCommandSystemControlTwoTop hash]);

  v119 = self->_commands;
  v120 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandNotificationCenter:"];
  -[AXIndexMap setObject:forIndex:](v119, "setObject:forIndex:", v120, [kVOTEventCommandSystemShowNotificationCenter hash]);

  v121 = self->_commands;
  v122 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandControlCenter:"];
  -[AXIndexMap setObject:forIndex:](v121, "setObject:forIndex:", v122, [kVOTEventCommandSystemShowControlCenter hash]);

  v123 = self->_commands;
  v124 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandActivateSpeakScreen:"];
  -[AXIndexMap setObject:forIndex:](v123, "setObject:forIndex:", v124, [kVOTEventCommandSystemActivateSpeakScreen hash]);

  v125 = self->_commands;
  v126 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleDock:"];
  -[AXIndexMap setObject:forIndex:](v125, "setObject:forIndex:", v126, [kVOTEventCommandSystemToggleDock hash]);

  v127 = self->_commands;
  v128 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleAppSwitcher:"];
  -[AXIndexMap setObject:forIndex:](v127, "setObject:forIndex:", v128, [kVOTEventCommandSystemToggleAppSwitcher hash]);

  v129 = self->_commands;
  v130 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandActivateLockButton:"];
  -[AXIndexMap setObject:forIndex:](v129, "setObject:forIndex:", v130, [kVOTEventCommandSystemActivateLockButton hash]);

  v131 = self->_commands;
  v132 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandSpotlight:"];
  -[AXIndexMap setObject:forIndex:](v131, "setObject:forIndex:", v132, [kVOTEventCommandSystemShowSpotlight hash]);

  v133 = self->_commands;
  v134 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandActivateAccessibilityShortcut:"];
  -[AXIndexMap setObject:forIndex:](v133, "setObject:forIndex:", v134, [kVOTEventCommandSystemActivateAccessibilityShortcut hash]);

  v135 = self->_commands;
  v136 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleReachability:"];
  -[AXIndexMap setObject:forIndex:](v135, "setObject:forIndex:", v136, [kVOTEventCommandSystemToggleReachability hash]);

  v137 = self->_commands;
  v138 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandTakeScreenshot:"];
  -[AXIndexMap setObject:forIndex:](v137, "setObject:forIndex:", v138, [kVOTEventCommandSystemTakeScreenshot hash]);

  v139 = self->_commands;
  v140 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandSwitchToPreviousApp:"];
  -[AXIndexMap setObject:forIndex:](v139, "setObject:forIndex:", v140, [kVOTEventCommandSystemSwitchToPreviousApp hash]);

  v141 = self->_commands;
  v142 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandSwitchToNextApp:"];
  -[AXIndexMap setObject:forIndex:](v141, "setObject:forIndex:", v142, [kVOTEventCommandSystemSwitchToNextApp hash]);

  v143 = self->_commands;
  v144 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSystemCommandToggleQuickNote:"];
  -[AXIndexMap setObject:forIndex:](v143, "setObject:forIndex:", v144, [kVOTEventCommandSystemToggleQuickNote hash]);

  v145 = self->_commands;
  v146 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCancelSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v145, "setObject:forIndex:", v146, [kVOTEventCommandCancelSpeaking hash]);

  v147 = self->_commands;
  v148 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePauseSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v147, "setObject:forIndex:", v148, [kVOTEventCommandPauseSpeaking hash]);

  v149 = self->_commands;
  v150 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleContinueSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v149, "setObject:forIndex:", v150, [kVOTEventCommandContinueSpeaking hash]);

  v151 = self->_commands;
  v152 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSpeaking:"];
  -[AXIndexMap setObject:forIndex:](v151, "setObject:forIndex:", v152, [kVOTEventCommandToggleSpeaking hash]);

  v153 = self->_commands;
  v154 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadAll:"];
  -[AXIndexMap setObject:forIndex:](v153, "setObject:forIndex:", v154, [kVOTEventCommandReadAll hash]);

  v155 = self->_commands;
  v156 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadFromTop:"];
  -[AXIndexMap setObject:forIndex:](v155, "setObject:forIndex:", v156, [kVOTEventCommandReadFromTop hash]);

  v157 = self->_commands;
  v158 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadScreenSummary:"];
  -[AXIndexMap setObject:forIndex:](v157, "setObject:forIndex:", v158, [kVOTEventCommandReadScreenSummary hash]);

  if (AXRuntimeCheck_SupportsVoiceOverReadPrefixes())
  {
    v159 = self->_commands;
    v160 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadAll:"];
    -[AXIndexMap setObject:forIndex:](v159, "setObject:forIndex:", v160, [kVOTEventCommandReadAllPrefixes hash]);

    v161 = self->_commands;
    v162 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadFromTop:"];
    -[AXIndexMap setObject:forIndex:](v161, "setObject:forIndex:", v162, [kVOTEventCommandReadFromTopPrefixes hash]);
  }

  v163 = self->_commands;
  v164 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleCopySpeechToClipboard:"];
  -[AXIndexMap setObject:forIndex:](v163, "setObject:forIndex:", v164, [kVOTEventCommandCopySpeechToClipboard hash]);

  v165 = self->_commands;
  v166 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformTapAutofill:"];
  -[AXIndexMap setObject:forIndex:](v165, "setObject:forIndex:", v166, [kVOTEventCommandTapAutofill hash]);

  v167 = self->_commands;
  v168 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputTextStyle:"];
  -[AXIndexMap setObject:forIndex:](v167, "setObject:forIndex:", v168, [kVOTEventCommandOutputTextStyle hash]);

  v169 = self->_commands;
  v170 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"handleSearchRotorUp:"];
  -[AXIndexMap setObject:forIndex:](v169, "setObject:forIndex:", v170, [kVOTEventCommandSearchRotorUp hash]);

  v171 = self->_commands;
  v172 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"handleSearchRotorDown:"];
  -[AXIndexMap setObject:forIndex:](v171, "setObject:forIndex:", v172, [kVOTEventCommandSearchRotorDown hash]);

  v173 = self->_commands;
  v174 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorLeft:"];
  -[AXIndexMap setObject:forIndex:](v173, "setObject:forIndex:", v174, [kVOTEventCommandSearchRotorLeft hash]);

  v175 = self->_commands;
  v176 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorRight:"];
  -[AXIndexMap setObject:forIndex:](v175, "setObject:forIndex:", v176, [kVOTEventCommandSearchRotorRight hash]);

  v177 = self->_commands;
  v178 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorEcho:"];
  -[AXIndexMap setObject:forIndex:](v177, "setObject:forIndex:", v178, [kVOTEventCommandSearchRotorEcho hash]);

  v179 = self->_commands;
  v180 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartTextSearch:"];
  -[AXIndexMap setObject:forIndex:](v179, "setObject:forIndex:", v180, [kVOTEventCommandStartTextSearch hash]);

  v181 = self->_commands;
  v182 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOngoingTextSearch:"];
  -[AXIndexMap setObject:forIndex:](v181, "setObject:forIndex:", v182, [kVOTEventCommandTextSearchForward hash]);

  v183 = self->_commands;
  v184 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOngoingTextSearch:"];
  -[AXIndexMap setObject:forIndex:](v183, "setObject:forIndex:", v184, [kVOTEventCommandTextSearchBackward hash]);

  v185 = self->_commands;
  v186 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleItemChooserSelection:"];
  -[AXIndexMap setObject:forIndex:](v185, "setObject:forIndex:", v186, [kVOTEventCommandItemChooser hash]);

  v187 = self->_commands;
  v188 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSearchRotorSetMathPosition:"];
  -[AXIndexMap setObject:forIndex:](v187, "setObject:forIndex:", v188, [kVOTEventCommandSearchRotorSetMathPosition hash]);

  v189 = self->_commands;
  v190 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToLinkedUI:"];
  -[AXIndexMap setObject:forIndex:](v189, "setObject:forIndex:", v190, [kVOTEventCommandMoveToLinkedUI hash]);

  v191 = self->_commands;
  v192 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMoveToNativeFocusedElement:"];
  -[AXIndexMap setObject:forIndex:](v191, "setObject:forIndex:", v192, [kVOTEventCommandMoveToNativeFocusedElement hash]);

  v193 = self->_commands;
  v194 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v193, "setObject:forIndex:", v194, [kVOTEventCommandNextGraphic hash]);

  v195 = self->_commands;
  v196 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v195, "setObject:forIndex:", v196, [kVOTEventCommandPreviousGraphic hash]);

  v197 = self->_commands;
  v198 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v197, "setObject:forIndex:", v198, [kVOTEventCommandNextHeading hash]);

  v199 = self->_commands;
  v200 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v199, "setObject:forIndex:", v200, [kVOTEventCommandPreviousHeading hash]);

  v201 = self->_commands;
  v202 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v201, "setObject:forIndex:", v202, [kVOTEventCommandNextTable hash]);

  v203 = self->_commands;
  v204 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v203, "setObject:forIndex:", v204, [kVOTEventCommandPreviousTable hash]);

  v205 = self->_commands;
  v206 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v205, "setObject:forIndex:", v206, [kVOTEventCommandNextList hash]);

  v207 = self->_commands;
  v208 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v207, "setObject:forIndex:", v208, [kVOTEventCommandPreviousList hash]);

  v209 = self->_commands;
  v210 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v209, "setObject:forIndex:", v210, [kVOTEventCommandNextControl hash]);

  v211 = self->_commands;
  v212 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v211, "setObject:forIndex:", v212, [kVOTEventCommandPreviousControl hash]);

  v213 = self->_commands;
  v214 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v213, "setObject:forIndex:", v214, [kVOTEventCommandNextRadioGroup hash]);

  v215 = self->_commands;
  v216 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v215, "setObject:forIndex:", v216, [kVOTEventCommandPreviousRadioGroup hash]);

  v217 = self->_commands;
  v218 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v217, "setObject:forIndex:", v218, [kVOTEventCommandNextCheckbox hash]);

  v219 = self->_commands;
  v220 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v219, "setObject:forIndex:", v220, [kVOTEventCommandPreviousCheckbox hash]);

  v221 = self->_commands;
  v222 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v221, "setObject:forIndex:", v222, [kVOTEventCommandNextLink hash]);

  v223 = self->_commands;
  v224 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v223, "setObject:forIndex:", v224, [kVOTEventCommandPreviousLink hash]);

  v225 = self->_commands;
  v226 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v225, "setObject:forIndex:", v226, [kVOTEventCommandNextVisitedLink hash]);

  v227 = self->_commands;
  v228 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v227, "setObject:forIndex:", v228, [kVOTEventCommandPreviousVisitedLink hash]);

  v229 = self->_commands;
  v230 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v229, "setObject:forIndex:", v230, [kVOTEventCommandNextSameHeading hash]);

  v231 = self->_commands;
  v232 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v231, "setObject:forIndex:", v232, [kVOTEventCommandPreviousSameHeading hash]);

  v233 = self->_commands;
  v234 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v233, "setObject:forIndex:", v234, [kVOTEventCommandNextBoldText hash]);

  v235 = self->_commands;
  v236 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v235, "setObject:forIndex:", v236, [kVOTEventCommandPreviousBoldText hash]);

  v237 = self->_commands;
  v238 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v237, "setObject:forIndex:", v238, [kVOTEventCommandNextItalicText hash]);

  v239 = self->_commands;
  v240 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v239, "setObject:forIndex:", v240, [kVOTEventCommandPreviousItalicText hash]);

  v241 = self->_commands;
  v242 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v241, "setObject:forIndex:", v242, [kVOTEventCommandNextUnderlineText hash]);

  v243 = self->_commands;
  v244 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v243, "setObject:forIndex:", v244, [kVOTEventCommandPreviousUnderlineText hash]);

  v245 = self->_commands;
  v246 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v245, "setObject:forIndex:", v246, [kVOTEventCommandNextMisspelledWord hash]);

  v247 = self->_commands;
  v248 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v247, "setObject:forIndex:", v248, [kVOTEventCommandPreviousMisspelledWord hash]);

  v249 = self->_commands;
  v250 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v249, "setObject:forIndex:", v250, [kVOTEventCommandNextPlainText hash]);

  v251 = self->_commands;
  v252 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v251, "setObject:forIndex:", v252, [kVOTEventCommandPreviousPlainText hash]);

  v253 = self->_commands;
  v254 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v253, "setObject:forIndex:", v254, [kVOTEventCommandNextColorChange hash]);

  v255 = self->_commands;
  v256 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v255, "setObject:forIndex:", v256, [kVOTEventCommandPreviousColorChange hash]);

  v257 = self->_commands;
  v258 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v257, "setObject:forIndex:", v258, [kVOTEventCommandNextFontChange hash]);

  v259 = self->_commands;
  v260 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v259, "setObject:forIndex:", v260, [kVOTEventCommandPreviousFontChange hash]);

  v261 = self->_commands;
  v262 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v261, "setObject:forIndex:", v262, [kVOTEventCommandNextStyleChange hash]);

  v263 = self->_commands;
  v264 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v263, "setObject:forIndex:", v264, [kVOTEventCommandPreviousStyleChange hash]);

  v265 = self->_commands;
  v266 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v265, "setObject:forIndex:", v266, [kVOTEventCommandNextSameElement hash]);

  v267 = self->_commands;
  v268 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v267, "setObject:forIndex:", v268, [kVOTEventCommandPreviousSameElement hash]);

  v269 = self->_commands;
  v270 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v269, "setObject:forIndex:", v270, [kVOTEventCommandNextDifferentElement hash]);

  v271 = self->_commands;
  v272 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v271, "setObject:forIndex:", v272, [kVOTEventCommandPreviousDifferentElement hash]);

  v273 = self->_commands;
  v274 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v273, "setObject:forIndex:", v274, [kVOTEventCommandNextFrame hash]);

  v275 = self->_commands;
  v276 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v275, "setObject:forIndex:", v276, [kVOTEventCommandPreviousFrame hash]);

  v277 = self->_commands;
  v278 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleColumnMovement:"];
  -[AXIndexMap setObject:forIndex:](v277, "setObject:forIndex:", v278, [kVOTEventCommandNextColumn hash]);

  v279 = self->_commands;
  v280 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleColumnMovement:"];
  -[AXIndexMap setObject:forIndex:](v279, "setObject:forIndex:", v280, [kVOTEventCommandPreviousColumn hash]);

  v281 = self->_commands;
  v282 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v281, "setObject:forIndex:", v282, [kVOTEventCommandNextBlockquote hash]);

  v283 = self->_commands;
  v284 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v283, "setObject:forIndex:", v284, [kVOTEventCommandPreviousBlockquote hash]);

  v285 = self->_commands;
  v286 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v285, "setObject:forIndex:", v286, [kVOTEventCommandNextSameBlockquote hash]);

  v287 = self->_commands;
  v288 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDirectElementSearch:"];
  -[AXIndexMap setObject:forIndex:](v287, "setObject:forIndex:", v288, [kVOTEventCommandPreviousSameBlockquote hash]);

  v289 = self->_commands;
  v290 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimpleTap:"];
  -[AXIndexMap setObject:forIndex:](v289, "setObject:forIndex:", v290, [kVOTEventCommandSimpleTap hash]);

  v291 = self->_commands;
  v292 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDoubleTap:"];
  -[AXIndexMap setObject:forIndex:](v291, "setObject:forIndex:", v292, [kVOTEventCommandDoubleTap hash]);

  v293 = self->_commands;
  v294 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTripleTap:"];
  -[AXIndexMap setObject:forIndex:](v293, "setObject:forIndex:", v294, [kVOTEventCommandTripleTap hash]);

  v295 = self->_commands;
  v296 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimpleTap:"];
  -[AXIndexMap setObject:forIndex:](v295, "setObject:forIndex:", v296, [kVOTEventCommandSplitTapTap hash]);

  v297 = self->_commands;
  v298 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartStopToggle:"];
  -[AXIndexMap setObject:forIndex:](v297, "setObject:forIndex:", v298, [kVOTEventCommandStartStopToggle hash]);

  v299 = self->_commands;
  v300 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLabelElement:"];
  -[AXIndexMap setObject:forIndex:](v299, "setObject:forIndex:", v300, [kVOTEventCommandLabelElement hash]);

  v301 = self->_commands;
  v302 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleMonitorElement:"];
  -[AXIndexMap setObject:forIndex:](v301, "setObject:forIndex:", v302, [kVOTEventCommandMonitorElement hash]);

  v303 = self->_commands;
  v304 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleCrownNavigation:"];
  -[AXIndexMap setObject:forIndex:](v303, "setObject:forIndex:", v304, [kVOTEventCommandToggleCrownNaviation hash]);

  v305 = self->_commands;
  v306 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSimulatedForceTouchEvent:"];
  -[AXIndexMap setObject:forIndex:](v305, "setObject:forIndex:", v306, [kVOTEventCommandSimulatedForceTouch hash]);

  v307 = self->_commands;
  v308 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleChangeAudioDuckingMode:"];
  -[AXIndexMap setObject:forIndex:](v307, "setObject:forIndex:", v308, [kVOTEventCommandChangeAudioDuckingMode hash]);

  v309 = self->_commands;
  v310 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomaticAppAccessibilityToggle:"];
  -[AXIndexMap setObject:forIndex:](v309, "setObject:forIndex:", v310, [kVOTEventCommandToggleAutomaticAccessibility hash]);

  v311 = self->_commands;
  v312 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleLiveRegionCommand:"];
  -[AXIndexMap setObject:forIndex:](v311, "setObject:forIndex:", v312, [kVOTEventCommandToggleLiveRegions hash]);

  v313 = self->_commands;
  v314 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSettingsHUD:"];
  -[AXIndexMap setObject:forIndex:](v313, "setObject:forIndex:", v314, [kVOTEventCommandToggleSettingsHUD hash]);

  v315 = self->_commands;
  v316 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWatchWakeTap:"];
  -[AXIndexMap setObject:forIndex:](v315, "setObject:forIndex:", v316, [kVOTEventCommandWatchWakeTap hash]);

  v317 = self->_commands;
  v318 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWatchWakeDoubleTap:"];
  -[AXIndexMap setObject:forIndex:](v317, "setObject:forIndex:", v318, [kVOTEventCommandWatchWakeDoubleTap hash]);

  v319 = self->_commands;
  v320 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleWatchWakeTripleTap:"];
  -[AXIndexMap setObject:forIndex:](v319, "setObject:forIndex:", v320, [kVOTEventCommandWatchWakeTripleTap hash]);

  v321 = self->_commands;
  v322 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateHomeButton:"];
  -[AXIndexMap setObject:forIndex:](v321, "setObject:forIndex:", v322, [kVOTEventCommandActivateHomeButton hash]);

  v323 = self->_commands;
  v324 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStingPress:"];
  -[AXIndexMap setObject:forIndex:](v323, "setObject:forIndex:", v324, [kVOTEventCommandStingPress hash]);

  v325 = self->_commands;
  v326 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStingKeycordPress:"];
  -[AXIndexMap setObject:forIndex:](v325, "setObject:forIndex:", v326, [kVOTEventCommandStingKeycordPress hash]);

  v327 = self->_commands;
  v328 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchUpEvent:"];
  -[AXIndexMap setObject:forIndex:](v327, "setObject:forIndex:", v328, [kVOTEventCommandTouchUp hash]);

  v329 = self->_commands;
  v330 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchDownEvent:"];
  -[AXIndexMap setObject:forIndex:](v329, "setObject:forIndex:", v330, [kVOTEventCommandTouchDown hash]);

  v331 = self->_commands;
  v332 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchMoveEvent:"];
  -[AXIndexMap setObject:forIndex:](v331, "setObject:forIndex:", v332, [kVOTEventCommandTouchMove hash]);

  v333 = self->_commands;
  v334 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAutomationGeneratedTouchCancelEvent:"];
  -[AXIndexMap setObject:forIndex:](v333, "setObject:forIndex:", v334, [kVOTEventCommandTouchCancel hash]);

  v335 = self->_commands;
  v336 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadWord:"];
  -[AXIndexMap setObject:forIndex:](v335, "setObject:forIndex:", v336, [kVOTEventCommandReadWord hash]);

  v337 = self->_commands;
  v338 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadLine:"];
  -[AXIndexMap setObject:forIndex:](v337, "setObject:forIndex:", v338, [kVOTEventCommandReadLine hash]);

  v339 = self->_commands;
  v340 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSingleLetterQuickNav:"];
  -[AXIndexMap setObject:forIndex:](v339, "setObject:forIndex:", v340, [kVOTEventCommandToggleSingleLetterQuickNav hash]);

  v341 = self->_commands;
  v342 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleVoiceOverModifierKeyLock:"];
  -[AXIndexMap setObject:forIndex:](v341, "setObject:forIndex:", v342, [kVOTEventCommandLockVOKeyboardKeys hash]);

  v343 = self->_commands;
  v344 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputLineCount:"];
  -[AXIndexMap setObject:forIndex:](v343, "setObject:forIndex:", v344, [kVOTEventCommandOutputLineCount hash]);

  v345 = self->_commands;
  v346 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadURL:"];
  -[AXIndexMap setObject:forIndex:](v345, "setObject:forIndex:", v346, [kVOTEventCommandReadURL hash]);

  v347 = self->_commands;
  v348 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReadItemHint:"];
  -[AXIndexMap setObject:forIndex:](v347, "setObject:forIndex:", v348, [kVOTEventCommandReadHint hash]);

  v349 = self->_commands;
  v350 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v349, "setObject:forIndex:", v350, [kVOTEventCommandScrollLeftPage hash]);

  v351 = self->_commands;
  v352 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v351, "setObject:forIndex:", v352, [kVOTEventCommandScrollRightPage hash]);

  v353 = self->_commands;
  v354 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v353, "setObject:forIndex:", v354, [kVOTEventCommandScrollUpPage hash]);

  v355 = self->_commands;
  v356 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollByPage:"];
  -[AXIndexMap setObject:forIndex:](v355, "setObject:forIndex:", v356, [kVOTEventCommandScrollDownPage hash]);

  v357 = self->_commands;
  v358 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollToTop:"];
  -[AXIndexMap setObject:forIndex:](v357, "setObject:forIndex:", v358, [kVOTEventCommandScrollToTop hash]);

  v359 = self->_commands;
  v360 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollToBottom:"];
  -[AXIndexMap setObject:forIndex:](v359, "setObject:forIndex:", v360, [kVOTEventCommandScrollToBottom hash]);

  v361 = self->_commands;
  v362 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputElementSummary:"];
  -[AXIndexMap setObject:forIndex:](v361, "setObject:forIndex:", v362, [kVOTEventCommandOutputElementSummary hash]);

  v363 = self->_commands;
  v364 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputComputerVisionAnalysisSummary:"];
  -[AXIndexMap setObject:forIndex:](v363, "setObject:forIndex:", v364, [kVOTEventCommandOutputElementCVAnalysisSummary hash]);

  v365 = self->_commands;
  v366 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputFocusedElementSummary:"];
  -[AXIndexMap setObject:forIndex:](v365, "setObject:forIndex:", v366, [kVOTEventCommandOutputFocusedElementSummary hash]);

  v367 = self->_commands;
  v368 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSelectedTextOutput:"];
  -[AXIndexMap setObject:forIndex:](v367, "setObject:forIndex:", v368, [kVOTEventCommandOutputSelectedInformation hash]);

  v369 = self->_commands;
  v370 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOutputFocusedElementSummary:"];
  -[AXIndexMap setObject:forIndex:](v369, "setObject:forIndex:", v370, [kVOTEventCommandOutputDetailedFocusedElementSummary hash]);

  v371 = self->_commands;
  v372 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleScrollToPoint:"];
  -[AXIndexMap setObject:forIndex:](v371, "setObject:forIndex:", v372, [kVOTEventCommandScrollToPoint hash]);

  v373 = self->_commands;
  v374 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAppSwitch:"];
  -[AXIndexMap setObject:forIndex:](v373, "setObject:forIndex:", v374, [kVOTEventAppSwitchNext hash]);

  v375 = self->_commands;
  v376 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAppSwitch:"];
  -[AXIndexMap setObject:forIndex:](v375, "setObject:forIndex:", v376, [kVOTEventAppSwitchPrevious hash]);

  v377 = self->_commands;
  v378 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSingleLetterSearch:"];
  -[AXIndexMap setObject:forIndex:](v377, "setObject:forIndex:", v378, [kVOTEventCommandSingleLetterSearch hash]);

  v379 = self->_commands;
  v380 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeRight:"];
  -[AXIndexMap setObject:forIndex:](v379, "setObject:forIndex:", v380, [kVOTEventCommandEdgeRight hash]);

  v381 = self->_commands;
  v382 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeLeft:"];
  -[AXIndexMap setObject:forIndex:](v381, "setObject:forIndex:", v382, [kVOTEventCommandEdgeLeft hash]);

  v383 = self->_commands;
  v384 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeTop:"];
  -[AXIndexMap setObject:forIndex:](v383, "setObject:forIndex:", v384, [kVOTEventCommandEdgeTop hash]);

  v385 = self->_commands;
  v386 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEdgeSwipeBottom:"];
  -[AXIndexMap setObject:forIndex:](v385, "setObject:forIndex:", v386, [kVOTEventCommandEdgeBottom hash]);

  v387 = self->_commands;
  v388 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBottomEdgePanDown:"];
  -[AXIndexMap setObject:forIndex:](v387, "setObject:forIndex:", v388, [kVOTEventCommandBottomEdgePanDown hash]);

  v389 = self->_commands;
  v390 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBottomEdgePanShort:"];
  -[AXIndexMap setObject:forIndex:](v389, "setObject:forIndex:", v390, [kVOTEventCommandBottomEdgePanShort hash]);

  v391 = self->_commands;
  v392 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBottomEdgePanLong:"];
  -[AXIndexMap setObject:forIndex:](v391, "setObject:forIndex:", v392, [kVOTEventCommandBottomEdgePanLong hash]);

  v393 = self->_commands;
  v394 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTopEdgePanDown:"];
  -[AXIndexMap setObject:forIndex:](v393, "setObject:forIndex:", v394, [kVOTEventCommandTopEdgePanDown hash]);

  v395 = self->_commands;
  v396 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTopEdgePanShort:"];
  -[AXIndexMap setObject:forIndex:](v395, "setObject:forIndex:", v396, [kVOTEventCommandTopEdgePanShort hash]);

  v397 = self->_commands;
  v398 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTopEdgePanLong:"];
  -[AXIndexMap setObject:forIndex:](v397, "setObject:forIndex:", v398, [kVOTEventCommandTopEdgePanLong hash]);

  v399 = self->_commands;
  v400 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToLeftElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v399, "setObject:forIndex:", v400, [kVOTEventCommandLeftElementCommunity hash]);

  v401 = self->_commands;
  v402 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToRightElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v401, "setObject:forIndex:", v402, [kVOTEventCommandRightElementCommunity hash]);

  v403 = self->_commands;
  v404 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToNextElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v403, "setObject:forIndex:", v404, [kVOTEventCommandNextElementCommunity hash]);

  v405 = self->_commands;
  v406 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSwitchToPreviousElementCommunity:"];
  -[AXIndexMap setObject:forIndex:](v405, "setObject:forIndex:", v406, [kVOTEventCommandPreviousElementCommunity hash]);

  v407 = self->_commands;
  v408 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSideApp:"];
  -[AXIndexMap setObject:forIndex:](v407, "setObject:forIndex:", v408, [kVOTEventCommandShowSideApp hash]);

  v409 = self->_commands;
  v410 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleOpenVoiceOverOptions:"];
  -[AXIndexMap setObject:forIndex:](v409, "setObject:forIndex:", v410, [kVOTEventCommandOpenVoiceOverSettings hash]);

  v411 = self->_commands;
  v412 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleNextKeyboardLanguage:"];
  -[AXIndexMap setObject:forIndex:](v411, "setObject:forIndex:", v412, [kVOTEventCommandNextKeyboardLanguage hash]);

  v413 = self->_commands;
  v414 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechVoiceChange:"];
  -[AXIndexMap setObject:forIndex:](v413, "setObject:forIndex:", v414, [kVOTEventCommandSpeechNextVoice hash]);

  v415 = self->_commands;
  v416 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechVoiceChange:"];
  -[AXIndexMap setObject:forIndex:](v415, "setObject:forIndex:", v416, [kVOTEventCommandSpeechPreviousVoice hash]);

  if (AXIsInternalInstall())
  {
    v417 = self->_commands;
    v418 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSendCancelEvent:"];
    -[AXIndexMap setObject:forIndex:](v417, "setObject:forIndex:", v418, [@"VOTEventCommandSendCancel" hash]);
  }

  v419 = self->_commands;
  v420 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSiriShortcutEvent:"];
  -[AXIndexMap setObject:forIndex:](v419, "setObject:forIndex:", v420, [kVOTEventCommandRunSiriShortcut hash]);

  v421 = self->_commands;
  v422 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleUserSelection:"];
  -[AXIndexMap setObject:forIndex:](v421, "setObject:forIndex:", v422, [kVOTEventCommandSelectRight hash]);

  v423 = self->_commands;
  v424 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleUserSelection:"];
  -[AXIndexMap setObject:forIndex:](v423, "setObject:forIndex:", v424, [kVOTEventCommandSelectLeft hash]);

  v425 = self->_commands;
  v426 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAdjustTextSelectionSegmentType:"];
  -[AXIndexMap setObject:forIndex:](v425, "setObject:forIndex:", v426, [kVOTEventCommandNextTextSegmentType hash]);

  v427 = self->_commands;
  v428 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAdjustTextSelectionSegmentType:"];
  -[AXIndexMap setObject:forIndex:](v427, "setObject:forIndex:", v428, [kVOTEventCommandPreviousTextSegmentType hash]);

  v429 = self->_commands;
  v430 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartStopTextSelection:"];
  -[AXIndexMap setObject:forIndex:](v429, "setObject:forIndex:", v430, [kVOTEventCommandStartStopTextSelection hash]);

  v431 = self->_commands;
  v432 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleMute:"];
  -[AXIndexMap setObject:forIndex:](v431, "setObject:forIndex:", v432, [kVOTEventCommandToggleMute hash]);

  v433 = self->_commands;
  v434 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleScreenCurtain:"];
  -[AXIndexMap setObject:forIndex:](v433, "setObject:forIndex:", v434, [kVOTEventCommandToggleScreenCurtain hash]);

  v435 = self->_commands;
  v436 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleSoundCurtain:"];
  -[AXIndexMap setObject:forIndex:](v435, "setObject:forIndex:", v436, [kVOTEventCommandToggleSoundCurtain hash]);

  v437 = self->_commands;
  v438 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleCaptionPanel:"];
  -[AXIndexMap setObject:forIndex:](v437, "setObject:forIndex:", v438, [kVOTEventCommandToggleCaptionPanel hash]);

  v439 = self->_commands;
  v440 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleIgnoreTrackpad:"];
  -[AXIndexMap setObject:forIndex:](v439, "setObject:forIndex:", v440, [kVOTEventCommandToggleIgnoreTrackpad hash]);

  v441 = self->_commands;
  v442 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDescribeImage:"];
  -[AXIndexMap setObject:forIndex:](v441, "setObject:forIndex:", v442, [kVOTEventCommandDescribeImage hash]);

  v443 = self->_commands;
  v444 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleLaunchDetectionMode:"];
  -[AXIndexMap setObject:forIndex:](v443, "setObject:forIndex:", v444, [kVOTEventCommandLaunchDetectionMode hash]);

  v445 = self->_commands;
  v446 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleRotationCapability:"];
  -[AXIndexMap setObject:forIndex:](v445, "setObject:forIndex:", v446, [kVOTEventCommandToggleRotationCapability hash]);

  v447 = self->_commands;
  v448 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleQuickNav:"];
  -[AXIndexMap setObject:forIndex:](v447, "setObject:forIndex:", v448, [kVOTEventCommandToggleQuickNav hash]);

  v449 = self->_commands;
  v450 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleAnnounceQuickNav:"];
  -[AXIndexMap setObject:forIndex:](v449, "setObject:forIndex:", v450, [kVOTEventCommandAnnounceQuickNav hash]);

  v451 = self->_commands;
  v452 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleEscape:"];
  -[AXIndexMap setObject:forIndex:](v451, "setObject:forIndex:", v452, [kVOTEventCommandEscape hash]);

  v453 = self->_commands;
  v454 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleShowDetectionUIWithMagnifierService:"];
  -[AXIndexMap setObject:forIndex:](v453, "setObject:forIndex:", v454, [kVOTEventCommandShowDetectionUIWithMagnifierService hash]);

  v455 = self->_commands;
  v456 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleHideDetectionUIWithMagnifierService:"];
  -[AXIndexMap setObject:forIndex:](v455, "setObject:forIndex:", v456, [kVOTEventCommandHideDetectionUIWithMagnifierService hash]);

  v457 = self->_commands;
  v458 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDescribeCameraScene:"];
  -[AXIndexMap setObject:forIndex:](v457, "setObject:forIndex:", v458, [kVOTEventCommandDescribeCameraScene hash]);

  v459 = self->_commands;
  v460 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleTogglePerkinsKeyboardInput:"];
  -[AXIndexMap setObject:forIndex:](v459, "setObject:forIndex:", v460, [kVOTEventCommandTogglePerkinsKeyboardInput hash]);

  v461 = self->_commands;
  v462 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleKeyboardBraileUI:"];
  -[AXIndexMap setObject:forIndex:](v461, "setObject:forIndex:", v462, [kVOTEventCommandToggleKeyboardBrailleUI hash]);

  v463 = self->_commands;
  v464 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleToggleBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v463, "setObject:forIndex:", v464, [kVOTEventCommandToggleBrailleUI hash]);

  v465 = self->_commands;
  v466 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v465, "setObject:forIndex:", v466, [kVOTEventCommandActivateBrailleUILaunchApp hash]);

  v467 = self->_commands;
  v468 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v467, "setObject:forIndex:", v468, [kVOTEventCommandActivateBrailleUIChooseItem hash]);

  v469 = self->_commands;
  v470 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v469, "setObject:forIndex:", v470, [kVOTEventCommandActivateBrailleUIBrailleNotes hash]);

  v471 = self->_commands;
  v472 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v471, "setObject:forIndex:", v472, [kVOTEventCommandActivateBrailleUIFinder hash]);

  v473 = self->_commands;
  v474 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v473, "setObject:forIndex:", v474, [kVOTEventCommandActivateBrailleUINemethCalculator hash]);

  v475 = self->_commands;
  v476 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v475, "setObject:forIndex:", v476, [kVOTEventCommandActivateBrailleUILiveCaptions hash]);

  v477 = self->_commands;
  v478 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleUI:"];
  -[AXIndexMap setObject:forIndex:](v477, "setObject:forIndex:", v478, [kVOTEventCommandActivateBrailleUIDateTime hash]);

  v479 = self->_commands;
  v480 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleScreenInput:"];
  -[AXIndexMap setObject:forIndex:](v479, "setObject:forIndex:", v480, [kVOTEventCommandActivateBrailleScreenInput hash]);

  v481 = self->_commands;
  v482 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleScreenInputCommand:"];
  -[AXIndexMap setObject:forIndex:](v481, "setObject:forIndex:", v482, [kVOTEventCommandActivateBrailleScreenInputCommand hash]);

  v483 = self->_commands;
  v484 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDeactivateBrailleScreenInput:"];
  -[AXIndexMap setObject:forIndex:](v483, "setObject:forIndex:", v484, [kVOTEventCommandBSIExit hash]);

  v485 = self->_commands;
  v486 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBSIPreviousRotor:"];
  -[AXIndexMap setObject:forIndex:](v485, "setObject:forIndex:", v486, [kVOTEventCommandBSIPreviousRotor hash]);

  v487 = self->_commands;
  v488 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBSINextRotor:"];
  -[AXIndexMap setObject:forIndex:](v487, "setObject:forIndex:", v488, [kVOTEventCommandBSINextRotor hash]);

  v489 = self->_commands;
  v490 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleDeactivateBrailleScreenInput:"];
  -[AXIndexMap setObject:forIndex:](v489, "setObject:forIndex:", v490, [kVOTEventCommandBSIEscape hash]);

  v491 = self->_commands;
  v492 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleActivateBrailleScreenInputPreferringSingleHand:"];
  -[AXIndexMap setObject:forIndex:](v491, "setObject:forIndex:", v492, [kVOTEventCommandActivateBrailleScreenInputPreferringSingleHand hash]);

  v493 = self->_commands;
  v494 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleReconnectBrailleDisplays:"];
  -[AXIndexMap setObject:forIndex:](v493, "setObject:forIndex:", v494, [kVOTEventCommandReconnectBrailleDisplays hash]);

  v495 = self->_commands;
  v496 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v495, "setObject:forIndex:", v496, [kVOTEventCommandBraillePanLeft hash]);

  v497 = self->_commands;
  v498 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v497, "setObject:forIndex:", v498, [kVOTEventCommandBraillePanRight hash]);

  v499 = self->_commands;
  v500 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v499, "setObject:forIndex:", v500, [kVOTEventCommandBraillePanBeginning hash]);

  v501 = self->_commands;
  v502 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v501, "setObject:forIndex:", v502, [kVOTEventCommandBraillePanEnd hash]);

  v503 = self->_commands;
  v504 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBraille2DInvert:"];
  -[AXIndexMap setObject:forIndex:](v503, "setObject:forIndex:", v504, [kVOTEventCommandBraille2DInvert hash]);

  v505 = self->_commands;
  v506 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v505, "setObject:forIndex:", v506, [kVOTEventCommandBrailleNextInputTable hash]);

  v507 = self->_commands;
  v508 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v507, "setObject:forIndex:", v508, [kVOTEventCommandBrailleNextOutputTable hash]);

  v509 = self->_commands;
  v510 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v509, "setObject:forIndex:", v510, [kVOTEventCommandBrailleAnnouncementModeOn hash]);

  v511 = self->_commands;
  v512 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v511, "setObject:forIndex:", v512, [kVOTEventCommandBrailleRouter hash]);

  v513 = self->_commands;
  v514 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v513, "setObject:forIndex:", v514, [kVOTEventCommandBrailleStatusRouter hash]);

  v515 = self->_commands;
  v516 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEvent:"];
  -[AXIndexMap setObject:forIndex:](v515, "setObject:forIndex:", v516, [kVOTEventCommandBrailleTranslate hash]);

  v517 = self->_commands;
  v518 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleRefreshEvent:"];
  -[AXIndexMap setObject:forIndex:](v517, "setObject:forIndex:", v518, [kVOTEventCommandBrailleRefreshBrailleLine hash]);

  v519 = self->_commands;
  v520 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleWordWrapToggleEvent:"];
  -[AXIndexMap setObject:forIndex:](v519, "setObject:forIndex:", v520, [kVOTEventCommandBrailleToggleWordWrap hash]);

  v521 = self->_commands;
  v522 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleEnableAutoAdvance:"];
  -[AXIndexMap setObject:forIndex:](v521, "setObject:forIndex:", v522, [kVOTEventCommandBrailleEnableAutoAdvance hash]);

  v523 = self->_commands;
  v524 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleIncreaseAutoAdvanceSpeed:"];
  -[AXIndexMap setObject:forIndex:](v523, "setObject:forIndex:", v524, [kVOTEventCommandBrailleIncreaseAutoAdvanceSpeed hash]);

  v525 = self->_commands;
  v526 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleBrailleDecreaseAutoAdvanceSpeed:"];
  -[AXIndexMap setObject:forIndex:](v525, "setObject:forIndex:", v526, [kVOTEventCommandBrailleDecreaseAutoAdvanceSpeed hash]);

  v527 = self->_commands;
  v528 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v527, "setObject:forIndex:", v528, [kVOTEventCommandLeftArrow hash]);

  v529 = self->_commands;
  v530 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v529, "setObject:forIndex:", v530, [kVOTEventCommandRightArrow hash]);

  v531 = self->_commands;
  v532 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v531, "setObject:forIndex:", v532, [kVOTEventCommandUpArrow hash]);

  v533 = self->_commands;
  v534 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v533, "setObject:forIndex:", v534, [kVOTEventCommandDownArrow hash]);

  v535 = self->_commands;
  v536 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v535, "setObject:forIndex:", v536, [kVOTEventCommandDelete hash]);

  v537 = self->_commands;
  v538 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v537, "setObject:forIndex:", v538, [kVOTEventCommandReturn hash]);

  v539 = self->_commands;
  v540 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v539, "setObject:forIndex:", v540, [kVOTEventCommandTab hash]);

  v541 = self->_commands;
  v542 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v541, "setObject:forIndex:", v542, [kVOTEventCommandShiftTab hash]);

  v543 = self->_commands;
  v544 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v543, "setObject:forIndex:", v544, [kVOTEventCommandCut hash]);

  v545 = self->_commands;
  v546 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v545, "setObject:forIndex:", v546, [kVOTEventCommandCopy hash]);

  v547 = self->_commands;
  v548 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v547, "setObject:forIndex:", v548, [kVOTEventCommandPaste hash]);

  v549 = self->_commands;
  v550 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v549, "setObject:forIndex:", v550, [kVOTEventCommandSelectAll hash]);

  v551 = self->_commands;
  v552 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v551, "setObject:forIndex:", v552, [kVOTEventCommandUndo hash]);

  v553 = self->_commands;
  v554 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleKeyboardCommandEvent:"];
  -[AXIndexMap setObject:forIndex:](v553, "setObject:forIndex:", v554, [kVOTEventCommandRedo hash]);

  v555 = self->_commands;
  v556 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformVolumeUpButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v555, "setObject:forIndex:", v556, [kVOTEventCommandVolumeUpButtonPress hash]);

  v557 = self->_commands;
  v558 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformVolumeDownButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v557, "setObject:forIndex:", v558, [kVOTEventCommandVolumeDownButtonPress hash]);

  v559 = self->_commands;
  v560 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handlePerformEjectButtonPress:"];
  -[AXIndexMap setObject:forIndex:](v559, "setObject:forIndex:", v560, [kVOTEventCommandEjectButtonPress hash]);

  v561 = self->_commands;
  v562 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleStartHelpMode:"];
  -[AXIndexMap setObject:forIndex:](v561, "setObject:forIndex:", v562, [kVOTEventCommandStartHelp hash]);

  v563 = self->_commands;
  v564 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorChange:"];
  -[AXIndexMap setObject:forIndex:](v563, "setObject:forIndex:", v564, [kVOTEventCommandSpeechRotorNext hash]);

  v565 = self->_commands;
  v566 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorChange:"];
  -[AXIndexMap setObject:forIndex:](v565, "setObject:forIndex:", v566, [kVOTEventCommandSpeechRotorPrevious hash]);

  v567 = self->_commands;
  v568 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorValueChange:"];
  -[AXIndexMap setObject:forIndex:](v567, "setObject:forIndex:", v568, [kVOTEventCommandSpeechRotorIncrementValue hash]);

  v569 = self->_commands;
  v570 = [SCRCTargetSelector targetSelectorWithTarget:self selector:"_handleSpeechRotorValueChange:"];
  -[AXIndexMap setObject:forIndex:](v569, "setObject:forIndex:", v570, [kVOTEventCommandSpeechRotorDecrementValue hash]);
}

- (BOOL)eventIsSystemEvent:(id)a3
{
  v3 = qword_1001FEC50;
  v4 = a3;
  if (v3 != -1)
  {
    sub_10012A65C();
  }

  v5 = qword_1001FEC48;
  v6 = [v4 command];

  v7 = [v5 containsObject:v6];
  return v7;
}

- (BOOL)isTutorialActive
{
  v3 = [(VOTElementManager *)self tutorialPage];
  v4 = [(VOTElementManager *)self tutorialRestrictedCommands];
  v5 = [(VOTElementManager *)self _currentElement];
  v6 = [v5 application];
  v7 = [v6 bundleIdentifier];

  v8 = [v7 isEqualToString:@"com.apple.AXUIViewService"] && (v3 | v4 || -[VOTElementManager tutorialListeningForGestureNotifications](self, "tutorialListeningForGestureNotifications"));
  return v8;
}

- (BOOL)shouldTutorialIgnoreCommand:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self tutorialActiveRestrictionType];
  if (!v5)
  {
    goto LABEL_5;
  }

  if (v5 != 2)
  {
    if (v5 != 1)
    {
      goto LABEL_5;
    }

    v6 = [(VOTElementManager *)self tutorialRestrictedCommands];
    v7 = [v6 containsObject:v4];

    if ((v7 & 1) == 0)
    {
      goto LABEL_5;
    }

LABEL_7:
    v8 = 1;
    goto LABEL_8;
  }

  v9 = [(VOTElementManager *)self tutorialRestrictedCommands];
  v10 = [v9 containsObject:v4];

  if (!v10)
  {
    goto LABEL_7;
  }

LABEL_5:
  v8 = 0;
LABEL_8:

  return v8;
}

- (void)tutorialSetRecognizedGesture:(id)a3
{
  v4 = a3;
  v7 = v4;
  if (qword_1001FEC60 == -1)
  {
    v5 = v4;
  }

  else
  {
    sub_10012A670();
    v5 = v7;
  }

  if ([qword_1001FEC58 containsObject:v5])
  {
    [(VOTElementManager *)self setTutorialRecognizedGesture:v7];
    DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
    CFNotificationCenterPostNotification(DarwinNotifyCenter, kAXSVoiceOverTouchTutorialRecognizedGestureNotification, 0, 0, 1u);
  }
}

- (void)toggleDetectionMode
{
  v2 = [VOTSharedWorkspace currentRotorDetectionMode];
  v13 = [NSNumber numberWithUnsignedInt:v2];
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 enabledLiveRecognitionModes];
  v5 = [v4 mutableCopy];

  if ([v5 containsObject:v13])
  {
    [v5 removeObject:v13];
    v6 = @"element.off.text";
  }

  else
  {
    [v5 addObject:v13];
    v6 = @"element.on.text";
  }

  v7 = off_1001FDDD0;
  v8 = [VOTSharedWorkspace selectedLanguage];
  v9 = sub_1000516CC(v7, v6, 0, v8);
  v10 = sub_1000095FC(v9, 0, 0);

  if (v2 <= 2)
  {
    if (v2)
    {
      if (v2 == 1)
      {
        v11 = +[VOTMagnifierService shared];
        [v11 toggleDoorDetection];
      }

      else
      {
        if (v2 != 2)
        {
          goto LABEL_20;
        }

        v11 = +[VOTMagnifierService shared];
        [v11 toggleImageDescriptions];
      }
    }

    else
    {
      v11 = +[VOTMagnifierService shared];
      [v11 togglePeopleDetection];
    }
  }

  else if (v2 > 4)
  {
    if (v2 == 5)
    {
      v11 = +[VOTMagnifierService shared];
      [v11 toggleFurnitureDetection];
    }

    else
    {
      if (v2 != 6)
      {
        goto LABEL_20;
      }

      v11 = +[VOTMagnifierService shared];
      [v11 toggleCurrentActivity];
    }
  }

  else
  {
    +[VOTMagnifierService shared];
    if (v2 == 3)
      v11 = {;
      [v11 togglePointAndSpeak];
    }

    else
      v11 = {;
      [v11 toggleTextDetection];
    }
  }

LABEL_20:
  if (![v5 count])
  {
    v12 = +[VOTMagnifierService shared];
    [v12 dismissDetectionUI];
  }
}

- (void)handleEvent:(id)a3
{
  v36 = a3;
  v5 = [v36 command];
  if ([(VOTElementManager *)self isTutorialActive])
  {
    [(VOTElementManager *)self tutorialSetRecognizedGesture:v5];
    if ([(VOTElementManager *)self shouldTutorialIgnoreCommand:v5])
    {
      goto LABEL_47;
    }
  }

  if ([(VOTElementManager *)self detectionModeRotorActive])
  {
    if (([v5 isEqualToString:kVOTEventCommandSearchRotorRight] & 1) == 0 && (objc_msgSend(v5, "isEqualToString:", kVOTEventCommandSearchRotorLeft) & 1) == 0 && (objc_msgSend(v5, "isEqualToString:", kVOTEventCommandSearchRotorUp) & 1) == 0 && (objc_msgSend(v5, "isEqualToString:", kVOTEventCommandSearchRotorDown) & 1) == 0 && (objc_msgSend(v5, "isEqualToString:", kVOTEventCommandIdle) & 1) == 0 && (objc_msgSend(v5, "isEqualToString:", kVOTEventCommandSimpleTap) & 1) == 0)
    {
      [(SCRCThread *)self->_elementManagerThread performSelector:"_moveDetectionModeRotor:" onTarget:self count:1 objects:v36, 0];
    }

    if ([v5 isEqualToString:kVOTEventCommandSimpleTap])
    {
      [(VOTElementManager *)self toggleDetectionMode];
      goto LABEL_47;
    }
  }

  if (![v36 origin])
  {
    v34 = @"The Event did not have a type set to it: %@";
    v35 = v36;
    LOBYTE(v33) = 1;
    _AXLogWithFacility();
  }

  v6 = [VOTCommandHelper commandHelper:v33];
  v7 = [v36 command];
  v8 = [v7 isEqualToString:kVOTEventCommandEscape];

  if (v8)
  {
    [v36 setBypassHelp:1];
  }

  v9 = +[VOTCommandHelper commandHelper];
  [v9 practiceRegion];
  v11 = v10;
  v13 = v12;
  v15 = v14;
  v17 = v16;

  if ([v6 helpEnabled])
  {
    v18 = [v36 command];
    if ([v18 isEqualToString:kVOTEventCommandTracking])
    {
      [v36 touchPoint];
      v38.x = v19;
      v38.y = v20;
      v39.origin.x = v11;
      v39.origin.y = v13;
      v39.size.width = v15;
      v39.size.height = v17;
      v21 = CGRectContainsPoint(v39, v38);
    }

    else
    {
      v21 = 1;
    }
  }

  else
  {
    v21 = 1;
  }

  if (![v6 helpEnabled] || (objc_msgSend(v36, "bypassHelp") & 1) != 0)
  {
    goto LABEL_29;
  }

  v22 = CGSizeZero.width == v15;
  if (CGSizeZero.height != v17)
  {
    v22 = 0;
  }

  if (!v22 && !v21)
  {
LABEL_29:
    v23 = [v36 command];
    v24 = kVOTEventCommandTracking;

    if (v23 == v24)
    {
      [(NSLock *)self->_trackingLock lock];
      objc_storeStrong(&self->_mostRecentTrackingEvent, a3);
      [(NSLock *)self->_trackingLock unlock];
LABEL_40:
      elementManagerThread = self->_elementManagerThread;
LABEL_41:
      [(SCRCThread *)elementManagerThread performSelector:"_handleEvent:" onTarget:self count:1 objects:v36, 0];
      goto LABEL_42;
    }

    if ([(VOTElementManager *)self directTouchModeHandledEvent:v36])
    {
      goto LABEL_42;
    }

    v25 = [v36 command];
    if (v25 != kVOTEventCommandNextElement)
    {
      v26 = [v36 command];
      v27 = v26;
      if (v26 != kVOTEventCommandPreviousElement)
      {
        v28 = [v36 command];
        v29 = kVOTEventCommandAnnouncement;

        if (v28 != v29)
        {
          if ([(VOTElementManager *)self eventIsSystemEvent:v36])
          {
            elementManagerThread = self->_systemEventThread;
          }

          else
          {
            elementManagerThread = self->_elementManagerThread;
          }

          goto LABEL_41;
        }

        goto LABEL_39;
      }
    }

LABEL_39:
    v31 = +[VOTOutputManager outputManager];
    [v31 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

    goto LABEL_40;
  }

  [v6 processHelpForEvent:{v36, CGSizeZero.width}];
LABEL_42:
  v32 = [v36 command];
  [(VOTElementManager *)self setLastEventCommand:v32];

  if (CFAbsoluteTimeGetCurrent() - self->_lastEventOccurredTime > 4.0)
  {
    if (qword_1001FEC70 != -1)
    {
      sub_10012A684();
    }

    dispatch_async(qword_1001FEC68, &stru_1001C8D70);
    self->_lastEventOccurredTime = CFAbsoluteTimeGetCurrent();
  }

LABEL_47:
}

- (id)_similarMonitoredElement:(id)a3
{
  v3 = a3;
  [v3 centerPoint];
  v6 = v5;
  v7 = v4;
  y = CGPointZero.y;
  if (CGPointZero.x == v5 && y == v4)
  {
    [v3 frame];
    AX_CGRectGetCenter();
    v6 = v10;
    v7 = v11;
  }

  if (CGPointZero.x == v6 && y == v7)
  {
    v25 = 0;
  }

  else
  {
    v13 = +[VOTElement systemWideElement];
    [v13 convertPoint:objc_msgSend(v3 fromContextId:{"windowContextId"), v6, v7}];
    v15 = v14;
    v17 = v16;

    v18 = [[VOTElement alloc] initWithPosition:v15, v17];
    [(VOTElement *)v18 frame];
    v20 = v19;
    [v3 frame];
    if (vabdd_f64(v20, v21) >= 10.0 || (-[VOTElement frame](v18, "frame"), v23 = v22, [v3 frame], vabdd_f64(v23, v24) >= 10.0))
    {
      v25 = 0;
    }

    else
    {
      v25 = v18;
    }
  }

  return v25;
}

- (id)_monitoredElementCachedText:(id)a3
{
  v3 = a3;
  v4 = [v3 label];
  v5 = [v3 value];

  v6 = __AXStringForVariables();

  return v6;
}

- (void)_monitorElements
{
  v2 = self;
  v3 = [(NSArray *)self->_currentApplications mutableCopy];
  v4 = +[VOTElement systemAppApplication];
  if (v4)
  {
    [v3 addObject:v4];
  }

  v30 = v4;
  v43 = 0u;
  v44 = 0u;
  v41 = 0u;
  v42 = 0u;
  obj = v3;
  v33 = [obj countByEnumeratingWithState:&v41 objects:v50 count:16];
  if (v33)
  {
    v32 = *v42;
    v35 = v2;
    do
    {
      v5 = 0;
      do
      {
        if (*v42 != v32)
        {
          objc_enumerationMutation(obj);
        }

        v34 = v5;
        v6 = *(*(&v41 + 1) + 8 * v5);
        elementMonitorCache = v2->_elementMonitorCache;
        v8 = [v6 bundleIdentifier];
        v9 = [(NSMutableDictionary *)elementMonitorCache objectForKeyedSubscript:v8];

        v10 = VOTLogCommon();
        if (os_log_type_enabled(v10, OS_LOG_TYPE_DEBUG))
        {
          *buf = 138412290;
          v46 = v9;
          _os_log_debug_impl(&_mh_execute_header, v10, OS_LOG_TYPE_DEBUG, "Checking in on: %@", buf, 0xCu);
        }

        v39 = 0u;
        v40 = 0u;
        v37 = 0u;
        v38 = 0u;
        v11 = [v9 allKeys];
        v12 = [v11 copy];

        v13 = [v12 countByEnumeratingWithState:&v37 objects:v49 count:16];
        if (v13)
        {
          v14 = v13;
          v15 = *v38;
          do
          {
            for (i = 0; i != v14; i = i + 1)
            {
              if (*v38 != v15)
              {
                objc_enumerationMutation(v12);
              }

              v17 = *(*(&v37 + 1) + 8 * i);
              if ([v17 isAlive])
              {
                [v17 updateCache];
                v18 = [(VOTElementManager *)v2 _monitoredElementCachedText:v17];
                v19 = [v9 objectForKeyedSubscript:v17];
                if ([v19 isEqualToString:v18])
                {

                  v20 = 0;
                }

                else
                {
                  v20 = [v18 length];

                  if (v20)
                  {
                    v20 = v17;
                    [v9 setObject:v18 forKeyedSubscript:v20];
                  }
                }

                v21 = VOTLogCommon();
                if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
                {
                  *buf = 138412546;
                  v46 = v17;
                  v47 = 2112;
                  v48 = v18;
                  _os_log_debug_impl(&_mh_execute_header, v21, OS_LOG_TYPE_DEBUG, "Checked element with newText: %@, %@", buf, 0x16u);
                }
              }

              else
              {
                v18 = [(VOTElementManager *)v2 _similarMonitoredElement:v17];
                v21 = [(VOTElementManager *)v2 _monitoredElementCachedText:v18];
                v22 = VOTLogCommon();
                if (os_log_type_enabled(v22, OS_LOG_TYPE_DEBUG))
                {
                  *buf = 138412546;
                  v46 = v17;
                  v47 = 2112;
                  v48 = v18;
                  _os_log_debug_impl(&_mh_execute_header, v22, OS_LOG_TYPE_DEBUG, "Element not alive: %@, using: %@", buf, 0x16u);
                }

                v23 = [v9 objectForKeyedSubscript:v17];
                if ([v23 isEqualToString:v21])
                {

                  v20 = 0;
                }

                else
                {
                  v24 = v14;
                  v25 = v15;
                  v26 = v12;
                  v27 = [v21 length];

                  if (v27)
                  {
                    v20 = v18;
                    [v9 setObject:v21 forKeyedSubscript:v20];
                  }

                  else
                  {
                    v20 = 0;
                  }

                  v12 = v26;
                  v15 = v25;
                  v14 = v24;
                  v2 = v35;
                }

                [v9 removeObjectForKey:v17];
              }

              if (v20)
              {
                [(VOTElementManager *)v2 _elementMonitoringOutputElement:v20 userMonitored:1];
              }
            }

            v14 = [v12 countByEnumeratingWithState:&v37 objects:v49 count:16];
          }

          while (v14);
        }

        v5 = v34 + 1;
      }

      while ((v34 + 1) != v33);
      v33 = [obj countByEnumeratingWithState:&v41 objects:v50 count:16];
    }

    while (v33);
  }

  v28 = VOTLogCommon();
  if (os_log_type_enabled(v28, OS_LOG_TYPE_DEBUG))
  {
    sub_10012A698();
  }

  if (v2->_flags.isMonitoringElements)
  {
    elementMonitorTimer = v2->_elementMonitorTimer;
    v36[0] = _NSConcreteStackBlock;
    v36[1] = 3221225472;
    v36[2] = sub_100060D5C;
    v36[3] = &unk_1001C76E8;
    v36[4] = v2;
    [(SCRCTargetSelectorTimer *)elementMonitorTimer dispatchAfterDelay:v36 withBlock:0.75];
  }
}

- (void)_updateAutomationAccessibilityApps
{
  v2 = [VOTSharedWorkspace automaticAccessibilityEnabled];
  v3 = AXLogAppAccessibility();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    *buf = 67109120;
    LODWORD(v21) = v2;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "Automatic app mode stats %d", buf, 8u);
  }

  v4 = +[AXSettings sharedInstance];
  v5 = [v4 automaticAccessibilityModes];

  v18 = 0u;
  v19 = 0u;
  v16 = 0u;
  v17 = 0u;
  v6 = v5;
  v7 = [v6 countByEnumeratingWithState:&v16 objects:v24 count:16];
  if (v7)
  {
    v8 = v7;
    v9 = *v17;
    do
    {
      for (i = 0; i != v8; i = i + 1)
      {
        if (*v17 != v9)
        {
          objc_enumerationMutation(v6);
        }

        v11 = *(*(&v16 + 1) + 8 * i);
        if (v2)
        {
          v12 = [v6 objectForKeyedSubscript:*(*(&v16 + 1) + 8 * i)];
          if ([v12 intValue] == 1)
          {
            v13 = j__VOSProcessAllowsScreenRecognition();
          }

          else
          {
            v13 = 0;
          }
        }

        else
        {
          v13 = 0;
        }

        AXSetProcessWantsMLElementForBundle();
        v14 = AXLogAppAccessibility();
        if (os_log_type_enabled(v14, OS_LOG_TYPE_INFO))
        {
          *buf = 138412546;
          v21 = v11;
          v22 = 1024;
          v23 = v13;
          _os_log_impl(&_mh_execute_header, v14, OS_LOG_TYPE_INFO, "Loading automatic mode for %@:%d", buf, 0x12u);
        }
      }

      v8 = [v6 countByEnumeratingWithState:&v16 objects:v24 count:16];
    }

    while (v8);
  }

  [(VOTElementManager *)self _updateMLElementAutorefresh];
}

- (void)_updateContinuousPathTimeout
{
  v3 = +[AXSettings sharedInstance];
  [v3 voiceOverContinuousPathKeyboardStartTimeout];
  [(VOTElementManager *)self setContinuousPathTimeout:?];

  v4 = VOTLogCommon();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_INFO))
  {
    [(VOTElementManager *)self continuousPathTimeout];
    v6 = 134217984;
    v7 = v5;
    _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_INFO, "Updated continuous path timeout: %f", &v6, 0xCu);
  }
}

- (void)_handleEvent:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = [v4 command];
  v6 = [v5 isEqualToString:kVOTEventCommandSimulatedLongPress];

  if ((v6 & 1) == 0)
  {
    [(VOTElementManager *)self _cancelIndefiniteLongPress];
  }

  if (AXDeviceIsTV())
  {
    v7 = +[AXSettings sharedInstance];
    v8 = [v7 voiceOverUseTVToggleStyleNavigation];

    if (v8)
    {
      if (([v4 isKeyEvent] & 1) != 0 || objc_msgSend(v4, "isBrailleEvent"))
      {
        [VOTSharedWorkspace setTvInteractionModeWithoutSaving:2];
      }

      v9 = [(VOTElementManager *)self _currentElement];

      if (!v9)
      {
        v10 = [(VOTElementManager *)self nativeFocusElement];
        [(VOTElementManager *)self _setCurrentElement:v10];
      }
    }
  }

  v11 = [v4 command];
  v12 = [v11 hash];

  if (![(VOTElementManager *)self directTouchModeHandledEvent:v4])
  {
    v13 = [qword_1001FEC40 objectForIndex:v12];
    v14 = [v13 BOOLValue];

    if ((v14 & 1) == 0)
    {
      [(VOTElementManager *)self _stopReadAll];
    }

    v15 = [(AXIndexMap *)self->_commands objectForIndex:v12];
    if ((v12 == [kVOTEventCommandSearchRotorUp hash] || v12 == objc_msgSend(kVOTEventCommandSearchRotorDown, "hash")) && self->_lastHandledEventWasRotorMovement)
    {
      self->_flags.shouldUpdateRotorForElement = 0;
    }

    if (v15)
    {
      v16 = [v15 target];
      [v16 performSelector:objc_msgSend(v15 withObject:{"selector"), v4}];
    }

    else if ([v4 isKeyEvent] && self->_flags.inSearchTextMode)
    {
      [(VOTElementManager *)self _handleSearchTextEvent:v4];
    }

    if (qword_1001FEC80 != -1)
    {
      sub_10012A710();
    }

    v17 = qword_1001FEC78;
    v18 = [v4 command];
    v19 = [v17 containsObject:v18];

    if ((([v4 isTouchEvent] & 1) != 0 || v19) && (-[SCRCTargetSelectorTimer isCancelled](self->_updateAppFromTimer, "isCancelled") & 1) == 0)
    {
      [(VOTElementManager *)self _currentElement];
      v33[0] = _NSConcreteStackBlock;
      v33[1] = 3221225472;
      v33[2] = sub_10006163C;
      v20 = v33[3] = &unk_1001C8DB8;
      v34 = v20;
      if ([(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:v33])
      {
        if (v19)
        {
          [(VOTElementManager *)self setLastUserElementTouchTime:CFAbsoluteTimeGetCurrent()];
        }

        [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
      }
    }

    v21 = [(VOTElementManager *)self _currentElement];
    if ([v21 isBannerNotification] && CFAbsoluteTimeGetCurrent() - self->_lastSentBannerTimerReset > 0.5)
    {
      v22 = [v4 command];
      if ([v22 isEqualToString:kVOTEventCommandIdle])
      {
      }

      else
      {
        v23 = [v4 command];
        v24 = [v23 isEqualToString:kVOTEventCommandTracking];

        if ((v24 & 1) == 0)
        {
          v25 = VOTLogElement();
          if (os_log_type_enabled(v25, OS_LOG_TYPE_DEBUG))
          {
            sub_10012A724(v4);
          }

          self->_lastSentBannerTimerReset = CFAbsoluteTimeGetCurrent();
          [v21 resetBannerTimer];
        }
      }
    }

    if (self->_currentPublicCustomRotorItemResult && v12 != [kVOTEventCommandSearchRotorUp hash] && v12 != objc_msgSend(kVOTEventCommandSearchRotorDown, "hash") && !self->_inTextProcessingRotorMode)
    {
      self->_flags.shouldUpdateRotorForElement = 1;
    }

    v26 = [v4 command];
    v27 = kVOTEventCommandAnnouncement;

    if (v26 == v27)
    {
      v28 = [v4 objectForIndex:116];
      [(VOTElementManager *)self _handleAnnouncement:v28];
    }

    v29 = [(VOTElementManager *)self elementManagerHandledEventCallback];

    if (v29)
    {
      v30 = [(VOTElementManager *)self elementManagerHandledEventCallback];
      (v30)[2](v30, self, v4);
    }

    v31 = [v4 command];
    if (v31 == kVOTEventCommandSearchRotorDown)
    {
      self->_lastHandledEventWasRotorMovement = 1;
    }

    else
    {
      v32 = [v4 command];
      self->_lastHandledEventWasRotorMovement = v32 == kVOTEventCommandSearchRotorUp;
    }
  }
}

- (void)_pausedSpeechInterrupted:(id)a3
{
  v4 = VOTLogSpeech();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_DEFAULT))
  {
    *v5 = 0;
    _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_DEFAULT, "Paused speech interrupted, cancelling reading all", v5, 2u);
  }

  *&self->_flags.isReadingAll = 0;
}

- (void)_updateJindoApplicationCache
{
  v5 = +[AXSpringBoardServer server];
  v3 = [v5 jindoAppBundleIndentifiers];
  jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
  self->_jindoAppBundleIdentifiers = v3;
}

- (void)_moveDetectionModeRotor:(id)a3
{
  elementRotor = self->_elementRotor;
  v4 = [a3 origin];

  [(VOTRotor *)elementRotor incrementDetectionRotor:v4];
}

- (void)_handleElementInteraction:(id)a3
{
  v8 = a3;
  v4 = [v8 command];
  v5 = [v4 isEqualToString:kVOTEventCommandMoveIn];

  if (![VOTSharedWorkspace navigationStyleHonorsGroups])
  {
    goto LABEL_6;
  }

  if (!v5)
  {
    if ([(VOTElementManager *)self _handleMoveOut:v8])
    {
      goto LABEL_7;
    }

    goto LABEL_6;
  }

  if (![(VOTElementManager *)self _handleMoveIn:v8])
  {
LABEL_6:
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent UnknownCommand];
    [v6 sendEvent:v7];
  }

LABEL_7:
}

- (BOOL)_handleMoveIn:(id)a3
{
  v4 = a3;
  v5 = [(VOTElement *)self->_currentElement isAccessibleGroup];
  if (v5)
  {
    v6 = [(VOTElement *)self->_currentElement firstContainedElement];
    [(VOTElementManager *)self _echoDifferentElement:v6 forEvent:v4];
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent InteractIn];
    [v7 sendEvent:v8];

    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
  }

  return v5;
}

- (BOOL)_handleMoveOut:(id)a3
{
  v4 = a3;
  v5 = [(VOTElement *)self->_currentElement groupedParent];
  if (v5)
  {
    [(VOTElementManager *)self _echoDifferentElement:v5 forEvent:v4];
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent InteractOut];
    [v6 sendEvent:v7];

    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
  }

  return v5 != 0;
}

- (void)_updateStateForNotificationData:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (v4)
  {
    if (qword_1001FEC90 != -1)
    {
      sub_10012A7B0();
    }

    v5 = CFGetTypeID(v4);
    if (v5 == AXUIElementGetTypeID())
    {
      v6 = 0;
      v7 = v4;
      goto LABEL_9;
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v8 = v4;
      v7 = [VOTElement elementWithUIElement:v8];
      v6 = 0;
      if (!v7)
      {
        goto LABEL_19;
      }

LABEL_13:
      if ([(VOTElement *)v7 isVisible]&& [(VOTElement *)v7 isValid]&& ([(VOTElement *)v7 frame], !CGRectIsEmpty(v55)))
      {
        v9 = self;
        [(VOTElementManager *)self setNextElementToFocus:v7];
        v10 = VOTLogLayoutChange();
        if (os_log_type_enabled(v10, OS_LOG_TYPE_DEBUG))
        {
          sub_10012A7C4();
        }
      }

      else
      {
        v9 = self;
        v10 = VOTLogLayoutChange();
        if (os_log_type_enabled(v10, OS_LOG_TYPE_DEBUG))
        {
          sub_10012A834();
        }
      }

      self = v9;
LABEL_19:
      if (v6)
      {
LABEL_20:
        [(VOTElementManager *)self setNextStringToSpeakOnScreenChange:v6, v36];
        v11 = VOTLogLayoutChange();
        if (os_log_type_enabled(v11, OS_LOG_TYPE_DEBUG))
        {
          sub_10012A8A4();
        }
      }

LABEL_23:

      goto LABEL_24;
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      if (([qword_1001FEC88 containsObject:v4] & 1) == 0)
      {
        v6 = v4;
        v8 = 0;
        v7 = 0;
        goto LABEL_20;
      }

      goto LABEL_67;
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v37 = self;
      v50 = 0u;
      v51 = 0u;
      v48 = 0u;
      v49 = 0u;
      v12 = v4;
      v13 = [(VOTElement *)v12 countByEnumeratingWithState:&v48 objects:v54 count:16];
      if (v13)
      {
        v14 = v13;
        v36 = v4;
        v6 = 0;
        v7 = 0;
        v15 = *v49;
        p_name = &OBJC_PROTOCOL___VOTRotorDelegate.name;
        v38 = v12;
        while (1)
        {
          for (i = 0; i != v14; i = i + 1)
          {
            if (*v49 != v15)
            {
              objc_enumerationMutation(v12);
            }

            v18 = *(*(&v48 + 1) + 8 * i);
            v19 = CFGetTypeID(v18);
            if (v19 == AXUIElementGetTypeID())
            {
              v7 = v18;
              continue;
            }

            objc_opt_class();
            if (objc_opt_isKindOfClass())
            {
              if ([p_name[401] containsObject:v18])
              {
                continue;
              }

              v20 = v18;
              v21 = v6;
              v6 = v20;
            }

            else
            {
              objc_opt_class();
              if ((objc_opt_isKindOfClass() & 1) == 0)
              {
                continue;
              }

              v46 = 0u;
              v47 = 0u;
              v44 = 0u;
              v45 = 0u;
              v21 = [(VOTElement *)v18 allValues];
              v22 = [v21 countByEnumeratingWithState:&v44 objects:v53 count:16];
              if (v22)
              {
                v23 = v22;
                v39 = v6;
                v24 = *v45;
                do
                {
                  for (j = 0; j != v23; j = j + 1)
                  {
                    if (*v45 != v24)
                    {
                      objc_enumerationMutation(v21);
                    }

                    v26 = *(*(&v44 + 1) + 8 * j);
                    v27 = CFGetTypeID(v26);
                    if (v27 == AXUIElementGetTypeID())
                    {
                      v7 = v26;
                    }
                  }

                  v23 = [v21 countByEnumeratingWithState:&v44 objects:v53 count:16];
                }

                while (v23);
                v12 = v38;
                v6 = v39;
                p_name = (&OBJC_PROTOCOL___VOTRotorDelegate + 8);
              }
            }
          }

          v14 = [(VOTElement *)v12 countByEnumeratingWithState:&v48 objects:v54 count:16];
          if (!v14)
          {
            v4 = v36;
            self = v37;
            goto LABEL_70;
          }
        }
      }

      v6 = 0;
      v7 = 0;
    }

    else
    {
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
LABEL_67:
        v8 = 0;
        v6 = 0;
        v7 = 0;
        goto LABEL_23;
      }

      v42 = 0u;
      v43 = 0u;
      v40 = 0u;
      v41 = 0u;
      v12 = [(VOTElement *)v4 allValues];
      v28 = [(VOTElement *)v12 countByEnumeratingWithState:&v40 objects:v52 count:16];
      if (v28)
      {
        v29 = v28;
        v30 = self;
        v31 = v4;
        v7 = 0;
        v32 = *v41;
        do
        {
          for (k = 0; k != v29; k = k + 1)
          {
            if (*v41 != v32)
            {
              objc_enumerationMutation(v12);
            }

            v34 = *(*(&v40 + 1) + 8 * k);
            v35 = CFGetTypeID(v34);
            if (v35 == AXUIElementGetTypeID())
            {
              v7 = v34;
            }
          }

          v29 = [(VOTElement *)v12 countByEnumeratingWithState:&v40 objects:v52 count:16];
        }

        while (v29);
        v6 = 0;
        v4 = v31;
        self = v30;
      }

      else
      {
        v6 = 0;
        v7 = 0;
      }
    }

LABEL_70:

    if (!v7)
    {
      v8 = 0;
      goto LABEL_19;
    }

LABEL_9:
    v7 = [[VOTElement alloc] initWithAXElement:v7];
    v8 = 0;
    if (!v7)
    {
      goto LABEL_19;
    }

    goto LABEL_13;
  }

LABEL_24:
}

- (void)handleNotification:(int)a3 withData:(id)a4 forElement:(__AXUIElement *)a5
{
  v8 = a4;
  v9 = VOTLogNotifications();
  if (os_log_type_enabled(v9, OS_LOG_TYPE_DEBUG))
  {
    sub_10012A914();
  }

  if (![(VOTElementManager *)self _shouldIgnoreNotificationForContinuityDisplay:v8 withElement:a5])
  {
    if (a3 <= 2024)
    {
      switch(a3)
      {
        case 1000:
          v18 = VOTLogLayoutChange();
          if (os_log_type_enabled(v18, OS_LOG_TYPE_DEBUG))
          {
            sub_10012AA1C();
          }

          if (_AXSAutomationEnabled())
          {
            v19 = +[NSDistributedNotificationCenter defaultCenter];
            [v19 postNotificationName:@"VoiceOverEventOccurred" object:@"DidReceiveScreenChange"];
          }

          if ([(VOTElementManager *)self _notificationData:v8 containsToken:kAXScreenChangePopup])
          {
            v20 = +[VOTOutputManager outputManager];
            v21 = +[VOSOutputEvent PopoverDidAppear];
            [v20 sendEvent:v21];
          }

          [(SCRCThread *)self->_elementManagerThread performSelector:"_updateStateForNotificationData:" onTarget:self cancelMask:0 count:1 objects:v8, 0];
          [(SCRCThread *)self->_elementManagerThread performSelector:"_notificationThreadCancel" onTarget:self cancelMask:1574144 count:0 objects:0];
          v22 = [(VOTElementManager *)self _notificationData:v8 containsToken:kAXPerformElementUpdateImmediatelyToken];
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenChange:sound:";
          if (v22)
          {
            goto LABEL_103;
          }

          v29 = 0;
          v30 = 0;
          v12 = self;
          v13 = 256;
          goto LABEL_104;
        case 1001:
          if (_AXSAutomationEnabled())
          {
            v24 = +[NSDistributedNotificationCenter defaultCenter];
            [v24 postNotificationName:@"VoiceOverEventOccurred" object:@"DidReceiveLayoutChange"];
          }

          v25 = VOTLogLayoutChange();
          if (os_log_type_enabled(v25, OS_LOG_TYPE_DEBUG))
          {
            sub_10012A9AC();
          }

          if ([(VOTElementManager *)self _notificationData:v8 containsToken:kAXForceUpdateChangeToken])
          {
            [(VOTElementManager *)self setDidReceiveForceUpdateChangeToken:1];
          }

          [(SCRCThread *)self->_elementManagerThread performSelector:"_updateStateForNotificationData:" onTarget:self cancelMask:0 count:1 objects:v8, 0];
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleElementChangedNotification:";
          v29 = 0;
          v12 = self;
          v13 = 1024;
          goto LABEL_113;
        case 1004:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenLock:";
          goto LABEL_112;
        case 1005:
          v16 = self->_elementManagerThread;
          v17 = [[VOTElement alloc] initWithAXElement:a5];
          [(SCRCThread *)v16 performSelector:"_handleValueChangedNotification:associatedElement:" onTarget:self cancelMask:0 count:2 objects:v8, v17, 0];

          goto LABEL_116;
        case 1006:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAlertReceived:forApplication:";
          v29 = a5;
          v30 = 0;
          v12 = self;
          v13 = 2048;
          goto LABEL_104;
        case 1007:
        case 1072:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebPageLoaded:";
          goto LABEL_112;
        case 1008:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAnnouncementNotification:";
          goto LABEL_112;
        case 1009:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScrollByPageNotification:";
          v29 = 0;
          v12 = self;
          v13 = 512;
          goto LABEL_113;
        case 1010:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAutoCorrectionMadeNotification:";
          goto LABEL_81;
        case 1012:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKeyboardKeySelectedNotification:";
          v29 = 0;
          v12 = self;
          v13 = 0x8000;
          goto LABEL_113;
        case 1013:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAutoCorrectionDisplayNotification:";
LABEL_81:
          v29 = 0;
          v12 = self;
          v13 = 4096;
          goto LABEL_113;
        case 1014:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKeyboardChangedNotification";
          goto LABEL_96;
        case 1016:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleElementMoved:";
          goto LABEL_112;
        case 1017:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleSelectionChangedNotification:";
          v29 = 0;
          v12 = self;
          v13 = 0x10000;
          goto LABEL_113;
        case 1018:
          [(SCRCThread *)self->_elementManagerThread performSelector:"_notificationThreadCancel" onTarget:self cancelMask:0x10000 count:0 objects:0];
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleFirstResponderChangedNotification:";
          v29 = 0;
          v12 = self;
          v13 = 0x20000;
          goto LABEL_113;
        case 1020:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleMoveToElementNotification:";
          goto LABEL_112;
        case 1022:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebSelectionChangedNotification:";
          goto LABEL_112;
        case 1023:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleInvalidTextInputNotification:";
          goto LABEL_112;
        case 1024:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAppSuspendAnimationProgressNotification:";
          goto LABEL_112;
        case 1026:
          block[0] = _NSConcreteStackBlock;
          block[1] = 3221225472;
          block[2] = sub_100062B08;
          block[3] = &unk_1001C76E8;
          block[4] = self;
          if (qword_1001FEC98 != -1)
          {
            dispatch_once(&qword_1001FEC98, block);
          }

          [(SCRCTargetSelectorTimer *)self->_invalidStatusChangedTimer cancel];
          [(SCRCTargetSelectorTimer *)self->_invalidStatusChangedTimer dispatchAfterDelay:v8 withObject:1.0];
          goto LABEL_116;
        case 1029:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKBPopupVariantsNotification:";
          goto LABEL_112;
        case 1030:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenUnlock";
          goto LABEL_96;
        case 1032:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleCurrentContentReadingLineUpdated:";
          goto LABEL_112;
        case 1035:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleCameraCenteredNotification:";
          goto LABEL_112;
        case 1038:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleBarcodeVisibilityNotification:";
          goto LABEL_112;
        case 1039:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOn";
          goto LABEL_96;
        case 1040:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOff";
          goto LABEL_96;
        case 1041:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleStopSpeaking";
          goto LABEL_96;
        case 1042:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOnSilently";
          goto LABEL_96;
        case 1043:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenOffSilently";
          goto LABEL_96;
        case 1044:
          v14 = self->_elementManagerThread;
          v15 = "_handleVisualsUpdate:";
          goto LABEL_100;
        case 1045:
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v23 = [v8 isEqualToNumber:&__kCFBooleanTrue];
            self->_isInPreview = v23;
            if ((v23 & 1) == 0)
            {
              [(VOTElementManager *)self _simulatedForceTouchLift];
            }
          }

          goto LABEL_116;
        case 1046:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleExpandedStatusChanged:";
          goto LABEL_112;
        case 1047:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleFocusedElementContentChangeNotification:";
          goto LABEL_112;
        case 1048:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleRequestExclusiveAudioHardware";
          goto LABEL_96;
        case 1049:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleReleaseExclusiveAudioHardware";
          goto LABEL_96;
        case 1050:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleUnmuteEligibleEventOccured";
          goto LABEL_96;
        case 1052:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleTextReplacementOccurredNotification:";
          goto LABEL_112;
        case 1053:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleNativeFocusItemChangedNotification:";
          v29 = 0;
          v12 = self;
          v13 = 0x100000;
          goto LABEL_113;
        case 1055:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenWillChangeNotification:";
          goto LABEL_112;
        case 1056:
          v14 = self->_elementManagerThread;
          v15 = "_handleDidReceiveVisionEngineResult:";
          goto LABEL_100;
        case 1057:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleRealtimeElementUpdate:";
          goto LABEL_112;
        case 1059:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenWillWakeNotification:";
          goto LABEL_112;
        case 1061:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebFormControlInteractionStartNotification:";
          goto LABEL_112;
        case 1062:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebFormControlInteractionEndNotification:";
          goto LABEL_112;
        case 1063:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleKeyboardContinuousPathDidBegin:";
          goto LABEL_112;
        case 1064:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLiveContinuousToneBeginNotification:";
          goto LABEL_112;
        case 1065:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLiveContinuousToneUpdateNotification:";
          goto LABEL_112;
        case 1066:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLiveContinuousToneEndNotification:";
          goto LABEL_112;
        case 1068:
          v14 = self->_elementManagerThread;
          v15 = "_handleCaptionsDisplayedNotification:";
LABEL_100:
          [(SCRCThread *)v14 performSelector:v15 onTarget:self count:1 objects:v8, 0];
          goto LABEL_116;
        case 1070:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleContextMenuStatusNotification:";
          goto LABEL_112;
        case 1071:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleDuckingDisabling:";
          goto LABEL_112;
        case 1073:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handlePauseSpeechAndHapticsNotification:";
          goto LABEL_112;
        case 1074:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAudiographSelectedSeriesChangedNotification:";
          goto LABEL_112;
        case 1075:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleAudiographPlaybackStateNotification:";
          goto LABEL_112;
        case 1080:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleStopSpeakingAndClearQueue";
LABEL_96:
          v12 = self;
          v13 = 0;
          v26 = 0;
          v27 = 0;
          goto LABEL_115;
        default:
          goto LABEL_116;
      }
    }

    if (a3 > 4999)
    {
      if (a3 > 5700)
      {
        switch(a3)
        {
          case 5701:
            elementManagerThread = self->_elementManagerThread;
            v11 = "_handleSiriFinishedTalking:";
            break;
          case 5702:
            elementManagerThread = self->_elementManagerThread;
            v11 = "_handleSiriStartedListening:";
            break;
          case 5703:
            elementManagerThread = self->_elementManagerThread;
            v11 = "_handleSiriFinishedListening:";
            break;
          default:
            goto LABEL_116;
        }
      }

      else
      {
        if (a3 == 5000)
        {
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v28 = [NSMutableDictionary dictionaryWithDictionary:v8];
            [v28 setObject:&__kCFBooleanTrue forKeyedSubscript:kAXPerformElementUpdateImmediatelyToken];
          }

          else
          {
            v28 = kAXPerformElementUpdateImmediatelyToken;
          }

          [(SCRCThread *)self->_elementManagerThread performSelector:"_handleScreenChange:sound:" onTarget:self count:2 objects:v28, 0, 0];
          v8 = v28;
          goto LABEL_116;
        }

        if (a3 == 5001)
        {
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleScreenChange:sound:";
LABEL_103:
          v29 = 0;
          v30 = 0;
          v12 = self;
          v13 = 0x80000;
LABEL_104:
          v26 = 2;
          goto LABEL_114;
        }

        if (a3 != 5700)
        {
          goto LABEL_116;
        }

        elementManagerThread = self->_elementManagerThread;
        v11 = "_handleSiriStartedTalking:";
      }
    }

    else if (a3 > 3026)
    {
      switch(a3)
      {
        case 3027:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebTextMatchSelectedNotification:";
          break;
        case 3032:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleCurrentStateChanged:";
          break;
        case 3033:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleSortDirectionChanged:";
          break;
        default:
          goto LABEL_116;
      }
    }

    else
    {
      switch(a3)
      {
        case 2025:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleLabelElementAcceptedNotification:";
          break;
        case 2026:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleItemChooserSelectionMade:";
          break;
        case 3026:
          elementManagerThread = self->_elementManagerThread;
          v11 = "_handleWebTextAvailableNotification:";
          break;
        default:
          goto LABEL_116;
      }
    }

LABEL_112:
    v29 = 0;
    v12 = self;
    v13 = 0;
LABEL_113:
    v26 = 1;
LABEL_114:
    v27 = v8;
LABEL_115:
    [(SCRCThread *)elementManagerThread performSelector:v11 onTarget:v12 cancelMask:v13 count:v26 objects:v27, v29, v30];
  }

LABEL_116:
}

- (void)_handleLiveContinuousToneBeginNotification:(id)a3
{
  v8 = a3;
  if (AXDeviceSupportsSonification())
  {
    v3 = +[VOTAudiographManager sharedManager];
    [v3 beginLiveModeSession];

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      [v8 floatValue];
      v5 = v4;
      if (v5 > 1.0)
      {
        v5 = 1.0;
      }

      v6 = fmax(v5, 0.0);
      v7 = +[VOTAudiographManager sharedManager];
      [v7 setLiveModeValue:v6];
    }
  }
}

- (void)_handleLiveContinuousToneUpdateNotification:(id)a3
{
  v7 = a3;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    [v7 floatValue];
    v4 = v3;
    if (v4 > 1.0)
    {
      v4 = 1.0;
    }

    v5 = fmax(v4, 0.0);
    v6 = +[VOTAudiographManager sharedManager];
    [v6 setLiveModeValue:v5];
  }
}

- (void)_handleLiveContinuousToneEndNotification:(id)a3
{
  v3 = +[VOTAudiographManager sharedManager];
  [v3 endLiveModeSession];
}

- (BOOL)_notificationData:(id)a3 containsToken:(id)a4
{
  v5 = a3;
  v6 = a4;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v7 = [v5 containsObject:v6];
LABEL_7:
    v9 = v7;
    goto LABEL_10;
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v7 = [v5 isEqual:v6];
    goto LABEL_7;
  }

  v8 = [v5 allKeys];
  if ([v8 containsObject:v6])
  {
    v9 = 1;
  }

  else
  {
    v10 = [v5 objectForKey:kAXNotificationDataKey];
    v9 = [v10 isEqual:v6];
  }

LABEL_10:
  return v9;
}

- (id)_notificationData:(id)a3 consumingToken:(id)a4
{
  v5 = a3;
  v6 = a4;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [v5 containsObject:v6])
  {
    v7 = [v5 mutableCopy];
    [v7 removeObject:v6];
    if ([v7 count])
    {
      v8 = v7;
    }

    else
    {
      v8 = 0;
    }
  }

  else if ([v5 isEqual:v6])
  {
    v8 = 0;
  }

  else
  {
    v8 = v5;
  }

  return v8;
}

- (void)sendRequest:(id)a3
{
  v4 = a3;
  v5 = VOTLogCommon();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012AA8C();
  }

  if ([VOTSharedWorkspace pauseSpeechAndHaptics])
  {
    v6 = VOTLogAudio();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "Not sending request because speech and haptics is currently paused", buf, 2u);
    }
  }

  else
  {
    if (![(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:&stru_1001C8E18])
    {
      v7 = [(VOTElement *)self->_currentElement application];
      if ([v7 isDictationListening])
      {
      }

      else
      {
        v8 = [(VOTElement *)self->_currentElement remoteApplication];
        v9 = [v8 isDictationListening];

        if (!v9)
        {
          [v4 send];
          goto LABEL_14;
        }
      }
    }

    v10 = VOTLogAudio();
    if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
    {
      *v11 = 0;
      _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "Not sending request because either siri or dictation is listening", v11, 2u);
    }

    [(VOTElementManager *)self setLastBlockedRequestBySiriOrDictationTime:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self setLastRequestBlockedBySiriOrDictation:v4];
  }

LABEL_14:
}

- (double)keyboardKeyPenumbra:(id)a3
{
  [a3 frame];
  result = v3 + v3 / -6.0;
  if (result > 33.0)
  {
    return 33.0;
  }

  return result;
}

- (void)_showVisualRotor:(id)a3 direction:(BOOL)a4
{
  v4 = a4;
  v15 = a3;
  v6 = +[VOTCommandHelper commandHelper];
  v7 = [v6 helpEnabled];

  if ((v7 & 1) == 0)
  {
    self->_flags.visualRotorDisplayed = 1;
    v8 = [v15 currentVisualRotorString];
    v9 = objc_allocWithZone(NSDictionary);
    v10 = [NSNumber numberWithBool:v4];
    v11 = +[NSNumber numberWithInteger:](NSNumber, "numberWithInteger:", [v15 rotorCount]);
    v12 = [NSNumber numberWithBool:1];
    v13 = [v9 initWithObjectsAndKeys:{v10, @"increment", v11, @"count", v8, @"title", v12, @"show", 0}];

    v14 = +[VOTDisplayManager displayManager];
    [v14 updateVisualRotor:v13];
  }

  [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer cancel];
  [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer dispatchAfterDelay:1.5];
}

- (void)_hideVisualRotor
{
  if (!self->_flags.visualRotorDisplayed || ([(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer isCancelled]& 1) != 0)
  {
    goto LABEL_8;
  }

  if ([VOTSharedWorkspace fingerCount] != 2)
  {
    v3 = objc_allocWithZone(NSDictionary);
    v4 = [NSNumber numberWithBool:0];
    v5 = [v3 initWithObjectsAndKeys:{v4, @"show", 0}];

    v6 = +[VOTDisplayManager displayManager];
    [v6 updateVisualRotor:v5];

LABEL_8:
    self->_flags.visualRotorDisplayed = 0;
    return;
  }

  [(VOTElementManager *)self hideVisualRotor];
}

- (void)hideVisualRotor
{
  if (![(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer isPending]|| [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer isCancelled])
  {
    [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer cancel];
    visualRotorFadeTimer = self->_visualRotorFadeTimer;

    [(SCRCTargetSelectorTimer *)visualRotorFadeTimer dispatchAfterDelay:0.75];
  }
}

- (void)_resetElementUnitIndexes
{
  self->_elementUnitIndex = -1;
  self->_elementUnitOutputRange = 0u;
  self->_bookCursorPosition = -1;
  self->_bookLineRange = xmmword_10017E110;
  self->_bookLineNumber = 0x7FFFFFFFLL;
  if (!self->_bookUpdatedCurrentLine)
  {
    bookLineString = self->_bookLineString;
    self->_bookLineString = 0;
  }

  self->_readWordCyclingCount = 0;
}

- (void)_setElementUnitIndexesToEndOfElement:(id)a3
{
  v24 = a3;
  if ([v24 isReadingContent])
  {
    v4 = [v24 pageContent];
    v5 = [v4 length];
    v6 = 0;
    v7 = 0;
    self->_elementUnitIndex = v5;
    self->_elementUnitOutputRange.location = v5;
    self->_elementUnitOutputRange.length = 0;
    do
    {
      v8 = v6;
      if (v7 >= v5)
      {
        break;
      }

      v9 = [v24 stringForLineNumber:v6];
      v10 = [v9 length];

      v7 += v10;
      v6 = v8 + 1;
    }

    while (v10);
    if (v8)
    {
      v11 = v8 + 1;
      v12 = v24;
      while (--v11 >= 0)
      {
        v13 = [v24 stringForLineNumber:v11];
        v14 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
        v15 = [v13 stringByTrimmingCharactersInSet:v14];

        v16 = [v15 length];
        v12 = v24;
        if (v16)
        {
          goto LABEL_13;
        }
      }

      v11 = -1;
LABEL_13:
      self->_bookLineNumber = v11;
      if ([v12 supportsRangeForLineNumber])
      {
        location = [v24 rangeForLineNumber:v11];
        self->_bookLineRange.location = location;
        self->_bookLineRange.length = length;
      }

      else
      {
        v22 = [v24 stringForLineNumber:v11];
        self->_bookLineRange.location = [(VOTElementManager *)self _rangeOfLine:v22 inBookContent:v4];
        self->_bookLineRange.length = v23;

        location = self->_bookLineRange.location;
        length = self->_bookLineRange.length;
      }

      v18 = location + length;
    }

    else
    {
      self->_bookLineRange = xmmword_10017E110;
      self->_bookLineNumber = 0x7FFFFFFFLL;
      v18 = -1;
    }

    v19 = 720;
  }

  else
  {
    v4 = [v24 visibleText];
    v17 = [v4 length];
    v18 = 0;
    self->_elementUnitIndex = v17;
    self->_elementUnitOutputRange.location = v17;
    self->_elementUnitOutputRange.length = 0;
    self->_bookCursorPosition = -1;
    self->_bookLineNumber = 0x7FFFFFFFLL;
    v19 = 712;
    self->_bookLineRange.location = 0x7FFFFFFFLL;
  }

  *(&self->super.isa + v19) = v18;
}

- (void)_setPreviousTouchTypingKey:(id)a3
{
  v5 = a3;
  previousTouchTypingKey = self->_previousTouchTypingKey;
  p_previousTouchTypingKey = &self->_previousTouchTypingKey;
  if (previousTouchTypingKey != v5)
  {
    v8 = v5;
    objc_storeStrong(p_previousTouchTypingKey, a3);
    v5 = v8;
  }
}

- (BOOL)_isTouchTypingEventTooCloseToEdge:(id)a3
{
  [a3 touchPoint];
  [VOTSharedWorkspace convertDevicePointToZoomedPoint:?];
  v4 = v3;
  v6 = v5;
  v7 = [VOTSharedWorkspace deviceOrientation];
  v8 = 1.5;
  if (AXDeviceIsPhoneIdiom())
  {
    if ((AXDeviceIsTallPhoneIdiom() & ((v7 - 3) < 2)) != 0)
    {
      v8 = 0.0;
    }

    else
    {
      v8 = 2.0;
    }
  }

  v9 = &xmmword_1001FF150;
  if (v7 == 3)
  {
    v10 = v6;
  }

  else
  {
    v10 = v4;
  }

  if (v7 == 3)
  {
    v9 = &xmmword_1001FF150 + 1;
  }

  if (v7 == 4)
  {
    v10 = v6;
    v9 = &xmmword_1001FF150 + 1;
  }

  return v10 >= *v9 - v8 || v10 <= v8;
}

- (void)_performTouchTypingKeyPress:(id)a3
{
  v4 = a3;
  v36 = [(VOTElementManager *)self _currentElement];
  [(VOTElementManager *)self keyboardKeyPenumbra:v36];
  v6 = v5;
  v7 = [(VOTElementManager *)self _isTouchTypingEventTooCloseToEdge:v4];
  [v36 frame];
  v9 = v8;
  v11 = v10;
  v13 = v12;
  v15 = v14;
  v16 = +[VOTElement systemWideElement];
  [v16 convertRect:objc_msgSend(v36 fromContextId:{"windowContextId"), v9, v11, v13, v15}];
  v18 = v17;
  v20 = v19;
  v22 = v21;
  v24 = v23;

  v25 = VOTSharedWorkspace;
  [v4 touchPoint];
  v27 = v26;
  v29 = v28;

  [v25 convertDevicePointToZoomedPoint:{v27, v29}];
  if ((v7 & 1) == 0)
  {
    v32 = v30;
    v33 = v31;
    if ([v36 keyboardKeyAllowsTouchTyping])
    {
      v39.origin.x = v18;
      v39.origin.y = v20;
      v39.size.width = v22;
      v39.size.height = v24;
      v40 = CGRectInset(v39, -v6, -v6);
      v38.x = v32;
      v38.y = v33;
      v34 = CGRectContainsPoint(v40, v38);
      if (!v4 || v34)
      {
        v35 = +[VOTOutputManager outputManager];
        [v35 stopSpeakingAtBoundary:0];

        [v36 performSimpleTap];
        [(VOTElementManager *)self _setPreviousTouchTypingKey:v36];
      }
    }
  }
}

- (void)_cleanupMapInteractionOnIdle
{
  [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCancelRequest:1];
  switchRoadsOutputRequest = self->_switchRoadsOutputRequest;
  self->_switchRoadsOutputRequest = 0;

  self->_flags.shouldSpeakSameLineTouched = 1;
  self->_flags.didTouchTypingOutputStart = 0;
  upcomingRoadElement = self->_upcomingRoadElement;
  self->_upcomingRoadElement = 0;

  [(VOTOutputRequest *)self->_startTrackingRoadRequest setCancelRequest:1];
  [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:0];
  startTrackingRoadRequest = self->_startTrackingRoadRequest;
  self->_startTrackingRoadRequest = 0;
}

- (void)_handleIdle:(id)a3
{
  v10 = a3;
  if ([VOTSharedWorkspace typingMode] == 1 && self->_flags.didTouchTypingOutputStart)
  {
    if (CFAbsoluteTimeGetCurrent() > self->_touchTypingStartTime || (-[VOTElementManager _currentElement](self, "_currentElement"), v4 = objc_claimAutoreleasedReturnValue(), v5 = [v4 isEqual:self->_previousTouchTypingKey], v4, v5))
    {
      [(VOTElementManager *)self _performTouchTypingKeyPress:v10];
    }

    else
    {
      [(VOTElementManager *)self _setPreviousTouchTypingKey:0];
    }
  }

  if ([VOTSharedWorkspace reachabilityActive] && self->_flags.setReachabilityIsActiveWhileFingerDown)
  {
    [(VOTElementManager *)self _reachabilityHandleTrackingStopped];
  }

  [(VOTElementManager *)self _cleanupMapInteractionOnIdle];
  self->_shouldContinueRoadTracking = 0;
  [(VOTElementManager *)self hideVisualRotor];
  self->_flags.lastEventWasIdle = 1;
  self->_flags.usePenumbraForKeyboardKeys = 0;
  fetchManager = self->_fetchManager;
  v7 = [(VOTElementManager *)self _currentElement];
  [(VOTElementFetcher *)fetchManager updateCacheWithElement:v7];

  v8 = CGPointZero;
  self->_firstRoadTravelPoint = CGPointZero;
  self->_lastRoadTravelPoint = v8;
  [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer cancel];
  [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer cancel];
  self->_flags.shouldTriggerAlternativeKeyActivation = 0;
  self->_keyboardAlternativesVisible = 0;
  [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer cancel];
  [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer cancel];
  *&self->_flags.continuousPathActivationDesired = 0;
  continuousPathSuggestion = self->_continuousPathSuggestion;
  self->_continuousPathSuggestion = 0;

  self->_flags.isContinuousPathOutsideBounds = 0;
  if (self->_flags.inPassthroughMode)
  {
    [(VOTElementManager *)self _finishPassthroughMode];
  }
}

- (void)_setSelectedTextRange:(_NSRange)a3 onElement:(id)a4 refreshBraille:(BOOL)a5 isVoiceOverSelectionMovement:(BOOL)a6
{
  v6 = a6;
  v7 = a5;
  length = a3.length;
  location = a3.location;
  v11 = a4;
  [v11 selectedTextRange];
  v13 = v12;
  [v11 setSelectedTextRange:location refreshBraille:length isVoiceOverSelectionMovement:{v7, v6}];

  if ((!v13 && length || v13 && !length) && !self->_inTextProcessingRotorMode)
  {
    self->_flags.shouldUpdateRotorForElement = 1;
  }
}

- (_NSRange)_rangeOfLine:(id)a3 inBookContent:(id)a4
{
  v5 = a4;
  v6 = [a3 stringByReplacingOccurrencesOfString:@"" withString:&stru_1001CBF90];
  v7 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
  v8 = [v6 stringByTrimmingCharactersInSet:v7];

  if (v8)
  {
    v9 = v8;
    v10 = 0;
    v11 = [v9 length] / 0xA;
    do
    {
      v12 = v9;
      v13 = [v5 rangeOfString:v9];
      v15 = v14;
      v9 = [v9 substringToIndex:{objc_msgSend(v9, "length") - v11}];

      if (v10 > 8)
      {
        break;
      }

      ++v10;
    }

    while (v13 == 0x7FFFFFFFFFFFFFFFLL);
    if (v13 == 0x7FFFFFFFFFFFFFFFLL)
    {
      v15 = 0;
    }
  }

  else
  {
    v15 = 0;
    v13 = 0x7FFFFFFFFFFFFFFFLL;
  }

  v16 = v13;
  v17 = v15;
  result.length = v17;
  result.location = v16;
  return result;
}

- (void)_handleCurrentContentReadingLineUpdated:(id)a3
{
  v9 = a3;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v4 = [v9 objectForKey:@"lineString"];

    if (v4)
    {
      v5 = [v9 objectForKey:@"lineString"];
      v6 = [v5 copy];
      bookLineString = self->_bookLineString;
      self->_bookLineString = v6;
    }

    else
    {
      v8 = [v9 objectForKey:@"lineNumber"];

      if (!v8)
      {
LABEL_7:
        self->_bookUpdatedCurrentLine = 1;
        goto LABEL_8;
      }

      v5 = [v9 objectForKey:@"lineNumber"];
      self->_bookLineNumber = [v5 integerValue];
    }

    goto LABEL_7;
  }

LABEL_8:

  _objc_release_x1();
}

- (void)_handleBookContentMovement:(id)a3 direction:(int64_t)a4 unit:(int64_t)a5 generateOutput:(BOOL)a6
{
  v6 = a6;
  v93 = a3;
  bookCursorPosition = self->_bookCursorPosition;
  v11 = [v93 value];
  v12 = [v93 attributedValueForRange:{0, objc_msgSend(v11, "length")}];

  if (![v12 length])
  {
    v13 = [v93 pageContent];

    v12 = v13;
  }

  v14 = [v12 length];
  v15 = self->_bookCursorPosition;
  if (v15 == 0x7FFFFFFFFFFFFFFFLL || (bookLineNumber = self->_bookLineNumber, bookLineNumber == -1) || self->_bookLineRange.location == 0x7FFFFFFF || !self->_bookLineRange.length)
  {
    v17 = [v93 stringForLineNumber:0];
    if ([v17 length])
    {
      objc_storeStrong(&self->_bookLineString, v17);
      if ([v93 supportsRangeForLineNumber])
      {
        v18 = [v93 rangeForLineNumber:0];
      }

      else
      {
        v18 = [(VOTElementManager *)self _rangeOfLine:self->_bookLineString inBookContent:v12];
      }

      self->_bookLineRange.location = v18;
      self->_bookLineRange.length = v19;
      self->_bookCursorPosition = 0;
      self->_bookLineNumber = 0;
    }

    v15 = self->_bookCursorPosition;
    bookLineNumber = self->_bookLineNumber;
  }

  if ((a5 - 1) <= 1)
  {
    v90 = v14;
    if (a5 == 1)
    {
      if (a4 == 1 && v15 < v14)
      {
        v20 = v15 & ~(v15 >> 63);
      }

      else
      {
        v23 = 0;
        v21 = 0x7FFFFFFFFFFFFFFFLL;
        if (a4 != 2 || (v20 = v15 - 1, v15 < 1))
        {
LABEL_30:
          if ([(VOTElementManager *)self _handleMovementForElementFollowingElement:v93 direction:a4 unit:a5 mode:1])
          {
            goto LABEL_87;
          }

          if ([v93 readingContentCausesPageTurn])
          {
            v27 = self;
            v28 = a4;
            v29 = a5;
            goto LABEL_33;
          }

          goto LABEL_71;
        }
      }

      v24 = [v12 rangeOfComposedCharacterSequenceAtIndex:v20];
    }

    else
    {
      v24 = [v12 wordFromPosition:v15 inDirection:a4];
    }

    v21 = v24;
    v23 = v25;
    if (v24 != 0x7FFFFFFF && v24 != 0x7FFFFFFFFFFFFFFFLL)
    {
      if (a4 == 1)
      {
        v30 = v25;
      }

      else
      {
        v30 = 0;
      }

      v31 = v24 + v30;
      self->_bookCursorPosition = v31;
      location = self->_bookLineRange.location;
      if (v31 >= location)
      {
        if (v31 > self->_bookLineRange.length + location)
        {
          ++self->_bookLineNumber;
          v36 = [v93 stringForLineNumber:?];
          if (v36 || ([(VOTElementManager *)self _currentTextLineInBookElement:0], (v36 = objc_claimAutoreleasedReturnValue()) != 0))
          {
            v92 = bookLineNumber;
            v37 = v23;
            v84 = a4;
            bookLineString = self->_bookLineString;
            self->_bookLineString = v36;
            v39 = v36;

            a4 = v84;
            v23 = v37;
            bookLineNumber = v92;
          }

          else
          {
            --self->_bookLineNumber;
            self->_bookCursorPosition = v90;
          }
        }
      }

      else
      {
        v33 = self->_bookLineNumber;
        v26 = v33 - 1;
        if (v33 >= 1)
        {
          self->_bookLineNumber = v26;
          v34 = [v93 stringForLineNumber:?];
          if (!v34)
          {
            v34 = [(VOTElementManager *)self _currentTextLineInBookElement:0];
          }

          v35 = self->_bookLineString;
          self->_bookLineString = v34;
        }
      }

      if (self->_bookLineNumber != bookLineNumber && [(NSString *)self->_bookLineString length])
      {
        if ([v93 supportsRangeForLineNumber])
        {
          v40 = [v93 rangeForLineNumber:self->_bookLineNumber];
        }

        else
        {
          v40 = [(VOTElementManager *)self _rangeOfLine:self->_bookLineString inBookContent:v12];
        }

        self->_bookLineRange.location = v40;
        self->_bookLineRange.length = v41;
      }

      goto LABEL_71;
    }

    goto LABEL_30;
  }

  if (a5 != 3)
  {
    v23 = 0;
    v21 = 0x7FFFFFFFFFFFFFFFLL;
    goto LABEL_71;
  }

  v91 = v14;
  v21 = self->_bookLineRange.location;
  v22 = self->_bookLineRange.length + v21;
  v23 = v15 - v21;
  if (v15 > v21 && v22 > v15)
  {
    if (a4 != 1)
    {
LABEL_56:
      self->_bookCursorPosition = v21;
      goto LABEL_71;
    }

LABEL_45:
    v23 = v22 - v15;
    self->_bookCursorPosition = v22;
    v21 = v15;
    goto LABEL_71;
  }

  if (a4 == 1)
  {
    if (v15 == v21)
    {
      goto LABEL_45;
    }

    v89 = 1;
  }

  else
  {
    v89 = -1;
    if (a4 == 2 && v22 == v15)
    {
      goto LABEL_56;
    }
  }

  v85 = a4;
  v42 = v89 + bookLineNumber;
  if (v89 + bookLineNumber < 0)
  {
    a4 = v85;
    if ([(VOTElementManager *)self _handleMovementForElementFollowingElement:v93 direction:v85 unit:3 mode:1])
    {
      goto LABEL_87;
    }

    v23 = 0;
    v21 = 0x7FFFFFFFFFFFFFFFLL;
  }

  else
  {
    v43 = v93;
    v88 = v6;
    v87 = bookCursorPosition;
    while (1)
    {
      v44 = [v43 stringForLineNumber:v42];
      if (![v44 length])
      {

LABEL_91:
        v23 = 0;
        v21 = 0x7FFFFFFFFFFFFFFFLL;
        a4 = v85;
        goto LABEL_92;
      }

      if ([v93 supportsRangeForLineNumber])
      {
        v21 = [v93 rangeForLineNumber:v42];
        v86 = v45;
      }

      else
      {
        v46 = [v93 pageContent];
        v21 = [(VOTElementManager *)self _rangeOfLine:v44 inBookContent:v46];
        v86 = v47;
      }

      v48 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
      v49 = [v44 stringByTrimmingCharactersInSet:v48];

      if ([v49 length])
      {
        break;
      }

      v42 += v89;

      v43 = v93;
      v6 = v88;
      bookCursorPosition = v87;
      if (v42 < 0)
      {
        goto LABEL_91;
      }
    }

    self->_bookLineRange.location = v21;
    self->_bookLineRange.length = v86;
    self->_bookLineNumber = v42;
    v82 = self->_bookLineString;
    self->_bookLineString = v44;

    v83 = self->_bookLineRange.location;
    a4 = v85;
    v6 = v88;
    if (v85 == 1)
    {
      v83 += self->_bookLineRange.length;
    }

    self->_bookCursorPosition = v83;

    v23 = v86;
    bookCursorPosition = v87;
    if (v21 < v91)
    {
      goto LABEL_71;
    }
  }

LABEL_92:
  if ([(VOTElementManager *)self _handleMovementForElementFollowingElement:v93 direction:a4 unit:3 mode:1])
  {
    goto LABEL_87;
  }

  if ([v93 readingContentCausesPageTurn])
  {
    self->_bookDidTurnPage = 1;
    v27 = self;
    v28 = a4;
    v29 = 3;
LABEL_33:
    if ([(VOTElementManager *)v27 _handleBookNavigateOverPageBoundary:v28 unit:v29])
    {
      goto LABEL_87;
    }
  }

LABEL_71:
  if (bookLineNumber != self->_bookLineNumber)
  {
    [v93 frameForLineNumber:?];
    v51 = v50;
    v53 = v52;
    v55 = v54;
    v57 = v56;
    +[VOTElement systemWideElement];
    v59 = v58 = v23;
    [v59 convertRect:objc_msgSend(v93 fromContextId:{"windowContextId"), v51, v53, v55, v57}];
    self->_lineFrame.origin.x = v60;
    self->_lineFrame.origin.y = v61;
    self->_lineFrame.size.width = v62;
    self->_lineFrame.size.height = v63;

    v64 = +[VOTDisplayManager displayManager];
    [v64 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

    v23 = v58;
  }

  if (a5 == 4 || v15 != self->_bookCursorPosition)
  {
    if (a5 == 2)
    {
      if ([v93 supportsFrameForRange] && (objc_msgSend(v93, "frameForRange:", v21, v23), x = v95.origin.x, y = v95.origin.y, width = v95.size.width, height = v95.size.height, !CGRectIsEmpty(v95)))
      {
        v69 = v23;
        v70 = a4;
        v71 = +[VOTElement systemWideElement];
        [v71 convertRect:objc_msgSend(v93 fromContextId:{"windowContextId"), x, y, width, height}];
        self->_lineFrame.origin.x = v72;
        self->_lineFrame.origin.y = v73;
        self->_lineFrame.size.width = v74;
        self->_lineFrame.size.height = v75;

        v76 = +[VOTDisplayManager displayManager];
        [v76 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];
      }

      else
      {
        v69 = v23;
        v70 = a4;
      }
    }

    else
    {
      v69 = v23;
      v70 = a4;
      if (a5 == 4)
      {
        v69 = [v12 length];
        v21 = 0;
      }
    }

    v77 = +[VOTBrailleManager manager];
    [v77 setLastRefreshTrigger:1];

    [(VOTElementManager *)self _setSelectedTextRange:self->_bookCursorPosition onElement:0 refreshBraille:v93, 1];
    if (v70 != 1)
    {
      bookCursorPosition = self->_bookCursorPosition;
    }

    v78 = +[VOTBrailleManager manager];
    [v78 setTrailingBookCursorPosition:bookCursorPosition];

    v79 = +[VOTBrailleManager manager];
    [v79 setBookCursorPosition:self->_bookCursorPosition];

    v80 = [v93 selectedTextRange];
    [(VOTElementManager *)self _elementSelectionRangeDidChange:v80 reason:v81, 0];
    v23 = v69;
  }

  self->_highlightedCharacterRange.location = v21;
  self->_highlightedCharacterRange.length = v23;
  if (v6)
  {
    [(VOTElementManager *)self outputTextSegmentForRange:v21 string:v23 element:v12 usePhonetics:v93 segment:0, a5];
  }

LABEL_87:
}

- (BOOL)_handleMovementForElementFollowingElement:(id)a3 direction:(int64_t)a4 unit:(int64_t)a5 mode:(int64_t)a6
{
  v10 = a3;
  v11 = v10;
  if (a4 == 1)
  {
    v12 = [v10 nextTextNavigationElement];
  }

  else
  {
    if (a4 != 2)
    {
      v13 = 0;
LABEL_11:
      v14 = 0;
      goto LABEL_20;
    }

    v12 = [v10 previousTextNavigationElement];
  }

  v13 = v12;
  v14 = 0;
  if (v12 && v12 != v11)
  {
    if ([(VOTElementManager *)self _setCurrentElement:v12])
    {
      if (a4 == 1)
      {
        [(VOTElementManager *)self _resetElementUnitIndexes];
      }

      else
      {
        [(VOTElementManager *)self _setElementUnitIndexesToEndOfElement:v13];
      }

      [(VOTElementManager *)self _updateCursorFrameForElementIfNeeded:v13];
      switch(a6)
      {
        case 3:
          [(VOTElementManager *)self _outputNextTextSegmentUnit:a5 direction:a4];
          break;
        case 2:
          [(VOTElementManager *)self _moveCursorForElement:v13 direction:a4 unit:a5];
          break;
        case 1:
          v14 = 1;
          [(VOTElementManager *)self _handleBookContentMovement:v13 direction:a4 unit:a5 generateOutput:1];
          goto LABEL_20;
      }

      v14 = 1;
      goto LABEL_20;
    }

    goto LABEL_11;
  }

LABEL_20:

  return v14;
}

- (id)_convertTextMarkerArrayToString:(id)a3 addInContentExtras:(BOOL)a4
{
  v33 = a4;
  v4 = a3;
  v5 = [objc_allocWithZone(NSMutableString) init];
  v6 = +[NSMutableArray array];
  v38 = 0u;
  v39 = 0u;
  v40 = 0u;
  v41 = 0u;
  v7 = v4;
  v8 = [v7 countByEnumeratingWithState:&v38 objects:v43 count:16];
  v30 = v7;
  v31 = v6;
  if (v8)
  {
    v9 = v8;
    v10 = *v39;
    v32 = kAXImageTrait;
    do
    {
      for (i = 0; i != v9; i = i + 1)
      {
        if (*v39 != v10)
        {
          objc_enumerationMutation(v7);
        }

        v12 = *(*(&v38 + 1) + 8 * i);
        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          v13 = +[NSCharacterSet whitespaceCharacterSet];
          v14 = [v12 stringByTrimmingCharactersInSet:v13];

          [v5 appendString:v14];
LABEL_8:

          continue;
        }

        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          v15 = [v12 label];
          v14 = [v15 stringByReplacingOccurrencesOfString:@"\n" withString:@" "];

          if ([v12 doesHaveTraits:v32])
          {
            v16 = [v14 stringByReplacingOccurrencesOfString:@"image" withString:&stru_1001CBF90];

            v14 = v16;
          }

          if ([v14 length])
          {
            [v5 appendFormat:@" %@ ", v14];
          }

          if (v33)
          {
            v17 = [v12 arrayOfTraitsAsStrings];
            v18 = [v17 componentsJoinedByString:@" "];
            if ([v18 length])
            {
              if ([v5 length])
              {
                [v5 appendString:@" "];
              }

              [v5 appendString:v18];
              v19 = +[NSValue valueWithRange:](NSValue, "valueWithRange:", [v5 length] - objc_msgSend(v18, "length"), objc_msgSend(v18, "length"));
              v6 = v31;
              [v31 addObject:v19];

              v7 = v30;
            }
          }

          goto LABEL_8;
        }
      }

      v9 = [v7 countByEnumeratingWithState:&v38 objects:v43 count:16];
    }

    while (v9);
  }

  if ([v6 count])
  {
    v20 = [AXAttributedString axAttributedStringWithString:v5];
    v34 = 0u;
    v35 = 0u;
    v36 = 0u;
    v37 = 0u;
    v21 = v6;
    v22 = [v21 countByEnumeratingWithState:&v34 objects:v42 count:16];
    if (v22)
    {
      v23 = v22;
      v24 = *v35;
      do
      {
        for (j = 0; j != v23; j = j + 1)
        {
          if (*v35 != v24)
          {
            objc_enumerationMutation(v21);
          }

          v26 = UIAccessibilityTokenLowPitch;
          v27 = [*(*(&v34 + 1) + 8 * j) rangeValue];
          [v20 setAttribute:kCFBooleanTrue forKey:v26 withRange:{v27, v28}];
        }

        v23 = [v21 countByEnumeratingWithState:&v34 objects:v42 count:16];
      }

      while (v23);
    }

    v7 = v30;
    v6 = v31;
  }

  else
  {
    v20 = v5;
  }

  return v20;
}

- (id)_currentTextLineInBookElement:(BOOL)a3
{
  bookLineString = self->_bookLineString;
  if (bookLineString)
  {
    v4 = bookLineString;
  }

  else
  {
    v5 = a3;
    v7 = [(VOTElementManager *)self _currentElement];
    v8 = [v7 textMarkerArrayOfText:self->_lineArray];

    v19 = 0u;
    v20 = 0u;
    v17 = 0u;
    v18 = 0u;
    v9 = v8;
    v10 = [v9 countByEnumeratingWithState:&v17 objects:v21 count:16];
    if (v10)
    {
      v11 = *v18;
      while (2)
      {
        for (i = 0; i != v10; ++i)
        {
          if (*v18 != v11)
          {
            objc_enumerationMutation(v9);
          }

          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            LOBYTE(v10) = 1;
            goto LABEL_13;
          }
        }

        v10 = [v9 countByEnumeratingWithState:&v17 objects:v21 count:16];
        if (v10)
        {
          continue;
        }

        break;
      }
    }

LABEL_13:

    v13 = [(VOTElementManager *)self _convertTextMarkerArrayToString:v9 addInContentExtras:v5, v17];
    v14 = v13;
    if ((v10 & 1) != 0 || [v13 rangeOfString:@"\n"] == 0x7FFFFFFFFFFFFFFFLL)
    {
      v4 = v14;
    }

    else
    {
      lineArray = self->_lineArray;
      self->_lineArray = 0;

      v4 = 0;
    }
  }

  return v4;
}

- (BOOL)_bookContentElementInteraction:(CGPoint)a3 element:(id)a4
{
  y = a3.y;
  x = a3.x;
  v7 = a4;
  v8 = +[VOTElement systemWideElement];
  [v8 convertPoint:objc_msgSend(v7 toContextId:{"windowContextId"), x, y}];
  v10 = v9;
  v12 = v11;

  v13 = [objc_allocWithZone(VOTElement) initWithPosition:v7 startWithElement:{v10, v12}];
  v14 = [v13 doesHaveTraits:kAXTextEntryTrait | kAXButtonTrait | kAXLinkTrait];
  if (v14 && ([v13 isEqual:self->_bookSubelement] & 1) == 0)
  {
    [(VOTElementManager *)self _echoDifferentElement:v13 forEvent:0];
    objc_storeStrong(&self->_bookSubelement, v13);
  }

  return v14;
}

- (void)_echoLineInBookElement:(id)a3 forEvent:(id)a4
{
  v6 = a3;
  v7 = a4;
  self->_flags.isReadingAllBook = 0;
  if (self->_flags.lastEventWasIdle)
  {
    lineArray = self->_lineArray;
    self->_lineArray = 0;
  }

  [v7 touchPoint];
  v10 = v9;
  v12 = v11;
  v13 = [v6 lineNumberForPoint:?];
  if (v13 != 0x7FFFFFFF)
  {
    v27 = v13;
    if (self->_bookLineNumber == v13 && !self->_flags.shouldSpeakSameLineTouched)
    {
      v35 = 0;
      v36 = 0;
      goto LABEL_72;
    }

    [v6 frameForLineNumber:v13];
    x = v28;
    v31 = v30;
    height = v33;
    width = v32;
    v34 = [v6 stringForLineNumber:v27];
    v35 = v34;
    if (![v35 length])
    {
      [(VOTElementManager *)self _echoNoElementForEvent:v7];
      v36 = v35;
      goto LABEL_72;
    }

    self->_bookLineNumber = v27;
    objc_storeStrong(&self->_bookLineString, v34);
    self->_flags.shouldSpeakSameLineTouched = 0;
    v36 = v35;
    goto LABEL_52;
  }

  [v6 elementFrameLocation:3];
  v132 = v14;
  v133 = v15;
  [v6 elementFrameLocation:4];
  v17 = v16;
  v19 = v18;
  [v6 elementFrameLocation:5];
  v134 = v20;
  v21 = [VOTSharedWorkspace deviceOrientation];
  v129 = self;
  v22 = v7;
  if (v21 == 3)
  {
    v37 = v133;
    v23 = [NSValue valueWithPoint:v10, v133 + 3.0];
    v24 = [NSValue valueWithPoint:v10, v37 + (v19 - v37) / 3.0];
    v25 = [NSValue valueWithPoint:v10, v37 + (v19 - v37 + v19 - v37) / 3.0];
    v26 = v19 + -3.0;
    goto LABEL_12;
  }

  if (v21 == 4)
  {
    v23 = [NSValue valueWithPoint:v10, v19 + 3.0];
    v24 = [NSValue valueWithPoint:v10, v19 + (v133 - v19) / 3.0];
    v25 = [NSValue valueWithPoint:v10, v19 + (v133 - v19 + v133 - v19) / 3.0];
    v26 = v133 + -3.0;
LABEL_12:
    v38 = v10;
    goto LABEL_14;
  }

  v39 = v132;
  v23 = [NSValue valueWithPoint:v132 + 3.0, v12];
  v24 = [NSValue valueWithPoint:v39 + (v17 - v39) / 3.0, v12];
  v25 = [NSValue valueWithPoint:v39 + (v17 - v39 + v17 - v39) / 3.0, v12];
  v38 = v17 + -3.0;
  v26 = v12;
LABEL_14:
  v40 = [NSValue valueWithPoint:v38, v26];
  v130 = v22;
  y = CGRectZero.origin.y;
  height = CGRectZero.size.height;
  width = CGRectZero.size.width;
  v41 = objc_allocWithZone(NSMutableArray);
  v42 = [NSValue valueWithPoint:v10, v12];
  v43 = v40;
  v123 = v25;
  v125 = v24;
  v126 = v23;
  v44 = [v41 initWithObjects:{v42, v23, v24, v25, v40, 0}];

  v122 = v44;
  v45 = [v6 textMarkersForPoints:v44];
  v136 = [v6 showsDualPages];
  v138 = 0u;
  v139 = 0u;
  v140 = 0u;
  v141 = 0u;
  obj = v45;
  v46 = [obj countByEnumeratingWithState:&v138 objects:v142 count:16];
  if (v46)
  {
    v47 = v46;
    v48 = 0;
    v49 = 0;
    v50 = *v139;
    v51 = v17 - v132;
LABEL_16:
    v52 = 0;
    v53 = v48;
    v54 = v49;
    while (1)
    {
      if (*v139 != v50)
      {
        objc_enumerationMutation(obj);
      }

      v48 = [v6 textLineStartMarker:*(*(&v138 + 1) + 8 * v52)];

      v49 = [v6 textLineEndMarker:v48];

      v55 = [NSArray arrayWithObjects:v48, v49, 0];
      [v6 textMarkerFrame:v55];
      v57 = v56;
      v59 = v58;
      v61 = v60;
      v63 = v62;

      v64 = +[VOTElement systemWideElement];
      [v64 convertRect:objc_msgSend(v6 fromContextId:{"windowContextId"), v57, v59, v61, v63}];
      v66 = v65;
      v68 = v67;
      v70 = v69;
      v72 = v71;

      if (v21 == 3)
      {
        v73 = v43;
        if (!v136)
        {
          v72 = v19 - v133;
          goto LABEL_31;
        }

        if (v68 < v134)
        {
          v72 = v134 - v133;
LABEL_31:
          v68 = v133;
          goto LABEL_37;
        }

        if (v68 < v19)
        {
          v72 = v19 - v134;
          goto LABEL_36;
        }
      }

      else
      {
        v73 = v43;
        if (v21 != 4)
        {
          v70 = v51;
          v66 = v132;
          goto LABEL_37;
        }

        if (!v136)
        {
          v72 = v133 - v19;
          goto LABEL_29;
        }

        if (v68 < v134)
        {
          v72 = v134 - v19;
LABEL_29:
          v68 = v19;
          goto LABEL_37;
        }

        if (v68 < v133)
        {
          v72 = v133 - v134;
LABEL_36:
          v68 = v134;
        }
      }

LABEL_37:
      v144.origin.x = v66;
      v144.origin.y = v68;
      v144.size.width = v70;
      v144.size.height = v72;
      v143.x = v10;
      v143.y = v12;
      if (CGRectContainsPoint(v144, v143))
      {

        if (!v48)
        {
          self = v129;
          v7 = v130;
          v31 = y;
          x = CGRectZero.origin.x;
          goto LABEL_49;
        }

        v74 = [(NSArray *)v129->_lineArray lastObject];
        v75 = [v74 isEqual:v49];

        v7 = v130;
        v31 = y;
        x = CGRectZero.origin.x;
        if (v75)
        {
          self = v129;
          goto LABEL_49;
        }

        if ([v48 isEqual:v49])
        {
          self = v129;
          [(VOTElementManager *)v129 _echoNoElementForEvent:v130];
          goto LABEL_50;
        }

        [(VOTElementManager *)v129 _resetElementUnitIndexes];
        v115 = [objc_allocWithZone(NSArray) initWithObjects:{v48, v49, 0}];
        v116 = v129->_lineArray;
        v129->_lineArray = v115;

        v36 = [(VOTElementManager *)v129 _currentTextLineInBookElement:0];
        v35 = [(VOTElementManager *)v129 _currentTextLineInBookElement:1];
        if ([v35 length])
        {
          v117 = v129;
          if (v129->_lineArray)
          {
            [v6 textMarkerFrame:?];
            x = v118;
            v31 = v119;
            height = v121;
            width = v120;
          }
        }

        else
        {
          v117 = v129;
        }

        v76 = 1;
        self = v117;
        goto LABEL_51;
      }

      v52 = v52 + 1;
      v53 = v48;
      v54 = v49;
      if (v47 == v52)
      {
        v47 = [obj countByEnumeratingWithState:&v138 objects:v142 count:16];
        if (v47)
        {
          goto LABEL_16;
        }

        goto LABEL_45;
      }
    }
  }

  v49 = 0;
  v48 = 0;
LABEL_45:

  self = v129;
  v7 = v130;
  v31 = y;
  x = CGRectZero.origin.x;
  v73 = v43;
LABEL_49:
  [(VOTElementManager *)self _bookContentElementInteraction:v6 element:v10, v12];
LABEL_50:
  v76 = 0;
  v35 = 0;
  v36 = 0;
LABEL_51:

  if (v76)
  {
LABEL_52:
    if (![(VOTElementManager *)self _bookContentElementInteraction:v6 element:v10, v12])
    {
      v77 = +[VOTElement systemWideElement];
      [v77 convertRect:objc_msgSend(v6 fromContextId:{"windowContextId"), x, v31, width, height}];
      v79 = v78;
      v81 = v80;
      v83 = v82;
      v85 = v84;

      bookSubelement = self->_bookSubelement;
      self->_bookSubelement = 0;

      if ([v35 length])
      {
        if ([v6 supportsRangeForLineNumber])
        {
          location = [v6 rangeForLineNumber:self->_bookLineNumber];
          self->_bookLineRange.location = location;
          self->_bookLineRange.length = v88;
        }

        else
        {
          v89 = [v6 pageContent];
          self->_bookLineRange.location = [(VOTElementManager *)self _rangeOfLine:v36 inBookContent:v89];
          self->_bookLineRange.length = v90;

          location = self->_bookLineRange.location;
        }

        self->_bookCursorPosition = location;
        if (location == 0x7FFFFFFFFFFFFFFFLL)
        {
          self->_bookCursorPosition = -1;
        }

        else
        {
          [(VOTElementManager *)self _setSelectedTextRange:location onElement:0 refreshBraille:v6, 0];
          v91 = +[VOTBrailleManager manager];
          [v91 setBookCursorPosition:self->_bookCursorPosition];

          v92 = [v6 selectedTextRange];
          [(VOTElementManager *)self _elementSelectionRangeDidChange:v92 reason:v93, 0];
        }

        self->_highlightedCharacterRange = self->_bookLineRange;
        v94 = [objc_allocWithZone(VOTOutputRequest) init];
        v95 = [v6 scrollStatus];
        v96 = [v6 language];
        v137 = v95;
        if (([v95 isEqualToString:self->_bookPageScrollString] & 1) == 0)
        {
          v97 = [v94 addString:v95 withLanguage:v96];
          if ([VOTSharedWorkspace typingPitchChangeEnabled])
          {
            [v94 lastAction];
            v99 = v98 = self;
            LODWORD(v100) = 1062836634;
            v101 = [NSNumber numberWithFloat:v100];
            [v99 setObject:v101 forVariant:32];

            self = v98;
            v95 = v137;
          }

          objc_storeStrong(&self->_bookPageScrollString, v95);
        }

        v102 = self;
        v103 = [VOTSharedWorkspace systemSpokenLanguage];
        v104 = sub_100051E20(v103, v96);

        if (v104)
        {

          v96 = 0;
        }

        v131 = v7;
        if ([v35 isAXAttributedString])
        {
          v105 = [v94 addAttributedString:v35 withLanguage:v96];
        }

        else
        {
          v106 = [v94 addString:v35 withLanguage:v96];
        }

        v107 = [v94 lastAction];
        [v107 setPerformPunctuationTranslation:1];

        v108 = [v94 lastAction];
        [v108 setReplaceCommas:1];

        v109 = [v94 lastAction];
        [v109 setObject:kCFBooleanTrue forVariant:59];

        [v94 setGeneratesBraille:1];
        v110 = v102;
        [v94 setBrailleLineRange:{v102->_bookLineRange.location, v102->_bookLineRange.length}];
        [v94 setBrailleType:4];
        [(VOTElementManager *)v102 sendRequest:v94];
        v102->_lineFrame.origin.x = v79;
        v102->_lineFrame.origin.y = v81;
        v102->_lineFrame.size.width = v83;
        v102->_lineFrame.size.height = v85;
        v111 = +[VOTDisplayManager displayManager];
        v112 = [v6 windowContextId];
        v113 = [v6 uiElement];
        v114 = [v113 numberWithAXAttribute:2123];
        [v111 setCursorFrame:0 withPath:v112 withContextId:objc_msgSend(v114 withDisplayId:"unsignedIntValue") element:v6 forceRefresh:{0, v79, v81, v83, v85}];

        v110->_textRangeBeingDisplayed = 1;
        v7 = v131;
      }
    }
  }

LABEL_72:
}

- (BOOL)_handleMoreBookContentElements
{
  v3 = [(VOTElementManager *)self _currentElement];
  v4 = [v3 pageContent];

  v15[0] = _NSConcreteStackBlock;
  v15[1] = 3221225472;
  v15[2] = sub_100065B90;
  v15[3] = &unk_1001C8E40;
  v5 = v4;
  v16 = v5;
  v6 = [(VOTElementManager *)self _currentElement];
  v7 = [(VOTElementManager *)self _nearestElementWithMatch:v15 startElement:v6 forward:1];

  if (v7 && (-[VOTElementManager _currentElement](self, "_currentElement"), v8 = objc_claimAutoreleasedReturnValue(), v9 = [v7 isEqual:v8], v8, (v9 & 1) == 0))
  {
    v13[0] = _NSConcreteStackBlock;
    v13[1] = 3221225472;
    v13[2] = sub_100065C2C;
    v13[3] = &unk_1001C7778;
    v13[4] = self;
    v11 = v7;
    v14 = v11;
    [v11 scrollToElementForDirectional:1 withCompletion:v13];
    [(VOTElementManager *)self _setCurrentElement:v11];
    if (self->_flags.isReadingAllBook && [v11 doesHaveTraits:kAXWebContentTrait])
    {
      [(VOTElementManager *)self _continueReadAllWithElement:v11 setCurrentElement:0];
    }

    else
    {
      [(VOTElementManager *)self _handleReadAllBookContent:v11 fromTop:1];
    }

    v10 = 1;
  }

  else
  {
    v10 = 0;
  }

  return v10;
}

- (void)_handleBookPageFlipAndContinue
{
  v3 = [(VOTElementManager *)self currentElement];
  v4 = [v3 isReadingContent];

  if ((v4 & 1) != 0 || !self->_flags.userInitiatedBooksScroll)
  {
    v5 = [(VOTElementManager *)self _currentElement];
    v6 = [v5 scrollNextPage];

    if ((v6 & 1) == 0)
    {
      v7 = [(VOTElementManager *)self _currentElement];
      [v7 scrollRightPage];
    }
  }

  else
  {
    self->_flags.isReadingAll = 0;
    self->_flags.userInitiatedBooksScroll = 0;
  }
}

- (BOOL)_handleBookNavigateOverPageBoundary:(int64_t)a3 unit:(int64_t)a4
{
  v7 = [(VOTElementManager *)self _currentElement];
  v8 = v7;
  if (a3 == 2)
  {
    if (([v7 scrollPreviousPage] & 1) == 0)
    {
      [v8 scrollLeftPage];
    }
  }

  else
  {
    if (a3 != 1)
    {
      v9 = 0;
      goto LABEL_9;
    }

    if (([v7 scrollNextPage] & 1) == 0)
    {
      [v8 scrollRightPage];
    }
  }

  v9 = 1;
  self->_flags.previousScrollWasBookContentMovement = 1;
  self->_bookLastContentMovementUnit = a4;
  self->_bookLastContentMovementDirection = a3;
LABEL_9:

  return v9;
}

- (void)_startReadingBookForNewPage
{
  v3 = [(VOTElement *)self->_currentElement application];
  if (!v3)
  {
    v4 = [(NSArray *)self->_currentApplications firstObject];
    v3 = [v4 application];
  }

  v5 = [v3 firstElementInApplication];
  if (!v5)
  {
    if (!self->_inUnitTestingMode)
    {
      _AXAssert();
    }

    v5 = self->_currentElement;
  }

  v13 = v5;
  if (!self->_flags.lastScrollWasFromBraillePanning || self->_bookLastContentMovementDirection != 2 || ([v3 lastContainedElement], v6 = objc_claimAutoreleasedReturnValue(), -[VOTElementManager _nearestElementWithMatch:startElement:forward:](self, "_nearestElementWithMatch:startElement:forward:", &stru_1001C8E80, v6, 0), v7 = objc_claimAutoreleasedReturnValue(), v6, v5 = v13, !v7))
  {
    if (![(VOTElement *)v5 readingContentCausesPageTurn]&& ![(VOTElement *)v13 isReadingContent]&& ![(VOTElement *)v13 includeDuringContentReading]|| (v8 = v13) == 0)
    {
      v8 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C8E80 startElement:v13];
      if (!v8)
      {
        goto LABEL_21;
      }
    }

    v7 = v8;
  }

  isReadingAllBook = self->_flags.isReadingAllBook;
  v10 = [v7 isEqual:self->_currentElement];
  [(VOTElementManager *)self _setCurrentElement:v7];
  if (v10)
  {
    v11 = +[VOTBrailleManager manager];
    [v11 setBrailleElement:v7];
  }

  [(VOTElementManager *)self _handleReadFromTop:0];
  if (!isReadingAllBook)
  {
    self->_flags.isReadingAllBook = 0;
    bookPageContentOutputRequest = self->_bookPageContentOutputRequest;
    self->_bookPageContentOutputRequest = 0;
  }

  [(VOTElementFetcher *)self->_fetchManager forceUpdate];
  [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v13];

LABEL_21:
}

- (void)_handleReadAllBookContent:(id)a3 fromTop:(BOOL)a4
{
  v4 = a4;
  v6 = a3;
  if ([VOTSharedWorkspace speechMuted])
  {
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent UnknownCommand];
    [v7 sendEvent:v8];
  }

  else
  {
    *&self->_flags.isReadingAllBook = 1;
    [v6 updatePageContent];
    v9 = [v6 pageContent];
    if (([v6 isReadingContent] & 1) == 0)
    {
      [v6 updateValue];
      v10 = [v6 value];

      v4 = 1;
      v9 = v10;
    }

    v11 = +[VOTDisplayManager displayManager];
    [v11 setCursorFrameForElement:0];

    if (v4 && !self->_bookUpdatedCurrentLine)
    {
      v12 = 0;
    }

    else if ([v6 supportsRangeForLineNumber])
    {
      v12 = [v6 rangeForLineNumber:self->_bookLineNumber];
    }

    else
    {
      bookLineString = self->_bookLineString;
      if (bookLineString)
      {
        v14 = bookLineString;
      }

      else
      {
        v34 = v9;
        v15 = [v6 textMarkerArrayOfText:self->_lineArray];
        v16 = [v15 mutableCopyWithZone:0];
        v35 = 0u;
        v36 = 0u;
        v37 = 0u;
        v38 = 0u;
        v17 = v15;
        v18 = [v17 countByEnumeratingWithState:&v35 objects:v39 count:16];
        if (v18)
        {
          v19 = v18;
          v20 = *v36;
          v21 = kAXImageTrait;
          do
          {
            v22 = 0;
            do
            {
              if (*v36 != v20)
              {
                objc_enumerationMutation(v17);
              }

              v23 = *(*(&v35 + 1) + 8 * v22);
              objc_opt_class();
              if ((objc_opt_isKindOfClass() & 1) != 0 && [v23 doesHaveTraits:v21])
              {
                [v16 removeObject:v23];
              }

              v22 = v22 + 1;
            }

            while (v19 != v22);
            v19 = [v17 countByEnumeratingWithState:&v35 objects:v39 count:16];
          }

          while (v19);
        }

        v14 = [(VOTElementManager *)self _convertTextMarkerArrayToString:v16 addInContentExtras:0];

        v9 = v34;
      }

      v12 = [(VOTElementManager *)self _rangeOfLine:v14 inBookContent:v9];
    }

    if (v12 >= [v9 length])
    {
      v24 = 0;
    }

    else
    {
      v24 = v12;
    }

    v25 = [v9 substringFromIndex:v24];
    v26 = [objc_allocWithZone(VOTOutputRequest) init];
    objc_storeStrong(&self->_bookPageContentOutputRequest, v26);
    [v26 setCompletionDelegate:self];
    v27 = [v6 language];
    v28 = [VOTSharedWorkspace systemSpokenLanguage];
    v29 = sub_100051E20(v28, v27);

    if (v29)
    {

      v27 = 0;
    }

    v30 = [v26 addAttributedString:v25 withLanguage:v27];
    v31 = [v26 lastAction];
    [v31 setObject:kCFBooleanTrue forVariant:59];

    v32 = [v26 outputActions];
    [v32 enumerateObjectsUsingBlock:&stru_1001C8EC0];

    [(VOTElementManager *)self sendRequest:v26];
    v33 = +[VOTUserEventManager sharedInstance];
    [v33 userEventOccurred];

    self->_bookUpdatedCurrentLine = 0;
  }
}

- (void)_stopReadAll
{
  if (self->_flags.isReadingAll)
  {
    v3 = +[VOTOutputManager outputManager];
    [v3 stopSpeakingAtBoundary:1];
    *&self->_flags.isReadingAll = 0;
  }

  self->_shouldReadExplorerElementsAfterSpeechFinished = 0;
}

- (void)_handleReadAllNextElement
{
  v7 = [(VOTElementManager *)self _copyMatchBlockAnyElement];
  fetchManager = self->_fetchManager;
  v4 = [(VOTElementManager *)self _currentElement];
  elementSearchGeneration = self->_elementSearchGeneration;
  LOBYTE(v6) = [VOTSharedWorkspace navigationStyleHonorsGroups];
  [(VOTElementFetcher *)fetchManager searchForElementInDirection:1 fromElement:v4 matchBlock:v7 rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:0x7FFFFFFFLL groupNavigationStyle:0, v6];
}

- (BOOL)_prepareStitchedWebReadAll:(id)a3 request:(id)a4 setCurrentElement:(BOOL *)a5
{
  v7 = a3;
  v8 = a4;
  v9 = [v7 uiElement];
  [VOTSharedWorkspace deviceOrientation];
  v10 = AXReadAllUtilitiesElementsToCombineForReadAll();

  v84 = +[NSMutableString string];
  v11 = v7;
  v82 = [objc_allocWithZone(NSMutableArray) init];
  if ([v10 count] == 1)
  {
    v12 = [v10 firstObject];
    v13 = [v11 uiElement];
    v14 = [v12 isEqual:v13];

    if (v14)
    {
      v15 = 0;
      v16 = v11;
      goto LABEL_43;
    }
  }

  v76 = self;
  v80 = v8;
  y = CGRectZero.origin.y;
  width = CGRectZero.size.width;
  height = CGRectZero.size.height;
  v91 = 0u;
  v92 = 0u;
  v89 = 0u;
  v90 = 0u;
  v78 = v10;
  obj = v10;
  v20 = [obj countByEnumeratingWithState:&v89 objects:v94 count:16];
  v79 = v11;
  if (v20)
  {
    v21 = v20;
    v22 = *v90;
    v23 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
    v83 = kAXLinkTrait;
    v24 = height;
    v25 = width;
    v26 = y;
    x = CGRectZero.origin.x;
    v16 = v11;
    v28 = obj;
    do
    {
      v29 = 0;
      v30 = v16;
      do
      {
        if (*v90 != v22)
        {
          objc_enumerationMutation(v28);
        }

        v16 = [v23 + 546 elementWithUIElement:*(*(&v89 + 1) + 8 * v29)];
        v95.origin.x = CGRectZero.origin.x;
        v95.origin.y = y;
        v95.size.width = width;
        v95.size.height = height;
        v97.origin.x = x;
        v97.origin.y = v26;
        v97.size.width = v25;
        v97.size.height = v24;
        v31 = CGRectEqualToRect(v95, v97);
        [v16 frame];
        v36 = v32;
        v37 = v33;
        v38 = v34;
        v39 = v35;
        if (!v31)
        {
          v96.origin.x = x;
          v96.origin.y = v26;
          v96.size.width = v25;
          v96.size.height = v24;
          *&v32 = CGRectUnion(v96, *&v36);
        }

        x = v32;
        v26 = v33;
        v25 = v34;
        v24 = v35;
        v40 = [v84 length];
        v41 = [v16 label];
        [v84 appendFormat:@"%@ ", v41];

        if ([v16 doesHaveTraits:v83])
        {
          v42 = v21;
          v43 = v23;
          v44 = v22;
          v45 = +[AXSettings sharedInstance];
          v46 = [v45 voiceOverLinkFeedback];

          if ((v46 & 2) != 0)
          {
            v48 = sub_1000511CC(off_1001FDDD0, @"element.link.text", @"link");
            v47 = [NSString stringWithFormat:@", %@, ", v48];
            [v84 appendString:v47];
            v49 = [v84 length];
            v50 = v49 - [v47 length];
            v51 = [v47 length];
            v52 = v50;
            v28 = obj;
            v53 = [NSValue valueWithRange:v52, v51];
            [v82 addObject:v53];
          }

          else
          {
            v47 = +[NSValue valueWithRange:](NSValue, "valueWithRange:", v40, [v84 length] - v40);
            [v82 addObject:v47];
          }

          v22 = v44;
          v23 = v43;
          v21 = v42;
        }

        v29 = v29 + 1;
        v30 = v16;
      }

      while (v21 != v29);
      v21 = [v28 countByEnumeratingWithState:&v89 objects:v94 count:16];
    }

    while (v21);
  }

  else
  {
    v24 = height;
    v25 = width;
    v26 = y;
    x = CGRectZero.origin.x;
    v16 = v11;
    v28 = obj;
  }

  v11 = v79;
  v8 = v80;
  if ([v84 length])
  {
    v54 = +[AXSettings sharedInstance];
    v55 = [v54 voiceOverLinkFeedback];

    v56 = +[AXSettings sharedInstance];
    v57 = [v56 voiceOverLinkFeedback];

    if (v55 & 8 | (v57 & 4) && [v82 count])
    {
      v58 = [AXAttributedString axAttributedStringWithString:v84];
      v85 = 0u;
      v86 = 0u;
      v87 = 0u;
      v88 = 0u;
      v59 = v82;
      v60 = [v59 countByEnumeratingWithState:&v85 objects:v93 count:16];
      if (!v60)
      {
        goto LABEL_35;
      }

      v61 = v60;
      v62 = *v86;
      while (1)
      {
        for (i = 0; i != v61; i = i + 1)
        {
          if (*v86 != v62)
          {
            objc_enumerationMutation(v59);
          }

          v64 = *(*(&v85 + 1) + 8 * i);
          if ((v55 & 8) != 0)
          {
            v65 = UIAccessibilityTokenLowPitch;
            v67 = [v64 rangeValue];
            v68 = v58;
            v69 = kCFBooleanTrue;
          }

          else
          {
            if ((v57 & 4) == 0)
            {
              continue;
            }

            v65 = UIAccessibilityTokenPlaySoundSimultaneously;
            v67 = [v64 rangeValue];
            v68 = v58;
            v69 = @"Sounds/LinkBegin.aiff";
          }

          [v68 setAttribute:v69 forKey:v65 withRange:{v67, v66}];
        }

        v61 = [v59 countByEnumeratingWithState:&v85 objects:v93 count:16];
        if (!v61)
        {
LABEL_35:

          v70 = [v16 language];
          v8 = v80;
          v71 = [v80 addAttributedString:v58 withLanguage:v70];

          v11 = v79;
          goto LABEL_37;
        }
      }
    }

    v58 = [v16 language];
    v72 = [v80 addString:v84 withLanguage:v58];
LABEL_37:
  }

  v10 = v78;
  if (v16 != v11)
  {
    [(VOTElementManager *)v76 _setCurrentElement:v16];
    if (a5)
    {
      *a5 = 1;
    }

    v73 = +[VOTDisplayManager displayManager];
    [v73 setCursorFrame:{x, v26, v25, v24}];
  }

  v74 = [v8 outputActions];
  v15 = [v74 count] != 0;

LABEL_43:
  return v15;
}

- (void)_continueReadAllWithElement:(id)a3 setCurrentElement:(BOOL *)a4
{
  v6 = a3;
  if ([VOTSharedWorkspace speechMuted])
  {
    self->_flags.lastScrollWasFromBraillePanning = 0;
  }

  else if ([v6 isReadingContent] && self->_flags.isReadingAllBook)
  {
    [(VOTElementManager *)self _handleMoreBookContentElements];
  }

  else
  {
    v7 = [objc_allocWithZone(VOTOutputRequest) init];
    if (self->_flags.lastScrollWasFromBraillePanning)
    {
      self->_flags.lastScrollWasFromBraillePanning = 0;
    }

    else
    {
      self->_flags.isReadingAll = 1;
      objc_storeStrong(&self->_readAllOutputRequest, v7);
      [v7 setCompletionDelegate:self];
    }

    v8 = kAXWebContentTrait;
    if (![v6 doesHaveAllTraits:kAXStaticTextTrait | kAXWebContentTrait] || !-[VOTElementManager _prepareStitchedWebReadAll:request:setCurrentElement:](self, "_prepareStitchedWebReadAll:request:setCurrentElement:", v6, v7, a4))
    {
      [(VOTElementManager *)self _prepareElementOutputHeaders:v6 currentElement:v6 request:v7];
      [(VOTElementManager *)self _addDescription:v6 toRequest:v7 withOptions:64];
      [(VOTElementManager *)self _setCurrentElement:v6];
      if (a4)
      {
        *a4 = 1;
      }
    }

    v9 = [v7 combinedActionString];
    v10 = [v9 length];

    if (v10)
    {
      if (self->_flags.shouldSpeakPrefixes)
      {
        v11 = [v7 combinedActionString];
        v12 = [v11 copy];

        v42.length = CFStringGetLength(v12);
        v42.location = 0;
        v13 = CFStringTokenizerCreate(kCFAllocatorDefault, v12, v42, 0, 0);
        v14 = 1;
        do
        {
          v15 = v14;
          if (!CFStringTokenizerAdvanceToNextToken(v13))
          {
            break;
          }

          v14 = 0;
        }

        while ((v15 & 1) != 0);
        v16 = [v7 combinedActionString];
        CurrentTokenRange = CFStringTokenizerGetCurrentTokenRange(v13);
        if (CurrentTokenRange.location != -1)
        {
          v18 = [v7 combinedActionString];
          v19 = [v18 substringToIndex:CurrentTokenRange.location + CurrentTokenRange.length];

          v16 = v19;
        }

        v20 = [v7 outputActions];
        [v20 removeAllObjects];

        v21 = [v7 addString:v16];
        CFRelease(v13);
      }

      v22 = +[VOTOutputManager outputManager];
      v23 = +[VOSOutputEvent DidFocusOnElement];
      [v22 sendEvent:v23];
    }

    if (sub_100050834())
    {
      v24 = [(VOTElementManager *)self _currentElement];
      v25 = [v6 touchContainer];
      v26 = [v24 touchContainer];
      v27 = v26;
      if (!v25 && v26 || v25 && !v26 || v25 && v26 && ([v26 isEqual:v25] & 1) == 0)
      {
        [(VOTElementManager *)self _addDescription:v25 toRequest:v7 withOptions:1];
        if ([VOTSharedWorkspace typingPitchChangeEnabled])
        {
          v28 = [v7 lastAction];
          LODWORD(v29) = 1062836634;
          v30 = [NSNumber numberWithFloat:v29];
          [v28 setObject:v30 forVariant:32];
        }
      }
    }

    if ([v6 doesHaveTraits:v8])
    {
      v39 = 0u;
      v40 = 0u;
      v37 = 0u;
      v38 = 0u;
      v31 = [v7 outputActions];
      v32 = [v31 countByEnumeratingWithState:&v37 objects:v41 count:16];
      if (v32)
      {
        v33 = v32;
        v34 = *v38;
        do
        {
          for (i = 0; i != v33; i = i + 1)
          {
            if (*v38 != v34)
            {
              objc_enumerationMutation(v31);
            }

            [*(*(&v37 + 1) + 8 * i) setObject:kCFBooleanTrue forVariant:63];
          }

          v33 = [v31 countByEnumeratingWithState:&v37 objects:v41 count:16];
        }

        while (v33);
      }
    }

    [(VOTElementManager *)self sendRequest:v7];
    v36 = +[VOTUserEventManager sharedInstance];
    [v36 userEventOccurred];
  }
}

- (void)_handleReadScreenSummary:(id)a3
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_flags.isReadingAll = 1;
  self->_explorerElementsNeedUpdate = 1;
  [(VOTElementManager *)self _updateExplorerElementsIfNeeded];
  v5 = +[VOTExplorerElementManagerContext context];
  [v5 setUserInitiated:1];
  v4 = [(VOTElementManager *)self explorerElementManager];
  [v4 readAll:v5];
}

- (void)_handleReadAll:(id)a3
{
  v8 = a3;
  v4 = [v8 command];
  self->_flags.shouldSpeakPrefixes = [v4 isEqualToString:kVOTEventCommandReadAllPrefixes];

  if ([VOTSharedWorkspace speechMuted])
  {
    v5 = +[VOTOutputManager outputManager];
    v6 = +[VOSOutputEvent UnknownCommand];
    [v5 sendEvent:v6];
  }

  else
  {
    v5 = [(VOTElementManager *)self _currentElement];
    self->_flags.userInitiatedBooksScroll = 0;
    if ([v5 doesHaveTraits:kAXStatusBarElementTrait] && -[VOTElementManager _shouldAllowSpeakThisGesture](self, "_shouldAllowSpeakThisGesture"))
    {
      [(VOTElementManager *)self _handleSpeakScreen:v8];
    }

    else
    {
      [(VOTElementManager *)self setInitialReadAllElement:v5];
      if ([v5 isReadingContent])
      {
        [(VOTElementManager *)self _handleReadAllBookContent:v5 fromTop:0];
      }

      else
      {
        v7 = [(VOTElementManager *)self _currentElement];
        [(VOTElementManager *)self _continueReadAllWithElement:v7 setCurrentElement:0];
      }
    }
  }
}

- (void)_handleCopySpeechToClipboard:(id)a3
{
  v4 = +[VOTOutputRequest previousRequests];
  v5 = [v4 firstObject];

  v6 = +[NSMutableString string];
  v22 = 0u;
  v23 = 0u;
  v24 = 0u;
  v25 = 0u;
  v7 = [v5 outputActions];
  v8 = [v7 countByEnumeratingWithState:&v22 objects:v27 count:16];
  if (v8)
  {
    v9 = v8;
    v10 = *v23;
    do
    {
      for (i = 0; i != v9; i = i + 1)
      {
        if (*v23 != v10)
        {
          objc_enumerationMutation(v7);
        }

        v12 = *(*(&v22 + 1) + 8 * i);
        if (![v12 component] && (objc_msgSend(v12, "isVoiceOverGeneratedContent") & 1) == 0)
        {
          v13 = [v12 originalString];
          if ([v13 length])
          {
            if ([v6 length])
            {
              [v6 appendString:@" "];
            }

            [v6 appendString:v13];
          }
        }
      }

      v9 = [v7 countByEnumeratingWithState:&v22 objects:v27 count:16];
    }

    while (v9);
  }

  if ([v6 length])
  {
    v14 = +[NSMutableDictionary dictionary];
    v15 = [UTTypeUTF8PlainText identifier];
    [v14 setObject:v6 forKey:v15];

    v16 = +[UIPasteboard generalPasteboard];
    v26 = v14;
    v17 = [NSArray arrayWithObjects:&v26 count:1];
    [v16 setItems:v17];

    v18 = [VOTSharedWorkspace selectedLanguage];
    v19 = sub_1000516CC(off_1001FDDD0, @"copy.to.pasteboard", 0, v18);
    v20 = [NSString stringWithFormat:v19, v6];

    v21 = sub_1000095FC(v20, 0, v18);
    [(VOTElementManager *)self _addCopiedSpeechString:v6];
  }
}

- (void)_addCopiedSpeechString:(id)a3
{
  v8 = a3;
  copiedSpeechItems = self->_copiedSpeechItems;
  if (!copiedSpeechItems)
  {
    v5 = +[NSMutableArray array];
    v6 = self->_copiedSpeechItems;
    self->_copiedSpeechItems = v5;

    copiedSpeechItems = self->_copiedSpeechItems;
  }

  if ([(NSMutableArray *)copiedSpeechItems count]== 25)
  {
    [(NSMutableArray *)self->_copiedSpeechItems removeLastObject];
  }

  if (self->_copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    self->_copiedSpeechIndex = 0;
  }

  v7 = [[_VOTCopiedSpeechItem alloc] initWithText:v8];
  [(NSMutableArray *)self->_copiedSpeechItems insertObject:v7 atIndex:0];
}

- (void)_handleCopiedSpeechRotorMovement:(int64_t)a3
{
  v5 = +[VOTLockStateManager sharedInstance];
  v6 = [v5 isLocked];

  if (v6)
  {
    v7 = off_1001FDDD0;
    v14 = [VOTSharedWorkspace selectedLanguage];
    v8 = sub_1000516CC(v7, @"unlock.copied.speech", 0, v14);
    v9 = sub_1000095FC(v8, 0, 0);
  }

  else
  {
    copiedSpeechIndex = self->_copiedSpeechIndex;
    if (copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      copiedSpeechIndex = 0;
      self->_copiedSpeechIndex = 0;
    }

    if (a3 == 2)
    {
      if (!copiedSpeechIndex)
      {
        copiedSpeechIndex = [(NSMutableArray *)self->_copiedSpeechItems count]+ 1;
      }

      self->_copiedSpeechIndex = --copiedSpeechIndex;
    }

    else if (a3 == 1)
    {
      self->_copiedSpeechIndex = (copiedSpeechIndex + 1);
      if (copiedSpeechIndex + 1 <= [(NSMutableArray *)self->_copiedSpeechItems count])
      {
        copiedSpeechIndex = self->_copiedSpeechIndex;
      }

      else
      {
        copiedSpeechIndex = 0;
        self->_copiedSpeechIndex = 0;
      }
    }

    if (copiedSpeechIndex == [(NSMutableArray *)self->_copiedSpeechItems count])
    {
      v11 = off_1001FDDD0;
      v12 = [VOTSharedWorkspace selectedLanguage];
      sub_1000516CC(v11, @"clear.copied.speech", 0, v12);
    }

    else
    {
      v12 = [(NSMutableArray *)self->_copiedSpeechItems objectAtIndex:self->_copiedSpeechIndex];
      [v12 text];
    }
    v14 = ;

    v13 = sub_1000095FC(v14, 0, 0);
  }
}

- (void)_handlePasteCopiedSpeech
{
  copiedSpeechIndex = self->_copiedSpeechIndex;
  if (copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL || copiedSpeechIndex >= [(NSMutableArray *)self->_copiedSpeechItems count])
  {
    v5 = VOTLogCommon();
    if (os_log_type_enabled(v5, OS_LOG_TYPE_ERROR))
    {
      sub_10012AAFC();
    }
  }

  else
  {
    v4 = [(NSMutableArray *)self->_copiedSpeechItems objectAtIndex:self->_copiedSpeechIndex];
    v5 = [v4 text];

    v6 = +[NSMutableDictionary dictionary];
    v7 = [UTTypeUTF8PlainText identifier];
    [v6 setObject:v5 forKey:v7];

    v8 = +[UIPasteboard generalPasteboard];
    v12 = v6;
    v9 = [NSArray arrayWithObjects:&v12 count:1];
    [v8 setItems:v9];

    v10 = [(VOTElementManager *)self _currentResponder];
    v11 = v10;
    if ([v10 doesHaveTraits:kAXWebContentTrait])
    {
      v11 = [v10 textOperationsOperator];
    }

    [v11 performTextOperation:kAXTextOperationActionPaste];
  }
}

- (void)_handleClearCopiedSpeech
{
  copiedSpeechItems = self->_copiedSpeechItems;
  self->_copiedSpeechItems = 0;

  self->_copiedSpeechIndex = 0x7FFFFFFFFFFFFFFFLL;
  v6 = [VOTSharedWorkspace selectedLanguage];
  v4 = sub_1000516CC(off_1001FDDD0, @"cleared.copied.speech", 0, v6);
  v5 = sub_1000095FC(v4, 0, v6);
}

- (void)clearExpiredCopiedSpeech
{
  copiedSpeechItems = self->_copiedSpeechItems;
  if (copiedSpeechItems)
  {
    v4 = [(NSMutableArray *)copiedSpeechItems ax_filteredArrayUsingBlock:&stru_1001C8F00];
    v5 = [NSMutableArray arrayWithArray:v4];
    v6 = self->_copiedSpeechItems;
    self->_copiedSpeechItems = v5;

    copiedSpeechIndex = self->_copiedSpeechIndex;
    if (copiedSpeechIndex > [(NSMutableArray *)self->_copiedSpeechItems count])
    {
      self->_copiedSpeechIndex = 0x7FFFFFFFFFFFFFFFLL;
    }
  }
}

- (void)_handleReadFromTop:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v25 = v4;
  v5 = [v4 command];
  self->_flags.shouldSpeakPrefixes = [v5 isEqualToString:kVOTEventCommandReadFromTopPrefixes];

  v6 = [(VOTElementManager *)self _currentElement];
  if (![v6 isReadingContent])
  {
    v24 = [v6 application];
    v10 = [v24 firstElementInApplicationForReadFromTop];
    if (([v6 readingContentCausesPageTurn] & 1) != 0 || (v11 = v10, objc_msgSend(v6, "includeDuringContentReading")))
    {
      v11 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C8F48 startElement:v10];

      if (v11)
      {
        goto LABEL_13;
      }

      v11 = v6;
    }

    if (!v11)
    {
      v18 = +[VOTOutputManager outputManager];
      v19 = +[VOSOutputEvent BoundaryEncountered];
      [v18 sendEvent:v19];

LABEL_30:
      goto LABEL_31;
    }

LABEL_13:
    if ([v24 isSafari])
    {
      v12 = kAXWebContentTrait;
      if (([v11 doesHaveTraits:kAXWebContentTrait] & 1) == 0)
      {
        [v11 elementsInDirection:1 withCount:10];
        v30 = 0u;
        v31 = 0u;
        v28 = 0u;
        v13 = v29 = 0u;
        v14 = [v13 countByEnumeratingWithState:&v28 objects:v43 count:16];
        if (v14)
        {
          v15 = *v29;
          while (2)
          {
            for (i = 0; i != v14; i = i + 1)
            {
              if (*v29 != v15)
              {
                objc_enumerationMutation(v13);
              }

              v17 = *(*(&v28 + 1) + 8 * i);
              if ([v17 doesHaveTraits:v12])
              {
                v20 = v17;

                v11 = v20;
                goto LABEL_26;
              }
            }

            v14 = [v13 countByEnumeratingWithState:&v28 objects:v43 count:16];
            if (v14)
            {
              continue;
            }

            break;
          }
        }

LABEL_26:
      }
    }

    if ([v11 shouldPlaySoundWhenFocused])
    {
      v21 = +[VOTOutputManager outputManager];
      v22 = +[VOSOutputEvent DidFocusOnElement];
      [v21 sendEvent:v22];
    }

    v26[0] = _NSConcreteStackBlock;
    v26[1] = 3221225472;
    v26[2] = sub_100068154;
    v26[3] = &unk_1001C7778;
    v26[4] = self;
    v27 = v11;
    v23 = v11;
    [v23 scrollToElementForDirectional:1 withCompletion:v26];
    [(VOTElementManager *)self _setCurrentElement:v23];
    [(VOTElementManager *)self setInitialReadAllElement:v23];
    [(VOTElementManager *)self _continueReadAllWithElement:v23 setCurrentElement:0];

    goto LABEL_30;
  }

  v37 = 0;
  v38 = &v37;
  v39 = 0x3032000000;
  v40 = sub_100068050;
  v41 = sub_100068060;
  v42 = 0;
  v34[0] = _NSConcreteStackBlock;
  v34[1] = 3221225472;
  v34[2] = sub_100068068;
  v34[3] = &unk_1001C8F28;
  v6 = v6;
  v35 = v6;
  v36 = &v37;
  v7 = [(VOTElementManager *)self _nearestElementWithMatch:v34 startElement:v6 forward:0 itemCheckCount:30];
  v8 = v38[5];
  if (v8)
  {
    v9 = v8;

    v32[0] = _NSConcreteStackBlock;
    v32[1] = 3221225472;
    v32[2] = sub_1000680E0;
    v32[3] = &unk_1001C7778;
    v32[4] = self;
    v6 = v9;
    v33 = v6;
    [v6 scrollToElementForDirectional:1 withCompletion:v32];
    [(VOTElementManager *)self _resetElementUnitIndexes];
    [(VOTElementManager *)self _setCurrentElement:v6];
  }

  [(VOTElementManager *)self _handleReadAllBookContent:v6 fromTop:1];

  _Block_object_dispose(&v37, 8);
LABEL_31:
}

- (void)_handleContinueSpeaking:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  [v4 continueSpeaking];

  if (AXDeviceSupportsSonification())
  {
    if ([(VOTElement *)self->_currentElement supportsAudiographs])
    {
      v5 = +[VOTAudiographManager sharedManager];
      v6 = [v5 isPaused];

      if (v6)
      {
        v7 = +[VOTAudiographManager sharedManager];
        [v7 play];
      }
    }
  }
}

- (void)_handlePauseSpeaking:(id)a3
{
  v3 = +[VOTOutputManager outputManager];
  [v3 pauseSpeakingAtBoundary:0];

  if (AXDeviceSupportsSonification())
  {
    v4 = +[VOTAudiographManager sharedManager];
    v5 = [v4 isPlaying];

    if (v5)
    {
      v6 = +[VOTAudiographManager sharedManager];
      [v6 pause];
    }
  }
}

- (void)_handleToggleSpeaking:(id)a3
{
  v20 = a3;
  v4 = +[VOTOutputManager outputManager];
  if ([v4 isSpeaking])
  {
    HIDWORD(v18) = [v4 isPaused] ^ 1;
  }

  else
  {
    HIDWORD(v18) = 0;
  }

  if (AXDeviceSupportsSonification())
  {
    v5 = +[VOTAudiographManager sharedManager];
    LODWORD(v18) = [v5 isPlaying];
  }

  else
  {
    LODWORD(v18) = 0;
  }

  v23 = 0u;
  v24 = 0u;
  v21 = 0u;
  v22 = 0u;
  v6 = self->_currentApplications;
  v7 = [(NSArray *)v6 countByEnumeratingWithState:&v21 objects:v25 count:16];
  if (v7)
  {
    v8 = v7;
    v9 = *v22;
    while (2)
    {
      for (i = 0; i != v8; i = i + 1)
      {
        if (*v22 != v9)
        {
          objc_enumerationMutation(v6);
        }

        v11 = [*(*(&v21 + 1) + 8 * i) application];
        v12 = [v11 bundleIdentifier];
        v13 = [v12 isEqualToString:@"com.apple.Magnifier"];

        if (v13)
        {

          DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
          CFNotificationCenterPostNotification(DarwinNotifyCenter, @"MagnifierPauseSpeech", 0, 0, 1u);
          goto LABEL_17;
        }
      }

      v8 = [(NSArray *)v6 countByEnumeratingWithState:&v21 objects:v25 count:16];
      if (v8)
      {
        continue;
      }

      break;
    }
  }

LABEL_17:
  v15 = +[AXSettings sharedInstance];
  v16 = [v15 liveRecognitionActive];

  if (v16)
  {
    v17 = +[VOTMagnifierService shared];
    [v17 stopSpeech];
  }

  if ((HIDWORD(v19) | v19))
  {
    [(VOTElementManager *)self _handlePauseSpeaking:v20];
  }

  else
  {
    [(VOTElementManager *)self _handleContinueSpeaking:v20];
  }
}

- (void)_handleCancelSpeaking:(id)a3
{
  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0];
}

- (void)_endTextSearchMode
{
  self->_flags.inSearchTextMode = 0;
  v2 = +[VOTKeyboardManager keyboardManager];
  [v2 setCaptureModeEnabled:0];

  v3 = +[VOTTextSearchManager sharedManager];
  [v3 endTextSearchSession];

  v4 = +[VOTBrailleManager manager];
  [v4 setTextSearchModeOn:0];

  v5 = +[VOTBrailleManager manager];
  [v5 refreshBrailleLine];
}

- (void)_handleSearchTextEvent:(id)a3
{
  v25 = a3;
  v4 = [v25 keyInfo];
  if ([v4 keyDown] && objc_msgSend(v4, "keyCode") == 40)
  {
    if (-[VOTElement doesHaveTraits:](self->_currentElement, "doesHaveTraits:", kAXTextEntryTrait) && (-[VOTElement value](self->_currentElement, "value"), v5 = objc_claimAutoreleasedReturnValue(), v6 = [v5 length], v5, v6))
    {
      v7 = +[VOTTextSearchManager sharedManager];
      v8 = [v7 currentSearchValue];

      v9 = [(VOTElement *)self->_currentElement selectedTextRange];
      v11 = v10;
      v12 = [(VOTElement *)self->_currentElement value];
      v13 = v12;
      if (v9 == 0x7FFFFFFF)
      {
        v14 = 0;
      }

      else
      {
        v14 = &v9[v11];
      }

      v15 = ([v12 length] - v14);
      v16 = +[NSLocale currentLocale];
      v17 = [v13 rangeOfString:v8 options:1 range:v14 locale:{v15, v16}];

      if (v17 != 0x7FFFFFFFFFFFFFFFLL)
      {
        if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXIsEditingTrait])
        {
          [(VOTElement *)self->_currentElement setSelectedTextRange:v17 refreshBraille:0, 1];
          [(VOTElementManager *)self _moveCursorForElement:self->_currentElement direction:1 unit:2];
        }

        else
        {
          self->_elementUnitOutputRange.location = v17;
          self->_elementUnitOutputRange.length = 0;
          [(VOTElementManager *)self _outputNextTextSegmentUnit:2 direction:1];
        }
      }

      [(VOTElementManager *)self _endTextSearchMode];
    }

    else
    {
      self->_flags.performedSearch = 1;
      v8 = [(VOTElementManager *)self _copyMatchBlockSearchText];
      fetchManager = self->_fetchManager;
      v19 = [(VOTElementManager *)self _currentElement];
      elementSearchGeneration = self->_elementSearchGeneration;
      v21 = [(VOTElement *)self->_currentElement selectedTextRange];
      v23 = v22;
      LOBYTE(v24) = [VOTSharedWorkspace navigationStyleHonorsGroups];
      [(VOTElementFetcher *)fetchManager searchForElementInDirection:1 fromElement:v19 matchBlock:v8 rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:v21 groupNavigationStyle:v23, v24];

      [(VOTElementManager *)self _endTextSearchMode];
    }
  }

  else
  {
    v8 = +[VOTTextSearchManager sharedManager];
    [v8 handleTextSearchEvent:v25];
  }
}

- (void)_outputCurrentElementRotor
{
  v3 = [(VOTRotor *)self->_elementRotor generateRotorTypeRequest];
  [(VOTElementManager *)self _appendCurrentRotorValue:v3 forRotor:self->_elementRotor];
  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v3];
  [v3 setCannotBeInterrupted:1];
  [v3 send];
}

- (void)_handleDescribeImage:(id)a3
{
  [(VOTElementManager *)self setPreviouslySpokenImageCaptionResults:0];
  v7 = objc_opt_new();
  [v7 setIncludeFullImageDescriptionsForAllElements:1];
  [v7 setIncludeSceneDetection:0];
  [v7 setUserCommandInitiated:1];
  v4 = +[VOTOutputManager outputManager];
  [v4 stopSpeakingAtBoundary:0];

  v5 = [VOTSharedWorkspace visionEngine];
  v6 = [(VOTElementManager *)self _currentElement];
  [v5 analyzeElement:v6 withOptions:v7];
}

- (void)_handleLaunchDetectionMode:(id)a3
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 liveRecognitionActive];

  v5 = +[VOTMagnifierService shared];
  v6 = v5;
  if (v4)
  {
    [v5 dismissDetectionUI];
  }

  else
  {
    [v5 showDetectionUI];
  }
}

- (void)_handleDescribedMediaMode:(id)a3 direction:(int64_t)a4
{
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 voiceOverDescribedMedia];

  if ((v6 & 3u) > 1uLL)
  {
    if ((v6 & 3) == 2)
    {
      if (a4 != 1)
      {
        a4 = 1;
        goto LABEL_13;
      }

LABEL_7:
      a4 = 3;
      goto LABEL_13;
    }

    if (a4 != 1)
    {
LABEL_9:
      a4 = 2;
      goto LABEL_13;
    }

LABEL_11:
    a4 = 0;
    goto LABEL_13;
  }

  if ((v6 & 3) != 0)
  {
    if (a4 == 1)
    {
      goto LABEL_9;
    }

    goto LABEL_11;
  }

  if (a4 != 1)
  {
    goto LABEL_7;
  }

LABEL_13:
  v7 = +[AXSettings sharedInstance];
  [v7 setVoiceOverDescribedMedia:a4];

  v10 = [VOTSharedWorkspace selectedLanguage];
  v8 = AXVoiceOverMediaDescriptionLocString();
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleHintsSettingMode:(id)a3 direction:(int64_t)a4
{
  v4 = [AXSettings sharedInstance:a3];
  v5 = [v4 voiceOverHintsEnabled];

  v6 = +[AXSettings sharedInstance];
  [v6 setVoiceOverHintsEnabled:v5 ^ 1];

  v7 = [VOTSharedWorkspace selectedLanguage];
  v11 = v7;
  if (v5)
  {
    v8 = @"hints.disabled";
  }

  else
  {
    v8 = @"hints.enabled";
  }

  v9 = sub_1000516CC(off_1001FDDD0, v8, 0, v7);
  v10 = sub_1000095FC(v9, 0, v11);
}

- (void)_handleDirectTouchExplorationMode:(id)a3 direction:(int64_t)a4
{
  v19 = a3;
  v5 = [(VOTElementManager *)self _appInfoForCurrentElement];
  v7 = v6;
  if (!self->_directTouchApps)
  {
    v8 = objc_opt_new();
    [(VOTElementManager *)self setDirectTouchApps:v8];
  }

  v9 = [VOTSharedWorkspace selectedLanguage];
  v10 = [(NSMutableDictionary *)self->_directTouchApps objectForKeyedSubscript:v5];
  v11 = [v10 BOOLValue];

  v12 = [NSNumber numberWithInt:v11 ^ 1];
  [(NSMutableDictionary *)self->_directTouchApps setObject:v12 forKeyedSubscript:v5];

  if (v11)
  {
    v13 = @"direct.touch.off.for.app";
  }

  else
  {
    v13 = @"direct.touch.on.for.app";
  }

  v14 = sub_1000516CC(off_1001FDDD0, v13, 0, v9);
  v15 = AXCFormattedString();
  v16 = sub_1000095FC(v15, 0, v9);

  v17 = [(VOTElementManager *)self directTouchApps];
  v18 = +[AXSettings sharedInstance];
  [v18 setVoiceOverDirectTouchEnabledApps:v17];
}

- (BOOL)inDirectTouchMode
{
  if (AXDeviceSupportsSonification())
  {
    v3 = +[VOTAudiographManager sharedManager];
    v4 = [v3 isScrubbing];

    if (v4)
    {
      return 0;
    }
  }

  v6 = [(VOTElementManager *)self directTouchApps];
  v7 = [(VOTElementManager *)self _appInfoForCurrentElement];
  v9 = v8;
  v10 = [v6 objectForKeyedSubscript:v7];
  v5 = [v10 BOOLValue];

  return v5;
}

- (void)_systemServerDied
{
  [(VOTElementManager *)self _didDismissItemChooser];
  allElements = self->_allElements;
  self->_allElements = 0;
}

- (void)_resetItemChooserCache
{
  if (!self->_flags.itemChooserVisible)
  {
    self->_allElements = 0;
    _objc_release_x1();
  }
}

- (void)_showItemChooser:(id)a3
{
  v3 = a3;
  v53 = [objc_allocWithZone(NSMutableArray) initWithCapacity:{objc_msgSend(v3, "count")}];
  v52 = [objc_allocWithZone(NSMutableArray) init];
  v54 = [objc_allocWithZone(NSMutableSet) init];
  v51 = [objc_allocWithZone(NSMutableArray) initWithCapacity:{objc_msgSend(v3, "count")}];
  v66 = 0u;
  v67 = 0u;
  v68 = 0u;
  v69 = 0u;
  obj = v3;
  v4 = [obj countByEnumeratingWithState:&v66 objects:v71 count:16];
  if (v4)
  {
    v5 = v4;
    v49 = *v67;
    v47 = kAXButtonTrait;
    v45 = kAXPopupButtonTrait | kAXTextAreaTrait | kAXToggleTrait | kAXRadioButtonTrait | kAXSearchFieldTrait | kAXTextEntryTrait | kAXButtonTrait;
    v43 = kAXWebContentTrait;
    v42 = kAXVisitedTrait;
    v44 = kAXVisitedTrait | kAXLinkTrait;
    v48 = kAXHeaderTrait;
    v46 = kAXLinkTrait;
    v41 = kAXLinkTrait | kAXHeaderTrait;
    v6 = kAXSearchFieldTrait;
    v7 = kAXTextEntryTrait | kAXSearchFieldTrait;
    v8 = kAXImageTrait;
    v9 = kAXStaticTextTrait;
    do
    {
      for (i = 0; i != v5; i = i + 1)
      {
        if (*v67 != v49)
        {
          objc_enumerationMutation(obj);
        }

        v11 = *(*(&v66 + 1) + 8 * i);
        objc_opt_class();
        if ((objc_opt_isKindOfClass() & 1) == 0)
        {
          v38 = v11;
          _AXAssert();
        }

        [v11 frame];
        [v11 adaptFrameForSystemElement:?];
        v12 = NSStringFromCGRect(v72);
        [v51 addObject:v12];

        v13 = [objc_allocWithZone(NSMutableArray) init];
        v14 = [v11 traits];
        if ((v48 & v14) != 0)
        {
          [v13 addObject:&off_1001D9BF0];
        }

        if ((v46 & v14) != 0)
        {
          [v13 addObject:&off_1001D9C08];
        }

        if ((v45 & v14) != 0 && (v43 & v14) != 0)
        {
          [v13 addObject:&off_1001D9C20];
        }

        if ((v44 & ~v14) == 0)
        {
          [v13 addObject:&off_1001D9C38];
        }

        if ((v46 & v14) != 0 && (v42 & v14) == 0)
        {
          [v13 addObject:&off_1001D9C50];
        }

        if ((v8 & v14) != 0)
        {
          [v13 addObject:&off_1001D9C68];
        }

        if ((v9 & v14) != 0 && (v41 & v14) == 0)
        {
          [v13 addObject:&off_1001D9C80];
        }

        if ((v47 & v14) != 0)
        {
          [v13 addObject:&off_1001D9C98];
        }

        if ((v7 & v14) != 0)
        {
          [v13 addObject:&off_1001D9CB0];
        }

        if ((v6 & v14) != 0)
        {
          [v13 addObject:&off_1001D9CC8];
        }

        [v52 addObject:v13];
        [v54 addObjectsFromArray:v13];
        v15 = [v11 itemChooserName];
        [v53 addObject:v15];
      }

      v5 = [obj countByEnumeratingWithState:&v66 objects:v71 count:16];
    }

    while (v5);
  }

  v16 = +[AXSettings sharedInstance];
  v17 = [v16 voiceOverRotorItems];

  v50 = [objc_allocWithZone(NSMutableArray) init];
  v62 = 0u;
  v63 = 0u;
  v64 = 0u;
  v65 = 0u;
  v18 = v17;
  v19 = [v18 countByEnumeratingWithState:&v62 objects:v70 count:16];
  if (v19)
  {
    v20 = v19;
    v21 = *v63;
    do
    {
      for (j = 0; j != v20; j = j + 1)
      {
        if (*v63 != v21)
        {
          objc_enumerationMutation(v18);
        }

        v23 = *(*(&v62 + 1) + 8 * j);
        v24 = [v23 objectForKey:@"Enabled"];
        v25 = [v24 BOOLValue];

        if (v25)
        {
          v26 = [v23 objectForKey:@"RotorItem"];
          v27 = &off_1001D9C08;
          if ([v26 isEqualToString:kAXSVoiceOverTouchRotorItemLink] & 1) != 0 || (v27 = &off_1001D9BF0, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemHeader)) || (v27 = &off_1001D9C20, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemFormElement)) || (v27 = &off_1001D9CE0, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemTableStart)) || (v27 = &off_1001D9CF8, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemListStart)) || (v27 = &off_1001D9C38, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemVisitedLink)) || (v27 = &off_1001D9C50, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemNonVisitedLink)) || (v27 = &off_1001D9C68, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemImage)) || (v27 = &off_1001D9C80, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemStaticText)) || (v27 = &off_1001D9D10, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemLandmark)) || (v27 = &off_1001D9C98, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemButton)) || (v27 = &off_1001D9CB0, (objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemTextField)) || (v27 = &off_1001D9CC8, objc_msgSend(v26, "isEqualToString:", kAXSVoiceOverTouchRotorItemSearchField)))
          {
            if ([v54 containsObject:v27])
            {
              [v50 addObject:v27];
            }
          }
        }
      }

      v20 = [v18 countByEnumeratingWithState:&v62 objects:v70 count:16];
    }

    while (v20);
  }

  v28 = [objc_allocWithZone(NSMutableDictionary) init];
  [v28 setObject:v53 forKey:@"items"];
  [v28 setObject:v50 forKey:@"categories"];
  [v28 setObject:v52 forKey:@"mappings"];
  v29 = [(VOTElementManager *)self lastItemChooserSearchTerm];
  v30 = v29;
  if (v29)
  {
    v31 = v29;
  }

  else
  {
    v31 = &stru_1001CBF90;
  }

  [v28 setObject:v31 forKey:@"searchTerm"];

  v59[0] = _NSConcreteStackBlock;
  v59[1] = 3221225472;
  v59[2] = sub_10006992C;
  v59[3] = &unk_1001C7778;
  v32 = v28;
  v60 = v32;
  v61 = self;
  v33 = objc_retainBlock(v59);
  v34 = +[VOTDisplayManager displayManager];
  v55[0] = _NSConcreteStackBlock;
  v55[1] = 3221225472;
  v55[2] = sub_100069984;
  v55[3] = &unk_1001C8F70;
  v56 = obj;
  v57 = v32;
  v58 = v33;
  v35 = v33;
  v36 = v32;
  v37 = obj;
  [v34 convertFramesToCursorSpace:v51 displayID:&off_1001D9D28 completion:v55];
}

- (void)_elementsRetrieved:(id)a3 finished:(id)a4
{
  v8 = a3;
  if ([a4 BOOLValue] && objc_msgSend(v8, "count") <= 0x3E8)
  {
    v6 = sub_1000535B8(v8);
    allElements = self->_allElements;
    self->_allElements = v6;

    [(VOTElementManager *)self _showItemChooser:self->_allElements];
  }
}

- (void)elementsRetrieved:(id)a3 finished:(BOOL)a4
{
  elementManagerThread = self->_elementManagerThread;
  v6 = &kCFBooleanFalse;
  if (a4)
  {
    v6 = &kCFBooleanTrue;
  }

  [(SCRCThread *)elementManagerThread performSelector:"_elementsRetrieved:finished:" onTarget:self count:2 objects:a3, *v6, 0];
}

- (void)_handleMoveToLinkedUI:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (([v4 isTouchEvent] & 1) == 0)
  {
    v5 = [(VOTElementManager *)self _currentElement];
    v6 = [v5 application];
    v7 = [v6 webSearchResultsActive];

    if (v7)
    {
      if ([v5 doesHaveTraits:kAXWebContentTrait])
      {
        v8 = [(VOTElement *)self->_currentElement application];
        v9 = [v8 firstResponderElement];
        v10 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C8F90 startElement:v9];
        goto LABEL_10;
      }

      v11 = [v5 identifier];
      v12 = [v11 isEqualToString:@"SFFindOnPageBarIdentifier"];

      if (v12)
      {
        v13 = [(VOTElement *)self->_currentElement application];
        v14 = [v13 firstElementInApplicationForFocus];
        v8 = [(VOTElementManager *)self _nearestWebElement:v14];

        v9 = [v8 textMarkerRangeForSelection];
        v15 = [v9 firstObject];
        v10 = [v8 elementForTextMarker:v15];

LABEL_10:
        if (v10)
        {
          goto LABEL_14;
        }
      }
    }

    v16 = [v5 linkedUIElements];
    v17 = VOTLogCommon();
    if (os_log_type_enabled(v17, OS_LOG_TYPE_INFO))
    {
      v19 = 138412546;
      v20 = v5;
      v21 = 2112;
      v22 = v16;
      _os_log_impl(&_mh_execute_header, v17, OS_LOG_TYPE_INFO, "Linked ui movement: %@ -> %@", &v19, 0x16u);
    }

    v10 = [v16 firstObject];

    if (!v10)
    {
      v10 = +[VOTOutputManager outputManager];
      v18 = +[VOSOutputEvent BoundaryEncountered];
      [v10 sendEvent:v18];

      goto LABEL_16;
    }

LABEL_14:
    -[VOTElementManager _moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:](self, "_moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:", v10, [v10 shouldPlaySoundWhenFocused], 0, 0);
LABEL_16:
  }
}

- (void)_handleMoveToNativeFocusedElement:(id)a3
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {

    _AXAssert();
  }
}

- (void)_handleItemChooserSelectionMade:(id)a3
{
  v4 = a3;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v5 = +[VOTOutputManager outputManager];
    [v5 stopSpeakingAtBoundary:0];

    [(SCRCThread *)self->_elementManagerThread performSelector:"_notificationThreadCancel" onTarget:self cancelMask:1574144 count:0 objects:0];
    v6 = [v4 objectForKey:@"row"];
    v7 = [v4 objectForKey:@"activate"];
    v8 = [v7 BOOLValue];

    v9 = [v4 objectForKey:@"searchTerm"];
    [(VOTElementManager *)self setLastItemChooserSearchTerm:v9];
    v10 = [v6 integerValue];
    if (v10 > 0x7FFFFFFFFFFFFFFELL || (v11 = v10, v10 >= [(NSArray *)self->_allElements count]))
    {
      v12 = self->_previousItemChooserElement;
      v13 = 1;
    }

    else
    {
      v12 = [(NSArray *)self->_allElements objectAtIndex:v11];
      v13 = 0;
    }

    v14 = +[VOTElement springBoardApplication];
    v15 = [v14 isSystemSleeping];

    if ((v15 & 1) == 0)
    {
      v16 = +[VOTOutputManager outputManager];
      v17 = +[VOSOutputEvent ScreenDidChange];
      [v16 sendEvent:v17];
    }

    v23[0] = _NSConcreteStackBlock;
    v23[1] = 3221225472;
    v23[2] = sub_10006A208;
    v23[3] = &unk_1001C83D0;
    v23[4] = self;
    v18 = v12;
    v24 = v18;
    v25 = v8;
    [(VOTElement *)v18 scrollToElementForDirectional:1 withCompletion:v23];
    if ((v8 & 1) == 0)
    {
      if (v13)
      {
        v19 = [VOTSharedWorkspace selectedLanguage];
        v20 = sub_1000516CC(off_1001FDDD0, @"closing.item.chooser", 0, v19);
        v21 = sub_1000095FC(v20, 0, v19);

        [(VOTElementManager *)self _setCurrentElement:v18];
      }

      else
      {
        [(VOTElementManager *)self _echoDifferentElement:v18 forEvent:0];
      }
    }

    previousItemChooserElement = self->_previousItemChooserElement;
    self->_previousItemChooserElement = 0;

    [(VOTElementManager *)self _didDismissItemChooser];
    self->_flags.focusIsOnElement = 1;
  }
}

- (void)_closeItemChooser
{
  if (self->_flags.itemChooserVisible)
  {
    v4 = +[VOTItemChooserAdapter sharedInstance];
    [v4 showItemChooser:0 withItems:0];

    [(VOTElementManager *)self _didDismissItemChooser];
  }
}

- (void)_handleItemChooserSelection:(id)a3
{
  v4 = a3;
  if (!self->_flags.itemChooserVisible)
  {
    v5 = +[AXSettings sharedInstance];
    v6 = [v5 securePayAssertionActive];

    if (v6)
    {
      v7 = AXLogAssertions();
      if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
      {
        *v14 = 0;
        _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "Not processing item chooser because secure pay mode active", v14, 2u);
      }

      goto LABEL_9;
    }

    v8 = +[VOTElement springBoardApplication];
    v9 = [v8 isSystemLocked];

    if ((v9 & 1) == 0)
    {
      v10 = [(VOTElementManager *)self _currentElement];
      v11 = [v10 copyWithZone:0];
      previousItemChooserElement = self->_previousItemChooserElement;
      self->_previousItemChooserElement = v11;

      if (![(NSArray *)self->_allElements count])
      {
        fetchManager = self->_fetchManager;
        v7 = [(VOTElementManager *)self _currentElement];
        -[VOTElementFetcher retrieveElementsWithElement:groupNavigationStyle:](fetchManager, "retrieveElementsWithElement:groupNavigationStyle:", v7, [VOTSharedWorkspace navigationStyleHonorsGroups]);
LABEL_9:

        goto LABEL_10;
      }

      [(VOTElementManager *)self _showItemChooser:self->_allElements];
    }
  }

LABEL_10:
}

- (void)_handleOngoingTextSearch:(id)a3
{
  v4 = [a3 command];
  if ([v4 isEqualToString:kVOTEventCommandTextSearchForward])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  self->_flags.performedSearch = 1;
  v13 = [(VOTElementManager *)self _copyMatchBlockSearchText];
  fetchManager = self->_fetchManager;
  v7 = [(VOTElementManager *)self _currentElement];
  elementSearchGeneration = self->_elementSearchGeneration;
  v9 = [(VOTElement *)self->_currentElement selectedTextRange];
  v11 = v10;
  LOBYTE(v12) = [VOTSharedWorkspace navigationStyleHonorsGroups];
  [(VOTElementFetcher *)fetchManager searchForElementInDirection:v5 fromElement:v7 matchBlock:v13 rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:v9 groupNavigationStyle:v11, v12];
}

- (void)_handleStartTextSearch:(id)a3
{
  if (!self->_flags.inSearchTextMode)
  {
    self->_flags.inSearchTextMode = 1;
    v10 = +[VOTTextSearchManager sharedManager];
    v4 = +[VOTBrailleManager manager];
    [v10 setBrailleManager:v4];

    [v10 beginNewTextSearchSession];
    v5 = +[VOTKeyboardManager keyboardManager];
    [v5 setCaptureModeEnabled:1];

    v6 = +[VOTBrailleManager manager];
    [v6 setTextSearchModeOn:1];

    v7 = [VOTSharedWorkspace selectedLanguage];
    v8 = sub_1000516CC(off_1001FDDD0, @"enter.search.text.mode", 0, v7);
    v9 = sub_1000095FC(v8, 0, v7);
  }
}

- (void)updateRotorForCurrentElement:(BOOL)a3 completion:(id)a4
{
  v4 = a3;
  elementManagerThread = self->_elementManagerThread;
  v7 = a4;
  v9 = [NSNumber numberWithBool:v4];
  v8 = _Block_copy(v7);

  [(SCRCThread *)elementManagerThread performSelector:"_updateRotorForCurrentElement:completion:" onTarget:self count:2 objects:v9, v8, 0];
}

- (void)_updateRotorForCurrentElement:(id)a3 completion:(id)a4
{
  v13 = a3;
  v6 = a4;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ([v13 BOOLValue])
  {
    [(VOTElementRotor *)self->_elementRotor _updateWebRotorItems];
  }

  v7 = [(VOTElementManager *)self _currentElement];
  if (!v7)
  {
    v7 = self->_touchContainer;
  }

  v8 = [(VOTElementManager *)self lastElementChangeAction];
  v9 = v8 == 1;
  if ([(VOTElementManager *)self lastElementChangeAction]== 2 && [(VOTRotor *)self->_elementRotor currentRotorType]== 37)
  {
    v10 = [(VOTElement *)v7 containerTypes];
    v11 = [v10 containsObject:&off_1001D9D40];

    if (v8 == 1)
    {
      v9 = 1;
    }

    else
    {
      v9 = v11;
    }
  }

  [(VOTElementRotor *)self->_elementRotor updateRotorForElement:v7 shouldPreserveRotorNavigation:v9 firstResponder:self->_firstResponderElement];
  currentPublicCustomRotorItemResult = self->_currentPublicCustomRotorItemResult;
  self->_currentPublicCustomRotorItemResult = 0;

  self->_lastSeenApplicationOrientation = [VOTSharedWorkspace applicationOrientation];
  self->_flags.shouldUpdateRotorForElement = 0;
  if (v6)
  {
    v6[2](v6);
  }
}

- (void)_updateRotorForCurrentElement
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self _updateRotorForCurrentElement:0 completion:0];
}

- (void)_handleSearchRotorEcho:(id)a3
{
  [(VOTElementManager *)self _updateRotorForCurrentElement];
  v4 = [(VOTRotor *)self->_elementRotor generateRotorTypeRequest];
  [(VOTElementManager *)self _appendCurrentRotorValue:v4 forRotor:self->_elementRotor];
  [v4 setGeneratesBraille:1];
  [v4 setBrailleType:1];
  [v4 send];
}

- (double)rotorRate
{
  v10 = 0;
  v11 = &v10;
  v12 = 0x2020000000;
  v13 = 0;
  v2 = dispatch_semaphore_create(0);
  v3 = [VOTSharedWorkspace votSettings];
  v7[0] = _NSConcreteStackBlock;
  v7[1] = 3221225472;
  v7[2] = sub_10006AA9C;
  v7[3] = &unk_1001C8FB8;
  v9 = &v10;
  v4 = v2;
  v8 = v4;
  [v3 rotorRateWithCompletionHandler:v7];

  dispatch_semaphore_wait(v4, 0xFFFFFFFFFFFFFFFFLL);
  v5 = v11[3];

  _Block_object_dispose(&v10, 8);
  return v5;
}

- (void)_appendCurrentRotorValue:(id)a3 forRotor:(id)a4
{
  v6 = a3;
  v7 = a4;
  [VOTSharedWorkspace selectedLanguage];
  v107[0] = _NSConcreteStackBlock;
  v107[1] = 3221225472;
  v107[2] = sub_10006B84C;
  v8 = v107[3] = &unk_1001C8FE0;
  v108 = v8;
  v9 = objc_retainBlock(v107);
  v10 = [v7 currentRotorType];
  if (v10 > 31)
  {
    switch(v10)
    {
      case '6':
        v11 = [(VOTElementManager *)self _currentCustomActions];
        v12 = v11;
        customActionIndex = self->_customActionIndex;
        if (customActionIndex == 0x7FFFFFFFFFFFFFFFLL)
        {
          v14 = [(VOTElementManager *)self _customActionDefaultActionString];
          goto LABEL_76;
        }

        if (customActionIndex >= [(__CFString *)v11 count])
        {
          goto LABEL_80;
        }

        v32 = [(__CFString *)v12 objectAtIndex:customActionIndex];
        v49 = [(__CFString *)v32 name];
        v84 = [v6 addString:v49];
        goto LABEL_72;
      case '7':
      case '8':
      case '9':
      case ':':
      case '<':
      case '=':
      case '>':
      case '@':
      case 'A':
      case 'E':
      case 'F':
      case 'G':
      case 'H':
      case 'I':
      case 'J':
      case 'K':
      case 'L':
      case 'M':
      case 'N':
      case 'O':
      case 'Y':
      case '\\':
      case '^':
        goto LABEL_81;
      case ';':
        v30 = (v9[2])(v9, [VOTSharedWorkspace hintsEnabled]);
        goto LABEL_59;
      case '?':
        v12 = +[AXSettings sharedInstance];
        [(__CFString *)v12 voiceOverDescribedMedia];
        v14 = AXVoiceOverMediaDescriptionLocString();
        goto LABEL_76;
      case 'B':
        v32 = [(VOTElementManager *)self _appInfoForCurrentElement];
        v12 = v46;
        v47 = +[AXSettings sharedInstance];
        v48 = [v47 automaticAccessibilityModeForBundleIdentifier:v32];

        v49 = (v9[2])(v9, v48 == 1);
        v50 = [v6 addString:v49 withLanguage:v8];
        goto LABEL_72;
      case 'C':
        v32 = [(VOTElementManager *)self _appInfoForCurrentElement];
        v12 = v62;
        v63 = +[AXSettings sharedInstance];
        v64 = [v63 imageCaptioningDisabledApps];
        v49 = [v64 mutableCopy];

        v65 = (v9[2])(v9, [v49 containsObject:v32] ^ 1);
        v66 = [v6 addString:v65 withLanguage:v8];

        goto LABEL_72;
      case 'D':
        v59 = off_1001FDDD0;
        v60 = +[AXSettings sharedInstance];
        if ([v60 voiceOverNavigationStyle] == 1)
        {
          v61 = @"NAVIGATION_STYLE_GROUPS";
        }

        else
        {
          v61 = @"NAVIGATION_STYLE_FLAT";
        }

        v12 = sub_1000516CC(v59, v61, 0, v8);

        goto LABEL_60;
      case 'P':
        v12 = +[AXSettings sharedInstance];
        [(__CFString *)v12 voiceOverEffectiveSpeakingVolume];
        v32 = AXFormatFloatWithPercentage();
        v76 = v6;
        v77 = v32;
        goto LABEL_88;
      case 'Q':
        [(VOTElementManager *)self rotorRate];
        v24 = AXFormatFloatWithPercentage();
        goto LABEL_100;
      case 'R':
        v30 = [(VOTElementManager *)self _typingEchoString];
        goto LABEL_59;
      case 'S':
        v30 = [(VOTElementManager *)self _speechPhoneticsString];
        goto LABEL_59;
      case 'T':
        v12 = +[AXSettings sharedInstance];
        v28 = [(__CFString *)v12 voiceOverPitchChangeEnabled];
        goto LABEL_74;
      case 'U':
        v53 = +[AXSettings sharedInstance];
        v32 = [v53 voiceOverPunctuationGroup];

        if (v32)
        {
          v54 = [VOTSharedWorkspace punctuationGroups];
          v103[0] = _NSConcreteStackBlock;
          v103[1] = 3221225472;
          v103[2] = sub_10006B8C4;
          v103[3] = &unk_1001C8940;
          v104 = v32;
          v55 = [v54 indexOfObjectPassingTest:v103];
          if (v55 == 0x7FFFFFFFFFFFFFFFLL)
          {
            v12 = 0;
          }

          else
          {
            v88 = [v54 objectAtIndexedSubscript:v55];
            v12 = [v88 name];
          }
        }

        else
        {
          v54 = [VOTSharedWorkspace defaultPunctuationGroup];
          v12 = [v54 name];
        }

        v76 = v6;
        v77 = v12;
LABEL_88:
        v89 = [v76 addString:v77];
        goto LABEL_79;
      case 'V':
        v12 = +[AXSettings sharedInstance];
        v28 = [(__CFString *)v12 voiceOverSoundEffectsEnabled];
        goto LABEL_74;
      case 'W':
        if (!AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
        {
          v12 = +[AXSettings sharedInstance];
          v28 = [(__CFString *)v12 voiceOverAudioDuckingEnabled];
          goto LABEL_74;
        }

        v78 = off_1001FDDD0;
        v12 = [(VOTElementManager *)self _audioDuckingModeString];
        v51 = v78;
        v52 = v12;
LABEL_66:
        v14 = sub_1000516CC(v51, v52, 0, v8);
        goto LABEL_76;
      case 'X':
        if (!AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
        {
          goto LABEL_81;
        }

        v56 = +[AXSettings sharedInstance];
        [v56 voiceOverMediaDuckingAmount];
        v58 = v57;

        v12 = sub_1000516CC(off_1001FDDD0, @"ducking.amount.short", 0, v8);
        v101 = v58 * 100.0;
        v14 = AXCFormattedString();
        goto LABEL_76;
      case 'Z':
        v30 = -[VOTElementManager _navigationDirectionModeString:](self, "_navigationDirectionModeString:", [VOTSharedWorkspace navigationDirection]);
        goto LABEL_59;
      case '[':
        v12 = [VOTSharedWorkspace selectedActivity];
        v32 = [(__CFString *)v12 name];
        if (v32)
        {
          goto LABEL_77;
        }

        v51 = off_1001FDDD0;
        v52 = @"no.activity.selected";
        goto LABEL_66;
      case ']':
        v40 = [VOTSharedWorkspace currentRotorDetectionMode];
        v12 = AXLocalizedNameForDetectionMode();
        v41 = +[AXSettings sharedInstance];
        v42 = v41;
        if (v40 == 6)
        {
          v43 = [v41 liveRecognitionActivity];
          [v43 name];
          v44 = 0;
          v12 = v45 = v12;
        }

        else
        {
          v43 = [v41 enabledLiveRecognitionModes];
          v45 = [NSNumber numberWithUnsignedInt:v40];
          v44 = [v43 containsObject:v45];
        }

        v83 = [v6 addString:v12 withLanguage:v8];
        (v9[2])(v9, v44);
        goto LABEL_75;
      case '_':
        v67 = [(VOTElementManager *)self _appInfoForCurrentElement];
        v12 = v68;
        v32 = v67;
        v69 = [(VOTElement *)self->_currentElement webAreaURL];
        v70 = [v69 host];

        v71 = v32;
        if ([v70 length])
        {
          v71 = v70;
        }

        v72 = +[AXSettings sharedInstance];
        v73 = [v72 liveRegionStatusForWebOrApp:v71];

        if (v73)
        {
          v74 = [v73 BOOLValue];
        }

        else
        {
          v74 = 1;
        }

        v86 = (v9[2])(v9, v74);
        v87 = [v6 addString:v86 withLanguage:v8];

        goto LABEL_79;
        if (![(VOTElementManager *)self hasCopiedSpeech])
        {
          goto LABEL_81;
        }

        v36 = +[VOTLockStateManager sharedInstance];
        v37 = [v36 isLocked];

        if (v37)
        {
          v38 = off_1001FDDD0;
          v39 = @"unlock.copied.speech";
LABEL_99:
          v24 = sub_1000516CC(v38, v39, 0, v8);
          goto LABEL_100;
        }

        copiedSpeechIndex = self->_copiedSpeechIndex;
        if (copiedSpeechIndex == 0x7FFFFFFFFFFFFFFFLL || copiedSpeechIndex > [(NSMutableArray *)self->_copiedSpeechItems count])
        {
          v91 = 0;
          self->_copiedSpeechIndex = 0;
        }

        else
        {
          v91 = self->_copiedSpeechIndex;
        }

        if (v91 == [(NSMutableArray *)self->_copiedSpeechItems count])
        {
          v38 = off_1001FDDD0;
          v39 = @"clear.copied.speech";
          goto LABEL_99;
        }

        v100 = [(NSMutableArray *)self->_copiedSpeechItems objectAtIndex:self->_copiedSpeechIndex];
        v12 = [v100 text];

        break;
      default:
        if (v10 == 42)
        {
          v32 = [(VOTElementManager *)self _appInfoForCurrentElement];
          v12 = v79;
          v80 = [(NSMutableDictionary *)self->_directTouchApps objectForKeyedSubscript:v32];
          v81 = [v80 BOOLValue];

          v49 = (v9[2])(v9, v81);
          v82 = [v6 addString:v49 withLanguage:v8];
LABEL_72:

          goto LABEL_79;
        }

        if (v10 != 32)
        {
          goto LABEL_81;
        }

        v12 = [(VOTElementManager *)self _localizedStringForCurrentBrailleTextMode];
        if (!v12)
        {
          v12 = sub_1000511CC(off_1001FDDD0, @"default.action.suffix", 0);
        }

        v25 = v6;
        v26 = v12;
        v27 = 0;
        goto LABEL_61;
    }

    goto LABEL_101;
  }

  if (v10 <= 23)
  {
    if (v10 == 21)
    {
      v30 = [(VOTElementManager *)self _localizedTypingModeStringForCurrentMode];
LABEL_59:
      v12 = v30;
LABEL_60:
      v25 = v6;
      v26 = v12;
      v27 = v8;
LABEL_61:
      v75 = [v25 addString:v26 withLanguage:v27];
      goto LABEL_80;
    }

    if (v10 != 22)
    {
      if (v10 == 23)
      {
        v12 = [VOTSharedWorkspace selectedLanguage];
        v15 = +[AXSettings sharedInstance];
        v16 = [v15 voiceOverVoiceRotors];

        v17 = +[AXSettings sharedInstance];
        v18 = [v17 voiceOverCurrentRotorVoiceIdentifier];

        if (!v18 || ([v18 isEqualToString:&stru_1001CBF90] & 1) != 0 || (v105[0] = _NSConcreteStackBlock, v105[1] = 3221225472, v105[2] = sub_10006B880, v105[3] = &unk_1001C9008, v106 = v18, v19 = objc_msgSend(v16, "indexOfObjectPassingTest:", v105), v106, v19 == 0x7FFFFFFFFFFFFFFFLL))
        {
          v20 = sub_1000511CC(off_1001FDDD0, @"voice.primary.suffix", 0);
        }

        else
        {
          v102 = [v16 objectAtIndexedSubscript:v19];
          v92 = [v102 identifier];
          v93 = +[AXSettings sharedInstance];
          [v93 setVoiceOverCurrentRotorVoiceIdentifier:v92];

          v94 = [v16 objectAtIndexedSubscript:v19];
          v95 = [v94 userDefinedName];

          v96 = [v16 objectAtIndexedSubscript:v19];
          v97 = v96;
          if (v95)
          {
            v20 = [v96 userDefinedName];
          }

          else
          {
            v98 = [v96 voiceId];
            v20 = AXVoiceNameForVoiceId();
          }
        }

        v21 = sub_1000511CC(off_1001FDDD0, @"voice.current.suffix", 0);
        v22 = [NSString stringWithFormat:v21, v20];
        v23 = [v6 addString:v22 withLanguage:v12];

        goto LABEL_80;
      }

      goto LABEL_81;
    }

    v12 = +[VOSSettingsHelper sharedInstance];
    v28 = [(__CFString *)v12 isSlideToTypeEnabled];
LABEL_74:
    (v9[2])(v9, v28);
    v14 = LABEL_75:;
LABEL_76:
    v32 = v14;
LABEL_77:
    v33 = v6;
    v34 = v32;
    v35 = v8;
LABEL_78:
    v85 = [v33 addString:v34 withLanguage:{v35, *&v101}];
LABEL_79:

    goto LABEL_80;
  }

  switch(v10)
  {
    case 24:
      v29 = [VOTSharedWorkspace selectedBrailleTable];
      goto LABEL_27;
    case 25:
      v29 = [VOTSharedWorkspace selectedBrailleInputTable];
LABEL_27:
      v12 = v29;
      v31 = +[VOTBrailleManager manager];
      v32 = [v31 nameForSpokenAnnouncementOfBrailleTable:v12];

      if (!v32)
      {
        v32 = sub_1000511CC(off_1001FDDD0, @"default.action.suffix", 0);
      }

      v33 = v6;
      v34 = v32;
      v35 = 0;
      goto LABEL_78;
    case 26:
      v24 = [(VOTElementManager *)self _brailleAutoAdvanceSpeedString];
LABEL_100:
      v12 = v24;
LABEL_101:
      v99 = [v6 addString:v12];
LABEL_80:

      break;
  }

LABEL_81:
}

- (void)setCurrentTextSelectionSegmentType:(int64_t)a3
{
  v4 = [(VOTElementManager *)self textSelectionMovementManager];
  [v4 setSegment:a3];
}

- (void)setElementRotorToType:(int64_t)a3 saveToPreferences:(BOOL)a4 userInitiated:(BOOL)a5
{
  v5 = a5;
  v6 = a4;
  if (self->_inUnitTestingMode)
  {

    [VOTElementManager _setElementRotorToType:"_setElementRotorToType:saveToPreferences:userInitiated:" saveToPreferences:a3 userInitiated:?];
  }

  else
  {
    elementManagerThread = self->_elementManagerThread;
    v11 = [NSNumber numberWithInteger:a3];
    v9 = [NSNumber numberWithBool:v6];
    v10 = [NSNumber numberWithBool:v5];
    [(SCRCThread *)elementManagerThread performSelector:"_setElementRotorToNumberType:saveToNumberPreferences:numberUserInitiated:" onTarget:self count:3 objects:v11, v9, v10, 0];
  }
}

- (void)_setElementRotorToNumberType:(id)a3 saveToNumberPreferences:(id)a4 numberUserInitiated:(id)a5
{
  v8 = a5;
  v9 = a4;
  v10 = [a3 integerValue];
  v11 = [v9 BOOLValue];

  v12 = [v8 BOOLValue];

  [(VOTElementManager *)self _setElementRotorToType:v10 saveToPreferences:v11 userInitiated:v12];
}

- (void)_setElementRotorToType:(int64_t)a3 saveToPreferences:(BOOL)a4 userInitiated:(BOOL)a5
{
  [(VOTRotor *)self->_elementRotor setCurrentRotorType:a3 saveToPreferences:a4 userInitiated:a5];
  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 6)
  {
    v6 = 1;
  }

  else
  {
    v6 = [(VOTElementManager *)self _inMisspelledWordRotor];
  }

  self->_inTextProcessingRotorMode = v6;
}

- (BOOL)forceRotorOffGesturedTextInputIfNeeded:(BOOL)a3
{
  v3 = a3;
  v5 = [(VOTRotor *)self->_elementRotor currentRotorType];
  if (!sub_1000F8768([(VOTRotor *)self->_elementRotor currentRotorType]))
  {
    return 0;
  }

  do
  {
    [(VOTElementManager *)self _handleSearchRotorDirection:2 event:0 notifyUser:v3];
    v6 = [(VOTRotor *)self->_elementRotor currentRotorType];
    v7 = v5 != v6;
  }

  while (v5 != v6 && sub_1000F8768([(VOTRotor *)self->_elementRotor currentRotorType]));
  return v7;
}

- (void)elementsCounted:(int64_t)a3
{
  v5 = [VOTSharedWorkspace selectedLanguage];
  switch([(VOTElementManager *)self currentRotorType])
  {
    case 8:
      v6 = @"header.count";
      v7 = off_1001FDDD0;
      v8 = @"header.count.high";
      goto LABEL_18;
    case 9:
      v6 = @"link.count";
      v7 = off_1001FDDD0;
      v8 = @"link.count.high";
      goto LABEL_18;
    case 0xALL:
      v6 = @"formelement.count";
      v7 = off_1001FDDD0;
      v8 = @"formelement.count.high";
      goto LABEL_18;
    case 0xBLL:
      v6 = @"radiogroup.count";
      v7 = off_1001FDDD0;
      v8 = @"radiogroup.count.high";
      goto LABEL_18;
    case 0xCLL:
      v6 = @"table.count";
      v7 = off_1001FDDD0;
      v8 = @"table.count.high";
      goto LABEL_18;
    case 0xDLL:
      v6 = @"frame.count";
      v7 = off_1001FDDD0;
      v8 = @"frame.count.high";
      goto LABEL_18;
    case 0xELL:
      v6 = @"list.count";
      v7 = off_1001FDDD0;
      v8 = @"list.count.high";
      goto LABEL_18;
    case 0xFLL:
      v6 = @"visitedlink.count";
      v7 = off_1001FDDD0;
      v8 = @"visitedlink.count.high";
      goto LABEL_18;
    case 0x10:
      v6 = @"nonvisited.count";
      v7 = off_1001FDDD0;
      v8 = @"nonvisited.count.high";
      goto LABEL_18;
    case 0x11:
      v6 = @"image.count";
      v7 = off_1001FDDD0;
      v8 = @"image.count.high";
      goto LABEL_18;
    case 0x21:
      v6 = @"landmark.count";
      v7 = off_1001FDDD0;
      v8 = @"landmark.count.high";
      goto LABEL_18;
    case 0x22:
      v6 = @"article.count";
      v7 = off_1001FDDD0;
      v8 = @"article.count.high";
      goto LABEL_18;
    case 0x23:
      v6 = @"button.count";
      v7 = off_1001FDDD0;
      v8 = @"button.count.high";
      goto LABEL_18;
    case 0x24:
      v6 = @"textfield.count";
      v7 = off_1001FDDD0;
      v8 = @"textfield.count.high";
      goto LABEL_18;
    case 0x28:
      v6 = @"searchfield.count";
      v7 = off_1001FDDD0;
      v8 = @"searchfield.count.high";
      goto LABEL_18;
    case 0x29:
      v6 = @"checkbox.count";
      v7 = off_1001FDDD0;
      v8 = @"checkbox.count.high";
LABEL_18:
      if (a3 == 0x7FFFFFFFFFFFFFFFLL)
      {
        v9 = v8;
      }

      else
      {
        v9 = v6;
      }

      v10 = sub_1000516CC(v7, v9, 0, v5);
      v11 = [NSString localizedStringWithFormat:v10, a3];

      if (v11)
      {
        CFAbsoluteTimeGetCurrent();
        if (a3 != 0x7FFFFFFFFFFFFFFFLL)
        {
          v14 = AXFormatInteger();
          v12 = AXCFormattedString();

          v11 = v12;
        }

        [(VOTElementManager *)self cancelElementCountOutput];
        v15 = v5;
        v13 = v11;
        AXPerformBlockOnMainThreadAfterDelay();
      }

      break;
    default:
      break;
  }
}

- (id)webEditableAncestor:(id)a3
{
  v3 = a3;
  v4 = kAXWebContentTrait;
  if ([v3 doesHaveTraits:kAXWebContentTrait])
  {
    v5 = [v3 directParent];
    if (!v5)
    {
      goto LABEL_9;
    }

    v6 = kAXIsEditingTrait;
    do
    {
      if (![v5 doesHaveTraits:v4])
      {
        break;
      }

      if ([v5 doesHaveTraits:v6])
      {
        goto LABEL_9;
      }

      v7 = [v5 directParent];

      v5 = v7;
    }

    while (v7);
  }

  v5 = 0;
LABEL_9:

  return v5;
}

- (void)setCurrentElementToWebEditableAncestor
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXWebContentTrait]&& ![(VOTElement *)self->_currentElement doesHaveTraits:kAXIsEditingTrait])
  {
    v3 = [(VOTElementManager *)self webEditableAncestor:self->_currentElement];
    if (v3)
    {
      [(VOTElementManager *)self _setCurrentElement:v3];
    }

    _objc_release_x1();
  }
}

- (void)_outputRotorTypeCount
{
  [(VOTElementManager *)self cancelElementCountOutput];
  qword_1001FECA0 = CFAbsoluteTimeGetCurrent();
  v3 = [(VOTRotor *)self->_elementRotor currentRotorType];
  v4 = [(VOTElementManager *)self _currentElement];
  v5 = [(VOTElementManager *)self _rotorTypeSupportsCounting:v3];
  v6 = [v4 application];
  v7 = [v6 isSafari];
  if (v5)
  {
    if ((v7 & 1) != 0 || [v6 isGoogleChrome])
    {
      v9 = 0;
      v8 = [(VOTElementManager *)self _copyMatchBlockForRotorType:v3 searchType:&v9];
      [(VOTElementFetcher *)self->_fetchManager cancelPreviousCount];
      [(VOTElementFetcher *)self->_fetchManager countElementsMatchingBlock:v8];
    }
  }

  else if ((v7 & 1) != 0 || [v6 isGoogleChrome])
  {
    [(VOTElementFetcher *)self->_fetchManager cancelPreviousCount];
  }
}

- (void)_handleSearchRotorDirection:(int64_t)a3 event:(id)a4
{
  [(VOTElementManager *)self _handleSearchRotorDirection:a3 event:a4 notifyUser:1];
  v5 = [VOTSharedWorkspace elementManager];
  v6 = [v5 elementRotor];
  v7 = [v6 currentRotorType];

  if (v7 == 4)
  {

    [(VOTElementManager *)self tutorialSetRecognizedGesture:@"RotorWords"];
  }
}

- (void)_handleSearchRotorDirection:(int64_t)a3 event:(id)a4 notifyUser:(BOOL)a5
{
  v5 = a5;
  v8 = a4;
  if ([VOTSharedWorkspace voiceOverMuted])
  {
    if ([v8 isKeyEvent])
    {
      v9 = +[VOTBrailleManager manager];
      v10 = [v9 bluetoothBrailleDisplayConnected];

      if ((v10 & 1) == 0)
      {
        [VOTSharedWorkspace setVoiceOverMuted:0];
      }
    }
  }

  if (v5 && ![(VOTElementRotor *)self->_elementRotor ignoreDefaultTypeAutofill])
  {
    v11 = [(VOTElementManager *)self _currentElement];
    v12 = [v11 doesHaveTraits:kAXIsEditingTrait];

    if (v12)
    {
      [(VOTElementRotor *)self->_elementRotor setIgnoreDefaultTypeAutofill:1];
    }
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 5 || [(VOTRotor *)self->_elementRotor currentRotorType]== 6)
  {
    [(VOTElementManager *)self setCurrentElementToWebEditableAncestor];
  }

  if (self->_flags.shouldUpdateRotorForElement || (lastSeenApplicationOrientation = self->_lastSeenApplicationOrientation, lastSeenApplicationOrientation != [VOTSharedWorkspace applicationOrientation]))
  {
    v14 = [(VOTElementManager *)self _currentElement];
    [v14 updateTraits];

    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }

  v18 = 0;
  if (a3 == 1)
  {
    -[VOTRotor increment:userInitiated:eventOrigin:](self->_elementRotor, "increment:userInitiated:eventOrigin:", &v18, 1, [v8 origin]);
  }

  else if (a3 == 2)
  {
    -[VOTRotor decrement:userInitiated:eventOrigin:](self->_elementRotor, "decrement:userInitiated:eventOrigin:", &v18, 1, [v8 origin]);
  }

  if ([v8 fingerCount])
  {
    [(SCRCTargetSelectorTimer *)self->_visualRotorFadeTimer cancel];
  }

  else
  {
    [(VOTElementManager *)self hideVisualRotor];
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 54)
  {
    self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
    customActionIdentifier = self->_customActionIdentifier;
    self->_customActionIdentifier = 0;
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 92)
  {
    self->_customContentIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

  v16 = [(VOTElementManager *)self _inMisspelledWordRotor];
  self->_inTextProcessingRotorMode = ([(VOTRotor *)self->_elementRotor currentRotorType]== 6) | v16 & 1;
  if ((v16 & 1) == 0)
  {
    self->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

  if (v5)
  {
    [(VOTElementManager *)self _showVisualRotor:self->_elementRotor direction:a3 == 1];
    v17 = [(VOTRotor *)self->_elementRotor generateRotorTypeRequest];
    [(VOTElementManager *)self _appendCurrentRotorValue:v17 forRotor:self->_elementRotor];
    [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v17];
    [v17 send];
  }

  [(VOTElementManager *)self _outputRotorTypeCount];
}

- (void)didTerminateDragForDragManager:(id)a3
{
  [(SCRCThread *)self->_elementManagerThread performSelector:"_dragTerminated" onTarget:self count:0 objects:0];
  dragOutputManager = self->_dragOutputManager;

  [(VOTDragOutputManager *)dragOutputManager dragEnded];
}

- (void)_dragTerminated
{
  v3 = [(VOTElementManager *)self _currentCustomActions];
  customActionIndex = self->_customActionIndex;
  if (customActionIndex >= 1)
  {
    v9 = v3;
    v5 = customActionIndex >= [v3 count];
    v3 = v9;
    if (!v5)
    {
      v6 = [v9 objectAtIndexedSubscript:self->_customActionIndex];
      v7 = [v6 isValidForContext:self];

      v3 = v9;
      if ((v7 & 1) == 0)
      {
        self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
        customActionIdentifier = self->_customActionIdentifier;
        self->_customActionIdentifier = 0;

        v3 = v9;
      }
    }
  }
}

- (void)_dragStarted
{
  [(VOTDragOutputManager *)self->_dragOutputManager dragSessionStarted];
  [(VOTElementManager *)self _layoutChangeForDragSessionStart];
  v3 = [(VOTElementManager *)self _currentCustomActions];
  customActionIndex = self->_customActionIndex;
  if (customActionIndex >= 1)
  {
    v9 = v3;
    v5 = customActionIndex >= [v3 count];
    v3 = v9;
    if (!v5)
    {
      v6 = [v9 objectAtIndexedSubscript:self->_customActionIndex];
      v7 = [v6 isValidForContext:self];

      v3 = v9;
      if ((v7 & 1) == 0)
      {
        self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
        customActionIdentifier = self->_customActionIdentifier;
        self->_customActionIdentifier = 0;

        v3 = v9;
      }
    }
  }
}

- (void)cancelDrag
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(AXDragManager *)self->_dragManager cancelDrag];
  [(VOTDragOutputManager *)self->_dragOutputManager dragCancelled];
  [(VOTElementFetcher *)self->_fetchManager forceUpdate];

  [(VOTElementManager *)self _handleLayoutChange:0];
}

- (void)dropDrag
{
  [(AXDragManager *)self->_dragManager drop];
  dragOutputManager = self->_dragOutputManager;

  [(VOTDragOutputManager *)dragOutputManager dragDropped];
}

- (void)moveDragToPoint:(CGPoint)a3
{
  [(AXDragManager *)self->_dragManager moveToPoint:a3.x, a3.y];
  dragOutputManager = self->_dragOutputManager;

  [(VOTDragOutputManager *)dragOutputManager dragMoved];
}

- (void)_updateContextDescriptors
{
  v3 = [(VOTElementManager *)self currentContextDescriptors];
  [(VOTElementManager *)self setPreviousContextDescriptors:v3];

  v4 = [(VOTElementManager *)self _currentElement];
  v5 = [v4 contextDescriptors];

  if ([v5 count])
  {
    v6 = +[NSMutableDictionary dictionaryWithCapacity:](NSMutableDictionary, "dictionaryWithCapacity:", [v5 count]);
    v16 = 0u;
    v17 = 0u;
    v18 = 0u;
    v19 = 0u;
    v15 = v5;
    v7 = v5;
    v8 = [v7 countByEnumeratingWithState:&v16 objects:v20 count:16];
    if (v8)
    {
      v9 = v8;
      v10 = *v17;
      do
      {
        for (i = 0; i != v9; i = i + 1)
        {
          if (*v17 != v10)
          {
            objc_enumerationMutation(v7);
          }

          v12 = *(*(&v16 + 1) + 8 * i);
          v13 = [v12 objectForKeyedSubscript:@"value"];
          v14 = [v12 objectForKeyedSubscript:@"category"];
          [v6 setObject:v13 forKeyedSubscript:v14];
        }

        v9 = [v7 countByEnumeratingWithState:&v16 objects:v20 count:16];
      }

      while (v9);
    }

    [(VOTElementManager *)self setCurrentContextDescriptors:v6];
    v5 = v15;
  }

  else
  {
    [(VOTElementManager *)self setCurrentContextDescriptors:0];
  }
}

- (BOOL)_touchContainerDidChangeForElement:(id)a3 oldElement:(id)a4
{
  v5 = a4;
  v6 = [a3 labeledTouchContainer];
  v7 = [v6 uiElement];

  v8 = [v5 labeledTouchContainer];

  v9 = [v8 uiElement];

  v10 = [v7 axElement];
  v11 = [v9 axElement];
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v10 = v7;
  }

  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v12 = v9;
  }

  else
  {
    v12 = v11;
  }

  if (v12 | v10)
  {
    v13 = (v10 != 0) != (v12 != 0) || CFEqual(v10, v12) == 0;
  }

  else
  {
    v13 = 0;
  }

  return v13;
}

- (BOOL)_chartElementDidChangeForElement:(id)a3 oldElement:(id)a4
{
  v5 = a3;
  v6 = a4;
  if (AXDeviceSupportsSonification() && ([v5 chartElement], v7 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v7, "uiElement"), v8 = objc_claimAutoreleasedReturnValue(), v9 = objc_msgSend(v8, "axElement"), v8, v7, objc_msgSend(v6, "chartElement"), v10 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v10, "uiElement"), v11 = objc_claimAutoreleasedReturnValue(), v12 = objc_msgSend(v11, "axElement"), v11, v10, v9 | v12))
  {
    v13 = (v9 != 0) != (v12 != 0) || CFEqual(v9, v12) == 0;
  }

  else
  {
    v13 = 0;
  }

  return v13;
}

- (BOOL)_shouldIncludeContainerInDescriptionForCurrentElement:(id)a3 previousElement:(id)a4
{
  v6 = a3;
  v7 = a4;
  if (!v7)
  {
    if (CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime <= 2.0)
    {
      v7 = self->_elementBeforeScreenChange;
    }

    else
    {
      v7 = 0;
    }
  }

  v8 = [(VOTElement *)v7 labeledTouchContainer];
  v9 = [v8 label];

  v10 = [v6 labeledTouchContainer];
  v11 = [v10 label];

  v12 = [(VOTElementManager *)self _elementCommunityForElement:v6];
  v13 = [(VOTElementManager *)self _elementCommunityForElement:v7];
  v14 = (v9 != v11) & ~[v9 isEqualToString:v11];
  v15 = [v12 isEqual:v13] ^ 1;
  v16 = [(VOTElementManager *)self _touchContainerDidChangeForElement:v6 oldElement:v7];
  if (v15 & 1) == 0 && v14 && ([v6 labeledTouchContainer], v23 = v6, v17 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v12, "labeledTouchContainer"), v22 = v9, v18 = objc_claimAutoreleasedReturnValue(), v19 = objc_msgSend(v17, "isEqual:", v18), v18, v9 = v22, v17, v6 = v23, (v19))
  {
    v20 = 0;
  }

  else
  {
    v20 = v16 & (v15 | v14);
  }

  return v20;
}

- (void)_echoFlickNavigationElement:(id)a3
{
  v19 = a3;
  v4 = [(VOTElementManager *)self _currentElement];
  sub_10006C77C(v19, v4);
  v5 = [objc_allocWithZone(VOTOutputRequest) init];
  v6 = [(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:v19 previousElement:v4];
  v7 = [(VOTElementManager *)self _updateTouchContainerForElement:v19 playSound:1];
  if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:v19])
  {
    v8 = 0x200800802;
  }

  else
  {
    v8 = 8390658;
  }

  v9 = [(AXDragManager *)self->_dragManager isDragActive];
  v10 = 0x40000000;
  if (!v9)
  {
    v10 = 0;
  }

  v11 = v10 | v8;
  if ([v19 containedIn:2] && objc_msgSend(v19, "rowRange") == self->_lastTableRow)
  {
    v11 |= 0x400000uLL;
  }

  if (v6)
  {
    v12 = [v19 shouldSpeakScrollStatusOnEntry];
    v13 = 32;
    if (v12)
    {
      v13 = 32800;
    }

    v11 |= v13;
  }

  if (AXDeviceSupportsSonification() && [v19 supportsAudiographs] && -[VOTElementManager _chartElementDidChangeForElement:oldElement:](self, "_chartElementDidChangeForElement:oldElement:", v19, v4))
  {
    v11 |= 0x4100000000uLL;
  }

  v14 = [v19 blockquoteLevel];
  if (v14 == [v4 blockquoteLevel])
  {
    v15 = v11;
  }

  else
  {
    v15 = v11 | 0x20000;
  }

  if (v4)
  {
    v16 = [v19 applicationIsRTL];
    if (v16 != [v4 applicationIsRTL])
    {
      v15 |= 0x8000000000uLL;
    }
  }

  [(VOTElementManager *)self _prepareElementOutputHeaders:v19 currentElement:v4 request:v5];
  v17 = [(VOTElementManager *)self currentContextDescriptors];
  [(VOTElementManager *)self _addDescription:v19 toRequest:v5 withOptions:v15 lastSeenContextDescriptors:v17];

  [(VOTElementManager *)self sendRequest:v5];
  if ([v19 doesHaveTraits:kAXLinkTrait])
  {
    v18 = [v19 url];

    if (v18)
    {
      [v19 frame];
      [(VOTElementManager *)self _outputDataDetectorIfPresent:v19 element:0 includeLinks:?];
    }
  }
}

- (void)_echoSearchNavigationElement:(id)a3 forRangeAdjustment:(BOOL)a4
{
  v4 = a4;
  v12 = a3;
  v6 = [objc_allocWithZone(VOTOutputRequest) init];
  v7 = [(VOTElementManager *)self _currentElement];
  [(VOTElementManager *)self _prepareElementOutputHeaders:v12 currentElement:v7 request:v6];

  v8 = [(VOTElementManager *)self _currentElement];
  v9 = [(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:v8 previousElement:v12];

  if (v9)
  {
    v10 = 8388642;
  }

  else
  {
    v10 = 8388610;
  }

  if (v4)
  {
    [v6 setDoesNotInterrupt:1];
    v10 = 0x2000000;
  }

  [(VOTElementManager *)self _addDescription:v12 toRequest:v6 withOptions:v10];
  [(VOTElementManager *)self sendRequest:v6];
  if ([v12 doesHaveTraits:kAXLinkTrait])
  {
    v11 = [v12 url];

    if (v11)
    {
      [v12 frame];
      [(VOTElementManager *)self _outputDataDetectorIfPresent:v12 element:0 includeLinks:?];
    }
  }
}

- (void)_echoSearchTypeNotFound:(int64_t)a3
{
  v5 = [VOTRotor rotorTypeForSearchType:?];
  if (!v5)
  {
    v5 = [(VOTRotor *)self->_elementRotor currentRotorType];
  }

  v6 = [VOTSharedWorkspace selectedLanguage];
  v13 = v6;
  if (a3)
  {
    v7 = v6;
    v8 = v5 - 8;
    if ((v5 - 8) > 0x23 || ((0xB1E0007FFuLL >> v8) & 1) == 0)
    {
      v10 = 0;
      goto LABEL_10;
    }

    v9 = *(&off_1001CA2F8 + v8);
  }

  else
  {
    v9 = @"generic.notfound";
  }

  v11 = sub_1000516CC(off_1001FDDD0, v9, 0, v6);
  v7 = v13;
  v10 = v11;
LABEL_10:
  v12 = sub_1000095FC(v10, 0, v7);
}

- (BOOL)_isShowingTodayViewForPhone
{
  if ([(NSArray *)self->_currentApplications count]!= 2)
  {
    return 0;
  }

  v3 = [(NSArray *)self->_currentApplications firstObject];
  if ([v3 isSpotlight])
  {
    v4 = [(NSArray *)self->_currentApplications lastObject];
    v5 = [v4 isSpringBoard];
  }

  else
  {
    v5 = 0;
  }

  return v5;
}

- (void)_elementFetchFoundElement:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = [v4 element];
  v6 = [v5 uiElement];
  [v6 enableCache:1];

  if ([v4 clientGeneration] == self->_elementSearchGeneration)
  {
    v7 = objc_autoreleasePoolPush();
    [(VOTElementManager *)self _resetReadAllRequest];
    v8 = [(VOTElementManager *)self _currentElement];
    v9 = [VOTSharedWorkspace navigationStyleHonorsGroups];
    if (!v5)
    {
      v11 = v9;
      if (!_AXSClarityBoardEnabled() || (v12 = [v4 direction], v12 != 1) && objc_msgSend(v4, "direction") != 2 || (-[VOTElementManager _getNextFocusedElementInElementCommunityPrevious:shouldUseCache:shouldWrapAround:](self, "_getNextFocusedElementInElementCommunityPrevious:shouldUseCache:shouldWrapAround:", v12 != 1, 0, 0), (v13 = objc_claimAutoreleasedReturnValue()) == 0))
      {
        if (-[VOTRotor publicCustomRotorIndex](self->_elementRotor, "publicCustomRotorIndex") != 0x7FFFFFFFFFFFFFFFLL && (!v11 || ([v4 searchEndedWithDifferentGroup] & 1) == 0))
        {
          v14 = [v8 directParent];
          v15 = [v14 application];
          if ([v14 isValidForApplication:v15])
          {
            v16 = [v14 isAccessibleElement];

            if (v16)
            {
              [(VOTElementManager *)self _setCurrentElement:v14];
              [(VOTElementManager *)self _resetElementUnitIndexes];
              v17 = [(VOTElementManager *)self _copyMatchBlockAnyElement];
              fetchManager = self->_fetchManager;
              v19 = [v4 direction];
              elementSearchGeneration = self->_elementSearchGeneration;
              LOBYTE(v54) = [VOTSharedWorkspace navigationStyleHonorsGroups];
              [(VOTElementFetcher *)fetchManager searchForElementInDirection:v19 fromElement:v14 matchBlock:v17 rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:0x7FFFFFFFLL groupNavigationStyle:0, v54];

              v5 = 0;
LABEL_45:

              objc_autoreleasePoolPop(v7);
              goto LABEL_46;
            }
          }

          else
          {
          }
        }

        v5 = 0;
        v10 = 1;
LABEL_21:
        v60[0] = _NSConcreteStackBlock;
        v60[1] = 3221225472;
        v60[2] = sub_10006E03C;
        v60[3] = &unk_1001C9058;
        v21 = v8;
        v61 = v21;
        v5 = v5;
        v62 = v5;
        v22 = objc_retainBlock(v60);
        if (v10)
        {
          if (!self->_flags.performedElementUpdateForSelectionChange && !self->_flags.performedSearch)
          {
            v23 = +[VOTOutputManager outputManager];
            v24 = +[VOSOutputEvent BoundaryEncountered];
            [v23 sendEvent:v24];
          }

          if (self->_flags.performedSearch)
          {
            -[VOTElementManager _echoSearchTypeNotFound:](self, "_echoSearchTypeNotFound:", [v4 searchType]);
            v25 = +[VOTOutputManager outputManager];
            v26 = +[VOSOutputEvent NoResultsFound];
            [v25 sendEvent:v26];
          }

          else
          {
            if (!self->_flags.performedFlickNavigation)
            {
              if (self->_flags.isReadingAll)
              {
                (v22[2])(v22);
              }

              else if (([v21 verifyElementExists:0] & 1) == 0)
              {
                [(VOTElementManager *)self _handleLayoutChange:0];
              }

              goto LABEL_40;
            }

            v25 = [(VOTElementManager *)self _currentElement];
            LOWORD(v53) = 257;
            [(VOTElementManager *)self _echoDifferentElement:v25 forEvent:0 onlyOutputTouchContainerAndSounds:0 canSetAsCurrentElement:0 shouldPlayGuideWireSound:0 isProtectedApp:0 includeHint:v53 boundaryHit:?];
          }

LABEL_40:
          self->_flags.isReadingAll = 0;
          v34 = +[VOTBrailleManager manager];
          [v34 setAutoAdvanceEnabled:0];

LABEL_41:
          v35 = VOTLogElement();
          if (os_signpost_enabled(v35))
          {
            *buf = 0;
            _os_signpost_emit_with_name_impl(&_mh_execute_header, v35, OS_SIGNPOST_INTERVAL_END, 0xEEEEB0B5B2B2EEEELL, "ElementTraversal", "", buf, 2u);
          }

          [(VOTElementManager *)self _resetSearchType];
LABEL_44:

          goto LABEL_45;
        }

        [v4 range];
        v28 = v27;
        if ([v5 isEqual:v21])
        {
          v31 = self->_highlightedCharacterRange.location != [v4 range] || self->_highlightedCharacterRange.length != v29;
          if (v28 && v31)
          {
            v32 = [v4 range];
            -[VOTElementManager _moveFocusToUpdatedRange:element:searchType:](self, "_moveFocusToUpdatedRange:element:searchType:", v32, v33, v5, [v4 searchType]);
          }

          goto LABEL_44;
        }

        if (v28)
        {
          self->_flags.performedElementUpdateForSelectionChange = 1;
        }

        if (([v5 includeDuringContentReading] & 1) != 0 || (objc_msgSend(v5, "isReadingContent") & 1) != 0 || self->_flags.performedElementUpdateForSelectionChange || self->_flags.isReadingAll)
        {
          [v5 shouldPlaySoundWhenFocused];
        }

        else if ([v5 shouldPlaySoundWhenFocused])
        {
          v47 = [(VOTElementManager *)self _appInfoForCurrentElement];
          v55 = v48;
          v56 = v47;
          v49 = +[AXSettings sharedInstance];
          v50 = [v49 automaticAccessibilityModeForBundleIdentifier:v56];

          v51 = +[VOTOutputManager outputManager];
          if (v50 == 1)
          {
            +[VOSOutputEvent DidFocusOnScreenRecognitionElement];
          }

          else
          {
            +[VOSOutputEvent DidFocusOnElement];
          }
          v52 = ;
          [v51 sendEvent:v52];
        }

        v36 = [v5 localOpaqueParent];
        if (v36 && (v37 = v36, [v5 remoteParent], v38 = objc_claimAutoreleasedReturnValue(), v38, v37, !v38))
        {
          v40 = 1;
        }

        else
        {
          if (!self->_flags.performedElementUpdateForSelectionChange)
          {
            v39 = sub_100052438(self->_flags.lastElementMovement);
            v58[0] = _NSConcreteStackBlock;
            v58[1] = 3221225472;
            v58[2] = sub_10006E0F8;
            v58[3] = &unk_1001C7778;
            v58[4] = self;
            v59 = v5;
            [v59 scrollToElementForDirectional:v39 withCompletion:v58];
          }

          v40 = 0;
        }

        [v5 updateCache];
        buf[0] = 0;
        if (self->_flags.isReadingAll)
        {
          if ((v22[2])(v22))
          {
LABEL_72:
            v43 = 1;
LABEL_73:
            if ((buf[0] & 1) == 0)
            {
              [(VOTElementManager *)self _setCurrentElement:v5 isProtectedApp:0 shouldResetTextSelection:1 shouldResetCharacterRange:v43 ignoreIsAccessibilityElementCheck:0];
            }

            if (v40)
            {
              [(VOTElementManager *)self _updateCursorFrameForElementIfNeeded:v5];
            }

            goto LABEL_41;
          }

          [(VOTElementManager *)self _continueReadAllWithElement:v5 setCurrentElement:buf];
          v41 = self->_fetchManager;
          v42 = v21;
        }

        else
        {
          if (!self->_flags.performedFlickNavigation)
          {
            if (self->_flags.performedSearch)
            {
              [v4 range];
              v43 = v44 == 0;
              if (v44)
              {
                v45 = [v4 range];
                -[VOTElementManager _moveFocusToUpdatedRange:element:searchType:](self, "_moveFocusToUpdatedRange:element:searchType:", v45, v46, v5, [v4 searchType]);
                v40 = 0;
                self->_flags.performedElementUpdateForSelectionChange = 1;
              }

              [(VOTElementManager *)self _echoSearchNavigationElement:v5 forRangeAdjustment:v28 != 0];
            }

            else
            {
              v43 = 1;
              if (self->_flags.performedElementUpdateForSelectionChange)
              {
                [(VOTElementManager *)self _setCurrentElement:v5 isProtectedApp:0 shouldResetTextSelection:0 shouldResetCharacterRange:0 ignoreIsAccessibilityElementCheck:0];
                buf[0] = 1;
              }
            }

            goto LABEL_73;
          }

          [(VOTElementManager *)self _echoFlickNavigationElement:v5];
          if ([v4 needsForceCacheUpdate])
          {
            [(VOTElementFetcher *)self->_fetchManager forceUpdate];
          }

          v41 = self->_fetchManager;
          v42 = v5;
        }

        [(VOTElementFetcher *)v41 updateCacheWithElement:v42];
        goto LABEL_72;
      }

      v5 = v13;
    }

    v10 = 0;
    goto LABEL_21;
  }

LABEL_46:
}

- (id)_copyMatchBlockSearchText
{
  v2 = [&stru_1001C9078 copy];

  return v2;
}

- (id)_copyMatchBlockForTextAttribute:(int64_t)a3 searchType:(int64_t *)a4
{
  if ((a3 - 70) <= 7)
  {
    *a4 = a3 - 68;
  }

  v6 = [&stru_1001C9098 copy];

  return v6;
}

- (id)_copyMatchBlockAnyElement
{
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10006E358;
  v5[3] = &unk_1001C8E40;
  v5[4] = self;
  v2 = objc_retainBlock(v5);
  v3 = [v2 copy];

  return v3;
}

- (id)_copyMatchBlockImage
{
  v2 = [&stru_1001C90B8 copy];

  return v2;
}

- (id)_copyMatchBlockVisitedLink
{
  v2 = [&stru_1001C90D8 copy];

  return v2;
}

- (id)_copyMatchBlockHeader
{
  v2 = [&stru_1001C90F8 copy];

  return v2;
}

- (id)_copyMatchBlockForHeadingLevel:(int64_t)a3 searchType:(int64_t *)a4
{
  v8[0] = 0;
  v8[1] = v8;
  v8[2] = 0x2020000000;
  v8[3] = a3;
  v7[0] = _NSConcreteStackBlock;
  v7[1] = 3221225472;
  v7[2] = sub_10006E8A8;
  v7[3] = &unk_1001C9120;
  v7[4] = v8;
  v7[5] = a4;
  v4 = objc_retainBlock(v7);
  v5 = [v4 copy];

  _Block_object_dispose(v8, 8);

  return v5;
}

- (id)_copyMatchBlockNonVisitedLink
{
  v2 = [&stru_1001C9140 copy];

  return v2;
}

- (id)_copyMatchBlockLink
{
  v2 = [&stru_1001C9160 copy];

  return v2;
}

- (id)_copyMatchBlockStaticText
{
  v2 = +[NSCharacterSet alphanumericCharacterSet];
  v3 = [v2 invertedSet];

  v8[0] = _NSConcreteStackBlock;
  v8[1] = 3221225472;
  v8[2] = sub_10006EB1C;
  v8[3] = &unk_1001C8E40;
  v9 = v3;
  v4 = v3;
  v5 = objc_retainBlock(v8);
  v6 = [v5 copy];

  return v6;
}

- (id)_copyMatchBlockFormElement
{
  v2 = [&stru_1001C9180 copy];

  return v2;
}

- (id)_copyMatchBlockListStart
{
  v2 = [&stru_1001C91A0 copy];

  return v2;
}

- (id)_copyMatchBlockFrameStart
{
  v2 = [&stru_1001C91C0 copy];

  return v2;
}

- (id)_copyMatchBlockTableStart
{
  v2 = [&stru_1001C91E0 copy];

  return v2;
}

- (id)_copyMatchBlockArticleStart
{
  v2 = [&stru_1001C9200 copy];

  return v2;
}

- (id)_copyMatchBlockLandmarkStart
{
  v2 = [&stru_1001C9220 copy];

  return v2;
}

- (id)_copyMatchBlockInternalLink
{
  v2 = [&stru_1001C9240 copy];

  return v2;
}

- (id)_copyMatchBlockButton
{
  v2 = [&stru_1001C9260 copy];

  return v2;
}

- (unint64_t)filterTraitsByPriority:(unint64_t)a3
{
  result = kAXHeaderTrait;
  if ((kAXHeaderTrait & a3) == 0)
  {
    result = kAXPickerElementTrait;
    if ((kAXPickerElementTrait & a3) == 0)
    {
      if ((kAXWebContentTrait & a3) != 0)
      {
        v4 = kAXLinkTrait;
        if ((kAXLinkTrait & a3) != 0)
        {
          return v4 | kAXWebContentTrait;
        }

        v4 = kAXTextEntryTrait;
        if ((kAXTextEntryTrait & a3) != 0)
        {
          return v4 | kAXWebContentTrait;
        }

        v5 = kAXWebContentTrait;
      }

      else
      {
        v5 = 0;
      }

      v6 = kAXImageTrait;
      if ((kAXImageTrait & a3) != 0)
      {
        return v6 | v5;
      }

      v6 = kAXButtonTrait;
      if ((kAXButtonTrait & a3) != 0)
      {
        return v6 | v5;
      }

      v6 = kAXLinkTrait;
      if ((kAXLinkTrait & a3) != 0)
      {
        return v6 | v5;
      }

      else
      {
        v7 = kAXStaticTextTrait | v5;
        if ((kAXStaticTextTrait & a3) != 0)
        {
          return v7;
        }

        else
        {
          return kAXWebContentTrait;
        }
      }
    }
  }

  return result;
}

- (id)_copyMatchBlockSameBlockquote
{
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10006F37C;
  v5[3] = &unk_1001C8E40;
  v5[4] = self;
  v2 = objc_retainBlock(v5);
  v3 = objc_retainBlock(v2);

  return v3;
}

- (id)_copyMatchBlockSameHeading
{
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10006F484;
  v5[3] = &unk_1001C8E40;
  v5[4] = self;
  v2 = objc_retainBlock(v5);
  v3 = objc_retainBlock(v2);

  return v3;
}

- (id)_copyMatchBlockSimilar
{
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastSearchForElementsTime];
  if (Current - v4 > 1.5)
  {
    [(VOTElementManager *)self setCurrentSimilarTraits:[(VOTElementManager *)self filterTraitsByPriority:[(VOTElement *)self->_currentElement traits]]];
  }

  v8[0] = _NSConcreteStackBlock;
  v8[1] = 3221225472;
  v8[2] = sub_10006F628;
  v8[3] = &unk_1001C8E40;
  v8[4] = self;
  v5 = objc_retainBlock(v8);
  v6 = [v5 copy];

  return v6;
}

- (id)_copyMatchBlockDifferent
{
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastSearchForElementsTime];
  if (Current - v4 > 1.5)
  {
    [(VOTElementManager *)self setCurrentSimilarTraits:[(VOTElementManager *)self filterTraitsByPriority:[(VOTElement *)self->_currentElement traits]]];
  }

  v8[0] = _NSConcreteStackBlock;
  v8[1] = 3221225472;
  v8[2] = sub_10006F758;
  v8[3] = &unk_1001C8E40;
  v8[4] = self;
  v5 = objc_retainBlock(v8);
  v6 = [v5 copy];

  return v6;
}

- (id)_copyMatchBlockTextField
{
  v2 = [&stru_1001C92A0 copy];

  return v2;
}

- (id)_copyMatchBlockRadioGroup
{
  v2 = [&stru_1001C92C0 copy];

  return v2;
}

- (id)_copyMatchBlockCheckbox
{
  v2 = [&stru_1001C92E0 copy];

  return v2;
}

- (id)_copyMatchBlockSearchField
{
  v2 = [&stru_1001C9300 copy];

  return v2;
}

- (id)_copyMatchBlockForRotorType:(int64_t)a3 searchType:(int64_t *)a4
{
  v4 = 0;
  switch(a3)
  {
    case 8:
      v4 = [(VOTElementManager *)self _copyMatchBlockHeader];
      v7 = 1;
      goto LABEL_28;
    case 9:
      v4 = [(VOTElementManager *)self _copyMatchBlockLink];
      v7 = 11;
      goto LABEL_28;
    case 10:
      v4 = [(VOTElementManager *)self _copyMatchBlockFormElement];
      v7 = 13;
      goto LABEL_28;
    case 11:
      v4 = [(VOTElementManager *)self _copyMatchBlockRadioGroup];
      v7 = 19;
      goto LABEL_28;
    case 12:
      v4 = [(VOTElementManager *)self _copyMatchBlockTableStart];
      v7 = 22;
      goto LABEL_28;
    case 13:
      v4 = [(VOTElementManager *)self _copyMatchBlockFrameStart];
      v7 = 27;
      goto LABEL_28;
    case 14:
      v4 = [(VOTElementManager *)self _copyMatchBlockListStart];
      v7 = 23;
      goto LABEL_28;
    case 15:
      v4 = [(VOTElementManager *)self _copyMatchBlockVisitedLink];
      v7 = 14;
      goto LABEL_28;
    case 16:
      v4 = [(VOTElementManager *)self _copyMatchBlockNonVisitedLink];
      v7 = 15;
      goto LABEL_28;
    case 17:
      v4 = [(VOTElementManager *)self _copyMatchBlockImage];
      v7 = 10;
      goto LABEL_28;
    case 18:
      v4 = [(VOTElementManager *)self _copyMatchBlockStaticText];
      v7 = 16;
      goto LABEL_28;
    case 33:
      v4 = [(VOTElementManager *)self _copyMatchBlockLandmarkStart];
      v7 = 24;
      goto LABEL_28;
    case 34:
      v4 = [(VOTElementManager *)self _copyMatchBlockArticleStart];
      v7 = 12;
      goto LABEL_28;
    case 35:
      v4 = [(VOTElementManager *)self _copyMatchBlockButton];
      v7 = 21;
      goto LABEL_28;
    case 36:
      v4 = [(VOTElementManager *)self _copyMatchBlockTextField];
      v7 = 17;
      goto LABEL_28;
    case 40:
      v4 = [(VOTElementManager *)self _copyMatchBlockSearchField];
      v7 = 18;
      goto LABEL_28;
    case 41:
      v4 = [(VOTElementManager *)self _copyMatchBlockCheckbox];
      v7 = 20;
      goto LABEL_28;
    case 43:
      v6 = [(VOTElementManager *)self _copyMatchBlockSimilar];
      goto LABEL_4;
    case 44:
      v6 = [(VOTElementManager *)self _copyMatchBlockAnyElement];
      goto LABEL_4;
    case 45:
    case 46:
    case 47:
    case 48:
    case 49:
    case 50:
      v6 = [VOTElementManager _copyMatchBlockForHeadingLevel:"_copyMatchBlockForHeadingLevel:searchType:" searchType:?];
      goto LABEL_4;
    case 51:
      v4 = [(VOTElementManager *)self _copyMatchBlockSameHeading];
      v7 = 26;
      goto LABEL_28;
    case 52:
      v6 = [(VOTElementManager *)self _copyMatchBlockDifferent];
      goto LABEL_4;
    case 70:
    case 71:
    case 72:
    case 73:
    case 74:
    case 75:
    case 76:
    case 77:
      v6 = [VOTElementManager _copyMatchBlockForTextAttribute:"_copyMatchBlockForTextAttribute:searchType:" searchType:?];
LABEL_4:
      v4 = v6;
      break;
    case 78:
      v4 = [(VOTElementManager *)self _copyMatchBlockBlockquote];
      v7 = 25;
      goto LABEL_28;
    case 79:
      v4 = [(VOTElementManager *)self _copyMatchBlockSameBlockquote];
      v7 = 28;
LABEL_28:
      *a4 = v7;
      break;
    default:
      break;
  }

  v8 = objc_retainBlock(v4);

  return v8;
}

- (void)_customPublicRotorMatchForType:(id)a3 range:(_NSRange *)a4 element:(id *)a5 direction:(int64_t)a6 lastSearchUUID:(id *)a7
{
  v12 = [*a5 customPublicRotorForSystemType:a3];
  v13 = v12;
  if (!v12)
  {
    goto LABEL_4;
  }

  if (a7)
  {
    if ([v12 isEqual:*a7])
    {
LABEL_4:
      *a4 = xmmword_10017E110;
      *a5 = 0;
      goto LABEL_15;
    }

    v14 = v13;
    *a7 = v13;
  }

  v15 = [VOTElement customPublicRotorDictionaryForRotorId:v13 startRange:a4->location direction:a4->length, a6];
  v16 = [*a5 customPublicRotorResultWithItem:v15 startElement:*a5];
  v17 = v16;
  if (v16)
  {
    if (self->_inUnitTestingMode)
    {
      v18 = [v16 objectForKeyedSubscript:@"targetElement"];
    }

    else
    {
      v19 = [v16 objectForKeyedSubscript:@"targetElement"];
      v20 = [AXUIElement uiElementWithAXElement:v19];
      v18 = [VOTElement elementWithUIElement:v20];
    }

    v21 = [v17 objectForKeyedSubscript:{@"targetRange", 0x7FFFFFFFLL, 0}];

    if (v21)
    {
      v22 = [v17 objectForKeyedSubscript:@"targetRange"];
      AXValueGetValue(v22, kAXValueTypeCFRange, &v24);
    }

    *a4 = v24;
    v23 = v18;
    *a5 = v18;
  }

  else
  {
    *a4 = xmmword_10017E110;
    *a5 = 0;
  }

LABEL_15:
}

- (id)_copyRangeMatchBlockForRotorType:(int64_t)a3
{
  v4 = [VOTRotor systemRotorTypeForRotorType:a3];
  v5 = v4;
  if (v4)
  {
    v9 = _NSConcreteStackBlock;
    v10 = 3221225472;
    v11 = sub_10006FFBC;
    v12 = &unk_1001C9328;
    v13 = self;
    v14 = v4;
    v6 = objc_retainBlock(&v9);
    v7 = [v6 copy];
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (void)_handleElementSearch:(id)a3 rotorType:(int64_t)a4 direction:(int64_t)a5
{
  v15 = 0;
  v8 = [(VOTElementManager *)self _copyMatchBlockForRotorType:a4 searchType:&v15];
  if (v8)
  {
    v9 = [(VOTElementManager *)self _copyRangeMatchBlockForRotorType:a4];
    self->_flags.performedSearch = 1;
    fetchManager = self->_fetchManager;
    v11 = [(VOTElementManager *)self _currentElement];
    v12 = v15;
    elementSearchGeneration = self->_elementSearchGeneration;
    LOBYTE(v14) = [VOTSharedWorkspace navigationStyleHonorsGroups];
    [(VOTElementFetcher *)fetchManager searchForElementInDirection:a5 fromElement:v11 matchBlock:v8 rangeMatch:v9 searchType:v12 generation:elementSearchGeneration startingRange:self->_highlightedCharacterRange.location groupNavigationStyle:self->_highlightedCharacterRange.length, v14];

    [(VOTElementManager *)self setLastSearchForElementsTime:CFAbsoluteTimeGetCurrent()];
  }
}

- (void)_handleSearchRotorMovement:(BOOL)a3 event:(id)a4
{
  v4 = a3;
  v6 = a4;
  if (self->_flags.shouldUpdateRotorForElement)
  {
    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }

  [(VOTElementManager *)self _handleSearchRotorMovementWithoutRotorUpdateInDirectionUp:v4 event:v6];
  [(VOTElementManager *)self setLastElementChangeAction:1];
}

- (void)_handleColumnMovement:(id)a3
{
  v15 = a3;
  v4 = [v15 command];
  v5 = [v4 isEqualToString:kVOTEventCommandNextColumn];

  if ([(VOTElement *)self->_currentElement containedIn:2]&& ((v6 = [(VOTElement *)self->_currentElement columnRange], v8 = v7, v9 = [(VOTElement *)self->_currentElement columnCount], !v5) ? (v10 = -1) : (v10 = v8), (v11 = &v6[v10], &v6[v10] >= 0) && v11 < v9 && ([(VOTElement *)self->_currentElement elementAtRow:[(VOTElement *)self->_currentElement rowRange] andColumn:v11], (v12 = objc_claimAutoreleasedReturnValue()) != 0)))
  {
    v13 = v12;
    [(VOTElementManager *)self _echoDifferentElement:v12 forEvent:v15];
  }

  else
  {
    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];
  }
}

- (void)_handleDirectElementSearch:(id)a3
{
  v4 = a3;
  if (qword_1001FECB0 != -1)
  {
    sub_10012AB64();
  }

  v5 = qword_1001FECA8;
  v6 = [v4 command];
  v7 = [v5 objectForKeyedSubscript:v6];

  if (v7)
  {
    v8 = 0;
    v9 = 0;
    (v7)[2](v7, &v9, &v8);
    [(VOTElementManager *)self _handleElementSearch:v4 rotorType:v9 direction:v8];
  }
}

- (void)_handleSearchRotorMovementWithoutRotorUpdateInDirectionUp:(BOOL)a3 event:(id)a4
{
  v4 = a3;
  v13 = a4;
  lastSeenApplicationOrientation = self->_lastSeenApplicationOrientation;
  if (lastSeenApplicationOrientation != [VOTSharedWorkspace applicationOrientation])
  {
    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }

  if (v4)
  {
    v7 = 2;
  }

  else
  {
    v7 = 1;
  }

  v8 = [(VOTRotor *)self->_elementRotor currentRotorType];
  switch(v8)
  {
    case 1:
      [(VOTElementManager *)self _handleAdjustValue:v13 reverse:v4 ^ 1];
      break;
    case 2:
      [(VOTElementManager *)self _handleNextAutofill:v13 reverse:v4];
      break;
    case 3:
      [(VOTElementManager *)self _handleLetterMovement:v13 direction:v7];
      break;
    case 4:
      [(VOTElementManager *)self _handleWordMovement:v13 direction:v7];
      break;
    case 5:
      [(VOTElementManager *)self _handleGenericTextSegmentMovement:v13 direction:v7 granulary:3];
      break;
    case 6:
      [(VOTElementManager *)self _handleRotorTextSelectionMovement:v13 direction:v7];
      break;
    case 7:
      [(VOTElementManager *)self _handleVerticalMovement:v13 direction:v7];
      break;
    case 8:
    case 9:
    case 10:
    case 11:
    case 12:
    case 13:
    case 14:
    case 15:
    case 16:
    case 17:
    case 18:
    case 33:
    case 34:
    case 35:
    case 36:
    case 40:
    case 41:
    case 43:
    case 44:
    case 51:
    case 52:
    case 70:
    case 78:
    case 79:
      [(VOTElementManager *)self _handleElementSearch:v13 rotorType:v8 direction:v7];
      break;
    case 19:
      [(VOTElementManager *)self _handleNextTextOperationInDirection:v7 withEvent:v13];
      break;
    case 20:
      if (v4)
      {
        v11 = 4;
      }

      else
      {
        v11 = 3;
      }

      [(VOTElementManager *)self _handleZoomMovement:v11 event:v13];
      break;
    case 21:
      [(VOTElementManager *)self _handleRotorTypingModeMovement:v7 withEvent:v13];
      break;
    case 22:
      [(VOTElementManager *)self _handleRotorContinusPathChange:v7 withEvent:v13];
      break;
    case 23:
      [(VOTElementManager *)self _handleRotorVoiceMovement:v7 withEvent:v13];
      break;
    case 24:
      [(VOTElementManager *)self _handleRotorBrailleLanguageMovement:v7 withEvent:v13];
      break;
    case 25:
      [(VOTElementManager *)self _handleRotorBrailleInputLanguageMovement:v7 withEvent:v13];
      break;
    case 26:
      [(VOTElementManager *)self _handleRotorBrailleAutoAdvanceMovement:v7 withEvent:v13];
      break;
    case 27:
      [(VOTElementManager *)self _handleRotor2DBrailleZoom:v7 withEvent:v13];
      break;
    case 28:
      [(VOTElementManager *)self _handleRotor2DBraillePanHorizontal:v7 withEvent:v13];
      break;
    case 29:
      [(VOTElementManager *)self _handleRotor2DBraillePanVertical:v7 withEvent:v13];
      break;
    case 30:
      [(VOTElementManager *)self _handleRotor2DBrailleInvert:v7 withEvent:v13];
      break;
    case 31:
      [(VOTElementManager *)self _handleRotor2DBrailleEdgeIntensity:v7 withEvent:v13];
      break;
    case 32:
      [(VOTElementManager *)self _handleRotor2DBrailleDisplayMode:v7 withEvent:v13];
      break;
    case 37:
      [(VOTElementManager *)self _handleRowMovement:v13 direction:v7];
      break;
    case 38:
      [(VOTElementManager *)self _handleContainerMovement:v13 direction:v7];
      break;
    case 39:
      [(VOTElementManager *)self _handleWebSearchResult:v7 withEvent:v13];
      break;
    case 42:
      [(VOTElementManager *)self _handleDirectTouchExplorationMode:v13 direction:v7];
      break;
    case 53:
      [(VOTElementManager *)self _handlePublicCustomRotorMovement:v13 direction:v7];
      break;
    case 54:
      [(VOTElementManager *)self _handleCustomRotorAction:v13 direction:v7];
      break;
    case 55:
    case 56:
    case 57:
    case 58:
      [(VOTElementManager *)self _handleMathGranularMovement:v7 event:v13];
      break;
    case 59:
      [(VOTElementManager *)self _handleHintsSettingMode:v13 direction:v7];
      break;
    case 62:
      [(VOTElementManager *)self _handleTrackingDetailMovement:v4 event:v13];
      break;
    case 63:
      [(VOTElementManager *)self _handleDescribedMediaMode:v13 direction:v7];
      break;
    case 65:
      [(VOTElementManager *)self _handleAudiographAction:v7 event:v13];
      break;
    case 66:
      [(VOTElementManager *)self _handleMLElementModeWithDirection:v7 verboseOutput:0];
      break;
    case 67:
      [(VOTElementManager *)self _handleImageDescriptionsToggle:v7];
      break;
    case 68:
      [(VOTElementManager *)self _handleNavigationStyleMovement:v13 direction:v7];
      break;
    case 80:
      if (v4)
      {
        [(VOTElementManager *)self _handleIncreaseVolume:v13];
      }

      else
      {
        [(VOTElementManager *)self _handleDecreaseVolume:v13];
      }

      break;
    case 81:
      [(VOTElementManager *)self _handleSpeechRateChange:v4];
      break;
    case 85:
      [(VOTElementManager *)self _handleSpeechPunctuationChange:v4];
      break;
    case 86:
      [(VOTElementManager *)self _handleSoundRotorChange:v4];
      break;
    case 87:
      v9 = AXRuntimeCheck_SupportsVoiceoverIndepedentVolume();
      v10 = v4 ^ 1;
      if (v9)
      {
        [(VOTElementManager *)self _handleAudioDuckingModeChange:v10];
      }

      else
      {
        [(VOTElementManager *)self _handleAudioDuckingChange:v10];
      }

      break;
    case 88:
      if (AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
      {
        [(VOTElementManager *)self _handleAudioDuckingAmountChange:v4 ^ 1];
      }

      break;
    case 89:
      [(VOTElementManager *)self _handleAudioDestination:v4 ^ 1];
      break;
    case 90:
      [(VOTElementManager *)self _handleNavigationDirectionChangeWithDirection:v7];
      break;
    case 91:
      [(VOTElementManager *)self _handleActivityRotorChange:v4 ^ 1];
      break;
    case 92:
      [(VOTElementManager *)self _handleCustomRotorContent:v13 direction:v7];
      break;
    case 93:
      [(VOTElementManager *)self _handleDetectionModeMovement:v13 direction:v7];
      break;
    case 94:
      [(VOTElementManager *)self _handleScribbleMovement:v4];
      break;
    case 95:
      [(VOTElementManager *)self _handleToggleLiveRegions:v7];
      break;
    case 96:
      [(VOTElementManager *)self _handleCopiedSpeechRotorMovement:v7];
      break;
    default:
      v12 = [NSNumber numberWithInteger:v8];
      _AXLogWithFacility();

      break;
  }

  if (sub_1000F80D4(v8))
  {
    self->_flags.performedRotorTextNavigation = 1;
  }

  self->_lastPressOnMediaSessionElement = -3061152000.0;
}

- (void)_handleSingleLetterSearch:(id)a3
{
  v15 = a3;
  v4 = +[VOTKeyboardManager keyboardManager];
  v5 = [v15 keyInfo];
  v6 = [v4 singleLetterCommandForKeyInfo:v5];

  if (v6)
  {
    if (qword_1001FECC0 != -1)
    {
      sub_10012AB78();
    }

    v7 = [qword_1001FECB8 objectForKey:v6];
    v8 = v7;
    if (v7)
    {
      v9 = [v7 objectAtIndexedSubscript:0];
      v10 = [v9 intValue];

      v11 = [v8 objectAtIndexedSubscript:1];
      v12 = [v11 intValue];

      [(VOTElementManager *)self _handleElementSearch:v15 rotorType:v12 direction:v10];
      goto LABEL_9;
    }

    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];
  }

  else
  {
    v8 = +[VOTOutputManager outputManager];
    v13 = +[VOSOutputEvent BoundaryEncountered];
    [v8 sendEvent:v13];
  }

LABEL_9:
}

- (void)_handleSpeakScreen:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  [v4 stopSpeakingAtBoundary:0];

  v21 = [(VOTElementManager *)self _currentElement];
  if (v21)
  {
    v5 = +[VOTElement systemWideElement];
    [v21 frame];
    [v5 convertRect:objc_msgSend(v21 fromContextId:{"windowContextId"), v6, v7, v8, v9}];
    v11 = v10;
    v13 = v12;
    v15 = v14;
    v17 = v16;

    v23.origin.x = v11;
    v23.origin.y = v13;
    v23.size.width = v15;
    v23.size.height = v17;
    MidX = CGRectGetMidX(v23);
    v24.origin.x = v11;
    v24.origin.y = v13;
    v24.size.width = v15;
    v24.size.height = v17;
    MidY = CGRectGetMidY(v24);
    v20 = [sub_100071640() sharedInstance];
    [v20 speakThisWithOptions:12 useAppAtPoint:&stru_1001C99A8 errorHandler:{MidX, MidY}];
  }

  else
  {
    v20 = [sub_100071640() sharedInstance];
    [v20 speakThisWithOptions:12 errorHandler:&stru_1001C99C8];
  }
}

- (void)_resetOtherTapInputModes
{
  *&self->_flags.tapShouldHandleAutofill = 0;
  [(_VOTTextMarkerRange *)self->_textMarkerRange setEndMarker:0];
  [(_VOTTextMarkerRange *)self->_textMarkerRange setStartMarker:0];
  autofillCurrentElement = self->_autofillCurrentElement;
  self->_autofillCurrentElement = 0;

  textMarker = self->_textMarker;
  self->_textMarker = 0;
}

- (void)_handleRotorVoiceMovement:(int64_t)a3 withEvent:(id)a4
{
  v6 = a4;
  [VOTSharedWorkspace setPreviousRotorVoiceIdentifier:0];
  v7 = +[AXSettings sharedInstance];
  v8 = [v7 voiceOverVoiceRotors];

  v9 = +[AXSettings sharedInstance];
  v10 = [v9 voiceOverCurrentRotorVoiceIdentifier];

  if (v10 && ([v10 isEqualToString:&stru_1001CBF90] & 1) == 0)
  {
    v54[0] = _NSConcreteStackBlock;
    v54[1] = 3221225472;
    v54[2] = sub_100071DFC;
    v54[3] = &unk_1001C9008;
    v55 = v10;
    v12 = [v8 indexOfObjectPassingTest:v54];
    if (a3 == 1)
    {
      v13 = v12 + 1;
    }

    else
    {
      v13 = v12;
    }

    if (a3 == 2)
    {
      v11 = (v12 - 1);
    }

    else
    {
      v11 = v13;
    }
  }

  else if (a3 == 2)
  {
    v11 = [v8 count] - 1;
  }

  else
  {
    v11 = 0;
  }

  v14 = +[TTSAXResourceManager sharedInstance];
  v15 = [v8 count];
  v46 = v14;
  if ((v11 & 0x8000000000000000) != 0 || v11 >= v15)
  {
    v30 = +[AXSettings sharedInstance];
    [v30 setVoiceOverCurrentRotorVoiceIdentifier:0];

    v31 = [VOTSharedWorkspace selectedActivity];
    v32 = [v31 voiceIdentifier];

    if (v32)
    {
      v33 = [v31 voiceIdentifier];
      v34 = [v14 speechVoiceWithVoiceId:v33];

      v23 = [v34 localizedNameWithFootprint];
      v35 = sub_1000511CC(off_1001FDDD0, @"default.voices.activity.format", 0);
      v36 = [v31 name];
      v28 = [NSString stringWithFormat:v35, v23, v36];
    }

    else
    {
      v40 = [VOTSharedWorkspace votSettings];
      v41 = [v40 systemVoiceSelection];
      v42 = [v41 voiceId];
      v34 = [v14 speechVoiceWithVoiceId:v42];

      v23 = [v34 localizedNameWithFootprint];
      v35 = sub_1000511CC(off_1001FDDD0, @"default.voices.format", 0);
      v28 = [NSString stringWithFormat:v35, v23];
    }

LABEL_28:
    v43 = +[VOTOutputManager outputManager];
    [v43 speakSimpleString:v28];

    goto LABEL_29;
  }

  v44 = self;
  v45 = v6;
  v16 = [v8 objectAtIndexedSubscript:v11];
  v17 = [v16 identifier];
  v18 = +[AXSettings sharedInstance];
  [v18 setVoiceOverCurrentRotorVoiceIdentifier:v17];

  v19 = [v8 objectAtIndexedSubscript:v11];
  v20 = [v19 voiceId];
  v21 = [v14 speechVoiceWithVoiceId:v20];

  v22 = [v21 language];
  v23 = [v21 nameAndFootprintForLanguage:v22];

  v50 = 0;
  v51 = &v50;
  v52 = 0x2020000000;
  v53 = 0;
  v24 = dispatch_semaphore_create(0);
  v25 = [VOTSharedWorkspace votSettings];
  v26 = [v21 voiceId];
  v47[0] = _NSConcreteStackBlock;
  v47[1] = 3221225472;
  v47[2] = sub_100071E40;
  v47[3] = &unk_1001C99F0;
  v49 = &v50;
  v27 = v24;
  v48 = v27;
  [v25 voiceHasSuperCompactCounterpart:v26 completionHandler:v47];

  dispatch_semaphore_wait(v27, 0xFFFFFFFFFFFFFFFFLL);
  if (v23 && (([v21 isInstalled] & 1) != 0 || *(v51 + 24) != 1))
  {
    v37 = [v8 objectAtIndexedSubscript:v11];
    v38 = [v37 userDefinedName];
    if (v38)
    {
      v39 = [v8 objectAtIndexedSubscript:v11];
      v28 = [v39 userDefinedName];
    }

    else
    {
      v28 = v23;
    }

    v29 = 1;
  }

  else
  {
    [(VOTElementManager *)v44 _handleRotorVoiceMovement:a3 withEvent:v45];
    v28 = 0;
    v29 = 0;
  }

  _Block_object_dispose(&v50, 8);
  v6 = v45;
  if (v29)
  {
    goto LABEL_28;
  }

LABEL_29:
}

- (void)_handleRotorBrailleLanguageMovement:(int64_t)a3 withEvent:(id)a4
{
  v11 = 0;
  v5 = [VOTBrailleManager manager:a3];
  v6 = [v5 adjustBrailleLanguageRotorInDirection:a3 isDefault:&v11];

  v7 = VOTLogBraille();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
  {
    v8 = [VOTSharedWorkspace selectedBrailleTable];
    *buf = 138412546;
    v13 = v6;
    v14 = 2112;
    v15 = v8;
    _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "Did set braille table. %@ (settings: %@)", buf, 0x16u);
  }

  v9 = +[VOTBrailleManager manager];
  [v9 announceBrailleTable:v6 isDefault:v11];

  v10 = +[NSNotificationCenter defaultCenter];
  [v10 postNotificationName:off_1001FDB28 object:0];
}

- (void)_handleRotorBrailleInputLanguageMovement:(int64_t)a3 withEvent:(id)a4
{
  v11 = 0;
  v5 = [VOTBrailleManager manager:a3];
  v6 = [v5 adjustBrailleInputLanguageRotorInDirection:a3 isDefault:&v11];

  v7 = VOTLogBraille();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
  {
    v8 = [VOTSharedWorkspace selectedBrailleInputTable];
    *buf = 138412546;
    v13 = v6;
    v14 = 2112;
    v15 = v8;
    _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "Did set braille input table. %@ (settings: %@)", buf, 0x16u);
  }

  v9 = +[VOTBrailleManager manager];
  [v9 announceBrailleTable:v6 isDefault:v11];

  v10 = +[NSNotificationCenter defaultCenter];
  [v10 postNotificationName:off_1001FDB28 object:0];
}

- (void)_handleRotorBrailleAutoAdvanceMovement:(int64_t)a3 withEvent:(id)a4
{
  if (a3 == 1)
  {
    [(VOTElementManager *)self _handleBrailleIncreaseAutoAdvanceSpeed:a4];
  }

  else
  {
    [(VOTElementManager *)self _handleBrailleDecreaseAutoAdvanceSpeed:a4];
  }
}

- (double)_brailleMaxOrigin
{
  v2 = +[VOTPlanarBrailleManager manager];
  [v2 imageZoom];
  v4 = v3 + -1.0;

  v5 = +[VOTPlanarBrailleManager manager];
  [v5 imageZoom];
  v7 = v4 / v6;

  return v7;
}

- (void)_forceVisionRefresh
{
  if ([VOTVisionEngine shouldAnalyzeElement:self->_currentElement])
  {
    v3 = +[VOTWorkspace sharedWorkspace];
    v5 = [v3 visionEngine];

    v4 = objc_opt_new();
    [v4 setIncludeFullImageDescriptionsForValidElements:{-[VOTElementManager determineFullImageDescriptionsEnabled:](self, "determineFullImageDescriptionsEnabled:", self->_currentElement)}];
    [v4 setIncludeSceneDetection:{-[VOTElementManager determineSceneDetectionsEnabled:](self, "determineSceneDetectionsEnabled:", self->_currentElement)}];
    [v5 analyzeElement:self->_currentElement withOptions:v4];
  }
}

- (void)_handleRotor2DBrailleZoom:(int64_t)a3 withEvent:(id)a4
{
  v29 = 0u;
  v30 = 0u;
  v31 = 0u;
  v32 = 0u;
  v6 = [&off_1001DBA80 countByEnumeratingWithState:&v29 objects:v33 count:16];
  if (!v6)
  {
    if (a3 != 1)
    {
      goto LABEL_18;
    }

    v8 = 0;
    goto LABEL_15;
  }

  v7 = v6;
  v8 = 0;
  v9 = *v30;
  do
  {
    for (i = 0; i != v7; i = i + 1)
    {
      if (*v30 != v9)
      {
        objc_enumerationMutation(&off_1001DBA80);
      }

      v11 = *(*(&v29 + 1) + 8 * i);
      v12 = +[VOTPlanarBrailleManager manager];
      [v12 imageZoom];
      v14 = v13;
      [v11 doubleValue];
      v16 = v15;

      if (v14 >= v16)
      {
        ++v8;
      }
    }

    v7 = [&off_1001DBA80 countByEnumeratingWithState:&v29 objects:v33 count:16];
  }

  while (v7);
  if (a3 == 1)
  {
LABEL_15:
    if ([&off_1001DBA80 count] > v8)
    {
      v17 = v8;
      goto LABEL_17;
    }

LABEL_18:
    v18 = +[VOTOutputManager outputManager];
    v21 = +[VOSOutputEvent BoundaryEncountered];
    [v18 sendEvent:v21];
    goto LABEL_19;
  }

  if (v8 <= 1)
  {
    goto LABEL_18;
  }

  v17 = v8 - 2;
LABEL_17:
  v18 = [&off_1001DBA80 objectAtIndexedSubscript:v17];
  [v18 doubleValue];
  v20 = v19;
  v21 = +[VOTPlanarBrailleManager manager];
  [v21 setImageZoom:v20];
LABEL_19:

  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v23 = sub_1000511CC(off_1001FDDD0, @"braille.zoom.level", 0);
  v24 = +[VOTPlanarBrailleManager manager];
  [v24 imageZoom];
  v26 = [NSString localizedStringWithFormat:v23, v25];
  v27 = [v22 addString:v26];

  [(VOTElementManager *)self sendRequest:v22];
  v28 = +[VOTPlanarBrailleManager manager];
  [v28 refreshPlanarBraille];
}

- (void)_handleRotor2DBrailleEdgeIntensity:(int64_t)a3 withEvent:(id)a4
{
  v29 = 0u;
  v30 = 0u;
  v31 = 0u;
  v32 = 0u;
  v6 = [&off_1001DBA98 countByEnumeratingWithState:&v29 objects:v33 count:16];
  if (!v6)
  {
    if (a3 != 1)
    {
      goto LABEL_18;
    }

    v8 = 0;
    goto LABEL_15;
  }

  v7 = v6;
  v8 = 0;
  v9 = *v30;
  do
  {
    for (i = 0; i != v7; i = i + 1)
    {
      if (*v30 != v9)
      {
        objc_enumerationMutation(&off_1001DBA98);
      }

      v11 = *(*(&v29 + 1) + 8 * i);
      v12 = +[VOTPlanarBrailleManager manager];
      [v12 imageIntensity];
      v14 = v13;
      [v11 doubleValue];
      v16 = v15;

      if (v14 >= v16)
      {
        ++v8;
      }
    }

    v7 = [&off_1001DBA98 countByEnumeratingWithState:&v29 objects:v33 count:16];
  }

  while (v7);
  if (a3 == 1)
  {
LABEL_15:
    if ([&off_1001DBA98 count] > v8)
    {
      v17 = v8;
      goto LABEL_17;
    }

LABEL_18:
    v18 = +[VOTOutputManager outputManager];
    v21 = +[VOSOutputEvent BoundaryEncountered];
    [v18 sendEvent:v21];
    goto LABEL_19;
  }

  if (v8 <= 1)
  {
    goto LABEL_18;
  }

  v17 = v8 - 2;
LABEL_17:
  v18 = [&off_1001DBA98 objectAtIndexedSubscript:v17];
  [v18 doubleValue];
  v20 = v19;
  v21 = +[VOTPlanarBrailleManager manager];
  [v21 setImageIntensity:v20];
LABEL_19:

  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v23 = sub_1000511CC(off_1001FDDD0, @"braille.thickness.level", 0);
  v24 = +[VOTPlanarBrailleManager manager];
  [v24 imageIntensity];
  v26 = [NSString localizedStringWithFormat:v23, v25];
  v27 = [v22 addString:v26];

  [(VOTElementManager *)self sendRequest:v22];
  v28 = +[VOTPlanarBrailleManager manager];
  [v28 refreshPlanarBraille];
}

- (void)_handleRotor2DBraillePanHorizontal:(int64_t)a3 withEvent:(id)a4
{
  [(VOTElementManager *)self _brailleMaxOrigin:a3];
  v7 = v6;
  v8 = +[VOTPlanarBrailleManager manager];
  [v8 imageZoom];
  v10 = 1.0 / v9 * 0.5;

  v11 = +[VOTPlanarBrailleManager manager];
  [v11 imageOrigin];
  v13 = v12;
  v15 = v14;

  if (a3 == 1)
  {
    if (v13 < v7)
    {
      v13 = v10 + v13;
      if (v13 > v7)
      {
        v13 = v7;
      }

      goto LABEL_9;
    }

LABEL_8:
    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];

    goto LABEL_9;
  }

  if (v13 <= 0.0)
  {
    goto LABEL_8;
  }

  v13 = v13 - v10;
  if (v13 < 0.0)
  {
    v13 = 0.0;
  }

LABEL_9:
  v18 = +[VOTPlanarBrailleManager manager];
  [v18 setImageOrigin:{v13, v15}];

  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v19 = AXFormatFloatWithPercentage();
  v20 = [v22 addString:v19];

  [(VOTElementManager *)self sendRequest:v22];
  v21 = +[VOTPlanarBrailleManager manager];
  [v21 refreshPlanarBraille];
}

- (void)_handleRotor2DBraillePanVertical:(int64_t)a3 withEvent:(id)a4
{
  [(VOTElementManager *)self _brailleMaxOrigin:a3];
  v7 = v6;
  v8 = +[VOTPlanarBrailleManager manager];
  [v8 imageZoom];
  v10 = 1.0 / v9 * 0.5;

  v11 = +[VOTPlanarBrailleManager manager];
  [v11 imageOrigin];
  v13 = v12;
  v15 = v14;

  if (a3 == 1)
  {
    if (v15 < v7)
    {
      v15 = v10 + v15;
      if (v15 > v7)
      {
        v15 = v7;
      }

      goto LABEL_9;
    }

LABEL_8:
    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];

    goto LABEL_9;
  }

  if (v15 <= 0.0)
  {
    goto LABEL_8;
  }

  v15 = v15 - v10;
  if (v15 < 0.0)
  {
    v15 = 0.0;
  }

LABEL_9:
  v22 = [objc_allocWithZone(VOTOutputRequest) init];
  v18 = AXFormatFloatWithPercentage();
  v19 = [v22 addString:v18];

  [(VOTElementManager *)self sendRequest:v22];
  v20 = +[VOTPlanarBrailleManager manager];
  [v20 setImageOrigin:{v13, v15}];

  v21 = +[VOTPlanarBrailleManager manager];
  [v21 refreshPlanarBraille];
}

- (void)_handleRotor2DBrailleInvert:(int64_t)a3 withEvent:(id)a4
{
  v5 = [VOTPlanarBrailleManager manager:a3];
  v6 = [v5 imageInvert];
  v7 = +[VOTPlanarBrailleManager manager];
  [v7 setImageInvert:v6 ^ 1];

  v14 = [objc_allocWithZone(VOTOutputRequest) init];
  v8 = off_1001FDDD0;
  v9 = +[VOTPlanarBrailleManager manager];
  if ([v9 imageInvert])
  {
    v10 = @"braille.image.inverted";
  }

  else
  {
    v10 = @"braille.image.uninverted";
  }

  v11 = sub_1000511CC(v8, v10, 0);
  v12 = [v14 addString:v11];

  [(VOTElementManager *)self sendRequest:v14];
  v13 = +[VOTPlanarBrailleManager manager];
  [v13 refreshPlanarBraille];
}

- (id)_localizedStringForCurrentBrailleTextMode
{
  v2 = +[VOTPlanarBrailleManager manager];
  v3 = [v2 mode];

  if ((v3 - 1) > 2)
  {
    v4 = @"braille.text.mode.images";
  }

  else
  {
    v4 = *(&off_1001CA418 + (v3 - 1));
  }

  v5 = off_1001FDDD0;

  return sub_1000511CC(v5, v4, 0);
}

- (void)_handleRotor2DBrailleDisplayMode:(int64_t)a3 withEvent:(id)a4
{
  v6 = [VOTPlanarBrailleManager manager:a3];
  v7 = [v6 mode];

  v8 = v7 - 1;
  if (v7 < 1)
  {
    v8 = 3;
  }

  if (v7 <= 2)
  {
    v9 = v7 + 1;
  }

  else
  {
    v9 = 0;
  }

  if (a3 != 1)
  {
    v9 = v7;
  }

  if (a3 == 2)
  {
    v10 = v8;
  }

  else
  {
    v10 = v9;
  }

  v11 = +[VOTPlanarBrailleManager manager];
  [v11 setMode:v10];

  v12 = +[VOTPlanarBrailleManager manager];
  [v12 avoidImageModeWithDirection:a3];

  v16 = [objc_allocWithZone(VOTOutputRequest) init];
  v13 = [(VOTElementManager *)self _localizedStringForCurrentBrailleTextMode];
  v14 = [v16 addString:v13];

  [(VOTElementManager *)self sendRequest:v16];
  v15 = +[VOTBrailleManager manager];
  [v15 setBrailleElement:self->_currentElement];
}

- (int64_t)_adjustedRotorIndex:(int64_t)a3 inDirection:(int64_t)a4 rotorItems:(id)a5 validationBlock:(id)a6
{
  v9 = a5;
  v10 = a6;
  if ([v9 count])
  {
    if (a4 == 2)
    {
      v11 = -1;
    }

    else
    {
      v11 = 1;
    }

    v12 = a3;
    do
    {
      v13 = v12 + v11;
      v14 = [v9 count];
      if (v13 >= v14)
      {
        v15 = 0;
      }

      else
      {
        v15 = v13;
      }

      if (v13 >= 0)
      {
        v12 = v15;
      }

      else
      {
        v12 = v14 - 1;
      }

      if (v12 == a3 || v10 == 0)
      {
        break;
      }

      v17 = [v9 objectAtIndexedSubscript:v12];
      v18 = v10[2](v10, v17);
    }

    while (!v18);
  }

  else
  {
    v12 = a3;
  }

  return v12;
}

- (void)_handleRotorContinusPathChange:(int64_t)a3 withEvent:(id)a4
{
  v4 = [VOSSettingsHelper sharedInstance:a3];
  v5 = [v4 isSlideToTypeEnabled];

  v6 = +[VOSSettingsHelper sharedInstance];
  [v6 setSlideToTypeEnabled:v5 ^ 1];

  v9 = +[VOTOutputManager outputManager];
  if (v5)
  {
    v7 = @"SlideToTypeOff";
  }

  else
  {
    v7 = @"SlideToTypeOn";
  }

  v8 = sub_1000511CC(off_1001FDDD0, v7, 0);
  [v9 speakSimpleString:v8];
}

- (void)_handleRotorTypingModeMovement:(int64_t)a3 withEvent:(id)a4
{
  v6 = [VOTSharedWorkspace typingMode];
  v7 = a3 != 1;
  v8 = 1;
  if (a3 != 1)
  {
    v8 = 2;
  }

  if (v6 != 2)
  {
    v7 = v8;
  }

  if (v6 == 1)
  {
    v9 = 2 * (a3 == 1);
  }

  else
  {
    v9 = v7;
  }

  [VOTSharedWorkspace setTypingMode:v9];
  v10 = [(VOTElementManager *)self _localizedTypingModeStringForCurrentMode];
  if (v10)
  {
    v12 = v10;
    v11 = +[VOTOutputManager outputManager];
    [v11 speakSimpleString:v12];

    v10 = v12;
  }
}

- (id)_localizedTypingModeStringForCurrentMode
{
  v2 = [VOTSharedWorkspace typingMode];
  if (v2 > 2)
  {
    v3 = 0;
  }

  else
  {
    v3 = sub_1000511CC(off_1001FDDD0, *(&off_1001CA430 + v2), 0);
  }

  return v3;
}

- (id)_fontDisplayNameForFontName:(id)a3
{
  v3 = [UIFont fontWithName:a3 size:10.0];
  v4 = CTFontCopyDisplayName(v3);
  if ([(__CFString *)v4 hasPrefix:@"."])
  {
    v5 = sub_1000511CC(off_1001FDDD0, @"system.font.name", 0);

    v4 = v5;
  }

  return v4;
}

- (id)_orderedMonitoredFontAttributes
{
  if (qword_1001FECD0 != -1)
  {
    sub_10012AB8C();
  }

  v3 = qword_1001FECC8;

  return v3;
}

- (id)_computeChangedFontAttributes:(id)a3 storedAttributes:(id)a4 haveMisspellCheck:(BOOL)a5
{
  v103 = a5;
  v112 = a3;
  v7 = a4;
  v8 = +[NSString string];
  v105 = self;
  v9 = [(VOTElementManager *)self _orderedMonitoredFontAttributes];
  v10 = [v7 count];
  if (v7 && !v10)
  {
    v119[0] = UIAccessibilityTokenListItemLabel;
    v119[1] = AXUIAccessibilityTextAttributeHeadingLevel;
    v119[2] = AXUIAccessibilityTextAttributeCustom;
    v11 = [NSArray arrayWithObjects:v119 count:3];

    v9 = v11;
  }

  firstResponderElement = self->_firstResponderElement;
  if (firstResponderElement)
  {
    v13 = ![(VOTElement *)firstResponderElement shouldAnnounceFontInfo];
  }

  else
  {
    v13 = 0;
  }

  v116 = 0u;
  v117 = 0u;
  v114 = 0u;
  v115 = 0u;
  obj = v9;
  v110 = [obj countByEnumeratingWithState:&v114 objects:v118 count:16];
  if (!v110)
  {
    v14 = v112;
    goto LABEL_131;
  }

  v111 = 0;
  v113 = 0;
  v108 = v7;
  v109 = *v115;
  v106 = AXUIAccessibilityTextAttributeCustom;
  v107 = AXUIAccessibilityTextAttributeHeadingLevel;
  v14 = v112;
  do
  {
    v15 = 0;
    do
    {
      if (*v115 != v109)
      {
        objc_enumerationMutation(obj);
      }

      v16 = *(*(&v114 + 1) + 8 * v15);
      v17 = [v14 objectForKey:{v16, v86}];
      v18 = [v7 objectForKey:v16];
      v19 = v18;
      if (v17)
      {
        v20 = 1;
      }

      else
      {
        v20 = v18 == 0;
      }

      if (!v20 || (v17 ? (v21 = v18 == 0) : (v21 = 0), v21 || v17 && ([v17 isEqual:v18] & 1) == 0))
      {
        if ([v16 isEqualToString:UIAccessibilityTokenMisspelled])
        {
          if ([v17 BOOLValue] && v103)
          {
            v87 = sub_1000511CC(off_1001FDDD0, @"misspelled", 0);
            v102 = @"__AXStringForVariablesSentinel";
            v23 = __AXStringForVariables();

            v8 = v23;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenStyleName, v87, v102}])
        {
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v24 = v17;
            if ([v24 length])
            {
              v88 = v24;
              v102 = @"__AXStringForVariablesSentinel";
              v25 = __AXStringForVariables();

              v8 = v25;
            }
          }
        }

        if (!(v13 & 1 | (([v16 isEqualToString:{UIAccessibilityTokenFontFamily, v88}] & 1) == 0)))
        {
          v26 = [(VOTElementManager *)v105 _fontDisplayNameForFontName:v17];
          if ([v26 length])
          {
            v89 = v26;
            v102 = @"__AXStringForVariablesSentinel";
            v27 = __AXStringForVariables();

            v8 = v27;
          }

          v113 = 1;
        }

        if (!(v13 & 1 | (([v16 isEqualToString:{UIAccessibilityTokenLineSpacing, v89}] & 1) == 0)))
        {
          v28 = objc_allocWithZone(NSString);
          v29 = sub_1000511CC(off_1001FDDD0, @"line.spacing", 0);
          v30 = [v28 initWithFormat:v29, v17];

          v90 = v30;
          v102 = @"__AXStringForVariablesSentinel";
          v31 = __AXStringForVariables();

          v8 = v31;
        }

        if (!(v13 & 1 | (([v16 isEqualToString:{UIAccessibilityTokenFontSize, v90}] & 1) == 0)))
        {
          v32 = objc_allocWithZone(NSString);
          v33 = sub_1000511CC(off_1001FDDD0, @"font.size.format", 0);
          [v17 floatValue];
          v34 = AXFormatFloat();
          v35 = [v32 initWithFormat:v33, v34];

          v91 = v35;
          v102 = @"__AXStringForVariablesSentinel";
          v36 = __AXStringForVariables();

          v8 = v36;
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenForegroundColor, v91}])
        {
          v92 = v17;
          v102 = @"__AXStringForVariablesSentinel";
          v37 = __AXStringForVariables();

          v8 = v37;
        }

        if (([v16 isEqualToString:{UIAccessibilityTokenBold, v92}] & 1) != 0 || !(v111 & 1 | ((objc_msgSend(v16, "isEqualToString:", UIAccessibilityTokenFontName) & 1) == 0)))
        {
          if ([v16 isEqualToString:UIAccessibilityTokenBold])
          {
            v38 = [v17 BOOLValue];
            v39 = [v19 BOOLValue];
            if (v38)
            {
              goto LABEL_48;
            }

LABEL_50:
            v40 = @"bold.not";
            if (v39)
            {
              goto LABEL_51;
            }
          }

          else
          {
            v41 = [v17 isEqualToString:@"Helvetica Neue Medium"];
            v39 = [v19 isEqualToString:@"Helvetica Neue Medium"];
            if ((v41 & 1) == 0)
            {
              goto LABEL_50;
            }

LABEL_48:
            v40 = @"bold";
LABEL_51:
            v93 = sub_1000511CC(off_1001FDDD0, v40, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v42 = __AXStringForVariables();

            v8 = v42;
          }

          if ((v113 | v13))
          {
            v111 = 1;
          }

          else
          {
            v43 = [v14 objectForKey:UIAccessibilityTokenFontFamily];
            v44 = [(VOTElementManager *)v105 _fontDisplayNameForFontName:v43];

            if ([v44 length])
            {
              v93 = v44;
              v102 = @"__AXStringForVariablesSentinel";
              v45 = __AXStringForVariables();

              v8 = v45;
            }

            v111 = 1;
            v113 = 1;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenHighlightedText, v93}])
        {
          if (v17)
          {
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) != 0 && [v17 length])
            {
              v94 = v17;
              v102 = @"__AXStringForVariablesSentinel";
              v46 = __AXStringForVariables();
              goto LABEL_65;
            }

            v47 = off_1001FDDD0;
            v48 = @"highlighted";
          }

          else
          {
            v47 = off_1001FDDD0;
            v48 = @"unhighlighted";
          }

          v94 = sub_1000511CC(v47, v48, 0);
          v102 = @"__AXStringForVariablesSentinel";
          v46 = __AXStringForVariables();

          v8 = v94;
LABEL_65:

          v8 = v46;
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenItalic, v94}])
        {
          v49 = [v17 BOOLValue];
          v50 = @"italic";
          if ((v49 & 1) != 0 || (v51 = [v19 BOOLValue], v50 = @"italic.not", v51))
          {
            v95 = sub_1000511CC(off_1001FDDD0, v50, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v52 = __AXStringForVariables();

            v8 = v52;
          }

          if (((v113 | v13) & 1) == 0)
          {
            v95 = [v14 objectForKey:UIAccessibilityTokenFontFamily];
            v102 = @"__AXStringForVariablesSentinel";
            v53 = __AXStringForVariables();

            v113 = 1;
            v8 = v53;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenUnderline, v95}])
        {
          v54 = [v17 BOOLValue];
          v55 = @"underline";
          if ((v54 & 1) != 0 || (v56 = [v19 BOOLValue], v55 = @"underline.not", v56))
          {
            v96 = sub_1000511CC(off_1001FDDD0, v55, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v57 = __AXStringForVariables();

            v8 = v57;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenStrikethrough, v96}])
        {
          v58 = [v17 BOOLValue];
          v59 = @"strikethrough";
          if ((v58 & 1) != 0 || (v60 = [v19 BOOLValue], v59 = @"strikethrough.not", v60))
          {
            v97 = sub_1000511CC(off_1001FDDD0, v59, 0);
            v102 = @"__AXStringForVariablesSentinel";
            v61 = __AXStringForVariables();

            v8 = v61;
          }
        }

        if (![v16 isEqualToString:{v107, v97}])
        {
          goto LABEL_93;
        }

        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          v62 = [v17 integerValue];
          if (v62 >= 1)
          {
            if (!v19 || [v19 integerValue] != v62)
            {
              v63 = sub_1000511CC(off_1001FDDD0, @"element.header.text", 0);
              v64 = AXFormatInteger();
              v98 = [NSString stringWithFormat:v63, v64];
              v102 = @"__AXStringForVariablesSentinel";
              v65 = __AXStringForVariables();

              v8 = v64;
              v14 = v112;
              goto LABEL_92;
            }

            goto LABEL_93;
          }
        }

        else
        {
          v62 = 0;
        }

        if (!v62 && v17 && (!v19 || [v19 integerValue]))
        {
          v63 = sub_1000511CC(off_1001FDDD0, @"element.header.text.nolevel", 0);
          v98 = v63;
          v102 = @"__AXStringForVariablesSentinel";
          v65 = __AXStringForVariables();
LABEL_92:

          v8 = v65;
        }

LABEL_93:
        if ([v16 isEqualToString:{v106, v98}])
        {
          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v66 = v17;
          }

          else
          {
            v66 = 0;
          }

          v67 = v66;
          v68 = v67;
          if (v67 && ([v67 isEqual:v19] & 1) == 0)
          {
            v99 = [v68 componentsJoinedByString:{@", "}];
            v102 = @"__AXStringForVariablesSentinel";
            v69 = __AXStringForVariables();

            v14 = v112;
            v8 = v69;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenBlockquoteLevel, v99}])
        {
          v70 = [v17 integerValue];
          if (v70 > 0 || !v70 && (!v19 || [v19 integerValue]))
          {
            v71 = sub_1000511CC(off_1001FDDD0, @"blockquote.level", 0);
            v72 = AXFormatInteger();
            v100 = [NSString stringWithFormat:v71, v72];
            v102 = @"__AXStringForVariablesSentinel";
            v73 = __AXStringForVariables();

            v14 = v112;
            v8 = v73;
          }
        }

        if ([v16 isEqualToString:{UIAccessibilityTokenIndentationLevel, v100}])
        {
          v74 = [v17 integerValue];
          if (v74 > 0 || !v74 && (!v19 || [v19 integerValue]))
          {
            v75 = sub_1000511CC(off_1001FDDD0, @"indentation.level", 0);
            v76 = AXFormatInteger();
            v101 = [NSString stringWithFormat:v75, v76];
            v102 = @"__AXStringForVariablesSentinel";
            v77 = __AXStringForVariables();

            v8 = v77;
          }

          v14 = v112;
        }

        v7 = v108;
        if ([v16 isEqualToString:{UIAccessibilityTokenParagraphAlignment, v101}])
        {
          v78 = [v17 integerValue];
          if (v78 <= 4)
          {
            v87 = sub_1000511CC(off_1001FDDD0, *(&off_1001CA448 + v78), 0);
            v102 = @"__AXStringForVariablesSentinel";
            v79 = __AXStringForVariables();

            v14 = v112;
            v8 = v79;
          }
        }
      }

      if (![v16 isEqualToString:{UIAccessibilityTokenListItemLabel, v87}])
      {
        goto LABEL_120;
      }

      if (![v19 length])
      {
        v81 = [v17 length];
        v80 = @"entered.list";
        if (v81)
        {
          goto LABEL_119;
        }
      }

      if ([v19 length] && !objc_msgSend(v17, "length"))
      {
        v80 = @"exited.list";
LABEL_119:
        v86 = sub_1000511CC(off_1001FDDD0, v80, 0);
        v102 = @"__AXStringForVariablesSentinel";
        v82 = __AXStringForVariables();

        v14 = v112;
        v8 = v82;
      }

LABEL_120:

      v15 = v15 + 1;
    }

    while (v110 != v15);
    v83 = [obj countByEnumeratingWithState:&v114 objects:v118 count:16];
    v110 = v83;
  }

  while (v83);
LABEL_131:

  if (![v7 count] || objc_msgSend(v14, "count"))
  {
    [v7 removeAllObjects];
    [v7 addEntriesFromDictionary:v14];
  }

  v84 = [AXAttributedString axAttributedStringWithString:v8, v86];

  return v84;
}

- (void)_handleReadURL:(id)a3
{
  v4 = [(VOTElementManager *)self _currentElement];
  v11 = [v4 url];

  v5 = [v11 absoluteString];
  v6 = [v5 length];

  if (v6)
  {
    v7 = +[VOTOutputRequest createRequest];
    v8 = [v11 absoluteString];
    v9 = [v7 addString:v8];

    [(VOTElementManager *)self sendRequest:v7];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v10];
  }
}

- (void)_handleReadItemHint:(id)a3
{
  v8 = [(VOTElement *)self->_currentElement hint];
  if ([v8 length])
  {
    v4 = [(VOTElement *)self->_currentElement hint];
    v5 = +[VOTOutputRequest createRequest];
    v6 = [(VOTElement *)self->_currentElement language];
    v7 = [v5 addString:v4 withLanguage:v6];

    [(VOTElementManager *)self sendRequest:v5];
  }

  else
  {
    v4 = +[VOTOutputManager outputManager];
    v5 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v5];
  }
}

- (void)_handleOutputLineCount:(id)a3
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXTextEntryTrait])
  {
    v13 = [(VOTElement *)self->_currentElement value];
    v4 = +[NSCharacterSet newlineCharacterSet];
    v5 = [v13 componentsSeparatedByCharactersInSet:v4];
    v6 = [v5 count];

    v7 = +[VOTOutputRequest createRequest];
    v8 = off_1001FDDD0;
    v9 = [VOTSharedWorkspace selectedLanguage];
    v10 = sub_1000511CC(v8, @"line.count", v9);
    v11 = [NSString localizedStringWithFormat:v10, v6];
    v12 = [v7 addString:v11];

    [(VOTElementManager *)self sendRequest:v7];
  }

  else
  {
    v13 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v7];
  }
}

- (void)_handleReadLine:(id)a3
{
  v16 = [(VOTElementManager *)self _currentElement];
  if ([v16 doesHaveTraits:kAXIsEditingTrait])
  {
    location = [v16 selectedTextRange];
    v5 = [v16 value];
  }

  else
  {
    if (self->_elementUnitOutputRange.location == 0x7FFFFFFF)
    {
      location = 0;
    }

    else
    {
      location = self->_elementUnitOutputRange.location;
    }

    v5 = [v16 visibleText];
  }

  v6 = v5;
  v7 = [v5 ax_lineRangeForPosition:location];
  if (v7 == 0x7FFFFFFF || (v9 = v7, v10 = v8, &v7[v8] > [v6 length]))
  {
    v11 = 0;
  }

  else
  {
    v11 = [v6 substringWithRange:{v9, v10}];
  }

  if ([v11 length])
  {
    v12 = +[VOTOutputRequest createRequest];
    v13 = [v16 language];
    v14 = [v12 addString:v11 withLanguage:v13];

    [(VOTElementManager *)self sendRequest:v12];
  }

  else
  {
    v12 = +[VOTOutputManager outputManager];
    v15 = +[VOSOutputEvent BoundaryEncountered];
    [v12 sendEvent:v15];
  }
}

- (id)_phoneticStringForLetter:(id)a3 language:(id)a4
{
  elementManagerThread = self->_elementManagerThread;
  v7 = a4;
  v8 = a3;
  if (([(SCRCThread *)elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v9 = [(VOTElement *)self->_firstResponderElement application];
  v10 = [v9 currentSoftwareKeyboardLanguage];
  v11 = sub_100052450(v8, v7, v10);

  return v11;
}

- (void)_handleReadWord:(id)a3
{
  v4 = [(VOTElementManager *)self _currentElement];
  if ([v4 doesHaveTraits:kAXIsEditingTrait])
  {
    v5 = [v4 value];
    v6 = [v5 wordFromPosition:objc_msgSend(v4 inDirection:{"selectedTextRange"), 1}];
    if (v6 == 0x7FFFFFFFFFFFFFFFLL)
    {
LABEL_10:
      v13 = 0;
      goto LABEL_12;
    }

    location = v6;
    v9 = v7;
    v10 = v7 + v6;
  }

  else
  {
    v11 = [v4 visibleText];
    v5 = v11;
    location = self->_elementUnitOutputRange.location;
    length = self->_elementUnitOutputRange.length;
    if (length)
    {
      v9 = (length + 1);
    }

    else
    {
      v9 = [v11 length];
    }

    if (location == 0x7FFFFFFFFFFFFFFFLL)
    {
      goto LABEL_10;
    }

    v10 = v9 + location;
  }

  if (v10 > [v5 length])
  {
    goto LABEL_10;
  }

  v13 = [v5 substringWithRange:{location, v9}];
LABEL_12:

  if ([v13 length])
  {
    v29 = v4;
    v14 = [v13 length];
    v15 = +[NSMutableString string];
    v16 = v15;
    v17 = self->_readWordCyclingCount % 3;
    if (v17)
    {
      if (v14 >= 1)
      {
        v18 = 0;
        do
        {
          v19 = [v13 characterAtIndex:v18];
          v30 = v19;
          if (v19 == 32)
          {
            v20 = [VOTSharedWorkspace selectedLanguage];
            v21 = sub_100051B24(32, @"UnicodeHex.", @"VOTOutputPunctuation", v20);

            if (!v21)
            {
              v21 = @" ";
            }

            [v16 appendString:v21];
          }

          else if (v17 == 2)
          {
            v22 = [NSString stringWithCharacters:&v30 length:1];
            v23 = [(VOTElementManager *)self _phoneticStringForLetter:v22 language:0];

            if (v23)
            {
              [v16 appendFormat:@"%@", v23];
            }

            else
            {
              [v16 appendFormat:@"%C", v30];
            }
          }

          else if (v17 == 1)
          {
            [v16 appendFormat:@"%C", v19];
          }

          if (v14 != 1)
          {
            [v16 appendString:{@", "}];
          }

          ++v18;
          --v14;
        }

        while (v14);
      }
    }

    else
    {
      [v15 setString:v13];
    }

    v26 = +[VOTOutputRequest createRequest];
    v4 = v29;
    v27 = [v29 language];
    v28 = [v26 addString:v16 withLanguage:v27];

    [(VOTElementManager *)self sendRequest:v26];
    ++self->_readWordCyclingCount;
  }

  else
  {
    v24 = +[VOTOutputManager outputManager];
    v25 = +[VOSOutputEvent BoundaryEncountered];
    [v24 sendEvent:v25];
  }
}

- (void)_handleCursorMovementByTextSegment:(id)a3
{
  v8 = a3;
  v4 = [v8 command];
  if ([v4 isEqualToString:kVOTEventCommandNextTextSegment])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  v6 = [v8 objectForIndex:118];
  v7 = [v6 integerValue];

  if (v7 == 2)
  {
    [(VOTElementManager *)self _handleWordMovement:v8 direction:v5];
  }

  else if (v7 == 3)
  {
    [(VOTElementManager *)self _handleGenericTextSegmentMovement:v8 direction:v5 granulary:3];
  }

  else
  {
    [(VOTElementManager *)self _handleLetterMovement:v8 direction:v5];
  }
}

- (void)_moveCursorForElement:(id)a3 direction:(int64_t)a4 unit:(int64_t)a5
{
  v8 = a3;
  v9 = [v8 textInputElement];
  v10 = v9;
  if (v9)
  {
    v11 = v9;

    v8 = v11;
  }

  v68 = xmmword_10017E110;
  if ((a5 - 2) > 4)
  {
    v12 = 0;
  }

  else
  {
    v12 = qword_10017E408[a5 - 2];
  }

  v13 = +[AXSettings sharedInstance];
  v65 = [v13 voiceOverCursorOutputStyle];

  v14 = [v8 uiElement];
  v15 = [v8 selectedTextRange];
  v17 = [v14 nextCursorRangeInDirection:a4 != 1 unit:v12 outputRange:&v68 currentCursorRange:v15 outputStyleSpeakToRight:{v16, v65 == 2}];
  v19 = v18;

  v20 = [(VOTElementManager *)self _characterRangeWithFaultTolerance:v17 forward:a4 == 1 element:v8];
  if (v20 == 0x7FFFFFFF)
  {
    v21 = v19;
  }

  else
  {
    v21 = 0;
  }

  range = v21;
  if (v20 == 0x7FFFFFFF)
  {
    v22 = v17;
  }

  else
  {
    v22 = v20;
  }

  v23 = +[AXSubsystemVoiceOver sharedInstance];
  v24 = [v23 ignoreLogging];

  if ((v24 & 1) == 0)
  {
    v25 = +[AXSubsystemVoiceOver identifier];
    v26 = AXLoggerForFacility();

    v27 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v26, v27))
    {
      v28 = AXColorizeFormatLog();
      v71.location = v22;
      v71.length = range;
      v64 = NSStringFromRange(v71);
      v29 = _AXStringForArgs();

      if (os_log_type_enabled(v26, v27))
      {
        *buf = 138543362;
        v70 = v29;
        _os_log_impl(&_mh_execute_header, v26, v27, "%{public}@", buf, 0xCu);
      }
    }
  }

  if (a5 == 2)
  {
    [(NSMutableDictionary *)self->_lastSeenFontProperties removeObjectForKey:UIAccessibilityTokenMisspelled];
  }

  if (a5 == 1 || v68.location == 0x7FFFFFFF)
  {
    width = CGRectZero.size.width;
    height = CGRectZero.size.height;
    x = CGRectZero.origin.x;
    y = CGRectZero.origin.y;
    self->_highlightedCharacterRange = xmmword_10017E110;
    v44 = width;
    v42 = y;
    v40 = CGRectZero.origin.x;
  }

  else
  {
    [v8 boundsForRange:v68];
    x = v30;
    y = v32;
    width = v34;
    v37 = v36;
    v38 = +[VOTElement systemWideElement];
    [v38 convertRect:objc_msgSend(v8 fromContextId:{"windowContextId"), x, y, width, v37}];
    v40 = v39;
    v42 = v41;
    v44 = v43;
    height = v45;

    self->_highlightedCharacterRange = v68;
  }

  if (v22 == 0x7FFFFFFF)
  {
    v47 = +[VOTOutputManager outputManager];
    v48 = +[VOSOutputEvent BoundaryEncountered];
    [v47 sendEvent:v48];
  }

  else
  {
    v66 = v10;
    v49 = +[AXSubsystemVoiceOver sharedInstance];
    v50 = [v49 ignoreLogging];

    if ((v50 & 1) == 0)
    {
      v51 = +[AXSubsystemVoiceOver identifier];
      v52 = AXLoggerForFacility();

      v53 = AXOSLogLevelFromAXLogLevel();
      if (os_log_type_enabled(v52, v53))
      {
        v54 = AXColorizeFormatLog();
        v72.location = v22;
        v72.length = range;
        v64 = NSStringFromRange(v72);
        v55 = _AXStringForArgs();

        if (os_log_type_enabled(v52, v53))
        {
          *buf = 138543362;
          v70 = v55;
          _os_log_impl(&_mh_execute_header, v52, v53, "%{public}@", buf, 0xCu);
        }
      }
    }

    [(VOTElementManager *)self _setSelectedTextRange:v22 onElement:range refreshBraille:v8 isVoiceOverSelectionMovement:1, 1, v64];
    v56 = +[VOTOutputManager outputManager];
    v57 = +[VOSOutputEvent InsertionPointDidMove];
    [v56 sendEvent:v57];

    if (a4 == 1 && v65 == 2)
    {
      v58 = [v8 value];
      v59 = [v58 length];

      if (v22 == v59)
      {
        v60 = sub_1000511CC(off_1001FDDD0, @"cursor.blank", 0);
        v61 = [VOTSharedWorkspace selectedLanguage];
        v62 = sub_1000095FC(v60, 0, v61);
      }
    }

    v74.origin.x = CGRectZero.origin.x;
    v74.origin.y = CGRectZero.origin.y;
    v74.size.width = CGRectZero.size.width;
    v74.size.height = CGRectZero.size.height;
    v73.origin.x = v40;
    v73.origin.y = v42;
    v73.size.width = v44;
    v73.size.height = height;
    if (!CGRectEqualToRect(v73, v74))
    {
      v63 = +[VOTDisplayManager displayManager];
      [v63 setCursorFrame:{v40, v42, v44, height}];

      self->_textRangeBeingDisplayed = 1;
      [v8 scrollRectToVisible:0 withCompletion:{x, y, width, 10.0}];
    }

    self->_cursorBorderHitCount = 0;
    v10 = v66;
  }
}

- (void)_handleCharacterMovement:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandNextCharacter])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self setInTextSelection:0];
  [(VOTElementManager *)self _handleLetterMovement:v6 direction:v5];
}

- (void)_handleWordMovement:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandNextWord])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self setInTextSelection:0];
  [(VOTElementManager *)self _handleWordMovement:v6 direction:v5];
}

- (void)_handleLetterMovement:(id)a3 direction:(int64_t)a4
{
  obj = [(VOTElementManager *)self _currentElement];
  if ([obj isEqual:self->_firstResponderElement])
  {
    objc_storeStrong(&self->_firstResponderElement, obj);
  }

  self->_lastCharacterRotorMovement = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self setInTextSelection:0];
  if ([obj isReadingContent])
  {
    [(VOTElementManager *)self _handleBookContentMovement:obj direction:a4 unit:1 generateOutput:1];
    goto LABEL_13;
  }

  if ([obj doesHaveTraits:kAXKeyboardKeyTrait] && (objc_msgSend(obj, "doesHaveTraits:", kAXAutoCorrectCandidateTrait) & 1) == 0)
  {
    v6 = [(VOTElement *)self->_lastApplication firstResponderElement];
  }

  else
  {
    if (![obj doesHaveTraits:kAXIsEditingTrait])
    {
      goto LABEL_12;
    }

    v6 = obj;
  }

  v7 = v6;
  if (v6)
  {
    [(VOTElementManager *)self _moveCursorForElement:v6 direction:a4 unit:1];

    goto LABEL_13;
  }

LABEL_12:
  [(VOTElementManager *)self _outputNextTextSegmentUnit:1 direction:a4];
LABEL_13:
}

- (void)_handleWordMovement:(id)a3 direction:(int64_t)a4
{
  obj = [(VOTElementManager *)self _currentElement];
  if ([obj isEqual:self->_firstResponderElement])
  {
    objc_storeStrong(&self->_firstResponderElement, obj);
  }

  [(VOTElementManager *)self setInTextSelection:0];
  self->_lastWordRotorMovement = CFAbsoluteTimeGetCurrent();
  v6 = [obj doesHaveTraits:kAXKeyboardKeyTrait];
  if ([obj isReadingContent])
  {
    [(VOTElementManager *)self _handleBookContentMovement:obj direction:a4 unit:2 generateOutput:1];
  }

  else if (([obj doesHaveTraits:kAXIsEditingTrait] | v6))
  {
    if (v6)
    {
      v7 = [(VOTElement *)self->_lastApplication firstResponderElement];

      v8 = v7;
    }

    else
    {
      v8 = obj;
    }

    obj = v8;
    [(VOTElementManager *)self _moveCursorForElement:v8 direction:a4 unit:2];
  }

  else
  {
    [(VOTElementManager *)self _outputNextTextSegmentUnit:2 direction:a4];
  }
}

- (void)_finishHandlingLineMovementInWeb:(id)a3 direction:(id)a4 withCurrentElement:(id)a5 markerArray:(id)a6 textObjects:(id)a7 existingRequest:(id)a8
{
  v14 = a3;
  v15 = a5;
  v16 = a6;
  v17 = a7;
  v18 = a8;
  v19 = [a4 integerValue];
  v20 = [(VOTElementManager *)self _currentElement];

  if (v20 == v15)
  {
    [v15 textMarkerFrame:v16];
    v24 = v23;
    v26 = v25;
    if (v21 >= 4.0)
    {
      v27 = v21;
    }

    else
    {
      v27 = 4.0;
    }

    if (v22 >= 4.0)
    {
      v28 = v22;
    }

    else
    {
      v28 = 4.0;
    }

    v29 = +[VOTElement systemWideElement];
    [v29 convertRect:objc_msgSend(v15 fromContextId:{"windowContextId"), v24, v26, v27, v28}];
    self->_lineFrame.origin.x = v30;
    self->_lineFrame.origin.y = v31;
    self->_lineFrame.size.width = v32;
    self->_lineFrame.size.height = v33;

    v34 = +[VOTDisplayManager displayManager];
    [v34 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

    self->_textRangeBeingDisplayed = 1;
    v35 = VOTLogElement();
    if (os_log_type_enabled(v35, OS_LOG_TYPE_DEBUG))
    {
      v36 = NSStringFromCGRect(self->_lineFrame);
      v37 = 138543618;
      v38 = v36;
      v39 = 2114;
      v40 = v17;
      _os_log_debug_impl(&_mh_execute_header, v35, OS_LOG_TYPE_DEBUG, "got data %{public}@ == %{public}@", &v37, 0x16u);
    }

    if ([(NSArray *)self->_lineArray count])
    {
      [(VOTElementManager *)self _handleLineMovementInWeb:v14 direction:v19 existingRequest:v18];
    }
  }
}

- (void)_handleLineMovementInWeb:(id)a3 direction:(int64_t)a4 existingRequest:(id)a5
{
  v7 = a3;
  v8 = [(VOTElementManager *)self _currentElement];
  p_lineArray = &self->_lineArray;
  lineArray = self->_lineArray;
  if (lineArray)
  {
    lineArrayPosition = self->_lineArrayPosition;
    if (lineArrayPosition < [(NSArray *)lineArray count])
    {
      if (a5)
      {
        v12 = a5;
      }

      else
      {
        v12 = objc_alloc_init(VOTOutputRequest);
      }

      v16 = v12;
      v22 = [(NSArray *)self->_lineArray objectAtIndex:self->_lineArrayPosition];
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
        objc_opt_class();
        v23 = v22;
        if (objc_opt_isKindOfClass())
        {
          v29 = +[NSCharacterSet whitespaceCharacterSet];
          v30 = [v22 stringByTrimmingCharactersInSet:v29];

          v31 = VOTLogElement();
          if (os_log_type_enabled(v31, OS_LOG_TYPE_DEBUG))
          {
            sub_10012ABA0();
          }

          if (![(__CFString *)v30 length])
          {
            if (a4 == 1)
            {
              v84 = 1;
            }

            else
            {
              v84 = -1;
            }

            self->_lineArrayPosition += v84;
            [VOTElementManager _handleLineMovementInWeb:"_handleLineMovementInWeb:direction:existingRequest:" direction:v7 existingRequest:?];

            goto LABEL_106;
          }

          v32 = v7;
          v33 = +[VOTDisplayManager displayManager];
          [v33 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

          self->_textRangeBeingDisplayed = 1;
          v34 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
          v35 = [(__CFString *)v30 stringByTrimmingCharactersInSet:v34];
          v36 = [v35 length];

          if (!v36)
          {

            v30 = @"\n";
          }

          v37 = [(VOTOutputRequest *)v16 elementHeadersForOutput];

          v7 = v32;
          if (v37)
          {
            [(VOTElement *)self->_currentElement applyHeaderElementsToRequest:v16];
          }

          v38 = [(VOTOutputRequest *)v16 addString:v30];
          v39 = [(VOTOutputRequest *)v16 lastAction];
          [v39 setPerformPunctuationTranslation:1];

          v40 = [(VOTOutputRequest *)v16 lastAction];
          [v40 setReplaceCommas:1];
        }

        goto LABEL_69;
      }

      [(VOTElementManager *)self _addDescription:v22 toRequest:v16 withOptions:1];
      [(VOTElementManager *)self _setCurrentElement:v22];
      v104[0] = _NSConcreteStackBlock;
      v104[1] = 3221225472;
      v104[2] = sub_100076440;
      v104[3] = &unk_1001C7778;
      v104[4] = self;
      v23 = v22;
      v24 = v22;
      v105 = v24;
      [v24 scrollToElementForDirectional:1 withCompletion:v104];
      v25 = [v24 textMarkerRange];
      v26 = v25;
      v27 = self->_lineArrayPosition;
      if (a4 == 1)
      {
        if (v27 != -[NSArray count](*p_lineArray, "count") - 1 || [v26 count] <= 1)
        {
          goto LABEL_68;
        }

        v28 = 1;
      }

      else
      {
        if (v27 || ![v25 count])
        {
          goto LABEL_68;
        }

        v28 = 0;
      }

      v58 = [v26 objectAtIndex:v28];
      textMarker = self->_textMarker;
      self->_textMarker = v58;

LABEL_68:
LABEL_69:
      v60 = VOTLogElement();
      if (os_log_type_enabled(v60, OS_LOG_TYPE_DEBUG))
      {
        sub_10012AC14();
      }

      [(VOTElementManager *)self sendRequest:v16];
      v61 = a4;
      if (a4 != 1)
      {
        v61 = -1;
      }

      self->_lineArrayPosition += v61;
      goto LABEL_106;
    }

    v13 = *p_lineArray;
  }

  else
  {
    v13 = 0;
  }

  *p_lineArray = 0;
  self->_lineArrayPosition = 0;

  v14 = kAXIsEditingTrait;
  if ([v8 doesHaveTraits:kAXIsEditingTrait])
  {
    v15 = v8;
  }

  else
  {
    v15 = [(VOTElementManager *)self webEditableAncestor:v8];
  }

  v16 = v15;
  v17 = [v8 textMarkerRange];
  location = &self->_lineArray;
  v92 = a5;
  v93 = v17;
  v90 = v14;
  if (self->_textMarker)
  {
    v18 = VOTLogElement();
    if (os_log_type_enabled(v18, OS_LOG_TYPE_DEBUG))
    {
      sub_10012ACAC();
    }

    v19 = self->_textMarker;
LABEL_40:
    v94 = v16;
    p_super = &v19->super;
    v46 = v7;
    if ([0 count])
    {
      v47 = 0;
      v48 = 0;
      v49 = 0;
      goto LABEL_77;
    }

    v50 = 0;
    v48 = 0;
    v47 = 0;
    while (1)
    {
      v51 = VOTLogElement();
      if (os_log_type_enabled(v51, OS_LOG_TYPE_DEBUG))
      {
        *buf = 138478083;
        v107 = v8;
        v108 = 2113;
        v109 = p_super;
        _os_log_debug_impl(&_mh_execute_header, v51, OS_LOG_TYPE_DEBUG, "start: %{private}@ -- %{private}@", buf, 0x16u);
      }

      v52 = v48;
      v48 = +[NSMutableArray array];

      if (a4 == 1)
      {
        v53 = [v8 textLineEndMarker:p_super];

        if (v53)
        {
          [v48 addObject:p_super];
          v54 = v48;
          v55 = v53;
LABEL_50:
          [v54 addObject:v55];
          v47 = v53;
          goto LABEL_52;
        }
      }

      else
      {
        v53 = [v8 textLineStartMarker:p_super];

        if (v53)
        {
          [v48 addObject:v53];
          v54 = v48;
          v55 = p_super;
          goto LABEL_50;
        }
      }

      v47 = 0;
LABEL_52:
      if ([v48 count] != 2)
      {
        goto LABEL_76;
      }

      if ([v52 isEqual:v48])
      {

        v48 = 0;
        goto LABEL_76;
      }

      v49 = [v8 textMarkerArrayOfText:v48];

      v56 = VOTLogElement();
      if (os_log_type_enabled(v56, OS_LOG_TYPE_DEBUG))
      {
        *buf = 138478083;
        v107 = v48;
        v108 = 2113;
        v109 = v49;
        _os_log_debug_impl(&_mh_execute_header, v56, OS_LOG_TYPE_DEBUG, "markers: %{private}@ got textObjs: %{private}@", buf, 0x16u);
      }

      if (!v49)
      {
        v50 = 0;
LABEL_76:

        v49 = v50;
LABEL_77:
        if ([v48 count] == 2)
        {
          objc_storeStrong(location, v49);
          v7 = v46;
          if (a4 == 1)
          {
            v62 = 0;
          }

          else
          {
            v62 = [*location count] - 1;
          }

          self->_lineArrayPosition = v62;
          objc_storeStrong(&self->_textMarker, v47);
          v66 = [v48 objectAtIndex:0];
          [(_VOTTextMarkerRange *)self->_textMarkerRange setStartMarker:v66];

          v67 = [v48 objectAtIndex:1];
          [(_VOTTextMarkerRange *)self->_textMarkerRange setEndMarker:v67];

          v68 = [(_VOTTextMarkerRange *)self->_textMarkerRange startMarker];
          v69 = [v8 rangeForTextMarker:v68];

          v70 = [v8 textMarkerRange];
          v65 = v70;
          if (v69 != 0x7FFFFFFF)
          {
            v71 = [v70 firstObject];
            v72 = [v8 rangeForTextMarker:v71];

            self->_elementUnitIndex = v69 - v72;
          }

          v73 = [v8 elementForTextMarker:v47];
          v74 = VOTLogElement();
          if (os_log_type_enabled(v74, OS_LOG_TYPE_DEBUG))
          {
            sub_10012ADD0();
          }

          if (!v73 || ([v73 isEqual:v8] & 1) != 0 || (objc_msgSend(v73, "accessibleAncestor"), v75 = objc_claimAutoreleasedReturnValue(), v76 = objc_msgSend(v75, "isEqual:", v8), v75, (v76 & 1) != 0))
          {
            v77 = [NSNumber numberWithInteger:a4];
            [(VOTElementManager *)self _finishHandlingLineMovementInWeb:v7 direction:v77 withCurrentElement:v8 markerArray:v48 textObjects:v49 existingRequest:0];
          }

          else
          {
            [(VOTElementManager *)self _setCurrentElement:v73 isProtectedApp:0 shouldResetTextSelection:1 shouldResetCharacterRange:1 ignoreIsAccessibilityElementCheck:1];
            v81 = +[VOTOutputRequest createRequest];
            [(VOTElementManager *)self _prepareElementOutputHeaders:v73 currentElement:v8 request:v81];
            objc_storeStrong(location, v49);
            v97[0] = _NSConcreteStackBlock;
            v97[1] = 3221225472;
            v97[2] = sub_100076478;
            v97[3] = &unk_1001C9A38;
            v97[4] = self;
            v98 = v7;
            v103 = a4;
            v99 = v73;
            v100 = v48;
            v101 = v49;
            v102 = v81;
            v77 = v81;
            [v99 scrollToElementForDirectional:1 withCompletion:v97];
          }

          v16 = v94;
          if (v94)
          {
            if ([v8 doesHaveTraits:v90])
            {
              if (([(VOTOutputRequest *)v94 isEqual:v8]& 1) != 0)
              {
LABEL_97:
                if (a4 == 1)
                {
                  [v48 lastObject];
                }

                else
                {
                  [v48 firstObject];
                }
                v80 = ;
                v16 = v94;
                [(VOTOutputRequest *)v94 setSelectionToTextMarker:v80, v87, v88, v89];

                goto LABEL_101;
              }
            }

            else
            {
              v78 = [(VOTElementManager *)self webEditableAncestor:v8];
              v79 = [(VOTOutputRequest *)v94 isEqual:v78];

              if (v79)
              {
                goto LABEL_97;
              }
            }

            [(VOTElementManager *)self webEditableAncestor:v8];
            v89 = v88 = v8;
            v87 = v94;
            _AXAssert();

            goto LABEL_97;
          }

LABEL_101:
        }

        else
        {
          v63 = +[VOTOutputManager outputManager];
          v64 = +[VOSOutputEvent BoundaryEncountered];
          [v63 sendEvent:v64];

          v65 = VOTLogElement();
          v7 = v46;
          if (os_log_type_enabled(v65, OS_LOG_TYPE_DEBUG))
          {
            sub_10012AD60();
          }
        }

LABEL_103:
        a5 = v92;
        goto LABEL_104;
      }

      if (![v49 count])
      {
        if (a4 == 1)
        {
          [v8 textNextMarker:p_super];
        }

        else
        {
          [v8 textPreviousMarker:p_super];
        }
        v57 = ;

        p_super = v57;
      }

      v50 = v49;
      if ([v49 count])
      {
        goto LABEL_77;
      }
    }
  }

  if (v16)
  {
    v20 = [(VOTOutputRequest *)v16 textMarkerRangeForSelection];
    v21 = v20;
    if (a4 == 1)
    {
      [v20 lastObject];
    }

    else
    {
      [v20 firstObject];
    }
    v44 = ;
    v45 = VOTLogElement();
    if (os_log_type_enabled(v45, OS_LOG_TYPE_DEBUG))
    {
      sub_10012ACE8();
    }

    v19 = v44;
    goto LABEL_40;
  }

  v41 = v17;
  if ([v17 count])
  {
    v42 = [v41 objectAtIndex:0];
    v43 = VOTLogElement();
    if (os_log_type_enabled(v43, OS_LOG_TYPE_DEBUG))
    {
      sub_10012AD24();
    }

    v19 = v42;
    goto LABEL_40;
  }

  v82 = +[AXSubsystemVoiceOver sharedInstance];
  v83 = [v82 ignoreLogging];

  if (v83)
  {
    v23 = 0;
  }

  else
  {
    v85 = +[AXSubsystemVoiceOver identifier];
    v49 = AXLoggerForFacility();

    v86 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v49, v86))
    {
      v47 = AXColorizeFormatLog();
      v48 = _AXStringForArgs();
      if (os_log_type_enabled(v49, v86))
      {
        *buf = 138543362;
        v107 = v48;
        _os_log_impl(&_mh_execute_header, v49, v86, "%{public}@", buf, 0xCu);
      }

      p_super = 0;
      goto LABEL_103;
    }

    p_super = 0;
LABEL_104:

    v23 = p_super;
  }

LABEL_106:
}

- (void)_handleLineMovement:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandNextLine])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleGenericTextSegmentMovement:v6 direction:v5 granulary:3];
}

- (void)_handleSentenceMovement:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandNextSentence])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleGenericTextSegmentMovement:v6 direction:v5 granulary:5];
}

- (void)_handleParagraphMovement:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandNextParagraph])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleGenericTextSegmentMovement:v6 direction:v5 granulary:6];
}

- (void)_handleAdjustTextSelectionSegmentType:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandNextTextSegmentType])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleRotorTextSelectionMovement:v6 direction:v5];
}

- (void)_handleRotorTextSelectionMovement:(id)a3 direction:(int64_t)a4
{
  self->_inTextProcessingRotorMode = 1;
  v6 = [(VOTElementManager *)self textSelectionMovementManager];
  v7 = v6;
  if (a4 == 1)
  {
    [v6 nextSegment];
  }

  else
  {
    [v6 previousSegment];
  }

  v8 = [(VOTElementManager *)self textSelectionMovementManager];
  v11 = [v8 localizedSegmentNameForSelection];

  v9 = [VOTSharedWorkspace selectedLanguage];
  v10 = sub_1000095FC(v11, 0, v9);
}

- (void)_handleTextDocumentMovement:(id)a3
{
  v11 = a3;
  v4 = [(VOTElementManager *)self _currentElement];
  if ([v4 doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    v5 = [v11 command];
    v6 = [v5 isEqualToString:kVOTEventCommandDocumentTop];

    if (v6)
    {
      v7 = 0;
    }

    else
    {
      v10 = [v4 value];
      v7 = [v10 length];
    }

    [v4 setSelectedTextRange:v7 refreshBraille:{0, 1}];
  }

  else
  {
    v8 = +[VOTOutputManager outputManager];
    v9 = +[VOSOutputEvent BoundaryEncountered];
    [v8 sendEvent:v9];
  }
}

- (void)_handleTextWordMovement:(id)a3
{
  v4 = [a3 command];
  v5 = [v4 isEqualToString:kVOTEventCommandFirstWord];

  v21 = [(VOTElementManager *)self _currentElement];
  if ([v21 doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    v6 = [v21 value];
    v7 = v6;
    if (v5)
    {
      v8 = 0;
      v9 = 1;
    }

    else
    {
      v8 = [v6 length];
      v9 = 2;
    }

    [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:{objc_msgSend(VOTSharedWorkspace, "suppressSelectionChangeNotificationCount") + 1}];
    [(VOTElementManager *)self _setSelectedTextRange:v8 onElement:0 refreshBraille:v21, 1];
    v11 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent InsertionPointDidMove];
    [v11 sendEvent:v12];

    v13 = [v7 wordFromPosition:v8 inDirection:v9];
    if (v13 == 0x7FFFFFFFFFFFFFFFLL || (v15 = v13, v16 = v14, &v13[v14] > [v7 length]))
    {
      v10 = 0;
    }

    else
    {
      v10 = [v7 substringWithRange:{v15, v16}];
    }

    if ([v10 length])
    {
      v17 = +[VOTOutputRequest createRequest];
      v18 = [v21 language];
      v19 = [v17 addString:v10 withLanguage:v18];

      [(VOTElementManager *)self sendRequest:v17];
    }

    else
    {
      v17 = +[VOTOutputManager outputManager];
      v20 = +[VOSOutputEvent BoundaryEncountered];
      [v17 sendEvent:v20];
    }
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v10];
  }
}

- (void)_handleGenericTextSegmentMovement:(id)a3 direction:(int64_t)a4 granulary:(int64_t)a5
{
  v10 = a3;
  v8 = [(VOTElementManager *)self _currentElement];
  if ([v8 isEqual:self->_firstResponderElement])
  {
    objc_storeStrong(&self->_firstResponderElement, v8);
  }

  [(VOTElementManager *)self setInTextSelection:0];
  if ([v8 doesHaveTraits:kAXWebContentTrait])
  {
    if (a5 == 3)
    {
      [(VOTElementManager *)self _handleLineMovementInWeb:v10 direction:a4 existingRequest:0];
      goto LABEL_14;
    }
  }

  else if ([v8 isReadingContent])
  {
    [(VOTElementManager *)self _handleBookContentMovement:v8 direction:a4 unit:a5 generateOutput:1];
    goto LABEL_14;
  }

  if ([v8 doesHaveTraits:kAXKeyboardKeyTrait])
  {
    v9 = [(VOTElement *)self->_lastApplication firstResponderElement];

    v8 = v9;
  }

  if ([v8 doesHaveTraits:kAXTextEntryTrait] && objc_msgSend(v8, "doesHaveTraits:", kAXIsEditingTrait))
  {
    [(VOTElementManager *)self _moveCursorForElement:v8 direction:a4 unit:a5];
  }

  else
  {
    [(VOTElementManager *)self _outputNextTextSegmentUnit:a5 direction:a4];
  }

LABEL_14:
}

- (void)_handleRowMovement:(id)a3 direction:(int64_t)a4
{
  v6 = [(VOTElementManager *)self _currentElement];
  v7 = [v6 rowRange];
  v9 = v8;
  v10 = [v6 columnRange];
  [(VOTElementManager *)self setInTextSelection:0];
  v11 = &v7[v9];
  if (a4 != 1)
  {
    v11 = v7;
  }

  if (a4 == 2)
  {
    v12 = v7 - 1;
  }

  else
  {
    v12 = v11;
  }

  v13 = [v6 elementAtRow:v12 andColumn:v10];
  if ([v13 isEqual:v6] || !v13)
  {
    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];
  }

  else
  {
    v14 = [objc_allocWithZone(VOTOutputRequest) init];
    [(VOTElementManager *)self _prepareElementOutputHeaders:v13 currentElement:v6 request:v14];
    [(VOTElementManager *)self _addDescription:v13 toRequest:v14 withOptions:2097154];
    [(VOTElementManager *)self sendRequest:v14];
    [(VOTElementManager *)self _setCurrentElement:v13];
    v15 = sub_100052438(a4);
    v18[0] = _NSConcreteStackBlock;
    v18[1] = 3221225472;
    v18[2] = sub_100076EF4;
    v18[3] = &unk_1001C7778;
    v18[4] = self;
    v19 = v13;
    [v19 scrollToElementForDirectional:v15 withCompletion:v18];
  }
}

- (id)_retrieveCurrentCharacterFromEditableElement
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXIsEditingTrait]&& self->_elementSelectionRangeBufferInternal.location != 0x7FFFFFFF)
  {
    v4 = [(VOTElement *)self->_currentElement value];
    location = self->_elementSelectionRangeBufferInternal.location;
    if (location >= [v4 length])
    {
      v3 = 0;
    }

    else
    {
      v6 = +[TTSEmojiUtilities emojiRangeFromString:withSearchRange:](TTSEmojiUtilities, "emojiRangeFromString:withSearchRange:", v4, self->_elementSelectionRangeBufferInternal.location, [v4 length] - self->_elementSelectionRangeBufferInternal.location);
      if (v6 != self->_elementSelectionRangeBufferInternal.location)
      {
        v6 = [v4 rangeOfComposedCharacterSequenceAtIndex:?];
      }

      v3 = [v4 substringWithRange:{v6, v7}];
    }
  }

  else
  {
    v3 = 0;
  }

  return v3;
}

- (void)_handleOutputCharacter:(id)a3
{
  v6 = [(VOTElementManager *)self _retrieveCurrentCharacterFromEditableElement];
  if ([v6 length])
  {
    v3 = +[VOTOutputRequest createRequest];
    [v3 setGeneratesBraille:1];
    [v3 setBrailleType:2];
    v4 = [v3 addString:v6];
    [v3 send];
  }

  else
  {
    v3 = +[VOTOutputManager outputManager];
    v5 = +[VOSOutputEvent BoundaryEncountered];
    [v3 sendEvent:v5];
  }
}

- (void)_handleOutputColumnOrRowContents:(id)a3 row:(BOOL)a4
{
  v4 = a4;
  v19 = a3;
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    v6 = [(VOTElement *)self->_currentElement columnRange];
    v7 = [(VOTElement *)self->_currentElement columnCount];
    v8 = [(VOTElement *)self->_currentElement rowRange];
    v9 = [(VOTElement *)self->_currentElement rowCount];
    v10 = +[VOTOutputRequest createRequest];
    v20 = v6;
    v11 = v8;
    if (v4)
    {
      v8 = v6;
      v12 = v7;
    }

    else
    {
      v12 = v9;
    }

    if (v8 >= v12)
    {
      v13 = 0;
    }

    else
    {
      v13 = 0;
      if (v4)
      {
        v14 = 402669568;
      }

      else
      {
        v14 = 335560704;
      }

      do
      {
        if (v4)
        {
          v15 = v11;
          v16 = v8;
        }

        else
        {
          v15 = v8;
          v16 = v20;
        }

        v17 = [(VOTElement *)self->_currentElement elementAtRow:v15 andColumn:v16];
        if (([v17 isEqual:v13] & 1) == 0)
        {
          [v17 addTextualInformationToRequest:v10 options:v14 dataPackage:0];
          v18 = v17;

          v13 = v18;
        }

        ++v8;
      }

      while (v12 != v8);
    }

    [v10 setGeneratesBraille:1];
    [v10 setBrailleType:2];
    [v10 send];
  }

  else
  {
    v10 = +[VOTOutputManager outputManager];
    v13 = +[VOSOutputEvent BoundaryEncountered];
    [v10 sendEvent:v13];
  }
}

- (void)_handleOutputCellRowColumnInfo:(id)a3
{
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    v7 = +[VOTOutputRequest createRequest];
    currentElement = self->_currentElement;
    v5 = [VOTSharedWorkspace selectedLanguage];
    [(VOTElement *)currentElement announceTableInfo:v7 options:0 language:v5];

    [v7 setGeneratesBraille:1];
    [v7 setBrailleType:2];
    [v7 send];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v6 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v6];
  }
}

- (void)_handleOutputTableRowColumnInfo:(id)a3
{
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    v7 = +[VOTOutputRequest createRequest];
    currentElement = self->_currentElement;
    v5 = [VOTSharedWorkspace selectedLanguage];
    [(VOTElement *)currentElement applyTableDimension:v7 language:v5];

    [v7 setGeneratesBraille:1];
    [v7 setBrailleType:2];
    [v7 send];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v6 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v6];
  }
}

- (void)_handleOutputColumnOrRowHeader:(id)a3 row:(BOOL)a4
{
  v4 = a4;
  if ([(VOTElement *)self->_currentElement containedIn:2])
  {
    currentElement = self->_currentElement;
    if (v4)
    {
      [(VOTElement *)currentElement headerElementsForRow:[(VOTElement *)currentElement rowRange]];
    }

    else
    {
      [(VOTElement *)currentElement headerElementsForColumn:[(VOTElement *)currentElement columnRange]];
    }
    v8 = ;
    v9 = +[VOTOutputRequest createRequest];
    v16 = 0u;
    v17 = 0u;
    v18 = 0u;
    v19 = 0u;
    v10 = v8;
    v11 = [v10 countByEnumeratingWithState:&v16 objects:v20 count:16];
    if (v11)
    {
      v12 = v11;
      v13 = *v17;
      do
      {
        for (i = 0; i != v12; i = i + 1)
        {
          if (*v17 != v13)
          {
            objc_enumerationMutation(v10);
          }

          [*(*(&v16 + 1) + 8 * i) addTextualInformationToRequest:v9 options:268451840 dataPackage:0];
        }

        v12 = [v10 countByEnumeratingWithState:&v16 objects:v20 count:16];
      }

      while (v12);
    }

    [v9 setGeneratesBraille:1];
    [v9 setBrailleType:2];
    [v9 send];
  }

  else
  {
    v15 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [v15 sendEvent:v7];
  }
}

- (void)_handleOutputCharacterPhonetically:(id)a3
{
  v9 = [(VOTElementManager *)self _retrieveCurrentCharacterFromEditableElement];
  if ([v9 length])
  {
    v4 = [(VOTElement *)self->_currentElement language];
    v5 = [(VOTElementManager *)self _phoneticStringForLetter:v9 language:v4];

    if (![v5 length])
    {
      v6 = v9;

      v5 = v6;
    }

    v7 = +[VOTOutputRequest createRequest];
    [v7 setGeneratesBraille:1];
    [v7 setBrailleType:2];
    v8 = [v7 addString:v5];
    [v7 send];
  }

  else
  {
    v5 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [v5 sendEvent:v7];
  }
}

- (void)_outputNextTextSegmentUnit:(int64_t)a3 direction:(int64_t)a4
{
  v7 = [(VOTElementManager *)self _currentElement];
  v8 = [v7 textInputElement];
  if (v8)
  {
    if (self->_elementUnitIndex == -1)
    {
      v9 = [v7 textInputElementRange];
      if (v9 != 0x7FFFFFFF)
      {
        self->_elementUnitIndex = v9;
      }
    }

    v10 = v8;

    v7 = v10;
  }

  v11 = [v7 visibleText];
  v12 = [v11 mutableCopy];

  v13 = [(VOTElementManager *)self outputRangeForTextSegmentUnit:a3 direction:a4 string:v12 element:v7];
  v15 = v14;
  if (v13 != 0x7FFFFFFF || ![(VOTElementManager *)self _handleMovementForElementFollowingElement:v7 direction:a4 unit:a3 mode:3])
  {
    -[VOTElementManager updateIndexesForOutputRange:segment:direction:outputStringLength:](self, "updateIndexesForOutputRange:segment:direction:outputStringLength:", v13, v15, a3, a4, [v12 length]);
    [(VOTElementManager *)self outputTextSegmentForRange:v13 string:v15 element:v12 usePhonetics:v7 segment:a3 == 1, a3];
    if ((TTSisSpeakableEmojiString() & 1) != 0 || [v12 length] == 1)
    {
      v16 = +[VOTWorkspace sharedWorkspace];
      v17 = [v16 visionEngine];
      [v17 processStringFor2DBrailleDisplay:v12];
    }

    if (v7)
    {
      if (([v7 doesHaveTraits:kAXTextAreaTrait] & 1) != 0 || objc_msgSend(v7, "doesHaveTraits:", kAXWebContentTrait))
      {
        location = self->_elementUnitOutputRange.location;
        if (location != 0x7FFFFFFF)
        {
          length = self->_elementUnitOutputRange.length;
          v20 = +[VOTElement systemWideElement];
          [v7 boundsForRange:{location, length + 1}];
          [v20 convertRect:objc_msgSend(v7 fromContextId:{"windowContextId"), v21, v22, v23, v24}];
          self->_lineFrame.origin.x = v25;
          self->_lineFrame.origin.y = v26;
          self->_lineFrame.size.width = v27;
          self->_lineFrame.size.height = v28;

          if (a3 != 1)
          {
            [(VOTElementManager *)self _outputDataDetectorIfPresent:v7 element:1 includeLinks:self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height];
          }

          v51.origin.x = CGRectZero.origin.x;
          v51.origin.y = CGRectZero.origin.y;
          v51.size.width = CGRectZero.size.width;
          v51.size.height = CGRectZero.size.height;
          if (!CGRectEqualToRect(self->_lineFrame, v51))
          {
            v49[0] = _NSConcreteStackBlock;
            v49[1] = 3221225472;
            v49[2] = sub_100077BC8;
            v49[3] = &unk_1001C7778;
            v49[4] = self;
            v50 = v7;
            [v50 scrollRectToVisible:v49 withCompletion:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];
          }
        }
      }

      else
      {
        v29 = [v7 identifier];
        v30 = [v29 isEqualToString:@"VOTImageExplorerTextElement"];

        if (v30)
        {
          [v7 boundsForRange:{v13, v15}];
          v32 = v31;
          v34 = v33;
          v36 = v35;
          v38 = v37;
          v39 = +[VOTElement systemWideElement];
          [v39 convertRect:objc_msgSend(v7 fromContextId:{"windowContextId"), v32, v34, v36, v38}];
          v41 = v40;
          v43 = v42;
          v45 = v44;
          v47 = v46;

          v48 = +[VOTDisplayManager displayManager];
          [v48 setCursorFrame:{v41, v43, v45, v47}];
        }

        else
        {
          v48 = +[VOTDisplayManager displayManager];
          [v48 setCursorFrameForElement:v7];
        }
      }
    }
  }
}

- (void)_handleWebSelection:(id)a3
{
  v4 = a3;
  v18 = [(VOTElementManager *)self _currentElement];
  v5 = [v4 command];

  v6 = [v5 isEqualToString:kVOTEventCommandSelectRight];
  if (self->_inTextProcessingRotorMode)
  {
    v7 = [(VOTElementManager *)self textSelectionMovementManager];
    v8 = [v7 segment];
  }

  else
  {
    v9 = [(VOTRotor *)self->_elementRotor currentRotorType];
    v10 = 1;
    if (v9 == 4)
    {
      v10 = 2;
    }

    if (v9 == 5)
    {
      v8 = 3;
    }

    else
    {
      v8 = v10;
    }
  }

  if (![(NSString *)self->_webSelectionText length])
  {
    if (self->_textMarker)
    {
      v11 = [(_VOTTextMarkerRange *)self->_textMarkerRange startMarker];
      goto LABEL_16;
    }

    if (self->_elementUnitIndex == 0x7FFFFFFFFFFFFFFFLL || [(NSString *)self->_webSelectionText length])
    {
      v11 = 0;
      goto LABEL_16;
    }

    if ([(NSArray *)self->_lineArray count]== 2)
    {
      v11 = [(NSArray *)self->_lineArray objectAtIndex:0];
      if (!self->_elementUnitOutputRange.length)
      {
        goto LABEL_16;
      }

      v13 = [v18 pageTextMarkerRange];
      if ([v13 count])
      {
        v14 = [v13 objectAtIndex:0];
        v15 = [v18 rangeForTextMarker:v14];

        v16 = [v18 textMarkersForRange:{&v15[self->_elementUnitOutputRange.location], self->_elementUnitOutputRange.length}];
        if ([v16 count] == 2)
        {
          v17 = [v16 objectAtIndex:0];

          v11 = v17;
        }
      }
    }

    else
    {
      v13 = [v18 textMarkersForRange:{self->_elementUnitOutputRange.location, self->_elementUnitOutputRange.length}];
      v11 = [v13 objectAtIndex:0];
    }

LABEL_16:
    [v18 setSelectionToTextMarker:v11];

    if (v6)
    {
      goto LABEL_10;
    }

    goto LABEL_17;
  }

  if (v6)
  {
LABEL_10:
    [v18 increaseWebSelection:v8];
    goto LABEL_18;
  }

LABEL_17:
  [v18 decreaseWebSelection:v8];
LABEL_18:
  v12 = [v18 remoteParent];
  [v12 increaseWebSelection:v8];
  self->_flags.shouldUpdateRotorForElement = 1;
}

- (void)_handleTextRotorSelectionAction:(BOOL)a3
{
  v4 = &kVOTEventCommandSelectLeft;
  if (a3)
  {
    v4 = &kVOTEventCommandSelectRight;
  }

  v5 = [VOTEvent internalEventWithCommand:*v4 info:0];
  [(VOTElementManager *)self _handleUserSelection:v5];
}

- (void)_processMisspelledWordTextReplacement
{
  v3 = [(VOTElement *)self->_currentElement application];
  v19 = [v3 textReplacements];

  misspelledWordReplacementCycleIndex = self->_misspelledWordReplacementCycleIndex;
  v5 = misspelledWordReplacementCycleIndex >= [v19 count];
  v6 = v19;
  if (v5)
  {
    goto LABEL_13;
  }

  v7 = [v19 objectAtIndexedSubscript:self->_misspelledWordReplacementCycleIndex];
  v8 = self->_currentElement;
  if ([(VOTElement *)v8 doesHaveTraits:kAXKeyboardKeyTrait])
  {
    v9 = [(VOTElement *)v8 textInputElement];
    if (v9)
    {
      v10 = v9;
LABEL_6:
      v12 = v10;

      v8 = v12;
      goto LABEL_7;
    }

    v11 = [(VOTElement *)v8 application];
    v10 = [v11 firstResponderElement];

    if (v10)
    {
      goto LABEL_6;
    }
  }

LABEL_7:
  if ([(VOTElement *)v8 doesHaveTraits:kAXWebContentTrait])
  {
    v13 = [v7 stringByAppendingString:@" "];

    v7 = v13;
  }

  v14 = [(VOTElement *)v8 selectedTextRange];
  v16 = [(VOTElement *)v8 replaceTextInRange:v14 withString:v15, v7];
  v17 = +[VOTOutputManager outputManager];
  if (v16)
  {
    +[VOSOutputEvent DidActivateElement];
  }

  else
  {
    +[VOSOutputEvent BoundaryEncountered];
  }
  v18 = ;
  [v17 sendEvent:v18];

  v6 = v19;
LABEL_13:
  self->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
}

- (void)_handleMisspelledWordRotorAction:(BOOL)a3
{
  v3 = a3;
  v5 = [(VOTElement *)self->_currentElement application];
  v24 = [v5 textReplacements];

  if ([v24 count])
  {
    misspelledWordReplacementCycleIndex = self->_misspelledWordReplacementCycleIndex;
    if (misspelledWordReplacementCycleIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      v7 = v24;
      if (v3)
      {
        v8 = 0;
        self->_misspelledWordReplacementCycleIndex = 0;
        goto LABEL_11;
      }

      v8 = [v24 count] - 1;
    }

    else if (v3)
    {
      v8 = misspelledWordReplacementCycleIndex + 1;
    }

    else
    {
      v8 = misspelledWordReplacementCycleIndex - 1;
    }

    v7 = v24;
    self->_misspelledWordReplacementCycleIndex = v8;
    if ((v8 & 0x8000000000000000) != 0)
    {
      self->_misspelledWordReplacementCycleIndex = [v24 count] - 1;
      v15 = +[VOTOutputManager outputManager];
      v16 = +[VOSOutputEvent DidWrapBackwards];
      goto LABEL_14;
    }

LABEL_11:
    if (v8 < [v7 count])
    {
LABEL_15:
      v18 = [VOTSharedWorkspace selectedLanguage];
      v19 = v18;
      if (v18)
      {
        v13 = v18;
      }

      else
      {
        v20 = [(VOTElement *)self->_currentElement application];
        v13 = [v20 currentSoftwareKeyboardLanguage];
      }

      v14 = [objc_allocWithZone(VOTOutputRequest) init];
      v21 = [v24 objectAtIndexedSubscript:self->_misspelledWordReplacementCycleIndex];
      v22 = [v14 addString:v21 withLanguage:v13];

      v23 = [v14 lastAction];
      [v23 setObject:kCFBooleanTrue forVariant:50];

      [v14 setGeneratesBraille:1];
      [(VOTElementManager *)self sendRequest:v14];
      goto LABEL_19;
    }

    self->_misspelledWordReplacementCycleIndex = 0;
    v15 = +[VOTOutputManager outputManager];
    v16 = +[VOSOutputEvent DidWrapForwards];
LABEL_14:
    v17 = v16;
    [v15 sendEvent:v16];

    goto LABEL_15;
  }

  v9 = +[VOTOutputManager outputManager];
  v10 = off_1001FDDD0;
  v11 = [VOTSharedWorkspace selectedLanguage];
  v12 = sub_1000516CC(v10, @"no.text.replacements", 0, v11);
  [v9 speakSimpleString:v12];

  v13 = +[VOTOutputManager outputManager];
  v14 = +[VOSOutputEvent BoundaryEncountered];
  [v13 sendEvent:v14];
LABEL_19:
}

- (void)_handleStartStopTextSelection:(id)a3
{
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXTextEntryTrait])
  {
    if (self->_flags.inKeyboardTextSelectionMode)
    {
      v4 = [(VOTElement *)self->_currentElement selectedTextRange];
      location = self->_keyboardTextSelectionStartRange.location;
      if (v4 >= location)
      {
        v7 = self->_keyboardTextSelectionStartRange.location;
      }

      else
      {
        v7 = v4;
      }

      v8 = self->_keyboardTextSelectionStartRange.length + location;
      if (v4 + v5 > v8)
      {
        v8 = v4 + v5;
      }

      [(VOTElement *)self->_currentElement setSelectedTextRange:v7 refreshBraille:v8 - v7, 1];
      v9 = 0;
    }

    else
    {
      self->_keyboardTextSelectionStartRange.location = [(VOTElement *)self->_currentElement selectedTextRange];
      self->_keyboardTextSelectionStartRange.length = v11;
      v9 = 1;
    }

    self->_flags.inKeyboardTextSelectionMode = v9;
  }

  else
  {
    v12 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v12 sendEvent:v10];
  }
}

- (void)_updateCursorFrameAfterLift
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (!self->_textRangeBeingDisplayed)
  {
    v3 = +[VOTDisplayManager displayManager];
    [v3 setCursorFrameForElement:self->_currentElement];
  }
}

- (void)_handleUserSelection:(id)a3
{
  v4 = a3;
  selectingRightward = self->_selectingRightward;
  v6 = [v4 command];
  v7 = [v6 isEqualToString:kVOTEventCommandSelectRight];

  v8 = 1;
  if (!v7)
  {
    v8 = 2;
  }

  self->_lastUserTextSelectionDirection = v8;
  v9 = [(VOTElementManager *)self _currentResponder];
  v10 = [v9 doesHaveTraits:kAXIsEditingTrait];
  if ((v10 & 1) == 0)
  {
    v11 = [(VOTElementManager *)self _currentElement];
    if ([v11 doesHaveTraits:kAXWebContentTrait])
    {
      [(VOTElementManager *)self _handleWebSelection:v4];
      goto LABEL_60;
    }
  }

  LODWORD(v42) = selectingRightward;
  v12 = [(VOTRotor *)self->_elementRotor currentRotorType];
  v11 = [v9 value];
  v13 = [v9 selectedTextRange];
  v15 = v14;
  if (v14)
  {
    v16 = 1;
  }

  else
  {
    v16 = v10;
  }

  if ((v16 & 1) == 0)
  {
    p_highlightedCharacterRange = &self->_highlightedCharacterRange;
    location = self->_highlightedCharacterRange.location;
    if (location == 0x7FFFFFFF || location >= [v11 length])
    {
      v19 = self->_elementUnitOutputRange.location;
      if (v19 == 0x7FFFFFFF || v19 >= [v11 length])
      {
        goto LABEL_17;
      }

      p_highlightedCharacterRange = &self->_elementUnitOutputRange;
    }

    v13 = p_highlightedCharacterRange->location;
  }

LABEL_17:
  v20 = VOTLogElement();
  if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
  {
    sub_10012AE44();
  }

  if (!v15)
  {
    self->_selectedTextStartLocation = v13;
    self->_inTextSelection = 1;
    self->_selectingRightward = v7;
  }

  v21 = VOTLogElement();
  if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
  {
    sub_10012AEAC();
  }

  if ([v11 isAXAttributedString] && objc_msgSend(v11, "hasAttribute:", UIAccessibilityTokenPlaceholder))
  {
    v22 = +[VOTOutputManager outputManager];
    v23 = +[VOSOutputEvent BoundaryEncountered];
    [v22 sendEvent:v23];
  }

  else
  {
    v45 = v13;
    v24 = [(VOTElementManager *)self textSelectionMovementManager];
    v25 = [v24 segment];

    v26 = [v4 objectForIndex:118];
    v22 = v26;
    if (v26)
    {
      v25 = [v26 integerValue];
    }

    v27 = VOTLogElement();
    if (os_log_type_enabled(v27, OS_LOG_TYPE_DEBUG))
    {
      v41 = self->_selectingRightward;
      *buf = 134218752;
      v47 = v12;
      v48 = 2048;
      v49 = v25;
      v50 = 1024;
      v51 = v7;
      v52 = 1024;
      v53 = v41;
      _os_log_debug_impl(&_mh_execute_header, v27, OS_LOG_TYPE_DEBUG, "dispatching selection change: rotor:%ld, textSelectionRotor:%ld, rightward:%d, selectingRightward:%d)", buf, 0x22u);
    }

    if (v12 == 4 || v25 == 2)
    {
      v28 = [(VOTElementManager *)self _handleUserWordSelectionInElement:v9 currentRange:v45 rightward:v15, v7];
    }

    else if (v12 == 5 || v25 == 3)
    {
      v28 = [(VOTElementManager *)self _handleUserLineSelectionInElement:v9 currentRange:v45 rightward:v15, v7];
    }

    else if (v25 == 7)
    {
      v28 = [(VOTElementManager *)self _handleUserAllSelection:v45 inString:v15 rightward:v11, v7];
    }

    else if (v25 == 4)
    {
      v28 = [(VOTElementManager *)self _handleUserPageSelection:v45 inString:v15 rightward:v11, v7];
    }

    else
    {
      v28 = [(VOTElementManager *)self _handleUserCharacterSelection:v45 inString:v15 rightward:v11, v7];
    }

    v30 = v28;
    v31 = v29;
    v32 = VOTLogElement();
    if (os_log_type_enabled(v32, OS_LOG_TYPE_DEBUG))
    {
      sub_10012AF20();
    }

    if (v15 == v31 || (v30 & 0x8000000000000000) != 0 || v30 + v31 > [v11 length])
    {
      v33 = +[VOTOutputManager outputManager];
      v34 = +[VOSOutputEvent BoundaryEncountered];
      [v33 sendEvent:v34];
    }

    else
    {
      v35 = VOTLogElement();
      if (os_log_type_enabled(v35, OS_LOG_TYPE_DEBUG))
      {
        sub_10012AF88();
      }

      [(VOTElementManager *)self _setSelectedTextRange:v30 onElement:v31 refreshBraille:v9, 1];
      if (v43 == self->_selectingRightward || !self->_inTextSelection)
      {
        v36 = +[VOTOutputManager outputManager];
        v37 = +[VOSOutputEvent InsertionPointDidMove];
      }

      else
      {
        v36 = +[VOTOutputManager outputManager];
        v37 = +[VOSOutputEvent DidChangeTextSelectionDirection];
      }

      v38 = v37;
      [v36 sendEvent:v37];

      v39 = [VOTSharedWorkspace selectedLanguage];
      v40 = v39;
      if (v39)
      {
        v33 = v39;
      }

      else
      {
        v44 = [v9 application];
        v33 = [v44 currentSoftwareKeyboardLanguage];
      }

      [(VOTElementManager *)self _outputSelectionDifference:v30 oldRange:v31 string:v45 language:v15, v11, v33];
      [(VOTElementManager *)self _updateCurrentElementForTextInputSelectionChangeIfNeeded];
    }

    v23 = VOTLogElement();
    if (os_log_type_enabled(v23, OS_LOG_TYPE_DEBUG))
    {
      sub_10012AFF0();
    }
  }

LABEL_60:
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserWordSelectionInElement:(id)a3 currentRange:(id)a4 rightward:(BOOL)a5
{
  v5 = a5;
  var1 = a4.var1;
  var0 = a4.var0;
  v9 = a4.var0 + a4.var1;
  if (self->_selectingRightward)
  {
    v10 = a4.var0 + a4.var1;
  }

  else
  {
    v10 = a4.var0;
  }

  if (a5)
  {
    v11 = 1;
  }

  else
  {
    v11 = 2;
  }

  v12 = [a3 value];
  v13 = [v12 wordFromPosition:v10 inDirection:v11];
  v15 = v14;
  v16 = VOTLogElement();
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEBUG))
  {
    if (v13 == 0x7FFFFFFF)
    {
      v21 = @"<NOT FOUND>";
    }

    else
    {
      v21 = [v12 substringWithRange:{v13, v15}];
    }

    v22 = 134218499;
    v23 = v13;
    v24 = 2048;
    v25 = v15;
    v26 = 2113;
    v27 = v21;
    _os_log_debug_impl(&_mh_execute_header, v16, OS_LOG_TYPE_DEBUG, "word range: %lu, %lu (%{private}@)", &v22, 0x20u);
    if (v13 != 0x7FFFFFFF)
    {
    }
  }

  if (v13 != 0x7FFFFFFF)
  {
    if (self->_selectingRightward)
    {
      if (v5)
      {
        var1 = &v13[v15 - var0];
      }

      else
      {
        var1 = &v13[-var0] & ~(&v13[-var0] >> 63);
      }
    }

    else
    {
      v17 = &v13[v15];
      v18 = (v9 - &v13[v15]) & ~((v9 - &v13[v15]) >> 63);
      if (v9 <= v13)
      {
        v17 = v13;
        v18 = 0;
      }

      if (v5)
      {
        var0 = v17;
      }

      else
      {
        var0 = v13;
      }

      if (v5)
      {
        var1 = v18;
      }

      else
      {
        var1 = v9 - v13;
      }
    }
  }

  v19 = var0;
  v20 = var1;
  result.var1 = v20;
  result.var0 = v19;
  return result;
}

- (_NSRange)_lineRangeWithFaultTolerance:(int64_t)a3 forward:(BOOL)a4 element:(id)a5
{
  v6 = a4;
  v8 = 0;
  v9 = -1;
  do
  {
    if (v6)
    {
      v10 = v8 + 1;
    }

    else
    {
      v10 = v9;
    }

    v11 = [a5 lineRangeForPosition:v10 + a3];
    if (v8 > 1)
    {
      break;
    }

    ++v8;
    --v9;
  }

  while (v11 == 0x7FFFFFFF);
  result.length = v12;
  result.location = v11;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserLineSelectionInElement:(id)a3 currentRange:(id)a4 rightward:(BOOL)a5
{
  v5 = a5;
  var1 = a4.var1;
  var0 = a4.var0;
  v9 = a3;
  v10 = (var0 + var1);
  if (self->_selectingRightward)
  {
    v11 = var0 + var1;
  }

  else
  {
    v11 = var0;
  }

  v12 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:v11 forward:v5 element:v9];
  v14 = v13;
  v15 = VOTLogElement();
  if (os_log_type_enabled(v15, OS_LOG_TYPE_DEBUG))
  {
    v26.location = v12;
    v26.length = v14;
    sub_10012B02C(v26);
  }

  if (v12 != 0x7FFFFFFF)
  {
    if (self->_selectingRightward)
    {
      if (v5)
      {
        if (v10 == &v12[v14])
        {
          v18 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 + var1 forward:1 element:v9];
          if (v18 != 0x7FFFFFFF)
          {
            v14 = v19;
            v12 = v18;
          }
        }

        var1 = &v12[v14 - var0];
      }

      else
      {
        if (v12 == v10)
        {
          if (!v10 || (v12 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 + var1 forward:0 element:v9], v12 == 0x7FFFFFFF))
          {
            v12 = (var0 + var1);
          }
        }

        if (v12 <= var0)
        {
          var1 &= var1 >> 63;
        }

        else
        {
          var1 = &v12[-var0];
        }
      }

      goto LABEL_7;
    }

    if (v5)
    {
      v20 = &v12[v14];
      if (&v12[v14] == var0)
      {
        v21 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 + 1 forward:1 element:v9];
        if (v21 == 0x7FFFFFFF)
        {
          v23 = v14;
        }

        else
        {
          v23 = v22;
        }

        if (v21 == 0x7FFFFFFF)
        {
          v24 = v12;
        }

        else
        {
          v24 = v21;
        }

        v20 = &v24[v23];
      }

      if (v10 >= v20)
      {
        var0 = v20;
      }

      else
      {
        var0 += var1;
      }

      if (v10 >= v20)
      {
        var1 = v10 - v20;
      }

      else
      {
        var1 = 0;
      }

      goto LABEL_7;
    }

    if (v12 != var0)
    {
      goto LABEL_38;
    }

    if (var0 < 1)
    {
      v25 = var0;
    }

    else
    {
      v12 = [(VOTElementManager *)self _lineRangeWithFaultTolerance:var0 forward:0 element:v9];
      v25 = var0;
      if (v12 != 0x7FFFFFFF)
      {
LABEL_38:
        if (var0 > v12)
        {
          var1 = v10 - v12;
          var0 = v12;
          goto LABEL_7;
        }

        v25 = v12;
      }
    }

    if (var0 > 0)
    {
      var0 = v25;
      var1 = 0;
    }
  }

LABEL_7:

  v16 = var0;
  v17 = var1;
  result.var1 = v17;
  result.var0 = v16;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserPageSelection:(id)a3 inString:(id)a4 rightward:(BOOL)a5
{
  v5 = a5;
  var1 = a3.var1;
  var0 = a3.var0;
  v9 = a4;
  v10 = v9;
  if (self->_selectingRightward)
  {
    if (v5)
    {
      if (&var1[var0] < [v9 length])
      {
        var1 = [v10 length] - var0;
      }
    }

    else
    {
      var1 = 0;
    }
  }

  else
  {
    if (var0 <= 0)
    {
      v11 = var1;
    }

    else
    {
      v11 = var0;
    }

    if (v5)
    {
      var0 = var1;
    }

    else
    {
      var0 &= var0 >> 63;
    }

    if (v5)
    {
      var1 = 0;
    }

    else
    {
      var1 = v11;
    }
  }

  v12 = var0;
  v13 = var1;
  result.var1 = v13;
  result.var0 = v12;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserAllSelection:(id)a3 inString:(id)a4 rightward:(BOOL)a5
{
  v5 = a5;
  var1 = a3.var1;
  var0 = a3.var0;
  v8 = a4;
  v9 = v8;
  if (v5)
  {
    var1 = [v8 length];
    var0 = 0;
  }

  else if (!var0 && var1 == [v8 length])
  {
    var1 = 0;
    var0 = 0;
  }

  v10 = var0;
  v11 = var1;
  result.var1 = v11;
  result.var0 = v10;
  return result;
}

- (_NSRange)_characterRangeWithFaultTolerance:(int64_t)a3 forward:(BOOL)a4 element:(id)a5
{
  v13 = 0x7FFFFFFFLL;
  if (a3 == 0x7FFFFFFF)
  {
    v14 = 0;
  }

  else
  {
    v26 = v10;
    v27 = v9;
    v28 = v8;
    v29 = v7;
    v30 = v6;
    v31 = v5;
    v32 = v11;
    v33 = v12;
    v16 = a4;
    v18 = 0;
    v19 = 0;
    do
    {
      if (v16)
      {
        v20 = v19;
      }

      else
      {
        v20 = v18;
      }

      v21 = [a5 characterRangeForPosition:{v20 + a3, v26, v27, v28, v29, v30, v31, v32, v33}];
      v22 = v21 <= a3 || v16;
      if (v21 >= a3)
      {
        v23 = v21;
      }

      else
      {
        v23 = 0x7FFFFFFFLL;
      }

      if (v22)
      {
        v24 = v21;
      }

      else
      {
        v24 = 0x7FFFFFFFLL;
      }

      if (v16)
      {
        v13 = v23;
      }

      else
      {
        v13 = v24;
      }

      v25 = v13 != 0x7FFFFFFF || v19++ >= 2;
      --v18;
    }

    while (!v25);
  }

  result.length = v14;
  result.location = v13;
  return result;
}

- ($0AC6E346AE4835514AAA8AC86D8F4844)_handleUserCharacterSelection:(id)a3 inString:(id)a4 rightward:(BOOL)a5
{
  v5 = a5;
  var1 = a3.var1;
  var0 = a3.var0;
  v9 = a4;
  v10 = v9;
  if (var0 == 0x7FFFFFFFFFFFFFFFLL || var0 == 0x7FFFFFFF)
  {
    v11 = VOTLogCommon();
    if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
    {
      v31.location = var0;
      v31.length = var1;
      v24 = NSStringFromRange(v31);
      v25 = 138412802;
      v26 = v24;
      v27 = 2112;
      v28 = v10;
      v29 = 1024;
      v30 = v5;
      _os_log_error_impl(&_mh_execute_header, v11, OS_LOG_TYPE_ERROR, "Invalid range passed into handle user selection: %@ > %@[%d]", &v25, 0x1Cu);
    }
  }

  else if (self->_selectingRightward)
  {
    v14 = var0 + var1;
    if (v5)
    {
      if (v14 < [v9 length] && objc_msgSend(v10, "rangeOfComposedCharacterSequenceAtIndex:", var0 + var1) != 0x7FFFFFFFFFFFFFFFLL)
      {
        v16 = v15 + var1;
        if (v15 + var1 <= [v10 length])
        {
          var1 = v16;
        }
      }
    }

    else
    {
      v20 = [v9 length];
      if (v14 >= 1 && v14 - 1 < v20 && [v10 rangeOfComposedCharacterSequenceAtIndex:?] != 0x7FFFFFFFFFFFFFFFLL)
      {
        if (var1 < 1)
        {
          var0 -= v21;
          var1 = v21;
        }

        else
        {
          var1 -= v21;
        }
      }
    }
  }

  else if (v5)
  {
    if (var0 < [v9 length])
    {
      v17 = [v10 rangeOfComposedCharacterSequenceAtIndex:var0];
      v19 = var1 - v18;
      if (var1 < v18)
      {
        v19 = 0;
      }

      if (v17 != 0x7FFFFFFFFFFFFFFFLL)
      {
        var0 += v18;
        var1 = v19;
      }
    }
  }

  else if (var0 >= 1)
  {
    if ([v9 rangeOfComposedCharacterSequenceAtIndex:var0 - 1] == 0x7FFFFFFFFFFFFFFFLL)
    {
      v23 = 0;
    }

    else
    {
      v23 = v22;
    }

    var0 -= v23;
    var1 += v23;
  }

  v12 = var0;
  v13 = var1;
  result.var1 = v13;
  result.var0 = v12;
  return result;
}

- (void)_handleZoomMovement:(int64_t)a3 event:(id)a4
{
  v19 = a4;
  v6 = [(VOTElementManager *)self _currentElement];
  v7 = v6;
  if (!v6 || ([(VOTElement *)v6 application], v8 = objc_claimAutoreleasedReturnValue(), v9 = [(VOTElement *)v7 isValidForApplication:v8], v8, (v9 & 1) == 0))
  {
    v10 = self->_touchContainer;

    v7 = v10;
  }

  if ([(VOTElement *)v7 mapFeatureType]|| [(VOTElement *)v7 doesHaveTraits:kAXWebContentTrait])
  {
    [(VOTElement *)v7 centerPoint];
    v12 = v11;
    v14 = v13;
  }

  else
  {
    v16 = [v19 objectForIndex:101];
    [v16 pointValue];
    v12 = v17;
    v14 = v18;
  }

  if (a3 == 4)
  {
    [(VOTElement *)v7 zoomOutAtLocation:v12, v14];
  }

  else if (a3 == 3)
  {
    [(VOTElement *)v7 zoomInAtLocation:v12, v14];
  }

  v15 = +[VOTDisplayManager displayManager];
  [v15 setCursorFrameForElement:v7];
}

- (void)_handleTrackingDetailMovement:(BOOL)a3 event:(id)a4
{
  v4 = a3;
  v10 = [(VOTElementManager *)self _currentElement:a3];
  if (!v10 || ([(VOTElement *)v10 application], v6 = objc_claimAutoreleasedReturnValue(), v7 = [(VOTElement *)v10 isValidForApplication:v6], v6, v8 = v10, (v7 & 1) == 0))
  {
    v9 = self->_touchContainer;

    v8 = v9;
  }

  v11 = v8;
  if (v4)
  {
    [(VOTElement *)v8 increaseTrackingDetail];
  }

  else
  {
    [(VOTElement *)v8 decreaseTrackingDetail];
  }
}

- (void)_handleNavigationDirectionChangeWithDirection:(int64_t)a3
{
  v4 = [(VOTElementManager *)self _newNavigationDirectionModeForRotorDirection:a3];
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverNavigationDirectionMode:v4];

  [(VOTElementManager *)self _outputNavigationDirectionMode:v4];
  [(VOTElement *)self->_currentElement setNavigationDirectionMode:v4];
  v6 = [(VOTElement *)self->_currentElement remoteParent];
  if (v6)
  {
    [v6 setNavigationDirectionMode:v4];
  }

  [(VOTElementFetcher *)self->_fetchManager forceUpdate];
}

- (void)_handleScribbleMovement:(BOOL)a3
{
  v3 = a3;
  v5 = [(AXScribbleManager *)self->_safariScribbleManager lastSearchPoint];
  v6 = [(AXScribbleManager *)self->_safariScribbleManager nextSearchPoint:v3];
  if (v6 == v5)
  {
    v7 = 0;
LABEL_7:
    v10 = +[VOTOutputManager outputManager];
    v11 = +[VOSOutputEvent NoResultsFound];
    goto LABEL_8;
  }

  v8 = v6;
  v7 = 0;
  while (1)
  {
    v9 = v7;
    v7 = [(VOTElement *)self->_currentElement scribbleAreaForSearchPoint:v8];

    if (v7)
    {
      if (([(AXScribbleManager *)self->_safariScribbleManager isUniqueElement:v7]& 1) != 0)
      {
        break;
      }
    }

    v8 = [(AXScribbleManager *)self->_safariScribbleManager nextSearchPoint:v3];
    if (v8 == v5)
    {
      goto LABEL_7;
    }
  }

  [(AXScribbleManager *)self->_safariScribbleManager foundScribbleElement:v7 atSearchPoint:[(AXScribbleManager *)self->_safariScribbleManager lastSearchPoint]];
  if ([(AXScribbleManager *)self->_safariScribbleManager lastSearchPoint]!= v5)
  {
    v10 = +[VOTOutputManager outputManager];
    v11 = +[VOSOutputEvent DidWrapForwards];
LABEL_8:
    v12 = v11;
    [v10 sendEvent:v11];
  }

  v13 = +[AXHapticFeedbackManager sharedManager];
  [v13 playHapticFeedbackForType:12];

  if (v7)
  {
    objc_opt_class();
    v14 = [v7 renderedText];
    v15 = __UIAccessibilityCastAsClass();

    v16 = off_1001FDDE0;
    v17 = [VOTSharedWorkspace selectedLanguage];
    v18 = sub_1000511CC(v16, @"scribble.hidable.item", v17);
    v19 = @"No Rendered Text";
    if (v15)
    {
      v19 = v15;
    }

    v24 = v19;
    v20 = __AXStringForVariables();
    [VOTOutputRequest sendRequestWithString:v20, v24, @"__AXStringForVariablesSentinel"];

    v21 = off_1001FDDE0;
    v22 = [VOTSharedWorkspace selectedLanguage];
    v23 = sub_1000511CC(v21, @"scribble.hide.hint", v22);
    [VOTOutputRequest sendRequestWithString:v23 shouldQueue:1];
  }

  else
  {
    v15 = VOTLogCommon();
    if (os_log_type_enabled(v15, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v15, OS_LOG_TYPE_DEFAULT, "[Scribble] no hidable areas found", buf, 2u);
    }
  }
}

- (int64_t)_newNavigationDirectionModeForRotorDirection:(int64_t)a3
{
  v4 = [VOTSharedWorkspace navigationDirection];
  if (v4 == 2)
  {
    return a3 != 1;
  }

  if (v4 == 1)
  {
    return 2 * (a3 == 1);
  }

  v5 = 1;
  if (a3 != 1)
  {
    return 2;
  }

  return v5;
}

- (id)_navigationDirectionModeString:(int64_t)a3
{
  if (a3 > 2)
  {
    v3 = 0;
  }

  else
  {
    v3 = *(&off_1001CA470 + a3);
  }

  v4 = off_1001FDDD0;
  v5 = [VOTSharedWorkspace selectedLanguage];
  v6 = sub_1000516CC(v4, v3, 0, v5);

  return v6;
}

- (void)_outputNavigationDirectionMode:(int64_t)a3
{
  v3 = [(VOTElementManager *)self _navigationDirectionModeString:a3];
  [VOTOutputRequest sendRequestWithString:v3];
}

- (void)_resetMathGranularMovementState
{
  elementMathSegments = self->_elementMathSegments;
  self->_elementMathSegments = 0;
  self->_elementMathSegmentGranularity = 0;

  self->_elementMathIndex = 0x7FFFFFFFFFFFFFFFLL;
}

- (unint64_t)_currentMathGranularityLevel
{
  v2 = [(VOTRotor *)self->_elementRotor currentRotorType];
  if ((v2 - 55) >= 4)
  {
    return 0;
  }

  else
  {
    return v2 - 54;
  }
}

- (void)_refreshMathSegmentsIfNeededWithPreferredDirection:(int64_t)a3
{
  v5 = [(VOTElementManager *)self _currentMathGranularityLevel];
  if (v5)
  {
    v6 = v5;
    if (self->_elementMathSegmentGranularity != v5)
    {
      self->_elementMathSegmentGranularity = v5;
      if (self->_elementMathIndex == 0x7FFFFFFFFFFFFFFFLL)
      {
        v7 = 0;
      }

      else
      {
        v8 = [(NSArray *)self->_elementMathSegments objectAtIndex:?];
        v9 = [v8 attributesAtIndex:0 effectiveRange:0];
        v7 = [v9 objectForKey:UIAccessibilityTokenMathTreePosition];
      }

      v10 = [(VOTElementManager *)self _currentElement];
      v11 = [v10 mathSegmentsWithGranularityLevel:v6];
      elementMathSegments = self->_elementMathSegments;
      self->_elementMathSegments = v11;

      if (v7)
      {
        v18 = 0;
        v19 = &v18;
        v20 = 0x2020000000;
        v21 = 0x7FFFFFFFFFFFFFFFLL;
        v13 = self->_elementMathSegments;
        v15[0] = _NSConcreteStackBlock;
        v15[1] = 3221225472;
        v15[2] = sub_100079CB0;
        v15[3] = &unk_1001C9A60;
        v15[4] = self;
        v16 = v7;
        v17 = &v18;
        [(NSArray *)v13 enumerateObjectsWithOptions:2 * (a3 == 2) usingBlock:v15];
        v14 = v19[3];
        if (v14 == 0x7FFFFFFFFFFFFFFFLL)
        {
          _AXLogWithFacility();
          v14 = 0;
          v19[3] = 0;
        }

        self->_elementMathIndex = v14;

        _Block_object_dispose(&v18, 8);
      }
    }
  }
}

- (void)_handleUpdatedMathElementIndex
{
  v7 = objc_alloc_init(VOTOutputRequest);
  v3 = [(NSArray *)self->_elementMathSegments objectAtIndex:self->_elementMathIndex];
  v4 = [(VOTOutputRequest *)v7 addAttributedString:v3];

  [(VOTElementManager *)self sendRequest:v7];
  v5 = VOTSharedWorkspace;
  v6 = [(VOTElementManager *)self _currentRotorSelection];
  [v5 refreshBraille:0 rotorSelection:v6];
}

- (id)_treePositionForMathSegment:(id)a3
{
  v3 = [a3 attributesAtIndex:0 effectiveRange:0];
  v4 = [v3 objectForKey:UIAccessibilityTokenMathTreePosition];

  return v4;
}

- (void)_handleMathGranularMovement:(int64_t)a3 event:(id)a4
{
  v15 = a4;
  elementMathSegments = self->_elementMathSegments;
  v7 = elementMathSegments;
  if (!elementMathSegments)
  {
    [(VOTElementManager *)self _refreshMathSegmentsIfNeededWithPreferredDirection:a3];
    v7 = self->_elementMathSegments;
  }

  v8 = [(NSArray *)v7 count];
  if (!v8)
  {
    goto LABEL_21;
  }

  elementMathIndex = self->_elementMathIndex;
  if (elementMathIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    if (a3 == 1)
    {
      v10 = 0;
    }

    else
    {
      v10 = (v8 - 1);
    }

LABEL_18:
    v11 = 0;
    self->_elementMathIndex = v10;
    if (!elementMathSegments)
    {
      goto LABEL_20;
    }

    goto LABEL_19;
  }

  if (a3 != 1 || elementMathIndex != v8 - 1)
  {
    if (a3 == 2)
    {
      if (!elementMathIndex)
      {
        goto LABEL_10;
      }
    }

    else if (a3 == 1)
    {
      v10 = elementMathIndex + 1;
      goto LABEL_18;
    }

    v10 = elementMathIndex - 1;
    goto LABEL_18;
  }

LABEL_10:
  v11 = 1;
  if (elementMathSegments)
  {
LABEL_19:
    [(VOTElementManager *)self _refreshMathSegmentsIfNeededWithPreferredDirection:a3];
  }

LABEL_20:
  if (v11)
  {
LABEL_21:
    v12 = +[VOTOutputManager outputManager];
    [v12 stopSpeakingAtBoundary:0];

    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];

    goto LABEL_23;
  }

  [(VOTElementManager *)self _handleUpdatedMathElementIndex];
LABEL_23:
}

- (id)_currentRotorSelection
{
  [(VOTElementManager *)self _refreshMathSegmentsIfNeeded];
  v3 = [(VOTElementManager *)self _currentElement];
  if (!sub_1000FA5FC([(VOTRotor *)self->_elementRotor currentRotorType]))
  {
    goto LABEL_10;
  }

  if (![v3 doesHaveTraits:kAXMathEquationTrait])
  {
    goto LABEL_10;
  }

  elementMathIndex = self->_elementMathIndex;
  if (elementMathIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    goto LABEL_10;
  }

  if (elementMathIndex >= [(NSArray *)self->_elementMathSegments count])
  {
    v11 = self->_elementMathIndex;
    elementMathSegments = self->_elementMathSegments;
    _AXAssert();
  }

  v5 = self->_elementMathIndex;
  if (v5 < [(NSArray *)self->_elementMathSegments count:v11])
  {
    v6 = [(NSArray *)self->_elementMathSegments objectAtIndex:self->_elementMathIndex];
    v7 = [(VOTElementManager *)self _treePositionForMathSegment:v6];
    v8 = v7;
    if (v7)
    {
      v9 = v7;
    }
  }

  else
  {
LABEL_10:
    v8 = 0;
  }

  return v8;
}

- (void)_handleSearchRotorSetMathPosition:(id)a3
{
  v12 = a3;
  if (!sub_1000FA5FC([(VOTRotor *)self->_elementRotor currentRotorType]))
  {
    [(VOTElementManager *)self _setElementRotorToType:55 saveToPreferences:1 userInitiated:1];
  }

  [(VOTElementManager *)self _refreshMathSegmentsIfNeeded];
  v4 = [v12 objectForIndex:109];
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v5 = v4;
    v6 = [(NSArray *)self->_elementMathSegments count];
    if (!v6)
    {
      goto LABEL_11;
    }

    v7 = v6;
    v8 = 0;
    while (1)
    {
      v9 = [(NSArray *)self->_elementMathSegments objectAtIndex:v8];
      v10 = [(VOTElementManager *)self _treePositionForMathSegment:v9];
      v11 = sub_1000530E0(v10, v5);

      if (v11)
      {
        break;
      }

      if (v7 == ++v8)
      {
        goto LABEL_11;
      }
    }

    if (v8 != 0x7FFFFFFFFFFFFFFFLL)
    {
      self->_elementMathIndex = v8;
      [(VOTElementManager *)self _handleUpdatedMathElementIndex];
    }

    else
    {
LABEL_11:
      _AXLogWithFacility();
    }
  }

  else
  {
    _AXAssert();
  }
}

- (void)_handleOutputTextStyle:(id)a3
{
  v10 = [(VOTElementManager *)self _currentElement];
  if ([v10 doesHaveTraits:kAXIsEditingTrait])
  {
    v4 = [v10 attributedValueForRange:{objc_msgSend(v10, "selectedTextRange"), 1}];
    [VOTSharedWorkspace addMisspellingsForString:v4];
    v5 = [v4 coalescedFontAttributes];
    v6 = [(VOTElementManager *)self _computeChangedFontAttributes:v5 storedAttributes:0 haveMisspellCheck:1];
    if ([v6 length])
    {
      v7 = objc_alloc_init(VOTOutputRequest);
      v8 = [(VOTOutputRequest *)v7 addAttributedString:v6];
      [(VOTOutputRequest *)v7 setGeneratesBraille:1];
      [(VOTOutputRequest *)v7 setBrailleType:2];
      [(VOTElementManager *)self sendRequest:v7];
    }

    else
    {
      v7 = +[VOTOutputManager outputManager];
      v9 = +[VOSOutputEvent BoundaryEncountered];
      [(VOTOutputRequest *)v7 sendEvent:v9];
    }
  }

  else
  {
    v4 = +[VOTOutputManager outputManager];
    v5 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v5];
  }
}

- (void)_handlePerformTapAutofill:(id)a3
{
  v4 = self->_autofillCurrentElement;
  v5 = [(VOTElement *)v4 traits];
  v6 = kAXSelectionDismissesItemTrait & v5;
  v7 = +[VOTOutputManager outputManager];
  if (v6)
  {
    +[VOSOutputEvent AutofillDidDismiss];
  }

  else
  {
    +[VOSOutputEvent DidSelectAutofill];
  }
  v8 = ;
  [v7 sendEvent:v8];

  [(VOTElement *)v4 performSimpleTap];
  v11 = [objc_allocWithZone(VOTOutputRequest) init];
  [(VOTElementManager *)self _addDescription:v4 toRequest:v11 withOptions:1];

  [v11 setCannotBeInterrupted:1];
  [(VOTElementManager *)self sendRequest:v11];
  v9 = +[VOTDisplayManager displayManager];
  v10 = [(VOTElementManager *)self _currentElement];
  [v10 frame];
  [v9 setCursorFrame:?];

  [(VOTElementManager *)self _resetOtherTapInputModes];
}

- (void)_finishHandlingNextAutofillWithElement:(id)a3
{
  v3 = a3;
  [v3 updateFrame];
  [v3 updateCenterPoint];
  v12 = +[VOTDisplayManager displayManager];
  [v3 frame];
  v5 = v4;
  v7 = v6;
  v9 = v8;
  v11 = v10;

  [v12 setCursorFrame:{v5, v7, v9, v11}];
}

- (BOOL)_handleNextAutofill:(id)a3 reverse:(BOOL)a4
{
  v4 = a4;
  v6 = [(VOTElement *)self->_currentElement application];
  v7 = [v6 uiElement];
  [v7 updateCache:3004];

  v8 = [v6 typingCandidateElements];
  v9 = [v8 count];
  if (!v9)
  {
    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent BoundaryEncountered];
    [v13 sendEvent:v14];

    autofillCurrentElement = self->_autofillCurrentElement;
    self->_autofillCurrentElement = 0;

    goto LABEL_6;
  }

  v10 = self->_autofillCurrentElement;
  if (v10)
  {
    v11 = v9;
    v12 = [v8 indexOfObject:?];
    if (v12 == 0x7FFFFFFFFFFFFFFFLL)
    {
      v10 = 0;
      goto LABEL_13;
    }

    if (v4)
    {
      if (v12)
      {
        v10 = (v12 - 1);
        goto LABEL_13;
      }
    }

    else if (v12 != v11 - 1)
    {
      v10 = (v12 + 1);
      goto LABEL_13;
    }

    v17 = +[VOTOutputManager outputManager];
    v18 = +[VOSOutputEvent BoundaryEncountered];
    [v17 sendEvent:v18];

LABEL_6:
    v16 = 0;
    goto LABEL_19;
  }

LABEL_13:
  v19 = [v8 objectAtIndex:v10];
  v20 = self->_autofillCurrentElement;
  self->_autofillCurrentElement = v19;

  v21 = self->_autofillCurrentElement;
  v22 = self->_autofillCurrentElement;
  v23 = !v4;
  v16 = 1;
  if (v23)
  {
    v24 = 1;
  }

  else
  {
    v24 = 2;
  }

  v29 = _NSConcreteStackBlock;
  v30 = 3221225472;
  v31 = sub_10007A850;
  v32 = &unk_1001C7778;
  v33 = self;
  v25 = v21;
  v34 = v25;
  [(VOTElement *)v22 scrollToElementForDirectional:v24 withCompletion:&v29];
  v26 = [(VOTElement *)v25 label:v29];
  if ([v26 length])
  {
    v27 = [objc_allocWithZone(VOTOutputRequest) init];
    [(VOTElement *)v25 addTextualInformationToRequest:v27 options:6 dataPackage:0];
    [(VOTElementManager *)self sendRequest:v27];
  }

  self->_flags.tapShouldHandleAutofill = 1;

LABEL_19:
  return v16;
}

- (void)_valueWait:(id)a3 oldValue:(id)a4 waitTime:(double)a5 borderHitIfNoChange:(BOOL)a6
{
  v6 = a6;
  v9 = a3;
  v10 = a4;
  Current = CFAbsoluteTimeGetCurrent();
  v27 = 0;
  v28 = &v27;
  v29 = 0x3032000000;
  v30 = sub_100068050;
  v31 = sub_100068060;
  v32 = 0;
  v23[0] = _NSConcreteStackBlock;
  v23[1] = 3221225472;
  v23[2] = sub_10007AB10;
  v23[3] = &unk_1001C9A88;
  v12 = v9;
  v24 = v12;
  v26 = &v27;
  v13 = v10;
  v25 = v13;
  v14 = objc_retainBlock(v23);
  if (((v14[2])() & 1) == 0)
  {
    while (CFAbsoluteTimeGetCurrent() - Current < 0.5)
    {
      [NSThread sleepForTimeInterval:a5];
      if ((v14[2])(v14))
      {
        break;
      }

      v15 = [NSScanner localizedScannerWithString:v28[5]];
      v22 = 0;
      if ([v15 scanFloat:&v22])
      {
        [v12 absoluteValue];
        v17 = vabdd_f64(0.0, v16);
        v18 = vabdd_f64(1.0, v16);
        if (v17 < 2.22044605e-16 || v18 < 2.22044605e-16)
        {

          break;
        }
      }
    }

    if (v6 && v28[5] && [v13 isEqualToString:?])
    {
      v20 = +[VOTOutputManager outputManager];
      v21 = +[VOSOutputEvent BoundaryEncountered];
      [v20 sendEvent:v21];
    }
  }

  _Block_object_dispose(&v27, 8);
}

- (void)_handleAdjustValue:(id)a3 reverse:(BOOL)a4
{
  v4 = a4;
  v24 = [(VOTElementManager *)self _currentElement];
  [v24 centerPoint];
  v7 = v6;
  v9 = v8;
  v10 = [v24 value];
  if (v4)
  {
    [v24 decrementAction];
  }

  else
  {
    [v24 incrementAction];
  }

  v11 = [v24 application];
  v12 = [v24 isValidForApplication:v11];

  if ((v12 & 1) == 0)
  {
    v13 = [(VOTElementManager *)self _currentElementAtCenterPointOfElement:v24];
    if (([v13 isEqual:v24] & 1) == 0)
    {
      [(VOTElementManager *)self _setCurrentElement:v13];
      v14 = v13;

      v24 = v14;
    }
  }

  [(VOTElementManager *)self _valueWait:v24 oldValue:v10 waitTime:0.05];
  [(VOTElement *)self->_currentElement updateTraits];
  v15 = [(VOTElement *)self->_currentElement uiElement];
  [v15 updateCache:2027];

  v16 = [objc_allocWithZone(VOTOutputRequest) init];
  [(VOTElementManager *)self _addDescription:v24 toRequest:v16 withOptions:65544];
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXToggleTrait])
  {
    v17 = [(VOTElement *)self->_currentElement toggleStatusLabel];
    v18 = [v16 addString:v17];
  }

  if (![(VOTElement *)self->_currentElement doesHaveTraits:kAXStartsMediaSessionTrait])
  {
    [(VOTElementManager *)self sendRequest:v16];
  }

  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXUpdatesFrequentlyTrait])
  {
    [(VOTElementManager *)self resetFrequentUpdateTextCache];
  }

  if (([v24 isValid] & 1) == 0)
  {
    v19 = [objc_allocWithZone(VOTElement) initWithPosition:{v7, v9}];
    v20 = v19;
    if (v19 && ([v19 isEqual:v24] & 1) == 0)
    {
      [(VOTElementManager *)self _setCurrentElement:v20];
      v21 = +[VOTDisplayManager displayManager];
      [v21 setCursorFrameForElement:v20];
    }
  }

  [(VOTElement *)self->_currentElement updateEquivalenceTag];
  v22 = VOTSharedWorkspace;
  v23 = [(VOTElementManager *)self _currentRotorSelection];
  [v22 refreshBraille:1 rotorSelection:v23];

  self->_lastAdjustValueTime = CFAbsoluteTimeGetCurrent();
}

- (void)_handleKBPopupVariantsNotification:(id)a3
{
  fingerLocation = self->_fingerLocation;
  self->_keyboardAlternativeVisibleTrackingPoint = fingerLocation;
  self->_keyboardAlternativeVisibleStartPoint = fingerLocation;
  self->_keyboardAlternativesVisible = 1;
  if ([VOTSharedWorkspace tapAndHoldMode])
  {
    [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer dispatchAfterDelay:10.0];
  }

  v5 = [(VOTElement *)self->_currentElement application];
  v8 = [v5 currentSoftwareKeyboardLayout];

  if ((sub_100052974(v8) & 1) == 0)
  {
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent PopoverDidAppear];
    [v6 sendEvent:v7];
  }
}

- (void)_handleCameraCenteredNotification:(id)a3
{
  v3 = +[VOTOutputManager outputManager];
  [v3 playSoundFast:@"Sounds/RoadWalking.aiff"];
}

- (void)_handleBarcodeVisibilityNotification:(id)a3
{
  v3 = [a3 BOOLValue];
  v4 = +[VOTWorkspace sharedWorkspace];
  v5 = [v4 screenCurtainEnabled];

  if (v3)
  {
    if (v5)
    {
      v6 = +[VOTWorkspace sharedWorkspace];
      [v6 setScreenCurtainSuspended:1];
    }

    v7 = +[VOTDisplayManager displayManager];
    [v7 clearCursorFrame];
  }

  else
  {
    if (!v5)
    {
      return;
    }

    v7 = +[VOTWorkspace sharedWorkspace];
    [v7 setScreenCurtainSuspended:0];
  }
}

- (void)_handleFocusedElementContentChangeNotification:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent DidEnterSecureText];
  [v4 sendEvent:v3];
}

- (void)_handleScreenWillChangeNotification:(id)a3
{
  v4 = a3;
  if (![(VOTElementManager *)self webPageLoadedGenerationMark])
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      if ([v4 isEqualToString:kAXScreenChangePopup])
      {
        self->_lastPopupTime = CFAbsoluteTimeGetCurrent();
        v6 = [(VOTElementManager *)self _currentElement];
        elementBeforePopup = self->_elementBeforePopup;
        self->_elementBeforePopup = v6;

        v8 = VOTLogCommon();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
        {
          sub_10012B164();
        }

LABEL_11:

        goto LABEL_12;
      }

      if ([v4 isEqualToString:kAXScreenChangeMenuBar])
      {
        v9 = [(VOTElementManager *)self _currentElement];
        elementBeforeMenuBar = self->_elementBeforeMenuBar;
        self->_elementBeforeMenuBar = v9;

        v8 = VOTLogCommon();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
        {
          sub_10012B0F4();
        }

        goto LABEL_11;
      }
    }

LABEL_12:
    v11 = [(VOTElementManager *)self _currentElement];
    elementBeforeScreenChange = self->_elementBeforeScreenChange;
    self->_elementBeforeScreenChange = v11;

    [(VOTElementManager *)self setCurrentElement:0];
    [(VOTElementManager *)self _resetItemChooserCache];
    v5 = +[VOTDisplayManager displayManager];
    [v5 setCursorFrameForElement:0];
    goto LABEL_13;
  }

  v5 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B0B8();
  }

LABEL_13:
}

- (void)_handleRealtimeElementUpdate:(id)a3
{
  v4 = a3;
  v13 = v4;
  if (v4 && (v6 = CFGetTypeID(v4), TypeID = AXUIElementGetTypeID(), v5 = v13, v6 == TypeID))
  {
    v8 = [AXUIElement uiElementWithAXElement:v13];
    v9 = [VOTElement elementWithUIElement:v8];
  }

  else
  {
    v9 = [(VOTElement *)self->_currentElement application];
  }

  v10 = [v9 realtimeElements];
  v11 = +[VOTBrailleManager manager];
  [v11 updateRealtimeElements:v10];

  realTimeElementsCache = self->_realTimeElementsCache;
  self->_realTimeElementsCache = v10;
}

- (void)_handleScreenWillWakeNotification:(id)a3
{
  [VOTSharedWorkspace setScreenOn:1 silently:1];
  v4 = [(VOTElementManager *)self delayedNotificationAnnouncementRequest];
  if (v4)
  {
    v5 = v4;
    [(VOTElementManager *)self _systemNotificationInProgressForRequest:v4];
    [(VOTElementManager *)self sendRequest:v5];
  }

  _objc_release_x1();
}

- (void)_handleWebFormControlInteractionStartNotification:(id)a3
{
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  v6 = [(VOTElementManager *)self _currentElement];
  if ([v6 isAlive] && objc_msgSend(v6, "doesHaveTraits:", kAXWebContentTrait))
  {
    v4 = v6;
    webFormControlBeforeInteraction = self->_webFormControlBeforeInteraction;
    self->_webFormControlBeforeInteraction = v4;
  }

  else
  {
    webFormControlBeforeInteraction = self->_webFormControlBeforeInteraction;
    self->_webFormControlBeforeInteraction = 0;
  }
}

- (void)_handleWebFormControlInteractionEndNotification:(id)a3
{
  self->_lastWebKeyboardDismissTime = CFAbsoluteTimeGetCurrent();
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  updateAppFromTimer = self->_updateAppFromTimer;

  [(SCRCTargetSelectorTimer *)updateAppFromTimer dispatchAfterDelay:1.0];
}

- (BOOL)_shouldMoveToLastWebFormControl
{
  if (!self->_webFormControlBeforeInteraction)
  {
    return 0;
  }

  if (CFAbsoluteTimeGetCurrent() - self->_lastWebKeyboardDismissTime < 2.0 && [(VOTElement *)self->_webFormControlBeforeInteraction isAlive])
  {
    v3 = [(VOTElement *)self->_webFormControlBeforeInteraction remoteParent];
    if (v3)
    {
      v4 = v3;
      v5 = [v3 uiElement];
      v6 = [v5 BOOLWithAXAttribute:2025];

      if (v6)
      {
        return 1;
      }
    }

    else
    {
      v8 = [(VOTElement *)self->_webFormControlBeforeInteraction uiElement];
      v9 = [v8 BOOLWithAXAttribute:2025];

      if (v9)
      {
        return 1;
      }
    }
  }

  webFormControlBeforeInteraction = self->_webFormControlBeforeInteraction;
  self->_webFormControlBeforeInteraction = 0;

  return 0;
}

- (void)_handleWebTextMatchSelectedNotification:(id)a3
{
  v4 = [(VOTElement *)self->_currentElement application];
  v13 = [v4 firstElementInApplicationForFocus];

  v5 = [(VOTElementManager *)self _nearestWebElement:v13];
  v6 = [v5 textMarkerRangeForSelection];
  v7 = [v5 textMarkerRangeForSelection];
  [(VOTElementManager *)self _outputWebLineWithMarkerRange:v7 withElement:v5];

  if ([v6 count])
  {
    v8 = [v6 objectAtIndex:0];
    v9 = [v5 elementForTextMarker:v8];

    [(VOTElementManager *)self _setCurrentElement:v9];
    v10 = +[VOTDisplayManager displayManager];
    [v10 setCursorFrameForElement:v9];

    v11 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent DidFocusOnElement];
    [v11 sendEvent:v12];
  }
}

- (void)_handleWebSearchResult:(int64_t)a3 withEvent:(id)a4
{
  v6 = [(VOTElementManager *)self _currentElement:a3];
  [v6 findSearchResult:a3 == 1 withSearchText:self->_webSearchText];
}

- (void)_handleWebTextAvailableNotification:(id)a3
{
  v5 = a3;
  if (!v5 || (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0))
  {
    objc_storeStrong(&self->_webSearchText, a3);
    [(VOTElementRotor *)self->_elementRotor setShowsWebSearchResults:v5 != 0];
    [(VOTElementManager *)self _updateRotorForCurrentElement];
  }
}

- (BOOL)_savedDescriptionToPhoto:(id)a3 description:(id)a4 element:(id)a5
{
  v7 = a3;
  v8 = a4;
  if (([a5 savePhotoLabeliCloud:v8] & 1) == 0)
  {
    if (AXDeviceIsAudioAccessory())
    {
      v9 = 0;
      goto LABEL_12;
    }

    v10 = [v7 absoluteString];
    v11 = [v10 pathExtension];
    v12 = [v11 lowercaseString];

    if ([v12 hasSuffix:@"mov"])
    {
      v13 = UIAccessibilityAddMetadataDescriptionToVideo();
    }

    else
    {
      if (([v12 hasPrefix:@"jp"] & 1) == 0 && !objc_msgSend(v12, "hasSuffix:", @"png"))
      {
        v9 = 0;
        goto LABEL_11;
      }

      v13 = UIAccessibilityAddMetadataDescriptionToImage();
    }

    v9 = v13;
LABEL_11:

    goto LABEL_12;
  }

  v9 = 1;
LABEL_12:

  return v9;
}

- (void)_handleLabelElementAcceptedNotification:(id)a3
{
  v10 = a3;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && self->_labeledElementIdentification)
  {
    v4 = [(VOTElement *)self->_cachedLabelElement url];
    if (![(VOTElementManager *)self _savedDescriptionToPhoto:v4 description:v10 element:self->_cachedLabelElement])
    {
      v5 = +[VOTElementLabelCache sharedManager];
      [v5 storeUserLabel:v10 forIdentification:self->_labeledElementIdentification];

      v6 = [(VOTElement *)self->_currentElement uniqueIdentification];
      v7 = [v6 isEqual:self->_labeledElementIdentification];

      if (v7)
      {
        [(VOTElement *)self->_currentElement setUserDefinedLabel:v10];
      }
    }

    labeledElementIdentification = self->_labeledElementIdentification;
    self->_labeledElementIdentification = 0;

    cachedLabelElement = self->_cachedLabelElement;
    self->_cachedLabelElement = 0;
  }
}

- (void)_resetElementLabel
{
  labeledElementIdentification = self->_labeledElementIdentification;
  if (labeledElementIdentification)
  {
    self->_labeledElementIdentification = 0;

    [(VOTElementManager *)self showElementLabelPanel:0 currentLabel:0];
  }

  cachedLabelElement = self->_cachedLabelElement;
  self->_cachedLabelElement = 0;
}

- (void)_handleMonitorElement:(id)a3
{
  v4 = [(VOTElementManager *)self _currentElement];
  v5 = [v4 application];
  v6 = [v5 bundleIdentifier];

  if (v6)
  {
    v7 = [(NSMutableDictionary *)self->_elementMonitorCache objectForKeyedSubscript:v6];
    if (!v7)
    {
      v7 = +[NSMutableDictionary dictionary];
      [(NSMutableDictionary *)self->_elementMonitorCache setObject:v7 forKeyedSubscript:v6];
    }

    v8 = [VOTSharedWorkspace selectedLanguage];
    v9 = [v7 objectForKeyedSubscript:v4];

    if (v9)
    {
      v10 = [v7 objectForKeyedSubscript:v4];
      v11 = sub_1000516CC(off_1001FDDD0, @"monitored.element.removed", 0, v8);
      v12 = [NSString stringWithFormat:v11, v10];
      v13 = sub_1000095FC(v12, 0, v8);

      [v7 setObject:0 forKeyedSubscript:v4];
      if (![v7 count])
      {
        [(NSMutableDictionary *)self->_elementMonitorCache setObject:0 forKeyedSubscript:v6];
      }

      v14 = VOTLogCommon();
      if (!os_log_type_enabled(v14, OS_LOG_TYPE_INFO))
      {
        goto LABEL_14;
      }

      *buf = 138412290;
      v26 = v4;
      v15 = "Removing monitoring: %@";
      v16 = v14;
      v17 = 12;
    }

    else
    {
      v10 = [(VOTElementManager *)self _monitoredElementCachedText:v4];
      v18 = sub_1000516CC(off_1001FDDD0, @"monitored.element.added", 0, v8);
      v19 = [NSString stringWithFormat:v18, v10];
      v20 = sub_1000095FC(v19, 0, v8);

      [v7 setObject:v10 forKeyedSubscript:v4];
      v14 = VOTLogCommon();
      if (!os_log_type_enabled(v14, OS_LOG_TYPE_INFO))
      {
LABEL_14:

        if ([(NSMutableDictionary *)self->_elementMonitorCache count])
        {
          if (!self->_flags.isMonitoringElements)
          {
            self->_flags.isMonitoringElements = 1;
            v21 = VOTLogCommon();
            if (os_log_type_enabled(v21, OS_LOG_TYPE_INFO))
            {
              *buf = 0;
              _os_log_impl(&_mh_execute_header, v21, OS_LOG_TYPE_INFO, "Starting monitoring of all elements", buf, 2u);
            }

            elementMonitorTimer = self->_elementMonitorTimer;
            v24[0] = _NSConcreteStackBlock;
            v24[1] = 3221225472;
            v24[2] = sub_10007BE28;
            v24[3] = &unk_1001C76E8;
            v24[4] = self;
            [(SCRCTargetSelectorTimer *)elementMonitorTimer dispatchAfterDelay:v24 withBlock:5.0];
          }
        }

        else
        {
          [(SCRCTargetSelectorTimer *)self->_elementMonitorTimer cancel];
          self->_flags.isMonitoringElements = 0;
          v23 = VOTLogCommon();
          if (os_log_type_enabled(v23, OS_LOG_TYPE_INFO))
          {
            *buf = 0;
            _os_log_impl(&_mh_execute_header, v23, OS_LOG_TYPE_INFO, "Stopping monitoring of all elements", buf, 2u);
          }
        }

        goto LABEL_23;
      }

      *buf = 138412546;
      v26 = v4;
      v27 = 2112;
      v28 = v10;
      v15 = "Monitoring: %@, %@";
      v16 = v14;
      v17 = 22;
    }

    _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, v15, buf, v17);
    goto LABEL_14;
  }

  v7 = VOTLogCommon();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_ERROR))
  {
    sub_10012B1D4();
  }

LABEL_23:
}

- (void)_handleLabelElement:(id)a3
{
  obj = [(VOTElementManager *)self _currentElement];
  v4 = [obj uniqueIdentification];
  labeledElementIdentification = self->_labeledElementIdentification;
  self->_labeledElementIdentification = v4;

  objc_storeStrong(&self->_cachedLabelElement, obj);
  v6 = [obj elementStoredUserLabel];
  if (!v6)
  {
    v6 = [obj userDefinedLabel];
    if (!v6)
    {
      v6 = [obj label];
    }
  }

  v7 = v6;
  [(VOTElementManager *)self showElementLabelPanel:1 currentLabel:v6];
}

- (void)showElementLabelPanel:(BOOL)a3 currentLabel:(id)a4
{
  v4 = a3;
  v5 = a4;
  v6 = +[VOTSpringBoardConnection defaultConnection];
  [v6 showElementLabelPanel:v4 currentLabel:v5];
}

- (BOOL)shouldSnarfCrown
{
  v2 = +[VOTWorkspace sharedWorkspace];
  v3 = [v2 useDigitalCrownNavigation];

  return v3;
}

- (void)_handleToggleCrownNavigation:(id)a3
{
  v3 = +[VOTWorkspace sharedWorkspace];
  v4 = [v3 useDigitalCrownNavigation];

  v5 = +[VOTWorkspace sharedWorkspace];
  [v5 setUseDigitalCrownNavigationEnabled:v4 ^ 1];

  v9 = objc_alloc_init(VOTOutputRequest);
  if (v4)
  {
    v6 = @"crown.navigation.off";
  }

  else
  {
    v6 = @"crown.navigation.on";
  }

  v7 = sub_1000511CC(off_1001FDDD0, v6, 0);
  v8 = [(VOTOutputRequest *)v9 addString:v7];

  [(VOTOutputRequest *)v9 send];
}

- (void)_handleStartStopToggle:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  [v4 stopSpeakingAtBoundary:0];

  v5 = +[VOTElement systemAppApplication];
  v6 = +[AXSystemAppServer server];
  v7 = [v6 toggleIncomingCall];

  Current = CFAbsoluteTimeGetCurrent();
  [VOTSharedWorkspace lastTelephonyCallActive];
  v10 = Current - v9;
  v11 = +[AXSubsystemMagicTapToggle sharedInstance];
  v12 = [v11 ignoreLogging];

  if ((v12 & 1) == 0)
  {
    v13 = +[AXSubsystemMagicTapToggle identifier];
    v14 = AXLoggerForFacility();

    v15 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v14, v15))
    {
      v16 = AXColorizeFormatLog();
      v28 = NSStringFromBOOL();
      v17 = _AXStringForArgs();

      if (os_log_type_enabled(v14, v15))
      {
        *buf = 138543362;
        v34 = v17;
        _os_log_impl(&_mh_execute_header, v14, v15, "%{public}@", buf, 0xCu);
      }
    }
  }

  if (v10 <= 10.0)
  {
    v18 = 1;
  }

  else
  {
    v18 = v7;
  }

  if ((v18 & 1) == 0)
  {
    v31[0] = _NSConcreteStackBlock;
    v31[1] = 3221225472;
    v31[2] = sub_10007C44C;
    v31[3] = &unk_1001C7778;
    v31[4] = self;
    v32 = v5;
    v19 = objc_retainBlock(v31);
    if (_AXSSpeakThisEnabled())
    {
      v20 = [sub_100071640() sharedInstance];
      v29[0] = _NSConcreteStackBlock;
      v29[1] = 3221225472;
      v29[2] = sub_10007C58C;
      v29[3] = &unk_1001C9AB0;
      v30 = v19;
      [v20 toggleSpeaking:v29];
    }

    else
    {
      v21 = +[AXSubsystemMagicTapToggle sharedInstance];
      v22 = [v21 ignoreLogging];

      if ((v22 & 1) == 0)
      {
        v23 = +[AXSubsystemMagicTapToggle identifier];
        v24 = AXLoggerForFacility();

        v25 = AXOSLogLevelFromAXLogLevel();
        if (os_log_type_enabled(v24, v25))
        {
          v26 = AXColorizeFormatLog();
          v27 = _AXStringForArgs();
          if (os_log_type_enabled(v24, v25))
          {
            *buf = 138543362;
            v34 = v27;
            _os_log_impl(&_mh_execute_header, v24, v25, "%{public}@", buf, 0xCu);
          }
        }
      }

      (v19[2])(v19);
    }
  }

  if (self->_flags.currentElementAllowsDirectTouch)
  {
    self->_flags.avoidAnnouncingDirectTouchArea = [(VOTElement *)self->_currentElement avoidAnnouncingDirectTouchArea];
  }

  self->_lastPressOnMediaSessionElement = CFAbsoluteTimeGetCurrent();
}

- (void)_handleDoubleTap:(id)a3
{
  if (AXDeviceIsTV())
  {

    [(VOTElementManager *)self __tvOS_toggleAudioDescriptions];
  }

  else
  {
    v4 = [(VOTElementManager *)self _currentElement];
    if (sub_100050834() && !v4)
    {
      v4 = [(VOTElementManager *)self touchContainer];
    }

    [(VOTElementManager *)self setLastUserElementTouchTime:0.0];
    if ([v4 supportsSecondaryActivate])
    {
      if (([v4 doesHaveTraits:kAXPlaysSoundTrait] & 1) == 0)
      {
        v5 = +[VOTOutputManager outputManager];
        v6 = +[VOSOutputEvent DidActivateElement];
        [v5 sendEvent:v6];
      }

      [v4 performDoubleTap];
      if ([v4 doesHaveTraits:kAXLaunchIconTrait])
      {
        cachedLaunchIcons = self->_cachedLaunchIcons;
        v8 = [v4 uniqueIdentification];
        [(NSMutableArray *)cachedLaunchIcons addObject:v8];
      }
    }

    else
    {
      [v4 performSimpleTap];
      [NSThread sleepForTimeInterval:0.2];
      [v4 performSimpleTap:1];
    }

    v9 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self _pressActionResultDelay];
    v10 = v9;
    AXPerformBlockOnMainThreadAfterDelay();
  }
}

- (void)_handleTripleTap:(id)a3
{
  v4 = [(VOTElementManager *)self _currentElement];
  if (sub_100050834() && !v4)
  {
    v4 = [(VOTElementManager *)self touchContainer];
  }

  [v4 performSimpleTap];
  [NSThread sleepForTimeInterval:0.2];
  [v4 performSimpleTap:1];
  [NSThread sleepForTimeInterval:0.2];
  [v4 performSimpleTap:1];
  v5 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent()];
  [(VOTElementManager *)self _pressActionResultDelay];
  v6 = v5;
  AXPerformBlockOnMainThreadAfterDelay();
}

- (BOOL)_useLineFrameBoundsForTouch:(id)a3
{
  x = self->_lineFrame.origin.x;
  y = self->_lineFrame.origin.y;
  width = self->_lineFrame.size.width;
  height = self->_lineFrame.size.height;
  v7 = CGRectZero.origin.y;
  v8 = CGRectZero.size.width;
  v9 = CGRectZero.size.height;
  v10 = a3;
  v14.origin.x = x;
  v14.origin.y = y;
  v14.size.width = width;
  v14.size.height = height;
  v15.origin.x = CGRectZero.origin.x;
  v15.origin.y = v7;
  v15.size.width = v8;
  v15.size.height = v9;
  v11 = !CGRectEqualToRect(v14, v15);
  v12 = [v10 doesHaveTraits:kAXStaticTextTrait | kAXWebContentTrait];

  return v11 & v12;
}

- (void)_updateCurrentWordContextForBook:(id)a3
{
  v4 = a3;
  if ([(NSArray *)self->_lineArray count])
  {
    v5 = [(NSArray *)self->_lineArray objectAtIndex:0];
  }

  else
  {
    v5 = 0;
  }

  v6 = self->_elementUnitOutputRange.length + 1;
  valuePtr[0] = self->_elementUnitOutputRange.location - self->_bookLineRange.location;
  valuePtr[1] = v6;
  v7 = AXValueCreate(kAXValueTypeCFRange, valuePtr);
  v8 = [objc_allocWithZone(NSDictionary) initWithObjectsAndKeys:{v7, @"contextRange", v5, @"startTextMarker", 0}];
  if (v7)
  {
    CFRelease(v7);
  }

  [v4 setCurrentWordContextForBook:v8];
}

- (BOOL)_updateCursorAfterPressForElement:(id)a3 currentElementRange:(_NSRange)a4 request:(id)a5 didHaveCursor:(BOOL)a6 doesHaveCursor:(BOOL)a7
{
  v7 = a6;
  length = a4.length;
  location = a4.location;
  v12 = a3;
  v13 = a5;
  if (location != 0x7FFFFFFF)
  {
    v14 = [v12 selectedTextRange];
    lastSeenLineAndColumn = self->_lastSeenLineAndColumn;
    if (!lastSeenLineAndColumn || (-[NSDictionary objectForKey:](lastSeenLineAndColumn, "objectForKey:", @"lineNumber"), v16 = objc_claimAutoreleasedReturnValue(), v17 = [v16 integerValue], v16, (v17 & 0x8000000000000000) != 0))
    {
      v21 = 0;
      v20 = 0;
      v18 = 0x7FFFFFFFLL;
    }

    else
    {
      v18 = [v12 rangeForLineNumberAndColumn:self->_lastSeenLineAndColumn];
      v20 = v19;
      v21 = 1;
    }

    if (v18 == 0x7FFFFFFF)
    {
      v22 = 0;
    }

    else
    {
      v22 = v21 & !v7;
    }

    if (!v7)
    {
      goto LABEL_19;
    }

    v23 = v21 ^ 1;
    if (!self->_lastSeenLineAndColumn)
    {
      v23 = 1;
    }

    if (v23)
    {
LABEL_19:
      v27 = 0;
    }

    else
    {
      v24 = [v12 rangeForLineNumberAndColumn:?];
      v27 = v14 < v24 || v14 - v24 >= v25;
    }

    if (((v22 | v27) & 1) != 0 && ((lastTextPressAction = self->_lastTextPressAction, lastTextPressAction == 3) || !lastTextPressAction))
    {
      [(VOTElementManager *)self _setSelectedTextRange:v18 onElement:0 refreshBraille:v12, 1];
      v29 = [v12 valueForRange:{v18, v20}];
      if ([v29 length])
      {
        v30 = sub_1000511CC(off_1001FDDD0, @"cursor.at.start.of.line", 0);
        v31 = [NSString stringWithFormat:v30, v29];
        v32 = [v13 addString:v31];
      }

      self->_lastTextPressAction = 1;
    }

    else
    {
      if (v7)
      {
        v33 = 0;
        v34 = 1;
      }

      else
      {
        v34 = [v12 doesHaveTraits:kAXTextAreaTrait];
        v35 = [v12 application];
        if ([v35 isMail])
        {
          v33 = [v12 doesHaveTraits:kAXWebContentTrait];
        }

        else
        {
          v33 = 0;
        }
      }

      if ((v14 != location) & v34) != 0 || (v33)
      {
        [(VOTElementManager *)self _setSelectedTextRange:location onElement:0 refreshBraille:v12, 1];
        v39 = sub_1000511CC(off_1001FDDD0, @"cursor.at.start", 0);
        v40 = [v13 addString:v39];

        v38 = 2;
      }

      else
      {
        [(VOTElementManager *)self _setSelectedTextRange:location + length onElement:0 refreshBraille:v12, 1];
        v36 = sub_1000511CC(off_1001FDDD0, @"cursor.at.end", 0);
        v37 = [v13 addString:v36];

        v38 = 3;
      }

      self->_lastTextPressAction = v38;
    }
  }

  return location != 0x7FFFFFFF;
}

- (void)_performPressOnElement:(id)a3 withEvent:(id)a4 centerPoint:(CGPoint)a5
{
  y = a5.y;
  x = a5.x;
  v20 = a3;
  v8 = a4;
  v9 = v8;
  v10 = CGPointZero.y;
  if (CGPointZero.x == x && v10 == y)
  {
    v12 = [v8 objectForIndex:{101, CGPointZero.x, v10}];
    [v12 pointValue];
    v14 = v13;
    v16 = v15;

    [v20 frame];
    v22.x = v14;
    v22.y = v16;
    if (CGRectContainsPoint(v23, v22))
    {
      v17 = [v9 objectForIndex:111];
      [v17 floatValue];
      v19 = v18;

      [v20 performTapAtPoint:1 withForce:v14 playSound:{v16, v19}];
    }
  }

  else
  {
    [v20 performSimpleTap];
  }
}

- (id)_votElementFromWebElementHierarchyIndexPath:(id)a3 webArea:(id)a4
{
  v5 = a3;
  v6 = a4;
  if ([v5 length])
  {
    v7 = 0;
    v8 = 0;
    v9 = v6;
    while (1)
    {
      v10 = [v5 indexAtPosition:v7];
      v11 = [v9 children];
      if (v10 >= [v11 count])
      {
        break;
      }

      v12 = [v11 objectAtIndex:v10];

      v8 = v12;
      ++v7;
      v9 = v8;
      if ([v5 length] <= v7)
      {
        goto LABEL_7;
      }
    }

    v13 = 0;
  }

  else
  {
    v8 = 0;
    v9 = v6;
LABEL_7:
    v8 = v8;
    v13 = v8;
  }

  return v13;
}

- (id)_currentlyFocusedSafariTabIdentifier:(id)a3
{
  v3 = a3;
  if ([v3 doesHaveTraits:kAXWebContentTrait])
  {
    v4 = [v3 remoteParent];
    v5 = [v4 window];

    v6 = [v5 safariWindowActiveTabDocumentIdentifier];
  }

  else
  {
    v6 = 0;
  }

  return v6;
}

- (id)_buildWebRefocusHashFromURL:(id)a3 activeTabDocumentIdentifier:(id)a4
{
  v5 = a3;
  v6 = a4;
  v7 = [NSString alloc];
  v8 = v7;
  if (v5)
  {
    v9 = [v5 absoluteString];
    v10 = [v8 initWithFormat:@"Refocus.%@.%@", v9, v6];
  }

  else
  {
    v10 = [v7 initWithFormat:@"Refocus.%@.%@", @"None", v6];
  }

  return v10;
}

- (void)_cachePreviousWebElement:(id)a3
{
  v4 = a3;
  v5 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    *v13 = 0;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "Caching a new previous web element", v13, 2u);
  }

  v6 = [v4 webArea];
  v7 = [v4 webHierarchyIndexPathFromWebArea:v6];
  v8 = [v4 webAreaURL];
  v9 = [(VOTElementManager *)self _currentlyFocusedSafariTabIdentifier:v4];
  v10 = v9;
  if (v6 && v7 && v8 && v9)
  {
    v11 = [(VOTElementManager *)self _buildWebRefocusHashFromURL:v8 activeTabDocumentIdentifier:v9];
    v12 = [[_VOTWebElementMetadata alloc] initFromElement:v4 indexPath:v7];
    [(NSMutableDictionary *)self->_previousWebElements setObject:v12 forKey:v11];
  }
}

- (id)_findPreviousWebElement:(id)a3
{
  v4 = a3;
  v5 = [v4 webArea];
  v6 = [(VOTElementManager *)self _currentlyFocusedSafariTabIdentifier:v4];
  v7 = [v4 webAreaURL];

  v8 = [(VOTElementManager *)self _buildWebRefocusHashFromURL:v7 activeTabDocumentIdentifier:v6];
  v9 = [(NSMutableDictionary *)self->_previousWebElements objectForKey:v8];
  v10 = v9;
  if (v9)
  {
    v11 = [v9 indexPathFromWebArea];
    v12 = [(VOTElementManager *)self _votElementFromWebElementHierarchyIndexPath:v11 webArea:v5];

    v13 = [v12 label];
    v14 = [v10 label];
    v15 = [v13 isEqualToString:v14];

    if (v15)
    {
      v16 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v16, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, "Found previous web element using index path", buf, 2u);
      }

      v12 = v12;
      v17 = v12;
      goto LABEL_21;
    }

    v18 = [VOTElement alloc];
    [v10 centerPoint];
    v19 = [(VOTElement *)v18 initWithPosition:?];
    v20 = v19;
    if (v19 && [(VOTElement *)v19 doesHaveTraits:kAXWebContentTrait])
    {
      v21 = [(VOTElement *)v20 webAreaURL];
      v22 = [v10 webAreaURL];
      if ([v21 isEqual:v22])
      {
        [(VOTElement *)v20 label];
        v23 = v29 = v21;
        v24 = [v10 label];
        v28 = [v23 isEqualToString:v24];

        if (v28)
        {
          v25 = VOTLogWebPageMovement();
          if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
          {
            *v30 = 0;
            _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "Found previous web element using fallback hit test", v30, 2u);
          }

          v17 = v20;
LABEL_20:

          goto LABEL_21;
        }
      }

      else
      {
      }
    }

    v26 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v26, OS_LOG_TYPE_ERROR))
    {
      sub_10012B23C();
    }

    v17 = 0;
    goto LABEL_20;
  }

  v12 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v12, OS_LOG_TYPE_ERROR))
  {
    sub_10012B27C();
  }

  v17 = 0;
LABEL_21:

  return v17;
}

- (void)_handlePerformPressAction:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self _currentElement];
  if (sub_100050834() && !v5)
  {
    v5 = [(VOTElementManager *)self touchContainer];
  }

  v6 = kAXLaunchIconTrait;
  if ([(VOTElement *)v5 doesHaveTraits:kAXLaunchIconTrait])
  {
    cachedLaunchIcons = self->_cachedLaunchIcons;
    v8 = [(VOTElement *)v5 uniqueIdentification];
    [(NSMutableArray *)cachedLaunchIcons addObject:v8];
  }

  if ([v4 isTouchEvent] && objc_msgSend(VOTSharedWorkspace, "typingMode") == 1 && -[VOTElement keyboardKeyAllowsTouchTyping](v5, "keyboardKeyAllowsTouchTyping"))
  {
    self->_flags.didTouchTypingOutputStart = 0;
  }

  [(VOTElement *)v5 centerPoint];
  v10 = v9;
  v12 = v11;
  if ([(VOTElement *)v5 isReadingContent])
  {
    bookSubelement = self->_bookSubelement;
    if (!bookSubelement)
    {
      if ([(VOTElement *)v5 supportsFrameForRange])
      {
        v86.origin.x = CGRectZero.origin.x;
        v86.origin.y = CGRectZero.origin.y;
        v86.size.width = CGRectZero.size.width;
        v86.size.height = CGRectZero.size.height;
        if (!CGRectEqualToRect(self->_lineFrame, v86))
        {
          MidX = CGRectGetMidX(self->_lineFrame);
          MidY = CGRectGetMidY(self->_lineFrame);
          v49 = [v4 objectForIndex:111];
          [v49 floatValue];
          v51 = v50;

          [(VOTElement *)v5 performTapAtPoint:1 withForce:MidX playSound:MidY, v51];
          goto LABEL_16;
        }
      }

      [(VOTElementManager *)self _updateCurrentWordContextForBook:v5];
      bookSubelement = v5;
    }

    [(VOTElement *)bookSubelement performSimpleTap];
LABEL_16:
    v80 = 0;
    v14 = 0;
LABEL_57:
    self->_lastTextPressAction = 0;
    goto LABEL_58;
  }

  if ([(VOTElement *)v5 isInTableCell])
  {
    self->_previousTableOrCollectionViewRowTime = CFAbsoluteTimeGetCurrent();
    v15 = [(VOTElement *)v5 parentTableOrCollectionView];
    if (v15)
    {
      v16 = objc_opt_new();
      v17 = [(VOTElement *)v5 indexPathAsRange];
      [v16 setIndexPath:{v17, v18}];
      v19 = [(VOTElement *)v5 label];
      [v16 setLabel:v19];

      v20 = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
      [v20 setObject:v16 forKeyedSubscript:v15];

      v21 = [(VOTElementManager *)self previousTableOrCollectionViewList];
      [v21 addObject:v15];
    }

    v22 = [(VOTElement *)v5 application];
    [(VOTElementManager *)self setPreviousTableOrCollectionViewApplication:v22];
  }

  v79 = v6;
  v23 = kAXWebContentTrait;
  if ([(VOTElement *)v5 doesHaveTraits:kAXWebContentTrait])
  {
    [(VOTElementManager *)self _cachePreviousWebElement:v5];
  }

  v24 = kAXIsEditingTrait;
  v25 = kAXTextEntryTrait;
  if ([(VOTElement *)v5 doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    v26 = ![(VOTElement *)v5 shouldIgnoreTextEditingTrait];
  }

  else
  {
    v26 = 0;
  }

  v27 = CGRectGetMidX(self->_lineFrame);
  v28 = CGRectGetMidY(self->_lineFrame);
  v29 = +[VOTElement systemWideElement];
  [v29 convertPoint:-[VOTElement windowContextId](v5 toContextId:{"windowContextId"), v27, v28}];
  v31 = v30;
  v33 = v32;

  v78 = v26;
  if ((v26 & 1) != 0 || ![(VOTElement *)v5 doesHaveTraits:kAXTextAreaTrait])
  {
    v34 = 0;
  }

  else
  {
    v34 = [(VOTElement *)v5 dataDetectorURL:v31, v33];
  }

  v35 = [(VOTElementManager *)self _useLineFrameBoundsForTouch:v5];
  if ([(VOTElement *)v5 doesHaveAllTraits:v25 | v24]&& ![(VOTElement *)v5 shouldIgnoreTextEditingTrait])
  {
    elementUnitIndex = [(VOTElement *)v5 selectedTextRange];
  }

  else
  {
    elementUnitIndex = self->_elementUnitIndex;
    if (elementUnitIndex == -1)
    {
      v37 = 0;
      v38 = 0x7FFFFFFFLL;
      goto LABEL_36;
    }
  }

  v38 = [(VOTElement *)v5 lineRangeForPosition:elementUnitIndex];
LABEL_36:
  if (v38 != 0x7FFFFFFF)
  {
    v39 = v4;
    v40 = [(VOTElement *)v5 attributedValueForRange:v38, v37];
    v41 = -[VOTElementManager _textAttachmentElementForString:inRange:](self, "_textAttachmentElementForString:inRange:", v40, 0, [v40 length]);
    if (v41)
    {
      v42 = v41;
      [v41 performSimpleTap];

      v14 = 0;
      v80 = 0;
      v4 = v39;
LABEL_56:

      v6 = v79;
      goto LABEL_57;
    }
  }

  if ((v34 != 0) | v35 & 1)
  {
    v43 = [v4 objectForIndex:111];
    [v43 floatValue];
    v45 = v44;

    [(VOTElement *)v5 performTapAtPoint:1 withForce:v31 playSound:v33, v45];
    v14 = 0;
    v80 = 0;
    goto LABEL_56;
  }

  if ([(VOTElement *)v5 doesHaveAllTraits:kAXStaticTextTrait | v23])
  {
    v46 = [(VOTElement *)v5 previousElement];
    if ([v46 doesHaveTraits:kAXToggleTrait | kAXRadioButtonTrait])
    {
      v80 = [v46 toggleStatusLabel];
      v14 = v46;
    }

    else
    {
      v14 = 0;
      v80 = 0;
    }
  }

  else
  {
    v14 = 0;
    v80 = 0;
  }

  [(VOTElementManager *)self _performPressOnElement:v5 withEvent:v4 centerPoint:v10, v12];
  if (![(VOTElement *)v5 doesHaveAllTraits:v25 | v24]|| [(VOTElement *)v5 shouldIgnoreTextEditingTrait])
  {
    if ([(VOTElement *)v5 doesHaveTraits:kAXStartsMediaSessionTrait])
    {
      v52 = +[VOTOutputManager outputManager];
      [v52 clearQueue];

      v53 = +[VOTOutputManager outputManager];
      [v53 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:&off_1001D9FE0];

      v54 = VOTLogCommon();
      if (os_log_type_enabled(v54, OS_LOG_TYPE_INFO))
      {
        *buf = 138412290;
        v85 = v5;
        _os_log_impl(&_mh_execute_header, v54, OS_LOG_TYPE_INFO, "Media Session element : %@", buf, 0xCu);
      }

      self->_lastPressOnMediaSessionElement = CFAbsoluteTimeGetCurrent();
    }

    v55 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self _pressActionResultDelay];
    v83 = v55;
    v56 = v55;
    AXPerformBlockOnMainThreadAfterDelay();

    goto LABEL_56;
  }

  v67 = v4;
  v68 = [objc_allocWithZone(VOTOutputRequest) init];
  v69 = [(VOTElement *)v5 textInputElement];
  if (v69)
  {
    v70 = v69;
    v71 = [(VOTElement *)v5 textInputElementRange];
    v73 = v72;
  }

  else
  {
    v70 = v5;
    v74 = [(VOTElement *)v70 value];
    v73 = [v74 length];

    v71 = 0;
  }

  v75 = [(VOTElementManager *)self _updateCursorAfterPressForElement:v70 currentElementRange:v71 request:v73 didHaveCursor:v68 doesHaveCursor:v78, 1];
  [(VOTElementManager *)self sendRequest:v68];
  if (v75)
  {
    v76 = [(VOTElement *)v5 selectedTextRange];
    [(VOTElementManager *)self _elementSelectionRangeDidChange:v76 reason:v77, 0];
  }

  [(VOTElementManager *)self _updateLastFirstResponderChangedTime];

  v4 = v67;
  v6 = v79;
LABEL_58:
  if ([(VOTElement *)v5 doesHaveTraits:kAXLinkTrait])
  {
    v57 = [(VOTElement *)v5 linkedElement];
    if (v57)
    {
      [(VOTElementManager *)self _setCurrentElement:v57];
      v58 = v57;

      v5 = v58;
    }
  }

  [(VOTElement *)v5 updateTraits];
  v59 = kAXIsEditingTrait;
  if ([(VOTElement *)v5 doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait])
  {
    [(VOTElementManager *)self _disableQuickNavStateTemporarily];
  }

  if ([(VOTElement *)v5 doesHaveTraits:kAXTabButtonTrait])
  {
    v60 = [(VOTElement *)v5 application];
    v61 = [(VOTElement *)v5 isValidForApplication:v60];

    if ((v61 & 1) == 0)
    {
      v62 = [objc_allocWithZone(VOTElement) initWithPosition:{v10, v12}];
      v63 = v62;
      if (v62 && ([v62 isEqual:v5] & 1) == 0)
      {
        [(VOTElementManager *)self _setCurrentElement:v63];
        v64 = v63;

        v5 = v64;
      }
    }
  }

  v65 = [(VOTElement *)v5 copy];
  AXPerformBlockOnMainThreadAfterDelay();
  if ([(VOTElement *)v5 doesHaveTraits:kAXWebContentTrait])
  {
    v81 = v80;
    v82 = v14;
    AXPerformBlockOnMainThreadAfterDelay();
  }

  if ([(VOTElement *)v5 doesHaveTraits:v6]&& ![(VOTElement *)v5 doesHaveTraits:v59])
  {
    [(VOTElementManager *)self _setCurrentElement:0];
    v66 = +[VOTDisplayManager displayManager];
    [v66 setCursorFrame:{CGRectZero.origin.x, CGRectZero.origin.y, CGRectZero.size.width, CGRectZero.size.height}];
  }

  self->_lastActivationTime = CFAbsoluteTimeGetCurrent();
}

- (void)_disableQuickNavStateTemporarily
{
  v3 = VOTLogCommon();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B2BC();
  }

  if (GSEventIsHardwareKeyboardAttached())
  {
    v4 = +[VOTKeyboardManager keyboardManager];
    v5 = [v4 isQuickNavOn];

    if (v5)
    {
      [VOTSharedWorkspace temporarilyChangeQuickNavState:0];
      [(VOTElementManager *)self _handleQuickNavFeedback:0];
      self->_lastTemporaryQuickNavDisableTime = CFAbsoluteTimeGetCurrent();
    }
  }
}

- (void)_handlePerformCustomAction:(id)a3
{
  v4 = a3;
  if (self->_customActionIndex == 0x7FFFFFFFFFFFFFFFLL)
  {
    goto LABEL_25;
  }

  v5 = [(VOTElementManager *)self _currentCachedCustomActionCategories];
  v6 = [(VOTElementManager *)self elementRotor];
  v7 = [v5 objectAtIndexedSubscript:{objc_msgSend(v6, "customActionIndex")}];
  v8 = [v7 actions];

  customActionIndex = self->_customActionIndex;
  if ((customActionIndex & 0x8000000000000000) != 0 || customActionIndex >= [v8 count])
  {
LABEL_24:

LABEL_25:
    v5 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent BoundaryEncountered];
    [v5 sendEvent:v8];
    goto LABEL_26;
  }

  v10 = [v8 objectAtIndexedSubscript:self->_customActionIndex];
  v11 = [(VOTElement *)self->_currentElement indexPathAsRange];
  v13 = v12;
  v14 = [(VOTElement *)self->_currentElement uiElement];
  [v14 updateCache:2078];

  if (v11 != [(VOTElement *)self->_currentElement indexPathAsRange]|| v13 != v15)
  {
    v16 = VOTLogCommon();
    if (os_log_type_enabled(v16, OS_LOG_TYPE_INFO))
    {
      LOWORD(v30) = 0;
      _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, "Custom action has gone to wrong cell!", &v30, 2u);
    }

    v17 = [(VOTElement *)self->_currentElement parentTableOrCollectionView];
    v18 = v17;
    if (v17)
    {
      v19 = [v17 elementAtRow:v11 andColumn:v13];
      if (([v19 isEqual:self->_currentElement] & 1) == 0)
      {
        [(VOTElementManager *)self _setCurrentElement:v19];
        v20 = VOTLogCommon();
        if (os_log_type_enabled(v20, OS_LOG_TYPE_INFO))
        {
          v30 = 138412290;
          v31 = v19;
          _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "Resetting element to %@", &v30, 0xCu);
        }
      }
    }
  }

  [v10 activationPoint];
  if (CGPointZero.x == v22 && CGPointZero.y == v21)
  {
    v23 = [v10 performWithContext:self];
  }

  else
  {
    currentElement = self->_currentElement;
    [v10 activationPoint];
    v23 = [VOTElement performTapAtPoint:"performTapAtPoint:withForce:playSound:" withForce:0 playSound:?];
  }

  v25 = v23;
  v26 = +[VOTOutputManager outputManager];
  v27 = +[VOSOutputEvent DidActivateElement];
  [v26 sendEvent:v27];

  if (!v25)
  {

    goto LABEL_24;
  }

  v28 = [(VOTElement *)self->_currentElement customRotorActions];
  v29 = [v28 containsObject:v10];

  if ((v29 & 1) == 0)
  {
    self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

LABEL_26:
}

- (void)_handlePerformAudiographAction:(id)a3
{
  if (!AXDeviceSupportsSonification())
  {
    return;
  }

  v21 = [(VOTElementManager *)self availableAudiographActionsForElement:self->_currentElement];
  if (![v21 containsObject:self->_audiographActionIdentifier])
  {
    goto LABEL_16;
  }

  v4 = +[VOTAudiographManager sharedManager];
  v5 = +[VOTOutputManager outputManager];
  audiographActionIdentifier = self->_audiographActionIdentifier;
  v7 = off_1001FDDD0;
  v8 = [(VOTElement *)self->_currentElement language];
  v9 = sub_1000511CC(v7, @"search.rotor.audiograph.describe.chart", v8);
  LODWORD(audiographActionIdentifier) = [(NSString *)audiographActionIdentifier isEqualToString:v9];

  if (!audiographActionIdentifier)
  {
    v11 = self->_audiographActionIdentifier;
    v12 = off_1001FDDD0;
    v13 = [(VOTElement *)self->_currentElement language];
    v14 = sub_1000511CC(v12, @"search.rotor.audiograph.chart.details", v13);
    LODWORD(v11) = [(NSString *)v11 isEqualToString:v14];

    if (v11)
    {
      v10 = [(VOTElement *)self->_currentElement chartDescriptor];
      if (v10)
      {
        v15 = +[AXSpringBoardServer server];
        v16 = [v10 dictionaryRepresentation];
        [v15 showRemoteView:5 withData:v16];
      }

      goto LABEL_9;
    }

    v17 = self->_audiographActionIdentifier;
    v18 = off_1001FDDD0;
    v19 = [(VOTElement *)self->_currentElement language];
    v20 = sub_1000511CC(v18, @"search.rotor.audiograph.play.sonification", v19);
    LODWORD(v17) = [(NSString *)v17 isEqualToString:v20];

    if (v17)
    {
      if ([v4 isScrubbing])
      {
        [v4 endScrubbingSession];
      }

      if (([v4 isPlaying] & 1) == 0)
      {
        [v4 play];
      }

      goto LABEL_17;
    }

LABEL_16:
    v4 = +[VOTOutputManager outputManager];
    v5 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v5];
    goto LABEL_17;
  }

  v10 = [(VOTElement *)self->_currentElement chartStructureDescription];
  [v5 speakSimpleString:v10];
LABEL_9:

LABEL_17:
}

- (void)_handleSimpleTap:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (AXDeviceIsTV())
  {
    if ([v4 origin] == 4 || objc_msgSend(v4, "origin") == 5 || objc_msgSend(v4, "origin") == 6)
    {
      if ([(VOTElementManager *)self isItemChooserVisible])
      {
        [(VOTElementManager *)self _closeItemChooser];
      }

      else
      {
        [(VOTElementManager *)self __handleTVSelectButtonClicked];
      }

      goto LABEL_50;
    }

    v13 = +[AXSubsystemVoiceOver sharedInstance];
    v14 = [v13 ignoreLogging];

    if (v14)
    {
      goto LABEL_50;
    }

    v15 = +[AXSubsystemVoiceOver identifier];
    v10 = AXLoggerForFacility();

    v16 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v10, v16))
    {
      v17 = AXColorizeFormatLog();
      v18 = _AXStringForArgs();
      if (os_log_type_enabled(v10, v16))
      {
        *buf = 138543362;
        v26 = v18;
        _os_log_impl(&_mh_execute_header, v10, v16, "%{public}@", buf, 0xCu);
      }
    }

LABEL_12:

    goto LABEL_50;
  }

  if ([(VOTElementManager *)self _shouldSendTapStraightToSystem])
  {
    v5 = [v4 objectForIndex:101];
    [v5 pointValue];
    v7 = v6;
    v9 = v8;

    v10 = +[VOTElement systemWideElement];
    [v10 performSimpleTapAtPoint:0 forElement:v7, v9];
    goto LABEL_12;
  }

  v11 = [v4 command];
  if ([v11 isEqualToString:kVOTEventCommandSplitTapTap])
  {
    v12 = [(VOTElementManager *)self currentElementAllowsDirectTouch];

    if (v12)
    {
      goto LABEL_50;
    }
  }

  else
  {
  }

  if (self->_flags.tapShouldHandleAutofill)
  {
    [(VOTElementManager *)self _handlePerformTapAutofill:v4];
  }

  else if (self->_flags.tapShouldHandleTextOperation)
  {
    [(VOTElementManager *)self _handlePerformTextOperation:v4];
  }

  else if (-[VOTRotor currentRotorType](self->_elementRotor, "currentRotorType") != 54 || (customActionIndex = self->_customActionIndex, customActionIndex == 0x7FFFFFFFFFFFFFFFLL) || (-[VOTElementManager _currentCustomActions](self, "_currentCustomActions"), v20 = objc_claimAutoreleasedReturnValue(), v21 = [v20 count], v20, customActionIndex >= v21))
  {
    if (AXDeviceSupportsSonification() && [(VOTRotor *)self->_elementRotor currentRotorType]== 65 && self->_audiographActionIdentifier && [(VOTElement *)self->_currentElement supportsAudiographs])
    {
      [(VOTElementManager *)self _handlePerformAudiographAction:v4];
    }

    else if (self->_inTextProcessingRotorMode && self->_misspelledWordReplacementCycleIndex != 0x7FFFFFFFFFFFFFFFLL)
    {
      [(VOTElementManager *)self _processMisspelledWordTextReplacement];
    }

    else if ([(VOTRotor *)self->_elementRotor currentRotorType]== 96 && (copiedSpeechIndex = self->_copiedSpeechIndex, copiedSpeechIndex != 0x7FFFFFFFFFFFFFFFLL))
    {
      if (copiedSpeechIndex >= 1 && copiedSpeechIndex == [(NSMutableArray *)self->_copiedSpeechItems count])
      {
        [(VOTElementManager *)self _handleClearCopiedSpeech];
      }

      else
      {
        [(VOTElementManager *)self _handlePasteCopiedSpeech];
      }
    }

    else
    {
      if (self->_flags.wasSendingToNativeSlide)
      {
        [(VOTElementManager *)self _endNativeSliding:1];
      }

      [(VOTElementManager *)self _handlePerformPressAction:v4];
      v23 = [(VOTElement *)self->_currentElement application];
      v24 = [v23 bundleIdentifier];

      if (([v24 hasPrefix:@"com.apple."] & 1) == 0)
      {
        AXPerformBlockOnMainThreadAfterDelay();
      }
    }
  }

  else
  {
    [(VOTElementManager *)self _handlePerformCustomAction:v4];
  }

LABEL_50:
}

- (void)_handleAutomationGeneratedTouchUpEvent:(id)a3
{
  v4 = a3;
  v13 = [v4 objectForIndex:114];
  v5 = [(VOTElementManager *)self fingersFromTouchCommands];
  [v5 removeObjectForKey:v13];

  v6 = [(VOTElementManager *)self fingersFromTouchCommands];
  v7 = [v6 allKeys];
  v8 = [v7 count];

  if (v8)
  {
    [(VOTElementManager *)self _handleAutomationGeneratedChordChangeEvent:v4];
  }

  else
  {
    [v4 touchPoint];
    v10 = v9;
    v12 = v11;

    [(VOTElementManager *)self _sendAutomationTouchCommand:6 location:v10, v12];
  }
}

- (void)_handleAutomationGeneratedTouchDownEvent:(id)a3
{
  v4 = a3;
  v14 = [v4 objectForIndex:114];
  [v4 touchPoint];
  v5 = [NSValue valueWithPoint:?];
  v6 = [(VOTElementManager *)self fingersFromTouchCommands];
  [v6 setObject:v5 forKey:v14];

  v7 = [(VOTElementManager *)self fingersFromTouchCommands];
  v8 = [v7 allKeys];
  v9 = [v8 count];

  if (v9 < 2)
  {
    [v4 touchPoint];
    v11 = v10;
    v13 = v12;

    [(VOTElementManager *)self _sendAutomationTouchCommand:1 location:v11, v13];
  }

  else
  {
    [(VOTElementManager *)self _handleAutomationGeneratedChordChangeEvent:v4];
  }
}

- (void)_handleAutomationGeneratedTouchMoveEvent:(id)a3
{
  v4 = a3;
  v11 = [v4 objectForIndex:114];
  [v4 touchPoint];
  v5 = [NSValue valueWithPoint:?];
  v6 = [(VOTElementManager *)self fingersFromTouchCommands];
  [v6 setObject:v5 forKey:v11];

  [v4 touchPoint];
  v8 = v7;
  v10 = v9;

  [(VOTElementManager *)self _sendAutomationTouchCommand:2 location:v8, v10];
}

- (void)_handleAutomationGeneratedTouchCancelEvent:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self fingersFromTouchCommands];
  [v5 removeAllObjects];

  [v4 touchPoint];
  v7 = v6;
  v9 = v8;

  [(VOTElementManager *)self _sendAutomationTouchCommand:8 location:v7, v9];
}

- (void)_handleAutomationGeneratedChordChangeEvent:(id)a3
{
  v4 = a3;
  v5 = +[AXEventTapManager sharedManager];
  [v4 touchPoint];
  v6 = [AXEventRepresentation touchRepresentationWithHandType:5 location:?];
  [v6 setSenderID:0x8000000817319377];
  v7 = [(VOTElementManager *)self fingersFromTouchCommands];
  v8 = [v7 allKeys];

  v12 = 0;
  v13 = &v12;
  v14 = 0x3032000000;
  v15 = sub_100068050;
  v16 = sub_100068060;
  v17 = +[NSMutableArray array];
  v11[0] = _NSConcreteStackBlock;
  v11[1] = 3221225472;
  v11[2] = sub_10007F400;
  v11[3] = &unk_1001C9AD8;
  v11[4] = self;
  v11[5] = &v12;
  [v8 enumerateObjectsUsingBlock:v11];
  v9 = v13[5];
  v10 = [v6 handInfo];
  [v10 setPaths:v9];

  [v5 sendHIDSystemEvent:v6 senderID:0x8000000817319377];
  _Block_object_dispose(&v12, 8);
}

- (void)_sendAutomationTouchCommand:(unsigned int)a3 location:(CGPoint)a4
{
  y = a4.y;
  x = a4.x;
  v6 = *&a3;
  v8 = +[AXEventTapManager sharedManager];
  v7 = [AXEventRepresentation touchRepresentationWithHandType:v6 location:x, y];
  [v7 setSenderID:0x8000000817319377];
  [v8 sendHIDSystemEvent:v7 senderID:0x8000000817319377];
}

- (void)_handleSimulatedForceTouchEvent:(id)a3
{
  v4 = [(VOTElementManager *)self lastEventCommand];
  v5 = [v4 isEqualToString:kVOTEventCommandSimulatedForceTouch];

  if (v5 && self->_didPeekEvent)
  {
    AXForceTouchThresholdPeek();
    v7 = v6;
    v8 = 1;
    AXForceTouchThresholdPop();
    v10 = v9;
  }

  else
  {
    v7 = 20.0;
    AXForceTouchThresholdPeek();
    v10 = v11;
    v8 = 0;
  }

  v19 = [(VOTElementManager *)self _currentElement];
  v12 = [v19 windowContextId];
  [v19 centerPoint];
  if (v7 < v10)
  {
    v15 = v13;
    v16 = v14;
    do
    {
      v17 = +[VOTElement systemWideElement];
      [v17 postFingerTouchAtPoint:v12 withForce:v15 withContextId:{v16, v7}];

      usleep(0x1388u);
      v7 = v7 + 20.0;
    }

    while (v7 < v10);
  }

  if (([(NSMutableArray *)self->_touchEventElements containsObject:v19]& 1) == 0)
  {
    [(NSMutableArray *)self->_touchEventElements addObject:v19];
  }

  v18 = 3.0;
  if (v8)
  {
    v18 = 0.5;
  }

  [(SCRCTargetSelectorTimer *)self->_simulatedForceLiftTimer dispatchAfterDelay:v18];
  self->_didPeekEvent = v8 ^ 1;
}

- (void)_handleWatchWakeTap:(id)a3
{
  v4 = a3;
  v5 = AXLogTapticTime();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    v8 = 138412290;
    v9 = v4;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "_handleWatchWakeTap: %@", &v8, 0xCu);
  }

  v6 = +[AXSettings sharedInstance];
  v7 = [v6 voiceOverTapticTimeMode];

  if (v7)
  {
    [(VOTElementManager *)self _handleUnmuteEligibleEventOccured];
    [(VOTElementManager *)self _handleScreenOn];
  }
}

- (void)_handleToggleSettingsHUD:(id)a3
{
  v4 = a3;
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 securePayAssertionActive];

  if (v6)
  {
    v7 = AXLogAssertions();
    if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
    {
      LOWORD(v15) = 0;
      _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_DEFAULT, "Not processing quick settings because secure pay mode active", &v15, 2u);
    }
  }

  else
  {
    v7 = [[AXQuickSettingsData alloc] init];
    v8 = [(VOTElementManager *)self _appInfoForCurrentElement];
    v10 = v9;
    v11 = [(VOTElement *)self->_currentElement webAreaURL];
    v12 = [v11 host];
    [v7 setWebAreaURL:v12];

    [v7 setFrontmostAppIdentifier:v8];
    v13 = VOTLogCommon();
    if (os_log_type_enabled(v13, OS_LOG_TYPE_DEFAULT))
    {
      v15 = 138412290;
      v16 = v7;
      _os_log_impl(&_mh_execute_header, v13, OS_LOG_TYPE_DEFAULT, "Launching settings HUD with data %@", &v15, 0xCu);
    }

    v14 = +[AXSpringBoardServer server];
    [v14 launchVoiceOverQuickSettingsViewService:v7];
  }
}

- (void)_handleWatchWakeDoubleTap:(id)a3
{
  v4 = a3;
  v5 = AXLogTapticTime();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    v9 = 138412290;
    v10 = v4;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "_handleWatchWakeDoubleTap: %@", &v9, 0xCu);
  }

  if ([(VOTElementManager *)self _canActivateTapticTime])
  {
    v6 = +[AXTapticTimeManager sharedInstance];
    v7 = +[AXSettings sharedInstance];
    [v6 outputHoursAndMinutes:{objc_msgSend(v7, "voiceOverTapticTimeEncoding")}];

    v8 = dispatch_get_global_queue(-32768, 0);
    dispatch_async(v8, &stru_1001C9AF8);
  }

  else
  {
    [(VOTElementManager *)self _handleUnmuteEligibleEventOccured];
    v8 = [VOTEvent internalEventWithCommand:kVOTEventCommandSimpleTap info:0];
    [(VOTElementManager *)self _handleDoubleTap:v8];
  }
}

- (void)_handleWatchWakeTripleTap:(id)a3
{
  v4 = a3;
  v5 = AXLogTapticTime();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
  {
    v8 = 138412290;
    v9 = v4;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "_handleWatchWakeTripleTap: %@", &v8, 0xCu);
  }

  if ([(VOTElementManager *)self _canActivateTapticTime])
  {
    v6 = +[AXTapticTimeManager sharedInstance];
    v7 = +[AXSettings sharedInstance];
    [v6 outputMinutes:{objc_msgSend(v7, "voiceOverTapticTimeEncoding")}];
  }

  else
  {
    [(VOTElementManager *)self _handleUnmuteEligibleEventOccured];
    v6 = [VOTEvent internalEventWithCommand:kVOTEventCommandDoubleTap info:0];
    [(VOTElementManager *)self _handleDoubleTap:v6];
  }
}

- (void)_handleActivateHomeButton:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateHomeButton];
}

- (BOOL)_canActivateTapticTime
{
  v2 = +[AXSettings sharedInstance];
  v3 = [v2 voiceOverTapticTimeMode];

  if ((v3 & 1) == 0)
  {
    v5 = AXLogTapticTime();
    if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
    {
      v13 = 0;
      v8 = "Taptic time not enabled";
      v9 = &v13;
LABEL_9:
      _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, v8, v9, 2u);
    }

LABEL_10:
    v7 = 0;
    goto LABEL_11;
  }

  v4 = AXIsBuddyCompleted();
  v5 = AXLogTapticTime();
  v6 = os_log_type_enabled(v5, OS_LOG_TYPE_INFO);
  if ((v4 & 1) == 0)
  {
    if (v6)
    {
      *buf = 0;
      v8 = "Buddy not completed!";
      v9 = buf;
      goto LABEL_9;
    }

    goto LABEL_10;
  }

  if (v6)
  {
    *v11 = 0;
    v7 = 1;
    _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "Can activate taptic time", v11, 2u);
  }

  else
  {
    v7 = 1;
  }

LABEL_11:

  return v7;
}

- (void)_simulatedForceTouchLift
{
  if (!self->_isInPreview)
  {
    if ([(NSMutableArray *)self->_touchEventElements count])
    {
      v3 = 0;
      do
      {
        v4 = [(NSMutableArray *)self->_touchEventElements objectAtIndex:v3];
        v5 = [v4 windowContextId];
        v6 = +[AXBackBoardServer server];
        v7 = [v6 contextIdHostingContextId:v5];

        [v4 centerPoint];
        v9 = v8;
        v11 = v10;
        v12 = +[VOTElement systemWideElement];
        [v12 postFingerLiftAtPoint:v5 withContextId:{v9, v11}];

        v13 = +[VOTElement systemWideElement];
        [v13 postFingerLiftAtPoint:v7 withContextId:{v9, v11}];

        ++v3;
      }

      while ([(NSMutableArray *)self->_touchEventElements count]> v3);
    }

    self->_didPeekEvent = 0;
    [(NSMutableArray *)self->_touchEventElements removeAllObjects];
  }

  simulatedForceLiftTimer = self->_simulatedForceLiftTimer;

  [(SCRCTargetSelectorTimer *)simulatedForceLiftTimer cancel];
}

- (void)_handleToggleMute:(id)a3
{
  v3 = VOTSharedWorkspace;
  v4 = [VOTSharedWorkspace voiceOverMuted] ^ 1;

  [v3 setVoiceOverMuted:v4];
}

- (void)_handleToggleRotationCapability:(id)a3
{
  v3 = +[VOTConfiguration rootConfiguration];
  v14 = [v3 preferenceForKey:@"DeviceRotation"];

  if (v14)
  {
    v4 = [v14 BOOLValue] ^ 1;
  }

  else
  {
    v4 = 0;
  }

  v5 = +[VOTElement systemWideElement];
  v6 = v5;
  v7 = v4 & 1;
  if (v7)
  {
    v8 = @"rotation.capability.on";
  }

  else
  {
    v8 = @"rotation.capability.off";
  }

  [v5 setRotationCapabilityEnabled:v7];

  v9 = [VOTSharedWorkspace selectedLanguage];
  v10 = sub_1000516CC(off_1001FDDD0, v8, 0, v9);
  v11 = sub_1000095FC(v10, 0, v9);

  v12 = +[VOTConfiguration rootConfiguration];
  v13 = [NSNumber numberWithBool:v7];
  [v12 setPreference:v13 forKey:@"DeviceRotation"];
}

- (void)_handleToggleScreenCurtain:(id)a3
{
  v3 = VOTSharedWorkspace;
  v4 = [VOTSharedWorkspace screenCurtainEnabled] ^ 1;

  [v3 setScreenCurtainEnabled:v4];
}

- (void)_handleToggleSoundCurtain:(id)a3
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 voiceOverSoundCurtain];

  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSoundCurtain:v4 ^ 1];

  v6 = [VOTSharedWorkspace selectedLanguage];
  v10 = v6;
  if (v4)
  {
    v7 = @"soundcurtain.off";
  }

  else
  {
    v7 = @"soundcurtain.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, v6);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleToggleCaptionPanel:(id)a3
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 enableVoiceOverCaptions];

  v5 = +[AXSettings sharedInstance];
  [v5 setEnableVoiceOverCaptions:v4 ^ 1];

  v6 = [VOTSharedWorkspace selectedLanguage];
  v10 = v6;
  if (v4)
  {
    v7 = @"vocaptions.off";
  }

  else
  {
    v7 = @"vocaptions.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, v6);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleToggleIgnoreTrackpad:(id)a3
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 voiceOverIgnoreTrackpad];

  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverIgnoreTrackpad:v4 ^ 1];
}

- (void)_handleStartSiri:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateSiri];
}

- (void)_handleToggleTypeToSiri:(id)a3
{
  v3 = +[AXSpringBoardServer server];
  v4 = [v3 isTypeToSiriVisible];

  if (v4)
  {
    if ([VOTSharedWorkspace supportsHomeGestures])
    {
      v5 = +[AXSpringBoardServer server];
      v6 = [v5 dismissBuddyIfNecessary];

      if ((v6 & 1) == 0)
      {
        v7 = VOTSharedWorkspace;

        [v7 performHomeButtonPress];
      }
    }
  }

  else
  {
    v8 = +[AXPISystemActionHelper sharedInstance];
    [v8 activateTypeToSiri];
  }
}

- (void)_cancelIndefiniteLongPress
{
  if ([(VOTElementManager *)self isIndefiniteLongPressOngoing])
  {
    [(VOTElementManager *)self setIsIndefiniteLongPressOngoing:0];
    v5 = +[VOTElement systemWideElement];
    [(VOTElementManager *)self indefiniteLongPressPoint];
    [v5 postFingerLiftAtPoint:-[VOTElementManager indefiniteLongPressContextId](self withContextId:{"indefiniteLongPressContextId"), v3, v4}];
  }
}

- (void)_reallySimulateLongPressForElement:(id)a3
{
  v4 = a3;
  v5 = [v4 windowContextId];
  [v4 visiblePoint];
  if (v7 == -1.0 && v6 == -1.0)
  {
    [v4 centerPoint];
    if (v9 == -1.0 && v10 == -1.0)
    {
      [v4 frame];
      AX_CGRectGetCenter();
      v16 = v15;
      v18 = v17;
      v14 = VOTLogElement();
      if (os_log_type_enabled(v14, OS_LOG_TYPE_DEBUG))
      {
        sub_10012B400(v16, v18);
      }
    }

    else
    {
      v12 = v9;
      v13 = v10;
      v14 = VOTLogElement();
      if (os_log_type_enabled(v14, OS_LOG_TYPE_DEBUG))
      {
        sub_10012B374(v12, v13);
      }
    }
  }

  [v4 displayId];
  AXConvertPointFromHostedCoordinates();
  v20 = v19;
  v22 = v21;
  if ([v4 longPressHostContextId])
  {
    v5 = [v4 windowContextIdImmediateRemoteParent:v5];
  }

  Current = CFAbsoluteTimeGetCurrent();
  if ([(VOTElementManager *)self isIndefiniteLongPressOngoing])
  {
    [(VOTElementManager *)self _cancelIndefiniteLongPress];
  }

  else
  {
    [(VOTElementManager *)self lastSimulatedLongPressTime];
    if (Current - v24 >= 0.5)
    {
      [(VOTElementManager *)self setLastSimulatedLongPressTime:Current];
      [(VOTElementManager *)self setIndefiniteLongPressPoint:v20, v22];
      [(VOTElementManager *)self setIndefiniteLongPressContextId:v5];
      v26 = +[VOTElement systemWideElement];
      [v26 postFingerTouchAtPoint:v5 withForce:v20 withContextId:{v22, 0.0}];

      v27 = [[AXDispatchTimer alloc] initWithTargetSerialQueue:&_dispatch_main_q];
      [(VOTElementManager *)self setSimulatedLongPressTimer:v27];

      v28 = [(VOTElementManager *)self simulatedLongPressTimer];
      v29[0] = _NSConcreteStackBlock;
      v29[1] = 3221225472;
      v29[2] = sub_1000807F8;
      v29[3] = &unk_1001C9B18;
      *&v29[4] = v20;
      *&v29[5] = v22;
      v30 = v5;
      [v28 afterDelay:v29 processBlock:1.0];
    }

    else
    {
      [(VOTElementManager *)self setIsIndefiniteLongPressOngoing:1];
      v25 = [(VOTElementManager *)self simulatedLongPressTimer];
      [v25 cancel];

      [(VOTElementManager *)self setSimulatedLongPressTimer:0];
    }
  }
}

- (BOOL)_handleSimulatedLongPress:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  v5 = +[VOSOutputEvent DidBeginPassthrough];
  [v4 sendEvent:v5];

  v6 = [(VOTElementManager *)self _currentElement];
  if ([v6 doesHaveTraits:kAXWebContentTrait])
  {
    [v6 centerPoint];
    v7 = [NSValue valueWithCGPoint:?];
  }

  else
  {
    v7 = 0;
  }

  if ([v6 attemptToShowContextMenuWithTargetPointValue:v7])
  {
    [(VOTElementManager *)self setLastAttemptToShowContextMenuTime:CFAbsoluteTimeGetCurrent()];
    [(VOTElementManager *)self setLastElementForAttemptToShowContextMenu:v6];
  }

  else
  {
    [(VOTElementManager *)self _reallySimulateLongPressForElement:v6];
  }

  return 1;
}

- (void)_handleDuckingDisabling:(id)a3
{
  v4 = a3;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v8 = VOTLogCommon();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_ERROR))
    {
      sub_10012B48C();
    }

    goto LABEL_8;
  }

  v5 = [VOTSharedWorkspace duckingTemporarilyDisabled];
  if (v5 != [v4 BOOLValue])
  {
    [(VOTElementManager *)self setLastDuckingDisablementSessionStart:CFAbsoluteTimeGetCurrent()];
    v6 = VOTLogCommon();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
    {
      v9 = 138412290;
      v10 = v4;
      _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "Temporarily disabling ducking: %@", &v9, 0xCu);
    }

    v7 = [v4 BOOLValue];
    [VOTSharedWorkspace setDuckingTemporarilyDisabled:v7];
    v8 = +[VOTOutputManager outputManager];
    [v8 updateAudioSessionProperties];
LABEL_8:
  }
}

- (void)_handlePauseSpeechAndHapticsNotification:(id)a3
{
  v4 = a3;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v8 = VOTLogCommon();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_ERROR))
    {
      sub_10012B4F4();
    }

    goto LABEL_9;
  }

  v5 = [VOTSharedWorkspace pauseSpeechAndHaptics];
  if (v5 != [v4 BOOLValue])
  {
    [(VOTElementManager *)self setLastPauseSpeechAndHapticsStart:CFAbsoluteTimeGetCurrent()];
    v6 = VOTLogCommon();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
    {
      v9 = 138412290;
      v10 = v4;
      _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "Temporarily pausing speech and haptics: %@", &v9, 0xCu);
    }

    v7 = [v4 BOOLValue];
    [VOTSharedWorkspace setPauseSpeechAndHaptics:v7];
    if ([VOTSharedWorkspace pauseSpeechAndHaptics])
    {
      v8 = +[VOTOutputManager outputManager];
      [v8 stopSpeakingAtBoundary:0];
LABEL_9:
    }
  }
}

- (void)_handleAudiographSelectedSeriesChangedNotification:(id)a3
{
  v3 = a3;
  if (AXDeviceSupportsSonification())
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v4 = [v3 integerValue];
      v5 = +[AXMDataSonifier sharedInstance];
      [v5 setCurrentSeriesIndex:v4];
    }

    else
    {
      v6 = VOTLogCommon();
      if (os_log_type_enabled(v6, OS_LOG_TYPE_ERROR))
      {
        sub_10012B55C();
      }
    }
  }
}

- (void)_handleAudiographPlaybackStateNotification:(id)a3
{
  v3 = [a3 BOOLValue];
  v4 = +[VOTAudiographManager sharedManager];
  v5 = v4;
  if (v3)
  {
    [v4 play];
  }

  else
  {
    [v4 pause];
  }
}

- (void)_handleContextMenuStatusNotification:(id)a3
{
  v4 = a3;
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastAttemptToShowContextMenuTime];
  if (Current - v6 < 1.0)
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      if (![v4 intValue])
      {
        v7 = [(VOTElementManager *)self lastElementForAttemptToShowContextMenu];
        [(VOTElementManager *)self _reallySimulateLongPressForElement:v7];
      }
    }

    else
    {
      v8 = VOTLogCommon();
      if (os_log_type_enabled(v8, OS_LOG_TYPE_FAULT))
      {
        sub_10012B5C4();
      }
    }
  }
}

- (id)_currentElementAtCenterPointOfElement:(id)a3
{
  v3 = a3;
  v4 = +[VOTElement systemWideElement];
  [v3 centerPoint];
  v6 = v5;
  v8 = v7;
  v9 = [v3 windowContextId];

  [v4 convertPoint:v9 fromContextId:{v6, v8}];
  v11 = v10;
  v13 = v12;

  v14 = [[VOTElement alloc] initWithPosition:v11, v13];

  return v14;
}

- (void)_simulatedPressOutputTimer:(id)a3
{
  v25 = a3;
  v4 = [objc_allocWithZone(VOTOutputRequest) init];
  v5 = [v25 doesHaveTraits:kAXKeyboardKeyTrait];
  v6 = [v25 doesHaveTraits:kAXStartsMediaSessionTrait];
  v7 = [v25 useElementAtPositionAfterActivation];
  v8 = v5 | v6;
  if (((v5 | v6) & 1) == 0)
  {
    [v25 updateLabel];
    [v25 updateHint];
    [v25 updateRoleDescription];
  }

  [v25 updateTraits];
  [v25 updateValue];
  [v25 updateEquivalenceTag];
  [v25 updateExpandedStatus];
  if ([v25 doesHaveTraits:kAXWebContentTrait])
  {
    [v25 updateRoleDescription];
    v9 = [v25 isValid];
  }

  else
  {
    v10 = [v25 application];
    v9 = [v25 isValidForApplication:v10];
  }

  if (!(v7 & 1 | ((v9 & 1) == 0)))
  {
    v14 = 4;
    goto LABEL_16;
  }

  v11 = [(VOTElementManager *)self _currentElementAtCenterPointOfElement:v25];
  v12 = [v25 equivalenceTag];
  v13 = [v11 equivalenceTag];
  if (v7)
  {
    if (([v11 isValid] & 1) == 0)
    {
LABEL_14:
      v9 = [v25 isAlive] & (v7 ^ 1);
      v14 = 4;
      goto LABEL_15;
    }
  }

  else if (v12 && ![v12 isEqualToString:v13])
  {
    goto LABEL_14;
  }

  v15 = v11;

  [(VOTElementManager *)self _setCurrentElement:v15];
  v14 = 0;
  v9 = 1;
  v25 = v15;
LABEL_15:

LABEL_16:
  if ([v25 doesHaveTraits:kAXToggleTrait])
  {
    v16 = [v25 roleDescription];
    v17 = [v16 length] == 0;
  }

  else
  {
    v17 = 0;
  }

  if (([v25 doesHaveTraits:kAXIsEditingTrait] & 1) == 0 && (objc_msgSend(v25, "doesHaveTraits:", kAXWebInteractiveVideoTrait) & 1) == 0 && ((v9 ^ 1) & 1) == 0)
  {
    if (v17)
    {
      v20 = [v25 toggleStatusLabel];
      v21 = [v4 addString:v20];
    }

    else
    {
      v22 = [v25 value];
      v23 = [v22 length];

      if (v23 <= 0x64)
      {
        v24 = v14;
      }

      else
      {
        v24 = v14 | 0x1000;
      }

      [(VOTElementManager *)self _addDescription:v25 toRequest:v4 withOptions:v24];
    }
  }

  if (((v6 | [v25 doesHaveTraits:kAXDeleteKeyTrait]) & 1) == 0 && objc_msgSend(v4, "containsActions") && objc_msgSend(v25, "isEqual:", self->_currentElement))
  {
    [v4 setRequestQueueMixinBehavior:&stru_1001C9B58];
    [(VOTElementManager *)self sendRequest:v4];
  }

  if (((v8 ^ 1 | v6) & 1) == 0)
  {
    [v25 updateLabel];
    [v25 updateHint];
    [v25 updateRoleDescription];
  }

  v18 = VOTSharedWorkspace;
  v19 = [(VOTElementManager *)self _currentRotorSelection];
  [v18 refreshBraille:0 rotorSelection:v19];
}

- (void)_handlePressActionResultAtTime:(id)a3
{
  lastScreenChangeNotificationTime = self->_lastScreenChangeNotificationTime;
  [a3 doubleValue];
  if (lastScreenChangeNotificationTime <= v5)
  {
    self->_lastScreenChangeNotificationTime = -3061152000.0;
    v14 = +[VOTOutputManager outputManager];
    v6 = [(VOTElementManager *)self _currentElement];
    v7 = v6;
    if (v6)
    {
      if ([v6 doesHaveTraits:kAXLaunchIconTrait])
      {
        v8 = +[VOTDisplayManager displayManager];
        [v8 setCursorFrameForElement:0];
      }

      else
      {
        [(VOTElementManager *)self _resetDirectInteractionCache];
        Current = CFAbsoluteTimeGetCurrent();
        if (Current - self->_lastFirstResponderChangeTime >= 0.25 || (+[VOTOutputManager outputManager](VOTOutputManager, "outputManager"), v10 = objc_claimAutoreleasedReturnValue(), v11 = [v10 isSpeaking], v10, (v11 & 1) == 0))
        {
          if (![v7 doesHaveTraits:kAXKeyboardKeyTrait] || Current - self->_lastAnnouncementNotificationTime >= 0.25 && objc_msgSend(v7, "doesHaveTraits:", kAXButtonTrait) && Current - self->_lastValueChangeTime >= 0.25)
          {
            [v14 stopSpeakingAtBoundary:0];
            [v7 delayBeforeUpdatingOnActivation];
            if (v12 <= 0.0)
            {
              [(VOTElementManager *)self _simulatedPressOutputTimer:v7];
            }

            else
            {
              v13 = v12;
              [(SCRCTargetSelectorTimer *)self->_simulatedPressOutputTimer cancel];
              [(SCRCTargetSelectorTimer *)self->_simulatedPressOutputTimer dispatchAfterDelay:v7 withObject:v13];
            }
          }
        }
      }
    }
  }
}

- (void)_handleScreenLock:(id)a3
{
  v4 = a3;
  [VOTSharedWorkspace screenLockOccurred];
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v5 = [v4 objectForKey:@"isUserLocked"];
    v6 = [v5 BOOLValue];

    v7 = [v4 objectForKey:@"playLockSound"];
    v8 = [v7 BOOLValue];

    v9 = v8 ^ 1;
  }

  else
  {
    v6 = 0;
    v9 = 0;
  }

  v10 = +[VOTOutputManager outputManager];
  [v10 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:&off_1001D9FE0];

  v11 = +[AXSettings sharedInstance];
  v12 = [v11 liveRecognitionActive];

  if (v12)
  {
    v13 = +[VOTMagnifierService shared];
    [v13 dismissDetectionUI];
  }

  v14 = +[VOTElement iosSystemAppApplication];
  v15 = [v14 isSystemSleeping];

  if (v15)
  {
    if (![VOTSharedWorkspace isRingerSwitchSilent] || self->_lastEventOccurredTime > self->_lastSilencedAlertTime || (objc_msgSend(VOTSharedWorkspace, "lastLockButtonPressTime"), v16 > self->_lastSilencedAlertTime))
    {
      if ([VOTSharedWorkspace soundEffectsEnabled])
      {
        if ((([VOTSharedWorkspace isRingerSwitchSilent] | v9 | v6) & 1) == 0)
        {
          goto LABEL_15;
        }

        v17 = +[VOTOutputManager outputManager];
        v18 = +[VOSOutputEvent ScreenDidTurnOff];
        [v17 sendEvent:v18];
      }

      else
      {
        v17 = sub_1000511CC(off_1001FDDD0, @"screen.locked.message", 0);
        v18 = [VOTSharedWorkspace selectedLanguage];
        v19 = sub_1000095FC(v17, 0, v18);
      }
    }

LABEL_15:
    if ([(VOTElementManager *)self _flashlightNotificationsEnabled])
    {
      AXPerformBlockOnMainThreadAfterDelay();
    }
  }

  v20 = +[VOTDisplayManager displayManager];
  [v20 setCursorFrameForElement:0];

  [(VOTElementManager *)self _setCurrentElement:0];
  [(VOTElementManager *)self hideVisualRotor];
  [(VOTElementManager *)self _resetElementLabel];
  v21 = [(VOTElementManager *)self previousTableOrCollectionViewList];
  [v21 removeAllObjects];

  v22 = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
  [v22 removeAllObjects];

  [(VOTElementManager *)self setPreviousTableOrCollectionViewApplication:0];
  self->_systemIsSleeping = 1;
  [(VOTElementManager *)self _closeItemChooser];
  [VOTSharedWorkspace setScreenOn:0 silently:1];
}

- (void)observeValueForKeyPath:(id)a3 ofObject:(id)a4 change:(id)a5 context:(void *)a6
{
  v10 = a3;
  v11 = a4;
  v12 = a5;
  if (([v10 isEqualToString:@"available"] & 1) != 0 || (objc_msgSend(v10, "isEqualToString:", @"overheated") & 1) != 0 || objc_msgSend(v10, "isEqualToString:", @"flashlightLevel"))
  {
    [(AVFlashlight *)self->_flashlightDevice flashlightLevel];
    v14 = v13 > 0.0;
    if (self->_flashlightOnStatus != v14)
    {
      v15 = v13;
      ++self->_flashlightStatusGeneration;
      v16 = VOTLogCommon();
      if (os_log_type_enabled(v16, OS_LOG_TYPE_INFO))
      {
        *buf = 67109120;
        v19 = v14;
        _os_log_impl(&_mh_execute_header, v16, OS_LOG_TYPE_INFO, "Flashlight status change: %d", buf, 8u);
      }

      if (v15 <= 0.0)
      {
        [(SCRCTargetSelectorTimer *)self->_flashlightSystemTimer cancel];
        sub_10008197C(@"VoiceOverFlashlightID");
      }
    }

    self->_flashlightOnStatus = v14;
  }

  else
  {
    v17.receiver = self;
    v17.super_class = VOTElementManager;
    [(VOTElementManager *)&v17 observeValueForKeyPath:v10 ofObject:v11 change:v12 context:a6];
  }
}

- (void)_updateFlashlightEnabledStatus
{
  v3 = +[AXSettings sharedInstance];
  self->_flashlightNotificationsEnabled = [v3 voiceOverFlashlightNotificationsEnabled];

  if (self->_flashlightNotificationsEnabled)
  {
    if (!self->_flashlightDevice)
    {
      v4 = [[AVFlashlight alloc] init];
      flashlightDevice = self->_flashlightDevice;
      self->_flashlightDevice = v4;

      [(AVFlashlight *)self->_flashlightDevice addObserver:self forKeyPath:@"available" options:0 context:0];
      [(AVFlashlight *)self->_flashlightDevice addObserver:self forKeyPath:@"overheated" options:0 context:0];
      [(AVFlashlight *)self->_flashlightDevice addObserver:self forKeyPath:@"flashlightLevel" options:0 context:0];
      v6 = [[SCRCTargetSelectorTimer alloc] initWithTarget:self selector:"_sendSystemNotificationForFlashlight" thread:self->_elementManagerThread];
      flashlightSystemTimer = self->_flashlightSystemTimer;
      self->_flashlightSystemTimer = v6;

      sub_100081D18();
      self->_flashlightNotificationGeneration = -1;
      v8 = VOTLogCommon();
      if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
      {
        v9 = self->_flashlightDevice;
        v10 = 138412290;
        v11 = v9;
        _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_DEFAULT, "Initialization flashlight observer: %@", &v10, 0xCu);
      }
    }
  }

  else
  {
    self->_flashlightNotificationGeneration = -1;
  }
}

- (void)_handleFlashlightNotification
{
  if ([(VOTElementManager *)self _flashlightNotificationsEnabled])
  {
    [(AVFlashlight *)self->_flashlightDevice flashlightLevel];
    if (v3 > 0.0 && self->_flashlightStatusGeneration != self->_flashlightNotificationGeneration)
    {
      v4 = sub_1000511CC(off_1001FDDD0, @"flashlight.enabled", 0);
      v5 = [VOTSharedWorkspace selectedLanguage];
      v6 = sub_1000095FC(v4, 0, v5);

      v7 = VOTLogCommon();
      if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
      {
        *v8 = 0;
        _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "Flashlight not available, speaking message", v8, 2u);
      }

      [(SCRCTargetSelectorTimer *)self->_flashlightSystemTimer dispatchAfterDelay:60.0];
      self->_flashlightNotificationGeneration = self->_flashlightStatusGeneration;
    }
  }
}

- (void)_sendSystemNotificationForFlashlight
{
  v2 = sub_1000516CC(off_1001FDDD0, @"flashlight.notification.title", 0, 0);
  v15 = 0;
  v16 = &v15;
  v17 = 0x2050000000;
  v3 = qword_1001FED40;
  v18 = qword_1001FED40;
  if (!qword_1001FED40)
  {
    *&buf = _NSConcreteStackBlock;
    *(&buf + 1) = 3221225472;
    v20 = sub_1000B2104;
    v21 = &unk_1001C8370;
    v22 = &v15;
    sub_1000B2104(&buf);
    v3 = v16[3];
  }

  v4 = v3;
  _Block_object_dispose(&v15, 8);
  v5 = objc_opt_new();
  [v5 setBody:{0, v15}];
  [v5 setCategoryIdentifier:@"com.apple.VoiceOver.message"];
  [v5 setTitle:v2];
  [v5 setThreadIdentifier:@"VoiceOverFlashlightID"];
  [v5 setShouldSuppressDefaultAction:0];
  [v5 setShouldAuthenticateDefaultAction:0];
  v6 = +[NSDate date];
  v7 = [v6 dateByAddingTimeInterval:21600.0];
  [v5 setExpirationDate:v7];

  v15 = 0;
  v16 = &v15;
  v17 = 0x2050000000;
  v8 = qword_1001FED48;
  v18 = qword_1001FED48;
  if (!qword_1001FED48)
  {
    *&buf = _NSConcreteStackBlock;
    *(&buf + 1) = 3221225472;
    v20 = sub_1000B215C;
    v21 = &unk_1001C8370;
    v22 = &v15;
    sub_1000B215C(&buf);
    v8 = v16[3];
  }

  v9 = v8;
  _Block_object_dispose(&v15, 8);
  v10 = +[NSUUID UUID];
  v11 = [v10 UUIDString];
  v12 = [v8 requestWithIdentifier:v11 content:v5 trigger:0];

  v13 = VOTLogCommon();
  if (os_log_type_enabled(v13, OS_LOG_TYPE_INFO))
  {
    LODWORD(buf) = 138412290;
    *(&buf + 4) = v12;
    _os_log_impl(&_mh_execute_header, v13, OS_LOG_TYPE_INFO, "Posting local notification: %@", &buf, 0xCu);
  }

  v14 = sub_1000B1C6C();
  [v14 addNotificationRequest:v12 withCompletionHandler:&stru_1001CA2D8];
}

- (void)refreshBraille
{
  v2 = VOTSharedWorkspace;
  v3 = [(VOTElementManager *)self _currentRotorSelection];
  [v2 refreshBraille:0 rotorSelection:v3];
}

- (id)_currentResponder
{
  v3 = [(VOTElementManager *)self _currentElement];
  if ([v3 doesHaveTraits:kAXKeyboardKeyTrait])
  {
    [(VOTElement *)self->_lastApplication firstResponderElement];
    v3 = v4 = v3;
  }

  else
  {
    v5 = [v3 textInputElement];
    v4 = v5;
    if (v5)
    {
      v4 = v5;

      v3 = v4;
    }
  }

  return v3;
}

- (void)_handleNextTextOperationInDirection:(int64_t)a3 withEvent:(id)a4
{
  v26 = [(VOTElementManager *)self _currentResponder:a3];
  v6 = v26;
  if ([v26 doesHaveTraits:kAXWebContentTrait])
  {
    v6 = [v26 textOperationsOperator];
  }

  v7 = [v6 textOperations];
  selectedTextOperation = self->_selectedTextOperation;
  if (a3 == 2)
  {
    v9 = selectedTextOperation - 1;
  }

  else
  {
    v9 = selectedTextOperation + 1;
  }

  self->_selectedTextOperation = v9;
  v10 = [(VOTElementManager *)self _currentCachedCustomActionCategories];
  v11 = [v10 ax_firstObjectUsingBlock:&stru_1001C9BD8];

  v12 = [v7 count];
  v13 = [v11 actions];
  v14 = v12 + [v13 count];

  v15 = self->_selectedTextOperation;
  if (v15 < 0)
  {
    v15 = v14 - 1;
  }

  else
  {
    if (v15 < v14)
    {
      goto LABEL_11;
    }

    v15 = 0;
  }

  self->_selectedTextOperation = v15;
  if (v14 < 1)
  {
    goto LABEL_55;
  }

LABEL_11:
  if (v15 >= v14)
  {
    goto LABEL_55;
  }

  v16 = [VOTSharedWorkspace selectedLanguage];
  v17 = self->_selectedTextOperation;
  if (v17 < [v7 count])
  {
    v18 = [v7 objectAtIndex:self->_selectedTextOperation];
    if ([v18 isEqualToString:kAXTextOperationActionCopy])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.copy";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionScanText])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.scan.text";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionCut])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.cut";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionPaste])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.paste";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSelect])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.select";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSelectAll])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.selectAll";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionDelete])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.delete";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionReplace])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.replace";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionDefine])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.define";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionShare])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.share";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionBold])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.bold";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionItalics])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.italic";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionUnderline])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.underline";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionUndo])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.undo";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionRedo])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.redo";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSpeak])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.speak";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSpeakSentence])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.speak.sentence";
    }

    else if ([v18 isEqualToString:kAXTextOperationActionSpeakSpellOut])
    {
      v19 = off_1001FDDD0;
      v20 = @"text.operation.speak.spell.out";
    }

    else
    {
      if (![v18 isEqualToString:kAXTextOperationActionWritingTools])
      {
        if ([v18 rangeOfString:@"AXTextOperationAction"] != 0x7FFFFFFFFFFFFFFFLL)
        {
          v23 = 0;
          goto LABEL_54;
        }

        v24 = v18;
        v18 = v24;
        goto LABEL_53;
      }

      v19 = off_1001FDDD0;
      v20 = @"text.operation.writing.tools";
    }

    v24 = sub_1000516CC(v19, v20, 0, v16);
LABEL_53:
    v23 = v24;
    goto LABEL_54;
  }

  v21 = [v11 actions];
  v18 = [v21 objectAtIndex:{self->_selectedTextOperation - objc_msgSend(v7, "count")}];

  [v18 prepareWithContext:self];
  v22 = [v18 language];

  v23 = [v18 name];
  v16 = v22;
LABEL_54:

  v25 = sub_1000095FC(v23, 0, v16);
  self->_flags.tapShouldHandleTextOperation = 1;

LABEL_55:
}

- (void)_handlePerformTextOperation:(id)a3
{
  v20 = [(VOTElementManager *)self _currentResponder];
  v4 = v20;
  if ([v20 doesHaveTraits:kAXWebContentTrait])
  {
    v4 = [v20 textOperationsOperator];
  }

  v5 = [(VOTElementManager *)self _currentCachedCustomActionCategories];
  v6 = [v5 ax_firstObjectUsingBlock:&stru_1001C9BF8];

  v7 = [v4 textOperations];
  selectedTextOperation = self->_selectedTextOperation;
  if (selectedTextOperation < [v7 count])
  {
    v9 = [v7 objectAtIndex:self->_selectedTextOperation];
    if (v9)
    {
      v10 = v9;
      [v4 performTextOperation:v9];
      v11 = +[VOTOutputManager outputManager];
      v12 = +[VOSOutputEvent DidSelectAutofill];
      [v11 sendEvent:v12];

LABEL_9:
      goto LABEL_10;
    }
  }

  v13 = self->_selectedTextOperation;
  v14 = v13 - [v7 count];
  v15 = [v6 actions];
  v16 = [v15 count];

  if (v14 >= v16 || ([v6 actions], v17 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v17, "objectAtIndex:", v14), v18 = objc_claimAutoreleasedReturnValue(), v17, v19 = objc_msgSend(v18, "performWithContext:", self), v18, (v19 & 1) == 0))
  {
    v10 = +[VOTOutputManager outputManager];
    v11 = +[VOSOutputEvent BoundaryEncountered];
    [v10 sendEvent:v11];
    goto LABEL_9;
  }

LABEL_10:
}

- (void)_outputSelectionDifference:(_NSRange)a3 oldRange:(_NSRange)a4 string:(id)a5 language:(id)a6
{
  length = a4.length;
  location = a4.location;
  v9 = a3.length;
  v10 = a3.location;
  v12 = a5;
  v13 = a6;
  v14 = [VOTSharedWorkspace selectedLanguage];
  if (!(v9 | length))
  {
    goto LABEL_48;
  }

  Current = CFAbsoluteTimeGetCurrent();
  v44 = self;
  if (v9 && Current - self->_performedTextSelectionOperation < 0.25)
  {
    goto LABEL_4;
  }

  v16 = &v10[-location];
  if (v10 < location)
  {
    if (&v10[v9] <= location + length)
    {
      v16 = (location - v10);
    }

    else
    {
      v16 = v9;
    }

    v43 = @"element.selected.text";
    goto LABEL_10;
  }

  if (v10 <= location)
  {
    v17 = (location + length);
    if (&v10[v9] <= location + length)
    {
      if (&v10[v9] < v17)
      {
        v16 = (length - v9);
        v43 = @"element.unselected.text";
        v17 = &v10[v9];
        goto LABEL_11;
      }

      v16 = 0;
      v17 = 0;
    }

    else
    {
      v16 = (v9 - length);
    }

    v43 = @"element.selected.text";
  }

  else
  {
    if (!length && v9)
    {
LABEL_4:
      v43 = @"element.selected.text";
      v16 = v9;
LABEL_10:
      v17 = v10;
      goto LABEL_11;
    }

    v43 = @"element.unselected.text";
    v17 = location;
  }

LABEL_11:
  v18 = VOTLogElement();
  if (os_log_type_enabled(v18, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B638();
  }

  v19 = VOTLogElement();
  if (os_log_type_enabled(v19, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B6A0();
  }

  v20 = VOTLogElement();
  if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B708();
  }

  if (v16 && &v16[v17] <= [v12 length])
  {
    v21 = v44->_firstResponderElement;
    if (!v21)
    {
      v21 = [(VOTElementManager *)v44 _currentElement];
    }

    v22 = [(VOTElement *)v21 attributedValueForRange:v17, v16];
    if (!v22)
    {
      v23 = [(VOTElement *)v21 valueForRange:v17, v16];
      v22 = [AXAttributedString axAttributedStringWithString:v23];
    }

    v24 = [NSString stringWithFormat:@"%C", 65532];
    v42 = [NSCharacterSet characterSetWithCharactersInString:v24];
    if ([v22 rangeOfCharacterFromSet:?] != 0x7FFFFFFFFFFFFFFFLL && objc_msgSend(v22, "length"))
    {
      v47 = 0;
      v48 = &v47;
      v49 = 0x3032000000;
      v50 = sub_100068050;
      v51 = sub_100068060;
      v52 = [v22 copy];
      v46[0] = 0;
      v46[1] = v46;
      v46[2] = 0x2020000000;
      v46[3] = 0;
      v45[0] = _NSConcreteStackBlock;
      v45[1] = 3221225472;
      v45[2] = sub_100083224;
      v45[3] = &unk_1001C9C20;
      v45[4] = v44;
      v45[5] = v46;
      v45[6] = &v47;
      [v22 enumerateAttribute:UIAccessibilityTokenAttachment inRange:0 options:objc_msgSend(v22 usingBlock:{"length"), 0, v45}];
      v25 = v48[5];
      v26 = sub_1000516CC(off_1001FDDD0, @"attachment", 0, v14);
      v27 = [v25 axAttributedStringByReplacingOccurrencesOfString:v24 withString:v26];

      _Block_object_dispose(v46, 8);
      _Block_object_dispose(&v47, 8);

      v22 = v27;
    }

    v28 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
    v29 = [v22 rangeOfCharacterFromSet:v28];
    v31 = v30;
    v32 = [v22 length];

    if (v29 || v31 != v32)
    {
      v33 = [v22 axAttributedStringByReplacingOccurrencesOfString:@"\n" withString:@" "];

      v22 = v33;
    }

    v34 = [objc_allocWithZone(VOTOutputRequest) init];
    v35 = [v34 addString:v22 withLanguage:v13];
    v36 = [v34 lastAction];
    [v36 setObject:kCFBooleanTrue forVariant:50];

    v37 = sub_1000516CC(off_1001FDDD0, v43, 0, v14);
    v38 = [v34 addString:v37 withLanguage:v14];

    [(VOTElementManager *)v44 sendRequest:v34];
    goto LABEL_46;
  }

  if (v10)
  {
    if (!v9)
    {
LABEL_35:
      v21 = +[VOTOutputManager outputManager];
      if (v10)
      {
        if (v10 != [v12 length])
        {
LABEL_47:

          goto LABEL_48;
        }

        v40 = @"bottom.document";
      }

      else
      {
        v40 = @"top.document";
      }

      v41 = sub_1000516CC(off_1001FDDD0, v40, 0, v14);
      [(VOTElement *)v21 speakSimpleString:v41 braille:0 language:v14];

      v22 = +[VOSOutputEvent BoundaryEncountered];
      [(VOTElement *)v21 sendEvent:v22];
LABEL_46:

      goto LABEL_47;
    }
  }

  else
  {
    v39 = [v12 length];
    if (!v9 && v39)
    {
      goto LABEL_35;
    }
  }

LABEL_48:
}

- (id)determineActivityForElement:(id)a3
{
  v4 = a3;
  v5 = [VOTSharedWorkspace selectedActivity];
  if (v5)
  {
    v6 = v5;
    v7 = 0;
LABEL_3:
    v8 = VOTLogActivities();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_INFO))
    {
      *buf = 138412290;
      v24 = v6;
      _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_INFO, "Using activity: %@", buf, 0xCu);
    }

    goto LABEL_6;
  }

  v7 = [VOTSharedWorkspace activities];
  if ([v7 count])
  {
    v10 = [v4 textualContext];
    if (v10)
    {
      v11 = v10;
      v22[0] = _NSConcreteStackBlock;
      v22[1] = 3221225472;
      v22[2] = sub_100083620;
      v22[3] = &unk_1001C76A0;
      v22[4] = v10;
      v12 = [v7 ax_filteredArrayUsingBlock:v22];
      v6 = [v12 firstObject];

      if (v6)
      {
        goto LABEL_3;
      }
    }
  }

  if (![v7 count])
  {
    v6 = 0;
    goto LABEL_6;
  }

  v13 = [v4 application];
  v6 = [v13 bundleIdentifier];

  if ([v6 isEqualToString:@"com.apple.InputUI"])
  {
    v14 = [(VOTElement *)self->_lastApplication bundleIdentifier];

    v6 = v14;
  }

  if (v6)
  {
    v17 = _NSConcreteStackBlock;
    v18 = 3221225472;
    v19 = sub_100083664;
    v20 = &unk_1001C76A0;
    v21 = v6;
    v15 = v6;
    v16 = [v7 ax_filteredArrayUsingBlock:&v17];
    v6 = [v16 firstObject];

    if (v6)
    {
      goto LABEL_3;
    }
  }

LABEL_6:

  return v6;
}

- (int64_t)modifierKeyChoiceForElement:(id)a3
{
  v3 = [(VOTElementManager *)self determineActivityForElement:a3];
  v4 = [v3 modifierKeys];

  if (v4)
  {
    v5 = [v3 modifierKeys];
    v6 = [v5 integerValue];
  }

  else
  {
    v5 = +[AXSettings sharedInstance];
    v6 = [v5 voiceOverKeyboardModifierChoice];
  }

  v7 = v6;

  return v7;
}

- (BOOL)determineSceneDetectionsEnabled:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self determineActivityForElement:v4];
  v6 = [v5 imageDescriptions];

  if (v6)
  {
    v7 = [v5 imageDescriptions];
    v8 = [v7 BOOLValue];
  }

  else
  {
    v9 = [VOTSharedWorkspace imageCaptioningDisabledApps];
    v10 = [v4 application];
    v11 = [v10 bundleIdentifier];
    v12 = [v9 containsObject:v11];

    if (v12)
    {
      v8 = 0;
    }

    else
    {
      v8 = [VOTSharedWorkspace imageCaptionsEnabled];
    }
  }

  return v8;
}

- (BOOL)determineFullImageDescriptionsEnabled:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self determineActivityForElement:v4];
  v6 = [v5 imageDescriptions];

  if (v6)
  {
    v7 = [v5 imageDescriptions];
    v8 = [v7 BOOLValue];
  }

  else
  {
    v9 = [VOTSharedWorkspace imageCaptioningDisabledApps];
    v10 = [v4 application];
    v11 = [v10 bundleIdentifier];
    v12 = [v9 containsObject:v11];

    if (v12)
    {
      v8 = 0;
    }

    else
    {
      v8 = [VOTSharedWorkspace imageCaptionsEnabled];
    }
  }

  return v8;
}

- (BOOL)speakTableRowAndColumnForElement:(id)a3
{
  v3 = [(VOTElementManager *)self determineActivityForElement:a3];
  v4 = [v3 tableRowAndColumn];

  if (v4)
  {
    v5 = [v3 tableRowAndColumn];
    v6 = [v5 BOOLValue];
  }

  else
  {
    v5 = +[AXSettings sharedInstance];
    v6 = [v5 voiceOverSpeakTableColumnRowInformation];
  }

  v7 = v6;

  return v7;
}

- (BOOL)speakTableHeadersForElement:(id)a3
{
  v3 = [(VOTElementManager *)self determineActivityForElement:a3];
  v4 = [v3 tableHeaders];

  if (v4)
  {
    v5 = [v3 tableHeaders];
    v6 = [v5 BOOLValue];
  }

  else
  {
    v5 = +[AXSettings sharedInstance];
    v6 = [v5 voiceOverSpeakTableHeaders];
  }

  v7 = v6;

  return v7;
}

- (BOOL)_prepareElementOutputHeaders:(id)a3 currentElement:(id)a4 request:(id)a5
{
  v8 = a3;
  v9 = a4;
  v10 = a5;
  if ([v8 supportsHeaderElementOutput] && -[VOTElementManager speakTableHeadersForElement:](self, "speakTableHeadersForElement:", v8))
  {
    if ([v8 containedIn:2] && objc_msgSend(v9, "containedIn:", 2))
    {
      v11 = [v8 headerElementsForRow:{objc_msgSend(v8, "rowRange")}];
      if ([v11 containsObject:v8])
      {

        v11 = &__NSArray0__struct;
      }

      v12 = [v8 headerElementsForColumn:{objc_msgSend(v8, "columnRange")}];
      if ([v12 containsObject:v8])
      {

        v11 = &__NSArray0__struct;
      }

      v13 = [v11 arrayByAddingObjectsFromArray:v12];
      v14 = [v9 headerElementsForRow:{objc_msgSend(v9, "rowRange")}];

      v15 = [v9 headerElementsForColumn:{objc_msgSend(v9, "columnRange")}];

      v16 = [v14 arrayByAddingObjectsFromArray:v15];
    }

    else
    {
      v13 = [v8 headerElements];
      v16 = [v9 headerElements];
    }

    v18 = +[NSMutableArray arrayWithCapacity:](NSMutableArray, "arrayWithCapacity:", [v13 count]);
    v27 = 0u;
    v28 = 0u;
    v29 = 0u;
    v30 = 0u;
    v19 = v13;
    v20 = [v19 countByEnumeratingWithState:&v27 objects:v31 count:16];
    if (v20)
    {
      v21 = v20;
      v22 = *v28;
      do
      {
        for (i = 0; i != v21; i = i + 1)
        {
          if (*v28 != v22)
          {
            objc_enumerationMutation(v19);
          }

          v24 = *(*(&v27 + 1) + 8 * i);
          if (([v16 containsObject:{v24, v27}] & 1) == 0)
          {
            [v18 addObject:v24];
          }
        }

        v21 = [v19 countByEnumeratingWithState:&v27 objects:v31 count:16];
      }

      while (v21);
    }

    v25 = [v18 count];
    v17 = v25 != 0;
    if (v25)
    {
      [v10 setElementHeadersForOutput:v18];
    }
  }

  else
  {
    v17 = 0;
  }

  return v17;
}

- (id)_sonarElementFromPoint:(CGPoint)a3 inForwardDirection:(BOOL)a4 limit:(int64_t)a5
{
  v6 = a4;
  y = a3.y;
  x = a3.x;
  v9 = *(&xmmword_1001FF150 + 1);
  v10 = *&xmmword_1001FF150;
  Current = CFAbsoluteTimeGetCurrent();
  v12 = sub_100050834();
  v13 = 0;
  v14 = v10 + -10.0;
  v15 = kAXStatusBarElementTrait;
  v16 = kAXSpacerTrait;
  v11 = v9 / 12.0;
  if (v6)
  {
    v17 = (v11 + v11) / 12.0;
  }

  else
  {
    v17 = -((v11 + v11) / 12.0);
  }

  if (v6)
  {
    v18 = v10 / 12.0;
  }

  else
  {
    v18 = -(v10 / 12.0);
  }

  if (v6)
  {
    v10 = 0.0;
  }

  v39 = a5;
  while (1)
  {
    v19 = y <= v9 + -10.0;
    if (!v6)
    {
      v19 = y >= 10.0;
    }

    if (!v19)
    {
LABEL_53:
      v22 = 0;
      goto LABEL_54;
    }

    v20 = objc_autoreleasePoolPush();
    v21 = x <= v14;
    if (!v6)
    {
      v21 = x >= 10.0;
    }

    if (v21)
    {
      break;
    }

    objc_autoreleasePoolPop(v20);
LABEL_50:
    if (v39 < 1 || v13 <= v39)
    {
      x = v10;
      if (CFAbsoluteTimeGetCurrent() - Current <= 3.0)
      {
        continue;
      }
    }

    goto LABEL_53;
  }

  context = v20;
  v22 = 0;
  do
  {
    v23 = v22;
    v22 = [objc_allocWithZone(VOTElement) initWithPosition:{x, y}];

    v24 = [v22 bundleIdentifier];
    v25 = [v24 isEqualToString:@"com.apple.assistivetouchd"];

    if (v25)
    {
      goto LABEL_42;
    }

    v26 = VOTLogElement();
    if (os_log_type_enabled(v26, OS_LOG_TYPE_INFO))
    {
      v27 = [v22 bundleIdentifier];
      *buf = 138412290;
      v44 = *&v27;
      _os_log_impl(&_mh_execute_header, v26, OS_LOG_TYPE_INFO, "element %@", buf, 0xCu);
    }

    if (v12 && [v22 isTouchContainer])
    {
      v28 = [(VOTElement *)self->_lastValidElement touchContainer];
      v29 = [v28 isEqual:v22];

      if (v29)
      {
        v30 = 0;
      }

      else
      {
        if (v6)
        {
          [v22 firstContainedElement];
        }

        else
        {
          [v22 lastContainedElement];
        }
        v30 = ;
        if ([v30 isEqual:v22])
        {

          ++v13;
          v22 = 0;
          goto LABEL_42;
        }
      }

      v22 = v30;
    }

    v31 = VOTLogElement();
    if (os_log_type_enabled(v31, OS_LOG_TYPE_DEBUG))
    {
      *buf = 134218498;
      v44 = x;
      v45 = 2048;
      v46 = y;
      v47 = 2114;
      v48 = v22;
      _os_log_debug_impl(&_mh_execute_header, v31, OS_LOG_TYPE_DEBUG, "Sonar: {%f, %f} = %{public}@", buf, 0x20u);
    }

    if ((![v22 doesHaveTraits:v15] || !v6) && (objc_msgSend(v22, "doesHaveTraits:", v16) & 1) == 0)
    {
      if (![v22 isBannerNotification] || !v6)
      {
        if (v22)
        {
          objc_autoreleasePoolPop(context);
          goto LABEL_54;
        }

        goto LABEL_41;
      }

      v32 = VOTLogElement();
      if (os_log_type_enabled(v32, OS_LOG_TYPE_DEBUG))
      {
        sub_10012B770(&v41, v42, v32);
      }
    }

LABEL_41:
    v22 = 0;
    ++v13;
    y = v17 + y;
LABEL_42:
    x = v18 + x;
    v33 = x <= v14;
    if (!v6)
    {
      v33 = x >= 10.0;
    }
  }

  while (v33);
  objc_autoreleasePoolPop(context);
  if (!v22)
  {
    goto LABEL_50;
  }

LABEL_54:
  v34 = VOTLogElement();
  if (os_log_type_enabled(v34, OS_LOG_TYPE_DEBUG))
  {
    v36 = CFAbsoluteTimeGetCurrent();
    *buf = 138543874;
    v44 = *&v22;
    v45 = 2048;
    v46 = v36 - Current;
    v47 = 2048;
    v48 = v13;
    _os_log_debug_impl(&_mh_execute_header, v34, OS_LOG_TYPE_DEBUG, "found sonar element: %{public}@ - %f[%ld]", buf, 0x20u);
  }

  return v22;
}

- (void)_setNearestElementMovingForward:(BOOL)a3
{
  v4 = [(VOTElementManager *)self _sonarElementInForwardDirection:a3 limit:-1];
  v5 = v4;
  if (self->_inUnitTestingMode)
  {
    v9 = v4;
    v6 = self->_currentElement;

    v5 = v6;
  }

  v10 = v5;
  if (v5)
  {
    [(VOTElementManager *)self _echoDifferentElement:v5 forEvent:0];
    [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v10];
    self->_flags.focusIsOnElement = 1;
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v8];
  }
}

- (BOOL)_moveElementToFlowTo:(id)a3
{
  v4 = a3;
  v5 = [v4 doesHaveTraits:kAXWebContentTrait];
  v6 = [v4 doesHaveTraits:kAXTableIndexTrait];
  if ((v5 & 1) != 0 || v6)
  {
    if (v6)
    {
      [v4 updateFlowToElements];
    }

    v8 = [v4 flowToElements];
    v9 = [v8 count];
    v7 = v9 != 0;
    if (v9)
    {
      v10 = [v8 indexOfObjectPassingTest:&stru_1001C9C60];
      if (v10 == 0x7FFFFFFFFFFFFFFFLL)
      {
        v11 = 0;
      }

      else
      {
        v11 = [v8 objectAtIndex:v10];
      }

      elementSearchGeneration = self->_elementSearchGeneration;
      v13 = [v11 selectedTextRange];
      v15 = [VOTElementFetchFoundData fetchFoundData:v11 forceUpdate:0 direction:1 generation:elementSearchGeneration range:v13 searchType:v14, 0];
      [(VOTElementManager *)self _elementFetchFoundElement:v15];

      if (v5)
      {
        if (!self->_flowFromElements)
        {
          v16 = [objc_allocWithZone(NSMutableDictionary) init];
          flowFromElements = self->_flowFromElements;
          self->_flowFromElements = v16;
        }

        v21[0] = [v11 nonPersistentUniqueId];
        v21[1] = v18;
        v19 = [NSValue value:v21 withObjCType:"{?=QQ}"];
        [(NSMutableDictionary *)self->_flowFromElements setObject:v4 forKey:v19];
      }
    }
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (void)_handleElementMovement:(id)a3
{
  v4 = a3;
  [(VOTElementManager *)self setLastElementChangeAction:2];
  v5 = [v4 command];
  v6 = [v5 isEqualToString:kVOTEventCommandNextElement];

  v7 = [v4 command];
  v8 = [v7 isEqualToString:kVOTEventCommandPreviousElement];

  v9 = [v4 command];
  v10 = [v9 isEqualToString:kVOTEventCommandFirstElement];

  v11 = [v4 command];
  v12 = [v11 isEqualToString:kVOTEventCommandLastElement];

  v13 = [(VOTElementManager *)self _currentElement];
  if (self->_inTextProcessingRotorMode && ((v6 | v8) & 1) != 0)
  {
    v14 = [v4 objectForIndex:119];
    v15 = [v14 BOOLValue];

    if ((v15 & 1) == 0)
    {
      if ([(VOTElementManager *)self _inMisspelledWordRotor])
      {
        [(VOTElementManager *)self _handleMisspelledWordRotorAction:v6];
      }

      else if ([(VOTRotor *)self->_elementRotor currentRotorType]== 6)
      {
        [(VOTElementManager *)self _handleTextRotorSelectionAction:v6];
      }

      goto LABEL_13;
    }
  }

  if (!self->_flags.focusIsOnElement || ([v13 isValid] & 1) == 0)
  {
    [(VOTElementManager *)self _setNearestElementMovingForward:v6];
    goto LABEL_13;
  }

  if ((v10 | v12))
  {
    v16 = [v13 remoteParent];
    if (v16 && [v13 remoteParentIsViewHost])
    {
      v17 = [v13 isolatedWindow];
      v18 = v17;
      if (!v17)
      {
        v17 = v16;
      }

      v19 = [v17 application];
    }

    else
    {
      v19 = [v13 application];
    }

    if ([(VOTElementManager *)self _isShowingTodayViewForPhone])
    {
      currentApplications = self->_currentApplications;
      if (v10)
      {
        [(NSArray *)currentApplications firstObject];
      }

      else
      {
        [(NSArray *)currentApplications lastObject];
      }
      v34 = ;

      v19 = v34;
    }

    if ([VOTSharedWorkspace navigationStyleHonorsGroups] && !-[VOTElement isAccessibleGroup](self->_currentElement, "isAccessibleGroup"))
    {
      v37 = [(VOTElement *)self->_currentElement groupedParent];

      if (v10)
      {
        if (v37)
        {
          v38 = [(VOTElement *)self->_currentElement groupedParent];
          v35 = [v38 firstContainedElement];

          goto LABEL_48;
        }

LABEL_47:
        v35 = [v19 firstContainedElement];
LABEL_48:
        v36 = 2;
LABEL_59:
        self->_flags.lastElementMovement = v36;
        if ([v35 isEqual:v13])
        {
          v40 = +[VOTOutputManager outputManager];
          v41 = +[VOSOutputEvent BoundaryEncountered];
          [v40 sendEvent:v41];

          v42 = [objc_allocWithZone(VOTOutputRequest) init];
          [(VOTElementManager *)self _addDescription:v35 toRequest:v42 withOptions:0x800000];
          [(VOTElementManager *)self sendRequest:v42];
        }

        else
        {
          if ((v6 | v12))
          {
            v43 = 1;
          }

          else
          {
            v43 = 2;
          }

          v59[0] = _NSConcreteStackBlock;
          v59[1] = 3221225472;
          v59[2] = sub_100084C24;
          v59[3] = &unk_1001C7778;
          v59[4] = self;
          v44 = v35;
          v60 = v44;
          [v44 scrollToElementForDirectional:v43 withCompletion:v59];
          [(VOTElementManager *)self _echoDifferentElement:v44 forEvent:0];
          fetchManager = self->_fetchManager;
          v46 = [(VOTElementManager *)self _currentElement];
          [(VOTElementFetcher *)fetchManager updateCacheWithElement:v46];
        }

        goto LABEL_13;
      }

      if (v37)
      {
        v39 = [(VOTElement *)self->_currentElement groupedParent];
        v35 = [v39 lastContainedElement];

LABEL_58:
        v36 = 1;
        goto LABEL_59;
      }
    }

    else if (v10)
    {
      goto LABEL_47;
    }

    if ([v13 doesHaveTraits:kAXStatusBarElementTrait])
    {
      [v19 lastElementInStatusBar];
    }

    else
    {
      [v19 lastContainedElement];
    }
    v35 = ;
    goto LABEL_58;
  }

  if ((v6 | v8))
  {
    v20 = VOTLogElement();
    if (os_signpost_enabled(v20))
    {
      *buf = 0;
      _os_signpost_emit_with_name_impl(&_mh_execute_header, v20, OS_SIGNPOST_INTERVAL_BEGIN, 0xEEEEB0B5B2B2EEEELL, "ElementTraversal", "", buf, 2u);
    }

    if (v6)
    {
      v21 = 1;
    }

    else
    {
      v21 = 2;
    }

    self->_flags.lastElementMovement = v21;
    if ((v8 & 1) != 0 && [(NSMutableDictionary *)self->_flowFromElements count])
    {
      v22 = [(VOTElementManager *)self _currentElement];
      *buf = [v22 nonPersistentUniqueId];
      v58 = v23;

      v24 = [NSValue value:buf withObjCType:"{?=QQ}"];
      v25 = [(NSMutableDictionary *)self->_flowFromElements objectForKey:v24];
      if (v25)
      {
        v26 = v25;
        [(VOTElementManager *)self _echoDifferentElement:v25 forEvent:0];

        goto LABEL_18;
      }
    }

    v47 = +[VOTOutputManager outputManager];
    [v47 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

    if (sub_100050834() && !v13 && ([(VOTElementManager *)self touchContainer], v48 = objc_claimAutoreleasedReturnValue(), v48, v48))
    {
      v49 = [(VOTElementManager *)self touchContainer];
      v50 = v49;
      if (v6)
      {
        [v49 firstContainedElement];
      }

      else
      {
        [v49 lastContainedElement];
      }
      v30 = ;

      [(VOTElementManager *)self _echoDifferentElement:v30 forEvent:0];
    }

    else
    {
      self->_flags.performedKeyboardNavigation = [v4 isKeyEvent];
      self->_flags.performedFlickNavigation = 1;
      if ((v8 & 1) == 0 && [(VOTElementManager *)self _moveElementToFlowTo:v13])
      {
        goto LABEL_13;
      }

      if ([v13 elementVisibilityAffectsLayout])
      {
        [v13 scrollToElementForDirectional:2 withCompletion:0];
        [(VOTElementFetcher *)self->_fetchManager forceUpdate];
      }

      v30 = [(VOTElementManager *)self _copyMatchBlockAnyElement];
      v51 = self->_fetchManager;
      elementSearchGeneration = self->_elementSearchGeneration;
      v53 = [v13 selectedTextRange];
      v55 = v54;
      LOBYTE(v56) = [VOTSharedWorkspace navigationStyleHonorsGroups];
      [(VOTElementFetcher *)v51 searchForElementInDirection:v21 fromElement:v13 matchBlock:v30 rangeMatch:0 searchType:0 generation:elementSearchGeneration startingRange:v53 groupNavigationStyle:v55, v56];
    }
  }

  else
  {
    v28 = [v4 command];
    v29 = [v28 isEqualToString:kVOTEventCommandCenterElement];

    if (!v29)
    {
      goto LABEL_13;
    }

    v30 = [VOTEvent touchEventWithCommand:kVOTEventCommandTracking info:0];
    [VOTSharedWorkspace convertDevicePointToZoomedPoint:sub_1000517DC(0.5)];
    [v30 setTouchPoint:?];
    v31 = [VOTElement alloc];
    [v30 touchPoint];
    v32 = [(VOTElement *)v31 initWithPosition:?];
    if (v32 || ([(VOTElementManager *)self _sonarElementInForwardDirection:1 limit:10], (v32 = objc_claimAutoreleasedReturnValue()) != 0) || ([(VOTElementManager *)self _sonarElementInForwardDirection:0 limit:10], (v32 = objc_claimAutoreleasedReturnValue()) != 0))
    {
      v33 = v32;
      [(VOTElementManager *)self _echoDifferentElement:v32 forEvent:0];
    }
  }

LABEL_13:
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXLaunchIconTrait]&& ![(VOTElement *)self->_currentElement isInFolder])
  {
    [(NSMutableArray *)self->_cachedLaunchIcons removeAllObjects];
  }

  [(VOTElementManager *)self _resetOtherTapInputModes];
  if ([(VOTElement *)self->_currentElement isSafariScribbleActive])
  {
    [(VOTElement *)self->_currentElement clearSelectedScribbleElement];
  }

LABEL_18:
}

- (void)_handleRealtimeElementMovement:(id)a3
{
  v18 = a3;
  v4 = [(VOTElement *)self->_currentElement application];
  v5 = [v4 realtimeElements];

  if ([v5 count])
  {
    v6 = [v18 command];
    v7 = [v6 isEqualToString:kVOTEventCommandNextRealtimeElement];

    v8 = [v5 indexOfObject:self->_currentElement];
    if (v8 == 0x7FFFFFFFFFFFFFFFLL)
    {
      if (v7)
      {
        [v5 firstObject];
      }

      else
      {
        [v5 lastObject];
      }
      v9 = ;
      [(VOTElementManager *)self _setCurrentElement:v9];
      v17 = +[VOTDisplayManager displayManager];
      [v17 setCursorFrameForElement:v9];
    }

    else
    {
      if (v7)
      {
        v11 = v8 + 1;
      }

      else
      {
        v11 = v8 - 1;
      }

      v12 = [v5 count] + v11;
      v13 = v12 % [v5 count];
      v14 = [v5 objectAtIndex:v13];
      [(VOTElementManager *)self _setCurrentElement:v14];

      v15 = +[VOTDisplayManager displayManager];
      v16 = [v5 objectAtIndex:v13];
      [v15 setCursorFrameForElement:v16];

      v9 = [v5 objectAtIndex:v13];
    }

    [(VOTElementManager *)self _echoDifferentElement:v9 forEvent:v18];
  }

  else
  {
    v9 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v9 sendEvent:v10];
  }
}

- (void)_handleShowEditingHUD:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  v5 = +[VOSOutputEvent DidBeginPassthrough];
  [v4 sendEvent:v5];

  v7 = [(VOTElementManager *)self _currentElement];
  v6 = [v7 application];
  [v6 showEditingHUD];
}

- (void)_handleVerticalMovement:(id)a3 direction:(int64_t)a4
{
  v6 = a3;
  [(VOTElement *)self->_currentElement frame];
  v8 = v7;
  v10 = v9;
  v12 = v11;
  v14 = v13;
  v15 = +[VOTElement systemWideElement];
  [v15 convertRect:-[VOTElement windowContextId](self->_currentElement fromContextId:{"windowContextId"), v8, v10, v12, v14}];
  v17 = v16;
  v19 = v18;
  v21 = v20;
  v23 = v22;

  AX_CGRectGetCenter();
  v25 = v24;
  v27 = v26;
  v28 = 10.0;
  if (sub_10005083C())
  {
    v29 = 20.0;
  }

  else
  {
    v29 = 10.0;
  }

  v47 = v29;
  if (sub_10005083C())
  {
    v28 = 20.0;
  }

  v30 = [VOTSharedWorkspace deviceOrientation];
  v48[0] = _NSConcreteStackBlock;
  v48[1] = 3221225472;
  v48[2] = sub_10008524C;
  v48[3] = &unk_1001C9C88;
  v48[4] = self;
  v31 = v6;
  v49 = v31;
  v32 = objc_retainBlock(v48);
  if ((v30 - 1) > 1)
  {
    if ((v30 - 3) <= 1)
    {
      v50.origin.x = v17;
      v50.origin.y = v19;
      v50.size.width = v21;
      v50.size.height = v23;
      if (v27 > CGRectGetMinY(v50) - v23)
      {
        if (v30 == 3)
        {
          v28 = -v28;
        }

        if ((a4 == 2) != (v30 == 3))
        {
          v43 = -v47;
        }

        else
        {
          v43 = v47;
        }

        do
        {
          v51.origin.x = v17;
          v51.origin.y = v19;
          v51.size.width = v21;
          v51.size.height = v23;
          if (v27 >= v23 + CGRectGetMaxY(v51))
          {
            break;
          }

          while (v25 >= 0.0 && v25 <= *&xmmword_1001FF150)
          {
            if ((v32[2])(v32, v25, v27))
            {
              goto LABEL_51;
            }

            v25 = v43 + v25;
          }

          v27 = v28 + v27;
          v52.origin.x = v17;
          v52.origin.y = v19;
          v52.size.width = v21;
          v52.size.height = v23;
        }

        while (v27 > CGRectGetMinY(v52) - v23);
      }
    }

    goto LABEL_50;
  }

  v33 = v25 + v28 * -3.0;
  v34 = v25 + v28 * 3.0;
  if (v25 <= v33 || v25 >= v34)
  {
LABEL_50:
    v45 = +[VOTOutputManager outputManager];
    v46 = +[VOSOutputEvent BoundaryEncountered];
    [v45 sendEvent:v46];

    goto LABEL_51;
  }

  if (v30 == 2)
  {
    v36 = -v28;
  }

  else
  {
    v36 = v28;
  }

  if ((a4 == 2) != (v30 == 2))
  {
    v37 = -v47;
  }

  else
  {
    v37 = v47;
  }

  v38 = *(&xmmword_1001FF150 + 1);
  while (v27 < 0.0 || v27 > v38)
  {
LABEL_30:
    v25 = v36 + v25;
    if (v25 <= v33 || v25 >= v34)
    {
      goto LABEL_50;
    }
  }

  v40 = v27;
  while (((v32[2])(v32, v25, v40) & 1) == 0)
  {
    v40 = v37 + v40;
    v38 = *(&xmmword_1001FF150 + 1);
    if (v40 < 0.0 || v40 > *(&xmmword_1001FF150 + 1))
    {
      goto LABEL_30;
    }
  }

LABEL_51:
}

- (id)webCustomRotorDictionary:(id)a3 direction:(int64_t)a4 forElement:(id)a5
{
  v8 = a3;
  v9 = a5;
  v10 = +[NSMutableDictionary dictionary];
  v11 = v9;
  v12 = kAXIsEditingTrait;
  v13 = v11;
  if (([v11 doesHaveTraits:kAXIsEditingTrait] & 1) == 0)
  {
    v14 = [(VOTElementManager *)self webEditableAncestor:v11];
    v15 = v14;
    v13 = v11;
    if (v14)
    {
      v13 = v14;
    }
  }

  if ([v13 doesHaveTraits:v12])
  {
    [v10 setObject:v8 forKeyedSubscript:@"uuid"];
    v16 = +[NSMutableDictionary dictionary];
    [v10 setObject:v16 forKeyedSubscript:@"currentItem"];

    v17 = [v10 objectForKeyedSubscript:@"currentItem"];
    [v17 setObject:v13 forKeyedSubscript:@"targetElement"];

    v18 = [v13 textMarkerRangeForSelection];
    if ([v18 count] == 2)
    {
      v19 = [v10 objectForKeyedSubscript:@"currentItem"];
      [v19 setObject:v18 forKeyedSubscript:@"targetRange"];
    }

    v20 = [NSNumber numberWithInteger:a4 == 1];
    [v10 setObject:v20 forKeyedSubscript:@"direction"];
  }

  return v10;
}

- (void)_handlePublicCustomRotorMovement:(id)a3 direction:(int64_t)a4
{
  v6 = [(VOTRotor *)self->_elementRotor publicCustomRotorIndex];
  v7 = [(VOTRotor *)self->_elementRotor customPublicRotors];
  v8 = [(VOTElementManager *)self _currentElement];
  if ((v6 & 0x8000000000000000) == 0 && v6 < [v7 count])
  {
    v9 = [v7 objectAtIndexedSubscript:v6];
    v10 = [v9 objectForKeyedSubscript:@"uuid"];

    v11 = [v7 objectAtIndexedSubscript:v6];
    v12 = [v11 objectForKeyedSubscript:@"element"];

    if (v12)
    {
      v13 = [v7 objectAtIndexedSubscript:v6];
      v14 = [v13 objectForKeyedSubscript:@"element"];

      v8 = v14;
    }

    v15 = [v7 objectAtIndexedSubscript:v6];
    v16 = [v15 objectForKeyedSubscript:@"name"];
    v17 = [(VOTElementManager *)self _customRotorTypeRequiresFirstElementProcessing:v16];

    if (v17)
    {
      if ([v8 doesHaveTraits:kAXKeyboardKeyTrait])
      {
        v18 = [v8 textInputElement];
        if (v18 || ([(VOTElement *)self->_lastApplication firstResponderElement], (v18 = objc_claimAutoreleasedReturnValue()) != 0))
        {
          v19 = v18;

          v8 = v19;
        }
      }
    }

    if ([v8 doesHaveTraits:kAXWebContentTrait])
    {
      v20 = [(VOTElementManager *)self webCustomRotorDictionary:v10 direction:a4 forElement:v8];
      v21 = [v20 objectForKeyedSubscript:@"currentItem"];
      v22 = [v21 objectForKeyedSubscript:@"targetElement"];

      if (v22)
      {
        goto LABEL_20;
      }
    }

    else
    {
      v20 = 0;
    }

    v22 = v8;
    if (![v22 doesHaveTraits:kAXIsEditingTrait] || (objc_msgSend(v22, "doesHaveTraits:", kAXStaticTextTrait) & 1) != 0 || (v25 = objc_msgSend(v22, "selectedTextRange"), v25 == 0x7FFFFFFF))
    {
      location = self->_highlightedCharacterRange.location;
      length = self->_highlightedCharacterRange.length;
    }

    else
    {
      location = v25;
      length = v26;
    }

    v29 = [VOTElement customPublicRotorDictionaryForRotorId:v10 startRange:location direction:length, a4];

    v20 = v29;
LABEL_20:
    v53 = v10;
    v30 = [v8 customPublicRotorResultWithItem:v20 startElement:v22];
    v54 = v30;
    if ([VOTSharedWorkspace inUnitTestMode])
    {
      v31 = [v30 objectForKeyedSubscript:@"targetElement"];
    }

    else
    {
      v32 = [v30 objectForKeyedSubscript:@"targetElement"];
      v33 = [AXUIElement uiElementWithAXElement:v32];
      v31 = [VOTElement elementWithUIElement:v33];

      v30 = v54;
    }

    if ([v31 isRemoteElement])
    {
      v34 = [v31 elementForAttribute:3009];

      v31 = v34;
    }

    valuePtr = xmmword_10017E110;
    v35 = [v30 objectForKeyedSubscript:@"targetRange"];
    if (v35)
    {
      TypeID = AXValueGetTypeID();
      if (TypeID == CFGetTypeID(v35))
      {
        AXValueGetValue(v35, kAXValueTypeCFRange, &valuePtr);
LABEL_32:
        v37 = 0;
        goto LABEL_33;
      }
    }

    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v37 = 0;
      *&valuePtr = [(__AXValue *)v35 rangeValue];
      *(&valuePtr + 1) = v38;
    }

    else
    {
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
        goto LABEL_32;
      }

      v37 = v35;
    }

LABEL_33:
    if (!v31 || [v31 isEqual:v22] && valuePtr == 0x7FFFFFFFLL && (!v37 || -[__AXValue count](v37, "count") != 2))
    {
      v46 = +[VOTOutputManager outputManager];
      v47 = +[VOSOutputEvent BoundaryEncountered];
      [v46 sendEvent:v47];

LABEL_69:
      goto LABEL_70;
    }

    v52 = v20;
    preventCustomRotorItemIndexReset = self->_flags.preventCustomRotorItemIndexReset;
    self->_flags.preventCustomRotorItemIndexReset = 1;
    v39 = [v31 isEqual:v22];
    v40 = v39;
    v44 = (self->_highlightedCharacterRange.location != valuePtr || self->_highlightedCharacterRange.length != *(&valuePtr + 1)) && valuePtr != 0x7FFFFFFFLL || v37 != 0;
    if ((v39 & 1) != 0 || v44)
    {
      if (!(v39 & 1 | !v44))
      {
        [(VOTElementManager *)self _setCurrentElement:v31];
        [v31 scrollToElementForDirectional:sub_100052438(a4) withCompletion:0];
      }
    }

    else
    {
      [(VOTElementManager *)self _echoDifferentElement:v31 forEvent:0];
      self->_flags.focusIsOnElement = 1;
      v45 = sub_100052438(a4);
      v55[0] = _NSConcreteStackBlock;
      v55[1] = 3221225472;
      v55[2] = sub_100085BE8;
      v55[3] = &unk_1001C7778;
      v55[4] = self;
      v56 = v31;
      [v56 scrollToElementForDirectional:v45 withCompletion:v55];
    }

    if (v44)
    {
      self->_performedTextSelectionOperation = CFAbsoluteTimeGetCurrent();
      if (valuePtr == 0x7FFFFFFFLL)
      {
        v20 = v52;
        if (v37)
        {
          v48 = [(__AXValue *)v37 firstObject];
          [v31 setSelectionToTextMarker:v48];

          v49 = [v31 customPublicRotorName:v53];
          if ([VOTRotor rotorTypeForSystemRotorType:v49]== 73)
          {
            [v31 increaseWebSelection:2];
          }

          goto LABEL_67;
        }
      }

      else
      {
        [(VOTElementManager *)self _moveFocusToUpdatedRange:valuePtr element:v31 searchType:0];
        v20 = v52;
      }
    }

    else
    {
      self->_performedTextSelectionOperation = -3061152000.0;
      v20 = v52;
      if (v40)
      {
        if (*&self->_highlightedCharacterRange != valuePtr)
        {
          v49 = +[VOTOutputManager outputManager];
          v50 = +[VOSOutputEvent BoundaryEncountered];
          [v49 sendEvent:v50];

LABEL_67:
          goto LABEL_68;
        }

        [VOTElementManager _moveFocusToUpdatedRange:"_moveFocusToUpdatedRange:element:searchType:" element:? searchType:?];
      }
    }

LABEL_68:
    [(VOTElementManager *)self _resetOtherTapInputModes];
    self->_flags.shouldUpdateRotorForElement = 0;
    self->_flags.preventCustomRotorItemIndexReset = preventCustomRotorItemIndexReset;
    goto LABEL_69;
  }

  v23 = +[VOTOutputManager outputManager];
  v24 = +[VOSOutputEvent BoundaryEncountered];
  [v23 sendEvent:v24];

LABEL_70:
}

- (void)_moveFocusToUpdatedRange:(_NSRange)a3 element:(id)a4 searchType:(int64_t)a5
{
  length = a3.length;
  location = a3.location;
  v40 = a4;
  if ([v40 isReadingContent] && objc_msgSend(v40, "supportsFrameForRange"))
  {
    [v40 frameForRange:{location, length}];
  }

  else
  {
    [v40 boundsForRange:{location, length}];
  }

  v13 = v9;
  v14 = v10;
  v15 = v11;
  v16 = v12;
  v17 = +[VOTElement systemWideElement];
  [v17 convertRect:objc_msgSend(v40 fromContextId:{"windowContextId"), v13, v14, v15, v16}];
  v19 = v18;
  v21 = v20;
  v23 = v22;
  v25 = v24;

  self->_lineFrame.origin.x = v19;
  self->_lineFrame.origin.y = v21;
  self->_lineFrame.size.width = v23;
  self->_lineFrame.size.height = v25;
  self->_highlightedCharacterRange.location = location;
  self->_highlightedCharacterRange.length = length;
  v26 = [v40 doesHaveTraits:kAXIsEditingTrait];
  if (v26)
  {
    if (a5 == 5)
    {
      v27 = [v40 value];
      location = [v27 wordFromPosition:location inDirection:1];
      length = v28;
    }

    [(VOTElementManager *)self _setSelectedTextRange:location onElement:length refreshBraille:v40, 1];
    v29 = +[VOTOutputManager outputManager];
    v30 = +[VOSOutputEvent InsertionPointDidMove];
    [v29 sendEvent:v30];
  }

  v45.origin.x = CGRectZero.origin.x;
  v45.origin.y = CGRectZero.origin.y;
  v45.size.width = CGRectZero.size.width;
  v45.size.height = CGRectZero.size.height;
  v42.origin.x = v19;
  v42.origin.y = v21;
  v42.size.width = v23;
  v42.size.height = v25;
  v31 = CGRectEqualToRect(v42, v45);
  v32 = +[VOTDisplayManager displayManager];
  v33 = v32;
  if (v31)
  {
    [v32 setCursorFrameForElement:v40];
  }

  else
  {
    [v32 setCursorFrame:{v19, v21, v23, v25}];
  }

  v34 = [v40 value];
  if (length == 1)
  {
    v35 = 1;
  }

  else
  {
    v35 = 2;
  }

  [(VOTElementManager *)self outputTextSegmentForRange:location string:length element:v34 usePhonetics:v40 segment:length == 1, v35];

  if ([v40 isReadingContent])
  {
    self->_bookLineRange.location = location;
    self->_bookLineRange.length = length;
    self->_bookCursorPosition = location;
    v43.origin.x = v19;
    v43.origin.y = v21;
    v43.size.width = v23;
    v43.size.height = v25;
    MidX = CGRectGetMidX(v43);
    v44.origin.x = v19;
    v44.origin.y = v21;
    v44.size.width = v23;
    v44.size.height = v25;
    self->_bookLineNumber = [v40 lineNumberForPoint:{MidX, CGRectGetMidY(v44)}];
  }

  if (location == 0x7FFFFFFFFFFFFFFFLL)
  {
    v37 = 1;
  }

  else
  {
    v37 = v26;
  }

  if ((v37 & 1) == 0)
  {
    [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:{objc_msgSend(VOTSharedWorkspace, "suppressSelectionChangeNotificationCount") + 1}];
    [(VOTElementManager *)self _setSelectedTextRange:location onElement:0 refreshBraille:v40, 0];
    v38 = [v40 selectedTextRange];
    [(VOTElementManager *)self _elementSelectionRangeDidChange:v38 reason:v39, 0];
  }

  self->_cursorBorderHitCount = 0;
}

- (void)_handleValidatedCustomActionMovementThroughActions:(id)a3 forEvent:(id)a4 inDirection:(int64_t)a5
{
  v8 = a3;
  v9 = a4;
  v10 = [v8 count];
  v24[0] = _NSConcreteStackBlock;
  v24[1] = 3221225472;
  v24[2] = sub_100086100;
  v24[3] = &unk_1001C9CB0;
  v23 = v9;
  v25 = v23;
  v26 = self;
  v11 = objc_retainBlock(v24);
  if (a5 == 1)
  {
    v12 = 1;
  }

  else
  {
    v12 = -1;
  }

  v13 = v10 - 1;
  do
  {
    customActionIndex = self->_customActionIndex;
    if (customActionIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      v15 = v13;
      if (a5 == 1)
      {
        v15 = 0;
        self->_customActionIndex = 0;
        goto LABEL_10;
      }
    }

    else
    {
      v15 = customActionIndex + v12;
    }

    self->_customActionIndex = v15;
    if ((v15 & 0x8000000000000000) != 0)
    {
      break;
    }

LABEL_10:
    if (v15 >= [v8 count])
    {
      break;
    }

    v16 = [v8 objectAtIndexedSubscript:self->_customActionIndex];
    v17 = (v11[2])(v11, v16);
  }

  while (!v17);
  customActionIdentifier = self->_customActionIdentifier;
  self->_customActionIdentifier = 0;

  v19 = self->_customActionIndex;
  if ((v19 & 0x8000000000000000) != 0 || v19 >= [v8 count])
  {
    self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
  }

  else
  {
    v20 = [v8 objectAtIndexedSubscript:self->_customActionIndex];
    v21 = [v20 identifier];
    v22 = self->_customActionIdentifier;
    self->_customActionIdentifier = v21;
  }
}

- (id)_customActionsAddingDragCancelActionIfNecessaryForActions:(id)a3
{
  v4 = a3;
  if ([(AXDragManager *)self->_dragManager isDragActive])
  {
    v5 = [v4 firstObject];
    v6 = [v5 actions];
    v7 = objc_opt_new();
    [v6 addObject:v7];
  }

  return v4;
}

- (id)_currentCachedCustomActionCategories
{
  v3 = [(VOTElement *)self->_currentElement cachedCustomRotorActions];
  v4 = [VOTElement organizedActionsByCategory:v3];
  v5 = [(VOTElementManager *)self _customActionsAddingDragCancelActionIfNecessaryForActions:v4];

  return v5;
}

- (id)_currentCustomActions
{
  v3 = [(VOTElementManager *)self elementRotor];
  v4 = [v3 customActionIndex];
  v5 = [(VOTElementManager *)self _currentCustomActionCategory];
  v6 = [v5 count];

  if (v4 >= v6)
  {
    v10 = 0;
  }

  else
  {
    v7 = [(VOTElementManager *)self _currentCustomActionCategory];
    v8 = [(VOTElementManager *)self elementRotor];
    v9 = [v7 objectAtIndexedSubscript:{objc_msgSend(v8, "customActionIndex")}];
    v10 = [v9 actions];
  }

  return v10;
}

- (id)_currentCustomActionCategory
{
  v3 = [(VOTElement *)self->_currentElement customRotorActions];
  v4 = [VOTElement organizedActionsByCategory:v3];
  v5 = [(VOTElementManager *)self _customActionsAddingDragCancelActionIfNecessaryForActions:v4];

  return v5;
}

- (void)_handleCustomRotorContent:(id)a3 direction:(int64_t)a4
{
  v6 = [(VOTElement *)self->_currentElement customContent];
  if (![v6 count])
  {
    goto LABEL_21;
  }

  v7 = [VOTSharedWorkspace selectedLanguage];
  customContentIndex = self->_customContentIndex;
  if (customContentIndex)
  {
    if (a4 == 2 && customContentIndex == 0x7FFFFFFFFFFFFFFFLL)
    {
      goto LABEL_5;
    }

LABEL_7:
    if (customContentIndex == [v6 count] - 1)
    {
      if (a4 != 1)
      {
        v9 = [v6 count] - 1;
        goto LABEL_15;
      }
    }

    else if (a4 != 1 || self->_customContentIndex != 0x7FFFFFFFFFFFFFFFLL)
    {
      v9 = [v6 count] - 1;
      if (a4 == 1)
      {
        v10 = 1;
        goto LABEL_16;
      }

LABEL_15:
      v10 = -1;
LABEL_16:
      v11 = (self->_customContentIndex + v10);
      if (v9 >= v11)
      {
        v9 = v11;
      }

      goto LABEL_18;
    }

    v9 = 0;
    goto LABEL_18;
  }

  if (a4 != 2)
  {
    goto LABEL_7;
  }

LABEL_5:
  v9 = [v6 count] - 1;
LABEL_18:
  self->_customContentIndex = v9;
  v12 = VOTLogAudio();
  if (os_log_type_enabled(v12, OS_LOG_TYPE_DEFAULT))
  {
    v13 = self->_customContentIndex;
    v24[0] = 67109120;
    v24[1] = v13;
    _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_DEFAULT, "Content: %d", v24, 8u);
  }

  v14 = [v6 objectAtIndexedSubscript:self->_customContentIndex];
  v15 = +[VOTOutputRequest createRequest];
  v16 = [AXAttributedString alloc];
  v17 = [v14 attributedValue];
  v18 = [v16 initWithStringOrAttributedString:v17];
  v19 = [v15 addAttributedString:v18 withLanguage:v7];

  v20 = [AXAttributedString alloc];
  v21 = [v14 attributedLabel];
  v22 = [v20 initWithStringOrAttributedString:v21];
  v23 = [v15 addAttributedString:v22 withLanguage:v7];

  [v15 setGeneratesBraille:1];
  [v15 setBrailleType:1];
  [(VOTElementManager *)self sendRequest:v15];
  [(VOTElementManager *)self _resetOtherTapInputModes];

LABEL_21:
}

- (id)_customActionDefaultActionString
{
  v3 = [VOTSharedWorkspace selectedLanguage];
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXWebInteractiveVideoTrait])
  {
    v4 = [(VOTElement *)self->_currentElement uiElement];
    [v4 updateCache:2179];

    v5 = [(VOTElement *)self->_currentElement uiElement];
    LODWORD(v4) = [v5 BOOLWithAXAttribute:2179];

    v6 = off_1001FDDD0;
    if (v4)
    {
      v7 = @"web.interactive.video.pause.action";
    }

    else
    {
      v7 = @"web.interactive.video.play.action";
    }
  }

  else
  {
    v6 = off_1001FDDD0;
    v7 = @"activate.action";
  }

  v8 = sub_1000516CC(v6, v7, 0, v3);

  return v8;
}

- (void)_handleCustomRotorAction:(id)a3 direction:(int64_t)a4
{
  v5 = a3;
  v15 = [(VOTElementManager *)self _currentCustomActions];
  [VOTElementManager _handleValidatedCustomActionMovementThroughActions:"_handleValidatedCustomActionMovementThroughActions:forEvent:inDirection:" forEvent:? inDirection:?];

  v6 = [VOTSharedWorkspace selectedLanguage];
  if (self->_customActionIndex != 0x7FFFFFFFFFFFFFFFLL)
  {
    v8 = [v15 objectAtIndex:?];
    [v8 prepareWithContext:self];
    v7 = [v8 name];
    if (!v6)
    {
      v6 = [v8 language];
    }

LABEL_9:

    goto LABEL_11;
  }

  if ([v15 count])
  {
    if (self->_flags.itemChooserVisible && [(VOTElement *)self->_currentElement isInTableCell])
    {
      v7 = sub_1000516CC(off_1001FDDD0, @"item.chooser.default.action", 0, v6);
      goto LABEL_11;
    }

    v8 = [(VOTElementManager *)self _customActionDefaultActionString];
    v9 = sub_1000516CC(off_1001FDDD0, @"default.action.suffix", 0, v6);
    v7 = [AXAttributedString axAttributedStringWithString:v8];
    v10 = [AXAttributedString axAttributedStringWithString:v9];
    [v10 setAttribute:&__kCFBooleanTrue forKey:UIAccessibilityTokenLowPitch];
    [v7 appendAXAttributedString:v10];

    goto LABEL_9;
  }

  v7 = 0;
LABEL_11:
  [(VOTElementManager *)self _resetOtherTapInputModes];
  v11 = objc_opt_new();
  v12 = [v11 addString:v7 withLanguage:v6];
  [v11 setBrailleType:1];
  [v11 setGeneratesBraille:1];
  v13 = [v11 outputActions];
  v14 = [v13 lastObject];
  [v14 setObject:&__kCFBooleanTrue forVariant:76];

  [v11 send];
}

- (id)availableAudiographActionsForElement:(id)a3
{
  v3 = a3;
  v4 = +[NSMutableArray array];
  if (AXDeviceSupportsSonification())
  {
    v5 = off_1001FDDD0;
    v6 = [v3 language];
    v7 = sub_1000511CC(v5, @"search.rotor.audiograph.describe.chart", v6);
    [v4 addObject:v7];

    if ([v3 supportsAudiographs])
    {
      v8 = off_1001FDDD0;
      v9 = [v3 language];
      v10 = sub_1000511CC(v8, @"search.rotor.audiograph.play.sonification", v9);
      [v4 addObject:v10];

      v11 = +[AXSpringBoardServer server];
      LOBYTE(v9) = [v11 isShowingRemoteView:5];

      if ((v9 & 1) == 0)
      {
        v12 = off_1001FDDD0;
        v13 = [v3 language];
        v14 = sub_1000511CC(v12, @"search.rotor.audiograph.chart.details", v13);
        [v4 addObject:v14];
      }
    }
  }

  v15 = [v4 copy];

  return v15;
}

- (void)_handleAudiographAction:(int64_t)a3 event:(id)a4
{
  if (AXDeviceSupportsSonification())
  {
    v15 = [(VOTElementManager *)self availableAudiographActionsForElement:self->_currentElement];
    if ([v15 count])
    {
      v6 = [v15 count];
      v7 = self->_audiographActionIdentifier;
      v8 = [v15 indexOfObject:v7];
      if (v8 == 0x7FFFFFFFFFFFFFFFLL)
      {
        v9 = 0;
      }

      else
      {
        if (a3 == 1)
        {
          v10 = 1;
        }

        else
        {
          v10 = -1;
        }

        v9 = (v8 + v6 + v10) % v6;
      }

      v11 = [v15 objectAtIndexedSubscript:v9];
      audiographActionIdentifier = self->_audiographActionIdentifier;
      self->_audiographActionIdentifier = v11;

      [(VOTElementManager *)self _resetOtherTapInputModes];
      v13 = [VOTSharedWorkspace selectedLanguage];
      v14 = sub_1000095FC(self->_audiographActionIdentifier, 0, v13);
    }
  }
}

- (void)_handleToggleLiveRegions:(int64_t)a3
{
  v4 = [(VOTElementManager *)self _appInfoForCurrentElement];
  v6 = v5;
  v7 = v4;
  v8 = v6;
  v9 = [(VOTElement *)self->_currentElement webAreaURL];
  v10 = [v9 host];

  v11 = VOTLogCommon();
  if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
  {
    *buf = 138478083;
    v28 = v4;
    v29 = 2113;
    v30 = v10;
    _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_DEFAULT, "Toggling live region for: %{private}@ %{private}@", buf, 0x16u);
  }

  v12 = v8;
  v13 = v7;
  if ([v10 length])
  {
    v14 = v10;

    v12 = v14;
    v13 = v12;
  }

  v15 = +[AXSettings sharedInstance];
  v16 = [v15 liveRegionStatusForWebOrApp:v13];

  v17 = &__kCFBooleanFalse;
  if (v16 && ![v16 BOOLValue])
  {
    v17 = &__kCFBooleanTrue;
  }

  v18 = off_1001FDDD0;
  v19 = [v17 BOOLValue];
  v20 = [VOTSharedWorkspace selectedLanguage];
  if (v19)
  {
    v21 = @"search.rotor.toggle.live.regions.on";
  }

  else
  {
    v21 = @"search.rotor.toggle.live.regions.off";
  }

  v22 = sub_1000516CC(v18, v21, 0, v20);

  v23 = AXCFormattedString();
  v24 = [VOTSharedWorkspace selectedLanguage];
  v25 = sub_1000095FC(v23, 0, v24);

  v26 = +[AXSettings sharedInstance];
  [v26 setLiveRegionStatusForWebOrApp:v13 status:v17];
}

- (void)_handleMLElementModeWithDirection:(int64_t)a3 verboseOutput:(BOOL)a4
{
  v4 = a4;
  v7 = [(VOTElementManager *)self _appInfoForCurrentElement];
  v26 = v8;
  if (j__VOSProcessAllowsScreenRecognition())
  {
    v9 = +[AXSettings sharedInstance];
    v10 = [v9 automaticAccessibilityModeForBundleIdentifier:v7];

    if (v10 >= 1)
    {
      v11 = 1;
    }

    else
    {
      v11 = v10;
    }

    if (a3 == 1)
    {
      if (v10 > 0)
      {
LABEL_13:
        v12 = off_1001FDDD0;
        [VOTSharedWorkspace selectedLanguage];
        if (v4)
          v13 = {;
          v14 = sub_1000516CC(v12, @"search.rotor.neural.vision.off", 0, v13);

          v25 = v26;
          AXCFormattedString();
        }

        else
          v14 = {;
          sub_1000516CC(v12, @"element.off.text", 0, v14);
        }
        v18 = ;

        if (![(VOTElement *)self->_currentElement isInAppSwitcher])
        {
          v19 = +[VOTDisplayManager displayManager];
          [v19 setElementFrames:&__NSArray0__struct];

          v20 = +[VOTDisplayManager displayManager];
          [v20 setCursorFrameForElement:0];

          [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer dispatchAfterDelay:1.0];
        }

        v11 = 0;
        goto LABEL_24;
      }

      ++v11;
    }

    else if (a3 == 2)
    {
      if (!v10)
      {
        goto LABEL_15;
      }

      --v11;
    }

    if (v11 != 1)
    {
      if (!v11)
      {
        goto LABEL_13;
      }

      v18 = 0;
LABEL_24:
      v21 = +[AXSettings sharedInstance];
      [v21 setAutomaticAccessibilityMode:v11 forBundleIdentifier:v7];

      AXSetProcessWantsMLElementForBundle();
      v22 = +[AXSettings sharedInstance];
      [v22 setAutomaticAccessibilityMode:v11 forBundleIdentifier:v7];

      v23 = [VOTSharedWorkspace selectedLanguage];
      v24 = sub_1000095FC(v18, 0, v23);

      goto LABEL_25;
    }

LABEL_15:
    v15 = off_1001FDDD0;
    [VOTSharedWorkspace selectedLanguage];
    if (v4)
      v16 = {;
      v17 = sub_1000516CC(v15, @"search.rotor.neural.vision.on", 0, v16);

      v25 = v26;
      AXCFormattedString();
    }

    else
      v17 = {;
      sub_1000516CC(v15, @"element.on.text", 0, v17);
    }
    v18 = ;

    v11 = 1;
    goto LABEL_24;
  }

LABEL_25:
}

- ($7159EBE1BBBCDCA1B95AF1FC27B9DE98)_appInfoForCurrentElement
{
  if (![(VOTElement *)self->_currentElement isInStatusBar]|| ([(NSArray *)self->_currentApplications firstObject], (v3 = objc_claimAutoreleasedReturnValue()) == 0))
  {
    v3 = [(VOTElement *)self->_currentElement application];
    if (!v3)
    {
      v3 = [(NSArray *)self->_currentApplications firstObject];
    }
  }

  v4 = v3;
  v5 = [v3 bundleIdentifier];
  v6 = [v4 label];
  if ([(VOTElement *)self->_currentElement isInAppSwitcher])
  {
    v7 = [(VOTElement *)self->_currentElement bundleIdentifier];

    v8 = [(VOTElement *)self->_currentElement label];

    v5 = v7;
    v6 = v8;
  }

  v9 = v5;
  v10 = v6;
  result.var1 = v10;
  result.var0 = v9;
  return result;
}

- (void)_handleNavigationStyleMovement:(id)a3 direction:(int64_t)a4
{
  v13 = [VOTSharedWorkspace selectedLanguage];
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 voiceOverNavigationStyle];

  v7 = +[AXSettings sharedInstance];
  v8 = v7;
  v9 = v6 != 1;
  if (v6 == 1)
  {
    v10 = @"NAVIGATION_STYLE_FLAT";
  }

  else
  {
    v10 = @"NAVIGATION_STYLE_GROUPS";
  }

  [v7 setVoiceOverNavigationStyle:v9];

  v11 = sub_1000516CC(off_1001FDDD0, v10, 0, v13);
  v12 = sub_1000095FC(v11, 0, v13);
  [(VOTElementFetcher *)self->_fetchManager forceUpdate];
}

- (void)_handleDetectionModeMovement:(id)a3 direction:(int64_t)a4
{
  v5 = [VOTSharedWorkspace currentRotorDetectionMode];
  v6 = +[AXSettings sharedInstance];
  v91 = [v6 voiceOverDetectionModeItems];

  if (![v91 count])
  {
    goto LABEL_60;
  }

  if ([v91 count])
  {
    v7 = 0;
    while (1)
    {
      v8 = [v91 objectAtIndexedSubscript:v7];
      v9 = [v8 valueForKey:@"Detector"];
      v10 = [v9 stringValue];
      v11 = AXDetectionModeForName();

      if (v11 == v5)
      {
        break;
      }

      if ([v91 count] <= ++v7)
      {
        goto LABEL_6;
      }
    }
  }

  else
  {
LABEL_6:
    LODWORD(v7) = 0;
  }

  if (a4 == 2)
  {
    if (v5 == 6)
    {
      v22 = +[AXSettings sharedInstance];
      v23 = [v22 liveRecognitionActivity];
      v14 = [v23 name];

      v24 = +[AXSettings sharedInstance];
      v25 = [v24 liveRecognitionActivities];
      v17 = [v25 allKeys];

      v26 = [v17 indexOfObject:v14];
      if (v26 && v26 != 0x7FFFFFFFFFFFFFFFLL)
      {
        v21 = v26 - 1;
        v20 = v17;
LABEL_46:
        v60 = [v20 objectAtIndexedSubscript:v21];
        v69 = +[AXSettings sharedInstance];
        v70 = [v69 liveRecognitionActivities];
        v61 = [v70 objectForKeyedSubscript:v60];

        v62 = +[AXSettings sharedInstance];
        [v62 setLiveRecognitionActivity:v61];
        v5 = 6;
LABEL_47:

        goto LABEL_52;
      }

      v27 = v7;
      while (v27-- >= 1)
      {
        v29 = [v91 objectAtIndexedSubscript:v27];
        v30 = [v29 valueForKey:@"Enabled"];
        v31 = [v30 BOOLValue];

        v32 = v91;
        if (v31)
        {
LABEL_36:
          v60 = [v32 objectAtIndexedSubscript:v27];
          v61 = [v60 valueForKey:@"Detector"];
          v62 = [v61 stringValue];
          v5 = AXDetectionModeForName();
          goto LABEL_47;
        }
      }

      v45 = v91;
    }

    else
    {
      v45 = v91;
      if (v7)
      {
        v46 = v7 + 1;
        while (1)
        {
          v47 = [v45 objectAtIndexedSubscript:v46 - 2];
          v48 = [v47 valueForKey:@"Enabled"];
          v49 = [v48 BOOLValue];

          if (v49)
          {
            v50 = [v91 objectAtIndexedSubscript:v46 - 2];
            v51 = [v50 valueForKey:@"Detector"];
            v52 = [v51 stringValue];
            v5 = AXDetectionModeForName();

            if (v5 != 6)
            {
              goto LABEL_53;
            }

            v53 = +[AXSettings sharedInstance];
            v54 = [v53 liveRecognitionActivities];
            v55 = [v54 allKeys];
            v56 = [v55 count];

            if (v56)
            {
              break;
            }
          }

          --v46;
          v45 = v91;
          if (v46 <= 1)
          {
            goto LABEL_41;
          }
        }

        v71 = +[AXSettings sharedInstance];
        v72 = [v71 liveRecognitionActivities];
        v73 = [v72 allKeys];
        v74 = [v73 lastObject];
LABEL_50:
        v14 = v74;

        v75 = +[AXSettings sharedInstance];
        v76 = [v75 liveRecognitionActivities];
        v17 = [v76 objectForKeyedSubscript:v14];

        v60 = +[AXSettings sharedInstance];
        [v60 setLiveRecognitionActivity:v17];
        goto LABEL_51;
      }
    }

LABEL_41:
    v65 = [v45 lastObject];
    v66 = [v65 valueForKey:@"Detector"];
    v67 = [v66 stringValue];
    v5 = AXDetectionModeForName();

    if (v5 == 6)
    {
      v14 = +[AXSettings sharedInstance];
      v17 = [v14 liveRecognitionActivities];
      v60 = [v17 allKeys];
      if (![v60 count])
      {
        v68 = [v91 count];

        if (v68 < 2)
        {
          v5 = 6;
          goto LABEL_53;
        }

        v64 = [v91 count] - 2;
        v63 = v91;
        goto LABEL_39;
      }

LABEL_51:
      v5 = 6;
      goto LABEL_52;
    }
  }

  else if (a4 == 1)
  {
    if (v5 == 6)
    {
      v12 = +[AXSettings sharedInstance];
      v13 = [v12 liveRecognitionActivity];
      v14 = [v13 name];

      v15 = +[AXSettings sharedInstance];
      v16 = [v15 liveRecognitionActivities];
      v17 = [v16 allKeys];

      v18 = [v17 indexOfObject:v14];
      if (v18 != 0x7FFFFFFFFFFFFFFFLL)
      {
        v19 = v18 + 1;
        if (v18 + 1 < [v17 count])
        {
          v20 = v17;
          v21 = v19;
          goto LABEL_46;
        }
      }

      v27 = v7;
      v32 = v91;
      while ([v32 count] > ++v27)
      {
        v57 = [v91 objectAtIndexedSubscript:v27];
        v58 = [v57 valueForKey:@"Enabled"];
        v59 = [v58 BOOLValue];

        v32 = v91;
        if (v59)
        {
          goto LABEL_36;
        }
      }

      goto LABEL_38;
    }

    v33 = (v7 + 1);
    if ([v91 count] <= v33)
    {
LABEL_38:
      v63 = v91;
      v64 = 0;
LABEL_39:
      v14 = [v63 objectAtIndexedSubscript:v64];
      v17 = [v14 valueForKey:@"Detector"];
      v60 = [v17 stringValue];
      v5 = AXDetectionModeForName();
LABEL_52:

      goto LABEL_53;
    }

    while (1)
    {
      v34 = [v91 objectAtIndexedSubscript:v33];
      v35 = [v34 valueForKey:@"Enabled"];
      v36 = [v35 BOOLValue];

      v37 = v91;
      if (v36)
      {
        v38 = [v91 objectAtIndexedSubscript:v33];
        v39 = [v38 valueForKey:@"Detector"];
        v40 = [v39 stringValue];
        v5 = AXDetectionModeForName();

        if (v5 != 6)
        {
          goto LABEL_53;
        }

        v41 = +[AXSettings sharedInstance];
        v42 = [v41 liveRecognitionActivities];
        v43 = [v42 allKeys];
        v44 = [v43 count];

        v37 = v91;
        if (v44)
        {
          break;
        }
      }

      if ([v37 count] <= ++v33)
      {
        goto LABEL_38;
      }
    }

    v71 = +[AXSettings sharedInstance];
    v72 = [v71 liveRecognitionActivities];
    v73 = [v72 allKeys];
    v74 = [v73 firstObject];
    goto LABEL_50;
  }

LABEL_53:
  [VOTSharedWorkspace setCurrentRotorDetectionMode:v5];
  if (v5 == 6)
  {
    v77 = +[AXSettings sharedInstance];
    v78 = [v77 liveRecognitionActivity];
    if ([v78 isActive])
    {
      v79 = +[AXSettings sharedInstance];
      v80 = [v79 enabledLiveRecognitionModes];
      v81 = [NSNumber numberWithUnsignedInt:6];
      v82 = [v80 containsObject:v81];
    }

    else
    {
      v82 = 0;
    }

    v83 = +[AXSettings sharedInstance];
    v84 = [v83 liveRecognitionActivity];
    v85 = [v84 name];
    v86 = sub_100087D3C(v85, v82);
    v89 = [NSString stringWithFormat:@"%@, %@", v85, v86];
  }

  else
  {
    v83 = AXLocalizedNameForDetectionMode();
    v84 = +[AXSettings sharedInstance];
    v85 = [v84 enabledLiveRecognitionModes];
    v86 = [NSNumber numberWithUnsignedInt:v5];
    v87 = [v85 containsObject:v86];
    v88 = sub_100087D3C(v87, v87);
    v89 = [NSString stringWithFormat:@"%@, %@", v83, v88];
  }

  v90 = sub_1000095FC(v89, 0, 0);
LABEL_60:

  _objc_release_x1();
}

- (void)_handleImageDescriptionsToggle:(int64_t)a3
{
  v3 = [(VOTElementManager *)self _appInfoForCurrentElement];
  v18 = v4;
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 imageCaptioningDisabledApps];
  v7 = [v6 mutableCopy];

  if (!v7)
  {
    v7 = +[NSMutableSet set];
  }

  if ([v7 containsObject:v3])
  {
    [v7 removeObject:v3];
    v8 = off_1001FDDD0;
    v9 = [VOTSharedWorkspace selectedLanguage];
    sub_1000516CC(v8, @"image.descriptions.on.for.app", 0, v9);
  }

  else
  {
    [v7 addObject:v3];
    v10 = off_1001FDDD0;
    v9 = [VOTSharedWorkspace selectedLanguage];
    sub_1000516CC(v10, @"image.descriptions.off.for.app", 0, v9);
  }
  v11 = ;

  v12 = [v7 allObjects];
  v13 = +[AXSettings sharedInstance];
  [v13 setImageCaptioningDisabledApps:v12];

  v14 = [VOTSharedWorkspace visionEngine];
  [v14 purgeCache];

  v15 = AXCFormattedString();
  v16 = [VOTSharedWorkspace selectedLanguage];
  v17 = sub_1000095FC(v15, 0, v16);
}

- (void)_handleIntraContainerMovement:(id)a3
{
  v11 = a3;
  v4 = [v11 command];
  v5 = [v4 isEqualToString:kVOTEventCommandContainerTop];

  v6 = [(VOTElement *)self->_currentElement touchContainer];
  v7 = v6;
  if (v5)
  {
    [v6 firstContainedElement];
  }

  else
  {
    [v6 lastContainedElement];
  }
  v8 = ;
  if (v8)
  {
    [(VOTElementManager *)self _echoDifferentElement:v8 forEvent:v11];
  }

  else
  {
    v9 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v9 sendEvent:v10];
  }
}

- (void)_handleContainerMovement:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandNextContainer])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleContainerMovement:v6 direction:v5];
}

- (void)_handleGuideElementMovement:(id)a3 direction:(int64_t)a4
{
  v6 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v7 = [(VOTElementManager *)self _currentElement];
  v8 = v7;
  if (a4 == 1)
  {
    [v7 nextGuideElement];
  }

  else
  {
    [v7 previousGuideElement];
  }
  v9 = ;
  if (![v9 isAccessibleElement])
  {
    v13 = [v9 accessibleDescendants];
    v10 = [v13 firstObject];

    if (v10)
    {
      goto LABEL_9;
    }

LABEL_11:
    v14 = +[VOTOutputManager outputManager];
    v15 = +[VOSOutputEvent BoundaryEncountered];
    [v14 sendEvent:v15];

    goto LABEL_12;
  }

  v10 = v9;
  if (!v10)
  {
    goto LABEL_11;
  }

LABEL_9:
  v11 = sub_100052438(a4);
  v16 = _NSConcreteStackBlock;
  v17 = 3221225472;
  v18 = sub_100088338;
  v19 = &unk_1001C7778;
  v20 = self;
  v12 = v10;
  v21 = v12;
  [v12 scrollToElementForDirectional:v11 withCompletion:&v16];
  [v6 setIsGuideElementMovementEvent:{1, v16, v17, v18, v19, v20}];
  [(VOTElementManager *)self _echoDifferentElement:v12 forEvent:v6];
  [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v12];

LABEL_12:
}

- (void)_handleContainerMovement:(id)a3 direction:(int64_t)a4
{
  v6 = a3;
  v7 = [(VOTElementManager *)self _currentElement];
  v8 = v7;
  if (a4 == 1)
  {
    v9 = [v7 nextContainer];
    v10 = 0;
  }

  else
  {
    v11 = [v7 touchContainer];
    v12 = [v11 firstContainedElement];
    v13 = v12;
    if (v11 && ![v12 isEqual:v8])
    {
      v10 = v13;
      v9 = 0;
    }

    else
    {
      v9 = [v8 previousContainer];
      v10 = 0;
    }
  }

  if ([v9 isTouchContainer])
  {
    v14 = [v9 firstContainedElement];
  }

  else
  {
    v14 = v9;
  }

  v16 = v14;
  v17 = v14 == 0;
  if (v14 || !v9)
  {
    v18 = v9;
  }

  else
  {
    *&v15 = 138412546;
    v25 = v15;
    do
    {
      if (a4 == 1)
      {
        [v9 nextContainer];
      }

      else
      {
        [v9 previousContainer];
      }
      v18 = ;

      v16 = [v18 firstContainedElement];
      v19 = VOTLogElement();
      if (os_log_type_enabled(v19, OS_LOG_TYPE_DEBUG))
      {
        *buf = v25;
        v33 = v18;
        v34 = 2112;
        v35 = v16;
        _os_log_debug_impl(&_mh_execute_header, v19, OS_LOG_TYPE_DEBUG, "found empty container, trying next container: %@, with found element: %@", buf, 0x16u);
      }

      v17 = v16 == 0;
      if (v16)
      {
        break;
      }

      v9 = v18;
    }

    while (v18);
  }

  if (!v17 && ([v16 isEqual:v8] & 1) == 0)
  {
    v23 = v16;

    v24 = [v23 firstVisibleElementInList];
    if (v24)
    {
      v10 = v24;

      goto LABEL_30;
    }

    v10 = v23;
LABEL_26:
    v20 = sub_100052438(a4);
    v26 = _NSConcreteStackBlock;
    v27 = 3221225472;
    v28 = sub_100088698;
    v29 = &unk_1001C7778;
    v30 = self;
    v10 = v10;
    v31 = v10;
    [v10 scrollToElementForDirectional:v20 withCompletion:&v26];

LABEL_30:
    [(VOTElementManager *)self _echoDifferentElement:v10 forEvent:v6, v25, v26, v27, v28, v29, v30];
    [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v10];
    goto LABEL_31;
  }

  if (v10)
  {
    goto LABEL_26;
  }

  v21 = +[VOTOutputManager outputManager];
  v22 = +[VOSOutputEvent BoundaryEncountered];
  [v21 sendEvent:v22];

LABEL_31:
}

- (void)_handleElementMoveToStatusBar:(id)a3
{
  v4 = a3;
  v5 = kAXStatusBarElementTrait;
  if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXStatusBarElementTrait])
  {
    v6 = self->_elementBeforeStatusBarMovement;
    if (![(VOTElement *)v6 isValid])
    {
      v7 = +[VOTElement systemAppApplication];
      v8 = [v7 focusedApplications];
      v9 = [v8 firstObject];
      v10 = [v9 firstElementInApplication];

      v6 = v10;
    }

    elementBeforeStatusBarMovement = self->_elementBeforeStatusBarMovement;
    self->_elementBeforeStatusBarMovement = 0;

    [(VOTElementManager *)self _echoDifferentElement:v6 forEvent:v4];
  }

  else
  {
    objc_storeStrong(&self->_elementBeforeStatusBarMovement, self->_currentElement);
    v12 = +[VOTElement systemAppApplication];
    v6 = [v12 firstElementInStatusBar];

    v33 = 0u;
    v34 = 0u;
    v31 = 0u;
    v32 = 0u;
    v13 = +[VOTElement systemAppApplication];
    v14 = [v13 statusBarElements];

    v15 = [v14 countByEnumeratingWithState:&v31 objects:v35 count:16];
    if (v15)
    {
      v29 = v6;
      v30 = v4;
      v16 = *v32;
      while (2)
      {
        for (i = 0; i != v15; i = (i + 1))
        {
          if (*v32 != v16)
          {
            objc_enumerationMutation(v14);
          }

          v18 = *(*(&v31 + 1) + 8 * i);
          if ([v18 doesHaveTraits:{v5, v29, v30}])
          {
            v19 = [v18 roleDescription];
            v20 = [(VOTElement *)self->_currentElement windowSceneIdentifier];
            v21 = [v19 isEqualToString:v20];

            if (v21)
            {
              v15 = v18;
              goto LABEL_16;
            }
          }
        }

        v15 = [v14 countByEnumeratingWithState:&v31 objects:v35 count:16];
        if (v15)
        {
          continue;
        }

        break;
      }

LABEL_16:
      v6 = v29;
      v4 = v30;
    }

    v22 = [(VOTElement *)v6 window];
    v23 = [(VOTElement *)v15 window];
    v24 = [v22 isEqual:v23];

    if ((v15 == 0) | v24 & 1)
    {
      v25 = v6;
    }

    else
    {
      v25 = v15;
    }

    v26 = v25;
    if ([(VOTElement *)v26 doesHaveTraits:v5])
    {
      [(VOTElementManager *)self _echoDifferentElement:v26 forEvent:v4];
    }

    else
    {
      v27 = +[VOTOutputManager outputManager];
      v28 = +[VOSOutputEvent NoItemExists];
      [v27 sendEvent:v28];
    }
  }
}

- (void)_dismissAlternativeKeyboardKeys
{
  [(VOTElement *)self->_currentElement dismissAlternativeKeyboardPicker];
  self->_keyboardAlternativesVisible = 0;
  v3 = CGPointZero;
  self->_keyboardAlternativeVisibleTrackingPoint = CGPointZero;
  self->_keyboardAlternativeVisibleStartPoint = v3;
  [VOTSharedWorkspace cancelTapAndHoldMode];
  v4 = +[VOTElement systemWideElement];
  [v4 sendTouchCancelledEvent];

  v5 = [(VOTElement *)self->_currentElement application];
  v8 = [v5 currentSoftwareKeyboardLayout];

  if ((sub_100052974(v8) & 1) == 0)
  {
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent PopoverDidAppear];
    [v6 sendEvent:v7];
  }
}

- (void)_activateAlternativeKeyboardKey:(id)a3
{
  if (self->_flags.shouldTriggerAlternativeKeyActivation)
  {
    v4 = [(VOTElement *)self->_currentElement application];
    v5 = [v4 activeKeyboard];
    v6 = [v5 isKeyboardContinuousPathAvailable];

    if (v6)
    {
      v7 = +[AXHapticFeedbackManager sharedManager];
      [v7 playHapticFeedbackForType:17];
    }

    self->_flags.shouldTriggerAlternativeKeyActivation = 0;
    v8 = !self->_flags.continuousPathActivationDesired;
    v9 = VOTLogCommon();
    if (os_log_type_enabled(v9, OS_LOG_TYPE_INFO))
    {
      v10[0] = 67109120;
      v10[1] = v8;
      _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_INFO, "Starting alternative keyboard key: play sound: %d", v10, 8u);
    }

    [VOTSharedWorkspace startTapAndHoldMode:v8];
    self->_flags.continuousPathActivationDesired = 0;
  }
}

- (void)_resetQuickNavState
{
  v6 = +[VOTKeyboardManager keyboardManager];
  if ([v6 isQuickNavOn])
  {
  }

  else
  {
    v3 = +[VOTConfiguration rootConfiguration];
    v4 = [v3 preferenceForKey:@"VOTQuickNavEnabled"];
    v5 = [v4 BOOLValue];

    if (v5 && CFAbsoluteTimeGetCurrent() - self->_lastTemporaryQuickNavDisableTime > 0.5)
    {
      [VOTSharedWorkspace temporarilyChangeQuickNavState:1];

      [(VOTElementManager *)self _handleQuickNavFeedback:1];
    }
  }
}

- (void)_updateExternalAccessory:(id)a3
{
  v3 = a3;
  v4 = +[VOTExternalAccessoryManager accessoryManager];
  [v4 updateCurrentItemProperties:v3];
}

- (BOOL)_languageRotorItemsContainLanguage:(id)a3
{
  v3 = a3;
  v15 = 0u;
  v16 = 0u;
  v17 = 0u;
  v18 = 0u;
  v4 = [VOTSharedWorkspace languageRotorItems];
  v5 = [v4 countByEnumeratingWithState:&v15 objects:v19 count:16];
  if (v5)
  {
    v6 = v5;
    v7 = *v16;
    while (2)
    {
      for (i = 0; i != v6; i = i + 1)
      {
        if (*v16 != v7)
        {
          objc_enumerationMutation(v4);
        }

        v9 = [*(*(&v15 + 1) + 8 * i) objectForKeyedSubscript:@"RotorItem"];
        if ([v9 isEqualToString:v3])
        {

LABEL_13:
          v13 = 1;
          goto LABEL_14;
        }

        v10 = AXLanguageConvertToCanonicalForm();
        v11 = AXLanguageConvertToCanonicalForm();
        v12 = [v10 isEqualToString:v11];

        if (v12)
        {
          goto LABEL_13;
        }
      }

      v6 = [v4 countByEnumeratingWithState:&v15 objects:v19 count:16];
      v13 = 0;
      if (v6)
      {
        continue;
      }

      break;
    }
  }

  else
  {
    v13 = 0;
  }

LABEL_14:

  return v13;
}

- (void)_updateMostRecentElementCommunity
{
  v3 = [(VOTElementManager *)self _elementCommunityForElement:self->_currentElement];
  [(VOTElementManager *)self _updateWithMostRecentElementCommunity:v3];
}

- (BOOL)_updateWithMostRecentElementCommunity:(id)a3
{
  v4 = a3;
  if (v4 && (-[VOTElementManager mostRecentElementCommunity](self, "mostRecentElementCommunity"), v5 = objc_claimAutoreleasedReturnValue(), v6 = [v5 isEqual:v4], v5, (v6 & 1) == 0))
  {
    [(VOTElementManager *)self setMostRecentElementCommunity:v4];
    [(VOTElementManager *)self _updateMLElementAutorefresh];
    v7 = 1;
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (BOOL)_isElementValidForFirstResponder:(id)a3
{
  v4 = a3;
  v5 = v4;
  if (self->_firstResponderElement)
  {
    if ([v4 isEqual:?])
    {
      v6 = 1;
    }

    else
    {
      v7 = [v5 textInputElement];
      v6 = [v7 isEqual:self->_firstResponderElement];
    }
  }

  else
  {
    v6 = 0;
  }

  return v6;
}

- (BOOL)_setCurrentElement:(id)a3 shouldSetBrailleElement:(id)a4
{
  v6 = a3;
  LOBYTE(a4) = -[VOTElementManager _setCurrentElement:isProtectedApp:shouldResetTextSelection:shouldResetCharacterRange:ignoreIsAccessibilityElementCheck:shouldSetBrailleElement:](self, "_setCurrentElement:isProtectedApp:shouldResetTextSelection:shouldResetCharacterRange:ignoreIsAccessibilityElementCheck:shouldSetBrailleElement:", v6, 0, 1, 1, 0, [a4 BOOLValue]);

  return a4;
}

- (BOOL)_setCurrentElement:(id)a3 isProtectedApp:(BOOL)a4 shouldResetTextSelection:(BOOL)a5 shouldResetCharacterRange:(BOOL)a6 ignoreIsAccessibilityElementCheck:(BOOL)a7 shouldSetBrailleElement:(BOOL)a8
{
  v8 = a8;
  v9 = a7;
  v10 = a6;
  v11 = a5;
  v12 = a4;
  v15 = a3;
  v16 = VOTLogElement();
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEBUG))
  {
    sub_10012B7B0();
  }

  IsTV = AXDeviceIsTV();
  if (v15 && IsTV && [VOTSharedWorkspace tvInteractionMode] != 2)
  {
    v24 = VOTLogElement();
    if (os_log_type_enabled(v24, OS_LOG_TYPE_ERROR))
    {
      sub_10012B820();
    }

    goto LABEL_64;
  }

  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v115 = v8;
  if (!v15 && v12)
  {
    _AXAssert();
  }

  if (AXDeviceHasJindo())
  {
    jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
    v19 = [v15 bundleIdentifier];
    if (-[NSArray containsObject:](jindoAppBundleIdentifiers, "containsObject:", v19) && ([v15 isInJindoWindow] & 1) == 0)
    {
      v48 = [v15 isInAppSwitcher];

      if ((v48 & 1) == 0)
      {
        goto LABEL_66;
      }
    }

    else
    {
    }
  }

  if ([VOTSharedWorkspace brailleInputActive] && (objc_msgSend(VOTSharedWorkspace, "brailleInputAllowsElementMovement") & 1) == 0)
  {
    v24 = VOTLogElement();
    if (os_log_type_enabled(v24, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v24, OS_LOG_TYPE_DEFAULT, "Stopping _setCurrentElement to prevent the focus from moving while we're editing text in BSI", buf, 2u);
    }

    goto LABEL_64;
  }

  if ([VOTSharedWorkspace navigationStyleHonorsGroups])
  {
    v20 = [v15 isAccessibleGroup];
    if (!v15)
    {
LABEL_23:
      if ([v15 isBannerNotification])
      {
        v21 = VOTLogElement();
        if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
        {
          sub_10012B98C();
        }
      }

      v114 = v20;
      p_currentElement = &self->_currentElement;
      if ([v15 isEqual:self->_currentElement])
      {
        objc_storeStrong(&self->_currentElement, a3);
        [(VOTElementManager *)self _updateMostRecentElementCommunity];
        [(VOTElementManager *)self _updateExternalAccessory:v15];
        if ([v15 doesHaveTraits:kAXIsEditingTrait])
        {
          [(VOTElementManager *)self _updateFirstResponder];
        }

        v23 = [(VOTElement *)*p_currentElement application];
        v24 = [v23 bundleIdentifier];

        if (([v24 isEqualToString:@"com.apple.InputUI"]& 1) == 0)
        {
          v25 = [(VOTElement *)self->_currentElement application];
          lastApplication = self->_lastApplication;
          self->_lastApplication = v25;
        }

        if ((AXDeviceIsAudioAccessory() & 1) == 0)
        {
          if (([v15 mediaAnalysisOptions] & 0x40000) != 0)
          {
            v27 = +[VOTWorkspace sharedWorkspace];
            v28 = [v27 visionEngine];
            [v28 purgeCache];
          }

          v29 = +[VOTWorkspace sharedWorkspace];
          v30 = [v29 visionEngine];

          if (([v30 wasCachePurged] & 1) != 0 || (objc_msgSend(v30, "resultsForElement:", *p_currentElement), v31 = objc_claimAutoreleasedReturnValue(), v32 = objc_msgSend(v31, "count"), v31, !v32))
          {
            v33 = *p_currentElement;
            if ([VOTVisionEngine shouldAnalyzeElement:v33])
            {
              v34 = objc_opt_new();
              [v34 setIncludeFullImageDescriptionsForValidElements:{-[VOTElementManager determineFullImageDescriptionsEnabled:](self, "determineFullImageDescriptionsEnabled:", v33)}];
              [v34 setIncludeSceneDetection:{-[VOTElementManager determineSceneDetectionsEnabled:](self, "determineSceneDetectionsEnabled:", v33)}];
              [v30 analyzeElement:v33 withOptions:v34];
            }
          }
        }

        [(VOTElementManager *)self _updateContextDescriptors];
        [(VOTElementManager *)self _updateAnyThreadElementAccess];
        goto LABEL_64;
      }

      v35 = VOTLogElement();
      if (os_log_type_enabled(v35, OS_LOG_TYPE_DEBUG))
      {
        sub_10012BA28();
      }

      v36 = +[VOTWorkspace sharedWorkspace];
      v37 = [v36 visionEngine];
      [v37 purgeCache];

      v38 = [v15 application];
      v39 = [v38 supportedLanguageIfNecessary];

      v109 = v10;
      v110 = v11;
      if ([v15 doesHaveTraits:kAXStatusBarElementTrait])
      {

        v39 = 0;
      }

      v40 = [VOTSharedWorkspace selectedLanguage];
      v41 = AXLanguageCanonicalFormToGeneralLanguage();

      v42 = [VOTSharedWorkspace selectedLanguage];
      v43 = [VOTSharedWorkspace systemSpokenLanguage];
      v111 = v41;
      v112 = v39;
      if ([v42 isEqualToString:v43] || !v39 || !v41 || (-[NSObject hasPrefix:](v39, "hasPrefix:", v41) & 1) != 0)
      {

LABEL_53:
        [VOTSharedWorkspace setAdditionalLanguageRotorItem:v39];
        v44 = [v15 doesHaveTraits:kAXKeyboardKeyTrait];
        if (([v15 isEditableTextArea] & 1) != 0 || v44)
        {
          [(VOTElementManager *)self _updateFirstResponder];
        }

        v45 = +[VOTCommandHelper commandHelper];
        if ([v15 handlesGestureArea])
        {
          [v45 setHelpEnabled:1];
          [v15 gesturePracticeRegion];
          [v45 setPracticeRegion:?];
          [v45 setPracticeElement:v15];
        }

        else if ([v45 helpEnabled])
        {
          [v45 setHelpEnabled:0];
        }

        v107 = v45;
        v49 = [v15 customRotorActions];
        v50 = [v15 customActionGroupIdentifier];
        v51 = [(VOTElement *)*p_currentElement customActionGroupIdentifier];
        v113 = v49;
        if ([v50 isEqualToString:v51])
        {
        }

        else
        {
          v52 = [(VOTElement *)self->_currentElement cachedCustomRotorActions];
          v53 = [(VOTElementManager *)self customRotorActionsEqual:v49 otherActions:v52 ignoreDragItems:1];

          if (!v53)
          {
            v106 = 0;
            goto LABEL_74;
          }
        }

        v106 = [v15 retainsCustomRotorActionSetting];
LABEL_74:
        v54 = [(VOTElementManager *)self webEditableAncestor:v15];
        v24 = v112;
        if (!v54 || (-[VOTElementManager webEditableAncestor:](self, "webEditableAncestor:", self->_currentElement), v55 = objc_claimAutoreleasedReturnValue(), v56 = [v54 isEqual:v55], v55, (v56 & 1) == 0))
        {
          [(NSMutableDictionary *)self->_lastSeenFontProperties removeAllObjects];
        }

        [(VOTElementManager *)self _setLastSeenLineAndColumn:0];
        [(VOTElement *)self->_currentElement setVoiceOverFocused:0];
        [v15 setVoiceOverFocused:1];
        if (v114 && ![(NSString *)self->_lastEventCommand isEqualToString:kVOTEventCommandMoveOut])
        {
          v57 = +[VOTOutputManager outputManager];
          v58 = +[VOSOutputEvent IsInteractable];
          [v57 sendEvent:v58];
        }

        v59 = [(VOTElement *)*p_currentElement pid];
        if (v59 != [v15 pid])
        {
          [v15 setNavigationDirectionMode:{objc_msgSend(VOTSharedWorkspace, "navigationDirection")}];
        }

        if ([v15 isInMenuBar] && !self->_elementBeforeMenuBar)
        {
          objc_storeStrong(&self->_elementBeforeMenuBar, *p_currentElement);
        }

        objc_storeStrong(&self->_previousElement, self->_currentElement);
        objc_storeStrong(&self->_currentElement, a3);
        v60 = [v15 opaqueParent];
        currentOpaqueParent = self->_currentOpaqueParent;
        self->_currentOpaqueParent = v60;

        [(VOTElementManager *)self setElementGeneration:[(VOTElementManager *)self elementGeneration]+ 1];
        [(VOTElementManager *)self setLastElementChangeTime:CFAbsoluteTimeGetCurrent()];
        v62 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v62, OS_LOG_TYPE_DEBUG))
        {
          sub_10012BA98();
        }

        v63 = [(VOTElementManager *)self _elementCommunityForElement:v15];
        if (!v12)
        {
          [(VOTElementManager *)self _cacheFocusedElement:v15 forElementCommunity:v63];
        }

        v64 = [(VOTElement *)*p_currentElement application];
        v65 = [v64 bundleIdentifier];

        if (([v65 isEqualToString:@"com.apple.InputUI"] & 1) == 0)
        {
          v66 = [(VOTElement *)self->_currentElement application];
          v67 = self->_lastApplication;
          self->_lastApplication = v66;
        }

        [(VOTDragOutputManager *)self->_dragOutputManager currentElementChanged];
        [(VOTElementManager *)self resetFrequentUpdateTextCache];
        if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXUpdatesFrequentlyTrait])
        {
          [(VOTElementManager *)self _realTimeAdjustableUpdateFrequency:self->_currentElement];
          [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer dispatchAfterDelay:?];
          if (!v115)
          {
            goto LABEL_96;
          }
        }

        else
        {
          [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer cancel];
          if (!v115)
          {
LABEL_96:
            if (!self->_firstResponderElement && [(VOTElement *)*p_currentElement doesHaveTraits:kAXIsEditingTrait])
            {
              [(VOTElementManager *)self _updateFirstResponder];
            }

            if (![(VOTElementManager *)self _isElementValidForFirstResponder:self->_currentElement])
            {
              [(VOTElementManager *)self _resetQuickNavState];
            }

            [(VOTElementManager *)self _resetElementUnitIndexes];
            if (v106 && self->_customActionIdentifier)
            {
              v116[0] = _NSConcreteStackBlock;
              v116[1] = 3221225472;
              v116[2] = sub_100089FC8;
              v116[3] = &unk_1001C9CD8;
              v116[4] = self;
              v69 = [v113 indexOfObjectPassingTest:v116];
              self->_customActionIndex = v69;
              if (v69 != 0x7FFFFFFFFFFFFFFFLL)
              {
LABEL_107:
                self->_copiedSpeechIndex = 0x7FFFFFFFFFFFFFFFLL;
                [(VOTElementManager *)self _resetMathGranularMovementState];
                webSelectionText = self->_webSelectionText;
                self->_webSelectionText = 0;

                lineArray = self->_lineArray;
                self->_lineArray = 0;

                size = CGRectZero.size;
                self->_lineFrame.origin = CGRectZero.origin;
                self->_lineFrame.size = size;
                self->_textRangeBeingDisplayed = 0;
                self->_lastNothingSoundTime = -3061152000.0;
                previouslySpokenImageCaptionResults = self->_previouslySpokenImageCaptionResults;
                self->_previouslySpokenImageCaptionResults = 0;

                if (v109)
                {
                  self->_highlightedCharacterRange = xmmword_10017E110;
                }

                if (![(VOTElementRotor *)self->_elementRotor showsWebSearchResults])
                {
                  goto LABEL_115;
                }

                v75 = [(VOTElement *)*p_currentElement application];
                if ([v75 webSearchResultsActive])
                {
                  webSearchText = self->_webSearchText;

                  if (webSearchText)
                  {
LABEL_115:
                    if ([(VOTElementManager *)self _inMisspelledWordRotor])
                    {
                      [(VOTElementManager *)self _updateRotorForCurrentElement:&__kCFBooleanTrue completion:0];
                    }

                    if (v110 && ![(VOTElementManager *)self _inMisspelledWordRotor])
                    {
                      self->_lastUserTextSelectionDirection = 0;
                      self->_inTextProcessingRotorMode = 0;
                      self->_misspelledWordReplacementCycleIndex = 0x7FFFFFFFFFFFFFFFLL;
                      self->_flags.inKeyboardTextSelectionMode = 0;
                    }

                    self->_flags.shouldTriggerAlternativeKeyActivation = 0;
                    [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer cancel];
                    currentPublicCustomRotorItemResult = self->_currentPublicCustomRotorItemResult;
                    self->_currentPublicCustomRotorItemResult = 0;

                    self->_flags.shouldUpdateRotorForElement = 1;
                    v78 = [(VOTElement *)self->_currentElement doesHaveTraits:kAXAllowsDirectInteractionTrait];
                    v79 = 0;
                    self->_flags.currentElementAllowsDirectTouch = v78;
                    if (v78)
                    {
                      v79 = [(VOTElement *)*p_currentElement avoidAnnouncingDirectTouchArea];
                    }

                    self->_flags.avoidAnnouncingDirectTouchArea = v79;
                    currentElement = self->_currentElement;
                    if (currentElement)
                    {
                      v81 = [(VOTElement *)currentElement shouldSkipValidateElement];
                      v82 = *p_currentElement;
                      if ((v81 & 1) == 0)
                      {
                        v83 = v54;
                        v84 = [(VOTElement *)v82 application];
                        v85 = [(VOTElement *)v82 isValidForApplication:v84];

                        v82 = *p_currentElement;
                        if (v85)
                        {
                          [(VOTElement *)*p_currentElement centerPoint];
                          self->_lastValidElementLocation.x = v86;
                          self->_lastValidElementLocation.y = v87;
                          v82 = self->_currentElement;
                        }

                        v54 = v83;
                      }
                    }

                    else
                    {
                      v82 = 0;
                    }

                    if ([(VOTElement *)v82 doesHaveTraits:kAXHeaderTrait])
                    {
                      v88 = [(VOTElement *)*p_currentElement doesHaveAllTraits:kAXWebContentTrait];
                      v89 = *p_currentElement;
                      if (v88)
                      {
                        [(VOTElement *)v89 value];
                      }

                      else
                      {
                        [(VOTElement *)v89 headingLevelValue];
                      }
                      v90 = ;
                      -[VOTElementManager setLastElementHeadingLevel:](self, "setLastElementHeadingLevel:", [v90 intValue]);
                    }

                    [(VOTElementManager *)self setLastElementBlockquoteLevel:[(VOTElement *)self->_currentElement blockquoteLevel]];
                    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
                    [WeakRetained currentElementDidUpdate:self->_currentElement];

                    [(VOTElementManager *)self _updateExternalAccessory:v15];
                    [(VOTElementManager *)self _updateAnyThreadElementAccess];
                    [(VOTElementManager *)self _forceVisionRefresh];
                    [(VOTElementManager *)self _updateContextDescriptors];
                    v92 = [(VOTElementManager *)self currentElementChangedCallback];

                    if (v92)
                    {
                      v93 = [(VOTElementManager *)self currentElementChangedCallback];
                      (v93)[2](v93, self, self->_currentElement);
                    }

                    if (AXDeviceSupportsSonification())
                    {
                      v94 = +[VOTAudiographManager sharedManager];
                      v95 = [v94 isPlaying];

                      if (v95)
                      {
                        v96 = +[VOTAudiographManager sharedManager];
                        [v96 stopPlaying];
                      }

                      audiographActionIdentifier = self->_audiographActionIdentifier;
                      self->_audiographActionIdentifier = 0;
                    }

                    if ([VOTSharedWorkspace pointerVoiceOverCursorOption] == 1)
                    {
                      v98 = +[VOTDisplayManager displayManager];
                      [(VOTElement *)*p_currentElement centerPoint];
                      [v98 movePointerToPoint:-[VOTElement windowContextId](*p_currentElement contextId:{"windowContextId"), v99, v100}];
                    }

                    if (_AXSAutomationEnabled())
                    {
                      v101 = +[NSDistributedNotificationCenter defaultCenter];
                      [v101 postNotificationName:@"VoiceOverEventOccurred" object:@"CurrentElementDidChange"];
                    }

                    v47 = 1;
                    goto LABEL_144;
                  }
                }

                else
                {
                }

                [(VOTElementRotor *)self->_elementRotor setShowsWebSearchResults:0];
                goto LABEL_115;
              }
            }

            else
            {
              self->_customActionIndex = 0x7FFFFFFFFFFFFFFFLL;
            }

            customActionIdentifier = self->_customActionIdentifier;
            self->_customActionIdentifier = 0;

            goto LABEL_107;
          }
        }

        v68 = +[VOTBrailleManager manager];
        [v68 setBrailleElement:*p_currentElement];

        goto LABEL_96;
      }

      v103 = [VOTSharedWorkspace additionalLanguageRotorItem];
      v104 = [VOTSharedWorkspace selectedLanguage];
      if ([v103 isEqualToString:v104])
      {

        v39 = v112;
      }

      else
      {
        v105 = [VOTSharedWorkspace selectedLanguage];
        v108 = [(VOTElementManager *)self _languageRotorItemsContainLanguage:v105];

        v39 = v112;
        if (v108)
        {
          goto LABEL_53;
        }
      }

      [VOTSharedWorkspace setSelectedLanguage:0];
      goto LABEL_53;
    }
  }

  else
  {
    v20 = 0;
    if (!v15)
    {
      goto LABEL_23;
    }
  }

  if (([v15 isAccessibleElement] | (v9 || v12) | v20))
  {
    goto LABEL_23;
  }

  v46 = VOTLogElement();
  if (os_log_type_enabled(v46, OS_LOG_TYPE_ERROR))
  {
    sub_10012B8D0(v15);
  }

  if (_AXSInUnitTestMode())
  {
    v24 = [v15 description];
    [v24 UTF8String];
    _AXAssert();
LABEL_64:
    v47 = 0;
LABEL_144:

    goto LABEL_145;
  }

LABEL_66:
  v47 = 0;
LABEL_145:

  return v47;
}

- (void)_updateAnyThreadElementAccess
{
  os_unfair_lock_lock(&self->_anyThreadCurrentElementLock);
  objc_storeStrong(&self->_anyThreadCurrentElement, self->_currentElement);

  os_unfair_lock_unlock(&self->_anyThreadCurrentElementLock);
}

- (void)_updateSwipeFrames
{
  v3 = [(VOTElementManager *)self _currentElement];
  if (v3)
  {
    v4 = [(VOTElement *)self->_currentElement elementsInDirection:1 withCount:5];
    v5 = [(VOTElement *)self->_currentElement elementsInDirection:2 withCount:5];
    v6 = +[NSMutableArray array];
    v7 = +[NSMutableArray array];
    v20[0] = _NSConcreteStackBlock;
    v20[1] = 3221225472;
    v20[2] = sub_10008A28C;
    v20[3] = &unk_1001C9D00;
    v8 = v6;
    v21 = v8;
    [v5 enumerateObjectsWithOptions:2 usingBlock:v20];
    [v8 addObject:v3];
    [v8 addObjectsFromArray:v4];
    v18 = 0u;
    v19 = 0u;
    v16 = 0u;
    v17 = 0u;
    v9 = v8;
    v10 = [v9 countByEnumeratingWithState:&v16 objects:v22 count:16];
    if (v10)
    {
      v11 = v10;
      v12 = *v17;
      do
      {
        v13 = 0;
        do
        {
          if (*v17 != v12)
          {
            objc_enumerationMutation(v9);
          }

          [*(*(&v16 + 1) + 8 * v13) frame];
          v14 = NSStringFromRect(v23);
          if (v14)
          {
            [v7 addObject:v14];
          }

          v13 = v13 + 1;
        }

        while (v11 != v13);
        v11 = [v9 countByEnumeratingWithState:&v16 objects:v22 count:16];
      }

      while (v11);
    }

    v15 = +[VOTDisplayManager displayManager];
    [v15 setElementFrames:v7];
  }
}

- (BOOL)mlElement:(id)a3 sharesLabel:(id)a4
{
  v6 = a3;
  v7 = a4;
  v8 = [v6 label];
  v9 = [v7 label];
  if (([v8 isEqualToString:v9] & 1) == 0)
  {
    v11 = [v7 label];
    if (v11)
    {
      v12 = [v6 label];
      v4 = [v7 label];
      if ([v12 containsString:v4])
      {
        v10 = 1;
LABEL_12:

LABEL_13:
        goto LABEL_14;
      }

      v18 = v12;
    }

    v13 = [v6 label];
    if (v13)
    {
      v14 = v13;
      v15 = [v7 label];
      v16 = [v6 label];
      v10 = [v15 containsString:v16];
    }

    else
    {
      v10 = 0;
    }

    v12 = v18;
    if (!v11)
    {
      goto LABEL_13;
    }

    goto LABEL_12;
  }

  v10 = 1;
LABEL_14:

  return v10;
}

- (void)_processExternalScrollToVisible:(id)a3
{
  [a3 pointValue];
  [(VOTElement *)self->_currentElement frame];
  AX_CGRectGetCenter();
  v5 = v4;
  v7 = v6;
  [AXUIMLElement setPerformFuzzyHitTestNextTime:1];
  v8 = [VOTElement alloc];
  v9 = [(VOTElement *)self->_currentElement application];
  v10 = [(VOTElement *)v8 initWithPosition:v9 application:[(VOTElement *)self->_currentElement windowContextId] contextId:v5, v7];

  v11 = AXMediaLogMLElement();
  if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
  {
    v20.x = v5;
    v20.y = v7;
    v12 = NSStringFromCGPoint(v20);
    currentElement = self->_currentElement;
    v14 = 138412802;
    v15 = v12;
    v16 = 2112;
    v17 = currentElement;
    v18 = 2112;
    v19 = v10;
    _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_DEFAULT, "Scroll to visible occurred -- looking for same element at %@\ncurrent %@\nfound: %@", &v14, 0x20u);
  }

  if (v10)
  {
    [(VOTElementManager *)self _setCurrentElement:v10];
  }
}

- (void)processExternalScrollToVisible:(CGPoint)a3
{
  elementManagerThread = self->_elementManagerThread;
  v5 = [NSValue valueWithPoint:a3.x, a3.y];
  [(SCRCThread *)elementManagerThread performSelector:"_processExternalScrollToVisible:" onTarget:self count:1 objects:v5, 0];
}

- (void)_processExternalElementUpdate
{
  v3 = AXMediaLogElementVision();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    currentElement = self->_currentElement;
    v5 = 138412290;
    v6 = currentElement;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "External element update with current: %@", &v5, 0xCu);
  }

  if (self->_currentElement)
  {
    self->_flags.shouldSpeakNextLayoutChange = 1;
    [(VOTElementManager *)self _handleLayoutChangeFromTimer];
  }

  else
  {
    [(VOTElementManager *)self _handleScreenChange:0 sound:0];
  }
}

- (_NSRange)_highlightedCharacterRange
{
  length = self->_highlightedCharacterRange.length;
  location = self->_highlightedCharacterRange.location;
  result.length = length;
  result.location = location;
  return result;
}

- (CGRect)currentLineFrame
{
  x = self->_lineFrame.origin.x;
  y = self->_lineFrame.origin.y;
  width = self->_lineFrame.size.width;
  height = self->_lineFrame.size.height;
  result.size.height = height;
  result.size.width = width;
  result.origin.y = y;
  result.origin.x = x;
  return result;
}

- (void)__retrieveValueForKeyPath:(id)a3 intoPointedToLocation:(id)a4 semaphore:(id)a5
{
  dsema = a5;
  v8 = a4;
  v9 = [(VOTElementManager *)self valueForKeyPath:a3];
  v10 = [v8 pointerValue];

  v11 = *v10;
  *v10 = v9;

  dispatch_semaphore_signal(dsema);
}

- (id)_valueForKeyPathOnElementManagerThread:(id)a3
{
  v4 = a3;
  v5 = dispatch_semaphore_create(0);
  v9 = 0;
  v6 = [NSValue valueWithPointer:&v9];
  [(SCRCThread *)self->_elementManagerThread performSelector:"__retrieveValueForKeyPath:intoPointedToLocation:semaphore:" onTarget:self count:3 objects:v4, v6, v5, 0];

  dispatch_semaphore_wait(v5, 0xFFFFFFFFFFFFFFFFLL);
  v7 = v9;

  return v7;
}

- (id)currentElement
{
  os_unfair_lock_lock(&self->_anyThreadCurrentElementLock);
  v3 = [(VOTElement *)self->_anyThreadCurrentElement copyWithCache];
  os_unfair_lock_unlock(&self->_anyThreadCurrentElementLock);

  return v3;
}

- (id)currentApplications
{
  if ([(VOTElementManager *)self isOnElementManagerThread])
  {
    _AXAssert();
  }

  v3 = [(VOTElementManager *)self _valueForKeyPathOnElementManagerThread:@"_currentApplications"];
  v4 = [v3 copyWithZone:0];

  return v4;
}

- (void)_handleStartHelpMode:(id)a3
{
  v11 = [VOTSharedWorkspace selectedLanguage];
  v3 = sub_1000516CC(off_1001FDDD0, @"starting.help.mode", 0, v11);
  v4 = sub_1000095FC(v3, 0, v11);

  v5 = sub_1000516CC(off_1001FDDD0, @"starting.help.mode.help", 0, v11);
  v6 = sub_1000095FC(v5, 2, v11);

  v7 = +[AXSettings sharedInstance];
  [v7 setVoiceOverHelpMode:0];

  v8 = +[VOTCommandHelper commandHelper];
  [v8 setHelpEnabled:1];

  v9 = xmmword_1001FF150;
  v10 = +[VOTCommandHelper commandHelper];
  [v10 setPracticeRegion:{0.0, 0.0, v9}];
}

- (void)_handleEscape:(id)a3
{
  v4 = a3;
  v5 = [VOTSharedWorkspace selectedLanguage];
  v6 = +[VOTCommandHelper commandHelper];
  v7 = [v6 helpEnabled];

  if (!v7)
  {
    if (![VOTSharedWorkspace brailleInputActive] || objc_msgSend(VOTSharedWorkspace, "brailleInputShouldBeDeactivatedByEscape"))
    {
      v14 = [(VOTElementManager *)self elementRotor];
      v15 = [v14 currentRotorType];

      if ([(VOTElementManager *)self forceRotorOffGesturedTextInputIfNeeded:1])
      {
        if (v15 == 60)
        {
          v13 = sub_1000516CC(off_1001FDDD0, @"stopping.handwriting", 0, v5);
        }

        else
        {
          v13 = 0;
        }

        v27 = sub_1000095FC(v13, 1, v5);
        goto LABEL_42;
      }

      if ([VOTSharedWorkspace brailleInputActive])
      {
        [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
        goto LABEL_43;
      }
    }

    if (self->_flags.inSearchTextMode)
    {
      v16 = sub_1000516CC(off_1001FDDD0, @"stopping.search.text.mode", 0, v5);
      v17 = sub_1000095FC(v16, 0, v5);

      self->_flags.inSearchTextMode = 0;
      v13 = +[VOTKeyboardManager keyboardManager];
      [v13 setCaptureModeEnabled:0];
      goto LABEL_42;
    }

    v13 = [(VOTElementManager *)self _currentElement];
    v18 = [v13 application];
    v19 = [v13 doesHaveTraits:kAXStatusBarElementTrait];
    v20 = [v13 performEscape];
    if (v19)
    {
      if ((v20 & 1) == 0)
      {
        v21 = self->_elementBeforeStatusBarMovement;
        if (![(VOTElement *)v21 isValid])
        {
          v22 = +[VOTElement systemAppApplication];
          v23 = [v22 focusedApplications];
          v24 = [v23 firstObject];
          v25 = [v24 firstElementInApplication];

          v21 = v25;
        }

        [(VOTElementManager *)self _echoDifferentElement:v21 forEvent:v4];
        elementBeforeStatusBarMovement = self->_elementBeforeStatusBarMovement;
        self->_elementBeforeStatusBarMovement = 0;
      }

      goto LABEL_41;
    }

    if (v20 & 1) != 0 || (-[VOTElementManager touchContainer](self, "touchContainer"), v28 = objc_claimAutoreleasedReturnValue(), v29 = [v28 performEscape], v28, (v29))
    {
LABEL_41:

      goto LABEL_42;
    }

    v30 = [v18 firstElementInApplication];
    if ([v30 performEscape])
    {
LABEL_40:

      goto LABEL_41;
    }

    [v30 elementsInDirection:1 withCount:20];
    v41 = 0u;
    v42 = 0u;
    v43 = 0u;
    v31 = v44 = 0u;
    v32 = [v31 countByEnumeratingWithState:&v41 objects:v45 count:16];
    if (v32)
    {
      v33 = v32;
      v34 = *v42;
      while (2)
      {
        v35 = 0;
        do
        {
          if (*v42 != v34)
          {
            objc_enumerationMutation(v31);
          }

          if ([*(*(&v41 + 1) + 8 * v35) performEscape])
          {
            v37 = v31;
            goto LABEL_38;
          }

          v35 = v35 + 1;
        }

        while (v33 != v35);
        v33 = [v31 countByEnumeratingWithState:&v41 objects:v45 count:16];
        if (v33)
        {
          continue;
        }

        break;
      }
    }

    if (_AXSClarityBoardEnabled())
    {
      v36 = +[VOTElement systemAppApplication];
      if ([v18 isEqual:v36])
      {
      }

      else
      {
        v38 = [v36 firstElementInApplication];
        v39 = [v38 performEscape];

        if (v39)
        {
LABEL_39:

          goto LABEL_40;
        }
      }
    }

    v37 = +[VOTOutputManager outputManager];
    v40 = +[VOSOutputEvent BoundaryEncountered];
    [v37 sendEvent:v40];

LABEL_38:
    goto LABEL_39;
  }

  v8 = +[VOTCommandHelper commandHelper];
  [v8 processHelpForEvent:v4];

  if (![v4 isTouchEvent] || (+[VOTCommandHelper commandHelper](VOTCommandHelper, "commandHelper"), v9 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v9, "practiceElement"), v10 = objc_claimAutoreleasedReturnValue(), v10, v9, !v10))
  {
    v11 = sub_1000516CC(off_1001FDDD0, @"stopping.help.mode", 0, v5);
    v12 = sub_1000095FC(v11, 2, v5);

    v13 = +[VOTCommandHelper commandHelper];
    [v13 setHelpEnabled:0];
LABEL_42:
  }

LABEL_43:
}

- (void)_handleSpeechRateChange:(BOOL)a3
{
  v3 = a3;
  [(VOTElementManager *)self rotorRate];
  v6 = -0.0500000007;
  if (v3)
  {
    v6 = 0.0500000007;
  }

  v7 = v6 + v5;
  v8 = 0.0;
  if (v7 >= 0.0)
  {
    v8 = v7;
    if (v7 > 1.0)
    {
      v8 = 1.0;
    }
  }

  v9 = dispatch_semaphore_create(0);
  v10 = [VOTSharedWorkspace votSettings];
  v11 = v8;
  v17[0] = _NSConcreteStackBlock;
  v17[1] = 3221225472;
  v17[2] = sub_10008B0F8;
  v17[3] = &unk_1001C76E8;
  v18 = v9;
  v12 = v9;
  *&v13 = v11;
  [v10 setRotorRate:v17 completionHandler:v13];

  dispatch_semaphore_wait(v12, 0xFFFFFFFFFFFFFFFFLL);
  v14 = [objc_allocWithZone(VOTOutputRequest) init];
  v15 = AXFormatFloatWithPercentage();
  v16 = [v14 addString:v15];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v14];
  [(VOTElementManager *)self sendRequest:v14];
}

- (void)_handleSoundRotorChange:(BOOL)a3
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 voiceOverSoundEffectsEnabled];

  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSoundEffectsEnabled:v4 ^ 1];

  v6 = [VOTSharedWorkspace selectedLanguage];
  v10 = v6;
  if (v4)
  {
    v7 = @"soundchange.off";
  }

  else
  {
    v7 = @"soundchange.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, v6);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleSpeechPunctuationChange:(BOOL)a3
{
  v3 = a3;
  v4 = [VOTSharedWorkspace defaultPunctuationGroup];
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 voiceOverPunctuationGroup];

  v7 = [VOTSharedWorkspace punctuationGroups];
  if ([v7 count])
  {
    if (!v6)
    {
      v6 = [v4 uuid];
    }

    v27 = _NSConcreteStackBlock;
    v28 = 3221225472;
    v29 = sub_10008B4EC;
    v30 = &unk_1001C8940;
    v6 = v6;
    v31 = v6;
    v8 = [v7 indexOfObjectPassingTest:&v27];
    if (v8 == 0x7FFFFFFFFFFFFFFFLL)
    {
      v9 = AXLogPunctuationStorage();
      if (os_log_type_enabled(v9, OS_LOG_TYPE_FAULT))
      {
        sub_10012BB1C();
      }

      v8 = 0;
    }

    if (v3)
    {
      v10 = v8 + 1;
    }

    else
    {
      v10 = v8 - 1;
    }

    if ((v10 & 0x8000000000000000) != 0)
    {
      v10 = [v7 count] - 1;
    }

    if (v10 >= [v7 count])
    {
      v11 = 0;
    }

    else
    {
      v11 = v10;
    }

    v12 = [v7 objectAtIndexedSubscript:v11];
    v13 = [v12 uuid];
    v14 = +[AXSettings sharedInstance];
    [v14 setVoiceOverPunctuationGroup:v13];

    v15 = [VOTSharedWorkspace selectedLanguage];
    v16 = [v12 name];
    v17 = [v12 uuid];
    v18 = [v4 uuid];
    v19 = [v17 isEqual:v18];

    if (v19)
    {
      v20 = +[AXSettings sharedInstance];
      [v20 setVoiceOverPunctuationGroup:0];

      v21 = sub_1000511CC(off_1001FDDD0, @"default.punctuation.format", 0);
      v22 = [v12 name];
      v23 = [NSString stringWithFormat:v21, v22, v27, v28, v29, v30];

      v16 = v23;
    }

    v24 = sub_1000095FC(v16, 0, v15);
  }

  else
  {
    v25 = +[VOTOutputManager outputManager];
    v26 = +[VOSOutputEvent BoundaryEncountered];
    [v25 sendEvent:v26];
  }
}

- (id)_typingEchoString
{
  v2 = +[AXSettings sharedInstance];
  v3 = [v2 voiceOverHardwareTypingFeedback];

  if (v3 > 3)
  {
    v4 = 0;
  }

  else
  {
    v4 = *(&off_1001CA488 + v3);
  }

  v5 = off_1001FDDD0;
  v6 = [VOTSharedWorkspace selectedLanguage];
  v7 = sub_1000516CC(v5, v4, 0, v6);

  return v7;
}

- (void)_handleTypingEchoChange:(BOOL)a3
{
  v3 = a3;
  v15 = [VOTSharedWorkspace selectedLanguage];
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 voiceOverHardwareTypingFeedback];

  v7 = 3;
  if (!v3)
  {
    v7 = 1;
  }

  v8 = 2;
  if (v3)
  {
    v8 = 0;
  }

  if (v6 != 3)
  {
    v8 = 0;
  }

  if (v6 != 2)
  {
    v7 = v8;
  }

  v9 = 3;
  if (v3)
  {
    v9 = 1;
  }

  v10 = 2;
  if (!v3)
  {
    v10 = 0;
  }

  if (v6 != 1)
  {
    v10 = 0;
  }

  if (v6)
  {
    v9 = v10;
  }

  if (v6 <= 1)
  {
    v11 = v9;
  }

  else
  {
    v11 = v7;
  }

  v12 = +[AXSettings sharedInstance];
  [v12 setVoiceOverHardwareTypingFeedback:v11];

  v13 = [(VOTElementManager *)self _typingEchoString];
  v14 = sub_1000095FC(v13, 0, v15);
}

- (id)_speechPhoneticsString
{
  v2 = +[AXSettings sharedInstance];
  v3 = [v2 voiceOverPhoneticsFeedback];

  if (v3 > 2)
  {
    return 0;
  }

  else
  {
    return *(&off_1001CA4A8 + v3);
  }
}

- (void)_handleSpeechPhoneticsChange:(BOOL)a3
{
  v3 = a3;
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 voiceOverPhoneticsFeedback];

  v7 = 1;
  if (!v3)
  {
    v7 = 2;
  }

  v8 = !v3;
  v9 = 2;
  if (!v3)
  {
    v9 = 0;
  }

  if (v6 != 1)
  {
    v9 = v6;
  }

  if (v6 != 2)
  {
    v8 = v9;
  }

  if (v6)
  {
    v10 = v8;
  }

  else
  {
    v10 = v7;
  }

  v11 = +[AXSettings sharedInstance];
  [v11 setVoiceOverPhoneticsFeedback:v10];

  v16 = [VOTSharedWorkspace selectedLanguage];
  v12 = off_1001FDDD0;
  v13 = [(VOTElementManager *)self _speechPhoneticsString];
  v14 = sub_1000516CC(v12, v13, 0, v16);
  v15 = sub_1000095FC(v14, 0, v16);
}

- (void)_handleActivityRotorChange:(BOOL)a3
{
  v3 = a3;
  v4 = [VOTSharedWorkspace selectedActivity];
  v5 = [VOTSharedWorkspace activities];
  v6 = VOTLogActivities();
  if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
  {
    v23 = 138412546;
    v24 = v4;
    v25 = 2112;
    v26 = v5;
    _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "VO current activity: %@ activities: %@", &v23, 0x16u);
  }

  if (v3)
  {
    v7 = 0;
    if (!v4)
    {
      goto LABEL_12;
    }
  }

  else
  {
    v7 = [v5 count] - 1;
    if (!v4)
    {
      goto LABEL_12;
    }
  }

  v8 = [v5 indexOfObject:v4];
  v9 = v8 - 1;
  if (v3)
  {
    v9 = v8 + 1;
  }

  if (v8 == 0x7FFFFFFFFFFFFFFFLL)
  {
    v7 = 0;
  }

  else
  {
    v7 = v9;
  }

LABEL_12:
  v10 = VOTLogActivities();
  if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
  {
    v23 = 67109120;
    LODWORD(v24) = v7;
    _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "VO activity index: %d", &v23, 8u);
  }

  v11 = [VOTSharedWorkspace selectedLanguage];
  v12 = [v5 count];
  if ((v7 & 0x8000000000000000) != 0 || v7 >= v12)
  {
    [VOTSharedWorkspace setSelectedActivity:0];
    v20 = [VOTSharedWorkspace previousRotorVoiceIdentifier];
    v21 = +[AXSettings sharedInstance];
    [v21 setVoiceOverCurrentRotorVoiceIdentifier:v20];

    [VOTSharedWorkspace setPreviousRotorVoiceIdentifier:0];
    v13 = sub_1000516CC(off_1001FDDD0, @"no.activity.selected", 0, v11);
    v22 = sub_1000095FC(v13, 0, v11);
  }

  else
  {
    v13 = [v5 objectAtIndexedSubscript:v7];
    v14 = [VOTSharedWorkspace selectedActivity];

    if (!v14)
    {
      v15 = +[AXSettings sharedInstance];
      v16 = [v15 voiceOverCurrentRotorVoiceIdentifier];
      [VOTSharedWorkspace setPreviousRotorVoiceIdentifier:v16];

      v17 = +[AXSettings sharedInstance];
      [v17 setVoiceOverCurrentRotorVoiceIdentifier:0];
    }

    v18 = [v13 name];
    v19 = sub_1000095FC(v18, 0, v11);

    [VOTSharedWorkspace setSelectedActivity:v13];
  }
}

- (void)_handleAudioDestination:(BOOL)a3
{
  v3 = [VOTSharedWorkspace audioDestinationRequestExternal];
  [VOTSharedWorkspace setAudioDestinationRequestExternal:v3 ^ 1];
  v9 = [VOTSharedWorkspace selectedLanguage];
  v4 = off_1001FDDD0;
  if ([VOTSharedWorkspace audioDestinationRequestExternal])
  {
    v5 = @"audiodestination.external";
  }

  else
  {
    v5 = @"audiodestination.local";
  }

  v6 = sub_1000516CC(v4, v5, 0, v9);
  v7 = sub_1000095FC(v6, 0, v9);

  v8 = +[VOTOutputManager outputManager];
  [v8 updateAudioSessionProperties];
}

- (void)_handleAudioDuckingAmountChange:(BOOL)a3
{
  v3 = a3;
  v4 = +[AXSettings sharedInstance];
  [v4 voiceOverMediaDuckingAmount];
  v6 = v5;

  v7 = 0.05;
  if (v3)
  {
    v7 = -0.05;
  }

  v8 = (v7 + v6) * 100.0;
  if (v8 % 5 <= 2)
  {
    v9 = 0;
  }

  else
  {
    v9 = 5;
  }

  v10 = fmax((5 * (v8 / 5) + v9) / 100.0, 0.01);
  if (v10 <= 0.99)
  {
    v11 = v10;
  }

  else
  {
    v11 = 0.99;
  }

  v12 = +[AXSettings sharedInstance];
  [v12 setVoiceOverMediaDuckingAmount:v11];

  v16 = [VOTSharedWorkspace selectedLanguage];
  v13 = sub_1000516CC(off_1001FDDD0, @"ducking.amount.short", 0, v16);
  v14 = AXCFormattedString();
  v15 = sub_1000095FC(v14, 0, v16);
}

- (void)_handleAudioDuckingChange:(BOOL)a3
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 voiceOverAudioDuckingEnabled];
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverAudioDuckingEnabled:v4 ^ 1];

  AXPerformBlockOnMainThreadAfterDelay();
}

- (id)_audioDuckingModeString
{
  v2 = +[AXSettings sharedInstance];
  v3 = [v2 voiceOverMediaDuckingMode];

  if (v3 > 2)
  {
    return &stru_1001CBF90;
  }

  else
  {
    return *(&off_1001CA4C0 + v3);
  }
}

- (void)_handleAudioDuckingModeChange:(BOOL)a3
{
  v3 = a3;
  v5 = +[AXSettings sharedInstance];
  v6 = [v5 voiceOverMediaDuckingMode];

  v7 = 1;
  if (!v3)
  {
    v7 = 2;
  }

  v8 = 2;
  if (!v3)
  {
    v8 = 0;
  }

  v9 = !v3;
  if (v6 != 2)
  {
    v9 = v6;
  }

  if (v6 != 1)
  {
    v8 = v9;
  }

  if (v6)
  {
    v10 = v8;
  }

  else
  {
    v10 = v7;
  }

  v11 = +[AXSettings sharedInstance];
  [v11 setVoiceOverMediaDuckingMode:v10];

  v16 = [VOTSharedWorkspace selectedLanguage];
  v12 = off_1001FDDD0;
  v13 = [(VOTElementManager *)self _audioDuckingModeString];
  v14 = sub_1000516CC(v12, v13, 0, v16);
  v15 = sub_1000095FC(v14, 0, v16);
}

- (void)_handleUsePitchChange:(BOOL)a3
{
  v3 = [VOTSharedWorkspace typingPitchChangeEnabled];
  v4 = +[AXSettings sharedInstance];
  [v4 setVoiceOverPitchChangeEnabled:v3 ^ 1];

  v5 = [VOTSharedWorkspace selectedLanguage];
  v9 = v5;
  if (v3)
  {
    v6 = @"pitchchange.off";
  }

  else
  {
    v6 = @"pitchchange.on";
  }

  v7 = sub_1000516CC(off_1001FDDD0, v6, 0, v5);
  v8 = sub_1000095FC(v7, 0, v9);
}

- (void)_handleSpeechRotorChange:(id)a3
{
  v4 = a3;
  v5 = [v4 command];
  v6 = [v5 isEqualToString:kVOTEventCommandSpeechRotorNext];

  v10 = 0;
  speechRotor = self->_speechRotor;
  v8 = [v4 origin];

  if (v6)
  {
    [(VOTRotor *)speechRotor increment:&v10 userInitiated:1 eventOrigin:v8];
  }

  else
  {
    [(VOTRotor *)speechRotor decrement:&v10 userInitiated:1 eventOrigin:v8];
  }

  [(VOTElementManager *)self _showVisualRotor:self->_speechRotor direction:v6];
  v9 = [(VOTRotor *)self->_speechRotor generateRotorTypeRequest];
  [(VOTElementManager *)self _appendCurrentRotorValue:v9 forRotor:self->_speechRotor];
  [v9 setGeneratesBraille:1];
  [v9 setBrailleType:1];
  [v9 send];
}

- (void)_handleSpeechRotorValueChange:(id)a3
{
  v7 = a3;
  v4 = [v7 command];
  v5 = [v4 isEqualToString:kVOTEventCommandSpeechRotorIncrementValue];

  v6 = [(VOTRotor *)self->_speechRotor currentRotorType];
  if (v6 <= 83)
  {
    if (v6 > 81)
    {
      if (v6 == 82)
      {
        [(VOTElementManager *)self _handleTypingEchoChange:v5];
      }

      else
      {
        [(VOTElementManager *)self _handleSpeechPhoneticsChange:v5];
      }
    }

    else if (v6 == 80)
    {
      if (v5)
      {
        [(VOTElementManager *)self _handleIncreaseVolume:v7];
      }

      else
      {
        [(VOTElementManager *)self _handleDecreaseVolume:v7];
      }
    }

    else if (v6 == 81)
    {
      [(VOTElementManager *)self _handleSpeechRateChange:v5];
    }
  }

  else if (v6 <= 85)
  {
    if (v6 == 84)
    {
      [(VOTElementManager *)self _handleUsePitchChange:v5];
    }

    else
    {
      [(VOTElementManager *)self _handleSpeechPunctuationChange:v5];
    }
  }

  else
  {
    switch(v6)
    {
      case 'V':
        [(VOTElementManager *)self _handleSoundRotorChange:v5];
        break;
      case 'W':
        if (AXRuntimeCheck_SupportsVoiceoverIndepedentVolume())
        {
          [(VOTElementManager *)self _handleAudioDuckingModeChange:v5];
        }

        else
        {
          [(VOTElementManager *)self _handleAudioDuckingChange:v5];
        }

        break;
      case 'Y':
        [(VOTElementManager *)self _handleAudioDestination:v5];
        break;
    }
  }
}

- (void)_handleAppSwitch:(id)a3
{
  v3 = [a3 command];
  v4 = [v3 isEqualToString:kVOTEventAppSwitchNext];

  v5 = +[VOTSpringBoardConnection defaultConnection];
  [v5 sendProgrammaticAppSwitch:v4];
}

- (id)_nearestElementWithMatch:(id)a3 startElement:(id)a4 forward:(BOOL)a5 itemCheckCount:(int64_t)a6
{
  v7 = a5;
  v9 = a3;
  v10 = a4;
  v11 = v10;
  if (v7)
  {
    v12 = 1;
  }

  else
  {
    v12 = 2;
  }

  [v10 elementsInDirection:v12 withCount:a6];
  v19 = 0u;
  v20 = 0u;
  v21 = 0u;
  v13 = v22 = 0u;
  v14 = [v13 countByEnumeratingWithState:&v19 objects:v23 count:16];
  if (v14)
  {
    v15 = *v20;
    while (2)
    {
      for (i = 0; i != v14; i = i + 1)
      {
        if (*v20 != v15)
        {
          objc_enumerationMutation(v13);
        }

        v17 = *(*(&v19 + 1) + 8 * i);
        if (v9[2](v9, v17, v11))
        {
          v14 = v17;
          goto LABEL_14;
        }
      }

      v14 = [v13 countByEnumeratingWithState:&v19 objects:v23 count:16];
      if (v14)
      {
        continue;
      }

      break;
    }
  }

LABEL_14:

  return v14;
}

- (id)_nearestElementWithMatch:(id)a3 startElement:(id)a4
{
  v6 = a3;
  v7 = a4;
  if (v6[2](v6, v7, v7))
  {
    v8 = v7;
  }

  else
  {
    v9 = [(VOTElementManager *)self _nearestElementWithMatch:v6 startElement:v7 forward:1];
    v10 = v9;
    if (v9)
    {
      v8 = v9;
    }

    else
    {
      v11 = [(VOTElementManager *)self _nearestElementWithMatch:v6 startElement:v7 forward:0];
      v8 = v11;
      if (v11)
      {
        v12 = v11;
      }
    }
  }

  return v8;
}

- (void)_handleScrollToTop:(id)a3
{
  if (![(VOTElement *)self->_currentElement scrollToTop])
  {
    v4 = +[VOTOutputManager outputManager];
    v3 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v3];
  }
}

- (void)_handleScrollToBottom:(id)a3
{
  if (![(VOTElement *)self->_currentElement scrollToBottom])
  {
    v4 = +[VOTOutputManager outputManager];
    v3 = +[VOSOutputEvent BoundaryEncountered];
    [v4 sendEvent:v3];
  }
}

- (void)_handleScrollByPage:(id)a3
{
  v33 = a3;
  self->_lastScreenChangeNotificationTime = -3061152000.0;
  v4 = [(VOTElementManager *)self _currentElement];
  self->_flags.userInitiatedBooksScroll = 1;
  if (([v4 isValid] & 1) == 0)
  {
    [v4 centerPoint];
    if (v4)
    {
      v7 = v5;
    }

    else
    {
      v7 = 0.0;
    }

    if (v4)
    {
      v8 = v6;
    }

    else
    {
      v8 = 40.0;
    }

    y = CGPointZero.y;
    if (CGPointZero.x == v7 && y == v8)
    {
      [v4 frame];
      AX_CGRectGetCenter();
      v7 = v11;
      v8 = v12;
    }

    v13 = [objc_allocWithZone(VOTElement) initWithPosition:{v7, v8}];

    if (v13)
    {
      v4 = v13;
    }

    else
    {
      v4 = [(VOTElementManager *)self _sonarElementFromPoint:1 inForwardDirection:20 limit:v7, v8];
      if (!v4)
      {
        goto LABEL_18;
      }
    }

    [(VOTElementManager *)self _setCurrentElement:v4];
    v14 = +[VOTDisplayManager displayManager];
    [v14 setCursorFrameForElement:v4];
  }

LABEL_18:
  if (([v4 doesHaveTraits:kAXScrollableTrait] & 1) == 0)
  {
    v15 = [(VOTElementManager *)self _nearestScrollableElement:v4];

    v4 = v15;
  }

  *&self->_flags.isReadingAll = 0;
  v16 = [v33 command];
  if ([v16 isEqualToString:kVOTEventCommandScrollUpPage])
  {
    v17 = [(VOTElementManager *)self _currentElement];
    v18 = [v17 doesHaveTraits:kAXStatusBarElementTrait];

    if (v18)
    {
      v19 = +[VOTElement systemAppApplication];
      [v19 showBulletinBoard:1];
LABEL_26:

      goto LABEL_47;
    }

    [v4 scrollUpPage];
    goto LABEL_47;
  }

  if (![v16 isEqualToString:kVOTEventCommandScrollDownPage])
  {
    if (([v16 isEqualToString:kVOTEventCommandScrollRightPage] & 1) == 0 && !objc_msgSend(v16, "isEqualToString:", kVOTEventCommandScrollLeftPage))
    {
      goto LABEL_47;
    }

    v22 = [v16 isEqualToString:kVOTEventCommandScrollRightPage];
    if (![v4 isReadingContent])
    {
      v25 = 1;
      if (!v22)
      {
        v25 = 2;
      }

      self->_bookLastContentMovementDirection = v25;
      v26 = [v33 objectForIndex:119];
      self->_flags.lastScrollWasFromBraillePanning = [v26 BOOLValue];

      goto LABEL_44;
    }

    v23 = v4;
    if ([v23 isRTL])
    {
      if (!v22)
      {
LABEL_33:
        v24 = [v23 scrollNextPage];
        goto LABEL_40;
      }
    }

    else if (v22)
    {
      goto LABEL_33;
    }

    v24 = [v23 scrollPreviousPage];
LABEL_40:
    v27 = v24;
    self->_bookLastContentMovementUnit = 4;
    self->_flags.previousScrollWasBookContentMovement = 1;

    if (v22)
    {
      v28 = 1;
    }

    else
    {
      v28 = 2;
    }

    self->_bookLastContentMovementDirection = v28;
    v29 = [v33 objectForIndex:119];
    self->_flags.lastScrollWasFromBraillePanning = [v29 BOOLValue];

    if (v27)
    {
      goto LABEL_47;
    }

LABEL_44:
    if (v22)
    {
      [v4 scrollRightPage];
    }

    else
    {
      [v4 scrollLeftPage];
    }

    goto LABEL_47;
  }

  v20 = [(VOTElementManager *)self _currentElement];
  v21 = [v20 doesHaveTraits:kAXStatusBarElementTrait];

  if (v21)
  {
    v19 = +[VOTElement systemAppApplication];
    [v19 showControlCenter:1];
    goto LABEL_26;
  }

  [v4 scrollDownPage];
LABEL_47:
  if ([v4 doesHaveTraits:kAXAdjustableTrait])
  {
    v30 = [v4 value];
    [(VOTElementManager *)self _valueWait:v4 oldValue:v30 waitTime:0 borderHitIfNoChange:0.3];
    v31 = [v4 value];
    if (([v30 isEqualToString:v31] & 1) == 0)
    {
      v32 = [objc_allocWithZone(VOTOutputRequest) init];
      [(VOTElementManager *)self _addDescription:v4 toRequest:v32 withOptions:8];
      [(VOTElementManager *)self sendRequest:v32];
    }
  }
}

- (void)_handleScrollDownPage:(id)a3
{
  v6 = [(VOTElementManager *)self _currentElement];
  if ([v6 doesHaveTraits:kAXScrollableTrait])
  {
    v4 = v6;
  }

  else
  {
    v5 = [(VOTElementManager *)self _nearestScrollableElement:v6];

    v4 = v5;
  }

  v7 = v4;
  [v4 scrollDownPage];
}

- (void)_handleScrollToPoint:(id)a3
{
  v4 = [a3 objectForIndex:101];
  [v4 pointValue];
  v6 = v5;
  v8 = v7;

  v11 = [(VOTElementManager *)self _currentElement];
  if ([v11 doesHaveTraits:kAXScrollableTrait])
  {
    v9 = v11;
  }

  else
  {
    v10 = [(VOTElementManager *)self _nearestScrollableElement:v11];

    v9 = v10;
  }

  v12 = v9;
  [v9 scrollToPoint:{v6, v8}];
}

- (void)_handleSelectedTextOutput:(id)a3
{
  v10 = a3;
  v4 = self->_firstResponderElement;
  v5 = v4;
  if (v4 && [(VOTElement *)v4 selectedTextRange]!= 0x7FFFFFFF)
  {
    v6 = +[VOTOutputRequest createRequest];
    v8 = [(VOTElement *)v5 language];
    [(VOTElement *)v5 applySelectedText:v6 language:v8];

    v9 = [(VOTElement *)v5 language];
    [(VOTElement *)v5 applyTextEditingInformation:v9 request:v6 options:0];

    [v6 setBrailleType:2];
    [v6 setGeneratesBraille:1];
    [v6 send];
  }

  else
  {
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent BoundaryEncountered];
    [v6 sendEvent:v7];
  }
}

- (void)_handleOutputFocusedElementSummary:(id)a3
{
  v4 = [a3 command];
  v5 = [v4 isEqualToString:kVOTEventCommandOutputDetailedFocusedElementSummary];

  v9 = self->_firstResponderElement;
  if (v9)
  {
    if (v5)
    {
      v6 = 0x1000000;
    }

    else
    {
      v6 = 553648128;
    }

    v7 = +[VOTOutputRequest createRequest];
    [(VOTElement *)v9 addTextualInformationToRequest:v7 options:v6 dataPackage:0];
    [v7 send];
  }

  else
  {
    v7 = +[VOTOutputManager outputManager];
    v8 = +[VOSOutputEvent BoundaryEncountered];
    [v7 sendEvent:v8];
  }
}

- (void)visionEngine:(id)a3 updatedResult:(id)a4 forElement:(id)a5 event:(int64_t)a6 visionOptions:(id)a7
{
  elementManagerThread = self->_elementManagerThread;
  v13 = a7;
  v14 = a5;
  v15 = a4;
  v16 = a3;
  v17 = [NSNumber numberWithInteger:a6];
  [(SCRCThread *)elementManagerThread performSelector:"_visionEngine:updatedResult:forElement:event:visionOptions:" onTarget:self count:5 objects:v16, v15, v14, v17, v13, 0];
}

- (void)_visionEngine:(id)a3 updatedResult:(id)a4 forElement:(id)a5 event:(id)a6 visionOptions:(id)a7
{
  v11 = a4;
  v12 = a5;
  v13 = a7;
  v14 = [a6 integerValue];
  v15 = VOTLogCommon();
  if (os_log_type_enabled(v15, OS_LOG_TYPE_INFO))
  {
    v25 = 134218498;
    v26 = v14;
    v27 = 2112;
    v28 = v12;
    v29 = 2112;
    v30 = v11;
    _os_log_impl(&_mh_execute_header, v15, OS_LOG_TYPE_INFO, "Element manager received async update event from vision engine. event: %ld. updateElement: %@. result: %@", &v25, 0x20u);
  }

  if ([v12 isEqual:self->_currentElement])
  {
    v16 = +[VOTWorkspace sharedWorkspace];
    v17 = [v16 visionEngine];
    v18 = [v17 resultsForElement:v12];

    v19 = [(VOTElementManager *)self previouslySpokenImageCaptionResults];
    LOBYTE(v17) = [v18 isEqual:v19];

    v20 = VOTLogCommon();
    v21 = os_log_type_enabled(v20, OS_LOG_TYPE_INFO);
    if (v17)
    {
      if (v21)
      {
        currentElement = self->_currentElement;
        v25 = 138412290;
        v26 = currentElement;
        _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "Already announced vision update for this element. Will not announce again: %@", &v25, 0xCu);
      }
    }

    else
    {
      if (v21)
      {
        v24 = self->_currentElement;
        v25 = 138412290;
        v26 = v24;
        _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "Have not yet announced vision update for this element. Will announce now: %@", &v25, 0xCu);
      }

      [(VOTElementManager *)self setPreviouslySpokenImageCaptionResults:v18];
      -[VOTElementManager _handleOutputComputerVisionAnalysisSummary:explicitUserRequest:](self, "_handleOutputComputerVisionAnalysisSummary:explicitUserRequest:", 0, [v13 userCommandInitiated]);
    }
  }

  else
  {
    v18 = VOTLogCommon();
    if (os_log_type_enabled(v18, OS_LOG_TYPE_INFO))
    {
      v23 = self->_currentElement;
      v25 = 138412290;
      v26 = v23;
      _os_log_impl(&_mh_execute_header, v18, OS_LOG_TYPE_INFO, "Vision update element and current element differnet. Will not announce vision update. Current element: %@", &v25, 0xCu);
    }
  }
}

- (void)_handleOutputComputerVisionAnalysisSummary:(id)a3 explicitUserRequest:(BOOL)a4
{
  v4 = a4;
  v15 = [(VOTElementManager *)self _currentElement];
  v6 = +[VOTOutputRequest createRequest];
  [v15 applyCVMLGeneratedContentToRequest:v6 explicitUserRequest:v4];
  if ([v6 containsActions])
  {
    [v6 setIsComputerVisionAsynchrousRequest:v4 ^ 1];
    [v6 setDoesNotInterrupt:v4 ^ 1];
    [v6 setGeneratesBraille:0];
    [(VOTElementManager *)self sendRequest:v6];
    v7 = +[VOTBrailleManager manager];
    v8 = [v7 brailleElement];
    v9 = [v8 isEqual:v15];

    if (!v9)
    {
      goto LABEL_7;
    }

    v10 = [v6 supplementalBrailleDescription];
    v11 = +[VOTBrailleManager manager];
    v12 = [v11 brailleElement];
    [v12 setSupplementalBrailleDescription:v10];

    v13 = +[VOTBrailleManager manager];
    [v13 refreshBrailleLine];
  }

  else
  {
    if (!v4)
    {
      goto LABEL_7;
    }

    v13 = +[VOTOutputManager outputManager];
    v14 = +[VOSOutputEvent NoResultsFound];
    [v13 sendEvent:v14];
  }

LABEL_7:
}

- (id)_imageExplorerCachedResults
{
  v3 = +[VOTWorkspace sharedWorkspace];
  v4 = [v3 visionEngine];

  v5 = [(VOTElementManager *)self _currentElement];
  v6 = [v4 resultsForElement:v5];

  return v6;
}

- (BOOL)isValidElementForImageExploration
{
  v3 = [(VOTElementManager *)self currentElement];
  v4 = [v3 imageAssetLocalIdentifier];

  if (v4)
  {
    LOBYTE(v5) = 1;
  }

  else
  {
    v12 = 0u;
    v13 = 0u;
    v10 = 0u;
    v11 = 0u;
    v6 = [(VOTElementManager *)self _imageExplorerCachedResults];
    v5 = [v6 countByEnumeratingWithState:&v10 objects:v14 count:16];
    if (v5)
    {
      v7 = *v11;
      while (2)
      {
        for (i = 0; i != v5; i = i + 1)
        {
          if (*v11 != v7)
          {
            objc_enumerationMutation(v6);
          }

          if ([*(*(&v10 + 1) + 8 * i) includesFeaturesForImageExploration])
          {
            LOBYTE(v5) = 1;
            goto LABEL_13;
          }
        }

        v5 = [v6 countByEnumeratingWithState:&v10 objects:v14 count:16];
        if (v5)
        {
          continue;
        }

        break;
      }
    }

LABEL_13:
  }

  return v5;
}

- (void)handleLaunchVoiceOverImageExplorer
{
  v3 = +[AXSettings sharedInstance];
  v4 = [v3 securePayAssertionActive];

  if (v4)
  {
    v5 = AXLogAssertions();
    if (os_log_type_enabled(v5, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_DEFAULT, "Not processing image explorer because secure pay mode active", buf, 2u);
    }
  }

  else
  {
    v6 = VOTLogImageExplorer();
    if (os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BB98();
    }

    v26 = 0u;
    v27 = 0u;
    v24 = 0u;
    v25 = 0u;
    v5 = [(VOTElementManager *)self _imageExplorerCachedResults];
    v7 = [v5 countByEnumeratingWithState:&v24 objects:v34 count:16];
    if (v7)
    {
      v8 = v7;
      v9 = *v25;
      do
      {
        v10 = 0;
        do
        {
          if (*v25 != v9)
          {
            objc_enumerationMutation(v5);
          }

          v11 = *(*(&v24 + 1) + 8 * v10);
          v12 = VOTLogImageExplorer();
          if (os_log_type_enabled(v12, OS_LOG_TYPE_DEBUG))
          {
            v19 = objc_opt_class();
            v20 = NSStringFromClass(v19);
            v21 = [v11 includesFeaturesForImageExploration];
            *buf = 138412802;
            v22 = @"NO";
            if (v21)
            {
              v22 = @"YES";
            }

            v29 = v20;
            v30 = 2112;
            v31 = v22;
            v32 = 2112;
            v33 = v11;
            _os_log_debug_impl(&_mh_execute_header, v12, OS_LOG_TYPE_DEBUG, "%@ - Image Explorer result includes features for exploration: %@, engineResult : %@", buf, 0x20u);
          }

          if ([v11 includesFeaturesForImageExploration])
          {
            v13 = [[AXSBImageExplorerData alloc] init];
            v14 = [(VOTElement *)self->_currentElement application];
            v15 = [v14 bundleIdentifier];
            [v13 setHostAppBundleID:v15];

            v16 = [(VOTElement *)self->_currentElement label];
            [v13 setAxLabel:v16];

            v17 = [(VOTElement *)self->_currentElement customContent];
            [v13 setCustomContent:v17];

            v18 = +[AXSpringBoardServer server];
            [v18 launchVoiceOverImageExplorerViewServiceForResult:v11 withData:v13];
          }

          v10 = v10 + 1;
        }

        while (v8 != v10);
        v23 = [v5 countByEnumeratingWithState:&v24 objects:v34 count:16];
        v8 = v23;
      }

      while (v23);
    }
  }
}

- (void)_handleOutputElementSummary:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self _currentElement];
  v6 = +[VOTOutputRequest createRequest];
  v7 = [v4 isKeyEvent];

  if (v7)
  {
    [v5 addTextualInformationToRequest:v6 options:1 dataPackage:0];
  }

  v8 = [v5 touchContainer];
  [v8 addTextualInformationToRequest:v6 options:16793600 dataPackage:0];

  if ([v5 doesHaveTraits:kAXWebContentTrait])
  {
    v9 = [v5 textMarkerRangeForSelection];
    v10 = [v5 stringForTextMarkers:v9];
    v11 = [v10 length];
    if (v11)
    {
      v12 = sub_1000511CC(off_1001FDDD0, @"scrollstatus.selected.text", @"Selected Text");
      v13 = [NSString stringWithFormat:v12, v10];
      v14 = [v6 addString:v13];
    }

    v15 = [v5 shouldAnnounceTableInfo];
    if (v11)
    {
      v16 = 0;
LABEL_51:
      v55[0] = _NSConcreteStackBlock;
      v55[1] = 3221225472;
      v55[2] = sub_10008E208;
      v55[3] = &unk_1001C9DB0;
      v49 = v5;
      v56 = v49;
      v57 = self;
      v50 = v6;
      v58 = v50;
      v59 = v15;
      v51 = objc_retainBlock(v55);
      if (v16 && [v49 shouldIncludeRegionDescription])
      {
        v52[0] = _NSConcreteStackBlock;
        v52[1] = 3221225472;
        v52[2] = sub_10008E374;
        v52[3] = &unk_1001C9DD8;
        v53 = v50;
        v54 = v51;
        [(VOTElementManager *)self regionDescriptionForElement:v49 withCompletion:v52];
      }

      else
      {
        (v51[2])(v51);
      }

      v26 = v56;
      goto LABEL_56;
    }
  }

  else
  {
    v15 = [v5 shouldAnnounceTableInfo];
  }

  v17 = [v5 selectedTextRange];
  if (v17 == 0x7FFFFFFF)
  {
    v19 = 1;
  }

  else
  {
    v19 = v7;
  }

  if ((v19 & 1) == 0)
  {
    v20 = v17;
    v21 = v18;
    if (([v5 doesHaveTraits:kAXIsEditingTrait] & 1) != 0 || v21)
    {
      if (v21)
      {
        v27 = [v5 attributedValueForRange:{v20, v21}];
        if ([v27 length])
        {
          v28 = sub_1000511CC(off_1001FDDD0, @"scrollstatus.selected.text", @"Selected Text");
          v29 = [NSString stringWithFormat:v28, v27];
          v30 = [v6 addString:v29];
        }
      }

      else
      {
        v27 = [v5 attributedValueForRange:{v20, 1}];
      }

      [VOTSharedWorkspace addMisspellingsForString:v27];
      v31 = [v27 coalescedFontAttributes];

      v41 = [(VOTElementManager *)self _computeChangedFontAttributes:v31 storedAttributes:0 haveMisspellCheck:1];
      if ([v41 length])
      {
        v42 = [v6 addAttributedString:v41];
      }

      v43 = [v5 language];
      [v5 applyTextEditingInformation:v43 request:v6 options:0];

      v16 = 0;
      goto LABEL_49;
    }
  }

  if (!AXDeviceSupportsMapsDescriptions())
  {
    goto LABEL_25;
  }

  v22 = [(NSArray *)self->_currentApplications firstObject];
  if (([v22 isMaps] & 1) == 0)
  {

    goto LABEL_25;
  }

  v23 = [v5 isMapPOIItem];

  if (!v23)
  {
LABEL_25:
    v31 = [v5 label];
    if ([v31 isAXAttributedString])
    {
      v32 = [v31 coalescedFontAttributes];
      v33 = [(VOTElementManager *)self _computeChangedFontAttributes:v32 storedAttributes:0 haveMisspellCheck:1];
      if ([v33 length])
      {
        v34 = [v6 addAttributedString:v33];
      }
    }

    else if ([v31 length])
    {
      v35 = [v6 addString:v31];
    }

    if ([v5 doesHaveTraits:kAXMathEquationTrait])
    {
      v36 = [v5 mathSummary];
      if ([v36 length])
      {
        v37 = [v6 addString:v36];
      }
    }

    if ([v5 isAccessibleGroup])
    {
      [v5 applyGroupChildrenCountToRequest:v6];
    }

    if (([v5 doesHaveTraits:kAXScrollableTrait] & 1) != 0 || objc_msgSend(v5, "doesHaveTraits:", kAXLaunchIconTrait))
    {
      v38 = [v5 scrollStatus];
      if ([v38 length])
      {
        v39 = [v6 addString:v38];
      }
    }

    if ((v15 & 1) == 0)
    {
      v40 = [VOTSharedWorkspace selectedLanguage];
      sub_100051EEC(v5, v6, v40, 1, 1, 0);
    }

    [v5 applyCVMLGeneratedContentToRequest:v6 explicitUserRequest:0];
    v16 = 1;
LABEL_49:

    v44 = [v5 uiElement];
    v45 = [v44 numberWithAXAttribute:2123];
    v46 = [v45 unsignedIntValue];

    if (v46 >= 2)
    {
      v47 = sub_1000511CC(off_1001FDDD0, @"extended.display", 0);
      v48 = [v6 addString:v47];
    }

    goto LABEL_51;
  }

  v24 = AXLogVoiceOverMapsAI();
  if (os_log_type_enabled(v24, OS_LOG_TYPE_INFO))
  {
    *buf = 0;
    _os_log_impl(&_mh_execute_header, v24, OS_LOG_TYPE_INFO, "Smart Maps Descriptions", buf, 2u);
  }

  v25 = [(NSArray *)self->_currentApplications firstObject];
  v26 = [v25 elementsForAttribute:3015];

  v60[0] = _NSConcreteStackBlock;
  v60[1] = 3221225472;
  v60[2] = sub_10008E108;
  v60[3] = &unk_1001C9D88;
  v61 = v6;
  v62 = self;
  [_TtC3vot13VOMapsAdapter describeMapsWithElements:v26 focusedElement:v5 completionHandler:v60];

LABEL_56:
}

- (void)regionDescriptionForElement:(id)a3 withCompletion:(id)a4
{
  v6[0] = _NSConcreteStackBlock;
  v6[1] = 3221225472;
  v6[2] = sub_10008E478;
  v6[3] = &unk_1001C9E00;
  v7 = a4;
  v5 = v7;
  [a3 regionDescriptionWithCompletion:v6];
}

- (BOOL)elementEligibleToFindTitleElement:(id)a3
{
  v3 = a3;
  if ([v3 doesHaveTraits:kAXWebContentTrait])
  {
    if ([v3 doesHaveTraits:kAXTextEntryTrait] & 1) != 0 || (objc_msgSend(v3, "doesHaveTraits:", kAXPopupButtonTrait))
    {
      v4 = 1;
    }

    else
    {
      v4 = [v3 doesHaveTraits:kAXToggleTrait];
    }
  }

  else
  {
    v4 = 0;
  }

  return v4;
}

- (BOOL)shouldElement:(id)a3 beCombined:(id)a4 combineLinks:(BOOL)a5
{
  v8 = a3;
  v9 = a4;
  if (!-[VOTElementManager elementEligibleToFindTitleElement:](self, "elementEligibleToFindTitleElement:", v8) || ![v9 doesHaveTraits:kAXStaticTextTrait] || !objc_msgSend(v9, "doesHaveTraits:", kAXWebContentTrait) || !a5 && (objc_msgSend(v9, "doesHaveTraits:", kAXLinkTrait) & 1) != 0)
  {
    goto LABEL_8;
  }

  v10 = [v8 label];
  if (![v10 length])
  {

    goto LABEL_11;
  }

  v11 = [v8 label];
  v12 = [v9 label];
  v13 = [v11 isEqualToString:v12];

  if (v13)
  {
LABEL_11:
    v14 = [v8 elementOnSameLine:v9];
    goto LABEL_9;
  }

LABEL_8:
  v14 = 0;
LABEL_9:

  return v14;
}

- (void)updateTitleElementLabels:(id)a3
{
  v4 = a3;
  v5 = [v4 titleElements];
  v22 = [v4 application];
  if ([v5 count])
  {
    v26 = 0u;
    v27 = 0u;
    v24 = 0u;
    v25 = 0u;
    v21 = v5;
    obj = v5;
    v6 = [obj countByEnumeratingWithState:&v24 objects:v28 count:16];
    if (v6)
    {
      v7 = v6;
      v8 = *v25;
      v9 = kAXLinkTrait;
      v10 = kAXButtonTrait;
      v11 = &stru_1001CBF90;
      do
      {
        for (i = 0; i != v7; i = i + 1)
        {
          if (*v25 != v8)
          {
            objc_enumerationMutation(obj);
          }

          v13 = *(*(&v24 + 1) + 8 * i);
          if (([v13 isEqual:v4] & 1) == 0)
          {
            v14 = [v13 label];
            v15 = [v14 length];

            if (v15)
            {
              v16 = [v13 label];
              v17 = [NSString stringWithFormat:@"%@ %@", v11, v16];

              v11 = v17;
            }

            if (([v13 doesHaveTraits:v10 | v9] & 1) == 0)
            {
              [v22 addTitleElementToCache:v13];
            }
          }
        }

        v7 = [obj countByEnumeratingWithState:&v24 objects:v28 count:16];
      }

      while (v7);
    }

    else
    {
      v11 = &stru_1001CBF90;
    }

    if ([(__CFString *)v11 length])
    {
      [v4 setDefinedLabel:v11];
    }

    v5 = v21;
  }

  else if ([(VOTElementManager *)self elementEligibleToFindTitleElement:v4])
  {
    if ([v4 doesHaveTraits:kAXToggleTrait])
    {
      v18 = [v4 nextElement];
      if (([v4 elementOnSameLine:v18] & 1) == 0)
      {
        v19 = [v4 previousElement];

        v18 = v19;
      }
    }

    else
    {
      v18 = [v4 previousElement];
    }

    if (([v22 elementActsAsTitleElement:v18] & 1) == 0 && -[VOTElementManager shouldElement:beCombined:combineLinks:](self, "shouldElement:beCombined:combineLinks:", v4, v18, 0))
    {
      v20 = [v18 label];
      [v4 setDefinedLabel:v20];
    }
  }
}

- (void)_addDescription:(id)a3 toRequest:(id)a4 withOptions:(unint64_t)a5
{
  v8 = a4;
  v9 = a3;
  v10 = [(VOTElementManager *)self previousContextDescriptors];
  [(VOTElementManager *)self _addDescription:v9 toRequest:v8 withOptions:a5 lastSeenContextDescriptors:v10];
}

- (void)_addDescription:(id)a3 toRequest:(id)a4 withOptions:(unint64_t)a5 lastSeenContextDescriptors:(id)a6
{
  v10 = a3;
  v11 = a6;
  v12 = a4;
  v13 = objc_opt_new();
  v14 = [v10 isEqual:self->_currentElement];
  v15 = 64;
  if (v14)
  {
    v15 = 72;
  }

  [v13 setPreviousElement:*(&self->super.isa + v15)];
  [v13 setLastSeenContextDescriptors:v11];

  [(VOTElementManager *)self updateTitleElementLabels:v10];
  if ([v10 containedIn:2])
  {
    v16 = [v10 rowRange];
  }

  else
  {
    v16 = 0x7FFFFFFFLL;
  }

  self->_lastTableRow = v16;
  if (self->_flags.performedFlickNavigation && ![VOTSharedWorkspace hintsEnabled])
  {
    a5 |= 0x2000uLL;
  }

  [v13 setLastSeenLineAndColumn:self->_lastSeenLineAndColumn];
  v17 = [v10 cachedCustomRotorActions];
  v24[0] = _NSConcreteStackBlock;
  v24[1] = 3221225472;
  v24[2] = sub_10008EBFC;
  v24[3] = &unk_1001C9E28;
  v24[4] = self;
  v18 = [v17 axFilterObjectsUsingBlock:v24];
  v19 = [v18 firstObject];
  [v13 setCustomAction:v19];

  if ([v10 includeRoleDescription])
  {
    a5 |= 0x1000000uLL;
  }

  if ((a5 & 0x40) != 0 && [v10 doesHaveTraits:kAXTextAreaTrait])
  {
    v20 = [(VOTElementManager *)self initialReadAllElement];
    v21 = [v20 isEqual:v10];
    v22 = 0x80000;
    if (!v21)
    {
      v22 = 0;
    }

    a5 |= v22;
  }

  [v10 addTextualInformationToRequest:v12 options:a5 dataPackage:v13];
  v23 = [v12 imageCaptionResults];

  if ([v23 count])
  {
    [(VOTElementManager *)self setPreviouslySpokenImageCaptionResults:v23];
  }
}

- (void)_endNativeSliding:(BOOL)a3
{
  v4 = &kCFBooleanFalse;
  if (a3)
  {
    v4 = &kCFBooleanTrue;
  }

  v6 = [NSDictionary dictionaryWithObject:*v4 forKey:@"disabledOnTap"];
  v5 = +[NSNotificationCenter defaultCenter];
  [v5 postNotificationName:off_1001FDF10 object:0 userInfo:v6];

  self->_flags.wasSendingToNativeSlide = 0;
}

- (id)_elementToFocusWhenSwitchingToElementCommunity:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self _sideAppDividerElement];
  v6 = [(VOTElementManager *)self _dockElementForDisplay];
  if (v5 == v4)
  {
    v8 = v5;
  }

  else
  {
    v7 = [v4 hash];
    if (v7 == [v6 hash])
    {
      v8 = v6;
    }

    else
    {
      v8 = [(VOTElementManager *)self _retrieveCachedFocusedElementForElementCommunity:v4];
    }
  }

  v9 = v8;
  if (!v8)
  {
    v10 = [v4 firstResponderElementForFocus];
    if (!v10)
    {
      v10 = [v4 firstElementInApplicationForFocus];
      if (!v10)
      {
        v10 = [v4 firstElementInApplication];
      }
    }

    v9 = v10;
  }

  v11 = v9;

  return v9;
}

- (id)_additionalElementCommunities
{
  v3 = [(VOTElementManager *)self cachedAdditionalElementCommunities];

  if (!v3)
  {
    v4 = +[NSMutableArray array];
    v5 = +[VOTElement systemWideElement];
    v6 = [v5 elementForAttribute:1005];

    if (v6)
    {
      v7 = [v6 uiElement];
      [v7 updateCache:14000];

      v8 = [v6 elementsForAttribute:14000];
      [v4 addObjectsFromArray:v8];
    }

    v9 = +[VOTElement systemWideElement];
    v10 = [v9 elementForAttribute:1006];

    if (v10)
    {
      [v4 addObject:v10];
    }

    v11 = +[VOTElement systemWideElement];
    v12 = [v11 elementForAttribute:1010];

    if (v12)
    {
      [v4 addObject:v12];
    }

    v13 = +[VOTElement systemAppApplication];
    v14 = [v13 elementForAttribute:1513];

    if (v14)
    {
      [v4 addObject:v14];
    }

    [(VOTElementManager *)self setCachedAdditionalElementCommunities:v4];
  }

  return [(VOTElementManager *)self cachedAdditionalElementCommunities];
}

- (id)_dockElementForDisplay
{
  v2 = [(VOTElement *)self->_currentElement uiElement];
  v3 = [v2 numberWithAXAttribute:2123];
  v4 = +[NSNumber numberWithUnsignedInt:](NSNumber, "numberWithUnsignedInt:", [v3 unsignedIntValue]);

  v5 = +[VOTElement systemAppApplication];
  v6 = [v5 elementForParameterizedAttribute:91513 parameter:v4];

  return v6;
}

- (id)_allElementCommunitiesWithFocusedApplications:(id)a3
{
  v4 = a3;
  v5 = +[NSMutableArray array];
  [v5 addObjectsFromArray:v4];

  v6 = [(VOTElementManager *)self _sideAppDividerElement];
  if (v6)
  {
    if (![v5 count])
    {
      _AXAssert();
    }

    if ([v5 count])
    {
      [v5 insertObject:v6 atIndex:{objc_msgSend(v5, "count") - 1}];
    }
  }

  v7 = [(VOTElementManager *)self _dockElementForDisplay];
  if (v7)
  {
    [v5 addObject:v7];
  }

  v8 = [(VOTElementManager *)self _additionalElementCommunities];
  [v5 addObjectsFromArray:v8];

  return v5;
}

- (id)_getNextFocusedElementInElementCommunityPrevious:(BOOL)a3 shouldUseCache:(BOOL)a4 shouldWrapAround:(BOOL)a5
{
  v5 = a5;
  v6 = a4;
  v9 = [(VOTElementManager *)self _allElementCommunitiesWithFocusedApplications:self->_currentApplications];
  if (self->_currentElement)
  {
    v10 = [(VOTElementManager *)self _elementCommunityForElement:?];
    v11 = [v9 indexOfObject:v10];
    if (v11 == 0x7FFFFFFFFFFFFFFFLL || (v12 = v11, [v9 count] < 2))
    {
      _AXLogWithFacility();
      v13 = 0;
    }

    else
    {
      if (a3)
      {
        v13 = 0;
        v14 = v12 - 1;
        while (1)
        {
          if ((v14 & 0x8000000000000000) != 0)
          {
            if (!v5)
            {
              goto LABEL_17;
            }

            v14 = [v9 count] - 1;
          }

          v15 = [v9 objectAtIndexedSubscript:v14];
          v16 = v15;
          if (v6)
          {
            [(VOTElementManager *)self _elementToFocusWhenSwitchingToElementCommunity:v15];
          }

          else
          {
            [v15 lastElementInApplication];
          }
          v17 = ;

          if (v17)
          {
            if (![v17 isRemoteElement])
            {
              break;
            }
          }

          --v14;
          v13 = v17;
          if (v14 == v12)
          {
            goto LABEL_35;
          }
        }

LABEL_36:
        v13 = v17;
        goto LABEL_18;
      }

      v13 = 0;
      v19 = v12 + 1;
      while (1)
      {
        v20 = [v9 count];
        v21 = v19 == v20 ? 0 : v19;
        if (v19 == v20 && !v5)
        {
          break;
        }

        v22 = [v9 objectAtIndexedSubscript:v21];
        v16 = v22;
        if (v6)
        {
          [(VOTElementManager *)self _elementToFocusWhenSwitchingToElementCommunity:v22];
        }

        else
        {
          [v22 firstElementInApplication];
        }
        v17 = ;

        if (v17 && ![v17 isRemoteElement])
        {
          goto LABEL_36;
        }

        v19 = v21 + 1;
        v13 = v17;
        if (v21 + 1 == v12)
        {
LABEL_35:
          v16 = 0;
          goto LABEL_36;
        }
      }
    }

LABEL_17:
    v16 = 0;
LABEL_18:

    goto LABEL_20;
  }

  v13 = 0;
  v16 = 0;
LABEL_20:

  return v13;
}

- (void)_handleSwitchToElementCommunityPrevious:(BOOL)a3 event:(id)a4
{
  v4 = a3;
  v6 = a4;
  v7 = [(VOTElementManager *)self _getNextFocusedElementInElementCommunityPrevious:v4 shouldUseCache:1 shouldWrapAround:1];
  if (v7)
  {
    [(VOTElementManager *)self _echoDifferentElement:v7 forEvent:v6];
    if (v4)
    {
      v8 = 2;
    }

    else
    {
      v8 = 1;
    }

    v11[0] = _NSConcreteStackBlock;
    v11[1] = 3221225472;
    v11[2] = sub_10008F498;
    v11[3] = &unk_1001C7778;
    v11[4] = self;
    v12 = v7;
    [v12 scrollToElementForDirectional:v8 withCompletion:v11];
  }

  else
  {
    v9 = +[VOTOutputManager outputManager];
    v10 = +[VOSOutputEvent BoundaryEncountered];
    [v9 sendEvent:v10];
  }
}

- (void)_handleEdgeSwipeTop:(id)a3
{
  v3 = +[VOTElement springBoardApplication];
  [v3 showBulletinBoard:1];
}

- (void)_handleEdgeSwipeBottom:(id)a3
{
  v3 = +[VOTElement springBoardApplication];
  [v3 showControlCenter:1];
}

- (void)_handleBottomEdgePanDown:(id)a3
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    IsPhone = AXDeviceIsPhone();
    v4 = +[AXSpringBoardServer server];
    v5 = v4;
    if (IsPhone)
    {
      [v4 toggleReachability];
    }

    else
    {
      [v4 toggleDock];
    }
  }
}

- (void)_handleBottomEdgePanShort:(id)a3
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[AXSettings sharedInstance];
    v4 = [v3 liveRecognitionOverlayOpen];

    if (v4)
    {
      v8 = +[VOTMagnifierService shared];
      [v8 hideDetectionUI];
    }

    else
    {
      v5 = +[AXSpringBoardServer server];
      v6 = [v5 dismissBuddyIfNecessary];

      if ((v6 & 1) == 0)
      {
        v7 = VOTSharedWorkspace;

        [v7 performHomeButtonPress];
      }
    }
  }
}

- (void)_handleBottomEdgePanLong:(id)a3
{
  if ([VOTSharedWorkspace supportsHomeGestures] && !-[VOTElementManager isContinuitySessionActive](self, "isContinuitySessionActive"))
  {
    v4 = VOTLogCommon();
    if (os_log_type_enabled(v4, OS_LOG_TYPE_DEFAULT))
    {
      *v6 = 0;
      _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_DEFAULT, "App switcher gesture detected. Will perform openAppSwitcher command.", v6, 2u);
    }

    v5 = +[AXSpringBoardServer server];
    [v5 openAppSwitcher];
  }
}

- (void)_handleBottomEdgePanExtraLong:(id)a3
{
  v3 = +[AXSpringBoardServer server];
  v4 = [v3 isTypeToSiriVisible];

  if (v4)
  {
    if ([VOTSharedWorkspace supportsHomeGestures])
    {
      v5 = +[AXSpringBoardServer server];
      v6 = [v5 dismissBuddyIfNecessary];

      if ((v6 & 1) == 0)
      {
        v7 = VOTSharedWorkspace;

        [v7 performHomeButtonPress];
      }
    }
  }

  else
  {
    v8 = +[AXPISystemActionHelper sharedInstance];
    [v8 activateTypeToSiri];
  }
}

- (void)_handleTopEdgePanDown:(id)a3
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[AXSBMenuBarManager sharedInstance];
    v4 = [v3 isMenuBarSupported];

    if (v4)
    {
      v5 = +[AXSBMenuBarManager sharedInstance];
      [v5 toggleMenuBar];
    }
  }
}

- (void)_handleTopEdgePanShort:(id)a3
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[VOTElement springBoardApplication];
    v4 = +[AXSpringBoardServer server];
    v5 = [v3 showControlCenter:{objc_msgSend(v4, "isControlCenterVisible") ^ 1}];

    if ((v5 & 1) == 0)
    {
      v7 = +[VOTOutputManager outputManager];
      v6 = +[VOSOutputEvent BoundaryEncountered];
      [v7 sendEvent:v6];
    }
  }
}

- (void)_handleTopEdgePanLong:(id)a3
{
  if ([VOTSharedWorkspace supportsHomeGestures])
  {
    v3 = +[VOTElement systemAppApplication];
    v4 = [v3 showBulletinBoard:1];

    if ((v4 & 1) == 0)
    {
      v6 = +[VOTOutputManager outputManager];
      v5 = +[VOSOutputEvent BoundaryEncountered];
      [v6 sendEvent:v5];
    }
  }
}

- (void)_handleSwitchToLeftElementCommunity:(id)a3
{
  v6 = a3;
  v4 = +[VOTElement springBoardApplication];
  v5 = [v4 applicationIsRTL];

  if (v5)
  {
    [(VOTElementManager *)self _handleSwitchToNextElementCommunity:v6];
  }

  else
  {
    [(VOTElementManager *)self _handleSwitchToPreviousElementCommunity:v6];
  }
}

- (void)_handleSwitchToRightElementCommunity:(id)a3
{
  v6 = a3;
  v4 = +[VOTElement springBoardApplication];
  v5 = [v4 applicationIsRTL];

  if (v5)
  {
    [(VOTElementManager *)self _handleSwitchToPreviousElementCommunity:v6];
  }

  else
  {
    [(VOTElementManager *)self _handleSwitchToNextElementCommunity:v6];
  }
}

- (void)_handleOpenVoiceOverOptions:(id)a3
{
  v4 = [NSURL URLWithString:@"prefs:root=ACCESSIBILITY&path=VOICEOVER_TITLE"];
  v3 = +[LSApplicationWorkspace defaultWorkspace];
  [v3 openSensitiveURL:v4 withOptions:0];
}

- (void)_handleSpeechVoiceChange:(id)a3
{
  v6 = a3;
  v4 = [v6 command];
  if ([v4 isEqualToString:kVOTEventCommandSpeechNextVoice])
  {
    v5 = 1;
  }

  else
  {
    v5 = 2;
  }

  [(VOTElementManager *)self _handleRotorVoiceMovement:v5 withEvent:v6];
}

- (void)_handleShowDetectionUIWithMagnifierService:(id)a3
{
  v3 = +[VOTMagnifierService shared];
  [v3 showDetectionUI];
}

- (void)_handleHideDetectionUIWithMagnifierService:(id)a3
{
  v3 = +[VOTMagnifierService shared];
  [v3 hideDetectionUI];
}

- (void)_handleToggleSideAppIfAvailableInGestures:(id)a3
{
  v3 = a3;
  v10 = 0u;
  v11 = 0u;
  v12 = 0u;
  v13 = 0u;
  v4 = [&off_1001DBAB0 countByEnumeratingWithState:&v10 objects:v14 count:16];
  if (v4)
  {
    v5 = v4;
    v6 = *v11;
    while (2)
    {
      for (i = 0; i != v5; i = i + 1)
      {
        if (*v11 != v6)
        {
          objc_enumerationMutation(&off_1001DBAB0);
        }

        v8 = *(*(&v10 + 1) + 8 * i);
        if ([v3 containsObject:v8])
        {
          v9 = +[AXSpringBoardServer server];
          [v9 performMedusaGesture:{objc_msgSend(v8, "unsignedIntegerValue")}];

          goto LABEL_11;
        }
      }

      v5 = [&off_1001DBAB0 countByEnumeratingWithState:&v10 objects:v14 count:16];
      if (v5)
      {
        continue;
      }

      break;
    }
  }

LABEL_11:
}

- (void)_handleToggleSideApp:(id)a3
{
  v4 = +[AXSpringBoardServer server];
  v5 = [v4 allowedMedusaGestures];

  [(VOTElementManager *)self _handleToggleSideAppIfAvailableInGestures:v5];
}

- (BOOL)_continueTrackingRoadElementWithPoint:(CGPoint)a3
{
  result = 0;
  if (self->_shouldContinueRoadTracking)
  {
    y = a3.y;
    x = a3.x;
    if ([(VOTElement *)self->_currentElement mapFeatureType]== 1 && [(VOTElement *)self->_currentElement roadContainsTrackingPoint:x, y])
    {
      return 1;
    }
  }

  return result;
}

- (BOOL)_continueTrackingKeyboardKey:(id)a3
{
  v4 = a3;
  currentElement = self->_currentElement;
  v6 = v4 | currentElement;
  if (v4 | currentElement)
  {
    v6 = ![(VOTElement *)currentElement isEqual:v4];
  }

  if (!v4)
  {
    v6 = 1;
  }

  v7 = !self->_flags.usePenumbraForKeyboardKeys || v6 == 0;
  if (!v7 && [(VOTElement *)self->_currentElement doesHaveTraits:kAXKeyboardKeyTrait])
  {
    [(VOTElement *)self->_currentElement centerPoint];
    SCRCMathGetDistanceBetweenPoints();
    v9 = v8;
    [(VOTElementManager *)self keyboardKeyPenumbra:self->_currentElement];
    if (v9 < v10)
    {
      v12 = 1;
      goto LABEL_15;
    }

    v11 = VOTLogCommon();
    if (os_log_type_enabled(v11, OS_LOG_TYPE_INFO))
    {
      *v14 = 0;
      _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_INFO, "Canceling alt keyboard activation timer since we moved too far", v14, 2u);
    }

    [(SCRCTargetSelectorTimer *)self->_keyboardAlternativeModeActivationTimer cancel];
  }

  v12 = 0;
LABEL_15:

  return v12;
}

- (void)_setDirectInteractionElement:(id)a3
{
  v23 = a3;
  [v23 frame];
  v5 = v4;
  v7 = v6;
  v9 = v8;
  v11 = v10;
  v12 = +[VOTElement systemWideElement];
  [v12 convertRect:objc_msgSend(v23 fromContextId:{"windowContextId"), v5, v7, v9, v11}];
  v14 = v13;
  v16 = v15;
  v18 = v17;
  v20 = v19;

  v21 = +[VOTDisplayManager displayManager];
  [v21 setCursorFrame:{v14, v16, v18, v20}];

  [(VOTElementManager *)self _setCurrentElement:v23];
  if (![(VOTElementManager *)self avoidAnnouncingDirectTouchArea])
  {
    v22 = +[VOTOutputRequest createRequest];
    [(VOTElementManager *)self _addDescription:v23 toRequest:v22 withOptions:0x4000];
    [v22 send];
  }
}

- (BOOL)_isPoint:(CGPoint)a3 withinRangeForDividerElement:(id)a4
{
  y = a3.y;
  x = a3.x;
  v6 = a4;
  if (!v6)
  {
    _AXAssert();
  }

  [v6 frame];
  v8 = v7;
  v10 = v9;
  v12 = v11;
  v14 = v13;
  v15 = [VOTSharedWorkspace deviceOrientation];
  v16 = v8;
  v17 = v10;
  v18 = v12;
  v19 = v14;
  if ((v15 - 1) > 1)
  {
    if (y >= CGRectGetMinY(*&v16) + -10.0)
    {
      v25.origin.x = v8;
      v25.origin.y = v10;
      v25.size.width = v12;
      v25.size.height = v14;
      if (y < CGRectGetMaxY(v25) + 10.0)
      {
        v26.origin.x = v8;
        v26.origin.y = v10;
        v26.size.width = v12;
        v26.size.height = v14;
        y = CGRectGetMidY(v26);
        goto LABEL_10;
      }
    }

LABEL_11:
    v21 = 0;
    goto LABEL_12;
  }

  if (x < CGRectGetMinX(*&v16) + -10.0)
  {
    goto LABEL_11;
  }

  v23.origin.x = v8;
  v23.origin.y = v10;
  v23.size.width = v12;
  v23.size.height = v14;
  if (x >= CGRectGetMaxX(v23) + 10.0)
  {
    goto LABEL_11;
  }

  v24.origin.x = v8;
  v24.origin.y = v10;
  v24.size.width = v12;
  v24.size.height = v14;
  x = CGRectGetMidX(v24);
LABEL_10:
  v20 = [[VOTElement alloc] initWithPosition:x, y];
  v21 = [(VOTElement *)v20 isEqual:v6];

LABEL_12:
  return v21;
}

- (id)_sideAppDividerElement
{
  if (![(VOTElementManager *)self didCacheSideAppDividerElement])
  {
    v3 = +[VOTElement systemAppApplication];
    v4 = [v3 elementForAttribute:5040];
    [(VOTElementManager *)self setCachedSideAppDividerElement:v4];

    [(VOTElementManager *)self setDidCacheSideAppDividerElement:1];
  }

  return [(VOTElementManager *)self cachedSideAppDividerElement];
}

- (id)_occludedMultitaskingApps
{
  v3 = [(VOTElementManager *)self cachedOccludedMultitaskingApps];

  if (!v3)
  {
    v4 = +[VOTElement springBoardApplication];
    v5 = [v4 occludedMultitaskingApps];
    [(VOTElementManager *)self setCachedOccludedMultitaskingApps:v5];
  }

  return [(VOTElementManager *)self cachedOccludedMultitaskingApps];
}

- (id)_frontmostItemContainerElement
{
  v3 = [(VOTElementManager *)self cachedFrontmostItemContainerElement];

  if (!v3)
  {
    v4 = +[VOTElement springBoardApplication];
    v5 = [v4 frontmostItemContainer];
    [(VOTElementManager *)self setCachedFrontmostItemContainerElement:v5];
  }

  return [(VOTElementManager *)self cachedFrontmostItemContainerElement];
}

- (id)_activeSceneIdentifier
{
  v2 = +[VOTElement springBoardApplication];
  v3 = [v2 activeSceneIdentifier];

  return v3;
}

- (id)_copySideAppDividerElementIfApplicableForPoint:(CGPoint)a3
{
  y = a3.y;
  x = a3.x;
  v6 = [(VOTElementManager *)self _sideAppDividerElement];
  if (v6 && [(VOTElementManager *)self _isPoint:v6 withinRangeForDividerElement:x, y])
  {
    v7 = v6;
  }

  else
  {
    v7 = 0;
  }

  return v7;
}

- (id)_currentMedusaApplications
{
  currentApplications = self->_currentApplications;
  v5[0] = _NSConcreteStackBlock;
  v5[1] = 3221225472;
  v5[2] = sub_10009068C;
  v5[3] = &unk_1001C9E50;
  v5[4] = self;
  v3 = [(NSArray *)currentApplications ax_filteredArrayUsingBlock:v5];

  return v3;
}

- (id)_handleProtectedAppLogicForEvent:(id)a3 element:(id)a4 point:(CGPoint)a5
{
  y = a5.y;
  x = a5.x;
  v9 = a4;
  v10 = [a3 objectForIndex:113];
  if (!v10)
  {
    v16 = 0;
    goto LABEL_41;
  }

  v11 = [(VOTElementManager *)self _currentMedusaApplications];
  v12 = [v11 ax_filteredArrayUsingBlock:&stru_1001C9E70];

  if ([v12 count] >= 2)
  {
    if ((AXDeviceSupportsSideApp() & 1) == 0)
    {
      v13 = VOTLogCommon();
      if (os_log_type_enabled(v13, OS_LOG_TYPE_ERROR))
      {
        sub_10012BC48();
      }
    }

    v14 = sub_100050834();
    if (v14)
    {
      if (([v9 isAccessibleElement] & 1) == 0)
      {
        LOBYTE(v14) = [v9 isTouchContainer];
        if (!v9)
        {
          goto LABEL_16;
        }

LABEL_11:
        if ((v14 & 1) == 0)
        {
          v15 = [(VOTElementManager *)self _elementCommunityForElement:v9];
          goto LABEL_27;
        }

LABEL_16:
        v29 = 0u;
        v30 = 0u;
        v27 = 0u;
        v28 = 0u;
        v17 = v12;
        v15 = [v17 countByEnumeratingWithState:&v27 objects:v31 count:16];
        if (v15)
        {
          v18 = *v28;
          while (2)
          {
            for (i = 0; i != v15; i = i + 1)
            {
              if (*v28 != v18)
              {
                objc_enumerationMutation(v17);
              }

              v20 = *(*(&v27 + 1) + 8 * i);
              [v20 frame];
              v33.x = x;
              v33.y = y;
              if (CGRectContainsPoint(v34, v33))
              {
                v15 = v20;
                goto LABEL_26;
              }
            }

            v15 = [v17 countByEnumeratingWithState:&v27 objects:v31 count:16];
            if (v15)
            {
              continue;
            }

            break;
          }
        }

LABEL_26:

LABEL_27:
        if ([v10 BOOLValue])
        {
          if (v15 && [v12 containsObject:v15])
          {
            v21 = self;
            v22 = v15;
          }

          else
          {
            v21 = self;
            v22 = 0;
          }

          [(VOTElementManager *)v21 setFirstTrackedAppInGesture:v22];
        }

        else
        {
          v23 = [(VOTElementManager *)self firstTrackedAppInGesture];

          v16 = 0;
          if (!v23 || !v15)
          {
            goto LABEL_39;
          }

          if ([v12 containsObject:v15])
          {
            v24 = [(VOTElementManager *)self firstTrackedAppInGesture];
            v25 = [v15 isEqual:v24];

            if ((v25 & 1) == 0)
            {
              v16 = v15;
LABEL_39:

              goto LABEL_40;
            }
          }
        }

        v16 = 0;
        goto LABEL_39;
      }

      LOBYTE(v14) = 0;
    }

    if (!v9)
    {
      goto LABEL_16;
    }

    goto LABEL_11;
  }

  v16 = 0;
LABEL_40:

LABEL_41:

  return v16;
}

- (void)_handleTracking:(id)a3
{
  v4 = a3;
  if (AXDeviceIsTV())
  {
    [(VOTElementManager *)self _tvOS_handleIdleAndTrackingEvents:v4];
    goto LABEL_113;
  }

  [(NSLock *)self->_trackingLock lock];
  if (!self->_mostRecentTrackingEvent)
  {
    [(NSLock *)self->_trackingLock unlock];
    goto LABEL_113;
  }

  [(VOTElementManager *)self setLastElementChangeAction:3];
  [(VOTElementManager *)self setLastUserElementTouchTime:CFAbsoluteTimeGetCurrent()];
  mostRecentTrackingEvent = self->_mostRecentTrackingEvent;
  if (mostRecentTrackingEvent)
  {
    v6 = mostRecentTrackingEvent;

    v7 = self->_mostRecentTrackingEvent;
    self->_mostRecentTrackingEvent = 0;

    v4 = v6;
  }

  [(NSLock *)self->_trackingLock unlock];
  [(VOTEvent *)v4 touchPoint];
  v9 = v8;
  v11 = v10;
  if ([(VOTElementManager *)self _continueTrackingRoadElementWithPoint:?])
  {
    v12 = [(VOTElementManager *)self _currentElement];
  }

  else
  {
    v12 = [(VOTElementManager *)self _copySideAppDividerElementIfApplicableForPoint:v9, v11];
  }

  v13 = v12;
  if (!v12)
  {
    v13 = [objc_allocWithZone(VOTElement) initWithPosition:{v9, v11}];
  }

  if (AXDeviceSupportsMultitasking())
  {
    v14 = [v13 fbSceneIdentifier];
    v15 = [(VOTElementManager *)self _occludedMultitaskingApps];
    v16 = [v15 objectForKey:v14];
    v17 = objc_allocWithZone(VOTElement);
    v18 = [(VOTElementManager *)self _frontmostItemContainerElement];
    v19 = [v17 initWithAXElement:v18];

    if (v19 && ([v19 frame], v66.x = v9, v66.y = v11, CGRectContainsPoint(v68, v66)) && (objc_msgSend(v13, "doesHaveTraits:", kAXSnapshotItemContainerTrait) & 1) != 0)
    {
      v20 = 0;
    }

    else
    {
      if (!v16)
      {
LABEL_20:

        goto LABEL_21;
      }

      v20 = [objc_allocWithZone(VOTElement) initWithAXElement:v16];
    }

    v13 = v20;
    goto LABEL_20;
  }

LABEL_21:
  [VOTSharedWorkspace convertDevicePointToZoomedPoint:{v9, v11}];
  self->_fingerLocation.x = v21;
  self->_fingerLocation.y = v22;
  [(VOTElementManager *)self _resetOtherTapInputModes];
  [(VOTElementManager *)self _resetSearchType];
  [(VOTElementManager *)self _resetRotorTextNavigation];
  [(VOTElementManager *)self _cancelPreviousElementSearch];
  v23 = VOTLogElement();
  if (os_log_type_enabled(v23, OS_LOG_TYPE_DEBUG))
  {
    sub_10012BCB0();
  }

  [(VOTElementManager *)self _stopReadAll];
  if ([v13 doesHaveTraits:kAXSpacerTrait])
  {

    v13 = 0;
  }

  v24 = kAXAllowsDirectInteractionTrait;
  if ([v13 doesHaveTraits:kAXAllowsDirectInteractionTrait])
  {
    [(NSMutableSet *)self->_directInteractionElements addObject:v13];
    if ([(VOTElementManager *)self inDirectTouchMode])
    {
      v25 = [(VOTEvent *)v4 objectForIndex:108];
      v26 = [v25 isDownEvent];

      if (v26)
      {
        [(VOTElementManager *)self setShouldTurnTrackingIntoDirectTouch:1];
      }
    }

    else
    {
      v27 = [objc_allocWithZone(VOTElement) initWithPosition:v13 startWithElement:{v9, v11}];
      v28 = v27;
      if (v27)
      {
        v29 = v27;

        v13 = v29;
      }
    }
  }

  v30 = [(VOTElementManager *)self _currentElement];
  v31 = v30;
  if (v13 | v30)
  {
    v32 = [v30 isEqual:v13];
  }

  else
  {
    v32 = 1;
  }

  if ([(VOTElementManager *)self _continueTrackingKeyboardKey:v13])
  {
    v33 = v31;

    v32 = 1;
    v13 = v33;
  }

  [v13 setShouldSkipValidateElement:1];
  if (v13)
  {
    if (sub_100050834())
    {
      v34 = [v13 isTouchContainer] ^ 1;
    }

    else
    {
      LOBYTE(v34) = 1;
    }
  }

  else
  {
    LOBYTE(v34) = 0;
  }

  self->_flags.focusIsOnElement = v34;
  v35 = +[AXSubsystemVoiceOver sharedInstance];
  v36 = [v35 ignoreLogging];

  if ((v36 & 1) == 0)
  {
    v37 = +[AXSubsystemVoiceOver identifier];
    v38 = AXLoggerForFacility();

    v39 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v38, v39))
    {
      v63 = v24;
      v40 = AXColorizeFormatLog();
      v61 = v13;
      v62 = v32;
      v60 = v31;
      v41 = _AXStringForArgs();
      v42 = v38;
      if (os_log_type_enabled(v42, v39))
      {
        *buf = 138543362;
        v65 = v41;
        _os_log_impl(&_mh_execute_header, v42, v39, "%{public}@", buf, 0xCu);
      }

      v24 = v63;
    }
  }

  if (v13)
  {
    v43 = 1;
  }

  else
  {
    v43 = v32;
  }

  if ((v43 & 1) == 0)
  {
    [v31 frame];
    v67.x = v9;
    v67.y = v11;
    if (CGRectContainsPoint(v69, v67) && [v31 doesHaveTraits:kAXWebContentTrait])
    {
      v13 = v31;
      LODWORD(v32) = 1;
    }

    else
    {
      LODWORD(v32) = 0;
      v13 = 0;
    }
  }

  v44 = [v13 isReadingContent];
  if (![v13 doesHaveTraits:kAXTextAreaTrait] || (objc_msgSend(v13, "doesHaveTraits:", kAXStaticTextTrait) & 1) != 0)
  {
    v45 = 0;
    if (v13)
    {
      goto LABEL_59;
    }

LABEL_75:
    self->_flags.touchingOnNothing = 1;
    [(VOTElementManager *)self _echoNoElementForEvent:v4];
    v48 = +[VOTOutputManager outputManager];
    [v48 stopSpeakingAtBoundary:0];
    goto LABEL_76;
  }

  v47 = [v13 value];
  v45 = [v47 length] != 0;

  if (!v13)
  {
    goto LABEL_75;
  }

LABEL_59:
  if (!v32 || self->_flags.lastEventWasIdle || self->_flags.touchingOnNothing)
  {
    if (-[VOTElementManager inDirectTouchMode](self, "inDirectTouchMode") && [v13 doesHaveTraits:v24] && (objc_msgSend(v13, "avoidAnnouncingDirectTouchArea") & 1) != 0)
    {
      goto LABEL_69;
    }

    if ((v44 | v45))
    {
      if (v32 & 1 | ((v44 & 1) == 0))
      {
        if (v32)
        {
          goto LABEL_69;
        }
      }

      else if (self->_bookSubelement)
      {
LABEL_69:
        if (v45 && ![(VOTElementManager *)self _echoLineInElement:v13 forEvent:v4 forDifferentElement:v32 ^ 1])
        {
          v46 = [v13 value];
          if ([v46 isAXAttributedString] && objc_msgSend(v46, "hasAttribute:", UIAccessibilityTokenPlaceholder))
          {
            [(VOTElementManager *)self _echoDifferentElement:v13 forEvent:v4];
          }

          else
          {
            [(VOTElementManager *)self _echoNoElementForEvent:v4];
          }
        }

        if (([v13 isTouchContainer] & 1) == 0)
        {
          self->_timeSpentOnNothing = -3061152000.0;
        }

        self->_flags.touchingOnNothing = !self->_flags.focusIsOnElement;
        currentSubElement = self->_currentSubElement;
        self->_currentSubElement = 0;

        goto LABEL_84;
      }
    }

    [(VOTElementManager *)self _echoDifferentElement:v13 forEvent:v4 onlyOutputTouchContainerAndSounds:(v44 | v45) & 1 shouldPlayGuideWireSound:1 isProtectedApp:0];
    goto LABEL_69;
  }

  if (!v45)
  {
    if ((v44 & 1) == 0)
    {
      [(VOTElementManager *)self _echoSameElement:v13 forEvent:v4];
      self->_flags.touchingOnNothing = 0;
    }

    goto LABEL_84;
  }

  v59 = [[VOTElement alloc] initWithPosition:v13 startWithElement:v9, v11];
  v48 = v59;
  if (v59)
  {
    if (![(VOTElement *)v59 isEqual:self->_currentSubElement])
    {
      [(VOTElementManager *)self _echoDifferentElement:v48 forEvent:v4 onlyOutputTouchContainerAndSounds:0 shouldPlayGuideWireSound:1 isProtectedApp:0];
      [(VOTElementManager *)self _setCurrentElement:v13];
      objc_storeStrong(&self->_currentSubElement, v48);
    }
  }

  else if (![(VOTElementManager *)self _echoLineInElement:v13 forEvent:v4 forDifferentElement:0])
  {
    [(VOTElementManager *)self _echoNoElementForEvent:v4];
  }

LABEL_76:

LABEL_84:
  v50 = sub_100050834();
  if (v50)
  {
    if ([v13 isAccessibleElement])
    {
      LOBYTE(v50) = 0;
    }

    else
    {
      LOBYTE(v50) = [v13 isTouchContainer];
    }
  }

  if (v13 && (v50 & 1) == 0)
  {
    if (![(VOTElement *)self->_lastValidElement isEqual:v13])
    {
      objc_storeStrong(&self->_lastValidElement, v13);
    }

    [(VOTElementManager *)self _setCurrentElement:self->_lastValidElement isProtectedApp:0];
    v51 = self->_lastValidElement;

    v13 = v51;
  }

  if (v44)
  {
    [(VOTElementManager *)self _echoLineInBookElement:v13 forEvent:v4];
  }

  v52 = kAXAllowsNativeSlidingTrait;
  if ([v13 doesHaveTraits:kAXAllowsNativeSlidingTrait])
  {
    if (!self->_flags.wasSendingToNativeSlide && v13)
    {
      v53 = [v13 copy];
      if (v53)
      {
        v54 = [NSDictionary dictionaryWithObject:v53 forKey:@"element"];
      }

      else
      {
        v54 = 0;
      }

      v55 = +[NSNotificationCenter defaultCenter];
      [v55 postNotificationName:off_1001FDF08 object:0 userInfo:v54];

      self->_flags.wasSendingToNativeSlide = 1;
    }
  }

  else if (self->_flags.wasSendingToNativeSlide && ([v13 doesHaveTraits:v52] & 1) == 0)
  {
    [(VOTElementManager *)self _endNativeSliding:0];
  }

  if ([v13 doesHaveTraits:kAXLaunchIconTrait])
  {
    if (([v13 isInFolder] & 1) == 0)
    {
      v56 = [(VOTEvent *)v4 objectForIndex:112];
      v57 = [v56 BOOLValue];

      if ((v57 & 1) == 0)
      {
        [(NSMutableArray *)self->_cachedLaunchIcons removeAllObjects];
      }
    }
  }

  [(VOTElementManager *)self hideVisualRotor];
  self->_lastItemSelectionFromTouch = CFAbsoluteTimeGetCurrent();
  self->_flags.lastEventWasIdle = 0;
  if ([VOTSharedWorkspace reachabilityActive] && !self->_flags.setReachabilityIsActiveWhileFingerDown)
  {
    [(SCRCTargetSelectorTimer *)self->_reachabilityWaitForTrackingTimer cancel];
    v58 = +[AXSpringBoardServer server];
    [v58 setReachabilityActive:1];

    self->_flags.setReachabilityIsActiveWhileFingerDown = 1;
  }

LABEL_113:
}

- (void)_handleKeyboardContinuousPathDidBegin:(id)a3
{
  self->_flags.continuousPathKeyboardBegan = 1;
  v3 = VOTLogCommon();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    *v6 = 0;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "Continuous path did begin", v6, 2u);
  }

  v4 = +[VOTOutputManager outputManager];
  [v4 playSoundFast:@"Sounds/VOTOrbSound1-OrbHW.aiff"];

  v5 = +[AXHapticFeedbackManager sharedManager];
  [v5 playHapticFeedbackForType:13];
}

- (void)_continuousPathIdleTimer:(id)a3
{
  v4 = VOTLogCommon();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_INFO))
  {
    continuousPathSuggestion = self->_continuousPathSuggestion;
    v17 = 138412290;
    v18 = continuousPathSuggestion;
    _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_INFO, "Continuous path idle timer fired: %@", &v17, 0xCu);
  }

  if (-[NSString length](self->_continuousPathSuggestion, "length") && (CFAbsoluteTimeGetCurrent() - *&qword_1001FECD8 > 1.0 || ([qword_1001FECE0 isEqualToString:self->_continuousPathSuggestion] & 1) == 0))
  {
    v6 = +[VOTOutputRequest createRequest];
    v7 = [(VOTElement *)self->_firstResponderElement application];
    v8 = [v7 currentSoftwareKeyboardLanguage];
    [v6 setKeyboardLanguageHint:v8];

    v9 = [VOTSharedWorkspace selectedLanguage];
    v10 = v9;
    if (v9)
    {
      v11 = v9;
    }

    else
    {
      v11 = [v6 keyboardLanguageHint];
    }

    v12 = v11;

    v13 = [v6 addString:self->_continuousPathSuggestion withLanguage:v12];
    v14 = [v6 lastAction];
    [v14 setObject:kCFBooleanTrue forVariant:50];

    [v6 setBrailleType:2];
    [v6 setGeneratesBraille:1];
    [(VOTElementManager *)self sendRequest:v6];
    v15 = [(NSString *)self->_continuousPathSuggestion copy];
    v16 = qword_1001FECE0;
    qword_1001FECE0 = v15;

    qword_1001FECD8 = CFAbsoluteTimeGetCurrent();
  }
}

- (void)_reachabilityWaitForTrackingTimeout
{
  v2 = +[AXSpringBoardServer server];
  [v2 setReachabilityActive:0];
}

- (void)handleReachabilityToggled
{
  if ([VOTSharedWorkspace reachabilityActive])
  {
    [(SCRCTargetSelectorTimer *)self->_reachabilityWaitForTrackingTimer dispatchAfterDelay:8.0];
  }

  [(VOTElementManager *)self updateCurrentElementFrame];
}

- (void)_handleTapAndHoldEventMonitor:(id)a3
{
  v4 = a3;
  v5 = v4;
  if (self->_keyboardAlternativesVisible)
  {
    [v4 touchPoint];
    SCRCMathGetDistanceBetweenPoints();
    if (v6 <= 15.0)
    {
      if ([(VOTElementManager *)self _shouldDismissKeyboardForMovingTooFarAlongYAxisWithEvent:v5])
      {
        [(VOTElementManager *)self _dismissAlternativeKeyboardKeys];
      }
    }

    else
    {
      [v5 touchPoint];
      self->_keyboardAlternativeVisibleTrackingPoint.x = v7;
      self->_keyboardAlternativeVisibleTrackingPoint.y = v8;
      [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer cancel];
      [(SCRCTargetSelectorTimer *)self->_alternativeKeyDismissalTimer dispatchAfterDelay:5.0];
    }
  }

  else if (self->_flags.continuousPathKeyboardBegan)
  {
    v9 = VOTLogCommon();
    if (os_log_type_enabled(v9, OS_LOG_TYPE_INFO))
    {
      v10 = [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isPending];
      v29 = 67109120;
      v30 = v10;
      _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_INFO, "KB tracking: %d", &v29, 8u);
    }

    if ((![(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isPending]|| [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isCancelled]) && !self->_flags.isContinuousPathOutsideBounds)
    {
      v11 = VOTLogCommon();
      if (os_log_type_enabled(v11, OS_LOG_TYPE_INFO))
      {
        LOWORD(v29) = 0;
        _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_INFO, "Waiting to speak suggestions for continuous path", &v29, 2u);
      }

      [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer dispatchAfterDelay:0.45];
    }

    v12 = [(VOTElement *)self->_currentElement application];
    v13 = [v12 activeKeyboard];

    if ([v13 isKeyboardContinuousPathTracking])
    {
      [v13 frame];
      v15 = v14;
      v17 = v16;
      v19 = v18;
      v21 = v20;
      [v5 touchPoint];
      v33.x = v22;
      v33.y = v23;
      v34.origin.x = v15;
      v34.origin.y = v17;
      v34.size.width = v19;
      v34.size.height = v21;
      v24 = !CGRectContainsPoint(v34, v33);
    }

    else
    {
      v24 = 0;
    }

    v25 = VOTLogCommon();
    if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
    {
      isContinuousPathOutsideBounds = self->_flags.isContinuousPathOutsideBounds;
      v29 = 67109376;
      v30 = v24;
      v31 = 1024;
      v32 = isContinuousPathOutsideBounds;
      _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "Outside bounds for continuous path: %d (already out? %d)", &v29, 0xEu);
    }

    if (v24)
    {
      if (!self->_flags.isContinuousPathOutsideBounds)
      {
        v27 = +[AXHapticFeedbackManager sharedManager];
        [v27 playHapticFeedbackForType:16];

        self->_flags.isContinuousPathOutsideBounds = 1;
        [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer cancel];
      }
    }

    else
    {
      if (self->_flags.isContinuousPathOutsideBounds)
      {
        v28 = +[AXHapticFeedbackManager sharedManager];
        [v28 playHapticFeedbackForType:13];
      }

      self->_flags.isContinuousPathOutsideBounds = 0;
    }
  }
}

- (BOOL)_shouldDismissKeyboardForMovingTooFarAlongYAxisWithEvent:(id)a3
{
  v4 = a3;
  if ([VOTSharedWorkspace applicationOrientation] == 3 || objc_msgSend(VOTSharedWorkspace, "applicationOrientation") == 4)
  {
    x = self->_keyboardAlternativeVisibleStartPoint.x;
    [v4 touchPoint];
    v7 = x - v6;
  }

  else
  {
    y = self->_keyboardAlternativeVisibleStartPoint.y;
    [v4 touchPoint];
    v7 = y - v9;
  }

  v10 = fabs(v7) > 220.0;

  return v10;
}

- (id)_checkDataDetectorIfPresent:(CGRect)a3 element:(id)a4 includeLinks:(BOOL)a5
{
  height = a3.size.height;
  width = a3.size.width;
  y = a3.origin.y;
  x = a3.origin.x;
  v10 = a4;
  v26.origin.x = x;
  v26.origin.y = y;
  v26.size.width = width;
  v26.size.height = height;
  MidX = CGRectGetMidX(v26);
  v27.origin.x = x;
  v27.origin.y = y;
  v27.size.width = width;
  v27.size.height = height;
  MidY = CGRectGetMidY(v27);
  v13 = +[VOTElement systemWideElement];
  [v13 convertPoint:objc_msgSend(v10 toContextId:{"windowContextId"), MidX, MidY}];
  v15 = v14;
  v17 = v16;

  v18 = [v10 dataDetectorURL:{v15, v17}];

  if (v18)
  {
    v19 = @"address";
    if (([(__CFString *)v18 hasPrefix:@"address"]& 1) != 0)
    {
LABEL_9:

      v18 = v19;
LABEL_10:
      v20 = [VOTSharedWorkspace selectedLanguage];
      v21 = off_1001FDDD0;
      v22 = [NSString stringWithFormat:@"data-detector.%@", v18];
      v23 = sub_1000516CC(v21, v22, 0, v20);

      goto LABEL_14;
    }

    if (([(__CFString *)v18 hasPrefix:@"event"]& 1) != 0)
    {
      v19 = @"calendar";
      goto LABEL_9;
    }

    if (([(__CFString *)v18 hasPrefix:@"tracking-number"]& 1) != 0)
    {
      v19 = @"track";
      goto LABEL_9;
    }

    if (([(__CFString *)v18 hasPrefix:@"item-number"]& 1) != 0)
    {
      v19 = @"item";
      goto LABEL_9;
    }

    if (([(__CFString *)v18 hasPrefix:@"http"]& 1) == 0)
    {
      v19 = @"mailto";
      if (([(__CFString *)v18 hasPrefix:@"mailto"]& 1) == 0)
      {
        v19 = @"tel";
        if (([(__CFString *)v18 hasPrefix:@"tel"]& 1) == 0)
        {
          v19 = @"facetime";
          if (([(__CFString *)v18 hasPrefix:@"facetime"]& 1) == 0)
          {
            v19 = @"ibooks";
            if (([(__CFString *)v18 hasPrefix:@"ibooks"]& 1) == 0)
            {
              goto LABEL_10;
            }
          }
        }
      }

      goto LABEL_9;
    }

    v18 = @"http";
    if (a5)
    {
      goto LABEL_10;
    }
  }

  v23 = 0;
LABEL_14:

  return v23;
}

- (void)_outputDataDetectorIfPresent:(CGRect)a3 element:(id)a4 includeLinks:(BOOL)a5
{
  v7 = [(VOTElementManager *)self _checkDataDetectorIfPresent:a4 element:a5 includeLinks:a3.origin.x, a3.origin.y, a3.size.width, a3.size.height];
  v5 = [VOTSharedWorkspace selectedLanguage];
  v6 = sub_1000095FC(v7, 2, v5);
}

- (BOOL)_echoLineInElement:(id)a3 forEvent:(id)a4 forDifferentElement:(BOOL)a5
{
  v5 = a5;
  v8 = a3;
  [a4 touchPoint];
  v10 = v9;
  v12 = v11;
  if (([VOTSharedWorkspace inUnitTestMode] & 1) == 0)
  {
    [VOTSharedWorkspace convertDevicePointToZoomedPoint:{v10, v12}];
    v14 = v13;
    v16 = v15;
    v17 = +[VOTElement systemWideElement];
    [v17 convertPoint:objc_msgSend(v8 toContextId:{"windowContextId"), v14, v16}];
    v10 = v18;
    v12 = v19;
  }

  v20 = [v8 lineNumberAndColumnForPoint:{v10, v12}];
  v21 = v20;
  if (v20)
  {
    if ([v20 isEqual:self->_lastSeenLineAndColumn])
    {
LABEL_45:
      v46 = 1;
      goto LABEL_46;
    }

    v22 = [v21 objectForKey:@"lineNumber"];
    v23 = [v22 intValue];

    if (v23 != -1)
    {
      v90 = v5;
      [(VOTElementManager *)self _setLastSeenLineAndColumn:v21];
      v89 = [v8 doesHaveTraits:kAXIsEditingTrait];
      v24 = [v8 rangeForLineNumberAndColumn:self->_lastSeenLineAndColumn];
      v26 = v25;
      v97 = [v8 attributedValueForRange:{v24, v25}];
      [v8 boundsForRange:{v24, v26}];
      v28 = v27;
      v30 = v29;
      v32 = v31;
      v34 = v33;
      v35 = +[VOTElement systemWideElement];
      [v35 convertRect:objc_msgSend(v8 fromContextId:{"windowContextId"), v28, v30, v32, v34}];
      v37 = v36;
      v39 = v38;
      v41 = v40;
      v43 = v42;

      self->_lineFrame.origin.x = v37;
      self->_lineFrame.origin.y = v39;
      self->_lineFrame.size.width = v41;
      self->_lineFrame.size.height = v43;
      v44 = [(VOTElementManager *)self _checkDataDetectorIfPresent:v8 element:1 includeLinks:v37, v39, v41, v43];
      v96 = [VOTSharedWorkspace selectedLanguage];
      if (self->_lastSeenLineStartPositionForFontProperties == v24)
      {
        v45 = 0;
      }

      else
      {
        v45 = [(VOTElementManager *)self _listItemLabelForAXAttributedString:v97];
      }

      v94 = v45;
      self->_lastSeenLineStartPositionForFontProperties = v24;
      v47 = [(VOTElementManager *)self _textAttachmentElementForString:v97 inRange:0, v26];
      v95 = v24;
      v92 = v44;
      v93 = v26;
      v91 = v47;
      if ([(VOTElementManager *)self stringIsTextAttachment:v97])
      {
        v48 = [AXAttributedString alloc];
        if (v47)
        {
          v49 = [v47 label];
          v50 = [v47 value];
          v51 = __AXStringForVariables();
          v52 = [v48 initWithString:{v51, v50, @"__AXStringForVariablesSentinel"}];

          v53 = 0;
          v97 = v52;
        }

        else
        {
          v49 = sub_1000511CC(off_1001FDDD0, @"attachment", 0);
          v60 = [v48 initWithString:v49];

          v53 = 0;
          v97 = v60;
        }

LABEL_20:

        if ([v8 doesHaveTraits:kAXTextAreaTrait])
        {
          self->_elementUnitIndex = v95;
        }

        if (v89)
        {
          [(VOTElementManager *)self _elementSelectionRangeDidChange:v95 + v93 reason:0, 0];
          if (!v93)
          {
            v61 = [v8 value];
            v62 = [v61 length];

            if (v95 < v62)
            {
              [(VOTElementManager *)self _elementSelectionRangeDidChange:self->_elementSelectionRangeBufferInternal.location + 1 reason:self->_elementSelectionRangeBufferInternal.length, 0];
            }
          }
        }

        v63 = [objc_allocWithZone(VOTOutputRequest) init];
        if ([v94 length])
        {
          v64 = [v63 addString:v94];
          v65 = [v63 lastAction];
          LODWORD(v66) = 1062836634;
          v67 = [NSNumber numberWithFloat:v66];
          [v65 setObject:v67 forVariant:32];
        }

        if (v90)
        {
          v68 = [v8 label];
          v69 = [v63 addString:v68];

          if ([VOTSharedWorkspace typingPitchChangeEnabled])
          {
            v70 = [v63 lastAction];
            LODWORD(v71) = 1062836634;
            v72 = [NSNumber numberWithFloat:v71];
            [v70 setObject:v72 forVariant:32];
          }
        }

        v73 = [(VOTElementManager *)self stringIsTextAttachment:v97];
        if ((v73 & 1) == 0)
        {
          v74 = [NSCharacterSet characterSetWithCharactersInString:@"\r\n"];
          v75 = [v97 stringByTrimmingCharactersInSet:v74];

          v97 = v75;
        }

        if ([v97 length])
        {
          v76 = [v63 addString:v97];
          v77 = [v63 lastAction];
          [v77 setPerformPunctuationTranslation:v73 ^ 1];

          v78 = [v63 lastAction];
          [v78 setReplaceCommas:v73 ^ 1];

          v79 = [v8 language];

          if (!v79)
          {
LABEL_38:
            if ([v53 length])
            {
              v82 = [v63 addString:v53];
              v83 = [v63 lastAction];
              LODWORD(v84) = 1062836634;
              v85 = [NSNumber numberWithFloat:v84];
              [v83 setObject:v85 forVariant:32];
            }

            [v63 setGeneratesBraille:1];
            [v63 setBrailleLineRange:{v95, v93}];
            [v63 setBrailleType:4];
            [(VOTElementManager *)self sendRequest:v63];
            if (v95 != 0x7FFFFFFF)
            {
              v86 = sub_1000095FC(v92, 2, v96);
              v99.origin.x = CGRectZero.origin.x;
              v99.origin.y = CGRectZero.origin.y;
              v99.size.width = CGRectZero.size.width;
              v99.size.height = CGRectZero.size.height;
              v98.origin.x = v37;
              v98.origin.y = v39;
              v98.size.width = v41;
              v98.size.height = v43;
              if (!CGRectEqualToRect(v98, v99))
              {
                v87 = +[VOTDisplayManager displayManager];
                [v87 setCursorFrame:{v37, v39, v41, v43}];

                self->_textRangeBeingDisplayed = 1;
              }

              self->_highlightedCharacterRange.location = v95;
              self->_highlightedCharacterRange.length = v93;
            }

            goto LABEL_45;
          }

          v80 = [v8 language];
          [v63 setLanguage:v80];
        }

        else
        {
          v80 = sub_1000516CC(off_1001FDDD0, @"empty.line", 0, v96);
          v81 = [v63 addString:v80];
        }

        goto LABEL_38;
      }

      [VOTSharedWorkspace addMisspellingsForString:v97];
      v49 = [v97 coalescedFontAttributes];
      if (v44)
      {
        v54 = sub_1000516CC(off_1001FDDD0, @"data-detector.http", 0, v96);
        v55 = [v44 isEqualToString:v54];

        lastSeenFontProperties = self->_lastSeenFontProperties;
        if (v55)
        {
          v57 = self;
          v58 = v49;
          v59 = 0;
LABEL_19:
          v53 = [(VOTElementManager *)v57 _computeChangedFontAttributes:v58 storedAttributes:lastSeenFontProperties haveMisspellCheck:v59];
          goto LABEL_20;
        }
      }

      else
      {
        lastSeenFontProperties = self->_lastSeenFontProperties;
      }

      v57 = self;
      v58 = v49;
      v59 = 1;
      goto LABEL_19;
    }
  }

  v46 = 0;
LABEL_46:

  return v46;
}

- (void)_echoStatusBarStatus:(id)a3
{
  if ([a3 doesHaveTraits:kAXStatusBarElementTrait])
  {
    inStatusBar = self->_flags.inStatusBar;
    self->_flags.inStatusBar = 1;
    if (!inStatusBar)
    {
      v7 = [objc_allocWithZone(VOTOutputRequest) init];
      v5 = sub_1000511CC(off_1001FDDD0, @"entered.status.bar", 0);
      v6 = [v7 addString:v5];

      [v7 setCannotBeInterrupted:1];
      [(VOTElementManager *)self sendRequest:v7];
    }
  }

  else
  {
    self->_flags.inStatusBar = 0;
  }
}

- (void)_finishPassthroughMode
{
  v3 = +[VOTElement systemWideElement];
  [v3 postFingerLiftAtPoint:0 withContextId:{self->_passthroughFinish.x, self->_passthroughFinish.y}];

  v4 = CGPointZero;
  self->_passthroughOffset = CGPointZero;
  self->_passthroughStart = v4;
  self->_passthroughFinish = v4;
  self->_flags.inPassthroughMode = 0;
}

- (void)_processPassthroughAllowedWithEvent:(id)a3 initialTouch:(BOOL)a4
{
  v4 = a4;
  v27 = a3;
  v6 = [(VOTElementManager *)self _currentElement];
  [v6 centerPoint];
  v8 = v7;
  v10 = v9;
  v11 = [(VOTElementManager *)self _useLineFrameBoundsForTouch:v6];
  if (v8 == CGPointZero.x && v10 == CGPointZero.y)
  {
    [v27 touchPoint];
    MidX = v15;
    MidY = v16;
  }

  else if (v11)
  {
    MidX = CGRectGetMidX(self->_lineFrame);
    MidY = CGRectGetMidY(self->_lineFrame);
  }

  else
  {
    [v27 touchPoint];
    v18 = v17 - self->_passthroughStart.x;
    v20 = v19 - self->_passthroughStart.y;
    self->_passthroughOffset.x = v18;
    self->_passthroughOffset.y = v20;
    MidX = v8 + v18;
    MidY = v10 + v20;
  }

  [v6 frame];
  x = v29.origin.x;
  y = v29.origin.y;
  width = v29.size.width;
  height = v29.size.height;
  if (MidX >= CGRectGetMaxX(v29))
  {
    v30.origin.x = x;
    v30.origin.y = y;
    v30.size.width = width;
    v30.size.height = height;
    MidX = CGRectGetMaxX(v30) + -1.0;
  }

  v31.origin.x = x;
  v31.origin.y = y;
  v31.size.width = width;
  v31.size.height = height;
  if (MidY >= CGRectGetMaxY(v31))
  {
    v32.origin.x = x;
    v32.origin.y = y;
    v32.size.width = width;
    v32.size.height = height;
    MidY = CGRectGetMaxY(v32) + -1.0;
  }

  self->_passthroughFinish.x = MidX;
  self->_passthroughFinish.y = MidY;
  v25 = +[VOTElement systemWideElement];
  [v27 touchForce];
  if (v4)
  {
    [v25 postFingerTouchAtPoint:0 withForce:MidX withContextId:{MidY, v26}];
  }

  else
  {
    [v25 postFingerDragAtPoint:0 withForce:MidX withContextId:{MidY, v26}];
  }
}

- (void)_switchToOtherRoad
{
  if (self->_upcomingRoadElement)
  {
    v8 = +[VOTOutputRequest createRequest];
    v3 = sub_1000511CC(off_1001FDDD0, @"map-interaction.switch.to.road", 0);
    [(VOTElementManager *)self _addFormattedStringToRequest:v8 formattedString:v3 withElement:self->_upcomingRoadElement];
    [(VOTElementManager *)self _setCurrentElement:self->_upcomingRoadElement];
    v4 = +[VOTDisplayManager displayManager];
    [v4 setCursorFrameForElement:self->_currentElement];

    [v8 send];
    upcomingRoadElement = self->_upcomingRoadElement;
    self->_upcomingRoadElement = 0;

    self->_firstRoadTravelPoint = self->_lastRoadTravelPoint;
    self->_switchedToRoadTime = CFAbsoluteTimeGetCurrent();
    self->_intersectionTravelPoint = CGPointZero;
    v6 = +[VOTOutputManager outputManager];
    v7 = +[VOSOutputEvent DidFocusOnElement];
    [v6 sendEvent:v7];
  }
}

- (void)_addFormattedStringToRequest:(id)a3 formattedString:(id)a4 withElement:(id)a5
{
  v19 = a3;
  v7 = a4;
  v8 = a5;
  v9 = [v8 label];
  if (v9)
  {
    v10 = v9;
  }

  else
  {
    v10 = &stru_1001CBF90;
  }

  v11 = AXCFormattedString();
  v12 = [AXAttributedString axAttributedStringWithString:v11, v10];
  v13 = [v8 language];

  if (v13)
  {
    v14 = [v7 length];
    v15 = [v11 length];
    v16 = v15 - [v7 length];
    v17 = [v8 language];
    [v12 setAttribute:v17 forKey:UIAccessibilityTokenLanguage withRange:{v14 + 1, v16}];
  }

  v18 = [v19 addAttributedString:v12];
}

- (void)_handleMapSameElement:(id)a3 forEvent:(id)a4
{
  v6 = a3;
  [a4 touchPoint];
  v8 = v7;
  v10 = v9;
  v11 = [v6 touchContainer];
  [v11 mapsExplorationRecordTouchpoint:{v8, v10}];

  if (self->_startTrackingRoadRequest)
  {
    self->_explorationStartPoint.x = v8;
    p_y = &self->_explorationStartPoint.y;
LABEL_50:
    *p_y = v10;
    goto LABEL_51;
  }

  if (self->_shouldContinueRoadTracking)
  {
    SCRCMathGetDistanceBetweenPoints();
    y = CGPointZero.y;
    if (CGPointZero.x == self->_lastRoadTravelPoint.x && y == self->_lastRoadTravelPoint.y)
    {
      goto LABEL_36;
    }

    v16 = v13;
    v17 = y == self->_firstRoadTravelPoint.y && CGPointZero.x == self->_firstRoadTravelPoint.x;
    v18 = !v17 && v16 <= 6.0;
    if (v18 || CFAbsoluteTimeGetCurrent() - self->_switchedToRoadTime <= 2.0)
    {
      goto LABEL_36;
    }

    v47[5] = 0;
    v47[6] = 0;
    SCRCMathGetVectorAndDistanceForPoints();
    SCRCMathUpdateAngleAverage();
    SCRCMathGetAverage();
    v20 = v19;
    *&v21 = v20;
    v22 = [(VOTElement *)self->_currentElement upcomingRoadsAtPoint:v8 withDirection:v10, v21];
    v23 = [v22 firstObject];
    if (v16 <= 20.0)
    {
      p_approachingEndOfRoad = &self->_approachingEndOfRoad;
      v26 = -1.0;
    }

    else
    {
      *&v24 = v20;
      [(VOTElement *)self->_currentElement distanceToEndOfRoad:v8 withDirection:v10, v24];
      v26 = v25;
      p_approachingEndOfRoad = &self->_approachingEndOfRoad;
      if (self->_approachingEndOfRoad && v25 > 20.0)
      {
        *p_approachingEndOfRoad = 0;
      }
    }

    v28 = [VOTSharedWorkspace selectedLanguage];
    if (v26 < 20.0 && v26 > 0.0 && !*p_approachingEndOfRoad)
    {
      v29 = +[VOTOutputRequest createRequest];
      endOfRoadApproachingRequest = self->_endOfRoadApproachingRequest;
      self->_endOfRoadApproachingRequest = v29;

      v31 = self->_endOfRoadApproachingRequest;
      v32 = sub_1000516CC(off_1001FDDD0, @"approaching.end.of.road", 0, v28);
      v33 = [(VOTOutputRequest *)v31 addString:v32 withLanguage:v28];

      self->_approachingEndOfRoad = 1;
      [(VOTOutputRequest *)self->_endOfRoadApproachingRequest setCompletionDelegate:self];
      [(VOTOutputRequest *)self->_endOfRoadApproachingRequest setDoesNotInterrupt:1];
      [(VOTOutputRequest *)self->_endOfRoadApproachingRequest send];
    }

    if (v23)
    {
      if (![(VOTElement *)self->_upcomingRoadElement isEqual:v23])
      {
        v34 = +[VOTOutputRequest createRequest];
        switchRoadsOutputRequest = self->_switchRoadsOutputRequest;
        self->_switchRoadsOutputRequest = v34;

        upcomingRoadElement = sub_1000516CC(off_1001FDDD0, @"map-interaction.upcoming.road.juncture", 0, v28);
        [(VOTElementManager *)self _addFormattedStringToRequest:self->_switchRoadsOutputRequest formattedString:upcomingRoadElement withElement:v23];
        v37 = [(VOTOutputRequest *)self->_switchRoadsOutputRequest lastAction];
        LODWORD(v38) = 1062836634;
        v39 = [NSNumber numberWithFloat:v38];
        [v37 setObject:v39 forVariant:32];

        if ([v22 count] == 2)
        {
          v40 = [v22 objectAtIndex:1];
          if (v40)
          {
            v41 = sub_1000511CC(off_1001FDDD0, @"map-interaction.next.road", 0);
            [(VOTElementManager *)self _addFormattedStringToRequest:self->_switchRoadsOutputRequest formattedString:v41 withElement:v40];
          }
        }

        [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCompletionDelegate:self];
        [(VOTOutputRequest *)self->_switchRoadsOutputRequest setDoesNotInterrupt:0];
        [(VOTOutputRequest *)self->_switchRoadsOutputRequest send];
        self->_intersectionTravelPoint.x = v8;
        self->_intersectionTravelPoint.y = v10;
        [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer cancel];
        objc_storeStrong(&self->_upcomingRoadElement, v23);
        goto LABEL_34;
      }
    }

    else if (!self->_switchRoadsOutputRequest)
    {
      upcomingRoadElement = self->_upcomingRoadElement;
      self->_upcomingRoadElement = 0;
LABEL_34:
    }

    self->_firstRoadTravelPoint = CGPointZero;

LABEL_36:
    if (self->_intersectionTravelPoint.x != CGPointZero.x || self->_intersectionTravelPoint.y != y)
    {
      SCRCMathGetDistanceBetweenPoints();
      if (v43 > 50.0 && self->_switchRoadsOutputRequest && self->_endOfRoadApproachingRequest)
      {
        v44 = +[VOTOutputManager outputManager];
        [v44 stopSpeakingAtBoundary:0];
      }
    }

    p_y = &self->_lastRoadTravelPoint.y;
    if (!self->_playingMapSound)
    {
      if ([v6 lastHitTestNearBorder])
      {
        v45 = @"Sounds/RoadWalkingNearBorder.aiff";
      }

      else
      {
        v45 = @"Sounds/RoadWalking.aiff";
      }

      self->_playingMapSound = 1;
      v46 = +[VOTOutputManager outputManager];
      v47[0] = _NSConcreteStackBlock;
      v47[1] = 3221225472;
      v47[2] = sub_1000930C4;
      v47[3] = &unk_1001C7890;
      v47[4] = self;
      [v46 playSoundFast:v45 completionBlock:v47];
    }

    self->_lastRoadTravelPoint.x = v8;
    goto LABEL_50;
  }

LABEL_51:
}

- (void)_echoSameElement:(id)a3 forEvent:(id)a4
{
  v7 = a3;
  v6 = a4;
  if ([v7 mapFeatureType] == 1)
  {
    [(VOTElementManager *)self _handleMapSameElement:v7 forEvent:v6];
  }
}

- (void)_echoNoElementForEvent:(id)a3
{
  [a3 time];
  v5 = v4;
  timeSpentOnNothing = self->_timeSpentOnNothing;
  if (timeSpentOnNothing == -3061152000.0)
  {
    p_timeSpentOnNothing = &self->_timeSpentOnNothing;
LABEL_6:
    *p_timeSpentOnNothing = v5;
    goto LABEL_7;
  }

  if (v5 - timeSpentOnNothing > 0.025)
  {
    p_timeSpentOnNothing = &self->_lastNothingSoundTime;
    if (v5 - self->_lastNothingSoundTime > 0.100000001)
    {
      v8 = +[VOTOutputManager outputManager];
      v9 = +[VOSOutputEvent NoItemExists];
      [v8 sendEvent:v9];

      v10 = +[VOTDisplayManager displayManager];
      [v10 setCursorFrameForElement:0];

      self->_timeSpentOnNothing = -3061152000.0;
      goto LABEL_6;
    }
  }

LABEL_7:
  self->_flags.elementCenterSoundPlaying = 0;
}

- (id)_echoDifferentTouchContainer:(id)a3 forEvent:(id)a4
{
  v6 = a3;
  v7 = a4;
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  v8 = [v6 isTouchContainer];
  if (sub_100050834() && v8)
  {
    if (![(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer isPending]|| [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer isCancelled])
    {
      [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer dispatchAfterDelay:0.5];
    }

    v9 = [(VOTElementManager *)self touchContainer];
    v10 = [v6 isEqual:v9];

    if (v10)
    {
      [(VOTElementManager *)self _echoNoElementForEvent:v7];
      v11 = +[NSNull null];
      goto LABEL_12;
    }

    if (([VOTSharedWorkspace containerOutputFeedback] & 4) != 0)
    {
      v12 = +[VOTOutputManager outputManager];
      v13 = +[VOSOutputEvent DidEnterTouchContainer];
      [v12 sendEvent:v13];
    }

    [(VOTElementManager *)self setTouchContainer:v6];
    [(VOTElementManager *)self _setCurrentElement:0];
    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
    [WeakRetained currentElementDidUpdate:self->_touchContainer];
  }

  v11 = [(VOTElementManager *)self _updateTouchContainerForElement:v6 playSound:1];
LABEL_12:
  v15 = v11;

  return v15;
}

- (BOOL)_addElementCommunityNameIfNeededToRequest:(id)a3 oldElementCommunity:(id)a4 newElementCommunity:(id)a5 element:(id)a6
{
  v10 = a3;
  v11 = a4;
  v12 = a5;
  v13 = a6;
  v14 = 0;
  if (v11 && v12)
  {
    if ([v12 isEqual:v11])
    {
      goto LABEL_5;
    }

    v15 = [(VOTElementManager *)self _sideAppDividerElement];
    v16 = [v12 isEqual:v15];

    if (v16)
    {
      goto LABEL_5;
    }

    v17 = [(VOTElementManager *)self _additionalElementCommunities];
    v18 = [(VOTElementManager *)self _currentMedusaApplications];
    if ([v18 count] > 1 || objc_msgSend(v17, "containsObject:", v12))
    {
    }

    else
    {
      v33 = [v17 containsObject:v11];

      if (!v33)
      {
LABEL_5:
        v14 = 0;
        goto LABEL_17;
      }
    }

    v19 = [v12 label];
    v20 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
    v21 = [v19 stringByTrimmingCharactersInSet:v20];

    v22 = [v21 length];
    v14 = v22 != 0;
    if (v22)
    {
      v23 = [v10 addString:v21];
      v24 = [v13 fbSceneIdentifier];
      if (v24)
      {
        v25 = [(VOTElementManager *)self _activeSceneIdentifier];
        v26 = [v24 isEqualToString:v25];

        if (v26)
        {
          v27 = sub_100053524(@"active.window");
          v28 = [v10 addString:v27];
        }
      }

      if ([VOTSharedWorkspace typingPitchChangeEnabled])
      {
        v29 = [v10 lastAction];
        LODWORD(v30) = 1062836634;
        v31 = [NSNumber numberWithFloat:v30];
        [v29 setObject:v31 forVariant:32];
      }
    }
  }

LABEL_17:

  return v14;
}

- (id)_getSpeakableContainerForContainer:(id)a3
{
  v3 = a3;
  v4 = [v3 label];
  v5 = [v4 length];

  if (v5)
  {
    v6 = v3;
  }

  else
  {
    v6 = [v3 touchContainerParent];
    if (v6)
    {
      do
      {
        v8 = [v6 label];
        v9 = [v8 length];

        if (v9)
        {
          break;
        }

        v10 = [v6 touchContainerParent];
        v11 = [v10 isEqual:v6];

        if (v11)
        {

          v6 = 0;
          break;
        }

        v6 = v10;
      }

      while (v10);
    }
  }

  return v6;
}

- (void)_echoDifferentElement:(id)a3 forEvent:(id)a4 onlyOutputTouchContainerAndSounds:(BOOL)a5 canSetAsCurrentElement:(BOOL)a6 shouldPlayGuideWireSound:(BOOL)a7 isProtectedApp:(BOOL)a8 includeHint:(BOOL)a9 boundaryHit:(BOOL)a10
{
  v94 = a8;
  v10 = a7;
  v11 = a6;
  v15 = a3;
  v16 = a4;
  if ([VOTSharedWorkspace navigationStyleHonorsGroups] && (objc_msgSend(v15, "isAccessibleGroup") & 1) != 0)
  {
    v17 = [v16 command];
    v18 = [v17 isEqualToString:kVOTEventCommandTracking];

    v19 = [v15 isTouchContainer] & v18;
    if (!v18)
    {
      v97 = 0;
      v20 = 0;
      v21 = 0;
      if (!v10)
      {
        goto LABEL_12;
      }

LABEL_10:
      if ([v15 shouldPlaySoundWhenFocused])
      {
        v23 = +[VOTOutputManager outputManager];
        v24 = +[VOSOutputEvent DidFocusOnElement];
        [v23 sendEvent:v24];
      }

LABEL_12:
      if (sub_100050834() && ([v15 isAccessibleElement] & 1) == 0)
      {
        v25 = v21 & [v15 isTouchContainer];
      }

      else
      {
        v25 = 0;
      }

      v96 = [(VOTElementManager *)self _currentElement];
      v95 = [(VOTElementManager *)self mostRecentElementCommunity];
      if (AXDeviceHasJindo())
      {
        jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
        v27 = [v15 bundleIdentifier];
        if (-[NSArray containsObject:](jindoAppBundleIdentifiers, "containsObject:", v27) && ([v15 isInJindoWindow] & 1) == 0)
        {
          v51 = [v15 isInAppSwitcher];

          if ((v51 & 1) == 0)
          {
LABEL_110:

            goto LABEL_111;
          }
        }

        else
        {
        }
      }

      if (((v25 | !v11) & 1) == 0)
      {
        [(VOTElementManager *)self _setCurrentElement:v15 isProtectedApp:v94];
      }

      if ((v19 | !v11))
      {
        [(VOTElementRotor *)self->_elementRotor updateRotorForElement:v15 shouldPreserveRotorNavigation:0 firstResponder:self->_firstResponderElement];
        if (a5)
        {
          goto LABEL_97;
        }
      }

      else
      {
        v28 = +[VOTDisplayManager displayManager];
        [v28 setCursorFrameForElement:v15];

        [(SCRCTargetSelectorTimer *)self->_containerFrameDrawingTimer cancel];
        if (a5)
        {
          goto LABEL_97;
        }
      }

      v29 = +[VOTOutputManager outputManager];
      [v29 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

      v30 = [objc_allocWithZone(VOTOutputRequest) init];
      if ([v16 isGuideElementMovementEvent])
      {
        v31 = [v15 guideElementHeaderText];
        if ([v31 length] && (objc_msgSend(v31, "isEqualToString:", self->_lastSpokenGuideElementHeaderText) & 1) == 0)
        {
          v32 = [[AXAttributedString alloc] initWithString:v31];
          [v32 setAttribute:&off_1001D9A30 forKey:AXUIAccessibilitySpeechAttributePitch];
          v33 = [v30 addAttributedString:v32];
          objc_storeStrong(&self->_lastSpokenGuideElementHeaderText, v31);
        }
      }

      v92 = [(VOTElementManager *)self _elementCommunityForElement:v15];
      [VOTElementManager _addElementCommunityNameIfNeededToRequest:"_addElementCommunityNameIfNeededToRequest:oldElementCommunity:newElementCommunity:element:" oldElementCommunity:v30 newElementCommunity:v95 element:?];
      v34 = kAXWebContentTrait;
      if ([v15 doesHaveAllTraits:kAXWebContentTrait])
      {
        v35 = [v15 containedIn:1];
      }

      else
      {
        v35 = 0;
      }

      v93 = v30;
      if ([v15 doesHaveAllTraits:v34] && objc_msgSend(v15, "containedIn:", 8))
      {
        v36 = [v15 label];
        v37 = [v20 label];
        v38 = [v36 isEqual:v37];
      }

      else
      {
        v38 = 0;
      }

      v39 = [(VOTElementManager *)self _getSpeakableContainerForContainer:v20];
      v40 = [(VOTElementManager *)self _getSpeakableContainerForContainer:v97];
      v41 = [v16 command];
      v42 = [v41 isEqualToString:kVOTEventCommandMoveIn];

      if (v42)
      {
        v43 = [v15 groupedParent];

        v20 = v43;
        v40 = 0;
        v39 = v20;
      }

      v89 = v40;
      if (v20 && (([v20 isEqual:{v15, v40}] | v35 | v38) & 1) == 0)
      {
        v44 = [v39 isEqual:v40] ^ 1;
        if (!v39)
        {
          LOBYTE(v44) = 1;
        }
      }

      else
      {
        LOBYTE(v44) = 0;
      }

      if (v39)
      {
        v45 = v42;
      }

      else
      {
        v45 = 0;
      }

      if ((v44 & 1) != 0 || v45)
      {
        v46 = sub_100050834();
        v47 = 0x4000;
        if (v46)
        {
          v47 = 16386;
        }

        v48 = 0x1000000000;
        if (!v45)
        {
          v48 = 0;
        }

        v49 = v47 | v48;
        if (v39)
        {
          v50 = v39;

          v20 = v50;
        }

        else if (![v20 includeRoleOnlyForGroupNavigation])
        {
          v49 |= 0x1000000uLL;
        }

        v52 = [VOTSharedWorkspace containerOutputFeedback];
        v91 = v20;
        if ((v52 & 2) != 0)
        {
          [(VOTElementManager *)self _addDescription:v20 toRequest:v93 withOptions:v49];
          if ((v52 & 8) != 0 && [VOTSharedWorkspace typingPitchChangeEnabled])
          {
            v53 = [v93 lastAction];
            LODWORD(v54) = 1062836634;
            v55 = [NSNumber numberWithFloat:v54];
            [v53 setObject:v55 forVariant:32];
          }

          v56 = [v93 lastAction];
          [v56 setObject:&__kCFBooleanTrue forVariant:68];
        }
      }

      else
      {
        v91 = v20;
      }

      v57 = [v15 keyboardKeyAllowsTouchTyping];
      if (a10)
      {
        v58 = 0x20000000;
      }

      else
      {
        v58 = 0;
      }

      v59 = [v16 command];
      v60 = [v59 isEqualToString:kVOTEventCommandMoveOut];

      if (v60)
      {
        v58 |= 0x2000000000uLL;
      }

      if (a9)
      {
        v61 = [(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:v15];
        v62 = 2050;
        if (v61)
        {
          v62 = 0x200000802;
        }

        v58 |= v62;
      }

      v63 = [(AXDragManager *)self->_dragManager isDragActive];
      [(VOTElementManager *)self _prepareElementOutputHeaders:v15 currentElement:v96 request:v93];
      v64 = [v15 blockquoteLevel];
      v65 = [v96 blockquoteLevel];
      if (!v94)
      {
        v66 = 0x40000000;
        if (!v63)
        {
          v66 = 0;
        }

        v67 = v66 | v58;
        if (v64 != v65)
        {
          v67 |= 0x20000uLL;
        }

        [(VOTElementManager *)self _addDescription:v15 toRequest:v93 withOptions:v67 | 0x800000];
      }

      if (v57)
      {
        self->_touchTypingStartTime = CFAbsoluteTimeGetCurrent();
        self->_flags.didTouchTypingOutputStart = 1;
        v68 = v39;
        v20 = v91;
        if ([VOTSharedWorkspace typingMode] - 1 <= 1)
        {
          v69 = [v15 application];
          v70 = [v69 activeKeyboard];
          v71 = [v70 isKeyboardContinuousPathAvailable];

          if (v71)
          {
            Current = CFAbsoluteTimeGetCurrent();
            v103[0] = _NSConcreteStackBlock;
            v103[1] = 3221225472;
            v103[2] = sub_1000942AC;
            v103[3] = &unk_1001C9E98;
            v104 = v15;
            v105 = self;
            v106 = Current;
            [v93 setActionCompletionBlock:v103];
          }

          v100[0] = _NSConcreteStackBlock;
          v100[1] = 3221225472;
          v100[2] = sub_1000944D4;
          v100[3] = &unk_1001C9EC0;
          v102 = v71;
          v100[4] = self;
          v73 = v15;
          v101 = v73;
          [v93 setCompletionBlock:v100];
          if (([VOTSharedWorkspace typingMode] == 2 || (objc_msgSend(v73, "doesHaveTraits:", kAXDeleteKeyTrait) & 1) == 0) && objc_msgSend(v73, "allowsAutoAlternativeCharacterActivation"))
          {
            self->_flags.shouldTriggerAlternativeKeyActivation = 1;
          }
        }
      }

      else
      {
        [(VOTElementManager *)self _setPreviousTouchTypingKey:0];
        v68 = v39;
        v20 = v91;
      }

      if ([v15 isBannerNotification])
      {
        v98[0] = _NSConcreteStackBlock;
        v98[1] = 3221225472;
        v98[2] = sub_10009453C;
        v98[3] = &unk_1001C9EE8;
        v99 = v15;
        [v93 setCompletionBlock:v98];
      }

      [(VOTElementManager *)self sendRequest:v93];
      if ([v15 doesHaveTraits:kAXLinkTrait])
      {
        v74 = [v15 url];

        if (v74)
        {
          [v15 frame];
          [(VOTElementManager *)self _outputDataDetectorIfPresent:v15 element:0 includeLinks:?];
        }
      }

LABEL_97:
      v75 = [v15 application];
      if ([(NSArray *)self->_currentApplications containsObject:v75])
      {
        goto LABEL_104;
      }

      v76 = CFAbsoluteTimeGetCurrent();
      [(VOTElementManager *)self lastTrackingUpdateAppsFailureTime];
      if (v76 - v77 > 0.25)
      {
        [(VOTElementManager *)self setLastTrackingUpdateAppsFailureTime:-3061152000.0];
        [(VOTElementManager *)self setLastTrackingUpdateAppsFailureApplication:0];
      }

      v78 = [(VOTElementManager *)self lastTrackingUpdateAppsFailureApplication];
      if (([v78 isEqual:v75] & 1) == 0)
      {
        v79 = [(VOTElementManager *)self _sideAppDividerElement];
        v80 = [v79 isEqual:v15];

        if (v80)
        {
          goto LABEL_103;
        }

        v88 = +[VOTWorkspace sharedWorkspace];
        v78 = [v88 focusedApplications];

        objc_storeStrong(&self->_currentApplications, v78);
        if (![(NSArray *)self->_currentApplications containsObject:v75])
        {
          [(VOTElementManager *)self setLastTrackingUpdateAppsFailureTime:v76];
          [(VOTElementManager *)self setLastTrackingUpdateAppsFailureApplication:v75];
        }
      }

LABEL_103:
      [(VOTElementManager *)self _handleKeyboardChangedNotification];
LABEL_104:
      if ([v15 mapFeatureType] == 1 && !self->_shouldContinueRoadTracking)
      {
        v81 = +[VOTOutputRequest createRequest];
        startTrackingRoadRequest = self->_startTrackingRoadRequest;
        self->_startTrackingRoadRequest = v81;

        v83 = [VOTSharedWorkspace selectedLanguage];
        v84 = sub_1000516CC(off_1001FDDD0, @"map.follow.road.hint", 0, v83);
        v85 = [(VOTOutputRequest *)self->_startTrackingRoadRequest addString:v84 withLanguage:v83];
        [(VOTOutputRequest *)self->_startTrackingRoadRequest setDoesNotInterrupt:1];
        [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:self];
        [(VOTElementManager *)self sendRequest:self->_startTrackingRoadRequest];
      }

      if ([v15 doesHaveTraits:kAXKeyboardKeyTrait])
      {
        self->_flags.usePenumbraForKeyboardKeys = 1;
      }

      self->_flags.elementCenterSoundPlaying = 0;
      [v16 touchPoint];
      self->_firstRoadTravelPoint.x = v86;
      self->_firstRoadTravelPoint.y = v87;
      self->_approachingEndOfRoad = 0;

      goto LABEL_110;
    }
  }

  else
  {
    v19 = [v15 isTouchContainer];
  }

  v97 = [(VOTElementManager *)self touchContainer];
  v20 = [(VOTElementManager *)self _echoDifferentTouchContainer:v15 forEvent:v16];
  v22 = +[NSNull null];

  if (v20 != v22)
  {
    v21 = 1;
    if ((sub_100050834() & v19 & 1) != 0 || !v10)
    {
      goto LABEL_12;
    }

    goto LABEL_10;
  }

LABEL_111:
}

- (id)_updateTouchContainerForElement:(id)a3 playSound:(BOOL)a4
{
  v4 = a4;
  v6 = a3;
  v7 = [(VOTElementManager *)self touchContainer];
  v8 = [v6 touchContainerAXElement];

  v9 = [v7 uiElement];
  v10 = [v9 axElement];

  if (v8 && v10 && CFEqual(v8, v10))
  {
    v11 = 0;
  }

  else
  {
    v12 = [AXUIElement uiElementWithAXElement:v8];
    v11 = [VOTElement elementWithUIElement:v12];

    if (v4 && sub_100050834() && v11 && ([VOTSharedWorkspace containerOutputFeedback] & 4) != 0)
    {
      v13 = +[VOTOutputManager outputManager];
      v14 = +[VOSOutputEvent DidEnterTouchContainer];
      [v13 sendEvent:v14];
    }

    [(VOTElementManager *)self setTouchContainer:v11];
  }

  self->_touchContainersTouchedCount = 0;

  return v11;
}

- (double)_alternativeKeyActivateTime
{
  v2 = [(VOTElement *)self->_currentElement application];
  v3 = [v2 currentSoftwareKeyboardLayout];

  v4 = sub_1000529CC(v3);
  return v4;
}

- (void)_outputRequestFinished:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_bookPageContentOutputRequest == v4)
  {
    if ([(VOTOutputRequest *)v4 finishedSuccessfully])
    {
      if ([(VOTElementManager *)self _handleMoreBookContentElements])
      {
        goto LABEL_36;
      }

      v7 = [(VOTElementManager *)self _currentElement];
      if ([v7 readingContentCausesPageTurn])
      {

LABEL_28:
        [(VOTElementManager *)self _handleBookPageFlipAndContinue];
        goto LABEL_29;
      }

      v14 = [(VOTElementManager *)self _currentElement];
      v15 = [v14 includeDuringContentReading];

      if (v15)
      {
        goto LABEL_28;
      }
    }

LABEL_29:
    [(VOTOutputRequest *)self->_bookPageContentOutputRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_bookPageContentOutputRequest;
    self->_bookPageContentOutputRequest = 0;
    goto LABEL_30;
  }

  if (self->_readAllOutputRequest == v4)
  {
    if (!self->_flags.isReadingAll)
    {
LABEL_35:
      [(VOTElementManager *)self _resetReadAllRequest];
      goto LABEL_36;
    }

    if ([(VOTOutputRequest *)v4 finishedSuccessfully])
    {
      v8 = [(VOTElementManager *)self _currentElement];
      v9 = [v8 readingContentCausesPageTurn];

      if (v9)
      {
LABEL_19:
        [(VOTElementManager *)self _handleBookPageFlipAndContinue];
        goto LABEL_35;
      }

      v16 = [(VOTElementManager *)self _currentElement];
      v17 = [v16 includeDuringContentReading];

      if (v17)
      {
        v18 = [(VOTElementManager *)self _currentElement];
        v19 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C9F08 startElement:v18 forward:1];

        if (!v19)
        {
          goto LABEL_19;
        }
      }
    }

    [(VOTElementManager *)self _handleReadAllNextElement];
    goto LABEL_35;
  }

  if (self->_switchRoadsOutputRequest == v4)
  {
    if ([(VOTOutputRequest *)v4 finishedSuccessfully])
    {
      [(SCRCTargetSelectorTimer *)self->_switchRoadsAtIntersectionTimer dispatchAfterDelay:0.01];
    }

    [(VOTOutputRequest *)self->_switchRoadsOutputRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_switchRoadsOutputRequest;
    self->_switchRoadsOutputRequest = 0;
    goto LABEL_30;
  }

  endOfRoadApproachingRequest = self->_endOfRoadApproachingRequest;
  if (endOfRoadApproachingRequest == v4)
  {
    [(VOTOutputRequest *)endOfRoadApproachingRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_endOfRoadApproachingRequest;
    self->_endOfRoadApproachingRequest = 0;
LABEL_30:

    goto LABEL_36;
  }

  if (self->_startTrackingRoadRequest == v4)
  {
    if ([(VOTOutputRequest *)v4 finishedSuccessfully])
    {
      *&self->_playingMapSound = 256;
      v11 = +[VOTOutputManager outputManager];
      [v11 playSoundFast:@"Sounds/RoadWalking.aiff"];

      v12 = +[VOTOutputRequest createRequest];
      v13 = sub_1000511CC(off_1001FDDD0, @"map-interaction.switch.to.road", 0);
      [(VOTElementManager *)self _addFormattedStringToRequest:v12 formattedString:v13 withElement:self->_currentElement];
      [(VOTElementManager *)self sendRequest:v12];
    }

    [(VOTOutputRequest *)self->_startTrackingRoadRequest setCompletionDelegate:0];
    bookPageContentOutputRequest = self->_startTrackingRoadRequest;
    self->_startTrackingRoadRequest = 0;
    goto LABEL_30;
  }

  if (self->_announcementRequest == v4)
  {
    if (self->_announcementPid == -1)
    {
      v20 = +[VOTElement systemAppApplication];
      v21 = [v20 focusedApplications];

      v31 = 0u;
      v32 = 0u;
      v29 = 0u;
      v30 = 0u;
      v6 = v21;
      v22 = [v6 countByEnumeratingWithState:&v29 objects:v33 count:16];
      if (v22)
      {
        v23 = v22;
        v24 = *v30;
        do
        {
          v25 = 0;
          do
          {
            if (*v30 != v24)
            {
              objc_enumerationMutation(v6);
            }

            [*(*(&v29 + 1) + 8 * v25) notifyAnnouncementFinishedWithString:self->_announcementOriginalString didFinishSuccessfully:{-[VOTOutputRequest finishedSuccessfully](v4, "finishedSuccessfully", v29)}];
            v25 = v25 + 1;
          }

          while (v23 != v25);
          v23 = [v6 countByEnumeratingWithState:&v29 objects:v33 count:16];
        }

        while (v23);
      }
    }

    else
    {
      v6 = [VOTSharedWorkspace applicationForPID:?];
      [v6 notifyAnnouncementFinishedWithString:self->_announcementOriginalString didFinishSuccessfully:{-[VOTOutputRequest finishedSuccessfully](v4, "finishedSuccessfully")}];
    }

    [(VOTOutputRequest *)self->_announcementRequest setCompletionDelegate:0];
    announcementRequest = self->_announcementRequest;
    self->_announcementRequest = 0;

    self->_announcementPid = -1;
    announcementOriginalString = self->_announcementOriginalString;
    self->_announcementOriginalString = 0;

    if (self->_readAllOutputRequest)
    {
      v28 = +[VOTOutputManager outputManager];
      [v28 resumeCurrentRequest];
    }
  }

LABEL_36:
}

- (id)_cachedLaunchIcon:(id)a3
{
  v4 = a3;
  v5 = [(NSMutableArray *)self->_cachedLaunchIcons lastObject];
  v6 = [v4 uniqueIdentification];
  v7 = [v5 isEqual:v6];

  if (v7)
  {
    v8 = v4;
  }

  else
  {
    v9 = [v4 elementsInDirection:1 withCount:28];
    v10 = [(NSMutableArray *)self->_cachedLaunchIcons lastObject];
    v18 = 0u;
    v19 = 0u;
    v20 = 0u;
    v21 = 0u;
    v11 = v9;
    v8 = [v11 countByEnumeratingWithState:&v18 objects:v22 count:16];
    if (v8)
    {
      v12 = *v19;
      while (2)
      {
        for (i = 0; i != v8; i = i + 1)
        {
          if (*v19 != v12)
          {
            objc_enumerationMutation(v11);
          }

          v14 = *(*(&v18 + 1) + 8 * i);
          v15 = [v14 uniqueIdentification];
          v16 = [v10 isEqual:v15];

          if (v16)
          {
            v8 = v14;
            goto LABEL_13;
          }
        }

        v8 = [v11 countByEnumeratingWithState:&v18 objects:v22 count:16];
        if (v8)
        {
          continue;
        }

        break;
      }
    }

LABEL_13:
  }

  return v8;
}

- (BOOL)_reDispatchUpdateAppFromTimerIfBundlesAreNotReady
{
  v3 = +[VOTWorkspace sharedWorkspace];
  v4 = [v3 focusedApplications];

  v16 = 0u;
  v17 = 0u;
  v14 = 0u;
  v15 = 0u;
  v5 = v4;
  v6 = [v5 countByEnumeratingWithState:&v14 objects:v18 count:16];
  if (v6)
  {
    v7 = *v15;
    while (2)
    {
      for (i = 0; i != v6; i = i + 1)
      {
        if (*v15 != v7)
        {
          objc_enumerationMutation(v5);
        }

        v9 = *(*(&v14 + 1) + 8 * i);
        v10 = [v9 uiElement];
        [v10 updateCache:3045];

        v11 = [v9 uiElement];
        LOBYTE(v10) = [v11 BOOLWithAXAttribute:3045];

        if ((v10 & 1) == 0)
        {
          v12 = CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime;
          LOBYTE(v6) = v12 < 1.0;
          if (v12 < 1.0)
          {
            [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer dispatchAfterDelay:0.300000012];
            LOBYTE(v6) = 1;
          }

          goto LABEL_12;
        }
      }

      v6 = [v5 countByEnumeratingWithState:&v14 objects:v18 count:16];
      if (v6)
      {
        continue;
      }

      break;
    }
  }

LABEL_12:

  return v6;
}

- (void)_handleUpdateAppFromTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (![(VOTElementManager *)self _reDispatchUpdateAppFromTimerIfBundlesAreNotReady])
  {
    v3 = [(VOTElementManager *)self _shouldSuppressSpeechForPlayPause];
    v4 = &kCFBooleanFalse;
    if (!v3)
    {
      v4 = &kCFBooleanTrue;
    }

    v5 = *v4;

    [(VOTElementManager *)self _updateApplicationAndSpeak:v5];
  }
}

- (void)updateApplicationAndSpeak:(id)a3
{
  v4 = a3;
  if (!v4)
  {
    v4 = kCFBooleanFalse;
  }

  v5 = v4;
  [(SCRCThread *)self->_elementManagerThread performSelector:"_updateApplicationAndSpeak:" onTarget:self count:1 objects:v4, 0];
}

- (id)_firstResponderForApplications:(id)a3
{
  v11 = 0u;
  v12 = 0u;
  v13 = 0u;
  v14 = 0u;
  v3 = a3;
  v4 = [v3 countByEnumeratingWithState:&v11 objects:v15 count:16];
  if (v4)
  {
    v5 = v4;
    v6 = *v12;
    while (2)
    {
      for (i = 0; i != v5; i = i + 1)
      {
        if (*v12 != v6)
        {
          objc_enumerationMutation(v3);
        }

        v8 = [*(*(&v11 + 1) + 8 * i) firstResponderElementForFocus];
        if (v8)
        {
          v9 = v8;
          goto LABEL_11;
        }
      }

      v5 = [v3 countByEnumeratingWithState:&v11 objects:v15 count:16];
      if (v5)
      {
        continue;
      }

      break;
    }
  }

  v9 = 0;
LABEL_11:

  return v9;
}

- (id)_firstElementForFocusFromElementCommunities:(id)a3 currentElement:(id)a4
{
  v6 = a3;
  v7 = a4;
  if (v7)
  {
    [(VOTElementManager *)self _elementCommunityForElement:v7];
  }

  else
  {
    [(VOTElementManager *)self mostRecentElementCommunity];
  }
  v8 = ;
  if ([v6 containsObject:v8])
  {
    v9 = [(VOTElementManager *)self _sideAppDividerElement];
    v10 = [v8 isEqual:v9];

    if (v10)
    {
      v11 = v8;
    }

    else
    {
      v12 = [v8 firstElementInApplicationForFocus];
      if (v12)
      {
        goto LABEL_11;
      }

      v11 = [v8 firstElementInApplication];
    }

    v12 = v11;
    if (v11)
    {
LABEL_11:
      if ([v12 isAccessibleElement])
      {
        goto LABEL_24;
      }
    }
  }

  else
  {
    v12 = 0;
  }

  v23 = 0u;
  v24 = 0u;
  v21 = 0u;
  v22 = 0u;
  v13 = v6;
  v14 = [v13 countByEnumeratingWithState:&v21 objects:v25 count:16];
  if (!v14)
  {
    goto LABEL_23;
  }

  v15 = v14;
  v16 = *v22;
  do
  {
    for (i = 0; i != v15; i = i + 1)
    {
      if (*v22 != v16)
      {
        objc_enumerationMutation(v13);
      }

      v18 = *(*(&v21 + 1) + 8 * i);
      v19 = [v18 firstElementInApplicationForFocus];

      if (v19)
      {
        v12 = v19;
      }

      else
      {
        v12 = [v18 firstElementInApplication];
        if (!v12)
        {
          continue;
        }
      }

      if ([v12 isAccessibleElement])
      {
        goto LABEL_23;
      }
    }

    v15 = [v13 countByEnumeratingWithState:&v21 objects:v25 count:16];
  }

  while (v15);
LABEL_23:

LABEL_24:

  return v12;
}

- (id)_elementCommunityForElement:(id)a3
{
  v4 = a3;
  v5 = [v4 application];
  v6 = [(VOTElementManager *)self _sideAppDividerElement];
  if ([v4 isEqual:v6])
  {
    v7 = v6;
  }

  else
  {
    v7 = [v4 elementCommunity];
  }

  v8 = v7;

  return v8;
}

- (void)_cacheFocusedElement:(id)a3 forElementCommunity:(id)a4
{
  v6 = a3;
  v10 = [a4 elementCommunityIdentifier];
  v7 = [v6 uiElement];

  v8 = [v7 axElement];
  v9 = v10;
  if (v8 && v10)
  {
    [(NSMutableDictionary *)self->_focusedElementsByElementCommunityIdentifier setObject:v8 forKey:v10];
    v9 = v10;
  }
}

- (id)_retrieveCachedFocusedElementForElementCommunity:(id)a3
{
  v4 = a3;
  v5 = [v4 elementCommunityIdentifier];
  if (v5 && (v6 = [(NSMutableDictionary *)self->_focusedElementsByElementCommunityIdentifier objectForKey:v5]) != 0)
  {
    v7 = [AXUIElement uiElementWithAXElement:v6];
    v8 = [VOTElement elementWithUIElement:v7];

    v9 = [v4 application];
    v10 = [v9 uiElement];
    v11 = [v10 pid];
    v12 = [v8 uiElement];
    v13 = [v12 pid];

    if (v11 != v13)
    {
      v14 = [v8 uiElement];
      [v14 axElement];
      v15 = AXUICreateApplicationElementForElement();

      if (v15)
      {
        v16 = [AXUIElement uiElementWithAXElement:v15];
        v17 = [VOTElement elementWithUIElement:v16];

        CFRelease(v15);
        v9 = v17;
      }
    }

    if ([v8 isValidForApplication:v9])
    {
      v18 = v8;
    }

    else
    {
      [(NSMutableDictionary *)self->_focusedElementsByElementCommunityIdentifier removeObjectForKey:v5];
      v18 = 0;
    }
  }

  else
  {
    v18 = 0;
  }

  return v18;
}

- (BOOL)_addApplicationLabelsAndSummariesToRequest:(id)a3 applicationNames:(id *)a4 summaryElements:(id *)a5
{
  v8 = a3;
  v9 = +[NSMutableArray array];
  v10 = +[NSMutableArray array];
  v24 = 0;
  v25 = &v24;
  v26 = 0x2020000000;
  v27 = 0;
  currentApplications = self->_currentApplications;
  v19[0] = _NSConcreteStackBlock;
  v19[1] = 3221225472;
  v19[2] = sub_1000958D4;
  v19[3] = &unk_1001C9F30;
  v19[4] = self;
  v12 = v8;
  v20 = v12;
  v13 = v9;
  v21 = v13;
  v23 = &v24;
  v14 = v10;
  v22 = v14;
  [(NSArray *)currentApplications enumerateObjectsUsingBlock:v19];
  if (a4)
  {
    v15 = v13;
    *a4 = v13;
  }

  if (a5)
  {
    v16 = v14;
    *a5 = v14;
  }

  v17 = *(v25 + 24);

  _Block_object_dispose(&v24, 8);
  return v17;
}

- (BOOL)_isWebAppStillOpen
{
  v2 = [(NSArray *)self->_currentApplications ax_filteredArrayUsingBlock:&stru_1001C9F50];
  v3 = [v2 count] != 0;

  return v3;
}

- (void)_updateApplicationAndSpeak:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self nextElementToFocus];
  [(VOTElementManager *)self setNextElementToFocus:0];
  v6 = [(VOTElementManager *)self nextStringToSpeakOnScreenChange];
  v7 = [v6 copy];

  [(VOTElementManager *)self setNextStringToSpeakOnScreenChange:0];
  v8 = VOTLogLayoutChange();
  if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
  {
    sub_10012BD7C();
  }

  if ([VOTSharedWorkspace screenOn])
  {
    v9 = VOTLogElement();
    if (os_signpost_enabled(v9))
    {
      *buf = 0;
      _os_signpost_emit_with_name_impl(&_mh_execute_header, v9, OS_SIGNPOST_EVENT, 0xEEEEB0B5B2B2EEEELL, "BeginAppUpdate", "", buf, 2u);
    }

    AXPerformBlockOnMainThreadAfterDelay();
    v10 = CFAbsoluteTimeGetCurrent() - self->_lastPopupTime;
    v11 = [(VOTElementManager *)self _currentElement];
    if ([VOTSharedWorkspace tapAndHoldMode])
    {
      if (v10 >= 1.25)
      {
        v12 = [v11 application];
        v13 = [v11 isValidForApplication:v12];

        if (v13)
        {
          goto LABEL_359;
        }
      }
    }

    v14 = +[VOTElement springBoardApplication];
    if ([v14 isSystemSleeping])
    {
      v15 = +[VOTWorkspace sharedWorkspace];
      v16 = [v15 currentCallState];

      if (!v16)
      {
        [(VOTElementManager *)self _closeItemChooser];
        [(VOTElementManager *)self _setCurrentElement:0];
        [(VOTElementFetcher *)self->_fetchManager forceUpdate];
        [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
        v19 = +[VOTDisplayManager displayManager];
        [v19 setCursorFrameForElement:0];
        goto LABEL_26;
      }
    }

    v17 = +[VOTWorkspace sharedWorkspace];
    if ([v17 currentCallState] == 1 && _AXSVoiceOverTouchShouldRouteToSpeakerWithProximity())
    {

      if (!v5)
      {
        v18 = VOTLogCommon();
        if (os_log_type_enabled(v18, OS_LOG_TYPE_INFO))
        {
          *buf = 0;
          _os_log_impl(&_mh_execute_header, v18, OS_LOG_TYPE_INFO, "Staying on current element because we're in a phone call and the proximity sensor is causing the screen to go off and on", buf, 2u);
        }

        v5 = self->_currentElement;
      }
    }

    else
    {
    }

    if (([v14 isVoiceControlRunning] & 1) != 0 || objc_msgSend(v14, "isSystemWideGestureInProgress"))
    {
      v19 = +[VOTOutputManager outputManager];
      [v19 stopSpeakingAtBoundary:0];
LABEL_26:

      byte_1001FECE8 = 0;
LABEL_358:

LABEL_359:
      goto LABEL_360;
    }

    v20 = +[VOTWorkspace sharedWorkspace];
    v21 = [v20 focusedApplications];

    v22 = VOTLogLayoutChange();
    if (os_log_type_enabled(v22, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BDEC();
    }

    v329 = [VOTSharedWorkspace fingerCount];
    if ([v4 BOOLValue])
    {
      v342 = [objc_allocWithZone(VOTOutputRequest) init];
    }

    else
    {
      v342 = 0;
    }

    p_currentApplications = &self->_currentApplications;
    v24 = [(NSArray *)self->_currentApplications isEqualToArray:v21];
    v25 = [v11 application];
    v340 = v25;
    if (v25)
    {
      v26 = [v21 containsObject:v25];
    }

    else
    {
      v26 = 0;
    }

    v334 = &self->_currentApplications;
    if (![(VOTElementManager *)self _isWebAppStillOpen])
    {
      v27 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v27, OS_LOG_TYPE_DEBUG))
      {
        sub_10012BE58();
      }

      [(VOTElementManager *)self _clearWebLoadedSound];
      p_currentApplications = &self->_currentApplications;
    }

    v324 = v24;
    if (v24)
    {
      Current = CFAbsoluteTimeGetCurrent();
      [(VOTElementManager *)self lastPauseSpeechAndHapticsStart];
      if (Current - v29 > 30.0)
      {
        [(VOTElementManager *)self _handlePauseSpeechAndHapticsNotification:&__kCFBooleanFalse];
      }

      v338 = 0;
      v339 = 0;
      v325 = 0;
    }

    else
    {
      objc_storeStrong(p_currentApplications, v21);
      v349 = 0;
      v350 = 0;
      v325 = [(VOTElementManager *)self _addApplicationLabelsAndSummariesToRequest:v342 applicationNames:&v350 summaryElements:&v349];
      v338 = v350;
      v339 = v349;
      v30 = CFAbsoluteTimeGetCurrent();
      [(VOTElementManager *)self lastDuckingDisablementSessionStart];
      if (v30 - v31 > 1.0)
      {
        [(VOTElementManager *)self _handleDuckingDisabling:&__kCFBooleanFalse];
      }

      [(VOTElementManager *)self _handlePauseSpeechAndHapticsNotification:&__kCFBooleanFalse];
      elementBeforePopup = self->_elementBeforePopup;
      self->_elementBeforePopup = 0;

      v33 = VOTLogCommon();
      if (os_log_type_enabled(v33, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v33, OS_LOG_TYPE_INFO, "Application is no longer valid, resetting", buf, 2u);
      }
    }

    currentApplications = self->_currentApplications;
    v35 = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
    LOBYTE(currentApplications) = [(NSArray *)currentApplications containsObject:v35];

    if ((currentApplications & 1) == 0)
    {
      self->_previousTableOrCollectionViewRowTime = -3061152000.0;
      v36 = [(VOTElementManager *)self previousTableOrCollectionViewList];
      [v36 removeAllObjects];

      v37 = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
      [v37 removeAllObjects];

      [(VOTElementManager *)self setPreviousTableOrCollectionViewApplication:0];
    }

    if ((v26 & 1) == 0)
    {
      lastScrollStatus = self->_lastScrollStatus;
      self->_lastScrollStatus = 0;
    }

    p_currentElement = &self->_currentElement;
    v39 = [(VOTElement *)self->_currentElement verifyElementExists:0];
    v40 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v40, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BE94(p_currentElement, v39);
    }

    v41 = CFAbsoluteTimeGetCurrent();
    [(VOTElementManager *)self lastUserElementTouchTime];
    if (((v41 - v42 < 1.0) & v39) == 1)
    {
      p_super = VOTLogCommon();
      if (os_log_type_enabled(p_super, OS_LOG_TYPE_INFO))
      {
        v44 = *p_currentElement;
        *buf = 138412290;
        *v352 = v44;
        _os_log_impl(&_mh_execute_header, p_super, OS_LOG_TYPE_INFO, "Not moving focus for screen change because we touched recently on an element and it still exists{%@}", buf, 0xCu);
      }

      goto LABEL_357;
    }

    v333 = v21;
    if ([v21 count] == 1 && (objc_msgSend(v21, "firstObject"), v45 = objc_claimAutoreleasedReturnValue(), v46 = objc_msgSend(v45, "isClipViewService"), v45, v46))
    {
    }

    else if (v5)
    {
      p_super = v5;
      v47 = 0;
      v5 = p_super;
      goto LABEL_59;
    }

    p_super = [(VOTElementManager *)self _firstElementWithCurrentElement:v11 focusedApplications:v21];

    v5 = 0;
    v47 = 1;
LABEL_59:
    v332 = v11;
    v48 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v48, OS_LOG_TYPE_DEBUG))
    {
      sub_10012BF64();
    }

    v321 = v39;
    if (v39 && (v47 & [(VOTElement *)*p_currentElement hasNativeFocus]) == 1)
    {
      v49 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
      {
        sub_10012BFD0();
      }

      if (!-[VOTElement doesHaveTraits:](*p_currentElement, "doesHaveTraits:", kAXWebContentTrait) || (-[VOTElementManager webPageLoadURL](self, "webPageLoadURL"), (v50 = objc_claimAutoreleasedReturnValue()) == 0) || (v51 = v50, -[VOTElementManager webPageLoadURL](self, "webPageLoadURL"), v52 = p_super, v53 = objc_claimAutoreleasedReturnValue(), -[VOTElement webAreaURL](self->_currentElement, "webAreaURL"), v54 = objc_claimAutoreleasedReturnValue(), v55 = [v53 isEqual:v54], v54, v53, p_super = v52, v51, v55))
      {
        v56 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v56, OS_LOG_TYPE_INFO))
        {
          v57 = *p_currentElement;
          [p_super webAreaURL];
          v59 = v58 = p_super;
          *buf = 138412802;
          *v352 = v57;
          *&v352[8] = 2112;
          *v353 = v58;
          *&v353[8] = 2112;
          *&v353[10] = v59;
          _os_log_impl(&_mh_execute_header, v56, OS_LOG_TYPE_INFO, "Current element has native focus, not moving focus again: %@ -> %@:newElement:%@", buf, 0x20u);

          p_super = v58;
        }

        v11 = v332;
LABEL_356:
        v21 = v333;
LABEL_357:

        goto LABEL_358;
      }
    }

    v320 = v4;
    v322 = v14;
    v323 = v7;
    if (CFAbsoluteTimeGetCurrent() - self->_previousTableOrCollectionViewRowTime <= 1.0)
    {
      v11 = v332;
      v21 = v333;
LABEL_102:
      v327 = kAXStatusBarElementTrait;
      if ((-[NSObject doesHaveTraits:](p_super, "doesHaveTraits:") & 1) != 0 || (-[NSObject uiElement](p_super, "uiElement"), v92 = objc_claimAutoreleasedReturnValue(), v93 = [v92 BOOLWithAXAttribute:2238], v92, v93))
      {

        v94 = VOTLogLayoutChange();
        if (os_log_type_enabled(v94, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C0F4();
        }

        p_super = 0;
      }

      if (![v11 isValid])
      {
LABEL_121:
        if ([p_super isBannerNotification])
        {
          v108 = VOTLogElement();
          if (os_log_type_enabled(v108, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C1A0();
          }

          p_super = 0;
        }

        v109 = p_super;
        v110 = [p_super bundleIdentifier];
        if ([v110 isEqualToString:@"com.apple.assistivetouchd"])
        {
          v111 = [(VOTElement *)*p_currentElement bundleIdentifier];
          v112 = [v111 isEqualToString:@"com.apple.assistivetouchd"];

          v14 = v322;
          if ((v112 & 1) == 0)
          {
            v113 = VOTLogElement();
            if (os_log_type_enabled(v113, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C1DC();
            }

            p_super = v109;
            goto LABEL_357;
          }
        }

        else
        {
        }

        v114 = VOTLogWebPageMovement();
        p_super = v109;
        if (os_log_type_enabled(v114, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C218();
        }

        v115 = v10 >= 1.25 && v329 == 1;
        v116 = !v115;
        v330 = v116;
        if (v115)
        {
          v127 = objc_allocWithZone(VOTElement);
          [VOTSharedWorkspace fingerPosition];
          v128 = [v127 initWithPosition:?];
          v129 = [(VOTElementManager *)self _currentElement];
          v130 = [v128 isEqual:v129];

          if (!v130)
          {
LABEL_282:
            v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
LABEL_283:
            v260 = v330;
            goto LABEL_314;
          }

          v128 = v128;
          p_super = v128;
LABEL_313:
          v260 = v330;

          v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
LABEL_314:

          v277 = +[VOTElement springBoardApplication];
          v278 = [v277 isSystemLocked];

          v279 = [v259 + 806 sharedWorkspace];
          v280 = [v279 currentCallState];

          v281 = [v259 + 806 sharedWorkspace];
          if ([v281 currentCallState] == 2)
          {
            v337 = 1;
          }

          else
          {
            v282 = [v259 + 806 sharedWorkspace];
            v337 = [v282 currentCallState] == 1;
          }

          v283 = [(VOTElementManager *)self _shouldNotSpeakForIncomingCall];
          v331 = v280;
          if (v280 == 1 && [v21 count] == 1)
          {
            v284 = [v21 firstObject];
            if ([v284 isSpringBoard])
            {
              v285 = 1;
            }

            else
            {
              v286 = [v21 firstObject];
              v285 = [v286 isMobilePhone];
            }
          }

          else
          {
            v285 = 0;
          }

          v328 = p_super;
          if (v278)
          {
            v287 = +[VOTElement springBoardApplication];
            v288 = [v287 isAlarmRinging];
          }

          else
          {
            v288 = 0;
          }

          v289 = CFAbsoluteTimeGetCurrent();
          [(VOTElementManager *)self lastLayoutChangeNotificationTime];
          v291 = v278;
          if (v289 - v290 >= 0.5)
          {
            v292 = 0;
          }

          else
          {
            v292 = [v328 isEqual:*p_currentElement];
          }

          v293 = v283 | v285 | v260 ^ 1 | v288 | v292;
          v294 = VOTLogCommon();
          if (os_log_type_enabled(v294, OS_LOG_TYPE_INFO))
          {
            *buf = 67110656;
            *v352 = v291;
            *&v352[4] = 1024;
            *&v352[6] = v331;
            *v353 = 1024;
            *&v353[2] = v283;
            *&v353[6] = 1024;
            *&v353[8] = v285;
            *&v353[12] = 1024;
            *&v353[14] = v288;
            v354 = 1024;
            v355 = v292;
            v356 = 1024;
            v357 = v293 & 1;
            _os_log_impl(&_mh_execute_header, v294, OS_LOG_TYPE_INFO, "Screen change data: locked: %d, callState: %d, shouldSquelchForIncomingCall: %d, shouldSquelchForActiveCall: %d, alarming Ringing: %d, layout change just happened: %d = should not send: %d", buf, 0x2Cu);
          }

          v295 = VOTLogCommon();
          if (os_log_type_enabled(v295, OS_LOG_TYPE_INFO))
          {
            v296 = [NSNumber numberWithDouble:CFAbsoluteTimeGetCurrent() - self->_lastPressOnMediaSessionElement];
            *buf = 138412290;
            *v352 = v296;
            _os_log_impl(&_mh_execute_header, v295, OS_LOG_TYPE_INFO, "Screen change should send? %@", buf, 0xCu);
          }

          v297 = (CFAbsoluteTimeGetCurrent() - self->_lastPressOnMediaSessionElement < 3.5) | v293;
          v7 = v323;
          v11 = v332;
          if (v291)
          {
            v298 = CFAbsoluteTimeGetCurrent();
            [VOTSharedWorkspace screenOnTime];
            v4 = v320;
            if (v298 - v299 < 2.0 && !v337)
            {
              buf[0] = (v297 & 1) == 0;
              v344 = v328;
              [(VOTElementManager *)self _handleSystemLockedOutputBehavior:v342 shouldSendRequest:buf startElement:&v344];
              v300 = v344;

              v297 = buf[0] ^ 1;
              if ((v297 & 1) == 0)
              {
                self->_lastLockScreenAlertSpokenTime = CFAbsoluteTimeGetCurrent();
              }

              v328 = v300;
            }
          }

          else
          {
            v4 = v320;
          }

          if ([v342 containsActions])
          {
            if (v297)
            {
LABEL_345:
              p_super = v328;
              if (!v328)
              {
                goto LABEL_350;
              }

              v303 = [v328 label];
              if ([v303 length])
              {
              }

              else
              {
                v304 = [v328 traits];

                if (!v304)
                {
                  goto LABEL_350;
                }
              }

              v343 = v328;
              AXPerformBlockOnMainThreadAfterDelay();

LABEL_350:
              [(NSMutableString *)self->_elementTypingBuffer setString:&stru_1001CBF90];
              [(VOTElementManager *)self _elementSelectionRangeDidChange:0x7FFFFFFFLL reason:0, 0];
              [(VOTElementManager *)self _setCurrentElement:v328];
              [(VOTElementFetcher *)self->_fetchManager setTriggerSignpostCollection:1];
              [(VOTElementFetcher *)self->_fetchManager forceUpdate];
              fetchManager = self->_fetchManager;
              v306 = [(VOTElementManager *)self _currentElement];
              [(VOTElementFetcher *)fetchManager updateCacheWithElement:v306];

              lastValidElement = self->_lastValidElement;
              self->_lastValidElement = 0;

              if ([(VOTElementManager *)self _isElementValidForFirstResponder:v328]&& [v328 doesHaveTraits:kAXTextEntryTrait])
              {
                [(VOTElementManager *)self _disableQuickNavStateTemporarily];
              }

              self->_flags.focusIsOnElement = 1;
              byte_1001FECE8 = 0;
              [(VOTElementManager *)self _resetDirectInteractionCache];
              v308 = VOTLogElement();
              v14 = v322;
              if (os_signpost_enabled(v308))
              {
                *buf = 0;
                _os_signpost_emit_with_name_impl(&_mh_execute_header, v308, OS_SIGNPOST_EVENT, 0xEEEEB0B5B2B2EEEELL, "EndAppUpdate", "", buf, 2u);
              }

              goto LABEL_356;
            }
          }

          else
          {
            v301 = [(VOTElementManager *)self _currentElement];
            v302 = [v328 isEqual:v301];

            if ((v302 | v297))
            {
              goto LABEL_345;
            }
          }

          [(VOTElementManager *)self sendRequest:v342];
          goto LABEL_345;
        }

        v117 = [v109 application];
        v118 = [v117 isSystemApp];

        if (v118 && CFAbsoluteTimeGetCurrent() - self->_lastItemSelectionFromTouch > 1.0)
        {
          v119 = [(VOTElementManager *)self _cachedLaunchIcon:v109];
          v120 = VOTLogElement();
          if (os_log_type_enabled(v120, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C2C0();
          }

          [v119 updateIsVisible];
          if ([v119 isVisible])
          {
            p_super = v119;

            v121 = VOTLogElement();
            if (os_log_type_enabled(v121, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C410();
            }

            v122 = v321;
            if ([v21 count] == 1)
            {
              v123 = [v21 firstObject];
              v124 = [v123 isSystemApp];

              if (v124)
              {
                [(NSMutableArray *)self->_cachedLaunchIcons removeLastObject];
              }
            }

            v125 = 1;
            v126 = p_super;
            goto LABEL_167;
          }

          p_super = v109;
        }

        if (!self->_elementBeforeAlert)
        {
          v125 = 0;
          v122 = v321;
          goto LABEL_168;
        }

        v122 = v321;
        if (([p_super doesHaveTraits:kAXIsEditingTrait]& 1) != 0)
        {
          v125 = 0;
          goto LABEL_168;
        }

        p_elementBeforeAlert = &self->_elementBeforeAlert;
        v132 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v132, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C330();
        }

        v133 = +[VOTElement systemWideElement];
        [(VOTElement *)*p_elementBeforeAlert centerPoint];
        [v133 convertPoint:-[VOTElement windowContextId](*p_elementBeforeAlert fromContextId:{"windowContextId"), v134, v135}];
        v137 = v136;
        v139 = v138;

        v126 = [[VOTElement alloc] initWithPosition:v137, v139];
        [(VOTElement *)v126 frame];
        v141 = v140;
        v143 = v142;
        v145 = v144;
        v147 = v146;
        [(VOTElement *)*p_elementBeforeAlert frame];
        v363.origin.x = v148;
        v363.origin.y = v149;
        v363.size.width = v150;
        v363.size.height = v151;
        v359.origin.x = v141;
        v359.origin.y = v143;
        v359.size.width = v145;
        v359.size.height = v147;
        v360 = CGRectIntersection(v359, v363);
        if (v360.size.width <= 0.0 || CFAbsoluteTimeGetCurrent() - self->_lastAlertTime <= 3.0)
        {
          v125 = 0;
        }

        else
        {
          v317 = v126;

          v152 = VOTLogLayoutChange();
          if (os_log_type_enabled(v152, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C3A0();
          }

          v153 = *p_elementBeforeAlert;
          *p_elementBeforeAlert = 0;

          v125 = 1;
          v126 = v317;
          p_super = &v317->super;
        }

        v7 = v323;
LABEL_167:

LABEL_168:
        v154 = AXLogCommon();
        if (os_log_type_enabled(v154, OS_LOG_TYPE_DEFAULT))
        {
          v155 = [(VOTElement *)self->_elementBeforePopup isVisible];
          v156 = self->_elementBeforePopup;
          *buf = 67109634;
          *v352 = v125;
          *&v352[4] = 1024;
          *&v352[6] = v155;
          *v353 = 2112;
          *&v353[2] = v156;
          _os_log_impl(&_mh_execute_header, v154, OS_LOG_TYPE_DEFAULT, "Chose new: %d, before pops: %d, %@", buf, 0x18u);
        }

        if (v125)
        {
LABEL_204:
          if ([(VOTElementManager *)self _shouldMoveToLastWebFormControl])
          {
            p_webFormControlBeforeInteraction = &self->_webFormControlBeforeInteraction;
            [(VOTElement *)self->_webFormControlBeforeInteraction updateLabel];
            [(VOTElement *)self->_webFormControlBeforeInteraction updateValue];
            v198 = self->_webFormControlBeforeInteraction;

            v199 = VOTLogWebPageMovement();
            if (os_log_type_enabled(v199, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C7CC();
            }

            v200 = *p_webFormControlBeforeInteraction;
            *p_webFormControlBeforeInteraction = 0;
            goto LABEL_208;
          }

          v204 = [p_super application];
          v205 = [v204 isSafari];

          if (v205)
          {
            v206 = VOTLogWebPageMovement();
            if (os_log_type_enabled(v206, OS_LOG_TYPE_DEBUG))
            {
              v311 = [(VOTElementManager *)self webPageLoadedGenerationMark];
              currentElement = self->_currentElement;
              *buf = 134218498;
              *v352 = v311;
              *&v352[8] = 1024;
              *v353 = v122;
              *&v353[4] = 2112;
              *&v353[6] = currentElement;
              _os_log_debug_impl(&_mh_execute_header, v206, OS_LOG_TYPE_DEBUG, "In safari, web generation: %lld\nstill valid: %d current: %@", buf, 0x1Cu);
            }

            if ([(VOTElementManager *)self webPageLoadedGenerationMark])
            {
              v207 = [p_super immediateRemoteParent];
              v208 = [v207 firstWebElement];

              if (v208)
              {
                v209 = 0;
                v14 = v322;
              }

              else
              {
                v237 = [p_super application];
                v209 = [v237 firstElementInApplication];

                v14 = v322;
                if (!v209)
                {
                  v238 = VOTLogWebPageMovement();
                  if (os_log_type_enabled(v238, OS_LOG_TYPE_DEBUG))
                  {
                    sub_10012C6B0();
                  }

                  v209 = p_super;
                }

                v208 = [(VOTElementManager *)self _nearestWebElement:v209];
                if (!v208)
                {
                  goto LABEL_255;
                }
              }

              if (self->_previousWebElements)
              {
                v239 = [(VOTElementManager *)self _findPreviousWebElement:v208];
                v240 = v239;
                if (v239)
                {
                  v241 = v239;
                }

                else
                {
                  v241 = v208;
                }

                v242 = v241;

                v14 = v322;
                v208 = v242;
              }

LABEL_255:
              v243 = VOTLogWebPageMovement();
              if (os_log_type_enabled(v243, OS_LOG_TYPE_DEBUG))
              {
                v313 = [(VOTElementManager *)self webPageLoadedGenerationMark];
                *buf = 134218498;
                *v352 = v313;
                *&v352[8] = 2112;
                *v353 = v208;
                *&v353[8] = 2112;
                *&v353[10] = v209;
                _os_log_debug_impl(&_mh_execute_header, v243, OS_LOG_TYPE_DEBUG, "Looking for webPageElement: %lld Nearest web element %@\n - starting with: %@", buf, 0x20u);
              }

              if (!v208)
              {
                v246 = VOTLogWebPageMovement();
                if (os_log_type_enabled(v246, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012C720();
                }

                v11 = v332;
                goto LABEL_357;
              }

              v244 = v208;
              v245 = p_super;
              v200 = v244;

              v198 = v200;
              v11 = v332;
              goto LABEL_208;
            }

            if ((v122 & 1) != 0 || (v230 = CFAbsoluteTimeGetCurrent(), [(VOTElementManager *)self lastElementChangeTime], v230 - v231 < 1.0))
            {
              v11 = v332;
              if ([(VOTElement *)*p_currentElement doesHaveTraits:kAXWebContentTrait])
              {
                v232 = VOTLogWebPageMovement();
                if (os_log_type_enabled(v232, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012C75C();
                }

                v14 = v322;
                goto LABEL_357;
              }
            }

            else
            {
              v11 = v332;
            }
          }

          else if ([(VOTElement *)*p_currentElement hasNativeFocus])
          {
            v198 = p_super;
            v200 = [(VOTElement *)*p_currentElement application];
            if ([(VOTElement *)v200 isVisible])
            {
              v216 = +[VOTElement systemAppApplication];
              v217 = [v216 focusedApplications];
              v218 = [(VOTElement *)*p_currentElement application];
              v335 = [v217 containsObject:v218];

              if (!v335)
              {
                goto LABEL_209;
              }

              [(VOTElement *)*p_currentElement updateIsVisible];
              v219 = [(VOTElement *)*p_currentElement immediateRemoteParent];
              [v219 updateIsVisible];

              if (![(VOTElement *)*p_currentElement isVisible])
              {
                goto LABEL_209;
              }

              v220 = [(VOTElement *)*p_currentElement immediateRemoteParent];
              if (v220)
              {
                v221 = v220;
                v222 = [(VOTElement *)*p_currentElement immediateRemoteParent];
                v223 = [v222 isVisible];

                if (!v223)
                {
                  goto LABEL_209;
                }
              }

              v224 = VOTLogWebPageMovement();
              if (os_log_type_enabled(v224, OS_LOG_TYPE_DEBUG))
              {
                sub_10012C640();
              }

              v200 = v198;
              v198 = *p_currentElement;
            }

LABEL_208:

LABEL_209:
            p_super = &v198->super;
          }

          v201 = [(VOTElementManager *)self _currentElement];
          v202 = [p_super isEqual:v201];

          if (v202)
          {
            v203 = 1;
LABEL_265:
            v249 = VOTLogLayoutChange();
            if (os_log_type_enabled(v249, OS_LOG_TYPE_DEBUG))
            {
              sub_10012C83C();
            }

            v128 = [(VOTElementManager *)self _firstResponderForApplications:v21];
            v250 = [VOTSharedWorkspace brailleInputActive];
            v251 = [v128 traits];
            if ((kAXIsEditingTrait & v251) != 0)
            {
              v252 = v250;
            }

            else
            {
              v252 = 0;
            }

            if (((v203 | v252) & 1) == 0)
            {
              [(VOTElementManager *)self deactivateGesturedTextInputIfNeeded:0];
            }

            if (+[AXSpringBoardServer isAvailable]&& AXDeviceHasJindo())
            {
              v253 = +[AXSpringBoardServer server];
              v254 = [v253 jindoAppBundleIndentifiers];
              jindoAppBundleIdentifiers = self->_jindoAppBundleIdentifiers;
              self->_jindoAppBundleIdentifiers = v254;

              v256 = self->_jindoAppBundleIdentifiers;
              v257 = [p_super bundleIdentifier];
              if ([(NSArray *)v256 containsObject:v257]&& ([p_super isInJindoWindow]& 1) == 0)
              {
                v309 = [p_super isInAppSwitcher];

                if ((v309 & 1) == 0)
                {

                  v4 = v320;
                  v14 = v322;
                  v7 = v323;
                  goto LABEL_357;
                }
              }

              else
              {
              }
            }

            [p_super scrollToElementForDirectional:1 withCompletion:0];
            [(VOTElementManager *)self _setCurrentElement:p_super];
            if ([v323 length])
            {
              v258 = [v342 addAttributedString:v323];
            }

            if (v325 && ([v339 containsObject:p_super] & 1) != 0)
            {
              v21 = v333;
              goto LABEL_282;
            }

            if (v203)
            {
              v21 = v333;
              v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
              if (![p_super isInAppSwitcher])
              {
                goto LABEL_283;
              }
            }

            else
            {
              v261 = [p_super label];
              v21 = v333;
              v259 = &OBJC_IVAR___VOTElementFetcherSearchParameters__direction;
              if (v261)
              {
                v262 = v261;
                [p_super label];
                v264 = v263 = p_super;
                if ([v338 containsObject:v264])
                {
                  v265 = [v263 isInAppSwitcher];

                  p_super = v263;
                  if ((v265 & 1) == 0)
                  {
                    goto LABEL_283;
                  }
                }

                else
                {

                  p_super = v263;
                }
              }
            }

            [v340 updateTitleElements];
            v109 = [v340 titleElements];
            if ([v109 count])
            {
              v266 = [v109 objectAtIndex:0];

              if (v266 && ([v266 isEqual:p_super] & 1) == 0)
              {
                v267 = [v266 label];
                lastTitleElemenTitle = self->_lastTitleElemenTitle;
                self->_lastTitleElemenTitle = v267;

                [(VOTElementManager *)self _addDescription:v266 toRequest:v342 withOptions:128];
              }
            }

            else
            {
              v266 = 0;
            }

            if (self->_flags.watchDisplayDidTurnOn)
            {
              v336 = v266;
              v269 = p_super;
              [(VOTElementManager *)self _getAutoSpeakWatchFaceElements:p_super];
              v345 = 0u;
              v346 = 0u;
              v347 = 0u;
              v270 = v348 = 0u;
              v271 = [v270 countByEnumeratingWithState:&v345 objects:v358 count:16];
              if (v271)
              {
                v272 = v271;
                v273 = *v346;
                do
                {
                  for (i = 0; i != v272; i = i + 1)
                  {
                    if (*v346 != v273)
                    {
                      objc_enumerationMutation(v270);
                    }

                    [(VOTElementManager *)self _addDescription:*(*(&v345 + 1) + 8 * i) toRequest:v342 withOptions:2];
                  }

                  v272 = [v270 countByEnumeratingWithState:&v345 objects:v358 count:16];
                }

                while (v272);
              }

              self->_flags.watchDisplayDidTurnOn = 0;
              v21 = v333;
              v266 = v336;
              p_super = v269;
            }

            else
            {
              v275 = [p_super traits];
              if (!v252 || ((kAXKeyboardKeyTrait | kAXAutoCorrectCandidateTrait) & v275) == 0)
              {
                if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:p_super])
                {
                  v276 = 0x200000822;
                }

                else
                {
                  v276 = 2082;
                }

                [(VOTElementManager *)self _addDescription:p_super toRequest:v342 withOptions:v276];
              }
            }

            goto LABEL_313;
          }

          v210 = [p_super label];
          [(VOTElementManager *)self _currentElement];
          v212 = v211 = p_super;
          v213 = [v212 label];
          if ([v210 isEqualToString:v213])
          {
            v214 = [(VOTElementManager *)self _currentElement];
            v215 = sub_10002620C(v211, v214);

            if (v215)
            {
              v203 = 0;
              v11 = v332;
              p_super = v211;
              goto LABEL_265;
            }

            v228 = !v215;
            v225 = v211;
            v229 = [v211 application];
            v210 = [v229 titleElements];

            if ([v210 count])
            {
              v212 = [v210 objectAtIndex:0];
            }

            else
            {
              v212 = 0;
            }

            v247 = [v212 label];
            v248 = [v247 isEqualToString:self->_lastTitleElemenTitle];

            v203 = v248 & v228;
          }

          else
          {
            v225 = v211;

            v203 = 0;
          }

          v11 = v332;
          p_super = v225;
          goto LABEL_265;
        }

        v157 = self->_elementBeforePopup;
        if (!v157)
        {
          goto LABEL_190;
        }

        p_elementBeforePopup = &self->_elementBeforePopup;
        [(VOTElement *)v157 updateIsVisible];
        if (![(VOTElement *)self->_elementBeforePopup isVisible]|| ![(VOTElement *)*p_elementBeforePopup doesHaveTraits:kAXLaunchIconTrait | kAXWebContentTrait]&& ![(VOTElement *)*p_elementBeforePopup isChronod])
        {
          goto LABEL_190;
        }

        if (([p_super doesHaveAllTraits:kAXTextEntryTrait | kAXIsEditingTrait]& 1) != 0)
        {
          goto LABEL_190;
        }

        v318 = p_super;
        v159 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v159, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C480();
        }

        v160 = [(VOTElement *)*p_elementBeforePopup application];
        v161 = [v160 uiElement];
        v162 = [v161 pid];
        v163 = [(VOTElement *)*p_elementBeforePopup uiElement];
        v164 = [v163 pid];

        v165 = v160;
        if (v162 != v164)
        {
          v166 = [(VOTElement *)*p_elementBeforePopup uiElement];
          [v166 axElement];
          v167 = AXUICreateApplicationElementForElement();

          v165 = v160;
          if (v167)
          {
            v168 = [AXUIElement uiElementWithAXElement:v167];
            v165 = [VOTElement elementWithUIElement:v168];

            CFRelease(v167);
          }
        }

        v169 = [(VOTElement *)*p_elementBeforePopup isValidForApplication:v165, v165];
        v170 = +[VOTElement systemWideElement];
        [(VOTElement *)*p_elementBeforePopup centerPoint];
        [v170 convertPoint:-[VOTElement windowContextId](*p_elementBeforePopup fromContextId:{"windowContextId"), v171, v172}];
        v174 = v173;
        v176 = v175;

        v177 = [[VOTElement alloc] initWithPosition:v174, v176];
        v4 = v320;
        if ([v21 containsObject:v160])
        {
          if (!v169)
          {
            goto LABEL_189;
          }
        }

        else if (([(VOTElement *)*p_elementBeforePopup isChronod]& v169 & 1) == 0)
        {
LABEL_189:

          v7 = v323;
          v11 = v332;
          p_super = v318;
LABEL_190:
          if (self->_elementBeforeMenuBar && ([p_super isInMenuBar]& 1) == 0)
          {
            v319 = p_super;
            v226 = +[AXSpringBoardServer server];
            v227 = [v226 isMenuBarModal];

            if (v227)
            {
              v193 = 0;
              v192 = v319;
            }

            else
            {
              p_elementBeforeMenuBar = &self->_elementBeforeMenuBar;
              [(VOTElement *)self->_elementBeforeMenuBar updateIsVisible];
              v234 = [(VOTElement *)self->_elementBeforeMenuBar isVisible];
              v193 = v234;
              if (v234)
              {
                v235 = *p_elementBeforeMenuBar;

                v236 = VOTLogLayoutChange();
                if (os_log_type_enabled(v236, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012C560();
                }

                v11 = v332;
              }

              else
              {
                v235 = v319;
              }

              v310 = *p_elementBeforeMenuBar;
              *p_elementBeforeMenuBar = 0;

              v192 = &v235->super;
            }
          }

          else
          {
            v192 = p_super;
            v193 = 0;
          }

          if (v193 & 1) != 0 || ((v324 ^ 1))
          {
            p_super = v192;
          }

          else
          {
            p_super = v192;
            if ((byte_1001FECE8 & 1) == 0)
            {
              if ([v192 doesHaveTraits:v327])
              {
                if ([(NSArray *)*v334 count]== 1)
                {
                  v194 = [(NSArray *)*v334 firstObject];
                  v195 = [v194 isSpringBoard];

                  if (v195)
                  {
                    v196 = VOTLogWebPageMovement();
                    v14 = v322;
                    if (os_log_type_enabled(v196, OS_LOG_TYPE_DEBUG))
                    {
                      sub_10012C5D0();
                    }

                    [(VOTElementManager *)self _handleScreenChange:0 sound:0];
                    byte_1001FECE8 = 1;
                    goto LABEL_357;
                  }
                }
              }
            }
          }

          goto LABEL_203;
        }

        [(VOTElement *)v177 frame];
        v179 = v178;
        v181 = v180;
        v183 = v182;
        v185 = v184;
        [(VOTElement *)*p_elementBeforePopup frame];
        v364.origin.x = v186;
        v364.origin.y = v187;
        v364.size.width = v188;
        v364.size.height = v189;
        v361.origin.x = v179;
        v361.origin.y = v181;
        v361.size.width = v183;
        v361.size.height = v185;
        v362 = CGRectIntersection(v361, v364);
        if (v362.size.width > 0.0)
        {
          p_super = v177;

          v190 = VOTLogLayoutChange();
          if (os_log_type_enabled(v190, OS_LOG_TYPE_DEBUG))
          {
            sub_10012C4F0();
          }

          v191 = *p_elementBeforePopup;
          *p_elementBeforePopup = 0;

          v7 = v323;
          v11 = v332;
LABEL_203:
          v122 = v321;
          goto LABEL_204;
        }

        goto LABEL_189;
      }

      v95 = p_super;
      v96 = [v11 uiElement];
      if ([v96 BOOLWithAXAttribute:2211])
      {
      }

      else
      {
        if (!AXDeviceHasJindo())
        {
          goto LABEL_119;
        }

        v107 = [v11 isInJindoWindow];

        if ((v107 & 1) == 0)
        {
          p_super = v95;
          goto LABEL_121;
        }
      }

      v97 = +[VOTElement systemWideElement];
      [v11 centerPoint];
      [v97 convertPoint:objc_msgSend(v11 fromContextId:{"windowContextId"), v98, v99}];
      v101 = v100;
      v103 = v102;

      v104 = [[VOTElement alloc] initWithPosition:v101, v103];
      v96 = v104;
      if (v104 && [(VOTElement *)v104 isEqual:v11]&& v10 >= 1.25)
      {
        v105 = v11;

        v106 = VOTLogLayoutChange();
        if (os_log_type_enabled(v106, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C130();
        }

        goto LABEL_120;
      }

LABEL_119:
      v105 = v95;
LABEL_120:

      p_super = v105;
      goto LABEL_121;
    }

    v60 = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
    v21 = v333;
    if ([v60 isSpringBoard])
    {
      v11 = v332;
LABEL_101:

      v7 = v323;
      goto LABEL_102;
    }

    v326 = p_super;
    v61 = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
    v62 = [v61 isSetupBuddy];

    v11 = v332;
    if (v62)
    {
      v7 = v323;
      p_super = v326;
      goto LABEL_102;
    }

    v63 = [(VOTElementManager *)self previousTableOrCollectionViewList];
    v64 = [v63 count];

    if ((v64 - 1) < 0)
    {
      v60 = 0;
      v65 = 0;
LABEL_95:
      if (![v11 isEqual:v60])
      {
        p_super = v326;
        goto LABEL_100;
      }

      v91 = VOTLogLayoutChange();
      p_super = v326;
      if (os_log_type_enabled(v91, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v91, OS_LOG_TYPE_INFO, "Not restoring focus to previous table cell because the previous table cell element is the same as the element we are currently focused on.", buf, 2u);
      }
    }

    else
    {
      v316 = v5;
      v65 = 0;
      while (1)
      {
        v66 = v65;
        v67 = (v64 - 1);
        v68 = [(VOTElementManager *)self previousTableOrCollectionViewList];
        v69 = [v68 objectAtIndexedSubscript:v64 - 1];

        v70 = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
        v71 = [v70 objectForKey:v69];
        v72 = [v71 indexPath];
        v74 = v73;

        v75 = [(VOTElementManager *)self previousTableOrCollectionViewToMetadata];
        v76 = [v75 objectForKey:v69];
        v77 = [v76 label];

        if (v72 != 0x7FFFFFFFFFFFFFFFLL)
        {
          v78 = [(VOTElementManager *)self previousTableOrCollectionViewApplication];
          v60 = [v78 cellWithRowIndexPath:v72 parentView:{v74, v69}];

          if (v60)
          {
            break;
          }
        }

        --v64;
        v65 = v77;
        if (v67 <= 0)
        {
          v60 = 0;
          v4 = v320;
          v11 = v332;
          v21 = v333;
LABEL_94:
          v5 = v316;
          goto LABEL_95;
        }
      }

      v79 = [(VOTElementManager *)self previousTableOrCollectionViewList];
      v80 = [(VOTElementManager *)self previousTableOrCollectionViewList];
      [v79 removeObjectsInRange:{v64, objc_msgSend(v80, "count") - v64}];

      v11 = v332;
      if ([v332 isEqual:v60])
      {
        v4 = v320;
        v21 = v333;
        v65 = v77;
        goto LABEL_94;
      }

      v81 = [v60 application];
      v82 = [v326 application];
      v83 = [v81 isEqual:v82];

      v4 = v320;
      v21 = v333;
      v65 = v77;
      if (!v83)
      {
        goto LABEL_94;
      }

      v84 = [v60 label];
      v85 = [_PASLevenshtein distanceBetweenStrings:v65 and:v84];
      v86 = [v65 length];
      v314 = v84;
      v87 = [v84 length];
      if (v86 <= v87)
      {
        v88 = v87;
      }

      else
      {
        v88 = v86;
      }

      v5 = v316;
      if (v88 && (v88 - v85) / v88 <= 0.8)
      {
        v90 = VOTLogLayoutChange();
        if (os_log_type_enabled(v90, OS_LOG_TYPE_INFO))
        {
          *buf = 0;
          _os_log_impl(&_mh_execute_header, v90, OS_LOG_TYPE_INFO, "Not restoring focus to previous table cell because the previous table cell element has a different label from its current counterpart - table view may have changed out from under us.", buf, 2u);
        }

        v89 = v326;
      }

      else
      {
        v89 = v60;

        v90 = VOTLogLayoutChange();
        if (os_log_type_enabled(v90, OS_LOG_TYPE_DEBUG))
        {
          sub_10012C084();
        }
      }

      v91 = v314;

      p_super = v89;
    }

LABEL_100:
    goto LABEL_101;
  }

LABEL_360:
}

- (id)_getAutoSpeakWatchFaceElements:(id)a3
{
  v3 = a3;
  v4 = +[NSMutableArray array];
  v5 = v4;
  if (v3)
  {
    [v4 addObject:v3];
  }

  v6 = [v3 autoSpeakWatchElements];
  if ([v6 count])
  {
    [v5 addObjectsFromArray:v6];
  }

  return v5;
}

- (id)_firstElementWithCurrentElement:(id)a3 focusedApplications:(id)a4
{
  v6 = a3;
  v7 = a4;
  v8 = [(VOTElementManager *)self _firstResponderForApplications:v7];
  v9 = VOTLogLayoutChange();
  if (os_log_type_enabled(v9, OS_LOG_TYPE_DEBUG))
  {
    sub_10012C8AC();
  }

  if (!v8)
  {
    v10 = [(VOTElementManager *)self _allElementCommunitiesWithFocusedApplications:v7];
    v11 = [(VOTElementManager *)self _elementCommunityForElement:v6];
    if (!v6 && CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime <= 2.0)
    {
      v12 = [(VOTElementManager *)self _elementCommunityForElement:self->_elementBeforeScreenChange];

      v11 = v12;
    }

    v8 = [(VOTElementManager *)self _firstElementForFocusFromElementCommunities:v10 currentElement:v6];
    v13 = [(VOTElementManager *)self _elementCommunityForElement:v8];
    v14 = VOTLogLayoutChange();
    if (os_log_type_enabled(v14, OS_LOG_TYPE_DEBUG))
    {
      sub_10012C91C();
    }

    if (([v8 isAlive] & 1) == 0)
    {
      v15 = VOTLogLayoutChange();
      if (os_log_type_enabled(v15, OS_LOG_TYPE_DEBUG))
      {
        sub_10012C988();
      }

      v8 = 0;
    }
  }

  return v8;
}

- (void)_handleSystemLockedOutputBehavior:(id)a3 shouldSendRequest:(BOOL *)a4 startElement:(id *)a5
{
  v8 = a3;
  v9 = [VOTSharedWorkspace isRingerSwitchSilent];
  v10 = [VOTSharedWorkspace useRingerSwitchForNotificationOutput];
  v11 = [VOTSharedWorkspace notificationsWhenLockedOutput];
  if (v10)
  {
    v12 = v9 == 0;
  }

  else
  {
    v12 = 1;
  }

  if (v12 || ([VOTSharedWorkspace userUnlockedDevice] & 1) != 0)
  {
    v13 = [*a5 elementsInDirection:1 withCount:100];
    v14 = [NSMutableArray arrayWithArray:v13];

    if (*a5 && ([v14 containsObject:?] & 1) == 0)
    {
      [v14 insertObject:*a5 atIndex:0];
    }

    v35 = 0u;
    v36 = 0u;
    v33 = 0u;
    v34 = 0u;
    v15 = v14;
    v16 = [v15 countByEnumeratingWithState:&v33 objects:v37 count:16];
    if (v16)
    {
      v17 = *v34;
      while (2)
      {
        for (i = 0; i != v16; i = i + 1)
        {
          if (*v34 != v17)
          {
            objc_enumerationMutation(v15);
          }

          v19 = *(*(&v33 + 1) + 8 * i);
          if ([v19 isAwayAlertItem])
          {
            v16 = v19;
            goto LABEL_19;
          }
        }

        v16 = [v15 countByEnumeratingWithState:&v33 objects:v37 count:16];
        if (v16)
        {
          continue;
        }

        break;
      }
    }

LABEL_19:

    v20 = +[VOTElement springBoardApplication];
    v21 = [v20 notificationCount];

    if (v21 >= 1)
    {
      v22 = [VOTSharedWorkspace userRecentlyUnlockedDevice] ^ 1;
      v23 = +[VOTElement springBoardApplication];
      v32 = [v23 notificationSummary:v22];

      v24 = [VOTSharedWorkspace selectedLanguage];
      sub_1000516CC(off_1001FDDD0, @"number.of.alerts", 0, v24);
      v26 = v25 = v11;
      v27 = [NSString localizedStringWithFormat:v26, v21];

      if (v25 == 1)
      {
        v28 = v32;
        if (([VOTSharedWorkspace userRecentlyUnlockedDevice] & 1) == 0)
        {
          [v8 removeActions];
        }
      }

      else
      {
        if (v16 && ([VOTSharedWorkspace userUnlockedDevice] & 1) == 0)
        {
          v29 = v16;
          *a5 = v16;
          [v8 removeActions];
        }

        if ((v25 & 0x30) != 0)
        {
          v30 = [v8 addString:v27 withLanguage:v24];
        }

        v28 = v32;
        if ((v25 & 0x12) != 0)
        {
          v31 = [v8 addString:v32];
        }

        if (v25 == 16)
        {
          [v8 setLimitToComponentType:3];
        }
      }
    }
  }

  else
  {
    self->_lastSilencedAlertTime = CFAbsoluteTimeGetCurrent();
    *a4 = 0;
  }
}

- (void)_handleElementChangedNotification:(id)a3
{
  v4 = a3;
  v5 = VOTLogLayoutChange();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012C9C4();
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![(VOTElementManager *)self _shouldIgnoreElementMovementNotification:v4])
  {
    v6 = [(VOTElementManager *)self didReceiveForceUpdateChangeToken];
    [(VOTElementManager *)self setDidReceiveForceUpdateChangeToken:0];
    if ([(VOTElementManager *)self _notificationData:v4 containsToken:kAXPerformElementUpdateImmediatelyToken])
    {
      v7 = 0.05;
    }

    else
    {
      v7 = 0.75;
    }

    if ([(VOTElementManager *)self _notificationData:v4 containsToken:kAXAnnouncementTypeStopSpeech])
    {
      self->_flags.shouldSpeakNextLayoutChange = 0;
      if (v6)
      {
        goto LABEL_17;
      }
    }

    else
    {
      if (CFAbsoluteTimeGetCurrent() - self->_lastActivationTime < 0.25)
      {
        goto LABEL_17;
      }

      v8 = [(VOTElementManager *)self nextElementToFocus];
      if (v8)
      {
        v9 = [(VOTElementManager *)self _currentElement];
        v10 = [v9 uniqueIdentification];
        v11 = [(VOTElementManager *)self nextElementToFocus];
        v12 = [v11 uniqueIdentification];
        v13 = [v10 isEqual:v12] ^ 1;
      }

      else
      {
        v13 = 1;
      }

      self->_flags.shouldSpeakNextLayoutChange = v13;
      if (v6)
      {
        goto LABEL_17;
      }
    }

    v14 = [(VOTElementManager *)self _currentElement];
    v15 = [v14 application];
    v16 = [v15 isIBooks];

    if (!v16)
    {
LABEL_18:
      [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer cancel];
      [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer dispatchAfterDelay:v7];
      goto LABEL_19;
    }

LABEL_17:
    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
    goto LABEL_18;
  }

LABEL_19:
}

- (void)_handleLayoutChange:(BOOL)a3
{
  v3 = a3;
  [(VOTElementManager *)self setCachedAdditionalElementCommunities:0];
  v5 = [(VOTElementManager *)self nextElementToFocus];
  [(VOTElementManager *)self setNextElementToFocus:0];
  [(VOTElementManager *)self setNextStringToSpeakOnScreenChange:0];
  v6 = VOTLogLayoutChange();
  if (os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG))
  {
    sub_10012CA34();
  }

  v7 = +[VOTElement springBoardApplication];
  v8 = [v7 isSystemSleeping];

  if ((v8 & 1) == 0)
  {
    v9 = +[VOTElement systemAppApplication];
    v10 = [v9 isVoiceControlRunning];

    if ((v10 & 1) == 0)
    {
      if ([(VOTElementManager *)self _currentElementIsTrappedInAuthentication])
      {
        v11 = VOTLogElement();
        if (!os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
        {
LABEL_9:

          goto LABEL_15;
        }

        LOWORD(buf) = 0;
        v12 = "Not moving VO focus, current element is an Authentication element";
LABEL_8:
        _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_DEFAULT, v12, &buf, 2u);
        goto LABEL_9;
      }

      if ([VOTSharedWorkspace brailleInputActive] && (objc_msgSend(VOTSharedWorkspace, "brailleInputAllowsElementMovement") & 1) == 0)
      {
        v11 = VOTLogElement();
        if (!os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
        {
          goto LABEL_9;
        }

        LOWORD(buf) = 0;
        v12 = "Stopping _handleLayoutChange to prevent the focus from moving while we're editing text in BSI";
        goto LABEL_8;
      }

      if (([VOTSharedWorkspace tapAndHoldMode] & 1) == 0 && !self->_flags.isReadingAll && !self->_flags.performedElementUpdateForSelectionChange)
      {
        v11 = [(VOTElementManager *)self _currentElement];
        if (self->_systemIsSleeping)
        {
          v13 = +[VOTElement springBoardApplication];
          v14 = [v13 firstElementInApplicationForFocus];

          v15 = v14;
        }

        else
        {
          v15 = v5;
        }

        v16 = kAXWebContentTrait;
        v169 = kAXWebContentTrait;
        v170 = v15;
        if (v15)
        {
          v17 = [v15 doesHaveTraits:?];
          v16 = v169;
        }

        else
        {
          v17 = 1;
        }

        v168 = kAXIsEditingTrait;
        if ([v11 doesHaveAllTraits:kAXIsEditingTrait | v16])
        {
          v18 = [v11 application];
          v19 = [v18 isMail];

          if ((v19 & v17) != 0)
          {
            v20 = VOTLogLayoutChange();
            if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
            {
              sub_10012D0F4();
            }

LABEL_231:

            v5 = v170;
            goto LABEL_9;
          }
        }

        self->_systemIsSleeping = 0;
        if ([(VOTElementManager *)self webPageLoadedGenerationMark])
        {
          v20 = VOTLogWebPageMovement();
          if (os_log_type_enabled(v20, OS_LOG_TYPE_DEBUG))
          {
            sub_10012CAA4(self);
          }

          goto LABEL_231;
        }

        v21 = VOTLogLayoutChange();
        if (os_log_type_enabled(v21, OS_LOG_TYPE_DEBUG))
        {
          sub_10012CB28();
        }

        [v11 centerPoint];
        v23 = v22;
        v25 = v24;
        [v11 updateCenterPoint];
        [v11 centerPoint];
        v27 = v26;
        v29 = v28;
        v30 = [v11 remoteParent];
        v31 = v5 == 0;
        if (v30)
        {

          if (v5)
          {
            goto LABEL_56;
          }
        }

        else
        {
          v32 = [v11 application];
          v33 = [v11 isValidForApplication:v32];

          if (!v31)
          {
            goto LABEL_56;
          }

          if ((v33 & 1) == 0)
          {
            x = CGPointZero.x;
            y = CGPointZero.y;
LABEL_42:
            if (v23 == x && v25 == y)
            {
              v36 = VOTLogLayoutChange();
              if (os_log_type_enabled(v36, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CB94(self);
              }

              v27 = self->_lastValidElementLocation.x;
              v29 = self->_lastValidElementLocation.y;
            }

            else
            {
              v37 = sub_100052310();
              v38 = xmmword_1001FF150;
              v39 = +[VOTElement systemWideElement];
              [v39 convertPoint:-[NSObject windowContextId](v11 fromContextId:{"windowContextId"), v27, v29}];
              v41 = v40;

              if (v41 >= 0.0)
              {
                if (v37)
                {
                  v43 = *(&v38 + 1);
                }

                else
                {
                  v43 = *&v38;
                }

                v44 = v43;
                if (v41 < v44)
                {
                  v29 = v25;
                  v27 = v23;
                  goto LABEL_56;
                }

                v42 = [v11 previousElement];
              }

              else
              {
                v42 = [v11 nextElement];
              }

              v170 = v42;
            }

LABEL_56:
            v167 = [v11 opaqueParent];
            if ([v170 isValid])
            {
              v45 = v170;
              goto LABEL_104;
            }

            if ([v11 doesHaveTraits:kAXMenuItemTrait]&& (p_firstResponderElement = &self->_firstResponderElement, firstResponderElement = self->_firstResponderElement, [(VOTElement *)firstResponderElement application], v48 = objc_claimAutoreleasedReturnValue(), LODWORD(firstResponderElement) = [(VOTElement *)firstResponderElement isValidForApplication:v48], v48, firstResponderElement))
            {
              if (![(VOTElement *)*p_firstResponderElement isAccessibleElement])
              {
                goto LABEL_109;
              }

              v45 = *p_firstResponderElement;
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CEBC();
              }
            }

            else if ([(VOTElementManager *)self _isElementValidForFirstResponder:v11]&& [v11 isAlive]&& (v27 != CGPointZero.x || v29 != CGPointZero.y) && (currentApplications = self->_currentApplications, [v11 application], v51 = objc_claimAutoreleasedReturnValue(), LODWORD(currentApplications) = [(NSArray *)currentApplications containsObject:v51], v51, currentApplications))
            {
              v45 = v11;
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CC34();
              }
            }

            else if (v167 && ((-[NSObject remoteParent](v11, "remoteParent"), (v52 = objc_claimAutoreleasedReturnValue()) == 0) || (-[NSObject localOpaqueParent](v11, "localOpaqueParent"), v53 = objc_claimAutoreleasedReturnValue(), v54 = [v167 isEqual:v53], v53, v52, v54)))
            {
              v55 = [v11 opaqueParent];
              v45 = [v55 currentOpaqueElement];

              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CC70();
              }
            }

            else if ([v11 doesHaveTraits:v169]&& ((v56 = [v11 isAlive], v23 != 0.0) ? (v57 = v56) : (v57 = 0), v57 == 1 && v25 != 0.0))
            {
              v45 = v11;
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CE30(v45);
              }
            }

            else
            {
              if ([v11 verifyElementExists:0])
              {
                v58 = v11;
              }

              else
              {
                v59 = +[VOTElement systemWideElement];
                [v59 convertPoint:-[NSObject windowContextId](v11 fromContextId:{"windowContextId"), v27, v29}];
                v61 = v60;
                v63 = v62;

                v64 = objc_allocWithZone(VOTElement);
                v65 = [v11 application];
                v58 = [v64 initWithPosition:v65 application:-[NSObject windowContextId](v11 contextId:{"windowContextId"), v61, v63}];

                if (!v58)
                {
                  v58 = [objc_allocWithZone(VOTElement) initWithPosition:{v61, v63}];
                }

                v66 = VOTLogLayoutChange();
                if (os_log_type_enabled(v66, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012CCE0(v61, v63);
                }
              }

              if ([(VOTElement *)v58 isEqual:self->_currentElement])
              {
                goto LABEL_103;
              }

              if ([VOTSharedWorkspace navigationStyleHonorsGroups] && -[VOTElement isAccessibleGroup](self->_currentElement, "isAccessibleGroup") && -[VOTElement elementIsDescendant:](self->_currentElement, "elementIsDescendant:", v58))
              {
                v45 = self->_currentElement;

                goto LABEL_104;
              }

              if (([v11 updateVisiblePoint], [v11 visiblePoint], v69 = v67, v70 = v68, v67 == CGPointZero.x) && v68 == CGPointZero.y || v67 == -1.0 && v68 == -1.0)
              {
LABEL_103:
                v45 = v58;
                goto LABEL_104;
              }

              v151 = +[VOTElement systemWideElement];
              [v151 convertPoint:-[NSObject windowContextId](v11 fromContextId:{"windowContextId"), v69, v70}];
              v153 = v152;
              v155 = v154;

              v45 = [objc_allocWithZone(VOTElement) initWithPosition:{v153, v155}];
              v49 = VOTLogLayoutChange();
              if (os_log_type_enabled(v49, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CD88(v153, v155);
              }
            }

LABEL_104:
            if (v45)
            {
              if (!-[VOTElement isTouchContainer](v45, "isTouchContainer") || [VOTSharedWorkspace navigationStyleHonorsGroups] && -[VOTElement isAccessibleGroup](v45, "isAccessibleGroup"))
              {
                p_super = &v45->super;
                goto LABEL_118;
              }

              p_super = [(VOTElement *)v45 firstContainedElement];

              v73 = VOTLogLayoutChange();
              if (os_log_type_enabled(v73, OS_LOG_TYPE_DEBUG))
              {
                sub_10012CF2C();
              }

              goto LABEL_117;
            }

LABEL_109:
            p_super = [(VOTElementManager *)self _sonarElementInForwardDirection:0 limit:20];
            v72 = VOTLogLayoutChange();
            if (os_log_type_enabled(v72, OS_LOG_TYPE_DEBUG))
            {
              sub_10012CF9C();
            }

            if (p_super)
            {
LABEL_118:
              if ([p_super doesHaveTraits:kAXStatusBarElementTrait]&& ([p_super doesHaveTraits:kAXAllowsLayoutChangeInStatusBarTrait]& 1) == 0)
              {

                v75 = VOTLogLayoutChange();
                if (os_log_type_enabled(v75, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012D07C();
                }

                p_super = 0;
              }

              if ([p_super doesHaveTraits:v169])
              {
                v76 = [p_super application];
                v77 = [v76 firstResponderElement];

                if ([v77 doesHaveAllTraits:v168 | v169] && (-[NSObject doesHaveTraits:](v11, "doesHaveTraits:", kAXKeyboardKeyTrait) & 1) == 0 && (self->_lastActivationTime > self->_lastElementChangeTime || v170))
                {
                  v78 = v77;

                  p_super = v78;
                }
              }

              if ([p_super doesHaveTraits:kAXAutoCorrectCandidateTrait])
              {
                v79 = [p_super firstVisibleElementInList];
                v80 = v79;
                if (v79)
                {
                  v81 = v79;

                  p_super = v81;
                }
              }

              if ([p_super doesHaveTraits:kAXLaunchIconTrait]&& CFAbsoluteTimeGetCurrent() - self->_lastItemSelectionFromTouch > 1.0)
              {
                v82 = [(VOTElementManager *)self _cachedLaunchIcon:p_super];
                v83 = +[AXSubsystemVoiceOver sharedInstance];
                v84 = [v83 ignoreLogging];

                if ((v84 & 1) == 0)
                {
                  v85 = +[AXSubsystemVoiceOver identifier];
                  v86 = AXLoggerForFacility();

                  v87 = AXOSLogLevelFromAXLogLevel();
                  if (os_log_type_enabled(v86, v87))
                  {
                    v165 = AXColorizeFormatLog();
                    v161 = v82;
                    v163 = _AXStringForArgs();
                    v88 = v86;
                    if (os_log_type_enabled(v88, v87))
                    {
                      LODWORD(buf) = 138543362;
                      *(&buf + 4) = v163;
                      _os_log_impl(&_mh_execute_header, v88, v87, "%{public}@", &buf, 0xCu);
                    }
                  }
                }

                if (v82)
                {
                  v89 = v82;

                  p_super = v89;
                }
              }

              v90 = kAXKeyboardKeyTrait;
              if ([v11 doesHaveTraits:kAXKeyboardKeyTrait, v161]&& [v11 isInternationalKeyboardKey]&& ([p_super isInternationalKeyboardKey]& 1) == 0)
              {
                v91 = [(VOTElementManager *)self _nearestElementWithMatch:&stru_1001C9F90 startElement:p_super];
                v92 = v91;
                if (v91)
                {
                  v93 = v91;

                  p_super = v93;
                }
              }

              if ([p_super isBannerNotification]&& ([v11 isBannerNotification]& 1) == 0)
              {
                v94 = VOTLogElement();
                if (os_log_type_enabled(v94, OS_LOG_TYPE_DEBUG))
                {
                  sub_10012D0B8();
                }

                p_super = 0;
              }

              v166 = [VOTSharedWorkspace fingerCount];
              if (!p_super || !v3)
              {
                v20 = p_super;
LABEL_213:
                v129 = v169;
                if (v20)
                {
                  if (!v166)
                  {
                    if (([v20 isSiriTalkingOrListening]& 1) == 0)
                    {
                      [(VOTElementManager *)self _setCurrentElement:v20];

                      [v20 updateFrame];
                      [v20 updateCenterPoint];
                      [v20 updateTraits];
                      [v20 updateEquivalenceTag];
                      location = self->_highlightedCharacterRange.location;
                      if (location == 0x7FFFFFFF || ([v20 boundsForRange:location, self->_highlightedCharacterRange.length], v131 = v185.origin.x, v132 = v185.origin.y, width = v185.size.width, height = v185.size.height, v186.origin.x = CGRectZero.origin.x, v186.origin.y = CGRectZero.origin.y, v186.size.width = CGRectZero.size.width, v186.size.height = CGRectZero.size.height, CGRectEqualToRect(v185, v186)))
                      {
                        v135 = +[VOTDisplayManager displayManager];
                        [v135 setCursorFrameForElement:v20];
                      }

                      else
                      {
                        v140 = +[VOTElement systemWideElement];
                        [v140 convertRect:-[NSObject windowContextId](v20 fromContextId:{"windowContextId"), v131, v132, width, height}];
                        v142 = v141;
                        v144 = v143;
                        v146 = v145;
                        v148 = v147;

                        v135 = +[VOTDisplayManager displayManager];
                        [v135 setCursorFrame:{v142, v144, v146, v148}];
                      }

                      v11 = 0;
                    }

                    v129 = v169;
                  }

                  if (([v20 doesHaveTraits:v129]& 1) == 0)
                  {
                    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
                    [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v20];
                  }
                }

                else
                {
                  v136 = +[VOTDisplayManager displayManager];
                  [v136 setCursorFrameForElement:0];
                }

                v149 = [(VOTElementManager *)self _currentElement];
                v150 = [v149 doesHaveTraits:kAXAllowsDirectInteractionTrait];

                if ((v150 & 1) == 0)
                {
                  [(VOTElementManager *)self _resetDirectInteractionCache];
                }

                [(VOTElementManager *)self setLastLayoutChangeNotificationTime:CFAbsoluteTimeGetCurrent()];
                [(VOTElementManager *)self _resetItemChooserCache];

                goto LABEL_231;
              }

              v162 = [v11 isEqual:p_super];
              v95 = [v11 application];
              v96 = [v95 isSpringBoard];
              if (v11)
              {
                v97 = v96;
              }

              else
              {
                v97 = 1;
              }

              if (v97 == 1)
              {
                v98 = +[VOTElement springBoardApplication];
                v164 = [v98 isSystemLocked];
              }

              else
              {
                v164 = 0;
              }

              v99 = [v11 equivalenceTag];
              v100 = [p_super equivalenceTag];
              v101 = [v99 isEqualToString:v100];
              if ((v101 & v164) == 1)
              {
                v102 = [v11 isAwayAlertItem];

                if (!(v162 & 1 | ((v102 & 1) == 0)))
                {
                  goto LABEL_167;
                }
              }

              else
              {

                if (!v101)
                {
LABEL_167:
                  if (v162)
                  {
                    v103 = [v11 doesHaveTraits:kAXUpdatesFrequentlyTrait]^ 1 | v164;
                  }

                  else
                  {
                    LOBYTE(v103) = 1;
                  }

LABEL_172:
                  v105 = v170;
                  *&buf = 0;
                  *(&buf + 1) = &buf;
                  v181 = 0x3032000000;
                  v182 = sub_100068050;
                  v183 = sub_100068060;
                  v184 = 0;
                  if ((v103 & 1) == 0)
                  {
                    v20 = p_super;
LABEL_212:
                    _Block_object_dispose(&buf, 8);

                    goto LABEL_213;
                  }

                  if (!v170)
                  {
                    v106 = [p_super opaqueParent];
                    v107 = v106 == 0;

                    v105 = 0;
                    if (v107)
                    {
                      [v11 frame];
                      v173[0] = _NSConcreteStackBlock;
                      v173[1] = 3221225472;
                      v173[2] = sub_10009A058;
                      v173[3] = &unk_1001C9FB8;
                      v176 = v108;
                      v177 = v109;
                      v178 = v110;
                      v179 = v111;
                      v174 = v11;
                      p_buf = &buf;
                      v112 = objc_retainBlock(v173);
                      v113 = [p_super elementsInDirection:2 withCount:10];
                      [v113 enumerateObjectsUsingBlock:v112];
                      if (!*(*(&buf + 1) + 40))
                      {
                        v114 = [p_super elementsInDirection:1 withCount:10];
                        [v114 enumerateObjectsUsingBlock:v112];
                      }

                      v105 = 0;
                    }
                  }

                  Current = CFAbsoluteTimeGetCurrent();
                  v116 = [v105 bundleIdentifier];
                  if ([v116 isEqualToString:AXInCallServiceName])
                  {
                    v117 = +[VOTWorkspace sharedWorkspace];
                    v118 = [v117 currentCallState] == 1;
                  }

                  else
                  {
                    v118 = 0;
                  }

                  v119 = [(VOTElementManager *)self _shouldNotSpeakForIncomingCall];
                  if (Current - self->_lastLiveRegionUpdate > 1.0 && Current - self->_lastPressOnMediaSessionElement > 3.5 && !v166)
                  {
                    v120 = v119;
                    v121 = +[VOTElement systemAppApplication];
                    if (([v121 isSiriTalkingOrListening] | v118 | v120))
                    {
                    }

                    else
                    {
                      v137 = +[VOTElement systemAppApplication];
                      if ([v137 isSystemLocked])
                      {
                        v138 = +[VOTElement systemAppApplication];
                        v139 = [v138 isAlarmRinging];

                        v172 = v139 ^ 1;
                        if (v139)
                        {
                          goto LABEL_188;
                        }
                      }

                      else
                      {

                        v172 = 1;
                      }

                      if (![p_super doesHaveTraits:v90])
                      {
                        goto LABEL_188;
                      }

                      if ([(VOTElement *)self->_firstResponderElement doesHaveTraits:kAXSecureTextFieldTrait]|| Current + -0.75 - self->_lastValueChangeTime < 0.5 || Current - self->_lastSelectionChangeTime < 1.0)
                      {
                        v172 = 0;
                      }

                      if (![v11 doesHaveTraits:v90])
                      {
                        goto LABEL_188;
                      }

                      v156 = [v11 label];
                      v157 = [v156 lowercaseString];
                      v158 = [p_super label];
                      v159 = [v158 lowercaseString];
                      v160 = [v157 isEqualToString:v159];

                      if (!v160)
                      {
                        goto LABEL_188;
                      }
                    }
                  }

                  v172 = 0;
LABEL_188:
                  if (v172 == 1 && (Current - self->_lastValueChangeTime < 1.5 || Current - self->_lastSelectionChangeTime < 1.5) && [p_super doesHaveTraits:v168])
                  {
                    v172 = 0;
                  }

                  v122 = *(*(&buf + 1) + 40);
                  if (v122)
                  {
                    v20 = v122;
                    v123 = p_super;
                  }

                  else
                  {
                    v123 = [objc_allocWithZone(VOTOutputRequest) init];
                    if ([(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:p_super previousElement:v11])
                    {
                      v124 = 34;
                    }

                    else
                    {
                      v124 = 2;
                    }

                    [(VOTElementManager *)self _addDescription:p_super toRequest:v123 withOptions:v124];
                    if ((v162 & 1) != 0 || [v11 rowRange]!= 0x7FFFFFFF && [p_super rowRange]!= 0x7FFFFFFF || (systemNotificationInProgress = self->_systemNotificationInProgress))
                    {
                      [v123 setDoesNotInterrupt:1];
                      systemNotificationInProgress = self->_systemNotificationInProgress;
                    }

                    if (((systemNotificationInProgress | v164 ^ 1) & 1) != 0 || (v126 = CFAbsoluteTimeGetCurrent(), [VOTSharedWorkspace screenOnTime], v126 - v127 >= 2.0))
                    {
                      v20 = p_super;
                    }

                    else
                    {
                      v171 = p_super;
                      [(VOTElementManager *)self _handleSystemLockedOutputBehavior:v123 shouldSendRequest:&v172 startElement:&v171];
                      v20 = v171;

                      if (v172 == 1 && [v20 isAwayAlertItem])
                      {
                        self->_lastLockScreenAlertSpokenTime = CFAbsoluteTimeGetCurrent();
                        [v123 setCannotBeInterrupted:1];
                      }
                    }

                    [v123 setGeneratesBraille:0];
                    v128 = +[VOTBrailleManager manager];
                    [v128 setBrailleElement:v20 resetBrailleCursor:0 rotorSelection:0];

                    if (v172 == 1)
                    {
                      [(VOTElementManager *)self sendRequest:v123];
                    }
                  }

                  goto LABEL_212;
                }
              }

              v104 = [v11 traits];
              LOBYTE(v103) = v104 != [p_super traits];
              goto LABEL_172;
            }

            v73 = [v11 application];
            p_super = [v73 firstElementInApplication];
            v74 = VOTLogLayoutChange();
            if (os_log_type_enabled(v74, OS_LOG_TYPE_DEBUG))
            {
              sub_10012D00C();
            }

LABEL_117:
            goto LABEL_118;
          }
        }

        x = CGPointZero.x;
        if (v27 != CGPointZero.x)
        {
          goto LABEL_56;
        }

        y = CGPointZero.y;
        if (v29 != y)
        {
          goto LABEL_56;
        }

        goto LABEL_42;
      }
    }
  }

LABEL_15:
}

- (void)_updateFirstResponderTypingBuffer
{
  [(VOTElement *)self->_firstResponderElement updateValue];
  v3 = [(VOTElement *)self->_firstResponderElement value];
  if (!v3)
  {
    v3 = &stru_1001CBF90;
  }

  v7 = v3;
  if ([(__CFString *)v3 isAXAttributedString]&& ([(__CFString *)v7 hasAttribute:UIAccessibilityTokenPlaceholder]& 1) != 0)
  {
    v4 = &stru_1001CBF90;
  }

  else
  {
    v4 = v7;
  }

  [(NSMutableString *)self->_elementTypingBuffer setString:v4];
  v5 = [(VOTElement *)self->_firstResponderElement selectedTextRange];
  [(VOTElementManager *)self _elementSelectionRangeDidChange:v5 reason:v6, 0];
  [(NSMutableDictionary *)self->_lastSeenFontProperties removeAllObjects];
  [(VOTElementManager *)self _setLastSeenLineAndColumn:0];
}

- (void)setCurrentElement:(id)a3 shouldSetBrailleElement:(BOOL)a4
{
  v4 = a4;
  inUnitTestingMode = self->_inUnitTestingMode;
  v7 = a3;
  if (inUnitTestingMode)
  {
    [(VOTElementManager *)self _setCurrentElement:v7];

    self->_flags.focusIsOnElement = 1;
  }

  else
  {
    v8 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D130();
    }

    elementManagerThread = self->_elementManagerThread;
    v10 = [NSNumber numberWithBool:v4];
    [(SCRCThread *)elementManagerThread performSelector:"_setCurrentElement:shouldSetBrailleElement:" onTarget:self count:2 objects:v7, v10, 0];
  }
}

- (void)setFirstResponder:(id)a3
{
  v8 = a3;
  if (![(VOTElement *)self->_firstResponderElement isEqual:?]|| self->_inUnitTestingMode)
  {
    objc_storeStrong(&self->_firstResponderElement, a3);
    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
    [WeakRetained firstResponderDidUpdate:v8];

    v6 = +[VOTKeyboardManager keyboardManager];
    [v6 setExplictlyEnabledQuickNav:0];

    [(VOTElementManager *)self _handleKeyboardChangedNotification];
    v7 = +[VOTBrailleManager manager];
    [v7 updateKeyboardSettings];

LABEL_4:
    [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
    goto LABEL_5;
  }

  if (self->_elementSelectionRangeBufferInternal.location == 0x7FFFFFFF)
  {
    goto LABEL_4;
  }

LABEL_5:
  [(VOTElementManager *)self _activateBrailleScreenInputIfNeededForElement:self->_firstResponderElement];
}

- (__AXUIElement)_firstResponderAXUIElementRefFromCurrentApplications
{
  v14 = 0u;
  v15 = 0u;
  v16 = 0u;
  v17 = 0u;
  v3 = self->_currentApplications;
  v4 = [(NSArray *)v3 countByEnumeratingWithState:&v14 objects:v18 count:16];
  if (v4)
  {
    v5 = v4;
    v6 = *v15;
LABEL_3:
    v7 = 0;
    while (1)
    {
      if (*v15 != v6)
      {
        objc_enumerationMutation(v3);
      }

      v8 = [*(*(&v14 + 1) + 8 * v7) uiElement];
      [v8 updateCache:3002];
      v9 = [v8 objectWithAXAttribute:3002];

      if (v9)
      {
        goto LABEL_11;
      }

      if (v5 == ++v7)
      {
        v5 = [(NSArray *)v3 countByEnumeratingWithState:&v14 objects:v18 count:16];
        if (v5)
        {
          goto LABEL_3;
        }

        break;
      }
    }
  }

  v10 = +[VOTElement systemAppApplication];
  v11 = [v10 uiElement];

  [v11 updateCache:3002];
  v9 = [v11 objectWithAXAttribute:3002];

  if (!v9)
  {
    v12 = [(VOTElement *)self->_currentElement application];
    v3 = [v12 uiElement];

    [(NSArray *)v3 updateCache:3002];
    v9 = [(NSArray *)v3 objectWithAXAttribute:3002];
LABEL_11:
  }

  return v9;
}

- (void)_updateFirstResponder
{
  if (!self->_inUnitTestingMode)
  {
    v3 = [(VOTElementManager *)self currentElement];
    v4 = [v3 uiElement];
    v5 = [v4 objectWithAXAttribute:3002];

    if (!v5)
    {
      v5 = [(VOTElementManager *)self _firstResponderAXUIElementRefFromCurrentApplications];
    }

    v6 = [(VOTElement *)self->_firstResponderElement uiElement];
    [v6 axElement];

    if (AXSafeEqual())
    {
      if (self->_elementSelectionRangeBufferInternal.location == 0x7FFFFFFF)
      {

        [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
      }
    }

    else
    {
      v7 = [AXUIElement uiElementWithAXElement:v5];
      v8 = [VOTElement elementWithUIElement:v7];

      [(VOTElementManager *)self setFirstResponder:v8];
    }
  }
}

- (id)_firstResponderFromCurrentElement
{
  v3 = [(VOTElementManager *)self currentElement];
  v4 = [v3 uiElement];
  v5 = [v4 objectWithAXAttribute:3002];

  if (!v5)
  {
    v5 = [(VOTElementManager *)self _firstResponderAXUIElementRefFromCurrentApplications];
  }

  v6 = [AXUIElement uiElementWithAXElement:v5];
  v7 = [VOTElement elementWithUIElement:v6];

  return v7;
}

- (void)_updateCurrentElementFrame
{
  v4 = +[VOTDisplayManager displayManager];
  v3 = [(VOTElementManager *)self _currentElement];
  [v4 setCursorFrameForElement:v3];
}

- (void)_updateCursorFrameForElementIfNeeded:(id)a3
{
  v6 = a3;
  v4 = [(VOTElementManager *)self _currentElement];

  v5 = v6;
  if (v4 == v6)
  {
    [v6 updateFrame];
    [(VOTElementManager *)self _updateCurrentElementFrame];
    v5 = v6;
  }
}

- (void)_updateCursorFrameForLineFrameMovement:(id)a3
{
  location = self->_elementUnitOutputRange.location;
  length = self->_elementUnitOutputRange.length;
  v6 = a3;
  [v6 boundsForRange:{location, length}];
  self->_lineFrame.origin.x = v7;
  self->_lineFrame.origin.y = v8;
  self->_lineFrame.size.width = v9;
  self->_lineFrame.size.height = v10;
  v11 = +[VOTElement systemWideElement];
  v12 = [v6 windowContextId];

  [v11 convertRect:v12 fromContextId:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];
  self->_lineFrame.origin.x = v13;
  self->_lineFrame.origin.y = v14;
  self->_lineFrame.size.width = v15;
  self->_lineFrame.size.height = v16;

  v17 = +[VOTDisplayManager displayManager];
  [v17 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

  self->_textRangeBeingDisplayed = 1;
}

- (void)updateCurrentElementFrame
{
  if ([(VOTElementManager *)self isOnElementManagerThread])
  {
    _AXAssert();
  }

  elementManagerThread = self->_elementManagerThread;

  [(SCRCThread *)elementManagerThread performSelector:"_updateCurrentElementFrame" onTarget:self count:0 objects:0];
}

- (void)_elementFetchFoundDirectTouchElements:(id)a3
{
  v4 = a3;
  v3 = v4;
  AXPerformBlockOnMainThread();
}

- (BOOL)_shouldAnnounceCustomRotorHintForElement:(id)a3
{
  v4 = a3;
  v5 = [v4 touchContainerParent];
  v6 = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  v29 = self;
  v30 = v5;
  if (!v6 && v5)
  {
    goto LABEL_6;
  }

  v7 = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  v8 = v7;
  if (v7 && !v5)
  {

    goto LABEL_6;
  }

  v24 = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  v25 = v24;
  if (!v24 || !v5)
  {

    v28 = 0;
    goto LABEL_7;
  }

  v26 = [(VOTElementManager *)self lastContainerForCustomRotorHint];
  v27 = [v26 isEqual:v5];

  if ((v27 & 1) == 0)
  {
LABEL_6:
    v6 = [v4 touchContainerParent];
    [(VOTElementManager *)self setLastContainerForCustomRotorHint:v6];
    v28 = 1;
LABEL_7:

    goto LABEL_8;
  }

  v28 = 0;
LABEL_8:
  v9 = [v4 customPublicRotors];
  v10 = +[NSMutableSet set];
  v31 = 0u;
  v32 = 0u;
  v33 = 0u;
  v34 = 0u;
  v11 = v9;
  v12 = [v11 countByEnumeratingWithState:&v31 objects:v35 count:16];
  if (v12)
  {
    v13 = v12;
    v14 = *v32;
    do
    {
      for (i = 0; i != v13; i = i + 1)
      {
        if (*v32 != v14)
        {
          objc_enumerationMutation(v11);
        }

        v16 = *(*(&v31 + 1) + 8 * i);
        if ([v4 customPublicRotorIsVisibleInTouchRotor:v16])
        {
          v17 = [v4 customPublicRotorName:v16];
          v18 = [VOTRotor rotorTypeForSystemRotorType:v17];
          if (v18)
          {
            v19 = [VOTRotor stringForRotorType:v18];

            v17 = v19;
          }

          if (v17)
          {
            [v10 addObject:v16];
          }
        }
      }

      v13 = [v11 countByEnumeratingWithState:&v31 objects:v35 count:16];
    }

    while (v13);
  }

  v20 = [(VOTElementManager *)v29 previousCustomRotorsForRotorHint];
  v21 = [v10 isEqualToSet:v20];

  v22 = v28;
  if ((v21 & 1) == 0)
  {
    [(VOTElementManager *)v29 setPreviousCustomRotorsForRotorHint:v10];
    v22 = 1;
  }

  return v22;
}

- (BOOL)_shouldNotSpeakForIncomingCall
{
  v2 = +[VOTWorkspace sharedWorkspace];
  v3 = [v2 currentCallState];

  v4 = +[AVSystemController sharedAVSystemController];
  v5 = [v4 routeForCategory:AVAudioSessionCategoryVoiceOver];

  if ([v5 isEqualToString:@"Headset"] & 1) != 0 || (objc_msgSend(v5, "isEqualToString:", @"HeadsetBT") & 1) != 0 || (objc_msgSend(v5, "isEqualToString:", @"Headphone"))
  {
    v6 = 0;
  }

  else
  {
    v6 = [v5 isEqualToString:@"HeadphonesBT"] ^ 1;
  }

  v7 = [VOTSharedWorkspace isRingerSwitchSilent];
  v8 = VOTLogCommon();
  if (os_log_type_enabled(v8, OS_LOG_TYPE_INFO))
  {
    v10[0] = 67109632;
    v10[1] = v3 == 2;
    v11 = 1024;
    v12 = v7;
    v13 = 1024;
    v14 = v6;
    _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_INFO, "Should not speak for incoming call? %d & %d & %d", v10, 0x14u);
  }

  return (v3 == 2) & v6 & v7;
}

- (id)_verifiedElementWithElement:(id)a3
{
  v4 = a3;
  [v4 frame];
  v6 = v5;
  v8 = v7;
  v10 = v9;
  v12 = v11;
  [v4 centerPoint];
  v13 = [NSValue valueWithCGPoint:?];
  v42[0] = v13;
  v14 = [NSValue valueWithCGPoint:v6 + 2.0, v8 + 2.0];
  v42[1] = v14;
  v44.origin.x = v6;
  v44.origin.y = v8;
  v44.size.width = v10;
  v44.size.height = v12;
  v15 = [NSValue valueWithCGPoint:v6 + 2.0, v8 + CGRectGetHeight(v44) + -2.0];
  v42[2] = v15;
  v45.origin.x = v6;
  v45.origin.y = v8;
  v45.size.width = v10;
  v45.size.height = v12;
  v16 = [NSValue valueWithCGPoint:v6 + CGRectGetWidth(v45) + -2.0, v8 + 2.0];
  v42[3] = v16;
  v46.origin.x = v6;
  v46.origin.y = v8;
  v46.size.width = v10;
  v46.size.height = v12;
  v17 = v6 + CGRectGetWidth(v46) + -2.0;
  v47.origin.x = v6;
  v47.origin.y = v8;
  v47.size.width = v10;
  v47.size.height = v12;
  v18 = [NSValue valueWithCGPoint:v17, v8 + CGRectGetHeight(v47) + -2.0];
  v42[4] = v18;
  v19 = [NSArray arrayWithObjects:v42 count:5];

  v39 = 0u;
  v40 = 0u;
  v37 = 0u;
  v38 = 0u;
  v20 = v19;
  v21 = [v20 countByEnumeratingWithState:&v37 objects:v41 count:16];
  if (v21)
  {
    v22 = v21;
    v23 = *v38;
    while (2)
    {
      for (i = 0; i != v22; i = i + 1)
      {
        if (*v38 != v23)
        {
          objc_enumerationMutation(v20);
        }

        v25 = *(*(&v37 + 1) + 8 * i);
        v26 = +[VOTElement systemWideElement];
        [v25 CGPointValue];
        [v26 convertPoint:objc_msgSend(v4 fromContextId:{"windowContextId"), v27, v28}];
        v30 = v29;
        v32 = v31;

        v33 = [(VOTElementManager *)self _verifiedElementWithElement:v4 atPoint:v30, v32];
        if (v33)
        {
          v35 = v33;

          v34 = v35;
          goto LABEL_11;
        }
      }

      v22 = [v20 countByEnumeratingWithState:&v37 objects:v41 count:16];
      if (v22)
      {
        continue;
      }

      break;
    }
  }

  v34 = 0;
  v35 = v20;
LABEL_11:

  return v34;
}

- (id)_verifiedElementWithElement:(id)a3 atPoint:(CGPoint)a4
{
  y = a4.y;
  x = a4.x;
  v6 = a3;
  v7 = [objc_allocWithZone(VOTElement) initWithPosition:{x, y}];
  v8 = v7;
  if (v7 && ([v7 label], v9 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v6, "label"), v10 = objc_claimAutoreleasedReturnValue(), v11 = objc_msgSend(v9, "isEqual:", v10), v10, v9, v11))
  {
    v12 = v8;
  }

  else
  {
    v12 = 0;
  }

  return v12;
}

- (BOOL)_finishHandlingMoveToElementNotification:(id)a3 shouldSyncNativeFocusElement:(id)a4 shouldEchoSameTouchContainer:(id)a5 shouldScrollToElement:(id)a6 shouldPlayTrackingSound:(id)a7 shouldRefocusIfSameElement:(id)a8
{
  v14 = a3;
  v15 = a4;
  v16 = a5;
  v17 = a6;
  v18 = a7;
  v19 = a8;
  v20 = [(VOTElementManager *)self _verifiedElementWithElement:v14];
  v21 = [(VOTElementManager *)self _currentElement];
  if ([v21 isEqual:v14] && !objc_msgSend(v19, "BOOLValue"))
  {

    if (v14)
    {
      goto LABEL_14;
    }

LABEL_11:
    if ([v18 BOOLValue])
    {
      v47 = +[VOTOutputManager outputManager];
      v48 = +[VOSOutputEvent NoItemExists];
      [v47 sendEvent:v48];
    }

    v14 = 0;
    goto LABEL_14;
  }

  if (!v14)
  {
    goto LABEL_11;
  }

  if ((([v19 BOOLValue] & 1) != 0 || (objc_msgSend(v14, "isEqual:", v20) & 1) == 0) && v20)
  {
    [v14 frame];
    v23 = v22;
    v25 = v24;
    v27 = v26;
    v29 = v28;
    [v20 frame];
    v63.origin.x = v30;
    v63.origin.y = v31;
    v63.size.width = v32;
    v63.size.height = v33;
    v61.origin.x = v23;
    v61.origin.y = v25;
    v61.size.width = v27;
    v61.size.height = v29;
    if (CGRectIntersectsRect(v61, v63))
    {
      [v14 frame];
      v35 = v34;
      v37 = v36;
      v39 = v38;
      v41 = v40;
      [v20 frame];
      v64.origin.x = v42;
      v64.origin.y = v43;
      v64.size.width = v44;
      v64.size.height = v45;
      v62.origin.x = v35;
      v62.origin.y = v37;
      v62.size.width = v39;
      v62.size.height = v41;
      v60 = v15;
      if (CGRectEqualToRect(v62, v64))
      {
        v46 = v20;

        v14 = v46;
      }

      goto LABEL_16;
    }

LABEL_14:
    v49 = 0;
    goto LABEL_25;
  }

  v60 = v15;
LABEL_16:
  v50 = +[VOTElement springBoardApplication];
  v51 = v16;
  if ([v50 isVoiceControlRunning])
  {
    LOBYTE(v52) = 0;
  }

  else
  {
    v53 = +[VOTElement springBoardApplication];
    v52 = [v53 isSystemLocked] ^ 1;
  }

  v54 = +[VOTWorkspace sharedWorkspace];
  if ([v54 currentCallState] == 2)
  {
    v55 = +[AXSpringBoardServer server];
    v56 = [v55 isRingerMuted];

    LOBYTE(v52) = (v56 ^ 1) & v52;
  }

  else
  {
  }

  v16 = v51;
  v57 = [v51 BOOLValue];
  v17 = v59;
  -[VOTElementManager _moveToElement:shouldPlaySound:echoSameTouchContainer:shouldScroll:moveToElementNotification:shouldPlayTrackingSound:](self, "_moveToElement:shouldPlaySound:echoSameTouchContainer:shouldScroll:moveToElementNotification:shouldPlayTrackingSound:", v14, v52 & 1, v57, [v59 BOOLValue], 1, objc_msgSend(v18, "BOOLValue"));
  v15 = v60;
  if ([v60 BOOLValue])
  {
    [v14 setNativeFocus];
  }

  self->_lastFirstResponderChangeTime = CFAbsoluteTimeGetCurrent();
  self->_flags.tapShouldHandleTextOperation = 0;
  v49 = 1;
LABEL_25:

  return v49;
}

- (void)_moveToElement:(id)a3 shouldPlaySound:(BOOL)a4 echoSameTouchContainer:(BOOL)a5 shouldScroll:(BOOL)a6 moveToElementNotification:(BOOL)a7 shouldPlayTrackingSound:(BOOL)a8
{
  v8 = a8;
  v9 = a7;
  v10 = a6;
  v11 = a5;
  v12 = a4;
  v14 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v15 = [(VOTElementManager *)self _currentElement];
  if (-[VOTElementManager _setCurrentElement:](self, "_setCurrentElement:", v14) || ([v14 isEqual:v15] & 1) != 0 || !v9)
  {
    if (v12)
    {
      v16 = +[VOTOutputManager outputManager];
      v17 = +[VOSOutputEvent DidFocusOnElement];
      [v16 sendEvent:v17];
    }

    if (v10)
    {
      v26[0] = _NSConcreteStackBlock;
      v26[1] = 3221225472;
      v26[2] = sub_10009B9B8;
      v26[3] = &unk_1001C7778;
      v26[4] = self;
      v27 = v14;
      [v27 scrollToElementForDirectional:1 withCompletion:v26];
    }

    else
    {
      [(SCRCThread *)self->_elementManagerThread performSelector:"_updateCursorFrameForElementIfNeeded:" onTarget:self count:1 objects:v14, 0];
    }

    v20 = [objc_allocWithZone(VOTOutputRequest) init];
    if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:v14])
    {
      v21 = 0x200800802;
    }

    else
    {
      v21 = 8390658;
    }

    if (v11)
    {
      v22 = v21 | 0x20;
    }

    else if ([(VOTElementManager *)self _shouldIncludeContainerInDescriptionForCurrentElement:v14 previousElement:v15])
    {
      v22 = v21 | 0x20;
    }

    else
    {
      v22 = v21;
    }

    if (AXDeviceSupportsSonification() && [v14 supportsAudiographs] && -[VOTElementManager _chartElementDidChangeForElement:oldElement:](self, "_chartElementDidChangeForElement:oldElement:", v14, v15))
    {
      v22 |= 0x4100000000uLL;
    }

    if (v9)
    {
      v23 = v22 | 0x80000000;
    }

    else
    {
      v23 = v22;
    }

    [v20 setGeneratesBraille:1];
    v24 = [(AXDragManager *)self->_dragManager isDragActive];
    v25 = 0x40000000;
    if (!v24)
    {
      v25 = 0;
    }

    [(VOTElementManager *)self _addDescription:v14 toRequest:v20 withOptions:v25 | v23];
    if (v8)
    {
      [v20 setBrailleType:1];
    }

    if ([v14 shouldStartReadAllOnFocus])
    {
      [(VOTElementManager *)self _continueReadAllWithElement:v14 setCurrentElement:0];
    }

    else if (v12)
    {
      [(VOTElementManager *)self sendRequest:v20];
    }
  }

  else if (v8)
  {
    v18 = +[VOTOutputManager outputManager];
    v19 = +[VOSOutputEvent NoItemExists];
    [v18 sendEvent:v19];
  }
}

- (void)_handleMoveToElementNotification:(id)a3
{
  v4 = a3;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![(VOTElementManager *)self _shouldIgnoreElementMovementNotification:v4])
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v5 = [v4 objectForKey:kAXMoveToElementNotificationKeyElement];
      v6 = [v4 objectForKey:kAXMoveToElementNotificationKeySyncNativeFocus];
      v7 = v6;
      if (v6)
      {
        v8 = [v6 BOOLValue];
      }

      else
      {
        v8 = 0;
      }

      v16 = [v4 objectForKey:kAXMoveToElementNotificationKeyIgnoreTouchInProgress];
      v17 = v16;
      if (v16)
      {
        v18 = [v16 BOOLValue];
      }

      else
      {
        v18 = 0;
      }

      v19 = [v4 objectForKey:kAXMoveToElementNotificationKeyEchoSameTouchContainer];
      v20 = v19;
      if (v19)
      {
        v57 = [v19 BOOLValue];
      }

      else
      {
        v57 = 1;
      }

      v21 = [v4 objectForKey:kAXMoveToElementNotificationKeyShouldScrollToElement];
      v56 = v8;
      if (v21)
      {
        v60 = [v20 BOOLValue];
      }

      else
      {
        v60 = 1;
      }

      v55 = v5;
      v22 = [v4 objectForKey:kAXMoveToElementNotificationKeyShouldPlayTrackingSound];
      v23 = v22;
      v24 = v18;
      if (v22 && [v22 BOOLValue])
      {
        v25 = self;
        [(VOTElementManager *)self setLastUserElementTouchTime:CFAbsoluteTimeGetCurrent()];
        v10 = 1;
      }

      else
      {
        v25 = self;
        v10 = 0;
      }

      v26 = [v4 objectForKey:kAXMoveToElementNotificationKeyShouldRefocusIfSameElement];
      v27 = v26;
      if (v26)
      {
        v59 = [v26 BOOLValue];
      }

      else
      {
        v59 = 0;
      }

      v12 = v56;
      v13 = v57;
      self = v25;
      v11 = v24;
      v9 = v55;
      if (!v55)
      {
        goto LABEL_26;
      }
    }

    else
    {
      v9 = v4;
      v10 = 0;
      v11 = 0;
      v12 = 0;
      v59 = 0;
      v60 = 1;
      v13 = 1;
      if (!v9)
      {
LABEL_26:
        v15 = 0;
LABEL_27:
        objc_opt_class();
        isKindOfClass = objc_opt_isKindOfClass();
        if ((v10 | v15 | isKindOfClass))
        {
          v29 = isKindOfClass;
          v30 = +[VOTElement springBoardApplication];
          if ([v30 isSystemLocked])
          {
            v31 = CFAbsoluteTimeGetCurrent() - self->_lastItemSelectionFromTouch;

            if (v31 < 2.0)
            {
              goto LABEL_50;
            }
          }

          else
          {
          }

          if ([VOTSharedWorkspace brailleInputActive] && (objc_msgSend(VOTSharedWorkspace, "brailleInputAllowsElementMovement") & 1) == 0)
          {
            v54 = VOTLogElement();
            if (os_log_type_enabled(v54, OS_LOG_TYPE_DEFAULT))
            {
              *buf = 0;
              _os_log_impl(&_mh_execute_header, v54, OS_LOG_TYPE_DEFAULT, "Stopping _handleMoveToElementNotification to prevent the focus from moving while we're editing text in BSI", buf, 2u);
            }
          }

          else
          {
            if (v29)
            {
              v32 = v9;
            }

            else
            {
              v32 = [objc_allocWithZone(VOTElement) initWithAXElement:v9];
            }

            v33 = v32;
            if ((v11 & 1) == 0 && [VOTSharedWorkspace fingerCount] && self->_flags.focusIsOnElement && (-[VOTElement frame](self->_currentElement, "frame"), v35 = v34, v37 = v36, v39 = v38, v41 = v40, objc_msgSend(v33, "frame"), v63.origin.x = v42, v63.origin.y = v43, v63.size.width = v44, v63.size.height = v45, v62.origin.x = v35, v62.origin.y = v37, v62.size.width = v39, v62.size.height = v41, !CGRectIntersectsRect(v62, v63)))
            {
              [(VOTElementManager *)self _handleLayoutChange:1];
            }

            else if (!self->_flags.isReadingAll || (v46 = kAXWebContentTrait, !-[VOTElement doesHaveTraits:](self->_currentElement, "doesHaveTraits:", kAXWebContentTrait)) || ([v33 doesHaveTraits:v46] & 1) == 0)
            {
              v58 = v33;
              elementManagerThread = self->_elementManagerThread;
              v48 = [NSNumber numberWithBool:v12];
              v49 = [NSNumber numberWithBool:v13];
              v50 = [NSNumber numberWithBool:v60];
              v51 = [NSNumber numberWithBool:v10];
              v52 = [NSNumber numberWithBool:v59];
              v53 = elementManagerThread;
              v33 = v58;
              [(SCRCThread *)v53 performSelector:"_finishHandlingMoveToElementNotification:shouldSyncNativeFocusElement:shouldEchoSameTouchContainer:shouldScrollToElement:shouldPlayTrackingSound:shouldRefocusIfSameElement:" onTarget:self cancelMask:0x40000 count:6 objects:v58, v48, v49, v50, v51, v52, 0];
            }
          }

          goto LABEL_50;
        }

        [(VOTElementManager *)self _handleLayoutChange:1];
LABEL_50:

        goto LABEL_51;
      }
    }

    v14 = CFGetTypeID(v9);
    v15 = v14 == AXUIElementGetTypeID();
    goto LABEL_27;
  }

LABEL_51:
}

- (id)_firstResponderFromCurrentApplications
{
  v10 = 0u;
  v11 = 0u;
  v12 = 0u;
  v13 = 0u;
  v2 = self->_currentApplications;
  v3 = [(NSArray *)v2 countByEnumeratingWithState:&v10 objects:v14 count:16];
  if (v3)
  {
    v4 = v3;
    v5 = *v11;
    while (2)
    {
      for (i = 0; i != v4; i = i + 1)
      {
        if (*v11 != v5)
        {
          objc_enumerationMutation(v2);
        }

        v7 = [*(*(&v10 + 1) + 8 * i) firstResponderElement];
        if (v7)
        {
          v8 = v7;
          goto LABEL_11;
        }
      }

      v4 = [(NSArray *)v2 countByEnumeratingWithState:&v10 objects:v14 count:16];
      if (v4)
      {
        continue;
      }

      break;
    }
  }

  v8 = 0;
LABEL_11:

  return v8;
}

- (void)_handleNativeFocusItemChangedNotification:(id)a3
{
  v4 = a3;
  if (v4)
  {
    if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
    {
      _AXAssert();
    }

    if (self->_systemIsSleeping)
    {
      v5 = VOTLogCommon();
      if (os_log_type_enabled(v5, OS_LOG_TYPE_INFO))
      {
        *v11 = 0;
        _os_log_impl(&_mh_execute_header, v5, OS_LOG_TYPE_INFO, "Ignoring focus update, system is sleeping", v11, 2u);
      }

LABEL_20:

      goto LABEL_21;
    }

    v6 = CFGetTypeID(v4);
    if (v6 == AXUIElementGetTypeID())
    {
      v5 = [objc_allocWithZone(VOTElement) initWithAXElement:v4];
      if (!v5)
      {
        goto LABEL_21;
      }

      goto LABEL_17;
    }

    v7 = CFGetTypeID(v4);
    if (v7 == CFDictionaryGetTypeID())
    {
      v8 = [v4 objectForKeyedSubscript:kAXElementKey];
      v9 = v8;
      if (v8 && (v10 = CFGetTypeID(v8), v10 == AXUIElementGetTypeID()))
      {
        v5 = [objc_allocWithZone(VOTElement) initWithAXElement:v9];
      }

      else
      {
        v5 = 0;
      }

      if (v5)
      {
LABEL_17:
        if ([(VOTElementManager *)self _setCurrentElement:v5])
        {
          [(VOTElementManager *)self _echoDifferentElement:v5 forEvent:0];
        }

        [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v5];
        goto LABEL_20;
      }
    }
  }

LABEL_21:
}

- (void)_handleFirstResponderChangedNotification:(id)a3
{
  v4 = a3;
  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  v5 = +[VOTWorkspace sharedWorkspace];
  v6 = [v5 focusedApplications];

  v7 = VOTLogLayoutChange();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEBUG))
  {
    sub_10012BDEC();
  }

  objc_storeStrong(&self->_currentApplications, v6);
  v8 = [(VOTElementManager *)self _firstResponderFromCurrentElement];
  v9 = VOTLogCommon();
  if (os_log_type_enabled(v9, OS_LOG_TYPE_INFO))
  {
    *buf = 138412290;
    v43 = v8;
    _os_log_impl(&_mh_execute_header, v9, OS_LOG_TYPE_INFO, "First responder element: %@", buf, 0xCu);
  }

  if (v8)
  {
LABEL_14:
    if (CFAbsoluteTimeGetCurrent() - self->_lastExternalUnlockTime < 0.25)
    {
      v41 = v4;
      AXPerformBlockOnMainThreadAfterDelay();
    }

    if (!v8 || [(VOTElement *)self->_firstResponderElement isEqual:v8]|| ![(VOTElement *)v8 isAccessibleElement])
    {
      goto LABEL_39;
    }

    v13 = [(VOTElementManager *)self _currentElement];
    [(VOTElement *)v8 frame];
    v15 = v14;
    v17 = v16;
    v19 = v18;
    v21 = v20;
    [v13 frame];
    v45.origin.x = v22;
    v45.origin.y = v23;
    v45.size.width = v24;
    v45.size.height = v25;
    v44.origin.x = v15;
    v44.origin.y = v17;
    v44.size.width = v19;
    v44.size.height = v21;
    if (!CGRectEqualToRect(v44, v45))
    {
      v26 = [(VOTElement *)v8 value];
      if ([v26 length])
      {
        v27 = [v13 value];
        v28 = [v26 isEqualToString:v27];

        if (!v28)
        {

          goto LABEL_29;
        }
      }

      v29 = kAXIsEditingTrait;
      if ([(VOTElement *)v8 doesHaveTraits:kAXIsEditingTrait])
      {
        v30 = [v13 doesHaveTraits:v29];

        if ((v30 & 1) == 0)
        {
          goto LABEL_29;
        }
      }

      else
      {
      }
    }

    if (self->_firstResponderElement)
    {
LABEL_38:

LABEL_39:
      [(VOTElementRotor *)self->_elementRotor setIgnoreDefaultTypeAutofill:1];
      v38 = [(VOTElementManager *)self _currentElement];
      [v38 clearElementForGesturedTextInput];

      [(VOTElementManager *)self _updateLastFirstResponderChangedTime];
      [(VOTElementManager *)self _updateRotorForCurrentElement];
      v39 = +[VOTBrailleManager manager];
      [v39 updateKeyboardSettings];

      [(VOTElementManager *)self _updateFirstResponder];
      [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
      goto LABEL_40;
    }

LABEL_29:
    [(VOTElementManager *)self _setCurrentElement:v8];
    fetchManager = self->_fetchManager;
    v32 = [(VOTElementManager *)self _currentElement];
    [(VOTElementFetcher *)fetchManager updateCacheWithElement:v32];

    if (![(VOTElementManager *)self _shouldSuppressSpeechForPlayPause]&& ![(VOTElement *)v8 isInAlert])
    {
      v33 = [objc_allocWithZone(VOTOutputRequest) init];
      if ([(VOTElementManager *)self _shouldAnnounceCustomRotorHintForElement:v8])
      {
        v34 = 0x200800802;
      }

      else
      {
        v34 = 8390658;
      }

      v35 = [(AXDragManager *)self->_dragManager isDragActive];
      v36 = 0x40000000;
      if (!v35)
      {
        v36 = 0;
      }

      [(VOTElementManager *)self _addDescription:v8 toRequest:v33 withOptions:v36 | v34];
      [v33 setOriginationType:2];
      [v33 setRequestQueueMixinBehavior:&stru_1001C9FD8];
      [(VOTElementManager *)self sendRequest:v33];
    }

    v37 = +[VOTDisplayManager displayManager];
    [v37 setCursorFrameForElement:v8];

    v40 = v8;
    AXPerformBlockOnMainThreadAfterDelay();
    [(VOTElementManager *)self _disableQuickNavStateTemporarily];

    goto LABEL_38;
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![v4 isEqualToString:@"retry"])
  {
    AXPerformBlockOnMainThreadAfterDelay();
    goto LABEL_14;
  }

  currentElement = self->_currentElement;
  if (!currentElement || ![(VOTElement *)currentElement isVisible])
  {
    v11 = VOTLogCommon();
    if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
    {
      v12 = self->_currentElement;
      *buf = 138412290;
      v43 = v12;
      _os_log_impl(&_mh_execute_header, v11, OS_LOG_TYPE_DEFAULT, "First responder failed to retrieve twice, update app: %@", buf, 0xCu);
    }

    [(VOTElementManager *)self _handleUpdateAppFromTimer];
  }

LABEL_40:
}

- (BOOL)_shouldSwitchToFirstResponder:(id)a3
{
  v4 = a3;
  if (CFAbsoluteTimeGetCurrent() - self->_lastAdjustValueTime >= 0.5)
  {
    v6 = [(VOTElementManager *)self _currentElement];
    if ([v6 isEqual:v4])
    {
      LOBYTE(v5) = 0;
    }

    else
    {
      v7 = [v6 textInputElement];
      if ([v7 isEqual:v4])
      {
        LOBYTE(v5) = 0;
      }

      else
      {
        v8 = [v6 application];
        if ([v8 isSoftwareKeyboardActive] & 1) != 0 || (objc_msgSend(v6, "doesHaveTraits:", kAXKeyboardKeyTrait))
        {
          LOBYTE(v5) = 0;
        }

        else
        {
          v5 = [v6 doesHaveTraits:kAXAllowsDirectInteractionTrait] ^ 1;
        }
      }
    }
  }

  else
  {
    LOBYTE(v5) = 0;
  }

  return v5;
}

- (void)_outputWebLineWithMarkerRange:(id)a3 withElement:(id)a4
{
  v18 = a3;
  v6 = a4;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [v18 count] == 2)
  {
    v7 = [v18 objectAtIndex:0];
    v8 = [v6 textLineStartMarker:v7];

    v9 = [v18 objectAtIndex:1];
    v10 = [v6 textLineEndMarker:v9];

    v11 = [NSArray arrayWithObjects:v8, v10, 0];
    v12 = [v6 stringForTextMarkers:v11];

    v13 = [objc_allocWithZone(VOTOutputRequest) init];
    v14 = [v6 language];
    v15 = [v13 addString:v12 withLanguage:v14];

    v16 = [v13 lastAction];
    [v16 setPerformPunctuationTranslation:1];

    v17 = [v13 lastAction];
    [v17 setReplaceCommas:1];

    [(VOTElementManager *)self sendRequest:v13];
  }
}

- (id)_applicationMatchingBlock:(id)a3 inApplications:(id)a4
{
  v5 = a3;
  v12 = 0u;
  v13 = 0u;
  v14 = 0u;
  v15 = 0u;
  v6 = a4;
  v7 = [v6 countByEnumeratingWithState:&v12 objects:v16 count:16];
  if (v7)
  {
    v8 = *v13;
    while (2)
    {
      for (i = 0; i != v7; i = i + 1)
      {
        if (*v13 != v8)
        {
          objc_enumerationMutation(v6);
        }

        v10 = *(*(&v12 + 1) + 8 * i);
        if (v5[2](v5, v10))
        {
          v7 = v10;
          goto LABEL_11;
        }
      }

      v7 = [v6 countByEnumeratingWithState:&v12 objects:v16 count:16];
      if (v7)
      {
        continue;
      }

      break;
    }
  }

LABEL_11:

  return v7;
}

- (BOOL)_hasApplicationMatchingBlock:(id)a3 inApplications:(id)a4
{
  v4 = [(VOTElementManager *)self _applicationMatchingBlock:a3 inApplications:a4];
  v5 = v4 != 0;

  return v5;
}

- (BOOL)_hasCurrentApplicationMatchingBlock:(id)a3
{
  v3 = [(VOTElementManager *)self _currentApplicationMatchingBlock:a3];
  v4 = v3 != 0;

  return v4;
}

- (void)_handleWebSelectionChangedNotification:(id)a3
{
  v33 = [(VOTElementManager *)self _currentElement];
  if (![(VOTElement *)v33 doesHaveTraits:kAXKeyboardKeyTrait])
  {
    v5 = kAXWebContentTrait;
LABEL_6:
    v7 = v33;
    goto LABEL_7;
  }

  firstResponderElement = self->_firstResponderElement;
  v5 = kAXWebContentTrait;
  if (!firstResponderElement || ![(VOTElement *)firstResponderElement doesHaveTraits:kAXWebContentTrait])
  {
    goto LABEL_6;
  }

  v6 = self->_firstResponderElement;

  v7 = v6;
LABEL_7:
  v34 = v7;
  if ([(VOTElement *)v7 doesHaveTraits:v5]|| [(VOTElement *)v34 isReadingContent])
  {
    v8 = [(VOTElement *)v34 textMarkerRangeForSelection];
    v9 = [(VOTElement *)v34 stringForTextMarkers:v8];
    p_webSelectionText = &self->_webSelectionText;
    v11 = [(NSString *)self->_webSelectionText length];
    v12 = [v9 length];
    if (!v12)
    {
      v21 = self->_firstResponderElement;
      if (v21)
      {
        if ([(VOTElement *)v21 doesHaveTraits:v5])
        {
          [(VOTElementManager *)self _handleSelectionChangedNotification:0];
          webSelectionText = self->_webSelectionText;
          self->_webSelectionText = 0;
          goto LABEL_42;
        }
      }
    }

    if (v12 | v11)
    {
      v13 = VOTSharedWorkspace;
      v14 = [(VOTElementManager *)self _currentRotorSelection];
      [v13 refreshBraille:1 rotorSelection:v14];
    }

    v15 = [objc_allocWithZone(VOTOutputRequest) init];
    if (CFAbsoluteTimeGetCurrent() - self->_performedTextSelectionOperation < 0.25 && [v9 length] || v11 < 1)
    {
      v18 = v9;
LABEL_21:
      webSelectionText = v18;
      v20 = @"element.selected.text";
LABEL_39:
      if ([webSelectionText length])
      {
        v28 = [(VOTElement *)v34 language];
        v29 = [v15 addString:webSelectionText withLanguage:v28];

        v30 = [VOTSharedWorkspace selectedLanguage];
        v31 = sub_1000516CC(off_1001FDDD0, v20, 0, v30);
        v32 = [v15 addString:v31 withLanguage:v30];

        [v15 setInterruptsEverything:1];
        [v15 setGeneratesBraille:1];
        [v15 setBrailleType:4];
        [(VOTElementManager *)self sendRequest:v15];
      }

      objc_storeStrong(&self->_webSelectionText, v9);

      goto LABEL_42;
    }

    if (v12 > v11)
    {
      v16 = [v9 rangeOfString:*p_webSelectionText];
      if (v16 != 0x7FFFFFFFFFFFFFFFLL)
      {
        if (self->_lastUserTextSelectionDirection > 1uLL)
        {
          [v9 substringToIndex:v16];
        }

        else
        {
          [v9 substringFromIndex:&v16[v17]];
        }
        v18 = ;
        goto LABEL_21;
      }

      goto LABEL_30;
    }

    if (v11 > v12)
    {
      v24 = *p_webSelectionText;
      if (v12)
      {
        v25 = [(NSString *)v24 rangeOfString:v9];
        if (v25 == 0x7FFFFFFFFFFFFFFFLL)
        {
          goto LABEL_30;
        }

        if ((self->_lastUserTextSelectionDirection | 2) == 2)
        {
          [(NSString *)*p_webSelectionText substringFromIndex:&v25[v26]];
        }

        else
        {
          [(NSString *)*p_webSelectionText substringToIndex:v25];
        }
        v27 = ;
      }

      else
      {
        v27 = v24;
      }

      webSelectionText = v27;
      goto LABEL_38;
    }

LABEL_30:
    webSelectionText = 0;
LABEL_38:
    v20 = @"element.unselected.text";
    goto LABEL_39;
  }

  v22 = [(VOTElementManager *)self _currentApplicationMatchingBlock:&stru_1001C9FF8];
  v8 = v22;
  if (!v22)
  {
    goto LABEL_43;
  }

  v9 = [v22 firstElementInApplicationForFocus];
  webSelectionText = [(VOTElementManager *)self _nearestWebElement:v9];
  v23 = [webSelectionText textMarkerRangeForSelection];
  [(VOTElementManager *)self _outputWebLineWithMarkerRange:v23 withElement:webSelectionText];

LABEL_42:
LABEL_43:
}

- (BOOL)_isKeyboardLineMovement
{
  v2 = [VOTSharedWorkspace keyboardPressInfo];
  v3 = [v2 keyCode] - 81;

  if (v3 >= 2)
  {
    v5 = +[VOTKeyboardManager keyboardManager];
    v6 = [v5 lastDispatchedKeyEvent];
    if (v6)
    {
      v7 = +[VOTKeyboardManager keyboardManager];
      v8 = [v7 lastReleasedToSystemKeyEvent];
      if (v8)
      {
        v9 = +[VOTKeyboardManager keyboardManager];
        [v9 lastDispatchedKeyEventTime];
        v11 = v10;
        v12 = +[VOTKeyboardManager keyboardManager];
        [v12 lastReleasedToSystemKeyEventTime];
        v14 = v11 > v13;
      }

      else
      {
        v14 = 0;
      }
    }

    else
    {
      v14 = 0;
    }

    Current = CFAbsoluteTimeGetCurrent();
    v16 = +[VOTKeyboardManager keyboardManager];
    v17 = [v16 lastDispatchedKeyEvent];
    v18 = [v17 keyInfo];
    if ([v18 keyCode] - 81 >= 2)
    {

      if (v14)
      {
        LOBYTE(v4) = 0;
        return v4;
      }
    }

    else
    {
      v19 = +[VOTKeyboardManager keyboardManager];
      [v19 lastDispatchedKeyEventTime];
      v4 = Current - v20 < 0.2;

      if (v4 || v14)
      {
        return v4;
      }
    }

    v21 = +[VOTKeyboardManager keyboardManager];
    v22 = [v21 lastReleasedToSystemKeyEvent];
    if ([v22 keyCode] - 81 > 1)
    {
      LOBYTE(v4) = 0;
    }

    else
    {
      v23 = +[VOTKeyboardManager keyboardManager];
      [v23 lastReleasedToSystemKeyEventTime];
      LOBYTE(v4) = Current - v24 < 0.2;
    }
  }

  else
  {
    LOBYTE(v4) = 1;
  }

  return v4;
}

- (void)_handleSelectionChangedNotification:(id)a3
{
  v5 = a3;
  if ([VOTSharedWorkspace suppressSelectionChangeNotificationCount] < 1)
  {
    v13 = self->_firstResponderElement;
    [(VOTElementManager *)self _updateFirstResponder];
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v14 = [v5 objectForKey:kAXSelectionChangedRemoteUserOperation];
      v15 = [v14 BOOLValue];
    }

    else
    {
      v15 = 0;
    }

    if ([(VOTElementManager *)self _ignoreTextEditingNotificationsForPickerElementUsage])
    {
      goto LABEL_36;
    }

    v221 = v15;
    v226 = v13;
    v233[0] = _NSConcreteStackBlock;
    v233[1] = 3221225472;
    v233[2] = sub_10009ED6C;
    v233[3] = &unk_1001CA020;
    v233[4] = self;
    v16 = objc_retainBlock(v233);
    v17 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
    v18 = +[NSCharacterSet punctuationCharacterSet];
    v229[0] = _NSConcreteStackBlock;
    v229[1] = 3221225472;
    v229[2] = sub_10009EDE0;
    v229[3] = &unk_1001CA048;
    v225 = v16;
    v232 = v225;
    v223 = v18;
    v230 = v223;
    v222 = v17;
    v231 = v222;
    v224 = objc_retainBlock(v229);
    Current = CFAbsoluteTimeGetCurrent();
    v227 = [VOTSharedWorkspace selectedLanguage];
    lastCharacterRotorMovement = self->_lastCharacterRotorMovement;
    lastWordRotorMovement = self->_lastWordRotorMovement;
    v22 = +[VOTKeyboardManager keyboardManager];
    v23 = [v22 lastDispatchedKeyEvent];
    if (v23 && (+[VOTKeyboardManager keyboardManager](VOTKeyboardManager, "keyboardManager"), v3 = objc_claimAutoreleasedReturnValue(), [v3 lastDispatchedKeyEventTime], Current - v24 < 0.2))
    {
      v25 = 1;
      v26 = v227;
    }

    else
    {
      v27 = +[VOTKeyboardManager keyboardManager];
      v28 = [v27 lastReleasedToSystemKeyEvent];
      if (v28)
      {
        v29 = +[VOTKeyboardManager keyboardManager];
        [v29 lastReleasedToSystemKeyEventTime];
        v31 = Current - v30 < 0.2;

        v25 = v31;
      }

      else
      {
        v25 = 0;
      }

      v26 = v227;

      if (!v23)
      {
LABEL_21:

        self->_lastSelectionChangeTime = Current;
        v13 = v226;
        if (!self->_didIgnoreLastFirstResponderChangeOnSelectionChange && Current - self->_lastFirstResponderChangeTime < 1.5)
        {
          self->_didIgnoreLastFirstResponderChangeOnSelectionChange = 1;
LABEL_35:

LABEL_36:
          goto LABEL_37;
        }

        if (Current - self->_lastValueChangeTime < 0.1)
        {
          goto LABEL_32;
        }

        v32 = VOTLogCommon();
        if (os_log_type_enabled(v32, OS_LOG_TYPE_INFO))
        {
          v33 = [NSNumber numberWithDouble:Current - self->_lastPressOnMediaSessionElement];
          *buf = 138412290;
          v235 = v33;
          _os_log_impl(&_mh_execute_header, v32, OS_LOG_TYPE_INFO, "layout change: last media session press: %@", buf, 0xCu);
        }

        if (Current - self->_lastPressOnMediaSessionElement < 3.5 || !self->_firstResponderElement)
        {
LABEL_32:
          v36 = 0;
LABEL_33:
          v37 = VOTSharedWorkspace;
          v38 = [(VOTElementManager *)self _currentRotorSelection];
          [v37 refreshBraille:1 rotorSelection:v38];

LABEL_34:
          [(VOTElementManager *)self _resetRotorTextNavigation];
          [(VOTElementManager *)self _updateCurrentElementForTextInputSelectionChangeIfNeeded];

          goto LABEL_35;
        }

        if ([(VOTElementManager *)self _shouldSwitchToFirstResponder:?]&& [(VOTElement *)self->_firstResponderElement isAccessibleElement])
        {
          [(VOTElementManager *)self _setCurrentElement:self->_firstResponderElement];
          v34 = +[VOTDisplayManager displayManager];
          [v34 setCursorFrameForElement:self->_firstResponderElement];

          v35 = 0;
        }

        else
        {
          v35 = 1;
        }

        if (![(VOTElement *)v226 isEqual:self->_firstResponderElement])
        {
          goto LABEL_35;
        }

        v220 = v35;
        v215 = v25;
        v39 = +[AXSettings sharedInstance];
        v40 = [v39 voiceOverCursorOutputStyle];

        v41 = [(VOTElement *)self->_firstResponderElement selectedTextRange];
        v43 = v42;
        v44 = +[AXSubsystemVoiceOver sharedInstance];
        v45 = [v44 ignoreLogging];

        if ((v45 & 1) == 0)
        {
          v213 = v40;
          range = v43;
          v46 = v41;
          v47 = +[AXSubsystemVoiceOver identifier];
          v48 = AXLoggerForFacility();

          v49 = AXOSLogLevelFromAXLogLevel();
          if (os_log_type_enabled(v48, v49))
          {
            v50 = AXColorizeFormatLog();
            v236.location = v46;
            v236.length = range;
            v51 = NSStringFromRange(v236);
            NSStringFromRange(self->_elementSelectionRangeBufferForSelectionChange);
            v192 = v191 = v51;
            v210 = v50;
            v52 = _AXStringForArgs();

            v53 = v48;
            if (os_log_type_enabled(v53, v49))
            {
              *buf = 138543362;
              v235 = v52;
              _os_log_impl(&_mh_execute_header, v53, v49, "%{public}@", buf, 0xCu);
            }

            v26 = v227;
          }

          v41 = v46;
          v43 = range;
          v40 = v213;
        }

        if (v43 || self->_elementSelectionRangeBufferForSelectionChange.length)
        {
          if (v221)
          {
            v36 = 0;
            goto LABEL_56;
          }

          if (v26)
          {
            v54 = v26;
          }

          else
          {
            v55 = [(VOTElement *)self->_firstResponderElement application];
            v54 = [v55 currentSoftwareKeyboardLanguage];
          }

          v56 = [(VOTElement *)self->_firstResponderElement value:v191];
          [(VOTElementManager *)self _outputSelectionDifference:v41 oldRange:v43 string:self->_elementSelectionRangeBufferForSelectionChange.location language:self->_elementSelectionRangeBufferForSelectionChange.length, v56, v54];
          v36 = 0;
          goto LABEL_54;
        }

        location = self->_elementSelectionRangeBufferForSelectionChange.location;
        v58 = [(VOTElement *)self->_firstResponderElement value];
        v54 = v58;
        v214 = v58;
        if (v41 <= location)
        {
          if (v41 >= location)
          {
            if (v41 || self->_elementSelectionRangeBufferForSelectionChange.location)
            {
              if (v41 != [v58 length] || (v73 = self->_elementSelectionRangeBufferForSelectionChange.location, v162 = v73 == objc_msgSend(v54, "length"), v26 = v227, !v162))
              {
                v74 = +[AXSubsystemVoiceOver sharedInstance];
                v75 = [v74 ignoreLogging];

                if (v75)
                {
                  v36 = 0;
LABEL_98:
                  v54 = v214;
                  goto LABEL_55;
                }

                v93 = v41;
                v94 = +[AXSubsystemVoiceOver identifier];
                v95 = AXLoggerForFacility();

                v56 = v95;
                v96 = AXOSLogLevelFromAXLogLevel();
                if (!os_log_type_enabled(v56, v96))
                {
                  v36 = 0;
                  v41 = v93;
                  v54 = v214;
LABEL_54:

LABEL_55:
LABEL_56:
                  [(VOTElementManager *)self _elementSelectionRangeDidChange:v41 reason:v43, 1, v191];
                  if (!v220)
                  {
                    goto LABEL_34;
                  }

                  goto LABEL_33;
                }

                v216 = AXColorizeFormatLog();
                v196 = _AXStringForArgs();
                if (os_log_type_enabled(v56, v96))
                {
                  *buf = 138543362;
                  v235 = v196;
                  _os_log_impl(&_mh_execute_header, v56, v96, "%{public}@", buf, 0xCu);
                }

                v36 = 0;
                v41 = v93;
                v54 = v214;
LABEL_226:

                goto LABEL_54;
              }
            }

            v211 = location;
            if ([VOTSharedWorkspace fingerCount])
            {
              v36 = 0;
              goto LABEL_55;
            }

            v198 = v41;
            v98 = [(VOTElement *)self->_firstResponderElement application];
            v99 = [v98 isDictationListening];

            if (v99)
            {
              v36 = 0;
              v13 = v226;
              v26 = v227;
              goto LABEL_98;
            }

            v105 = +[AXSubsystemVoiceOver sharedInstance];
            v106 = [v105 ignoreLogging];

            if ((v106 & 1) == 0)
            {
              v107 = +[AXSubsystemVoiceOver identifier];
              v108 = AXLoggerForFacility();

              v109 = AXOSLogLevelFromAXLogLevel();
              if (os_log_type_enabled(v108, v109))
              {
                v110 = AXColorizeFormatLog();
                v111 = _AXStringForArgs();
                v112 = v108;
                if (os_log_type_enabled(v112, v109))
                {
                  *buf = 138543362;
                  v235 = v111;
                  _os_log_impl(&_mh_execute_header, v112, v109, "%{public}@", buf, 0xCu);
                }
              }
            }

            v113 = +[VOTOutputManager outputManager];
            v114 = +[VOSOutputEvent BoundaryEncountered];
            [v113 sendEvent:v114];

            if ([v214 length] && (-[VOTElement doesHaveTraits:](self->_firstResponderElement, "doesHaveTraits:", kAXTextAreaTrait) || -[VOTElement doesHaveAllTraits:](self->_firstResponderElement, "doesHaveAllTraits:", kAXTextEntryTrait | kAXWebContentTrait | kAXIsEditingTrait)))
            {
              if (v198)
              {
                v36 = sub_1000511CC(off_1001FDDD0, @"bottom.document", 0);

                v70 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v198 - 1];
                v208 = v115;
              }

              else
              {
                v36 = sub_1000511CC(off_1001FDDD0, @"top.document", 0);

                [(VOTElement *)self->_firstResponderElement lineRangeForPosition:0];
                v208 = v190;
                v70 = 0;
              }
            }

            else
            {
              v208 = 0;
              v70 = 0;
              v36 = 0;
            }

            v67 = 0;
            v13 = v226;
            v26 = v227;
            v41 = v198;
            v43 = 0;
            v54 = v214;
            v69 = v208;
          }

          else
          {
            v211 = location;
            v67 = 0;
            v68 = self->_elementSelectionRangeBufferForSelectionChange.location;
            self->_cursorBorderHitCount = 0;
            if (v68 == 0x7FFFFFFF)
            {
              v69 = 1;
              v70 = v41;
              v36 = 0;
              goto LABEL_97;
            }

            v69 = v68 - v41;
            v36 = 0;
            v70 = v41;
          }

LABEL_96:
          if (v69 < 1)
          {
            goto LABEL_55;
          }

LABEL_97:
          v202 = v67;
          v80 = v54;
          v81 = v70;
          v200 = &v70[v69];
          if (&v70[v69] > [v80 length])
          {
            goto LABEL_98;
          }

          v207 = v69;
          v82 = (v225[2])(v225, v70, v69);
          v83 = +[NSCharacterSet newlineCharacterSet];
          [v82 rangeOfCharacterFromSet:v83];
          v85 = v84;

          v197 = v41;
          rangea = v43;
          v204 = v81;
          if (!self->_flags.performedRotorTextNavigation)
          {
            v86 = [VOTSharedWorkspace keyboardPressInfo];
            v87 = (v86 != 0) | v215;

            if ((v87 & 1) == 0)
            {
              v97 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v41 + 1];
              if (v97 != -[VOTElement lineRangeForPosition:](self->_firstResponderElement, "lineRangeForPosition:", v41) + 1 && ![v82 isEqualToString:@"\n"])
              {
                goto LABEL_143;
              }

              v92 = sub_1000511CC(off_1001FDDD0, @"empty.line", 0);
LABEL_142:

              v82 = v92;
LABEL_143:
              v26 = v227;
              goto LABEL_150;
            }

            v88 = v82;
            if ([(VOTElementManager *)self _isKeyboardLineMovement])
            {
              v89 = v41;
              v90 = v41 + 1;
              v91 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v90];
              if (v91 == [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v89]+ 1)
              {
                v92 = @"\n";
              }

              else
              {
                if (v197 == [v214 length])
                {
                  v116 = v197 - 1;
                }

                else
                {
                  v117 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v197];
                  v116 = v197;
                  if (v197 == &v117[v118])
                  {
                    v119 = [(VOTElement *)self->_firstResponderElement valueForRange:v197, 1];
                    v120 = +[NSCharacterSet newlineCharacterSet];
                    v121 = [v119 rangeOfCharacterFromSet:v120];

                    if (v121 == 0x7FFFFFFFFFFFFFFFLL)
                    {
                      v116 = v90;
                    }

                    else
                    {
                      v116 = v197;
                    }
                  }
                }

                firstResponderElement = self->_firstResponderElement;
                v123 = [(VOTElement *)firstResponderElement lineRangeForPosition:v116];
                v92 = [(VOTElement *)firstResponderElement valueForRange:v123, v124];
              }

              goto LABEL_142;
            }

            if (v85 != 1)
            {
              if ([v82 length] < 2)
              {
                v217 = v207;
              }

              else
              {
                v100 = [(VOTElement *)self->_firstResponderElement value];
                if (&v81[v207] >= [v100 length])
                {
                  v101 = 0;
                  v217 = v207;
                }

                else
                {
                  v101 = 0;
                  v217 = v207;
                  v102 = v200;
                  do
                  {
                    v103 = +[NSCharacterSet punctuationCharacterSet];
                    v104 = [v103 characterIsMember:{objc_msgSend(v100, "characterAtIndex:", v102)}];

                    if (!v104)
                    {
                      break;
                    }

                    ++v217;

                    v100 = [(VOTElement *)self->_firstResponderElement value];
                    ++v102;
                    v101 = 1;
                  }

                  while (v102 < [v100 length]);
                }

                if (v101)
                {
                  v125 = [(VOTElement *)self->_firstResponderElement valueForRange:v204, v217];

                  v88 = v125;
                }
              }

              if (v207 != 1)
              {
                v184 = v197 >= v211 ? v202 : 0;
                v185 = v197 < v211 ? 1 : 2;
                v186 = [v88 wordFromPosition:v184 inDirection:v185];
                if (v187)
                {
                  v188 = v186;
                  if (v186 != 0x7FFFFFFFFFFFFFFFLL)
                  {
                    v189 = v187;
                    if (&v186[v187] <= [v88 length])
                    {
                      v82 = v88;
                      v92 = [v88 substringWithRange:{v188, v189}];
                      v207 = v217;
                      goto LABEL_142;
                    }
                  }
                }
              }

              v207 = v217;
            }

            v26 = v227;
            v82 = v88;
          }

LABEL_150:
          v126 = [v82 length];
          v127 = +[NSCharacterSet whitespaceCharacterSet];
          if (v126 < 1)
          {
            v130 = 1;
          }

          else
          {
            v128 = 0;
            v129 = 0;
            do
            {
              v129 += [v127 characterIsMember:{objc_msgSend(v82, "characterAtIndex:", v128++)}];
            }

            while (v126 != v128);
            v130 = v129 < 2;
            v26 = v227;
          }

          if ([v82 length] > 1)
          {
            v131 = [v82 stringByReplacingOccurrencesOfString:@"\n" withString:@" "];

            v82 = v131;
          }

          v132 = [(VOTElement *)self->_firstResponderElement doesHaveTraits:kAXSecureTextFieldTrait];
          v199 = [(VOTElement *)self->_firstResponderElement attributedValueForRange:v204, v207];
          [VOTSharedWorkspace addMisspellingsForString:?];
          v196 = v127;
          if (v132)
          {
            v212 = 0;
            v201 = 0;
            v203 = 0;
            goto LABEL_174;
          }

          v133 = [(VOTElement *)self->_firstResponderElement lineStartPosition];
          if (v133 == self->_lastSeenLineStartPositionForFontProperties)
          {
            v203 = 0;
          }

          else
          {
            v134 = [(VOTElement *)self->_firstResponderElement lineRangeForPosition:v197];
            v136 = [(VOTElement *)self->_firstResponderElement attributedValueForRange:v134, v135];
            v203 = [(VOTElementManager *)self _listItemLabelForAXAttributedString:v136];
          }

          self->_lastSeenLineStartPositionForFontProperties = v133;
          v137 = [v199 string];
          v138 = [(VOTElementManager *)self stringIsTextAttachment:v137];

          v139 = [v199 length];
          if (v138)
          {
            v212 = [(VOTElementManager *)self _textAttachmentElementForString:v199 inRange:0, v139];
            if (v212)
            {
              v130 = 0;
              v201 = 0;
              goto LABEL_174;
            }

            sub_1000511CC(off_1001FDDD0, @"attachment", 0);
            v130 = 0;
            v201 = 0;
            v82 = v142 = v82;
          }

          else
          {
            if (v139)
            {
              v140 = [v199 length];
              if ((v140 - 1) >= (((__PAIR128__(v197, v211) - v197) >> 64) - v204))
              {
                v141 = (((__PAIR128__(v197, v211) - v197) >> 64) - v204);
              }

              else
              {
                v141 = v140 - 1;
              }

              v142 = [v199 attributesAtIndex:v141 effectiveRange:0];
            }

            else
            {
              v142 = 0;
            }

            v201 = [(VOTElementManager *)self _computeChangedFontAttributes:v142 storedAttributes:self->_lastSeenFontProperties haveMisspellCheck:1];
            v26 = v227;
          }

          v212 = 0;
LABEL_174:
          v143 = +[VOTOutputRequest createRequest];
          v144 = VOTLogCommon();
          if (os_log_type_enabled(v144, OS_LOG_TYPE_INFO))
          {
            v145 = [v143 keyboardLanguageHint];
            *buf = 138412290;
            v235 = v145;
            _os_log_impl(&_mh_execute_header, v144, OS_LOG_TYPE_INFO, "Keyboard language hint: %@", buf, 0xCu);
          }

          v146 = [(VOTElement *)self->_firstResponderElement application];
          [v146 currentSoftwareKeyboardLanguage];
          v148 = v147 = v143;
          [v147 setKeyboardLanguageHint:v148];

          v228 = v147;
          v149 = [v147 keyboardLanguageHint];
          if (([v149 hasPrefix:@"ar"] & 1) != 0 || objc_msgSend(v149, "hasPrefix:", @"he"))
          {

            v150 = 0;
            v41 = v197;
            v54 = v214;
          }

          else
          {
            v41 = v197;
            v54 = v214;
            v150 = v149;
          }

          v195 = v150;
          if (v26)
          {
            v150 = v26;
          }

          v205 = v150;
          if ([v36 length])
          {
            v151 = [v228 addString:v36 withLanguage:v26 category:@"TopBottomString"];
          }

          v194 = v130;
          if (v212)
          {
            [v212 addTextualInformationToRequest:v228 options:0x4000 dataPackage:0];
            v152 = sub_1000511CC(off_1001FDDD0, @"attachment", v26);
            v153 = [v228 addString:v152];

            v82 = 0;
          }

          if ([v203 length])
          {
            v154 = [v228 addString:v203];
            v155 = [v228 lastAction];
            LODWORD(v156) = 1062836634;
            v157 = [NSNumber numberWithFloat:v156];
            [v155 setObject:v157 forVariant:32];

            v54 = v214;
          }

          v158 = +[AXSettings sharedInstance];
          v159 = [v158 voiceOverPhoneticsFeedback];

          v209 = 0;
          if ([v82 length] == 1 && v159)
          {
            v209 = [(VOTElementManager *)self _phoneticStringForLetter:v82 language:v205];
          }

          if ([v82 isAXAttributedString])
          {
            v160 = [(VOTElementManager *)self _orderedMonitoredFontAttributes];
            [v82 removeAttributes:v160];
          }

          v216 = v82;
          v161 = [v209 length];
          if (v161)
          {
            v162 = v159 == 0;
          }

          else
          {
            v162 = 1;
          }

          v163 = !v162;
          if (!v161 || v159 != 2)
          {
            v193 = v159;
            v173 = [v228 addString:v216 withLanguage:v205];
            v174 = [v228 lastAction];
            [v174 setObject:kCFBooleanTrue forVariant:50];

            if (v194)
            {
              v176 = [v228 lastAction];
              v177 = [VOTSharedWorkspace punctuationGroupForUUID:AXSSVoiceOverPunctuationGroupAll];
              [v176 setObject:v177 forVariant:30];

              v54 = v214;
            }

            v43 = rangea;
            v56 = v212;
            if (!v163)
            {
              goto LABEL_217;
            }

            if (v193 != 2)
            {
              LODWORD(v175) = 1061158912;
              [v228 addPause:v175];
            }
          }

          v164 = +[AXSettings sharedInstance];
          v165 = [v164 voiceOverCapitalLetterFeedback];

          if (v165 || !sub_10005088C(v216))
          {
            v169 = [v228 addString:v209];
          }

          else
          {
            v166 = sub_1000511CC(off_1001FDDD0, @"CapitalLetterFormat", 0);
            v167 = [NSString stringWithFormat:v166, v209];

            v168 = [v228 addString:v167];
          }

          v56 = v212;
          v54 = v214;
          v43 = rangea;
          if ([(VOTElementManager *)self _needsPhoneticBrailleForLanauge:v205])
          {
            [(VOTElementManager *)self _sendBrailleAlert:v209];
          }

          if ([v216 length] == 1)
          {
            if (sub_10005088C(v216))
            {
              v170 = +[AXSettings sharedInstance];
              v171 = [v170 voiceOverCapitalLetterFeedback];

              v162 = v171 == 1;
              v56 = v212;
              v54 = v214;
              if (v162)
              {
                v172 = [v228 lastAction];
                [v172 setObject:&off_1001D9940 forVariant:32];

                v56 = v212;
              }
            }
          }

LABEL_217:
          if ((TTSisSpeakableEmojiString() & 1) != 0 || [v216 length] == 1)
          {
            v178 = +[VOTWorkspace sharedWorkspace];
            v179 = [v178 visionEngine];
            [v179 processStringFor2DBrailleDisplay:v216];

            v54 = v214;
            v56 = v212;
          }

          v13 = v226;
          if ([v201 length])
          {
            v180 = [v228 addAttributedString:v201];
            if ([VOTSharedWorkspace typingPitchChangeEnabled])
            {
              v181 = [v228 lastAction];
              LODWORD(v182) = 1062836634;
              v183 = [NSNumber numberWithFloat:v182];
              [v181 setObject:v183 forVariant:32];

              v54 = v214;
              v56 = v212;
            }
          }

          if ((v221 & 1) == 0)
          {
            [(VOTElementManager *)self sendRequest:v228];
          }

          goto LABEL_226;
        }

        v59 = Current - lastWordRotorMovement;
        v60 = "ntManagerDelegate>";
        v211 = location;
        if (v40 == 2 && v59 >= 0.35)
        {
          if (v215)
          {
            v61 = +[VOTKeyboardManager keyboardManager];
            v62 = [v61 lastDispatchedKeyEvent];
            [v62 keyInfo];
            v64 = v63 = v41;
            v206 = [v64 modifierState];

            v41 = v63;
            v40 = 2;

            v54 = v214;
            v60 = "@<VOTExplorerElementManagerDelegate>" + 19;
            if ((v206 & 2) != 0)
            {
              v65 = [v214 length];
              if ((v65 - v41) >= 0x64)
              {
                v66 = 100;
              }

              else
              {
                v66 = v65 - v41;
              }

              [(VOTElement *)self->_firstResponderElement setSelectedTextRange:&v41[(v224[2])(v224 refreshBraille:v41, v66, 0)], 0, 1];
              self->_lastWordRotorMovement = CFAbsoluteTimeGetCurrent();

              goto LABEL_35;
            }
          }
        }

        else if (v40 == 2)
        {
          v67 = 0;
          self->_cursorBorderHitCount = 0;
          v72 = v41;
LABEL_86:
          v76 = *(v60 + 66);
          if (Current - lastCharacterRotorMovement >= v76)
          {
            v70 = v72;
            if (v59 < v76)
            {
              v77 = v67;
              v78 = [v54 length];
              if ((v78 - &v70[v77]) >= 0x64)
              {
                v79 = 100;
              }

              else
              {
                v79 = v78 - &v70[v77];
              }

              v67 = (v224[2])(v224, v70, v79, 1);
            }

            v36 = 0;
          }

          else
          {
            v36 = 0;
            v70 = v72 + 1;
          }

          v69 = v67;
          goto LABEL_96;
        }

        v71 = self->_elementSelectionRangeBufferForSelectionChange.location;
        if (v71 == 0x7FFFFFFF)
        {
          v67 = 0;
          v72 = 0;
        }

        else
        {
          v72 = (self->_elementSelectionRangeBufferInternal.length + v71);
          v67 = v41 - v72;
        }

        self->_cursorBorderHitCount = 0;
        v43 = 0;
        if (v40 != 2)
        {
          v36 = 0;
          v69 = v67;
          v70 = v72;
          goto LABEL_96;
        }

        goto LABEL_86;
      }
    }

    goto LABEL_21;
  }

  [(VOTElementManager *)self _reupdateTextSelectionInformation];
  v6 = +[AXSubsystemVoiceOver sharedInstance];
  v7 = [v6 ignoreLogging];

  if ((v7 & 1) == 0)
  {
    v8 = +[AXSubsystemVoiceOver identifier];
    v9 = AXLoggerForFacility();

    v10 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v9, v10))
    {
      v11 = AXColorizeFormatLog();
      v191 = [VOTSharedWorkspace suppressSelectionChangeNotificationCount];
      v12 = _AXStringForArgs();
      if (os_log_type_enabled(v9, v10))
      {
        *buf = 138543362;
        v235 = v12;
        _os_log_impl(&_mh_execute_header, v9, v10, "%{public}@", buf, 0xCu);
      }
    }
  }

  [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:{objc_msgSend(VOTSharedWorkspace, "suppressSelectionChangeNotificationCount", v191) - 1}];
LABEL_37:
}

- (void)_elementSelectionRangeDidChange:(_NSRange)a3 reason:(int64_t)a4
{
  if (a4 <= 2)
  {
    self->_elementSelectionRangeBufferInternal = a3;
    self->_elementSelectionRangeBufferForValueChange = a3;
    self->_elementSelectionRangeBufferForSelectionChange = a3;
  }
}

- (_NSRange)_elementSelectionRange
{
  length = self->_elementSelectionRangeBufferInternal.length;
  location = self->_elementSelectionRangeBufferInternal.location;
  result.length = length;
  result.location = location;
  return result;
}

- (void)_updateCurrentElementForTextInputSelectionChangeIfNeeded
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = [(VOTElementManager *)self _currentElement];
  v4 = v3;
  if (self->_firstResponderElement)
  {
    v5 = [v3 textInputElement];
    v6 = [v5 isEqual:self->_firstResponderElement];

    if (v6)
    {
      v7 = [v4 textInputElementRange];
      if (v7 != 0x7FFFFFFF)
      {
        v9 = v7;
        v10 = v8;
        v11 = [(VOTElement *)self->_firstResponderElement uiElement];
        [v11 rectWithAXAttribute:2057];
        v13 = v12;
        v15 = v14;
        v17 = v16;
        v19 = v18;

        location = self->_elementSelectionRangeBufferInternal.location;
        length = self->_elementSelectionRangeBufferInternal.length;
        if (v9 > length + location || v9 + v10 < location)
        {
          if (v9 <= length + location)
          {
            v28 = 1;
          }

          else
          {
            v28 = 2;
          }

LABEL_19:
          self->_flags.performedElementUpdateForSelectionChange = 1;
          [(VOTElementManager *)self _cancelPreviousElementSearch];
          fetchManager = self->_fetchManager;
          v34[0] = _NSConcreteStackBlock;
          v34[1] = 3221225472;
          v34[2] = sub_10009F19C;
          v34[3] = &unk_1001CA070;
          v34[4] = self;
          v34[5] = location;
          v34[6] = length;
          *&v34[7] = v13;
          *&v34[8] = v15;
          *&v34[9] = v17;
          *&v34[10] = v19;
          elementSearchGeneration = self->_elementSearchGeneration;
          LOBYTE(v31) = [VOTSharedWorkspace navigationStyleHonorsGroups];
          [(VOTElementFetcher *)fetchManager searchForElementInDirection:v28 fromElement:v4 matchBlock:v34 rangeMatch:0 searchType:999999 generation:elementSearchGeneration startingRange:0x7FFFFFFFLL groupNavigationStyle:0, v31];
          goto LABEL_20;
        }

        [v4 updateFrame];
        [v4 frame];
        x = v35.origin.x;
        y = v35.origin.y;
        width = v35.size.width;
        height = v35.size.height;
        v41.origin.x = v13;
        v41.origin.y = v15;
        v41.size.width = v17;
        v41.size.height = v19;
        v36 = CGRectIntersection(v35, v41);
        if (CGRectIsEmpty(v36))
        {
          v37.origin.x = x;
          v37.origin.y = y;
          v37.size.width = width;
          v37.size.height = height;
          MaxY = CGRectGetMaxY(v37);
          v38.origin.x = v13;
          v38.origin.y = v15;
          v38.size.width = v17;
          v38.size.height = v19;
          MinY = CGRectGetMinY(v38);
          v39.origin.x = x;
          v39.origin.y = y;
          v39.size.width = width;
          v39.size.height = height;
          v26 = CGRectGetMinY(v39);
          v40.origin.x = v13;
          v40.origin.y = v15;
          v40.size.width = v17;
          v40.size.height = v19;
          v27 = CGRectGetMaxY(v40);
          v28 = v26 < v27 ? 1 : 2;
          if (v26 >= v27 || MaxY <= MinY)
          {
            goto LABEL_19;
          }
        }
      }
    }
  }

LABEL_20:
}

- (int64_t)typingFeedbackForKeyboardType
{
  if ([VOTSharedWorkspace brailleInputActive])
  {
    v3 = +[AXSettings sharedInstance];
    v4 = [v3 voiceOverBrailleGesturesTypingFeedback];
LABEL_9:
    v7 = v4;

    return v7;
  }

  v5 = [(VOTElementManager *)self elementRotor];
  v6 = [v5 currentRotorType];

  if (v6 != 60)
  {
    v8 = [(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:&stru_1001CA090];
    v9 = [(VOTElementManager *)self _hasCurrentApplicationMatchingBlock:&stru_1001CA0B0];
    v10 = +[AXSettings sharedInstance];
    v3 = v10;
    if (v8 || v9)
    {
      v4 = [v10 voiceOverHardwareTypingFeedback];
    }

    else
    {
      v4 = [v10 voiceOverSoftwareTypingFeedback];
    }

    goto LABEL_9;
  }

  return 2;
}

- (BOOL)_ignoreTextEditingNotificationsForPickerElementUsage
{
  v3 = VOTLogCommon();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
  {
    v4 = CFAbsoluteTimeGetCurrent() - self->_lastAdjustValueTime;
    v11 = 134217984;
    v12 = v4;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_INFO, "Ignore text editing for picker usage change: %f", &v11, 0xCu);
  }

  if (CFAbsoluteTimeGetCurrent() - self->_lastAdjustValueTime >= 0.300000012)
  {
    return 0;
  }

  v5 = [(VOTElementManager *)self _currentElement];
  if ([(VOTElementManager *)self _isElementValidForFirstResponder:v5])
  {
    v6 = 0;
  }

  else
  {
    v7 = [(VOTElementManager *)self _currentElement];
    if ([v7 doesHaveTraits:kAXAdjustableTrait])
    {
      v8 = [(VOTElementManager *)self _currentElement];
      v9 = [v8 value];
      v6 = [v9 length] != 0;
    }

    else
    {
      v6 = 0;
    }
  }

  return v6;
}

- (void)_handleNonEditableValueChange:(id)a3
{
  v4 = a3;
  v5 = [(VOTElement *)self->_currentElement isEqual:v4];
  v6 = VOTLogCommon();
  v7 = os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG);
  if (v5)
  {
    if (v7)
    {
      sub_10012D200();
    }

    v6 = +[VOTBrailleManager manager];
    [v6 setBrailleElement:v4 resetBrailleCursor:0 rotorSelection:0];
  }

  else if (v7)
  {
    sub_10012D1C4();
  }
}

- (void)_handleValueChangedNotification:(id)a3 associatedElement:(id)a4
{
  v6 = a3;
  v7 = a4;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v8 = v6;
  }

  else
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v8 = [v6 objectForKey:kAXValueChangeUserInfoKeyChangeType];
      v9 = [v6 objectForKey:kAXValueChangeUserInfoKeyIsQuiet];
      v10 = [v9 BOOLValue];

      goto LABEL_9;
    }

    if (v7 && ([v7 doesHaveTraits:kAXIsEditingTrait] & 1) == 0)
    {
      [(VOTElementManager *)self _handleNonEditableValueChange:v7];
      v25 = VOTLogCommon();
      if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "Non editable value change element present, processing offline", buf, 2u);
      }

      v8 = 0;
      goto LABEL_37;
    }

    v8 = 0;
  }

  v10 = 0;
LABEL_9:
  if ([VOTSharedWorkspace suppressValueChangeNotificationCount] >= 1)
  {
    v11 = [VOTSharedWorkspace suppressValueChangeNotificationCount];
    [VOTSharedWorkspace setSuppressValueChangeNotificationCount:v11 - 1];
    goto LABEL_37;
  }

  if (self->_firstResponderElement)
  {
    [(VOTElementManager *)self setPreviousFirstResponder:?];
  }

  [(VOTElementManager *)self _updateFirstResponder];
  if (![(VOTElementManager *)self _ignoreTextEditingNotificationsForPickerElementUsage])
  {
    v12 = self->_firstResponderElement;
    v13 = v12;
    if (!v12)
    {
      v13 = [(VOTElementManager *)self previousFirstResponder];
    }

    v14 = [(VOTElementManager *)self previousFirstResponderValue];
    [v13 updateValue];
    v15 = [v13 value];
    if (![v13 doesHaveTraits:kAXSecureTextFieldTrait])
    {
      firstResponderElement = self->_firstResponderElement;
      if (firstResponderElement)
      {
        v32 = v15;
        v19 = [(VOTElement *)firstResponderElement application];
        if (!-[NSArray containsObject:](self->_currentApplications, "containsObject:", v19) || (v20 = [v19 valueChangeOriginationSource]) == 0)
        {
          v34 = v14;
          Current = CFAbsoluteTimeGetCurrent();
          v22 = +[VOTKeyboardManager keyboardManager];
          [v22 lastDispatchedKeyEventTime];
          v24 = Current - v23;

          if (v24 >= 0.5)
          {
            if ([VOTSharedWorkspace brailleInputActive])
            {
              v20 = 3;
            }

            else
            {
              v26 = [(VOTElementManager *)self elementRotor];
              v27 = [v26 currentRotorType] == 60;

              v20 = 4 * v27;
            }
          }

          else
          {
            v20 = 1;
          }

          v14 = v34;
        }

        [(VOTElementManager *)self _processValueChangeWithFirstResponder:self->_firstResponderElement existingFirstResponder:1 changeType:v8 changeOrigination:v20 isQuiet:v10];
        self->_lastValueChangeTime = CFAbsoluteTimeGetCurrent();

        v15 = v32;
      }

      if (v12)
      {
        goto LABEL_36;
      }

      goto LABEL_41;
    }

    if ((v10 & 1) == 0)
    {
      if ([v15 length] || objc_msgSend(v14, "length") == 1)
      {
        if ([v14 isEqualToString:v15])
        {
          goto LABEL_40;
        }

        v33 = v14;
        v16 = +[VOTOutputManager outputManager];
        v17 = +[VOSOutputEvent DidEnterSecureText];
      }

      else
      {
        v33 = v14;
        v16 = +[VOTOutputManager outputManager];
        v17 = +[VOSOutputEvent BoundaryEncountered];
      }

      v29 = v17;
      [v16 sendEvent:v17];

      v14 = v33;
    }

LABEL_40:
    v30 = VOTSharedWorkspace;
    v31 = [(VOTElementManager *)self _currentRotorSelection];
    [v30 refreshBraille:1 rotorSelection:v31];

    self->_lastValueChangeTime = CFAbsoluteTimeGetCurrent();
    if (v12)
    {
LABEL_36:
      [(VOTElementManager *)self setPreviousFirstResponderValue:v15];
      autofillCurrentElement = self->_autofillCurrentElement;
      self->_autofillCurrentElement = 0;

      [(VOTElementManager *)self _updateCurrentElementForTextInputSelectionChangeIfNeeded];
      goto LABEL_37;
    }

LABEL_41:
    [(VOTElementManager *)self setPreviousFirstResponder:0];
    goto LABEL_36;
  }

LABEL_37:
}

- (void)_handleTextReplacementOccurredNotification:(id)a3
{
  v12 = a3;
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [v12 length])
  {
    v4 = objc_opt_new();
    v5 = [v4 addString:v12];
    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      v6 = [v4 outputActions];
      v7 = [v6 lastObject];
      [v7 setObject:&off_1001D9940 forVariant:32];
    }

    v8 = [v4 outputActions];
    v9 = [v8 lastObject];
    [v9 setObject:&__kCFBooleanTrue forVariant:57];

    v10 = [VOTSharedWorkspace suppressValueChangeNotificationCount];
    [VOTSharedWorkspace setSuppressValueChangeNotificationCount:v10 + 1];
    v11 = [VOTSharedWorkspace suppressSelectionChangeNotificationCount];
    [VOTSharedWorkspace setSuppressSelectionChangeNotificationCount:v11 + 1];
    [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
    [v4 send];
  }
}

- (void)resetTextAndSelectionCaches
{
  self->_selectedTextStartLocation = 0;
  [(NSMutableString *)self->_elementTypingBuffer setString:&stru_1001CBF90];

  [(VOTElementManager *)self _elementSelectionRangeDidChange:0x7FFFFFFFLL reason:0, 0];
}

- (void)_processValueChangeWithFirstResponder:(id)a3 existingFirstResponder:(BOOL)a4 changeType:(id)a5 changeOrigination:(int64_t)a6 isQuiet:(BOOL)a7
{
  v9 = a4;
  v11 = a3;
  v12 = a5;
  p_elementTypingBuffer = &self->_elementTypingBuffer;
  if (!self->_elementTypingBuffer)
  {
    v14 = [v11 value];
    v15 = [v14 mutableCopyWithZone:0];
    v16 = *p_elementTypingBuffer;
    *p_elementTypingBuffer = v15;

    v17 = VOTLogElement();
    if (os_log_type_enabled(v17, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D270();
    }
  }

  [v11 updateValue];
  v18 = [v11 value];
  v194 = v9;
  if ([(__CFString *)v18 isAXAttributedString]&& [(__CFString *)v18 hasAttribute:UIAccessibilityTokenPlaceholder])
  {

    v18 = &stru_1001CBF90;
  }

  v212 = [v11 selectedTextRange];
  v214 = v19;
  v20 = [v11 application];
  v21 = [objc_allocWithZone(VOTOutputRequest) init];
  v216 = v21;
  if (a6 == 3)
  {
    v22 = [VOTSharedWorkspace selectedBrailleGesturesInputTable];
    v23 = [v22 localeIdentifier];

    if (v23 && [v23 length])
    {
      v24 = AXLanguageConvertToCanonicalForm();

      HIDWORD(v189) = 1;
      v25 = v216;
      if (v24)
      {
        goto LABEL_16;
      }
    }

    else
    {

      HIDWORD(v189) = 0;
      v25 = v216;
    }
  }

  else
  {
    v25 = v21;
    HIDWORD(v189) = 0;
  }

  v24 = [v20 currentSoftwareKeyboardLanguage];
LABEL_16:
  [v25 setKeyboardLanguageHint:v24];
  if (v18)
  {
    v26 = v18;
  }

  else
  {
    v26 = &stru_1001CBF90;
  }

  v27 = [*p_elementTypingBuffer length];
  v215 = v26;
  v28 = [(__CFString *)v26 length];
  v29 = v27 - v28;
  if (v27 != v28 && [(VOTElementManager *)self _shouldSwitchToFirstResponder:v11])
  {
    [(VOTElementManager *)self _setCurrentElement:v11];
    v30 = +[VOTDisplayManager displayManager];
    [v30 setCursorFrameForElement:v11];
  }

  v201 = v24;
  v196 = v20;
  v31 = VOTLogElement();
  if (os_log_type_enabled(v31, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D2E0();
  }

  v204 = &self->_elementTypingBuffer;

  v32 = [v12 isEqualToString:kAXValueChangeTypeDelete];
  if ([v12 isEqualToString:kAXValueChangeTypeInsert])
  {
    v33 = 1;
  }

  else
  {
    v33 = [v12 isEqualToString:kAXValueChangeTypeSingleInsert];
  }

  v209 = 0;
  v211 = a6;
  v193 = [v12 isEqualToString:kAXValueChangeTypeReplacement];
  if (a6 <= 1)
  {
    if (a6)
    {
      if (a6 != 1)
      {
        goto LABEL_40;
      }

      v34 = +[AXSettings sharedInstance];
      v35 = [v34 voiceOverHardwareTypingFeedback];
    }

    else
    {
      v34 = +[AXSettings sharedInstance];
      v35 = [v34 voiceOverSoftwareTypingFeedback];
    }

    goto LABEL_39;
  }

  if (a6 == 2)
  {
    v36 = 3;
LABEL_37:
    v209 = v36;
    goto LABEL_40;
  }

  if (a6 == 4)
  {
    v36 = 2;
    goto LABEL_37;
  }

  if (a6 != 3)
  {
    goto LABEL_40;
  }

  v34 = +[AXSettings sharedInstance];
  v35 = [v34 voiceOverBrailleGesturesTypingFeedback];
LABEL_39:
  v209 = v35;

LABEL_40:
  v37 = VOTLogElement();
  if (os_log_type_enabled(v37, OS_LOG_TYPE_DEBUG))
  {
    location = self->_elementSelectionRangeBufferForValueChange.location;
    length = self->_elementSelectionRangeBufferForValueChange.length;
    *buf = 134218752;
    *&buf[4] = location;
    *&buf[12] = 2048;
    *&buf[14] = length;
    v233 = 2048;
    v234 = v212;
    v235 = 2048;
    v236 = v214;
    _os_log_debug_impl(&_mh_execute_header, v37, OS_LOG_TYPE_DEBUG, "Old selection: %lu, %lu -- new selection:%lu %lu", buf, 0x2Au);
  }

  if (self->_elementSelectionRangeBufferForValueChange.length)
  {
    v38 = v214 == 0;
  }

  else
  {
    v38 = 0;
  }

  v39 = v38;
  v206 = v39;
  v40 = (v39 | v33) & 1;
  v230 = 0;
  if (v32)
  {
    v40 = 2;
  }

  v199 = v40;
  v229 = 0;
  v41 = v12 && ([v12 isEqualToString:kAXValueChangeTypeSingleInsert] & 1) != 0 || v29 == -1;
  v197 = v41;
  v228 = 0;
  *buf = xmmword_10017E110;
  v227 = 0;
  v42 = +[AXAttributedString string];
  v43 = +[NSString string];
  v44 = [VOTSharedWorkspace selectedLanguage];
  v203 = v12;
  v213 = self;
  v195 = v44;
  if (!v44)
  {
    v45 = v11;
LABEL_58:
    v208 = [v25 keyboardLanguageHint];

    if (!v44)
    {
      goto LABEL_60;
    }

    goto LABEL_59;
  }

  v37 = [v25 keyboardLanguageHint];
  v32 = AXLanguageCanonicalFormToGeneralLanguage();
  v45 = v11;
  if (![v37 hasPrefix:v32])
  {
    goto LABEL_58;
  }

  v208 = v44;
LABEL_59:

LABEL_60:
  if (v209 < 3)
  {
    v46 = v209 + 1;
  }

  else
  {
    v46 = 0;
  }

  v47 = +[AXFirstResponderValueChangeManager sharedInstance];
  elementTypingBuffer = v213->_elementTypingBuffer;
  [VOTSharedWorkspace lastKeyboardKeyPress];
  v225 = v43;
  v226 = v42;
  LOBYTE(v189) = 0;
  BYTE1(v188) = v206;
  LOBYTE(v188) = v197;
  LOBYTE(v187) = v211 != 2;
  v49 = [v47 outputValueChangeForNewValue:v215 oldValue:elementTypingBuffer isFirstResponderValid:v45 != 0 selectedTextRange:v212 oldSelectedTextRange:v214 shouldEchoDeletion:v213->_elementSelectionRangeBufferForValueChange.location optionalValueChangeType:v213->_elementSelectionRangeBufferForValueChange.length derivedValueChangeType:v187 didHitBorder:v199 isBreakSpaceCharacter:&v230 isSingleInsert:&v229 + 1 selectionDeleted:&v229 feedbackType:v188 textOperationOccurred:v46 lastKeyboardKeyPress:&v213->_flags.tapShouldHandleTextOperation isSingleCharacterInsertOrDelete:&v227 singleInsertDeleteAttString:&v226 singleInsertDeleteString:&v225 isSingleCharacterUpdate:&v228 wordRangeToFindMisspelled:buf pasteOperationSucceeded:&v228 + 1 processApostrophes:v189];
  v200 = v226;

  v198 = v225;
  if ([(__CFString *)v49 length]== 1)
  {
    v50 = TTSChoseong_JongseongToHangul();

    v49 = v50;
  }

  v51 = 0;
  v52 = v45;
  v53 = v213;
  v54 = v216;
  if (v230)
  {
    v55 = v203;
    if (v230 == 1)
    {
      v192 = 1;
    }

    else if (v230 == 2)
    {
      v192 = 0;
      v51 = 1;
    }

    else
    {
      v51 = 0;
      v192 = 0;
    }

    [(VOTElementRotor *)v213->_elementRotor setIgnoreDefaultTypeAutofill:0];
  }

  else
  {
    v192 = 0;
    v55 = v203;
  }

  if (HIBYTE(v229) == 1 && !a7)
  {
    v56 = +[VOTOutputManager outputManager];
    v57 = +[VOSOutputEvent BoundaryEncountered];
    [v56 sendEvent:v57];
  }

  if (v229 != 1)
  {
    v191 = 0;
    v58 = 0;
    goto LABEL_90;
  }

  if (![(NSMutableString *)*v204 length])
  {
    goto LABEL_85;
  }

  v58 = 0;
  if ([(__CFString *)v215 length]< 2)
  {
    v59 = 1;
  }

  else
  {
    v59 = v51;
  }

  if ((v59 & 1) == 0 && !v214 && v212 >= 3)
  {
    if (v212 > [(NSMutableString *)*v204 length]+ 1)
    {
LABEL_85:
      v58 = 0;
      goto LABEL_86;
    }

    if (v212 <= [(__CFString *)v215 length]+ 1)
    {
      v181 = [(NSMutableString *)*v204 characterAtIndex:v212 - 2];
      v182 = [(__CFString *)v215 characterAtIndex:v212 - 2];
      v183 = [(__CFString *)v215 characterAtIndex:v212 - 1];
      if ((v181 & 0xFFFFFF7F) == 0x20 && v182 == 46 && (v183 & 0xFFFFFF7F) == 0x20)
      {

        v58 = 0;
        v49 = @". ";
        v191 = 1;
        v55 = v203;
        goto LABEL_90;
      }

      v184 = [v216 keyboardLanguageHint];
      v185 = sub_100051B24(32, @"UnicodeHex.", @"VOTOutputPunctuation", v184);

      v58 = 1;
      v49 = v185;
    }

    else
    {
      v58 = 0;
    }

    v55 = v203;
  }

LABEL_86:
  v191 = 0;
  if (!v49)
  {
    v49 = @" ";
  }

LABEL_90:
  if (v193)
  {
    v60 = v215;
    v61 = v215;
LABEL_106:

    v49 = v61;
    goto LABEL_107;
  }

  if (v227 == 1)
  {
    if (v209 != 3)
    {
      if ([(__CFString *)v215 isAXAttributedString])
      {
        v62 = [v216 addAttributedString:v200 withLanguage:v208];
      }

      else
      {
        v63 = [v216 addString:v198 withLanguage:v208];
      }
    }

    v64 = [VOTSharedWorkspace typingPitchChangeEnabled];
    if (v211 != 3 && v64)
    {
      v65 = [v216 outputActions];
      v66 = [v65 lastObject];
      LODWORD(v67) = 1.5;
      v68 = [NSNumber numberWithFloat:v67];
      [v66 setObject:v68 forVariant:32];

      v54 = v216;
    }

    v60 = v215;
    if ((([(__CFString *)v49 length]> 1) & ~v58) == 0)
    {

      v49 = 0;
    }

    v61 = v49;
    v49 = [v54 outputActions];
    v69 = [(__CFString *)v49 lastObject];
    [v69 setObject:&__kCFBooleanTrue forVariant:57];

    goto LABEL_106;
  }

  v60 = v215;
LABEL_107:
  if (*buf != 0x7FFFFFFFLL || *&buf[8])
  {
    v70 = [v52 attributedValueForRange:?];
    [VOTSharedWorkspace addMisspellingsForString:v70];
    v210 = [v70 hasAttribute:UIAccessibilityTokenMisspelled];
  }

  else if (HIBYTE(v228) == 1)
  {
    v70 = sub_1000511CC(off_1001FDDD0, @"paste.operation.succeeded", 0);
    v71 = [(__CFString *)v49 stringByAppendingFormat:@", %@", v70];

    v210 = 0;
    v49 = v71;
  }

  else
  {
    if (v228 != 1)
    {
      v210 = 0;
      goto LABEL_113;
    }

    if ([(__CFString *)v60 isAXAttributedString])
    {
      v85 = [v54 addAttributedString:v200 withLanguage:v208];
    }

    else
    {
      v86 = [v54 addString:v198 withLanguage:v208];
    }

    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      v87 = [v54 outputActions];
      v88 = [v87 lastObject];
      LODWORD(v89) = 1.5;
      v90 = [NSNumber numberWithFloat:v89];
      [v88 setObject:v90 forVariant:32];

      v54 = v216;
    }

    if ([(__CFString *)v49 length]<= 1)
    {

      v49 = 0;
    }

    v70 = [v54 outputActions];
    v91 = [v70 lastObject];
    [v91 setObject:&__kCFBooleanTrue forVariant:57];

    v210 = 0;
  }

LABEL_113:
  if (v194 && ([v52 doesHaveTraits:kAXSecureTextFieldTrait] & 1) == 0 && !a7 && -[NSMutableString isEqualToString:](*v204, "isEqualToString:", v60) && !-[__CFString length](v60, "length") && CFAbsoluteTimeGetCurrent() - v213->_lastFirstResponderChangeTime > 0.25)
  {
    v72 = +[VOTOutputManager outputManager];
    v73 = +[VOSOutputEvent BoundaryEncountered];
    [v72 sendEvent:v73];
  }

  v74 = VOTLogElement();
  if (os_log_type_enabled(v74, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D354();
  }

  if ([(__CFString *)v60 isAXAttributedString]&& ([(__CFString *)v60 hasAttribute:UIAccessibilityTokenPlaceholder]& 1) != 0)
  {
    v75 = &stru_1001CBF90;
  }

  else
  {
    v75 = v60;
  }

  [(NSMutableString *)*v204 setString:v75];
  if (v52)
  {
    v76 = [v52 selectedTextRange];
    v78 = v77;
  }

  else
  {
    v78 = 0;
    v76 = 0x7FFFFFFFLL;
  }

  [(VOTElementManager *)v213 _elementSelectionRangeDidChange:v76 reason:v78, 0];
  if ([VOTSharedWorkspace brailleInputActive])
  {
    v79 = +[AXSettings sharedInstance];
    v80 = [v79 voiceOverBrailleGesturesTypingFeedback];

    if ((v51 & 1) == 0)
    {
      if (v80)
      {
        if (v80 == 3)
        {
LABEL_150:

          v49 = &stru_1001CBF90;
          goto LABEL_151;
        }

        if (v80 != 2)
        {
          goto LABEL_151;
        }
      }

      if ([(__CFString *)v49 length])
      {
        v81 = [(__CFString *)v49 characterAtIndex:[(__CFString *)v49 length]- 1];
        v82 = +[NSCharacterSet whitespaceCharacterSet];
        LODWORD(v81) = [v82 characterIsMember:v81];

        v83 = [(__CFString *)v49 hasSuffix:@"\n"];
        if (v81)
        {
          v54 = v216;
          v84 = [v216 addString:@" " withLanguage:v208];
          goto LABEL_149;
        }

        v54 = v216;
        if (!v83)
        {
LABEL_149:
          if (v80)
          {
            goto LABEL_151;
          }

          goto LABEL_150;
        }
      }

      else if (([(__CFString *)v49 hasSuffix:@"\n"]& 1) == 0)
      {
        goto LABEL_149;
      }

      v94 = [v54 addString:@"\n"];
      goto LABEL_149;
    }
  }

LABEL_151:
  v95 = VOTLogElement();
  if (os_log_type_enabled(v95, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D3C4();
  }

  if (v206)
  {
    v96 = sub_1000511CC(off_1001FDDD0, @"selection.deleted", 0);
    v97 = [v54 addString:v96];
  }

  if (![(__CFString *)v49 length])
  {
    goto LABEL_208;
  }

  if ([(__CFString *)v60 isAXAttributedString])
  {
    v98 = [(__CFString *)v60 copyWithZone:0];
    [v98 replaceString:v49];
    if (v51)
    {
      v99 = +[AXSettings sharedInstance];
      v100 = [v99 voiceOverDeletionFeedback];

      v101 = v191;
      if (v100)
      {
        v102 = 0;
        v103 = 0x7FFFFFFFFFFFFFFFLL;
        if (!v191)
        {
          goto LABEL_169;
        }
      }

      else
      {
        v175 = sub_1000516CC(off_1001FDDD0, @"delete.text.prefix", 0, v208);
        v103 = [v175 rangeOfString:@"%@"];
        v205 = v176;
        v102 = [v98 length];
        v207 = AXCFormattedString();
        [AXAttributedString axAttributedStringWithString:v207, v98];
        v221[0] = _NSConcreteStackBlock;
        v221[1] = 3221225472;
        v221[2] = sub_1000A1368;
        v221[3] = &unk_1001CA0D8;
        v223 = v103;
        v177 = v224 = v205;
        v222 = v177;
        [v98 enumerateAttributesUsingBlock:v221];
        v178 = v177;

        v53 = v213;
        v98 = v178;
        if (!v191)
        {
LABEL_169:
          v113 = [v216 addAttributedString:v98 withLanguage:v208];
          if (v102 == 1)
          {
            v114 = 1;
          }

          else
          {
            v114 = v101;
          }

          if (v103 != 0x7FFFFFFFFFFFFFFFLL && v114)
          {
            v109 = +[NSMutableIndexSet indexSet];
            v110 = v109;
            v111 = v103;
            v112 = v102;
            goto LABEL_175;
          }

          goto LABEL_176;
        }
      }
    }

    else
    {
      v102 = 0;
      v103 = 0x7FFFFFFFFFFFFFFFLL;
      v101 = v191;
      if (!v191)
      {
        goto LABEL_169;
      }
    }

    v103 = [v98 length] - 2;
    v102 = 2;
    goto LABEL_169;
  }

  v98 = [(__CFString *)v49 copy];
  if (v51 && (+[AXSettings sharedInstance](AXSettings, "sharedInstance"), v104 = objc_claimAutoreleasedReturnValue(), v105 = [v104 voiceOverDeletionFeedback], v104, !v105))
  {
    v179 = sub_1000516CC(off_1001FDDD0, @"delete.text.prefix", 0, v208);
    v107 = [v179 rangeOfString:@"%@"];
    v106 = [v98 length];
    v186 = v98;
    v180 = AXCFormattedString();

    v98 = v180;
    v53 = v213;
  }

  else
  {
    v106 = 0;
    v107 = 0x7FFFFFFFFFFFFFFFLL;
  }

  v108 = [v216 addString:v98 withLanguage:{v208, v186}];
  if (v107 != 0x7FFFFFFFFFFFFFFFLL && v106 == 1)
  {
    v109 = +[NSMutableIndexSet indexSet];
    v110 = v109;
    v111 = v107;
    v112 = 1;
LABEL_175:
    [v109 addIndexesInRange:{v111, v112}];
    v115 = v192;
    v116 = v216;
    v117 = [v216 outputActions];
    v118 = [v117 lastObject];
    [v118 setObject:v110 forVariant:29];

    v53 = v213;
    goto LABEL_177;
  }

LABEL_176:
  v116 = v216;
  v115 = v192;
LABEL_177:

  v119 = [v116 outputActions];
  v120 = [v119 lastObject];
  [v120 setObject:&__kCFBooleanTrue forVariant:57];

  v54 = v116;
  if (v51)
  {
    v121 = +[AXSettings sharedInstance];
    v122 = [v121 voiceOverDeletionFeedback];

    if (v122 == 2)
    {
      v123 = [v116 outputActions];
      [v123 enumerateObjectsUsingBlock:&stru_1001CA118];
    }

    if ([(__CFString *)v49 length]== 1)
    {
      v124 = +[AXLanguageManager sharedInstance];
      v125 = [v116 keyboardLanguageHint];
      v126 = [v124 descriptionOfWord:v49 forLanguage:v125];

      v54 = v216;
      if ([v126 length])
      {
        v127 = [AXAttributedString axAttributedStringWithString:v126];
        v128 = [v216 keyboardLanguageHint];
        [v127 setAttribute:v128 forKey:UIAccessibilityTokenLanguage];

        v54 = v216;
        v129 = [v216 addString:v126];
      }
    }
  }

  if (![(__CFString *)v49 length])
  {
    v130 = [v54 lastAction];
    [v130 setObject:kCFBooleanTrue forVariant:28];
  }

  v131 = [VOTSharedWorkspace typingPitchChangeEnabled];
  if ((v51 | v115) == 1 && v131)
  {
    if (v51)
    {
      v132 = +[AXSettings sharedInstance];
      v133 = [v132 voiceOverDeletionFeedback];

      if (v133 == 1)
      {
        v134 = 0.75;
      }

      else
      {
        v134 = 1.0;
      }
    }

    else if (v115)
    {
      v134 = 1.5;
    }

    else
    {
      v134 = 1.0;
    }

    v219 = 0u;
    v220 = 0u;
    v217 = 0u;
    v218 = 0u;
    v135 = [v54 outputActions];
    v136 = [v135 countByEnumeratingWithState:&v217 objects:v231 count:16];
    if (v136)
    {
      v138 = v136;
      v139 = *v218;
      do
      {
        for (i = 0; i != v138; i = i + 1)
        {
          if (*v218 != v139)
          {
            objc_enumerationMutation(v135);
          }

          v141 = *(*(&v217 + 1) + 8 * i);
          *&v137 = v134;
          v142 = [NSNumber numberWithFloat:v137];
          [v141 setObject:v142 forVariant:32];
        }

        v138 = [v135 countByEnumeratingWithState:&v217 objects:v231 count:16];
      }

      while (v138);
    }

    v55 = v203;
    v53 = v213;
    v54 = v216;
  }

  if (!v210)
  {
LABEL_208:
    v151 = 0;
    v145 = v196;
    goto LABEL_209;
  }

  v143 = +[UIKeyboardPreferencesController sharedPreferencesController];
  v144 = [v143 BOOLForKey:10];

  v145 = v196;
  if (v144)
  {
    v146 = sub_1000511CC(off_1001FDDD0, @"misspelled", 0);
    v147 = [v54 addString:v146];

    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      v148 = [v54 lastAction];
      LODWORD(v149) = 1062836634;
      v150 = [NSNumber numberWithFloat:v149];
      [v148 setObject:v150 forVariant:32];
    }

    v151 = 1;
  }

  else
  {
    v151 = 0;
  }

LABEL_209:
  if ([v54 containsActions] && (objc_msgSend(v55, "isEqualToString:", kAXValueChangeTypeDictation) & 1) == 0)
  {
    if ([v201 hasPrefix:@"zh"])
    {
      if (AXUIKeyboardIsOOP())
      {
        v152 = +[VOTElement inputUIApplication];
        v153 = [v152 uiElement];
        [v153 updateCache:3004];

        v154 = +[VOTElement inputUIApplication];
        v155 = [v154 typingCandidateElements];
      }

      else
      {
        v156 = [v145 uiElement];
        [v156 updateCache:3004];

        v155 = [v145 typingCandidateElements];
      }

      v157 = [v155 firstObject];
      v158 = [v157 label];

      if ([v158 length])
      {
        LODWORD(v159) = 1061158912;
        [v216 addPause:v159];
        v160 = [v216 addString:v158 withLanguage:v201];
      }
    }

    v161 = +[VOTBrailleManager manager];
    v162 = [v161 brailleElement];
    v163 = [v52 isEqual:v162];

    v54 = v216;
    if (v211 != 1 && (v163 & 1) == 0)
    {
      [v216 setGeneratesBraille:1];
    }

    v164 = +[AXSettings sharedInstance];
    v165 = [v164 voiceOverTouchBrailleDisplayInputMode];

    if (v165 == 2)
    {
      v166 = 1;
    }

    else
    {
      v166 = v151;
    }

    if (v165 == 2)
    {
      v167 = 4;
    }

    else
    {
      v167 = 2;
    }

    if ((v166 & 1) == 0)
    {
      v168 = [v216 outputActions];
      v169 = [v168 firstObject];
      v170 = [v169 string];
      v171 = [v170 length];

      v54 = v216;
      if (v171 <= 1)
      {
        v167 = 4;
      }

      else
      {
        v167 = 2;
      }
    }

    v55 = v203;
    [v54 setBrailleType:v167];
    if (v190)
    {
      v172 = [v54 outputActions];
      [v172 enumerateObjectsUsingBlock:&stru_1001CA138];
    }

    if (!a7)
    {
      [(VOTElementManager *)v53 sendRequest:v54];
    }
  }

  v173 = VOTSharedWorkspace;
  v174 = [(VOTElementManager *)v53 _currentRotorSelection];
  [v173 refreshBraille:1 rotorSelection:v174];

  v53->_highlightedCharacterRange = xmmword_10017E110;
  [(VOTElementManager *)v53 _elementSelectionRangeDidChange:v212 reason:v214, 2];
  v53->_elementSelectionRangeBufferForValueChange = v53->_elementSelectionRangeBufferInternal;
}

- (void)_processSilentValueChange
{
  [(VOTElement *)self->_firstResponderElement updateValue];
  elementTypingBuffer = self->_elementTypingBuffer;
  v4 = [(VOTElement *)self->_firstResponderElement value];
  v5 = v4;
  if (v4)
  {
    v6 = v4;
  }

  else
  {
    v6 = &stru_1001CBF90;
  }

  [(NSMutableString *)elementTypingBuffer setString:v6];

  [(VOTElementManager *)self _reupdateTextSelectionInformation];
  v7 = VOTSharedWorkspace;
  v8 = [(VOTElementManager *)self _currentRotorSelection];
  [v7 refreshBraille:1 rotorSelection:v8];
}

- (void)_handleElementMoved:(__AXUIElement *)a3
{
  v24 = [(VOTElementManager *)self _currentElement];
  v5 = [AXUIElement uiElementWithAXElement:a3];
  v6 = [VOTElement elementWithUIElement:v5];

  if ([v24 isEqual:v6])
  {
    x = CGRectZero.origin.x;
    y = CGRectZero.origin.y;
    width = CGRectZero.size.width;
    height = CGRectZero.size.height;
    location = self->_highlightedCharacterRange.location;
    if (location == 0x7FFFFFFF)
    {
      v12 = 0;
      v13 = v24;
    }

    else
    {
      [v24 boundsForRange:{location, self->_highlightedCharacterRange.length}];
      v14 = v26.origin.x;
      v15 = v26.origin.y;
      v16 = v26.size.width;
      v17 = v26.size.height;
      v27.origin.x = CGRectZero.origin.x;
      v27.origin.y = y;
      v27.size.width = width;
      v27.size.height = height;
      v18 = !CGRectEqualToRect(v26, v27);
      v13 = v24;
      if (v18)
      {
        height = v17;
      }

      v12 = v18;
      if (v18)
      {
        width = v16;
      }

      if (v18)
      {
        y = v15;
      }

      if (v18)
      {
        x = v14;
      }
    }

    [v13 updateFrame];
    [v24 updateCenterPoint];
    if ((v12 & 1) == 0)
    {
      [v24 frame];
      x = v19;
      y = v20;
      width = v21;
      height = v22;
    }

    v23 = +[VOTDisplayManager displayManager];
    [v23 setCursorFrame:{x, y, width, height}];
  }
}

- (void)_handleKeyboardKeySelectedNotification:(id)a3
{
  v4 = a3;
  v20 = v4;
  if (!v4 || (objc_opt_class(), isKindOfClass = objc_opt_isKindOfClass(), v4 = v20, (isKindOfClass & 1) != 0))
  {
    v6 = [v4 isAXAttributedString] ? objc_msgSend(v20, "hasAttribute:", UIAccessibilityTableIndexToken) : 0;
    if ([VOTSharedWorkspace typingMode] != 2 || v6 != 0)
    {
      if (v20)
      {
        v8 = [objc_allocWithZone(VOTOutputRequest) init];
        v9 = +[AXSettings sharedInstance];
        v10 = [v9 voiceOverPhoneticsFeedback];

        if (v10 == 2)
        {
          v11 = [(VOTElementManager *)self _phoneticStringForLetter:v20 language:0];
          v12 = v11;
          if (v11)
          {
            v13 = v11;

            v20 = v13;
          }
        }

        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          v14 = [v8 addAttributedString:v20];
        }

        else
        {
          v17 = [v8 addString:v20];
        }

        v18 = sub_1000511CC(off_1001FDDD0, @"element.selected.text", 0);
        v19 = [v8 addString:v18];

        [v8 setGeneratesBraille:1];
        [v8 setBrailleType:2];
        [(VOTElementManager *)self sendRequest:v8];
      }

      else
      {
        v15 = +[VOTOutputManager outputManager];
        [v15 stopSpeakingAtBoundary:0];

        v8 = +[VOTOutputManager outputManager];
        v16 = +[VOSOutputEvent BoundaryEncountered];
        [v8 sendEvent:v16];
      }
    }
  }

  _objc_release_x1();
}

- (void)_appSuspensionSoundTimer
{
  if (*&qword_1001FECF0 != 0.0)
  {
    v3 = +[VOTOutputManager outputManager];
    v4 = +[VOSOutputEvent ItemIsLoading];
    [v3 sendEvent:v4];

    appSuspensionSoundTimer = self->_appSuspensionSoundTimer;
    v6 = *&qword_1001FECF0;

    [(SCRCTargetSelectorTimer *)appSuspensionSoundTimer dispatchAfterDelay:v6];
  }
}

- (void)_handleAppSuspendAnimationProgressNotification:(id)a3
{
  v7 = a3;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    [v7 floatValue];
    if (v4 == -1.0)
    {
      v5 = *&qword_1001FECF0;
      if (*&qword_1001FECF0 > 0.0)
      {
        qword_1001FECF0 = 0;
        [(VOTElementManager *)self _handleScreenChange:0 sound:0, v5];
      }
    }

    else
    {
      v6 = v4;
      if (v6 > 1.0)
      {
        v6 = 1.0;
      }

      *&qword_1001FECF0 = (1.0 - fmax(v6, 0.0)) * 0.5 + 0.01;
      if (([(SCRCTargetSelectorTimer *)self->_appSuspensionSoundTimer isCancelled]& 1) != 0 || ([(SCRCTargetSelectorTimer *)self->_appSuspensionSoundTimer isPending]& 1) == 0)
      {
        [(VOTElementManager *)self _appSuspensionSoundTimer];
      }
    }
  }
}

- (void)__handleExpandedStatusChanged
{
  v3 = [(VOTElementManager *)self _currentElement];
  v4 = [v3 expandedStatus];
  [v3 updateExpandedStatus];
  v5 = [v3 expandedStatus];
  if ([v3 doesHaveTraits:kAXWebContentTrait] && (objc_msgSend(v3, "isAlive") & 1) == 0 && objc_msgSend(v3, "isValid"))
  {
    v6 = +[VOTElement systemWideElement];
    [v3 centerPoint];
    [v6 convertPoint:objc_msgSend(v3 fromContextId:{"windowContextId"), v7, v8}];
    v10 = v9;
    v12 = v11;

    v13 = [[VOTElement alloc] initWithPosition:v10, v12];
    v20[0] = _NSConcreteStackBlock;
    v20[1] = 3221225472;
    v20[2] = sub_1000A1C1C;
    v20[3] = &unk_1001C8E40;
    v21 = v3;
    v14 = [(VOTElementManager *)self _nearestElementWithMatch:v20 startElement:v13];
    v15 = v14;
    if (v14)
    {
      v5 = [v14 expandedStatus];
      [(VOTElementManager *)self _setCurrentElement:v15];
    }
  }

  if (v4 != v5)
  {
    v16 = [VOTSharedWorkspace selectedLanguage];
    if (v5 == 1)
    {
      v17 = @"expanded";
    }

    else
    {
      v17 = @"collapsed";
    }

    v18 = sub_1000516CC(off_1001FDDD0, v17, 0, v16);
    v19 = sub_1000095FC(v18, 1, v16);
  }
}

- (void)_handleCurrentStateChanged:(id)a3
{
  v4 = [(VOTElementManager *)self _currentElement];
  v3 = [v4 uiElement];
  [v3 updateCache:2116];
}

- (void)_handleSortDirectionChanged:(id)a3
{
  v4 = [(VOTElementManager *)self _currentElement];
  v3 = [v4 uiElement];
  [v3 updateCache:2152];
}

- (void)_handleInvalidStatusChanged:(id)a3
{
  v3 = a3;
  if (v3)
  {
    v8 = v3;
    v4 = CFGetTypeID(v3);
    v5 = v4 == AXUIElementGetTypeID();
    v3 = v8;
    if (v5)
    {
      v6 = [objc_allocWithZone(VOTElement) initWithAXElement:v8];
      v7 = +[VOTOutputRequest createRequest];
      [v6 applyInvalidStatusToRequest:v7];
      [v7 setDoesNotInterrupt:1];
      [v7 send];

      v3 = v8;
    }
  }
}

- (void)_handleInvalidTextInputNotification:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent BoundaryEncountered];
  [v4 sendEvent:v3];
}

- (void)_reupdateTextSelectionInformation
{
  v4 = [(VOTElement *)self->_firstResponderElement selectedTextRange];

  [(VOTElementManager *)self _elementSelectionRangeDidChange:v4 reason:v3, 0];
}

- (void)_handleAnnouncementNotification:(id)a3
{
  v8 = a3;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v4 = [v8 objectForKeyedSubscript:kAXPidKey];
    v5 = [v4 intValue];

    v6 = [v8 objectForKeyedSubscript:kAXNotificationDataKey];
    if (!v6)
    {
      v6 = [v8 objectForKeyedSubscript:kAXAnnouncementUserInfoKeyAnnouncement];
      if (!v6)
      {
        v6 = v8;
      }
    }

    v7 = v6;
    [(VOTElementManager *)self _handleAnnouncementWithData:v6 pid:v5];
  }
}

- (void)_handleFireStewie
{
  stewieRangeTimer = self->_stewieRangeTimer;
  stewieRepeatDuration = self->_stewieRepeatDuration;
  v4[0] = _NSConcreteStackBlock;
  v4[1] = 3221225472;
  v4[2] = sub_1000A210C;
  v4[3] = &unk_1001C76E8;
  v4[4] = self;
  [(AXDispatchTimer *)stewieRangeTimer afterDelay:v4 processBlock:stewieRepeatDuration];
}

- (void)_handleStewieAnnouncementInRange:(BOOL)a3 heading:(double)a4
{
  v5 = a3;
  Current = CFAbsoluteTimeGetCurrent();
  stewieRangeTimer = self->_stewieRangeTimer;
  if (Current - *&qword_1001FECF8 <= 10.0)
  {
    if (!stewieRangeTimer)
    {
      v10 = [[AXDispatchTimer alloc] init];
      v11 = self->_stewieRangeTimer;
      self->_stewieRangeTimer = v10;

      [(VOTElementManager *)self _handleFireStewie];
    }

    self->_stewieRepeatDuration = fabs(a4) / 180.0 * 1.3 + 0.2;
    if (byte_1001FED00 != v5 && v5)
    {
      v12 = +[VOTOutputManager outputManager];
      [v12 playSoundFast:@"Sounds/Reorder.aiff"];
    }

    byte_1001FED00 = v5;
  }

  else
  {
    [(AXDispatchTimer *)stewieRangeTimer cancel];
    v9 = self->_stewieRangeTimer;
    self->_stewieRangeTimer = 0;
  }

  qword_1001FECF8 = CFAbsoluteTimeGetCurrent();
}

- (void)_handleAnnouncementWithData:(id)a3 pid:(int)a4
{
  v4 = *&a4;
  v5 = a3;
  v7 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v8 = v7;
  if (!v8 || (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0) && ![v8 length])
  {
    v24 = VOTLogSpeech();
    if (os_log_type_enabled(v24, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v24, OS_LOG_TYPE_INFO, "Stopping speaking because we got zero length announcement", buf, 2u);
    }

    v14 = +[VOTOutputManager outputManager];
    [v14 stopSpeakingAtBoundary:0];
    goto LABEL_28;
  }

  if (v4)
  {
    v9 = +[AXSettings sharedInstance];
    v10 = [v9 liveRegionStatusEverSet];

    if (v10)
    {
      v11 = self;
      v12 = v5;
      v13 = v4;
      v14 = [[VOTElement alloc] initApplicationWithPid:v4];
      v15 = [v14 bundleIdentifier];
      v16 = [v14 firstWebElement];
      v17 = [v16 webAreaURL];

      v18 = +[AXSettings sharedInstance];
      v19 = [v18 liveRegionStatusForWebOrApp:v15];

      if (!v19 && v17)
      {
        v20 = +[AXSettings sharedInstance];
        v21 = [v17 host];
        v19 = [v20 liveRegionStatusForWebOrApp:v21];
      }

      if (v19 && ([v19 BOOLValue] & 1) == 0)
      {
        v28 = VOTLogCommon();
        if (os_log_type_enabled(v28, OS_LOG_TYPE_DEFAULT))
        {
          *buf = 138478083;
          v164 = v15;
          v165 = 2113;
          v166 = v17;
          _os_log_impl(&_mh_execute_header, v28, OS_LOG_TYPE_DEFAULT, "Skipping live region updates for %{private}@ %{private}@", buf, 0x16u);
        }

        goto LABEL_27;
      }

      LODWORD(v4) = v13;
      v5 = v12;
      self = v11;
    }
  }

  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v14 = v8;
    v15 = [v14 objectForKeyedSubscript:@"key"];
    if (([v15 isEqualToString:@"STEWIE_TARGET_IN_RANGE"] & 1) != 0 || objc_msgSend(v15, "isEqualToString:", @"STEWIE_TARGET_OUT_OF_RANGE"))
    {
      v22 = [v15 isEqualToString:@"STEWIE_TARGET_IN_RANGE"];
      v23 = [v14 objectForKeyedSubscript:@"heading"];
      [v23 doubleValue];
      [(VOTElementManager *)self _handleStewieAnnouncementInRange:v22 heading:?];

LABEL_27:
      goto LABEL_28;
    }

    buf[0] = 0;
    v25 = [v14 objectForKeyedSubscript:@"AX_VOICEOVER_DISABLE_SCREEN_CURTAIN"];
    v26 = __UIAccessibilitySafeClass();

    v27 = v26;
    LODWORD(v25) = [v27 BOOLValue];

    if (v25)
    {
      v157 = _NSConcreteStackBlock;
      v158 = 3221225472;
      v159 = sub_1000A3CC0;
      v160 = &unk_1001C76E8;
      v161 = self;
      AXPerformBlockOnMainThreadAfterDelay();
      goto LABEL_27;
    }
  }

  v29 = +[AXSubsystemVoiceOver sharedInstance];
  v30 = [v29 ignoreLogging];

  if ((v30 & 1) == 0)
  {
    v31 = +[AXSubsystemVoiceOver identifier];
    v32 = AXLoggerForFacility();

    v33 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v32, v33))
    {
      v34 = self;
      v35 = v5;
      v36 = v4;
      v37 = AXColorizeFormatLog();
      v140 = v8;
      v38 = _AXStringForArgs();
      v4 = v32;
      if (os_log_type_enabled(v4, v33))
      {
        *buf = 138543362;
        v164 = v38;
        _os_log_impl(&_mh_execute_header, v4, v33, "%{public}@", buf, 0xCu);
      }

      LODWORD(v4) = v36;
      v5 = v35;
      self = v34;
    }
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v46 = +[AXSubsystemVoiceOver sharedInstance];
    v47 = [v46 ignoreLogging];

    if (v47)
    {
      goto LABEL_29;
    }

    v48 = +[AXSubsystemVoiceOver identifier];
    v14 = AXLoggerForFacility();

    v49 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v14, v49))
    {
      v50 = AXColorizeFormatLog();
      v51 = _AXStringForArgs();
      if (os_log_type_enabled(v14, v49))
      {
        *buf = 138543362;
        v164 = v51;
        _os_log_impl(&_mh_execute_header, v14, v49, "%{public}@", buf, 0xCu);
      }
    }

    goto LABEL_28;
  }

  Current = CFAbsoluteTimeGetCurrent();
  self->_lastAnnouncementNotificationTime = Current;
  if ([(VOTElementManager *)self _shouldSuppressSpeechForPlayPause])
  {
    goto LABEL_29;
  }

  if ([v8 isAXAttributedString])
  {
    v40 = [v8 attributeValueForKey:UIAccessibilityTokenPassthroughOnlyReordering];
    v41 = [v40 BOOLValue];

    if (v41)
    {
      if (([(AXDragManager *)self->_dragManager isDragActive]& 1) != 0)
      {
        goto LABEL_29;
      }

      v42 = +[VOTOutputManager outputManager];
      v43 = +[VOSOutputEvent DidReorderItem];
      [v42 sendEvent:v43];
    }
  }

  if ([v8 isEqualToString:{kAXAnnouncementTypeReorderSound, v140}])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent DidReorderItem];
LABEL_54:
    v52 = v45;
    [v44 sendEvent:v45];

LABEL_55:
    v14 = 0;
    v145 = 0;
    v142 = 0;
    v147 = 0;
LABEL_56:
    v53 = 0;
    goto LABEL_57;
  }

  if ([v8 isEqualToString:kAXAnnouncementCollaborationOccurredSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent CollaborationOccurred];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeScrollSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent DidScrollByPage];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeFolderOpeningSound])
  {
    v91 = +[VOTOutputManager outputManager];
    v92 = +[VOSOutputEvent FolderWillOpen];
LABEL_139:
    v95 = v92;
    [v91 sendEvent:v92];

    v14 = 0;
    v145 = 0;
    v142 = 0;
    v147 = 0;
    v53 = 0;
    self->_lastFolderOperationTime = Current;
    goto LABEL_57;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeFolderOpenedSound])
  {
    v91 = +[VOTOutputManager outputManager];
    v92 = +[VOSOutputEvent FolderDidOpen];
    goto LABEL_139;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeFolderClosedSound])
  {
    v91 = +[VOTOutputManager outputManager];
    v92 = +[VOSOutputEvent FolderDidClose];
    goto LABEL_139;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeKeyboardAppearSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent KeyboardAppeared];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeKeyboardDisappearSound])
  {
    v44 = +[VOTOutputManager outputManager];
    v45 = +[VOSOutputEvent KeyboardDisappeared];
    goto LABEL_54;
  }

  if ([v8 isEqualToString:kAXAnnouncementAppSwitchBorderSound])
  {
    v44 = +[VOTOutputManager outputManager];
    [v44 playSoundFast:@"Sounds/AppSwitchBorder.aiff"];
    goto LABEL_55;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeStopSpeech])
  {
    v44 = +[VOTOutputManager outputManager];
    [v44 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:&off_1001D9FE0];
    goto LABEL_55;
  }

  v96 = v4;
  if ([v8 isEqualToString:kAXAnnouncementWebPageLoadingSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent ItemIsLoading];
LABEL_150:
    v99 = v98;
    [v97 sendEvent:v98];

LABEL_154:
    v14 = 0;
LABEL_155:
    v145 = 0;
    v142 = 0;
    v147 = 0;
    goto LABEL_56;
  }

  if ([v8 isEqualToString:kAXAnnouncementStackShotSound])
  {
    v100 = +[VOTOutputManager outputManager];
    v97 = v100;
    v101 = @"Sounds/StackShot.aiff";
LABEL_153:
    [v100 playSoundFast:v101];
    goto LABEL_154;
  }

  if ([v8 isEqualToString:kAXAnnouncementBorderHitSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent BoundaryEncountered];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementEnteredValidStateSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidEnterTargetArea];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementExitedValidStateSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidLeaveTargetArea];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeLockScreenTouchIDAuthenticationSuccessSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TouchIDAuthenticated];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeLockScreenAuthenticationFailureSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TouchIDFailed];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypePassthroughSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidBeginPassthrough];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeProgressMadeSound] || objc_msgSend(v8, "isEqualToString:", kAXAnnouncementTypeSuccessSound))
  {
    v100 = +[VOTOutputManager outputManager];
    v97 = v100;
    v101 = @"Sounds/Reorder.aiff";
    goto LABEL_153;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeDockShowSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DockDidAppear];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeDockHideSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DockDidDisappear];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeTutorialSuccess])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TutorialSuccess];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeTutorialMagicTapStart])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TutorialMagicTapStart];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeTutorialMagicTapStop])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent TutorialMagicTapStop];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeDidActivateElementSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent DidActivateElement];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeNoItemExistsSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent NoItemExists];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeWindowingUnstashedSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent ReachabilityDidBegin];
    goto LABEL_150;
  }

  if ([v8 isEqualToString:kAXAnnouncementTypeWindowingStashedSound])
  {
    v97 = +[VOTOutputManager outputManager];
    v98 = +[VOSOutputEvent ReachabilityDidEnd];
    goto LABEL_150;
  }

  if (![v8 isAXAttributedString])
  {
    v14 = +[VOTOutputRequest createRequest];
    v109 = [v14 addString:v8];
    goto LABEL_155;
  }

  v4 = v8;
  v102 = [v4 attributesAtIndex:0 effectiveRange:0];
  v103 = [v102 objectForKey:UIAccessibilityTokenAssistantString];
  HIDWORD(v145) = [v103 BOOLValue];

  v152 = v102;
  v104 = [v102 objectForKey:UIAccessibilityTokenAnnouncementPriority];

  if (v104)
  {
    v105 = [v102 objectForKey:UIAccessibilityTokenAnnouncementPriority];
    v106 = [v105 intValue];
LABEL_192:
    v150 = v106;

    goto LABEL_193;
  }

  v137 = AXUIAccessibilitySpeechAttributeAnnouncementPriority;
  v138 = [v102 objectForKey:AXUIAccessibilitySpeechAttributeAnnouncementPriority];

  if (v138)
  {
    v105 = [v152 objectForKey:v137];
    if ([v105 isEqualToString:AXUIAccessibilityAnnouncementPriorityLow])
    {
      v106 = 10;
    }

    else
    {
      v139 = [v105 isEqualToString:AXUIAccessibilityAnnouncementPriorityHigh];
      v106 = 5;
      if (v139)
      {
        v106 = 1;
      }
    }

    goto LABEL_192;
  }

  v150 = 5;
LABEL_193:
  v107 = [v152 objectForKey:UIAccessibilityTokenPassthroughOnlyPasteboardOp];
  HIDWORD(v142) = [v107 BOOLValue];

  if (v150 < 10)
  {
    BYTE4(v147) = 0;
  }

  else
  {
    v108 = +[VOTOutputManager outputManager];
    HIDWORD(v147) = [v108 isSpeaking] & (HIDWORD(v145) ^ 1);
  }

  v110 = [v152 objectForKey:UIAccessibilityTokenRequiresEditingStyleResolution];

  if (v110)
  {
    v111 = [(VOTElementManager *)self _handleEditingStyleResolutionForAnnouncement:v4];

    v4 = v111;
  }

  v112 = [v152 objectForKey:UIAccessibilityTokenHint];
  if ([v112 BOOLValue])
  {
    v113 = [VOTSharedWorkspace hintsEnabled];

    if ((v113 & 1) == 0)
    {
      goto LABEL_222;
    }
  }

  else
  {
  }

  v114 = [v152 objectForKey:UIAccessibilityTokenTextDeletion];
  if ([v114 BOOLValue])
  {
    v115 = [VOTSharedWorkspace typingPitchChangeEnabled];

    if (!v115)
    {
      goto LABEL_207;
    }

    v114 = [NSMutableDictionary dictionaryWithDictionary:v152];
    [v114 setObject:kCFBooleanTrue forKey:UIAccessibilityTokenLowPitch];
    [v4 setAttributes:v114];
  }

LABEL_207:
  v116 = [v152 objectForKey:UIAccessibilityTokenLiveRegionAnnouncement];
  v117 = [v116 BOOLValue];

  if (v117)
  {
    self->_lastLiveRegionUpdate = Current;
  }

  v118 = [v152 objectForKey:UIAccessibilityTokenDictationAnnouncement];
  v119 = [v118 BOOLValue];

  if (v119)
  {
    [(VOTElementManager *)self _processSilentValueChange];
  }

  v120 = [v152 objectForKey:UIAccessibilityTokenTextOperationRelated];
  v121 = [v120 BOOLValue];

  if (v121)
  {
    [(VOTElementManager *)self _reupdateTextSelectionInformation];
  }

  v122 = [v152 objectForKey:UIAccessibilityTokenBrailleDisplayOnly];
  LOBYTE(v147) = [v122 BOOLValue];

  v123 = [v152 objectForKey:UIAccessibilityTokenSystemNotificationAlert];
  v124 = [v123 BOOLValue];

  v125 = [v152 objectForKey:UIAccessibilityTokenAnnounceEvenIfSystemSleeping];
  LODWORD(v145) = [v125 BOOLValue];

  v126 = [v152 objectForKey:UIAccessibilityTokenTextInsertion];
  v127 = [v126 BOOLValue];

  if (v127)
  {
    v128 = +[NSCharacterSet wordBreakCharacterSet];
    v129 = [v4 rangeOfCharacterFromSet:v128];

    if (v129 == 0x7FFFFFFFFFFFFFFFLL && ([(VOTElementManager *)self typingFeedbackForKeyboardType]& 0xFFFFFFFFFFFFFFFDLL) == 1)
    {
      goto LABEL_222;
    }

    if ([VOTSharedWorkspace typingPitchChangeEnabled])
    {
      v130 = [NSMutableDictionary dictionaryWithDictionary:v152];
      [v130 setObject:kCFBooleanTrue forKey:UIAccessibilityTokenHighPitch];
      [v4 setAttributes:v130];
    }

    BYTE4(v147) |= CFAbsoluteTimeGetCurrent() - self->_lastTextInsertionAnnouncementTime < 0.25;
    self->_lastTextInsertionAnnouncementTime = Current;
  }

  v131 = [v152 objectForKey:UIAccessibilityTokenSystemAnnouncement];
  if ([v131 BOOLValue] && -[VOTElementManager isReadingAll](self, "isReadingAll"))
  {
    v132 = +[VOTOutputManager outputManager];
    v133 = [v132 isPaused];

    if (!v133)
    {
LABEL_222:

      v14 = 0;
      goto LABEL_28;
    }
  }

  else
  {
  }

  v14 = [objc_allocWithZone(VOTOutputRequest) init];
  v134 = [v14 addAttributedString:v4];
  if ([v4 hasAttribute:UIAccessibilityTokenVeryPoliteAnnouncement])
  {
    v135 = +[VOTOutputManager outputManager];
    v136 = [v135 isSpeaking];

    if (!(v117 & 1 | ((v136 & 1) == 0)))
    {

      v14 = 0;
    }

    BYTE4(v147) = 1;
  }

  if (([v4 hasAttribute:UIAccessibilityTokenPoliteAnnouncement]& 1) != 0 || ([v4 hasAttribute:AXUIAccessibilitySpeechAttributeQueueAnnouncement]& 1) != 0)
  {
    BYTE4(v147) = 1;
  }

  else if (v150 == 1)
  {
    [v14 setCannotBeInterrupted:1];
  }

  LOBYTE(v142) = [v4 hasAttribute:UIAccessibilityTokenSuppressBrailleOutput];

  LODWORD(v4) = v96;
  v53 = v124;
LABEL_57:
  v143 = v4;
  v141 = [VOTSharedWorkspace useRingerSwitchForNotificationOutput];
  v151 = [VOTSharedWorkspace bannerNotificationsOutput];
  v146 = [VOTSharedWorkspace bannerNotificationsOutput];
  v54 = [VOTSharedWorkspace bannerNotificationsOutput];
  v55 = +[VOTWorkspace sharedWorkspace];
  if ([v55 currentCallState])
  {
    v56 = +[VOTWorkspace sharedWorkspace];
    v57 = [v56 currentCallState] == 2;
  }

  else
  {
    v57 = 1;
  }

  v58 = +[VOTElement springBoardApplication];
  v144 = [v58 isSystemSleeping];

  v59 = +[VOTElement springBoardApplication];
  v60 = [v59 isSystemLocked];

  v61 = +[VOTElement springBoardApplication];
  v149 = v53;
  v62 = v53 ^ 1;
  v63 = 1;
  if (![v61 isVoiceControlRunning] && ((v57 | v62) & 1) != 0 && (objc_msgSend(VOTSharedWorkspace, "tapAndHoldMode") & v149 & 1) == 0 && ((v149 & v141) != 1 || (objc_msgSend(VOTSharedWorkspace, "isRingerSwitchSilent") & 1) == 0))
  {
    if (v145 & 1 | ((v149 & v144 & 1) == 0))
    {
      v64 = (v151 & 2) != 0 ? 0 : v149;
      v63 = (v54 & 0x10) != 0 ? 0 : v64;
      if ((v63 & 1) == 0 && ((v60 ^ 1) & 1) == 0)
      {
        v65 = +[VOTElement systemAppApplication];
        v63 = [v65 isAlarmRinging];
      }
    }
  }

  if ((v54 & 0x10) != 0)
  {
    v66 = v62;
  }

  else
  {
    v66 = 1;
  }

  if ((v54 & 0x10) != 0)
  {
    v67 = 0;
  }

  else
  {
    v67 = v149;
  }

  if (v66)
  {
    v68 = v147;
  }

  else
  {
    v68 = ((v151 & 2) == 0) | v147;
  }

  v148 = v68;
  if (v149)
  {
    v69 = ((v151 & 2) >> 1) | BYTE4(v147);
  }

  else
  {
    v69 = BYTE4(v147);
  }

  if ((v149 & ((v146 & 0x40) != 0)) == 1)
  {
    v70 = +[VOTOutputManager outputManager];
    v71 = +[VOSOutputEvent NotificationDidAppear];
    [v70 sendEvent:v71];
  }

  [v14 setOriginationType:1];
  if ((v151 & 2) != 0)
  {
    v72 = v62;
  }

  else
  {
    v72 = 1;
  }

  if (v72 == 1)
  {
    if (v69)
    {
      [v14 setDoesNotInterrupt:1];
      v73 = +[VOTOutputManager outputManager];
      v74 = [v73 isPaused];

      if (!v74)
      {
        goto LABEL_100;
      }
    }

    else
    {
      *&self->_flags.isReadingAll = 0;
    }

    v75 = VOTLogSpeech();
    if (os_log_type_enabled(v75, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v75, OS_LOG_TYPE_INFO, "Speech paused or not queued, so resetting read all", buf, 2u);
    }

    *&self->_flags.isReadingAll = 0;
  }

LABEL_100:
  if (v14)
  {
    if (!(BYTE4(v145) & 1 | ((v63 & 1) == 0)))
    {
      v155 = 0u;
      v156 = 0u;
      v153 = 0u;
      v154 = 0u;
      v86 = self->_currentApplications;
      v87 = [(NSArray *)v86 countByEnumeratingWithState:&v153 objects:v162 count:16];
      if (v87)
      {
        v88 = v87;
        v89 = *v154;
        do
        {
          for (i = 0; i != v88; i = i + 1)
          {
            if (*v154 != v89)
            {
              objc_enumerationMutation(v86);
            }

            [*(*(&v153 + 1) + 8 * i) notifyAnnouncementFinishedWithString:v8 didFinishSuccessfully:0];
          }

          v88 = [(NSArray *)v86 countByEnumeratingWithState:&v153 objects:v162 count:16];
        }

        while (v88);
      }

      goto LABEL_28;
    }

    v76 = v67 | v142;
    if (self->_readAllOutputRequest)
    {
      v77 = +[VOTOutputManager outputManager];
      v78 = [v77 isPaused];

      if ((v78 & 1) == 0)
      {
        v79 = +[VOTOutputManager outputManager];
        [v79 holdCurrentRequest];

        LODWORD(v80) = 0.5;
        [v14 addPause:v80];
        v81 = [v14 outputActions];
        v82 = [v81 count];

        if (v82 >= 2)
        {
          v83 = [v14 outputActions];
          [v83 exchangeObjectAtIndex:1 withObjectAtIndex:0];
        }
      }
    }

    [v14 setGeneratesBraille:(v76 & 1) == 0];
    [v14 setBrailleType:2];
    [v14 setCompletionDelegate:self];
    if (v148)
    {
      [v14 setLimitToComponentType:3];
    }

    if (HIDWORD(v142))
    {
      v84 = [v14 outputActions];
      [v84 enumerateObjectsUsingBlock:&stru_1001CA158];
    }

    if (self->_announcementRequest)
    {
      [(VOTElementManager *)self _outputRequestFinished:?];
      [(VOTOutputRequest *)self->_announcementRequest setCompletionDelegate:0];
      announcementRequest = self->_announcementRequest;
      self->_announcementRequest = 0;
    }

    objc_storeStrong(&self->_announcementRequest, v14);
    self->_announcementPid = v143;
    objc_storeStrong(&self->_announcementOriginalString, v5);
    if ((v151 & 2) == 0) | v62 & 1 || ((v145 ^ 1) & 1) != 0 || ((v144 ^ 1))
    {
      if (v149)
      {
        [(VOTElementManager *)self _systemNotificationInProgressForRequest:v14];
        if (((v151 & 2) != 0) | BYTE4(v147) & 1)
        {
          [v14 setDoesNotInterrupt:1];
        }

        else
        {
          [v14 setInterruptsEverything:1];
        }

        v93 = +[VOTElement springBoardApplication];
        if ([v93 isSystemLocked])
        {
          v94 = [VOTSharedWorkspace isRingerSwitchSilent];

          if (v94)
          {
            goto LABEL_28;
          }
        }

        else
        {
        }
      }

      [(VOTElementManager *)self sendRequest:v14];
      goto LABEL_28;
    }

    [(VOTElementManager *)self setDelayedNotificationAnnouncementRequest:v14];
    AXPerformBlockOnMainThreadAfterDelay();
  }

LABEL_28:

LABEL_29:
}

- (id)_handleEditingStyleResolutionForAnnouncement:(id)a3
{
  firstResponderElement = self->_firstResponderElement;
  v4 = a3;
  v5 = [(VOTElement *)firstResponderElement resolvedEditingStyles];
  v6 = [v4 coalescedAttributes];

  v7 = [v6 objectForKey:UIAccessibilityTokenRequiresEditingStyleResolution];

  if ([v7 isEqualToString:UIAccessibilityTokenBold])
  {
    v8 = off_1001FDDD0;
    v9 = [v5 objectForKeyedSubscript:UIAccessibilityTokenBold];
    v10 = [v9 BOOLValue];
    v11 = @"bold.off";
    v12 = @"bold.on";
LABEL_7:
    if (v10)
    {
      v13 = v12;
    }

    else
    {
      v13 = v11;
    }

    v14 = sub_1000511CC(v8, v13, 0);
    goto LABEL_11;
  }

  if ([v7 isEqualToString:UIAccessibilityTokenUnderline])
  {
    v8 = off_1001FDDD0;
    v9 = [v5 objectForKeyedSubscript:UIAccessibilityTokenUnderline];
    v10 = [v9 BOOLValue];
    v11 = @"underline.off";
    v12 = @"underline.on";
    goto LABEL_7;
  }

  if ([v7 isEqualToString:UIAccessibilityTokenItalic])
  {
    v8 = off_1001FDDD0;
    v9 = [v5 objectForKeyedSubscript:UIAccessibilityTokenItalic];
    v10 = [v9 BOOLValue];
    v11 = @"italic.off";
    v12 = @"italic.on";
    goto LABEL_7;
  }

  if ([v7 isEqualToString:UIAccessibilityTokenFontSize])
  {
    v9 = sub_1000511CC(off_1001FDDD0, @"font.size", 0);
    v17 = [v5 objectForKeyedSubscript:UIAccessibilityTokenFontSize];
    v14 = +[NSString localizedStringWithFormat:](NSString, "localizedStringWithFormat:", v9, [v17 intValue]);

LABEL_11:
    goto LABEL_12;
  }

  v14 = 0;
LABEL_12:
  v15 = [AXAttributedString axAttributedStringWithString:v14];

  return v15;
}

- (void)_systemNotificationInProgressForRequest:(id)a3
{
  self->_systemNotificationInProgress = 1;
  v3[0] = _NSConcreteStackBlock;
  v3[1] = 3221225472;
  v3[2] = sub_1000A4088;
  v3[3] = &unk_1001C9EE8;
  v3[4] = self;
  [a3 setCompletionBlock:v3];
}

- (id)_retrieveDefaultElementForPosition:(CGPoint)a3
{
  [VOTSharedWorkspace convertDevicePointToZoomedPoint:{a3.x, a3.y}];
  v4 = v3;
  v6 = v5;
  v7 = [objc_allocWithZone(VOTElement) initApplicationWithPosition:{v3, v5}];
  v8 = +[AXSubsystemVoiceOver sharedInstance];
  v9 = [v8 ignoreLogging];

  if ((v9 & 1) == 0)
  {
    v10 = +[AXSubsystemVoiceOver identifier];
    v11 = AXLoggerForFacility();

    v12 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v11, v12))
    {
      v13 = AXColorizeFormatLog();
      v29.x = v4;
      v29.y = v6;
      NSStringFromPoint(v29);
      v25 = v24 = v7;
      v14 = _AXStringForArgs();

      if (os_log_type_enabled(v11, v12))
      {
        *buf = 138543362;
        v27 = v14;
        _os_log_impl(&_mh_execute_header, v11, v12, "%{public}@", buf, 0xCu);
      }
    }
  }

  v15 = [v7 firstResponderElementForFocus];
  if (!v15)
  {
    v15 = [v7 firstElementInApplication];
  }

  v16 = +[AXSubsystemVoiceOver sharedInstance];
  v17 = [v16 ignoreLogging];

  if ((v17 & 1) == 0)
  {
    v18 = +[AXSubsystemVoiceOver identifier];
    v19 = AXLoggerForFacility();

    v20 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v19, v20))
    {
      v21 = AXColorizeFormatLog();
      v22 = _AXStringForArgs();
      if (os_log_type_enabled(v19, v20))
      {
        *buf = 138543362;
        v27 = v22;
        _os_log_impl(&_mh_execute_header, v19, v20, "%{public}@", buf, 0xCu);
      }
    }
  }

  return v15;
}

- (void)_handleAlertReceived:(id)a3 forApplication:(__AXUIElement *)a4
{
  v6 = a3;
  v7 = [AXUIElement uiElementWithAXElement:a4];
  v8 = [VOTElement elementWithUIElement:v7];

  v9 = +[VOTCommandHelper commandHelper];
  [v9 setHelpEnabled:0];

  [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
  [(VOTElementManager *)self _resetItemChooserCache];
  [(VOTElementManager *)self _resetDirectInteractionCache];
  v10 = +[NSNotificationCenter defaultCenter];
  [v10 postNotificationName:@"UpdateElement" object:0];

  if (v6 && (objc_opt_class(), (objc_opt_isKindOfClass() & 1) == 0))
  {
    v31 = +[AXSubsystemVoiceOver sharedInstance];
    v32 = [v31 ignoreLogging];

    if ((v32 & 1) == 0)
    {
      v33 = +[AXSubsystemVoiceOver identifier];
      v22 = AXLoggerForFacility();

      v34 = AXOSLogLevelFromAXLogLevel();
      if (!os_log_type_enabled(v22, v34))
      {
LABEL_45:

        goto LABEL_46;
      }

      v23 = AXColorizeFormatLog();
      objc_opt_class();
      v25 = _AXStringForArgs();
      if (os_log_type_enabled(v22, v34))
      {
        *buf = 138543362;
        v63 = v25;
        _os_log_impl(&_mh_execute_header, v22, v34, "%{public}@", buf, 0xCu);
      }

LABEL_44:

      goto LABEL_45;
    }
  }

  else
  {
    v11 = +[VOTElement springBoardApplication];
    v12 = [v11 isSystemSleeping];

    v13 = +[VOTElement springBoardApplication];
    v14 = [v13 isQuietModeEnabled];

    if ((v14 & 1) == 0 && (v12 & 1) == 0)
    {
      v15 = +[VOTElement springBoardApplication];
      v16 = [v15 isSystemLocked];

      Current = CFAbsoluteTimeGetCurrent();
      if (![VOTSharedWorkspace isRingerSwitchSilent] || !v16 || (objc_msgSend(VOTSharedWorkspace, "lastLockButtonPress"), Current - v18 <= 1.5) || (objc_msgSend(VOTSharedWorkspace, "lastHomeButtonPress"), Current - v19 <= 1.5))
      {
        if (CFAbsoluteTimeGetCurrent() - self->_lastAlertTime >= 1.25)
        {
          v20 = +[VOTOutputManager outputManager];
          v21 = +[VOSOutputEvent AlertDidAppear];
          [v20 sendEvent:v21];

          v22 = [objc_allocWithZone(VOTOutputRequest) init];
          [v22 setCannotBeInterrupted:1];
          [v22 setInterruptsEverything:1];
          v23 = [VOTSharedWorkspace selectedLanguage];
          v24 = sub_1000516CC(off_1001FDDD0, @"alert.message", 0, v23);
          v25 = [v22 addString:v24 withLanguage:v23];

          [v25 enumerateObjectsUsingBlock:&stru_1001CA178];
          v26 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
          v27 = [v6 stringByTrimmingCharactersInSet:v26];
          v28 = [v27 length];

          if (v28)
          {
            v29 = [v22 addString:v6];
          }

          v30 = ![v6 isAXAttributedString] || (objc_msgSend(v6, "hasAttribute:", UIAccessibilityTokenSuppressBrailleOutput) & 1) == 0;
          [v22 setGeneratesBraille:v30];
          [v22 setBrailleType:2];
          [(VOTElementManager *)self sendRequest:v22];
          if (!self->_elementBeforeAlert)
          {
            v35 = [(VOTElementManager *)self _currentElement];
            elementBeforeAlert = self->_elementBeforeAlert;
            self->_elementBeforeAlert = v35;
          }

          [NSThread sleepForTimeInterval:0.05];
          v37 = self->_elementBeforeAlert;
          if (v37)
          {
            v38 = [(VOTElement *)v37 application];
            v39 = v38;
            if (v38)
            {
              [v38 frame];
              x = v64.origin.x;
              y = v64.origin.y;
              width = v64.size.width;
              height = v64.size.height;
              MidX = CGRectGetMidX(v64);
              v65.origin.x = x;
              v65.origin.y = y;
              v65.size.width = width;
              v65.size.height = height;
              v45 = [(VOTElementManager *)self _retrieveDefaultElementForPosition:MidX, CGRectGetMidY(v65)];
            }

            else
            {
              v45 = 0;
            }

            if (!v8)
            {
LABEL_30:
              if (!v45)
              {
                v47 = +[VOTElement systemAppApplication];
                [v47 centerPointOfScreen];
                v45 = [(VOTElementManager *)self _retrieveDefaultElementForPosition:?];

                if (!v45)
                {
                  v48 = [(VOTElementManager *)self _retrieveDefaultElementForPosition:*&qword_1001FF180, *algn_1001FF188];
                  if (!v48)
                  {
LABEL_43:
                    self->_lastAlertTime = CFAbsoluteTimeGetCurrent();
                    goto LABEL_44;
                  }

                  v45 = v48;
                }
              }

              v59 = v25;
              [(VOTElementManager *)self _cancelPreviousElementSearch];
              [(VOTElementFetcher *)self->_fetchManager forceUpdate];
              [(VOTElementFetcher *)self->_fetchManager updateCacheWithElement:v45];
              [(VOTElementManager *)self _setCurrentElement:v45];
              v49 = [v45 application];
              v50 = v49;
              if (v49)
              {
                currentApplications = self->_currentApplications;
                v61 = v49;
                v52 = [NSArray arrayWithObjects:&v61 count:1];
                LODWORD(currentApplications) = [(NSArray *)currentApplications isEqualToArray:v52];

                if (currentApplications)
                {
                  v60 = v50;
                  v53 = [NSArray arrayWithObjects:&v60 count:1];
                  v54 = self->_currentApplications;
                  self->_currentApplications = v53;
                }

                if (!v28)
                {
                  goto LABEL_41;
                }
              }

              else
              {
                v58 = v45;
                _AXAssert();
                if (!v28)
                {
                  goto LABEL_41;
                }
              }

              if (![v45 doesHaveTraits:{kAXIsEditingTrait, v58}])
              {
LABEL_42:
                v25 = v59;
                AXPerformBlockOnMainThreadAfterDelay();

                goto LABEL_43;
              }

LABEL_41:
              v55 = [objc_allocWithZone(VOTOutputRequest) init];

              [(VOTElementManager *)self _addDescription:v45 toRequest:v55 withOptions:1];
              [(VOTElementManager *)self sendRequest:v55];
              [(VOTElementManager *)self setFirstResponder:v45];
              v56 = [v45 selectedTextRange];
              [(VOTElementManager *)self _elementSelectionRangeDidChange:v56 reason:v57, 0];
              v22 = v55;
              goto LABEL_42;
            }
          }

          else
          {
            v45 = 0;
            if (!v8)
            {
              goto LABEL_30;
            }
          }

          v46 = [v8 firstElementInApplicationForFocus];

          v45 = v46;
          goto LABEL_30;
        }
      }
    }
  }

LABEL_46:
}

- (void)_updateDisplayWithCurrentElement
{
  v3 = +[VOTDisplayManager displayManager];
  [v3 setCursorFrameForElement:self->_currentElement];
}

- (void)_updateMLElementAutorefresh
{
  v2 = [VOTSharedWorkspace automaticAccessibilityEnabled];
  v3 = AXMediaLogMLElement();
  v4 = v3;
  if (v2)
  {
    if (os_log_type_enabled(v3, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v4, OS_LOG_TYPE_INFO, "Turning on auto refresh", buf, 2u);
    }

    v5 = +[VOTElement systemAppApplication];
    v6 = [v5 focusedApplications];

    v7 = [v6 ax_mappedArrayUsingBlock:&stru_1001CA1B8];
    [AXUIMLElement clearCachesForAppsExcluding:v7];

    v24 = 0u;
    v25 = 0u;
    v22 = 0u;
    v23 = 0u;
    v4 = v6;
    v8 = [v4 countByEnumeratingWithState:&v22 objects:v30 count:16];
    if (v8)
    {
      v10 = v8;
      v11 = *v23;
      *&v9 = 138412546;
      v21 = v9;
      do
      {
        for (i = 0; i != v10; i = i + 1)
        {
          if (*v23 != v11)
          {
            objc_enumerationMutation(v4);
          }

          v13 = *(*(&v22 + 1) + 8 * i);
          v14 = [v13 bundleIdentifier];
          if ([v14 isEqualToString:@"com.apple.springboard"])
          {
            v15 = [v4 count];

            if (v15 > 1)
            {
              continue;
            }
          }

          else
          {
          }

          v16 = [v13 bundleIdentifier];
          v17 = AXProcessWantsMLElementsForBundle();

          v18 = AXMediaLogMLElement();
          if (os_log_type_enabled(v18, OS_LOG_TYPE_DEFAULT))
          {
            *buf = v21;
            v27 = v13;
            v28 = 1024;
            v29 = v17;
            _os_log_impl(&_mh_execute_header, v18, OS_LOG_TYPE_DEFAULT, "For app: %@ -> %d", buf, 0x12u);
          }

          v19 = [v13 uiElement];
          [AXUIMLElement setAutoRefresh:v17 forApp:v19];

          if (v17)
          {
            v20 = 2;
          }

          else
          {
            v20 = 0;
          }

          [v13 setTemporaryVoiceOverStatus:v20];
        }

        v10 = [v4 countByEnumeratingWithState:&v22 objects:v30 count:16];
      }

      while (v10);
    }
  }

  else if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D434();
  }
}

- (void)_updateForContinuityStateChange
{
  if ((+[AXSpringBoardServer isAvailable]& 1) != 0)
  {
    v3 = +[AXSpringBoardServer server];
    -[VOTElementManager setIsContinuitySessionActive:](self, "setIsContinuitySessionActive:", [v3 isContinuitySessionActive]);
  }

  else
  {
    [(VOTElementManager *)self setIsContinuitySessionActive:0];
  }

  v4 = [(VOTElementManager *)self isContinuitySessionActive];
  v5 = +[AXEventTapManager sharedManager];
  [v5 setIgnoreEventsForContinuitySession:v4];

  v6 = VOTLogCommon();
  if (os_log_type_enabled(v6, OS_LOG_TYPE_INFO))
  {
    v7 = [(VOTElementManager *)self isContinuitySessionActive];
    v8 = @"NO";
    if (v7)
    {
      v8 = @"YES";
    }

    v9 = 136315394;
    v10 = "[VOTElementManager _updateForContinuityStateChange]";
    v11 = 2112;
    v12 = v8;
    _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_INFO, "%s isContinuitySessionActive: %@", &v9, 0x16u);
  }
}

- (BOOL)_shouldIgnoreNotificationForContinuityDisplay:(id)a3 withElement:(__AXUIElement *)a4
{
  v6 = a3;
  if (![(VOTElementManager *)self isContinuitySessionActive])
  {
    goto LABEL_5;
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    goto LABEL_5;
  }

  v7 = [AXUIElement uiElementWithAXElement:a4];
  v8 = [VOTElement elementWithUIElement:v7];

  v9 = [v6 objectForKey:kAXPidKey];
  LODWORD(v7) = [v9 intValue];

  v10 = +[VOTElement springBoardApplication];
  if (v7 != [v10 pid])
  {

    goto LABEL_8;
  }

  v11 = [v8 pid];
  v12 = +[VOTElement springBoardApplication];
  v13 = [v12 pid];

  if (v11 != v13)
  {
LABEL_8:
    v14 = 1;
    goto LABEL_6;
  }

LABEL_5:
  v14 = 0;
LABEL_6:

  return v14;
}

- (BOOL)_currentElementIsTrappedInAuthentication
{
  v3 = [(VOTElement *)self->_currentElement application];
  v4 = [v3 bundleIdentifier];
  if ([v4 isEqualToString:@"com.apple.CoreAuthUI"] && -[VOTElement isAlive](self->_currentElement, "isAlive"))
  {
    v5 = [(VOTElement *)self->_currentElement isVisible];

    if (v5)
    {
      return 1;
    }
  }

  else
  {
  }

  return 0;
}

- (void)_handleScreenChange:(id)a3 sound:(id)a4
{
  v6 = a3;
  v7 = a4;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v8 = VOTLogLayoutChange();
  if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D470();
  }

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || ![(VOTElementManager *)self _shouldIgnoreElementMovementNotification:v6])
  {
    Current = CFAbsoluteTimeGetCurrent();
    v10 = +[VOTBrailleManager manager];
    [v10 setPanEnabled:1];

    if ((AXDeviceIsAudioAccessory() & 1) == 0)
    {
      v11 = +[VOTWorkspace sharedWorkspace];
      v12 = [v11 visionEngine];
      [v12 purgeCache];
    }

    [(VOTElementManager *)self _updateMLElementAutorefresh];
    [(SCRCTargetSelectorTimer *)self->_updateLayoutTimer cancel];
    [(VOTElementManager *)self setCachedSideAppDividerElement:0];
    [(VOTElementManager *)self setDidCacheSideAppDividerElement:0];
    [(VOTElementManager *)self setCachedOccludedMultitaskingApps:0];
    [(VOTElementManager *)self setCachedFrontmostItemContainerElement:0];
    [(VOTElementManager *)self setCachedAdditionalElementCommunities:0];
    [(VOTElementManager *)self setLastTrackingUpdateAppsFailureApplication:0];
    [(VOTElementManager *)self setLastTrackingUpdateAppsFailureTime:-3061152000.0];
    [(AXDispatchTimer *)self->_stewieRangeTimer cancel];
    v13 = +[VOTCommandHelper commandHelper];
    [v13 setHelpEnabled:0];

    if ([(VOTElementManager *)self _notificationData:v6 containsToken:kAXAnnouncementTypeStopSpeech])
    {
      v14 = +[VOTOutputManager outputManager];
      [v14 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

      v15 = [(VOTElementManager *)self _notificationData:v6 consumingToken:kAXAnnouncementTypeStopSpeech];

      v6 = v15;
    }

    if ([(VOTElementManager *)self _notificationData:v6 containsToken:kAXPerformElementUpdateImmediatelyToken])
    {
      v16 = 0.005;
    }

    else
    {
      v16 = 0.75;
    }

    v17 = +[NSNotificationCenter defaultCenter];
    [v17 postNotificationName:@"UpdateElement" object:0];

    v18 = objc_allocWithZone(VOTElement);
    v19 = +[VOTElement systemAppApplication];
    [v19 centerPointOfScreen];
    v20 = [v18 initApplicationWithPosition:?];

    if (Current - self->_lastAlertTime < 1.25 || ([(VOTElementManager *)self lastValueChangeTime], Current - v21 < 0.75))
    {
      v22 = [v20 firstElementInApplication];
      v23 = [(VOTElementManager *)self _currentElement];
      if ([v23 isEqual:v22] & 1) != 0 || (objc_msgSend(v23, "updateTraits"), objc_msgSend(v23, "isValid")) && (objc_msgSend(v23, "doesHaveTraits:", kAXKeyboardKeyTrait | kAXIsEditingTrait))
      {

        goto LABEL_19;
      }
    }

    v24 = [(VOTElementManager *)self _notificationData:v6 containsToken:kAXScreenChangePopup];
    [VOTSharedWorkspace tapAndHoldMode];
    WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);
    v26 = [WeakRetained directInteractionGestureInProgress];

    if (v26)
    {
      goto LABEL_24;
    }

    if ([(VOTElementManager *)self _currentElementIsTrappedInAuthentication])
    {
      v22 = VOTLogElement();
      if (os_log_type_enabled(v22, OS_LOG_TYPE_DEFAULT))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v22, OS_LOG_TYPE_DEFAULT, "Not moving VO focus, current element is an Authentication element", buf, 2u);
      }
    }

    else
    {
      [(SCRCTargetSelectorTimer *)self->_updateAppFromTimer cancel];
      objc_opt_class();
      if (objc_opt_isKindOfClass())
      {
        v22 = [v6 objectForKey:kAXScreenChangeSourceIdentifier];
      }

      else
      {
        v22 = 0;
      }

      if (!-[NSNumber isEqual:](self->_lastScreenChangeSourceIdentifier, "isEqual:", v22) || Current - self->_lastScreenChangeNotificationTime >= 2.5 || [VOTSharedWorkspace brailleInputActive])
      {
        objc_storeStrong(&self->_lastScreenChangeSourceIdentifier, v22);
        if ([(VOTElementManager *)self screenCurtainIsTemporarilyDisabled])
        {
          v27 = VOTLogElement();
          if (os_log_type_enabled(v27, OS_LOG_TYPE_DEFAULT))
          {
            *buf = 0;
            _os_log_impl(&_mh_execute_header, v27, OS_LOG_TYPE_DEFAULT, "Screen curtain re-enabled after temporary disablement", buf, 2u);
          }

          [(VOTElementManager *)self setScreenCurtainIsTemporarilyDisabled:0];
          v28 = +[VOTWorkspace sharedWorkspace];
          [v28 setScreenCurtainSuspended:0];
        }

        v29 = +[VOTDisplayManager displayManager];
        [v29 setCursorFrameForElement:0];

        v43[0] = _NSConcreteStackBlock;
        v43[1] = 3221225472;
        v43[2] = sub_1000A57C8;
        v43[3] = &unk_1001CA1E0;
        v43[4] = self;
        v44 = v16;
        v30 = objc_retainBlock(v43);
        if (Current - self->_lastScreenChangeNotificationTime >= 2.5 || -[VOTElement doesHaveTraits:](self->_currentElement, "doesHaveTraits:", kAXAdjustableTrait) || [VOTSharedWorkspace brailleInputActive])
        {
          [(VOTElementManager *)self _resetDirectInteractionCache];
          [(VOTElementManager *)self _resetItemChooserCache];
          [(NSMutableDictionary *)self->_flowFromElements removeAllObjects];
          self->_lastScreenChangeNotificationTime = CFAbsoluteTimeGetCurrent();
          lastFirstResponderChangeTime = self->_lastFirstResponderChangeTime;
          v32 = +[VOTElement springBoardApplication];
          v33 = [v32 isSystemSleeping];

          if ((v33 & 1) == 0)
          {
            v34 = Current - lastFirstResponderChangeTime;
            v35 = +[VOTElement springBoardApplication];
            v36 = [v35 isVoiceControlRunning];

            v37 = CFAbsoluteTimeGetCurrent() - self->_lastFolderOperationTime;
            if (v34 >= 0.5 || v36)
            {
              v38 = +[VOTOutputManager outputManager];
              [v38 stopSpeakingAtBoundary:0];
            }

            if (v37 < 0.25)
            {
              v39 = 1;
            }

            else
            {
              v39 = v36;
            }

            if (((v39 | v24) & 1) == 0)
            {
              v40 = +[VOTOutputManager outputManager];
              v41 = v40;
              if (v7)
              {
                [v40 playSoundFast:v7];
              }

              else
              {
                v42 = +[VOSOutputEvent ScreenDidChange];
                [v41 sendEvent:v42];
              }
            }
          }
        }

        (v30[2])(v30);
      }
    }

LABEL_19:

LABEL_24:
  }
}

- (void)_clearWebLoadedSound
{
  [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer invalidate];
  webPageLoadingSoundTimer = self->_webPageLoadingSoundTimer;
  self->_webPageLoadingSoundTimer = 0;

  v4 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v4, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D4DC();
  }
}

- (void)_webPageElementFinder
{
  v3 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D518();
  }

  v4 = [(VOTElementManager *)self _moveToWebItemDuringLoadIfNecessary];
  v5 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D554();
  }

  webPageElementFinder = self->_webPageElementFinder;
  if (v4)
  {
    [(SCRCTargetSelectorTimer *)webPageElementFinder invalidate];
    v7 = self->_webPageElementFinder;
    self->_webPageElementFinder = 0;
  }

  else
  {
    [(SCRCTargetSelectorTimer *)webPageElementFinder dispatchAfterDelay:0.5];
  }
}

- (void)_webPageLoadingSound
{
  if ([(VOTElementManager *)self _isWebAppStillOpen])
  {
    v3 = +[VOTOutputManager outputManager];
    v4 = +[VOSOutputEvent ItemIsLoading];
    [v3 sendEvent:v4];

    [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer dispatchAfterDelay:1.0];
    v5 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v5, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D5C4();
    }
  }
}

- (BOOL)_moveToWebItemDuringLoadIfNecessary
{
  v3 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D600();
  }

  if ([(VOTElementManager *)self webPageLoadedGenerationMark]&& (v4 = [(VOTElementManager *)self webPageLoadedGenerationMark], v4 >= [(VOTElementManager *)self elementGeneration]))
  {
    [(VOTElementManager *)self _resetItemChooserCache];
    [(VOTElementFetcher *)self->_fetchManager forceUpdate];
    v7 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v7, OS_LOG_TYPE_DEBUG))
    {
      sub_10012D694();
    }

    [(VOTElementManager *)self _updateApplicationAndSpeak:&__kCFBooleanTrue];
    if ([(VOTElement *)self->_currentElement doesHaveTraits:kAXWebContentTrait])
    {
      v8 = [(VOTElement *)self->_currentElement hasNativeFocus];
    }

    else
    {
      v8 = 0;
    }

    v9 = VOTLogWebPageMovement();
    if (os_log_type_enabled(v9, OS_LOG_TYPE_DEBUG))
    {
      v13 = [(VOTElementManager *)self webPageLoadedGenerationMark];
      v14 = [(VOTElementManager *)self elementGeneration];
      currentElement = self->_currentElement;
      v16[0] = 67109890;
      v16[1] = v8;
      v17 = 2048;
      v18 = v13;
      v19 = 2048;
      v20 = v14;
      v21 = 2112;
      v22 = currentElement;
      _os_log_debug_impl(&_mh_execute_header, v9, OS_LOG_TYPE_DEBUG, "Did we move from for web movement(has hasWebFocus: %d): web generation: %lld, element: %lld\nElement: %@", v16, 0x26u);
    }

    v10 = [(VOTElementManager *)self webPageLoadedGenerationMark];
    if ((v10 < [(VOTElementManager *)self elementGeneration]) | v8 & 1)
    {
      v11 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v11, OS_LOG_TYPE_DEBUG))
      {
        sub_10012D6D0();
      }

      goto LABEL_20;
    }
  }

  else
  {
    v5 = [(VOTElementManager *)self elementGeneration];
    if (v5 > [(VOTElementManager *)self webPageLoadedGenerationMark])
    {
      v6 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v6, OS_LOG_TYPE_DEBUG))
      {
        sub_10012D754();
      }

LABEL_20:
      [(VOTElementManager *)self setWebPageLoadedGenerationMark:0];
      return 1;
    }
  }

  return 0;
}

- (void)_handleWebPageLoaded:(id)a3
{
  v4 = a3;
  v5 = [(VOTElementManager *)self _shouldSuppressWebPageLoadedBehaviorForNotification:v4];
  v6 = v4;
  objc_opt_class();
  v7 = v6;
  if (objc_opt_isKindOfClass())
  {
    v8 = [v6 objectForKeyedSubscript:kAXNotificationDataKey];
    v9 = v8;
    v7 = v6;
    if (v8)
    {
      v7 = v8;
    }
  }

  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v10 = [v7 objectForKey:@"progress"];
    objc_opt_class();
    v11 = 0.0;
    if (objc_opt_isKindOfClass())
    {
      v12 = [v7 objectForKey:@"progress"];
      [v12 doubleValue];
      v11 = v13;
    }

    v14 = [v7 objectForKey:@"url"];
  }

  else
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      [v7 floatValue];
      v14 = 0;
      v11 = v15;
    }

    else
    {
      v14 = 0;
      v11 = 0.0;
    }
  }

  v16 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D7C8();
  }

  if (v11 != 1.0 && v11 >= 0.0)
  {
    if (!self->_webPageLoadingSoundTimer)
    {
      [(VOTElementManager *)self setWebPageLoadedGenerationMark:[(VOTElementManager *)self elementGeneration]];
      [(VOTElementManager *)self setWebPageLoadURL:v14];
      v17 = VOTLogWebPageMovement();
      if (os_log_type_enabled(v17, OS_LOG_TYPE_DEBUG))
      {
        sub_10012D838(self);
      }

      v18 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:self selector:"_webPageLoadingSound" thread:self->_elementManagerThread];
      webPageLoadingSoundTimer = self->_webPageLoadingSoundTimer;
      self->_webPageLoadingSoundTimer = v18;

      [(SCRCTargetSelectorTimer *)self->_webPageLoadingSoundTimer dispatchAfterDelay:0.0];
      if ((v5 & 1) == 0)
      {
        v20 = [objc_allocWithZone(SCRCTargetSelectorTimer) initWithTarget:self selector:"_webPageElementFinder" thread:self->_elementManagerThread];
        webPageElementFinder = self->_webPageElementFinder;
        self->_webPageElementFinder = v20;

        [(SCRCTargetSelectorTimer *)self->_webPageElementFinder dispatchAfterDelay:0.0];
      }
    }

    goto LABEL_31;
  }

  [(VOTElementManager *)self _clearWebLoadedSound];
  if (CFAbsoluteTimeGetCurrent() - self->_lastWebPageLoadTime > 3.0)
  {
    self->_lastWebPageLoadTime = CFAbsoluteTimeGetCurrent();
    self->_webPageLoadingProgress = 0.0;
    v22 = +[VOTOutputManager outputManager];
    if (([v22 isSpeaking] & 1) == 0 && objc_msgSend(VOTSharedWorkspace, "hintsEnabled"))
    {

      if (v5)
      {
LABEL_27:
        v25 = +[VOTOutputManager outputManager];
        v26 = +[VOSOutputEvent ItemDidLoad];
        [v25 sendEvent:v26];

        goto LABEL_28;
      }

      v22 = [VOTSharedWorkspace selectedLanguage];
      v23 = sub_1000516CC(off_1001FDDD0, @"webpage.loaded", 0, v22);
      v24 = sub_1000095FC(v23, 1, v22);
    }

    goto LABEL_27;
  }

LABEL_28:
  v27 = VOTLogWebPageMovement();
  if (os_log_type_enabled(v27, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D8B8();
  }

LABEL_31:
}

- (BOOL)_shouldSuppressWebPageLoadedBehaviorForNotification:(id)a3
{
  v3 = a3;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v4 = [v3 objectForKeyedSubscript:kAXPidKey];
    if (v4 && (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0) && (v5 = [v4 intValue], v5 >= 1))
    {
      v6 = [[VOTElement alloc] initApplicationWithPid:v5];
      v7 = [v6 bundleIdentifier];
      if (([v7 isEqualToString:AX_AppleTVAppBundleName] & 1) != 0 || objc_msgSend(v7, "isEqualToString:", AX_MusicBundleName))
      {
        v8 = VOTLogWebPageMovement();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEBUG))
        {
          sub_10012D930();
        }

        v9 = 1;
      }

      else
      {
        v9 = 0;
      }
    }

    else
    {
      v9 = 0;
    }
  }

  else
  {
    v9 = 0;
  }

  return v9;
}

- (void)_captionsDisplayedWithTextRuns:(id)a3
{
  v3 = a3;
  v4 = +[AXSettings sharedInstance];
  v5 = [v4 voiceOverDescribedMedia];

  if ((v5 & 3) == 0)
  {
    goto LABEL_25;
  }

  v19 = 0u;
  v20 = 0u;
  v17 = 0u;
  v18 = 0u;
  v6 = v3;
  v7 = [(VOTOutputRequest *)v6 countByEnumeratingWithState:&v17 objects:v21 count:16];
  if (!v7)
  {
    v9 = v6;
    goto LABEL_24;
  }

  v8 = v7;
  v16 = v3;
  v9 = 0;
  v10 = *v18;
  do
  {
    for (i = 0; i != v8; i = i + 1)
    {
      if (*v18 != v10)
      {
        objc_enumerationMutation(v6);
      }

      v12 = *(*(&v17 + 1) + 8 * i);
      objc_opt_class();
      if (objc_opt_isKindOfClass())
      {
        v13 = [v12 string];
      }

      else
      {
        objc_opt_class();
        if ((objc_opt_isKindOfClass() & 1) == 0)
        {
          continue;
        }

        v13 = v12;
      }

      v14 = v13;
      if (v13)
      {
        if (!v9)
        {
          v9 = objc_alloc_init(VOTOutputRequest);
        }

        v15 = [(VOTOutputRequest *)v9 addString:v14];
      }
    }

    v8 = [(VOTOutputRequest *)v6 countByEnumeratingWithState:&v17 objects:v21 count:16];
  }

  while (v8);

  v3 = v16;
  if (v9)
  {
    if ((v5 & 2) != 0)
    {
      [(VOTOutputRequest *)v9 setGeneratesBraille:1];
    }

    if ((v5 & 1) == 0)
    {
      [(VOTOutputRequest *)v9 setLimitToComponentType:3];
    }

    [(VOTOutputRequest *)v9 setBrailleType:1];
    [(VOTOutputRequest *)v9 send];
LABEL_24:
  }

LABEL_25:
}

- (void)_handleCaptionsDisplayedNotification:(id)a3
{
  v5 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ((AXDeviceIsAudioAccessory() & 1) == 0 && CFAbsoluteTimeGetCurrent() - self->_lastEventOccurredTime >= 2.0)
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v4 = [v5 objectForKeyedSubscript:kAXCaptionsDisplayedTextRuns];
      objc_opt_class();
      if (objc_opt_isKindOfClass())
      {
        [(VOTElementManager *)self _captionsDisplayedWithTextRuns:v4];
      }
    }
  }
}

- (void)_handleDidReceiveVisionEngineResult:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ((AXDeviceIsAudioAccessory() & 1) == 0 && CFAbsoluteTimeGetCurrent() - self->_lastEventOccurredTime >= 2.0)
  {
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      v5 = objc_opt_class();
      v6 = AXMSecureCodingClasses();
      v20 = 0;
      v7 = [NSKeyedUnarchiver axmSecurelyUnarchiveData:v4 withExpectedClass:v5 otherAllowedClasses:v6 error:&v20];
      v8 = v20;

      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0 || v8)
      {
        _AXAssert();
      }

      else
      {
        v8 = objc_opt_new();
        v16 = 0u;
        v17 = 0u;
        v18 = 0u;
        v19 = 0u;
        v9 = [v7 features];
        v10 = [v9 countByEnumeratingWithState:&v16 objects:v21 count:16];
        if (v10)
        {
          v11 = v10;
          v12 = *v17;
          do
          {
            for (i = 0; i != v11; i = i + 1)
            {
              if (*v17 != v12)
              {
                objc_enumerationMutation(v9);
              }

              v14 = *(*(&v16 + 1) + 8 * i);
              if ([v14 featureType] == 12)
              {
                v15 = [v14 value];
                [v8 addObject:v15];
              }
            }

            v11 = [v9 countByEnumeratingWithState:&v16 objects:v21 count:16];
          }

          while (v11);
        }

        [(VOTElementManager *)self _captionsDisplayedWithTextRuns:v8];
      }
    }

    else
    {
      _AXAssert();
    }
  }
}

- (void)_handleScreenOn
{
  [VOTSharedWorkspace setScreenOn:1 silently:0];
  [(VOTElementManager *)self _setCurrentElement:0];
  v3 = kAXPerformElementUpdateImmediatelyToken;

  [(VOTElementManager *)self _handleScreenChange:v3 sound:0];
}

- (void)_handleScreenOff
{
  v2 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent ScreenDidTurnOff];
  [v2 sendEvent:v3];

  v4 = VOTSharedWorkspace;

  [v4 setScreenOn:0 silently:0];
}

- (void)_handleStopSpeaking
{
  v2 = +[VOTOutputManager outputManager];
  [v2 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

  v3 = +[VOTOutputManager outputManager];
  [v3 toggleAudioSessionActive:0];
}

- (void)_handleStopSpeakingAndClearQueue
{
  v2 = +[VOTOutputManager outputManager];
  [v2 clearQueue];

  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];
}

- (void)_handleStopSpeakingAndClearAllQueues
{
  v2 = +[VOTOutputManager outputManager];
  [v2 clearAllQueues];

  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];
}

- (void)_handleTemporaryScreenCurtainDisablement
{
  v3 = VOTLogElement();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEFAULT))
  {
    *v6 = 0;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_DEFAULT, "Screen curtain turned off for temporary disablement", v6, 2u);
  }

  if ([VOTSharedWorkspace screenCurtainEnabled])
  {
    if (([VOTSharedWorkspace screenCurtainSuspended] & 1) == 0)
    {
      [(VOTElementManager *)self setScreenCurtainIsTemporarilyDisabled:1];
      v4 = +[VOTWorkspace sharedWorkspace];
      [v4 setScreenCurtainSuspended:1];

      v5 = +[VOTDisplayManager displayManager];
      [v5 clearCursorFrame];
    }
  }
}

- (void)_handleRequestExclusiveAudioHardware
{
  v2 = +[VOTOutputManager outputManager];
  [v2 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

  v3 = +[VOTOutputManager outputManager];
  [v3 toggleAudioSessionActive:0];

  v4 = VOTSharedWorkspace;

  [v4 setOutputDisabled:1];
}

- (void)_handleUnmuteEligibleEventOccured
{
  v2 = +[VOTWorkspace sharedWorkspace];
  [v2 unmuteEligibleEventOccured];
}

- (void)_handleAutoCorrectionDisplayNotification:(id)a3
{
  v5 = a3;
  autofillCurrentElement = self->_autofillCurrentElement;
  self->_autofillCurrentElement = 0;

  v7 = [(VOTElement *)self->_currentElement application];
  v8 = [v7 activeKeyboard];
  v9 = [v8 isKeyboardContinuousPathTracking];

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && [v5 hasAttribute:kAXAutoCorrectionForContinuousPathKey])
  {
    objc_storeStrong(&self->_continuousPathSuggestion, a3);
  }

  v10 = VOTLogCommon();
  if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
  {
    continuousPathSuggestion = self->_continuousPathSuggestion;
    v14 = 138412802;
    v15 = v5;
    v16 = 2112;
    v17 = continuousPathSuggestion;
    v18 = 1024;
    v19 = v9;
    _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "Auto correct displayed: %@, continuous path: %@[%d]", &v14, 0x1Cu);
  }

  if (v9)
  {
    if ([(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer isPending])
    {
      [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer cancel];
      [(SCRCTargetSelectorTimer *)self->_continuousPathIdleTimer dispatchAfterDelay:0.0];
    }
  }

  else
  {
    v12 = +[VOTOutputManager outputManager];
    v13 = +[VOSOutputEvent AutofillDidAppear];
    [v12 sendEvent:v13];
  }
}

- (void)_handleKeyboardChangedNotification
{
  v2 = +[VOTKeyboardManager keyboardManager];
  [v2 loadKeyboardMap];

  v3 = +[VOTBrailleManager manager];
  [v3 handleKeyboardChanged];

  v4 = +[VOTBrailleManager manager];
  [v4 refreshBrailleLine];
}

- (void)_handleAutoCorrectionMadeNotification:(id)a3
{
  v4 = a3;
  if ([v4 length])
  {
    v5 = +[AXSubsystemVoiceOver sharedInstance];
    v6 = [v5 ignoreLogging];

    if ((v6 & 1) == 0)
    {
      v7 = +[AXSubsystemVoiceOver identifier];
      v8 = AXLoggerForFacility();

      v9 = AXOSLogLevelFromAXLogLevel();
      if (os_log_type_enabled(v8, v9))
      {
        v10 = AXColorizeFormatLog();
        v11 = _AXStringForArgs();
        if (os_log_type_enabled(v8, v9))
        {
          *buf = 138543362;
          v16 = v11;
          _os_log_impl(&_mh_execute_header, v8, v9, "%{public}@", buf, 0xCu);
        }
      }
    }

    v12 = sub_1000511CC(off_1001FDDD0, @"autocorrection.text", 0);
    v13 = [NSString stringWithFormat:v12, v4];

    v14 = +[VOTOutputManager outputManager];
    [v14 speakSimpleString:v13];
  }

  [(VOTElementManager *)self _updateFirstResponderTypingBuffer];
}

- (void)_handleScrollByPageNotification:(id)a3
{
  v4 = a3;
  if (!v4 || (objc_opt_class(), (objc_opt_isKindOfClass() & 1) != 0))
  {
    v5 = [v4 isEqualToString:kAXPageScrollFailed];
    v6 = v5;
    if (v5)
    {

      v4 = 0;
    }

    v7 = [(VOTElementManager *)self _currentElement];
    if ([v7 isReadingContent])
    {
      v8 = 1;
    }

    else
    {
      v9 = [(VOTElementManager *)self _currentElement];
      v8 = [v9 includeDuringContentReading];
    }

    v10 = [VOTSharedWorkspace tapAndHoldMode];
    if ([v4 isAXAttributedString])
    {
      v11 = [v4 hasAttribute:kAXPageScrollIsCrownScroll];
    }

    else
    {
      v11 = 0;
    }

    v106 = [v4 isEqualToString:kAXScrollWithContentPullDown];
    if (v106)
    {
      sub_1000511CC(off_1001FDDD0, @"scroll.content.pulldown", 0);
      v4 = v12 = v4;
LABEL_24:

      goto LABEL_25;
    }

    if ((v6 & 1) != 0 || (v8 & 1) == 0 && (!v4 || -[NSString isEqualToString:](self->_lastScrollStatus, "isEqualToString:", v4) && [v4 length]))
    {
      v13 = [(VOTElementManager *)self _currentElement];
      v14 = [v13 mapFeatureType] != 0;

      if (((v14 | v11 | v10) & 1) == 0)
      {
        v12 = +[VOTOutputManager outputManager];
        v15 = +[VOSOutputEvent BoundaryEncountered];
LABEL_23:
        v16 = v15;
        [v12 sendEvent:v15];

        goto LABEL_24;
      }
    }

    else if ((v11 & 1) == 0)
    {
      v12 = +[VOTOutputManager outputManager];
      v15 = +[VOSOutputEvent DidScrollByPage];
      goto LABEL_23;
    }

LABEL_25:
    v17 = [objc_allocWithZone(VOTOutputRequest) init];
    v105 = v8;
    if (![v4 length] || v8 && self->_flags.isReadingAllBook)
    {
      v104 = 0;
LABEL_35:
      v24 = v17;
      [v17 setCannotBeInterrupted:1];
      v25 = [(VOTElementManager *)self _currentElement];
      v26 = self->_currentOpaqueParent;
      v107 = [v25 application];
      if ((v106 & 1) == 0 && ([v25 isValidForApplication:v107] & 1) == 0)
      {
        v27 = [v25 firstVisibleElementInList];
        if (v27)
        {
          v28 = v27;
          v29 = 27;
          while (1)
          {
            if ([v28 isValidForApplication:v107])
            {
              [v25 readingContentCausesPageTurn];
              v35 = v24;
              goto LABEL_107;
            }

            v30 = [v28 nextElement];
            if ([v30 isEqual:v28])
            {
              break;
            }

            v31 = v30;

            if (!--v29)
            {
              v28 = v31;
              break;
            }

            v28 = v31;
            if (!v31)
            {
              goto LABEL_43;
            }
          }

          v32 = [v25 readingContentCausesPageTurn];
          v35 = v24;
          if (!v28)
          {
            goto LABEL_44;
          }

LABEL_107:
          [(VOTElementManager *)self _setCurrentElement:v28];
          if (([v28 doesHaveTraits:kAXLaunchIconTrait] | v104))
          {
            [(VOTElementManager *)self _addDescription:v28 toRequest:v35 withOptions:0x800000];
          }

          if (!self->_flags.previousScrollWasBookContentMovement)
          {
            v79 = +[VOTDisplayManager displayManager];
            [v79 setCursorFrameForElement:v28];
          }

          fetchManager = self->_fetchManager;
          v81 = [(VOTElementManager *)self _currentElement];
          [(VOTElementFetcher *)fetchManager updateCacheWithElement:v81];

          goto LABEL_123;
        }
      }

LABEL_43:
      v32 = [v25 readingContentCausesPageTurn];
LABEL_44:
      v33 = v32;
      if (v6 & 1) == 0 && ((v32 | v105))
      {
        [v25 updateCache];
        [v25 updatePageContent];
        lastValidElement = self->_lastValidElement;
        self->_lastValidElement = 0;

        [(VOTElementManager *)self _resetElementUnitIndexes];
        self->_flags.shouldUpdateRotorForElement = 1;
        if (!self->_flags.previousScrollWasBookContentMovement)
        {
          v72 = [v25 isReadingContent];
          v35 = v24;
          if ((v72 & v33 & 1) != 0 || (v72 & 1) == 0 && (self->_flags.isReadingAll || self->_flags.userInitiatedBooksScroll))
          {
            AXPerformBlockOnMainThreadAfterDelay();
            objc_storeStrong(&self->_lastScrollStatus, v4);
            self->_flags.previousScrollWasBookContentMovement = 0;
LABEL_125:
            v103 = +[NSNotificationCenter defaultCenter];
            [v103 postNotificationName:@"UpdateElement" object:0];

            [(VOTElementManager *)self _resetItemChooserCache];
            goto LABEL_126;
          }

LABEL_124:
          objc_storeStrong(&self->_lastScrollStatus, v4);
          self->_flags.previousScrollWasBookContentMovement = 0;
          v101 = VOTSharedWorkspace;
          v102 = [(VOTElementManager *)self _currentRotorSelection];
          [v101 refreshBraille:0 rotorSelection:v102];

          goto LABEL_125;
        }

        v35 = v24;
        if (self->_bookLastContentMovementDirection == 2)
        {
          [(VOTElementManager *)self _setElementUnitIndexesToEndOfElement:v25];
        }

        v36 = [v25 pageContent];
        v28 = v36;
        bookLastContentMovementUnit = self->_bookLastContentMovementUnit;
        if (bookLastContentMovementUnit == 3)
        {
          bookLineNumber = self->_bookLineNumber;
          if (bookLineNumber == 0x7FFFFFFF)
          {
            if (self->_bookLastContentMovementDirection == 1)
            {
              bookLineNumber = 0;
              self->_bookLineNumber = 0;
            }

            else
            {
              bookLineNumber = 0x7FFFFFFFLL;
            }
          }

          v82 = [v25 stringForLineNumber:bookLineNumber];
          v83 = [v24 addString:v82];
          [v25 frameForLineNumber:self->_bookLineNumber];
          v85 = v84;
          v87 = v86;
          v89 = v88;
          v91 = v90;
          v92 = +[VOTElement systemWideElement];
          [v92 convertRect:objc_msgSend(v25 fromContextId:{"windowContextId"), v85, v87, v89, v91}];
          self->_lineFrame.origin.x = v93;
          self->_lineFrame.origin.y = v94;
          self->_lineFrame.size.width = v95;
          self->_lineFrame.size.height = v96;

          goto LABEL_119;
        }

        if (bookLastContentMovementUnit == 2)
        {
          v74 = [v36 wordFromPosition:self->_bookCursorPosition inDirection:self->_bookLastContentMovementDirection];
LABEL_118:
          v82 = [v28 substringWithRange:{v74, v75}];
          v98 = [v24 addString:v82];
LABEL_119:

          goto LABEL_120;
        }

        if (bookLastContentMovementUnit != 1)
        {
LABEL_120:
          if ([v35 containsActions])
          {
            v99 = +[VOTOutputManager outputManager];
            [v99 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

            [(VOTElementManager *)self sendRequest:v35];
          }

          -[VOTElementManager _handleBookContentMovement:direction:unit:generateOutput:](self, "_handleBookContentMovement:direction:unit:generateOutput:", v25, self->_bookLastContentMovementDirection, self->_bookLastContentMovementUnit, [v35 containsActions] ^ 1);
          v100 = +[VOTDisplayManager displayManager];
          [v100 setCursorFrame:{self->_lineFrame.origin.x, self->_lineFrame.origin.y, self->_lineFrame.size.width, self->_lineFrame.size.height}];

LABEL_123:
          goto LABEL_124;
        }

        bookLastContentMovementDirection = self->_bookLastContentMovementDirection;
        if (bookLastContentMovementDirection == 1)
        {
          bookCursorPosition = self->_bookCursorPosition;
          if (bookCursorPosition < [v36 length])
          {
            v37 = self->_bookCursorPosition & ~(self->_bookCursorPosition >> 63);
LABEL_117:
            v74 = [v28 rangeOfComposedCharacterSequenceAtIndex:v37];
            goto LABEL_118;
          }

          bookLastContentMovementDirection = self->_bookLastContentMovementDirection;
        }

        if (bookLastContentMovementDirection != 2)
        {
          goto LABEL_120;
        }

        v97 = self->_bookCursorPosition;
        v37 = v97 - 1;
        if (v97 < 1)
        {
          goto LABEL_120;
        }

        goto LABEL_117;
      }

      [v25 centerPoint];
      MidX = v41;
      MidY = v43;
      y = CGPointZero.y;
      if (CGPointZero.x == v41 && y == MidY)
      {
        v28 = v25;
        v35 = v24;
      }

      else
      {
        if ([v25 doesHaveTraits:{kAXWebContentTrait, CGPointZero.x, y}])
        {
          v47 = [v25 application];
          v48 = [v47 isSafari];

          if (v48)
          {
            v49 = [v25 remoteParent];
            v50 = v49;
            if (v49)
            {
              v51 = [v49 uiElement];
              [v51 rectWithAXAttribute:2057];
              v53 = v52;
              v55 = v54;
              v57 = v56;
              v59 = v58;

              v108.origin.x = v53;
              v108.origin.y = v55;
              v108.size.width = v57;
              v108.size.height = v59;
              MidX = CGRectGetMidX(v108);
              v109.origin.x = v53;
              v109.origin.y = v55;
              v109.size.width = v57;
              v109.size.height = v59;
              MidY = CGRectGetMidY(v109);
            }
          }
        }

        v60 = [v25 windowContextId];
        if (v60)
        {
          v61 = +[VOTElement systemWideElement];
          [v61 convertPoint:v60 fromContextId:{MidX, MidY}];
          MidX = v62;
          MidY = v63;
        }

        v64 = objc_allocWithZone(VOTElement);
        v65 = [v25 application];
        v28 = [v64 initWithPosition:v65 application:v60 contextId:{MidX, MidY}];

        v66 = [v28 parentTableOrCollectionView];
        v67 = [v25 parentTableOrCollectionView];
        v68 = [v66 isEqual:v67];

        if (!v28)
        {
          v28 = [(VOTElementManager *)self _sonarElementFromPoint:1 inForwardDirection:10 limit:MidX, MidY];
        }

        v35 = v24;
        if (([v28 isInTableCell] & 1) == 0 && (objc_msgSend(v25, "isInTableCell") & 1) != 0 || !(v68 & 1 | ((objc_msgSend(v28, "isInTableCell") & 1) == 0)))
        {
          if (![v25 isAlive] || (objc_msgSend(v25, "firstVisibleElementInList"), (v69 = objc_claimAutoreleasedReturnValue()) == 0))
          {
            v69 = [(VOTElement *)v26 firstVisibleElementInList];
          }

          v70 = [v69 nextElement];

          if (!v70)
          {
            v70 = v69;
          }

          v28 = v70;
        }
      }

      if (![v28 isValid])
      {
        [v25 updateCache];
        goto LABEL_102;
      }

      if (v106)
      {
        v71 = [v28 firstVisibleElementInList];
      }

      else
      {
        if ([v28 isEqual:v25])
        {
LABEL_101:
          [(VOTElementFetcher *)self->_fetchManager forceUpdate];
          self->_flags.shouldUpdateRotorForElement = 1;
LABEL_102:
          if ([v35 containsActions])
          {
            v78 = +[VOTOutputManager outputManager];
            [v78 stopSpeakingAtBoundary:0 allRequests:1 sessionDeactivationDelay:0];

            [(VOTElementManager *)self sendRequest:v35];
          }

          goto LABEL_123;
        }

        v71 = v28;
      }

      v73 = v71;
      if (v71)
      {
        [(VOTElementManager *)self _setCurrentElement:v71];
        if (v104)
        {
          [(VOTElementManager *)self _addDescription:v73 toRequest:v35 withOptions:0x800000];
        }

        else if (([v73 isReadingContent] & 1) != 0 || objc_msgSend(v73, "includeDuringContentReading"))
        {
          [(VOTElementManager *)self _startReadingBookForNewPage];
        }

        v77 = +[VOTDisplayManager displayManager];
        [v77 setCursorFrameForElement:v73];
      }

      goto LABEL_101;
    }

    if ([v4 isAXAttributedString])
    {
      v18 = v17;
      v104 = [v4 hasAttribute:kAXPageScrollShouldSpeakElement];
      v19 = +[NSCharacterSet whitespaceCharacterSet];
      v20 = [v4 stringByTrimmingCharactersInSet:v19];

      if (v11)
      {
        v4 = v20;
        v17 = v18;
        goto LABEL_35;
      }

      v17 = v18;
      v23 = [v18 addAttributedString:v20];
    }

    else
    {
      v21 = +[NSCharacterSet whitespaceCharacterSet];
      v20 = [v4 stringByTrimmingCharactersInSet:v21];

      v22 = [v17 addString:v20];
      v104 = 0;
    }

    v4 = v20;
    goto LABEL_35;
  }

  _AXAssert();
LABEL_126:
}

- (void)_handleSystemControlActivation:(id)a3
{
  v11 = a3;
  v4 = [v11 command];
  v5 = [v4 isEqualToString:kVOTEventCommandSystemShowNotificationCenter];

  if (v5)
  {
    v6 = +[AXPISystemActionHelper sharedInstance];
    [v6 toggleNotificationCenter];
LABEL_5:

    goto LABEL_6;
  }

  v7 = [v11 command];
  v8 = [v7 isEqualToString:kVOTEventCommandSystemShowControlCenter];

  if (v8)
  {
    v6 = +[AXPISystemActionHelper sharedInstance];
    [v6 toggleControlCenter];
    goto LABEL_5;
  }

  v9 = [v11 command];
  v10 = [v9 isEqualToString:kVOTEventCommandSystemControlTwoTop];

  if (v10)
  {
    [(VOTElementManager *)self _handleSpeakScreen:v11];
  }

LABEL_6:
}

- (void)_handleSystemCommandNotificationCenter:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleNotificationCenter];
}

- (void)_handleSystemCommandControlCenter:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleControlCenter];
}

- (void)_handleSystemCommandToggleDock:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleDock];
}

- (void)_handleSystemCommandToggleAppSwitcher:(id)a3
{
  if (![(VOTElementManager *)self isContinuitySessionActive])
  {
    v3 = +[AXPISystemActionHelper sharedInstance];
    [v3 toggleAppSwitcher];
  }
}

- (void)_handleSystemCommandActivateLockButton:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateLockButton];
}

- (void)_handleSystemCommandSpotlight:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleSpotlight];
}

- (void)_handleSystemCommandActivateAccessibilityShortcut:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 activateTripleClick];
}

- (void)_handleSystemCommandToggleReachability:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 toggleReachability];
}

- (void)_handleSystemCommandTakeScreenshot:(id)a3
{
  v3 = +[AXPISystemActionHelper sharedInstance];
  [v3 takeScreenshot];
}

- (void)_handleSystemCommandSwitchToPreviousApp:(id)a3
{
  v3 = +[VOTSpringBoardConnection defaultConnection];
  [v3 sendProgrammaticAppSwitch:0];
}

- (void)_handleSystemCommandSwitchToNextApp:(id)a3
{
  v3 = +[VOTSpringBoardConnection defaultConnection];
  [v3 sendProgrammaticAppSwitch:1];
}

- (void)_handleSystemCommandToggleQuickNote:(id)a3
{
  v3 = +[AXSpringBoardServer server];
  [v3 toggleQuickNote];
}

- (void)_handleSendCancelEvent:(id)a3
{
  v3 = +[AXElement systemWideElement];
  [v3 performAction:5007];

  v4 = sub_1000095FC(@"Cancel event sent", 1, 0);
}

- (void)_handleSiriShortcutEvent:(id)a3
{
  v3 = [a3 objectForIndex:117];
  if (v3)
  {
    v5 = v3;
    v4 = +[AXSiriShortcutsManager sharedManager];
    [v4 performShortcut:v5];

    v3 = v5;
  }
}

- (BOOL)allowsSystemControlEventForPosition:(int)a3
{
  if ((a3 - 1) < 2)
  {
    if (([VOTSharedWorkspace supportsHomeGestures] & 1) == 0)
    {
      v3 = +[AXSpringBoardServer server];
      if ([v3 isNotificationCenterVisible])
      {
        LOBYTE(v4) = 0;
      }

      else
      {
        v6 = +[AXSpringBoardServer server];
        v4 = [v6 isControlCenterVisible] ^ 1;
      }

      return v4;
    }

LABEL_9:
    LOBYTE(v4) = 0;
    return v4;
  }

  if (a3 != 5)
  {
    goto LABEL_9;
  }

  return [(VOTElementManager *)self _shouldAllowSpeakThisGesture];
}

- (BOOL)_shouldAllowSpeakThisGesture
{
  v2 = _AXSSpeakThisEnabled();
  if (v2)
  {
    v3 = +[AXSpringBoardServer server];
    v4 = [v3 isSpeakThisTemporarilyDisabled];

    if (v4)
    {
      LOBYTE(v2) = 0;
    }

    else
    {
      v5 = +[AXSpringBoardServer server];
      v6 = [v5 hasActiveOrPendingCallOrFaceTime];

      LOBYTE(v2) = v6 ^ 1;
    }
  }

  return v2;
}

- (void)_handleRotateOrientation:(id)a3
{
  v3 = [a3 command];
  v4 = [v3 isEqualToString:kVOTEventCommandRotateOrientationRight];

  v5 = VOTSharedWorkspace;

  [v5 rotateDeviceOrientation:v4];
}

- (void)_handleVolumeChange:(float)a3
{
  v5 = +[AXSettings sharedInstance];
  [v5 voiceOverEffectiveSpeakingVolume];
  v7 = v6;

  v8 = a3 + v7;
  v9 = (v8 * 100.0);
  v10 = (a3 * 100.0);
  v11 = v9 % v10;
  if (v9 % v10)
  {
    v12 = v10 + (v10 >> 31);
    if (v10 < 0)
    {
      v10 = -v10;
    }

    if (v11 <= v12 >> 1)
    {
      v10 = 0;
    }

    v9 = v9 - v11 + v10;
  }

  v13 = fmax(v9 / 100.0, 0.0500000007);
  if (v13 <= 1.0)
  {
    v14 = v13;
  }

  else
  {
    v14 = 1.0;
  }

  v15 = VOTLogAudio();
  if (os_log_type_enabled(v15, OS_LOG_TYPE_INFO))
  {
    v16 = [NSNumber numberWithDouble:v8];
    v17 = [NSNumber numberWithDouble:v14];
    v24 = 138412546;
    v25 = v16;
    v26 = 2112;
    v27 = v17;
    _os_log_impl(&_mh_execute_header, v15, OS_LOG_TYPE_INFO, "Set VO Rotor volume from %@ to %@", &v24, 0x16u);
  }

  v18 = +[AXSettings sharedInstance];
  v19 = v14;
  *&v20 = v19;
  [v18 setVoiceOverEffectiveSpeakingVolume:v20];

  v21 = [objc_allocWithZone(VOTOutputRequest) init];
  v22 = AXFormatFloatWithPercentage();
  v23 = [v21 addString:v22];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v21];
  [(VOTElementManager *)self sendRequest:v21];
}

- (void)_handleIncreaseVolume:(id)a3
{
  v4 = [a3 objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
  }

  else
  {
    LODWORD(v5) = 1028443341;
  }

  [(VOTElementManager *)self _handleVolumeChange:v5];
}

- (void)_handleDecreaseVolume:(id)a3
{
  v4 = [a3 objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
    *&v5 = -*&v5;
  }

  else
  {
    LODWORD(v5) = -1119040307;
  }

  [(VOTElementManager *)self _handleVolumeChange:v5];
}

- (void)_handleSystemVolumeChange:(float)a3
{
  v5 = +[VOTOutputManager outputManager];
  [v5 volume];
  v7 = v6;

  v8 = (v7 + a3) * 100.0;
  if (v8 % 5 <= 2)
  {
    v9 = 0;
  }

  else
  {
    v9 = 5;
  }

  v10 = fmax((5 * (v8 / 5) + v9) / 100.0, 0.0500000007);
  if (v10 <= 1.0)
  {
    v11 = v10;
  }

  else
  {
    v11 = 1.0;
  }

  v12 = VOTLogEvent();
  if (os_log_type_enabled(v12, OS_LOG_TYPE_INFO))
  {
    v13 = [NSNumber numberWithDouble:v7];
    v14 = [NSNumber numberWithDouble:v11];
    v21 = 138412546;
    v22 = v13;
    v23 = 2112;
    v24 = v14;
    _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_INFO, "Set system volume from %@ to %@", &v21, 0x16u);
  }

  v15 = +[VOTOutputManager outputManager];
  v16 = v11;
  *&v17 = v16;
  [v15 setSystemVolume:v17];

  v18 = [objc_allocWithZone(VOTOutputRequest) init];
  v19 = AXFormatFloatWithPercentage();
  v20 = [v18 addString:v19];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v18];
  [(VOTElementManager *)self sendRequest:v18];
}

- (void)_handleIncreaseSystemVolume:(id)a3
{
  v4 = [a3 objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
  }

  else
  {
    LODWORD(v5) = 1028443341;
  }

  [(VOTElementManager *)self _handleSystemVolumeChange:v5];
}

- (void)_handleDecreaseSystemVolume:(id)a3
{
  v4 = [a3 objectForIndex:110];
  v6 = v4;
  if (v4)
  {
    [v4 floatValue];
    *&v5 = -*&v5;
  }

  else
  {
    LODWORD(v5) = -1119040307;
  }

  [(VOTElementManager *)self _handleSystemVolumeChange:v5];
}

- (void)_handleStateReset
{
  [(VOTElementManager *)self _resetElementLabel];
  [(VOTElementManager *)self _stopReadAll];
  [(VOTElementManager *)self _endTextSearchMode];
  if (self->_flags.itemChooserVisible)
  {
    [(VOTElementManager *)self _closeItemChooser];
  }

  flowFromElements = self->_flowFromElements;

  [(NSMutableDictionary *)flowFromElements removeAllObjects];
}

- (void)_handlePlayPauseButtonPress
{
  self->_flags.shouldSpeakNextLayoutChange = 0;
  if (![(VOTElementManager *)self _shouldSuppressSpeechForPlayPause])
  {
    self->_lastScreenWakeViaPlayPause = CFAbsoluteTimeGetCurrent();
  }
}

- (void)handleHomeButtonPress
{
  v3 = VOTLogLayoutChange();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEBUG))
  {
    sub_10012D9A0();
  }

  [(SCRCThread *)self->_elementManagerThread performSelector:"_handleHomeButtonPress" onTarget:self count:0 objects:0];
}

- (void)_handleHomeButtonPress
{
  self->_lastItemSelectionFromTouch = -3061152000.0;
  [(VOTElementManager *)self setLastHomeButtonPressTime:CFAbsoluteTimeGetCurrent()];
  v3 = +[VOTOutputManager outputManager];
  v4 = +[VOSOutputEvent ScreenDidChange];
  [v3 sendEvent:v4];

  v5 = [(NSArray *)self->_currentApplications count];
  if (v5 == 1)
  {
    v3 = [(NSArray *)self->_currentApplications firstObject];
    if ([v3 isSpringBoard])
    {
      goto LABEL_8;
    }
  }

  v6 = +[VOTElement springBoardApplication];
  v7 = [v6 isVoiceControlRunning];

  if (v5 == 1)
  {
  }

  if ((v7 & 1) == 0)
  {
    v8 = +[VOTWorkspace sharedWorkspace];
    v9 = [v8 currentCallState];

    if (!v9)
    {
      v3 = [VOTSharedWorkspace selectedLanguage];
      v10 = sub_1000516CC(off_1001FDDD0, @"home.button.pressed", 0, v3);
      v11 = sub_1000095FC(v10, 1, v3);

LABEL_8:
    }
  }

  v12 = +[VOTElement systemAppApplication];
  v20 = v12;
  v13 = [NSArray arrayWithObjects:&v20 count:1];
  currentApplications = self->_currentApplications;
  self->_currentApplications = v13;

  v15 = [(NSArray *)self->_currentApplications firstObject];
  v16 = [v15 firstElementInApplication];

  v17 = [(VOTElementManager *)self _cachedLaunchIcon:v16];
  v18 = v17;
  if (v17)
  {
    v19 = v17;

    v16 = v19;
  }

  [(VOTElementManager *)self _echoDifferentElement:v16 forEvent:0];
  AXPerformBlockOnMainThreadAfterDelay();
}

- (void)updateRunningApplications
{
  v5 = +[VOTWorkspace sharedWorkspace];
  v3 = [v5 focusedApplications];
  currentApplications = self->_currentApplications;
  self->_currentApplications = v3;
}

- (void)_handleSiriFinishedTalking:(id)a3
{
  [VOTSharedWorkspace setIsSiriTalking:0];
  Current = CFAbsoluteTimeGetCurrent();
  [(VOTElementManager *)self lastBlockedRequestBySiriOrDictationTime];
  if (Current - v5 < 0.1)
  {
    v6 = [(VOTElementManager *)self lastRequestBlockedBySiriOrDictation];
    [v6 send];
  }

  [(VOTElementManager *)self setLastRequestBlockedBySiriOrDictation:0];
}

- (void)_handleSiriStartedListening:(id)a3
{
  [VOTSharedWorkspace setIsSiriListening:1];
  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0];
}

- (void)_handleToggleVoiceOverModifierKeyLock:(id)a3
{
  v3 = +[VOTKeyboardManager keyboardManager];
  [v3 toggleVoiceOverModifierKeyLock];

  v4 = +[VOTKeyboardManager keyboardManager];
  v5 = [v4 modifierKeyLockEnabled];

  if (v5)
  {
    v6 = @"modifier.keys.locked";
  }

  else
  {
    v6 = @"modifier.keys.unlocked";
  }

  v9 = sub_1000511CC(off_1001FDDD0, v6, 0);
  v7 = [VOTSharedWorkspace selectedLanguage];
  v8 = sub_1000095FC(v9, 0, v7);
}

- (void)_handleToggleSingleLetterQuickNav:(id)a3
{
  v3 = [VOTSharedWorkspace allowSingleLetterSearching];
  [VOTSharedWorkspace setAllowSingleLetterSearching:v3 ^ 1];
  v21 = [VOTSharedWorkspace selectedLanguage];
  v4 = +[VOTBrailleManager manager];
  [v4 setSingleLetterQuickNavOn:{objc_msgSend(VOTSharedWorkspace, "allowSingleLetterSearching")}];

  v5 = +[VOTKeyboardManager keyboardManager];
  v6 = [v5 isQuickNavOn];

  v7 = +[VOTOutputManager outputManager];
  if (v6)
  {
    +[VOSOutputEvent DidEnableQuickNav];
  }

  else
  {
    +[VOSOutputEvent DidDisableQuickNav];
  }
  v8 = ;
  [v7 sendEvent:v8];

  if (v3)
  {
    v9 = @"single.letter.quick.nav.off";
  }

  else
  {
    v9 = @"single.letter.quick.nav.on";
  }

  v10 = sub_1000511CC(off_1001FDDD0, v9, 0);
  v11 = sub_1000511CC(off_1001FDDD0, v9, 0);
  v12 = off_1001FDDD0;
  v13 = +[VOTKeyboardManager keyboardManager];
  if ([v13 isQuickNavOn])
  {
    v14 = @"quick.nav.on";
  }

  else
  {
    v14 = @"quick.nav.off";
  }

  v15 = sub_1000511CC(v12, v14, 0);
  v16 = [NSString stringWithFormat:@"%@, %@", v11, v15];

  v17 = [objc_allocWithZone(VOTOutputRequest) init];
  v18 = [v17 addString:v10 brailleString:v16 withLanguage:v21];
  [v17 setGeneratesBraille:1];
  v19 = [v17 outputActions];
  v20 = [v19 lastObject];
  [v20 setObject:&__kCFBooleanTrue forVariant:76];

  sub_100009588(v17);
  [v17 send];
}

- (void)_handleToggleQuickNav:(id)a3
{
  v4 = +[VOTKeyboardManager keyboardManager];
  v5 = [v4 isQuickNavOn];

  v6 = +[VOTKeyboardManager keyboardManager];
  [v6 updateQuickNavState:v5 ^ 1];

  [(VOTElementManager *)self _handleAnnounceQuickNav:0];
  v8 = +[VOTConfiguration rootConfiguration];
  v7 = [NSNumber numberWithBool:v5 ^ 1];
  [v8 setPreference:v7 forKey:@"VOTQuickNavEnabled"];
}

- (void)_handleAnnounceQuickNav:(id)a3
{
  v4 = +[VOTKeyboardManager keyboardManager];
  v5 = [v4 isQuickNavOn];

  [(VOTElementManager *)self _handleQuickNavFeedback:v5];
  v7 = +[VOTConfiguration rootConfiguration];
  v6 = [NSNumber numberWithBool:v5];
  [v7 setPreference:v6 forKey:@"VOTQuickNavEnabled"];
}

- (void)_handleQuickNavFeedback:(BOOL)a3
{
  v3 = a3;
  v4 = +[AXSettings sharedInstance];
  v5 = [v4 voiceOverQuickNavAnnouncementFeedback];

  v21 = +[VOTOutputRequest createRequest];
  if ((v5 & 2) != 0)
  {
    v6 = @"quick.nav.off";
    if (v3)
    {
      v6 = @"quick.nav.on";
    }

    v7 = VOTSharedWorkspace;
    v8 = v6;
    v9 = [v7 selectedLanguage];
    v10 = sub_1000516CC(off_1001FDDD0, v8, 0, v9);

    v11 = [v21 addString:v10 withLanguage:v9];
    if ((v5 & 8) != 0)
    {
      v12 = [v21 lastAction];
      [v12 setObject:&off_1001D9950 forVariant:32];
    }

    if ((v5 & 4) == 0)
    {
LABEL_3:
      if ((v5 & 0x10) == 0)
      {
        goto LABEL_23;
      }

      goto LABEL_17;
    }
  }

  else if ((v5 & 4) == 0)
  {
    goto LABEL_3;
  }

  if (v3)
  {
    +[VOSOutputEvent DidEnableQuickNav];
  }

  else
  {
    +[VOSOutputEvent DidDisableQuickNav];
  }
  v13 = ;
  v14 = [v21 lastAction];
  v15 = v14;
  if (v14)
  {
    [v14 addOutputEvent:v13];
  }

  else
  {
    v16 = +[VOTOutputManager outputManager];
    [v16 sendEvent:v13];
  }

  if ((v5 & 0x10) == 0)
  {
    goto LABEL_23;
  }

LABEL_17:
  if ((v5 & 2) == 0)
  {
    if (v3)
    {
      v17 = @"quick.nav.on";
    }

    else
    {
      v17 = @"quick.nav.off";
    }

    v18 = sub_1000511CC(off_1001FDDD0, v17, 0);
    v19 = [v21 addString:v18];
    v20 = [v21 lastAction];
    [v20 setObject:&__kCFBooleanTrue forVariant:76];

    [v21 setLimitToComponentType:3];
  }

  [v21 setGeneratesBraille:1];
LABEL_23:
  [v21 setCannotBeInterrupted:1];
  [v21 send];
}

- (void)fetchElementsFrom:(id)a3 inDirection:(int64_t)a4 count:(unint64_t)a5 scroll:(BOOL)a6 block:(id)a7
{
  v7 = a6;
  elementManagerThread = self->_elementManagerThread;
  v13 = a7;
  v14 = a3;
  v18 = [NSNumber numberWithInteger:a4];
  v15 = [NSNumber numberWithUnsignedInteger:a5];
  v16 = [NSNumber numberWithBool:v7];
  v17 = objc_retainBlock(v13);

  [(SCRCThread *)elementManagerThread performSelector:"_fetchElementsFrom:inDirection:count:scroll:block:" onTarget:self count:5 objects:v14, v18, v15, v16, v17];
}

- (void)_fetchElementsFrom:(id)a3 inDirection:(id)a4 count:(id)a5 scroll:(id)a6 block:(id)a7
{
  v12 = a7;
  v13 = a6;
  v14 = a5;
  v15 = a4;
  v16 = a3;
  v20 = [(VOTElementManager *)self _getNewElementExplorer];
  v17 = [v15 integerValue];

  v18 = [v14 unsignedIntegerValue];
  v19 = [v13 BOOLValue];

  [v20 fetchElementsFrom:v16 inDirection:v17 count:v18 scroll:v19 block:v12];
}

- (id)_getNewElementExplorer
{
  v3 = [_VOTElementExplorer alloc];
  v4 = [(VOTElementManager *)self _copyMatchBlockAnyElement];
  v5 = [(_VOTElementExplorer *)v3 initWithElementManager:self MatchBlock:v4];

  [(NSLock *)self->_explorersLock lock];
  [(NSMutableArray *)self->_explorers addObject:v5];
  [(NSLock *)self->_explorersLock unlock];

  return v5;
}

- (void)removeElementExplorer:(id)a3
{
  explorersLock = self->_explorersLock;
  v5 = a3;
  [(NSLock *)explorersLock lock];
  [(NSMutableArray *)self->_explorers removeObject:v5];

  v6 = self->_explorersLock;

  [(NSLock *)v6 unlock];
}

- (void)_sendBSIStateChangedNotification:(BOOL)a3 usage:(int64_t)a4 preferSingleHand:(BOOL)a5
{
  v5 = a5;
  v12[0] = @"VOTBSIStateChangedNotificationActive";
  v7 = [NSNumber numberWithBool:?];
  v13[0] = v7;
  v12[1] = @"VOTBSIStateChangedNotificationUsage";
  v8 = [NSNumber numberWithInteger:a4];
  v13[1] = v8;
  v12[2] = @"VOTBSIStateChangedNotificationPreferSingleHand";
  v9 = [NSNumber numberWithBool:v5];
  v13[2] = v9;
  v10 = [NSDictionary dictionaryWithObjects:v13 forKeys:v12 count:3];

  v11 = v10;
  AXPerformBlockOnMainThreadAfterDelay();
}

- (void)deactivateGesturedTextInputIfNeeded:(BOOL)a3
{
  elementManagerThread = self->_elementManagerThread;
  v5 = [NSNumber numberWithBool:a3];
  [(SCRCThread *)elementManagerThread performSelector:"_deactivateGesturedTextInputIfNeeded:" onTarget:self count:1 objects:v5];
}

- (void)_deactivateGesturedTextInputIfNeeded:(id)a3
{
  v4 = a3;
  if (([VOTSharedWorkspace brailleInputWantsToStayActive] & 1) == 0 && !-[VOTElementManager forceRotorOffGesturedTextInputIfNeeded:](self, "forceRotorOffGesturedTextInputIfNeeded:", objc_msgSend(v4, "BOOLValue")) && objc_msgSend(VOTSharedWorkspace, "brailleInputActive"))
  {
    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }
}

- (void)_handleActivateBrailleScreenInput:(id)a3
{
  v4 = +[AXSettings sharedInstance];
  v5 = [v4 voiceOverTouchBrailleGesturesActivationGestureEnabled];

  if (v5 && ([VOTSharedWorkspace brailleInputActive] & 1) == 0)
  {
    if (self->_flags.shouldUpdateRotorForElement)
    {
      [(VOTElementManager *)self _updateRotorForCurrentElement];
    }

    if ([(VOTRotor *)self->_elementRotor indexOfRotorItem:61]== -1)
    {

      [(VOTElementManager *)self _sendBSIStateChangedNotification:1 usage:0];
    }

    else
    {
      v6 = VOTLogBrailleGestures();
      if (os_log_type_enabled(v6, OS_LOG_TYPE_DEFAULT))
      {
        *v7 = 0;
        _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_DEFAULT, "Activate BSI: BSI in the rotor. Setting the rotor to BSI.", v7, 2u);
      }

      [(VOTElementManager *)self _setElementRotorToType:61 saveToPreferences:1 userInitiated:1];
    }
  }
}

- (void)_handleActivateBrailleScreenInputCommand:(id)a3
{
  v4 = +[AXSettings sharedInstance];
  v5 = [v4 voiceOverTouchBrailleGesturesActivationGestureEnabled];

  if (v5 && ([VOTSharedWorkspace brailleInputActive] & 1) == 0)
  {

    [(VOTElementManager *)self _sendBSIStateChangedNotification:1 usage:1];
  }
}

- (void)_handleActivateBrailleScreenInputPreferringSingleHand:(id)a3
{
  if (([VOTSharedWorkspace brailleInputActive] & 1) == 0)
  {

    [(VOTElementManager *)self _sendBSIStateChangedNotification:1 usage:0 preferSingleHand:1];
  }
}

- (void)_handleDeactivateBrailleScreenInput:(id)a3
{
  if ([VOTSharedWorkspace brailleInputActive])
  {
    if (self->_flags.shouldUpdateRotorForElement)
    {
      [(VOTElementManager *)self _updateRotorForCurrentElement];
    }

    if ([(VOTRotor *)self->_elementRotor currentRotorType]== 61)
    {
      v4 = [VOTSharedWorkspace brailleInputShouldBeDeactivatedByEscape];
      v5 = [(VOTRotor *)self->_elementRotor previousRotorType];
      if (sub_1000F8768(v5) || [(VOTRotor *)self->_elementRotor indexOfRotorItem:v5]== -1)
      {
        v8 = VOTLogBrailleGestures();
        if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
        {
          LOWORD(v9) = 0;
          _os_log_impl(&_mh_execute_header, v8, OS_LOG_TYPE_DEFAULT, "Deactivate BSI: force rotor off gestured text input if needed.", &v9, 2u);
        }

        [(VOTElementManager *)self forceRotorOffGesturedTextInputIfNeeded:0];
        if (v4)
        {
          goto LABEL_18;
        }
      }

      else
      {
        v6 = VOTLogBrailleGestures();
        if (os_log_type_enabled(v6, OS_LOG_TYPE_DEFAULT))
        {
          v7 = [NSNumber numberWithInteger:v5];
          v9 = 138412290;
          v10 = v7;
          _os_log_impl(&_mh_execute_header, v6, OS_LOG_TYPE_DEFAULT, "Deactivate BSI: setting rotor to the previous one (%@).", &v9, 0xCu);
        }

        [(VOTElementManager *)self _setElementRotorToType:v5 saveToPreferences:1 userInitiated:1];
        if (v4)
        {
          goto LABEL_18;
        }
      }

      [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
LABEL_18:
      [(VOTElementManager *)self _outputCurrentElementRotor];
      return;
    }

    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }
}

- (void)_handleReconnectBrailleDisplays:(id)a3
{
  v3 = VOTLogBraille();
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEFAULT))
  {
    *v12 = 0;
    _os_log_impl(&_mh_execute_header, v3, OS_LOG_TYPE_DEFAULT, "Posting kAXSVoiceOverTouchBrailleReconnectionTriggeredNotification", v12, 2u);
  }

  DarwinNotifyCenter = CFNotificationCenterGetDarwinNotifyCenter();
  CFNotificationCenterPostNotification(DarwinNotifyCenter, kAXSVoiceOverTouchBrailleReconnectionTriggeredNotification, 0, 0, 1u);
  v5 = +[VOTOutputManager outputManager];
  v6 = +[VOSOutputEvent BrailleDisplayReconnectionTriggered];
  [v5 sendEvent:v6];

  v7 = objc_alloc_init(VOTOutputRequest);
  v8 = off_1001FDDD0;
  v9 = [VOTSharedWorkspace selectedLanguage];
  v10 = sub_1000516CC(v8, @"braille.display.reconnection.triggered", 0, v9);
  v11 = [(VOTOutputRequest *)v7 addString:v10];

  [(VOTOutputRequest *)v7 send];
}

- (void)_handleTogglePerkinsKeyboardInput:(id)a3
{
  v3 = [VOTSharedWorkspace perkinsKeyboardInputEnabled];
  [VOTSharedWorkspace setPerkinsKeyboardInputEnabled:v3 ^ 1];
  if (v3)
  {
    v4 = @"perkins.keyboard.input.off";
  }

  else
  {
    v4 = @"perkins.keyboard.input.on";
  }

  v5 = sub_1000511CC(off_1001FDDD0, v4, 0);
  v6 = +[VOTOutputManager outputManager];
  [v6 speakSimpleString:v5];

  v7 = VOTLogBraille();
  if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
  {
    v8 = [NSNumber numberWithBool:v3 ^ 1];
    v9 = 138412290;
    v10 = v8;
    _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "Braille Keyboard Input: %@", &v9, 0xCu);
  }
}

- (void)_handleToggleKeyboardBraileUI:(id)a3
{
  v3 = [VOTSharedWorkspace keyboardBrailleUIEnabled];
  [VOTSharedWorkspace setKeyboardBrailleUIEnabled:v3 ^ 1];
  v4 = +[VOTBrailleManager manager];
  [v4 setBrailleUIActive:v3 ^ 1 withOptions:&__NSDictionary0__struct];
}

- (void)_handleToggleBrailleUI:(id)a3
{
  v3 = +[VOTBrailleManager manager];
  [v3 toggleBrailleUIActive];
}

- (void)_handleActivateBrailleUI:(id)a3
{
  v3 = a3;
  v5 = +[VOTBrailleManager manager];
  v4 = [v3 command];

  [v5 activateBrailleUIWithCommand:v4];
}

- (void)_handleBSIPreviousRotor:(id)a3
{
  v4 = a3;
  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 61)
  {
    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }

  [(VOTElementManager *)self _handleSearchRotorLeft:v4];
}

- (void)_handleBSINextRotor:(id)a3
{
  v4 = a3;
  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 61)
  {
    [(VOTElementManager *)self _sendBSIActiveStateOffNotificationAndNotify];
  }

  [(VOTElementManager *)self _handleSearchRotorRight:v4];
}

- (void)_handleBrailleEvent:(id)a3
{
  v3 = a3;
  v4 = +[VOTBrailleManager manager];
  [v4 handleEvent:v3];
}

- (void)_handleBrailleRefreshEvent:(id)a3
{
  v4 = a3;
  v9 = +[VOTBrailleManager manager];
  v5 = [(VOTElementManager *)self _currentElement];
  v6 = [v4 objectForIndex:106];
  v7 = [v6 BOOLValue];
  v8 = [v4 objectForIndex:109];

  [v9 setBrailleElement:v5 resetBrailleCursor:v7 rotorSelection:v8];
}

- (void)_handleBrailleWordWrapToggleEvent:(id)a3
{
  v4 = +[AXSettings sharedInstance];
  v5 = [v4 voiceOverBrailleWordWrapEnabled];

  v6 = +[AXSettings sharedInstance];
  [v6 setVoiceOverBrailleWordWrapEnabled:v5 ^ 1];

  v7 = [VOTSharedWorkspace selectedLanguage];
  v11 = v7;
  if (v5)
  {
    v8 = @"braille.word.wrap.off";
  }

  else
  {
    v8 = @"braille.word.wrap.on";
  }

  v9 = sub_1000516CC(off_1001FDDD0, v8, 0, v7);
  v10 = sub_1000095FC(v9, 0, v11);

  [(VOTElementManager *)self _handleBrailleRefreshEvent:0];
}

- (void)_handleBrailleEnableAutoAdvance:(id)a3
{
  v3 = +[VOTBrailleManager manager];
  v4 = [v3 autoAdvanceEnabled];

  v5 = +[VOTBrailleManager manager];
  [v5 setAutoAdvanceEnabled:v4 ^ 1];

  v6 = [VOTSharedWorkspace selectedLanguage];
  v10 = v6;
  if (v4)
  {
    v7 = @"braille.auto.advance.off";
  }

  else
  {
    v7 = @"braille.auto.advance.on";
  }

  v8 = sub_1000516CC(off_1001FDDD0, v7, 0, v6);
  v9 = sub_1000095FC(v8, 0, v10);
}

- (void)_handleBrailleDecreaseAutoAdvanceSpeed:(id)a3
{
  [(VOTElementManager *)self _brailleAutoAdvanceStepFactor];
  v5 = v4;
  v6 = +[AXSettings sharedInstance];
  [v6 voiceOverBrailleAutoAdvanceDuration];
  v8 = v5 * v7;

  if (v8 >= kAXSVoiceOverBrailleAutoAdvanceDurationMax)
  {
    v8 = kAXSVoiceOverBrailleAutoAdvanceDurationMax;
  }

  v9 = +[AXSettings sharedInstance];
  [v9 voiceOverBrailleAutoAdvanceDuration];
  v11 = v10;

  if (vabdd_f64(v8, v11) >= 0.0001)
  {
    v13 = +[AXSettings sharedInstance];
    [v13 setVoiceOverBrailleAutoAdvanceDuration:v8];

    [(VOTElementManager *)self _speakBrailleAutoAdvanceSpeed];
  }

  else
  {
    v14 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent BoundaryEncountered];
    [v14 sendEvent:v12];
  }
}

- (void)_handleBrailleIncreaseAutoAdvanceSpeed:(id)a3
{
  [(VOTElementManager *)self _brailleAutoAdvanceStepFactor];
  v5 = v4;
  v6 = +[AXSettings sharedInstance];
  [v6 voiceOverBrailleAutoAdvanceDuration];
  v8 = v7 / v5;

  if (v8 < kAXSVoiceOverBrailleAutoAdvanceDurationMin)
  {
    v8 = kAXSVoiceOverBrailleAutoAdvanceDurationMin;
  }

  v9 = +[AXSettings sharedInstance];
  [v9 voiceOverBrailleAutoAdvanceDuration];
  v11 = v10;

  if (vabdd_f64(v8, v11) >= 0.0001)
  {
    v13 = +[AXSettings sharedInstance];
    [v13 setVoiceOverBrailleAutoAdvanceDuration:v8];

    [(VOTElementManager *)self _speakBrailleAutoAdvanceSpeed];
  }

  else
  {
    v14 = +[VOTOutputManager outputManager];
    v12 = +[VOSOutputEvent BoundaryEncountered];
    [v14 sendEvent:v12];
  }
}

- (id)_brailleAutoAdvanceSpeedString
{
  v3 = +[AXSettings sharedInstance];
  [v3 voiceOverBrailleAutoAdvanceDuration];
  v5 = v4;

  [(VOTElementManager *)self _brailleAutoAdvanceStepFactor];
  v6 = +[AXSettings sharedInstance];
  [v6 voiceOverBrailleAutoAdvanceDuration];

  v7.n128_f32[0] = round(v5 * 10.0) / 10.0;

  return _AXTimeStringForType(1, v7);
}

- (void)_speakBrailleAutoAdvanceSpeed
{
  v5 = [objc_allocWithZone(VOTOutputRequest) init];
  v3 = [(VOTElementManager *)self _brailleAutoAdvanceSpeedString];
  v4 = [v5 addString:v3];

  [(VOTElementManager *)self _formatRequestForBrailleAlertConditional:v5];
  [(VOTElementManager *)self sendRequest:v5];
}

- (void)_activateBrailleScreenInputIfNeededForElement:(id)a3
{
  if ([a3 doesHaveAllTraits:kAXIsEditingTrait | kAXTextEntryTrait])
  {
    v4 = +[AXSettings sharedInstance];
    if ([v4 voiceOverBrailleGesturesEnabled])
    {
      v3 = [VOTSharedWorkspace brailleStartAutoActivateOnTextFields];

      if (v3)
      {
        AXPerformBlockOnMainThreadAfterDelay();
      }
    }

    else
    {
    }
  }
}

- (void)_handleKeyboardCommandEvent:(id)a3
{
  v4 = a3;
  v74 = v4;
  if (!self->_keyboardKeyCommands)
  {
    v58 = objc_allocWithZone(NSDictionary);
    v64 = [NSNumber numberWithUnsignedShort:79];
    v65 = self;
    v73 = [NSArray arrayWithObjects:v64, &stru_1001CBF90, 0];
    v55 = kVOTEventCommandRightArrow;
    v63 = [NSNumber numberWithUnsignedShort:80];
    v72 = [NSArray arrayWithObjects:v63, &stru_1001CBF90, 0];
    v54 = kVOTEventCommandLeftArrow;
    v62 = [NSNumber numberWithUnsignedShort:81];
    v71 = [NSArray arrayWithObjects:v62, &stru_1001CBF90, 0];
    v51 = kVOTEventCommandDownArrow;
    v61 = [NSNumber numberWithUnsignedShort:82];
    v70 = [NSArray arrayWithObjects:v61, &stru_1001CBF90, 0];
    v50 = kVOTEventCommandUpArrow;
    v60 = [NSNumber numberWithUnsignedShort:42];
    v59 = [NSString stringWithUnichar:127];
    v69 = [NSArray arrayWithObjects:v60, v59, 0];
    v46 = kVOTEventCommandDelete;
    v57 = [NSNumber numberWithUnsignedShort:40];
    v56 = [NSString stringWithUnichar:10];
    v68 = [NSArray arrayWithObjects:v57, v56, 0];
    v43 = kVOTEventCommandReturn;
    v53 = [NSNumber numberWithUnsignedShort:43];
    v52 = [NSString stringWithUnichar:9];
    v67 = [NSArray arrayWithObjects:v53, v52, 0];
    v42 = kVOTEventCommandTab;
    v49 = [NSNumber numberWithUnsignedShort:43];
    v48 = [NSString stringWithUnichar:9];
    v47 = [NSNumber numberWithUnsignedInteger:8];
    v39 = [NSArray arrayWithObjects:v49, v48, v47, 0];
    v38 = kVOTEventCommandShiftTab;
    v45 = [NSNumber numberWithUnsignedShort:27];
    v44 = [NSNumber numberWithUnsignedInteger:1];
    v66 = [NSArray arrayWithObjects:v45, @"x", v44, 0];
    v35 = kVOTEventCommandCut;
    v41 = [NSNumber numberWithUnsignedShort:6];
    v40 = [NSNumber numberWithUnsignedInteger:1];
    v32 = [NSArray arrayWithObjects:v41, @"c", v40, 0];
    v31 = kVOTEventCommandCopy;
    v37 = [NSNumber numberWithUnsignedShort:25];
    v36 = [NSNumber numberWithUnsignedInteger:1];
    v30 = [NSArray arrayWithObjects:v37, @"v", v36, 0];
    v28 = kVOTEventCommandPaste;
    v34 = [NSNumber numberWithUnsignedShort:4];
    v33 = [NSNumber numberWithUnsignedInteger:1];
    v5 = [NSArray arrayWithObjects:v34, @"a", v33, 0];
    v6 = kVOTEventCommandSelectAll;
    v29 = [NSNumber numberWithUnsignedShort:29];
    v7 = [NSNumber numberWithUnsignedInteger:1];
    v8 = [NSArray arrayWithObjects:v29, @"z", v7, 0];
    v9 = kVOTEventCommandUndo;
    v10 = [NSNumber numberWithUnsignedShort:29];
    v11 = [NSNumber numberWithUnsignedInteger:9];
    v12 = [NSArray arrayWithObjects:v10, @"z", v11, 0];
    v27 = v6;
    self = v65;
    v13 = [v58 initWithObjectsAndKeys:{v73, v55, v72, v54, v71, v51, v70, v50, v69, v46, v68, v43, v67, v42, v39, v38, v66, v35, v32, v31, v30, v28, v5, v27, v8, v9, v12, kVOTEventCommandRedo, 0}];
    keyboardKeyCommands = v65->_keyboardKeyCommands;
    v65->_keyboardKeyCommands = v13;

    v4 = v74;
  }

  v15 = [v4 command];
  v16 = [v15 isEqualToString:kVOTEventCommandPaste];

  if (v16)
  {
    v17 = [(VOTElementManager *)self _currentResponder];
    v18 = v17;
    if ([v17 doesHaveTraits:kAXWebContentTrait])
    {
      v18 = [v17 textOperationsOperator];
    }

    [v18 performTextOperation:kAXTextOperationActionPaste];
    v19 = +[VOTOutputManager outputManager];
    v20 = +[VOSOutputEvent DidSelectAutofill];
    [v19 sendEvent:v20];
  }

  else
  {
    v21 = self->_keyboardKeyCommands;
    v22 = [v74 command];
    v17 = [(NSDictionary *)v21 objectForKey:v22];

    if (!v17)
    {
      goto LABEL_13;
    }

    v23 = [v17 objectAtIndex:1];
    if ([v17 count] < 3)
    {
      v25 = 0;
    }

    else
    {
      v24 = [v17 objectAtIndex:2];
      v25 = [v24 unsignedIntValue];
    }

    v26 = VOTSharedWorkspace;
    v18 = [v17 objectAtIndex:0];
    [v26 postKeyboardEventWithCharacters:v23 originalCharacters:v23 modifiers:v25 keyCode:{objc_msgSend(v18, "unsignedShortValue")}];
  }

LABEL_13:
}

- (BOOL)_processWatchSpecificOverrides:(id)a3
{
  v4 = [a3 isEqualToString:kVOTEventCommandSelectAll];
  if (v4)
  {
    v5 = [(VOTElementManager *)self _currentResponder];
    [v5 performTextOperation:kAXTextOperationActionSelectAll];
  }

  return v4;
}

- (void)_handleDescribeCameraScene:(id)a3
{
  v4 = +[VOTWorkspace sharedWorkspace];
  v5 = [v4 imageCaptionsEnabled];

  if (v5)
  {
    v6 = [VOTSharedWorkspace visionEngine];
    v11 = [v6 preferredMediaAnalysisLocale];

    v7 = [(VOTElementManager *)self cameraSceneDescriber];
    [v7 setIncludeTextDetection:1];

    v8 = [(VOTElementManager *)self cameraSceneDescriber];
    [v8 imageDescriptionForCurrentCameraScene:&stru_1001CA248 withPreferredLocale:v11];
  }

  else
  {
    v11 = objc_alloc_init(VOTOutputRequest);
    v9 = sub_100053524(@"NoCaptionModel");
    v10 = [(VOTOutputRequest *)v11 addString:v9];

    [(VOTOutputRequest *)v11 setLanguage:0];
    [(VOTOutputRequest *)v11 setBrailleType:2];
    [(VOTOutputRequest *)v11 setCannotBeInterrupted:1];
    [(VOTOutputRequest *)v11 send];
  }
}

- (id)focusedApplication:(id)a3
{
  v4 = a3;
  if ([(VOTElementManager *)self isOnElementManagerThread])
  {
    v5 = self->_currentApplications;
  }

  else
  {
    v5 = [(VOTElementManager *)self currentApplications];
  }

  v6 = v5;
  v7 = [v4 appTransition];

  if (!v7)
  {
    goto LABEL_17;
  }

  v23 = 0u;
  v24 = 0u;
  v21 = 0u;
  v22 = 0u;
  v8 = v6;
  v9 = [(NSArray *)v8 countByEnumeratingWithState:&v21 objects:v25 count:16];
  if (!v9)
  {

LABEL_17:
    v11 = [(NSArray *)v6 lastObject];
    goto LABEL_18;
  }

  v10 = v9;
  v20 = v6;
  v11 = 0;
  v12 = *v22;
  do
  {
    for (i = 0; i != v10; i = i + 1)
    {
      if (*v22 != v12)
      {
        objc_enumerationMutation(v8);
      }

      v14 = *(*(&v21 + 1) + 8 * i);
      v15 = [v14 pid];
      v16 = [v4 appTransition];
      v17 = [v16 pid];

      if (v15 == v17)
      {
        v18 = v14;

        v11 = v18;
      }
    }

    v10 = [(NSArray *)v8 countByEnumeratingWithState:&v21 objects:v25 count:16];
  }

  while (v10);

  v6 = v20;
  if (!v11)
  {
    goto LABEL_17;
  }

LABEL_18:

  return v11;
}

- (BOOL)speakNonfocusableElementsAfterDelay
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  return self->_speakNonfocusableElementsAfterDelay;
}

- (void)setSpeakNonfocusableElementsAfterDelay:(BOOL)a3
{
  v3 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_speakNonfocusableElementsAfterDelay = v3;
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSpeakNonfocusableElementsAfterDelay:v3];
}

- (BOOL)shouldSilenceAnnouncements
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  return self->_shouldSilenceAnnouncements;
}

- (void)setShouldSilenceAnnouncements:(BOOL)a3
{
  v3 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_shouldSilenceAnnouncements = v3;
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverSilenceAnnouncements:v3];
}

- (BOOL)exploreFocusAffectsNativeFocus
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  return self->_exploreFocusAffectsNativeFocus;
}

- (void)setExploreFocusAffectsNativeFocus:(BOOL)a3
{
  v3 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  self->_exploreFocusAffectsNativeFocus = v3;
  v5 = +[AXSettings sharedInstance];
  [v5 setVoiceOverExploreFocusAffectsNativeFocus:v3];
}

- (BOOL)_isDictationInProgressForCurrentApp
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = [(VOTElementManager *)self focusedApplication:0];
  v4 = [v3 isDictationListening];

  return v4;
}

- (BOOL)handleTVMenuButtonClicked
{
  if (self->_flags.itemChooserVisible)
  {
    [(VOTElementManager *)self _closeItemChooser];
    return 1;
  }

  if ([VOTSharedWorkspace tvInteractionMode] == 2)
  {
    [(SCRCThread *)self->_elementManagerThread performSelector:"__handleTVMenuButtonClicked" onTarget:self count:0 objects:0];
    return 1;
  }

  return 0;
}

- (void)__handleTVMenuButtonClicked
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ([VOTSharedWorkspace tvInteractionMode] == 2)
  {
    v3 = [(VOTElementManager *)self _currentElement];
    if (([v3 isContainedByPreferredNativeFocusElement] & 1) != 0 || objc_msgSend(v3, "allowsActivationWithoutBeingNativeFocused"))
    {
      v4 = [v3 performEscape];

      if (v4)
      {
        return;
      }
    }

    else
    {
    }
  }

  [(VOTElementManager *)self __sendTVRemoteCommand:6];
}

- (void)__handleTVSelectButtonClicked
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ([(VOTRotor *)self->_elementRotor currentRotorType]== 54)
  {

    [(VOTElementManager *)self _handlePerformCustomAction:0];
    return;
  }

  if (self->_flags.itemChooserVisible)
  {

    [(VOTElementManager *)self _closeItemChooser];
    return;
  }

  if (![VOTSharedWorkspace tvInteractionMode] || objc_msgSend(VOTSharedWorkspace, "tvInteractionMode") == 1)
  {

    [(VOTElementManager *)self __sendTVRemoteCommand:4];
    return;
  }

  if ([VOTSharedWorkspace tvInteractionMode] == 2)
  {
    v3 = [(VOTElementManager *)self _currentElement];
    v10 = v3;
    if (!v3)
    {
      v5 = +[AXSystemAppServer server];
      v6 = [v5 isScreenSaverVisible];

      if (v6)
      {
        [(VOTElementManager *)self __sendTVRemoteCommand:6];
      }

      goto LABEL_35;
    }

    if ([v3 allowsActivationWithoutBeingNativeFocused])
    {
      if ([v10 activateIfSupported])
      {
LABEL_35:

        return;
      }

      v4 = +[VOTOutputManager outputManager];
    }

    else
    {
      if ([v10 isContainedByPreferredNativeFocusElement])
      {
        if (([v10 activateIfSupported] & 1) == 0)
        {
          [(VOTElementManager *)self __sendTVRemoteCommand:4];
        }

        v4 = +[VOTOutputManager outputManager];
        v7 = +[VOSOutputEvent DidActivateElement];
        goto LABEL_34;
      }

      v8 = [v10 setNativeFocus];
      v4 = +[VOTOutputManager outputManager];
      if (v8)
      {
        v7 = +[VOSOutputEvent DidFocusOnElement];
LABEL_34:
        v9 = v7;
        [v4 sendEvent:v7];

        goto LABEL_35;
      }
    }

    v7 = +[VOSOutputEvent BoundaryEncountered];
    goto LABEL_34;
  }

  _AXAssert();
}

- (BOOL)_sendTVRemoteCommandOverrideForAXCommand:(int64_t)a3
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = a3 - 8;
  if ((a3 - 8) > 9 || ((0x303u >> v5) & 1) == 0)
  {
    return 0;
  }

  [(VOTElementManager *)self __sendTVRemoteCommand:qword_10017E430[v5]];
  return 1;
}

- (void)__sendTVRemoteCommand:(unint64_t)a3
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = +[AXSettings sharedInstance];
  if ([v5 voiceOverUseTVToggleStyleNavigation])
  {
    v6 = [(VOTElementManager *)self tvIsInteractingWithRotor];

    if (v6)
    {

      [(VOTElementManager *)self setTvIsInteractingWithRotor:0];
      return;
    }
  }

  else
  {
  }

  v7 = [(VOTElementManager *)self focusedApplication:0];
  v8 = 0.05;
  if (a3 > 3)
  {
    if (a3 <= 5)
    {
      if (a3 == 4)
      {
        v10 = 1219;
        v11 = 1218;
      }

      else
      {
        v10 = 1223;
        v11 = 1222;
      }

LABEL_32:
      v16 = [AXEventRepresentation buttonRepresentationWithType:v11];
      v12 = [AXEventRepresentation buttonRepresentationWithType:v10];
      v9 = v12;
      if (v16 && v12)
      {
        v13 = [NSMutableArray arrayWithObjects:v16, v12, 0];
        v14 = [NSNumber numberWithDouble:v8];
        v15 = [NSMutableArray arrayWithObjects:v14, &off_1001D9FE0, 0];

        [(VOTElementManager *)self __sendHIDEvents:v13 postEventDelays:v15];
      }

      goto LABEL_35;
    }

    if (a3 != 6)
    {
      v9 = 0;
      v16 = 0;
      if (a3 != 7)
      {
        goto LABEL_35;
      }

      v8 = 1.25;
    }

    v10 = 1217;
    v11 = 1216;
    goto LABEL_32;
  }

  if (a3 > 1)
  {
    if (a3 == 2)
    {
      if (([v7 applicationHandleRemoteDownButton] & 1) == 0)
      {
        v10 = 1203;
        v11 = 1202;
        goto LABEL_32;
      }
    }

    else if (([v7 applicationHandleRemoteLeftButton] & 1) == 0)
    {
      v10 = 1205;
      v11 = 1204;
      goto LABEL_32;
    }

    goto LABEL_30;
  }

  if (!a3)
  {
    if (([v7 applicationHandleRemoteUpButton] & 1) == 0)
    {
      v10 = 1201;
      v11 = 1200;
      goto LABEL_32;
    }

LABEL_30:
    v16 = 0;
    v9 = 0;
    goto LABEL_35;
  }

  v9 = 0;
  v16 = 0;
  if (a3 == 1)
  {
    if (([v7 applicationHandleRemoteRightButton] & 1) == 0)
    {
      v10 = 1207;
      v11 = 1206;
      goto LABEL_32;
    }

    goto LABEL_30;
  }

LABEL_35:
}

- (void)__sendHIDEvents:(id)a3 postEventDelays:(id)a4
{
  v6 = a3;
  v7 = a4;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v8 = [v6 count];
  if (v8 == [v7 count])
  {
    v9 = [v6 firstObject];
    v10 = [v7 firstObject];
    [v10 doubleValue];
    v12 = v11;

    if (v9)
    {
      v13 = +[AXEventTapManager sharedManager];
      [v13 sendHIDSystemEvent:v9 repostCreatorHIDEvent:0 senderID:0x8000000817319373];
    }

    [v6 removeObjectAtIndex:0];
    [v7 removeObjectAtIndex:0];
    if ([v6 count])
    {
      v14 = dispatch_time(0, (v12 * 1000000000.0));
      v15 = dispatch_get_global_queue(2, 0);
      block[0] = _NSConcreteStackBlock;
      block[1] = 3221225472;
      block[2] = sub_1000AC5C4;
      block[3] = &unk_1001C8C70;
      block[4] = self;
      v17 = v6;
      v18 = v7;
      dispatch_after(v14, v15, block);
    }
  }

  else
  {
    _AXAssert();
  }
}

- (void)__tvOS_toggleAudioDescriptions
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (_AXSInUnitTestMode() || (-[VOTElementManager focusedApplication:](self, "focusedApplication:", 0), v3 = objc_claimAutoreleasedReturnValue(), v4 = [v3 fullscreenVideoViewIsVisible], v3, v4))
  {
    v5 = MAAudibleMediaPrefCopyPreferDescriptiveVideo();
    if (v5 || ([NSNumber numberWithBool:0], (v5 = objc_claimAutoreleasedReturnValue()) != 0))
    {
      v6 = v5;
      v10 = [VOTSharedWorkspace selectedLanguage];
      if (CFBooleanGetValue(v6))
      {
        v7 = @"audio.descriptions.disabled";
      }

      else
      {
        v7 = @"audio.descriptions.enabled";
      }

      MAAudibleMediaPrefSetPreferDescriptiveVideo();
      v8 = sub_1000516CC(off_1001FDDD0, v7, 0, v10);
      v9 = sub_1000095FC(v8, 0, v10);

      CFRelease(v6);
    }
  }
}

- (void)__tvOS_toggleSpeakNonfocusableElementsAfterDelayUserPreference
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self setSpeakNonfocusableElementsAfterDelay:[(VOTElementManager *)self speakNonfocusableElementsAfterDelay]^ 1];
  v3 = +[VOTWorkspace sharedWorkspace];
  v6 = [v3 selectedLanguage];

  if ([(VOTElementManager *)self speakNonfocusableElementsAfterDelay])
  {
    v4 = @"element.on.text";
  }

  else
  {
    v4 = @"element.off.text";
  }

  v5 = sub_1000516CC(off_1001FDDD0, v4, 0, v6);
  [(VOTElementManager *)self _speak:v5 cannotBeInterrupted:0];
}

- (void)__tvOS_toggleSilenceAnnouncementsUserPreference
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self setShouldSilenceAnnouncements:[(VOTElementManager *)self shouldSilenceAnnouncements]^ 1];
  v3 = +[VOTWorkspace sharedWorkspace];
  v6 = [v3 selectedLanguage];

  if ([(VOTElementManager *)self shouldSilenceAnnouncements])
  {
    v4 = @"element.on.text";
  }

  else
  {
    v4 = @"element.off.text";
  }

  v5 = sub_1000516CC(off_1001FDDD0, v4, 0, v6);
  [(VOTElementManager *)self _speak:v5 cannotBeInterrupted:0];
}

- (void)__tvOS_toggleExploreFocusAffectsNativeFocusPreference
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self setExploreFocusAffectsNativeFocus:[(VOTElementManager *)self exploreFocusAffectsNativeFocus]^ 1];
  v3 = +[VOTWorkspace sharedWorkspace];
  v6 = [v3 selectedLanguage];

  if ([(VOTElementManager *)self exploreFocusAffectsNativeFocus])
  {
    v4 = @"element.on.text";
  }

  else
  {
    v4 = @"element.off.text";
  }

  v5 = sub_1000516CC(off_1001FDDD0, v4, 0, v6);
  [(VOTElementManager *)self _speak:v5 cannotBeInterrupted:0];
}

- (void)__updateElementVisuals
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = [(VOTElementManager *)self _currentElement];
  if (v3)
  {
    v7 = v3;
    v4 = [(VOTElementManager *)self explorerElementManager];
    v5 = [v4 currentExplorerElement];

    v3 = v7;
    if (!v5)
    {
      [v7 updateFrame];
      [v7 updatePaths];
      v6 = +[VOTDisplayManager displayManager];
      [v6 setCursorFrameForElement:v7 animated:0];

      v3 = v7;
    }
  }
}

- (BOOL)_didFocusUpdateOriginateFromFocusedApp:(id)a3
{
  v4 = a3;
  v5 = [v4 senderPID];
  if (v5 == -1 || (v6 = v5, ([v4 senderIsAppExtension] & 1) != 0) || objc_msgSend(v4, "reason") == 5 && (objc_msgSend(v4, "focusElement"), v7 = objc_claimAutoreleasedReturnValue(), v7, v7))
  {
    v8 = 0;
LABEL_6:
    v9 = 1;
    goto LABEL_7;
  }

  v8 = [(VOTElementManager *)self focusedApplication:v4];
  if ([v8 pid] == v6)
  {
    goto LABEL_6;
  }

  v11 = [v8 bundleIdentifier];
  v12 = [v11 isEqualToString:@"com.apple.PineBoard"];

  if (v12)
  {
    v13 = [v4 senderBundleID];
    if (([v13 isEqualToString:@"com.apple.siri"] & 1) != 0 || (objc_msgSend(v13, "isEqualToString:", @"com.apple.TVWLAccessService") & 1) != 0 || objc_msgSend(v13, "isEqualToString:", @"com.apple.TVSystemMenuService"))
    {

      goto LABEL_6;
    }
  }

  v14 = VOTLogTVFocus();
  if (os_log_type_enabled(v14, OS_LOG_TYPE_ERROR))
  {
    v15 = [NSNumber numberWithInt:v6];
    v16 = [v4 senderBundleID];
    v17 = 138543874;
    v18 = v15;
    v19 = 2114;
    v20 = v16;
    v21 = 2114;
    v22 = v8;
    _os_log_error_impl(&_mh_execute_header, v14, OS_LOG_TYPE_ERROR, "update focus request did not come from focused app. ignoring.\nSender PID: %{public}@. BundleID: %{public}@. \nCurrent App: %{public}@", &v17, 0x20u);
  }

  v9 = 0;
LABEL_7:

  return v9;
}

- (void)_tvOS_updateWithNativeFocus:(id)a3 withDelayNumber:(id)a4
{
  v6 = a3;
  [a4 doubleValue];
  [(VOTElementManager *)self _tvOS_updateWithNativeFocus:v6 withDelay:?];
}

- (void)_tvOS_updateWithNativeFocus:(id)a3 withDelay:(double)a4
{
  v6 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (![(VOTElementManager *)self _isDictationInProgressForCurrentApp]&& [(VOTElementManager *)self _didFocusUpdateOriginateFromFocusedApp:v6])
  {
    [(NSLock *)self->_tvAccessLock lock];
    self->_needsUpdateFocus = 1;
    [(VOTElementManager *)self setUpdateFocusContext:v6];
    v7 = VOTLogTVFocus();
    if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
    {
      v8 = [NSNumber numberWithBool:self->_isUpdatingFocus];
      v9 = 138543874;
      v10 = v8;
      v11 = 2048;
      v12 = a4;
      v13 = 2114;
      v14 = v6;
      _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "asking to update. isUpdating: %{public}@. delay: %.2f\n%{public}@", &v9, 0x20u);
    }

    [(SCRCTargetSelectorTimer *)self->_updateWithNativeFocusTimer dispatchAfterDelay:a4];
    [(NSLock *)self->_tvAccessLock unlock];
  }
}

- (void)_tvOS_handleUpdateWithNativeFocusFromTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (!self->_isUpdatingFocus)
  {
    self->_isUpdatingFocus = 1;

    [(VOTElementManager *)self _tvOS_updateWithNativeFocus];
  }
}

- (id)_focusElementForFocusUpdate:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = [(VOTElementManager *)self focusedApplication:v4];
  v6 = [v4 focusElement];
  if (!v6)
  {
    if (v5)
    {
      v6 = [v5 nativeFocusPreferredElement];
    }

    else
    {
      v7 = VOTLogTVFocus();
      if (os_log_type_enabled(v7, OS_LOG_TYPE_INFO))
      {
        *v9 = 0;
        _os_log_impl(&_mh_execute_header, v7, OS_LOG_TYPE_INFO, "Suspicious: currentApp was nil", v9, 2u);
      }

      v6 = 0;
    }

    [v4 setFocusElement:v6];
  }

  return v6;
}

- (void)_tvOS_retryUpdateWithNativeFocus
{
  [(VOTElementManager *)self setWaitingToRetryFocus:0];
  if ([(VOTElementManager *)self focusRetryAttempts]<= 0x13)
  {
    v3 = +[VOTOutputManager outputManager];
    v4 = [v3 isSpeaking];

    if (v4)
    {
      [(VOTElementManager *)self setWaitingToRetryFocus:0];
      v5 = dispatch_time(0, (kSCRCThreadWaitShort * 1000000000.0));
      block[0] = _NSConcreteStackBlock;
      block[1] = 3221225472;
      block[2] = sub_1000AD248;
      block[3] = &unk_1001C76E8;
      block[4] = self;
      dispatch_after(v5, &_dispatch_main_q, block);
    }

    else
    {
      [(VOTElementManager *)self setFocusRetryAttempts:[(VOTElementManager *)self focusRetryAttempts]+ 1];

      [(VOTElementManager *)self _tvOS_updateWithNativeFocus];
    }
  }
}

- (void)_tvOS_updateWithNativeFocus
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (![(VOTElementManager *)self waitingToRetryFocus])
  {
    v3 = [VOTSharedWorkspace tvInteractionMode];
    if (v3 == 2 && CFAbsoluteTimeGetCurrent() - self->_lastScreenChangeNotificationTime < 1.0 && ![(VOTElementManager *)self forceUpdateMask])
    {
      v31 = VOTLogTVFocus();
      if (os_log_type_enabled(v31, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v31, OS_LOG_TYPE_INFO, "Ignoring focusUpdate because a screen change was just handled", buf, 2u);
      }

      v4 = 0;
      v28 = 0;
      v14 = 0;
      v5 = 0;
      v9 = 0;
      self->_isUpdatingFocus = 0;
      goto LABEL_70;
    }

    v4 = 0;
    v48 = 0;
    v5 = 0;
    for (i = 0; ; i = v14)
    {
      v7 = v4;
      self->_needsUpdateFocus = 0;
      [(NSLock *)self->_tvAccessLock lock];
      v4 = [(VOTElementManager *)self updateFocusContext];

      [(NSLock *)self->_tvAccessLock unlock];
      if (([v4 shouldIgnorePreviousFocusedElement] & 1) != 0 || -[VOTElementManager forceUpdateMask](self, "forceUpdateMask"))
      {
        v8 = [(VOTElementManager *)self tvSpeechRequestManager];
        [v8 reset];
      }

      v9 = [(VOTElementManager *)self _focusElementForFocusUpdate:v4];

      v10 = VOTLogTVFocus();
      if (os_log_type_enabled(v10, OS_LOG_TYPE_INFO))
      {
        *buf = 138543362;
        v51 = v9;
        _os_log_impl(&_mh_execute_header, v10, OS_LOG_TYPE_INFO, "Update FocusElement Candidate: %{public}@", buf, 0xCu);
      }

      if (!v9)
      {
        break;
      }

      if (([v9 isEqual:i] & 1) != 0 || !objc_msgSend(v9, "differenceAspectMask:", i))
      {
        v11 = [(VOTElementManager *)self forceUpdateMask];
        v12 = VOTLogTVFocus();
        v13 = os_log_type_enabled(v12, OS_LOG_TYPE_INFO);
        if (!v11)
        {
          if (v13)
          {
            *buf = 0;
            _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_INFO, "Pending and focus element the same after short delay. Going with original", buf, 2u);
          }

          goto LABEL_48;
        }

        if (v13)
        {
          *buf = 138543362;
          v51 = v9;
          _os_log_impl(&_mh_execute_header, v12, OS_LOG_TYPE_INFO, "Force update mask set. proceeding with element: %{public}@", buf, 0xCu);
        }
      }

      v14 = v9;

      if (v3 == 2)
      {
        v15 = [(VOTElementManager *)self __targetElementForFocusElement:v14 mustBeAccessibilityElement:1];

        [(VOTElementRotor *)self->_elementRotor updateRotorForElement:v15 shouldPreserveRotorNavigation:1 firstResponder:self->_firstResponderElement];
      }

      else
      {
        v15 = v14;

        [(VOTElementRotor *)self->_elementRotor updateRotorForElement:v15 shouldPreserveRotorNavigation:1 firstResponder:self->_firstResponderElement];
        v16 = [(VOTElementManager *)self tvSpeechRequestManager];
        v17 = [v16 updateHeadersAndElementsWithTarget:v15 ignoreLastUpdate:{objc_msgSend(v4, "shouldIgnorePreviousFocusedElement")}];

        if (v17)
        {
          v49 = 0;
          v18 = [(VOTElementManager *)self tvSpeechRequestManager];
          v19 = [v18 generateOutputRequest:&v49];

          if ((v49 & 1) == 0)
          {
            v20 = VOTLogTVFocus();
            if (os_log_type_enabled(v20, OS_LOG_TYPE_INFO))
            {
              *buf = 0;
              _os_log_impl(&_mh_execute_header, v20, OS_LOG_TYPE_INFO, "result outputRequest same as last time. setting to nil", buf, 2u);
            }

            v19 = 0;
          }

          v48 = v19;
        }

        v21 = [(VOTElementManager *)self explorerElementManager];
        [v21 cancelCurrentReadAll];

        v22 = [(VOTElementManager *)self explorerElementManager];
        v23 = [v22 explorerElements];
        v24 = [v23 count];

        if (!v24)
        {
          self->_explorerElementsNeedUpdate = 1;
        }
      }

      v5 = v15;
      if (!self->_needsUpdateFocus)
      {
        v28 = v48;
        goto LABEL_50;
      }

      v25 = VOTLogTVFocus();
      if (os_log_type_enabled(v25, OS_LOG_TYPE_INFO))
      {
        *buf = 0;
        _os_log_impl(&_mh_execute_header, v25, OS_LOG_TYPE_INFO, "reject focus change. Going again", buf, 2u);
      }
    }

    v26 = VOTLogTVFocus();
    if (os_log_type_enabled(v26, OS_LOG_TYPE_INFO))
    {
      *buf = 0;
      _os_log_impl(&_mh_execute_header, v26, OS_LOG_TYPE_INFO, "FocusElement was nil", buf, 2u);
    }

    [(VOTElementManager *)self setNativeFocusElement:0];
    v27 = [(VOTElementManager *)self tvSpeechRequestManager];
    [v27 reset];

    v28 = v48;
    if (v3 == 2)
    {
      v14 = 0;
      goto LABEL_50;
    }

    v29 = +[VOTDisplayManager displayManager];
    [v29 setCursorFrameForElement:0];

    [(VOTElementRotor *)self->_elementRotor updateRotorForElement:0 shouldPreserveRotorNavigation:1 firstResponder:self->_firstResponderElement];
    v12 = [(VOTElementManager *)self __consumeAppTransitionForAnnouncingIfNeeded:v4];
    if (v12)
    {
      v28 = objc_alloc_init(VOTOutputRequest);

      v30 = [(VOTOutputRequest *)v28 addString:v12 breakWords:0 withLanguage:0 atIndex:0];
      [(VOTOutputRequest *)v28 setGeneratesBraille:1];
      i = 0;
      goto LABEL_49;
    }

    self->_explorerElementsNeedUpdate = 1;
    [(VOTElementManager *)self _updateExplorerElementsIfNeeded];
    v32 = +[VOTExplorerElementManagerContext context];
    v33 = [(VOTElementManager *)self explorerElementManager];
    [v33 readAll:v32];

    i = 0;
LABEL_48:
    v28 = v48;
LABEL_49:

    v14 = i;
LABEL_50:
    v34 = VOTLogTVFocus();
    if (os_log_type_enabled(v34, OS_LOG_TYPE_INFO))
    {
      *buf = 138543618;
      v51 = v9;
      v52 = 2114;
      v53 = v28;
      _os_log_impl(&_mh_execute_header, v34, OS_LOG_TYPE_INFO, "Did accept focus change: %{public}@\nOutputRequest:%{public}@", buf, 0x16u);
    }

    [(VOTElementManager *)self setNativeFocusElement:v9];
    self->_forceUpdateMask = 0;
    self->_isUpdatingFocus = 0;
    self->_explorerElementsNeedUpdate = 1;
    v35 = [(VOTElementManager *)self explorerElementManager];
    [v35 setCurrentExplorerElement:0];

    self->_elementUnitIndex = -1;
    if (v3 != 2)
    {
      v40 = +[VOTCommandHelper commandHelper];
      if ([v9 handlesGestureArea])
      {
        [v40 setHelpEnabled:1];
        [v40 setPracticeRegion:{0.0, 0.0, xmmword_1001FF150}];
        [v40 setPracticeElement:v9];
      }

      else if ([v40 helpEnabled])
      {
        [v40 setHelpEnabled:0];
      }

      v41 = [(VOTOutputRequest *)v28 outputActions];
      v42 = [v41 count];

      if (v42)
      {
        v43 = [(VOTElementManager *)self explorerElementManager];
        [v43 cancelPendingReadAll];

        self->_shouldReadExplorerElementsAfterSpeechFinished = 1;
        v44 = [(VOTElementManager *)self __consumeAppTransitionForAnnouncingIfNeeded:v4];
        if (v44)
        {
          v45 = [(VOTOutputRequest *)v28 addString:v44 breakWords:0 withLanguage:0 atIndex:0];
        }

        [(VOTElementManager *)self __sendOutputRequest:v28];
      }

      [(VOTElementManager *)self _setCurrentElement:0];

      v36 = +[VOTDisplayManager displayManager];
      [v36 setCursorFrameForElement:v9];
      goto LABEL_68;
    }

    v36 = [(VOTElementManager *)self _currentElement];
    v37 = [v36 traits];
    if (((kAXTextEntryTrait | kAXSearchFieldTrait) & v37) != 0)
    {
      v38 = [v5 traits];
      v39 = (kAXKeyboardKeyTrait & v38) != 0;
      if (!v5)
      {
LABEL_68:

        [(VOTElementManager *)self __updateVoiceOverEnabledWarningBannerVisibility];
        v46 = [v4 updateFocusComplete];

        if (v46)
        {
          v47 = [v4 updateFocusComplete];
          v47[2]();
        }

LABEL_70:

        return;
      }
    }

    else
    {
      v39 = 0;
      if (!v5)
      {
        goto LABEL_68;
      }
    }

    if ([v5 differenceAspectMask:v36] != 0 && !v39)
    {
      -[VOTElementManager _moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:](self, "_moveToElement:shouldPlaySound:echoSameTouchContainer:moveToElementNotification:", v5, [v5 shouldPlaySoundWhenFocused], 0, 0);
    }

    goto LABEL_68;
  }
}

- (BOOL)_bundleIdentifierIsHostedByPineBoard:(id)a3
{
  v3 = a3;
  if ([v3 isEqualToString:@"com.apple.TVScreenSaver"] & 1) != 0 || (objc_msgSend(v3, "isEqualToString:", @"com.apple.TVIdleScreen") & 1) != 0 || (objc_msgSend(v3, "isEqualToString:", @"com.apple.TVAirPlay") & 1) != 0 || (objc_msgSend(v3, "isEqualToString:", @"com.apple.TVConferenceRoomDisplay"))
  {
    v4 = 1;
  }

  else
  {
    v4 = [v3 isEqualToString:@"com.apple.TVPeripheralAgent"];
  }

  return v4;
}

- (id)__consumeAppTransitionForAnnouncingIfNeeded:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = [v4 appTransition];
  if (v5)
  {
    v6 = [(VOTElementManager *)self focusedApplication:v4];
    v7 = [v5 pid];
    if (v7 == [v6 pid] || objc_msgSend(v6, "isSystemApp") && (objc_msgSend(v5, "bundleID"), v9 = objc_claimAutoreleasedReturnValue(), v10 = -[VOTElementManager _bundleIdentifierIsHostedByPineBoard:](self, "_bundleIdentifierIsHostedByPineBoard:", v9), v9, v10))
    {
      v8 = [v5 announcableName];
    }

    else
    {
      v14 = v5;
      v15 = v6;
      v13 = @"appTransition:%@ does not represent our currentApp:%@";
      LOBYTE(v12) = 1;
      _AXLogWithFacility();
      v8 = 0;
    }
  }

  else
  {
    v8 = 0;
  }

  [v4 setAppTransition:{0, v12, v13, v14, v15}];

  return v8;
}

- (id)__targetElementForFocusElement:(id)a3 mustBeAccessibilityElement:(BOOL)a4
{
  v4 = a4;
  v6 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v7 = [v6 accessibleAncestor];
  if (!v7)
  {
    v9 = [v6 accessibleDescendants];
    v8 = [v9 firstObject];

    if (v8)
    {
      goto LABEL_7;
    }

    v7 = v6;
  }

  v8 = v7;
LABEL_7:
  if (v4 && ([v8 isAccessibleElement] & 1) == 0)
  {

    v8 = 0;
  }

  return v8;
}

- (void)__handleUpdateVisualsTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [(VOTElementManager *)self __updateElementVisuals];
}

- (void)__tvOS_handleUpdatePreferredTVInteractionModeTimer
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = +[AXSettings sharedInstance];
  [v3 setVoiceOverPreferredTVInteractionMode:{objc_msgSend(VOTSharedWorkspace, "tvInteractionMode")}];
}

- (void)_readExplorerElementsAfterSpeechFinishedTimerFired
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_shouldReadExplorerElementsAfterSpeechFinished)
  {
    self->_shouldReadExplorerElementsAfterSpeechFinished = 0;
    v3 = [(VOTElementManager *)self currentRotorType];
    if (!self->_flags.isReadingAll)
    {
      v4 = v3;
      if ([(VOTElementManager *)self speakNonfocusableElementsAfterDelay])
      {
        if (v4 != 1)
        {
          v5 = [(VOTElementManager *)self _currentElement];
          if (!v5 || [v5 shouldSpeakExplorerElementsAfterFocus])
          {
            [(VOTElementManager *)self _updateExplorerElementsIfNeeded];
            v6 = [(VOTElementManager *)self explorerElementManager];
            v7 = +[VOTExplorerElementManagerContext context];
            [v6 readAll:v7];
          }

          _objc_release_x1();
        }
      }
    }
  }
}

- (void)__tvOS_handleValueChangedWithType:(id)a3 oldValue:(id)a4 newValue:(id)a5 insertedTextOrNil:(id)a6 isSecureText:(BOOL)a7
{
  v7 = a7;
  v33 = a3;
  v12 = a5;
  elementManagerThread = self->_elementManagerThread;
  v14 = a6;
  v15 = a4;
  if (([(SCRCThread *)elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (v12)
  {
    v16 = v12;
  }

  else
  {
    v16 = &stru_1001CBF90;
  }

  v17 = v16;

  if (v15)
  {
    v18 = v15;
  }

  else
  {
    v18 = &stru_1001CBF90;
  }

  v19 = v18;

  if (v14)
  {
    v20 = v14;
  }

  else
  {
    v20 = &stru_1001CBF90;
  }

  v21 = v20;

  if ([(__CFString *)v21 rangeOfString:@""]!= 0x7FFFFFFFFFFFFFFFLL)
  {

    v21 = 0;
  }

  if (v7 && ([(__CFString *)v17 length]|| [(__CFString *)v19 length]== 1))
  {
    v22 = +[VOTOutputManager outputManager];
    v23 = +[VOSOutputEvent DidEnterSecureText];
    [v22 sendEvent:v23];
  }

  v24 = +[NSMutableArray array];
  v25 = [(__CFString *)v17 length];
  if ([v33 isEqualToString:kAXValueChangeTypeInsert])
  {
    if (v7)
    {
      [v24 axSafelyAddObject:v21];
      if ([(__CFString *)v17 length])
      {
        v26 = [AXAttributedString axAttributedStringWithString:v17];
        [v26 setAttribute:kCFBooleanTrue forKey:off_1001FDF30];
        [v24 addObject:v26];
      }

      v27 = 1;
      goto LABEL_43;
    }

    v28 = 1;
    goto LABEL_30;
  }

  if (![v33 isEqualToString:kAXValueChangeTypeDelete])
  {
    v28 = 0;
    v27 = 0;
    if ([v33 isEqualToString:kAXValueChangeTypeReplacement])
    {
LABEL_30:
      v29 = [(__CFString *)v17 stringByReplacingOccurrencesOfString:v19 withString:&stru_1001CBF90];
      [v24 axSafelyAddObject:v29];

      v27 = v28;
    }

LABEL_31:
    if (!v7 && v25 && ([v24 containsObject:v17] & 1) == 0)
    {
      if ([v24 count])
      {
        [v24 addObject:off_1001FDF20];
      }

      [v24 addObject:v17];
    }

    goto LABEL_43;
  }

  if (v7)
  {
    [v24 axSafelyAddObject:v17];
    if (v25)
    {
LABEL_27:
      v27 = 2;
      goto LABEL_31;
    }
  }

  else
  {
    v30 = [(__CFString *)v19 stringByReplacingOccurrencesOfString:v17 withString:&stru_1001CBF90];
    if ([v30 length])
    {
      [v24 axSafelyAddObject:v30];
    }

    if (v25)
    {
      goto LABEL_27;
    }
  }

  if (-[VOTElementManager _isDictationInProgressForCurrentApp](self, "_isDictationInProgressForCurrentApp") || [v24 count])
  {
    v27 = 2;
LABEL_43:
    [(VOTElementManager *)self _speakMessages:v24 cannotBeInterrupted:0 pitch:v27];
    goto LABEL_44;
  }

  v31 = +[VOTOutputManager outputManager];
  v32 = +[VOSOutputEvent BoundaryEncountered];
  [v31 sendEvent:v32];

LABEL_44:
}

- (void)_speak:(id)a3 cannotBeInterrupted:(BOOL)a4 pitch:(int64_t)a5 announcement:(BOOL)a6 brailleOnly:(BOOL)a7
{
  v7 = a7;
  v8 = a6;
  v10 = a4;
  v12 = a3;
  if ([v12 length])
  {
    v14 = v12;
    v13 = [NSArray arrayWithObjects:&v14 count:1];
    [(VOTElementManager *)self _speakMessages:v13 cannotBeInterrupted:v10 pitch:a5 announcement:v8 brailleOnly:v7];
  }
}

- (void)_speakMessages:(id)a3 cannotBeInterrupted:(BOOL)a4 pitch:(int64_t)a5 announcement:(BOOL)a6 brailleOnly:(BOOL)a7
{
  v7 = a7;
  v8 = a6;
  v9 = a4;
  v11 = a3;
  if ([v11 count])
  {
    v28 = v9;
    v29 = v8;
    v12 = [objc_allocWithZone(VOTOutputRequest) init];
    v13 = v12;
    if (v7)
    {
      [v12 setLimitToComponentType:3];
    }

    v34 = 0u;
    v35 = 0u;
    v32 = 0u;
    v33 = 0u;
    v14 = v11;
    v15 = [v14 countByEnumeratingWithState:&v32 objects:v36 count:16];
    if (v15)
    {
      v16 = v15;
      v17 = *v33;
      v31 = v13;
      do
      {
        v18 = 0;
        do
        {
          if (*v33 != v17)
          {
            objc_enumerationMutation(v14);
          }

          v19 = *(*(&v32 + 1) + 8 * v18);
          if ([v19 isEqualToString:off_1001FDF18])
          {
            LODWORD(v20) = 0.25;
LABEL_15:
            [v13 addPause:v20];
            goto LABEL_16;
          }

          if ([v19 isEqualToString:off_1001FDF20])
          {
            LODWORD(v20) = 0.5;
            goto LABEL_15;
          }

          if ([v19 isEqualToString:off_1001FDF28])
          {
            LODWORD(v20) = 0.75;
            goto LABEL_15;
          }

          objc_opt_class();
          if (objc_opt_isKindOfClass())
          {
            v21 = v19;
            v13 = v31;
            if ([v21 hasAttribute:off_1001FDF30])
            {
              goto LABEL_27;
            }
          }

          else
          {
            v21 = [AXAttributedString axAttributedStringWithString:v19];
            v13 = v31;
          }

          v22 = [v21 length];
          if (a5 == 1)
          {
            v23 = &UIAccessibilityTokenHighPitch;
            goto LABEL_26;
          }

          if (a5 == 2)
          {
            v23 = &UIAccessibilityTokenLowPitch;
LABEL_26:
            [v21 setAttribute:&__kCFBooleanTrue forKey:*v23 withRange:{0, v22}];
          }

LABEL_27:
          v24 = [v13 addAttributedString:v21];

LABEL_16:
          v18 = v18 + 1;
        }

        while (v16 != v18);
        v25 = [v14 countByEnumeratingWithState:&v32 objects:v36 count:16];
        v16 = v25;
      }

      while (v25);
    }

    [v13 setGeneratesBraille:0];
    [v13 setCannotBeInterrupted:v28];
    if (v29)
    {
      objc_storeStrong(&self->_announcementRequest, v13);
      self->_announcementPid = -1;
      v26 = [v14 firstObject];
      announcementOriginalString = self->_announcementOriginalString;
      self->_announcementOriginalString = v26;

      [v13 setCompletionDelegate:self];
    }

    [(VOTElementManager *)self sendRequest:v13];
  }
}

- (void)__sendOutputRequest:(id)a3
{
  v4 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  [v4 send];
}

- (void)__interruptSpeachAndPlayBorderHitSound
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v3 = +[VOTOutputManager outputManager];
  [v3 stopSpeakingAtBoundary:0];

  v5 = +[VOTOutputManager outputManager];
  v4 = +[VOSOutputEvent BoundaryEncountered];
  [v5 sendEvent:v4];
}

- (void)_updateExplorerElementsIfNeeded
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_explorerElementsNeedUpdate)
  {
    v13 = [(VOTElementManager *)self focusedApplication:0];
    v3 = [v13 explorerElements];
    if ([v13 isHeadBoard])
    {
      v4 = +[VOTElement systemAppApplication];
      v5 = [v4 explorerElements];
      v6 = [v3 arrayByAddingObjectsFromArray:v5];

      v3 = v6;
    }

    v7 = [v13 nativeFocusElement];
    v8 = [(VOTElementManager *)self explorerElementManager];
    v9 = [(VOTElementManager *)self __targetElementForFocusElement:v7 mustBeAccessibilityElement:0];
    [v8 updateWithExplorerElements:v3 focusedElement:v9];

    v10 = [(VOTElementManager *)self explorerElementManager];
    v11 = [v10 tvSpeechRequestManager];
    v12 = [(VOTElementManager *)self tvSpeechRequestManager];
    [v11 transferHeadersFrom:v12];

    self->_explorerElementsNeedUpdate = 0;
  }
}

- (void)explorerElementManager:(id)a3 willReadElement:(id)a4
{
  v5 = a4;
  v6 = +[VOTDisplayManager displayManager];
  [v6 setCursorFrameForElement:v5];

  [(VOTElementManager *)self _sendUserEventOccurredIfNeeded];
}

- (void)explorerElementManager:(id)a3 didFinishReadAll:(BOOL)a4
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread:a3]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  v5 = +[VOTDisplayManager displayManager];
  v6 = [(VOTElementManager *)self _currentElement];
  [v5 setCursorFrameForElement:v6];

  self->_flags.isReadingAll = 0;
}

- (void)_sendUserEventOccurredIfNeeded
{
  +[NSDate timeIntervalSinceReferenceDate];
  if (vabdd_f64(v3, self->_lastUserEventNotificationTime) > 4.0)
  {
    self->_lastUserEventNotificationTime = v3;

    dispatch_async(&_dispatch_main_q, &stru_1001CA268);
  }
}

- (void)gestureRepeaterWillSendFirstRepeaterEvent:(id)a3
{
  v4 = +[VOTOutputManager outputManager];
  v3 = +[VOSOutputEvent DidBeginPassthrough];
  [v4 sendEvent:v3];
}

- (void)gestureRepeater:(id)a3 repeaterEventDidFire:(int64_t)a4
{
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if ((a4 - 1) <= 3)
  {

    [(VOTElementManager *)self __sendTVRemoteCommand:?];
  }
}

- (_NSRange)_outputRangeForCharacterSegment:(id)a3 direction:(int64_t)a4
{
  v6 = a3;
  v7 = [v6 length];
  v8 = v7;
  if (a4 == 2)
  {
    elementUnitIndex = self->_elementUnitIndex;
    if (elementUnitIndex > v7)
    {
      self->_elementUnitIndex = v7;
      elementUnitIndex = v7;
    }

    if (elementUnitIndex >= 1)
    {
      v15 = [v6 rangeOfComposedCharacterSequenceAtIndex:elementUnitIndex - 1];
      v17 = v19;
      self->_elementUnitIndex = v15;
      goto LABEL_19;
    }

    v17 = 0;
    self->_elementUnitIndex = -1;
LABEL_18:
    v15 = 0x7FFFFFFFFFFFFFFFLL;
    goto LABEL_19;
  }

  if (a4 != 1)
  {
    v17 = 0;
    goto LABEL_18;
  }

  if (self->_elementUnitIndex < 0)
  {
    self->_elementUnitIndex = 0;
  }

  v9 = +[AXSettings sharedInstance];
  v10 = [v9 voiceOverCursorOutputStyle];

  if (v10 == 2)
  {
    v11 = self->_elementUnitIndex + 1;
  }

  else
  {
    v11 = self->_elementUnitIndex;
  }

  if (v11 >= v8)
  {
    v17 = 0;
    v15 = 0x7FFFFFFFFFFFFFFFLL;
  }

  else
  {
    v12 = [v6 rangeOfComposedCharacterSequenceAtIndex:?];
    v14 = v13;
    v15 = [v6 rangeOfComposedCharacterSequenceAtIndex:v11];
    v17 = v16;
    v8 = v12 + v14;
  }

  self->_elementUnitIndex = v8;
LABEL_19:

  v20 = v15;
  v21 = v17;
  result.length = v21;
  result.location = v20;
  return result;
}

- (void)outputNextTextSegmentUnit:(int64_t)a3 direction:(int64_t)a4 string:(id)a5 element:(id)a6
{
  v10 = a6;
  v14 = a5;
  v11 = [(VOTElementManager *)self outputRangeForTextSegmentUnit:a3 direction:a4 string:v14 element:v10];
  v13 = v12;
  -[VOTElementManager updateIndexesForOutputRange:segment:direction:outputStringLength:](self, "updateIndexesForOutputRange:segment:direction:outputStringLength:", v11, v12, a3, a4, [v14 length]);
  [(VOTElementManager *)self outputTextSegmentForRange:v11 string:v13 element:v14 usePhonetics:v10 segment:a3 == 1, a3];
}

- (_NSRange)outputRangeForTextSegmentUnit:(int64_t)a3 direction:(int64_t)a4 string:(id)a5 element:(id)a6
{
  v10 = a5;
  v11 = a6;
  v12 = 0;
  v13 = 0x7FFFFFFFLL;
  if (a3 > 2)
  {
    if (a3 != 3)
    {
      if (a3 == 5)
      {
        v14 = [v10 sentenceFromPosition:self->_elementUnitIndex inDirection:a4];
        goto LABEL_13;
      }

      if (a3 == 6)
      {
        v14 = [v10 paragraphFromPosition:self->_elementUnitIndex inDirection:a4];
LABEL_13:
        v13 = v14;
        v12 = v15;
        goto LABEL_14;
      }

      goto LABEL_14;
    }

    lastSeenLineAndColumn = self->_lastSeenLineAndColumn;
    if (lastSeenLineAndColumn)
    {
      v17 = lastSeenLineAndColumn;
    }

    else
    {
      v59[0] = @"lineNumber";
      v59[1] = @"lineColumn";
      v60[0] = &off_1001D9FE0;
      v60[1] = &off_1001D9FE0;
      v17 = [NSDictionary dictionaryWithObjects:v60 forKeys:v59 count:2];
    }

    v20 = v17;
    v21 = [v11 rangeForLineNumberAndColumn:v17];
    if (v21 == 0x7FFFFFFF)
    {
      v23 = [v10 lineFromPosition:self->_elementUnitIndex inDirection:a4];
LABEL_18:
      v13 = v23;
      v12 = v24;
LABEL_40:

      goto LABEL_14;
    }

    v13 = v21;
    v25 = v22;
    p_lastSeenLineAndColumn = &self->_lastSeenLineAndColumn;
    if (!*p_lastSeenLineAndColumn)
    {
      objc_storeStrong(p_lastSeenLineAndColumn, v20);
      v12 = v25;
      goto LABEL_40;
    }

    if (a4 == 1)
    {
      v27 = &v21[v22];
      if (&v21[v22] < [v10 length])
      {
        v57[0] = @"lineNumber";
        v28 = [NSNumber numberWithUnsignedInteger:v27];
        v57[1] = @"lineColumn";
        v58[0] = v28;
        v58[1] = &off_1001D9FE0;
        v29 = [NSDictionary dictionaryWithObjects:v58 forKeys:v57 count:2];

        objc_storeStrong(p_lastSeenLineAndColumn, v29);
        v13 = [v11 rangeForLineNumberAndColumn:v29];
        v12 = v30;
        v20 = v29;
        goto LABEL_40;
      }

      v12 = 0;
LABEL_39:
      v13 = 0x7FFFFFFFLL;
      goto LABEL_40;
    }

    v12 = 0;
    if (a4 != 2 || !v21)
    {
      goto LABEL_39;
    }

    if (v21 >= v22)
    {
      v31 = &v21[-v22];
    }

    else
    {
      v31 = 0;
    }

    v55[0] = @"lineNumber";
    v32 = [NSNumber numberWithUnsignedInteger:v31];
    v55[1] = @"lineColumn";
    v56[0] = v32;
    v56[1] = &off_1001D9FE0;
    v33 = [NSDictionary dictionaryWithObjects:v56 forKeys:v55 count:2];

    v34 = [v11 rangeForLineNumberAndColumn:v33];
    v36 = &v34[v35];
    v37 = v33;
    v38 = v37;
    if (v36 == v13)
    {
      if (v34 != 0x7FFFFFFF)
      {
        v39 = v37;
        while (v31 < [v10 length])
        {
          v20 = v38;

          --v31;
          v53[0] = @"lineNumber";
          v40 = [NSNumber numberWithUnsignedInteger:v31];
          v53[1] = @"lineColumn";
          v54[0] = v40;
          v54[1] = &off_1001D9FE0;
          v38 = [NSDictionary dictionaryWithObjects:v54 forKeys:v53 count:2];

          v41 = [v11 rangeForLineNumberAndColumn:v38];
          v43 = v41 != 0x7FFFFFFF && &v41[v42] == v13;
          v39 = v20;
          if (!v43)
          {
            goto LABEL_53;
          }
        }

        v20 = v39;
        goto LABEL_53;
      }
    }

    else if (v34 != 0x7FFFFFFF)
    {
      v44 = v13 - v25;
      if (v13 < v25)
      {
        v44 = 0;
      }

      v45 = v44 + 1;
      v46 = v37;
      do
      {
        v20 = v38;

        v47 = [NSNumber numberWithUnsignedInteger:v45, @"lineNumber"];
        v51[1] = @"lineColumn";
        v52[0] = v47;
        v52[1] = &off_1001D9FE0;
        v38 = [NSDictionary dictionaryWithObjects:v52 forKeys:v51 count:2];

        v48 = [v11 rangeForLineNumberAndColumn:v38];
        ++v45;
        v50 = v48 == 0x7FFFFFFF || &v48[v49] == v13;
        v46 = v20;
      }

      while (!v50);
      goto LABEL_53;
    }

    v20 = v37;
LABEL_53:

    objc_storeStrong(p_lastSeenLineAndColumn, v20);
    v23 = [v11 rangeForLineNumberAndColumn:v20];
    goto LABEL_18;
  }

  if (a3 == 1)
  {
    v14 = [(VOTElementManager *)self _outputRangeForCharacterSegment:v10 direction:a4];
    goto LABEL_13;
  }

  if (a3 == 2)
  {
    v14 = [v10 wordFromPosition:self->_elementUnitIndex inDirection:a4];
    goto LABEL_13;
  }

LABEL_14:

  v18 = v13;
  v19 = v12;
  result.length = v19;
  result.location = v18;
  return result;
}

- (void)updateIndexesForOutputRange:(_NSRange)a3 segment:(int64_t)a4 direction:(int64_t)a5 outputStringLength:(unint64_t)a6
{
  if (a4 != 1)
  {
    if (a5 != 1)
    {
      a6 = -1;
    }

    if (a5 == 1)
    {
      length = a3.length;
    }

    else
    {
      length = 0;
    }

    v8 = length + a3.location;
    if (a3.location != 0x7FFFFFFF)
    {
      a6 = v8;
    }

    self->_elementUnitIndex = a6;
  }
}

- (id)_listItemLabelForAXAttributedString:(id)a3
{
  v3 = [a3 attributeValueForKey:UIAccessibilityTokenListItemLabel];
  if ([v3 length])
  {
    v4 = sub_1000511CC(off_1001FDDD0, @"list.item.label", 0);
    v5 = [NSString stringWithFormat:v4, v3];
  }

  else
  {
    v5 = 0;
  }

  return v5;
}

- (void)outputTextSegmentForRange:(_NSRange)a3 string:(id)a4 element:(id)a5 usePhonetics:(BOOL)a6 segment:(int64_t)a7
{
  v8 = a6;
  length = a3.length;
  location = a3.location;
  v56 = a4;
  v13 = a5;
  self->_elementUnitOutputRange.location = location;
  self->_elementUnitOutputRange.length = length;
  v14 = [v56 length];
  if (location == 0x7FFFFFFFFFFFFFFFLL || !length || v56 && (location > v14 || location + length > v14))
  {
    v15 = +[VOTOutputManager outputManager];
    [v15 stopSpeakingAtBoundary:0];

    v16 = +[VOTOutputManager outputManager];
    v17 = +[VOSOutputEvent BoundaryEncountered];
    [v16 sendEvent:v17];
    goto LABEL_49;
  }

  v53 = a7;
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    [v56 attributedSubstringFromRange:{location, length}];
  }

  else
  {
    [v56 substringWithRange:{location, length}];
  }
  v17 = ;
  v18 = [objc_allocWithZone(VOTOutputRequest) init];
  v19 = [v13 language];
  v20 = +[AXSettings sharedInstance];
  v21 = [v20 voiceOverPhoneticsFeedback];

  if (v8)
  {
    v55 = 0;
    if ([v17 length] == 1 && v21)
    {
      v55 = [(VOTElementManager *)self _phoneticStringForLetter:v17 language:v19];
    }
  }

  else
  {
    v55 = 0;
  }

  v22 = [v13 attributedValueForRange:{location, length}];
  v23 = [v13 lineRangeForPosition:location];
  v24 = [(VOTElementManager *)self _listItemLabelForAXAttributedString:v22];
  v54 = v24;
  if ([v24 length] && objc_msgSend(v24, "length") && v23 != self->_lastSeenLineStartPositionForFontProperties)
  {
    v25 = [v18 addString:v24];
    [v18 setGeneratesBraille:1];
    [v18 lastAction];
    v27 = v26 = v19;
    LODWORD(v28) = 1062836634;
    v29 = [NSNumber numberWithFloat:v28];
    [v27 setObject:v29 forVariant:32];

    v19 = v26;
  }

  self->_lastSeenLineStartPositionForFontProperties = v23;
  v30 = [v22 string];
  v31 = [(VOTElementManager *)self stringIsTextAttachment:v30];

  if (v31)
  {
    v52 = v19;
    v32 = -[VOTElementManager _textAttachmentElementForString:inRange:](self, "_textAttachmentElementForString:inRange:", v22, 0, [v22 length]);
    v33 = v32;
    if (v32)
    {
      v34 = [v32 value];
      v50 = [v33 label];
      v51 = @"__AXStringForVariablesSentinel";
      v16 = __AXStringForVariables();
    }

    else
    {
      v16 = sub_1000511CC(off_1001FDDD0, @"attachment", 0);
    }

    v19 = v52;
  }

  else
  {
    v16 = v17;
  }

  v35 = [v55 length];
  if (v35)
  {
    v36 = v21 == 0;
  }

  else
  {
    v36 = 1;
  }

  v37 = !v36;
  if (!v35 || v21 != 2)
  {
    v47 = [v18 addAttributedString:v16 withLanguage:v19];
    if (v53 == 1)
    {
      v49 = [v18 lastAction];
      [v49 setObject:kCFBooleanTrue forVariant:28];
    }

    if (!v37)
    {
      goto LABEL_48;
    }

    if (v21 != 2)
    {
      LODWORD(v48) = 1061158912;
      [v18 addPause:v48];
    }
  }

  v38 = +[AXSettings sharedInstance];
  v39 = [v38 voiceOverCapitalLetterFeedback];

  if (!v39 && v21 == 2 && sub_10005088C(v17))
  {
    v40 = sub_1000511CC(off_1001FDDD0, @"CapitalLetterFormat", 0);
    v41 = [NSString stringWithFormat:v40, v55];

    v42 = [v18 addString:v41];
  }

  else
  {
    v43 = [v18 addString:v55];
  }

  if ([(VOTElementManager *)self _needsPhoneticBrailleForLanauge:v19])
  {
    [(VOTElementManager *)self _sendBrailleAlert:v55];
  }

  if (sub_10005088C(v17))
  {
    v44 = +[AXSettings sharedInstance];
    v45 = [v44 voiceOverCapitalLetterFeedback];

    if (v45 == 1)
    {
      v46 = [v18 lastAction];
      [v46 setObject:&off_1001D9940 forVariant:32];
    }
  }

LABEL_48:
  --self->_elementUnitOutputRange.length;
  [(VOTElementManager *)self sendRequest:v18];

LABEL_49:
}

- (id)_textAttachmentElementForString:(id)a3 inRange:(_NSRange)a4
{
  v5 = [a3 attributedSubstringFromRange:{a4.location, a4.length}];
  v6 = v5;
  if (self->_inUnitTestingMode)
  {
    [v5 attributeValueForKey:UIAccessibilityTokenAttachment];
  }

  else
  {
    +[AXUIElement uiElementWithAXElement:](AXUIElement, "uiElementWithAXElement:", [v5 attributeValueForKey:UIAccessibilityTokenAttachment]);
  }
  v7 = ;
  v8 = [VOTElement elementWithUIElement:v7];

  return v8;
}

- (BOOL)stringIsTextAttachment:(id)a3
{
  v3 = a3;
  v4 = +[NSCharacterSet whitespaceAndNewlineCharacterSet];
  v5 = [v3 stringByTrimmingCharactersInSet:v4];

  v6 = [v5 length] == 1 && objc_msgSend(v5, "characterAtIndex:", 0) == 65532;
  return v6;
}

- (BOOL)_elementMonitoringOutputElement:(id)a3 userMonitored:(BOOL)a4
{
  v4 = a4;
  v6 = a3;
  v7 = [v6 value];
  v8 = [v7 length];

  v9 = +[VOTElement springBoardApplication];
  v10 = [v9 isSystemSleeping];

  if ((v10 & 1) == 0)
  {
    if (v8)
    {
      v12 = 8;
    }

    else
    {
      v12 = 1;
    }

    [v6 updateLanguage];
    v13 = [objc_allocWithZone(VOTOutputRequest) init];
    v14 = 1;
    [v13 setDoesNotInterrupt:1];
    [(VOTElementManager *)self _addDescription:v6 toRequest:v13 withOptions:v12];
    v15 = [v6 label];
    if ([v15 isAXAttributedString])
    {
      v16 = [v15 coalescedAttributes];
      v17 = [v16 objectForKey:UIAccessibilityTokenBrailleDisplayOnly];
      v18 = [v17 BOOLValue];

      if (!v18)
      {
        v14 = 1;
        if (v4)
        {
LABEL_10:
          [v13 setGeneratesBraille:1];
          [v13 setBrailleType:2];
          if (!v14)
          {
            goto LABEL_16;
          }

LABEL_14:
          v19 = +[VOTOutputManager outputManager];
          v20 = [v19 isSpeaking];

          if (v20)
          {
            v11 = 0;
LABEL_23:

            goto LABEL_24;
          }

LABEL_16:
          v21 = +[AXSubsystemVoiceOver sharedInstance];
          v22 = [v21 ignoreLogging];

          if ((v22 & 1) == 0)
          {
            v23 = +[AXSubsystemVoiceOver identifier];
            v24 = AXLoggerForFacility();

            v25 = AXOSLogLevelFromAXLogLevel();
            if (os_log_type_enabled(v24, v25))
            {
              v26 = AXColorizeFormatLog();
              v29 = v13;
              v27 = _AXStringForArgs();
              if (os_log_type_enabled(v24, v25))
              {
                *buf = 138543362;
                v31 = v27;
                _os_log_impl(&_mh_execute_header, v24, v25, "%{public}@", buf, 0xCu);
              }
            }
          }

          [(VOTElementManager *)self sendRequest:v13, v29];
          v11 = 1;
          goto LABEL_23;
        }

LABEL_13:
        [(VOTElementManager *)self refreshBraille];
        if (!v14)
        {
          goto LABEL_16;
        }

        goto LABEL_14;
      }

      [v13 setLimitToComponentType:3];
      v14 = 0;
    }

    if (v4)
    {
      goto LABEL_10;
    }

    goto LABEL_13;
  }

  v11 = 0;
LABEL_24:

  return v11;
}

- (double)_realTimeAdjustableUpdateFrequency:(id)a3
{
  v4 = a3;
  v5 = 1.0;
  if (![(NSArray *)self->_realTimeElementsCache containsObject:v4])
  {
    v5 = 0.5;
    if (([v4 doesHaveTraits:kAXAdjustableTrait] & 1) == 0)
    {
      if ([v4 isLiveCaptionsTextView])
      {
        v5 = 1.0;
      }

      else
      {
        v5 = 3.0;
      }
    }
  }

  return v5;
}

- (void)_elementUpdatesFrequently
{
  v3 = [(VOTElementManager *)self getCurrentElement];
  v4 = +[AXSubsystemVoiceOver sharedInstance];
  v5 = [v4 ignoreLogging];

  if ((v5 & 1) == 0)
  {
    v6 = +[AXSubsystemVoiceOver identifier];
    v7 = AXLoggerForFacility();

    v8 = AXOSLogLevelFromAXLogLevel();
    if (os_log_type_enabled(v7, v8))
    {
      v9 = AXColorizeFormatLog();
      v23 = v3;
      v10 = _AXStringForArgs();
      if (os_log_type_enabled(v7, v8))
      {
        *buf = 138543362;
        v26 = v10;
        _os_log_impl(&_mh_execute_header, v7, v8, "%{public}@", buf, 0xCu);
      }
    }
  }

  if ((-[SCRCTargetSelectorTimer isCancelled](self->_elementUpdatesFrequentlyTimer, "isCancelled", v23) & 1) == 0 && [v3 doesHaveTraits:kAXUpdatesFrequentlyTrait])
  {
    [(VOTElementManager *)self _realTimeAdjustableUpdateFrequency:v3];
    v12 = v11;
    v13 = [v3 label];
    v14 = [v3 value];
    v15 = [NSString stringWithFormat:@"%@%@", v13, v14];

    v16 = +[AXSubsystemVoiceOver sharedInstance];
    LOBYTE(v14) = [v16 ignoreLogging];

    if ((v14 & 1) == 0)
    {
      v17 = +[AXSubsystemVoiceOver identifier];
      v18 = AXLoggerForFacility();

      v19 = AXOSLogLevelFromAXLogLevel();
      if (os_log_type_enabled(v18, v19))
      {
        v20 = AXColorizeFormatLog();
        v24 = v15;
        v21 = _AXStringForArgs();
        if (os_log_type_enabled(v18, v19))
        {
          *buf = 138543362;
          v26 = v21;
          _os_log_impl(&_mh_execute_header, v18, v19, "%{public}@", buf, 0xCu);
        }
      }
    }

    cachedFrequentUpdateText = self->_cachedFrequentUpdateText;
    if (!cachedFrequentUpdateText)
    {
      objc_storeStrong(&self->_cachedFrequentUpdateText, v15);
      cachedFrequentUpdateText = self->_cachedFrequentUpdateText;
    }

    if (![(NSString *)cachedFrequentUpdateText isEqualToString:v15, v24]&& [(VOTElementManager *)self _elementMonitoringOutputElement:v3 userMonitored:0])
    {
      v12 = v12 / 3.0;
      objc_storeStrong(&self->_cachedFrequentUpdateText, v15);
    }

    [(SCRCTargetSelectorTimer *)self->_elementUpdatesFrequentlyTimer dispatchAfterDelay:v12];
  }
}

- (BOOL)_needsPhoneticBrailleForLanauge:(id)a3
{
  v3 = a3;
  v4 = v3;
  if (!v3)
  {
    v4 = [VOTSharedWorkspace selectedLanguage];
    if (!v4)
    {
      v4 = [VOTSharedWorkspace systemSpokenLanguage];
    }
  }

  if ([v4 hasPrefix:@"ja"])
  {
    v5 = 1;
  }

  else
  {
    v5 = [v4 hasPrefix:@"zh"];
  }

  return v5;
}

- (void)_sendBrailleAlert:(id)a3
{
  v5 = a3;
  v3 = +[VOTOutputRequest createRequest];
  v4 = [v3 addString:v5];
  [v3 setGeneratesBraille:1];
  [v3 setLimitToComponentType:3];
  [v3 setBrailleType:2];
  [v3 send];
}

- (void)rotor:(id)a3 didChangeFrom:(int64_t)a4 to:(int64_t)a5 userInitiated:(BOOL)a6
{
  v9 = a3;
  if (([(SCRCThread *)self->_elementManagerThread _debug_currentlyRunningOnThisThread]& 1) == 0 && ([(SCRCThread *)self->_systemEventThread _debug_currentlyRunningOnThisThread]& 1) == 0)
  {
    _AXAssert();
  }

  if (self->_elementRotor == v9)
  {
    v7 = +[AXSettings sharedInstance];
    [v7 voiceOverUseTVToggleStyleNavigation];
  }

  if (_AXSAutomationEnabled())
  {
    v8 = +[NSDistributedNotificationCenter defaultCenter];
    [v8 postNotificationName:@"VoiceOverEventOccurred" object:@"RotorTypeDidChange"];
  }
}

- (void)_setFetchManager:(id)a3
{
  v5 = a3;
  fetchManager = self->_fetchManager;
  if (fetchManager != v5)
  {
    v7 = v5;
    [(VOTElementFetcher *)fetchManager setDelegate:0];
    objc_storeStrong(&self->_fetchManager, a3);
    fetchManager = [(VOTElementFetcher *)self->_fetchManager setDelegate:self];
    v5 = v7;
  }

  _objc_release_x1(fetchManager, v5);
}

- (VOTElementUpdateProtocol)updateDelegate
{
  WeakRetained = objc_loadWeakRetained(&self->_updateDelegate);

  return WeakRetained;
}

- (CGPoint)indefiniteLongPressPoint
{
  x = self->_indefiniteLongPressPoint.x;
  y = self->_indefiniteLongPressPoint.y;
  result.y = y;
  result.x = x;
  return result;
}

@end