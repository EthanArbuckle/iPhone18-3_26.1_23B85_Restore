void sub_2337EAE68(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_2849160E8;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EAF28(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2849160E8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EAFA4(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EB04C(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EB038);
}

void sub_2337EB13C(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916178;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EB1FC(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916178;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EB278(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EB320(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EB30CLL);
}

void sub_2337EB410(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916208;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EB4D0(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916208;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EB54C(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EB5F4(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EB5E0);
}

void sub_2337EB6E4(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916298;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EB7A4(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916298;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EB820(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EB8C8(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EB8B4);
}

void sub_2337EB9B8(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916328;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EBA78(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916328;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EBAF4(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EBB9C(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EBB88);
}

void sub_2337EBC8C(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_2849163B8;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EBD4C(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2849163B8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EBDC8(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EBE70(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EBE5CLL);
}

void sub_2337EBF60(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916448;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EC020(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916448;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EC09C(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EC144(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EC130);
}

void sub_2337EC234(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_2849164D8;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EC2F4(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2849164D8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EC370(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EC418(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EC404);
}

void sub_2337EC508(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916568;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EC5C8(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916568;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EC644(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EC6EC(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EC6D8);
}

void sub_2337EC7DC(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_2849165F8;
  sub_233737534((a1 + 3), a2);
}

void sub_2337EC89C(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2849165F8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337EC918(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337EC9C0(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337EC9ACLL);
}

void sub_2337ECAB0(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916688;
  sub_233737534((a1 + 3), a2);
}

void sub_2337ECB70(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916688;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337ECBEC(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337ECC94(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337ECC80);
}

void sub_2337ECD84(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284916718;
  sub_233737534((a1 + 3), a2);
}

void sub_2337ECE44(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284916718;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337ECEC0(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337ECF68(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337ECF54);
}

void sub_2337ED058(uint64_t a1, uint64_t a2)
{
  if (*(a2 + 23) < 0)
  {
    sub_233731FB8(__p, *a2, *(a2 + 8));
  }

  else
  {
    *__p = *a2;
    v3 = *(a2 + 16);
  }

  operator new();
}

void sub_2337ED100(void *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  __cxa_begin_catch(a1);
  __cxa_end_catch();
  JUMPOUT(0x2337ED0ECLL);
}

void sub_2337ED1F0(void *a1, uint64_t a2)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_2849167E8;
  sub_2337E326C((a1 + 3), a2);
}

void sub_2337ED288(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2849167E8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

uint64_t sub_2337ED304(uint64_t a1, __CVBuffer *a2, void *a3, const char *a4)
{
  v7 = a3;
  __p = 0;
  v26 = 0;
  sub_233798C70(a1, &__p, 0, v7, 0);
  if (v26)
  {
    sub_2337239E8(v26);
  }

  *a1 = &unk_284916838;
  v8 = v7;
  *(a1 + 2504) = v8;
  *(a1 + 2512) = 0;
  sub_23372A488(&__p, "IFD0");
  p_p = &__p;
  *(sub_2337F24C8(a1 + 1432, &__p) + 56) = 5120;
  if (v27 < 0)
  {
    operator delete(__p);
  }

  sub_23372A488(&__p, "IFD0");
  p_p = &__p;
  *(sub_2337F24C8(a1 + 1456, &__p) + 56) = 5120;
  if (v27 < 0)
  {
    operator delete(__p);
  }

  sub_23372A488(&__p, "IFD0");
  p_p = &__p;
  *(sub_2337F24C8(a1 + 512, &__p) + 56) = 0;
  if (v27 < 0)
  {
    operator delete(__p);
  }

  Width = CVPixelBufferGetWidth(a2);
  sub_23372A488(&__p, "IFD0");
  p_p = &__p;
  *(sub_2337F24C8(a1 + 536, &__p) + 56) = Width;
  if (v27 < 0)
  {
    operator delete(__p);
  }

  Height = CVPixelBufferGetHeight(a2);
  sub_23372A488(&__p, "IFD0");
  p_p = &__p;
  *(sub_2337F24C8(a1 + 560, &__p) + 56) = Height;
  if (v27 < 0)
  {
    operator delete(__p);
  }

  PixelFormatType = CVPixelBufferGetPixelFormatType(a2);
  if (PixelFormatType <= 1734505011)
  {
    if (PixelFormatType == 1278226742)
    {
      sub_23372A488(&__p, "IFD0");
      p_p = &__p;
      *(sub_2337F24C8(a1 + 632, &__p) + 56) = 32803;
      if (v27 < 0)
      {
        operator delete(__p);
      }

      sub_23372A488(&__p, "IFD0");
      p_p = &__p;
      v16 = sub_2337F24C8(a1 + 680, &__p);
      goto LABEL_42;
    }

    if (PixelFormatType == 1650943796)
    {
      sub_23372A488(&__p, "IFD0");
      p_p = &__p;
      *(sub_2337F24C8(a1 + 632, &__p) + 56) = 32803;
      if (v27 < 0)
      {
        operator delete(__p);
      }

      __src = 65794;
      sub_23372A488(&__p, "IFD0:EXIF");
      p_p = &__p;
      v13 = sub_23375E5EC(a1 + 992, &__p);
      sub_2337F22B8((v13 + 56), &__src, &__p, 4uLL);
      if (v27 < 0)
      {
        operator delete(__p);
      }

      goto LABEL_38;
    }
  }

  else
  {
    switch(PixelFormatType)
    {
      case 1734505012:
        sub_23372A488(&__p, "IFD0");
        p_p = &__p;
        *(sub_2337F24C8(a1 + 632, &__p) + 56) = 32803;
        if (v27 < 0)
        {
          operator delete(__p);
        }

        __src = 16777729;
        sub_23372A488(&__p, "IFD0:EXIF");
        p_p = &__p;
        v14 = sub_23375E5EC(a1 + 992, &__p);
        sub_2337F22B8((v14 + 56), &__src, &__p, 4uLL);
        if (v27 < 0)
        {
          operator delete(__p);
        }

        goto LABEL_38;
      case 1735549492:
        sub_23372A488(&__p, "IFD0");
        p_p = &__p;
        *(sub_2337F24C8(a1 + 632, &__p) + 56) = 32803;
        if (v27 < 0)
        {
          operator delete(__p);
        }

        __src = 16908289;
        sub_23372A488(&__p, "IFD0:EXIF");
        p_p = &__p;
        v15 = sub_23375E5EC(a1 + 992, &__p);
        sub_2337F22B8((v15 + 56), &__src, &__p, 4uLL);
        if (v27 < 0)
        {
          operator delete(__p);
        }

        goto LABEL_38;
      case 1919379252:
        sub_23372A488(&__p, "IFD0");
        p_p = &__p;
        *(sub_2337F24C8(a1 + 632, &__p) + 56) = 32803;
        if (v27 < 0)
        {
          operator delete(__p);
        }

        __src = 33620224;
        sub_23372A488(&__p, "IFD0:EXIF");
        p_p = &__p;
        v12 = sub_23375E5EC(a1 + 992, &__p);
        sub_2337F22B8((v12 + 56), &__src, &__p, 4uLL);
        if (v27 < 0)
        {
          operator delete(__p);
        }

LABEL_38:
        sub_23372A488(&__p, "IFD0");
        p_p = &__p;
        v16 = sub_2337F24C8(a1 + 680, &__p);
LABEL_42:
        v20 = 1;
        goto LABEL_43;
    }
  }

  sub_23372A488(&__p, "IFD0");
  p_p = &__p;
  *(sub_2337F24C8(a1 + 632, &__p) + 56) = 34892;
  if (v27 < 0)
  {
    operator delete(__p);
  }

  sub_23372A488(&__p, "IFD0");
  p_p = &__p;
  v16 = sub_2337F24C8(a1 + 680, &__p);
  v20 = 3;
LABEL_43:
  *(v16 + 56) = v20;
  if (v27 < 0)
  {
    operator delete(__p);
  }

  v21 = sub_2337EDB90(a2, a4, v17, v18, v19);
  v22 = *(a1 + 2512);
  *(a1 + 2512) = v21;

  *(a1 + 1234) = 3;
  return a1;
}

void sub_2337EDA94(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  sub_2337A715C(v16);
  _Unwind_Resume(a1);
}

id sub_2337EDB90(CVPixelBufferRef pixelBuffer, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  v74[1] = *MEMORY[0x277D85DE8];
  if ((a2 & 1) == 0)
  {
    v6 = objc_msgSend_imageWithCVPixelBuffer_(MEMORY[0x277CBF758], a2, pixelBuffer, a4, a5);
    if (v6)
    {
      goto LABEL_22;
    }
  }

  PixelFormatType = CVPixelBufferGetPixelFormatType(pixelBuffer);
  v6 = 0;
  if (PixelFormatType <= 1735549491)
  {
    if (PixelFormatType == 1278226742 || PixelFormatType == 1650943796)
    {
      goto LABEL_18;
    }

    v13 = 1734505012;
LABEL_17:
    if (PixelFormatType != v13)
    {
      goto LABEL_22;
    }

LABEL_18:
    arg = 0;
    v73 = *MEMORY[0x277CC4DE8];
    v74[0] = MEMORY[0x277CBEC10];
    v9 = objc_msgSend_dictionaryWithObjects_forKeys_count_(MEMORY[0x277CBEAC0], v8, v74, &v73, 1, 0);
    Width = CVPixelBufferGetWidth(pixelBuffer);
    Height = CVPixelBufferGetHeight(pixelBuffer);
    if (!CVPixelBufferCreate(*MEMORY[0x277CBECE8], Width, Height, 0x4C303136u, v9, &arg))
    {
      CFAutorelease(arg);
      if (!CVPixelBufferLockBaseAddress(pixelBuffer, 1uLL) && !CVPixelBufferLockBaseAddress(arg, 0))
      {
        BaseAddress = CVPixelBufferGetBaseAddress(pixelBuffer);
        v20 = CVPixelBufferGetBaseAddress(arg);
        v21 = CVPixelBufferGetHeight(pixelBuffer);
        BytesPerRow = CVPixelBufferGetBytesPerRow(pixelBuffer);
        v23 = CVPixelBufferGetBytesPerRow(arg);
        if (v21)
        {
          v24 = v23;
          do
          {
            memcpy(v20, BaseAddress, BytesPerRow);
            BaseAddress += BytesPerRow;
            v20 += v24;
            --v21;
          }

          while (v21);
        }

        CVPixelBufferUnlockBaseAddress(arg, 0);
        CVPixelBufferUnlockBaseAddress(pixelBuffer, 1uLL);
        v25 = MEMORY[0x277CBF758];
        v26 = arg;
        v71 = *MEMORY[0x277CBFA40];
        v31 = objc_msgSend_null(MEMORY[0x277CBEB68], v27, v28, v29, v30);
        v72 = v31;
        v33 = objc_msgSend_dictionaryWithObjects_forKeys_count_(MEMORY[0x277CBEAC0], v32, &v72, &v71, 1);
        v6 = objc_msgSend_imageWithCVPixelBuffer_options_(v25, v34, v26, v33, v35);

        goto LABEL_22;
      }
    }

    goto LABEL_21;
  }

  if (PixelFormatType > 1815491697)
  {
    if (PixelFormatType == 1815491698)
    {
      arg = 0;
      v69 = *MEMORY[0x277CC4DE8];
      v70 = MEMORY[0x277CBEC10];
      v9 = objc_msgSend_dictionaryWithObjects_forKeys_count_(MEMORY[0x277CBEAC0], v8, &v70, &v69, 1);
      v17 = CVPixelBufferGetWidth(pixelBuffer);
      v18 = CVPixelBufferGetHeight(pixelBuffer);
      if (!CVPixelBufferCreate(*MEMORY[0x277CBECE8], v17, v18, 0x6C363472u, v9, &arg))
      {
        CFAutorelease(arg);
        if (!CVPixelBufferLockBaseAddress(pixelBuffer, 1uLL) && !CVPixelBufferLockBaseAddress(arg, 0))
        {
          v36 = CVPixelBufferGetBaseAddress(pixelBuffer);
          v37 = CVPixelBufferGetBaseAddress(arg);
          v38 = CVPixelBufferGetHeight(pixelBuffer);
          v39 = CVPixelBufferGetBytesPerRow(pixelBuffer);
          v40 = CVPixelBufferGetBytesPerRow(arg);
          if (v38)
          {
            v41 = v40;
            do
            {
              memcpy(v37, v36, v39);
              v36 += v39;
              v37 += v41;
              --v38;
            }

            while (v38);
          }

          CVPixelBufferUnlockBaseAddress(arg, 0);
          CVPixelBufferUnlockBaseAddress(pixelBuffer, 1uLL);
          v42 = MEMORY[0x277CBF758];
          v43 = arg;
          v67 = *MEMORY[0x277CBFA40];
          v68 = sub_2338F28E4();
          v45 = objc_msgSend_dictionaryWithObjects_forKeys_count_(MEMORY[0x277CBEAC0], v44, &v68, &v67, 1);
          v6 = objc_msgSend_imageWithCVPixelBuffer_options_(v42, v46, v43, v45, v47);

          goto LABEL_22;
        }
      }

LABEL_21:

      v6 = 0;
      goto LABEL_22;
    }

    v13 = 1919379252;
    goto LABEL_17;
  }

  if (PixelFormatType == 1735549492)
  {
    goto LABEL_18;
  }

  if (PixelFormatType != 1751527984)
  {
    goto LABEL_22;
  }

  arg = 0;
  v65 = *MEMORY[0x277CC4DE8];
  v66 = MEMORY[0x277CBEC10];
  v9 = objc_msgSend_dictionaryWithObjects_forKeys_count_(MEMORY[0x277CBEAC0], v8, &v66, &v65, 1);
  v10 = CVPixelBufferGetWidth(pixelBuffer);
  v11 = CVPixelBufferGetHeight(pixelBuffer);
  if (CVPixelBufferCreate(*MEMORY[0x277CBECE8], v10, v11, 0x68663230u, v9, &arg))
  {
    goto LABEL_21;
  }

  CFAutorelease(arg);
  PlaneCount = CVPixelBufferGetPlaneCount(pixelBuffer);
  if (PlaneCount != CVPixelBufferGetPlaneCount(arg))
  {
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  if (CVPixelBufferLockBaseAddress(pixelBuffer, 1uLL) || CVPixelBufferLockBaseAddress(arg, 0))
  {
    goto LABEL_21;
  }

  if (PlaneCount)
  {
    for (i = 0; i != PlaneCount; ++i)
    {
      BaseAddressOfPlane = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, i);
      v50 = CVPixelBufferGetBaseAddressOfPlane(arg, i);
      HeightOfPlane = CVPixelBufferGetHeightOfPlane(pixelBuffer, i);
      BytesPerRowOfPlane = CVPixelBufferGetBytesPerRowOfPlane(pixelBuffer, i);
      v53 = CVPixelBufferGetBytesPerRowOfPlane(arg, i);
      if (HeightOfPlane)
      {
        v54 = v53;
        do
        {
          memcpy(v50, BaseAddressOfPlane, BytesPerRowOfPlane);
          BaseAddressOfPlane += BytesPerRowOfPlane;
          v50 += v54;
          --HeightOfPlane;
        }

        while (HeightOfPlane);
      }
    }
  }

  CVPixelBufferUnlockBaseAddress(arg, 0);
  CVPixelBufferUnlockBaseAddress(pixelBuffer, 1uLL);
  v55 = MEMORY[0x277CBF758];
  v56 = arg;
  v63 = *MEMORY[0x277CBFA40];
  v64 = sub_2338F28E4();
  v58 = objc_msgSend_dictionaryWithObjects_forKeys_count_(MEMORY[0x277CBEAC0], v57, &v64, &v63, 1);
  v6 = objc_msgSend_imageWithCVPixelBuffer_options_(v55, v59, v56, v58, v60);

LABEL_22:

  return v6;
}

void sub_2337EE2CC(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  v780 = *MEMORY[0x277D85DE8];
  v691 = objc_msgSend_objectForKeyedSubscript_(*(a1 + 2504), a2, @"{Exif}", a4, a5);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  v8 = objc_msgSend_objectForKeyedSubscript_(v691, v5, @"ApertureValue", v6, v7);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    objc_msgSend_doubleValue(v8, v9, v10, v11, v12);
    v14 = v13;
    sub_23372A488(&__p, "IFD0:EXIF");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 360, &__p) + 56) = v14;
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v18 = objc_msgSend_objectForKeyedSubscript_(v691, v15, @"FNumber", v16, v17);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    objc_msgSend_doubleValue(v18, v19, v20, v21, v22);
    v24 = v23;
    sub_23372A488(&__p, "IFD0:EXIF");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 336, &__p) + 56) = v24;
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v28 = objc_msgSend_objectForKeyedSubscript_(v691, v25, @"ExposureTime", v26, v27);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    objc_msgSend_doubleValue(v28, v29, v30, v31, v32);
    v34 = v33;
    sub_23372A488(&__p, "IFD0:EXIF");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 288, &__p) + 56) = v34;
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v38 = objc_msgSend_objectForKeyedSubscript_(v691, v35, @"ISOSpeedRatings", v36, v37);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && (objc_msgSend_count(v38, v39, v40, v41, v42) == 1 || objc_msgSend_count(v38, v43, v44, v45, v46) == 2))
  {
    __p = 0uLL;
    *&v764 = 0;
    v751 = 0u;
    v752 = 0u;
    v753 = 0u;
    v754 = 0u;
    v688 = v38;
    v47 = v38;
    v49 = objc_msgSend_countByEnumeratingWithState_objects_count_(v47, v48, &v751, v779, 16);
    if (v49)
    {
      v50 = *v752;
      do
      {
        for (i = 0; i != v49; ++i)
        {
          if (*v752 != v50)
          {
            objc_enumerationMutation(v47);
          }

          v52 = *(*(&v751 + 1) + 8 * i);
          objc_opt_class();
          if ((objc_opt_isKindOfClass() & 1) == 0)
          {
            v104 = __cxa_allocate_exception(0x10uLL);
            MEMORY[0x2383ABCE0](v104, "RawCameraException");
            __cxa_throw(v104, MEMORY[0x277D82760], MEMORY[0x277D82600]);
          }

          v57 = objc_msgSend_unsignedIntValue(v52, v53, v54, v55, v56);
          v59 = *(&__p + 1);
          if (*(&__p + 1) >= v764)
          {
            v61 = __p;
            v62 = *(&__p + 1) - __p;
            v63 = (*(&__p + 1) - __p) >> 2;
            v64 = v63 + 1;
            if ((v63 + 1) >> 62)
            {
              sub_2337235BC();
            }

            v65 = v764 - __p;
            if ((v764 - __p) >> 1 > v64)
            {
              v64 = v65 >> 1;
            }

            if (v65 >= 0x7FFFFFFFFFFFFFFCLL)
            {
              v66 = 0x3FFFFFFFFFFFFFFFLL;
            }

            else
            {
              v66 = v64;
            }

            if (v66)
            {
              sub_2337235D4(&__p, v66);
            }

            *(4 * v63) = v57;
            v60 = 4 * v63 + 4;
            memcpy(0, v61, v62);
            v67 = __p;
            *&__p = 0;
            *(&__p + 1) = v60;
            *&v764 = 0;
            if (v67)
            {
              operator delete(v67);
            }
          }

          else
          {
            **(&__p + 1) = v57;
            v60 = v59 + 4;
          }

          *(&__p + 1) = v60;
        }

        v49 = objc_msgSend_countByEnumeratingWithState_objects_count_(v47, v58, &v751, v779, 16);
      }

      while (v49);
    }

    sub_23372A488(&v777, "IFD0:EXIF");
    __src = &v777;
    v38 = v688;
    v68 = (sub_23375E5EC(a1 + 192, &v777) + 56);
    if (v68 != &__p)
    {
      sub_233723454(v68, __p, *(&__p + 1), (*(&__p + 1) - __p) >> 2);
    }

    if (SHIBYTE(v778) < 0)
    {
      operator delete(v777);
    }

    if (__p)
    {
      *(&__p + 1) = __p;
      operator delete(__p);
    }
  }

  v72 = objc_msgSend_objectForKeyedSubscript_(v691, v69, @"CFAPattern", v70, v71);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    memset(v750, 0, sizeof(v750));
    v73 = v72;
    if (objc_msgSend_countByEnumeratingWithState_objects_count_(v73, v74, v750, v776, 16))
    {
      v75 = *v750[1];
      objc_opt_class();
      if (objc_opt_isKindOfClass())
      {
        objc_msgSend_unsignedCharValue(v75, v76, v77, v78, v79);
        operator new();
      }

      v103 = __cxa_allocate_exception(0x10uLL);
      MEMORY[0x2383ABCE0](v103, "RawCameraException");
      __cxa_throw(v103, MEMORY[0x277D82760], MEMORY[0x277D82600]);
    }

    sub_23372A488(&__p, "IFD0:EXIF");
    *&v777 = &__p;
    v80 = sub_23375E5EC(a1 + 992, &__p);
    sub_2337550A4((v80 + 56), 0, 0, 0);
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v692 = objc_msgSend_objectForKeyedSubscript_(*(a1 + 2504), v81, @"{DNG}", v82, v83);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v684 = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](v684, "RawCameraException");
    __cxa_throw(v684, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  v87 = objc_msgSend_objectForKeyedSubscript_(v692, v84, @"ActiveArea", v85, v86);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v87, v88, v89, v90, v91) == 4)
  {
    v748 = 0u;
    v749 = 0u;
    v746 = 0u;
    v747 = 0u;
    v92 = v87;
    v95 = objc_msgSend_countByEnumeratingWithState_objects_count_(v92, v93, &v746, v775, 16);
    if (v95)
    {
      v96 = *v747;
      isKindOfClass = 1;
      do
      {
        for (j = 0; j != v95; ++j)
        {
          if (*v747 != v96)
          {
            objc_enumerationMutation(v92);
          }

          if (isKindOfClass)
          {
            objc_opt_class();
            isKindOfClass = objc_opt_isKindOfClass();
          }

          else
          {
            isKindOfClass = 0;
          }
        }

        v95 = objc_msgSend_countByEnumeratingWithState_objects_count_(v92, v94, &v746, v775, 16);
      }

      while (v95);

      if ((isKindOfClass & 1) == 0)
      {
        v102 = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](v102, "RawCameraException");
        __cxa_throw(v102, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }
    }

    else
    {
    }

    v685 = objc_msgSend_objectAtIndexedSubscript_(v92, v99, 1, v100, v101);
    v687 = objc_msgSend_intValue(v685, v105, v106, v107, v108);
    v689 = objc_msgSend_objectAtIndexedSubscript_(v92, v109, 0, v110, v111);
    v116 = objc_msgSend_intValue(v689, v112, v113, v114, v115);
    v686 = objc_msgSend_objectAtIndexedSubscript_(v92, v117, 3, v118, v119);
    v124 = objc_msgSend_intValue(v686, v120, v121, v122, v123);
    v128 = objc_msgSend_objectAtIndexedSubscript_(v92, v125, 1, v126, v127);
    v133 = objc_msgSend_intValue(v128, v129, v130, v131, v132);
    v137 = objc_msgSend_objectAtIndexedSubscript_(v92, v134, 2, v135, v136);
    v142 = objc_msgSend_intValue(v137, v138, v139, v140, v141);
    v146 = objc_msgSend_objectAtIndexedSubscript_(v92, v143, 0, v144, v145);
    v151 = objc_msgSend_intValue(v146, v147, v148, v149, v150);
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    v152 = sub_2337F2574(a1 + 1408, &__p);
    v152[14] = v687;
    v152[15] = v116;
    v152[16] = v124 - v133;
    v152[17] = v142 - v151;
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v156 = objc_msgSend_objectForKeyedSubscript_(v692, v153, @"DefaultCropOrigin", v154, v155);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v156, v157, v158, v159, v160) == 2)
  {
    v744 = 0u;
    v745 = 0u;
    v742 = 0u;
    v743 = 0u;
    v161 = v156;
    v164 = objc_msgSend_countByEnumeratingWithState_objects_count_(v161, v162, &v742, v774, 16);
    if (v164)
    {
      v165 = *v743;
      v166 = 1;
      do
      {
        for (k = 0; k != v164; ++k)
        {
          if (*v743 != v165)
          {
            objc_enumerationMutation(v161);
          }

          if (v166)
          {
            objc_opt_class();
            v166 = objc_opt_isKindOfClass();
          }

          else
          {
            v166 = 0;
          }
        }

        v164 = objc_msgSend_countByEnumeratingWithState_objects_count_(v161, v163, &v742, v774, 16);
      }

      while (v164);

      if ((v166 & 1) == 0)
      {
        v171 = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](v171, "RawCameraException");
        __cxa_throw(v171, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }
    }

    else
    {
    }

    v172 = objc_msgSend_objectAtIndexedSubscript_(v161, v168, 0, v169, v170);
    v177 = objc_msgSend_intValue(v172, v173, v174, v175, v176);
    v181 = objc_msgSend_objectAtIndexedSubscript_(v161, v178, 1, v179, v180);
    v186 = objc_msgSend_intValue(v181, v182, v183, v184, v185);
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 1336, &__p) + 56) = v177 | (v186 << 32);
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v190 = objc_msgSend_objectForKeyedSubscript_(v692, v187, @"DefaultCropSize", v188, v189);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v190, v191, v192, v193, v194) == 2)
  {
    v740 = 0u;
    v741 = 0u;
    v738 = 0u;
    v739 = 0u;
    v195 = v190;
    v198 = objc_msgSend_countByEnumeratingWithState_objects_count_(v195, v196, &v738, v773, 16);
    if (v198)
    {
      v199 = *v739;
      v200 = 1;
      do
      {
        for (m = 0; m != v198; ++m)
        {
          if (*v739 != v199)
          {
            objc_enumerationMutation(v195);
          }

          if (v200)
          {
            objc_opt_class();
            v200 = objc_opt_isKindOfClass();
          }

          else
          {
            v200 = 0;
          }
        }

        v198 = objc_msgSend_countByEnumeratingWithState_objects_count_(v195, v197, &v738, v773, 16);
      }

      while (v198);

      if ((v200 & 1) == 0)
      {
        v205 = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](v205, "RawCameraException");
        __cxa_throw(v205, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }
    }

    else
    {
    }

    v206 = objc_msgSend_objectAtIndexedSubscript_(v195, v202, 0, v203, v204);
    v211 = objc_msgSend_intValue(v206, v207, v208, v209, v210);
    v215 = objc_msgSend_objectAtIndexedSubscript_(v195, v212, 1, v213, v214);
    v220 = objc_msgSend_intValue(v215, v216, v217, v218, v219);
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 1360, &__p) + 56) = v211 | (v220 << 32);
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v224 = objc_msgSend_objectForKeyedSubscript_(v692, v221, @"DefaultCropScale", v222, v223);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v224, v225, v226, v227, v228) == 2)
  {
    v736 = 0u;
    v737 = 0u;
    v734 = 0u;
    v735 = 0u;
    v229 = v224;
    v232 = objc_msgSend_countByEnumeratingWithState_objects_count_(v229, v230, &v734, v772, 16);
    if (v232)
    {
      v233 = *v735;
      v234 = 1;
      do
      {
        for (n = 0; n != v232; ++n)
        {
          if (*v735 != v233)
          {
            objc_enumerationMutation(v229);
          }

          if (v234)
          {
            objc_opt_class();
            v234 = objc_opt_isKindOfClass();
          }

          else
          {
            v234 = 0;
          }
        }

        v232 = objc_msgSend_countByEnumeratingWithState_objects_count_(v229, v231, &v734, v772, 16);
      }

      while (v232);

      if ((v234 & 1) == 0)
      {
        v239 = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](v239, "RawCameraException");
        __cxa_throw(v239, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }
    }

    else
    {
    }

    v240 = objc_msgSend_objectAtIndexedSubscript_(v229, v236, 0, v237, v238);
    v245 = objc_msgSend_intValue(v240, v241, v242, v243, v244);
    v249 = objc_msgSend_objectAtIndexedSubscript_(v229, v246, 1, v247, v248);
    v254 = objc_msgSend_intValue(v249, v250, v251, v252, v253);
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 1384, &__p) + 56) = v245 | (v254 << 32);
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v258 = objc_msgSend_objectForKeyedSubscript_(v692, v255, @"AnalogBalance", v256, v257);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v258, v259, v260, v261, v262) == 3)
  {
    __p = 0uLL;
    *&v764 = 0;
    v730 = 0u;
    v731 = 0u;
    v732 = 0u;
    v733 = 0u;
    v263 = v258;
    v265 = objc_msgSend_countByEnumeratingWithState_objects_count_(v263, v264, &v730, v771, 16);
    if (v265)
    {
      v266 = *v731;
      do
      {
        for (ii = 0; ii != v265; ++ii)
        {
          if (*v731 != v266)
          {
            objc_enumerationMutation(v263);
          }

          v268 = *(*(&v730 + 1) + 8 * ii);
          objc_opt_class();
          if ((objc_opt_isKindOfClass() & 1) == 0)
          {
            v673 = __cxa_allocate_exception(0x10uLL);
            MEMORY[0x2383ABCE0](v673, "RawCameraException");
            __cxa_throw(v673, MEMORY[0x277D82760], MEMORY[0x277D82600]);
          }

          objc_msgSend_doubleValue(v268, v269, v270, v271, v272);
          *&v777 = v273;
          sub_2337F207C(&__p, &v777);
        }

        v265 = objc_msgSend_countByEnumeratingWithState_objects_count_(v263, v274, &v730, v771, 16);
      }

      while (v265);
    }

    sub_23372A488(&v777, "IFD0");
    __src = &v777;
    v275 = (sub_23375E520(a1 + 1864, &v777) + 56);
    if (v275 != &__p)
    {
      sub_23373176C(v275, __p, *(&__p + 1), (*(&__p + 1) - __p) >> 3);
    }

    if (SHIBYTE(v778) < 0)
    {
      operator delete(v777);
    }

    v276 = __p;
    if (__p)
    {
      *(&__p + 1) = __p;
LABEL_139:
      operator delete(v276);
    }
  }

  else
  {
    *&v764 = 0x3FF0000000000000;
    __p = xmmword_233907B08;
    sub_23372A488(&v777, "IFD0");
    __src = &v777;
    v277 = sub_23375E520(a1 + 1864, &v777);
    sub_233755258((v277 + 56), &__p, &v764 + 8, 3uLL);
    if (SHIBYTE(v778) < 0)
    {
      v276 = v777;
      goto LABEL_139;
    }
  }

  v281 = objc_msgSend_objectForKeyedSubscript_(v692, v278, @"AsShotNeutral", v279, v280);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v281, v282, v283, v284, v285) == 3)
  {
    __p = 0uLL;
    *&v764 = 0;
    v726 = 0u;
    v727 = 0u;
    v728 = 0u;
    v729 = 0u;
    v286 = v281;
    v288 = objc_msgSend_countByEnumeratingWithState_objects_count_(v286, v287, &v726, v770, 16);
    if (v288)
    {
      v289 = *v727;
      do
      {
        for (jj = 0; jj != v288; ++jj)
        {
          if (*v727 != v289)
          {
            objc_enumerationMutation(v286);
          }

          v291 = *(*(&v726 + 1) + 8 * jj);
          objc_opt_class();
          if ((objc_opt_isKindOfClass() & 1) == 0)
          {
            v674 = __cxa_allocate_exception(0x10uLL);
            MEMORY[0x2383ABCE0](v674, "RawCameraException");
            __cxa_throw(v674, MEMORY[0x277D82760], MEMORY[0x277D82600]);
          }

          objc_msgSend_doubleValue(v291, v292, v293, v294, v295);
          *&v777 = v296;
          sub_2337F207C(&__p, &v777);
        }

        v288 = objc_msgSend_countByEnumeratingWithState_objects_count_(v286, v297, &v726, v770, 16);
      }

      while (v288);
    }

    if ((a1 + 1248) != &__p)
    {
      sub_23373176C((a1 + 1248), __p, *(&__p + 1), (*(&__p + 1) - __p) >> 3);
    }

    if (__p)
    {
      *(&__p + 1) = __p;
      operator delete(__p);
    }
  }

  else
  {
    *&v764 = 0x3FF0000000000000;
    __p = xmmword_233907B08;
    sub_233755258((a1 + 1248), &__p, &v764 + 8, 3uLL);
  }

  v301 = objc_msgSend_objectForKeyedSubscript_(v692, v298, @"AntiAliasStrength", v299, v300);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    objc_msgSend_doubleValue(v301, v302, v303, v304, v305);
    v307 = v306;
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 1528, &__p) + 56) = v307;
  }

  else
  {
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 1528, &__p) + 56) = 0x3FF0000000000000;
  }

  if (SBYTE7(v764) < 0)
  {
    operator delete(__p);
  }

  v311 = objc_msgSend_objectForKeyedSubscript_(v692, v308, @"BaselineExposure", v309, v310);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    objc_msgSend_doubleValue(v311, v312, v313, v314, v315);
    v317 = v316;
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 1888, &__p) + 56) = v317;
  }

  else
  {
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_23377BB60(a1 + 1888, &__p) + 56) = 0;
  }

  if (SBYTE7(v764) < 0)
  {
    operator delete(__p);
  }

  v321 = objc_msgSend_objectForKeyedSubscript_(v692, v318, @"BlackLevel", v319, v320);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v334 = objc_msgSend_objectForKeyedSubscript_(v692, v322, @"BlackLevel", v324, v325);
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      __p = 0uLL;
      *&v764 = 0;
      v721 = 0u;
      v722 = 0u;
      v723 = 0u;
      v724 = 0u;
      v335 = v334;
      v337 = objc_msgSend_countByEnumeratingWithState_objects_count_(v335, v336, &v721, v766, 16);
      if (v337)
      {
        v338 = *v722;
        do
        {
          for (kk = 0; kk != v337; ++kk)
          {
            if (*v722 != v338)
            {
              objc_enumerationMutation(v335);
            }

            v340 = *(*(&v721 + 1) + 8 * kk);
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) == 0)
            {
              v675 = __cxa_allocate_exception(0x10uLL);
              MEMORY[0x2383ABCE0](v675, "RawCameraException");
              __cxa_throw(v675, MEMORY[0x277D82760], MEMORY[0x277D82600]);
            }

            objc_msgSend_doubleValue(v340, v341, v342, v343, v344);
            *&v777 = v345;
            sub_2337F207C(&__p, &v777);
          }

          v337 = objc_msgSend_countByEnumeratingWithState_objects_count_(v335, v346, &v721, v766, 16);
        }

        while (v337);
      }

      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v347 = (sub_23375E520(a1 + 264, &v777) + 56);
      if (v347 != &__p)
      {
        sub_23373176C(v347, __p, *(&__p + 1), (*(&__p + 1) - __p) >> 3);
      }

      if (SHIBYTE(v778) < 0)
      {
        operator delete(v777);
      }

      v348 = __p;
      if (!__p)
      {
        goto LABEL_191;
      }

      *(&__p + 1) = __p;
    }

    else
    {
      v764 = 0u;
      __p = 0u;
      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v349 = sub_23375E520(a1 + 264, &v777);
      sub_233755258((v349 + 56), &__p, v765, 4uLL);
      if ((SHIBYTE(v778) & 0x80000000) == 0)
      {
LABEL_191:

        goto LABEL_192;
      }

      v348 = v777;
    }

    operator delete(v348);
    goto LABEL_191;
  }

  objc_msgSend_doubleValue(v321, v322, v323, v324, v325);
  *&v777 = v326;
  sub_233731694(&__p, 4uLL);
  objc_msgSend_doubleValue(v321, v327, v328, v329, v330);
  v725 = v331;
  sub_233731694(&v777, 4uLL);
  sub_23372A488(&__src, "IFD0");
  p_src = &__src;
  v332 = sub_23375E520(a1 + 264, &__src);
  v333 = v332[7];
  if (v333)
  {
    v332[8] = v333;
    operator delete(v333);
    v332[7] = 0;
    v332[8] = 0;
    v332[9] = 0;
  }

  *(v332 + 7) = v777;
  v332[9] = v778;
  v778 = 0;
  v777 = 0uLL;
  if (v769 < 0)
  {
    operator delete(__src);
    if (v777)
    {
      *(&v777 + 1) = v777;
      operator delete(v777);
    }
  }

  if (__p)
  {
    *(&__p + 1) = __p;
    operator delete(__p);
  }

LABEL_192:

  v353 = objc_msgSend_objectForKeyedSubscript_(v692, v350, @"WhiteLevel", v351, v352);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v360 = objc_msgSend_objectForKeyedSubscript_(v692, v354, @"WhiteLevel", v356, v357);
    objc_opt_class();
    if (objc_opt_isKindOfClass())
    {
      __p = 0uLL;
      *&v764 = 0;
      v717 = 0u;
      v718 = 0u;
      v719 = 0u;
      v720 = 0u;
      v361 = v360;
      v363 = objc_msgSend_countByEnumeratingWithState_objects_count_(v361, v362, &v717, v762, 16);
      if (v363)
      {
        v364 = *v718;
        do
        {
          for (mm = 0; mm != v363; ++mm)
          {
            if (*v718 != v364)
            {
              objc_enumerationMutation(v361);
            }

            v366 = *(*(&v717 + 1) + 8 * mm);
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) == 0)
            {
              v676 = __cxa_allocate_exception(0x10uLL);
              MEMORY[0x2383ABCE0](v676, "RawCameraException");
              __cxa_throw(v676, MEMORY[0x277D82760], MEMORY[0x277D82600]);
            }

            objc_msgSend_doubleValue(v366, v367, v368, v369, v370);
            *&v777 = v371;
            sub_2337F207C(&__p, &v777);
          }

          v363 = objc_msgSend_countByEnumeratingWithState_objects_count_(v361, v372, &v717, v762, 16);
        }

        while (v363);
      }

      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v373 = (sub_23375E520(a1 + 240, &v777) + 56);
      if (v373 != &__p)
      {
        sub_23373176C(v373, __p, *(&__p + 1), (*(&__p + 1) - __p) >> 3);
      }

      if (SHIBYTE(v778) < 0)
      {
        operator delete(v777);
      }

      v374 = __p;
      if (!__p)
      {
        goto LABEL_213;
      }

      *(&__p + 1) = __p;
    }

    else
    {
      __p = xmmword_233907B20;
      *&v764 = 0x40EFFFE000000000;
      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v375 = sub_23375E520(a1 + 240, &v777);
      sub_233755258((v375 + 56), &__p, &v764 + 8, 3uLL);
      if ((SHIBYTE(v778) & 0x80000000) == 0)
      {
LABEL_213:

        goto LABEL_214;
      }

      v374 = v777;
    }

    operator delete(v374);
    goto LABEL_213;
  }

  objc_msgSend_doubleValue(v353, v354, v355, v356, v357);
  __src = v358;
  sub_23372A488(&__p, "IFD0");
  *&v777 = &__p;
  v359 = sub_23375E520(a1 + 240, &__p);
  sub_233755258((v359 + 56), &__src, &v768, 1uLL);
  if (SBYTE7(v764) < 0)
  {
    operator delete(__p);
  }

LABEL_214:

  v379 = objc_msgSend_objectForKeyedSubscript_(v692, v376, @"CalibrationIlluminant1", v377, v378);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v384 = objc_msgSend_unsignedShortValue(v379, v380, v381, v382, v383);
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_233786860(a1 + 1816, &__p) + 56) = v384;
  }

  else
  {
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_233786860(a1 + 1816, &__p) + 56) = 17;
  }

  if (SBYTE7(v764) < 0)
  {
    operator delete(__p);
  }

  v388 = objc_msgSend_objectForKeyedSubscript_(v692, v385, @"CalibrationIlluminant2", v386, v387);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v393 = objc_msgSend_unsignedShortValue(v388, v389, v390, v391, v392);
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_233786860(a1 + 1840, &__p) + 56) = v393;
  }

  else
  {
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    *(sub_233786860(a1 + 1840, &__p) + 56) = 21;
  }

  if (SBYTE7(v764) < 0)
  {
    operator delete(__p);
  }

  v397 = objc_msgSend_objectForKeyedSubscript_(v692, v394, @"UniqueCameraModel", v395, v396);
  objc_opt_class();
  if (objc_opt_isKindOfClass())
  {
    v398 = v397;
    v403 = objc_msgSend_UTF8String(v397, v399, v400, v401, v402);
    sub_23372A488(&__p, "IFD0");
    *&v777 = &__p;
    v404 = sub_2337F2620(a1 + 1312, &__p);
    sub_23372610C((v404 + 56), v403);
    if (SBYTE7(v764) < 0)
    {
      operator delete(__p);
    }
  }

  v408 = objc_msgSend_objectForKeyedSubscript_(v692, v405, @"ColorMatrix1", v406, v407);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || objc_msgSend_length(v408, v409, v410, v411, v412) != 36)
  {
    v421 = objc_msgSend_objectForKeyedSubscript_(v692, v409, @"ColorMatrix1", v411, v412);
    objc_opt_class();
    if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v421, v422, v423, v424, v425) == 9)
    {
      v777 = 0uLL;
      v778 = 0;
      v713 = 0u;
      v714 = 0u;
      v715 = 0u;
      v716 = 0u;
      v429 = v421;
      v431 = objc_msgSend_countByEnumeratingWithState_objects_count_(v429, v430, &v713, v761, 16);
      if (v431)
      {
        v432 = *v714;
        do
        {
          for (nn = 0; nn != v431; ++nn)
          {
            if (*v714 != v432)
            {
              objc_enumerationMutation(v429);
            }

            v434 = *(*(&v713 + 1) + 8 * nn);
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) == 0)
            {
              v679 = __cxa_allocate_exception(0x10uLL);
              MEMORY[0x2383ABCE0](v679, "RawCameraException");
              __cxa_throw(v679, MEMORY[0x277D82760], MEMORY[0x277D82600]);
            }

            objc_msgSend_doubleValue(v434, v435, v436, v437, v438);
            *&__p = v439;
            sub_2337F207C(&v777, &__p);
          }

          v431 = objc_msgSend_countByEnumeratingWithState_objects_count_(v429, v440, &v713, v761, 16);
        }

        while (v431);
      }

      sub_2337DFC24(&__p, 3, 3, &v777);
      sub_23372A488(&__src, "IFD0");
      p_src = &__src;
      v441 = sub_2337F26EC(a1 + 1624, &__src);
      sub_2337E004C((v441 + 56), &__p);
      if (v769 < 0)
      {
        operator delete(__src);
      }

      if (*(&__p + 1))
      {
        *&v764 = *(&__p + 1);
        operator delete(*(&__p + 1));
      }

      v442 = v777;
      if (!v777)
      {
        goto LABEL_258;
      }

      *(&v777 + 1) = v777;
    }

    else
    {
      sub_2337DF9CC(&__p, 3u, 3u, 1.0, v424, v425, v426, v427, v428, 0);
      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v443 = sub_2337F26EC(a1 + 1624, &v777);
      sub_2337E004C((v443 + 56), &__p);
      if (SHIBYTE(v778) < 0)
      {
        operator delete(v777);
      }

      v442 = *(&__p + 1);
      if (!*(&__p + 1))
      {
        goto LABEL_258;
      }

      *&v764 = *(&__p + 1);
    }

    operator delete(v442);
LABEL_258:

    goto LABEL_259;
  }

  v413 = v408;
  v418 = objc_msgSend_bytes(v408, v414, v415, v416, v417);
  v419 = 0;
  v777 = 0uLL;
  v778 = 0;
  do
  {
    *&__p = *(v418 + v419);
    sub_2337F207C(&v777, &__p);
    v419 += 4;
  }

  while (v419 != 36);
  sub_2337DFC24(&__p, 3, 3, &v777);
  sub_23372A488(&__src, "IFD0");
  p_src = &__src;
  v420 = sub_2337F26EC(a1 + 1624, &__src);
  sub_2337E004C((v420 + 56), &__p);
  if (v769 < 0)
  {
    operator delete(__src);
  }

  if (*(&__p + 1))
  {
    *&v764 = *(&__p + 1);
    operator delete(*(&__p + 1));
  }

  if (v777)
  {
    *(&v777 + 1) = v777;
    operator delete(v777);
  }

LABEL_259:

  v447 = objc_msgSend_objectForKeyedSubscript_(v692, v444, @"ColorMatrix2", v445, v446);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || objc_msgSend_length(v447, v448, v449, v450, v451) != 36)
  {
    v460 = objc_msgSend_objectForKeyedSubscript_(v692, v448, @"ColorMatrix2", v450, v451);
    objc_opt_class();
    if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v460, v461, v462, v463, v464) == 9)
    {
      v777 = 0uLL;
      v778 = 0;
      v709 = 0u;
      v710 = 0u;
      v711 = 0u;
      v712 = 0u;
      v468 = v460;
      v470 = objc_msgSend_countByEnumeratingWithState_objects_count_(v468, v469, &v709, v760, 16);
      if (v470)
      {
        v471 = *v710;
        do
        {
          for (i1 = 0; i1 != v470; ++i1)
          {
            if (*v710 != v471)
            {
              objc_enumerationMutation(v468);
            }

            v473 = *(*(&v709 + 1) + 8 * i1);
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) == 0)
            {
              v680 = __cxa_allocate_exception(0x10uLL);
              MEMORY[0x2383ABCE0](v680, "RawCameraException");
              __cxa_throw(v680, MEMORY[0x277D82760], MEMORY[0x277D82600]);
            }

            objc_msgSend_doubleValue(v473, v474, v475, v476, v477);
            *&__p = v478;
            sub_2337F207C(&v777, &__p);
          }

          v470 = objc_msgSend_countByEnumeratingWithState_objects_count_(v468, v479, &v709, v760, 16);
        }

        while (v470);
      }

      sub_2337DFC24(&__p, 3, 3, &v777);
      sub_23372A488(&__src, "IFD0");
      p_src = &__src;
      v480 = sub_2337F26EC(a1 + 1648, &__src);
      sub_2337E004C((v480 + 56), &__p);
      if (v769 < 0)
      {
        operator delete(__src);
      }

      if (*(&__p + 1))
      {
        *&v764 = *(&__p + 1);
        operator delete(*(&__p + 1));
      }

      v481 = v777;
      if (!v777)
      {
        goto LABEL_290;
      }

      *(&v777 + 1) = v777;
    }

    else
    {
      sub_2337DF9CC(&__p, 3u, 3u, 1.0, v463, v464, v465, v466, v467, 0);
      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v482 = sub_2337F26EC(a1 + 1648, &v777);
      sub_2337E004C((v482 + 56), &__p);
      if (SHIBYTE(v778) < 0)
      {
        operator delete(v777);
      }

      v481 = *(&__p + 1);
      if (!*(&__p + 1))
      {
        goto LABEL_290;
      }

      *&v764 = *(&__p + 1);
    }

    operator delete(v481);
LABEL_290:

    goto LABEL_291;
  }

  v452 = v447;
  v457 = objc_msgSend_bytes(v447, v453, v454, v455, v456);
  v458 = 0;
  v777 = 0uLL;
  v778 = 0;
  do
  {
    *&__p = *(v457 + v458);
    sub_2337F207C(&v777, &__p);
    v458 += 4;
  }

  while (v458 != 36);
  sub_2337DFC24(&__p, 3, 3, &v777);
  sub_23372A488(&__src, "IFD0");
  p_src = &__src;
  v459 = sub_2337F26EC(a1 + 1648, &__src);
  sub_2337E004C((v459 + 56), &__p);
  if (v769 < 0)
  {
    operator delete(__src);
  }

  if (*(&__p + 1))
  {
    *&v764 = *(&__p + 1);
    operator delete(*(&__p + 1));
  }

  if (v777)
  {
    *(&v777 + 1) = v777;
    operator delete(v777);
  }

LABEL_291:

  v486 = objc_msgSend_objectForKeyedSubscript_(v692, v483, @"ForwardMatrix1", v484, v485);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || objc_msgSend_length(v486, v487, v488, v489, v490) != 36)
  {
    v499 = objc_msgSend_objectForKeyedSubscript_(v692, v487, @"ForwardMatrix1", v489, v490);
    objc_opt_class();
    if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v499, v500, v501, v502, v503) == 9)
    {
      v777 = 0uLL;
      v778 = 0;
      v705 = 0u;
      v706 = 0u;
      v707 = 0u;
      v708 = 0u;
      v507 = v499;
      v509 = objc_msgSend_countByEnumeratingWithState_objects_count_(v507, v508, &v705, v759, 16);
      if (v509)
      {
        v510 = *v706;
        do
        {
          for (i2 = 0; i2 != v509; ++i2)
          {
            if (*v706 != v510)
            {
              objc_enumerationMutation(v507);
            }

            v512 = *(*(&v705 + 1) + 8 * i2);
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) == 0)
            {
              v681 = __cxa_allocate_exception(0x10uLL);
              MEMORY[0x2383ABCE0](v681, "RawCameraException");
              __cxa_throw(v681, MEMORY[0x277D82760], MEMORY[0x277D82600]);
            }

            objc_msgSend_doubleValue(v512, v513, v514, v515, v516);
            *&__p = v517;
            sub_2337F207C(&v777, &__p);
          }

          v509 = objc_msgSend_countByEnumeratingWithState_objects_count_(v507, v518, &v705, v759, 16);
        }

        while (v509);
      }

      sub_2337DFC24(&__p, 3, 3, &v777);
      sub_23372A488(&__src, "IFD0");
      p_src = &__src;
      v519 = sub_2337F26EC(a1 + 1768, &__src);
      sub_2337E004C((v519 + 56), &__p);
      if (v769 < 0)
      {
        operator delete(__src);
      }

      if (*(&__p + 1))
      {
        *&v764 = *(&__p + 1);
        operator delete(*(&__p + 1));
      }

      v520 = v777;
      if (!v777)
      {
        goto LABEL_322;
      }

      *(&v777 + 1) = v777;
    }

    else
    {
      sub_2337DF9CC(&__p, 3u, 3u, 1.0, v502, v503, v504, v505, v506, 0);
      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v521 = sub_2337F26EC(a1 + 1768, &v777);
      sub_2337E004C((v521 + 56), &__p);
      if (SHIBYTE(v778) < 0)
      {
        operator delete(v777);
      }

      v520 = *(&__p + 1);
      if (!*(&__p + 1))
      {
        goto LABEL_322;
      }

      *&v764 = *(&__p + 1);
    }

    operator delete(v520);
LABEL_322:

    goto LABEL_323;
  }

  v491 = v486;
  v496 = objc_msgSend_bytes(v486, v492, v493, v494, v495);
  v497 = 0;
  v777 = 0uLL;
  v778 = 0;
  do
  {
    *&__p = *(v496 + v497);
    sub_2337F207C(&v777, &__p);
    v497 += 4;
  }

  while (v497 != 36);
  sub_2337DFC24(&__p, 3, 3, &v777);
  sub_23372A488(&__src, "IFD0");
  p_src = &__src;
  v498 = sub_2337F26EC(a1 + 1768, &__src);
  sub_2337E004C((v498 + 56), &__p);
  if (v769 < 0)
  {
    operator delete(__src);
  }

  if (*(&__p + 1))
  {
    *&v764 = *(&__p + 1);
    operator delete(*(&__p + 1));
  }

  if (v777)
  {
    *(&v777 + 1) = v777;
    operator delete(v777);
  }

LABEL_323:

  v525 = objc_msgSend_objectForKeyedSubscript_(v692, v522, @"ForwardMatrix2", v523, v524);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0 || objc_msgSend_length(v525, v526, v527, v528, v529) != 36)
  {
    v538 = objc_msgSend_objectForKeyedSubscript_(v692, v526, @"ForwardMatrix2", v528, v529);
    objc_opt_class();
    if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v538, v539, v540, v541, v542) == 9)
    {
      v777 = 0uLL;
      v778 = 0;
      v701 = 0u;
      v702 = 0u;
      v703 = 0u;
      v704 = 0u;
      v546 = v538;
      v548 = objc_msgSend_countByEnumeratingWithState_objects_count_(v546, v547, &v701, v758, 16);
      if (v548)
      {
        v549 = *v702;
        do
        {
          for (i3 = 0; i3 != v548; ++i3)
          {
            if (*v702 != v549)
            {
              objc_enumerationMutation(v546);
            }

            v551 = *(*(&v701 + 1) + 8 * i3);
            objc_opt_class();
            if ((objc_opt_isKindOfClass() & 1) == 0)
            {
              v682 = __cxa_allocate_exception(0x10uLL);
              MEMORY[0x2383ABCE0](v682, "RawCameraException");
              __cxa_throw(v682, MEMORY[0x277D82760], MEMORY[0x277D82600]);
            }

            objc_msgSend_doubleValue(v551, v552, v553, v554, v555);
            *&__p = v556;
            sub_2337F207C(&v777, &__p);
          }

          v548 = objc_msgSend_countByEnumeratingWithState_objects_count_(v546, v557, &v701, v758, 16);
        }

        while (v548);
      }

      sub_2337DFC24(&__p, 3, 3, &v777);
      sub_23372A488(&__src, "IFD0");
      p_src = &__src;
      v558 = sub_2337F26EC(a1 + 1792, &__src);
      sub_2337E004C((v558 + 56), &__p);
      if (v769 < 0)
      {
        operator delete(__src);
      }

      if (*(&__p + 1))
      {
        *&v764 = *(&__p + 1);
        operator delete(*(&__p + 1));
      }

      v559 = v777;
      if (!v777)
      {
        goto LABEL_354;
      }

      *(&v777 + 1) = v777;
    }

    else
    {
      sub_2337DF9CC(&__p, 3u, 3u, 1.0, v541, v542, v543, v544, v545, 0);
      sub_23372A488(&v777, "IFD0");
      __src = &v777;
      v560 = sub_2337F26EC(a1 + 1792, &v777);
      sub_2337E004C((v560 + 56), &__p);
      if (SHIBYTE(v778) < 0)
      {
        operator delete(v777);
      }

      v559 = *(&__p + 1);
      if (!*(&__p + 1))
      {
        goto LABEL_354;
      }

      *&v764 = *(&__p + 1);
    }

    operator delete(v559);
LABEL_354:

    goto LABEL_355;
  }

  v530 = v525;
  v535 = objc_msgSend_bytes(v525, v531, v532, v533, v534);
  v536 = 0;
  v777 = 0uLL;
  v778 = 0;
  do
  {
    *&__p = *(v535 + v536);
    sub_2337F207C(&v777, &__p);
    v536 += 4;
  }

  while (v536 != 36);
  sub_2337DFC24(&__p, 3, 3, &v777);
  sub_23372A488(&__src, "IFD0");
  p_src = &__src;
  v537 = sub_2337F26EC(a1 + 1792, &__src);
  sub_2337E004C((v537 + 56), &__p);
  if (v769 < 0)
  {
    operator delete(__src);
  }

  if (*(&__p + 1))
  {
    *&v764 = *(&__p + 1);
    operator delete(*(&__p + 1));
  }

  if (v777)
  {
    *(&v777 + 1) = v777;
    operator delete(v777);
  }

LABEL_355:

  v564 = objc_msgSend_objectForKeyedSubscript_(v692, v561, @"BaselineNoise", v562, v563);
  objc_opt_class();
  v565 = objc_opt_isKindOfClass();
  v570 = 1.0;
  if (v565)
  {
    objc_msgSend_doubleValue(v564, v566, v567, v568, v569, 1.0);
  }

  *(a1 + 1912) = v570;

  v574 = objc_msgSend_objectForKeyedSubscript_(v692, v571, @"NoiseProfile", v572, v573);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v574, v575, v576, v577, v578) == 2)
  {
    __p = 0uLL;
    *&v764 = 0;
    v697 = 0u;
    v698 = 0u;
    v699 = 0u;
    v700 = 0u;
    v579 = v574;
    v581 = objc_msgSend_countByEnumeratingWithState_objects_count_(v579, v580, &v697, v757, 16);
    if (v581)
    {
      v582 = *v698;
      do
      {
        for (i4 = 0; i4 != v581; ++i4)
        {
          if (*v698 != v582)
          {
            objc_enumerationMutation(v579);
          }

          v584 = *(*(&v697 + 1) + 8 * i4);
          objc_opt_class();
          if ((objc_opt_isKindOfClass() & 1) == 0)
          {
            v677 = __cxa_allocate_exception(0x10uLL);
            MEMORY[0x2383ABCE0](v677, "RawCameraException");
            __cxa_throw(v677, MEMORY[0x277D82760], MEMORY[0x277D82600]);
          }

          objc_msgSend_doubleValue(v584, v585, v586, v587, v588);
          *&v777 = v589;
          sub_2337F207C(&__p, &v777);
        }

        v581 = objc_msgSend_countByEnumeratingWithState_objects_count_(v579, v590, &v697, v757, 16);
      }

      while (v581);
    }

    sub_23372A488(&v777, "IFD0");
    __src = &v777;
    v591 = (sub_23375E520(a1 + 1928, &v777) + 56);
    if (v591 != &__p)
    {
      sub_23373176C(v591, __p, *(&__p + 1), (*(&__p + 1) - __p) >> 3);
    }

    if (SHIBYTE(v778) < 0)
    {
      operator delete(v777);
    }

    v592 = __p;
    if (__p)
    {
      *(&__p + 1) = __p;
LABEL_375:
      operator delete(v592);
    }
  }

  else
  {
    __asm { FMOV            V0.2D, #1.0 }

    v777 = _Q0;
    sub_23372A488(&__p, "IFD0");
    __src = &__p;
    v598 = sub_23375E520(a1 + 1928, &__p);
    sub_233755258((v598 + 56), &v777, &v778, 2uLL);
    if (SBYTE7(v764) < 0)
    {
      v592 = __p;
      goto LABEL_375;
    }
  }

  v602 = objc_msgSend_objectForKeyedSubscript_(v692, v599, @"FixVignetteRadial", v600, v601);
  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) != 0 && objc_msgSend_count(v602, v603, v604, v605, v606) == 7)
  {
    v695 = 0u;
    v696 = 0u;
    v693 = 0u;
    v694 = 0u;
    v607 = v602;
    v609 = objc_msgSend_countByEnumeratingWithState_objects_count_(v607, v608, &v693, v756, 16);
    if (v609)
    {
      v610 = *v694;
      do
      {
        for (i5 = 0; i5 != v609; ++i5)
        {
          if (*v694 != v610)
          {
            objc_enumerationMutation(v607);
          }

          objc_opt_class();
          if ((objc_opt_isKindOfClass() & 1) == 0)
          {
            v678 = __cxa_allocate_exception(0x10uLL);
            MEMORY[0x2383ABCE0](v678, "RawCameraException");
            __cxa_throw(v678, MEMORY[0x277D82760], MEMORY[0x277D82600]);
          }
        }

        v609 = objc_msgSend_countByEnumeratingWithState_objects_count_(v607, v612, &v693, v756, 16);
      }

      while (v609);
    }

    v616 = objc_msgSend_objectAtIndexedSubscript_(v607, v613, 0, v614, v615);
    objc_msgSend_doubleValue(v616, v617, v618, v619, v620);
    v622 = v621;

    p_src = v622;
    v626 = objc_msgSend_objectAtIndexedSubscript_(v607, v623, 1, v624, v625);
    objc_msgSend_doubleValue(v626, v627, v628, v629, v630);
    v632 = v631;

    v725 = v632;
    v636 = objc_msgSend_objectAtIndexedSubscript_(v607, v633, 2, v634, v635);
    objc_msgSend_doubleValue(v636, v637, v638, v639, v640);

    v644 = objc_msgSend_objectAtIndexedSubscript_(v607, v641, 3, v642, v643);
    objc_msgSend_doubleValue(v644, v645, v646, v647, v648);

    v652 = objc_msgSend_objectAtIndexedSubscript_(v607, v649, 4, v650, v651);
    objc_msgSend_doubleValue(v652, v653, v654, v655, v656);

    v660 = objc_msgSend_objectAtIndexedSubscript_(v607, v657, 5, v658, v659);
    objc_msgSend_doubleValue(v660, v661, v662, v663, v664);

    v668 = objc_msgSend_objectAtIndexedSubscript_(v607, v665, 6, v666, v667);
    objc_msgSend_doubleValue(v668, v669, v670, v671, v672);

    LODWORD(__p) = 0;
    sub_2337F2880();
  }
}

void sub_2337F13E4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, void *a23)
{
  STACK[0x8E8] = &STACK[0x840];
  sub_233723948(&STACK[0x8E8]);
  if (STACK[0xC88])
  {
    sub_2337239E8(STACK[0xC88]);
  }

  _Unwind_Resume(a1);
}

void sub_2337F207C(const void **a1, void *a2)
{
  v5 = a1[1];
  v4 = a1[2];
  if (v5 >= v4)
  {
    v7 = *a1;
    v8 = v5 - *a1;
    v9 = (v8 >> 3) + 1;
    if (v9 >> 61)
    {
      sub_2337235BC();
    }

    v10 = v4 - v7;
    if (v10 >> 2 > v9)
    {
      v9 = v10 >> 2;
    }

    v11 = v10 >= 0x7FFFFFFFFFFFFFF8;
    v12 = 0x1FFFFFFFFFFFFFFFLL;
    if (!v11)
    {
      v12 = v9;
    }

    if (v12)
    {
      sub_233723798(a1, v12);
    }

    v13 = (8 * (v8 >> 3));
    *v13 = *a2;
    v6 = v13 + 1;
    memcpy(0, v7, v8);
    v14 = *a1;
    *a1 = 0;
    a1[1] = v6;
    a1[2] = 0;
    if (v14)
    {
      operator delete(v14);
    }
  }

  else
  {
    *v5 = *a2;
    v6 = v5 + 1;
  }

  a1[1] = v6;
}

id sub_2337F215C(void *a1)
{
  v2 = (*(*a1 + 440))(a1);
  v3 = (*(*a1 + 448))(a1);
  v5 = v4;
  v6 = HIDWORD(v4);
  v7 = a1[314];
  CGAffineTransformMakeTranslation(&v18, -v3, -((v2 - (((v4 & 0xFFFFFFFF00000000) + v3) & 0xFFFFFFFF00000000)) >> 32));
  v11 = objc_msgSend_imageByApplyingTransform_(v7, v8, &v18, v9, v10);
  v16 = objc_msgSend_imageByCroppingToRect_(v11, v12, v13, v14, v15, 0.0, 0.0, v5, v6);

  return v16;
}

void sub_2337F2280(uint64_t a1)
{
  sub_2337F2484(a1);

  JUMPOUT(0x2383ABF10);
}

void *sub_2337F22B8(void *result, char *__src, char *a3, unint64_t a4)
{
  v6 = result;
  v7 = result[2];
  v8 = *result;
  if (v7 - *result < a4)
  {
    if (v8)
    {
      result[1] = v8;
      operator delete(v8);
      v7 = 0;
      *v6 = 0;
      v6[1] = 0;
      v6[2] = 0;
    }

    if ((a4 & 0x8000000000000000) == 0)
    {
      v9 = 2 * v7;
      if (2 * v7 <= a4)
      {
        v9 = a4;
      }

      if (v7 >= 0x3FFFFFFFFFFFFFFFLL)
      {
        v10 = 0x7FFFFFFFFFFFFFFFLL;
      }

      else
      {
        v10 = v9;
      }

      sub_2337261C8(v6, v10);
    }

    sub_2337235BC();
  }

  v11 = result[1];
  v12 = v11 - v8;
  if (v11 - v8 >= a4)
  {
    v18 = a3 - __src;
    if (v18)
    {
      result = memmove(*result, __src, v18);
    }

    v17 = &v8[v18];
  }

  else
  {
    v13 = &__src[v12];
    if (v11 != v8)
    {
      result = memmove(*result, __src, v12);
      v11 = v6[1];
    }

    v14 = v11;
    if (v13 != a3)
    {
      v14 = v11;
      v15 = v11;
      do
      {
        v16 = *v13++;
        *v15++ = v16;
        ++v14;
      }

      while (v13 != a3);
    }

    v17 = v14;
  }

  v6[1] = v17;
  return result;
}

void *sub_2337F23E8(void *result, unint64_t a2)
{
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  if (a2)
  {
    sub_233724F10(result, a2);
  }

  return result;
}

uint64_t sub_2337F2484(uint64_t a1)
{

  return sub_2337A715C(a1);
}

uint64_t sub_2337F24C8(uint64_t a1, void **a2)
{
  v2 = *sub_233757640(a1, &v4, a2);
  if (!v2)
  {
    operator new();
  }

  return v2;
}

uint64_t sub_2337F2574(uint64_t a1, void **a2)
{
  v2 = *sub_233757640(a1, &v4, a2);
  if (!v2)
  {
    operator new();
  }

  return v2;
}

uint64_t sub_2337F2620(uint64_t a1, void **a2)
{
  v2 = *sub_233757640(a1, &v4, a2);
  if (!v2)
  {
    operator new();
  }

  return v2;
}

uint64_t sub_2337F26EC(uint64_t a1, void **a2)
{
  v2 = *sub_233757640(a1, &v4, a2);
  if (!v2)
  {
    sub_2337F2794();
  }

  return v2;
}

uint64_t sub_2337F2820(uint64_t a1, __int128 **a2)
{
  v3 = *a2;
  v4 = **a2;
  *(a1 + 16) = *(*a2 + 2);
  *a1 = v4;
  *(v3 + 1) = 0;
  *(v3 + 2) = 0;
  *v3 = 0;
  sub_2337DF868((a1 + 24));
  return a1;
}

void sub_2337F2864(_Unwind_Exception *exception_object)
{
  if (*(v1 + 23) < 0)
  {
    operator delete(*v1);
  }

  _Unwind_Resume(exception_object);
}

void *sub_2337F2944(void *a1, unsigned int *a2, double *a3, double *a4, double *a5, double *a6, double *a7, double *a8, double *a9)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_2849097F0;
  sub_2338F30B4(a1 + 3, *a2, *a3, *a4, *a5, *a6, *a7, *a8, *a9);
  return a1;
}

void sub_2337F29C4(uint64_t a1)
{
  v6[0] = &unk_284917748;
  v6[1] = 0;
  (*(*a1 + 160))(&v4);
  v1 = v4;
  sub_23372A488(__p, "IFD0:EXIF:MAKERNOTE:WhitePoint");
  (*(*v1 + 600))(v1, __p, v6, 3);
  if (v3 < 0)
  {
    operator delete(__p[0]);
  }

  if (v5)
  {
    sub_2337239E8(v5);
  }
}

void sub_2337F2AA4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F2AD4(uint64_t a1@<X0>, void *a2@<X8>, double a3@<D0>)
{
  v14 = a3;
  v12[0] = 0;
  v12[1] = 0;
  v13 = 0;
  if ((*(*a1 + 960))(a1) != 10 && (*(*a1 + 960))(a1) != 15)
  {
    goto LABEL_12;
  }

  (*(*a1 + 160))(&v10, a1);
  v5 = v10;
  sub_23372A488(__p, "IFD0:EXIF:MAKERNOTE");
  v6 = (*(*v5 + 248))(v5, __p, v12, 0);
  if ((v12[1] - v12[0]) == 32)
  {
    v7 = v6;
  }

  else
  {
    v7 = 0;
  }

  if (v9 < 0)
  {
    operator delete(__p[0]);
  }

  if (v11)
  {
    sub_2337239E8(v11);
  }

  if (v7)
  {
    *a2 = *v12;
    a2[2] = v13;
  }

  else
  {
LABEL_12:
    sub_233731694(a2, 4uLL);
    if (v12[0])
    {
      v12[1] = v12[0];
      operator delete(v12[0]);
    }
  }
}

void sub_2337F2C50(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17, void *a18, uint64_t a19)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  if (a18)
  {
    operator delete(a18);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F2CCC(uint64_t a1)
{
  (*(*a1 + 160))(&v3);
  v1 = (*(*v3 + 512))();
  if (v4)
  {
    sub_2337239E8(v4);
  }

  return v1;
}

void sub_2337F2D68(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F2D80(void *a1)
{
  sub_23373C7EC(a1);
  if (!a1[3])
  {
    v2 = (*(*a1 + 592))(a1);
    if (v2 != 0xFFFF)
    {
      if (v2 != 32773)
      {
        if (v2 == 1)
        {
          (*(*a1 + 160))(&v13, a1);
          (*(*v13 + 384))(&v14);
          v12 = (*(*a1 + 336))(a1);
          v11 = (*(*a1 + 408))(a1);
          v9 = (*(*a1 + 432))(a1);
          v10 = v3;
          sub_2337F3A48();
        }

        exception = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](exception, "RawCameraException");
        __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }

      (*(*a1 + 160))(&v13, a1);
      (*(*v13 + 384))(&v14);
      v12 = (*(*a1 + 336))(a1);
      v11 = (*(*a1 + 408))(a1);
      v9 = (*(*a1 + 432))(a1);
      v10 = v4;
      sub_2337F3AEC();
    }

    (*(*a1 + 160))(__p, a1);
    sub_2337F33A4(__p, &v14);
    if (__p[1])
    {
      sub_2337239E8(__p[1]);
    }

    if (v14)
    {
      (*(*v14 + 384))(__p);
      v12 = (*(*a1 + 336))(a1);
      v11 = (*(*a1 + 408))(a1);
      v9 = (*(*a1 + 432))(a1);
      v10 = v5;
      sub_2337F3B90();
    }

    v6 = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](v6, "RawCameraException");
    __cxa_throw(v6, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }
}

void *sub_2337F33A4@<X0>(void **a1@<X0>, void **a2@<X8>)
{
  v2 = a1;
  result = *a1;
  if (result && (result = __dynamic_cast(result, &unk_284903320, &unk_284908EF0, 0)) != 0)
  {
    v5 = v2[1];
    *a2 = result;
    a2[1] = v5;
  }

  else
  {
    v2 = a2;
  }

  *v2 = 0;
  v2[1] = 0;
  return result;
}

void *sub_2337F3428(uint64_t a1, void *a2)
{
  (*(*a1 + 160))(&__p);
  sub_2337F33A4(&__p, &v10);
  if (v7)
  {
    sub_2337239E8(v7);
  }

  v3 = v10;
  if (v10)
  {
    v9 = 0;
    sub_23372A488(&__p, "IFD0:EXIF:MAKERNOTE:ExpandedDynamicRange");
    v4 = (*(*v3 + 784))(v3, &__p, &v9);
    v3 = v4;
    if ((v8 & 0x80000000) == 0)
    {
      if (!v4)
      {
        goto LABEL_7;
      }

      goto LABEL_6;
    }

    operator delete(__p);
    if (v3)
    {
LABEL_6:
      *a2 = v9;
    }
  }

LABEL_7:
  if (v11)
  {
    sub_2337239E8(v11);
  }

  return v3;
}

void sub_2337F351C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, uint64_t a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

double sub_2337F354C(uint64_t a1)
{
  v2 = (*(*a1 + 944))(a1);
  result = 0.0;
  if (v2)
  {
    v4 = sub_2337F3428(a1, &v5);
    result = 0.0;
    if (v4)
    {
      return 1.0;
    }
  }

  return result;
}

id sub_2337F35C4(uint64_t a1, void *a2)
{
  v3 = a2;
  if (objc_msgSend_isEqualToString_(v3, v4, @"activeRectAvailableAsTag", v5, v6))
  {
    (*(*a1 + 160))(&v44, a1);
    sub_2337D04B8(&v44, &v46);
    if (v45)
    {
      sub_2337239E8(v45);
    }

    v10 = MEMORY[0x277CBEC28];
    if (v46 != 0.0 && ((*(**&v46 + 784))(COERCE_DOUBLE(*&v46)) & 1) != 0)
    {
      v10 = MEMORY[0x277CBEC38];
    }

    v11 = v10;
    goto LABEL_8;
  }

  if (objc_msgSend_isEqualToString_(v3, v7, @"hasExtendedDynamicRangeAdjustment", v8, v9))
  {
    v16 = sub_2337F3428(a1, &v46);
    v17 = MEMORY[0x277CBEC28];
    if (v16)
    {
      v17 = MEMORY[0x277CBEC38];
    }

    v18 = v17;
    goto LABEL_16;
  }

  if (objc_msgSend_isEqualToString_(v3, v13, @"extendedDynamicRangeAdjustment", v14, v15))
  {
    v46 = 0.0;
    v22 = MEMORY[0x277CCABB0];
    sub_2337F3428(a1, &v46);
    v18 = objc_msgSend_numberWithDouble_(v22, v23, v24, v25, v26, v46);
    goto LABEL_16;
  }

  if (!objc_msgSend_isEqualToString_(v3, v19, @"dngBaselineExposureTag", v20, v21))
  {
    if (objc_msgSend_isEqualToString_(v3, v28, @"pentaxShakeReduction", v29, v30))
    {
      (*(*a1 + 160))(&v44, a1);
      sub_2337F33A4(&v44, &v46);
      if (v45)
      {
        sub_2337239E8(v45);
      }

      v39 = MEMORY[0x277CCABB0];
      if (v46 == 0.0)
      {
        objc_msgSend_numberWithInt_(MEMORY[0x277CCABB0], v36, 0, v37, v38);
      }

      else
      {
        v40 = (*(**&v46 + 800))(COERCE_DOUBLE(*&v46));
        objc_msgSend_numberWithInt_(v39, v41, v40, v42, v43);
      }
      v11 = ;
      goto LABEL_8;
    }

    v18 = sub_2338D3C20(a1, v3);
LABEL_16:
    v12 = v18;
    goto LABEL_17;
  }

  v31 = MEMORY[0x277CCABB0];
  (*(*a1 + 160))(&v46, a1);
  (*(**&v46 + 352))(COERCE_DOUBLE(*&v46));
  v11 = objc_msgSend_numberWithDouble_(v31, v32, v33, v34, v35);
LABEL_8:
  v12 = v11;
  if (v47)
  {
    sub_2337239E8(v47);
  }

LABEL_17:

  return v12;
}

uint64_t sub_2337F38EC(uint64_t a1, uint64_t a2, void **a3, unsigned int a4, uint64_t *a5)
{
  v6 = a4;
  if (a4 == 3)
  {
    a4 = 4;
  }

  v8 = sub_2337BF918(a1, a2, a3, a4, a5);
  v9 = v8;
  if (v6 == 3 && v8)
  {
    v10 = *(a1 + 12);
    v11 = *a5;
    v12 = (*a5 + 4);
    if (v10 == 3)
    {
      v13 = *a5 + 4;
    }

    else
    {
      v13 = *a5;
    }

    if (v10 == 3)
    {
      v14 = *a5;
    }

    else
    {
      v14 = *a5 + 4;
    }

    v15 = *a5 + 8;
    v16 = *a5 + 12;
    if (v10 == 2)
    {
      v13 = *a5;
      v14 = *a5 + 4;
      v15 = *a5 + 12;
      v16 = *a5 + 8;
    }

    v17 = v10 == 1;
    if (v10 == 1)
    {
      v18 = (*a5 + 8);
    }

    else
    {
      v18 = v13;
    }

    if (v17)
    {
      v19 = (*a5 + 12);
    }

    else
    {
      v19 = v14;
    }

    if (!v17)
    {
      v11 = v15;
      v12 = v16;
    }

    v20 = *v12;
    v21 = *v11;
    v22 = *v19;
    v23 = *v18;
    sub_23372630C(&v35, 3uLL);
    v24 = v23 * v21;
    v25 = v22 * v21;
    v26 = v22 * v20;
    if (v24 >> 16)
    {
      v27 = 0;
    }

    else
    {
      v27 = v25 >> 16 == 0;
    }

    if (!v27 || v26 >= 0x10000)
    {
      do
      {
        do
        {
          v28 = v25;
          v29 = v24 >> 17;
          v24 >>= 1;
          v30 = v26;
          v25 >>= 1;
          v26 >>= 1;
        }

        while (v29);
      }

      while (v28 >> 17 || v30 >> 17);
    }

    v31 = *a5;
    v32 = v35;
    *a5 = v35;
    *v32 = v24;
    v32[1] = v25;
    v32[2] = v26;
    v33 = a5[2];
    a5[2] = v36;
    *&v35 = v31;
    v36 = v33;
    if (v31)
    {
      *(&v35 + 1) = v31;
      operator delete(v31);
    }
  }

  return v9;
}

void *sub_2337F3C34(void *a1, void *a2, unint64_t *a3, void *a4, _OWORD *a5)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284917790;
  sub_2337AD9D8((a1 + 3), a2, *a3, a4, a5);
  a1[3] = &unk_28490FF40;
  a1[28] = 0;
  a1[29] = 0;
  a1[27] = 0;
  return a1;
}

void sub_2337F3CD8(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284917790;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

uint64_t sub_2337F3D54(uint64_t a1, int a2, uint64_t *a3)
{
  v5 = sub_2338F4DD0(a1, a2);
  *v5 = &unk_2849177E0;
  v5[6] = 0;
  v6 = (v5 + 6);
  v5[7] = 0;
  v5[8] = 0;
  *(a1 + 12) = sub_233725614(*a3);
  *(a1 + 16) = sub_233725614(*a3);
  *(a1 + 20) = sub_233725614(*a3);
  *(a1 + 24) = sub_233725614(*a3);
  *(a1 + 28) = sub_233725614(*a3);
  *(a1 + 32) = sub_233725614(*a3);
  *(a1 + 36) = sub_233725614(*a3);
  *(a1 + 40) = sub_233725614(*a3);
  for (i = sub_233725614(*a3); i; --i)
  {
    v8 = sub_233725730(*a3);
    v10 = *(a1 + 56);
    v9 = *(a1 + 64);
    if (v10 >= v9)
    {
      v12 = *v6;
      v13 = v10 - *v6;
      v14 = v13 >> 2;
      v15 = (v13 >> 2) + 1;
      if (v15 >> 62)
      {
        sub_2337235BC();
      }

      v16 = v9 - v12;
      if (v16 >> 1 > v15)
      {
        v15 = v16 >> 1;
      }

      if (v16 >= 0x7FFFFFFFFFFFFFFCLL)
      {
        v17 = 0x3FFFFFFFFFFFFFFFLL;
      }

      else
      {
        v17 = v15;
      }

      if (v17)
      {
        sub_2337235D4(v6, v17);
      }

      *(4 * v14) = v8;
      v11 = 4 * v14 + 4;
      memcpy(0, v12, v13);
      v18 = *(a1 + 48);
      *(a1 + 48) = 0;
      *(a1 + 56) = v11;
      *(a1 + 64) = 0;
      if (v18)
      {
        operator delete(v18);
      }
    }

    else
    {
      *v10 = v8;
      v11 = (v10 + 1);
    }

    *(a1 + 56) = v11;
  }

  return a1;
}

void sub_2337F3F04(_Unwind_Exception *exception_object)
{
  v4 = *v2;
  if (*v2)
  {
    *(v1 + 56) = v4;
    operator delete(v4);
  }

  _Unwind_Resume(exception_object);
}

id sub_2337F3F30(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  v6 = objc_msgSend_dictionary(MEMORY[0x277CBEB38], a2, a3, a4, a5);
  v10 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v7, *(a1 + 12), v8, v9);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v11, v10, @"Top", v12);

  v16 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v13, *(a1 + 16), v14, v15);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v17, v16, @"Left", v18);

  v22 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v19, *(a1 + 20), v20, v21);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v23, v22, @"Bottom", v24);

  v28 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v25, *(a1 + 24), v26, v27);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v29, v28, @"mRight", v30);

  v34 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v31, *(a1 + 28), v32, v33);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v35, v34, @"Plane", v36);

  v40 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v37, *(a1 + 32), v38, v39);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v41, v40, @"Planes", v42);

  v46 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v43, *(a1 + 36), v44, v45);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v47, v46, @"RowPitch", v48);

  v52 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v49, *(a1 + 40), v50, v51);
  objc_msgSend_setObject_forKeyedSubscript_(v6, v53, v52, @"ColPitch", v54);

  v63 = objc_msgSend_array(MEMORY[0x277CBEB18], v55, v56, v57, v58);
  v65 = *(a1 + 48);
  v66 = *(a1 + 56);
  while (v65 != v66)
  {
    LODWORD(v64) = *v65;
    v67 = objc_msgSend_numberWithFloat_(MEMORY[0x277CCABB0], v59, v60, v61, v62, v64);
    objc_msgSend_addObject_(v63, v68, v67, v69, v70);

    ++v65;
  }

  objc_msgSend_setObject_forKeyedSubscript_(v6, v59, v63, @"Delta", v62);
  v71 = [RAWOpcodeDeltaPerRow alloc];
  v75 = objc_msgSend_initWithArguments_(v71, v72, v6, v73, v74);

  return v75;
}

void *sub_2337F41C0(void *a1)
{
  *a1 = &unk_2849177E0;
  v2 = a1[6];
  if (v2)
  {
    a1[7] = v2;
    operator delete(v2);
  }

  return a1;
}

void sub_2337F4210(void *a1)
{
  *a1 = &unk_2849177E0;
  v2 = a1[6];
  if (v2)
  {
    a1[7] = v2;
    operator delete(v2);
  }

  JUMPOUT(0x2383ABF10);
}

uint64_t sub_2337F4288@<X0>(uint64_t a1@<X0>, int a2@<W1>, unsigned int a3@<W2>, void *a4@<X8>)
{
  v10 = a2;
  sub_233726154(a4, a3 + 64);
  v7 = *(a1 + 24);
  sub_233723AE0(&v9, &v10);
  (*(*v7 + 40))(v7, &v9, 0);
  return (*(**(a1 + 24) + 32))(*(a1 + 24), *a4, a3);
}

void sub_2337F4340(void *a1)
{
  __cxa_begin_catch(a1);
  v2 = *v1;
  if (*v1)
  {
    *(v1 + 8) = v2;
    operator delete(v2);
  }

  *v1 = 0;
  *(v1 + 8) = 0;
  *(v1 + 16) = 0;
  __cxa_end_catch();
  JUMPOUT(0x2337F432CLL);
}

void sub_2337F4368(_Unwind_Exception *exception_object)
{
  v3 = *v1;
  if (*v1)
  {
    *(v1 + 8) = v3;
    operator delete(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F4384(os_signpost_id_t a1)
{
  v2 = sub_23378E038();
  v3 = v2;
  if (a1 + 1 >= 2 && os_signpost_enabled(v2))
  {
    LOWORD(v23.next_in) = 0;
    _os_signpost_emit_with_name_impl(&dword_23371F000, v3, OS_SIGNPOST_INTERVAL_BEGIN, a1, "CSonyDeflateUnpacker", &unk_233945DBE, &v23, 2u);
  }

  v26[0] = MEMORY[0x277D85DD0];
  v26[1] = 3221225472;
  v26[2] = sub_2337F482C;
  v26[3] = &unk_2789EE800;
  v26[4] = a1;
  v4 = MEMORY[0x2383AC810](v26);
  v5 = (*(*a1 + 56))(a1);
  v7 = *(a1 + 44);
  v6 = *(a1 + 48);
  v8 = *(a1 + 188);
  v9 = *(a1 + 192);
  v23.next_in = ((*(a1 + 208) - *(a1 + 200)) >> 2);
  sub_233723C18(v25, &v23);
  if (v7 >> 5 >= 0x271 || v6 >> 5 >= 0x271 || v8 >> 5 >= 0x271 || v9 >> 5 >= 0x271 || LODWORD(v25[0]) >= 2)
  {
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  v10 = sub_2337ADCC4(a1);
  sub_2337F4288(a1, **(a1 + 200), **(a1 + 224), v25);
  v11 = 12 * v8 * v9;
  sub_233726154(__p, v11);
  memset(&v23.zalloc, 0, 24);
  v23.avail_in = **(a1 + 224);
  v23.next_in = v25[0];
  v23.avail_out = v11;
  v23.next_out = __p[0];
  if (inflateInit_(&v23, "1.2.12", 112) || inflate(&v23, 2) != 1 || inflateEnd(&v23))
  {
    v22 = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](v22, "RawCameraException");
    __cxa_throw(v22, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  v12 = sub_2337AF4A8(a1);
  v13 = __p[0];
  v14 = (*(a1 + 192) * *(a1 + 188));
  sub_23381E720(__p[0], 4 * v14, v5);
  v15 = v14 * v5;
  if (v15)
  {
    for (i = 0; i != v15; ++i)
    {
      v17 = 0.0;
      v18 = v13;
      v19 = 4;
      do
      {
        if (v19 != 4)
        {
          LODWORD(v17) <<= 8;
        }

        LODWORD(v17) |= *v18;
        v18 += v15;
        --v19;
      }

      while (v19);
      v20 = bswap32(LODWORD(v17));
      if (v12 != 1)
      {
        v17 = *&v20;
      }

      *(v10 + 2 * i) = v17;
      ++v13;
    }
  }

  if (__p[0])
  {
    __p[1] = __p[0];
    operator delete(__p[0]);
  }

  if (v25[0])
  {
    v25[1] = v25[0];
    operator delete(v25[0]);
  }

  v4[2](v4);
}

void sub_2337F482C(uint64_t a1)
{
  v2 = sub_23378E038();
  v3 = v2;
  v4 = *(a1 + 32);
  if (v4 - 1 <= 0xFFFFFFFFFFFFFFFDLL && os_signpost_enabled(v2))
  {
    *v5 = 0;
    _os_signpost_emit_with_name_impl(&dword_23371F000, v3, OS_SIGNPOST_INTERVAL_END, v4, "CSonyDeflateUnpacker", &unk_233945DBE, v5, 2u);
  }
}

void *sub_2337F48B4(uint64_t a1, int a2, int a3, char **a4, char **a5)
{
  *(a1 + 188) = a2;
  *(a1 + 192) = a3;
  v7 = (a1 + 200);
  if (v7 != a4)
  {
    sub_233723454(v7, *a4, a4[1], (a4[1] - *a4) >> 2);
  }

  result = (a1 + 224);
  if ((a1 + 224) != a5)
  {
    v9 = *a5;
    v10 = a5[1];
    v11 = (v10 - *a5) >> 2;

    return sub_233723454(result, v9, v10, v11);
  }

  return result;
}

void *sub_2337F492C(void *a1)
{
  *a1 = &unk_284917828;
  v2 = a1[28];
  if (v2)
  {
    a1[29] = v2;
    operator delete(v2);
  }

  v3 = a1[25];
  if (v3)
  {
    a1[26] = v3;
    operator delete(v3);
  }

  return sub_233723A54(a1);
}

void sub_2337F499C(void *a1)
{
  *a1 = &unk_284917828;
  v2 = a1[28];
  if (v2)
  {
    a1[29] = v2;
    operator delete(v2);
  }

  v3 = a1[25];
  if (v3)
  {
    a1[26] = v3;
    operator delete(v3);
  }

  sub_233723A54(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337F4A2C(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  if ((*(*a1 + 2992))(a1) && ((v4 = (*(*a1 + 2952))(a1), v4 <= 0x2CA5) ? (v5 = (14 * v4) & 0xFFFF0) : (v5 = 160000), v5 > (*(*a1 + 864))(a1)))
  {
    (*(*a1 + 728))(v69, a1);
    v6 = llround((*(*a1 + 896))(a1));
    sub_2337DF9CC(&v66, 3u, 1u, *v69[0] * v6, v7, v8, v9, v10, v11, COERCE__INT64(*(v69[0] + 1) * v6));
    (*(*a1 + 648))(v65, a1);
    v57.f64[0] = (*(*a1 + 720))(a1);
    v57.f64[1] = v12;
    sub_2337DF9CC(&v59, 3u, 3u, 0.6097, v13, v14, v15, v16, v17, 0x3FCA474538EF34D7);
    sub_23381A514(v65, &v57, &v59, &v62);
    if (__p)
    {
      v61 = __p;
      operator delete(__p);
    }

    if (!v62 || !HIDWORD(v62))
    {
      sub_2337DF9CC(a2, 3u, 1u, v6, v18, v19, v20, v21, v22, v6);
      goto LABEL_28;
    }

    sub_2337DF9CC(&v57, 3u, 1u, 1.0, v18, v19, v20, v21, v22, 0x3FF0000000000000);
    sub_2337E0720(&v62, &v52);
    sub_2337E032C(&v52, &v57, &v54);
    if (*(&v52 + 1))
    {
      v53 = *(&v52 + 1);
      operator delete(*(&v52 + 1));
    }

    v23 = sub_2337E0EE4(&v54);
    sub_2337E0244(&v54, &v52, 1.0 / v23);
    sub_2337E004C(&v54, &v52);
    if (*(&v52 + 1))
    {
      v53 = *(&v52 + 1);
      operator delete(*(&v52 + 1));
    }

    v24 = sub_2337E0F94(&v54);
    *&v52 = sub_2337DFCEC(&v54, 2u);
    *(&v52 + 1) = v25;
    *sub_2337DFD6C(&v52, 0) = v24;
    v51[0] = sub_2337DFCEC(&v54, 1u);
    v51[1] = v26;
    *sub_2337DFD6C(v51, 0) = v24;
    v50[0] = sub_2337DFCEC(&v54, 0);
    v50[1] = v27;
    *sub_2337DFD6C(v50, 0) = v24;
    sub_2337E0244(&v54, a2, v5);
  }

  else
  {
    (*(*a1 + 728))(v69, a1);
    v28 = llround((*(*a1 + 896))(a1));
    sub_2337DF9CC(&v66, 3u, 1u, *v69[0] * v28, v29, v30, v31, v32, v33, COERCE__INT64(*(v69[0] + 1) * v28));
    (*(*a1 + 648))(v65, a1);
    v57.f64[0] = (*(*a1 + 720))(a1);
    v57.f64[1] = v34;
    sub_2337DF9CC(&v47, 3u, 3u, 0.6097, v35, v36, v37, v38, v39, 0x3FCA474538EF34D7);
    sub_23381A514(v65, &v57, &v47, &v62);
    if (v48)
    {
      v49 = v48;
      operator delete(v48);
    }

    if (!v62 || !HIDWORD(v62))
    {
      sub_2337DF9CC(a2, 3u, 1u, v28, v40, v41, v42, v43, v44, v28);
      goto LABEL_28;
    }

    sub_2337DF9CC(&v57, 3u, 1u, 1.0, v40, v41, v42, v43, v44, 0x3FF0000000000000);
    sub_2337E0720(&v62, &v52);
    sub_2337E032C(&v52, &v57, &v54);
    if (*(&v52 + 1))
    {
      v53 = *(&v52 + 1);
      operator delete(*(&v52 + 1));
    }

    v45 = sub_2337E0EE4(&v54);
    sub_2337E0244(&v54, &v52, 1.0 / v45);
    sub_2337E004C(&v54, &v52);
    if (*(&v52 + 1))
    {
      v53 = *(&v52 + 1);
      operator delete(*(&v52 + 1));
    }

    v46 = sub_2337E0EE4(&v66);
    sub_2337E0244(&v54, a2, v46);
  }

  if (v55)
  {
    v56 = v55;
    operator delete(v55);
  }

  if (*&v57.f64[1])
  {
    v58 = v57.f64[1];
    operator delete(*&v57.f64[1]);
  }

LABEL_28:
  if (v63)
  {
    v64 = v63;
    operator delete(v63);
  }

  sub_2337D35EC(v65);
  if (v67)
  {
    v68 = v67;
    operator delete(v67);
  }

  if (v69[0])
  {
    v69[1] = v69[0];
    operator delete(v69[0]);
  }
}

void sub_2337F512C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, void *a26, uint64_t a27, uint64_t a28, uint64_t a29, void *a30, uint64_t a31, uint64_t a32, uint64_t a33, void *a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, void *__p, uint64_t a43, uint64_t a44, uint64_t a45)
{
  if (__p)
  {
    operator delete(__p);
  }

  sub_2337D35EC(&a45);
  v47 = *(v45 - 112);
  if (v47)
  {
    *(v45 - 104) = v47;
    operator delete(v47);
  }

  v48 = *(v45 - 88);
  if (v48)
  {
    *(v45 - 80) = v48;
    operator delete(v48);
  }

  _Unwind_Resume(a1);
}

void sub_2337F5250(uint64_t a1, int a2)
{
  if (a2)
  {
    (*(*a1 + 736))(&v6);
    (*(*a1 + 728))(__p, a1);
    sub_2337DFE04(__p, &v4);
    if (__p[0])
    {
      __p[1] = __p[0];
      operator delete(__p[0]);
    }

    if ((*(*a1 + 2992))(a1))
    {
      sub_2337E0F94(&v4);
      sub_2337E0EE4(&v4);
    }

    sub_2337E0EE4(&v6);
    if (*(&v4 + 1))
    {
      v5 = *(&v4 + 1);
      operator delete(*(&v4 + 1));
    }

    if (v7)
    {
      v8 = v7;
      operator delete(v7);
    }
  }
}

void sub_2337F53A8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *__p, uint64_t a15, uint64_t a16, uint64_t a17, void *a18, uint64_t a19)
{
  if (__p)
  {
    operator delete(__p);
  }

  if (a18)
  {
    operator delete(a18);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F53F4(unsigned __int16 *a1)
{
  v12 = *MEMORY[0x277D85DE8];
  v1 = a1[201];
  if (!a1[201])
  {
    v11 = 0x100010000;
    __p = 0;
    v9 = 0;
    v10 = 0;
    sub_233728FF4(&__p, &v11, &v12, 4);
    (*(*a1 + 400))(&v6, a1);
    v3 = v6;
    v4 = (*(*a1 + 888))(a1);
    v1 = sub_2337B0BE8(v3, &__p, v4);
    if (v7)
    {
      sub_2337239E8(v7);
    }

    a1[201] = v1;
    if (__p)
    {
      v9 = __p;
      operator delete(__p);
      return a1[201];
    }
  }

  return v1;
}

void sub_2337F5520(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

double sub_2337F5558(uint64_t a1)
{
  (*(*a1 + 72))(&v7);
  v2 = v7;
  v3 = (*(*a1 + 120))(a1);
  v6[0] = MEMORY[0x277D85DD0];
  v6[1] = 3221225472;
  v6[2] = sub_2337F59D0;
  v6[3] = &unk_2789EF130;
  v6[4] = a1;
  v4 = sub_2337F5668(v2, @"directionNoiseFactor", v3, v6);
  if (v8)
  {
    sub_2337239E8(v8);
  }

  return v4;
}

void sub_2337F5650(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, std::__shared_weak_count *a16)
{
  if (a16)
  {
    sub_2337239E8(a16);
  }

  _Unwind_Resume(exception_object);
}

double sub_2337F5668(uint64_t a1, void *a2, int a3, void *a4)
{
  v35 = *MEMORY[0x277D85DE8];
  v7 = a2;
  v8 = a4;
  sub_2337BEBCC(v7, a3, &__p);
  v9 = sub_233735E3C(a1 + 24, &__p.__r_.__value_.__l.__data_);
  if (a1 + 32 == v9)
  {
    v29[0] = MEMORY[0x277D85DD0];
    v29[1] = 3221225472;
    v29[2] = sub_2337F8AA4;
    v29[3] = &unk_2789EEF70;
    v12 = v8;
    v30 = v12;
    sub_23386DB28(a1, v7, v29, &p_p);
    v17 = p_p;
    if (p_p)
    {
      v18 = sub_23386FD70(p_p, v13, v14, v15, v16);
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
        exception = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](exception, "RawCameraException");
        __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }

      objc_msgSend_doubleValue(v18, v19, v20, v21, v22);
      v11 = v23;
    }

    else
    {
      v11 = 0.0;
    }

    if (v34)
    {
      sub_2337239E8(v34);
    }

    if (!v17)
    {
      v11 = v12[2](v12);
    }

    p_p = &__p;
    v24 = sub_2337BEEAC(a1 + 24, &__p.__r_.__value_.__l.__data_);
    v25 = (v24 + 56);
    v32[1] = *&v11;
    v32[0] = sub_2337F8B38;
    if (v32 != (v24 + 56))
    {
      v26 = *v25;
      if (*v25)
      {
        p_p = 0;
        v34 = 0;
        v26(2, v25, &p_p, 0, 0);
        v32[0](2, v32, v25, 0, 0);
        (p_p)(2, &p_p, v32, 0, 0);
        sub_2337BF090(&p_p);
      }

      else
      {
        *(v24 + 64) = v11;
        *(v24 + 56) = sub_2337F8B38;
        v32[0] = 0;
      }
    }

    sub_2337BF090(v32);
  }

  else
  {
    v10 = sub_2337F8AEC((v9 + 56));
    if (!v10)
    {
      sub_2337BEE3C();
    }

    v11 = *v10;
  }

  if (SHIBYTE(__p.__r_.__value_.__r.__words[2]) < 0)
  {
    operator delete(__p.__r_.__value_.__l.__data_);
  }

  return v11;
}

void sub_2337F5940(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14, void *__p, uint64_t a16, int a17, __int16 a18, char a19, char a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, std::__shared_weak_count *a26)
{
  __cxa_free_exception(v28);

  if (a26)
  {
    sub_2337239E8(a26);
  }

  if (a20 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

double sub_2337F5A2C(uint64_t a1)
{
  (*(*a1 + 72))(&v6);
  v2 = v6;
  v3 = (*(*a1 + 120))(a1);
  v4 = sub_2337F5668(v2, @"directionLowThreshold", v3, &unk_284917910);
  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v4;
}

void sub_2337F5AE0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

double sub_2337F5B00(uint64_t a1)
{
  (*(*a1 + 72))(&v6);
  v2 = v6;
  v3 = (*(*a1 + 120))(a1);
  v4 = sub_2337F5668(v2, @"gradientThreshold", v3, &unk_284917930);
  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v4;
}

void sub_2337F5BB4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F5C14(uint64_t a1)
{
  (*(*a1 + 72))(&v6);
  v2 = v6;
  v3 = (*(*a1 + 120))(a1);
  v4 = sub_2337D0E68(v2, @"blackLevelExtendEnabled", v3, &unk_284917950);
  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v4;
}

void sub_2337F5CC0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F5CE0(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) <= 6 && (*(*a1 + 120))(a1) != 2)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  v2 = (*(*a1 + 2168))(a1);
  if (v2 == -583279181)
  {
    return 4;
  }

  if (v2 != 2011985870)
  {
    return 0xFFFFFFFFLL;
  }

  v3 = (*(*a1 + 2992))(a1);
  v4 = (*(*a1 + 3000))(a1);
  if (v3)
  {
    v5 = 6;
    v6 = 8;
  }

  else
  {
    v5 = 5;
    v6 = 7;
  }

  if (v4)
  {
    return v6;
  }

  else
  {
    return v5;
  }
}

void sub_2337F5E74(uint64_t a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X8>)
{
  *(a3 + 480) = 0u;
  *(a3 + 496) = 0u;
  *(a3 + 448) = 0u;
  *(a3 + 464) = 0u;
  *(a3 + 416) = 0u;
  *(a3 + 432) = 0u;
  *(a3 + 384) = 0u;
  *(a3 + 400) = 0u;
  *(a3 + 352) = 0u;
  *(a3 + 368) = 0u;
  *(a3 + 320) = 0u;
  *(a3 + 336) = 0u;
  *(a3 + 288) = 0u;
  *(a3 + 304) = 0u;
  *(a3 + 256) = 0u;
  *(a3 + 272) = 0u;
  *(a3 + 224) = 0u;
  *(a3 + 240) = 0u;
  *(a3 + 192) = 0u;
  *(a3 + 208) = 0u;
  *(a3 + 160) = 0u;
  *(a3 + 176) = 0u;
  *(a3 + 128) = 0u;
  *(a3 + 144) = 0u;
  *(a3 + 96) = 0u;
  *(a3 + 112) = 0u;
  *(a3 + 64) = 0u;
  *(a3 + 80) = 0u;
  *(a3 + 32) = 0u;
  *(a3 + 48) = 0u;
  *a3 = 0u;
  *(a3 + 16) = 0u;
  v5.n128_f32[0] = sub_2338537B4(a1, a2, a3);
  *(a3 + 196) = 0;
  *(a3 + 188) = 0;
  *(a3 + 9) = (*(*a1 + 2976))(a1, v5);
  *(a3 + 40) = 1063675494;
  *(a3 + 68) = 1078774989;
  *(a3 + 108) = 0;
  v6 = (*(*a1 + 1080))(a1);
  *(a3 + 116) = v6;
  *(a3 + 120) = 0x200000000;
  *(a3 + 128) = 0x3F2AAAB000000001;
  *(a3 + 136) = 1;
  *(a3 + 140) = 0;
  *(a3 + 144) = 2 * ((*(*a1 + 256))(a1) > 0x190);
  *(a3 + 148) = 0x3CF5C28F3D48B439;
  *(a3 + 156) = 1071602729;
  *(a3 + 301) = 1;
  v7 = (*(*a1 + 2320))(a1);
  *(a3 + 112) = v7;
  *(a3 + 304) = 1;
  *(a3 + 308) = 1;
  v8 = (*(*a1 + 3008))(a1);
  *(a3 + 620) = v8;
  (*(*a1 + 744))(&v22, a1);
  v9 = v22;
  v10 = v23 - v22;
  if (v23 == v22 || (v11 = *v22 * 1.04, *(a3 + 624) = v11, v10 < 9) || (v12 = v9[1] * 1.01, *(a3 + 628) = v12, v10 == 16))
  {
    sub_2337306B0();
  }

  v13 = v9[2] * 0.91;
  *(a3 + 632) = v13;
  v23 = v9;
  operator delete(v9);
  *(a3 + 188) = 1;
  *(a3 + 196) = 4489188110499840000;
  v14 = (*(*a1 + 2960))(a1);
  *(a3 + 204) = v14;
  v15 = (*(*a1 + 2968))(a1);
  *(a3 + 208) = v15;
  *(a3 + 248) = 0;
  *(a3 + 212) = 1;
  *(a3 + 228) = 1;
  *(a3 + 240) = 1;
  v16 = (*(*a1 + 3000))(a1);
  v17 = 0x3B83126F3F000000;
  if (v16)
  {
    v18 = 0x3B83126F3F000000;
  }

  else
  {
    v19 = (*(*a1 + 2992))(a1);
    v17 = 0x3B83126F3F000000;
    v18 = 0x3B83126F3F000000;
    if (v19)
    {
      *&v20 = (*(*a1 + 256))(a1, 5.04831901e-22) / -75.0 + 34.6667;
      v17 = v20;
      v18 = 0x3D5D2F1B3CB43958;
    }
  }

  *(a3 + 216) = v17;
  *(a3 + 232) = v18;
  *(a3 + 244) = v18;
  *(a3 + 224) = 0;
  *(a3 + 252) = 257;
  *(a3 + 256) = 1025490551;
  *(a3 + 268) = 2;
  v21 = (*(*a1 + 2984))(a1);
  *(a3 + 184) = v21;
  *(a3 + 163) = v21 > 1.0e-10;
}

void sub_2337F6398(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F63B4(_BYTE *a1, uint64_t a2, void *a3)
{
  v5 = a3;
  if ((*(*a1 + 120))(a1) <= 6)
  {
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  a1[400] = 1;
  sub_2337C1B84(a1, a2, v5);
  if (a2 && (*(*a1 + 2992))(a1))
  {
    v6 = sub_2337854A4(v5, *MEMORY[0x277CD3468], 0);
    v7 = objc_autoreleasePoolPush();
    (*(*a1 + 1200))(&v111, a1);
    if (sub_2337E0044(&v111) < 3 || sub_2337E003C(&v111) <= 2)
    {
      v108 = __cxa_allocate_exception(0x10uLL);
      MEMORY[0x2383ABCE0](v108, "RawCameraException");
      __cxa_throw(v108, MEMORY[0x277D82760], MEMORY[0x277D82600]);
    }

    v8 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 0);
    v110 = v9;
    v10 = *sub_2337DFD6C(&v109, 0);
    v11 = (*(*a1 + 3016))(a1);
    v16 = objc_msgSend_numberWithDouble_(v8, v12, v13, v14, v15, v10 * v11);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v17, v16, @"mc00", v18);

    v19 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 0);
    v110 = v20;
    v21 = *sub_2337DFD6C(&v109, 1u);
    v22 = (*(*a1 + 3016))(a1);
    v27 = objc_msgSend_numberWithDouble_(v19, v23, v24, v25, v26, v21 * v22);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v28, v27, @"mc01", v29);

    v30 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 0);
    v110 = v31;
    v32 = *sub_2337DFD6C(&v109, 2u);
    v33 = (*(*a1 + 3016))(a1);
    v38 = objc_msgSend_numberWithDouble_(v30, v34, v35, v36, v37, v32 * v33);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v39, v38, @"mc02", v40);

    v41 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 1u);
    v110 = v42;
    v43 = *sub_2337DFD6C(&v109, 0);
    v44 = (*(*a1 + 3016))(a1);
    v49 = objc_msgSend_numberWithDouble_(v41, v45, v46, v47, v48, v43 * v44);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v50, v49, @"mc10", v51);

    v52 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 1u);
    v110 = v53;
    v54 = *sub_2337DFD6C(&v109, 1u);
    v55 = (*(*a1 + 3016))(a1);
    v60 = objc_msgSend_numberWithDouble_(v52, v56, v57, v58, v59, v54 * v55);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v61, v60, @"mc11", v62);

    v63 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 1u);
    v110 = v64;
    v65 = *sub_2337DFD6C(&v109, 2u);
    v66 = (*(*a1 + 3016))(a1);
    v71 = objc_msgSend_numberWithDouble_(v63, v67, v68, v69, v70, v65 * v66);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v72, v71, @"mc12", v73);

    v74 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 2u);
    v110 = v75;
    v76 = *sub_2337DFD6C(&v109, 0);
    v77 = (*(*a1 + 3016))(a1);
    v82 = objc_msgSend_numberWithDouble_(v74, v78, v79, v80, v81, v76 * v77);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v83, v82, @"mc20", v84);

    v85 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 2u);
    v110 = v86;
    v87 = *sub_2337DFD6C(&v109, 1u);
    v88 = (*(*a1 + 3016))(a1);
    v93 = objc_msgSend_numberWithDouble_(v85, v89, v90, v91, v92, v87 * v88);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v94, v93, @"mc21", v95);

    v96 = MEMORY[0x277CCABB0];
    v109 = sub_2337DFCEC(&v111, 2u);
    v110 = v97;
    v98 = *sub_2337DFD6C(&v109, 2u);
    v99 = (*(*a1 + 3016))(a1);
    v104 = objc_msgSend_numberWithDouble_(v96, v100, v101, v102, v103, v98 * v99);
    objc_msgSend_setObject_forKeyedSubscript_(v6, v105, v104, @"mc22", v106);

    if (__p)
    {
      v113 = __p;
      operator delete(__p);
    }

    objc_autoreleasePoolPop(v7);
  }
}

id sub_2337F6AC4(_BYTE *a1, unsigned int a2)
{
  if ((*(*a1 + 120))(a1) <= 6)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  v4 = sub_2337C9490(a1, a2);
  v7 = v4;
  if (a1[400] == 1)
  {
    objc_msgSend_setObject_forKeyedSubscript_(v4, v5, MEMORY[0x277CBEC38], @"inputLinearized", v6);
  }

  return v7;
}

id sub_2337F6BA0(uint64_t a1, unsigned int a2)
{
  v3 = sub_2337C4398(a1, a2);
  if ((*(*a1 + 2992))(a1))
  {
    v7 = MEMORY[0x277CCABB0];
    (*(*a1 + 3008))(a1);
    v12 = objc_msgSend_numberWithDouble_(v7, v8, v9, v10, v11);
    objc_msgSend_setObject_forKeyedSubscript_(v3, v13, v12, @"fujiHigh", v14);
  }

  v15 = sub_2337397B0(v3, @"pattern", v4, v5, v6);
  v19 = objc_msgSend_numberWithInt_(MEMORY[0x277CCABB0], v16, (v15 >> 4) & 0xF0F0F0F | (16 * v15) & 0xF0F0F0F0, v17, v18);
  objc_msgSend_setObject_forKeyedSubscript_(v3, v20, v19, @"pattern", v21);

  return v3;
}

void sub_2337F6CC8(_Unwind_Exception *a1)
{
  v3 = v2;

  _Unwind_Resume(a1);
}

uint64_t (*sub_2337F6CF4(uint64_t a1))(void, void, void, void, void)
{
  if ((*(*a1 + 120))(a1) <= 6)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  return sub_2338D6540(a1);
}

void sub_2337F6D88(uint64_t a1)
{
  v6[0] = &unk_284917748;
  v6[1] = 0x300000000;
  (*(*a1 + 160))(&v4);
  v1 = v4;
  sub_23372A488(__p, "RAF:WB_GRGBLevels");
  (*(*v1 + 600))(v1, __p, v6, 3);
  if (v3 < 0)
  {
    operator delete(__p[0]);
  }

  if (v5)
  {
    sub_2337239E8(v5);
  }
}

void sub_2337F6E74(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

BOOL sub_2337F6EA4(uint64_t *a1)
{
  v2 = (*(*a1 + 176))(a1);
  v3 = *a1;
  if (v2)
  {
    return (*(v3 + 584))(a1) == 2;
  }

  v5 = (*(v3 + 344))(a1);
  v6 = (*(*a1 + 408))(a1);
  v7 = (*(*a1 + 408))(a1) >> 32;
  return v5 > (v7 + ((*(*a1 + 408))(a1) >> 32) / 2) * v6;
}

double sub_2337F702C(uint64_t a1)
{
  v1 = (*(*a1 + 2992))(a1);
  result = 0.0;
  if (v1)
  {
    return 16.0;
  }

  return result;
}

double sub_2337F7084(uint64_t a1)
{
  v1 = (*(*a1 + 2992))(a1);
  result = 1.0;
  if (v1)
  {
    return 5.0;
  }

  return result;
}

void sub_2337F70D4(uint64_t a1@<X0>, unsigned int *a2@<X8>)
{
  sub_233813710(a1);
  v4 = (*(*a1 + 3016))(a1);
  sub_2337E0244(a2, &v5, v4);
  sub_2337E004C(a2, &v5);
  if (__p)
  {
    v7 = __p;
    operator delete(__p);
  }
}

void sub_2337F715C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11)
{
  if (__p)
  {
    operator delete(__p);
  }

  v13 = *(v11 + 8);
  if (v13)
  {
    *(v11 + 16) = v13;
    operator delete(v13);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F7190(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  sub_23381373C(a1);
  v4 = (*(*a1 + 3016))(a1);
  sub_2337E0244(&v5, a2, v4);
  if (__p)
  {
    v7 = __p;
    operator delete(__p);
  }
}

void sub_2337F7210(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F722C(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  sub_233813768(a1);
  v4 = (*(*a1 + 3016))(a1);
  sub_2337E0244(&v5, a2, v4);
  if (__p)
  {
    v7 = __p;
    operator delete(__p);
  }
}

void sub_2337F72AC(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F72C8(void *a1)
{
  sub_23373C69C(a1);
  v2 = a1[3];
  if (v2)
  {
    v3 = __dynamic_cast(v2, &unk_28490A7B0, &unk_2849200C8, 0);
    if (v3)
    {
      v4 = v3;
      v5 = a1[4];
      if (v5)
      {
        atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
      }

      if ((*(*a1 + 2992))(a1))
      {
        v6 = 2;
      }

      else
      {
        v6 = 1;
      }

      (*(*v4 + 216))(v4, v6);
      if (v5)
      {

        sub_2337239E8(v5);
      }
    }
  }
}

void sub_2337F73E4(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    sub_2337239E8(v1);
  }

  _Unwind_Resume(exception_object);
}

id sub_2337F73FC(_BYTE *a1, void *a2)
{
  v3 = a2;
  if (objc_msgSend_isEqualToString_(v3, v4, @"fujiHighlightEnabled", v5, v6))
  {
    v10 = (*(*a1 + 2992))(a1);
  }

  else
  {
    if (!objc_msgSend_isEqualToString_(v3, v7, @"fujiHybridMode", v8, v9))
    {
      v12 = sub_2338D3C20(a1, v3);
      goto LABEL_9;
    }

    v10 = a1[400];
  }

  v11 = MEMORY[0x277CBEC28];
  if (v10)
  {
    v11 = MEMORY[0x277CBEC38];
  }

  v12 = v11;
LABEL_9:
  v13 = v12;

  return v13;
}

void sub_2337F74DC(void *a1)
{
  if (!a1[3])
  {
    (*(*a1 + 2888))(&v5);
    if (v6 == v5)
    {
      exception = __cxa_allocate_exception(0x10uLL);
      MEMORY[0x2383ABCE0](exception, "RawCameraException");
      __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
    }

    if (*v5 == 9)
    {
      (*(*a1 + 160))(&v3, a1);
      (*(*v3 + 384))(&v4);
      (*(*a1 + 336))(a1);
      (*(*a1 + 408))(a1);
      (*(*a1 + 432))(a1);
      sub_2337F8DBC();
    }

    if (*v5 == 8)
    {
      (*(*a1 + 160))(&v3, a1);
      (*(*v3 + 384))(&v4);
      (*(*a1 + 336))(a1);
      (*(*a1 + 408))(a1);
      (*(*a1 + 432))(a1);
      sub_2337F8C00();
    }

    v6 = v5;
    operator delete(v5);
  }
}

void sub_2337F78BC(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, std::__shared_weak_count *a14, uint64_t a15, std::__shared_weak_count *a16, uint64_t a17, uint64_t a18)
{
  if (a16)
  {
    sub_2337239E8(a16);
  }

  if (a14)
  {
    sub_2337239E8(a14);
  }

  v20 = *(v18 - 48);
  if (v20)
  {
    *(v18 - 40) = v20;
    operator delete(v20);
  }

  _Unwind_Resume(exception_object);
}

id sub_2337F7940(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) <= 6)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  v5 = objc_msgSend_array(MEMORY[0x277CBEB18], v1, v2, v3, v4);
  v6 = sub_2338191A8(0);
  objc_msgSend_addObject_(v5, v7, v6, v8, v9);

  v10 = sub_2338191A8(1);
  objc_msgSend_addObject_(v5, v11, v10, v12, v13);

  v14 = sub_2338191A8(2);
  objc_msgSend_addObject_(v5, v15, v14, v16, v17);

  return v5;
}

uint64_t sub_2337F7A70(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    if ((*(*a1 + 128))(a1))
    {

      sub_2337FC940();
    }

    v3 = *(*a1 + 2064);

    return v3(a1);
  }

  else
  {

    return sub_2337D5E40(a1);
  }
}

BOOL sub_2337F7B70(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    return 0;
  }

  return sub_233739E48(a1);
}

uint64_t sub_2337F7BE0@<X0>(uint64_t *a1@<X0>, uint64_t *a2@<X8>)
{
  result = (*(*a1 + 120))(a1);
  if (result >= 7)
  {

    return sub_23373C400(a1, a2);
  }

  v5 = a1[3];
  if (!v5)
  {
    (*(*a1 + 2896))(a1);
    if (!a1[3])
    {
      goto LABEL_13;
    }

    v6 = (*(*a1 + 864))(a1);
    sub_2337AED08(a1[3], v6 - 5);
    result = (*(*a1 + 816))(a1);
    v5 = a1[3];
    if (result == 1)
    {
      *(v5 + 184) = 1;
      goto LABEL_10;
    }

    if (!v5)
    {
LABEL_13:
      __cxa_allocate_exception(0x10uLL);
      MEMORY[0x2383ABCE0]();
      sub_2338F83F4();
    }
  }

LABEL_10:
  v7 = a1[4];
  *a2 = v5;
  a2[1] = v7;
  if (v7)
  {
    atomic_fetch_add_explicit((v7 + 8), 1uLL, memory_order_relaxed);
  }

  return result;
}

void sub_2337F7D78(uint64_t a1@<X0>, void **a2@<X8>)
{
  v16 = *MEMORY[0x277D85DE8];
  if ((*(*a1 + 120))(a1) < 7)
  {
    (*(*a1 + 160))(&__p, a1);
    (*(*__p + 368))(__p);
    if (v13)
    {
      sub_2337239E8(v13);
    }

    v4 = *a2;
    v5 = a2[1];
    if (v5 == *a2)
    {
      if (v5)
      {
        a2[1] = v4;
        operator delete(v4);
      }

      if ((*(*a1 + 808))(a1))
      {
        __p = 0x3FF0000000000000;
        sub_233731694(a2, 3uLL);
      }

      else
      {
        (*(*a1 + 704))(&__p, a1);
        if (v13 - __p == 24)
        {
          __asm { FMOV            V1.2D, #1.0 }

          v14 = vdivq_f64(_Q1, vcvtq_f64_f32(vcvt_f32_f64(*__p)));
          v11 = *(__p + 2);
          v15 = 1.0 / v11;
          a2[1] = 0;
          a2[2] = 0;
          *a2 = 0;
          sub_233764ED4(a2, &v14, &v16, 3uLL);
        }

        else
        {
          v14.f64[0] = 1.0;
          sub_233731694(a2, 3uLL);
        }

        if (__p)
        {
          v13 = __p;
          operator delete(__p);
        }
      }
    }
  }

  else
  {

    sub_233812568(a1, a2);
  }
}

void sub_2337F7FD0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F800C(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    v3 = (*(*a1 + 176))(a1);
    v4 = *a1;
    if (v3)
    {
      v5 = *(v4 + 984);
      v6 = a1;
    }

    else
    {
      v5 = *(v4 + 992);
      v6 = a1;
    }

    return v5(v6);
  }

  else
  {

    return sub_2337D4BE8(a1);
  }
}

void sub_2337F811C(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    if (((*(*a1 + 1048))(a1) & 1) == 0)
    {
      (*(*a1 + 1608))(a1, -1.0);
      (*(*a1 + 1616))(a1);
      (*(*a1 + 2096))(a1);
      (*(*a1 + 2080))(a1);
    }
  }

  else
  {

    sub_2337D6F44(a1);
  }
}

void sub_2337F82E0(uint64_t a1, _DWORD *a2, _DWORD *a3, char *a4)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    *a3 = 1065353216;
    *a2 = 1065353216;
    *a4 = 0;
  }

  else
  {

    sub_233852E34(a1, a2, a3, a4);
  }
}

uint64_t sub_2337F8380(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    return 0;
  }

  return sub_2338DA04C(a1);
}

void sub_2337F83F0(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    if ((*(*a1 + 2264))(a1))
    {
      (*(*a1 + 2864))(&v6, a1);
      v5 = 0;
      sub_23381E188(v6, &v5, v2, v3, v4);
      if (v7)
      {
        sub_2337239E8(v7);
      }
    }
  }

  else
  {

    sub_233850DD4(a1);
  }
}

void sub_2337F851C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_2337239E8(a12);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F8534(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    (*(*a1 + 1552))(a1);
    v7 = (*(*a1 + 1504))(a1);
    if ((*(*a1 + 2264))(a1))
    {
      (*(*a1 + 2864))(&v5, a1);
      v7 = sub_23381E174(v5, &v7, v2, v3, v4);
      if (v6)
      {
        sub_2337239E8(v6);
      }
    }

    if (((*(*a1 + 1048))(a1) & 1) == 0)
    {
      (*(*a1 + 2088))(a1);
    }
  }

  else
  {

    sub_2338D9CA4(a1);
  }
}

void sub_2337F8754(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, std::__shared_weak_count *a11)
{
  if (a11)
  {
    sub_2337239E8(a11);
  }

  _Unwind_Resume(exception_object);
}

double sub_2337F876C(uint64_t a1)
{
  if ((*(*a1 + 120))(a1) < 7)
  {
    v3 = -1.0;
    if (!(*(*a1 + 1064))(a1))
    {
      return v3;
    }

    if ((*(*a1 + 1056))(a1))
    {
      sub_2337D5AE8(a1, &__p);
      v3 = fmax(*__p, fmax(*(__p + 1), fmax(*(__p + 2), *(__p + 3))));
      v10 = __p;
      operator delete(__p);
      return v3;
    }

    (*(*a1 + 1120))(&__p, a1);
    if (!__p)
    {
      goto LABEL_16;
    }

    v4 = __dynamic_cast(__p, &unk_284919458, &unk_2849193C0, 0);
    if (v4)
    {
      v5 = v10;
      if (v10)
      {
        atomic_fetch_add_explicit(&v10->__shared_owners_, 1uLL, memory_order_relaxed);
        v4[32] = 0;
        sub_2337239E8(v5);
        if (!__p)
        {
          goto LABEL_16;
        }
      }

      else
      {
        v4[32] = 0;
      }
    }

    if (!sub_2337BF190(&unk_2849102D8, &unk_2849102D8))
    {
      v6 = __p;
      v7 = (*(*a1 + 256))(a1);
      (*(*a1 + 264))(a1);
      v3 = (**v6)(v6, llround(v7));
      if (v3 >= 0.0)
      {
        v8 = 0;
        goto LABEL_17;
      }
    }

LABEL_16:
    v8 = 1;
LABEL_17:
    if (v10)
    {
      sub_2337239E8(v10);
    }

    if (v8)
    {
      return (*(*a1 + 2072))(a1);
    }

    return v3;
  }

  return sub_2337D61F8(a1);
}

void sub_2337F8A54(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, std::__shared_weak_count *a11)
{
  if (a11)
  {
    sub_2337239E8(a11);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F8A6C(uint64_t a1)
{
  sub_233736628(a1);

  JUMPOUT(0x2383ABF10);
}

uint64_t sub_2337F8AA4(uint64_t a1)
{
  v1 = MEMORY[0x277CCABB0];
  (*(*(a1 + 32) + 16))();

  return objc_msgSend_numberWithDouble_(v1, v2, v3, v4, v5);
}

uint64_t (**sub_2337F8AEC(uint64_t (**result)(uint64_t, void, void, void, void *)))(uint64_t, void, void, void, void *)
{
  if (result)
  {
    if (*result)
    {
      return (*result)(3, result, 0, MEMORY[0x277D827A8], &unk_233907C88);
    }

    else
    {
      return 0;
    }
  }

  return result;
}

void *sub_2337F8B38(int a1, void *a2, void *a3, uint64_t a4, void *a5)
{
  if (a1 <= 1)
  {
    if (a1)
    {
      result = 0;
      a3[1] = a2[1];
      *a3 = sub_2337F8B38;
      return result;
    }

    result = 0;
LABEL_9:
    *a2 = 0;
    return result;
  }

  if (a1 == 2)
  {
    result = 0;
    a3[1] = a2[1];
    *a3 = sub_2337F8B38;
    goto LABEL_9;
  }

  if (a1 != 3)
  {
    return MEMORY[0x277D827A8];
  }

  if (a4)
  {
    v6 = sub_2337BF190(a4, MEMORY[0x277D827A8]);
  }

  else
  {
    v6 = a5 == &unk_233907C88;
  }

  if (v6)
  {
    return a2 + 1;
  }

  else
  {
    return 0;
  }
}

void *sub_2337F8CA4(void *a1, void *a2, unint64_t *a3, void *a4, _OWORD *a5)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_284918578;
  sub_2337AD9D8((a1 + 3), a2, *a3, a4, a5);
  a1[3] = &unk_28490FE50;
  return a1;
}

void sub_2337F8D40(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284918578;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

uint64_t sub_2337F8E60(uint64_t a1, void *a2, unint64_t *a3, void *a4, _OWORD *a5)
{
  *(a1 + 8) = 0;
  *(a1 + 16) = 0;
  *a1 = &unk_2849185C8;
  sub_2337AD9D8(a1 + 24, a2, *a3, a4, a5);
  *(a1 + 24) = &unk_284910030;
  *(a1 + 211) = 0;
  return a1;
}

void sub_2337F8F00(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2849185C8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337F9284(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F92C0(void *a1)
{
  sub_23373C7EC(a1);
  if (!a1[3])
  {
    (*(*a1 + 160))(&v2, a1);
    sub_2337F9510(&v2, &v4);
    if (v3)
    {
      sub_2337239E8(v3);
    }

    if (v4)
    {
      (*(*v4 + 384))(&v2);
      (*(*a1 + 336))(a1);
      (*(*a1 + 408))(a1);
      (*(*a1 + 432))(a1);
      sub_2337FA0C0();
    }

    if (v5)
    {
      sub_2337239E8(v5);
    }
  }
}

void sub_2337F94C8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a17)
  {
    sub_2337239E8(a17);
  }

  v19 = *(v17 - 32);
  if (v19)
  {
    sub_2337239E8(v19);
  }

  _Unwind_Resume(exception_object);
}

void *sub_2337F9510@<X0>(void **a1@<X0>, void **a2@<X8>)
{
  v2 = a1;
  result = *a1;
  if (result && (result = __dynamic_cast(result, &unk_284903320, &unk_2849081A8, 0)) != 0)
  {
    v5 = v2[1];
    *a2 = result;
    a2[1] = v5;
  }

  else
  {
    v2 = a2;
  }

  *v2 = 0;
  v2[1] = 0;
  return result;
}

uint64_t sub_2337F9594(uint64_t a1)
{
  (*(*a1 + 160))(&v6);
  v1 = v6;
  sub_23372A488(__p, "CIFF");
  v2 = (*(*v1 + 264))(v1, __p);
  if (v5 < 0)
  {
    operator delete(__p[0]);
  }

  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v2;
}

void sub_2337F964C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

double sub_2337F967C(uint64_t a1)
{
  (*(*a1 + 160))(&v6);
  v1 = v6;
  sub_23372A488(__p, "CIFF");
  v2 = (*(*v1 + 280))(v1, __p, 1);
  if (v5 < 0)
  {
    operator delete(__p[0]);
  }

  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v2;
}

void sub_2337F9740(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F9770(uint64_t a1)
{
  v8 = &unk_28490E658;
  (*(*a1 + 160))(&v6);
  v1 = v6;
  sub_23372A488(__p, "CIFF:CanonShotInfo");
  v2 = sub_233733D74(v1, __p, &v8);
  if (v5 < 0)
  {
    operator delete(__p[0]);
  }

  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v2;
}

void sub_2337F9824(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, uint64_t a15, std::__shared_weak_count *a16)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  if (a16)
  {
    sub_2337239E8(a16);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F9884(uint64_t a1@<X0>, double **a2@<X8>)
{
  (*(*a1 + 160))(&v14);
  sub_2337F9510(&v14, &v16);
  if (v15)
  {
    sub_2337239E8(v15);
  }

  if (v16)
  {
    (*(*a1 + 1016))(&v14, a1);
    v4 = v16[98];
    v5 = v16[99];
    if (v5)
    {
      atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    sub_2337238F0(__p, *(v4 + 52), *(v4 + 48));
    v13[0] = 0;
    v13[1] = __p[0];
    sub_2337B0EFC(v4, v13, __p);
    v6 = 0;
    v7 = v14;
    v8 = __p[0];
    v9 = -(*(v4 + 48) >> 2);
    do
    {
      *&v8[v6] = *&v8[v6] + v9 * *&v7[v6];
      v6 += 8;
    }

    while (v6 != 32);
    sub_233730758(a2, 3uLL);
    v10 = __p[0];
    v11 = *a2;
    *v11 = 1.0 / *__p[0];
    v11[1] = 2.0 / (v10[1] + v10[2]);
    v11[2] = 1.0 / v10[3];
    __p[1] = v10;
    operator delete(v10);
    if (v5)
    {
      sub_2337239E8(v5);
    }

    if (v14)
    {
      v15 = v14;
      operator delete(v14);
    }
  }

  else
  {
    v14 = 0x3FF0000000000000;
    sub_233731694(a2, 3uLL);
  }

  if (v17)
  {
    sub_2337239E8(v17);
  }
}

void sub_2337F9A40(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14, uint64_t a15)
{
  v17 = *(v15 - 40);
  if (v17)
  {
    sub_2337239E8(v17);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F9A9C(uint64_t a1)
{
  (*(*a1 + 72))(&v6);
  v2 = v6;
  v3 = (*(*a1 + 120))(a1);
  v4 = sub_2337D0E68(v2, @"add2WhenLessThan512", v3, &unk_284918608);
  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v4;
}

void sub_2337F9B48(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F9B68(uint64_t a1)
{
  (*(*a1 + 2944))(v5);
  sub_23372A488(__p, "CIFF:CanonShotInfo");
  v2 = (*(*a1 + 2968))(a1, __p, v5);
  if (v4 < 0)
  {
    operator delete(__p[0]);
  }

  (*(*a1 + 2960))(a1, v2);
  if (v5[0])
  {
    v5[1] = v5[0];
    operator delete(v5[0]);
  }
}

void sub_2337F9C70(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *a9, uint64_t a10, int a11, __int16 a12, char a13, char a14, void *__p, uint64_t a16)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337F9CA8(uint64_t a1, uint64_t a2)
{
  (*(*a1 + 2200))(&v16);
  if (v18 < 0)
  {
    if (v17 == 3 && *v16 == 13892 && *(v16 + 2) == 48)
    {
LABEL_20:
      v15 = 0;
      v14 = &unk_284910F28;
      sub_23372A488(__p, "CIFF:ColorBalance");
      (*(*a1 + 2976))(a1, a2, __p, &v14);
      goto LABEL_28;
    }

    if (v17 == 3)
    {
      v5 = v16;
      goto LABEL_22;
    }

    if (v17 != 2)
    {
      goto LABEL_33;
    }

    v7 = *v16;
LABEL_18:
    if (v7 != 13895)
    {
      goto LABEL_33;
    }

    v15 = 0;
    v14 = &unk_284919218;
    sub_23372A488(__p, "CIFF:CanonColorInfo1");
    (*(*a1 + 2976))(a1, a2, __p, &v14);
    goto LABEL_28;
  }

  if (v18 == 2)
  {
    v7 = v16;
    goto LABEL_18;
  }

  if (v18 != 3)
  {
    goto LABEL_33;
  }

  if (v16 == 13892 && BYTE2(v16) == 48)
  {
    goto LABEL_20;
  }

  v5 = &v16;
LABEL_22:
  v8 = *v5;
  v9 = *(v5 + 2);
  if (v8 != 13124 || v9 != 48)
  {
LABEL_33:
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  v15 = 0;
  v14 = &unk_28490CE28;
  sub_23372A488(__p, "CIFF:CanonColorInfo1");
  (*(*a1 + 2976))(a1, a2, __p, &v14);
LABEL_28:
  if (v13 < 0)
  {
    operator delete(__p[0]);
  }

  if (v18 < 0)
  {
    operator delete(v16);
  }
}

void sub_2337F9F8C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, uint64_t a15, uint64_t a16, void *a17, uint64_t a18, int a19, __int16 a20, char a21, char a22)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  if (a22 < 0)
  {
    operator delete(a17);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337F9FE4(uint64_t a1, uint64_t a2, void **a3, unsigned int a4, uint64_t *a5)
{
  v6 = a4;
  if (a4 == 3)
  {
    a4 = 4;
  }

  v7 = sub_2337BF918(a1, a2, a3, a4, a5);
  if (v6 == 3)
  {
    if (v7)
    {
      v8 = *(*a5 + 8) ^ 0x410;
      v9 = *(*a5 + 12) ^ 0x45F3;
      v14 = veor_s8(**a5, 0x45F300000410);
      sub_23372630C(&v15, 3uLL);
      v10 = *a5;
      v11 = v15;
      *a5 = v15;
      *v11 = vrev64_s32(vmul_s32(vdup_n_s32(v9), v14));
      v11[1].i32[0] = v8 * v14.i32[0];
      v12 = a5[2];
      a5[2] = v16;
      *&v15 = v10;
      v16 = v12;
      if (v10)
      {
        *(&v15 + 1) = v10;
        operator delete(v10);
      }
    }
  }

  return 1;
}

uint64_t sub_2337FA164(uint64_t a1, void *a2, unint64_t *a3, void *a4, _OWORD *a5)
{
  *(a1 + 8) = 0;
  *(a1 + 16) = 0;
  *a1 = &unk_284919260;
  sub_2337AD9D8(a1 + 24, a2, *a3, a4, a5);
  *(a1 + 24) = &unk_2849192B0;
  *(a1 + 212) = 0;
  *(a1 + 216) = 257;
  return a1;
}

void sub_2337FA20C(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284919260;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337FA288(uint64_t a1)
{
  v1 = MEMORY[0x28223BE20](a1);
  v98[64] = *MEMORY[0x277D85DE8];
  v2 = sub_23378E038();
  v3 = v2;
  if ((v1 + 1) >= 2 && os_signpost_enabled(v2))
  {
    *buf = 0;
    _os_signpost_emit_with_name_impl(&dword_23371F000, v3, OS_SIGNPOST_INTERVAL_BEGIN, v1, "CCanonCompressedUnpacker", &unk_233945DBE, buf, 2u);
  }

  v94[0] = MEMORY[0x277D85DD0];
  v94[1] = 3221225472;
  v94[2] = sub_2337FABCC;
  v94[3] = &unk_2789EE800;
  v94[4] = v1;
  v4 = MEMORY[0x2383AC810](v94);
  v5 = sub_2337ADCC4(v1);
  v6 = *(v1 + 44);
  if ((v6 & 0x7FFFFFFC) >= 0x10004 || (v7 = v5, v8 = *(v1 + 48), !sub_2337B4F10(&byte_233907DB0[29 * *(v1 + 188)], v97)) || !sub_2337B4F10(&byte_233907E07[180 * *(v1 + 188)], v96))
  {
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  v9 = *(v1 + 192);
  v10 = *(v1 + 24);
  v11 = v8 * v6;
  v92 = ((v8 * v6 * v9) >> 2) + 540;
  sub_233723AE0(&v93, &v92);
  (*(*v10 + 40))(v10, &v93, 0);
  v12 = (*(*v1 + 152))(v1);
  v92 = 540;
  v93 = v12;
  sub_233757538(&v93, &v92);
  v92 = sub_233751844((v1 + 40));
  sub_233753AB0(&v93, &v92);
  v92 = (v8 * v6 * v9) >> 2;
  sub_2337580F8(&v93, &v92);
  v89 = v9;
  v13 = (v7 + 2 * (v8 * v6) - v93 + 896);
  (*(**(v1 + 24) + 32))(*(v1 + 24), v13);
  v88 = v6;
  v90 = v8;
  v91 = v1;
  if ((v8 * v6) >= 0x40)
  {
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = v11 >> 6;
    v18 = v13 + v93;
    v19 = v11;
    v20 = 32;
    v21 = 0uLL;
    do
    {
      v22 = v18 - v13;
      if ((v18 - v13 + ((39 - v20) >> 3)) < 0 || v18 - v13 + ((39 - v20) >> 3) > (2 * v19))
      {
        v86 = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](v86, "RawCameraException");
        __cxa_throw(v86, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }

      v23 = v19 <= 64;
      v19 -= 64;
      if (v23 && v22 >= 1 && v22 <= 0x1FF)
      {
        v24 = v13;
        v25 = v17;
        memmove(v98, v24, v22);
        v21 = 0uLL;
        v17 = v25;
        v13 = v98;
      }

      *(v7 + 96) = v21;
      *(v7 + 112) = v21;
      *(v7 + 64) = v21;
      *(v7 + 80) = v21;
      *(v7 + 32) = v21;
      *(v7 + 48) = v21;
      *v7 = v21;
      *(v7 + 16) = v21;
      if (v20 >= 16)
      {
        v26 = *v13;
        v27 = v13 + 2;
        if (v26 == 255)
        {
          v28 = 2;
        }

        else
        {
          v28 = 1;
        }

        v29 = v13[v28];
        if (v26 == 255)
        {
          v27 = v13 + 3;
        }

        v30 = (v16 << 16) | (v26 << 8);
        if (v29 == 255)
        {
          v13 = v27 + 1;
        }

        else
        {
          v13 = v27;
        }

        v16 = v30 | v29;
        v20 -= 16;
      }

      v31 = v16 << v20;
      v32 = v97[(v16 << v20) >> 23];
      v20 += (v32 >> 10) & 0x1F;
      if (v32 > 0x8000)
      {
        v39 = v32;
      }

      else
      {
        if ((v32 & 0x8000) != 0)
        {
          v32 = v97[HIWORD(v31) & 0x3FF];
          v20 += (v32 >> 10) & 0x1F;
        }

        v33 = v32 & 0xF;
        if (v33)
        {
          if (v20 >= 16)
          {
            v34 = *v13;
            v35 = v13 + 2;
            if (v34 == 255)
            {
              v36 = 2;
            }

            else
            {
              v36 = 1;
            }

            v37 = v13[v36];
            if (v34 == 255)
            {
              v35 = v13 + 3;
            }

            v38 = (v16 << 16) | (v34 << 8);
            if (v37 == 255)
            {
              v13 = v35 + 1;
            }

            else
            {
              v13 = v35;
            }

            v16 = v38 | v37;
            v20 -= 16;
          }

          v39 = ((v16 << v20) >> -v33) - ((((v16 << v20) >> 31) - 1) >> -v33);
          v20 += v33;
        }

        else
        {
          v39 = 0;
        }
      }

      v40 = 0;
      v15 += v39;
      LOWORD(v39) = v15;
      while (1)
      {
        if (v20 >= 16)
        {
          v41 = *v13;
          v42 = v13 + 2;
          if (v41 == 255)
          {
            v43 = 2;
          }

          else
          {
            v43 = 1;
          }

          v44 = v13[v43];
          if (v41 == 255)
          {
            v42 = v13 + 3;
          }

          v45 = (v16 << 16) | (v41 << 8);
          if (v44 == 255)
          {
            v13 = v42 + 1;
          }

          else
          {
            v13 = v42;
          }

          v16 = v45 | v44;
          v20 -= 16;
        }

        if (v40 > 62)
        {
          break;
        }

        v46 = v96[(v16 << v20) >> 23];
        v47 = v96[((v16 << v20) >> 16) & 0x3FF];
        *(v7 + 2 * v40) = v39;
        v20 += (v46 >> 10) & 0x1F;
        if (v46 > 0x8000)
        {
          v50 = (v46 >> 8) & 3;
          LOWORD(v39) = v46;
        }

        else
        {
          v48 = (v47 >> 10) & 0x1F;
          if (v46 != 0x8000)
          {
            v48 = 0;
          }

          v20 += v48;
          if (v46 == 0x8000)
          {
            v49 = v47;
          }

          else
          {
            v49 = v46;
          }

          v50 = (v49 >> 4) & 0x3F;
          v51 = v49 & 0xF;
          if ((v49 & 0xF) != 0)
          {
            if (v20 >= 16)
            {
              v52 = *v13;
              v53 = v13 + 2;
              if (v52 == 255)
              {
                v54 = 2;
              }

              else
              {
                v54 = 1;
              }

              v55 = v13[v54];
              if (v52 == 255)
              {
                v53 = v13 + 3;
              }

              v56 = (v16 << 16) | (v52 << 8);
              if (v55 == 255)
              {
                v13 = v53 + 1;
              }

              else
              {
                v13 = v53;
              }

              v16 = v56 | v55;
              v20 -= 16;
            }

            v39 = ((v16 << v20) >> -v51) - ((((v16 << v20) >> 31) - 1) >> -v51);
            v20 += v51;
          }

          else
          {
            LOWORD(v39) = 0;
          }
        }

        v40 += 1 + v50;
      }

      if (v40 == 63)
      {
        *(v7 + 126) = v39;
      }

      v7 += 128;
      ++v14;
    }

    while (v14 != v17);
  }

  v57 = sub_2337ADCC4(v91);
  if (v89)
  {
    (*(**(v91 + 24) + 40))(*(v91 + 24), v91 + 40, 0);
    if (v90)
    {
      for (i = 0; i != v90; ++i)
      {
        (*(**(v91 + 24) + 32))(*(v91 + 24), buf, v88 >> 2);
        if (*(v91 + 193))
        {
          if (v88)
          {
            v60 = buf;
            v61 = 512;
            v62 = ((v88 - 1) >> 2) + 1;
            v63 = 512;
            do
            {
              v64 = *v60++;
              v65 = v63 + v57->u16[0];
              v66 = v61 + v57->u16[1];
              v67 = (4 * v66) | (v64 >> 2) & 3;
              v63 = v65 + v57->u16[2];
              v61 = v66 + v57->u16[3];
              v57->i16[0] = v64 & 3 | (4 * v65);
              v57->i16[1] = v67;
              v57->i16[2] = (4 * v63) | (v64 >> 4) & 3;
              v57->i16[3] = (v64 >> 6) | (4 * v61);
              ++v57;
              --v62;
            }

            while (v62);
          }
        }

        else
        {
          v68.i64[0] = 0x200000002;
          v68.i64[1] = 0x200000002;
          v69.i64[0] = 0x300000003;
          v69.i64[1] = 0x300000003;
          if (v88)
          {
            v70 = 0x20000000200;
            v71 = buf;
            v72 = ((v88 - 1) >> 2) + 1;
            do
            {
              v73 = *v71++;
              v74.i32[0] = v57->u16[0];
              v74.i32[1] = v57->u16[1];
              v75.i32[0] = v57->u16[2];
              v75.i32[1] = v57->u16[3];
              *v76.i8 = vadd_s32(v70, v74);
              v70 = vadd_s32(*v76.i8, v75);
              v76.u64[1] = v70;
              v59.i32[0] = v73;
              v59.i32[1] = v73 >> 2;
              v59.i32[2] = v73 >> 4;
              v59 = vandq_s8(v59, v69);
              v59.i32[3] = vshrq_n_u32(vdupq_n_s32(v73), 6uLL).i32[3];
              v77 = vorrq_s8(vshlq_n_s32(v76, 2uLL), v59);
              *v57++ = vmovn_s32(vaddq_s32(v77, vandq_s8(vmovl_s16(vcgt_s16(0x200020002000200, vmovn_s32(v77))), v68)));
              --v72;
            }

            while (v72);
          }
        }
      }
    }
  }

  else if (v90)
  {
    for (j = 0; j != v90; ++j)
    {
      if (v88)
      {
        v79 = 0;
        v80 = 512;
        v81 = 512;
        do
        {
          v82 = v57->u16[2];
          v83 = v57->u16[3];
          v84 = v81 + v57->u16[0];
          v85 = v80 + v57->u16[1];
          v81 = v84 + v82;
          v80 = v85 + v83;
          v57->i16[0] = v84;
          v57->i16[1] = v85;
          v57->i16[2] = v84 + v82;
          v57->i16[3] = v85 + v83;
          ++v57;
          v79 += 4;
        }

        while (v79 < v88);
      }
    }
  }

  v4[2](v4);
}

void sub_2337FABCC(uint64_t a1)
{
  v2 = sub_23378E038();
  v3 = v2;
  v4 = *(a1 + 32);
  if (v4 - 1 <= 0xFFFFFFFFFFFFFFFDLL && os_signpost_enabled(v2))
  {
    *v5 = 0;
    _os_signpost_emit_with_name_impl(&dword_23371F000, v3, OS_SIGNPOST_INTERVAL_END, v4, "CCanonCompressedUnpacker", &unk_233945DBE, v5, 2u);
  }
}

void sub_2337FAC5C(void *a1)
{
  sub_233723A54(a1);

  JUMPOUT(0x2383ABF10);
}

double sub_2337FACC0(uint64_t a1, unsigned int a2, double a3)
{
  if (*(a1 + 32) == 1)
  {
    return sub_2337FACD4(a1, a2, a3);
  }

  else
  {
    return sub_2337FAE64(a1, a2, a3);
  }
}

double sub_2337FACD4(uint64_t a1, unsigned int a2, double a3)
{
  v3 = fmin(a3, 30.0);
  v4 = *(a1 + 24);
  v5 = *v4;
  if (!*v4)
  {
    v7 = -1.0;
LABEL_18:
    v16 = v7;
    goto LABEL_26;
  }

  v6 = 0;
  v7 = -1.0;
  while (1)
  {
    v8 = 0;
    v9 = v6;
    v10 = v7;
    v6 = v5;
    v11 = *(v4 + 8);
    if (v11 <= v3)
    {
      v12 = 64;
    }

    else
    {
      v12 = 16;
    }

    if (v11 <= v3)
    {
      v13 = 72;
    }

    else
    {
      v13 = 24;
    }

    v7 = 0.0;
    v14 = 1.0;
    do
    {
      v7 = v7 + v14 * *(v4 + v13 + v8);
      v14 = v3 * *(v4 + v12) * v14;
      v8 += 8;
    }

    while (v8 != 40);
    if (v7 < 0.0)
    {
      v7 = 0.0;
    }

    if (v6 == a2)
    {
      break;
    }

    if (v6 > a2)
    {
      if (v10 >= 0.0)
      {
        if (v6 - v9 <= 1)
        {
          __cxa_allocate_exception(0x10uLL);
          MEMORY[0x2383ABCE0]();
          sub_2338F83F4();
        }

        v17 = (a2 - v9) * (v7 - v10) / (v6 - v9);
        v18 = fmin(v7, v10);
        v19 = fmax(v7, v10);
        v20 = v10 + v17;
        v21 = v18 > v20 || v20 > v19;
        v7 = v20;
        if (v21)
        {
          __cxa_allocate_exception(0x10uLL);
          MEMORY[0x2383ABCE0]();
          sub_2338F83F4();
        }
      }

      break;
    }

    v15 = *(v4 + 112);
    v4 += 112;
    v5 = v15;
    if (!v15)
    {
      goto LABEL_18;
    }
  }

  v16 = v7;
  v22 = v7 < 0.0;
  v7 = v10;
  if (v22)
  {
    goto LABEL_18;
  }

LABEL_26:
  if (v3 < a3)
  {
    return a3 / v3 * v16;
  }

  return v16;
}

double sub_2337FAE64(uint64_t a1, int a2, double a3)
{
  v3 = fmin(a3, 30.0);
  v4 = *(a1 + 24);
  v5 = *v4;
  v6 = -1.0;
  if (*v4)
  {
    while (v5 != a2)
    {
      v7 = *(v4 + 28);
      v4 += 14;
      v5 = v7;
      if (!v7)
      {
        goto LABEL_13;
      }
    }

    v8 = 0;
    v9 = v4[1];
    v10 = 2;
    if (v9 <= v3)
    {
      v10 = 8;
    }

    v11 = 9;
    if (v9 > v3)
    {
      v11 = 3;
    }

    v6 = 0.0;
    v12 = 1.0;
    do
    {
      v6 = v6 + v12 * v4[v11 + v8];
      v12 = v3 * v4[v10] * v12;
      ++v8;
    }

    while (v8 != 5);
    if (v6 < 0.0)
    {
      v6 = 0.0;
    }
  }

LABEL_13:
  if (v3 < a3)
  {
    return a3 / v3 * v6;
  }

  return v6;
}

void *sub_2337FAF68(void *a1)
{
  *a1 = &unk_284919438;
  v2 = a1[2];
  if (v2)
  {
    sub_2337239E8(v2);
  }

  return a1;
}

void sub_2337FAFB4(void *a1)
{
  *a1 = &unk_284919438;
  v1 = a1[2];
  if (v1)
  {
    sub_2337239E8(v1);
  }

  JUMPOUT(0x2383ABF10);
}

uint64_t sub_2337FB094(uint64_t result, void *a2, uint64_t *a3)
{
  *(result + 8) = 0;
  *(result + 16) = 0;
  *result = &unk_2849193E8;
  v4 = *a3;
  v3 = a3[1];
  *(result + 24) = &unk_284919438;
  *(result + 32) = v4;
  *(result + 40) = v3;
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  *(result + 24) = &unk_2849193A0;
  *(result + 48) = *a2;
  *(result + 56) = 1;
  return result;
}

void sub_2337FB13C(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2849193E8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337FC25C(_Unwind_Exception *a1, int a2)
{
  if (a2)
  {
    sub_233721B78(a1);
  }

  _Unwind_Resume(a1);
}

void sub_2337FC278(uint64_t a1)
{
  v2 = sub_23378E104();
  v3 = v2;
  v4 = *(a1 + 32);
  if (v4 - 1 <= 0xFFFFFFFFFFFFFFFDLL && os_signpost_enabled(v2))
  {
    *v5 = 0;
    _os_signpost_emit_with_name_impl(&dword_23371F000, v3, OS_SIGNPOST_INTERVAL_END, v4, "RAWSimpleLensCorrectionFilter", &unk_233945DBE, v5, 2u);
  }
}

float sub_2337FC408(void **a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, float a6)
{
  objc_msgSend_W(a1[4], a2, a3, a4, a5);
  v9 = v8;
  v10 = ((a6 * a6) * a6);
  objc_msgSend_X(a1[5], v11, v12, v13, v14);
  v16 = v15;
  v17 = (a6 * a6);
  objc_msgSend_Y(a1[5], v18, v19, v20, v21);
  v23 = v22 * v17 + v10 * v16;
  v24 = a6;
  objc_msgSend_Z(a1[5], v25, v26, v27, v28);
  v30 = v23 + a6 * v29;
  objc_msgSend_W(a1[5], v31, v32, v33, v34);
  v127 = v30 + v35;
  objc_msgSend_X(a1[6], v36, v37, v38, v39);
  v41 = v40;
  objc_msgSend_Y(a1[6], v42, v43, v44, v45);
  v47 = v46 * v17 + v10 * v41;
  objc_msgSend_Z(a1[6], v48, v49, v50, v51);
  v53 = v47 + a6 * v52;
  objc_msgSend_W(a1[6], v54, v55, v56, v57);
  v59 = v53 + v58;
  objc_msgSend_X(a1[7], v60, v61, v62, v63);
  v65 = v64;
  objc_msgSend_Y(a1[7], v66, v67, v68, v69);
  v71 = v70 * v17 + v10 * v65;
  objc_msgSend_Z(a1[7], v72, v73, v74, v75);
  v77 = v71 + a6 * v76;
  objc_msgSend_W(a1[7], v78, v79, v80, v81);
  v83 = v77 + v82;
  objc_msgSend_X(a1[8], v84, v85, v86, v87);
  v89 = v88;
  objc_msgSend_Y(a1[8], v90, v91, v92, v93);
  v95 = v94 * v17 + v10 * v89;
  objc_msgSend_Z(a1[8], v96, v97, v98, v99);
  v101 = v95 + a6 * v100;
  objc_msgSend_W(a1[8], v102, v103, v104, v105);
  v107 = v101 + v106;
  objc_msgSend_Z(a1[9], v108, v109, v110, v111);
  if (v116 > a6)
  {
    v107 = v83;
  }

  objc_msgSend_Y(a1[9], v112, v113, v114, v115);
  if (v121 > v24)
  {
    v107 = v59;
  }

  objc_msgSend_X(a1[9], v117, v118, v119, v120);
  v123 = v122 <= v24;
  v124 = v127;
  if (v123)
  {
    v124 = v107;
  }

  v125 = v124;
  return (v9 * v125) + (a6 * (1.0 - v9));
}

double sub_2337FC590(uint64_t a1, const char *a2, uint64_t a3, uint64_t a4, uint64_t a5, double a6, double a7)
{
  objc_msgSend_X(*(a1 + 32), a2, a3, a4, a5);
  v11 = a6 - v10;
  objc_msgSend_Y(*(a1 + 32), v12, v13, v14, v15);
  v17 = hypot(v11, a7 - v16);
  objc_msgSend_Z(*(a1 + 32), v18, v19, v20, v21);
  v23 = v17 * v22;
  (*(*(a1 + 40) + 16))(v23);
  v29 = 1.0;
  if (v23 >= 0.001)
  {
    v29 = (v28 / v23);
  }

  v30 = v11 * v29;
  objc_msgSend_X(*(a1 + 32), v24, v25, v26, v27);
  v32 = v30 + v31;
  objc_msgSend_Y(*(a1 + 32), v33, v34, v35, v36);
  return v32;
}

double sub_2337FC658(uint64_t a1, int a2, double a3, double a4, double a5, double a6)
{
  if (a2 > 0)
  {
    return a3;
  }

  v6 = *MEMORY[0x277CBF398];
  v8 = *(MEMORY[0x277CBF398] + 8);
  v10 = *(MEMORY[0x277CBF398] + 16);
  v9 = *(MEMORY[0x277CBF398] + 24);
  v11 = 0.0;
  v12 = 0.0;
  do
  {
    r1_12 = v11;
    v43.origin.x = (*(*(a1 + 32) + 16))(a3 + a5 * v12, a4);
    v43.origin.y = v13;
    v43.size.width = 0.0;
    v43.size.height = 0.0;
    v35.origin.x = v6;
    v35.origin.y = v8;
    v35.size.width = v10;
    v35.size.height = v9;
    v36 = CGRectUnion(v35, v43);
    x = v36.origin.x;
    y = v36.origin.y;
    width = v36.size.width;
    height = v36.size.height;
    v44.origin.x = (*(*(a1 + 32) + 16))(a3 + a5 * (1.0 - v12), a4 + a6);
    v44.origin.y = v18;
    v44.size.width = 0.0;
    v44.size.height = 0.0;
    v37.origin.x = x;
    v37.origin.y = y;
    v37.size.width = width;
    v37.size.height = height;
    v38 = CGRectUnion(v37, v44);
    r1 = v38.origin.x;
    v19 = v38.origin.y;
    v20 = v38.size.width;
    v21 = v38.size.height;
    v45.origin.x = (*(*(a1 + 32) + 16))(a3, a4 + a6 * (1.0 - v12));
    v45.origin.y = v22;
    v45.size.width = 0.0;
    v45.size.height = 0.0;
    v39.origin.x = r1;
    v39.origin.y = v19;
    v39.size.width = v20;
    v39.size.height = v21;
    v40 = CGRectUnion(v39, v45);
    v23 = v40.origin.x;
    v24 = v40.origin.y;
    v25 = v40.size.width;
    v26 = v40.size.height;
    v46.origin.x = (*(*(a1 + 32) + 16))(a3 + a5, a4 + a6 * v12);
    v46.origin.y = v27;
    v46.size.width = 0.0;
    v46.size.height = 0.0;
    v41.origin.x = v23;
    v41.origin.y = v24;
    v41.size.width = v25;
    v41.size.height = v26;
    v42 = CGRectUnion(v41, v46);
    v6 = v42.origin.x;
    v8 = v42.origin.y;
    v10 = v42.size.width;
    v9 = v42.size.height;
    v11 = r1_12 + 0.125;
    v12 = (r1_12 + 0.125);
  }

  while (v12 < 0.99999);
  return v6;
}

void sub_2337FC9C0()
{
  exception = __cxa_allocate_exception(0x10uLL);
  MEMORY[0x2383ABCE0](exception, "RawCameraException");
  __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
}

void sub_2337FCA1C()
{
  exception = __cxa_allocate_exception(0x10uLL);
  MEMORY[0x2383ABCE0](exception, "RawCameraException");
  __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
}

void *sub_2337FCA78(void *a1)
{
  *a1 = &unk_284919438;
  v2 = a1[2];
  if (v2)
  {
    sub_2337239E8(v2);
  }

  return a1;
}

void sub_2337FCAC4(void *a1)
{
  *a1 = &unk_284919438;
  v1 = a1[2];
  if (v1)
  {
    sub_2337239E8(v1);
  }

  JUMPOUT(0x2383ABF10);
}

void sub_2337FCB50(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_284919478;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337FCBCC(uint64_t a1, uint64_t *a2)
{
  v3 = *a2;
  v2 = a2[1];
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 8), 1uLL, memory_order_relaxed);
  }

  v4 = *(a1 + 232);
  *(a1 + 224) = v3;
  *(a1 + 232) = v2;
  if (v4)
  {
    sub_2337239E8(v4);
  }
}

void sub_2337FCBF8(uint64_t a1)
{
  v1 = MEMORY[0x28223BE20](a1);
  v71 = *MEMORY[0x277D85DE8];
  v2 = sub_23378E038();
  v3 = v2;
  if ((v1 + 1) >= 2 && os_signpost_enabled(v2))
  {
    LOWORD(buf[0]) = 0;
    _os_signpost_emit_with_name_impl(&dword_23371F000, v3, OS_SIGNPOST_INTERVAL_BEGIN, v1, "CHasselbladUnpacker", &unk_233945DBE, buf, 2u);
  }

  v67[0] = MEMORY[0x277D85DD0];
  v67[1] = 3221225472;
  v67[2] = sub_2337FD5D4;
  v67[3] = &unk_2789EE800;
  v67[4] = v1;
  v4 = MEMORY[0x2383AC810](v67);
  v5 = sub_2337ADCC4(v1);
  v6 = *(v1 + 44);
  v7 = *(v1 + 48);
  LODWORD(v68) = (*(*v1 + 152))(v1);
  sub_233723AE0(buf, &v68);
  v8 = buf[0];
  v9 = v7 * v6;
  v10 = &v5[2 * v9 - buf[0] + 896];
  if (v10 < v5)
  {
    operator new[]();
  }

  (*(**(v1 + 24) + 32))(*(v1 + 24), v10, buf[0]);
  if (bswap32(*v10) >> 16 != 65496)
  {
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  DWORD2(v66) = v9;
  v65 = v1;
  *&v66 = 0;
  v64 = v4;
  v11 = 0;
  v12 = 0;
  v13 = &v10[v8];
  v14 = (v10 + 2);
  v68 = 0;
  v69 = 0;
  do
  {
    v15 = __rev16(*v14);
    if (v15 == 0xFFFF)
    {
      v14 = (v14 + 1);
      continue;
    }

    if (v15 < 0xFF01)
    {
      goto LABEL_108;
    }

    v16 = __rev16(v14[1]);
    if (v16 >= 0x102)
    {
      goto LABEL_108;
    }

    v17 = v13;
    v18 = (v14 + 2);
    v19 = v14 + v16 + 2;
    if (v15 == 65475)
    {
      v12 = __rev16(*(v14 + 5));
      v11 = __rev16(*(v14 + 7)) * *(v14 + 9);
      v14 = (v14 + v16 + 2);
LABEL_23:
      v13 = v17;
      continue;
    }

    v20 = v12;
    if (v15 != 65498)
    {
      if (v15 == 65476)
      {
        while (v18 < v19)
        {
          v21 = *v18;
          if (v21 > 1)
          {
            break;
          }

          v22 = &buf[512 * v21];
          *(&v68 + v21) = v22;
          v18 = sub_2337B4F10(v18 + 1, v22);
          if (!v18)
          {
            v58 = __cxa_allocate_exception(0x10uLL);
            MEMORY[0x2383ABCE0](v58, "RawCameraException");
            __cxa_throw(v58, MEMORY[0x277D82760], MEMORY[0x277D82600]);
          }
        }
      }

      v14 = v19;
      v12 = v20;
      goto LABEL_23;
    }

    if (*v18 - 4 < 0xFFFFFFFD || (v23 = 2 * *v18, v16 != v23 + 6))
    {
      v61 = __cxa_allocate_exception(0x10uLL);
      MEMORY[0x2383ABCE0](v61, "RawCameraException");
      __cxa_throw(v61, MEMORY[0x277D82760], MEMORY[0x277D82600]);
    }

    v24 = v18[v23 + 1];
    v14 = v19;
    v13 = v17;
    if (v24 != 8)
    {
      sub_2337B2204(v65);
      goto LABEL_106;
    }
  }

  while (v15 != 65498);
  if (v12 * v11 > DWORD2(v66))
  {
LABEL_108:
    v60 = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](v60, "RawCameraException");
    __cxa_throw(v60, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  if (v69)
  {
    v25 = v69;
  }

  else
  {
    v25 = v68;
  }

  if (v68)
  {
    v26 = v68;
  }

  else
  {
    v26 = v69;
  }

  if (!v26 || !v25)
  {
    v63 = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](v63, "RawCameraException");
    __cxa_throw(v63, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  if (v12)
  {
    v27 = 0;
    v28 = 0;
    *(&v66 + 1) = 0;
    v29 = 0;
    v30 = 32;
    while (1)
    {
      v31 = v13 - v14 + ((39 - v30) >> 3);
      if (8 * v31 < 2 * ((v12 - v27) * v11))
      {
        v59 = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](v59, "RawCameraException");
        __cxa_throw(v59, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }

      if (v66 == 0 && (v14 - v5 < v11 || v31 < 8 * v11) && v13 != v14)
      {
        operator new[]();
      }

      if (v11)
      {
        break;
      }

LABEL_102:
      if (++v27 == v12)
      {
        goto LABEL_106;
      }
    }

    v32 = 0;
    v33 = 0x8000;
    v34 = 0x8000;
    while (2)
    {
      if (v30 >= 16)
      {
        if ((v28 & 3) != 0)
        {
          v35 = -1;
        }

        else
        {
          v35 = 3;
        }

        v36 = (v29 << 16) | (*(v14 + v35) << 8);
        if ((v28 & 3) != 0)
        {
          v37 = 0x7FFFFFFFFFFFFFFFLL;
        }

        else
        {
          v37 = 1;
        }

        v29 = v36 | LOBYTE(v14[v37]);
        v28 += 2;
        ++v14;
        v30 -= 16;
      }

      v38 = *(v26 + 2 * ((v29 << v30) >> 23));
      v39 = (v38 >> 10) & 0x1F;
      if (v38 > 0x8000)
      {
        v42 = v38;
        if ((v38 & 0x80u) == 0)
        {
          LOBYTE(v43) = *(v26 + 2 * ((v29 << v30) >> 23));
        }

        else
        {
          v43 = -v38;
        }

        v41 = dword_233908104[v43 & 0x7F];
        v40 = v39 + v30 - v41;
      }

      else
      {
        v40 = v39 + v30;
        if ((v38 & 0x8000) != 0)
        {
          v38 = *(v26 + 2 * (((v29 << v30) >> 16) & 0x3FF));
          v40 += (v38 >> 10) & 0x1F;
        }

        v41 = v38 & 0x1F;
        v42 = (v38 << 8) & 0x8000;
      }

      v44 = v40 - 16;
      if (v40 >= 16)
      {
        if ((v28 & 3) != 0)
        {
          v45 = -1;
        }

        else
        {
          v45 = 3;
        }

        v46 = (v29 << 16) | (*(v14 + v45) << 8);
        if ((v28 & 3) != 0)
        {
          v47 = 0x7FFFFFFFFFFFFFFFLL;
        }

        else
        {
          v47 = 1;
        }

        v29 = v46 | LOBYTE(v14[v47]);
        v28 += 2;
        ++v14;
        v40 = v44;
      }

      v48 = *(v25 + 2 * ((v29 << v40) >> 23));
      v49 = (v48 >> 10) & 0x1F;
      if (v48 > 0x8000)
      {
        v48 = v48;
        if ((v48 & 0x80u) == 0)
        {
          LOBYTE(v51) = *(v25 + 2 * ((v29 << v40) >> 23));
        }

        else
        {
          v51 = -v48;
        }

        v50 = dword_233908104[v51 & 0x7F];
        v30 = v49 + v40 - v50;
        if (!v41)
        {
          goto LABEL_88;
        }
      }

      else
      {
        v30 = v49 + v40;
        if ((v48 & 0x8000) != 0)
        {
          v48 = *(v25 + 2 * (((v29 << v40) >> 16) & 0x3FF));
          v30 += (v48 >> 10) & 0x1F;
        }

        v50 = v48 & 0x1F;
        v48 = (v48 << 8) & 0x8000;
        if (!v41)
        {
LABEL_88:
          v34 += v42;
          *v5 = v34;
          if (v50)
          {
            if (v30 >= 16)
            {
              if ((v28 & 3) != 0)
              {
                v55 = -1;
              }

              else
              {
                v55 = 3;
              }

              v56 = (v29 << 16) | (*(v14 + v55) << 8);
              if ((v28 & 3) != 0)
              {
                v57 = 0x7FFFFFFFFFFFFFFFLL;
              }

              else
              {
                v57 = 1;
              }

              v29 = v56 | LOBYTE(v14[v57]);
              v28 += 2;
              ++v14;
              v30 -= 16;
            }

            if (v50 <= 15)
            {
              v48 = ((v29 << v30) >> -v50) - ((((v29 << v30) >> 31) - 1) >> -v50);
            }

            else
            {
              v48 = 0x8000;
            }

            v30 += v50;
          }

          v33 += v48;
          *(v5 + 1) = v33;
          v5 += 4;
          v32 += 2;
          if (v32 >= v11)
          {
            goto LABEL_102;
          }

          continue;
        }
      }

      break;
    }

    if (v30 >= 16)
    {
      if ((v28 & 3) != 0)
      {
        v52 = -1;
      }

      else
      {
        v52 = 3;
      }

      v53 = (v29 << 16) | (*(v14 + v52) << 8);
      if ((v28 & 3) != 0)
      {
        v54 = 0x7FFFFFFFFFFFFFFFLL;
      }

      else
      {
        v54 = 1;
      }

      v29 = v53 | LOBYTE(v14[v54]);
      v28 += 2;
      ++v14;
      v30 -= 16;
    }

    v42 = ((v29 << v30) >> -v41) - ((((v29 << v30) >> 31) - 1) >> -v41);
    if (v41 > 15)
    {
      v42 = 0x8000;
    }

    v30 += v41;
    goto LABEL_88;
  }

LABEL_106:
  v64[2](v64);
}

void sub_2337FD4D0(_Unwind_Exception *a1)
{
  v1[2](v1);

  _Unwind_Resume(a1);
}

void sub_2337FD5D4(uint64_t a1)
{
  v2 = sub_23378E038();
  v3 = v2;
  v4 = *(a1 + 32);
  if (v4 - 1 <= 0xFFFFFFFFFFFFFFFDLL && os_signpost_enabled(v2))
  {
    *v5 = 0;
    _os_signpost_emit_with_name_impl(&dword_23371F000, v3, OS_SIGNPOST_INTERVAL_END, v4, "CHasselbladUnpacker", &unk_233945DBE, v5, 2u);
  }
}

void sub_2337FD660(void *a1)
{
  sub_2337FD698(a1);

  JUMPOUT(0x2383ABF10);
}

void *sub_2337FD698(void *a1)
{
  *a1 = &unk_2849194C8;
  v2 = a1[29];
  if (v2)
  {
    sub_2337239E8(v2);
  }

  *a1 = &unk_28490A870;
  v3 = a1[24];
  if (v3)
  {
    a1[25] = v3;
    operator delete(v3);
  }

  return sub_233723A54(a1);
}

void sub_2337FD720(void *a1)
{
  sub_23373C7EC(a1);
  if (!a1[3])
  {
    (*(*a1 + 160))(&v4, a1);
    sub_2337FDA84(&v4, &v5);
    if (*(&v4 + 1))
    {
      sub_2337239E8(*(&v4 + 1));
    }

    if (v5)
    {
      if (v5[1216] == 1)
      {
        (*(*a1 + 160))(&v2, a1);
        (*(*v2 + 384))(&v3);
        (*(*a1 + 336))(a1);
        (*(*a1 + 408))(a1);
        (*(*a1 + 432))(a1);
        sub_2337FE3E4();
      }

      (*(*a1 + 160))(&v2, a1);
      (*(*v2 + 384))(&v3);
      (*(*a1 + 336))(a1);
      (*(*a1 + 408))(a1);
      (*(*a1 + 432))(a1);
      sub_2337F3A48();
    }

    if (v6)
    {
      sub_2337239E8(v6);
    }
  }
}

void sub_2337FDA28(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, std::__shared_weak_count *a14, uint64_t a15, std::__shared_weak_count *a16)
{
  if (a16)
  {
    sub_2337239E8(a16);
  }

  if (a14)
  {
    sub_2337239E8(a14);
  }

  v18 = *(v16 - 32);
  if (v18)
  {
    sub_2337239E8(v18);
  }

  _Unwind_Resume(exception_object);
}

void *sub_2337FDA84@<X0>(void **a1@<X0>, void **a2@<X8>)
{
  v2 = a1;
  result = *a1;
  if (result && (result = __dynamic_cast(result, &unk_284903320, &unk_28490A118, 0)) != 0)
  {
    v5 = v2[1];
    *a2 = result;
    a2[1] = v5;
  }

  else
  {
    v2 = a2;
  }

  *v2 = 0;
  v2[1] = 0;
  return result;
}

void sub_2337FDB08(uint64_t a1)
{
  v6 = &unk_28490E658;
  (*(*a1 + 160))(&v4);
  v1 = v4;
  sub_23372A488(__p, "SourceInfo");
  (*(*v1 + 600))(v1, __p, &v6, 3);
  if (v3 < 0)
  {
    operator delete(__p[0]);
  }

  if (v5)
  {
    sub_2337239E8(v5);
  }
}

void sub_2337FDBE8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, uint64_t a15, std::__shared_weak_count *a16)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  if (a16)
  {
    sub_2337239E8(a16);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337FDC18(uint64_t a1)
{
  (*(*a1 + 160))(&v6);
  v1 = v6;
  sub_23372A488(__p, "SourceInfo");
  v2 = (*(*v1 + 264))(v1, __p);
  if (v5 < 0)
  {
    operator delete(__p[0]);
  }

  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v2;
}

void sub_2337FDCD0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

double sub_2337FDD00(uint64_t a1)
{
  (*(*a1 + 160))(&v6);
  v1 = v6;
  sub_23372A488(__p, "SourceInfo");
  v2 = (*(*v1 + 280))(v1, __p, 1);
  if (v5 < 0)
  {
    operator delete(__p[0]);
  }

  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v2;
}

void sub_2337FDDC4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337FDDF4(void *a1@<X0>, void **a2@<X8>)
{
  (*(*a1 + 160))(&v6);
  sub_2337FDA84(&v6, &v8);
  if (v7)
  {
    sub_2337239E8(v7);
  }

  if (v8)
  {
    (*(*v8 + 784))(v8);
    v4 = *a2;
    if (a2[1] - *a2 == 32)
    {
      v5 = 0;
      goto LABEL_9;
    }

    if (v4)
    {
      a2[1] = v4;
      operator delete(v4);
    }
  }

  v5 = 1;
LABEL_9:
  if (v9)
  {
    sub_2337239E8(v9);
  }

  if (v5)
  {
    sub_2337D5774(a1, a2);
  }
}

void sub_2337FDEE4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_2337239E8(a12);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337FDEFC(uint64_t a1@<X0>, void *a2@<X8>)
{
  v13 = 0;
  v11[0] = 0;
  v11[1] = 0;
  v12 = 0;
  (*(*a1 + 160))(&v9);
  v3 = v9;
  sub_23372A488(__p, "IFD0:SUBIFD0");
  if ((*(*v3 + 248))(v3, __p, v11, 0))
  {
    v5 = v11[0];
    v4 = v11[1];
    if (v8 < 0)
    {
      operator delete(__p[0]);
    }

    v6 = v4 - v5;
    if (v10)
    {
      sub_2337239E8(v10);
    }

    if (v6 == 32)
    {
      *a2 = *v11;
      a2[2] = v12;
      return;
    }
  }

  else
  {
    if (v8 < 0)
    {
      operator delete(__p[0]);
    }

    if (v10)
    {
      sub_2337239E8(v10);
    }
  }

  sub_233731694(a2, 4uLL);
  if (v11[0])
  {
    v11[1] = v11[0];
    operator delete(v11[0]);
  }
}

void sub_2337FE028(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *a10, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, uint64_t a17, void *__p, uint64_t a19)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_2337FE0C8(_BYTE *a1)
{
  v2 = sub_2337D6488(a1);
  if (v2)
  {
    (*(*a1 + 2920))(a1);
    (*(*a1 + 160))(&v5, a1);
    sub_2337FDA84(&v5, &v7);
    if (v6)
    {
      sub_2337239E8(v6);
    }

    v3 = v7;
    if (v7)
    {
      (*(*a1 + 384))(&v5, a1);
      sub_2338FAA0C(v3, &v5);
      if (v6)
      {
        sub_2337239E8(v6);
      }
    }

    if (v8)
    {
      sub_2337239E8(v8);
    }
  }

  return v2;
}

void sub_2337FE1DC(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  if (a12)
  {
    sub_2337239E8(a12);
  }

  _Unwind_Resume(exception_object);
}

id sub_2337FE208(uint64_t a1, void *a2)
{
  v3 = a2;
  if (objc_msgSend_isEqualToString_(v3, v4, @"whiteLevelFromTag", v5, v6))
  {
    v27 = 0.0;
    (*(*a1 + 160))(&v25, a1);
    v7 = v25;
    sub_23372A488(__p, "IFD0:SUBIFD0");
    v12 = (*(*v7 + 240))(v7, __p, &v27);
    if (v24 < 0)
    {
      operator delete(__p[0]);
    }

    if (v26)
    {
      sub_2337239E8(v26);
    }

    v13 = MEMORY[0x277CCABB0];
    if (v12)
    {
      objc_msgSend_numberWithDouble_(MEMORY[0x277CCABB0], v8, v9, v10, v11, v27);
    }

    else
    {
      v15 = (*(*a1 + 864))(a1);
      v16 = (*(*a1 + 848))(a1) * v15;
      objc_msgSend_numberWithDouble_(v13, v17, v18, v19, v20, v16);
    }
    v14 = ;
  }

  else
  {
    v14 = sub_2338D3C20(a1, v3);
  }

  v21 = v14;

  return v21;
}

void sub_2337FE3A0(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, uint64_t a15, std::__shared_weak_count *a16)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  if (a16)
  {
    sub_2337239E8(a16);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_2337FE488(uint64_t a1, void *a2, unint64_t *a3, void *a4, _OWORD *a5)
{
  *(a1 + 8) = 0;
  *(a1 + 16) = 0;
  *a1 = &unk_28491A178;
  sub_2337AD9D8(a1 + 24, a2, *a3, a4, a5);
  *(a1 + 216) = 0;
  *(a1 + 224) = 0;
  *(a1 + 232) = 0;
  *(a1 + 240) = -1;
  *(a1 + 24) = &unk_2849194C8;
  *(a1 + 248) = 0;
  *(a1 + 256) = 0;
  return a1;
}

void sub_2337FE538(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_28491A178;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2383ABF10);
}

void sub_2337FE5B4(void *a1)
{
  sub_23373C7EC(a1);
  if (!a1[3])
  {
    (*(*a1 + 160))(&v3, a1);
    (*(*v3 + 384))(&v5);
    if (v4)
    {
      sub_2337239E8(v4);
    }

    (*(*a1 + 336))(a1);
    v2 = (*(*a1 + 592))(a1);
    if (v2 == 1)
    {
      (*(*a1 + 408))(a1);
      (*(*a1 + 432))(a1);
      sub_2337FEAEC();
    }

    if (v2 == 7)
    {
      (*(*a1 + 408))(a1);
      (*(*a1 + 432))(a1);
      sub_2337FEA48();
    }

    if (v6)
    {
      sub_2337239E8(v6);
    }
  }
}

void sub_2337FE810(_Unwind_Exception *exception_object)
{
  v3 = *(v1 - 32);
  if (v3)
  {
    sub_2337239E8(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337FE83C(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14)
{
  if (!a14)
  {
    JUMPOUT(0x2337FE834);
  }

  JUMPOUT(0x2337FE830);
}

uint64_t sub_2337FE84C(uint64_t a1)
{
  (*(*a1 + 160))(&v6);
  v1 = v6;
  sub_23372A488(__p, "CameraObj_ISO_speed");
  v2 = (*(*v1 + 264))(v1, __p);
  if (v5 < 0)
  {
    operator delete(__p[0]);
  }

  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v2;
}

void sub_2337FE904(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

void sub_2337FE934(uint64_t a1)
{
  v7 = 0;
  v6 = &unk_28490CE28;
  (*(*a1 + 160))(&v4);
  v1 = v4;
  sub_23372A488(__p, "NeutObj_neutrals");
  (*(*v1 + 600))(v1, __p, &v6, 3);
  if (v3 < 0)
  {
    operator delete(__p[0]);
  }

  if (v5)
  {
    sub_2337239E8(v5);
  }
}

void sub_2337FEA18(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  _Unwind_Resume(exception_object);
}

void *sub_2337FEB90(uint64_t a1, int a2, int a3, char **a4, char **a5)
{
  *(a1 + 188) = a2;
  *(a1 + 192) = a3;
  v7 = (a1 + 200);
  if (v7 != a4)
  {
    sub_233723454(v7, *a4, a4[1], (a4[1] - *a4) >> 2);
  }

  result = (a1 + 224);
  if ((a1 + 224) != a5)
  {
    v9 = *a5;
    v10 = a5[1];
    v11 = (v10 - *a5) >> 2;

    return sub_233723454(result, v9, v10, v11);
  }

  return result;
}

void *sub_2337FEC08(uint64_t a1, int a2, size_t size)
{
  v9 = a2;
  v4 = size;
  v5 = malloc_type_malloc(size, 0x100004077774924uLL);
  v6 = *(a1 + 24);
  sub_233723AE0(&v8, &v9);
  (*(*v6 + 40))(v6, &v8, 0);
  (*(**(a1 + 24) + 32))(*(a1 + 24), v5, v4);
  return v5;
}

void sub_2337FECD8(void *a1)
{
  __cxa_begin_catch(a1);
  if (v1)
  {
    free(v1);
  }

  __cxa_end_catch();
  JUMPOUT(0x2337FECC0);
}

void sub_2337FECFC(uint64_t *a1, uint64_t a2, int *a3, uint64_t a4, int *a5, uint64_t a6, uint64_t a7)
{
  v224 = *MEMORY[0x277D85DE8];
  v218 = xmmword_28491AD68;
  v219 = qword_28491AD78;
  v216 = a6;
  v217 = a7;
  applejpeg_decode_create();
  v215 = 0;
  v214 = 0;
  v213 = 0;
  v222 = 0u;
  v223 = 0u;
  v220 = 0u;
  v221 = 0u;
  v11 = a1[34];
  if (*v11 != 2 || v11[1] - 1 > 1 || (v12 = a1[31], a1[32] - v12 != 12) || *v12 == 0.0 || v12[1] == 0.0 || v12[2] == 0.0 || applejpeg_decode_open_mem() || applejpeg_decode_set_option_outformat() || applejpeg_decode_set_option_alternate_420_prediction() || applejpeg_decode_get_image_info() || applejpeg_decode_get_output_buffer_size())
  {
    v16 = 0;
  }

  else
  {
    v16 = objc_msgSend_dataWithLength_(MEMORY[0x277CBEB28], v13, v215, v14, v15);
    v211 = objc_msgSend_mutableBytes(v16, v17, v18, v19, v20);
    v212 = v215;
    v169 = v16;
    if (!applejpeg_decode_image_all() && !applejpeg_decode_get_planar_output_buffer_size())
    {
      v21 = v16;
      v26 = objc_msgSend_bytes(v16, v22, v23, v24, v25);
      v27 = a1[34];
      v183 = a1;
      v188 = *v27 == 2 && v27[1] == 2;
      v180 = *(&v222 + 1);
      v225.origin.x = *a3;
      v225.origin.y = a3[1];
      v225.size.width = a3[2];
      v225.size.height = a3[3];
      v227.origin.x = *a5;
      v177 = v223;
      v227.origin.y = a5[1];
      v227.size.width = a5[2];
      v227.size.height = a5[3];
      v226 = CGRectIntersection(v225, v227);
      v28 = (v226.origin.y - a3[1]);
      v29 = v28 + v226.size.height;
      v179 = v28;
      if (v29 > v28)
      {
        v175 = v26 + 2 * v220 * v222 + 2 * *(&v220 + 1) * *(&v222 + 1);
        v176 = v26 + 2 * v220 * v222;
        v30 = (v226.origin.x - *a3);
        v31 = v30 + v226.size.width;
        v174 = v26 + 2;
        v172 = a2 + 8 * v30 + 8;
        v173 = 2 * v222;
        v32 = COERCE_UNSIGNED_INT(1.0);
        v33 = (v226.origin.y - a3[1]);
        v170 = v30;
        v171 = v28 + v226.size.height;
        v182 = v31;
        while (v31 <= v30)
        {
          v33 += 2;
LABEL_46:
          if (v33 >= v29)
          {
            goto LABEL_47;
          }
        }

        v34 = 0;
        v35 = v33 - v179;
        v36 = (v33 - v179) >> v188;
        v187 = v176 + 2 * v36 * v180;
        v186 = v176 + 2 * (v36 + 1) * v180;
        v185 = v175 + 2 * v36 * v177;
        v184 = v175 + 2 * (v36 + 1) * v177;
        v181 = v33 + 2;
        v37 = v188;
        if (v33 + 2 < v29)
        {
          v37 = 0;
        }

        v189 = v37;
        v38 = (v174 + v173 + v173 * v35);
        v39 = (v172 + a4 + v33 * a4);
        v40 = (v174 + v173 * v35);
        v41 = (v172 + v33 * a4);
        while (1)
        {
          v42 = (v187 + (v34 & 0xFFFFFFFFFFFFFFFELL));
          v43 = (v186 + (v34 & 0xFFFFFFFFFFFFFFFELL));
          v44 = (v185 + (v34 & 0xFFFFFFFFFFFFFFFELL));
          v45 = (v184 + (v34 & 0xFFFFFFFFFFFFFFFELL));
          v46 = v30 + 2;
          if (v46 >= v31)
          {
            v210 = *v42;
            v209 = v210;
            v206 = *v44;
            v205 = v206;
            v208 = *v43;
            v207 = v208;
            v47 = *v45;
            v45 = v204;
            v204[1] = v47;
            v44 = &v205;
            v43 = &v207;
            v204[0] = v47;
            v42 = &v209;
          }

          v190 = v46;
          v191 = v34;
          v48 = v189 ? v42 : v43;
          v49 = v189 ? v44 : v45;
          if (v188)
          {
            break;
          }

          v195 = 0;
          v196 = 0;
          v197 = 0;
          sub_233729070(&v195, v183[38], v183[39], (v183[39] - v183[38]) >> 2);
          v192 = 0;
          v193 = 0;
          v194 = 0;
          sub_233729070(&v192, v183[31], v183[32], (v183[32] - v183[31]) >> 2);
          v115 = v192;
          v117 = *v192;
          v116 = *(v192 + 1);
          v118 = *(v192 + 2);
          LOWORD(v119) = *(v40 - 1);
          v120 = *(v195 + 1);
          *&v121 = v119 - *v195;
          v122 = *&v121 / v120;
          LOWORD(v121) = *v40;
          *&v123 = v121 - *v195;
          v124 = *&v123 / v120;
          LOWORD(v123) = *(v38 - 1);
          *&v125 = v123 - *v195;
          v126 = *&v125 / v120;
          LOWORD(v125) = *v38;
          v127 = (v125 - *v195) / v120;
          v128 = *v42;
          v129 = *(v195 + 2);
          v130 = *(v195 + 3);
          v131 = (v128 - v129) / v130;
          v132 = (vcvts_n_f32_u32(v42[1] + v128, 1uLL) - v129) / v130;
          v133 = *v43;
          v134 = (v133 - v129) / v130;
          v135 = (vcvts_n_f32_u32(v43[1] + v133, 1uLL) - v129) / v130;
          v136 = *v44;
          v137 = (v136 - v129) / v130;
          v138 = (vcvts_n_f32_u32(v44[1] + v136, 1uLL) - v129) / v130;
          v139 = *v45;
          v140 = (v139 - v129) / v130;
          v141 = (vcvts_n_f32_u32(v45[1] + v139, 1uLL) - v129) / v130;
          v142 = (v120 + 1.0) * 0.000015259;
          v143 = (*v192 * -2.0) + 2.0;
          v144 = v122 + (v137 * v143);
          v145 = (v118 * -2.0) + 2.0;
          v146 = v122 + (v131 * v145);
          v147 = ((v122 - (v118 * v146)) - (*v192 * v144)) / v116;
          _S22 = v142 * v144;
          __asm { FCVT            H22, S22 }

          *(v41 - 4) = LOWORD(_S22);
          _S16 = v142 * v147;
          __asm { FCVT            H16, S16 }

          *(v41 - 3) = LOWORD(_S16);
          _S16 = v142 * v146;
          __asm { FCVT            H16, S16 }

          *(v41 - 2) = LOWORD(_S16);
          *(v41 - 1) = v32;
          v151 = v124 + (v138 * v143);
          v152 = v124 + (v132 * v145);
          v153 = ((v124 - (v118 * v152)) - (v117 * v151)) / v116;
          _S16 = v142 * v151;
          __asm { FCVT            H16, S16 }

          *v41 = LOWORD(_S16);
          _S5 = v142 * v153;
          __asm { FCVT            H5, S5 }

          v41[1] = LOWORD(_S5);
          _S5 = v142 * v152;
          __asm { FCVT            H5, S5 }

          v41[2] = LOWORD(_S5);
          v41[3] = v32;
          v157 = v126 + (v140 * v143);
          v158 = v126 + (v134 * v145);
          v159 = ((v126 - (v118 * v158)) - (v117 * v157)) / v116;
          _S5 = v142 * v157;
          __asm { FCVT            H5, S5 }

          *(v39 - 4) = LOWORD(_S5);
          _S4 = v142 * v159;
          __asm { FCVT            H4, S4 }

          *(v39 - 3) = LOWORD(_S4);
          _S4 = v142 * v158;
          __asm { FCVT            H4, S4 }

          *(v39 - 2) = LOWORD(_S4);
          *(v39 - 1) = v32;
          v163 = v127 + (v141 * v143);
          v164 = v127 + (v135 * v145);
          v165 = (v127 - (v118 * v164)) - (v117 * v163);
          _S2 = v142 * v163;
          __asm { FCVT            H2, S2 }

          *v39 = LOWORD(_S2);
          _S0 = v142 * (v165 / v116);
          __asm { FCVT            H0, S0 }

          v39[1] = LOWORD(_S0);
          _S0 = v142 * v164;
          __asm { FCVT            H0, S0 }

          v39[2] = LOWORD(_S0);
          v39[3] = v32;
          v193 = v115;
          operator delete(v115);
          v114 = v195;
          if (v195)
          {
            v196 = v195;
LABEL_42:
            operator delete(v114);
          }

LABEL_43:
          v38 += 2;
          v39 += 8;
          v40 += 2;
          v30 = v190;
          v34 = v191 + 2;
          v41 += 8;
          v31 = v182;
          if (v190 >= v182)
          {
            v30 = v170;
            v29 = v171;
            v33 = v181;
            goto LABEL_46;
          }
        }

        v201 = 0;
        v202 = 0;
        v203 = 0;
        sub_233729070(&v201, v183[38], v183[39], (v183[39] - v183[38]) >> 2);
        __p = 0;
        v199 = 0;
        v200 = 0;
        sub_233729070(&__p, v183[31], v183[32], (v183[32] - v183[31]) >> 2);
        v50 = __p;
        v52 = *__p;
        v51 = *(__p + 1);
        v53 = *(__p + 2);
        LOWORD(v54) = *(v40 - 1);
        v55 = v201[1];
        *&v56 = v54 - *v201;
        v57 = *&v56 / v55;
        LOWORD(v56) = *v40;
        *&v58 = v56 - *v201;
        v59 = *&v58 / v55;
        LOWORD(v58) = *(v38 - 1);
        *&v60 = v58 - *v201;
        v61 = *&v60 / v55;
        LOWORD(v60) = *v38;
        v62 = (v60 - *v201) / v55;
        v63 = *v42;
        v64 = v201[2];
        v65 = v201[3];
        v66 = (v63 - v64) / v65;
        v67 = v42[1] + v63;
        v68 = (vcvts_n_f32_u32(v67, 1uLL) - v64) / v65;
        v69 = *v48;
        v70 = (vcvts_n_f32_u32(v69 + v63, 1uLL) - v64) / v65;
        v71 = v67 + v69;
        if (v189)
        {
          v72 = v42;
        }

        else
        {
          v72 = v43;
        }

        v73 = (vcvts_n_f32_u32(v71 + v72[1], 2uLL) - v64) / v65;
        v74 = *v44;
        v75 = (v74 - v64) / v65;
        v76 = v44[1] + v74;
        v77 = (vcvts_n_f32_u32(v76, 1uLL) - v64) / v65;
        v78 = *v49;
        v79 = (vcvts_n_f32_u32(v78 + v74, 1uLL) - v64) / v65;
        v80 = v76 + v78;
        if (v189)
        {
          v81 = v44;
        }

        else
        {
          v81 = v45;
        }

        v82 = (vcvts_n_f32_u32(v80 + v81[1], 2uLL) - v64) / v65;
        v83 = (v55 + 1.0) * 0.000015259;
        v84 = (v52 * -2.0) + 2.0;
        v85 = v57 + (v75 * v84);
        v86 = (v53 * -2.0) + 2.0;
        v87 = v57 + (v66 * v86);
        v88 = ((v57 - (v53 * v87)) - (v52 * v85)) / v51;
        _S22 = v83 * v85;
        __asm { FCVT            H22, S22 }

        *(v41 - 4) = LOWORD(_S22);
        _S7 = v83 * v88;
        __asm { FCVT            H7, S7 }

        *(v41 - 3) = LOWORD(_S7);
        _S7 = v83 * v87;
        __asm { FCVT            H7, S7 }

        *(v41 - 2) = LOWORD(_S7);
        *(v41 - 1) = v32;
        v96 = v59 + (v77 * v84);
        v97 = v59 + (v68 * v86);
        v98 = ((v59 - (v53 * v97)) - (v52 * v96)) / v51;
        _S7 = v83 * v96;
        __asm { FCVT            H7, S7 }

        *v41 = LOWORD(_S7);
        _S5 = v83 * v98;
        __asm { FCVT            H5, S5 }

        v41[1] = LOWORD(_S5);
        _S5 = v83 * v97;
        __asm { FCVT            H5, S5 }

        v41[2] = LOWORD(_S5);
        v41[3] = v32;
        v102 = v61 + (v79 * v84);
        v103 = v61 + (v70 * v86);
        v104 = ((v61 - (v53 * v103)) - (v52 * v102)) / v51;
        _S5 = v83 * v102;
        __asm { FCVT            H5, S5 }

        *(v39 - 4) = LOWORD(_S5);
        _S4 = v83 * v104;
        __asm { FCVT            H4, S4 }

        *(v39 - 3) = LOWORD(_S4);
        _S4 = v83 * v103;
        __asm { FCVT            H4, S4 }

        *(v39 - 2) = LOWORD(_S4);
        *(v39 - 1) = v32;
        v108 = v62 + (v82 * v84);
        v109 = v62 + (v73 * v86);
        v110 = (v62 - (v53 * v109)) - (v52 * v108);
        _S2 = v83 * v108;
        __asm { FCVT            H2, S2 }

        *v39 = LOWORD(_S2);
        _S0 = v83 * (v110 / v51);
        __asm { FCVT            H0, S0 }

        v39[1] = LOWORD(_S0);
        _S0 = v83 * v109;
        __asm { FCVT            H0, S0 }

        v39[2] = LOWORD(_S0);
        v39[3] = v32;
        v199 = v50;
        operator delete(v50);
        v114 = v201;
        if (!v201)
        {
          goto LABEL_43;
        }

        v202 = v201;
        goto LABEL_42;
      }

LABEL_47:
      v16 = v169;
    }
  }

  applejpeg_decode_destroy();
}

void sub_2337FF6B8(uint64_t a1)
{
  v3 = *(a1 + 44);
  v2 = *(a1 + 48);
  v4 = *(a1 + 188);
  v5 = *(a1 + 192);
  v16 = (*(a1 + 208) - *(a1 + 200)) >> 2;
  sub_233723B40(&v19, &v16);
  if (*(a1 + 208) - *(a1 + 200) != *(a1 + 232) - *(a1 + 224))
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if ((v3 - 100000) < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if ((v2 - 100000) < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if (v4 - 100000 < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if (v5 - 100000 < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  v6 = v19;
  if (v19 >= 20000)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if ((v2 + v5 - 1) / v5 * ((v3 + v4 - 1) / v4) != v19)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  v15 = sub_2337ADCC4(a1);
  if (v6)
  {
    v7 = 0;
    v8 = 0;
    v9 = 0;
    v10 = 4 * v6;
    do
    {
      v16 = __PAIR64__(v8, v9);
      v17 = v4;
      v18 = v5;
      v11 = sub_2337FEC08(a1, *(*(a1 + 200) + v7), *(*(a1 + 224) + v7));
      if (v11)
      {
        v12 = v11;
        sub_2337FECFC(a1, v15 + 2 * v8 * v3 + 2 * v9, &v16, 2 * v3, &v16, v11, *(*(a1 + 224) + v7));
        free(v12);
      }

      v7 += 4;
      v13 = v9 + v4;
      if ((v9 + v4) >= v3)
      {
        v9 = 0;
      }

      else
      {
        v9 += v4;
      }

      if (v13 >= v3)
      {
        v14 = v5;
      }

      else
      {
        v14 = 0;
      }

      v8 += v14;
    }

    while (v10 != v7);
  }
}

void sub_2337FF964(uint64_t a1, uint64_t a2, int *a3, uint64_t a4)
{
  v7 = *(a1 + 44);
  v6 = *(a1 + 48);
  v8 = *(a1 + 188);
  v9 = *(a1 + 192);
  v19 = (*(a1 + 208) - *(a1 + 200)) >> 2;
  sub_233723B40(&v22, &v19);
  if (*(a1 + 208) - *(a1 + 200) != *(a1 + 232) - *(a1 + 224))
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if ((v7 - 100000) < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if ((v6 - 100000) < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if (v8 - 100000 < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if (v9 - 100000 < 0xFFFE7961)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if (v22 >= 20000)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if ((v6 + v9 - 1) / v9 * ((v7 + v8 - 1) / v8) != v22)
  {
    __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0]();
    sub_2338F83F4();
  }

  if (v22)
  {
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 4 * v22;
    do
    {
      v19 = __PAIR64__(v12, v11);
      v20 = v8;
      v21 = v9;
      if (sub_23385F470(&v19, a3))
      {
        v14 = sub_2337FEC08(a1, *(*(a1 + 200) + v10), *(*(a1 + 224) + v10));
        if (v14)
        {
          v15 = v14;
          sub_2337FECFC(a1, a2, a3, a4, &v19, v14, *(*(a1 + 224) + v10));
          free(v15);
        }
      }

      if ((v11 + v8) >= v7)
      {
        v16 = v9;
      }

      else
      {
        v16 = 0;
      }

      v12 += v16;
      if ((v11 + v8) >= v7)
      {
        v11 = 0;
      }

      else
      {
        v11 += v8;
      }

      v10 += 4;
    }

    while (v13 != v10);
  }
}

void *sub_2337FFC08(void *a1)
{
  *a1 = &unk_28491AD90;
  v2 = a1[38];
  if (v2)
  {
    a1[39] = v2;
    operator delete(v2);
  }

  v3 = a1[34];
  if (v3)
  {
    a1[35] = v3;
    operator delete(v3);
  }

  v4 = a1[31];
  if (v4)
  {
    a1[32] = v4;
    operator delete(v4);
  }

  v5 = a1[28];
  if (v5)
  {
    a1[29] = v5;
    operator delete(v5);
  }

  v6 = a1[25];
  if (v6)
  {
    a1[26] = v6;
    operator delete(v6);
  }

  return sub_233723A54(a1);
}

void sub_2337FFCA8(void *a1)
{
  *a1 = &unk_28491AD90;
  v2 = a1[38];
  if (v2)
  {
    a1[39] = v2;
    operator delete(v2);
  }

  v3 = a1[34];
  if (v3)
  {
    a1[35] = v3;
    operator delete(v3);
  }

  v4 = a1[31];
  if (v4)
  {
    a1[32] = v4;
    operator delete(v4);
  }

  v5 = a1[28];
  if (v5)
  {
    a1[29] = v5;
    operator delete(v5);
  }

  v6 = a1[25];
  if (v6)
  {
    a1[26] = v6;
    operator delete(v6);
  }

  sub_233723A54(a1);

  JUMPOUT(0x2383ABF10);
}

_DWORD *sub_2337FFD5C(_DWORD *a1, int a2, uint64_t *a3)
{
  *sub_2338F4DD0(a1, a2) = &unk_28491AE88;
  a1[3] = sub_233725614(*a3);
  a1[4] = sub_233725614(*a3);
  a1[5] = sub_233725614(*a3);
  a1[6] = sub_233725614(*a3);
  return a1;
}

id sub_2337FFDD8(unsigned int *a1)
{
  v27[4] = *MEMORY[0x277D85DE8];
  v2 = [RAWOpcodeTrimBounds alloc];
  v26[0] = @"Top";
  v6 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v3, a1[3], v4, v5);
  v27[0] = v6;
  v26[1] = @"Left";
  v10 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v7, a1[4], v8, v9);
  v27[1] = v10;
  v26[2] = @"Bottom";
  v14 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v11, a1[5], v12, v13);
  v27[2] = v14;
  v26[3] = @"Right";
  v18 = objc_msgSend_numberWithUnsignedInt_(MEMORY[0x277CCABB0], v15, a1[6], v16, v17);
  v27[3] = v18;
  v20 = objc_msgSend_dictionaryWithObjects_forKeys_count_(MEMORY[0x277CBEAC0], v19, v27, v26, 4);
  v24 = objc_msgSend_initWithArguments_(v2, v21, v20, v22, v23);

  return v24;
}

xmlChar *sub_2337FFF9C(xmlChar *result, uint64_t a2, unsigned int a3)
{
  if (a3 <= 9 && a2)
  {
    v5 = result;
    v6 = a2;
    while (1)
    {
      if (*(a2 + 8) == 1)
      {
        goto LABEL_30;
      }

      if (!*(a2 + 80))
      {
        goto LABEL_30;
      }

      ns = v6->ns;
      if (!ns || !ns->prefix)
      {
        goto LABEL_30;
      }

      result = xmlNodeGetContent(v6);
      if (result)
      {
        break;
      }

LABEL_31:
      v6 = v6->next;
      if (!v6)
      {
        return result;
      }
    }

    v8 = result;
    v9 = objc_alloc(MEMORY[0x277CCACA8]);
    v10 = xmlStrlen(v8);
    v12 = objc_msgSend_initWithBytes_length_encoding_(v9, v11, v8, v10, 4);
    if (v12)
    {
      free(v8);
      if (!xmlStrEqual(v6->ns->prefix, "exif"))
      {
        if (!xmlStrEqual(v6->ns->prefix, "xmp"))
        {
          goto LABEL_29;
        }

        if (!xmlStrEqual(v6->name, "CreateDate"))
        {
          goto LABEL_29;
        }

        v13 = sub_233800710(v12);
        if (v13 <= -INFINITY)
        {
          goto LABEL_29;
        }

        sub_23372A488(__p, "XMP:xmp");
        v22 = __p;
        v14 = sub_23377BB60((v5 + 408), __p);
        goto LABEL_13;
      }

      if (xmlStrEqual(v6->name, "ShutterSpeedValue"))
      {
        v13 = sub_233800368(v12);
        sub_23372A488(__p, "XMP:exif");
        v22 = __p;
        v14 = sub_23377BB60((v5 + 312), __p);
LABEL_13:
        *(v14 + 56) = v13;
        goto LABEL_14;
      }

      if (xmlStrEqual(v6->name, "DateTimeOriginal"))
      {
        v13 = sub_233800710(v12);
        if (v13 > -INFINITY)
        {
          sub_23372A488(__p, "XMP:exif");
          v22 = __p;
          v14 = sub_23377BB60((v5 + 408), __p);
          goto LABEL_13;
        }
      }

      else
      {
        if (xmlStrEqual(v6->name, "ApertureValue"))
        {
          v13 = sub_233800368(v12);
          sub_23372A488(__p, "XMP:exif");
          v22 = __p;
          v14 = sub_23377BB60((v5 + 360), __p);
          goto LABEL_13;
        }

        if (xmlStrEqual(v6->name, "FocalLength"))
        {
          v13 = sub_233800368(v12);
          sub_23372A488(__p, "XMP:exif");
          v22 = __p;
          v14 = sub_23377BB60((v5 + 384), __p);
          goto LABEL_13;
        }

        if (xmlStrEqual(v6->name, "ExposureMode"))
        {
          v19 = objc_msgSend_intValue(v12, v15, v16, v17, v18);
          sub_23372A488(__p, "XMP:exif");
          v22 = __p;
          *(sub_2337F24C8((v5 + 432), __p) + 56) = v19 & ~(v19 >> 31);
LABEL_14:
          if (v21 < 0)
          {
            operator delete(__p[0]);
          }
        }
      }
    }

LABEL_29:

LABEL_30:
    result = sub_2337FFF9C(v5, v6->children, a3 + 1);
    goto LABEL_31;
  }

  return result;
}

void sub_2338002FC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

double sub_233800368(void *a1)
{
  v1 = a1;
  if (objc_msgSend_containsString_(v1, v2, @"/", v3, v4))
  {
    v9 = objc_msgSend_componentsSeparatedByString_(v1, v5, @"/", v7, v8);
    v17 = objc_msgSend_count(v9, v10, v11, v12, v13);
    if (v17)
    {
      v18 = objc_msgSend_objectAtIndexedSubscript_(v9, v14, 0, v15, v16);
      objc_msgSend_doubleValue(v18, v19, v20, v21, v22);
      v24 = v23;

      if (v17 != 1)
      {
        v28 = objc_msgSend_objectAtIndexedSubscript_(v9, v25, 1, v26, v27);
        objc_msgSend_doubleValue(v28, v29, v30, v31, v32);
        v34 = v33;

        v24 = v24 / v34;
      }
    }

    else
    {
      v24 = 0.0;
    }
  }

  else
  {
    objc_msgSend_doubleValue(v1, v5, v6, v7, v8);
    v24 = v35;
  }

  return v24;
}

void sub_233800478(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v45 = a3;
  sub_2337338AC(a1, &v39);
  if ((**v39)(v39))
  {
    v10 = 0;
  }

  else
  {
    v43 = a3 + a4;
    sub_233723C18(&v44, &v43);
    sub_2337338AC(a1, &v41);
    v11 = (*(*v41 + 16))(v41);
    v10 = v44 >= v11;
    if (v42)
    {
      sub_2337239E8(v42);
    }
  }

  if (v40)
  {
    sub_2337239E8(v40);
  }

  if (v10)
  {
    sub_2338FC4D8(a1);
  }

  else if ((a4 - 1000000) >= 0xFFFFFFFFFFF0BDC1)
  {
    v12 = objc_msgSend_dataWithLength_(MEMORY[0x277CBEB28], v7, a4, v8, v9);
    if (v12)
    {
      sub_2337338AC(a1, &v41);
      sub_2337268D8(&v43, &v45);
      sub_233725F08(&v39, &v41, &v43, 0);
      if (v42)
      {
        sub_2337239E8(v42);
      }

      v13 = *(a1 + 80);
      v14 = v12;
      v19 = objc_msgSend_mutableBytes(v14, v15, v16, v17, v18);
      v24 = objc_msgSend_length(v12, v20, v21, v22, v23);
      if ((*(*v13 + 32))(v13, v19, v24) == a4)
      {
        v25 = v12;
        v30 = objc_msgSend_bytes(v25, v26, v27, v28, v29);
        v35 = objc_msgSend_length(v12, v31, v32, v33, v34);
        Memory = xmlReadMemory(v30, v35, "XMP", 0, 2112);
        v37 = Memory;
        if (Memory)
        {
          RootElement = xmlDocGetRootElement(Memory);
          sub_2337FFF9C(a1, RootElement, 0);
          xmlFreeDoc(v37);
        }
      }

      sub_233725FD4(&v39);
    }
  }
}

void sub_2338006A0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10, uint64_t a11, uint64_t a12, std::__shared_weak_count *a13)
{
  if (a13)
  {
    sub_2337239E8(a13);
  }

  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

double sub_233800710(const __CFString *a1)
{
  v2 = objc_autoreleasePoolPush();
  v3 = CFLocaleCreate(*MEMORY[0x277CBECE8], @"en_US");
  CFAutorelease(v3);
  v4 = CFDateFormatterCreate(0, v3, kCFDateFormatterShortStyle, kCFDateFormatterShortStyle);
  CFAutorelease(v4);
  v5 = CFTimeZoneCreateWithTimeIntervalFromGMT(0, 0.0);
  CFAutorelease(v5);
  CFDateFormatterSetProperty(v4, *MEMORY[0x277CBEDF8], v5);
  CFDateFormatterSetFormat(v4, @"yyyy-MM-dd'T'HH:mm:ss");
  rangep.location = 0;
  rangep.length = CFStringGetLength(a1);
  atp = -INFINITY;
  if (CFDateFormatterGetAbsoluteTimeFromString(v4, a1, &rangep, &atp))
  {
    v26.location = rangep.length + rangep.location;
    v26.length = 3;
    v6 = rangep.length + rangep.location + 3;
    if (v6 <= CFStringGetLength(a1))
    {
      v25 = 0.0;
      CFDateFormatterSetFormat(v4, @".SS");
      if (CFDateFormatterGetAbsoluteTimeFromString(v4, a1, &v26, &v25))
      {
        rangep = v26;
        atp = atp + v25 - floor(v25);
      }
    }

    location = rangep.location;
    length = rangep.length;
    v9 = CFStringGetLength(a1);
    v10.length = v9 - (rangep.location + rangep.length);
    if (v10.length >= 2)
    {
      v10.location = length + location;
      v11 = CFStringCreateWithSubstring(0, a1, v10);
      CFAutorelease(v11);
      CharacterAtIndex = CFStringGetCharacterAtIndex(v11, 0);
      v13 = 0.0;
      if (CharacterAtIndex != 90)
      {
        v14 = CharacterAtIndex;
        if (CharacterAtIndex == 45 || CharacterAtIndex == 43)
        {
          v15 = CFStringGetLength(v11);
          v16 = 0.0;
          if (v15 >= 3)
          {
            v17 = v15;
            v29.location = 1;
            v29.length = 2;
            v18 = CFStringCreateWithSubstring(0, v11, v29);
            CFAutorelease(v18);
            v16 = CFStringGetIntValue(v18) * 3600.0 + 0.0;
            if (v17 != 3)
            {
              v19 = CFStringGetCharacterAtIndex(v11, 3);
              v20 = -4;
              if (v19 != 58)
              {
                v20 = -3;
              }

              if ((v20 + v17) >= 2)
              {
                if (v19 == 58)
                {
                  v21.location = 4;
                }

                else
                {
                  v21.location = 3;
                }

                v21.length = 2;
                v22 = CFStringCreateWithSubstring(0, v11, v21);
                CFAutorelease(v22);
                v16 = v16 + CFStringGetIntValue(v22) * 60.0;
              }
            }
          }

          v13 = -v16;
          if (v14 != 45)
          {
            v13 = v16;
          }
        }
      }

      atp = v13 + atp;
    }
  }

  else
  {
    CFDateFormatterSetFormat(v4, @"yyyy:MM:dd HH:mm");
    rangep.location = 0;
    rangep.length = CFStringGetLength(a1);
    if (!CFDateFormatterGetAbsoluteTimeFromString(v4, a1, &rangep, &atp))
    {
      atp = -INFINITY;
    }
  }

  v23 = atp;
  objc_autoreleasePoolPop(v2);
  return v23;
}

void sub_2338009F8(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  v14 = &unk_28490E658;
  (*(*a1 + 160))(&v7);
  v4 = v7;
  sub_23372A488(__p, "IFD0:EXIF:MAKERNOTE:redBlueBalance");
  (*(*v4 + 600))(v4, __p, &v14, 3);
  if (SHIBYTE(v13) < 0)
  {
    operator delete(__p[0]);
  }

  if (v8)
  {
    sub_2337239E8(v8);
  }

  if (*(a2 + 8) == *a2)
  {
    (*(*a1 + 160))(&v10, a1);
    v5 = v10;
    sub_23372A488(&v7, "IFD0:EXIF:MAKERNOTE:ImageProcessing:WBRedBlueLevels");
    (*(*v5 + 600))(__p, v5, &v7, &v14, 3);
    v6 = *a2;
    if (*a2)
    {
      *(a2 + 8) = v6;
      operator delete(v6);
    }

    *a2 = *__p;
    *(a2 + 16) = v13;
    __p[1] = 0;
    v13 = 0;
    __p[0] = 0;
    if (v9 < 0)
    {
      operator delete(v7);
    }

    if (v11)
    {
      sub_2337239E8(v11);
    }
  }
}

void sub_233800BB4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17, void *a18, uint64_t a19, int a20, __int16 a21, char a22, char a23)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  v25 = *v23;
  if (*v23)
  {
    *(v23 + 8) = v25;
    operator delete(v25);
  }

  _Unwind_Resume(exception_object);
}

void sub_233800C28(void *a1@<X0>, void **a2@<X8>)
{
  if ((*(*a1 + 248))(a1))
  {
    (*(*a1 + 2976))(&v27, a1, 0.0);
    if (v28 - v27 == 32 && *v27 > 0.0)
    {
      goto LABEL_8;
    }

    (*(*a1 + 2984))(&v25, a1, 0.0);
    if (v27)
    {
      *&v28 = v27;
      operator delete(v27);
    }

    v27 = v25;
    v28 = v26;
    if (v26 - v25 == 32 && *v25 > 0.0)
    {
LABEL_8:
      sub_2337D4D80(a1, a2);
    }

    else
    {
      v25 = 0;
      sub_233731694(a2, 4uLL);
    }

    if (v27)
    {
      *&v28 = v27;
      operator delete(v27);
    }

    return;
  }

  if (!(*(*a1 + 176))(a1))
  {
LABEL_51:
    sub_2337D4D80(a1, a2);
    return;
  }

  v27 = 0;
  v28 = 0uLL;
  v25 = 0;
  v26 = 0uLL;
  v22 = 0;
  v23 = 0;
  v24 = 0;
  (*(*a1 + 160))(&v20, a1);
  v4 = v20;
  sub_23372A488(&__p, "IFD0:SUBIFD0");
  (*(*v4 + 248))(v4, &__p, &v27, 0);
  if (v19 < 0)
  {
    operator delete(__p);
  }

  if (v21)
  {
    sub_2337239E8(v21);
  }

  (*(*a1 + 160))(&v20, a1);
  v5 = v20;
  sub_23372A488(&__p, "IFD0:SUBIFD0:DeltaH");
  (*(*v5 + 248))(v5, &__p, &v25, 0);
  if (v19 < 0)
  {
    operator delete(__p);
  }

  if (v21)
  {
    sub_2337239E8(v21);
  }

  (*(*a1 + 160))(&v20, a1);
  v6 = v20;
  sub_23372A488(&__p, "IFD0:SUBIFD0:DeltaV");
  (*(*v6 + 248))(v6, &__p, &v22, 0);
  if (v19 < 0)
  {
    operator delete(__p);
  }

  if (v21)
  {
    sub_2337239E8(v21);
  }

  v20 = 0;
  sub_233731694(&__p, 4uLL);
  v7 = __p;
  v8 = v18 - __p;
  if (v18 != __p)
  {
    v9 = 0;
    v10 = v27;
    v11 = (v28 - v27) >> 3;
    v12 = v25;
    v13 = (v26 - v25) >> 3;
    v14 = v22;
    v15 = (v23 - v22) >> 3;
    do
    {
      if (v11 > v9)
      {
        v7[v9] = v10[v9] + v7[v9];
      }

      if (v13 > v9)
      {
        v7[v9] = v12[v9] + v7[v9];
      }

      if (v15 > v9)
      {
        v7[v9] = v14[v9] + v7[v9];
      }

      ++v9;
    }

    while (v8 >> 3 > v9);
  }

  if (v8 == 32)
  {
    if (*v7 > 0.0 && v7[1] > 0.0 && v7[2] > 0.0 && v7[3] > 0.0)
    {
      v16 = 1;
      goto LABEL_42;
    }

    v20 = 0;
    sub_233731694(a2, 4uLL);
  }

  else
  {
    sub_2337D4D80(a1, a2);
  }

  v16 = 0;
LABEL_42:
  if (__p)
  {
    v18 = __p;
    operator delete(__p);
  }

  if (v22)
  {
    v23 = v22;
    operator delete(v22);
  }

  if (v25)
  {
    *&v26 = v25;
    operator delete(v25);
  }

  if (v27)
  {
    *&v28 = v27;
    operator delete(v27);
  }

  if (v16)
  {
    goto LABEL_51;
  }
}

void sub_2338010D0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, uint64_t a15, uint64_t a16, void *a17, uint64_t a18, uint64_t a19, void *a20, uint64_t a21)
{
  if (__p)
  {
    operator delete(__p);
  }

  if (a17)
  {
    operator delete(a17);
  }

  if (a20)
  {
    operator delete(a20);
  }

  v23 = *(v21 - 56);
  if (v23)
  {
    *(v21 - 48) = v23;
    operator delete(v23);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_233801180(uint64_t a1)
{
  (*(*a1 + 72))(&v7);
  v2 = v7;
  v3 = off_27DE37728[0];
  v4 = (*(*a1 + 120))(a1);
  v5 = sub_233801254(v2, v3, v4, &unk_28491AEC0);
  if (v8)
  {
    sub_2337239E8(v8);
  }

  return v5;
}

void sub_23380123C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_233801254(uint64_t a1, void *a2, int a3, void *a4)
{
  v34 = *MEMORY[0x277D85DE8];
  v7 = a2;
  v8 = a4;
  sub_2337BEBCC(v7, a3, &__p);
  v9 = sub_233735E3C(a1 + 24, &__p.__r_.__value_.__l.__data_);
  if (a1 + 32 == v9)
  {
    v28[0] = MEMORY[0x277D85DD0];
    v28[1] = 3221225472;
    v28[2] = sub_2338026E4;
    v28[3] = &unk_2789EEF70;
    v12 = v8;
    v29 = v12;
    sub_23386DB28(a1, v7, v28, &p_p);
    v17 = p_p;
    if (p_p)
    {
      v18 = sub_23386FD70(p_p, v13, v14, v15, v16);
      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
        exception = __cxa_allocate_exception(0x10uLL);
        MEMORY[0x2383ABCE0](exception, "RawCameraException");
        __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
      }

      v11 = objc_msgSend_longLongValue(v18, v19, v20, v21, v22);
    }

    else
    {
      v11 = 0;
    }

    if (v33)
    {
      sub_2337239E8(v33);
    }

    if (!v17)
    {
      v11 = v12[2](v12);
    }

    p_p = &__p;
    v23 = sub_2337BEEAC(a1 + 24, &__p.__r_.__value_.__l.__data_);
    v24 = (v23 + 56);
    v31[1] = v11;
    v31[0] = sub_23380277C;
    if (v31 != (v23 + 56))
    {
      v25 = *v24;
      if (*v24)
      {
        p_p = 0;
        v33 = 0;
        v25(2, v24, &p_p, 0, 0);
        v31[0](2, v31, v24, 0, 0);
        (p_p)(2, &p_p, v31, 0, 0);
        sub_2337BF090(&p_p);
      }

      else
      {
        *(v23 + 64) = v11;
        *(v23 + 56) = sub_23380277C;
        v31[0] = 0;
      }
    }

    sub_2337BF090(v31);
  }

  else
  {
    v10 = sub_233802730((v9 + 56));
    if (!v10)
    {
      sub_2337BEE3C();
    }

    v11 = *v10;
  }

  if (SHIBYTE(__p.__r_.__value_.__r.__words[2]) < 0)
  {
    operator delete(__p.__r_.__value_.__l.__data_);
  }

  return v11;
}

void sub_233801530(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, void *a14, void *__p, uint64_t a16, int a17, __int16 a18, char a19, char a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, std::__shared_weak_count *a26)
{
  __cxa_free_exception(v28);

  if (a26)
  {
    sub_2337239E8(a26);
  }

  if (a20 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

void sub_2338015C8(uint64_t a1@<X0>, void *a2@<X8>, double a3@<D0>)
{
  v14 = a3;
  v12[0] = 0;
  v12[1] = 0;
  v13 = 0;
  if ((*(*a1 + 960))(a1) != 10 && (*(*a1 + 960))(a1) != 15)
  {
    goto LABEL_12;
  }

  (*(*a1 + 160))(&v10, a1);
  v5 = v10;
  sub_23372A488(__p, "IFD0:EXIF:MAKERNOTE");
  v6 = (*(*v5 + 248))(v5, __p, v12, 0);
  if ((v12[1] - v12[0]) == 32)
  {
    v7 = v6;
  }

  else
  {
    v7 = 0;
  }

  if (v9 < 0)
  {
    operator delete(__p[0]);
  }

  if (v11)
  {
    sub_2337239E8(v11);
  }

  if (v7)
  {
    *a2 = *v12;
    a2[2] = v13;
  }

  else
  {
LABEL_12:
    sub_233731694(a2, 4uLL);
    if (v12[0])
    {
      v12[1] = v12[0];
      operator delete(v12[0]);
    }
  }
}

void sub_233801744(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17, void *a18, uint64_t a19)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  if (a18)
  {
    operator delete(a18);
  }

  _Unwind_Resume(exception_object);
}

void sub_233801790(uint64_t a1@<X0>, void *a2@<X8>, double a3@<D0>)
{
  v14 = a3;
  v12[0] = 0;
  v12[1] = 0;
  v13 = 0;
  if ((*(*a1 + 960))(a1) != 10 && (*(*a1 + 960))(a1) != 15)
  {
    goto LABEL_12;
  }

  (*(*a1 + 160))(&v10, a1);
  v5 = v10;
  sub_23372A488(__p, "IFD0:EXIF:MAKERNOTE:ImageProcessing");
  v6 = (*(*v5 + 248))(v5, __p, v12, 0);
  if ((v12[1] - v12[0]) == 32)
  {
    v7 = v6;
  }

  else
  {
    v7 = 0;
  }

  if (v9 < 0)
  {
    operator delete(__p[0]);
  }

  if (v11)
  {
    sub_2337239E8(v11);
  }

  if (v7)
  {
    *a2 = *v12;
    a2[2] = v13;
  }

  else
  {
LABEL_12:
    sub_233731694(a2, 4uLL);
    if (v12[0])
    {
      v12[1] = v12[0];
      operator delete(v12[0]);
    }
  }
}

void sub_23380190C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, std::__shared_weak_count *a17, void *a18, uint64_t a19)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  if (a17)
  {
    sub_2337239E8(a17);
  }

  if (a18)
  {
    operator delete(a18);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_233801958(uint64_t a1)
{
  (*(*a1 + 160))(&v3);
  sub_2337D0434(&v3, &v5);
  if (v4)
  {
    sub_2337239E8(v4);
  }

  if (v5)
  {
    v1 = v5[336];
  }

  else
  {
    v1 = 0;
  }

  if (v6)
  {
    sub_2337239E8(v6);
  }

  return v1;
}

uint64_t sub_233801A0C(uint64_t a1)
{
  (*(*a1 + 160))(&v5);
  sub_2337D0434(&v5, &v7);
  if (v6)
  {
    sub_2337239E8(v6);
  }

  if (v7)
  {
    v2 = (*(*v7 + 792))(v7);
  }

  else
  {
    v2 = sub_2337D1FD0(a1);
  }

  v3 = v2;
  if (v8)
  {
    sub_2337239E8(v8);
  }

  return v3;
}

void sub_233801AC8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_2337239E8(a12);
  }

  _Unwind_Resume(exception_object);
}

void sub_233801AE0(uint64_t a1@<X0>, void *a2@<X8>)
{
  (*(*a1 + 72))(&v8);
  v4 = v8;
  v5 = off_27DE37618[0];
  v6 = (*(*a1 + 120))(a1);
  v7[0] = MEMORY[0x277D85DD0];
  v7[1] = 3221225472;
  v7[2] = sub_233801BF8;
  v7[3] = &unk_2789EEF48;
  v7[4] = a1;
  sub_2337BE5F8(v4, v5, v6, v7, a2);
  if (v9)
  {
    sub_2337239E8(v9);
  }
}

void sub_233801BE0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, std::__shared_weak_count *a16)
{
  if (a16)
  {
    sub_2337239E8(a16);
  }

  _Unwind_Resume(exception_object);
}

void *sub_233801BF8@<X0>(uint64_t a1@<X0>, void *a2@<X8>)
{
  v3 = *(a1 + 32);
  v4 = (*(*v3 + 2960))(v3);
  if (v4 == 2)
  {
    (*(*v3 + 2968))(v3);
    v6 = *(*v3 + 2984);
    v7 = v3;

    return v6(v7);
  }

  if (v4 == 1)
  {
    (*(*v3 + 2968))(v3);
    v6 = *(*v3 + 2976);
    v7 = v3;

    return v6(v7);
  }

  if (v4)
  {
    exception = __cxa_allocate_exception(0x10uLL);
    MEMORY[0x2383ABCE0](exception, "RawCameraException");
    __cxa_throw(exception, MEMORY[0x277D82760], MEMORY[0x277D82600]);
  }

  (*(*v3 + 2968))(v3);
  return sub_233731694(a2, 4uLL);
}

id sub_233801DF8(uint64_t a1, void *a2)
{
  v3 = a2;
  if (objc_msgSend_isEqualToString_(v3, v4, @"packingMethod", v5, v6))
  {
    v7 = (*(*a1 + 2952))(a1);
    objc_msgSend_numberWithInt_(MEMORY[0x277CCABB0], v8, v7, v9, v10);
  }

  else
  {
    sub_2338D3C20(a1, v3);
  }
  v11 = ;

  return v11;
}

uint64_t sub_233801EB8(uint64_t a1)
{
  (*(*a1 + 72))(&v6);
  v2 = v6;
  v3 = (*(*a1 + 120))(a1);
  v4 = sub_2337D7FB8(v2, @"olympusBlackLevelSource", v3, &unk_28491AEE0);
  if (v7)
  {
    sub_2337239E8(v7);
  }

  return v4;
}

void sub_233801F64(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_2337239E8(a10);
  }

  _Unwind_Resume(exception_object);
}