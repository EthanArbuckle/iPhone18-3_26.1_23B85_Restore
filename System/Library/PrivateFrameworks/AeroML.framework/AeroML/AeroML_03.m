uint64_t sub_21AEDB464(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30)
{
  sub_21AEE2C30();
  sub_21AEE2EFC();
  v31 = *(v30 + 1488);

  v51 = *(v30 + 1512);
  v32 = *(v30 + 1416);
  v33 = *(v30 + 1408);
  v34 = *(v30 + 1400);
  v35 = *(v30 + 1392);
  v36 = *(v30 + 1384);
  v37 = *(v30 + 1376);
  v38 = *(v30 + 1368);
  v39 = *(v30 + 1360);
  v40 = *(v30 + 1352);
  v41 = *(v30 + 1336);
  sub_21AEE1848();
  sub_21AEE1E84();

  sub_21AEE26E0();
  sub_21AEE2C64();

  return v43(v42, v43, v44, v45, v46, v47, v48, v49, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20, a21, a22, a23, a24, a25, a26, v51, a28, a29, a30);
}

uint64_t sub_21AEDB5DC(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30)
{
  sub_21AEE2C30();
  sub_21AEE2EFC();
  v31 = v30[188];
  v32 = v30[186];
  v33 = v30[185];
  swift_unknownObjectRelease();

  v53 = v30[191];
  v34 = v30[177];
  v35 = v30[176];
  v36 = v30[175];
  v37 = v30[174];
  v38 = v30[173];
  v39 = v30[172];
  v40 = v30[171];
  v41 = v30[170];
  v42 = v30[169];
  v43 = v30[167];
  sub_21AEE1848();
  sub_21AEE1E84();

  sub_21AEE26E0();
  sub_21AEE2C64();

  return v45(v44, v45, v46, v47, v48, v49, v50, v51, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20, a21, a22, a23, a24, a25, a26, v53, a28, a29, a30);
}

uint64_t sub_21AEDB75C()
{
  v4 = *(v0 + 1608);
  v5 = *(v0 + 1600);
  v6 = *(v0 + 1592);
  sub_21AEA79F0((v0 + 136));
  sub_21AEC7734();
  v493 = v0;
  if (*(v0 + 984) == sub_21AF0992C())
  {
    v7 = (v0 + 1032);
    v473 = (v0 + 1032);
LABEL_3:
    v8 = *(v0 + 1600);

    while (1)
    {
      v9 = swift_unknownObjectRetain();
      MEMORY[0x21CEE4AD0](v9);
      sub_21AEE2BA8(*v7);
      if (v10)
      {
        sub_21AF098CC();
      }

      sub_21AEE2CC8();
      sub_21AF0991C();
      swift_unknownObjectRelease();
      v11 = *(v0 + 1032);
      v12 = *(v3 + 8);
      v13 = sub_21AEE2070();
      v14(v13);
      sub_21AEE2F38();
      v15 = *(v0 + 1232);
      v16 = *(v0 + 1224);
      v17 = *(v0 + 1216);
      *(v0 + 1568) = sub_21AF09D8C();
      sub_21AF09D7C();
      *(v0 + 1576) = *(v15 + 32);
      *(v0 + 1584) = (v15 + 32) & 0xFFFFFFFFFFFFLL | 0x48D8000000000000;
      sub_21AEE2334();
      v18();
      v19 = sub_21AEE2E58();
      sub_21AEA766C(v19, v20, v17);
      v21 = *(v0 + 1544);
      v22 = *(v0 + 1072);
      sub_21AEE2398();
      if (v23)
      {
        break;
      }

      sub_21AEE2BD8();
      v4 = *(v0 + 1208);
      v24 = *(v0 + 1184);
      v478 = v22;
      sub_21AEE2BC8(v25);
      v26 = *(v24 + 32);
      v0 = v24 + 32;
      v27 = sub_21AEE2148();
      v28(v27);
      sub_21AEE3018();
      sub_21AEE2ACC();
      swift_unknownObjectRetain();
      sub_21AEE1DCC();
      sub_21AEE2ACC();
      swift_unknownObjectRelease();
      swift_unknownObjectRetain();
      sub_21AEE2D94();
      sub_21AEE273C();
      sub_21AEE27D0();
      v29 = *(v2 + 56);
      v30 = sub_21AEE2D58();
      v3 = v486;
      v2 = v29(v30);
      *(v0 + 968) = v2;
      *(v0 + 832) = v484;
      sub_21AEE1900();
      ExtendedExistentialTypeMetadata = swift_getExtendedExistentialTypeMetadata();
      sub_21AEE2AA0(ExtendedExistentialTypeMetadata);
      sub_21AEE1A6C();
      swift_getWitnessTable();
      v32 = sub_21AF09A4C();

      if ((v32 & 1) == 0)
      {
        v33 = sub_21AEE2B68();
        v2 = v29(v33);
        *(v0 + 1600) = v2;
        v34 = sub_21AF0989C();
        *(v0 + 984) = v34;
        sub_21AED1D94();
        if (v34 == sub_21AF0992C())
        {
          goto LABEL_3;
        }

        goto LABEL_9;
      }
    }

    sub_21AEE2978();
    v65 = sub_21AEE29C4();
    sub_21AEE2DCC(v65);
    v66 = MEMORY[0x277D83988];
    WitnessTable = swift_getWitnessTable();
    sub_21AEE2B98(WitnessTable);
    sub_21AEE1CF8();
    v68 = (v0 + 696);
    sub_21AEE2B88();
    v76 = sub_21AED3450(v69, v70, v71, v470, v72, v73, v74, v75);
    sub_21AEE29E4(v76);

    v77 = *(v2 + 56);
    v78 = sub_21AEE2E38();
    v80 = v79(v78);
    sub_21AEE279C(v80);
    *(v81 + 816) = v484;
    *(v493 + 824) = v470;
    sub_21AEE1900();
    swift_getExtendedExistentialTypeMetadata();
    sub_21AEE2790();
    sub_21AF0997C();
    sub_21AEE2664();
    swift_getWitnessTable();
    sub_21AF09A4C();

    sub_21AEE2B78();
    sub_21AEE26CC();
    AMLRecommendationPipeline.logPipelineAsync(pipelineStage:pipelineName:candidates:features:pipelineLogger:metadata:)(v82, v83, v84, v85, v86, v11, v478, v473, v68, v2);
    v87 = *(v2 + 64);
    v88 = sub_21AEE2E38();
    *(v66 + 1664) = v89(v88);
    *(v66 + 768) = v484;
    *(v66 + 776) = v470;
    sub_21AEE1D14();
    v90 = swift_getExtendedExistentialTypeMetadata();
    v91 = v90;
    *(v66 + 1672) = v90;
    sub_21AEB3AB4();
    v92 = sub_21AF0989C();
    *(v66 + 960) = v92;
    sub_21AEB3AB4();
    if (v92 != sub_21AF0992C())
    {
      *(v66 + 1680) = v11;
      v157 = *(v66 + 1672);
      v158 = *(v66 + 1664);
      sub_21AEE2098();
      sub_21AF0990C();
      sub_21AEE1BEC();
      sub_21AEE21D0();
      sub_21AF098BC();
      v159 = *(v66 + 1672);
      v160 = *(v66 + 1664);
      if (v91)
      {
        sub_21AEE1F4C();
        v161 = *(v66 + 1392);
        v162 = *(v66 + 1320);
        v163 = *(v66 + 1088);
        v164 = *(v66 + 1072);
        v165 = sub_21AEE1954(40);
        sub_21AEE15E0(v165, v166 + 256);
        sub_21AEE201C();
        sub_21AF0996C();
        v167 = sub_21AEE1B30((v493 + 256), v493 + 296);
        v168 = v493;
        v68(v167);
        v169 = sub_21AEE1C84();
        (v478)(v169);
        sub_21AEE15E0(v168 + 296, v168 + 336);
        v170 = sub_21AF096AC();
        sub_21AF09AAC();
        sub_21AEE2228();
        os_log_type_enabled(v170, v171);
        sub_21AEE2F20();
        sub_21AEE2380();
        if (v172)
        {
          sub_21AEE1C4C();
          sub_21AEE2058();
          swift_slowAlloc();
          v173 = sub_21AEE1FE4();
          sub_21AEE2830(v173);
          v174 = sub_21AEE182C(4.8151e-34);
          v175(v174);
          v176 = sub_21AEE1B70();
          v159(v176);
          v177 = sub_21AEE1DFC();
          v68(v177);
          v178 = sub_21AEE21DC();
          sub_21AECFFFC(v178, v179, v180);
          sub_21AEE2028();

          sub_21AEE1BDC();
          v181 = *(v493 + 368);
          sub_21AEAF9B0((v493 + 336), *(v493 + 360));
          v182 = sub_21AEE1C34();
          v184 = v183(v182);
          sub_21AEA79F0((v493 + 336));
          sub_21AEEC484();
          sub_21AEE207C();
          v185 = sub_21AEE2070();
          sub_21AECFFFC(v185, v186, v187);
          sub_21AEE2884();
          *(v161 + 14) = v184;
          sub_21AEE1D50();
          sub_21AEE28EC(v188, v189, v190, v191);
          sub_21AEE2340();
          sub_21AEE2494();
          sub_21AEE2000();
        }

        else
        {
          v253 = *(v493 + 1056);
          sub_21AEE2620();
          sub_21AEA79F0((v493 + 336));

          v254 = sub_21AEE1FD8();
          v159(v254);
          v255 = sub_21AEC7734();
          v68(v255);
        }

        v256 = *(v493 + 320);
        v257 = *(v493 + 328);
        v258 = sub_21AEE1B50((v493 + 296));
        sub_21AEE1D3C(v258);
        v495 = v259 + *v259;
        v261 = *(v260 + 4);
        v262 = swift_task_alloc();
        *(v168 + 1688) = v262;
        *v262 = v168;
        sub_21AEE1B10(v262);
        v263 = *(v168 + 1640);
        sub_21AEE1974();
        sub_21AEE2290();

        __asm { BRAA            X4, X16 }
      }

      goto LABEL_68;
    }

    *(v66 + 1712) = v11;
    v93 = *(v66 + 1664);
    v94 = *(v66 + 1640);
    v95 = *(v66 + 1560);
    v96 = *(v66 + 1552);
    v97 = *(v66 + 1544);
    v98 = *(v66 + 1184);
    v99 = *(v66 + 1176);

    sub_21AEE2D70();
    *(v66 + 952) = sub_21AF098EC();
    *(v66 + 936) = v94;
    v100 = sub_21AED1D94();
    MEMORY[0x21CEE4AC0](v100);
    *(v66 + 928) = *(v66 + 944);
    sub_21AF09D6C();
    sub_21AEE2D04();
    v101 = (v98 + 16);
    while (1)
    {
      v102 = *(v66 + 1584);
      v103 = *(v66 + 1576);
      v104 = *(v66 + 1568);
      v105 = *(v66 + 1248);
      v106 = *(v66 + 1240);
      v107 = *(v66 + 1224);
      v108 = *(v66 + 1216);
      sub_21AF09D7C();
      v109 = sub_21AEE221C();
      v103(v109);
      v110 = sub_21AEE2E58();
      if (sub_21AEA766C(v110, v111, v108) == 1)
      {
        break;
      }

      v112 = *(v66 + 1240);
      v113 = *(v66 + 1184);
      v114 = *(v66 + 1176);
      v115 = *v112;
      v116 = *(*(v66 + 1216) + 48);
      (*(*(v66 + 1152) + 16))(*(v66 + 1160), v112 + v116, *(v66 + 1096));
      v117 = *(v113 + 8);
      v117(v112 + v116, v114);
      if (v486)
      {
        v125 = sub_21AEE2460();
        v115 = MEMORY[0x21CEE4EF0](v125);
      }

      else
      {
        if (v115 < 0)
        {
          __break(1u);
LABEL_66:
          __break(1u);
          goto LABEL_67;
        }

        sub_21AEE2F6C(v484);
        if (v10)
        {
          goto LABEL_66;
        }

        sub_21AEE30C0(v478);
      }

      v66 = v493;
      v118 = *(v493 + 1544);
      v119 = *(v493 + 1200);
      v120 = *(v493 + 1192);
      v121 = *(v493 + 1176);
      sub_21AEA8470(*(v493 + 1160), v115, *(v493 + 1096), v119);
      v122 = *v101;
      v123 = sub_21AED1D94();
      v124(v123);
      sub_21AEE2174();
      sub_21AF0994C();
      v117(v119, v121);
    }

    v192 = *(v66 + 1072);
    v193 = *(v66 + 1064);
    v194 = *(v66 + 1056);
    v195 = *(v66 + 720);
    v488 = *(v66 + 1088);

    v196 = *(v193 + 40);
    v197 = sub_21AEE2098();
    *(v66 + 1720) = v198(v197);

    *(v66 + 784) = v488;
    sub_21AEE1A84();
    *(v66 + 1728) = swift_getExtendedExistentialTypeMetadata();
    sub_21AEE204C();
    sub_21AF0989C();
    sub_21AEE2C4C();
    *(v66 + 920) = v107;
    sub_21AEE204C();
    if (v107 == sub_21AF0992C())
    {
      v199 = *(v66 + 1720);
      v200 = *(v66 + 1656);
      v201 = *(v66 + 1072);
      v202 = *(v66 + 1064);
      v203 = *(v66 + 1056);
      v489 = *(v66 + 1088);

      v204 = sub_21AEE21A8();
      *(v66 + 1768) = v205(v204);

      *(v66 + 864) = v489;
      sub_21AEE1A9C();
      *(v66 + 1776) = swift_getExtendedExistentialTypeMetadata();
      sub_21AEE204C();
      sub_21AF0989C();
      sub_21AEE2C4C();
      *(v66 + 888) = v107;
      sub_21AEE204C();
      if (v107 == sub_21AF0992C())
      {
        v206 = *(v66 + 1640);

        v207 = *(v66 + 952);
        *(v66 + 1816) = v207;
        v208 = *(v66 + 1072);
        v209 = *(v66 + 1064);
        v210 = *(v66 + 1056);
        v211 = *(v66 + 1048);
        *(v66 + 904) = v207;
        v212 = *(v209 + 80);

        v490 = *(v66 + 1088);
        sub_21AEE201C();
        *(v66 + 1824) = v212();
        *(v66 + 800) = v490;
        sub_21AEE17F4();
        *(v66 + 1832) = swift_getExtendedExistentialTypeMetadata();
        sub_21AEE204C();
        v213 = sub_21AF0989C();
        *(v66 + 912) = v213;
        sub_21AEE204C();
        v485 = v207;
        if (v213 == sub_21AF0992C())
        {
          v214 = *(v66 + 1824);
          v215 = *(v66 + 1816);
          v491 = *(v66 + 1456);
          v480 = *(v66 + 1448);
          v216 = *(v66 + 1440);
          sub_21AEE1E74();
          sub_21AEE256C(v217);

          v218 = sub_21AEE2138();
          (v66)(v218);
          v219 = v493;
          sub_21AEE2118();
          sub_21AEE2F78();
          v220();
          v221 = sub_21AF096AC();
          sub_21AF09AAC();
          sub_21AEE2824();
          os_log_type_enabled(v221, v222);
          sub_21AEE22F4();
          v475 = v224;
          v481 = v223;
          v225 = *(v493 + 1472);
          v226 = *(v493 + 1464);
          v227 = *(v493 + 1352);
          v228 = *(v493 + 1344);
          v229 = *(v493 + 1272);
          v230 = *(v493 + 1264);
          if (v231)
          {
            sub_21AEE2AD8();
            v232 = *(v493 + 1056);
            sub_21AEE2058();
            v471 = v233;
            swift_slowAlloc();
            v497 = sub_21AEE2550();
            v234 = sub_21AEE1BFC(4.8151e-34);
            v219 = v235(v234);
            LODWORD(v466) = v215;
            v236 = sub_21AEE2784();
            v225(v236);
            v237 = sub_21AEE2034();
            v226(v237);
            v238 = sub_21AEE2664();
            sub_21AECFFFC(v238, v215, v239);
            sub_21AEE2064();

            sub_21AEE1F1C();
            sub_21AEE2DFC(v240, v241, v242, v243, v244, v245, v246, v247, v453, v454, v455, v456, v457, v458, v459, v460, v461, v462, v230 + 8, v464, v228 + 8, v466, v468, v471, v475, v481, v485);

            v249 = MEMORY[0x21CEE4B10](v248, v469);

            v250 = sub_21AEE2460();
            sub_21AECFFFC(v250, v251, v252);
            sub_21AEE2064();

            *(v228 + 14) = v249;
            sub_21AEE262C(&dword_21AE94000, "<requestID: %s> Returning ranked suggestions: %s", v467);
            swift_arrayDestroy();
            MEMORY[0x21CEE5A20](v497, -1, -1);
            sub_21AEE23C8();
            swift_unknownObjectRelease();
          }

          else
          {
            v420 = *(v493 + 1088);
            v421 = *(v493 + 1056);
            swift_unknownObjectRelease();

            v422 = sub_21AEE2098();
            v225(v422);
            v423 = sub_21AEE2034();
            v226(v423);
          }

          v424 = v219[177];
          v425 = v219[176];
          v426 = v219[175];
          v427 = v219[174];
          v428 = v219[173];
          v429 = v219[172];
          v430 = v219[171];
          v431 = v219;
          v432 = v219[170];
          v433 = v431[169];
          v434 = v431[167];
          sub_21AEE19AC();

          sub_21AEE24D4();
          sub_21AEE2290();

          __asm { BRAA            X2, X16 }
        }

        sub_21AEE2C80();
        *(v66 + 1840) = v207;
        v352 = *(v66 + 1832);
        v353 = *(v66 + 1824);
        sub_21AEE2098();
        sub_21AF0990C();
        sub_21AEE1BEC();
        sub_21AEE21D0();
        sub_21AF098BC();
        v354 = *(v66 + 1832);
        v355 = *(v66 + 1824);
        if (v211)
        {
          v477 = *(v66 + 1448);
          v483 = *(v66 + 1456);
          v356 = *(v66 + 1440);
          v357 = *(v66 + 1432);
          v492 = *(v66 + 1424);
          v358 = *(v66 + 1368);
          v359 = *(v66 + 1288);
          v360 = *(v66 + 1088);
          v361 = *(v66 + 1072);
          v362 = sub_21AEE1954(40);
          sub_21AEE15E0(v362, v363 + 616);
          sub_21AEE201C();
          sub_21AF0996C();
          v364 = sub_21AEE1B30((v493 + 616), v493 + 576);
          v365 = v493;
          v357(v364);
          v366 = sub_21AEE1C84();
          v477(v366);
          sub_21AEE15E0((v365 + 72), (v365 + 47));
          v367 = sub_21AF096AC();
          v368 = sub_21AF09AAC();
          v369 = sub_21AEE28D0(v368);
          v370 = *(v493 + 1472);
          v371 = *(v493 + 1464);
          v372 = *(v493 + 1368);
          v373 = *(v493 + 1344);
          v374 = *(v493 + 1288);
          if (v369)
          {
            v472 = *(v493 + 1176);
            v375 = *(v493 + 1088);
            v376 = *(v493 + 1080);
            sub_21AEE2F08();
            LODWORD(v483) = v358;
            v377 = *(v493 + 1056);
            sub_21AEB39C8();
            v498 = sub_21AEE2234();
            v378 = sub_21AEE1AC8(4.8152e-34);
            v379(v378);
            v380 = sub_21AEE20F8();
            v370(v380, v375);
            v381 = sub_21AEE2854();
            v371(v381);
            v382 = sub_21AEE283C();
            v365 = v493;
            sub_21AECFFFC(v382, v359, v383);
            sub_21AEE2884();
            sub_21AEE1D2C();
            v384 = *(v493 + 400);
            v385 = *(v493 + 408);
            sub_21AEAF9B0(v365 + 47, v365[50]);
            sub_21AEE1A54();
            v387 = v386(v384);
            sub_21AEA79F0((v493 + 376));
            sub_21AEEC484();
            sub_21AEE2478();
            v388 = sub_21AEE24C8();
            sub_21AECFFFC(v388, v389, v390);
            sub_21AEE2884();
            sub_21AEE1DAC();
            sub_21AEE2DFC(v391, v392, v393, v394, v395, v396, v397, v398, v453, v454, v455, v456, v457, v458, v459, v460, v461, v462, v463, v464, v465, v466, v468, v472, v498, v483, v485);

            sub_21AF0992C();
            sub_21AEE2658();

            *(v213 + 24) = v387;
            sub_21AEE1DBC();
            sub_21AEE2B30(v399, v400, v401, v402);
            sub_21AEE2FF8();
            sub_21AEE2494();
            sub_21AEE2250();
          }

          else
          {
            v437 = *(v493 + 1088);
            v438 = *(v493 + 1056);
            v439 = *(v493 + 1264) + 8;
            sub_21AEA79F0((v493 + 376));

            v440 = sub_21AEE24BC();
            (v370)(v440);
            v441 = sub_21AEE2034();
            v371(v441);
          }

          v442 = v365[75];
          v443 = v365[76];
          v444 = sub_21AEE1B50(v365 + 72);
          v445 = *(v444 + 32);
          sub_21AEE1E1C(v444 + 32);
          v496 = v446 + *v446;
          v448 = *(v447 + 4);
          v449 = swift_task_alloc();
          v365[231] = v449;
          *v449 = v365;
          sub_21AEE180C(v449);
          v450 = v365[227];
          sub_21AEE1AFC(v365[131]);
          sub_21AEE2290();

          __asm { BRAA            X4, X16 }
        }

        goto LABEL_71;
      }

      v300 = *(v66 + 1776);
      v301 = *(v66 + 1768);
      sub_21AEE2098();
      sub_21AF0990C();
      sub_21AEE1BEC();
      sub_21AEE21D0();
      sub_21AF098BC();
      v302 = *(v66 + 1776);
      v303 = *(v66 + 1768);
      if ((v203 & 1) == 0)
      {
        goto LABEL_70;
      }

      sub_21AEE1F4C();
      v304 = *(v66 + 1376);
      v305 = *(v66 + 1296);
      v306 = *(v66 + 1088);
      v307 = *(v66 + 1072);
      v308 = sub_21AEE1954(40);
      sub_21AEE15E0(v308, v309 + 16);
      sub_21AEE201C();
      sub_21AF0996C();
      v310 = sub_21AEE1B30((v493 + 16), v493 + 416);
      v102(v310);
      v311 = sub_21AEE1C84();
      (v478)(v311);
      sub_21AEE15E0(v493 + 416, v493 + 456);
      v312 = sub_21AF096AC();
      sub_21AF09AAC();
      sub_21AEE2228();
      os_log_type_enabled(v312, v313);
      sub_21AEE2F20();
      sub_21AEE23B0();
      if (v314)
      {
        sub_21AEE1C4C();
        sub_21AEE2058();
        swift_slowAlloc();
        v315 = sub_21AEE1FE4();
        sub_21AEE2830(v315);
        v316 = sub_21AEE182C(4.8151e-34);
        v317(v316);
        v318 = sub_21AEE1B70();
        v302(v318);
        v319 = sub_21AEE1DFC();
        v102(v319);
        v320 = sub_21AEE21DC();
        sub_21AECFFFC(v320, v321, v322);
        sub_21AEE2028();

        sub_21AEE1BDC();
        v323 = *(v493 + 488);
        sub_21AEAF9B0((v493 + 456), *(v493 + 480));
        v324 = sub_21AEE18E0();
        v326 = v325(v324);
        sub_21AEA79F0((v493 + 456));
        sub_21AEEC484();
        sub_21AEE207C();
        v327 = sub_21AEE2070();
        sub_21AECFFFC(v327, v328, v329);
        sub_21AEE2884();
        *(v304 + 14) = v326;
        sub_21AEE1D50();
        sub_21AEE28EC(v330, v331, v332, v333);
        sub_21AEE2340();
        sub_21AEE2494();
        sub_21AEE2000();
      }

      else
      {
        v403 = *(v493 + 1056);
        sub_21AEE2620();
        sub_21AEA79F0((v493 + 456));

        v404 = sub_21AEE1FD8();
        v302(v404);
        v405 = sub_21AEC7734();
        v102(v405);
      }

      sub_21AEE2164();
      v406 = *(v493 + 1120);
      v407 = sub_21AEE1EE8();
      v408(v407);
      *(v493 + 1784) = *(v493 + 952);
      v409 = sub_21AEE1AE4();
      sub_21AEFBF4C(v409, v410, v411, v412);
      v414 = *(v493 + 440);
      v413 = *(v493 + 448);
      sub_21AEE1F00((v493 + 416));

      v415 = swift_task_alloc();
      *(v493 + 1792) = v415;
      *v415 = v493;
      sub_21AEE18A0(v415);
      sub_21AEE1994(*(v493 + 1120));
      sub_21AEE2290();

      return AMLRankingPipeline.process(context:)(v416, v417, v418);
    }

    else
    {
      v266 = *(v66 + 1728);
      v267 = *(v66 + 1720);
      sub_21AEE2098();
      sub_21AF0990C();
      sub_21AEE1BEC();
      sub_21AEE21D0();
      sub_21AF098BC();
      v268 = *(v66 + 1728);
      v269 = *(v66 + 1720);
      if ((v106 & 1) == 0)
      {
        goto LABEL_69;
      }

      sub_21AEE1F4C();
      v270 = *(v66 + 1384);
      v271 = *(v66 + 1312);
      v272 = *(v66 + 1088);
      v273 = *(v66 + 1072);
      v274 = sub_21AEE1954(40);
      sub_21AEE15E0(v274, v275 + 56);
      sub_21AEE201C();
      sub_21AF0996C();
      v276 = sub_21AEE1B30((v493 + 56), v493 + 656);
      v102(v276);
      v277 = sub_21AEE1C84();
      (v478)(v277);
      sub_21AEE15E0(v493 + 656, v493 + 496);
      v278 = sub_21AF096AC();
      sub_21AF09AAC();
      sub_21AEE2228();
      os_log_type_enabled(v278, v279);
      sub_21AEE2F20();
      sub_21AEE23E4();
      if (v280)
      {
        sub_21AEE1C4C();
        sub_21AEE2058();
        swift_slowAlloc();
        v281 = sub_21AEE1FE4();
        sub_21AEE2830(v281);
        v282 = sub_21AEE182C(4.8151e-34);
        v283(v282);
        v284 = sub_21AEE1B70();
        v268(v284);
        v285 = sub_21AEE1DFC();
        v102(v285);
        v286 = sub_21AEE21DC();
        sub_21AECFFFC(v286, v287, v288);
        sub_21AEE2028();

        sub_21AEE1BDC();
        v289 = *(v493 + 528);
        sub_21AEAF9B0((v493 + 496), *(v493 + 520));
        v290 = sub_21AEE18E0();
        v292 = v291(v290);
        sub_21AEA79F0((v493 + 496));
        sub_21AEEC484();
        sub_21AEE207C();
        v293 = sub_21AEE2070();
        sub_21AECFFFC(v293, v294, v295);
        sub_21AEE2884();
        *(v270 + 14) = v292;
        sub_21AEE1D50();
        sub_21AEE28EC(v296, v297, v298, v299);
        sub_21AEE2340();
        sub_21AEE2494();
        sub_21AEE2000();
      }

      else
      {
        v334 = *(v493 + 1056);
        sub_21AEE2620();
        sub_21AEA79F0((v493 + 496));

        v335 = sub_21AEE1FD8();
        v268(v335);
        v336 = sub_21AEC7734();
        v102(v336);
      }

      sub_21AEE2164();
      v337 = *(v493 + 1144);
      v338 = sub_21AEE1EE8();
      v339(v338);
      *(v493 + 1736) = *(v493 + 952);
      v340 = sub_21AEE1AE4();
      sub_21AEFC9C0(v340, v341, v342, v343);
      v344 = *(v493 + 680);
      v345 = *(v493 + 688);
      sub_21AEE1F00((v493 + 656));

      v346 = swift_task_alloc();
      *(v493 + 1744) = v346;
      *v346 = v493;
      sub_21AEE1A1C(v346);
      sub_21AEE1994(*(v493 + 1144));
      sub_21AEE2290();

      return AMLScoringPipeline.process(context:)(v347, v348, v349);
    }
  }

  else
  {
LABEL_9:
    *(v0 + 1608) = v4;
    sub_21AEE2CB0();
    sub_21AEE204C();
    sub_21AF0990C();
    sub_21AEE20C0();
    sub_21AEE21E8();
    sub_21AF098BC();
    sub_21AEE2CB0();
    if (v1)
    {
      sub_21AEE2670();
      v479 = v35;
      v474 = *(v0 + 1440);
      v36 = *(v0 + 1432);
      v487 = *(v0 + 1424);
      v37 = *(v0 + 1400);
      v38 = *(v0 + 1328);
      sub_21AEE1CE8();
      sub_21AEE2948(v39);
      sub_21AEE252C();
      sub_21AF0996C();
      v40 = sub_21AEE1B30((v493 + 176), v493 + 136);
      v41 = v493;
      v36(v40);
      v42 = sub_21AEE2070();
      v479(v42);
      sub_21AEE15E0((v41 + 17), (v41 + 12));
      v43 = sub_21AF096AC();
      sub_21AF09AAC();
      sub_21AEE2228();
      os_log_type_enabled(v43, v44);
      sub_21AEE2F20();
      sub_21AEE22AC();
      if (v45)
      {
        sub_21AEE1C4C();
        sub_21AEE2058();
        swift_slowAlloc();
        v46 = sub_21AEE1FE4();
        sub_21AEE2830(v46);
        v47 = sub_21AEE182C(4.8151e-34);
        v48(v47);
        v49 = sub_21AEE1B70();
        v4(v49);
        v50 = sub_21AEE1DFC();
        (v0)(v50);
        v51 = sub_21AEE21DC();
        sub_21AECFFFC(v51, v52, v53);
        sub_21AEE2028();

        sub_21AEE1BDC();
        v54 = *(v493 + 128);
        sub_21AEAF9B0((v493 + 96), *(v493 + 120));
        v55 = sub_21AEE1C34();
        v57 = v56(v55);
        sub_21AEA79F0((v493 + 96));
        sub_21AEEC484();
        sub_21AEE207C();
        v58 = sub_21AEE2070();
        sub_21AECFFFC(v58, v59, v60);
        sub_21AEE2884();
        *(v37 + 14) = v57;
        sub_21AEE1D50();
        sub_21AEE28EC(v61, v62, v63, v64);
        sub_21AEE2930();
        sub_21AEE20A4();
        sub_21AEE2000();
      }

      else
      {
        v126 = *(v493 + 1056);
        sub_21AEE2620();
        sub_21AEA79F0((v493 + 96));

        v127 = sub_21AEE1FD8();
        v4(v127);
        v128 = sub_21AEC7734();
        (v0)(v128);
      }

      v129 = sub_21AEE2860();
      v130(v129);
      sub_21AEE204C();
      sub_21AF097DC();
      sub_21AEE2A04();
      v131 = sub_21AF096AC();
      v132 = sub_21AF09AAC();
      if (sub_21AEE2C98(v132))
      {
        sub_21AEE2058();
        swift_slowAlloc();
        sub_21AEE1FE4();
        *v37 = 136315394;
        v133 = *(v493 + 560);
        v134 = *(v493 + 568);
        v135 = sub_21AEE2E8C();
        sub_21AEAF9B0(v135, v133);
        sub_21AEE2508(v134);
        v136 = sub_21AEE2AF4();
        v137(v136);
        v138 = sub_21AEE2E8C();
        sub_21AEA79F0(v138);
        sub_21AEEC484();
        v41 = v139;

        v140 = sub_21AEE2278();
        v142 = sub_21AECFFFC(v140, v41, v141);
        sub_21AEE2664();

        sub_21AEE1BDC();
        v143 = sub_21AEE2174();
        sub_21AECFFFC(v143, v144, v145);
        sub_21AEE2180();

        *(v37 + 14) = v142;
        sub_21AEE270C(&dword_21AE94000, v146, v132, "Processing candidate feature provider %s for %s");
        swift_arrayDestroy();
        sub_21AEE23C8();
        sub_21AEE2000();
      }

      else
      {
        sub_21AEA79F0((v493 + 536));
      }

      v147 = v41[20];
      v148 = v41[21];
      v149 = sub_21AEE1B50(v41 + 17);
      sub_21AEE1D3C(v149);
      v494 = v150 + *v150;
      v152 = *(v151 + 4);
      v153 = swift_task_alloc();
      v41[202] = v153;
      *v153 = v41;
      v153[1] = sub_21AED6158;
      v154 = v41[151];
      sub_21AEE1974();
      sub_21AEE2290();

      __asm { BRAA            X4, X16 }
    }

LABEL_67:
    sub_21AEE252C();
    sub_21AF09C7C();
    __break(1u);
LABEL_68:
    sub_21AEE201C();
    sub_21AF09C7C();
    __break(1u);
LABEL_69:
    sub_21AEE201C();
    sub_21AF09C7C();
    __break(1u);
LABEL_70:
    sub_21AEE201C();
    sub_21AF09C7C();
    __break(1u);
LABEL_71:
    sub_21AEE201C();
    result = sub_21AF09C7C();
    __break(1u);
  }

  return result;
}

uint64_t sub_21AEDD0B0(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30)
{
  sub_21AEE2C30();
  sub_21AEE2EFC();
  v31 = v30[210];
  v32 = v30[188];
  v33 = v30[186];
  v34 = v30[185];
  swift_unknownObjectRelease();

  sub_21AEA79F0(v30 + 37);

  v54 = v30[213];
  v35 = v30[177];
  v36 = v30[176];
  v37 = v30[175];
  v38 = v30[174];
  v39 = v30[173];
  v40 = v30[172];
  v41 = v30[171];
  v42 = v30[170];
  v43 = v30[169];
  v44 = v30[167];
  sub_21AEE1848();
  sub_21AEE1E84();

  sub_21AEE26E0();
  sub_21AEE2C64();

  return v46(v45, v46, v47, v48, v49, v50, v51, v52, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20, a21, a22, a23, a24, a25, a26, v54, a28, a29, a30);
}

uint64_t sub_21AEDD27C(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30)
{
  sub_21AEE2C30();
  sub_21AEE2EFC();
  v31 = v30[230];
  v32 = v30[214];
  v33 = v30[188];
  v34 = v30[186];
  v35 = v30[185];
  swift_unknownObjectRelease();

  sub_21AEA79F0(v30 + 72);

  v55 = v30[233];
  v36 = v30[177];
  v37 = v30[176];
  v38 = v30[175];
  v39 = v30[174];
  v40 = v30[173];
  v41 = v30[172];
  v42 = v30[171];
  v43 = v30[170];
  v44 = v30[169];
  v45 = v30[167];
  sub_21AEE1848();
  sub_21AEE1E84();

  sub_21AEE26E0();
  sub_21AEE2C64();

  return v47(v46, v47, v48, v49, v50, v51, v52, v53, a9, a10, a11, a12, a13, a14, a15, a16, a17, a18, a19, a20, a21, a22, a23, a24, a25, a26, v55, a28, a29, a30);
}

uint64_t sub_21AEDD41C@<X0>(void *a1@<X0>, uint64_t *a2@<X8>)
{
  v4 = a1[3];
  v3 = a1[4];
  sub_21AEAF9B0(a1, v4);
  (*(*(*(*(v3 + 8) + 8) + 8) + 16))(v4);
  v5 = sub_21AEEC484();
  v7 = v6;

  *a2 = v5;
  a2[1] = v7;
  return result;
}

id sub_21AEDD4A4()
{
  v0 = objc_allocWithZone(swift_getObjCClassFromMetadata());
  v1 = sub_21AF0971C();

  v2 = [v0 initWithFeatureDictionary_];

  return v2;
}

uint64_t AMLRecommendationPipeline.contextFeatures(context:)()
{
  sub_21AEE2AC0();
  v1[21] = v2;
  v1[22] = v0;
  v1[19] = v3;
  v1[20] = v4;
  v1[23] = *(v2 + 8);
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  v1[24] = AssociatedTypeWitness;
  v6 = *(AssociatedTypeWitness - 8);
  sub_21AEE21F4();
  v1[25] = v7;
  v9 = *(v8 + 64);
  v1[26] = sub_21AEE30A8();
  sub_21AEE268C();
  v1[27] = v10;
  v12 = *(v11 + 64);
  v1[28] = sub_21AEE30A8();
  sub_21AEE246C();

  return MEMORY[0x2822009F8](v13, v14, v15);
}

void sub_21AEDD63C()
{
  sub_21AF0974C();
  v1 = objc_allocWithZone(MEMORY[0x277CBFED0]);
  v2 = sub_21AF07524();
  v3 = *(v0 + 192);
  v4 = *(v0 + 176);
  v5 = (*(*(v0 + 168) + 24))(*(v0 + 160));
  *(v0 + 144) = v3;
  *(v0 + 232) = v5;
  sub_21AEE2514();
  *(v0 + 240) = swift_getExtendedExistentialTypeMetadata();
  sub_21AEE2700();
  v6 = sub_21AF0989C();
  *(v0 + 136) = v6;
  sub_21AEE2700();
  if (v6 == sub_21AF0992C())
  {
    v8 = *(v0 + 224);
    v7 = *(v0 + 232);
    v9 = *(v0 + 208);

    sub_21AEE24D4();
    sub_21AEE2FBC();

    __asm { BRAA            X2, X16 }
  }

  *(v0 + 248) = v2;
  v13 = *(v0 + 232);
  v12 = *(v0 + 240);
  sub_21AEE2098();
  sub_21AF0990C();
  sub_21AEE20C0();
  sub_21AEE21D0();
  sub_21AF098BC();
  v15 = *(v0 + 232);
  v14 = *(v0 + 240);
  if ((v0 - 112))
  {
    v16 = sub_21AEE27B0();
    sub_21AEE15E0(v16, v0 + 16);
    sub_21AEE201C();
    sub_21AF0996C();
    sub_21AE9641C((v0 + 16), v0 + 56);
    if (qword_27CD3D2C0 == -1)
    {
      goto LABEL_7;
    }
  }

  else
  {
    sub_21AEE201C();
    sub_21AF09C7C();
    __break(1u);
  }

  sub_21AEE1934();
LABEL_7:
  v18 = *(v0 + 216);
  v17 = *(v0 + 224);
  v20 = *(v0 + 200);
  v19 = *(v0 + 208);
  v21 = *(v0 + 192);
  v22 = *(v0 + 176);
  v24 = *(v0 + 152);
  v23 = *(v0 + 160);
  v25 = sub_21AF096CC();
  sub_21AEA7958(v25, qword_27CD3EC20);
  v26 = sub_21AEE230C();
  v27(v26);
  v28 = *(v20 + 16);
  v29 = sub_21AEE24C8();
  v30(v29);
  sub_21AEE15E0(v0 + 56, v0 + 96);
  v31 = sub_21AF096AC();
  sub_21AF09AAC();
  sub_21AEE2228();
  v33 = os_log_type_enabled(v31, v32);
  v34 = *(v0 + 216);
  v35 = *(v0 + 224);
  v37 = *(v0 + 200);
  v36 = *(v0 + 208);
  v38 = *(v0 + 192);
  if (v33)
  {
    v39 = *(v0 + 184);
    v74 = v21;
    v40 = *(v0 + 160);
    sub_21AEE2058();
    swift_slowAlloc();
    sub_21AEE1FE4();
    sub_21AEE1AB4(4.8151e-34);
    sub_21AEE2E2C();
    v41();
    v42 = *(v37 + 8);
    v43 = sub_21AEE1FD8();
    v44(v43);
    v45 = sub_21AEE2108();
    v46(v45);
    v47 = sub_21AEE21DC();
    sub_21AECFFFC(v47, v48, v49);
    sub_21AEE2028();

    sub_21AEE1BDC();
    sub_21AEE2D1C();
    v51 = *(v50 + 32);
    v52 = sub_21AEE1E0C();
    v54 = v53(v52);
    sub_21AEA79F0((v0 + 96));
    sub_21AEEC484();
    sub_21AEE207C();
    v55 = sub_21AEE2070();
    sub_21AECFFFC(v55, v56, v57);
    sub_21AEE2884();
    *(v31 + 14) = v54;
    sub_21AEE218C(&dword_21AE94000, v58, v74, "<requestID: %s> Processing context feature provider %s");
    sub_21AEE2930();
    sub_21AEE20A4();
    sub_21AEE2000();
  }

  else
  {
    v59 = *(v0 + 160);
    sub_21AEA79F0((v0 + 96));

    v60 = *(v37 + 8);
    v61 = sub_21AEE1FD8();
    v62(v61);
    v63 = sub_21AEE2108();
    v64(v63);
  }

  v65 = *(v0 + 80);
  v66 = *(v0 + 88);
  v67 = *(sub_21AEE1B50((v0 + 56)) + 40);
  sub_21AEE21F4();
  v75 = v68 + *v68;
  v70 = *(v69 + 4);
  v71 = swift_task_alloc();
  *(v0 + 256) = v71;
  *v71 = v0;
  v71[1] = sub_21AEDDAF0;
  sub_21AEE2040(*(v0 + 152));
  sub_21AEE252C();
  sub_21AEE2FBC();

  __asm { BRAA            X3, X16 }
}

uint64_t sub_21AEDDAF0()
{
  sub_21AEE2818();
  sub_21AEE22E4();
  v4 = v3;
  sub_21AEE1D9C();
  *v5 = v4;
  v7 = *(v6 + 256);
  v8 = *v2;
  sub_21AEE1F6C();
  *v9 = v8;
  v4[33] = v0;

  if (v0)
  {
    v10 = v4[29];
  }

  else
  {
    v4[34] = v1;
  }

  sub_21AEE23FC();

  return MEMORY[0x2822009F8](v11, v12, v13);
}

void sub_21AEDDBFC()
{
  v2 = *(v0 + 264);
  v1 = *(v0 + 272);
  v4 = *(v0 + 240);
  v3 = *(v0 + 248);
  v5 = *(v0 + 232);
  swift_getObjectType();
  v6 = v3;
  MLFeatureProvider.merging(other:uniquingKeysWith:)();
  sub_21AEE2064();
  swift_unknownObjectRelease();
  swift_unknownObjectRelease();
  sub_21AEA79F0((v0 + 56));
  v7 = sub_21AF0992C();
  v8 = *(v0 + 136);
  if (v8 == v7)
  {
    v10 = *(v0 + 224);
    v9 = *(v0 + 232);
    v11 = *(v0 + 208);

    sub_21AEE24D4();
    sub_21AEE2A24();

    __asm { BRAA            X2, X16 }
  }

  *(v0 + 248) = v6;
  v14 = *(v0 + 232);
  v15 = *(v0 + 240);
  sub_21AEC76A0();
  v16 = sub_21AF0990C();
  sub_21AEE3058();
  v17 = *(v0 + 240);
  if (v16)
  {
    v80 = v0 + 96;
    sub_21AEE15E0(*(v0 + 232) + 40 * v8 + 32, v0 + 16);
    sub_21AEE2700();
    sub_21AF0996C();
    sub_21AE9641C((v0 + 16), v0 + 56);
    if (qword_27CD3D2C0 == -1)
    {
      goto LABEL_7;
    }
  }

  else
  {
    v76 = *(v0 + 232);
    v77 = *(v0 + 240);
    sub_21AF09C7C();
    __break(1u);
  }

  sub_21AEE1934();
LABEL_7:
  v18 = *(v0 + 216);
  v19 = *(v0 + 224);
  v21 = *(v0 + 200);
  v20 = *(v0 + 208);
  v22 = *(v0 + 192);
  v23 = *(v0 + 176);
  v25 = *(v0 + 152);
  v24 = *(v0 + 160);
  v26 = sub_21AF096CC();
  sub_21AEA7958(v26, qword_27CD3EC20);
  v27 = *(v18 + 16);
  v28 = sub_21AEE2034();
  v29(v28);
  v30 = *(v21 + 16);
  v31 = sub_21AEE2128();
  v32(v31);
  sub_21AEE15E0(v0 + 56, v80);
  v33 = sub_21AF096AC();
  v34 = sub_21AF09AAC();
  v35 = os_log_type_enabled(v33, v34);
  v36 = *(v0 + 216);
  v37 = *(v0 + 224);
  v38 = *(v0 + 200);
  v39 = *(v0 + 208);
  v40 = *(v0 + 192);
  if (v35)
  {
    v41 = *(v0 + 184);
    log = v33;
    v42 = *(v0 + 160);
    sub_21AEE2058();
    swift_slowAlloc();
    v82 = sub_21AEE2234();
    *v80 = 136315394;
    v43 = *(v41 + 56);
    v44 = sub_21AEE2F2C();
    v46 = v45(v44);
    v78 = v34;
    v48 = v47;
    (*(v38 + 8))(v39, v40);
    v49 = *(v36 + 8);
    v50 = sub_21AEE2D64();
    v51(v50);
    sub_21AECFFFC(v46, v48, &v82);
    sub_21AEE2B00();

    sub_21AEE1D2C();
    v52 = *(v0 + 120);
    v53 = *(v0 + 128);
    v54 = sub_21AEE24BC();
    sub_21AEAF9B0(v54, v55);
    v56 = *(v53 + 32);
    v57 = sub_21AEE2B00();
    v58(v57, v53);
    v59 = sub_21AEE2064();
    sub_21AEA79F0(v59);
    sub_21AEEC484();

    v60 = sub_21AEE24BC();
    sub_21AECFFFC(v60, v61, v62);
    sub_21AEE2B00();

    *(v80 + 14) = v37;
    _os_log_impl(&dword_21AE94000, log, v78, "<requestID: %s> Processing context feature provider %s", v80, 0x16u);
    sub_21AEE2930();
    sub_21AEE20A4();
    sub_21AEE2250();
  }

  else
  {
    v63 = *(v0 + 160);
    sub_21AEA79F0(v80);

    (*(v38 + 8))(v39, v40);
    v64 = *(v36 + 8);
    v65 = sub_21AEE24E0();
    v66(v65);
  }

  v67 = *(v0 + 80);
  v68 = *(v0 + 88);
  v69 = *(sub_21AEE1B50((v0 + 56)) + 40);
  sub_21AEE21F4();
  v81 = v70 + *v70;
  v72 = *(v71 + 4);
  v73 = swift_task_alloc();
  *(v0 + 256) = v73;
  *v73 = v0;
  v73[1] = sub_21AEDDAF0;
  sub_21AEE2040(*(v0 + 152));
  sub_21AEE252C();
  sub_21AEE2A24();

  __asm { BRAA            X3, X16 }
}

uint64_t sub_21AEDE08C()
{
  sub_21AEE2AC0();
  v1 = v0[31];
  swift_unknownObjectRelease();
  sub_21AEA79F0(v0 + 7);
  v2 = v0[33];
  v3 = v0[28];
  v4 = v0[26];

  sub_21AEE280C();

  return v5();
}

uint64_t AMLRecommendationPipeline.candidates(context:pipelineLogger:metadata:)()
{
  sub_21AEE2AC0();
  v1[55] = v2;
  v1[56] = v0;
  v1[53] = v3;
  v1[54] = v4;
  v1[51] = v5;
  v1[52] = v6;
  v1[57] = *(v2 + 8);
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  v1[58] = AssociatedTypeWitness;
  v8 = *(AssociatedTypeWitness - 8);
  sub_21AEE21F4();
  v1[59] = v9;
  v11 = *(v10 + 64);
  v1[60] = sub_21AEE2D7C();
  v1[61] = swift_task_alloc();
  v1[62] = swift_task_alloc();
  sub_21AEE268C();
  v1[63] = v12;
  v14 = *(v13 + 64);
  v1[64] = sub_21AEE2D7C();
  v1[65] = swift_task_alloc();
  v1[66] = swift_task_alloc();
  sub_21AEE246C();

  return MEMORY[0x2822009F8](v15, v16, v17);
}

uint64_t sub_21AEDE248()
{
  v139 = v0;
  v2 = *(v0 + 464);
  v4 = *(v0 + 440);
  v3 = *(v0 + 448);
  v5 = *(v0 + 432);
  sub_21AEE2CBC();
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  *(v0 + 536) = AssociatedTypeWitness;
  *(v0 + 544) = type metadata accessor for AMLCandidateWithFeatures();
  v7 = sub_21AF098EC();
  *(v0 + 352) = v7;
  v8 = *(v4 + 32);
  v9 = sub_21AEE221C();
  v11 = v10(v9);
  *(v0 + 552) = v11;
  *(v0 + 320) = v2;
  *(v0 + 328) = AssociatedTypeWitness;
  ExtendedExistentialTypeMetadata = swift_getExtendedExistentialTypeMetadata();
  v13 = ExtendedExistentialTypeMetadata;
  *(v0 + 560) = ExtendedExistentialTypeMetadata;
  sub_21AEB3AB4();
  v14 = sub_21AF0989C();
  *(v0 + 360) = v14;
  sub_21AEB3AB4();
  if (v14 == sub_21AF0992C())
  {
    v15 = *(v0 + 552);
    v16 = *(v0 + 536);
    v17 = *(v0 + 464);
    v19 = *(v0 + 440);
    v18 = *(v0 + 448);
    v20 = *(v0 + 432);
    v21 = *(v0 + 408);

    *(v0 + 392) = v7;
    v22 = *(v19 + 72);
    v23 = sub_21AED1D94();
    *(v0 + 600) = v24(v23);
    *(v0 + 336) = v17;
    *(v0 + 344) = v16;
    sub_21AEE17F4();
    *(v0 + 608) = swift_getExtendedExistentialTypeMetadata();
    sub_21AEB3AB4();
    v25 = sub_21AF0989C();
    *(v0 + 400) = v25;
    sub_21AEB3AB4();
    if (v25 == sub_21AF0992C())
    {
      v26 = *(v0 + 600);
      v27 = *(v0 + 528);
      sub_21AEE2FD8();

      sub_21AEE24D4();
      sub_21AEE2A24();

      __asm { BRAA            X2, X16 }
    }

    sub_21AEE2C80();
    *(v0 + 616) = v7;
    v68 = *(v0 + 608);
    v69 = *(v0 + 600);
    sub_21AEE221C();
    v70 = sub_21AF0990C();
    sub_21AF098BC();
    v71 = *(v0 + 608);
    v72 = *(v0 + 600);
    if (v70)
    {
      sub_21AEE3038();
      sub_21AF0996C();
      sub_21AE9641C((v0 + 136), v0 + 176);
      if (qword_27CD3D2C0 == -1)
      {
        goto LABEL_12;
      }
    }

    else
    {
      sub_21AEE24E0();
      sub_21AF09C7C();
      __break(1u);
    }

    sub_21AEE1934();
LABEL_12:
    v73 = *(v0 + 520);
    v74 = *(v0 + 504);
    v75 = *(v0 + 488);
    v77 = *(v0 + 464);
    v76 = *(v0 + 472);
    sub_21AEE2BF8();
    v78 = sub_21AF096CC();
    *(v0 + 624) = sub_21AEA7958(v78, qword_27CD3EC20);
    *(v0 + 632) = *(v74 + 16);
    *(v0 + 640) = (v74 + 16) & 0xFFFFFFFFFFFFLL | 0xE3BA000000000000;
    v79 = sub_21AEE2034();
    v80(v79);
    *(v0 + 648) = *(v76 + 16);
    *(v0 + 656) = (v76 + 16) & 0xFFFFFFFFFFFFLL | 0xE3BA000000000000;
    v81 = sub_21AEE2128();
    v82(v81);
    sub_21AEE15E0(v0 + 176, v0 + 216);
    v83 = sub_21AF096AC();
    v84 = sub_21AF09AAC();
    if (os_log_type_enabled(v83, v84))
    {
      v135 = v84;
      v85 = *(v0 + 520);
      v86 = *(v0 + 504);
      v87 = *(v0 + 488);
      v88 = *(v0 + 472);
      v131 = *(v0 + 464);
      v132 = *(v0 + 544);
      v134 = v83;
      v89 = *(v0 + 456);
      v90 = *(v0 + 432);
      sub_21AEB39C8();
      v133 = sub_21AEE2234();
      v138 = v133;
      *v70 = 136315650;
      v91 = *(v89 + 56);
      sub_21AEE24B0();
      v93 = v92();
      v95 = v94;
      v96 = *(v88 + 8);
      v96(v87, v131);
      v97 = *(v86 + 8);
      v98 = sub_21AEE2D64();
      v97(v98);
      sub_21AECFFFC(v93, v95, &v138);
      sub_21AEE2B00();

      sub_21AEE1D2C();
      v100 = *(v0 + 240);
      v99 = *(v0 + 248);
      sub_21AEAF9B0((v0 + 216), v100);
      sub_21AEE1A54();
      v101(v100);
      v102 = sub_21AEE2EC4();
      sub_21AEE28B8();
      sub_21AECFFFC(v102, v90, &v138);
      sub_21AEE2884();
      sub_21AEE1DAC();

      sub_21AF0992C();
      sub_21AEE2064();

      *(v70 + 24) = v99;
      sub_21AEE2444(&dword_21AE94000, v103, v135, "<requestID: %s> Using post candidates selector %s with %ld candidates");
      swift_arrayDestroy();
      MEMORY[0x21CEE5A20](v133, -1, -1);
      sub_21AEE2250();
    }

    else
    {
      v118 = *(v0 + 520);
      v119 = *(v0 + 504);
      v120 = *(v0 + 488);
      v122 = *(v0 + 464);
      v121 = *(v0 + 472);
      v123 = *(v0 + 432);
      sub_21AEA79F0((v0 + 216));

      v96 = *(v121 + 8);
      v96(v120, v122);
      v97 = *(v119 + 8);
      v124 = sub_21AEE2D64();
      v97(v124);
    }

    *(v0 + 672) = v96;
    *(v0 + 664) = v97;
    v125 = *(v0 + 208);
    sub_21AEAF9B0((v0 + 176), *(v0 + 200));
    v126 = *(sub_21AEE2B00() + 32);

    v136 = v126 + *v126;
    v127 = v126[1];
    v128 = swift_task_alloc();
    *(v0 + 680) = v128;
    *v128 = v0;
    sub_21AEE1C94(v128);
    sub_21AEE252C();
    sub_21AEE2A24();

    __asm { BRAA            X4, X16 }
  }

  *(v0 + 568) = v7;
  sub_21AEE2E20();
  sub_21AEE2098();
  sub_21AF0990C();
  sub_21AEE20C0();
  sub_21AEE21D0();
  sub_21AF098BC();
  sub_21AEE2E20();
  if (v13)
  {
    v30 = sub_21AEE27B0();
    sub_21AEE15E0(v30, v0 + 16);
    sub_21AEE201C();
    sub_21AF0996C();
    sub_21AE9641C((v0 + 16), v0 + 56);
    if (qword_27CD3D2C0 == -1)
    {
      goto LABEL_8;
    }
  }

  else
  {
    sub_21AEE201C();
    sub_21AF09C7C();
    __break(1u);
  }

  sub_21AEE1934();
LABEL_8:
  v31 = *(v0 + 528);
  v32 = *(v0 + 496);
  v33 = *(v0 + 504);
  v34 = sub_21AEE26A8();
  sub_21AEA7958(v34, qword_27CD3EC20);
  v35 = sub_21AEE230C();
  v36(v35);
  v37 = *(v1 + 16);
  v38 = sub_21AEE24C8();
  v39(v38);
  sub_21AEE15E0(v0 + 56, v0 + 96);
  v40 = sub_21AF096AC();
  sub_21AF09AAC();
  sub_21AEE2228();
  v42 = os_log_type_enabled(v40, v41);
  v43 = *(v0 + 528);
  v45 = *(v0 + 496);
  v44 = *(v0 + 504);
  v46 = *(v0 + 464);
  v47 = *(v0 + 472);
  if (v42)
  {
    v48 = *(v0 + 456);
    v137 = v11;
    v49 = *(v0 + 432);
    sub_21AEE2058();
    swift_slowAlloc();
    v138 = sub_21AEE1FE4();
    sub_21AEE1AB4(4.8151e-34);
    sub_21AEE2E2C();
    v50();
    v51 = *(v47 + 8);
    v52 = sub_21AEE1FD8();
    v53(v52);
    v54 = sub_21AEE2108();
    v55(v54);
    v56 = sub_21AEE21DC();
    sub_21AECFFFC(v56, v57, v58);
    sub_21AEE2028();

    sub_21AEE1BDC();
    sub_21AEE2D1C();
    v60 = *(v59 + 88);
    v61 = sub_21AEE1E0C();
    v63 = v62(v61);
    sub_21AEA79F0((v0 + 96));
    sub_21AEEC484();
    sub_21AEE207C();
    v64 = sub_21AEE2070();
    sub_21AECFFFC(v64, v65, v66);
    sub_21AEE2884();
    *(v40 + 14) = v63;
    sub_21AEE218C(&dword_21AE94000, v67, v137, "<requestID: %s> Processing candidate pipeline %s");
    sub_21AEE2930();
    sub_21AEE20A4();
    sub_21AEE2000();
  }

  else
  {
    v104 = *(v0 + 432);
    sub_21AEA79F0((v0 + 96));

    v105 = *(v47 + 8);
    v106 = sub_21AEE1FD8();
    v107(v106);
    v108 = sub_21AEE2108();
    v109(v108);
  }

  v111 = *(v0 + 80);
  v110 = *(v0 + 88);
  sub_21AEE1F00((v0 + 56));
  v112 = swift_task_alloc();
  *(v0 + 576) = v112;
  *v112 = v0;
  v112[1] = sub_21AEDEAC4;
  sub_21AEE1994(*(v0 + 408));
  sub_21AEE2A24();

  return AMLCandidatePipeline.process(context:)(v113, v114, v115);
}

uint64_t sub_21AEDEAC4()
{
  sub_21AEE2818();
  sub_21AEE22E4();
  v4 = v3;
  sub_21AEE1D9C();
  *v5 = v4;
  v7 = *(v6 + 576);
  v8 = *v2;
  sub_21AEE1F6C();
  *v9 = v8;
  v4[73] = v0;

  if (v0)
  {
    v10 = v4[71];
    v11 = v4[69];
  }

  else
  {
    v4[74] = v1;
  }

  sub_21AEE23FC();

  return MEMORY[0x2822009F8](v12, v13, v14);
}

uint64_t sub_21AEDEBDC()
{
  v138 = *(v0 + 584);
  v147 = *(v0 + 552);
  v149 = *(v0 + 560);
  v1 = *(v0 + 544);
  v2 = *(v0 + 536);
  v3 = *(v0 + 440);
  v4 = *(v0 + 432);
  v144 = *(v0 + 424);
  v145 = *(v0 + 448);
  v142 = *(v0 + 416);
  *(v0 + 368) = *(v0 + 592);
  v5 = sub_21AF0997C();
  sub_21AEE2538();
  swift_getWitnessTable();
  sub_21AF0993C();
  v6 = *(v0 + 88);
  sub_21AEAF9B0((v0 + 56), *(v0 + 80));
  v7 = *(v6 + 88);
  v8 = sub_21AEE2064();
  v9(v8, v6);
  v10 = sub_21AEEC484();
  v139 = v11;
  v140 = v10;

  v12 = *(v0 + 352);
  *(v0 + 376) = v12;
  v13 = swift_task_alloc();
  *(v13 + 16) = v4;
  *(v13 + 24) = v3;

  sub_21AEE1A6C();
  WitnessTable = swift_getWitnessTable();
  v16 = sub_21AED3450(sub_21AEE1644, v13, v5, v2, MEMORY[0x277D84A98], WitnessTable, MEMORY[0x277D84AC0], v15);

  *(v0 + 384) = v12;
  v17 = swift_task_alloc();
  *(v17 + 16) = v4;
  *(v17 + 24) = v3;
  v18 = sub_21AEA7574(&unk_27CD3DE90, &unk_21AF0C440);
  v20 = sub_21AED3450(sub_21AEE1664, v17, v5, v18, MEMORY[0x277D84A98], WitnessTable, MEMORY[0x277D84AC0], v19);

  AMLRecommendationPipeline.logPipelineAsync(pipelineStage:pipelineName:candidates:features:pipelineLogger:metadata:)(0xD000000000000011, 0x800000021AF0FD60, v140, v139, v16, v20, v142, v144, v4, v3);

  sub_21AEA79F0((v0 + 56));
  if (*(v0 + 360) == sub_21AF0992C())
  {
    v21 = *(v0 + 552);
    v22 = *(v0 + 536);
    v23 = *(v0 + 464);
    v24 = *(v0 + 440);
    v25 = *(v0 + 448);
    v26 = *(v0 + 432);
    v27 = *(v0 + 408);

    *(v0 + 392) = v12;
    v28 = *(v24 + 72);
    sub_21AEE201C();
    *(v0 + 600) = v29();
    *(v0 + 336) = v23;
    *(v0 + 344) = v22;
    sub_21AEE17F4();
    *(v0 + 608) = swift_getExtendedExistentialTypeMetadata();
    sub_21AEE204C();
    v30 = sub_21AF0989C();
    *(v0 + 400) = v30;
    sub_21AEE204C();
    if (v30 == sub_21AF0992C())
    {
      v31 = *(v0 + 600);
      v32 = *(v0 + 528);
      sub_21AEE2728();

      sub_21AEE24D4();
      sub_21AEE2FA0();

      __asm { BRAA            X2, X16 }
    }

    sub_21AEE2C80();
    *(v0 + 616) = v12;
    v73 = *(v0 + 608);
    v74 = *(v0 + 600);
    sub_21AEE2098();
    sub_21AF0990C();
    sub_21AEE20C0();
    sub_21AEE21D0();
    sub_21AF098BC();
    v75 = *(v0 + 608);
    v76 = *(v0 + 600);
    if (v27)
    {
      v77 = sub_21AEE27B0();
      sub_21AEE15E0(v77, v0 + 136);
      sub_21AEE201C();
      sub_21AF0996C();
      sub_21AE9641C((v0 + 136), v0 + 176);
      if (qword_27CD3D2C0 == -1)
      {
        goto LABEL_12;
      }
    }

    else
    {
      sub_21AEE201C();
      sub_21AF09C7C();
      __break(1u);
    }

    sub_21AEE1934();
LABEL_12:
    v78 = *(v0 + 520);
    v79 = *(v0 + 504);
    v80 = *(v0 + 488);
    v81 = sub_21AEE26A8();
    *(v0 + 624) = sub_21AEA7958(v81, qword_27CD3EC20);
    *(v0 + 632) = *(v79 + 16);
    *(v0 + 640) = (v79 + 16) & 0xFFFFFFFFFFFFLL | 0xE3BA000000000000;
    v82 = sub_21AEE24E0();
    v83(v82);
    sub_21AEE2D40();
    v84 = sub_21AEE24C8();
    v85(v84);
    sub_21AEE15E0(v0 + 176, v0 + 216);
    v86 = sub_21AF096AC();
    sub_21AF09AAC();
    sub_21AEE2824();
    v150 = v86;
    if (os_log_type_enabled(v86, v87))
    {
      v88 = *(v0 + 520);
      v89 = *(v0 + 504);
      v146 = v80;
      v90 = *(v0 + 488);
      v91 = *(v0 + 472);
      v141 = *(v0 + 464);
      v143 = *(v0 + 544);
      v92 = *(v0 + 456);
      v93 = *(v0 + 432);
      sub_21AEB39C8();
      sub_21AEE2234();
      v94 = sub_21AEE1AC8(4.8152e-34);
      v95(v94);
      v96 = *(v91 + 8);
      v96(v90, v141);
      v97 = *(v89 + 8);
      v98 = sub_21AEE2854();
      v97(v98);
      v99 = sub_21AEE2B0C();
      sub_21AECFFFC(v99, v100, v101);
      sub_21AEE2884();
      sub_21AEE1D2C();
      v102 = *(v0 + 240);
      v103 = *(v0 + 248);
      sub_21AEAF9B0((v0 + 216), v102);
      sub_21AEE1A54();
      v104(v102);
      sub_21AEE2EC4();
      sub_21AEE2478();
      v105 = sub_21AEE24C8();
      sub_21AECFFFC(v105, v106, v107);
      sub_21AEE2884();
      sub_21AEE1DAC();

      sub_21AF0992C();
      sub_21AEE2884();
      *(v22 + 24) = v103;
      sub_21AEE2444(&dword_21AE94000, v108, v146, "<requestID: %s> Using post candidates selector %s with %ld candidates");
      sub_21AEE2930();
      sub_21AEE20A4();
      sub_21AEE2250();
    }

    else
    {
      v123 = *(v0 + 520);
      v124 = *(v0 + 504);
      v125 = *(v0 + 488);
      v126 = *(v0 + 464);
      v127 = *(v0 + 472);
      v128 = *(v0 + 432);
      sub_21AEA79F0((v0 + 216));

      v96 = *(v127 + 8);
      v129 = sub_21AEE24BC();
      (v96)(v129);
      v97 = *(v124 + 8);
      v130 = sub_21AEE2034();
      v97(v130);
    }

    *(v0 + 672) = v96;
    *(v0 + 664) = v97;
    v131 = *(v0 + 200);
    v132 = *(v0 + 208);
    v133 = *(sub_21AEE1B50((v0 + 176)) + 32);

    v148 = v133 + *v133;
    v134 = v133[1];
    v135 = swift_task_alloc();
    *(v0 + 680) = v135;
    *v135 = v0;
    sub_21AEE1C94(v135);
    sub_21AEE21E8();
    sub_21AEE2FA0();

    __asm { BRAA            X4, X16 }
  }

  *(v0 + 568) = v12;
  sub_21AEE2E20();
  sub_21AEE2098();
  sub_21AF0990C();
  sub_21AEE20C0();
  sub_21AEE21D0();
  sub_21AF098BC();
  sub_21AEE2E20();
  if (v16)
  {
    v35 = sub_21AEE27B0();
    sub_21AEE15E0(v35, v0 + 16);
    sub_21AEE201C();
    sub_21AF0996C();
    sub_21AE9641C((v0 + 16), v0 + 56);
    if (qword_27CD3D2C0 == -1)
    {
      goto LABEL_8;
    }
  }

  else
  {
    sub_21AEE201C();
    sub_21AF09C7C();
    __break(1u);
  }

  sub_21AEE1934();
LABEL_8:
  v36 = *(v0 + 528);
  v37 = *(v0 + 496);
  v38 = *(v0 + 504);
  v39 = sub_21AEE26A8();
  sub_21AEA7958(v39, qword_27CD3EC20);
  v40 = sub_21AEE230C();
  v41(v40);
  v42 = *(v5 + 16);
  v43 = sub_21AEE24C8();
  v44(v43);
  sub_21AEE15E0(v0 + 56, v0 + 96);
  v45 = sub_21AF096AC();
  sub_21AF09AAC();
  sub_21AEE2228();
  v47 = os_log_type_enabled(v45, v46);
  v48 = *(v0 + 528);
  v50 = *(v0 + 496);
  v49 = *(v0 + 504);
  v51 = *(v0 + 464);
  v52 = *(v0 + 472);
  if (v47)
  {
    v53 = *(v0 + 456);
    v54 = *(v0 + 432);
    sub_21AEE2058();
    swift_slowAlloc();
    sub_21AEE1FE4();
    sub_21AEE1AB4(4.8151e-34);
    sub_21AEE2E2C();
    v55();
    v56 = *(v52 + 8);
    v57 = sub_21AEE1FD8();
    v58(v57);
    v59 = sub_21AEE2108();
    v60(v59);
    v61 = sub_21AEE21DC();
    sub_21AECFFFC(v61, v62, v63);
    sub_21AEE2028();

    sub_21AEE1BDC();
    sub_21AEE2D1C();
    v65 = *(v64 + 88);
    v66 = sub_21AEE1E0C();
    v68 = v67(v66);
    sub_21AEA79F0((v0 + 96));
    sub_21AEEC484();
    sub_21AEE207C();
    v69 = sub_21AEE2070();
    sub_21AECFFFC(v69, v70, v71);
    sub_21AEE2884();
    *(v45 + 14) = v68;
    sub_21AEE218C(&dword_21AE94000, v72, v139, "<requestID: %s> Processing candidate pipeline %s");
    sub_21AEE2930();
    sub_21AEE20A4();
    sub_21AEE2000();
  }

  else
  {
    v109 = *(v0 + 432);
    sub_21AEA79F0((v0 + 96));

    v110 = *(v52 + 8);
    v111 = sub_21AEE1FD8();
    v112(v111);
    v113 = sub_21AEE2108();
    v114(v113);
  }

  v116 = *(v0 + 80);
  v115 = *(v0 + 88);
  sub_21AEE1F00((v0 + 56));
  v117 = swift_task_alloc();
  *(v0 + 576) = v117;
  *v117 = v0;
  v117[1] = sub_21AEDEAC4;
  sub_21AEE1994(*(v0 + 408));
  sub_21AEE2FA0();

  return AMLCandidatePipeline.process(context:)(v118, v119, v120);
}

uint64_t sub_21AEDF550()
{
  sub_21AEE2818();
  v2 = *v1;
  v3 = *v1;
  sub_21AEE1F6C();
  *v4 = v3;
  v5 = v2[85];
  v6 = *v1;
  sub_21AEE1D9C();
  *v7 = v6;
  v3[86] = v8;
  v3[87] = v0;

  v9 = v2[77];
  if (v0)
  {
    v10 = v3[75];
  }

  sub_21AEE246C();

  return MEMORY[0x2822009F8](v11, v12, v13);
}

void sub_21AEDF688()
{
  v1 = *(v0 + 688);
  v2 = *(v0 + 648);
  v3 = *(v0 + 640);
  v4 = *(v0 + 632);
  v114 = *(v0 + 656);
  v117 = *(v0 + 624);
  v5 = *(v0 + 616);
  v6 = *(v0 + 512);
  v7 = *(v0 + 480);
  v8 = *(v0 + 464);
  sub_21AEE2BF8();
  *(v0 + 392) = v9;

  sub_21AEE2334();
  v4();
  v10 = sub_21AEE2128();
  v2(v10);
  sub_21AEE15E0(v0 + 176, v0 + 256);
  v11 = sub_21AF096AC();
  LOBYTE(v4) = sub_21AF09AAC();
  if (sub_21AEE2C98(v4))
  {
    v109 = *(v0 + 664);
    v111 = *(v0 + 688);
    v113 = *(v0 + 544);
    v12 = *(v0 + 512);
    v13 = *(v0 + 480);
    v14 = *(v0 + 456);
    v15 = *(v0 + 464);
    v106 = *(v0 + 504) + 8;
    v107 = *(v0 + 672);
    v16 = *(v0 + 472) + 8;
    v17 = *(v0 + 432);
    sub_21AEB39C8();
    v118 = sub_21AEE1FE4();
    *v8 = 136315650;
    v18 = *(v14 + 56);
    v19 = sub_21AEE21DC();
    v20(v19);
    v21 = sub_21AEE2AF4();
    v107(v21);
    v22 = sub_21AEE2034();
    v109(v22);
    v23 = sub_21AEE2F2C();
    sub_21AECFFFC(v23, v24, v25);
    sub_21AEE2884();
    sub_21AEE1BDC();
    v26 = *(v0 + 280);
    sub_21AEAF9B0((v0 + 256), v26);
    sub_21AEE1A54();
    v28 = v27(v26);
    sub_21AEA79F0((v0 + 256));
    sub_21AEEC484();
    sub_21AEE207C();
    v29 = sub_21AEE2070();
    sub_21AECFFFC(v29, v30, v31);
    sub_21AEE2884();
    *(v8 + 14) = v28;
    *(v8 + 22) = 2048;

    sub_21AF0992C();
    sub_21AEE2180();

    *(v8 + 24) = v28;
    sub_21AEE2324();
    _os_log_impl(v32, v33, v34, v35, v36, 0x20u);
    sub_21AEE2B18();
    sub_21AEE2200();
    sub_21AEE2000();
  }

  else
  {
    v37 = *(v0 + 672);
    v38 = *(v0 + 664);
    v39 = *(v0 + 512);
    v40 = *(v0 + 480);
    v41 = *(v0 + 464);
    v42 = *(v0 + 432);
    v43 = *(v0 + 504) + 8;
    v44 = *(v0 + 472) + 8;
    sub_21AEA79F0((v0 + 256));

    v45 = sub_21AEB3AB4();
    v37(v45);
    v46 = sub_21AEE2034();
    v38(v46);
  }

  v47 = *(v0 + 608);
  v48 = *(v0 + 600);
  sub_21AEA79F0((v0 + 176));
  sub_21AEC76A0();
  if (*(v0 + 400) == sub_21AF0992C())
  {
    v49 = *(v0 + 688);
    v50 = *(v0 + 600);
    v51 = *(v0 + 528);
    sub_21AEE2FD8();

    sub_21AEE24D4();
    sub_21AEE2F84();

    __asm { BRAA            X2, X16 }
  }

  *(v0 + 616) = *(v0 + 688);
  v54 = *(v0 + 608);
  v55 = *(v0 + 600);
  sub_21AEE2098();
  v56 = sub_21AF0990C();
  sub_21AEE21D0();
  sub_21AF098BC();
  v57 = *(v0 + 608);
  v58 = *(v0 + 600);
  if (v56)
  {
    sub_21AEE3038();
    sub_21AF0996C();
    sub_21AE9641C((v0 + 136), v0 + 176);
    if (qword_27CD3D2C0 == -1)
    {
      goto LABEL_10;
    }
  }

  else
  {
    sub_21AEE24E0();
    sub_21AF09C7C();
    __break(1u);
  }

  sub_21AEE1934();
LABEL_10:
  v59 = *(v0 + 520);
  v60 = *(v0 + 504);
  v61 = *(v0 + 488);
  v62 = *(v0 + 464);
  v63 = *(v0 + 472);
  sub_21AEE2BF8();
  v64 = sub_21AF096CC();
  *(v0 + 624) = sub_21AEA7958(v64, qword_27CD3EC20);
  *(v0 + 632) = *(v60 + 16);
  *(v0 + 640) = (v60 + 16) & 0xFFFFFFFFFFFFLL | 0xE3BA000000000000;
  v65 = sub_21AEE2034();
  v66(v65);
  sub_21AEE2D40();
  v67 = sub_21AEE2128();
  v68(v67);
  sub_21AEE15E0(v0 + 176, v0 + 216);
  v69 = sub_21AF096AC();
  v70 = sub_21AF09AAC();
  if (os_log_type_enabled(v69, v70))
  {
    v112 = *(v0 + 544);
    v115 = v70;
    v71 = *(v0 + 520);
    v72 = *(v0 + 504);
    v73 = *(v0 + 488);
    v74 = *(v0 + 472);
    v108 = *(v0 + 464);
    v75 = *(v0 + 456);
    v76 = *(v0 + 432);
    sub_21AEB39C8();
    v118 = sub_21AEE2234();
    *v56 = 136315650;
    v77 = *(v75 + 56);
    sub_21AEE24B0();
    v79 = v78();
    v81 = v80;
    v110 = v69;
    v82 = *(v74 + 8);
    v82(v73, v108);
    v83 = *(v72 + 8);
    v84 = sub_21AEE2D64();
    v83(v84);
    sub_21AECFFFC(v79, v81, &v118);
    sub_21AEE2064();

    sub_21AEE1D2C();
    v85 = *(v0 + 240);
    v86 = *(v0 + 248);
    sub_21AEAF9B0((v0 + 216), v85);
    sub_21AEE1A54();
    v87(v85);
    sub_21AEE2EC4();
    sub_21AEE2478();
    v88 = sub_21AEE24C8();
    sub_21AECFFFC(v88, v89, v90);
    sub_21AEE2884();
    sub_21AEE1DAC();

    sub_21AF0992C();
    sub_21AEE2884();
    *(v56 + 24) = v86;
    sub_21AEE2B30(&dword_21AE94000, v110, v115, "<requestID: %s> Using post candidates selector %s with %ld candidates");
    sub_21AEE2B18();
    sub_21AEE2200();
    sub_21AEE2250();
  }

  else
  {
    v91 = *(v0 + 520);
    v92 = *(v0 + 504);
    v93 = *(v0 + 488);
    v94 = *(v0 + 464);
    v95 = *(v0 + 472);
    v96 = *(v0 + 432);
    sub_21AEA79F0((v0 + 216));

    v82 = *(v95 + 8);
    v97 = sub_21AEE24BC();
    (v82)(v97);
    v83 = *(v92 + 8);
    v98 = sub_21AEE2034();
    v83(v98);
  }

  *(v0 + 672) = v82;
  *(v0 + 664) = v83;
  v99 = *(v0 + 200);
  v100 = *(v0 + 208);
  v101 = *(sub_21AEE1B50((v0 + 176)) + 32);

  v116 = v101 + *v101;
  v102 = v101[1];
  v103 = swift_task_alloc();
  *(v0 + 680) = v103;
  *v103 = v0;
  sub_21AEE1C94();
  sub_21AEE21E8();
  sub_21AEE2F84();

  __asm { BRAA            X4, X16 }
}

uint64_t sub_21AEDFD40()
{
  sub_21AEA79F0(v0 + 7);
  v1 = v0[73];
  v2 = v0[66];
  sub_21AEE2728();

  sub_21AEE280C();

  return v3();
}

uint64_t sub_21AEDFDE4()
{
  v1 = v0[77];
  sub_21AEA79F0(v0 + 22);

  v2 = v0[87];
  v3 = v0[66];
  sub_21AEE2728();

  sub_21AEE280C();

  return v4();
}

void AMLRecommendationPipeline.logPipelineAsync(pipelineStage:pipelineName:candidates:features:pipelineLogger:metadata:)(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, NSObject *a6, void *a7, void *a8, uint64_t a9, uint64_t a10)
{
  v47 = a6;
  v15 = *(a10 + 88);
  v16 = sub_21AEE2F2C();
  if (v17(v16))
  {
    if (a7)
    {
      if (a8)
      {
        v49 = a2;
        v46 = a7;
        v45 = a8;

        MEMORY[0x21CEE4A70](95, 0xE100000000000000);

        v43 = a3;
        v18 = sub_21AEE21DC();
        MEMORY[0x21CEE4A70](v18);

        v44 = sub_21AF097BC();

        v48 = a5;
        sub_21AEE2CBC();
        sub_21AEE24B0();
        swift_getAssociatedTypeWitness();
        sub_21AEE2790();
        v19 = sub_21AF0997C();
        v20 = sub_21AEA7574(&qword_27CD3DA28, &unk_21AF0D130);
        WitnessTable = swift_getWitnessTable();
        sub_21AEE2E2C();
        v25 = sub_21AEE1684(v22, v23, v24);
        v26 = sub_21AF09E5C();
        v47 = &v43;
        v52[0] = v52[2];
        v52[1] = v52[3];
        MEMORY[0x28223BE20](v26);
        v48 = v19;
        v49 = v20;
        v50 = WitnessTable;
        v51 = v25;
        sub_21AF09C6C();
        sub_21AEA7574(&qword_27CD3DA38, &unk_21AF0CD80);
        swift_getWitnessTable();
        sub_21AEE21E8();
        v35 = sub_21AEE0524(v27, v28, v29, v30, v31, v32, v33, v34);

        sub_21AEE0B00(v35);
        sub_21AEA7574(&unk_27CD3DE90, &unk_21AF0C440);
        sub_21AF0971C();
        sub_21AEE2064();

        v37 = v45;
        v36 = v46;
        v38 = v44;
        v39 = [v46 logPipelineAsync:v44 features:v52 metadata:v45 async:1];
      }
    }
  }

  else
  {
    if (qword_27CD3D2C0 != -1)
    {
      sub_21AEE1934();
    }

    v40 = sub_21AF096CC();
    sub_21AEA7958(v40, qword_27CD3EC20);
    v47 = sub_21AF096AC();
    sub_21AF09AAC();
    sub_21AEE2824();
    if (os_log_type_enabled(v47, v41))
    {
      v42 = swift_slowAlloc();
      *v42 = 0;
      _os_log_impl(&dword_21AE94000, v47, a7, "AMLRecommenderPipeline logging disabled", v42, 2u);
      sub_21AEE2200();
    }
  }
}

uint64_t sub_21AEE0260()
{
  sub_21AEE2DE8();
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  return (*(*(AssociatedTypeWitness - 8) + 16))(v1, v0, AssociatedTypeWitness);
}

uint64_t sub_21AEE02E0()
{
  sub_21AEE2DE8();
  swift_getAssociatedTypeWitness();
  sub_21AEE2790();
  *v1 = *(v0 + *(type metadata accessor for AMLCandidateWithFeatures() + 28));
  return swift_unknownObjectRetain();
}

uint64_t sub_21AEE0344@<X0>(uint64_t a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X2>, void *a4@<X8>)
{
  v21 = a2;
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  sub_21AEAF7F0(&unk_27CD3DE90, &unk_21AF0C440);
  TupleTypeMetadata2 = swift_getTupleTypeMetadata2();
  v9 = *(TupleTypeMetadata2 - 8);
  v10 = *(v9 + 64);
  MEMORY[0x28223BE20](TupleTypeMetadata2);
  v12 = &v20 - v11;
  v13 = *(v9 + 16);
  v13(&v20 - v11, a1, TupleTypeMetadata2);
  v14 = *&v12[*(TupleTypeMetadata2 + 48)];
  swift_unknownObjectRelease();
  v15 = sub_21AF097DC();
  v17 = v16;
  v22 = v21;
  v23 = a3;

  MEMORY[0x21CEE4A70](v15, v17);

  v18 = v23;
  *a4 = v22;
  a4[1] = v18;
  v13(v12, a1, TupleTypeMetadata2);
  a4[2] = *&v12[*(TupleTypeMetadata2 + 48)];
  return (*(*(AssociatedTypeWitness - 8) + 8))(v12, AssociatedTypeWitness);
}

uint64_t sub_21AEE0524(void (*a1)(char *, char *), uint64_t a2, uint64_t a3, char *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v83 = a8;
  v9 = v8;
  v97 = a2;
  v98 = a4;
  v96 = a1;
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  sub_21AEA7C90(AssociatedTypeWitness);
  v91 = v15;
  v17 = *(v16 + 64);
  sub_21AEC7728();
  MEMORY[0x28223BE20](v18);
  v84 = a5;
  v85 = &v79 - v19;
  sub_21AEE268C();
  v82 = v20;
  v22 = *(v21 + 64);
  MEMORY[0x28223BE20](v23);
  sub_21AEAD074();
  v94 = (v24 - v25);
  MEMORY[0x28223BE20](v26);
  v92 = &v79 - v27;
  v28 = sub_21AF09B7C();
  v29 = sub_21AEA7C90(v28);
  v80 = v30;
  v81 = v29;
  v32 = *(v31 + 64);
  MEMORY[0x28223BE20](v29);
  sub_21AEAD074();
  v35 = v33 - v34;
  v37 = MEMORY[0x28223BE20](v36);
  v39 = &v79 - v38;
  v40 = *(*(a4 - 1) + 64);
  MEMORY[0x28223BE20](v37);
  sub_21AEAD074();
  v93 = v41 - v42;
  MEMORY[0x28223BE20](v43);
  sub_21AEE1E2C();
  v90 = v44;
  v46 = *(v45 + 64);
  MEMORY[0x28223BE20](v47);
  sub_21AEA7CA4();
  v89 = v48;
  v88 = a6;
  v99 = swift_getAssociatedTypeWitness();
  sub_21AEA7C90(v99);
  v86 = v49;
  v51 = *(v50 + 64);
  sub_21AEC7728();
  MEMORY[0x28223BE20](v52);
  v54 = &v79 - v53;
  sub_21AEE2B0C();
  v55 = sub_21AF0984C();
  v100 = sub_21AF09CDC();
  sub_21AEE2D70();
  v95 = sub_21AF09CEC();
  sub_21AF09CBC();
  (*(v90 + 16))(v89, v87, a3);
  v98 = v54;
  v90 = a3;
  result = sub_21AF0983C();
  if (v55 < 0)
  {
    __break(1u);
LABEL_17:
    __break(1u);
    return result;
  }

  if (v55)
  {
    v57 = (v91 + 8);
    swift_getAssociatedConformanceWitness();
    while (1)
    {
      sub_21AF09B8C();
      result = sub_21AEA766C(v39, 1, AssociatedTypeWitness);
      if (result == 1)
      {
        goto LABEL_17;
      }

      v96(v39, v92);
      if (v9)
      {
        v74 = sub_21AEE2BB8();
        v75(v74);

        (*(v82 + 32))(v83, v92, v84);
        v76 = *v57;
        v77 = sub_21AEE2D58();
        return v78(v77);
      }

      v9 = 0;
      v58 = *v57;
      v59 = sub_21AEE2D58();
      v60(v59);
      sub_21AF09CCC();
      if (!--v55)
      {
        goto LABEL_9;
      }
    }
  }

  swift_getAssociatedConformanceWitness();
LABEL_9:
  v61 = (v91 + 32);
  v62 = (v91 + 8);
  v63 = v85;
  while (1)
  {
    sub_21AF09B8C();
    if (sub_21AEA766C(v35, 1, AssociatedTypeWitness) == 1)
    {
      v67 = sub_21AEE2BB8();
      v68(v67);
      (*(v80 + 8))(v35, v81);
      return v100;
    }

    (*v61)(v63, v35, AssociatedTypeWitness);
    v96(v63, v94);
    if (v9)
    {
      break;
    }

    v9 = 0;
    v64 = *v62;
    v65 = sub_21AEE21DC();
    v66(v65);
    sub_21AF09CCC();
  }

  v69 = *v62;
  v70 = sub_21AEE21DC();
  v71(v70);
  v72 = sub_21AEE2BB8();
  v73(v72);

  return (*(v82 + 32))(v83, v94, v84);
}

uint64_t sub_21AEE0B00(uint64_t a1)
{
  if (*(a1 + 16))
  {
    sub_21AEA7574(&qword_27CD3DA40, &qword_21AF0CDB8);
    v1 = sub_21AF09DDC();
  }

  else
  {
    v1 = MEMORY[0x277D84F98];
  }

  v4 = v1;

  sub_21AEE0D34(v2, 1, &v4);

  return v4;
}

id sub_21AEE0BB4(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v4 = sub_21AF097BC();

  if (a3)
  {
    v5 = sub_21AF0971C();
  }

  else
  {
    v5 = 0;
  }

  sub_21AEE2CF8();
  v8 = [v6 v7];

  return v8;
}

id sub_21AEE0C50(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, void *a8)
{
  v9 = v8;
  v13 = sub_21AF097BC();

  if (a4)
  {
    v14 = sub_21AF097BC();
  }

  else
  {
    v14 = 0;
  }

  v15 = sub_21AF097BC();

  v16 = [v9 initWithBundleIdentifier:v13 modelName:v14 versionId:v15 expirationPolicy:a7 featuresDescription:a8];

  return v16;
}

void sub_21AEE0D34(uint64_t a1, char a2, void *a3)
{
  v4 = 0;
  v26 = *(a1 + 16);
  for (i = (a1 + 48); ; i += 3)
  {
    if (v26 == v4)
    {

      return;
    }

    if (v4 >= *(a1 + 16))
    {
      __break(1u);
LABEL_19:
      __break(1u);
LABEL_20:
      __break(1u);
LABEL_21:
      sub_21AF09E7C();
      __break(1u);
      goto LABEL_22;
    }

    v7 = *(i - 2);
    v6 = *(i - 1);
    v8 = *i;
    v9 = *a3;

    swift_unknownObjectRetain();
    v11 = sub_21AED0594();
    v12 = v9[2];
    v13 = (v10 & 1) == 0;
    v14 = v12 + v13;
    if (__OFADD__(v12, v13))
    {
      goto LABEL_19;
    }

    v15 = v10;
    if (v9[3] < v14)
    {
      break;
    }

    if (a2)
    {
      if (v10)
      {
        goto LABEL_14;
      }
    }

    else
    {
      sub_21AEA7574(&qword_27CD3DA48, &qword_21AF0CDC0);
      sub_21AF09D1C();
      if (v15)
      {
        goto LABEL_14;
      }
    }

LABEL_11:
    v19 = *a3;
    *(*a3 + 8 * (v11 >> 6) + 64) |= 1 << v11;
    v20 = (v19[6] + 16 * v11);
    *v20 = v7;
    v20[1] = v6;
    *(v19[7] + 8 * v11) = v8;
    v21 = v19[2];
    v22 = __OFADD__(v21, 1);
    v23 = v21 + 1;
    if (v22)
    {
      goto LABEL_20;
    }

    v19[2] = v23;
    ++v4;
    a2 = 1;
  }

  sub_21AEE12C8(v14, a2 & 1);
  v16 = *a3;
  v17 = sub_21AED0594();
  if ((v15 & 1) != (v18 & 1))
  {
    goto LABEL_21;
  }

  v11 = v17;
  if ((v15 & 1) == 0)
  {
    goto LABEL_11;
  }

LABEL_14:
  v24 = swift_allocError();
  swift_willThrow();
  v25 = v24;
  sub_21AEA7574(&qword_27CD3DA50, &qword_21AF0CDC8);
  if ((swift_dynamicCast() & 1) == 0)
  {

    swift_unknownObjectRelease();

    return;
  }

LABEL_22:
  sub_21AF09C5C();
  MEMORY[0x21CEE4A70](0xD00000000000001BLL, 0x800000021AF0FDD0);
  sub_21AF09CFC();
  MEMORY[0x21CEE4A70](39, 0xE100000000000000);
  sub_21AF09D5C();
  __break(1u);
}

uint64_t sub_21AEE1018(uint64_t a1, char a2)
{
  v3 = v2;
  v5 = *v2;
  if (*(*v2 + 24) > a1)
  {
    v6 = *(*v2 + 24);
  }

  sub_21AEA7574(&qword_27CD3DF40, &unk_21AF0CDD0);
  v36 = a2;
  result = sub_21AF09DCC();
  v8 = result;
  if (!*(v5 + 16))
  {
LABEL_34:

LABEL_35:
    *v3 = v8;
    return result;
  }

  v35 = v3;
  v9 = 0;
  v10 = (v5 + 64);
  v11 = 1 << *(v5 + 32);
  if (v11 < 64)
  {
    v12 = ~(-1 << v11);
  }

  else
  {
    v12 = -1;
  }

  v13 = v12 & *(v5 + 64);
  v14 = (v11 + 63) >> 6;
  v15 = result + 64;
  if (!v13)
  {
LABEL_9:
    v17 = v9;
    while (1)
    {
      v9 = v17 + 1;
      if (__OFADD__(v17, 1))
      {
        __break(1u);
        goto LABEL_37;
      }

      if (v9 >= v14)
      {
        break;
      }

      v18 = v10[v9];
      ++v17;
      if (v18)
      {
        v16 = __clz(__rbit64(v18));
        v13 = (v18 - 1) & v18;
        goto LABEL_14;
      }
    }

    if ((v36 & 1) == 0)
    {

      v3 = v35;
      goto LABEL_35;
    }

    v34 = 1 << *(v5 + 32);
    v3 = v35;
    if (v34 >= 64)
    {
      sub_21AEF647C(0, (v34 + 63) >> 6, v5 + 64);
    }

    else
    {
      *v10 = -1 << v34;
    }

    *(v5 + 16) = 0;
    goto LABEL_34;
  }

  while (1)
  {
    v16 = __clz(__rbit64(v13));
    v13 &= v13 - 1;
LABEL_14:
    v19 = v16 | (v9 << 6);
    v20 = (*(v5 + 48) + 16 * v19);
    v21 = *v20;
    v22 = v20[1];
    v23 = (*(v5 + 56) + 32 * v19);
    if (v36)
    {
      sub_21AEAF9F4(v23, v37);
    }

    else
    {
      sub_21AEA784C(v23, v37);
    }

    v24 = *(v8 + 40);
    sub_21AF09EFC();
    sub_21AEE24B0();
    sub_21AF097EC();
    result = sub_21AF09F1C();
    v25 = -1 << *(v8 + 32);
    v26 = result & ~v25;
    v27 = v26 >> 6;
    if (((-1 << v26) & ~*(v15 + 8 * (v26 >> 6))) == 0)
    {
      break;
    }

    v28 = __clz(__rbit64((-1 << v26) & ~*(v15 + 8 * (v26 >> 6)))) | v26 & 0x7FFFFFFFFFFFFFC0;
LABEL_26:
    *(v15 + ((v28 >> 3) & 0x1FFFFFFFFFFFFFF8)) |= 1 << v28;
    v33 = (*(v8 + 48) + 16 * v28);
    *v33 = v21;
    v33[1] = v22;
    result = sub_21AEAF9F4(v37, (*(v8 + 56) + 32 * v28));
    ++*(v8 + 16);
    if (!v13)
    {
      goto LABEL_9;
    }
  }

  v29 = 0;
  v30 = (63 - v25) >> 6;
  while (++v27 != v30 || (v29 & 1) == 0)
  {
    v31 = v27 == v30;
    if (v27 == v30)
    {
      v27 = 0;
    }

    v29 |= v31;
    v32 = *(v15 + 8 * v27);
    if (v32 != -1)
    {
      v28 = __clz(__rbit64(~v32)) + (v27 << 6);
      goto LABEL_26;
    }
  }

LABEL_37:
  __break(1u);
  return result;
}

uint64_t sub_21AEE12C8(uint64_t a1, char a2)
{
  v3 = v2;
  v5 = *v2;
  if (*(*v2 + 24) > a1)
  {
    v6 = *(*v2 + 24);
  }

  sub_21AEA7574(&qword_27CD3DA40, &qword_21AF0CDB8);
  v38 = a2;
  result = sub_21AF09DCC();
  v8 = result;
  if (!*(v5 + 16))
  {
LABEL_33:

LABEL_34:
    *v3 = v8;
    return result;
  }

  v36 = v3;
  v37 = v5;
  v9 = 0;
  v10 = (v5 + 64);
  v11 = 1 << *(v5 + 32);
  if (v11 < 64)
  {
    v12 = ~(-1 << v11);
  }

  else
  {
    v12 = -1;
  }

  v13 = v12 & *(v5 + 64);
  v14 = (v11 + 63) >> 6;
  v15 = result + 64;
  if (!v13)
  {
LABEL_9:
    v17 = v9;
    while (1)
    {
      v9 = v17 + 1;
      if (__OFADD__(v17, 1))
      {
        __break(1u);
        goto LABEL_36;
      }

      if (v9 >= v14)
      {
        break;
      }

      v18 = v10[v9];
      ++v17;
      if (v18)
      {
        v16 = __clz(__rbit64(v18));
        v13 = (v18 - 1) & v18;
        goto LABEL_14;
      }
    }

    if ((v38 & 1) == 0)
    {

      v3 = v36;
      goto LABEL_34;
    }

    v35 = 1 << *(v5 + 32);
    v3 = v36;
    if (v35 >= 64)
    {
      sub_21AEF647C(0, (v35 + 63) >> 6, v10);
    }

    else
    {
      *v10 = -1 << v35;
    }

    *(v5 + 16) = 0;
    goto LABEL_33;
  }

  while (1)
  {
    v16 = __clz(__rbit64(v13));
    v13 &= v13 - 1;
LABEL_14:
    v19 = v16 | (v9 << 6);
    v20 = (*(v5 + 48) + 16 * v19);
    v21 = *v20;
    v22 = v20[1];
    v23 = *(*(v5 + 56) + 8 * v19);
    if ((v38 & 1) == 0)
    {
      v24 = v20[1];

      swift_unknownObjectRetain();
    }

    v25 = *(v8 + 40);
    sub_21AF09EFC();
    sub_21AF097EC();
    result = sub_21AF09F1C();
    v26 = -1 << *(v8 + 32);
    v27 = result & ~v26;
    v28 = v27 >> 6;
    if (((-1 << v27) & ~*(v15 + 8 * (v27 >> 6))) == 0)
    {
      break;
    }

    v29 = __clz(__rbit64((-1 << v27) & ~*(v15 + 8 * (v27 >> 6)))) | v27 & 0x7FFFFFFFFFFFFFC0;
LABEL_25:
    *(v15 + ((v29 >> 3) & 0x1FFFFFFFFFFFFFF8)) |= 1 << v29;
    v34 = (*(v8 + 48) + 16 * v29);
    *v34 = v21;
    v34[1] = v22;
    *(*(v8 + 56) + 8 * v29) = v23;
    ++*(v8 + 16);
    v5 = v37;
    if (!v13)
    {
      goto LABEL_9;
    }
  }

  v30 = 0;
  v31 = (63 - v26) >> 6;
  while (++v28 != v31 || (v30 & 1) == 0)
  {
    v32 = v28 == v31;
    if (v28 == v31)
    {
      v28 = 0;
    }

    v30 |= v32;
    v33 = *(v15 + 8 * v28);
    if (v33 != -1)
    {
      v29 = __clz(__rbit64(~v33)) + (v28 << 6);
      goto LABEL_25;
    }
  }

LABEL_36:
  __break(1u);
  return result;
}

uint64_t sub_21AEE156C(unint64_t a1, uint64_t a2)
{
  result = _swift_isClassOrObjCExistentialType();
  if ((a1 & 0x8000000000000000) != 0)
  {
    __break(1u);
LABEL_7:
    __break(1u);
    return result;
  }

  v5 = a2 & 0xFFFFFFFFFFFFFF8;
  if ((result & 1) == 0)
  {
    v5 = a2;
  }

  if (*(v5 + 16) <= a1)
  {
    goto LABEL_7;
  }

  return result;
}

uint64_t sub_21AEE15C0@<X0>(void *a1@<X0>, uint64_t *a2@<X8>)
{
  v3 = *(v2 + 16);
  v4 = *(v2 + 24);
  return sub_21AEDD41C(a1, a2);
}

uint64_t sub_21AEE15E0(uint64_t a1, uint64_t a2)
{
  v3 = *(a1 + 24);
  *(a2 + 24) = v3;
  *(a2 + 32) = *(a1 + 32);
  (**(v3 - 8))(a2, a1);
  return a2;
}

uint64_t sub_21AEE1644()
{
  v1 = *(v0 + 16);
  v2 = *(v0 + 24);
  return sub_21AEE0260();
}

uint64_t sub_21AEE1664()
{
  v1 = *(v0 + 16);
  v2 = *(v0 + 24);
  return sub_21AEE02E0();
}

uint64_t sub_21AEE1684(unint64_t *a1, uint64_t *a2, uint64_t *a3)
{
  result = *a1;
  if (!result)
  {
    sub_21AEAF7F0(a2, a3);
    result = swift_getWitnessTable();
    atomic_store(result, a1);
  }

  return result;
}

uint64_t sub_21AEE16CC@<X0>(uint64_t a1@<X0>, void *a2@<X8>)
{
  v3 = v2[2];
  v4 = v2[3];
  return sub_21AEE0344(a1, v2[4], v2[5], a2);
}

uint64_t sub_21AEE182C(float a1)
{
  *v1 = a1;
  v4 = *(v3 + 56);
  return v2;
}

void sub_21AEE1848()
{
  v2 = v0[166];
  v3 = v0[165];
  v4 = v0[164];
  v5 = v0[163];
  v6 = v0[162];
  v7 = v0[161];
  v8 = v0[160];
  v9 = v0[159];
  v10 = v0[157];
  v11 = v0[156];
  v12 = v0[155];
  v13 = v0[151];
  v1 = v0[150];
  v14 = v0[149];
}

uint64_t sub_21AEE18C0()
{
  v3 = v1[136];
  v4 = v1[134];
  v5 = v1[132];
  v6 = v0 + 40 * v2;
  v7 = v1[131];
  return v6 + 32;
}

uint64_t sub_21AEE1934()
{

  return swift_once();
}

uint64_t sub_21AEE1954@<X0>(uint64_t a1@<X8>)
{
  v4 = *(*(v3 - 104) + 1056);
  v5 = v1 + v2 * a1;
  v6 = *(*(v3 - 104) + 1048);
  result = v5 + 32;
  v8 = *(v3 - 104);
  return result;
}

uint64_t sub_21AEE1974()
{
  result = *(v0 + 1048);
  v3 = *(v1 - 104);
  v4 = *(v1 - 128);
  return result;
}

void sub_21AEE19AC()
{
  v4 = v0[166];
  v5 = v0[165];
  v6 = v0[164];
  v7 = v0[163];
  v8 = v0[162];
  v9 = v0[161];
  v10 = v0[160];
  v11 = v0[159];
  v12 = v0[157];
  v13 = v0[156];
  v14 = v0[155];
  v15 = v0[151];
  v16 = v0[150];
  v17 = v0[149];
  v2 = v0[146];
  v18 = v0[145];
  *(v1 - 128) = v0[143];
  v3 = v0[140];
}

uint64_t sub_21AEE1A3C@<X0>(uint64_t a1@<X8>)
{
  v4 = v1 + v2 * a1;
  v5 = *(*(v3 - 104) + 1048);
  result = v4 + 32;
  v7 = *(v3 - 104);
  return result;
}

uint64_t sub_21AEE1AB4(float a1)
{
  *v1 = a1;
  v4 = *(v3 + 56);
  return v2;
}

uint64_t sub_21AEE1AC8(float a1)
{
  *v2 = a1;
  v4 = *(v3 + 56);
  return v1;
}

void sub_21AEE1B84()
{
  v1 = *(*(v0 - 104) + 1088);
  v2 = *(*(v0 - 104) + 1072);
  v3 = *(*(v0 - 104) + 1056);
}

uint64_t sub_21AEE1BA4()
{
  *(v3 - 112) = v2;
  v5 = *(v1 + 1080);
  v6 = *(v1 + 1056);
  *(v3 - 120) = v0;

  return swift_slowAlloc();
}

uint64_t sub_21AEE1BFC(float a1)
{
  *v2 = a1;
  v4 = *(v3 + 56);
  return v1;
}

void sub_21AEE1C18()
{
  v1 = *(*(v0 - 104) + 1432);
  *(v0 - 128) = *(*(v0 - 104) + 1424);
  v2 = *(v0 - 104);
}

void sub_21AEE1C60()
{
  v2 = v0[182];
  *(v1 - 128) = v0[181];
  *(v1 - 120) = v2;
  v4 = v0[180];
  v3 = v0[179];
  *(v1 - 112) = v0[178];
}

uint64_t sub_21AEE1CD0()
{
  v2 = v1[137];
  v3 = v1[136];
  v4 = v1[131];
  return v0;
}

uint64_t (*sub_21AEE1CF8())()
{
  result = sub_21AEE17A4;
  v2 = *(v0 - 104);
  return result;
}

uint64_t sub_21AEE1D3C(uint64_t a1)
{
  v3 = *(a1 + 48);
  result = a1 + 48;
  *(v1 - 128) = result;
  return result;
}

void sub_21AEE1D64()
{
  v1 = v0[184];
  v2 = v0[183];
  v3 = v0[171];
  v4 = v0[168];
  v5 = v0[161];
  v6 = v0[158];
}

uint64_t sub_21AEE1D80(float a1)
{
  *v2 = a1;
  v4 = *(v1 + 56);
  return v3;
}

uint64_t sub_21AEE1DCC()
{

  return MLFeatureProvider.merging(other:uniquingKeysWith:)();
}

uint64_t sub_21AEE1DFC()
{
  result = v0;
  v3 = *(v1 - 104);
  return result;
}

void sub_21AEE1E3C(void *a1, uint64_t a2, uint64_t a3, const char *a4)
{
  v7 = *(v5 - 120);
  v8 = *(v5 - 120);
  v9 = *(v5 - 112);

  _os_log_impl(a1, v9, v8, a4, v4, 0x16u);
}

uint64_t sub_21AEE1E84()
{
  v5 = v0[146];
  v3 = v0[143];
  *(v1 - 104) = v0[145];
  *(v1 - 96) = v3;
  *(v1 - 88) = v0[140];
}

void sub_21AEE1EC4()
{
  *(v1 - 136) = v0[182];
  v4 = v0[181];
  v2 = v0[180];
  v3 = v0[179];
  *(v1 - 128) = v0[178];
}

uint64_t sub_21AEE1EE8()
{
  v2 = v1[137];
  v3 = v1[136];
  v4 = v1[131];
  return v0;
}

void sub_21AEE1F2C()
{
  v1 = v0[184];
  v2 = v0[183];
  v3 = v0[172];
  v4 = v0[168];
  v5 = v0[162];
  v6 = v0[158];
  v7 = v0[136];
}

void sub_21AEE1F4C()
{
  v4 = v0[181];
  v5 = v0[182];
  v2 = v0[180];
  v3 = v0[179];
  *(v1 - 128) = v0[178];
}

uint64_t sub_21AEE1F7C()
{
  v0[227] = v1;
  v3 = v0[134];
  v4 = v0[133];
  v5 = v0[132];
  v6 = v0[131];
  v0[113] = v1;
  v7 = *(v4 + 80);
}

uint64_t sub_21AEE1FB0()
{
  v2 = v0[169];
  v3 = v0[159];
  v4 = v0[136];
  v5 = v0[134];
  v6 = v0[132];
  v7 = v0[131];
}

uint64_t sub_21AEE1FE4()
{

  return swift_slowAlloc();
}

void sub_21AEE2000()
{

  JUMPOUT(0x21CEE5A20);
}

uint64_t sub_21AEE207C()
{
}

void sub_21AEE20A4()
{

  JUMPOUT(0x21CEE5A20);
}

void sub_21AEE20CC()
{
  v1 = v0[184];
  v2 = v0[183];
  v3 = v0[169];
  v4 = v0[168];
  v5 = v0[159];
  v6 = v0[158];
}

void sub_21AEE2164()
{
  v1 = v0[182];
  v2 = v0[181];
  v3 = v0[163];
}

void sub_21AEE218C(void *a1, uint64_t a2, os_log_type_t a3, const char *a4)
{

  _os_log_impl(a1, v4, a3, a4, v5, 0x16u);
}

void sub_21AEE2200()
{

  JUMPOUT(0x21CEE5A20);
}

uint64_t sub_21AEE2234()
{

  return swift_slowAlloc();
}

void sub_21AEE2250()
{

  JUMPOUT(0x21CEE5A20);
}

void sub_21AEE22AC()
{
  v1 = v0[175];
  v2 = v0[168];
  v3 = v0[166];
  v4 = v0[158];
  v5 = v0[136];
}

void sub_21AEE22C4()
{
  v1 = v0[182];
  v2 = v0[181];
  v3 = v0[163];
}

void sub_21AEE22F4()
{
  *(v1 - 128) = v0[214];
  v2 = v0[188];
  v3 = v0[186];
  v4 = v0[185];
}

uint64_t sub_21AEE2340()
{

  return swift_arrayDestroy();
}

uint64_t sub_21AEE2360()
{
  v2 = *(v0 - 128);

  return swift_arrayDestroy();
}

void sub_21AEE2380()
{
  v1 = v0[174];
  v2 = v0[168];
  v3 = v0[165];
  v4 = v0[158];
  v5 = v0[136];
}

void sub_21AEE23B0()
{
  v1 = v0[172];
  v2 = v0[168];
  v3 = v0[162];
  v4 = v0[158];
  v5 = v0[136];
}

void sub_21AEE23C8()
{

  JUMPOUT(0x21CEE5A20);
}

void sub_21AEE23E4()
{
  v1 = v0[173];
  v2 = v0[168];
  v3 = v0[164];
  v4 = v0[158];
  v5 = v0[136];
}

void sub_21AEE240C()
{
  v2 = v0[136];
  v3 = v0[132];
  sub_21AEA79F0(v0 + 47);
}

void sub_21AEE2444(void *a1, uint64_t a2, os_log_type_t a3, const char *a4)
{

  _os_log_impl(a1, v4, a3, a4, v5, 0x20u);
}

uint64_t sub_21AEE2478()
{
}

void sub_21AEE2494()
{

  JUMPOUT(0x21CEE5A20);
}

uint64_t sub_21AEE2550()
{

  return swift_slowAlloc();
}

uint64_t sub_21AEE256C@<X0>(uint64_t a1@<X8>)
{
  v3 = *(a1 + 1424);
  v4 = *(*(v1 - 104) + 1352);
  v5 = *(*(v1 - 104) + 1272);
  v6 = *(*(v1 - 104) + 1088);
  v7 = *(*(v1 - 104) + 1072);
  v8 = *(*(v1 - 104) + 1056);
  v9 = *(*(v1 - 104) + 1048);
}

uint64_t sub_21AEE25B0()
{
  v9 = v0[147];
  v8 = v0[136];
  *(v3 - 112) = v2;
  v5 = v0[135];
  *(v3 - 128) = v1;
  v6 = v0[132];

  return swift_slowAlloc();
}

uint64_t sub_21AEE25F4()
{
  v2 = *(v0 + 1056);

  return swift_slowAlloc();
}

void sub_21AEE262C(void *a1@<X0>, const char *a2@<X3>, os_log_type_t a3@<W8>)
{

  _os_log_impl(a1, v3, a3, a2, v4, 0x16u);
}

uint64_t sub_21AEE2664()
{
  result = v0;
  v3 = *(v1 - 104);
  return result;
}

uint64_t sub_21AEE26A8()
{
  v2 = v0[58];
  v3 = v0[59];
  v4 = v0[56];
  v5 = v0[54];
  v6 = v0[51];

  return sub_21AF096CC();
}

uint64_t sub_21AEE26E0()
{
  result = v0 + 8;
  v3 = *(v0 + 8);
  v4 = *(v1 - 80);
  return result;
}

void sub_21AEE270C(void *a1, uint64_t a2, os_log_type_t a3, const char *a4)
{

  _os_log_impl(a1, v4, a3, a4, v5, 0x16u);
}

void sub_21AEE2728()
{
  v1 = v0[65];
  v2 = v0[64];
  v4 = v0[61];
  v3 = v0[62];
  v5 = v0[60];
}

uint64_t sub_21AEE273C()
{
  v3 = *(*(v1 - 104) + 880);

  return sub_21AEE156C(v0, v3);
}

void sub_21AEE2760(void *a1, uint64_t a2, uint64_t a3, const char *a4)
{
  v8 = *(v6 - 136);

  _os_log_impl(a1, v8, v4, a4, v5, 0x16u);
}

uint64_t sub_21AEE279C(uint64_t result)
{
  *(*(v1 - 104) + 976) = result;
  v2 = *(v1 - 104);
  return result;
}

void sub_21AEE27C0()
{
  v1 = v0[180];
  v2 = v0[179];
  v3 = v0[178];
}

uint64_t sub_21AEE27D0()
{
  v7 = v1 + ((*(v2 + 48) + 32) & ~*(v2 + 48)) + *(v2 + 40) * v3;
  v8 = *(v4 + 28);
  v9 = *(v5 - 104);
  v10 = *(v7 + v8);
  *(v7 + v8) = v0;

  return swift_unknownObjectRelease();
}

uint64_t sub_21AEE280C()
{
  result = v0 + 8;
  v2 = *(v0 + 8);
  return result;
}

uint64_t sub_21AEE2848(uint64_t result)
{
  *(v1 - 128) = result;
  *(v1 - 96) = result;
  return result;
}

uint64_t sub_21AEE2860()
{
  v1 = v0[178];
  v2 = v0[151];
  v3 = v0[137];
  v4 = *(v0[144] + 16);
  return v0[146];
}

uint64_t sub_21AEE2884()
{
}

uint64_t sub_21AEE28B8()
{
}

BOOL sub_21AEE28D0(os_log_type_t a1)
{

  return os_log_type_enabled(v1, a1);
}

void sub_21AEE28EC(void *a1, NSObject *a2, os_log_type_t a3, const char *a4)
{

  _os_log_impl(a1, a2, a3, a4, v4, 0x16u);
}

void sub_21AEE2904()
{
  v1 = v0[184];
  v2 = v0[183];
  v3 = v0[173];
  v4 = v0[168];
  v5 = v0[164];
  v6 = v0[158];
  v7 = v0[136];
}

uint64_t sub_21AEE2930()
{

  return swift_arrayDestroy();
}

uint64_t sub_21AEE2948@<X0>(uint64_t a1@<X8>)
{
  v5 = *(*(v3 - 104) + 1056);
  v6 = v1 + v2 * a1;
  v7 = *(*(v3 - 104) + 1048);
  v8 = *(v3 - 104) + 176;

  return sub_21AEE15E0(v6 + 32, v8);
}

uint64_t sub_21AEE2978()
{
  v5 = v0[185];
  v6 = v0[186];
  v4 = v0[137];
  v7 = v0[136];
  v2 = v0[87];
}

uint64_t sub_21AEE29C4()
{
  v2 = v0[110];
  v0[205] = v2;
  v0[124] = v2;

  return swift_task_alloc();
}

uint64_t sub_21AEE29E4(uint64_t a1)
{
  *(*(v1 - 104) + 1656) = a1;
}

uint64_t sub_21AEE2A04()
{

  return sub_21AEE15E0(v0 + 136, v0 + 536);
}

uint64_t sub_21AEE2A40()
{
  v2 = *(v0 - 128);

  return swift_arrayDestroy();
}

uint64_t sub_21AEE2A60()
{

  return swift_arrayDestroy();
}

uint64_t sub_21AEE2A80()
{

  return swift_beginAccess();
}

uint64_t sub_21AEE2AA0(uint64_t a1)
{
  *(v1 + 1592) = a1;

  return sub_21AF0997C();
}

void sub_21AEE2AD8()
{
  v4 = *(v0 + 1176);
  v3 = *(v0 + 1088);
  v2 = *(*(v1 - 104) + 1080);
}

uint64_t sub_21AEE2B18()
{

  return swift_arrayDestroy();
}

void sub_21AEE2B30(void *a1, NSObject *a2, os_log_type_t a3, const char *a4)
{

  _os_log_impl(a1, a2, a3, a4, v4, 0x20u);
}

void sub_21AEE2B48()
{
  v1 = v0[214];
  v2 = v0[188];
  v3 = v0[186];
}

uint64_t sub_21AEE2B58()
{
  result = v0[228];
  v2 = v0[227];
  v3 = v0[182];
  return result;
}

uint64_t sub_21AEE2B68()
{
  v1 = v0[134];
  v2 = v0[133];
  return v0[132];
}

void sub_21AEE2BA8(uint64_t a1@<X8>)
{
  v1 = a1 & 0xFFFFFFFFFFFFFF8;
  v3 = *(v1 + 16);
  v2 = *(v1 + 24);
}

uint64_t sub_21AEE2BB8()
{
  v1 = *(*(v0 - 200) + 8);
  result = *(v0 - 104);
  v3 = *(v0 - 96);
  return result;
}

void sub_21AEE2BC8(uint64_t *a1@<X8>)
{
  v3 = *(v2 + 1176);
  v4 = *a1;
  v5 = *(v1 + 48);
}

void sub_21AEE2BD8()
{
  v1 = v0[188];
  v2 = v0[157];
  v3 = v0[152];
}

void sub_21AEE2BF8()
{
  v1 = v0[56];
  v2 = v0[54];
  v3 = v0[51];
}

uint64_t sub_21AEE2C08()
{
  v3 = *(v0 + 1656);
  v4 = *(v0 + 1072);
  v5 = *(v0 + 1064);
  v6 = *(v0 + 1056);
  *(v1 - 112) = *(v0 + 1088);
}

uint64_t sub_21AEE2C4C()
{
}

uint64_t sub_21AEE2C80()
{

  return swift_beginAccess();
}

BOOL sub_21AEE2C98(os_log_type_t a1)
{

  return os_log_type_enabled(v1, a1);
}

uint64_t sub_21AEE2CC8()
{
  v2 = v0[151];
  v3 = v0[148];
  v4 = v0[147];
  return v1;
}

uint64_t sub_21AEE2CE0()
{
  v2 = v1[137];
  v3 = v1[136];
  v4 = v1[131];
  return v0;
}

uint64_t sub_21AEE2D7C()
{

  return swift_task_alloc();
}

uint64_t sub_21AEE2D94()
{
  v3 = *(v1 - 104) + 880;

  return MEMORY[0x2821FC2A0](v0);
}

uint64_t sub_21AEE2DB0()
{
  v2 = *(v0 + 1088);
  v3 = *(v0 + 1056);

  return swift_unknownObjectRelease();
}

uint64_t sub_21AEE2DCC(uint64_t a1)
{
  *(a1 + 16) = v1;
  *(a1 + 24) = v2;
}

void sub_21AEE2E78()
{
  v1 = v0[171];
  v2 = v0[168];
  v3 = v0[161];
  v4 = v0[158];
}

uint64_t sub_21AEE2E98()
{
  sub_21AEA79F0((v0 + 376));

  return sub_21AEEC484();
}

uint64_t sub_21AEE2EC4()
{
  sub_21AEA79F0((v0 + 216));

  return sub_21AEEC484();
}

void sub_21AEE2F38()
{
  v1 = v0[194];
  v2 = v0[193];
  v3 = v0[157];
  v4 = v0[156];
}

void sub_21AEE2F58()
{
  v1 = v0[136];
  v2 = v0[134];
  v3 = v0[132];
  v4 = v0[131];
}

uint64_t sub_21AEE2FD8()
{
  v2 = v0[65];
  v3 = v0[64];
  v5 = v0[61];
  v4 = v0[62];
  v6 = v0[60];
}

uint64_t sub_21AEE2FF8()
{

  return swift_arrayDestroy();
}

uint64_t sub_21AEE3018()
{
  v3 = *(v0 + *(v1 + 28));

  return swift_getObjectType();
}

uint64_t sub_21AEE3038()
{

  return sub_21AEE15E0(v2 + 40 * v0 + 32, v1 + 136);
}

uint64_t sub_21AEE3058()
{

  return sub_21AF098BC();
}

BOOL sub_21AEE3078(uint64_t a1, os_log_type_t a2)
{
  *(v3 - 128) = v2;

  return os_log_type_enabled(v2, a2);
}

uint64_t sub_21AEE3090()
{

  return sub_21AEE15E0(v0 + 576, v0 + 376);
}

uint64_t sub_21AEE30A8()
{

  return swift_task_alloc();
}

uint64_t sub_21AEE30C0@<X0>(uint64_t a1@<X8>)
{
  v3 = *(a1 + 8 * v1);

  return swift_unknownObjectRetain();
}

uint64_t sub_21AEE30D8()
{
  v0 = sub_21AF096CC();
  sub_21AEA7A3C(v0, qword_27CD3EB88);
  sub_21AEA7958(v0, qword_27CD3EB88);
  return sub_21AF096BC();
}

id sub_21AEE3158(uint64_t a1, uint64_t a2, uint64_t a3, unint64_t a4, char a5, char a6)
{
  v7 = v6;
  v9 = sub_21AF0959C();
  v10 = sub_21AEA7C90(v9);
  v12 = v11;
  v14 = *(v13 + 64);
  MEMORY[0x28223BE20](v10);
  sub_21AEC7554();
  v18 = v17 - v16;
  if (a6)
  {
    v50 = v15;
    sub_21AF0958C();
    sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
    v19 = swift_allocObject();
    *(v19 + 16) = xmmword_21AF0C5D0;
    sub_21AF09C5C();

    v54[0] = 0xD000000000000011;
    v54[1] = 0x800000021AF0FE50;
    sub_21AF0957C();
    v20 = sub_21AF094CC();
    MEMORY[0x21CEE4A70](v20);

    *(v19 + 56) = MEMORY[0x277D837D0];
    *(v19 + 32) = v54[0];
    *(v19 + 40) = v54[1];
    sub_21AEC76AC();

    v21 = swift_allocObject();
    *(v21 + 16) = xmmword_21AF0C5D0;
    sub_21AF09C5C();

    strcpy(v54, "FeedbackData:\n");
    HIBYTE(v54[1]) = -18;
    v22 = sub_21AF094CC();
    MEMORY[0x21CEE4A70](v22);

    v23 = v54[0];
    v24 = v54[1];
    *(v21 + 56) = MEMORY[0x277D837D0];
    *(v21 + 32) = v23;
    *(v21 + 40) = v24;
    sub_21AEC76AC();

    (*(v12 + 8))(v18, v50);
  }

  v54[0] = MEMORY[0x277D84F90];
  result = [objc_allocWithZone(AMLUserLevelPhotosSearchMetrics) init];
  if (result)
  {
    v26 = result;
    sub_21AEE3EC4();
    [v26 setCoverageDaily_];
    sub_21AEE3ED0();
    [v26 setCoverageWeekly_];
    v27 = sub_21AEE58E8();
    sub_21AEE4018(v27, v28, v29);
    [v26 setNdcgDaily_];
    v30 = sub_21AEE58E8();
    sub_21AEE3FE4(v30, v31, v32);
    [v26 setNdcgWeekly_];
    v33 = sub_21AEE58E8();
    sub_21AEE4840(v33, v34, v35);
    [v26 setTtrDaily_];
    v36 = sub_21AEE58E8();
    sub_21AEE480C(v36, v37, v38);
    [v26 setTtrWeekly_];
    sub_21AEE57A8(3157553, 0xE300000000000000, v26, &selRef_setMetricDefinitionVersion_);
    sub_21AEE57A8(0x616E206C65646F6DLL, 0xEA0000000000656DLL, v26, &selRef_setModelName_);
    [v26 setIsProductionModel_];
    if (qword_27CD3D280 != -1)
    {
      swift_once();
    }

    v39 = sub_21AF096CC();
    sub_21AEA7958(v39, qword_27CD3EB88);

    v40 = sub_21AF096AC();
    v41 = sub_21AF09A8C();

    if (os_log_type_enabled(v40, v41))
    {
      v42 = swift_slowAlloc();
      v43 = swift_slowAlloc();
      v55 = v43;
      *v42 = 136315138;
      *(v42 + 4) = sub_21AECFFFC(a3, a4, &v55);
      _os_log_impl(&dword_21AE94000, v40, v41, "Perform photos search metrics payload upload to CA. Incoming: %s", v42, 0xCu);
      sub_21AEA79F0(v43);
      MEMORY[0x21CEE5A20](v43, -1, -1);
      MEMORY[0x21CEE5A20](v42, -1, -1);
    }

    [v26 setUiSurface_];
    sub_21AEE57A8(0xD000000000000016, 0x800000021AF0FDF0, v26, &selRef_setTrialDeploymentId_);
    sub_21AEE57A8(0xD000000000000017, 0x800000021AF0FE10, v26, &selRef_setTrialExperimentId_);
    sub_21AEE57A8(0xD000000000000015, 0x800000021AF0FE30, v26, &selRef_setTrialTreatmentId_);
    v44 = v26;
    MEMORY[0x21CEE4AD0]();
    if (*((v54[0] & 0xFFFFFFFFFFFFFF8) + 0x10) >= *((v54[0] & 0xFFFFFFFFFFFFFF8) + 0x18) >> 1)
    {
      sub_21AF098CC();
    }

    sub_21AF0991C();
    v45 = v54[0];
    if (a5)
    {
      v46 = *(v7 + OBJC_IVAR____TtC6AeroML32AMLPhotosSearchPoirotUserMetrics_caDomain);
      v47 = *(v7 + OBJC_IVAR____TtC6AeroML32AMLPhotosSearchPoirotUserMetrics_caDomain + 8);
      v48 = swift_allocObject();
      *(v48 + 16) = v44;
      v49 = v44;
      sub_21AEE3B4C(v46, v47, sub_21AEE5814, v48);
    }

    return v45;
  }

  else
  {
    __break(1u);
  }

  return result;
}

id sub_21AEE374C(void *a1)
{
  sub_21AEA7574(&qword_27CD3DA60, &qword_21AF0CE38);
  inited = swift_initStackObject();
  *(inited + 16) = xmmword_21AF0CDE0;
  *(inited + 32) = 0xD000000000000011;
  *(inited + 40) = 0x800000021AF0FF00;
  v3 = [a1 isProductionModel];
  *(inited + 48) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithInteger_];
  *(inited + 56) = 0x6D614E6C65646F6DLL;
  *(inited + 64) = 0xE900000000000065;
  result = [a1 modelName];
  if (!result)
  {
    __break(1u);
    goto LABEL_8;
  }

  *(inited + 72) = result;
  *(inited + 80) = 0x796C696144727474;
  *(inited + 88) = 0xE800000000000000;
  [a1 ttrDaily];
  *(inited + 96) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithDouble_];
  *(inited + 104) = 0x6C6B656557727474;
  *(inited + 112) = 0xE900000000000079;
  [a1 ttrWeekly];
  *(inited + 120) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithDouble_];
  strcpy((inited + 128), "coverageDaily");
  *(inited + 142) = -4864;
  [a1 coverageDaily];
  *(inited + 144) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithDouble_];
  strcpy((inited + 152), "coverageWeekly");
  *(inited + 167) = -18;
  [a1 coverageWeekly];
  *(inited + 168) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithDouble_];
  *(inited + 176) = 0x6C6961446763646ELL;
  *(inited + 184) = 0xE900000000000079;
  [a1 ndcgDaily];
  *(inited + 192) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithDouble_];
  *(inited + 200) = 0x6B6565576763646ELL;
  *(inited + 208) = 0xEA0000000000796CLL;
  [a1 ndcgWeekly];
  *(inited + 216) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithDouble_];
  *(inited + 224) = 0xD000000000000017;
  *(inited + 232) = 0x800000021AF0FF20;
  result = [a1 metricDefinitionVersion];
  if (!result)
  {
LABEL_8:
    __break(1u);
    goto LABEL_9;
  }

  *(inited + 240) = result;
  *(inited + 248) = 0x6361667275536975;
  *(inited + 256) = 0xE900000000000065;
  v11 = [a1 uiSurface];
  *(inited + 264) = [objc_allocWithZone(MEMORY[0x277CCABB0]) initWithInt_];
  *(inited + 272) = 0xD000000000000011;
  *(inited + 280) = 0x800000021AF0FF40;
  result = [a1 trialDeploymentId];
  if (!result)
  {
LABEL_9:
    __break(1u);
    goto LABEL_10;
  }

  *(inited + 288) = result;
  *(inited + 296) = 0xD000000000000011;
  *(inited + 304) = 0x800000021AF0FF60;
  result = [a1 trialExperimentId];
  if (!result)
  {
LABEL_10:
    __break(1u);
    goto LABEL_11;
  }

  *(inited + 312) = result;
  *(inited + 320) = 0xD000000000000010;
  *(inited + 328) = 0x800000021AF0FF80;
  result = [a1 trialTreatmentId];
  if (result)
  {
    *(inited + 336) = result;
    sub_21AEE58A4();
    return sub_21AF0974C();
  }

LABEL_11:
  __break(1u);
  return result;
}

uint64_t sub_21AEE3B4C(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v8 = objc_autoreleasePoolPush();
  sub_21AEE3BC4(a1, a2, a3, a4);

  return MEMORY[0x2821F9378](v8);
}

void sub_21AEE3BC4(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v6 = sub_21AF097BC();
  v17[4] = a3;
  v17[5] = a4;
  v17[0] = MEMORY[0x277D85DD0];
  v17[1] = 1107296256;
  v17[2] = sub_21AEF85DC;
  v17[3] = &unk_282C81500;
  v7 = _Block_copy(v17);

  v8 = AnalyticsSendEventLazy();
  _Block_release(v7);

  if (qword_27CD3D280 != -1)
  {
    swift_once();
  }

  v9 = sub_21AF096CC();
  sub_21AEA7958(v9, qword_27CD3EB88);
  v10 = sub_21AF096AC();
  v11 = sub_21AF09A8C();
  if (os_log_type_enabled(v10, v11))
  {
    v12 = swift_slowAlloc();
    v13 = swift_slowAlloc();
    v17[0] = v13;
    *v12 = 136315138;
    if (v8)
    {
      v14 = 0x6673736563637553;
    }

    else
    {
      v14 = 0x742064656C696146;
    }

    if (v8)
    {
      v15 = 0xEC000000796C6C75;
    }

    else
    {
      v15 = 0xE90000000000006FLL;
    }

    v16 = sub_21AECFFFC(v14, v15, v17);

    *(v12 + 4) = v16;
    _os_log_impl(&dword_21AE94000, v10, v11, "%s sent data to CoreAnalytics", v12, 0xCu);
    sub_21AEA79F0(v13);
    MEMORY[0x21CEE5A20](v13, -1, -1);
    MEMORY[0x21CEE5A20](v12, -1, -1);
  }
}

uint64_t sub_21AEE3DE0(uint64_t a1, uint64_t a2)
{
  if (!a2)
  {
    return 0;
  }

  if (a1 == 0xD000000000000019 && 0x800000021AF0F840 == a2)
  {
    return 2;
  }

  sub_21AEE2460();
  if (sub_21AF09E4C())
  {
    return 2;
  }

  if (a1 == 0xD000000000000013 && 0x800000021AF0F860 == a2)
  {
    return 1;
  }

  sub_21AEE2460();
  if (sub_21AF09E4C())
  {
    return 1;
  }

  if (a1 == 0xD000000000000011 && 0x800000021AF0F880 == a2)
  {
    return 1;
  }

  sub_21AEE2460();
  return (sub_21AF09E4C() & 1) != 0;
}

double sub_21AEE3EDC()
{
  v0 = sub_21AF093FC();
  v1 = sub_21AEA7C90(v0);
  v3 = v2;
  v5 = *(v4 + 64);
  MEMORY[0x28223BE20](v1);
  sub_21AEAD074();
  MEMORY[0x28223BE20](v6);
  v8 = &v12 - v7;
  sub_21AF093EC();
  sub_21AF0938C();
  v9 = *(v3 + 8);
  v10 = sub_21AEE2460();
  v9(v10);
  sub_21AF0936C();
  (v9)(v8, v0);
  return 1.0;
}

uint64_t sub_21AEE404C(uint64_t a1, uint64_t a2, int a3)
{
  v124 = sub_21AF0952C();
  v5 = sub_21AEA7C90(v124);
  v7 = v6;
  v9 = *(v8 + 64);
  MEMORY[0x28223BE20](v5);
  sub_21AEC7554();
  v123 = v11 - v10;
  v129 = sub_21AF0957C();
  v12 = sub_21AEA7C90(v129);
  v14 = v13;
  v16 = *(v15 + 64);
  MEMORY[0x28223BE20](v12);
  sub_21AEAD074();
  v19 = v17 - v18;
  v21 = MEMORY[0x28223BE20](v20);
  v23 = &v112 - v22;
  v24 = MEMORY[0x28223BE20](v21);
  v130 = &v112 - v25;
  MEMORY[0x28223BE20](v24);
  v26 = sub_21AEE5934();
  v128 = a3;
  sub_21AEB4E44(a3, v3);
  v116 = v3;
  sub_21AEB3BEC();
  v28 = v27;
  v115 = *(v27 + 16);
  if (v115)
  {
    v29 = 0;
    v114 = v27 + 32;
    v122 = (v7 + 8);
    v112 = v14;
    v127 = (v14 + 8);
    v30 = MEMORY[0x277D84F90];
    v120 = v19;
    v119 = v23;
    v118 = v26;
    v113 = v27;
    while (v29 < *(v28 + 16))
    {
      v117 = v29;
      v31 = (v114 + 16 * v29);
      v33 = *v31;
      v32 = v31[1];

      v34 = sub_21AEE2460();
      sub_21AEB908C(v34, v35, v116, v36, v37, v38, v39, v40, v112, v113, v114, v115, v116, v117, v118, v119, v120, v121, v122, v123);

      sub_21AEB41A0();
      v47 = v41;
      v126 = *(v41 + 16);
      if (v126)
      {
        v48 = 0;
        v125 = v41 + 32;
        v121 = v41;
        while (v48 < v47[2])
        {
          v131 = v30;
          sub_21AEBCC44(*(v125 + 8 * v48), v130, v128 & 1, v42, v43, v44, v45, v46, v112, v113, v114, v115, v116, v117, v118, v119, v120, v121, v122, v123);
          sub_21AEB4470();
          v50 = v49;
          sub_21AEC0F7C();
          v51 = v123;
          sub_21AF0954C();
          v52 = sub_21AF0950C();
          (*v122)(v51, v124);
          if (v52)
          {
            sub_21AEC09AC();
            v54 = isUniquelyReferenced_nonNull_native;
            v55 = *(v50 + 16);
            if (v55)
            {
              v56 = (v50 + 40);
              v57 = MEMORY[0x277D84F90];
              do
              {
                v47 = &v112;
                v58 = *v56;
                v132[0] = *(v56 - 1);
                v132[1] = v58;
                MEMORY[0x28223BE20](isUniquelyReferenced_nonNull_native);
                *(&v112 - 2) = v132;

                v59 = sub_21AEF6524(sub_21AEACF38, (&v112 - 4), v54);

                isUniquelyReferenced_nonNull_native = swift_isUniquelyReferenced_nonNull_native();
                if (v59)
                {
                  if ((isUniquelyReferenced_nonNull_native & 1) == 0)
                  {
                    v64 = *(v57 + 2);
                    v65 = sub_21AEAD04C();
                    sub_21AEACA34(v65, v66, v67, v57);
                    v57 = isUniquelyReferenced_nonNull_native;
                  }

                  v61 = *(v57 + 2);
                  v60 = *(v57 + 3);
                  v62 = v61 + 1;
                  v63 = 1.0;
                }

                else
                {
                  if ((isUniquelyReferenced_nonNull_native & 1) == 0)
                  {
                    v68 = *(v57 + 2);
                    v69 = sub_21AEAD04C();
                    sub_21AEACA34(v69, v70, v71, v57);
                    v57 = isUniquelyReferenced_nonNull_native;
                  }

                  v61 = *(v57 + 2);
                  v60 = *(v57 + 3);
                  v62 = v61 + 1;
                  v63 = 0.0;
                }

                if (v61 >= v60 >> 1)
                {
                  sub_21AEACA34(v60 > 1, v62, 1, v57);
                  v57 = isUniquelyReferenced_nonNull_native;
                }

                *(v57 + 2) = v62;
                *&v57[8 * v61 + 32] = v63;
                v56 += 2;
                --v55;
              }

              while (v55);
            }

            else
            {
              v57 = MEMORY[0x277D84F90];
            }

            v73 = *(v57 + 2);
            if (v73)
            {
              v74 = (v57 + 32);
              v75 = 1.0;
              v76 = 0.0;
              v30 = v131;
              do
              {
                v77 = *v74++;
                v75 = v75 + 1.0;
                v76 = v76 + v77 / log2(v75);
                --v73;
              }

              while (v73);
            }

            else
            {
              v76 = 0.0;
              v30 = v131;
            }

            v132[0] = v57;

            sub_21AEE4E60(v132);
            v78 = v132[0];
            v79 = *(v132[0] + 2);
            v80 = 32;
            v19 = v120;
            v23 = v119;
            while (v79)
            {
              v81 = *&v132[0][v80];
              v80 += 8;
              --v79;
              if (v81 != 0.0)
              {

                v57 = *(v78 + 2);
                if (v57)
                {
                  v82 = 1.0;
                  v83 = 0.0;
                  v84 = 32;
                  do
                  {
                    v85 = *&v78[v84];
                    v82 = v82 + 1.0;
                    v83 = v83 + v85 / log2(v82);
                    v84 += 8;
                    --v57;
                  }

                  while (v57);

                  v86 = v76 / v83;
                }

                else
                {

                  v86 = v76 / 0.0;
                }

                if ((swift_isUniquelyReferenced_nonNull_native() & 1) == 0)
                {
                  v100 = *(v30 + 16);
                  v101 = sub_21AEAD04C();
                  sub_21AEACA34(v101, v102, v103, v30);
                  v30 = v104;
                }

                v91 = *(v30 + 16);
                v90 = *(v30 + 24);
                if (v91 >= v90 >> 1)
                {
                  sub_21AEE5910(v90);
                  v30 = v99;
                }

                v92 = sub_21AEE58F8();
                MEMORY[0](v92);
                MEMORY[0](v23, v47);
                *(v30 + 16) = v91 + 1;
                *(v30 + 8 * v91 + 32) = v86;
                goto LABEL_46;
              }
            }

            if ((swift_isUniquelyReferenced_nonNull_native() & 1) == 0)
            {
              v93 = *(v30 + 16);
              v94 = sub_21AEAD04C();
              sub_21AEACA34(v94, v95, v96, v30);
              v30 = v97;
            }

            v88 = *(v30 + 16);
            v87 = *(v30 + 24);
            if (v88 >= v87 >> 1)
            {
              sub_21AEE5910(v87);
              v30 = v98;
            }

            v89 = sub_21AEE58F8();
            (v57)(v89);
            (v57)(v23, v47);
            *(v30 + 16) = v88 + 1;
            *(v30 + 8 * v88 + 32) = 0;
LABEL_46:
            v47 = v121;
          }

          else
          {

            v57 = *v127;
            v72 = v129;
            (*v127)(v19, v129);
            (v57)(v23, v72);
            v30 = v131;
          }

          if (++v48 == v126)
          {

            v28 = v113;
            goto LABEL_50;
          }
        }

        __break(1u);
        break;
      }

      v57 = *v127;
LABEL_50:
      v105 = v117 + 1;
      (v57)(v130, v129);
      v29 = v105;
      if (v105 == v115)
      {

        v14 = v112;
        goto LABEL_53;
      }
    }

    __break(1u);

    __break(1u);
  }

  else
  {

    v30 = MEMORY[0x277D84F90];
LABEL_53:
    v106 = *(v30 + 16);
    if (v106)
    {
      v107 = (v30 + 32);
      v108 = 0.0;
      do
      {
        v109 = *v107++;
        v108 = v108 + v109;
        --v106;
      }

      while (v106);
    }

    (*(v14 + 8))(v116, v129);
    v110 = *(v30 + 16);
  }

  return result;
}

uint64_t sub_21AEE4874(uint64_t a1, uint64_t a2, uint64_t a3, double (*a4)(uint64_t), uint64_t (*a5)(uint64_t, uint64_t, uint64_t, double))
{
  v9 = sub_21AF093FC();
  v10 = sub_21AEA7C90(v9);
  v12 = v11;
  v14 = *(v13 + 64);
  MEMORY[0x28223BE20](v10);
  sub_21AEAD074();
  v17 = (v15 - v16);
  MEMORY[0x28223BE20](v18);
  v20 = &v26 - v19;
  sub_21AF093EC();
  sub_21AF0938C();
  v21 = *(v12 + 8);
  v22 = v21(v17, v9);
  v23 = a4(v22);
  v24 = v21(v20, v9);
  return a5(v24, a2, a3, v23);
}

void sub_21AEE49B8(uint64_t a1, uint64_t a2, int a3)
{
  v5 = sub_21AF0952C();
  v6 = sub_21AEA7C90(v5);
  v70 = v7;
  v9 = *(v8 + 64);
  MEMORY[0x28223BE20](v6);
  sub_21AEC7554();
  v12 = v11 - v10;
  v13 = sub_21AF0957C();
  v14 = sub_21AEA7C90(v13);
  v16 = v15;
  v18 = *(v17 + 64);
  MEMORY[0x28223BE20](v14);
  sub_21AEAD074();
  v21 = v19 - v20;
  v23 = MEMORY[0x28223BE20](v22);
  v25 = &v61 - v24;
  v26 = MEMORY[0x28223BE20](v23);
  v74 = &v61 - v27;
  MEMORY[0x28223BE20](v26);
  v28 = sub_21AEE5934();
  sub_21AEB4E44(a3, v3);
  v67 = v3;
  sub_21AEB3BEC();
  v30 = v29;
  v66 = *(v29 + 16);
  if (v66)
  {
    v62 = v25;
    v63 = v21;
    v75 = v28;
    v31 = 0;
    v64 = v12;
    v65 = v29 + 32;
    ++v70;
    v71 = v5;
    v32 = (v16 + 8);
    v33 = 0.0;
    v34 = 0.0;
    v35 = v74;
    v61 = v29;
    v73 = a3;
    v72 = v13;
    while (v31 < *(v30 + 16))
    {
      v36 = (v65 + 16 * v31);
      v37 = v32;
      v38 = *v36;
      v39 = v36[1];

      sub_21AEB908C(v38, v39, v67, a3 & 1, v40, v41, v42, v43, v61, v62, v63, v64, v65, v66, v67, v68, v69, v70, v71, v72);

      sub_21AEB41A0();
      v32 = v37;
      v50 = v49;
      v51 = *(v49 + 16);
      if (v51)
      {
        v68 = v31;
        v69 = v37 & 0xFFFFFFFFFFFFLL | 0x4F8000000000000;
        v52 = 32;
        v54 = v63;
        v53 = v64;
        v55 = v62;
        v56 = v37;
        do
        {
          sub_21AEBCC44(*(v50 + v52), v74, v73 & 1, v44, v45, v46, v47, v48, v61, v62, v63, v64, v65, v66, v67, v68, v69, v70, v71, v72);
          sub_21AEC0F7C();
          sub_21AF0954C();
          v57 = sub_21AF0950C();
          (*v70)(v53, v71);
          v58 = *v56;
          v59 = v72;
          (*v56)(v54, v72);
          v58(v55, v59);
          if (v57 > 0)
          {
            v34 = v34 + 1.0;
          }

          else
          {
            v33 = v33 + 1.0;
          }

          v52 += 8;
          --v51;
        }

        while (v51);

        v60 = v72;
        LOBYTE(a3) = v73;
        v31 = v68;
        v35 = v74;
        v30 = v61;
        v32 = v56;
      }

      else
      {

        v58 = *v37;
        v60 = v13;
      }

      ++v31;
      v13 = v60;
      (v58)(v35);
      if (v31 == v66)
      {

        goto LABEL_15;
      }
    }

    __break(1u);
  }

  else
  {

    v58 = *(v16 + 8);
LABEL_15:
    v58(v67, v13);
  }
}

id AMLPhotosSearchPoirotUserMetrics.__allocating_init()()
{
  v1 = objc_allocWithZone(v0);

  return [v1 init];
}

id AMLPhotosSearchPoirotUserMetrics.init()()
{
  v1 = &v0[OBJC_IVAR____TtC6AeroML32AMLPhotosSearchPoirotUserMetrics_caDomain];
  *v1 = 0xD00000000000002DLL;
  *(v1 + 1) = 0x800000021AF0FE70;
  v3.receiver = v0;
  v3.super_class = type metadata accessor for AMLPhotosSearchPoirotUserMetrics();
  return objc_msgSendSuper2(&v3, sel_init);
}

id AMLPhotosSearchPoirotUserMetrics.__deallocating_deinit()
{
  v2.receiver = v0;
  v2.super_class = type metadata accessor for AMLPhotosSearchPoirotUserMetrics();
  return objc_msgSendSuper2(&v2, sel_dealloc);
}

uint64_t sub_21AEE4E60(char **a1)
{
  v2 = *a1;
  if ((swift_isUniquelyReferenced_nonNull_native() & 1) == 0)
  {
    v2 = sub_21AEFBDB8(v2);
  }

  v3 = *(v2 + 2);
  v5[0] = (v2 + 32);
  v5[1] = v3;
  result = sub_21AEE4ECC(v5);
  *a1 = v2;
  return result;
}

uint64_t sub_21AEE4ECC(uint64_t *a1)
{
  v2 = a1[1];
  result = sub_21AF09E0C();
  if (result < v2)
  {
    if (v2 >= -1)
    {
      v4 = result;
      v5 = v2 / 2;
      if (v2 <= 1)
      {
        v6 = MEMORY[0x277D84F90];
      }

      else
      {
        v6 = sub_21AF098FC();
        *(v6 + 16) = v5;
      }

      v7[0] = (v6 + 32);
      v7[1] = v5;
      sub_21AEE501C(v7, v8, a1, v4);
      *(v6 + 16) = 0;
    }

    __break(1u);
LABEL_12:
    __break(1u);
    return result;
  }

  if (v2 < 0)
  {
    goto LABEL_12;
  }

  if (v2)
  {
    return sub_21AEE4FC0(0, v2, 1, a1);
  }

  return result;
}

uint64_t sub_21AEE4FC0(uint64_t result, uint64_t a2, uint64_t a3, uint64_t *a4)
{
  if (a3 != a2)
  {
    v4 = *a4;
    v5 = *a4 + 8 * a3 - 8;
    v6 = result - a3;
    while (2)
    {
      v7 = *(v4 + 8 * a3);
      v8 = v6;
      v9 = v5;
      do
      {
        v10 = *v9;
        if (*v9 >= v7)
        {
          break;
        }

        if (!v4)
        {
          __break(1u);
          return result;
        }

        *v9 = v7;
        v9[1] = v10;
        --v9;
      }

      while (!__CFADD__(v8++, 1));
      ++a3;
      v5 += 8;
      --v6;
      if (a3 != a2)
      {
        continue;
      }

      break;
    }
  }

  return result;
}

void sub_21AEE501C(char **a1, uint64_t a2, uint64_t *a3, uint64_t a4)
{
  v80 = MEMORY[0x277D84F90];
  v5 = a3[1];
  if (v5 >= 1)
  {
    v6 = 0;
    v7 = MEMORY[0x277D84F90];
    v75 = a4;
    while (1)
    {
      v8 = v6 + 1;
      if (v6 + 1 < v5)
      {
        v9 = *(*a3 + 8 * v8);
        v10 = *(*a3 + 8 * v6);
        v11 = v6 + 2;
        v12 = v9;
        while (1)
        {
          v13 = v11;
          if (v11 >= v5)
          {
            break;
          }

          v14 = (v10 < v9) ^ (v12 >= *(*a3 + 8 * v11++));
          v12 = *(*a3 + 8 * v13);
          if ((v14 & 1) == 0)
          {
            v8 = v13;
            goto LABEL_9;
          }
        }

        v8 = v5;
LABEL_9:
        if (v10 < v9)
        {
          if (v8 < v6)
          {
            goto LABEL_108;
          }

          if (v6 < v8)
          {
            if (v5 >= v13)
            {
              v5 = v13;
            }

            v15 = 8 * v5 - 8;
            v16 = 8 * v6;
            v17 = v8;
            v18 = v6;
            do
            {
              if (v18 != --v17)
              {
                v19 = *a3;
                if (!*a3)
                {
                  goto LABEL_113;
                }

                v20 = *(v19 + v16);
                *(v19 + v16) = *(v19 + v15);
                *(v19 + v15) = v20;
              }

              ++v18;
              v15 -= 8;
              v16 += 8;
            }

            while (v18 < v17);
            v5 = a3[1];
          }
        }
      }

      if (v8 < v5)
      {
        if (__OFSUB__(v8, v6))
        {
          goto LABEL_107;
        }

        if (v8 - v6 < a4)
        {
          if (__OFADD__(v6, a4))
          {
            goto LABEL_109;
          }

          if (v6 + a4 < v5)
          {
            v5 = v6 + a4;
          }

          if (v5 < v6)
          {
LABEL_110:
            __break(1u);
LABEL_111:
            __break(1u);
LABEL_112:
            __break(1u);
LABEL_113:
            __break(1u);
LABEL_114:
            __break(1u);
LABEL_115:
            __break(1u);
            return;
          }

          if (v8 != v5)
          {
            v21 = *a3;
            v22 = *a3 + 8 * v8 - 8;
            v23 = v6 - v8;
            do
            {
              v24 = *(v21 + 8 * v8);
              v25 = v23;
              v26 = v22;
              do
              {
                v27 = *v26;
                if (*v26 >= v24)
                {
                  break;
                }

                if (!v21)
                {
                  goto LABEL_111;
                }

                *v26 = v24;
                v26[1] = v27;
                --v26;
              }

              while (!__CFADD__(v25++, 1));
              ++v8;
              v22 += 8;
              --v23;
            }

            while (v8 != v5);
            v8 = v5;
          }
        }
      }

      if (v8 < v6)
      {
        goto LABEL_106;
      }

      v77 = v8;
      if ((swift_isUniquelyReferenced_nonNull_native() & 1) == 0)
      {
        v72 = v7[2];
        sub_21AEAC638();
        v7 = v73;
      }

      v29 = v7[2];
      v30 = v29 + 1;
      if (v29 >= v7[3] >> 1)
      {
        sub_21AEAC638();
        v7 = v74;
      }

      v7[2] = v30;
      v31 = v7 + 4;
      v32 = &v7[2 * v29 + 4];
      *v32 = v6;
      v32[1] = v8;
      v78 = *a1;
      if (!*a1)
      {
        goto LABEL_114;
      }

      if (v29)
      {
        while (1)
        {
          v33 = v30 - 1;
          v34 = &v31[2 * v30 - 2];
          v35 = &v7[2 * v30];
          if (v30 >= 4)
          {
            break;
          }

          if (v30 == 3)
          {
            v36 = v7[4];
            v37 = v7[5];
            v46 = __OFSUB__(v37, v36);
            v38 = v37 - v36;
            v39 = v46;
LABEL_56:
            if (v39)
            {
              goto LABEL_96;
            }

            v51 = *v35;
            v50 = v35[1];
            v52 = __OFSUB__(v50, v51);
            v53 = v50 - v51;
            v54 = v52;
            if (v52)
            {
              goto LABEL_99;
            }

            v55 = v34[1];
            v56 = v55 - *v34;
            if (__OFSUB__(v55, *v34))
            {
              goto LABEL_102;
            }

            if (__OFADD__(v53, v56))
            {
              goto LABEL_104;
            }

            if (v53 + v56 >= v38)
            {
              if (v38 < v56)
              {
                v33 = v30 - 2;
              }

              goto LABEL_78;
            }

            goto LABEL_71;
          }

          if (v30 < 2)
          {
            goto LABEL_98;
          }

          v58 = *v35;
          v57 = v35[1];
          v46 = __OFSUB__(v57, v58);
          v53 = v57 - v58;
          v54 = v46;
LABEL_71:
          if (v54)
          {
            goto LABEL_101;
          }

          v60 = *v34;
          v59 = v34[1];
          v46 = __OFSUB__(v59, v60);
          v61 = v59 - v60;
          if (v46)
          {
            goto LABEL_103;
          }

          if (v61 < v53)
          {
            goto LABEL_85;
          }

LABEL_78:
          if (v33 - 1 >= v30)
          {
            __break(1u);
LABEL_91:
            __break(1u);
LABEL_92:
            __break(1u);
LABEL_93:
            __break(1u);
LABEL_94:
            __break(1u);
LABEL_95:
            __break(1u);
LABEL_96:
            __break(1u);
LABEL_97:
            __break(1u);
LABEL_98:
            __break(1u);
LABEL_99:
            __break(1u);
LABEL_100:
            __break(1u);
LABEL_101:
            __break(1u);
LABEL_102:
            __break(1u);
LABEL_103:
            __break(1u);
LABEL_104:
            __break(1u);
LABEL_105:
            __break(1u);
LABEL_106:
            __break(1u);
LABEL_107:
            __break(1u);
LABEL_108:
            __break(1u);
LABEL_109:
            __break(1u);
            goto LABEL_110;
          }

          if (!*a3)
          {
            goto LABEL_112;
          }

          v65 = &v31[2 * v33 - 2];
          v66 = *v65;
          v67 = &v31[2 * v33];
          v68 = v67[1];
          sub_21AEE55F8((*a3 + 8 * *v65), (*a3 + 8 * *v67), (*a3 + 8 * v68), v78);
          if (v4)
          {
            goto LABEL_89;
          }

          if (v68 < v66)
          {
            goto LABEL_91;
          }

          v69 = v7;
          v70 = v7[2];
          if (v33 > v70)
          {
            goto LABEL_92;
          }

          *v65 = v66;
          v65[1] = v68;
          if (v33 >= v70)
          {
            goto LABEL_93;
          }

          v30 = v70 - 1;
          memmove(&v31[2 * v33], v67 + 2, 16 * (v70 - 1 - v33));
          v69[2] = v70 - 1;
          v71 = v70 > 2;
          v7 = v69;
          if (!v71)
          {
            goto LABEL_85;
          }
        }

        v40 = &v31[2 * v30];
        v41 = *(v40 - 8);
        v42 = *(v40 - 7);
        v46 = __OFSUB__(v42, v41);
        v43 = v42 - v41;
        if (v46)
        {
          goto LABEL_94;
        }

        v45 = *(v40 - 6);
        v44 = *(v40 - 5);
        v46 = __OFSUB__(v44, v45);
        v38 = v44 - v45;
        v39 = v46;
        if (v46)
        {
          goto LABEL_95;
        }

        v47 = v35[1];
        v48 = v47 - *v35;
        if (__OFSUB__(v47, *v35))
        {
          goto LABEL_97;
        }

        v46 = __OFADD__(v38, v48);
        v49 = v38 + v48;
        if (v46)
        {
          goto LABEL_100;
        }

        if (v49 >= v43)
        {
          v63 = *v34;
          v62 = v34[1];
          v46 = __OFSUB__(v62, v63);
          v64 = v62 - v63;
          if (v46)
          {
            goto LABEL_105;
          }

          if (v38 < v64)
          {
            v33 = v30 - 2;
          }

          goto LABEL_78;
        }

        goto LABEL_56;
      }

LABEL_85:
      v5 = a3[1];
      v6 = v77;
      a4 = v75;
      if (v77 >= v5)
      {
        v80 = v7;
        break;
      }
    }
  }

  if (!*a1)
  {
    goto LABEL_115;
  }

  sub_21AEE54CC(&v80, *a1, a3);
LABEL_89:
}

uint64_t sub_21AEE54CC(uint64_t *a1, char *a2, void *a3)
{
  v4 = a1;
  v5 = *a1;
  result = swift_isUniquelyReferenced_nonNull_native();
  if ((result & 1) == 0)
  {
LABEL_14:
    result = sub_21AEFBBF8(v5);
    v5 = result;
  }

  v14 = v4;
  *v4 = v5;
  v7 = (v5 + 16);
  for (i = *(v5 + 16); ; *v7 = i)
  {
    v4 = (i - 2);
    if (i < 2)
    {
LABEL_10:
      *v14 = v5;
      return 1;
    }

    if (!*a3)
    {
      break;
    }

    v9 = (v5 + 16 * i);
    v10 = *v9;
    v11 = &v7[2 * i];
    v12 = v11[1];
    sub_21AEE55F8((*a3 + 8 * *v9), (*a3 + 8 * *v11), (*a3 + 8 * v12), a2);
    if (v3)
    {
      goto LABEL_10;
    }

    if (v12 < v10)
    {
      __break(1u);
LABEL_12:
      __break(1u);
LABEL_13:
      __break(1u);
      goto LABEL_14;
    }

    if (v4 >= *v7)
    {
      goto LABEL_12;
    }

    *v9 = v10;
    v9[1] = v12;
    v13 = *v7 - i;
    if (*v7 < i)
    {
      goto LABEL_13;
    }

    i = *v7 - 1;
    result = memmove(v11, v11 + 2, 16 * v13);
  }

  *v14 = v5;
  __break(1u);
  return result;
}

uint64_t sub_21AEE55F8(char *a1, char *a2, double *a3, char *a4)
{
  v4 = a4;
  v5 = a3;
  v6 = a2;
  v7 = a1;
  v8 = (a2 - a1) / 8;
  v9 = (a3 - a2) / 8;
  if (v8 < v9)
  {
    sub_21AE965B0(a1, (a2 - a1) / 8, a4);
    v10 = &v4[v8];
    while (1)
    {
      if (v4 >= v10 || v6 >= v5)
      {
        v6 = v7;
        goto LABEL_28;
      }

      v12 = *v6;
      if (*v4 >= *v6)
      {
        break;
      }

      v13 = v7 == v6++;
      if (!v13)
      {
        goto LABEL_12;
      }

LABEL_13:
      ++v7;
    }

    v12 = *v4;
    v13 = v7 == v4++;
    if (v13)
    {
      goto LABEL_13;
    }

LABEL_12:
    *v7 = v12;
    goto LABEL_13;
  }

  sub_21AE965B0(a2, (a3 - a2) / 8, a4);
  v10 = &v4[v9];
LABEL_15:
  v14 = v6 - 1;
  for (--v5; v10 > v4 && v6 > v7; --v5)
  {
    v16 = *(v10 - 1);
    if (*v14 < v16)
    {
      v13 = v5 + 1 == v6--;
      if (!v13)
      {
        *v5 = *v14;
        v6 = v14;
      }

      goto LABEL_15;
    }

    if (v10 != v5 + 1)
    {
      *v5 = v16;
    }

    --v10;
  }

LABEL_28:
  v17 = v10 - v4;
  if (v6 != v4 || v6 >= &v4[v17])
  {
    memmove(v6, v4, 8 * v17);
  }

  return 1;
}

void sub_21AEE57A8(uint64_t a1, uint64_t a2, void *a3, SEL *a4)
{
  v6 = sub_21AF097BC();

  [a3 *a4];
}

uint64_t sub_21AEE588C(uint64_t a1, uint64_t a2)
{
  v2 = *(a2 + 40);
  *(a1 + 32) = *(a2 + 32);
  *(a1 + 40) = v2;
}

unint64_t sub_21AEE58A4()
{
  result = qword_27CD3DA68;
  if (!qword_27CD3DA68)
  {
    objc_opt_self();
    result = swift_getObjCClassMetadata();
    atomic_store(result, &qword_27CD3DA68);
  }

  return result;
}

uint64_t sub_21AEE58F8()
{
  v2 = **(v1 - 200);
  result = v0;
  v4 = *(v1 - 184);
  return result;
}

void sub_21AEE5910(unint64_t a1@<X8>)
{

  sub_21AEACA34(a1 > 1, v1, 1, v2);
}

uint64_t sub_21AEE5934()
{

  return type metadata accessor for AMLPhotosSearchPoirotMetricsUtility();
}

id AMLPhotosSearchBiomeMetricsUtility.__allocating_init()()
{
  v1 = objc_allocWithZone(v0);

  return [v1 init];
}

void *sub_21AEE5988()
{
  v1 = [BiomeLibrary() AeroML];
  sub_21AEEA1D4();
  v2 = [v0 RawEvent];
  swift_unknownObjectRelease();
  v3 = [v2 PhotosSearchSession];
  sub_21AEEA1D4();
  return v0;
}

id sub_21AEE5A10()
{
  v1 = [BiomeLibrary() Photos];
  sub_21AEEA1D4();
  v2 = [v0 Search];
  swift_unknownObjectRelease();
  return v2;
}

id AMLPhotosSearchBiomeMetricsUtility.init()()
{
  *&v0[OBJC_IVAR____TtC6AeroML34AMLPhotosSearchBiomeMetricsUtility_clickedPhotoIds] = &unk_282C806D0;
  *&v0[OBJC_IVAR____TtC6AeroML34AMLPhotosSearchBiomeMetricsUtility_sessionAssetUUIDs] = &unk_282C80AD0;
  *&v0[OBJC_IVAR____TtC6AeroML34AMLPhotosSearchBiomeMetricsUtility_cosDistancesAsset] = &unk_282C80B08;
  v2.receiver = v0;
  v2.super_class = type metadata accessor for AMLPhotosSearchBiomeMetricsUtility();
  return objc_msgSendSuper2(&v2, sel_init);
}

void sub_21AEE5B34()
{
  sub_21AEAD0C4();
  v5 = sub_21AEEA194(v2, v3, v4);
  v6 = sub_21AEA7C90(v5);
  v8 = v7;
  v10 = *(v9 + 64);
  MEMORY[0x28223BE20](v6);
  sub_21AEEA094();
  v11 = swift_allocObject();
  v12 = MEMORY[0x277D84F90];
  *(v11 + 16) = MEMORY[0x277D84F90];
  v13 = v11 + 16;
  sub_21AEE9EC8([v0 publisher]);
  sub_21AEE9F10();
  v36 = v14;
  v37 = &unk_282C81550;
  v33 = _Block_copy(v35);
  v15 = *(v8 + 16);
  v16 = sub_21AEE9E90();
  v17(v16);
  sub_21AEE9FE0();
  v18 = swift_allocObject();
  v19 = sub_21AEE9FC4(v18);
  v20(v19);
  *(v1 + v10) = v11;
  sub_21AEE9EA0();
  v36 = sub_21AEE9E10;
  v37 = &unk_282C815A0;
  v21 = _Block_copy(v35);

  v22 = sub_21AEEA168();
  v24 = [v22 v23];
  _Block_release(v21);
  _Block_release(v33);

  sub_21AEEA1B4();
  v25 = *(v11 + 16);
  v26 = *(*v13 + 16);
  if (v26)
  {
    v27 = *v13;

    while (v26 <= *(v25 + 16))
    {
      v28 = *(v25 + 16 * v26 + 16);
      *(v25 + 16 * v26 + 24);
      if ((swift_isUniquelyReferenced_nonNull_native() & 1) == 0)
      {
        sub_21AEEA0D0();
        sub_21AEAC6EC();
        v12 = v30;
      }

      v29 = *(v12 + 24);
      if (*(v12 + 16) >= v29 >> 1)
      {
        sub_21AEEA0B8(v29);
        sub_21AEAC6EC();
        v12 = v31;
      }

      sub_21AEEA024();
    }

    __break(1u);
  }

  if (v32)
  {
    sub_21AEE888C(v12);
  }

  sub_21AEAD0A8();
}

void sub_21AEE5DB0()
{
  sub_21AEAD0C4();
  v5 = sub_21AEEA194(v2, v3, v4);
  v6 = sub_21AEA7C90(v5);
  v8 = v7;
  v10 = *(v9 + 64);
  MEMORY[0x28223BE20](v6);
  sub_21AEEA094();
  v11 = swift_allocObject();
  v12 = MEMORY[0x277D84F90];
  *(v11 + 16) = MEMORY[0x277D84F90];
  v13 = v11 + 16;
  sub_21AEE9EC8([v0 publisher]);
  sub_21AEE9F10();
  v36 = v14;
  v37 = &unk_282C815F0;
  v33 = _Block_copy(v35);
  v15 = *(v8 + 16);
  v16 = sub_21AEE9E90();
  v17(v16);
  sub_21AEE9FE0();
  v18 = swift_allocObject();
  v19 = sub_21AEE9FC4(v18);
  v20(v19);
  *(v1 + v10) = v11;
  sub_21AEE9EA0();
  v36 = sub_21AEE9E10;
  v37 = &unk_282C81640;
  v21 = _Block_copy(v35);

  v22 = sub_21AEEA168();
  v24 = [v22 v23];
  _Block_release(v21);
  _Block_release(v33);

  sub_21AEEA1B4();
  v25 = *(v11 + 16);
  v26 = *(*v13 + 16);
  if (v26)
  {
    v27 = *v13;

    while (v26 <= *(v25 + 16))
    {
      v28 = *(v25 + 16 * v26 + 16);
      *(v25 + 16 * v26 + 24);
      if ((swift_isUniquelyReferenced_nonNull_native() & 1) == 0)
      {
        sub_21AEEA0D0();
        sub_21AEAC7B8();
        v12 = v30;
      }

      v29 = *(v12 + 24);
      if (*(v12 + 16) >= v29 >> 1)
      {
        sub_21AEEA0B8(v29);
        sub_21AEAC7B8();
        v12 = v31;
      }

      sub_21AEEA024();
    }

    __break(1u);
  }

  if (v32)
  {
    sub_21AEE8DFC(v12);
  }

  sub_21AEAD0A8();
}

void sub_21AEE602C()
{
  sub_21AEAD0C4();
  v1 = v0;
  v3 = v2;
  v5 = v4;
  v7 = v6;
  v8 = sub_21AF093FC();
  v9 = sub_21AEA7C90(v8);
  v11 = v10;
  v13 = *(v12 + 64);
  MEMORY[0x28223BE20](v9);
  v15 = &v30 - ((v14 + 15) & 0xFFFFFFFFFFFFFFF0);
  v16 = [v7 eventBody];
  if (v16)
  {
    v17 = v16;
    [v7 timestamp];
    sub_21AF0935C();
    v18 = sub_21AF0924C();
    (*(v11 + 8))(v15, v8);
    if (v18)
    {
      [v7 timestamp];
      v20 = v19;
      swift_beginAccess();
      v21 = v17;
      sub_21AEE98E0(v3);
      v22 = *(*(v5 + 16) + 16);
      sub_21AEE9974(v22, v3);
      v23 = *(v5 + 16);
      *(v23 + 16) = v22 + 1;
      v24 = v23 + 16 * v22;
      *(v24 + 32) = v20;
      *(v24 + 40) = v21;
      *(v5 + 16) = v23;
      swift_endAccess();
    }

    else
    {
    }

    sub_21AEAD0A8();
  }

  else
  {
    if (qword_27CD3D2B0 != -1)
    {
      swift_once();
    }

    v25 = sub_21AF096CC();
    sub_21AEA7958(v25, qword_27CD3EC00);
    v30 = sub_21AF096AC();
    v26 = sub_21AF09A9C();
    if (os_log_type_enabled(v30, v26))
    {
      v27 = swift_slowAlloc();
      *v27 = 0;
      _os_log_impl(&dword_21AE94000, v30, v26, v1, v27, 2u);
      MEMORY[0x21CEE5A20](v27, -1, -1);
    }

    sub_21AEAD0A8();
  }
}

uint64_t sub_21AEE6298(void *a1)
{
  v2 = swift_allocObject();
  *(v2 + 16) = 0;
  *(v2 + 24) = 1;
  v3 = [a1 publisher];
  v14 = nullsub_1;
  v15 = 0;
  v10 = MEMORY[0x277D85DD0];
  v11 = 1107296256;
  v12 = sub_21AEE9E10;
  v13 = &unk_282C81690;
  v4 = _Block_copy(&v10);
  v14 = sub_21AEE9B20;
  v15 = v2;
  v10 = MEMORY[0x277D85DD0];
  v11 = 1107296256;
  v12 = sub_21AEE9E10;
  v13 = &unk_282C816B8;
  v5 = _Block_copy(&v10);

  v6 = [v3 sinkWithCompletion:v4 receiveInput:v5];
  _Block_release(v5);
  _Block_release(v4);

  swift_beginAccess();
  v7 = *(v2 + 16);
  v8 = *(v2 + 24);

  return v7;
}

uint64_t sub_21AEE6450(void *a1, uint64_t a2)
{
  [a1 timestamp];
  v4 = v3;
  result = swift_beginAccess();
  *(a2 + 16) = v4;
  *(a2 + 24) = 0;
  return result;
}

void sub_21AEE64AC(uint64_t a1, void *a2)
{
  v4 = *(a1 + 32);
  v3 = *(a1 + 40);

  v5 = a2;
  v4();
}

void sub_21AEE6514()
{
  v1 = sub_21AEE65B0();
  sub_21AEE6648(v1);

  v2 = [BiomeLibrary() Photos];
  sub_21AEEA1D4();
  v3 = [v0 Search];
  swift_unknownObjectRelease();
  sub_21AEE6738(v3);
}

id sub_21AEE65B0()
{
  v0 = [BiomeLibrary() AeroML];
  swift_unknownObjectRelease();
  v1 = [v0 RawEvent];
  swift_unknownObjectRelease();
  v2 = [v1 PhotosSearchSession];
  swift_unknownObjectRelease();
  return v2;
}

uint64_t sub_21AEE6648(void *a1)
{
  v2 = [a1 pruner];
  v3 = sub_21AEE9F68();
  sub_21AEE9EEC();
  v8[1] = 1107296256;
  v8[2] = sub_21AEE9DF0;
  v8[3] = &unk_282C816E0;
  v4 = _Block_copy(v8);

  v5 = sub_21AEEA168();
  [v5 v6];

  _Block_release(v4);
  result = swift_isEscapingClosureAtFileLocation();
  if (result)
  {
    __break(1u);
  }

  return result;
}

uint64_t sub_21AEE6738(void *a1)
{
  v2 = [a1 pruner];
  v3 = sub_21AEE9F68();
  sub_21AEE9EEC();
  v8[1] = 1107296256;
  v8[2] = sub_21AEE9DF0;
  v8[3] = &unk_282C81708;
  v4 = _Block_copy(v8);

  v5 = sub_21AEEA168();
  [v5 v6];

  _Block_release(v4);
  result = swift_isEscapingClosureAtFileLocation();
  if (result)
  {
    __break(1u);
  }

  return result;
}

uint64_t sub_21AEE681C(uint64_t *a1, uint64_t a2, uint64_t a3, uint64_t a4, char a5, char a6)
{
  v9 = *(a4 + 64);
  v135 = a4 + 64;
  v10 = *(a4 + 32);
  sub_21AEE9E14();
  v13 = v12 & v11;
  v15 = (v14 + 63) >> 6;
  sub_21AEC7BD0();
  v134 = v16;
  v139 = v17;

  v18 = 0;
  v146 = a3;
  v149 = a2;
  v143 = a1;
  v137 = v15;
  do
  {
LABEL_2:
    if (v13)
    {
      goto LABEL_7;
    }

    do
    {
      v19 = v18 + 1;
      if (__OFADD__(v18, 1))
      {
        goto LABEL_88;
      }

      if (v19 >= v15)
      {
        sub_21AEEA100();
      }

      v13 = *(v135 + 8 * v19);
      ++v18;
    }

    while (!v13);
    v18 = v19;
LABEL_7:
    v20 = __clz(__rbit64(v13)) | (v18 << 6);
    v21 = *(*(v139 + 56) + 8 * v20);
    v22 = *(v21 + 16);
    v138 = v18;
    if (v22)
    {
      v140 = v13;
      v23 = (*(v139 + 48) + 16 * v20);
      v151 = *v23;
      v152 = v23[1];

      v144 = 0;
      v24 = (v21 + 40);
      v25 = (v21 + 40);
      v26 = v22;
      v150 = v22;
      do
      {
        if (*(a2 + 16))
        {
          v28 = *(v25 - 1);
          v27 = *v25;

          v29 = sub_21AED0594();
          if ((v30 & 1) != 0 && *(a3 + 16))
          {
            v31 = *(*(a2 + 56) + 8 * v29);
            v32 = sub_21AED0594();
            v34 = v33;

            if (v34 & 1) != 0 && (v35 = *(*(a3 + 56) + 8 * v32), *(v35 + 16)) && (v36 = sub_21AED0608(v31), (v37))
            {
              v38 = *(*(v35 + 56) + 8 * v36);
              v39 = __OFADD__(v144, v38);
              v144 += v38;
              v22 = v150;
              if (v39)
              {
                goto LABEL_93;
              }
            }

            else
            {
              v22 = v150;
            }
          }

          else
          {
          }
        }

        v25 += 2;
        --v26;
      }

      while (v26);
      v40 = 0;
      a1 = v143;
      v147 = v21;
      while (2)
      {
        if (v40 >= *(v21 + 16))
        {
LABEL_86:
          __break(1u);
          goto LABEL_87;
        }

        v41 = *(v24 - 1);
        v42 = *v24;
        v43 = *(a2 + 16);

        v44 = 0.0;
        if (v43)
        {
          sub_21AEE204C();
          v45 = sub_21AED0594();
          if (v46)
          {
            if (*(a3 + 16))
            {
              v47 = *(*(a2 + 56) + 8 * v45);
              sub_21AEE204C();
              v48 = sub_21AED0594();
              if (v49 & 1) != 0 && (v50 = *(*(a3 + 56) + 8 * v48), *(v50 + 16)) && (v51 = sub_21AED0608(v47), (v52))
              {
                v22 = v150;
                if (v144)
                {
                  v44 = *(*(v50 + 56) + 8 * v51) / v144;
                }
              }

              else
              {
                v22 = v150;
              }
            }
          }
        }

        v53 = *v143;
        if (*(*v143 + 16))
        {
          v54 = sub_21AED0594();
          if (v55)
          {
            v56 = *(*(v53 + 56) + 8 * v54);
            v57 = v56[2];

            if (!v57 || (sub_21AEE204C(), v58 = sub_21AED0594(), (v59 & 1) == 0))
            {

              goto LABEL_50;
            }

            sub_21AEEA150(v56[7] + (v58 << 6));
            v157 = *(v60 + 48);
            if (a5)
            {
              v61 = *(v60 + 40);
            }

            else
            {
              v61 = v44;
            }

            if ((a5 & 1) == 0)
            {
              v44 = *(v60 + 32);
            }

            swift_isUniquelyReferenced_nonNull_native();
            sub_21AEE204C();
            sub_21AED0594();
            v62 = v56[2];
            sub_21AED1B64();
            if (__OFADD__(v65, v66))
            {
              goto LABEL_91;
            }

            v67 = v63;
            v68 = v64;
            sub_21AEA7574(&qword_27CD3DF70, &qword_21AF0CE90);
            if (sub_21AF09D0C())
            {
              sub_21AEE204C();
              sub_21AED0594();
              sub_21AED1C04();
              a3 = v146;
              if (!v70)
              {
                goto LABEL_94;
              }

              v67 = v69;
              if ((v68 & 1) == 0)
              {
LABEL_46:
                sub_21AED1AA8(&v56[v67 >> 6]);
                v71 = (v56[6] + 16 * v67);
                *v71 = v41;
                v71[1] = v42;
                v72 = v56[7] + (v67 << 6);
                *v72 = v153;
                *(v72 + 16) = v154;
                *(v72 + 32) = v44;
                *(v72 + 40) = v61;
                *(v72 + 48) = v157;
                v73 = v56[2];
                v39 = __OFADD__(v73, 1);
                v74 = v73 + 1;
                if (v39)
                {
                  goto LABEL_92;
                }

                v56[2] = v74;
LABEL_50:

                v75 = *v143;
                swift_isUniquelyReferenced_nonNull_native();
                v76 = *v143;
                *&v153 = *v143;
                sub_21AED0594();
                v77 = *(v76 + 16);
                sub_21AED1B64();
                if (__OFADD__(v80, v81))
                {
                  goto LABEL_89;
                }

                v82 = v78;
                v83 = v79;
                sub_21AEA7574(&qword_27CD3D940, &qword_21AF0D3C0);
                if (sub_21AF09D0C())
                {
                  v84 = v152;
                  sub_21AED0594();
                  sub_21AEEA050();
                  if (!v70)
                  {
                    goto LABEL_94;
                  }

                  v82 = v85;
                }

                else
                {
                  v84 = v152;
                }

                if (v83)
                {
                  v86 = *(v153 + 56);
                  v87 = *(v86 + 8 * v82);
                  *(v86 + 8 * v82) = v56;
                }

                else
                {
                  sub_21AEEA0AC();
                  sub_21AEE9E30(v88);
                  v90 = (v89 + 16 * v82);
                  *v90 = v151;
                  v90[1] = v84;
                  *(*(v153 + 56) + 8 * v82) = v56;
                  sub_21AEE9FFC();
                  if (v39)
                  {
                    goto LABEL_90;
                  }

                  *(v153 + 16) = v91;
                }

                *v143 = v153;
                v21 = v147;
                a2 = v149;
                v22 = v150;
LABEL_61:
                ++v40;
                v24 += 2;
                if (v22 == v40)
                {

                  v15 = v137;
                  v18 = v138;
                  v13 = v140;
                  goto LABEL_65;
                }

                continue;
              }
            }

            else
            {
              a3 = v146;
              if ((v68 & 1) == 0)
              {
                goto LABEL_46;
              }
            }

            v92 = v56[7] + (v67 << 6);
            *v92 = v153;
            *(v92 + 16) = v154;
            *(v92 + 32) = v44;
            *(v92 + 40) = v61;
            *(v92 + 48) = v157;
            goto LABEL_50;
          }
        }

        break;
      }

      goto LABEL_61;
    }

LABEL_65:
    v13 &= v13 - 1;
  }

  while ((a6 & 1) == 0);
  v141 = v13;
  v93 = *a1 + 64;
  v94 = *(*a1 + 32);
  sub_21AEE9E14();
  v97 = v96 & v95;
  v99 = (v98 + 63) >> 6;

  v100 = 0;
  v148 = v93;
  v145 = v99;
  if (!v97)
  {
    goto LABEL_68;
  }

  while (2)
  {
    v101 = v100;
LABEL_71:
    v97 &= v97 - 1;
    sub_21AED1E50();
    v103 = *v102;
    v104 = v102[1];
    v107 = *(v106 + 8 * v105);
    sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
    v108 = sub_21AEC7C30();
    sub_21AEE9E44(v108, xmmword_21AF0C5D0);
    *&v153 = v110;
    *(&v153 + 1) = v109;

    MEMORY[0x21CEE4A70](v103, v104);

    *(v108 + 56) = MEMORY[0x277D837D0];
    *(v108 + 32) = v153;
    sub_21AEC76AC();

    v111 = 0;
    v113 = v107 + 64;
    v112 = *(v107 + 64);
    v114 = *(v107 + 32);
    sub_21AEE9E14();
    v117 = v116 & v115;
    v119 = (v118 + 63) >> 6;
    if ((v116 & v115) != 0)
    {
      goto LABEL_77;
    }

    while (1)
    {
      v120 = v111 + 1;
      if (__OFADD__(v111, 1))
      {
        __break(1u);
        goto LABEL_86;
      }

      if (v120 >= v119)
      {
        break;
      }

      v117 = *(v113 + 8 * v120);
      ++v111;
      if (v117)
      {
        v111 = v120;
        do
        {
LABEL_77:
          v117 &= v117 - 1;
          sub_21AED1E50();
          v122 = *v121;
          v123 = v121[1];
          sub_21AEEA150(v125 + (v124 << 6));
          v155 = *(v126 + 32);
          v156 = *(v126 + 48);
          v127 = sub_21AEC7C30();
          sub_21AEC7A14(v127, xmmword_21AF0C5D0);

          sub_21AF09C5C();

          sub_21AEE9F28();
          *&v158 = v128;
          sub_21AEE9E80();
          *(&v158 + 1) = v129;
          MEMORY[0x21CEE4A70](v122, v123);

          sub_21AEEA120();
          v130 = sub_21AEEF64C();
          MEMORY[0x21CEE4A70](v130);

          *(v127 + 56) = MEMORY[0x277D837D0];
          *(v127 + 32) = v158;
          sub_21AEC76AC();
        }

        while (v117);
        continue;
      }
    }

    v100 = v101;
    a3 = v146;
    v93 = v148;
    a1 = v143;
    v99 = v145;
    if (v97)
    {
      continue;
    }

    break;
  }

LABEL_68:
  while (1)
  {
    v101 = v100 + 1;
    if (__OFADD__(v100, 1))
    {
      break;
    }

    if (v101 >= v99)
    {

      sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
      v131 = sub_21AEC7C30();
      *(v131 + 16) = xmmword_21AF0C5D0;
      *(v131 + 56) = MEMORY[0x277D837D0];
      *(v131 + 32) = 0xD00000000000003CLL;
      *(v131 + 40) = v134;
      sub_21AEC76AC();

      a2 = v149;
      v15 = v137;
      v18 = v138;
      v13 = v141;
      goto LABEL_2;
    }

    v97 = *(v93 + 8 * v101);
    ++v100;
    if (v97)
    {
      goto LABEL_71;
    }
  }

LABEL_87:
  __break(1u);
LABEL_88:
  __break(1u);
LABEL_89:
  __break(1u);
LABEL_90:
  __break(1u);
LABEL_91:
  __break(1u);
LABEL_92:
  __break(1u);
LABEL_93:
  __break(1u);
LABEL_94:
  result = sub_21AF09E7C();
  __break(1u);
  return result;
}

uint64_t sub_21AEE706C(void *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  v7 = a1;
  v8 = sub_21AED1A58(a2, a3, *a1);
  if (v8)
  {
    v9 = v8;
    v10 = sub_21AEB3974();
    if (sub_21AED1A58(v10, v11, a4))
    {

      v12 = sub_21AEB3974();
      v14 = sub_21AED1A58(v12, v13, a4);
      if (v14)
      {
        v15 = v14;
        v81 = v7;
        v16 = *(v14 + 16);
        if (v16)
        {
          v17 = 0;
          v18 = v14 + 32;
          v83 = v14;
          while (v17 < *(v15 + 16))
          {
            if (*(v9 + 16))
            {
              v19 = *(v18 + 8 * v17);
              v20 = sub_21AED0608(v19);
              if (v21)
              {
                if (__OFADD__(*(*(v9 + 56) + 8 * v20), 1))
                {
                  goto LABEL_64;
                }

                swift_isUniquelyReferenced_nonNull_native();
                v22 = sub_21AEEA174();
                sub_21AEE9E6C(v22, v23);
                if (v26)
                {
                  goto LABEL_65;
                }

                v27 = v24;
                v28 = v25;
                sub_21AEA7574(&qword_27CD3DF80, &qword_21AF0CE98);
                if (sub_21AEE9F98())
                {
                  sub_21AED0608(v19);
                  sub_21AED1C04();
                  if (!v30)
                  {
                    goto LABEL_71;
                  }

                  v27 = v29;
                }

                v9 = v86;
                if (v28)
                {
                  sub_21AEEA15C();
                }

                else
                {
                  sub_21AEEA0AC();
                  sub_21AEE9E30(v31);
                  *(v32 + 8 * v27) = v19;
                  sub_21AEEA15C();
                  sub_21AEE9FFC();
                  if (v26)
                  {
                    goto LABEL_69;
                  }

                  *(v86 + 16) = v33;
                }

                v15 = v83;
              }
            }

            if (v16 == ++v17)
            {
              goto LABEL_21;
            }
          }

          goto LABEL_61;
        }

LABEL_21:

        v7 = v81;
      }
    }

LABEL_59:
    v79 = *v7;
    swift_isUniquelyReferenced_nonNull_native();
    v87 = *v7;
    sub_21AF05428();

    *v7 = v87;
    return result;
  }

  v82 = v7;
  v34 = sub_21AF0974C();
  v36 = a5 + 56;
  v35 = *(a5 + 56);
  v37 = *(a5 + 32);
  sub_21AED1A7C();
  v40 = v39 & v38;
  v42 = (v41 + 63) >> 6;

  v43 = 0;
  v84 = a5;
  if (!v40)
  {
    goto LABEL_25;
  }

  do
  {
    v44 = v43;
LABEL_28:
    v45 = *(*(a5 + 48) + ((v44 << 9) | (8 * __clz(__rbit64(v40)))));
    swift_isUniquelyReferenced_nonNull_native();
    v86 = v34;
    v46 = sub_21AED0608(v45);
    sub_21AEE9E6C(v46, v47);
    if (v26)
    {
      goto LABEL_63;
    }

    v50 = v48;
    v51 = v49;
    sub_21AEA7574(&qword_27CD3DF80, &qword_21AF0CE98);
    if (sub_21AEE9F98())
    {
      v52 = sub_21AED0608(v45);
      if ((v51 & 1) != (v53 & 1))
      {
        goto LABEL_71;
      }

      v50 = v52;
    }

    v40 &= v40 - 1;
    if (v51)
    {
      *(*(v34 + 56) + 8 * v50) = 0;
    }

    else
    {
      sub_21AEEA0AC();
      sub_21AEE9E30(v54);
      *(v55 + 8 * v50) = v45;
      *(*(v34 + 56) + 8 * v50) = 0;
      sub_21AEE9FFC();
      if (v26)
      {
        goto LABEL_68;
      }

      *(v34 + 16) = v56;
    }

    v43 = v44;
    a5 = v84;
  }

  while (v40);
  while (1)
  {
LABEL_25:
    v44 = v43 + 1;
    if (__OFADD__(v43, 1))
    {
      __break(1u);
LABEL_61:
      __break(1u);
      goto LABEL_62;
    }

    if (v44 >= v42)
    {
      break;
    }

    v40 = *(v36 + 8 * v44);
    ++v43;
    if (v40)
    {
      goto LABEL_28;
    }
  }

  v57 = sub_21AEB3974();
  if (!sub_21AED1A58(v57, v58, a4) || (, v59 = sub_21AEB3974(), (v61 = sub_21AED1A58(v59, v60, a4)) == 0))
  {
LABEL_58:

    v7 = v82;
    goto LABEL_59;
  }

  v62 = v61;
  v63 = *(v61 + 16);
  if (!v63)
  {
LABEL_57:

    goto LABEL_58;
  }

  v64 = 0;
  v65 = v61 + 32;
  v85 = v61;
  while (v64 < *(v62 + 16))
  {
    if (*(v34 + 16))
    {
      v66 = *(v65 + 8 * v64);
      v67 = sub_21AED0608(v66);
      if (v68)
      {
        if (__OFADD__(*(*(v34 + 56) + 8 * v67), 1))
        {
          goto LABEL_66;
        }

        swift_isUniquelyReferenced_nonNull_native();
        v69 = sub_21AEEA174();
        sub_21AEE9E6C(v69, v70);
        if (v26)
        {
          goto LABEL_67;
        }

        v73 = v71;
        v74 = v72;
        sub_21AEA7574(&qword_27CD3DF80, &qword_21AF0CE98);
        if (sub_21AEE9F98())
        {
          sub_21AED0608(v66);
          sub_21AED1C04();
          if (!v30)
          {
            goto LABEL_71;
          }

          v73 = v75;
        }

        v34 = v86;
        if (v74)
        {
          sub_21AEEA15C();
        }

        else
        {
          sub_21AEEA0AC();
          sub_21AEE9E30(v76);
          *(v77 + 8 * v73) = v66;
          sub_21AEEA15C();
          sub_21AEE9FFC();
          if (v26)
          {
            goto LABEL_70;
          }

          *(v86 + 16) = v78;
        }

        v62 = v85;
      }
    }

    if (v63 == ++v64)
    {
      goto LABEL_57;
    }
  }

LABEL_62:
  __break(1u);
LABEL_63:
  __break(1u);
LABEL_64:
  __break(1u);
LABEL_65:
  __break(1u);
LABEL_66:
  __break(1u);
LABEL_67:
  __break(1u);
LABEL_68:
  __break(1u);
LABEL_69:
  __break(1u);
LABEL_70:
  __break(1u);
LABEL_71:
  result = sub_21AF09E7C();
  __break(1u);
  return result;
}

uint64_t sub_21AEE7500(void *a1, uint64_t a2, uint64_t a3)
{
  v4 = sub_21AED1A58(a2, a3, *a1);
  if (!v4)
  {
    goto LABEL_9;
  }

  v5 = v4;
  v6 = sub_21AEE9E90();
  sub_21AEC8B0C(v6, v7, v8);
  if (v9)
  {
    goto LABEL_34;
  }

  v10 = sub_21AEE9E90();
  v13 = sub_21AEC8B0C(v10, v11, v12);
  if (v14)
  {
    goto LABEL_34;
  }

  if (v13 <= 4)
  {
    v15 = sub_21AEC8B60(v13, v5);
    if ((v16 & 1) == 0)
    {
      if (!__OFADD__(v15, 1))
      {
LABEL_25:
        swift_isUniquelyReferenced_nonNull_native();
        v40 = sub_21AEB3974();
LABEL_33:
        sub_21AF0551C(v40, v41);
        goto LABEL_34;
      }

      __break(1u);
LABEL_9:
      v5 = sub_21AF0974C();
      for (i = 0; i != 6; ++i)
      {
        swift_isUniquelyReferenced_nonNull_native();
        v18 = sub_21AED0608(i);
        sub_21AEE9E6C(v18, v19);
        if (v22)
        {
          __break(1u);
LABEL_36:
          __break(1u);
LABEL_37:
          __break(1u);
          goto LABEL_38;
        }

        v23 = v20;
        v24 = v21;
        sub_21AEA7574(&qword_27CD3DF80, &qword_21AF0CE98);
        if (sub_21AF09D0C())
        {
          sub_21AED0608(i);
          sub_21AEEA050();
          if (!v26)
          {
            goto LABEL_39;
          }

          v23 = v25;
        }

        if (v24)
        {
          *(*(v5 + 56) + 8 * v23) = 0;
        }

        else
        {
          sub_21AEE9E30(v5 + 8 * (v23 >> 6));
          *(v27 + 8 * v23) = i;
          *(*(v5 + 56) + 8 * v23) = 0;
          sub_21AEE9FFC();
          if (v22)
          {
            goto LABEL_36;
          }

          *(v5 + 16) = v28;
        }
      }

      v29 = sub_21AEE9E90();
      sub_21AEC8B0C(v29, v30, v31);
      if ((v32 & 1) == 0)
      {
        v33 = sub_21AEE9E90();
        v36 = sub_21AEC8B0C(v33, v34, v35);
        if ((v37 & 1) == 0)
        {
          if (v36 > 4)
          {
            goto LABEL_30;
          }

          v38 = sub_21AEC8B60(v36, v5);
          if ((v39 & 1) == 0)
          {
            if (!__OFADD__(v38, 1))
            {
              goto LABEL_25;
            }

            goto LABEL_37;
          }
        }
      }
    }

LABEL_34:

    v47 = *a1;
    swift_isUniquelyReferenced_nonNull_native();
    v49 = *a1;
    sub_21AF05428();

    *a1 = v49;
    return result;
  }

  v42 = sub_21AEC8B60(5, v5);
  if (v43)
  {
    goto LABEL_34;
  }

  v44 = v42 + 1;
  if (!__OFADD__(v42, 1))
  {
    goto LABEL_32;
  }

  __break(1u);
LABEL_30:
  v45 = sub_21AEC8B60(5, v5);
  if (v46)
  {
    goto LABEL_34;
  }

  v44 = v45 + 1;
  if (!__OFADD__(v45, 1))
  {
LABEL_32:
    swift_isUniquelyReferenced_nonNull_native();
    v40 = v44;
    v41 = 5;
    goto LABEL_33;
  }

LABEL_38:
  __break(1u);
LABEL_39:
  result = sub_21AF09E7C();
  __break(1u);
  return result;
}

uint64_t sub_21AEE77C0(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, int a5, int a6)
{
  HIDWORD(v176) = a6;
  HIDWORD(v183) = a5;
  v190 = a1;
  v11 = a4 + 64;
  v10 = *(a4 + 64);
  v12 = *(a4 + 32);
  sub_21AEE9E14();
  sub_21AEEA040();
  v184 = "cosDistancesAsset";
  sub_21AEC7BD0();
  v174 = v13;
  v175 = v14;
  v179 = v15;

  v16 = 0;
  v185 = xmmword_21AF0C5D0;
  v186 = a2;
  v177 = v6;
  v178 = v11;
  if (v7)
  {
    while (1)
    {
LABEL_6:
      v180 = v16;
      v181 = v7;
      sub_21AED1E50();
      v19 = v18[1];
      v189 = *v18;
      v22 = *(v21 + 8 * v20);
      v193 = *(v22 + 16);
      if (v193)
      {
        v191 = v22 + 32;

        v23 = 0;
        v24 = 0;
        v187 = v19;
        v188 = v22;
        v25 = v22;
        while (v24 < *(v25 + 16))
        {
          if (*(a2 + 16))
          {
            v26 = (v191 + 16 * v24);
            v28 = *v26;
            v27 = v26[1];

            v29 = sub_21AED0594();
            if (v30)
            {
              v31 = *(a2 + 56);
              v32 = *(v31 + 8 * v29);
              v33 = *(v32 + 16);
              if (v33)
              {
                v34 = *(v31 + 8 * v29);

                v35 = 32;
                while (1)
                {
                  if (*(a3 + 16))
                  {
                    v36 = *(v32 + v35);
                    v37 = sub_21AED0594();
                    if (v38)
                    {
                      v39 = *(*(a3 + 56) + 8 * v37);
                      if (*(v39 + 16))
                      {
                        v40 = sub_21AED0608(v36);
                        if (v41)
                        {
                          v42 = *(*(v39 + 56) + 8 * v40);
                          v43 = __OFADD__(v23, v42);
                          v23 += v42;
                          if (v43)
                          {
                            goto LABEL_91;
                          }
                        }
                      }
                    }
                  }

                  v35 += 8;
                  if (!--v33)
                  {

                    a2 = v186;
                    break;
                  }
                }
              }

              v19 = v187;
            }

            v25 = v188;
          }

          if (++v24 == v193)
          {
            v44 = 0;
            v194 = v23;
            while (v44 < *(v25 + 16))
            {
              v45 = (v191 + 16 * v44);
              v46 = *v45;
              v47 = v45[1];
              v48 = *(a2 + 16);

              if (v48)
              {
                sub_21AEEA088();
                v49 = sub_21AED0594();
                if (v50)
                {
                  v51 = *(a2 + 56);
                  v52 = *(v51 + 8 * v49);
                  v53 = *(v52 + 16);
                  if (v53)
                  {
                    v54 = *(v51 + 8 * v49);

                    v55 = 0.0;
                    v56 = 32;
                    do
                    {
                      if (*(a3 + 16))
                      {
                        v57 = *(v52 + v56);
                        sub_21AEEA088();
                        v58 = sub_21AED0594();
                        if (v59)
                        {
                          v60 = *(*(a3 + 56) + 8 * v58);
                          if (*(v60 + 16))
                          {
                            v61 = sub_21AED0608(v57);
                            v63 = v194;
                            if ((v62 & 1) != 0 && (v63 = 0, v23))
                            {
                              v55 = v55 + *(*(v60 + 56) + 8 * v61);
                              v194 = v23;
                            }

                            else
                            {
                              v194 = v63;
                            }
                          }
                        }
                      }

                      v56 += 8;
                      --v53;
                    }

                    while (v53);

                    a2 = v186;
                  }

                  v19 = v187;
                  v25 = v188;
                }
              }

              v64 = *v190;
              if (*(*v190 + 16) && (v65 = sub_21AED0594(), (v66 & 1) != 0))
              {
                v67 = *(*(v64 + 56) + 8 * v65);
                v68 = v67[2];

                if (v68 && (sub_21AEEA088(), v69 = sub_21AED0594(), (v70 & 1) != 0))
                {
                  sub_21AEEA150(v67[7] + (v69 << 6));
                  v197 = *(v71 + 32);
                  v72 = *(v71 + 48);
                  v73 = *(v71 + 56);
                  swift_isUniquelyReferenced_nonNull_native();
                  v199 = v67;
                  sub_21AEEA088();
                  sub_21AED0594();
                  v74 = v67[2];
                  sub_21AED1B64();
                  if (__OFADD__(v77, v78))
                  {
                    goto LABEL_95;
                  }

                  v79 = v75;
                  v80 = v76;
                  sub_21AEA7574(&qword_27CD3DF70, &qword_21AF0CE90);
                  if (sub_21AF09D0C())
                  {
                    sub_21AEEA088();
                    v81 = sub_21AED0594();
                    if ((v80 & 1) != (v82 & 1))
                    {
                      goto LABEL_97;
                    }

                    v79 = v81;
                  }

                  if (v80)
                  {

                    v67 = v199;
                    sub_21AEE9F48(v83, v84, v85, v86, v87, v88, v89, v90, v174, v175, v176, v177, v178, v179, v180, v181, v183, v184, v185.n128_i64[0], v185.n128_i64[1], v186, v187, v188, v189, v190, v191, v193, v194, v195, v196, v91);
                  }

                  else
                  {
                    v67 = v199;
                    sub_21AED1AA8(&v199[v79 >> 6]);
                    v92 = (v67[6] + 16 * v79);
                    *v92 = v46;
                    v92[1] = v47;
                    sub_21AEE9F48(v93, v94, v95, v96, v97, v98, v99, v100, v174, v175, v176, v177, v178, v179, v180, v181, v183, v184, v185.n128_i64[0], v185.n128_i64[1], v186, v187, v188, v189, v190, v191, v193, v194, v195, v196, v101);
                    v102 = v67[2];
                    v43 = __OFADD__(v102, 1);
                    v103 = v102 + 1;
                    if (v43)
                    {
                      goto LABEL_96;
                    }

                    v67[2] = v103;
                  }
                }

                else
                {
                }

                v104 = *v190;
                swift_isUniquelyReferenced_nonNull_native();
                *&v195 = *v190;
                v105 = v195;
                sub_21AED0594();
                v106 = *(v105 + 16);
                sub_21AED1B64();
                if (__OFADD__(v109, v110))
                {
                  goto LABEL_93;
                }

                v111 = v107;
                v112 = v108;
                sub_21AEA7574(&qword_27CD3D940, &qword_21AF0D3C0);
                if (sub_21AF09D0C())
                {
                  v113 = sub_21AED0594();
                  a2 = v186;
                  if ((v112 & 1) != (v114 & 1))
                  {
                    goto LABEL_97;
                  }

                  v111 = v113;
                }

                else
                {
                  a2 = v186;
                }

                v115 = v195;
                if (v112)
                {
                  v116 = *(v195 + 56);
                  v117 = *(v116 + 8 * v111);
                  *(v116 + 8 * v111) = v67;

                  v19 = v187;
                }

                else
                {
                  sub_21AED1AA8(v195 + 8 * (v111 >> 6));
                  v118 = (v115[6] + 16 * v111);
                  *v118 = v189;
                  v118[1] = v187;
                  *(v115[7] + 8 * v111) = v67;
                  v119 = v115[2];
                  v43 = __OFADD__(v119, 1);
                  v120 = v119 + 1;
                  if (v43)
                  {
                    goto LABEL_94;
                  }

                  v115[2] = v120;

                  v19 = v187;
                }

                *v190 = v115;
                v25 = v188;
              }

              else
              {
              }

              if (++v44 == v193)
              {

                v6 = v177;
                v11 = v178;
                v7 = v181;
                goto LABEL_66;
              }
            }

            goto LABEL_89;
          }
        }

        goto LABEL_88;
      }

LABEL_66:
      if ((v176 & 0x100000000) != 0)
      {
        break;
      }

LABEL_82:
      v7 &= v7 - 1;

      v16 = v180;
      if (!v7)
      {
        goto LABEL_2;
      }
    }

    sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
    v121 = sub_21AEC7C30();
    sub_21AEC7A14(v121, v185);
    *&v195 = 0;
    *(&v195 + 1) = v122;
    sub_21AF09C5C();

    *&v195 = 0xD000000000000024;
    *(&v195 + 1) = v175;
    MEMORY[0x21CEE4A70](v189, v19);

    v124 = *(&v195 + 1);
    v123 = v195;
    *(v121 + 56) = MEMORY[0x277D837D0];
    *(v121 + 32) = __PAIR128__(v124, v123);
    sub_21AEC76AC();

    v125 = *v190 + 64;
    v126 = *(*v190 + 32);
    sub_21AEE9E14();
    sub_21AEEA040();

    v127 = 0;
    if (!v7)
    {
      while (1)
      {
        v128 = v127 + 1;
        if (__OFADD__(v127, 1))
        {
          goto LABEL_90;
        }

        if (v128 >= &v195)
        {

          v163 = sub_21AEC7C30();
          sub_21AEE9F3C(v163, v164, v165, v166, v167, v168, v169, v170, v174, v175, v176, v177, v178, v179, v180, v181, v183, v184, v171);
          v172[7] = MEMORY[0x277D837D0];
          v172[4] = 0xD00000000000003CLL;
          v172[5] = v174;
          sub_21AEC76AC();
          v6 = v177;
          v11 = v178;
          v7 = v182;
          goto LABEL_82;
        }

        v7 = *(v125 + 8 * v128);
        ++v127;
        if (v7)
        {
          goto LABEL_72;
        }
      }
    }

LABEL_68:
    v128 = v127;
LABEL_72:
    sub_21AEEA13C();
    v192 = v7;
    sub_21AED1E50();
    v130 = *v129;
    v131 = v129[1];
    v134 = *(v133 + 8 * v132);
    v135 = sub_21AEC7C30();
    sub_21AEE9E44(v135, v185);
    *&v195 = v137;
    *(&v195 + 1) = v136;

    MEMORY[0x21CEE4A70](v130, v131);

    v138 = v195;
    *(v135 + 56) = MEMORY[0x277D837D0];
    *(v135 + 32) = v138;
    sub_21AEC76AC();

    v139 = 0;
    v141 = v134 + 64;
    v140 = *(v134 + 64);
    v142 = *(v134 + 32);
    sub_21AEE9E14();
    v145 = v144 & v143;
    v147 = (v146 + 63) >> 6;
    if ((v144 & v143) == 0)
    {
      goto LABEL_74;
    }

    do
    {
LABEL_78:
      v145 &= v145 - 1;
      sub_21AED1E50();
      v150 = *v149;
      v151 = v149[1];
      sub_21AEEA150(v153 + (v152 << 6));
      v155 = *(v154 + 48);
      v197 = *(v154 + 32);
      v198 = v155;
      v156 = sub_21AEC7C30();
      sub_21AEC7A14(v156, v185);
      v199 = 0;
      v200 = v157;

      sub_21AF09C5C();

      sub_21AEE9F28();
      v199 = v158;
      sub_21AEE9E80();
      v200 = v159;
      MEMORY[0x21CEE4A70](v150, v151);

      sub_21AEEA120();
      v160 = sub_21AEEF64C();
      MEMORY[0x21CEE4A70](v160);

      v161 = v199;
      v162 = v200;
      v156[3].n128_u64[1] = MEMORY[0x277D837D0];
      v156[2].n128_u64[0] = v161;
      v156[2].n128_u64[1] = v162;
      sub_21AEC76AC();
    }

    while (v145);
LABEL_74:
    while (1)
    {
      v148 = v139 + 1;
      if (__OFADD__(v139, 1))
      {
        break;
      }

      if (v148 >= v147)
      {

        v127 = v128;
        v7 = v192;
        goto LABEL_68;
      }

      v145 = *(v141 + 8 * v148);
      ++v139;
      if (v145)
      {
        v139 = v148;
        goto LABEL_78;
      }
    }

    __break(1u);
LABEL_88:
    __break(1u);
LABEL_89:
    __break(1u);
LABEL_90:
    __break(1u);
LABEL_91:
    __break(1u);
  }

  else
  {
LABEL_2:
    while (1)
    {
      v17 = v16 + 1;
      if (__OFADD__(v16, 1))
      {
        break;
      }

      if (v17 >= v6)
      {
      }

      v7 = *(v11 + 8 * v17);
      ++v16;
      if (v7)
      {
        v16 = v17;
        goto LABEL_6;
      }
    }
  }

  __break(1u);
LABEL_93:
  __break(1u);
LABEL_94:
  __break(1u);
LABEL_95:
  __break(1u);
LABEL_96:
  __break(1u);
LABEL_97:
  result = sub_21AF09E7C();
  __break(1u);
  return result;
}

void sub_21AEE80E8(__int128 **a1, uint64_t a2, uint64_t a3, int a4, int a5)
{
  HIDWORD(v144) = a5;
  LODWORD(v151) = a4;
  v7 = a3;
  v10 = *(a3 + 64);
  v145 = a3 + 64;
  v11 = *(a3 + 32);
  sub_21AED1A7C();
  v14 = v13 & v12;
  v16 = (v15 + 63) >> 6;

  v17 = 0;
  v150 = a1;
  v146 = v16;
  v147 = v7;
  do
  {
LABEL_2:
    if (!v14)
    {
      do
      {
        v18 = v17 + 1;
        if (__OFADD__(v17, 1))
        {
          goto LABEL_71;
        }

        if (v18 >= v16)
        {

          if ((v144 & 0x100000000) == 0)
          {
            sub_21AEEA100();
            return;
          }

          v101 = (*a1 + 4);
          v102 = *(*a1 + 32);
          sub_21AEE9E14();
          sub_21AEEA040();

          v103 = 0;
          if (v6)
          {
            while (1)
            {
              v104 = v103;
LABEL_56:
              sub_21AEEA13C();
              sub_21AED1E50();
              v106 = *v105;
              v107 = v105[1];
              v110 = *(v109 + 8 * v108);
              sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
              v111 = sub_21AEC7C30();
              sub_21AEE9E44(v111, xmmword_21AF0C5D0);
              *&v159 = v113;
              *(&v159 + 1) = v112;

              MEMORY[0x21CEE4A70](v106, v107);

              v114 = v159;
              *(v111 + 56) = MEMORY[0x277D837D0];
              *(v111 + 32) = v114;
              sub_21AEC76AC();

              v115 = 0;
              v117 = v110 + 64;
              v116 = *(v110 + 64);
              v118 = *(v110 + 32);
              sub_21AEE9E14();
              v121 = v120 & v119;
              v123 = (v122 + 63) >> 6;
              if ((v120 & v119) == 0)
              {
                goto LABEL_58;
              }

              do
              {
LABEL_62:
                v121 &= v121 - 1;
                sub_21AED1E50();
                v126 = *v125;
                v127 = v125[1];
                v130 = (v129 + (v128 << 6));
                v131 = v130[1];
                v159 = *v130;
                v160 = v131;
                v132 = v130[3];
                v161 = v130[2];
                v162 = v132;
                v133 = sub_21AEC7C30();
                sub_21AEC7A14(v133, xmmword_21AF0C5D0);
                v163 = 0;
                v164 = v134;

                sub_21AF09C5C();

                sub_21AEE9F28();
                v163 = v135;
                sub_21AEE9E80();
                v164 = v136;
                MEMORY[0x21CEE4A70](v126, v127);

                sub_21AEEA120();
                v137 = sub_21AEEF64C();
                MEMORY[0x21CEE4A70](v137);

                v138 = v163;
                v139 = v164;
                v133[3].n128_u64[1] = MEMORY[0x277D837D0];
                v133[2].n128_u64[0] = v138;
                v133[2].n128_u64[1] = v139;
                sub_21AEC76AC();
              }

              while (v121);
              while (1)
              {
LABEL_58:
                v124 = v115 + 1;
                if (__OFADD__(v115, 1))
                {
                  goto LABEL_70;
                }

                if (v124 >= v123)
                {
                  break;
                }

                v121 = *(v117 + 8 * v124);
                ++v115;
                if (v121)
                {
                  v115 = v124;
                  goto LABEL_62;
                }
              }

              v103 = v104;
            }
          }

          do
          {
            v104 = v103 + 1;
            if (__OFADD__(v103, 1))
            {
              goto LABEL_74;
            }

            if (v104 >= v5)
            {

              sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
              *(sub_21AEC7C30() + 16) = xmmword_21AF0C5D0;
              sub_21AEC7BD0();
              v140[7] = MEMORY[0x277D837D0];
              v140[4] = 0xD00000000000003CLL;
              v140[5] = v141;
              sub_21AEC76AC();
              sub_21AEEA100();

              return;
            }

            ++v103;
          }

          while (!*(v101 + 8 * v104));
          goto LABEL_56;
        }

        v14 = *(v145 + 8 * v18);
        ++v17;
      }

      while (!v14);
      v17 = v18;
    }

    v19 = __clz(__rbit64(v14));
    v14 &= v14 - 1;
    v20 = v19 | (v17 << 6);
    v5 = *(*(v7 + 56) + 8 * v20);
    v21 = *(v5 + 2);
  }

  while (!v21);
  v148 = v14;
  v149 = v17;
  v22 = (*(v7 + 48) + 16 * v20);
  v158 = *v22;
  v154 = v22[1];

  v155 = 0;
  v152 = v21;
  v153 = v5;
  v23 = v5 + 5;
  v24 = v5 + 5;
  do
  {
    if (*(a2 + 16))
    {
      v25 = *(v24 - 1);
      v26 = *v24;

      v27 = sub_21AED0594();
      v29 = v28;

      if (v29)
      {
        v30 = *(*(a2 + 56) + 8 * v27);
        v31 = __OFADD__(v155, v30);
        v155 += v30;
        if (v31)
        {
          goto LABEL_72;
        }
      }
    }

    v24 += 2;
    --v21;
  }

  while (v21);
  v32 = 0;
  v33 = v155;
  v34 = v152;
  v6 = v153;
  while (v32 < *(v6 + 16))
  {
    v36 = *(v23 - 1);
    v35 = *v23;
    v37 = *(a2 + 16);

    if (v37)
    {
      sub_21AEE9FB8();
      v38 = sub_21AED0594();
      if (v39)
      {
        *(*(a2 + 56) + 8 * v38);
      }

      if (*(a2 + 16))
      {
        sub_21AEE9FB8();
        v40 = sub_21AED0594();
        if (v41)
        {
          if (v155)
          {
            v42 = *(*(a2 + 56) + 8 * v40) / v33;
          }
        }
      }
    }

    v5 = *a1;
    if (*(*a1 + 2))
    {
      v43 = sub_21AED0594();
      if (v44)
      {
        v45 = *(*(v5 + 7) + 8 * v43);
        v46 = *(v45 + 16);

        if (v46 && (sub_21AEE9FB8(), v47 = sub_21AED0594(), (v48 & 1) != 0))
        {
          v49 = *(v45 + 56) + (v47 << 6);
          v50 = *v49;
          v51 = *(v49 + 8);
          v52 = *(v49 + 16);
          v53 = *(v49 + 24);
          v54 = *(v49 + 48);
          v159 = *(v49 + 32);
          v160 = v54;
          swift_isUniquelyReferenced_nonNull_native();
          v163 = v45;
          sub_21AEE9FB8();
          v55 = sub_21AED0594();
          sub_21AEE9E6C(v55, v56);
          if (v31)
          {
            goto LABEL_76;
          }

          v59 = v57;
          v60 = v58;
          sub_21AEA7574(&qword_27CD3DF70, &qword_21AF0CE90);
          if (sub_21AF09D0C())
          {
            sub_21AEE9FB8();
            sub_21AED0594();
            sub_21AEEA050();
            a1 = v150;
            if (!v62)
            {
              goto LABEL_78;
            }

            v59 = v61;
            if ((v60 & 1) == 0)
            {
LABEL_31:
              v45 = v163;
              sub_21AEEA0AC();
              sub_21AEE9E30(v63);
              v65 = (v64 + 16 * v59);
              *v65 = v36;
              v65[1] = v35;
              sub_21AEEA008(v66, v67, v68, v69, v70, v71, v72, v73, v143, v144, v145, v146, v147, v148, v149, v150, v151, v152, v153, v154, v155, v156, v157, v158, v74, v159);
              sub_21AEE9FFC();
              if (v31)
              {
                goto LABEL_77;
              }

              *(v45 + 16) = v75;
              goto LABEL_37;
            }
          }

          else
          {
            a1 = v150;
            if ((v60 & 1) == 0)
            {
              goto LABEL_31;
            }
          }

          v45 = v163;
          sub_21AEEA008(v76, v77, v78, v79, v80, v81, v82, v83, v143, v144, v145, v146, v147, v148, v149, v150, v151, v152, v153, v154, v155, v156, v157, v158, v84, v159);
        }

        else
        {
        }

LABEL_37:

        v85 = *a1;
        swift_isUniquelyReferenced_nonNull_native();
        *&v159 = *a1;
        v86 = v159;
        sub_21AED0594();
        v87 = *(v86 + 16);
        sub_21AED1B64();
        if (__OFADD__(v90, v91))
        {
          goto LABEL_73;
        }

        v92 = v88;
        v93 = v89;
        sub_21AEA7574(&qword_27CD3D940, &qword_21AF0D3C0);
        v5 = &v159;
        if (sub_21AF09D0C())
        {
          v5 = v159;
          v94 = v154;
          sub_21AED0594();
          sub_21AED1C04();
          if (!v62)
          {
            goto LABEL_78;
          }

          v92 = v95;
        }

        else
        {
          v94 = v154;
        }

        v96 = v159;
        if (v93)
        {
          v97 = *(v159 + 56);
          v5 = *(v97 + 8 * v92);
          *(v97 + 8 * v92) = v45;
        }

        else
        {
          sub_21AED1AA8(v159 + 8 * (v92 >> 6));
          v98 = (*(v96 + 6) + 16 * v92);
          *v98 = v158;
          v98[1] = v94;
          *(*(v96 + 7) + 8 * v92) = v45;
          v99 = *(v96 + 2);
          v31 = __OFADD__(v99, 1);
          v100 = v99 + 1;
          if (v31)
          {
            goto LABEL_75;
          }

          *(v96 + 2) = v100;
        }

        *a1 = v96;
        v34 = v152;
        v6 = v153;
        goto LABEL_48;
      }
    }

LABEL_48:
    ++v32;
    v23 += 2;
    if (v34 == v32)
    {

      v16 = v146;
      v7 = v147;
      v14 = v148;
      v17 = v149;
      goto LABEL_2;
    }
  }

  __break(1u);
LABEL_70:
  __break(1u);
LABEL_71:
  __break(1u);
LABEL_72:
  __break(1u);
LABEL_73:
  __break(1u);
LABEL_74:
  __break(1u);
LABEL_75:
  __break(1u);
LABEL_76:
  __break(1u);
LABEL_77:
  __break(1u);
LABEL_78:
  sub_21AF09E7C();
  __break(1u);
}

void sub_21AEE888C(uint64_t a1)
{
  v2 = sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
  v3 = sub_21AEC7C30();
  sub_21AEC7A14(v3, xmmword_21AF0C5D0);
  sub_21AF09C5C();

  sub_21AEC7BD0();
  v82 = v4;
  v70 = *(a1 + 16);
  v5 = sub_21AF09E1C();
  MEMORY[0x21CEE4A70](v5);

  MEMORY[0x21CEE4A70](41, 0xE100000000000000);
  v3[3].n128_u64[1] = MEMORY[0x277D837D0];
  v3[2].n128_u64[0] = 0xD000000000000029;
  v3[2].n128_u64[1] = v82;
  sub_21AEC76AC();

  v6 = 0;
  v66 = "am Events (Total Events: ";
  v68 = a1 + 32;
  v62 = 0x800000021AF10040;
  v64 = "\nRaw Stream: Query Raw:";
  v76 = "\tPresented Assets";
  v80 = v2;
  while (v6 != v70)
  {
    v72 = v6;
    v7 = (v68 + 16 * v6);
    v8 = v7[1];
    v9 = *v7;
    v10 = sub_21AEC7C30();
    sub_21AEE9F3C(v10, v11, v12, v13, v14, v15, v16, v17, v62, v64, v66, v68, v70, v72, v75, v76, v78, v80, v18);
    v19 = v8;
    sub_21AF09C5C();
    MEMORY[0x21CEE4A70](0x617473656D69540ALL, 0xEC000000203A706DLL);
    sub_21AF099CC();
    MEMORY[0x21CEE4A70](0xD000000000000017, v67 | 0x8000000000000000);
    v20 = v19;
    v21 = sub_21AEE9B28(v20, &selRef_queryRaw);
    if (!v22)
    {
      goto LABEL_23;
    }

    MEMORY[0x21CEE4A70](v21);

    MEMORY[0x21CEE4A70](0xD000000000000012, v65 | 0x8000000000000000);
    v23 = [v20 queryEmbedding];
    sub_21AEA7B80(0, &unk_2812287F0, 0x277CCABB0);
    sub_21AF0988C();

    v24 = sub_21AEE9FB8();
    v25 = MEMORY[0x21CEE4B10](v24);
    v27 = v26;

    MEMORY[0x21CEE4A70](v25, v27);

    v28 = MEMORY[0x277D837D0];
    v10[3].n128_u64[1] = MEMORY[0x277D837D0];
    v10[2].n128_u64[0] = 0;
    v10[2].n128_u64[1] = 0xE000000000000000;
    sub_21AEC76AC();

    v29 = sub_21AEC7C30();
    sub_21AEE9F3C(v29, v30, v31, v32, v33, v34, v35, v36, v63, v65, v67, v69, v71, v73, v20, v77, v79, v81, v37);
    v38[7] = v28;
    v38[4] = 0xD000000000000011;
    v38[5] = v62;
    sub_21AEC76AC();

    v39 = [v75 presentedAssets];
    sub_21AEA7B80(0, &qword_27CD3D6C0, 0x277CF0FD0);
    v40 = sub_21AF0988C();

    if (v40 >> 62)
    {
      v41 = sub_21AF09DAC();
      if (!v41)
      {
        goto LABEL_18;
      }
    }

    else
    {
      v41 = *((v40 & 0xFFFFFFFFFFFFFF8) + 0x10);
      if (!v41)
      {
        goto LABEL_18;
      }
    }

    if (v41 < 1)
    {
      __break(1u);
LABEL_23:
      __break(1u);
      return;
    }

    v42 = 0;
    v78 = v40 & 0xC000000000000001;
    v43 = v40;
    do
    {
      if (v78)
      {
        v44 = MEMORY[0x21CEE4EF0](v42, v40);
      }

      else
      {
        v44 = *(v40 + 8 * v42 + 32);
      }

      v45 = v44;
      ++v42;
      v46 = sub_21AEACE24(v44);
      if (v47)
      {
        v48 = v46;
      }

      else
      {
        v48 = 0;
      }

      if (v47)
      {
        v49 = v47;
      }

      else
      {
        v49 = 0xE000000000000000;
      }

      v50 = sub_21AEC7C30();
      sub_21AEE9F3C(v50, v51, v52, v53, v54, v55, v56, v57, v62, v64, v66, v68, v70, v74, v75, v76, v78, v80, v58);
      sub_21AF09C5C();
      v59 = sub_21AEEA0E8(0x909u);
      MEMORY[0x21CEE4A70](v59, v60 | 0xEE00203A00000000);
      MEMORY[0x21CEE4A70](v48, v49);

      MEMORY[0x21CEE4A70](0x6944736F6309090ALL, 0xEF3A65636E617473);
      [v45 cosDistance];
      sub_21AF099CC();
      MEMORY[0x21CEE4A70](0xD000000000000011, v76 | 0x8000000000000000);
      [v45 rankingIndex];
      v61 = sub_21AF09E1C();
      MEMORY[0x21CEE4A70](v61);

      MEMORY[0x21CEE4A70](10, 0xE100000000000000);
      v50[3].n128_u64[1] = MEMORY[0x277D837D0];
      v50[2].n128_u64[0] = 0;
      v50[2].n128_u64[1] = 0xE000000000000000;
      sub_21AEC76AC();

      v40 = v43;
    }

    while (v41 != v42);
LABEL_18:
    v6 = v74 + 1;
  }
}

uint64_t sub_21AEE8DFC(uint64_t a1)
{
  sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
  v2 = sub_21AEC7C30();
  sub_21AEC7A14(v2, xmmword_21AF0C5D0);
  v19 = v3;
  sub_21AF09C5C();
  MEMORY[0x21CEE4A70](0xD000000000000036, 0x800000021AF10080);
  v4 = *(a1 + 16);
  v5 = sub_21AF09E1C();
  MEMORY[0x21CEE4A70](v5);

  v2[3].n128_u64[1] = MEMORY[0x277D837D0];
  v2[2].n128_u64[0] = 0;
  v2[2].n128_u64[1] = v19;
  sub_21AEC76AC();

  v7 = (a1 + 40);
  if (v4)
  {
    while (1)
    {
      v8 = *v7;
      v9 = *(v7 - 1);
      v10 = sub_21AEC7C30();
      sub_21AEC7A14(v10, xmmword_21AF0C5D0);
      v20 = v11;
      v12 = v8;
      sub_21AF09C5C();
      sub_21AEEA060();
      sub_21AF099CC();
      v13 = sub_21AEEA0E8(0x90Au);
      MEMORY[0x21CEE4A70](v13, v14 | 0xED00003A00000000);
      v15 = v12;
      result = sub_21AEE9B28(v15, &selRef_identifier);
      if (!v16)
      {
        break;
      }

      MEMORY[0x21CEE4A70](result);

      MEMORY[0x21CEE4A70](0x746573627553090ALL, 0xE90000000000003ALL);
      v17 = v15;
      result = sub_21AEE9B28(v17, &selRef_subset);
      if (!v18)
      {
        goto LABEL_7;
      }

      MEMORY[0x21CEE4A70](result);

      MEMORY[0x21CEE4A70](0x3A65707954090ALL, 0xE700000000000000);
      [v17 type];
      type metadata accessor for BMPhotosSearchType();
      sub_21AF09CFC();
      MEMORY[0x21CEE4A70](2570, 0xE200000000000000);
      v10[3].n128_u64[1] = MEMORY[0x277D837D0];
      v10[2].n128_u64[0] = 0;
      v10[2].n128_u64[1] = v20;
      sub_21AEC76AC();

      v7 += 2;
      if (!--v4)
      {
        return result;
      }
    }

    __break(1u);
LABEL_7:
    __break(1u);
  }

  return result;
}

void sub_21AEE90B0()
{
  v1 = v0;
  v2 = sub_21AF093FC();
  v3 = sub_21AEA7C90(v2);
  v5 = v4;
  v7 = *(v6 + 64);
  v8 = MEMORY[0x28223BE20](v3);
  v10 = &v58 - ((v9 + 15) & 0xFFFFFFFFFFFFFFF0);
  MEMORY[0x28223BE20](v8);
  sub_21AF093EC();
  sub_21AF0938C();
  v11 = *(v5 + 8);
  v11(v10, v2);
  sub_21AF0936C();
  v13 = v12;
  v14 = sub_21AEB3974();
  (v11)(v14);
  v15 = 0;
  v16 = v13 + 2.0;
  v65 = v1;
  v17 = *(v1 + OBJC_IVAR____TtC6AeroML34AMLPhotosSearchBiomeMetricsUtility_clickedPhotoIds);
  v18 = *(v17 + 16);
  v19 = (v17 + 40);
  while (v18 != v15)
  {
    if (v15 >= *(v17 + 16))
    {
LABEL_24:
      __break(1u);
      goto LABEL_25;
    }

    v21 = *(v19 - 1);
    v20 = *v19;
    v22 = objc_allocWithZone(MEMORY[0x277CF13F8]);

    v23 = sub_21AEE96CC(v21, v20, 0xD000000000000019, 0x800000021AF0F840, 1);
    v24 = sub_21AEE5A10();
    v25 = [v24 source];

    [v25 sendEvent:v23 timestamp:v16];
    if (v15)
    {
      v26 = 30.0;
    }

    else
    {
      v26 = 1.0;
    }

    v16 = v16 + v26;
    v19 += 2;
    ++v15;
  }

  v64 = *(v65 + OBJC_IVAR____TtC6AeroML34AMLPhotosSearchBiomeMetricsUtility_sessionAssetUUIDs);
  v63 = *(v64 + 16);
  if (!v63)
  {
    return;
  }

  v27 = 0;
  v28 = *(v65 + OBJC_IVAR____TtC6AeroML34AMLPhotosSearchBiomeMetricsUtility_cosDistancesAsset);
  v61 = v64 + 32;
  v62 = v28;
  v59 = "Events (Total Events: ";
  v60 = v28 + 32;
  v29 = MEMORY[0x277D84F90];
  v58 = xmmword_21AF0C5D0;
  while (v27 < *(v64 + 16))
  {
    v30 = *(v61 + 8 * v27);
    v68 = v29;
    if (v27 >= *(v62 + 16))
    {
      goto LABEL_26;
    }

    v65 = v27 + 1;
    v31 = *(v60 + 8 * v27);
    v32 = *(v30 + 16);

    v33 = 0;
    v34 = (v30 + 40);
    while (v32 != v33)
    {
      if (v33 >= *(v30 + 16))
      {
        __break(1u);
LABEL_23:
        __break(1u);
        goto LABEL_24;
      }

      v35 = *(v34 - 1);
      v36 = *v34;

      v37 = sub_21AF099EC();
      if (v33 >= *(v31 + 16))
      {
        goto LABEL_23;
      }

      v38 = v37;
      v39 = *(v31 + 8 * v33 + 32);
      v40 = sub_21AF099AC();
      v41 = objc_allocWithZone(MEMORY[0x277CF0FD0]);
      v42 = sub_21AEE9774(v35, v36, v38, v40);
      MEMORY[0x21CEE4AD0]();
      if (*((v68 & 0xFFFFFFFFFFFFFF8) + 0x10) >= *((v68 & 0xFFFFFFFFFFFFFF8) + 0x18) >> 1)
      {
        sub_21AF098CC();
      }

      sub_21AF0991C();

      v34 += 2;
      ++v33;
    }

    if (v27 == 3)
    {
      goto LABEL_27;
    }

    v43 = &unk_282C80B40 + 16 * v27;
    v44 = *(v43 + 4);
    v45 = *(v43 + 5);
    v46 = objc_allocWithZone(MEMORY[0x277CF0FC8]);

    v29 = MEMORY[0x277D84F90];
    v47 = sub_21AEE97FC(v44, v45);
    sub_21AEA7574(&qword_27CD3D6E8, &qword_21AF0C630);
    v48 = sub_21AEC7C30();
    sub_21AEC7A14(v48, v58);
    v66 = 0;
    v67 = v49;
    sub_21AF09C5C();
    sub_21AEEA060();
    sub_21AF099CC();
    MEMORY[0x21CEE4A70](0xD000000000000011, v59 | 0x8000000000000000);
    v50 = [v47 description];
    v51 = sub_21AF097CC();
    v53 = v52;

    MEMORY[0x21CEE4A70](v51, v53);

    v54 = v66;
    v55 = v67;
    v48[3].n128_u64[1] = MEMORY[0x277D837D0];
    v48[2].n128_u64[0] = v54;
    v48[2].n128_u64[1] = v55;
    sub_21AEC76AC();

    v56 = sub_21AEE5988();
    v57 = [v56 source];

    [v57 sendEvent:v47 timestamp:v13];
    v13 = v13 + 30.0;
    v27 = v65;
    if (v65 == v63)
    {
      return;
    }
  }

LABEL_25:
  __break(1u);
LABEL_26:
  __break(1u);
LABEL_27:
  __break(1u);
}

void sub_21AEE9614()
{
  sub_21AEE6514();

  sub_21AEE90B0();
}

id AMLPhotosSearchBiomeMetricsUtility.__deallocating_deinit()
{
  v2.receiver = v0;
  v2.super_class = type metadata accessor for AMLPhotosSearchBiomeMetricsUtility();
  return objc_msgSendSuper2(&v2, sel_dealloc);
}

id sub_21AEE96CC(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  if (!a2)
  {
    v8 = 0;
    if (a4)
    {
      goto LABEL_3;
    }

LABEL_5:
    v9 = 0;
    goto LABEL_6;
  }

  v8 = sub_21AF097BC();

  if (!a4)
  {
    goto LABEL_5;
  }

LABEL_3:
  v9 = sub_21AF097BC();

LABEL_6:
  v10 = [v5 initWithIdentifier:v8 subset:v9 type:a5];

  return v10;
}

id sub_21AEE9774(uint64_t a1, uint64_t a2, void *a3, void *a4)
{
  v5 = v4;
  if (a2)
  {
    v8 = sub_21AF097BC();
  }

  else
  {
    v8 = 0;
  }

  v9 = [v5 initWithAssetUUID:v8 rankingIndex:a3 cosDistance:a4];

  return v9;
}

id sub_21AEE97FC(uint64_t a1, uint64_t a2)
{
  if (a2)
  {
    v3 = sub_21AF097BC();
  }

  else
  {
    v3 = 0;
  }

  sub_21AEA7B80(0, &unk_2812287F0, 0x277CCABB0);
  v4 = sub_21AF0987C();

  sub_21AEA7B80(0, &qword_27CD3D6C0, 0x277CF0FD0);
  v5 = sub_21AF0987C();

  v6 = [v2 initWithQueryRaw:v3 queryEmbedding:v4 presentedAssets:v5];

  return v6;
}

uint64_t sub_21AEE98E0(uint64_t (*a1)(uint64_t, uint64_t, uint64_t, uint64_t))
{
  v3 = *v1;
  result = swift_isUniquelyReferenced_nonNull_native();
  *v1 = v3;
  if (!result)
  {
    result = a1(result, *(v3 + 16) + 1, 1, v3);
    *v1 = result;
  }

  return result;
}

uint64_t sub_21AEE993C(uint64_t a1, uint64_t a2)
{
  v2 = *(a2 + 40);
  *(a1 + 32) = *(a2 + 32);
  *(a1 + 40) = v2;
}

uint64_t sub_21AEE9974(uint64_t result, uint64_t (*a2)(BOOL))
{
  v3 = *(*v2 + 24);
  if (result + 1 > (v3 >> 1))
  {
    result = a2(v3 > 1);
    *v2 = result;
  }

  return result;
}

uint64_t sub_21AEE99BC()
{
  v1 = sub_21AF0925C();
  v2 = *(v1 - 8);
  v3 = *(v2 + 80);
  v4 = (v3 + 16) & ~v3;
  v5 = (*(v2 + 64) + v4 + 7) & 0xFFFFFFFFFFFFFFF8;
  (*(v2 + 8))(v0 + v4, v1);
  v6 = *(v0 + v5);

  return MEMORY[0x2821FE8E8](v0, v5 + 8, v3 | 7);
}

void sub_21AEE9A78()
{
  v1 = *(sub_21AF0925C() - 8);
  v2 = *(v0 + ((*(v1 + 64) + ((*(v1 + 80) + 16) & ~*(v1 + 80)) + 7) & 0xFFFFFFFFFFFFFFF8));
  sub_21AEE602C();
}

uint64_t sub_21AEE9B28(void *a1, SEL *a2)
{
  v3 = [a1 *a2];

  if (!v3)
  {
    return 0;
  }

  v4 = sub_21AF097CC();

  return v4;
}

void sub_21AEE9EA0()
{
  *(v2 - 112) = v0;
  *(v2 - 104) = v1;
  *(v2 - 144) = MEMORY[0x277D85DD0];
  *(v2 - 136) = v3;
}

uint64_t sub_21AEE9EC8(uint64_t result)
{
  *(v2 - 112) = v1;
  *(v2 - 104) = 0;
  v3 = MEMORY[0x277D85DD0];
  *(v2 - 152) = result;
  *(v2 - 144) = v3;
  return result;
}

__n128 sub_21AEE9F3C(__n128 *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, __n128 a19)
{
  result = a19;
  a1[1] = a19;
  return result;
}

__n128 sub_21AEE9F48(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, __int128 a29, __int128 a30, __n128 a31)
{
  v35 = *(v31 + 56) + (v32 << 6);
  *v35 = a29;
  *(v35 + 16) = a30;
  result = a31;
  *(v35 + 32) = a31;
  *(v35 + 48) = v34;
  *(v35 + 56) = v33;
  return result;
}

uint64_t sub_21AEE9F68()
{

  return sub_21AF097BC();
}

uint64_t sub_21AEE9F98()
{

  return sub_21AF09D0C();
}

__n128 sub_21AEEA008(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, __n128 a25, __int128 a26)
{
  v32 = *(v26 + 56) + (v27 << 6);
  *v32 = v31;
  *(v32 + 8) = v30;
  *(v32 + 16) = v29;
  *(v32 + 24) = v28;
  result = a25;
  *(v32 + 32) = a25;
  *(v32 + 48) = a26;
  return result;
}

void sub_21AEEA024()
{
  *(v1 + 16) = v3;
  v5 = v1 + 16 * v0;
  *(v5 + 32) = v4;
  *(v5 + 40) = v2;
}

void sub_21AEEA060()
{

  JUMPOUT(0x21CEE4A70);
}

void sub_21AEEA120()
{

  JUMPOUT(0x21CEE4A70);
}

__n128 sub_21AEEA150@<Q0>(uint64_t a1@<X8>)
{
  result = *a1;
  v2 = *(a1 + 16);
  return result;
}

unint64_t sub_21AEEA174()
{

  return sub_21AED0608(v0);
}

uint64_t sub_21AEEA194(uint64_t a1, uint64_t a2, int a3)
{
  *(v3 - 164) = a3;

  return sub_21AF0925C();
}

uint64_t sub_21AEEA1B4()
{

  return swift_beginAccess();
}

uint64_t sub_21AEEA1D4()
{

  return swift_unknownObjectRelease();
}

uint64_t dispatch thunk of AMLCandidateFeatureProvider.process(context:candidateWithFeatures:)(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  sub_21AEEA430(a1, a2, a3, a4);
  v12 = v5 + *v5;
  v7 = *(v6 + 4);
  v8 = swift_task_alloc();
  *(v4 + 16) = v8;
  *v8 = v4;
  v9 = sub_21AEEA458(v8);

  return v10(v9);
}

uint64_t dispatch thunk of AMLBatchCandidateFeatureProvider.process(context:candidatesWithFeatures:)(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  sub_21AEEA430(a1, a2, a3, a4);
  v12 = v5 + *v5;
  v7 = *(v6 + 4);
  v8 = swift_task_alloc();
  *(v4 + 16) = v8;
  *v8 = v4;
  v9 = sub_21AEEA458(v8);

  return v10(v9);
}

uint64_t sub_21AEEA430(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  result = a4 + 48;
  v5 = *(a4 + 48);
  return result;
}

uint64_t AMLCandidatesWithSourceFeatures.candidates.setter(uint64_t a1)
{
  v3 = *v1;

  *v1 = a1;
  return result;
}

uint64_t AMLCandidatesWithSourceFeatures.features.setter(uint64_t a1)
{
  v3 = *(v1 + 8);
  result = swift_unknownObjectRelease();
  *(v1 + 8) = a1;
  return result;
}

uint64_t AMLCandidatesWithSourceFeatures.init(candidates:features:)@<X0>(uint64_t result@<X0>, uint64_t a2@<X1>, void *a3@<X8>)
{
  *a3 = result;
  a3[1] = a2;
  return result;
}

uint64_t sub_21AEEA528()
{
  GenericValueMetadataWithLayoutString = swift_cvw_allocateGenericValueMetadataWithLayoutString();
  swift_cvw_instantiateLayoutString();
  return GenericValueMetadataWithLayoutString;
}

__n128 sub_21AEEA570(__n128 *a1, __n128 *a2)
{
  result = *a2;
  *a1 = *a2;
  return result;
}

uint64_t sub_21AEEA57C(uint64_t *a1, int a2)
{
  if (a2)
  {
    if (a2 < 0 && *(a1 + 16))
    {
      LODWORD(v2) = *a1 + 0x7FFFFFFF;
    }

    else
    {
      v2 = *a1;
      if (*a1 >= 0xFFFFFFFF)
      {
        LODWORD(v2) = -1;
      }
    }
  }

  else
  {
    LODWORD(v2) = -1;
  }

  return (v2 + 1);
}

uint64_t sub_21AEEA5BC(uint64_t result, int a2, int a3)
{
  if (a2 < 0)
  {
    *result = a2 & 0x7FFFFFFF;
    *(result + 8) = 0;
    if (a3 < 0)
    {
      *(result + 16) = 1;
    }
  }

  else
  {
    if ((a3 & 0x80000000) == 0)
    {
      if (!a2)
      {
        return result;
      }

LABEL_8:
      *result = (a2 - 1);
      return result;
    }

    *(result + 16) = 0;
    if (a2)
    {
      goto LABEL_8;
    }
  }

  return result;
}

uint64_t AMLCandidatePipelineIdentifier.__allocating_init(name:)(uint64_t a1, unint64_t a2)
{
  v4 = swift_allocObject();
  AMLCandidatePipelineIdentifier.init(name:)(a1, a2);
  return v4;
}

uint64_t *AMLCandidatePipelineIdentifier.init(name:)(uint64_t a1, unint64_t a2)
{
  v5 = *v2;
  type metadata accessor for AMLComponentIdentifier();
  if (sub_21AEEC318(a1, a2))
  {
    v2[2] = 0xD000000000000011;
    v2[3] = 0x800000021AF10230;
    v2[4] = a1;
    v2[5] = a2;
  }

  else
  {
    sub_21AF09C5C();

    MEMORY[0x21CEE4A70](a1, a2);

    sub_21AEA7E80();
    swift_allocError();
    *v6 = 0xD000000000000026;
    *(v6 + 8) = 0x800000021AF10200;
    *(v6 + 16) = 0;
    swift_willThrow();
    swift_deallocPartialClassInstance();
  }

  return v2;
}

uint64_t AMLCandidatePipelineIdentifier.__deallocating_deinit()
{
  v0 = AMLComponentIdentifier.deinit();

  return MEMORY[0x2821FE8D8](v0, 48, 7);
}

uint64_t getEnumTagSinglePayload for AMLConstants(unsigned int *a1, int a2)
{
  if (!a2)
  {
    return 0;
  }

  if ((a2 + 1) >= 0x10000)
  {
    v2 = 4;
  }

  else
  {
    v2 = 2;
  }

  if ((a2 + 1) < 0x100)
  {
    v3 = 1;
  }

  else
  {
    v3 = v2;
  }

  if (v3 == 4)
  {
    return *a1;
  }

  if (v3 == 2)
  {
    return *a1;
  }

  return *a1;
}

_BYTE *storeEnumTagSinglePayload for AMLConstants(_BYTE *result, int a2, int a3)
{
  if ((a3 + 1) >= 0x10000)
  {
    v3 = 4;
  }

  else
  {
    v3 = 2;
  }

  if ((a3 + 1) < 0x100)
  {
    v4 = 1;
  }

  else
  {
    v4 = v3;
  }

  if (a3)
  {
    v5 = v4;
  }

  else
  {
    v5 = 0;
  }

  if (a2)
  {
    switch(v5)
    {
      case 1:
        *result = a2;
        break;
      case 2:
        *result = a2;
        break;
      case 3:
        goto LABEL_19;
      case 4:
        *result = a2;
        break;
      default:
        return result;
    }
  }

  else
  {
    switch(v5)
    {
      case 1:
        *result = 0;
        break;
      case 2:
        *result = 0;
        break;
      case 3:
LABEL_19:
        __break(1u);
        break;
      case 4:
        *result = 0;
        break;
      default:
        return result;
    }
  }

  return result;
}

uint64_t sub_21AEEA96C()
{
  v0 = sub_21AF096CC();
  sub_21AEA7A3C(v0, qword_2812288F8);
  sub_21AEA7958(v0, qword_2812288F8);
  return sub_21AF096BC();
}

uint64_t sub_21AEEA9EC()
{
  sub_21AEEAB60();
  result = sub_21AF09B6C();
  qword_281228910 = result;
  return result;
}

uint64_t sub_21AEEAA54()
{
  v0 = sub_21AF0969C();
  sub_21AEA7A3C(v0, qword_281228918);
  sub_21AEA7958(v0, qword_281228918);
  if (qword_2812288D0 != -1)
  {
    swift_once();
  }

  v1 = qword_281228910;
  return sub_21AF0968C();
}

uint64_t sub_21AEEAAE0()
{
  v0 = sub_21AF096CC();
  sub_21AEA7A3C(v0, qword_27CD3EBA0);
  sub_21AEA7958(v0, qword_27CD3EBA0);
  return sub_21AF096BC();
}

unint64_t sub_21AEEAB60()
{
  result = qword_2812287E8;
  if (!qword_2812287E8)
  {
    objc_opt_self();
    result = swift_getObjCClassMetadata();
    atomic_store(result, &qword_2812287E8);
  }

  return result;
}

uint64_t AMLCandidatePipeline.process(context:)(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v4[43] = a3;
  v4[44] = v3;
  v4[41] = a1;
  v4[42] = a2;
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  v4[45] = AssociatedTypeWitness;
  sub_21AEEC2C8(AssociatedTypeWitness);
  v4[46] = v6;
  v8 = *(v7 + 64) + 15;
  v4[47] = swift_task_alloc();
  v4[48] = swift_task_alloc();
  v4[49] = swift_task_alloc();
  v9 = sub_21AEEC2F8();
  v4[50] = v9;
  sub_21AEEC2C8(v9);
  v4[51] = v10;
  v12 = *(v11 + 64) + 15;
  v4[52] = swift_task_alloc();
  v13 = sub_21AEEC2F8();
  v4[53] = v13;
  sub_21AEEC2C8(v13);
  v4[54] = v14;
  v16 = *(v15 + 64) + 15;
  v4[55] = swift_task_alloc();

  return MEMORY[0x2822009F8](sub_21AEEAD48, 0, 0);
}

void sub_21AEEAD48()
{
  v1 = *(v0 + 440);
  v2 = *(v0 + 416);
  v3 = *(v0 + 400);
  v4 = *(v0 + 352);
  v5 = *(v0 + 328);
  (*(*(v0 + 344) + 96))(*(v0 + 336), *(v0 + 344));
  AssociatedConformanceWitness = swift_getAssociatedConformanceWitness();
  (*(AssociatedConformanceWitness + 40))(v5, v3, AssociatedConformanceWitness);
  v10 = *(v0 + 424);
  v11 = *(v0 + 392);
  v12 = *(v0 + 352);
  v13 = *(v0 + 360);
  v15 = *(v0 + 336);
  v14 = *(v0 + 344);
  (*(*(v0 + 408) + 8))(*(v0 + 416), *(v0 + 400));
  v16 = *(v14 + 104);
  v16(v15, v14);
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  *(v0 + 208) = v10;
  *(v0 + 448) = AssociatedTypeWitness;
  *(v0 + 216) = AssociatedTypeWitness;
  swift_getExtendedExistentialTypeMetadata();
  if (swift_dynamicCast())
  {
    sub_21AE9641C((v0 + 56), v0 + 16);
    v19 = *(v0 + 48);
    sub_21AEAF9B0((v0 + 16), *(v0 + 40));
    sub_21AEEC2AC();
    v52 = v20 + *v20;
    v22 = *(v21 + 4);
    v23 = swift_task_alloc();
    *(v0 + 456) = v23;
    *v23 = v0;
    v23[1] = sub_21AEEB2E0;
    v24 = *(v0 + 440);
    sub_21AEE2A24();

    __asm { BRAA            X3, X16 }
  }

  v27 = *(v0 + 424);
  v28 = *(v0 + 352);
  v29 = *(v0 + 360);
  v30 = *(v0 + 384);
  v16(*(v0 + 336), *(v0 + 344));
  *(v0 + 224) = v27;
  *(v0 + 232) = AssociatedTypeWitness;
  swift_getExtendedExistentialTypeMetadata();
  if (swift_dynamicCast())
  {
    sub_21AE9641C((v0 + 136), v0 + 96);
    v31 = *(v0 + 128);
    sub_21AEAF9B0((v0 + 96), *(v0 + 120));
    sub_21AEEC2AC();
    v53 = v32 + *v32;
    v34 = *(v33 + 4);
    v35 = swift_task_alloc();
    *(v0 + 480) = v35;
    *v35 = v0;
    v35[1] = sub_21AEEB628;
    v36 = *(v0 + 440);
    sub_21AEE2A24();

    __asm { BRAA            X4, X16 }
  }

  v51 = *(v0 + 424);
  v54 = *(v0 + 440);
  v40 = *(v0 + 368);
  v39 = *(v0 + 376);
  v41 = *(v0 + 352);
  v49 = *(v0 + 360);
  v50 = *(v0 + 432);
  v42 = *(v0 + 336);
  v43 = *(v0 + 344);
  v44 = *(v0 + 328);
  sub_21AF09C5C();

  strcpy(v55, "<requestID: ");
  BYTE5(v55[1]) = 0;
  HIWORD(v55[1]) = -5120;
  v45 = (*(*(v43 + 8) + 56))(v44, v42);
  MEMORY[0x21CEE4A70](v45);

  MEMORY[0x21CEE4A70](0xD000000000000021, 0x800000021AF102A0);
  v16(v42, v43);
  swift_getDynamicType();
  (*(v40 + 8))(v39, v49);
  v46 = sub_21AF09F7C();
  MEMORY[0x21CEE4A70](v46);

  v47 = v55[1];
  sub_21AEA7E80();
  swift_allocError();
  *v48 = v55[0];
  *(v48 + 8) = v47;
  *(v48 + 16) = 1;
  swift_willThrow();
  (*(v50 + 8))(v54, v51);
  sub_21AEEC28C();

  v7 = *(v0 + 8);
  sub_21AEE2A24();

  __asm { BRAA            X1, X16 }
}

uint64_t sub_21AEEB2E0(uint64_t a1)
{
  v4 = *v2;
  sub_21AEEC2EC();
  *v5 = v4;
  v7 = *(v6 + 456);
  v8 = *v2;
  sub_21AEEC2EC();
  *v9 = v8;
  *(v4 + 464) = v1;

  if (v1)
  {
    v10 = sub_21AEEBAF8;
  }

  else
  {
    *(v4 + 472) = a1;
    v10 = sub_21AEEB400;
  }

  return MEMORY[0x2822009F8](v10, 0, 0);
}

uint64_t sub_21AEEB400()
{
  v1 = *(v0 + 464);
  v2 = *(v0 + 448);
  v3 = *(v0 + 432);
  v19 = *(v0 + 424);
  v20 = *(v0 + 440);
  v4 = *(v0 + 336);
  *(v0 + 312) = *(v0 + 472);
  v5 = swift_task_alloc();
  v21 = *(v0 + 344);
  *(v5 + 16) = v4;
  *(v5 + 24) = v21;
  v6 = sub_21AF0997C();
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  WitnessTable = swift_getWitnessTable();
  v10 = sub_21AED3450(sub_21AEEC1E0, v5, v6, AssociatedTypeWitness, MEMORY[0x277D84A98], WitnessTable, MEMORY[0x277D84AC0], v9);

  *(v0 + 320) = v10;
  v11 = swift_task_alloc();
  *(v11 + 16) = v4;
  *(v11 + 24) = v21;
  v12 = sub_21AF0997C();
  v13 = type metadata accessor for AMLCandidateWithFeatures();
  v14 = swift_getWitnessTable();
  sub_21AED3450(sub_21AEEC208, v11, v12, v13, MEMORY[0x277D84A98], v14, MEMORY[0x277D84AC0], v15);
  (*(v3 + 8))(v20, v19);

  sub_21AEA79F0((v0 + 16));
  sub_21AEEC28C();

  v16 = sub_21AEEC2D8();

  return v17(v16);
}

uint64_t sub_21AEEB628()
{
  v2 = *v1;
  sub_21AEEC2EC();
  *v4 = v3;
  v6 = *(v5 + 480);
  v7 = *v1;
  sub_21AEEC2EC();
  *v8 = v7;
  *(v9 + 488) = v0;

  if (v0)
  {
    v10 = sub_21AEEBBA8;
  }

  else
  {
    v10 = sub_21AEEB734;
  }

  return MEMORY[0x2822009F8](v10, 0, 0);
}

uint64_t sub_21AEEB734()
{
  v1 = *(v0 + 488);
  v2 = *(v0 + 448);
  v3 = *(v0 + 336);
  v4 = *(v0 + 248);
  *(v0 + 288) = *(v0 + 240);
  v5 = swift_task_alloc();
  v6 = *(v0 + 344);
  *(v5 + 16) = v3;
  *(v5 + 24) = v6;
  v7 = sub_21AF0997C();
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();

  WitnessTable = swift_getWitnessTable();
  v11 = sub_21AED3450(sub_21AEEBF78, v5, v7, AssociatedTypeWitness, MEMORY[0x277D84A98], WitnessTable, MEMORY[0x277D84AC0], v10);

  v33 = MEMORY[0x277D84F90];
  result = [v4 count];
  if (result < 0)
  {
    __break(1u);
  }

  else
  {
    v13 = result;
    if (result)
    {
      v14 = 0;
      do
      {
        v15 = [v4 featuresAtIndex_];
        MEMORY[0x21CEE4AD0]();
        if (*((v33 & 0xFFFFFFFFFFFFFF8) + 0x10) >= *((v33 & 0xFFFFFFFFFFFFFF8) + 0x18) >> 1)
        {
          sub_21AF098CC();
        }

        ++v14;
        sub_21AF0991C();
      }

      while (v13 != v14);
      v16 = v33;
    }

    else
    {
      v16 = MEMORY[0x277D84F90];
    }

    v30 = *(v0 + 432);
    v31 = *(v0 + 424);
    v32 = *(v0 + 440);
    *(v0 + 296) = v11;
    *(v0 + 304) = v16;
    v17 = sub_21AF0997C();
    v18 = sub_21AEA7574(&qword_27CD3DA28, &unk_21AF0D130);
    v19 = swift_getWitnessTable();
    v20 = sub_21AEEBFA0();
    v29 = *(v0 + 336);
    sub_21AF09E5C();

    v21 = *(v0 + 264);
    *(v0 + 272) = *(v0 + 256);
    *(v0 + 280) = v21;
    v22 = swift_task_alloc();
    *(v22 + 16) = v29;
    *(v0 + 176) = v17;
    *(v0 + 184) = v18;
    *(v0 + 192) = v19;
    *(v0 + 200) = v20;
    v23 = sub_21AF09C6C();
    v24 = type metadata accessor for AMLCandidateWithFeatures();
    v25 = swift_getWitnessTable();
    sub_21AEE0524(sub_21AEEC1C0, v22, v23, v24, MEMORY[0x277D84A98], v25, MEMORY[0x277D84AC0], v26);

    swift_unknownObjectRelease();

    (*(v30 + 8))(v32, v31);

    sub_21AEA79F0((v0 + 96));
    sub_21AEEC28C();

    v27 = sub_21AEEC2D8();

    return v28(v27);
  }

  return result;
}

uint64_t sub_21AEEBAF8()
{
  (*(v0[54] + 8))(v0[55], v0[53]);
  sub_21AEA79F0(v0 + 2);
  v1 = v0[58];
  sub_21AEEC28C();

  v2 = v0[1];

  return v2();
}

uint64_t sub_21AEEBBA8()
{
  (*(v0[54] + 8))(v0[55], v0[53]);
  sub_21AEA79F0(v0 + 12);
  v1 = v0[61];
  sub_21AEEC28C();

  v2 = v0[1];

  return v2();
}

uint64_t sub_21AEEBC58@<X0>(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  v6 = *(*(AssociatedTypeWitness - 8) + 64);
  MEMORY[0x28223BE20](AssociatedTypeWitness);
  v8 = v13 - v7;
  (*(v9 + 16))(v13 - v7, a1, AssociatedTypeWitness);
  sub_21AF0974C();
  v10 = objc_allocWithZone(MEMORY[0x277CBFED0]);
  v11 = sub_21AF07524();
  if (!v2)
  {
    return sub_21AEA8470(v8, v11, AssociatedTypeWitness, a2);
  }

  result = swift_unexpectedError();
  __break(1u);
  return result;
}

uint64_t sub_21AEEBDCC(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  v17[1] = a6;
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  v11 = *(AssociatedTypeWitness - 8);
  v12 = *(v11 + 64);
  MEMORY[0x28223BE20](AssociatedTypeWitness);
  v14 = v17 - v13;
  (*(a4 + 112))(a3, a4);
  AssociatedConformanceWitness = swift_getAssociatedConformanceWitness();
  (*(AssociatedConformanceWitness + 40))(a1, AssociatedTypeWitness, AssociatedConformanceWitness);
  if (!v6)
  {
    return (*(v11 + 8))(v14, AssociatedTypeWitness);
  }

  (*(v11 + 8))(v14, AssociatedTypeWitness);
  result = swift_unexpectedError();
  __break(1u);
  return result;
}

unint64_t sub_21AEEBFA0()
{
  result = qword_27CD3DA30;
  if (!qword_27CD3DA30)
  {
    sub_21AEAF7F0(&qword_27CD3DA28, &unk_21AF0D130);
    result = swift_getWitnessTable();
    atomic_store(result, &qword_27CD3DA30);
  }

  return result;
}

uint64_t sub_21AEEC004@<X0>(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  AssociatedTypeWitness = swift_getAssociatedTypeWitness();
  sub_21AEAF7F0(&unk_27CD3DE90, &unk_21AF0C440);
  TupleTypeMetadata2 = swift_getTupleTypeMetadata2();
  v6 = *(TupleTypeMetadata2 - 8);
  v7 = *(v6 + 64);
  v8 = MEMORY[0x28223BE20](TupleTypeMetadata2);
  v10 = v16 - ((v9 + 15) & 0xFFFFFFFFFFFFFFF0);
  MEMORY[0x28223BE20](v8);
  v12 = v16 - v11;
  v13 = *(v6 + 16);
  v13(v16 - v11, a1, TupleTypeMetadata2);
  v14 = *&v12[*(TupleTypeMetadata2 + 48)];
  swift_unknownObjectRelease();
  v13(v10, a1, TupleTypeMetadata2);
  sub_21AEA8470(v12, *&v10[*(TupleTypeMetadata2 + 48)], AssociatedTypeWitness, a2);
  return (*(*(AssociatedTypeWitness - 8) + 8))(v10, AssociatedTypeWitness);
}

uint64_t sub_21AEEC1C0@<X0>(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  v3 = *(v2 + 16);
  v4 = *(v2 + 24);
  return sub_21AEEC004(a1, a2);
}

uint64_t sub_21AEEC208@<X0>(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  v3 = *(v2 + 16);
  v4 = *(v2 + 24);
  return sub_21AEEBC58(a1, a2);
}

uint64_t sub_21AEEC28C()
{
  v2 = v0[55];
  v3 = v0[52];
  v5 = v0[48];
  v4 = v0[49];
  v6 = v0[47];
}

uint64_t sub_21AEEC2AC()
{
  result = v0 + 16;
  v2 = *(v0 + 16);
  return result;
}

uint64_t sub_21AEEC2F8()
{

  return swift_getAssociatedTypeWitness();
}

BOOL sub_21AEEC318(uint64_t a1, unint64_t a2)
{
  v4 = sub_21AEA7574(&qword_27CD3DB08, "rq");
  v5 = *(*(v4 - 8) + 64);
  MEMORY[0x28223BE20](v4 - 8);
  v7 = &v13 - v6;
  if (qword_27CD3D298 != -1)
  {
    swift_once();
  }

  v8 = sub_21AEA7574(&qword_27CD3DB10, &qword_21AF0D2A0);
  v9 = sub_21AEA7958(v8, qword_27CD3EBB8);
  sub_21AEEC580(v9, a1, a2);
  v10 = sub_21AEA7574(&qword_27CD3DB18, &qword_21AF0D2A8);
  v11 = sub_21AEA766C(v7, 1, v10);
  sub_21AEEC8BC(v7);
  return v11 != 1 && sub_21AF097FC() >= 3 && sub_21AF097FC() < 81;
}

uint64_t AMLComponentIdentifier.deinit()
{
  v1 = *(v0 + 24);

  v2 = *(v0 + 40);

  return v0;
}

uint64_t sub_21AEEC484()
{
  v4 = v0[2];
  v5 = v0[3];

  MEMORY[0x21CEE4A70](46, 0xE100000000000000);
  v2 = v0[4];
  v1 = v0[5];

  MEMORY[0x21CEE4A70](v2, v1);

  return v4;
}

uint64_t static AMLComponentIdentifier.== infix(_:_:)(void *a1, void *a2)
{
  v4 = a1[2] == a2[2] && a1[3] == a2[3];
  if (v4 || (v5 = sub_21AF09E4C(), result = 0, (v5 & 1) != 0))
  {
    if (a1[4] == a2[4] && a1[5] == a2[5])
    {
      return 1;
    }

    else
    {

      return sub_21AF09E4C();
    }
  }

  return result;
}

uint64_t sub_21AEEC580(uint64_t a1, uint64_t a2, unint64_t a3)
{
  v5 = sub_21AEA7574(&qword_27CD3DB10, &qword_21AF0D2A0);
  v6 = *(v5 - 8);
  v7 = *(v6 + 64);
  MEMORY[0x28223BE20](v5);
  v9 = &v11 - v8;
  sub_21AEEC928(sub_21AEEC924, 0, a2, a3);
  sub_21AEEC95C();
  sub_21AF095FC();
  sub_21AF0961C();
  (*(v6 + 8))(v9, v5);
}

uint64_t sub_21AEEC73C()
{
  v0 = sub_21AEA7574(&qword_27CD3DB10, &qword_21AF0D2A0);
  sub_21AEA7A3C(v0, qword_27CD3EBB8);
  sub_21AEA7958(v0, qword_27CD3EBB8);
  sub_21AEA7574(&unk_27CD3DB28, &qword_21AF0D2B0);
  return sub_21AF0960C();
}