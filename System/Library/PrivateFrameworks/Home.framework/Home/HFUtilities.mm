@interface HFUtilities
+ (BOOL)forceTestUtilityMode;
+ (BOOL)hasInternalDiagnostics;
+ (BOOL)invertCellTaps;
+ (BOOL)isAnIPad;
+ (BOOL)isAnIPhone;
+ (BOOL)isCloudPhotosOn;
+ (BOOL)isCurrentAccount2FAEnabled;
+ (BOOL)isHostProcessHCSTestApp;
+ (BOOL)isHostProcessProxControl;
+ (BOOL)isHostProcessProxViewService;
+ (BOOL)isInternalInstall;
+ (BOOL)isInternalTest;
+ (BOOL)isMonitoredInterfaceWifiOrEthernet;
+ (BOOL)isPressDemoModeEnabled;
+ (BOOL)isProxHandOffV2Config;
+ (BOOL)isRunningInStoreDemoMode;
+ (BOOL)isSiriForiCloudEnabled;
+ (BOOL)isUsingiCloud;
+ (BOOL)shouldHideBanners;
+ (BOOL)shouldShowFakeContentForPerformanceTesting;
+ (BOOL)shouldSuppressAllErrorsForDemo;
+ (BOOL)shouldUseControlCenterMaterials;
+ (BOOL)shouldUseProxHandOffMaterials;
+ (BOOL)showEducationTip;
+ (BOOL)supportsThreadService;
+ (BOOL)useMacIdiom;
+ (BOOL)wallpaperTransition;
+ (id)OAuthURLOverride;
+ (id)applicationSupportDirectoryURL;
+ (id)cachesDirectoryURL;
+ (id)comparatorWithSortedClasses:(id)classes secondaryComparator:(id)comparator;
+ (id)comparatorWithSortedObjects:(id)objects;
+ (id)dateOfLastRecommendationUIOpened;
+ (id)demoModeDirectoryURL;
+ (id)deviceAirDropIdentifier;
+ (id)documentsDirectoryURL;
+ (id)itemIdentifierForAccessories:(id)accessories;
+ (id)libraryDirectoryURL;
+ (id)narrowNoBreakSpaceString;
+ (id)networkSSID;
+ (id)preferredNameFromUserID:(id)d;
+ (id)sanitizeAutoGeneratedHomeKitName:(id)name;
+ (id)sanitizeUserEnteredHomeKitName:(id)name;
+ (id)sharedAnnouncementsDirectoryURL;
+ (id)sharedApplicationSupportDirectoryURL;
+ (id)sharedLibraryDirectoryURL;
+ (id)sharedUserDirectoryURL;
+ (id)sortedLockAccessoryArrayForSetup:(id)setup;
+ (id)uniqueHomeKitNameForName:(id)name allNames:(id)names;
+ (id)utilityLookupOverride;
+ (id)utilityOverride;
+ (id)voiceInfoFromSettingLanguageValue:(id)value;
+ (id)wallpaperURL;
+ (int64_t)gridCellTitleLabelMaxLineCount;
+ (int64_t)outputGenderFromString:(id)string;
+ (unint64_t)enabledPerformanceUpgrades;
+ (void)setDateOfLastRecommendationUIOpened:(id)opened;
+ (void)warmUpStaticPreferences;
@end

@implementation HFUtilities

+ (void)warmUpStaticPreferences
{
  [self enabledPerformanceUpgrades];
  [self isInternalInstall];
  [self isPressDemoModeEnabled];
  [self shouldSuppressAllErrorsForDemo];
  [self isRunningInStoreDemoMode];

  [self hasInternalDiagnostics];
}

+ (id)comparatorWithSortedClasses:(id)classes secondaryComparator:(id)comparator
{
  classesCopy = classes;
  comparatorCopy = comparator;
  v12[0] = MEMORY[0x277D85DD0];
  v12[1] = 3221225472;
  v12[2] = __63__HFUtilities_comparatorWithSortedClasses_secondaryComparator___block_invoke;
  v12[3] = &unk_277DF3E98;
  v13 = classesCopy;
  v14 = comparatorCopy;
  v7 = comparatorCopy;
  v8 = classesCopy;
  v9 = _Block_copy(v12);
  v10 = _Block_copy(v9);

  return v10;
}

uint64_t __63__HFUtilities_comparatorWithSortedClasses_secondaryComparator___block_invoke(uint64_t a1, void *a2, void *a3)
{
  v5 = a2;
  v6 = a3;
  v7 = [*(a1 + 32) indexOfObject:objc_opt_class()];
  v8 = [*(a1 + 32) indexOfObject:objc_opt_class()];
  if (v7 == v8)
  {
    v9 = *(a1 + 40);
    if (v9)
    {
      v10 = (*(v9 + 16))(v9, v5, v6);
    }

    else
    {
      v10 = 0;
    }
  }

  else
  {
    v11 = -1;
    if (v7 < v8)
    {
      v12 = -1;
    }

    else
    {
      v12 = 1;
    }

    if (v8 != 0x7FFFFFFFFFFFFFFFLL)
    {
      v11 = v12;
    }

    if (v7 == 0x7FFFFFFFFFFFFFFFLL)
    {
      v10 = 1;
    }

    else
    {
      v10 = v11;
    }
  }

  return v10;
}

+ (id)comparatorWithSortedObjects:(id)objects
{
  objectsCopy = objects;
  aBlock[0] = MEMORY[0x277D85DD0];
  aBlock[1] = 3221225472;
  aBlock[2] = __43__HFUtilities_comparatorWithSortedObjects___block_invoke;
  aBlock[3] = &unk_277DF3EC0;
  v9 = objectsCopy;
  v4 = objectsCopy;
  v5 = _Block_copy(aBlock);
  v6 = _Block_copy(v5);

  return v6;
}

uint64_t __43__HFUtilities_comparatorWithSortedObjects___block_invoke(uint64_t a1, uint64_t a2, void *a3)
{
  v5 = *(a1 + 32);
  v6 = a3;
  v7 = [v5 indexOfObject:a2];
  v8 = [*(a1 + 32) indexOfObject:v6];

  if (v7 == v8)
  {
    return 0;
  }

  result = -1;
  if (v7 != 0x7FFFFFFFFFFFFFFFLL)
  {
    if (v7 < v8)
    {
      v10 = -1;
    }

    else
    {
      v10 = 1;
    }

    if (v8 == 0x7FFFFFFFFFFFFFFFLL)
    {
      return 1;
    }

    else
    {
      return v10;
    }
  }

  return result;
}

+ (BOOL)isInternalInstall
{
  if (qword_280E02B08 != -1)
  {
    dispatch_once(&qword_280E02B08, &__block_literal_global_15);
  }

  return _MergedGlobals_215;
}

uint64_t __32__HFUtilities_isInternalInstall__block_invoke()
{
  result = MGGetBoolAnswer();
  _MergedGlobals_215 = result;
  if (result)
  {
    result = HFForceNonInternalInstallBehavior();
    if (result)
    {
      _MergedGlobals_215 = 0;
    }
  }

  return result;
}

+ (BOOL)isInternalTest
{
  processInfo = [MEMORY[0x277CCAC38] processInfo];
  environment = [processInfo environment];
  v4 = [environment objectForKeyedSubscript:@"UNIT_TEST"];

  if (v4)
  {
    LOBYTE(v5) = 1;
  }

  else
  {
    v10 = 0;
    v5 = NSClassFromString(&cfstr_Xctestprobe.isa);
    if (v5)
    {
      v6 = NSSelectorFromString(&cfstr_Istesting.isa);
      v7 = [(objc_class *)v5 methodSignatureForSelector:v6];
      v8 = [MEMORY[0x277CBEAE8] invocationWithMethodSignature:v7];
      [v8 setSelector:v6];
      [v8 invokeWithTarget:v5];
      [v8 getReturnValue:&v10];

      LOBYTE(v5) = v10;
    }
  }

  return v5 & 1;
}

+ (BOOL)hasInternalDiagnostics
{
  if (qword_280E02B10 != -1)
  {
    dispatch_once(&qword_280E02B10, &__block_literal_global_59);
  }

  return byte_280E02AF9;
}

void __37__HFUtilities_hasInternalDiagnostics__block_invoke()
{
  v3 = *MEMORY[0x277D85DE8];
  byte_280E02AF9 = os_variant_has_internal_diagnostics();
  v0 = HFLogForCategory(0);
  if (os_log_type_enabled(v0, OS_LOG_TYPE_INFO))
  {
    v2[0] = 67109120;
    v2[1] = byte_280E02AF9;
    _os_log_impl(&dword_20D9BF000, v0, OS_LOG_TYPE_INFO, "hasInternalDiagnostics: %{BOOL}d", v2, 8u);
  }

  v1 = *MEMORY[0x277D85DE8];
}

+ (BOOL)isAnIPhone
{
  v2 = MGGetStringAnswer();
  v3 = [v2 isEqualToString:@"iPhone"];

  return v3;
}

+ (BOOL)isMonitoredInterfaceWifiOrEthernet
{
  v15 = *MEMORY[0x277D85DE8];
  default_evaluator = nw_path_create_default_evaluator();
  v3 = nw_path_evaluator_copy_path();
  v4 = MEMORY[0x20F327280](v3, 1);
  v5 = MEMORY[0x20F327280](v3, 3);
  v6 = HFLogForCategory(0);
  if (os_log_type_enabled(v6, OS_LOG_TYPE_DEFAULT))
  {
    v9 = 136315650;
    v10 = "+[HFUtilities isMonitoredInterfaceWifiOrEthernet]";
    v11 = 1024;
    v12 = v4;
    v13 = 1024;
    v14 = v5;
    _os_log_impl(&dword_20D9BF000, v6, OS_LOG_TYPE_DEFAULT, "%s, isConnectedOverWiFi: %d, isConnectedOverEthernet: %d", &v9, 0x18u);
  }

  v7 = *MEMORY[0x277D85DE8];
  return (v4 | v5) & 1;
}

+ (BOOL)invertCellTaps
{
  if (qword_280E02B18 != -1)
  {
    dispatch_once(&qword_280E02B18, &__block_literal_global_71);
  }

  return byte_280E02AFA;
}

uint64_t __29__HFUtilities_invertCellTaps__block_invoke()
{
  result = CFPreferencesGetAppBooleanValue(@"invertCellTaps", @"com.apple.Home", 0);
  byte_280E02AFA = result != 0;
  return result;
}

+ (BOOL)wallpaperTransition
{
  if (qword_280E02B20 != -1)
  {
    dispatch_once(&qword_280E02B20, &__block_literal_global_76);
  }

  return byte_280E02AFB;
}

uint64_t __34__HFUtilities_wallpaperTransition__block_invoke()
{
  result = CFPreferencesGetAppBooleanValue(@"wallpaperTransition", @"com.apple.Home", 0);
  byte_280E02AFB = result != 0;
  return result;
}

+ (int64_t)gridCellTitleLabelMaxLineCount
{
  if (qword_280E02B30 != -1)
  {
    dispatch_once(&qword_280E02B30, &__block_literal_global_78);
  }

  return qword_280E02B28;
}

unint64_t __45__HFUtilities_gridCellTitleLabelMaxLineCount__block_invoke()
{
  result = CFPreferencesGetAppIntegerValue(@"gridCellTitleLabelMaxLineCount", @"com.apple.Home", 0);
  if (result <= 1)
  {
    v1 = 1;
  }

  else
  {
    v1 = result;
  }

  if (v1 <= 1)
  {
    v1 = 1;
  }

  qword_280E02B28 = v1;
  return result;
}

+ (BOOL)shouldHideBanners
{
  if (qword_280E02B38 != -1)
  {
    dispatch_once(&qword_280E02B38, &__block_literal_global_83);
  }

  return byte_280E02AFC;
}

uint64_t __32__HFUtilities_shouldHideBanners__block_invoke()
{
  result = CFPreferencesGetAppBooleanValue(@"hideBanners", @"com.apple.Home", 0);
  byte_280E02AFC = result != 0;
  return result;
}

+ (BOOL)isAnIPad
{
  currentDevice = [MEMORY[0x277D75418] currentDevice];
  v3 = [currentDevice userInterfaceIdiom] == 1;

  return v3;
}

+ (BOOL)useMacIdiom
{
  currentDevice = [MEMORY[0x277D75418] currentDevice];
  v3 = [currentDevice userInterfaceIdiom] == 5;

  return v3;
}

+ (BOOL)supportsThreadService
{
  if ((_os_feature_enabled_impl() & 1) != 0 || (AppBooleanValue = CFPreferencesGetAppBooleanValue(@"MatteriPhoneOnlyPairingEnabled", @"/Library/Managed Preferences/mobile/com.apple.homed.plist", 0)) != 0)
  {

    LOBYTE(AppBooleanValue) = MGGetBoolAnswer();
  }

  return AppBooleanValue;
}

+ (BOOL)isPressDemoModeEnabled
{
  if (qword_280E02B40 != -1)
  {
    dispatch_once(&qword_280E02B40, &__block_literal_global_100);
  }

  return byte_280E02AFD;
}

uint64_t __37__HFUtilities_isPressDemoModeEnabled__block_invoke()
{
  result = CFPreferencesGetAppBooleanValue(@"HFEnablePressDemoModeKey", @"com.apple.Home", 0);
  byte_280E02AFD = result != 0;
  return result;
}

+ (unint64_t)enabledPerformanceUpgrades
{
  if (qword_280E02B50 != -1)
  {
    dispatch_once(&qword_280E02B50, &__block_literal_global_105);
  }

  return qword_280E02B48;
}

CFIndex __41__HFUtilities_enabledPerformanceUpgrades__block_invoke()
{
  result = CFPreferencesGetAppIntegerValue(@"HFEnabledPerfUpgradesKey", @"com.apple.Home", 0);
  qword_280E02B48 = result;
  return result;
}

+ (BOOL)shouldSuppressAllErrorsForDemo
{
  if (qword_280E02B58 != -1)
  {
    dispatch_once(&qword_280E02B58, &__block_literal_global_107);
  }

  if (byte_280E02AFE)
  {
    return 1;
  }

  return [self isPressDemoModeEnabled];
}

uint64_t __45__HFUtilities_shouldSuppressAllErrorsForDemo__block_invoke()
{
  result = CFPreferencesGetAppBooleanValue(@"HFSuppressAllErrorsForDemoKey", @"com.apple.Home", 0);
  byte_280E02AFE = result != 0;
  return result;
}

+ (BOOL)shouldShowFakeContentForPerformanceTesting
{
  if ([self isInternalInstall])
  {
    if (qword_280E02B60 != -1)
    {
      dispatch_once(&qword_280E02B60, &__block_literal_global_112);
    }

    v2 = byte_280E02AFF;
  }

  else
  {
    v2 = 0;
  }

  return v2 & 1;
}

uint64_t __57__HFUtilities_shouldShowFakeContentForPerformanceTesting__block_invoke()
{
  result = CFPreferencesGetAppBooleanValue(@"HFEnableShowFakeContentForPerformanceKey", @"com.apple.Home", 0);
  byte_280E02AFF = result != 0;
  return result;
}

+ (BOOL)isRunningInStoreDemoMode
{
  if (qword_280E02B68 != -1)
  {
    dispatch_once(&qword_280E02B68, &__block_literal_global_114);
  }

  return byte_280E02B00;
}

uint64_t __39__HFUtilities_isRunningInStoreDemoMode__block_invoke()
{
  result = [MEMORY[0x277D75128] isRunningInStoreDemoMode];
  byte_280E02B00 = result;
  return result;
}

+ (BOOL)shouldUseControlCenterMaterials
{
  v2 = +[HFExecutionEnvironment sharedInstance];
  hostProcess = [v2 hostProcess];

  return hostProcess == 3 || hostProcess == 100;
}

+ (BOOL)isHostProcessHCSTestApp
{
  v2 = +[HFExecutionEnvironment sharedInstance];
  v3 = [v2 hostProcess] == 103;

  return v3;
}

+ (BOOL)isHostProcessProxControl
{
  v2 = +[HFExecutionEnvironment sharedInstance];
  v3 = [v2 hostProcess] == 104;

  return v3;
}

+ (BOOL)isHostProcessProxViewService
{
  v2 = +[HFExecutionEnvironment sharedInstance];
  v3 = [v2 hostProcess] == 105;

  return v3;
}

+ (BOOL)isProxHandOffV2Config
{
  if ([self isHostProcessProxControl] & 1) != 0 || (objc_msgSend(self, "isHostProcessProxViewService"))
  {
    return 1;
  }

  return [self isHostProcessHCSTestApp];
}

+ (BOOL)shouldUseProxHandOffMaterials
{
  if ([self isHostProcessProxControl])
  {
    return 1;
  }

  return [self isHostProcessHCSTestApp];
}

+ (BOOL)isCloudPhotosOn
{
  v2 = objc_alloc_init(MEMORY[0x277CB8F48]);
  aa_primaryAppleAccount = [v2 aa_primaryAppleAccount];
  v4 = [aa_primaryAppleAccount isEnabledForDataclass:*MEMORY[0x277CB8960]];

  return v4;
}

+ (BOOL)isUsingiCloud
{
  v2 = +[HFMediaDispatcher sharedDispatcher];
  isUsingiCloud = [v2 isUsingiCloud];

  return isUsingiCloud;
}

+ (BOOL)isSiriForiCloudEnabled
{
  v2 = objc_autoreleasePoolPush();
  v3 = objc_alloc_init(MEMORY[0x277CB8F48]);
  aa_primaryAppleAccount = [v3 aa_primaryAppleAccount];
  v5 = [aa_primaryAppleAccount isEnabledForDataclass:*MEMORY[0x277CB91C0]];

  objc_autoreleasePoolPop(v2);
  return v5;
}

void __60__HFUtilities_updateSiriForiCloudEnabled_completionHandler___block_invoke(uint64_t a1, int a2, void *a3)
{
  v16 = *MEMORY[0x277D85DE8];
  v5 = a3;
  v6 = HFLogForCategory(0);
  v7 = v6;
  if (a2)
  {
    if (os_log_type_enabled(v6, OS_LOG_TYPE_DEFAULT))
    {
      if (*(a1 + 40))
      {
        v8 = @"enabled";
      }

      else
      {
        v8 = @"disabled";
      }

      *buf = 138412290;
      v15 = v8;
      _os_log_impl(&dword_20D9BF000, v7, OS_LOG_TYPE_DEFAULT, "Saved account setting change for Siri iCloud setting, new value: %@", buf, 0xCu);
    }
  }

  else if (os_log_type_enabled(v6, OS_LOG_TYPE_ERROR))
  {
    *buf = 138412290;
    v15 = v5;
    _os_log_error_impl(&dword_20D9BF000, v7, OS_LOG_TYPE_ERROR, "Failed to save iCloud setting with error: %@", buf, 0xCu);
  }

  v9 = *(a1 + 32);
  if (v9)
  {
    v11[0] = MEMORY[0x277D85DD0];
    v11[1] = 3221225472;
    v11[2] = __60__HFUtilities_updateSiriForiCloudEnabled_completionHandler___block_invoke_128;
    v11[3] = &unk_277DF2AD8;
    v13 = v9;
    v12 = v5;
    dispatch_async(MEMORY[0x277D85CD0], v11);
  }

  v10 = *MEMORY[0x277D85DE8];
}

+ (BOOL)isCurrentAccount2FAEnabled
{
  v15 = *MEMORY[0x277D85DE8];
  v2 = objc_alloc_init(MEMORY[0x277CB8F48]);
  aa_primaryAppleAccount = [v2 aa_primaryAppleAccount];
  mEMORY[0x277CF0130] = [MEMORY[0x277CF0130] sharedInstance];
  aa_altDSID = [aa_primaryAppleAccount aa_altDSID];
  v6 = [mEMORY[0x277CF0130] authKitAccountWithAltDSID:aa_altDSID];

  if (aa_primaryAppleAccount)
  {
    v7 = [mEMORY[0x277CF0130] securityLevelForAccount:v6];
    v8 = HFLogForCategory(0);
    if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
    {
      v13 = 134217984;
      v14 = v7;
      _os_log_impl(&dword_20D9BF000, v8, OS_LOG_TYPE_DEFAULT, "primary iCloud account level: %lu", &v13, 0xCu);
    }

    v9 = v7 > 2;
  }

  else
  {
    v10 = HFLogForCategory(0);
    if (os_log_type_enabled(v10, OS_LOG_TYPE_ERROR))
    {
      LOWORD(v13) = 0;
      _os_log_error_impl(&dword_20D9BF000, v10, OS_LOG_TYPE_ERROR, "Failed to find a primary iCloud account, there is no primary account", &v13, 2u);
    }

    v9 = 0;
  }

  v11 = *MEMORY[0x277D85DE8];
  return v9;
}

+ (id)deviceAirDropIdentifier
{
  v2 = CFPreferencesCopyValue(@"AirDropID", @"com.apple.sharingd", *MEMORY[0x277CBF040], *MEMORY[0x277CBF010]);

  return v2;
}

+ (id)sanitizeAutoGeneratedHomeKitName:(id)name
{
  v23 = *MEMORY[0x277D85DE8];
  nameCopy = name;
  alphanumericCharacterSet = [MEMORY[0x277CCAB50] alphanumericCharacterSet];
  v5 = [(__CFString *)nameCopy rangeOfCharacterFromSet:alphanumericCharacterSet options:129];
  if (v5 >= [(__CFString *)nameCopy length])
  {
    v16 = HFLogForCategory(0);
    if (os_log_type_enabled(v16, OS_LOG_TYPE_INFO))
    {
      v19 = 136315394;
      v20 = "+[HFUtilities sanitizeAutoGeneratedHomeKitName:]";
      v21 = 2112;
      v22 = nameCopy;
      _os_log_impl(&dword_20D9BF000, v16, OS_LOG_TYPE_INFO, "%s attempted to sanitize a name consisting exlusively of invalid characters: %@, returning an empty string", &v19, 0x16u);
    }

    v15 = &stru_2824B1A78;
    v14 = nameCopy;
  }

  else
  {
    v6 = [(__CFString *)nameCopy substringFromIndex:v5];

    [alphanumericCharacterSet addCharactersInString:@"."];
    invertedSet = [alphanumericCharacterSet invertedSet];
    v8 = [v6 stringByTrimmingCharactersInSet:invertedSet];

    whitespaceCharacterSet = [MEMORY[0x277CCA900] whitespaceCharacterSet];
    [alphanumericCharacterSet formUnionWithCharacterSet:whitespaceCharacterSet];

    [alphanumericCharacterSet addCharactersInString:{@"â€™', -&#"}];
    invertedSet2 = [alphanumericCharacterSet invertedSet];
    v11 = [v8 componentsSeparatedByCharactersInSet:invertedSet2];
    v12 = [v11 na_map:&__block_literal_global_150];
    v13 = [v12 componentsJoinedByString:@" "];

    v14 = v13;
    v15 = v14;
  }

  v17 = *MEMORY[0x277D85DE8];

  return v15;
}

void *__48__HFUtilities_sanitizeAutoGeneratedHomeKitName___block_invoke(uint64_t a1, void *a2)
{
  v2 = MEMORY[0x277CCA900];
  v3 = a2;
  v4 = [v2 whitespaceCharacterSet];
  v5 = [v3 stringByTrimmingCharactersInSet:v4];

  if ([v5 length])
  {
    v6 = v5;
  }

  else
  {
    v6 = 0;
  }

  v7 = v6;

  return v6;
}

+ (id)sanitizeUserEnteredHomeKitName:(id)name
{
  v3 = MEMORY[0x277CCA900];
  nameCopy = name;
  whitespaceAndNewlineCharacterSet = [v3 whitespaceAndNewlineCharacterSet];
  v6 = [nameCopy stringByTrimmingCharactersInSet:whitespaceAndNewlineCharacterSet];

  return v6;
}

+ (id)uniqueHomeKitNameForName:(id)name allNames:(id)names
{
  nameCopy = name;
  v6 = [names na_map:&__block_literal_global_155];
  v7 = nameCopy;
  lowercaseString = [v7 lowercaseString];
  v9 = [v6 containsObject:lowercaseString];

  v16 = v7;
  if (v9)
  {
    v17 = 2;
    v18 = v7;
    do
    {
      v16 = HFLocalizedStringWithFormat(@"HFUniqueNameFormat", @"%@ %ld", v10, v11, v12, v13, v14, v15, v7);

      ++v17;
      lowercaseString2 = [v16 lowercaseString];
      v20 = [v6 containsObject:lowercaseString2];

      v18 = v16;
    }

    while ((v20 & 1) != 0);
  }

  return v16;
}

+ (id)libraryDirectoryURL
{
  defaultManager = [MEMORY[0x277CCAA00] defaultManager];
  v3 = [defaultManager URLsForDirectory:5 inDomains:1];
  if (![v3 count])
  {
    v4 = HFLogForCategory(0);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_ERROR))
    {
      *v7 = 0;
      _os_log_error_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_ERROR, "Unable to access libraryDirectoryURL", v7, 2u);
    }
  }

  firstObject = [v3 firstObject];

  return firstObject;
}

+ (id)applicationSupportDirectoryURL
{
  defaultManager = [MEMORY[0x277CCAA00] defaultManager];
  v3 = [defaultManager URLsForDirectory:14 inDomains:1];
  if (![v3 count])
  {
    v4 = HFLogForCategory(0);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_ERROR))
    {
      *v7 = 0;
      _os_log_error_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_ERROR, "Unable to access applicationSupportDirectoryURL", v7, 2u);
    }
  }

  firstObject = [v3 firstObject];

  return firstObject;
}

+ (id)cachesDirectoryURL
{
  defaultManager = [MEMORY[0x277CCAA00] defaultManager];
  v3 = [defaultManager URLsForDirectory:13 inDomains:1];
  if (![v3 count])
  {
    v4 = HFLogForCategory(0);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_ERROR))
    {
      *v7 = 0;
      _os_log_error_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_ERROR, "Unable to access cachesDirectoryURL", v7, 2u);
    }
  }

  firstObject = [v3 firstObject];

  return firstObject;
}

+ (id)documentsDirectoryURL
{
  defaultManager = [MEMORY[0x277CCAA00] defaultManager];
  v3 = [defaultManager URLsForDirectory:9 inDomains:1];

  if (![v3 count])
  {
    v4 = HFLogForCategory(0);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_ERROR))
    {
      *v7 = 0;
      _os_log_error_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_ERROR, "Unable to access documentsDirectoryURL", v7, 2u);
    }
  }

  firstObject = [v3 firstObject];

  return firstObject;
}

+ (id)sharedAnnouncementsDirectoryURL
{
  sharedLibraryDirectoryURL = [self sharedLibraryDirectoryURL];
  v3 = [sharedLibraryDirectoryURL URLByAppendingPathComponent:@"Caches" isDirectory:1];

  v4 = [v3 URLByAppendingPathComponent:@"com.apple.announce"];

  if (!v4)
  {
    v5 = HFLogForCategory(0);
    if (os_log_type_enabled(v5, OS_LOG_TYPE_ERROR))
    {
      *v7 = 0;
      _os_log_error_impl(&dword_20D9BF000, v5, OS_LOG_TYPE_ERROR, "Unable to access sharedCachesDirectoryURL", v7, 2u);
    }
  }

  return v4;
}

+ (id)sharedUserDirectoryURL
{
  v2 = [MEMORY[0x277CBEBC0] fileURLWithPath:CPSharedResourcesDirectory() isDirectory:1];
  if (!v2)
  {
    v3 = HFLogForCategory(0);
    if (os_log_type_enabled(v3, OS_LOG_TYPE_ERROR))
    {
      *v5 = 0;
      _os_log_error_impl(&dword_20D9BF000, v3, OS_LOG_TYPE_ERROR, "Unable to access sharedUserDirectoryURL", v5, 2u);
    }
  }

  return v2;
}

+ (id)sharedLibraryDirectoryURL
{
  sharedUserDirectoryURL = [self sharedUserDirectoryURL];
  v3 = [sharedUserDirectoryURL URLByAppendingPathComponent:@"Library" isDirectory:1];

  if (!v3)
  {
    v4 = HFLogForCategory(0);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_ERROR))
    {
      *v6 = 0;
      _os_log_error_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_ERROR, "Unable to access sharedLibraryDirectoryURL", v6, 2u);
    }
  }

  return v3;
}

+ (id)sharedApplicationSupportDirectoryURL
{
  sharedLibraryDirectoryURL = [self sharedLibraryDirectoryURL];
  v3 = [sharedLibraryDirectoryURL URLByAppendingPathComponent:@"Application Support" isDirectory:1];

  if (!v3)
  {
    v4 = HFLogForCategory(0);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_ERROR))
    {
      *v6 = 0;
      _os_log_error_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_ERROR, "Unable to access sharedApplicationSupportDirectoryURL", v6, 2u);
    }
  }

  return v3;
}

+ (id)wallpaperURL
{
  v21 = *MEMORY[0x277D85DE8];
  if ([self isAMac])
  {
    [self applicationSupportDirectoryURL];
  }

  else
  {
    [self sharedApplicationSupportDirectoryURL];
  }
  v3 = ;
  v4 = [v3 URLByAppendingPathComponent:@"com.apple.Home"];
  v5 = [v4 URLByAppendingPathComponent:@"Wallpapers"];
  defaultManager = [MEMORY[0x277CCAA00] defaultManager];
  path = [v5 path];
  v8 = [defaultManager isReadableFileAtPath:path];

  if ((v8 & 1) == 0)
  {
    v9 = HFLogForCategory(0x4EuLL);
    if (os_log_type_enabled(v9, OS_LOG_TYPE_ERROR))
    {
      path2 = [v5 path];
      *buf = 138412290;
      v20 = path2;
      _os_log_error_impl(&dword_20D9BF000, v9, OS_LOG_TYPE_ERROR, "Unable to access wallpaper directory at path %@", buf, 0xCu);
    }
  }

  path3 = [v5 path];
  v18 = 0;
  v11 = [defaultManager createDirectoryAtPath:path3 withIntermediateDirectories:1 attributes:0 error:&v18];
  v12 = v18;

  if ((v11 & 1) == 0)
  {
    v13 = HFLogForCategory(0x4EuLL);
    if (os_log_type_enabled(v13, OS_LOG_TYPE_ERROR))
    {
      path4 = [v5 path];
      *buf = 138412290;
      v20 = path4;
      _os_log_error_impl(&dword_20D9BF000, v13, OS_LOG_TYPE_ERROR, "Unable to create wallpaper directory at path%@", buf, 0xCu);
    }
  }

  v14 = *MEMORY[0x277D85DE8];

  return v5;
}

+ (id)demoModeDirectoryURL
{
  v18 = *MEMORY[0x277D85DE8];
  sharedApplicationSupportDirectoryURL = [self sharedApplicationSupportDirectoryURL];
  v3 = [sharedApplicationSupportDirectoryURL URLByAppendingPathComponent:@"com.apple.Home"];

  v4 = [v3 URLByAppendingPathComponent:@"demoMode"];
  defaultManager = [MEMORY[0x277CCAA00] defaultManager];
  path = [v4 path];
  v7 = [defaultManager fileExistsAtPath:path];

  if (v7)
  {
    v8 = 0;
  }

  else
  {
    path2 = [v4 path];
    v15 = 0;
    v10 = [defaultManager createDirectoryAtPath:path2 withIntermediateDirectories:1 attributes:0 error:&v15];
    v8 = v15;

    if ((v10 & 1) == 0)
    {
      v11 = HFLogForCategory(0x21uLL);
      if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
      {
        path3 = [v4 path];
        *buf = 138412290;
        v17 = path3;
        _os_log_error_impl(&dword_20D9BF000, v11, OS_LOG_TYPE_ERROR, "Unable to create demoMode directory at %@", buf, 0xCu);
      }
    }
  }

  v12 = *MEMORY[0x277D85DE8];

  return v4;
}

+ (id)preferredNameFromUserID:(id)d
{
  v14[4] = *MEMORY[0x277D85DE8];
  dCopy = d;
  v4 = *MEMORY[0x277CBD000];
  v14[0] = *MEMORY[0x277CBD078];
  v14[1] = v4;
  v14[2] = *MEMORY[0x277CBCFF8];
  v5 = [MEMORY[0x277CBDA78] descriptorForRequiredKeysForStyle:0];
  v14[3] = v5;
  v6 = [MEMORY[0x277CBEA60] arrayWithObjects:v14 count:4];

  if ([dCopy hf_isEmail])
  {
    v7 = +[HFContactStore defaultStore];
    v8 = [v7 contactForEmailAddress:dCopy withKeys:v6];
  }

  else
  {
    if (![dCopy hf_isPhoneNumber])
    {
LABEL_9:
      v11 = dCopy;
      goto LABEL_10;
    }

    v7 = +[HFContactStore defaultStore];
    v8 = [v7 contactForPhoneNumber:dCopy withKeys:v6];
  }

  v9 = v8;

  if (!v9)
  {
    goto LABEL_9;
  }

  givenName = [MEMORY[0x277CBDA78] stringFromContact:v9 style:1000];
  if (!givenName)
  {
    givenName = [v9 givenName];
  }

  v11 = givenName;

LABEL_10:
  v12 = *MEMORY[0x277D85DE8];

  return v11;
}

+ (id)voiceInfoFromSettingLanguageValue:(id)value
{
  valueCopy = value;
  outputVoiceGenderCode = [valueCopy outputVoiceGenderCode];
  v6 = [self outputGenderFromString:outputVoiceGenderCode];

  voiceName = [valueCopy voiceName];
  v8 = voiceName;
  if (voiceName)
  {
    firstObject = voiceName;
  }

  else
  {
    mEMORY[0x277CEF2D8] = [MEMORY[0x277CEF2D8] sharedInstance];
    outputVoiceLanguageCode = [valueCopy outputVoiceLanguageCode];
    v12 = [mEMORY[0x277CEF2D8] voiceNamesForOutputLanguageCode:outputVoiceLanguageCode gender:v6];
    firstObject = [v12 firstObject];
  }

  v13 = objc_alloc(MEMORY[0x277CEF528]);
  outputVoiceLanguageCode2 = [valueCopy outputVoiceLanguageCode];
  v15 = [v13 initWithLanguageCode:outputVoiceLanguageCode2 gender:v6 isCustom:0 name:firstObject footprint:0 contentVersion:0 masteredVersion:0];

  return v15;
}

+ (int64_t)outputGenderFromString:(id)string
{
  stringCopy = string;
  if ([stringCopy isEqualToString:@"m"])
  {
    v4 = 1;
  }

  else if ([stringCopy isEqualToString:@"f"])
  {
    v4 = 2;
  }

  else if ([stringCopy isEqualToString:@"n"])
  {
    v4 = 3;
  }

  else
  {
    if (([stringCopy isEqualToString:@"?"] & 1) == 0)
    {
      NSLog(&cfstr_UnknownGenderO.isa, stringCopy);
    }

    v4 = 0;
  }

  return v4;
}

+ (id)networkSSID
{
  v13 = *MEMORY[0x277D85DE8];
  v2 = [objc_alloc(MEMORY[0x277D02B18]) initWithServiceType:3];
  [v2 resume];
  networkName = [v2 networkName];
  v4 = networkName;
  if (!v2 || ![networkName length])
  {
    v5 = HFLogForCategory(0);
    if (os_log_type_enabled(v5, OS_LOG_TYPE_ERROR))
    {
      networkName2 = [v2 networkName];
      v9 = 138412546;
      v10 = v2;
      v11 = 2112;
      v12 = networkName2;
      _os_log_error_impl(&dword_20D9BF000, v5, OS_LOG_TYPE_ERROR, "Can't find WiFi network SSID name: interface = %@, name = %@", &v9, 0x16u);
    }
  }

  [v2 invalidate];

  v6 = *MEMORY[0x277D85DE8];

  return v4;
}

+ (id)itemIdentifierForAccessories:(id)accessories
{
  allObjects = [accessories allObjects];
  v4 = [allObjects sortedArrayUsingComparator:&__block_literal_global_208];
  firstObject = [v4 firstObject];
  uniqueIdentifier = [firstObject uniqueIdentifier];

  return uniqueIdentifier;
}

uint64_t __44__HFUtilities_itemIdentifierForAccessories___block_invoke(uint64_t a1, void *a2, void *a3)
{
  v4 = a3;
  v5 = [a2 uniqueIdentifier];
  v6 = [v4 uniqueIdentifier];

  v7 = [v5 compare:v6];
  return v7;
}

+ (id)narrowNoBreakSpaceString
{
  if (qword_280E02B78 != -1)
  {
    dispatch_once(&qword_280E02B78, &__block_literal_global_210);
  }

  v3 = qword_280E02B70;

  return v3;
}

void __39__HFUtilities_narrowNoBreakSpaceString__block_invoke()
{
  v0 = [MEMORY[0x277CCACA8] stringWithCharacters:&narrowNoBreakSpaceString_narrowNoBreakSpaceUnichar length:1];
  v1 = qword_280E02B70;
  qword_280E02B70 = v0;
}

+ (BOOL)showEducationTip
{
  v12 = *MEMORY[0x277D85DE8];
  standardUserDefaults = [MEMORY[0x277CBEBD0] standardUserDefaults];
  v3 = [standardUserDefaults objectForKey:@"showEnergyEducationTip"];

  if (v3)
  {
    v4 = [standardUserDefaults BOOLForKey:@"showEnergyEducationTip"];
  }

  else
  {
    v4 = 1;
  }

  v5 = HFLogForCategory(0x24uLL);
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEFAULT))
  {
    v8 = 136315394;
    v9 = "+[HFUtilities showEducationTip]";
    v10 = 1024;
    v11 = v4;
    _os_log_impl(&dword_20D9BF000, v5, OS_LOG_TYPE_DEFAULT, "%s Show education tip? --> %{BOOL}d", &v8, 0x12u);
  }

  v6 = *MEMORY[0x277D85DE8];
  return v4;
}

+ (BOOL)forceTestUtilityMode
{
  v12 = *MEMORY[0x277D85DE8];
  if ([self isInternalInstall])
  {
    standardUserDefaults = [MEMORY[0x277CBEBD0] standardUserDefaults];
    v3 = [standardUserDefaults objectForKey:@"forceShowQAUtility1"];

    if (v3)
    {
      v4 = [standardUserDefaults BOOLForKey:@"forceShowQAUtility1"];
    }

    else
    {
      v4 = 0;
    }

    v5 = HFLogForCategory(0x24uLL);
    if (os_log_type_enabled(v5, OS_LOG_TYPE_DEFAULT))
    {
      v8 = 136315394;
      v9 = "+[HFUtilities forceTestUtilityMode]";
      v10 = 1024;
      v11 = v4;
      _os_log_impl(&dword_20D9BF000, v5, OS_LOG_TYPE_DEFAULT, "%s Force Utility to QAUtility1 --> %{BOOL}d", &v8, 0x12u);
    }
  }

  else
  {
    LOBYTE(v4) = 0;
  }

  v6 = *MEMORY[0x277D85DE8];
  return v4;
}

+ (id)utilityOverride
{
  v11 = *MEMORY[0x277D85DE8];
  if ([self isInternalInstall])
  {
    standardUserDefaults = [MEMORY[0x277CBEBD0] standardUserDefaults];
    v3 = [standardUserDefaults dictionaryForKey:@"utilityOverride"];
    v4 = HFLogForCategory(0x22uLL);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_DEFAULT))
    {
      v7 = 136315394;
      v8 = "+[HFUtilities utilityOverride]";
      v9 = 2112;
      v10 = v3;
      _os_log_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_DEFAULT, "%s Override Utility --> %@", &v7, 0x16u);
    }
  }

  else
  {
    v3 = 0;
  }

  v5 = *MEMORY[0x277D85DE8];

  return v3;
}

+ (id)utilityLookupOverride
{
  v11 = *MEMORY[0x277D85DE8];
  if ([self isInternalInstall])
  {
    standardUserDefaults = [MEMORY[0x277CBEBD0] standardUserDefaults];
    v3 = [standardUserDefaults dictionaryForKey:@"utilityLookupOverride"];
    v4 = HFLogForCategory(0x22uLL);
    if (os_log_type_enabled(v4, OS_LOG_TYPE_DEFAULT))
    {
      v7 = 136315394;
      v8 = "+[HFUtilities utilityLookupOverride]";
      v9 = 2112;
      v10 = v3;
      _os_log_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_DEFAULT, "%s Override Utility Lookup --> %@", &v7, 0x16u);
    }
  }

  else
  {
    v3 = 0;
  }

  v5 = *MEMORY[0x277D85DE8];

  return v3;
}

+ (id)OAuthURLOverride
{
  v14 = *MEMORY[0x277D85DE8];
  if ([self isInternalInstall])
  {
    standardUserDefaults = [MEMORY[0x277CBEBD0] standardUserDefaults];
    v3 = [standardUserDefaults objectForKey:@"OAuthURLOverride"];

    if (v3)
    {
      v4 = MEMORY[0x277CBEBC0];
      v5 = [standardUserDefaults stringForKey:@"OAuthURLOverride"];
      v6 = [v4 URLWithString:v5];
    }

    else
    {
      v6 = 0;
    }

    v7 = HFLogForCategory(0x22uLL);
    if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
    {
      v10 = 136315394;
      v11 = "+[HFUtilities OAuthURLOverride]";
      v12 = 2112;
      v13 = v6;
      _os_log_impl(&dword_20D9BF000, v7, OS_LOG_TYPE_DEFAULT, "%s OAuthURL --> %@", &v10, 0x16u);
    }
  }

  else
  {
    v6 = 0;
  }

  v8 = *MEMORY[0x277D85DE8];

  return v6;
}

+ (id)sortedLockAccessoryArrayForSetup:(id)setup
{
  v19 = *MEMORY[0x277D85DE8];
  setupCopy = setup;
  v4 = HFLogForCategory(0x49uLL);
  if (os_log_type_enabled(v4, OS_LOG_TYPE_DEFAULT))
  {
    v15 = 136315394;
    v16 = "+[HFUtilities sortedLockAccessoryArrayForSetup:]";
    v17 = 2112;
    v18 = setupCopy;
    _os_log_impl(&dword_20D9BF000, v4, OS_LOG_TYPE_DEFAULT, "(%s) accessories = %@", &v15, 0x16u);
  }

  v5 = [MEMORY[0x277CBEBF8] mutableCopy];
  if (_os_feature_enabled_impl())
  {
    v6 = [objc_alloc(MEMORY[0x277CCAC98]) initWithKey:@"supportsUWBUnlock" ascending:0];
    [v5 addObject:v6];
  }

  v7 = [objc_alloc(MEMORY[0x277CCAC98]) initWithKey:@"supportsWalletKey" ascending:0];
  [v5 addObject:v7];

  v8 = [objc_alloc(MEMORY[0x277CCAC98]) initWithKey:@"supportsAccessCodes" ascending:0];
  [v5 addObject:v8];

  allObjects = [setupCopy allObjects];
  v10 = [allObjects na_filter:&__block_literal_global_227];

  v11 = [v10 sortedArrayUsingDescriptors:v5];
  v12 = HFLogForCategory(0x49uLL);
  if (os_log_type_enabled(v12, OS_LOG_TYPE_DEFAULT))
  {
    v15 = 136315394;
    v16 = "+[HFUtilities sortedLockAccessoryArrayForSetup:]";
    v17 = 2112;
    v18 = v11;
    _os_log_impl(&dword_20D9BF000, v12, OS_LOG_TYPE_DEFAULT, "(%s) result = %@", &v15, 0x16u);
  }

  v13 = *MEMORY[0x277D85DE8];

  return v11;
}

uint64_t __48__HFUtilities_sortedLockAccessoryArrayForSetup___block_invoke(uint64_t a1, void *a2)
{
  v2 = [a2 category];
  v3 = [v2 categoryType];
  v4 = [v3 isEqualToString:*MEMORY[0x277CCE890]];

  return v4;
}

+ (id)dateOfLastRecommendationUIOpened
{
  v2 = [objc_alloc(MEMORY[0x277CBEBD0]) initWithSuiteName:@"com.apple.Home"];
  objc_opt_class();
  v3 = [v2 objectForKey:@"recommendationUILastOpenedDate"];
  if (objc_opt_isKindOfClass())
  {
    v4 = v3;
  }

  else
  {
    v4 = 0;
  }

  v5 = v4;

  if (v5)
  {
    [v5 doubleValue];
    v6 = [MEMORY[0x277CBEAA8] dateWithTimeIntervalSince1970:?];
  }

  else
  {
    v6 = 0;
  }

  return v6;
}

+ (void)setDateOfLastRecommendationUIOpened:(id)opened
{
  openedCopy = opened;
  v3 = [objc_alloc(MEMORY[0x277CBEBD0]) initWithSuiteName:@"com.apple.Home"];
  if (openedCopy)
  {
    v4 = MEMORY[0x277CCABB0];
    [openedCopy timeIntervalSince1970];
    v5 = [v4 numberWithDouble:?];
    [v3 setObject:v5 forKey:@"recommendationUILastOpenedDate"];
  }

  else
  {
    [v3 removeObjectForKey:@"recommendationUILastOpenedDate"];
  }
}

@end