__n128 PSParticleType::getInitialParticleScale(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, __n128 *a5, __n128 *a6)
{
  __asm { FMOV            V0.2D, #1.0 }

  *a5 = result;
  *a6 = result;
  return result;
}

CGColorSpace **PSParticleType::getParticleColor(PSParticleType *this, const CMTime *a2, PSParticle *a3, PSEmitter *a4, PCWorkingColor *a5)
{
  v44 = *MEMORY[0x277D85DE8];
  v36 = 0uLL;
  v37 = 0;
  time = *a2;
  *&v35.var0.var0 = *(a3 + 8);
  v35.var0.var1[1] = *(a3 + 3);
  PC_CMTimeSaferSubtract(&time, &v35, &v36);
  operator/(&v36, a3 + 32, &time);
  Seconds = CMTimeGetSeconds(&time);
  ValueAsInt = OZChannel::getValueAsInt((this + 5368), a2, 0.0);
  v12 = ValueAsInt;
  if (*(this + 15464) == 1)
  {
    if (ValueAsInt == 2)
    {
      hasMoreThanOneKeypoint = OZChannelFolder::hasMoreThanOneKeypoint((this + 6784));
    }

    else
    {
      hasMoreThanOneKeypoint = (*(*(this + 880) + 560))(this + 7040);
    }

    *(this + 15465) = hasMoreThanOneKeypoint ^ 1;
    if ((hasMoreThanOneKeypoint & 1) == 0)
    {
      std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 15472, *(this + 1935));
      *(this + 1934) = this + 15480;
      *(this + 15480) = 0u;
      std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 15496, *(this + 1938));
      *(this + 1937) = this + 15504;
      *(this + 969) = 0u;
      (*(*(this + 880) + 728))(this + 7040, a3 + 8, this + 15472);
      (*(*(this + 864) + 728))(this + 6912, a3 + 8, this + 15496);
    }

    *(this + 15464) = 0;
  }

  PCColor::PCColor(&v35);
  if (v12 == 2)
  {
    OZChannel::getValueAsDouble((this + 7736), a2, 0.0);
    v15 = v14 + 1.0;
    v16 = *(this + 16544);
    if (v16 == 1)
    {
      time.value = 0;
      modf(v15, &time.value);
      v15 = *&time.value;
    }

    if (v15 < 1.0)
    {
      v15 = 1.0;
    }

    v17 = Seconds * v15;
    time.value = 0;
    modf(Seconds * v15 + -0.0001, &time.value);
    v19 = v17 - *&time.value;
    if (*(this + 15465) == 1)
    {
      if (v16)
      {
        v18.n128_f64[0] = v19;
      }

      else
      {
        v18.n128_f64[0] = Seconds;
      }

      (*(*(this + 880) + 736))(v18);
      (*(*(this + 864) + 736))(this + 6912, v43, this + 15496, v19);
      v20 = *&v43[1];
      v21 = *&v43[2];
      v22 = *&v43[3];
      v23 = *&time.value;
      ColorSpace = OZChannelGradient::getColorSpace((this + 6784));
      PCColor::setRGBA(&v35, v20, v21, v22, v23, ColorSpace);
      Alpha = *&time.value;
    }

    else
    {
      OZChannelGradient::getColor((this + 6784), (a3 + 8), v19, &v35);
      Alpha = PCColor::getAlpha(&v35);
    }
  }

  else
  {
    v26 = *(a3 + 8);
    *&v35.var0.var0 = *(a3 + 7);
    *&v35.var0.var1[1] = v26;
    *&v35.var0.var1[3] = *(a3 + 9);
    PCCFRef<CGColorSpace *>::operator=(&v35.var1._obj, a3 + 20);
    v27 = this + 7040;
    if (*(this + 15465) == 1)
    {
      (*(*(this + 880) + 736))(this + 7040, v43, this + 15472, Seconds);
      v28 = *v43;
      Alpha = v28 * PCColor::getAlpha(&v35);
    }

    else
    {
      *&time.timescale = 0;
      time.epoch = 0;
      time.value = &time.timescale;
      (*(*v27 + 728))(this + 7040, a3 + 8, &time);
      (*(*v27 + 736))(this + 7040, v43, &time, Seconds);
      v29 = *v43;
      Alpha = v29 * PCColor::getAlpha(&v35);
      std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&time, *&time.timescale);
    }
  }

  PSSequencedValues::PSSequencedValues(&time);
  v39 = *&v35.var0.var0;
  v40 = *&v35.var0.var1[1];
  v41 = *&v35.var0.var1[3];
  PCCFRef<CGColorSpace *>::operator=(v42, &v35.var1._obj);
  (*(*this + 1616))(this, a2, a3, &time);
  *&v35.var0.var0 = v39;
  *&v35.var0.var1[1] = v40;
  *&v35.var0.var1[3] = v41;
  PCCFRef<CGColorSpace *>::operator=(&v35.var1._obj, v42);
  v30 = v42[1];
  PSEmitter::tintColor(a4, a2, &v35);
  v31 = *&v30 * Alpha;
  v32 = *(this + 2063);
  if (v32)
  {
    OZChannel::getValueAsDouble((v32 + 6680), a2, 0.0);
    if (*(this + 2069) < 3.0)
    {
      v33 = v33 * v33;
    }

    v31 = v33 * v31;
  }

  PCColor::setAlpha(&v35, v31);
  PCWorkingColor::operator=(a5, &v35.var0.var0);
  PCCFRef<CGColorSpace *>::~PCCFRef(v42);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v35.var1._obj);
}

void sub_2602B3AA8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void PSParticleType::getSequenceCompletion(PSParticleType *this, const CMTime *a2, double a3, BOOL *a4, double *a5)
{
  *a4 = 0;
  FirstRemapTimeBehavior = PSParticleType::getFirstRemapTimeBehavior(this, this + 125);
  if (FirstRemapTimeBehavior || (FirstRemapTimeBehavior = PSParticleType::getFirstRemapTimeBehavior(0, (*(this + 2054) + 1200))) != 0)
  {
    v11 = FirstRemapTimeBehavior;
    if (!OZChannel::getValueAsInt((FirstRemapTimeBehavior + 4640), MEMORY[0x277CC08F0], 0.0))
    {
      *a4 = 1;
      *a5 = PSSequenceBehavior::getCompletion(v11, a2, a3);
    }
  }
}

double adjustImageParticleMatrixForFacingCameraEquirectRender(double *a1, double *a2)
{
  v4 = a1[220] - a2[3];
  v5 = a1[221] - a2[7];
  v6 = a1[222] - a2[11];
  v7 = sqrt(v4 * v4 + v5 * v5 + v6 * v6);
  if (fabs(v7) < 0.000000100000001)
  {
    v7 = 1.0;
  }

  v8 = v4 / v7;
  v9 = v5 / v7;
  v10 = v6 / v7;
  v11 = fabs(a1[225] * v10 + a1[223] * v8 + a1[224] * v9);
  v12 = v11 < 1.0;
  if (v11 >= 1.0)
  {
    v13 = a1[226];
  }

  else
  {
    v13 = a1[223];
  }

  if (v12)
  {
    v14 = a1[224];
  }

  else
  {
    v14 = a1[227];
  }

  if (v12)
  {
    v15 = a1[225];
  }

  else
  {
    v15 = a1[228];
  }

  v16 = v10 * v14 - v9 * v15;
  v17 = v8 * v15 - v10 * v13;
  v18 = v9 * v13 - v8 * v14;
  v19 = v9 * v18 - v10 * v17;
  v20 = v10 * v16 - v8 * v18;
  v21 = v8 * v17 - v9 * v16;
  v22 = sqrt(v18 * v18 + v16 * v16 + v17 * v17);
  v12 = fabs(v22) < 0.000000100000001;
  v23 = v16 / v22;
  v24 = v17 / v22;
  v25 = v18 / v22;
  if (!v12)
  {
    v18 = v25;
    v17 = v24;
    v16 = v23;
  }

  v26 = sqrt(v21 * v21 + v19 * v19 + v20 * v20);
  if (fabs(v26) >= 0.000000100000001)
  {
    v19 = v19 / v26;
    v20 = v20 / v26;
    v21 = v21 / v26;
  }

  v30 = v2;
  v31 = v3;
  v28[3] = 0.0;
  v28[7] = 0.0;
  v28[0] = v16;
  v28[1] = v19;
  v28[4] = v17;
  v28[5] = v20;
  v28[8] = v18;
  v28[9] = v21;
  memset(&v28[11], 0, 24);
  v28[2] = v8;
  v28[6] = v9;
  v28[10] = v10;
  v29 = xmmword_260342700;
  return PCMatrix44Tmpl<double>::rightMult(a2, v28);
}

CGColorSpace **PSParticleType::addPointSprite(PSParticleType *this, PSEmitter::RenderParams *a2, PSParticle *a3, float64x2_t *a4, PSHeliumNode *a5)
{
  v10 = *(a2 + 1);
  v11 = *(v10 + 2);
  v26 = *v10;
  v27 = v11;
  PSSequencedValues::PSSequencedValues(v22);
  (*(*this + 1616))(this, &v26, a3, v22);
  v12 = a4[12].f64[0] + v25;
  v20 = vaddq_f64(a4[11], v24);
  v21 = v12;
  WorkingColorSpace = OZRenderParams::getWorkingColorSpace(*(a2 + 1));
  PCWorkingColor::PCWorkingColor(&v18, 0.0, 0.0, 0.0, 0.0, WorkingColorSpace);
  (*(*this + 1600))(this, &v26, a3, *a2, &v18);
  v14 = *(this + 2067);
  PCWorkingColor::operator=(&v17, &v18);
  v15 = v14;
  PSHeliumNode::addPointParticle(a5, v20.f64, &v17, *(this + 16528), v15);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v19);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v23);
}

void sub_2602B3EE0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, CGColorSpace *a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, CGColorSpace *a30)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a14);
  PCCFRef<CGColorSpace *>::~PCCFRef(&a30);
  _Unwind_Resume(a1);
}

CGColorSpace **PSParticleType::addLineSprite(PSParticleType *this, PSEmitter::RenderParams *a2, PSParticle *a3, OZSimStateElement *a4, PSHeliumNode *a5)
{
  v10 = *(a2 + 1);
  v11 = *&v10->_pcColorDesc._toneMapMethod._gain;
  v39 = *&v10->_pcColorDesc._colorSpaceRef._obj;
  v40 = v11;
  WorkingColorSpace = OZRenderParams::getWorkingColorSpace(v10);
  PCWorkingColor::PCWorkingColor(&v37, 0.0, 0.0, 0.0, 0.0, WorkingColorSpace);
  (*(*this + 1600))(this, &v39, a3, *a2, &v37);
  PSSequencedValues::PSSequencedValues(v33);
  (*(*this + 1616))(this, &v39, a3, v33);
  v13 = *(a4 + 2) + *(a4 + 9);
  v31 = vaddq_f64(*a4, *(a4 + 56));
  v32 = v13;
  v30 = 0x3FF0000000000000;
  v27 = 0x3FF0000000000000;
  v24 = 0x3FF0000000000000;
  v21 = 0x3FF0000000000000;
  v22 = 0u;
  v23 = 0u;
  v25 = 0u;
  v26 = 0u;
  v28 = 0u;
  v29 = 0u;
  (*(*this + 1416))(this, this + 15520, &v21, &v39);
  PCMatrix44Tmpl<double>::transform<double>(&v21, v31.f64, v31.f64);
  v32 = v36 + v32;
  v20 = v36 + *(a4 + 24);
  v31 = vaddq_f64(v35, v31);
  v19 = vaddq_f64(v35, *(a4 + 11));
  v14 = vsubq_f64(v31, v19);
  if (vaddvq_f64(vmulq_f64(v14, v14)) + (v32 - v20) * (v32 - v20) <= 1.0)
  {
    v15 = *(this + 2067);
    PCWorkingColor::operator=(&v18, &v37);
    v16 = v15;
    PSHeliumNode::addPointParticle(a5, v19.f64, &v18, *(this + 16528), v16);
  }

  else
  {
    PCWorkingColor::operator=(&v18, &v37);
    PSHeliumNode::addLineParticle(a5, v19.f64, v31.f64, &v18, *(this + 16528));
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(&v34);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v38);
}

void sub_2602B41AC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, CGColorSpace *a45)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a45);
  PCCFRef<CGColorSpace *>::~PCCFRef((v45 - 136));
  _Unwind_Resume(a1);
}

CGColorSpace **PSParticleType::addOutlineSprite(CGColorSpace **this, PSEmitter::RenderParams *a2, PSParticle *a3, OZSimStateElement *a4, PSHeliumNode *a5)
{
  if (this[2061])
  {
    v8 = this;
    v41 = 0x3FF0000000000000;
    v38 = 0x3FF0000000000000;
    v35 = 0x3FF0000000000000;
    v32 = 0x3FF0000000000000;
    v33 = 0u;
    v34 = 0u;
    v36 = 0u;
    v37 = 0u;
    v39 = 0u;
    v40 = 0u;
    PSParticleType::getImageParticleMatrix3D(this, a2, a3, a4, &v32);
    v9 = *(a2 + 1);
    v10 = *v9;
    v31 = *(v9 + 2);
    v30 = v10;
    v28 = 0uLL;
    v29 = 0;
    *&v22.var0.var0 = v10;
    v22.var0.var3 = v31;
    v19[0] = *(a3 + 8);
    PC_CMTimeSaferSubtract(&v22, v19, &v28);
    var0 = *(a3 + 80);
    v11 = *(a3 + 13);
    if (v11 > 0.0)
    {
      operator/(&v28, &v20, v11);
      v22.var0 = var0;
      *&v19[0].value = v20;
      v19[0].epoch = v21;
      PC_CMTimeSaferAdd(&v22, v19, &var0);
      v25 = *(v8 + 16464);
      v26 = *(v8 + 16480);
      v23 = 0uLL;
      var3 = 0;
      operator/(&var0.var0, &v25, &v23);
      CMTimeMake(&v42, 1, 1);
      *&v22.var0.var0 = v23;
      v22.var0.var3 = var3;
      v19[0] = v42;
      PC_CMTimeFloorToSampleDuration(&v22, v19, &v43);
      *&v22.var0.var0 = v23;
      v22.var0.var3 = var3;
      *&v19[0].value = v43;
      v19[0].epoch = v44;
      PC_CMTimeSaferSubtract(&v22, v19, &v20);
      operator*(&v20, &v25, &v22);
      var3 = v22.var0.var3;
      v23 = *&v22.var0.var0;
      var0 = v22.var0;
    }

    v12 = *(v8 + 16440);
    *&v21 = *(v8 + 16456);
    v20 = v12;
    v19[0] = var0;
    PC_CMTimeSaferAdd(v19, &v20, &v22);
    var0 = v22.var0;
    OZRenderState::OZRenderState(&v22, *(a2 + 1));
    v22.var0 = var0;
    v20 = 0uLL;
    __asm { FMOV            V0.2D, #-1.0 }

    v21 = _Q0;
    PSParticleType::getSourceImageBounds(v8, &v22, &v20);
    WorkingColorSpace = OZRenderParams::getWorkingColorSpace(*(a2 + 1));
    PCWorkingColor::PCWorkingColor(v19, 0.0, 0.0, 0.0, 0.0, WorkingColorSpace);
    (*(*v8 + 1600))(v8, &v30, a3, *a2, v19);
    PCWorkingColor::operator=(&v43, v19);
    PSHeliumNode::addOutlineParticle(a5, &v32, &v20, &v43, *(v8 + 16528));
    return PCCFRef<CGColorSpace *>::~PCCFRef(&v19[0].epoch);
  }

  return this;
}

void sub_2602B44E8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, ...)
{
  va_start(va, a3);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void PSParticleType::addImageSprite(PSParticleType *this, PSEmitter::RenderParams *a2, PSParticle *a3, OZSimStateElement *a4, PSHeliumNode *a5)
{
  v46 = 0x3FF0000000000000;
  v43 = 0x3FF0000000000000;
  v40 = 0x3FF0000000000000;
  v37 = 0x3FF0000000000000;
  v38 = 0u;
  v39 = 0u;
  v41 = 0u;
  v42 = 0u;
  v44 = 0u;
  v45 = 0u;
  PSParticleType::getImageParticleMatrix3D(this, a2, a3, a4, &v37);
  v9 = *(a2 + 1);
  v10 = *(v9 + 16);
  *&v36.value = *v9;
  v36.epoch = v10;
  v35 = *(a3 + 80);
  if (*(a3 + 13) > 0.0)
  {
    v33 = 0uLL;
    v34 = 0;
    v27[0] = v36;
    v28 = *(a3 + 8);
    *&v29 = *(a3 + 3);
    PC_CMTimeSaferSubtract(v27, &v28, &v33);
    operator/(&v33, &v48, *(a3 + 13));
    v28 = *&v35.value;
    *&v29 = v35.epoch;
    v49 = v48;
    PC_CMTimeSaferAdd(&v28, &v49, v27);
    v35 = v27[0];
    v31 = *(this + 1029);
    v32 = *(this + 2060);
    memset(&v30, 0, sizeof(v30));
    operator/(&v35.value, &v31, &v30);
    CMTimeMake(&v47, 1, 1);
    v27[0] = v30;
    v28 = *&v47.value;
    *&v29 = v47.epoch;
    PC_CMTimeFloorToSampleDuration(v27, &v28, &v48);
    v27[0] = v30;
    v28 = *&v48.value;
    *&v29 = v48.epoch;
    PC_CMTimeSaferSubtract(v27, &v28, &v49);
    operator*(&v49.value, &v31, v27);
    v35 = v27[0];
  }

  v11 = *(this + 16440);
  v49.epoch = *(this + 2057);
  *&v49.value = v11;
  v28 = *&v35.value;
  *&v29 = v35.epoch;
  PC_CMTimeSaferAdd(&v28, &v49, v27);
  v35 = v27[0];
  v12 = *(*HGRenderJob::GetRenderNodeList(*(a2 + 1)) + 8);
  _ZF = v12 == 0;
  v14 = v12 != 0;
  v15 = &v31;
  if (!_ZF)
  {
    v15 = 0;
  }

  v16 = v14 & *(a5 + 864);
  v28 = 0uLL;
  __asm { FMOV            V0.2D, #-1.0 }

  v29 = _Q0;
  *&v49.value = 0uLL;
  *&v48.value = 0uLL;
  v47.value = 0;
  *&v47.timescale = 0;
  *&v31 = 0;
  if (_ZF)
  {
    v21 = 0;
  }

  else
  {
    v21 = &v48;
  }

  PSParticleType::getSourceOutput(this, a2, &v35, &v37, &v28, &v49, v21, &v47, v15);
  WorkingColorSpace = OZRenderParams::getWorkingColorSpace(*(a2 + 1));
  PCWorkingColor::PCWorkingColor(v27, 0.0, 0.0, 0.0, 0.0, WorkingColorSpace);
  (*(*this + 1600))(this, &v36, a3, *a2, v27);
  if (v31)
  {
    PCWorkingColor::operator=(&v33, v27);
    PSHeliumNode::addImageParticle(a5, &v37, &v31, &v28, &v33, *(this + 16528));
    goto LABEL_20;
  }

  if (v48.value)
  {
    v26 = *&v48.value;
    if (*&v48.timescale)
    {
      atomic_fetch_add_explicit((*&v48.timescale + 8), 1uLL, memory_order_relaxed);
    }

    PCWorkingColor::operator=(&v33, v27);
    PSHeliumNode::addImageParticle(a5, &v37, &v26, &v28, &v33, *(this + 16528));
    v23 = *(&v26 + 1);
    if (!*(&v26 + 1))
    {
      goto LABEL_20;
    }

LABEL_19:
    std::__shared_weak_count::__release_shared[abi:ne200100](v23);
    goto LABEL_20;
  }

  if (v49.value)
  {
    v25 = *&v49.value;
    if (*&v49.timescale)
    {
      atomic_fetch_add_explicit((*&v49.timescale + 8), 1uLL, memory_order_relaxed);
    }

    PCWorkingColor::operator=(&v33, v27);
    PSHeliumNode::addImageParticle(a5, &v37, &v25, &v28, &v33, *(this + 16528));
    v23 = *(&v25 + 1);
    if (*(&v25 + 1))
    {
      goto LABEL_19;
    }
  }

  else if (v47.value)
  {
    PCWorkingColor::operator=(&v33, v27);
    PSHeliumNode::addImageParticle(a5, &v37, &v47, &v28, &v33, *(this + 16528));
  }

LABEL_20:
  v24 = (*(*this + 272))(this);
  if (!(v16 & 1 | (v24 == 0)) && OZScene::inDesperationMode(v24))
  {
    PSHeliumNode::convertTexturesToBitmaps(a5);
    PCSharedMutex::lock((this + 16616));
    std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::destroy(this + 16568, *(this + 2072));
    *(this + 2071) = this + 16576;
    *(this + 1036) = 0u;
    PCSharedMutex::unlock((this + 16616));
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(&v27[0].epoch);
  if (v31)
  {
    (*(*v31 + 24))(v31);
  }

  if (*&v47.timescale)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](*&v47.timescale);
  }

  if (*&v48.timescale)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](*&v48.timescale);
  }

  if (*&v49.timescale)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](*&v49.timescale);
  }
}

void sub_2602B4A0C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, CGColorSpace *a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a17);
  if (a29)
  {
    (*(*a29 + 24))(a29);
  }

  v31 = *(v29 - 120);
  if (v31)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v31);
  }

  v32 = *(v29 - 96);
  if (v32)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v32);
  }

  v33 = *(v29 - 72);
  if (v33)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v33);
  }

  _Unwind_Resume(a1);
}

void PSParticleType::getSourceOutput(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t *a9)
{
  v15 = MEMORY[0x28223BE20](a1);
  v154 = v17;
  v155 = v16;
  v211 = *MEMORY[0x277D85DE8];
  if (!*(v9 + 16488))
  {
    return;
  }

  v18 = v14;
  v19 = v13;
  v20 = v12;
  v21 = v10;
  v22 = v9;
  if (*(v9 + 16529) == 1)
  {
    v23 = *(v10 + 8);
    v24 = *(v23 + 2);
    v207 = *v23;
    v208 = v24;
  }

  else
  {
    v25 = v11;
    __y = 0uLL;
    v210 = 0.0;
    v26 = (*(*(*(v9 + 16432) + 200) + 272))(v15);
    OZSceneSettings::getFrameDuration((v26 + 336), &__y);
    v185 = *v25;
    v172 = __y;
    v173.f64[0] = v210;
    PC_CMTimeFloorToSampleDuration(&v185, &v172, &v180);
    v207 = v180;
    v208 = v181;
    v23 = *(v21 + 8);
  }

  __asm { FMOV            V0.2D, #1.0 }

  v206 = _Q0;
  DoHighQualityResampling = OZRenderParams::getDoHighQualityResampling(v23);
  v33 = DoHighQualityResampling;
  v34 = 1.0;
  v159 = 1.0;
  if (DoHighQualityResampling)
  {
    PSParticleType::getSourceScaleFactor(DoHighQualityResampling, v21, v20, &v206);
    __y.f64[0] = 0.0;
    modf(v206.f64[0] * 100000.003, __y.f64);
    v159 = __y.f64[0] * 0.00000999999975;
    v206.f64[0] = __y.f64[0] * 0.00000999999975;
    __y.f64[0] = 0.0;
    modf(v206.f64[1] * 100000.003, __y.f64);
    v156 = __y.f64[0] * 0.00000999999975;
    v206.f64[1] = __y.f64[0] * 0.00000999999975;
    PCMatrix44Tmpl<double>::rightScale(v20, 1.0 / v159, 1.0 / (__y.f64[0] * 0.00000999999975), 1.0);
    v34 = v156;
    if (fabs(v159) < 0.0000001 || fabs(v156) < 0.0000001)
    {
      __asm { FMOV            V0.2D, #-1.0 }

      *(v19 + 16) = _Q0;
      return;
    }
  }

  v157 = v34;
  EnableMetalRendering = LiRenderingTechnology::getEnableMetalRendering((v21 + 1332));
  v205 = v206;
  v203 = v207;
  v204 = v208;
  PCSharedMutex::lock_shared((v22 + 16616));
  v36 = std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::find<PSParticleType::HGNodeCacheEntryKey>(v22 + 16568, &v203);
  v37 = v36;
  if (v22 + 16576 != v36)
  {
    v38 = *(v36 + 144);
    *v19 = *(v36 + 128);
    *(v19 + 16) = v38;
    if (v18 && (v39 = *(v36 + 112)) != 0)
    {
      v40 = *(v36 + 120);
      if (v40)
      {
        atomic_fetch_add_explicit((v40 + 8), 1uLL, memory_order_relaxed);
      }

      v41 = v18[1];
      *v18 = v39;
      v18[1] = v40;
      if (!v41)
      {
        goto LABEL_26;
      }
    }

    else
    {
      v42 = *(v36 + 80);
      if ((v42 == 0) | EnableMetalRendering & 1)
      {
        v42 = *(v36 + 96);
        if (((v42 != 0) & EnableMetalRendering) != 1)
        {
          v46 = 0;
          if (a9)
          {
LABEL_27:
            v47 = *(v37 + 72);
            if (v47)
            {
              v48 = *a9;
              if (*a9 != v47)
              {
                if (v48)
                {
                  (*(*v48 + 24))(*a9);
                  v47 = *(v37 + 72);
                  *a9 = v47;
                  if (!v47)
                  {
                    goto LABEL_110;
                  }
                }

                else
                {
                  *a9 = v47;
                }

                (*(*v47 + 16))(v47);
              }

LABEL_110:
              PCSharedMutex::unlock_shared((v22 + 16616));
              return;
            }
          }

LABEL_33:
          if (v46)
          {
            goto LABEL_110;
          }

          goto LABEL_34;
        }

        v43 = *(v36 + 104);
        if (v43)
        {
          atomic_fetch_add_explicit((v43 + 8), 1uLL, memory_order_relaxed);
        }

        v44 = v154;
      }

      else
      {
        v43 = *(v36 + 88);
        if (v43)
        {
          atomic_fetch_add_explicit((v43 + 8), 1uLL, memory_order_relaxed);
        }

        v44 = v155;
      }

      v41 = v44[1];
      *v44 = v42;
      v44[1] = v43;
      if (!v41)
      {
LABEL_26:
        v46 = 1;
        if (a9)
        {
          goto LABEL_27;
        }

        goto LABEL_33;
      }
    }

    std::__shared_weak_count::__release_shared[abi:ne200100](v41);
    goto LABEL_26;
  }

LABEL_34:
  PCSharedMutex::unlock_shared((v22 + 16616));
  *(v21 + 16) = v207;
  *(v21 + 32) = v208;
  *(v21 + 408) = 0;
  *(v21 + 416) = 0;
  *(v21 + 224) = *(v22 + 16488);
  PCWorkingColorVector::PCWorkingColorVector(&v202);
  PCHashWriteStream::PCHashWriteStream(&__y);
  v201[0] = v201;
  v201[1] = v201;
  v201[2] = 0;
  (*(**(v22 + 16488) + 48))(&v180);
  v202 = v180;
  PCHashWriteStream::reset(&__y);
  RenderQuality = OZRenderParams::getRenderQuality((v21 + 16));
  PCHashWriteStream::writeValue(&__y, RenderQuality);
  TextRenderQuality = OZRenderParams::getTextRenderQuality((v21 + 16));
  PCHashWriteStream::writeValue(&__y, TextRenderQuality);
  v51 = OZRenderParams::getDoHighQualityResampling((v21 + 16));
  PCHashWriteStream::writeValue(&__y, v51);
  DoShapeAntialiasing = OZRenderParams::getDoShapeAntialiasing((v21 + 16));
  PCHashWriteStream::writeValue(&__y, DoShapeAntialiasing);
  Do3DIntersectionAntialiasing = OZRenderParams::getDo3DIntersectionAntialiasing((v21 + 16));
  PCHashWriteStream::writeValue(&__y, Do3DIntersectionAntialiasing);
  WorkingColorDescription = OZRenderParams::getWorkingColorDescription((v21 + 16));
  FxHashColorDescription(&__y, WorkingColorDescription);
  Hash = PCHashWriteStream::getHash(&__y);
  PCHash128::operator+=(&v202, Hash);
  if (v33)
  {
    PCHashWriteStream::reset(&__y);
    PCHashWriteStream::writeValue(&__y, v159);
    PCHashWriteStream::writeValue(&__y, v157);
    v56 = PCHashWriteStream::getHash(&__y);
    PCHash128::operator+=(&v202, v56);
  }

  PCHashWriteStream::reset(&__y);
  ReducedResolutionMedia = OZRenderParams::getReducedResolutionMedia((v21 + 16));
  PCHashWriteStream::writeValue(&__y, ReducedResolutionMedia);
  v58 = PCHashWriteStream::getHash(&__y);
  PCHash128::operator+=(&v202, v58);
  v59 = *(*HGRenderJob::GetRenderNodeList(*(v21 + 8)) + 8);
  PCHashWriteStream::reset(&__y);
  PCHashWriteStream::writeValue(&__y, v59 == 0);
  v60 = PCHashWriteStream::getHash(&__y);
  PCHash128::operator+=(&v202, v60);
  if (!v59)
  {
    v152 = 0;
    *&v153 = 0.0;
    v67 = 0;
    v65 = 0.0;
    goto LABEL_79;
  }

  RenderGPU = OZRenderParams::getRenderGPU((v21 + 16), &v185);
  v62 = PSTextureCache::Instance(RenderGPU);
  PSTextureCache::getTextureForKey(v62, &v185, &v202, &v180);
  v64 = *(&v180 + 1);
  v65 = *&v180;
  if (*(&v180 + 1))
  {
    atomic_fetch_add_explicit((*(&v180 + 1) + 8), 1uLL, memory_order_relaxed);
  }

  v153 = v64;
  v67 = v181;
  v66 = v182;
  if (v182)
  {
    atomic_fetch_add_explicit(&v182->__shared_owners_, 1uLL, memory_order_relaxed);
  }

  v152 = v66;
  if (!((*&v65 != 0) | EnableMetalRendering & 1))
  {
    v68 = OZCacheManager::Instance(*&v63);
    OZCacheManager::getTextureForKey(v68, &v185, &v202, 0, &v172);
    v69 = v172.f64[1];
    v65 = v172.f64[0];
    v172 = 0uLL;
    v63 = *&v153;
    if (*&v153 != 0.0)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v153);
      v63 = v172.f64[1];
      if (*&v172.f64[1])
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](*&v172.f64[1]);
      }
    }

    *&v153 = v69;
  }

  if (((v67 == 0) & EnableMetalRendering) == 1)
  {
    v70 = OZCacheManager::Instance(*&v63);
    OZCacheManager::getMetalTextureForKey(v70, *(v185.value + 120), &v202, &v161);
    if (*&v161.f64[0])
    {
      v198._pcColorDesc._colorSpaceRef._obj = 0;
      v71 = *(v21 + 1488);
      if (v71)
      {
        if (v72)
        {
          v198._pcColorDesc._colorSpaceRef._obj = HGGPURenderer::GetMetalContext(v72);
        }
      }

      std::allocate_shared[abi:ne200100]<PGMetalTexture,std::allocator<PGMetalTexture>,HGRef<HGMetalTexture> &,HGMetalContext *&,0>();
    }

    v67 = 0;
  }

  if (a9 || (((*&v65 == 0) | EnableMetalRendering) & ((v67 == 0) | EnableMetalRendering ^ 1) & 1) != 0)
  {
LABEL_73:
    if (v182)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v182);
    }

    if (*(&v180 + 1))
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](*(&v180 + 1));
    }

    if (*&v185.timescale)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](*&v185.timescale);
    }

LABEL_79:
    v199 = 0;
    PCSharedCount::PCSharedCount(&v200);
    (*(*v22 + 1632))(&v180, v22, *(v21 + 8), &v207, 1);
    v199 = v180;
    PCSharedCount::PCSharedCount(&v185, &v180 + 1);
    PCSharedCount::operator=(&v200, &v185.value);
    PCSharedCount::~PCSharedCount(&v185);
    PCSharedCount::~PCSharedCount(&v180 + 1);
    v83 = OZRenderParams::getWorkingColorDescription(*(v21 + 8));
    v84 = *v83;
    v198._pcColorDesc._colorSpaceRef._obj = v84;
    if (v84)
    {
      PCCFRefTraits<CGColorSpace *>::retain(v84);
    }

    v85 = *(v83 + 8);
    v198._pcColorDesc._toneMapMethod._gain = *(v83 + 16);
    *&v198._pcColorDesc._dynamicRange = v85;
    v198._isPremultiplied = *(v83 + 24);
    BlendingGamma = OZRenderParams::getBlendingGamma(*(v21 + 8));
    RenderNodeList = HGRenderJob::GetRenderNodeList(*(v21 + 8));
    LiRenderParameters::LiRenderParameters(&v185, &v198, RenderNodeList, BlendingGamma);
    v190 = OZRenderParams::getDo3DIntersectionAntialiasing(*(v21 + 8));
    v88 = *(v21 + 8);
    v191 = *(v88 + 516);
    v89 = OZRenderParams::getDoHighQualityResampling(v88);
    v194 = v89;
    v195 = GLRenderer::inDesperationMode(v89);
    LiRenderParameters::setHeliumRenderer(&v185, *(v21 + 1488));
    v90 = (*(v21 + 8) + 1316);
    v91 = *(*(v21 + 8) + 1332);
    v192 = *v90;
    v193[0] = v91;
    *(v193 + 14) = *(v90 + 30);
    v184 = 0;
    LiAgent::LiAgent(&v180, &v185, 1);
    v92 = *(v183 + 48);
    v94 = *v183;
    v93 = *(v183 + 16);
    v174 = *(v183 + 32);
    v175 = v92;
    v172 = v94;
    v173 = v93;
    v95 = *(v183 + 112);
    v97 = *(v183 + 64);
    v96 = *(v183 + 80);
    v178 = *(v183 + 96);
    v179 = v95;
    v176 = v97;
    v177 = v96;
    if (v159 != 1.0)
    {
      v172 = vmulq_n_f64(v172, v159);
      v173 = vmulq_n_f64(v173, v159);
    }

    if (v157 != 1.0)
    {
      v174 = vmulq_n_f64(v174, v157);
      v175 = vmulq_n_f64(v175, v157);
    }

    LiAgent::setPixelTransform(&v180, &v172);
    LiAgent::getHelium(&v180, v199, &v161);
    v98 = v161.f64[0];
    if (v184 == *&v161.f64[0])
    {
      if (v184)
      {
        (*(**&v161.f64[0] + 24))(*&v161.f64[0]);
      }
    }

    else
    {
      if (v184)
      {
        (*(*v184 + 24))();
        v98 = v161.f64[0];
      }

      v184 = *&v98;
    }

    LiAgent::getDOD(&v180, &v161);
    v99 = LOBYTE(v162.f64[0]);
    v151 = v161.f64[0];
    v171 = v161;
    v160 = HIDWORD(v161.f64[1]);
    v158 = LODWORD(v161.f64[1]);
    v100 = *(v21 + 1488);
    if (v100)
    {
      if (v101)
      {
        v102 = v101;
        v103 = PGHelium::convertBitsPerChannel(4, *(*(v21 + 8) + 332), 0);
        if (!HGGPURenderer::ShouldAllocateGLTexture(v102, LODWORD(v171.f64[1]), HIDWORD(v171.f64[1]), v103))
        {
          goto LABEL_205;
        }
      }
    }

    if (v99)
    {
      v161 = 0uLL;
      __asm { FMOV            V0.2D, #-1.0 }

      v162 = _Q0;
      (*(*v22 + 1200))(v22, &v161, v21 + 16);
      *&v105.f64[0] = vmovn_s64(vcvtq_s64_f64(vrndmq_f64(vaddq_f64(v161, vdupq_n_s64(0x3E7AD7F29ABCAF48uLL)))));
      v106 = vsub_s32(vmovn_s64(vcvtq_s64_f64(vrndpq_f64(vaddq_f64(v161, v162)))), *&v105.f64[0]);
      *&v105.f64[1] = v106;
      v171 = v105;
    }

    else
    {
      v106 = *&v171.f64[1];
    }

    if (v106 < 1 || v106 <= 0)
    {
      *v19 = SLODWORD(v151);
      *(v19 + 8) = SHIDWORD(v151);
      *(v19 + 16) = v158;
      *(v19 + 24) = v160;
LABEL_205:
      LiAgent::~LiAgent(&v180);
      if (v184)
      {
        (*(*v184 + 24))(v184);
      }

      v81 = v153;
      if (v197)
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](v197);
      }

      PCCFRef<CGColorSpace *>::~PCCFRef(&v196);
      v187 = &unk_2871F2660;
      if (v188 < 0)
      {
        v147 = 1;
      }

      else
      {
        v147 = v188;
      }

      PCArray<PCPtr<LiImageFilter>,PCArray_Traits<PCPtr<LiImageFilter>>>::resize(&v187, 0, v147);
      v80 = v152;
      if (v189)
      {
        MEMORY[0x2666E9ED0](v189, 0x1000C8077774924);
      }

      v189 = 0;
      v188 = 0;
      PCSharedCount::~PCSharedCount(&v186);
      PCCFRef<CGColorSpace *>::~PCCFRef(&v198._pcColorDesc._colorSpaceRef._obj);
      PCSharedCount::~PCSharedCount(&v200);
      goto LABEL_215;
    }

    v170 = 0uLL;
    v169 = 0uLL;
    if ((*&v65 == 0) | EnableMetalRendering & 1)
    {
      if (((v67 != 0) & EnableMetalRendering) == 1)
      {
        if (v152)
        {
          atomic_fetch_add_explicit(&v152->__shared_owners_, 1uLL, memory_order_relaxed);
          v107 = *(&v169 + 1);
          *&v169 = v67;
          *(&v169 + 1) = v152;
          if (v107)
          {
            std::__shared_weak_count::__release_shared[abi:ne200100](v107);
          }
        }

        else
        {
          v169 = v67;
        }

        if (a9)
        {
          v116 = *(v169 + 64);
          if (v116)
          {
            (*(*v116 + 16))(*(v169 + 64));
          }

          v150 = HGObject::operator new(0x1F0uLL);
          HGBitmapLoader::HGBitmapLoader(v150, v116);
          if (v116)
          {
            (*(*v116 + 24))(v116);
          }

          goto LABEL_146;
        }

LABEL_145:
        v150 = 0;
        goto LABEL_146;
      }

      v109 = v184;
      v150 = v184;
      if (v184)
      {
        (*(*v184 + 16))(v184);
      }

      if (v59)
      {
        v110 = *(*(v21 + 8) + 340);
        HeliumRenderer = LiAgent::getHeliumRenderer(&v180);
        if (HeliumRenderer)
        {
        }

        else
        {
          v112 = 0;
        }

        if (EnableMetalRendering)
        {
          *&v167 = 0;
          CGColorSpace = FxColorDescription::getCGColorSpace(&v198);
          PGHelium::renderNodeToMetalTexture(v112, &v184, &v171, v110, CGColorSpace, (v21 + 1332));
        }

        v149 = FxColorDescription::getCGColorSpace(&v198);
        PGHelium::renderNodeToTexture(v112, &v184, &v171, v110, v149, (v21 + 1332));
      }

      if (a9)
      {
        v117 = *a9;
        if (*a9 != v109)
        {
          if (v117)
          {
            (*(*v117 + 24))(v117);
          }

          *a9 = v109;
          if (v109)
          {
            (*(*v109 + 16))(v109);
            goto LABEL_146;
          }

          goto LABEL_145;
        }
      }
    }

    else
    {
      if (*&v153 == 0.0)
      {
        v170 = *&v65;
      }

      else
      {
        atomic_fetch_add_explicit(&v153->__shared_owners_, 1uLL, memory_order_relaxed);
        v108 = *(&v170 + 1);
        *&v170 = v65;
        *(&v170 + 1) = v153;
        if (v108)
        {
          std::__shared_weak_count::__release_shared[abi:ne200100](v108);
        }
      }

      if (!a9)
      {
        goto LABEL_145;
      }

      v113 = *(v21 + 1488);
      if (v113)
      {
      }

      else
      {
        v114 = 0;
      }

      v161.f64[0] = v65;
      *&v161.f64[1] = v153;
      if (*&v153 != 0.0)
      {
        atomic_fetch_add_explicit(&v153->__shared_owners_, 1uLL, memory_order_relaxed);
      }

      v168 = v171.f64[0];
      PGHelium::createTextureNode(&v161, v114, &v168, 0, 0, &v167);
      v115 = v167;
      if (v167)
      {
        *&v167 = 0;
      }

      v150 = v115;
      if (*&v161.f64[1])
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](*&v161.f64[1]);
      }
    }

LABEL_146:
    v164 = 0;
    v162 = 0u;
    v163 = 0u;
    v161 = 0u;
    v118.i64[0] = SLODWORD(v171.f64[0]);
    v118.i64[1] = SHIDWORD(v171.f64[0]);
    v165 = vcvtq_f64_s64(v118);
    v118.i64[0] = SLODWORD(v171.f64[1]);
    v118.i64[1] = SHIDWORD(v171.f64[1]);
    v166 = vcvtq_f64_s64(v118);
    if (a9 && v150)
    {
      *&v161.f64[0] = v150;
      (*(*v150 + 16))(v150);
    }

    if (v18)
    {
      v120 = *v18;
      v119 = v18[1];
      if (v119)
      {
        atomic_fetch_add_explicit(&v119->__shared_owners_, 1uLL, memory_order_relaxed);
      }

      v121 = v164;
      *(&v163 + 1) = v120;
      v164 = v119;
      if (!v121)
      {
        goto LABEL_164;
      }
    }

    else
    {
      v122 = *&v170;
      if (v170)
      {
        v123 = *(&v170 + 1);
        if (*(&v170 + 1))
        {
          atomic_fetch_add_explicit((*(&v170 + 1) + 8), 1uLL, memory_order_relaxed);
        }

        v124 = v162.f64[0];
        v161.f64[1] = v122;
        v162.f64[0] = v123;
        if (v124 != 0.0)
        {
          std::__shared_weak_count::__release_shared[abi:ne200100](*&v124);
        }
      }

      v125 = *&v169;
      if (!v169)
      {
        goto LABEL_164;
      }

      v126 = *(&v169 + 1);
      if (*(&v169 + 1))
      {
        atomic_fetch_add_explicit((*(&v169 + 1) + 8), 1uLL, memory_order_relaxed);
      }

      v121 = v163;
      v162.f64[1] = v125;
      *&v163 = v126;
      if (!v121)
      {
        goto LABEL_164;
      }
    }

    std::__shared_weak_count::__release_shared[abi:ne200100](v121);
LABEL_164:
    PCSharedMutex::lock((v22 + 16616));
    *&v167 = &v203;
    v127 = std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::__emplace_unique_key_args<PSParticleType::HGNodeCacheEntryKey,std::piecewise_construct_t const&,std::tuple<PSParticleType::HGNodeCacheEntryKey const&>,std::tuple<>>(v22 + 16568, &v203);
    v128 = *(v127 + 72);
    v129 = v161.f64[0];
    if (v128 != *&v161.f64[0])
    {
      if (v128)
      {
        (*(*v128 + 24))(v128);
      }

      *(v127 + 72) = v129;
      if (v129 != 0.0)
      {
        (*(**&v129 + 16))(COERCE_FLOAT64_T(*&v129));
      }
    }

    v130 = v161.f64[1];
    v131 = v162.f64[0];
    if (*&v162.f64[0])
    {
      atomic_fetch_add_explicit((*&v162.f64[0] + 8), 1uLL, memory_order_relaxed);
    }

    v132 = *(v127 + 88);
    *(v127 + 80) = v130;
    *(v127 + 88) = v131;
    if (v132)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v132);
    }

    v133 = v162.f64[1];
    v134 = v163;
    if (v163)
    {
      atomic_fetch_add_explicit((v163 + 8), 1uLL, memory_order_relaxed);
    }

    v135 = *(v127 + 104);
    *(v127 + 96) = v133;
    *(v127 + 104) = v134;
    if (v135)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v135);
    }

    v136 = *(&v163 + 1);
    v137 = v164;
    if (v164)
    {
      atomic_fetch_add_explicit(&v164->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v138 = *(v127 + 120);
    *(v127 + 112) = v136;
    *(v127 + 120) = v137;
    if (v138)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v138);
    }

    v139 = v166;
    *(v127 + 128) = v165;
    *(v127 + 144) = v139;
    PCSharedMutex::unlock((v22 + 16616));
    PCSharedMutex::lock((v22 + 16744));
    if (*(v22 + 16736) >= 0x400uLL)
    {
      v140 = *(v22 + 16720);
      std::__tree<std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>,std::__map_value_compare<unsigned int,std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>,std::less<unsigned int>,true>,std::allocator<std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>>>::__remove_node_pointer((v22 + 16720), v140);
      operator delete(v140);
    }

    *&v167 = &v202;
    v141 = std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::__emplace_unique_key_args<PCHash128,std::piecewise_construct_t const&,std::tuple<PCHash128 const&>,std::tuple<>>(v22 + 16720, &v202);
    v142 = v166;
    *(v141 + 48) = v165;
    *(v141 + 64) = v142;
    PCSharedMutex::unlock((v22 + 16744));
    *v19 = SLODWORD(v151);
    *(v19 + 8) = SHIDWORD(v151);
    *(v19 + 16) = v158;
    *(v19 + 24) = v160;
    v143 = v170;
    if (*(&v170 + 1))
    {
      atomic_fetch_add_explicit((*(&v170 + 1) + 8), 1uLL, memory_order_relaxed);
    }

    v144 = *(v155 + 8);
    *v155 = v143;
    if (v144)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v144);
    }

    v145 = v169;
    if (*(&v169 + 1))
    {
      atomic_fetch_add_explicit((*(&v169 + 1) + 8), 1uLL, memory_order_relaxed);
    }

    v146 = *(v154 + 8);
    *v154 = v145;
    if (v146)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v146);
    }

    if (v137)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v137);
    }

    if (v134)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v134);
    }

    if (v131 != 0.0)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](*&v131);
    }

    if (v129 != 0.0)
    {
      (*(**&v129 + 24))(COERCE_FLOAT64_T(*&v129));
    }

    if (*(&v169 + 1))
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](*(&v169 + 1));
    }

    if (*(&v170 + 1))
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](*(&v170 + 1));
    }

    if (v150)
    {
      (*(*v150 + 24))(v150);
    }

    goto LABEL_205;
  }

  PCSharedMutex::lock_shared((v22 + 16744));
  v73 = std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::find<PCHash128>(v22 + 16720, &v202);
  if (v22 + 16728 == v73)
  {
    PCSharedMutex::unlock_shared((v22 + 16744));
    goto LABEL_73;
  }

  PCSharedMutex::lock((v22 + 16616));
  *&v172.f64[0] = &v203;
  v74 = std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::__emplace_unique_key_args<PSParticleType::HGNodeCacheEntryKey,std::piecewise_construct_t const&,std::tuple<PSParticleType::HGNodeCacheEntryKey const&>,std::tuple<>>(v22 + 16568, &v203);
  v75 = v74;
  v76 = *(v73 + 64);
  *(v74 + 128) = *(v73 + 48);
  *(v74 + 144) = v76;
  if (v65 != 0.0)
  {
    if (*&v153 != 0.0)
    {
      atomic_fetch_add_explicit(&v153->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v77 = *(v74 + 88);
    v75[10] = v65;
    v75[11] = *&v153;
    if (v77)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v77);
    }
  }

  if (v67)
  {
    if (v152)
    {
      atomic_fetch_add_explicit(&v152->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v78 = *(v75 + 13);
    *(v75 + 12) = v67;
    *(v75 + 13) = v152;
    if (v78)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v78);
    }
  }

  PCSharedMutex::unlock((v22 + 16616));
  v79 = *(v73 + 64);
  *v19 = *(v73 + 48);
  *(v19 + 16) = v79;
  if (EnableMetalRendering)
  {
    v80 = v152;
    if (v152)
    {
      atomic_fetch_add_explicit(&v152->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v81 = v153;
    v82 = *(v154 + 8);
    *v154 = v67;
    *(v154 + 8) = v152;
    if (!v82)
    {
      goto LABEL_115;
    }
  }

  else
  {
    v81 = v153;
    if (*&v153 != 0.0)
    {
      atomic_fetch_add_explicit(&v153->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v82 = *(v155 + 8);
    *v155 = v65;
    *(v155 + 8) = *&v153;
    v80 = v152;
    if (!v82)
    {
      goto LABEL_115;
    }
  }

  std::__shared_weak_count::__release_shared[abi:ne200100](v82);
LABEL_115:
  PCSharedMutex::unlock_shared((v22 + 16744));
  PSTextureCache::CacheEntry::~CacheEntry(&v180);
  if (*&v185.timescale)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](*&v185.timescale);
  }

LABEL_215:
  if (v80)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v80);
  }

  if (v81)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v81);
  }

  std::__list_imp<unsigned int>::clear(v201);
  PCHashWriteStream::~PCHashWriteStream(&__y);
}

void sub_2602B63C8(_Unwind_Exception *a1, int a2)
{
  if (a2)
  {
    __clang_call_terminate(a1);
  }

  _Unwind_Resume(a1);
}

CGColorSpace **PSParticleType::buildParticleRenderGraph(uint64_t a1, uint64_t a2, double *a3, uint64_t a4, uint64_t a5, uint64_t a6, const OZRenderGraphState *a7)
{
  v12 = *(a3 + 1);
  v13 = *(v12 + 16);
  *&v45.value = *v12;
  v45.epoch = v13;
  v44 = *(a4 + 80);
  if (*(a4 + 104) > 0.0)
  {
    memset(v43, 0, sizeof(v43));
    v22 = v45;
    v23[0] = *(a4 + 8);
    PC_CMTimeSaferSubtract(&v22, v23, v43);
    operator/(v43, v21, *(a4 + 104));
    v23[0] = v44;
    v31 = v21[0];
    PC_CMTimeSaferAdd(v23, &v31, &v22);
    v44 = v22;
    v41 = *(a1 + 16464);
    v42 = *(a1 + 16480);
    memset(&v40, 0, sizeof(v40));
    operator/(&v44.value, &v41, &v40);
    CMTimeMake(&v30, 1, 1);
    v22 = v40;
    v23[0] = v30;
    PC_CMTimeFloorToSampleDuration(&v22, v23, v21);
    v22 = v40;
    v23[0] = v21[0];
    PC_CMTimeSaferSubtract(&v22, v23, &v31);
    operator*(&v31.value, &v41, &v22);
    v40 = v22;
    v44 = v22;
  }

  v14 = *(a1 + 16440);
  v31.epoch = *(a1 + 16456);
  *&v31.value = v14;
  v23[0] = v44;
  PC_CMTimeSaferAdd(v23, &v31, &v22);
  v44 = v22;
  v15 = *(a1 + 16488);
  if (v15)
  {
  }

  else
  {
    v16 = 0;
  }

  v39 = 0x3FF0000000000000;
  v36 = 0x3FF0000000000000;
  v33 = 0x3FF0000000000000;
  v31.value = 0x3FF0000000000000;
  *&v31.timescale = 0u;
  v32 = 0u;
  v34 = 0u;
  v35 = 0u;
  v37 = 0u;
  v38 = 0u;
  if (v16 && (*(*v16 + 248))(v16))
  {
    PSParticleType::getImageParticleMatrix3D(a1, a3, a4, a5, &v31);
  }

  else
  {
    PSParticleType::getImageParticleMatrix(a1, *(a3 + 1), a4, a5, &v31, *(a3 + 1497));
    if (*(a3 + 1498) == 1 && *(*(a3 + 1) + 242) == 1)
    {
      adjustImageParticleMatrixForFacingCameraEquirectRender(a3, &v31.value);
    }
  }

  WorkingColorSpace = OZRenderParams::getWorkingColorSpace(*(a3 + 1));
  PCWorkingColor::PCWorkingColor(&v30, 0.0, 0.0, 0.0, 0.0, WorkingColorSpace);
  (*(*a1 + 1600))(a1, &v45, a4, *a3, &v30);
  if (*(a1 + 16528))
  {
    v18 = 8;
  }

  else
  {
    v18 = 0;
  }

  OZRenderGraphState::OZRenderGraphState(v23, a7);
  v28 = 1;
  v29 = v18;
  if (v16 && (*(*v16 + 248))(v16))
  {
    operator new();
  }

  v22.value = 0;
  PCSharedCount::PCSharedCount(&v22.timescale);
  (*(*a1 + 1632))(v21, a1, *(a3 + 1), &v44, 1);
  v22.value = v21[0].value;
  PCSharedCount::PCSharedCount(v43, &v21[0].timescale);
  PCSharedCount::operator=(&v22.timescale, v43);
  PCSharedCount::~PCSharedCount(v43);
  PCSharedCount::~PCSharedCount(&v21[0].timescale);
  if (v22.value)
  {
    operator new();
  }

  PCSharedCount::~PCSharedCount(&v22.timescale);
  v25 = &unk_2871F25A8;
  if (v26 < 0)
  {
    v19 = 1;
  }

  else
  {
    v19 = v26;
  }

  PCArray<LiLight,PCArray_Traits<LiLight>>::resize(&v25, 0, v19);
  if (v27)
  {
    MEMORY[0x2666E9ED0](v27, 0x1000C8077774924);
  }

  v27 = 0;
  v26 = 0;
  std::__list_imp<unsigned int>::clear(v24);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v30.epoch);
}

void sub_2602B7244(_Unwind_Exception *a1)
{
  MEMORY[0x2666E9F00](v1, 0x10A1C40063EAE96);
  PCSharedCount::~PCSharedCount(v3 + 1);
  PCSharedCount::~PCSharedCount(v2 + 1);
  OZRenderGraphState::~OZRenderGraphState(&STACK[0x5F0]);
  PCCFRef<CGColorSpace *>::~PCCFRef(&STACK[0x738]);
  _Unwind_Resume(a1);
}

void PSParticleType::setGeodeProperties(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v9 = *a2;
  v8 = *(a2 + 8);
  DoHighQualityResampling = OZRenderParams::getDoHighQualityResampling(v8);
  (*(*a4 + 280))(a4, DoHighQualityResampling);
  if (*a3 == 1 && !OZChannel::getValueAsInt((*&v9 + 32792), MEMORY[0x277CC08F0], 0.0))
  {
    (*(*a4 + 192))(a4, *(a3 + 8));
    *(a4 + 680) = *(a3 + 48);
    if (*(a3 + 16) == 1)
    {
      (*(*a4 + 208))(a4, *(a3 + 24));
      (*(*a4 + 224))(a4, *(a3 + 32));
      (*(*a4 + 240))(a4, *(a3 + 40));
    }

    if (*(a3 + 56) > 0.0)
    {
      (*(*a4 + 256))(a4);
    }
  }

  else
  {
    (*(*a4 + 192))(a4, 0.0);
  }

  *(a4 + 552) &= *(a3 + 288);
  *(a4 + 553) &= *(a3 + 289);
  *(a4 + 696) = *(a3 + 88);
  if (*(a3 + 72) != a3 + 64)
  {
    operator new();
  }

  v11 = *(v8 + 160);
  v22 = v11;
  if (v11)
  {
    v12 = (v11 + *(*v11 - 24));
  }

  else
  {
    v12 = 0;
  }

  PCSharedCount::PCSharedCount(v23, v12);
  if ((*(*(*&v9 + 200) + 2152))(*&v9 + 200, a3 + 224, v8))
  {
    v20 = 0uLL;
    __asm { FMOV            V0.2D, #-1.0 }

    v21 = _Q0;
    OZRenderState::OZRenderState(&v19, v8);
    v19.var9 = 1;
    (*(**(a1 + 16488) + 88))(*(a1 + 16488), &v20, &v19);
    v18 = v21;
    *(a4 + 704) = v20;
    *(a4 + 720) = v18;
  }

  (*(**&v9 + 144))(COERCE_DOUBLE(*&v9), v8, a3, a4);
  PSParticleType::buildLighting(a1, a4, a3 + 224, a2);
  PCSharedCount::~PCSharedCount(v23);
}

void PSParticleType::buildRenderGraph(PSParticleType *this, OZRenderParams *a2, LiGraphBuilder *a3, const OZRenderGraphState *a4)
{
  *(this + 2061) = (*(*this + 1336))(this);
  v10 = 0;
  PCSharedCount::PCSharedCount(&v11);
  v6 = *a2;
  v7 = *(a2 + 2);
  (*(*this + 1632))(&v8, this, a2, &v6, 0);
  v10 = v8;
  PCSharedCount::PCSharedCount(&v12, &v9);
  PCSharedCount::operator=(&v11, &v12);
  PCSharedCount::~PCSharedCount(&v12);
  PCSharedCount::~PCSharedCount(&v9);
  if (v10)
  {
    operator new();
  }

  PCSharedCount::~PCSharedCount(&v11);
}

void sub_2602B7978(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, PCSharedCount a16)
{
  PCSharedCount::~PCSharedCount(v16 + 1);
  PCSharedCount::~PCSharedCount(v17 + 1);
  PCSharedCount::~PCSharedCount(v18 + 1);
  _Unwind_Resume(a1);
}

void PSParticleType::addSprite(PSParticleType *this, PSEmitter::RenderParams *a2, PSParticle *a3, OZSimStateElement *a4, PSHeliumNode *a5)
{
  v5 = *(this + 4133);
  if (!*(this + 2061))
  {
    v5 = 0;
  }

  if (v5 > 1)
  {
    if (v5 == 2)
    {
      PSParticleType::addOutlineSprite(this, a2, a3, a4, a5);
    }

    else if (v5 == 3)
    {
      PSParticleType::addImageSprite(this, a2, a3, a4, a5);
    }
  }

  else if (v5)
  {
    if (v5 == 1)
    {
      PSParticleType::addLineSprite(this, a2, a3, a4, a5);
    }
  }

  else
  {
    PSParticleType::addPointSprite(this, a2, a3, a4, a5);
  }
}

void PSParticleType::preRenderFrame(PSParticleType *this, const OZRenderParams *a2)
{
  v4 = this + 0x4000;
  (*(*this + 1640))(this);
  v4[145] = PSParticleType::isSourceSingleFrame(this);
  v5 = MEMORY[0x277CC08F0];
  *(v4 + 37) = OZChannel::getValueAsInt((this + 11344), MEMORY[0x277CC08F0], 0.0);
  v4[144] = OZChannel::getValueAsInt((this + 9968), v5, 0.0) != 0;
  v4[160] = OZChannel::getValueAsInt((this + 14552), v5, 0.0) != 0;
  OZChannel::getValueAsDouble((this + 14704), v5, 0.0);
  *(this + 2069) = v6;
  v10 = *a2;
  v7 = 1.0;
  if (!*(v4 + 37))
  {
    OZRenderParams::getResolution(a2, &v11);
    if (v11.n128_f64[0] >= v11.n128_f64[1])
    {
      v8 = v11.n128_f64[0];
    }

    else
    {
      v8 = v11.n128_f64[1];
    }

    OZChannel::getValueAsDouble((this + 11752), &v10, 0.0);
    v7 = v8 * v9;
  }

  *(this + 2067) = v7;
}

BOOL PSParticleType::isSourceSingleFrame(PSParticleType *this)
{
  if (OZChannel::getValueAsInt((this + 11344), MEMORY[0x277CC08F0], 0.0) != 3)
  {
    return 1;
  }

  v2 = (*(*this + 1336))(this);
  if (!v2)
  {
    return 1;
  }

  if (!v3)
  {
    return 1;
  }

  v4 = v3;
  if (!(*(*v3 + 264))(v3))
  {
    return 1;
  }

  memset(&v9, 0, sizeof(v9));
  (*(*v4 + 280))(&v9, v4);
  v5 = (*(*v4 + 264))(v4);
  OZSceneSettings::getFrameDuration((v5 + 336), &v7);
  time1 = v9;
  *&time2.value = v7;
  time2.epoch = v8;
  return CMTimeCompare(&time1, &time2) < 1;
}

void PSParticleType::postRenderFrame(PSParticleType *this, const OZRenderParams *a2)
{
  PCSharedMutex::lock((this + 16616));
  std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::destroy(this + 16568, *(this + 2072));
  *(this + 2071) = this + 16576;
  *(this + 1036) = 0u;
  std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::destroy(this + 16592, *(this + 2075));
  *(this + 2074) = this + 16600;
  *(this + 16600) = 0u;
  PCSharedMutex::unlock((this + 16616));
  PCSharedMutex::lock((this + 16872));
  *(this + 2107) = *(this + 2106);

  PCSharedMutex::unlock((this + 16872));
}

uint64_t PSParticleType::setImageNode(PSParticleType *this, OZImageNode *lpsrc)
{
  v3 = 0.0;
  if (lpsrc)
  {
    if (v4)
    {
      LODWORD(v5) = v4[20];
      v3 = v5;
    }
  }

  OZChanSceneNodeRef::setValue((this + 14392), MEMORY[0x277CC08F0], v3, 0);
  OZChannel::setDefaultValue((this + 14392), v3);
  v6 = *(*this + 1640);

  return v6(this);
}

OZFactories *PSParticleType::markFactoriesForSerialization(PSParticleType *this, PCSerializerWriteStream *a2)
{
  OZSceneNode::markFactoriesForSerialization(this, a2);

  return OZChannelGradient::markFactoriesForSerialization((this + 6784), a2, 0);
}

OZFactories *non-virtual thunk toPSParticleType::markFactoriesForSerialization(PSParticleType *this, PCSerializerWriteStream *a2)
{
  OZSceneNode::markFactoriesForSerialization(this - 6, a2);

  return OZChannelGradient::markFactoriesForSerialization((this + 6736), a2, 0);
}

OZChannelBase *PSParticleType::didCreateCopyForCopyOnWrite(PSParticleType *this, double a2)
{
  LODWORD(a2) = *(this + 20);
  OZChannel::setDefaultValue((this + 11600), *&a2);
  OZChannel::resetCurve((this + 11600));

  return OZChannelBase::resetFlag((this + 11600), 0x100000000, 1);
}

void *PSParticleType::willRemoveFromScene(PSParticleType *this, OZScene *a2)
{
  OZSceneNode::willRemoveFromScene(this, a2);
  OZSystemSimulator::willRemoveFromScene((this + 15520), a2);

  return OZSystemSimulator::willRemoveFromScene((this + 16080), a2);
}

void *PSParticleType::simGetForceBehaviors(uint64_t a1, uint64_t a2, __int128 *a3)
{
  v4 = (*(*a1 + 640))(a1);
  std::list<OZSimulationBehavior *>::list(&v16, v4 + 224);
  for (i = v17; i != &v16; i = i[1])
  {
    v6 = i[2];
    {
      v14 = *a3;
      v15 = *(a3 + 2);
      if ((*(*v6 + 296))(v6, &v14, 0, 1, 1))
      {
        operator new();
      }
    }
  }

  for (j = *(v4 + 48); j; j = *(j + 48))
  {
    if ((*(j + 57) & 0x20) != 0)
    {
      if (v8)
      {
        std::list<OZSimulationBehavior *>::list(&v14, v8 + 224);
        for (k = *(&v14 + 1); k != &v14; k = *(k + 8))
        {
          v10 = *(k + 16);
          {
            v12 = *a3;
            v13 = *(a3 + 2);
            if ((*(*v10 + 296))(v10, &v12, 0, 1, 1))
            {
              operator new();
            }
          }
        }

        std::__list_imp<unsigned int>::clear(&v14);
      }
    }
  }

  return std::__list_imp<unsigned int>::clear(&v16);
}

void sub_2602B8440(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, ...)
{
  va_start(va, a8);
  std::__list_imp<unsigned int>::clear(va);
  _Unwind_Resume(a1);
}

void *PSParticleType::simGetCollisionBehaviors(uint64_t a1, uint64_t a2, __int128 *a3)
{
  v4 = (*(*a1 + 640))(a1);
  std::list<OZSimulationBehavior *>::list(&v17, v4 + 224);
  for (i = v18; i != &v17; i = i[1])
  {
    v6 = i[2];
    if (v6)
    {
      {
        v15 = *a3;
        v16 = *(a3 + 2);
        if ((*(*v6 + 296))(v6, &v15, 0, 1, 1))
        {
          operator new();
        }
      }
    }
  }

  for (j = *(v4 + 48); j; j = *(j + 48))
  {
    if ((*(j + 57) & 0x20) != 0)
    {
      if (v8)
      {
        std::list<OZSimulationBehavior *>::list(&v15, v8 + 224);
        for (k = *(&v15 + 1); k != &v15; k = *(k + 8))
        {
          v10 = *(k + 16);
          if (v10)
          {
            v11 = *v10;
            {
              if (((*(v11 + 656))(v10) & 1) == 0)
              {
                v13 = *a3;
                v14 = *(a3 + 2);
                if ((*(*v10 + 296))(v10, &v13, 0, 1, 1))
                {
                  operator new();
                }
              }
            }
          }
        }

        std::__list_imp<unsigned int>::clear(&v15);
      }
    }
  }

  return std::__list_imp<unsigned int>::clear(&v17);
}

void sub_2602B87A0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, ...)
{
  va_start(va, a8);
  std::__list_imp<unsigned int>::clear(va);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::simAnyCollisionBehaviors(PSParticleType *this)
{
  v1 = (*(*this + 640))(this);
  std::list<OZSimulationBehavior *>::list(&v10, v1 + 224);
  for (i = v11; i != &v10; i = i[1])
  {
    v3 = i[2];
    if ((*(v3[2] + 24))())
    {
      {
        goto LABEL_18;
      }
    }
  }

  v4 = *(v1 + 48);
  if (v4)
  {
    while (1)
    {
      if ((*(v4 + 57) & 0x20) != 0)
      {
        if (v5)
        {
          break;
        }
      }

LABEL_15:
      v4 = *(v4 + 48);
      if (!v4)
      {
        goto LABEL_19;
      }
    }

    std::list<OZSimulationBehavior *>::list(v9, v5 + 224);
    for (j = v9[1]; ; j = j[1])
    {
      if (j == v9)
      {
        std::__list_imp<unsigned int>::clear(v9);
        goto LABEL_15;
      }

      v7 = j[2];
      {
        break;
      }
    }

    std::__list_imp<unsigned int>::clear(v9);
LABEL_18:
    v4 = 1;
  }

LABEL_19:
  std::__list_imp<unsigned int>::clear(&v10);
  return v4;
}

void sub_2602B8A5C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__list_imp<unsigned int>::clear(va);
  _Unwind_Resume(a1);
}

void *PSParticleType::simGetAllBehaviors(uint64_t a1)
{
  v1 = (*(*a1 + 640))(a1);
  std::list<OZSimulationBehavior *>::list(v7, v1 + 224);
  if (v7[1] != v7)
  {
    operator new();
  }

  for (i = *(v1 + 48); i; i = *(i + 48))
  {
    if ((*(i + 57) & 0x20) != 0)
    {
      if (v3)
      {
        std::list<OZSimulationBehavior *>::list(v6, v3 + 224);
        for (j = v6[1]; j != v6; j = *(j + 8))
        {
          if (((*(**(j + 16) + 656))(*(j + 16)) & 1) == 0)
          {
            operator new();
          }
        }

        std::__list_imp<unsigned int>::clear(v6);
      }
    }
  }

  return std::__list_imp<unsigned int>::clear(v7);
}

void sub_2602B8C78(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__list_imp<unsigned int>::clear(va);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::areAnyLinkBehaviorsSourcingObjectsInSet(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v3 = *(a2 + 8);
  if (v3 == a2)
  {
    return 0;
  }

  v5 = (a3 + 8);
  while (1)
  {
    v6 = *(v3 + 16);
    if (v6)
    {
      if (v7)
      {
        Object = OZChanObjectManipRef::getObject((v7 + 1064));
        if (Object)
        {
          v9 = (*(*Object + 256))(Object);
          v10 = (*(*v9 + 56))(v9);
          v11 = *v5;
          if (*v5)
          {
            v12 = v5;
            do
            {
              v13 = *(v11 + 28);
              v14 = v13 >= v10;
              v15 = v13 < v10;
              if (v14)
              {
                v12 = v11;
              }

              v11 = *(v11 + 8 * v15);
            }

            while (v11);
            if (v12 != v5 && v10 >= *(v12 + 7))
            {
              break;
            }
          }
        }
      }
    }

    v3 = *(v3 + 8);
    if (v3 == a2)
    {
      return 0;
    }
  }

  return 1;
}

uint64_t PSParticleType::simDoesDependOnSceneNodes(uint64_t a1, uint64_t a2)
{
  v3 = a1;
  if (!a1)
  {
LABEL_15:
    v12 = (*(*v3 + 640))(v3);
    std::list<OZSimulationBehavior *>::list(&v41, v12 + 224);
    v14 = v42;
    if (v42 == &v41)
    {
LABEL_31:
      v24 = *(v12 + 48);
      if (!v24)
      {
LABEL_63:
        std::__list_imp<unsigned int>::clear(&v41);
        return v24;
      }

      v25 = (a2 + 8);
      while (1)
      {
        if ((*(v24 + 57) & 0x20) != 0)
        {
          if (v26)
          {
            break;
          }
        }

LABEL_58:
        v24 = *(v24 + 48);
        if (!v24)
        {
          goto LABEL_63;
        }
      }

      v27 = v26;
      v28 = (*(*v26 + 840))(v26);
      if (v28)
      {
      }

      else
      {
        v29 = 0;
      }

      std::list<OZSimulationBehavior *>::list(v40, v27 + 224);
      for (i = v40[1]; ; i = i[1])
      {
        if (i == v40)
        {
          std::__list_imp<unsigned int>::clear(v40);
          goto LABEL_58;
        }

        v31 = i[2];
        if (OZBehavior::isEnabledAndUseBehaviors(v31) && ((*(*v31 + 656))(v31) & 1) == 0)
        {
          v32 = (*(*v31 + 664))(v31);
          if (v32 != v29 && v32 != 0)
          {
            break;
          }
        }

LABEL_56:
        ;
      }

      v34 = *(v32 + 80);
      while (1)
      {
        if (*v25)
        {
          v35 = a2 + 8;
          v36 = *v25;
          do
          {
            v37 = *(v36 + 28);
            v9 = v37 >= v34;
            v38 = v37 < v34;
            if (v9)
            {
              v35 = v36;
            }

            v36 = *(v36 + 8 * v38);
          }

          while (v36);
          if (v35 != v25 && v34 >= *(v35 + 28))
          {
            break;
          }
        }

        v32 = *(v32 + 960);
        if (!v32)
        {
          goto LABEL_56;
        }
      }

      std::__list_imp<unsigned int>::clear(v40);
    }

    else
    {
      v15 = (a2 + 8);
      while (1)
      {
        v16 = v14[2];
        if (OZBehavior::isEnabledAndUseBehaviors(v16))
        {
          v17 = (*(*v16 + 664))(v16);
          if (v17 != v13 && v17 != 0)
          {
            v19 = *v15;
            if (*v15)
            {
              v20 = *(v17 + 80);
              v21 = a2 + 8;
              do
              {
                v22 = *(v19 + 28);
                v9 = v22 >= v20;
                v23 = v22 < v20;
                if (v9)
                {
                  v21 = v19;
                }

                v19 = *(v19 + 8 * v23);
              }

              while (v19);
              if (v21 != v15 && v20 >= *(v21 + 28))
              {
                break;
              }
            }
          }
        }

        v14 = v14[1];
        if (v14 == &v41)
        {
          goto LABEL_31;
        }
      }
    }

    v24 = 1;
    goto LABEL_63;
  }

  v4 = a1;
  while (1)
  {
    if (*(a2 + 8))
    {
      v5 = *(v4 + 80);
      v6 = a2 + 8;
      v7 = *(a2 + 8);
      do
      {
        v8 = *(v7 + 28);
        v9 = v8 >= v5;
        v10 = v8 < v5;
        if (v9)
        {
          v6 = v7;
        }

        v7 = *(v7 + 8 * v10);
      }

      while (v7);
      if (v6 != a2 + 8 && v5 >= *(v6 + 28))
      {
        return 1;
      }
    }

    v4 = *(v4 + 960);
    if (!v4)
    {
      v11 = a1;
      while (1)
      {
        a1 = PSParticleType::areAnyLinkBehaviorsSourcingObjectsInSet(a1, v11 + 1000, a2);
        if (a1)
        {
          return 1;
        }

        v11 = *(v11 + 960);
        if (!v11)
        {
          goto LABEL_15;
        }
      }
    }
  }
}

void sub_2602B91F0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__list_imp<unsigned int>::clear(va);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::simGetTransformNode(PSParticleType *this)
{
  v1 = *(this + 2054);
  if (v1)
  {
    return v1 + 200;
  }

  else
  {
    return 0;
  }
}

uint64_t non-virtual thunk toPSParticleType::simGetTransformNode(PSParticleType *this)
{
  v1 = *(this + 1915);
  if (v1)
  {
    return v1 + 200;
  }

  else
  {
    return 0;
  }
}

void PSParticleType::simGetTransformMatrix(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  OZRenderState::OZRenderState(&v9);
  *&v9.var0.var0 = *a4;
  v9.var0.var3 = *(a4 + 16);
  v9.var8 = 0;
  v8 = *(a1 + 16432);
  if (a1 + 15800 == a2)
  {
    PSEmitter::getPreviewTransformMatrix(v8, a3, &v9);
  }

  else
  {
    (*(v8[1].var6 + 157))(&v8[1].var6, a3, &v9);
  }
}

double PSParticleType::simGetInvTransformMatrix(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  OZRenderState::OZRenderState(&v10);
  *&v10.var0.var0 = *a4;
  v10.var0.var3 = *(a4 + 16);
  v10.var8 = 0;
  v8 = *(a1 + 16432);
  if (a1 + 15800 == a2)
  {
    return PSEmitter::getInvPreviewTransformMatrix(v8, a3, &v10);
  }

  (*(v8[1].var6 + 158))(&v8[1].var6, a3, &v10);
  return result;
}

double PSParticleType::simGetSceneFrameDuration@<D0>(PSParticleType *this@<X0>, __n128 *a2@<X8>)
{
  v3 = ((*(*this + 272))(this) + 336);

  *&result = OZSceneSettings::getFrameDuration(v3, a2).n128_u64[0];
  return result;
}

double non-virtual thunk toPSParticleType::simGetSceneFrameDuration@<D0>(PSParticleType *this@<X0>, __n128 *a2@<X8>)
{
  v3 = ((*(*(this - 139) + 272))(this - 1112) + 336);

  *&result = OZSceneSettings::getFrameDuration(v3, a2).n128_u64[0];
  return result;
}

double PSParticleType::simGetFirstFrame@<D0>(PSParticleType *this@<X0>, uint64_t a2@<X8>)
{
  (*(*this + 1128))(&v5);
  result = *&v5;
  *a2 = v5;
  *(a2 + 16) = v6;
  return result;
}

double non-virtual thunk toPSParticleType::simGetFirstFrame@<D0>(PSParticleType *this@<X0>, uint64_t a2@<X8>)
{
  (*(*(this - 139) + 1128))(&v5);
  result = *&v5;
  *a2 = v5;
  *(a2 + 16) = v6;
  return result;
}

char *PSParticleType::getParticlesForSimStyleType(PSParticleType *this, int a2)
{
  v2 = this + 0x4000;
  v3 = this + 16360;
  if (a2)
  {
    v3 = 0;
  }

  if (a2 != 1)
  {
    v2 = v3;
  }

  if (a2 == 2)
  {
    return this + 16408;
  }

  else
  {
    return v2;
  }
}

uint64_t PSParticleType::simAddObjects(PSParticleType *this, OZSystemSimulator *a2, OZSimStateArray *a3, double a4)
{
  if ((this + 15800) == a2)
  {
    v6 = 1;
  }

  else
  {
    v6 = 2;
  }

  if ((this + 15520) == a2)
  {
    v7 = 0;
  }

  else
  {
    v7 = v6;
  }

  v42 = *(a3 + 1);
  memset(&v41, 0, sizeof(v41));
  v8 = (*(*(*(this + 2054) + 200) + 272))();
  OZSceneSettings::getFrameDuration((v8 + 336), &v41);
  FrameRate = PSEmitter::getFrameRate(*(this + 2054));
  ValueAsInt = OZChannel::getValueAsInt((*(this + 2054) + 28408), &v42, 0.0);
  OZChannel::getValueAsDouble((this + 1120), &v42, 0.0);
  v12 = v11;
  PSEmitter::getBirthRateFraction(*(this + 2054), &v42);
  v14 = v13;
  OZChannel::getValueAsDouble((this + 1272), &v42, 0.0);
  v16 = 25.0;
  if (!ValueAsInt)
  {
    v16 = FrameRate;
  }

  v17 = v12 / v16 * v14;
  v18 = v15 / v16;
  if (v15 / v16 > 0.0)
  {
    time = v42;
    Seconds = CMTimeGetSeconds(&time);
    v20 = (FrameRate * (Seconds + Seconds));
    ValueAsUint = OZChannel::getValueAsUint((this + 11600), MEMORY[0x277CC08F0], 0.0);
    v22 = -32;
    v23 = -1640531527;
    v24 = v20;
    do
    {
      v24 += (v20 + 16 * ValueAsUint) ^ (ValueAsUint + v23) ^ (PCRandom::hashTEA(unsigned int,unsigned int,unsigned int)::kK1 + (ValueAsUint >> 5));
      ValueAsUint += (PCRandom::hashTEA(unsigned int,unsigned int,unsigned int)::kK2 + 16 * v24) ^ (v23 + v24) ^ (PCRandom::hashTEA(unsigned int,unsigned int,unsigned int)::kK3 + (v24 >> 5));
      v23 -= 1640531527;
    }

    while (!__CFADD__(v22++, 1));
    v17 = v17 + v18 * ((ValueAsUint ^ v24) / 4294967300.0);
  }

  memset(&v40, 0, sizeof(v40));
  operator*(&v41, &v40, -1.0);
  (*(*this + 1128))(&time, this);
  time2 = time;
  time = v42;
  PC_CMTimeSaferSubtract(&time, &time2, &v38);
  time = v38;
  time2 = v41;
  v26 = &OBJC_INSTANCE_METHODS_PVEffectLoadDelegate;
  if (CMTimeCompare(&time, &time2) < 0 && ((v29 = *(this + 2045), v29 == *(this + 2046)) || (v30 = *v29, time = v42, time2 = v40, PC_CMTimeSaferAdd(&time, &time2, &v37), v31 = *(v30 + 8), time.epoch = *(v30 + 24), *&time.value = v31, time2 = v37, !CMTimeCompare(&time, &time2))))
  {
    v28 = 1;
  }

  else
  {
    v27 = (*(*(this + 139) + 80))();
    v28 = v27 ^ 1;
    if (fabs(v17) < 0.0000001 && (v27 & 1) != 0)
    {
      return 0;
    }
  }

  LODWORD(v26) = vcvtmd_s64_f64(v17 + 0.0000001);
  v32 = v17 - v26;
  if (v32 > 0.0)
  {
    if (*(this + 16560) == 1)
    {
      time = v42;
      v33 = FrameRate * CMTimeGetSeconds(&time);
    }

    else
    {
      operator/(&v42.value, &v41, &time);
      v33 = CMTimeGetSeconds(&time);
    }

    if (v32 * v33 - floor(v32 * v33 + 0.0000001) >= v32 * 0.9)
    {
      v26 = v26;
    }

    else
    {
      v26 = (v26 + 1);
    }
  }

  if (v28)
  {
    PSEmitter::getInitialNumFraction(*(this + 2054), &v42);
    v26 = v26 + vcvtmd_s64_f64(v34 * OZChannel::getValueAsInt((this + 1424), &v42, 0.0) + 0.0000001);
  }

  if (v26 < 1)
  {
    return 0;
  }

  Particles = PSParticleType::findOrCreateParticles(this, v7, v26, a3);
  PSEmitter::initParticles(*(this + 2054), v7, this, Particles, 0, a3);
  return Particles;
}

uint64_t PSParticleType::findOrCreateParticles(PSParticleType *this, int a2, uint64_t a3, OZSimStateArray *a4)
{
  v7 = (this + 0x4000);
  v8 = (this + 16360);
  if (a2)
  {
    v8 = 0;
  }

  if (a2 != 1)
  {
    v7 = v8;
  }

  if (a2 == 2)
  {
    v9 = (this + 16408);
  }

  else
  {
    v9 = v7;
  }

  if (!(*(*(this + 139) + 80))())
  {
    v9 = 0;
  }

  v27 = *(a4 + 1);
  v25 = 0uLL;
  v26 = 0;
  v10 = (*(*(*(this + 2054) + 200) + 272))();
  OZSceneSettings::getFrameDuration((v10 + 336), &v25);
  if (v9)
  {
    v11 = (v9[1] - *v9) >> 3;
  }

  else
  {
    LODWORD(v11) = 0;
  }

  v12 = -1108378657 * ((*(a4 + 1) - *a4) >> 3);
  std::vector<OZSimStateElement>::resize(a4, (v12 + a3));
  if (!v11 || (v13 = (*v9)[(v11 - 1)], time1 = v27, *&time2.value = v25, time2.epoch = v26, PC_CMTimeSaferSubtract(&time1, &time2, &v24), v14 = *(v13 + 8), time1.epoch = *(v13 + 24), *&time1.value = v14, time2 = v24, CMTimeCompare(&time1, &time2) < 0))
  {
    PSParticleType::createParticles(this, v9, a3, a4);
  }

  else
  {
    for (i = *v9; ; ++i)
    {
      v16 = v9[1];
      if (i == v16)
      {
        break;
      }

      v17 = *i;
      time1 = v27;
      *&time2.value = v25;
      time2.epoch = v26;
      PC_CMTimeSaferSubtract(&time1, &time2, &v24);
      v18 = *(v17 + 8);
      time1.epoch = *(v17 + 24);
      *&time1.value = v18;
      time2 = v24;
      if ((CMTimeCompare(&time1, &time2) & 0x80000000) == 0)
      {
        v16 = v9[1];
        break;
      }
    }

    if (i == v16)
    {
      v19 = 0;
    }

    else
    {
      v19 = 0;
      do
      {
        v20 = *(*i + 8);
        time1.epoch = *(*i + 24);
        *&time1.value = v20;
        time2 = v27;
        if ((CMTimeCompare(&time1, &time2) & 0x80000000) == 0)
        {
          v21 = *(*i + 8);
          time1.epoch = *(*i + 24);
          *&time1.value = v21;
          time2 = v27;
          if (CMTimeCompare(&time1, &time2) > 0 || ((*(*this + 1488))(this) & 1) != 0)
          {
            break;
          }
        }

        if (v19 >= a3)
        {
          break;
        }

        v22 = *i++;
        *(*a4 + 248 * (v12 + v19) + 232) = v22;
        v19 = (v19 + 1);
      }

      while (i != v9[1]);
    }

    if (v19 != a3)
    {
      std::vector<OZSimStateElement>::resize(a4, 0xEF7BDEF7BDEF7BDFLL * ((*(a4 + 1) - *a4) >> 3) + v19 - a3);
      return v19;
    }
  }

  return a3;
}

void PSParticleType::createParticles(uint64_t a1, void *a2, unsigned int a3, uint64_t *a4)
{
  v5 = a3;
  v24 = *(a4 + 3);
  v25 = a4[5];
  v9 = *a4;
  v8 = a4[1];
  if (a2)
  {
    v10 = (a2[1] - *a2) >> 3;
    std::vector<TXParagraphStyle *>::resize(a2, v10 + a3);
  }

  else
  {
    v10 = 0;
  }

  v11 = 1.0 / v5;
  memset(&v23, 0, sizeof(v23));
  v12 = (*(*a1 + 272))(a1);
  FrameDuration = OZSceneSettings::getFrameDuration((v12 + 336), &v23);
  v14 = (*(*a1 + 1488))(a1, FrameDuration);
  if (!v14)
  {
    v11 = 0.0;
  }

  if (v5)
  {
    v15 = -1108378657 * ((v8 - v9) >> 3) - v5;
    if (v14)
    {
      v16 = 0.0;
    }

    else
    {
      v16 = 1.0;
    }

    do
    {
      v17 = (*(*a1 + 1480))(a1, v10, &v24);
      v18 = v17;
      if (a2)
      {
        *(*a2 + 8 * v10) = v17;
      }

      operator*(&v23, &v22, 1.0 - v16);
      v19 = *(v18 + 8);
      v27.epoch = *(v18 + 24);
      *&v27.value = v19;
      v26 = v22;
      PC_CMTimeSaferSubtract(&v27, &v26, &v28);
      v20 = v29;
      *(v18 + 8) = v28;
      *(v18 + 24) = v20;
      v21 = *a4 + 248 * v15;
      *(v21 + 232) = v18;
      *(v21 + 240) = a2 == 0;
      v10 = (v10 + 1);
      ++v15;
      v16 = v11 + v16;
      --v5;
    }

    while (v5);
  }
}

double PSParticleType::simFlushedCache(PSParticleType *this, OZSystemSimulator *a2)
{
  v4 = (this + 15520);
  v5 = 16408;
  if ((this + 15800) == a2)
  {
    v5 = 0x4000;
  }

  if (v4 == a2)
  {
    v5 = 16360;
  }

  v6 = this + v5;
  v7 = *(this + v5);
  if (v7 != *(this + v5 + 8))
  {
    do
    {
      if (*v7)
      {
        (*(**v7 + 8))(*v7);
      }

      *v7++ = 0;
    }

    while (v7 != *(v6 + 1));
    v7 = *v6;
  }

  *(v6 + 1) = v7;
  (*(*this + 1640))(this);
  if (v4 == a2)
  {
    *(this + 15464) = 1;
    std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 15472, *(this + 1935));
    *(this + 1934) = this + 15480;
    *(this + 15480) = 0u;
    std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 15496, *(this + 1938));
    *(this + 1937) = this + 15504;
    result = 0.0;
    *(this + 969) = 0u;
  }

  return result;
}

void *PSParticleType::setEmitter(void *this, PSEmitter *a2)
{
  this[2054] = a2;
  if (this[127])
  {
    this = *(this[125] + 16);
    if (this)
    {
      if (this)
      {
        if (a2)
        {
          v3 = (a2 + 200);
        }

        else
        {
          v3 = 0;
        }

        return OZSimSystemMoToFoBehavior::updateTransformNode(this, v3);
      }
    }
  }

  return this;
}

uint64_t PSParticleType::getPreviewSceneNode(PSParticleType *this)
{
  v1 = theApp;
  v6 = xmmword_260853DB0;
  PCURL::PCURL(&v5, @"Emitter Preview Emitter Name");
  OZChannelBase::getNextUniqueID(v2);
  SceneNode = OZApplication::createSceneNode(v1, &v6);
  PCString::~PCString(&v5);
  return SceneNode;
}

OZChannelBase *PSParticleType::getChannelFromRefAndVersion(PSParticleType *this, OZChannelRef *a2, double a3)
{
  ChannelFromRefAndVersion = OZObjectManipulator::getChannelFromRefAndVersion((this + 16), a2, a3);
  if (ChannelFromRefAndVersion == (this + 15312))
  {
    v5 = (this + 4648);
  }

  else
  {
    v5 = ChannelFromRefAndVersion;
  }

  if (ChannelFromRefAndVersion == (this + 15160))
  {
    v6 = (this + 3632);
  }

  else
  {
    v6 = v5;
  }

  if (ChannelFromRefAndVersion == (this + 15008))
  {
    return (this + 2776);
  }

  else
  {
    return v6;
  }
}

OZChannelBase *non-virtual thunk toPSParticleType::getChannelFromRefAndVersion(PSParticleType *this, OZChannelRef *a2, double a3)
{
  ChannelFromRefAndVersion = OZObjectManipulator::getChannelFromRefAndVersion(this, a2, a3);
  if (ChannelFromRefAndVersion == (this + 15296))
  {
    v5 = (this + 4632);
  }

  else
  {
    v5 = ChannelFromRefAndVersion;
  }

  if (ChannelFromRefAndVersion == (this + 15144))
  {
    v6 = (this + 3616);
  }

  else
  {
    v6 = v5;
  }

  if (ChannelFromRefAndVersion == (this + 14992))
  {
    return (this + 2760);
  }

  else
  {
    return v6;
  }
}

uint64_t PSParticleType::updateReferenceIDs(uint64_t a1, void *a2)
{
  OZSceneNode::updateReferenceIDs(a1, a2);
  v3 = *(*a1 + 1640);

  return v3(a1);
}

uint64_t non-virtual thunk toPSParticleType::updateReferenceIDs(uint64_t a1, void *a2)
{
  v3 = a1 - 16;
  OZSceneNode::updateReferenceIDs(a1 - 16, a2);
  v4 = *(*(a1 - 16) + 1640);

  return v4(v3);
}

void *PSParticleType::calcStaticHash(uint64_t a1, void *a2, uint64_t a3, int a4)
{
  OZSceneNode::calcStaticHash(a1, a2, a3, a4);

  return OZSystemSimulator::calcStaticHash(a1 + 15520, a2, a3, a1);
}

void *PSParticleType::calcHashForState(uint64_t a1, void *a2, CMTime *a3, uint64_t a4, int a5)
{
  OZSceneNode::calcHashForState(a1, a2, a3, a4, a5);

  return OZSystemSimulator::calcHashForState(a1 + 15520, a2, a3, a4, a1);
}

void PSParticleType::allowDrag(PSParticleType *this, OZFactoryBase *lpsrc, OZChannelBase *a3, unsigned int a4, unsigned int *a5, unsigned int *a6, int a7)
{
  {
    if (a7 != 1)
    {
      goto LABEL_12;
    }

    goto LABEL_10;
  }

  if (!*(this + 2054) || (*(*this + 640))(this) != a3)
  {
LABEL_10:
    v16 = *(lpsrc + 1);
    v17 = xmmword_260848510;
    if (OZFactory::isKindOfClass(v16, &v17) && (*(*this + 640))(this) == a3)
    {
      *a5 = a4 & 1;
      *a6 = 1;
      return;
    }

LABEL_12:
    OZSceneNode::allowDrag(this, lpsrc, a3, a4, a5, a6, a7);
    return;
  }

  v15 = *(**(this + 2054) + 392);

  v15();
}

uint64_t PSParticleType::performDragOperation(PSParticleType *this, OZFactoryBase *lpsrc, OZChannelBase *a3, uint64_t a4, uint64_t a5, unsigned int a6, uint64_t a7, const CMTime *a8)
{
  if (a6 != 1)
  {
    return OZSceneNode::performDragOperation(this, lpsrc, a3, a4, a5, a6, a7, a8);
  }

  if (lpsrc)
  {
    v16 = *(this + 2054);
    if (v16)
    {
      {
        {
          v17 = *(*v16 + 408);

          return v17(v16, lpsrc, a3, a4, a5, 1, a7, a8);
        }

        return OZSceneNode::performDragOperation(this, lpsrc, a3, a4, a5, a6, a7, a8);
      }
    }
  }

  v19 = *(lpsrc + 1);
  *&v25.value = xmmword_260848510;
  if (!OZFactory::isKindOfClass(v19, &v25))
  {
    return OZSceneNode::performDragOperation(this, lpsrc, a3, a4, a5, a6, a7, a8);
  }

  if ((*(*this + 640))(this) != a3)
  {
    v20 = *(this + 2054);
    if (!v20 || (*(*(v20 + 200) + 640))() != a3)
    {
      return OZSceneNode::performDragOperation(this, lpsrc, a3, a4, a5, a6, a7, a8);
    }
  }

  PCSharedCount::PCSharedCount(&v25);
  OZChannelBase::addToUndo((this + 6784), &v25);
  PCString::~PCString(&v25);
  if ((a7 & 2) != 0)
  {
    v23 = (*(*this + 272))(this);
    OZScene::getCurrentTime(v23, &v25);
    OZChannelFolder::copyKeyframesFromChannel((this + 6784), &v25, v21);
  }

  else
  {
    OZChannelFolder::operator=(this + 6784);
    OZChannelFolder::operator=(this + 6912);
    OZChannelFolder::operator=(this + 7040);
    OZChannelBase::operator=(this + 7168, &v21[3].var6);
    OZChannelBase::operator=(this + 7320, &v21[4].var11);
    v22 = BYTE4(v21[7].var1);
    *(this + 1894) = v21[7].var1;
    *(this + 7580) = v22;
  }

  (*(*this + 1528))(this, 0);
  (*(*this + 496))(this);
  v24 = (*(*this + 272))(this);
  OZDocument::postNotification(*(v24 + 1584), 8);
  return 1;
}

uint64_t PSParticleType::writeBody(PSParticleType *this, PCSerializerWriteStream *a2, uint64_t a3, int a4, uint64_t a5)
{
  v10 = *(this + 20);
  if (v10 != OZChannel::getValueAsInt((this + 11600), MEMORY[0x277CC08F0], 0.0))
  {
    OZChannelBase::setFlag((this + 11600), 0x100000000, 1);
  }

  return OZSceneNode::writeBody(this, a2, a3, a4, a5);
}

uint64_t PSParticleType::parseBegin(PSParticleType *this, PCSerializerReadStream *a2)
{
  if (*(a2 + 26) <= 4u)
  {
    OZChannel::setValue((this + 14552), MEMORY[0x277CC08F0], 1.0, 0);
  }

  OZChannel::setKeyframable((this + 11600), 1);

  return OZSceneNode::parseBegin(this, a2);
}

uint64_t PSParticleType::parseEnd(PSParticleType *this, PCSerializerReadStream *a2)
{
  v4 = this + 0x4000;
  (*(*this + 1528))(this, 1);
  ValueAsInt = OZChannel::getValueAsInt((this + 14552), MEMORY[0x277CC08F0], 0.0);
  v4[160] = ValueAsInt != 0;
  if (!ValueAsInt)
  {
    OZChannel::setKeyframable((this + 11600), 0);
  }

  v6 = *(a2 + 26);
  OZChannel::setValue((this + 14704), MEMORY[0x277CC08F0], v6, 0);
  if (v6 > 2)
  {
    if (v6 == 5 && *(a2 + 27) <= 6u)
    {
      OZChannel::setValue((this + 14856), MEMORY[0x277CC08F0], 1.0, 0);
    }
  }

  else
  {
    OZChannelBase::operator=(this + 2776, this + 15008);
    OZChannelBase::operator=(this + 3632, this + 15160);
    OZChannelBase::operator=(this + 4648, this + 15312);
  }

  v4[176] = OZChannel::getValueAsInt((this + 14856), MEMORY[0x277CC08F0], 0.0) != 0;
  OZChannelFolder::setFoldFlag((this + 11904), 0x800000);
  OZChannelBase::setFlag(this + 134, 2, 1);
  OZChannelBase::saveStateAsDefault(this + 134);
  OZChannelBase::setFlag((this + 15160), 2, 1);
  OZChannelBase::saveStateAsDefault((this + 15160));
  OZChannelBase::setFlag((this + 15312), 2, 1);
  OZChannelBase::saveStateAsDefault((this + 15312));
  OZChannelBase::resetFlag(this + 134, 16, 1);
  OZChannelBase::saveStateAsDefault(this + 134);
  OZChannelBase::resetFlag((this + 15160), 16, 1);
  OZChannelBase::saveStateAsDefault((this + 15160));
  OZChannelBase::resetFlag((this + 15312), 16, 1);
  OZChannelBase::saveStateAsDefault((this + 15312));

  return OZSceneNode::parseEnd(this, a2);
}

void PSParticleType::updateGradientStringName(PSParticleType *this, char a2)
{
  if ((a2 & 1) == 0)
  {
    if ((*(*this + 272))(this))
    {
      v4 = *((*(*this + 272))(this) + 1584);
      if (v4)
      {
        v5 = *(v4 + 168);
        if (!v5 || !OZNotificationManager::wasChannelModified(v5, (this + 6784)))
        {
          PCSharedCount::PCSharedCount(&v7);
          OZChannelBase::addToUndo((this + 6784), &v7);
          PCString::~PCString(&v7);
        }
      }
    }
  }

  ValueAsInt = OZChannel::getValueAsInt((this + 5368), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt > 1)
  {
    if (ValueAsInt == 2)
    {
      PCURL::PCURL(&v7, @"Emitter Color Over Life");
      OZChannelBase::setName((this + 6784), &v7, 0);
    }

    else
    {
      if (ValueAsInt != 3)
      {
        return;
      }

      OZChannelBase::resetFlag((this + 6912), 2, a2);
      PCURL::PCURL(&v7, @"Emitter Color Range");
      OZChannelBase::setName((this + 6784), &v7, 0);
    }
  }

  else
  {
    if (ValueAsInt > 1)
    {
      return;
    }

    OZChannelBase::setFlag((this + 6912), 2, a2);
    PCURL::PCURL(&v7, @"Emitter Opacity Over Life");
    OZChannelBase::setName((this + 6784), &v7, 0);
  }

  PCString::~PCString(&v7);
}

void PSParticleType::updateRotationStringNames(PSParticleType *this)
{
  PCURL::PCURL(&v2, @"Particle Type Rotation");
  OZChannelBase::setName((this + 2776), &v2, 1);
  PCString::~PCString(&v2);
  PCURL::PCURL(&v2, @"Particle Type Rotation End");
  OZChannelBase::setName((this + 3632), &v2, 1);
  PCString::~PCString(&v2);
  PCURL::PCURL(&v2, @"Particle Type Rotation Variance");
  OZChannelBase::setName((this + 4648), &v2, 1);
  PCString::~PCString(&v2);
}

__n128 PSParticleType::getNaturalDuration@<Q0>(PSParticleType *this@<X0>, __n128 *a2@<X8>)
{
  if ((*(*this + 272))(this))
  {
    v4 = ((*(*this + 272))(this) + 336);

    result.n128_u64[0] = OZSceneSettings::getFrameDuration(v4, a2).n128_u64[0];
  }

  else
  {
    v6 = MEMORY[0x277CC08F0];
    result = *MEMORY[0x277CC08F0];
    *a2 = *MEMORY[0x277CC08F0];
    a2[1].n128_u64[0] = *(v6 + 16);
  }

  return result;
}

void PSParticleType::getSourceRender(PSParticleType *this@<X0>, const OZRenderParams *a2@<X1>, const CMTime *a3@<X2>, int a4@<W3>, PCSharedCount *a5@<X8>)
{
  if (*(this + 2061))
  {
    if (*(this + 16529) == 1)
    {
      *&v39.value = *a2;
      epoch = *(a2 + 2);
    }

    else
    {
      memset(&v34, 0, 24);
      v11 = (*(*(*(this + 2054) + 200) + 272))();
      OZSceneSettings::getFrameDuration((v11 + 336), &v34);
      v31[0] = *a3;
      *&v29[0].value = *&v34.var0;
      v29[0].epoch = v34.var2;
      PC_CMTimeFloorToSampleDuration(v31, v29, v30);
      *&v39.value = *&v30[0].value;
      epoch = v30[0].epoch;
    }

    v39.epoch = epoch;
    if (a4)
    {
      PCSharedMutex::lock_shared((this + 16616));
      v12 = std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::find<CMTime>(this + 16592, &v39);
      if ((this + 16600) != v12)
      {
        a5->var0 = v12[7].var0;
        PCSharedCount::PCSharedCount(a5 + 1, v12 + 8);
        PCSharedMutex::unlock_shared((this + 16616));
        return;
      }

      PCSharedMutex::unlock_shared((this + 16616));
    }

    OZRenderParams::OZRenderParams(&v34, a2);
    *&v34.var0 = *&v39.value;
    v34.var2 = v39.epoch;
    v37 = 0uLL;
    OZRenderParams::setImageType(&v34, 1);
    v36 = 1;
    v37 = 0u;
    v38 = 0u;
    __asm { FMOV            V0.2D, #1.0 }

    *&v30[0].value = _Q0;
    OZRenderParams::setResolution(&v34, v30);
    v35 = *(this + 2061);
    v34.var5 = 0x3FF0000000000000;
    v37 = 0u;
    v38 = 0u;
    if (*(this + 2062))
    {
      v34.var7 = *(this + 2062);
    }

    if (OZChannel::getValueAsInt((this + 10120), MEMORY[0x277CC08F0], 0.0))
    {
      goto LABEL_24;
    }

    if (!(*(*this + 1592))(this))
    {
      goto LABEL_24;
    }

    v18 = *(this + 2061);
    if (!v18)
    {
      goto LABEL_24;
    }

    if (v19)
    {
      v20 = (*(*v19 + 1328))(v19);
    }

    else
    {
      if (!v23 || (v24 = v23, !OZImageElement::getFootage(v23)))
      {
LABEL_24:
        v32[1] = 0;
        v32[0] = 0;
        __asm { FMOV            V0.2D, #-1.0 }

        v33 = _Q0;
        (*(**(this + 2061) + 16))(*(this + 2061), v32, a2);
        OZRenderParams::getResolution(a2, v30);
        __asm { FMOV            V1.2D, #0.5 }

        v28 = vclez_s32(vmovn_s64(vcvtq_s64_f64(vrndmq_f64(vaddq_f64(vaddq_f64(vmulq_f64(*&v30[0].value, v33), _Q1), vdupq_n_s64(0x3E7AD7F29ABCAF48uLL))))));
        if (((v28.i32[0] | v28.i32[1]) & 1) == 0)
        {
          operator new();
        }

        a5->var0 = 0;
        PCSharedCount::PCSharedCount(a5 + 1);
        OZRenderParams::~OZRenderParams(&v34);
        return;
      }

      Footage = OZImageElement::getFootage(v24);
      (*(*Footage + 1328))(Footage);
    }

    v21 = v20;
    if (v20 > 0.0)
    {
      v29[0] = *(this + 685);
      v31[0] = v39;
      PC_CMTimeSaferSubtract(v31, v29, v30);
      v39 = v30[0];
      v22 = (*(*(*(this + 2054) + 200) + 272))();
      operator*(&v39, v30, *(v22 + 368) / v21);
      v39 = v30[0];
      v29[0] = *(this + 685);
      v31[0] = v30[0];
      PC_CMTimeSaferAdd(v31, v29, v30);
      v39 = v30[0];
      *&v34.var0 = *&v30[0].value;
      v34.var2 = v30[0].epoch;
      v37 = 0uLL;
    }

    goto LABEL_24;
  }

  a5->var0 = 0;

  PCSharedCount::PCSharedCount(a5 + 1);
}

void PSTextureCache::CacheEntry::~CacheEntry(PSTextureCache::CacheEntry *this)
{
  v2 = *(this + 3);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  v3 = *(this + 1);
  if (v3)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }
}

BOOL PSParticleType::CompareHGNodeCacheEntries::operator()(uint64_t a1, uint64_t a2, uint64_t a3)
{
  time1 = *a2;
  v10 = *a3;
  if (CMTimeCompare(&time1, &v10))
  {
    time1 = *a2;
    v10 = *a3;
    return CMTimeCompare(&time1, &v10) >> 31;
  }

  else
  {
    v6 = *(a2 + 24);
    v7 = *(a3 + 24);
    if (vabdd_f64(v6, v7) >= 0.0075)
    {
      return v6 - v7 < 0.0;
    }

    else
    {
      v8 = *(a2 + 32) - *(a3 + 32);
      v9 = fabs(v8) >= 0.0075;
      return v8 < 0.0 && v9;
    }
  }
}

char *PSParticleType::cacheSourceNode(PSParticleType *this)
{
  result = (*(*this + 272))(this);
  if (result)
  {
    v3 = result;
    v4 = (this + 16440);
    OZSceneSettings::getFrameDuration((result + 336), &time);
    *(this + 686) = time;
    v5 = MEMORY[0x277CC08F0];
    *(this + 16440) = *MEMORY[0x277CC08F0];
    *(this + 2057) = *(v5 + 16);
    v6 = (*(*this + 1336))(this);
    v7 = v6;
    if (v6)
    {
      if (v8)
      {
        v9 = (this + 16464);
        (*(*v8 + 1128))(&time);
        if (v4 != &time)
        {
          *&v4->value = *&time.value;
          *(this + 2057) = time.epoch;
          *v9 = v22;
          *(this + 2060) = v23;
        }

        v19 = *v9;
        v20 = *(this + 2060);
        OZSceneSettings::getFrameDuration((v3 + 336), &v18);
        operator/(&v19, &v18, &time);
        Seconds = CMTimeGetSeconds(&time);
        OZChannel::setMax((this + 10424), Seconds);
        OZChannel::setMax((this + 10728), Seconds);
      }

      *(this + 2061) = v7;
      *(this + 2062) = v11;
      if (v11)
      {
        *(this + 2065) = (*(*v11 + 1328))(v11);
        v12 = *(this + 2062);
        MayAffectTransform = 1;
        {
        }

        *(this + 16512) = MayAffectTransform;
        v7 = *(this + 2061);
        if (!v7)
        {
          goto LABEL_15;
        }

        goto LABEL_18;
      }
    }

    else
    {
      *(this + 16488) = 0u;
    }

    *(this + 2065) = 0x3FF0000000000000;
    *(this + 16512) = 0;
    if (!v7)
    {
LABEL_15:
      result = 0;
LABEL_19:
      *(this + 2063) = result;
      return result;
    }

LABEL_18:
    goto LABEL_19;
  }

  return result;
}

uint64_t anonymous namespace::channelMayAffectTransform(_anonymous_namespace_ *this, const OZChannelBase *a2)
{
  if ((*(*this + 496))(this, 1))
  {
    return 1;
  }

  return OZBehavior::IsChannelAffectedByBehaviors(this, 1);
}

void PSParticleType::applyAllScaleOverLifeBehaviors(uint64_t *a1, __int128 *a2, CMTime *a3, CMTime *a4, uint64_t a5)
{
  memset(&v13, 0, sizeof(v13));
  v10 = (*(*a1 + 272))(a1);
  OZSceneSettings::getFrameDuration((v10 + 336), &v13);
  PSParticleType::applyScaleOverLifeBehaviors(v11, a1 + 125, a2, a3, a4, &v13, a5);
  PSParticleType::applyScaleOverLifeBehaviors(v12, (a1[2054] + 1200), a2, a3, a4, &v13, a5);
}

void PSParticleType::applyScaleOverLifeBehaviors(uint64_t a1, uint64_t *a2, __int128 *a3, CMTime *a4, CMTime *a5, CMTime *a6, uint64_t a7)
{
  v7 = a2[1];
  if (v7 != a2)
  {
    v13 = a2;
    do
    {
      v14 = *(*v13 + 16);
      if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(v14[1] + 8), xmmword_260856FE0)))) & 1) == 0)
      {
        v19 = *a5;
        v18 = *a6;
        v16.n128_f64[0] = PC_CMTimeSaferAdd(&v19, &v18, v17);
        if ((*(*v15 + 296))(v15, v17, 0, 1, 1, v16))
        {
          PSScaleOverLifeBehavior::getScale(v15, a3, a4, a7);
        }
      }

      v13 = *v13;
    }

    while (v13 != v7);
  }
}

void PSParticleType::applyAllSequenceBehaviors(PSParticleType *this, CMTime *a2, const PSParticle *a3, PSSequencedValues *a4)
{
  v7 = *(a3 + 22);
  PSParticleType::applySequenceBehaviors(v7, this, this + 125, a2, a4, a4);
  v10 = (*(this + 2054) + 1200);

  PSParticleType::applySequenceBehaviors(v7, v8, v10, a2, v9, a4);
}

void PSParticleType::applySequenceBehaviors(double a1, uint64_t a2, uint64_t *a3, CMTime *a4, uint64_t a5, PSSequencedValues *a6)
{
  v6 = a3[1];
  if (v6 != a3)
  {
    v10 = a3;
    do
    {
      v11 = *(*v10 + 16);
      v12 = v11[1];
      v14 = xmmword_2608556D0;
      if (OZFactory::isKindOfClass(v12, &v14))
      {
        v14 = *&a4->value;
        epoch = a4->epoch;
        if ((*(*v13 + 296))())
        {
          PSSequenceBehavior::getValues(v13, a4, a1, a6);
        }
      }

      v10 = *v10;
    }

    while (v10 != v6);
  }
}

void PSParticleType::getAllSequenceBehaviors(uint64_t a1, int32x4_t *a2, uint64_t a3)
{
  PSParticleType::getSequenceBehaviors(a1, (a1 + 1000), a2, a3);
  v7 = (*(a1 + 16432) + 1200);

  PSParticleType::getSequenceBehaviors(v6, v7, a2, a3);
}

void PSParticleType::getSequenceBehaviors(uint64_t a1, uint64_t *a2, int32x4_t *a3, uint64_t a4)
{
  v4 = a2[1];
  if (v4 != a2)
  {
    v7 = a2;
    do
    {
      v8 = *(*v7 + 16);
      v9 = v8[1];
      v22 = xmmword_2608556D0;
      if (OZFactory::isKindOfClass(v9, &v22))
      {
        v22 = *a3;
        v23 = a3[1].i64[0];
        if ((*(*v10 + 296))())
        {
          v12 = *(a4 + 8);
          v11 = *(a4 + 16);
          if (v12 >= v11)
          {
            v14 = (v12 - *a4) >> 3;
            if ((v14 + 1) >> 61)
            {
              std::vector<double>::__throw_length_error[abi:ne200100]();
            }

            v15 = v11 - *a4;
            v16 = v15 >> 2;
            if (v15 >> 2 <= (v14 + 1))
            {
              v16 = v14 + 1;
            }

            if (v15 >= 0x7FFFFFFFFFFFFFF8)
            {
              v17 = 0x1FFFFFFFFFFFFFFFLL;
            }

            else
            {
              v17 = v16;
            }

            if (v17)
            {
              std::__allocate_at_least[abi:ne200100]<std::allocator<HGRef<HGBitmap>>>(a4, v17);
            }

            v18 = (8 * v14);
            *v18 = v10;
            v13 = 8 * v14 + 8;
            v19 = *(a4 + 8) - *a4;
            v20 = v18 - v19;
            memcpy(v18 - v19, *a4, v19);
            v21 = *a4;
            *a4 = v20;
            *(a4 + 8) = v13;
            *(a4 + 16) = 0;
            if (v21)
            {
              operator delete(v21);
            }
          }

          else
          {
            *v12 = v10;
            v13 = (v12 + 1);
          }

          *(a4 + 8) = v13;
        }
      }

      v7 = *v7;
    }

    while (v7 != v4);
  }
}

char *PSParticleType::getFirstRemapTimeBehavior(uint64_t a1, uint64_t *a2)
{
  v2 = a2[1];
  if (v2 == a2)
  {
    return 0;
  }

  v3 = a2;
  v4 = MEMORY[0x277CC08F0];
  while (1)
  {
    v5 = *(*v3 + 16);
    if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(v5[1] + 8), xmmword_2608556D0)))) & 1) == 0)
    {
      if ((*(*(v6 + 2) + 24))())
      {
        if (OZChannel::getValueAsInt((v6 + 4384), v4, 0.0) == 4)
        {
          break;
        }
      }
    }

    v3 = *v3;
    if (v3 == v2)
    {
      return 0;
    }
  }

  return v6;
}

uint64_t PSParticleType::buildLighting(uint64_t a1, uint64_t a2, uint64_t a3, double *a4)
{
  v9 = *a4;
  v8 = *(a4 + 1);
  v10 = *(v8 + 16);
  *&v36.value = *v8;
  v36.epoch = v10;
  ValueAsInt = OZChannel::getValueAsInt((*&v9 + 32792), &v36, 0.0);
  if (OZChannel::getValueAsInt((*&v9 + 32944), &v36, 0.0) == 1 && ValueAsInt != 0)
  {
    return LiGeode::setLit(a2, 0);
  }

  (*(**&v9 + 544))(COERCE_DOUBLE(*&v9), a2, a3, *(a4 + 1));
  if (!ValueAsInt || !LiGeode::needsLights(a2))
  {
    return LiGeode::setLit(a2, 0);
  }

  LightFilter = LiGeode::getLightFilter(a2);
  PCMatrix44Tmpl<double>::operator*(LightFilter + 472, (a2 + 8), v35);
  v14 = (*(*(*&v9 + 200) + 2144))(*&v9 + 200, *(a4 + 1));
  if (*(a4 + 1498) == 1)
  {
    PCMatrix44Tmpl<double>::leftMult(v35, a4 + 188);
  }

  v15 = LiGeode::getLightFilter(a2);
  v16 = v15;
  v17 = (v15 + 472);
  if ((v15 + 472) != v35)
  {
    for (i = 0; i != 16; i += 4)
    {
      v19 = &v17[i];
      v20 = *&v35[i * 8 + 16];
      *v19 = *&v35[i * 8];
      *(v19 + 1) = v20;
    }
  }

  if (fabs(PCMatrix44Tmpl<double>::determinant(v15 + 472)) < 0.0000001)
  {
    v37 = 0uLL;
    v38 = xmmword_2603426F0;
    liFindMatrixPlane(v17, &v37);
    v21 = *(&v37 + 1);
    v16[61] = v37;
    v16[65] = v21;
    v22 = *(&v38 + 1);
    v16[69] = v38;
    v16[73] = v22;
  }

  *(LiGeode::getLightFilter(a2) + 184) = v14;
  if (*(LiGeode::getLightFilter(a2) + 174) == 1)
  {
    v37 = 0uLL;
    __asm { FMOV            V0.2D, #-1.0 }

    v38 = _Q0;
    PSParticleType::getSourceImageBounds(a1, *(a4 + 1), &v37);
    v27 = LiGeode::getLightFilter(a2);
    v28 = v38;
    *(v27 + 200) = v37;
    *(v27 + 216) = v28;
    result = LiGeode::getLightFilter(a2);
    if ((result + 344) != v35)
    {
      for (j = 0; j != 128; j += 32)
      {
        v31 = (result + 344 + j);
        v32 = *&v35[j + 16];
        *v31 = *&v35[j];
        v31[1] = v32;
      }
    }
  }

  else
  {
    result = LiGeode::getLightFilter(a2);
    if (*(result + 173) == 1)
    {
      v37 = 0uLL;
      __asm { FMOV            V0.2D, #-1.0 }

      v38 = _Q0;
      PSParticleType::getSourceImageBounds(a1, *(a4 + 1), &v37);
      result = LiGeode::getLightFilter(a2);
      v34 = v38;
      *(result + 200) = v37;
      *(result + 216) = v34;
    }
  }

  return result;
}

void PSParticleType::globalToParticleTime(PSParticleType *this@<X0>, const CMTime *a2@<X1>, double a3@<D0>, CMTime *a4@<X8>)
{
  *a4 = *a2;
  if (!OZChannel::getValueAsInt((this + 10120), MEMORY[0x277CC08F0], 0.0))
  {
    v7 = (*(*this + 1592))(this);
    if (a3 > 0.0 && v7 != 0)
    {
      v9 = *(this + 16440);
      v13.epoch = *(this + 2057);
      *&v13.value = v9;
      v14 = *a4;
      v10.n128_f64[0] = PC_CMTimeSaferSubtract(&v14, &v13, a4);
      v11 = (*(*(*(this + 2054) + 200) + 272))(v10);
      operator*(a4, &v14, *(v11 + 368) / a3);
      *a4 = v14;
      v12 = *(this + 685);
      v13 = *a4;
      PC_CMTimeSaferAdd(&v13, &v12, &v14);
      *a4 = v14;
    }
  }
}

uint64_t PSParticleType::openMedia(PSParticleType *this)
{
  v1 = (*(*this + 1336))(this);
  if (!v1)
  {
    return 0;
  }

  v2 = v1;
  if (!v3)
  {
    if (!v3)
    {
      return 0;
    }
  }

  v4 = *(*v3 + 104);

  return v4();
}

uint64_t PSParticleType::prerollBegin(PSParticleType *a1, const OZRenderParams *a2, uint64_t a3, uint64_t a4, double a5)
{
  OZSceneNode::prerollBegin(a1, a2, a3, a4, a5);
  v10 = (*(*a1 + 1336))(a1);
  v11 = v10;
  if (!v10)
  {
    OZRenderParams::OZRenderParams(v20, a2);
    v12 = 0;
    v13 = 30.0;
LABEL_9:
    v14 = 1;
    goto LABEL_10;
  }

  OZRenderParams::OZRenderParams(v20, a2);
  if (!v12)
  {
    v13 = 30.0;
    if (v11 && OZImageElement::getFootage(v11))
    {
      Footage = OZImageElement::getFootage(v11);
      v13 = (*(*Footage + 1328))(Footage);
    }

    v12 = 0;
    goto LABEL_9;
  }

  v13 = (*(*v12 + 1328))(v12);
  v14 = 0;
LABEL_10:
  memset(&v19, 0, sizeof(v19));
  v18 = *a2;
  PSParticleType::globalToParticleTime(a1, &v18, v13, &v19);
  v20[0] = v19;
  v21 = 0;
  v22 = 0;
  if ((v14 & 1) != 0 && (v12 = v11) == 0)
  {
    v16 = 0;
  }

  else
  {
    v16 = (*(*v12 + 112))(v12, v20, a3, a4, a5);
  }

  OZRenderParams::~OZRenderParams(v20);
  return v16;
}

void sub_2602BD408(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  OZRenderParams::~OZRenderParams(va);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::prerollEnd(PSParticleType *this, const OZRenderParams *a2, PMFrameRequest *a3)
{
  OZSceneNode::prerollEnd(this, a2, a3);
  v6 = (*(*this + 1336))(this);
  v7 = v6;
  if (!v6)
  {
    OZRenderParams::OZRenderParams(v16, a2);
    v8 = 0;
    v9 = 30.0;
LABEL_9:
    v10 = 1;
    goto LABEL_10;
  }

  OZRenderParams::OZRenderParams(v16, a2);
  if (!v8)
  {
    v9 = 30.0;
    if (v7 && OZImageElement::getFootage(v7))
    {
      Footage = OZImageElement::getFootage(v7);
      v9 = (*(*Footage + 1328))(Footage);
    }

    v8 = 0;
    goto LABEL_9;
  }

  v9 = (*(*v8 + 1328))(v8);
  v10 = 0;
LABEL_10:
  memset(&v15, 0, sizeof(v15));
  v14 = *a2;
  PSParticleType::globalToParticleTime(this, &v14, v9, &v15);
  v16[0] = v15;
  v17 = 0;
  v18 = 0;
  if ((v10 & 1) != 0 && (v8 = v7) == 0)
  {
    v12 = 0;
  }

  else
  {
    v12 = (*(*v8 + 120))(v8, v16, a3);
  }

  OZRenderParams::~OZRenderParams(v16);
  return v12;
}

void sub_2602BD66C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  OZRenderParams::~OZRenderParams(va);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::setRate(PSParticleType *this, const OZRenderParams *a2, PMFrameRequest *a3, double a4)
{
  OZSceneNode::setRate(this, a2, a3, a4);
  v8 = (*(*this + 1336))(this);
  v9 = v8;
  if (!v8)
  {
    OZRenderParams::OZRenderParams(v18, a2);
    v10 = 0;
    v11 = 30.0;
LABEL_9:
    v12 = 1;
    goto LABEL_10;
  }

  OZRenderParams::OZRenderParams(v18, a2);
  if (!v10)
  {
    v11 = 30.0;
    if (v9 && OZImageElement::getFootage(v9))
    {
      Footage = OZImageElement::getFootage(v9);
      v11 = (*(*Footage + 1328))(Footage);
    }

    v10 = 0;
    goto LABEL_9;
  }

  v11 = (*(*v10 + 1328))(v10);
  v12 = 0;
LABEL_10:
  memset(&v17, 0, sizeof(v17));
  v16 = *a2;
  PSParticleType::globalToParticleTime(this, &v16, v11, &v17);
  v18[0] = v17;
  v19 = 0;
  v20 = 0;
  if ((v12 & 1) != 0 && (v10 = v9) == 0)
  {
    v14 = 0;
  }

  else
  {
    v14 = (*(*v10 + 128))(v10, v18, a3, a4);
  }

  OZRenderParams::~OZRenderParams(v18);
  return v14;
}

void sub_2602BD8E4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  OZRenderParams::~OZRenderParams(va);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::scheduleTokens(uint64_t a1, uint64_t a2, uint64_t *a3, uint64_t a4, uint64_t a5)
{
  memset(v14, 0, sizeof(v14));
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__init_with_size[abi:ne200100]<std::pair<CMTime,std::vector<CMTime>>*,std::pair<CMTime,std::vector<CMTime>>*>(v14, *a3, a3[1], 0xAAAAAAAAAAAAAAABLL * ((a3[1] - *a3) >> 4));
  (*(*a1 + 184))(a1, a2, v14, a4);
  OZSceneNode::scheduleTokens(a1, a2, v14, a4, a5);
  v9 = (*(*a1 + 1336))(a1);
  v10 = v9;
  {
    v12 = (*(*v11 + 136))(v11, a2, v14, a4, a5);
  }

  else
  {
    v12 = 0;
  }

  v15 = v14;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&v15);
  return v12;
}

void sub_2602BDAB4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, void **a12)
{
  a12 = &a9;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::hintTokensWillImage(uint64_t a1, uint64_t a2, uint64_t *a3, uint64_t a4)
{
  memset(v12, 0, sizeof(v12));
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__init_with_size[abi:ne200100]<std::pair<CMTime,std::vector<CMTime>>*,std::pair<CMTime,std::vector<CMTime>>*>(v12, *a3, a3[1], 0xAAAAAAAAAAAAAAABLL * ((a3[1] - *a3) >> 4));
  (*(*a1 + 184))(a1, a2, v12, a4);
  OZSceneNode::hintTokensWillImage(a1, a2, v12, a4);
  v7 = (*(*a1 + 1336))(a1);
  v8 = v7;
  {
    v10 = (*(*v9 + 144))(v9, a2, v12, a4);
  }

  else
  {
    v10 = 0;
  }

  v13 = v12;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&v13);
  return v10;
}

void sub_2602BDC78(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, void **a12)
{
  a12 = &a9;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

uint64_t PSParticleType::getTokensImage(uint64_t a1, uint64_t a2, uint64_t *a3, uint64_t a4)
{
  memset(v12, 0, sizeof(v12));
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__init_with_size[abi:ne200100]<std::pair<CMTime,std::vector<CMTime>>*,std::pair<CMTime,std::vector<CMTime>>*>(v12, *a3, a3[1], 0xAAAAAAAAAAAAAAABLL * ((a3[1] - *a3) >> 4));
  (*(*a1 + 184))(a1, a2, v12, a4);
  OZSceneNode::getTokensImage(a1, a2, v12, a4);
  v7 = (*(*a1 + 1336))(a1);
  v8 = v7;
  {
    v10 = (*(*v9 + 152))(v9, a2, v12, a4);
  }

  else
  {
    v10 = 0;
  }

  v13 = v12;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&v13);
  return v10;
}

void sub_2602BDE3C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, void **a12)
{
  a12 = &a9;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void PSParticleType::remapTokens(PSParticleType *a1, uint64_t a2, uint64_t *a3, uint64_t a4)
{
  OZSceneNode::remapTokens(a1, a2, a3, a4);
  v6 = (*(*a1 + 1336))(a1);
  v7 = 30.0;
  if (v6)
  {
    v8 = v6;
    if (Footage)
    {
LABEL_3:
      v7 = (*(*Footage + 1328))(Footage);
      goto LABEL_4;
    }

    v25 = v10;
    if (v10 && OZImageElement::getFootage(v10))
    {
      Footage = OZImageElement::getFootage(v25);
      goto LABEL_3;
    }
  }

LABEL_4:
  v12 = *a3;
  v11 = a3[1];
  if (v11 != *a3)
  {
    v13 = 0;
    v14 = 0;
    do
    {
      v15 = v12 + 48 * v13;
      v16 = *(v15 + 24);
      v17 = *(v15 + 32);
      v18 = (v15 + 24);
      if (v17 != v16)
      {
        v19 = 0;
        v20 = 1;
        do
        {
          v21 = 3 * v19;
          v27 = *(v16 + 24 * v19);
          memset(&v26, 0, sizeof(v26));
          PSParticleType::globalToParticleTime(a1, &v27, v7, &v26);
          v22 = *(*a3 + 48 * v13 + 24) + 8 * v21;
          v23 = *&v26.value;
          *(v22 + 16) = v26.epoch;
          *v22 = v23;
          v19 = v20;
          v16 = *v18;
        }

        while (0xAAAAAAAAAAAAAAABLL * ((v18[1] - *v18) >> 3) > v20++);
        v12 = *a3;
        v11 = a3[1];
      }

      v13 = ++v14;
    }

    while (0xAAAAAAAAAAAAAAABLL * ((v11 - v12) >> 4) > v14);
  }
}

void *PSParticleType::pruneTokensAtTime(PSParticleType *this, CMTime *a2, const char *a3)
{
  v8 = *a2;
  OZSceneNode::pruneTokensAtTime(this, &v8, a3);
  result = (*(*this + 1336))(this);
  if (result)
  {
    v7 = result;
    {
      v8 = *a2;
      return (*(*result + 160))(result, &v8, a3);
    }
  }

  return result;
}

void *PSParticleType::pruneTokensExceptAtTime(PSParticleType *this, CMTime *a2, const char *a3)
{
  v8 = *a2;
  OZSceneNode::pruneTokensExceptAtTime(this, &v8, a3);
  result = (*(*this + 1336))(this);
  if (result)
  {
    v7 = result;
    {
      v8 = *a2;
      return (*(*result + 168))(result, &v8, a3);
    }
  }

  return result;
}

void *PSParticleType::pruneAllTokens(PSParticleType *this, const char *a2)
{
  OZSceneNode::pruneAllTokens(this, a2);
  result = (*(*this + 1336))(this);
  if (result)
  {
    v4 = result;
    {
      v5 = *(*result + 176);

      return v5();
    }
  }

  return result;
}

uint64_t PSParticleType::PSParticleType_birthRateChanImpl::getInstance(PSParticleType::PSParticleType_birthRateChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_birthRateChanImpl::getInstance(void)::PSParticleType_birthRateChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_birthRateChanImpl::getInstance(void)::PSParticleType_birthRateChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_birthRateChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_birthRateChanImpl::_PSParticleType_birthRateChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_birthRateChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_birthRateChanImpl::_PSParticleType_birthRateChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_birthRateChanInfo::getInstance(PSParticleType::PSParticleType_birthRateChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_birthRateChanInfo::getInstance(void)::PSParticleType_birthRateChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_birthRateChanInfo::getInstance(void)::PSParticleType_birthRateChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_birthRateChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_birthRateChanInfo::_PSParticleType_birthRateChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_birthRateChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_birthRateChanInfo::_PSParticleType_birthRateChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_birthRateChanInfo *PSParticleType::PSParticleType_birthRateChanInfo::PSParticleType_birthRateChanInfo(PSParticleType::PSParticleType_birthRateChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 300.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D2B70;
  *(this + 10) = &unk_2872D2B90;
  return this;
}

uint64_t PSParticleType::PSParticleType_birthRateVarChanImpl::getInstance(PSParticleType::PSParticleType_birthRateVarChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_birthRateVarChanImpl::getInstance(void)::PSParticleType_birthRateVarChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_birthRateVarChanImpl::getInstance(void)::PSParticleType_birthRateVarChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_birthRateVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_birthRateVarChanImpl::_PSParticleType_birthRateVarChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_birthRateVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_birthRateVarChanImpl::_PSParticleType_birthRateVarChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_initialNumChanImpl::getInstance(PSParticleType::PSParticleType_initialNumChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_initialNumChanImpl::getInstance(void)::PSParticleType_initialNumChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_initialNumChanImpl::getInstance(void)::PSParticleType_initialNumChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_initialNumChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_initialNumChanImpl::_PSParticleType_initialNumChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_initialNumChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_initialNumChanImpl::_PSParticleType_initialNumChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_lifetimeChanImpl::getInstance(PSParticleType::PSParticleType_lifetimeChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_lifetimeChanImpl::getInstance(void)::PSParticleType_lifetimeChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_lifetimeChanImpl::getInstance(void)::PSParticleType_lifetimeChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_lifetimeChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_lifetimeChanImpl::_PSParticleType_lifetimeChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_lifetimeChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_lifetimeChanImpl::_PSParticleType_lifetimeChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_lifetimeChanInfo::getInstance(PSParticleType::PSParticleType_lifetimeChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_lifetimeChanInfo::getInstance(void)::PSParticleType_lifetimeChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_lifetimeChanInfo::getInstance(void)::PSParticleType_lifetimeChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_lifetimeChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_lifetimeChanInfo::_PSParticleType_lifetimeChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_lifetimeChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_lifetimeChanInfo::_PSParticleType_lifetimeChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_lifetimeChanInfo *PSParticleType::PSParticleType_lifetimeChanInfo::PSParticleType_lifetimeChanInfo(PSParticleType::PSParticleType_lifetimeChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 10.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D2D50;
  *(this + 10) = &unk_2872D2D70;
  return this;
}

uint64_t PSParticleType::PSParticleType_lifetimeVarChanImpl::getInstance(PSParticleType::PSParticleType_lifetimeVarChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_lifetimeVarChanImpl::getInstance(void)::PSParticleType_lifetimeVarChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_lifetimeVarChanImpl::getInstance(void)::PSParticleType_lifetimeVarChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_lifetimeVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_lifetimeVarChanImpl::_PSParticleType_lifetimeVarChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_lifetimeVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_lifetimeVarChanImpl::_PSParticleType_lifetimeVarChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_speedChanImpl::getInstance(PSParticleType::PSParticleType_speedChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_speedChanImpl::getInstance(void)::PSParticleType_speedChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_speedChanImpl::getInstance(void)::PSParticleType_speedChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_speedChanImpl::_PSParticleType_speedChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_speedChanImpl::_PSParticleType_speedChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_speedChanInfo::getInstance(PSParticleType::PSParticleType_speedChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_speedChanInfo::getInstance(void)::PSParticleType_speedChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_speedChanInfo::getInstance(void)::PSParticleType_speedChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_speedChanInfo::_PSParticleType_speedChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_speedChanInfo::_PSParticleType_speedChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_speedChanInfo *PSParticleType::PSParticleType_speedChanInfo::PSParticleType_speedChanInfo(PSParticleType::PSParticleType_speedChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 1000.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D2EB8;
  *(this + 10) = &unk_2872D2ED8;
  return this;
}

uint64_t PSParticleType::PSParticleType_speedVarChanImpl::getInstance(PSParticleType::PSParticleType_speedVarChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_speedVarChanImpl::getInstance(void)::PSParticleType_speedVarChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_speedVarChanImpl::getInstance(void)::PSParticleType_speedVarChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_speedVarChanImpl::_PSParticleType_speedVarChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_speedVarChanImpl::_PSParticleType_speedVarChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_speedVarChanInfo::getInstance(PSParticleType::PSParticleType_speedVarChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_speedVarChanInfo::getInstance(void)::PSParticleType_speedVarChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_speedVarChanInfo::getInstance(void)::PSParticleType_speedVarChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_speedVarChanInfo::_PSParticleType_speedVarChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_speedVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_speedVarChanInfo::_PSParticleType_speedVarChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_speedVarChanInfo *PSParticleType::PSParticleType_speedVarChanInfo::PSParticleType_speedVarChanInfo(PSParticleType::PSParticleType_speedVarChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 1000.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D2FA8;
  *(this + 10) = &unk_2872D2FC8;
  return this;
}

uint64_t PSParticleType::PSParticleType_rotVarChanInfo::getInstance(PSParticleType::PSParticleType_rotVarChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_rotVarChanInfo::getInstance(void)::PSParticleType_rotVarChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_rotVarChanInfo::getInstance(void)::PSParticleType_rotVarChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_rotVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_rotVarChanInfo::_PSParticleType_rotVarChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_rotVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_rotVarChanInfo::_PSParticleType_rotVarChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_rotVarChanInfo *PSParticleType::PSParticleType_rotVarChanInfo::PSParticleType_rotVarChanInfo(PSParticleType::PSParticleType_rotVarChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 3.40282347e38, 0.0174532925, 0.000174532925, 57.2957795, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3020;
  *(this + 10) = &unk_2872D3040;
  return this;
}

uint64_t PSParticleType::PSParticleType_spinChanInfo::getInstance(PSParticleType::PSParticleType_spinChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_spinChanInfo::getInstance(void)::PSParticleType_spinChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_spinChanInfo::getInstance(void)::PSParticleType_spinChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_spinChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_spinChanInfo::_PSParticleType_spinChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_spinChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_spinChanInfo::_PSParticleType_spinChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_spinChanInfo *PSParticleType::PSParticleType_spinChanInfo::PSParticleType_spinChanInfo(PSParticleType::PSParticleType_spinChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, -12.5663706, 12.5663706, 0.0174532925, 0.000174532925, 57.2957795, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3098;
  *(this + 10) = &unk_2872D30B8;
  return this;
}

uint64_t PSParticleType::PSParticleType_spinVarChanImpl::getInstance(PSParticleType::PSParticleType_spinVarChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_spinVarChanImpl::getInstance(void)::PSParticleType_spinVarChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_spinVarChanImpl::getInstance(void)::PSParticleType_spinVarChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_spinVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_spinVarChanImpl::_PSParticleType_spinVarChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_spinVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_spinVarChanImpl::_PSParticleType_spinVarChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_spinVarChanInfo::getInstance(PSParticleType::PSParticleType_spinVarChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_spinVarChanInfo::getInstance(void)::PSParticleType_spinVarChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_spinVarChanInfo::getInstance(void)::PSParticleType_spinVarChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_spinVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_spinVarChanInfo::_PSParticleType_spinVarChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_spinVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_spinVarChanInfo::_PSParticleType_spinVarChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_spinVarChanInfo *PSParticleType::PSParticleType_spinVarChanInfo::PSParticleType_spinVarChanInfo(PSParticleType::PSParticleType_spinVarChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, -3.40282347e38, 20.0, 0.0174532925, 0.000174532925, 57.2957795, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3188;
  *(this + 10) = &unk_2872D31A8;
  return this;
}

uint64_t PSParticleType::PSParticleType_colorModeChanImpl::getInstance(PSParticleType::PSParticleType_colorModeChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_colorModeChanImpl::getInstance(void)::PSParticleType_colorModeChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_colorModeChanImpl::getInstance(void)::PSParticleType_colorModeChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_colorModeChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_colorModeChanImpl::_PSParticleType_colorModeChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_colorModeChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_colorModeChanImpl::_PSParticleType_colorModeChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_colorRepetitionsChanInfo::getInstance(PSParticleType::PSParticleType_colorRepetitionsChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_colorRepetitionsChanInfo::getInstance(void)::PSParticleType_colorRepetitionsChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_colorRepetitionsChanInfo::getInstance(void)::PSParticleType_colorRepetitionsChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_colorRepetitionsChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_colorRepetitionsChanInfo::_PSParticleType_colorRepetitionsChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_colorRepetitionsChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_colorRepetitionsChanInfo::_PSParticleType_colorRepetitionsChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_colorRepetitionsChanInfo *PSParticleType::PSParticleType_colorRepetitionsChanInfo::PSParticleType_colorRepetitionsChanInfo(PSParticleType::PSParticleType_colorRepetitionsChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 5.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3278;
  *(this + 10) = &unk_2872D3298;
  return this;
}

uint64_t PSParticleType::PSParticleType_scaleVarChanImpl::getInstance(PSParticleType::PSParticleType_scaleVarChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_scaleVarChanImpl::getInstance(void)::PSParticleType_scaleVarChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_scaleVarChanImpl::getInstance(void)::PSParticleType_scaleVarChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_scaleVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_scaleVarChanImpl::_PSParticleType_scaleVarChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_scaleVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_scaleVarChanImpl::_PSParticleType_scaleVarChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_scaleVarChanInfo::getInstance(PSParticleType::PSParticleType_scaleVarChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_scaleVarChanInfo::getInstance(void)::PSParticleType_scaleVarChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_scaleVarChanInfo::getInstance(void)::PSParticleType_scaleVarChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_scaleVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_scaleVarChanInfo::_PSParticleType_scaleVarChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_scaleVarChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_scaleVarChanInfo::_PSParticleType_scaleVarChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_scaleVarChanInfo *PSParticleType::PSParticleType_scaleVarChanInfo::PSParticleType_scaleVarChanInfo(PSParticleType::PSParticleType_scaleVarChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 2.0, 0.01, 0.0001, 100.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3368;
  *(this + 10) = &unk_2872D3388;
  return this;
}

uint64_t PSParticleType::PSParticleType_sourceStartFrameChanImpl::getInstance(PSParticleType::PSParticleType_sourceStartFrameChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_sourceStartFrameChanImpl::getInstance(void)::PSParticleType_sourceStartFrameChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_sourceStartFrameChanImpl::getInstance(void)::PSParticleType_sourceStartFrameChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_sourceStartFrameChanImpl::_PSParticleType_sourceStartFrameChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_sourceStartFrameChanImpl::_PSParticleType_sourceStartFrameChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_sourceStartFrameChanInfo::getInstance(PSParticleType::PSParticleType_sourceStartFrameChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_sourceStartFrameChanInfo::getInstance(void)::PSParticleType_sourceStartFrameChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_sourceStartFrameChanInfo::getInstance(void)::PSParticleType_sourceStartFrameChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_sourceStartFrameChanInfo::_PSParticleType_sourceStartFrameChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_sourceStartFrameChanInfo::_PSParticleType_sourceStartFrameChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_sourceStartFrameChanInfo *PSParticleType::PSParticleType_sourceStartFrameChanInfo::PSParticleType_sourceStartFrameChanInfo(PSParticleType::PSParticleType_sourceStartFrameChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 100.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3458;
  *(this + 10) = &unk_2872D3478;
  return this;
}

uint64_t PSParticleType::PSParticleType_sourceStartFrameOSChanImpl::getInstance(PSParticleType::PSParticleType_sourceStartFrameOSChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_sourceStartFrameOSChanImpl::getInstance(void)::PSParticleType_sourceStartFrameOSChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_sourceStartFrameOSChanImpl::getInstance(void)::PSParticleType_sourceStartFrameOSChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameOSChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_sourceStartFrameOSChanImpl::_PSParticleType_sourceStartFrameOSChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameOSChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_sourceStartFrameOSChanImpl::_PSParticleType_sourceStartFrameOSChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::getInstance(PSParticleType::PSParticleType_sourceStartFrameOSChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::getInstance(void)::PSParticleType_sourceStartFrameOSChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::getInstance(void)::PSParticleType_sourceStartFrameOSChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::_PSParticleType_sourceStartFrameOSChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::_PSParticleType_sourceStartFrameOSChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_sourceStartFrameOSChanInfo *PSParticleType::PSParticleType_sourceStartFrameOSChanInfo::PSParticleType_sourceStartFrameOSChanInfo(PSParticleType::PSParticleType_sourceStartFrameOSChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 25.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3548;
  *(this + 10) = &unk_2872D3568;
  return this;
}

uint64_t PSParticleType::PSParticleType_sourceHoldFramesChanImpl::getInstance(PSParticleType::PSParticleType_sourceHoldFramesChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_sourceHoldFramesChanImpl::getInstance(void)::PSParticleType_sourceHoldFramesChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_sourceHoldFramesChanImpl::getInstance(void)::PSParticleType_sourceHoldFramesChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceHoldFramesChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_sourceHoldFramesChanImpl::_PSParticleType_sourceHoldFramesChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_sourceHoldFramesChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_sourceHoldFramesChanImpl::_PSParticleType_sourceHoldFramesChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_shapeChanImpl::getInstance(PSParticleType::PSParticleType_shapeChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_shapeChanImpl::getInstance(void)::PSParticleType_shapeChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_shapeChanImpl::getInstance(void)::PSParticleType_shapeChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_shapeChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_shapeChanImpl::_PSParticleType_shapeChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_shapeChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_shapeChanImpl::_PSParticleType_shapeChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_pointSizeChanImpl::getInstance(PSParticleType::PSParticleType_pointSizeChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_pointSizeChanImpl::getInstance(void)::PSParticleType_pointSizeChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_pointSizeChanImpl::getInstance(void)::PSParticleType_pointSizeChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSizeChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_pointSizeChanImpl::_PSParticleType_pointSizeChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSizeChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_pointSizeChanImpl::_PSParticleType_pointSizeChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_pointSizeChanInfo::getInstance(PSParticleType::PSParticleType_pointSizeChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_pointSizeChanInfo::getInstance(void)::PSParticleType_pointSizeChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_pointSizeChanInfo::getInstance(void)::PSParticleType_pointSizeChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSizeChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_pointSizeChanInfo::_PSParticleType_pointSizeChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSizeChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_pointSizeChanInfo::_PSParticleType_pointSizeChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_pointSizeChanInfo *PSParticleType::PSParticleType_pointSizeChanInfo::PSParticleType_pointSizeChanInfo(PSParticleType::PSParticleType_pointSizeChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 10.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3728;
  *(this + 10) = &unk_2872D3748;
  return this;
}

uint64_t PSParticleType::PSParticleType_pointSpacingChanImpl::getInstance(PSParticleType::PSParticleType_pointSpacingChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_pointSpacingChanImpl::getInstance(void)::PSParticleType_pointSpacingChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_pointSpacingChanImpl::getInstance(void)::PSParticleType_pointSpacingChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_pointSpacingChanImpl::_PSParticleType_pointSpacingChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_pointSpacingChanImpl::_PSParticleType_pointSpacingChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_pointSpacingChanInfo::getInstance(PSParticleType::PSParticleType_pointSpacingChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_pointSpacingChanInfo::getInstance(void)::PSParticleType_pointSpacingChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_pointSpacingChanInfo::getInstance(void)::PSParticleType_pointSpacingChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_pointSpacingChanInfo::_PSParticleType_pointSpacingChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_pointSpacingChanInfo::_PSParticleType_pointSpacingChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_pointSpacingChanInfo *PSParticleType::PSParticleType_pointSpacingChanInfo::PSParticleType_pointSpacingChanInfo(PSParticleType::PSParticleType_pointSpacingChanInfo *this)
{
  PCString::PCString(&v3, "%");
  OZChannelInfo::OZChannelInfo(this, 0.05, 2.0, 0.01, 0.0001, 100.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3818;
  *(this + 10) = &unk_2872D3838;
  return this;
}

uint64_t PSParticleType::PSParticleType_pointSpacingOSChanImpl::getInstance(PSParticleType::PSParticleType_pointSpacingOSChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_pointSpacingOSChanImpl::getInstance(void)::PSParticleType_pointSpacingOSChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_pointSpacingOSChanImpl::getInstance(void)::PSParticleType_pointSpacingOSChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingOSChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_pointSpacingOSChanImpl::_PSParticleType_pointSpacingOSChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingOSChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_pointSpacingOSChanImpl::_PSParticleType_pointSpacingOSChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_pointSpacingOSChanInfo::getInstance(PSParticleType::PSParticleType_pointSpacingOSChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_pointSpacingOSChanInfo::getInstance(void)::PSParticleType_pointSpacingOSChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_pointSpacingOSChanInfo::getInstance(void)::PSParticleType_pointSpacingOSChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingOSChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_pointSpacingOSChanInfo::_PSParticleType_pointSpacingOSChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_pointSpacingOSChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_pointSpacingOSChanInfo::_PSParticleType_pointSpacingOSChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_pointSpacingOSChanInfo *PSParticleType::PSParticleType_pointSpacingOSChanInfo::PSParticleType_pointSpacingOSChanInfo(PSParticleType::PSParticleType_pointSpacingOSChanInfo *this)
{
  PCString::PCString(&v3, "%");
  OZChannelInfo::OZChannelInfo(this, 0.05, 4.0, 0.01, 0.0001, 100.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D3908;
  *(this + 10) = &unk_2872D3928;
  return this;
}

uint64_t PSParticleType::PSParticleType_strokeWidthOSChanImpl::getInstance(PSParticleType::PSParticleType_strokeWidthOSChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_strokeWidthOSChanImpl::getInstance(void)::PSParticleType_strokeWidthOSChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_strokeWidthOSChanImpl::getInstance(void)::PSParticleType_strokeWidthOSChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_strokeWidthOSChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_strokeWidthOSChanImpl::_PSParticleType_strokeWidthOSChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_strokeWidthOSChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_strokeWidthOSChanImpl::_PSParticleType_strokeWidthOSChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_strokeWidthOSChanInfo::getInstance(PSParticleType::PSParticleType_strokeWidthOSChanInfo *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_strokeWidthOSChanInfo::getInstance(void)::PSParticleType_strokeWidthOSChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_strokeWidthOSChanInfo::getInstance(void)::PSParticleType_strokeWidthOSChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_strokeWidthOSChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_strokeWidthOSChanInfo::_PSParticleType_strokeWidthOSChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_strokeWidthOSChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_strokeWidthOSChanInfo::_PSParticleType_strokeWidthOSChanInfo)
  {
    operator new();
  }
}

PSParticleType::PSParticleType_strokeWidthOSChanInfo *PSParticleType::PSParticleType_strokeWidthOSChanInfo::PSParticleType_strokeWidthOSChanInfo(PSParticleType::PSParticleType_strokeWidthOSChanInfo *this)
{
  PCString::PCString(&v3, "%");
  OZChannelInfo::OZChannelInfo(this, 0.0, 4.0, 0.01, 0.0001, 100.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D39F8;
  *(this + 10) = &unk_2872D3A18;
  return this;
}

uint64_t PSParticleType::PSParticleType_anchorDabsToChanImpl::getInstance(PSParticleType::PSParticleType_anchorDabsToChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_anchorDabsToChanImpl::getInstance(void)::PSParticleType_anchorDabsToChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_anchorDabsToChanImpl::getInstance(void)::PSParticleType_anchorDabsToChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_anchorDabsToChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_anchorDabsToChanImpl::_PSParticleType_anchorDabsToChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_anchorDabsToChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_anchorDabsToChanImpl::_PSParticleType_anchorDabsToChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_posOffsetVarChanImpl::getInstance(PSParticleType::PSParticleType_posOffsetVarChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_posOffsetVarChanImpl::getInstance(void)::PSParticleType_posOffsetVarChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_posOffsetVarChanImpl::getInstance(void)::PSParticleType_posOffsetVarChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_posOffsetVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_posOffsetVarChanImpl::_PSParticleType_posOffsetVarChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_posOffsetVarChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_posOffsetVarChanImpl::_PSParticleType_posOffsetVarChan)
  {
    operator new();
  }
}

uint64_t PSParticleType::PSParticleType_versionChanImpl::getInstance(PSParticleType::PSParticleType_versionChanImpl *this)
{
  if (atomic_load_explicit(&PSParticleType::PSParticleType_versionChanImpl::getInstance(void)::PSParticleType_versionChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType::PSParticleType_versionChanImpl::getInstance(void)::PSParticleType_versionChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_versionChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType::PSParticleType_versionChanImpl::_PSParticleType_versionChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType::PSParticleType_versionChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSParticleType::PSParticleType_versionChanImpl::_PSParticleType_versionChan)
  {
    operator new();
  }
}

void PSParticleType::HGNodeCacheEntryValue::~HGNodeCacheEntryValue(PSParticleType::HGNodeCacheEntryValue *this)
{
  v2 = *(this + 6);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  v3 = *(this + 4);
  if (v3)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }

  v4 = *(this + 2);
  if (v4)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v4);
  }

  if (*this)
  {
    (*(**this + 24))(*this);
  }
}

void std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::destroy(uint64_t a1, void *a2)
{
  if (a2)
  {
    std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::destroy(a1, *a2);
    std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::destroy(a1, a2[1]);
    v4 = a2[15];
    if (v4)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v4);
    }

    v5 = a2[13];
    if (v5)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v5);
    }

    v6 = a2[11];
    if (v6)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v6);
    }

    v7 = a2[9];
    if (v7)
    {
      (*(*v7 + 24))(v7);
    }

    operator delete(a2);
  }
}

void std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::destroy(uint64_t a1, PCSharedCount *a2)
{
  if (a2)
  {
    std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::destroy(a1, a2->var0);
    std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::destroy(a1, a2[1].var0);
    PCSharedCount::~PCSharedCount(a2 + 8);

    operator delete(a2);
  }
}

void std::__allocate_at_least[abi:ne200100]<std::allocator<PSParticleType::SourceBoundsCacheEntry>>(uint64_t a1, unint64_t a2)
{
  if (a2 < 0x492492492492493)
  {
    operator new();
  }

  std::__throw_bad_array_new_length[abi:ne200100]();
}

uint64_t std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::find<CMTime>(uint64_t a1, CMTime *a2)
{
  v2 = a1 + 8;
  v3 = *(a1 + 8);
  if (!v3)
  {
    return v2;
  }

  v6 = a1 + 8;
  do
  {
    v7 = PSParticleType::LessThanFigTime::operator()(a1, (v3 + 32), a2);
    if (v7)
    {
      v8 = 8;
    }

    else
    {
      v8 = 0;
    }

    if (!v7)
    {
      v6 = v3;
    }

    v3 = *(v3 + v8);
  }

  while (v3);
  if (v6 == v2 || PSParticleType::LessThanFigTime::operator()(a1, a2, (v6 + 32)))
  {
    return v2;
  }

  return v6;
}

uint64_t PSParticleType::LessThanFigTime::operator()(uint64_t a1, CMTime *a2, CMTime *a3)
{
  time1 = *a2;
  v6 = *a3;
  result = CMTimeCompare(&time1, &v6);
  if (result)
  {
    time1 = *a2;
    v6 = *a3;
    return CMTimeCompare(&time1, &v6) >> 31;
  }

  return result;
}

uint64_t std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::__emplace_unique_key_args<CMTime,std::piecewise_construct_t const&,std::tuple<CMTime const&>,std::tuple<>>(uint64_t a1, CMTime *a2)
{
  v2 = *std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::__find_equal<CMTime>(a1, &v4, a2);
  if (!v2)
  {
    std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::__construct_node<std::piecewise_construct_t const&,std::tuple<CMTime const&>,std::tuple<>>();
  }

  return v2;
}

uint64_t std::__tree<std::__value_type<CMTime,PCPtr<LiImageSource>>,std::__map_value_compare<CMTime,std::__value_type<CMTime,PCPtr<LiImageSource>>,PSParticleType::LessThanFigTime,true>,std::allocator<std::__value_type<CMTime,PCPtr<LiImageSource>>>>::__find_equal<CMTime>(uint64_t a1, uint64_t *a2, CMTime *a3)
{
  v5 = a1 + 8;
  v4 = *(a1 + 8);
  if (v4)
  {
    do
    {
      while (1)
      {
        v8 = v4;
        if (!PSParticleType::LessThanFigTime::operator()(a1, a3, (v4 + 32)))
        {
          break;
        }

        v4 = *v8;
        v5 = v8;
        if (!*v8)
        {
          goto LABEL_9;
        }
      }

      if (!PSParticleType::LessThanFigTime::operator()(a1, (v8 + 32), a3))
      {
        break;
      }

      v5 = v8 + 8;
      v4 = *(v8 + 8);
    }

    while (v4);
  }

  else
  {
    v8 = a1 + 8;
  }

LABEL_9:
  *a2 = v8;
  return v5;
}

uint64_t std::unique_ptr<std::__tree_node<std::__value_type<CMTime,PCPtr<LiImageSource>>,void *>,std::__tree_node_destructor<std::allocator<std::__tree_node<std::__value_type<CMTime,PCPtr<LiImageSource>>,void *>>>>::~unique_ptr[abi:ne200100](uint64_t a1)
{
  v2 = *a1;
  *a1 = 0;
  if (v2)
  {
    if (*(a1 + 16) == 1)
    {
      PCSharedCount::~PCSharedCount(v2 + 8);
    }

    operator delete(v2);
  }

  return a1;
}

uint64_t std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::find<PSParticleType::HGNodeCacheEntryKey>(uint64_t a1, uint64_t a2)
{
  v2 = a1 + 8;
  v3 = *(a1 + 8);
  if (!v3)
  {
    return v2;
  }

  v5 = a1 + 8;
  do
  {
    a1 = PSParticleType::CompareHGNodeCacheEntries::operator()(a1, v3 + 32, a2);
    if (a1)
    {
      v6 = 8;
    }

    else
    {
      v6 = 0;
    }

    if (!a1)
    {
      v5 = v3;
    }

    v3 = *(v3 + v6);
  }

  while (v3);
  if (v5 == v2 || PSParticleType::CompareHGNodeCacheEntries::operator()(a1, a2, v5 + 32))
  {
    return v2;
  }

  return v5;
}

void *std::__shared_ptr_emplace<PGMetalTexture>::__shared_ptr_emplace[abi:ne200100]<HGRef<HGMetalTexture> &,HGMetalContext *&,std::allocator<PGMetalTexture>,0>(void *a1, uint64_t *a2, uint64_t *a3)
{
  a1[1] = 0;
  a1[2] = 0;
  *a1 = &unk_2872D3BD8;
  PGMetalTexture::PGMetalTexture((a1 + 3), a2, *a3);
  return a1;
}

void std::__shared_ptr_emplace<PGMetalTexture>::~__shared_ptr_emplace(std::__shared_weak_count *a1)
{
  a1->__vftable = &unk_2872D3BD8;
  std::__shared_weak_count::~__shared_weak_count(a1);

  JUMPOUT(0x2666E9F00);
}

PCImage *PGMetalTexture::PGMetalTexture(PCImage *a1, uint64_t *a2, uint64_t a3)
{
  PCImage::PCImage(a1);
  *v6 = &unk_2872788B0;
  v7 = *a2;
  *(a1 + 8) = *a2;
  if (v7)
  {
    (*(*v7 + 16))(v7);
  }

  *(a1 + 9) = a3;
  return a1;
}

uint64_t std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::__emplace_unique_key_args<PSParticleType::HGNodeCacheEntryKey,std::piecewise_construct_t const&,std::tuple<PSParticleType::HGNodeCacheEntryKey const&>,std::tuple<>>(uint64_t a1, uint64_t a2)
{
  v2 = *std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::__find_equal<PSParticleType::HGNodeCacheEntryKey>(a1, &v4, a2);
  if (!v2)
  {
    operator new();
  }

  return v2;
}

void *std::__tree<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,std::__map_value_compare<PSParticleType::HGNodeCacheEntryKey,std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>,PSParticleType::CompareHGNodeCacheEntries,true>,std::allocator<std::__value_type<PSParticleType::HGNodeCacheEntryKey,PSParticleType::HGNodeCacheEntryValue>>>::__find_equal<PSParticleType::HGNodeCacheEntryKey>(uint64_t a1, void *a2, uint64_t a3)
{
  v5 = (a1 + 8);
  v4 = *(a1 + 8);
  if (v4)
  {
    do
    {
      while (1)
      {
        v7 = v4;
        a1 = PSParticleType::CompareHGNodeCacheEntries::operator()(a1, a3, (v4 + 4));
        if (!a1)
        {
          break;
        }

        v4 = *v7;
        v5 = v7;
        if (!*v7)
        {
          goto LABEL_9;
        }
      }

      a1 = PSParticleType::CompareHGNodeCacheEntries::operator()(a1, (v7 + 4), a3);
      if (!a1)
      {
        break;
      }

      v5 = v7 + 1;
      v4 = v7[1];
    }

    while (v4);
  }

  else
  {
    v7 = (a1 + 8);
  }

LABEL_9:
  *a2 = v7;
  return v5;
}

void PSReplicator::PSReplicator(PSReplicator *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  PSEmitter::PSEmitter(this, a2, a3, a4);
  *v5 = &unk_2872D3C28;
  *(v5 + 25) = &unk_2872D3EC8;
  *(v5 + 27) = &unk_2872D47A0;
  *(v5 + 31) = &unk_2872D49F8;
  *(v5 + 841) = &unk_2872D4A50;
  PSReplicator::initChannels(v5);
  (*(*this + 448))(this, 1);
}

uint64_t PSReplicator::initChannels(PSReplicator *this)
{
  PCURL::PCURL(&v3, @"Replicator Shape Anim");
  OZChannelBase::setName(this + 174, &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Shape Anim Enum");
  OZChannelEnum::setStrings(this + 2436, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Emit Pattern Type");
  OZChannelBase::setName((this + 19896), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Emit Pattern Enum");
  OZChannelEnum::setStrings(this + 2487, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Num Points");
  OZChannelBase::setName((this + 20152), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Num Points U");
  OZChannelBase::setName((this + 20304), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Num Points V");
  OZChannelBase::setName((this + 20456), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Tile Offset");
  OZChannelBase::setName((this + 21064), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Build Origin Type");
  OZChannelBase::setName((this + 21216), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Build Origin Enum");
  OZChannelEnum::setStrings(this + 2652, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Build Style Type");
  OZChannelBase::setName((this + 21472), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Build Style Enum");
  OZChannelEnum::setStrings(this + 2684, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Box Build Origin Type");
  OZChannelBase::setName(this + 194, &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Box Build Origin Enum");
  OZChannelEnum::setStrings(this + 2716, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Box Build Style Type");
  OZChannelBase::setName((this + 21984), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Box Build Style Enum");
  OZChannelEnum::setStrings(this + 2748, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Open Build Origin Type");
  OZChannelBase::setName((this + 22240), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Open Build Origin Enum");
  OZChannelEnum::setStrings(this + 2780, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Closed Build Origin Type");
  OZChannelBase::setName((this + 22496), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Closed Build Origin Enum");
  OZChannelEnum::setStrings(this + 2812, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Radial Build Origin Type");
  OZChannelBase::setName((this + 22752), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Radial Build Origin Type");
  OZChannelBase::setName((this + 22752), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Radial Build Origin Enum");
  OZChannelEnum::setStrings(this + 2844, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Build Randomly");
  OZChannelBase::setName((this + 23008), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Outline Offset");
  OZChannelBase::setName((this + 23160), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Radius");
  OZChannelBase::setName((this + 23312), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Point 1");
  OZChannelBase::setName((this + 23464), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Point 2");
  OZChannelBase::setName((this + 24352), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Width");
  OZChannelBase::setName((this + 25240), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Size");
  OZChannelBase::setName((this + 25392), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Size Width");
  OZChannelBase::setName((this + 25528), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Rect Size Height");
  OZChannelBase::setName((this + 25680), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Num Radial Arms");
  OZChannelBase::setName(this + 232, &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Points Per Arm");
  OZChannelBase::setName((this + 26136), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Spiral Twists");
  OZChannelBase::setName((this + 26288), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Wave Amplitude");
  OZChannelBase::setName((this + 26440), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Wave Frequency");
  OZChannelBase::setName((this + 26592), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Wave Phase");
  OZChannelBase::setName((this + 26744), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Emit At Alpha");
  OZChannelBase::setName((this + 27048), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Emit Alpha Cutoff");
  OZChannelBase::setName((this + 27200), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Geometry Node Ref");
  OZChannelBase::setName((this + 27352), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Image Node Ref");
  OZChannelBase::setName((this + 27512), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Multiplier Properties");
  OZChannelBase::setName((this + 28128), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Scale");
  OZChannelBase::setName((this + 28864), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Tint Color");
  OZChannelBase::setName((this + 29760), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Tint Amount");
  OZChannelBase::setName((this + 30920), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Render Order");
  OZChannelBase::setName((this + 31072), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Render Order Enum");
  OZChannelEnum::setStrings(this + 3884, &v3, 1);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Reverse Stacking");
  OZChannelBase::setName((this + 31328), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Fill Points");
  OZChannelBase::setName((this + 31632), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Random Fill Seed");
  OZChannelBase::setName((this + 31784), &v3, 0);
  PCString::~PCString(&v3);
  OZChannel::setDefaultValue((this + 19232), 6.0);
  OZChannel::setDefaultValue((this + 19744), 1.0);
  OZChannel::setDefaultValue((this + 28256), 0.0);
  OZChannel::setDefaultValue((this + 31632), 1.0);
  OZChannel::setDefaultValue((this + 29456), 0.0);
  OZChannel::setDefaultValue((this + 32792), 0.0);
  OZChannel::setDefaultValue((this + 32944), 0.0);
  OZChannel::setDefaultValue((this + 33200), 0.0);
  OZChannelBase::reset((this + 19232), 0);
  OZChannelBase::reset((this + 19744), 0);
  OZChannelBase::reset((this + 28256), 0);
  OZChannelBase::reset((this + 31632), 0);
  OZChannelBase::reset(this + 263, 0);
  OZChannelBase::reset((this + 32792), 0);
  OZChannelBase::reset((this + 32944), 0);
  OZChannelBase::reset((this + 33200), 0);
  PCURL::PCURL(&v3, @"Replicator Shape Type");
  OZChannelBase::setName((this + 19232), &v3, 0);
  PCString::~PCString(&v3);
  PSReplicator::updateReplicatorShapeEnum(this, 0);
  OZChannelBase::setFlag((this + 19232), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 19232));
  OZChannelBase::setFlag((this + 19896), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 19896));
  OZChannelBase::setFlag((this + 19744), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 19744));
  OZChannelBase::setFlag((this + 28128), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 28128));
  OZChannelBase::setFlag((this + 27672), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27672));
  OZChannelBase::setFlag((this + 27976), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27976));
  OZChannelBase::setFlag((this + 31072), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 31072));
  OZChannelBase::setFlag((this + 31632), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 31632));
  OZChannelBase::setFlag((this + 32944), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 32944));
  OZChannelBase::setFlag((this + 6880), 16, 0);
  (*(*(this + 860) + 128))(this + 6880);
  OZChannelBase::setFlag((this + 7032), 16, 0);
  return (*(*(this + 879) + 128))(this + 7032);
}

void PSReplicator::PSReplicator(PSReplicator *this, const PSReplicator *a2, uint64_t a3)
{
  PSEmitter::PSEmitter(this, a2, a3);
  *v3 = &unk_2872D3C28;
  v3[25] = &unk_2872D3EC8;
  v3[27] = &unk_2872D47A0;
  v3[31] = &unk_2872D49F8;
  v3[841] = &unk_2872D4A50;
}

void non-virtual thunk toPSReplicator::~PSReplicator(PSReplicator *this)
{
  PSEmitter::~PSEmitter((this - 200));
}

{
  PSEmitter::~PSEmitter((this - 216));
}

{
  PSEmitter::~PSEmitter((this - 248));
}

{
  PSEmitter::~PSEmitter((this - 6728));
}

{
  PSEmitter::~PSEmitter((this - 200));

  JUMPOUT(0x2666E9F00);
}

{
  PSEmitter::~PSEmitter((this - 216));

  JUMPOUT(0x2666E9F00);
}

{
  PSEmitter::~PSEmitter((this - 248));

  JUMPOUT(0x2666E9F00);
}

{
  PSEmitter::~PSEmitter((this - 6728));

  JUMPOUT(0x2666E9F00);
}

void PSReplicator::~PSReplicator(PSReplicator *this)
{
  PSEmitter::~PSEmitter(this);

  JUMPOUT(0x2666E9F00);
}

void PSReplicator::updateReplicatorShapeEnum(PSReplicator *this, int a2)
{
  v10 = *MEMORY[0x277D85DE8];
  if (a2)
  {
    PCSharedCount::PCSharedCount(v7);
    OZChannelBase::addToUndo((this + 19232), v7);
    PCString::~PCString(v7);
  }

  if (OZChannel::getValueAsInt((this + 32792), MEMORY[0x277CC08F0], 0.0))
  {
    v9 = 0xA0000000BLL;
    *&v7[0].var0 = xmmword_260857800;
    v8 = unk_260857810;
    OZChannelEnum::setTags((this + 19232), v7, 10);
    PCURL::PCURL(&v6, @"Replicator Shape Enum 3D");
    OZChannelEnum::setStrings(this + 2404, &v6, 1);
    PCString::~PCString(&v6);
    return;
  }

  *&v7[0].var0 = xmmword_260857828;
  v8 = unk_260857838;
  OZChannelEnum::setTags((this + 19232), v7, 8);
  PCURL::PCURL(&v6, @"Replicator Shape Enum 2D");
  OZChannelEnum::setStrings(this + 2404, &v6, 1);
  PCString::~PCString(&v6);
  if (a2)
  {
    ValueAsInt = OZChannel::getValueAsInt((this + 19232), MEMORY[0x277CC08F0], 0.0);
    if (ValueAsInt == 10)
    {
      v5 = 2.0;
    }

    else
    {
      if (ValueAsInt != 11)
      {
        return;
      }

      v5 = 6.0;
    }

    OZChannel::setValue((this + 19232), MEMORY[0x277CC08F0], v5, 0);
  }
}

void PSReplicator::getIconName(PSReplicator *this@<X0>, PCURL *a2@<X8>)
{
  if (OZChannel::getValueAsInt((this + 32792), MEMORY[0x277CC08F0], 0.0) && (*(*(this + 25) + 272))(this + 200) && (v4 = (*(*(this + 25) + 272))(this + 200), OZScene::getCurrentTime(v4, &v5), PSEmitter::shouldPrecompose(this, &v5)))
  {
    PCURL::PCURL(a2, @"M_LayersList_ObjectIconColor-ReplicatorRasterized");
  }

  else
  {
    (*(**(this + 26) + 80))(*(this + 26));
  }
}

void PSReplicator::getIconNameBW(PSReplicator *this@<X0>, PCURL *a2@<X8>)
{
  if (OZChannel::getValueAsInt((this + 32792), MEMORY[0x277CC08F0], 0.0) && (*(*(this + 25) + 272))(this + 200) && (v4 = (*(*(this + 25) + 272))(this + 200), OZScene::getCurrentTime(v4, &v5), PSEmitter::shouldPrecompose(this, &v5)))
  {
    PCURL::PCURL(a2, @"M_LayersList_ObjectIconGrey-ReplicatorRasterized");
  }

  else
  {
    (*(**(this + 26) + 88))(*(this + 26));
  }
}

uint64_t PSReplicator::getIconID(PSReplicator *this)
{
  if (OZChannel::getValueAsInt((this + 32792), MEMORY[0x277CC08F0], 0.0) && (*(*(this + 25) + 272))(this + 200) && (v2 = (*(*(this + 25) + 272))(this + 200), OZScene::getCurrentTime(v2, &v4), (PSEmitter::shouldPrecompose(this, &v4) & 1) != 0))
  {
    return 30;
  }

  else
  {
    return (*(**(this + 26) + 96))(*(this + 26));
  }
}

void PSReplicator::updateEmitterHiddenFlags(PSReplicator *this, char a2)
{
  v28[0] = 0;
  v28[1] = 0;
  v27 = v28;
  v21 = (this + 19744);
  v24 = (this + 19744);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 19896);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 20152);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 20304);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 20456);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 21064);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 21216);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 21472);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 22240);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 22496);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 22752);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 23008);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 23160);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 23312);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 23464);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 24352);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 25392);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 25528);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 25680);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 25832);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 25984);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 26136);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 26288);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 26440);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 26592);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 26744);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 27200);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 27352);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = (this + 27512);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v20 = (this + 23008);
  v24 = (this + 31784);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(&v27, &v24);
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v23 = **&MEMORY[0x277CC08F0];
  ValueAsInt = OZChannel::getValueAsInt((this + 19232), &v23, 0.0);
  v5 = OZChannel::getValueAsInt((this + 19896), &v23, 0.0);
  v6 = OZChannel::getValueAsInt(v21, &v23, 0.0);
  if (ValueAsInt > 4)
  {
    if (ValueAsInt > 10)
    {
      if (ValueAsInt == 11)
      {
        v22 = (this + 19896);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 25392);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 25528);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 25680);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 25832);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        switch(v5)
        {
          case 0:
            v22 = (this + 20304);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 20456);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 23160);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            goto LABEL_71;
          case 2:
            goto LABEL_68;
          case 1:
            v22 = (this + 20304);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 20456);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 20608);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 21064);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            break;
        }

        goto LABEL_71;
      }

      if (ValueAsInt != 12)
      {
        goto LABEL_35;
      }
    }

    else if ((ValueAsInt - 5) >= 2)
    {
      if (ValueAsInt == 10)
      {
        v22 = (this + 19896);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 23312);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        if (v5 != 2)
        {
          if (v5 == 1)
          {
            v22 = (this + 20304);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 20456);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 21064);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          }

          else if (!v5)
          {
            v22 = (this + 20304);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 20456);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          }

          goto LABEL_71;
        }

LABEL_68:
        v22 = (this + 20152);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        goto LABEL_71;
      }

LABEL_35:
      if ((ValueAsInt - 7) > 1)
      {
        if (ValueAsInt == 9)
        {
          v13 = v6;
          v22 = (this + 23464);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          v22 = (this + 24352);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          v22 = (this + 26440);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          v22 = (this + 26592);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          v22 = (this + 26744);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          if (v13)
          {
            v22 = (this + 20152);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
            v22 = (this + 23160);
            std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          }

          v22 = (this + 22240);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          v22 = (this + 23008);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          if (OZChannel::getValueAsInt(v20, MEMORY[0x277CC08F0], 0.0))
          {
            goto LABEL_63;
          }
        }
      }

      else
      {
        v12 = v6;
        v22 = (this + 23312);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        if (ValueAsInt == 8)
        {
          v22 = (this + 26288);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        }

        v22 = (this + 25984);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        if (v12)
        {
          v22 = (this + 26136);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
          v22 = (this + 23160);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        }

        v22 = (this + 22752);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 23008);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        if (OZChannel::getValueAsInt(v20, MEMORY[0x277CC08F0], 0.0))
        {
          goto LABEL_63;
        }
      }

      goto LABEL_71;
    }

    v8 = v6;
    v22 = (this + 19896);
    std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    if (ValueAsInt == 12 || ValueAsInt == 5)
    {
      v22 = (this + 27512);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 27200);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v9 = (this + 23008);
    }

    else
    {
      v22 = (this + 25392);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 25528);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v9 = (this + 23008);
      v22 = (this + 25680);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    }

    if (v5)
    {
      if (v5 == 2)
      {
        if (v8)
        {
          v22 = (this + 20152);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        }

        v22 = (this + 21216);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = v9;
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 31784);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      }

      else if (v5 == 1)
      {
        v22 = (this + 20304);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 20456);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 21064);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 21216);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        if (OZChannel::getValueAsInt((this + 21216), &v23, 0.0) <= 3)
        {
          v22 = (this + 21472);
          std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        }

        v22 = v9;
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        if (OZChannel::getValueAsInt(v9, MEMORY[0x277CC08F0], 0.0))
        {
          goto LABEL_63;
        }
      }
    }

    else
    {
      if (v8)
      {
        v22 = (this + 20152);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 23160);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      }

      v22 = (this + 22496);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = v9;
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      if (OZChannel::getValueAsInt(v9, MEMORY[0x277CC08F0], 0.0))
      {
        goto LABEL_63;
      }
    }

    goto LABEL_71;
  }

  if (ValueAsInt == 1)
  {
    v10 = v6;
    v22 = (this + 23464);
    std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    v22 = (this + 24352);
    std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    if (v10)
    {
      v22 = (this + 20152);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 23160);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    }

    v22 = (this + 22240);
    std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    v22 = (this + 23008);
    std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    if (OZChannel::getValueAsInt(v20, MEMORY[0x277CC08F0], 0.0))
    {
      goto LABEL_63;
    }

    goto LABEL_71;
  }

  if (ValueAsInt != 2)
  {
    if (ValueAsInt == 4)
    {
      v7 = v6;
      v22 = (this + 27352);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = v21;
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      if (v7)
      {
        v22 = (this + 20152);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
        v22 = (this + 23160);
        std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      }

      v22 = (this + 22496);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 23008);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      if (OZChannel::getValueAsInt(v20, MEMORY[0x277CC08F0], 0.0))
      {
        goto LABEL_63;
      }

      goto LABEL_71;
    }

    goto LABEL_35;
  }

  v11 = v6;
  v22 = (this + 19896);
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
  v22 = (this + 23312);
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
  if (v5 != 2)
  {
    if (v5 == 1)
    {
      v22 = (this + 20304);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 20456);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 21064);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 22752);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 23008);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      if (!OZChannel::getValueAsInt(v20, MEMORY[0x277CC08F0], 0.0))
      {
        goto LABEL_71;
      }
    }

    else
    {
      if (v5)
      {
        goto LABEL_71;
      }

      if (!v11)
      {
        goto LABEL_71;
      }

      v22 = (this + 20152);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 23160);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 22496);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      v22 = (this + 23008);
      std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
      if (!OZChannel::getValueAsInt(v20, MEMORY[0x277CC08F0], 0.0))
      {
        goto LABEL_71;
      }
    }

LABEL_63:
    v22 = (this + 31784);
    std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
    goto LABEL_71;
  }

  if (v11)
  {
    v22 = (this + 20152);
    std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
  }

  v22 = (this + 22752);
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
  v22 = (this + 23008);
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
  v22 = (this + 31784);
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
LABEL_71:
  v22 = (this + 31328);
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v24, &v22);
  v14 = v24;
  v15 = v25;
  while (v14 != v15)
  {
    v22 = *v14;
    PSEmitter::updateChanHiddenFlag(this, v22, 0, a2);
    std::__tree<OZLocking *>::__erase_unique<OZLocking *>(&v27, &v22);
    ++v14;
  }

  v16 = v27;
  if (v27 != v28)
  {
    do
    {
      PSEmitter::updateChanHiddenFlag(this, v16[4], 1, a2);
      v17 = v16[1];
      if (v17)
      {
        do
        {
          v18 = v17;
          v17 = *v17;
        }

        while (v17);
      }

      else
      {
        do
        {
          v18 = v16[2];
          v19 = *v18 == v16;
          v16 = v18;
        }

        while (!v19);
      }

      v16 = v18;
    }

    while (v18 != v28);
  }

  PSEmitter::updatePropertiesChans(this, a2);
  if (v24)
  {
    v25 = v24;
    operator delete(v24);
  }

  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&v27, v28[0]);
}

void sub_2602C502C(_Unwind_Exception *a1)
{
  v3 = *(v1 - 136);
  if (v3)
  {
    *(v1 - 128) = v3;
    operator delete(v3);
  }

  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(v1 - 112, *(v1 - 104));
  _Unwind_Resume(a1);
}

uint64_t PSReplicator::createParticleType(PSReplicator *this, OZImageNode *a2)
{
  PCURL::PCURL(&v8, @"Particle Type Default Name");
  if (a2)
  {
    if (v3)
    {
      Name = OZObjectManipulator::getName(&v3->var2);
      PCString::set(&v8, Name);
    }
  }

  NextUniqueID = OZChannelBase::getNextUniqueID(v3);
  ReplicatorPType = PSReplicatorPType::createReplicatorPType(&v8, NextUniqueID);
  (*(*(ReplicatorPType + 16) + 120))();
  PCString::~PCString(&v8);
  return ReplicatorPType;
}

uint64_t PSReplicator::parseEnd(PSReplicator *this, PCSerializerReadStream *a2)
{
  v3 = PSEmitter::parseEnd(this, a2);
  if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(*((*(*(this + 25) + 664))(this + 200) + 8) + 8), xmmword_260853DC0)))) & 1) == 0 && OZChannel::getValueAsInt((this + 32944), MEMORY[0x277CC08F0], 0.0))
  {
    OZChannel::setDefaultValue((this + 32944), 0.0);
    OZChannelBase::reset((this + 32944), 0);
  }

  return v3;
}

uint64_t non-virtual thunk toPSReplicator::parseEnd(PSReplicator *this, PCSerializerReadStream *a2)
{
  return PSReplicator::parseEnd((this - 200), a2);
}

{
  return PSReplicator::parseEnd((this - 248), a2);
}

void PSReplicatorPType::PSReplicatorPType(PSReplicatorPType *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  PSParticleType::PSParticleType(this, a2, a3, a4);
  *v5 = &unk_2872D4B40;
  *(v5 + 16) = &unk_2872D51D0;
  *(v5 + 48) = &unk_2872D5428;
  *(v5 + 1088) = &unk_2872D5480;
  *(v5 + 1112) = &unk_2872D5558;
  *(v5 + 16976) = 0;
  PCURL::PCURL(&v6, @"Replicator PType Align Rotation");
  OZChannelBase::setName((this + 2184), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Rotation");
  OZChannelBase::setName((this + 2336), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Rotation End");
  OZChannelBase::setName((this + 3192), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Rotation Variance");
  OZChannelBase::setName((this + 4208), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Color Mode Enum");
  OZChannelEnum::setStrings(this + 671, &v6, 1);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Color Over Order");
  OZChannelBase::setName((this + 6784), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Solid Color");
  OZChannelBase::setName((this + 5624), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Random Color");
  OZChannelBase::setName((this + 7584), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Color Repetitions");
  OZChannelBase::setName((this + 7736), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Take Image Color");
  OZChannelBase::setName((this + 7888), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Scale");
  OZChannelBase::setName((this + 8040), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Scale End");
  OZChannelBase::setName((this + 8632), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Scale Variance");
  OZChannelBase::setName((this + 9224), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Is Additive Blend");
  OZChannelBase::setName(this + 89, &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Animate Image");
  OZChannelBase::setName((this + 10120), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Random Source Start Frame");
  OZChannelBase::setName((this + 10272), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Source Start Frame");
  OZChannelBase::setName((this + 10424), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Source Start Frame Offset");
  OZChannelBase::setName((this + 10576), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Hold Frames");
  OZChannelBase::setName((this + 10888), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Hold Frames Variance");
  OZChannelBase::setName((this + 11040), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Shape");
  OZChannelBase::setName((this + 11344), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Shape Enum");
  OZChannelEnum::setStrings(this + 1418, &v6, 1);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Seed");
  OZChannelBase::setName((this + 11600), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Point Size");
  OZChannelBase::setName((this + 11752), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Image Node Ref");
  OZChannelBase::setName((this + 14392), &v6, 0);
  PCString::~PCString(&v6);
  OZChannel::setDefaultValue((this + 1120), 0.0);
  OZChannelBase::reset(this + 10, 0);
  OZChannel::setDefaultValue((this + 8768), 1.0);
  OZChannel::setDefaultValue((this + 8920), 1.0);
  OZChannel::setDefaultValue((this + 9072), 1.0);
  OZChannelBase::reset((this + 8632), 0);
  OZChannel::setDefaultValue((this + 1576), 10000.0);
  OZChannelBase::reset((this + 1576), 0);
  OZChannel::setDefaultValue((this + 10272), 0.0);
  OZChannelBase::reset((this + 10272), 0);
  PCURL::PCURL(&v6, @"Replicator PType Color Mode Enum");
  OZChannelEnum::setStrings(this + 671, &v6, 1);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Replicator PType Color Over Order");
  OZChannelBase::setName((this + 6784), &v6, 0);
  PCString::~PCString(&v6);
  OZChannelBase::resetFlag((this + 11344), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 11344));
  OZChannelBase::resetFlag((this + 1576), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 1576));
  OZChannelBase::resetFlag(this + 10, 16, 0);
  OZChannelBase::saveStateAsDefault(this + 10);
  OZChannelBase::resetFlag((this + 1880), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 1880));
  OZChannelBase::resetFlag((this + 5064), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 5064));
  OZChannelBase::setFlag((this + 8040), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 8040));
  OZChannelBase::setFlag((this + 8632), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 8632));
  OZChannelBase::setFlag((this + 9224), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 9224));
  OZChannelBase::setFlag((this + 2336), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 2336));
  OZChannelBase::setFlag((this + 3192), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 3192));
  OZChannelBase::setFlag((this + 4208), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 4208));
  OZChannelBase::setFlag(this + 10, 2, 0);
  OZChannelBase::saveStateAsDefault(this + 10);
  OZChannelBase::setFlag((this + 1272), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1272));
  OZChannelBase::setFlag((this + 1424), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1424));
  OZChannelBase::setFlag((this + 1576), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1576));
  OZChannelBase::setFlag((this + 1728), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1728));
  OZChannelBase::setFlag((this + 1880), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1880));
  OZChannelBase::setFlag((this + 2032), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 2032));
  OZChannelBase::setFlag((this + 5064), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 5064));
  OZChannelBase::setFlag((this + 5216), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 5216));
  OZChannelBase::setFlag((this + 9816), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 9816));
  OZChannelBase::setFlag((this + 11192), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 11192));
  (*(*this + 1528))(this, 1);
  PCString::PCString(&v6, "Channel Z", "com.apple.prochannel.framework");
  OZChannelBase::setName((this + 2776), &v6, 0);
  PCString::~PCString(&v6);
  PCString::PCString(&v6, "Channel Z", "com.apple.prochannel.framework");
  OZChannelBase::setName((this + 3632), &v6, 0);
  PCString::~PCString(&v6);
  PCString::PCString(&v6, "Channel Z", "com.apple.prochannel.framework");
  OZChannelBase::setName((this + 4648), &v6, 0);
  PCString::~PCString(&v6);
}

void sub_2602C5ECC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  PSParticleType::~PSParticleType(v10);
  _Unwind_Resume(a1);
}

void PSReplicatorPType::PSReplicatorPType(PSReplicatorPType *this, PSReplicatorPType *a2, char a3)
{
  PSParticleType::PSParticleType(this, a2, a3);
  *v4 = &unk_2872D4B40;
  *(v4 + 16) = &unk_2872D51D0;
  *(v4 + 48) = &unk_2872D5428;
  *(v4 + 1088) = &unk_2872D5480;
  *(v4 + 1112) = &unk_2872D5558;
  *(v4 + 16976) = *(a2 + 16976);
}

void PSReplicatorPType::~PSReplicatorPType(PSReplicatorPType *this)
{
  *this = &unk_2872D4B40;
  *(this + 2) = &unk_2872D51D0;
  *(this + 6) = &unk_2872D5428;
  *(this + 136) = &unk_2872D5480;
  *(this + 139) = &unk_2872D5558;
  OZSystemSimulator::flushCache((this + 15520), 1, 0);
  OZSystemSimulator::flushCache((this + 15800), 1, 0);

  PSParticleType::~PSParticleType(this);
}

{
  PSReplicatorPType::~PSReplicatorPType(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toPSReplicatorPType::~PSReplicatorPType(PSReplicatorPType *this)
{
  PSReplicatorPType::~PSReplicatorPType((this - 16));
}

{
  PSReplicatorPType::~PSReplicatorPType((this - 48));
}

{
  PSReplicatorPType::~PSReplicatorPType((this - 1088));
}

{
  PSReplicatorPType::~PSReplicatorPType((this - 1112));
}

{
  PSReplicatorPType::~PSReplicatorPType((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSReplicatorPType::~PSReplicatorPType((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSReplicatorPType::~PSReplicatorPType((this - 1088));

  JUMPOUT(0x2666E9F00);
}

{
  PSReplicatorPType::~PSReplicatorPType((this - 1112));

  JUMPOUT(0x2666E9F00);
}

uint64_t PSReplicatorPType::getPreviewSceneNode(PSReplicatorPType *this)
{
  v1 = theApp;
  v6 = xmmword_260853DC0;
  PCURL::PCURL(&v5, @"Replicator Name");
  OZChannelBase::getNextUniqueID(v2);
  SceneNode = OZApplication::createSceneNode(v1, &v6);
  PCString::~PCString(&v5);
  return SceneNode;
}

uint64_t PSReplicatorPType::simAnythingToSimulate(PSReplicatorPType *this)
{
  v1 = (*(*this + 640))(this);
  std::list<OZSimulationBehavior *>::list(&v10, v1 + 224);
  v2 = v11;
  if (v11 != &v10)
  {
    v3 = 0;
    do
    {
      if ((*(*(v2[2] + 16) + 24))())
      {
        if (v3 > 0)
        {
          goto LABEL_19;
        }

        ++v3;
      }

      v2 = v2[1];
    }

    while (v2 != &v10);
  }

  v4 = *(v1 + 48);
  if (v4)
  {
    while (1)
    {
      if ((*(v4 + 57) & 0x20) != 0)
      {
        if (v5)
        {
          break;
        }
      }

LABEL_16:
      v4 = *(v4 + 48);
      if (!v4)
      {
        goto LABEL_20;
      }
    }

    std::list<OZSimulationBehavior *>::list(v9, v5 + 224);
    for (i = v9[1]; ; i = i[1])
    {
      if (i == v9)
      {
        std::__list_imp<unsigned int>::clear(v9);
        goto LABEL_16;
      }

      v7 = i[2];
      if ((*(*v7 + 656))(v7) & 1) == 0 && ((*(v7[2] + 24))(v7 + 2, 0, 1))
      {
        break;
      }
    }

    std::__list_imp<unsigned int>::clear(v9);
LABEL_19:
    v4 = 1;
  }

LABEL_20:
  std::__list_imp<unsigned int>::clear(&v10);
  return v4;
}

void sub_2602C6660(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__list_imp<unsigned int>::clear(va);
  _Unwind_Resume(a1);
}

__n128 PSReplicatorPType::simGetFirstFrame@<Q0>(PSParticleType *this@<X0>, const CMTime *x1_0@<X1>, CMTime *a2@<X8>)
{
  if (*(this + 16976) == 1)
  {
    result.n128_f64[0] = PSParticleType::simGetFirstFrame(this, a2);
  }

  else
  {
    result = *&x1_0->value;
    *a2 = *x1_0;
  }

  return result;
}

__n128 non-virtual thunk toPSReplicatorPType::simGetFirstFrame@<Q0>(PSReplicatorPType *this@<X0>, const CMTime *a2@<X1>, CMTime *a3@<X8>)
{
  if (*(this + 15864) == 1)
  {
    result.n128_f64[0] = PSParticleType::simGetFirstFrame((this - 1112), a3);
  }

  else
  {
    result = *&a2->value;
    *a3 = *a2;
  }

  return result;
}

PSEmitter *PSReplicatorPType::simFlushedCache(PSReplicatorPType *this, OZSystemSimulator *a2)
{
  PSParticleType::simFlushedCache(this, a2);
  result = PSReplicatorPType::getReplicator(this);
  if (result)
  {
    result = PSEmitter::simulatingAnyParticleTypes(result);
  }

  *(this + 16976) = result;
  return result;
}

void *PSReplicatorPType::getReplicator(PSReplicatorPType *this)
{
  result = *(this + 2054);
  if (result)
  {
  }

  return result;
}

void PSReplicatorPType::updateGradientStringName(PSReplicatorPType *this, char a2)
{
  if ((a2 & 1) == 0)
  {
    if ((*(*this + 272))(this))
    {
      v4 = *((*(*this + 272))(this) + 1584);
      if (v4)
      {
        v5 = *(v4 + 168);
        if (!v5 || !OZNotificationManager::wasChannelModified(v5, (this + 6784)))
        {
          PCSharedCount::PCSharedCount(&v7);
          OZChannelBase::addToUndo((this + 6784), &v7);
          PCString::~PCString(&v7);
        }
      }
    }
  }

  ValueAsInt = OZChannel::getValueAsInt((this + 5368), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt > 1)
  {
    if (ValueAsInt == 2)
    {
      PCURL::PCURL(&v7, @"Replicator PType Color Over Order");
      OZChannelBase::setName((this + 6784), &v7, 0);
    }

    else
    {
      if (ValueAsInt != 3)
      {
        return;
      }

      OZChannelBase::resetFlag((this + 6912), 2, a2);
      PCURL::PCURL(&v7, @"Emitter Color Range");
      OZChannelBase::setName((this + 6784), &v7, 0);
    }
  }

  else
  {
    if (ValueAsInt > 1)
    {
      return;
    }

    OZChannelBase::setFlag((this + 6912), 2, a2);
    PCURL::PCURL(&v7, @"Replicator PType Opacity Over Order");
    OZChannelBase::setName((this + 6784), &v7, 0);
  }

  PCString::~PCString(&v7);
}

void PSReplicatorPType::updateRotationStringNames(PSReplicatorPType *this)
{
  v2 = *(this + 2054);
  if (v2 && !OZChannel::getValueAsInt((v2 + 32792), MEMORY[0x277CC08F0], 0.0))
  {
    PCURL::PCURL(&v3, @"Particle Type Rotation");
    OZChannelBase::setName((this + 2776), &v3, 1);
    PCString::~PCString(&v3);
    PCURL::PCURL(&v3, @"Particle Type Rotation End");
    OZChannelBase::setName((this + 3632), &v3, 1);
    PCString::~PCString(&v3);
    PCURL::PCURL(&v3, @"Particle Type Rotation Variance");
    OZChannelBase::setName((this + 4648), &v3, 1);
  }

  else
  {
    PCString::PCString(&v3, "Channel Z", "com.apple.prochannel.framework");
    OZChannelBase::setName((this + 2776), &v3, 1);
    PCString::~PCString(&v3);
    PCString::PCString(&v3, "Channel Z", "com.apple.prochannel.framework");
    OZChannelBase::setName((this + 3632), &v3, 1);
    PCString::~PCString(&v3);
    PCString::PCString(&v3, "Channel Z", "com.apple.prochannel.framework");
    OZChannelBase::setName((this + 4648), &v3, 1);
  }

  PCString::~PCString(&v3);
}

void PSReplicatorPType::getInitialParticleColor(PSReplicatorPType *this, const CMTime *a2, PSParticle *a3, int a4, PCColor *a5)
{
  v28 = *MEMORY[0x277D85DE8];
  ValueAsInt = OZChannel::getValueAsInt((this + 5368), a2, 0.0);
  v11 = ValueAsInt;
  if (ValueAsInt == 3)
  {
    v17 = *(this + 1902);
    v18 = (*(*a3 + 32))(a3);
    v19 = -32;
    v20 = -1640531527;
    do
    {
      v18 += (a4 + 16 * v17) ^ (v17 + v20) ^ (PCRandom::hashTEA(unsigned int,unsigned int,unsigned int)::kK1 + (v17 >> 5));
      v17 += (PCRandom::hashTEA(unsigned int,unsigned int,unsigned int)::kK2 + 16 * v18) ^ (v20 + v18) ^ (PCRandom::hashTEA(unsigned int,unsigned int,unsigned int)::kK3 + (v18 >> 5));
      v20 -= 1640531527;
    }

    while (!__CFADD__(v19++, 1));
    Alpha = PCColor::getAlpha(a5);
    PCColor::PCColor(&v26);
    OZChannelGradient::getColor((this + 6784), a2, (v17 ^ v18) / 4294967300.0, &v26);
    v23 = *&v26.var0.var1[1];
    *&a5->var0.var0 = *&v26.var0.var0;
    *&a5->var0.var1[1] = v23;
    *&a5->var0.var1[3] = *&v26.var0.var1[3];
    PCCFRef<CGColorSpace *>::operator=(&a5->var1._obj, &v26.var1._obj);
    if (OZChannel::getValueAsInt((this + 14704), MEMORY[0x277CC08F0], 0.0) <= 2)
    {
      PCColor::setAlpha(a5, Alpha);
    }

    PCCFRef<CGColorSpace *>::~PCCFRef(&v26.var1._obj);
  }

  else
  {
    if (ValueAsInt == 2)
    {
      OZChannel::getValueAsDouble((this + 7736), a2, 0.0);
      v13 = v12 + 1.0;
      if (v13 < 1.0)
      {
        v13 = 1.0;
      }

      v14 = *(a3 + 21) * v13;
      *&v26.var0.var0 = 0;
      modf(v14 + -0.0001, &v26.var0.var0);
      v15 = *&v26.var0.var0;
      PCColor::PCColor(&v26);
      OZChannelGradient::getColor((this + 6784), a2, v14 - v15, &v26);
      v16 = *&v26.var0.var1[1];
      *&a5->var0.var0 = *&v26.var0.var0;
      *&a5->var0.var1[1] = v16;
      *&a5->var0.var1[3] = *&v26.var0.var1[3];
      PCCFRef<CGColorSpace *>::operator=(&a5->var1._obj, &v26.var1._obj);
      PCCFRef<CGColorSpace *>::~PCCFRef(&v26.var1._obj);
      return;
    }

    PSParticleType::getInitialParticleColor(this, a2, a3, a4, a5);
  }

  if (v11 <= 1)
  {
    v26.var0.var1[1] = 0.0;
    *&v26.var0.var0 = v26.var0.var1;
    (*(*(this + 880) + 728))(this + 7040, a2, &v26);
    (*(*(this + 880) + 736))(this + 7040, v27, &v26, *(a3 + 21));
    v24 = v27[0];
    v25 = PCColor::getAlpha(a5);
    PCColor::setAlpha(a5, v24 * v25);
    std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&v26, *&v26.var0.var1[0]);
  }
}

CGColorSpace **PSReplicatorPType::getParticleColor(PSReplicatorPType *this, const CMTime *a2, PSParticle *a3, PSEmitter *a4, PCWorkingColor *a5)
{
  PCColor::PCColor(&v22);
  v10 = *(a3 + 8);
  *&v22.var0.var0 = *(a3 + 7);
  *&v22.var0.var1[1] = v10;
  *&v22.var0.var1[3] = *(a3 + 9);
  PCCFRef<CGColorSpace *>::operator=(&v22.var1._obj, a3 + 20);
  Alpha = PCColor::getAlpha(&v22);
  PSSequencedValues::PSSequencedValues(v17);
  v18 = *&v22.var0.var0;
  v19 = *&v22.var0.var1[1];
  v20 = *&v22.var0.var1[3];
  PCCFRef<CGColorSpace *>::operator=(v21, &v22.var1._obj);
  (*(*this + 1616))(this, a2, a3, v17);
  *&v22.var0.var0 = v18;
  *&v22.var0.var1[1] = v19;
  *&v22.var0.var1[3] = v20;
  PCCFRef<CGColorSpace *>::operator=(&v22.var1._obj, v21);
  v12 = v21[1];
  PSEmitter::tintColor(a4, a2, &v22);
  v13 = *&v12 * Alpha;
  v14 = *(this + 2063);
  if (v14)
  {
    OZChannel::getValueAsDouble((v14 + 6680), a2, 0.0);
    v13 = v15 * v13;
  }

  PCColor::setAlpha(&v22, v13);
  PCWorkingColor::operator=(a5, &v22.var0.var0);
  PCCFRef<CGColorSpace *>::~PCCFRef(v21);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v22.var1._obj);
}

void sub_2602C70B4(_Unwind_Exception *a1)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v2 + 80));
  PCCFRef<CGColorSpace *>::~PCCFRef((v1 + 48));
  _Unwind_Resume(a1);
}

uint64_t PSReplicatorPType::simAddObjects(PSReplicatorPType *this, OZSystemSimulator *a2, OZSimStateArray *a3, double a4)
{
  v27 = *(a3 + 1);
  if ((*(*this + 1656))(this))
  {
    (*(*this + 1128))(&time1, this);
    v26 = time1;
    v23 = 0uLL;
    v24 = 0;
    v7 = (*(*(*(this + 2054) + 200) + 272))();
    OZSceneSettings::getFrameDuration((v7 + 336), &v23);
    time1 = v27;
    time2 = v26;
    PC_CMTimeSaferSubtract(&time1, &time2, &v22);
    time1 = v22;
    *&time2.value = v23;
    time2.epoch = v24;
    v8 = CMTimeCompare(&time1, &time2);
    v9 = *(this + 2045);
    v10 = *(this + 2046);
    if ((v8 & 0x80000000) == 0 || v9 != v10)
    {
      if (v9 == v10)
      {
        return 0;
      }

      v19 = *v9;
      v20 = *(v19 + 8);
      time1.epoch = *(v19 + 24);
      *&time1.value = v20;
      time2 = v27;
      if (CMTimeCompare(&time1, &time2))
      {
        return 0;
      }
    }
  }

  NumEmissionPoints = PSEmitter::getNumEmissionPoints(*(this + 2054), &v27);
  if (NumEmissionPoints >= 1)
  {
    if ((this + 15800) == a2)
    {
      v12 = 1;
    }

    else
    {
      v12 = 2;
    }

    if ((this + 15520) == a2)
    {
      v13 = 0;
    }

    else
    {
      v13 = v12;
    }

    ParticlesForSimStyleType = PSParticleType::getParticlesForSimStyleType(this, v13);
    if (!(*(*this + 1656))(this))
    {
      ParticlesForSimStyleType = 0;
    }

    std::vector<OZSimStateElement>::resize(a3, NumEmissionPoints - 1108378657 * ((*(a3 + 1) - *a3) >> 3));
    if (!ParticlesForSimStyleType || (v16 = *ParticlesForSimStyleType, v15 = *(ParticlesForSimStyleType + 1), v15 == *ParticlesForSimStyleType))
    {
      PSParticleType::createParticles(this, ParticlesForSimStyleType, NumEmissionPoints, a3);
    }

    else
    {
      v17 = (*a3 + 232);
      do
      {
        v18 = *v16++;
        *v17 = v18;
        v17 += 31;
      }

      while (v16 != v15);
    }

    PSEmitter::initParticles(*(this + 2054), v13, this, NumEmissionPoints, 0, a3);
  }

  return NumEmissionPoints;
}

void PSEmitterMoToFoBehavior::PSEmitterMoToFoBehavior(PSEmitterMoToFoBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZSimSystemMoToFoBehavior::OZSimSystemMoToFoBehavior(this, a2, a3, a4);
  *v4 = &unk_2872D5628;
  *(v4 + 16) = &unk_2872D5920;
  *(v4 + 48) = &unk_2872D5B78;
  OZChannelBase::setFlag((v4 + 56), 10, 0);
}

void PSEmitterMoToFoBehavior::PSEmitterMoToFoBehavior(PSEmitterMoToFoBehavior *this, PSEmitterMoToFoBehavior *a2, char a3)
{
  OZSimSystemMoToFoBehavior::OZSimSystemMoToFoBehavior(this, a2, a3);
  *v5 = &unk_2872D5628;
  v5[2] = &unk_2872D5920;
  v5[6] = &unk_2872D5B78;
  if ((a3 & 0x20) != 0)
  {
    v6 = OZSimulationBehavior::_MTF_IDGenerator--;
    OZChannelBase::setID((this + 56), v6);
  }

  OZChannelBase::setFlag((this + 56), 10, 0);
}

void non-virtual thunk toPSEmitterMoToFoBehavior::~PSEmitterMoToFoBehavior(PSEmitterMoToFoBehavior *this)
{
  OZSimSystemMoToFoBehavior::~OZSimSystemMoToFoBehavior((this - 16));
}

{
  OZSimSystemMoToFoBehavior::~OZSimSystemMoToFoBehavior((this - 48));
}

{
  OZSimSystemMoToFoBehavior::~OZSimSystemMoToFoBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZSimSystemMoToFoBehavior::~OZSimSystemMoToFoBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

void PSEmitterMoToFoBehavior::~PSEmitterMoToFoBehavior(PSEmitterMoToFoBehavior *this)
{
  OZSimSystemMoToFoBehavior::~OZSimSystemMoToFoBehavior(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t PSEmitterMoToFoBehavior::operator=(uint64_t a1)
{
  result = OZSimSystemMoToFoBehavior::operator=(a1);
  *(a1 + 1088) = 0;
  return result;
}

void PSEmitterMoToFoBehavior::didAddToNode(PSEmitterMoToFoBehavior *this, OZSceneNode *lpsrc)
{
  if (lpsrc)
  {
  }

  else
  {
    v4 = 0;
  }

  *(this + 136) = v4;

  OZSimSystemMoToFoBehavior::didAddToNode(this, lpsrc);
}

void *PSEmitterMoToFoBehavior::getParentTransformNode(PSEmitterMoToFoBehavior *this)
{
  v1 = (*(*this + 320))(this);
  if (!v1)
  {
    return 0;
  }

  v2 = *(v1 + 960);
  if (!v2)
  {
    return 0;
  }
}

void PSScaleOverLifeBehavior::PSScaleOverLifeBehavior(PSScaleOverLifeBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  v15 = *MEMORY[0x277D85DE8];
  OZBehavior::OZBehavior(this, a2, a3, a4);
  *v5 = &unk_2872D5BE8;
  v5[2] = &unk_2872D5E68;
  v5[6] = &unk_2872D60C0;
  PCURL::PCURL(&v13, @"Scale Over Life Behavior Increment Type Enum");
  PCURL::PCURL(v14, @"Scale Over Life Behavior Increment Type");
  Instance = PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::getInstance(v6);
  OZChannelEnum::OZChannelEnum((this + 336), 3u, &v13, v14, (this + 56), 0xC9u, 0, Instance, 0);
  PCString::~PCString(v14);
  PCString::~PCString(&v13);
  PCURL::PCURL(&v13, @"Scale Over Life Behavior Scale Rate");
  v9 = PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::getInstance(v8);
  v10 = PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::getInstance(v9);
  OZChannel3D::OZChannel3D((this + 592), 0.2, 0.2, 0.2, &v13, (this + 56), 0xCAu, 0, 2u, v9, v10);
  PCString::~PCString(&v13);
  PCURL::PCURL(&v13, @"Scale Over Life Behavior Begin Scale");
  OZChannelScale3D::OZChannelScale3D((this + 1184), 0.0, 0.0, 0.0, &v13, (this + 56), 0xCBu, 0);
  PCString::~PCString(&v13);
  PCURL::PCURL(&v13, @"Scale Over Life Behavior End Scale");
  OZChannelScale3D::OZChannelScale3D((this + 1776), 1.0, 1.0, 1.0, &v13, (this + 56), 0xCCu, 0);
  PCString::~PCString(&v13);
  PCURL::PCURL(&v13, @"Scale Over Life Behavior Custom Scale");
  v12 = PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::getInstance(v11);
  OZChannelScaleOverRange::OZChannelScaleOverRange((this + 2368), &v13, (this + 56), 0xC8u, 2u, 0, v12);
  PCString::~PCString(&v13);
  *&v14[0].var0 = xmmword_260347B10;
  OZChannelEnum::setTags((this + 336), v14, 4);
  OZChannelBase::resetFlag((this + 2368), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 2368));
  (*(*(this + 313) + 728))(this + 2504, MEMORY[0x277CC08F0]);
  OZFigTimeForChannelSeconds(&v13, 1.0, 0x40000);
  (*(*(this + 313) + 728))(this + 2504, &v13);
  (*(*(this + 332) + 728))(this + 2656, MEMORY[0x277CC08F0]);
  OZFigTimeForChannelSeconds(&v13, 1.0, 0x40000);
  (*(*(this + 332) + 728))(this + 2656, &v13);
  PCURL::PCURL(&v13, @"Scale Over Life Behavior Over Life");
  PCString::set(this + 351, &v13);
  PCString::~PCString(&v13);
  OZChannelScaleOverRange::setValueOverRange((this + 2368), 0.0, 0.0, 0.0, 0.0);
}

void sub_2602C7B5C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10, uint64_t a11, uint64_t a12, PCString a13)
{
  PCString::~PCString(&a10);
  OZChannelScaleOverRange::~OZChannelScaleOverRange(v13 + 296);
  OZChannelScale3D::~OZChannelScale3D(&v13[222]);
  OZChannelScale3D::~OZChannelScale3D(&v13[148]);
  OZChannel3D::~OZChannel3D(&v13[74]);
  OZChannelEnum::~OZChannelEnum(&v13[42]);
  OZBehavior::~OZBehavior(v13);
  _Unwind_Resume(a1);
}

void PSScaleOverLifeBehavior::PSScaleOverLifeBehavior(PSScaleOverLifeBehavior *this, const PSScaleOverLifeBehavior *a2, char a3)
{
  v7 = *MEMORY[0x277D85DE8];
  OZBehavior::OZBehavior(this, a2, a3);
  *v5 = &unk_2872D5BE8;
  v5[2] = &unk_2872D5E68;
  v5[6] = &unk_2872D60C0;
  OZChannelEnum::OZChannelEnum((v5 + 42), (a2 + 336), (this + 56));
  OZChannel3D::OZChannel3D((this + 592), (a2 + 592), (this + 56));
  OZChannelScale3D::OZChannelScale3D((this + 1184), (a2 + 1184), (this + 56));
  OZChannelScale3D::OZChannelScale3D((this + 1776), (a2 + 1776), (this + 56));
  OZChannelScaleOverRange::OZChannelScaleOverRange((this + 2368), (a2 + 2368), (this + 56));
  v6 = xmmword_260347B10;
  OZChannelEnum::setTags((this + 336), &v6, 4);
  OZChannelBase::resetFlag((this + 2368), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 2368));
}

void sub_2602C7D84(_Unwind_Exception *a1)
{
  OZChannelScale3D::~OZChannelScale3D((v1 + 1776));
  OZChannelScale3D::~OZChannelScale3D((v1 + 1184));
  OZChannel3D::~OZChannel3D((v1 + 592));
  OZChannelEnum::~OZChannelEnum((v1 + 336));
  OZBehavior::~OZBehavior(v1);
  _Unwind_Resume(a1);
}

void PSScaleOverLifeBehavior::~PSScaleOverLifeBehavior(PSScaleOverLifeBehavior *this)
{
  *this = &unk_2872D5BE8;
  *(this + 2) = &unk_2872D5E68;
  *(this + 6) = &unk_2872D60C0;
  v2 = (this + 2368);
  *(this + 296) = &unk_2872530E0;
  *(this + 298) = &unk_287253458;
  PCString::~PCString(this + 351);
  OZChannel2D::~OZChannel2D(v2);
  *(this + 222) = &unk_2872557A8;
  *(this + 224) = &unk_287255B00;
  OZChannel::~OZChannel((this + 2216));
  OZChannel2D::~OZChannel2D((this + 1776));
  *(this + 148) = &unk_2872557A8;
  *(this + 150) = &unk_287255B00;
  OZChannel::~OZChannel((this + 1624));
  OZChannel2D::~OZChannel2D((this + 1184));
  *(this + 74) = &unk_28724B1C8;
  *(this + 76) = &unk_28724B528;
  OZChannel::~OZChannel((this + 1032));
  OZChannel2D::~OZChannel2D((this + 592));
  OZChannelEnum::~OZChannelEnum((this + 336));

  OZBehavior::~OZBehavior(this);
}

{
  PSScaleOverLifeBehavior::~PSScaleOverLifeBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toPSScaleOverLifeBehavior::~PSScaleOverLifeBehavior(PSScaleOverLifeBehavior *this)
{
  PSScaleOverLifeBehavior::~PSScaleOverLifeBehavior((this - 16));
}

{
  PSScaleOverLifeBehavior::~PSScaleOverLifeBehavior((this - 48));
}

{
  PSScaleOverLifeBehavior::~PSScaleOverLifeBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSScaleOverLifeBehavior::~PSScaleOverLifeBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

void PSScaleOverLifeBehavior::operator=(PCString *a1, const void *a2)
{
  OZBehavior::operator=(a1, a2);
  if (!v4)
  {
    __cxa_bad_cast();
  }

  v5 = v4;
  OZChannelBase::operator=(&a1[42], &v4[42]);
  OZChannelFolder::operator=(&a1[74]);
  OZChannelBase::operator=(&a1[91], &v5[91]);
  OZChannelBase::operator=(&a1[110], &v5[110]);
  OZChannelBase::operator=(&a1[129], &v5[129]);
  OZChannelFolder::operator=(&a1[148]);
  OZChannelBase::operator=(&a1[165], &v5[165]);
  OZChannelBase::operator=(&a1[184], &v5[184]);
  OZChannelBase::operator=(&a1[203], &v5[203]);
  OZChannelFolder::operator=(&a1[222]);
  OZChannelBase::operator=(&a1[239], &v5[239]);
  OZChannelBase::operator=(&a1[258], &v5[258]);
  OZChannelBase::operator=(&a1[277], &v5[277]);
  OZChannelFolder::operator=(&a1[296]);
  OZChannelBase::operator=(&a1[313], &v5[313]);
  OZChannelBase::operator=(&a1[332], &v5[332]);

  PCString::set(a1 + 351, v5 + 351);
}

unint64_t PSScaleOverLifeBehavior::canAddToSceneNode(PSScaleOverLifeBehavior *this, OZSceneNode *a2)
{
  v3 = *((*(*a2 + 664))(a2) + 8);
  v6 = xmmword_260850EE0;
  if (OZFactory::isKindOfClass(v3, &v6))
  {
    v6 = xmmword_260857860;
    if (!OZFactory::isKindOfClass(v3, &v6))
    {
      return 1;
    }
  }

  v6 = xmmword_260853DB0;
  if (OZFactory::isKindOfClass(v3, &v6))
  {
    v6 = xmmword_260853DC0;
    if (!OZFactory::isKindOfClass(v3, &v6))
    {
      return 1;
    }
  }

  v6 = xmmword_26084F780;
  result = OZFactory::isKindOfClass(v3, &v6);
  if (!result)
  {
    return result;
  }

  if (!OZChannelBase::isEnabled((v5 + 25776), 0, 1) || (OZChannelBase::isEnabled((v5 + 21760), 0, 1) & 1) != 0)
  {
    return 0;
  }

  result = OZChannel::getValueAsInt((v5 + 25904), MEMORY[0x277CC08F0], 0.0);
  if (result != 1)
  {
    return OZChannel::getValueAsInt((v5 + 25904), MEMORY[0x277CC08F0], 0.0) == 2;
  }

  return result;
}

OZChannelBase *PSScaleOverLifeBehavior::updateHiddenFlags(uint64_t a1, uint64_t a2)
{
  result = OZChannel::getValueAsInt((a1 + 336), MEMORY[0x277CC08F0], 0.0);
  v4 = result;
  v5 = *(a2 + 8);
  if (v5 == a2)
  {
    v8 = 1;
  }

  else
  {
    v6 = MEMORY[0x277CC08F0];
    do
    {
      result = OZChannel::getValueAsInt((v7 + 336), v6, 0.0);
      v8 = v4 == result;
      if (v4 != result)
      {
        break;
      }

      v5 = *(v5 + 8);
    }

    while (v5 != a2);
    v5 = *(a2 + 8);
  }

  for (; v5 != a2; v5 = *(v5 + 8))
  {
    v9 = *(v5 + 16);
    if (v9)
    {
    }

    else
    {
      v10 = 0;
    }

    OZChannelBase::resetFlag((v10 + 592), 2, 1);
    OZChannelBase::resetFlag((v10 + 1184), 2, 1);
    OZChannelBase::resetFlag((v10 + 1776), 2, 1);
    result = OZChannelBase::resetFlag((v10 + 2368), 2, 1);
    if (v8)
    {
      if (!v4)
      {
        OZChannelBase::resetFlag((v10 + 592), 0x400000, 1);
        OZChannelBase::setFlag((v10 + 1184), 0x400000, 1);
        OZChannelBase::setFlag((v10 + 1776), 0x400000, 1);
        goto LABEL_18;
      }

      if ((v4 & 0xFFFFFFFD) == 1)
      {
        OZChannelBase::setFlag((v10 + 592), 0x400000, 1);
        OZChannelBase::resetFlag((v10 + 1184), 0x400000, 1);
        OZChannelBase::resetFlag((v10 + 1776), 0x400000, 1);
LABEL_18:
        result = OZChannelBase::setFlag((v10 + 2368), 0x400000, 1);
        continue;
      }

      if (v4 != 2)
      {
        continue;
      }

      OZChannelBase::setFlag((v10 + 592), 0x400000, 1);
      OZChannelBase::setFlag((v10 + 1184), 0x400000, 1);
      OZChannelBase::setFlag((v10 + 1776), 0x400000, 1);
    }

    else
    {
      OZChannelBase::resetFlag((v10 + 592), 0x400000, 1);
      OZChannelBase::resetFlag((v10 + 1184), 0x400000, 1);
      OZChannelBase::resetFlag((v10 + 1776), 0x400000, 1);
    }

    result = OZChannelBase::resetFlag((v10 + 2368), 0x400000, 1);
  }

  return result;
}

uint64_t PSScaleOverLifeBehavior::parseBegin(PSScaleOverLifeBehavior *this, PCSerializerReadStream *a2)
{
  if (*(a2 + 26) <= 2u)
  {
    OZChannel::setDefaultValue((this + 2504), 0.2);
    OZChannel::setDefaultValue((this + 2656), 0.2);
    OZChannelBase::reset((this + 2368), 0);
  }

  return OZBehavior::parseBegin(this, a2);
}

uint64_t PSScaleOverLifeBehavior::parseEnd(PSScaleOverLifeBehavior *this, PCSerializerReadStream *a2)
{
  if (*(a2 + 26) <= 2u)
  {
    (*(*this + 608))(&v9, this);
    time1 = v10;
    time2 = **&MEMORY[0x277CC08F0];
    if (CMTimeCompare(&time1, &time2) < 1)
    {
      v4 = 1.0;
    }

    else
    {
      time1 = v10;
      time2 = *(a2 + 112);
      v4 = 1.0 / PC_CMTimeGetSampleNumber(&time1, &time2);
    }

    v5 = *(*(*this + 312))(this);
    (*(v5 + 320))(&v7);
    time2 = v9;
    time1 = v7;
    PC_CMTimeSaferSubtract(&time1, &time2, &v8);
    operator*(&v8, &time1, v4);
    v8 = time1;
    OZChannel::linearTimeWarp((this + 2504), v4, &v8);
    OZChannel::linearTimeWarp((this + 2656), v4, &v8);
  }

  return OZBehavior::parseEnd(this, a2);
}

void PSScaleOverLifeBehavior::getScale(uint64_t a1, __int128 *a2, CMTime *a3, uint64_t a4)
{
  time1 = *a3;
  time2 = **&MEMORY[0x277CC08F0];
  if (CMTimeCompare(&time1, &time2) < 1)
  {
    __asm { FMOV            V0.2D, #1.0 }

    *a4 = _Q0;
    *(a4 + 16) = 0x3FF0000000000000;
  }

  else
  {
    v8 = 0.0;
    ValueAsInt = OZChannel::getValueAsInt((a1 + 336), MEMORY[0x277CC08F0], 0.0);
    if (ValueAsInt > 1)
    {
      if (ValueAsInt == 2)
      {
        memset(&time1, 0, sizeof(time1));
        operator/(a2, a3, &time1);
        OZChannel::getValueAsDouble((a1 + 2504), &time1, 0.0);
        v11 = v45;
        OZChannel::getValueAsDouble((a1 + 2656), &time1, 0.0);
        v10 = v46;
        v8 = 1.0;
      }

      else
      {
        v10 = 0.0;
        v11 = 0.0;
        if (ValueAsInt == 3)
        {
          v53 = 0.0;
          time2.value = 0;
          v52 = 0.0;
          v19 = MEMORY[0x277CC08F0];
          OZChannelScale3D::getValue((a1 + 1184), MEMORY[0x277CC08F0], &time2.value, &v53, &v52, 0.0);
          v50 = 0.0;
          *&v51 = 0.0;
          v49 = 0.0;
          OZChannelScale3D::getValue((a1 + 1776), v19, &v51, &v50, &v49, 0.0);
          v20 = *&v51 - *&time2.value;
          v21 = v50 - v53;
          v22 = v49;
          v23 = v52;
          operator/(a2, a3, &time1);
          Seconds = CMTimeGetSeconds(&time1);
          v25 = Seconds;
          v26 = Seconds;
          if (v20 <= 0.0)
          {
            time2.value = v51;
            v26 = 1.0 - Seconds;
          }

          v27 = v22 - v23;
          if (v21 <= 0.0)
          {
            v53 = v50;
            v25 = 1.0 - Seconds;
          }

          v28 = &v52;
          if (v27 <= 0.0)
          {
            v28 = &v49;
          }

          v29 = *v28;
          if (v27 > 0.0)
          {
            v30 = Seconds;
          }

          else
          {
            v30 = 1.0 - Seconds;
          }

          v31 = log(fabs(v20) + 1.0);
          v32 = fabs(v21) + 1.0;
          v33 = v31 / 0.693147181;
          v34 = log(v32);
          v35 = fabs(v27) + 1.0;
          v36 = v34 / 0.693147181;
          v37 = log(v35);
          v38 = v33 * v26;
          v39 = v37 / 0.693147181;
          v40 = exp2(v38);
          v11 = v40 + -1.0 + *&time2.value;
          v41 = exp2(v36 * v25);
          v10 = v41 + -1.0 + v53;
          v8 = exp2(v39 * v30) + -1.0 + v29;
        }
      }
    }

    else if (ValueAsInt)
    {
      v10 = 0.0;
      v11 = 0.0;
      if (ValueAsInt == 1)
      {
        operator/(a2, a3, &time1);
        v12 = CMTimeGetSeconds(&time1);
        time1.value = 0;
        v53 = 0.0;
        time2.value = 0;
        v13 = MEMORY[0x277CC08F0];
        OZChannelScale3D::getValue((a1 + 1184), MEMORY[0x277CC08F0], &time1.value, &time2.value, &v53, 0.0);
        *&v51 = 0.0;
        v52 = 0.0;
        v50 = 0.0;
        OZChannelScale3D::getValue((a1 + 1776), v13, &v52, &v51, &v50, 0.0);
        v11 = *&time1.value + v12 * (v52 - *&time1.value);
        v10 = *&time2.value + v12 * (*&v51 - *&time2.value);
        v8 = v53 + v12 * (v50 - v53);
      }
    }

    else
    {
      v53 = 0.0;
      time2.value = 0;
      v52 = 0.0;
      OZChannelScale3D::getValue((a1 + 592), MEMORY[0x277CC08F0], &time2.value, &v53, &v52, 0.0);
      time1 = *a2;
      v42 = CMTimeGetSeconds(&time1);
      v11 = fmax(v42 * *&time2.value + 1.0, 0.0);
      time1 = *a2;
      v43 = CMTimeGetSeconds(&time1);
      v10 = fmax(v43 * v53 + 1.0, 0.0);
      time1 = *a2;
      v44 = CMTimeGetSeconds(&time1);
      v8 = fmax(v44 * v52 + 1.0, 0.0);
    }

    v47 = v10 * *(a4 + 8);
    v48 = v8 * *(a4 + 16);
    *a4 = v11 * *a4;
    *(a4 + 8) = v47;
    *(a4 + 16) = v48;
  }
}

uint64_t PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::getInstance(PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl *this)
{
  if (atomic_load_explicit(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::getInstance(void)::PSScaleOverLifeBehavior_incrementTypeChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::getInstance(void)::PSScaleOverLifeBehavior_incrementTypeChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::_PSScaleOverLifeBehavior_incrementTypeChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_incrementTypeChanImpl::_PSScaleOverLifeBehavior_incrementTypeChan)
  {
    operator new();
  }
}

uint64_t PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::getInstance(PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl *this)
{
  if (atomic_load_explicit(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::getInstance(void)::PSScaleOverLifeBehavior_scaleRateChanImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::getInstance(void)::PSScaleOverLifeBehavior_scaleRateChanImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::_PSScaleOverLifeBehavior_scaleRateChan;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanImpl::_PSScaleOverLifeBehavior_scaleRateChan)
  {
    operator new();
  }
}

uint64_t PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::getInstance(PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo *this)
{
  if (atomic_load_explicit(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::getInstance(void)::PSScaleOverLifeBehavior_scaleRateChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::getInstance(void)::PSScaleOverLifeBehavior_scaleRateChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::_PSScaleOverLifeBehavior_scaleRateChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::_PSScaleOverLifeBehavior_scaleRateChanInfo)
  {
    operator new();
  }
}

PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo *PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo::PSScaleOverLifeBehavior_scaleRateChanInfo(PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_scaleRateChanInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, -1.0, 1.0, 1.0, 0.01, 100.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D6220;
  *(this + 10) = &unk_2872D6240;
  return this;
}

uint64_t PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::getInstance(PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo *this)
{
  if (atomic_load_explicit(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::getInstance(void)::PSScaleOverLifeBehavior_customScaleChanInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::getInstance(void)::PSScaleOverLifeBehavior_customScaleChanInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::_PSScaleOverLifeBehavior_customScaleChanInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::_PSScaleOverLifeBehavior_customScaleChanInfo)
  {
    operator new();
  }
}

PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo *PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo::PSScaleOverLifeBehavior_customScaleChanInfo(PSScaleOverLifeBehavior::PSScaleOverLifeBehavior_customScaleChanInfo *this)
{
  PCString::PCString(&v3, "%");
  OZChannelInfo::OZChannelInfo(this, -5.0, 5.0, 0.01, 0.0001, 100.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872D6298;
  *(this + 10) = &unk_2872D62B8;
  return this;
}

void PSSequencedValues::PSSequencedValues(PSSequencedValues *this)
{
  *this = 0x3FF0000000000000;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  v2 = PCColor::WHITE(this);
  v3 = *(v2 + 2);
  v4 = *v2;
  *(this + 3) = *(v2 + 1);
  *(this + 4) = v3;
  *(this + 2) = v4;
  v5 = *(v2 + 6);
  *(this + 10) = v5;
  if (v5)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v5);
  }

  __asm { FMOV            V0.2D, #1.0 }

  *(this + 88) = _Q0;
  *(this + 104) = _Q0;
  *(this + 15) = 0;
  *(this + 16) = 0;
  *(this + 17) = 0;
  *(this + 18) = 0x3FF0000000000000;
}

void PSSequenceBehavior::PSSequenceBehavior(PSSequenceBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  v8 = *MEMORY[0x277D85DE8];
  OZBehavior::OZBehavior(this, a2, a3, a4);
  *v5 = &unk_2872D6310;
  v5[2] = &unk_2872D65E0;
  v5[6] = &unk_2872D6838;
  v5[42] = &unk_2872D6890;
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Rotation");
  OZChannelRotation3D::OZChannelRotation3D((this + 352), 0.0, 0.0, 0.0, v7, (this + 56), 0xCEu, 2u, 4u, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Color");
  OZChannelColorNoAlpha::OZChannelColorNoAlpha((this + 1208), 1.0, 1.0, 1.0, v7, (this + 56), 0xC9u, 2u, 5u);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Opacity");
  OZChannelPercent::OZChannelPercent((this + 2216), 1.0, v7, (this + 56), 0xCAu, 2u, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Scale");
  OZChannelScale3D::OZChannelScale3D((this + 2368), 1.0, 1.0, 1.0, v7, (this + 56), 0xCBu, 2u);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Width");
  OZChannelPercent::OZChannelPercent((this + 2960), 1.0, v7, (this + 56), 0xCFu, 2u, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Pos");
  OZChannelPosition3D::OZChannelPosition3D((this + 3112), 0.0, 0.0, 0.0, v7, (this + 56), 0xCCu, 2u, 3u);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Sequence Root");
  OZChannelFolder::OZChannelFolder((this + 4000), v7, (this + 56), 0xCDu, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Map Animation Enum");
  PCURL::PCURL(&v6, @"Replicator Sequence Behavior Map Animation");
  OZChannelEnum::OZChannelEnum((this + 4128), 1u, v7, &v6, (this + 4000), 0x3EEu, 2, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Sequencing Enum");
  PCURL::PCURL(&v6, @"Replicator Sequence Behavior Sequencing");
  OZChannelEnum::OZChannelEnum((this + 4384), v7, &v6, (this + 4000), 0x3F3u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Source Anim Enum");
  PCURL::PCURL(&v6, @"Replicator Sequence Behavior Source Anim");
  OZChannelEnum::OZChannelEnum((this + 4640), v7, &v6, (this + 4000), 0x3F4u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Units Enum");
  PCURL::PCURL(&v6, @"Replicator Sequence Behavior Units");
  OZChannelEnum::OZChannelEnum((this + 4896), v7, &v6, (this + 4000), 0x3F2u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Start");
  OZChannelPercent::OZChannelPercent((this + 5152), 0.0, v7, (this + 4000), 0x3E9u, 0x400002u, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior End");
  OZChannelPercent::OZChannelPercent((this + 5304), 0.1, v7, (this + 4000), 0x3EAu, 0x400002u, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Spread");
  OZChannelDouble::OZChannelDouble((this + 5456), 1.0, v7, (this + 4000), 0x3EBu, 0, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Offset Direction Enum");
  PCURL::PCURL(&v6, @"Replicator Sequence Behavior Offset Direction");
  OZChannelEnum::OZChannelEnum((this + 5608), v7, &v6, (this + 4000), 0x3ECu, 2u, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Offset Behavior Enum");
  PCURL::PCURL(&v6, @"Replicator Sequence Behavior Offset Behavior");
  OZChannelEnum::OZChannelEnum((this + 5864), v7, &v6, (this + 4000), 0x3EFu, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Offset");
  OZChannelPercent::OZChannelPercent((this + 6120), 0.0, v7, (this + 4000), 0x3F0u, 0x400002u, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior Loops");
  OZChannelDouble::OZChannelDouble((this + 6272), 1.0, v7, (this + 4000), 0x3F1u, 16, 0, 0);
  PCString::~PCString(v7);
  PCURL::PCURL(v7, @"Replicator Sequence Behavior End Condition Enum");
  PCURL::PCURL(&v6, @"Replicator Sequence Behavior End Condition");
  OZChannelEnum::OZChannelEnum((this + 6424), 0, v7, &v6, (this + 4000), 0x3EDu, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(v7);
  PCString::PCString(v7, "Use Quadratic Ease");
  OZChannelBool::OZChannelBool((this + 6680), 1, v7, (this + 4000), 0x3F5u, 2u, 0, 0);
  PCString::~PCString(v7);
  PCString::PCString(v7, "Obsolete Rotation");
  OZChannelAngle::OZChannelAngle((this + 6832), 0.0, v7, (this + 56), 0xC8u, 2, 0, 0);
  PCString::~PCString(v7);
  *v7 = xmmword_2608579F4;
  *&v7[12] = *(&xmmword_2608579F4 + 12);
  OZChannelEnum::setTags((this + 5864), v7, 7);
  OZChannel::setMin((this + 6120), -1.0);
  OZChannel::setSliderMin((this + 6120), -1.0);
  OZChannel::setKeyframable((this + 6272), 0);
  OZChannel::setMin((this + 6272), 1.0);
  OZChannel::setMin((this + 5456), 0.0);
  OZChannel::setSliderMin((this + 5456), 0.0);
  OZChannelBase::resetFlag((this + 4640), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 4640));
  OZChannelBase::resetFlag(this + 46, 16, 0);
  OZChannelBase::saveStateAsDefault(this + 46);
  OZChannelBase::resetFlag((this + 5304), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 5304));
  OZChannelBase::resetFlag((this + 6120), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 6120));
  *(this + 3552) = 0;
  OZChannelBase::resetFlag((this + 352), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 352));
  OZChannelBase::resetFlag((this + 1208), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 1208));
  OZChannelBase::resetFlag((this + 2216), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 2216));
  OZChannelBase::resetFlag((this + 2368), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 2368));
  OZChannelBase::resetFlag((this + 2960), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 2960));
  OZChannelBase::resetFlag((this + 3112), 16, 0);
  OZChannelFolder::saveStateAsDefault((this + 3112));
}

void sub_2602C9D98(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, _Unwind_Exception *exception_object, PCString a12, PCString a13)
{
  PCString::~PCString(&a13);
  OZChannelBool::~OZChannelBool((v13 + v21));
  OZChannelEnum::~OZChannelEnum((v13 + v14));
  OZChannel::~OZChannel((v13 + v17));
  OZChannelPercent::~OZChannelPercent((v13 + v16));
  OZChannelEnum::~OZChannelEnum((v13 + v15));
  OZChannelEnum::~OZChannelEnum((v13 + v18));
  OZChannel::~OZChannel((v13 + v20));
  OZChannelPercent::~OZChannelPercent((v13 + v19));
  OZChannelPercent::~OZChannelPercent((v13 + 5152));
  OZChannelEnum::~OZChannelEnum((v13 + 4896));
  OZChannelEnum::~OZChannelEnum((v13 + 4640));
  OZChannelEnum::~OZChannelEnum((v13 + 4384));
  OZChannelEnum::~OZChannelEnum((v13 + 4128));
  OZChannelFolder::~OZChannelFolder((v13 + 4000));
  OZChannelPosition3D::~OZChannelPosition3D((v13 + 3112));
  OZChannelPercent::~OZChannelPercent((v13 + 2960));
  OZChannelScale3D::~OZChannelScale3D((v13 + 2368));
  OZChannelPercent::~OZChannelPercent((v13 + 2216));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((v13 + 1208));
  OZChannelRotation3D::~OZChannelRotation3D((v13 + 352));
  OZBehavior::~OZBehavior(v13);
  _Unwind_Resume(a1);
}

void PSSequenceBehavior::PSSequenceBehavior(PSSequenceBehavior *this, const PSSequenceBehavior *a2, char a3)
{
  OZBehavior::OZBehavior(this, a2, a3);
  *v5 = &unk_2872D6310;
  v5[2] = &unk_2872D65E0;
  v5[6] = &unk_2872D6838;
  v5[42] = &unk_2872D6890;
  OZChannelRotation3D::OZChannelRotation3D((v5 + 44), (a2 + 352), (this + 56));
  OZChannelColorNoAlpha::OZChannelColorNoAlpha((this + 1208), (a2 + 1208), (this + 56));
  OZChannelPercent::OZChannelPercent((this + 2216), (a2 + 2216), (this + 56));
  OZChannelScale3D::OZChannelScale3D((this + 2368), (a2 + 2368), (this + 56));
  OZChannelPercent::OZChannelPercent((this + 2960), (a2 + 2960), (this + 56));
  OZChannelPosition3D::OZChannelPosition3D((this + 3112), (a2 + 3112), (this + 56));
  OZChannelFolder::OZChannelFolder((this + 4000), (a2 + 4000), (this + 56));
  OZChannelEnum::OZChannelEnum((this + 4128), (a2 + 4128), (this + 4000));
  OZChannelEnum::OZChannelEnum((this + 4384), (a2 + 4384), (this + 4000));
  OZChannelEnum::OZChannelEnum((this + 4640), (a2 + 4640), (this + 4000));
  OZChannelEnum::OZChannelEnum((this + 4896), (a2 + 4896), (this + 4000));
  OZChannelPercent::OZChannelPercent((this + 5152), a2 + 46, (this + 4000));
  OZChannelPercent::OZChannelPercent((this + 5304), (a2 + 5304), (this + 4000));
  OZChannel::OZChannel((this + 5456), (a2 + 5456), (this + 4000));
  *(this + 682) = &unk_287245C60;
  *(this + 684) = &unk_287245FC0;
  OZChannelEnum::OZChannelEnum((this + 5608), (a2 + 5608), (this + 4000));
  OZChannelEnum::OZChannelEnum((this + 5864), (a2 + 5864), (this + 4000));
  OZChannelPercent::OZChannelPercent((this + 6120), (a2 + 6120), (this + 4000));
  OZChannel::OZChannel((this + 6272), a2 + 56, (this + 4000));
  *(this + 784) = &unk_287245C60;
  *(this + 786) = &unk_287245FC0;
  OZChannelEnum::OZChannelEnum((this + 6424), (a2 + 6424), (this + 4000));
  OZChannelBool::OZChannelBool((this + 6680), (a2 + 6680), (this + 4000));
  OZChannel::OZChannel((this + 6832), a2 + 61, (this + 56));
  *(this + 854) = &unk_287246030;
  *(this + 856) = &unk_287246390;
}

void sub_2602CA41C(_Unwind_Exception *a1)
{
  OZChannelBool::~OZChannelBool((v1 + v8));
  OZChannelEnum::~OZChannelEnum((v1 + v7));
  OZChannel::~OZChannel(v3);
  OZChannelPercent::~OZChannelPercent((v1 + v6));
  OZChannelEnum::~OZChannelEnum((v1 + v5));
  OZChannelEnum::~OZChannelEnum((v1 + v4));
  OZChannel::~OZChannel(v2);
  OZChannelPercent::~OZChannelPercent((v1 + v9));
  OZChannelPercent::~OZChannelPercent((v1 + 5152));
  OZChannelEnum::~OZChannelEnum((v1 + 4896));
  OZChannelEnum::~OZChannelEnum((v1 + 4640));
  OZChannelEnum::~OZChannelEnum((v1 + 4384));
  OZChannelEnum::~OZChannelEnum((v1 + 4128));
  OZChannelFolder::~OZChannelFolder((v1 + 4000));
  OZChannelPosition3D::~OZChannelPosition3D((v1 + 3112));
  OZChannelPercent::~OZChannelPercent((v1 + 2960));
  OZChannelScale3D::~OZChannelScale3D((v1 + 2368));
  OZChannelPercent::~OZChannelPercent((v1 + 2216));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((v1 + 1208));
  OZChannelRotation3D::~OZChannelRotation3D((v1 + 352));
  OZBehavior::~OZBehavior(v1);
  _Unwind_Resume(a1);
}

void PSSequenceBehavior::~PSSequenceBehavior(PSSequenceBehavior *this)
{
  *this = &unk_2872D6310;
  *(this + 2) = &unk_2872D65E0;
  *(this + 6) = &unk_2872D6838;
  *(this + 42) = &unk_2872D6890;
  OZChannel::~OZChannel((this + 6832));
  OZChannelBool::~OZChannelBool((this + 6680));
  OZChannelEnum::~OZChannelEnum((this + 6424));
  OZChannel::~OZChannel((this + 6272));
  OZChannelPercent::~OZChannelPercent((this + 6120));
  OZChannelEnum::~OZChannelEnum((this + 5864));
  OZChannelEnum::~OZChannelEnum((this + 5608));
  OZChannel::~OZChannel((this + 5456));
  OZChannelPercent::~OZChannelPercent((this + 5304));
  OZChannelPercent::~OZChannelPercent((this + 5152));
  OZChannelEnum::~OZChannelEnum((this + 4896));
  OZChannelEnum::~OZChannelEnum((this + 4640));
  OZChannelEnum::~OZChannelEnum((this + 4384));
  OZChannelEnum::~OZChannelEnum((this + 4128));
  OZChannelFolder::~OZChannelFolder((this + 4000));
  OZChannelPosition3D::~OZChannelPosition3D((this + 3112));
  OZChannelPercent::~OZChannelPercent((this + 2960));
  *(this + 296) = &unk_2872557A8;
  *(this + 298) = &unk_287255B00;
  OZChannel::~OZChannel((this + 2808));
  OZChannel2D::~OZChannel2D((this + 2368));
  OZChannelPercent::~OZChannelPercent((this + 2216));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((this + 1208));
  OZChannelRotation3D::~OZChannelRotation3D((this + 352));

  OZBehavior::~OZBehavior(this);
}

{
  PSSequenceBehavior::~PSSequenceBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toPSSequenceBehavior::~PSSequenceBehavior(PSSequenceBehavior *this)
{
  PSSequenceBehavior::~PSSequenceBehavior((this - 16));
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 48));
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 336));
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

uint64_t PSSequenceBehavior::operator=(uint64_t a1, const void *a2)
{
  OZBehavior::operator=(a1, a2);
  if (!v4)
  {
    __cxa_bad_cast();
  }

  v5 = v4;
  OZChannelPosition::operator=(a1 + 352, (v4 + 352));
  OZChannelFolder::operator=(a1 + 1208);
  OZChannelBase::operator=(a1 + 1344, (v5 + 1344));
  OZChannelBase::operator=(a1 + 1496, (v5 + 1496));
  OZChannelBase::operator=(a1 + 1648, (v5 + 1648));
  OZChannelBase::operator=(a1 + 1800, (v5 + 1800));
  OZChannelBase::operator=(a1 + 1952, (v5 + 1952));
  *(a1 + 2208) = v5[2208];
  OZChannelBase::operator=(a1 + 2216, (v5 + 2216));
  OZChannelFolder::operator=(a1 + 2368);
  OZChannelBase::operator=(a1 + 2504, (v5 + 2504));
  OZChannelBase::operator=(a1 + 2656, (v5 + 2656));
  OZChannelBase::operator=(a1 + 2808, (v5 + 2808));
  OZChannelBase::operator=(a1 + 2960, (v5 + 2960));
  OZChannelPosition::operator=(a1 + 3112, (v5 + 3112));
  OZChannelFolder::operator=(a1 + 4000);
  OZChannelBase::operator=(a1 + 5864, (v5 + 5864));
  OZChannelBase::operator=(a1 + 6120, (v5 + 6120));
  OZChannelBase::operator=(a1 + 5608, (v5 + 5608));
  OZChannelBase::operator=(a1 + 6424, (v5 + 6424));
  OZChannelBase::operator=(a1 + 6680, (v5 + 6680));
  OZChannelBase::operator=(a1 + 6272, (v5 + 6272));
  OZChannelBase::operator=(a1 + 4384, (v5 + 4384));
  OZChannelBase::operator=(a1 + 4640, (v5 + 4640));
  OZChannelBase::operator=(a1 + 4896, (v5 + 4896));
  OZChannelBase::operator=(a1 + 5152, (v5 + 5152));
  OZChannelBase::operator=(a1 + 5304, (v5 + 5304));
  OZChannelBase::operator=(a1 + 5456, (v5 + 5456));
  OZChannelBase::operator=(a1 + 4128, (v5 + 4128));

  return OZChannelBase::operator=(a1 + 6832, (v5 + 6832));
}

uint64_t PSSequenceBehavior::didAddSceneNodeToScene(PSSequenceBehavior *this, OZScene *a2)
{
  result = (*(*this + 320))(this, a2);
  if (*(this + 43))
  {
    v4 = 1;
  }

  else
  {
    v4 = result == 0;
  }

  if (!v4)
  {
    v5 = *(*this + 696);

    return v5(this, result);
  }

  return result;
}

void *PSSequenceBehavior::findEmitter(PSSequenceBehavior *this, OZSceneNode *lpsrc)
{
  if (lpsrc)
  {
    if (v4)
    {
      result = v4[2054];
    }

    else
    {
    }
  }

  else
  {
    result = 0;
  }

  *(this + 43) = result;
  return result;
}

uint64_t PSSequenceBehavior::willRemove(uint64_t this)
{
  *(this + 344) = 0;
  *(this + 328) = 0;
  return this;
}

BOOL PSSequenceBehavior::canAddToSceneNode(PSSequenceBehavior *this, OZSceneNode *lpsrc)
{
  if (!lpsrc)
  {
    return 0;
  }

  {
    return 1;
  }
}

OZChannelBase *PSSequenceBehavior::updateHiddenFlags(uint64_t a1)
{
  if (OZChannel::getValueAsInt((a1 + 4384), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    OZChannelBase::resetFlag((a1 + 4640), 4194306, 1);
  }

  else
  {
    OZChannelBase::setFlag((a1 + 4640), 4194306, 1);
  }

  ValueAsInt = OZChannel::getValueAsInt((a1 + 4896), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt == 2)
  {
    OZChannelBase::resetFlag((a1 + 5152), 4194306, 1);
    OZChannelBase::resetFlag((a1 + 5304), 4194306, 1);
  }

  else
  {
    v3 = ValueAsInt;
    OZChannelBase::setFlag((a1 + 5152), 4194306, 1);
    OZChannelBase::setFlag((a1 + 5304), 4194306, 1);
    if (v3 == 1)
    {
      OZChannelBase::setFlag((a1 + 5456), 4227072, 1);
      goto LABEL_9;
    }
  }

  OZChannelBase::resetFlag((a1 + 5456), 4227072, 1);
LABEL_9:
  if (OZChannel::getValueAsInt((a1 + 5864), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    OZChannelBase::resetFlag((a1 + 6120), 4194306, 1);

    return OZChannelBase::setFlag((a1 + 6272), 0x400000, 1);
  }

  else
  {
    OZChannelBase::setFlag((a1 + 6120), 4194306, 1);

    return OZChannelBase::resetFlag((a1 + 6272), 4227072, 1);
  }
}

uint64_t PSSequenceBehavior::parseBegin(PSSequenceBehavior *this, PCSerializerReadStream *a2)
{
  if (*(a2 + 26) <= 4u)
  {
    OZChannel::setValue((this + 6680), MEMORY[0x277CC08F0], 0.0, 0);
  }

  return OZBehavior::parseBegin(this, a2);
}

uint64_t PSSequenceBehavior::parseEnd(PSSequenceBehavior *this, PCSerializerReadStream *a2)
{
  *(this + 3552) = (*(this + 396) & 2) == 0;
  OZChannelFolder::resetFoldFlag((this + 4000), 0x20000);
  if (!OZChannel::getValueAsInt((this + 4128), MEMORY[0x277CC08F0], 0.0))
  {
    OZChannel::setValue((this + 4384), MEMORY[0x277CC08F0], 4.0, 0);
    OZChannelBase::resetFlag((this + 4384), 4194306, 0);
    OZChannelBase::saveStateAsDefault((this + 4384));
    OZChannelBase::setFlag((this + 4128), 2, 0);
    OZChannelBase::saveStateAsDefault((this + 4128));
  }

  if (*(a2 + 26) <= 2u)
  {
    OZChannelBase::operator=(this + 792, this + 6832);
    if (!OZChannelBase::testFlag(this + 61, 2))
    {
      OZChannelBase::resetFlag((this + 352), 2, 0);
      OZChannelFolder::saveStateAsDefault((this + 352));
      OZChannelBase::setFlag(this + 61, 2, 0);
      OZChannelBase::saveStateAsDefault(this + 61);
    }
  }

  return OZBehavior::parseEnd(this, a2);
}

uint64_t PSSequenceBehavior::getNumObjects(PSSequenceBehavior *this, const CMTime *a2)
{
  v3 = *(this + 43);
  result = OZChannel::getValueAsInt((this + 4896), MEMORY[0x277CC08F0], 0.0);
  if (result != 1)
  {

    return PSEmitter::getOrderLength(v3, a2);
  }

  return result;
}

void PSSequenceBehavior::getInfluence(PSSequenceBehavior *this, const CMTime *a2, double a3)
{
  v22[0] = *a2;
  if ((*(*this + 296))(this, v22, 0, 1, 1) && OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0) != 4)
  {
    (*(*this + 608))(v22, this, 1.0);
    memset(&v21, 0, sizeof(v21));
    v20 = v22[0];
    OZBehavior::getFrameDuration(this, &v17);
    time1 = v22[0];
    time2 = v22[1];
    PC_CMTimeSaferAdd(&time1, &time2, &v23);
    time1 = v23;
    *&time2.value = v17;
    time2.epoch = v18;
    PC_CMTimeSaferSubtract(&time1, &time2, &v19);
    time1 = *a2;
    time2 = v20;
    if (CMTimeCompare(&time1, &time2) < 0)
    {
      v6 = &v20;
    }

    else
    {
      time1 = *a2;
      time2 = v19;
      v6 = CMTimeCompare(&time1, &time2) <= 0 ? a2 : &v19;
    }

    v21 = *v6;
    v7 = (*(*this + 688))(this, &v21, a3);
    time1.value = 0;
    LOBYTE(time2.value) = 0;
    (*(*this + 680))(this, &v21, &time1, &time2);
    v8 = *&time1.value;
    v9 = v8 + PSSequenceBehavior::getStart(this, &v21);
    v10 = *&time1.value;
    v11 = v10 + (*(*this + 672))(this, &v21);
    if (v9 <= v11)
    {
      ValueAsInt = OZChannel::getValueAsInt((this + 4384), &v21, 0.0);
      v13 = (*(*this + 664))(this, &v21);
      if (v13)
      {
        v14 = v13;
      }

      else
      {
        v14 = 1.0;
      }

      OZChannel::getValueAsDouble((this + 5456), &v21, 0.0);
      if (ValueAsInt >= 2)
      {
        v16 = v15 / v14;
      }

      else
      {
        v16 = 0.0;
      }

      trapezoid(v7, v9, v11, v15 / v14, v16, time2.value);
    }
  }
}

double PSSequenceBehavior::getStart(PSSequenceBehavior *this, const CMTime *a2)
{
  if (OZChannel::getValueAsInt((this + 4896), a2, 0.0) != 2)
  {
    return 0.0;
  }

  OZChannel::getValueAsDouble((this + 5152), a2, 0.0);
  return result;
}

double trapezoid(double a1, double a2, double a3, double a4, double a5, unsigned __int8 a6)
{
  v6 = a2 - a4;
  v7 = 0.0;
  if (a2 - a4 <= a1)
  {
    v8 = a3 + a5;
    while (1)
    {
      if (a1 < a2)
      {
        return (a1 - v6) / (a2 - v6) + 0.0;
      }

      if (a1 <= a3)
      {
        break;
      }

      if (v8 >= a1)
      {
        v7 = 1.0 - (a1 - a3) / (v8 - a3);
        if (a6)
        {
          trapezoid(a1 + -1.0, a2, a3, a4, a5, 0);
          if (v7 < v12)
          {
            return v12;
          }
        }

        return v7;
      }

      v9 = v6 + 1.0 < a1;
      a1 = a1 + -1.0;
      if (v6 > a1)
      {
        v9 = 0;
      }

      v10 = v9 & a6;
      a6 = 0;
      if ((v10 & 1) == 0)
      {
        return v7;
      }
    }

    v7 = 1.0;
    if (((a5 == 0.0) & a6) != 0)
    {
      trapezoid(a1 + -1.0, a2, a3, a4, a5, 0);
      if (v11 <= 0.0)
      {
        return 1.0;
      }

      else
      {
        return v11;
      }
    }
  }

  return v7;
}

void PSSequenceBehavior::getValuesWithInfluence(PSSequenceBehavior *this, CMTime *a2, double a3, PSSequencedValues *a4)
{
  PSSequenceBehavior::getInfluence(this, a2, a3);
  v51 = v8;
  if ((*(this + 408) & 2) == 0)
  {
    v9 = v8;
    if (OZChannelRotation3D::isQuaternionMode((this + 352)))
    {
      *&v44.var0.var0 = 0x3FF0000000000000;
      memset(v44.var0.var1, 0, 24);
      v48 = 0x3FF0000000000000uLL;
      v49 = 0;
      v50 = 0;
      OZChannelRotation3D::getValueAsQuatd(this + 352, v48.f64, a2, 0.0);
      slerp<double>(&v44, &v48, &v51, &v45);
      if (&v45 != a4)
      {
        *a4 = v45;
        *(a4 + 8) = v46;
        *(a4 + 3) = v47;
      }
    }

    else
    {
      OZChannel::getValueAsDouble((this + 488), a2, 0.0);
      v11 = v9 * v10;
      OZChannel::getValueAsDouble((this + 640), a2, 0.0);
      v13 = v9 * v12;
      OZChannel::getValueAsDouble((this + 792), a2, 0.0);
      v42 = v9 * v14;
      v15 = __sincos_stret(v11 * 0.5);
      v16 = v15.__sinval * 0.0;
      v17 = __sincos_stret(v13 * 0.5);
      v18 = v17.__sinval * 0.0;
      v19 = __sincos_stret(v42 * 0.5);
      v20 = v15.__cosval * v17.__cosval - (v16 * v18 + v16 * v17.__sinval + v15.__sinval * v18);
      v21 = v15.__sinval * v17.__cosval + v15.__cosval * v18 + v16 * v17.__sinval - v16 * v18;
      v22 = v16 * v17.__cosval + v15.__cosval * v17.__sinval + v15.__sinval * v18 - v16 * v18;
      v23 = v16 * v18 - v15.__sinval * v17.__sinval + v16 * v17.__cosval + v15.__cosval * v18;
      v24 = v19.__sinval * 0.0 * v21;
      v25 = v19.__sinval * 0.0 * v22;
      v26 = v19.__sinval * 0.0 * v20;
      v27 = v19.__sinval * 0.0 * v23;
      *(a4 + 2) = v27 - v19.__sinval * v21 + v19.__cosval * v22 + v26;
      *(a4 + 3) = v24 - v25 + v19.__cosval * v23 + v19.__sinval * v20;
      *a4 = v19.__cosval * v20 - (v19.__sinval * v23 + v24 + v25);
      *(a4 + 1) = v19.__sinval * v22 - v27 + v19.__cosval * v21 + v26;
    }
  }

  if ((*(this + 1264) & 2) == 0)
  {
    PCColor::PCColor(&v44);
    OZChannelColorNoAlpha::getColor((this + 1208), a2, &v44, a3);
    v28 = v51;
    PCColor::mix((a4 + 32), &v44, v28);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v44.var1._obj);
  }

  if ((*(this + 2272) & 2) == 0)
  {
    v29 = v51;
    v30 = *(a4 + 11);
    OZChannel::getValueAsDouble((this + 2216), a2, a3);
    *(a4 + 11) = v30 + v29 * (v31 - v30);
  }

  if ((*(this + 2424) & 2) == 0 || (*(this + 3016) & 2) == 0)
  {
    *&v44.var0.var0 = 0;
    v48.f64[0] = 0.0;
    v45 = 0.0;
    OZChannelScale3D::getValue((this + 2368), a2, &v44.var0.var0, v48.f64, &v45, a3);
    OZChannel::getValueAsDouble((this + 2960), a2, a3);
    v33.f64[0] = *&v44.var0.var0;
    v34 = v51;
    v35 = *(a4 + 14) + v51 * (v45 - *(a4 + 14));
    v33.f64[1] = v48.f64[0];
    *(a4 + 6) = vaddq_f64(*(a4 + 6), vmulq_n_f64(vsubq_f64(vmulq_n_f64(v33, v32), *(a4 + 6)), v51));
    *(a4 + 14) = v35;
    if ((*(this + 3016) & 2) == 0)
    {
      *(a4 + 18) = *(a4 + 18) + v34 * (v32 - *(a4 + 18));
    }
  }

  if ((*(this + 3168) & 2) == 0)
  {
    OZChannel::getValueAsDouble((this + 3248), a2, a3);
    v43 = v36;
    OZChannel::getValueAsDouble((this + 3400), a2, a3);
    v41 = v37;
    OZChannel::getValueAsDouble((this + 3848), a2, a3);
    v39 = v38 * v51;
    v40.f64[0] = v43;
    v40.f64[1] = v41;
    *(a4 + 120) = vaddq_f64(vmulq_n_f64(v40, v51), *(a4 + 120));
    *(a4 + 17) = v39 + *(a4 + 17);
  }
}

double PSSequenceBehavior::getCompletion(PSSequenceBehavior *this, const CMTime *a2, double a3)
{
  v6 = 0.0;
  if (OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    (*(*this + 608))(v23, this);
    v7 = (*(*this + 664))(this, a2);
    OZChannel::getValueAsDouble((this + 5456), a2, 0.0);
    v9 = v8;
    (*(*this + 608))(v22, this);
    v20 = 0uLL;
    epoch = 0;
    v19 = v22[0];
    OZBehavior::getFrameDuration(this, &v16);
    time1 = v22[0];
    time2 = v22[1];
    PC_CMTimeSaferAdd(&time1, &time2, &v24);
    time1 = v24;
    *&time2.value = v16;
    time2.epoch = v17;
    PC_CMTimeSaferSubtract(&time1, &time2, &v18);
    time1 = *a2;
    time2 = v19;
    if (CMTimeCompare(&time1, &time2) < 0)
    {
      v10 = &v19;
    }

    else
    {
      time1 = *a2;
      time2 = v18;
      v10 = CMTimeCompare(&time1, &time2) <= 0 ? a2 : &v18;
    }

    v20 = *&v10->value;
    epoch = v10->epoch;
    v11 = (*(*this + 688))(this, &v20, a3);
    time1.value = 0;
    LOBYTE(time2.value) = 0;
    (*(*this + 680))(this, &v20, &time1, &time2);
    v6 = 1.0;
    if (v11 > *&time1.value)
    {
      v12 = v9 / v7;
      if (v12 + *&time1.value >= v11)
      {
        v14 = v11 - *&time1.value;
        return 1.0 - v14 / v12;
      }

      if (!LOBYTE(time2.value))
      {
        return 0.0;
      }

      v13 = v11 + -1.0;
      if (v11 + -1.0 > *&time1.value)
      {
        v6 = 0.0;
        if (v12 + *&time1.value >= v13)
        {
          v14 = v13 - *&time1.value;
          return 1.0 - v14 / v12;
        }
      }
    }
  }

  return v6;
}

void PSSequenceBehavior::getValuesRemapTime(uint64_t a1, CMTime *a2, uint64_t a3, double a4)
{
  (*(*a1 + 608))(v23);
  v22 = v23[1];
  PSSequenceBehavior::getKeyframeExtent(a1, &time2, &time1);
  memset(&v21, 0, sizeof(v21));
  PC_CMTimeSaferSubtract(&time1, &time2, &v21);
  time1 = **&MEMORY[0x277CC08F0];
  time2 = v21;
  if (!CMTimeCompare(&time1, &time2))
  {
    v21 = v22;
  }

  Completion = PSSequenceBehavior::getCompletion(a1, a2, a4);
  memset(&v20, 0, sizeof(v20));
  operator*(&v21, &v19, Completion);
  time2 = v23[0];
  time1 = v19;
  PC_CMTimeSaferAdd(&time1, &time2, &v20);
  if ((*(a1 + 408) & 2) == 0)
  {
    OZChannelRotation3D::getValueAsQuatd(a1 + 352, a3, a2, 0.0);
  }

  if ((*(a1 + 1264) & 2) == 0)
  {
    OZChannelColorNoAlpha::getColor((a1 + 1208), &v20, (a3 + 32), a4);
    PCColor::setAlpha((a3 + 32), 1.0);
  }

  if ((*(a1 + 2272) & 2) == 0)
  {
    OZChannel::getValueAsDouble((a1 + 2216), &v20, a4);
    *(a3 + 88) = v9 * *(a3 + 88);
  }

  if ((*(a1 + 2424) & 2) == 0 || (*(a1 + 3016) & 2) == 0)
  {
    time1.value = 0;
    time2.value = 0;
    v19.value = 0;
    OZChannelScale3D::getValue((a1 + 2368), &v20, &time1.value, &time2.value, &v19.value, a4);
    OZChannel::getValueAsDouble((a1 + 2960), &v20, a4);
    *&v10.f64[0] = time1.value;
    v11 = *(a3 + 112) * *&v19.value;
    *&v10.f64[1] = time2.value;
    *(a3 + 96) = vmulq_n_f64(vmulq_n_f64(v10, v12), *(a3 + 104));
    *(a3 + 112) = v11;
  }

  if ((*(a1 + 3168) & 2) == 0)
  {
    OZChannel::getValueAsDouble((a1 + 3248), &v20, a4);
    v18 = v13;
    OZChannel::getValueAsDouble((a1 + 3400), &v20, a4);
    v17 = v14;
    OZChannel::getValueAsDouble((a1 + 3848), &v20, a4);
    v15.f64[0] = v18;
    v15.f64[1] = v17;
    *(a3 + 120) = vaddq_f64(v15, *(a3 + 120));
    *(a3 + 136) = v16 + *(a3 + 136);
  }
}

void PSSequenceBehavior::getKeyframeExtent(PSSequenceBehavior *this, CMTime *a2, CMTime *a3)
{
  v40 = 0;
  v41 = 0;
  v42 = 0;
  time1.value = this + 352;
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v40, &time1);
  time1.value = this + 1208;
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v40, &time1);
  time1.value = this + 2216;
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v40, &time1);
  time1.value = this + 2368;
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v40, &time1);
  time1.value = this + 2960;
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v40, &time1);
  time1.value = this + 3112;
  std::vector<TXTabStop *>::push_back[abi:ne200100](&v40, &time1);
  v6 = v40;
  v32 = v41;
  if (v41 == v40)
  {
    v24 = MEMORY[0x277CC08F0];
    v25 = *MEMORY[0x277CC08F0];
    a2->epoch = *(MEMORY[0x277CC08F0] + 16);
    *&a2->value = v25;
    v26 = *v24;
    a3->epoch = *(v24 + 2);
    *&a3->value = v26;
    if (v6)
    {
LABEL_39:
      v41 = v6;
      operator delete(v6);
    }
  }

  else
  {
    v30 = a2;
    v31 = a3;
    v7 = 0;
    v39 = **&MEMORY[0x277CC08F0];
    v38 = v39;
    do
    {
      v8 = *v6;
      if ((*(*v6 + 56) & 0x1000) != 0)
      {
        v33 = 0;
        v34 = 0;
        v35 = 0;
        OZChannelFolder::getAllDescendantsFlattened(v15, &v33, 0, 0);
        v17 = v33;
        v16 = v34;
        if (v33 != v34)
        {
          do
          {
            if (*v17)
            {
            }

            else
            {
              v18 = 0;
            }

            if ((*(v18->var0 + 69))(v18, 0))
            {
              OZChannel::getKeyframeMinTime(v18, &time1);
              v37 = time1;
              OZChannel::getKeyframeMaxTime(v18, &time1);
              v36 = time1;
              if (v7)
              {
                time1 = v39;
                time2 = v37;
                v19 = CMTimeCompare(&time1, &time2);
                v20 = &v39;
                if (v19 > 0)
                {
                  v20 = &v37;
                }

                v21 = *&v20->value;
                v39.epoch = v20->epoch;
                *&v39.value = v21;
                time1 = v38;
                time2 = v36;
                if (CMTimeCompare(&time1, &time2) >= 0)
                {
                  v22 = &v38;
                }

                else
                {
                  v22 = &v36;
                }

                v23 = *&v22->value;
                v38.epoch = v22->epoch;
                *&v38.value = v23;
              }

              else
              {
                v39 = v37;
                v38 = v36;
              }

              v7 = 1;
            }

            ++v17;
          }

          while (v17 != v16);
          v17 = v33;
        }

        if (v17)
        {
          v34 = v17;
          operator delete(v17);
        }
      }

      else
      {
        if ((*(v9->var0 + 69))())
        {
          OZChannel::getKeyframeMinTime(v9, &time1);
          v37 = time1;
          OZChannel::getKeyframeMaxTime(v9, &time1);
          v36 = time1;
          if (v7)
          {
            time1 = v39;
            time2 = v37;
            v10 = CMTimeCompare(&time1, &time2);
            v11 = &v39;
            if (v10 > 0)
            {
              v11 = &v37;
            }

            v12 = *&v11->value;
            v39.epoch = v11->epoch;
            *&v39.value = v12;
            time1 = v38;
            time2 = v36;
            if (CMTimeCompare(&time1, &time2) >= 0)
            {
              v13 = &v38;
            }

            else
            {
              v13 = &v36;
            }

            v14 = *&v13->value;
            v38.epoch = v13->epoch;
            *&v38.value = v14;
          }

          else
          {
            v39 = v37;
            v38 = v36;
          }

          v7 = 1;
        }
      }

      v6 += 8;
    }

    while (v6 != v32);
    if (v7)
    {
      *v30 = v39;
      *v31 = v38;
    }

    else
    {
      v27 = MEMORY[0x277CC08F0];
      v28 = *MEMORY[0x277CC08F0];
      v30->epoch = *(MEMORY[0x277CC08F0] + 16);
      *&v30->value = v28;
      v29 = *v27;
      v31->epoch = *(v27 + 2);
      *&v31->value = v29;
    }

    v6 = v40;
    if (v40)
    {
      goto LABEL_39;
    }
  }
}

void sub_2602CC4A8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, void *__p, uint64_t a31)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void PSSequenceBehavior::getValues(PSSequenceBehavior *this, CMTime *a2, double a3, PSSequencedValues *a4)
{
  v8 = *a2;
  if ((*(*this + 296))(this, &v8, 0, 1, 1))
  {
    if (OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0) == 4)
    {
      PSSequenceBehavior::getValuesRemapTime(this, a2, a4, a3);
    }

    else
    {
      PSSequenceBehavior::getValuesWithInfluence(this, a2, a3, a4);
    }
  }
}

void PSSequenceBehavior::arAddChannel(PSSequenceBehavior *this, OZChannelBase *a2)
{
  OZChannelBase::resetFlag(a2, 2, 0);
  var6 = a2->var6;
  if (var6)
  {
    OZChannelBase::resetFlag(var6, 2, 0);
  }

  if (v4)
  {
    LOBYTE(v4[3].var13) = 1;
    ObjectManipulator = OZChannelBase::getObjectManipulator(v4);
    if (ObjectManipulator)
    {
      v6 = (*(*ObjectManipulator + 264))(ObjectManipulator);
      if (v6)
      {
        v7 = *(v6 + 1584);

        OZDocument::postNotification(v7, 32);
      }
    }
  }
}

void PSSequenceBehavior::arRemoveChannel(PSSequenceBehavior *this, OZChannelBase *a2)
{
  OZChannelBase::setFlag(a2, 2, 0);
  if (a2)
  {
    if (v3)
    {
      LOBYTE(v3[3].var13) = 0;
      ObjectManipulator = OZChannelBase::getObjectManipulator(v3);
      if (ObjectManipulator)
      {
        v5 = (*(*ObjectManipulator + 264))(ObjectManipulator);
        if (v5)
        {
          v6 = *(v5 + 1584);

          OZDocument::postNotification(v6, 32);
        }
      }
    }
  }
}

void PSSequenceBehavior::arGetChannelList(uint64_t a1, uint64_t a2)
{
  v4 = a1 + 352;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 1208;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 2216;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 2368;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 3112;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
}

uint64_t PSSequenceBehavior::arGetObjectManipulator(PSSequenceBehavior *this)
{
  v1 = (*(*this + 312))(this);

  return OZChannelBase::getObjectManipulator(v1);
}

uint64_t non-virtual thunk toPSSequenceBehavior::arGetObjectManipulator(PSSequenceBehavior *this)
{
  v1 = (*(*(this - 42) + 312))(this - 336);

  return OZChannelBase::getObjectManipulator(v1);
}

uint64_t PSSequenceBehavior::getOffsetAndDoWrap(PSSequenceBehavior *this, const CMTime *a2, double *a3, BOOL *a4)
{
  ValueAsInt = OZChannel::getValueAsInt((this + 5864), a2, 0.0);
  v9 = OZChannel::getValueAsInt((this + 4384), a2, 0.0);
  *a4 = 0;
  if (ValueAsInt > 6 || ValueAsInt == 4)
  {
    v46 = 1.0 / (*(*this + 664))(this, a2);
    OZChannel::getValueAsDouble((this + 5456), a2, 0.0);
    v48 = v47 * v46 + 1.0;
    OZChannel::getValueAsDouble((this + 6120), a2, 0.0);
    v50 = v49;
    result = OZChannel::getValueAsInt((this + 5608), a2, 0.0);
    v51 = 1.0 - v50;
    if (result != 1)
    {
      v51 = v50;
    }

    v52 = v48 * v51 + 0.0;
    goto LABEL_68;
  }

  v11 = v9;
  (*(*this + 608))(&v65, this);
  v64 = v66;
  time1 = v66;
  time2 = **&MEMORY[0x277CC08F0];
  result = CMTimeCompare(&time1, &time2);
  if (result <= 0)
  {
    *a3 = 0.0;
    return result;
  }

  v13 = v11 & 0xFFFFFFFE;
  v14 = (*(*this + 664))(this, a2);
  OZChannel::getValueAsDouble((this + 5456), a2, 0.0);
  v16 = v15;
  OZChannel::getValueAsDouble((this + 6272), a2, 0.0);
  v18 = v17;
  v19 = OZChannel::getValueAsInt((this + 6424), a2, 0.0);
  v62 = 0uLL;
  v63 = 0;
  v20 = (*(*this + 336))(this);
  OZSceneSettings::getFrameDuration((v20 + 336), &v62);
  time2 = v65;
  time1 = *a2;
  PC_CMTimeSaferSubtract(&time1, &time2, &v61);
  time1 = v64;
  *&time2.value = v62;
  time2.epoch = v63;
  PC_CMTimeSaferSubtract(&time1, &time2, v60);
  operator/(&v61, v60, &time1);
  Seconds = CMTimeGetSeconds(&time1);
  if (OZChannel::getValueAsInt((this + 5608), a2, 0.0) == 1)
  {
    Seconds = 1.0 - Seconds;
  }

  if (v19 == 1)
  {
    v22 = OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0);
    v23 = v14;
    v24 = v18 * v14;
    if (v22 == 4)
    {
      v25 = v16 + v24;
    }

    else if (v13 == 2)
    {
      v25 = v16 + v16 + v24;
    }

    else
    {
      v25 = v16 + v24 + -1.0;
    }
  }

  else
  {
    v23 = v14;
    v25 = v18 * v14;
  }

  v26 = (Seconds * v25 + 0.0) / v23;
  time1.value = 0;
  modf(v26 + -0.000001, &time1.value);
  if (*&time1.value <= v18 + -1.0)
  {
    v27 = *&time1.value;
  }

  else
  {
    v27 = v18 + -1.0;
  }

  v29 = v27 > 0.0 && v19 == 1;
  *a4 = v29;
  v30 = 1.0 / v23;
  v31 = OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0);
  v32 = v30 * 0.5;
  v33 = v30 * -0.5;
  v34 = v16 * v30;
  v35 = v33 - v34;
  if (v13 != 2)
  {
    v35 = v32;
  }

  if (v31 == 4)
  {
    v36 = v32 - v34;
  }

  else
  {
    v36 = v35;
  }

  v37 = OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0);
  v38 = v34 + 1.0 + v33;
  if (v37 == 4)
  {
    v38 = v33 + 1.0;
  }

  v39 = v32 + 1.0;
  if (v13 == 2)
  {
    v39 = 1.0 - v32 - v34;
  }

  if (v37 == 4)
  {
    v39 = 1.0 - v32;
  }

  if (v19 == 1)
  {
    v40 = v39;
  }

  else
  {
    v40 = v38;
  }

  v41 = v26 - v27;
  v42 = v40 - v36;
  v43 = v36 + v41 * (v40 - v36);
  *&time1.value = v43;
  if (ValueAsInt > 2)
  {
    if (ValueAsInt != 3)
    {
      if (ValueAsInt == 5)
      {
        if (v42 <= 0.0)
        {
          goto LABEL_64;
        }

        v44 = (v43 - v36) / v42 * ((v43 - v36) / v42);
      }

      else
      {
        if (ValueAsInt != 6 || v42 <= 0.0)
        {
          goto LABEL_64;
        }

        v44 = 1.0 - (1.0 - (v43 - v36) / v42) * (1.0 - (v43 - v36) / v42);
      }

      goto LABEL_63;
    }

    v53 = OZChannel::getValueAsInt((this + 6680), MEMORY[0x277CC08F0], 0.0);
    v55 = *&time1.value;
    if (v53)
    {
      v56 = 0.5;
      v57 = 0.5;
LABEL_57:
      PCMath::easeInOut(&time1.value, v55, v56, v57, v36, v40, 0, v54);
      goto LABEL_64;
    }

    v59 = sin((*&time1.value - v36) * 3.14159265 / v42 + -1.57079633) * 0.5 + 0.5;
    goto LABEL_61;
  }

  if (ValueAsInt == 1)
  {
    v58 = OZChannel::getValueAsInt((this + 6680), MEMORY[0x277CC08F0], 0.0);
    v55 = *&time1.value;
    if (v58)
    {
      v56 = 1.0;
      v57 = 0.0;
      goto LABEL_57;
    }

    v59 = 1.0 - cos((*&time1.value - v36) * 3.14159265 / v42 * 0.5);
LABEL_61:
    *&time1.value = v36 + v42 * v59;
    goto LABEL_64;
  }

  if (ValueAsInt != 2)
  {
    goto LABEL_64;
  }

  if (OZChannel::getValueAsInt((this + 6680), MEMORY[0x277CC08F0], 0.0))
  {
    PCMath::easeInOut(&time1.value, *&time1.value, 0.0, 1.0, v36, v40, 0, v45);
    goto LABEL_64;
  }

  v44 = sin((*&time1.value - v36) * 3.14159265 / v42 * 0.5);
LABEL_63:
  *&time1.value = v36 + v42 * v44;
LABEL_64:
  result = OZChannel::getValueAsInt((this + 6424), a2, 0.0);
  if (result == 2)
  {
    v52 = *&time1.value;
    if ((v27 & 0x80000001) == 1)
    {
      v52 = v40 + v36 - *&time1.value;
    }
  }

  else
  {
    v52 = *&time1.value;
  }

LABEL_68:
  *a3 = v52;
  return result;
}

double PSSequenceBehavior::getEnd(PSSequenceBehavior *this, const CMTime *a2)
{
  ValueAsInt = OZChannel::getValueAsInt((this + 4384), a2, 0.0);
  if (OZChannel::getValueAsInt((this + 4896), a2, 0.0) == 2)
  {

    OZChannel::getValueAsDouble((this + 5304), a2, 0.0);
  }

  else
  {
    result = 1.0;
    if ((ValueAsInt & 0xFFFFFFFE) == 2)
    {
      return 1.0 / (*(*this + 664))(this, a2, 1.0);
    }
  }

  return result;
}

void PSPaintSequenceBehavior::PSPaintSequenceBehavior(PSPaintSequenceBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  v8 = *MEMORY[0x277D85DE8];
  PSSequenceBehavior::PSSequenceBehavior(this, a2, a3, a4);
  *v5 = &unk_2872D6928;
  v5[2] = &unk_2872D6BF8;
  v5[6] = &unk_2872D6E50;
  v5[42] = &unk_2872D6EA8;
  *v7 = xmmword_2608579F4;
  *&v7[12] = *(&xmmword_2608579F4 + 12);
  OZChannelEnum::setTags((v5 + 733), v7, 7);
  PCURL::PCURL(&v6, @"Particle Paint Sequence Behavior Units Enum");
  OZChannelEnum::setStrings(this + 612, &v6, 1);
  PCString::~PCString(&v6);
  OZChannelBase::setFlag((this + 4640), 4194306, 0);
  OZChannelBase::saveStateAsDefault((this + 4640));
  OZChannel::setScale((this + 5456), 100.0);
  OZChannel::setSuffix((this + 5456), "%");
  OZChannel::setMin((this + 5456), 0.0);
  OZChannel::setSliderMin((this + 5456), 0.0);
  OZChannel::setSliderMax((this + 5456), 1.0);
  OZChannel::setCoarseDelta((this + 5456), *(*(this + 698) + 32) / 100.0);
  OZChannel::setFineDelta((this + 5456), *(*(this + 698) + 24) / 100.0);
}

void sub_2602CD31C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  PSSequenceBehavior::~PSSequenceBehavior(v10);
  _Unwind_Resume(a1);
}

void PSPaintSequenceBehavior::PSPaintSequenceBehavior(PSPaintSequenceBehavior *this, const PSPaintSequenceBehavior *a2, char a3)
{
  PSSequenceBehavior::PSSequenceBehavior(this, a2, a3);
  *v3 = &unk_2872D6928;
  v3[2] = &unk_2872D6BF8;
  v3[6] = &unk_2872D6E50;
  v3[42] = &unk_2872D6EA8;
}

OZChannelBase *PSPaintSequenceBehavior::updateHiddenFlags(uint64_t a1)
{
  OZChannelBase::setFlag((a1 + 5152), 4194306, 1);
  ValueAsInt = OZChannel::getValueAsInt((a1 + 4896), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt == 2)
  {
    OZChannelBase::resetFlag((a1 + 5152), 4194306, 1);
    OZChannelBase::resetFlag((a1 + 5304), 4194306, 1);
  }

  else
  {
    v3 = ValueAsInt;
    OZChannelBase::setFlag((a1 + 5152), 4194306, 1);
    OZChannelBase::setFlag((a1 + 5304), 4194306, 1);
    if (v3 == 1)
    {
      OZChannelBase::setFlag((a1 + 5456), 4227072, 1);
      goto LABEL_6;
    }
  }

  OZChannelBase::resetFlag((a1 + 5456), 4227072, 1);
LABEL_6:
  if (OZChannel::getValueAsInt((a1 + 5864), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    OZChannelBase::resetFlag((a1 + 6120), 4194306, 1);

    return OZChannelBase::setFlag((a1 + 6272), 0x400000, 1);
  }

  else
  {
    OZChannelBase::setFlag((a1 + 6120), 4194306, 1);

    return OZChannelBase::resetFlag((a1 + 6272), 4227072, 1);
  }
}

CGColorSpace **PSPaintSequenceBehavior::getWidthSamples(CGColorSpace **this, CMTime *a2, int a3, double *a4)
{
  if (a3)
  {
    v7 = this;
    PSSequencedValues::PSSequencedValues(v9);
    if (a3 == 1)
    {
      PSSequenceBehavior::getValues(v7, a2, 0.5, v9);
      *a4 = v11;
    }

    else
    {
      v8 = 0;
      do
      {
        v11 = 1.0;
        PSSequenceBehavior::getValues(v7, a2, 1.0 / (a3 - 1) * v8, v9);
        a4[v8++] = v11;
      }

      while (a3 != v8);
    }

    return PCCFRef<CGColorSpace *>::~PCCFRef(&v10);
  }

  return this;
}

void sub_2602CD658(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, ...)
{
  va_start(va, a12);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void PSPaintSequenceBehavior::arGetChannelList(uint64_t a1, uint64_t a2)
{
  v4 = a1 + 352;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 1208;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 2216;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 2368;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 2960;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
  v4 = a1 + 3112;
  std::vector<TXTabStop *>::push_back[abi:ne200100](a2, &v4);
}

uint64_t PSPaintSequenceBehavior::getOffsetAndDoWrap(PSPaintSequenceBehavior *this, const CMTime *a2, double *a3, BOOL *a4)
{
  ValueAsInt = OZChannel::getValueAsInt((this + 5864), a2, 0.0);
  v9 = OZChannel::getValueAsInt((this + 4384), a2, 0.0);
  *a4 = 0;
  if (ValueAsInt > 6 || ValueAsInt == 4)
  {
    OZChannel::getValueAsDouble((this + 5456), a2, 0.0);
    v41 = v40 + 1.0;
    OZChannel::getValueAsDouble((this + 6120), a2, 0.0);
    v43 = v42;
    result = OZChannel::getValueAsInt((this + 5608), a2, 0.0);
    v44 = 1.0 - v43;
    if (result != 1)
    {
      v44 = v43;
    }

    v36 = v41 * v44 + 0.0;
    goto LABEL_58;
  }

  v11 = v9;
  (*(*this + 608))(&v50, this);
  v49 = v51;
  time1 = v51;
  time2 = **&MEMORY[0x277CC08F0];
  result = CMTimeCompare(&time1, &time2);
  if (result <= 0)
  {
    *a3 = 0.0;
    return result;
  }

  v13 = v11 & 0xFFFFFFFE;
  OZChannel::getValueAsDouble((this + 5456), a2, 0.0);
  v15 = v14;
  OZChannel::getValueAsDouble((this + 6272), a2, 0.0);
  v17 = v16;
  v18 = OZChannel::getValueAsInt((this + 6424), a2, 0.0);
  v47 = 0uLL;
  v48 = 0;
  v19 = (*(*this + 336))(this);
  OZSceneSettings::getFrameDuration((v19 + 336), &v47);
  time2 = v50;
  time1 = *a2;
  PC_CMTimeSaferSubtract(&time1, &time2, &v46);
  time1 = v49;
  *&time2.value = v47;
  time2.epoch = v48;
  PC_CMTimeSaferSubtract(&time1, &time2, v45);
  operator/(&v46, v45, &time1);
  Seconds = CMTimeGetSeconds(&time1);
  if (OZChannel::getValueAsInt((this + 5608), a2, 0.0) == 1)
  {
    Seconds = 1.0 - Seconds;
  }

  v21 = v17;
  if (v18 == 1)
  {
    v22 = OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0);
    v21 = v15 + v17;
    v23 = v15 + v17 + -1.0;
    if (v13 == 2)
    {
      v23 = v17 + v15 + v15;
    }

    if (v22 != 4)
    {
      v21 = v23;
    }
  }

  v24 = Seconds * v21 + 0.0;
  time1.value = 0;
  modf(v24 + -0.000001, &time1.value);
  if (*&time1.value <= v17 + -1.0)
  {
    v25 = *&time1.value;
  }

  else
  {
    v25 = v17 + -1.0;
  }

  v27 = v25 > 0.0 && v18 == 1;
  *a4 = v27;
  if (OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    v28 = -v15;
  }

  else
  {
    v28 = 0.0;
    if (v13 == 2)
    {
      v28 = -v15;
      if (OZChannel::getValueAsInt((this + 4896), a2, 0.0) == 2)
      {
        OZChannel::getValueAsDouble((this + 5304), a2, 0.0);
        v28 = v28 - v29;
      }
    }
  }

  v30 = OZChannel::getValueAsInt((this + 4384), MEMORY[0x277CC08F0], 0.0);
  v31 = 1.0;
  v32 = v15 + 1.0;
  if (v30 == 4)
  {
    v32 = 1.0;
  }

  v33 = 1.0 - v15;
  if (v13 != 2)
  {
    v33 = 1.0;
  }

  if (v30 != 4)
  {
    v31 = v33;
  }

  if (v18 == 1)
  {
    v34 = v31;
  }

  else
  {
    v34 = v32;
  }

  v35 = v34 - v28;
  v36 = v28 + (v24 - v25) * (v34 - v28);
  if (ValueAsInt <= 2)
  {
    if (ValueAsInt != 1)
    {
      if (ValueAsInt != 2)
      {
        goto LABEL_55;
      }

      v39 = sin((v36 - v28) * 3.14159265 / v35 * 0.5);
      goto LABEL_54;
    }

    v38 = cos((v36 - v28) * 3.14159265 / v35 * 0.5);
    v37 = 1.0;
    goto LABEL_53;
  }

  if (ValueAsInt == 3)
  {
    v39 = sin((v36 - v28) * 3.14159265 / v35 + -1.57079633) * 0.5 + 0.5;
LABEL_54:
    v36 = v28 + v35 * v39;
    goto LABEL_55;
  }

  if (ValueAsInt == 5)
  {
    if (v35 <= 0.0)
    {
      goto LABEL_55;
    }

    v39 = (v36 - v28) / v35 * ((v36 - v28) / v35);
    goto LABEL_54;
  }

  if (ValueAsInt == 6 && v35 > 0.0)
  {
    v37 = 1.0;
    v38 = (1.0 - (v36 - v28) / v35) * (1.0 - (v36 - v28) / v35);
LABEL_53:
    v39 = v37 - v38;
    goto LABEL_54;
  }

LABEL_55:
  result = OZChannel::getValueAsInt((this + 6424), a2, 0.0);
  if (result == 2 && (v25 & 0x80000001) == 1)
  {
    v36 = v34 + v28 - v36;
  }

LABEL_58:
  *a3 = v36;
  return result;
}

void PSPaintSequenceBehavior::getEnd(PSPaintSequenceBehavior *this, const CMTime *a2)
{
  OZChannel::getValueAsInt((this + 4384), a2, 0.0);
  if (OZChannel::getValueAsInt((this + 4896), a2, 0.0) == 2)
  {

    OZChannel::getValueAsDouble((this + 5304), a2, 0.0);
  }
}

void PSPaintSequenceBehavior::~PSPaintSequenceBehavior(PSPaintSequenceBehavior *this)
{
  PSSequenceBehavior::~PSSequenceBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toPSPaintSequenceBehavior::~PSPaintSequenceBehavior(PSPaintSequenceBehavior *this)
{
  PSSequenceBehavior::~PSSequenceBehavior((this - 16));
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 48));
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 336));
}

{
  PSSequenceBehavior::~PSSequenceBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

uint64_t PSEmitter_Factory::getInstance(PSEmitter_Factory *this)
{
  if (atomic_load_explicit(&PSEmitter_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSEmitter_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSEmitter_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSEmitter_Factory::_instance;
}

uint64_t PSParticleType_Factory::getInstance(PSParticleType_Factory *this)
{
  if (atomic_load_explicit(&PSParticleType_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSParticleType_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSParticleType_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSParticleType_Factory::_instance;
}

uint64_t PSReplicator_Factory::getInstance(PSReplicator_Factory *this)
{
  if (atomic_load_explicit(&PSReplicator_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSReplicator_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSReplicator_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSReplicator_Factory::_instance;
}

uint64_t PSReplicatorPType_Factory::getInstance(PSReplicatorPType_Factory *this)
{
  if (atomic_load_explicit(&PSReplicatorPType_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSReplicatorPType_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSReplicatorPType_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSReplicatorPType_Factory::_instance;
}

uint64_t PSPaint_Factory::getInstance(PSPaint_Factory *this)
{
  if (atomic_load_explicit(&PSPaint_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSPaint_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSPaint_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSPaint_Factory::_instance;
}

uint64_t PSPaintPType_Factory::getInstance(PSPaintPType_Factory *this)
{
  if (atomic_load_explicit(&PSPaintPType_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSPaintPType_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSPaintPType_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSPaintPType_Factory::_instance;
}

uint64_t PSEmitterMoToFoBehavior_Factory::getInstance(PSEmitterMoToFoBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSEmitterMoToFoBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSEmitterMoToFoBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSEmitterMoToFoBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSEmitterMoToFoBehavior_Factory::_instance;
}

uint64_t PSScaleOverLifeBehavior_Factory::getInstance(PSScaleOverLifeBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSScaleOverLifeBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSScaleOverLifeBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSScaleOverLifeBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSScaleOverLifeBehavior_Factory::_instance;
}

uint64_t PSSequenceBehavior_Factory::getInstance(PSSequenceBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSSequenceBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSSequenceBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSSequenceBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSSequenceBehavior_Factory::_instance;
}

uint64_t PSPaintSequenceBehavior_Factory::getInstance(PSPaintSequenceBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSPaintSequenceBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSPaintSequenceBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSPaintSequenceBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSPaintSequenceBehavior_Factory::_instance;
}

uint64_t PSSpinOverLifeBehavior_Factory::getInstance(PSSpinOverLifeBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSSpinOverLifeBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSSpinOverLifeBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSSpinOverLifeBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSSpinOverLifeBehavior_Factory::_instance;
}

uint64_t PSPenPropertyBehavior_Factory::getInstance(PSPenPropertyBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSPenPropertyBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSPenPropertyBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSPenPropertyBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSPenPropertyBehavior_Factory::_instance;
}

uint64_t PSPenPressureBehavior_Factory::getInstance(PSPenPressureBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSPenPressureBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSPenPressureBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSPenPressureBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSPenPressureBehavior_Factory::_instance;
}

uint64_t PSPenSpeedBehavior_Factory::getInstance(PSPenSpeedBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSPenSpeedBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSPenSpeedBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSPenSpeedBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSPenSpeedBehavior_Factory::_instance;
}

uint64_t PSPenTiltBehavior_Factory::getInstance(PSPenTiltBehavior_Factory *this)
{
  if (atomic_load_explicit(&PSPenTiltBehavior_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&PSPenTiltBehavior_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<PSPenTiltBehavior_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return PSPenTiltBehavior_Factory::_instance;
}

void sub_2602CE960(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, ...)
{
  va_start(va, a14);
  std::__hash_table<std::__hash_value_type<OZSceneNode *,std::__list_iterator<OZSceneNode *,void *>>,std::__unordered_map_hasher<OZSceneNode *,std::__hash_value_type<OZSceneNode *,std::__list_iterator<OZSceneNode *,void *>>,std::hash<OZSceneNode *>,std::equal_to<OZSceneNode *>,true>,std::__unordered_map_equal<OZSceneNode *,std::__hash_value_type<OZSceneNode *,std::__list_iterator<OZSceneNode *,void *>>,std::equal_to<OZSceneNode *>,std::hash<OZSceneNode *>,true>,std::allocator<std::__hash_value_type<OZSceneNode *,std::__list_iterator<OZSceneNode *,void *>>>>::~__hash_table(va);
  _Unwind_Resume(a1);
}

void PSEmitter_Factory::PSEmitter_Factory(PSEmitter_Factory *this)
{
  v3 = xmmword_260348380;
  v4 = xmmword_260853DB0;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 0);
  *v2 = &unk_2871F2A10;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872D6F20;
  *(this + 16) = &unk_2872D6FF0;
  *(this + 17) = 0;
}

void PSEmitter_Factory::~PSEmitter_Factory(PSEmitter_Factory *this)
{
  PSEmitter_Factory::~PSEmitter_Factory(this);

  JUMPOUT(0x2666E9F00);
}

{
  *this = &unk_2872D6F20;
  v2 = (this + 128);
  *(this + 16) = &unk_2872D6FF0;
  v3 = *(this + 17);
  if (v3)
  {
    (*(*v3 + 72))(v3);
  }

  *(this + 17) = 0;
  PCSingleton::~PCSingleton(v2);

  OZFactory::~OZFactory(this);
}

OZChannelBase *PSEmitter_Factory::create(PSEmitter_Factory *this, const PCString *a2, unsigned int NextUniqueID)
{
  if (!*(this + 17))
  {
    OZChannelBase::setRangeName(&v14, @"Motion Effect");
    operator new();
  }

  OZChannelBase::setRangeName(&v13, @"Motion Effect");
  v6 = *(this + 17);
  if (v6)
  {
    v7 = v6 + 200;
  }

  else
  {
    v7 = 0;
  }

  v8 = (*(*this + 24))(this, v7, 40);
  v9 = v8;
  if (!NextUniqueID)
  {
    NextUniqueID = OZChannelBase::getNextUniqueID(v8);
  }

  OZChannelBase::setID(&v9->var7, NextUniqueID);
  v10 = (*(v9->var0 + 80))(v9);
  OZChannelBase::setName(v10, a2, 0);
  (*(v9->var0 + 115))(v9);
  OZChannelBase::setRangeName(&v13, v11);
  return v9;
}

void sub_2602CECD0(_Unwind_Exception *a1, int a2, uint64_t a3, OZChannelBase *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, __int16 a11, char a12, char a13)
{
  MEMORY[0x2666E9F00](v13, 0x10F1C408C860A13, a3, a4);
  OZChannelBase::setRangeName(&a13, v15);
  _Unwind_Resume(a1);
}

void non-virtual thunk toPSEmitter_Factory::~PSEmitter_Factory(PSEmitter_Factory *this)
{
  PSEmitter_Factory::~PSEmitter_Factory((this - 128));
}

{
  PSEmitter_Factory::~PSEmitter_Factory((this - 128));

  JUMPOUT(0x2666E9F00);
}

void PSParticleType_Factory::PSParticleType_Factory(PSParticleType_Factory *this)
{
  v3 = xmmword_260850750;
  v4 = xmmword_260850EE0;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 0);
  *v2 = &unk_2871F2A10;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872D7048;
  *(this + 16) = &unk_2872D7118;
  *(this + 17) = 0;
}

void PSParticleType_Factory::~PSParticleType_Factory(PSParticleType_Factory *this)
{
  PSParticleType_Factory::~PSParticleType_Factory(this);

  JUMPOUT(0x2666E9F00);
}

{
  *this = &unk_2872D7048;
  v2 = (this + 128);
  *(this + 16) = &unk_2872D7118;
  v3 = *(this + 17);
  if (v3)
  {
    (*(*v3 + 8))(v3);
  }

  *(this + 17) = 0;
  PCSingleton::~PCSingleton(v2);

  OZFactory::~OZFactory(this);
}

OZChannelBase *PSParticleType_Factory::create(PSParticleType_Factory *this, const PCString *a2, unsigned int NextUniqueID)
{
  if (!*(this + 17))
  {
    OZChannelBase::setRangeName(&v12, @"Motion Effect");
    operator new();
  }

  OZChannelBase::setRangeName(&v11, @"Motion Effect");
  v6 = (*(*this + 24))(this, *(this + 17), 40);
  v7 = v6;
  if (!NextUniqueID)
  {
    NextUniqueID = OZChannelBase::getNextUniqueID(v6);
  }

  OZChannelBase::setID(&v7->var7, NextUniqueID);
  v8 = (*(v7->var0 + 80))(v7);
  OZChannelBase::setName(v8, a2, 0);
  (*(v7->var0 + 115))(v7);
  OZChannelBase::setRangeName(&v11, v9);
  return v7;
}

void sub_2602CF368(_Unwind_Exception *a1, int a2, uint64_t a3, OZChannelBase *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, __int16 a11, char a12, char a13)
{
  MEMORY[0x2666E9F00](v13, 0x10F1C409CD462B0, a3, a4);
  OZChannelBase::setRangeName(&a13, v15);
  _Unwind_Resume(a1);
}

void non-virtual thunk toPSParticleType_Factory::~PSParticleType_Factory(PSParticleType_Factory *this)
{
  PSParticleType_Factory::~PSParticleType_Factory((this - 128));
}

{
  PSParticleType_Factory::~PSParticleType_Factory((this - 128));

  JUMPOUT(0x2666E9F00);
}

void PSReplicator_Factory::PSReplicator_Factory(PSReplicator_Factory *this)
{
  v3 = xmmword_260853DB0;
  v4 = xmmword_260853DC0;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 0);
  *v2 = &unk_2871F2A10;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872D7170;
  *(this + 16) = &unk_2872D7240;
  *(this + 17) = 0;
}

void PSReplicator_Factory::~PSReplicator_Factory(PSReplicator_Factory *this)
{
  PSReplicator_Factory::~PSReplicator_Factory(this);

  JUMPOUT(0x2666E9F00);
}

{
  *this = &unk_2872D7170;
  v2 = (this + 128);
  *(this + 16) = &unk_2872D7240;
  v3 = *(this + 17);
  if (v3)
  {
    (*(*v3 + 72))(v3);
  }

  *(this + 17) = 0;
  PCSingleton::~PCSingleton(v2);

  OZFactory::~OZFactory(this);
}

OZChannelBase *PSReplicator_Factory::create(PSReplicator_Factory *this, const PCString *a2, unsigned int NextUniqueID)
{
  if (!*(this + 17))
  {
    OZChannelBase::setRangeName(&v14, @"Motion Effect");
    operator new();
  }

  OZChannelBase::setRangeName(&v13, @"Motion Effect");
  v6 = *(this + 17);
  if (v6)
  {
    v7 = v6 + 200;
  }

  else
  {
    v7 = 0;
  }

  v8 = (*(*this + 24))(this, v7, 40);
  v9 = v8;
  if (!NextUniqueID)
  {
    NextUniqueID = OZChannelBase::getNextUniqueID(v8);
  }

  OZChannelBase::setID(&v9->var7, NextUniqueID);
  v10 = (*(v9->var0 + 80))(v9);
  OZChannelBase::setName(v10, a2, 0);
  (*(v9->var0 + 115))(v9);
  OZChannelBase::setRangeName(&v13, v11);
  return v9;
}

void sub_2602CF9FC(_Unwind_Exception *a1, int a2, uint64_t a3, OZChannelBase *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, __int16 a11, char a12, char a13)
{
  MEMORY[0x2666E9F00](v13, 0x10F1C408C860A13, a3, a4);
  OZChannelBase::setRangeName(&a13, v15);
  _Unwind_Resume(a1);
}

void non-virtual thunk toPSReplicator_Factory::~PSReplicator_Factory(PSReplicator_Factory *this)
{
  PSReplicator_Factory::~PSReplicator_Factory((this - 128));
}

{
  PSReplicator_Factory::~PSReplicator_Factory((this - 128));

  JUMPOUT(0x2666E9F00);
}

void PSReplicatorPType_Factory::PSReplicatorPType_Factory(PSReplicatorPType_Factory *this)
{
  v3 = xmmword_260850EE0;
  v4 = xmmword_260857860;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 0);
  *v2 = &unk_2871F2A10;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872D7298;
  *(this + 16) = &unk_2872D7368;
  *(this + 17) = 0;
}

void PSReplicatorPType_Factory::~PSReplicatorPType_Factory(PSReplicatorPType_Factory *this)
{
  PSReplicatorPType_Factory::~PSReplicatorPType_Factory(this);

  JUMPOUT(0x2666E9F00);
}

{
  *this = &unk_2872D7298;
  v2 = (this + 128);
  *(this + 16) = &unk_2872D7368;
  v3 = *(this + 17);
  if (v3)
  {
    (*(*v3 + 8))(v3);
  }

  *(this + 17) = 0;
  PCSingleton::~PCSingleton(v2);

  OZFactory::~OZFactory(this);
}

OZChannelBase *PSReplicatorPType_Factory::create(PSReplicatorPType_Factory *this, const PCString *a2, unsigned int NextUniqueID)
{
  if (!*(this + 17))
  {
    OZChannelBase::setRangeName(&v12, @"Motion Effect");
    operator new();
  }

  OZChannelBase::setRangeName(&v11, @"Motion Effect");
  v6 = (*(*this + 24))(this, *(this + 17), 40);
  v7 = v6;
  if (!NextUniqueID)
  {
    NextUniqueID = OZChannelBase::getNextUniqueID(v6);
  }

  OZChannelBase::setID(&v7->var7, NextUniqueID);
  v8 = (*(v7->var0 + 80))(v7);
  OZChannelBase::setName(v8, a2, 0);
  (*(v7->var0 + 115))(v7);
  OZChannelBase::setRangeName(&v11, v9);
  return v7;
}

void sub_2602D0094(_Unwind_Exception *a1, int a2, uint64_t a3, OZChannelBase *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, __int16 a11, char a12, char a13)
{
  MEMORY[0x2666E9F00](v13, 0x10F1C4095359925, a3, a4);
  OZChannelBase::setRangeName(&a13, v15);
  _Unwind_Resume(a1);
}

void non-virtual thunk toPSReplicatorPType_Factory::~PSReplicatorPType_Factory(PSReplicatorPType_Factory *this)
{
  PSReplicatorPType_Factory::~PSReplicatorPType_Factory((this - 128));
}

{
  PSReplicatorPType_Factory::~PSReplicatorPType_Factory((this - 128));

  JUMPOUT(0x2666E9F00);
}

void PSPaint_Factory::PSPaint_Factory(PSPaint_Factory *this)
{
  v3 = xmmword_260853DC0;
  v4 = xmmword_26084FA50;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 0);
  *v2 = &unk_2871F2A10;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872D73C0;
  *(this + 16) = &unk_2872D7490;
  *(this + 17) = 0;
}

void PSPaint_Factory::~PSPaint_Factory(PSPaint_Factory *this)
{
  PSPaint_Factory::~PSPaint_Factory(this);

  JUMPOUT(0x2666E9F00);
}

{
  *this = &unk_2872D73C0;
  v2 = (this + 128);
  *(this + 16) = &unk_2872D7490;
  v3 = *(this + 17);
  if (v3)
  {
    (*(*v3 + 72))(v3);
  }

  *(this + 17) = 0;
  PCSingleton::~PCSingleton(v2);

  OZFactory::~OZFactory(this);
}

OZChannelBase *PSPaint_Factory::create(PSPaint_Factory *this, const PCString *a2, unsigned int NextUniqueID)
{
  if (!*(this + 17))
  {
    OZChannelBase::setRangeName(&v14, @"Motion Effect");
    operator new();
  }

  OZChannelBase::setRangeName(&v13, @"Motion Effect");
  v6 = *(this + 17);
  if (v6)
  {
    v7 = v6 + 200;
  }

  else
  {
    v7 = 0;
  }

  v8 = (*(*this + 24))(this, v7, 40);
  v9 = v8;
  if (!NextUniqueID)
  {
    NextUniqueID = OZChannelBase::getNextUniqueID(v8);
  }

  OZChannelBase::setID(&v9->var7, NextUniqueID);
  v10 = (*(v9->var0 + 80))(v9);
  OZChannelBase::setName(v10, a2, 0);
  (*(v9->var0 + 115))(v9);
  OZChannelBase::setRangeName(&v13, v11);
  return v9;
}

void sub_2602D0728(_Unwind_Exception *a1, int a2, uint64_t a3, OZChannelBase *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, __int16 a11, char a12, char a13)
{
  MEMORY[0x2666E9F00](v13, 0x10F1C40637A83DELL, a3, a4);
  OZChannelBase::setRangeName(&a13, v15);
  _Unwind_Resume(a1);
}

void non-virtual thunk toPSPaint_Factory::~PSPaint_Factory(PSPaint_Factory *this)
{
  PSPaint_Factory::~PSPaint_Factory((this - 128));
}

{
  PSPaint_Factory::~PSPaint_Factory((this - 128));

  JUMPOUT(0x2666E9F00);
}

void PSPaintPType_Factory::PSPaintPType_Factory(PSPaintPType_Factory *this)
{
  v3 = xmmword_260857860;
  v4 = xmmword_260850EF0;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 0);
  *v2 = &unk_2871F2A10;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872D74E8;
  *(this + 16) = &unk_2872D75B8;
  *(this + 17) = 0;
}

void PSPaintPType_Factory::~PSPaintPType_Factory(PSPaintPType_Factory *this)
{
  PSPaintPType_Factory::~PSPaintPType_Factory(this);

  JUMPOUT(0x2666E9F00);
}

{
  *this = &unk_2872D74E8;
  v2 = (this + 128);
  *(this + 16) = &unk_2872D75B8;
  v3 = *(this + 17);
  if (v3)
  {
    (*(*v3 + 8))(v3);
  }

  *(this + 17) = 0;
  PCSingleton::~PCSingleton(v2);

  OZFactory::~OZFactory(this);
}

OZChannelBase *PSPaintPType_Factory::create(PSPaintPType_Factory *this, const PCString *a2, unsigned int NextUniqueID)
{
  if (!*(this + 17))
  {
    OZChannelBase::setRangeName(&v12, @"Motion Effect");
    operator new();
  }

  OZChannelBase::setRangeName(&v11, @"Motion Effect");
  v6 = (*(*this + 24))(this, *(this + 17), 40);
  v7 = v6;
  if (!NextUniqueID)
  {
    NextUniqueID = OZChannelBase::getNextUniqueID(v6);
  }

  OZChannelBase::setID(&v7->var7, NextUniqueID);
  v8 = (*(v7->var0 + 80))(v7);
  OZChannelBase::setName(v8, a2, 0);
  (*(v7->var0 + 115))(v7);
  OZChannelBase::setRangeName(&v11, v9);
  return v7;
}

void sub_2602D0D60(_Unwind_Exception *a1, int a2, uint64_t a3, OZChannelBase *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, __int16 a11, char a12, char a13)
{
  MEMORY[0x2666E9F00](v13, 0x10F1C4086FB70F7, a3, a4);
  OZChannelBase::setRangeName(&a13, v15);
  _Unwind_Resume(a1);
}

void non-virtual thunk toPSPaintPType_Factory::~PSPaintPType_Factory(PSPaintPType_Factory *this)
{
  PSPaintPType_Factory::~PSPaintPType_Factory((this - 128));
}

{
  PSPaintPType_Factory::~PSPaintPType_Factory((this - 128));

  JUMPOUT(0x2666E9F00);
}

void PSEmitterMoToFoBehavior_Factory::PSEmitterMoToFoBehavior_Factory(PSEmitterMoToFoBehavior_Factory *this)
{
  v4 = xmmword_260850820;
  v5 = xmmword_260856FD0;
  v3 = xmmword_260348420;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 1);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7610;
  *(this + 18) = &unk_2872D76F0;
}

void PSScaleOverLifeBehavior_Factory::PSScaleOverLifeBehavior_Factory(PSScaleOverLifeBehavior_Factory *this)
{
  v4 = xmmword_26084FAE0;
  v5 = xmmword_260856FE0;
  v3 = xmmword_260850750;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 0);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7748;
  *(this + 18) = &unk_2872D7828;
}

void PSSequenceBehavior_Factory::PSSequenceBehavior_Factory(PSSequenceBehavior_Factory *this)
{
  v4 = xmmword_26084FAE0;
  v5 = xmmword_2608556D0;
  v3 = xmmword_260850750;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 0);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7880;
  *(this + 18) = &unk_2872D7960;
}

void PSPaintSequenceBehavior_Factory::PSPaintSequenceBehavior_Factory(PSPaintSequenceBehavior_Factory *this)
{
  v4 = xmmword_2608556D0;
  v5 = xmmword_260857A30;
  v3 = xmmword_26084F780;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 0);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D79B8;
  *(this + 18) = &unk_2872D7A98;
}

void PSSpinOverLifeBehavior_Factory::PSSpinOverLifeBehavior_Factory(PSSpinOverLifeBehavior_Factory *this)
{
  v4 = xmmword_260850800;
  v5 = xmmword_260857A40;
  v3 = xmmword_260348420;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 0);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7AF0;
  *(this + 18) = &unk_2872D7BD0;
}

void PSPenPropertyBehavior_Factory::PSPenPropertyBehavior_Factory(PSPenPropertyBehavior_Factory *this)
{
  v4 = xmmword_2603483A0;
  v5 = xmmword_260857A50;
  v3 = xmmword_26084F780;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 1);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7C28;
  *(this + 18) = &unk_2872D7D08;
}

void PSPenPressureBehavior_Factory::PSPenPressureBehavior_Factory(PSPenPressureBehavior_Factory *this)
{
  v4 = xmmword_260857A50;
  v5 = xmmword_260857A60;
  v3 = xmmword_26084F780;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 0);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7D60;
  *(this + 18) = &unk_2872D7E40;
}

void PSPenSpeedBehavior_Factory::PSPenSpeedBehavior_Factory(PSPenSpeedBehavior_Factory *this)
{
  v4 = xmmword_260857A50;
  v5 = xmmword_260857A70;
  v3 = xmmword_26084F780;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 0);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7E98;
  *(this + 18) = &unk_2872D7F78;
}

void PSPenTiltBehavior_Factory::PSPenTiltBehavior_Factory(PSPenTiltBehavior_Factory *this)
{
  v4 = xmmword_260857A50;
  v5 = xmmword_260857A80;
  v3 = xmmword_26084F780;
  OZBehaviorFactory::OZBehaviorFactory(this, &v5, &v4, &v3, 0);
  PCSingleton::PCSingleton((v2 + 144), 0);
  *this = &unk_2872D7FD0;
  *(this + 18) = &unk_2872D80B0;
}

void PSSpinOverLifeBehavior::PSSpinOverLifeBehavior(PSSpinOverLifeBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZReflexiveBehavior::OZReflexiveBehavior(this, a2, a3, a4);
  *v5 = &unk_2872D8108;
  v5[2] = &unk_2872D83F0;
  v5[6] = &unk_2872D8648;
  v5[42] = &unk_2872D86A0;
  PCURL::PCURL(&v6, @"Spin Over Life Behavior Increment Type Enum");
  PCURL::PCURL(&v7, @"Spin Over Life Behavior Increment Type");
  OZChannelEnum::OZChannelEnum((this + 504), &v6, &v7, (this + 56), 0x190u, 0, 0, 0);
  PCString::~PCString(&v7);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Spin Over Life Behavior Spin Rate");
  OZChannelAngle::OZChannelAngle(this + 5, 1.57079633, &v6, (this + 56), 0x191u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Spin Over Life Behavior Begin Spin");
  OZChannelAngle::OZChannelAngle(this + 6, 0.0, &v6, (this + 56), 0x192u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Spin Over Life Behavior End Spin");
  OZChannelAngle::OZChannelAngle(this + 7, 1.57079633, &v6, (this + 56), 0x193u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Spin Over Life Behavior Custom Spin");
  OZChannelAngleOverRange::OZChannelAngleOverRange((this + 1216), &v6, (this + 56), 0x194u, 0, 0, 0);
  PCString::~PCString(&v6);
  OZReflexiveBehavior::setAffectsLeafNodes(this, 1u);
  OZReflexiveBehavior::hideAffectsLeafNodes(this, 1);
  OZChannel::setSliderMin(this + 5, -6.28318531);
  OZChannel::setSliderMax(this + 5, 6.28318531);
  OZChannel::setSliderMin(this + 6, -6.28318531);
  OZChannel::setSliderMax(this + 6, 6.28318531);
  OZChannel::setSliderMin(this + 7, -6.28318531);
  OZChannel::setSliderMax(this + 7, 6.28318531);
  OZChannel::setSliderMin(this + 8, -6.28318531);
  OZChannel::setSliderMax(this + 8, 6.28318531);
  OZChannelBase::resetFlag((this + 1216), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 1216));
  PCURL::PCURL(&v6, @"Spin Over Life Behavior Over Life");
  PCString::set(this + 171, &v6);
  PCString::~PCString(&v6);
  OZChannel::setValueAndIgnoreRecordOption(this + 8, MEMORY[0x277CC08F0]);
  OZFigTimeForChannelSeconds(&v6, 1.0, 0x40000);
  OZChannel::setValueAndIgnoreRecordOption(this + 8, &v6);
  OZChannelAngleOverRange::setValueOverRange(this + 8, 0.0, 1.0, 1.57079633);
}

void sub_2602D33A4(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, PCString a12)
{
  PCString::~PCString(&a9);
  OZChannelAngleOverRange::~OZChannelAngleOverRange((v12 + 1216));
  OZChannel::~OZChannel((v12 + 1064));
  OZChannel::~OZChannel((v12 + 912));
  OZChannel::~OZChannel((v12 + 760));
  OZChannelEnum::~OZChannelEnum((v12 + 504));
  OZReflexiveBehavior::~OZReflexiveBehavior(v12);
  _Unwind_Resume(a1);
}

void PSSpinOverLifeBehavior::PSSpinOverLifeBehavior(PSSpinOverLifeBehavior *this, PSSpinOverLifeBehavior *a2, char a3)
{
  OZReflexiveBehavior::OZReflexiveBehavior(this, a2, a3);
  *v5 = &unk_2872D8108;
  v5[2] = &unk_2872D83F0;
  v5[6] = &unk_2872D8648;
  v5[42] = &unk_2872D86A0;
  OZChannelEnum::OZChannelEnum((v5 + 63), (a2 + 504), (this + 56));
  OZChannel::OZChannel(this + 5, (a2 + 760), (this + 56));
  *(this + 95) = &unk_287246030;
  *(this + 97) = &unk_287246390;
  OZChannel::OZChannel(this + 6, (a2 + 912), (this + 56));
  *(this + 114) = &unk_287246030;
  *(this + 116) = &unk_287246390;
  OZChannel::OZChannel(this + 7, (a2 + 1064), (this + 56));
  *(this + 133) = &unk_287246030;
  *(this + 135) = &unk_287246390;
  OZChannelAngleOverRange::OZChannelAngleOverRange((this + 1216), (a2 + 1216), (this + 56));
  OZChannelBase::resetFlag((this + 1216), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 1216));
}

void sub_2602D3664(_Unwind_Exception *a1)
{
  OZChannel::~OZChannel(v4);
  OZChannel::~OZChannel(v3);
  OZChannel::~OZChannel(v2);
  OZChannelEnum::~OZChannelEnum((v1 + 504));
  OZReflexiveBehavior::~OZReflexiveBehavior(v1);
  _Unwind_Resume(a1);
}

void PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior(PSSpinOverLifeBehavior *this)
{
  *this = &unk_2872D8108;
  *(this + 2) = &unk_2872D83F0;
  *(this + 6) = &unk_2872D8648;
  *(this + 42) = &unk_2872D86A0;
  v2 = (this + 1216);
  *(this + 152) = &unk_287252500;
  *(this + 154) = &unk_2872528B0;
  PCString::~PCString(this + 171);
  OZChannel::~OZChannel(v2);
  OZChannel::~OZChannel(this + 7);
  OZChannel::~OZChannel(this + 6);
  OZChannel::~OZChannel(this + 5);
  OZChannelEnum::~OZChannelEnum((this + 504));

  OZReflexiveBehavior::~OZReflexiveBehavior(this);
}

{
  PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toPSSpinOverLifeBehavior::~PSSpinOverLifeBehavior(PSSpinOverLifeBehavior *this)
{
  PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior((this - 16));
}

{
  PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior((this - 48));
}

{
  PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior((this - 336));
}

{
  PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSSpinOverLifeBehavior::~PSSpinOverLifeBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

void PSSpinOverLifeBehavior::operator=(PCString *a1, const void *a2)
{
  OZReflexiveBehavior::operator=(a1, a2);
  if (!v4)
  {
    __cxa_bad_cast();
  }

  v5 = v4;
  OZChannelBase::operator=(&a1[63], &v4[63]);
  OZChannelBase::operator=(&a1[95], &v5[95]);
  OZChannelBase::operator=(&a1[114], &v5[114]);
  OZChannelBase::operator=(&a1[133], &v5[133]);
  OZChannelBase::operator=(&a1[152], &v5[152]);

  PCString::set(a1 + 171, v5 + 171);
}

unint64_t PSSpinOverLifeBehavior::canAddToSceneNode(PSSpinOverLifeBehavior *this, OZSceneNode *a2)
{
  v3 = *((*(*a2 + 664))(a2) + 8);
  v6 = xmmword_260850EE0;
  if (OZFactory::isKindOfClass(v3, &v6))
  {
    v6 = xmmword_260857860;
    if (!OZFactory::isKindOfClass(v3, &v6))
    {
      return 1;
    }
  }

  v6 = xmmword_260853DB0;
  if (OZFactory::isKindOfClass(v3, &v6))
  {
    v6 = xmmword_260853DC0;
    if (!OZFactory::isKindOfClass(v3, &v6))
    {
      return 1;
    }
  }

  v6 = xmmword_26084F780;
  result = OZFactory::isKindOfClass(v3, &v6);
  if (!result)
  {
    return result;
  }

  if (!OZChannelBase::isEnabled((v5 + 25776), 0, 1) || (OZChannelBase::isEnabled((v5 + 21760), 0, 1) & 1) != 0)
  {
    return 0;
  }

  result = OZChannel::getValueAsInt((v5 + 25904), MEMORY[0x277CC08F0], 0.0);
  if (result != 1)
  {
    return OZChannel::getValueAsInt((v5 + 25904), MEMORY[0x277CC08F0], 0.0) == 2;
  }

  return result;
}

OZChannelBase *PSSpinOverLifeBehavior::updateHiddenFlags(uint64_t a1, uint64_t a2)
{
  result = OZChannel::getValueAsInt((a1 + 504), MEMORY[0x277CC08F0], 0.0);
  v4 = result;
  v5 = *(a2 + 8);
  if (v5 == a2)
  {
    v8 = 1;
  }

  else
  {
    v6 = MEMORY[0x277CC08F0];
    do
    {
      result = OZChannel::getValueAsInt((v7 + 504), v6, 0.0);
      v8 = v4 == result;
      if (v4 != result)
      {
        break;
      }

      v5 = *(v5 + 8);
    }

    while (v5 != a2);
    v5 = *(a2 + 8);
  }

  if (v5 != a2)
  {
    while (1)
    {
      v9 = *(v5 + 16);
      OZChannelBase::resetFlag((v10 + 760), 2, 1);
      OZChannelBase::resetFlag((v10 + 912), 2, 1);
      OZChannelBase::resetFlag((v10 + 1064), 2, 1);
      result = OZChannelBase::resetFlag((v10 + 1216), 2, 1);
      if (!v8)
      {
        break;
      }

      switch(v4)
      {
        case 2:
          OZChannelBase::setFlag((v10 + 760), 0x400000, 1);
          OZChannelBase::setFlag((v10 + 912), 0x400000, 1);
          OZChannelBase::setFlag((v10 + 1064), 0x400000, 1);
          goto LABEL_17;
        case 1:
          OZChannelBase::setFlag((v10 + 760), 0x400000, 1);
          OZChannelBase::resetFlag((v10 + 912), 0x400000, 1);
          OZChannelBase::resetFlag((v10 + 1064), 0x400000, 1);
          goto LABEL_19;
        case 0:
          OZChannelBase::resetFlag((v10 + 760), 0x400000, 1);
          OZChannelBase::setFlag((v10 + 912), 0x400000, 1);
          OZChannelBase::setFlag((v10 + 1064), 0x400000, 1);
LABEL_19:
          result = OZChannelBase::setFlag((v10 + 1216), 0x400000, 1);
          break;
      }

LABEL_20:
      v5 = *(v5 + 8);
      if (v5 == a2)
      {
        return result;
      }
    }

    OZChannelBase::resetFlag((v10 + 760), 0x400000, 1);
    OZChannelBase::resetFlag((v10 + 912), 0x400000, 1);
    OZChannelBase::resetFlag((v10 + 1064), 0x400000, 1);
LABEL_17:
    result = OZChannelBase::resetFlag((v10 + 1216), 0x400000, 1);
    goto LABEL_20;
  }

  return result;
}

void PSSpinOverLifeBehavior::accumForcesRate(OZChannel *this, OZSimStateArray *a2)
{
  v6 = *(a2 + 1);
  OZChannel::getValueAsDouble(this + 5, &v6, 0.0);
  v4 = *a2;
  v5 = *(a2 + 1);
  if (*a2 != v5)
  {
    do
    {
      *(v4 + 152) = vaddq_f64(*(v4 + 152), 0);
      *(v4 + 168) = v3 + *(v4 + 168);
      v4 += 248;
    }

    while (v4 != v5);
  }
}

void PSSpinOverLifeBehavior::accumForcesDestination(OZChannel *this, OZSimStateArray *a2)
{
  if (OZChannel::hasMoreThanOneKeypoint(this + 6) || OZChannel::hasMoreThanOneKeypoint(this + 7) || (OZBehavior::IsChannelAffectedByBehaviors(&this[6], 1) & 1) != 0 || OZBehavior::IsChannelAffectedByBehaviors(&this[7], 1))
  {
    v4 = *a2;
    if (*a2 != *(a2 + 1))
    {
      v5 = MEMORY[0x277CC08F0];
      do
      {
        v6 = *(v4 + 232);
        if (v6)
        {
        }

        else
        {
          v7 = 0;
        }

        *&v22.value = *(v7 + 2);
        v22.epoch = *(v7 + 6);
        *&time1.value = *&v22.value;
        time1.epoch = *(v7 + 6);
        time2 = *v5;
        if (CMTimeCompare(&time1, &time2) >= 1)
        {
          v8 = *(v7 + 8);
          time1.epoch = *(v7 + 3);
          *&time1.value = v8;
          OZChannel::getValueAsDouble(this + 6, &time1, 0.0);
          v10 = v9;
          OZChannel::getValueAsDouble(this + 7, &time1, 0.0);
          v12 = v11 - v10;
          time2 = v22;
          Seconds = CMTimeGetSeconds(&time2);
          *(v4 + 152) = vaddq_f64(*(v4 + 152), 0);
          *(v4 + 168) = v12 * (1.0 / Seconds) + *(v4 + 168);
        }

        v4 += 248;
      }

      while (v4 != *(a2 + 1));
    }
  }

  else
  {
    v14 = MEMORY[0x277CC08F0];
    OZChannel::getValueAsDouble(this + 6, MEMORY[0x277CC08F0], 0.0);
    v16 = v15;
    OZChannel::getValueAsDouble(this + 7, v14, 0.0);
    v18 = *a2;
    if (*a2 != *(a2 + 1))
    {
      v19 = v17 - v16;
      do
      {
        *&v23.value = *(v20 + 2);
        v23.epoch = *(v20 + 6);
        *&time1.value = *&v23.value;
        time1.epoch = *(v20 + 6);
        time2 = *v14;
        if (CMTimeCompare(&time1, &time2) >= 1)
        {
          time1 = v23;
          v21 = CMTimeGetSeconds(&time1);
          *(v18 + 152) = vaddq_f64(*(v18 + 152), 0);
          *(v18 + 168) = v19 * (1.0 / v21) + *(v18 + 168);
        }

        v18 += 248;
      }

      while (v18 != *(a2 + 1));
    }
  }
}

void PSSpinOverLifeBehavior::accumForcesCustom(OZChannel *this, OZSimStateArray *a2)
{
  v35 = *MEMORY[0x277D85DE8];
  if (OZChannel::hasMoreThanOneKeypoint(this + 8) || OZBehavior::IsChannelAffectedByBehaviors(&this[8], 1))
  {
    v4 = (*(this->var0 + 42))(this);
    v5 = *(v4 + 368);
    v32 = *(a2 + 1);
    v31 = 512;
    v6 = (MEMORY[0x28223BE20])(v4);
    MEMORY[0x28223BE20](v6);
    v29 = v22;
    v30 = v7;
    OZChannel::getSamples(this + 8, 0.0, 0.001953125, &v31, &v30, &v29, 0.0);
    v8 = *a2;
    if (*a2 != *(a2 + 1))
    {
      v9 = MEMORY[0x277CC08F0];
      do
      {
        v28 = *(v10 + 8);
        v27 = *(v10 + 32);
        v25 = 0uLL;
        v26 = 0;
        v11 = (*(this->var0 + 42))(this);
        OZSceneSettings::getFrameDuration((v11 + 336), &v25);
        time1 = v32;
        time2 = v28;
        PC_CMTimeSaferSubtract(&time1, &time2, &time);
        time1 = time;
        *&time2.value = v25;
        time2.epoch = v26;
        if ((CMTimeCompare(&time1, &time2) & 0x80000000) == 0)
        {
          time1 = v27;
          time2 = *v9;
          if (CMTimeCompare(&time1, &time2) >= 1)
          {
            time1 = v27;
            Seconds = CMTimeGetSeconds(&time1);
            time1 = v32;
            time2 = v28;
            v13 = 1.0 / Seconds;
            PC_CMTimeSaferSubtract(&time1, &time2, &time);
            v14 = v13 * CMTimeGetSeconds(&time);
            time1 = v32;
            *&time2.value = v25;
            time2.epoch = v26;
            PC_CMTimeSaferSubtract(&time1, &time2, &v23);
            time1 = v23;
            time2 = v28;
            PC_CMTimeSaferSubtract(&time1, &time2, &time);
            v15 = CMTimeGetSeconds(&time);
            LODWORD(v16) = v31;
            v17 = v16;
            v18 = vcvtmd_s64_f64(v14 * v17 + 0.5 + 0.0000001);
            v19 = vcvtmd_s64_f64(v13 * v15 * v17 + 0.5 + 0.0000001);
            v20 = v19 & ~(v19 >> 31);
            if (v20 != v18)
            {
              v21 = v5 * (*&v22[v18] - *&v22[v20]);
              *(v8 + 152) = vaddq_f64(*(v8 + 152), 0);
              *(v8 + 168) = v21 + *(v8 + 168);
            }
          }
        }

        v8 += 248;
      }

      while (v8 != *(a2 + 1));
    }
  }
}

void PSSpinOverLifeBehavior::accumForces(PSSpinOverLifeBehavior *this, OZSimStateArray *a2, OZTransformNode *a3)
{
  if ((*(*this + 336))(this, a2, a3))
  {
    ValueAsInt = OZChannel::getValueAsInt((this + 504), MEMORY[0x277CC08F0], 0.0);
    switch(ValueAsInt)
    {
      case 2:

        PSSpinOverLifeBehavior::accumForcesCustom(this, a2);
        break;
      case 1:

        PSSpinOverLifeBehavior::accumForcesDestination(this, a2);
        break;
      case 0:

        PSSpinOverLifeBehavior::accumForcesRate(this, a2);
        break;
    }
  }
}

void PSSpinOverLifeBehavior::accumInitialValues(PSSpinOverLifeBehavior *this, OZSimStateArray *a2, int a3, OZTransformNode *a4)
{
  v18 = *(a2 + 1);
  ValueAsInt = OZChannel::getValueAsInt((this + 504), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt == 2)
  {
    OZChannelAngleOverRange::getValueOverRangeAsDouble(this + 8, 0.0, 0.0);
  }

  else
  {
    v8 = 0.0;
    if (ValueAsInt == 1)
    {
      OZChannel::getValueAsDouble(this + 6, &v18, 0.0);
    }
  }

  v9 = *a2;
  v10 = *(a2 + 1);
  v11 = v10 == *a2 || a3 < 1;
  if (!v11)
  {
    v12.f64[0] = 0.0;
    v12.f64[1] = v8;
    v13 = *&v8;
    v14 = (v10 - 248);
    v15 = 1;
    do
    {
      v16 = vaddq_f64(v12, v14[7]);
      v17 = vaddq_f64(v13, v14[6]);
      v14[5] = vaddq_f64(v14[5], 0);
      v14[6] = v17;
      v14[7] = v16;
      if (v14 == v9)
      {
        break;
      }

      v14 = (v14 - 248);
      v11 = v15++ < a3;
    }

    while (v11);
  }
}

void PSPaint::PSPaint(PSPaint *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  PSReplicator::PSReplicator(this, a2, a3, a4);
  *v5 = &unk_2872D86E0;
  *(v5 + 25) = &unk_2872D8A18;
  *(v5 + 27) = &unk_2872D92F0;
  *(v5 + 31) = &unk_2872D9548;
  *(v5 + 841) = &unk_2872D95A0;
  *(v5 + 4215) = &unk_2872D9678;
  PSPaint::initPaintChannels(v5);
  (*(*this + 448))(this, 1);
  PSEmitter::addNewParticleType(this, 0);
}

OZChannelBase *PSPaint::initPaintChannels(PSPaint *this)
{
  PCURL::PCURL(&v3, @"Replicator Shape Anim");
  OZChannelBase::setName(this + 174, &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Replicator Shape Anim Enum");
  OZChannelEnum::setStrings(this + 2436, &v3, 1);
  PCString::~PCString(&v3);
  OZChannelBase::setFlag((this + 19896), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 19896));
  OZChannelBase::setFlag((this + 20152), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 20152));
  OZChannelBase::setFlag((this + 20304), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 20304));
  OZChannelBase::setFlag((this + 20456), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 20456));
  OZChannelBase::setFlag((this + 21064), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 21064));
  OZChannelBase::setFlag((this + 21216), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 21216));
  OZChannelBase::setFlag((this + 21472), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 21472));
  OZChannelBase::setFlag((this + 22240), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 22240));
  OZChannelBase::setFlag((this + 22496), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 22496));
  OZChannelBase::setFlag((this + 22752), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 22752));
  OZChannelBase::setFlag((this + 23008), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 23008));
  OZChannelBase::setFlag((this + 23160), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 23160));
  OZChannelBase::setFlag((this + 23312), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 23312));
  OZChannelBase::setFlag((this + 23464), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 23464));
  OZChannelBase::setFlag((this + 24352), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 24352));
  OZChannelBase::setFlag((this + 25240), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 25240));
  OZChannelBase::setFlag((this + 25392), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 25392));
  OZChannelBase::setFlag(this + 232, 2, 0);
  OZChannelBase::saveStateAsDefault(this + 232);
  OZChannelBase::setFlag((this + 26136), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 26136));
  OZChannelBase::setFlag((this + 26288), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 26288));
  OZChannelBase::setFlag((this + 26440), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 26440));
  OZChannelBase::setFlag((this + 26592), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 26592));
  OZChannelBase::setFlag((this + 26744), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 26744));
  OZChannelBase::setFlag((this + 27048), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27048));
  OZChannelBase::setFlag((this + 27200), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27200));
  OZChannelBase::setFlag((this + 27352), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27352));
  OZChannelBase::setFlag((this + 27512), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27512));
  OZChannelBase::setFlag((this + 28128), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 28128));
  OZChannelBase::setFlag((this + 28864), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 28864));
  OZChannelBase::setFlag((this + 29760), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 29760));
  OZChannelBase::setFlag((this + 30920), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 30920));
  OZChannelBase::setFlag((this + 31072), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 31072));
  OZChannelBase::setFlag((this + 31328), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 31328));
  OZChannelBase::setFlag((this + 31632), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 31632));
  OZChannelBase::setFlag((this + 31784), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 31784));
  OZChannel::setDefaultValue((this + 19232), 4.0);
  OZChannelBase::setFlag((this + 19232), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 19232));
  OZChannelBase::setFlag((this + 27352), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27352));
  OZChannel::setDefaultValue((this + 28256), 0.0);
  OZChannel::setDefaultValue((this + 31632), 1.0);
  OZChannel::setDefaultValue((this + 29456), 1.0);
  OZChannel::setDefaultValue((this + 32792), 0.0);
  PCURL::PCURL(&v3, @"Paint Is 3D");
  OZChannelBase::setName((this + 32792), &v3, 0);
  PCString::~PCString(&v3);
  PCURL::PCURL(&v3, @"Paint Is Depth Ordered");
  OZChannelBase::setName((this + 33352), &v3, 0);
  PCString::~PCString(&v3);
  OZChannel::setDefaultValue((this + 32944), 1.0);
  OZChannelBase::reset((this + 19232), 0);
  OZChannelBase::reset((this + 19744), 0);
  OZChannelBase::reset((this + 28256), 0);
  OZChannelBase::reset((this + 31632), 0);
  OZChannelBase::reset(this + 263, 0);
  OZChannelBase::reset((this + 32792), 0);
  OZChannelBase::reset((this + 32944), 0);
  OZChannelBase::setFlag((this + 19232), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 19232));
  OZChannelBase::setFlag((this + 19896), 16, 0);
  OZChannelBase::saveStateAsDefault((this + 19896));
  OZChannelBase::setFlag((this + 19744), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 19744));
  OZChannelBase::setFlag((this + 28128), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 28128));
  OZChannelBase::resetFlag((this + 27672), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27672));
  OZChannelBase::resetFlag((this + 27976), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 27976));
  OZChannelBase::setFlag((this + 31072), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 31072));
  OZChannelBase::setFlag((this + 31632), 2, 0);
  return OZChannelBase::saveStateAsDefault((this + 31632));
}

void PSPaint::PSPaint(PSPaint *this, const PSPaint *a2, uint64_t a3)
{
  v3 = a3;
  PSReplicator::PSReplicator(this, a2, a3);
  *v5 = &unk_2872D86E0;
  v5[25] = &unk_2872D8A18;
  v5[27] = &unk_2872D92F0;
  v5[31] = &unk_2872D9548;
  v5[841] = &unk_2872D95A0;
  v5[4215] = &unk_2872D9678;
  if ((v3 & 0x60) == 0x20)
  {
    PaintPType = PSPaint::getPaintPType(this);
    v7 = PaintPType;
    if (PaintPType)
    {
      NextUniqueID = OZChannelBase::getNextUniqueID(PaintPType);
      OZChannelBase::setID(&v7->var7, NextUniqueID);
    }
  }
}

void *PSPaint::getPaintPType(PSPaint *this)
{
  if ((*(*this + 216))(this) != 1)
  {
    return 0;
  }

  v2 = (*(*this + 224))(this, 0);
  if (!v2)
  {
    return 0;
  }
}

void non-virtual thunk toPSPaint::~PSPaint(PSPaint *this)
{
  PSReplicator::~PSReplicator((this - 200));
}

{
  PSReplicator::~PSReplicator((this - 216));
}

{
  PSReplicator::~PSReplicator((this - 248));
}

{
  PSReplicator::~PSReplicator((this - 6728));
}

{
  PSReplicator::~PSReplicator((this - 33720));
}

{
  PSReplicator::~PSReplicator((this - 200));

  JUMPOUT(0x2666E9F00);
}

{
  PSReplicator::~PSReplicator((this - 216));

  JUMPOUT(0x2666E9F00);
}

{
  PSReplicator::~PSReplicator((this - 248));

  JUMPOUT(0x2666E9F00);
}

{
  PSReplicator::~PSReplicator((this - 6728));

  JUMPOUT(0x2666E9F00);
}

{
  PSReplicator::~PSReplicator((this - 33720));

  JUMPOUT(0x2666E9F00);
}

void PSPaint::~PSPaint(PSPaint *this)
{
  PSReplicator::~PSReplicator(this);

  JUMPOUT(0x2666E9F00);
}

OZChannelBase *PSPaint::didCreateCopyForCopyOnWrite(PSPaint *this, double a2)
{
  PSEmitter::didCreateCopyForCopyOnWrite(this, a2);
  result = PSPaint::getRotoshape(this);
  if (result)
  {
    result = LODWORD(result[2].var7);
    if (result >= *(this + 70))
    {
      updated = OZChannelBase::updateIDGenerator(result);
      NextUniqueID = OZChannelBase::getNextUniqueID(updated);
      OZChannelBase::setID((this + 256), NextUniqueID);
      result = PSPaint::getPaintPType(this);
      if (result)
      {
        v6 = result;
        v7 = OZChannelBase::getNextUniqueID(result);

        return OZChannelBase::setID(&v6->var7, v7);
      }
    }
  }

  return result;
}

void *PSPaint::getRotoshape(PSPaint *this)
{
  result = *(this + 145);
  if (result)
  {
  }

  return result;
}

CGColorSpace **PSPaint::getOriginalBounds(PSPaint *a1, uint64_t a2, uint64_t a3)
{
  Rotoshape = PSPaint::getRotoshape(a1);
  if (Rotoshape)
  {
    v7 = Rotoshape;
    OZShapeRenderState::OZShapeRenderState(&v14);
    *&v15 = *(a3 + 16);
    v14 = *a3;
    BYTE8(v15) = *(a3 + 202);
    BYTE10(v15) = *(a3 + 220);
    v16 = *(a3 + 24);
    LODWORD(v17) = 1;
    v11[3] = v17;
    v11[4] = v18;
    v11[0] = v14;
    v11[1] = v15;
    v11[2] = v16;
    v12 = space;
    if (space)
    {
      PCCFRefTraits<CGColorSpace *>::retain(space);
    }

    v13 = v20;
    CurrentRenderParams = OZShape::getCurrentRenderParams(v7 + 18976, v11);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v12);
    OZRotoshape::getOriginalBoundsNoLock(v7, a2, a3, CurrentRenderParams);
    return PCCFRef<CGColorSpace *>::~PCCFRef(&space);
  }

  else
  {
    v10 = *(*a1 + 688);

    return v10(a1, a2, a3);
  }
}

void sub_2602D55D8(_Unwind_Exception *a1)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v2 + 80));
  PCCFRef<CGColorSpace *>::~PCCFRef((v1 + 80));
  _Unwind_Resume(a1);
}

uint64_t PSPaint::getIsPaint3D(PSPaint *this)
{
  v1 = this + 0x8000;
  if (*(this + 33729) == 1)
  {
    v2 = *(this + 33728);
  }

  else
  {
    v2 = OZChannel::getValueAsInt((this + 32792), MEMORY[0x277CC08F0], 0.0) != 0;
    v1[960] = v2;
    v1[961] = 1;
  }

  return v2 & 1;
}

uint64_t non-virtual thunk toPSPaint::getIsPaint3D(PSPaint *this)
{
  if (*(this + 9) == 1)
  {
    v2 = *(this + 8);
  }

  else
  {
    v2 = OZChannel::getValueAsInt((this - 928), MEMORY[0x277CC08F0], 0.0) != 0;
    *(this + 8) = v2;
    *(this + 9) = 1;
  }

  return v2 & 1;
}

BOOL PSPaint::getIsSimulatingOrSequencing(PSPaint *this, const CMTime *a2)
{
  PaintPType = PSPaint::getPaintPType(this);
  if (!PaintPType)
  {
    return 0;
  }

  v4 = PaintPType;
  if ((*(*PaintPType + 1384))(PaintPType))
  {
    return 1;
  }

  v7 = 0;
  v8 = 0;
  v9 = 0;
  (*(*v4 + 1624))(v4, a2, &v7);
  v5 = v8 != v7;
  if (v7)
  {
    v8 = v7;
    operator delete(v7);
  }

  return v5;
}

void sub_2602D585C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void *PSPaint::calcHashForSourceOnly(PSPaint *this, PCSerializerWriteStream *a2, OZRenderParams *a3)
{
  result = PSPaint::getRotoshape(this);
  if (result)
  {
    v7 = result;
    StrokeWidthOSChan = OZMoShape::getStrokeWidthOSChan((result + 2372));
    (*(*StrokeWidthOSChan + 408))(StrokeWidthOSChan, a2, 0, 1, 1);
    v9 = *OZMoShape::getStrokeSpacingOSChan((v7 + 2372));
    (*(v9 + 408))();
    v10 = *OZMoShape::getStrokeJitterOSChan((v7 + 2372));
    (*(v10 + 408))();
    v11 = *OZMoShape::getStrokeRotationOSChan((v7 + 2372));
    (*(v11 + 408))();
    result = PSPaint::getPaintPType(this);
    if (result)
    {
      v12 = result;
      result = OZChannel::getValueAsInt((v7 + 3238), MEMORY[0x277CC08F0], 0.0);
      if (result == 2)
      {
        result = (*(*v12 + 1336))(v12);
        if (result)
        {
          if (result)
          {
            v13 = result;
            v22[0] = v22;
            v22[1] = v22;
            v22[2] = 0;
            if (PSParticleType::isSourceSingleFrame(v12))
            {
              OZRenderParams::OZRenderParams(&v18, a3);
              (*(*v13 + 1128))(&v16, v13);
              v18 = v16;
              v20 = 0;
              v21 = 0;
              v19 = v17;
              (*(*v13 + 520))(v13, a2, &v18, v22);
              if (v14)
              {
                v16 = *a3;
                v17 = *(a3 + 2);
                (*(v14[136] + 448))(v14 + 136, a2, &v16);
              }

              if (v15)
              {
                v16 = *a3;
                v17 = *(a3 + 2);
                (*(v15[835] + 448))(v15 + 835, a2, &v16);
              }

              OZRenderParams::~OZRenderParams(&v18);
            }

            else
            {
              (*(*v13 + 520))(v13, a2, a3, v22);
            }

            return std::__list_imp<unsigned int>::clear(v22);
          }
        }
      }
    }
  }

  return result;
}

void sub_2602D5CEC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  OZRenderParams::~OZRenderParams(va);
  std::__list_imp<unsigned int>::clear((v7 - 72));
  _Unwind_Resume(a1);
}

uint64_t PSPaint::assignPaintIncludingDescendants(PSPaint *this, const OZElement *a2)
{
  PSReplicator::operator=(this);
  if (!v4)
  {
    __cxa_bad_cast();
  }

  v5 = v4;
  PaintPType = PSPaint::getPaintPType(this);
  v7 = PSPaint::getPaintPType(v5);
  v8 = *(*PaintPType + 80);

  return v8(PaintPType, v7);
}

OZChannelBase *PSPaint::updateEmitterHiddenFlags(PSPaint *this, char a2)
{
  PSReplicator::updateEmitterHiddenFlags(this, a2);
  OZChannelBase::setFlag((this + 19232), 2, 0);

  return OZChannelBase::setFlag((this + 27352), 2, 0);
}

uint64_t PSPaint::createParticleType(PSPaint *this, OZImageNode *a2)
{
  PCURL::PCURL(&v8, @"Particle Type Default Name");
  if (a2)
  {
    if (v3)
    {
      Name = OZObjectManipulator::getName(&v3->var2);
      PCString::set(&v8, Name);
    }
  }

  NextUniqueID = OZChannelBase::getNextUniqueID(v3);
  PaintPType = PSPaintPType::createPaintPType(&v8, NextUniqueID);
  (*(*(PaintPType + 16) + 120))();
  PCString::~PCString(&v8);
  return PaintPType;
}

void *PSPaint::getGeometryNode(PSPaint *this)
{
  result = *(this + 145);
  if (result)
  {
  }

  return result;
}

void PSPaint::initPropertiesFromShape(int a1, int a2, CMTime *a3, uint64_t a4, uint64_t a5, float64x2_t *a6, uint64_t a7, _BYTE *a8)
{
  *a8 = 1;
  *a6 = vaddq_f64(*(a5 + 192), *a6);
  a6[1].f64[0] = a6[1].f64[0] + 0.0;
  *a7 = *(a5 + 208);
  *(a7 + 16) = 0;
  if (OZChannel::getValueAsInt((a4 + 2184), a3, 0.0))
  {
    v10 = atan2(*a7, -*(a7 + 8));
    v11 = __sincos_stret(v10 * 0.5);
    v12 = a6[1].f64[1];
    v13 = a6[2].f64[0];
    v14 = v13 * (v11.__sinval * 0.0);
    v15 = a6[2].f64[1];
    v16 = a6[3].f64[0];
    v17 = v15 * (v11.__sinval * 0.0);
    v18 = v12 * (v11.__sinval * 0.0);
    v19 = v11.__sinval * 0.0 * v16;
    a6[2].f64[1] = v11.__cosval * v15 + v18 + v19 - v13 * v11.__sinval;
    a6[3].f64[0] = v14 - v17 + v12 * v11.__sinval + v11.__cosval * v16;
    a6[1].f64[1] = v12 * v11.__cosval - (v14 + v17 + v11.__sinval * v16);
    a6[2].f64[0] = v11.__cosval * v13 + v18 + v11.__sinval * v15 - v19;
  }
}

uint64_t PSPaint::parseBegin(PSPaint *this, PCSerializerReadStream *a2)
{
  v4 = this + 1200;
  v5 = *(this + 151);
  v14 = &v14;
  v15 = &v14;
  v16 = 0;
  if (v5 != this + 1200)
  {
    do
    {
      v6 = *(*(v5 + 2) + 8);
      v13 = xmmword_260857A50;
      if (OZFactory::isKindOfClass(v6, &v13))
      {
        operator new();
      }

      v5 = *(v5 + 1);
    }

    while (v5 != v4);
    for (i = v15; i != &v14; i = i[1])
    {
      v8 = (*(*i[2] + 312))(i[2]);
      (*(*this + 416))(this, v8);
    }
  }

  v9 = (*(*this + 224))(this, 0);
  if (v9)
  {
    v10 = (*(*v9 + 216))(v9);
    (*(*this + 416))(this, v10);
  }

  v11 = PSEmitter::parseBegin(this, a2);
  std::__list_imp<unsigned int>::clear(&v14);
  return v11;
}

void sub_2602D62A0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, ...)
{
  va_start(va, a6);
  std::__list_imp<unsigned int>::clear(va);
  _Unwind_Resume(a1);
}

uint64_t non-virtual thunk toPSPaint::parseBegin(PSPaint *this, PCSerializerReadStream *a2)
{
  return PSPaint::parseBegin((this - 200), a2);
}

{
  return PSPaint::parseBegin((this - 248), a2);
}

uint64_t PSPaint::parseEnd(PSPaint *this, PCSerializerReadStream *a2)
{
  if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(*((*(*(this + 25) + 664))() + 8) + 8), xmmword_26084FA50)))) & 1) == 0 && OZChannel::getValueAsInt((this + 32944), MEMORY[0x277CC08F0], 0.0) != 1)
  {
    OZChannel::setDefaultValue((this + 32944), 1.0);
    OZChannelBase::reset((this + 32944), 0);
  }

  return PSReplicator::parseEnd(this, a2);
}

uint64_t non-virtual thunk toPSPaint::parseEnd(PSPaint *this, PCSerializerReadStream *a2)
{
  return PSPaint::parseEnd((this - 200), a2);
}

{
  return PSPaint::parseEnd((this - 248), a2);
}

double PSPaint::calcHashForState(PSPaint *a1, const void *a2, __int128 *a3)
{
  Rotoshape = PSPaint::getRotoshape(a1);
  if (Rotoshape)
  {
    v8 = Rotoshape;
    if (OZChannelBase::isEnabled((Rotoshape + 25776), 0, 1))
    {
      if ((OZChannelBase::isEnabled((v8 + 21760), 0, 1) & 1) == 0 && (OZChannel::getValueAsInt((v8 + 25904), MEMORY[0x277CC08F0], 0.0) == 1 || OZChannel::getValueAsInt((v8 + 25904), MEMORY[0x277CC08F0], 0.0) == 2))
      {

        return PSEmitter::calcHashForState(a1, a2, a3);
      }
    }
  }

  return result;
}

double non-virtual thunk toPSPaint::calcHashForState(uint64_t a1, const void *a2, __int128 *a3)
{
  return PSPaint::calcHashForState((a1 - 200), a2, a3);
}

{
  return PSPaint::calcHashForState((a1 - 216), a2, a3);
}

void PSPaint::addPenPropertyBehaviors(PSPaint *this)
{
  v1 = this + 200;
  v2 = this + 1200;
  v3 = *(this + 151);
  if (v3 == this + 1200)
  {
    LOBYTE(v5) = 0;
  }

  else
  {
    v4 = 0;
    v5 = 0;
    do
    {
      v6 = *(v3 + 2);
      v7 = *(*(v6 + 8) + 8);
      if (vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(v7, xmmword_260857A70)))) & 1) != 0 || (v4)
      {
        v8 = vmovn_s32(vmvnq_s8(vceqq_s32(v7, xmmword_260857A60)));
        v8.i16[0] = vmaxv_u16(v8);
        if (((v8.i32[0] | v5) & 1) == 0)
        {
          PCURL::PCURL(v23, @"PPaint Pen Pressure");
          (*(*(v6 + 16) + 120))(v6 + 16, v23, 0);
          PCString::~PCString(v23);
          v5 = 1;
        }
      }

      else
      {
        PCURL::PCURL(v23, @"PPaint Pen Speed");
        (*(*(v6 + 16) + 120))(v6 + 16, v23, 0);
        PCString::~PCString(v23);
        v4 = 1;
      }

      v3 = *(v3 + 1);
    }

    while (v3 != v2);
    if (v4)
    {
      if (v5)
      {
        return;
      }

      goto LABEL_21;
    }
  }

  v9 = theApp;
  *&v23[0].var0 = xmmword_260857A70;
  PCURL::PCURL(&v22, @"PPaint Pen Speed");
  OZChannelBase::getNextUniqueID(v10);
  Behavior = OZApplication::createBehavior(v9, v23);
  if (Behavior)
  {
  }

  else
  {
    v12 = 0;
  }

  PCString::~PCString(&v22);
  DefaultApplyTo = PSPenSpeedBehavior::getDefaultApplyTo(v13);
  if (DefaultApplyTo <= 0)
  {
    (*(v12[2] + 40))(v12 + 2, 0);
  }

  else
  {
    v15 = DefaultApplyTo;
    (*(v12[67] + 712))(v12 + 67, MEMORY[0x277CC08F0], 0, (DefaultApplyTo - 1));
    if (v15 <= 2)
    {
      (*(v12[245] + 712))(v12 + 245, MEMORY[0x277CC08F0], 0, 1.0);
    }
  }

  (*(*v1 + 360))(v1, v12, 0);
  if ((v5 & 1) == 0)
  {
LABEL_21:
    v16 = theApp;
    *&v23[0].var0 = xmmword_260857A60;
    PCURL::PCURL(&v22, @"PPaint Pen Pressure");
    OZChannelBase::getNextUniqueID(v17);
    v18 = OZApplication::createBehavior(v16, v23);
    if (v18)
    {
    }

    else
    {
      v19 = 0;
    }

    PCString::~PCString(&v22);
    v21 = PSPenPressureBehavior::getDefaultApplyTo(v20);
    if (v21 < 1)
    {
      (*(v19[2] + 40))(v19 + 2, 0);
    }

    else
    {
      (*(v19[67] + 712))(v19 + 67, MEMORY[0x277CC08F0], 0, (v21 - 1));
    }

    (*(*v1 + 360))(v1, v19, 0);
  }
}

void *PSPaint::initPenPropertyBehaviors(__n128 *this)
{
  v21 = 0uLL;
  v22 = 0;
  TimeOffset = OZChannelObjectRootBase::getTimeOffset(this + 16, &v21);
  v4 = this[12].n128_u64[1];
  v3 = &this[12].n128_i8[8];
  result = (*(v4 + 1128))(v20, v3, TimeOffset);
  v6 = *(v3 + 126);
  if (v6 != v3 + 1000)
  {
    v7 = MEMORY[0x277CC08F0];
    while (1)
    {
      result = *(v6 + 16);
      v8 = *(result[1] + 8);
      if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(v8, xmmword_260857A70)))) & 1) == 0)
      {
        break;
      }

      if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(v8, xmmword_260857A60)))) & 1) == 0)
      {
        OZChannelObjectRootBase::setTimeExtent((v9 + 7), v20, 0);
        *&v19.value = v21;
        v19.epoch = v22;
        OZChannelObjectRootBase::setTimeOffset((v9 + 7), &v19, 0);
        DefaultApplyTo = PSPenPressureBehavior::getDefaultApplyTo(v10);
        v12 = DefaultApplyTo - 1;
        if (DefaultApplyTo < 1)
        {
          goto LABEL_10;
        }

        (*(v9[2] + 32))(v9 + 2, 0);
        v13.n128_f64[0] = v12;
        (*(v9[67] + 712))(v9 + 67, v7, 0, v13);
        result = PSPenPropertyBehavior::updateApplyTo(v9);
      }

LABEL_11:
      v6 = *(v6 + 8);
      if (v6 == v3 + 1000)
      {
        return result;
      }
    }

    OZChannelObjectRootBase::setTimeExtent((v9 + 7), v20, 0);
    *&v19.value = v21;
    v19.epoch = v22;
    OZChannelObjectRootBase::setTimeOffset((v9 + 7), &v19, 0);
    v15 = PSPenSpeedBehavior::getDefaultApplyTo(v14);
    v16 = v15 - 1;
    if (v15 >= 1)
    {
      v17 = v15;
      (*(v9[2] + 32))(v9 + 2, 0);
      v18.n128_f64[0] = v16;
      (*(v9[67] + 712))(v9 + 67, v7, 0, v18);
      result = PSPenPropertyBehavior::updateApplyTo(v9);
      if (v17 <= 2)
      {
        result = (*(v9[245] + 712))(v9 + 245, v7, 0, 1.0);
      }

      goto LABEL_11;
    }

LABEL_10:
    result = (*(v9[2] + 40))(v9 + 2, 0);
    goto LABEL_11;
  }

  return result;
}

void PSPaint::didApplyStyle(PSPaint *this)
{
  PaintPType = PSPaint::getPaintPType(this);
  Rotoshape = PSPaint::getRotoshape(this);
  (*(*this + 656))(this);
  if (PaintPType && Rotoshape)
  {
    if (OZChannel::getValueAsInt((Rotoshape + 25904), MEMORY[0x277CC08F0], 0.0) != 2)
    {
      OZChannelBase::reset((PaintPType + 14392), 0);
    }

    OZChannel::setDefaultValue((PaintPType + 11192), 1.0);

    OZChannelBase::reset((PaintPType + 11192), 0);
  }
}

PSPaintPType *PSPaint::disableSourceNode(PSPaint *this)
{
  result = PSPaint::getPaintPType(this);
  if (result)
  {

    return PSPaintPType::disableSourceNode(result);
  }

  return result;
}

PSPaintPType *non-virtual thunk toPSPaint::disableSourceNode(PSPaint *this)
{
  result = PSPaint::getPaintPType((this - 33720));
  if (result)
  {

    return PSPaintPType::disableSourceNode(result);
  }

  return result;
}

void *PSPaint::beginInteractive(void *this)
{
  v1 = this + 150;
  v2 = this[151];
  if (v2 != this + 150)
  {
    do
    {
      this = v2[2];
      if (this)
      {
        if (this)
        {
          this = (*(*this + 672))(this, 1);
        }
      }

      v2 = v2[1];
    }

    while (v2 != v1);
  }

  return this;
}

void *PSPaint::endInteractive(void *this)
{
  v1 = this + 150;
  v2 = this[151];
  if (v2 != this + 150)
  {
    do
    {
      this = v2[2];
      if (this)
      {
        if (this)
        {
          this = (*(*this + 672))(this, 0);
        }
      }

      v2 = v2[1];
    }

    while (v2 != v1);
  }

  return this;
}

unint64_t PSPaint::getIsSimulationEnabled(PSPaint *this)
{
  v1 = (PSPaint::getPaintPType(this) + 11904);

  return OZChannelBase::isEnabled(v1, 0, 1);
}

unint64_t non-virtual thunk toPSPaint::getIsSimulationEnabled(PSPaint *this)
{
  v1 = (PSPaint::getPaintPType((this - 33720)) + 11904);

  return OZChannelBase::isEnabled(v1, 0, 1);
}

uint64_t PSPaint::dirtyPaintCache(PSPaint *this)
{
  PaintPType = PSPaint::getPaintPType(this);
  v2 = (*(*PaintPType + 1344))(PaintPType);

  return OZSystemSimulator::dirtyCache(v2);
}

uint64_t non-virtual thunk toPSPaint::dirtyPaintCache(PSPaint *this)
{
  PaintPType = PSPaint::getPaintPType((this - 33720));
  v2 = (*(*PaintPType + 1344))(PaintPType);

  return OZSystemSimulator::dirtyCache(v2);
}

uint64_t PSPaint::getErrorDisplayName(PSPaint *this)
{
  v1 = *(this + 145);
  if (v1)
  {
    return OZObjectManipulator::getName((v1 + 16));
  }

  else
  {
    return OZObjectManipulator::getName((this + 216));
  }
}

void PSPaintPType::PSPaintPType(PSPaintPType *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  v9 = *MEMORY[0x277D85DE8];
  PSReplicatorPType::PSReplicatorPType(this, a2, a3, a4);
  *v5 = &unk_2872D9768;
  v5[2] = &unk_2872D9E00;
  v5[6] = &unk_2872DA058;
  v5[136] = &unk_2872DA0B0;
  v5[139] = &unk_2872DA188;
  PCURL::PCURL(&v7, @"PPaint PType Brush Profile");
  OZChannelGradient::OZChannelGradient((this + 16984), &v7, (this + 448), 0xC8u, 0);
  PCString::~PCString(&v7);
  PCString::PCString(&v7, "Hidden Opacity Over Stroke");
  OZChannelPercentOverRange::OZChannelPercentOverRange((this + 17784), 1.0, &v7, (this + 448), 0xC9u, 0, 0, 0);
  PCString::~PCString(&v7);
  *(this + 2245) = 0;
  *(this + 17944) = 0u;
  PCMutex::PCMutex((this + 17968));
  *(this + 2260) = 0;
  *(this + 4522) = 0;
  *(this + 18092) = 0;
  *(this + 18040) = 0u;
  *(this + 18056) = 0u;
  *(this + 4518) = 0;
  *(this + 2262) = 0xBFF0000000000000;
  *(this + 2264) = 0;
  *(this + 4530) = 0;
  OZChannelBase::enable((this + 11904), 0, 1);
  (*(*this + 1536))(this);
  PCURL::PCURL(&v7, @"PPaint PType Align Rotation");
  OZChannelBase::setName((this + 2184), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Rotation");
  OZChannelBase::setName((this + 2336), &v7, 0);
  PCString::~PCString(&v7);
  OZChannelBase::setFlag((this + 3192), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 3192));
  PCURL::PCURL(&v7, @"PPaint PType Rotation Variance");
  OZChannelBase::setName((this + 4208), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Color Over Stroke");
  OZChannelBase::setName((this + 6784), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Random Color");
  OZChannelBase::setName((this + 7584), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Color Repetitions");
  OZChannelBase::setName((this + 7736), &v7, 0);
  PCString::~PCString(&v7);
  OZChannelBase::setFlag((this + 7888), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 7888));
  PCURL::PCURL(&v7, @"PPaint PType Scale");
  OZChannelBase::setName((this + 8040), &v7, 0);
  PCString::~PCString(&v7);
  OZChannelBase::setFlag((this + 8632), 2, 0);
  OZChannelFolder::saveStateAsDefault((this + 8632));
  PCURL::PCURL(&v7, @"PPaint PType Scale Variance");
  OZChannelBase::setName((this + 9224), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Is Additive Blend");
  OZChannelBase::setName(this + 89, &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Animate Image");
  OZChannelBase::setName((this + 10120), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Random Source Start Frame");
  OZChannelBase::setName((this + 10272), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Source Start Frame");
  OZChannelBase::setName((this + 10424), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Source Start Frame Offset");
  OZChannelBase::setName((this + 10576), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Source Start Frame OS");
  OZChannelBase::setName((this + 10728), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Hold Frames");
  OZChannelBase::setName((this + 10888), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Hold Frames Variance");
  OZChannelBase::setName((this + 11040), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Shape");
  OZChannelBase::setName((this + 11344), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Shape Enum");
  OZChannelEnum::setStrings(this + 1418, &v7, 1);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Seed");
  OZChannelBase::setName((this + 11600), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Point Size");
  OZChannelBase::setName((this + 11752), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Image Node Ref");
  OZChannelBase::setName((this + 14392), &v7, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Stroke Range");
  PCString::set(this + 525, &v7);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Stroke Range");
  PCString::set(this + 1561, &v7);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Stroke Range");
  PCString::set(this + 1581, &v7);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Stroke Range");
  PCString::set(this + 1798, &v7);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Stroke Range");
  PCString::set(this + 2242, &v7);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"PPaint PType Stroke Range");
  PCString::set(this + 1360, &v7);
  PCString::~PCString(&v7);
  OZChannelBase::resetFlag((this + 10728), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 10728));
  OZChannelBase::resetFlag((this + 1576), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1576));
  OZChannelBase::resetFlag((this + 1728), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1728));
  OZChannelBase::resetFlag((this + 1880), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 1880));
  OZChannelBase::resetFlag((this + 2032), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 2032));
  OZChannelBase::resetFlag((this + 5064), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 5064));
  OZChannelBase::resetFlag((this + 5216), 2, 0);
  OZChannelBase::saveStateAsDefault((this + 5216));
  v8 = 3;
  v7.var0 = 0x200000001;
  OZChannel::setDefaultValue((this + 5368), 1.0);
  OZChannelBase::reset((this + 5368), 0);
  OZChannelEnum::setTags((this + 5368), &v7, 3);
  PCURL::PCURL(&v6, @"PPaint PType Color Mode Enum");
  OZChannelEnum::setStrings(this + 671, &v6, 1);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"PPaint PType Color Mode");
  OZChannelBase::setName((this + 5368), &v6, 0);
  PCString::~PCString(&v6);
  (*(*this + 1528))(this, 1);
  OZChannel::setDefaultValue((this + 11192), 1.0);
  OZChannelBase::reset((this + 11192), 0);
  *(this + 4444) = 3;
  OZChannelBase::setFlag((this + 17112), 2, 1);
  (*(*(this + 2139) + 128))(this + 17112);
  OZChannelBase::reset((this + 16984), 0);
  *(this + 9062) = 0;
}

void sub_2602D7CB0(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a9);
  std::vector<PCPtr<LiMaterialLayer>>::__destroy_vector::operator()[abi:ne200100](&a10);
  PCMutex::~PCMutex(v11);
  std::vector<PCPtr<LiMaterialLayer>>::__destroy_vector::operator()[abi:ne200100](&a10);
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v10 + v13));
  OZChannelGradient::~OZChannelGradient((v10 + v12));
  PSReplicatorPType::~PSReplicatorPType(v10);
  _Unwind_Resume(a1);
}

void PSPaintPType::PSPaintPType(PSPaintPType *this, PSPaintPType *a2, char a3)
{
  PSReplicatorPType::PSReplicatorPType(this, a2, a3);
  *v5 = &unk_2872D9768;
  v5[2] = &unk_2872D9E00;
  v5[6] = &unk_2872DA058;
  v5[136] = &unk_2872DA0B0;
  v5[139] = &unk_2872DA188;
  OZChannelGradient::OZChannelGradient((v5 + 2123), (a2 + 16984), (this + 448));
  OZChannelPercentOverRange::OZChannelPercentOverRange((this + 17784), (a2 + 17784), (this + 448));
  *(this + 2245) = 0;
  *(this + 17944) = 0u;
  PCMutex::PCMutex((this + 17968));
  *(this + 2260) = 0;
  *(this + 4522) = 0;
  *(this + 18092) = 0;
  *(this + 18040) = 0u;
  *(this + 18056) = 0u;
  *(this + 4518) = 0;
  *(this + 2262) = 0xBFF0000000000000;
  *(this + 2264) = 0;
  *(this + 4530) = 0;
  PCURL::PCURL(&v6, @"PPaint PType Stroke Range");
  PCString::set(this + 525, &v6);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"PPaint PType Stroke Range");
  PCString::set(this + 1561, &v6);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"PPaint PType Stroke Range");
  PCString::set(this + 1581, &v6);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"PPaint PType Stroke Range");
  PCString::set(this + 1798, &v6);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"PPaint PType Stroke Range");
  PCString::set(this + 2242, &v6);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"PPaint PType Stroke Range");
  PCString::set(this + 1360, &v6);
  PCString::~PCString(&v6);
  *(this + 9062) = 0;
}

void sub_2602D80D8(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  std::vector<PCPtr<LiMaterialLayer>>::__destroy_vector::operator()[abi:ne200100](&a10);
  PCMutex::~PCMutex((v10 + v13));
  std::vector<PCPtr<LiMaterialLayer>>::__destroy_vector::operator()[abi:ne200100](&a10);
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v10 + v12));
  OZChannelGradient::~OZChannelGradient((v10 + v11));
  PSReplicatorPType::~PSReplicatorPType(v10);
  _Unwind_Resume(a1);
}

void PSPaintPType::~PSPaintPType(PSPaintPType *this)
{
  *this = &unk_2872D9768;
  *(this + 2) = &unk_2872D9E00;
  *(this + 6) = &unk_2872DA058;
  *(this + 136) = &unk_2872DA0B0;
  *(this + 139) = &unk_2872DA188;
  OZSystemSimulator::flushCache((this + 15520), 1, 0);
  OZSystemSimulator::flushCache((this + 15800), 1, 0);
  PGPerThreadSetCurrentContextSentry::PGPerThreadSetCurrentContextSentry(v4);
  v2 = *(this + 2243);
  v3 = *(this + 2244);
  while (v2 != v3)
  {
    if (!*v2)
    {
      throw_PCNullPointerException(1);
    }

    (*(**v2 + 24))(*v2);
    v2 += 2;
  }

  PGPerThreadSetCurrentContextSentry::~PGPerThreadSetCurrentContextSentry(v4);
  v4[0] = (this + 18040);
  std::vector<PCPtr<LiMaterialLayer>>::__destroy_vector::operator()[abi:ne200100](v4);
  PCMutex::~PCMutex((this + 17968));
  v4[0] = (this + 17944);
  std::vector<PCPtr<LiMaterialLayer>>::__destroy_vector::operator()[abi:ne200100](v4);
  *(this + 2223) = &unk_287252908;
  *(this + 2225) = &unk_287252CB8;
  PCString::~PCString(this + 2242);
  OZChanObjectRef::~OZChanObjectRef((this + 17784));
  OZChannelGradient::~OZChannelGradient((this + 16984));
  PSReplicatorPType::~PSReplicatorPType(this);
}

{
  PSPaintPType::~PSPaintPType(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toPSPaintPType::~PSPaintPType(PSPaintPType *this)
{
  PSPaintPType::~PSPaintPType((this - 16));
}

{
  PSPaintPType::~PSPaintPType((this - 48));
}

{
  PSPaintPType::~PSPaintPType((this - 1088));
}

{
  PSPaintPType::~PSPaintPType((this - 1112));
}

{
  PSPaintPType::~PSPaintPType((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSPaintPType::~PSPaintPType((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSPaintPType::~PSPaintPType((this - 1088));

  JUMPOUT(0x2666E9F00);
}

{
  PSPaintPType::~PSPaintPType((this - 1112));

  JUMPOUT(0x2666E9F00);
}

double PSPaintPType::getBounds(PSPaintPType *this, uint64_t a2)
{
  v4 = this + 0x4000;
  __asm { FMOV            V0.2D, #-18.0 }

  *a2 = _Q0;
  *(a2 + 16) = vdupq_n_s64(0x4042000000000000uLL);
  if (*(this + 18125) == 1)
  {
    if ((*(this + 18124) & 1) == 0)
    {
      return *&_Q0;
    }
  }

  else
  {
    IsImageBrush = PSPaintPType::getIsImageBrush(this);
    v4[1740] = IsImageBrush;
    v4[1741] = 1;
    if (!IsImageBrush)
    {
      return *&_Q0;
    }
  }

  *&_Q0 = PSParticleType::getBounds(this, a2).n128_u64[0];
  return *&_Q0;
}

uint64_t PSPaintPType::calcHashForState(PSPaintPType *a1, void *a2, CMTime *a3, uint64_t a4)
{
  result = PSPaintPType::getPaint(a1);
  if (result)
  {
    result = PSPaint::getRotoshape(result);
    if (result)
    {
      v9 = result;
      result = OZChannelBase::isEnabled((result + 25776), 0, 1);
      if (result)
      {
        result = OZChannelBase::isEnabled((v9 + 21760), 0, 1);
        if ((result & 1) == 0)
        {
          if (OZChannel::getValueAsInt((v9 + 25904), MEMORY[0x277CC08F0], 0.0) == 1 || (result = OZChannel::getValueAsInt((v9 + 25904), MEMORY[0x277CC08F0], 0.0), result == 2))
          {

            return PSParticleType::calcHashForState(a1, a2, a3, a4, 1);
          }
        }
      }
    }
  }

  return result;
}

void *PSPaintPType::getPaint(PSPaintPType *this)
{
  result = *(this + 2054);
  if (result)
  {
  }

  return result;
}

void PSPaintPType::cacheSourceNode(PSPaintPType *this)
{
  PSParticleType::cacheSourceNode(this);
  if (PSPaintPType::getIsImageBrush(this))
  {
    v2 = *(this + 2057);
    *&v15.value = *(this + 16440);
    *&v16.value = *(this + 1029);
    v3 = *(this + 2060);
    v15.epoch = v2;
    v16.epoch = v3;
    OZRenderState::OZRenderState(&v14);
    v14.var0 = v15;
    v13 = 0;
    (*(**(this + 2061) + 96))(*(this + 2061), &v13 + 4, &v13, &v14);
    v4 = *&v13;
    time = v16;
    if (CMTimeGetSeconds(&time) > 3.0)
    {
      v5 = *(this + 2061);
      {
        v11 = 0uLL;
        v12 = 0;
        time = v16;
        PC_CMTimeHalve(&time, &v17);
        time = v15;
        v18 = v17;
        PC_CMTimeSaferAdd(&time, &v18, &v11);
        *&v14.var0.var0 = v11;
        v14.var0.var3 = v12;
        (*(**(this + 2061) + 96))(*(this + 2061), &v13 + 4, &v13, &v14);
        if (v4 < *&v13)
        {
          v4 = *&v13;
        }

        v6 = (*(*this + 272))(this);
        OZSceneSettings::getFrameDuration((v6 + 336), &v7);
        time = v15;
        v18 = v16;
        PC_CMTimeSaferAdd(&time, &v18, &v17);
        time = v17;
        *&v18.value = v7;
        v18.epoch = v8;
        PC_CMTimeSaferSubtract(&time, &v18, &v9);
        *&v14.var0.var0 = v9;
        v14.var0.var3 = v10;
        (*(**(this + 2061) + 96))(*(this + 2061), &v13 + 4, &v13, &v14);
        if (v4 < *&v13)
        {
          v4 = *&v13;
        }
      }
    }

    *(this + 4526) = v4;
  }
}

char *PSPaintPType::getIsImageBrush(PSPaintPType *this)
{
  result = PSPaintPType::getPaint(this);
  if (result)
  {
    result = PSPaint::getRotoshape(result);
    if (result)
    {
      if (*(this + 2061))
      {
        return (OZChannel::getValueAsInt((result + 25904), MEMORY[0x277CC08F0], 0.0) == 2);
      }

      else
      {
        return 0;
      }
    }
  }

  return result;
}

uint64_t PSPaintPType::willGetParticleBounds(PSPaintPType *this)
{
  result = (*(*this + 1336))(this);
  if (result != *(this + 2061) || *(this + 4526) < 0.0)
  {
    v3 = *(*this + 1640);

    return v3(this);
  }

  return result;
}

double PSPaintPType::getParticleBounds(PSPaintPType *this, float64x2_t *a2, OZRenderState *a3, float64x2_t *a4)
{
  v8 = this + 0x4000;
  if (*(this + 18125) == 1)
  {
    if ((*(this + 18124) & 1) == 0)
    {
LABEL_3:

      *&result = *&PSPaintPType::getGradientParticleBounds(this, a2, &a3->var0.var0, a4);
      return result;
    }
  }

  else
  {
    IsImageBrush = PSPaintPType::getIsImageBrush(this);
    v8[1740] = IsImageBrush;
    v8[1741] = 1;
    if (!IsImageBrush)
    {
      goto LABEL_3;
    }
  }

  if (*(this + 2061))
  {

    *&result = *&PSParticleType::getImageParticleBounds(this, a2, a3, a4);
  }

  else
  {

    *&result = *&PSParticleType::getPointParticleBounds(this, a2, a3, a4);
  }

  return result;
}

float64x2_t PSPaintPType::getGradientParticleBounds(void **a1, uint64_t a2, __int128 *a3, float64x2_t *a4)
{
  (*(*a1[2054] + 616))(a1[2054]);
  v54 = 1.0;
  v51 = 0x3FF0000000000000;
  v48 = 1.0;
  v46[0] = 0x3FF0000000000000;
  v8 = 0uLL;
  *&v46[1] = 0u;
  v47 = 0u;
  v49 = 0u;
  v50 = 0u;
  v52 = 0u;
  v53 = 0u;
  v9 = *(a2 + 232);
  if (v9)
  {
    v8 = 0uLL;
    v11 = v10;
  }

  else
  {
    v11 = 0;
  }

  v45 = 0x3FF0000000000000;
  v42 = 0x3FF0000000000000;
  v39 = 0x3FF0000000000000;
  v36 = 0x3FF0000000000000;
  v37 = v8;
  v38 = v8;
  v40 = v8;
  v41 = v8;
  v43 = v8;
  v44 = v8;
  PSPaintPType::getRadialParticleMatrix(a1, a3, v11, a2, &v36, v46, 0);
  *&v13.f64[0] = v46[1];
  *&v12.f64[0] = v46[0];
  *&v14.f64[0] = v47;
  *&v15.f64[0] = v46[0];
  v15.f64[1] = *(&v47 + 1);
  __asm { FMOV            V4.2D, #-0.5 }

  v21 = vmulq_f64(v15, _Q4);
  *&_Q4.f64[0] = v46[1];
  _Q4.f64[1] = v48;
  __asm { FMOV            V5.2D, #0.5 }

  v23 = vmulq_f64(_Q4, _Q5);
  v14.f64[1] = *(&v49 + 1);
  v24 = vdivq_f64(vaddq_f64(v14, vsubq_f64(v21, v23)), vdupq_lane_s64(COERCE__INT64(v54 + *(&v52 + 1) * -0.5 - *&v53 * 0.5), 0));
  v13.f64[1] = *(&v47 + 1);
  v12.f64[1] = v48;
  v25 = vmulq_f64(v13, xmmword_260852E50);
  v26 = vmulq_f64(v12, xmmword_2608560D0);
  v27 = vdivq_f64(vaddq_f64(v14, vaddq_f64(v25, v26)), vdupq_lane_s64(COERCE__INT64(v54 + *(&v52 + 1) * 0.5 + *&v53 * -0.5), 0));
  v26.f64[1] = v25.f64[1];
  v28 = vdivq_f64(vaddq_f64(v14, vaddq_f64(v26, v23)), vdupq_lane_s64(COERCE__INT64(v54 + *(&v52 + 1) * 0.5 + *&v53 * 0.5), 0));
  v29 = vbslq_s8(vcgtq_f64(v27, v24), v27, v24);
  v30 = vbslq_s8(vcgtq_f64(v28, v29), v28, v29);
  v31 = vbslq_s8(vcgtq_f64(v24, v27), v27, v24);
  v32 = vbslq_s8(vcgtq_f64(v31, v28), v28, v31);
  v33 = vcgtq_f64(v32, v30);
  v34 = vbslq_s8(v33, v32, v30);
  result = vbslq_s8(v33, v30, v32);
  *a4 = result;
  a4[1] = vsubq_f64(v34, result);
  return result;
}

void PSPaintPType::addProjectedParticleBounds(PSPaintPType *this, uint64_t a2, uint64_t a3, float64x2_t *a4)
{
  v8 = this + 0x4000;
  if (*(this + 18125) == 1)
  {
    if ((*(this + 18124) & 1) == 0)
    {
LABEL_3:

      PSPaintPType::addProjectedGradientParticleBounds(this, a2, a3, a4);
      return;
    }
  }

  else
  {
    IsImageBrush = PSPaintPType::getIsImageBrush(this);
    v8[1740] = IsImageBrush;
    v8[1741] = 1;
    if (!IsImageBrush)
    {
      goto LABEL_3;
    }
  }

  if (*(this + 2061))
  {

    PSParticleType::addProjectedImageParticleBounds(this, a2, a3, a4);
  }

  else
  {

    PSParticleType::addProjectedPointParticleBounds(this, a2, a3, a4);
  }
}

void PSPaintPType::addProjectedGradientParticleBounds(void **a1, uint64_t a2, uint64_t a3, float64x2_t *a4)
{
  v44 = *MEMORY[0x277D85DE8];
  v8 = *(a2 + 8);
  (*(*a1[2054] + 616))(a1[2054]);
  __asm { FMOV            V0.2D, #-0.5 }

  v43[0] = _Q0;
  v43[1] = xmmword_260857C60;
  __asm { FMOV            V1.2D, #0.5 }

  v43[2] = xmmword_260857C70;
  v43[3] = _Q1;
  v43[4] = xmmword_260857C80;
  v43[5] = xmmword_260342EC0;
  v15 = *(a3 + 232);
  if (v15)
  {
  }

  else
  {
    v16 = 0;
  }

  v42 = 0x3FF0000000000000;
  v39 = 0x3FF0000000000000;
  v36 = 0x3FF0000000000000;
  v33 = 1.0;
  v34 = 0u;
  v35 = 0u;
  v37 = 0u;
  v38 = 0u;
  v40 = 0u;
  v41 = 0u;
  v17 = a2 + 1504;
  if (*(a2 + 1498) == 1 && (a2 + 1504) != &v33)
  {
    for (i = 0; i != 128; i += 32)
    {
      v19 = (&v33 + i);
      v20 = *(v17 + i + 16);
      *v19 = *(v17 + i);
      v19[1] = v20;
    }
  }

  v32 = 0x3FF0000000000000;
  v29 = 0x3FF0000000000000;
  v26 = 0x3FF0000000000000;
  v23 = 0x3FF0000000000000;
  v24 = 0uLL;
  v25 = 0uLL;
  v27 = 0uLL;
  v28 = 0uLL;
  v30 = 0uLL;
  v31 = 0uLL;
  PSPaintPType::getRadialParticleMatrix(a1, v8, v16, a3, &v33, &v23, *(a2 + 1497));
  PCMatrix44Tmpl<double>::leftMult(&v23, (a2 + 1632));
  for (j = 0; j != 96; j += 24)
  {
    PCMatrix44Tmpl<double>::transform<double>(&v23, (v43 + j), (v43 + j));
    v22 = *(v43 + j);
    PCRect<double>::operator|=(a4, &v22);
  }
}

unint64_t PSPaintPType::estimateRenderMemory(PSPaintPType *a1)
{
  if (!PSPaintPType::getIsImageBrush(a1))
  {
    return 0;
  }

  return PSParticleType::estimateRenderMemoryImageParticle(a1);
}

unint64_t PSPaintPType::estimateRenderMemoryBallpark(PSPaintPType *this, const OZRenderParams *a2, BOOL *a3)
{
  if (!PSPaintPType::getIsImageBrush(this))
  {
    return 0;
  }

  return PSParticleType::estimateRenderMemoryImageBallpark(this, a2, a3);
}

void PSPaintPType::addSprite(PSPaintPType *this, PSEmitter::RenderParams *a2, PSParticle *a3, OZSimStateElement *a4, PSHeliumNode *a5)
{
  v10 = this + 0x4000;
  if (*(this + 18125) == 1)
  {
    if ((*(this + 18124) & 1) == 0)
    {
LABEL_3:

      PSPaintPType::addRadialSprite(this, a2, a3, a4, a5);
      return;
    }
  }

  else
  {
    IsImageBrush = PSPaintPType::getIsImageBrush(this);
    v10[1740] = IsImageBrush;
    v10[1741] = 1;
    if (!IsImageBrush)
    {
      goto LABEL_3;
    }
  }

  PSParticleType::addSprite(this, a2, a3, a4, a5);
}

void PSPaintPType::addRadialSprite(PSPaintPType *this, PSEmitter::RenderParams *a2, PSParticle *a3, OZSimStateElement *a4, PSHeliumNode *a5)
{
  v37 = 0x3FF0000000000000;
  v34 = 0x3FF0000000000000;
  v31 = 0x3FF0000000000000;
  v28 = 0x3FF0000000000000;
  v29 = 0u;
  v30 = 0u;
  v32 = 0u;
  v33 = 0u;
  v35 = 0u;
  v36 = 0u;
  PSPaintPType::getRadialParticleMatrix(this, *(a2 + 1), a3, a4, a2 + 188, &v28, *(a2 + 1497));
  if (fabs(PCMatrix44Tmpl<double>::determinant(&v28)) >= 0.0000001)
  {
    v9 = *(a2 + 1);
    v10 = *(v9 + 2);
    v26 = *v9;
    v27 = v10;
    WorkingColorDescription = OZRenderParams::getWorkingColorDescription(v9);
    OZEaseInInterpolator::~OZEaseInInterpolator(WorkingColorDescription);
    v13 = v12;
    DynamicRange = FxColorDescription::getDynamicRange(WorkingColorDescription);
    ToneMapMethod = FxColorDescription::getToneMapMethod(WorkingColorDescription);
    PCWorkingColor::PCWorkingColor(&v24, v13, DynamicRange, ToneMapMethod, 0.0, 0.0, 0.0, 0.0);
    (*(*this + 1600))(this, &v26, a3, *a2, &v24);
    __asm
    {
      FMOV            V0.2D, #-0.5
      FMOV            V1.2D, #1.0
    }

    v23[0] = _Q0;
    v23[1] = _Q1;
    PCWorkingColor::operator=(&v22, &v24);
    PSHeliumNode::addRadialParticle(a5, &v28, v23, &v22, *(this + 16528));
    PCCFRef<CGColorSpace *>::~PCCFRef(&v25);
  }
}

void sub_2602D9474(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, ...)
{
  va_start(va, a10);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void PSPaintPType::getSourceRender(PSPaintPType *this@<X0>, const OZRenderParams *a2@<X1>, const CMTime *a3@<X2>, int a4@<W3>, PCSharedCount *a5@<X8>)
{
  if (PSPaintPType::getPaint(this) && (Paint = PSPaintPType::getPaint(this), PSPaint::getRotoshape(Paint)) && (v11 = PSPaintPType::getPaint(this), Rotoshape = PSPaint::getRotoshape(v11), ValueAsInt = OZChannel::getValueAsInt((Rotoshape + 25904), MEMORY[0x277CC08F0], 0.0), ValueAsInt != 2))
  {
    if (ValueAsInt == 1)
    {
      operator new();
    }

    if (!ValueAsInt)
    {
      operator new();
    }

    a5->var0 = 0;

    PCSharedCount::PCSharedCount(a5 + 1, 0);
  }

  else
  {

    PSParticleType::getSourceRender(this, a2, a3, a4, a5);
  }
}

void PSPaintPType::updateGradientStringName(PSPaintPType *this, char a2)
{
  if ((a2 & 1) == 0)
  {
    if ((*(*this + 272))(this))
    {
      v4 = *((*(*this + 272))(this) + 1584);
      if (v4)
      {
        v5 = *(v4 + 168);
        if (!v5 || !OZNotificationManager::wasChannelModified(v5, (this + 6784)))
        {
          PCSharedCount::PCSharedCount(&v7);
          OZChannelBase::addToUndo((this + 6784), &v7);
          PCString::~PCString(&v7);
        }
      }
    }
  }

  ValueAsInt = OZChannel::getValueAsInt((this + 5368), MEMORY[0x277CC08F0], 0.0);
  switch(ValueAsInt)
  {
    case 3:
      OZChannelBase::resetFlag((this + 6912), 2, a2);
      PCURL::PCURL(&v7, @"PPaint PType Color Range");
      OZChannelBase::setName((this + 6784), &v7, 0);
      break;
    case 2:
      PCURL::PCURL(&v7, @"PPaint PType Color Over Stroke");
      OZChannelBase::setName((this + 6784), &v7, 0);
      break;
    case 1:
      OZChannelBase::setFlag((this + 6912), 2, a2);
      PCURL::PCURL(&v7, @"PPaint PType Opacity Over Stroke");
      OZChannelBase::setName((this + 6784), &v7, 0);
      break;
    default:
      return;
  }

  PCString::~PCString(&v7);
}

void PSPaintPType::updateRotationStringNames(PSPaintPType *this)
{
  v2 = *(this + 2054);
  if (v2 && !OZChannel::getValueAsInt((v2 + 32792), MEMORY[0x277CC08F0], 0.0))
  {
    PCURL::PCURL(&v3, @"PPaint PType Rotation");
    OZChannelBase::setName((this + 2776), &v3, 0);
    PCString::~PCString(&v3);
    PCURL::PCURL(&v3, @"PPaint PType Rotation Variance");
    OZChannelBase::setName((this + 4648), &v3, 0);
  }

  else
  {
    PCString::PCString(&v3, "Channel Z", "com.apple.prochannel.framework");
    OZChannelBase::setName((this + 2776), &v3, 0);
    PCString::~PCString(&v3);
    PCString::PCString(&v3, "Channel Z", "com.apple.prochannel.framework");
    OZChannelBase::setName((this + 4648), &v3, 0);
  }

  PCString::~PCString(&v3);
}

double PSPaintPType::getInitialParticleColor(PSPaintPType *this, const CMTime *a2, Float64 *a3, int a4, PCColor *a5)
{
  v24 = *MEMORY[0x277D85DE8];
  if (OZChannel::getValueAsInt((this + 5368), a2, 0.0) == 1)
  {
    v10 = (*(**(this + 2054) + 616))(*(this + 2054));
    PCColor::PCColor(&v22);
    (*(*(v10 + 26160) + 832))(v10 + 26160, a2, &v22);
    v11 = *&v22.var0.var1[1];
    *&a5->var0.var0 = *&v22.var0.var0;
    *&a5->var0.var1[1] = v11;
    *&a5->var0.var1[3] = *&v22.var0.var1[3];
    PCCFRef<CGColorSpace *>::operator=(&a5->var1._obj, &v22.var1._obj);
    OZChannel::getValueAsDouble((v10 + 27168), a2, 0.0);
    *&v12 = v12;
    PCColor::setAlpha(a5, *&v12);
    OZChannelDoubleOverRange::getValueOverRangeAsDouble(this + 117, a2, a3[21]);
    v14 = v13;
    v21[0] = 0;
    v21[1] = 0;
    v20 = v21;
    (*(*(this + 880) + 728))(this + 7040, a2, &v20);
    (*(*(this + 880) + 736))(this + 7040, v23, &v20, a3[21]);
    v15 = v23[0];
    v16 = v14 * v15 * PCColor::getAlpha(a5);
    PCColor::setAlpha(a5, v16);
    std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&v20, v21[0]);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v22.var1._obj);
  }

  else
  {
    PSReplicatorPType::getInitialParticleColor(this, a2, a3, a4, a5);
    OZChannelDoubleOverRange::getValueOverRangeAsDouble(this + 117, a2, a3[21]);
    v19 = v18 * PCColor::getAlpha(a5);

    return PCColor::setAlpha(a5, v19);
  }

  return result;
}

void sub_2602D9C40(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, ...)
{
  va_start(va, a11);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

double PSPaintPType::getInitialParticleScale(PSPaintPType *this, const CMTime *a2, uint64_t a3, uint64_t a4, double *a5, double *a6)
{
  v11 = (this + 0x4000);
  if (*(this + 18125) != 1)
  {
    IsImageBrush = PSPaintPType::getIsImageBrush(this);
    *(v11 + 1740) = IsImageBrush;
    *(v11 + 1741) = 1;
    v12 = 1.0;
    if (!IsImageBrush)
    {
      goto LABEL_6;
    }

    goto LABEL_5;
  }

  v12 = 1.0;
  if (*(this + 18124))
  {
LABEL_5:
    v12 = v11[430];
  }

LABEL_6:
  v14 = (*(**(this + 2054) + 616))(*(this + 2054));
  OZChannel::getValueAsDouble((v14 + 27320), a2, 0.0);
  if (v15 >= 3.0)
  {
    v16 = v15;
  }

  else
  {
    v16 = 3.0;
  }

  OZChannelDoubleOverRange::getValueOverRangeAsDouble((this + 12496), a2, *(a3 + 168));
  v18 = v17 * (v16 / v12);
  *a5 = v18;
  a5[1] = v18;
  result = v17 * v16;
  *a6 = result;
  a6[1] = result;
  return result;
}

void PSPaintPType::applyAllScaleOverLifeBehaviors(uint64_t a1, __int128 *a2, CMTime *a3, CMTime *a4, uint64_t a5)
{
  v10 = (*(**(a1 + 16432) + 616))(*(a1 + 16432));
  if (v10)
  {
    v11 = v10;
    memset(&v13, 0, sizeof(v13));
    v12 = (*(*(*(a1 + 16432) + 200) + 272))();
    OZSceneSettings::getFrameDuration((v12 + 336), &v13);
    PSParticleType::applyScaleOverLifeBehaviors(a1, (v11 + 1200), a2, a3, a4, &v13, a5);
  }
}

void PSPaintPType::applyAllSequenceBehaviors(PSPaintPType *this, CMTime *a2, const PSParticle *a3, PSSequencedValues *a4)
{
  v8 = (*(**(this + 2054) + 616))(*(this + 2054));
  if (v8)
  {
    v9 = *(a3 + 21);

    PSParticleType::applySequenceBehaviors(v9, this, (v8 + 1200), a2, this, a4);
  }
}

void PSPaintPType::getAllSequenceBehaviors(uint64_t a1, int32x4_t *a2, uint64_t a3)
{
  v6 = (*(**(a1 + 16432) + 616))(*(a1 + 16432));
  if (v6)
  {

    PSParticleType::getSequenceBehaviors(a1, (v6 + 1200), a2, a3);
  }
}

void *PSPaintPType::disableSourceNode(PSPaintPType *this)
{
  result = OZChanSceneNodeRef::getNode((this + 14392));
  if (result)
  {
    v2 = *(result[2] + 40);

    return v2();
  }

  return result;
}

BOOL PSPaintPType::simShouldCache(PSPaintPType *this)
{
  v1 = (*(**(this + 2054) + 616))(*(this + 2054));
  if (v1 && (v2 = v1, !OZChannel::getValueAsInt((v1 + 33256), MEMORY[0x277CC08F0], 0.0)))
  {
    return OZMoShape::getFreehandPaintVertices((v2 + 18976)) == 0;
  }

  else
  {
    return 1;
  }
}

uint64_t PSPaintPType::simAddObjects(PSPaintPType *this, OZSystemSimulator *a2, OZSimStateArray *a3, double a4)
{
  v7 = (*(**(this + 2054) + 616))(*(this + 2054), a4);
  if (!OZChannel::getValueAsInt((v7 + 33256), MEMORY[0x277CC08F0], 0.0) && OZMoShape::getFreehandPaintVertices((v7 + 18976)))
  {
    PSPaintPType::interactiveSimAddObjects(this, a2, a3, v12);
    return 0;
  }

  v40 = *(a3 + 1);
  if ((this + 15520) == a2)
  {
    v8 = 0;
    LODWORD(v11) = 0;
    v9 = *(this + 2258);
    v39 = v9;
    v10 = *(this + 4518);
    v38 = *(this + 4518);
  }

  else if ((this + 15800) == a2)
  {
    v9 = *(this + 2260);
    v39 = v9;
    v10 = *(this + 4522);
    v38 = *(this + 4522);
    v8 = 1;
    LODWORD(v11) = 1;
  }

  else
  {
    v8 = 0;
    v9 = *(this + 2258);
    v39 = v9;
    v10 = *(this + 4518);
    v38 = *(this + 4518);
    LODWORD(v11) = 2;
  }

  v13 = (*(*this + 1656))(this);
  v15 = v13;
  if (!v9)
  {
    __y = v40;
    if (v13)
    {
      (*(*this + 1440))(&v41, this, &v40);
      __y = v41;
      PSPaintPType::initAllEmissionPoints(this, &__y, v23, &v39, &v38);
    }

    else
    {
      PSPaintPType::initAllEmissionPoints(this, &__y, v14, &v39, &v38);
      if (!PSPaintPType::getIsSpacingConstantOverTime(this) || (Paint = PSPaintPType::getPaint(this), v25 = (*(*Paint + 616))(Paint), (OZShape::isShapeContourAnimated((v25 + 18976)) & 1) != 0))
      {
        operator new();
      }
    }

    v9 = v39;
    if (v8)
    {
      *(this + 2260) = v39;
      v10 = v38;
      *(this + 4522) = v38;
    }

    else
    {
      *(this + 2258) = v39;
      v10 = v38;
      *(this + 4518) = v38;
    }
  }

  if (v10)
  {
    OZChannel::getValueAsDouble((v7 + 28952), &v40, 0.0);
    v17 = v16;
    OZChannel::getValueAsDouble((v7 + 29104), &v40, 0.0);
    v19 = v18;
    OZChannel::getValueAsDouble((v7 + 29568), &v40, 0.0);
    if (v17 >= v19)
    {
      return 0;
    }

    v21 = v20;
    if (vabdd_f64(v17, v19) < 0.0000001)
    {
      return 0;
    }

    __y.value = 0;
    modf(v20, &__y.value);
    v26 = v21 - *&__y.value;
    if (v21 - *&__y.value < 0.0)
    {
      v26 = v26 + 1.0;
    }

    v27 = v17 + v26;
    v28 = v19 + v26;
    if (OZChannel::getValueAsInt((v7 + 20304), MEMORY[0x277CC08F0], 0.0))
    {
      if (v27 > 1.0)
      {
        v27 = v27 + -1.0;
      }

      v29 = v28 <= 1.0;
      v30 = v28 + -1.0;
    }

    else
    {
      if (v27 > 1.0)
      {
        return 0;
      }

      v30 = 1.0;
      v29 = v28 <= 1.0;
    }

    if (!v29)
    {
      v28 = v30;
    }

    if (v15)
    {
      if (*(this + 18092))
      {
        v11 = v11;
      }

      else
      {
        v36 = 0uLL;
        v37 = 0;
        v31 = (*(*(*(this + 2054) + 200) + 272))();
        OZSceneSettings::getFrameDuration((v31 + 336), &v36);
        memset(&v35, 0, sizeof(v35));
        __y = v40;
        *&v41.value = v36;
        v41.epoch = v37;
        PC_CMTimeSaferSubtract(&__y, &v41, &v35);
        OZChannel::getValueAsDouble((v7 + 28952), &v35, 0.0);
        v33 = v32;
        OZChannel::getValueAsDouble((v7 + 29104), &v35, 0.0);
        if (fabs(v27) >= 0.0000001 || fabs(v28 + -1.0) >= 0.0000001 || fabs(v33) >= 0.0000001 || fabs(v34 + -1.0) >= 0.0000001)
        {
          PSPaintPType::birthParticlesInStroke(this, v27, v28, v33, v34, a3, v9, v10);
        }

        else
        {
          PSPaintPType::birthAllParticles(this, a3, v9, v10);
        }

        v11 = v11;
        v9 = v39;
      }

      v10 = PSPaintPType::addBornParticlesToSim(this, a3, v9, v10);
    }

    else
    {
      if (fabs(v27) >= 0.0000001 || fabs(v28 + -1.0) >= 0.0000001)
      {
        v10 = PSPaintPType::birthAndAddParticlesInStroke(this, v27, v28, a3, v9, v10);
      }

      else
      {
        PSPaintPType::birthAndAddAllParticles(this, a3, v9, v10);
      }

      v11 = v11;
    }

    PSEmitter::initParticles(*(this + 2054), v11, this, v10, 0, a3);
  }

  return v10;
}

uint64_t PSPaintPType::interactiveSimAddObjects(PSPaintPType *this, OZSystemSimulator *a2, OZSimStateArray *a3, double a4)
{
  v6 = this;
  v7 = (*(**(this + 2054) + 616))(*(this + 2054), a4);
  if (v6 + 1975 == a2)
  {
    v8 = 1;
  }

  else
  {
    v8 = 2;
  }

  if (v6 + 1940 == a2)
  {
    v9 = 0;
  }

  else
  {
    v9 = v8;
  }

  v83 = *(a3 + 1);
  memset(&v82, 0, sizeof(v82));
  v10 = (*(*(*(v6 + 2054) + 200) + 272))();
  OZSceneSettings::getFrameDuration((v10 + 336), &v82);
  FreehandPaintVertices = OZMoShape::getFreehandPaintVertices((v7 + 18976));
  if (FreehandPaintVertices[1] != *FreehandPaintVertices)
  {
    v11 = *(v6 + 2258);
    if (!v11)
    {
      operator new[]();
    }

    OZChannel::getValueAsDouble((v6 + 1523), &v83, 0.0);
    v13 = v12;
    OZChannel::getValueAsDouble((v7 + 27320), &v83, 0.0);
    if (v14 < 3.0)
    {
      v14 = 3.0;
    }

    v15 = v13 * v14;
    if (fabs(v15) >= 0.0000001)
    {
      v66 = v9;
      v67 = a3;
      v16 = 0;
      v17 = FreehandPaintVertices;
      v18 = FreehandPaintVertices[1] - *FreehandPaintVertices;
      v19 = *(v6 + 4530);
      v20 = v6[2264];
      v63 = v11;
      v64 = v18 >> 4;
      v65 = v6 + 2048;
      if (v19 < (v18 >> 4))
      {
        v21 = *(v6 + 4518);
        if (v21 < 0x4000)
        {
          v16 = 0;
          if (v19 <= 1)
          {
            v22 = 1;
          }

          else
          {
            v22 = *(v6 + 4530);
          }

          v23 = *(*FreehandPaintVertices + 16 * v22 - 16);
          v24 = (v18 >> 4);
          v71 = v11 + 224;
          v73 = 1.0 / v15;
          v72 = v6;
          v68 = v24;
          do
          {
            v25 = *(*v17 + 16 * v19);
            v26 = vsubq_f64(v25, v23);
            v27 = sqrt(vaddvq_f64(vmulq_f64(v26, v26)));
            v76 = ceil(v27);
            if (v76 <= 0.0)
            {
              ++v19;
            }

            else
            {
              v70 = *(*v17 + 16 * v19);
              v77 = v26;
              v78 = v23;
              v28 = 0;
              v75 = v19++;
              v29 = fabs(v27);
              if (v29 < 0.000000100000001)
              {
                v30 = v26.f64[0];
              }

              else
              {
                v30 = v26.f64[0] / v27;
              }

              if (v29 < 0.000000100000001)
              {
                v31 = -v26.f64[1];
              }

              else
              {
                v31 = -v26.f64[1] / v27;
              }

              v32 = 0.0;
              do
              {
                v33 = v32 / v27 + v75;
                OZChannelDoubleOverRange::getValueOverRangeAsDouble((v6 + 1542), &v83, v33);
                v35 = v34;
                OZChannelDoubleOverRange::getValueOverRangeAsDouble((v6 + 1562), &v83, v33);
                if (fabs(v36) >= 0.0000001 && fabs(v35) >= 0.0000001)
                {
                  v37 = v20 + v73 * (1.0 / (v35 * v36));
                  __y.value = 0;
                  modf(v37, &__y.value);
                  v38 = v20;
                  v39 = *&__y.value;
                  __y.value = 0;
                  modf(v38, &__y.value);
                  v40 = v39 - *&__y.value;
                  v41 = v38;
                  v42 = v40;
                  __y.value = 0;
                  modf(v38, &__y.value);
                  if (v42 < 1)
                  {
                    v20 = v37;
                  }

                  else
                  {
                    v74 = v37;
                    v43 = v37 - v38;
                    v44 = *&__y.value - v41;
                    v45 = v21;
                    v46 = (v71 + 232 * v21);
                    v47 = 1;
                    v48 = 1.0;
                    do
                    {
                      LODWORD(v46->f64[0]) = v19;
                      v46[-4].f64[1] = v33;
                      v46[-3].f64[0] = v45;
                      v46[-2] = vaddq_f64(v78, vmulq_n_f64(v77, (v32 + (v44 + v48) / v43) / v27));
                      v46[-1].f64[0] = v31;
                      v46[-1].f64[1] = v30;
                      operator*(&v82, &v79, 0.01);
                      __y = v83;
                      v84 = v79;
                      PC_CMTimeSaferSubtract(&__y, &v84, &v80);
                      v49 = v80;
                      v46[-13].f64[1] = v81;
                      *(v46 - 216) = v49;
                      LOBYTE(v46[-3].f64[1]) = 1;
                      v21 = v45 + 1;
                      ++v16;
                      if (v47 >= v42)
                      {
                        break;
                      }

                      v48 = v48 + 1.0;
                      ++v47;
                      v46 = (v46 + 232);
                    }

                    while (v45++ < 0x3FFF);
                    v20 = v74;
                    v6 = v72;
                  }
                }

                v32 = ++v28;
              }

              while (v76 > v28 && v21 < 0x4000);
              v24 = v68;
              v17 = FreehandPaintVertices;
              v25 = v70;
            }

            if (v19 >= v24)
            {
              break;
            }

            v23 = v25;
          }

          while (v21 < 0x4000);
        }
      }

      v51 = (*(*v6 + 1656))(v6);
      v52 = *(v65 + 422) + v16;
      if (v51)
      {
        v53 = *(v65 + 422);
      }

      else
      {
        v53 = 0;
      }

      if (v51)
      {
        v54 = v16;
      }

      else
      {
        v54 = v52;
      }

      *(v65 + 422) = v52;
      v55 = (*(v67 + 1) - *v67) >> 3;
      v56 = -1108378657 * v55;
      std::vector<OZSimStateElement>::resize(v67, (v54 - 1108378657 * v55));
      v57 = *(v65 + 422);
      v58 = v57 >= v53;
      v59 = v57 - v53;
      if (v59 != 0 && v58)
      {
        v60 = v63 + 232 * v53;
        v61 = *v67;
        do
        {
          *(v61 + 248 * v56++ + 232) = v60;
          v60 += 232;
          --v59;
        }

        while (v59);
      }

      PSEmitter::initParticles(*(v6 + 2054), v66, v6, v54, 0, v67);
      v6[2264] = v20;
      *(v65 + 434) = v64;
    }
  }

  return 0;
}

void sub_2602DAC78(_Unwind_Exception *a1)
{
  if (v1)
  {
    v6 = (v2 - 216);
    v7 = -v1;
    do
    {
      PSParticle::~PSParticle(v6);
      v6 = (v8 - 232);
      v7 += 232;
    }

    while (v7);
  }

  MEMORY[0x2666E9ED0](v4, v3);
  _Unwind_Resume(a1);
}

void PSPaintPType::initAllEmissionPoints(PSPaintPType *this, const CMTime *a2, unsigned int a3, PSParticle **a4, unsigned int *a5)
{
  v10 = 0;
  v11 = 0;
  v12 = 0;
  if (PSPaintPType::getNumEmissionPointsAndOrders(this, a2))
  {
    OZRenderState::OZRenderState(&v9);
    *&v9.var0.var0 = *&a2->value;
    v9.var0.var3 = a2->epoch;
    v7 = (*(**(this + 2054) + 616))(*(this + 2054));
    v8 = v7;
    if (v7)
    {
      if (OZShape::isGeometricShape((v7 + 18976)) || OZDynamicCurve::getNumberOfValidKeypoints(v8 + 4868, a2))
      {
        operator new[]();
      }
    }
  }

  if (v10)
  {
    v11 = v10;
    operator delete(v10);
  }
}

void sub_2602DAFA8(_Unwind_Exception *exception_object)
{
  v3 = *(v1 - 128);
  if (v3)
  {
    *(v1 - 120) = v3;
    operator delete(v3);
  }

  _Unwind_Resume(exception_object);
}

uint64_t PSPaintPType::getIsSpacingConstantOverTime(PSPaintPType *this)
{
  v2 = (*(**(this + 2054) + 616))(*(this + 2054));
  if (OZChannel::hasMoreThanOneKeypoint((this + 12184)))
  {
    return 0;
  }

  v3 = (v2 + 27320);
  if ((*(*v3 + 560))(v3) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((this + 12184), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors(v3, 1))
  {
    return 0;
  }

  else
  {
    return PSPaintPType::getIsWidthSequenced(this, MEMORY[0x277CC08F0], 0) ^ 1;
  }
}

uint64_t PSPaintPType::birthAndAddAllParticles(PSPaintPType *this, OZSimStateArray *a2, PSParticle *a3, uint64_t a4)
{
  memset(&v16, 0, sizeof(v16));
  v18 = *(a2 + 1);
  v8.n128_f64[0] = PSParticleType::simGetFirstFrame(this, &v16);
  memset(&v15, 0, sizeof(v15));
  v9 = (*(*(*(this + 2054) + 200) + 272))(v8);
  OZSceneSettings::getFrameDuration((v9 + 336), &v18);
  operator*(&v18, &v15, 0.01);
  v10 = -1108378657 * ((*(a2 + 1) - *a2) >> 3);
  std::vector<OZSimStateElement>::resize(a2, v10 + a4);
  if (a4)
  {
    v11 = a4;
    do
    {
      v18 = v16;
      v17 = v15;
      PC_CMTimeSaferSubtract(&v18, &v17, &v13);
      *(a3 + 8) = v13;
      *(a3 + 3) = v14;
      *(a3 + 184) = 1;
      *(*a2 + 248 * v10++ + 232) = a3;
      a3 = (a3 + 232);
      --v11;
    }

    while (v11);
  }

  return a4;
}

uint64_t PSPaintPType::birthAndAddParticlesInStroke(PSPaintPType *this, double a2, double a3, OZSimStateArray *a4, PSParticle *a5, unsigned int a6)
{
  memset(&v49, 0, sizeof(v49));
  v51 = *(a4 + 1);
  v12.n128_f64[0] = PSParticleType::simGetFirstFrame(this, &v49);
  memset(&v48, 0, sizeof(v48));
  v13 = (*(*(*(this + 2054) + 200) + 272))(v12);
  OZSceneSettings::getFrameDuration((v13 + 336), &v51);
  operator*(&v51, &v48, 0.01);
  v14 = a5;
  v15 = a5;
  if (a6)
  {
    v16 = a6;
    v14 = a5;
    v17 = a6;
    do
    {
      v18 = v17 >> 1;
      v19 = (v14 + 232 * (v17 >> 1));
      v20 = v19[21];
      v21 = (v19 + 29);
      v17 += ~(v17 >> 1);
      if (v20 < a2)
      {
        v14 = v21;
      }

      else
      {
        v17 = v18;
      }
    }

    while (v17);
    v15 = a5;
    do
    {
      v22 = v16 >> 1;
      v23 = (v15 + 232 * (v16 >> 1));
      v24 = v23[21];
      v25 = (v23 + 29);
      v16 += ~(v16 >> 1);
      if (v24 < a3)
      {
        v15 = v25;
      }

      else
      {
        v16 = v22;
      }
    }

    while (v16);
  }

  v26 = 0x34F72C234F72C235 * ((v14 - a5) >> 3);
  v27 = 1332920885 * ((v15 - a5) >> 3);
  v28 = *(a5 + 29 * v26 + 21);
  if (v28 >= a2)
  {
    v29 = 1332920885 * ((v14 - a5) >> 3);
  }

  else
  {
    v29 = v26 + 1;
  }

  v30 = a6 - 1;
  if (v29 >= (a6 - 1))
  {
    v31 = a6 - 1;
  }

  else
  {
    v31 = v29;
  }

  if (v27 >= v30)
  {
    v32 = a6 - 1;
  }

  else
  {
    v32 = 1332920885 * ((v15 - a5) >> 3);
  }

  if (v31 <= v27)
  {
    v33 = 0;
  }

  else
  {
    v33 = a6;
  }

  v34 = v32 - v31 + v33 + 1;
  v35 = (*(a4 + 1) - *a4) >> 3;
  v36 = -1108378657 * v35;
  std::vector<OZSimStateElement>::resize(a4, (v34 - 1108378657 * v35));
  v37 = v26;
  if (v31 <= v27)
  {
    if (v28 < a2)
    {
      v37 = v26 + 1;
    }

    if (v37 >= v30)
    {
      v37 = v30;
    }

    if (v31 <= v32)
    {
      v42 = v32;
    }

    else
    {
      v42 = v31;
    }

    v43 = a5 + 232 * v37;
    v44 = v42 - v31 + 1;
    do
    {
      v51 = v49;
      v50 = v48;
      PC_CMTimeSaferSubtract(&v51, &v50, &v46);
      *(v43 + 8) = v46;
      *(v43 + 3) = v47;
      v43[184] = 1;
      *(*a4 + 248 * v36++ + 232) = v43;
      v43 += 232;
      --v44;
    }

    while (v44);
  }

  else
  {
    v38 = __OFSUB__(a6, v31);
    v39 = a6 - v31;
    if (!((v39 < 0) ^ v38 | (v39 == 0)))
    {
      if (v28 < a2)
      {
        v37 = v26 + 1;
      }

      if (v37 >= v30)
      {
        v37 = v30;
      }

      v40 = a5 + 232 * v37;
      do
      {
        v51 = v49;
        v50 = v48;
        PC_CMTimeSaferSubtract(&v51, &v50, &v46);
        *(v40 + 8) = v46;
        *(v40 + 3) = v47;
        v40[184] = 1;
        *(*a4 + 248 * v36++ + 232) = v40;
        v40 += 232;
        --v39;
      }

      while (v39);
    }

    if ((v32 & 0x80000000) == 0)
    {
      v41 = (v32 + 1);
      do
      {
        v51 = v49;
        v50 = v48;
        PC_CMTimeSaferSubtract(&v51, &v50, &v46);
        *(a5 + 8) = v46;
        *(a5 + 3) = v47;
        *(a5 + 184) = 1;
        *(*a4 + 248 * v36++ + 232) = a5;
        a5 = (a5 + 232);
        --v41;
      }

      while (v41);
    }
  }

  return v34;
}

void PSPaintPType::birthParticlesInStroke(PSPaintPType *this, double a2, double a3, double a4, double a5, OZSimStateArray *a6, PSParticle *a7, unsigned int a8)
{
  if (vabdd_f64(a2, a3) < 0.0000001)
  {
    return;
  }

  v79 = *(a6 + 1);
  memset(&v78, 0, sizeof(v78));
  v14 = (*(*(*(this + 2054) + 200) + 272))();
  OZSceneSettings::getFrameDuration((v14 + 336), &v78);
  v15 = a8;
  v16 = a7;
  v17 = a7;
  if (a8)
  {
    v16 = a7;
    v18 = a8;
    do
    {
      v19 = v18 >> 1;
      v20 = (v16 + 232 * (v18 >> 1));
      v21 = v20[21];
      v22 = (v20 + 29);
      v18 += ~(v18 >> 1);
      if (v21 < a2)
      {
        v16 = v22;
      }

      else
      {
        v18 = v19;
      }
    }

    while (v18);
    v17 = a7;
    v23 = a8;
    do
    {
      v24 = v23 >> 1;
      v25 = (v17 + 232 * (v23 >> 1));
      v26 = v25[21];
      v27 = (v25 + 29);
      v23 += ~(v23 >> 1);
      if (v26 < a3)
      {
        v17 = v27;
      }

      else
      {
        v23 = v24;
      }
    }

    while (v23);
  }

  v28 = 0x34F72C234F72C235 * ((v16 - a7) >> 3);
  v29 = 1332920885 * ((v17 - a7) >> 3);
  v30 = *(a7 + 29 * v28 + 21);
  v31 = v30 < a2;
  if (v30 >= a2)
  {
    v32 = v28;
  }

  else
  {
    v32 = v28 + 1;
  }

  if (v29 >= (a8 - 1))
  {
    v33 = a8 - 1;
  }

  else
  {
    v33 = v29;
  }

  v34 = 0.0;
  v35 = a2 < a4;
  v36 = 0.0;
  v37 = v32;
  if (v35)
  {
    if (a8)
    {
      v38 = a7;
      v39 = a8;
      do
      {
        v40 = v39 >> 1;
        v41 = (v38 + 232 * (v39 >> 1));
        v42 = v41[21];
        v43 = (v41 + 29);
        v39 += ~(v39 >> 1);
        if (v42 < a4)
        {
          v38 = v43;
        }

        else
        {
          v39 = v40;
        }
      }

      while (v39);
    }

    else
    {
      v38 = a7;
    }

    v44 = 0x34F72C234F72C235 * ((v38 - a7) >> 3);
    if (*(a7 + 29 * v44 + 21) >= a4)
    {
      v37 = 1332920885 * ((v38 - a7) >> 3);
    }

    else
    {
      v37 = v44 + 1;
    }

    if (v37 <= v32)
    {
      v36 = 0.0;
    }

    else
    {
      v36 = 1.0 / (v37 - v32);
    }
  }

  if (a3 <= a5)
  {
    v50 = v33;
  }

  else
  {
    if (a8)
    {
      v45 = a7;
      do
      {
        v46 = v15 >> 1;
        v47 = (v45 + 232 * (v15 >> 1));
        v48 = v47[21];
        v49 = (v47 + 29);
        v15 += ~(v15 >> 1);
        if (v48 < a5)
        {
          v45 = v49;
        }

        else
        {
          v15 = v46;
        }
      }

      while (v15);
    }

    else
    {
      v45 = a7;
    }

    v51 = 1332920885 * ((v45 - a7) >> 3);
    if (v51 >= (a8 - 1))
    {
      v50 = a8 - 1;
    }

    else
    {
      v50 = 1332920885 * ((v45 - a7) >> 3);
    }

    if (v33 > v51)
    {
      v34 = 1.0 / (v33 - v50);
    }
  }

  if (v33 >= v32)
  {
    v63 = v32;
    v64 = v50;
    v65 = v37;
    v66 = v33;
    v67 = a7 + 232 * v32 + 184;
    v68 = ~v50 + v31 + v28;
    v69 = ~v32 + v37;
    while ((*v67 & 1) != 0)
    {
LABEL_80:
      v67 += 232;
      ++v68;
      --v69;
      if (v63++ >= v66)
      {
        return;
      }
    }

    if (v63 >= v65)
    {
      v71 = 0.01;
      if (v63 <= v64)
      {
LABEL_79:
        operator*(&v78, &v75, v71);
        v81[0] = v79;
        v80 = v75;
        PC_CMTimeSaferSubtract(v81, &v80, &v76);
        *(v67 - 11) = v76;
        *(v67 - 20) = v77;
        *v67 = 1;
        goto LABEL_80;
      }

      v70 = v34 * v68;
    }

    else
    {
      v70 = v36 * v69;
    }

    v71 = 1.0 - v70;
    goto LABEL_79;
  }

  v73 = v33;
  v74 = v37;
  if (v32 < a8)
  {
    v52 = v32;
    v53 = a7 + 232 * v32 + 184;
    v54 = ~v50 + v31 + v28;
    v55 = ~v32 + v37;
    while ((*v53 & 1) != 0)
    {
LABEL_60:
      ++v52;
      v53 += 232;
      ++v54;
      --v55;
      if (v52 >= a8)
      {
        goto LABEL_61;
      }
    }

    if (v52 >= v74)
    {
      v57 = 0.01;
      if (v52 <= v50)
      {
LABEL_59:
        operator*(&v78, &v75, v57);
        v81[0] = v79;
        v80 = v75;
        PC_CMTimeSaferSubtract(v81, &v80, &v76);
        *(v53 - 11) = v76;
        *(v53 - 20) = v77;
        *v53 = 1;
        goto LABEL_60;
      }

      v56 = v34 * v54;
    }

    else
    {
      v56 = v36 * v55;
    }

    v57 = 1.0 - v56;
    goto LABEL_59;
  }

LABEL_61:
  if ((v73 & 0x80000000) == 0)
  {
    v58 = 0;
    v59 = a7 + 184;
    v60 = v74 - 1;
    while ((*v59 & 1) != 0)
    {
LABEL_70:
      ++v58;
      v59 += 232;
      --v60;
      if (v73 + 1 == v58)
      {
        return;
      }
    }

    if (v58 <= v50)
    {
      v62 = 0.01;
      if (v58 >= v74)
      {
LABEL_69:
        operator*(&v78, &v75, v62);
        v81[0] = v79;
        v80 = v75;
        PC_CMTimeSaferSubtract(v81, &v80, &v76);
        *(v59 - 11) = v76;
        *(v59 - 20) = v77;
        *v59 = 1;
        goto LABEL_70;
      }

      v61 = v36 * v60;
    }

    else
    {
      v61 = v34 * (~v50 + v58);
    }

    v62 = 1.0 - v61;
    goto LABEL_69;
  }
}

void PSPaintPType::birthAllParticles(PSPaintPType *this, OZSimStateArray *a2, PSParticle *a3, int a4)
{
  memset(&v13, 0, sizeof(v13));
  v15 = *(a2 + 1);
  v7.n128_f64[0] = PSParticleType::simGetFirstFrame(this, &v13);
  memset(&v12, 0, sizeof(v12));
  v8 = (*(*(*(this + 2054) + 200) + 272))(v7);
  OZSceneSettings::getFrameDuration((v8 + 336), &v15);
  operator*(&v15, &v12, 0.01);
  if (a4)
  {
    v9 = a3 + 184;
    do
    {
      if ((*v9 & 1) == 0)
      {
        v15 = v13;
        v14 = v12;
        PC_CMTimeSaferSubtract(&v15, &v14, &v10);
        *(v9 - 11) = v10;
        *(v9 - 20) = v11;
        *v9 = 1;
      }

      v9 += 232;
      --a4;
    }

    while (a4);
  }

  *(this + 18092) = 1;
}

uint64_t PSPaintPType::addBornParticlesToSim(PSPaintPType *this, OZSimStateArray *a2, PSParticle *a3, int a4)
{
  v21 = *(a2 + 1);
  v19 = 0uLL;
  v20 = 0;
  v8 = (*(*(*(this + 2054) + 200) + 272))();
  OZSceneSettings::getFrameDuration((v8 + 336), &v19);
  memset(&v18, 0, sizeof(v18));
  time1 = v21;
  *&time2.value = v19;
  time2.epoch = v20;
  PC_CMTimeSaferSubtract(&time1, &time2, &v18);
  if (a4)
  {
    v9 = 0;
    v10 = 0;
    v11 = a3 + 184;
    v12 = a4;
    v13 = a3 + 184;
    do
    {
      v14 = *v13;
      v13 += 232;
      if (v14 == 1)
      {
        ++v9;
        time1 = *(v11 - 176);
        time2 = v21;
        if (CMTimeCompare(&time1, &time2) < 0)
        {
          time1 = *(v11 - 176);
          time2 = v18;
          v10 = v10 + (CMTimeCompare(&time1, &time2) >= 0);
        }
      }

      v11 = v13;
      --v12;
    }

    while (v12);
  }

  else
  {
    v10 = 0;
    v9 = 0;
  }

  if (v9 == a4)
  {
    *(this + 18092) = 1;
  }

  v15 = (*(a2 + 1) - *a2) >> 3;
  v16 = -1108378657 * v15;
  std::vector<OZSimStateElement>::resize(a2, (v10 - 1108378657 * v15));
  for (; a4; --a4)
  {
    if (*(a3 + 184) == 1)
    {
      time1 = *(a3 + 8);
      time2 = v21;
      if (CMTimeCompare(&time1, &time2) < 0)
      {
        time1 = *(a3 + 8);
        time2 = v18;
        if ((CMTimeCompare(&time1, &time2) & 0x80000000) == 0)
        {
          *(*a2 + 248 * v16++ + 232) = a3;
        }
      }
    }

    a3 = (a3 + 232);
  }

  return v10;
}

uint64_t PSPaintPType::getNumEmissionPointsAndOrders(uint64_t a1, const CMTime *a2)
{
  v4 = (*(**(a1 + 16432) + 616))(*(a1 + 16432));
  if (!OZChannel::getValueAsInt((a1 + 12656), a2, 0.0) || !PSPaintPType::getIsSpacingConstantOverTime(a1))
  {
    OZRenderState::OZRenderState(&time);
    *&time.var0.var0 = *&a2->value;
    time.var0.var3 = a2->epoch;
    OZRotoshape::getReparametrizedContourLength(v4, &time.var0.var0, 1, 0);
  }

  v5 = *(a1 + 18096);
  if (v5 < 0.0)
  {
    (*(*a1 + 1128))(v19, a1);
    *v17 = *v19;
    v18 = v20;
    OZRenderState::OZRenderState(&time);
    *&time.var0.var0 = *v17;
    time.var0.var3 = v18;
    OZRotoshape::getReparametrizedContourLength(v4, &time.var0.var0, 1, 0);
  }

  OZChannel::getValueAsDouble((a1 + 12184), a2, 0.0);
  v7 = v6;
  OZChannel::getValueAsDouble((v4 + 27320), a2, 0.0);
  if (v8 < 3.0)
  {
    v8 = 3.0;
  }

  v9 = v7 * v8;
  if (fabs(v9) < 0.0000001)
  {
    return 0;
  }

  v11 = 1.0 / v9;
  if (OZChannel::getValueAsInt((a1 + 12808), MEMORY[0x277CC08F0], 0.0) != 1 && !OZChannel::getValueAsInt((a1 + 12656), MEMORY[0x277CC08F0], 0.0) || !PSPaintPType::getIsSpacingEven(a1, a2))
  {
    operator new[]();
  }

  OZChannelDoubleOverRange::getValueOverRangeAsDouble((a1 + 12336), a2, 0.0);
  v13 = v12;
  OZChannelDoubleOverRange::getValueOverRangeAsDouble((a1 + 12496), a2, 0.0);
  v15 = 0;
  if (fabs(v13) >= 0.0000001 && fabs(v14) >= 0.0000001)
  {
    v15 = (v5 * (v11 * (1.0 / v13) * (1.0 / v14))) + 1;
  }

  if (v15 >= 100000)
  {
    return 100000;
  }

  else
  {
    return v15;
  }
}

uint64_t PSPaintPType::getIsSpacingEven(PSPaintPType *this, const CMTime *a2)
{
  KeyframeMinValue = OZChannel::getKeyframeMinValue((this + 12336), 1);
  KeyframeMaxValue = OZChannel::getKeyframeMaxValue((this + 12336), 1);
  v6 = OZChannel::getKeyframeMinValue((this + 12496), 1);
  v7 = OZChannel::getKeyframeMaxValue((this + 12496), 1);
  if (vabdd_f64(KeyframeMinValue, KeyframeMaxValue) >= 0.0000001 || vabdd_f64(v6, v7) >= 0.0000001 || (OZBehavior::IsChannelAffectedByBehaviors((this + 12336), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((this + 12496), 1) & 1) != 0)
  {
    return 0;
  }

  else
  {
    return PSPaintPType::getIsWidthSequenced(this, a2, 1) ^ 1;
  }
}

uint64_t PSPaintPType::getWidthOverStrokeSamples(uint64_t this, const CMTime *a2, int a3, double *a4)
{
  if (a3)
  {
    (*(**(this + 16432) + 616))(*(this + 16432));
    operator new[]();
  }

  return this;
}

uint64_t PSPaintPType::simIsFlushingSuppressed(PSPaintPType *this)
{
  result = *(this + 2054);
  if (result)
  {
    result = (*(*result + 616))(result);
    if (result)
    {
      v2 = result;
      return !OZChannel::getValueAsInt((result + 33256), MEMORY[0x277CC08F0], 0.0) && OZMoShape::getFreehandPaintVertices((v2 + 18976)) != 0;
    }
  }

  return result;
}

PSEmitter *PSPaintPType::simFlushedCache(PSPaintPType *this, OZSystemSimulator *a2)
{
  v4 = this + 0x4000;
  if ((this + 15800) == a2)
  {
    v5 = this + 18080;
    v13 = *(this + 2260);
    if (!v13)
    {
      v11 = 18088;
      goto LABEL_17;
    }

    v7 = v13 - 16;
    v14 = *(v13 - 8);
    if (v14)
    {
      v15 = (v13 + 232 * v14 - 232);
      v16 = -232 * v14;
      v11 = 18088;
      do
      {
        PSParticle::~PSParticle(v15);
        v15 = (v17 - 232);
        v16 += 232;
      }

      while (v16);
    }

    else
    {
      v11 = 18088;
    }
  }

  else
  {
    v5 = this + 18064;
    v6 = *(this + 2258);
    if (!v6)
    {
      v11 = 18072;
      goto LABEL_17;
    }

    v7 = v6 - 16;
    v8 = *(v6 - 8);
    if (v8)
    {
      v9 = (v6 + 232 * v8 - 232);
      v10 = -232 * v8;
      v11 = 18072;
      do
      {
        PSParticle::~PSParticle(v9);
        v9 = (v12 - 232);
        v10 += 232;
      }

      while (v10);
    }

    else
    {
      v11 = 18072;
    }
  }

  MEMORY[0x2666E9ED0](v7, 0x10A1C80AE952B93);
LABEL_17:
  *v5 = 0;
  *(this + v11) = 0;
  v4[1708] = 0;
  *(this + 2262) = 0xBFF0000000000000;
  *(this + 2264) = 0;
  *(v4 + 434) = 0;

  return PSReplicatorPType::simFlushedCache(this, a2);
}

uint64_t PSPaintPType::performDragOperation(PSPaintPType *this, OZFactoryBase *a2, OZChannelBase *a3, uint64_t a4, uint64_t a5, unsigned int a6, uint64_t a7, const CMTime *a8)
{
  v10 = PSParticleType::performDragOperation(this, a2, a3, a4, a5, a6, a7, a8);
  if (v10 && (this + 16984) == a3)
  {
    OZChannelBase::setFlag((this + 17112), 2, 0);
  }

  return v10;
}

uint64_t PSPaintPType::parseEnd(PSPaintPType *this, PCSerializerReadStream *a2)
{
  v4 = (*(*this + 640))(this);
  OZChannelBase::resetFlag(v4, 1, 1);
  v5 = (*(*this + 640))(this);
  OZChannelBase::resetFlag(v5, 0x10000000, 1);
  OZChannel::setDefaultValue((this + 11192), 1.0);
  OZChannelBase::reset((this + 11192), 0);

  return PSParticleType::parseEnd(this, a2);
}

CGColorSpace **PSPaintPType::getRadialParticleMatrix(void **a1, __int128 *a2, uint64_t a3, uint64_t a4, double *a5, uint64_t a6, int a7)
{
  v54 = *a2;
  v55 = *(a2 + 2);
  memset(v53, 0, sizeof(v53));
  v44 = *a2;
  v61 = *(a3 + 8);
  PC_CMTimeSaferSubtract(&v44, &v61, v53);
  __asm { FMOV            V0.2D, #1.0 }

  v51 = _Q0;
  v52 = 0x3FF0000000000000;
  ((*a1)[201])(a1, v53, a3 + 32, a3 + 8, &v51);
  PSSequencedValues::PSSequencedValues(&v44);
  ((*a1)[202])(a1, &v54, a3, &v44);
  v51 = vmulq_f64(vmulq_f64(*(a3 + 56), v51), v47);
  v18 = (*(*a1[2054] + 352))(a1[2054]);
  v19 = v51.f64[1];
  v20 = v51.f64[0] / v18;
  v51.f64[0] = v51.f64[0] / v18;
  v22 = *(a4 + 176);
  v21 = *(a4 + 184);
  v23 = *(a4 + 192);
  v24 = v49;
  v25 = v50;
  *(a6 + 120) = 0x3FF0000000000000;
  *(a6 + 80) = 0x3FF0000000000000;
  *(a6 + 40) = 0x3FF0000000000000;
  *a6 = 0x3FF0000000000000;
  *(a6 + 8) = 0u;
  *(a6 + 24) = 0u;
  *(a6 + 48) = 0u;
  *(a6 + 64) = 0u;
  *(a6 + 88) = 0u;
  *(a6 + 104) = 0u;
  v26 = v48;
  v27.i64[0] = v45;
  v28 = *(a4 + 32);
  if (fabs(vaddvq_f64(vmulq_f64(*&v44.timescale, *&v44.timescale)) + *v27.i64 * *v27.i64) >= 0.0000001)
  {
    v29 = *(a4 + 40);
  }

  else
  {
    v29 = *(a4 + 40);
    v30 = vmulq_f64(v29, v29);
    if (fabs(v28 * v28 + v30.f64[0] + v30.f64[1]) < 0.0000001)
    {
      *a6 = v20;
      *(a6 + 40) = v19;
      goto LABEL_8;
    }
  }

  v40 = v18;
  v31 = *(a4 + 24);
  v32 = vdupq_lane_s64(v45, 0);
  *&v32.f64[0] = v44.epoch;
  v33.i64[0] = vdupq_laneq_s64(v29, 1).u64[0];
  v33.i64[1] = *(a4 + 32);
  v41 = *&v44.value * v31 - (v28 * *&v44.timescale + vmuld_lane_f64(v29.f64[0], *&v44.timescale, 1) + vmuld_lane_f64(*&v45, v29, 1));
  v42 = vaddq_f64(vaddq_f64(vmulq_n_f64(*&v44.timescale, v31), vmulq_n_f64(vextq_s8(v33, v29, 8uLL), *&v44.value)), vsubq_f64(vmulq_f64(v32, v33), vmulq_f64(v29, vzip1q_s64(v27, *&v44.timescale))));
  v43 = vmulq_f64(*&v44.timescale, v29).f64[0] - vmuld_lane_f64(v28, *&v44.timescale, 1) + v31 * *&v45 + vmuld_lane_f64(*&v44.value, v29, 1);
  if ((a7 & 1) == 0)
  {
    v69 = 0x3FF0000000000000;
    v66 = 0x3FF0000000000000;
    v63 = 0x3FF0000000000000;
    v61.value = 0x3FF0000000000000;
    *&v61.timescale = 0u;
    v62 = 0u;
    v64 = 0u;
    v65 = 0u;
    v67 = 0u;
    v68 = 0u;
    PCMatrix44Tmpl<double>::setRotationFromQuaternion(&v61, &v41);
    memset(v56, 0, sizeof(v56));
    v58 = 0u;
    v59 = 0u;
    v60 = 0;
    v57 = 4;
    PCMatrix44Tmpl<double>::getTransformation(&v61.value, v56);
    v34 = __sincos_stret(*&v59 * 0.5);
    v35 = v34.__sinval * 0.0 * 0.0;
    v36 = v34.__sinval * 0.0 + v34.__cosval * 0.0;
    v42.f64[1] = v36 + v35 - v34.__sinval * 0.0;
    v43 = v34.__sinval + v34.__cosval * 0.0 + v35 - v35;
    v41 = v34.__cosval - (v34.__sinval * 0.0 + v35 + v35);
    v42.f64[0] = v36 + v34.__sinval * 0.0 - v35;
  }

  PCMatrix44Tmpl<double>::rightRotate(a6, &v41);
  PCMatrix44Tmpl<double>::rightScale(a6, v51.f64[0], v51.f64[1], 1.0);
  v18 = v40;
LABEL_8:
  if (v18 != 1.0)
  {
    *(a6 + 32) = v18 * *(a6 + 32);
    *(a6 + 64) = v18 * *(a6 + 64);
    *(a6 + 8) = vdivq_f64(*(a6 + 8), vdupq_lane_s64(*&v18, 0));
  }

  if (a7)
  {
    v37 = v23 + v25;
  }

  else
  {
    v37 = 0.0;
  }

  PCMatrix44Tmpl<double>::leftMult(a6, a5);
  v38.f64[0] = v22 + v26;
  PCMatrix44Tmpl<double>::leftTranslate(a6, v38, v21 + v24, v37);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v46);
}

void sub_2602DCE50(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, ...)
{
  va_start(va, a17);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void PSPaintPType::preRenderFrame(PSPaintPType *this, CMTime *a2, PSHeliumNode *a3)
{
  *(this + 9062) = 0;
  PSParticleType::preRenderFrame(this);
  if (!*(*HGRenderJob::GetRenderNodeList(a2) + 8))
  {
    v10 = *a2;
    PSHeliumNode::initGradient(a3, (this + 16984), &v10);
  }

  if (LiRenderingTechnology::getEnableMetalRendering((&a2[54].epoch + 4)))
  {
    WorkingColorSpace = OZRenderParams::getWorkingColorSpace(a2);
    PSPaintPType::getAvailableMetalBrushGradient(this, WorkingColorSpace, &v8);
    if (!v8.var0)
    {
      throw_PCNullPointerException(1);
    }

    v10 = *a2;
    (*(*v8.var0 + 24))(v8.var0, &v10);
    PSHeliumNode::setMetalGradient(a3, &v8);
  }

  else
  {
    v7 = OZRenderParams::getWorkingColorSpace(a2);
    PSPaintPType::getAvailableBrushGradient(this, v7, &v8);
    if (!v8.var0)
    {
      throw_PCNullPointerException(1);
    }

    v10 = *a2;
    (*(*v8.var0 + 56))(v8.var0, &v10);
    PSHeliumNode::setGradient(a3, &v8);
  }

  PCSharedCount::~PCSharedCount(&v9);
}

void sub_2602DCFF4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PCSharedCount::~PCSharedCount(va);
  _Unwind_Resume(a1);
}

PCMutex *PSPaintPType::getAvailableMetalBrushGradient@<X0>(PSPaintPType *this@<X0>, CGColorSpace *a2@<X1>, PCSharedCount *a3@<X8>)
{
  a3->var0 = 0;
  v6 = &a3[1];
  PCSharedCount::PCSharedCount(a3 + 1);
  v11 = (this + 17968);
  PCMutex::lock((this + 17968));
  v12 = 1;
  v7 = *(this + 2255);
  v8 = *(this + 2256);
  while (1)
  {
    if (v7 == v8)
    {
      PSPaintPType::createMetalBrushGradient(this, a2);
    }

    if (PCSharedCount::unique(&v7[1]))
    {
      break;
    }

    v7 += 2;
  }

  a3->var0 = v7->var0;
  PCSharedCount::PCSharedCount(&v10, v7 + 1);
  PCSharedCount::operator=(v6, &v10);
  PCSharedCount::~PCSharedCount(&v10);
  result = v11;
  if (v11)
  {
    if (v12 == 1)
    {
      return PCMutex::unlock(v11);
    }
  }

  return result;
}

void sub_2602DD178(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, char a10, uint64_t a11, char a12, uint64_t a13, PCSharedCount a14)
{
  *(v15 + 18048) = v16;
  PCLockSentry<PCMutex>::~PCLockSentry(&a12);
  PCSharedCount::~PCSharedCount(v14);
  _Unwind_Resume(a1);
}

PCMutex *PSPaintPType::getAvailableBrushGradient@<X0>(PSPaintPType *this@<X0>, CGColorSpace *a2@<X1>, PCSharedCount *a3@<X8>)
{
  a3->var0 = 0;
  v6 = &a3[1];
  PCSharedCount::PCSharedCount(a3 + 1);
  v11 = (this + 17968);
  PCMutex::lock((this + 17968));
  v12 = 1;
  v7 = *(this + 2243);
  v8 = *(this + 2244);
  while (1)
  {
    if (v7 == v8)
    {
      PSPaintPType::createBrushGradient(this, a2);
    }

    if (PCSharedCount::unique(&v7[1]))
    {
      break;
    }

    v7 += 2;
  }

  a3->var0 = v7->var0;
  PCSharedCount::PCSharedCount(&v10, v7 + 1);
  PCSharedCount::operator=(v6, &v10);
  PCSharedCount::~PCSharedCount(&v10);
  result = v11;
  if (v11)
  {
    if (v12 == 1)
    {
      return PCMutex::unlock(v11);
    }
  }

  return result;
}

void sub_2602DD348(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, char a10, uint64_t a11, char a12, uint64_t a13, PCSharedCount a14)
{
  *(v15 + 17952) = v16;
  PCLockSentry<PCMutex>::~PCLockSentry(&a12);
  PCSharedCount::~PCSharedCount(v14);
  _Unwind_Resume(a1);
}

uint64_t PSPaintPType::getIsWidthSequenced(PSPaintPType *this, const CMTime *a2, int a3)
{
  v5 = (*(**(this + 2054) + 616))(*(this + 2054));
  v6 = v5 + 1200;
  v7 = *(v5 + 1208);
  if (v5 + 1200 == v7)
  {
    return 0;
  }

  while (1)
  {
    v8 = *(*v6 + 16);
    v9 = v8[1];
    v12 = xmmword_260857A30;
    if (OZFactory::isKindOfClass(v9, &v12))
    {
      v12 = *&a2->value;
      epoch = a2->epoch;
      if (((*(*v10 + 296))() | a3 ^ 1) == 1 && PSPaintSequenceBehavior::isAffectingWidth(v10))
      {
        break;
      }
    }

    v6 = *v6;
    if (v6 == v7)
    {
      return 0;
    }
  }

  return 1;
}

void sub_2602DD67C(_Unwind_Exception *a1)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v2 + 48));
  PCSharedCount::~PCSharedCount(v1 + 1);
  _Unwind_Resume(a1);
}

void sub_2602DD7CC(_Unwind_Exception *a1)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v2 + 48));
  PCSharedCount::~PCSharedCount(v1 + 1);
  _Unwind_Resume(a1);
}

void PSOwnedObjectWrapper::~PSOwnedObjectWrapper(PSOwnedObjectWrapper *this)
{
  *(v1 + 16) = &unk_2872DEA38;
  *(v1 + 32) = 0;
  PCWeakCount::~PCWeakCount((v1 + 24));
}

{
  PSOwnedObjectWrapper::~PSOwnedObjectWrapper(this);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toPSOwnedObjectWrapper::~PSOwnedObjectWrapper(PSOwnedObjectWrapper *this)
{
  *(v1 + 16) = &unk_2872DEA38;
  *(v1 + 32) = 0;
  v2 = (v1 + 24);

  PCWeakCount::~PCWeakCount(v2);
}

{
  v1 = (this + *(*this - 24));
  v1[2] = &unk_2872DEA38;
  *(v1 + 32) = 0;
  PCWeakCount::~PCWeakCount(v1 + 3);

  JUMPOUT(0x2666E9F00);
}

void PSOwnedObjectWrapper::~PSOwnedObjectWrapper(PSOwnedObjectWrapper *this, uint64_t *a2)
{
  v3 = *a2;
  *this = *a2;
  *(this + *(v3 - 24)) = a2[3];
  v4 = *(this + 1);
  if (v4)
  {
    v5 = v4 - 16;
    v6 = *(v4 - 8);
    if (v6)
    {
      v7 = (v4 + 232 * v6 - 232);
      v8 = -232 * v6;
      do
      {
        PSParticle::~PSParticle(v7);
        v7 = (v9 - 232);
        v8 += 232;
      }

      while (v8);
    }

    MEMORY[0x2666E9ED0](v5, 0x10A1C80AE952B93);
  }

  *(this + 1) = 0;
}

uint64_t std::vector<PCPtr<OZGLGradientRadial>>::__emplace_back_slow_path<PCPtr<OZGLGradientRadial> const&>(uint64_t a1, const PCSharedCount *a2)
{
  v2 = (*(a1 + 8) - *a1) >> 4;
  v3 = v2 + 1;
  if ((v2 + 1) >> 60)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  v6 = *(a1 + 16) - *a1;
  if (v6 >> 3 > v3)
  {
    v3 = v6 >> 3;
  }

  if (v6 >= 0x7FFFFFFFFFFFFFF0)
  {
    v7 = 0xFFFFFFFFFFFFFFFLL;
  }

  else
  {
    v7 = v3;
  }

  v17 = a1;
  if (v7)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<std::shared_ptr<TXTextObject>>>(a1, v7);
  }

  v14 = 0;
  v15 = (16 * v2);
  v16 = (16 * v2);
  v15->var0 = a2->var0;
  PCSharedCount::PCSharedCount((16 * v2 + 8), a2 + 1);
  *&v16 = v16 + 16;
  v8 = *(a1 + 8);
  v9 = v15 + *a1 - v8;
  std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PCPtr<OZGLGradientRadial>>,PCPtr<OZGLGradientRadial>*>(a1, *a1, v8, v9);
  v10 = *a1;
  *a1 = v9;
  v11 = *(a1 + 16);
  v13 = v16;
  *(a1 + 8) = v16;
  *&v16 = v10;
  *(&v16 + 1) = v11;
  v14 = v10;
  v15 = v10;
  std::__split_buffer<PCPtr<LiMaterialLayer>>::~__split_buffer(&v14);
  return v13;
}

void sub_2602DDBA8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__split_buffer<PCPtr<LiMaterialLayer>>::~__split_buffer(va);
  _Unwind_Resume(a1);
}

void std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PCPtr<OZGLGradientRadial>>,PCPtr<OZGLGradientRadial>*>(uint64_t a1, PCSharedCount *a2, PCSharedCount *a3, uint64_t a4)
{
  if (a2 != a3)
  {
    v6 = a2;
    v7 = 0;
    do
    {
      *(a4 + v7 * 8) = v6[v7];
      PCSharedCount::PCSharedCount((a4 + v7 * 8 + 8), &v6[v7 + 1]);
      v7 += 2;
    }

    while (&v6[v7] != a3);
    while (v6 != a3)
    {
      PCSharedCount::~PCSharedCount(v6 + 1);
      v6 += 2;
    }
  }
}

void sub_2602DDC40(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    v4 = -v1;
    v5 = (v2 - 8);
    do
    {
      PCSharedCount::~PCSharedCount(v5);
      v5 = (v6 - 16);
      v4 += 16;
    }

    while (v4);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::vector<PCPtr<OZMetalGradientRadial>>::__emplace_back_slow_path<PCPtr<OZMetalGradientRadial> const&>(uint64_t a1, const PCSharedCount *a2)
{
  v2 = (*(a1 + 8) - *a1) >> 4;
  v3 = v2 + 1;
  if ((v2 + 1) >> 60)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  v6 = *(a1 + 16) - *a1;
  if (v6 >> 3 > v3)
  {
    v3 = v6 >> 3;
  }

  if (v6 >= 0x7FFFFFFFFFFFFFF0)
  {
    v7 = 0xFFFFFFFFFFFFFFFLL;
  }

  else
  {
    v7 = v3;
  }

  v17 = a1;
  if (v7)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<std::shared_ptr<TXTextObject>>>(a1, v7);
  }

  v14 = 0;
  v15 = (16 * v2);
  v16 = (16 * v2);
  v15->var0 = a2->var0;
  PCSharedCount::PCSharedCount((16 * v2 + 8), a2 + 1);
  *&v16 = v16 + 16;
  v8 = *(a1 + 8);
  v9 = v15 + *a1 - v8;
  std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PCPtr<OZMetalGradientRadial>>,PCPtr<OZMetalGradientRadial>*>(a1, *a1, v8, v9);
  v10 = *a1;
  *a1 = v9;
  v11 = *(a1 + 16);
  v13 = v16;
  *(a1 + 8) = v16;
  *&v16 = v10;
  *(&v16 + 1) = v11;
  v14 = v10;
  v15 = v10;
  std::__split_buffer<PCPtr<LiMaterialLayer>>::~__split_buffer(&v14);
  return v13;
}

void sub_2602DDD6C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__split_buffer<PCPtr<LiMaterialLayer>>::~__split_buffer(va);
  _Unwind_Resume(a1);
}

void std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PCPtr<OZMetalGradientRadial>>,PCPtr<OZMetalGradientRadial>*>(uint64_t a1, PCSharedCount *a2, PCSharedCount *a3, uint64_t a4)
{
  if (a2 != a3)
  {
    v6 = a2;
    v7 = 0;
    do
    {
      *(a4 + v7 * 8) = v6[v7];
      PCSharedCount::PCSharedCount((a4 + v7 * 8 + 8), &v6[v7 + 1]);
      v7 += 2;
    }

    while (&v6[v7] != a3);
    while (v6 != a3)
    {
      PCSharedCount::~PCSharedCount(v6 + 1);
      v6 += 2;
    }
  }
}

void sub_2602DDE04(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    v4 = -v1;
    v5 = (v2 - 8);
    do
    {
      PCSharedCount::~PCSharedCount(v5);
      v5 = (v6 - 16);
      v4 += 16;
    }

    while (v4);
  }

  _Unwind_Resume(exception_object);
}

void PSPenPropertyCurveNode::~PSPenPropertyCurveNode(PSPenPropertyCurveNode *this)
{
  OZEaseInInterpolator::~OZEaseInInterpolator(this);

  JUMPOUT(0x2666E9F00);
}

void PSPenPropertyCurveNode::solveNode(OZBehavior **this, const CMTime *a2, double a3, double a4)
{
  v12 = 0uLL;
  v13 = 0;
  OZBehavior::getFrameDuration(this[4], &v12);
  memset(&v11, 0, sizeof(v11));
  PC_CMTimeMakeWithSecondsRoundToNearest(v12.n128_i32[2], &v11, a3);
  v8 = this[4];
  v10 = *a2;
  Seconds = CMTimeGetSeconds(&v10);
  PSPenPropertyBehavior::solveNode(v8, &v11, Seconds, a4);
}

double PSPenPropertyBehavior::solveNode(PSPenPropertyBehavior *this, const CMTime *a2, double a3, double a4)
{
  if (*(this + 267))
  {
    memset(&v20, 0, sizeof(v20));
    (*(**(*(this + 47) + 32) + 336))(&v20);
    v19 = v20;
    if (!(*(*this + 296))(this, &v19, 0, 1, 1))
    {
      return a4;
    }

    v7 = 0.0;
    v8 = OZChannel::getValueAsInt((this + 1960), &v20, 0.0) != 0;
    v9 = (*(*this + 680))(this, v8, a3);
    OZChannel::getValueAsDouble((this + 1200), &v20, 0.0);
    v11 = v10;
    OZChannel::getValueAsDouble((this + 1352), &v20, 0.0);
    if (v9 >= v11)
    {
      if (v12 <= v11)
      {
        v12 = v11 + 0.01;
      }

      v13 = (v9 - v11) / (v12 - v11);
      v14 = *(this + 529);
      switch(v14)
      {
        case 2:
          v17 = (this + 1808);
          break;
        case 1:
          v17 = (this + 1656);
          break;
        case 0:
          OZChannel::getValueAsDouble((this + 1504), &v20, 0.0);
          return v13 * (v15 * a4);
        default:
          return v7;
      }

      OZChannel::getValueAsDouble(v17, &v20, 0.0);
      return v13 * v18 + a4;
    }

    return v7;
  }

  return a4;
}

void PSPenPropertyCurveNode::solveNode(OZBehavior **this, OZCurveNodeParam *a2)
{
  v4 = *(a2 + 19);
  v5 = *(a2 + 10);
  v13 = *(a2 + 5);
  v12 = *(a2 + 4);
  v10 = 0uLL;
  v11 = 0;
  OZBehavior::getFrameDuration(this[4], &v10);
  memset(&v9, 0, sizeof(v9));
  PC_CMTimeMakeWithSecondsRoundToNearest(v10.n128_i32[2], &v9, *(a2 + 1));
  if (*(a2 + 36))
  {
    v6 = 0;
    do
    {
      v7 = this[4];
      time = v12;
      Seconds = CMTimeGetSeconds(&time);
      *(v4 + 8 * v6) = PSPenPropertyBehavior::solveNode(v7, &v9, Seconds, *(v5 + 8 * v6));
      time = v12;
      v14 = v13;
      PC_CMTimeSaferAdd(&time, &v14, &v12);
      ++v6;
    }

    while (v6 < *(a2 + 36));
  }
}

__n128 PSPenPropertyCurveNode::getNeededRange(PSPenPropertyCurveNode *this, OZCurveNodeParam *a2)
{
  *(a2 + 24) = *(a2 + 6);
  *(a2 + 5) = *(a2 + 14);
  result = *(a2 + 120);
  *(a2 + 3) = result;
  *(a2 + 8) = *(a2 + 17);
  *(a2 + 18) = *(a2 + 36);
  *(a2 + 88) = 0;
  *(a2 + 10) = *(a2 + 19);
  return result;
}

void PSPenPropertyBehavior::PSPenPropertyBehavior(PSPenPropertyBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3, a4);
  *v5 = &unk_2872DA448;
  v5[2] = &unk_2872DA708;
  v5[6] = &unk_2872DA960;
  v5[42] = &unk_2872DA9B8;
  PCURL::PCURL(&v7, @"Pen Property Behavior Apply To Enum");
  PCURL::PCURL(&v6, @"Pen Property Behavior Apply To");
  OZChannelEnum::OZChannelEnum((this + 536), 0, &v7, &v6, (this + 56), 0xC8u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Calc Tilt Enum");
  PCURL::PCURL(&v6, @"Pen Property Behavior Calc Tilt");
  OZChannelEnum::OZChannelEnum((this + 792), 0, &v7, &v6, (this + 56), 0xC9u, 2, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Tilt Axis");
  OZChannelAngle::OZChannelAngle((this + 1048), 0.0, &v7, (this + 56), 0xCAu, 2, 0, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Pen Min Input");
  OZChannelPercent::OZChannelPercent((this + 1200), 0.0, &v7, (this + 56), 0xCBu, 0, 0, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Pen Max Input");
  OZChannelPercent::OZChannelPercent((this + 1352), 1.0, &v7, (this + 56), 0xCCu, 0, 0, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Scale Multiply");
  OZChannelPercent::OZChannelPercent((this + 1504), 1.0, &v7, (this + 56), 0xCDu, 0, 0, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Scale Offset");
  OZChannelDouble::OZChannelDouble((this + 1656), 10.0, &v7, (this + 56), 0xCEu, 0, 0, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Scale Angle");
  OZChannelAngle::OZChannelAngle((this + 1808), 0.785398163, &v7, (this + 56), 0xCFu, 0, 0, 0);
  PCString::~PCString(&v7);
  PCURL::PCURL(&v7, @"Pen Property Behavior Invert");
  OZChannelBool::OZChannelBool((this + 1960), &v7, (this + 56), 0xD1u, 0, 0, 0);
  PCString::~PCString(&v7);
  *(this + 2112) = 0;
  *(this + 529) = 0;
  *(this + 2120) = 0;
  *(this + 267) = 0;
  OZChannel::setMax((this + 1504), 3.40282347e38);
  OZChannel::setSliderMax((this + 1504), 4.0);
}

void sub_2602DE6B0(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, PCString a11, PCString a12)
{
  PCString::~PCString(&a12);
  OZChannel::~OZChannel((v12 + 1808));
  OZChannel::~OZChannel((v12 + 1656));
  OZChannelPercent::~OZChannelPercent((v12 + 1504));
  OZChannelPercent::~OZChannelPercent((v12 + 1352));
  OZChannelPercent::~OZChannelPercent((v12 + 1200));
  OZChannel::~OZChannel((v12 + 1048));
  OZChannelEnum::~OZChannelEnum((v12 + 792));
  OZChannelEnum::~OZChannelEnum((v12 + 536));
  OZChannelBehavior::~OZChannelBehavior(v12);
  _Unwind_Resume(a1);
}

void PSPenPropertyBehavior::PSPenPropertyBehavior(PSPenPropertyBehavior *this, const PSPenPropertyBehavior *a2, char a3)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3);
  *v5 = &unk_2872DA448;
  v5[2] = &unk_2872DA708;
  v5[6] = &unk_2872DA960;
  v5[42] = &unk_2872DA9B8;
  OZChannelEnum::OZChannelEnum((v5 + 67), (a2 + 536), (this + 56));
  OZChannelEnum::OZChannelEnum((this + 792), (a2 + 792), (this + 56));
  OZChannel::OZChannel((this + 1048), (a2 + 1048), (this + 56));
  *(this + 131) = &unk_287246030;
  *(this + 133) = &unk_287246390;
  OZChannelPercent::OZChannelPercent((this + 1200), (a2 + 1200), (this + 56));
  OZChannelPercent::OZChannelPercent((this + 1352), (a2 + 1352), (this + 56));
  OZChannelPercent::OZChannelPercent((this + 1504), (a2 + 1504), (this + 56));
  OZChannel::OZChannel((this + 1656), (a2 + 1656), (this + 56));
  *(this + 207) = &unk_287245C60;
  *(this + 209) = &unk_287245FC0;
  OZChannel::OZChannel((this + 1808), (a2 + 1808), (this + 56));
  *(this + 226) = &unk_287246030;
  *(this + 228) = &unk_287246390;
  OZChannelBool::OZChannelBool((this + 1960), (a2 + 1960), (this + 56));
  *(this + 2112) = 0;
  *(this + 529) = 0;
  *(this + 2120) = 0;
  *(this + 267) = 0;
}

void sub_2602DEA20(_Unwind_Exception *a1)
{
  OZChannel::~OZChannel(v4);
  OZChannel::~OZChannel(v3);
  OZChannelPercent::~OZChannelPercent((v1 + 1504));
  OZChannelPercent::~OZChannelPercent((v1 + 1352));
  OZChannelPercent::~OZChannelPercent((v1 + 1200));
  OZChannel::~OZChannel(v2);
  OZChannelEnum::~OZChannelEnum((v1 + 792));
  OZChannelEnum::~OZChannelEnum((v1 + 536));
  OZChannelBehavior::~OZChannelBehavior(v1);
  _Unwind_Resume(a1);
}

void PSPenPropertyBehavior::~PSPenPropertyBehavior(PSPenPropertyBehavior *this)
{
  *this = &unk_2872DA448;
  *(this + 2) = &unk_2872DA708;
  *(this + 6) = &unk_2872DA960;
  *(this + 42) = &unk_2872DA9B8;
  OZChannelBool::~OZChannelBool((this + 1960));
  OZChannel::~OZChannel((this + 1808));
  OZChannel::~OZChannel((this + 1656));
  OZChannelPercent::~OZChannelPercent((this + 1504));
  OZChannelPercent::~OZChannelPercent((this + 1352));
  OZChannelPercent::~OZChannelPercent((this + 1200));
  OZChannel::~OZChannel((this + 1048));
  OZChannelEnum::~OZChannelEnum((this + 792));
  OZChannelEnum::~OZChannelEnum((this + 536));

  OZChannelBehavior::~OZChannelBehavior(this);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toPSPenPropertyBehavior::~PSPenPropertyBehavior(PSPenPropertyBehavior *this)
{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

uint64_t PSPenPropertyBehavior::operator=(PSPenPropertyBehavior *a1, const void *a2)
{
  OZChannelBehavior::operator=();
  if (!v4)
  {
    __cxa_bad_cast();
  }

  v5 = v4;
  OZChannelBase::operator=(a1 + 536, v4 + 536);
  OZChannelBase::operator=(a1 + 792, v5 + 792);
  OZChannelBase::operator=(a1 + 1048, v5 + 1048);
  OZChannelBase::operator=(a1 + 1200, v5 + 1200);
  OZChannelBase::operator=(a1 + 1352, v5 + 1352);
  OZChannelBase::operator=(a1 + 1504, v5 + 1504);
  OZChannelBase::operator=(a1 + 1656, v5 + 1656);
  OZChannelBase::operator=(a1 + 1808, v5 + 1808);
  *(a1 + 2120) = 0;
  result = (*(*a1 + 336))(a1);
  if (result)
  {

    return PSPenPropertyBehavior::updateApplyTo(a1);
  }

  else
  {
    *(a1 + 2112) = 0;
    *(a1 + 529) = 0;
  }

  return result;
}

uint64_t PSPenPropertyBehavior::updateApplyTo(PSPenPropertyBehavior *this)
{
  v2 = (*(*this + 320))(this);
  PCURL::PCURL(&v8, @"Pen Property Behavior Undo Applied To");
  (*(*(this + 2) + 176))(this + 16, &v8, 0);
  PCString::~PCString(&v8);
  (*(*this + 120))(this);
  v3 = v2 + 1000;
  for (i = *(v2 + 1008); i != v3; i = *(i + 8))
  {
    if (*(i + 16) == this)
    {
      goto LABEL_6;
    }
  }

  i = v2 + 1000;
LABEL_6:
  v5 = *(i + 8);
  if (v5 == v3)
  {
    v6 = 0;
  }

  else
  {
    v6 = *(v5 + 16);
  }

  return (*(*this + 104))(this, v2, v6);
}

uint64_t PSPenPropertyBehavior::canAddToSceneNode(PSPenPropertyBehavior *this, OZSceneNode *a2)
{
  result = OZBehavior::canAddToSceneNode(this, a2);
  if (result)
  {
  }

  return result;
}

void PSPenPropertyBehavior::addPenPropertyNodes(PSPenPropertyBehavior *this, OZSceneNode *a2)
{
  ValueAsInt = OZChannel::getValueAsInt((this + 536), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt <= 1)
  {
    if (ValueAsInt > 1)
    {
      goto LABEL_12;
    }
  }

  else if (ValueAsInt != 2)
  {
    if (ValueAsInt == 3)
    {
      v11 = 2;
      goto LABEL_10;
    }

    if (ValueAsInt == 4)
    {
      v11 = 1;
LABEL_10:
      *(this + 529) = v11;
      goto LABEL_13;
    }

LABEL_12:
    PCPrint("File %s, line %d should not have been reached:\n\t", v4, v5, v6, v7, v8, v9, v10, "/Library/Caches/com.apple.xbs/Sources/MotioniOS/Particles/PSPenPropertyBehavior.cpp");
    pcAbortImpl();
  }

  *(this + 529) = 0;
LABEL_13:
  operator new();
}

_BYTE *PSPenPropertyBehavior::didAddToNode(PSPenPropertyBehavior *this, OZSceneNode *a2)
{
  OZChannelBehavior::didAddToNode(this, a2);
  if (a2)
  {
    *(this + 267) = v4;
    if (v4)
    {
      v5 = v4[4732];
      if (v5)
      {
      }

      result = PSPaint::getPaintPType(v5);
      *(this + 268) = result;
      goto LABEL_11;
    }

    v8 = (this + 2136);
  }

  else
  {
    v7 = 0;
    v8 = (this + 2136);
    *(this + 267) = 0;
  }

  *(this + 268) = PSPaint::getPaintPType(v7);
  result = *(v7 + 145);
  if (result)
  {
  }

  *v8 = result;
LABEL_11:
  if ((*(this + 2112) & 1) == 0)
  {
    result = (*(*a2 + 272))(a2);
    if (result)
    {
      result = (*(*a2 + 272))(a2);
      if ((result[1576] & 1) == 0)
      {
        PSPenPropertyBehavior::addPenPropertyNodes(this, v9);
      }
    }
  }

  return result;
}

void *PSPenPropertyBehavior::didAddSceneNodeToScene(PSPenPropertyBehavior *this, OZScene *a2)
{
  result = OZChannelBehavior::didAddSceneNodeToScene(this, a2);
  if (!*(this + 267))
  {
    result = *(*(*(this + 268) + 16432) + 1160);
    if (result)
    {
    }

    *(this + 267) = result;
  }

  if ((*(this + 2112) & 1) == 0)
  {
    (*(*this + 320))(this);
    PSPenPropertyBehavior::addPenPropertyNodes(this, v4);
  }

  return result;
}

PSPenPropertyBehavior *PSPenPropertyBehavior::sceneNodeDidLoad(PSPenPropertyBehavior *this)
{
  if ((*(this + 2112) & 1) == 0)
  {
    v1 = this;
    (*(*this + 320))(this);
    PSPenPropertyBehavior::addPenPropertyNodes(v1, v2);
  }

  return this;
}

OZChannelBase *PSPenPropertyBehavior::updateHiddenFlags(uint64_t a1, uint64_t a2)
{
  v4 = a2;
  while (1)
  {
    v4 = *(v4 + 8);
    if (v4 == a2)
    {
      break;
    }

    {
      OZChannelBase::resetFlag((a1 + 1504), 0x400000, 1);
      OZChannelBase::resetFlag((a1 + 1656), 0x400000, 1);
      v5 = (a1 + 1808);
      OZChannelBase::resetFlag((a1 + 1808), 0x400000, 1);
      OZChannelBase::setFlag((a1 + 1504), 16, 1);
      OZChannelBase::setFlag((a1 + 1656), 16, 1);
      goto LABEL_11;
    }
  }

  v5 = (a1 + 1504);
  OZChannelBase::setFlag((a1 + 1504), 0x400000, 1);
  OZChannelBase::setFlag((a1 + 1656), 0x400000, 1);
  OZChannelBase::setFlag((a1 + 1808), 0x400000, 1);
  OZChannelBase::resetFlag((a1 + 1504), 16, 1);
  OZChannelBase::resetFlag((a1 + 1656), 16, 1);
  result = OZChannelBase::resetFlag((a1 + 1808), 16, 1);
  v7 = *(a1 + 2116);
  if (v7 == 2)
  {
    OZChannelBase::resetFlag((a1 + 1808), 0x400000, 1);
    v5 = (a1 + 1808);
  }

  else if (v7 == 1)
  {
    OZChannelBase::resetFlag((a1 + 1656), 0x400000, 1);
    v5 = (a1 + 1656);
  }

  else
  {
    if (v7)
    {
      return result;
    }

    OZChannelBase::resetFlag((a1 + 1504), 0x400000, 1);
  }

LABEL_11:

  return OZChannelBase::setFlag(v5, 16, 1);
}

uint64_t PSPenPropertyBehavior::setIsInteractive(PSPenPropertyBehavior *this, int a2)
{
  *(this + 2120) = a2;
  if (a2)
  {
    result = OZMoShape::getPaintInteractiveValuesLock((*(this + 267) + 18976));
  }

  else
  {
    result = 0;
  }

  *(this + 266) = result;
  return result;
}

void PSPenPressureBehavior::PSPenPressureBehavior(PSPenPressureBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  PSPenPropertyBehavior::PSPenPropertyBehavior(this, a2, a3, a4);
  *v5 = &unk_2872DA9F8;
  *(v5 + 16) = &unk_2872DACB8;
  *(v5 + 48) = &unk_2872DAF10;
  *(v5 + 336) = &unk_2872DAF68;
  *(v5 + 2152) = 0;
  *(v5 + 2160) = 1;
  *(v5 + 2168) = 0;
  *(v5 + 2176) = 0x3FF0000000000000;
  PCURL::PCURL(&v6, @"Pen Pressure Behavior Min Pressure");
  OZChannelBase::setName((this + 1200), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Pen Pressure Behavior Max Pressure");
  OZChannelBase::setName((this + 1352), &v6, 0);
  PCString::~PCString(&v6);
}

void sub_2602DF91C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  PSPenPropertyBehavior::~PSPenPropertyBehavior(v10);
  _Unwind_Resume(a1);
}

void PSPenPressureBehavior::PSPenPressureBehavior(PSPenPressureBehavior *this, const PSPenPressureBehavior *a2, char a3)
{
  PSPenPropertyBehavior::PSPenPropertyBehavior(this, a2, a3);
  *v4 = &unk_2872DA9F8;
  *(v4 + 16) = &unk_2872DACB8;
  *(v4 + 48) = &unk_2872DAF10;
  *(v4 + 336) = &unk_2872DAF68;
  *(v4 + 2152) = 0;
  *(v4 + 2160) = *(a2 + 2160);
  *(v4 + 2168) = *(a2 + 271);
  *(v4 + 2176) = *(a2 + 272);
}

void non-virtual thunk toPSPenPressureBehavior::~PSPenPressureBehavior(PSPenPressureBehavior *this)
{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

void PSPenPressureBehavior::~PSPenPressureBehavior(PSPenPressureBehavior *this)
{
  PSPenPropertyBehavior::~PSPenPropertyBehavior(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t PSPenPressureBehavior::setIsInteractive(PSPenPressureBehavior *this, int a2)
{
  *(this + 2120) = a2;
  if (a2)
  {
    *(this + 266) = OZMoShape::getPaintInteractiveValuesLock((*(this + 267) + 18976));
    result = OZMoShape::getFreehandPaintPressures((*(this + 267) + 18976));
  }

  else
  {
    result = 0;
    *(this + 266) = 0;
  }

  *(this + 269) = result;
  return result;
}

double PSPenPressureBehavior::getPenProperty(PSPenPressureBehavior *this, Float64 a2, int a3)
{
  if (*(this + 2120) == 1)
  {
    v6 = *(this + 266);
    PCMutex::lock(v6);
    v7 = **(this + 269);
    v8 = ((*(*(this + 269) + 8) - v7) >> 3) - 1;
    v9 = vcvtmd_s64_f64(a2 + 0.0000001);
    if (v9 >= v8)
    {
      v9 = ((*(*(this + 269) + 8) - v7) >> 3) - 1;
    }

    if (v9 + 1 < v8)
    {
      v8 = v9 + 1;
    }

    if (a3)
    {
      v10 = 1.0 - (*(v7 + 8 * v9) + (*(v7 + 8 * v8) - *(v7 + 8 * v9)) * (a2 - v9));
    }

    else
    {
      v10 = *(v7 + 8 * v9) + (*(v7 + 8 * v8) - *(v7 + 8 * v9)) * (a2 - v9);
    }

    if (v6)
    {
      PCMutex::unlock(v6);
    }
  }

  else
  {
    v11 = *(this + 267);
    OZChannelAngleOverRange::getValueOverRangeAsDouble((v11 + 29720), 0.0, a2);
    v10 = v12;
    if (a3)
    {
      if (*(this + 2160))
      {
        *(this + 271) = OZChannel::getKeyframeMinValue((v11 + 29720), 0);
        KeyframeMaxValue = OZChannel::getKeyframeMaxValue((v11 + 29720), 0);
        *(this + 272) = KeyframeMaxValue;
        *(this + 2160) = 0;
      }

      else
      {
        KeyframeMaxValue = *(this + 272);
      }

      return KeyframeMaxValue - (v10 - *(this + 271));
    }
  }

  return v10;
}

void PSPenSpeedBehavior::PSPenSpeedBehavior(PSPenSpeedBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  PSPenPropertyBehavior::PSPenPropertyBehavior(this, a2, a3, a4);
  *v5 = &unk_2872DAF90;
  *(v5 + 16) = &unk_2872DB250;
  *(v5 + 48) = &unk_2872DB4A8;
  *(v5 + 336) = &unk_2872DB500;
  *(v5 + 2152) = 0u;
  *(v5 + 2168) = 1;
  *(v5 + 2176) = xmmword_260342700;
  PCURL::PCURL(&v6, @"Pen Speed Behavior Min Speed");
  OZChannelBase::setName((this + 1200), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Pen Speed Behavior Max Speed");
  OZChannelBase::setName((this + 1352), &v6, 0);
  PCString::~PCString(&v6);
}

void sub_2602DFDD4(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  PSPenPropertyBehavior::~PSPenPropertyBehavior(v10);
  _Unwind_Resume(a1);
}

void PSPenSpeedBehavior::PSPenSpeedBehavior(PSPenSpeedBehavior *this, const PSPenSpeedBehavior *a2, char a3)
{
  PSPenPropertyBehavior::PSPenPropertyBehavior(this, a2, a3);
  *v4 = &unk_2872DAF90;
  *(v4 + 16) = &unk_2872DB250;
  *(v4 + 48) = &unk_2872DB4A8;
  *(v4 + 336) = &unk_2872DB500;
  *(v4 + 2152) = 0u;
  *(v4 + 2168) = *(a2 + 2168);
  *(v4 + 2176) = *(a2 + 136);
}

void non-virtual thunk toPSPenSpeedBehavior::~PSPenSpeedBehavior(PSPenSpeedBehavior *this)
{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

void PSPenSpeedBehavior::~PSPenSpeedBehavior(PSPenSpeedBehavior *this)
{
  PSPenPropertyBehavior::~PSPenPropertyBehavior(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t PSPenSpeedBehavior::setIsInteractive(PSPenSpeedBehavior *this, int a2)
{
  *(this + 2120) = a2;
  if (a2)
  {
    *(this + 266) = OZMoShape::getPaintInteractiveValuesLock((*(this + 267) + 18976));
    *(this + 269) = OZMoShape::getFreehandPaintLengthAccums((*(this + 267) + 18976));
    result = OZMoShape::getFreehandPaintTimes((*(this + 267) + 18976));
  }

  else
  {
    result = 0;
    *(this + 266) = 0;
    *(this + 269) = 0;
  }

  *(this + 270) = result;
  return result;
}

double PSPenSpeedBehavior::getPenProperty(PSPenSpeedBehavior *this, Float64 a2, int a3)
{
  if (*(this + 2120) != 1)
  {
    v26 = *(this + 267);
    OZChannelAngleOverRange::getValueOverRangeAsDouble((v26 + 30328), 0.0, a2);
    v20 = v27;
    if (a3)
    {
      if (*(this + 2168))
      {
        *(this + 272) = OZChannel::getKeyframeMinValue((v26 + 30328), 0);
        KeyframeMaxValue = OZChannel::getKeyframeMaxValue((v26 + 30328), 0);
        *(this + 273) = KeyframeMaxValue;
        *(this + 2168) = 0;
      }

      else
      {
        KeyframeMaxValue = *(this + 273);
      }

      return KeyframeMaxValue - (v20 - *(this + 272));
    }

    return v20;
  }

  v6 = ((*(*(this + 270) + 8) - **(this + 270)) >> 3) - 1;
  v7 = vcvtmd_s64_f64(a2 + 0.0000001);
  if (v7 >= v6)
  {
    v8 = ((*(*(this + 270) + 8) - **(this + 270)) >> 3) - 1;
  }

  else
  {
    v8 = v7;
  }

  if (!v8)
  {
    return 1.0;
  }

  v9 = *(this + 266);
  PCMutex::lock(v9);
  v10 = **(this + 270);
  v11 = *(v10 + 8 * v8);
  v12 = 8 * v8 - 8;
  v13 = v11 - *(v10 + v12);
  v14 = **(this + 269);
  v15 = *(v14 + 8 * v8);
  if (v13 < 0.001)
  {
    v13 = 0.001;
  }

  v16 = (v15 - *(v14 + v12)) / v13;
  if (v16 > 500.0)
  {
    v16 = 500.0;
  }

  v17 = v16 / 500.0;
  v19 = vabdd_f64(a2, v8) >= 0.0000001 && v6 > v7;
  v20 = 0.0;
  if (v19)
  {
    v21 = 8 * v8 + 8;
    v22 = *(v10 + v21) - v11;
    v23 = *(v14 + v21) - v15;
    if (v22 < 0.001)
    {
      v22 = 0.001;
    }

    v24 = v23 / v22;
    if (v24 > 500.0)
    {
      v24 = 500.0;
    }

    v25 = v17 + (a2 - v8) * (v24 / 500.0 - v17);
    if (a3)
    {
      v20 = 1.0 - v25;
    }

    else
    {
      v20 = v25;
    }
  }

  if (v9)
  {
    PCMutex::unlock(v9);
  }

  if (v19)
  {
    return v20;
  }

  return v17;
}

void PSPenTiltBehavior::PSPenTiltBehavior(PSPenTiltBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  PSPenPropertyBehavior::PSPenPropertyBehavior(this, a2, a3, a4);
  *v5 = &unk_2872DB528;
  v5[2] = &unk_2872DB7E8;
  v5[6] = &unk_2872DBA40;
  v5[42] = &unk_2872DBA98;
  v5[269] = 0;
  PCURL::PCURL(&v6, @"Pen Tilt Behavior Min Tilt");
  OZChannelBase::setName((this + 1200), &v6, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Pen Tilt Behavior Max Tilt");
  OZChannelBase::setName((this + 1352), &v6, 0);
  PCString::~PCString(&v6);
  OZChannelBase::resetFlag((this + 792), 2, 0);
  (*(*(this + 99) + 128))(this + 792);
  OZChannelBase::resetFlag((this + 1048), 2, 0);
  (*(*(this + 131) + 128))(this + 1048);
}

void sub_2602E03B4(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  PSPenPropertyBehavior::~PSPenPropertyBehavior(v10);
  _Unwind_Resume(a1);
}

void PSPenTiltBehavior::PSPenTiltBehavior(PSPenTiltBehavior *this, const PSPenTiltBehavior *a2, char a3)
{
  PSPenPropertyBehavior::PSPenPropertyBehavior(this, a2, a3);
  *v3 = &unk_2872DB528;
  v3[2] = &unk_2872DB7E8;
  v3[6] = &unk_2872DBA40;
  v3[42] = &unk_2872DBA98;
  v3[269] = 0;
}

void non-virtual thunk toPSPenTiltBehavior::~PSPenTiltBehavior(PSPenTiltBehavior *this)
{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  PSPenPropertyBehavior::~PSPenPropertyBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

void PSPenTiltBehavior::~PSPenTiltBehavior(PSPenTiltBehavior *this)
{
  PSPenPropertyBehavior::~PSPenPropertyBehavior(this);

  JUMPOUT(0x2666E9F00);
}

OZChannelBase *PSPenTiltBehavior::updateHiddenFlags(uint64_t a1, uint64_t a2)
{
  PSPenPropertyBehavior::updateHiddenFlags(a1, a2);
  v4 = MEMORY[0x277CC08F0];
  v5 = a2;
  while (1)
  {
    v5 = *(v5 + 8);
    if (v5 == a2)
    {
      break;
    }

    if (OZChannel::getValueAsInt((v6 + 792), v4, 0.0) == 3)
    {

      return OZChannelBase::resetFlag((a1 + 1048), 0x400000, 1);
    }
  }

  return OZChannelBase::setFlag((a1 + 1048), 0x400000, 1);
}

uint64_t PSPenTiltBehavior::setIsInteractive(PSPenTiltBehavior *this, int a2)
{
  *(this + 2120) = a2;
  if (a2)
  {
    *(this + 266) = OZMoShape::getPaintInteractiveValuesLock((*(this + 267) + 18976));
    result = OZMoShape::getFreehandPaintTilts((*(this + 267) + 18976));
  }

  else
  {
    result = 0;
    *(this + 266) = 0;
  }

  *(this + 269) = result;
  return result;
}

void PSPenTiltBehavior::getPenProperty(PSPenTiltBehavior *this, double a2)
{
  ValueAsInt = OZChannel::getValueAsInt((this + 792), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt <= 1)
  {
    if (!ValueAsInt)
    {
      PSPenTiltBehavior::getAbsoluteTilt(this, a2);
      return;
    }

    if (ValueAsInt != 1)
    {
      return;
    }

LABEL_8:
    v6 = 0;
    v7 = 0.0;
    PSPenTiltBehavior::getPenTilt(this, v5, a2, &v7, &v6);
    return;
  }

  switch(ValueAsInt)
  {
    case 2:
      goto LABEL_8;
    case 3:
      PSPenTiltBehavior::getTiltAlongAxis(this, a2);
      break;
    case 4:
      PSPenTiltBehavior::getTiltPolar(this, a2);
      break;
  }
}

void PSPenTiltBehavior::getAbsoluteTilt(PSPenTiltBehavior *this, double a2)
{
  v6 = 0.0;
  v7 = 0.0;
  PSPenTiltBehavior::getPenTilt(this, a2, a2, &v7, &v6);
  v3 = v6;
  v2 = v7;
  if (fabs(v7) >= 0.0000001 || fabs(v6) >= 0.0000001)
  {
    hypot(v7, v6);
    v4 = atan2(v3, v2);
    v5 = fmod(v4, 1.57079633);
    if (v5 > 0.785398163)
    {
      v5 = 1.57079633 - v5;
    }

    cos(v5);
  }
}

void PSPenTiltBehavior::getPenTilt(PSPenTiltBehavior *this, double a2, Float64 a3, double *a4, double *a5)
{
  if (*(this + 2120) == 1)
  {
    v9 = *(this + 266);
    PCMutex::lock(v9);
    v10 = **(this + 269);
    v11 = ((*(*(this + 269) + 8) - v10) >> 4) - 1;
    v12 = vcvtmd_s64_f64(a3 + 0.0000001);
    if (v12 >= v11)
    {
      v12 = ((*(*(this + 269) + 8) - v10) >> 4) - 1;
    }

    if (v12 + 1 < v11)
    {
      v11 = v12 + 1;
    }

    v13 = (v10 + 16 * v12);
    v14 = v13[1];
    v15 = (v10 + 16 * v11);
    v16 = v15[1];
    v17 = a3 - v12;
    *a4 = *v13 + (*v15 - *v13) * v17;
    *a5 = v14 + (v16 - v14) * v17;
    if (v9)
    {
      PCMutex::unlock(v9);
    }
  }

  else
  {
    v18 = (*(this + 267) + 29880);

    OZChannel2DOverRange::getValueOverRange(v18, 0.0, a3, a4, a5);
  }
}

void PSPenTiltBehavior::getTiltAlongAxis(PSPenTiltBehavior *this, double a2)
{
  v9 = 0.0;
  v10 = 0.0;
  PSPenTiltBehavior::getPenTilt(this, a2, a2, &v10, &v9);
  if (fabs(v10) >= 0.0000001 || fabs(v9) >= 0.0000001)
  {
    OZChannel::getValueAsDouble((this + 1048), MEMORY[0x277CC08F0], 0.0);
    v4 = v3;
    v5 = v9;
    v6 = v10;
    v7 = atan2(v9, v10);
    cos(v7 - v4);
    hypot(v6, v5);
    v8 = fmod(v4, 1.57079633);
    if (v8 > 0.785398163)
    {
      v8 = 1.57079633 - v8;
    }

    cos(v8);
  }
}

double PSPenTiltBehavior::getTiltPolar(PSPenTiltBehavior *this, double a2)
{
  v5 = 0.0;
  v6 = 0.0;
  PSPenTiltBehavior::getPenTilt(this, a2, a2, &v6, &v5);
  v2 = 0.0;
  if (v6 * v6 + v5 * v5 >= 0.01)
  {
    v3 = atan2(v5, v6);
    if (v3 < 0.0)
    {
      v3 = v3 + 6.28318531;
    }

    return v3 / 6.28318531;
  }

  return v2;
}

uint64_t PSPenPressureBehavior::getDefaultApplyTo(PSPenPressureBehavior *this)
{
  v1 = OZPreferenceManager::Instance(this);

  return OZPreferenceManager::getStrokeApplyPenPressureTo(v1);
}

uint64_t PSPenSpeedBehavior::getDefaultApplyTo(PSPenSpeedBehavior *this)
{
  v1 = OZPreferenceManager::Instance(this);

  return OZPreferenceManager::getStrokeApplyPenSpeedTo(v1);
}

void PSEmitterRender::PSEmitterRender(PSEmitterRender *this, PSEmitter *a2, const OZRenderParams *a3)
{
  *(this + 184) = &unk_2872DEA38;
  *(this + 185) = 0;
  *(this + 1488) = 1;
  LiImageSource::LiImageSource(this, &off_2872DBBF8);
  *this = &unk_2872DBB10;
  *(this + 184) = &unk_2872DBBD8;
  *(this + 2) = a2;
  OZRenderParams::OZRenderParams((this + 24), a3);
  *(this + 182) = 0;
  *(this + 1464) = 0;
  *(this + 1448) = OZChannel::getValueAsInt((*(this + 2) + 32792), MEMORY[0x277CC08F0], 0.0) != 0;
}

void sub_2602E0C68(_Unwind_Exception *a1)
{
  OZRenderParams::~OZRenderParams((v1 + 24));
  OZChannelBase::setRangeName(v1, &off_2872DBBF8);
  *(v1 + 1472) = v2;
  *(v1 + 1488) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1480));
  _Unwind_Resume(a1);
}

uint64_t PSEmitterRender::getBoundary(uint64_t a1, uint64_t a2, uint64_t a3)
{
  if (*(a1 + 1448) == 1)
  {
    (*(***(a2 + 48) + 280))(v7);
    v4 = *&v7[16];
    *a3 = *v7;
    *(a3 + 16) = v4;
  }

  else
  {
    v5 = *(a1 + 16);
    v14 = 0x3FF0000000000000;
    v11 = 0x3FF0000000000000;
    v8 = 0x3FF0000000000000;
    *v7 = 0x3FF0000000000000;
    memset(&v7[8], 0, 32);
    v9 = 0u;
    v10 = 0u;
    v12 = 0u;
    v13 = 0u;
    PSEmitter::getRenderBounds(v5, a3, (a1 + 24), v7);
  }

  return 1;
}

double PSEmitterRender::fixPixelTransform(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  if ((*(a1 + 1448) & 1) != 0 || !OZRenderParams::getDoHighQualityResampling((a1 + 24)))
  {

    return LiImageSource::fixPixelTransform(a1, a2, a3, a4);
  }

  else
  {
    OZRenderParams::getResolution((a1 + 24), &v10);
    v8 = v10.n128_u64[1];
    *a3 = v10.n128_u64[0];
    result = 0.0;
    *(a3 + 8) = 0u;
    *(a3 + 24) = 0u;
    *(a3 + 40) = v8;
    *(a3 + 48) = 0u;
    *(a3 + 64) = 0u;
    *(a3 + 80) = 0x3FF0000000000000;
    *(a3 + 88) = 0u;
    *(a3 + 104) = 0u;
    *(a3 + 120) = 0x3FF0000000000000;
  }

  return result;
}

uint64_t PSEmitterRender::pixelTransformSupport(PSEmitterRender *this, const LiRenderParameters *a2)
{
  v2 = 6;
  if ((*(this + 1448) & 1) == 0)
  {
    if (OZRenderParams::getDoHighQualityResampling((this + 24)))
    {
      return 0;
    }

    else
    {
      return 6;
    }
  }

  return v2;
}

CGColorSpace **PSEmitterRender::getHelium@<X0>(PSEmitterRender *this@<X0>, LiAgent *a2@<X1>, PSHeliumNode **a3@<X8>)
{
  RequestedColorDescription = LiAgent::getRequestedColorDescription(a2);
  WorkingColorSpace = OZRenderParams::getWorkingColorSpace((this + 24));
  FxColorDescription::FxColorDescription(&v9, RequestedColorDescription, WorkingColorSpace);
  OZRenderParams::setWorkingColorDescription(this + 3, &v9);
  PSEmitter::getHelium(*(this + 2), this + 1, a2, a3);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v9._pcColorDesc._colorSpaceRef._obj);
}

uint64_t PSEmitterRender::estimateRenderMemory(uint64_t a1)
{
  if (*(a1 + 1464) == 1)
  {
    return *(a1 + 1456);
  }

  v12 = 0x3FF0000000000000;
  v9 = 0x3FF0000000000000;
  v6 = 0x3FF0000000000000;
  v3 = 0x3FF0000000000000;
  v4 = 0u;
  v5 = 0u;
  v7 = 0u;
  v8 = 0u;
  v10 = 0u;
  v11 = 0u;
  result = PSEmitter::estimateRenderMemory(*(a1 + 16), (a1 + 24), &v3);
  *(a1 + 1456) = result;
  *(a1 + 1464) = 1;
  return result;
}

void PSEmitterRender::~PSEmitterRender(PSEmitterRender *this)
{
  *this = &unk_2872DBB10;
  *(this + 184) = &unk_2872DBBD8;
  OZRenderParams::~OZRenderParams((this + 24));
  OZChannelBase::setRangeName(this, &off_2872DBBF8);
  *(this + 184) = &unk_2872DEA38;
  *(this + 1488) = 0;
  PCWeakCount::~PCWeakCount(this + 185);
}

{
  *this = &unk_2872DBB10;
  *(this + 184) = &unk_2872DBBD8;
  OZRenderParams::~OZRenderParams((this + 24));
  OZChannelBase::setRangeName(this, &off_2872DBBF8);
  *(this + 184) = &unk_2872DEA38;
  *(this + 1488) = 0;
  PCWeakCount::~PCWeakCount(this + 185);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toPSEmitterRender::~PSEmitterRender(PSEmitterRender *this)
{
  v1 = this + *(*this - 24);
  *v1 = &unk_2872DBB10;
  *(v1 + 184) = &unk_2872DBBD8;
  OZRenderParams::~OZRenderParams((v1 + 24));
  OZChannelBase::setRangeName(v1, &off_2872DBBF8);
  *(v1 + 184) = &unk_2872DEA38;
  v1[1488] = 0;

  PCWeakCount::~PCWeakCount(v1 + 185);
}

{
  v1 = this + *(*this - 24);
  *v1 = &unk_2872DBB10;
  *(v1 + 184) = &unk_2872DBBD8;
  OZRenderParams::~OZRenderParams((v1 + 24));
  OZChannelBase::setRangeName(v1, &off_2872DBBF8);
  *(v1 + 184) = &unk_2872DEA38;
  v1[1488] = 0;
  PCWeakCount::~PCWeakCount(v1 + 185);

  JUMPOUT(0x2666E9F00);
}

void PSImageTint::PSImageTint(PSImageTint *this)
{
  *(this + 7) = &unk_2872DEA38;
  *(this + 8) = 0;
  *(this + 72) = 1;
  LiImageFilter::LiImageFilter(this, &off_2872DBEB0);
  *this = &unk_2872DBDA8;
  *(this + 7) = &unk_2872DBE90;
  PCWorkingColorVector::PCWorkingColorVector((this + 36));
}

void sub_2602E1320(_Unwind_Exception *a1)
{
  LiImageFilter::~LiImageFilter(v1, &off_2872DBEB0);
  *(v1 + 56) = v2;
  *(v1 + 72) = 0;
  PCWeakCount::~PCWeakCount(v3);
  _Unwind_Resume(a1);
}

void PSImageTint::~PSImageTint(PCSharedCount *this)
{
  *(v1 + 56) = &unk_2872DEA38;
  *(v1 + 72) = 0;
  PCWeakCount::~PCWeakCount((v1 + 64));
}

{
  *(v1 + 56) = &unk_2872DEA38;
  *(v1 + 72) = 0;
  PCWeakCount::~PCWeakCount((v1 + 64));

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toPSImageTint::~PSImageTint(PSImageTint *this)
{
  *(v1 + 56) = &unk_2872DEA38;
  *(v1 + 72) = 0;
  v2 = (v1 + 64);

  PCWeakCount::~PCWeakCount(v2);
}

{
  PSImageTint::~PSImageTint((this + *(*this - 24)));
}

void sub_2602E15A4(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, PCSharedCount a12)
{
  PCSharedCount::~PCSharedCount(&a12);
  PCSharedCount::~PCSharedCount(v12 + 1);
  _Unwind_Resume(a1);
}

void PSImageTint::getHelium(PSImageTint *this@<X0>, LiAgent *a2@<X1>, HgcPSImageTint **a3@<X8>)
{
  *(a2 + 8) = 2;
  v6 = *(this + 2);
  CGColorSpace = FxColorDescription::getCGColorSpace((*(a2 + 6) + 160));
  LiAgent::getHeliumInColorSpace(a2, v6, CGColorSpace, &v9);
  if (v9)
  {
    v8 = HGObject::operator new(0x200uLL);
    HgcPSImageTint::HgcPSImageTint(v8);
    (*(*v8 + 96))(v8, 0, *(this + 9), *(this + 10), *(this + 11), *(this + 12));
    (*(*v8 + 120))(v8, 0, v9);
    *a3 = v8;
    if (v9)
    {
      (*(*v9 + 24))(v9);
    }
  }

  else
  {
    *a3 = 0;
  }
}

void sub_2602E16F8(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  HGObject::operator delete(v10);
  if (a10)
  {
    (*(*a10 + 24))(a10);
  }

  _Unwind_Resume(a1);
}

PCShared_base **PCPtr<OZGLGradientRadial>::operator=<OZGLGradientRadial>(PCShared_base **a1, PCShared_base *a2)
{
  v8 = a2;
  if (a2)
  {
    a2 = (a2 + *(*a2 - 24));
  }

  PCSharedCount::PCSharedCount(&v9, a2);
  v3 = v8;
  *a1 = v8;
  if (v3)
  {
    PCSharedCount::PCSharedCount(&v6, &v9);
    v4 = &v6;
    PCSharedCount::operator=(a1 + 1, &v6);
  }

  else
  {
    PCSharedCount::PCSharedCount(&v7);
    v4 = &v7;
    PCSharedCount::operator=(a1 + 1, &v7);
  }

  PCSharedCount::~PCSharedCount(v4);
  PCSharedCount::~PCSharedCount(&v9);
  return a1;
}

void sub_2602E1830(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PCSharedCount::~PCSharedCount(va);
  PCSharedCount::~PCSharedCount(v2 + 1);
  _Unwind_Resume(a1);
}

void PSGradDabRender::PSGradDabRender(PSGradDabRender *this, OZChannelGradient *a2, const OZRenderParams *a3)
{
  *(this + 181) = &unk_2872DEA38;
  *(this + 182) = 0;
  *(this + 1464) = 1;
  LiImageSource::LiImageSource(this, &off_2872DC270);
  *this = &unk_2872DC188;
  *(this + 181) = &unk_2872DC250;
  OZRenderParams::OZRenderParams((this + 16), a3);
  *(this + 180) = 0;
  v6 = HGObject::operator new(0x390uLL);
  PSHeliumNode::PSHeliumNode(v6, a3);
  v7 = *(this + 180);
  if (v7 == v6)
  {
    if (v6)
    {
      (*(*v6 + 24))(v6);
    }
  }

  else
  {
    if (v7)
    {
      (*(*v7 + 24))(v7);
    }

    *(this + 180) = v6;
  }

  if (*(*HGRenderJob::GetRenderNodeList(a3) + 8))
  {
    if (LiRenderingTechnology::getEnableMetalRendering((a3 + 1316)))
    {
      PCSharedCount::PCSharedCount(&v9[1]);
      operator new();
    }

    PCSharedCount::PCSharedCount(&v9[1]);
    operator new();
  }

  v8 = *(this + 180);
  v10 = *a3;
  PSHeliumNode::initGradient(v8, a2, &v10);
}

void sub_2602E1C2C(_Unwind_Exception *a1)
{
  v4 = *(v1 + 1440);
  if (v4)
  {
    (*(*v4 + 24))(v4);
  }

  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName(v1, &off_2872DC270);
  *(v1 + 1448) = v2;
  *(v1 + 1464) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1456));
  _Unwind_Resume(a1);
}

void PSGradDabRender::~PSGradDabRender(OZChannelBase *this, const PCString *a2)
{
  var0 = a2->var0;
  this->var0 = a2->var0;
  *(&this->var0 + var0[-1].info) = a2[5];
  var12 = this[12].var12;
  if (var12)
  {
    (*(var12->isa + 3))(var12);
  }

  OZRenderParams::~OZRenderParams(&this->var2);

  OZChannelBase::setRangeName(this, a2 + 1);
}

void PSGradDabRender::~PSGradDabRender(OZChannelBase *this)
{
  *(v1 + 1448) = &unk_2872DEA38;
  *(v1 + 1464) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1456));
}

{
  *(v1 + 1448) = &unk_2872DEA38;
  *(v1 + 1464) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1456));

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toPSGradDabRender::~PSGradDabRender(PSGradDabRender *this)
{
  *(v1 + 1448) = &unk_2872DEA38;
  *(v1 + 1464) = 0;
  v2 = (v1 + 1456);

  PCWeakCount::~PCWeakCount(v2);
}

{
  PSGradDabRender::~PSGradDabRender((this + *(*this - 24)));
}

uint64_t PSGradDabRender::getBoundary(uint64_t a1, uint64_t a2, double *a3)
{
  v3 = *(a1 + 218) == 0;
  v4 = -128.0;
  if (*(a1 + 218))
  {
    v4 = -18.0;
  }

  *a3 = v4;
  a3[1] = v4;
  v5 = 256.0;
  if (!v3)
  {
    v5 = 36.0;
  }

  a3[2] = v5;
  a3[3] = v5;
  return 1;
}

uint64_t PSGradDabRender::getHelium@<X0>(PSGradDabRender *this@<X0>, LiAgent *a2@<X1>, void *a3@<X8>)
{
  PSHeliumNode::preRender(*(this + 180));
  v6 = *(this + 180);
  *a3 = v6;
  if (v6)
  {
    (*(*v6 + 16))(v6);
    v7 = *(this + 180);
    if (v7)
    {
      (*(*v7 + 24))(v7);
    }
  }

  *(this + 180) = 0;
  CGColorSpace = FxColorDescription::getCGColorSpace((*(a2 + 6) + 160));
  return LiAgent::setActualColorSpace(a2, CGColorSpace);
}

void PSSolidDabRender::PSSolidDabRender(PSSolidDabRender *this, const OZRenderParams *a2)
{
  *(this + 180) = &unk_2872DEA38;
  *(this + 181) = 0;
  *(this + 1456) = 1;
  LiImageSource::LiImageSource(this, &off_2872DC508);
  *this = &unk_2872DC420;
  *(this + 180) = &unk_2872DC4E8;
  OZRenderParams::OZRenderParams((this + 16), a2);
}

void sub_2602E2190(_Unwind_Exception *a1)
{
  OZChannelBase::setRangeName(v1, &off_2872DC508);
  *(v1 + 1440) = v2;
  *(v1 + 1456) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1448));
  _Unwind_Resume(a1);
}

void PSSolidDabRender::~PSSolidDabRender(OZChannelBase *this, const PCString *a2)
{
  var0 = a2->var0;
  this->var0 = a2->var0;
  *(&this->var0 + var0[-1].info) = a2[5];
  OZRenderParams::~OZRenderParams(&this->var2);

  OZChannelBase::setRangeName(this, a2 + 1);
}

void PSSolidDabRender::~PSSolidDabRender(OZChannelBase *this)
{
  *(v1 + 1440) = &unk_2872DEA38;
  *(v1 + 1456) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1448));
}

{
  *(v1 + 1440) = &unk_2872DEA38;
  *(v1 + 1456) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1448));

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toPSSolidDabRender::~PSSolidDabRender(PSSolidDabRender *this)
{
  *(v1 + 1440) = &unk_2872DEA38;
  *(v1 + 1456) = 0;
  v2 = (v1 + 1448);

  PCWeakCount::~PCWeakCount(v2);
}

{
  PSSolidDabRender::~PSSolidDabRender((this + *(*this - 24)));
}

uint64_t PSSolidDabRender::getBoundary(uint64_t a1, uint64_t a2, uint64_t a3)
{
  __asm { FMOV            V0.2D, #-18.0 }

  *a3 = _Q0;
  *(a3 + 16) = vdupq_n_s64(0x4042000000000000uLL);
  return 1;
}

uint64_t PSSolidDabRender::getHelium@<X0>(PSSolidDabRender *this@<X0>, LiAgent *a2@<X1>, PSHeliumNode **a3@<X8>)
{
  v6 = HGObject::operator new(0x390uLL);
  PSHeliumNode::PSHeliumNode(v6, (this + 16));
  OZRenderParams::getResolution((this + 16), &v19);
  v7 = *(this + 218);
  v29 = 0x3FF0000000000000;
  v25 = 0;
  v26 = 0x3FF0000000000000;
  v27 = 0u;
  v28 = 0u;
  v8 = v19.n128_f64[0] * 36.0;
  if (!v7)
  {
    v8 = 256.0;
  }

  v20 = 0.0;
  v19 = 0x3FF0000000000000uLL;
  v21 = xmmword_260342EC0;
  v22 = xmmword_2603426F0;
  v23 = 0.5;
  v24 = 0;
  if (v8 != 1.0)
  {
    v19.n128_f64[0] = v8;
    v19.n128_f64[1] = v8 * 0.0;
    v20 = v8 * 0.0;
    *&v21 = v8 * 0.5;
    *(&v21 + 1) = v8 * 0.0;
    *&v22 = v8;
    *(&v22 + 1) = v8 * 0.0;
    v23 = v8 * 0.5;
  }

  PCWorkingColorVector::PCWorkingColorVector(&v18, 1.0, 1.0, 1.0, 1.0);
  __asm
  {
    FMOV            V0.2D, #-0.5
    FMOV            V1.2D, #1.0
  }

  v17[0] = _Q0;
  v17[1] = _Q1;
  PSHeliumNode::addCircleParticle(v6, &v19, v17, &v18, 0);
  PSHeliumNode::preRender(v6);
  CGColorSpace = FxColorDescription::getCGColorSpace((*(a2 + 6) + 160));
  result = LiAgent::setActualColorSpace(a2, CGColorSpace);
  *a3 = v6;
  return result;
}

void sub_2602E2554(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  _Unwind_Resume(exception_object);
}

void QuadNode::~QuadNode(QuadNode *this)
{
  for (i = 8; i != 40; i += 8)
  {
    v3 = *(this + i);
    if (v3)
    {
      QuadNode::~QuadNode(v3);
      MEMORY[0x2666E9F00]();
    }

    *(this + i) = 0;
  }

  v4 = *(this + 9);
  if (v4)
  {
    *(this + 10) = v4;
    operator delete(v4);
  }
}

void QuadNode::insert(QuadNode *this, PSHeliumNode::Sprite *a2)
{
  if (PCRect<double>::intersects(this + 5, a2 + 20))
  {
    if (PCRect<double>::contains(a2 + 20, this + 5) || *(this + 7) < 64.0 || *(this + 8) < 64.0)
    {
      v5 = *(this + 10);
      v4 = *(this + 11);
      if (v5 >= v4)
      {
        v7 = *(this + 9);
        v8 = (v5 - v7) >> 3;
        if ((v8 + 1) >> 61)
        {
          std::vector<double>::__throw_length_error[abi:ne200100]();
        }

        v9 = v4 - v7;
        v10 = v9 >> 2;
        if (v9 >> 2 <= (v8 + 1))
        {
          v10 = v8 + 1;
        }

        if (v9 >= 0x7FFFFFFFFFFFFFF8)
        {
          v11 = 0x1FFFFFFFFFFFFFFFLL;
        }

        else
        {
          v11 = v10;
        }

        if (v11)
        {
          std::__allocate_at_least[abi:ne200100]<std::allocator<HGRef<HGBitmap>>>(this + 72, v11);
        }

        v12 = (8 * v8);
        *v12 = a2;
        v6 = 8 * v8 + 8;
        v13 = *(this + 9);
        v14 = *(this + 10) - v13;
        v15 = v12 - v14;
        memcpy(v12 - v14, v13, v14);
        v16 = *(this + 9);
        *(this + 9) = v15;
        *(this + 10) = v6;
        *(this + 11) = 0;
        if (v16)
        {
          operator delete(v16);
        }
      }

      else
      {
        *v5 = a2;
        v6 = (v5 + 1);
      }

      *(this + 10) = v6;
    }

    else
    {
      v17 = this + 8;
      if (!*(this + 1))
      {
        operator new();
      }

      for (i = 0; i != 32; i += 8)
      {
        QuadNode::insert(*&v17[i], a2);
      }
    }
  }
}

uint64_t QuadNode::getSprites(uint64_t a1, double *a2, void *a3)
{
  result = PCRect<double>::intersects((a1 + 40), a2);
  if (result)
  {
    v7 = *(a1 + 72);
    v8 = *(a1 + 80);
    while (v7 != v8)
    {
      result = std::__tree<PSHeliumNode::Sprite *,PSHeliumNode::lessThanSprite,std::allocator<PSHeliumNode::Sprite *>>::__emplace_hint_unique_key_args<PSHeliumNode::Sprite *,PSHeliumNode::Sprite * const&>(a3, a3 + 1, v7);
      v7 += 8;
    }

    v10 = *(a1 + 8);
    v9 = a1 + 8;
    if (v10)
    {
      for (i = 0; i != 32; i += 8)
      {
        result = QuadNode::getSprites(*(v9 + i), a2, a3);
      }
    }
  }

  return result;
}

void PSHeliumNode::PSHeliumNode(PSHeliumNode *this, const OZRenderParams *a2)
{
  HGNode::HGNode(this);
  v3->var0 = &unk_2872DC6B0;
  v3[55].var0 = 0;
  PCSharedCount::PCSharedCount(v3 + 56);
  *(this + 57) = 0;
  PCSharedCount::PCSharedCount(this + 58);
  *(this + 536) = 0u;
  *(this + 30) = 0u;
  *(this + 31) = 0u;
  *(this + 32) = 0u;
  *(this + 66) = this + 536;
  *(this + 35) = 0u;
  *(this + 69) = this + 560;
  *(this + 74) = 0;
  *(this + 600) = 0u;
  *(this + 73) = this + 592;
  *(this + 616) = 0u;
  LiClipSet::LiClipSet((this + 632));
  *(this + 100) = 0x3FF0000000000000;
  *(this + 95) = 0x3FF0000000000000;
  *(this + 90) = 0x3FF0000000000000;
  *(this + 85) = 0x3FF0000000000000;
  *(this + 43) = 0u;
  *(this + 44) = 0u;
  *(this + 728) = 0u;
  *(this + 744) = 0u;
  *(this + 48) = 0u;
  *(this + 49) = 0u;
  *(this + 808) = 0u;
  *(this + 103) = 0xBFF0000000000000;
  *(this + 104) = 0xBFF0000000000000;
  *(this + 3) = 72886678;
  (*(*this + 136))(this, 0xFFFFFFFFLL, 33);
  (*(*this + 136))(this, 0xFFFFFFFFLL, 1024);
  (*(*this + 136))(this, 0xFFFFFFFFLL, 512);
  operator new();
}

void sub_2602E2B14(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, void **a10)
{
  std::vector<std::shared_ptr<HGGPUComputeDevice const>>::__destroy_vector::operator()[abi:ne200100](&a10);
  std::__tree<std::shared_ptr<PCImage>>::destroy(v10 + 584, *(v10 + 592));
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(v10 + 552, *(v10 + 560));
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(v10 + 528, *(v10 + 536));
  v12 = *(v10 + 504);
  if (v12)
  {
    *(v10 + 512) = v12;
    operator delete(v12);
  }

  a10 = (v10 + 480);
  std::vector<PSHeliumNode::Sprite>::__destroy_vector::operator()[abi:ne200100](&a10);
  PCSharedCount::~PCSharedCount((v10 + 464));
  PCSharedCount::~PCSharedCount((v10 + 448));
  HGNode::~HGNode(v10);
  _Unwind_Resume(a1);
}

void PSHeliumNode::~PSHeliumNode(PCSharedCount *this)
{
  this->var0 = &unk_2872DC6B0;
  var0 = this[51].var0;
  if (var0)
  {
    MEMORY[0x2666E9F00](var0, 0xC400A2AC0F1);
  }

  v3 = this[59].var0;
  if (v3)
  {
    MEMORY[0x2666E9ED0](v3, 0x1000C8052888210);
  }

  this[59].var0 = 0;
  v4 = this[105].var0;
  if (v4)
  {
    QuadNode::~QuadNode(v4);
    v4 = MEMORY[0x2666E9F00]();
  }

  this[105].var0 = 0;
  v5 = this[109].var0;
  if (v5)
  {
    atomic_fetch_add(&gBitmapCacheSize, -v5);
  }

  v6 = PSTextureCache::Instance(v4);
  PSTextureCache::removeTextures(v6, &this[73].var0);
  v7 = this[110].var0;
  if (v7)
  {
    glDeleteProgram(v7);
  }

  LiClipSet::~LiClipSet(&this[79]);
  v9 = this + 76;
  std::vector<std::shared_ptr<HGGPUComputeDevice const>>::__destroy_vector::operator()[abi:ne200100](&v9);
  std::__tree<std::shared_ptr<PCImage>>::destroy(&this[73], this[74].var0);
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&this[69], this[70].var0);
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&this[66], this[67].var0);
  v8 = this[63].var0;
  if (v8)
  {
    this[64].var0 = v8;
    operator delete(v8);
  }

  v9 = this + 60;
  std::vector<PSHeliumNode::Sprite>::__destroy_vector::operator()[abi:ne200100](&v9);
  PCSharedCount::~PCSharedCount(this + 58);
  PCSharedCount::~PCSharedCount(this + 56);
  HGNode::~HGNode(this);
}

{
  PSHeliumNode::~PSHeliumNode(this);

  HGObject::operator delete(v1);
}

void PSHeliumNode::initProgram(PSHeliumNode *this)
{
  v7 = *MEMORY[0x277D85DE8];
  Shader = glCreateShader(0x8B31u);
  glShaderSource(Shader, 1, vertexShaderSrc, 0);
  glCompileShader(Shader);
  v3 = glCreateShader(0x8B30u);
  glShaderSource(v3, 1, &fragmentShaderSrc, 0);
  glCompileShader(v3);
  Program = glCreateProgram();
  *(this + 220) = Program;
  glAttachShader(Program, Shader);
  glAttachShader(*(this + 220), v3);
  glBindAttribLocation(*(this + 220), 0, "a_position");
  glBindAttribLocation(*(this + 220), 1u, "a_texCoord");
  glBindAttribLocation(*(this + 220), 2u, "a_partColor");
  glLinkProgram(*(this + 220));
  length = 0;
  glGetShaderInfoLog(Shader, 2048, &length, infolog);
  if (length)
  {
    printf("Vert Shader log:%s\n", infolog);
  }

  length = 0;
  glGetShaderInfoLog(v3, 2048, &length, infolog);
  if (length)
  {
    printf("Frag Shader log:%s\n", infolog);
  }

  length = 0;
  glGetProgramInfoLog(*(this + 220), 2048, &length, infolog);
  if (length)
  {
    printf("Program log:%s\n", infolog);
  }

  glDetachShader(*(this + 220), Shader);
  glDeleteShader(Shader);
  glDetachShader(*(this + 220), v3);
  glDeleteShader(v3);
}

uint64_t PSHeliumNode::RenderTile(PSHeliumNode *this, HGTile *a2)
{
  v5 = (a2 + 16);
  v4 = *(a2 + 2);
  v6 = *(a2 + 2);
  v7 = *(a2 + 3);
  v8 = *a2;
  v9 = *(a2 + 1);
  v10 = v6 - *a2;
  v11 = *(a2 + 6);
  v12 = v7 - v9;
  if (v7 - v9 >= 1)
  {
    v13 = 0;
    do
    {
      if (v6 != v8)
      {
        v14 = 0;
        do
        {
          v15 = &v4[16 * v14];
          *v15 = 0;
          *(v15 + 1) = 0;
          ++v14;
        }

        while (v10 > v14);
        v7 = *(a2 + 3);
        v9 = *(a2 + 1);
      }

      ++v13;
      v12 = v7 - v9;
      v4 += 16 * v11;
    }

    while (v13 < v7 - v9);
    v11 = *(a2 + 6);
    v4 = *(a2 + 2);
    v10 = *(a2 + 2) - *a2;
  }

  v16 = v10 * v12;
  Stack = HGExecutionUnit::GetStack(*(a2 + 42), 0);
  v18 = *(a2 + 42);
  if (v4 != Stack)
  {
    HGExecutionUnit::SwapStack(v18);
    v19 = *(a2 + 2);
    if (v19 != HGExecutionUnit::GetStack(*(a2 + 42), 0))
    {
      goto LABEL_13;
    }

    v18 = *(a2 + 42);
  }

  HGExecutionUnit::CommitStack(v18, *v5, v11 * v12);
LABEL_13:
  HGExecutionUnit::SwapStack(*(a2 + 42));
  v20 = HGExecutionUnit::GetStack(*(a2 + 42), v16);
  HGExecutionUnit::CommitStack(*(a2 + 42), v20, v16);
  v21 = *v5;
  v35[0] = *a2;
  v35[1] = v21;
  v35[5] = v21;
  v36 = v20;
  v37 = v10;
  v38 = v35[0];
  v39 = v35[0];
  v40 = *(a2 + 42);
  Effect_toPCRecti(a2, &v32);
  v22.i64[0] = v32;
  v22.i64[1] = SHIDWORD(v32);
  v23 = vcvtq_f64_s64(v22);
  v22.i64[0] = SLODWORD(v33[0]);
  v22.i64[1] = SHIDWORD(v33[0]);
  v34[0] = v23;
  v34[1] = vcvtq_f64_s64(v22);
  v33[0] = 0;
  v33[1] = 0;
  v32 = v33;
  QuadNode::getSprites(*(this + 105), v34, &v32);
  v24 = v32;
  if (v32 != v33)
  {
    do
    {
      v25 = v24[4];
      v26 = *v25;
      if (*v25 > 2)
      {
        if ((v26 - 3) >= 2)
        {
          if (v26 == 5)
          {
            PSHeliumNode::renderRadialParticleTile(this, v35, v25);
          }
        }

        else
        {
          PSHeliumNode::renderImageParticleTile(this, v35, v25);
        }
      }

      else if (v26)
      {
        if (v26 == 1)
        {
          PSHeliumNode::renderLineParticleTile(this, v35, v25);
        }

        else if (v26 == 2)
        {
          PSHeliumNode::renderOutlineParticleTile(this, v35, v25);
        }
      }

      else
      {
        PSHeliumNode::renderPointParticleTile(this, v35, v25);
      }

      v27 = v24[1];
      if (v27)
      {
        do
        {
          v28 = v27;
          v27 = *v27;
        }

        while (v27);
      }

      else
      {
        do
        {
          v28 = v24[2];
          v29 = *v28 == v24;
          v24 = v28;
        }

        while (!v29);
      }

      v24 = v28;
    }

    while (v28 != v33);
  }

  v30 = HGNode::RenderTile(this, a2);
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&v32, v33[0]);
  return v30;
}

void PSHeliumNode::renderPointParticleTile(PSHeliumNode *this, HGRect *a2, const PSHeliumNode::Sprite *a3)
{
  v8 = *(a3 + 16);
  v9 = *(a3 + 34);
  v5 = PCMatrix44Tmpl<double>::transform<double>(this + 85, v8.f64, v8.f64);
  v6 = *(a3 + 8);
  v7 = v8;
  PSHeliumNode::drawPoint(v5, a2, *(a3 + 31), v6, &v7);
}

BOOL PSHeliumNode::renderLineParticleTile(PSHeliumNode *this, HGRect *a2, const PSHeliumNode::Sprite *a3)
{
  v13 = *(a3 + 16);
  v14 = *(a3 + 34);
  v11 = *(a3 + 280);
  v12 = *(a3 + 37);
  PCMatrix44Tmpl<double>::transform<double>(this + 85, v13.f64, v13.f64);
  v6 = PCMatrix44Tmpl<double>::transform<double>(this + 85, v11.f64, v11.f64);
  v7 = *(a3 + 8);
  v9 = v11;
  v10 = v13;
  return PSHeliumNode::drawLine(v6, a2, v7, &v10, &v9);
}

BOOL PSHeliumNode::renderOutlineParticleTile(PSHeliumNode *this, HGRect *a2, const PSHeliumNode::Sprite *a3)
{
  v4 = *(a3 + 8);
  v5 = *(a3 + 27);
  v6 = *(a3 + 28);
  v7 = v5 + *(a3 + 29);
  v8 = v6 + *(a3 + 30);
  v9 = *(this + 760);
  v30 = *(this + 744);
  v31 = v9;
  v10 = *(this + 792);
  v32 = *(this + 776);
  v33 = v10;
  v11 = *(this + 696);
  v25 = v4;
  v26 = *(this + 680);
  v12 = *(this + 712);
  v13 = *(this + 728);
  v27 = v11;
  v28 = v12;
  v29 = v13;
  PCMatrix44Tmpl<double>::rightMult(&v26, a3 + 4);
  v14 = *(&v33 + 1) + v5 * *&v32 + v6 * *(&v32 + 1);
  v37.f64[0] = (*(&v27 + 1) + v5 * *&v26 + v6 * *(&v26 + 1)) / v14;
  v37.f64[1] = (*(&v29 + 1) + v5 * *&v28 + v6 * *(&v28 + 1)) / v14;
  v15 = *(&v33 + 1) + v7 * *&v32 + v6 * *(&v32 + 1);
  v36.f64[0] = (*(&v27 + 1) + v7 * *&v26 + v6 * *(&v26 + 1)) / v15;
  v36.f64[1] = (*(&v29 + 1) + v7 * *&v28 + v6 * *(&v28 + 1)) / v15;
  v16 = *(&v33 + 1) + v7 * *&v32 + v8 * *(&v32 + 1);
  v35.f64[0] = (*(&v27 + 1) + v7 * *&v26 + v8 * *(&v26 + 1)) / v16;
  v35.f64[1] = (*(&v29 + 1) + v7 * *&v28 + v8 * *(&v28 + 1)) / v16;
  v17 = *(&v33 + 1) + v5 * *&v32 + v8 * *(&v32 + 1);
  v34.f64[0] = (*(&v27 + 1) + v5 * *&v26 + v8 * *(&v26 + 1)) / v17;
  v34.f64[1] = (*(&v29 + 1) + v5 * *&v28 + v8 * *(&v28 + 1)) / v17;
  v19 = PSHeliumNode::drawLine(v18, a2, v25, &v37, &v36);
  v20 = PSHeliumNode::drawLine(v19, a2, v25, &v36, &v35);
  v21 = PSHeliumNode::drawLine(v20, a2, v25, &v35, &v34);
  v22 = PSHeliumNode::drawLine(v21, a2, v25, &v34, &v37);
  v23 = PSHeliumNode::drawLine(v22, a2, v25, &v37, &v35);
  return PSHeliumNode::drawLine(v23, a2, v25, &v34, &v36);
}

void PSHeliumNode::renderImageParticleTile(HGNode *this, HGTile *a2, const PSHeliumNode::Sprite *a3)
{
  v6 = *(*(a2 + 42) + 152);
  Input = HGRenderer::GetInput(v6, this, *(a3 + 50));
  ROI = HGRenderer::GetROI(v6, Input);
  v10 = v9;
  if (((*(*this + 152))(this, *(a3 + 50)) & 2) != 0)
  {
    HGRenderer::RenderInput(v6, *(a2 + 42), this, *(a3 + 50), &v28, ROI, v10, 0);
    v14 = v29;
    v12 = HGObject::operator new(0x80uLL);
    HGBitmap::HGBitmap(v12, ROI, v10, 28, v28, 16 * v14);
  }

  else
  {
    v11 = (*(*v6 + 128))(v6, 19);
    v12 = HGObject::operator new(0x90uLL);
    v13 = *(a2 + 42);
    HGBuffer::HGBuffer(v12, ROI, v10, v11, 0);
    *v12 = &unk_2872DC9B8;
    v12[16] = Input;
    v12[17] = v13;
  }

  PCMatrix44Tmpl<double>::operator*(this + 680, a3 + 2, v38);
  v15 = *(this + 760);
  v34 = *(this + 744);
  v35 = v15;
  v16 = *(this + 792);
  v36 = *(this + 776);
  v37 = v16;
  v17 = *(this + 696);
  v30 = *(this + 680);
  v31 = v17;
  v18 = *(this + 728);
  v32 = *(this + 712);
  v33 = v18;
  PCMatrix44Tmpl<double>::rightMult(&v30, a3 + 4);
  if (PCMatrix44Tmpl<double>::planarInverseZ(&v30, v38, 0.0))
  {
    v19 = *(&v30 + 1);
    v20 = v31;
    v21 = *(&v34 + 1);
    *(&v30 + 1) = v32;
    *&v31 = v34;
    v22 = *(&v35 + 1);
    *(&v31 + 1) = v36;
    *&v32 = v19;
    v23 = *(&v33 + 1);
    *&v34 = v20;
    *(&v34 + 1) = v33;
    *&v33 = v21;
    *(&v33 + 1) = *(&v36 + 1);
    *(&v35 + 1) = v37;
    *&v36 = *(&v20 + 1);
    *(&v36 + 1) = v23;
    *&v37 = v22;
    HGTransform::HGTransform(&v28);
    Matrixd = HGTransform::LoadMatrixd(&v28, &v30);
    *(*(a2 + 42) + 36) = 1;
    v25 = (*(*v6 + 128))(v6, 4, Matrixd);
    v26 = *(a2 + 42);
    *(v26 + 112) = v25;
    HGSampler::ReadTile(v26);
    v27 = *(a3 + 8);
    PCWorkingColorVector::operator*=(&v27, *(&v27 + 3));
    OZTileBlend::renderTile(a2, &v27, *(a3 + 24));
    HGTransform::~HGTransform(&v28);
  }

  if (v12)
  {
    (*(*v12 + 24))(v12);
  }
}

void sub_2602E3758(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, char a11)
{
  if (v11)
  {
    (*(*v11 + 24))(v11);
  }

  _Unwind_Resume(exception_object);
}

void PSHeliumNode::renderRadialParticleTile(HGNode *this, HGTile *a2, const PSHeliumNode::Sprite *a3)
{
  v6 = *(*(a2 + 42) + 152);
  Input = HGRenderer::GetInput(v6, this, *(a3 + 50));
  ROI = HGRenderer::GetROI(v6, Input);
  v10 = v9;
  v11 = (*(*v6 + 128))(v6, 19);
  v12 = *(a2 + 42);
  HGBuffer::HGBuffer(v48, ROI, v10, v11, 0);
  v48[0] = &unk_2872DC9B8;
  v48[16] = Input;
  v48[17] = v12;
  PSHeliumNode::unbindSurface(this);
  PCMatrix44Tmpl<double>::operator*(this + 680, a3 + 2, v47);
  v13 = *(this + 760);
  v46[4] = *(this + 744);
  v46[5] = v13;
  v14 = *(this + 792);
  v46[6] = *(this + 776);
  v46[7] = v14;
  v15 = *(this + 696);
  v46[0] = *(this + 680);
  v46[1] = v15;
  v16 = *(this + 728);
  v46[2] = *(this + 712);
  v46[3] = v16;
  PCMatrix44Tmpl<double>::rightMult(v46, a3 + 4);
  PCMatrix44Tmpl<double>::planarInverseZ(v46, v47, 0.0);
  v17 = *(a2 + 1);
  v18 = *(a2 + 3);
  if (v17 < v18)
  {
    v19 = *a2;
    v20 = *(a2 + 2);
    v43 = *(a2 + 6);
    v21 = *(a2 + 2);
    do
    {
      if (v19 < v20)
      {
        v22 = v19;
        v23 = v21;
        do
        {
          v44 = v22 + 0.5;
          v45 = COERCE_UNSIGNED_INT64(v17 + 0.5);
          PCMatrix44Tmpl<double>::transform<double>(v46, &v44, &v44);
          v24 = vmulq_f64(v45, v45);
          v25 = v44 * v44 + v24.f64[0] + v24.f64[1];
          if (v25 <= 0.25)
          {
            v26 = sqrt(v25);
            v27 = (v26 + v26) * 255.0;
            __y[0] = 0.0;
            modf(v27, __y);
            v30 = __y[0];
            if ((__y[0] + 1) < 255)
            {
              v31 = v30 + 1;
            }

            else
            {
              v31 = 255;
            }

            *v28.i64 = v27 - v30;
            *v28.i32 = *v28.i64;
            v32 = *(this + 59);
            v33 = (v32 + 16 * v30);
            v34 = (v32 + 4 * (4 * v31));
            v35 = vmul_n_f32(*(a3 + 12), v33[2] + ((v34[2] - v33[2]) * *v28.i32));
            v36 = (*v33 + ((*v34 - *v33) * *v28.i32)) * *(a3 + 5);
            v37 = 1.0 - v36;
            v38 = *v23;
            if (*(a3 + 24) == 1)
            {
              v39 = vmul_n_f32(v35, v36);
              v40 = *(v23 + 4);
            }

            else
            {
              v38 = v37 * v38;
              v39 = vmul_n_f32(v35, v36);
              v40 = vmul_n_f32(*(v23 + 4), v37);
            }

            *v29.i8 = vadd_f32(v39, v40);
            *v28.i32 = (((v33[1] + ((v34[1] - v33[1]) * *v28.i32)) * *(a3 + 2)) * v36) + v38;
            v41 = v36 + (v37 * *(v23 + 12));
            if (v41 > 1.0)
            {
              v41 = 1.0;
            }

            v42 = vextq_s8(vextq_s8(v28, v28, 4uLL), v29, 0xCuLL);
            *&v42.i32[3] = v41;
            *v23 = v42;
          }

          v23 += 16;
          ++v22;
        }

        while (v20 != v22);
      }

      v21 += 16 * v43;
      ++v17;
    }

    while (v17 != v18);
  }

  HGBuffer::~HGBuffer(v48);
}

uint64_t PSHeliumNode::GetROI(HGNode *this, HGRenderer *a2, unsigned int a3, HGRect a4)
{
  Input = HGRenderer::GetInput(a2, this, a3);

  return HGRenderer::GetDOD(a2, Input);
}

uint64_t PSHeliumNode::GetDOD(PSHeliumNode *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return HGRectMake4i(vcvtmd_s64_f64(*(this + 101) + 0.000000999999997 + 0.0000001), vcvtmd_s64_f64(*(this + 102) + 0.000000999999997 + 0.0000001), vcvtpd_s64_f64(*(this + 101) + *(this + 103) + -0.000000999999997), vcvtpd_s64_f64(*(this + 102) + *(this + 104) + -0.000000999999997));
  }
}

uint64_t PSHeliumNode::RenderPage(PSHeliumNode *this, HGPage *a2)
{
  v4 = *a2;
  v5 = *(a2 + 1);
  memset(&v43.var8 + 4, 0, 20);
  if (v5 && (((*(*v4 + 144))(v4, v5), HGGPURenderer::GetCurrentContext(v4, &v43.var6), CGColorSpace = PCColorSpaceHandle::getCGColorSpace(&v43.var6), ProGL::findContext(CGColorSpace, v7, &v43.var1), ProGL::ContextHandle::operator=(&v43.var9, &v43.var1), ProGL::ContextHandle::~ContextHandle(&v43.var1), PCSharedCount::PCSharedCount(&v43.var6), glGetIntegerv(0xBE2u, &v43.var8 + 1), glDisable(0xBE2u), var8_high = HIDWORD(v43.var8), *(a2 + 1) = v5, v9 = v5, !var8_high) || ((*(*v4 + 144))(v4, v5), HGGPURenderer::GetCurrentContext(v4, &v43.var6), v10 = PCColorSpaceHandle::getCGColorSpace(&v43.var6), ProGL::findContext(v10, v11, &v43.var1), ProGL::ContextHandle::operator=(&v43.var9, &v43.var1), ProGL::ContextHandle::~ContextHandle(&v43.var1), PCSharedCount::PCSharedCount(&v43.var6), glEnable(0xBE2u), (v9 = *(a2 + 1)) != 0)))
  {
    (*(*v9 + 16))(v9);
    Buffer = *(a2 + 1);
    if (!Buffer)
    {
LABEL_5:
      v13 = 0;
      goto LABEL_14;
    }
  }

  else
  {
    v14 = *(this + 4);
    if ((v14 & 0x1000) != 0)
    {
      v15 = HGRectMake4i(*(a2 + 4), *(a2 + 5), *(a2 + 4) + ((*(a2 + 6) + ~*(a2 + 4)) & 0xFFFFFFE0) + 32, *(a2 + 5) + ((*(a2 + 7) + ~*(a2 + 5)) & 0xFFFFFFE0) + 32);
      *&v16.var2 = *&v16.var0;
      *(a2 + 2) = v15;
      *(a2 + 3) = *&v16.var0;
    }

    else
    {
      v15 = *(a2 + 2);
      *&v16.var2 = *(a2 + 3);
    }

    *&v16.var0 = v15;
    Buffer = HGGPURenderer::CreateBuffer(v4, v16, *(a2 + 8), 0, (v14 >> 12) & 1, *(a2 + 248));
    *(a2 + 1) = Buffer;
    if (!Buffer)
    {
      goto LABEL_5;
    }
  }

  if ((Buffer[12] & 1) != 0 && (0x6F96F96F96F96F97 * ((*(this + 61) - *(this + 60)) >> 3)) >= 0x15)
  {
    v13 = HGGPURenderer::CreateBuffer(v4, *(Buffer + 20), *(Buffer + 4), 0, 0, *(a2 + 248));
    *(a2 + 1) = v13;
    v5 = v13;
  }

  else
  {
    v13 = Buffer;
    Buffer = 0;
  }

LABEL_14:
  (*(*v4 + 144))(v4, v13);
  HGGPURenderer::GetCurrentContext(v4, &v43.var6);
  v17 = PCColorSpaceHandle::getCGColorSpace(&v43.var6);
  ProGL::findContext(v17, v18, &v43.var1);
  ProGL::ContextHandle::operator=(&v43.var9, &v43.var1);
  ProGL::ContextHandle::~ContextHandle(&v43.var1);
  PCSharedCount::PCSharedCount(&v43.var6);
  HGGPURenderer::Clear(v4, *(a2 + 1), v19, v20);
  glActiveTexture(0x84C0u);
  v21 = (*(*v4 + 368))(v4, *(this + 8), this);
  (*(*this + 488))(this, a2, 0, v21);
  ProGL::CurrentContextSentry::CurrentContextSentry(&v43.var6, &v43.var9);
  ProGL::GL::GL(&v43.var1);
  PSHeliumNode::initProgram(this);
  v40 = v21;
  v41 = v5;
  v42 = Buffer;
  v22 = *(this + 55);
  if (v22)
  {
    *(v22 + 361) = 0;
  }

  v23 = *(this + 60);
  for (i = *(this + 61); v23 != i; v23 = (v23 + 312))
  {
    v25 = *v23 - 3;
    if (v25 > 2)
    {
      glDisable(0xBE2u);
      *(this + 419) = 0;
    }

    else
    {
      v26 = 3u >> (v25 & 7);
      v27 = v26 & 1;
      if (*(v23 + 24) == 1)
      {
        if (*(this + 419) && *(this + 420) == 1 && *(this + 421) == v27)
        {
          goto LABEL_35;
        }

        if (v26)
        {
          v28 = 1;
        }

        else
        {
          v28 = 770;
        }

        glBlendFuncSeparate(v28, 1u, 1u, 0x303u);
        glEnable(0xBE2u);
        *(this + 419) = 257;
      }

      else
      {
        if (*(this + 419) && (*(this + 420) & 1) == 0 && *(this + 421) == v27)
        {
          goto LABEL_35;
        }

        if (v26)
        {
          v29 = 1;
        }

        else
        {
          v29 = 770;
        }

        glBlendFuncSeparate(v29, 0x303u, 1u, 0x303u);
        glEnable(0xBE2u);
        *(this + 419) = 1;
      }

      *(this + 421) = v27;
    }

LABEL_35:
    PSHeliumNode::renderParticle(this, a2, &v43.var1, v23);
  }

  glDisable(0xBE2u);
  v30 = Buffer;
  *(this + 419) = 0;
  if (*(this + 106) != -1)
  {
    *(this + 106) = -1;
  }

  PSHeliumNode::unbindSurface(this);
  glDisable(0xC11u);
  glFlush();
  ProGL::GL::~GL(&v43.var1);
  ProGL::CurrentContextSentry::~CurrentContextSentry(&v43.var6);
  if (*(this + 107))
  {
    v31 = *(this + 22);
    if (v31 >= 1)
    {
      for (j = 0; j < v31; ++j)
      {
        v33 = *(*(this + 107) + 8 * j);
        if (v33)
        {
          (*(*v33 + 24))(v33);
          v31 = *(this + 22);
        }
      }
    }
  }

  v34 = *(this + 106);
  if (v34)
  {
    MEMORY[0x2666E9ED0](v34, 0x1000C80451B5BE8);
  }

  *(this + 106) = 0;
  v35 = *(this + 107);
  if (v35)
  {
    MEMORY[0x2666E9ED0](v35, 0x20C8093837F09);
  }

  *(this + 107) = 0;
  (*(*this + 496))(this, a2, 0, v40);
  if (v42)
  {
    HGGPURenderer::BufferCopyOpenGL(v4, v42, *(v41 + 20), v41);
    (*(*v41 + 24))(v41);
    *(a2 + 1) = v42;
    {
      HGGLGetCurrentContext();
      isObjectRef = OZChannelBase::isObjectRef(&v43);
      PCSharedCount::PCSharedCount(&v43);
      PSHeliumNode::RenderPage(HGPage *)::isIntel = isObjectRef;
      v30 = v42;
    }

    if (PSHeliumNode::RenderPage(HGPage *)::isIntel == 1)
    {
      v36 = vsub_s32(*(v30 + 28), *(v30 + 20));
      if (vmul_lane_s32(v36, v36, 1).i32[0] >= 0x100000)
      {
        glFinish();
      }
    }
  }

  v37 = *(a2 + 1);
  ProGL::ContextHandle::~ContextHandle(&v43.var9);
  return v37;
}

void sub_2602E427C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, PCSharedCount a12, char a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, PCSharedCount a18, uint64_t a19, uint64_t a20, char a21)
{
  PCSharedCount::PCSharedCount(&a12);
  ProGL::ContextHandle::~ContextHandle(&a21);
  _Unwind_Resume(a1);
}

void PSHeliumNode::renderParticle(PSHeliumNode *this, HGGPURenderer **a2, ProGL::GL *a3, const PSHeliumNode::Sprite *a4)
{
  v10 = *(a4 + 8);
  v8 = *a4;
  if ((*a4 - 3) <= 1)
  {
    PCWorkingColorVector::operator*=(&v10, *(&v10 + 3));
    v8 = *a4;
  }

  if (v8 > 2)
  {
    switch(v8)
    {
      case 3:
        PSHeliumNode::renderImageParticlePage(this, a2, a3, a4);
        break;
      case 4:
        PSHeliumNode::renderBitmapParticlePage(this, a2, a3, a4);
        break;
      case 5:
        PSHeliumNode::renderRadialParticlePage(this, a2, a3, a4);
        break;
    }
  }

  else if (v8)
  {
    if (v8 == 1 || v8 == 2)
    {
      if (*(this + 106) != -1)
      {
        *(this + 106) = -1;
      }

      PSHeliumNode::unbindSurface(this);
    }
  }

  else
  {
    if (*(this + 106) != -1)
    {
      *(this + 106) = -1;
    }

    PSHeliumNode::unbindSurface(this);
    v9 = *(a4 + 31);
    if (*(this + 108) != v9)
    {
      *(this + 108) = v9;
    }
  }
}

void PSHeliumNode::unbindSurface(PSHeliumNode *this)
{
  if (*(this + 428) == 1)
  {
    Instance = OZShaderManager::getInstance(this);
    Shader = OZShaderManager::getShader(Instance, "bilinearMaskEdgeAA");
    v4 = (*(*Shader + 24))(Shader);
    v5 = OZPolygonAA::getInstance(v4);
    EdgeAATexture = OZPolygonAA::getEdgeAATexture(v5);
    if (EdgeAATexture)
    {
      v7 = EdgeAATexture;
      glActiveTexture(0x84C2u);
      Target = ProGL::TextureHandle::getTarget((v7 + 64));
      glBindTexture(Target, 0);
    }

    glActiveTexture(0x84C0u);
    *(this + 428) = 0;
  }

  else if (*(this + 429) == 1)
  {
    v9 = *(this + 55);
    if (!v9)
    {
      throw_PCNullPointerException(1);
    }

    (*(*v9 + 24))(v9);
    *(this + 429) = 0;
  }
}

uint64_t PSHeliumNode::RenderPageMetal(PSHeliumNode *this, HGPage *a2)
{
  v4 = *a2;
  Buffer = *(a2 + 1);
  if (Buffer)
  {
    (*(*Buffer + 16))(*(a2 + 1));
  }

  else
  {
    *&v15.var0 = *(a2 + 2);
    *&v15.var2 = *(a2 + 3);
    Buffer = HGGPURenderer::CreateBuffer(v4, v15, *(a2 + 8), 1, (*(this + 4) >> 12) & 1, *(a2 + 248));
    *(a2 + 1) = Buffer;
  }

  v7 = HGGPURenderer::ClearMetal(v4, Buffer, *(a2 + 1), v6);
  v9 = (*(*v4 + 376))(v4, TextureMetalShaderText, this);
  if (v9)
  {
    if (v10)
    {
      v11 = v10;
      *(this + 224) = 4;
      v12 = (*(*this + 48))(this);
      std::string::basic_string[abi:ne200100]<0>(&__p, v12);
      HGMetalHandler::SetDebugLabel(v11, &__p);
      if (SHIBYTE(__p.__r_.__value_.__r.__words[2]) < 0)
      {
        operator delete(__p.__r_.__value_.__l.__data_);
      }

      HGMetalHandler::BindBuffer(v11, Buffer);
      (*(*this + 488))(this, a2, 0, v11);
      HGMetalHandler::SetScissorRect(v11, a2 + 1);
      HGMetalHandler::SetScissorTest(v11, 1);
      PSHeliumNode::SpriteBatchController::SpriteBatchController(&__p, a2, v11, this);
    }
  }

  return *(a2 + 1);
}

void sub_2602E4850(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15, uint64_t a16, uint64_t a17)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t *anonymous namespace::getTextureMetalShaderText(_anonymous_namespace_ *this)
{
  {
  }

  if (byte_27FE4C0E7 >= 0)
  {
  }

  else
  {
  }
}

BOOL PSHeliumNode::SpriteBatchController::add(uint64_t a1, uint64_t a2)
{
  v3 = *a1;
  v4 = *(a1 + 8);
  if (*a1 == v4)
  {
LABEL_4:
    v6 = 0;
  }

  else
  {
    while (!(*(**v3 + 16))(*v3, a2))
    {
      if (++v3 == v4)
      {
        goto LABEL_4;
      }
    }

    v6 = *v3;
  }

  v7 = *(a1 + 24);
  if (v7 != v6 && v7 != 0)
  {
    (*(*v7 + 24))(v7);
  }

  *(a1 + 24) = v6;
  return v6 != 0;
}

void PSHeliumNode::renderParticleMetal(PSHeliumNode *this, HGGPURenderer **a2, HGMetalTexture ***a3, HGBitmap **a4)
{
  if (PSHeliumNode::bindMetalProgramForSprite(this, a2, a3, a4))
  {
    v9 = *a4;
    if (*a4 > 3)
    {
      switch(v9)
      {
        case 4:

          PSHeliumNode::renderBitmapParticlePageMetal(this, a2, a3, a4);
          break;
        case 5:

          PSHeliumNode::renderRadialParticlePageMetal(this, a2, a3, a4);
          break;
        case 6:

          PSHeliumNode::renderCircleParticlePageMetal(this, v8, a3, a4);
          break;
      }
    }

    else
    {
      switch(v9)
      {
        case 1:

          PSHeliumNode::renderLineParticlePageMetal(this, v8, a3, a4);
          break;
        case 2:

          PSHeliumNode::renderOutlineParticlePageMetal(this, v8, a3, a4);
          break;
        case 3:

          PSHeliumNode::commonRenderMetalTexture(this, v8, a3, a4, a4 + 26);
          break;
      }
    }
  }
}

uint64_t PSHeliumNode::setObjectToFilmMatrix(uint64_t result, uint64_t a2)
{
  v2 = result + 680;
  if (result + 680 != a2)
  {
    for (i = 0; i != 4; ++i)
    {
      for (j = 0; j != 32; j += 8)
      {
        *(v2 + j) = *(a2 + j);
      }

      v2 += 32;
      a2 += 32;
    }
  }

  return result;
}

void PSHeliumNode::setGradient(uint64_t a1, const PCSharedCount *a2)
{
  *(a1 + 440) = a2->var0;
  PCSharedCount::PCSharedCount(&v3, a2 + 1);
  PCSharedCount::operator=((a1 + 448), &v3);
  PCSharedCount::~PCSharedCount(&v3);
}

void PSHeliumNode::setMetalGradient(uint64_t a1, const PCSharedCount *a2)
{
  if (a2->var0 != *(a1 + 456))
  {
    *(a1 + 456) = a2->var0;
    PCSharedCount::PCSharedCount(&v3, a2 + 1);
    PCSharedCount::operator=((a1 + 464), &v3);
    PCSharedCount::~PCSharedCount(&v3);
    *(a1 + 896) = 0;
  }
}

void *std::vector<PSHeliumNode::Sprite>::reserve(void *result, unint64_t a2)
{
  if (0x6F96F96F96F96F97 * ((result[2] - *result) >> 3) < a2)
  {
    if (a2 < 0xD20D20D20D20D3)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<PSHeliumNode::Sprite>>(result, a2);
    }

    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  return result;
}

void sub_2602E4E24(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  std::__split_buffer<PSHeliumNode::Sprite>::~__split_buffer(va);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::addPointParticle(uint64_t a1, double *a2, __int128 *a3, char a4, float a5)
{
  v55[12] = *MEMORY[0x277D85DE8];
  PCWorkingColorVector::PCWorkingColorVector(&v31);
  v42 = 0x3FF0000000000000;
  v43 = 0uLL;
  v39 = 0x3FF0000000000000;
  v36 = 0x3FF0000000000000;
  v33 = 0x3FF0000000000000;
  v34 = 0u;
  v35 = 0u;
  v37 = 0u;
  v38 = 0u;
  v40 = 0u;
  v41 = 0u;
  __asm { FMOV            V0.2D, #-1.0 }

  v44 = _Q0;
  v46 = 0;
  v47 = 0;
  v45 = 0;
  v48 = _Q0;
  v16 = -1762037865 * ((*(a1 + 488) - *(a1 + 480)) >> 3);
  v30[0] = 0;
  v30[1] = v16;
  v53 = 0;
  v54 = 0;
  v51 = *(a2 + 2);
  v52 = 0;
  v50 = *a2;
  v31 = *a3;
  v32 = a4;
  v17 = a5;
  v49 = a5;
  v18 = *(a1 + 644);
  if (v18 <= 0)
  {
    v22 = *a2;
    v21 = a2[1];
    v23 = a2[2];
LABEL_9:
    v24 = 0;
    v25 = -a5;
    v55[0] = v22 + v25;
    v55[1] = v21 + v25;
    v55[2] = v23 + 0.0;
    v55[3] = v22 + v17;
    v55[4] = v21 + v25;
    v55[5] = v23 + 0.0;
    v55[6] = v22 + v17;
    v55[7] = v21 + v17;
    v55[8] = v23 + 0.0;
    v55[9] = v22 + v25;
    v55[10] = v21 + v17;
    v55[11] = v23 + 0.0;
    do
    {
      PCMatrix44Tmpl<double>::transform<double>((a1 + 680), &v55[v24], &v55[v24]);
      v29 = *&v55[v24];
      PCRect<double>::operator|=((a1 + 808), &v29);
      v26.f64[0] = v44.f64[0];
      if (v44.f64[0] >= 0.0 && v44.f64[1] >= 0.0)
      {
        v26.f64[1] = v44.f64[1];
        v27 = vaddq_f64(v26, v43);
        v43 = vbslq_s8(vcgtq_f64(v43, v29), v29, v43);
        v44 = vsubq_f64(vbslq_s8(vcgtq_f64(v29, v27), v29, v27), v43);
      }

      else
      {
        v43 = v29;
        v44 = 0uLL;
      }

      v24 += 3;
    }

    while (v24 != 12);
    std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), v30);
  }

  else
  {
    v19 = 0;
    v20 = 16;
    while (1)
    {
      if (v19 >= *(a1 + 644))
      {
        PCArray_base::badIndex(v10);
      }

      v22 = *a2;
      v21 = a2[1];
      v23 = a2[2];
      if (*(*(a1 + 648) + v20 + 8) + *(*(a1 + 648) + v20 - 16) * *a2 + *(*(a1 + 648) + v20 - 8) * v21 + *(*(a1 + 648) + v20) * v23 < 0.0)
      {
        break;
      }

      ++v19;
      v20 += 32;
      if (v18 == v19)
      {
        goto LABEL_9;
      }
    }
  }

  result = v45;
  if (v45)
  {
    return (*(*v45 + 24))(v45);
  }

  return result;
}

void sub_2602E50C0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, char a11)
{
  if (a2)
  {
    __clang_call_terminate(exception_object);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100](uint64_t *a1, uint64_t a2)
{
  v3 = a1[1];
  if (v3 >= a1[2])
  {
    result = std::vector<PSHeliumNode::Sprite>::__emplace_back_slow_path<PSHeliumNode::Sprite const&>(a1, a2);
  }

  else
  {
    std::allocator_traits<std::allocator<PSHeliumNode::Sprite>>::construct[abi:ne200100]<PSHeliumNode::Sprite,PSHeliumNode::Sprite const&,0>(a1, a1[1], a2);
    result = v3 + 312;
    a1[1] = v3 + 312;
  }

  a1[1] = result;
  return result;
}

void PSHeliumNode::Sprite::~Sprite(PSHeliumNode::Sprite *this)
{
  v1 = *(this + 26);
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }
}

uint64_t PSHeliumNode::addLineParticle(uint64_t a1, double *a2, double *a3, __int128 *a4, char a5)
{
  PCWorkingColorVector::PCWorkingColorVector(&v51);
  v62 = 0x3FF0000000000000;
  v63 = 0uLL;
  v59 = 0x3FF0000000000000;
  v56 = 0x3FF0000000000000;
  v53 = 0x3FF0000000000000;
  v54 = 0u;
  v55 = 0u;
  v57 = 0u;
  v58 = 0u;
  v60 = 0u;
  v61 = 0u;
  __asm { FMOV            V0.2D, #-1.0 }

  v64 = _Q0;
  v65 = 0;
  v66 = 0;
  v68 = _Q0;
  v16 = -1762037865 * ((*(a1 + 488) - *(a1 + 480)) >> 3);
  v50[0] = 1;
  v50[1] = v16;
  v17 = *(a2 + 2);
  v67 = 0;
  v70 = v17;
  v69 = *a2;
  v71 = *a3;
  v72 = *(a3 + 2);
  v51 = *a4;
  v52 = a5;
  v18 = *a2;
  v19 = a2[1];
  v48.i64[0] = *a2;
  *&v48.i64[1] = v19;
  v20 = a2[2];
  v49 = v20;
  v21 = *a3;
  v22 = a3[1];
  v46.i64[0] = *a3;
  *&v46.i64[1] = v22;
  v23 = a3[2];
  v47 = v23;
  v24 = *(a1 + 644);
  if (v24 < 1)
  {
LABEL_16:
    PCMatrix44Tmpl<double>::transform<double>((a1 + 680), v48.i64, v48.i64);
    v45 = v48;
    PCRect<double>::operator|=((a1 + 808), &v45);
    v39.f64[0] = v64.f64[0];
    if (v64.f64[0] >= 0.0 && v64.f64[1] >= 0.0)
    {
      v39.f64[1] = v64.f64[1];
      v40 = vaddq_f64(v39, v63);
      v63 = vbslq_s8(vcgtq_f64(v63, v45), v45, v63);
      v64 = vsubq_f64(vbslq_s8(vcgtq_f64(v45, v40), v45, v40), v63);
    }

    else
    {
      v63 = v45;
      v64 = 0uLL;
    }

    PCMatrix44Tmpl<double>::transform<double>((a1 + 680), v46.i64, v46.i64);
    v44 = v46;
    PCRect<double>::operator|=((a1 + 808), &v44);
    v41.f64[0] = v64.f64[0];
    if (v64.f64[0] >= 0.0 && v64.f64[1] >= 0.0)
    {
      v41.f64[1] = v64.f64[1];
      v42 = vaddq_f64(v41, v63);
      v63 = vbslq_s8(vcgtq_f64(v63, v44), v44, v63);
      v64 = vsubq_f64(vbslq_s8(vcgtq_f64(v44, v42), v44, v42), v63);
    }

    else
    {
      v63 = v44;
      v64 = 0uLL;
    }

    std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), v50);
  }

  else
  {
    v25 = 0;
    v26 = 16;
    while (1)
    {
      if (v25 >= *(a1 + 644))
      {
        PCArray_base::badIndex(v10);
      }

      v27 = (*(a1 + 648) + v26);
      v29 = *(v27 - 2);
      v28 = *(v27 - 1);
      v31 = *v27;
      v30 = v27[1];
      v32 = v29 * v18 + v28 * v19 + *v27 * v20;
      v33 = v29 * v21 + v28 * v22 + *v27 * v23;
      v34 = v30 + v33;
      if (v30 + v32 < 0.0 && v34 < 0.0)
      {
        break;
      }

      if (v30 + v32 < 0.0)
      {
        v37 = v29 * (v18 - v21) + v28 * (v19 - v22) + v31 * (v20 - v23);
        if (fabs(v37) < 0.0000001)
        {
          break;
        }

        v38 = (-v33 - v30) / v37;
        if (v38 <= 0.0)
        {
          break;
        }

        v18 = v21 + (v18 - v21) * v38;
        v19 = v22 + (v19 - v22) * v38;
        v20 = v23 + (v20 - v23) * v38;
        *v48.i64 = v18;
        *&v48.i64[1] = v19;
        v49 = v20;
      }

      else if (v34 < 0.0)
      {
        v35 = v29 * (v21 - v18) + v28 * (v22 - v19) + v31 * (v23 - v20);
        if (fabs(v35) < 0.0000001)
        {
          break;
        }

        v36 = (-v32 - v30) / v35;
        if (v36 <= 0.0)
        {
          break;
        }

        v21 = v18 + (v21 - v18) * v36;
        v22 = v19 + (v22 - v19) * v36;
        v23 = v20 + (v23 - v20) * v36;
        *v46.i64 = v21;
        *&v46.i64[1] = v22;
        v47 = v23;
      }

      ++v25;
      v26 += 32;
      if (v24 == v25)
      {
        goto LABEL_16;
      }
    }
  }

  result = v65;
  if (v65)
  {
    return (*(*v65 + 24))(v65);
  }

  return result;
}

void sub_2602E555C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, ...)
{
  va_start(va, a12);
  PSHeliumNode::Sprite::~Sprite(va);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::addOutlineParticle(uint64_t a1, uint64_t *a2, double *a3, __int128 *a4, char a5)
{
  PCWorkingColorVector::PCWorkingColorVector(&v42);
  v53 = 0x3FF0000000000000;
  v54 = 0uLL;
  v50 = 0x3FF0000000000000;
  v47 = 0x3FF0000000000000;
  v44 = 0x3FF0000000000000;
  v45 = 0u;
  v46 = 0u;
  v48 = 0u;
  v49 = 0u;
  v51 = 0u;
  v52 = 0u;
  __asm { FMOV            V1.2D, #-1.0 }

  v55 = _Q1;
  v56 = 0;
  v59 = 0u;
  v60 = 0u;
  v61 = 0u;
  v15 = -1762037865 * ((*(a1 + 488) - *(a1 + 480)) >> 3);
  v41[0] = 2;
  v41[1] = v15;
  if (&v44 != a2)
  {
    for (i = 0; i != 16; i += 4)
    {
      v17 = (&v44 + i * 8);
      v18 = *&a2[i + 2];
      *v17 = *&a2[i];
      v17[1] = v18;
    }
  }

  v42 = *a4;
  v43 = a5;
  v19 = *(a3 + 1);
  v57 = *a3;
  v58 = v19;
  v20 = *a3;
  v21 = a3[1];
  v23 = a3[2];
  v22 = a3[3];
  LiImagePolygon::LiImagePolygon(v39);
  std::vector<LiPolygon::PosEdge>::resize(v40, 4uLL);
  v25 = v40;
  v26 = *v40;
  *v26 = v20;
  *(v26 + 8) = v21;
  *(v26 + 16) = 0;
  *(v26 + 32) = v20 + v23;
  *(v26 + 40) = v21;
  *(v26 + 48) = 0;
  *(v26 + 64) = v20 + v23;
  *(v26 + 72) = v21 + v22;
  *(v26 + 80) = 0;
  *(v26 + 96) = v20;
  *(v26 + 104) = v21 + v22;
  *(v26 + 112) = 0;
  v27 = *(a1 + 644);
  if (v27 >= 1)
  {
    for (j = 0; j != v27; ++j)
    {
      memset(v38, 0, 32);
      if (j >= *(a1 + 644))
      {
        PCArray_base::badIndex(v24);
      }

      PCMatrix44Tmpl<double>::transform_row<double>(a2, (*(a1 + 648) + 32 * j), v38[0].f64);
      v24 = LiImagePolygon::clip(v39, v38, 0);
    }

    v25 = v40;
    v26 = *v40;
  }

  if (((v25[1] - v26) >> 5) >= 3)
  {
    PCMatrix44Tmpl<double>::operator*(a1 + 680, a2, v38);
    v29 = *v40;
    if (((v40[1] - *v40) >> 5) >= 1)
    {
      v30 = 0;
      v31 = 0;
      do
      {
        v36 = *(v29 + v30);
        v37 = 0;
        PCMatrix44Tmpl<double>::transform<double>(v38[0].f64, v36.i64, v36.i64);
        v35 = v36;
        PCRect<double>::operator|=((a1 + 808), &v35);
        v32.f64[0] = v55.f64[0];
        if (v55.f64[0] >= 0.0 && v55.f64[1] >= 0.0)
        {
          v32.f64[1] = v55.f64[1];
          v33 = vaddq_f64(v32, v54);
          v54 = vbslq_s8(vcgtq_f64(v54, v35), v35, v54);
          v55 = vsubq_f64(vbslq_s8(vcgtq_f64(v35, v33), v35, v33), v54);
        }

        else
        {
          v54 = v35;
          v55 = 0uLL;
        }

        ++v31;
        v29 = *v40;
        v30 += 32;
      }

      while (v31 < ((v40[1] - *v40) >> 5));
    }

    std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), v41);
  }

  LiImagePolygon::~LiImagePolygon(v39);
  result = v56;
  if (v56)
  {
    return (*(*v56 + 24))(v56);
  }

  return result;
}

void sub_2602E5868(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, char a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, char a46)
{
  LiImagePolygon::~LiImagePolygon(&a32);
  PSHeliumNode::Sprite::~Sprite(&a46);
  _Unwind_Resume(a1);
}

void PSHeliumNode::commonImageSpriteSetup(double *a1, uint64_t a2, double *a3, float64x2_t *a4, _OWORD *a5, char a6)
{
  v9 = a1;
  *a2 = 3;
  *(a2 + 4) = -1762037865 * ((*(a1 + 61) - *(a1 + 60)) >> 3);
  v10 = a2 + 32;
  if ((a2 + 32) != a3)
  {
    v11 = 0;
    v12 = a3;
    do
    {
      for (i = 0; i != 4; ++i)
      {
        *(v10 + i * 8) = v12[i];
      }

      ++v11;
      v10 += 32;
      v12 += 4;
    }

    while (v11 != 4);
  }

  *(a2 + 8) = *a5;
  *(a2 + 24) = a6;
  v14 = *a4;
  *(a2 + 232) = a4[1];
  *(a2 + 216) = v14;
  *(a2 + 304) = 0;
  __asm { FMOV            V0.2D, #-1.0 }

  *(a2 + 176) = _Q0;
  v20 = *(a1 + 161);
  if (v20 >= 1)
  {
    v21 = 0;
    do
    {
      v38 = 0u;
      *v39 = 0u;
      if (v21 >= *(v9 + 161))
      {
        PCArray_base::badIndex(a1);
      }

      a1 = PCMatrix44Tmpl<double>::transform_row<double>(a3, (*(v9 + 81) + 32 * v21), v38.f64);
      v22 = v38;
      v23 = vcgtzq_f64(v38);
      v24 = v39[1];
      v25 = v39[0] * 0.0;
      if (v39[1] + v39[0] * 0.0 + vaddvq_f64(vmulq_f64(v38, vbslq_s8(v23, *a4, vaddq_f64(*a4, a4[1])))) < 0.0)
      {
        *(a2 + 304) = 1;
        if (v24 + v25 + vaddvq_f64(vmulq_f64(v22, vbslq_s8(v23, vaddq_f64(*a4, a4[1]), *a4))) <= 0.0)
        {
          return;
        }
      }
    }

    while (++v21 != v20);
  }

  PCMatrix44Tmpl<double>::operator*((v9 + 85), a3, &v38);
  if (*(a2 + 304) != 1)
  {
    PCMatrix44Tmpl<double>::transformRect<double>(v38.f64, a4->f64, a2 + 160);
LABEL_25:
    PCRect<double>::operator|=((v9 + 101), (a2 + 160));
    return;
  }

  LiImagePolygon::LiImagePolygon(v34);
  LiImagePolygon::set(v34, a4->f64, 0);
  if (v20 >= 1)
  {
    for (j = 0; j != v20; ++j)
    {
      v32 = 0u;
      v33 = 0u;
      if (j >= *(v9 + 161))
      {
        PCArray_base::badIndex(v26);
      }

      PCMatrix44Tmpl<double>::transform_row<double>(a3, (*(v9 + 81) + 32 * j), v32.f64);
      v26 = LiImagePolygon::clip(v34, &v32, 0);
    }
  }

  if (((v36 - v35) >> 5) >= 1)
  {
    v28 = 0;
    v29 = 0;
    do
    {
      v32 = 0uLL;
      *&v33 = 0;
      PCMatrix44Tmpl<double>::transform<double>(v38.f64, (*v37 + v28), v32.f64);
      v31 = v32;
      PCRect<double>::operator|=((a2 + 160), &v31);
      ++v29;
      v28 += 32;
    }

    while (v29 < ((v36 - v35) >> 5));
  }

  if (*(a2 + 176) < 0.0)
  {
    LiImagePolygon::~LiImagePolygon(v34);
    return;
  }

  v30 = *(a2 + 184);
  LiImagePolygon::~LiImagePolygon(v34);
  if (v30 >= 0.0)
  {
    goto LABEL_25;
  }
}

void sub_2602E5B6C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  LiImagePolygon::~LiImagePolygon(va);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::addImageParticle(uint64_t a1, double *a2, void *a3, float64x2_t *a4, _OWORD *a5, char a6)
{
  PCWorkingColorVector::PCWorkingColorVector(v22);
  v31 = 0x3FF0000000000000;
  v32 = 0;
  v28 = 0x3FF0000000000000;
  v25 = 0x3FF0000000000000;
  v22[3] = 0x3FF0000000000000;
  v23 = 0u;
  v24 = 0u;
  v26 = 0u;
  v27 = 0u;
  v29 = 0u;
  v30 = 0u;
  v33 = 0;
  __asm { FMOV            V1.2D, #-1.0 }

  v34 = _Q1;
  v37 = 0;
  v38 = 0;
  v36 = 0;
  v39 = _Q1;
  v42 = 0u;
  v41 = 0u;
  v40 = 0u;
  PSHeliumNode::commonImageSpriteSetup(a1, &v21, a2, a4, a5, a6);
  Name = ProGL::TextureHandle::getName((*a3 + 64));
  v17 = a3[1];
  v19 = *a3;
  v20 = v17;
  if (v17)
  {
    atomic_fetch_add_explicit(&v17->__shared_owners_, 1uLL, memory_order_relaxed);
  }

  std::__tree<std::shared_ptr<PCImage>>::__emplace_unique_key_args<std::shared_ptr<PCImage>,std::shared_ptr<PCImage>>(a1 + 584, &v19);
  if (v20)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v20);
  }

  std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), &v21);
  result = v36;
  if (v36)
  {
    return (*(*v36 + 24))(v36);
  }

  return result;
}

{
  PCWorkingColorVector::PCWorkingColorVector(v24);
  v33 = 0x3FF0000000000000;
  v34 = 0;
  v30 = 0x3FF0000000000000;
  v27 = 0x3FF0000000000000;
  v24[3] = 0x3FF0000000000000;
  v25 = 0u;
  v26 = 0u;
  v28 = 0u;
  v29 = 0u;
  v31 = 0u;
  v32 = 0u;
  v35 = 0;
  __asm { FMOV            V1.2D, #-1.0 }

  v36 = _Q1;
  v38 = 0;
  v39 = 0;
  v37 = 0;
  v40 = _Q1;
  v43 = 0u;
  v42 = 0u;
  v41 = 0u;
  PSHeliumNode::commonImageSpriteSetup(a1, &v23, a2, a4, a5, a6);
  v17 = *(*a3 + 64);
  if (v17)
  {
    (*(*v17 + 16))(*(*a3 + 64));
    v18 = v37;
    if (v37 == v17)
    {
      (*(*v17 + 24))(v17);
      goto LABEL_8;
    }
  }

  else
  {
    v18 = v37;
    if (!v37)
    {
      goto LABEL_8;
    }
  }

  if (v18)
  {
    (*(*v18 + 24))(v18);
  }

  v37 = v17;
LABEL_8:
  v19 = a3[1];
  v21 = *a3;
  v22 = v19;
  if (v19)
  {
    atomic_fetch_add_explicit(&v19->__shared_owners_, 1uLL, memory_order_relaxed);
  }

  std::__tree<std::shared_ptr<PCImage>>::__emplace_unique_key_args<std::shared_ptr<PCImage>,std::shared_ptr<PCImage>>(a1 + 584, &v21);
  if (v22)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v22);
  }

  std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), &v23);
  result = v37;
  if (v37)
  {
    return (*(*v37 + 24))(v37);
  }

  return result;
}

void sub_2602E5CE4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, std::__shared_weak_count *a4, ...)
{
  va_start(va, a4);
  if (a4)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a4);
  }

  PSHeliumNode::Sprite::~Sprite(va);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::addImageParticle(uint64_t a1, double *a2, __int128 *a3, float64x2_t *a4, _OWORD *a5, char a6)
{
  PCWorkingColorVector::PCWorkingColorVector(v26);
  v35 = 0x3FF0000000000000;
  v36 = 0;
  v32 = 0x3FF0000000000000;
  v29 = 0x3FF0000000000000;
  v26[3] = 0x3FF0000000000000;
  v27 = 0u;
  v28 = 0u;
  v30 = 0u;
  v31 = 0u;
  v33 = 0u;
  v34 = 0u;
  v37 = 0;
  __asm { FMOV            V1.2D, #-1.0 }

  v38 = _Q1;
  v41 = 0;
  v42 = 0;
  v40 = 0;
  v43 = _Q1;
  v45 = 0u;
  v46 = 0u;
  v44 = 0u;
  PSHeliumNode::commonImageSpriteSetup(a1, &v25, a2, a4, a5, a6);
  v25 = 4;
  v17 = *(a1 + 560);
  if (!v17)
  {
    goto LABEL_9;
  }

  v18 = *a3;
  v19 = a1 + 560;
  do
  {
    v20 = *(v17 + 32);
    _CF = v20 >= v18;
    v21 = v20 < v18;
    if (_CF)
    {
      v19 = v17;
    }

    v17 = *(v17 + 8 * v21);
  }

  while (v17);
  if (v19 != a1 + 560 && v18 >= *(v19 + 32))
  {
    v39 = *(v19 + 40);
  }

  else
  {
LABEL_9:
    std::vector<std::shared_ptr<std::vector<unsigned char>>>::push_back[abi:ne200100]((a1 + 608), a3);
    v22 = *(a1 + 576);
    v24 = *a3;
    v47 = &v24;
    *(std::__tree<std::__value_type<ProShade::SamplerNode const*,int>,std::__map_value_compare<ProShade::SamplerNode const*,std::__value_type<ProShade::SamplerNode const*,int>,std::less<ProShade::SamplerNode const*>,true>,std::allocator<std::__value_type<ProShade::SamplerNode const*,int>>>::__emplace_unique_key_args<ProShade::SamplerNode const*,std::piecewise_construct_t const&,std::tuple<ProShade::SamplerNode const*&&>,std::tuple<>>(a1 + 552, &v24) + 10) = v22;
    v39 = *(a1 + 576);
    *(a1 + 576) = v39 + 1;
  }

  std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), &v25);
  result = v40;
  if (v40)
  {
    return (*(*v40 + 24))(v40);
  }

  return result;
}

void sub_2602E5EB4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PSHeliumNode::Sprite::~Sprite(va);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::addImageParticle(uint64_t a1, double *a2, unint64_t *a3, float64x2_t *a4, _OWORD *a5, char a6)
{
  PCWorkingColorVector::PCWorkingColorVector(v29);
  v38 = 0x3FF0000000000000;
  v39 = 0;
  v35 = 0x3FF0000000000000;
  v32 = 0x3FF0000000000000;
  v29[3] = 0x3FF0000000000000;
  v30 = 0u;
  v31 = 0u;
  v33 = 0u;
  v34 = 0u;
  v36 = 0u;
  v37 = 0u;
  v40 = 0;
  __asm { FMOV            V1.2D, #-1.0 }

  v41 = _Q1;
  v44 = 0;
  v45 = 0;
  v43 = 0;
  v46 = _Q1;
  v48 = 0u;
  v49 = 0u;
  v47 = 0u;
  PSHeliumNode::commonImageSpriteSetup(a1, v28, a2, a4, a5, a6);
  v17 = *a3;
  v18 = *(a1 + 536);
  if (!v18)
  {
    goto LABEL_9;
  }

  v19 = a1 + 536;
  do
  {
    v20 = *(v18 + 32);
    _CF = v20 >= v17;
    v21 = v20 < v17;
    if (_CF)
    {
      v19 = v18;
    }

    v18 = *(v18 + 8 * v21);
  }

  while (v18);
  if (v19 != a1 + 536 && v17 >= *(v19 + 32))
  {
    v42 = *(v19 + 40);
  }

  else
  {
LABEL_9:
    (*(*a1 + 120))(a1, *(a1 + 576), v17);
    if (*(a1 + 416) == 1)
    {
      {
        PSHeliumNode::addImageParticle(PCMatrix44Tmpl<double> *,HGRef<HGNode> const&,PCRect<double> const&,PCWorkingColorVector const&,BOOL)::maxBitmapCacheSize = (getPhysicalMemory() * 0.01);
      }

      v22 = vcvtd_n_s64_f64(a4[1].f64[0] * a4[1].f64[1] * 4.0, 2uLL);
      v23 = atomic_load(&gBitmapCacheSize);
      if ((v23 + v22) >= PSHeliumNode::addImageParticle(PCMatrix44Tmpl<double> *,HGRef<HGNode> const&,PCRect<double> const&,PCWorkingColorVector const&,BOOL)::maxBitmapCacheSize)
      {
        v24 = 16;
      }

      else
      {
        atomic_fetch_add(&gBitmapCacheSize, v22);
        *(a1 + 872) += v22;
        v24 = 2;
      }

      (*(*a1 + 136))(a1, *(a1 + 576), v24);
    }

    v25 = *(a1 + 576);
    v27 = *a3;
    v50 = &v27;
    *(std::__tree<std::__value_type<ProShade::SamplerNode const*,int>,std::__map_value_compare<ProShade::SamplerNode const*,std::__value_type<ProShade::SamplerNode const*,int>,std::less<ProShade::SamplerNode const*>,true>,std::allocator<std::__value_type<ProShade::SamplerNode const*,int>>>::__emplace_unique_key_args<ProShade::SamplerNode const*,std::piecewise_construct_t const&,std::tuple<ProShade::SamplerNode const*&&>,std::tuple<>>(a1 + 528, &v27) + 10) = v25;
    v42 = *(a1 + 576);
    *(a1 + 576) = v42 + 1;
  }

  std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), v28);
  result = v43;
  if (v43)
  {
    return (*(*v43 + 24))(v43);
  }

  return result;
}

void sub_2602E6160(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PSHeliumNode::Sprite::~Sprite(va);
  _Unwind_Resume(a1);
}

uint64_t getPhysicalMemory(void)
{
  v2 = 0;
  PCInfo::getMemoryInfo(&v2, 0, 0, 0, 0, 0, 0, 0, v1);
  return v2;
}

void sub_2602E63CC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  if (v4)
  {
    (*(*v4 + 24))(v4);
  }

  PSHeliumNode::Sprite::~Sprite(va);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::addRadialParticle(uint64_t a1, uint64_t *a2, double *a3, __int128 *a4, char a5)
{
  PCWorkingColorVector::PCWorkingColorVector(&v42);
  v53 = 0x3FF0000000000000;
  v54 = 0uLL;
  v50 = 0x3FF0000000000000;
  v47 = 0x3FF0000000000000;
  v44 = 0x3FF0000000000000;
  v45 = 0u;
  v46 = 0u;
  v48 = 0u;
  v49 = 0u;
  v51 = 0u;
  v52 = 0u;
  __asm { FMOV            V1.2D, #-1.0 }

  v55 = _Q1;
  v56 = 0;
  v59 = 0u;
  v60 = 0u;
  v61 = 0u;
  v15 = -1762037865 * ((*(a1 + 488) - *(a1 + 480)) >> 3);
  v41[0] = 5;
  v41[1] = v15;
  if (&v44 != a2)
  {
    for (i = 0; i != 16; i += 4)
    {
      v17 = (&v44 + i * 8);
      v18 = *&a2[i + 2];
      *v17 = *&a2[i];
      v17[1] = v18;
    }
  }

  v42 = *a4;
  v43 = a5;
  v19 = *(a3 + 1);
  v57 = *a3;
  v58 = v19;
  *(a1 + 418) = 1;
  v20 = *a3;
  v21 = a3[1];
  v23 = a3[2];
  v22 = a3[3];
  LiImagePolygon::LiImagePolygon(v39);
  std::vector<LiPolygon::PosEdge>::resize(v40, 4uLL);
  v25 = v40;
  v26 = *v40;
  *v26 = v20;
  *(v26 + 8) = v21;
  *(v26 + 16) = 0;
  *(v26 + 32) = v20 + v23;
  *(v26 + 40) = v21;
  *(v26 + 48) = 0;
  *(v26 + 64) = v20 + v23;
  *(v26 + 72) = v21 + v22;
  *(v26 + 80) = 0;
  *(v26 + 96) = v20;
  *(v26 + 104) = v21 + v22;
  *(v26 + 112) = 0;
  v27 = *(a1 + 644);
  if (v27 >= 1)
  {
    for (j = 0; j != v27; ++j)
    {
      memset(v38, 0, 32);
      if (j >= *(a1 + 644))
      {
        PCArray_base::badIndex(v24);
      }

      PCMatrix44Tmpl<double>::transform_row<double>(a2, (*(a1 + 648) + 32 * j), v38[0].f64);
      v24 = LiImagePolygon::clip(v39, v38, 0);
    }

    v25 = v40;
    v26 = *v40;
  }

  if (((v25[1] - v26) >> 5) >= 3)
  {
    PCMatrix44Tmpl<double>::operator*(a1 + 680, a2, v38);
    v29 = *v40;
    if (((v40[1] - *v40) >> 5) >= 1)
    {
      v30 = 0;
      v31 = 0;
      do
      {
        v36 = *(v29 + v30);
        v37 = 0;
        PCMatrix44Tmpl<double>::transform<double>(v38[0].f64, v36.i64, v36.i64);
        v35 = v36;
        PCRect<double>::operator|=((a1 + 808), &v35);
        v32.f64[0] = v55.f64[0];
        if (v55.f64[0] >= 0.0 && v55.f64[1] >= 0.0)
        {
          v32.f64[1] = v55.f64[1];
          v33 = vaddq_f64(v32, v54);
          v54 = vbslq_s8(vcgtq_f64(v54, v35), v35, v54);
          v55 = vsubq_f64(vbslq_s8(vcgtq_f64(v35, v33), v35, v33), v54);
        }

        else
        {
          v54 = v35;
          v55 = 0uLL;
        }

        ++v31;
        v29 = *v40;
        v30 += 32;
      }

      while (v31 < ((v40[1] - *v40) >> 5));
    }

    std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), v41);
  }

  LiImagePolygon::~LiImagePolygon(v39);
  result = v56;
  if (v56)
  {
    return (*(*v56 + 24))(v56);
  }

  return result;
}

void sub_2602E6724(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, char a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, char a46)
{
  LiImagePolygon::~LiImagePolygon(&a32);
  PSHeliumNode::Sprite::~Sprite(&a46);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::addCircleParticle(uint64_t a1, uint64_t *a2, double *a3, __int128 *a4, char a5)
{
  PCWorkingColorVector::PCWorkingColorVector(&v42);
  v53 = 0x3FF0000000000000;
  v54 = 0uLL;
  v50 = 0x3FF0000000000000;
  v47 = 0x3FF0000000000000;
  v44 = 0x3FF0000000000000;
  v45 = 0u;
  v46 = 0u;
  v48 = 0u;
  v49 = 0u;
  v51 = 0u;
  v52 = 0u;
  __asm { FMOV            V1.2D, #-1.0 }

  v55 = _Q1;
  v56 = 0;
  v59 = 0u;
  v60 = 0u;
  v61 = 0u;
  v15 = -1762037865 * ((*(a1 + 488) - *(a1 + 480)) >> 3);
  v41[0] = 6;
  v41[1] = v15;
  if (&v44 != a2)
  {
    for (i = 0; i != 16; i += 4)
    {
      v17 = (&v44 + i * 8);
      v18 = *&a2[i + 2];
      *v17 = *&a2[i];
      v17[1] = v18;
    }
  }

  v42 = *a4;
  v43 = a5;
  v19 = *(a3 + 1);
  v57 = *a3;
  v58 = v19;
  v20 = *a3;
  v21 = a3[1];
  v23 = a3[2];
  v22 = a3[3];
  LiImagePolygon::LiImagePolygon(v39);
  std::vector<LiPolygon::PosEdge>::resize(v40, 4uLL);
  v25 = v40;
  v26 = *v40;
  *v26 = v20;
  *(v26 + 8) = v21;
  *(v26 + 16) = 0;
  *(v26 + 32) = v20 + v23;
  *(v26 + 40) = v21;
  *(v26 + 48) = 0;
  *(v26 + 64) = v20 + v23;
  *(v26 + 72) = v21 + v22;
  *(v26 + 80) = 0;
  *(v26 + 96) = v20;
  *(v26 + 104) = v21 + v22;
  *(v26 + 112) = 0;
  v27 = *(a1 + 644);
  if (v27 >= 1)
  {
    for (j = 0; j != v27; ++j)
    {
      memset(v38, 0, 32);
      if (j >= *(a1 + 644))
      {
        PCArray_base::badIndex(v24);
      }

      PCMatrix44Tmpl<double>::transform_row<double>(a2, (*(a1 + 648) + 32 * j), v38[0].f64);
      v24 = LiImagePolygon::clip(v39, v38, 0);
    }

    v25 = v40;
    v26 = *v40;
  }

  if (((v25[1] - v26) >> 5) >= 3)
  {
    PCMatrix44Tmpl<double>::operator*(a1 + 680, a2, v38);
    v29 = *v40;
    if (((v40[1] - *v40) >> 5) >= 1)
    {
      v30 = 0;
      v31 = 0;
      do
      {
        v36 = *(v29 + v30);
        v37 = 0;
        PCMatrix44Tmpl<double>::transform<double>(v38[0].f64, v36.i64, v36.i64);
        v35 = v36;
        PCRect<double>::operator|=((a1 + 808), &v35);
        v32.f64[0] = v55.f64[0];
        if (v55.f64[0] >= 0.0 && v55.f64[1] >= 0.0)
        {
          v32.f64[1] = v55.f64[1];
          v33 = vaddq_f64(v32, v54);
          v54 = vbslq_s8(vcgtq_f64(v54, v35), v35, v54);
          v55 = vsubq_f64(vbslq_s8(vcgtq_f64(v35, v33), v35, v33), v54);
        }

        else
        {
          v54 = v35;
          v55 = 0uLL;
        }

        ++v31;
        v29 = *v40;
        v30 += 32;
      }

      while (v31 < ((v40[1] - *v40) >> 5));
    }

    std::vector<PSHeliumNode::Sprite>::push_back[abi:ne200100]((a1 + 480), v41);
  }

  LiImagePolygon::~LiImagePolygon(v39);
  result = v56;
  if (v56)
  {
    return (*(*v56 + 24))(v56);
  }

  return result;
}

void sub_2602E6A48(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, char a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, char a46)
{
  LiImagePolygon::~LiImagePolygon(&a32);
  PSHeliumNode::Sprite::~Sprite(&a46);
  _Unwind_Resume(a1);
}

void PSHeliumNode::convertTexturesToBitmaps(PSHeliumNode *this)
{
  v1 = this;
  v25[0] = 0;
  v25[1] = 0;
  v23[1] = 0;
  v24 = v25;
  v22 = v23;
  v23[0] = 0;
  v2 = *(this + 73);
  v3 = this + 592;
  if (v2 != this + 592)
  {
    while (1)
    {
      v21 = 0uLL;
      (*(**(v2 + 4) + 72))(&v20);
      v4 = v20;
      v20 = 0uLL;
      v5 = *(&v21 + 1);
      v21 = v4;
      if (v5)
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](v5);
        if (*(&v20 + 1))
        {
          std::__shared_weak_count::__release_shared[abi:ne200100](*(&v20 + 1));
        }
      }

      std::vector<std::shared_ptr<std::vector<unsigned char>>>::push_back[abi:ne200100](v1 + 76, &v21);
      v6 = *(v1 + 144);
      v19 = v21;
      *&v20 = &v19;
      *(std::__tree<std::__value_type<ProShade::SamplerNode const*,int>,std::__map_value_compare<ProShade::SamplerNode const*,std::__value_type<ProShade::SamplerNode const*,int>,std::less<ProShade::SamplerNode const*>,true>,std::allocator<std::__value_type<ProShade::SamplerNode const*,int>>>::__emplace_unique_key_args<ProShade::SamplerNode const*,std::piecewise_construct_t const&,std::tuple<ProShade::SamplerNode const*&&>,std::tuple<>>(v1 + 552, &v19) + 10) = v6;
      v8 = *(v2 + 4);
      v7 = *(v2 + 5);
      if (v7)
      {
        atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
      }

      if (v8)
      {
        if (v9)
        {
          break;
        }
      }

      v11 = *(v1 + 144);
      v19 = v8;
      *&v20 = &v19;
      *(std::__tree<std::__value_type<SCNNode *,int>,std::__map_value_compare<SCNNode *,std::__value_type<SCNNode *,int>,std::less<SCNNode *>,true>,std::allocator<std::__value_type<SCNNode *,int>>>::__emplace_unique_key_args<SCNNode *,std::piecewise_construct_t const&,std::tuple<SCNNode * const&>,std::tuple<>>(&v24, &v19) + 10) = v11;
      ++*(v1 + 144);
      if (v7)
      {
        goto LABEL_14;
      }

LABEL_15:
      this = *(&v21 + 1);
      if (*(&v21 + 1))
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](*(&v21 + 1));
      }

      v12 = *(v2 + 1);
      if (v12)
      {
        do
        {
          v13 = v12;
          v12 = *v12;
        }

        while (v12);
      }

      else
      {
        do
        {
          v13 = *(v2 + 2);
          v14 = *v13 == v2;
          v2 = v13;
        }

        while (!v14);
      }

      v2 = v13;
      if (v13 == v3)
      {
        goto LABEL_23;
      }
    }

    if (v7)
    {
      atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v10 = *(v1 + 144);
    LODWORD(v19) = ProGL::TextureHandle::getName(v9 + 8);
    *&v20 = &v19;
    *(std::__tree<std::__value_type<unsigned int,unsigned int>,std::__map_value_compare<unsigned int,std::__value_type<unsigned int,unsigned int>,std::less<unsigned int>,true>,std::allocator<std::__value_type<unsigned int,unsigned int>>>::__emplace_unique_key_args<unsigned int,std::piecewise_construct_t const&,std::tuple<unsigned int &&>,std::tuple<>>(&v22, &v19) + 8) = v10;
    ++*(v1 + 144);
    if (!v7)
    {
      goto LABEL_15;
    }

    std::__shared_weak_count::__release_shared[abi:ne200100](v7);
LABEL_14:
    std::__shared_weak_count::__release_shared[abi:ne200100](v7);
    goto LABEL_15;
  }

LABEL_23:
  v15 = *(v1 + 60);
  for (i = *(v1 + 61); v15 != i; v15 += 312)
  {
    if (*v15 == 3)
    {
      *v15 = 4;
      if (*(v15 + 208))
      {
        *&v20 = *(v15 + 208);
        *&v21 = &v20;
        this = std::__tree<std::__value_type<SCNNode *,int>,std::__map_value_compare<SCNNode *,std::__value_type<SCNNode *,int>,std::less<SCNNode *>,true>,std::allocator<std::__value_type<SCNNode *,int>>>::__emplace_unique_key_args<SCNNode *,std::piecewise_construct_t const&,std::tuple<SCNNode * const&>,std::tuple<>>(&v24, &v20);
        v17 = *(this + 10);
      }

      else
      {
        LODWORD(v20) = *(v15 + 200);
        *&v21 = &v20;
        this = std::__tree<std::__value_type<unsigned int,unsigned int>,std::__map_value_compare<unsigned int,std::__value_type<unsigned int,unsigned int>,std::less<unsigned int>,true>,std::allocator<std::__value_type<unsigned int,unsigned int>>>::__emplace_unique_key_args<unsigned int,std::piecewise_construct_t const&,std::tuple<unsigned int &&>,std::tuple<>>(&v22, &v20);
        v17 = *(this + 8);
      }

      *(v15 + 200) = v17;
    }
  }

  v18 = PSTextureCache::Instance(this);
  PSTextureCache::removeTextures(v18, v1 + 73);
  std::__tree<std::shared_ptr<PCImage>>::destroy(v1 + 584, *(v1 + 74));
  *(v1 + 73) = v3;
  *(v1 + 37) = 0u;
  *(v1 + 864) = 1;
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&v22, v23[0]);
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&v24, v25[0]);
}

void sub_2602E6DA0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, char a16, void *a17, uint64_t a18, char a19, void *a20)
{
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&a16, a17);
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(&a19, a20);
  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::preRender(uint64_t this)
{
  if (*(this + 416) == 1)
  {
    operator new();
  }

  return this;
}

void PSHeliumNode::renderImageParticlePage(PSHeliumNode *this, HGGPURenderer **a2, ProGL::GL *a3, const PSHeliumNode::Sprite *a4)
{
  v7 = *(a4 + 50);
  glActiveTexture(0x84C0u);
  if (*(this + 106) != v7)
  {
    glBindTexture(0xDE1u, v7);
    *(this + 106) = v7;
  }

  PSHeliumNode::commonRenderTextureParticlePage(this, a2, v8, a4);
}

void PSHeliumNode::renderBitmapParticlePage(PSHeliumNode *this, HGGPURenderer **a2, ProGL::GL *a3, const PSHeliumNode::Sprite *a4)
{
  *(this + 106) = -1;
  v7 = *(*(this + 76) + 16 * *(a4 + 50));
  v25 = v7;
  if (*(&v7 + 1))
  {
    atomic_fetch_add_explicit((*(&v7 + 1) + 8), 1uLL, memory_order_relaxed);
  }

  v8 = v7;
  v9 = (*(*v7 + 16))(v7, a2, a3);
  v10 = (*(*v8 + 24))(v8);
  v11 = *(v8 + 36);
  v12 = (*(**(v8 + 8) + 48))(*(v8 + 8));
  PCImageAttributes::PCImageAttributes(v19);
  v19[0] = 2;
  v19[1] = v9;
  v19[2] = v10;
  v20 = v11;
  v21 = v12;
  PCImage::getColorSpace(v8, &lpsrc);
  v13 = lpsrc;
  if (space && space != lpsrc)
  {
    PCCFRefTraits<CGColorSpace *>::release(space);
    v13 = lpsrc;
  }

  space = v13;
  lpsrc = 0;
  PCCFRef<CGColorSpace *>::~PCCFRef(&lpsrc);
  v23 = 3553;
  v24 = 0;
  PGCreateImage(v19, &lpsrc);
  if (!lpsrc)
  {
    v14 = 0;
    goto LABEL_11;
  }

  if (!v14)
  {
LABEL_11:
    v15 = 0;
    goto LABEL_12;
  }

  v15 = v18;
  if (v18)
  {
    atomic_fetch_add_explicit(&v18->__shared_owners_, 1uLL, memory_order_relaxed);
  }

LABEL_12:
  if (v18)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v18);
  }

  PGTexture2D::setBitmapRef(v14, &v25);
  glActiveTexture(0x84C0u);
  PGTexture::bind(v14);
  PSHeliumNode::commonRenderTextureParticlePage(this, a2, v16, a4);
  PGTexture::unbind(v14);
  if (v15)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v15);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(&space);
  if (*(&v25 + 1))
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](*(&v25 + 1));
  }
}

void sub_2602E7168(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, CGColorSpace *a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, CGColorSpace *a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, std::__shared_weak_count *a22)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a10);
  PCCFRef<CGColorSpace *>::~PCCFRef(&a15);
  if (a22)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a22);
  }

  _Unwind_Resume(a1);
}

_BYTE *PSHeliumNode::renderRadialParticlePage(_BYTE *this, HGPage *a2, ProGL::GL *a3, const PSHeliumNode::Sprite *a4)
{
  if ((this[429] & 1) == 0)
  {
    v4 = this;
    PSHeliumNode::unbindSurface(this);
    v5 = *(v4 + 55);
    if (!v5)
    {
      throw_PCNullPointerException(1);
    }

    this = (*(*v5 + 16))(v5);
    v4[429] = 1;
  }

  return this;
}

void PSHeliumNode::commonRenderTextureParticlePage(PSHeliumNode *this, HGGPURenderer **a2, ProGL::GL *a3, const PSHeliumNode::Sprite *a4)
{
  v27 = *MEMORY[0x277D85DE8];
  PSHeliumNode::bindImageSurface(this, *(a4 + 24));
  if ((*(this + 417) & 1) == 0 && (*(a4 + 304) & 1) == 0)
  {
    v7 = vmovn_s64(vcvtq_s64_f64(*(a4 + 216)));
    v8 = vmovn_s64(vcvtq_s64_f64(*(a4 + 232)));
    ptr[0] = v7.i32[0];
    ptr[1] = v7.i32[1];
    ptr[3] = v7.i32[1];
    ptr[4] = v7.i32[0];
    v9 = vcvt_f32_s32(vadd_s32(v8, v7));
    ptr[5] = v9.f32[1];
    ptr[2] = v9.f32[0];
    v26 = v9;
    v24[0] = xmmword_260857DB0;
    v24[1] = unk_260857DC0;
    v21 = *(a4 + 8);
    if ((*a4 - 3) <= 1)
    {
      PCWorkingColorVector::operator*=(&v21, *(&v21 + 3));
    }

    PCWorkingColor::getRGBA(&v21, v23, v23 + 1, v23 + 2, (v23 | 0xC));
    v23[2] = v23[0];
    v23[3] = v23[0];
    v23[1] = v23[0];
    AttribLocation = glGetAttribLocation(*(this + 220), "a_position");
    v11 = glGetAttribLocation(*(this + 220), "a_texCoord");
    v12 = glGetAttribLocation(*(this + 220), "a_partColor");
    UniformLocation = glGetUniformLocation(*(this + 220), "u_objectToFilmMatrix");
    v14 = glGetUniformLocation(*(this + 220), "s_texture");
    glUseProgram(*(this + 220));
    glVertexAttribPointer(AttribLocation, 2, 0x1406u, 0, 0, ptr);
    glEnableVertexAttribArray(AttribLocation);
    glVertexAttribPointer(v11, 2, 0x1406u, 0, 0, v24);
    glEnableVertexAttribArray(v11);
    glVertexAttribPointer(v12, 4, 0x1406u, 0, 0, v23);
    glEnableVertexAttribArray(v12);
    ProjectionMatrix = HGGPURenderer::GetProjectionMatrix(*a2);
    PGHelium::convertHGTransform(ProjectionMatrix, v16, v20);
    PCMatrix44Tmpl<double>::operator*(v20, (this + 680), value);
    PCMatrix44Tmpl<double>::operator*(value, a4 + 2, v19);
    for (i = 0; i != 16; ++i)
    {
      v18 = *(&v19[2 * (i & 3)] + (i >> 2));
      value[i] = v18;
    }

    glUniformMatrix4fv(UniformLocation, 1, 0, value);
    glActiveTexture(0x84C0u);
    glUniform1i(v14, 0);
    glDrawArrays(5u, 0, 4);
  }
}

void PSHeliumNode::bindImageSurface(PSHeliumNode *this, double a2)
{
  if (a2 != -1.0 || (*(this + 428) & 1) == 0)
  {
    PSHeliumNode::unbindSurface(this);
    Instance = OZShaderManager::getInstance(v3);
    Shader = OZShaderManager::getShader(Instance, "bilinearMaskEdgeAA");
    (*(*Shader + 16))(Shader);
    if (*(this + 417) == 1)
    {
      PGProgram::setLocalParameter(Shader, 0.0, 0.0, 1.0, 0.0);
      v7 = OZPolygonAA::getInstance(v6);
      EdgeAATexture = OZPolygonAA::getEdgeAATexture(v7);
      glActiveTexture(0x84C2u);
      Target = ProGL::TextureHandle::getTarget((EdgeAATexture + 64));
      Name = ProGL::TextureHandle::getName((EdgeAATexture + 64));
      glBindTexture(Target, Name);
      v11 = ProGL::TextureHandle::getTarget((EdgeAATexture + 64));
      glEnable(v11);
    }

    else
    {
      PGProgram::setLocalParameter(Shader, 1.0, 0.0, 0.0, 0.0);
    }

    *(this + 428) = 1;
  }
}

void PSHeliumNode::drawPoint(int a1, HGRect *a2, long double a3, __n128 a4, float64x2_t *a5)
{
  Effect_toPCRecti(a2, &__y);
  v8.i64[0] = SLODWORD(__y.f64[0]);
  v8.i64[1] = SHIDWORD(__y.f64[0]);
  v9 = vcvtq_f64_s64(v8);
  v8.i64[0] = SLODWORD(__y.f64[1]);
  v8.i64[1] = SHIDWORD(__y.f64[1]);
  v36[0] = v9;
  v36[1] = vcvtq_f64_s64(v8);
  __y.f64[0] = 0.0;
  modf(a3, __y.f64);
  v10 = __y.f64[0];
  __asm { FMOV            V2.2D, #0.5 }

  __y = vaddq_f64(vaddq_f64(*a5, _Q2), vdupq_lane_s64(COERCE__INT64(-vcvtmd_s64_f64(a3 * 0.5 + 0.5 + 0.0000001)), 0));
  v34 = v10;
  v35 = v10;
  PCRect<double>::operator&=(&__y, v36);
  v16 = v34;
  if (v34 >= 0.0)
  {
    v17 = v35;
    if (v35 >= 0.0)
    {
      v18 = *&a2[1].var0;
      var2 = a2[1].var2;
      __x = vsubq_f64(__y, v36[0]);
      __y = __x;
      v37 = 0.0;
      v20 = __x.f64[1];
      modf(__x.f64[1], &v37);
      v21 = v37;
      v22 = v37;
      v37 = 0.0;
      modf(__x.f64[1] + v17, &v37);
      if (v37 > v22)
      {
        v23 = v21;
        v24 = v18 + 16 * var2 * v21;
        v25 = 16 * var2;
        do
        {
          v37 = 0.0;
          modf(__x.f64[0], &v37);
          v26 = v37;
          v27 = v37;
          v37 = 0.0;
          modf(__x.f64[0] + v16, &v37);
          if (v37 > v27)
          {
            v28 = (v24 + 16 * v26);
            v29 = v26 + 1;
            do
            {
              *v28++ = a4;
              v30 = v29;
              v16 = v34;
              __x.f64[0] = __y.f64[0];
              v37 = 0.0;
              modf(__y.f64[0] + v34, &v37);
              ++v29;
            }

            while (v37 > v30);
            v20 = __y.f64[1];
            v17 = v35;
          }

          ++v23;
          v37 = 0.0;
          modf(v20 + v17, &v37);
          v24 += v25;
        }

        while (v37 > v23);
      }
    }
  }
}

BOOL PSHeliumNode::drawLine(int a1, HGRect *a2, __n128 a3, float64x2_t *a4, float64x2_t *a5)
{
  v6 = *a4;
  v46 = *a5;
  v47 = v6;
  Effect_toPCRecti(a2, &v41);
  v7.i64[0] = v41.i32[0];
  v7.i64[1] = v41.i32[1];
  v8 = vcvtq_f64_s64(v7);
  v7.i64[0] = v42;
  v7.i64[1] = v43;
  v44 = v8;
  v45 = vcvtq_f64_s64(v7);
  result = PCRect<double>::clipLine(v44.f64, &v47, v46.f64);
  if (result)
  {
    v10 = v45.f64[0];
    v11 = vsubq_f64(v47, v44);
    v12 = vsubq_f64(v46, v44);
    v13 = vabdq_f64(v12, v11);
    if (v13.f64[1] <= v13.f64[0])
    {
      v14 = v11.f64[0];
      v11.f64[0] = v11.f64[1];
      v15 = v12.f64[0];
      v12.f64[0] = v12.f64[1];
      v10 = v45.f64[1];
      v16 = v45.f64[0];
      v18 = v13.f64[1];
      v17 = v13.f64[0];
    }

    else
    {
      v14 = v11.f64[1];
      v15 = v12.f64[1];
      v16 = v45.f64[1];
      v17 = v13.f64[1];
      v18 = v13.f64[0];
    }

    if (v14 > v15)
    {
      v19 = v15;
    }

    else
    {
      v19 = v14;
    }

    if (v14 > v15)
    {
      v20 = v12.f64[0];
    }

    else
    {
      v20 = v11.f64[0];
    }

    if (v14 > v15)
    {
      v15 = v14;
      v12.f64[0] = v11.f64[0];
    }

    v21 = floor(v19 + 0.0000001);
    v22 = floor(v15 + 0.0000001);
    v23 = floor(v16 + 0.0000001) + -1.0;
    if (v19 >= v16)
    {
      v21 = v23;
    }

    v24 = v21;
    if (v15 >= v16)
    {
      v25 = v23;
    }

    else
    {
      v25 = v22;
    }

    v26 = v25;
    if (v20 >= v12.f64[0])
    {
      v27 = -1.0;
    }

    else
    {
      v27 = 1.0;
    }

    if (v24 <= v26)
    {
      var2 = a2[1].var2;
      v29 = *&a2[1].var0;
      v30 = v18 / v17;
      v31 = floor(v20 + 0.0000001);
      v32 = floor(v10 + 0.0000001) + -1.0;
      if (v20 >= v10)
      {
        v33 = v32;
      }

      else
      {
        v33 = v31;
      }

      v34 = v33;
      v35 = v20 - v33 - v30 * (v27 * (v19 - v24));
      if (v27 < 0.0)
      {
        v35 = 1.0 - v35;
      }

      v36 = v29 + 16 * v24;
      v37 = v29 + 16 * var2 * v24;
      v38 = v26 - v24 + 1;
      do
      {
        v39 = (v36 + 16 * v34 * var2);
        if (v13.f64[1] > v13.f64[0])
        {
          v39 = (v37 + 16 * v34);
        }

        *v39 = a3;
        v35 = v30 + v35;
        if (v35 >= 1.0)
        {
          v35 = v35 + -1.0;
          v34 = (v27 + v34);
        }

        v36 += 16;
        v37 += 16 * var2;
        --v38;
      }

      while (v38);
    }
  }

  return result;
}

BOOL PSHeliumNode::bindMetalProgramForSprite(PSHeliumNode *this, HGPage *a2, HGMetalHandler *a3, const PSHeliumNode::Sprite *a4)
{
  v18 = *MEMORY[0x277D85DE8];
  v6 = *a4 - 1;
  if (v6 > 5)
  {
    v7 = 0;
  }

  else
  {
    v7 = dword_260857F54[v6];
  }

  if (*(this + 224) == v7)
  {
    return 1;
  }

  TextureMetalShaderText = 0;
  __p = 0;
  v16 = 0;
  v17 = 0;
  if (v7 > 2)
  {
    if (v7 != 3)
    {
      if (v7 == 4)
      {
      }

      goto LABEL_20;
    }

    {
      if (v14)
      {
        HGMetalUtils::stringForMetalHeader(v14);
      }
    }
  }

  else
  {
    if (v7 != 1)
    {
      if (v7 == 2)
      {
        HGMetalUtils::stringForMetalHeader(this);
      }

      goto LABEL_20;
    }

    {
      if (v11)
      {
        HGMetalUtils::stringForMetalHeader(v11);
      }
    }
  }

  if (*(v10 + 23) >= 0)
  {
    TextureMetalShaderText = v10;
  }

  else
  {
    TextureMetalShaderText = *v10;
  }

LABEL_20:
  v12 = (*(**a2 + 376))(*a2, TextureMetalShaderText, this);
  v8 = v12 != 0;
  if (v12)
  {
    *(this + 224) = v7;
  }

  if (SHIBYTE(v17) < 0)
  {
    operator delete(__p);
  }

  return v8;
}

void sub_2602E7D3C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *a9, uint64_t a10, int a11, __int16 a12, char a13, char a14, void *a15, uint64_t a16, int a17, __int16 a18, char a19, char a20, void *__p, uint64_t a22, int a23, __int16 a24, char a25, char a26)
{
  if (a26 < 0)
  {
    operator delete(__p);
  }

  if (a14 < 0)
  {
    operator delete(a9);
  }

  _Unwind_Resume(a1);
}

uint64_t PSHeliumNode::renderLineParticlePageMetal(PSHeliumNode *this, HGPage *a2, HGMetalHandler *a3, const PSHeliumNode::Sprite *a4)
{
  v16 = *MEMORY[0x277D85DE8];
  PCMatrix44Tmpl<double>::operator*(this + 680, a4 + 2, v15);
  *&v6 = PCMatrix44Tmpl<double>::toSimdFloat(v15);
  v14[0] = v6;
  v14[1] = v7;
  v14[2] = v8;
  v14[3] = v9;
  v10 = (*(*a3 + 176))(a3, v14);
  PSHeliumNode::updateHandlerWithSprite(v10, a3, a4);
  *&v11 = vcvt_f32_f64(*(a4 + 16));
  *(&v11 + 1) = 0x3F80000000000000;
  *&v12 = vcvt_f32_f64(*(a4 + 280));
  *(&v12 + 1) = 0x3F80000000000000;
  v15[0] = v11;
  v15[1] = v12;
  return HGMetalHandler::PrimitivesDraw(a3, 1u, v15, 2u, 0);
}

uint64_t PSHeliumNode::renderOutlineParticlePageMetal(PSHeliumNode *this, HGPage *a2, HGMetalHandler *a3, const PSHeliumNode::Sprite *a4)
{
  v22 = *MEMORY[0x277D85DE8];
  PCMatrix44Tmpl<double>::operator*(this + 680, a4 + 2, v21);
  *&v6 = PCMatrix44Tmpl<double>::toSimdFloat(v21);
  v20[0] = v6;
  v20[1] = v7;
  v20[2] = v8;
  v20[3] = v9;
  v10 = (*(*a3 + 176))(a3, v20);
  PSHeliumNode::updateHandlerWithSprite(v10, a3, a4);
  v11 = *(a4 + 27);
  v12 = *(a4 + 28);
  v13 = v11;
  *&v11 = v11 + *(a4 + 29);
  v14 = v12 + *(a4 + 30);
  *&v12 = v12;
  v15 = xmmword_2603427D0;
  v16 = xmmword_2603427D0;
  *&v16 = v13;
  v17 = v16;
  DWORD1(v17) = LODWORD(v12);
  LODWORD(v15) = LODWORD(v11);
  v18 = v15;
  DWORD1(v18) = LODWORD(v12);
  *(&v16 + 1) = v14;
  *(&v15 + 1) = v14;
  v21[0] = v17;
  v21[1] = v18;
  v21[2] = v18;
  v21[3] = v15;
  v21[4] = v15;
  v21[5] = v16;
  v21[6] = v16;
  v21[7] = v17;
  v21[8] = v17;
  v21[9] = v15;
  v21[10] = v18;
  v21[11] = v16;
  return HGMetalHandler::PrimitivesDraw(a3, 1u, v21, 0xCu, 0);
}

void PSHeliumNode::renderBitmapParticlePageMetal(PSHeliumNode *this, HGGPURenderer **a2, HGMetalTexture ***a3, const PSHeliumNode::Sprite *a4)
{
  v8 = *(*(this + 76) + 16 * *(a4 + 50));
  v14 = v8;
  v9 = *(&v8 + 1);
  if (*(&v8 + 1))
  {
    atomic_fetch_add_explicit((*(&v8 + 1) + 8), 1uLL, memory_order_relaxed);
  }

  if (v8)
  {
    v12 = 0;
    FxSupport::pcBitmapToHGBitmap(&v14, &v12, &v13);
    MetalContext = HGGPURenderer::GetMetalContext(*a2);
    *&v15.var0 = *(v13 + 28);
    *&v15.var2 = 0;
    HGMetalTexture::createFromBitmap(MetalContext, v13, *(v13 + 20), v15, 1, &v12);
    PSHeliumNode::commonRenderMetalTexture(this, v11, a3, a4, &v12);
    if (v12)
    {
      (*(*v12 + 24))(v12);
    }

    if (v13)
    {
      (*(*v13 + 24))(v13);
    }

    v9 = *(&v14 + 1);
  }

  if (v9)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v9);
  }
}

void sub_2602E8130(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a9)
  {
    (*(*a9 + 24))(a9);
  }

  if (a10)
  {
    (*(*a10 + 24))(a10);
  }

  if (a12)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a12);
  }

  _Unwind_Resume(exception_object);
}

HGBitmap *PSHeliumNode::renderRadialParticlePageMetal(PSHeliumNode *this, HGGPURenderer **a2, HGMetalHandler *a3, const PSHeliumNode::Sprite *a4)
{
  v22 = *MEMORY[0x277D85DE8];
  PCMatrix44Tmpl<double>::operator*(this + 680, a4 + 2, v17);
  *&v8 = PCMatrix44Tmpl<double>::toSimdFloat(v17);
  v18 = v8;
  v19 = v9;
  v20 = v10;
  v21 = v11;
  (*(*a3 + 176))(a3, &v18);
  (*(*a3 + 80))(a3, 0);
  v12 = (*(*a3 + 88))(a3);
  PSHeliumNode::updateHandlerWithSprite(v12, a3, a4);
  v13 = *(this + 57);
  if (!v13)
  {
    throw_PCNullPointerException(1);
  }

  MetalContext = HGGPURenderer::GetMetalContext(*a2);
  OZMetalGradientRadial::getTexture(v13, MetalContext, &v16);
  HGMetalHandler::BindTexture(a3, 0, v16);
  v17[0] = xmmword_260857E10;
  v17[1] = unk_260857E20;
  v17[2] = xmmword_260857E30;
  v17[3] = unk_260857E40;
  v18 = xmmword_260857E50;
  v19 = unk_260857E60;
  v20 = xmmword_260857E70;
  v21 = unk_260857E80;
  HGMetalHandler::PrimitivesDraw(a3, 4u, v17, 4u, &v18);
  result = v16;
  if (v16)
  {
    return (*(*v16 + 24))(v16);
  }

  return result;
}

void sub_2602E838C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  if (a2)
  {
    __clang_call_terminate(exception_object);
  }

  _Unwind_Resume(exception_object);
}

void PSHeliumNode::renderCircleParticlePageMetal(PSHeliumNode *this, HGPage *a2, HGMetalHandler *a3, const PSHeliumNode::Sprite *a4)
{
  PCMatrix44Tmpl<double>::operator*(this + 680, a4 + 2, &v45);
  *&v6 = PCMatrix44Tmpl<double>::toSimdFloat(&v45);
  v48 = v6;
  v49 = v7;
  v50 = v8;
  v51 = v9;
  (*(*a3 + 176))(a3, &v48);
  (*(*a3 + 80))(a3, 0);
  (*(*a3 + 88))(a3);
  v10 = *(a4 + 22);
  v45 = 0;
  v46 = 0;
  v47 = 0;
  v48 = 0uLL;
  *&v49 = 0;
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE7reserveEm(&v45, 0x44uLL);
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE7reserveEm(&v48, 0x44uLL);
  __asm { FMOV            V1.4S, #1.0 }

  v43 = xmmword_260344BA0;
  v44 = _Q1;
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100ERKS1_(&v48, &v43);
  v34 = 1.0 / v10 + 0.375;
  *&v16 = v34;
  DWORD1(v16) = 0;
  DWORD2(v16) = 0;
  HIDWORD(v16) = 1.0;
  v33 = v16;
  *v41 = v16;
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(&v45, v41);
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100ERKS1_(&v48, &v44);
  *v41 = xmmword_260857D90;
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(&v45, v41);
  v17 = 0;
  __asm { FMOV            V0.2D, #0.375 }

  v36 = _Q0;
  do
  {
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100ERKS1_(&v48, &v43);
    v19 = vcvtd_n_f64_u32(v17, 5uLL);
    v21 = __sincos_stret((v19 + v19) * 3.14159265);
    v20.f64[0] = v21.__cosval;
    v20.f64[1] = v21.__sinval;
    v35 = v20;
    *&v22 = vcvt_f32_f64(vmulq_n_f64(v20, v34));
    *(&v22 + 1) = 0x3F80000000000000;
    *v41 = v22;
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(&v45, v41);
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100ERKS1_(&v48, &v44);
    *&v23 = vcvt_f32_f64(vmulq_f64(v35, v36));
    *(&v23 + 1) = 0x3F80000000000000;
    *v41 = v23;
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(&v45, v41);
    ++v17;
  }

  while (v17 != 32);
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100ERKS1_(&v48, &v43);
  *v41 = v33;
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(&v45, v41);
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100ERKS1_(&v48, &v44);
  *v41 = xmmword_260857D90;
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(&v45, v41);
  HGMetalHandler::PrimitivesDraw(a3, 4u, v45, (v46 - v45) >> 4, v48);
  v41[0] = 0;
  v41[1] = 0;
  v42 = 0;
  __p = 0;
  v39 = 0;
  v40 = 0;
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE7reserveEm(v41, 0x60uLL);
  v24 = 0;
  do
  {
    v37 = xmmword_2603427D0;
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(v41, &v37);
    v25 = vcvtd_n_f64_u32(v24, 5uLL);
    v27 = __sincos_stret((v25 + v25) * 3.14159265);
    v26.f64[0] = v27.__cosval;
    v26.f64[1] = v27.__sinval;
    *&v28 = vcvt_f32_f64(vmulq_f64(v26, v36));
    *(&v28 + 1) = 0x3F80000000000000;
    v37 = v28;
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(v41, &v37);
    v29 = vcvtd_n_f64_u32(++v24, 5uLL);
    v31 = __sincos_stret((v29 + v29) * 3.14159265);
    v30.f64[0] = v31.__cosval;
    v30.f64[1] = v31.__sinval;
    *&v32 = vcvt_f32_f64(vmulq_f64(v30, v36));
    *(&v32 + 1) = 0x3F80000000000000;
    v37 = v32;
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE9push_backB8ne200100EOS1_(v41, &v37);
  }

  while (v24 != 32);
  _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE6resizeEmRKS1_(&__p, (v41[1] - v41[0]) >> 4, &v44);
  HGMetalHandler::PrimitivesDraw(a3, 3u, v41[0], (v41[1] - v41[0]) >> 4, __p);
  if (__p)
  {
    v39 = __p;
    operator delete(__p);
  }

  if (v41[0])
  {
    v41[1] = v41[0];
    operator delete(v41[0]);
  }

  if (v48)
  {
    *(&v48 + 1) = v48;
    operator delete(v48);
  }

  if (v45)
  {
    v46 = v45;
    operator delete(v45);
  }
}

void sub_2602E879C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, void *a24, uint64_t a25, uint64_t a26, void *a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, void *__p, uint64_t a36)
{
  v38 = *(v36 - 112);
  if (v38)
  {
    *(v36 - 104) = v38;
    operator delete(v38);
  }

  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t PSHeliumNode::updateHandlerWithSprite(PSHeliumNode *this, HGMetalHandler *a2, const PSHeliumNode::Sprite *a3)
{
  v5 = *a3 - 3;
  if (v5 >= 3)
  {
    HGMetalHandler::DisableBlending(a2);
    v9[0] = *(a3 + 8);
  }

  else
  {
    HGMetalHandler::EnableBlending(a2);
    if (v5 == 2)
    {
      v6 = 4;
    }

    else
    {
      v6 = 1;
    }

    if (*(a3 + 24))
    {
      v7 = 1;
    }

    else
    {
      v7 = 5;
    }

    *&v9[0] = 0;
    *(&v9[0] + 1) = __PAIR64__(v7, v6);
    v9[1] = xmmword_260857DA0;
    HGMetalHandler::SetBlendingInfo(a2, v9);
    v9[0] = *(a3 + 8);
    if (v5 != 2)
    {
      PCWorkingColorVector::operator*=(v9, *(v9 + 3));
    }
  }

  return (*(*a2 + 136))(a2, 0, *v9, *(v9 + 1), *(v9 + 2), *(v9 + 3));
}

uint64_t PSHeliumNode::commonRenderMetalTexture(uint64_t result, int a2, HGMetalTexture ***this, uint64_t a4, HGBitmap **a5)
{
  v31 = *MEMORY[0x277D85DE8];
  if (*a5)
  {
    v7 = result;
    v8 = HGMetalHandler::BindTexture(this, 0, *a5);
    ((*this)[9])(this, 0, 0, v8);
    ((*this)[6])(this, 1, 1);
    ((*this)[10])(this, 0);
    ((*this)[11])(this);
    v9 = *(a4 + 216);
    v10 = *(a4 + 224);
    v11 = *(a4 + 232);
    v12 = *(a4 + 240);
    PCMatrix44Tmpl<double>::operator*(v7 + 680, (a4 + 32), v26);
    *&v13 = PCMatrix44Tmpl<double>::toSimdFloat(v26);
    v27 = v13;
    v28 = v14;
    v29 = v15;
    v30 = v16;
    v17 = ((*this)[22])(this, &v27);
    PSHeliumNode::updateHandlerWithSprite(v17, this, a4);
    OZGetCornersFromBounds3d(v9, (v11 + v9), v10, (v12 + v10), &v20);
    *&v18 = *v22;
    *(&v18 + 1) = __PAIR64__(1.0, *&v22[8]);
    *&v19 = *&v22[12];
    *(&v19 + 1) = __PAIR64__(1.0, v23);
    v26[0] = v18;
    v26[1] = v19;
    *&v18 = v20;
    DWORD2(v18) = v21;
    *&v19 = v24;
    *(&v19 + 1) = __PAIR64__(1.0, v25);
    v26[2] = v18;
    v26[3] = v19;
    v27 = xmmword_260857DD0;
    v28 = unk_260857DE0;
    v29 = xmmword_260857DF0;
    v30 = unk_260857E00;
    return HGMetalHandler::PrimitivesDraw(this, 4u, v26, 4u, &v27);
  }

  return result;
}

void _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE6resizeEmRKS1_(void *a1, unint64_t a2, __int128 *a3)
{
  v3 = (a1[1] - *a1) >> 4;
  if (a2 <= v3)
  {
    if (a2 < v3)
    {
      a1[1] = *a1 + 16 * a2;
    }
  }

  else
  {
    _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE8__appendEmRKS1_(a1, a2 - v3, a3);
  }
}

uint64_t PSHeliumNode::TextureSpriteBatcher::add(PSHeliumNode::TextureSpriteBatcher *this, const PSHeliumNode::Sprite *a2)
{
  v27 = *MEMORY[0x277D85DE8];
  if (*a2 != 3 || (*(*(this + 3) + 417) & 1) != 0 || (*(a2 + 304) & 1) != 0)
  {
    return 0;
  }

  if (*(a2 + 24) != *(this + 40) || (v5 = *(a2 + 26), v6 = *(this + 4), v5 != v6))
  {
    (*(*this + 24))(this);
    v6 = *(this + 4);
    v5 = *(a2 + 26);
  }

  if (v6 != v5)
  {
    if (v6)
    {
      (*(*v6 + 24))(v6);
      v5 = *(a2 + 26);
    }

    *(this + 4) = v5;
    if (v5)
    {
      (*(*v5 + 16))(v5);
    }
  }

  *(this + 40) = *(a2 + 24);
  PCMatrix44Tmpl<double>::operator*(*(this + 3) + 680, a2 + 2, v21);
  *&v7 = PCMatrix44Tmpl<double>::toSimdFloat(v21);
  v15 = v8;
  v16 = v7;
  v13 = v10;
  v14 = v9;
  v20 = *(a2 + 8);
  PCWorkingColorVector::operator*=(&v20, *(&v20 + 3));
  v12 = v20;
  OZGetCornersFromBounds3d(*(a2 + 27), (*(a2 + 29) + *(a2 + 27)), *(a2 + 28), (*(a2 + 30) + *(a2 + 28)), v22);
  *&v11 = *v22;
  *(&v11 + 1) = __PAIR64__(1.0, v22[2]);
  v21[0] = v11;
  v21[1] = xmmword_2603427D0;
  v21[2] = v12;
  v21[3] = v16;
  v21[4] = v15;
  v21[5] = v14;
  *&v11 = *&v22[3];
  *(&v11 + 1) = __PAIR64__(1.0, v22[5]);
  v21[6] = v13;
  v19[0] = v11;
  v19[1] = xmmword_2603431B0;
  v19[2] = v12;
  v19[3] = v16;
  v19[4] = v15;
  v19[5] = v14;
  v19[6] = v13;
  *&v11 = v23;
  *(&v11 + 1) = __PAIR64__(1.0, v24);
  v18[0] = v11;
  v18[1] = xmmword_260344950;
  v18[2] = v12;
  v18[3] = v16;
  v18[4] = v15;
  v18[5] = v14;
  *&v11 = v25;
  DWORD2(v11) = v26;
  v18[6] = v13;
  v17[0] = v11;
  v17[1] = xmmword_260343890;
  v17[2] = v12;
  v17[3] = v16;
  v17[4] = v15;
  v17[5] = v14;
  v17[6] = v13;
  std::vector<PSHeliumNode::TextureSpriteBatcher::Vertex>::push_back[abi:ne200100](this + 48, v21);
  std::vector<PSHeliumNode::TextureSpriteBatcher::Vertex>::push_back[abi:ne200100](this + 48, v19);
  std::vector<PSHeliumNode::TextureSpriteBatcher::Vertex>::push_back[abi:ne200100](this + 48, v18);
  std::vector<PSHeliumNode::TextureSpriteBatcher::Vertex>::push_back[abi:ne200100](this + 48, v21);
  std::vector<PSHeliumNode::TextureSpriteBatcher::Vertex>::push_back[abi:ne200100](this + 48, v18);
  std::vector<PSHeliumNode::TextureSpriteBatcher::Vertex>::push_back[abi:ne200100](this + 48, v17);
  return 1;
}

void std::vector<PSHeliumNode::TextureSpriteBatcher::Vertex>::push_back[abi:ne200100](uint64_t a1, __int128 *a2)
{
  v4 = *(a1 + 8);
  v5 = *(a1 + 16);
  if (v4 >= v5)
  {
    v12 = 0x6DB6DB6DB6DB6DB7 * ((v4 - *a1) >> 4);
    v13 = v12 + 1;
    if ((v12 + 1) > 0x249249249249249)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v14 = 0x6DB6DB6DB6DB6DB7 * ((v5 - *a1) >> 4);
    if (2 * v14 > v13)
    {
      v13 = 2 * v14;
    }

    if (v14 >= 0x124924924924924)
    {
      v15 = 0x249249249249249;
    }

    else
    {
      v15 = v13;
    }

    if (v15)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<PSHeliumNode::TextureSpriteBatcher::Vertex>>(a1, v15);
    }

    v16 = 112 * v12;
    v17 = *a2;
    v18 = a2[2];
    *(v16 + 16) = a2[1];
    *(v16 + 32) = v18;
    *v16 = v17;
    v19 = a2[3];
    v20 = a2[4];
    v21 = a2[6];
    *(v16 + 80) = a2[5];
    *(v16 + 96) = v21;
    *(v16 + 48) = v19;
    *(v16 + 64) = v20;
    v11 = 112 * v12 + 112;
    v22 = *(a1 + 8) - *a1;
    v23 = v16 - v22;
    memcpy((v16 - v22), *a1, v22);
    v24 = *a1;
    *a1 = v23;
    *(a1 + 8) = v11;
    *(a1 + 16) = 0;
    if (v24)
    {
      operator delete(v24);
    }
  }

  else
  {
    v6 = *a2;
    v7 = a2[2];
    v4[1] = a2[1];
    v4[2] = v7;
    *v4 = v6;
    v8 = a2[3];
    v9 = a2[4];
    v10 = a2[6];
    v4[5] = a2[5];
    v4[6] = v10;
    v4[3] = v8;
    v4[4] = v9;
    v11 = (v4 + 7);
  }

  *(a1 + 8) = v11;
}

void *PSHeliumNode::TextureSpriteBatcher::flush(void *this)
{
  v1 = this[6];
  if (v1 != this[7])
  {
    v2 = this;
    if (this[4])
    {
      {
        if (v7)
        {
          HGMetalUtils::stringForMetalHeader(v7);
        }
      }

      if (*(v2[3] + 896) != 6)
      {
        if (byte_27FE4C09F >= 0)
        {
          v3 = &PSHeliumNode::TextureSpriteBatcher::flush(void)::shaderText;
        }

        else
        {
          v3 = PSHeliumNode::TextureSpriteBatcher::flush(void)::shaderText;
        }

        (*(**v2[1] + 376))(*v2[1], v3);
        *(v2[3] + 896) = 6;
      }

      this = v2[2];
      if (this)
      {
        HGHandler::LoadIdentityModelViewMatrix(this);
        HGMetalHandler::EnableBlending(v2[2]);
        if (*(v2 + 40))
        {
          v4 = 1;
        }

        else
        {
          v4 = 5;
        }

        v5 = v2[2];
        __p = 0;
        v9 = 1;
        v10 = v4;
        v11 = xmmword_260857DA0;
        HGMetalHandler::SetBlendingInfo(v5, &__p);
        v6 = HGMetalHandler::BindTexture(v2[2], 0, v2[4]);
        (*(*v2[2] + 72))(v2[2], 0, 0, v6);
        (*(*v2[2] + 48))(v2[2], 1, 1);
        (*(*v2[2] + 80))(v2[2], 0);
        (*(*v2[2] + 88))(v2[2]);
        HGMetalHandler::SetVertices(v2[2], v2[6], 112, -1227133513 * ((v2[7] - v2[6]) >> 4));
        HGMetalHandler::PrimitivesStart(v2[2]);
        HGMetalHandler::Primitives(v2[2], 3);
        HGMetalHandler::PrimitivesEnd(v2[2]);
      }

      v1 = v2[6];
    }

    v2[7] = v1;
  }

  return this;
}

void sub_2602E9230(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

BOOL PSHeliumNode::PointSpriteBatcher::add(PSHeliumNode::PointSpriteBatcher *this, const PSHeliumNode::Sprite *a2)
{
  v2 = *a2;
  if (!*a2)
  {
    PCMatrix44Tmpl<double>::operator*(*(this + 3) + 680, a2 + 2, v27);
    *&v5 = PCMatrix44Tmpl<double>::toSimdFloat(v27);
    v9 = *(a2 + 8);
    v10 = *(a2 + 31);
    *&v12 = vcvt_f32_f64(*(a2 + 16));
    *&v11 = *(a2 + 34);
    *(&v12 + 1) = __PAIR64__(1.0, v11);
    v13 = *(this + 5);
    v14 = *(this + 6);
    if (v13 >= v14)
    {
      v16 = *(this + 4);
      v17 = 0x6DB6DB6DB6DB6DB7 * ((v13 - v16) >> 4);
      v18 = v17 + 1;
      if ((v17 + 1) > 0x249249249249249)
      {
        std::vector<double>::__throw_length_error[abi:ne200100]();
      }

      v19 = 0x6DB6DB6DB6DB6DB7 * ((v14 - v16) >> 4);
      if (2 * v19 > v18)
      {
        v18 = 2 * v19;
      }

      if (v19 >= 0x124924924924924)
      {
        v20 = 0x249249249249249;
      }

      else
      {
        v20 = v18;
      }

      if (v20)
      {
        std::__allocate_at_least[abi:ne200100]<std::allocator<PSHeliumNode::PointSpriteBatcher::Vertex>>(this + 32, v20);
      }

      v21 = 112 * v17;
      *v21 = v12;
      *(v21 + 16) = v9;
      *(v21 + 32) = v5;
      *(v21 + 48) = v6;
      *(v21 + 64) = v7;
      *(v21 + 80) = v8;
      *(v21 + 96) = v10;
      *(v21 + 100) = 0;
      *(v21 + 108) = 0;
      v15 = 112 * v17 + 112;
      v22 = *(this + 4);
      v23 = *(this + 5) - v22;
      v24 = 112 * v17 - v23;
      memcpy((v21 - v23), v22, v23);
      v25 = *(this + 4);
      *(this + 4) = v24;
      *(this + 5) = v15;
      *(this + 6) = 0;
      if (v25)
      {
        operator delete(v25);
      }
    }

    else
    {
      *v13 = v12;
      *(v13 + 16) = v9;
      *(v13 + 32) = v5;
      *(v13 + 48) = v6;
      *(v13 + 64) = v7;
      *(v13 + 80) = v8;
      *(v13 + 96) = v10;
      *(v13 + 100) = 0;
      v15 = v13 + 112;
      *(v13 + 108) = 0;
    }

    *(this + 5) = v15;
  }

  return v2 == 0;
}

void *PSHeliumNode::PointSpriteBatcher::flush(void *this)
{
  if (this[4] != this[5])
  {
    v1 = this;
    {
      if (v3)
      {
        HGMetalUtils::stringForMetalHeader(v3);
      }
    }

    if (*(v1[3] + 896) != 7)
    {
      if (byte_27FE4C0BF >= 0)
      {
        v2 = &PSHeliumNode::PointSpriteBatcher::flush(void)::shaderText;
      }

      else
      {
        v2 = PSHeliumNode::PointSpriteBatcher::flush(void)::shaderText;
      }

      (*(**v1[1] + 376))(*v1[1], v2);
      *(v1[3] + 896) = 7;
    }

    this = v1[2];
    if (this)
    {
      HGHandler::LoadIdentityModelViewMatrix(this);
      HGMetalHandler::DisableBlending(v1[2]);
      HGMetalHandler::SetVertices(v1[2], v1[4], 112, -1227133513 * ((v1[5] - v1[4]) >> 4));
      HGMetalHandler::PrimitivesStart(v1[2]);
      HGMetalHandler::Primitives(v1[2], 0);
      HGMetalHandler::PrimitivesEnd(v1[2]);
    }

    v1[5] = v1[4];
  }

  return this;
}

void sub_2602E95A8(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

void PSHeliumNode::SpriteBatchController::SpriteBatchController(PSHeliumNode::SpriteBatchController *this, HGPage *a2, HGMetalHandler *a3, PSHeliumNode *a4)
{
  *this = 0u;
  *(this + 1) = 0u;
  operator new();
}

void sub_2602E9724(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, void **a10)
{
  v11 = a10;
  a10 = 0;
  if (v11)
  {
    PSHeliumNode::SpriteBatchController::SpriteBatchController(v11);
  }

  std::vector<std::unique_ptr<PSHeliumNode::BatcherBase>>::__destroy_vector::operator()[abi:ne200100](&a10);
  _Unwind_Resume(a1);
}

uint64_t *std::vector<std::unique_ptr<PSHeliumNode::BatcherBase>>::push_back[abi:ne200100](uint64_t *result, uint64_t *a2)
{
  v3 = result;
  v5 = result[1];
  v4 = result[2];
  if (v5 >= v4)
  {
    v8 = *result;
    v9 = v5 - *result;
    v10 = (v9 >> 3) + 1;
    if (v10 >> 61)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v11 = v4 - v8;
    if (v11 >> 2 > v10)
    {
      v10 = v11 >> 2;
    }

    v12 = v11 >= 0x7FFFFFFFFFFFFFF8;
    v13 = 0x1FFFFFFFFFFFFFFFLL;
    if (!v12)
    {
      v13 = v10;
    }

    v18[4] = result;
    if (v13)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<HGRef<HGBitmap>>>(result, v13);
    }

    v14 = (8 * (v9 >> 3));
    v15 = *a2;
    *a2 = 0;
    *v14 = v15;
    v7 = v14 + 1;
    memcpy(0, v8, v9);
    v16 = *v3;
    *v3 = 0;
    v3[1] = v7;
    v17 = v3[2];
    v3[2] = 0;
    v18[2] = v16;
    v18[3] = v17;
    v18[0] = v16;
    v18[1] = v16;
    result = std::__split_buffer<std::unique_ptr<PSHeliumNode::BatcherBase>>::~__split_buffer(v18);
  }

  else
  {
    v6 = *a2;
    *a2 = 0;
    *v5 = v6;
    v7 = v5 + 1;
  }

  v3[1] = v7;
  return result;
}

void PSHeliumNode::TextureSpriteBatcher::~TextureSpriteBatcher(PSHeliumNode::TextureSpriteBatcher *this)
{
  *this = &unk_2872DC918;
  v2 = *(this + 6);
  if (v2)
  {
    *(this + 7) = v2;
    operator delete(v2);
  }

  v3 = *(this + 4);
  if (v3)
  {
    (*(*v3 + 24))(v3);
  }
}

{
  *this = &unk_2872DC918;
  v2 = *(this + 6);
  if (v2)
  {
    *(this + 7) = v2;
    operator delete(v2);
  }

  v3 = *(this + 4);
  if (v3)
  {
    (*(*v3 + 24))(v3);
  }

  JUMPOUT(0x2666E9F00);
}

void PSHeliumNode::PointSpriteBatcher::~PointSpriteBatcher(PSHeliumNode::PointSpriteBatcher *this)
{
  *this = &unk_2872DC970;
  v2 = *(this + 4);
  if (v2)
  {
    *(this + 5) = v2;
    operator delete(v2);
  }
}

{
  *this = &unk_2872DC970;
  v2 = *(this + 4);
  if (v2)
  {
    *(this + 5) = v2;
    operator delete(v2);
  }

  JUMPOUT(0x2666E9F00);
}

void anonymous namespace::HGNodeBuffer::~HGNodeBuffer(_anonymous_namespace_::HGNodeBuffer *this)
{
  HGBuffer::~HGBuffer(this);

  HGObject::operator delete(v1);
}

void anonymous namespace::HGNodeBuffer::ReadTile(_anonymous_namespace_::HGNodeBuffer *this, char *a2, HGRect a3, uint64_t a4)
{
  v5 = *(this + 17);
  v6 = *(v5 + 36);
  v7 = *(v5 + 112);
  HGExecutionUnit::RenderTile(v5, a2, *&a3.var0, *&a3.var2, *(this + 16), a4);
  v8 = *(this + 17);
  *(v8 + 36) = v6;
  *(v8 + 112) = v7;
}

uint64_t std::__tree<PSHeliumNode::Sprite *,PSHeliumNode::lessThanSprite,std::allocator<PSHeliumNode::Sprite *>>::__emplace_hint_unique_key_args<PSHeliumNode::Sprite *,PSHeliumNode::Sprite * const&>(void *a1, void *a2, uint64_t a3)
{
  v3 = *std::__tree<PSHeliumNode::Sprite *,PSHeliumNode::lessThanSprite,std::allocator<PSHeliumNode::Sprite *>>::__find_equal<PSHeliumNode::Sprite *>(a1, a2, &v6, &v5, a3);
  if (!v3)
  {
    operator new();
  }

  return v3;
}

void *std::__tree<PSHeliumNode::Sprite *,PSHeliumNode::lessThanSprite,std::allocator<PSHeliumNode::Sprite *>>::__find_equal<PSHeliumNode::Sprite *>(void *a1, void *a2, void *a3, void *a4, uint64_t a5)
{
  v5 = a1 + 1;
  if (a1 + 1 == a2 || (v6 = *(*a5 + 4), v7 = *(a2[4] + 4), v6 < v7))
  {
    v8 = *a2;
    if (*a1 == a2)
    {
      v10 = a2;
LABEL_17:
      if (v8)
      {
        *a3 = v10;
        return v10 + 1;
      }

      else
      {
        *a3 = a2;
        return a2;
      }
    }

    if (v8)
    {
      v9 = *a2;
      do
      {
        v10 = v9;
        v9 = v9[1];
      }

      while (v9);
    }

    else
    {
      v13 = a2;
      do
      {
        v10 = v13[2];
        v14 = *v10 == v13;
        v13 = v10;
      }

      while (v14);
    }

    v15 = *(*a5 + 4);
    if (*(v10[4] + 4) < v15)
    {
      goto LABEL_17;
    }

    v16 = *v5;
    if (*v5)
    {
      do
      {
        while (1)
        {
          v17 = v16;
          v18 = *(v16[4] + 4);
          if (v15 >= v18)
          {
            break;
          }

          v16 = *v17;
          v5 = v17;
          if (!*v17)
          {
            goto LABEL_29;
          }
        }

        if (v18 >= v15)
        {
          break;
        }

        v5 = v17 + 1;
        v16 = v17[1];
      }

      while (v16);
    }

    else
    {
      v17 = a1 + 1;
    }

LABEL_29:
    *a3 = v17;
    return v5;
  }

  if (v7 >= v6)
  {
    *a3 = a2;
    *a4 = a2;
    return a4;
  }

  v11 = a2[1];
  if (v11)
  {
    v12 = a2[1];
    do
    {
      a4 = v12;
      v12 = *v12;
    }

    while (v12);
  }

  else
  {
    v19 = a2;
    do
    {
      a4 = v19[2];
      v14 = *a4 == v19;
      v19 = a4;
    }

    while (!v14);
  }

  if (a4 != v5 && v6 >= *(a4[4] + 4))
  {
    v20 = *v5;
    if (*v5)
    {
      do
      {
        while (1)
        {
          v21 = v20;
          v22 = *(v20[4] + 4);
          if (v6 >= v22)
          {
            break;
          }

          v20 = *v21;
          v5 = v21;
          if (!*v21)
          {
            goto LABEL_48;
          }
        }

        if (v22 >= v6)
        {
          break;
        }

        v5 = v21 + 1;
        v20 = v21[1];
      }

      while (v20);
    }

    else
    {
      v21 = a1 + 1;
    }

LABEL_48:
    *a3 = v21;
    return v5;
  }

  if (v11)
  {
    *a3 = a4;
  }

  else
  {
    *a3 = a2;
    return a2 + 1;
  }

  return a4;
}

void std::vector<PSHeliumNode::Sprite>::__destroy_vector::operator()[abi:ne200100](void ***a1)
{
  v1 = *a1;
  v2 = **a1;
  if (v2)
  {
    v4 = v1[1];
    v5 = **a1;
    if (v4 != v2)
    {
      do
      {
        v4 -= 312;
        std::allocator<PSHeliumNode::Sprite>::destroy[abi:ne200100](v1, v4);
      }

      while (v4 != v2);
      v5 = **a1;
    }

    v1[1] = v2;

    operator delete(v5);
  }
}

uint64_t std::allocator<PSHeliumNode::Sprite>::destroy[abi:ne200100](uint64_t a1, uint64_t a2)
{
  result = *(a2 + 208);
  if (result)
  {
    return (*(*result + 24))(result);
  }

  return result;
}

void std::__tree<std::shared_ptr<PCImage>>::destroy(uint64_t a1, void *a2)
{
  if (a2)
  {
    std::__tree<std::shared_ptr<PCImage>>::destroy(a1, *a2);
    std::__tree<std::shared_ptr<PCImage>>::destroy(a1, a2[1]);
    v4 = a2[5];
    if (v4)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v4);
    }

    operator delete(a2);
  }
}

void std::vector<std::unique_ptr<PSHeliumNode::BatcherBase>>::__destroy_vector::operator()[abi:ne200100](void ***a1)
{
  v2 = *a1;
  if (*v2)
  {
    std::vector<std::unique_ptr<PSHeliumNode::BatcherBase>>::clear[abi:ne200100](v2);
    v3 = **a1;

    operator delete(v3);
  }
}

void *std::vector<std::unique_ptr<PSHeliumNode::BatcherBase>>::clear[abi:ne200100](void *result)
{
  v1 = result;
  v2 = *result;
  v3 = result[1];
  while (v3 != v2)
  {
    v4 = *--v3;
    result = v4;
    *v3 = 0;
    if (v4)
    {
      result = (*(*result + 8))(result);
    }
  }

  v1[1] = v2;
  return result;
}

void std::__allocate_at_least[abi:ne200100]<std::allocator<PSHeliumNode::Sprite>>(uint64_t a1, unint64_t a2)
{
  if (a2 < 0xD20D20D20D20D3)
  {
    operator new();
  }

  std::__throw_bad_array_new_length[abi:ne200100]();
}

uint64_t std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PSHeliumNode::Sprite>,PSHeliumNode::Sprite*>(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v11 = a4;
  v12 = a4;
  v9[0] = a1;
  v9[1] = &v11;
  v9[2] = &v12;
  v10 = 0;
  if (a2 == a3)
  {
    v10 = 1;
  }

  else
  {
    v5 = a2;
    v7 = a2;
    do
    {
      std::allocator_traits<std::allocator<PSHeliumNode::Sprite>>::construct[abi:ne200100]<PSHeliumNode::Sprite,PSHeliumNode::Sprite const&,0>(a1, a4, v7);
      v7 += 312;
      a4 = v12 + 312;
      v12 += 312;
    }

    while (v7 != a3);
    v10 = 1;
    while (v5 != a3)
    {
      std::allocator<PSHeliumNode::Sprite>::destroy[abi:ne200100](a1, v5);
      v5 += 312;
    }
  }

  return std::__exception_guard_exceptions<std::_AllocatorDestroyRangeReverse<std::allocator<PSHeliumNode::Sprite>,PSHeliumNode::Sprite*>>::~__exception_guard_exceptions[abi:ne200100](v9);
}

__n128 std::allocator_traits<std::allocator<PSHeliumNode::Sprite>>::construct[abi:ne200100]<PSHeliumNode::Sprite,PSHeliumNode::Sprite const&,0>(uint64_t a1, uint64_t a2, uint64_t a3)
{
  *a2 = *a3;
  v5 = *(a3 + 16);
  v6 = *(a3 + 32);
  v7 = *(a3 + 64);
  *(a2 + 48) = *(a3 + 48);
  *(a2 + 64) = v7;
  *(a2 + 16) = v5;
  *(a2 + 32) = v6;
  v8 = *(a3 + 80);
  v9 = *(a3 + 96);
  v10 = *(a3 + 128);
  *(a2 + 112) = *(a3 + 112);
  *(a2 + 128) = v10;
  *(a2 + 80) = v8;
  *(a2 + 96) = v9;
  v11 = *(a3 + 144);
  v12 = *(a3 + 160);
  v13 = *(a3 + 176);
  *(a2 + 188) = *(a3 + 188);
  *(a2 + 160) = v12;
  *(a2 + 176) = v13;
  *(a2 + 144) = v11;
  v14 = *(a3 + 208);
  *(a2 + 208) = v14;
  if (v14)
  {
    (*(*v14 + 16))(v14);
  }

  v15 = *(a3 + 216);
  v16 = *(a3 + 232);
  *(a2 + 248) = *(a3 + 248);
  *(a2 + 232) = v16;
  *(a2 + 216) = v15;
  *(a2 + 256) = *(a3 + 256);
  *(a2 + 272) = *(a3 + 272);
  result = *(a3 + 288);
  *(a2 + 288) = result;
  *(a2 + 304) = *(a3 + 304);
  return result;
}

uint64_t std::__exception_guard_exceptions<std::_AllocatorDestroyRangeReverse<std::allocator<PSHeliumNode::Sprite>,PSHeliumNode::Sprite*>>::~__exception_guard_exceptions[abi:ne200100](uint64_t a1)
{
  if ((*(a1 + 24) & 1) == 0)
  {
    std::_AllocatorDestroyRangeReverse<std::allocator<PSHeliumNode::Sprite>,PSHeliumNode::Sprite*>::operator()[abi:ne200100](a1);
  }

  return a1;
}

uint64_t *std::_AllocatorDestroyRangeReverse<std::allocator<PSHeliumNode::Sprite>,PSHeliumNode::Sprite*>::operator()[abi:ne200100](uint64_t *result)
{
  v2 = result[1];
  v1 = result[2];
  v3 = *v1;
  v4 = *v2;
  if (*v1 != *v2)
  {
    v5 = *result;
    do
    {
      v3 -= 312;
      result = std::allocator<PSHeliumNode::Sprite>::destroy[abi:ne200100](v5, v3);
    }

    while (v3 != v4);
  }

  return result;
}

void **std::__split_buffer<PSHeliumNode::Sprite>::~__split_buffer(void **a1)
{
  std::__split_buffer<PSHeliumNode::Sprite>::clear[abi:ne200100](a1);
  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

uint64_t std::__split_buffer<PSHeliumNode::Sprite>::clear[abi:ne200100](uint64_t result)
{
  v2 = *(result + 8);
  v1 = *(result + 16);
  if (v1 != v2)
  {
    v3 = result;
    do
    {
      v4 = *(v3 + 32);
      *(v3 + 16) = v1 - 312;
      result = std::allocator<PSHeliumNode::Sprite>::destroy[abi:ne200100](v4, v1 - 312);
      v1 = *(v3 + 16);
    }

    while (v1 != v2);
  }

  return result;
}

uint64_t std::vector<PSHeliumNode::Sprite>::__emplace_back_slow_path<PSHeliumNode::Sprite const&>(uint64_t *a1, uint64_t a2)
{
  v2 = 0x6F96F96F96F96F97 * ((a1[1] - *a1) >> 3);
  v3 = v2 + 1;
  if ((v2 + 1) > 0xD20D20D20D20D2)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  if (0xDF2DF2DF2DF2DF2ELL * ((a1[2] - *a1) >> 3) > v3)
  {
    v3 = 0xDF2DF2DF2DF2DF2ELL * ((a1[2] - *a1) >> 3);
  }

  if ((0x6F96F96F96F96F97 * ((a1[2] - *a1) >> 3)) >= 0x69069069069069)
  {
    v6 = 0xD20D20D20D20D2;
  }

  else
  {
    v6 = v3;
  }

  v16 = a1;
  if (v6)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<PSHeliumNode::Sprite>>(a1, v6);
  }

  v13 = 0;
  v14 = 312 * v2;
  std::allocator_traits<std::allocator<PSHeliumNode::Sprite>>::construct[abi:ne200100]<PSHeliumNode::Sprite,PSHeliumNode::Sprite const&,0>(a1, 312 * v2, a2);
  v15 = (312 * v2 + 312);
  v7 = a1[1];
  v8 = 312 * v2 + *a1 - v7;
  std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PSHeliumNode::Sprite>,PSHeliumNode::Sprite*>(a1, *a1, v7, v8);
  v9 = *a1;
  *a1 = v8;
  v10 = a1[2];
  v12 = v15;
  *(a1 + 1) = v15;
  *&v15 = v9;
  *(&v15 + 1) = v10;
  v13 = v9;
  v14 = v9;
  std::__split_buffer<PSHeliumNode::Sprite>::~__split_buffer(&v13);
  return v12;
}

void sub_2602EA344(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__split_buffer<PSHeliumNode::Sprite>::~__split_buffer(va);
  _Unwind_Resume(a1);
}

void *std::__tree<std::shared_ptr<PCImage>>::__emplace_unique_key_args<std::shared_ptr<PCImage>,std::shared_ptr<PCImage>>(uint64_t a1, unint64_t *a2)
{
  v2 = *(a1 + 8);
  if (!v2)
  {
LABEL_8:
    operator new();
  }

  v3 = *a2;
  while (1)
  {
    while (1)
    {
      v4 = v2;
      v5 = v2[4];
      if (v3 >= v5)
      {
        break;
      }

      v2 = *v4;
      if (!*v4)
      {
        goto LABEL_8;
      }
    }

    if (v5 >= v3)
    {
      return v4;
    }

    v2 = v4[1];
    if (!v2)
    {
      goto LABEL_8;
    }
  }
}

void _ZNSt3__16vectorIDv4_fNS_9allocatorIS1_EEE8__appendEmRKS1_(uint64_t a1, unint64_t a2, __int128 *a3)
{
  v5 = *(a1 + 8);
  v6 = *(a1 + 16);
  if (a2 <= (v6 - v5) >> 4)
  {
    if (a2)
    {
      v12 = *a3;
      v13 = 16 * a2;
      v14 = &v5[a2];
      do
      {
        *v5++ = v12;
        v13 -= 16;
      }

      while (v13);
      v5 = v14;
    }

    *(a1 + 8) = v5;
  }

  else
  {
    v7 = v5 - *a1;
    v8 = a2 + (v7 >> 4);
    if (v8 >> 60)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v9 = v7 >> 4;
    v10 = v6 - *a1;
    if (v10 >> 3 > v8)
    {
      v8 = v10 >> 3;
    }

    if (v10 >= 0x7FFFFFFFFFFFFFF0)
    {
      v11 = 0xFFFFFFFFFFFFFFFLL;
    }

    else
    {
      v11 = v8;
    }

    if (v11)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<PCVector2<double>>>(a1, v11);
    }

    v15 = 16 * v9;
    v16 = 16 * v9 + 16 * a2;
    v17 = 16 * a2;
    v18 = *a3;
    v19 = v15;
    do
    {
      *v19++ = v18;
      v17 -= 16;
    }

    while (v17);
    v20 = *(a1 + 8) - *a1;
    v21 = v15 - v20;
    memcpy((v15 - v20), *a1, v20);
    v22 = *a1;
    *a1 = v21;
    *(a1 + 8) = v16;
    *(a1 + 16) = 0;
    if (v22)
    {

      operator delete(v22);
    }
  }
}

void std::__allocate_at_least[abi:ne200100]<std::allocator<PSHeliumNode::TextureSpriteBatcher::Vertex>>(uint64_t a1, unint64_t a2)
{
  if (a2 < 0x24924924924924ALL)
  {
    operator new();
  }

  std::__throw_bad_array_new_length[abi:ne200100]();
}

void std::__allocate_at_least[abi:ne200100]<std::allocator<PSHeliumNode::PointSpriteBatcher::Vertex>>(uint64_t a1, unint64_t a2)
{
  if (a2 < 0x24924924924924ALL)
  {
    operator new();
  }

  std::__throw_bad_array_new_length[abi:ne200100]();
}

uint64_t std::__split_buffer<std::unique_ptr<PSHeliumNode::BatcherBase>>::~__split_buffer(uint64_t a1)
{
  std::__split_buffer<std::unique_ptr<PSHeliumNode::BatcherBase>>::__destruct_at_end[abi:ne200100](a1, *(a1 + 8));
  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

void *std::__split_buffer<std::unique_ptr<PSHeliumNode::BatcherBase>>::__destruct_at_end[abi:ne200100](void *result, void *a2)
{
  v2 = result[2];
  if (v2 != a2)
  {
    v4 = result;
    do
    {
      v5 = *--v2;
      result = v5;
      v4[2] = v2;
      *v2 = 0;
      if (v5)
      {
        result = (*(*result + 8))(result);
        v2 = v4[2];
      }
    }

    while (v2 != a2);
  }

  return result;
}

uint64_t PSTextureCache::Instance(PSTextureCache *this)
{
  if (PSTextureCache::Instance(void)::once != -1)
  {
    PSTextureCache::Instance();
  }

  return PSTextureCache::_instance;
}

void PSTextureCache::addTexture(uint64_t a1, uint64_t *a2, uint64_t a3, const PCHash128 *a4)
{
  PCSharedMutex::lock((a1 + 8));
  v13 = *(*a3 + 96);
  v14 = &v13;
  v8 = std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::__emplace_unique_key_args<unsigned long long,std::piecewise_construct_t const&,std::tuple<unsigned long long &&>,std::tuple<>>(a1 + 112, &v13);
  v14 = a4;
  v9 = std::__tree<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PSTextureCache::CacheEntry>>>::__emplace_unique_key_args<PCHash128,std::piecewise_construct_t const&,std::tuple<PCHash128 const&>,std::tuple<>>((v8 + 5), a4);
  v11 = *a2;
  v10 = a2[1];
  if (v10)
  {
    atomic_fetch_add_explicit((v10 + 8), 1uLL, memory_order_relaxed);
  }

  v12 = *(v9 + 56);
  *(v9 + 48) = v11;
  *(v9 + 56) = v10;
  if (v12)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v12);
  }

  PCSharedMutex::unlock((a1 + 8));
}

{
  PCSharedMutex::lock((a1 + 8));
  v13 = *(*a3 + 96);
  v14 = &v13;
  v8 = std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::__emplace_unique_key_args<unsigned long long,std::piecewise_construct_t const&,std::tuple<unsigned long long &&>,std::tuple<>>(a1 + 112, &v13);
  v14 = a4;
  v9 = std::__tree<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PSTextureCache::CacheEntry>>>::__emplace_unique_key_args<PCHash128,std::piecewise_construct_t const&,std::tuple<PCHash128 const&>,std::tuple<>>((v8 + 5), a4);
  v11 = *a2;
  v10 = a2[1];
  if (v10)
  {
    atomic_fetch_add_explicit((v10 + 8), 1uLL, memory_order_relaxed);
  }

  v12 = *(v9 + 72);
  *(v9 + 64) = v11;
  *(v9 + 72) = v10;
  if (v12)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v12);
  }

  PCSharedMutex::unlock((a1 + 8));
}

void PSTextureCache::getTextureForKey(uint64_t a1@<X0>, uint64_t a2@<X1>, const PCHash128 *a3@<X2>, uint64_t a4@<X8>)
{
  PCSharedMutex::lock_shared((a1 + 8));
  v12[0] = *(*a2 + 96);
  v12[2] = v12;
  v8 = std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::__emplace_unique_key_args<unsigned long long,std::piecewise_construct_t const&,std::tuple<unsigned long long &&>,std::tuple<>>(a1 + 112, v12);
  v9 = std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::find<PCHash128>((v8 + 5), a3);
  if (v8 + 6 == v9)
  {
    *a4 = 0u;
    *(a4 + 16) = 0u;
  }

  else
  {
    v10 = v9[7];
    *a4 = v9[6];
    *(a4 + 8) = v10;
    if (v10)
    {
      atomic_fetch_add_explicit((v10 + 8), 1uLL, memory_order_relaxed);
    }

    v11 = v9[9];
    *(a4 + 16) = v9[8];
    *(a4 + 24) = v11;
    if (v11)
    {
      atomic_fetch_add_explicit((v11 + 8), 1uLL, memory_order_relaxed);
    }
  }

  PCSharedMutex::unlock_shared((a1 + 8));
}

void PSTextureCache::removeTextureNoLock(uint64_t a1, void *a2)
{
  v2 = *(a1 + 112);
  v3 = (a1 + 120);
  if (v2 != (a1 + 120))
  {
    do
    {
      v5 = v2[5];
      if (v5 != (v2 + 6))
      {
        do
        {
          if (v5[6] == *a2 || v5[8] == *a2)
          {
            v7 = std::__tree<std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>,std::__map_value_compare<unsigned int,std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>,std::less<unsigned int>,true>,std::allocator<std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>>>::__remove_node_pointer(v2 + 5, v5);
            std::__destroy_at[abi:ne200100]<std::pair<PCHash128 const,PSTextureCache::CacheEntry>,0>((v5 + 4));
            operator delete(v5);
          }

          else
          {
            v6 = v5[1];
            if (v6)
            {
              do
              {
                v7 = v6;
                v6 = *v6;
              }

              while (v6);
            }

            else
            {
              do
              {
                v7 = v5[2];
                v8 = *v7 == v5;
                v5 = v7;
              }

              while (!v8);
            }
          }

          v5 = v7;
        }

        while (v7 != (v2 + 6));
      }

      v9 = v2[1];
      if (v9)
      {
        do
        {
          v10 = v9;
          v9 = *v9;
        }

        while (v9);
      }

      else
      {
        do
        {
          v10 = v2[2];
          v8 = *v10 == v2;
          v2 = v10;
        }

        while (!v8);
      }

      v2 = v10;
    }

    while (v10 != v3);
  }
}

void PSTextureCache::removeTextures(uint64_t a1, void *a2)
{
  PCSharedMutex::lock((a1 + 8));
  v6 = *a2;
  v4 = a2 + 1;
  v5 = v6;
  if (v6 != v4)
  {
    do
    {
      PSTextureCache::removeTextureNoLock(a1, v5 + 4);
      v7 = v5[1];
      if (v7)
      {
        do
        {
          v8 = v7;
          v7 = *v7;
        }

        while (v7);
      }

      else
      {
        do
        {
          v8 = v5[2];
          v9 = *v8 == v5;
          v5 = v8;
        }

        while (!v9);
      }

      v5 = v8;
    }

    while (v8 != v4);
  }

  PCSharedMutex::unlock((a1 + 8));
}

void PSTextureCache::PSTextureCache(PSTextureCache *this)
{
  PCSingleton::PCSingleton(this, 0);
  *v2 = &unk_2872DCA60;
  PCSharedMutex::PCSharedMutex((v2 + 1));
  *(this + 16) = 0;
  *(this + 15) = 0;
  *(this + 14) = this + 120;
}

void PSTextureCache::~PSTextureCache(PSTextureCache *this)
{
  *this = &unk_2872DCA60;
  std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::destroy(this + 112, *(this + 15));
  PCSharedMutex::~PCSharedMutex((this + 8));

  PCSingleton::~PCSingleton(this);
}

{
  *this = &unk_2872DCA60;
  std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::destroy(this + 112, *(this + 15));
  PCSharedMutex::~PCSharedMutex((this + 8));
  PCSingleton::~PCSingleton(this);

  JUMPOUT(0x2666E9F00);
}

void std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::destroy(uint64_t a1, void *a2)
{
  if (a2)
  {
    std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::destroy(a1, *a2);
    std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::destroy(a1, a2[1]);
    std::__tree<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PSTextureCache::CacheEntry>>>::destroy((a2 + 5), a2[6]);

    operator delete(a2);
  }
}

void std::__tree<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PSTextureCache::CacheEntry>>>::destroy(uint64_t a1, void *a2)
{
  if (a2)
  {
    std::__tree<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PSTextureCache::CacheEntry>>>::destroy(a1, *a2);
    std::__tree<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PSTextureCache::CacheEntry>>>::destroy(a1, a2[1]);
    std::__destroy_at[abi:ne200100]<std::pair<PCHash128 const,PSTextureCache::CacheEntry>,0>((a2 + 4));

    operator delete(a2);
  }
}

void std::__destroy_at[abi:ne200100]<std::pair<PCHash128 const,PSTextureCache::CacheEntry>,0>(uint64_t a1)
{
  v2 = *(a1 + 40);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {

    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }
}

void *std::__tree<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,std::map<PCHash128,PSTextureCache::CacheEntry>>>>::__emplace_unique_key_args<unsigned long long,std::piecewise_construct_t const&,std::tuple<unsigned long long &&>,std::tuple<>>(uint64_t a1, unint64_t *a2)
{
  v2 = *(a1 + 8);
  if (!v2)
  {
LABEL_8:
    operator new();
  }

  v3 = *a2;
  while (1)
  {
    while (1)
    {
      v4 = v2;
      v5 = v2[4];
      if (v3 >= v5)
      {
        break;
      }

      v2 = *v4;
      if (!*v4)
      {
        goto LABEL_8;
      }
    }

    if (v5 >= v3)
    {
      return v4;
    }

    v2 = v4[1];
    if (!v2)
    {
      goto LABEL_8;
    }
  }
}

uint64_t std::__tree<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PSTextureCache::CacheEntry>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PSTextureCache::CacheEntry>>>::__emplace_unique_key_args<PCHash128,std::piecewise_construct_t const&,std::tuple<PCHash128 const&>,std::tuple<>>(uint64_t a1, const PCHash128 *a2)
{
  v2 = *std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::__find_equal<PCHash128>(a1, &v4, a2);
  if (!v2)
  {
    operator new();
  }

  return v2;
}

uint64_t std::unique_ptr<std::__tree_node<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,void *>,std::__tree_node_destructor<std::allocator<std::__tree_node<std::__value_type<PCHash128,PSTextureCache::CacheEntry>,void *>>>>::~unique_ptr[abi:ne200100](uint64_t a1)
{
  v2 = *a1;
  *a1 = 0;
  if (v2)
  {
    if (*(a1 + 16) == 1)
    {
      std::__destroy_at[abi:ne200100]<std::pair<PCHash128 const,PSTextureCache::CacheEntry>,0>(v2 + 32);
    }

    operator delete(v2);
  }

  return a1;
}

double RetimingMath::reverse(RetimingMath *this, double result, double a3, double a4)
{
  if (result >= a3 && result < a4)
  {
    v5 = floor(result);
    return result - (v5 + v5) + -1.0 + a3 + a4;
  }

  return result;
}

uint64_t OZChannelShape_Factory::getInstance(OZChannelShape_Factory *this)
{
  if (atomic_load_explicit(&OZChannelShape_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZChannelShape_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZChannelShape_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZChannelShape_Factory::_instance;
}

void OZChannelShape::OZChannelShape(OZChannelShape *this, const PCString *a2, OZChannelFolder *a3, unsigned int a4, int a5)
{
  Instance = OZChannelShape_Factory::getInstance(this);
  OZChannelCurve::OZChannelCurve(this, Instance, a2, a3, a4, a5);
  *this = &unk_2872DCA98;
  *(this + 2) = &unk_2872DCE48;
  *(this + 808) = 0u;
  *(this + 824) = 0u;
  *(this + 840) = 0u;
  *(this + 107) = 0;
}

void OZChannelShape::OZChannelShape(OZChannelShape *this, OZShape *a2, const PCString *a3, OZChannelFolder *a4, unsigned int a5, int a6)
{
  Instance = OZChannelShape_Factory::getInstance(this);
  OZChannelCurve::OZChannelCurve(this, Instance, a3, a4, a5, a6);
  *this = &unk_2872DCA98;
  *(this + 2) = &unk_2872DCE48;
  *(this + 808) = 0u;
  *(this + 824) = 0u;
  *(this + 840) = 0u;
  *(this + 107) = a2;
}

void OZChannelShape::~OZChannelShape(OZChannel *this)
{
  this->var0 = &unk_2872DCA98;
  this->var2 = &unk_2872DCE48;
  var9 = this[5].var9;
  if (var9)
  {
    this[5].var10 = var9;
    operator delete(var9);
  }

  var6 = this[5].var6;
  if (var6)
  {
    this[5].var7 = var6;
    operator delete(var6);
  }

  OZChannelCurve::~OZChannelCurve(this);
}

{
  OZChannelShape::~OZChannelShape(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZChannelShape::~OZChannelShape(OZChannelShape *this)
{
  OZChannelShape::~OZChannelShape((this - 16));
}

{
  OZChannelShape::~OZChannelShape((this - 16));

  JUMPOUT(0x2666E9F00);
}

__CFString *OZChannelShape::copy(OZChannel *this, const OZChannelBase *a2, char a3)
{
  OZChannelCurve::copy(this, a2, a3);
  result = this[5].var12;
  if (result)
  {
    v5 = *(result->isa + 18);

    return v5();
  }

  return result;
}

__CFString *OZChannelShape::assign(OZChannel *this, const OZChannelBase *a2)
{
  OZChannelCurve::assign(this, a2);
  result = this[5].var12;
  if (result)
  {
    v4 = *(result->isa + 18);

    return v4();
  }

  return result;
}

void *OZChannelShape::reset(OZChannelBase *this, uint64_t a2)
{
  OZChannelBase::reset(this, a2);
  result = this[7].var9;
  if (result)
  {
    v4 = *(*result + 144);

    return v4();
  }

  return result;
}

uint64_t OZChannelShape::refreshAnimation(OZChannelShape *this)
{
  OZChannelCurve::refreshAnimation(this);
  result = *(this + 107);
  if (result)
  {
    v3 = *(*result + 144);

    return v3();
  }

  return result;
}

uint64_t OZChannelShape::didBake(OZChannelShape *this, const PCTimeRange *a2, const CMTime *a3)
{
  v8 = *a2;
  if (OZChannelFolder::hasKeypointAt((this + 152), &v8, 0))
  {
    (*(*this + 728))(this, &v8);
  }

  result = OZChannelFolder::nextKeypoint((this + 152), &v8, 0);
  if (result)
  {
    do
    {
      time1 = *a2;
      time2 = *(a2 + 1);
      PC_CMTimeSaferAdd(&time1, &time2, &v9);
      time1 = v9;
      time2 = *a3;
      PC_CMTimeSaferSubtract(&time1, &time2, &v7);
      time1 = v8;
      time2 = v7;
      result = CMTimeCompare(&time1, &time2);
      if ((result & 0x80000000) == 0)
      {
        break;
      }

      if (OZChannelFolder::hasKeypointAt((this + 152), &v8, 0))
      {
        (*(*this + 728))(this, &v8);
      }

      result = OZChannelFolder::nextKeypoint((this + 152), &v8, 0);
    }

    while ((result & 1) != 0);
  }

  return result;
}

void OZChannelShape_Factory::OZChannelShape_Factory(OZChannelShape_Factory *this)
{
  v3 = xmmword_2608486B0;
  v4 = xmmword_260857FC0;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 1);
  *v2 = &unk_2871ED158;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872DCEB8;
  *(this + 16) = &unk_2872DCF88;
}

void OZShape::OZShape(OZShape *this, OZChannelFolder *a2)
{
  v66 = *MEMORY[0x277D85DE8];
  *this = &unk_2872DCFE0;
  PCMutex::PCMutex((this + 8), 1);
  *(this + 1) = &unk_2871D83A0;
  PCString::PCString(v64, "Shape Root", "com.apple.proshapes.framework");
  OZChannelFolder::OZChannelFolder((this + 80), v64, a2, 0x9Bu, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Animation", "com.apple.proshapes.framework");
  OZChannelShape::OZChannelShape((this + 208), this, v64, (this + 80), 0x75u, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Interpolation Mode Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Interpolation Mode", "com.apple.proshapes.framework");
  Instance = OZShape::OZShape_interpolationModeImpl::getInstance(v4);
  OZChannelEnum::OZChannelEnum((this + 1072), 1u, v64, &v63, (this + 80), 0x64u, 16, Instance, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Closed", "com.apple.proshapes.framework");
  v7 = OZShape::OZShape_closedImpl::getInstance(v6);
  OZChannelBool::OZChannelBool((this + 1328), 0, v64, (this + 80), 0x74u, 0x10000u, v7, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Roundness", "com.apple.proshapes.framework");
  v9 = OZShape::OZShape_roundnessImpl::getInstance(v8);
  v10 = OZShape::OZShape_roundnessInfo::getInstance(v9);
  OZChannelUint32::OZChannelUint32((this + 1480), 0.0, v64, (this + 80), 0x90u, 0, v9, v10);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Preserve Scale", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 1632), 1, v64, (this + 80), 0x98u, 0, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Initial Position", "com.apple.proshapes.framework");
  v12 = OZShape::OZShape_initialPositionImpl::getInstance(v11);
  OZChannelPosition::OZChannelPosition((this + 1784), 0.0, 0.0, v64, (this + 80), 0x81u, 2u, 2u, v12, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Pixel Aspect Ratio", "com.apple.proshapes.framework");
  v14 = OZShape::OZShape_pixelAspectRatioImpl::getInstance(v13);
  OZChannelDouble::OZChannelDouble((this + 2488), 1.0, v64, (this + 80), 0x99u, 2, v14, 0);
  PCString::~PCString(v64);
  *(this + 2648) = 0u;
  *(this + 335) = this + 2680;
  *(this + 336) = this + 2680;
  *(this + 337) = 0;
  *(this + 338) = this + 2704;
  *(this + 339) = this + 2704;
  *(this + 340) = 0;
  *(this + 341) = this + 2728;
  *(this + 342) = this + 2728;
  *(this + 343) = 0;
  *(this + 345) = 0;
  *(this + 173) = 0u;
  PCString::PCString(v64, "Shape Filled Shape", "com.apple.proshapes.framework");
  OZChannelFolder::OZChannelFolder((this + 2784), v64, (this + 80), 0x71u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Fill Mode Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Fill Mode", "com.apple.proshapes.framework");
  OZChannelEnum::OZChannelEnum((this + 2912), 0, v64, &v63, (this + 2784), 0x72u, 0, 0, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Fill Color", "com.apple.proshapes.framework");
  OZChannelColorNoAlpha::OZChannelColorNoAlpha((this + 3168), 1.0, 1.0, 1.0, v64, (this + 2784), 0x6Fu, 0, 5u);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Fill Opacity", "com.apple.proshapes.framework");
  OZChannelPercent::OZChannelPercent((this + 4176), 1.0, v64, (this + 2784), 0x8Du, 0, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Gradient", "com.apple.proshapes.framework");
  OZChannelGradientPositioned::OZChannelGradientPositioned((this + 4328), v64, (this + 2784), 0x68u, 2u);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroked Shape", "com.apple.proshapes.framework");
  OZChannelFolder::OZChannelFolder((this + 6800), v64, (this + 80), 0x6Cu, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Mode Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Stroke Mode", "com.apple.proshapes.framework");
  OZChannelEnum::OZChannelEnum((this + 6928), 0, v64, &v63, (this + 6800), 0x8Bu, 0, 0, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Color", "com.apple.proshapes.framework");
  OZChannelColorNoAlpha::OZChannelColorNoAlpha((this + 7184), 1.0, 1.0, 1.0, v64, (this + 6800), 0x6Bu, 0, 5u);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Opacity", "com.apple.proshapes.framework");
  OZChannelPercent::OZChannelPercent((this + 0x2000), 1.0, v64, (this + 6800), 0x8Eu, 0, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Width", "com.apple.proshapes.framework");
  v16 = OZShape::OZShape_strokeWidthImpl::getInstance(v15);
  v17 = OZShape::OZShape_strokeWidthInfo::getInstance(v16);
  OZChannelUint32::OZChannelUint32((this + 8344), 2.0, v64, (this + 6800), 0x69u, 0, v16, v17);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Transform Stroke", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 8496), 0, v64, (this + 6800), 0x7Bu, 0, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Joint Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Stroke Joint", "com.apple.proshapes.framework");
  v19 = OZShape::OZShape_strokeJointImpl::getInstance(v18);
  OZChannelEnum::OZChannelEnum((this + 8648), 1u, v64, &v63, (this + 6800), 0x70u, 0, v19, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Cap Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Stroke Left Cap", "com.apple.proshapes.framework");
  v21 = OZShape::OZShape_strokeLeftCapImpl::getInstance(v20);
  OZChannelEnum::OZChannelEnum((this + 8904), 1u, v64, &v63, (this + 6800), 0x77u, 0, v21, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Cap Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Stroke Right Cap", "com.apple.proshapes.framework");
  v23 = OZShape::OZShape_strokeRightCapImpl::getInstance(v22);
  OZChannelEnum::OZChannelEnum((this + 9160), 1u, v64, &v63, (this + 6800), 0x86u, 0, v23, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Arrow Length", "com.apple.proshapes.framework");
  v25 = OZShape::OZShape_strokeCapArrowLengthImpl::getInstance(v24);
  v26 = OZShape::OZShape_strokeCapArrowLengthInfo::getInstance(v25);
  OZChannelDouble::OZChannelDouble((this + 9416), 3.0, v64, (this + 6800), 0x84u, 0, v25, v26);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Arrow Width", "com.apple.proshapes.framework");
  v28 = OZShape::OZShape_strokeCapArrowWidthImpl::getInstance(v27);
  v29 = OZShape::OZShape_strokeCapArrowWidthInfo::getInstance(v28);
  OZChannelDouble::OZChannelDouble((this + 9568), 3.0, v64, (this + 6800), 0x85u, 0, v28, v29);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Type Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Type", "com.apple.proshapes.framework");
  OZChannelEnum::OZChannelEnum((this + 9720), v64, &v63, (this + 6800), 0x6Au, 0, 0, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke In", "com.apple.proshapes.framework");
  OZChannelPercent::OZChannelPercent((this + 9976), 0.0, v64, (this + 6800), 0x7Eu, 0, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Out", "com.apple.proshapes.framework");
  OZChannelPercent::OZChannelPercent((this + 10128), 1.0, v64, (this + 6800), 0x7Fu, 0, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Hidden Stroke Completion");
  OZChannelPercentOverRange::OZChannelPercentOverRange((this + 10280), 1.0, v64, (this + 6800), 0x87u, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Natural", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 10440), 0, v64, (this + 6800), 0x80u, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Stroke Offset", "com.apple.proshapes.framework");
  OZChannelDouble::OZChannelDouble((this + 10592), 0.0, v64, (this + 6800), 0x83u, 2, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Pressure Over Stroke", "com.apple.proshapes.framework");
  OZChannelPercentOverRange::OZChannelPercentOverRange((this + 10744), 1.0, v64, (this + 6800), 0x88u, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Tilt Over Stroke", "com.apple.proshapes.framework");
  OZChannel2DOverRange::OZChannel2DOverRange((this + 10904), 0.0, 0.0, v64, (this + 6800), 0x89u, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Pen Speed Over Stroke", "com.apple.proshapes.framework");
  OZChannelPercentOverRange::OZChannelPercentOverRange((this + 11352), 1.0, v64, (this + 6800), 0x8Au, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Soft Edge Radius", "com.apple.proshapes.framework");
  v31 = OZShape::OZShape_softEdgeRadiusImpl::getInstance(v30);
  v32 = OZShape::OZShape_softEdgeRadiusInfo::getInstance(v31);
  OZChannelDouble::OZChannelDouble((this + 11512), 0.0, v64, (this + 80), 0x66u, 0, v31, v32);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Soft Edge Falloff", "com.apple.proshapes.framework");
  v34 = OZShape::OZShape_softEdgeFalloffImpl::getInstance(v33);
  v35 = OZShape::OZShape_softEdgeFalloffInfo::getInstance(v34);
  OZChannelDouble::OZChannelDouble((this + 11664), 0.0, v64, (this + 80), 0x9Eu, 0, v34, v35);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Soft Edge Kernel Parameter", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Soft Edge Kernel", "com.apple.proshapes.framework");
  v37 = OZShape::OZShape_softEdgeKernelImpl::getInstance(v36);
  OZChannelEnum::OZChannelEnum((this + 11816), 3u, v64, &v63, (this + 80), 0xA2u, 2, v37, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Ellipse Curvature", "com.apple.proshapes.framework");
  v39 = OZShape::OZShape_ellipseCurvatureImpl::getInstance(v38);
  OZChannelPercent::OZChannelPercent((this + 12072), 0.35, v64, (this + 80), 0x9Fu, 2u, v39, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Ellipse Radius", "com.apple.proshapes.framework");
  v41 = OZShape::OZShape_shapeRadiusImpl::getInstance(v40);
  v42 = OZShape::OZShape_shapeRadiusInfo::getInstance(v41);
  OZChannel2D::OZChannel2D((this + 12224), 400.0, 250.0, v64, (this + 80), 0xA0u, 2u, 2u, v41, v42);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Convert To Bezier", "com.apple.proshapes.framework");
  OZChannelButton::OZChannelButton((this + 12664), v64, (this + 80), 0xA1u, 0xAu);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Is Mask", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 12856), 0, v64, (this + 80), 0x9Au, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Mask Blend Mode Enum", "com.apple.proshapes.framework");
  PCString::PCString(&v63, "Shape Blending Mode", "com.apple.proshapes.framework");
  OZChannelEnum::OZChannelEnum((this + 13008), 0, v64, &v63, (this + 80), 0x67u, 18, 0, 0);
  PCString::~PCString(&v63);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Invert Mask", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 13264), 0, v64, (this + 80), 0x73u, 0x12u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Initial Scale X", "com.apple.proshapes.framework");
  v44 = OZShape::OZShape_initialScaleXImpl::getInstance(v43);
  OZChannelDouble::OZChannelDouble((this + 13416), 1.0, v64, (this + 80), 0x78u, 2, v44, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Initial Scale Y", "com.apple.proshapes.framework");
  v46 = OZShape::OZShape_initialScaleYImpl::getInstance(v45);
  OZChannelDouble::OZChannelDouble((this + 13568), 1.0, v64, (this + 80), 0x79u, 2, v46, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Use OldBSpline Model", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 13720), 0, v64, (this + 80), 0x82u, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Use Old Antialiasing Method", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 13872), 0, v64, (this + 80), 0x91u, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Mask Color", "com.apple.proshapes.framework");
  OZChannelDiscreteColor::OZChannelDiscreteColor((this + 14024), 0.0, v64, (this + 80), 0x8Fu, 0x12u);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Drawing Completed", "com.apple.proshapes.framework");
  OZChannelBool::OZChannelBool((this + 14280), 0, v64, (this + 80), 0x9Du, 2u, 0, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Identifier String", "com.apple.proshapes.framework");
  OZChannelText::OZChannelText((this + 14432), v64, (this + 80), 0xA3u, 0x1000Au);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Disable Antialiasing iOS", "com.apple.proshapes.framework");
  v48 = OZShape::OZShape_disableAntialiasingiOSImpl::getInstance(v47);
  OZChannelBool::OZChannelBool((this + 14600), 0, v64, (this + 80), 0xA4u, 2u, v48, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Fixed Feather Width", "com.apple.proshapes.framework");
  v50 = OZShape::OZShape_fixedFeatherWidthImpl::getInstance(v49);
  OZChannelBool::OZChannelBool((this + 14752), 0, v64, (this + 80), 0xA5u, 0x10000u, v50, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Box Transform Top Left", "com.apple.proshapes.framework");
  v52 = OZShape::OZShape_boxTopLeftImpl::getInstance(v51);
  OZChannelPosition::OZChannelPosition((this + 14904), 0.0, 0.0, v64, (this + 80), 0x92u, 0x1000Au, 2u, v52, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Box Transform Top Right", "com.apple.proshapes.framework");
  v54 = OZShape::OZShape_boxTopRightImpl::getInstance(v53);
  OZChannelPosition::OZChannelPosition((this + 15608), 0.0, 0.0, v64, (this + 80), 0x93u, 0x1000Au, 2u, v54, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Box Transform Bottom Left", "com.apple.proshapes.framework");
  v56 = OZShape::OZShape_boxBottomLeftImpl::getInstance(v55);
  OZChannelPosition::OZChannelPosition((this + 16312), 0.0, 0.0, v64, (this + 80), 0x94u, 0x1000Au, 2u, v56, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Box Transform Bottom Right", "com.apple.proshapes.framework");
  v58 = OZShape::OZShape_boxBottomRightImpl::getInstance(v57);
  OZChannelPosition::OZChannelPosition((this + 17016), 0.0, 0.0, v64, (this + 80), 0x95u, 0x1000Au, 2u, v58, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Box Transform Rotation", "com.apple.proshapes.framework");
  v60 = OZShape::OZShape_boxRotationImpl::getInstance(v59);
  OZChannelDouble::OZChannelDouble((this + 17720), 0.0, v64, (this + 80), 0x96u, 65546, v60, 0);
  PCString::~PCString(v64);
  PCString::PCString(v64, "Shape Box Transform Pivot", "com.apple.proshapes.framework");
  v62 = OZShape::OZShape_boxPivotImpl::getInstance(v61);
  OZChannelPosition::OZChannelPosition((this + 17872), 0.0, 0.0, v64, (this + 80), 0x97u, 0x1000Au, 2u, v62, 0);
  PCString::~PCString(v64);
  *(this + 2330) = 0;
  *(this + 1164) = 0u;
  *(this + 2640) = 0;
  *(this + 661) = 2;
  OZChannelBase::enable((this + 6800), 0, 0);
  OZChannelFolder::setFoldFlag((this + 6800), 0x20000);
  v65 = 3;
  *&v64[0].var0 = xmmword_260858008;
  OZChannelEnum::setTags((this + 8904), v64, 5);
  OZChannelEnum::setTags((this + 9160), v64, 5);
  OZChannelBase::enable((this + 2784), 1, 0);
  OZChannelFolder::setFoldFlag((this + 2784), 0x20000);
  *(this + 2340) = 0;
  operator new();
}

void sub_2602ED158(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *a10, PCMutex *a11, void *a12, void *a13, PCString a14, PCString a15)
{
  PCString::~PCString(&a14);
  v25 = *(v16 + 18624);
  if (v25)
  {
    *(v16 + 18632) = v25;
    operator delete(v25);
  }

  OZChannelPosition::~OZChannelPosition((v16 + v15));
  OZChannel::~OZChannel((v16 + v20));
  OZChannelPosition::~OZChannelPosition((v16 + v23));
  OZChannelPosition::~OZChannelPosition((v16 + v19));
  OZChannelPosition::~OZChannelPosition((v16 + v18));
  OZChannelPosition::~OZChannelPosition((v16 + v21));
  OZChannelBool::~OZChannelBool((v16 + 14752));
  OZChannelBool::~OZChannelBool((v16 + 14600));
  OZChannelText::~OZChannelText((v16 + 14432));
  OZChannelBool::~OZChannelBool((v16 + 14280));
  OZChannelEnum::~OZChannelEnum((v16 + v17));
  OZChannelBool::~OZChannelBool((v16 + 13872));
  OZChannelBool::~OZChannelBool((v16 + 13720));
  OZChannel::~OZChannel((v16 + 13568));
  OZChannel::~OZChannel((v16 + 13416));
  OZChannelBool::~OZChannelBool((v16 + 13264));
  OZChannelEnum::~OZChannelEnum((v16 + 13008));
  OZChannelBool::~OZChannelBool((v16 + 12856));
  OZChannelButton::~OZChannelButton((v16 + 12664));
  OZChannel2D::~OZChannel2D((v16 + 12224));
  OZChannelPercent::~OZChannelPercent((v16 + 12072));
  OZChannelEnum::~OZChannelEnum((v16 + 11816));
  OZChannel::~OZChannel((v16 + 11664));
  OZChannel::~OZChannel((v16 + 11512));
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v16 + 11352));
  OZChannel2DOverRange::~OZChannel2DOverRange((v16 + 10904));
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v16 + 10744));
  OZChannel::~OZChannel((v16 + 10592));
  OZChannelBool::~OZChannelBool((v16 + 10440));
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v16 + 10280));
  OZChannelPercent::~OZChannelPercent((v16 + 10128));
  OZChannelPercent::~OZChannelPercent((v16 + 9976));
  OZChannelEnum::~OZChannelEnum((v16 + 9720));
  OZChannel::~OZChannel((v16 + 9568));
  OZChannel::~OZChannel((v16 + 9416));
  OZChannelEnum::~OZChannelEnum((v16 + 9160));
  OZChannelEnum::~OZChannelEnum((v16 + 8904));
  OZChannelEnum::~OZChannelEnum((v16 + 8648));
  OZChannelBool::~OZChannelBool((v16 + 8496));
  OZChannel::~OZChannel((v16 + 8344));
  OZChannelPercent::~OZChannelPercent((v16 + 0x2000));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((v16 + 7184));
  OZChannelEnum::~OZChannelEnum((v16 + 6928));
  OZChannelFolder::~OZChannelFolder((v16 + v22));
  OZChannelGradientPositioned::~OZChannelGradientPositioned((v16 + 4328));
  OZChannelPercent::~OZChannelPercent((v16 + 4176));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((v16 + 3168));
  OZChannelEnum::~OZChannelEnum((v16 + 2912));
  OZChannelFolder::~OZChannelFolder((v16 + 2784));
  v26 = *(v16 + 2760);
  if (v26)
  {
    *(v16 + 2768) = v26;
    operator delete(v26);
  }

  std::__list_imp<unsigned int>::clear(a12);
  std::__list_imp<unsigned int>::clear(a13);
  std::__list_imp<unsigned int>::clear(a10);
  OZChannel::~OZChannel((v16 + 2488));
  OZChannelPosition::~OZChannelPosition((v16 + 1784));
  OZChannelBool::~OZChannelBool((v16 + 1632));
  OZChannel::~OZChannel((v16 + 1480));
  OZChannelBool::~OZChannelBool((v16 + 1328));
  OZChannelEnum::~OZChannelEnum((v16 + 1072));
  OZChannelShape::~OZChannelShape((v16 + 208));
  OZChannelFolder::~OZChannelFolder((v16 + 80));
  PCMutex::~PCMutex(a11);
  _Unwind_Resume(a1);
}

void OZShape::OZShape(OZShape *this, const OZShape *a2, OZChannelFolder *a3)
{
  *this = &unk_2872DCFE0;
  PCMutex::PCMutex((this + 8), 1);
  *(this + 1) = &unk_2871D83A0;
  OZChannelFolder::OZChannelFolder((this + 80), (a2 + 80), a3);
  OZChannelShape::OZChannelShape((this + 208), (a2 + 208), (this + 80), this);
}

void sub_2602EE4A4(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, OZChannel *a10, OZChannel *a11, OZChannel *a12, OZChannel *a13, OZChannel *a14, OZChannel *a15, void *a16, void *a17, void *a18, OZChannel *a19, OZChannel *a20, PCMutex *a21, PCString a22)
{
  PCString::~PCString(&a22);
  PCLockSentry<PCMutex>::~PCLockSentry(v30 - 96);
  v32 = *(v22 + 18624);
  if (v32)
  {
    *(v22 + 18632) = v32;
    operator delete(v32);
  }

  OZChannelPosition::~OZChannelPosition((v22 + v24));
  OZChannel::~OZChannel(v29);
  OZChannelPosition::~OZChannelPosition((v22 + v25));
  OZChannelPosition::~OZChannelPosition((v22 + 16312));
  OZChannelPosition::~OZChannelPosition((v22 + 15608));
  OZChannelPosition::~OZChannelPosition((v22 + 14904));
  OZChannelBool::~OZChannelBool((v22 + 14752));
  OZChannelBool::~OZChannelBool((v22 + 14600));
  OZChannelText::~OZChannelText((v22 + 14432));
  OZChannelBool::~OZChannelBool((v22 + 14280));
  OZChannelEnum::~OZChannelEnum(v28);
  OZChannelBool::~OZChannelBool((v22 + 13872));
  OZChannelBool::~OZChannelBool((v22 + 13720));
  OZChannel::~OZChannel(v27);
  OZChannel::~OZChannel(v26);
  OZChannelBool::~OZChannelBool((v22 + 13264));
  OZChannelEnum::~OZChannelEnum((v22 + 13008));
  OZChannelBool::~OZChannelBool((v22 + 12856));
  OZChannelButton::~OZChannelButton((v22 + 12664));
  OZChannel2D::~OZChannel2D((v22 + 12224));
  OZChannelPercent::~OZChannelPercent((v22 + 12072));
  OZChannelEnum::~OZChannelEnum((v22 + 11816));
  OZChannel::~OZChannel(a10);
  OZChannel::~OZChannel(a11);
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v22 + 11352));
  OZChannel2DOverRange::~OZChannel2DOverRange((v22 + 10904));
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v22 + 10744));
  OZChannel::~OZChannel(a12);
  OZChannelBool::~OZChannelBool((v22 + 10440));
  OZChannelPercentOverRange::~OZChannelPercentOverRange((v22 + 10280));
  OZChannelPercent::~OZChannelPercent((v22 + 10128));
  OZChannelPercent::~OZChannelPercent((v22 + 9976));
  OZChannelEnum::~OZChannelEnum((v22 + 9720));
  OZChannel::~OZChannel(a13);
  OZChannel::~OZChannel(a14);
  OZChannelEnum::~OZChannelEnum((v22 + 9160));
  OZChannelEnum::~OZChannelEnum((v22 + 8904));
  OZChannelEnum::~OZChannelEnum((v22 + 8648));
  OZChannelBool::~OZChannelBool((v22 + 8496));
  OZChannel::~OZChannel(a15);
  OZChannelPercent::~OZChannelPercent((v22 + 0x2000));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((v22 + 7184));
  OZChannelEnum::~OZChannelEnum((v22 + 6928));
  OZChannelFolder::~OZChannelFolder((v22 + v23));
  OZChannelGradientPositioned::~OZChannelGradientPositioned((v22 + 4328));
  OZChannelPercent::~OZChannelPercent((v22 + 4176));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((v22 + 3168));
  OZChannelEnum::~OZChannelEnum((v22 + 2912));
  OZChannelFolder::~OZChannelFolder((v22 + 2784));
  v33 = *(v22 + 2760);
  if (v33)
  {
    *(v22 + 2768) = v33;
    operator delete(v33);
  }

  std::__list_imp<unsigned int>::clear(a16);
  std::__list_imp<unsigned int>::clear(a17);
  std::__list_imp<unsigned int>::clear(a18);
  OZChannel::~OZChannel(a19);
  OZChannelPosition::~OZChannelPosition((v22 + 1784));
  OZChannelBool::~OZChannelBool((v22 + 1632));
  OZChannel::~OZChannel(a20);
  OZChannelBool::~OZChannelBool((v22 + 1328));
  OZChannelEnum::~OZChannelEnum((v22 + 1072));
  OZChannelShape::~OZChannelShape((v22 + 208));
  OZChannelFolder::~OZChannelFolder((v22 + 80));
  PCMutex::~PCMutex(a21);
  _Unwind_Resume(a1);
}

void OZShape::~OZShape(OZShape *this)
{
  *this = &unk_2872DCFE0;
  v2 = (this + 8);
  PCMutex::lock((this + 8));
  v3 = *(this + 333);
  if (v3)
  {
    (*(*v3 + 8))(v3);
    *(this + 333) = 0;
  }

  v4 = *(this + 334);
  if (v4)
  {
    (*(*v4 + 8))(v4);
    *(this + 334) = 0;
  }

  v5 = *(this + 344);
  if (v5)
  {
    (*(*v5 + 8))(v5);
    *(this + 344) = 0;
  }

  *(this + 346) = *(this + 345);
  v6 = *(this + 2340);
  if (v6)
  {
    OZGradientGroupShader::~OZGradientGroupShader(v6);
    MEMORY[0x2666E9F00]();
    *(this + 2340) = 0;
  }

  v7 = this + 2728;
  for (i = *(this + 343); i; i = *(this + 343))
  {
    v9 = *v7;
    v10 = *(*v7 + 16);
    if (v10)
    {
      OZShapeReparametrizedContour::~OZShapeReparametrizedContour(v10);
      MEMORY[0x2666E9F00]();
      v9 = *(this + 341);
      i = *(this + 343);
    }

    *(v9 + 16) = 0;
    v11 = *(this + 341);
    v13 = *v11;
    v12 = v11[1];
    *(v13 + 8) = v12;
    *v12 = v13;
    *(this + 343) = i - 1;
    operator delete(v11);
  }

  v14 = this + 2704;
  while (1)
  {
    v15 = *(this + 340);
    if (!v15)
    {
      break;
    }

    v16 = *v14;
    v17 = *(*v14 + 16);
    if (v17)
    {
      OZShapeContour::~OZShapeContour(v17);
      MEMORY[0x2666E9F00]();
      v16 = *(this + 338);
      v15 = *(this + 340);
    }

    *(v16 + 16) = 0;
    v18 = *(this + 338);
    v20 = *v18;
    v19 = v18[1];
    *(v20 + 8) = v19;
    *v19 = v20;
    *(this + 340) = v15 - 1;
    operator delete(v18);
  }

  v21 = this + 2680;
  while (1)
  {
    v22 = *(this + 337);
    if (!v22)
    {
      break;
    }

    v23 = *v21;
    v24 = *(*v21 + 16);
    if (v24)
    {
      OZShapeContour::~OZShapeContour(v24);
      MEMORY[0x2666E9F00]();
      v23 = *(this + 335);
      v22 = *(this + 337);
    }

    *(v23 + 16) = 0;
    v25 = *(this + 335);
    v27 = *v25;
    v26 = v25[1];
    *(v27 + 8) = v26;
    *v26 = v27;
    *(this + 337) = v22 - 1;
    operator delete(v25);
  }

  PCMutex::unlock(v2);
  v28 = *(this + 2328);
  if (v28)
  {
    *(this + 2329) = v28;
    operator delete(v28);
  }

  OZChannelPosition::~OZChannelPosition((this + 17872));
  OZChannel::~OZChannel((this + 17720));
  OZChannelPosition::~OZChannelPosition((this + 17016));
  OZChannelPosition::~OZChannelPosition((this + 16312));
  OZChannelPosition::~OZChannelPosition((this + 15608));
  OZChannelPosition::~OZChannelPosition((this + 14904));
  OZChannelBool::~OZChannelBool((this + 14752));
  OZChannelBool::~OZChannelBool((this + 14600));
  OZChannelText::~OZChannelText((this + 14432));
  OZChannelBool::~OZChannelBool((this + 14280));
  OZChannelEnum::~OZChannelEnum(this + 1753);
  OZChannelBool::~OZChannelBool((this + 13872));
  OZChannelBool::~OZChannelBool((this + 13720));
  OZChannel::~OZChannel((this + 13568));
  OZChannel::~OZChannel((this + 13416));
  OZChannelBool::~OZChannelBool((this + 13264));
  OZChannelEnum::~OZChannelEnum((this + 13008));
  OZChannelBool::~OZChannelBool((this + 12856));
  OZChannelButton::~OZChannelButton((this + 12664));
  OZChannel2D::~OZChannel2D((this + 12224));
  OZChannelPercent::~OZChannelPercent((this + 12072));
  OZChannelEnum::~OZChannelEnum((this + 11816));
  OZChannel::~OZChannel((this + 11664));
  OZChannel::~OZChannel((this + 11512));
  *(this + 1419) = &unk_287252908;
  *(this + 1421) = &unk_287252CB8;
  PCString::~PCString(this + 1438);
  OZChanObjectRef::~OZChanObjectRef((this + 11352));
  *(this + 1363) = &unk_287252D10;
  *(this + 1365) = &unk_287253088;
  PCString::~PCString(this + 1418);
  OZChannel2D::~OZChannel2D((this + 10904));
  *(this + 1343) = &unk_287252908;
  *(this + 1345) = &unk_287252CB8;
  PCString::~PCString(this + 1362);
  OZChanObjectRef::~OZChanObjectRef((this + 10744));
  OZChannel::~OZChannel((this + 10592));
  OZChannelBool::~OZChannelBool((this + 10440));
  *(this + 1285) = &unk_287252908;
  *(this + 1287) = &unk_287252CB8;
  PCString::~PCString(this + 1304);
  OZChanObjectRef::~OZChanObjectRef((this + 10280));
  OZChannelPercent::~OZChannelPercent((this + 10128));
  OZChannelPercent::~OZChannelPercent((this + 9976));
  OZChannelEnum::~OZChannelEnum((this + 9720));
  OZChannel::~OZChannel((this + 9568));
  OZChannel::~OZChannel((this + 9416));
  OZChannelEnum::~OZChannelEnum((this + 9160));
  OZChannelEnum::~OZChannelEnum((this + 8904));
  OZChannelEnum::~OZChannelEnum((this + 8648));
  OZChannelBool::~OZChannelBool((this + 8496));
  OZChannel::~OZChannel((this + 8344));
  OZChannelPercent::~OZChannelPercent((this + 0x2000));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((this + 7184));
  OZChannelEnum::~OZChannelEnum((this + 6928));
  OZChannelFolder::~OZChannelFolder((this + 6800));
  OZChannelGradientPositioned::~OZChannelGradientPositioned((this + 4328));
  OZChannelPercent::~OZChannelPercent((this + 4176));
  OZChannelColorNoAlpha::~OZChannelColorNoAlpha((this + 3168));
  OZChannelEnum::~OZChannelEnum((this + 2912));
  OZChannelFolder::~OZChannelFolder((this + 2784));
  v29 = *(this + 345);
  if (v29)
  {
    *(this + 346) = v29;
    operator delete(v29);
  }

  std::__list_imp<unsigned int>::clear(this + 341);
  std::__list_imp<unsigned int>::clear(this + 338);
  std::__list_imp<unsigned int>::clear(this + 335);
  OZChannel::~OZChannel((this + 2488));
  OZChannelPosition::~OZChannelPosition((this + 1784));
  OZChannelBool::~OZChannelBool((this + 1632));
  OZChannel::~OZChannel((this + 1480));
  OZChannelBool::~OZChannelBool((this + 1328));
  OZChannelEnum::~OZChannelEnum((this + 1072));
  OZChannelShape::~OZChannelShape((this + 208));
  OZChannelFolder::~OZChannelFolder((this + 80));
  PCMutex::~PCMutex(v2);
}

{
  OZShape::~OZShape(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t OZShape::operator=(uint64_t *a1, uint64_t a2)
{
  v4 = a1[2340];
  if (v4)
  {
    OZGradientGroupShader::~OZGradientGroupShader(v4);
    MEMORY[0x2666E9F00]();
    a1[2340] = 0;
  }

  for (i = a1[343]; i; i = a1[343])
  {
    v6 = a1[341];
    v7 = *(v6 + 16);
    if (v7)
    {
      OZShapeReparametrizedContour::~OZShapeReparametrizedContour(v7);
      MEMORY[0x2666E9F00]();
      v6 = a1[341];
      i = a1[343];
    }

    *(v6 + 16) = 0;
    v8 = a1[341];
    v10 = *v8;
    v9 = v8[1];
    *(v10 + 8) = v9;
    *v9 = v10;
    a1[343] = i - 1;
    operator delete(v8);
  }

  while (1)
  {
    v11 = a1[337];
    if (!v11)
    {
      break;
    }

    v12 = a1[335];
    v13 = *(v12 + 16);
    if (v13)
    {
      OZShapeContour::~OZShapeContour(v13);
      MEMORY[0x2666E9F00]();
      v12 = a1[335];
      v11 = a1[337];
    }

    *(v12 + 16) = 0;
    v14 = a1[335];
    v16 = *v14;
    v15 = v14[1];
    *(v16 + 8) = v15;
    *v15 = v16;
    a1[337] = v11 - 1;
    operator delete(v14);
  }

  while (1)
  {
    v17 = a1[340];
    if (!v17)
    {
      break;
    }

    v18 = a1[338];
    v19 = *(v18 + 16);
    if (v19)
    {
      OZShapeContour::~OZShapeContour(v19);
      MEMORY[0x2666E9F00]();
      v18 = a1[338];
      v17 = a1[340];
    }

    *(v18 + 16) = 0;
    v20 = a1[338];
    v22 = *v20;
    v21 = v20[1];
    *(v22 + 8) = v21;
    *v21 = v22;
    a1[340] = v17 - 1;
    operator delete(v20);
  }

  v23 = a1[344];
  if (v23)
  {
    (*(*v23 + 8))(v23);
    a1[344] = 0;
  }

  a1[346] = a1[345];
  OZChannelBase::operator=((a1 + 1785), a2 + 14280);
  OZChannelBase::operator=((a1 + 1804), a2 + 14432);
  PCString::set(a1 + 1823, (a2 + 14584));
  *(a1 + 14592) = *(a2 + 14592);
  OZChannelBase::operator=((a1 + 1439), a2 + 11512);
  OZChannelBase::operator=((a1 + 1458), a2 + 11664);
  OZChannelBase::operator=((a1 + 1477), a2 + 11816);
  OZChannelBase::operator=((a1 + 1509), a2 + 12072);
  OZChannelFolder::operator=((a1 + 1528));
  OZChannelBase::operator=((a1 + 1545), a2 + 12360);
  OZChannelBase::operator=((a1 + 1564), a2 + 12512);
  OZChannelBase::operator=((a1 + 1626), a2 + 13008);
  OZChannelBase::operator=((a1 + 1658), a2 + 13264);
  OZChannelBase::operator=((a1 + 1215), a2 + 9720);
  OZChannelBase::operator=((a1 + 1062), a2 + 8496);
  OZChannelFolder::operator=((a1 + 850));
  OZChannelBase::operator=((a1 + 1043), a2 + 8344);
  OZChannelBase::operator=((a1 + 1081), a2 + 8648);
  OZChannelBase::operator=((a1 + 1113), a2 + 8904);
  OZChannelBase::operator=((a1 + 1145), a2 + 9160);
  OZChannelBase::operator=((a1 + 1177), a2 + 9416);
  OZChannelBase::operator=((a1 + 1196), a2 + 9568);
  OZChannelBase::operator=((a1 + 1247), a2 + 9976);
  OZChannelBase::operator=((a1 + 1266), a2 + 10128);
  OZChannelBase::operator=((a1 + 1285), a2 + 10280);
  PCString::set(a1 + 1304, (a2 + 10432));
  OZChannelBase::operator=((a1 + 1305), a2 + 10440);
  OZChannelBase::operator=((a1 + 1324), a2 + 10592);
  OZChannelFolder::operator=((a1 + 898));
  OZChannelBase::operator=((a1 + 915), a2 + 7320);
  OZChannelBase::operator=((a1 + 934), a2 + 7472);
  OZChannelBase::operator=((a1 + 953), a2 + 7624);
  OZChannelBase::operator=((a1 + 972), a2 + 7776);
  OZChannelBase::operator=((a1 + 991), a2 + 7928);
  *(a1 + 8184) = *(a2 + 8184);
  OZChannelBase::operator=((a1 + 1024), a2 + 0x2000);
  OZChannelFolder::operator=((a1 + 348));
  OZChannelBase::operator=((a1 + 364), a2 + 2912);
  OZChannelFolder::operator=((a1 + 396));
  OZChannelBase::operator=((a1 + 413), a2 + 3304);
  OZChannelBase::operator=((a1 + 432), a2 + 3456);
  OZChannelBase::operator=((a1 + 451), a2 + 3608);
  OZChannelBase::operator=((a1 + 470), a2 + 3760);
  OZChannelBase::operator=((a1 + 489), a2 + 3912);
  *(a1 + 4168) = *(a2 + 4168);
  OZChannelBase::operator=((a1 + 522), a2 + 4176);
  OZChannelBase::operator=((a1 + 134), a2 + 1072);
  OZChannelFolder::operator=((a1 + 541));
  OZChannelFolder::operator=((a1 + 557));
  OZChannelFolder::operator=((a1 + 573));
  OZChannelBase::operator=((a1 + 589), a2 + 4712);
  OZChannelBase::operator=((a1 + 608), a2 + 4864);
  v24 = *(a2 + 5124);
  *(a1 + 1280) = *(a2 + 5120);
  *(a1 + 5124) = v24;
  *(a1 + 2640) = *(a2 + 2640);
  *(a1 + 661) = *(a2 + 2644);
  OZChannelBase::operator=((a1 + 166), a2 + 1328);
  OZChannelPosition::operator=((a1 + 223), a2 + 1784);
  OZChannelBase::operator=((a1 + 26), a2 + 208);
  OZChannelBase::operator=((a1 + 1677), a2 + 13416);
  OZChannelBase::operator=((a1 + 1696), a2 + 13568);
  OZChannelBase::operator=((a1 + 185), a2 + 1480);
  OZChannelBase::operator=((a1 + 204), a2 + 1632);
  OZChannelBase::operator=((a1 + 1583), a2 + 12664);
  a1[1602] = *(a2 + 12816);
  PCString::set(a1 + 1603, (a2 + 12824));
  a1[1604] = *(a2 + 12832);
  PCString::set(a1 + 1605, (a2 + 12840));
  *(a1 + 12848) = *(a2 + 12848);
  OZChannelBase::operator=((a1 + 1844), a2 + 14752);
  OZChannelPosition::operator=((a1 + 1863), a2 + 14904);
  OZChannelPosition::operator=((a1 + 1951), a2 + 15608);
  OZChannelPosition::operator=((a1 + 2039), a2 + 16312);
  OZChannelPosition::operator=((a1 + 2127), a2 + 17016);
  OZChannelBase::operator=((a1 + 2215), a2 + 17720);
  OZChannelPosition::operator=((a1 + 2234), a2 + 17872);
  v25 = *(a2 + 18592);
  *(a1 + 1161) = *(a2 + 18576);
  a1[2324] = v25;
  OZChannelBase::operator=((a1 + 1607), a2 + 12856);
  PCMutex::lock((a1 + 1));
  OZShapeRenderParams::operator=(a1[333], *(a2 + 2664));
  OZShapeRenderParams::operator=(a1[334], *(a2 + 2672));
  PCMutex::unlock((a1 + 1));
  OZChannelBase::operator=((a1 + 1753), a2 + 14024);
  OZChannelBase::operator=((a1 + 1715), a2 + 13720);
  OZChannelBase::operator=((a1 + 1734), a2 + 13872);
  OZChannelBase::operator=((a1 + 1825), a2 + 14600);
  *(a1 + 331) = *(a2 + 2648);
  ValueAsInt = OZChannel::getValueAsInt((a1 + 1607), MEMORY[0x277CC08F0], 0.0);
  v27.var0 = *a1;
  if (ValueAsInt)
  {
    p_length = &v27.var0[10].length;
  }

  else
  {
    p_length = &v27.var0[11];
  }

  result = (*p_length)(a1);
  a1[2340] = 0;
  return result;
}

uint64_t OZShape::setIsMask(OZShape *this)
{
  OZChannelBase::setFlag((this + 2784), 2, 0);
  OZChannelBase::setFlag((this + 6800), 2, 0);
  OZChannelBase::resetFlag((this + 13008), 2, 0);
  OZChannelBase::resetFlag((this + 13264), 2, 0);
  OZChannelBase::resetFlag((this + 14024), 2, 0);
  OZChannelBase::enable((this + 2784), 1, 0);
  OZChannelBase::enable((this + 6800), 0, 0);
  OZChannelBase::enable((this + 11512), 1, 0);
  OZChannelBase::enable((this + 11664), 1, 0);
  OZChannel::setValue((this + 12856), MEMORY[0x277CC08F0], 1.0, 0);
  v2 = *(*this + 144);

  return v2(this, 1, 1);
}

uint64_t OZShape::clearIsMask(OZShape *this)
{
  OZChannelBase::resetFlag((this + 2784), 2, 0);
  OZChannelBase::resetFlag((this + 6800), 2, 0);
  OZChannelBase::setFlag((this + 13008), 2, 0);
  OZChannelBase::setFlag((this + 13264), 2, 0);
  OZChannelBase::setFlag((this + 14024), 2, 0);
  OZChannel::setValue((this + 12856), MEMORY[0x277CC08F0], 0.0, 0);
  v2 = *(*this + 144);

  return v2(this, 1, 1);
}

void OZShape::validateChannels(OZShape *this, const OZShapeRenderState *a2, OZShapeRenderParams *a3)
{
  v3 = MEMORY[0x28223BE20](this);
  v6 = v5;
  v8 = v7;
  v9 = v4;
  v10 = v3;
  v82[520] = *MEMORY[0x277D85DE8];
  v79 = 0.0;
  v80 = 0.0;
  if ((*(v4 + 24) & 1) == 0)
  {
    (*(*v3 + 368))(v3, &v80, &v79, v4);
    if (vabdd_f64(v80, *(v8 + 248)) >= 0.0000001 || vabdd_f64(v79, *(v8 + 256)) >= 0.0000001)
    {
      if (v6)
      {
        v11 = v79;
        *(v8 + 248) = v80;
        *(v8 + 256) = v11;
      }

      *(v8 + 1193) = 257;
      *(v8 + 1195) = 1;
    }

    (*(*v10 + 376))(v10, &v80, &v79, v9);
    if (vabdd_f64(v80, *(v8 + 264)) >= 0.0000001 || vabdd_f64(v79, *(v8 + 272)) >= 0.0000001)
    {
      if (v6)
      {
        v12 = v79;
        *(v8 + 264) = v80;
        *(v8 + 272) = v12;
      }

      *(v8 + 1193) = 257;
      *(v8 + 1195) = 1;
    }
  }

  PCHashWriteStream::PCHashWriteStream(v82);
  OZChannelCurve::calcHashForAnimationOnly((v10 + 208), v82, v9);
  Hash = PCHashWriteStream::getHash(v82);
  v14 = *Hash;
  if (vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(v8 + 280), *Hash)))))
  {
    *(v8 + 1192) = 1;
    *(v8 + 280) = v14;
  }

  OZChannelBase::getTimeOffset((v10 + 80), &v77);
  *&time1.var0.var0 = v77;
  time1.var0.var1[1] = v78;
  time2 = *(v8 + 1168);
  if (CMTimeCompare(&time1, &time2) && (OZChannel::hasMoreThanOneKeypoint((v10 + 208)) || ((*(*v10 + 152))(v10) & 1) != 0))
  {
    *(v8 + 1192) = 1;
  }

  ValueAsInt = OZChannel::getValueAsInt((v10 + 10440), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt != *(v8 + 112))
  {
    *(v8 + 112) = ValueAsInt != 0;
    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
  }

  OZChannel::getValueAsDouble((v10 + 11664), v9, 0.0);
  _ZF = vabdd_f64(v16, *(v8 + 232)) < 0.0000001 || v6 == 0;
  if (!_ZF)
  {
    *(v8 + 232) = v16;
  }

  OZChannel::getValueAsDouble((v10 + 12072), v9, 0.0);
  if (vabdd_f64(v18, *(v8 + 192)) >= 0.0000001)
  {
    if (v6)
    {
      *(v8 + 192) = v18;
    }

    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
  }

  OZChannel::getValueAsDouble((v10 + 12360), v9, 0.0);
  v20 = v19;
  OZChannel::getValueAsDouble((v10 + 12512), v9, 0.0);
  if (vabdd_f64(v20, *(v8 + 200)) >= 0.0000001 || vabdd_f64(v21, *(v8 + 208)) >= 0.0000001)
  {
    if (v6)
    {
      *(v8 + 200) = v20;
      *(v8 + 208) = v21;
    }

    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
  }

  v22 = OZChannel::getValueAsInt((v10 + 14752), MEMORY[0x277CC08F0], 0.0) != 0;
  if (*(v8 + 242) != v22)
  {
    if (v6)
    {
      *(v8 + 242) = v22;
    }

    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
  }

  v23 = OZChannel::getValueAsInt((v10 + 1072), v9, 0.0);
  if (*(v8 + 172) != v23)
  {
    if (v23 <= 1)
    {
      if (v23 > 1)
      {
        goto LABEL_48;
      }
    }

    else if (v23 != 2 && v23 != 4)
    {
      if (v23 != 5 || !v6)
      {
        goto LABEL_48;
      }

      goto LABEL_47;
    }

    if (v6)
    {
LABEL_47:
      *(v8 + 172) = v23;
    }

LABEL_48:
    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
  }

  v24 = *(v9 + 4);
  OZChannel::getValueAsDouble((v10 + 11512), v9, 0.0);
  v26 = v25;
  isEnabled = OZChannelBase::isEnabled((v10 + 2784), 0, 1);
  if (vabdd_f64(*(v8 + 224), v24 * v26) >= 0.0000001 || *(v8 + 120) != isEnabled || *(v8 + 1192) == 1)
  {
    if (v6)
    {
      *(v8 + 120) = isEnabled;
      *(v8 + 224) = v24 * v26;
    }

    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
  }

  v28 = OZChannel::getValueAsInt((v10 + 6928), v9, 0.0);
  v29 = OZChannelBase::isEnabled((v10 + 6800), 0, 1);
  if (v28)
  {
    v30 = 0;
  }

  else
  {
    v30 = v29;
  }

  if ((v28 - 1) < 2)
  {
    v31 = v29;
  }

  else
  {
    v31 = 0;
  }

  v32 = *(v8 + 12);
  if (v32 == v31 && *(v8 + 36) == v28)
  {
    v33 = v30;
    _ZF = *(v8 + 8) == v30;
    v30 = *(v8 + 8);
    if (!_ZF)
    {
LABEL_83:
      v30 = v33;
      if (!v6)
      {
        goto LABEL_85;
      }

      goto LABEL_84;
    }
  }

  else
  {
    if (v6)
    {
      *(v8 + 36) = v28;
    }

    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
    if (v32 != v31)
    {
      goto LABEL_82;
    }

    v33 = v30;
    if (*(v8 + 8) != v30)
    {
      goto LABEL_83;
    }
  }

  v34 = *(v8 + 72);
  OZChannel::getValueAsDouble((v10 + 9976), v9, 0.0);
  if (vabdd_f64(v34, v35) >= 0.0000001 || (v36 = *(v8 + 80), OZChannel::getValueAsDouble((v10 + 10128), v9, 0.0), vabdd_f64(v36, v37) >= 0.0000001) || (v38 = *(v8 + 88), OZChannel::getValueAsDouble((v10 + 10592), v9, 0.0), vabdd_f64(v38, v39) >= 0.0000001) || (v40 = *(v8 + 104), OZChannel::getValueAsDouble((v10 + 9568), v9, 0.0), vabdd_f64(v40, v41) >= 0.0000001) || (v42 = *(v8 + 96), OZChannel::getValueAsDouble((v10 + 9416), v9, 0.0), vabdd_f64(v42, v43) >= 0.0000001) || (v44 = *(v8 + 24), v44 != OZChannel::getValueAsInt((v10 + 8648), v9, 0.0)) || (v45 = *(v8 + 28), v45 != OZChannel::getValueAsInt((v10 + 8904), v9, 0.0)) || (v46 = *(v8 + 32), v46 != OZChannel::getValueAsInt((v10 + 9160), v9, 0.0)) || (v47 = *(v8 + 116), v47 != OZChannel::getValueAsInt((v10 + 9720), v9, 0.0)) || (v48 = *(v8 + 13), OZChannel::getValueAsInt((v10 + 8496), v9, 0.0) != v48))
  {
LABEL_82:
    v33 = v30;
    goto LABEL_83;
  }

  if (*(v8 + 1192) == 1 && (v6 & 1) != 0)
  {
LABEL_84:
    *(v8 + 8) = v30;
    *(v8 + 12) = v31;
    OZChannel::getValueAsDouble((v10 + 9976), v9, 0.0);
    *(v8 + 72) = v49;
    OZChannel::getValueAsDouble((v10 + 10128), v9, 0.0);
    *(v8 + 80) = v50;
    OZChannel::getValueAsDouble((v10 + 10592), v9, 0.0);
    *(v8 + 88) = v51;
    *(v8 + 24) = OZChannel::getValueAsInt((v10 + 8648), v9, 0.0);
    *(v8 + 28) = OZChannel::getValueAsInt((v10 + 8904), v9, 0.0);
    *(v8 + 32) = OZChannel::getValueAsInt((v10 + 9160), v9, 0.0);
    OZChannel::getValueAsDouble((v10 + 9416), v9, 0.0);
    *(v8 + 96) = v52;
    OZChannel::getValueAsDouble((v10 + 9568), v9, 0.0);
    *(v8 + 104) = v53;
    *(v8 + 116) = OZChannel::getValueAsInt((v10 + 9720), v9, 0.0);
    *(v8 + 13) = OZChannel::getValueAsInt((v10 + 8496), v9, 0.0) != 0;
    *(v8 + 1195) = 1;
  }

LABEL_85:
  v54 = *(v8 + 16);
  OZChannel::getValueAsDouble((v10 + 8344), v9, 0.0);
  if (vabdd_f64(v54, v55) >= 0.0000001)
  {
    if (!v6)
    {
      goto LABEL_96;
    }
  }

  else if (*(v8 + 1192) != 1 || (v6 & 1) == 0)
  {
    goto LABEL_96;
  }

  OZChannel::getValueAsDouble((v10 + 8344), v9, 0.0);
  if (v56 < 1.0 && v56 > 0.0)
  {
    v56 = 1.0;
  }

  *(v8 + 16) = v56;
  *(v8 + 1192) = 257;
  *(v8 + 1194) = 1;
LABEL_96:
  if (!OZChannel::getValueAsInt((v10 + 1328), v9, 0.0))
  {
    isGeometricShape = OZShape::isGeometricShape(v10);
    v58 = (v8 + 168);
    if (*(v8 + 168) == isGeometricShape)
    {
      goto LABEL_104;
    }

    if (!isGeometricShape)
    {
      if (v6)
      {
        *v58 = 0;
        OZChannelCurve::openCurve((v10 + 208));
      }

      goto LABEL_103;
    }

LABEL_101:
    if (v6)
    {
      *v58 = 1;
      OZChannelCurve::closeCurve((v10 + 208));
    }

LABEL_103:
    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
    goto LABEL_104;
  }

  v58 = (v8 + 168);
  if (*(v8 + 168) != 1)
  {
    goto LABEL_101;
  }

LABEL_104:
  if (v6)
  {
    PCColor::PCColor(&time1);
    OZChannelColorNoAlpha::getColor((v10 + 3168), v9, &time1);
    LODWORD(time2.value) = 0;
    LODWORD(v77) = 0;
    v75 = 0.0;
    PCColor::getRGB(&time1, &time2, &v77, &v75, (v9 + 5));
    v60 = *&v77;
    *(v8 + 128) = *&time2.value;
    *(v8 + 136) = v60;
    *(v8 + 144) = v75;
    OZChannel::getValueAsDouble((v10 + 4176), v9, 0.0);
    *(v8 + 152) = v61;
    OZChannelColorNoAlpha::getColor((v10 + 7184), v9, &time1);
    PCColor::getRGB(&time1, &time2, &v77, &v75, (v9 + 5));
    v62 = *&v77;
    *(v8 + 40) = *&time2.value;
    *(v8 + 48) = v62;
    *(v8 + 56) = v75;
    OZChannel::getValueAsDouble((v10 + 0x2000), v9, 0.0);
    *(v8 + 64) = v63;
    PCCFRef<CGColorSpace *>::~PCCFRef(&time1.var1._obj);
  }

  v64 = OZChannel::getValueAsInt((v10 + 2912), v9, 0.0);
  if (*(v8 + 124) != v64 && v6)
  {
    *(v8 + 124) = v64;
  }

  if (OZChannel::getValueAsInt((v10 + 1480), v9, 0.0))
  {
    v65 = *(v9 + 12);
  }

  else
  {
    v65 = 2;
  }

  v66 = *(v8 + 180);
  if (v66 != OZChannel::getValueAsInt((v10 + 1480), v9, 0.0) || *(v8 + 184) != v65 || (v67 = *(v8 + 216), OZChannel::getValueAsInt((v10 + 1632), v9, 0.0) != v67))
  {
    if (v6)
    {
      *(v8 + 180) = OZChannel::getValueAsInt((v10 + 1480), v9, 0.0);
      *(v8 + 184) = v65;
      *(v8 + 216) = OZChannel::getValueAsInt((v10 + 1632), v9, 0.0) != 0;
    }

    *(v8 + 1192) = 257;
    *(v8 + 1194) = 1;
  }

  isRect = OZShape::isRect(v10, v9);
  v69 = *(v8 + 241);
  if (v69 != isRect && v6)
  {
    *(v8 + 241) = v69 ^ 1;
  }

  if (OZChannel::getValueAsInt((v10 + 12856), MEMORY[0x277CC08F0], 0.0))
  {
    *(v8 + 8) = 0;
    *(v8 + 120) = 1;
    __asm { FMOV            V0.2D, #1.0 }

    *(v8 + 128) = _Q0;
    *(v8 + 144) = _Q0;
  }

  v74 = *v9;
  *(v8 + 1160) = *(v9 + 2);
  *(v8 + 1144) = v74;
  OZChannelBase::getTimeOffset((v10 + 80), &time1);
  *(v8 + 1168) = *&time1.var0.var0;
  *(v8 + 1184) = time1.var0.var1[1];
  if ((*(v8 + 1192) & 1) != 0 || (*(v8 + 1193) & 1) != 0 || *(v8 + 1194) == 1)
  {
    *(v8 + 1195) = 1;
  }

  PCHashWriteStream::~PCHashWriteStream(v82);
}

void sub_2602F045C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, CGColorSpace *a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, char a26)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a17);
  PCHashWriteStream::~PCHashWriteStream(&a26);
  _Unwind_Resume(a1);
}

uint64_t OZShape::OZShape_interpolationModeImpl::getInstance(OZShape::OZShape_interpolationModeImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_interpolationModeImpl::getInstance(void)::OZShape_interpolationModeImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_interpolationModeImpl::getInstance(void)::OZShape_interpolationModeImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_interpolationModeImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_interpolationModeImpl::_OZShape_interpolationMode;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_interpolationModeImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_interpolationModeImpl::_OZShape_interpolationMode)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_closedImpl::getInstance(OZShape::OZShape_closedImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_closedImpl::getInstance(void)::OZShape_closedImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_closedImpl::getInstance(void)::OZShape_closedImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_closedImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_closedImpl::_OZShape_closed;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_closedImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_closedImpl::_OZShape_closed)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_roundnessImpl::getInstance(OZShape::OZShape_roundnessImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_roundnessImpl::getInstance(void)::OZShape_roundnessImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_roundnessImpl::getInstance(void)::OZShape_roundnessImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_roundnessImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_roundnessImpl::_OZShape_roundness;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_roundnessImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_roundnessImpl::_OZShape_roundness)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_roundnessInfo::getInstance(OZShape::OZShape_roundnessInfo *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_roundnessInfo::getInstance(void)::OZShape_roundnessInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_roundnessInfo::getInstance(void)::OZShape_roundnessInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_roundnessInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_roundnessInfo::_OZShape_roundnessInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_roundnessInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_roundnessInfo::_OZShape_roundnessInfo)
  {
    operator new();
  }
}

OZShape::OZShape_roundnessInfo *OZShape::OZShape_roundnessInfo::OZShape_roundnessInfo(OZShape::OZShape_roundnessInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 50.0, 1.0, 1.0, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872DD2F8;
  *(this + 10) = &unk_2872DD318;
  return this;
}

void OZChannelUint32Info::OZChannelUint32Info(OZChannelUint32Info *this)
{
  OZChannelInfo::OZChannelInfo(this, 0.0, 4294967300.0, 1.0, 1.0, 1.0, "");
  PCSingleton::PCSingleton((v2 + 80), 100);
  *this = &unk_2872DD370;
  *(this + 10) = &unk_2872DD390;
}

void OZChannelUint32Info::~OZChannelUint32Info(OZChannelUint32Info *this)
{
  PCSingleton::~PCSingleton((this + 80));

  OZChannelInfo::~OZChannelInfo(this);
}

{
  PCSingleton::~PCSingleton((this + 80));
  OZChannelInfo::~OZChannelInfo(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZChannelUint32Info::~OZChannelUint32Info(OZChannelUint32Info *this)
{
  v1 = (this - 80);
  PCSingleton::~PCSingleton(this);

  OZChannelInfo::~OZChannelInfo(v1);
}

{
  v1 = (this - 80);
  PCSingleton::~PCSingleton(this);
  OZChannelInfo::~OZChannelInfo(v1);

  JUMPOUT(0x2666E9F00);
}

void OZChannelUint32Impl::~OZChannelUint32Impl(OZChannelUint32Impl *this)
{
  PCSingleton::~PCSingleton((this + 40));

  OZChannelImpl::~OZChannelImpl(this);
}

{
  PCSingleton::~PCSingleton((this + 40));
  OZChannelImpl::~OZChannelImpl(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZChannelUint32Impl::~OZChannelUint32Impl(OZChannelUint32Impl *this)
{
  v1 = (this - 40);
  PCSingleton::~PCSingleton(this);

  OZChannelImpl::~OZChannelImpl(v1);
}

{
  v1 = (this - 40);
  PCSingleton::~PCSingleton(this);
  OZChannelImpl::~OZChannelImpl(v1);

  JUMPOUT(0x2666E9F00);
}

uint64_t OZShape::OZShape_initialPositionImpl::getInstance(OZShape::OZShape_initialPositionImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_initialPositionImpl::getInstance(void)::OZShape_initialPositionImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_initialPositionImpl::getInstance(void)::OZShape_initialPositionImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_initialPositionImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_initialPositionImpl::_OZShape_initialPosition;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_initialPositionImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_initialPositionImpl::_OZShape_initialPosition)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_pixelAspectRatioImpl::getInstance(OZShape::OZShape_pixelAspectRatioImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_pixelAspectRatioImpl::getInstance(void)::OZShape_pixelAspectRatioImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_pixelAspectRatioImpl::getInstance(void)::OZShape_pixelAspectRatioImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_pixelAspectRatioImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_pixelAspectRatioImpl::_OZShape_pixelAspectRatio;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_pixelAspectRatioImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_pixelAspectRatioImpl::_OZShape_pixelAspectRatio)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_strokeWidthImpl::getInstance(OZShape::OZShape_strokeWidthImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeWidthImpl::getInstance(void)::OZShape_strokeWidthImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeWidthImpl::getInstance(void)::OZShape_strokeWidthImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeWidthImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeWidthImpl::_OZShape_strokeWidth;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeWidthImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeWidthImpl::_OZShape_strokeWidth)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_strokeWidthInfo::getInstance(OZShape::OZShape_strokeWidthInfo *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeWidthInfo::getInstance(void)::OZShape_strokeWidthInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeWidthInfo::getInstance(void)::OZShape_strokeWidthInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeWidthInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeWidthInfo::_OZShape_strokeWidthInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeWidthInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeWidthInfo::_OZShape_strokeWidthInfo)
  {
    operator new();
  }
}

OZShape::OZShape_strokeWidthInfo *OZShape::OZShape_strokeWidthInfo::OZShape_strokeWidthInfo(OZShape::OZShape_strokeWidthInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 1.0, 100.0, 1.0, 1.0, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872DD558;
  *(this + 10) = &unk_2872DD578;
  return this;
}

uint64_t OZShape::OZShape_strokeJointImpl::getInstance(OZShape::OZShape_strokeJointImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeJointImpl::getInstance(void)::OZShape_strokeJointImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeJointImpl::getInstance(void)::OZShape_strokeJointImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeJointImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeJointImpl::_OZShape_strokeJoint;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeJointImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeJointImpl::_OZShape_strokeJoint)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_strokeLeftCapImpl::getInstance(OZShape::OZShape_strokeLeftCapImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeLeftCapImpl::getInstance(void)::OZShape_strokeLeftCapImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeLeftCapImpl::getInstance(void)::OZShape_strokeLeftCapImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeLeftCapImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeLeftCapImpl::_OZShape_strokeLeftCap;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeLeftCapImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeLeftCapImpl::_OZShape_strokeLeftCap)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_strokeRightCapImpl::getInstance(OZShape::OZShape_strokeRightCapImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeRightCapImpl::getInstance(void)::OZShape_strokeRightCapImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeRightCapImpl::getInstance(void)::OZShape_strokeRightCapImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeRightCapImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeRightCapImpl::_OZShape_strokeRightCap;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeRightCapImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeRightCapImpl::_OZShape_strokeRightCap)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_strokeCapArrowLengthImpl::getInstance(OZShape::OZShape_strokeCapArrowLengthImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeCapArrowLengthImpl::getInstance(void)::OZShape_strokeCapArrowLengthImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeCapArrowLengthImpl::getInstance(void)::OZShape_strokeCapArrowLengthImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowLengthImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeCapArrowLengthImpl::_OZShape_strokeCapArrowLength;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowLengthImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeCapArrowLengthImpl::_OZShape_strokeCapArrowLength)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_strokeCapArrowLengthInfo::getInstance(OZShape::OZShape_strokeCapArrowLengthInfo *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeCapArrowLengthInfo::getInstance(void)::OZShape_strokeCapArrowLengthInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeCapArrowLengthInfo::getInstance(void)::OZShape_strokeCapArrowLengthInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowLengthInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeCapArrowLengthInfo::_OZShape_strokeCapArrowLengthInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowLengthInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeCapArrowLengthInfo::_OZShape_strokeCapArrowLengthInfo)
  {
    operator new();
  }
}

OZChannelInfo *OZShape::OZShape_strokeCapArrowLengthInfo::OZShape_strokeCapArrowLengthInfo(OZChannelInfo *this)
{
  OZChannelInfo::OZChannelInfo(this, 0.0, 3.0, 0.01, 0.0001, 100.0, "%");
  PCSingleton::PCSingleton((v2 + 80), 100);
  *this = &unk_2872DD7B0;
  *(this + 10) = &unk_2872DD7D0;
  return this;
}

uint64_t OZShape::OZShape_strokeCapArrowWidthImpl::getInstance(OZShape::OZShape_strokeCapArrowWidthImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeCapArrowWidthImpl::getInstance(void)::OZShape_strokeCapArrowWidthImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeCapArrowWidthImpl::getInstance(void)::OZShape_strokeCapArrowWidthImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowWidthImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeCapArrowWidthImpl::_OZShape_strokeCapArrowWidth;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowWidthImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeCapArrowWidthImpl::_OZShape_strokeCapArrowWidth)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_strokeCapArrowWidthInfo::getInstance(OZShape::OZShape_strokeCapArrowWidthInfo *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_strokeCapArrowWidthInfo::getInstance(void)::OZShape_strokeCapArrowWidthInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_strokeCapArrowWidthInfo::getInstance(void)::OZShape_strokeCapArrowWidthInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowWidthInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_strokeCapArrowWidthInfo::_OZShape_strokeCapArrowWidthInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_strokeCapArrowWidthInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_strokeCapArrowWidthInfo::_OZShape_strokeCapArrowWidthInfo)
  {
    operator new();
  }
}

OZChannelInfo *OZShape::OZShape_strokeCapArrowWidthInfo::OZShape_strokeCapArrowWidthInfo(OZChannelInfo *this)
{
  OZChannelInfo::OZChannelInfo(this, 0.0, 3.0, 0.01, 0.0001, 100.0, "%");
  PCSingleton::PCSingleton((v2 + 80), 100);
  *this = &unk_2872DD8A0;
  *(this + 10) = &unk_2872DD8C0;
  return this;
}

uint64_t OZShape::OZShape_softEdgeRadiusImpl::getInstance(OZShape::OZShape_softEdgeRadiusImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_softEdgeRadiusImpl::getInstance(void)::OZShape_softEdgeRadiusImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_softEdgeRadiusImpl::getInstance(void)::OZShape_softEdgeRadiusImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeRadiusImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_softEdgeRadiusImpl::_OZShape_softEdgeRadius;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeRadiusImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_softEdgeRadiusImpl::_OZShape_softEdgeRadius)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_softEdgeRadiusInfo::getInstance(OZShape::OZShape_softEdgeRadiusInfo *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_softEdgeRadiusInfo::getInstance(void)::OZShape_softEdgeRadiusInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_softEdgeRadiusInfo::getInstance(void)::OZShape_softEdgeRadiusInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeRadiusInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_softEdgeRadiusInfo::_OZShape_softEdgeRadiusInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeRadiusInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_softEdgeRadiusInfo::_OZShape_softEdgeRadiusInfo)
  {
    operator new();
  }
}

OZShape::OZShape_softEdgeRadiusInfo *OZShape::OZShape_softEdgeRadiusInfo::OZShape_softEdgeRadiusInfo(OZShape::OZShape_softEdgeRadiusInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, -100.0, 100.0, 1.0, 0.001, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872DD990;
  *(this + 10) = &unk_2872DD9B0;
  return this;
}

uint64_t OZShape::OZShape_softEdgeFalloffImpl::getInstance(OZShape::OZShape_softEdgeFalloffImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_softEdgeFalloffImpl::getInstance(void)::OZShape_softEdgeFalloffImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_softEdgeFalloffImpl::getInstance(void)::OZShape_softEdgeFalloffImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeFalloffImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_softEdgeFalloffImpl::_OZShape_softEdgeFalloff;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeFalloffImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_softEdgeFalloffImpl::_OZShape_softEdgeFalloff)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_softEdgeFalloffInfo::getInstance(OZShape::OZShape_softEdgeFalloffInfo *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_softEdgeFalloffInfo::getInstance(void)::OZShape_softEdgeFalloffInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_softEdgeFalloffInfo::getInstance(void)::OZShape_softEdgeFalloffInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeFalloffInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_softEdgeFalloffInfo::_OZShape_softEdgeFalloffInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeFalloffInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_softEdgeFalloffInfo::_OZShape_softEdgeFalloffInfo)
  {
    operator new();
  }
}

OZShape::OZShape_softEdgeFalloffInfo *OZShape::OZShape_softEdgeFalloffInfo::OZShape_softEdgeFalloffInfo(OZShape::OZShape_softEdgeFalloffInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, -100.0, 100.0, 1.0, 0.001, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872DDA80;
  *(this + 10) = &unk_2872DDAA0;
  return this;
}

uint64_t OZShape::OZShape_softEdgeKernelImpl::getInstance(OZShape::OZShape_softEdgeKernelImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_softEdgeKernelImpl::getInstance(void)::OZShape_softEdgeKernelImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_softEdgeKernelImpl::getInstance(void)::OZShape_softEdgeKernelImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeKernelImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_softEdgeKernelImpl::_OZShape_softEdgeKernel;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_softEdgeKernelImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_softEdgeKernelImpl::_OZShape_softEdgeKernel)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_ellipseCurvatureImpl::getInstance(OZShape::OZShape_ellipseCurvatureImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_ellipseCurvatureImpl::getInstance(void)::OZShape_ellipseCurvatureImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_ellipseCurvatureImpl::getInstance(void)::OZShape_ellipseCurvatureImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_ellipseCurvatureImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_ellipseCurvatureImpl::_OZShape_ellipseCurvature;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_ellipseCurvatureImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_ellipseCurvatureImpl::_OZShape_ellipseCurvature)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_shapeRadiusImpl::getInstance(OZShape::OZShape_shapeRadiusImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_shapeRadiusImpl::getInstance(void)::OZShape_shapeRadiusImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_shapeRadiusImpl::getInstance(void)::OZShape_shapeRadiusImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_shapeRadiusImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_shapeRadiusImpl::_OZShape_shapeRadius;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_shapeRadiusImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_shapeRadiusImpl::_OZShape_shapeRadius)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_shapeRadiusInfo::getInstance(OZShape::OZShape_shapeRadiusInfo *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_shapeRadiusInfo::getInstance(void)::OZShape_shapeRadiusInfo_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_shapeRadiusInfo::getInstance(void)::OZShape_shapeRadiusInfo_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_shapeRadiusInfo::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_shapeRadiusInfo::_OZShape_shapeRadiusInfo;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_shapeRadiusInfo::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_shapeRadiusInfo::_OZShape_shapeRadiusInfo)
  {
    operator new();
  }
}

OZShape::OZShape_shapeRadiusInfo *OZShape::OZShape_shapeRadiusInfo::OZShape_shapeRadiusInfo(OZShape::OZShape_shapeRadiusInfo *this)
{
  PCString::PCString(&v3, "");
  OZChannelInfo::OZChannelInfo(this, 0.0, 1000.0, 1.0, 0.01, 1.0, &v3);
  PCString::~PCString(&v3);
  PCSingleton::PCSingleton((this + 80), 100);
  *this = &unk_2872DDC60;
  *(this + 10) = &unk_2872DDC80;
  return this;
}

uint64_t OZShape::OZShape_initialScaleXImpl::getInstance(OZShape::OZShape_initialScaleXImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_initialScaleXImpl::getInstance(void)::OZShape_initialScaleXImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_initialScaleXImpl::getInstance(void)::OZShape_initialScaleXImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_initialScaleXImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_initialScaleXImpl::_OZShape_initialScaleX;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_initialScaleXImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_initialScaleXImpl::_OZShape_initialScaleX)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_initialScaleYImpl::getInstance(OZShape::OZShape_initialScaleYImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_initialScaleYImpl::getInstance(void)::OZShape_initialScaleYImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_initialScaleYImpl::getInstance(void)::OZShape_initialScaleYImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_initialScaleYImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_initialScaleYImpl::_OZShape_initialScaleY;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_initialScaleYImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_initialScaleYImpl::_OZShape_initialScaleY)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_disableAntialiasingiOSImpl::getInstance(OZShape::OZShape_disableAntialiasingiOSImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_disableAntialiasingiOSImpl::getInstance(void)::OZShape_disableAntialiasingiOSImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_disableAntialiasingiOSImpl::getInstance(void)::OZShape_disableAntialiasingiOSImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_disableAntialiasingiOSImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_disableAntialiasingiOSImpl::_OZShape_disableAntialiasingiOS;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_disableAntialiasingiOSImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_disableAntialiasingiOSImpl::_OZShape_disableAntialiasingiOS)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_fixedFeatherWidthImpl::getInstance(OZShape::OZShape_fixedFeatherWidthImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_fixedFeatherWidthImpl::getInstance(void)::OZShape_fixedFeatherWidthImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_fixedFeatherWidthImpl::getInstance(void)::OZShape_fixedFeatherWidthImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_fixedFeatherWidthImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_fixedFeatherWidthImpl::_OZShape_fixedFeatherWidth;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_fixedFeatherWidthImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_fixedFeatherWidthImpl::_OZShape_fixedFeatherWidth)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_boxTopLeftImpl::getInstance(OZShape::OZShape_boxTopLeftImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_boxTopLeftImpl::getInstance(void)::OZShape_boxTopLeftImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_boxTopLeftImpl::getInstance(void)::OZShape_boxTopLeftImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxTopLeftImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_boxTopLeftImpl::_OZShape_boxTopLeft;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxTopLeftImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_boxTopLeftImpl::_OZShape_boxTopLeft)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_boxTopRightImpl::getInstance(OZShape::OZShape_boxTopRightImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_boxTopRightImpl::getInstance(void)::OZShape_boxTopRightImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_boxTopRightImpl::getInstance(void)::OZShape_boxTopRightImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxTopRightImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_boxTopRightImpl::_OZShape_boxTopRight;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxTopRightImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_boxTopRightImpl::_OZShape_boxTopRight)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_boxBottomLeftImpl::getInstance(OZShape::OZShape_boxBottomLeftImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_boxBottomLeftImpl::getInstance(void)::OZShape_boxBottomLeftImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_boxBottomLeftImpl::getInstance(void)::OZShape_boxBottomLeftImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxBottomLeftImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_boxBottomLeftImpl::_OZShape_boxBottomLeft;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxBottomLeftImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_boxBottomLeftImpl::_OZShape_boxBottomLeft)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_boxBottomRightImpl::getInstance(OZShape::OZShape_boxBottomRightImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_boxBottomRightImpl::getInstance(void)::OZShape_boxBottomRightImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_boxBottomRightImpl::getInstance(void)::OZShape_boxBottomRightImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxBottomRightImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_boxBottomRightImpl::_OZShape_boxBottomRight;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxBottomRightImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_boxBottomRightImpl::_OZShape_boxBottomRight)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_boxRotationImpl::getInstance(OZShape::OZShape_boxRotationImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_boxRotationImpl::getInstance(void)::OZShape_boxRotationImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_boxRotationImpl::getInstance(void)::OZShape_boxRotationImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxRotationImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_boxRotationImpl::_OZShape_boxRotation;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxRotationImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_boxRotationImpl::_OZShape_boxRotation)
  {
    operator new();
  }
}

uint64_t OZShape::OZShape_boxPivotImpl::getInstance(OZShape::OZShape_boxPivotImpl *this)
{
  if (atomic_load_explicit(&OZShape::OZShape_boxPivotImpl::getInstance(void)::OZShape_boxPivotImpl_once, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZShape::OZShape_boxPivotImpl::getInstance(void)::OZShape_boxPivotImpl_once, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxPivotImpl::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZShape::OZShape_boxPivotImpl::_OZShape_boxPivot;
}

void std::__call_once_proxy[abi:ne200100]<std::tuple<OZShape::OZShape_boxPivotImpl::getInstance(void)::{lambda(void)#1} &&>>()
{
  if (!OZShape::OZShape_boxPivotImpl::_OZShape_boxPivot)
  {
    operator new();
  }
}

void OZShapeReparametrizedContour::~OZShapeReparametrizedContour(OZShapeReparametrizedContour *this)
{
  v2 = *(this + 48);
  if (v2)
  {
    (*(*v2 + 8))(v2);
    *(this + 48) = 0;
  }

  v3 = *(this + 56);
  if (v3)
  {
    *(this + 57) = v3;
    operator delete(v3);
  }

  v4 = *(this + 53);
  if (v4)
  {
    *(this + 54) = v4;
    operator delete(v4);
  }

  v5 = *(this + 50);
  if (v5)
  {
    *(this + 51) = v5;
    operator delete(v5);
  }

  OZShapeContour::~OZShapeContour(this);
}

void OZShapeContour::~OZShapeContour(OZShapeContour *this)
{
  v2 = *(this + 45);
  if (v2)
  {
    *(this + 46) = v2;
    operator delete(v2);
  }

  v3 = *(this + 42);
  if (v3)
  {
    *(this + 43) = v3;
    operator delete(v3);
  }

  v4 = *(this + 39);
  if (v4)
  {
    *(this + 40) = v4;
    operator delete(v4);
  }

  v5 = *(this + 36);
  if (v5)
  {
    *(this + 37) = v5;
    operator delete(v5);
  }

  v6 = *(this + 33);
  if (v6)
  {
    *(this + 34) = v6;
    operator delete(v6);
  }

  v7 = *(this + 30);
  if (v7)
  {
    *(this + 31) = v7;
    operator delete(v7);
  }

  v8 = *(this + 27);
  if (v8)
  {
    *(this + 28) = v8;
    operator delete(v8);
  }

  v9 = *(this + 24);
  if (v9)
  {
    *(this + 25) = v9;
    operator delete(v9);
  }
}

uint64_t OZShape::addVertices(uint64_t a1, const CMTime *a2, uint64_t a3)
{
  OZChannelCurve::addVertices(a1 + 208, a2, a3);
  v4 = *(*a1 + 144);

  return v4(a1, 1, 1);
}

uint64_t OZShape::openCurve(uint64_t a1, void **a2)
{
  if (a2)
  {
    OZChannelCurve::openCurve(a1 + 208, *a2, a2[1]);
    OZChannelShape::refreshAnimation((a1 + 208));
  }

  else
  {
    OZChannelCurve::openCurve((a1 + 208));
  }

  OZChannel::setValue((a1 + 1328), MEMORY[0x277CC08F0], 0.0, 0);
  v3 = *(*a1 + 144);

  return v3(a1, 1, 1);
}

uint64_t OZShape::deleteAll(OZShape *this)
{
  (*(*this + 104))(this);
  OZChannelCurve::deleteAllVertices((this + 208));
  OZShape::openCurve(this, 0);
  OZChannel::setValue((this + 14280), MEMORY[0x277CC08F0], 0.0, 0);
  v2 = *(*this + 144);

  return v2(this, 1, 1);
}

CGColorSpace **OZShape::closeCurve(OZShape *this, const CMTime *a2)
{
  OZShapeRenderState::OZShapeRenderState(&v11);
  v11 = *&a2->value;
  *&v12 = a2->epoch;
  OZChannelCurve::closeCurve((this + 208));
  v4 = *(this + 59);
  if (v4 && ((v4[1] - *v4) >> 3) >= 6)
  {
    v8[2] = v13;
    v8[3] = v14;
    v8[4] = v15;
    v8[0] = v11;
    v8[1] = v12;
    v9 = space;
    if (space)
    {
      PCCFRefTraits<CGColorSpace *>::retain(space);
    }

    v10 = v17;
    CurrentRenderParams = OZShape::getCurrentRenderParams(this, v8);
    v6 = OZShape::calculatePolygonArea(this, &v11, CurrentRenderParams, 0);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v9);
    if (v6 > 0.0)
    {
      OZChannelCurve::reverseWindingOrder((this + 208));
    }
  }

  OZChannel::setValue((this + 1328), MEMORY[0x277CC08F0], 1.0, 0);
  (*(*this + 144))(this, 1, 1);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&space);
}

void sub_2602F4408(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, CGColorSpace *a31)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v31 + 80));
  PCCFRef<CGColorSpace *>::~PCCFRef(&a31);
  _Unwind_Resume(a1);
}

CGColorSpace **OZShape::finishCurve(OZShape *this, const CMTime *a2, int a3)
{
  OZShapeRenderState::OZShapeRenderState(&v32);
  v32 = *&a2->value;
  *&v33 = a2->epoch;
  OZChannel::setValue((this + 14280), MEMORY[0x277CC08F0], 1.0, 0);
  v30 = this + 8;
  PCMutex::lock((this + 8));
  v31 = 1;
  v27[2] = v34;
  v27[3] = v35;
  v27[4] = v36;
  v27[0] = v32;
  v27[1] = v33;
  v28 = v37;
  if (v37)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v37);
  }

  v29 = v38;
  CurrentRenderParams = OZShape::getCurrentRenderParams(this, v27);
  (*(*this + 64))(this, &v32, CurrentRenderParams, 0, 1);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v28);
  OZShape::calculateBounds(this, &v32);
  if (a3)
  {
    if (!OZShape::isGeometricShape(this))
    {
      v24[2] = v34;
      v24[3] = v35;
      v24[4] = v36;
      v24[0] = v32;
      v24[1] = v33;
      v25 = v37;
      if (v37)
      {
        PCCFRefTraits<CGColorSpace *>::retain(v37);
      }

      v26 = v38;
      v7 = OZShape::getCurrentRenderParams(this, v24);
      Contour = OZShape::getContour(this, &v32, v7);
      PCCFRef<CGColorSpace *>::~PCCFRef(&v25);
      __asm { FMOV            V2.2D, #0.5 }

      v14 = vaddq_f64(*(Contour + 24), vmulq_f64(*(Contour + 40), _Q2));
      *(this + 2648) = v14;
      OZChannelCurve::offsetCurve((this + 208), a2, -v14.f64[0], -v14.f64[1]);
    }

    *(this + 2640) = 1;
    if ((*(*this + 312))(this))
    {
      v22 = *&a2->value;
      epoch = a2->epoch;
      (*(*this + 232))(this, &v22, *(this + 331), *(this + 332));
    }

    else
    {
      (*(*this + 384))(this, a2, *(this + 331), *(this + 332));
    }

    if (OZChannel::getValueAsInt((this + 1328), a2, 0.0))
    {
      v15 = *(this + 59);
      if (v15)
      {
        if (((v15[1] - *v15) >> 3) >= 6)
        {
          v19[2] = v34;
          v19[3] = v35;
          v19[4] = v36;
          v19[0] = v32;
          v19[1] = v33;
          v20 = v37;
          if (v37)
          {
            PCCFRefTraits<CGColorSpace *>::retain(v37);
          }

          v21 = v38;
          v16 = OZShape::getCurrentRenderParams(this, v19);
          v17 = OZShape::calculatePolygonArea(this, &v32, v16, 0);
          PCCFRef<CGColorSpace *>::~PCCFRef(&v20);
          if (v17 > 0.0)
          {
            OZChannelCurve::reverseWindingOrder((this + 208));
          }
        }
      }
    }

    if (!OZChannel::getValueAsInt((this + 1328), a2, 0.0))
    {
      OZChannelBase::enable((this + 2784), 0, 0);
      OZChannelBase::enable((this + 6800), 1, 0);
    }
  }

  if (OZChannelCurve::isCurveFlattened((this + 208)) && OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0) == 1)
  {
    OZChannel::setInitialValue((this + 1072), 0.0, 1);
  }

  OZChannelCurve::setDefaultAtCurrentTime((this + 208), a2);
  (*(*this + 144))(this, 1, 1);
  PCMutex::unlock((this + 8));
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v37);
}

void sub_2602F4810(_Unwind_Exception *a1)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v1 + 80));
  PCLockSentry<PCMutex>::~PCLockSentry(v2 - 176);
  PCCFRef<CGColorSpace *>::~PCCFRef((v2 - 80));
  _Unwind_Resume(a1);
}

void OZShape::didSetInterpolation(OZShape *this)
{
  ValueAsInt = OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0);
  if (ValueAsInt == 2)
  {
    if (OZChannel::getValueAsInt((this + 13720), MEMORY[0x277CC08F0], 0.0))
    {
      v3 = (this + 208);
      v4 = 10;
    }

    else
    {
      v3 = (this + 208);
      v4 = 12;
    }
  }

  else if (ValueAsInt == 1)
  {
    v3 = (this + 208);
    v4 = 4;
  }

  else
  {
    if (ValueAsInt)
    {
      goto LABEL_10;
    }

    v3 = (this + 208);
    v4 = 1;
  }

  OZChannelCurve::setCurveInterpolation(v3, v4);
LABEL_10:
  if (OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    OZChannelBase::setFlag((this + 1328), 2, 0);
    OZChannelBase::setFlag((this + 1072), 2, 0);
    OZChannelBase::setFlag((this + 1480), 2, 0);
    OZChannelBase::setFlag((this + 1632), 2, 0);
    OZChannelBase::setFlag((this + 208), 2, 0);
    OZChannelBase::resetFlag((this + 12072), 2, 0);
    OZChannelBase::resetFlag((this + 12224), 2, 0);

    OZChannelBase::resetFlag((this + 12664), 2, 0);
  }

  else if (OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0) == 5)
  {
    OZChannelBase::setFlag((this + 1328), 2, 0);
    OZChannelBase::setFlag((this + 1072), 2, 0);
    OZChannelBase::resetFlag((this + 1480), 2, 0);
    OZChannelBase::resetFlag((this + 1632), 2, 0);
    OZChannelBase::setFlag((this + 208), 2, 0);
    OZChannelBase::setFlag((this + 12072), 2, 0);
    OZChannelBase::resetFlag((this + 12224), 2, 0);
    OZChannelBase::resetFlag((this + 12664), 2, 0);
    PCString::PCString(&v5, "Shape Size", "com.apple.proshapes.framework");
    OZChannelBase::setName((this + 12224), &v5, 0);
    PCString::~PCString(&v5);
    PCString::PCString(&v5, "Shape Size Width", "com.apple.proshapes.framework");
    OZChannelBase::setName((this + 12360), &v5, 0);
    PCString::~PCString(&v5);
    PCString::PCString(&v5, "Shape Size Height", "com.apple.proshapes.framework");
    OZChannelBase::setName((this + 12512), &v5, 0);
    PCString::~PCString(&v5);
  }

  else
  {
    OZChannelBase::resetFlag((this + 1328), 2, 0);
    OZChannelBase::resetFlag((this + 1072), 2, 0);
    OZChannelBase::resetFlag((this + 1480), 2, 0);
    OZChannelBase::resetFlag((this + 1632), 2, 0);
    OZChannelBase::resetFlag((this + 208), 2, 0);
    OZChannelBase::setFlag((this + 12072), 2, 0);
    OZChannelBase::setFlag((this + 12224), 2, 0);

    OZChannelBase::setFlag((this + 12664), 2, 0);
  }
}

uint64_t OZShape::setInterpolation(OZShape *this, unsigned int a2)
{
  OZChannel::setValue((this + 1072), MEMORY[0x277CC08F0], a2, 0);
  if (a2 == 1)
  {
    OZChannelCurve::flattenCurve((this + 208));
  }

  v4 = *(*this + 120);

  return v4(this);
}

void OZShapeRenderState::OZShapeRenderState(OZShapeRenderState *this)
{
  v2 = *MEMORY[0x277CC08F0];
  *(this + 2) = *(MEMORY[0x277CC08F0] + 16);
  *this = v2;
  *(this + 12) = 0;
  *(this + 26) = 0;
  __asm { FMOV            V0.2D, #1.0 }

  *(this + 2) = _Q0;
  *(this + 12) = 2;
  *(this + 8) = 0;
  *(this + 9) = 0;
  *(this + 7) = 0;
  PCColorSpaceCache::rec709Linear(this + 10);
  *(this + 22) = PCRenderModel::getDefaultBlendingGamma(v8);
}

long double OZShapeEdgeTexture::smoothStep(OZShapeEdgeTexture *this, double a2, double a3)
{
  result = 1.0;
  if (a2 >= 0.0)
  {
    result = 0.0;
    if (a2 <= 2.0)
    {
      v5 = (2.0 - a2) * 0.5;
      v6 = v5 + (pow(v5, 1.5) - v5) * ((1.0 - v5) * 0.5 + -0.5 + 1.0);
      return (v5 * 0.5 + -0.5 + 1.0) * (1.0 - pow(1.0 - v5, 1.5) - v5) + v6;
    }
  }

  return result;
}

double OZShapeEdgeTexture::eval(LiEdgeTexture *a1, double a2, double a3)
{
  result = 1.0;
  if (a2 <= 0.0)
  {
    return result;
  }

  if (a2 >= a3)
  {
    return 0.0;
  }

  if (a1 <= 2)
  {
    if (a1)
    {
      if (a1 == 1)
      {
        v5 = exp(a3 * a3 * -1.5);
        return (exp(fabs(a2 * a2) * -1.5) - v5) / (1.0 - v5);
      }

      if (a1 != 2)
      {
        goto LABEL_31;
      }

      result = 0.0;
      if (a2 < 2.0)
      {
        return (cos(a2 * 3.14159265 * 0.5) + 1.0) * 0.5;
      }
    }

    else if (a2 >= 0.5)
    {
      result = 0.0;
      if (a2 <= 1.5)
      {
        return 1.5 - a2;
      }
    }
  }

  else
  {
    if (a1 <= 4)
    {
      if (a1 == 3)
      {

        return LiEdgeTexture::erfc_filter(a1, a2, a3);
      }

      else
      {
        result = 0.0;
        if (a2 < 2.0)
        {
          return sin(a2 * -0.96875 * 3.14159265 * 0.25) + 1.0;
        }
      }

      return result;
    }

    if (a1 != 5)
    {
      if (a1 == 6)
      {

        return OZShapeEdgeTexture::smoothStep(a1, a2, a3);
      }

LABEL_31:
      exception = __cxa_allocate_exception(0x40uLL);
      PCIllegalArgumentException::PCIllegalArgumentException(exception);
    }

    result = 0.0;
    if (a2 < 2.0)
    {
      v6 = 2.0 - a2;
      v7 = v6 * 0.96875 * 3.14159265 * 0.25;

      return sin(v7);
    }
  }

  return result;
}

void OZShapeEdgeTexture::createHeliumBitmap(int a1@<W0>, LiEdgeTexture *a2@<X1>, uint64_t a3@<X2>, int32x4_t ***a4@<X8>, double a5@<D0>)
{
  if (a1)
  {
    v10 = 28;
  }

  else
  {
    v10 = 24;
  }

  v11 = HGRectMake4i(0, 0, a3, a3);
  v13 = v12;
  v14 = HGObject::operator new(0x80uLL);
  HGBitmap::HGBitmap(v14, v11, v13, v10);
  *a4 = v14;
  v15 = v14[10];
  if (a1)
  {
    evalBitmap<float>(v15, a5, a3, a2);
  }

  else
  {
    evalBitmap<unsigned char>(v15, a5, a3, a2);
  }
}

void evalBitmap<float>(int32x4_t *a1, double a2, uint64_t a3, LiEdgeTexture *a4)
{
  v6 = a1;
  v23[1] = *MEMORY[0x277D85DE8];
  MEMORY[0x28223BE20](a1);
  v9 = v23 - v8;
  v10 = (v7 - 1);
  if (v7 >= 1)
  {
    v11 = a2 / (v7 - 3);
    v12 = 8 * (v7 - 1);
    v13 = v7 - 2;
    do
    {
      *&v9[v12] = OZShapeEdgeTexture::eval(a4, v11 * v13, a2);
      v12 -= 8;
      --v13;
    }

    while (v12 != -8);
    v14 = v10 + 1;
    v15 = &v9[8 * v10];
    do
    {
      v16 = v10;
      LODWORD(v10) = v10 - 1;
      v17 = OZShapeEdgeTexture::eval(a4, v11 * v10, a2);
      v18 = v15;
      v19 = v14;
      do
      {
        v20 = *v18--;
        v21 = v17 * v20;
        *&v21 = v17 * v20;
        *&v21 = fminf(fmaxf(*&v21, 0.0), 1.0);
        *v6++ = vdupq_lane_s32(*&v21, 0);
      }

      while (v19-- > 1);
    }

    while (v16 >= 1);
  }
}

void evalBitmap<unsigned char>(_DWORD *a1, double a2, uint64_t a3, LiEdgeTexture *a4)
{
  v6 = a1;
  v24[1] = *MEMORY[0x277D85DE8];
  MEMORY[0x28223BE20](a1);
  v9 = v24 - v8;
  v10 = (v7 - 1);
  if (v7 >= 1)
  {
    v11 = a2 / (v7 - 3);
    v12 = 8 * (v7 - 1);
    v13 = v7 - 2;
    do
    {
      *&v9[v12] = OZShapeEdgeTexture::eval(a4, v11 * v13, a2);
      v12 -= 8;
      --v13;
    }

    while (v12 != -8);
    v14 = v10 + 1;
    v15 = &v9[8 * v10];
    do
    {
      v16 = v10;
      LODWORD(v10) = v10 - 1;
      v17 = OZShapeEdgeTexture::eval(a4, v11 * v10, a2);
      v18 = v15;
      v19 = v14;
      do
      {
        v20 = *v18--;
        v21 = vcvtmd_s64_f64(v17 * v20 * 255.0 + 0.5 + 0.0000001);
        v22 = v21 & ~(v21 >> 31);
        if (v22 >= 255)
        {
          v22 = 255;
        }

        *v6++ = 16843009 * v22;
      }

      while (v19-- > 1);
    }

    while (v16 >= 1);
  }
}

HGBitmapLoader *OZShapeEdgeTexture::createBitmapNode@<X0>(uint64_t *a1@<X0>, HGBitmapLoader **a2@<X8>)
{
  v3 = *a1;
  v4 = HGObject::operator new(0x80uLL);
  HGTexture::HGTexture(v4, *(v3 + 20), v3);
  v5 = HGObject::operator new(0x1F0uLL);
  result = HGBitmapLoader::HGBitmapLoader(v5, v4);
  *a2 = v5;
  if (v4)
  {
    return (*(*v4 + 24))(v4);
  }

  return result;
}

void sub_2602F5448(_Unwind_Exception *a1)
{
  HGObject::operator delete(v2);
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  _Unwind_Resume(a1);
}

int32x4_t **OZShapeEdgeTexture::createHeliumNode@<X0>(LiEdgeTexture *a1@<X1>, HGBitmapLoader **a2@<X8>)
{
  OZShapeEdgeTexture::createHeliumBitmap(1, a1, 64, &v4, 2.0);
  OZShapeEdgeTexture::createBitmapNode(&v4, a2);
  result = v4;
  if (v4)
  {
    return ((*v4)[1].i64[1])(v4);
  }

  return result;
}

void sub_2602F551C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  if (a10)
  {
    (*(*a10 + 24))(a10);
  }

  _Unwind_Resume(exception_object);
}

void getOZShapeEdgeTextureLock(void)
{
  {
    PCMutex::PCMutex(&getOZShapeEdgeTextureLock(void)::sOZShapeEdgeTextureLock, 1);
    getOZShapeEdgeTextureLock(void)::sOZShapeEdgeTextureLock = &unk_2871D83A0;
    __cxa_atexit(PCRecursiveMutex::~PCRecursiveMutex, &getOZShapeEdgeTextureLock(void)::sOZShapeEdgeTextureLock, &dword_25F8F0000);
  }
}

uint64_t OZShapeEdgeTexture::getHeliumNode@<X0>(LiEdgeTexture *a1@<X1>, HGBitmapLoader **a2@<X8>)
{
  getOZShapeEdgeTextureLock();
  PCMutex::lock(&getOZShapeEdgeTextureLock(void)::sOZShapeEdgeTextureLock);
  OZShapeEdgeTexture::createHeliumNode(a1, a2);
  return PCMutex::unlock(&getOZShapeEdgeTextureLock(void)::sOZShapeEdgeTextureLock);
}

const void **PCCFRef<__CFArray const*>::~PCCFRef(const void **a1)
{
  v2 = *a1;
  if (v2)
  {
    CFRelease(v2);
  }

  return a1;
}

void HGArray<float,(HGFormat)7>::HGArray(uint64_t a1)
{
  *a1 = 0;
  *(a1 + 8) = 0;
  *(a1 + 12) = 7;
  HGArrayDataRef::allocate(a1);
}

void sub_2602F570C(_Unwind_Exception *exception_object)
{
  if (*v1)
  {
    HGArrayData::Release(*v1);
  }

  _Unwind_Resume(exception_object);
}

uint64_t OZShape::hitCheck(uint64_t a1, const CMTime *a2)
{
  if (OZChannelBase::isEnabled((a1 + 6800), 0, 1))
  {
    OZChannel::getValueAsInt((a1 + 1328), a2, 0.0);
  }

  return 0;
}

uint64_t OZShape::getCurveSamplesForOSC@<X0>(uint64_t a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X2>, __int128 *a4@<X3>, uint64_t *a5@<X8>)
{
  *a5 = 0;
  a5[1] = 0;
  a5[2] = 0;
  v10 = (a1 + 8);
  v44 = a1 + 8;
  PCMutex::lock((a1 + 8));
  v45 = 1;
  v11 = *(a3 + 80);
  v43[4] = *(a3 + 64);
  v43[5] = v11;
  v12 = *(a3 + 112);
  v43[6] = *(a3 + 96);
  v43[7] = v12;
  v13 = *(a3 + 16);
  v43[0] = *a3;
  v43[1] = v13;
  v14 = *(a3 + 48);
  v43[2] = *(a3 + 32);
  v43[3] = v14;
  v15 = *a2;
  v16 = *(a2 + 16);
  v17 = *(a2 + 64);
  v40[3] = *(a2 + 48);
  v40[4] = v17;
  v18 = *(a2 + 32);
  v40[1] = v16;
  v40[2] = v18;
  v40[0] = v15;
  v19 = *(a2 + 80);
  v41 = v19;
  if (v19)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v19);
  }

  v42 = *(a2 + 88);
  CurrentRenderParams = OZShape::getCurrentRenderParams(a1, v40);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v41);
  (*(*a1 + 64))(a1, a2, CurrentRenderParams, 0, 1);
  OSCContour = OZShape::getOSCContour(a1, a2, CurrentRenderParams, v43);
  v22 = OSCContour;
  v23 = OSCContour[27];
  v24 = OSCContour[28];
  if (v23 != v24 && OSCContour[30] != OSCContour[31] && OSCContour[24] != OSCContour[25])
  {
    v25 = (v24 - v23) >> 3;
    if (*(CurrentRenderParams + 168))
    {
      v26 = v25 + 1;
    }

    else
    {
      v26 = (v24 - v23) >> 3;
    }

    if (v26 >= 1)
    {
      for (i = 0; i != v26; ++i)
      {
        v35 = 0.0;
        v36 = 0.0;
        v38 = 0u;
        v39 = 0u;
        v28 = *(v22[27] + 8 * (i % v25));
        v29 = *(v22[30] + 8 * (i % v25));
        v30 = *(a3 + 120) + v28 * *(a3 + 96) + v29 * *(a3 + 104);
        v31 = (*(a3 + 24) + v28 * *a3 + v29 * *(a3 + 8)) / v30;
        v32 = (*(a3 + 56) + v28 * *(a3 + 32) + v29 * *(a3 + 40)) / v30;
        v35 = v31;
        v36 = v32;
        v37 = *(v22[24] + 8 * (i % v25));
        v33 = a4[1];
        v38 = *a4;
        v39 = v33;
        std::vector<OZShapeOSCCurveSample>::push_back[abi:ne200100](a5, &v35);
      }
    }
  }

  return PCMutex::unlock(v10);
}

void sub_2602F59A8(_Unwind_Exception *a1)
{
  PCLockSentry<PCMutex>::~PCLockSentry(v2 - 96);
  v4 = *v1;
  if (*v1)
  {
    *(v1 + 8) = v4;
    operator delete(v4);
  }

  _Unwind_Resume(a1);
}

uint64_t std::vector<OZShapeOSCCurveSample>::push_back[abi:ne200100](uint64_t *a1, uint64_t a2)
{
  v3 = a1[1];
  if (v3 >= a1[2])
  {
    result = std::vector<OZShapeOSCCurveSample>::__emplace_back_slow_path<OZShapeOSCCurveSample const&>(a1, a2);
  }

  else
  {
    *v3 = *a2;
    *(v3 + 16) = *(a2 + 16);
    *(v3 + 32) = *(a2 + 32);
    *(v3 + 48) = *(a2 + 48);
    result = v3 + 56;
  }

  a1[1] = result;
  return result;
}

uint64_t std::vector<OZShapeOSCCurveSample>::__emplace_back_slow_path<OZShapeOSCCurveSample const&>(uint64_t *a1, uint64_t a2)
{
  v2 = 0x6DB6DB6DB6DB6DB7 * ((a1[1] - *a1) >> 3);
  v3 = v2 + 1;
  if ((v2 + 1) > 0x492492492492492)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  if (0xDB6DB6DB6DB6DB6ELL * ((a1[2] - *a1) >> 3) > v3)
  {
    v3 = 0xDB6DB6DB6DB6DB6ELL * ((a1[2] - *a1) >> 3);
  }

  if ((0x6DB6DB6DB6DB6DB7 * ((a1[2] - *a1) >> 3)) >= 0x249249249249249)
  {
    v6 = 0x492492492492492;
  }

  else
  {
    v6 = v3;
  }

  v14 = a1;
  if (v6)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<PSParticleType::SourceBoundsCacheEntry>>(a1, v6);
  }

  v7 = 56 * v2;
  __p = 0;
  v11 = v7;
  *v7 = *a2;
  *(v7 + 16) = *(a2 + 16);
  *(v7 + 32) = *(a2 + 32);
  *(v7 + 48) = *(a2 + 48);
  v12 = 56 * v2 + 56;
  v13 = 0;
  std::vector<OZShapeOSCCurveSample>::__swap_out_circular_buffer(a1, &__p);
  v8 = a1[1];
  if (v12 != v11)
  {
    v12 = (v12 - v11 - 56) % 0x38uLL + v11;
  }

  if (__p)
  {
    operator delete(__p);
  }

  return v8;
}

void sub_2602F5B9C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, uint64_t a12)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t *std::vector<OZShapeOSCCurveSample>::__swap_out_circular_buffer(uint64_t *result, void *a2)
{
  v2 = *result;
  v3 = result[1];
  v4 = a2[1] + *result - v3;
  if (v3 != *result)
  {
    v5 = *result;
    v6 = a2[1] + *result - v3;
    do
    {
      *v6 = *v5;
      *(v6 + 16) = *(v5 + 16);
      *(v6 + 32) = *(v5 + 32);
      *(v6 + 48) = *(v5 + 48);
      v5 += 56;
      v6 += 56;
    }

    while (v5 != v3);
  }

  a2[1] = v4;
  v7 = *result;
  *result = v4;
  result[1] = v2;
  a2[1] = v7;
  v8 = result[1];
  result[1] = a2[2];
  a2[2] = v8;
  v9 = result[2];
  result[2] = a2[3];
  a2[3] = v9;
  *a2 = a2[1];
  return result;
}

BOOL OZShape::checkWindingOrder(OZShape *this, CMTime *a2, uint64_t a3, double *a4, int a5)
{
  v10 = *(this + 59);
  v11 = *(a3 + 168);
  if (!v10)
  {
    if (v11)
    {
      goto LABEL_6;
    }

    return 0;
  }

  if (!v11)
  {
    return 0;
  }

  if ((((v10[1] - *v10) >> 3) / 2) > 2)
  {
    goto LABEL_7;
  }

LABEL_6:
  if (!OZShape::isGeometricShape(this))
  {
    return 0;
  }

LABEL_7:
  v12 = OZShape::calculatePolygonArea(this, a2, a3, a4);
  v13 = v12 > 0.0;
  if (v12 > 0.0 && a5)
  {
    OZChannelCurve::reverseWindingOrder((this + 208));
    v13 = 1;
    (*(*this + 144))(this, 1, 1);
  }

  return v13;
}

double OZShape::calculatePolygonArea(uint64_t a1, CMTime *a2, uint64_t a3, double *a4)
{
  v65 = 0.0;
  v66 = 0.0;
  v63 = 0.0;
  v64 = 0.0;
  v60 = 0;
  v61 = 0;
  v62 = 0;
  v57 = 0;
  v58 = 0;
  v59 = 0;
  __p = 0;
  v55 = 0;
  v56 = 0;
  v52 = 0u;
  v53 = 0u;
  if (OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    std::vector<double>::reserve(&v60, 5uLL);
    std::vector<double>::reserve(&v57, 5uLL);
    std::vector<double>::reserve(&__p, 5uLL);
    v8 = -*(a3 + 200);
    v52.f64[0] = v8;
    v52.f64[1] = 0.0;
    *&v53 = 0;
    *(&v53 + 1) = 0x3FF0000000000000;
    if (a4)
    {
      PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
      v8 = v52.f64[0];
      v9 = *(&v53 + 1) > 0.0;
    }

    else
    {
      v9 = 1;
    }

    v50 = v8;
    std::vector<double>::push_back[abi:ne200100](&v60, &v50);
    v50 = v52.f64[1];
    std::vector<double>::push_back[abi:ne200100](&v57, &v50);
    v50 = *(&v53 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, &v50);
    v21 = *(a3 + 208);
    v52.f64[0] = 0.0;
    v52.f64[1] = v21;
    v53 = xmmword_260342700;
    if (a4)
    {
      PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
      v22 = v52.f64[0];
      v23 = *(&v53 + 1) > 0.0;
    }

    else
    {
      v23 = 1;
      v22 = 0.0;
    }

    v50 = v22;
    std::vector<double>::push_back[abi:ne200100](&v60, &v50);
    v50 = v52.f64[1];
    std::vector<double>::push_back[abi:ne200100](&v57, &v50);
    v50 = *(&v53 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, &v50);
    v52 = *(a3 + 200);
    *&v53 = 0;
    *(&v53 + 1) = 0x3FF0000000000000;
    if (a4)
    {
      PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
    }

    v24 = v9 && v23 && *(&v53 + 1) > 0.0;
    v50 = v52.f64[0];
    std::vector<double>::push_back[abi:ne200100](&v60, &v50);
    v50 = v52.f64[1];
    std::vector<double>::push_back[abi:ne200100](&v57, &v50);
    v50 = *(&v53 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, &v50);
    v25 = -*(a3 + 208);
    v52.f64[0] = 0.0;
    v52.f64[1] = v25;
    v53 = xmmword_260342700;
    if (!a4)
    {
      v26 = 1;
      v27.f64[0] = 0.0;
LABEL_56:
      v50 = v27.f64[0];
      std::vector<double>::push_back[abi:ne200100](&v60, &v50);
      v50 = v52.f64[1];
      std::vector<double>::push_back[abi:ne200100](&v57, &v50);
      v50 = *(&v53 + 1);
      std::vector<double>::push_back[abi:ne200100](&__p, &v50);
      LOBYTE(v16) = v24 && v26;
      goto LABEL_57;
    }

LABEL_54:
    PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
    v27.f64[0] = v52.f64[0];
    v26 = *(&v53 + 1) > 0.0;
    goto LABEL_56;
  }

  if (OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0) == 5)
  {
    std::vector<double>::reserve(&v60, 5uLL);
    std::vector<double>::reserve(&v57, 5uLL);
    std::vector<double>::reserve(&__p, 5uLL);
    v10 = vmulq_f64(*(a3 + 200), xmmword_260852E50);
    v52 = v10;
    v53 = xmmword_260342700;
    if (a4)
    {
      PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
      v10.f64[0] = v52.f64[0];
      v11 = *(&v53 + 1) > 0.0;
    }

    else
    {
      v11 = 1;
    }

    v50 = v10.f64[0];
    std::vector<double>::push_back[abi:ne200100](&v60, &v50);
    v50 = v52.f64[1];
    std::vector<double>::push_back[abi:ne200100](&v57, &v50);
    v50 = *(&v53 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, &v50);
    __asm { FMOV            V1.2D, #0.5 }

    v33 = vmulq_f64(*(a3 + 200), _Q1);
    v52 = v33;
    v53 = xmmword_260342700;
    if (a4)
    {
      PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
      v33.f64[0] = v52.f64[0];
      v34 = *(&v53 + 1) > 0.0;
    }

    else
    {
      v34 = 1;
    }

    v50 = v33.f64[0];
    std::vector<double>::push_back[abi:ne200100](&v60, &v50);
    v50 = v52.f64[1];
    std::vector<double>::push_back[abi:ne200100](&v57, &v50);
    v50 = *(&v53 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, &v50);
    v52 = vmulq_f64(*(a3 + 200), xmmword_2608560D0);
    v53 = xmmword_260342700;
    if (a4)
    {
      PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
    }

    v24 = v11 && v34 && *(&v53 + 1) > 0.0;
    v50 = v52.f64[0];
    std::vector<double>::push_back[abi:ne200100](&v60, &v50);
    v50 = v52.f64[1];
    std::vector<double>::push_back[abi:ne200100](&v57, &v50);
    v50 = *(&v53 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, &v50);
    __asm { FMOV            V1.2D, #-0.5 }

    v27 = vmulq_f64(*(a3 + 200), _Q1);
    v52 = v27;
    v53 = xmmword_260342700;
    if (!a4)
    {
      v26 = 1;
      goto LABEL_56;
    }

    goto LABEL_54;
  }

  OZChannelCurve::getEnabledVerticesList((a1 + 208), a2, &v50);
  v12 = ((v51 - *&v50) >> 4);
  std::vector<double>::reserve(&v60, v12);
  std::vector<double>::reserve(&v57, v12);
  std::vector<double>::reserve(&__p, v12);
  v13 = *&v50;
  if (v51 == *&v50)
  {
    LOBYTE(v16) = 1;
    if (v50 == 0.0)
    {
      goto LABEL_57;
    }

    goto LABEL_46;
  }

  v14 = 0;
  v15 = 1;
  v16 = 1;
  do
  {
    OZChannelCurve::getVertexValue(a1 + 208, v13[2 * v14], v13[2 * v14 + 1], a2, &v64, &v63);
    if (*(a3 + 172) != 2)
    {
      OZChannelCurve::getInputTangents((a1 + 208), *(*&v50 + 16 * v14), *(*&v50 + 16 * v14 + 8), a2, &v66, &v65);
      if (fabs(v66) >= 0.0000001 || fabs(v65) >= 0.0000001)
      {
        v17 = v66 + v64;
        v52.f64[0] = v66 + v64;
        v52.f64[1] = v63 + v65;
        v53 = xmmword_260342700;
        if (a4)
        {
          PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
          v17 = v52.f64[0];
          v18 = *(&v53 + 1) > 0.0;
        }

        else
        {
          v18 = 1;
        }

        v49 = v17;
        std::vector<double>::push_back[abi:ne200100](&v60, &v49);
        v49 = v52.f64[1];
        std::vector<double>::push_back[abi:ne200100](&v57, &v49);
        v49 = *(&v53 + 1);
        std::vector<double>::push_back[abi:ne200100](&__p, &v49);
        v16 &= v18;
      }
    }

    v19 = v64;
    v52.f64[0] = v64;
    v52.f64[1] = v63;
    v53 = xmmword_260342700;
    if (a4)
    {
      PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
      v19 = v52.f64[0];
      v20 = *(&v53 + 1) > 0.0;
    }

    else
    {
      v20 = 1;
    }

    v49 = v19;
    std::vector<double>::push_back[abi:ne200100](&v60, &v49);
    v49 = v52.f64[1];
    std::vector<double>::push_back[abi:ne200100](&v57, &v49);
    v49 = *(&v53 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, &v49);
    v16 &= v20;
    if (*(a3 + 172) != 2)
    {
      OZChannelCurve::getOutputTangents((a1 + 208), *(*&v50 + 16 * v14), *(*&v50 + 16 * v14 + 8), a2, &v66, &v65);
      if (fabs(v66) >= 0.0000001 || fabs(v65) >= 0.0000001)
      {
        v52.f64[0] = v66 + v64;
        v52.f64[1] = v63 + v65;
        v53 = xmmword_260342700;
        if (a4)
        {
          PCMatrix44Tmpl<double>::transform<double>(a4, v52.f64, v52.f64);
        }

        v16 = (v16 & 1) != 0 && *(&v53 + 1) > 0.0;
        v49 = v52.f64[0];
        std::vector<double>::push_back[abi:ne200100](&v60, &v49);
        v49 = v52.f64[1];
        std::vector<double>::push_back[abi:ne200100](&v57, &v49);
        v49 = *(&v53 + 1);
        std::vector<double>::push_back[abi:ne200100](&__p, &v49);
      }
    }

    v14 = v15;
    v13 = *&v50;
    ++v15;
  }

  while (v14 < (v51 - *&v50) >> 4);
  if (v50 != 0.0)
  {
LABEL_46:
    v51 = v13;
    operator delete(v13);
  }

LABEL_57:
  v36 = v60;
  v37 = (v61 - v60) >> 3;
  if (v37 <= 2)
  {
    v38 = 0.0;
  }

  else
  {
    v38 = 1.0;
  }

  v39 = __p;
  if (v37 >= 3 && (v16 & 1) != 0)
  {
    v40 = v57;
    v41 = v60;
    v42 = __p;
    v43 = (v61 - v60) >> 3;
    do
    {
      if (vabdd_f64(0.0, *v42) >= 0.0000001)
      {
        *v41 = *v41 / *v42;
        *v40 = *v40 / *v42;
      }

      ++v42;
      ++v41;
      ++v40;
      --v43;
    }

    while (v43);
    v44 = 0;
    v38 = 0.0;
    do
    {
      v45 = v36[v44];
      --v37;
      v46 = *(v57 + v44);
      if (v37)
      {
        v47 = v44 + 1;
      }

      else
      {
        v47 = 0;
      }

      ++v44;
      v38 = v38 + (v45 * *(v57 + v47) - v36[v47] * v46) * 0.5;
    }

    while (v37);
  }

  if (v39)
  {
    v55 = v39;
    operator delete(v39);
  }

  if (v57)
  {
    v58 = v57;
    operator delete(v57);
  }

  if (v60)
  {
    v61 = v60;
    operator delete(v60);
  }

  return v38;
}

void sub_2602F6634(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, void *__p, uint64_t a21, uint64_t a22, void *a23, uint64_t a24, uint64_t a25, void *a26, uint64_t a27)
{
  if (__p)
  {
    operator delete(__p);
  }

  if (a23)
  {
    operator delete(a23);
  }

  if (a26)
  {
    operator delete(a26);
  }

  _Unwind_Resume(exception_object);
}

uint64_t OZShape::setDirty(uint64_t this, char a2, int a3)
{
  v5 = this;
  if (a3)
  {
    this = PCMutex::lock((this + 8));
  }

  v6 = *(v5 + 2672);
  v6[1192] = a2;
  v6[1193] = a2;
  v6[1194] = a2;
  v7 = *(v5 + 2664);
  v7[1192] = a2;
  v7[1193] = a2;
  v7[1194] = a2;
  if (a3)
  {
    return PCMutex::unlock((v5 + 8));
  }

  return this;
}

uint64_t OZShape::checkConvexity(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v7 = 1;
  *(a4 + 185) = 1;
  if (!OZShape::isGeometricShape(a1))
  {
    if (*(a3 + 168) && OZChannel::getValueAsInt((a1 + 14280), MEMORY[0x277CC08F0], 0.0) && (v8 = *(a4 + 264), v9 = (*(a4 + 272) - v8) >> 4, v9 >= 3))
    {
      v10 = 2;
      v11 = *(a4 + 264);
      v12 = (*(a4 + 272) - v8) >> 4;
      while (v12)
      {
        v13 = v10 - 1;
        if (!--v12)
        {
          v13 = 0;
        }

        v14 = *(v8 + 16 * v13);
        v15 = vsubq_f64(*(v8 + 16 * (v10 % v9)), v14);
        v16 = *v11++;
        v17 = vsubq_f64(v16, v14);
        v18 = vmulq_f64(v15, vextq_s8(v17, v17, 8uLL));
        ++v10;
        if (vsubq_f64(v18, vdupq_laneq_s64(v18, 1)).f64[0] >= 0.0)
        {
          goto LABEL_10;
        }
      }

      v7 = *(a4 + 185);
    }

    else
    {
LABEL_10:
      v7 = 0;
      *(a4 + 185) = 0;
    }
  }

  return v7 & 1;
}

uint64_t OZShape::checkSelfIntersection(OZShape *a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v4 = 0;
  *(a4 + 186) = 0;
  if (*(a4 + 272) - *(a4 + 264) >= 0x31uLL)
  {
    if (OZShape::isGeometricShape(a1))
    {
      v4 = *(a4 + 186);
    }

    else
    {
      v4 = isSimplePolygon((a4 + 264)) ^ 1;
      *(a4 + 186) = v4;
    }
  }

  return v4 & 1;
}

uint64_t OZShape::transformShape(uint64_t a1, const CMTime *a2, double *a3, double *a4)
{
  OZChannelCurve::transformCurve(a1 + 208, a2, a3, a4);
  v5 = *(*a1 + 144);

  return v5(a1, 1, 1);
}

uint64_t OZShape::offsetShape(OZShape *this, CMTime *a2, double a3, double a4)
{
  OZChannelCurve::offsetCurve((this + 208), a2, a3, a4);
  v5 = *(*this + 144);

  return v5(this, 1, 1);
}

void OZShape::getRenderContourWithRoundness(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  PCMutex::lock((a1 + 8));
  isShapeContourAnimated = OZShape::isShapeContourAnimated(a1);
  v9 = (a1 + 2704);
  if (*(a3 + 1194) == 1)
  {
    for (i = *(a1 + 2720); i; i = *(a1 + 2720))
    {
      v11 = *v9;
      v12 = *(*v9 + 16);
      if (v12)
      {
        OZShapeContour::~OZShapeContour(v12);
        MEMORY[0x2666E9F00](v13, 0x10A0C409674A9C3);
        v11 = *(a1 + 2704);
        i = *(a1 + 2720);
      }

      *(v11 + 16) = 0;
      v14 = *(a1 + 2704);
      v16 = *v14;
      v15 = v14[1];
      *(v16 + 8) = v15;
      *v15 = v16;
      *(a1 + 2720) = i - 1;
      operator delete(v14);
    }
  }

  else
  {
    v17 = *(a1 + 2712);
    if (v17 != v9)
    {
      v18 = isShapeContourAnimated;
      do
      {
        v19 = v17[2];
        time1 = *a2;
        v20 = *v19;
        time2.epoch = *(v19 + 2);
        *&time2.value = v20;
        if (((CMTimeCompare(&time1, &time2) != 0) & v18) != 0 || *(a2 + 24) != *(v19 + 184))
        {
          goto LABEL_21;
        }

        v21 = v19 + 7;
        if (!a4)
        {
          if (PCMatrix44Tmpl<double>::isIdentity(v21))
          {
            goto LABEL_23;
          }

          goto LABEL_21;
        }

        v22 = 0;
        v23 = 0;
        v24 = a4;
LABEL_13:
        v25 = 0;
        while (vabdd_f64(*(v24 + v25 * 8), v21[v25]) < 0.0000001)
        {
          if (++v25 == 4)
          {
            v23 = v22 > 2;
            v21 += 4;
            v24 += 32;
            if (++v22 == 4)
            {
              goto LABEL_23;
            }

            goto LABEL_13;
          }
        }

        if (v23)
        {
LABEL_23:
          v27 = *v17;
          v26 = v17[1];
          *(v27 + 8) = v26;
          *v26 = v27;
          --*(a1 + 2720);
          operator delete(v17);
          operator new();
        }

LABEL_21:
        v17 = v17[1];
      }

      while (v17 != v9);
    }
  }

  OZShape::getReparametrizedContour(a1, a2, a3, 0);
}

uint64_t OZShape::isShapeContourAnimated(OZShape *this)
{
  if (OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    v2 = (this + 12072);
    goto LABEL_5;
  }

  if (OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0) == 5)
  {
    v2 = (this + 1480);
LABEL_5:
    if (!OZChannel::hasMoreThanOneKeypoint(v2))
    {

      return OZChannelFolder::hasMoreThanOneKeypoint((this + 12224));
    }

    return 1;
  }

  if (OZChannel::hasMoreThanOneKeypoint((this + 208)))
  {
    return 1;
  }

  v4 = *(*this + 152);

  return v4(this);
}

void OZShape::getReparametrizedContour(uint64_t a1, uint64_t a2, uint64_t a3, double *a4)
{
  PCMutex::lock((a1 + 8));
  isShapeContourAnimated = OZShape::isShapeContourAnimated(a1);
  if ((*(a3 + 1193) & 1) == 0)
  {
    v9 = *(a1 + 2736);
    if (v9 != (a1 + 2728))
    {
      v10 = isShapeContourAnimated;
      do
      {
        v11 = v9[2];
        time1 = *a2;
        v12 = *v11;
        time2.epoch = *(v11 + 2);
        *&time2.value = v12;
        if (((CMTimeCompare(&time1, &time2) != 0) & v10) == 0 && *(a2 + 24) == *(v11 + 184))
        {
          v14 = *v9;
          v13 = v9[1];
          *(v14 + 8) = v13;
          *v13 = v14;
          --*(a1 + 2744);
          operator delete(v9);
          operator new();
        }

        v9 = v9[1];
      }

      while (v9 != (a1 + 2728));
    }
  }

  OZShape::updateReparametrizedContour(a1, a2, a3, a4);
}

void OZShape::updateReparametrizedContour(uint64_t a1, uint64_t a2, uint64_t a3, double *a4)
{
  if (*(a3 + 1193) == 1)
  {
    while (1)
    {
      v7 = *(a1 + 2744);
      if (!v7)
      {
        break;
      }

      v8 = *(a1 + 2728);
      v9 = *(v8 + 16);
      if (v9)
      {
        OZShapeReparametrizedContour::~OZShapeReparametrizedContour(v9);
        MEMORY[0x2666E9F00]();
        v8 = *(a1 + 2728);
        v7 = *(a1 + 2744);
      }

      *(v8 + 16) = 0;
      v10 = *(a1 + 2728);
      v12 = *v10;
      v11 = v10[1];
      *(v12 + 8) = v11;
      *v11 = v12;
      *(a1 + 2744) = v7 - 1;
      operator delete(v10);
    }
  }

  v24 = 0x3FF0000000000000;
  v21 = 0x3FF0000000000000;
  *&v18[40] = 0x3FF0000000000000;
  *v18 = 0x3FF0000000000000;
  memset(&v18[8], 0, 32);
  v19 = 0u;
  v20 = 0u;
  v22 = 0u;
  v23 = 0u;
  if (*(a3 + 216) == 1)
  {
    if (a4 && v18 != a4)
    {
      for (i = 0; i != 16; i += 4)
      {
        v14 = &v18[i * 8];
        v15 = *&a4[i + 2];
        *v14 = *&a4[i];
        v14[1] = v15;
      }
    }
  }

  else
  {
    PCMatrix44Tmpl<double>::leftShear(v18, *(a3 + 264), *(a3 + 272));
    v17 = *(a3 + 248);
    v16 = *(a3 + 256);
    if (v17 != 1.0)
    {
      *v18 = vmulq_n_f64(*v18, v17);
      *&v18[16] = vmulq_n_f64(*&v18[16], v17);
    }

    if (v16 != 1.0)
    {
      *&v18[32] = vmulq_n_f64(*&v18[32], v16);
      v19 = vmulq_n_f64(v19, v16);
    }

    if (a4)
    {
      PCMatrix44Tmpl<double>::rightMult(v18, a4);
    }
  }

  operator new();
}

uint64_t OZShape::getOSCContour(uint64_t a1, uint64_t a2, uint64_t a3, _OWORD *a4)
{
  v8 = (a1 + 8);
  PCMutex::lock((a1 + 8));
  CachedContour = OZShape::getCachedContour(a1, a2, a3, a4);
  if (!CachedContour)
  {
    OZShape::updateContour();
  }

  PCMutex::unlock(v8);
  return CachedContour;
}

uint64_t OZShape::getCachedContour(OZShape *this, uint64_t a2, uint64_t a3, _OWORD *a4)
{
  if (a4)
  {
    v7 = a4[5];
    v40 = a4[4];
    *v41 = v7;
    v8 = a4[7];
    *&v41[16] = a4[6];
    *&v41[32] = v8;
    v9 = a4[1];
    *v38 = *a4;
    *&v38[16] = v9;
    v10 = a4[3];
    *&v38[32] = a4[2];
    v39 = v10;
  }

  else
  {
    *&v41[40] = 0x3FF0000000000000;
    *v41 = 0x3FF0000000000000;
    *&v38[40] = 0x3FF0000000000000;
    *v38 = 0x3FF0000000000000;
    memset(&v38[8], 0, 32);
    v39 = 0u;
    v40 = 0u;
    memset(&v41[8], 0, 32);
  }

  isShapeContourAnimated = OZShape::isShapeContourAnimated(this);
  v12 = this + 2680;
  if (*(a3 + 1192) == 1)
  {
    for (i = *(this + 337); i; i = *(this + 337))
    {
      v14 = *v12;
      v15 = *(*v12 + 16);
      if (v15)
      {
        OZShapeContour::~OZShapeContour(v15);
        MEMORY[0x2666E9F00](v16, 0x10A0C409674A9C3, v17, v18, v19, v20, v21, v22, *v38, *&v38[8], *&v38[16], *&v38[24], *&v38[32], *&v38[40], v39, *(&v39 + 1));
        v14 = *(this + 335);
        i = *(this + 337);
      }

      *(v14 + 16) = 0;
      v23 = *(this + 335);
      v25 = *v23;
      v24 = v23[1];
      *(v25 + 8) = v24;
      *v24 = v25;
      *(this + 337) = i - 1;
      operator delete(v23);
    }
  }

  else
  {
    v26 = *(this + 336);
    if (v26 != v12)
    {
      v27 = isShapeContourAnimated;
      do
      {
        v28 = v26[2];
        time1 = *a2;
        v29 = *v28;
        time2.epoch = *(v28 + 2);
        *&time2.value = v29;
        if (((CMTimeCompare(&time1, &time2) != 0) & v27) == 0)
        {
          v30 = 0;
          v31 = 0;
          v32 = v28 + 56;
          v33 = v38;
LABEL_14:
          v34 = 0;
          while (vabdd_f64(*(v32 + v34), *&v33[v34]) < 0.0000001)
          {
            v34 += 8;
            if (v34 == 32)
            {
              v31 = v30 > 2;
              v33 += 32;
              v32 += 32;
              if (++v30 != 4)
              {
                goto LABEL_14;
              }

              goto LABEL_20;
            }
          }

          if (!v31)
          {
            goto LABEL_21;
          }

LABEL_20:
          if (*(a2 + 24) == *(v28 + 184))
          {
            v37 = *v26;
            v36 = v26[1];
            *(v37 + 8) = v36;
            *v36 = v37;
            --*(this + 337);
            operator delete(v26);
            operator new();
          }
        }

LABEL_21:
        v26 = v26[1];
      }

      while (v26 != v12);
    }
  }

  return 0;
}

void sub_2602F9B74(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, void *__p, uint64_t a14)
{
  PCString::~PCString(&__p);
  MEMORY[0x2666E9F00](v15, v14);
  _Unwind_Resume(a1);
}

uint64_t OZShape::getContour(OZShape *this, const OZShapeRenderState *a2, OZShapeRenderParams *a3)
{
  v6 = (this + 8);
  PCMutex::lock((this + 8));
  CachedContour = OZShape::getCachedContour(this, a2, a3, 0);
  if (!CachedContour)
  {
    OZShape::updateContour();
  }

  PCMutex::unlock(v6);
  return CachedContour;
}

uint64_t OZShape::getRenderContour(uint64_t a1, uint64_t a2, uint64_t a3, _OWORD *a4)
{
  v8 = (a1 + 8);
  PCMutex::lock((a1 + 8));
  CachedContour = OZShape::getCachedContour(a1, a2, a3, a4);
  if (!CachedContour)
  {
    OZShape::updateContour();
  }

  PCMutex::unlock(v8);
  return CachedContour;
}

void OZShape::getReparametrizedContourLength(uint64_t a1, uint64_t a2, int a3, double *a4)
{
  v14 = a1 + 8;
  v15 = 0;
  if (a3)
  {
    PCMutex::lock((a1 + 8));
    v15 = 1;
  }

  v7 = *(a2 + 48);
  v11[2] = *(a2 + 32);
  v11[3] = v7;
  v11[4] = *(a2 + 64);
  v8 = *(a2 + 16);
  v11[0] = *a2;
  v11[1] = v8;
  v9 = *(a2 + 80);
  v12 = v9;
  if (v9)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v9);
  }

  v13 = *(a2 + 88);
  CurrentRenderParams = OZShape::getCurrentRenderParams(a1, v11);
  OZShape::getReparametrizedContour(a1, a2, CurrentRenderParams, a4);
}

void OZShape::getReparametrizedPointOnContour(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, int a7, double *a8)
{
  v18 = a1 + 8;
  v19 = 0;
  if (a7)
  {
    PCMutex::lock((a1 + 8));
    v19 = 1;
  }

  v11 = *(a2 + 48);
  v15[2] = *(a2 + 32);
  v15[3] = v11;
  v15[4] = *(a2 + 64);
  v12 = *(a2 + 16);
  v15[0] = *a2;
  v15[1] = v12;
  v13 = *(a2 + 80);
  v16 = v13;
  if (v13)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v13);
  }

  v17 = *(a2 + 88);
  CurrentRenderParams = OZShape::getCurrentRenderParams(a1, v15);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v16);
  OZShape::getReparametrizedContour(a1, a2, CurrentRenderParams, a8);
}

double PCMatrix44Tmpl<double>::rightMult(uint64_t a1, double *a2)
{
  for (i = 0; i != 128; i += 32)
  {
    v3 = (a1 + i);
    v4 = *(a1 + i);
    v5 = *(a1 + i + 8);
    v6 = *(a1 + i + 16);
    v7 = *(a1 + i + 24);
    *v3 = v4 * *a2 + v5 * a2[4] + v6 * a2[8] + v7 * a2[12];
    v3[1] = v4 * a2[1] + v5 * a2[5] + v6 * a2[9] + v7 * a2[13];
    v3[2] = v4 * a2[2] + v5 * a2[6] + v6 * a2[10] + v7 * a2[14];
    result = v4 * a2[3] + v5 * a2[7] + v6 * a2[11] + v7 * a2[15];
    v3[3] = result;
  }

  return result;
}

uint64_t OZShape::getRectangleFromCircleReparametrizedContour(OZShape *a1, CMTime *a2, uint64_t a3, uint64_t a4, double *a5, double *a6, double a7)
{
  v15 = *(a3 + 200);
  v14 = *(a3 + 208);
  v16 = *(a5 + 5);
  v103 = *(a5 + 4);
  v104 = v16;
  v17 = *(a5 + 7);
  v105 = *(a5 + 6);
  v106 = v17;
  v18 = *(a5 + 1);
  v99 = *a5;
  v100 = v18;
  v19 = *(a5 + 3);
  v101 = *(a5 + 2);
  v102 = v19;
  PCMatrix44Tmpl<double>::invert(&v99, &v99, 0.0);
  v20 = a5[12];
  v21 = a5[13];
  v22 = -(v15 * v20);
  v23 = a5[15];
  v24 = v23 + v14 * v21 - v15 * v20;
  v25 = a5[1];
  v26 = a5[3];
  v27 = a5[4];
  v28 = (v26 + v14 * v25 - v15 * *a5) / v24;
  v29 = v14 * a5[5];
  v30 = a5[7];
  v31 = (v30 + v29 - v15 * v27) / v24;
  v32 = v15 * v20;
  v33 = v23 + v32 + v14 * v21;
  v34 = v15 * *a5;
  v35 = (v26 + v34 + v14 * v25) / v33;
  v36 = (v30 + v15 * v27 + v29) / v33;
  v37 = -(v14 * v21);
  v38 = v23 + v32 + v37;
  v39 = -(v14 * v25);
  v40 = (v26 + v34 - v14 * v25) / v38;
  v41 = (v30 + v15 * v27 - v29) / v38;
  v42 = v23 + v22 + v37;
  v43 = (v26 + v39 - v34) / v42;
  v44 = (v30 + -(v15 * v27) - v29) / v42;
  v87 = v35 - v28;
  v97 = v36 - v31;
  v45 = sqrt(v87 * v87 + v97 * v97);
  v80 = v35;
  v81 = v36;
  v88 = v40 - v35;
  v89 = v41 - v36;
  v82 = v40;
  v83 = v41;
  v90 = v43 - v40;
  v91 = v44 - v41;
  v78 = v28;
  v79 = v31;
  v46 = v31 - v44;
  v47 = sqrt((v28 - v43) * (v28 - v43) + v46 * v46);
  v92 = sqrt(v88 * v88 + v89 * v89);
  v93 = sqrt(v90 * v90 + v91 * v91);
  *(a4 + 392) = v47 + v93 + v45 + v92;
  v48 = (v28 - v43) / v47 * a7;
  v49 = (v31 - v44) / v47 * a7;
  v96 = 2.0 / v47 * a7;
  v85 = v43;
  v98 = v43 + (v28 - v43) * 0.5;
  std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
  v86 = v44;
  v98 = v44 + v46 * 0.5;
  std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
  v98 = 0.0;
  std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
  v50 = a7 + 0.0;
  v84 = v47;
  v51 = v47 * 0.5;
  if (v51 >= a7)
  {
    do
    {
      v98 = v48 + *(*(a4 + 224) - 8);
      std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
      v98 = v49 + *(*(a4 + 248) - 8);
      std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
      v98 = v96 + *(*(a4 + 200) - 8);
      std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
      v50 = v50 + a7;
    }

    while (v50 <= v51);
  }

  v94 = v49;
  v95 = v48;
  v52 = v50 - v51;
  v53 = v87 / v45 * a7;
  v54 = v97 / v45 * a7;
  v55 = 1.0 / v45 * a7;
  if (vabdd_f64(v50, v51) >= 0.0000001)
  {
    v98 = v78 + v53 * v52 / v45;
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
    v98 = v79 + v54 * v52 / v45;
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
    v98 = v55 * v52 / v45 + 1.0;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
    v52 = v52 + a7;
  }

  for (; v52 <= v45; v52 = v52 + a7)
  {
    v98 = v53 + *(*(a4 + 224) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
    v98 = v54 + *(*(a4 + 248) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
    v98 = v55 + *(*(a4 + 200) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
  }

  v56 = v52 - v45;
  v57 = v88 / v92 * a7;
  v58 = v89 / v92 * a7;
  v59 = 1.0 / v92 * a7;
  if (vabdd_f64(v52, v45) >= 0.0000001)
  {
    v98 = v80 + v57 * v56 / v92;
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
    v98 = v81 + v58 * v56 / v92;
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
    v98 = v59 * v56 / v92 + 2.0;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
    v56 = v56 + a7;
  }

  for (; v56 <= v92; v56 = v56 + a7)
  {
    v98 = v57 + *(*(a4 + 224) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
    v98 = v58 + *(*(a4 + 248) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
    v98 = v59 + *(*(a4 + 200) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
  }

  v60 = v56 - v92;
  v61 = v90 / v93 * a7;
  v62 = v91 / v93 * a7;
  v63 = 1.0 / v93 * a7;
  if (vabdd_f64(v56, v92) < 0.0000001)
  {
    goto LABEL_15;
  }

  v98 = v82 + v61 * v60 / v93;
  std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
  v98 = v83 + v62 * v60 / v93;
  std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
  for (i = v63 * v60 / v93 + 3.0; ; i = v63 + *(*(a4 + 200) - 8))
  {
    v98 = i;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
    v60 = v60 + a7;
LABEL_15:
    if (v60 > v93)
    {
      break;
    }

    v98 = v61 + *(*(a4 + 224) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
    v98 = v62 + *(*(a4 + 248) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
  }

  v65 = v60 - v93;
  if (vabdd_f64(v60, v93) >= 0.0000001)
  {
    v66 = v95;
    v98 = v85 + v95 * v65 / v84;
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
    v67 = v94;
    v98 = v86 + v94 * v65 / v84;
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
    v68 = v96;
    v69 = v96 * v65 / v84 + 4.0;
    goto LABEL_20;
  }

  v67 = v94;
  v66 = v95;
  v68 = v96;
  while (v65 <= v51)
  {
    v98 = v66 + *(*(a4 + 224) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v98);
    v98 = v67 + *(*(a4 + 248) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v98);
    v69 = v68 + *(*(a4 + 200) - 8);
LABEL_20:
    v98 = v69;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
    v65 = v65 + a7;
  }

  if (vabdd_f64(v65, v51) >= 0.0000001)
  {
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), *(a4 + 216));
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), *(a4 + 240));
    v98 = 5.0;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v98);
  }

  if (!PCMatrix44Tmpl<double>::isIdentity(a5))
  {
    v70 = *(a4 + 216);
    v71 = *(a4 + 224) - v70;
    if (v71)
    {
      v72 = v71 >> 3;
      v73 = *(a4 + 240);
      if (v72 <= 1)
      {
        v72 = 1;
      }

      do
      {
        v74 = *(&v106 + 1) + *v70 * *&v105 + *v73 * *(&v105 + 1);
        v75 = (*(&v102 + 1) + *v70 * *&v101 + *v73 * *(&v101 + 1)) / v74;
        *v70 = (*(&v100 + 1) + *v70 * *&v99 + *v73 * *(&v99 + 1)) / v74;
        ++v70;
        *v73++ = v75;
        --v72;
      }

      while (v72);
    }
  }

  v76 = 1;
  *(a4 + 185) = 1;
  if (a6)
  {
    v76 = PCMatrix44Tmpl<double>::isIdentity(a6) || !OZShape::checkWindingOrder(a1, a2, a3, a6, 0);
  }

  *(a4 + 187) = v76;
  return a4;
}

uint64_t OZShape::getRectangleReparametrizedContour(OZShape *a1, CMTime *a2, uint64_t a3, uint64_t a4, double *a5, double *a6, double a7)
{
  v14 = *(a3 + 200) * 0.5;
  v15 = *(a3 + 208) * 0.5;
  v16 = *(a5 + 5);
  v95 = *(a5 + 4);
  v96 = v16;
  v17 = *(a5 + 7);
  v97 = *(a5 + 6);
  v98 = v17;
  v18 = *(a5 + 1);
  v91 = *a5;
  v92 = v18;
  v19 = *(a5 + 3);
  v93 = *(a5 + 2);
  v94 = v19;
  PCMatrix44Tmpl<double>::invert(&v91, &v91, 0.0);
  v20 = a5[12];
  v21 = a5[13];
  v22 = -(v14 * v20);
  v23 = a5[15];
  v24 = v23 + v15 * v21 - v14 * v20;
  v25 = a5[1];
  v26 = a5[3];
  v27 = a5[4];
  v28 = (v26 + v15 * v25 - v14 * *a5) / v24;
  v29 = v15 * a5[5];
  v30 = a5[7];
  v31 = (v30 + v29 - v14 * v27) / v24;
  v32 = v14 * v20;
  v33 = v23 + v32 + v15 * v21;
  v34 = v14 * *a5;
  v35 = (v26 + v34 + v15 * v25) / v33;
  v36 = (v30 + v14 * v27 + v29) / v33;
  v37 = -(v15 * v21);
  v38 = v23 + v32 + v37;
  v39 = -(v15 * v25);
  v40 = (v26 + v34 - v15 * v25) / v38;
  v41 = (v30 + v14 * v27 - v29) / v38;
  v42 = v23 + v22 + v37;
  v43 = (v26 + v39 - v34) / v42;
  v44 = (v30 + -(v14 * v27) - v29) / v42;
  v45 = v35 - v28;
  v46 = v36 - v31;
  v47 = sqrt(v45 * v45 + v46 * v46);
  v77 = v35;
  v78 = v36;
  v83 = v40 - v35;
  v84 = v41 - v36;
  v48 = sqrt(v83 * v83 + v84 * v84);
  v79 = v40;
  v80 = v41;
  v85 = v43 - v40;
  v86 = v44 - v41;
  v49 = sqrt(v85 * v85 + v86 * v86);
  v81 = v43;
  v82 = v44;
  v87 = v28 - v43;
  v88 = v31 - v44;
  v89 = sqrt(v87 * v87 + v88 * v88);
  v90 = v28;
  *(a4 + 392) = v89 + v49 + v47 + v48;
  std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
  v90 = v31;
  std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
  v90 = 0.0;
  std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v90);
  v50 = a7 + 0.0;
  if (v47 >= a7)
  {
    v51 = v45 / v47 * a7;
    v52 = v46 / v47 * a7;
    do
    {
      v90 = v51 + *(*(a4 + 224) - 8);
      std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
      v90 = v52 + *(*(a4 + 248) - 8);
      std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
      v90 = 1.0 / v47 * a7 + *(*(a4 + 200) - 8);
      std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v90);
      v50 = v50 + a7;
    }

    while (v50 <= v47);
  }

  v53 = v50 - v47;
  v54 = v83 / v48 * a7;
  v55 = v84 / v48 * a7;
  v56 = 1.0 / v48 * a7;
  if (v53 == 0.0)
  {
    v57 = v89;
    goto LABEL_10;
  }

  v57 = v89;
  if (v53 >= v48)
  {
    goto LABEL_10;
  }

  v90 = v77 + v54 * v53 / v48;
  std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
  v90 = v78 + v55 * v53 / v48;
  std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
  for (i = v56 * v53 / v48 + 1.0; ; i = v56 + *(*(a4 + 200) - 8))
  {
    v90 = i;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v90);
    v53 = v53 + a7;
LABEL_10:
    if (v53 > v48)
    {
      break;
    }

    v90 = v54 + *(*(a4 + 224) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
    v90 = v55 + *(*(a4 + 248) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
  }

  v59 = v53 - v48;
  v60 = v85 / v49 * a7;
  v61 = v86 / v49 * a7;
  v62 = 1.0 / v49 * a7;
  if (v59 == 0.0 || v59 >= v49)
  {
    goto LABEL_16;
  }

  v90 = v79 + v60 * v59 / v49;
  std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
  v90 = v80 + v61 * v59 / v49;
  std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
  for (j = v62 * v59 / v49 + 2.0; ; j = v62 + *(*(a4 + 200) - 8))
  {
    v90 = j;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v90);
    v59 = v59 + a7;
LABEL_16:
    if (v59 > v49)
    {
      break;
    }

    v90 = v60 + *(*(a4 + 224) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
    v90 = v61 + *(*(a4 + 248) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
  }

  v64 = v59 - v49;
  v65 = v87 / v57 * a7;
  v66 = v88 / v57 * a7;
  v67 = 1.0 / v57 * a7;
  if (v64 == 0.0 || v64 >= v57)
  {
    goto LABEL_22;
  }

  v90 = v81 + v65 * v64 / v57;
  std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
  v90 = v82 + v66 * v64 / v57;
  std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
  for (k = v67 * v64 / v57 + 3.0; ; k = v67 + *(*(a4 + 200) - 8))
  {
    v90 = k;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v90);
    v64 = v64 + a7;
LABEL_22:
    if (v64 > v57)
    {
      break;
    }

    v90 = v65 + *(*(a4 + 224) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), &v90);
    v90 = v66 + *(*(a4 + 248) - 8);
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), &v90);
  }

  if (vabdd_f64(v64, v57) >= 0.0000001)
  {
    std::vector<double>::push_back[abi:ne200100]((a4 + 216), *(a4 + 216));
    std::vector<double>::push_back[abi:ne200100]((a4 + 240), *(a4 + 240));
    v90 = 4.0;
    std::vector<double>::push_back[abi:ne200100]((a4 + 192), &v90);
  }

  if (!PCMatrix44Tmpl<double>::isIdentity(a5))
  {
    v69 = *(a4 + 216);
    v70 = *(a4 + 224) - v69;
    if (v70)
    {
      v71 = v70 >> 3;
      v72 = *(a4 + 240);
      if (v71 <= 1)
      {
        v71 = 1;
      }

      do
      {
        v73 = *(&v98 + 1) + *v69 * *&v97 + *v72 * *(&v97 + 1);
        v74 = (*(&v94 + 1) + *v69 * *&v93 + *v72 * *(&v93 + 1)) / v73;
        *v69 = (*(&v92 + 1) + *v69 * *&v91 + *v72 * *(&v91 + 1)) / v73;
        ++v69;
        *v72++ = v74;
        --v71;
      }

      while (v71);
    }
  }

  v75 = 1;
  *(a4 + 185) = 1;
  if (a6)
  {
    v75 = PCMatrix44Tmpl<double>::isIdentity(a6) || !OZShape::checkWindingOrder(a1, a2, a3, a6, 0);
  }

  *(a4 + 187) = v75;
  return a4;
}

uint64_t OZShape::isRect(uint64_t a1, CMTime *a2)
{
  v19 = *MEMORY[0x277D85DE8];
  v2 = *(a1 + 472);
  if (!v2 || ((v2[1] - *v2) & 0x7FFFFFFF0) != 0x40 || !OZChannelCurve::isCurveFlattened((a1 + 208)))
  {
    return 0;
  }

  v17 = 0u;
  v18 = 0u;
  v15 = 0u;
  v16 = 0u;
  OZChannelCurve::getVerticesList((a1 + 208), &v13);
  v5 = v13;
  if (v14 == v13)
  {
    v8 = 0.0;
    v9 = 0.0;
  }

  else
  {
    v6 = 0;
    v7 = 1;
    do
    {
      OZChannelCurve::getVertexValue(a1 + 208, v5[2 * v6], v5[2 * v6 + 1], a2, &v17 + v6, &v15 + v6);
      v6 = v7;
      v5 = v13;
      ++v7;
    }

    while (v6 < (v14 - v13) >> 4);
    v8 = *(&v17 + 1);
    v9 = *&v17;
  }

  if (vabdd_f64(v9, v8) >= 0.0000001)
  {
    if (vabdd_f64(v9, *(&v18 + 1)) >= 0.0000001 || vabdd_f64(v8, *&v18) >= 0.0000001 || vabdd_f64(*&v15, *(&v15 + 1)) >= 0.0000001)
    {
      goto LABEL_21;
    }

    v12 = *&v16;
  }

  else
  {
    if (vabdd_f64(*&v18, *(&v18 + 1)) >= 0.0000001 || vabdd_f64(*(&v15 + 1), *&v16) >= 0.0000001)
    {
      goto LABEL_21;
    }

    v12 = *&v15;
  }

  if (vabdd_f64(v12, *(&v16 + 1)) < 0.0000001)
  {
    v10 = 1;
    goto LABEL_22;
  }

LABEL_21:
  v10 = 0;
LABEL_22:
  if (v5)
  {
    v14 = v5;
    operator delete(v5);
  }

  return v10;
}

uint64_t OZShape::getSamples(uint64_t a1, uint64_t a2, void *a3, void *a4)
{
  v8 = (a1 + 8);
  v19 = a1 + 8;
  PCMutex::lock((a1 + 8));
  v20 = 1;
  v9 = *(a2 + 48);
  v16[2] = *(a2 + 32);
  v16[3] = v9;
  v16[4] = *(a2 + 64);
  v10 = *(a2 + 16);
  v16[0] = *a2;
  v16[1] = v10;
  v11 = *(a2 + 80);
  v17 = v11;
  if (v11)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v11);
  }

  v18 = *(a2 + 88);
  CurrentRenderParams = OZShape::getCurrentRenderParams(a1, v16);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v17);
  if (OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0) != 4 && fabs(CurrentRenderParams[45]) >= 0.0000001)
  {
    OZShape::getRenderContourWithRoundness(a1, a2, CurrentRenderParams, 0);
  }

  Contour = OZShape::getContour(a1, a2, CurrentRenderParams);
  v14 = Contour;
  if ((Contour + 216) != a3)
  {
    std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(a3, *(Contour + 216), *(Contour + 224), (*(Contour + 224) - *(Contour + 216)) >> 3);
  }

  if ((v14 + 240) != a4)
  {
    std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(a4, *(v14 + 240), *(v14 + 248), (*(v14 + 248) - *(v14 + 240)) >> 3);
  }

  return PCMutex::unlock(v8);
}

void sub_2602FB554(_Unwind_Exception *a1)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v1 + 80));
  PCLockSentry<PCMutex>::~PCLockSentry(v2 - 80);
  _Unwind_Resume(a1);
}

void OZShapeContour::OZShapeContour(OZShapeContour *this, CMTime *a2)
{
  *(this + 3) = 0;
  *(this + 4) = 0;
  __asm { FMOV            V0.2D, #-1.0 }

  *(this + 40) = _Q0;
  *(this + 22) = 0x3FF0000000000000;
  *(this + 17) = 0x3FF0000000000000;
  *(this + 12) = 0x3FF0000000000000;
  *(this + 7) = 0x3FF0000000000000;
  *(this + 4) = 0u;
  *(this + 5) = 0u;
  *(this + 104) = 0u;
  *(this + 120) = 0u;
  *(this + 9) = 0u;
  *(this + 10) = 0u;
  *(this + 12) = 0u;
  *(this + 13) = 0u;
  *(this + 14) = 0u;
  *(this + 15) = 0u;
  *(this + 16) = 0u;
  *(this + 17) = 0u;
  *(this + 18) = 0u;
  *(this + 19) = 0u;
  *(this + 20) = 0u;
  *(this + 21) = 0u;
  *(this + 22) = 0u;
  *(this + 23) = 0u;
  v7 = *&a2->value;
  *(this + 2) = a2->epoch;
  *this = v7;
  *(this + 22) = 0x3FF0000000000000;
  *(this + 17) = 0x3FF0000000000000;
  *(this + 12) = 0x3FF0000000000000;
  *(this + 7) = 0x3FF0000000000000;
  *(this + 4) = 0u;
  *(this + 5) = 0u;
  *(this + 104) = 0u;
  *(this + 120) = 0u;
  *(this + 9) = 0u;
  *(this + 10) = 0u;
  *(this + 46) = 0x1000000;
}

void OZShapeReparametrizedContour::OZShapeReparametrizedContour(OZShapeReparametrizedContour *this, CMTime *a2)
{
  v3 = *a2;
  OZShapeContour::OZShapeContour(this, &v3);
  *(v2 + 464) = 0;
  *(v2 + 432) = 0u;
  *(v2 + 448) = 0u;
  *(v2 + 400) = 0u;
  *(v2 + 416) = 0u;
  operator new();
}

void sub_2602FB6C4(_Unwind_Exception *a1)
{
  MEMORY[0x2666E9F00](v2, 0x10E1C4011F1C4E7);
  v4 = *(v1 + 56);
  if (v4)
  {
    *(v1 + 57) = v4;
    operator delete(v4);
  }

  v5 = *(v1 + 53);
  if (v5)
  {
    *(v1 + 54) = v5;
    operator delete(v5);
  }

  v6 = *(v1 + 50);
  if (v6)
  {
    *(v1 + 51) = v6;
    operator delete(v6);
  }

  OZShapeContour::~OZShapeContour(v1);
  _Unwind_Resume(a1);
}

uint64_t OZShapeReparametrizedContour::OZShapeReparametrizedContour_contourImpl::getInstance(OZShapeReparametrizedContour::OZShapeReparametrizedContour_contourImpl *this)
{
  if (!OZShapeReparametrizedContour::OZShapeReparametrizedContour_contourImpl::_OZShapeReparametrizedContour_contour)
  {
    operator new();
  }

  return OZShapeReparametrizedContour::OZShapeReparametrizedContour_contourImpl::_OZShapeReparametrizedContour_contour;
}

char *std::vector<PCVector2<double>>::__assign_with_size[abi:ne200100]<PCVector2<double>*,PCVector2<double>*>(char **a1, __int128 *a2, __int128 *a3, unint64_t a4)
{
  v5 = a2;
  v7 = a1[2];
  result = *a1;
  if (a4 > (v7 - result) >> 4)
  {
    if (result)
    {
      a1[1] = result;
      operator delete(result);
      v7 = 0;
      *a1 = 0;
      a1[1] = 0;
      a1[2] = 0;
    }

    if (!(a4 >> 60))
    {
      v9 = v7 >> 3;
      if (v7 >> 3 <= a4)
      {
        v9 = a4;
      }

      if (v7 >= 0x7FFFFFFFFFFFFFF0)
      {
        v10 = 0xFFFFFFFFFFFFFFFLL;
      }

      else
      {
        v10 = v9;
      }

      std::vector<PCVector2<double>>::__vallocate[abi:ne200100](a1, v10);
    }

    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  v11 = a1[1];
  v12 = v11 - result;
  if (a4 <= (v11 - result) >> 4)
  {
    while (v5 != a3)
    {
      v18 = *v5++;
      *result = v18;
      result += 16;
    }

    a1[1] = result;
  }

  else
  {
    v13 = (a2 + v12);
    if (v11 != result)
    {
      do
      {
        v14 = *v5++;
        *result = v14;
        result += 16;
        v12 -= 16;
      }

      while (v12);
      v11 = a1[1];
    }

    v15 = v11;
    if (v13 != a3)
    {
      v15 = v11;
      v16 = v11;
      do
      {
        v17 = *v13++;
        *v16 = v17;
        v16 += 16;
        v15 += 16;
      }

      while (v13 != a3);
    }

    a1[1] = v15;
  }

  return result;
}

void PCMatrix44Tmpl<double>::leftShear(float64x2_t *a1, double a2, double a3)
{
  if (a2 != 0.0)
  {
      ;
    }

      ;
    }

    if (a2 < 1.57603231 && a2 > 1.56556034)
    {
      a2 = 1.56556034;
    }

    a2 = tan(a2);
    a3 = i;
  }

  if (a3 != 0.0)
  {
      ;
    }

      ;
    }

    v5 = 1.56556034;
    if (a3 >= 1.57603231 || a3 <= 1.56556034)
    {
      v5 = a3;
    }

    a3 = tan(v5);
    a2 = j;
  }

  v8 = a1[2];
  v7 = a1[3];
  v9 = a1[1];
  v10 = vaddq_f64(*a1, vmulq_n_f64(v8, a2));
  a1[2] = vaddq_f64(v8, vmulq_n_f64(*a1, a3));
  a1[3] = vaddq_f64(v7, vmulq_n_f64(v9, a3));
  *a1 = v10;
  a1[1] = vaddq_f64(v9, vmulq_n_f64(v7, a2));
}

BOOL PCMatrix44Tmpl<double>::invert(uint64_t a1, uint64_t a2, double a3)
{
  v5 = *(a2 + 64);
  v4 = *(a2 + 72);
  v3.i64[0] = *(a2 + 96);
  v6 = *(a2 + 104);
  v7 = v6 * v5 - v4 * *v3.i64;
  v8 = *(a2 + 112);
  v9 = *(a2 + 80);
  v10 = vmulq_f64(vextq_s8(v8, v8, 8uLL), v9);
  v11 = vsubq_f64(v10, vdupq_laneq_s64(v10, 1));
  v12 = vsubq_f64(vmulq_n_f64(v8, v4), vmulq_n_f64(v9, v6));
  v13 = vsubq_f64(vmulq_n_f64(v8, v5), vmulq_n_f64(v9, *v3.i64));
  v14 = *(a2 + 32);
  v15 = *(a2 + 48);
  v16 = vmulq_n_f64(v14, v11.f64[0]);
  v17 = vaddq_f64(vsubq_f64(vextq_s8(v16, v16, 8uLL), vmulq_n_f64(vzip2q_s64(v12, v13), v15.f64[0])), vmulq_laneq_f64(vzip1q_s64(v12, v13), v15, 1));
  v18 = vaddq_f64(vmulq_n_f64(v15, v7), vsubq_f64(vmulq_n_f64(v12, v14.f64[0]), vmulq_laneq_f64(v13, v14, 1)));
  v19 = *a2;
  v20 = *(a2 + 16);
  v21 = vmulq_f64(v17, *a2);
  v22 = vextq_s8(v20, v20, 8uLL);
  v23 = vmulq_f64(v18, v22);
  v24 = vsubq_f64(vaddq_f64(vdupq_laneq_s64(v23, 1), vsubq_f64(v21, vdupq_laneq_s64(v21, 1))), v23).f64[0];
  v25 = fabs(v24) >= a3 && v24 != 0.0;
  if (v25)
  {
    v26 = vmuld_lane_f64(v15.f64[0], v8, 1) - vmuld_lane_f64(v8.f64[0], v15, 1);
    v27 = vmuld_lane_f64(v8.f64[1], v14, 1) - vmuld_lane_f64(v6, v15, 1);
    v28 = vmuld_lane_f64(v8.f64[0], v14, 1) - v6 * v15.f64[0];
    v29 = vmuld_lane_f64(v14.f64[0], v8, 1) - vmuld_lane_f64(*v3.i64, v15, 1);
    v30 = vmulq_f64(v8, v14).f64[0] - *v3.i64 * v15.f64[0];
    v31 = v6 * v14.f64[0] - vmuld_lane_f64(*v3.i64, v14, 1);
    v32 = vmuld_lane_f64(v15.f64[0], v9, 1) - vmuld_lane_f64(v9.f64[0], v15, 1);
    *v3.i64 = vmuld_lane_f64(v9.f64[1], v14, 1) - vmuld_lane_f64(v4, v15, 1);
    v33 = vmuld_lane_f64(v9.f64[0], v14, 1) - v4 * v15.f64[0];
    v34 = vmuld_lane_f64(v14.f64[0], v9, 1) - vmuld_lane_f64(v5, v15, 1);
    v35 = vmulq_f64(v9, v14).f64[0] - v5 * v15.f64[0];
    v36 = v4 * v14.f64[0] - vmuld_lane_f64(v5, v14, 1);
    v37 = vmuld_lane_f64(v11.f64[0], v19, 1) - vmuld_lane_f64(v20.f64[0], v12, 1) + vmulq_f64(v12, v22).f64[0];
    v38 = vmulq_f64(v11, v19).f64[0] - vmuld_lane_f64(v20.f64[0], v13, 1) + vmulq_f64(v13, v22).f64[0];
    v39 = vmuld_lane_f64(v19.f64[0], v12, 1) - vmuld_lane_f64(v13.f64[1], v19, 1) + vmuld_lane_f64(v7, v20, 1);
    v40 = vmulq_f64(v12, v19).f64[0] - vmuld_lane_f64(v13.f64[0], v19, 1) + v7 * v20.f64[0];
    v41 = vmuld_lane_f64(v26, v19, 1) - v27 * v20.f64[0] + vmuld_lane_f64(v28, v20, 1);
    v42 = v27 * v19.f64[0] - vmuld_lane_f64(v29, v19, 1) + vmuld_lane_f64(v31, v20, 1);
    v43 = vmuld_lane_f64(v32, v19, 1) - *v3.i64 * v20.f64[0] + vmuld_lane_f64(v33, v20, 1);
    *v3.i64 = *v3.i64 * v19.f64[0] - vmuld_lane_f64(v34, v19, 1) + vmuld_lane_f64(v36, v20, 1);
    v44 = 1.0 / v24;
    *a1 = v44 * v17.f64[0];
    *(a1 + 8) = -(v37 * v44);
    *(a1 + 16) = v41 * v44;
    v17.f64[0] = v43;
    *(a1 + 24) = vmulq_n_f64(vnegq_f64(v17), v44);
    *(a1 + 40) = v38 * v44;
    *(a1 + 48) = -((v26 * v19.f64[0] - v29 * v20.f64[0] + vmuld_lane_f64(v30, v20, 1)) * v44);
    *(a1 + 56) = (v32 * v19.f64[0] - v34 * v20.f64[0] + vmuld_lane_f64(v35, v20, 1)) * v44;
    *(a1 + 64) = vmuld_lane_f64(v44, v18, 1);
    *(a1 + 72) = -(v39 * v44);
    *(a1 + 80) = v42 * v44;
    *(a1 + 88) = vmulq_n_f64(vnegq_f64(vzip1q_s64(v3, v18)), v44);
    *(a1 + 104) = v40 * v44;
    *(a1 + 112) = -((v28 * v19.f64[0] - vmuld_lane_f64(v30, v19, 1) + v31 * v20.f64[0]) * v44);
    *(a1 + 120) = (v33 * v19.f64[0] - vmuld_lane_f64(v35, v19, 1) + v36 * v20.f64[0]) * v44;
  }

  return v25;
}

uint64_t std::vector<PCVector2<double>>::__emplace_back_slow_path<PCVector2<double>>(uint64_t a1, _OWORD *a2)
{
  v2 = (*(a1 + 8) - *a1) >> 4;
  v3 = v2 + 1;
  if ((v2 + 1) >> 60)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  v6 = *(a1 + 16) - *a1;
  if (v6 >> 3 > v3)
  {
    v3 = v6 >> 3;
  }

  if (v6 >= 0x7FFFFFFFFFFFFFF0)
  {
    v7 = 0xFFFFFFFFFFFFFFFLL;
  }

  else
  {
    v7 = v3;
  }

  v14 = a1;
  if (v7)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<PCVector2<double>>>(a1, v7);
  }

  __p = 0;
  v11 = (16 * v2);
  *v11 = *a2;
  v12 = 16 * v2 + 16;
  v13 = 0;
  std::vector<PCVector2<double>>::__swap_out_circular_buffer(a1, &__p);
  v8 = *(a1 + 8);
  if (v12 != v11)
  {
    v12 += (v11 - v12 + 15) & 0xFFFFFFFFFFFFFFF0;
  }

  if (__p)
  {
    operator delete(__p);
  }

  return v8;
}

void sub_2602FBF6C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, uint64_t a12)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void OZShape::calcIntersectionForOutlineAtPoint(uint64_t a1, CMTime *a2, _DWORD *a3, float64x2_t *a4, double a5, double a6)
{
  v11 = a5 + -0.025;
  v117 = 0.0;
  v118 = 0.0;
  v115 = 0.0;
  v116 = 0.0;
  v113 = 0.0;
  v114 = 0.0;
  v112 = *a2;
  MaxParametricValue = OZChannelCurve::getMaxParametricValue((a1 + 208), &v112);
  v13 = vabdd_f64(a5, OZChannelCurve::getMinParametricValue((a1 + 208), &v112));
  if (v13 < 0.0000001 && a3[42])
  {
    v11 = MaxParametricValue + 0.975;
  }

  v14 = vabdd_f64(a5, MaxParametricValue);
  v15 = a5;
  if (v14 < 0.0000001)
  {
    if (a3[42])
    {
      v15 = MaxParametricValue;
    }

    else
    {
      v15 = a5;
    }
  }

  v16 = v15 + 0.025;
  OZChannelCurve::getCurveValueWithParameter((a1 + 208), &v112, v11, &v118, &v117);
  OZChannelCurve::getCurveValueWithParameter((a1 + 208), &v112, a5, &v116, &v115);
  OZChannelCurve::getCurveValueWithParameter((a1 + 208), &v112, v16, &v114, &v113);
  v17 = v116 - v118;
  v18 = v17 * (*(*a1 + 176))(a1);
  v19 = v115 - v117;
  v20 = v114 - v116;
  v21 = v20 * (*(*a1 + 176))(a1);
  v22 = sqrt(v18 * v18 + v19 * v19);
  v23 = -v19 / v22;
  v93 = v22;
  v94 = v19;
  v24 = v18 / v22;
  v25 = sqrt(v21 * v21 + (v113 - v115) * (v113 - v115));
  v98 = v24;
  v100 = -(v113 - v115) / v25;
  v95 = v25;
  v101 = v21 / v25;
  if ((a3[6] | 2) == 2)
  {
    v90 = v14;
    v91 = v21;
    v92 = v13;
    v26 = v118;
    v96 = v23;
    v27 = v23 * a6;
    v28 = v26 + v23 * a6 / (*(*a1 + 176))(a1);
    v29 = v116;
    v30 = v98 * a6;
    v31 = v98 * a6 + v117;
    v111.f64[0] = v28;
    v111.f64[1] = v31;
    v32 = v29 + v27 / (*(*a1 + 176))(a1) - v28;
    v33 = v98 * a6 + v115 - v31;
    *v110.i64 = v32;
    *&v110.i64[1] = v33;
    v34 = sqrt(v32 * v32 + v33 * v33);
    if (fabs(v34) >= 0.000000100000001)
    {
      *v110.i64 = v32 / v34;
      *&v110.i64[1] = v33 / v34;
    }

    v35 = v116;
    v36 = v100 * a6;
    v37 = v35 + v100 * a6 / (*(*a1 + 176))(a1);
    v38 = v114;
    v89 = a6;
    v39 = v101 * a6;
    v40 = v39 + v115;
    v109.f64[0] = v37;
    v109.f64[1] = v39 + v115;
    v87 = v39;
    v88 = v36;
    v41 = v38 + v36 / (*(*a1 + 176))(a1) - v37;
    v42 = v39 + v113 - v40;
    *v108.i64 = v41;
    *&v108.i64[1] = v42;
    v43 = sqrt(v41 * v41 + v42 * v42);
    if (fabs(v43) >= 0.000000100000001)
    {
      *v108.i64 = v41 / v43;
      *&v108.i64[1] = v42 / v43;
    }

    v107 = 0uLL;
    if (a3[6] || !PCAlgorithm::findIntersection(&v111, &v110, &v109, &v108, &v107))
    {
      a6 = v89;
      v44 = v19 / v93 * v89;
      v45 = v116;
      v106.f64[0] = v45 + v30 / (*(*a1 + 176))(a1);
      v106.f64[1] = v44 + v115;
      v46 = PCRect<double>::operator|=(a4, &v106);
      v47 = v116;
      v106.f64[0] = v47 + (v27 + v30) / (*(*a1 + 176))(a1, v46);
      v106.f64[1] = v44 + v30 + v115;
      v48 = PCRect<double>::operator|=(a4, &v106);
      v49 = v116;
      v106.f64[0] = v49 + (v30 - v27) / (*(*a1 + 176))(a1, v48);
      v106.f64[1] = v44 + v115 - v30;
      PCRect<double>::operator|=(a4, &v106);
    }

    else
    {
      PCRect<double>::operator|=(a4, &v107);
      a6 = v89;
    }

    v50 = -a6;
    v51 = v118;
    v52 = -(a6 * v96);
    v53 = v51 + v52 / (*(*a1 + 176))(a1);
    v54 = v116;
    v55 = v117 - a6 * v98;
    v106.f64[0] = v53;
    v106.f64[1] = v55;
    v56 = v54 + v52 / (*(*a1 + 176))(a1) - v53;
    v57 = v115 - a6 * v98 - v55;
    *v105.i64 = v56;
    *&v105.i64[1] = v57;
    v58 = sqrt(v56 * v56 + v57 * v57);
    if (fabs(v58) >= 0.000000100000001)
    {
      *v105.i64 = v56 / v58;
      *&v105.i64[1] = v57 / v58;
    }

    v59 = v116;
    v60 = v100 * v50;
    v61 = v59 + v100 * v50 / (*(*a1 + 176))(a1);
    v62 = v114;
    v63 = v101 * v50 + v115;
    v104.f64[0] = v61;
    v104.f64[1] = v63;
    v64 = v62 + v100 * v50 / (*(*a1 + 176))(a1) - v61;
    v65 = v101 * v50 + v113 - v63;
    *v103.i64 = v64;
    *&v103.i64[1] = v65;
    v66 = sqrt(v64 * v64 + v65 * v65);
    if (fabs(v66) >= 0.000000100000001)
    {
      *v103.i64 = v64 / v66;
      *&v103.i64[1] = v65 / v66;
    }

    v21 = v91;
    if (a3[6] || !PCAlgorithm::findIntersection(&v106, &v105, &v104, &v103, &v107))
    {
      v68 = -v91 / v95 * v50;
      v69 = v116;
      v102.f64[0] = v69 + v68 / (*(*a1 + 176))(a1);
      v102.f64[1] = v60 + v115;
      v70 = PCRect<double>::operator|=(a4, &v102);
      v71 = v116;
      v102.f64[0] = v71 + (v60 + v68) / (*(*a1 + 176))(a1, v70);
      v102.f64[1] = v60 + v101 * v50 + v115;
      PCRect<double>::operator|=(a4, &v102);
      v72 = v116;
      v102.f64[0] = v72 + (v88 + v68) / (*(*a1 + 176))(a1);
      v102.f64[1] = v60 + v87 + v115;
      v67 = &v102;
    }

    else
    {
      v67 = &v107;
    }

    PCRect<double>::operator|=(a4, v67);
    v13 = v92;
    v14 = v90;
    v23 = v96;
  }

  if ((a3[7] | 2) == 2 || (a3[8] | 2) == 2)
  {
    v73 = fabs(a6);
    if (v14 < 0.0000001 && !a3[42])
    {
      v74 = v73 * v98;
      v75 = v116;
      v99 = v73 * (v94 / v93);
      v111.f64[0] = v75 + v74 / (*(*a1 + 176))(a1);
      v111.f64[1] = v99 + v115;
      PCRect<double>::operator|=(a4, &v111);
      v97 = v116;
      v76 = v73 * v23;
      v111.f64[0] = v97 + (v73 * v23 + v74) / (*(*a1 + 176))(a1);
      v111.f64[1] = v99 + v74 + v115;
      v77 = PCRect<double>::operator|=(a4, &v111);
      v78 = v116;
      v111.f64[0] = v78 + (v74 - v76) / (*(*a1 + 176))(a1, v77);
      v111.f64[1] = v99 + v115 - v74;
      PCRect<double>::operator|=(a4, &v111);
    }

    if (v13 < 0.0000001 && !a3[42])
    {
      v79 = v73 * (-v21 / v95);
      v80 = v73 * v100;
      v81 = v116;
      v111.f64[0] = v81 + v79 / (*(*a1 + 176))(a1);
      v111.f64[1] = v73 * v100 + v115;
      v82 = PCRect<double>::operator|=(a4, &v111);
      v83 = v116;
      v84 = v73 * v101;
      v111.f64[0] = v83 + (v80 + v79) / (*(*a1 + 176))(a1, v82);
      v111.f64[1] = v80 + v84 + v115;
      v85 = PCRect<double>::operator|=(a4, &v111);
      v86 = v116;
      v111.f64[0] = v86 + (v79 - v80) / (*(*a1 + 176))(a1, v85);
      v111.f64[1] = v80 + v115 - v84;
      PCRect<double>::operator|=(a4, &v111);
    }
  }
}

void OZShape::drawOutlinePolygonsToHeliumNode(OZShape *this@<X0>, OZShapeRenderParams *a2@<X3>, uint64_t *a3@<X1>, int a4@<W2>, uint64_t a5@<X4>, int a6@<W5>, int a7@<W6>, int a8@<W7>, HGGLNode **a9@<X8>, double a10@<D0>, HGGLNode **a11, void *a12, float64_t *a13, HGArrayDataRef *a14)
{
  v22 = *a11;
  *a9 = *a11;
  if (v22)
  {
    (*(*v22 + 16))(v22);
  }

  if (OZShape::shouldRenderInPlace(this, a2))
  {
    HGGLNode::enableInplaceBlending(*a11);
  }

  else
  {
    if ((a6 & 1) == 0 && *(a2 + 30))
    {
      if (a10 >= 0.0 && a8)
      {
        HGGLNode::hglEnableBlending(*a11, 3, 1);
      }

      goto LABEL_13;
    }

    HGGLNode::hglEnableBlending(*a11, 3, 1);
  }

  if (a6)
  {
    v23 = 0;
    a3 = (a5 + 360);
    a7 = 1;
    goto LABEL_20;
  }

LABEL_13:
  v23 = a13;
  if (a10 < 0.0)
  {
    v24 = HGObject::operator new(0x1B0uLL);
    HGGLNode::HGGLNode(v24, 0);
    (*(*v24 + 120))(v24, 0, *a12);
    (*(**a12 + 136))(*a12, 0xFFFFFFFFLL, 4);
    HGGLNode::hglTexParameteri(v24, 0xDE1, 0x2801, 9729.0);
    HGGLNode::hglTexParameteri(v24, 0xDE1, 0x2800, 9729.0);
    HGGLNode::hglTexParameteri(v24, 0xDE1, 0x2802, 33071.0);
    HGGLNode::hglTexParameteri(v24, 0xDE1, 0x2803, 33071.0);
    HGGLNode::hglActiveTexture(v24, 192);
    v25 = *(a2 + 19);
    v26 = *(a2 + 16) * v25;
    v27 = v25 * *(a2 + 17);
    v28 = v25 * *(a2 + 18);
    v29 = fmaxf(fmaxf(v26, v27), v28) > 1.0;
    v30 = fminf(fminf(v26, v27), v28) < 0.0 || v29;
    v31 = HGObject::operator new(0x1B0uLL);
    HgcShapeSoftEdgeClr::HgcShapeSoftEdgeClr(v31);
    HGGLNode::addFragmentShader(v24, v31);
    shouldDrawSecondPassGradientInHelium = OZShape::shouldDrawSecondPassGradientInHelium(this, a4, a2);
    v33.n128_u32[0] = 1.0;
    v34.n128_u32[0] = 1.0;
    v35.n128_u32[0] = 1.0;
    v36.n128_u32[0] = 1.0;
    if (((shouldDrawSecondPassGradientInHelium | v30) & 1) == 0)
    {
      v36.n128_f32[0] = v25;
      v33.n128_f32[0] = v26;
      v34.n128_f32[0] = v27;
      v35.n128_f32[0] = v28;
    }

    (*(*v31 + 96))(v31, 0, v33, v34, v35, v36);
    HGGLNode::hglClearToBlack(v24);
    HGGLNode::hglEnableBlending(v24, 3, 1);
    HGArray<__simd128_float32_t,(HGFormat)28>::HGArray(&v38);
  }

LABEL_20:
}

void sub_2602FD108(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, uint64_t a14, HGArrayData *a15)
{
  HGObject::operator delete(v18);
  OZShapeVertexArrayData::~OZShapeVertexArrayData(&__p);
  (*(*v17 + 24))(v17);
  (*(*v16 + 24))(v16);
  if (v15)
  {
    (*(*v15 + 24))(v15);
  }

  _Unwind_Resume(a1);
}

void anonymous namespace::fillEdgeVertexArray(uint64_t *a1, float64_t *a2, HGArrayDataRef *this, int a4, int a5)
{
  v11 = (this + 24);
  v10 = *(this + 3);
  if (v10)
  {
    LODWORD(v10) = *(v10 + 8);
  }

  HGArray<__simd128_float32_t,(HGFormat)28>::reserve((this + 24), v10 - 1010580540 * ((a1[1] - *a1) >> 3));
  v12 = *(v11 + 2);
  if (v12)
  {
    LODWORD(v12) = *(v12 + 8);
  }

  HGArray<__simd128_float32_t,(HGFormat)28>::reserve((v11 + 4), v12 - 1010580540 * ((a1[1] - *a1) >> 3));
  if (*v11)
  {
    v15 = *(*v11 + 8);
  }

  else
  {
    v15 = 0;
  }

  v17 = *a1;
  v16 = a1[1];
  if ((-252645135 * ((v16 - *a1) >> 3)) >= 1)
  {
    v18 = 0;
    v13.i32[0] = 1115422720;
    v19 = 0.0;
    LODWORD(v14) = vdup_lane_s32(v13, 0).u32[0];
    if (a4)
    {
      v19 = 63.0;
    }

    LODWORD(v20) = 1115422720;
    *(&v20 + 1) = v19;
    DWORD2(v20) = 0;
    HIDWORD(v20) = 1.0;
    *(&v14 + 1) = v19;
    v21 = 0.0;
    v22 = 0.0;
    v23 = 120;
    v24 = 0.0;
    v25 = 0.0;
    v26 = 0.0;
    v27 = 0.0;
    v28 = 0.0;
    v29 = 0.0;
    while (1)
    {
      if ((*(v17 + v23 - 120) & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
      {
        v30 = *(v17 + v23 - 112);
        if ((*&v30 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
        {
          v31 = *(v17 + v23 - 104);
          if ((*&v31 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
          {
            v32 = *(v17 + v23 - 96);
            if ((*&v32 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
            {
              v33 = *(v17 + v23 - 88);
              if ((*&v33 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
              {
                v34 = *(v17 + v23 - 80);
                if ((*&v34 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                {
                  v35 = *(v17 + v23 - 72);
                  if ((*&v35 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                  {
                    v36 = *(v17 + v23 - 64);
                    if ((*&v36 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                    {
                      v37 = *(v17 + v23 - 56);
                      if ((*&v37 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                      {
                        v38 = *(v17 + v23 - 48);
                        if ((*&v38 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                        {
                          v39 = *(v17 + v23 - 40);
                          if ((*&v39 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                          {
                            v40 = *(v17 + v23 - 32);
                            if ((*&v40 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                            {
                              v41 = *(v17 + v23 - 24);
                              if ((*&v41 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                              {
                                v42 = *(v17 + v23 - 16);
                                if ((*&v42 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                                {
                                  break;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }

      v43 = v29;
      v44 = v28;
      v45 = v27;
      v46 = v26;
      v47 = v25;
      v48 = v24;
      v49 = v22;
      v50 = v21;
LABEL_27:
      ++v18;
      v23 += 136;
      v21 = v50;
      v22 = v49;
      v24 = v48;
      v25 = v47;
      v26 = v46;
      v27 = v45;
      v28 = v44;
      v29 = v43;
      if (v18 >= (-252645135 * ((v16 - v17) >> 3)))
      {
        goto LABEL_59;
      }
    }

    v80 = v20;
    v51 = *(v17 + v23 - 8);
    if ((*&v51 & 0x7FFFFFFFFFFFFFFFuLL) > 0x7FEFFFFFFFFFFFFFLL)
    {
      v43 = v29;
      v44 = v28;
      v45 = v27;
      v46 = v26;
      v47 = v25;
      v48 = v24;
      v49 = v22;
      v50 = v21;
LABEL_58:
      v20 = v80;
      goto LABEL_27;
    }

    v79 = v14;
    v52 = *(v17 + v23);
    if ((*&v52 & 0x7FFFFFFFFFFFFFFFuLL) > 0x7FEFFFFFFFFFFFFFLL)
    {
      v43 = v29;
      v44 = v28;
      v45 = v27;
      v46 = v26;
      v47 = v25;
      v48 = v24;
      v49 = v22;
      v50 = v21;
LABEL_57:
      v14 = v79;
      goto LABEL_58;
    }

    *&v53 = *(v17 + v23 - 120);
    v54 = v30;
    v84.i64[0] = __PAIR64__(LODWORD(v54), v53);
    v55 = v31;
    *&v56 = v32;
    v84.i64[1] = __PAIR64__(v56, LODWORD(v55));
    v73 = *&v56;
    v47 = v33;
    v48 = v34;
    v83.i64[0] = __PAIR64__(LODWORD(v48), LODWORD(v47));
    v49 = v35;
    v50 = v36;
    v83.i64[1] = __PAIR64__(LODWORD(v50), LODWORD(v49));
    v43 = v37;
    v44 = v38;
    v82.i64[0] = __PAIR64__(LODWORD(v44), LODWORD(v43));
    v45 = v39;
    v46 = v40;
    v82.i64[1] = __PAIR64__(LODWORD(v46), LODWORD(v45));
    v57 = v41;
    v58 = v42;
    v81.i64[0] = __PAIR64__(LODWORD(v58), LODWORD(v57));
    v59 = v51;
    v60 = v52;
    v81.i64[1] = __PAIR64__(LODWORD(v60), LODWORD(v59));
    if (v25 == *&v53 && v24 == v54 && v22 == v55 && v21 == v73 && v29 == v57 && v28 == v58 && v27 == v59 && v26 == v60)
    {
      if (a2)
      {
        PCMatrix44Tmpl<double>::transform<float>(a2, &v83, &v83);
        PCMatrix44Tmpl<double>::transform<float>(a2, &v82, &v82);
      }

      v74 = v83;
      *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v74;
      if (a5)
      {
        v61 = v83.f32[3];
LABEL_53:
        *&v67 = v61 * 63.0;
        *(&v67 + 1) = v61 * 63.0;
        *(&v67 + 2) = v61 * 0.0;
        *(&v67 + 3) = v61;
        *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4) = v67;
        v76 = v82;
        *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v76;
        *&v68 = vmul_n_f32(*&v79, v82.f32[3]);
        *(&v68 + 2) = v82.f32[3] * 0.0;
        HIDWORD(v68) = v82.i32[3];
        v77 = v68;
LABEL_56:
        *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4) = v77;
        v17 = *a1;
        v16 = a1[1];
        goto LABEL_57;
      }

      v63 = HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4);
      v64 = xmmword_2608585E0;
    }

    else
    {
      v62 = *(this + 3);
      if (v62)
      {
        v15 = *(v62 + 8);
      }

      else
      {
        v15 = 0;
      }

      if (a2)
      {
        PCMatrix44Tmpl<double>::transform<float>(a2, &v84, &v84);
        PCMatrix44Tmpl<double>::transform<float>(a2, &v83, &v83);
        PCMatrix44Tmpl<double>::transform<float>(a2, &v82, &v82);
        PCMatrix44Tmpl<double>::transform<float>(a2, &v81, &v81);
      }

      v75 = v84;
      *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v75;
      if (a5)
      {
        *&v65 = v84.f32[3] * 63.0;
        *(&v65 + 1) = v84.f32[3] * 63.0;
        *(&v65 + 2) = v84.f32[3] * 0.0;
        HIDWORD(v65) = v84.i32[3];
        *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4) = v65;
        v69 = v81;
        *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v69;
        *&v66 = vmul_n_f32(*&v79, v81.f32[3]);
        *(&v66 + 2) = v81.f32[3] * 0.0;
        HIDWORD(v66) = v81.i32[3];
        *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4) = v66;
        v70 = v83;
        *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v70;
        v61 = v83.f32[3];
        goto LABEL_53;
      }

      *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4) = xmmword_2608585E0;
      v71 = v81;
      *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v71;
      *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4) = v80;
      v72 = v83;
      *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v72;
      v63 = HGArray<__simd128_float32_t,(HGFormat)28>::append(v11 + 4);
      v64 = xmmword_2608585E0;
    }

    *v63 = v64;
    v78 = v82;
    *HGArray<__simd128_float32_t,(HGFormat)28>::append(v11) = v78;
    v77 = v80;
    goto LABEL_56;
  }

LABEL_59:
}

void OZShape::computeOpenStroke(uint64_t a1, const CMTime *a2, uint64_t a3, void *a4, double *a5, int a6, int a7, double a8)
{
  v190 = 0x3FF0000000000000;
  v187 = 0x3FF0000000000000;
  v184 = 0x3FF0000000000000;
  v181 = 1.0;
  v182 = 0u;
  v183 = 0u;
  v185 = 0u;
  v186 = 0u;
  v188 = 0u;
  v189 = 0u;
  *&v180[40] = 0x3FF0000000000000;
  *v180 = 0x3FF0000000000000;
  *&v177[40] = 0x3FF0000000000000;
  *v177 = 0x3FF0000000000000;
  memset(&v177[8], 0, 32);
  v178 = 0u;
  v179 = 0u;
  memset(&v180[8], 0, 32);
  v9 = a8 * 0.5;
  v105 = a8 * 0.5 < 4.0;
  v10 = a8 * 0.5 <= 4.0;
  v11 = a8 * 0.5 * 0.25 + 1.0;
  v12 = a8 * 0.5 * 0.4375 + 0.25;
  if (v105 || v9 == 4.0)
  {
    v13 = v11;
  }

  else
  {
    v13 = 2.0;
  }

  if (v10)
  {
    v14 = v12;
  }

  else
  {
    v14 = v9 + -2.0;
  }

  if (a4[28] == a4[27])
  {
    a4[43] = a4[42];
  }

  else
  {
    if (*(a3 + 1195) == 1)
    {
      a4[43] = a4[42];
      a4[46] = a4[45];
    }

    if (*(a3 + 13))
    {
      PCMatrix44Tmpl<double>::leftShear(v177, *(a3 + 264), *(a3 + 272));
      v22 = *(a3 + 248);
      v21 = *(a3 + 256);
      if (v22 != 1.0)
      {
        *v177 = vmulq_n_f64(*v177, v22);
        *&v177[16] = vmulq_n_f64(*&v177[16], v22);
      }

      if (v21 != 1.0)
      {
        *&v177[32] = vmulq_n_f64(*&v177[32], v21);
        v178 = vmulq_n_f64(v178, v21);
      }

      v172[4] = v179;
      v172[5] = *v180;
      v172[6] = *&v180[16];
      v172[7] = *&v180[32];
      v172[0] = *v177;
      v172[1] = *&v177[16];
      v172[2] = *&v177[32];
      v172[3] = v178;
      PCMatrix44Tmpl<double>::invert(v172, v172, 0.0);
      if (&v181 != a5)
      {
        for (i = 0; i != 16; i += 4)
        {
          v24 = (&v181 + i * 8);
          v25 = *&a5[i + 2];
          *v24 = *&a5[i];
          v24[1] = v25;
        }
      }

      PCMatrix44Tmpl<double>::rightMult(&v181, v172);
    }

    else
    {
      if (&v181 != a5)
      {
        for (j = 0; j != 16; j += 4)
        {
          v27 = (&v181 + j * 8);
          v28 = *&a5[j + 2];
          *v27 = *&a5[j];
          v27[1] = v28;
        }
      }

      *&v180[40] = 0x3FF0000000000000;
      *v180 = 0x3FF0000000000000;
      *&v177[40] = 0x3FF0000000000000;
      *v177 = 0x3FF0000000000000;
      memset(&v177[8], 0, 32);
      v178 = 0u;
      v179 = 0u;
      memset(&v180[8], 0, 32);
    }

    OZShape::computeOutlinePolygons(a1, a4 + 42, a4, a2, a3, v177, a6, a7, v9, 1, 1, 1u);
    v175 = 0;
    __p = 0;
    v176 = 0;
    OZShape::computeOutlinePolygons(a1, &__p, a4, a2, a3, v177, a6, a7, v9, 1, -1, 1u);
    v31 = a4[42];
    v30 = a4[43];
    v32 = __p;
    if (v30 != v31)
    {
      v33 = v175;
      if (v175 != __p)
      {
        for (k = 0; k != 128; k += 64)
        {
          v35 = *(v31 + k);
          v36 = *(v31 + k + 16);
          v37 = *(v31 + k + 48);
          v38 = &v172[k / 0x10];
          v38[2] = *(v31 + k + 32);
          v38[3] = v37;
          *v38 = v35;
          v38[1] = v36;
        }

        v39 = 0;
        v173 = *(v31 + 128);
        v40 = v30 - 136;
        do
        {
          v41 = *(v40 + v39);
          v42 = *(v40 + v39 + 16);
          v43 = *(v40 + v39 + 48);
          v44 = &v170[v39];
          v44[2] = *(v40 + v39 + 32);
          v44[3] = v43;
          *v44 = v41;
          v44[1] = v42;
          v39 += 64;
        }

        while (v39 != 128);
        v45 = 0;
        v171 = *(v30 - 8);
        do
        {
          v46 = *&v32[v45];
          v47 = *&v32[v45 + 2];
          v48 = *&v32[v45 + 6];
          v49 = &v168[v45 * 8];
          v49[2] = *&v32[v45 + 4];
          v49[3] = v48;
          *v49 = v46;
          v49[1] = v47;
          v45 += 8;
        }

        while (v45 != 16);
        v50 = 0;
        v169 = v32[16];
        v51 = (v33 - 17);
        do
        {
          v52 = *&v51[v50];
          v53 = *&v51[v50 + 16];
          v54 = *&v51[v50 + 48];
          v55 = &v166[v50];
          v55[2] = *&v51[v50 + 32];
          v55[3] = v54;
          *v55 = v52;
          v55[1] = v53;
          v50 += 64;
        }

        while (v50 != 128);
        v167 = *(v33 - 1);
        if (*(a3 + 32) == 1)
        {
          OZShape::computeRoundCaps(a1, a4 + 42, &__p, a2, a3, v172, v170, v168, v14, v166, &v181, 0);
        }

        if (*(a3 + 28) == 1)
        {
          OZShape::computeRoundCaps(a1, a4 + 42, &__p, a2, a3, v172, v170, v168, v14, v166, &v181, 1);
        }

        if (*(a3 + 32) == 2)
        {
          v32 = OZShape::computeBevelCaps(v14, v32, a4 + 42, &__p, v29, v172, v170, v168, v166, 0);
        }

        if (*(a3 + 28) == 2)
        {
          v32 = OZShape::computeBevelCaps(v14, v32, a4 + 42, &__p, v29, v172, v170, v168, v166, 1);
        }

        if (*(a3 + 32) == 3)
        {
          v32 = OZShape::computeArrowCaps(v14, v32, a4 + 42, &__p, v29, a3, v172, v170, v168, v166, 0);
        }

        if (*(a3 + 28) == 3)
        {
          v32 = OZShape::computeArrowCaps(v14, v32, a4 + 42, &__p, v29, a3, v172, v170, v168, v166, 1);
        }

        if (!*(a3 + 32))
        {
          v32 = OZShape::computeNormalCaps(v14, v32, a4 + 42, &__p, v29, v172, v170, v168, v166, 0, 0);
        }

        if (!*(a3 + 28))
        {
          v32 = OZShape::computeNormalCaps(v14, v32, a4 + 42, &__p, v29, v172, v170, v168, v166, 1, 0);
        }

        if (*(a3 + 32) == 4)
        {
          v32 = OZShape::computeNormalCaps(0.05, v32, a4 + 42, &__p, v29, v172, v170, v168, v166, 0, 1);
        }

        if (*(a3 + 28) == 4)
        {
          OZShape::computeNormalCaps(0.05, v32, a4 + 42, &__p, v29, v172, v170, v168, v166, 1, 1);
        }

        v56 = __p;
        v57 = v175;
        *(__p + 131) = 0;
        std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(a4 + 42, a4[43], v56, v57, 0xF0F0F0F0F0F0F0F1 * ((v57 - v56) >> 3));
        v58 = a4[42];
        if (a4[43] == v58)
        {
          v60 = a4 + 45;
        }

        else
        {
          v138 = a2;
          v59 = 0;
          v139 = 0;
          v60 = a4 + 45;
          v61 = 1;
          do
          {
            OZShapeEdgePolygon::transformPoints((v58 + 136 * v59), &v181);
            if (*(a3 + 176) == 1)
            {
              v164 = 0u;
              memset(v165, 0, 19);
              v162 = 0u;
              v163 = 0u;
              v160 = 0u;
              v161 = 0u;
              v158 = 0u;
              v159 = 0u;
              v165[19] = 1;
              *&v165[20] = 0;
              v62 = a4[42] + 136 * v59;
              v165[20] = *(v62 + 132);
              v165[23] = *(v62 + 135);
              v63 = *(v62 + 112);
              v158 = *(v62 + 96);
              v159 = v63;
              v64 = *(v62 + 80);
              v160 = *(v62 + 64);
              v161 = v64;
              v144 = *(v62 + 120);
              v147 = *(v62 + 88);
              v64.i64[1] = *(v62 + 96);
              v141 = *(v62 + 64);
              v140 = *(v62 + 72);
              v64.i64[0] = *(v62 + 104);
              v142 = v64;
              v65 = OZShapeEdgePolygon::checkWindingOrder(v62);
              v66.f64[0] = v144;
              v67.f64[0] = v140;
              v67.f64[1] = v144;
              v66.f64[1] = v141;
              v68 = vmulq_f64(v66, v67);
              v69 = vmulq_f64(v147, vzip1q_s64(v142, v147));
              if (v65)
              {
                v70 = 1.0;
              }

              else
              {
                v70 = -1.0;
              }

              v71 = vdivq_f64(vsubq_f64(v68, v69), vdupq_lane_s64(COERCE__INT64(v144 * v147.f64[0]), 0));
              v72 = vdup_n_s32(v144 * v147.f64[0] < 0.0);
              v73.i64[0] = v72.u32[0];
              v73.i64[1] = v72.u32[1];
              v74 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v73, 0x3FuLL)), vnegq_f64(v71), v71);
              v75 = sqrt(vaddvq_f64(vmulq_f64(v74, v74)));
              v76 = a4[42];
              v77 = v76 + 136 * v59;
              v78 = *(v77 + 80);
              v162 = *(v77 + 64);
              v163 = v78;
              v74.f64[0] = -v74.f64[0];
              v79 = vmulq_n_f64(vmulq_n_f64(v74, v70), v13 / v75);
              v162 = vaddq_f64(*(v77 + 64), vmulq_n_f64(v79, fabs(*(v77 + 88))));
              v80 = *(v77 + 112);
              v164 = *(v77 + 96);
              *v165 = v80;
              v164 = vaddq_f64(*(v77 + 96), vmulq_n_f64(v79, fabs(*(v77 + 120))));
              if (v61 != 1 && *(v77 + 131) == 1)
              {
                v157[19] = 1;
                *&v157[20] = v165[20];
                v150 = v158;
                v151 = v159;
                v152 = v158;
                v153 = v159;
                v156 = 0u;
                memset(v157, 0, 19);
                v154 = v164;
                v155 = *v165;
                v81 = a4[46];
                v82 = *(v81 - 56);
                v156 = *(v81 - 72);
                *v157 = v82;
                if (*(v77 + 133) == 1)
                {
                  v82.n128_f64[0] = v13;
                  OZShape::subdivideTriangle(a1, 1, v138, a3, a4 + 45, &v150, v81 - 136, v158.f64, v82, &v181, v165[20] ^ 1, 1u);
                }

                else
                {
                  std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4 + 45, &v150);
                }

                v76 = a4[42];
              }

              if ((*(v76 + 136 * v59 + 131) & 1) == 0)
              {
                v139 = -252645135 * ((a4[46] - a4[45]) >> 3);
              }

              std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4 + 45, &v158);
            }

            v59 = v61;
            v58 = a4[42];
            v10 = 0xF0F0F0F0F0F0F0F1 * ((a4[43] - v58) >> 3) > v61++;
          }

          while (v10);
          v84 = a4[45];
          v83 = a4[46];
          if (v83 != v84 && v139)
          {
            v85 = v84 + 136 * v139;
            *&v165[16] = 0x1000000;
            *&v157[16] = 0x1000000;
            v86 = v84[1];
            v158 = *v84;
            v159 = v86;
            v87 = v84[1];
            v160 = *v84;
            v161 = v87;
            v88 = v84[7];
            v162 = v84[6];
            v163 = v88;
            v89 = *(v85 + 7);
            v164 = *(v85 + 6);
            *v165 = v89;
            v90 = *(v85 - 88);
            v150 = *(v85 - 104);
            v151 = v90;
            v91 = *(v85 - 88);
            v152 = *(v85 - 104);
            v153 = v91;
            v92 = *(&v83[-4] + 8);
            v154 = *(v83 - 72);
            v155 = v92;
            v93 = *(v85 - 56);
            v156 = *(v85 - 72);
            *v157 = v93;
            std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4 + 45, &v158);
            std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4 + 45, &v150);
          }
        }

        if (*(a3 + 176) == 1)
        {
          if (*(a3 + 28) != 4)
          {
            goto LABEL_103;
          }

          v95 = a4[42];
          v94 = a4[43];
          if (v94 == v95)
          {
            goto LABEL_103;
          }

          v96 = 0;
          v97 = 1;
          do
          {
            v98 = v95 + 136 * v96;
            if (*(v98 + 134) == 1)
            {
              v164 = 0u;
              memset(v165, 0, 19);
              v162 = 0u;
              v163 = 0u;
              v160 = 0u;
              v161 = 0u;
              v158 = 0u;
              v159 = 0u;
              v165[19] = 1;
              *&v165[20] = 0;
              v165[23] = *(v98 + 135);
              v99 = *(v98 + 16);
              v158 = *v98;
              v159 = v99;
              v100 = *(v98 + 112);
              v160 = *(v98 + 96);
              v161 = v100;
              v101 = *(v98 + 24);
              v100.i64[0] = *(v98 + 120);
              v102 = v101 * *v100.i64;
              v103 = (v101 * *(v98 + 96) - *v100.i64 * *v98) / (v101 * *v100.i64);
              v104 = (v101 * *(v98 + 104) - *v100.i64 * *(v98 + 8)) / (v101 * *v100.i64);
              v105 = v102 < 0.0;
              if (v102 >= 0.0)
              {
                v106 = v103;
              }

              else
              {
                v106 = -v103;
              }

              if (v105)
              {
                v107.f64[0] = -v104;
              }

              else
              {
                v107.f64[0] = v104;
              }

              v108 = *(v98 + 112);
              v162 = *(v98 + 96);
              v163 = v108;
              v145 = v13 / sqrt(v106 * v106 + v107.f64[0] * v107.f64[0]);
              v148 = v106;
              v143 = v107.f64[0];
              v107.f64[1] = -v106;
              v109 = vmulq_n_f64(v107, v145);
              v162 = vaddq_f64(*(v98 + 96), vmulq_n_f64(v109, fabs(*(v98 + 120))));
              v110 = *(v98 + 16);
              v164 = *v98;
              *v165 = v110;
              v164 = vaddq_f64(*v98, vmulq_n_f64(v109, fabs(*(v98 + 24))));
              std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v60, &v158);
              if (v165[23] == 1)
              {
                v111.f64[0] = -v143;
                v112 = a4[42] + 136 * v96;
                v113 = *(v112 + 112);
                v111.f64[1] = v148;
                v162 = *(v112 + 96);
                v163 = v113;
                v114 = vmulq_n_f64(v111, v145);
                v162 = vaddq_f64(*(v112 + 96), vmulq_n_f64(v114, fabs(*(v112 + 120))));
                v115 = *(v112 + 16);
                v164 = *v112;
                *v165 = v115;
                v164 = vaddq_f64(*v112, vmulq_n_f64(v114, fabs(*(v112 + 24))));
                std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v60, &v158);
              }

              v95 = a4[42];
              v94 = a4[43];
            }

            v96 = v97;
            v10 = 0xF0F0F0F0F0F0F0F1 * ((v94 - v95) >> 3) > v97++;
          }

          while (v10);
          if (*(a3 + 176))
          {
LABEL_103:
            if (*(a3 + 32) == 4)
            {
              v117 = a4[42];
              v116 = a4[43];
              if (v116 != v117)
              {
                v118 = 0;
                v119 = 1;
                do
                {
                  v120 = v117 + 136 * v118;
                  if (*(v120 + 134) == 1)
                  {
                    v164 = 0u;
                    memset(v165, 0, 19);
                    v162 = 0u;
                    v163 = 0u;
                    v160 = 0u;
                    v161 = 0u;
                    v158 = 0u;
                    v159 = 0u;
                    v165[19] = 1;
                    *&v165[20] = 0;
                    v165[23] = *(v120 + 135);
                    v121 = *(v120 + 80);
                    v158 = *(v120 + 64);
                    v159 = v121;
                    v122 = *(v120 + 48);
                    v160 = *(v120 + 32);
                    v161 = v122;
                    v123.f64[0] = *(v120 + 88);
                    v122.i64[0] = *(v120 + 72);
                    v124.f64[0] = *(v120 + 40);
                    v125 = *(v120 + 56);
                    v126 = v123.f64[0] * v125.f64[0];
                    v124.f64[1] = v123.f64[0];
                    v123.f64[1] = *(v120 + 32);
                    v127 = vdivq_f64(vsubq_f64(vmulq_f64(v125, vzip1q_s64(v122, v125)), vmulq_f64(v123, v124)), vdupq_lane_s64(COERCE__INT64(v123.f64[0] * v125.f64[0]), 0));
                    *&v124.f64[0] = vdup_n_s32(v126 < 0.0);
                    v128.i64[0] = LODWORD(v124.f64[0]);
                    v128.i64[1] = HIDWORD(v124.f64[0]);
                    v129 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v128, 0x3FuLL)), vnegq_f64(v127), v127);
                    v130 = *(v120 + 48);
                    v162 = *(v120 + 32);
                    v163 = v130;
                    v146 = v13 / sqrt(vaddvq_f64(vmulq_f64(v129, v129)));
                    v149 = v129;
                    v129.f64[0] = -v129.f64[0];
                    v131 = vmulq_n_f64(v129, v146);
                    v162 = vaddq_f64(*(v120 + 32), vmulq_n_f64(v131, fabs(*(v120 + 56))));
                    v132 = *(v120 + 80);
                    v164 = *(v120 + 64);
                    *v165 = v132;
                    v164 = vaddq_f64(*(v120 + 64), vmulq_n_f64(v131, fabs(*(v120 + 88))));
                    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v60, &v158);
                    if (v165[23] == 1)
                    {
                      v133 = a4[42] + 136 * v118;
                      v134 = *(v133 + 48);
                      v162 = *(v133 + 32);
                      v163 = v134;
                      v135.f64[0] = v149.f64[0];
                      v135.f64[1] = vnegq_f64(v149).f64[1];
                      v136 = vmulq_n_f64(v135, v146);
                      v162 = vaddq_f64(*(v133 + 32), vmulq_n_f64(v136, fabs(*(v133 + 56))));
                      v137 = *(v133 + 80);
                      v164 = *(v133 + 64);
                      *v165 = v137;
                      v164 = vaddq_f64(*(v133 + 64), vmulq_n_f64(v136, fabs(*(v133 + 88))));
                      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v60, &v158);
                    }

                    v117 = a4[42];
                    v116 = a4[43];
                  }

                  v118 = v119;
                  v10 = 0xF0F0F0F0F0F0F0F1 * ((v116 - v117) >> 3) > v119++;
                }

                while (v10);
              }
            }
          }
        }

        *(a3 + 1195) = 0;
        v32 = __p;
      }
    }

    if (v32)
    {
      v175 = v32;
      operator delete(v32);
    }
  }
}

void sub_2602FE684(_Unwind_Exception *a1)
{
  v2 = STACK[0x3B8];
  if (STACK[0x3B8])
  {
    STACK[0x3C0] = v2;
    operator delete(v2);
  }

  _Unwind_Resume(a1);
}

void OZShape::computeOutlinePolygons(uint64_t a1, uint64_t *a2, uint64_t a3, const CMTime *a4, uint64_t a5, double *a6, int a7, int a8, double a9, char a10, int a11, unsigned __int8 a12)
{
  *&v277[40] = 0x3FF0000000000000;
  *v277 = 0x3FF0000000000000;
  *&v274[40] = 0x3FF0000000000000;
  *v274 = 0x3FF0000000000000;
  memset(&v274[8], 0, 32);
  v275 = 0u;
  v276 = 0u;
  memset(&v277[8], 0, 32);
  v273 = 0x3FF0000000000000;
  v270 = 0x3FF0000000000000;
  v267 = 0x3FF0000000000000;
  v264 = 1.0;
  v265 = 0u;
  v266 = 0u;
  v268 = 0u;
  v269 = 0u;
  v271 = 0u;
  v272 = 0u;
  v262 = 0uLL;
  *&v263 = 0;
  *(&v263 + 1) = 0x3FF0000000000000;
  v260 = 0uLL;
  *&v261 = 0;
  *(&v261 + 1) = 0x3FF0000000000000;
  v258 = 0uLL;
  *&v259 = 0;
  *(&v259 + 1) = 0x3FF0000000000000;
  v256 = 0;
  v255 = 0.0;
  *&v257 = 0;
  *(&v257 + 1) = 0x3FF0000000000000;
  v180 = a11;
  v176 = a11 > 0;
  v18 = (*(*a1 + 176))(a1);
  ValueAsInt = OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0);
  v21 = ValueAsInt;
  v253 = 0;
  v252 = 0;
  v254 = 0;
  v250 = 0;
  v249 = 0;
  v251 = 0;
  v247 = 0;
  __p = 0;
  v248 = 0;
  v245 = 0;
  v244 = 0;
  v243 = 0;
  v181 = a3;
  if (!*(a5 + 120) || *(a5 + 168) || (a12 & 1) != 0)
  {
    v26 = (a3 + 216);
    v245 = (a3 + 216);
    v244 = (a3 + 240);
    p_p = (a3 + 192);
  }

  else
  {
    v22 = (a3 + 216);
    if (&v252 != (a3 + 216))
    {
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(&v252, *(a3 + 216), *(a3 + 224), (*(a3 + 224) - *(a3 + 216)) >> 3);
    }

    v23 = (a3 + 240);
    if (&v249 != (a3 + 240))
    {
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(&v249, *(a3 + 240), *(a3 + 248), (*(a3 + 248) - *(a3 + 240)) >> 3);
    }

    v24 = (a3 + 192);
    if (&__p != (v181 + 192))
    {
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(&__p, *(v181 + 192), *(v181 + 200), (*(v181 + 200) - *(v181 + 192)) >> 3);
    }

    std::vector<double>::push_back[abi:ne200100](&v252, *v22);
    std::vector<double>::push_back[abi:ne200100](&v249, *v23);
    std::vector<double>::push_back[abi:ne200100](&__p, *v24);
    std::vector<double>::push_back[abi:ne200100](&v252, *v22 + 1);
    std::vector<double>::push_back[abi:ne200100](&v249, *v23 + 1);
    std::vector<double>::push_back[abi:ne200100](&__p, *v24 + 1);
    v25 = *(v181 + 216);
    if ((*(v181 + 224) - v25) >= 0x11)
    {
      std::vector<double>::push_back[abi:ne200100](&v252, (v25 + 16));
      std::vector<double>::push_back[abi:ne200100](&v249, *v23 + 2);
      std::vector<double>::push_back[abi:ne200100](&__p, *v24 + 2);
    }

    v26 = &v252;
    v245 = &v252;
    v244 = &v249;
    p_p = &__p;
    a3 = v181;
  }

  v243 = p_p;
  v242 = 0;
  v241 = ((v26[1] - *v26) >> 3) - 1;
  if (a12)
  {
    if (a9 <= 4.0)
    {
      v28 = a9 * 0.25 + 1.0;
      a9 = a9 * 0.4375 + 0.25;
    }

    else
    {
      a9 = a9 + -2.0;
      v28 = 2.0;
    }

    ValueAsInt = OZShape::isWriteOnEffectEnabled(a1, a5);
    if (ValueAsInt)
    {
      OZShape::getWriteOnEffect(a1, a4, a5, v29, v30, v31, v32, v33, v34, v35, v20, &v242, &v241, &v245, &v244, &v243);
    }
  }

  else if (a9 < 0.0 || a9 >= 2.0)
  {
    v28 = 0.0;
    if (a9 < 0.0 && a9 > -2.0)
    {
      if (*(a5 + 8) && *(a5 + 16) < 2.0 && !*(a5 + 116))
      {
        a9 = -1.0;
      }

      else
      {
        a9 = -2.0;
      }
    }
  }

  else
  {
    if (*(a5 + 8) && *(a5 + 16) < 2.0 && !*(a5 + 116))
    {
      a9 = 1.0;
    }

    else
    {
      a9 = 2.0;
    }

    v28 = 0.0;
  }

  v38 = a3 + 360;
  v37 = *(a3 + 360);
  v36 = *(v38 + 8);
  if (*(a5 + 8))
  {
    v39 = 1.0;
    v40 = 1.0;
  }

  else
  {
    v40 = 1.0;
    v39 = 1.0;
    if (fabs(*(a5 + 224)) < 0.0000001)
    {
      goto LABEL_47;
    }

    OZChannel::getValueAsDouble((a1 + 13416), MEMORY[0x277CC08F0], 0.0);
    v40 = v41;
    OZChannel::getValueAsDouble((a1 + 13568), MEMORY[0x277CC08F0], 0.0);
    v39 = v42;
    if (!*(a5 + 8))
    {
      goto LABEL_47;
    }
  }

  if (a12)
  {
    if (*(a5 + 13))
    {
      PCMatrix44Tmpl<double>::leftShear(v274, *(a5 + 264), *(a5 + 272));
      v44 = *(a5 + 248);
      v43 = *(a5 + 256);
      if (v44 != 1.0)
      {
        *v274 = vmulq_n_f64(*v274, v44);
        *&v274[16] = vmulq_n_f64(*&v274[16], v44);
      }

      if (v43 != 1.0)
      {
        *&v274[32] = vmulq_n_f64(*&v274[32], v43);
        v275 = vmulq_n_f64(v275, v43);
      }

      v235 = v276;
      v236 = *v277;
      v237 = *&v277[16];
      *v238 = *&v277[32];
      v231 = *v274;
      v232 = *&v274[16];
      v233 = *&v274[32];
      v234 = v275;
      PCMatrix44Tmpl<double>::invert(&v231, &v231, 0.0);
      if (&v264 != a6)
      {
        for (i = 0; i != 16; i += 4)
        {
          v46 = (&v264 + i * 8);
          v47 = *&a6[i + 2];
          *v46 = *&a6[i];
          v46[1] = v47;
        }
      }

      PCMatrix44Tmpl<double>::rightMult(&v264, &v231);
      v179 = 1;
LABEL_52:
      v51 = v18;
      goto LABEL_70;
    }

    if (&v264 != a6)
    {
      for (j = 0; j != 16; j += 4)
      {
        v56 = (&v264 + j * 8);
        v57 = *&a6[j + 2];
        *v56 = *&a6[j];
        v56[1] = v57;
      }
    }

    *&v277[40] = 0x3FF0000000000000;
    *v277 = 0x3FF0000000000000;
    *&v274[40] = 0x3FF0000000000000;
    *v274 = 0x3FF0000000000000;
    memset(&v274[8], 0, 32);
    v275 = 0u;
    v276 = 0u;
    memset(&v277[8], 0, 32);
    v179 = 1;
    v51 = v18;
    goto LABEL_70;
  }

LABEL_47:
  if (a8)
  {
    *&v277[40] = 0x3FF0000000000000;
    *v277 = 0x3FF0000000000000;
    *&v274[40] = 0x3FF0000000000000;
    *v274 = 0x3FF0000000000000;
    memset(&v274[8], 0, 32);
    v275 = 0u;
    v276 = 0u;
    memset(&v277[8], 0, 32);
    if (&v264 != a6)
    {
      for (k = 0; k != 16; k += 4)
      {
        v49 = (&v264 + k * 8);
        v50 = *&a6[k + 2];
        *v49 = *&a6[k];
        v49[1] = v50;
      }
    }

    v179 = 0;
    goto LABEL_52;
  }

  ValueAsInt = (*(*a1 + 184))(a1);
  if (ValueAsInt)
  {
    v273 = 0x3FF0000000000000;
    v270 = 0x3FF0000000000000;
    v265 = 0u;
    v266 = 0u;
    v268 = 0u;
    v269 = 0u;
    v271 = 0u;
    v272 = 0u;
    v51 = 1.0;
    v267 = 0x3FF0000000000000;
    v264 = 1.0;
    if (v274 != a6)
    {
      for (m = 0; m != 16; m += 4)
      {
        v53 = &v274[m * 8];
        v54 = *&a6[m + 2];
        *v53 = *&a6[m];
        v53[1] = v54;
      }
    }

    v179 = 0;
  }

  else
  {
    v58 = fabs(*(a5 + 248));
    v59 = fabs(*(a5 + 256));
    if (v58 != 1.0)
    {
      *v274 = vmulq_n_f64(*v274, v58);
      *&v274[16] = vmulq_n_f64(*&v274[16], v58);
    }

    if (v59 != 1.0)
    {
      *&v274[32] = vmulq_n_f64(*&v274[32], v59);
      v275 = vmulq_n_f64(v275, v59);
    }

    v235 = v276;
    v236 = *v277;
    v237 = *&v277[16];
    *v238 = *&v277[32];
    v231 = *v274;
    v232 = *&v274[16];
    v233 = *&v274[32];
    v234 = v275;
    PCMatrix44Tmpl<double>::invert(&v231, &v231, 0.0);
    if (&v264 != a6)
    {
      for (n = 0; n != 16; n += 4)
      {
        v61 = (&v264 + n * 8);
        v62 = *&a6[n + 2];
        *v61 = *&a6[n];
        v61[1] = v62;
      }
    }

    PCMatrix44Tmpl<double>::rightMult(&v264, &v231);
    v179 = 0;
    v51 = 1.0;
  }

LABEL_70:
  if (a10)
  {
    a2[1] = *a2;
    if (a12)
    {
      *(v181 + 368) = *(v181 + 360);
    }
  }

  if (a9 < 0.0)
  {
    v63 = a11;
    if (a11 == -1)
    {
      v64 = 1;
    }

    else
    {
      v64 = -1;
    }

    v65 = a11 > 0;
    if (!*(a5 + 8))
    {
      v65 = a11 == -1;
    }

    v176 = v65;
    if (!*(a5 + 8))
    {
      v63 = v64;
    }

    v180 = v63;
    if (!*(a5 + 8))
    {
      a9 = -a9;
    }
  }

  v170 = 0xF0F0F0F0F0F0F0F1 * ((a2[1] - *a2) >> 3);
  v66 = v245[1];
  if (v66 != *v245)
  {
    ValueAsInt = std::vector<OZShapeEdgePolygon>::reserve(a2, v170 + ((v66 - *v245) >> 2) - 2);
  }

  if (a9 >= 0.0)
  {
    v67 = v242;
    if (v242 <= v241)
    {
      v169 = v36 - v37;
      v177 = (v245[1] - *v245) >> 3;
      v68 = v180;
      v69 = a7;
      v71 = a7 == 1 || v21 != 1;
      if (v21 == 2)
      {
        v69 = 1;
      }

      v174 = v69;
      v175 = v71;
      v72 = -1.0;
      v173 = v51;
      do
      {
        v73 = a2[1];
        v190 = *a2;
        *&v262 = v51 * *(*v245 + v67);
        *(&v262 + 1) = *(*v244 + v67);
        v263 = xmmword_260342700;
        PCMatrix44Tmpl<double>::transform<double>(v274, &v262, &v262);
        if (*(a5 + 168) && (OZShape::isWriteOnEffectEnabled(a1, a5) & a12 & 1) == 0)
        {
          v84 = v177 - 1;
          if (v67)
          {
            v84 = (v67 - 1) % v177;
          }

          *&v260 = v51 * *(*v245 + v84);
          *(&v260 + 1) = *(*v244 + v84);
          v261 = xmmword_260342700;
          PCMatrix44Tmpl<double>::transform<double>(v274, &v260, &v260);
          v85 = (v67 + 1) % v177;
          *&v258 = v51 * *(*v245 + v85);
          *(&v258 + 1) = *(*v244 + v85);
          v259 = xmmword_260342700;
          PCMatrix44Tmpl<double>::transform<double>(v274, &v258, &v258);
          v86 = (v67 + 2) % v177;
          v255 = v51 * *(*v245 + v86);
          v256 = *(*v244 + v86);
          v257 = xmmword_260342700;
          PCMatrix44Tmpl<double>::transform<double>(v274, &v255, &v255);
          v187 = v73;
          v185 = v28;
          v87 = -((*(&v261 + 1) * *(&v262 + 1) - *(&v263 + 1) * *(&v260 + 1)) / (*(&v261 + 1) * *(&v263 + 1)));
          if (*(&v261 + 1) * *(&v263 + 1) < 0.0)
          {
            v88 = -((*&v262 * *(&v261 + 1) - *&v260 * *(&v263 + 1)) / (*(&v261 + 1) * *(&v263 + 1)));
          }

          else
          {
            v87 = (*(&v261 + 1) * *(&v262 + 1) - *(&v263 + 1) * *(&v260 + 1)) / (*(&v261 + 1) * *(&v263 + 1));
            v88 = (*&v262 * *(&v261 + 1) - *&v260 * *(&v263 + 1)) / (*(&v261 + 1) * *(&v263 + 1));
          }

          v89 = (*(&v263 + 1) * *&v258 - *&v262 * *(&v259 + 1)) / (*(&v263 + 1) * *(&v259 + 1));
          v90 = -((*(&v263 + 1) * *(&v258 + 1) - *(&v262 + 1) * *(&v259 + 1)) / (*(&v263 + 1) * *(&v259 + 1)));
          if (*(&v263 + 1) * *(&v259 + 1) < 0.0)
          {
            v89 = -v89;
          }

          else
          {
            v90 = (*(&v263 + 1) * *(&v258 + 1) - *(&v262 + 1) * *(&v259 + 1)) / (*(&v263 + 1) * *(&v259 + 1));
          }

          v91 = sqrt(v89 * v89 + v90 * v90);
          *(&v231 + 1) = *(&v262 + 1);
          v232 = v263;
          *(&v233 + 1) = *(&v258 + 1);
          v234 = v259;
          *&v231 = *&v262 / v51;
          *&v233 = *&v258 / v51;
          v236 = v259;
          v92 = -(v90 * a9) / v91 * v68;
          *v238 = v263;
          v93 = fabs(*(&v259 + 1));
          v94 = a9 * v89 / v91 * v68;
          v235.f64[0] = *&v258 / v51 + v92 * v93 / v18 / v40;
          v235.f64[1] = *(&v258 + 1) + v94 * v93 / v39;
          v95 = fabs(*(&v263 + 1));
          v96 = sqrt(v88 * v88 + v87 * v87);
          v239 = 1;
          LOBYTE(v240) = v180 < 0;
          *(&v240 + 1) = 0;
          HIBYTE(v240) = 0;
          v238[18] = 0;
          *&v238[16] = 0;
          v237.f64[0] = *&v262 / v51 + v92 * v95 / v18 / v40;
          v237.f64[1] = *(&v262 + 1) + v94 * v95 / v39;
          v229 = 1;
          LOBYTE(v230) = v180 < 0;
          *(&v230 + 1) = 0;
          HIBYTE(v230) = 0;
          *(&v221 + 1) = *(&v260 + 1);
          v222 = v261;
          *(&v223 + 1) = *(&v262 + 1);
          v224 = v263;
          *&v221 = *&v260 / v51;
          *&v223 = *&v262 / v51;
          v226 = v263;
          v97 = -(v87 * a9) / v96 * v68;
          *v228 = v261;
          v98 = a9 * v88 / v96 * v68;
          v225.f64[0] = *&v262 / v51 + v97 * v95 / v18 / v40;
          v225.f64[1] = *(&v262 + 1) + v98 * v95 / v39;
          v228[18] = 0;
          *&v228[16] = 0;
          v99 = fabs(*(&v261 + 1));
          *&v227 = *&v260 / v51 + v97 * v99 / v18 / v40;
          *(&v227 + 1) = *(&v260 + 1) + v98 * v99 / v39;
          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a2, &v221);
          v219 = 1;
          LOBYTE(v220) = v180 < 0;
          *(&v220 + 1) = 0;
          HIBYTE(v220) = 0;
          *(&v211 + 1) = *(&v262 + 1);
          v212 = v263;
          *&v211 = *&v262 / v51;
          v213 = v211;
          v214 = v263;
          v216 = v263;
          v100 = fabs(*(&v263 + 1));
          *&v215 = *&v262 / v51 + v92 * v100 / v18 / v40;
          *(&v215 + 1) = *(&v262 + 1) + v94 * v100 / v39;
          v218[18] = 0;
          *&v218[16] = 0;
          v101.n128_u64[1] = *&v225.f64[1];
          v217 = v225;
          *v218 = v226;
          v102 = v174;
          v28 = v185;
          v72 = -1.0;
          if (!v175)
          {
            Vertex = OZChannelCurve::getVertex((a1 + 208), a4, vcvtmd_s64_f64(*(*v243 + v67) + 0.5 + 0.0000001));
            v105 = v104;
            v106 = OZChannelCurve::getVertex((a1 + 208), a4, *(*v243 + v67));
            v108 = v107;
            isVertexFlattened = OZChannelCurve::isVertexFlattened(a1 + 208, Vertex, v105);
            if (v106)
            {
              v110 = isVertexFlattened;
            }

            else
            {
              v110 = 0;
            }

            if (v110 && v108 != 0)
            {
              v102 = a7;
            }

            else
            {
              v102 = 1;
            }
          }

          v101.n128_f64[0] = a9;
          OZShape::subdivideTriangle(a1, v102, a4, a5, a2, &v211, &v221, &v231, v101, &v264, v176, a12);
          v73 = v187;
          v51 = v173;
        }

        else if (v67)
        {
          v74 = 8 * v67;
          v75 = 8 * v67 - 8;
          *&v260 = v51 * *(*v245 + v75);
          *(&v260 + 1) = *(*v244 + v75);
          v261 = xmmword_260342700;
          PCMatrix44Tmpl<double>::transform<double>(v274, &v260, &v260);
          v76 = (*&v262 * *(&v261 + 1) - *&v260 * *(&v263 + 1)) / (*(&v261 + 1) * *(&v263 + 1));
          if (*(&v261 + 1) * *(&v263 + 1) >= 0.0)
          {
            v77 = (*(&v261 + 1) * *(&v262 + 1) - *(&v263 + 1) * *(&v260 + 1)) / (*(&v261 + 1) * *(&v263 + 1));
          }

          else
          {
            v77 = -((*(&v261 + 1) * *(&v262 + 1) - *(&v263 + 1) * *(&v260 + 1)) / (*(&v261 + 1) * *(&v263 + 1)));
          }

          if (*(&v261 + 1) * *(&v263 + 1) < 0.0)
          {
            v76 = -v76;
          }

          v78 = sqrt(v76 * v76 + v77 * v77);
          *(&v231 + 1) = *(&v260 + 1);
          v232 = v261;
          *(&v233 + 1) = *(&v262 + 1);
          v234 = v263;
          *&v231 = *&v260 / v51;
          *&v233 = *&v262 / v51;
          v236 = v263;
          v79 = -(v77 * a9) / v78 * v68;
          v80 = fabs(*(&v263 + 1));
          v239 = 1;
          LOBYTE(v240) = v180 < 0;
          *(&v240 + 1) = 0;
          HIBYTE(v240) = 0;
          v237 = 0u;
          memset(v238, 0, sizeof(v238));
          v81 = a9 * v76 / v78 * v68;
          v235.f64[0] = *&v262 / v51 + v79 * v80 / v18 / v40;
          v235.f64[1] = *(&v262 + 1) + v81 * v80 / v39;
          if (v67 <= v242 + 1)
          {
            *v238 = v232;
            v111 = fabs(*(&v232 + 1));
            v237.f64[0] = *&v260 / v51 + v79 * v111 / v18 / v40;
            v237.f64[1] = *(&v231 + 1) + v81 * v111 / v39;
          }

          else
          {
            v82 = a2[1];
            v83 = *(v82 - 56);
            v237 = *(v82 - 72);
            *v238 = v83;
          }

          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a2, &v231);
          if (v241 != v67)
          {
            v188 = v73;
            v227 = 0u;
            memset(v228, 0, sizeof(v228));
            v225 = 0u;
            v226 = 0u;
            v223 = 0u;
            v224 = 0u;
            v221 = 0u;
            v222 = 0u;
            v229 = 1;
            LOBYTE(v230) = v180 < 0;
            *(&v230 + 1) = 0;
            HIBYTE(v230) = 0;
            *&v258 = v51 * *(*v245 + v74 + 8);
            *(&v258 + 1) = *(*v244 + v74 + 8);
            v259 = xmmword_260342700;
            PCMatrix44Tmpl<double>::transform<double>(v274, &v258, &v258);
            v112 = (*&v258 * *(&v263 + 1) - *&v262 * *(&v259 + 1)) / (*(&v263 + 1) * *(&v259 + 1));
            v113 = (*(&v263 + 1) * *(&v258 + 1) - *(&v259 + 1) * *(&v262 + 1)) / (*(&v263 + 1) * *(&v259 + 1));
            if (*(&v263 + 1) * *(&v259 + 1) < 0.0)
            {
              v113 = -v113;
              v112 = -v112;
            }

            *(&v221 + 1) = *(&v262 + 1);
            v222 = v263;
            *&v221 = *&v262 / v51;
            v223 = v221;
            v224 = v263;
            v226 = v263;
            v114 = sqrt(v112 * v112 + v113 * v113);
            v115 = *(&v263 + 1) * (-(v113 * a9) / v114 * v68) / v18 / v40;
            v116 = *(&v263 + 1) * (a9 * v112 / v114 * v68) / v39;
            v225.f64[0] = *&v262 / v51 + v115;
            v225.f64[1] = *(&v262 + 1) + v116;
            v117 = a2[1];
            v118 = *(v117 - 56);
            v227 = *(v117 - 72);
            *v228 = v118;
            v219 = 1;
            LOBYTE(v220) = v180 < 0;
            *(&v220 + 1) = 0;
            HIBYTE(v220) = 0;
            *(&v211 + 1) = *(&v262 + 1);
            v212 = v263;
            *(&v213 + 1) = *(&v258 + 1);
            v214 = v259;
            *&v211 = *&v262 / v51;
            *&v213 = *&v258 / v51;
            v216 = v259;
            *&v215 = *&v258 / v51 + v115;
            *(&v215 + 1) = v116 + *(&v258 + 1);
            v218[18] = 0;
            *&v218[16] = 0;
            v217 = v225;
            *v218 = v263;
            v119 = v174;
            v120 = a4;
            if (!v175)
            {
              v121 = OZChannelCurve::getVertex((a1 + 208), a4, vcvtmd_s64_f64(*(*v243 + v67) + 0.5 + 0.0000001));
              v123 = v122;
              FirstVertex = OZChannelCurve::getFirstVertex((a1 + 208), a4, 1);
              v126 = v125;
              LastVertex = OZChannelCurve::getLastVertex((a1 + 208), a4, 1);
              if (v121 == FirstVertex && v123 == v126)
              {
                v119 = 1;
                v120 = a4;
              }

              else
              {
                v120 = a4;
                if (v121 == LastVertex && v123 == v128)
                {
                  v119 = 1;
                }

                else
                {
                  v129 = OZChannelCurve::getVertex((a1 + 208), a4, *(*v243 + v67));
                  v131 = v130;
                  v132 = OZChannelCurve::isVertexFlattened(a1 + 208, v121, v123);
                  if (v129)
                  {
                    v133 = v132;
                  }

                  else
                  {
                    v133 = 0;
                  }

                  if (v133 && v131 != 0)
                  {
                    v119 = a7;
                  }

                  else
                  {
                    v119 = 1;
                  }

                  v73 = v188;
                }
              }
            }

            v134 = a2[1];
            v135 = *(v134 - 56);
            v136 = *(v134 - 24);
            v208 = *(v134 - 40);
            v209 = v136;
            v210 = *(v134 - 8);
            v137 = *(v134 - 120);
            v138 = *(v134 - 88);
            v204 = *(v134 - 104);
            v205 = v138;
            v206 = *(v134 - 72);
            v207 = v135;
            v202 = *(v134 - 136);
            v135.n128_u64[1] = *(&v202 + 1);
            v203 = v137;
            v135.n128_f64[0] = a9;
            OZShape::subdivideTriangle(a1, v119, v120, a5, a2, &v221, &v202, &v211, v135, &v264, v176, a12);
          }
        }

        ValueAsInt = (*(*a1 + 184))(a1);
        if ((v179 | ValueAsInt ^ 1) == 1)
        {
          if (*(a5 + 224) <= 0.0)
          {
            v140 = 0;
          }

          else
          {
            v139 = v180 > 0 && *(a5 + 120) == 0;
            v140 = v139;
          }

          v141 = *a2;
          if (v73 - v190 < (a2[1] - *a2))
          {
            v142 = 0xF0F0F0F0F0F0F0F1 * ((v73 - v190) >> 3);
            do
            {
              v143 = v141 + 136 * v142;
              ValueAsInt = OZShapeEdgePolygon::transformPoints(v143, &v264);
              if (*(a5 + 168))
              {
                ValueAsInt = OZShape::isWriteOnEffectEnabled(a1, a5);
                if (ValueAsInt & 1) == 0 && ((v140 | *(a5 + 176)))
                {
                  v237 = 0u;
                  memset(v238, 0, sizeof(v238));
                  v235 = 0u;
                  v236 = 0u;
                  v233 = 0u;
                  v234 = 0u;
                  v231 = 0u;
                  v232 = 0u;
                  v239 = 1;
                  v240 = 0;
                  LOBYTE(v240) = *(v143 + 132);
                  v144 = *(v143 + 112);
                  v231 = *(v143 + 96);
                  v232 = v144;
                  v146 = *(v143 + 80);
                  v233 = *(v143 + 64);
                  v145.i64[1] = *(&v233 + 1);
                  v234 = v146;
                  v146.f64[0] = *(v143 + 120);
                  v183 = *(v143 + 72);
                  v184 = v146.f64[0];
                  v145.i64[0] = *(v143 + 104);
                  v186 = v145;
                  v189 = *(v143 + 88);
                  v146.f64[1] = *(v143 + 64);
                  v182 = v146;
                  *&v191 = v146.f64[0] * v189.f64[0];
                  v147 = v146.f64[0] * v189.f64[0] < 0.0;
                  ValueAsInt = OZShapeEdgePolygon::checkWindingOrder(v143);
                  v148.f64[0] = v183;
                  v148.f64[1] = v184;
                  v149 = vdivq_f64(vsubq_f64(vmulq_f64(v182, v148), vmulq_f64(v189, vzip1q_s64(v186, v189))), vdupq_lane_s64(v191, 0));
                  v150 = vdup_n_s32(v147);
                  v151.i64[0] = v150.u32[0];
                  v151.i64[1] = v150.u32[1];
                  v152 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v151, 0x3FuLL)), vnegq_f64(v149), v149);
                  v153 = 1.0;
                  if (!ValueAsInt)
                  {
                    v153 = v72;
                  }

                  v154 = sqrt(vaddvq_f64(vmulq_f64(v152, v152)));
                  if (fabs(v154) >= 0.0000001)
                  {
                    if (v140)
                    {
                      v28 = *(a5 + 224);
                    }

                    v155 = *(v143 + 80);
                    v235 = *(v143 + 64);
                    v236 = v155;
                    v152.f64[0] = -v152.f64[0];
                    v156 = vmulq_n_f64(vmulq_n_f64(v152, v153), v28 / v154);
                    v235 = vaddq_f64(*(v143 + 64), vmulq_n_f64(v156, fabs(*(v143 + 88))));
                    v157 = *(v143 + 112);
                    v237 = *(v143 + 96);
                    *v238 = v157;
                    v237 = vaddq_f64(*(v143 + 96), vmulq_n_f64(v156, fabs(*(v143 + 120))));
                    if (!v142)
                    {
                      goto LABEL_172;
                    }

                    if (*(v143 + 131) != 1)
                    {
                      goto LABEL_172;
                    }

                    v158 = *(v181 + 368);
                    if (v158 == *(v181 + 360))
                    {
                      goto LABEL_172;
                    }

                    v221 = v231;
                    v222 = v232;
                    v227 = 0u;
                    memset(v228, 0, sizeof(v228));
                    v229 = 1;
                    v201 = 0x3FF0000000000000;
                    v198 = 0x3FF0000000000000;
                    v195 = 0x3FF0000000000000;
                    v192 = 0x3FF0000000000000;
                    v193 = 0u;
                    v194 = 0u;
                    v196 = 0u;
                    v197 = 0u;
                    v199 = 0u;
                    v200 = 0u;
                    v230 = v240;
                    v223 = v231;
                    v224 = v232;
                    v225 = v237;
                    v226 = *v238;
                    v160 = *(v158 - 56);
                    v227 = *(v158 - 72);
                    if (v140)
                    {
                      v159.n128_u64[1] = *(&v227 + 1);
                      *v228 = v160;
                      v159.n128_f64[0] = v28;
                      OZShape::subdivideTriangle(a1, 1, a4, a5, (v181 + 360), &v221, v158 - 136, &v231, v159, &v192, !v176, 0);
                    }

                    else
                    {
                      *v228 = v160;
                      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100]((v181 + 360), &v221);
                    }

                    if (v241 == v67 && v142 == -1 - 0xF0F0F0F0F0F0F0FLL * ((a2[1] - *a2) >> 3))
                    {
                      v161 = 0;
                      v217 = 0u;
                      memset(v218, 0, sizeof(v218));
                      v215 = 0u;
                      v216 = 0u;
                      v213 = 0u;
                      v214 = 0u;
                      v211 = 0u;
                      v212 = 0u;
                      v219 = 1;
                      v162 = *(v181 + 360) + v169;
                      v220 = 0;
                      do
                      {
                        v163 = *(v162 + v161);
                        v164 = *(v162 + v161 + 16);
                        v165 = *(v162 + v161 + 48);
                        v166 = (&v202 + v161);
                        v166[2] = *(v162 + v161 + 32);
                        v166[3] = v165;
                        *v166 = v163;
                        v166[1] = v164;
                        v161 += 64;
                      }

                      while (v161 != 128);
                      v210 = *(v162 + 128);
                      LOBYTE(v220) = v230;
                      v211 = v233;
                      v212 = v234;
                      v213 = v202;
                      v214 = v203;
                      v215 = v208;
                      v216 = v209;
                      v217 = v235;
                      *v218 = v236;
                      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100]((v181 + 360), &v231);
                      ValueAsInt = std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100]((v181 + 360), &v211);
                    }

                    else
                    {
LABEL_172:
                      ValueAsInt = std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100]((v181 + 360), &v231);
                    }
                  }
                }
              }

              ++v142;
              v141 = *a2;
            }

            while (v142 < 0xF0F0F0F0F0F0F0F1 * ((a2[1] - *a2) >> 3));
          }
        }
      }

      while (v67++ < v241);
    }
  }

  else
  {
    OZShape::computeInsideFeatheringPolygons(a1, a2, v181, -a9, v20, a5, v274);
  }

  if (a8)
  {
    v168 = v179;
    if (!*(a5 + 168))
    {
      v168 = 1;
    }

    if ((v168 & 1) == 0)
    {
      OZShape::transformOutlinePolygonList(ValueAsInt, a2, v170, &v264);
    }
  }

  if (__p)
  {
    v247 = __p;
    operator delete(__p);
  }

  if (v249)
  {
    v250 = v249;
    operator delete(v249);
  }

  if (v252)
  {
    v253 = v252;
    operator delete(v252);
  }
}

void sub_2602FFEA0(_Unwind_Exception *a1)
{
  v2 = STACK[0x3C8];
  if (STACK[0x3C8])
  {
    STACK[0x3D0] = v2;
    operator delete(v2);
  }

  v3 = STACK[0x3E0];
  if (STACK[0x3E0])
  {
    STACK[0x3E8] = v3;
    operator delete(v3);
  }

  v4 = STACK[0x3F8];
  if (STACK[0x3F8])
  {
    STACK[0x400] = v4;
    operator delete(v4);
  }

  _Unwind_Resume(a1);
}

void OZShape::computeRoundCaps(uint64_t a1, uint64_t *a2, uint64_t *a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, double a9, uint64_t a10, double *a11, char a12)
{
  v86 = 0u;
  memset(v87, 0, 19);
  v84 = 0u;
  v85 = 0u;
  v82 = 0u;
  v83 = 0u;
  v80 = 0u;
  v81 = 0u;
  v87[19] = 1;
  *&v87[20] = 0;
  if (a12)
  {
    v20 = *(a6 + 16);
    v80 = *a6;
    v81 = v20;
    v82 = v80;
    v83 = v20;
    v21 = *(a6 + 56);
    *&v20 = *(a6 + 24);
    v22 = *&v20 * *(a6 + 32) - v21 * *a6;
    v23 = *&v20 * *(a6 + 40);
    *&v20 = v21 * *&v20;
    v24 = v22 / *&v20;
    v25 = (v23 - v21 * *(a6 + 8)) / *&v20;
    v26 = *&v20 < 0.0;
    if (*&v20 >= 0.0)
    {
      v27 = v24;
    }

    else
    {
      v27 = -v24;
    }

    if (v26)
    {
      v28 = -v25;
    }

    else
    {
      v28 = v25;
    }

    v29 = sqrt(v27 * v27 + v28 * v28);
    v30 = -v27 / v29 * a9;
    v31 = (*(*a1 + 176))(a1);
    v32 = 0;
    v33.f64[0] = v30 / v31;
    *&v87[20] = 256;
    v34 = *(a6 + 112);
    v84 = *(a6 + 96);
    v85 = v34;
    v33.f64[1] = -v28 / v29 * a9;
    v35 = *(a6 + 16);
    v73 = v33;
    v86 = vaddq_f64(*a6, vmulq_n_f64(v33, fabs(*(a6 + 24))));
    *v87 = v35;
    do
    {
      v36 = *(&v80 + v32);
      v37 = *(&v80 + v32 + 16);
      v38 = *(&v83 + v32);
      v39 = &v74[v32 / 0x10];
      v39[2] = *(&v82 + v32);
      v39[3] = v38;
      *v39 = v36;
      v39[1] = v37;
      v32 += 64;
    }

    while (v32 != 128);
    v79 = *&v87[16];
    v40.n128_u64[1] = *&v86.f64[1];
    v75 = v86;
    v76 = *v87;
    v40.n128_f64[0] = a9;
    OZShape::subdivideTriangle(a1, 1, a4, a5, a2, &v80, v74, a6, v40, a11, 257, 1u);
    v87[20] = 1;
    v41 = *(a8 + 16);
    v80 = *a8;
    v81 = v41;
    v82 = v80;
    v83 = v41;
    v42 = *(a8 + 112);
    v84 = *(a8 + 96);
    v85 = v42;
    v86 = v80;
    *v87 = v41;
    v86 = vaddq_f64(v80, vmulq_n_f64(v73, fabs(*(a8 + 24))));
    v74[2] = v80;
    v74[3] = v41;
    v74[0] = v80;
    v74[1] = v41;
    v79 = *&v87[16];
    v77 = v86;
    v78 = v41;
    v43.n128_u64[1] = *&v86.f64[1];
    v75 = v86;
    v76 = v41;
    v43.n128_f64[0] = a9;
    OZShape::subdivideTriangle(a1, 1, a4, a5, a3, &v80, v74, a8, v43, a11, 256, 1u);
    *(a6 + 133) = 1;
  }

  else
  {
    v45 = *(a7 + 48);
    v80 = *(a7 + 32);
    v81 = v45;
    v82 = v80;
    v83 = v45;
    v46 = *(a7 + 56);
    *&v45 = *(a7 + 24);
    v47 = *(a7 + 40);
    v48 = *(a7 + 8);
    v49 = *&v45 * *(a7 + 32) - v46 * *a7;
    a8 = a10;
    *&v87[20] = 256;
    v50 = *&v45 * v47;
    v51 = v46 * *&v45;
    v52 = v49 / v51;
    v53 = (v50 - v46 * v48) / v51;
    if (v51 >= 0.0)
    {
      v54 = v53;
    }

    else
    {
      v54 = -v53;
    }

    if (v51 >= 0.0)
    {
      v55 = v52;
    }

    else
    {
      v55 = -v52;
    }

    v56 = sqrt(v55 * v55 + v54 * v54);
    v57.f64[0] = v55 / v56 * a9 / (*(*a1 + 176))(a1);
    v57.f64[1] = v54 / v56 * a9;
    v58 = *(a7 + 48);
    v84 = vaddq_f64(*(a7 + 32), vmulq_n_f64(v57, fabs(*(a7 + 56))));
    v85 = v58;
    v59 = *(a7 + 80);
    v86 = *(a7 + 64);
    v57.f64[1] = v86.f64[1];
    *v87 = v59;
    v57.f64[0] = a9;
    OZShape::subdivideTriangle(a1, 1, a4, a5, a2, &v80, a7, a7, v57, a11, 1, 1u);
    v60 = *(a10 + 56);
    v61 = *(a10 + 24);
    v62 = v61 * *(a10 + 32) - v60 * *a10;
    v63 = v61 * *(a10 + 40);
    v64 = v60 * v61;
    v65 = v62 / v64;
    v66 = (v63 - v60 * *(a10 + 8)) / v64;
    if (v64 >= 0.0)
    {
      v67 = v66;
    }

    else
    {
      v67 = -v66;
    }

    if (v64 >= 0.0)
    {
      v68 = v65;
    }

    else
    {
      v68 = -v65;
    }

    v69 = sqrt(v68 * v68 + v67 * v67);
    v70.f64[0] = v68 / v69 * a9 / (*(*a1 + 176))(a1);
    v87[20] = 1;
    v71 = *(a10 + 48);
    v80 = *(a10 + 32);
    v81 = v71;
    v82 = v80;
    v83 = v71;
    v70.f64[1] = v67 / v69 * a9;
    v84 = vaddq_f64(v80, vmulq_n_f64(v70, fabs(*(a10 + 56))));
    v85 = v71;
    v72 = *(a10 + 80);
    v86 = *(a10 + 64);
    v70.f64[1] = v86.f64[1];
    *v87 = v72;
    v70.f64[0] = a9;
    OZShape::subdivideTriangle(a1, 1, a4, a5, a3, &v80, a10, a10, v70, a11, 0, 1u);
    *(a7 + 133) = 1;
  }

  *(a8 + 133) = 1;
}

unint64_t OZShape::computeBevelCaps(double a1, uint64_t a2, uint64_t *a3, uint64_t *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, char a10)
{
  v57 = 0u;
  memset(v58, 0, sizeof(v58));
  v55 = 0u;
  v56 = 0u;
  v53 = 0u;
  v54 = 0u;
  v51 = 0u;
  v52 = 0u;
  v59 = 1;
  v60 = 0;
  if (a10)
  {
    v13.f64[0] = *(a8 + 120);
    v14 = *(a8 + 64);
    LOWORD(v60) = 257;
    v15 = *(a8 + 16);
    v16 = *(a8 + 88);
    v14.f64[1] = v13.f64[0];
    v17 = v13.f64[0] * v16.f64[0];
    v13.f64[1] = *(a8 + 72);
    v51 = *a8;
    v52 = v15;
    v18 = vmulq_f64(v14, v13);
    v19 = vextq_s8(v16, v16, 8uLL);
    v16.f64[1] = *(a8 + 104);
    v53 = v51;
    v54 = v15;
    v20 = vdivq_f64(vsubq_f64(v18, vmulq_f64(v19, v16)), vdupq_lane_s64(*&v17, 0));
    *&v16.f64[0] = vdup_n_s32(v17 < 0.0);
    v21.i64[0] = LODWORD(v16.f64[0]);
    v21.i64[1] = HIDWORD(v16.f64[0]);
    v22 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v21, 0x3FuLL)), vnegq_f64(v20), v20);
    v49 = vmulq_n_f64(vdivq_f64(vnegq_f64(v22), vdupq_lane_s64(COERCE__INT64(sqrt(vaddvq_f64(vmulq_f64(v22, v22)))), 0)), a1);
    v23 = *(a8 + 112);
    v55 = *(a8 + 96);
    v56 = v23;
    v57 = v51;
    *v58 = v15;
    v57 = vaddq_f64(v51, vmulq_n_f64(v49, fabs(*(a8 + 24))));
    v24 = *a4;
    *(v24 + 133) = 1;
    std::vector<OZShapeEdgePolygon>::insert(a4, v24, &v51);
    v25 = *(a6 + 16);
    v51 = *a6;
    v52 = v25;
    v53 = v51;
    v54 = v25;
    v26 = *(a6 + 112);
    v55 = *(a6 + 96);
    v56 = v26;
    v57 = v51;
    *v58 = v25;
    v27 = fabs(*(a6 + 24));
    *&v26 = *(a6 + 8);
    *&v25 = *a6 + v27 * v49.f64[0];
    LOBYTE(v60) = 0;
    *&v57.f64[0] = v25;
    v57.f64[1] = *&v26 + vmuld_lane_f64(v27, v49, 1);
    v28 = *a3;
    *(v28 + 133) = 1;
    return std::vector<OZShapeEdgePolygon>::insert(a3, v28, &v51);
  }

  else
  {
    v31.f64[0] = *(a7 + 56);
    v32 = *(a7 + 24);
    v33 = *a7;
    v34 = v31.f64[0] * v32 < 0.0;
    LOWORD(v60) = 256;
    v35 = fabs(v31.f64[0]);
    v36.f64[0] = *(a7 + 32);
    v36.f64[1] = v32;
    v37.f64[1] = *(a7 + 40);
    v37.f64[0] = v32;
    v33.f64[1] = v31.f64[0];
    v31.f64[1] = *(a7 + 8);
    v38 = vdivq_f64(vsubq_f64(vmulq_f64(v36, v37), vmulq_f64(v33, v31)), vdupq_lane_s64(COERCE__INT64(v31.f64[0] * v32), 0));
    v39 = vdup_n_s32(v34);
    v40.i64[0] = v39.u32[0];
    v40.i64[1] = v39.u32[1];
    v41 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v40, 0x3FuLL)), vnegq_f64(v38), v38);
    v42 = vmulq_n_f64(vdivq_f64(v41, vdupq_lane_s64(COERCE__INT64(sqrt(vaddvq_f64(vmulq_f64(v41, v41)))), 0)), a1);
    v43 = *(a7 + 48);
    v50 = v42;
    v51 = *(a7 + 32);
    v52 = v43;
    v53 = v51;
    v56 = v43;
    v54 = v43;
    v55 = vaddq_f64(v51, vmulq_n_f64(v42, v35));
    v44 = *(a7 + 80);
    v57 = *(a7 + 64);
    *v58 = v44;
    *(a3[1] - 3) = 1;
    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a3, &v51);
    v45 = *(a9 + 48);
    v51 = *(a9 + 32);
    v52 = v45;
    v53 = v51;
    v54 = v45;
    v55 = v51;
    v56 = v45;
    v46 = fabs(*(a9 + 56));
    v47 = *(a9 + 40);
    *&v45 = *(a9 + 32) + v46 * v50.f64[0];
    LOBYTE(v60) = 1;
    *&v55.f64[0] = v45;
    v55.f64[1] = v47 + vmuld_lane_f64(v46, v50, 1);
    v48 = *(a9 + 80);
    v57 = *(a9 + 64);
    *v58 = v48;
    *(a4[1] - 3) = 1;
    return std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4, &v51);
  }
}

unint64_t OZShape::computeArrowCaps(double a1, uint64_t a2, uint64_t *a3, uint64_t *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, char a11)
{
  v153 = 0u;
  memset(v154, 0, sizeof(v154));
  v151 = 0u;
  v152 = 0u;
  v149 = 0u;
  v150 = 0u;
  v147 = 0u;
  v148 = 0u;
  v155 = 1;
  v156 = 0;
  if (a11)
  {
    v16 = *(a9 + 120);
    v17 = *(a9 + 88);
    v18 = *(a9 + 64);
    v19 = v16 * v17.f64[0] < 0.0;
    v20.f64[0] = *(a9 + 88);
    v20.f64[1] = *(a9 + 104);
    v21 = vdivq_f64(vsubq_f64(vmulq_n_f64(v18, v16), vmulq_f64(vextq_s8(v17, v17, 8uLL), v20)), vdupq_lane_s64(COERCE__INT64(v16 * v17.f64[0]), 0));
    v22 = vdup_n_s32(v19);
    v23.i64[0] = v22.u32[0];
    v23.i64[1] = v22.u32[1];
    v24 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v23, 0x3FuLL)), vnegq_f64(v21), v21);
    v25 = vmulq_n_f64(vmulq_n_f64(vdivq_f64(vnegq_f64(v24), vdupq_lane_s64(COERCE__INT64(sqrt(vaddvq_f64(vmulq_f64(v24, v24)))), 0)), a1), *(a6 + 96) + 1.0);
    v26 = *(a9 + 56);
    v27 = *(a9 + 32);
    v28 = *(a9 + 40);
    v29 = *(a6 + 104) + 1.0;
    LOWORD(v156) = 257;
    __asm { FMOV            V16.2D, #0.5 }

    v141 = v29;
    v144 = v25;
    v139 = _Q16;
    if (_NF)
    {
      v35 = *(a9 + 112);
      v151 = *(a9 + 96);
      v152 = v35;
      v36 = *(a9 + 16);
      v71 = *a9;
      v147 = *a9;
      v148 = v36;
      v149 = v147;
      v150 = v36;
      v153 = v147;
      *v154 = v36;
      v73 = vdupq_lane_s64(COERCE__INT64(fabs(*(a9 + 24))), 0);
    }

    else
    {
      *&v57 = v17.f64[0] * v26;
      v58 = v17.f64[0] * v26 < 0.0;
      v59 = vmulq_n_f64(v18, v26);
      v60 = vzip1q_s64(v27, v17);
      v17.f64[1] = v28;
      v61 = vmulq_f64(v60, v17);
      v62 = *a9;
      v63 = *(a9 + 16);
      v60.f64[0] = fabs(*(a9 + 24));
      v64 = *a9;
      v138 = vmulq_f64(v25, _Q16);
      v147 = vaddq_f64(*a9, vmulq_n_f64(v138, v60.f64[0]));
      v148 = v63;
      v149 = v62;
      v150 = v63;
      v65 = *(a9 + 112);
      v151 = *(a9 + 96);
      v152 = v65;
      v66 = *a4;
      v67 = vdivq_f64(vsubq_f64(v59, v61), vdupq_lane_s64(v57, 0));
      *&v59.f64[0] = vdup_n_s32(v58);
      v68.i64[0] = LODWORD(v59.f64[0]);
      v68.i64[1] = HIDWORD(v59.f64[0]);
      v137 = vmulq_n_f64(vbslq_s8(vcltzq_s64(vshlq_n_s64(v68, 0x3FuLL)), vnegq_f64(v67), v67), v29);
      v153 = vaddq_f64(v64, vmulq_n_f64(v137, v60.f64[0]));
      *v154 = v63;
      std::vector<OZShapeEdgePolygon>::insert(a4, v66, &v147);
      v25 = v144;
      v70 = *(a9 + 16);
      v147 = *a9;
      v69 = v147;
      v71 = v147;
      v148 = v70;
      v72 = fabs(*(a9 + 24));
      v147.f64[0] = v147.f64[0] + v72 * v138.f64[0];
      v147.f64[1] = v147.f64[1] + vmuld_lane_f64(v72, v138, 1);
      v150 = v70;
      v149 = v147;
      v73 = vdupq_lane_s64(*&v72, 0);
      v151 = vaddq_f64(v71, vmulq_n_f64(v137, v72));
      v152 = v70;
      v153 = v69;
      *v154 = v70;
    }

    v153 = vaddq_f64(v71, vmulq_f64(v25, v73));
    v74 = *a4;
    *(v74 + 133) = 1;
    std::vector<OZShapeEdgePolygon>::insert(a4, v74, &v147);
    v75.f64[0] = *(a7 + 88);
    v76 = *(a7 + 56);
    v77 = *(a7 + 32);
    v78 = *(a7 + 72);
    v79 = *(a7 + 40);
    LOBYTE(v156) = 0;
    if (fabs(*(a6 + 104)) >= 0.0000001)
    {
      v105 = vextq_s8(v76, v76, 8uLL);
      *&v106 = v75.f64[0] * v76.f64[0];
      v107 = v75.f64[0] * v76.f64[0] < 0.0;
      v76.f64[1] = v78;
      v108 = vmulq_f64(v105, v76);
      v77.f64[1] = v75.f64[0];
      v75.f64[1] = v79;
      v109 = vmulq_f64(v77, v75);
      v110 = *a7;
      v111 = *(a7 + 16);
      v112 = fabs(*(a7 + 24));
      v113 = *a7;
      v140 = vmulq_f64(v144, v139);
      v147 = vaddq_f64(*a7, vmulq_n_f64(v140, v112));
      v148 = v111;
      v149 = v110;
      v150 = v111;
      v114 = *(a7 + 112);
      v151 = *(a7 + 96);
      v152 = v114;
      v115 = vdivq_f64(vsubq_f64(v108, v109), vdupq_lane_s64(v106, 0));
      *&v108.f64[0] = vdup_n_s32(v107);
      v116.i64[0] = LODWORD(v108.f64[0]);
      v116.i64[1] = HIDWORD(v108.f64[0]);
      v143 = vmulq_n_f64(vbslq_s8(vcltzq_s64(vshlq_n_s64(v116, 0x3FuLL)), vnegq_f64(v115), v115), v141);
      v153 = vaddq_f64(v113, vmulq_n_f64(v143, v112));
      *v154 = v111;
      std::vector<OZShapeEdgePolygon>::insert(a3, *a3, &v147);
      v117 = *(a7 + 16);
      v147 = *a7;
      v148 = v117;
      v118 = fabs(*(a7 + 24));
      v119 = *a7;
      v120 = *(a7 + 8);
      v147.f64[0] = *a7 + v118 * v140.f64[0];
      v147.f64[1] = v120 + vmuld_lane_f64(v118, v140, 1);
      v150 = v117;
      v149 = v147;
      v152 = v117;
      v151.f64[0] = v119 + v118 * v143.f64[0];
      v151.f64[1] = v120 + vmuld_lane_f64(v118, v143, 1);
      *v154 = v117;
      v153.f64[0] = v119 + v118 * v144.f64[0];
      v153.f64[1] = v120 + vmuld_lane_f64(v118, v144, 1);
    }

    else
    {
      v80 = *(a7 + 112);
      v151 = *(a7 + 96);
      v152 = v80;
      v81 = vmulq_n_f64(v144, fabs(*(a7 + 24)));
      v82 = *(a7 + 16);
      v147 = *a7;
      v148 = v82;
      v149 = v147;
      v150 = v82;
      v153 = vaddq_f64(v147, v81);
      *v154 = v82;
    }

    v121 = *a3;
    *(v121 + 133) = 1;
    return std::vector<OZShapeEdgePolygon>::insert(a3, v121, &v147);
  }

  else
  {
    v38 = a8 + 32;
    v39 = *(a8 + 32);
    v40 = *(a8 + 24);
    v41 = *(a6 + 104);
    v42 = *(a6 + 96) + 1.0;
    v43 = *(a8 + 88);
    v44 = *(a8 + 56);
    v45 = v40 * *v44.i64;
    v46 = (v40 * v39.f64[0] - *a8 * *v44.i64) / (v40 * *v44.i64);
    v47 = *(a8 + 40);
    v48 = (vmuld_lane_f64(v40, v39, 1) - *(a8 + 8) * *v44.i64) / (v40 * *v44.i64);
    v49 = -v46;
    if (v45 >= 0.0)
    {
      v49 = v46;
    }

    else
    {
      v48 = -v48;
    }

    v50 = sqrt(v49 * v49 + v48 * v48);
    v51 = v42 * (v49 / v50 * a1);
    v52 = v42 * (v48 / v50 * a1);
    v53 = *(a8 + 72);
    LOWORD(v156) = 256;
    v145 = v41 + 1.0;
    if (fabs(v41) >= 0.0000001)
    {
      *&v83 = *v44.i64 * v43;
      v84 = *v44.i64 * v43 < 0.0;
      *&v85.f64[0] = v44.i64[0];
      v85.f64[1] = v53;
      v86 = vmulq_f64(vextq_s8(v44, v44, 8uLL), v85);
      v87 = *(a8 + 48);
      v147 = *v38;
      v148 = v87;
      v150 = v87;
      v88 = fabs(*v44.i64);
      v149.f64[0] = v39.f64[0] + v88 * (v51 * 0.5);
      v149.f64[1] = v47 + v88 * (v52 * 0.5);
      v89 = vdivq_f64(vsubq_f64(v86, vmulq_n_f64(v39, v43)), vdupq_lane_s64(v83, 0));
      v90 = vdup_n_s32(v84);
      v91.i64[0] = v90.u32[0];
      v91.i64[1] = v90.u32[1];
      v142 = vmulq_n_f64(vbslq_s8(vcltzq_s64(vshlq_n_s64(v91, 0x3FuLL)), vnegq_f64(v89), v89), v41 + 1.0);
      v151 = vaddq_f64(v39, vmulq_n_f64(v142, v88));
      v152 = v87;
      v92 = *(a8 + 80);
      v153 = *(a8 + 64);
      *v154 = v92;
      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a3, &v147);
      v93 = *(v38 + 16);
      v147 = *v38;
      v148 = v93;
      v94 = fabs(*(a8 + 56));
      v95 = *(a8 + 32);
      v96 = *(a8 + 40);
      v147.f64[0] = v95 + v51 * 0.5 * v94;
      v147.f64[1] = v96 + v52 * 0.5 * v94;
      v150 = v93;
      v149 = v147;
      v152 = v93;
      v151.f64[0] = v95 + v51 * v94;
      v151.f64[1] = v96 + v52 * v94;
      *v154 = v93;
      v153.f64[0] = v95 + v94 * v142.f64[0];
      v153.f64[1] = v96 + vmuld_lane_f64(v94, v142, 1);
    }

    else
    {
      v54 = *(a8 + 48);
      v147 = *v38;
      v148 = v54;
      v149 = v147;
      v150 = v54;
      v152 = v54;
      v55 = fabs(*v44.i64);
      v151.f64[0] = v39.f64[0] + v55 * v51;
      v151.f64[1] = v47 + v55 * v52;
      v56 = *(a8 + 80);
      v153 = *(a8 + 64);
      *v154 = v56;
    }

    *(a3[1] - 3) = 1;
    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a3, &v147);
    v97 = (a10 + 32);
    v98 = *(a10 + 32);
    v99 = *(a10 + 88);
    v100 = *(a10 + 72);
    v101 = *(a10 + 56);
    LOBYTE(v156) = 1;
    if (fabs(*(a6 + 104)) >= 0.0000001)
    {
      *&v123 = v99 * *v101.i64;
      v124 = v99 * *v101.i64 < 0.0;
      *&v125.f64[0] = v101.i64[0];
      v125.f64[1] = v100;
      v126 = vmulq_f64(vextq_s8(v101, v101, 8uLL), v125);
      v127 = *(a10 + 48);
      v147 = *v97;
      v148 = v127;
      v150 = v127;
      v128 = fabs(*v101.i64);
      v149.f64[0] = v98.f64[0] + v51 * 0.5 * v128;
      v149.f64[1] = v52 * 0.5 * v128 + v98.f64[1];
      v129 = vdivq_f64(vsubq_f64(v126, vmulq_n_f64(v98, v99)), vdupq_lane_s64(v123, 0));
      v130 = vdup_n_s32(v124);
      v131.i64[0] = v130.u32[0];
      v131.i64[1] = v130.u32[1];
      v146 = vmulq_n_f64(vbslq_s8(vcltzq_s64(vshlq_n_s64(v131, 0x3FuLL)), vnegq_f64(v129), v129), v145);
      v151 = vaddq_f64(v98, vmulq_n_f64(v146, v128));
      v152 = v127;
      v132 = *(a10 + 80);
      v153 = *(a10 + 64);
      *v154 = v132;
      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4, &v147);
      v133 = *(a10 + 48);
      v147 = *v97;
      v148 = v133;
      v134 = fabs(*(a10 + 56));
      v135 = *(a10 + 32);
      v136 = *(a10 + 40);
      v147.f64[0] = v135 + v51 * 0.5 * v134;
      v147.f64[1] = v136 + v52 * 0.5 * v134;
      v150 = v133;
      v149 = v147;
      v152 = v133;
      v151.f64[0] = v135 + v51 * v134;
      v151.f64[1] = v136 + v52 * v134;
      *v154 = v133;
      v153.f64[0] = v135 + v134 * v146.f64[0];
      v153.f64[1] = v136 + vmuld_lane_f64(v134, v146, 1);
    }

    else
    {
      v102 = *(a10 + 48);
      v147 = *v97;
      v148 = v102;
      v149 = v147;
      v150 = v102;
      v152 = v102;
      v103 = fabs(*v101.i64);
      v151.f64[0] = v98.f64[0] + v51 * v103;
      v151.f64[1] = v52 * v103 + v98.f64[1];
      v104 = *(a10 + 80);
      v153 = *(a10 + 64);
      *v154 = v104;
    }

    *(a4[1] - 3) = 1;
    return std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4, &v147);
  }
}

unint64_t OZShape::computeNormalCaps(double a1, uint64_t a2, uint64_t *a3, uint64_t *a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, char a10, char a11)
{
  v147 = 0u;
  memset(v148, 0, sizeof(v148));
  v145 = 0u;
  v146 = 0u;
  v143 = 0u;
  v144 = 0u;
  v141 = 0u;
  v142 = 0u;
  v149 = 1;
  v150 = 0;
  v137 = 0u;
  memset(v138, 0, sizeof(v138));
  v135 = 0u;
  v136 = 0u;
  v133 = 0u;
  v134 = 0u;
  v131 = 0u;
  v132 = 0u;
  v139 = 1;
  v140 = 0;
  v127 = 0u;
  memset(v128, 0, sizeof(v128));
  v125 = 0u;
  v126 = 0u;
  v123 = 0u;
  v124 = 0u;
  v121 = 0u;
  v122 = 0u;
  v129 = 1;
  v130 = 0;
  v117 = 0u;
  memset(v118, 0, sizeof(v118));
  v115 = 0u;
  v116 = 0u;
  v113 = 0u;
  v114 = 0u;
  v111 = 0u;
  v112 = 0u;
  v119 = 1;
  v120 = 0;
  if (a10)
  {
    v13.f64[0] = *(a8 + 120);
    v14 = *(a8 + 64);
    v15 = *(a8 + 104);
    v16 = *(a8 + 16);
    v141 = *a8;
    v142 = v16;
    v143 = v141;
    v144 = v16;
    v17 = fabs(v13.f64[0]);
    v18 = *(a8 + 88);
    v19 = vextq_s8(v18, v18, 8uLL);
    v20 = v13.f64[0] * v18.f64[0];
    v14.f64[1] = v13.f64[0];
    v13.f64[1] = *(a8 + 72);
    v21 = vmulq_f64(v14, v13);
    v14.f64[0] = *(a8 + 96);
    v18.f64[1] = v15;
    LOWORD(v150) = 257;
    v22 = vdivq_f64(vsubq_f64(v21, vmulq_f64(v19, v18)), vdupq_lane_s64(*&v20, 0));
    *&v19.f64[0] = vdup_n_s32(v20 < 0.0);
    v23.i64[0] = LODWORD(v19.f64[0]);
    v23.i64[1] = HIDWORD(v19.f64[0]);
    v24 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v23, 0x3FuLL)), vnegq_f64(v22), v22);
    v25 = vmulq_n_f64(vdivq_f64(vnegq_f64(v24), vdupq_lane_s64(COERCE__INT64(sqrt(vaddvq_f64(vmulq_f64(v24, v24)))), 0)), a1);
    v26 = *(a8 + 112);
    v145 = *(a8 + 96);
    v146 = v26;
    *v148 = v26;
    v147.f64[0] = v14.f64[0] + v17 * v25.f64[0];
    v147.f64[1] = v15 + vmuld_lane_f64(v17, v25, 1);
    LOWORD(v140) = 257;
    v27 = *(a8 + 16);
    v131 = *a8;
    v132 = v27;
    v133 = v131;
    v134 = v27;
    v136 = *(a8 + 112);
    v135 = v147;
    v137 = v131;
    *v138 = v27;
    v137 = vaddq_f64(v141, vmulq_n_f64(v25, fabs(*(a8 + 24))));
    BYTE1(v130) = 1;
    v28 = *(a6 + 16);
    v121 = *a6;
    v122 = v28;
    v123 = v121;
    v124 = v28;
    v29 = *(a6 + 112);
    v125 = *(a6 + 96);
    v126 = v29;
    v127 = vaddq_f64(v125, vmulq_n_f64(v25, fabs(*(a6 + 120))));
    *v128 = v29;
    BYTE1(v120) = 1;
    v111 = v121;
    v112 = v28;
    v30 = *(a6 + 16);
    v113 = *a6;
    v114 = v30;
    v31 = *(a6 + 112);
    v115 = v127;
    v116 = v31;
    v117 = vaddq_f64(v113, vmulq_n_f64(v25, fabs(*(a6 + 24))));
    *v118 = v30;
    if (a11)
    {
      v32 = *a3;
      v33 = a3[1] - *a3;
      if ((v33 + 135) >= 0x10F)
      {
        v34 = v33 / 136;
        if (v34 >= 0x28)
        {
          v34 = 40;
        }

        if (v34 <= 1)
        {
          v35 = 1;
        }

        else
        {
          v35 = v34;
        }

        v36 = (v35 + 7) & 0x78;
        v37 = vdupq_n_s64(v35 - 1);
        v38 = xmmword_2603490D0;
        v39 = xmmword_2603490E0;
        v40 = xmmword_260343DF0;
        v41 = xmmword_260343E00;
        v42 = vdupq_n_s64(8uLL);
        do
        {
          v43 = vmovn_s64(vcgeq_u64(v37, v41));
          if (vuzp1_s8(vuzp1_s16(v43, *v37.i8), *v37.i8).u8[0])
          {
            v32[134] = 1;
          }

          if (vuzp1_s8(vuzp1_s16(v43, *&v37), *&v37).i8[1])
          {
            v32[270] = 1;
          }

          if (vuzp1_s8(vuzp1_s16(*&v37, vmovn_s64(vcgeq_u64(v37, *&v40))), *&v37).i8[2])
          {
            v32[406] = 1;
            v32[542] = 1;
          }

          v44 = vmovn_s64(vcgeq_u64(v37, v39));
          if (vuzp1_s8(*&v37, vuzp1_s16(v44, *&v37)).i32[1])
          {
            v32[678] = 1;
          }

          if (vuzp1_s8(*&v37, vuzp1_s16(v44, *&v37)).i8[5])
          {
            v32[814] = 1;
          }

          if (vuzp1_s8(*&v37, vuzp1_s16(*&v37, vmovn_s64(vcgeq_u64(v37, *&v38)))).i8[6])
          {
            v32[950] = 1;
            v32[1086] = 1;
          }

          v39 = vaddq_s64(v39, v42);
          v40 = vaddq_s64(v40, v42);
          v41 = vaddq_s64(v41, v42);
          v32 += 1088;
          v38 = vaddq_s64(v38, v42);
          v36 -= 8;
        }

        while (v36);
      }

      v45 = *a4;
      v46 = a4[1] - *a4;
      if ((v46 + 135) >= 0x10F)
      {
        v47 = v46 / 136;
        if (v47 >= 0x28)
        {
          v47 = 40;
        }

        if (v47 <= 1)
        {
          v48 = 1;
        }

        else
        {
          v48 = v47;
        }

        v49 = (v48 + 7) & 0x78;
        v50 = vdupq_n_s64(v48 - 1);
        v51 = xmmword_2603490D0;
        v52 = xmmword_2603490E0;
        v53 = xmmword_260343DF0;
        v54 = xmmword_260343E00;
        v55 = vdupq_n_s64(8uLL);
        v56 = *a4;
        do
        {
          v57 = vmovn_s64(vcgeq_u64(v50, v54));
          if (vuzp1_s8(vuzp1_s16(v57, *v50.i8), *v50.i8).u8[0])
          {
            v56[134] = 1;
          }

          if (vuzp1_s8(vuzp1_s16(v57, *&v50), *&v50).i8[1])
          {
            v56[270] = 1;
          }

          if (vuzp1_s8(vuzp1_s16(*&v50, vmovn_s64(vcgeq_u64(v50, *&v53))), *&v50).i8[2])
          {
            v56[406] = 1;
            v56[542] = 1;
          }

          v58 = vmovn_s64(vcgeq_u64(v50, v52));
          if (vuzp1_s8(*&v50, vuzp1_s16(v58, *&v50)).i32[1])
          {
            v56[678] = 1;
          }

          if (vuzp1_s8(*&v50, vuzp1_s16(v58, *&v50)).i8[5])
          {
            v56[814] = 1;
          }

          if (vuzp1_s8(*&v50, vuzp1_s16(*&v50, vmovn_s64(vcgeq_u64(v50, *&v51)))).i8[6])
          {
            v56[950] = 1;
            v56[1086] = 1;
          }

          v52 = vaddq_s64(v52, v55);
          v53 = vaddq_s64(v53, v55);
          v54 = vaddq_s64(v54, v55);
          v56 += 1088;
          v51 = vaddq_s64(v51, v55);
          v49 -= 8;
        }

        while (v49);
      }
    }

    else
    {
      v45 = *a4;
    }

    *(v45 + 133) = 1;
    std::vector<OZShapeEdgePolygon>::insert(a4, v45, &v141);
    std::vector<OZShapeEdgePolygon>::insert(a4, *a4, &v131);
    v110 = *a3;
    *(v110 + 133) = 1;
    std::vector<OZShapeEdgePolygon>::insert(a3, v110, &v121);
    return std::vector<OZShapeEdgePolygon>::insert(a3, *a3, &v111);
  }

  else
  {
    v59.f64[0] = *(a7 + 56);
    v60 = *(a7 + 24);
    v61 = *a7;
    v62 = v59.f64[0] * v60 < 0.0;
    BYTE1(v150) = 1;
    v63 = fabs(v59.f64[0]);
    v64.f64[0] = *(a7 + 32);
    v64.f64[1] = v60;
    v65.f64[1] = *(a7 + 40);
    v65.f64[0] = v60;
    v61.f64[1] = v59.f64[0];
    v59.f64[1] = *(a7 + 8);
    v66 = vdivq_f64(vsubq_f64(vmulq_f64(v64, v65), vmulq_f64(v61, v59)), vdupq_lane_s64(COERCE__INT64(v59.f64[0] * v60), 0));
    v67 = vdup_n_s32(v62);
    v68.i64[0] = v67.u32[0];
    v68.i64[1] = v67.u32[1];
    v69 = vbslq_s8(vcltzq_s64(vshlq_n_s64(v68, 0x3FuLL)), vnegq_f64(v66), v66);
    v70 = *(a7 + 48);
    v141 = *(a7 + 32);
    v142 = v70;
    v71 = vmulq_n_f64(vdivq_f64(v69, vdupq_lane_s64(COERCE__INT64(sqrt(vaddvq_f64(vmulq_f64(v69, v69)))), 0)), a1);
    v143 = v141;
    v144 = v70;
    v72 = *(a7 + 80);
    v145 = *(a7 + 64);
    v146 = v72;
    v73 = *(a7 + 48);
    v145 = vaddq_f64(*(a7 + 64), vmulq_n_f64(v71, fabs(*(a7 + 88))));
    v74 = *(a7 + 80);
    v147 = *(a7 + 64);
    *v148 = v74;
    BYTE1(v140) = 1;
    v131 = v141;
    v132 = v73;
    v133 = v141;
    v134 = v73;
    v135 = vaddq_f64(v141, vmulq_n_f64(v71, v63));
    v136 = v73;
    v137 = v145;
    *v138 = v74;
    LOWORD(v130) = 257;
    v75 = *(a9 + 48);
    v121 = *(a9 + 32);
    v122 = v75;
    v76 = *(a9 + 48);
    v123 = *(a9 + 32);
    v124 = v76;
    v77 = *(a9 + 80);
    v78 = *(a9 + 64);
    v125 = vaddq_f64(v78, vmulq_n_f64(v71, fabs(*(a9 + 88))));
    v126 = v77;
    v127 = v78;
    *v128 = v77;
    LOWORD(v120) = 257;
    v111 = v123;
    v112 = v76;
    v79 = *(a9 + 48);
    v113 = *(a9 + 32);
    v114 = v79;
    v115 = vaddq_f64(v123, vmulq_n_f64(v71, fabs(*(a9 + 56))));
    v116 = v79;
    v80 = *(a9 + 80);
    v117 = v125;
    *v118 = v80;
    v81 = a3[1];
    if (a11)
    {
      v82 = v81 - *a3;
      if ((v82 + 135) >= 0x10F)
      {
        v83 = 0;
        v84 = v82 / 136;
        if (v84 >= 0x28)
        {
          v84 = 40;
        }

        if (v84 <= 1)
        {
          v84 = 1;
        }

        v85 = vdupq_n_s64(v84 - 1);
        v86 = (v84 + 7) & 0x78;
        v87 = (v81 - 2);
        v88 = xmmword_2603490D0;
        v89 = xmmword_2603490E0;
        v90 = xmmword_260343DF0;
        v91 = xmmword_260343E00;
        v92 = vdupq_n_s64(8uLL);
        do
        {
          v93 = vmovn_s64(vcgeq_u64(v85, v91));
          if (vuzp1_s8(vuzp1_s16(v93, *v85.i8), *v85.i8).u8[0])
          {
            *v87 = 1;
          }

          if (vuzp1_s8(vuzp1_s16(v93, *&v85), *&v85).i8[1])
          {
            *(v81 + 136 * (v83 ^ 0x1FFFFFFFFFFFFFFELL) + 134) = 1;
          }

          if (vuzp1_s8(vuzp1_s16(*&v85, vmovn_s64(vcgeq_u64(v85, *&v90))), *&v85).i8[2])
          {
            *(v81 + 136 * (v83 ^ 0xFFFFFFFFFFFFFFFDLL) + 134) = 1;
            *(v81 + 136 * (v83 ^ 0x1FFFFFFFFFFFFFFCLL) + 134) = 1;
          }

          v94 = vmovn_s64(vcgeq_u64(v85, v89));
          if (vuzp1_s8(*&v85, vuzp1_s16(v94, *&v85)).i32[1])
          {
            *(v81 + 136 * (v83 ^ 0xFFFFFFFFFFFFFFFBLL) + 134) = 1;
          }

          if (vuzp1_s8(*&v85, vuzp1_s16(v94, *&v85)).i8[5])
          {
            *(v81 + 136 * (v83 ^ 0x1FFFFFFFFFFFFFFALL) + 134) = 1;
          }

          if (vuzp1_s8(*&v85, vuzp1_s16(*&v85, vmovn_s64(vcgeq_u64(v85, *&v88)))).i8[6])
          {
            *(v81 + 136 * (v83 ^ 0xFFFFFFFFFFFFFFF9) + 134) = 1;
            *(v81 + 136 * (v83 ^ 0x1FFFFFFFFFFFFFF8) + 134) = 1;
          }

          v83 += 8;
          v89 = vaddq_s64(v89, v92);
          v90 = vaddq_s64(v90, v92);
          v91 = vaddq_s64(v91, v92);
          v88 = vaddq_s64(v88, v92);
          v87 -= 1088;
        }

        while (v86 != v83);
      }

      v95 = a4[1] - *a4;
      if ((v95 + 135) >= 0x10F)
      {
        v96 = 0;
        v97 = a4[1];
        v98 = v95 / 136;
        if (v98 >= 0x28)
        {
          v98 = 40;
        }

        if (v98 <= 1)
        {
          v98 = 1;
        }

        v99 = vdupq_n_s64(v98 - 1);
        v100 = (v98 + 7) & 0x78;
        v101 = xmmword_2603490D0;
        v102 = (v97 - 2);
        v103 = xmmword_2603490E0;
        v104 = xmmword_260343DF0;
        v105 = xmmword_260343E00;
        v106 = vdupq_n_s64(8uLL);
        do
        {
          v107 = vmovn_s64(vcgeq_u64(v99, v105));
          if (vuzp1_s8(vuzp1_s16(v107, *v99.i8), *v99.i8).u8[0])
          {
            *v102 = 1;
          }

          if (vuzp1_s8(vuzp1_s16(v107, *&v99), *&v99).i8[1])
          {
            *(v97 + 136 * (v96 ^ 0x1FFFFFFFFFFFFFFELL) + 134) = 1;
          }

          if (vuzp1_s8(vuzp1_s16(*&v99, vmovn_s64(vcgeq_u64(v99, *&v104))), *&v99).i8[2])
          {
            *(v97 + 136 * (v96 ^ 0xFFFFFFFFFFFFFFFDLL) + 134) = 1;
            *(v97 + 136 * (v96 ^ 0x1FFFFFFFFFFFFFFCLL) + 134) = 1;
          }

          v108 = vmovn_s64(vcgeq_u64(v99, v103));
          if (vuzp1_s8(*&v99, vuzp1_s16(v108, *&v99)).i32[1])
          {
            *(v97 + 136 * (v96 ^ 0xFFFFFFFFFFFFFFFBLL) + 134) = 1;
          }

          if (vuzp1_s8(*&v99, vuzp1_s16(v108, *&v99)).i8[5])
          {
            *(v97 + 136 * (v96 ^ 0x1FFFFFFFFFFFFFFALL) + 134) = 1;
          }

          if (vuzp1_s8(*&v99, vuzp1_s16(*&v99, vmovn_s64(vcgeq_u64(v99, *&v101)))).i8[6])
          {
            *(v97 + 136 * (v96 ^ 0xFFFFFFFFFFFFFFF9) + 134) = 1;
            *(v97 + 136 * (v96 ^ 0x1FFFFFFFFFFFFFF8) + 134) = 1;
          }

          v96 += 8;
          v103 = vaddq_s64(v103, v106);
          v104 = vaddq_s64(v104, v106);
          v105 = vaddq_s64(v105, v106);
          v101 = vaddq_s64(v101, v106);
          v102 -= 1088;
        }

        while (v100 != v96);
      }
    }

    *(v81 - 3) = 1;
    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a3, &v141);
    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a3, &v131);
    *(a4[1] - 3) = 1;
    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4, &v121);
    return std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a4, &v111);
  }
}

void OZShape::subdivideTriangle(uint64_t a1, int a2, uint64_t a3, uint64_t a4, uint64_t *a5, unint64_t a6, uint64_t a7, double *a8, __n128 a9, double *a10, __int16 a11, unsigned __int8 a12)
{
  v224 = *MEMORY[0x277D85DE8];
  v19 = *(a6 + 132);
  v205 = 0u;
  v206 = 0u;
  v207 = 0u;
  v208 = 0u;
  v209 = 0u;
  v210 = 0u;
  memset(v211, 0, sizeof(v211));
  v212 = 1;
  v213 = v19;
  v214 = 0;
  v215 = 0;
  v222 = 0u;
  memset(v223, 0, sizeof(v223));
  v220 = 0u;
  v221 = 0u;
  v218 = 0u;
  v219 = 0u;
  v216 = 0u;
  v217 = 0u;
  v20 = (*(*a1 + 176))(a1);
  if (!OZShapeEdgePolygon::isValid(a6))
  {
    return;
  }

  v21 = ((4.0 / a9.n128_f64[0] <= 0.174532925) & a12) != 0 ? 4.0 / a9.n128_f64[0] : 0.174532925;
  v22 = 1.0;
  if (*(a4 + 8))
  {
    v23 = 1.0;
  }

  else
  {
    v23 = 1.0;
    if (fabs(*(a4 + 224)) >= 0.0000001)
    {
      v24 = MEMORY[0x277CC08F0];
      OZChannel::getValueAsDouble((a1 + 13416), MEMORY[0x277CC08F0], 0.0);
      v23 = v25;
      OZChannel::getValueAsDouble((a1 + 13568), v24, 0.0);
      v22 = v26;
    }
  }

  if (a9.n128_f64[0] == 0.0)
  {
    return;
  }

  v183 = (a6 + 96);
  v27.f64[0] = *(a6 + 56);
  v27.f64[1] = *(a6 + 120);
  v28.f64[0] = *(a6 + 88);
  v28.f64[1] = *(a6 + 24);
  v29 = vmulq_f64(v27, v28);
  v30 = vmovn_s64(vcltzq_f64(v29));
  v34.f64[0] = v20 * v23;
  v181 = *a6;
  v182 = v28.f64[1];
  v184 = v27.f64[1];
  v180 = *(a6 + 96);
  v31 = vdivq_f64(vsubq_f64(vmulq_n_f64(v180, v28.f64[1]), vmulq_n_f64(*a6, v27.f64[1])), vdupq_laneq_s64(v29, 1));
  v32 = vdup_lane_s32(v30, 1);
  v33.i64[0] = v32.i32[0];
  v33.i64[1] = v32.i32[1];
  v34.f64[1] = v22;
  v35 = vmulq_f64(v34, vbslq_s8(v33, vnegq_f64(v31), v31));
  v36 = vdupq_n_s64(0x3E7AD7F29ABCAF48uLL);
  v37 = vbicq_s8(v35, vcgtq_f64(v36, vabsq_f64(v35)));
  v38 = v37.f64[1];
  v39 = sqrt(vmulq_f64(v37, v37).f64[0] + vmuld_lane_f64(v37.f64[1], v37, 1));
  if (v39 == 0.0)
  {
    return;
  }

  v178 = (a6 + 64);
  v40 = (a6 + 32);
  v41.f64[0] = *(a6 + 32);
  v177 = *(a6 + 64);
  v41.f64[1] = *(a6 + 88);
  v42.f64[0] = v41.f64[1];
  v42.f64[1] = *(a6 + 40);
  v43 = vdivq_f64(vsubq_f64(vmulq_n_f64(v177, *(a6 + 56)), vmulq_f64(v41, v42)), vdupq_lane_s64(*&v29.f64[0], 0));
  v44 = vdup_lane_s32(v30, 0);
  v45.i64[0] = v44.i32[0];
  v45.i64[1] = v44.i32[1];
  v46 = vmulq_f64(v34, vbslq_s8(v45, vnegq_f64(v43), v43));
  v47 = vbicq_s8(v46, vcgtq_f64(v36, vabsq_f64(v46)));
  v48 = sqrt(vaddvq_f64(vmulq_f64(v47, v47)));
  if (v48 == 0.0)
  {
    return;
  }

  v49 = vaddvq_f64(vmulq_f64(v37, a9.n128_u64[0])) / (v39 * a9.n128_f64[0]);
  v50 = (vmulq_f64(v37, v47).f64[0] + vmuld_lane_f64(v37.f64[1], v47, 1)) / (v39 * v48);
  v51 = 1.0;
  v52 = 1.0;
  if (v49 <= 1.0)
  {
    v52 = v49;
    if (v49 < -1.0)
    {
      v52 = -1.0;
    }
  }

  v185 = v47;
  v186 = v37.f64[0];
  v187 = *(a6 + 88);
  v179 = v22;
  v189 = a5;
  if (v50 <= 1.0)
  {
    v51 = v50;
    if (v50 < -1.0)
    {
      v51 = -1.0;
    }
  }

  v53 = acos(v52);
  v54 = v38 >= 0.0 ? v53 : -v53;
  v55 = v53;
  v56 = acos(v51);
  if ((*&v55 & 0x7FFFFFFFFFFFFFFFuLL) > 0x7FEFFFFFFFFFFFFFLL || (*&v56 & 0x7FFFFFFFFFFFFFFFuLL) > 0x7FEFFFFFFFFFFFFFLL || vabdd_f64(0.0, v56) < 0.0000001)
  {
    return;
  }

  v57 = fabs(v56);
  v58 = v186 * v185.f64[1] - v38 * v185.f64[0];
  if (!a11)
  {
    v61 = v58 < 0.0 && a2 == 1;
    if (!v61 || fabs(v58) < 0.0000001)
    {
      v60 = v54 + v56;
      goto LABEL_35;
    }

LABEL_88:
    if (v57 > v21)
    {
      v119 = v189[1];
      if (v119 != *v189)
      {
        *(v119 - 1) = 1;
        *(a6 + 135) = 1;
      }
    }

LABEL_91:

    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v189, a6);
    return;
  }

  v59 = v58 > 0.0 && a2 == 1;
  if (v59 && v58 >= 0.0000001)
  {
    goto LABEL_88;
  }

  v60 = v54 - v56;
LABEL_35:
  v62 = v60 - v54;
  if (a2 == 2 || (v63 = fabs(v62), !a2) && v63 <= v21)
  {
    v64 = v58 <= 0.0;
    if (!a11)
    {
      v64 = v58 >= 0.0;
    }

    if (v64)
    {
      v192 = vdivq_f64(vsubq_f64(vmulq_n_f64(v177, v184), vmulq_n_f64(v180, v187)), vdupq_lane_s64(COERCE__INT64(v184 * v187), 0));
      v191 = vnegq_f64(v192);
      v65 = vdup_n_s32(v184 * v187 < 0.0);
      v66.i64[0] = v65.u32[0];
      v66.i64[1] = v65.u32[1];
      v188 = vcltzq_s64(vshlq_n_s64(v66, 0x3FuLL));
      v202 = 0uLL;
      v67 = __sincos_stret(v54 + v62 * 0.5);
      v204.f64[0] = v181.f64[0] + v182 * (v67.__cosval * a9.n128_f64[0] / v20 / v23);
      v204.f64[1] = v181.f64[1] + v182 * (v67.__sinval * a9.n128_f64[0] / v179);
      v68 = *(a6 + 16);
      v205 = *a6;
      v206 = v68;
      v69 = *(a6 + 48);
      v207 = *v40;
      v208 = v69;
      v70 = *(a6 + 80);
      v209 = *v178;
      v210 = v70;
      v71 = *(a6 + 112);
      *v211 = *v183;
      *&v211[16] = v71;
      *&v71 = *(a7 + 120);
      v72 = *(a7 + 88);
      v73 = *&v71 * v72;
      v74 = *(a7 + 104);
      v196.f64[0] = *(a7 + 96);
      v196.f64[1] = v74;
      v75 = *&v71 * *(a7 + 64) - v72 * v196.f64[0] / (*&v71 * v72);
      v76 = *&v71 * *(a7 + 72) - v72 * v74 / (*&v71 * v72);
      *v200.i64 = v75;
      *&v200.i64[1] = v76;
      if (v73 < 0.0)
      {
        v75 = -v75;
        v76 = -v76;
        *v200.i64 = v75;
        *&v200.i64[1] = v76;
      }

      v77 = vbslq_s8(v188, v191, v192);
      v78 = sqrt(v75 * v75 + v76 * v76);
      if (fabs(v78) >= 0.000000100000001)
      {
        *v200.i64 = v75 / v78;
        *&v200.i64[1] = v76 / v78;
      }

      v79 = vnegq_f64(v77);
      v80 = sqrt(vaddvq_f64(vmulq_f64(v77, v77)));
      v81 = fabs(v80);
      v193 = *&v80;
      v195 = v77;
      if (v81 >= 0.000000100000001)
      {
        v79 = vdivq_f64(v79, vdupq_lane_s64(*&v80, 0));
      }

      v203 = v79;
      __p[0] = 0;
      __p[1] = 0;
      *&v199 = 0;
      if (PCAlgorithm::findIntersection(&v196, &v200, &v204, &v203, &v202))
      {
        v82 = *v183;
        v209 = v202;
        *v211 = v82;
        v211[32] = 1;
        v211[34] = 0;
        std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](__p, &v205);
        *v211 = v202;
        v209 = v204;
        std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](__p, &v205);
        v83 = a8[15];
        v84 = a8[11];
        v85 = v83 * v84;
        v86 = a8[9];
        v87 = v83 * a8[8] - v84 * a8[12] / (v83 * v84);
        v88 = a8[13];
        v196.f64[0] = a8[12];
        v196.f64[1] = v88;
        v89 = v83 * v86 - v84 * v88 / (v83 * v84);
        *v200.i64 = v87;
        *&v200.i64[1] = v89;
        if (v85 < 0.0)
        {
          v87 = -v87;
          v89 = -v89;
          *v200.i64 = v87;
          *&v200.i64[1] = v89;
        }

        v90 = v195;
        v91 = sqrt(v87 * v87 + v89 * v89);
        if (fabs(v91) >= 0.000000100000001)
        {
          *v200.i64 = v87 / v91;
          *&v200.i64[1] = v89 / v91;
        }

        if (v81 >= 0.000000100000001)
        {
          v90 = vdivq_f64(v195, vdupq_lane_s64(v193, 0));
        }

        v203 = v90;
        if (PCAlgorithm::findIntersection(&v196, &v200, &v204, &v203, &v202))
        {
          v209 = v202;
          *v211 = v204;
          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](__p, &v205);
          v92 = *v178;
          *v211 = v202;
          v209 = v92;
          v211[34] = 1;
          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](__p, &v205);
          v93 = __p[0];
          v94 = __p[1];
          if (__p[1] != __p[0])
          {
            v95 = 0xF0F0F0F0F0F0F0F1 * ((__p[1] - __p[0]) >> 3);
            if (HIBYTE(a11))
            {
LABEL_57:
              std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(v189, *v189, v93, v94, v95);
              goto LABEL_109;
            }

LABEL_162:
            std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(v189, v189[1], __p[0], __p[1], v95);
            goto LABEL_109;
          }

          goto LABEL_109;
        }

        if (!HIBYTE(a11))
        {
LABEL_108:
          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v189, a6);
          goto LABEL_109;
        }
      }

      else if (!HIBYTE(a11))
      {
        goto LABEL_108;
      }

      std::vector<OZShapeEdgePolygon>::insert(v189, *v189, a6);
      goto LABEL_109;
    }

LABEL_81:
    if (HIBYTE(a11))
    {
      v118 = *v189;

      std::vector<OZShapeEdgePolygon>::insert(v189, v118, a6);
      return;
    }

    goto LABEL_91;
  }

  if (!a2)
  {
    v202 = 0uLL;
    v120 = *(a7 + 120);
    v121 = *(a7 + 88);
    v122 = v120 * v121;
    v123 = *(a7 + 72);
    v124 = v120 * *(a7 + 64) - v121 * *(a7 + 96) / (v120 * v121);
    v125 = *(a7 + 104);
    v196.f64[0] = *(a7 + 96);
    v196.f64[1] = v125;
    v126 = v120 * v123 - v121 * v125 / (v120 * v121);
    *v200.i64 = v124;
    *&v200.i64[1] = v126;
    if (v122 < 0.0)
    {
      v124 = -v124;
      v126 = -v126;
      *v200.i64 = v124;
      *&v200.i64[1] = v126;
    }

    v127 = sqrt(v124 * v124 + v126 * v126);
    if (fabs(v127) >= 0.000000100000001)
    {
      v124 = v124 / v127;
      v126 = v126 / v127;
      *v200.i64 = v124;
      *&v200.i64[1] = v126;
    }

    v128 = a8[15];
    v129 = a8[11];
    v130 = v128 * v129;
    v131 = a8[9];
    v132 = v128 * a8[8] - v129 * a8[12] / (v128 * v129);
    v133 = a8[13];
    v204.f64[0] = a8[12];
    v204.f64[1] = v133;
    v134 = v128 * v131 - v129 * v133 / (v128 * v129);
    *v203.i64 = v132;
    *&v203.i64[1] = v134;
    if (v130 < 0.0)
    {
      *v200.i64 = -v124;
      *&v200.i64[1] = -v126;
    }

    v135 = sqrt(v132 * v132 + v134 * v134);
    if (fabs(v135) >= 0.000000100000001)
    {
      *v203.i64 = v132 / v135;
      *&v203.i64[1] = v134 / v135;
    }

    __p[0] = 0;
    __p[1] = 0;
    *&v199 = 0;
    if (PCAlgorithm::findIntersection(&v196, &v200, &v204, &v203, &v202))
    {
      v136 = *(a6 + 16);
      v205 = *a6;
      v206 = v136;
      v137 = *(a6 + 48);
      v207 = *v40;
      v208 = v137;
      v138 = *(a6 + 80);
      v139 = *(a6 + 112);
      *v211 = *v183;
      *&v211[16] = v139;
      v209 = v202;
      v210 = v138;
      *v211 = *(a6 + 96);
      v211[32] = 1;
      v211[34] = 0;
      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](__p, &v205);
      v140 = *(a6 + 80);
      v209 = *v178;
      v210 = v140;
      *v211 = v202;
      v211[34] = 1;
      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](__p, &v205);
      if (HIBYTE(a11))
      {
        std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(v189, *v189, __p[0], __p[1], 0xF0F0F0F0F0F0F0F1 * ((__p[1] - __p[0]) >> 3));
      }

      else
      {
        std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(v189, v189[1], __p[0], __p[1], 0xF0F0F0F0F0F0F0F1 * ((__p[1] - __p[0]) >> 3));
      }

      goto LABEL_109;
    }

    BYTE2(v176) = a12;
    LOWORD(v176) = a11;
    OZShape::subdivideTriangle(a1, 2, a3, a4, __p, a6, a7, a8, a9, a10, v176);
    v93 = __p[0];
    v94 = __p[1];
    if (__p[1] != __p[0])
    {
      v95 = 0xF0F0F0F0F0F0F0F1 * ((__p[1] - __p[0]) >> 3);
      if (HIBYTE(a11))
      {
        goto LABEL_57;
      }

      goto LABEL_162;
    }

LABEL_109:
    v141 = __p[0];
    if (!__p[0])
    {
      return;
    }

    __p[1] = __p[0];
    goto LABEL_111;
  }

  if (v63 <= v21)
  {
    goto LABEL_81;
  }

  v200 = 0uLL;
  v201 = 0;
  std::vector<OZShapeEdgePolygon>::reserve(&v200, 0x14uLL);
  v96 = *(a7 + 112);
  v222 = *(a7 + 96);
  *v223 = v96;
  *&v223[15] = *(a7 + 127);
  v97 = v62 / (v63 / v21);
  v98 = *(a7 + 48);
  v218 = *(a7 + 32);
  v219 = v98;
  v99 = *(a7 + 80);
  v220 = *(a7 + 64);
  v221 = v99;
  v100 = *(a7 + 16);
  v216 = *a7;
  v217 = v100;
  if (v54 <= v60)
  {
    while (v54 < v60)
    {
      v142 = *(a6 + 16);
      v205 = *a6;
      v206 = v142;
      v207 = v205;
      v208 = v142;
      v54 = v97 + v54;
      v143 = __sincos_stret(v54);
      if (a11)
      {
        v209 = v222;
        v210 = *v223;
        v144 = v211;
        v145 = &v206 + 1;
        v146 = &v211[8];
      }

      else
      {
        *v211 = v220;
        *&v211[16] = v221;
        v144 = &v209;
        v145 = &v208 + 1;
        v146 = &v209.f64[1];
      }

      v147 = *(a6 + 16);
      *v144 = *a6;
      v144[1] = v147;
      v147.f64[0] = *v145;
      v144->f64[0] = v144->f64[0] + v143.__cosval * a9.n128_f64[0] * *v145 / v20 / v23;
      *v146 = *v146 + v143.__sinval * a9.n128_f64[0] * v147.f64[0] / v179;
      if (OZShapeEdgePolygon::isValid(&v205))
      {
        if (v200.i64[1] == v200.i64[0])
        {
          goto LABEL_134;
        }

        *__p = *(v200.i64[1] - 72);
        v199 = *(v200.i64[1] - 56);
        v196 = v209;
        v197 = v210;
        PCMatrix44Tmpl<double>::transform<double>(a10, __p, __p);
        PCMatrix44Tmpl<double>::transform<double>(a10, v196.f64, v196.f64);
        v148 = *(&v197 + 1);
        v149 = *(&v199 + 1) * *(&v197 + 1);
        if (vabdd_f64(0.0, *(&v199 + 1) * *(&v197 + 1)) < 0.0000001)
        {
          goto LABEL_134;
        }

        if (a11)
        {
          v150 = *(&v199 + 1) * v196.f64[0] - *(&v197 + 1) * *__p;
          v151 = &v196.f64[1];
          v152 = *(&v199 + 1);
          v153 = &__p[1];
        }

        else
        {
          v150 = *(&v197 + 1) * *__p - *(&v199 + 1) * v196.f64[0];
          v151 = &__p[1];
          v152 = *(&v197 + 1);
          v153 = &v196.f64[1];
          v148 = *(&v199 + 1);
        }

        v154 = (v152 * *v151 - v148 * *v153) / v149;
        v155 = v150 / v149;
        v156 = -(v150 / v149);
        v157 = v149 < 0.0;
        if (v149 >= 0.0)
        {
          v158 = v155;
        }

        else
        {
          v158 = v156;
        }

        if (v157)
        {
          v154 = -v154;
        }

        if (sqrt(v158 * v158 + v154 * v154) >= 1.0)
        {
LABEL_134:
          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v200.i64, &v205);
          v222 = *v211;
          *v223 = *&v211[16];
          *&v223[15] = *&v211[31];
          v218 = v207;
          v219 = v208;
          v220 = v209;
          v221 = v210;
          v216 = v205;
          v217 = v206;
        }
      }
    }

    v159 = v200.i64[1];
    v141 = v200.i64[0];
    if (v200.i64[1] != v200.i64[0])
    {
      v160 = -72;
      if (a11)
      {
        v160 = -40;
      }

      v161 = (a6 + 64);
      if (a11)
      {
        v161 = (a6 + 96);
      }

      v162 = v161[1];
      v163 = (v200.i64[1] + v160);
      *v163 = *v161;
      v163[1] = v162;
      if (!OZShapeEdgePolygon::isValid((v159 - 136)))
      {
        v200.i64[1] -= 136;
      }

      if (!OZShapeEdgePolygon::isValid(v200.i64[0]))
      {
        v164 = v200.i64[0];
        if (v200.i64[0] + 136 != v200.i64[1])
        {
          v165 = v200.i64[1] - v200.i64[0] - 272;
          memmove(v200.i64[0], (v200.i64[0] + 136), 136 * (v165 / 0x88) + 136);
          v164 += 136 * (v165 / 0x88) + 136;
        }

        v200.i64[1] = v164;
      }

      if ((a11 & 0x100) == 0)
      {
        v141 = v200.i64[0];
        if (v200.i64[1] == v200.i64[0])
        {
          goto LABEL_171;
        }

        v173 = 0;
        v174 = 1;
        do
        {
          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v189, v141 + 136 * v173);
          v173 = v174;
          v141 = v200.i64[0];
        }

        while (0xF0F0F0F0F0F0F0F1 * ((v200.i64[1] - v200.i64[0]) >> 3) > v174++);
        goto LABEL_170;
      }

      goto LABEL_148;
    }
  }

  else
  {
    while (v54 > v60 || vabdd_f64(v54, v60) < 0.0000001)
    {
      v101 = *(a6 + 16);
      v205 = *a6;
      v206 = v101;
      v207 = v205;
      v208 = v101;
      v54 = v97 + v54;
      v102 = __sincos_stret(v54);
      if (a11)
      {
        *v211 = v220;
        *&v211[16] = v221;
        v103 = &v209;
        v104 = &v208 + 1;
        v105 = &v209.f64[1];
      }

      else
      {
        v209 = v222;
        v210 = *v223;
        v103 = v211;
        v104 = &v206 + 1;
        v105 = &v211[8];
      }

      v106 = *(a6 + 16);
      *v103 = *a6;
      v103[1] = v106;
      v106.f64[0] = *v104;
      v103->f64[0] = v103->f64[0] + v102.__cosval * a9.n128_f64[0] * *v104 / v20 / v23;
      *v105 = *v105 + v102.__sinval * a9.n128_f64[0] * v106.f64[0] / v179;
      if (OZShapeEdgePolygon::isValid(&v205))
      {
        if (v200.i64[1] == v200.i64[0])
        {
          goto LABEL_80;
        }

        *__p = *(v200.i64[1] - 72);
        v199 = *(v200.i64[1] - 56);
        v196 = v209;
        v197 = v210;
        PCMatrix44Tmpl<double>::transform<double>(a10, __p, __p);
        PCMatrix44Tmpl<double>::transform<double>(a10, v196.f64, v196.f64);
        v107 = *(&v199 + 1);
        v108 = *(&v199 + 1) * *(&v197 + 1);
        if (vabdd_f64(0.0, *(&v199 + 1) * *(&v197 + 1)) < 0.0000001)
        {
          goto LABEL_80;
        }

        if (a11)
        {
          v109 = *(&v197 + 1) * *__p - *(&v199 + 1) * v196.f64[0];
          v110 = &__p[1];
          v111 = *(&v197 + 1);
          v112 = &v196.f64[1];
        }

        else
        {
          v109 = *(&v199 + 1) * v196.f64[0] - *(&v197 + 1) * *__p;
          v110 = &v196.f64[1];
          v111 = *(&v199 + 1);
          v112 = &__p[1];
          v107 = *(&v197 + 1);
        }

        v113 = (v111 * *v110 - v107 * *v112) / v108;
        v114 = v109 / v108;
        v115 = -(v109 / v108);
        v116 = v108 < 0.0;
        if (v108 >= 0.0)
        {
          v117 = v114;
        }

        else
        {
          v117 = v115;
        }

        if (v116)
        {
          v113 = -v113;
        }

        if (sqrt(v117 * v117 + v113 * v113) >= 1.0)
        {
LABEL_80:
          std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](v200.i64, &v205);
          v222 = *v211;
          *v223 = *&v211[16];
          *&v223[15] = *&v211[31];
          v218 = v207;
          v219 = v208;
          v220 = v209;
          v221 = v210;
          v216 = v205;
          v217 = v206;
        }
      }
    }

    v166 = v200.i64[1];
    v141 = v200.i64[0];
    if (v200.i64[1] != v200.i64[0])
    {
      v167 = -40;
      if (a11)
      {
        v167 = -72;
      }

      v168 = (a6 + 64);
      if (!a11)
      {
        v168 = (a6 + 96);
      }

      v169 = v168[1];
      v170 = (v200.i64[1] + v167);
      *v170 = *v168;
      v170[1] = v169;
      if (!OZShapeEdgePolygon::isValid((v166 - 136)))
      {
        v200.i64[1] -= 136;
      }

      if (!OZShapeEdgePolygon::isValid(v200.i64[0]))
      {
        v171 = v200.i64[0];
        if (v200.i64[0] + 136 != v200.i64[1])
        {
          v172 = v200.i64[1] - v200.i64[0] - 272;
          memmove(v200.i64[0], (v200.i64[0] + 136), 136 * (v172 / 0x88) + 136);
          v171 += 136 * (v172 / 0x88) + 136;
        }

        v200.i64[1] = v171;
      }

      if (!HIBYTE(a11))
      {
        std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(v189, v189[1], v200.i64[0], v200.i64[1], 0xF0F0F0F0F0F0F0F1 * ((v200.i64[1] - v200.i64[0]) >> 3));
        goto LABEL_170;
      }

LABEL_148:
      std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(v189, *v189, v200.i64[0], v200.i64[1], 0xF0F0F0F0F0F0F0F1 * ((v200.i64[1] - v200.i64[0]) >> 3));
LABEL_170:
      v141 = v200.i64[0];
    }
  }

LABEL_171:
  if (v141)
  {
    v200.i64[1] = v141;
LABEL_111:
    operator delete(v141);
  }
}

void sub_260302A54(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, void *__p, uint64_t a53)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](uint64_t *a1, uint64_t a2)
{
  v3 = a1[1];
  if (v3 >= a1[2])
  {
    result = std::vector<OZShapeEdgePolygon>::__emplace_back_slow_path<OZShapeEdgePolygon const&>(a1, a2);
  }

  else
  {
    v4 = (a2 + 16);
    v5 = (v3 + 16);
    v6 = 4;
    do
    {
      *(v5 - 1) = *(v4 - 1);
      v7 = *v4;
      v4 += 2;
      *v5 = v7;
      v5 += 2;
      --v6;
    }

    while (v6);
    *(v3 + 128) = *(a2 + 128);
    result = v3 + 136;
  }

  a1[1] = result;
  return result;
}

unint64_t std::vector<OZShapeEdgePolygon>::insert(uint64_t *a1, uint64_t a2, unint64_t a3)
{
  v4 = a2;
  v6 = a1[1];
  v7 = a1[2];
  if (v6 >= v7)
  {
    v17 = *a1;
    v18 = 0xF0F0F0F0F0F0F0F1 * ((v6 - *a1) >> 3) + 1;
    if (v18 > 0x1E1E1E1E1E1E1E1)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v19 = a2 - v17;
    v20 = 0xF0F0F0F0F0F0F0F1 * ((v7 - v17) >> 3);
    v21 = 2 * v20;
    if (2 * v20 <= v18)
    {
      v21 = 0xF0F0F0F0F0F0F0F1 * ((v6 - *a1) >> 3) + 1;
    }

    if (v20 >= 0xF0F0F0F0F0F0F0)
    {
      v22 = 0x1E1E1E1E1E1E1E1;
    }

    else
    {
      v22 = v21;
    }

    v32 = a1;
    if (v22)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<OZShapeEdgePolygon>>(a1, v22);
    }

    __p = 0;
    v29 = 8 * (v19 >> 3);
    v30 = v29;
    v31 = 0;
    std::__split_buffer<OZShapeEdgePolygon>::emplace_back<OZShapeEdgePolygon const&>(&__p, a3);
    v4 = std::vector<OZShapeEdgePolygon>::__swap_out_circular_buffer(a1, &__p, v4);
    if (v30 != v29)
    {
      v30 = (v30 - v29 - 136) % 0x88uLL + v29;
    }

    if (__p)
    {
      operator delete(__p);
    }
  }

  else if (a2 == v6)
  {
    v23 = (a3 + 16);
    v24 = (v6 + 16);
    v25 = 4;
    do
    {
      *(v24 - 1) = *(v23 - 1);
      v26 = *v23;
      v23 += 2;
      *v24 = v26;
      v24 += 2;
      --v25;
    }

    while (v25);
    *(v6 + 128) = *(a3 + 128);
    a1[1] = v6 + 136;
  }

  else
  {
    std::vector<OZShapeEdgePolygon>::__move_range(a1, a2, v6, a2 + 136);
    v8 = a1[1] <= a3 || v4 > a3;
    v9 = 136;
    if (v8)
    {
      v9 = 0;
    }

    v10 = a3 + v9;
    *v4 = *v10;
    v11 = *(v10 + 16);
    v12 = *(v10 + 32);
    v13 = *(v10 + 64);
    *(v4 + 48) = *(v10 + 48);
    *(v4 + 64) = v13;
    *(v4 + 16) = v11;
    *(v4 + 32) = v12;
    v14 = *(v10 + 80);
    v15 = *(v10 + 96);
    v16 = *(v10 + 112);
    *(v4 + 128) = *(v10 + 128);
    *(v4 + 96) = v15;
    *(v4 + 112) = v16;
    *(v4 + 80) = v14;
  }

  return v4;
}

void sub_260302D1C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, uint64_t a12)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void OZShape::computeSoftEdges(uint64_t a1, const CMTime *a2, uint64_t a3, uint64_t a4, int a5, char a6, int a7, double a8)
{
  v17 = 0x3FF0000000000000;
  v14 = 0x3FF0000000000000;
  v11 = 0x3FF0000000000000;
  v8 = 0x3FF0000000000000;
  v9 = 0u;
  v10 = 0u;
  v12 = 0u;
  v13 = 0u;
  v15 = 0u;
  v16 = 0u;
  OZShape::computeOutlinePolygons(a1, (a4 + 312), a4, a2, a3, &v8, 1, a5, a8, a6, a7, 0);
}

void OZShape::computeOutline(uint64_t a1, const CMTime *a2, uint64_t a3, uint64_t *a4, double *a5, int a6, int a7, double a8)
{
  if (*(a3 + 1195) == 1)
  {
    a4[43] = a4[42];
    a4[46] = a4[45];
  }

  v15 = a8 * 0.5;
  OZShape::computeOutlinePolygons(a1, a4 + 42, a4, a2, a3, a5, a6, a7, a8 * 0.5, 1, 1, 1u);
  OZShape::computeOutlinePolygons(a1, a4 + 42, a4, a2, a3, a5, a6, a7, v15, 0, -1, 1u);
  *(a3 + 1195) = 0;
}

uint64_t OZShape::isWriteOnEffectEnabled(uint64_t a1, uint64_t a2)
{
  if (!*(a2 + 8))
  {
    return 0;
  }

  v3 = *(a2 + 72);
  if (!*(a2 + 168) || (result = 0, v5 = vabdd_f64(*(a2 + 80), v3), v5 <= 1.0) && fabs(v5 + -1.0) >= 0.0000001)
  {
    if (fabs(v3) >= 0.0000001 || fabs(*(a2 + 80) + -1.0) >= 0.0000001 || fabs(*(a2 + 88)) >= 0.0000001 || OZChannel::hasKeypoints((a1 + 9976)) || OZChannel::hasKeypoints((a1 + 10128)) || OZChannel::hasKeypoints((a1 + 10592)))
    {
      return 1;
    }

    else
    {
      v6 = *(*a1 + 160);

      return v6(a1);
    }
  }

  return result;
}

void OZShape::getWriteOnEffect(uint64_t a1, const CMTime *a2, uint64_t a3, int8x16_t a4, double a5, double a6, double a7, int8x16_t a8, double a9, int8x16_t a10, uint64_t a11, _DWORD *a12, _DWORD *a13, void *a14, void *a15, void *a16)
{
  v16 = a13;
  v17 = *(a3 + 72);
  v18 = *(a3 + 80);
  if (vabdd_f64(v17, v18) < 0.0000001 || v17 > v18)
  {
    if (a12)
    {
      *a12 = 0;
    }

    if (a13)
    {
      v20 = 0;
      goto LABEL_426;
    }

    return;
  }

  v22 = *(a3 + 752);
  v23 = 192;
  if (*(a3 + 112))
  {
    v23 = 400;
  }

  v24 = (v22 + v23);
  v25 = 240;
  if (*(a3 + 112))
  {
    v25 = 448;
  }

  v199 = v25;
  if (*(a3 + 112))
  {
    v26 = 424;
  }

  else
  {
    v26 = 216;
  }

  v197 = v24;
  if (v24[1] == *v24)
  {
    goto LABEL_416;
  }

  v28 = a1;
  if (*(a3 + 180))
  {
    v29 = 760;
  }

  else
  {
    v29 = 368;
  }

  v30 = v18 - v17;
  *a8.i64 = v17 + *(a3 + 88);
  *a4.i64 = v30 + *a8.i64;
  if (*(a3 + 168))
  {
    v31 = 1.0;
    v32 = 0.0;
    v33 = *a8.i64 >= 1.0 || *a8.i64 < 0.0;
    *a10.i64 = *a8.i64 - trunc(*a8.i64);
    v34.f64[0] = NAN;
    v34.f64[1] = NAN;
    v35 = vnegq_f64(v34);
    v36 = vbslq_s8(v35, a10, a8);
    if (v33)
    {
      a8.i64[0] = v36.i64[0];
    }

    if (*a4.i64 > 1.0 || *a4.i64 <= 0.0)
    {
      *v36.i64 = *a4.i64 - trunc(*a4.i64);
      a4.i64[0] = vbslq_s8(v35, v36, a4).u64[0];
    }
  }

  else
  {
    v31 = 1.0;
    if (*a8.i64 <= 1.0)
    {
      v32 = *a8.i64;
    }

    else
    {
      v32 = 1.0;
    }

    if (*a8.i64 < 0.0)
    {
      v32 = 0.0;
    }

    if (*a4.i64 <= 1.0)
    {
      v31 = v30 + *a8.i64;
    }

    if (*a4.i64 < 0.0)
    {
      v31 = 0.0;
    }

    *a4.i64 = v31;
    *a8.i64 = v32;
  }

  v37 = fabs(v30);
  v38 = v37 > 1.0;
  if (fabs(v37 + -1.0) < 0.0000001)
  {
    v38 = 1;
  }

  if (v38)
  {
    v39 = v31;
  }

  else
  {
    v39 = *a4.i64;
  }

  if (v38)
  {
    v40 = v32;
  }

  else
  {
    v40 = *a8.i64;
  }

  *(a3 + 328) = *(a3 + 320);
  *(a3 + 352) = *(a3 + 344);
  *(a3 + 304) = *(a3 + 296);
  v42 = !OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0) || OZChannel::getValueAsInt((v28 + 1072), MEMORY[0x277CC08F0], 0.0) == 4 && (OZChannel::getValueAsDouble((v28 + 12072), a2, 0.0), v41 < 0.01) || OZChannel::getValueAsInt((v28 + 1072), MEMORY[0x277CC08F0], 0.0) == 5;
  v195 = v42;
  v198 = (v22 + v26);
  v192 = a3 + v29;
  if (OZChannel::getValueAsInt((v28 + 1072), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    OZChannel::getValueAsDouble((v28 + 12072), a2, 0.0);
    v193 = v43 > 0.99;
  }

  else
  {
    v193 = 0;
  }

  v44 = 0;
  v45 = fabs(v39 + -1.0);
  v46 = 0.5;
  v183 = v16;
  v184 = v28;
  v188 = v22;
  v182 = v45;
  do
  {
    v47 = v198[1] - *v198;
    v48 = vcvtmd_s64_f64(v40 * v47 + v46 + 0.0000001);
    v49 = vcvtmd_s64_f64(v39 * v47 + v46 + 0.0000001);
    if (v40 <= v39)
    {
      v50 = v49;
    }

    else
    {
      v50 = v198[1] - *v198;
    }

    v51 = v50 == v47;
    if (v50 == v47)
    {
      v52 = -1;
    }

    else
    {
      v52 = 0;
    }

    v53 = v50 - v51;
    v54 = v48 - (v48 == v47);
    if (v50 - v51 == v54)
    {
      goto LABEL_414;
    }

    v194 = v44;
    if (OZChannel::getValueAsInt((v28 + 1072), MEMORY[0x277CC08F0], 0.0) == 4 && !v195 && !v193)
    {
      while (v54 <= v53)
      {
        v59 = *(a3 + 328);
        v60 = *v198;
        if (v59 == *(a3 + 320) || vabdd_f64(*(v59 - 8), v60[v54]) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *(*(v22 + v199) + 8 * v54)) >= 0.0000001)
        {
          std::vector<double>::push_back[abi:ne200100]((a3 + 320), &v60[v54]);
          std::vector<double>::push_back[abi:ne200100]((a3 + 344), (*(v22 + v199) + 8 * v54));
          std::vector<double>::push_back[abi:ne200100]((a3 + 296), &(*v197)[v54]);
        }

        ++v54;
      }

      goto LABEL_389;
    }

    if (*(a3 + 180))
    {
      if (v54 <= v53)
      {
        v55 = v48 - (v48 == v47);
        v56 = v50 + v52 - v54 + 1;
        do
        {
          v57 = *(a3 + 328);
          v58 = *v198;
          if (v57 == *(a3 + 320) || vabdd_f64(*(v57 - 8), v58[v55]) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *(*(v22 + v199) + v55 * 8)) >= 0.0000001)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), &v58[v55]);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), (*(v22 + v199) + v55 * 8));
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), &(*v197)[v55]);
          }

          ++v55;
          --v56;
        }

        while (v56);
      }

      goto LABEL_389;
    }

    v62 = *v197;
    v61 = v197[1];
    v63 = (*v197)[v53];
    v64 = v45 >= 0.0000001 || v61 == v62;
    v65 = (*v197)[v53];
    if (!v64)
    {
      v65 = ceil(*(v61 - 1));
    }

    v66 = v62[v54];
    v67 = *v198;
    v68 = *(v22 + v199);
    v69 = *(v192 + 216);
    v70 = *(v192 + 240);
    v71 = *(v192 + 192);
    v72 = *(v192 + 200);
    v196 = v197[1];
    v191 = v72;
    if (v65 - v66 < 1.0 && vabdd_f64(floor(v66), floor(v65)) < 0.0000001)
    {
      v202 = 0.0;
      v203[0] = 0.0;
      v201 = 0.0;
      v46 = 0.5;
      while (v71 != v72 && *v71 < v66)
      {
        ++v71;
        ++v69;
        ++v70;
      }

      if (v61 == v62)
      {
        v16 = v183;
        if (v195)
        {
          goto LABEL_389;
        }

        goto LABEL_321;
      }

      v103 = 0;
      while (1)
      {
        if (*v62 > v65)
        {
LABEL_315:
          v16 = v183;
          if (v195)
          {
            if ((v103 & 1) == 0)
            {
              goto LABEL_389;
            }

LABEL_366:
            v151 = *(a3 + 328);
            if (v151 == *(a3 + 320) || vabdd_f64(*(v151 - 8), v203[0]) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), v202) >= 0.0000001)
            {
              std::vector<double>::push_back[abi:ne200100]((a3 + 320), v203);
              std::vector<double>::push_back[abi:ne200100]((a3 + 344), &v202);
              v152 = (a3 + 296);
              v153 = &v201;
              goto LABEL_388;
            }

            goto LABEL_389;
          }

          if ((v103 & 1) == 0)
          {
LABEL_321:
            while (v62 != v61 && *v62 < v65)
            {
              ++v67;
              ++v68;
              ++v62;
            }

            v128 = 0;
            v129 = v62 - 3;
            v130 = v68 - 3;
            v131 = v67 - 3;
            while (v62 != *v197 && (v62 == v61 || *v62 > v66))
            {
              --v67;
              --v68;
              --v62;
              if (--v128 == -3)
              {
                v132 = 3;
                goto LABEL_342;
              }
            }

            if (!v128)
            {
              v129 = v62;
              goto LABEL_371;
            }

            v132 = -v128;
            v131 = v67;
            v130 = v68;
            v129 = v62;
LABEL_342:
            v138 = *(a3 + 296);
            v139 = *(a3 + 304);
            if (v139 != v138)
            {
              v140 = *v129;
              v141 = v139 - 1;
              do
              {
                if (*v141 < v140)
                {
                  break;
                }

                *(a3 + 328) -= 8;
                *(a3 + 352) -= 8;
                *(a3 + 304) = v141;
                v64 = v141-- == v138;
              }

              while (!v64);
            }

            if (v129 != v61)
            {
              v142 = 1;
              do
              {
                v143 = *(a3 + 304);
                if (v143 == *(a3 + 296) || (vabdd_f64(*(*(a3 + 328) - 8), *v131) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v130) >= 0.0000001) && *(v143 - 8) < *v129)
                {
                  std::vector<double>::push_back[abi:ne200100]((a3 + 320), v131);
                  std::vector<double>::push_back[abi:ne200100]((a3 + 344), v130);
                  std::vector<double>::push_back[abi:ne200100]((a3 + 296), v129);
                  v61 = v196;
                }

                ++v129;
                if (v142 >= v132)
                {
                  break;
                }

                ++v131;
                ++v130;
                ++v142;
              }

              while (v129 != v61);
            }

LABEL_371:
            v62 = v129 + 1;
            v22 = v188;
          }

          if (*(a3 + 168))
          {
            if (v62 != v61)
            {
              goto LABEL_389;
            }

            v154 = *(a3 + 328);
            v135 = *(v192 + 216);
            if (v154 != *(a3 + 320) && vabdd_f64(*(v154 - 8), *v135) < 0.0000001 && vabdd_f64(*(*(a3 + 352) - 8), **(v192 + 240)) < 0.0000001)
            {
              goto LABEL_389;
            }

            goto LABEL_377;
          }

LABEL_380:
          if (v62 != v61)
          {
            goto LABEL_389;
          }

          v155 = *(a3 + 328);
          v156 = *(v192 + 224);
          if (v155 != *(a3 + 320) && vabdd_f64(*(v155 - 8), *(v156 - 8)) < 0.0000001 && vabdd_f64(*(*(a3 + 352) - 8), *(*(v192 + 248) - 8)) < 0.0000001)
          {
            goto LABEL_389;
          }

          v146 = (v156 - 8);
LABEL_385:
          std::vector<double>::push_back[abi:ne200100]((a3 + 320), v146);
          v144 = v192;
          goto LABEL_387;
        }

        if (*v62 >= v66)
        {
          break;
        }

        ++v67;
        ++v68;
        ++v62;
LABEL_239:
        if (v62 == v61)
        {
          goto LABEL_315;
        }
      }

      if (v195)
      {
        if ((v103 & 1) == 0)
        {
          v104 = *(a3 + 328);
          if (v104 == *(a3 + 320) || vabdd_f64(*(v104 - 8), *v67) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v68) >= 0.0000001)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), v67);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), v68);
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), v62);
            v61 = v196;
          }
        }

        v105 = *v67++;
        v203[0] = v105;
        v106 = *v68++;
        v202 = v106;
        v107 = *v62++;
        v201 = v107;
LABEL_238:
        v103 = 1;
        goto LABEL_239;
      }

      if (v71 == v72)
      {
        if (v103)
        {
          goto LABEL_242;
        }
      }

      else
      {
        if (((*v71 < v65) & v103) == 1)
        {
          v108 = *(a3 + 328);
          if (v108 == *(a3 + 320) || vabdd_f64(*(v108 - 8), *v69) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v70) >= 0.0000001)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), v69);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), v70);
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), v71);
            v61 = v196;
          }

          for (; v62 != v61; ++v62)
          {
            if (*v62 >= *v71)
            {
              break;
            }

            ++v67;
            ++v68;
          }

          ++v71;
          ++v69;
          ++v70;
          goto LABEL_238;
        }

        if (((vabdd_f64(*v71, v65) < 0.0000001) & v103) != 0)
        {
LABEL_242:
          while (v62 != v61 && *v62 < v65)
          {
            ++v67;
            ++v68;
            ++v62;
          }

          v190 = v70;
          v109 = 0;
          v110 = v62 - 3;
          v111 = v68 - 3;
          v112 = v67 - 3;
          while (v62 != *v197 && (v62 == v61 || *v62 > v66))
          {
            --v67;
            --v68;
            --v62;
            if (++v109 == 3)
            {
              goto LABEL_267;
            }
          }

          v110 = v62;
          v111 = v68;
          v112 = v67;
LABEL_267:
          v181 = v103;
          if (v109 && v110 != v61)
          {
            v115 = 1;
            do
            {
              v116 = *(a3 + 304);
              if (v116 == *(a3 + 296) || (vabdd_f64(*(*(a3 + 328) - 8), *v112) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v111) >= 0.0000001) && *(v116 - 8) < *v110)
              {
                std::vector<double>::push_back[abi:ne200100]((a3 + 320), v112);
                std::vector<double>::push_back[abi:ne200100]((a3 + 344), v111);
                std::vector<double>::push_back[abi:ne200100]((a3 + 296), v110);
                v61 = v196;
              }

              ++v112;
              ++v111;
              ++v110;
              if (v115 >= v109)
              {
                break;
              }

              ++v115;
            }

            while (v110 != v61);
          }

          if (v110 == v61)
          {
            v62 = v110;
          }

          else
          {
            v62 = v110 + 1;
          }

          if (v110 == v61)
          {
            v68 = v111;
          }

          else
          {
            v68 = v111 + 1;
          }

          if (v110 == v61)
          {
            v67 = v112;
          }

          else
          {
            v67 = v112 + 1;
          }

          v28 = v184;
          v22 = v188;
          v70 = v190;
          v72 = v191;
          v103 = v181;
          goto LABEL_239;
        }
      }

      if (v62 != v61)
      {
        v113 = 0;
        do
        {
          if (*v62 > v65)
          {
            break;
          }

          v114 = *(a3 + 328);
          if (v114 == *(a3 + 320) || vabdd_f64(*(v114 - 8), *v67) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v68) >= 0.0000001)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), v67);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), v68);
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), v62);
            v61 = v196;
            LOBYTE(v103) = 1;
          }

          ++v67;
          ++v68;
          ++v62;
          if (v113 > 1)
          {
            break;
          }

          ++v113;
        }

        while (v62 != v61);
      }

      if ((v103 & 1) == 0)
      {
        v103 = 0;
        v72 = v191;
        goto LABEL_239;
      }

      v72 = v191;
      if (v71 != v191)
      {
        while (*v71 <= *(*(a3 + 304) - 8))
        {
          ++v71;
          ++v69;
          ++v70;
          v103 = 1;
          if (v71 == v191)
          {
            goto LABEL_239;
          }
        }
      }

      goto LABEL_238;
    }

    while (v71 != v72 && *v71 < v66)
    {
      ++v71;
      ++v69;
      ++v70;
    }

    v73 = ceil(v66);
    if (v61 != v62)
    {
      v74 = 0;
      while (1)
      {
        if (*v62 > v73)
        {
          goto LABEL_134;
        }

        if (*v62 >= v66)
        {
          break;
        }

        ++v67;
        ++v68;
        ++v62;
LABEL_117:
        if (v62 == v61)
        {
          goto LABEL_134;
        }
      }

      if (v195)
      {
        if ((v74 & 1) == 0)
        {
          v75 = *(a3 + 328);
          if (v75 == *(a3 + 320) || vabdd_f64(*(v75 - 8), *v67) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v68) >= 0.0000001)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), v67);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), v68);
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), v62);
            v61 = v196;
          }
        }
      }

      else
      {
        if (v71 != v72 && ((*v71 <= v73) & v74) == 1)
        {
          v76 = *(a3 + 328);
          if (v76 == *(a3 + 320) || vabdd_f64(*(v76 - 8), *v69) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v70) >= 0.0000001)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), v69);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), v70);
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), v71);
            v61 = v196;
          }

          for (; v62 != v61; ++v62)
          {
            if (*v62 >= *v71)
            {
              break;
            }

            ++v67;
            ++v68;
          }

          ++v71;
          ++v69;
          ++v70;
          goto LABEL_116;
        }

        if ((v74 & 1) == 0)
        {
          if (v62 == v61)
          {
            v74 = 0;
            goto LABEL_117;
          }

          v77 = 0;
          v78 = 0;
          do
          {
            v79 = *(a3 + 328);
            if (v79 == *(a3 + 320) || vabdd_f64(*(v79 - 8), *v67) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v68) >= 0.0000001)
            {
              std::vector<double>::push_back[abi:ne200100]((a3 + 320), v67);
              std::vector<double>::push_back[abi:ne200100]((a3 + 344), v68);
              std::vector<double>::push_back[abi:ne200100]((a3 + 296), v62);
              v61 = v196;
              v78 = 1;
            }

            ++v67;
            ++v68;
            ++v62;
            if (v77 > 1)
            {
              break;
            }

            ++v77;
          }

          while (v62 != v61);
          if ((v78 & 1) == 0)
          {
            v74 = 0;
            v72 = v191;
            goto LABEL_117;
          }

          v72 = v191;
          if (v71 != v191)
          {
            while (*v71 <= *(*(a3 + 304) - 8))
            {
              ++v71;
              ++v69;
              ++v70;
              v74 = 1;
              if (v71 == v191)
              {
                goto LABEL_117;
              }
            }
          }

          goto LABEL_116;
        }
      }

      ++v67;
      ++v68;
      ++v62;
LABEL_116:
      v74 = 1;
      goto LABEL_117;
    }

LABEL_134:
    v80 = floor(v63);
    while (v71 != v72 && *v71 <= v80)
    {
      if (*v71 >= v73)
      {
        v81 = *(a3 + 328);
        if (v81 == *(a3 + 320) || vabdd_f64(*(v81 - 8), *v69) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v70) >= 0.0000001)
        {
          std::vector<double>::push_back[abi:ne200100]((a3 + 320), v69);
          std::vector<double>::push_back[abi:ne200100]((a3 + 344), v70);
          std::vector<double>::push_back[abi:ne200100]((a3 + 296), v71);
          v61 = v196;
        }
      }

      ++v69;
      ++v70;
      ++v71;
    }

    v202 = 0.0;
    v203[0] = 0.0;
    v201 = 0.0;
    if (v62 == v61)
    {
      v16 = v183;
      v45 = v182;
      v46 = 0.5;
      if (v195)
      {
        goto LABEL_210;
      }

      goto LABEL_289;
    }

    v82 = 0;
    v45 = v182;
    while (*v62 <= v65)
    {
      if (*v62 <= v80)
      {
        goto LABEL_164;
      }

      if (!v195)
      {
        if (v71 == v72)
        {
          goto LABEL_168;
        }

        if (*v71 < v65)
        {
          v85 = *(a3 + 328);
          if (v85 == *(a3 + 320) || vabdd_f64(*(v85 - 8), *v69) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v70) >= 0.0000001)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), v69);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), v70);
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), v71);
            v61 = v196;
            v82 = 1;
          }

          for (; v62 != v61; ++v62)
          {
            if (*v62 >= *v71)
            {
              break;
            }

            ++v67;
            ++v68;
          }

          ++v71;
          ++v69;
          ++v70;
          goto LABEL_165;
        }

        if (vabdd_f64(*v71, v65) < 0.0000001)
        {
LABEL_168:
          while (v62 != v61 && *v62 < v65)
          {
            ++v67;
            ++v68;
            ++v62;
          }

          v189 = v70;
          v87 = 0;
          v88 = v62 - 3;
          v89 = v68 - 3;
          v90 = v67 - 3;
          while (v62 != *v197 && (v62 == v61 || *v62 > v66))
          {
            --v67;
            --v68;
            --v62;
            if (--v87 == -3)
            {
              v91 = 3;
              goto LABEL_178;
            }
          }

          if (!v87)
          {
            v88 = v62;
            v89 = v68;
            v90 = v67;
            goto LABEL_194;
          }

          v91 = -v87;
          v90 = v67;
          v89 = v68;
          v88 = v62;
LABEL_178:
          v92 = *(a3 + 296);
          v93 = *(a3 + 304);
          if (v93 != v92)
          {
            v94 = *v88;
            v95 = v93 - 1;
            do
            {
              if (*v95 < v94)
              {
                break;
              }

              *(a3 + 328) -= 8;
              *(a3 + 352) -= 8;
              *(a3 + 304) = v95;
              v64 = v95-- == v92;
            }

            while (!v64);
          }

          if (v88 != v61)
          {
            v96 = 1;
            do
            {
              v97 = *(a3 + 304);
              if (v97 == *(a3 + 296) || (vabdd_f64(*(*(a3 + 328) - 8), *v90) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v89) >= 0.0000001) && *(v97 - 8) < *v88)
              {
                std::vector<double>::push_back[abi:ne200100]((a3 + 320), v90);
                std::vector<double>::push_back[abi:ne200100]((a3 + 344), v89);
                std::vector<double>::push_back[abi:ne200100]((a3 + 296), v88);
                v61 = v196;
                v82 = 1;
              }

              ++v90;
              ++v89;
              ++v88;
              if (v96 >= v91)
              {
                break;
              }

              ++v96;
            }

            while (v88 != v61);
          }

LABEL_194:
          if (v88 == v61)
          {
            v62 = v88;
          }

          else
          {
            v62 = v88 + 1;
          }

          if (v88 == v61)
          {
            v68 = v89;
          }

          else
          {
            v68 = v89 + 1;
          }

          if (v88 == v61)
          {
            v67 = v90;
          }

          else
          {
            v67 = v90 + 1;
          }

          v28 = v184;
          v22 = v188;
          v70 = v189;
          v72 = v191;
          goto LABEL_165;
        }

        v86 = *(a3 + 328);
        if (v86 == *(a3 + 320) || vabdd_f64(*(v86 - 8), *v67) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v68) >= 0.0000001)
        {
          std::vector<double>::push_back[abi:ne200100]((a3 + 320), v67);
          std::vector<double>::push_back[abi:ne200100]((a3 + 344), v68);
          std::vector<double>::push_back[abi:ne200100]((a3 + 296), v62);
          v61 = v196;
          v82 = 1;
        }

LABEL_164:
        ++v67;
        ++v68;
        ++v62;
        goto LABEL_165;
      }

      v201 = *v62;
      v83 = *v67++;
      v203[0] = v83;
      v84 = *v68++;
      v202 = v84;
      ++v62;
      v82 = 1;
LABEL_165:
      if (v62 == v61)
      {
        break;
      }
    }

    v16 = v183;
    v46 = 0.5;
    if (v195)
    {
      if (v82)
      {
        if (v182 < 0.0000001)
        {
          v98 = *(v192 + 200);
          if (*(a3 + 168))
          {
            v201 = *(v98 - 8) + 1.0;
            v203[0] = **(v192 + 216);
            v99 = **(v192 + 240);
          }

          else
          {
            v201 = *(v98 - 8);
            v203[0] = *(*(v192 + 224) - 8);
            v99 = *(*(v192 + 248) - 8);
          }

          v202 = v99;
        }

        goto LABEL_366;
      }

LABEL_210:
      if (!*(a3 + 168))
      {
        goto LABEL_380;
      }

      if (v62 != v61)
      {
        goto LABEL_389;
      }

      v100 = *(a3 + 328);
      v101 = *(v192 + 216);
      if (v100 != *(a3 + 320) && vabdd_f64(*(v100 - 8), *v101) < 0.0000001 && vabdd_f64(*(*(a3 + 352) - 8), **(v192 + 240)) < 0.0000001)
      {
        goto LABEL_389;
      }

      std::vector<double>::push_back[abi:ne200100]((a3 + 320), v101);
      std::vector<double>::push_back[abi:ne200100]((a3 + 344), *(v192 + 240));
      v102 = *(*(v192 + 200) - 8) + 1.0;
LABEL_379:
      v200 = v102;
      std::vector<double>::push_back[abi:ne200100]((a3 + 296), &v200);
      goto LABEL_389;
    }

    if ((v82 & 1) == 0)
    {
LABEL_289:
      while (v62 != v61 && *v62 < v65)
      {
        ++v67;
        ++v68;
        ++v62;
      }

      v117 = 0;
      v118 = v62 - 3;
      v119 = v68 - 3;
      v120 = v67 - 3;
      while (v62 != *v197 && (v62 == v61 || *v62 > v66))
      {
        --v67;
        --v68;
        --v62;
        if (--v117 == -3)
        {
          v121 = 3;
          goto LABEL_300;
        }
      }

      if (!v117)
      {
        v118 = v62;
        goto LABEL_331;
      }

      v121 = -v117;
      v120 = v67;
      v119 = v68;
      v118 = v62;
LABEL_300:
      v122 = *(a3 + 296);
      v123 = *(a3 + 304);
      if (v123 != v122)
      {
        v124 = *v118;
        v125 = v123 - 1;
        do
        {
          if (*v125 < v124)
          {
            break;
          }

          *(a3 + 328) -= 8;
          *(a3 + 352) -= 8;
          *(a3 + 304) = v125;
          v64 = v125-- == v122;
        }

        while (!v64);
      }

      if (v118 != v61)
      {
        v126 = 1;
        do
        {
          v127 = *(a3 + 304);
          if (v127 == *(a3 + 296) || (vabdd_f64(*(*(a3 + 328) - 8), *v120) >= 0.0000001 || vabdd_f64(*(*(a3 + 352) - 8), *v119) >= 0.0000001) && *(v127 - 8) < *v118)
          {
            std::vector<double>::push_back[abi:ne200100]((a3 + 320), v120);
            std::vector<double>::push_back[abi:ne200100]((a3 + 344), v119);
            std::vector<double>::push_back[abi:ne200100]((a3 + 296), v118);
            v61 = v196;
          }

          ++v118;
          if (v126 >= v121)
          {
            break;
          }

          ++v120;
          ++v119;
          ++v126;
        }

        while (v118 != v61);
      }

LABEL_331:
      v62 = &v118[v118 != v61];
      v22 = v188;
    }

    if (v62 != v61)
    {
      goto LABEL_389;
    }

    v134 = *(a3 + 296);
    v133 = *(a3 + 304);
    if (*(a3 + 168))
    {
      if (v133 == v134)
      {
        std::vector<double>::push_back[abi:ne200100]((a3 + 320), *(v192 + 216));
        v150 = *(v192 + 240);
      }

      else
      {
        v135 = *(v192 + 216);
        if (vabdd_f64(*(*(a3 + 328) - 8), *v135) < 0.0000001 && vabdd_f64(*(*(a3 + 352) - 8), **(v192 + 240)) < 0.0000001)
        {
          goto LABEL_389;
        }

        v136 = *(v133 - 8);
        v137 = ceil(*(v197[1] - 1));
        if (v136 >= v137 || vabdd_f64(v136, v137) < 0.00001)
        {
          goto LABEL_389;
        }

LABEL_377:
        std::vector<double>::push_back[abi:ne200100]((a3 + 320), v135);
        v150 = *(v192 + 240);
      }

      std::vector<double>::push_back[abi:ne200100]((a3 + 344), v150);
      v102 = ceil(*(v197[1] - 1));
      goto LABEL_379;
    }

    v144 = v192;
    if (v133 != v134)
    {
      v145 = *(v192 + 224);
      v147 = *(v145 - 8);
      v146 = (v145 - 8);
      if (vabdd_f64(*(*(a3 + 328) - 8), v147) < 0.0000001 && vabdd_f64(*(*(a3 + 352) - 8), *(*(v192 + 248) - 8)) < 0.0000001)
      {
        goto LABEL_389;
      }

      v148 = *(v133 - 8);
      v149 = *(*(v192 + 200) - 8);
      if (v148 >= v149 || vabdd_f64(v148, v149) < 0.00001)
      {
        goto LABEL_389;
      }

      goto LABEL_385;
    }

    std::vector<double>::push_back[abi:ne200100]((a3 + 320), (*(v192 + 224) - 8));
LABEL_387:
    std::vector<double>::push_back[abi:ne200100]((a3 + 344), (*(v144 + 248) - 8));
    v153 = (*(v144 + 200) - 8);
    v152 = (a3 + 296);
LABEL_388:
    std::vector<double>::push_back[abi:ne200100](v152, v153);
LABEL_389:
    v157 = *(a3 + 320);
    if ((*(a3 + 328) - v157) >= 0x11 && !((fabs(v40) >= 0.0000001) | v194 & 1))
    {
      v158 = *(v192 + 216);
      if (vabdd_f64(*v157, *v158) >= 0.00001 || vabdd_f64(**(a3 + 344), **(v192 + 240)) >= 0.00001)
      {
        std::vector<double>::insert((a3 + 320), *(a3 + 320), v158);
        std::vector<double>::insert((a3 + 344), *(a3 + 344), *(v192 + 240));
        std::vector<double>::insert((a3 + 296), *(a3 + 296), *(v192 + 192));
      }

      ValueAsInt = OZChannel::getValueAsInt((v28 + 1072), MEMORY[0x277CC08F0], 0.0);
      v157 = *(a3 + 320);
      if (ValueAsInt != 4)
      {
        v160 = *(v192 + 216);
        v162 = *(v160 + 8);
        v161 = (v160 + 8);
        if (vabdd_f64(*v157, v162) >= 0.00001 || vabdd_f64(**(a3 + 344), *(*(v192 + 240) + 8)) >= 0.00001)
        {
          v163 = *(a3 + 296);
          v164 = *(*(v192 + 192) + 8);
          if (v163[1] > v164 && *v163 < v164)
          {
            std::vector<double>::insert((a3 + 320), (v157 + 8), v161);
            std::vector<double>::insert((a3 + 344), (*(a3 + 344) + 8), (*(v192 + 240) + 8));
            std::vector<double>::insert((a3 + 296), (*(a3 + 296) + 8), (*(v192 + 192) + 8));
            v157 = *(a3 + 320);
          }
        }
      }
    }

    v165 = *(a3 + 328);
    v166 = v165 - v157;
    v167 = (v165 - v157) >> 3;
    if (v167 >= 3)
    {
      v168 = v165 - 1;
      v169 = v167 - 2;
      if (vabdd_f64(*(v165 - 1), *(v157 + 8 * (v167 - 2))) < 0.00001)
      {
        v170 = *(a3 + 352);
        v172 = *(v170 - 8);
        v171 = v170 - 8;
        if (vabdd_f64(v172, *(*(a3 + 344) + 8 * v169)) < 0.00001)
        {
          *(a3 + 328) = v168;
          *(a3 + 352) = v171;
          *(a3 + 304) -= 8;
          v166 = v168 - v157;
          --v165;
        }
      }
    }

    if (v166 >= 0x11)
    {
      v173 = (v157 + 8);
      if (vabdd_f64(*v157, *(v157 + 8)) < 0.00001)
      {
        v174 = *(a3 + 344);
        if (vabdd_f64(*v174, v174[1]) < 0.00001)
        {
          v175 = v165 - v173;
          if (v165 != v173)
          {
            memmove(v157, v173, v165 - v173);
            v174 = *(a3 + 344);
          }

          *(a3 + 328) = v157 + v175;
          v176 = *(a3 + 352);
          v177 = v176 - (v174 + 1);
          if (v176 != v174 + 1)
          {
            memmove(v174, v174 + 1, v176 - (v174 + 1));
          }

          *(a3 + 352) = v174 + v177;
          v179 = *(a3 + 296);
          v178 = *(a3 + 304);
          v180 = v178 - (v179 + 8);
          if (v178 != v179 + 8)
          {
            memmove(*(a3 + 296), (v179 + 8), v178 - (v179 + 8));
          }

          *(a3 + 304) = v179 + v180;
        }
      }
    }

LABEL_414:
    if (v40 <= v39)
    {
      break;
    }

    v44 = 1;
    v40 = 0.0;
  }

  while (*(a3 + 168));
LABEL_416:
  if (a14)
  {
    *a14 = a3 + 320;
  }

  if (a15)
  {
    *a15 = a3 + 344;
  }

  if (a16)
  {
    *a16 = a3 + 296;
  }

  if (a12)
  {
    *a12 = 0;
  }

  if (v16)
  {
    v20 = ((*(a3 + 328) - *(a3 + 320)) >> 3) - 1;
LABEL_426:
    *v16 = v20;
  }
}

void *std::vector<OZShapeEdgePolygon>::reserve(void *result, unint64_t a2)
{
  if (0xF0F0F0F0F0F0F0F1 * ((result[2] - *result) >> 3) < a2)
  {
    if (a2 < 0x1E1E1E1E1E1E1E2)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<OZShapeEdgePolygon>>(result, a2);
    }

    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  return result;
}

void sub_260304A64(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, uint64_t a12)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void OZShape::computeInsideFeatheringPolygons(uint64_t a1, uint64_t *a2, void *a3, double a4, uint64_t a5, uint64_t a6, double *a7)
{
  v13 = (*(*a1 + 176))(a1);
  v142 = 0;
  v143 = 0;
  v144 = 0;
  v14 = 1.0;
  if (*(a6 + 8))
  {
    v15 = 1.0;
  }

  else
  {
    v15 = 1.0;
    if (fabs(*(a6 + 224)) >= 0.0000001)
    {
      OZChannel::getValueAsDouble((a1 + 13416), MEMORY[0x277CC08F0], 0.0);
      v15 = v16;
      OZChannel::getValueAsDouble((a1 + 13568), MEMORY[0x277CC08F0], 0.0);
    }
  }

  v131 = a6;
  v17 = a3[28] - a3[27];
  if (v17)
  {
    v18 = 0;
    v19 = v17 >> 3;
    v20 = (v17 >> 3) - 1;
    v21 = v14 * v14;
    v22 = v15 * (v13 * v13 * v15);
    if ((v17 >> 3) <= 1)
    {
      v23 = 1;
    }

    else
    {
      v23 = v17 >> 3;
    }

    do
    {
      v24 = a3[27];
      v25 = *(v24 + 8 * v18);
      v26 = a3[30];
      v27 = *(v26 + 8 * v18);
      v28 = a7[12];
      v29 = a7[13];
      v30 = a7[15];
      v31 = v30 + v25 * v28 + v27 * v29;
      v32 = *a7;
      v33 = a7[1];
      v34 = a7[3];
      v35 = a7[4];
      v36 = (v34 + v25 * *a7 + v27 * v33) / v31;
      v37 = a7[5];
      v38 = v25 * v35 + v27 * v37;
      v39 = a7[7];
      v40 = (v39 + v38) / v31;
      v41 = (v18 - 1) % v19;
      if (!v18)
      {
        v41 = v20;
      }

      v42 = *(v24 + 8 * v41);
      v43 = *(v26 + 8 * v41);
      v44 = v30 + v28 * v42 + v29 * v43;
      v45 = (v34 + v32 * v42 + v33 * v43) / v44;
      v46 = v39 + v35 * v42 + v37 * v43;
      v47 = *(v24 + 8 * (++v18 % v19));
      v48 = v46 / v44;
      v49 = *(v26 + 8 * (v18 % v19));
      v50 = v30 + v28 * v47 + v29 * v49;
      v51 = (v39 + v35 * v47 + v37 * v49) / v50;
      v52 = (v34 + v32 * v47 + v33 * v49) / v50 - v45;
      v53 = v51 - v48;
      v54 = sqrt(v52 * v52 / v21 + v53 * v53 / v22);
      v55 = v36 + v53 * a4 / v54 / v22;
      v56 = v40 - v52 * a4 / v54 / v21;
      v57 = v143;
      if (v143 >= v144)
      {
        v59 = v142;
        v60 = v143 - v142;
        v61 = (v143 - v142) >> 4;
        v62 = v61 + 1;
        if ((v61 + 1) >> 60)
        {
          std::vector<double>::__throw_length_error[abi:ne200100]();
        }

        v63 = v144 - v142;
        if ((v144 - v142) >> 3 > v62)
        {
          v62 = v63 >> 3;
        }

        v64 = v63 >= 0x7FFFFFFFFFFFFFF0;
        v65 = 0xFFFFFFFFFFFFFFFLL;
        if (!v64)
        {
          v65 = v62;
        }

        if (v65)
        {
          std::__allocate_at_least[abi:ne200100]<std::allocator<PCVector2<double>>>(&v142, v65);
        }

        v66 = (16 * v61);
        *v66 = v55;
        v66[1] = v56;
        v58 = 16 * v61 + 16;
        memcpy(0, v59, v60);
        v67 = v142;
        v142 = 0;
        v143 = v58;
        v144 = 0;
        if (v67)
        {
          operator delete(v67);
        }
      }

      else
      {
        *v143 = v55;
        v57[1] = v56;
        v58 = (v57 + 2);
      }

      v143 = v58;
    }

    while (v23 != v18);
  }

  else
  {
    v58 = v143;
  }

  v68 = v142;
  if (((v58 - v142) >> 4) < 2)
  {
    v69 = 0;
  }

  else
  {
    v69 = 0;
    do
    {
      v138 = 0u;
      memset(v139, 0, sizeof(v139));
      v136 = 0u;
      v137 = 0u;
      v134 = 0u;
      v135 = 0u;
      v132 = 0u;
      v133 = 0u;
      v140 = 257;
      v141 = 0;
      v70 = &v68[2 * v69];
      v71 = *v70;
      v132 = v71;
      *(&v133 + 1) = 0x3FF0000000000000;
      v72 = v70[1];
      v134 = v72;
      *(&v135 + 1) = 0x3FF0000000000000;
      v73 = (a3[27] + 8 * v69);
      v74 = v73[1];
      v75 = (a3[30] + 8 * v69);
      v76 = v75[1];
      v77 = a7[12];
      v78 = a7[13];
      v79 = a7[15];
      v80 = v79 + v74 * v77 + v76 * v78;
      v81 = *a7;
      v82 = a7[1];
      v83 = a7[3];
      v84 = a7[4];
      v85 = (v83 + v74 * *a7 + v76 * v82) / v80;
      v86 = a7[5];
      v87 = v74 * v84 + v76 * v86;
      v88 = a7[7];
      *&v136 = v85;
      *(&v136 + 1) = (v88 + v87) / v80;
      v137 = xmmword_260342700;
      v89 = v79 + v77 * *v73 + v78 * *v75;
      v90 = v84 * *v73 + v86 * *v75;
      *&v138 = (v83 + v81 * *v73 + v82 * *v75) / v89;
      *(&v138 + 1) = (v88 + v90) / v89;
      *v139 = xmmword_260342700;
      v91 = vsubq_f64(v72, v71);
      v92 = vdupq_lane_s64(*&v91.f64[0], 0);
      v92.f64[0] = v85 - *&v138;
      v91.f64[0] = *(&v136 + 1) - *(&v138 + 1);
      v93 = vmovn_s64(vcltzq_f64(vdivq_f64(v92, v91)));
      if (v93.i8[4])
      {
        v94 = -1.0;
      }

      else
      {
        v94 = 1.0;
      }

      if (v93.i8[0])
      {
        v95 = -1.0;
      }

      else
      {
        v95 = 1.0;
      }

      if (vabdd_f64(v94, v95) >= 0.0000001)
      {
        v132 = v72;
        v134 = v71;
      }

      std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a2, &v132);
      ++v69;
      v68 = v142;
    }

    while (v69 < (((v143 - v142) << 28) - 0x100000000) >> 32);
  }

  if (*(v131 + 168))
  {
    v139[18] = 0;
    *&v139[16] = 0;
    v140 = 257;
    v141 = 0;
    v96 = *&v68[2 * v69];
    v132 = v96;
    v133 = xmmword_260342700;
    v97 = *v68;
    v98 = v68[1];
    v134.f64[0] = v97;
    v134.f64[1] = v98;
    v135 = xmmword_260342700;
    v99 = a3[27];
    v100 = a3[30];
    v101 = a7[12];
    v102 = a7[13];
    v103 = a7[15];
    v104 = v103 + *v99 * v101 + *v100 * v102;
    v105 = *a7;
    v106 = a7[1];
    v107 = a7[3];
    v108 = a7[4];
    v109 = a7[5];
    v110 = a7[7];
    v111 = (v110 + *v99 * v108 + *v100 * v109) / v104;
    *&v136 = (v107 + *v99 * *a7 + *v100 * v106) / v104;
    *(&v136 + 1) = v111;
    v137 = xmmword_260342700;
    v112 = v99[v69];
    v113 = v100[v69];
    v114 = v103 + v101 * v112 + v102 * v113;
    *&v138 = (v107 + v105 * v112 + v106 * v113) / v114;
    *(&v138 + 1) = (v110 + v108 * v112 + v109 * v113) / v114;
    *v139 = xmmword_260342700;
    v115 = (*&v136 - *&v138) / (v111 - *(&v138 + 1));
    v116 = 1.0;
    if ((v97 - v96.f64[0]) / (v98 - v96.f64[1]) >= 0.0)
    {
      v117 = 1.0;
    }

    else
    {
      v117 = -1.0;
    }

    if (v115 < 0.0)
    {
      v116 = -1.0;
    }

    if (vabdd_f64(v117, v116) >= 0.0000001)
    {
      v132.f64[0] = v97;
      v132.f64[1] = v98;
      v134 = v96;
    }

    std::vector<OZShapeEdgePolygon>::push_back[abi:ne200100](a2, &v132);
  }

  v118 = *a2;
  if ((-252645135 * ((a2[1] - *a2) >> 3)) < 2)
  {
    v120 = 0;
  }

  else
  {
    v119 = 0;
    v120 = 0;
    do
    {
      v121 = (v118 + v119);
      v122 = v121[3];
      *(v121 + 136) = v121[2];
      *(v121 + 152) = v122;
      v123 = (*a2 + v119);
      v124 = v123[5];
      *(v123 + 232) = v123[4];
      ++v120;
      *(v123 + 248) = v124;
      v118 = *a2;
      v119 += 136;
    }

    while (v120 < (-1 - 252645135 * ((a2[1] - *a2) >> 3)));
  }

  if (*(v131 + 168))
  {
    v125 = 17 * v120;
    v126 = v118 + 8 * v125;
    v127 = *(v126 + 3);
    *v118 = *(v126 + 2);
    v118[1] = v127;
    v128 = *a2;
    v129 = *a2 + 8 * v125;
    v130 = *(v129 + 80);
    *(v128 + 96) = *(v129 + 64);
    *(v128 + 112) = v130;
  }

  if (v142)
  {
    v143 = v142;
    operator delete(v142);
  }
}

void sub_2603051AC(_Unwind_Exception *exception_object)
{
  v3 = *(v1 - 168);
  if (v3)
  {
    *(v1 - 160) = v3;
    operator delete(v3);
  }

  _Unwind_Resume(exception_object);
}

double *OZShape::transformOutlinePolygonList(uint64_t a1, uint64_t *a2, unsigned int a3, double *a4)
{
  v4 = *a2;
  if (0xF0F0F0F0F0F0F0F1 * ((a2[1] - *a2) >> 3) > a3)
  {
    v7 = a3;
    v8 = a3 + 1;
    do
    {
      result = OZShapeEdgePolygon::transformPoints((v4 + 136 * v7), a4);
      v7 = v8;
      v4 = *a2;
    }

    while (0xF0F0F0F0F0F0F0F1 * ((a2[1] - *a2) >> 3) > v8++);
  }

  return result;
}

uint64_t HGArray<__simd128_float32_t,(HGFormat)28>::reserve(HGArrayDataRef *this, int a2)
{
  result = *this;
  if (result)
  {
    if (*(result + 12) < a2)
    {
      return HGArrayData::allocate(result, a2);
    }
  }

  else if (a2 > 0)
  {
    HGArrayDataRef::allocate(this);
  }

  return result;
}

void anonymous namespace::addTriangleStripSequenceToArray(_anonymous_namespace_ *this, OZShapeVertexArrayData *a2)
{
  v2 = a2;
  v4 = *(this + 3);
  if (v4)
  {
    LODWORD(v4) = *(v4 + 8);
  }

  v5 = v4 - a2;
  if (v4 - a2 >= 1)
  {
    v7 = *(this + 1);
    v6 = *(this + 2);
    if (v7 >= v6)
    {
      v9 = 0x1555555555555555;
      v10 = *this;
      v11 = v7 - *this;
      v12 = 0xAAAAAAAAAAAAAAABLL * (v11 >> 2) + 1;
      if (v12 > 0x1555555555555555)
      {
        std::vector<double>::__throw_length_error[abi:ne200100]();
      }

      v13 = 0xAAAAAAAAAAAAAAABLL * ((v6 - v10) >> 2);
      if (2 * v13 > v12)
      {
        v12 = 2 * v13;
      }

      if (v13 < 0xAAAAAAAAAAAAAAALL)
      {
        v9 = v12;
      }

      if (v9)
      {
        std::__allocate_at_least[abi:ne200100]<std::allocator<Vec3f>>(this, v9);
      }

      v14 = (4 * (v11 >> 2));
      *v14 = 5;
      v14[1] = v2;
      v14[2] = v5;
      v8 = v14 + 3;
      v15 = v14 - v11;
      memcpy(v14 - v11, v10, v11);
      v16 = *this;
      *this = v15;
      *(this + 1) = v8;
      *(this + 2) = 0;
      if (v16)
      {
        operator delete(v16);
      }
    }

    else
    {
      *v7 = 5;
      v7[1] = a2;
      v7[2] = v5;
      v8 = v7 + 3;
    }

    *(this + 1) = v8;
  }
}

float32x4_t *PCMatrix44Tmpl<double>::transform<float>(float64_t *a1, float32x2_t *a2, float32x4_t *a3)
{
  v3.f64[0] = *a1;
  v4.f64[0] = a1[1];
  v5.f64[0] = a1[2];
  v6.f64[0] = a1[3];
  v7.f64[0] = a1[8];
  v8.f64[0] = a1[9];
  v9.f64[0] = a1[10];
  v10.f64[0] = a1[11];
  v11 = vcvtq_f64_f32(*a2);
  v12 = vextq_s8(v11, v11, 8uLL);
  v8.f64[1] = a1[12];
  v4.f64[1] = a1[4];
  v7.f64[1] = a1[13];
  v3.f64[1] = a1[5];
  v5.f64[1] = a1[6];
  v9.f64[1] = a1[14];
  v10.f64[1] = a1[15];
  v6.f64[1] = a1[7];
  *a3 = vcvt_hight_f32_f64(vcvt_f32_f64(vaddq_f64(vaddq_f64(vaddq_f64(vmulq_f64(v4, v12), vmulq_f64(v3, v11)), vmulq_n_f64(v5, a2[1].f32[0])), vmulq_n_f64(v6, a2[1].f32[1]))), vaddq_f64(vaddq_f64(vaddq_f64(vmulq_f64(v8, v12), vmulq_f64(v7, v11)), vmulq_n_f64(v9, a2[1].f32[0])), vmulq_n_f64(v10, a2[1].f32[1])));
  return a3;
}

uint64_t HGArray<__simd128_float32_t,(HGFormat)28>::append(int *a1)
{
  v2 = *a1;
  if (*a1)
  {
    v3 = *(v2 + 8);
    v4 = v3 + 1;
    if (v3 < *(v2 + 12))
    {
      goto LABEL_6;
    }
  }

  else
  {
    v3 = 0;
    v4 = 1;
  }

  HGArray<__simd128_float32_t,(HGFormat)28>::reserve(a1, 2 * v4);
LABEL_6:
  HGArray<__simd128_float32_t,(HGFormat)28>::resize(a1, v4);
  return *(*a1 + 16) + *(*a1 + 4) * v3 + a1[2];
}

uint64_t *HGArray<__simd128_float32_t,(HGFormat)28>::resize(uint64_t *result, int a2)
{
  v3 = *result;
  if (*result)
  {
    if (*(v3 + 12) < a2)
    {
      result = HGArrayData::allocate(*result, a2);
    }

    *(v3 + 8) = a2;
  }

  else if (a2 > 0)
  {

    HGArrayDataRef::allocate(result);
  }

  return result;
}

void HGArray<__simd128_float32_t,(HGFormat)28>::HGArray(uint64_t a1)
{
  *a1 = 0;
  *(a1 + 8) = 0;
  *(a1 + 12) = 28;
  HGArrayDataRef::allocate(a1);
}

void sub_2603055A8(_Unwind_Exception *exception_object)
{
  if (*v1)
  {
    HGArrayData::Release(*v1);
  }

  _Unwind_Resume(exception_object);
}

void OZShapeVertexArrayData::~OZShapeVertexArrayData(OZShapeVertexArrayData *this)
{
  v2 = *(this + 5);
  if (v2)
  {
    HGArrayData::Release(v2);
  }

  v3 = *(this + 3);
  if (v3)
  {
    HGArrayData::Release(v3);
  }

  v4 = *this;
  if (*this)
  {
    *(this + 1) = v4;
    operator delete(v4);
  }
}

uint64_t std::vector<OZShapeEdgePolygon>::__insert_with_size[abi:ne200100]<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(uint64_t *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  v5 = a2;
  if (a5 >= 1)
  {
    v7 = a3;
    v10 = a1[1];
    v9 = a1[2];
    if ((0xF0F0F0F0F0F0F0F1 * ((v9 - v10) >> 3)) >= a5)
    {
      v16 = v10 - a2;
      if (a5 <= (0xF0F0F0F0F0F0F0F1 * ((v10 - a2) >> 3)))
      {
        v26 = 17 * a5;
        std::vector<OZShapeEdgePolygon>::__move_range(a1, a2, a1[1], a2 + 136 * a5);
        v27 = 0;
        v28 = v7 + 8 * v26;
        do
        {
          v29 = v27 + v5;
          *v29 = *v7;
          v30 = *(v7 + 16);
          v31 = *(v7 + 32);
          v32 = *(v7 + 64);
          *(v29 + 48) = *(v7 + 48);
          *(v29 + 64) = v32;
          *(v29 + 16) = v30;
          *(v29 + 32) = v31;
          v33 = *(v7 + 80);
          v34 = *(v7 + 96);
          v35 = *(v7 + 112);
          *(v29 + 128) = *(v7 + 128);
          *(v29 + 96) = v34;
          *(v29 + 112) = v35;
          *(v29 + 80) = v33;
          v7 += 136;
          v27 += 136;
        }

        while (v7 != v28);
      }

      else
      {
        v17 = v16 + a3;
        std::vector<OZShapeEdgePolygon>::__construct_at_end<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(a1, v16 + a3, a4);
        if (v16 >= 1)
        {
          std::vector<OZShapeEdgePolygon>::__move_range(a1, v5, v10, v5 + 136 * a5);
          v18 = 0;
          do
          {
            v19 = v18 + v5;
            *v19 = *v7;
            v20 = *(v7 + 16);
            v21 = *(v7 + 32);
            v22 = *(v7 + 64);
            *(v19 + 48) = *(v7 + 48);
            *(v19 + 64) = v22;
            *(v19 + 16) = v20;
            *(v19 + 32) = v21;
            v23 = *(v7 + 80);
            v24 = *(v7 + 96);
            v25 = *(v7 + 112);
            *(v19 + 128) = *(v7 + 128);
            *(v19 + 96) = v24;
            *(v19 + 112) = v25;
            *(v19 + 80) = v23;
            v7 += 136;
            v18 += 136;
          }

          while (v7 != v17);
        }
      }
    }

    else
    {
      v11 = *a1;
      v12 = a5 - 0xF0F0F0F0F0F0F0FLL * ((v10 - *a1) >> 3);
      if (v12 > 0x1E1E1E1E1E1E1E1)
      {
        std::vector<double>::__throw_length_error[abi:ne200100]();
      }

      v13 = a2 - v11;
      v14 = 0xF0F0F0F0F0F0F0F1 * ((v9 - v11) >> 3);
      if (2 * v14 > v12)
      {
        v12 = 2 * v14;
      }

      if (v14 >= 0xF0F0F0F0F0F0F0)
      {
        v15 = 0x1E1E1E1E1E1E1E1;
      }

      else
      {
        v15 = v12;
      }

      v44 = a1;
      if (v15)
      {
        std::__allocate_at_least[abi:ne200100]<std::allocator<OZShapeEdgePolygon>>(a1, v15);
      }

      v36 = 8 * (v13 >> 3);
      __p = 0;
      v41 = v36;
      v43 = 0;
      do
      {
        for (i = 0; i != 128; i += 32)
        {
          v38 = (v36 + i);
          *v38 = *(v7 + i);
          v38[1] = *(v7 + i + 16);
        }

        *(v36 + 128) = *(v7 + 128);
        v36 += 136;
        v7 += 136;
      }

      while (v36 != 8 * (v13 >> 3) + 136 * a5);
      v42 = 8 * (v13 >> 3) + 136 * a5;
      v5 = std::vector<OZShapeEdgePolygon>::__swap_out_circular_buffer(a1, &__p, v5);
      if (v42 != v41)
      {
        v42 = (v42 - v41 - 136) % 0x88uLL + v41;
      }

      if (__p)
      {
        operator delete(__p);
      }
    }
  }

  return v5;
}

void sub_2603058B0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, uint64_t a12)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::vector<OZShapeEdgePolygon>::__construct_at_end<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(uint64_t result, uint64_t a2, uint64_t a3)
{
  v3 = *(result + 8);
  while (a2 != a3)
  {
    for (i = 0; i != 128; i += 32)
    {
      v5 = (v3 + i);
      *v5 = *(a2 + i);
      v5[1] = *(a2 + i + 16);
    }

    *(v3 + 128) = *(a2 + 128);
    a2 += 136;
    v3 += 136;
  }

  *(result + 8) = v3;
  return result;
}

__n128 std::vector<OZShapeEdgePolygon>::__move_range(uint64_t a1, uint64_t a2, unint64_t a3, uint64_t a4)
{
  v4 = *(a1 + 8);
  v5 = v4 - a4;
  v6 = a2 + v4 - a4;
  v7 = v4;
  while (v6 < a3)
  {
    for (i = 0; i != 128; i += 32)
    {
      v9 = v7 + i;
      *v9 = *(v6 + i);
      result = *(v6 + i + 16);
      *(v9 + 16) = result;
    }

    *(v7 + 128) = *(v6 + 128);
    v6 += 136;
    v7 += 136;
  }

  *(a1 + 8) = v7;
  if (v4 != a4)
  {
    v11 = v4 - 136;
    v12 = a2 - 136;
    do
    {
      *v11 = *(v12 + v5);
      v13 = *(v12 + v5 + 16);
      v14 = *(v12 + v5 + 32);
      v15 = *(v12 + v5 + 64);
      *(v11 + 48) = *(v12 + v5 + 48);
      *(v11 + 64) = v15;
      *(v11 + 16) = v13;
      *(v11 + 32) = v14;
      result = *(v12 + v5 + 80);
      v16 = *(v12 + v5 + 96);
      v17 = *(v12 + v5 + 112);
      *(v11 + 128) = *(v12 + v5 + 128);
      *(v11 + 96) = v16;
      *(v11 + 112) = v17;
      *(v11 + 80) = result;
      v11 -= 136;
      v5 -= 136;
    }

    while (v5);
  }

  return result;
}

uint64_t std::vector<OZShapeEdgePolygon>::__swap_out_circular_buffer(uint64_t *a1, void *a2, uint64_t a3)
{
  v4 = a1[1];
  result = a2[1];
  v6 = a2[2];
  if (v4 == a3)
  {
    v11 = a2[1];
    v10 = a3;
  }

  else
  {
    v7 = a3;
    do
    {
      for (i = 0; i != 128; i += 32)
      {
        v9 = (v6 + i);
        *v9 = *(v7 + i);
        v9[1] = *(v7 + i + 16);
      }

      *(v6 + 128) = *(v7 + 128);
      v7 += 136;
      v6 += 136;
    }

    while (v7 != v4);
    v10 = a1[1];
    v11 = a2[1];
    v6 = a2[2];
  }

  a2[2] = v6 + v10 - a3;
  a1[1] = a3;
  v12 = *a1;
  v13 = v11 + *a1 - a3;
  if (*a1 != a3)
  {
    v14 = v13;
    do
    {
      for (j = 0; j != 128; j += 32)
      {
        v16 = (v14 + j);
        *v16 = *(v12 + j);
        v16[1] = *(v12 + j + 16);
      }

      *(v14 + 128) = *(v12 + 128);
      v12 += 136;
      v14 += 136;
    }

    while (v12 != a3);
    v12 = *a1;
  }

  a2[1] = v13;
  *a1 = v13;
  a1[1] = v12;
  a2[1] = v12;
  v17 = a1[1];
  a1[1] = a2[2];
  a2[2] = v17;
  v18 = a1[2];
  a1[2] = a2[3];
  a2[3] = v18;
  *a2 = a2[1];
  return result;
}

void std::__allocate_at_least[abi:ne200100]<std::allocator<OZShapeEdgePolygon>>(uint64_t a1, unint64_t a2)
{
  if (a2 < 0x1E1E1E1E1E1E1E2)
  {
    operator new();
  }

  std::__throw_bad_array_new_length[abi:ne200100]();
}

uint64_t std::vector<OZShapeEdgePolygon>::__emplace_back_slow_path<OZShapeEdgePolygon const&>(uint64_t *a1, uint64_t a2)
{
  v2 = 0xF0F0F0F0F0F0F0F1 * ((a1[1] - *a1) >> 3);
  v3 = v2 + 1;
  if (v2 + 1 > 0x1E1E1E1E1E1E1E1)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  if (0xE1E1E1E1E1E1E1E2 * ((a1[2] - *a1) >> 3) > v3)
  {
    v3 = 0xE1E1E1E1E1E1E1E2 * ((a1[2] - *a1) >> 3);
  }

  if (0xF0F0F0F0F0F0F0F1 * ((a1[2] - *a1) >> 3) >= 0xF0F0F0F0F0F0F0)
  {
    v6 = 0x1E1E1E1E1E1E1E1;
  }

  else
  {
    v6 = v3;
  }

  v17 = a1;
  if (v6)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<OZShapeEdgePolygon>>(a1, v6);
  }

  __p = 0;
  v14 = 136 * v2;
  v16 = 0;
  v7 = (a2 + 16);
  v8 = (136 * v2 + 16);
  v9 = 4;
  do
  {
    *(v8 - 1) = *(v7 - 1);
    v10 = *v7;
    v7 += 2;
    *v8 = v10;
    v8 += 2;
    --v9;
  }

  while (v9);
  *(136 * v2 + 0x80) = *(a2 + 128);
  v15 = 136 * v2 + 136;
  std::vector<OZShapeEdgePolygon>::__swap_out_circular_buffer(a1, &__p);
  v11 = a1[1];
  if (v15 != v14)
  {
    v15 = (v15 - v14 - 136) % 0x88uLL + v14;
  }

  if (__p)
  {
    operator delete(__p);
  }

  return v11;
}

void sub_260305CA4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, uint64_t a12)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

uint64_t *std::vector<OZShapeEdgePolygon>::__swap_out_circular_buffer(uint64_t *result, void *a2)
{
  v2 = *result;
  v3 = result[1];
  v4 = a2[1] + *result - v3;
  if (v3 != *result)
  {
    v5 = a2[1] + *result - v3;
    do
    {
      for (i = 0; i != 128; i += 32)
      {
        v7 = (v5 + i);
        *v7 = *(v2 + i);
        v7[1] = *(v2 + i + 16);
      }

      *(v5 + 128) = *(v2 + 128);
      v2 += 136;
      v5 += 136;
    }

    while (v2 != v3);
    v2 = *result;
  }

  a2[1] = v4;
  *result = v4;
  result[1] = v2;
  a2[1] = v2;
  v8 = result[1];
  result[1] = a2[2];
  a2[2] = v8;
  v9 = result[2];
  result[2] = a2[3];
  a2[3] = v9;
  *a2 = a2[1];
  return result;
}

unint64_t *std::__split_buffer<OZShapeEdgePolygon>::emplace_back<OZShapeEdgePolygon const&>(unint64_t *result, uint64_t a2)
{
  v2 = result[2];
  v3 = v2;
  if (v2 == result[3])
  {
    v4 = result[1];
    if (v4 <= *result)
    {
      v13 = v2 - *result;
      v12 = v13 == 0;
      v14 = 0xE1E1E1E1E1E1E1E2 * (v13 >> 3);
      if (v12)
      {
        v15 = 1;
      }

      else
      {
        v15 = v14;
      }

      std::__allocate_at_least[abi:ne200100]<std::allocator<OZShapeEdgePolygon>>(result[4], v15);
    }

    v5 = 0xF0F0F0F0F0F0F0F1 * ((v4 - *result) >> 3) + 1;
    v3 = v4 - 136 * (v5 / 2);
    if (v4 != v2)
    {
      do
      {
        *v3 = *v4;
        v6 = *(v4 + 16);
        v7 = *(v4 + 32);
        v8 = *(v4 + 64);
        *(v3 + 48) = *(v4 + 48);
        *(v3 + 64) = v8;
        *(v3 + 16) = v6;
        *(v3 + 32) = v7;
        v9 = *(v4 + 80);
        v10 = *(v4 + 96);
        v11 = *(v4 + 112);
        *(v3 + 128) = *(v4 + 128);
        *(v3 + 96) = v10;
        *(v3 + 112) = v11;
        *(v3 + 80) = v9;
        v4 += 136;
        v3 += 136;
      }

      while (v4 != v2);
      v4 = result[1];
    }

    result[1] = v4 + 136 * (v5 / -2);
    result[2] = v3;
  }

  v16 = (a2 + 16);
  v17 = (v3 + 16);
  v18 = 4;
  do
  {
    *(v17 - 1) = *(v16 - 1);
    v19 = *v16;
    v16 += 2;
    *v17 = v19;
    v17 += 2;
    --v18;
  }

  while (v18);
  *(v3 + 128) = *(a2 + 128);
  result[2] += 136;
  return result;
}

double *OZShapeEdgePolygon::transformPoints(double *a1, double *a2)
{
  PCMatrix44Tmpl<double>::transform<double>(a2, a1, a1);
  PCMatrix44Tmpl<double>::transform<double>(a2, a1 + 4, a1 + 4);
  PCMatrix44Tmpl<double>::transform<double>(a2, a1 + 8, a1 + 8);

  return PCMatrix44Tmpl<double>::transform<double>(a2, a1 + 12, a1 + 12);
}

BOOL OZShapeEdgePolygon::checkWindingOrder(OZShapeEdgePolygon *this)
{
  v1 = 0;
  v27 = *MEMORY[0x277D85DE8];
  v2 = 24;
  do
  {
    v3 = this + v2;
    v4 = *(this + v2);
    if (v4 <= 0.0)
    {
      return 1;
    }

    v5 = *(v3 - 2);
    *&v25[v1] = *(v3 - 3);
    *&v23[v1] = v5;
    *&v21[v1] = v4;
    v2 += 32;
    v1 += 8;
  }

  while (v1 != 32);
  v6 = 0;
  v7 = *(this + 1);
  v26 = *this;
  v24 = v7;
  v22 = *(this + 3);
  do
  {
    v8 = *&v21[v6];
    if (vabdd_f64(0.0, v8) >= 0.0000001)
    {
      *&v25[v6] = *&v25[v6] / v8;
      *&v23[v6] = *&v23[v6] / v8;
    }

    v6 += 8;
  }

  while (v6 != 40);
  v9 = 0;
  v10 = v23;
  v12 = vld1q_dup_f64(v10);
  v11 = v10 + 1;
  v13 = v25;
  v15 = vld1q_dup_f64(v13);
  v14 = v13 + 1;
  v16 = 0.0;
  do
  {
    v17 = *&v11[v9];
    v18 = *&v14[v9];
    v19 = vsubq_f64(vmulq_f64(vextq_s8(v15, v18, 8uLL), v17), vmulq_f64(v18, vextq_s8(v12, v17, 8uLL)));
    v16 = v16 + v19.f64[0] + v19.f64[1];
    v9 += 2;
    v12 = v17;
    v15 = v18;
  }

  while (v9 != 4);
  return v16 > 0.0;
}

void OZShapeRenderParams::OZShapeRenderParams(OZShapeRenderParams *this)
{
  *this = &unk_2872DE240;
  *(this + 200) = 0u;
  PCWorkingColorVector::PCWorkingColorVector((this + 280));
  *(this + 392) = 0u;
  *(this + 296) = 0u;
  *(this + 312) = 0u;
  *(this + 328) = 0u;
  *(this + 344) = 0u;
  *(this + 45) = 0;
  *(this + 51) = 0xBFF0000000000000;
  *(this + 35) = 0u;
  *(this + 36) = 0u;
  *(this + 37) = 0u;
  *(this + 38) = 0u;
  *(this + 39) = 0u;
  *(this + 40) = 0u;
  *(this + 41) = 0u;
  *(this + 42) = 0u;
  *(this + 43) = 0u;
  *(this + 44) = 0u;
  *(this + 45) = 0u;
  *(this + 46) = 0u;
  v2 = MEMORY[0x277CC08F0];
  *(this + 23) = *MEMORY[0x277CC08F0];
  *(this + 48) = *(v2 + 16);
  *(this + 68) = 0x3FF0000000000000;
  *(this + 63) = 0x3FF0000000000000;
  *(this + 58) = 0x3FF0000000000000;
  *(this + 26) = xmmword_260342EE0;
  *(this + 27) = 0u;
  *(this + 28) = 0u;
  *(this + 472) = 0u;
  *(this + 488) = 0u;
  *(this + 32) = 0u;
  *(this + 33) = 0u;
  *(this + 138) = 0x1000000;
  *(this + 94) = 0;
  __asm { FMOV            V0.2D, #-1.0 }

  *(this + 49) = 0u;
  *(this + 50) = _Q0;
  *(this + 1112) = 0u;
  *(this + 1128) = 0u;
  *(this + 1080) = 0u;
  *(this + 1096) = 0u;
  *(this + 1048) = 0u;
  *(this + 1064) = 0u;
  *(this + 1016) = 0u;
  *(this + 1032) = 0u;
  *(this + 984) = 0u;
  *(this + 1000) = 0u;
  *(this + 952) = 0u;
  *(this + 968) = 0u;
  *(this + 97) = *(v2 + 16);
  *(this + 760) = *v2;
  *(this + 117) = 0x3FF0000000000000;
  *(this + 112) = 0x3FF0000000000000;
  *(this + 107) = 0x3FF0000000000000;
  *(this + 102) = 0x3FF0000000000000;
  *(this + 824) = 0u;
  *(this + 840) = 0u;
  *(this + 54) = 0u;
  *(this + 55) = 0u;
  *(this + 904) = 0u;
  *(this + 920) = 0u;
  *(this + 236) = 0x1000000;
  *(this + 165) = 0x3FF0000000000000;
  *(this + 160) = 0x3FF0000000000000;
  *(this + 155) = 0x3FF0000000000000;
  *(this + 150) = 0x3FF0000000000000;
  *(this + 1208) = 0u;
  *(this + 1224) = 0u;
  *(this + 79) = 0u;
  *(this + 78) = 0u;
  *(this + 1288) = 0u;
  *(this + 1304) = 0u;
  *(this + 2) = -1;
  *(this + 2) = 0xC08F400000000000;
  *(this + 3) = -1;
  *(this + 72) = xmmword_260342700;
  *(this + 11) = 0;
  *(this + 112) = 0;
  *(this + 116) = -1;
  *(this + 21) = 0xFFFFFFFF00000000;
  *(this + 14) = vdupq_n_s64(0xC08F400000000000);
  *(this + 8) = -1;
  *(this + 9) = -1;
  *(this + 24) = 0;
  __asm { FMOV            V1.2D, #1.0 }

  *(this + 40) = _Q1;
  *(this + 56) = _Q1;
  *(this + 8) = _Q1;
  *(this + 9) = _Q1;
  *(this + 6) = _Q0;
  *(this + 20) = 0x3FF0000000000000;
  *(this + 31) = -1;
  v9 = MEMORY[0x277CC08A0];
  v10 = *MEMORY[0x277CC08A0];
  *(this + 145) = *(MEMORY[0x277CC08A0] + 16);
  *(this + 1144) = v10;
  v11 = *v9;
  *(this + 148) = *(v9 + 2);
  *(this + 73) = v11;
  *(this + 248) = _Q1;
  *(this + 33) = 0;
  *(this + 34) = 0;
  *(this + 120) = 0;
  *(this + 6) = 0;
  *(this + 298) = 16843009;
  *(this + 176) = 1;
  *(this + 180) = 0x100000000;
  *(this + 216) = 0;
  *(this + 242) = 0;
}

void OZShapeRenderParams::OZShapeRenderParams(OZShapeRenderParams *this, OZShapeRenderParams *a2, int a3)
{
  *this = &unk_2872DE240;
  *(this + 200) = 0u;
  PCWorkingColorVector::PCWorkingColorVector((this + 280));
  *(this + 392) = 0u;
  *(this + 296) = 0u;
  *(this + 312) = 0u;
  *(this + 328) = 0u;
  *(this + 344) = 0u;
  *(this + 45) = 0;
  *(this + 51) = 0xBFF0000000000000;
  *(this + 35) = 0u;
  *(this + 36) = 0u;
  *(this + 37) = 0u;
  *(this + 38) = 0u;
  *(this + 39) = 0u;
  *(this + 40) = 0u;
  *(this + 41) = 0u;
  *(this + 42) = 0u;
  *(this + 43) = 0u;
  *(this + 44) = 0u;
  *(this + 45) = 0u;
  *(this + 46) = 0u;
  v6 = MEMORY[0x277CC08F0];
  *(this + 23) = *MEMORY[0x277CC08F0];
  *(this + 48) = *(v6 + 16);
  *(this + 68) = 0x3FF0000000000000;
  *(this + 63) = 0x3FF0000000000000;
  *(this + 58) = 0x3FF0000000000000;
  *(this + 26) = xmmword_260342EE0;
  *(this + 27) = 0u;
  *(this + 28) = 0u;
  *(this + 472) = 0u;
  *(this + 488) = 0u;
  *(this + 32) = 0u;
  *(this + 33) = 0u;
  *(this + 138) = 0x1000000;
  *(this + 94) = 0;
  __asm { FMOV            V1.2D, #-1.0 }

  *(this + 49) = 0u;
  *(this + 50) = _Q1;
  *(this + 1112) = 0u;
  *(this + 1128) = 0u;
  *(this + 1080) = 0u;
  *(this + 1096) = 0u;
  *(this + 1048) = 0u;
  *(this + 1064) = 0u;
  *(this + 1016) = 0u;
  *(this + 1032) = 0u;
  *(this + 984) = 0u;
  *(this + 1000) = 0u;
  *(this + 952) = 0u;
  *(this + 968) = 0u;
  *(this + 97) = *(v6 + 16);
  *(this + 760) = *v6;
  *(this + 117) = 0x3FF0000000000000;
  *(this + 112) = 0x3FF0000000000000;
  *(this + 107) = 0x3FF0000000000000;
  *(this + 102) = 0x3FF0000000000000;
  *(this + 824) = 0u;
  *(this + 840) = 0u;
  *(this + 54) = 0u;
  *(this + 55) = 0u;
  *(this + 904) = 0u;
  *(this + 920) = 0u;
  *(this + 236) = 0x1000000;
  *(this + 165) = 0x3FF0000000000000;
  *(this + 160) = 0x3FF0000000000000;
  *(this + 155) = 0x3FF0000000000000;
  *(this + 150) = 0x3FF0000000000000;
  *(this + 1208) = 0u;
  *(this + 1224) = 0u;
  *(this + 79) = 0u;
  *(this + 78) = 0u;
  *(this + 1288) = 0u;
  *(this + 1304) = 0u;
  *(this + 2) = *(a2 + 2);
  *&_Q1 = *(a2 + 3);
  *(this + 2) = *(a2 + 2);
  *(this + 3) = _Q1;
  *(this + 13) = *(a2 + 13);
  *(this + 72) = *(a2 + 72);
  *(this + 11) = *(a2 + 11);
  LODWORD(v6) = *(a2 + 9);
  *(this + 8) = *(a2 + 8);
  *(this + 9) = v6;
  *(this + 112) = *(a2 + 112);
  *(this + 116) = *(a2 + 116);
  *(this + 21) = *(a2 + 21);
  *(this + 14) = *(a2 + 14);
  *(this + 24) = *(a2 + 24);
  *(this + 200) = *(a2 + 200);
  *(this + 5) = *(a2 + 5);
  *(this + 6) = *(a2 + 6);
  *(this + 7) = *(a2 + 7);
  *(this + 8) = *(a2 + 8);
  *(this + 16) = *(a2 + 16);
  *(this + 17) = *(a2 + 17);
  *(this + 18) = *(a2 + 18);
  *(this + 19) = *(a2 + 19);
  *(this + 31) = *(a2 + 31);
  *v12 = *(a2 + 280);
  *(this + 1193) = *(a2 + 1193);
  v13 = *(a2 + 1144);
  *(this + 145) = *(a2 + 145);
  *(this + 1144) = v13;
  v14 = *(a2 + 73);
  *(this + 148) = *(a2 + 148);
  *(this + 73) = v14;
  *(this + 248) = *(a2 + 248);
  *&_Q1 = *(a2 + 34);
  *(this + 33) = *(a2 + 33);
  *(this + 34) = _Q1;
  *(this + 1192) = 1;
  *(this + 241) = *(a2 + 241);
  *(this + 20) = *(a2 + 20);
  *(this + 6) = *(a2 + 6);
  *(this + 12) = *(a2 + 12);
  *(this + 176) = *(a2 + 176);
  *(this + 240) = *(a2 + 240);
  *(this + 180) = *(a2 + 180);
  *(this + 216) = *(a2 + 216);
  if (a2 != this)
  {
    v15 = 0;
    v16 = this + 1200;
    v17 = a2 + 1200;
    do
    {
      for (i = 0; i != 32; i += 8)
      {
        *&v16[i] = *&v17[i];
      }

      ++v15;
      v16 += 32;
      v17 += 32;
    }

    while (v15 != 4);
  }

  *(this + 242) = *(a2 + 242);
  if (a3)
  {
    OZShapeContour::operator=(this + 368, a2 + 23);
    if (*(a2 + 94))
    {
      operator new();
    }

    OZShapeContour::operator=(this + 760, (a2 + 760));
  }
}

void sub_260306740(_Unwind_Exception *a1)
{
  MEMORY[0x2666E9F00](v3, 0x10A0C401050895ELL);
  OZShapeContour::~OZShapeContour(v2);
  std::unique_ptr<OZShapeReparametrizedContour>::reset[abi:ne200100]((v1 + 752), 0);
  OZShapeContour::~OZShapeContour((v1 + 368));
  v6 = *(v1 + 344);
  if (v6)
  {
    *(v1 + 352) = v6;
    operator delete(v6);
  }

  v7 = *(v1 + 320);
  if (v7)
  {
    *(v1 + 328) = v7;
    operator delete(v7);
  }

  v8 = *v4;
  if (*v4)
  {
    *(v1 + 304) = v8;
    operator delete(v8);
  }

  _Unwind_Resume(a1);
}

char *OZShapeContour::operator=(char *result, __int128 *a2)
{
  v3 = result;
  *(result + 185) = *(a2 + 185);
  result[187] = *(a2 + 187);
  v4 = *a2;
  *(result + 2) = *(a2 + 2);
  *result = v4;
  v5 = *(a2 + 24);
  *(result + 40) = *(a2 + 40);
  *(result + 24) = v5;
  if (a2 == result)
  {
    result[184] = *(a2 + 184);
  }

  else
  {
    v6 = 0;
    v7 = a2 + 56;
    v8 = result + 56;
    do
    {
      for (i = 0; i != 32; i += 8)
      {
        *&v8[i] = *(v7 + i);
      }

      ++v6;
      v8 += 32;
      v7 += 32;
    }

    while (v6 != 4);
    result[184] = *(a2 + 184);
    if (a2 != result)
    {
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(result + 24, *(a2 + 24), *(a2 + 25), (*(a2 + 25) - *(a2 + 24)) >> 3);
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(v3 + 27, *(a2 + 27), *(a2 + 28), (*(a2 + 28) - *(a2 + 27)) >> 3);
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(v3 + 30, *(a2 + 30), *(a2 + 31), (*(a2 + 31) - *(a2 + 30)) >> 3);
      std::vector<PCVector2<double>>::__assign_with_size[abi:ne200100]<PCVector2<double>*,PCVector2<double>*>(v3 + 33, *(a2 + 33), *(a2 + 34), (*(a2 + 34) - *(a2 + 33)) >> 4);
      std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(v3 + 36, *(a2 + 36), *(a2 + 37), 0xF0F0F0F0F0F0F0F1 * ((*(a2 + 37) - *(a2 + 36)) >> 3));
      std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(v3 + 39, *(a2 + 39), *(a2 + 40), 0xF0F0F0F0F0F0F0F1 * ((*(a2 + 40) - *(a2 + 39)) >> 3));
      std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(v3 + 42, *(a2 + 42), *(a2 + 43), 0xF0F0F0F0F0F0F0F1 * ((*(a2 + 43) - *(a2 + 42)) >> 3));
      v10 = *(a2 + 45);
      v11 = *(a2 + 46);

      return std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(v3 + 45, v10, v11, 0xF0F0F0F0F0F0F0F1 * ((v11 - v10) >> 3));
    }
  }

  return result;
}

char *OZShapeRenderParams::assign(char *this, OZShapeRenderParams *a2, int a3)
{
  v4 = this;
  *(this + 2) = *(a2 + 2);
  v5 = *(a2 + 3);
  *(this + 2) = *(a2 + 2);
  *(this + 3) = v5;
  this[13] = *(a2 + 13);
  *(this + 72) = *(a2 + 72);
  *(this + 11) = *(a2 + 11);
  v6 = *(a2 + 9);
  *(this + 8) = *(a2 + 8);
  *(this + 9) = v6;
  this[112] = *(a2 + 112);
  *(this + 116) = *(a2 + 116);
  *(this + 21) = *(a2 + 21);
  *(this + 14) = *(a2 + 14);
  *(this + 24) = *(a2 + 24);
  *(this + 200) = *(a2 + 200);
  *(this + 5) = *(a2 + 5);
  *(this + 6) = *(a2 + 6);
  *(this + 7) = *(a2 + 7);
  *(this + 8) = *(a2 + 8);
  *(this + 16) = *(a2 + 16);
  *(this + 17) = *(a2 + 17);
  *(this + 18) = *(a2 + 18);
  *(this + 19) = *(a2 + 19);
  *(this + 31) = *(a2 + 31);
  *(this + 280) = *(a2 + 280);
  *(this + 1193) = *(a2 + 1193);
  v7 = *(a2 + 1144);
  *(this + 145) = *(a2 + 145);
  *(this + 1144) = v7;
  v8 = *(a2 + 73);
  *(this + 148) = *(a2 + 148);
  *(this + 73) = v8;
  *(this + 248) = *(a2 + 248);
  v9 = *(a2 + 34);
  *(this + 33) = *(a2 + 33);
  *(this + 34) = v9;
  this[1192] = *(a2 + 1192);
  this[241] = *(a2 + 241);
  *(this + 20) = *(a2 + 20);
  *(this + 6) = *(a2 + 6);
  this[12] = *(a2 + 12);
  this[1195] = *(a2 + 1195);
  this[176] = *(a2 + 176);
  this[240] = *(a2 + 240);
  *(this + 180) = *(a2 + 180);
  this[216] = *(a2 + 216);
  if (a2 != this)
  {
    v10 = 0;
    v11 = a2 + 1200;
    v12 = this + 1200;
    do
    {
      for (i = 0; i != 32; i += 8)
      {
        *&v12[i] = *&v11[i];
      }

      ++v10;
      v12 += 32;
      v11 += 32;
    }

    while (v10 != 4);
  }

  this[242] = *(a2 + 242);
  if (a3)
  {
    OZShapeContour::operator=(this + 368, a2 + 23);
    if (*(a2 + 94))
    {
      operator new();
    }

    return OZShapeContour::operator=(v4 + 760, (a2 + 760));
  }

  return this;
}

void OZShapeRenderParams::~OZShapeRenderParams(OZShapeReparametrizedContour **this)
{
  *this = &unk_2872DE240;
  OZShapeContour::~OZShapeContour((this + 95));
  std::unique_ptr<OZShapeReparametrizedContour>::reset[abi:ne200100](this + 94, 0);
  OZShapeContour::~OZShapeContour((this + 46));
  v2 = this[43];
  if (v2)
  {
    this[44] = v2;
    operator delete(v2);
  }

  v3 = this[40];
  if (v3)
  {
    this[41] = v3;
    operator delete(v3);
  }

  v4 = this[37];
  if (v4)
  {
    this[38] = v4;
    operator delete(v4);
  }
}

{
  OZShapeRenderParams::~OZShapeRenderParams(this);

  JUMPOUT(0x2666E9F00);
}

char *OZShapeRenderParams::operator=(uint64_t a1, uint64_t a2)
{
  *(a1 + 8) = *(a2 + 8);
  v4 = *(a2 + 24);
  *(a1 + 16) = *(a2 + 16);
  *(a1 + 24) = v4;
  *(a1 + 13) = *(a2 + 13);
  *(a1 + 72) = *(a2 + 72);
  *(a1 + 88) = *(a2 + 88);
  v5 = *(a2 + 36);
  *(a1 + 32) = *(a2 + 32);
  *(a1 + 36) = v5;
  *(a1 + 112) = *(a2 + 112);
  *(a1 + 116) = *(a2 + 116);
  *(a1 + 168) = *(a2 + 168);
  *(a1 + 224) = *(a2 + 224);
  *(a1 + 192) = *(a2 + 192);
  *(a1 + 200) = *(a2 + 200);
  *(a1 + 40) = *(a2 + 40);
  *(a1 + 48) = *(a2 + 48);
  *(a1 + 56) = *(a2 + 56);
  *(a1 + 64) = *(a2 + 64);
  *(a1 + 128) = *(a2 + 128);
  *(a1 + 136) = *(a2 + 136);
  *(a1 + 144) = *(a2 + 144);
  *(a1 + 152) = *(a2 + 152);
  *(a1 + 160) = *(a2 + 160);
  *(a1 + 280) = *(a2 + 280);
  *(a1 + 124) = *(a2 + 124);
  *(a1 + 180) = *(a2 + 180);
  *(a1 + 216) = *(a2 + 216);
  *(a1 + 1193) = *(a2 + 1193);
  v6 = *(a2 + 1144);
  *(a1 + 1160) = *(a2 + 1160);
  *(a1 + 1144) = v6;
  v7 = *(a2 + 1168);
  *(a1 + 1184) = *(a2 + 1184);
  *(a1 + 1168) = v7;
  *(a1 + 248) = *(a2 + 248);
  v8 = *(a2 + 272);
  *(a1 + 264) = *(a2 + 264);
  *(a1 + 272) = v8;
  *(a1 + 1192) = *(a2 + 1192);
  *(a1 + 241) = *(a2 + 241);
  *(a1 + 1195) = *(a2 + 1195);
  *(a1 + 176) = *(a2 + 176);
  *(a1 + 240) = *(a2 + 240);
  *(a1 + 96) = *(a2 + 96);
  *(a1 + 12) = *(a2 + 12);
  if (a2 != a1)
  {
    v9 = 0;
    v10 = a2 + 1200;
    v11 = a1 + 1200;
    do
    {
      for (i = 0; i != 32; i += 8)
      {
        *(v11 + i) = *(v10 + i);
      }

      ++v9;
      v11 += 32;
      v10 += 32;
    }

    while (v9 != 4);
  }

  OZShapeContour::operator=((a1 + 368), (a2 + 368));
  *(a1 + 242) = *(a2 + 242);
  if (*(a2 + 752))
  {
    operator new();
  }

  result = OZShapeContour::operator=((a1 + 760), (a2 + 760));
  if (a2 != a1)
  {
    std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>((a1 + 296), *(a2 + 296), *(a2 + 304), (*(a2 + 304) - *(a2 + 296)) >> 3);
    std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>((a1 + 320), *(a2 + 320), *(a2 + 328), (*(a2 + 328) - *(a2 + 320)) >> 3);
    v14 = *(a2 + 344);
    v15 = *(a2 + 352);

    return std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>((a1 + 344), v14, v15, (v15 - v14) >> 3);
  }

  return result;
}

char *std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(char **a1, uint64_t a2, uint64_t a3, unint64_t a4)
{
  v5 = a2;
  v7 = a1[2];
  result = *a1;
  if (0xF0F0F0F0F0F0F0F1 * ((v7 - result) >> 3) < a4)
  {
    if (result)
    {
      a1[1] = result;
      operator delete(result);
      v7 = 0;
      *a1 = 0;
      a1[1] = 0;
      a1[2] = 0;
    }

    if (a4 <= 0x1E1E1E1E1E1E1E1)
    {
      v9 = 0xF0F0F0F0F0F0F0F1 * (v7 >> 3);
      v10 = 2 * v9;
      if (2 * v9 <= a4)
      {
        v10 = a4;
      }

      if (v9 >= 0xF0F0F0F0F0F0F0)
      {
        v11 = 0x1E1E1E1E1E1E1E1;
      }

      else
      {
        v11 = v10;
      }

      std::vector<OZShapeEdgePolygon>::__vallocate[abi:ne200100](a1, v11);
    }

    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  v12 = a1[1];
  v13 = v12 - result;
  if (0xF0F0F0F0F0F0F0F1 * ((v12 - result) >> 3) >= a4)
  {
    while (v5 != a3)
    {
      *result = *v5;
      v22 = *(v5 + 16);
      v23 = *(v5 + 32);
      v24 = *(v5 + 64);
      *(result + 3) = *(v5 + 48);
      *(result + 4) = v24;
      *(result + 1) = v22;
      *(result + 2) = v23;
      v25 = *(v5 + 80);
      v26 = *(v5 + 96);
      v27 = *(v5 + 112);
      *(result + 16) = *(v5 + 128);
      *(result + 6) = v26;
      *(result + 7) = v27;
      *(result + 5) = v25;
      v5 += 136;
      result += 136;
    }

    a1[1] = result;
  }

  else
  {
    if (v12 != result)
    {
      v14 = v12 - result;
      v15 = a2;
      do
      {
        *result = *v15;
        v16 = *(v15 + 16);
        v17 = *(v15 + 32);
        v18 = *(v15 + 64);
        *(result + 3) = *(v15 + 48);
        *(result + 4) = v18;
        *(result + 1) = v16;
        *(result + 2) = v17;
        v19 = *(v15 + 80);
        v20 = *(v15 + 96);
        v21 = *(v15 + 112);
        *(result + 16) = *(v15 + 128);
        *(result + 6) = v20;
        *(result + 7) = v21;
        *(result + 5) = v19;
        v15 += 136;
        result += 136;
        v14 -= 136;
      }

      while (v14);
    }

    v28 = a2 + v13;

    return std::vector<OZShapeEdgePolygon>::__construct_at_end<std::__wrap_iter<OZShapeEdgePolygon*>,std::__wrap_iter<OZShapeEdgePolygon*>>(a1, v28, a3);
  }

  return result;
}

void std::vector<OZShapeEdgePolygon>::__vallocate[abi:ne200100](uint64_t a1, unint64_t a2)
{
  if (a2 < 0x1E1E1E1E1E1E1E2)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<OZShapeEdgePolygon>>(a1, a2);
  }

  std::vector<double>::__throw_length_error[abi:ne200100]();
}

OZShapeReparametrizedContour *std::unique_ptr<OZShapeReparametrizedContour>::reset[abi:ne200100](OZShapeReparametrizedContour **a1, OZShapeReparametrizedContour *a2)
{
  result = *a1;
  *a1 = a2;
  if (result)
  {
    OZShapeReparametrizedContour::~OZShapeReparametrizedContour(result);

    JUMPOUT(0x2666E9F00);
  }

  return result;
}

void OZShapeReparametrizedContour::OZShapeReparametrizedContour(OZShapeReparametrizedContour *this, char **a2)
{
  OZShapeContour::OZShapeContour(this, a2);
  *(v4 + 464) = 0;
  *(v4 + 432) = 0u;
  *(v4 + 448) = 0u;
  *(v4 + 400) = 0u;
  *(v4 + 416) = 0u;
  v5 = a2[48];
  if (v5)
  {
    v6 = (*(*v5 + 248))(v5);
    if (v6)
    {
    }

    *(this + 48) = v6;
  }

  *(this + 49) = a2[49];
  if (this != a2)
  {
    std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(this + 50, a2[50], a2[51], (a2[51] - a2[50]) >> 3);
    std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(this + 53, a2[53], a2[54], (a2[54] - a2[53]) >> 3);
    std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(this + 56, a2[56], a2[57], (a2[57] - a2[56]) >> 3);
  }
}

void sub_26030725C(_Unwind_Exception *a1)
{
  v3 = *(v1 + 448);
  if (v3)
  {
    *(v1 + 456) = v3;
    operator delete(v3);
  }

  OZShapeReparametrizedContour::OZShapeReparametrizedContour((v1 + 424), (v1 + 400), v1);
  OZShapeContour::~OZShapeContour(v1);
  _Unwind_Resume(a1);
}

void OZShapeContour::OZShapeContour(OZShapeContour *this, const OZShapeContour *a2)
{
  *(this + 3) = 0;
  *(this + 4) = 0;
  __asm { FMOV            V0.2D, #-1.0 }

  *(this + 40) = _Q0;
  *(this + 7) = 0x3FF0000000000000;
  v9 = this + 56;
  *(this + 22) = 0x3FF0000000000000;
  *(this + 17) = 0x3FF0000000000000;
  *(this + 12) = 0x3FF0000000000000;
  *(this + 4) = 0u;
  *(this + 5) = 0u;
  *(this + 104) = 0u;
  *(this + 120) = 0u;
  *(this + 12) = 0u;
  *(this + 15) = 0u;
  v10 = (this + 240);
  *(this + 9) = 0u;
  *(this + 10) = 0u;
  *(this + 13) = 0u;
  *(this + 14) = 0u;
  *(this + 16) = 0u;
  *(this + 17) = 0u;
  *(this + 18) = 0u;
  *(this + 19) = 0u;
  *(this + 20) = 0u;
  *(this + 21) = 0u;
  *(this + 22) = 0u;
  *(this + 23) = 0u;
  *(this + 185) = *(a2 + 185);
  *(this + 187) = *(a2 + 187);
  v11 = *a2;
  *(this + 2) = *(a2 + 2);
  *this = v11;
  v12 = *(a2 + 24);
  *(this + 40) = *(a2 + 40);
  *(this + 24) = v12;
  if (a2 == this)
  {
    *(this + 184) = *(a2 + 184);
  }

  else
  {
    v13 = 0;
    v14 = a2 + 56;
    do
    {
      for (i = 0; i != 32; i += 8)
      {
        *&v9[i] = *&v14[i];
      }

      ++v13;
      v9 += 32;
      v14 += 32;
    }

    while (v13 != 4);
    *(this + 184) = *(a2 + 184);
    if (a2 != this)
    {
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(this + 24, *(a2 + 24), *(a2 + 25), (*(a2 + 25) - *(a2 + 24)) >> 3);
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(this + 27, *(a2 + 27), *(a2 + 28), (*(a2 + 28) - *(a2 + 27)) >> 3);
      std::vector<double>::__assign_with_size[abi:ne200100]<double *,double *>(v10, *(a2 + 30), *(a2 + 31), (*(a2 + 31) - *(a2 + 30)) >> 3);
      std::vector<PCVector2<double>>::__assign_with_size[abi:ne200100]<PCVector2<double>*,PCVector2<double>*>(this + 33, *(a2 + 33), *(a2 + 34), (*(a2 + 34) - *(a2 + 33)) >> 4);
      std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(this + 36, *(a2 + 36), *(a2 + 37), 0xF0F0F0F0F0F0F0F1 * ((*(a2 + 37) - *(a2 + 36)) >> 3));
      std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(this + 39, *(a2 + 39), *(a2 + 40), 0xF0F0F0F0F0F0F0F1 * ((*(a2 + 40) - *(a2 + 39)) >> 3));
      std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(this + 42, *(a2 + 42), *(a2 + 43), 0xF0F0F0F0F0F0F0F1 * ((*(a2 + 43) - *(a2 + 42)) >> 3));
      std::vector<OZShapeEdgePolygon>::__assign_with_size[abi:ne200100]<OZShapeEdgePolygon*,OZShapeEdgePolygon*>(this + 45, *(a2 + 45), *(a2 + 46), 0xF0F0F0F0F0F0F0F1 * ((*(a2 + 46) - *(a2 + 45)) >> 3));
    }
  }
}

void sub_260307464(_Unwind_Exception *exception_object)
{
  v5 = v1[45];
  if (v5)
  {
    v1[46] = v5;
    operator delete(v5);
  }

  v6 = v1[42];
  if (v6)
  {
    v1[43] = v6;
    operator delete(v6);
  }

  v7 = v1[39];
  if (v7)
  {
    v1[40] = v7;
    operator delete(v7);
  }

  v8 = v1[36];
  if (v8)
  {
    v1[37] = v8;
    operator delete(v8);
  }

  v9 = v1[33];
  if (v9)
  {
    v1[34] = v9;
    operator delete(v9);
  }

  v10 = *v3;
  if (*v3)
  {
    v1[31] = v10;
    operator delete(v10);
  }

  v11 = v1[27];
  if (v11)
  {
    v1[28] = v11;
    operator delete(v11);
  }

  v12 = *v2;
  if (*v2)
  {
    v1[25] = v12;
    operator delete(v12);
  }

  _Unwind_Resume(exception_object);
}

void OZShapeReparametrizedContour::OZShapeReparametrizedContour(void **a1, void **a2, uint64_t a3)
{
  v5 = *a1;
  if (v5)
  {
    *(a3 + 432) = v5;
    operator delete(v5);
  }

  v6 = *a2;
  if (*a2)
  {
    *(a3 + 408) = v6;

    operator delete(v6);
  }
}

void heShapeTesselationCallback(double *a1, double **a2, float *a3, double **a4, const void **a5)
{
  v10 = malloc_type_malloc(0x30uLL, 0x100004000313F17uLL);
  v11 = v10;
  *v10 = *a1;
  v10[1] = a1[1];
  v10[2] = a1[2];
  v12 = *a3;
  v13 = *a2;
  v14 = a2[1];
  v15 = a3[1];
  v10[3] = **a2 * v12 + *v14 * v15;
  v10[4] = *(v13 + 8) * v12 + v14[1] * v15;
  v10[5] = *(v13 + 16) * v12 + v14[2] * v15;
  v17 = a5[1];
  v16 = a5[2];
  if (v17 >= v16)
  {
    v19 = (v17 - *a5) >> 3;
    if ((v19 + 1) >> 61)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v20 = v16 - *a5;
    v21 = v20 >> 2;
    if (v20 >> 2 <= (v19 + 1))
    {
      v21 = v19 + 1;
    }

    if (v20 >= 0x7FFFFFFFFFFFFFF8)
    {
      v22 = 0x1FFFFFFFFFFFFFFFLL;
    }

    else
    {
      v22 = v21;
    }

    if (v22)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<objc_class * {__strong}>>(a5, v22);
    }

    *(8 * v19) = v10;
    v18 = 8 * v19 + 8;
    v23 = a5[1] - *a5;
    v24 = (8 * v19 - v23);
    memcpy(v24, *a5, v23);
    v25 = *a5;
    *a5 = v24;
    a5[1] = v18;
    a5[2] = 0;
    if (v25)
    {
      operator delete(v25);
    }
  }

  else
  {
    *v17 = v10;
    v18 = (v17 + 1);
  }

  a5[1] = v18;
  *a4 = v11;
}

void heShapeTesselationEndCallback(uint64_t *a1)
{
  v2 = *a1;
  if (a1[1] != *a1)
  {
    v3 = 0;
    v4 = 1;
    do
    {
      free(*(v2 + 8 * v3));
      v3 = v4;
      v2 = *a1;
      ++v4;
    }

    while (v3 < (a1[1] - *a1) >> 3);
  }

  a1[1] = v2;
  v5 = a1[19];
  if (v5)
  {
    v6 = *(v5 + 24);
    if (v6)
    {
      LODWORD(v6) = *(v6 + 8);
    }

    v7 = 4;
    v8 = v6;
    std::vector<OZShapeVertexArrayElem>::push_back[abi:ne200100](v5, &v7);
  }
}

void std::vector<OZShapeVertexArrayElem>::push_back[abi:ne200100](uint64_t a1, uint64_t *a2)
{
  v5 = *(a1 + 8);
  v4 = *(a1 + 16);
  if (v5 >= v4)
  {
    v8 = 0xAAAAAAAAAAAAAAABLL * ((v5 - *a1) >> 2);
    v9 = v8 + 1;
    if (v8 + 1 > 0x1555555555555555)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v10 = 0xAAAAAAAAAAAAAAABLL * ((v4 - *a1) >> 2);
    if (2 * v10 > v9)
    {
      v9 = 2 * v10;
    }

    if (v10 >= 0xAAAAAAAAAAAAAAALL)
    {
      v11 = 0x1555555555555555;
    }

    else
    {
      v11 = v9;
    }

    if (v11)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<Vec3f>>(a1, v11);
    }

    v12 = 12 * v8;
    v13 = *a2;
    *(v12 + 8) = *(a2 + 2);
    *v12 = v13;
    v7 = 12 * v8 + 12;
    v14 = *(a1 + 8) - *a1;
    v15 = v12 - v14;
    memcpy((v12 - v14), *a1, v14);
    v16 = *a1;
    *a1 = v15;
    *(a1 + 8) = v7;
    *(a1 + 16) = 0;
    if (v16)
    {
      operator delete(v16);
    }
  }

  else
  {
    v6 = *a2;
    *(v5 + 8) = *(a2 + 2);
    *v5 = v6;
    v7 = v5 + 12;
  }

  *(a1 + 8) = v7;
}

double heVertexCallback(float64x2_t *a1, float64_t *a2)
{
  if (*(a2 + 19))
  {
    *v6.f32 = vcvt_f32_f64(*a1);
    v6.i64[1] = 0x3F80000000000000;
    PCMatrix44Tmpl<double>::transform<float>(a2 + 3, &v6, &v6);
    v5 = v6;
    *HGArray<__simd128_float32_t,(HGFormat)28>::append((*(a2 + 19) + 24)) = v5;
    v3 = HGArray<__simd128_float32_t,(HGFormat)28>::append((*(a2 + 19) + 40));
    result = 1.92414562e12;
    *v3 = xmmword_2608585E0;
  }

  return result;
}

uint64_t OZShape::calcHashForState(OZShape *this, PCSerializerWriteStream *a2, const CMTime *a3)
{
  OZChannelCurve::calcHashForState((this + 208), a2, a3);
  OZChannel::calcHashForState((this + 1072), a2, a3);
  OZChannel::calcHashForState((this + 1328), a2, a3);
  OZChannel::calcHashForState((this + 1480), a2, a3);
  OZChannel::calcHashForState((this + 1632), a2, a3);
  OZChannel::calcHashForState((this + 14752), a2, a3);
  isEnabled = OZChannelBase::isEnabled((this + 2784), 0, 1);
  (*(*a2 + 48))(a2, isEnabled);
  if (OZChannelBase::isEnabled((this + 2784), 0, 1))
  {
    OZChannelFolder::calcHashForState((this + 2784), a2, a3);
    OZChannel::calcHashForState((this + 2912), a2, a3);
    if (OZChannel::getValueAsInt((this + 2912), MEMORY[0x277CC08F0], 0.0))
    {
      OZChannelFolder::calcHashForState((this + 4328), a2, a3);
    }

    else
    {
      OZChannelFolder::calcHashForState((this + 3168), a2, a3);
      OZChannel::calcHashForState((this + 4176), a2, a3);
    }
  }

  v7 = OZChannelBase::isEnabled((this + 6800), 0, 1);
  (*(*a2 + 48))(a2, v7);
  if (OZChannelBase::isEnabled((this + 6800), 0, 1))
  {
    OZChannelFolder::calcHashForState((this + 6800), a2, a3);
  }

  OZChannel::calcHashForState((this + 11512), a2, a3);
  OZChannel::calcHashForState((this + 11664), a2, a3);
  if (OZChannel::getValueAsInt((this + 12856), MEMORY[0x277CC08F0], 0.0))
  {
    OZChannel::calcHashForState((this + 13008), a2, a3);
    OZChannel::calcHashForState((this + 13264), a2, a3);
  }

  if (OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0) == 4)
  {
    OZChannel::calcHashForState((this + 12072), a2, a3);
    OZChannelFolder::calcHashForState((this + 12224), a2, a3);
  }

  result = OZChannel::getValueAsInt((this + 1072), MEMORY[0x277CC08F0], 0.0);
  if (result == 5)
  {

    return OZChannelFolder::calcHashForState((this + 12224), a2, a3);
  }

  return result;
}

CGColorSpace **OZShape::getBorderSize(uint64_t a1, uint64_t a2, void *a3, double *a4)
{
  v15 = *(a2 + 16);
  v8 = *(a2 + 80);
  v16 = v8;
  if (v8)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v8);
  }

  v17 = *(a2 + 88);
  v9 = 2672;
  if (BYTE8(v15))
  {
    v9 = 2664;
  }

  v10 = *(a1 + v9);
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v16);
  v12 = *(v10 + 8);
  if (v12 && *(v10 + 16) > 2.0 || (v13 = *(v10 + 224), v13 > 0.0) && *(v10 + 120) || v13 < 0.0 && *(v10 + 120))
  {
    if (a3)
    {
      *a3 = 0;
    }

    v14 = 0.0;
    if (!a4)
    {
      return result;
    }

LABEL_22:
    *a4 = v14;
    return result;
  }

  if (fabs(v13) < 0.0000001 && *(v10 + 120) || v12 && *(v10 + 16) <= 2.0)
  {
    if (a3)
    {
      *a3 = 0x4000000000000000;
    }

    v14 = 2.0;
    if (a4)
    {
      goto LABEL_22;
    }
  }

  return result;
}

uint64_t OZShape::getCurrentRenderParams(uint64_t a1, uint64_t a2)
{
  v2 = 2672;
  if (*(a2 + 24))
  {
    v2 = 2664;
  }

  return *(a1 + v2);
}

void OZShape::getShapeBounds(uint64_t a1, uint64_t a2, double *a3, uint64_t a4)
{
  (*(*a1 + 64))(a1, a3, a4, 0, 1);
  Contour = OZShape::getContour(a1, a3, a4);
  v9 = *(Contour + 40);
  *a2 = *(Contour + 24);
  *(a2 + 16) = v9;
  if (*(a2 + 16) < 0.0 || *(a2 + 24) < 0.0)
  {
    return;
  }

  v10 = *(a4 + 8);
  if (!v10 || (v11 = *(a4 + 16), v11 <= 2.0))
  {
    v23 = *(a4 + 224);
    if (v23 > 0.0 && *(a4 + 120))
    {
      v24 = v23;
      v25 = MEMORY[0x277CC08F0];
      OZChannel::getValueAsDouble((a1 + 13416), MEMORY[0x277CC08F0], 0.0);
      v27 = v26;
      OZChannel::getValueAsDouble((a1 + 13568), v25, 0.0);
      v29 = v24;
      if (v27 != 0.0)
      {
        v29 = v24 / fabs(v27);
      }

      if (v28 != 0.0)
      {
        v24 = v24 / fabs(v28);
      }

      v30 = v29;
      v31.f64[0] = v24;
    }

    else
    {
      if (v23 < 0.0 && *(a4 + 120) || (fabs(v23) >= 0.0000001 || !*(a4 + 120)) && (!v10 || *(a4 + 16) > 2.0))
      {
        return;
      }

      v32 = 2.0 / a3[4];
      v33 = *(a4 + 248);
      if (v33 != 0.0)
      {
        v32 = v32 / fabs(v33);
      }

      v34 = 2.0 / a3[5];
      v35 = *(a4 + 256);
      if (v35 != 0.0)
      {
        v34 = v34 / fabs(v35);
      }

      if (v23 <= 0.0 && *(a4 + 120))
      {
        v36 = MEMORY[0x277CC08F0];
        OZChannel::getValueAsDouble((a1 + 13416), MEMORY[0x277CC08F0], 0.0);
        v38 = v37;
        OZChannel::getValueAsDouble((a1 + 13568), v36, 0.0);
        if (v38 != 0.0)
        {
          v32 = v32 / fabs(v38);
        }

        if (v39 != 0.0)
        {
          v34 = v34 / fabs(v39);
        }
      }

      v30 = v32;
      v31.f64[0] = v34;
    }

    *a2 = *a2 - v30;
    v31.f64[1] = -v30 - v30;
    *(a2 + 8) = vsubq_f64(*(a2 + 8), v31);
    *(a2 + 24) = *(a2 + 24) - (-v31.f64[0] - v31.f64[0]);
    return;
  }

  v12 = v11 * 0.5;
  if (*(a4 + 28) == 3 || *(a4 + 32) == 3)
  {
    __asm { FMOV            V1.2D, #0.5 }

    v18 = vmulq_f64(vmulq_n_f64(*(a4 + 96), v11), _Q1);
    if (v18.f64[1] >= v18.f64[0])
    {
      v18.f64[0] = v18.f64[1];
    }

    v12 = v18.f64[0] + v12;
  }

  if (*(a4 + 13) == 1)
  {
    v50 = 1.0;
    v52 = 1.0;
    (*(*a1 + 368))(a1, &v50, &v52, a3);
    v19 = fabs(v50);
    v20 = 0.0;
    v21 = 0.0;
    if (v19 >= 0.0000001)
    {
      v21 = v12 / v19;
    }

    v22 = fabs(v52);
    if (v22 >= 0.0000001)
    {
      v20 = v12 / v22;
    }

    v12 = v20;
  }

  else
  {
    v21 = v12;
  }

  v40.f64[0] = v21 / (*(*a1 + 176))(a1);
  v40.f64[1] = v12;
  v41 = vsubq_f64(*a2, v40);
  v42 = vsubq_f64(*(a2 + 16), vsubq_f64(vnegq_f64(v40), v40));
  *a2 = v41;
  *(a2 + 16) = v42;
  v43 = *(a4 + 24);
  if (!v43 || (v44 = *(a4 + 28)) == 0 || (v45 = *(a4 + 32), v45 == 2) || v44 == 2 || v43 == 2 || !v45)
  {
    if (v21 >= v12)
    {
      v12 = v21;
    }

    v52 = 0.0;
    OZChannelCurve::getVerticesList((a1 + 208), &v50);
    v46 = v50;
    if (*&v51 != *&v50)
    {
      v47 = 0;
      v48 = v12;
      v49 = 1;
      do
      {
        OZChannelCurve::getVertexParametricValue(a1 + 208, *(*&v46 + 16 * v47), *(*&v46 + 16 * v47 + 8), a3, &v52);
        OZShape::calcIntersectionForOutlineAtPoint(a1, a3, a4, a2, v52, v48);
        v47 = v49;
        v46 = v50;
        ++v49;
      }

      while (v47 != (*&v51 - *&v50) >> 4);
    }

    if (v46 != 0.0)
    {
      v51 = v46;
      operator delete(*&v46);
    }
  }
}

void sub_260308198(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void OZShape::calculateBounds(OZShape *this, const OZShapeRenderState *a2)
{
  v4 = *(a2 + 3);
  v21 = *(a2 + 2);
  v22 = v4;
  v23 = *(a2 + 4);
  v5 = *(a2 + 1);
  v19[1] = *a2;
  v20 = v5;
  v6 = *(a2 + 10);
  v24 = v6;
  if (v6)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v6);
  }

  v25 = *(a2 + 22);
  v7 = 2672;
  if (BYTE8(v20))
  {
    v7 = 2664;
  }

  v8 = *(this + v7);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v24);
  Contour = OZShape::getContour(this, a2, v8);
  if (OZChannelBase::isEnabled((this + 6800), 0, 1))
  {
    OZChannelBase::isEnabled((this + 2784), 0, 1);
  }

  __asm { FMOV            V0.2D, #-1.0 }

  *(Contour + 40) = _Q0;
  v15 = *(Contour + 216);
  if (*(Contour + 224) != v15)
  {
    v16 = 0;
    v17 = 1;
    do
    {
      v18 = *(*(Contour + 240) + 8 * v16);
      v19[0].f64[0] = *(v15 + 8 * v16);
      v19[0].f64[1] = v18;
      PCRect<double>::operator|=((Contour + 24), v19);
      v16 = v17;
      v15 = *(Contour + 216);
      ++v17;
    }

    while (v16 != (*(Contour + 224) - v15) >> 3);
  }

  *(v8 + 1192) = 0;
}

BOOL OZShape::shouldDrawSoftEdges(OZShape *this, const OZShapeRenderParams *a2)
{
  if (!*(a2 + 2))
  {
    return 1;
  }

  if (OZShape::isWriteOnEffectEnabled(this, a2))
  {
    return 1;
  }

  v3 = *(a2 + 29);
  return v3 == 1 || !v3 && (*(a2 + 2) < 2.0 || fabs(*(a2 + 8) + -1.0) >= 0.0000001 || !*(a2 + 42) && *(a2 + 30));
}

uint64_t OZShape::shouldDrawAntialiasingOnFill(OZShape *this, const OZShapeRenderParams *a2)
{
  v3 = *(a2 + 30);
  if (*(a2 + 2))
  {
    if (v3)
    {
      if (OZShape::isWriteOnEffectEnabled(this, a2))
      {
        return 1;
      }

      v4 = *(a2 + 29);
      if (v4 == 1 || !v4 && (*(a2 + 2) < 2.0 || fabs(*(a2 + 8) + -1.0) >= 0.0000001))
      {
        return 1;
      }

      if (!*(a2 + 42))
      {
        return 1;
      }
    }
  }

  else if (v3 && fabs(*(a2 + 28)) < 0.0000001)
  {
    return 1;
  }

  return 0;
}

uint64_t OZShape::shouldDrawParticles(uint64_t a1, CMTime *a2)
{
  v5 = *a2;
  ValueAsInt = OZChannel::getValueAsInt((a1 + 6928), &v5, 0.0);
  LODWORD(result) = OZChannelBase::isEnabled((a1 + 6800), 0, 1);
  if ((ValueAsInt - 1) < 2)
  {
    return result;
  }

  else
  {
    return 0;
  }
}

BOOL OZShape::shouldDrawOnlyParticles(uint64_t a1, CMTime *a2)
{
  v6 = *a2;
  ValueAsInt = OZChannel::getValueAsInt((a1 + 6928), &v6, 0.0);
  isEnabled = OZChannelBase::isEnabled((a1 + 6800), 0, 1);
  result = 0;
  if (isEnabled)
  {
    return (OZChannelBase::isEnabled((a1 + 2784), 0, 1) & 1) == 0 && (ValueAsInt - 1) < 2;
  }

  return result;
}

BOOL OZShape::shouldDrawFillAndParticles(uint64_t a1, CMTime *a2)
{
  v6 = *a2;
  ValueAsInt = OZChannel::getValueAsInt((a1 + 6928), &v6, 0.0);
  isEnabled = OZChannelBase::isEnabled((a1 + 6800), 0, 1);
  result = 0;
  if (isEnabled)
  {
    return OZChannelBase::isEnabled((a1 + 2784), 0, 1) && (ValueAsInt - 1) < 2;
  }

  return result;
}

BOOL OZShape::shouldRenderInPlace(OZShape *this, OZShapeRenderParams *a2)
{
  LODWORD(v2) = *(a2 + 30);
  if (!*(a2 + 2))
  {
    if (!v2)
    {
      return *(a2 + 553) == 1 && ((*(a2 + 42) != 0) & v2) == 1 && *(a2 + 176) != 1;
    }

    v2 = 152;
LABEL_7:
    LOBYTE(v2) = fabs(*(a2 + 20) * *(a2 + v2) + -1.0) < 0.0000001;
    return *(a2 + 553) == 1 && ((*(a2 + 42) != 0) & v2) == 1 && *(a2 + 176) != 1;
  }

  if (!v2)
  {
    v2 = 64;
    goto LABEL_7;
  }

  LOBYTE(v2) = 0;
  return *(a2 + 553) == 1 && ((*(a2 + 42) != 0) & v2) == 1 && *(a2 + 176) != 1;
}

uint64_t OZShape::getHeliumParameters(uint64_t a1, uint64_t a2, _OWORD *a3, uint64_t a4, char a5, uint64_t a6)
{
  v11 = (a1 + 8);
  v28 = a1 + 8;
  PCMutex::lock((a1 + 8));
  v29 = 1;
  isGeometricShape = OZShape::isGeometricShape(a1);
  if (!isGeometricShape && OZDynamicCurve::getNumberOfValidKeypoints((a1 + 496), a2) < 2)
  {
    goto LABEL_12;
  }

  v25 = *(a2 + 16);
  v13 = *(a2 + 80);
  v26 = v13;
  if (v13)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v13);
  }

  v27 = *(a2 + 88);
  v14 = 2672;
  if (BYTE8(v25))
  {
    v14 = 2664;
  }

  v15 = *(a1 + v14);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v26);
  v16 = OZChannel::getValueAsInt((a1 + 14600), MEMORY[0x277CC08F0], 0.0) == 1 ? 0 : a5;
  *(v15 + 176) = v16;
  (*(*a1 + 64))(a1, a2, v15, 0, 1);
  if (fabs(*(v15 + 248)) < 0.0000001 || fabs(*(v15 + 256)) < 0.0000001)
  {
    goto LABEL_12;
  }

  if (!*(a1 + 18720) && *(v15 + 124) == 1)
  {
    operator new();
  }

  if (isGeometricShape)
  {
    if (fabs(*(v15 + 200)) < 0.0000001)
    {
      if (fabs(*(v15 + 224)) < 0.0000001 && *(v15 + 120) && !*(v15 + 8))
      {
        goto LABEL_12;
      }

      *(v15 + 200) = 0x3FF0000000000000;
    }

    if (fabs(*(v15 + 208)) < 0.0000001)
    {
      if (fabs(*(v15 + 224)) >= 0.0000001 || !*(v15 + 120) || *(v15 + 8))
      {
        *(v15 + 208) = 0x3FF0000000000000;
        goto LABEL_28;
      }

LABEL_12:
      v17 = 0;
      goto LABEL_13;
    }
  }

LABEL_28:
  v19 = v15 + 1200;
  if ((v15 + 1200) != a3)
  {
    v20 = 0;
    v21 = a3;
    do
    {
      for (i = 0; i != 32; i += 8)
      {
        *(v19 + i) = *(v21 + i);
      }

      ++v20;
      v19 += 32;
      v21 += 2;
    }

    while (v20 != 4);
  }

  OZShapeRenderParams::assign(a6, v15, 0);
  RenderContour = OZShape::getRenderContour(a1, a2, a6, a3);
  OZShapeContour::operator=((a6 + 368), RenderContour);
  *(a6 + 1192) = 0;
  if (*(a6 + 8) && OZShape::isWriteOnEffectEnabled(a1, a6))
  {
    OZShape::getReparametrizedContour(a1, a2, a6, 0);
  }

  ValueAsInt = OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0);
  v17 = 1;
  if (*(a6 + 180) >= 1 && ValueAsInt != 4)
  {
    OZShape::getRenderContourWithRoundness(a1, a2, a6, a3);
  }

LABEL_13:
  PCMutex::unlock(v11);
  return v17;
}

void sub_2603089C8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, ...)
{
  va_start(va, a13);
  MEMORY[0x2666E9F00](v13, 0x10A0C401050895ELL);
  PCLockSentry<PCMutex>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

uint64_t OZShape::getHeliumRender@<X0>(uint64_t a1@<X0>, const CMTime *a2@<X1>, double *a3@<X2>, _OWORD *a4@<X3>, uint64_t a5@<X4>, HGHWMultiBlend **a6@<X8>)
{
  result = OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0);
  v13 = result;
  if (*(a5 + 120))
  {
    v14 = result == 4 || *(a5 + 180) == 0;
    v15 = 760;
    if (v14)
    {
      v15 = 368;
    }

    v16 = a5 + v15;
    if (*(a5 + v15 + 216) == *(a5 + v15 + 224) || *(v16 + 240) == *(v16 + 248) || *(v16 + 192) == *(v16 + 200))
    {
      goto LABEL_46;
    }

    if (OZShape::shouldDrawSoftEdges(a1, a5) && (OZShape::shouldDrawAntialiasingOnFill(a1, a5) & 1) == 0 && *(v16 + 312) == *(v16 + 320))
    {
      OZShape::computeSoftEdges(a1, a2, a5, v16, 0, 1, 1, *(a5 + 224));
      if (*(v16 + 185) != 1 || (*(v16 + 186) & 1) != 0 || (*(v16 + 187) & 1) == 0)
      {
        OZShape::computeSoftEdges(a1, a2, a5, v16, 0, 0, -1, *(a5 + 224));
      }
    }
  }

  v17 = *(a5 + 8);
  if (*(a5 + 16) <= 0.0 || v17 == 0)
  {
    goto LABEL_22;
  }

  result = OZShape::isWriteOnEffectEnabled(a1, a5);
  if (!*(a5 + 180) || v13 == 4)
  {
    if (*(a5 + 168) || !result)
    {
      v20 = (a5 + 368);
    }

    else
    {
      v20 = *(a5 + 752);
    }
  }

  else
  {
    v20 = (a5 + 760);
  }

  if (v20[27] == v20[28] || v20[30] == v20[31] || v20[24] == v20[25])
  {
LABEL_46:
    v25 = 0;
    goto LABEL_53;
  }

  if ((*(a5 + 1195) & 1) != 0 || v20[43] == v20[42])
  {
    v21 = (*(a5 + 168) == 0) | result;
    v22 = *(a5 + 24);
    v23 = *(a5 + 16);
    v24 = !PCMatrix44Tmpl<double>::isIdentity(a3);
    if (v21)
    {
      OZShape::computeOpenStroke(a1, a2, a5, v20, a3, v22, v24, v23);
    }

    else
    {
      OZShape::computeOutline(a1, a2, a5, v20, a3, v22, v24, v23);
    }
  }

  v17 = *(a5 + 8);
LABEL_22:
  if (*(a5 + 124) != 1 || *(a5 + 120) == 0)
  {
    if (!v17)
    {
      goto LABEL_48;
    }

LABEL_28:
    result = OZShape::getSecondPassOutlineHeliumNode(a1, a2, a5, &v27);
    goto LABEL_49;
  }

  if (v17 || OZShape::shouldDrawSoftEdges(a1, a5))
  {
    result = OZShape::getSecondPassGradientToHeliumNode(a1, a2, a4, a5, &v27);
    goto LABEL_49;
  }

  if (*(a5 + 8))
  {
    goto LABEL_28;
  }

LABEL_48:
  result = OZShape::drawToHeliumNode(a1, a2, a5, &v27);
LABEL_49:
  v25 = v27;
  if (v27)
  {
    v26 = HGObject::operator new(0x1A0uLL);
    HGCrop::HGCrop(v26);
    (*(*v26 + 96))(v26, 0, -1000000.0, -1000000.0, 1000000.0, 1000000.0);
    (*(*v26 + 120))(v26, 0, v25);
    if (v25 != v26)
    {
      (*(*v25 + 24))(v25);
      v25 = v26;
      (*(*v26 + 16))(v26);
    }

    result = (*(*v26 + 24))(v26);
  }

LABEL_53:
  *a6 = v25;
  return result;
}

void sub_260308E08(_Unwind_Exception *a1)
{
  HGObject::operator delete(v2);
  (*(*v1 + 24))(v1);
  _Unwind_Resume(a1);
}

uint64_t OZShape::getSecondPassGradientToHeliumNode@<X0>(OZShape *a1@<X0>, const CMTime *a2@<X1>, _OWORD *a3@<X3>, uint64_t a4@<X4>, CMTimeValue *a5@<X8>)
{
  *a5 = 0;
  v10 = *(a4 + 8);
  v11 = (a1 + 8);
  v24 = (a1 + 8);
  PCMutex::lock((a1 + 8));
  v25 = 1;
  v12 = *(a1 + 2340);
  v13 = (*(*a1 + 176))(a1);
  *(*(v12 + 16) + 176) = v13;
  *(*(v12 + 8) + 176) = v13;
  v14 = *(a1 + 2340);
  v23 = *a2;
  OZGradientGroupShader::updateWithXForm(v14, &v23, a3);
  v15 = *(*(a1 + 2340) + 24);
  CGColorSpace = PCColorSpaceHandle::getCGColorSpace(&a2[3].timescale);
  (*(*v15 + 48))(&v23, v15, CGColorSpace);
  value = v23.value;
  result = PCMutex::unlock(v11);
  v19 = *(a4 + 120);
  if (v10)
  {
    if (v19)
    {
      OZShape::drawToHeliumNode(a1, a2, a4, &v23.value);
      result = OZShape::getOutlineHeliumNode(a1, a2, a4, &v24);
      if (v23.value)
      {
        v20 = HGObject::operator new(0x1A0uLL);
        *(v20 + 24) = 0u;
        *(v20 + 25) = 0u;
        *(v20 + 22) = 0u;
        *(v20 + 23) = 0u;
        *(v20 + 20) = 0u;
        *(v20 + 21) = 0u;
        *(v20 + 18) = 0u;
        *(v20 + 19) = 0u;
        *(v20 + 16) = 0u;
        *(v20 + 17) = 0u;
        *(v20 + 14) = 0u;
        *(v20 + 15) = 0u;
        *(v20 + 12) = 0u;
        *(v20 + 13) = 0u;
        *(v20 + 10) = 0u;
        *(v20 + 11) = 0u;
        *(v20 + 8) = 0u;
        *(v20 + 9) = 0u;
        *(v20 + 6) = 0u;
        *(v20 + 7) = 0u;
        *(v20 + 4) = 0u;
        *(v20 + 5) = 0u;
        *(v20 + 2) = 0u;
        *(v20 + 3) = 0u;
        *v20 = 0u;
        *(v20 + 1) = 0u;
        HgcShapeGradientBlend::HgcShapeGradientBlend(v20);
      }

      v22 = v24;
      if (v24)
      {
        *a5 = v24;
        (*(*v22 + 16))(v22);
        result = (*(*v22 + 24))(v22);
      }
    }

    else
    {
      result = OZShape::getOutlineHeliumNode(a1, a2, a4, &v23);
      if (v23.value)
      {
        *a5 = v23.value;
      }
    }
  }

  else if (v19)
  {
    result = OZShape::drawToHeliumNode(a1, a2, a4, &v23.value);
    if (v23.value)
    {
      v21 = HGObject::operator new(0x1A0uLL);
      *(v21 + 24) = 0u;
      *(v21 + 25) = 0u;
      *(v21 + 22) = 0u;
      *(v21 + 23) = 0u;
      *(v21 + 20) = 0u;
      *(v21 + 21) = 0u;
      *(v21 + 18) = 0u;
      *(v21 + 19) = 0u;
      *(v21 + 16) = 0u;
      *(v21 + 17) = 0u;
      *(v21 + 14) = 0u;
      *(v21 + 15) = 0u;
      *(v21 + 12) = 0u;
      *(v21 + 13) = 0u;
      *(v21 + 10) = 0u;
      *(v21 + 11) = 0u;
      *(v21 + 8) = 0u;
      *(v21 + 9) = 0u;
      *(v21 + 6) = 0u;
      *(v21 + 7) = 0u;
      *(v21 + 4) = 0u;
      *(v21 + 5) = 0u;
      *(v21 + 2) = 0u;
      *(v21 + 3) = 0u;
      *v21 = 0u;
      *(v21 + 1) = 0u;
      HgcShapeGradientBlend::HgcShapeGradientBlend(v21);
    }
  }

  if (value)
  {
    return (*(*value + 24))(value);
  }

  return result;
}

void sub_2603094D4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13)
{
  if (a13)
  {
    (*(*a13 + 24))(a13);
  }

  if (v14)
  {
    (*(*v14 + 24))(v14);
  }

  if (v13)
  {
    (*(*v13 + 24))(v13);
  }

  if (v15)
  {
    (*(*v15 + 24))(v15);
  }

  _Unwind_Resume(exception_object);
}

HGGLNode *OZShape::getSecondPassOutlineHeliumNode@<X0>(OZShape *a1@<X0>, const CMTime *a2@<X1>, uint64_t a3@<X4>, HGHWMultiBlend **a4@<X8>)
{
  *a4 = 0;
  if (*(a3 + 120))
  {
    OZShape::drawToHeliumNode(a1, a2, a3, &v14);
    result = OZShape::getOutlineHeliumNode(a1, a2, a3, &v13);
    v9 = v14;
    if (v14)
    {
      v10 = HGObject::operator new(0x280uLL);
      HGHWMultiBlend::HGHWMultiBlend(v10);
      (*(*v10 + 96))(v10, 0, 9.0, 0.0, 0.0, 0.0);
      if (*(a3 + 116) == 1)
      {
        v11 = v13;
        (*(*v10 + 120))(v10, 0, v13);
        (*(*v10 + 120))(v10, 1, v9);
      }

      else
      {
        (*(*v10 + 120))(v10, 0, v9);
        v11 = v13;
        (*(*v10 + 120))(v10, 1, v13);
      }

      *a4 = v10;
      (*(*v10 + 16))(v10);
      (*(*v10 + 24))(v10);
      if (!v11)
      {
        return (*(*v9 + 24))(v9);
      }
    }

    else
    {
      v12 = v13;
      if (!v13)
      {
        return result;
      }

      *a4 = v13;
      (*(*v12 + 16))(v12);
      v11 = v12;
    }

    result = (*(*v11 + 24))(v11);
    if (!v9)
    {
      return result;
    }

    return (*(*v9 + 24))(v9);
  }

  result = OZShape::getOutlineHeliumNode(a1, a2, a3, &v14);
  if (v14)
  {
    *a4 = v14;
  }

  return result;
}

void sub_2603099F4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  if (a9)
  {
    (*(*a9 + 24))(a9);
  }

  if (v10)
  {
    (*(*v10 + 24))(v10);
  }

  if (v11)
  {
    (*(*v11 + 24))(v11);
  }

  _Unwind_Resume(exception_object);
}

HGGLNode *OZShape::getOutlineHeliumNode@<X0>(OZShape *a1@<X0>, uint64_t a2@<X1>, double *a3@<X4>, HgcShapeSoftEdgeColorizeSecondPass **a4@<X8>)
{
  v8 = HGObject::operator new(0x1B0uLL);
  HGGLNode::HGGLNode(v8, 0);
  v29 = v8;
  *a4 = 0;
  HGGLNode::hglTexParameteri(v8, 0xDE1, 0x2801, 9729.0);
  HGGLNode::hglTexParameteri(v29, 0xDE1, 0x2800, 9729.0);
  HGGLNode::hglTexParameteri(v29, 0xDE1, 0x2802, 33071.0);
  HGGLNode::hglTexParameteri(v29, 0xDE1, 0x2803, 33071.0);
  active = HGGLNode::hglActiveTexture(v29, 192);
  v10 = a3[8];
  v11 = a3[5] * v10;
  v12 = v10 * a3[6];
  v13 = v10 * a3[7];
  if (OZShape::shouldRenderInPlace(active, a3))
  {
    v14 = HGObject::operator new(0x1B0uLL);
    HgcShapeSoftEdgeClrInPlace::HgcShapeSoftEdgeClrInPlace(v14);
    v15 = 0;
    v16 = 1;
  }

  else
  {
    v17 = HGObject::operator new(0x1B0uLL);
    v14 = v17;
    v18 = fmaxf(fmaxf(v11, v12), v13) > 1.0;
    v15 = fminf(fminf(v11, v12), v13) < 0.0 || v18;
    HgcShapeSoftEdgeClr::HgcShapeSoftEdgeClr(v17);
    v16 = 0;
  }

  HGGLNode::addFragmentShader(v29, v14);
  v22 = v10;
  if (v15)
  {
    v19.n128_f32[0] = 1.0;
  }

  else
  {
    v19.n128_f32[0] = v11;
  }

  if (v15)
  {
    v20.n128_f32[0] = 1.0;
  }

  else
  {
    v20.n128_f32[0] = v12;
  }

  if (v15)
  {
    v21.n128_f32[0] = 1.0;
  }

  else
  {
    v21.n128_f32[0] = v13;
  }

  (*(*v14 + 96))(v14, v16, v19, v20, v21);
  HGGLNode::hglClearToBlack(v29);
  OZShape::drawShapeOutlineToHeliumNode(a1, a3, &v29, &v28);
  v23 = v28;
  if (v28)
  {
    *a4 = v28;
  }

  v24 = *(a2 + 56);
  EdgeTextureKernelType = OZShape::getEdgeTextureKernelType(a1, 1.0);
  (*(*a1 + 392))(&v28, a1, v24, EdgeTextureKernelType);
  (*(*v29 + 120))(v29, 0, v28);
  (*(*v28 + 136))(v28, 0xFFFFFFFFLL, 4);
  if (v15)
  {
    v26 = HGObject::operator new(0x200uLL);
    HgcShapeSoftEdgeColorizeSecondPass::HgcShapeSoftEdgeColorizeSecondPass(v26);
    (*(*v26 + 120))(v26, 0, v23);
    (*(*v26 + 96))(v26, v16, v11, v12, v13, v22);
    if (v23 != v26)
    {
      if (v23)
      {
        (*(*v23 + 24))(v23);
      }

      *a4 = v26;
      (*(*v26 + 16))(v26);
    }

    (*(*v26 + 24))(v26);
  }

  if (v28)
  {
    (*(*v28 + 24))(v28);
  }

  (*(*v14 + 24))(v14);
  result = v29;
  if (v29)
  {
    return (*(*v29 + 24))(v29);
  }

  return result;
}

void sub_260309F24(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  HGObject::operator delete(v12);
  if (a9)
  {
    (*(*a9 + 24))(a9);
  }

  (*(*v10 + 24))(v10);
  if (v11)
  {
    (*(*v11 + 24))(v11);
  }

  if (a10)
  {
    (*(*a10 + 24))(a10);
  }

  _Unwind_Resume(a1);
}

uint64_t OZShape::drawToHeliumNode@<X0>(uint64_t a1@<X0>, const CMTime *a2@<X1>, uint64_t a3@<X4>, uint64_t *a4@<X8>)
{
  *a4 = 0;
  result = OZShape::isGeometricShape(a1);
  if ((result & 1) == 0)
  {
    result = OZDynamicCurve::getNumberOfValidKeypoints((a1 + 496), a2);
    if (result < 2)
    {
      return result;
    }
  }

  v9 = *(a3 + 8);
  v10 = *(a3 + 120);
  v11 = *(a3 + 16);
  v12 = v9 && v10 == 0;
  if (v12 && v11 - 1 < 2)
  {
    return result;
  }

  if (*(a3 + 168))
  {
    goto LABEL_12;
  }

  result = OZChannel::getValueAsInt((a1 + 12856), MEMORY[0x277CC08F0], 0.0);
  if (result || (result = OZChannel::getValueAsInt((a1 + 14280), MEMORY[0x277CC08F0], 0.0), !result))
  {
    v14 = 0;
  }

  else
  {
    if (v10)
    {
LABEL_12:
      result = OZShape::drawCurveToHeliumNode(a1, a2, a3, 0, &v18);
      goto LABEL_13;
    }

    v14 = 0;
    if (v9 && !v11)
    {
      result = OZShape::drawCurveToHeliumNode(a1, a2, a3, 1, &v18);
LABEL_13:
      v14 = v18;
      if (v18)
      {
        *a4 = v18;
      }
    }
  }

  v15 = *(a3 + 232);
  if (fabs(v15) >= 0.0000001)
  {
    v16 = HGObject::operator new(0x1A0uLL);
    HgcShapeAlphaBias::HgcShapeAlphaBias(v16);
    (*(*v16 + 120))(v16, 0, v14);
    v17 = exp(v15 / 100.0 * 0.693147181);
    (*(*v16 + 96))(v16, 0, v17, 0.0, 0.0, 0.0);
    v14 = v16;
  }

  else
  {
    if (!v14)
    {
      return result;
    }

    (*(*v14 + 16))(v14);
  }

  result = *a4;
  if (*a4 == v14)
  {
    return (*(*v14 + 24))(v14);
  }

  if (result)
  {
    result = (*(*result + 24))(result);
  }

  *a4 = v14;
  return result;
}

void sub_26030A340(_Unwind_Exception *exception_object)
{
  if (*v1)
  {
    (*(**v1 + 24))(*v1);
  }

  _Unwind_Resume(exception_object);
}

uint64_t OZShape::drawCurveToHeliumNode@<X0>(uint64_t result@<X0>, uint64_t a2@<X1>, uint64_t a3@<X2>, int a4@<W5>, HGGLNode **a5@<X8>)
{
  v8 = result;
  *a5 = 0;
  if (*(a3 + 180))
  {
    result = OZChannel::getValueAsInt((result + 1072), MEMORY[0x277CC08F0], 0.0);
    v10 = 760;
    if (result == 4)
    {
      v10 = 368;
    }
  }

  else
  {
    v10 = 368;
  }

  v11 = (a3 + v10);
  if (*(a3 + v10 + 216) != *(a3 + v10 + 224) && v11[30] != v11[31] && !a4 && v11[24] != v11[25] && *(a3 + 120))
  {
    v12 = HGObject::operator new(0x1B0uLL);
    HGGLNode::HGGLNode(v12, 0);
    v17 = v12;
    if (v12)
    {
      *a5 = v12;
      (*(*v12 + 16))(v12);
    }

    v13 = *(a2 + 56);
    EdgeTextureKernelType = OZShape::getEdgeTextureKernelType(v8, *(a3 + 224));
    (*(*v8 + 392))(&v16, v8, v13, EdgeTextureKernelType);
    (*(*v17 + 120))(v17, 0, v16);
    (*(*v16 + 136))(v16, 0xFFFFFFFFLL, 4);
    HGArray<__simd128_float32_t,(HGFormat)28>::HGArray(&v15);
  }

  return result;
}

void sub_26030B004(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, void *a15, uint64_t a16, uint64_t a17, uint64_t a18, void *__p, uint64_t a20)
{
  if (__p)
  {
    (*(*__p + 24))(__p);
  }

  if (a16)
  {
    (*(*a16 + 24))(a16);
  }

  OZShapeVertexArrayData::~OZShapeVertexArrayData((v20 - 208));
  v22 = *(v20 - 152);
  if (v22)
  {
    (*(*v22 + 24))(v22);
  }

  v23 = *(v20 - 144);
  if (v23)
  {
    (*(*v23 + 24))(v23);
  }

  if (*a15)
  {
    (*(**a15 + 24))(*a15);
  }

  _Unwind_Resume(a1);
}

uint64_t OZShape::getEdgeTextureKernelType(OZShape *this, double a2)
{
  if (OZChannel::getValueAsInt((this + 13872), MEMORY[0x277CC08F0], 0.0))
  {
    if (a2 <= 0.0)
    {
      return 5;
    }

    else
    {
      return 4;
    }
  }

  else if (OZChannel::getValueAsInt((this + 11816), MEMORY[0x277CC08F0], 0.0) == 2)
  {
    return 6;
  }

  else
  {
    return 3;
  }
}

uint64_t OZShape::drawAntialiasedBordersToHeliumNode@<X0>(OZShapeRenderParams *a1@<X2>, OZShape *a2@<X0>, int a3@<W1>, uint64_t a4@<X3>, int a5@<W4>, HGGLNode **a6@<X5>, HGArrayDataRef *a7@<X6>, HGGLNode **a8@<X8>)
{
  v9 = 0;
  OZShape::drawOutlinePolygonsToHeliumNode(a2, a1, (a4 + 288), a3, a4, 0, 1, a5, a8, 2.0, a6, &v9, 0, a7);
  result = v9;
  if (v9)
  {
    return (*(*v9 + 24))(v9);
  }

  return result;
}

void sub_26030B3C4(_Unwind_Exception *exception_object)
{
  v3 = *(v1 - 24);
  if (v3)
  {
    (*(*v3 + 24))(v3);
  }

  _Unwind_Resume(exception_object);
}

char *OZShape::drawVertexArrayList(OZShape *this, char **a2, OZShapeVertexArrayData *a3)
{
  HGGLNode::hglEnableClientState(a2, 32884);
  HGGLNode::hglEnableClientState(a2, 32888);
  HGGLNode::hglTexCoordArray(a2, (a3 + 40));
  HGGLNode::hglVertexArray(a2, (a3 + 24), v5);
  v6 = *a3;
  if ((-1431655765 * ((*(a3 + 1) - *a3) >> 2)) >= 1)
  {
    v7 = 0;
    v8 = 0;
    do
    {
      HGGLNode::hglDrawArrays(a2, *(v6 + v7), *(v6 + v7 + 4), *(v6 + v7 + 8));
      ++v8;
      v6 = *a3;
      v7 += 12;
    }

    while (v8 < (-1431655765 * ((*(a3 + 1) - *a3) >> 2)));
  }

  HGGLNode::hglDisableClientState(a2, 32884);

  return HGGLNode::hglDisableClientState(a2, 32888);
}

void OZShape::drawOutlineToHeliumNode()
{
  __p = 0;
  v1 = 0;
  v2 = 0;
  HGArray<__simd128_float32_t,(HGFormat)28>::HGArray(&v3);
}

void sub_26030B65C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, void *__p, uint64_t a17, uint64_t a18, HGArrayData *a19)
{
  if (a19)
  {
    HGArrayData::Release(a19);
  }

  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

double OZShape::drawShapeOutlineToHeliumNode@<D0>(uint64_t a1@<X0>, uint64_t a2@<X2>, uint64_t *a3@<X4>, uint64_t *a4@<X8>)
{
  v6 = *a3;
  *a4 = *a3;
  if (v6)
  {
    (*(*v6 + 16))(v6);
  }

  if ((!*(a2 + 180) || OZChannel::getValueAsInt((a1 + 1072), MEMORY[0x277CC08F0], 0.0) == 4) && !*(a2 + 168))
  {
    OZShape::isWriteOnEffectEnabled(a1, a2);
  }

  result = *(a2 + 16);
  if (result > 0.0)
  {
    if (*(a2 + 8))
    {
      OZShape::drawOutlineToHeliumNode();
    }
  }

  return result;
}

void sub_26030B85C(_Unwind_Exception *exception_object)
{
  if (v2)
  {
    (*(*v2 + 24))(v2);
  }

  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  _Unwind_Resume(exception_object);
}

void anonymous namespace::HRotoshapeGradientBlend::~HRotoshapeGradientBlend(HGNode *this)
{
  HgcShapeGradientBlend::~HgcShapeGradientBlend(this);

  HGObject::operator delete(v1);
}

uint64_t anonymous namespace::HRotoshapeGradientBlend::GetDOD(HGNode *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3 >= 2)
  {
    return 0;
  }

  Input = HGRenderer::GetInput(a2, this, 0);
  DOD = HGRenderer::GetDOD(a2, Input);
  v10 = v9;
  v11 = HGRenderer::GetInput(a2, this, 1u);
  v12 = HGRenderer::GetDOD(a2, v11);
  return HGRectIntersection(DOD, v10, v12, v13);
}

uint64_t anonymous namespace::HRotoshapeGradientBlend::GetROI(_anonymous_namespace_::HRotoshapeGradientBlend *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3 <= 1)
  {
    return *&a4.var0;
  }

  else
  {
    return 0;
  }
}

void sub_26030BAC8(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  MEMORY[0x2666E9F00](v11, v10);
  _Unwind_Resume(a1);
}

void OZGradientData::OZGradientData(OZGradientData *this, int a2)
{
  HGObject::HGObject(this);
  *v4 = &unk_2872DE4D8;
  *(v4 + 12) = a2;
  *(this + 3) = HGMemory::allocate((4 * a2), this + 2, v5);
}

void OZGradientData::~OZGradientData(HGMemory **this, void *a2)
{
  *this = &unk_2872DE4D8;
  HGMemory::release(this[3], a2);

  HGObject::~HGObject(this);
}

{
  OZGradientData::~OZGradientData(this, a2);

  HGObject::operator delete(v2);
}

void OZGradient::OZGradient(OZGradient *this, OZChannelGradient *a2, uint64_t a3, CGColorSpace *a4, uint64_t a5)
{
  v6 = a4;
  v8 = *(a2 + 1);
  *this = v8;
  *(this + *(v8 - 24)) = *(a2 + 2);
  v9 = *a2;
  *this = *a2;
  *(this + *(v9 - 24)) = *(a2 + 3);
  *(this + 1) = 0;
  *(this + 2) = 0;
  v10 = (this + 8);
  *(this + 6) = 0;
  *(this + 7) = 1120403456;
  *(this + 4) = a3;
  *(this + 40) = 0;
  *(this + 21) = 0x3FF0000000000000;
  *(this + 16) = 0x3FF0000000000000;
  *(this + 11) = 0x3FF0000000000000;
  *(this + 6) = 0x3FF0000000000000;
  *(this + 56) = 0u;
  *(this + 72) = 0u;
  *(this + 6) = 0u;
  *(this + 7) = 0u;
  *(this + 136) = 0u;
  *(this + 152) = 0u;
  PCWorkingColorVector::PCWorkingColorVector((this + 184));
  *(this + 25) = a5;
  v11 = HGObject::operator new(0x20uLL);
  OZGradientData::OZGradientData(v11, 4 * v6);
  v12 = *v10;
  if (*v10 == v11)
  {
    if (v11)
    {
      (*(*v11 + 24))(v11);
    }
  }

  else
  {
    if (v12)
    {
      (*(*v12 + 24))(v12);
    }

    *v10 = v11;
  }

  *(this + 22) = 0x3FF0000000000000;
}

void sub_26030BE48(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  if (*v2)
  {
    (*(**v2 + 24))(*v2);
  }

  _Unwind_Resume(exception_object);
}

uint64_t OZGradient::OZGradient(uint64_t a1, uint64_t *a2, void *a3)
{
  v5 = a2[1];
  *a1 = v5;
  *(a1 + *(v5 - 24)) = a2[2];
  v6 = *a2;
  *a1 = *a2;
  *(a1 + *(v6 - 24)) = a2[3];
  v7 = a3[1];
  *(a1 + 8) = v7;
  if (v7)
  {
    (*(*v7 + 16))(v7);
  }

  *(a1 + 16) = a3[2];
  *(a1 + 24) = a3[3];
  *(a1 + 32) = a3[4];
  *(a1 + 40) = 0;
  *(a1 + 168) = 0x3FF0000000000000;
  *(a1 + 128) = 0x3FF0000000000000;
  *(a1 + 88) = 0x3FF0000000000000;
  *(a1 + 48) = 0x3FF0000000000000;
  *(a1 + 72) = 0u;
  *(a1 + 56) = 0u;
  *(a1 + 96) = 0u;
  *(a1 + 112) = 0u;
  *(a1 + 152) = 0u;
  *(a1 + 136) = 0u;
  *(a1 + 176) = a3[22];
  PCWorkingColorVector::PCWorkingColorVector((a1 + 184));
  *(a1 + 200) = a3[25];
  return a1;
}

void sub_26030C088(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 8);
  if (v3)
  {
    (*(*v3 + 24))(v3);
  }

  _Unwind_Resume(exception_object);
}

void OZGradient::~OZGradient(OZGradient *this, uint64_t *a2)
{
  v2 = *a2;
  *this = *a2;
  *(this + *(v2 - 24)) = a2[3];
  v3 = *(this + 1);
  if (v3)
  {
    (*(*v3 + 24))(v3);
  }
}

void OZGradient::~OZGradient(OZGradient *this)
{
  *(v1 + 208) = &unk_2872DEA38;
  *(v1 + 224) = 0;
  PCWeakCount::~PCWeakCount((v1 + 216));
}

{
  *(v1 + 208) = &unk_2872DEA38;
  *(v1 + 224) = 0;
  PCWeakCount::~PCWeakCount((v1 + 216));

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZGradient::~OZGradient(OZGradient *this)
{
  *(v1 + 208) = &unk_2872DEA38;
  *(v1 + 224) = 0;
  v2 = (v1 + 216);

  PCWeakCount::~PCWeakCount(v2);
}

{
  OZGradient::~OZGradient((this + *(*this - 24)));
}

uint64_t OZGradient::update(OZGradient *this, CMTime *a2)
{
  (*(*this + 40))(&v6);
  if (vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(v6, *(this + 184))))) & 1) == 0 && (*(this + 40))
  {
    return 0;
  }

  v4 = 1;
  OZChannelGradient::getGradient(*(this + 4), a2, 1, *(this + 25), *(*(this + 1) + 24), vcvtd_n_f64_s32(*(*(this + 1) + 12), 2uLL), 0, &kPCNoToneMapMethod);
  *(this + 40) = 1;
  *(this + 184) = v6;
  return v4;
}

void OZGradient1D::OZGradient1D(OZGradient1D *this, OZChannelGradient *a2, uint64_t a3, CGColorSpace *a4, uint64_t a5)
{
  OZGradient::OZGradient(this, (a2 + 8), a3, a4, a5);
  v7 = *a2;
  *v8 = *a2;
  *(this + *(v7 - 24)) = *(a2 + 5);
  (*(*this + 16))(this, *(this + 25));
}

void OZGradient1D::OZGradient1D(OZGradient1D *this, OZChannelGradient *a2, CGColorSpace *a3, CGColorSpace *a4)
{
  *(this + 26) = &unk_2872DEA38;
  *(this + 27) = 0;
  *(this + 224) = 1;
  OZGradient::OZGradient(this, off_2872DE630, a2, a3, a4);
  *this = &unk_2872DE5B8;
  *(this + 26) = &unk_2872DE610;
  OZChannelGradient::getGradient(*(this + 4), MEMORY[0x277CC08F0], 1, *(this + 25), *(*(this + 1) + 24), vcvtd_n_f64_s32(*(*(this + 1) + 12), 2uLL), 0, &kPCNoToneMapMethod);
}

void sub_26030C630(_Unwind_Exception *a1)
{
  OZGradient::~OZGradient(v1, off_2872DE630);
  *(v1 + 208) = v2;
  *(v1 + 224) = 0;
  PCWeakCount::~PCWeakCount(v3);
  _Unwind_Resume(a1);
}

void *OZGradient1D::OZGradient1D(void *a1, uint64_t *a2, void *a3)
{
  v5 = OZGradient::OZGradient(a1, a2 + 1, a3);
  v6 = *a2;
  *v5 = *a2;
  *(a1 + *(v6 - 24)) = a2[5];
  (*(*a1 + 16))(a1, a1[25]);
  return a1;
}

void OZGradient1D::~OZGradient1D(OZGradient1D *this)
{
  OZGradient::~OZGradient(this, off_2872DE630);
  *(v1 + 208) = &unk_2872DEA38;
  *(v1 + 224) = 0;
  PCWeakCount::~PCWeakCount((v1 + 216));
}

{
  OZGradient::~OZGradient(this, off_2872DE630);
  *(v1 + 208) = &unk_2872DEA38;
  *(v1 + 224) = 0;
  PCWeakCount::~PCWeakCount((v1 + 216));

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZGradient1D::~OZGradient1D(OZGradient1D *this)
{
  OZGradient::~OZGradient((this + *(*this - 24)), off_2872DE630);
  *(v1 + 208) = &unk_2872DEA38;
  *(v1 + 224) = 0;
  v2 = (v1 + 216);

  PCWeakCount::~PCWeakCount(v2);
}

{
  OZGradient1D::~OZGradient1D((this + *(*this - 24)));
}

HGColorConform *OZGradient1D::getHeliumLUT@<X0>(OZGradient1D *this@<X0>, CGColorSpace *a2@<X1>, HGColorConform **a3@<X8>)
{
  v6 = HGRectMake4i(0, 0, vcvtd_n_f64_s32(*(*(this + 1) + 12), 2uLL), 1u);
  v8 = v7;
  v9 = *(*(this + 1) + 24);
  v10 = HGObject::operator new(0x80uLL);
  HGTexture::HGTexture(v10, v6, v8, 28, v9);
  HGBitmap::SetStorage(v10, *(this + 1));
  v11 = HGObject::operator new(0x1F0uLL);
  HGBitmapLoader::HGBitmapLoader(v11, v10);
  *a3 = v11;
  v13 = v14;
  if (v11 == v14)
  {
    if (v11)
    {
      result = (*(*v14 + 24))(v14);
    }
  }

  else
  {
    if (v11)
    {
      result = (*(*v11 + 24))(v11);
    }

    *a3 = v13;
  }

  if (v10)
  {
    return (*(*v10 + 24))(v10);
  }

  return result;
}

void sub_26030CA3C(_Unwind_Exception *a1)
{
  if (v3)
  {
    (*(*v3 + 24))(v3);
  }

  (*(*v2 + 24))(v2);
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  _Unwind_Resume(a1);
}

HGColorConform *anonymous namespace::colorCorrectIfNecessary@<X0>(CGColorSpaceRef space@<X1>, CGColorSpace *a2@<X2>, HGColorConform **a3@<X0>, HGColorConform **a4@<X8>)
{
  if (PCColorSpaceHandle::isSameColorSpace(space, a2, a2))
  {
    result = *a3;
    *a4 = *a3;
    if (result)
    {
      v9 = *(*result + 16);

      return v9();
    }
  }

  else
  {
    v10 = HGObject::operator new(0x320uLL);
    HGColorConform::HGColorConform(v10);
    HGColorConform::SetConversion(v10, space, a2);
    result = (*(*v10 + 120))(v10, 0, *a3);
    *a4 = v10;
  }

  return result;
}

uint64_t OZGradient1D::getHeliumGradientTexture(float32x4_t *a1, float32x4_t *a2, uint64_t *a3, float64x2_t *a4, float64x2_t *a5, uint64_t a6)
{
  v6 = a1 + 3;
  if (&a1[3] != a2)
  {
    for (i = 0; i != 4; ++i)
    {
      for (j = 0; j != 4; ++j)
      {
        v6->i64[j] = a2->i64[j];
      }

      v6 += 2;
      a2 += 2;
    }
  }

  a1[11].i64[0] = *a3;
  a1[1] = vcvt_hight_f32_f64(vcvt_f32_f64(*a4), *a5);
  return (*(a1->i64[0] + 48))(a1, a6);
}

uint64_t OZGradient1D::getHeliumGradientTexture@<X0>(OZGradient1D *this@<X0>, CGColorSpace *a2@<X1>, HGGradient **a3@<X8>)
{
  v6 = HGObject::operator new(0x210uLL);
  HGGradient::HGGradient(v6);
  HGGradient::SetGradientMode(v6, 0);
  v7 = *(this + 22);
  (*(*v6 + 96))(v6, 0, v7, 1.0, 1.0, 1.0);
  (*(*v6 + 96))(v6, 1, *(this + 4), *(this + 5), 0.0, 0.0);
  (*(*v6 + 96))(v6, 2, *(this + 6), *(this + 7), 0.0, 0.0);
  v8 = *(this + 6);
  v9 = *(this + 7);
  v10 = *(this + 9);
  (*(*v6 + 96))(v6, 3, v8, v9, 0.0, v10);
  v11 = *(this + 10);
  v12 = *(this + 11);
  v13 = *(this + 13);
  (*(*v6 + 96))(v6, 4, v11, v12, 0.0, v13);
  v14 = *(this + 18);
  v15 = *(this + 19);
  v16 = *(this + 21);
  (*(*v6 + 96))(v6, 5, v14, v15, 0.0, v16);
  OZGradient1D::getHeliumLUT(this, a2, &v19);
  v17 = v19;
  result = (*(*v6 + 120))(v6, 0, v19);
  *a3 = v6;
  if (v17)
  {
    return (*(*v17 + 24))(v17);
  }

  return result;
}

void sub_26030CF34(_Unwind_Exception *a1)
{
  if (v2)
  {
    (*(*v2 + 24))(v2);
  }

  (*(*v1 + 24))(v1);
  _Unwind_Resume(a1);
}

void OZGradientRadial::OZGradientRadial(OZGradientRadial *this, OZChannelGradient *a2, CGColorSpace *a3, CGColorSpace *a4)
{
  *(this + 34) = &unk_2872DEA38;
  *(this + 35) = 0;
  *(this + 288) = 1;
  OZGradient1D::OZGradient1D(this, off_2872DE6E8, a2, a3, a4);
  *this = &unk_2872DE670;
  *(this + 34) = &unk_2872DE6C8;
  *(this + 104) = 0;
  PCColor::PCColor((this + 216));
}

void sub_26030D078(_Unwind_Exception *a1)
{
  OZGradient::~OZGradient(v1, off_2872DE6F0);
  *(v1 + 272) = v2;
  *(v1 + 288) = 0;
  PCWeakCount::~PCWeakCount((v1 + 280));
  _Unwind_Resume(a1);
}

uint64_t OZGradientRadial::OZGradientRadial(uint64_t a1, uint64_t a2)
{
  *(a1 + 272) = &unk_2872DEA38;
  *(a1 + 280) = 0;
  *(a1 + 288) = 1;
  OZGradient1D::OZGradient1D(a1, off_2872DE6E8, a2);
  *a1 = &unk_2872DE670;
  *(a1 + 272) = &unk_2872DE6C8;
  *(a1 + 208) = *(a2 + 208);
  v4 = *(a2 + 216);
  v5 = *(a2 + 232);
  *(a1 + 248) = *(a2 + 248);
  *(a1 + 232) = v5;
  *(a1 + 216) = v4;
  v6 = *(a2 + 264);
  *(a1 + 264) = v6;
  if (v6)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v6);
  }

  *(a1 + 176) = *(a2 + 176);
  return a1;
}

void sub_26030D188(_Unwind_Exception *a1)
{
  OZGradient::~OZGradient(v1, off_2872DE6F0);
  *(v1 + 272) = v2;
  *(v1 + 288) = 0;
  PCWeakCount::~PCWeakCount((v1 + 280));
  _Unwind_Resume(a1);
}

void OZGradientRadial::~OZGradientRadial(CGColorSpace **this, void *a2)
{
  v4 = *a2;
  *this = *a2;
  *(this + *(v4 - 3)) = a2[7];
  PCCFRef<CGColorSpace *>::~PCCFRef(this + 33);

  OZGradient::~OZGradient(this, a2 + 2);
}

void OZGradientRadial::~OZGradientRadial(CGColorSpace **this)
{
  *(v1 + 272) = &unk_2872DEA38;
  *(v1 + 288) = 0;
  PCWeakCount::~PCWeakCount((v1 + 280));
}

{
  *(v1 + 272) = &unk_2872DEA38;
  *(v1 + 288) = 0;
  PCWeakCount::~PCWeakCount((v1 + 280));

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZGradientRadial::~OZGradientRadial(OZGradientRadial *this)
{
  *(v1 + 272) = &unk_2872DEA38;
  *(v1 + 288) = 0;
  v2 = (v1 + 280);

  PCWeakCount::~PCWeakCount(v2);
}

{
  OZGradientRadial::~OZGradientRadial((this + *(*this - 24)));
}

void OZGradientRadial::getHash(OZGradientRadial *this, CMTime *a2)
{
  MEMORY[0x28223BE20](this);
  v3 = v2;
  v5 = v4;
  v7[520] = *MEMORY[0x277D85DE8];
  OZChannelGradient::getGradientHash(*(v2 + 32));
  PCHashWriteStream::PCHashWriteStream(v7);
  PCHashWriteStream::writeValue(v7, *(v3 + 208));
  PCHashWriteStream::writeValue(v7, *(v3 + 209));
  Hash = PCHashWriteStream::getHash(v7);
  PCHash128::operator+=(v5, Hash);
  PCHashWriteStream::~PCHashWriteStream(v7);
}

uint64_t OZGradientRadial::update(OZGradientRadial *this, CMTime *a2)
{
  v16 = *a2;
  v3 = OZGradient::update(this, &v16);
  if (v3)
  {
    if (*(this + 208) == 1)
    {
      v4 = *(this + 1);
      v5 = vcvtd_n_f64_s32(*(v4 + 12), 2uLL);
      if (v5)
      {
        v6 = (*(v4 + 24) + 12);
        __asm { FMOV            V0.2S, #1.0 }

        do
        {
          *(v6 - 1) = _D0;
          *v6 = 1065353216;
          v6 += 4;
          --v5;
        }

        while (v5);
      }
    }

    if (*(this + 209) == 1)
    {
      v12 = *(*(this + 1) + 24) + 4 * (4 * vcvtd_n_f64_s32(*(*(this + 1) + 12), 2uLL) - 4);
      LODWORD(v16.value) = 0;
      v15 = 0;
      v14 = 0.0;
      PCColor::getRGBA((this + 216), &v16, &v15 + 1, &v15, &v14, *(this + 25));
      *v12 = v16.value;
      *(v12 + 4) = HIDWORD(v15);
      *(v12 + 8) = v15;
      *(v12 + 12) = v14;
    }
  }

  return v3;
}

uint64_t OZGradientRadial::getHeliumGradientTexture@<X0>(OZGradientRadial *this@<X0>, CGColorSpace *a2@<X1>, HGGradient **a3@<X8>)
{
  v6 = *(this + 22);
  v8 = *(this + 6);
  v7 = *(this + 7);
  v10 = *(this + 4);
  v9 = *(this + 5);
  v11 = HGObject::operator new(0x210uLL);
  HGGradient::HGGradient(v11);
  HGGradient::SetGradientMode(v11, 1);
  v12 = *(this + 22);
  (*(*v11 + 96))(v11, 0, v12, 1.0, 1.0, 1.0);
  v13 = *(this + 22) * *(this + 4);
  (*(*v11 + 96))(v11, 1, v13, *(this + 5), 0.0, 0.0);
  v14 = sqrt(v6 * (v8 - v10) * (v6 * (v8 - v10)) + (v7 - v9) * (v7 - v9));
  (*(*v11 + 96))(v11, 2, fabsf(v14), 0.0, 0.0, 0.0);
  v15 = *(this + 6);
  v16 = *(this + 7);
  v17 = *(this + 9);
  (*(*v11 + 96))(v11, 3, v15, v16, 0.0, v17);
  v18 = *(this + 10);
  v19 = *(this + 11);
  v20 = *(this + 13);
  (*(*v11 + 96))(v11, 4, v18, v19, 0.0, v20);
  v21 = *(this + 18);
  v22 = *(this + 19);
  v23 = *(this + 21);
  (*(*v11 + 96))(v11, 5, v21, v22, 0.0, v23);
  v24 = HGRectMake4i(0, 0, vcvtd_n_f64_s32(*(*(this + 1) + 12), 2uLL), 1u);
  v26 = v25;
  v27 = *(this + 1);
  v28 = *(v27 + 24);
  v29 = *(v27 + 16);
  v30 = HGObject::operator new(0x80uLL);
  HGBitmap::HGBitmap(v30, v24, v26, 28, v28, v29, v29);
  HGBitmap::SetStorage(v30, *(this + 1));
  v31 = HGObject::operator new(0x1F0uLL);
  HGBitmapLoader::HGBitmapLoader(v31, v30);
  v35 = v31;
  v32 = v34;
  if (v31 == v34)
  {
    if (v31)
    {
      (*(*v34 + 24))(v34);
      v32 = v31;
    }

    else
    {
      v32 = 0;
    }
  }

  else
  {
    if (v31)
    {
      (*(*v31 + 24))(v31);
    }

    v34 = 0;
    v35 = v32;
  }

  result = (*(*v11 + 120))(v11, 0, v32);
  *a3 = v11;
  if (v32)
  {
    result = (*(*v32 + 24))(v32);
  }

  if (v30)
  {
    return (*(*v30 + 24))(v30);
  }

  return result;
}

void sub_26030D9E0(_Unwind_Exception *a1)
{
  if (v2)
  {
    (*(*v2 + 24))(v2);
  }

  if (v4)
  {
    (*(*v4 + 24))(v4);
  }

  if (v3)
  {
    (*(*v3 + 24))(v3);
  }

  (*(*v1 + 24))(v1);
  _Unwind_Resume(a1);
}

void OZGradientGroupShader::~OZGradientGroupShader(OZGradientGroupShader *this)
{
  v2 = *(this + 1);
  if (v2)
  {
    (*(*v2 + 8))(v2);
  }

  *(this + 1) = 0;
  v3 = *(this + 2);
  if (v3)
  {
    (*(*v3 + 8))(v3);
  }

  *(this + 2) = 0;
}

uint64_t OZGradientGroupShader::update(OZGradientGroupShader *this, CMTime *a2)
{
  ValueAsInt = OZChannel::getValueAsInt((*this + 800), a2, 0.0);
  v5 = 16;
  if (!ValueAsInt)
  {
    v5 = 8;
  }

  v6 = *(this + v5);
  *(this + 3) = v6;
  v8 = *&a2->value;
  epoch = a2->epoch;
  return (*(*v6 + 24))(v6, &v8);
}

uint64_t OZGradientGroupShader::updateWithXForm(void *a1, const CMTime *a2, _OWORD *a3)
{
  ValueAsInt = OZChannel::getValueAsInt((*a1 + 800), a2, 0.0);
  v7 = 2;
  if (!ValueAsInt)
  {
    v7 = 1;
  }

  v8 = a1[v7];
  a1[3] = v8;
  if (*a1)
  {
    if (v9)
    {
      v10 = v9;
      OZChannel::getValueAsDouble((v9 + 1192), a2, 0.0);
      v12 = v11;
      OZChannel::getValueAsDouble((v10 + 1344), a2, 0.0);
      v14 = v13;
      OZChannel::getValueAsDouble((v10 + 1896), a2, 0.0);
      v16 = v15;
      OZChannel::getValueAsDouble((v10 + 2048), a2, 0.0);
      v8 = a1[3];
      if (a3)
      {
        v18 = a3[5];
        v31 = a3[4];
        *v32 = v18;
        v19 = a3[7];
        *&v32[16] = a3[6];
        *&v32[32] = v19;
        v20 = a3[1];
        *v29 = *a3;
        *&v29[16] = v20;
        v21 = a3[3];
        *&v29[32] = a3[2];
        v30 = v21;
      }

      else
      {
        *&v32[40] = 0x3FF0000000000000;
        *v32 = 0x3FF0000000000000;
        *&v29[40] = 0x3FF0000000000000;
        *v29 = 0x3FF0000000000000;
        memset(&v29[8], 0, 32);
        v30 = 0u;
        v31 = 0u;
        memset(&v32[8], 0, 32);
      }

      for (i = 0; i != 32; i += 8)
      {
        v23 = &v8[i];
        *(v23 + 3) = *&v29[i * 4];
        *(v23 + 4) = *&v29[i * 4 + 16];
      }

      v24 = v12;
      v25 = v14;
      v8[4] = v24;
      v8[5] = v25;
      v26 = v16;
      v27 = v17;
      v8[6] = v26;
      v8[7] = v27;
    }
  }

  *v29 = *&a2->value;
  *&v29[16] = a2->epoch;
  return (*(*v8 + 24))(v8, v29);
}

void PCShared::~PCShared(PCShared *this)
{
  *(this + 1) = &unk_2872DEA38;
  *(this + 24) = 0;
  PCWeakCount::~PCWeakCount(this + 2);
}

{
  *(this + 1) = &unk_2872DEA38;
  *(this + 24) = 0;
  PCWeakCount::~PCWeakCount(this + 2);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toPCShared::~PCShared(PCShared *this)
{
  v1 = this + *(*this - 24);
  *(v1 + 1) = &unk_2872DEA38;
  v1[24] = 0;
  PCWeakCount::~PCWeakCount(v1 + 2);
}

{
  v1 = this + *(*this - 24);
  *(v1 + 1) = &unk_2872DEA38;
  v1[24] = 0;
  PCWeakCount::~PCWeakCount(v1 + 2);

  JUMPOUT(0x2666E9F00);
}

uint64_t PCShared_base::dispose(uint64_t this)
{
  if (this)
  {
    return (*(*this + 8))();
  }

  return this;
}

void PCShared_base::~PCShared_base(PCShared_base *this)
{
  *this = &unk_2872DEA38;
  *(this + 16) = 0;
  PCWeakCount::~PCWeakCount(this + 1);
}

{
  *this = &unk_2872DEA38;
  *(this + 16) = 0;
  PCWeakCount::~PCWeakCount(this + 1);

  JUMPOUT(0x2666E9F00);
}

void PCWeakCount::~PCWeakCount(PC_Sp_counted_base **this)
{
  v1 = *this;
  if (v1)
  {
    PC_Sp_counted_base::weak_release(v1);
  }
}

const char *HgcShapeSoftEdgeColorizeSecondPass::GetProgram(HgcShapeSoftEdgeColorizeSecondPass *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=000000023e\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    half4 r0;\n    FragmentOut output;\n\n    r0.x = (half) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy).x;\n    output.color0 = float4(r0.xxxx)*hg_Params[0];\n    return output;\n}\n//MD5=7dc50da6:bd1ed7f1:a3dcbc7d:50cc653d\n//SIG=00400000:00000001:00000001:00000001:0000:0001:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=0000000231\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    float4 r0;\n    FragmentOut output;\n\n    r0.x = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy).x;\n    output.color0 = r0.xxxx*hg_Params[0];\n    return output;\n}\n//MD5=0bc76ed3:09c436ca:6d851111:8bb685f7\n//SIG=00000000:00000001:00000001:00000000:0000:0001:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=00000001ff\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nuniform defaultp vec4 hg_ProgramLocal0;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    defaultp vec4 r0;\n\n    r0.x = texture2D(hg_Texture0, hg_TexCoord0.xy).x;\n    gl_FragColor = r0.xxxx*hg_ProgramLocal0;\n}\n//MD5=b131b046:6e0ac2f3:4508da6a:0c8907d8\n//SIG=00000000:00000001:00000001:00000000:0000:0001:0001:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_26030E2A0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344A80;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_26030E3A0(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_26030E3E0()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x26030E3D8);
}

uint64_t HgcShapeSoftEdgeColorizeSecondPass::BindTexture(HgcShapeSoftEdgeColorizeSecondPass *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  (*(*a2 + 72))(a2, 0);
  (*(*a2 + 48))(a2, 0, 0);
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  v5 = (*(**(a2 + 18) + 128))(*(a2 + 18), 46);
  result = 0;
  if (!v5)
  {
    (*(*a2 + 168))(a2);
    return 0;
  }

  return result;
}

uint64_t HgcShapeSoftEdgeColorizeSecondPass::Bind(HgcShapeSoftEdgeColorizeSecondPass *this, HGHandler *a2)
{
  (*(*a2 + 144))(a2, 0, *(this + 62), 1);
  (*(*this + 192))(this, a2);
  return 0;
}

uint64_t HgcShapeSoftEdgeColorizeSecondPass::RenderTile(HgcShapeSoftEdgeColorizeSecondPass *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 22);
    v8 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v9 = 0;
      }

      else
      {
        v9 = 0;
        v10 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v12 = **(this + 62);
          v13 = vmulq_n_f32(v12, COERCE_FLOAT(*(v6 + v10 - 16)));
          v14 = vmulq_n_f32(v12, COERCE_FLOAT(*(v6 + v10)));
          v15 = vmulq_n_f32(v12, COERCE_FLOAT(*(v6 + v10 + 16)));
          v16 = (v5 + v10);
          v16[-2] = vmulq_n_f32(v12, COERCE_FLOAT(*(v6 + v10 - 32)));
          v16[-1] = v13;
          *v16 = v14;
          v16[1] = v15;
          v9 += 4;
          v10 += 64;
        }
      }

      if (v9 < v4)
      {
        do
        {
          *(v5 + 16 * v9) = vmulq_n_f32(**(this + 62), COERCE_FLOAT(*(v6 + 16 * v9)));
          ++v9;
        }

        while (v9 < v4);
      }

      ++v3;
      v6 += v7;
      v5 += v8;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcShapeSoftEdgeColorizeSecondPass::GetDOD(HgcShapeSoftEdgeColorizeSecondPass *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcShapeSoftEdgeColorizeSecondPass::GetROI(HgcShapeSoftEdgeColorizeSecondPass *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcShapeSoftEdgeColorizeSecondPass::~HgcShapeSoftEdgeColorizeSecondPass(HgcShapeSoftEdgeColorizeSecondPass *this)
{
  *this = &unk_2872DEA60;
  v2 = *(this + 62);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40265AC83CLL);
  }

  HGColorMatrix::~HGColorMatrix(this);
}

{
  HgcShapeSoftEdgeColorizeSecondPass::~HgcShapeSoftEdgeColorizeSecondPass(this);

  HGObject::operator delete(v1);
}

uint64_t HgcShapeSoftEdgeColorizeSecondPass::SetParameter(HgcShapeSoftEdgeColorizeSecondPass *this, uint64_t a2, float a3, float a4, float a5, float a6, char *a7)
{
  if (a2)
  {
    return 0xFFFFFFFFLL;
  }

  v8 = *(this + 62);
  if (*v8 == a3 && v8[1] == a4 && v8[2] == a5 && v8[3] == a6)
  {
    return 0;
  }

  *v8 = a3;
  v8[1] = a4;
  v8[2] = a5;
  v8[3] = a6;
  v7 = 1;
  *(this + 126) = 1;
  HGNode::ClearBits(this, a2, a7);
  return v7;
}

float HgcShapeSoftEdgeColorizeSecondPass::GetParameter(HgcShapeSoftEdgeColorizeSecondPass *this, int a2, float *a3)
{
  if (!a2)
  {
    v3 = *(this + 62);
    *a3 = *v3;
    a3[1] = v3[1];
    a3[2] = v3[2];
    result = v3[3];
    a3[3] = result;
  }

  return result;
}

HGNode *HgcShapeSoftEdgeColorizeSecondPass::GetOutput(__n128 *this, HGRenderer *a2, __n128 a3, __n128 a4, int32x2_t a5)
{
  if (this[31].n128_u32[2])
  {
    v5 = this[31].n128_u64[0];
    *&a5 = 0.0;
    a4 = vmulq_f32(*v5, 0);
    *(v5 + 16) = vmulq_n_f32(*v5, COERCE_FLOAT(*(v5 + 80)));
    *(this[31].n128_u64[0] + 32) = a4;
    *(this[31].n128_u64[0] + 48) = a4;
    *(this[31].n128_u64[0] + 64) = a4;
    v6 = this[31].n128_u64[0];
    this[27] = v6[1];
    this[28] = v6[2];
    this[29] = v6[3];
    a3 = v6[4];
    this[30] = a3;
    this[31].n128_u32[2] = 0;
  }

  return HGColorMatrix::GetOutput(this, a2, a3.n128_f64[0], a4.n128_f64[0], a5);
}

const char *HgcShapeSoftEdgeSubtractAlpha::GetProgram(HgcShapeSoftEdgeSubtractAlpha *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=000000030a\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]], \n    texture2d< half > hg_Texture1 [[ texture(1) ]], \n    sampler hg_Sampler1 [[ sampler(1) ]])\n{\n    half4 r0, r1;\n    FragmentOut output;\n\n    r0 = (half4) hg_Texture1.sample(hg_Sampler1, frag._texCoord1.xy);\n    r1.w = (half) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy).w;\n    r0.w = r0.w - r1.w;\n    r0.xyz = r0.xyz*r0.www;\n    output.color0 = float4(r0);\n    return output;\n}\n//MD5=8e212562:2be34449:a55b7522:a773cb44\n//SIG=00400000:00000003:00000003:00000003:0000:0000:0002:0000:0000:0000:0006:0000:0002:02:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=00000002f6\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]], \n    texture2d< float > hg_Texture1 [[ texture(1) ]], \n    sampler hg_Sampler1 [[ sampler(1) ]])\n{\n    float4 r0, r1;\n    FragmentOut output;\n\n    r0 = hg_Texture1.sample(hg_Sampler1, frag._texCoord1.xy);\n    r1.w = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy).w;\n    r0.w = r0.w - r1.w;\n    r0.xyz = r0.xyz*r0.www;\n    output.color0 = r0;\n    return output;\n}\n//MD5=2ccb5981:f6d6baf5:874983b9:e721a7c3\n//SIG=00000000:00000003:00000003:00000000:0000:0000:0002:0000:0000:0000:0006:0000:0002:02:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=0000000274\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture1;\nuniform defaultp sampler2D hg_Texture0;\nvarying highp vec4 hg_TexCoord0;\nvarying highp vec4 hg_TexCoord1;\nvoid main()\n{\n    defaultp vec4 r0, r1;\n\n    r0 = texture2D(hg_Texture1, hg_TexCoord1.xy);\n    r1.w = texture2D(hg_Texture0, hg_TexCoord0.xy).w;\n    r0.w = r0.w - r1.w;\n    r0.xyz = r0.xyz*r0.www;\n    gl_FragColor = r0;\n}\n//MD5=97b858b6:94e2926a:b6feeb87:128df125\n//SIG=00000000:00000003:00000003:00000000:0000:0000:0002:0000:0000:0000:0000:0000:0002:02:0:1:0\n";
  }
}

void sub_26030EA3C(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344AF0;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_26030EB7C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_26030EBC4()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x26030EBBCLL);
}

uint64_t HgcShapeSoftEdgeSubtractAlpha::BindTexture(HgcShapeSoftEdgeSubtractAlpha *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    if (a3 != 1)
    {
      return 0xFFFFFFFFLL;
    }

    (*(*a2 + 72))(a2, 1, 0);
    (*(*a2 + 48))(a2, 0, 0);
    v4 = a2;
    v5 = 1;
  }

  else
  {
    (*(*a2 + 72))(a2, 0);
    (*(*a2 + 48))(a2, 0, 0);
    v4 = a2;
    v5 = 0;
  }

  HGHandler::TexCoord(v4, v5, 0, 0, 0);
  if (!(*(**(a2 + 18) + 128))(*(a2 + 18), 46))
  {
    (*(*a2 + 168))(a2);
  }

  return 0;
}

uint64_t HgcShapeSoftEdgeSubtractAlpha::RenderTile(HgcShapeSoftEdgeSubtractAlpha *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 26);
    v8 = *(a2 + 12);
    v9 = 16 * *(a2 + 22);
    v10 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v11 = 0;
      }

      else
      {
        v11 = 0;
        v12 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v14 = *(v8 + v12 - 32);
          v15 = *(v8 + v12 - 16);
          v16 = *(v8 + v12);
          v17 = *(v8 + v12 + 16);
          v18 = vsubq_f32(v14, *(v6 + v12 - 32));
          v19 = vsubq_f32(v15, *(v6 + v12 - 16));
          v20 = vsubq_f32(v16, *(v6 + v12));
          v21 = vsubq_f32(v17, *(v6 + v12 + 16));
          v22 = **(this + 51);
          v23 = vbslq_s8(v22, v18, v14);
          v24 = vbslq_s8(v22, v19, v15);
          v25 = vbslq_s8(v22, v20, v16);
          v26 = vbslq_s8(v22, v21, v17);
          v27 = (v5 + v12);
          v27[-2] = vbslq_s8(v22, v18, vmulq_laneq_f32(v23, v23, 3));
          v27[-1] = vbslq_s8(v22, v19, vmulq_laneq_f32(v24, v24, 3));
          *v27 = vbslq_s8(v22, v20, vmulq_laneq_f32(v25, v25, 3));
          v27[1] = vbslq_s8(v22, v21, vmulq_laneq_f32(v26, v26, 3));
          v11 += 4;
          v12 += 64;
        }
      }

      if (v11 < v4)
      {
        do
        {
          v28 = *(v8 + 16 * v11);
          v29 = vsubq_f32(v28, *(v6 + 16 * v11));
          v30 = **(this + 51);
          v31 = vbslq_s8(v30, v29, v28);
          *(v5 + 16 * v11++) = vbslq_s8(v30, v29, vmulq_laneq_f32(v31, v31, 3));
        }

        while (v11 < v4);
      }

      ++v3;
      v8 += v7;
      v6 += v9;
      v5 += v10;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcShapeSoftEdgeSubtractAlpha::GetDOD(HgcShapeSoftEdgeSubtractAlpha *this, HGRenderer *a2, unsigned int a3, HGRect a4)
{
  if (a3 >= 2)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcShapeSoftEdgeSubtractAlpha::GetROI(HgcShapeSoftEdgeSubtractAlpha *this, HGRenderer *a2, unsigned int a3, HGRect a4)
{
  if (a3 >= 2)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcShapeSoftEdgeSubtractAlpha::HgcShapeSoftEdgeSubtractAlpha(HgcShapeSoftEdgeSubtractAlpha *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872DECD8;
  operator new();
}

void HgcShapeSoftEdgeSubtractAlpha::~HgcShapeSoftEdgeSubtractAlpha(HGNode *this)
{
  *this = &unk_2872DECD8;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40451B5BE8);
  }

  HGNode::~HGNode(this);
}

{
  HgcShapeSoftEdgeSubtractAlpha::~HgcShapeSoftEdgeSubtractAlpha(this);

  HGObject::operator delete(v1);
}

const char *HgcShapeSoftEdgeClr::GetProgram(HgcShapeSoftEdgeClr *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=00000002d0\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    half4 r0;\n    FragmentOut output;\n\n    r0.xy = half2(frag._texCoord0.xy)/half2(frag._texCoord0.ww);\n    r0.xy = r0.xy + half2(hg_Params[5].xy);\n    r0.xy = r0.xy*half2(hg_Params[5].zw);\n    r0.x = (half) hg_Texture0.sample(hg_Sampler0, float2(r0.xy)).x;\n    output.color0 = float4(r0.xxxx)*hg_Params[0];\n    return output;\n}\n//MD5=fa47e8dc:4e19468c:97518949:b262ea97\n//SIG=02400000:00000000:00000000:00000000:0000:0006:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=000000029f\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    float4 r0;\n    FragmentOut output;\n\n    r0.xy = frag._texCoord0.xy/frag._texCoord0.ww;\n    r0.xy = r0.xy + hg_Params[5].xy;\n    r0.xy = r0.xy*hg_Params[5].zw;\n    r0.x = hg_Texture0.sample(hg_Sampler0, r0.xy).x;\n    output.color0 = r0.xxxx*hg_Params[0];\n    return output;\n}\n//MD5=f2684eb6:17faaf05:9b5c2070:8c3af7e8\n//SIG=02000000:00000000:00000000:00000000:0000:0006:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=0000000325\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nuniform highp vec4 hg_ProgramLocal0;\nuniform highp vec4 hg_ProgramLocal1;\nuniform highp vec4 hg_ProgramLocal2;\nuniform highp vec4 hg_ProgramLocal3;\nuniform highp vec4 hg_ProgramLocal4;\nuniform highp vec4 hg_ProgramLocal5;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    highp vec4 r0;\n\n    r0.xy = hg_TexCoord0.xy/hg_TexCoord0.ww;\n    r0.xy = r0.xy + hg_ProgramLocal5.xy;\n    r0.xy = r0.xy*hg_ProgramLocal5.zw;\n    r0.x = texture2D(hg_Texture0, r0.xy).x;\n    gl_FragColor = r0.xxxx*hg_ProgramLocal0;\n}\n//MD5=e4d40c06:c2e5521c:3841fc93:3af28a0f\n//SIG=02000000:00000000:00000000:00000000:0000:0006:0001:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_26030F15C(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260346000;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 9;
  std::string::basic_string[abi:ne200100]<0>(v34, "texture2d<float>");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 6;
  std::string::basic_string[abi:ne200100]<0>(v34, "sampler");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 8;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_26030F2DC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_26030F32C()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x26030F324);
}

uint64_t HgcShapeSoftEdgeClr::BindTexture(HgcShapeSoftEdgeClr *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  if ((*(**(a2 + 18) + 128))(*(a2 + 18), 46))
  {
    v7.n128_u32[0] = 1.0;
    v8.n128_u32[0] = 1.0;
  }

  else
  {
    v7.n128_f32[0] = 1.0 / (*(a2 + 57) - *(a2 + 55));
    v8.n128_f32[0] = 1.0 / (*(a2 + 58) - *(a2 + 56));
  }

  v5.n128_f32[0] = *(a2 + 60);
  v6.n128_f32[0] = *(a2 + 61);
  (*(*a2 + 136))(a2, 5, v5, v6, v7, v8);
  return 0;
}

uint64_t HgcShapeSoftEdgeClr::Bind(HgcShapeSoftEdgeClr *this, HGHandler *a2)
{
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  (*(*a2 + 120))(a2, *(this + 51) + 16);
  (*(*a2 + 144))(a2, 0, *(this + 51), 1);
  (*(*a2 + 144))(a2, 1, *(this + 51) + 16, 1);
  (*(*a2 + 144))(a2, 2, *(this + 51) + 32, 1);
  (*(*a2 + 144))(a2, 3, *(this + 51) + 48, 1);
  (*(*a2 + 144))(a2, 4, *(this + 51) + 64, 1);
  (*(*this + 192))(this, a2);
  return 0;
}

uint64_t HgcShapeSoftEdgeClr::RenderFragment(uint64_t a1, float32x4_t *a2, int32x2_t *a3)
{
  *v3.f32 = vadd_f32(vcvt_f32_s32(*a3), 0x3F0000003F000000);
  v3.i64[1] = 0x3F80000000000000;
  v4 = a2[1];
  v5 = vdupq_laneq_s32(v4, 3);
  v6 = *(a1 + 408);
  v7 = v6[9];
  v8 = v6[10];
  v9 = vminq_f32(vmaxq_f32(vrecpeq_f32(v5), v7), v8);
  v10 = vminq_f32(vmaxq_f32(vmulq_f32(v9, vrecpsq_f32(v5, v9)), v7), v8);
  v11 = a3[11].i32[0];
  v12 = vsubq_f32(vmulq_f32(v4, vmulq_f32(v10, vrecpsq_f32(v5, v10))), v3);
  v13 = vaddq_s32(vcvtq_s32_f32(v12), vcltzq_f32(v12));
  v12.i64[0] = vsubq_f32(v12, vcvtq_f32_s32(v13)).u64[0];
  v14 = (*&a3[10] + 16 * (v13.i32[0] + v13.i32[1] * v11));
  v15 = vaddq_f32(*v14, vmulq_n_f32(vsubq_f32(v14[1], *v14), v12.f32[0]));
  **&a3[2] = vmulq_n_f32(*v6, vaddq_f32(v15, vmulq_lane_f32(vsubq_f32(vaddq_f32(v14[v11], vmulq_n_f32(vsubq_f32(v14[v11 + 1], v14[v11]), v12.f32[0])), v15), *v12.f32, 1)).f32[0]);
  return 0;
}

uint64_t HgcShapeSoftEdgeClr::RenderTile(HgcShapeSoftEdgeClr *this, int32x2_t *a2)
{
  v2 = *a2;
  v3 = a2[1].i32[1] - HIDWORD(*a2);
  if (v3 >= 1)
  {
    v4 = 0;
    *v5.f32 = vadd_f32(vcvt_f32_s32(v2), 0x3F0000003F000000);
    v5.i64[1] = 0x3F80000000000000;
    v6 = a2[1].i32[0] - v2.i32[0];
    v7 = a2[2];
    v8 = 16 * a2[3].i32[0];
    v9 = v5;
    do
    {
      if (v6 >= 1)
      {
        v10 = 0;
        v11 = v9;
        do
        {
          v12 = vdupq_laneq_s32(v11, 3);
          v13 = *(this + 51);
          v14 = v13[9];
          v15 = v13[10];
          v16 = vminq_f32(vmaxq_f32(vrecpeq_f32(v12), v14), v15);
          v17 = vminq_f32(vmaxq_f32(vmulq_f32(v16, vrecpsq_f32(v12, v16)), v14), v15);
          v18 = a2[11].i32[0];
          v19 = vsubq_f32(vmulq_f32(v11, vmulq_f32(v17, vrecpsq_f32(v12, v17))), v5);
          v20 = vaddq_s32(vcvtq_s32_f32(v19), vcltzq_f32(v19));
          v19.i64[0] = vsubq_f32(v19, vcvtq_f32_s32(v20)).u64[0];
          v21 = (*&a2[10] + 16 * (v20.i32[0] + v20.i32[1] * v18));
          v22 = vaddq_f32(*v21, vmulq_n_f32(vsubq_f32(v21[1], *v21), v19.f32[0]));
          *(*&v7 + v10) = vmulq_n_f32(*v13, vaddq_f32(v22, vmulq_lane_f32(vsubq_f32(vaddq_f32(v21[v18], vmulq_n_f32(vsubq_f32(v21[v18 + 1], v21[v18]), v19.f32[0])), v22), *v19.f32, 1)).f32[0]);
          v11 = vaddq_f32(v11, xmmword_2603429B0);
          v10 += 16;
        }

        while (16 * v6 != v10);
      }

      v9 = vaddq_f32(v9, xmmword_2603429C0);
      ++v4;
      *&v7 += v8;
    }

    while (v4 != v3);
  }

  return 0;
}

uint64_t HgcShapeSoftEdgeClr::GetDOD(HgcShapeSoftEdgeClr *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  v5 = *&a4.var2;
  v6 = *&a4.var0;
  v8 = HGRectMake4i(0xFFFFFFFF, 0xFFFFFFFF, 1u, 1u);
  v9 = HGRectGrow(v6, v5, v8);
  v11 = v10;
  HGTransform::HGTransform(v17);
  HGTransform::LoadMatrixf(v17, (*(this + 51) + 16));
  HGTransform::Invert2D(v17);
  v13 = HGTransformUtils::MinW(v12);
  *&v18.var0 = v11;
  DOD = HGTransformUtils::GetDOD(v17, v9, v18, 0.5, v13);
  v4 = HGRectUnion(0, 0, DOD, v15);
  HGTransform::~HGTransform(v17);
  return v4;
}

uint64_t HgcShapeSoftEdgeClr::GetROI(HgcShapeSoftEdgeClr *this, HGRenderer *a2, int a3, HGRect a4)
{
  v4 = 0;
  if (!a3)
  {
    v5 = *&a4.var2;
    v6 = *&a4.var0;
    HGTransform::HGTransform(v17);
    HGTransform::LoadMatrixf(v17, (*(this + 51) + 16));
    v9 = HGTransformUtils::MinW(v8);
    *&v18.var0 = v5;
    ROI = HGTransformUtils::GetROI(v17, v6, v18, 0.5, v9);
    v12 = HGRectUnion(0, 0, ROI, v11);
    v14 = v13;
    HGTransform::~HGTransform(v17);
    v15 = HGRectMake4i(0xFFFFFFFF, 0xFFFFFFFF, 1u, 1u);
    return HGRectGrow(v12, v14, v15);
  }

  return v4;
}

void HgcShapeSoftEdgeClr::HgcShapeSoftEdgeClr(HgcShapeSoftEdgeClr *this)
{
  HGNode3D::HGNode3D(this);
  *v1 = &unk_2872DEF40;
  *(v1 + 416) = 1;
  operator new();
}

void HgcShapeSoftEdgeClr::~HgcShapeSoftEdgeClr(HgcShapeSoftEdgeClr *this)
{
  *this = &unk_2872DEF40;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40C3A7E6FCLL);
  }

  HGMipmapLevel::~HGMipmapLevel(this);
}

{
  HgcShapeSoftEdgeClr::~HgcShapeSoftEdgeClr(this);

  HGObject::operator delete(v1);
}

uint64_t HgcShapeSoftEdgeClr::SetParameter(HgcShapeSoftEdgeClr *this, uint64_t a2, float a3, float a4, float a5, float a6, char *a7)
{
  if (a2)
  {
    return 0xFFFFFFFFLL;
  }

  v8 = *(this + 51);
  if (*v8 == a3 && v8[1] == a4 && v8[2] == a5 && v8[3] == a6)
  {
    return 0;
  }

  *v8 = a3;
  v8[1] = a4;
  v8[2] = a5;
  v8[3] = a6;
  v7 = 1;
  *(this + 104) = 1;
  HGNode::ClearBits(this, a2, a7);
  return v7;
}

float HgcShapeSoftEdgeClr::GetParameter(HgcShapeSoftEdgeClr *this, int a2, float *a3)
{
  if (!a2)
  {
    v3 = *(this + 51);
    *a3 = *v3;
    a3[1] = v3[1];
    a3[2] = v3[2];
    result = v3[3];
    a3[3] = result;
  }

  return result;
}

double HgcShapeSoftEdgeClr::GetOutput(HgcShapeSoftEdgeClr *this, HGRenderer *a2)
{
  if (*(this + 104))
  {
    v2 = *(this + 51);
    v3 = *(v2 + 96);
    *(v2 + 16) = *(v2 + 80);
    *(*(this + 51) + 32) = v3;
    *(*(this + 51) + 48) = xmmword_2603429D0;
    result = 0.0;
    *(*(this + 51) + 64) = xmmword_2603427D0;
    *(this + 104) = 0;
  }

  return result;
}

const char *HgcShapeAlphaBias::GetProgram(HgcShapeAlphaBias *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=0000000331\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const half4 c0 = half4(9.999999975e-07, 0.000000000, 0.000000000, 0.000000000);\n    half4 r0, r1, r2;\n    FragmentOut output;\n\n    r0 = (half4) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1.w = pow(r0.w, half(hg_Params[0].w));\n    r1.xyz = r0.xyz*r1.www;\n    r1.xyz = r1.xyz/r0.www;\n    r2.x = c0.x - r0.w;\n    output.color0 = select(float4(r0), float4(r1), float4(r2.xxxx) < 0.00000h);\n    return output;\n}\n//MD5=036b020b:04d95457:27ac6026:fc832375\n//SIG=00400000:00000001:00000001:00000001:0001:0001:0003:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=000000030f\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const float4 c0 = float4(9.999999975e-07, 0.000000000, 0.000000000, 0.000000000);\n    float4 r0, r1, r2;\n    FragmentOut output;\n\n    r0 = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1.w = pow(r0.w, hg_Params[0].w);\n    r1.xyz = r0.xyz*r1.www;\n    r1.xyz = r1.xyz/r0.www;\n    r2.x = c0.x - r0.w;\n    output.color0 = select(r0, r1, r2.xxxx < 0.00000f);\n    return output;\n}\n//MD5=3faf21c0:d38a8a3c:f5168635:aedd7782\n//SIG=00000000:00000001:00000001:00000000:0001:0001:0003:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=0000000339\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nuniform mediump vec4 hg_ProgramLocal0;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    const mediump vec4 c0 = vec4(9.999999975e-07, 0.000000000, 0.000000000, 0.000000000);\n    mediump vec4 r0, r1, r2;\n\n    r0 = texture2D(hg_Texture0, hg_TexCoord0.xy);\n    r1.w = pow(r0.w, hg_ProgramLocal0.w);\n    r1.xyz = r0.xyz*r1.www;\n    r1.xyz = r1.xyz/r0.www;\n    r2.x = c0.x - r0.w;\n    gl_FragColor = vec4(r2.x < 0.00000 ? r1.x : r0.x, r2.x < 0.00000 ? r1.y : r0.y, r2.x < 0.00000 ? r1.z : r0.z, r2.x < 0.00000 ? r1.w : r0.w);\n}\n//MD5=c47dd433:0bd6ec29:e56572fa:825df2b7\n//SIG=00000000:00000001:00000001:00000000:0001:0001:0003:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_26030FDB0(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344A80;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_26030FEB0(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_26030FEF0()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x26030FEE8);
}

uint64_t HgcShapeAlphaBias::BindTexture(HgcShapeAlphaBias *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  (*(*a2 + 72))(a2, 0);
  (*(*a2 + 48))(a2, 0, 0);
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  v5 = (*(**(a2 + 18) + 128))(*(a2 + 18), 46);
  result = 0;
  if (!v5)
  {
    (*(*a2 + 168))(a2);
    return 0;
  }

  return result;
}

uint64_t HgcShapeAlphaBias::Bind(HgcShapeAlphaBias *this, HGHandler *a2)
{
  (*(*a2 + 144))(a2, 0, *(this + 51), 1);
  (*(*this + 192))(this, a2);
  return 0;
}

uint64_t HgcShapeAlphaBias::RenderTile(HgcShapeAlphaBias *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 6);
    v8 = 16 * *(a2 + 22);
    do
    {
      if (v4 < 2)
      {
        v9 = 0;
      }

      else
      {
        v9 = 0;
        v10 = 16;
        for (i = v4; i > 1; i -= 2)
        {
          v12 = *(v6 + v10 - 16);
          v13 = *(v6 + v10);
          v14 = *(this + 51);
          v15 = *(v14 + 16);
          v16 = vandq_s8(v15, v12);
          v17 = vandq_s8(v15, v13);
          v18 = *(v14 + 32);
          v19 = *(v14 + 48);
          v20 = vorrq_s8(v16, v18);
          v21 = vorrq_s8(v17, v18);
          v22 = vcgtq_f32(v19, v12);
          v23 = *(v14 + 64);
          v24 = *(v14 + 80);
          v25 = vsubq_f32(vcvtq_f32_u32(vshrq_n_u32(v13, 0x17uLL)), vandq_s8(v23, vcgtq_f32(v19, v13)));
          v26 = vsubq_f32(vsubq_f32(vcvtq_f32_u32(vshrq_n_u32(v12, 0x17uLL)), vandq_s8(v23, v22)), v24);
          v27 = *(v14 + 96);
          v28 = *(v14 + 112);
          v29 = vsubq_f32(v25, v24);
          v30 = vandq_s8(v18, vcgtq_f32(v20, v27));
          v31 = vandq_s8(v18, vcgtq_f32(v21, v27));
          v32 = vaddq_f32(v26, v30);
          v33 = vsubq_f32(vsubq_f32(v20, v18), vmulq_f32(vmulq_f32(v28, v30), v20));
          v34 = vsubq_f32(vsubq_f32(v21, v18), vmulq_f32(vmulq_f32(v28, v31), v21));
          v35 = *(v14 + 128);
          v36 = *(v14 + 144);
          v37 = vaddq_f32(v35, vmulq_f32(v36, v33));
          v38 = vaddq_f32(v35, vmulq_f32(v36, v34));
          v39 = *(v14 + 160);
          v40 = *(v14 + 176);
          v41 = vmulq_f32(*v14, vaddq_f32(vaddq_f32(v29, v31), vmulq_f32(v34, vaddq_f32(vaddq_f32(v39, vmulq_f32(v34, v40)), vmulq_f32(vmulq_f32(v34, v34), v38)))));
          v43 = *(v14 + 192);
          v42 = *(v14 + 208);
          v44 = vmaxq_f32(vmulq_f32(*v14, vaddq_f32(v32, vmulq_f32(v33, vaddq_f32(vaddq_f32(v39, vmulq_f32(v33, v40)), vmulq_f32(vmulq_f32(v33, v33), v37))))), v43);
          v45 = vmaxq_f32(v41, v43);
          v46 = vcvtq_f32_s32(vcvtq_s32_f32(v44));
          v47 = vcvtq_f32_s32(vcvtq_s32_f32(v45));
          v48 = vsubq_f32(v46, vandq_s8(v18, vcgtq_f32(v46, v44)));
          v49 = vsubq_f32(v47, vandq_s8(v18, vcgtq_f32(v47, v45)));
          v50 = vsubq_f32(v44, v48);
          v51 = *(v14 + 224);
          v52 = *(v14 + 240);
          v53 = vsubq_f32(v45, v49);
          v54 = *(v14 + 256);
          v55 = *(v14 + 272);
          v56 = vmulq_f32(vaddq_f32(v18, vmulq_f32(v50, vaddq_f32(v52, vmulq_f32(v50, vaddq_f32(v42, vmulq_f32(v51, v50)))))), vshlq_n_s32(vaddq_s32(v54, vcvtq_s32_f32(v48)), 0x17uLL));
          v57 = vmulq_f32(vaddq_f32(v18, vmulq_f32(v53, vaddq_f32(v52, vmulq_f32(v53, vaddq_f32(v42, vmulq_f32(v51, v53)))))), vshlq_n_s32(vaddq_s32(v54, vcvtq_s32_f32(v49)), 0x17uLL));
          v58 = vdupq_laneq_s32(v12, 3);
          v59 = vdupq_laneq_s32(v13, 3);
          v60 = vmaxq_f32(vmulq_f32(v52, vrecpeq_f32(v58)), v51);
          v61 = vmaxq_f32(vmulq_f32(v52, vrecpeq_f32(v59)), v51);
          v62 = *(v14 + 288);
          v63 = *(v14 + 304);
          v64 = vminq_f32(v60, v62);
          v65 = vminq_f32(v61, v62);
          v66 = (v5 + v10);
          v66[-1] = vbslq_s8(vcgtq_f32(v63, vdupq_lane_s32(*&vsubq_f32(v42, v58), 0)), vbslq_s8(v55, v56, vmulq_f32(vmulq_f32(v64, vrecpsq_f32(v58, v64)), vbslq_s8(v55, v56, vmulq_laneq_f32(v12, v56, 3)))), v12);
          *v66 = vbslq_s8(vcgtq_f32(v63, vdupq_lane_s32(*&vsubq_f32(v42, v59), 0)), vbslq_s8(v55, v57, vmulq_f32(vmulq_f32(v65, vrecpsq_f32(v59, v65)), vbslq_s8(v55, v57, vmulq_laneq_f32(v13, v57, 3)))), v13);
          v9 += 2;
          v10 += 32;
        }
      }

      if (v9 < v4)
      {
        v67 = *(v6 + 16 * v9);
        v68 = *(this + 51);
        v69 = *(v68 + 32);
        v70 = vorrq_s8(vandq_s8(*(v68 + 16), v67), v69);
        v71 = vandq_s8(v69, vcgtq_f32(v70, *(v68 + 96)));
        v72 = vsubq_f32(vsubq_f32(v70, v69), vmulq_f32(vmulq_f32(*(v68 + 112), v71), v70));
        v73 = *(v68 + 208);
        v74 = vmaxq_f32(vmulq_f32(*v68, vaddq_f32(vaddq_f32(vsubq_f32(vsubq_f32(vcvtq_f32_u32(vshrq_n_u32(v67, 0x17uLL)), vandq_s8(*(v68 + 64), vcgtq_f32(*(v68 + 48), v67))), *(v68 + 80)), v71), vmulq_f32(v72, vaddq_f32(vaddq_f32(*(v68 + 160), vmulq_f32(v72, *(v68 + 176))), vmulq_f32(vmulq_f32(v72, v72), vaddq_f32(*(v68 + 128), vmulq_f32(*(v68 + 144), v72))))))), *(v68 + 192));
        v75 = vcvtq_f32_s32(vcvtq_s32_f32(v74));
        v76 = vsubq_f32(v75, vandq_s8(v69, vcgtq_f32(v75, v74)));
        v77 = vsubq_f32(v74, v76);
        v78 = *(v68 + 224);
        v79 = *(v68 + 240);
        v80 = vmulq_f32(vaddq_f32(v69, vmulq_f32(v77, vaddq_f32(v79, vmulq_f32(v77, vaddq_f32(v73, vmulq_f32(v78, v77)))))), vshlq_n_s32(vaddq_s32(*(v68 + 256), vcvtq_s32_f32(v76)), 0x17uLL));
        v81 = vdupq_laneq_s32(v67, 3);
        v82 = vminq_f32(vmaxq_f32(vmulq_f32(v79, vrecpeq_f32(v81)), v78), *(v68 + 288));
        *(v5 + 16 * v9) = vbslq_s8(vcgtq_f32(*(v68 + 304), vdupq_lane_s32(*&vsubq_f32(v73, v81), 0)), vbslq_s8(*(v68 + 272), v80, vmulq_f32(vmulq_f32(v82, vrecpsq_f32(v81, v82)), vbslq_s8(*(v68 + 272), v80, vmulq_laneq_f32(v67, v80, 3)))), v67);
      }

      v6 += v8;
      v5 += v7;
      ++v3;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcShapeAlphaBias::GetDOD(HgcShapeAlphaBias *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcShapeAlphaBias::GetROI(HgcShapeAlphaBias *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcShapeAlphaBias::HgcShapeAlphaBias(HgcShapeAlphaBias *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872DF1B8;
  operator new();
}

void HgcShapeAlphaBias::~HgcShapeAlphaBias(HGNode *this)
{
  *this = &unk_2872DF1B8;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C4055B0EC01);
  }

  HGNode::~HGNode(this);
}

{
  HgcShapeAlphaBias::~HgcShapeAlphaBias(this);

  HGObject::operator delete(v1);
}

uint64_t HgcShapeAlphaBias::SetParameter(HgcShapeAlphaBias *this, uint64_t a2, __n128 a3, float a4, float a5, float a6, char *a7)
{
  if (a2)
  {
    return 0xFFFFFFFFLL;
  }

  v8 = *(this + 51);
  if (v8->n128_f32[0] == 0.0 && v8->n128_f32[1] == 0.0 && v8->n128_f32[2] == 0.0 && v8->n128_f32[3] == a3.n128_f32[0])
  {
    return 0;
  }

  v8->n128_u64[0] = 0;
  v8->n128_u32[3] = a3.n128_u32[0];
  a3.n128_f32[1] = a4;
  v8->n128_u32[2] = 0;
  a3.n128_u64[1] = __PAIR64__(LODWORD(a6), LODWORD(a5));
  v8[20] = a3;
  HGNode::ClearBits(this, a2, a7);
  return 1;
}

float HgcShapeAlphaBias::GetParameter(HgcShapeAlphaBias *this, int a2, float *a3)
{
  if (!a2)
  {
    v3 = *(this + 51);
    *a3 = v3[80];
    a3[1] = v3[81];
    a3[2] = v3[82];
    result = v3[83];
    a3[3] = result;
  }

  return result;
}

const char *HgcShapeSoftEdgeClrInPlace::GetProgram(HgcShapeSoftEdgeClrInPlace *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=00000002e9\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    half4 r0;\n    FragmentOut output;\n\n    r0.xy = half2(frag._texCoord0.xy)/half2(frag._texCoord0.ww);\n    r0.xy = r0.xy + half2(hg_Params[6].xy);\n    r0.xy = r0.xy*half2(hg_Params[6].zw);\n    r0 = (half4) hg_Texture0.sample(hg_Sampler0, float2(r0.xy));\n    r0 = half4(hg_Params[0])*r0;\n    output.color0 = float4(r0)*hg_Params[1];\n    return output;\n}\n//MD5=20355668:a4f824fd:5c70d0dc:40dc3ff8\n//SIG=02400000:00000000:00000000:00000000:0000:0007:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=00000002b0\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    float4 r0;\n    FragmentOut output;\n\n    r0.xy = frag._texCoord0.xy/frag._texCoord0.ww;\n    r0.xy = r0.xy + hg_Params[6].xy;\n    r0.xy = r0.xy*hg_Params[6].zw;\n    r0 = hg_Texture0.sample(hg_Sampler0, r0.xy);\n    r0 = hg_Params[0]*r0;\n    output.color0 = r0*hg_Params[1];\n    return output;\n}\n//MD5=cd0af800:73edd9a1:f1cd8bb5:754f2b15\n//SIG=02000000:00000000:00000000:00000000:0000:0007:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=000000035f\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nuniform highp vec4 hg_ProgramLocal0;\nuniform highp vec4 hg_ProgramLocal1;\nuniform highp vec4 hg_ProgramLocal2;\nuniform highp vec4 hg_ProgramLocal3;\nuniform highp vec4 hg_ProgramLocal4;\nuniform highp vec4 hg_ProgramLocal5;\nuniform highp vec4 hg_ProgramLocal6;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    highp vec4 r0;\n\n    r0.xy = hg_TexCoord0.xy/hg_TexCoord0.ww;\n    r0.xy = r0.xy + hg_ProgramLocal6.xy;\n    r0.xy = r0.xy*hg_ProgramLocal6.zw;\n    r0 = texture2D(hg_Texture0, r0.xy);\n    r0 = hg_ProgramLocal0*r0;\n    gl_FragColor = r0*hg_ProgramLocal1;\n}\n//MD5=52d75abf:59af0be7:83a946b0:42b4e3ef\n//SIG=02000000:00000000:00000000:00000000:0000:0007:0001:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_26031083C(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_2603446C0;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 9;
  std::string::basic_string[abi:ne200100]<0>(v34, "texture2d<float>");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 6;
  std::string::basic_string[abi:ne200100]<0>(v34, "sampler");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 8;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_2603109BC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_260310A0C()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x260310A04);
}

uint64_t HgcShapeSoftEdgeClrInPlace::BindTexture(HgcShapeSoftEdgeClrInPlace *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  if ((*(**(a2 + 18) + 128))(*(a2 + 18), 46))
  {
    v7.n128_u32[0] = 1.0;
    v8.n128_u32[0] = 1.0;
  }

  else
  {
    v7.n128_f32[0] = 1.0 / (*(a2 + 57) - *(a2 + 55));
    v8.n128_f32[0] = 1.0 / (*(a2 + 58) - *(a2 + 56));
  }

  v5.n128_f32[0] = *(a2 + 60);
  v6.n128_f32[0] = *(a2 + 61);
  (*(*a2 + 136))(a2, 6, v5, v6, v7, v8);
  return 0;
}

uint64_t HgcShapeSoftEdgeClrInPlace::Bind(HgcShapeSoftEdgeClrInPlace *this, HGHandler *a2)
{
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  (*(*a2 + 120))(a2, *(this + 51) + 32);
  (*(*a2 + 144))(a2, 0, *(this + 51), 1);
  (*(*a2 + 144))(a2, 1, *(this + 51) + 16, 1);
  (*(*a2 + 144))(a2, 2, *(this + 51) + 32, 1);
  (*(*a2 + 144))(a2, 3, *(this + 51) + 48, 1);
  (*(*a2 + 144))(a2, 4, *(this + 51) + 64, 1);
  (*(*a2 + 144))(a2, 5, *(this + 51) + 80, 1);
  (*(*this + 192))(this, a2);
  return 0;
}

uint64_t HgcShapeSoftEdgeClrInPlace::RenderFragment(uint64_t a1, float32x4_t *a2, int32x2_t *a3)
{
  *v3.f32 = vadd_f32(vcvt_f32_s32(*a3), 0x3F0000003F000000);
  v3.i64[1] = 0x3F80000000000000;
  v4 = a2[1];
  v5 = vdupq_laneq_s32(v4, 3);
  v6 = *(a1 + 408);
  v7 = v6[10];
  v8 = v6[11];
  v9 = vminq_f32(vmaxq_f32(vrecpeq_f32(v5), v7), v8);
  v10 = vminq_f32(vmaxq_f32(vmulq_f32(v9, vrecpsq_f32(v5, v9)), v7), v8);
  v11 = a3[11].i32[0];
  v12 = vsubq_f32(vmulq_f32(v4, vmulq_f32(v10, vrecpsq_f32(v5, v10))), v3);
  v13 = vaddq_s32(vcvtq_s32_f32(v12), vcltzq_f32(v12));
  v12.i64[0] = vsubq_f32(v12, vcvtq_f32_s32(v13)).u64[0];
  v14 = (*&a3[10] + 16 * (v13.i32[0] + v13.i32[1] * v11));
  v15 = vaddq_f32(*v14, vmulq_n_f32(vsubq_f32(v14[1], *v14), v12.f32[0]));
  **&a3[2] = vmulq_f32(v6[1], vmulq_f32(*v6, vaddq_f32(v15, vmulq_lane_f32(vsubq_f32(vaddq_f32(v14[v11], vmulq_n_f32(vsubq_f32(v14[v11 + 1], v14[v11]), v12.f32[0])), v15), *v12.f32, 1))));
  return 0;
}

uint64_t HgcShapeSoftEdgeClrInPlace::RenderTile(HgcShapeSoftEdgeClrInPlace *this, int32x2_t *a2)
{
  v2 = *a2;
  v3 = a2[1].i32[1] - HIDWORD(*a2);
  if (v3 >= 1)
  {
    v4 = 0;
    *v5.f32 = vadd_f32(vcvt_f32_s32(v2), 0x3F0000003F000000);
    v5.i64[1] = 0x3F80000000000000;
    v6 = a2[1].i32[0] - v2.i32[0];
    v7 = a2[2];
    v8 = 16 * a2[3].i32[0];
    v9 = v5;
    do
    {
      if (v6 >= 1)
      {
        v10 = 0;
        v11 = v9;
        do
        {
          v12 = vdupq_laneq_s32(v11, 3);
          v13 = *(this + 51);
          v14 = v13[10];
          v15 = v13[11];
          v16 = vminq_f32(vmaxq_f32(vrecpeq_f32(v12), v14), v15);
          v17 = vminq_f32(vmaxq_f32(vmulq_f32(v16, vrecpsq_f32(v12, v16)), v14), v15);
          v18 = a2[11].i32[0];
          v19 = vsubq_f32(vmulq_f32(v11, vmulq_f32(v17, vrecpsq_f32(v12, v17))), v5);
          v20 = vaddq_s32(vcvtq_s32_f32(v19), vcltzq_f32(v19));
          v19.i64[0] = vsubq_f32(v19, vcvtq_f32_s32(v20)).u64[0];
          v21 = (*&a2[10] + 16 * (v20.i32[0] + v20.i32[1] * v18));
          v22 = vaddq_f32(*v21, vmulq_n_f32(vsubq_f32(v21[1], *v21), v19.f32[0]));
          *(*&v7 + v10) = vmulq_f32(v13[1], vmulq_f32(*v13, vaddq_f32(v22, vmulq_lane_f32(vsubq_f32(vaddq_f32(v21[v18], vmulq_n_f32(vsubq_f32(v21[v18 + 1], v21[v18]), v19.f32[0])), v22), *v19.f32, 1))));
          v11 = vaddq_f32(v11, xmmword_2603429B0);
          v10 += 16;
        }

        while (16 * v6 != v10);
      }

      v9 = vaddq_f32(v9, xmmword_2603429C0);
      ++v4;
      *&v7 += v8;
    }

    while (v4 != v3);
  }

  return 0;
}

uint64_t HgcShapeSoftEdgeClrInPlace::GetDOD(HgcShapeSoftEdgeClrInPlace *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  v5 = *&a4.var2;
  v6 = *&a4.var0;
  v8 = HGRectMake4i(0xFFFFFFFF, 0xFFFFFFFF, 1u, 1u);
  v9 = HGRectGrow(v6, v5, v8);
  v11 = v10;
  HGTransform::HGTransform(v17);
  HGTransform::LoadMatrixf(v17, (*(this + 51) + 32));
  HGTransform::Invert2D(v17);
  v13 = HGTransformUtils::MinW(v12);
  *&v18.var0 = v11;
  DOD = HGTransformUtils::GetDOD(v17, v9, v18, 0.5, v13);
  v4 = HGRectUnion(0, 0, DOD, v15);
  HGTransform::~HGTransform(v17);
  return v4;
}

uint64_t HgcShapeSoftEdgeClrInPlace::GetROI(HgcShapeSoftEdgeClrInPlace *this, HGRenderer *a2, int a3, HGRect a4)
{
  v4 = 0;
  if (!a3)
  {
    v5 = *&a4.var2;
    v6 = *&a4.var0;
    HGTransform::HGTransform(v17);
    HGTransform::LoadMatrixf(v17, (*(this + 51) + 32));
    v9 = HGTransformUtils::MinW(v8);
    *&v18.var0 = v5;
    ROI = HGTransformUtils::GetROI(v17, v6, v18, 0.5, v9);
    v12 = HGRectUnion(0, 0, ROI, v11);
    v14 = v13;
    HGTransform::~HGTransform(v17);
    v15 = HGRectMake4i(0xFFFFFFFF, 0xFFFFFFFF, 1u, 1u);
    return HGRectGrow(v12, v14, v15);
  }

  return v4;
}

void HgcShapeSoftEdgeClrInPlace::HgcShapeSoftEdgeClrInPlace(HgcShapeSoftEdgeClrInPlace *this)
{
  HGNode3D::HGNode3D(this);
  *v1 = &unk_2872DF420;
  *(v1 + 416) = 1;
  operator new();
}

void HgcShapeSoftEdgeClrInPlace::~HgcShapeSoftEdgeClrInPlace(HgcShapeSoftEdgeClrInPlace *this)
{
  *this = &unk_2872DF420;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C408070C27FLL);
  }

  HGMipmapLevel::~HGMipmapLevel(this);
}

{
  HgcShapeSoftEdgeClrInPlace::~HgcShapeSoftEdgeClrInPlace(this);

  HGObject::operator delete(v1);
}

uint64_t HgcShapeSoftEdgeClrInPlace::SetParameter(HgcShapeSoftEdgeClrInPlace *this, uint64_t a2, float a3, float a4, float a5, float a6, char *a7)
{
  if (a2 > 1)
  {
    return 0xFFFFFFFFLL;
  }

  v7 = (*(this + 51) + 16 * a2);
  if (*v7 == a3 && v7[1] == a4 && v7[2] == a5 && v7[3] == a6)
  {
    return 0;
  }

  *v7 = a3;
  v7[1] = a4;
  v7[2] = a5;
  v7[3] = a6;
  v8 = 1;
  *(this + 104) = 1;
  HGNode::ClearBits(this, a2, a7);
  return v8;
}

uint64_t HgcShapeSoftEdgeClrInPlace::GetParameter(HgcShapeSoftEdgeClrInPlace *this, unsigned int a2, float *a3)
{
  if (a2 > 1)
  {
    return 0xFFFFFFFFLL;
  }

  result = 0;
  v5 = (*(this + 51) + 16 * a2);
  *a3 = *v5;
  a3[1] = v5[1];
  a3[2] = v5[2];
  a3[3] = v5[3];
  return result;
}

double HgcShapeSoftEdgeClrInPlace::GetOutput(HgcShapeSoftEdgeClrInPlace *this, HGRenderer *a2)
{
  if (*(this + 104))
  {
    v2 = *(this + 51);
    v3 = *(v2 + 112);
    *(v2 + 32) = *(v2 + 96);
    *(*(this + 51) + 48) = v3;
    *(*(this + 51) + 64) = xmmword_2603429D0;
    result = 0.0;
    *(*(this + 51) + 80) = xmmword_2603427D0;
    *(this + 104) = 0;
  }

  return result;
}

const char *HgcShapeGradientBlend::GetProgram(HgcShapeGradientBlend *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=00000002de\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]], \n    texture2d< half > hg_Texture1 [[ texture(1) ]], \n    sampler hg_Sampler1 [[ sampler(1) ]])\n{\n    half4 r0, r1;\n    FragmentOut output;\n\n    r0 = (half4) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1 = (half4) hg_Texture1.sample(hg_Sampler1, frag._texCoord1.xy);\n    output.color0 = float4(r0)*float4(r1);\n    return output;\n}\n//MD5=0df246b2:91c6b5d4:f02b9e9b:5bc3bb86\n//SIG=00400000:00000003:00000003:00000003:0000:0000:0002:0000:0000:0000:0006:0000:0002:02:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=00000002c1\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]], \n    texture2d< float > hg_Texture1 [[ texture(1) ]], \n    sampler hg_Sampler1 [[ sampler(1) ]])\n{\n    float4 r0, r1;\n    FragmentOut output;\n\n    r0 = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1 = hg_Texture1.sample(hg_Sampler1, frag._texCoord1.xy);\n    output.color0 = r0*r1;\n    return output;\n}\n//MD5=8c316191:1aca7ae1:745f6a82:ec814054\n//SIG=00000000:00000003:00000003:00000000:0000:0000:0002:0000:0000:0000:0006:0000:0002:02:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=000000023f\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nuniform defaultp sampler2D hg_Texture1;\nvarying highp vec4 hg_TexCoord0;\nvarying highp vec4 hg_TexCoord1;\nvoid main()\n{\n    defaultp vec4 r0, r1;\n\n    r0 = texture2D(hg_Texture0, hg_TexCoord0.xy);\n    r1 = texture2D(hg_Texture1, hg_TexCoord1.xy);\n    gl_FragColor = r0*r1;\n}\n//MD5=f3072827:20dc9050:204f7dc4:c2f25be5\n//SIG=00000000:00000003:00000003:00000000:0000:0000:0002:0000:0000:0000:0000:0000:0002:02:0:1:0\n";
  }
}

void sub_2603114E4(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344AF0;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_260311624(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_26031166C()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x260311664);
}

uint64_t HgcShapeGradientBlend::BindTexture(HgcShapeGradientBlend *this, HGHandler *a2, int a3)
{
  if (a3 == 1)
  {
    (*(*a2 + 72))(a2, 1, 0);
    (*(*a2 + 48))(a2, 0, 0);
    v4 = a2;
    v5 = 1;
  }

  else
  {
    if (a3)
    {
      return 0xFFFFFFFFLL;
    }

    (*(*a2 + 72))(a2, 0);
    (*(*a2 + 48))(a2, 0, 0);
    v4 = a2;
    v5 = 0;
  }

  HGHandler::TexCoord(v4, v5, 0, 0, 0);
  if (!(*(**(a2 + 18) + 128))(*(a2 + 18), 46))
  {
    (*(*a2 + 168))(a2);
  }

  return 0;
}

uint64_t HgcShapeGradientBlend::RenderTile(HgcShapeGradientBlend *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 12);
    v7 = 16 * *(a2 + 22);
    v8 = *(a2 + 10);
    v9 = 16 * *(a2 + 26);
    v10 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v11 = 0;
      }

      else
      {
        v11 = 0;
        v12 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v14 = vmulq_f32(*(v8 + v12 - 16), *(v6 + v12 - 16));
          v15 = vmulq_f32(*(v8 + v12), *(v6 + v12));
          v16 = vmulq_f32(*(v8 + v12 + 16), *(v6 + v12 + 16));
          v17 = (v5 + v12);
          v17[-2] = vmulq_f32(*(v8 + v12 - 32), *(v6 + v12 - 32));
          v17[-1] = v14;
          *v17 = v15;
          v17[1] = v16;
          v11 += 4;
          v12 += 64;
        }
      }

      if (v11 < v4)
      {
        do
        {
          *(v5 + 16 * v11) = vmulq_f32(*(v8 + 16 * v11), *(v6 + 16 * v11));
          ++v11;
        }

        while (v11 < v4);
      }

      ++v3;
      v8 += v7;
      v6 += v9;
      v5 += v10;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcShapeGradientBlend::GetDOD(HgcShapeGradientBlend *this, HGRenderer *a2, unsigned int a3, HGRect a4)
{
  if (a3 >= 2)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcShapeGradientBlend::GetROI(HgcShapeGradientBlend *this, HGRenderer *a2, unsigned int a3, HGRect a4)
{
  if (a3 >= 2)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcShapeGradientBlend::HgcShapeGradientBlend(HgcShapeGradientBlend *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872DF698;
  operator new();
}

void HgcShapeGradientBlend::~HgcShapeGradientBlend(HGNode *this)
{
  *this = &unk_2872DF698;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0xC400A2AC0F1);
  }

  HGNode::~HGNode(this);
}

{
  HgcShapeGradientBlend::~HgcShapeGradientBlend(this);

  HGObject::operator delete(v1);
}

PGContext *PGContextHelper::destroyPGContext(PGContext *this, const PGContext *a2)
{
  if (this)
  {
    PGContext::~PGContext(this);

    JUMPOUT(0x2666E9F00);
  }

  return this;
}

uint64_t (*createPGContextPtr@<X0>(const ProGL::ContextHandle *a1@<X0>, void *a2@<X8>))(ProGL::ContextHandle *this)
{
  result = ProGL::ContextHandle::operator void (ProGL::ContextHandle::*)(void)const(a1);
  if (v4)
  {
    v5 = (v4 & 1 | result) == 0;
  }

  else
  {
    v5 = 1;
  }

  v6 = v5;
  if (result || !v6)
  {
    operator new();
  }

  *a2 = 0;
  a2[1] = 0;
  return result;
}

void PGInitPGContext(void)
{
  {
    operator new();
  }
}

uint64_t PGGetPerThreadContext(void)
{
  {
    NSLog(&cfstr_Sperthreadcont.isa);
  }

  v1 = pthread_getspecific(*v0);
  if (!v1)
  {
    operator new();
  }

  return *v1;
}

void PGFindContext(EAGLContext *a1@<X0>, EAGLContext *a2@<X1>, void *a3@<X8>)
{
  if (a1)
  {
    ProGL::findContext(a1, a2, v4);
    createPGContextPtr(v4, a3);
    ProGL::ContextHandle::~ContextHandle(v4);
  }

  else
  {
    *a3 = 0;
    a3[1] = 0;
  }
}

void PGFindContext(const ProGL::GL *a1@<X0>, void *a2@<X8>)
{
  ProGL::GL::getPGLContextHandle(a1, v3);
  createPGContextPtr(v3, a2);
  ProGL::ContextHandle::~ContextHandle(v3);
}

void PGContext::~PGContext(PGContext *this)
{
  ProGL::ContextHandle::~ContextHandle((this + 16));
  v2 = *(this + 1);
  if (v2)
  {
    std::__shared_weak_count::__release_weak(v2);
  }
}

void PGSetCurrentContextSentry::PGSetCurrentContextSentry(PGSetCurrentContextSentry *this)
{
  v1 = ProGL::CurrentContextSentry::CurrentContextSentry(this);
  *(v1 + 2) = 0;
  *(v1 + 3) = 0;
}

void PGSetCurrentContextSentry::PGSetCurrentContextSentry(PGSetCurrentContextSentry *this, const PGContext *a2)
{
  if (a2)
  {
    v4 = *(a2 + 3);
    v5 = *(a2 + 2);
    v6 = v4;
    if (v4)
    {
      atomic_fetch_add_explicit((v4 + 8), 1uLL, memory_order_relaxed);
    }
  }

  else
  {
    v5 = 0;
    v6 = 0;
  }

  ProGL::CurrentContextSentry::CurrentContextSentry(this, &v5);
  ProGL::ContextHandle::~ContextHandle(&v5);
  if (a2)
  {
    std::shared_ptr<OZStyle>::shared_ptr[abi:ne200100]<OZStyle,0>(this + 2, a2);
  }

  else
  {
    *(this + 2) = 0;
    *(this + 3) = 0;
  }
}

void PGSetCurrentContextSentry::PGSetCurrentContextSentry(PGSetCurrentContextSentry *this, void *a2)
{
  v4 = *(*a2 + 24);
  v6[0] = *(*a2 + 16);
  v6[1] = v4;
  if (v4)
  {
    atomic_fetch_add_explicit((v4 + 8), 1uLL, memory_order_relaxed);
  }

  ProGL::CurrentContextSentry::CurrentContextSentry(this, v6);
  ProGL::ContextHandle::~ContextHandle(v6);
  v5 = a2[1];
  *(this + 2) = *a2;
  *(this + 3) = v5;
  if (v5)
  {
    atomic_fetch_add_explicit((v5 + 8), 1uLL, memory_order_relaxed);
  }
}

void PGSetCurrentContextSentry::~PGSetCurrentContextSentry(PGSetCurrentContextSentry *this)
{
  v2 = *(this + 3);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  ProGL::CurrentContextSentry::~CurrentContextSentry(this);
}

void PGPerThreadSetCurrentContextSentry::PGPerThreadSetCurrentContextSentry(PGPerThreadSetCurrentContextSentry *this)
{
  v2 = PGGetPerThreadContext();
  v3 = std::shared_ptr<OZStyle>::shared_ptr[abi:ne200100]<OZStyle,0>(this, v2);
  v5 = *v3;
  v4 = (v3 + 2);
  v6 = *(v5 + 24);
  v7[0] = *(v5 + 16);
  v7[1] = v6;
  if (v6)
  {
    atomic_fetch_add_explicit((v6 + 8), 1uLL, memory_order_relaxed);
  }

  ProGL::CurrentContextSentry::CurrentContextSentry(v4, v7);
  ProGL::ContextHandle::~ContextHandle(v7);
}

void sub_260311FB4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{
  ProGL::ContextHandle::~ContextHandle(&a9);
  v11 = *(v9 + 8);
  if (v11)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v11);
  }

  _Unwind_Resume(a1);
}

void PGPerThreadSetCurrentContextSentry::~PGPerThreadSetCurrentContextSentry(PGPerThreadSetCurrentContextSentry *this)
{
  ProGL::CurrentContextSentry::~CurrentContextSentry((this + 16));
  v2 = *(this + 1);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }
}

void PGGetCurrentPGContext(void *a1@<X8>)
{
  v2 = [MEMORY[0x277CD9388] currentContext];

  PGFindContext(v2, v3, a1);
}

void sub_2603120CC(void *a1)
{
  __cxa_begin_catch(a1);
  PGContextHelper::destroyPGContext(v1, v2);
  __cxa_rethrow();
}

uint64_t std::__shared_ptr_pointer<PGContext *,PGContextDeleter,std::allocator<PGContext>>::__get_deleter(uint64_t a1, uint64_t a2)
{
  {
    return a1;
  }

  else
  {
    return 0;
  }
}

uint64_t PCThreadSpecific<std::shared_ptr<PGContext>>::destroy(uint64_t result)
{
  if (result)
  {
    v1 = *(result + 8);
    if (v1)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v1);
    }

    JUMPOUT(0x2666E9F00);
  }

  return result;
}

ProGL::Private::TextureImpl *PGCreateTextureFromPGLTexture@<X0>(void (**a1)(_anonymous_namespace_ **this)@<X0>, void *a2@<X8>)
{
  result = ProGL::TextureHandle::operator void (ProGL::TextureHandle::*)(void)(a1);
  if (v5)
  {
    v6 = (v5 & 1 | result) == 0;
  }

  else
  {
    v6 = 1;
  }

  v7 = v6;
  *a2 = 0;
  a2[1] = 0;
  if (result || (v7 & 1) == 0)
  {
    result = ProGL::TextureHandle::getTarget(a1);
    if (result == 3553)
    {
      PGTextureHelper::new2DTexture(a1, v8);
    }
  }

  return result;
}

void PGTexture::PGTexture(PGTexture *this, ProGL::GL *a2, int a3, int a4, CGColorSpace **a5, int a6, _anonymous_namespace_ *a7, _anonymous_namespace_ *a8)
{
  if (a3 >= 0x1000)
  {
    v12 = 4096;
  }

  else
  {
    v12 = a3;
  }

  if (a3 < 1)
  {
    v13 = 1;
  }

  else
  {
    v13 = v12;
  }

  if (a4 >= 0x1000)
  {
    v14 = 4096;
  }

  else
  {
    v14 = a4;
  }

  if (a4 < 1)
  {
    v15 = 1;
  }

  else
  {
    v15 = v14;
  }

  PCImage::PCImage(this, v13, v15, v16, v17, a5);
  *this = &unk_2872DF960;
  ProGL::createTexture(a2, v18);
}

void sub_2603124D8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, CGColorSpace *a9)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a9);
  v11 = *(v9 + 72);
  if (v11)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v11);
  }

  PCImage::~PCImage(v9);
  _Unwind_Resume(a1);
}

uint64_t anonymous namespace::glTypeToDepth(_anonymous_namespace_ *this)
{
  if ((this - 34234) >= 2)
  {
    v1 = 1;
  }

  else
  {
    v1 = 8;
  }

  if (((1 << this) & 3) != 0)
  {
    v2 = 8;
  }

  else
  {
    v2 = 16;
  }

  if (((1 << this) & 0x70) != 0)
  {
    v2 = 32;
  }

  if ((this - 5120) <= 6)
  {
    return v2;
  }

  else
  {
    return v1;
  }
}

uint64_t anonymous namespace::glFormatToNumberOfChannels(_anonymous_namespace_ *this)
{
  v1 = this;
  result = 1;
  if (v1 > 6408)
  {
    if (v1 == 6409)
    {
      return result;
    }

    if (v1 == 6410)
    {
      return 2;
    }

    return 4;
  }

  if (v1 == 6406)
  {
    return result;
  }

  if (v1 != 6407)
  {
    return 4;
  }

  return 3;
}

void PGTexture::PGTexture(PGTexture *this, ProGL::Private::TextureImpl **a2)
{
  Width = ProGL::TextureHandle::getWidth(a2);
  Height = ProGL::TextureHandle::getHeight(a2);
  ActualInternalFormat = ProGL::TextureHandle::getActualInternalFormat(a2);
  ProGL::TextureHandle::getColorSpace(a2, v12);
  PCImage::PCImage(this, Width, Height, 32, v7, v12);
  PCCFRef<CGColorSpace *>::~PCCFRef(v12);
  v8 = &unk_2872DF960;
  *this = &unk_2872DF960;
  *(this + 8) = *a2;
  v9 = a2[1];
  *(this + 9) = v9;
  if (v9)
  {
    atomic_fetch_add_explicit(v9 + 1, 1uLL, memory_order_relaxed);
    v8 = *this;
  }

  *(this + 6) = 2;
  v10 = v8[2](this);
  v11 = (*(*this + 24))(this);
  v12[0] = 0;
  v12[1] = 0;
  *&v12[2] = v10;
  *&v12[3] = v11;
  ProGL::TextureHandle::setTextureCoords(this + 8, v12);
  PCImage::getColorSpace(this, v12);
  ProGL::TextureHandle::setColorSpace(this + 8, v12);
  PCCFRef<CGColorSpace *>::~PCCFRef(v12);
}

void sub_260312740(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, CGColorSpace *a9)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a9);
  v11 = *(v9 + 72);
  if (v11)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v11);
  }

  PCImage::~PCImage(v9);
  _Unwind_Resume(a1);
}

void PGTexture::~PGTexture(PGTexture *this)
{
  *this = &unk_2872DF960;
  v2 = *(this + 9);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  PCImage::~PCImage(this);
}

ProGL::Private::TextureImpl *PGTexture::getSize(PGTexture *this)
{
  v1 = *(this + 9);
  v4 = *(this + 8);
  v5 = v1;
  if (v1)
  {
    atomic_fetch_add_explicit(&v1->__shared_owners_, 1uLL, memory_order_relaxed);
  }

  Size = ProGL::TextureHandle::getSize(&v4);
  if (v5)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v5);
  }

  return Size;
}

void sub_260312838(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t PGTexture::getPGLTexture@<X0>(uint64_t this@<X0>, void *a2@<X8>)
{
  v2 = *(this + 72);
  *a2 = *(this + 64);
  a2[1] = v2;
  if (v2)
  {
    atomic_fetch_add_explicit((v2 + 8), 1uLL, memory_order_relaxed);
  }

  return this;
}

uint64_t PGTexture::bind(ProGL::Private::TextureImpl **this)
{
  ProGL::GL::GL(v4);
  Target = ProGL::TextureHandle::getTarget(this + 8);
  ProGL::TextureHandle::bind(this + 8, v4, Target);
  ProGL::GL::~GL(v4);
  return 1;
}

void sub_2603128C0(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  ProGL::GL::~GL(va);
  _Unwind_Resume(a1);
}

uint64_t PGTexture::unbind(OZChannelBase **this)
{
  ProGL::GL::GL(v3);
  ProGL::TextureHandle::unbind(this + 8, v3);
  ProGL::GL::~GL(v3);
  return 1;
}

void sub_26031291C(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  ProGL::GL::~GL(va);
  _Unwind_Resume(a1);
}

uint64_t PGTexture::enable(ProGL::Private::TextureImpl **this)
{
  Target = ProGL::TextureHandle::getTarget(this + 8);
  glEnable(Target);
  return 1;
}

uint64_t PGTexture::disable(OZChannelBase **this)
{
  ProGL::GL::GL(v3);
  PGTexture::disable(this, v3);
  ProGL::GL::~GL(v3);
  return 1;
}

void sub_26031299C(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  ProGL::GL::~GL(va);
  _Unwind_Resume(a1);
}

uint64_t PGTexture::disable(OZChannelBase **this, ProGL::GL *a2)
{
  if (ProGL::TextureHandle::isBound(this + 8))
  {
    ProGL::TextureHandle::unbind(this + 8, a2);
  }

  else
  {
    Target = ProGL::TextureHandle::getTarget(this + 8);
    glBindTexture(Target, 0);
  }

  return 1;
}

void PGTexture::setParameteri(OZChannelBase **this, signed int a2, GLint a3)
{
  ProGL::GL::GL(v6);
  ProGL::TextureHandle::texParameter(this + 8, v6, a2, a3);
  ProGL::GL::~GL(v6);
}

void sub_260312A60(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  ProGL::GL::~GL(va);
  _Unwind_Resume(a1);
}

double PGTexture::setTexCoords(uint64_t a1, float32x2_t *a2)
{
  v2 = vcvtq_f64_f32(a2[1]);
  v4[0] = vcvtq_f64_f32(*a2);
  v4[1] = v2;
  *&result = ProGL::TextureHandle::setTextureCoords((a1 + 64), v4).n128_u64[0];
  return result;
}

float64_t PGTexture::getTexCoords(uint64_t a1, float32x4_t *a2)
{
  ProGL::TextureHandle::getTextureCoords((a1 + 64), &v4);
  result = v5.f64[0];
  *a2 = vcvt_hight_f32_f64(vcvt_f32_f64(v4), v5);
  return result;
}

double PGTexture::getTexCoords(PGTexture *this, double *a2, double *a3, double *a4, double *a5)
{
  ProGL::TextureHandle::getTextureCoords((this + 64), &v13);
  v9 = v13;
  v10 = v14;
  v11 = v15;
  *a2 = v13.n128_f64[0];
  *a3 = v9.n128_f64[0] + v10;
  *a4 = v9.n128_f64[1];
  result = v9.n128_f64[1] + v11;
  *a5 = v9.n128_f64[1] + v11;
  return result;
}

void PGTexture::getContext(PGTexture *this@<X0>, void *a2@<X8>)
{
  ProGL::TextureHandle::getContext((this + 64), v3);
  ProGL::GL::GL(v4, v3);
  PGFindContext(v4, a2);
  ProGL::GL::~GL(v4);
  ProGL::ContextHandle::~ContextHandle(v3);
}

void sub_260312BB4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va1, a2);
  va_start(va, a2);
  v3 = va_arg(va1, void);
  v5 = va_arg(va1, void);
  ProGL::GL::~GL(va1);
  ProGL::ContextHandle::~ContextHandle(va);
  _Unwind_Resume(a1);
}

uint64_t PGTexture::getAttributes(uint64_t a1, uint64_t a2)
{
  PCImage::getAttributes(a1, a2);
  *(a2 + 32) = ProGL::TextureHandle::getTarget((a1 + 64));
  ActualInternalFormat = ProGL::TextureHandle::getActualInternalFormat((a1 + 64));
  result = PCPixelFormat::getPixelFormat(ActualInternalFormat, 5125);
  *(a2 + 20) = result;
  return result;
}

CGColorSpace **PGTexture::setColorSpace(CGColorSpace **this, CGColorSpace **a2)
{
  PCImage::setColorSpace(this, a2);
  PCImage::getColorSpace(this, &v4);
  ProGL::TextureHandle::setColorSpace(this + 8, &v4);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v4);
}

void sub_260312CCC(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void PGTexture2D::PGTexture2D(PGTexture2D *this, ProGL::Private::TextureImpl **a2)
{
  PGTexture::PGTexture(this, a2);
  *v4 = &unk_2872DF9C0;
  Width = PCImage::getWidth(v4);
  *(this + 20) = Width + 2 * ProGL::TextureHandle::getBorder(a2);
  v6 = (*(*this + 24))(this);
  *(this + 21) = v6 + 2 * ProGL::TextureHandle::getBorder(a2);
  *(this + 11) = 0;
  *(this + 12) = 0;
  ProGL::GL::GL(v10);
  v7 = *(this + 9);
  v8 = *(this + 8);
  v9 = v7;
  if (v7)
  {
    atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
  }

  ProGL::TextureHandle::bind(&v8, v10, 0xDE1u);
  PGTexture::disable(this, v10);
  if (v9)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v9);
  }

  ProGL::GL::~GL(v10);
}

void sub_260312F88(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char a12)
{
  v14 = *(v12 + 12);
  if (v14)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v14);
  }

  PGTexture::~PGTexture(v12);
  _Unwind_Resume(a1);
}

void PGTexture2D::~PGTexture2D(PGTexture2D *this)
{
  *this = &unk_2872DF9C0;
  v2 = *(this + 12);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  PGTexture::~PGTexture(this);
}

{
  PGTexture2D::~PGTexture2D(this);

  JUMPOUT(0x2666E9F00);
}

CGColorSpace **PGTexture2D::setBitmapRef(ProGL::Private::TextureImpl **a1, PCImage **a2)
{
  PGTexture::bind(a1);
  Target = ProGL::TextureHandle::getTarget(a1 + 8);
  Border = ProGL::TextureHandle::getBorder(a1 + 8);
  v6 = ProGL::TextureHandle::getBorder(a1 + 8);
  v7 = (*(*a1 + 2))(a1);
  v8 = (*(*a1 + 3))(a1);
  ActualInternalFormat = ProGL::TextureHandle::getActualInternalFormat(a1 + 8);
  pixels = (*(**(*a2 + 8) + 16))(*(*a2 + 8));
  glTexSubImage2D(Target, 0, Border, v6, v7, v8, ActualInternalFormat, 0x1405u, pixels);
  glFlush();
  PGTexture::unbind(a1);
  PCImage::getColorSpace(*a2, &v12);
  (*(*a1 + 7))(a1, &v12);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v12);
}

void sub_2603131D4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void PGTexture2D::setDataPtr(ProGL::Private::TextureImpl **this, const void *a2, GLenum a3, GLenum a4)
{
  PGTexture::bind(this);
  Target = ProGL::TextureHandle::getTarget(this + 8);
  Border = ProGL::TextureHandle::getBorder(this + 8);
  v10 = ProGL::TextureHandle::getBorder(this + 8);
  v11 = (*(*this + 2))(this);
  v12 = (*(*this + 3))(this);
  glTexSubImage2D(Target, 0, Border, v10, v11, v12, a3, a4, a2);
  glFlush();
  PGTexture::unbind(this);
  v13 = this[12];
  this[11] = 0;
  this[12] = 0;
  if (v13)
  {

    std::__shared_weak_count::__release_shared[abi:ne200100](v13);
  }
}

void PGTexture2D::setDataPtr(ProGL::Private::TextureImpl **this, const void *a2, int a3, int a4, GLsizei a5, GLsizei a6, GLenum a7, GLenum a8)
{
  PGTexture::bind(this);
  Target = ProGL::TextureHandle::getTarget(this + 8);
  Border = ProGL::TextureHandle::getBorder(this + 8);
  v18 = ProGL::TextureHandle::getBorder(this + 8);
  glTexSubImage2D(Target, 0, Border + a3, v18 + a4, a5, a6, a7, a8, a2);
  glFlush();
  PGTexture::unbind(this);
  v19 = this[12];
  this[11] = 0;
  this[12] = 0;
  if (v19)
  {

    std::__shared_weak_count::__release_shared[abi:ne200100](v19);
  }
}

CGColorSpace **PGTexture2D::dumpImage(ProGL::Private::TextureImpl **this)
{
  ProGL::TextureHandle::getTarget(this + 8);
  ProGL::TextureHandle::getName(this + 8);
  (*(*this + 2))(this);
  (*(*this + 3))(this);
  (*(*this + 6))(this);
  PCImage::getColorSpace(this, &v5);
  PGTexture::getContext(this, &v3);
  PCColorSpaceHandle::getCGColorSpace(&v5);
  if (v4)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v4);
  }

  return PCCFRef<CGColorSpace *>::~PCCFRef(&v5);
}

void sub_2603134F8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, std::__shared_weak_count *a4, ...)
{
  va_start(va, a4);
  if (a4)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a4);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  _Unwind_Resume(a1);
}

void *PGTexture2D::toTexture@<X0>(void *result@<X0>, void *a2@<X8>)
{
  v3 = *result;
  if (!*result)
  {
LABEL_10:
    *a2 = 0;
    a2[1] = 0;
    return result;
  }

  v4 = result;
  if (!result)
  {
    if (result)
    {
      v6 = result;
      v7 = v4[1];
      if (v7)
      {
        atomic_fetch_add_explicit((v7 + 8), 1uLL, memory_order_relaxed);
      }

      v8 = (*(*result[8] + 48))(result[8]);
      GLDataFormat = PCPixelFormat::getGLDataFormat(v8);
      GLDataType = PCPixelFormat::getGLDataType(v8);
      PGPerThreadSetCurrentContextSentry::PGPerThreadSetCurrentContextSentry(v15);
      v11 = (*(**v4 + 16))();
      v12 = (*(**v4 + 24))();
      PCImage::getColorSpace(*v4, &v14);
      v13 = (*(*v6[8] + 16))(v6[8]);
      PGMake2DTexture(v11, v12, &v14, 0, GLDataFormat, GLDataType, v13);
    }

    goto LABEL_10;
  }

  v5 = v4[1];
  if (v5)
  {
    atomic_fetch_add_explicit((v5 + 8), 1uLL, memory_order_relaxed);
  }

  *a2 = result;
  a2[1] = v5;
  return result;
}

void sub_26031372C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, ...)
{
  va_start(va, a3);
  PGPerThreadSetCurrentContextSentry::~PGPerThreadSetCurrentContextSentry(va);
  if (v3)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }

  _Unwind_Resume(a1);
}

void PGMake2DTexture(ProGL::GL *a1, uint64_t a2, const PCColorSpaceHandle *a3, uint64_t a4, int a5, unsigned int a6, const PCColorSpaceHandle *a7)
{
  v11 = a3;
  ProGL::GL::GL(v15);
  PGTextureHelper::new2DTexture(v15, a1, a2, a4, a5, 0, a5, a6, v11, a7, v14);
}

void sub_26031380C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  ProGL::GL::~GL(va);
  _Unwind_Resume(a1);
}

void PGInitTextures(void)
{
  {
    operator new();
  }
}

void sub_26031389C(_Unwind_Exception *a1)
{
  PCSingleton::~PCSingleton(v2);
  MEMORY[0x2666E9F00](v2, v1);
  _Unwind_Resume(a1);
}

uint64_t PGCreateImage@<X0>(const PCImageAttributes *a1@<X0>, void *a2@<X8>)
{
  *a2 = 0;
  a2[1] = 0;
  if (*a1 == 2)
  {
    v3 = *(a1 + 8);
    if (!v3)
    {
      v3 = PGGetPerThreadContext();
    }

    PGSetCurrentContextSentry::PGSetCurrentContextSentry(v7, v3);
    GLDataFormat = PCPixelFormat::getGLDataFormat(*(a1 + 5));
    GLDataType = PCPixelFormat::getGLDataType(*(a1 + 5));
    if (*(a1 + 8) == 3553)
    {
      PGMake2DTexture(*(a1 + 1), *(a1 + 2), (a1 + 24), 0, GLDataFormat, GLDataType, *(a1 + 6));
    }

    PGSetCurrentContextSentry::~PGSetCurrentContextSentry(v7);
  }

  else if (*a1 == 1)
  {
    operator new();
  }

  return PCImage::setIsPremultiplied(0, *(a1 + 40));
}

void sub_260313A54(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, ...)
{
  va_start(va, a3);
  PGSetCurrentContextSentry::~PGSetCurrentContextSentry(va);
  _Unwind_Resume(a1);
}

void PGCreatePooledImage(const PCImageAttributes *a1@<X0>, void *a2@<X8>)
{
  if (*a1 == 1)
  {

    PGCreateImage(a1, a2);
  }

  else
  {
    v4 = *(a1 + 8);
    v5 = *(a1 + 1);
    v6 = *(a1 + 2);
    GLInternalFormat = PCPixelFormat::getGLInternalFormat(*(a1 + 5));
    ProGL::getCurrentContext(&v12);
    ProGL::TextureDescription::TextureDescription(v14, v4, v5, v6, GLInternalFormat, &v12);
    ProGL::ContextHandle::~ContextHandle(&v12);
    ProGL::findTextureInPool(v14, &v12);
    v8 = ProGL::TextureHandle::operator void (ProGL::TextureHandle::*)(void)(&v12);
    if (v9)
    {
      v10 = (v9 & 1 | v8) == 0;
    }

    else
    {
      v10 = 1;
    }

    v11 = !v10;
    if (v8 || v11)
    {
      if (v15 == 3553)
      {
        PGTextureHelper::new2DTexture(&v12, v9);
      }

      if (operator!=(a1 + 3))
      {
        (*(MEMORY[0] + 56))(0, a1 + 24);
      }

      PCImage::setIsPremultiplied(0, *(a1 + 40));
      *a2 = 0;
      a2[1] = 0;
    }

    else
    {
      PGCreateImage(a1, a2);
    }

    if (v13)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v13);
    }

    ProGL::ContextHandle::~ContextHandle(v14);
  }
}

void sub_260313C54(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, std::__shared_weak_count *a5, ...)
{
  va_start(va, a5);
  if (a5)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a5);
  }

  ProGL::ContextHandle::~ContextHandle(va);
  _Unwind_Resume(a1);
}

void anonymous namespace::TextureSingleton::~TextureSingleton(_anonymous_namespace_::TextureSingleton *this)
{
  *this = &unk_2872DFA50;
  PGLCleanup(this);

  PCSingleton::~PCSingleton(this);
}

{

  JUMPOUT(0x2666E9F00);
}

void sub_260313DB0(void *a1)
{
  __cxa_begin_catch(a1);
  if (v1)
  {
    std::shared_ptr<PCBitmap>::shared_ptr[abi:ne200100]<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)10>>>,0>(v1);
  }

  __cxa_rethrow();
}

uint64_t std::__shared_ptr_pointer<PGTexture2D *,PGTextureHelper,std::allocator<PGTexture2D>>::__on_zero_shared(uint64_t a1)
{
  result = *(a1 + 24);
  if (result)
  {
    return (*(*result + 8))();
  }

  return result;
}

uint64_t std::__shared_ptr_pointer<PGTexture2D *,PGTextureHelper,std::allocator<PGTexture2D>>::__get_deleter(uint64_t a1, uint64_t a2)
{
  {
    return a1;
  }

  else
  {
    return 0;
  }
}

float64x2_t PGImaging::gaussianBlurRect(char a1, float64x2_t *a2, float64x2_t *a3, float64x2_t result)
{
  v4 = a2[1];
  *a3 = *a2;
  a3[1] = v4;
  if ((a1 & 1) == 0)
  {
    v5 = vcvtpd_s64_f64(result.f64[0] + result.f64[0]);
    result = vsubq_f64(a3[1], vdupq_lane_s64(COERCE__INT64(-v5 - v5), 0));
    *a3 = vsubq_f64(*a3, vdupq_lane_s64(COERCE__INT64(v5), 0));
    a3[1] = result;
  }

  return result;
}

float64x2_t PGImaging::outlineRect(float64x2_t *a1, float64x2_t *a2, double a3)
{
  *&v3 = a3 + a3;
  result = vsubq_f64(*a1, vdupq_lane_s64(*&a3, 0));
  v5 = vaddq_f64(vdupq_lane_s64(v3, 0), a1[1]);
  *a2 = result;
  a2[1] = v5;
  return result;
}

void PGProgram::PGProgram(PGProgram *this, int a2, const char *a3)
{
  *this = &unk_2872DFAE8;
  *(this + 2) = a2;
  *(this + 3) = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
  *(this + 16) = 1;
}

void PGProgram::~PGProgram(PGProgram *this)
{
  *this = &unk_2872DFAE8;
  if (*(this + 3))
  {
    v2 = *(this + 4);
    v4 = *(this + 3);
    v5 = v2;
    if (v2)
    {
      atomic_fetch_add_explicit(&v2->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    PGSetCurrentContextSentry::PGSetCurrentContextSentry(v6, &v4);
    if (v5)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v5);
    }

    glDeleteProgram(*(this + 3));
    PGSetCurrentContextSentry::~PGSetCurrentContextSentry(v6);
  }

  v3 = *(this + 4);
  if (v3)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }
}

{
  PGProgram::~PGProgram(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t anonymous namespace::PGInfoImpl::instance(_anonymous_namespace_::PGInfoImpl *this)
{
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
  }
}

uint64_t PGInfo::getMaxTextureSize(PGInfo *this, int a2)
{
  v3 = this;
  v5 = 1;
  if (a2 != 16)
  {
    v5 = 2;
  }

  if (a2 == 8)
  {
    v5 = 0;
  }

  return *(*(v4 + 8) + 48 * v3 + 8 * v5 + 24);
}

void sub_260314248(_Unwind_Exception *a1)
{
  v5 = *v3;
  if (*v3)
  {
    *(v1 + 2) = v5;
    operator delete(v5);
  }

  PCSingleton::~PCSingleton(v1);
  MEMORY[0x2666E9F00](v1, v2);
  _Unwind_Resume(a1);
}

void anonymous namespace::PGInfoImpl::~PGInfoImpl(_anonymous_namespace_::PGInfoImpl *this)
{
  *this = &unk_2872DFB48;
  PGLCleanup(this);
  v2 = *(this + 1);
  if (v2)
  {
    *(this + 2) = v2;
    operator delete(v2);
  }

  PCSingleton::~PCSingleton(this);
}

{

  JUMPOUT(0x2666E9F00);
}

uint64_t PGHelium::Instance(PGHelium *this)
{
  if (PGHelium::Instance(void)::once != -1)
  {
    PGHelium::Instance();
  }

  return PGHelium::_instance;
}

uint64_t PGHelium::purge(PGHelium *this)
{
  if (PGHelium::_instance)
  {
    return PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::clear(*(PGHelium::_instance + 8));
  }

  return result;
}

void PGHelium::PGHelium(PGHelium *this)
{
  PCSingleton::PCSingleton(this, 0);
  OZChannelBase::setRangeName(v2, v3);
  *this = &unk_2872DFBA0;
  operator new();
}

void sub_2603144B4(_Unwind_Exception *a1)
{
  PCCache<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::~PCCache(v2);
  PCSingleton::~PCSingleton(v1);
  _Unwind_Resume(a1);
}

void PGHelium::~PGHelium(PGHelium *this)
{
  *this = &unk_2872DFBA0;
  PGHelium::_instance = 0;
  PCCache<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::~PCCache(this + 1);

  PCSingleton::~PCSingleton(this);
}

{
  *this = &unk_2872DFBA0;
  PGHelium::_instance = 0;
  PCCache<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::~PCCache(this + 1);
  PCSingleton::~PCSingleton(this);

  JUMPOUT(0x2666E9F00);
}

const void *PGHelium::acquireRenderer@<X0>(void *a1@<X1>, void *a2@<X8>)
{
  result = *a1;
  if (*(*a1 + 8))
  {
    {
      v11 = a1[1];
      if (v11)
      {
        atomic_fetch_add_explicit((v11 + 8), 1uLL, memory_order_relaxed);
      }
    }

    PCPrint("File %s, line %d should not have been reached:\n\t", v4, v5, v6, v7, v8, v9, v10, "/Library/Caches/com.apple.xbs/Sources/MotioniOS/ProGraphics/PGHelium.cpp");
    pcAbortImpl();
  }

  *a2 = 0;
  a2[1] = 0;
  return result;
}

void sub_2603146C8(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v1);
  }

  _Unwind_Resume(exception_object);
}

uint64_t PGHelium::convertPCMatrix44@<X0>(__int128 *a1@<X0>, HGTransform **a2@<X8>)
{
  v4 = HGObject::operator new(0x90uLL);
  HGTransform::HGTransform(v4);
  v5 = a1[5];
  v19 = a1[4];
  v20 = v5;
  v6 = a1[7];
  v21 = a1[6];
  v22 = v6;
  v7 = a1[1];
  v14 = *a1;
  v15 = v7;
  v8 = a1[3];
  v16 = a1[2];
  v9 = *(&v14 + 1);
  v10 = v15;
  v11 = *(&v19 + 1);
  *(&v14 + 1) = v16;
  *&v15 = v19;
  v12 = *(&v20 + 1);
  *(&v15 + 1) = v21;
  *&v16 = v9;
  *&v19 = v10;
  *(&v19 + 1) = v8;
  v17 = v11;
  v18 = *(&v21 + 1);
  *(&v20 + 1) = v22;
  *&v21 = *(&v10 + 1);
  *a2 = v4;
  *(&v21 + 1) = *(&v8 + 1);
  *&v22 = v12;
  return (*(*v4 + 72))(v4, &v14);
}

double PGHelium::convertHGTransform@<D0>(PGHelium *this@<X0>, const HGTransform *a2@<X1>, uint64_t a3@<X8>)
{
  v4 = (*(*this + 272))(this, a2);
  v5 = 0;
  *(a3 + 120) = 0x3FF0000000000000;
  *(a3 + 80) = 0x3FF0000000000000;
  *(a3 + 40) = 0x3FF0000000000000;
  *a3 = 0x3FF0000000000000;
  *(a3 + 8) = 0u;
  *(a3 + 24) = 0u;
  *(a3 + 48) = 0u;
  *(a3 + 64) = 0u;
  *(a3 + 88) = 0u;
  *(a3 + 104) = 0u;
  do
  {
    result = *(v4 + 8 * v5);
    *(a3 + 32 * (v5 & 3) + 8 * (v5 >> 2)) = result;
    ++v5;
  }

  while (v5 != 16);
  return result;
}

uint64_t PGHelium::makeFormat(PGHelium *this, int a2, int a3, int a4)
{
  if (a2 < 16 && a4)
  {
    exception = __cxa_allocate_exception(0x40uLL);
    PCString::PCString(&v13, "floating-point format must be at least 16 bits");
    PCException::PCException(exception, &v13);
    *exception = &unk_2872DE188;
  }

  if (a2 > 16 && (a4 & 1) == 0)
  {
    v11 = __cxa_allocate_exception(0x40uLL);
    PCString::PCString(&v13, "integer format must be no more than 16 bits");
    PCException::PCException(v11, &v13);
    *v11 = &unk_2872DE188;
  }

  if (this > 2)
  {
    if (this == 3)
    {
      switch(a2)
      {
        case 8:
          return 17;
        case 32:
          return 21;
        case 16:
          v4 = a4 == 0;
          v5 = 19;
LABEL_26:
          if (v4)
          {
            return v5;
          }

          else
          {
            return v5 + 1;
          }
      }

LABEL_43:
      v12 = __cxa_allocate_exception(0x40uLL);
      PCString::PCString(&v13, "format not supported");
      PCException::PCException(v12, &v13);
      *v12 = &unk_2872DE188;
    }

    if (this != 4)
    {
      goto LABEL_43;
    }

    switch(a2)
    {
      case 32:
        return 28;
      case 16:
        v6 = a4 == 0;
        v7 = 25;
        v8 = 27;
        break;
      case 8:
        v6 = a3 == 0;
        v7 = 24;
        v8 = 22;
        break;
      default:
        goto LABEL_43;
    }
  }

  else
  {
    if (this != 1)
    {
      if (this == 2)
      {
        switch(a2)
        {
          case 8:
            return 10;
          case 32:
            return 13;
          case 16:
            v4 = a4 == 0;
            v5 = 11;
            goto LABEL_26;
        }
      }

      goto LABEL_43;
    }

    if (a2 == 8)
    {
      return 1;
    }

    if (a2 == 32)
    {
      return 7;
    }

    if (a2 != 16)
    {
      goto LABEL_43;
    }

    v6 = a4 == 0;
    v7 = 3;
    v8 = 5;
  }

  if (v6)
  {
    return v7;
  }

  else
  {
    return v8;
  }
}

uint64_t PGHelium::makeFormat(int a1)
{
  if ((a1 - 1) > 0x10)
  {
    return 0;
  }

  else
  {
    return dword_260858974[a1 - 1];
  }
}

uint64_t PGHelium::createBitmapNode@<X0>(uint64_t a1@<X0>, unsigned int *a2@<X1>, int a3@<W2>, unsigned int *a4@<X3>, HGBitmapLoader **a5@<X8>)
{
  if (!*a1)
  {
    exception = __cxa_allocate_exception(0x40uLL);
    PCString::PCString(v44, "null img");
    PCException::PCException(exception, v44);
    *exception = &unk_2872DE188;
  }

  PCDynamicCast<PCBitmap,PCImage>(a1, v44);
  PCDynamicCast<PGTexture,PCImage>(a1, &v42);
  v10 = (*(**a1 + 16))();
  v11 = (*(**a1 + 24))();
  v13 = *(*a1 + 36);
  v12 = *(*a1 + 40);
  LOBYTE(v14) = v44[0].var0;
  if (v44[0].var0)
  {
    v15 = (*(*v44[0].var0[2].isa + 48))(v44[0].var0[2].isa);
    if (v15 >= 0x12)
    {
      LOBYTE(v14) = 0;
    }

    else
    {
      v14 = 0x20018u >> v15;
    }
  }

  else if (v42)
  {
    goto LABEL_10;
  }

  if (v44[0].var0)
  {
    v16 = (*(*v44[0].var0[2].isa + 48))(v44[0].var0[2].isa);
    Format = PGHelium::makeFormat(v16);
    goto LABEL_11;
  }

LABEL_10:
  Format = PGHelium::makeFormat(v12, v13, v14 & 1, v13 > 8);
LABEL_11:
  v18 = Format;
  v19 = *a2;
  if (!a3)
  {
    v19 -= v10 / 2;
    v20 = a2[1] - v11 / 2;
    if (!a4)
    {
      goto LABEL_16;
    }

    goto LABEL_15;
  }

  v20 = a2[1];
  if (a4)
  {
LABEL_15:
    *a4 = v19;
    a4[1] = v20;
    a4[2] = v10;
    a4[3] = v11;
  }

LABEL_16:
  v21 = HGRectMake4i(v19, v20, v19 + v10, v20 + v11);
  v23 = v22;
  var0 = v44[0].var0;
  if (!v44[0].var0)
  {
    (*(**a1 + 72))(&v41);
    v25 = v41;
    v41 = 0uLL;
    v26 = v44[1].var0;
    *&v44[0].var0 = v25;
    if (v26)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v26);
      if (*(&v41 + 1))
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](*(&v41 + 1));
      }
    }

    var0 = v44[0].var0;
  }

  Representation = PCBitmap::getRepresentation(var0);
  {
    FactoryForSerialization = OZFactoryBase::getFactoryForSerialization(v28);
    v30 = FactoryForSerialization;
    if (FactoryForSerialization)
    {
      (*(*FactoryForSerialization + 16))(FactoryForSerialization);
    }

    *(v30 + 20) = v21;
    *(v30 + 28) = v23;
    *(v30 + 36) = v21;
    *(v30 + 44) = v23;
    (*(*v30 + 16))(v30);
    (*(*v30 + 24))(v30);
  }

  else
  {
    v31 = (*(*v44[0].var0[2].isa + 16))(v44[0].var0[2].isa);
    BytesPerRow = PCBitmap::getBytesPerRow(v44[0].var0);
    v33 = HGObject::operator new(0x20uLL);
    v34 = v33;
    v36 = v44[0].var0;
    v35 = v44[1].var0;
    if (v44[1].var0)
    {
      atomic_fetch_add_explicit(&v44[1].var0->info, 1uLL, memory_order_relaxed);
    }

    HGObject::HGObject(v33);
    *v34 = &unk_287296578;
    *(v34 + 2) = v36;
    *(v34 + 3) = v35;
    if (v35)
    {
      atomic_fetch_add_explicit(&v35->__shared_owners_, 1uLL, memory_order_relaxed);
      std::__shared_weak_count::__release_shared[abi:ne200100](v35);
    }

    v30 = HGObject::operator new(0x80uLL);
    HGBitmap::HGBitmap(v30, v21, v23, v18, v31, BytesPerRow);
    HGBitmap::SetStorage(v30, v34);
    *(v30 + 9) = PCBitmap::getAllocationSize(v44[0].var0);
    (*(*v30 + 16))(v30);
    (*(*v30 + 24))(v30);
    (*(*v34 + 24))(v34);
  }

  if (v43)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v43);
  }

  if (v44[1].var0)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v44[1].var0);
  }

  v37 = HGObject::operator new(0x80uLL);
  *&v45.var0 = v21;
  *&v45.var2 = v23;
  HGTexture::HGTexture(v37, v45, v30);
  v38 = HGObject::operator new(0x1F0uLL);
  HGBitmapLoader::HGBitmapLoader(v38, v37);
  *a5 = v38;
  if (v37)
  {
    (*(*v37 + 24))(v37);
  }

  return (*(*v30 + 24))(v30);
}

void sub_2603150EC(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12, PCString a13, std::__shared_weak_count *a14)
{
  if (a12)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a12);
  }

  if (a14)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a14);
  }

  _Unwind_Resume(exception_object);
}

void sub_260315270()
{
  if (v0)
  {
    JUMPOUT(0x260315280);
  }

  JUMPOUT(0x2603152A0);
}

void PGHelium::createTextureNode(uint64_t a1@<X0>, uint64_t a2@<X1>, unsigned int *a3@<X2>, int a4@<W3>, unsigned int *a5@<X4>, HGBitmapLoader **a6@<X8>)
{
  PCDynamicCast<PGTexture,PCImage>(a1, &v34);
  if (v34)
  {
    Name = ProGL::TextureHandle::getName((v34 + 64));
    Format = PGHelium::makeFormat(*(v34 + 40), *(v34 + 36), 0, *(v34 + 36) > 8);
    v14 = (*(**a1 + 16))();
    v15 = (*(**a1 + 24))();
    v16 = *a3;
    if (a4)
    {
      v17 = a3[1];
      if (!a5)
      {
LABEL_5:
        v18 = HGRectMake4i(v16, v17, v16 + v14, v17 + v15);
        v20 = v19;
        v21 = HGObject::operator new(0xC8uLL);
        HGGLTexture::HGGLTexture(v21, v18, v20, Format, a2, Name, 1);
        v22 = HGObject::operator new(0x20uLL);
        v23 = v22;
        v25 = v34;
        v24 = v35;
        if (v35)
        {
          atomic_fetch_add_explicit(&v35->__shared_owners_, 1uLL, memory_order_relaxed);
        }

        HGObject::HGObject(v22);
        *v23 = &unk_287296578;
        *(v23 + 2) = v25;
        *(v23 + 3) = v24;
        if (v24)
        {
          atomic_fetch_add_explicit(&v24->__shared_owners_, 1uLL, memory_order_relaxed);
          std::__shared_weak_count::__release_shared[abi:ne200100](v24);
        }

        HGBitmap::SetStorage(v21, v23);
        v26 = HGObject::operator new(0x1F0uLL);
        HGBitmapLoader::HGBitmapLoader(v26, v21);
        *a6 = v26;
        (*(*v23 + 24))(v23);
        if (v21)
        {
          (*(*v21 + 24))(v21);
        }

        goto LABEL_14;
      }
    }

    else
    {
      v27 = (*(*v34 + 16))(v34);
      v28 = a3[1];
      v16 -= v27 >> 1;
      v17 = v28 - ((*(*v34 + 24))(v34) >> 1);
      if (!a5)
      {
        goto LABEL_5;
      }
    }

    *a5 = v16;
    a5[1] = v17;
    a5[2] = v14;
    a5[3] = v15;
    goto LABEL_5;
  }

  PCDynamicCast<PCBitmap,PCImage>(a1, &v32);
  if (v32)
  {
    exception = __cxa_allocate_exception(0x40uLL);
    PCString::PCString(&v31, "not implemented yet");
    PCString::PCString(&v30, "/Library/Caches/com.apple.xbs/Sources/MotioniOS/ProGraphics/PGHelium.cpp");
    PCException::PCException(exception, &v31, &v30, 758);
    *exception = &unk_2871F6178;
  }

  *a6 = 0;
  if (v33)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v33);
  }

LABEL_14:
  if (v35)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v35);
  }
}

void sub_260315618(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10, uint64_t a11, std::__shared_weak_count *a12, uint64_t a13, std::__shared_weak_count *a14)
{
  PCString::~PCString(&a9);
  PCString::~PCString(&a10);
  if (v15)
  {
    __cxa_free_exception(v14);
  }

  if (a12)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a12);
  }

  if (a14)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a14);
  }

  _Unwind_Resume(a1);
}

void PGHelium::renderNodeToBitmap(uint64_t a1, uint64_t *a2, unsigned int *a3, int a4)
{
  HGRectMake4i(*a3, a3[1], a3[2] + *a3, a3[3] + a3[1]);
  PGHelium::makeFormat(a4);
  if (a3[2] >= 1 && a3[3] > 0)
  {
    v8 = *a2;
    if (v8)
    {
      (*(*v8 + 16))(v8);
    }

    operator new();
  }

  operator new();
}

void sub_260315BC8(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  RendererMutexLocker::~RendererMutexLocker(va);
  (*(*v7 + 24))(v7);
  (*(*v7 + 24))(v7);
  if (v6)
  {
    (*(*v6 + 24))(v6);
  }

  v9 = *(v5 + 8);
  if (v9)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v9);
  }

  if (a3)
  {
    (*(*a3 + 24))(a3);
  }

  _Unwind_Resume(a1);
}

BOOL LockAndRenderSoftware(HGRenderer *lpsrc, uint64_t a2, uint64_t a3, void *a4)
{
  RendererMutexLocker::RendererMutexLocker(v10, lpsrc);
  (*(*lpsrc + 120))(lpsrc, 19, a3);
  (*(*lpsrc + 64))(lpsrc, a2, *a4);
  v8 = (*(*lpsrc + 128))(lpsrc, 13) == 0;
  RendererMutexLocker::~RendererMutexLocker(v10);
  return v8;
}

void PGHelium::renderNodeToMetalTexture(const void *a1, uint64_t *a2, unsigned int *a3, unsigned int a4, uint64_t a5, HGGLBlendingInfo *a6)
{
  v10 = *a2;
  v19 = v10;
  if (v10)
  {
    (*(*v10 + 16))(v10);
  }

  v11 = HGRectMake4i(*a3, a3[1], a3[2] + *a3, a3[3] + a3[1]);
  v13 = v12;
  BitsPerChannel = PCPixelFormat::getBitsPerChannel(a4);
  Format = PGHelium::makeFormat(4, BitsPerChannel, a4 == 3, BitsPerChannel > 8);
  DstAlphaFactor = HGGLBlendingInfo::GetDstAlphaFactor(a6);
  v17 = PCBitDepth::getBitsPerChannel(DstAlphaFactor);
  PGHelium::makeFormat(4, v17, 0, v17 > 8);
  if (a1)
  {
  }

  else
  {
    v18 = 0;
  }

  LockAndRenderMetal(v18, v11, v13, Format, &v19);
}

void sub_260316014(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  _Unwind_Resume(exception_object);
}

void LockAndRenderMetal(HGRenderer *lpsrc, uint64_t a2, uint64_t a3, int a4, uint64_t *a5)
{
  RendererMutexLocker::RendererMutexLocker(v12, lpsrc);
  v10 = *a5;
  if (v10)
  {
    (*(*v10 + 16))(v10);
  }

  HGRendererOutput::HGRendererOutput(v11, v10, a2, a3, a4, 5);
  HGRenderer::RenderNode(lpsrc, v11);
}

void sub_260316200(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  if (a2)
  {
    (*(*a2 + 24))(a2);
  }

  if (v7)
  {
    (*(*v7 + 24))(v7);
  }

  RendererMutexLocker::~RendererMutexLocker(va);
  _Unwind_Resume(a1);
}

void PGHelium::renderNodeToTexture(const void *a1, uint64_t *a2, unsigned int *a3, unsigned int a4, uint64_t a5, HGGLBlendingInfo *a6)
{
  v10 = *a2;
  v20 = v10;
  if (v10)
  {
    (*(*v10 + 16))(v10);
  }

  v11 = HGRectMake4i(*a3, a3[1], a3[2] + *a3, a3[3] + a3[1]);
  v13 = v12;
  BitsPerChannel = PCPixelFormat::getBitsPerChannel(a4);
  Format = PGHelium::makeFormat(4, BitsPerChannel, a4 == 3, BitsPerChannel > 8);
  DstAlphaFactor = HGGLBlendingInfo::GetDstAlphaFactor(a6);
  v17 = PCBitDepth::getBitsPerChannel(DstAlphaFactor);
  v18 = PGHelium::makeFormat(4, v17, 0, v17 > 8);
  if (a1)
  {
    if (v19)
    {
      LockAndRenderHardware(v19, v11, v13, Format, &v20, v18);
    }
  }

  operator new();
}

void sub_260316704(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, PCSharedCount a17, uint64_t a18)
{
  if (v18)
  {
    (*(*v18 + 24))(v18);
  }

  if (a15)
  {
    (*(*a15 + 24))(a15);
  }

  if (a16)
  {
    (*(*a16 + 24))(a16);
  }

  _Unwind_Resume(exception_object);
}

void LockAndRenderHardware(HGRenderer *lpsrc, uint64_t a2, uint64_t a3, int a4, uint64_t *a5, uint64_t a6)
{
  RendererMutexLocker::RendererMutexLocker(v15, lpsrc);
  v12 = *a5;
  v14 = v12;
  if (v12)
  {
    (*(*v12 + 16))(v12);
  }

  LiHelium::setUpGLRenderer(lpsrc, a6);
  HGRendererOutput::HGRendererOutput(v13, v14, a2, a3, a4, 4);
  HGRenderer::RenderNode(lpsrc, v13);
}

void sub_260316A08(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, ...)
{
  va_start(va, a9);
  RendererMutexLocker::~RendererMutexLocker(va);
  _Unwind_Resume(a1);
}

void RendererMutexLocker::RendererMutexLocker(RendererMutexLocker *this, HGRenderer *lpsrc)
{
  {
  }

  {
  }

  {
  }

  else
  {
  }

  *this = v4;
  *(this + 8) = 0;
  PCMutex::lock(v4);
  *(this + 8) = 1;
}

void RendererMutexLocker::~RendererMutexLocker(PCMutex **this)
{
  v2 = *this;
  if (v2)
  {
    if (*(this + 8) == 1)
    {
      PCMutex::unlock(v2);
      *(this + 8) = 0;
    }
  }
}

uint64_t PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::clear(uint64_t a1)
{
  PCMutex::lock((a1 + 16));
  std::__tree<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::__map_value_compare<std::pair<HGMTLDeviceType,PCHash128>,std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::less<std::pair<HGMTLDeviceType,PCHash128>>,true>,std::allocator<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>>>::destroy(a1 + 88, *(a1 + 96));
  *(a1 + 96) = 0;
  *(a1 + 104) = 0;
  *(a1 + 88) = a1 + 96;
  *(a1 + 120) = *(a1 + 112);
  *(a1 + 144) = 0;
  return PCMutex::unlock((a1 + 16));
}

void std::__tree<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::__map_value_compare<std::pair<HGMTLDeviceType,PCHash128>,std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::less<std::pair<HGMTLDeviceType,PCHash128>>,true>,std::allocator<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>>>::destroy(uint64_t a1, void *a2)
{
  if (a2)
  {
    std::__tree<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::__map_value_compare<std::pair<HGMTLDeviceType,PCHash128>,std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::less<std::pair<HGMTLDeviceType,PCHash128>>,true>,std::allocator<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>>>::destroy(a1, *a2);
    std::__tree<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::__map_value_compare<std::pair<HGMTLDeviceType,PCHash128>,std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::less<std::pair<HGMTLDeviceType,PCHash128>>,true>,std::allocator<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>>>::destroy(a1, a2[1]);
    PGHelium::MetalTextureCacheEntry::~MetalTextureCacheEntry((a2 + 7));

    operator delete(a2);
  }
}

uint64_t PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::PCCacheImpl(uint64_t a1, uint64_t a2)
{
  *a1 = 0;
  *(a1 + 8) = 0;
  PCMutex::PCMutex((a1 + 16));
  *(a1 + 104) = 0;
  *(a1 + 96) = 0;
  *(a1 + 88) = a1 + 96;
  *(a1 + 112) = 0u;
  *(a1 + 128) = 0u;
  *(a1 + 144) = 0;
  *(a1 + 152) = -1;
  *(a1 + 160) = a2;
  *(a1 + 168) = 0;
  return a1;
}

void sub_260316D74(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 8);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  _Unwind_Resume(exception_object);
}

uint64_t *PCCache<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::~PCCache(uint64_t *a1)
{
  PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::clear(*a1);
  v2 = *a1;
  *a1 = 0;
  if (v2)
  {
    v3 = PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::~PCCacheImpl(v2);
    MEMORY[0x2666E9F00](v3, 0x10A0C407F3B7D27);
  }

  return a1;
}

uint64_t PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::~PCCacheImpl(uint64_t a1)
{
  v2 = *(a1 + 112);
  if (v2)
  {
    *(a1 + 120) = v2;
    operator delete(v2);
  }

  std::__tree<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::__map_value_compare<std::pair<HGMTLDeviceType,PCHash128>,std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::less<std::pair<HGMTLDeviceType,PCHash128>>,true>,std::allocator<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>>>::destroy(a1 + 88, *(a1 + 96));
  PCMutex::~PCMutex((a1 + 16));
  v3 = *(a1 + 8);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

uint64_t PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::setMaxCost(uint64_t a1, unint64_t a2)
{
  v4 = (a1 + 16);
  PCMutex::lock((a1 + 16));
  *(a1 + 152) = a2;
  if (!*(a1 + 168))
  {
    while (*(a1 + 144) > a2 || *(a1 + 104) > *(a1 + 160))
    {
      v6 = *(a1 + 112);
      if (v6 == *(a1 + 120))
      {
        break;
      }

      v8 = *v6;
      PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,std::__tree_node<std::__value_type<std::pair<HGMTLDeviceType,PCHash128>,PCCacheImpl<std::pair<HGMTLDeviceType,PCHash128>,PGHelium::MetalTextureCacheEntry,PCMutex,std::less<std::pair<HGMTLDeviceType,PCHash128>>>::Data>,void *> *,long>>>::remove((a1 + 112), &v8);
      v5 = v8;
      *(a1 + 144) -= v8[28];
      std::__tree<std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>,std::__map_value_compare<unsigned int,std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>,std::less<unsigned int>,true>,std::allocator<std::__value_type<unsigned int,PVInstructionGraphNode * {__strong}>>>::__remove_node_pointer((a1 + 88), v5);
      PGHelium::MetalTextureCacheEntry::~MetalTextureCacheEntry((v5 + 7));
      operator delete(v5);
      a2 = *(a1 + 152);
    }
  }

  return PCMutex::unlock(v4);
}

void sub_260316F0C(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PCLockSentry<PCMutex>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

uint64_t PGTextureCache::instance(PGTextureCache *this)
{
  if (PGTextureCache::instance(void)::once != -1)
  {
    PGTextureCache::instance();
  }

  return _instance;
}

void PGTextureCache::PGTextureCache(PGTextureCache *this)
{
  v3 = *MEMORY[0x277D85DE8];
  PCSingleton::PCSingleton(this, 100);
  *v2 = &unk_2872DFC28;
  ProGL::Init::Init((v2 + 1));
  *(this + 2) = 0;
  *(this + 40) = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
  operator new();
}

void sub_2603171A0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9)
{
  v12 = v11;
  MEMORY[0x2666E9F00](v12, 0x20C4093837F09);
  std::vector<std::shared_ptr<HGGPUComputeDevice const>>::__destroy_vector::operator()[abi:ne200100](&a9);
  ProGL::Init::~Init(v10);
  PCSingleton::~PCSingleton(v9);
  _Unwind_Resume(a1);
}

void PGTextureCache::disableLimits(PGTextureCache *this)
{
  v1 = *(this + 2);
  v2 = *(this + 3);
  while (v1 != v2)
  {
    v3 = *v1;
    v1 += 2;
    PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::disableLimits(*v3);
  }
}

void PGTextureCache::enableLimits(PGTextureCache *this)
{
  v1 = *(this + 2);
  v2 = *(this + 3);
  while (v1 != v2)
  {
    v3 = *v1;
    v1 += 2;
    PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::enableLimits(*v3);
  }
}

uint64_t PGTextureCache::add(PGTextureCache *this, uint64_t *a2, __int128 *a3, int a4, PCHash128 *a5)
{
  v5 = *(this + 40);
  if ((v5 & 1) == 0)
  {
    if (!*a2)
    {
      goto LABEL_15;
    }

    PGTexture::getPGLTexture(*a2, &v25);
    v11 = ProGL::TextureHandle::operator void (ProGL::TextureHandle::*)(void)(&v25);
    if (v12)
    {
      v13 = (v12 & 1 | v11) == 0;
    }

    else
    {
      v13 = 1;
    }

    v15 = v13 && v11 == 0;
    if (v26)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v26);
    }

    if (!v15)
    {
      v16 = *a2;
      v17 = a2[1];
      v25 = *a2;
      v26 = v17;
      if (v17)
      {
        atomic_fetch_add_explicit(&v17->__shared_owners_, 1uLL, memory_order_relaxed);
        v16 = *a2;
      }

      v18 = a3[3];
      v29 = a3[2];
      v30 = v18;
      v19 = a3[1];
      v27 = *a3;
      v28 = v19;
      v20 = a3[7];
      v33 = a3[6];
      v34 = v20;
      v21 = a3[5];
      v31 = a3[4];
      v32 = v21;
      v22 = *(*(this + 2) + 16 * a4);
      v23 = (*(*v16 + 40))(v16);
      PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::addValue(*v22, a5, &v25, v23);
      if (v26)
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](v26);
      }
    }

    else
    {
LABEL_15:
      PGTextureCache::remove(this, a5);
    }
  }

  return v5 ^ 1u;
}

void sub_2603173B0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a10);
  }

  _Unwind_Resume(exception_object);
}

void PGTextureCache::remove(PGTextureCache *this, const PCHash128 *a2)
{
  if ((*(this + 40) & 1) == 0)
  {
    v2 = *(this + 2);
    v3 = *(this + 3);
    while (v2 != v3)
    {
      v5 = *v2;
      v2 += 2;
      PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::removeKey(*v5, a2);
    }
  }
}

void PGTextureCache::find(uint64_t a1@<X0>, int a2@<W1>, const PCHash128 *a3@<X2>, _BYTE *a4@<X3>, void *a5@<X8>)
{
  v7 = **(*(a1 + 16) + 16 * a2);
  v16 = 0;
  PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::findValue(v7, a3, &v16, &v13);
  v8 = v13;
  if (v13)
  {
    if (a4 && v15 != a4)
    {
      for (i = 0; i != 128; i += 32)
      {
        v10 = &a4[i];
        v11 = *&v15[i + 16];
        *v10 = *&v15[i];
        v10[1] = v11;
      }
    }

    v12 = v14;
    *a5 = v8;
    a5[1] = v12;
    if (v12)
    {
      atomic_fetch_add_explicit(&v12->__shared_owners_, 1uLL, memory_order_relaxed);
    }
  }

  else
  {
    *a5 = 0;
    a5[1] = 0;
  }

  if (v14)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v14);
  }
}

uint64_t PGTextureCache::add(PGTextureCache *a1, uint64_t *a2, HGGPUComputeDevice **a3, PCHash128 *a4)
{
  GLVirtualScreen = HGGPUComputeDevice::GetGLVirtualScreen(*a3);
  v18 = 0x3FF0000000000000;
  v15 = 0x3FF0000000000000;
  v12 = 0x3FF0000000000000;
  v9 = 0x3FF0000000000000;
  v10 = 0u;
  v11 = 0u;
  v13 = 0u;
  v14 = 0u;
  v16 = 0u;
  v17 = 0u;
  return PGTextureCache::add(a1, a2, &v9, GLVirtualScreen, a4);
}

void PGTextureCache::find(uint64_t a1@<X0>, HGGPUComputeDevice **a2@<X1>, const PCHash128 *a3@<X2>, _BYTE *a4@<X3>, void *a5@<X8>)
{
  GLVirtualScreen = HGGPUComputeDevice::GetGLVirtualScreen(*a2);

  PGTextureCache::find(a1, GLVirtualScreen, a3, a4, a5);
}

void PGTextureCache::clear(PGTextureCache *this)
{
  v1 = *(this + 2);
  v2 = *(this + 3);
  while (v1 != v2)
  {
    v3 = *v1;
    v1 += 2;
    PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::clear(*v3);
  }
}

void PGTextureCache::~PGTextureCache(PGTextureCache *this)
{
  PGTextureCache::~PGTextureCache(this);

  JUMPOUT(0x2666E9F00);
}

{
  *this = &unk_2872DFC28;
  v2 = (this + 8);
  v3 = (this + 16);
  std::vector<std::shared_ptr<HGGPUComputeDevice const>>::__destroy_vector::operator()[abi:ne200100](&v3);
  ProGL::Init::~Init(v2);
  PCSingleton::~PCSingleton(this);
}

void std::shared_ptr<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>::shared_ptr[abi:ne200100]<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>,0>(void *a1, uint64_t a2)
{
  *a1 = a2;
  v2 = a2;
  operator new();
}

void sub_2603176C8(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  std::unique_ptr<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>::~unique_ptr[abi:ne200100](va);
  _Unwind_Resume(a1);
}

uint64_t **std::unique_ptr<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>::~unique_ptr[abi:ne200100](uint64_t **a1)
{
  v2 = *a1;
  *a1 = 0;
  if (v2)
  {
    v3 = PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::~PCCache(v2);
    MEMORY[0x2666E9F00](v3, 0x20C4093837F09);
  }

  return a1;
}

uint64_t *std::__shared_ptr_pointer<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>> *,std::shared_ptr<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>::__shared_ptr_default_delete<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>,PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>,std::allocator<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>>::__on_zero_shared(uint64_t a1)
{
  result = *(a1 + 24);
  if (result)
  {
    PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::~PCCache(result);

    JUMPOUT(0x2666E9F00);
  }

  return result;
}

uint64_t std::__shared_ptr_pointer<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>> *,std::shared_ptr<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>::__shared_ptr_default_delete<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>,PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>,std::allocator<PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>>>::__get_deleter(uint64_t a1, uint64_t a2)
{
  {
    return a1;
  }

  else
  {
    return 0;
  }
}

uint64_t *PCCache<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::~PCCache(uint64_t *a1)
{
  PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::clear(*a1);
  v2 = *a1;
  *a1 = 0;
  if (v2)
  {
    v3 = PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::~PCCacheImpl(v2);
    MEMORY[0x2666E9F00](v3, 0x1020C40F9427E96);
  }

  return a1;
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::clear(uint64_t a1)
{
  PCSpinLock::lock((a1 + 16));
  std::__tree<std::__value_type<PCHash128,LiTextureStoreToken>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,LiTextureStoreToken>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,LiTextureStoreToken>>>::destroy(a1 + 24, *(a1 + 32));
  *(a1 + 32) = 0;
  *(a1 + 40) = 0;
  *(a1 + 24) = a1 + 32;
  *(a1 + 56) = *(a1 + 48);
  *(a1 + 80) = 0;
  PCSpinLock::unlock((a1 + 16));
}

uint64_t PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::~PCCacheImpl(uint64_t a1)
{
  v2 = *(a1 + 48);
  if (v2)
  {
    *(a1 + 56) = v2;
    operator delete(v2);
  }

  std::__tree<std::__value_type<PCHash128,LiTextureStoreToken>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,LiTextureStoreToken>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,LiTextureStoreToken>>>::destroy(a1 + 24, *(a1 + 32));
  PCSpinLock::~PCSpinLock((a1 + 16));
  v3 = *(a1 + 8);
  if (v3)
  {
    std::__shared_weak_count::__release_weak(v3);
  }

  return a1;
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::setMaxCost(uint64_t a1, uint64_t a2)
{
  v4 = (a1 + 16);
  PCSpinLock::lock((a1 + 16));
  *(a1 + 88) = a2;
  if (!*(a1 + 104))
  {
    while (*(a1 + 80) > *(a1 + 88) || *(a1 + 40) > *(a1 + 96))
    {
      v6 = *(a1 + 48);
      if (v6 == *(a1 + 56))
      {
        break;
      }

      v7 = *v6;
      PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::remove((a1 + 48), &v7);
      v5 = v7;
      *(a1 + 80) -= v7[24];
      std::__tree<std::__value_type<PCHash128,PCMutexRef>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCMutexRef>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCMutexRef>>>::erase((a1 + 24), v5);
    }
  }

  PCSpinLock::unlock(v4);
}

void PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::remove(uint64_t *a1, uint64_t a2)
{
  v3 = *(*a2 + 208);
  v4 = ((a1[1] - *a1) >> 3) - 1;
  if (v3 == v4)
  {

    std::vector<std::__map_iterator<std::__tree_iterator<std::__value_type<ColorConversionKey,PCCacheImpl<ColorConversionKey,std::shared_ptr<PCWorkingColor>,PCNoLock,std::less<ColorConversionKey>>::Data>,std::__tree_node<std::__value_type<ColorConversionKey,PCCacheImpl<ColorConversionKey,std::shared_ptr<PCWorkingColor>,PCNoLock,std::less<ColorConversionKey>>::Data>,void *> *,long>>>::resize(a1, v3);
  }

  else
  {
    *(*a1 + 8 * v3) = *(*a1 + 8 * v4);
    *(*(*a1 + 8 * v3) + 208) = v3;
    std::vector<std::__map_iterator<std::__tree_iterator<std::__value_type<ColorConversionKey,PCCacheImpl<ColorConversionKey,std::shared_ptr<PCWorkingColor>,PCNoLock,std::less<ColorConversionKey>>::Data>,std::__tree_node<std::__value_type<ColorConversionKey,PCCacheImpl<ColorConversionKey,std::shared_ptr<PCWorkingColor>,PCNoLock,std::less<ColorConversionKey>>::Data>,void *> *,long>>>::resize(a1, v4);
    v5 = *a1 + 8 * v3;

    PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::bubble(a1, v5);
  }
}

uint64_t *PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::bubble(uint64_t *result, uint64_t a2)
{
  v2 = *result;
  v3 = result[1] - *result;
  v4 = *(*a2 + 208);
  v5 = (2 * v4) | 1;
  if (v5 >= v3 >> 3)
  {
LABEL_24:
    if (v4)
    {
      v17 = *(v2 + 8 * v4);
      do
      {
        v18 = v4 - 1;
        v19 = (v4 - 1) >> 1;
        v20 = *(v2 + 8 * v19);
        if (*(v20 + 200) <= *(v17 + 200))
        {
          break;
        }

        *(v2 + 8 * v4) = v20;
        *(v2 + 8 * v19) = v17;
        v2 = *result;
        *(*(*result + 8 * v4) + 208) = v4;
        v17 = *(v2 + 8 * v19);
        *(v17 + 208) = v19;
        v4 = (v4 - 1) >> 1;
      }

      while (v18 > 1);
    }

    return result;
  }

  v6 = 0;
  v7 = v3 >> 3;
  v8 = 2 * v4;
  v9 = *(v2 + 8 * v4);
  while (1)
  {
    v10 = v8 + 2;
    v11 = *(v9 + 200);
    v12 = v10 < v7 && v11 > *(*(v2 + 8 * v10) + 200);
    v13 = *(*(v2 + 8 * v5) + 200);
    if (v11 <= v13 && !v12)
    {
      break;
    }

    v15 = v11 > v13 && v12;
    if (v12)
    {
      v16 = v10;
    }

    else
    {
      v16 = v5;
    }

    if (v15)
    {
      if (v13 <= *(*(v2 + 8 * v10) + 200))
      {
        v16 = v5;
      }

      else
      {
        v16 = v10;
      }
    }

    *(v2 + 8 * v4) = *(v2 + 8 * v16);
    *(v2 + 8 * v16) = v9;
    v2 = *result;
    *(*(*result + 8 * v4) + 208) = v4;
    v9 = *(v2 + 8 * v16);
    *(v9 + 208) = v16;
    v8 = 2 * v16;
    v6 = 1;
    v5 = (2 * v16) | 1;
    v4 = v16;
    if (v5 >= v7)
    {
      return result;
    }
  }

  if ((v6 & 1) == 0)
  {
    v4 = *(*a2 + 208);
    goto LABEL_24;
  }

  return result;
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::setMaxSize(uint64_t a1, uint64_t a2)
{
  v4 = (a1 + 16);
  PCSpinLock::lock((a1 + 16));
  *(a1 + 96) = a2;
  if (!*(a1 + 104))
  {
    while (*(a1 + 80) > *(a1 + 88) || *(a1 + 40) > *(a1 + 96))
    {
      v6 = *(a1 + 48);
      if (v6 == *(a1 + 56))
      {
        break;
      }

      v7 = *v6;
      PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::remove((a1 + 48), &v7);
      v5 = v7;
      *(a1 + 80) -= v7[24];
      std::__tree<std::__value_type<PCHash128,PCMutexRef>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCMutexRef>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCMutexRef>>>::erase((a1 + 24), v5);
    }
  }

  PCSpinLock::unlock(v4);
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::disableLimits(uint64_t a1)
{
  PCSpinLock::lock((a1 + 16));
  ++*(a1 + 104);
  PCSpinLock::unlock((a1 + 16));
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::enableLimits(uint64_t a1)
{
  v2 = (a1 + 16);
  PCSpinLock::lock((a1 + 16));
  v3 = *(a1 + 104) - 1;
  *(a1 + 104) = v3;
  if (!v3)
  {
    while (*(a1 + 80) > *(a1 + 88) || *(a1 + 40) > *(a1 + 96))
    {
      v5 = *(a1 + 48);
      if (v5 == *(a1 + 56))
      {
        break;
      }

      v6 = *v5;
      PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::remove((a1 + 48), &v6);
      v4 = v6;
      *(a1 + 80) -= v6[24];
      std::__tree<std::__value_type<PCHash128,PCMutexRef>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCMutexRef>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCMutexRef>>>::erase((a1 + 24), v4);
    }
  }

  PCSpinLock::unlock(v2);
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::addValue(uint64_t a1, const PCHash128 *a2, uint64_t *a3, unint64_t a4)
{
  v60 = *MEMORY[0x277D85DE8];
  v8 = (a1 + 16);
  v51[1] = a1 + 16;
  PCSpinLock::lock((a1 + 16));
  if (*(a1 + 88) >= a4 || *(a1 + 104))
  {
    v9 = std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::find<PCHash128>(a1 + 24, a2);
    v10 = v9;
    v51[0] = v9;
    if (a1 + 32 == v9)
    {
      v25 = *(a1 + 72) + 1;
      *(a1 + 72) = v25;
      v26 = *a3;
      v27 = a3[1];
      if (v27)
      {
        atomic_fetch_add_explicit(&v27->__shared_owners_, 1uLL, memory_order_relaxed);
      }

      v28 = *(a3 + 6);
      v56 = *(a3 + 5);
      v57 = v28;
      v29 = *(a3 + 8);
      v58 = *(a3 + 7);
      v59 = v29;
      v30 = *(a3 + 2);
      v52 = *(a3 + 1);
      v53 = v30;
      v31 = *(a3 + 4);
      v54 = *(a3 + 3);
      v55 = v31;
      v35 = *a2;
      v36 = v26;
      v37 = v27;
      if (v27)
      {
        atomic_fetch_add_explicit(&v27->__shared_owners_, 1uLL, memory_order_relaxed);
      }

      v42 = v56;
      v43 = v57;
      v44 = v58;
      v45 = v59;
      v38 = v52;
      v39 = v53;
      v40 = v54;
      v41 = v55;
      v46 = a4;
      v47 = v25;
      v48 = 0;
      v49 = std::__tree<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>>>::__emplace_unique_key_args<PCHash128,std::pair<PCHash128 const,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>>(a1 + 24, &v35);
      v50 = v32;
      if (v37)
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](v37);
      }

      PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::add(a1 + 48, &v49);
      *(a1 + 80) += a4;
      if (!*(a1 + 104))
      {
        while (*(a1 + 80) > *(a1 + 88) || *(a1 + 40) > *(a1 + 96))
        {
          v34 = *(a1 + 48);
          if (v34 == *(a1 + 56))
          {
            break;
          }

          *&v35 = *v34;
          PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::remove((a1 + 48), &v35);
          v33 = v35;
          *(a1 + 80) -= *(v35 + 192);
          std::__tree<std::__value_type<PCHash128,PCMutexRef>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCMutexRef>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCMutexRef>>>::erase((a1 + 24), v33);
        }
      }

      if (v27)
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](v27);
      }
    }

    else
    {
      v12 = *a3;
      v11 = a3[1];
      if (v11)
      {
        atomic_fetch_add_explicit((v11 + 8), 1uLL, memory_order_relaxed);
      }

      v13 = v9 + 48;
      v14 = *(v9 + 56);
      v10[6] = v12;
      v10[7] = v11;
      if (v14)
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](v14);
      }

      if (v13 != a3)
      {
        v15 = 0;
        v16 = v10 + 8;
        v17 = a3 + 2;
        do
        {
          for (i = 0; i != 4; ++i)
          {
            v16[i] = v17[i];
          }

          ++v15;
          v16 += 4;
          v17 += 4;
        }

        while (v15 != 4);
      }

      v19 = *(a1 + 72) + 1;
      *(a1 + 72) = v19;
      v10[25] = v19;
      PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::bubble((a1 + 48), v51);
      v20 = v51[0];
      v21 = a4 - *(v51[0] + 192);
      if (v21)
      {
        v22 = *(a1 + 80) + v21;
        *(a1 + 80) = v22;
        *(v20 + 192) = a4;
        if (!*(a1 + 104))
        {
          while (v22 > *(a1 + 88) || *(a1 + 40) > *(a1 + 96))
          {
            v24 = *(a1 + 48);
            if (v24 == *(a1 + 56))
            {
              break;
            }

            *&v35 = *v24;
            PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::remove((a1 + 48), &v35);
            v23 = v35;
            *(a1 + 80) -= *(v35 + 192);
            std::__tree<std::__value_type<PCHash128,PCMutexRef>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCMutexRef>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCMutexRef>>>::erase((a1 + 24), v23);
            v22 = *(a1 + 80);
          }
        }
      }
    }
  }

  PCSpinLock::unlock(v8);
}

void sub_260318014(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, os_unfair_lock_s *a36)
{
  if (v36)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v36);
  }

  PCLockSentry<PCSpinLock>::~PCLockSentry(&a36);
  _Unwind_Resume(a1);
}

void PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::add(uint64_t a1, uint64_t *a2)
{
  v4 = *a1;
  v5 = *(a1 + 8);
  v6 = (v5 - *a1) >> 3;
  v7 = *a2;
  *(*a2 + 208) = v6;
  v8 = *(a1 + 16);
  if (v5 >= v8)
  {
    if ((v6 + 1) >> 61)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v10 = v8 - v4;
    v11 = v10 >> 2;
    if (v10 >> 2 <= (v6 + 1))
    {
      v11 = v6 + 1;
    }

    if (v10 >= 0x7FFFFFFFFFFFFFF8)
    {
      v12 = 0x1FFFFFFFFFFFFFFFLL;
    }

    else
    {
      v12 = v11;
    }

    if (v12)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<HGRef<HGBitmap>>>(a1, v12);
    }

    *(8 * v6) = v7;
    v9 = 8 * v6 + 8;
    v13 = *(a1 + 8) - *a1;
    v14 = (8 * v6 - v13);
    memcpy(v14, *a1, v13);
    v15 = *a1;
    *a1 = v14;
    *(a1 + 8) = v9;
    *(a1 + 16) = 0;
    if (v15)
    {
      operator delete(v15);
    }
  }

  else
  {
    *v5 = v7;
    v9 = (v5 + 1);
  }

  *(a1 + 8) = v9;
  v16 = *(*a2 + 208);
  if (v16)
  {
    v17 = *a1;
    v18 = *(*a1 + 8 * v16);
    do
    {
      v19 = v16 - 1;
      v20 = (v16 - 1) >> 1;
      v21 = v17[v20];
      if (*(v21 + 200) <= *(v18 + 200))
      {
        break;
      }

      v17[v16] = v21;
      v17[v20] = v18;
      v17 = *a1;
      *(*(*a1 + 8 * v16) + 208) = v16;
      v18 = v17[v20];
      *(v18 + 208) = v20;
      v16 = (v16 - 1) >> 1;
    }

    while (v19 > 1);
  }
}

uint64_t std::__tree<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>>>::__emplace_unique_key_args<PCHash128,std::pair<PCHash128 const,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>>(uint64_t a1, const PCHash128 *a2)
{
  result = *std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::__find_equal<PCHash128>(a1, &v3, a2);
  if (!result)
  {
    std::__tree<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>>>::__construct_node<std::pair<PCHash128 const,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>>();
  }

  return result;
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::findValue(uint64_t a1@<X0>, const PCHash128 *a2@<X1>, _BYTE *a3@<X2>, uint64_t a4@<X8>)
{
  v8 = (a1 + 16);
  v16[1] = a1 + 16;
  PCSpinLock::lock((a1 + 16));
  v9 = std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::find<PCHash128>(a1 + 24, a2);
  v16[0] = v9;
  if (a1 + 32 == v9)
  {
    *a3 = 0;
    *a4 = 0;
    *(a4 + 8) = 0;
    *(a4 + 136) = 0x3FF0000000000000;
    *(a4 + 96) = 0x3FF0000000000000;
    *(a4 + 56) = 0x3FF0000000000000;
    *(a4 + 16) = 0x3FF0000000000000;
    *(a4 + 24) = 0u;
    *(a4 + 40) = 0u;
    *(a4 + 64) = 0u;
    *(a4 + 80) = 0u;
    *(a4 + 104) = 0u;
    *(a4 + 120) = 0u;
  }

  else
  {
    v10 = *(v9 + 56);
    *a4 = *(v9 + 48);
    *(a4 + 8) = v10;
    if (v10)
    {
      atomic_fetch_add_explicit((v10 + 8), 1uLL, memory_order_relaxed);
    }

    v11 = *(v9 + 144);
    *(a4 + 80) = *(v9 + 128);
    *(a4 + 96) = v11;
    v12 = *(v9 + 176);
    *(a4 + 112) = *(v9 + 160);
    *(a4 + 128) = v12;
    v13 = *(v9 + 80);
    *(a4 + 16) = *(v9 + 64);
    *(a4 + 32) = v13;
    v14 = *(v9 + 112);
    *(a4 + 48) = *(v9 + 96);
    *(a4 + 64) = v14;
    v15 = *(a1 + 72) + 1;
    *(a1 + 72) = v15;
    *(v9 + 200) = v15;
    PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::bubble((a1 + 48), v16);
    *a3 = 1;
  }

  PCSpinLock::unlock(v8);
}

void sub_2603183D4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  PCLockSentry<PCSpinLock>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

void PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::removeKey(uint64_t a1, const PCHash128 *a2)
{
  v4 = (a1 + 16);
  v6[1] = (a1 + 16);
  PCSpinLock::lock((a1 + 16));
  v5 = std::__tree<std::__value_type<PCHash128,PCRect<double>>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCRect<double>>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCRect<double>>>>::find<PCHash128>(a1 + 24, a2);
  v6[0] = v5;
  if ((a1 + 32) != v5)
  {
    *(a1 + 80) -= v5[24];
    PCEvictionHeap<std::__map_iterator<std::__tree_iterator<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,std::__tree_node<std::__value_type<PCHash128,PCCacheImpl<PCHash128,PGTextureCache::CacheData,PCSpinLock,std::less<PCHash128>>::Data>,void *> *,long>>>::remove((a1 + 48), v6);
    std::__tree<std::__value_type<PCHash128,PCMutexRef>,std::__map_value_compare<PCHash128,std::__value_type<PCHash128,PCMutexRef>,std::less<PCHash128>,true>,std::allocator<std::__value_type<PCHash128,PCMutexRef>>>::erase((a1 + 24), v6[0]);
  }

  PCSpinLock::unlock(v4);
}

void sub_260318494(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PCLockSentry<PCSpinLock>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

void PMLayerDescription::PMLayerDescription(PMLayerDescription *this)
{
  *this = 0;
  *(this + 1) = 0;
  *(this + 2) = 0x500000000;
  *(this + 3) = 0x3FF0000000000000;
  *(this + 8) = 0;
  PCSharedCount::PCSharedCount(this + 5);
}

void PMLayerDescription::PMLayerDescription(PMLayerDescription *this, const PCString *a2)
{
  *this = *&a2->var0;
  *(this + 2) = a2[2];
  *(this + 3) = a2[3];
  *(this + 8) = a2[4].var0;
  PCString::PCString(this + 5, a2 + 5);
}

uint64_t PMLayerDescription::operator=(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  *(a1 + 16) = *(a2 + 16);
  *(a1 + 24) = *(a2 + 24);
  *(a1 + 32) = *(a2 + 32);
  PCString::set((a1 + 40), (a2 + 40));
  return a1;
}

void PMClip::PMClip(PMClip *this, const PCURL *a2, const PMFormatDescription *a3)
{
  v6 = PMFormatDescription::PMFormatDescription(this);
  *(v6 + 151) = 0;
  *(v6 + 1176) = 0u;
  *(v6 + 1192) = 0u;
  *(v6 + 1144) = 0u;
  *(v6 + 1160) = 0u;
  PCURL::PCURL((v6 + 1224), a2);
  PCURL::getAsFileSystemString(a2, this + 154);
  *(this + 620) = 0;
  *(this + 311) = 0;
  *(this + 624) = 0;
  PCMutex::PCMutex((this + 1256), 1);
  *this = *a3;
  memcpy(this + 8, a3 + 8, 0x1C0uLL);
  PCString::set(this + 57, a3 + 57);
  v7 = *(a3 + 58);
  *(this + 118) = *(a3 + 118);
  *(this + 58) = v7;
  PCCFRef<CGColorSpace *>::operator=(this + 60, a3 + 60);
  *(this + 488) = *(a3 + 488);
  *(this + 63) = 0;
  *(this + 128) = 0;
  *(this + 129) = *(a3 + 129);
  PMAudioDescription::operator=(this + 520, a3 + 520);
  *(this + 79) = 0;
  *(this + 160) = 0;
  memcpy(this + 648, a3 + 648, 0x1C0uLL);
  PCString::set(this + 137, a3 + 137);
  v8 = *(a3 + 138);
  *(this + 278) = *(a3 + 278);
  *(this + 138) = v8;
  PCCFRef<CGColorSpace *>::operator=(this + 140, a3 + 140);
  *(this + 1128) = *(a3 + 1128);
  if (*(a3 + 63))
  {
    v9 = malloc_type_malloc(*(a3 + 128), 0x93463989uLL);
    *(this + 63) = v9;
    memcpy(v9, *(a3 + 63), *(a3 + 128));
    *(this + 128) = *(a3 + 128);
  }

  if (*(a3 + 79))
  {
    v10 = malloc_type_malloc(*(a3 + 160), 0xB6F568E5uLL);
    *(this + 79) = v10;
    memcpy(v10, *(a3 + 79), *(a3 + 160));
    *(this + 160) = *(a3 + 160);
  }

  memcpy(this + 648, a3 + 648, 0x1C0uLL);
  PCString::set(this + 137, a3 + 137);
  v11 = *(a3 + 138);
  *(this + 278) = *(a3 + 278);
  *(this + 138) = v11;
  PCCFRef<CGColorSpace *>::operator=(this + 140, a3 + 140);
  *(this + 1128) = *(a3 + 1128);
}

void sub_2603187F4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, PCString *a10)
{
  PCString::~PCString(v10 + 154);
  PCURL::~PCURL(&v10[153]);
  var0 = v10[149].var0;
  if (var0)
  {
    operator delete(var0);
  }

  a10 = v10 + 146;
  std::vector<PMAudioDescription>::__destroy_vector::operator()[abi:ne200100](&a10);
  std::vector<PMLayerDescription>::__destroy_vector::operator()[abi:ne200100](&a10);
  PMFormatDescription::~PMFormatDescription(v10);
  _Unwind_Resume(a1);
}

void PMClip::PMClip(PMClip *this, const PMClip *a2)
{
  v4 = PMFormatDescription::PMFormatDescription(this, a2);
  *(v4 + 145) = 0;
  *(v4 + 1144) = 0u;
  std::vector<PMLayerDescription>::__init_with_size[abi:ne200100]<PMLayerDescription*,PMLayerDescription*>(v4 + 1144, *(a2 + 143), *(a2 + 144), 0xAAAAAAAAAAAAAAABLL * ((*(a2 + 144) - *(a2 + 143)) >> 4));
  *(this + 148) = 0;
  *(this + 73) = 0u;
  std::vector<PMAudioDescription>::__init_with_size[abi:ne200100]<PMAudioDescription*,PMAudioDescription*>(this + 1168, *(a2 + 146), *(a2 + 147), 0x6DB6DB6DB6DB6DB7 * ((*(a2 + 147) - *(a2 + 146)) >> 4));
  std::vector<BOOL>::vector(this + 149, a2 + 1192);
  *(this + 152) = 0;
  PCURL::PCURL((this + 1224), (a2 + 1224));
  PCString::PCString(this + 154, a2 + 154);
  *(this + 620) = *(a2 + 620);
  *(this + 311) = 0;
  *(this + 624) = 0;
  PCMutex::PCMutex((this + 1256), 1);
}

void sub_260318960(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  PCString::~PCString(v2 + 154);
  PCURL::~PCURL(&v2[153]);
  if (*v3)
  {
    operator delete(*v3);
  }

  std::vector<PMAudioDescription>::__destroy_vector::operator()[abi:ne200100](va);
  std::vector<PMLayerDescription>::__destroy_vector::operator()[abi:ne200100](va);
  PMFormatDescription::~PMFormatDescription(v2);
  _Unwind_Resume(a1);
}

void PMClip::~PMClip(PMClip *this)
{
  v2 = *(this + 63);
  if (v2)
  {
    free(v2);
  }

  v3 = *(this + 79);
  if (v3)
  {
    free(v3);
  }

  PMClip::close(this);
  PCMutex::~PCMutex((this + 1256));
  PCString::~PCString(this + 154);
  PCURL::~PCURL((this + 1224));
  v4 = *(this + 149);
  if (v4)
  {
    operator delete(v4);
  }

  v5 = (this + 1168);
  std::vector<PMAudioDescription>::__destroy_vector::operator()[abi:ne200100](&v5);
  v5 = (this + 1144);
  std::vector<PMLayerDescription>::__destroy_vector::operator()[abi:ne200100](&v5);
  PMFormatDescription::~PMFormatDescription(this);
}

uint64_t PMClip::close(PMClip *this)
{
  v2 = (this + 1256);
  PCMutex::lock((this + 1256));
  v3 = *(this + 311);
  if (v3)
  {
    v4 = v3 - 1;
    *(this + 311) = v4;
    if (!v4)
    {
      if (*this)
      {
        v6 = *(*this + 16);
        if (v6)
        {
          v6(this, *(this + 152));
          *(this + 152) = 0;
        }
      }
    }
  }

  PCMutex::unlock(v2);
  return 0;
}

uint64_t PMClip::open(PMClip *this)
{
  v2 = (this + 1256);
  v26 = this + 1256;
  PCMutex::lock((this + 1256));
  v27 = 1;
  v3 = *(this + 311);
  if (!v3)
  {
    if (!*this)
    {
      v4 = 1;
      goto LABEL_48;
    }

    v5 = (this + 1224);
    isSequence = PCURL::isSequence(this + 153);
    *(this + 1240) = isSequence;
    URLforIndex = (this + 1224);
    if (isSequence)
    {
      URLforIndex = PCURL::getURLforIndex(this + 153, 0);
    }

    v4 = (**this)(this, URLforIndex, this + 1216);
    if (v4)
    {
      if (!isSequence)
      {
        goto LABEL_47;
      }

      goto LABEL_44;
    }

    ++*(this + 311);
    *(this + 24) = 0u;
    *(this + 40) = 0u;
    *(this + 56) = 0u;
    *(this + 72) = 0u;
    *(this + 88) = 0u;
    *(this + 104) = 0u;
    *(this + 120) = 0u;
    *(this + 136) = 0u;
    *(this + 152) = 0u;
    *(this + 168) = 0u;
    *(this + 184) = 0u;
    *(this + 200) = 0u;
    *(this + 216) = 0u;
    *(this + 232) = 0u;
    *(this + 248) = 0u;
    *(this + 8) = 0u;
    *(this + 264) = 0u;
    *(this + 280) = 0u;
    *(this + 296) = 0u;
    *(this + 312) = 0u;
    *(this + 328) = 0u;
    *(this + 344) = 0u;
    *(this + 360) = 0u;
    *(this + 376) = 0u;
    *(this + 392) = 0u;
    *(this + 408) = 0u;
    *(this + 424) = 0u;
    *(this + 440) = 0u;
    *(this + 456) = 0u;
    *(this + 472) = 0u;
    *(this + 488) = 0u;
    *(this + 1112) = 0u;
    *(this + 1128) = 0u;
    *(this + 1080) = 0u;
    *(this + 1096) = 0u;
    *(this + 1048) = 0u;
    *(this + 1064) = 0u;
    *(this + 1016) = 0u;
    *(this + 1032) = 0u;
    *(this + 984) = 0u;
    *(this + 1000) = 0u;
    *(this + 952) = 0u;
    *(this + 968) = 0u;
    *(this + 920) = 0u;
    *(this + 936) = 0u;
    *(this + 888) = 0u;
    *(this + 904) = 0u;
    *(this + 856) = 0u;
    *(this + 872) = 0u;
    *(this + 824) = 0u;
    *(this + 840) = 0u;
    *(this + 792) = 0u;
    *(this + 808) = 0u;
    *(this + 760) = 0u;
    *(this + 776) = 0u;
    *(this + 728) = 0u;
    *(this + 744) = 0u;
    *(this + 696) = 0u;
    *(this + 712) = 0u;
    *(this + 664) = 0u;
    *(this + 680) = 0u;
    *(this + 648) = 0u;
    v4 = (*(*this + 24))(this, URLforIndex, *(this + 152));
    if (!*(this + 108))
    {
      *(this + 108) = *(this + 72);
    }

    if (!*(this + 109))
    {
      *(this + 109) = *(this + 73);
    }

    PMClip::getFormatName(this, &v25);
    if (PCString::empty(&v25))
    {
      *(this + 1241) = 0;
      if (v4)
      {
        goto LABEL_43;
      }
    }

    else
    {
      PCString::PCString(&v21, "OpenEXR");
      *(this + 1241) = PCString::compare(&v25, &v21) == kCFCompareEqualTo;
      PCString::~PCString(&v21);
      if (v4)
      {
        goto LABEL_43;
      }
    }

    v8 = *(this + 98);
    if (v8)
    {
      v9 = 1;
      do
      {
        v21.value = 0;
        *&v21.timescale = 0;
        v21.epoch = 0x500000000;
        v22 = 0x3FF0000000000000;
        v23 = 0;
        PCSharedCount::PCSharedCount(v24);
        v10 = *(*this + 32);
        if (v10)
        {
          v4 = v10(this, &v21, v9 - 1, URLforIndex, *(this + 152));
        }

        else
        {
          v4 = 0;
        }

        v11 = *(this + 144);
        if (v11 >= *(this + 145))
        {
          v12 = std::vector<PMLayerDescription>::__emplace_back_slow_path<PMLayerDescription const&>(this + 1144, &v21);
        }

        else
        {
          PMLayerDescription::PMLayerDescription(*(this + 144), &v21);
          v12 = v11 + 48;
          *(this + 144) = v11 + 48;
        }

        *(this + 144) = v12;
        PCString::~PCString(v24);
        if (v9 > v8)
        {
          break;
        }

        ++v9;
      }

      while (!v4);
    }

    else
    {
      v4 = 0;
    }

    v13 = *(this + 129);
    if (v13)
    {
      v5 = (this + 1224);
      if (!v4)
      {
        v14 = 1;
        do
        {
          PMAudioDescription::PMAudioDescription(&v21);
          v15 = *(*this + 96);
          if (v15)
          {
            v4 = v15(this, &v21, v14 - 1, URLforIndex, *(this + 152));
          }

          else
          {
            v4 = 0;
          }

          v16 = *(this + 147);
          if (v16 >= *(this + 148))
          {
            v17 = std::vector<PMAudioDescription>::__emplace_back_slow_path<PMAudioDescription const&>(this + 1168, &v21);
          }

          else
          {
            PMAudioDescription::PMAudioDescription(*(this + 147), &v21);
            v17 = v16 + 112;
            *(this + 147) = v16 + 112;
          }

          *(this + 147) = v17;
          PMAudioDescription::~PMAudioDescription(&v21);
          if (v14 >= v13)
          {
            break;
          }

          ++v14;
        }

        while (!v4);
      }
    }

    else
    {
      v5 = (this + 1224);
    }

LABEL_43:
    PCString::~PCString(&v25);
    if (!isSequence)
    {
LABEL_47:
      *(this + 1249) = 0;
      goto LABEL_48;
    }

LABEL_44:
    if (URLforIndex)
    {
      PCURL::~PCURL(URLforIndex);
      MEMORY[0x2666E9F00]();
    }

    SequenceEnd = PCURL::getSequenceEnd(v5);
    v19 = SequenceEnd - PCURL::getSequenceStart(v5) + 1;
    *(this + 86) = v19;
    CMTimeMake(&v21, v19, *(this + 45));
    *(this + 296) = v21;
    goto LABEL_47;
  }

  v4 = 0;
  *(this + 311) = v3 + 1;
LABEL_48:
  PCMutex::unlock(v2);
  return v4;
}

void sub_260318F18(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, ...)
{
  va_start(va, a3);
  PCString::~PCString(va);
  PCString::~PCString((v3 - 112));
  PCLockSentry<PCMutex>::~PCLockSentry(v3 - 104);
  _Unwind_Resume(a1);
}

void PMClip::getFormatName(PMClip *this@<X0>, PCString *a2@<X8>)
{
  v3 = *this;
  if (v3)
  {
    v4 = (*(v3 + 240))();

    PCString::PCString(a2, v4);
  }

  else
  {

    PCSharedCount::PCSharedCount(a2);
  }
}

uint64_t PMClip::reloadResources(PMClip *this)
{
  v2 = (this + 1256);
  v12 = this + 1256;
  PCMutex::lock((this + 1256));
  v13 = 1;
  if (*(this + 311))
  {
    v3 = *this;
    if (*this && (*(this + 1249) & 1) == 0)
    {
      v4 = *(this + 1240);
      URLforIndex = (this + 1224);
      if (v4 == 1)
      {
        URLforIndex = PCURL::getURLforIndex(this + 153, 0);
        v3 = *this;
      }

      v6 = *(v3 + 2);
      if (v6)
      {
        v6(this, *(this + 152));
        *(this + 152) = 0;
        v3 = *this;
      }

      v7 = *v3;
      if (v7 && !v7(this, URLforIndex, this + 1216))
      {
        (*(*this + 24))(this, URLforIndex, *(this + 152));
      }

      if (v4)
      {
        if (URLforIndex)
        {
          PCURL::~PCURL(URLforIndex);
          MEMORY[0x2666E9F00]();
        }

        SequenceEnd = PCURL::getSequenceEnd(this + 153);
        v9 = SequenceEnd - PCURL::getSequenceStart(this + 153) + 1;
        *(this + 86) = v9;
        CMTimeMake(&v11, v9, *(this + 45));
        *(this + 296) = v11;
      }
    }

    *(this + 1249) = 1;
  }

  PCMutex::unlock(v2);
  return 0;
}

void sub_26031915C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  PCLockSentry<PCMutex>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

void PMClip::getCodecName(PMClip *this@<X0>, PCURL *a2@<X8>)
{
  if (*this)
  {
    v3 = CFStringCreateWithCString(0, this + 8, 0);
    PCURL::PCURL(a2, v3);
    if (v3)
    {
      CFRelease(v3);
    }
  }

  else
  {

    PCSharedCount::PCSharedCount(a2);
  }
}

uint64_t PMClip::getDuration@<X0>(uint64_t this@<X0>, CMTime *a2@<X8>)
{
  v2 = this;
  if (*(this + 392))
  {
    a2->epoch = *(this + 312);
    *&a2->value = *(this + 296);
  }

  else
  {
    v4 = *(this + 516);
    v5 = MEMORY[0x277CC08F0];
    *&a2->value = *MEMORY[0x277CC08F0];
    a2->epoch = *(v5 + 16);
    if (v4)
    {
      v6 = 0;
      v7 = 24;
      do
      {
        v8 = *(v2 + 1168) + v7;
        v9 = *v8;
        v10 = *(v8 + 16);
        *&time1.value = *v8;
        time1.epoch = v10;
        time2 = *a2;
        this = CMTimeCompare(&time1, &time2);
        if (this >= 1)
        {
          *&a2->value = v9;
          a2->epoch = v10;
        }

        ++v6;
        v7 += 112;
      }

      while (v6 < *(v2 + 516));
    }
  }

  return this;
}

double PMClip::getSeconds(PMClip *this, double a2)
{
  if (*(this + 98))
  {
    LODWORD(a2) = *(this + 86);
    return *&a2 / *(this + 45);
  }

  else
  {
    v3 = *(this + 129);
    if (v3)
    {
      v4 = (*(this + 146) + 64);
      result = 0.0;
      do
      {
        v5 = *(v4 - 6);
        v6 = *v4;
        v4 += 14;
        v7 = v5 / v6;
        if (v7 > result)
        {
          result = v7;
        }

        --v3;
      }

      while (v3);
    }

    else
    {
      return 0.0;
    }
  }

  return result;
}

__darwin_time_t PMClip::getModificationDate(PMClip *this)
{
  if (*(this + 1240) == 1)
  {
    SequenceLength = PCURL::getSequenceLength(this + 153);
    if (SequenceLength < 1)
    {
      return 0;
    }

    else
    {
      v3 = SequenceLength;
      tv_sec = 0;
      for (i = 0; i != v3; ++i)
      {
        URLforIndex = PCURL::getURLforIndex(this + 153, i);
        if (URLforIndex)
        {
          v7 = URLforIndex;
          PCURL::getAsFileSystemString(URLforIndex, &v13);
          v8 = PCString::createUTF8Str(&v13);
          PCString::~PCString(&v13);
          v9 = stat(v8, &v14);
          free(v8);
          PCURL::~PCURL(v7);
          MEMORY[0x2666E9F00]();
          if (!v9 && v14.st_mtimespec.tv_sec > tv_sec)
          {
            tv_sec = v14.st_mtimespec.tv_sec;
          }
        }
      }
    }
  }

  else
  {
    UTF8Str = PCString::createUTF8Str(this + 154);
    v11 = stat(UTF8Str, &v14);
    free(UTF8Str);
    if (v11)
    {
      return 0;
    }

    else
    {
      return v14.st_mtimespec.tv_sec;
    }
  }

  return tv_sec;
}

uint64_t PMClip::getVideoDescription(uint64_t a1, void *__dst)
{
  memcpy(__dst, (a1 + 8), 0x1C0uLL);
  PCString::set(__dst + 56, (a1 + 456));
  v4 = *(a1 + 464);
  *(__dst + 116) = *(a1 + 472);
  *(__dst + 57) = v4;
  PCCFRef<CGColorSpace *>::operator=(__dst + 59, (a1 + 480));
  *(__dst + 30) = *(a1 + 488);
  if (*(a1 + 392))
  {
    return 0;
  }

  else
  {
    return 7;
  }
}

uint64_t PMClip::getLayerDescription(PMClip *this, PMLayerDescription *a2, unsigned int a3)
{
  v3 = *(this + 98);
  if (v3)
  {
    v4 = v3 >= a3;
  }

  else
  {
    v4 = 0;
  }

  if (!v4)
  {
    return 7;
  }

  PMLayerDescription::operator=(a2, *(this + 143) + 48 * a3);
  return 0;
}

uint64_t PMClip::getMediaID@<X0>(PMClip *this@<X0>, PCSharedCount *a2@<X8>)
{
  PCSharedCount::PCSharedCount(a2);
  PCMutex::lock((this + 1256));
  if (*this)
  {
    v4 = *(*this + 56);
    if (v4)
    {
      v4(this, this + 1224, a2, *(this + 152));
    }
  }

  return PCMutex::unlock((this + 1256));
}

void sub_2603195EC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{
  PCLockSentry<PCMutex>::~PCLockSentry(&a9);
  PCString::~PCString(v9);
  _Unwind_Resume(a1);
}

uint64_t PMClip::prerollBegin(uint64_t a1, __int128 *a2, uint64_t a3, uint64_t a4, double a5)
{
  v10 = (a1 + 1256);
  v16 = a1 + 1256;
  PCMutex::lock((a1 + 1256));
  v17 = 1;
  if (*a1 && *(a1 + 1244))
  {
    v11 = *(*a1 + 120);
    if (v11)
    {
      v14 = *a2;
      v15 = *(a2 + 2);
      v12 = v11(a1, a1 + 1224, &v14, a3, a4, *(a1 + 1216), a5);
    }

    else
    {
      v12 = 0;
    }
  }

  else
  {
    v12 = 6;
  }

  PCMutex::unlock(v10);
  return v12;
}

void sub_2603196E4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  PCLockSentry<PCMutex>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

uint64_t PMClip::prerollEnd(uint64_t a1, uint64_t a2)
{
  v4 = (a1 + 1256);
  PCMutex::lock((a1 + 1256));
  if (*a1 && *(a1 + 1244))
  {
    v5 = *(*a1 + 128);
    if (v5)
    {
      v6 = v5(a1, a1 + 1224, a2, *(a1 + 1216));
    }

    else
    {
      v6 = 0;
    }
  }

  else
  {
    v6 = 6;
  }

  PCMutex::unlock(v4);
  return v6;
}

uint64_t PMClip::setRate(uint64_t a1, double a2, uint64_t a3, uint64_t a4)
{
  v7 = (a1 + 1256);
  PCMutex::lock((a1 + 1256));
  if (*a1 && *(a1 + 1244))
  {
    v8 = *(*a1 + 136);
    if (v8)
    {
      v9 = v8(a1, a1 + 1224, a4, *(a1 + 1216), a2);
    }

    else
    {
      v9 = 0;
    }
  }

  else
  {
    v9 = 6;
  }

  PCMutex::unlock(v7);
  return v9;
}

uint64_t PMClip::scheduleTokens(uint64_t a1, __int128 **a2, uint64_t a3, uint64_t a4)
{
  v8 = (a1 + 1256);
  v13[3] = a1 + 1256;
  PCMutex::lock((a1 + 1256));
  v14 = 1;
  if (*a1 && *(a1 + 1244))
  {
    memset(v13, 0, 24);
    v12 = *(a1 + 320);
    transformTokenTimes(a2, v13, &v12);
    if (*a1 && (v9 = *(*a1 + 144)) != 0)
    {
      v10 = v9(a1, a1 + 1224, v13, a3, a4, *(a1 + 1216));
    }

    else
    {
      v10 = 0;
    }

    v12.value = v13;
    std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&v12);
  }

  else
  {
    v10 = 6;
  }

  PCMutex::unlock(v8);
  return v10;
}

void sub_26031995C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9, uint64_t a10, uint64_t a11, char a12, uint64_t a13, uint64_t a14, char a15)
{
  a9 = &a12;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&a9);
  PCLockSentry<PCMutex>::~PCLockSentry(&a15);
  _Unwind_Resume(a1);
}

void transformTokenTimes(__int128 **a1, void *a2, CMTime *a3)
{
  v3 = *a1;
  v25 = a1[1];
  if (*a1 != v25)
  {
    do
    {
      std::vector<std::pair<CMTime,std::vector<CMTime>>>::resize(a2, 1 - 0x5555555555555555 * ((a2[1] - *a2) >> 4));
      v5 = a2[1];
      v6 = *v3;
      *(v5 - 32) = *(v3 + 2);
      *(v5 - 48) = v6;
      v7 = *(v3 + 3);
      v8 = *(v3 + 4);
      if (v7 != v8)
      {
        v9 = (v5 - 24);
        do
        {
          v10 = *v7;
          v30.epoch = *(v7 + 2);
          *&v30.value = v10;
          v29 = *a3;
          PC_CMTimeFloorToSampleDuration(&v30, &v29, &v27);
          v12 = *(v5 - 16);
          v11 = *(v5 - 8);
          if (v12 >= v11)
          {
            v15 = 0xAAAAAAAAAAAAAAABLL * ((v12 - *v9) >> 3);
            v16 = v15 + 1;
            if (v15 + 1 > 0xAAAAAAAAAAAAAAALL)
            {
              std::vector<double>::__throw_length_error[abi:ne200100]();
            }

            v17 = 0xAAAAAAAAAAAAAAABLL * ((v11 - *v9) >> 3);
            if (2 * v17 > v16)
            {
              v16 = 2 * v17;
            }

            if (v17 >= 0x555555555555555)
            {
              v18 = 0xAAAAAAAAAAAAAAALL;
            }

            else
            {
              v18 = v16;
            }

            if (v18)
            {
              std::__allocate_at_least[abi:ne200100]<std::allocator<PCVector3<double>>>(v5 - 24, v18);
            }

            v19 = 24 * v15;
            v20 = v27;
            *(v19 + 16) = v28;
            *v19 = v20;
            v14 = 24 * v15 + 24;
            v21 = *(v5 - 24);
            v22 = *(v5 - 16) - v21;
            v23 = 24 * v15 - v22;
            memcpy((v19 - v22), v21, v22);
            v24 = *(v5 - 24);
            *(v5 - 24) = v23;
            *(v5 - 16) = v14;
            *(v5 - 8) = 0;
            if (v24)
            {
              operator delete(v24);
            }
          }

          else
          {
            v13 = v27;
            *(v12 + 16) = v28;
            *v12 = v13;
            v14 = v12 + 24;
          }

          *(v5 - 16) = v14;
          v7 = (v7 + 24);
        }

        while (v7 != v8);
      }

      v3 += 3;
    }

    while (v3 != v25);
  }
}

uint64_t PMClip::hintTokensWillImage(uint64_t a1, __int128 **a2, uint64_t a3)
{
  v6 = (a1 + 1256);
  v11[3] = a1 + 1256;
  PCMutex::lock((a1 + 1256));
  v12 = 1;
  if (*a1 && *(a1 + 1244))
  {
    memset(v11, 0, 24);
    v10 = *(a1 + 320);
    transformTokenTimes(a2, v11, &v10);
    if (*a1 && (v7 = *(*a1 + 152)) != 0)
    {
      v8 = v7(a1, a1 + 1224, v11, a3, *(a1 + 1216));
    }

    else
    {
      v8 = 0;
    }

    v10.value = v11;
    std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&v10);
  }

  else
  {
    v8 = 6;
  }

  PCMutex::unlock(v6);
  return v8;
}

void sub_260319C3C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9, uint64_t a10, uint64_t a11, char a12, uint64_t a13, uint64_t a14, char a15)
{
  a9 = &a12;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&a9);
  PCLockSentry<PCMutex>::~PCLockSentry(&a15);
  _Unwind_Resume(a1);
}

uint64_t PMClip::getTokensImage(uint64_t a1, __int128 **a2, uint64_t a3)
{
  v6 = (a1 + 1256);
  v11[3] = a1 + 1256;
  PCMutex::lock((a1 + 1256));
  v12 = 1;
  if (*a1 && *(a1 + 1244))
  {
    memset(v11, 0, 24);
    v10 = *(a1 + 320);
    transformTokenTimes(a2, v11, &v10);
    if (*a1 && (v7 = *(*a1 + 160)) != 0)
    {
      v8 = v7(a1, a1 + 1224, v11, a3, *(a1 + 1216));
    }

    else
    {
      v8 = 0;
    }

    v10.value = v11;
    std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&v10);
  }

  else
  {
    v8 = 6;
  }

  PCMutex::unlock(v6);
  return v8;
}

void sub_260319D48(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9, uint64_t a10, uint64_t a11, char a12, uint64_t a13, uint64_t a14, char a15)
{
  a9 = &a12;
  std::vector<std::pair<CMTime,std::vector<CMTime>>>::__destroy_vector::operator()[abi:ne200100](&a9);
  PCLockSentry<PCMutex>::~PCLockSentry(&a15);
  _Unwind_Resume(a1);
}

uint64_t PMClip::pruneTokensAtTime(PMClip *this, const CMTime *a2, const char *a3)
{
  v6 = (this + 1256);
  v12 = this + 1256;
  PCMutex::lock((this + 1256));
  v13 = 1;
  if (*this && *(this + 311))
  {
    v7 = *(*this + 168);
    if (v7)
    {
      v10 = *&a2->value;
      epoch = a2->epoch;
      v8 = v7(this, this + 1224, &v10, a3, *(this + 152));
    }

    else
    {
      v8 = 0;
    }
  }

  else
  {
    v8 = 6;
  }

  PCMutex::unlock(v6);
  return v8;
}

void sub_260319E24(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  PCLockSentry<PCMutex>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

uint64_t PMClip::pruneTokensExceptAtTime(PMClip *this, const CMTime *a2, const char *a3)
{
  v6 = (this + 1256);
  v12 = this + 1256;
  PCMutex::lock((this + 1256));
  v13 = 1;
  if (*this && *(this + 311))
  {
    v7 = *(*this + 176);
    if (v7)
    {
      v10 = *&a2->value;
      epoch = a2->epoch;
      v8 = v7(this, this + 1224, &v10, a3, *(this + 152));
    }

    else
    {
      v8 = 0;
    }
  }

  else
  {
    v8 = 6;
  }

  PCMutex::unlock(v6);
  return v8;
}

void sub_260319EEC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  PCLockSentry<PCMutex>::~PCLockSentry(va);
  _Unwind_Resume(a1);
}

uint64_t PMClip::pruneAllTokens(PMClip *this, const char *a2)
{
  v4 = (this + 1256);
  PCMutex::lock((this + 1256));
  if (*this && *(this + 311))
  {
    v5 = *(*this + 184);
    if (v5)
    {
      v6 = v5(this, this + 1224, a2, *(this + 152));
    }

    else
    {
      v6 = 0;
    }
  }

  else
  {
    v6 = 6;
  }

  PCMutex::unlock(v4);
  return v6;
}

uint64_t PMClip::getDynamicRangeType(PMClip *this)
{
  v1 = *(this + 117);
  if (v1 == 8 || v1 == 18)
  {
    return 1;
  }

  if (v1 == 16)
  {
    return 2;
  }

  v5 = *(this + 60);
  if (!v5)
  {
    return 0;
  }

  if (CGColorSpaceIsHLGBased(v5))
  {
    return 1;
  }

  if (CGColorSpaceIsPQBased(*(this + 60)))
  {
    return 2;
  }

  else
  {
    return 0;
  }
}

uint64_t PMClip::getFrame(uint64_t a1, CMTime *a2, uint64_t a3, PMFrameRequest *a4, uint64_t a5, HGNode **a6, uint64_t a7)
{
  v13 = (a1 + 1256);
  PCMutex::lock((a1 + 1256));
  if (*a1 && *(a1 + 1244))
  {
    if (*(*a1 + 80))
    {
      v15 = FigTimeToFrameWithRate(a2, ceil(*(a1 + 360) + -0.01));
      URLforIndex = (a1 + 1224);
      if (*(a1 + 1240) == 1 && ((v17 = v15, *(a1 + 344) - 1 >= (v17 & ~(v17 >> 31))) ? (v18 = v17 & ~(v17 >> 31)) : (v18 = *(a1 + 344) - 1), (URLforIndex = PCURL::getURLforIndex((a1 + 1224), v18)) == 0))
      {
        FrameNonCached = 11;
      }

      else
      {
        FrameNonCached = PMClip::getFrameNonCached(a1, &a2->value, v14, a4, URLforIndex, a5, a6, a7);
        if (*(a1 + 1240) == 1)
        {
          PCURL::~PCURL(URLforIndex);
          MEMORY[0x2666E9F00](v20, 0x60C4044C4A2DFLL);
        }
      }
    }

    else
    {
      FrameNonCached = 1;
    }
  }

  else
  {
    FrameNonCached = 6;
  }

  PCMutex::unlock(v13);
  return FrameNonCached;
}

uint64_t PMClip::getFrameNonCached(void *a1, __int128 *a2, uint64_t a3, PMFrameRequest *a4, uint64_t a5, uint64_t a6, HGNode **a7, uint64_t a8)
{
  v43 = *(a1 + 40);
  memset(&v42, 0, sizeof(v42));
  v37[0] = *(a1 + 40);
  PC_CMTimeHalve(v37, &v42);
  memset(&v41, 0, sizeof(v41));
  v37[0] = *a2;
  time1 = v43;
  PC_CMTimeFloorToSampleDuration(v37, &time1, &v41);
  PMFrameRequest::PMFrameRequest(v37, a4);
  if (PMFrameRequest::getResolutionMode(a4) > 0)
  {
    v15 = 0;
LABEL_3:
    v38 = v15;
    goto LABEL_4;
  }

  if (v38 == 2)
  {
    memset(&v36, 0, sizeof(v36));
    operator/(a2, &v43, &v36);
    CMTimeMake(&v44, 1, 1);
    time1 = v36;
    time2 = v44;
    PC_CMTimeFloorToSampleDuration(&time1, &time2, &v45);
    time1 = v36;
    time2 = v45;
    PC_CMTimeSaferSubtract(&time1, &time2, &v46);
    operator*(&v46.value, &v43, &time1);
    v36 = time1;
    time2 = v42;
    if (CMTimeCompare(&time1, &time2) < 0)
    {
      goto LABEL_4;
    }

    v15 = 1;
    goto LABEL_3;
  }

  if (v38 == 1)
  {
    memset(&v36, 0, sizeof(v36));
    operator/(a2, &v43, &v36);
    CMTimeMake(&v44, 1, 1);
    time1 = v36;
    time2 = v44;
    PC_CMTimeFloorToSampleDuration(&time1, &time2, &v45);
    time1 = v36;
    time2 = v45;
    PC_CMTimeSaferSubtract(&time1, &time2, &v46);
    operator*(&v46.value, &v43, &time1);
    v36 = time1;
    time2 = v42;
    if ((CMTimeCompare(&time1, &time2) & 0x80000000) == 0)
    {
      v15 = 2;
      goto LABEL_3;
    }
  }

LABEL_4:
  if (!*(a1 + 100) || PMFrameRequest::getResolutionMode(a4) >= 1)
  {
    v16 = (*(*a1 + 80))(a1, a5, &v41, v37, a6, a7, a8, a1[152]);
    if (v16)
    {
      v17 = HGObject::operator new(0x1A0uLL);
      HGNode::HGNode(v17);
      v18 = *a7;
      if (*a7 != v17)
      {
        if (!v18)
        {
LABEL_10:
          *a7 = v17;
          goto LABEL_60;
        }

LABEL_9:
        (*(*v18 + 24))(v18);
        goto LABEL_10;
      }

      if (!v17)
      {
        goto LABEL_60;
      }

      goto LABEL_31;
    }

    v19 = v38;
    if (v38)
    {
      v20 = HGObject::operator new(0x1B0uLL);
      PMStripField::PMStripField(v20, v19 == 1);
      (*(*v20 + 120))(v20, 0, *a7);
      v21 = *a7;
      if (*a7 != v20)
      {
        if (v21)
        {
          (*(*v21 + 24))(v21);
        }

        *a7 = v20;
        (*(*v20 + 16))(v20);
      }

      (*(*v20 + 24))(v20);
    }

    v16 = 0;
    goto LABEL_22;
  }

  if (v38)
  {
    v45 = v41;
    if (*(a1 + 100) != v38)
    {
      time2 = v41;
      v46 = v42;
      PC_CMTimeSaferAdd(&time2, &v46, &time1);
      v45 = time1;
    }

    v16 = (*(*a1 + 80))(a1, a5, &v45, v37, a6, a7, a8, a1[152]);
    if (v16)
    {
      v17 = HGObject::operator new(0x1A0uLL);
      HGNode::HGNode(v17);
      v18 = *a7;
      if (*a7 != v17)
      {
        if (!v18)
        {
          goto LABEL_10;
        }

        goto LABEL_9;
      }

      if (!v17)
      {
        goto LABEL_60;
      }

LABEL_31:
      (*(*v17 + 24))(v17);
      goto LABEL_60;
    }

LABEL_22:
    *(a1 + 1249) = 0;
    goto LABEL_60;
  }

  v45.value = 0;
  v44.value = 0;
  if (*(a1 + 100) == 2)
  {
    v22 = 2;
  }

  else
  {
    v22 = 1;
  }

  if (*(a1 + 100) == 2)
  {
    v23 = 1;
  }

  else
  {
    v23 = 2;
  }

  v38 = v22;
  v16 = (*(*a1 + 80))(a1, a5, &v41, v37, a6, &v45, a8, a1[152]);
  if (v16)
  {
    v24 = HGObject::operator new(0x1A0uLL);
    HGNode::HGNode(v24);
    v25 = *a7;
    if (*a7 != v24)
    {
      if (v25)
      {
        goto LABEL_49;
      }

      goto LABEL_50;
    }

    if (!v24)
    {
      goto LABEL_56;
    }

LABEL_55:
    (*(*v24 + 24))(v24);
    goto LABEL_56;
  }

  v38 = v23;
  v26 = *(*a1 + 80);
  time1 = v41;
  time2 = v42;
  v27 = PC_CMTimeSaferAdd(&time1, &time2, &v46);
  v16 = v26(a1, a5, &v46, v37, a6, &v44, a8, a1[152], v27);
  if (!v16)
  {
    PCPrint("File %s, line %d should not have been reached:\n\t", v28, v29, v30, v31, v32, v33, v34, "/Library/Caches/com.apple.xbs/Sources/MotioniOS/ProMedia/PMClip.mm");
    pcAbortImpl();
  }

  v24 = HGObject::operator new(0x1A0uLL);
  HGNode::HGNode(v24);
  v25 = *a7;
  if (*a7 == v24)
  {
    if (!v24)
    {
      goto LABEL_56;
    }

    goto LABEL_55;
  }

  if (v25)
  {
LABEL_49:
    (*(*v25 + 24))(v25);
  }

LABEL_50:
  *a7 = v24;
LABEL_56:
  if (v44.value)
  {
    (*(*v44.value + 24))(v44.value);
  }

  if (v45.value)
  {
    (*(*v45.value + 24))(v45.value);
  }

LABEL_60:
  PCCFRef<CGColorSpace *>::~PCCFRef(&v40);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v39);
  return v16;
}

void sub_26031A994(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, CGColorSpace *a39, CGColorSpace *a40)
{
  if (v40)
  {
    (*(*v40 + 24))(v40);
  }

  v43 = *(v41 - 232);
  if (v43)
  {
    (*(*v43 + 24))(v43);
  }

  v44 = *(v41 - 208);
  if (v44)
  {
    (*(*v44 + 24))(v44);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(&a40);
  PCCFRef<CGColorSpace *>::~PCCFRef(&a39);
  _Unwind_Resume(a1);
}

double PMClip::setFrameRate(PMClip *this, double a2)
{
  v4 = a2 + 0.5 + 0.0000001;
  *(this + 45) = a2;
  v5 = 10000 * vcvtmd_s64_f64(v4);
  LODWORD(v4) = *(this + 86);
  PC_CMTimeMakeWithSecondsRoundToNearest(v5, &v7, *&v4 / a2);
  *(this + 296) = v7;
  PC_CMTimeMakeWithSecondsRoundToNearest(v5, &v7, 1.0 / a2);
  result = *&v7.value;
  *(this + 320) = v7;
  return result;
}

CGColorSpace **PMClip::guessAlphaFormat(uint64_t a1, uint64_t a2, _DWORD *a3, uint64_t a4, _BYTE *a5)
{
  *a3 = 0;
  PCColor::PCColor(&v17);
  v10 = *&v17.var0.var1[1];
  *a4 = *&v17.var0.var0;
  *(a4 + 16) = v10;
  *(a4 + 32) = *&v17.var0.var1[3];
  v11 = *(a4 + 48);
  obj = v17.var1._obj;
  if (v11 && v11 != v17.var1._obj)
  {
    PCCFRefTraits<CGColorSpace *>::release(v11);
    obj = v17.var1._obj;
  }

  *(a4 + 48) = obj;
  v17.var1._obj = 0;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v17.var1._obj);
  *a5 = 0;
  if (*(a1 + 392) && *(*a1 + 40))
  {
    URLforIndex = (a1 + 1224);
    isSequence = PCURL::isSequence((a1 + 1224));
    if (isSequence)
    {
      URLforIndex = PCURL::getURLforIndex((a1 + 1224), 0);
    }

    result = (*(*a1 + 40))(a1, URLforIndex, a2, a3, a5, *(a1 + 1216));
    if (!result)
    {
      *(a1 + 453) = *a3 == 2;
    }

    v16 = isSequence ^ 1;
    if (!URLforIndex)
    {
      v16 = 1;
    }

    if ((v16 & 1) == 0)
    {
      PCURL::~PCURL(URLforIndex);
      return MEMORY[0x2666E9F00]();
    }
  }

  return result;
}

uint64_t PMClip::setAlphaFormat(uint64_t result, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5)
{
  if (*(result + 392))
  {
    v5 = result;
    if (*(*result + 48))
    {
      URLforIndex = (result + 1224);
      isSequence = PCURL::isSequence((result + 1224));
      if (isSequence)
      {
        URLforIndex = PCURL::getURLforIndex((v5 + 1224), 0);
      }

      result = (*(*v5 + 48))(v5, URLforIndex, a2, a3, a5, *(v5 + 1216));
      v11 = isSequence ^ 1;
      if (!URLforIndex)
      {
        v11 = 1;
      }

      if ((v11 & 1) == 0)
      {
        PCURL::~PCURL(URLforIndex);

        JUMPOUT(0x2666E9F00);
      }
    }
  }

  return result;
}

void PMFormatDescription::~PMFormatDescription(PMFormatDescription *this)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(this + 140);
  PCString::~PCString(this + 137);
  PMAudioDescription::~PMAudioDescription(this + 65);
  PCCFRef<CGColorSpace *>::~PCCFRef(this + 60);
  PCString::~PCString(this + 57);
}

void PMAudioDescription::~PMAudioDescription(PCString *this)
{
  v2 = this + 11;
  std::vector<PMAudioChannelDescription>::__destroy_vector::operator()[abi:ne200100](&v2);
  PCString::~PCString(this + 7);
  PCString::~PCString(this);
}

void std::vector<PMAudioChannelDescription>::__destroy_vector::operator()[abi:ne200100](void ***a1)
{
  v1 = *a1;
  v2 = **a1;
  if (v2)
  {
    v4 = v1[1];
    v5 = v2;
    if (v4 != v2)
    {
      do
      {
        PCString::~PCString(v4 - 2);
      }

      while (v4 != v2);
      v5 = **a1;
    }

    v1[1] = v2;

    operator delete(v5);
  }
}

void std::vector<std::pair<CMTime,std::vector<CMTime>>>::resize(void *a1, unint64_t a2)
{
  v3 = a1[1];
  v4 = 0xAAAAAAAAAAAAAAABLL * ((v3 - *a1) >> 4);
  v5 = a2 >= v4;
  v6 = a2 - v4;
  if (v6 != 0 && v5)
  {

    std::vector<std::pair<CMTime,std::vector<CMTime>>>::__append(a1, v6);
  }

  else if (!v5)
  {
    v7 = *a1 + 48 * a2;
    while (v3 != v7)
    {
      v8 = *(v3 - 24);
      if (v8)
      {
        *(v3 - 16) = v8;
        operator delete(v8);
      }

      v3 -= 48;
    }

    a1[1] = v7;
  }
}

void std::vector<std::pair<CMTime,std::vector<CMTime>>>::__append(uint64_t a1, unint64_t a2)
{
  v5 = *(a1 + 8);
  v4 = *(a1 + 16);
  if (0xAAAAAAAAAAAAAAABLL * ((v4 - v5) >> 4) >= a2)
  {
    if (a2)
    {
      v10 = 48 * ((48 * a2 - 48) / 0x30) + 48;
      bzero(*(a1 + 8), v10);
      v5 += v10;
    }

    *(a1 + 8) = v5;
  }

  else
  {
    v6 = 0xAAAAAAAAAAAAAAABLL * ((v5 - *a1) >> 4);
    v7 = v6 + a2;
    if (v6 + a2 > 0x555555555555555)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v8 = 0xAAAAAAAAAAAAAAABLL * ((v4 - *a1) >> 4);
    if (2 * v8 > v7)
    {
      v7 = 2 * v8;
    }

    if (v8 >= 0x2AAAAAAAAAAAAAALL)
    {
      v9 = 0x555555555555555;
    }

    else
    {
      v9 = v7;
    }

    v18[4] = a1;
    if (v9)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<std::pair<CMTime,std::vector<CMTime>>>>(a1, v9);
    }

    v11 = 48 * v6;
    v12 = 48 * ((48 * a2 - 48) / 0x30) + 48;
    bzero(v11, v12);
    v13 = v11 + v12;
    v14 = *(a1 + 8) - *a1;
    v15 = v11 - v14;
    memcpy((v11 - v14), *a1, v14);
    v16 = *a1;
    *a1 = v15;
    *(a1 + 8) = v13;
    v17 = *(a1 + 16);
    *(a1 + 16) = 0;
    v18[2] = v16;
    v18[3] = v17;
    v18[0] = v16;
    v18[1] = v16;
    std::__split_buffer<std::pair<CMTime,std::vector<CMTime>>>::~__split_buffer(v18);
  }
}

uint64_t std::__split_buffer<std::pair<CMTime,std::vector<CMTime>>>::~__split_buffer(uint64_t a1)
{
  std::__split_buffer<std::pair<CMTime,std::vector<CMTime>>>::__destruct_at_end[abi:ne200100](a1, *(a1 + 8));
  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

void std::__split_buffer<std::pair<CMTime,std::vector<CMTime>>>::__destruct_at_end[abi:ne200100](uint64_t a1, uint64_t a2)
{
  v2 = *(a1 + 16);
  while (v2 != a2)
  {
    *(a1 + 16) = v2 - 48;
    v5 = *(v2 - 24);
    if (v5)
    {
      *(v2 - 16) = v5;
      operator delete(v5);
      v2 = *(a1 + 16);
    }

    else
    {
      v2 -= 48;
    }
  }
}

void std::vector<PMLayerDescription>::__destroy_vector::operator()[abi:ne200100](void ***a1)
{
  v1 = *a1;
  v2 = **a1;
  if (v2)
  {
    v4 = v1[1];
    v5 = **a1;
    if (v4 != v2)
    {
      do
      {
        v6 = v4 - 6;
        PCString::~PCString(v4 - 1);
        v4 = v6;
      }

      while (v6 != v2);
      v5 = **a1;
    }

    v1[1] = v2;

    operator delete(v5);
  }
}

void std::vector<PMAudioDescription>::__destroy_vector::operator()[abi:ne200100](void ***a1)
{
  v1 = *a1;
  v2 = **a1;
  if (v2)
  {
    v4 = v1[1];
    v5 = v2;
    if (v4 != v2)
    {
      do
      {
        PMAudioDescription::~PMAudioDescription(v4 - 14);
      }

      while (v4 != v2);
      v5 = **a1;
    }

    v1[1] = v2;

    operator delete(v5);
  }
}

uint64_t std::vector<PMLayerDescription>::__init_with_size[abi:ne200100]<PMLayerDescription*,PMLayerDescription*>(uint64_t result, uint64_t a2, uint64_t a3, unint64_t a4)
{
  if (a4)
  {
    std::vector<PMLayerDescription>::__vallocate[abi:ne200100](result, a4);
  }

  return result;
}

void sub_26031B3A0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9)
{
  *(v9 + 8) = v10;
  std::vector<PMLayerDescription>::__destroy_vector::operator()[abi:ne200100](&a9);
  _Unwind_Resume(a1);
}

void std::vector<PMLayerDescription>::__vallocate[abi:ne200100](uint64_t a1, unint64_t a2)
{
  if (a2 < 0x555555555555556)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<PMLayerDescription>>(a1, a2);
  }

  std::vector<double>::__throw_length_error[abi:ne200100]();
}

void std::__allocate_at_least[abi:ne200100]<std::allocator<PMLayerDescription>>(uint64_t a1, unint64_t a2)
{
  if (a2 < 0x555555555555556)
  {
    operator new();
  }

  std::__throw_bad_array_new_length[abi:ne200100]();
}

uint64_t std::__uninitialized_allocator_copy_impl[abi:ne200100]<std::allocator<PMLayerDescription>,PMLayerDescription*,PMLayerDescription*,PMLayerDescription*>(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  if (a2 != a3)
  {
    v7 = 0;
    do
    {
      PMLayerDescription::PMLayerDescription((a4 + v7), (a2 + v7));
      v7 += 48;
    }

    while (a2 + v7 != a3);
    a4 += v7;
  }

  return a4;
}

void sub_26031B4D0(_Unwind_Exception *exception_object)
{
  if (v2)
  {
    v4 = -v2;
    v5 = (v1 - 8);
    do
    {
      PCString::~PCString(v5);
      v5 = (v6 - 48);
      v4 += 48;
    }

    while (v4);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::vector<PMAudioDescription>::__init_with_size[abi:ne200100]<PMAudioDescription*,PMAudioDescription*>(uint64_t result, uint64_t a2, uint64_t a3, unint64_t a4)
{
  if (a4)
  {
    std::vector<PMAudioDescription>::__vallocate[abi:ne200100](result, a4);
  }

  return result;
}

void sub_26031B560(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9)
{
  *(v9 + 8) = v10;
  std::vector<PMAudioDescription>::__destroy_vector::operator()[abi:ne200100](&a9);
  _Unwind_Resume(a1);
}

void std::vector<PMAudioDescription>::__vallocate[abi:ne200100](uint64_t a1, unint64_t a2)
{
  if (a2 < 0x24924924924924ALL)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<PMAudioDescription>>(a1, a2);
  }

  std::vector<double>::__throw_length_error[abi:ne200100]();
}

void std::__allocate_at_least[abi:ne200100]<std::allocator<PMAudioDescription>>(uint64_t a1, unint64_t a2)
{
  if (a2 < 0x24924924924924ALL)
  {
    operator new();
  }

  std::__throw_bad_array_new_length[abi:ne200100]();
}

PMAudioDescription *std::__uninitialized_allocator_copy_impl[abi:ne200100]<std::allocator<PMAudioDescription>,PMAudioDescription*,PMAudioDescription*,PMAudioDescription*>(int a1, PMAudioDescription *a2, PMAudioDescription *a3, PMAudioDescription *this)
{
  if (a2 != a3)
  {
    v6 = a2;
    v7 = 0;
    do
    {
      PMAudioDescription::PMAudioDescription(this, v6);
      v6 = (v6 + 112);
      this = (this + 112);
      v7 -= 112;
    }

    while (v6 != a3);
  }

  return this;
}

void sub_26031B68C(_Unwind_Exception *exception_object)
{
  if (v2)
  {
    v4 = (v1 - 112);
    do
    {
      PMAudioDescription::~PMAudioDescription(v4);
      v4 = (v5 - 112);
      v2 += 112;
    }

    while (v2);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::vector<PMLayerDescription>::__emplace_back_slow_path<PMLayerDescription const&>(uint64_t a1, const PCString *a2)
{
  v2 = 0xAAAAAAAAAAAAAAABLL * ((*(a1 + 8) - *a1) >> 4);
  v3 = v2 + 1;
  if (v2 + 1 > 0x555555555555555)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  if (0x5555555555555556 * ((*(a1 + 16) - *a1) >> 4) > v3)
  {
    v3 = 0x5555555555555556 * ((*(a1 + 16) - *a1) >> 4);
  }

  if (0xAAAAAAAAAAAAAAABLL * ((*(a1 + 16) - *a1) >> 4) >= 0x2AAAAAAAAAAAAAALL)
  {
    v6 = 0x555555555555555;
  }

  else
  {
    v6 = v3;
  }

  v16 = a1;
  if (v6)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<PMLayerDescription>>(a1, v6);
  }

  v13 = 0;
  v14 = 48 * v2;
  PMLayerDescription::PMLayerDescription((48 * v2), a2);
  v15 = 48 * v2 + 48;
  v7 = *(a1 + 8);
  v8 = 48 * v2 + *a1 - v7;
  std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PMLayerDescription>,PMLayerDescription*>(a1, *a1, v7, v8);
  v9 = *a1;
  *a1 = v8;
  v10 = *(a1 + 16);
  v12 = v15;
  *(a1 + 8) = v15;
  *&v15 = v9;
  *(&v15 + 1) = v10;
  v13 = v9;
  v14 = v9;
  std::__split_buffer<PMLayerDescription>::~__split_buffer(&v13);
  return v12;
}

void sub_26031B7CC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__split_buffer<PMLayerDescription>::~__split_buffer(va);
  _Unwind_Resume(a1);
}

void std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PMLayerDescription>,PMLayerDescription*>(uint64_t a1, PCString *a2, PCString *a3, uint64_t a4)
{
  if (a2 != a3)
  {
    v6 = a2;
    v7 = 0;
    do
    {
      PMLayerDescription::PMLayerDescription((a4 + v7 * 8), &v6[v7]);
      v7 += 6;
    }

    while (&v6[v7] != a3);
    while (v6 != a3)
    {
      PCString::~PCString(v6 + 5);
      v6 += 6;
    }
  }
}

void sub_26031B85C(_Unwind_Exception *exception_object)
{
  if (v2)
  {
    v4 = -v2;
    v5 = (v1 - 8);
    do
    {
      PCString::~PCString(v5);
      v5 = (v6 - 48);
      v4 += 48;
    }

    while (v4);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::__split_buffer<PMLayerDescription>::~__split_buffer(uint64_t a1)
{
  v3 = *(a1 + 8);
  for (i = *(a1 + 16); i != v3; i = *(a1 + 16))
  {
    *(a1 + 16) = i - 48;
    PCString::~PCString((i - 8));
  }

  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

uint64_t std::vector<PMAudioDescription>::__emplace_back_slow_path<PMAudioDescription const&>(uint64_t a1, const PMAudioDescription *a2)
{
  v2 = 0x6DB6DB6DB6DB6DB7 * ((*(a1 + 8) - *a1) >> 4);
  v3 = v2 + 1;
  if ((v2 + 1) > 0x249249249249249)
  {
    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  if (0xDB6DB6DB6DB6DB6ELL * ((*(a1 + 16) - *a1) >> 4) > v3)
  {
    v3 = 0xDB6DB6DB6DB6DB6ELL * ((*(a1 + 16) - *a1) >> 4);
  }

  if ((0x6DB6DB6DB6DB6DB7 * ((*(a1 + 16) - *a1) >> 4)) >= 0x124924924924924)
  {
    v6 = 0x249249249249249;
  }

  else
  {
    v6 = v3;
  }

  v16 = a1;
  if (v6)
  {
    std::__allocate_at_least[abi:ne200100]<std::allocator<PMAudioDescription>>(a1, v6);
  }

  v13 = 0;
  v14 = 112 * v2;
  PMAudioDescription::PMAudioDescription((112 * v2), a2);
  v15 = (112 * v2 + 112);
  v7 = *(a1 + 8);
  v8 = (112 * v2 + *a1 - v7);
  std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PMAudioDescription>,PMAudioDescription*>(a1, *a1, v7, v8);
  v9 = *a1;
  *a1 = v8;
  v10 = *(a1 + 16);
  v12 = v15;
  *(a1 + 8) = v15;
  *&v15 = v9;
  *(&v15 + 1) = v10;
  v13 = v9;
  v14 = v9;
  std::__split_buffer<PMAudioDescription>::~__split_buffer(&v13);
  return v12;
}

void sub_26031BA0C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  std::__split_buffer<PMAudioDescription>::~__split_buffer(va);
  _Unwind_Resume(a1);
}

void std::__uninitialized_allocator_relocate[abi:ne200100]<std::allocator<PMAudioDescription>,PMAudioDescription*>(int a1, PCString *a2, PMAudioDescription *a3, PMAudioDescription *this)
{
  if (a2 != a3)
  {
    v6 = a2;
    v7 = 0;
    v8 = a2;
    do
    {
      PMAudioDescription::PMAudioDescription(this, v8);
      v8 = (v8 + 112);
      this = (this + 112);
      v7 -= 112;
    }

    while (v8 != a3);
    while (v6 != a3)
    {
      PMAudioDescription::~PMAudioDescription(v6);
      v6 += 14;
    }
  }
}

void sub_26031BAA0(_Unwind_Exception *exception_object)
{
  if (v2)
  {
    v4 = (v1 - 112);
    do
    {
      PMAudioDescription::~PMAudioDescription(v4);
      v4 = (v5 - 112);
      v2 += 112;
    }

    while (v2);
  }

  _Unwind_Resume(exception_object);
}

uint64_t std::__split_buffer<PMAudioDescription>::~__split_buffer(uint64_t a1)
{
  v3 = *(a1 + 8);
  for (i = *(a1 + 16); i != v3; i = *(a1 + 16))
  {
    *(a1 + 16) = i - 112;
    PMAudioDescription::~PMAudioDescription((i - 112));
  }

  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

void PMMediaManager::PMMediaManager(PMMediaManager *this)
{
  PCSingleton::PCSingleton(this, 0);
  *v1 = &unk_2872DFCD8;
  *(v1 + 1) = v1 + 8;
  *(v1 + 2) = v1 + 8;
  *(v1 + 3) = 0;
  initMyCoreGraphicsPlugin(v1);
}

void sub_26031BB80(_Unwind_Exception *a1)
{
  std::__list_imp<unsigned int>::clear(v2);
  PCSingleton::~PCSingleton(v1);
  _Unwind_Resume(a1);
}

void PMMediaManager::~PMMediaManager(PMMediaManager *this)
{
  *this = &unk_2872DFCD8;
  v2 = (this + 8);
  v3 = *(this + 2);
  if (v3 != (this + 8))
  {
    do
    {
      v4 = v3[2];
      v5 = *(v4 + 272);
      if (v5)
      {
        v5(v3[2]);
      }

      MEMORY[0x2666E9F00](v4, 0x80C40B3C365DALL);
      v3 = v3[1];
    }

    while (v3 != v2);
  }

  std::__list_imp<unsigned int>::clear(v2);
  std::__list_imp<unsigned int>::clear(v2);

  PCSingleton::~PCSingleton(this);
}

{
  PMMediaManager::~PMMediaManager(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t PMMediaManager::getInstance(PMMediaManager *this)
{
  if (PMMediaManager::getInstance(void)::once != -1)
  {
    PMMediaManager::getInstance();
  }

  return PMMediaManager::_instance;
}

uint64_t PMMediaManager::findReader(PMMediaManager *this, const __CFURL **a2)
{
  PCURL::getExtension(a2, &v10);
  for (i = 0; i != 13; ++i)
  {
    PCString::PCString(&v9, dissallowExtensions[i]);
    v4 = PCString::caseInsensitiveCompare(&v10, &v9);
    PCString::~PCString(&v9);
    if (!v4)
    {
      v6 = 0;
      goto LABEL_10;
    }
  }

  if ([@"public.jpeg" isEqualToString:@"com.adobe.photoshop-image"])
  {
    v5 = 64;
  }

  else
  {
    v7 = [@"public.jpeg" isEqualToString:@"com.ilm.openexr-image"];
    v5 = 80;
    if (v7)
    {
      v5 = 56;
    }
  }

  v6 = *(this + v5);
LABEL_10:
  PCString::~PCString(&v10);
  return v6;
}

uint64_t PMMediaManager::open(PMMediaManager *this, const __CFURL **a2, PMClip **a3, PMPluginInterface *a4)
{
  v13[143] = *MEMORY[0x277D85DE8];
  PMFormatDescription::PMFormatDescription(v13);
  *a3 = 0;
  bzero(v13, 0x478uLL);
  if (a4)
  {
    v13[0] = a4;
    goto LABEL_3;
  }

  isSequence = PCURL::isSequence(a2);
  URLforIndex = a2;
  if (isSequence)
  {
    URLforIndex = PCURL::getURLforIndex(a2, 0);
  }

  v13[0] = PMMediaManager::findReader(this, URLforIndex);
  if (v13[0])
  {
    if (isSequence)
    {
      PCURL::~PCURL(URLforIndex);
      MEMORY[0x2666E9F00](v11);
    }

LABEL_3:
    operator new();
  }

  if (isSequence)
  {
    PCURL::~PCURL(URLforIndex);
    MEMORY[0x2666E9F00](v12);
  }

  PMFormatDescription::~PMFormatDescription(v13);
  return 1;
}

void sub_26031C014(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{
  MEMORY[0x2666E9F00](v9, 0x10F0C40713A2EEALL);
  PMFormatDescription::~PMFormatDescription(&a9);
  _Unwind_Resume(a1);
}

uint64_t PMFrameRequest::getAlphaType(PMFrameRequest *this)
{
  if (*(this + 23))
  {
    return 1;
  }

  else
  {
    return *(this + 42);
  }
}

uint64_t PMFrameRequest::getAlphaInvert(PMFrameRequest *this)
{
  if (*(this + 23))
  {
    v1 = 0;
  }

  else
  {
    v1 = *(this + 172);
  }

  return v1 & 1;
}

double PMFrameRequest::getResolutionModeScale(PMFrameRequest *this)
{
  v1 = *(this + 41);
  result = 1.0;
  if (v1 == 1)
  {
    result = 0.5;
  }

  if (v1 == 2)
  {
    return 0.25;
  }

  return result;
}

void PMFrameRequest::getColorDescriptionOverrideToneMapMethod(PMFrameRequest *this, FxColorDescription *a2)
{
  if (*(this + 192))
  {
    PMGetToneMapMethodForConversion(*(this + 193), a2);
  }
}

double PMGetToneMapMethodForConversion(int a1, FxColorDescription *this)
{
  if (a1 > 1)
  {
    if (a1 == 2 || a1 == 4)
    {
      return 0.0;
    }

LABEL_7:
    if (this)
    {
      return *FxColorDescription::getToneMapMethod(this);
    }

    return 0.0;
  }

  if (a1)
  {
    if (a1 == 1)
    {
      *&result = 3;
      return result;
    }

    goto LABEL_7;
  }

  *&result = 4;
  return result;
}

__n128 PMFrameRequest::setCinematography(uint64_t a1, uint64_t a2)
{
  result = *a2;
  *(a1 + 232) = *(a2 + 16);
  *(a1 + 216) = result;
  return result;
}

void PMAudioDescription::PMAudioDescription(PMAudioDescription *this)
{
  PCSharedCount::PCSharedCount(this);
  v2 = MEMORY[0x277CC08F0];
  *(v3 + 8) = 0;
  *(v3 + 16) = 0;
  *(v3 + 24) = *v2;
  *(v3 + 40) = *(v2 + 16);
  *(v3 + 48) = 0;
  PCSharedCount::PCSharedCount((v3 + 56));
  *(this + 4) = xmmword_260858B90;
  *(this + 20) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 11) = 0;
}

void PMAudioDescription::PMAudioDescription(PMAudioDescription *this, const PMAudioDescription *a2)
{
  PCString::PCString(this, a2);
  *(v4 + 8) = *(a2 + 1);
  *(v4 + 16) = *(a2 + 2);
  v5 = *(a2 + 24);
  *(v4 + 40) = *(a2 + 5);
  *(v4 + 24) = v5;
  *(v4 + 48) = *(a2 + 12);
  PCString::PCString((v4 + 56), a2 + 7);
  v6 = *(a2 + 4);
  v7 = *(a2 + 20);
  *(this + 11) = 0;
  *(this + 4) = v6;
  *(this + 20) = v7;
  *(this + 12) = 0;
  *(this + 13) = 0;
  std::vector<PMAudioChannelDescription>::__init_with_size[abi:ne200100]<PMAudioChannelDescription*,PMAudioChannelDescription*>(this + 88, *(a2 + 11), *(a2 + 12), (*(a2 + 12) - *(a2 + 11)) >> 4);
}

void sub_26031C2E4(_Unwind_Exception *a1)
{
  PCString::~PCString(v1 + 7);
  PCString::~PCString(v1);
  _Unwind_Resume(a1);
}

uint64_t PMAudioDescription::operator=(uint64_t a1, uint64_t a2)
{
  PCString::set(a1, a2);
  *(a1 + 8) = *(a2 + 8);
  *(a1 + 16) = *(a2 + 16);
  v4 = *(a2 + 24);
  *(a1 + 40) = *(a2 + 40);
  *(a1 + 24) = v4;
  *(a1 + 48) = *(a2 + 48);
  PCString::set((a1 + 56), (a2 + 56));
  *(a1 + 64) = *(a2 + 64);
  *(a1 + 80) = *(a2 + 80);
  if (a1 != a2)
  {
    std::vector<PMAudioChannelDescription>::__assign_with_size[abi:ne200100]<PMAudioChannelDescription*,PMAudioChannelDescription*>(a1 + 88, *(a2 + 88), *(a2 + 96), (*(a2 + 96) - *(a2 + 88)) >> 4);
  }

  return a1;
}

void PMFormatDescription::PMFormatDescription(PMFormatDescription *this)
{
  *this = 0;
  PCSharedCount::PCSharedCount(this + 57);
  *(this + 60) = 0;
  *(this + 63) = 0;
  *(this + 64) = 0;
  PMAudioDescription::PMAudioDescription((this + 520));
  *(this + 79) = 0;
  *(this + 160) = 0;
  PCSharedCount::PCSharedCount(this + 137);
  *(this + 248) = 0u;
  *(this + 232) = 0u;
  *(this + 216) = 0u;
  *(this + 200) = 0u;
  *(this + 184) = 0u;
  *(this + 168) = 0u;
  *(this + 152) = 0u;
  *(this + 136) = 0u;
  *(this + 120) = 0u;
  *(this + 104) = 0u;
  *(this + 88) = 0u;
  *(this + 72) = 0u;
  *(this + 56) = 0u;
  *(this + 40) = 0u;
  *(this + 24) = 0u;
  *(this + 8) = 0u;
  *(this + 472) = 0u;
  *(this + 488) = 0u;
  *(this + 440) = 0u;
  *(this + 456) = 0u;
  *(this + 408) = 0u;
  *(this + 424) = 0u;
  *(this + 376) = 0u;
  *(this + 392) = 0u;
  *(this + 344) = 0u;
  *(this + 360) = 0u;
  *(this + 312) = 0u;
  *(this + 328) = 0u;
  *(this + 280) = 0u;
  *(this + 296) = 0u;
  *(this + 264) = 0u;
  *(this + 644) = 0;
  *(this + 648) = 0u;
  *(this + 664) = 0u;
  *(this + 680) = 0u;
  *(this + 696) = 0u;
  *(this + 712) = 0u;
  *(this + 728) = 0u;
  *(this + 744) = 0u;
  *(this + 760) = 0u;
  *(this + 776) = 0u;
  *(this + 792) = 0u;
  *(this + 808) = 0u;
  *(this + 824) = 0u;
  *(this + 840) = 0u;
  *(this + 856) = 0u;
  *(this + 872) = 0u;
  *(this + 888) = 0u;
  *(this + 904) = 0u;
  *(this + 920) = 0u;
  *(this + 936) = 0u;
  *(this + 952) = 0u;
  *(this + 968) = 0u;
  *(this + 984) = 0u;
  *(this + 1000) = 0u;
  *(this + 1016) = 0u;
  *(this + 1032) = 0u;
  *(this + 1048) = 0u;
  *(this + 1064) = 0u;
  *(this + 1080) = 0u;
  *(this + 1096) = 0u;
  *(this + 1112) = 0u;
  *(this + 1128) = 0u;
}

void sub_26031C498(_Unwind_Exception *a1)
{
  PMAudioDescription::~PMAudioDescription((v1 + 520));
  PCCFRef<CGColorSpace *>::~PCCFRef((v1 + 480));
  PCString::~PCString((v1 + 456));
  _Unwind_Resume(a1);
}

void PMFormatDescription::PMFormatDescription(PMFormatDescription *this, const PMFormatDescription *a2)
{
  *this = *a2;
  memcpy(this + 8, a2 + 8, 0x1C0uLL);
  PCString::PCString(this + 57, a2 + 57);
  v4 = *(a2 + 58);
  *(this + 118) = *(a2 + 118);
  *(this + 58) = v4;
  v5 = *(a2 + 60);
  *(this + 60) = v5;
  if (v5)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v5);
  }

  *(this + 488) = *(a2 + 488);
  *(this + 63) = 0;
  *(this + 128) = 0;
  *(this + 129) = *(a2 + 129);
  PMAudioDescription::PMAudioDescription((this + 520), (a2 + 520));
  *(this + 79) = 0;
  *(this + 160) = 0;
  *(this + 644) = *(a2 + 644);
  memcpy(this + 648, a2 + 648, 0x1C0uLL);
  PCString::PCString(this + 137, a2 + 137);
  v6 = *(a2 + 138);
  *(this + 278) = *(a2 + 278);
  *(this + 138) = v6;
  v7 = *(a2 + 140);
  *(this + 140) = v7;
  if (v7)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v7);
  }

  *(this + 1128) = *(a2 + 1128);
  if (*(a2 + 63))
  {
    v8 = malloc_type_malloc(*(a2 + 128), 0xA71C5312uLL);
    *(this + 63) = v8;
    memcpy(v8, *(a2 + 63), *(a2 + 128));
    *(this + 128) = *(a2 + 128);
  }

  if (*(a2 + 79))
  {
    v9 = malloc_type_malloc(*(a2 + 160), 0x63A59758uLL);
    *(this + 79) = v9;
    memcpy(v9, *(a2 + 79), *(a2 + 160));
    *(this + 160) = *(a2 + 160);
  }
}

void sub_26031C614(_Unwind_Exception *a1)
{
  PCString::~PCString((v1 + 1096));
  PMAudioDescription::~PMAudioDescription((v1 + 520));
  PCCFRef<CGColorSpace *>::~PCCFRef((v1 + 480));
  PCString::~PCString((v1 + 456));
  _Unwind_Resume(a1);
}

uint64_t std::vector<PMAudioChannelDescription>::__init_with_size[abi:ne200100]<PMAudioChannelDescription*,PMAudioChannelDescription*>(uint64_t result, uint64_t a2, uint64_t a3, unint64_t a4)
{
  if (a4)
  {
    std::vector<LiScriptParameterDescriptor>::__vallocate[abi:ne200100](result, a4);
  }

  return result;
}

void sub_26031C6D4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9)
{
  *(v9 + 8) = v10;
  std::vector<PMAudioChannelDescription>::__destroy_vector::operator()[abi:ne200100](&a9);
  _Unwind_Resume(a1);
}

PCString *std::__uninitialized_allocator_copy_impl[abi:ne200100]<std::allocator<PMAudioChannelDescription>,PMAudioChannelDescription*,PMAudioChannelDescription*,PMAudioChannelDescription*>(int a1, PCString *a2, PCString *a3, PCString *this)
{
  if (a2 != a3)
  {
    v6 = a2;
    v7 = 0;
    do
    {
      PCString::PCString(this, v6);
      LODWORD(this[1].var0) = v6[1].var0;
      v6 += 2;
      this += 2;
      v7 -= 16;
    }

    while (v6 != a3);
  }

  return this;
}

void sub_26031C75C(_Unwind_Exception *exception_object)
{
  if (v2)
  {
    v4 = (v1 - 16);
    do
    {
      PCString::~PCString(v4);
      v4 = (v5 - 16);
      v2 += 16;
    }

    while (v2);
  }

  _Unwind_Resume(exception_object);
}

void std::vector<PMAudioChannelDescription>::__assign_with_size[abi:ne200100]<PMAudioChannelDescription*,PMAudioChannelDescription*>(uint64_t a1, PCString *a2, PCString *a3, unint64_t a4)
{
  v6 = a2;
  v8 = *a1;
  if (a4 > (*(a1 + 16) - *a1) >> 4)
  {
    std::vector<PMAudioChannelDescription>::__vdeallocate(a1);
    if (!(a4 >> 60))
    {
      v9 = *(a1 + 16) - *a1;
      v10 = v9 >> 3;
      if (v9 >> 3 <= a4)
      {
        v10 = a4;
      }

      if (v9 >= 0x7FFFFFFFFFFFFFF0)
      {
        v11 = 0xFFFFFFFFFFFFFFFLL;
      }

      else
      {
        v11 = v10;
      }

      std::vector<LiScriptParameterDescriptor>::__vallocate[abi:ne200100](a1, v11);
    }

    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  v12 = *(a1 + 8);
  if (a4 <= (v12 - v8) >> 4)
  {
    if (a2 != a3)
    {
      do
      {
        PCString::set(v8, v6);
        LODWORD(v8[1].var0) = v6[1].var0;
        v6 += 2;
        v8 += 2;
      }

      while (v6 != a3);
      v12 = *(a1 + 8);
    }

    while (v12 != v8)
    {
      v12 -= 2;
      PCString::~PCString(v12);
    }

    *(a1 + 8) = v8;
  }

  else
  {
    v13 = (a2 + v12 - v8);
    if (v12 != v8)
    {
      do
      {
        PCString::set(v8, v6);
        LODWORD(v8[1].var0) = v6[1].var0;
        v6 += 2;
        v8 += 2;
      }

      while (v6 != v13);
      v12 = *(a1 + 8);
    }

    *(a1 + 8) = std::__uninitialized_allocator_copy_impl[abi:ne200100]<std::allocator<PMAudioChannelDescription>,PMAudioChannelDescription*,PMAudioChannelDescription*,PMAudioChannelDescription*>(a1, v13, a3, v12);
  }
}

void std::vector<PMAudioChannelDescription>::__vdeallocate(void **a1)
{
  v1 = *a1;
  if (*a1)
  {
    v3 = a1[1];
    v4 = v1;
    if (v3 != v1)
    {
      do
      {
        PCString::~PCString(v3 - 2);
      }

      while (v3 != v1);
      v4 = *a1;
    }

    a1[1] = v1;
    operator delete(v4);
    *a1 = 0;
    a1[1] = 0;
    a1[2] = 0;
  }
}

void PMStripField::PMStripField(HGNode *a1, int a2)
{
  HGNode::HGNode(a1);
  *v3 = &unk_2872DFD30;
  *(v3 + 408) = a2;
  *(v3 + 416) = 0;
}

void PMStripField::~PMStripField(HGNode *this)
{
  *this = &unk_2872DFD30;
  v2 = *(this + 52);
  if (v2)
  {
    (*(*v2 + 24))(v2);
  }

  HGNode::~HGNode(this);
}

{
  PMStripField::~PMStripField(this);

  HGObject::operator delete(v1);
}

uint64_t PMStripField::GetOutput(PMStripField *this, HGRenderer *a2)
{
  v4 = *(this + 102);
  v5 = HGObject::operator new(0x1A0uLL);
  v6 = v5;
  if (v4)
  {
    HgcPMStripEvenField::HgcPMStripEvenField(v5);
    v7 = *(this + 52);
    if (v7 != v6)
    {
      v8 = (this + 416);
      if (v7)
      {
        goto LABEL_7;
      }

      goto LABEL_8;
    }

    if (!v6)
    {
      goto LABEL_9;
    }

LABEL_11:
    (*(*v6 + 24))(v6);
    goto LABEL_9;
  }

  HgcPMStripOddField::HgcPMStripOddField(v5);
  v7 = *(this + 52);
  if (v7 == v6)
  {
    if (!v6)
    {
      goto LABEL_9;
    }

    goto LABEL_11;
  }

  v8 = (this + 416);
  if (v7)
  {
LABEL_7:
    (*(*v7 + 24))(v7);
  }

LABEL_8:
  *v8 = v6;
LABEL_9:
  v9 = *(this + 52);
  Input = HGRenderer::GetInput(a2, this, 0);
  (*(*v9 + 120))(v9, 0, Input);
  return *(this + 52);
}

void sub_26031CBE0(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  _Unwind_Resume(exception_object);
}

void MyCGInstanceData::MyCGInstanceData(MyCGInstanceData *this)
{
  PMStillInstance::PMStillInstance(this);
  *v2 = &unk_2872DFF98;
  *(v2 + 104) = 0;
  *(v2 + 112) = 0;
  *(v2 + 96) = 0;
  *(v2 + 120) = 1;
  v3 = MEMORY[0x277CC08F0];
  v4 = *MEMORY[0x277CC08F0];
  *(v2 + 128) = xmmword_260858BB0;
  *(v2 + 144) = v4;
  *(v2 + 160) = *(v3 + 16);
  *(v2 + 168) = 0;
  *(v2 + 172) = 0;
  *(v2 + 176) = 0;
  *(v2 + 184) = 0;
  PCColorDescription::PCColorDescription((v2 + 192));
  *(this + 216) = 1;
  *(this + 14) = 0u;
  *(this + 15) = 0u;
  *(this + 32) = 0;
}

void sub_26031CD00(_Unwind_Exception *a1)
{
  v3 = *(v1 + 23);
  if (v3)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }

  PMStillInstance::~PMStillInstance(v1);
  _Unwind_Resume(a1);
}

void MyCGInstanceData::~MyCGInstanceData(MyCGInstanceData *this)
{
  *this = &unk_2872DFF98;
  v2 = *(this + 32);
  if (v2)
  {
    CVPixelBufferPoolRelease(v2);
    *(this + 32) = 0;
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(this + 29);
  PCCFRef<CGColorSpace *>::~PCCFRef(this + 28);
  PCCFRef<CGColorSpace *>::~PCCFRef(this + 24);
  v3 = *(this + 23);
  if (v3)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }

  PMStillInstance::~PMStillInstance(this);
}

{
  MyCGInstanceData::~MyCGInstanceData(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t MyCGInstanceData::open(FxColorDescription *this, const __CFURL **a2)
{
  result = PMStillInstance::open(this, a2);
  if (!result)
  {
    v5 = MEMORY[0x277D755B8];
    PCURL::getAsFileSystemString(a2, &v19);
    v6 = [v5 imageWithContentsOfFile:PCString::ns_str(&v19)];
    PCString::~PCString(&v19);
    v7 = [v6 CGImage];
    if (v7)
    {
      v8 = v7;
      ColorSpace = CGImageGetColorSpace(v7);
      if (ColorSpace)
      {
        v10 = ColorSpace;
        PCCFRefTraits<CGColorSpace *>::retain(ColorSpace);
        space = v10;
      }

      else
      {
        space = 0;
        DeviceRGB = CGColorSpaceCreateDeviceRGB();
        v19._pcColorDesc._colorSpaceRef._obj = DeviceRGB;
        if (space && space != DeviceRGB)
        {
          PCCFRefTraits<CGColorSpace *>::release(space);
          DeviceRGB = v19._pcColorDesc._colorSpaceRef._obj;
        }

        space = DeviceRGB;
        v19._pcColorDesc._colorSpaceRef._obj = 0;
        PCCFRef<CGColorSpace *>::~PCCFRef(&v19._pcColorDesc._colorSpaceRef._obj);
        v10 = space;
      }

      FxColorDescription::FxColorDescription(&v19, v10, &kPCNoToneMapMethod, 1);
      obj = this[6]._pcColorDesc._colorSpaceRef._obj;
      v13 = v19._pcColorDesc._colorSpaceRef._obj;
      if (obj && obj != v19._pcColorDesc._colorSpaceRef._obj)
      {
        PCCFRefTraits<CGColorSpace *>::release(obj);
        v13 = v19._pcColorDesc._colorSpaceRef._obj;
      }

      this[6]._pcColorDesc._colorSpaceRef._obj = v13;
      v19._pcColorDesc._colorSpaceRef._obj = 0;
      this[6]._pcColorDesc._dynamicRange = v19._pcColorDesc._dynamicRange;
      this[6]._pcColorDesc._toneMapMethod = v19._pcColorDesc._toneMapMethod;
      this[6]._isPremultiplied = v19._isPremultiplied;
      PCCFRef<CGColorSpace *>::~PCCFRef(&v19._pcColorDesc._colorSpaceRef._obj);
      CGColorSpace = FxColorDescription::getCGColorSpace(this + 6);
      PCColorSpaceHandle::PCColorSpaceHandle(&v19, CGColorSpace);
      v15 = this[7]._pcColorDesc._colorSpaceRef._obj;
      v16 = v19._pcColorDesc._colorSpaceRef._obj;
      if (v15 && v15 != v19._pcColorDesc._colorSpaceRef._obj)
      {
        PCCFRefTraits<CGColorSpace *>::release(v15);
        v16 = v19._pcColorDesc._colorSpaceRef._obj;
      }

      this[7]._pcColorDesc._colorSpaceRef._obj = v16;
      v19._pcColorDesc._colorSpaceRef._obj = 0;
      PCCFRef<CGColorSpace *>::~PCCFRef(&v19._pcColorDesc._colorSpaceRef._obj);
      v17 = MEMORY[0x277CBEA90];
      PCURL::getAsFileSystemString(a2, &v19);
      v18 = [v17 dataWithContentsOfFile:PCString::ns_str(&v19)];
      PCString::~PCString(&v19);
      if (v18)
      {
        *&this[3]._pcColorDesc._toneMapMethod._gain = CGImageSourceCreateWithData(v18, 0);
      }

      LODWORD(this[7]._pcColorDesc._toneMapMethod._gain) = CGImageGetWidth(v8);
      *(&this[7]._pcColorDesc._toneMapMethod + 2) = CGImageGetHeight(v8);
      LOBYTE(this[5]._pcColorDesc._toneMapMethod._type) = 1;
      PCCFRef<CGColorSpace *>::~PCCFRef(&space);
      return 0;
    }

    else
    {
      PMStillInstance::close(this);
      return 3;
    }
  }

  return result;
}

void sub_26031CFDC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10, uint64_t a11, uint64_t a12, uint64_t a13, CGColorSpace *a14)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a10);
  PCCFRef<CGColorSpace *>::~PCCFRef(&a14);
  _Unwind_Resume(a1);
}

void MyCGInstanceData::close(__CVBuffer **this)
{
  PMStillInstance::close(this);
  v2 = this[31];
  if (v2)
  {
    CVPixelBufferRelease(v2);
    this[31] = 0;
  }

  v3 = this[14];
  if (v3)
  {
    CFRelease(v3);
    this[14] = 0;
  }

  *(this + 42) = 0;
  *(this + 172) = 0;
}

CGColorSpace *MyCGInstanceData::getNativeColorDescription@<X0>(MyCGInstanceData *this@<X0>, uint64_t a2@<X8>)
{
  result = *(this + 24);
  *a2 = result;
  if (result)
  {
    result = PCCFRefTraits<CGColorSpace *>::retain(result);
  }

  *(a2 + 8) = *(this + 25);
  *(a2 + 16) = *(this + 52);
  *(a2 + 24) = *(this + 216);
  return result;
}

uint64_t MyCGInstanceData::getAnimationInfo(MyCGInstanceData *this, const PCURL *a2)
{
  v3 = *(this + 14);
  if (!v3)
  {
    return 1;
  }

  Count = CGImageSourceGetCount(v3);
  *(this + 30) = Count;
  if (Count < 2)
  {
    *(this + 17) = 0x403E000000000000;
    memset(&v33, 0, sizeof(v33));
    v29 = 0.0333333333;
  }

  else
  {
    v5 = 0;
    v6 = *MEMORY[0x277CD31C8];
    v7 = *MEMORY[0x277CD31E8];
    v8 = *MEMORY[0x277CD31C0];
    v9 = *MEMORY[0x277CD3438];
    v10 = *MEMORY[0x277CD2DC8];
    v11 = 0.1;
    v12 = *MEMORY[0x277CD2DB0];
    while (1)
    {
      v13 = CGImageSourceCopyPropertiesAtIndex(*(this + 14), v5, 0);
      if (!v13)
      {
        break;
      }

      v14 = v13;
      Value = CFDictionaryGetValue(v13, v6);
      if (Value)
      {
        v16 = Value;
        v17 = [Value objectForKeyedSubscript:v7];
        if (!v17 || ([v17 floatValue], v11 = v18, v18 == 0.0))
        {
          v19 = [v16 objectForKeyedSubscript:v8];
          if (v19)
          {
            [v19 floatValue];
            v11 = v20;
          }
        }
      }

      v21 = CFDictionaryGetValue(v14, v9);
      if (v21)
      {
        v22 = v21;
        v23 = [v21 objectForKeyedSubscript:v10];
        if (!v23 || ([v23 floatValue], v11 = v24, v24 == 0.0))
        {
          v25 = [v22 objectForKeyedSubscript:v12];
          if (v25)
          {
            [v25 floatValue];
            v11 = v26;
          }
        }
      }

      if (v11 < 0.011)
      {
        v11 = 0.1;
      }

      *(this + 16) = *(this + 16) + v11;
      CFRelease(v14);
      ++v5;
      v27 = *(this + 30);
      if (v5 >= v27)
      {
        goto LABEL_22;
      }
    }

    LODWORD(v27) = *(this + 30);
LABEL_22:
    v29 = *(this + 16) / v27;
    *(this + 17) = ceil(1.0 / v29 + -0.01);
    memset(&v33, 0, sizeof(v33));
  }

  CMTimeMakeWithSeconds(&v33, v29, 0x40000);
  v31 = v33;
  CMTimeConvertScale(&v32, &v31, *(this + 17), kCMTimeRoundingMethod_RoundHalfAwayFromZero);
  result = 0;
  epoch = v32.epoch;
  *(this + 9) = *&v32.value;
  *(this + 20) = epoch;
  return result;
}

CGImage *MyCGInstanceData::newPixelBufferFromImage(MyCGInstanceData *this, CGImageRef image, CGColorSpace **a3)
{
  v3 = image;
  pixelBufferOut = 0;
  if (image)
  {
    Width = CGImageGetWidth(image);
    Height = CGImageGetHeight(v3);
    BitsPerComponent = CGImageGetBitsPerComponent(v3);
    ColorSpace = CGImageGetColorSpace(v3);
    PCColorSpaceHandle::PCColorSpaceHandle(&v32, ColorSpace);
    CGColorSpace = PCColorSpaceHandle::getCGColorSpace(&v32);
    if (CGColorSpaceGetNumberOfComponents(CGColorSpace) == 1)
    {
      PCColorSpaceHandle::PCColorSpaceHandle(&v31, *MEMORY[0x277CBF4B8]);
      v11 = v31;
      if (v32 && v32 != v31)
      {
        PCCFRefTraits<CGColorSpace *>::release(v32);
        v11 = v31;
      }

      v31 = 0;
      v32 = v11;
      PCCFRef<CGColorSpace *>::~PCCFRef(&v31);
    }

    v12 = PCColorSpaceHandle::getCGColorSpace(&v32);
    PCColorSpaceHandle::setColorSpace(a3, v12);
    valuePtr = 1111970369;
    v13 = (BitsPerComponent > 8) | CGColorSpaceUsesExtendedRange(v12);
    if (v13)
    {
      v14 = 16;
    }

    else
    {
      v14 = 8;
    }

    if (v13)
    {
      valuePtr = 1380411457;
      v15 = 4353;
    }

    else
    {
      v15 = 8194;
    }

    bitmapInfo = v15;
    v16 = *(this + 32);
    if (!v16)
    {
      Mutable = CFDictionaryCreateMutable(0, 0, MEMORY[0x277CBF138], MEMORY[0x277CBF150]);
      v27 = v14;
      v21 = CFDictionaryCreate(0, 0, 0, 0, MEMORY[0x277CBED60], MEMORY[0x277CBF150]);
      CFDictionaryAddValue(Mutable, *MEMORY[0x277CC4DE8], v21);
      CFRelease(v21);
      CFDictionaryAddValue(Mutable, *MEMORY[0x277CC4E18], *MEMORY[0x277CBED28]);
      v31 = (Width + 2);
      v29 = Height + 2;
      v22 = *MEMORY[0x277CBECE8];
      v23 = CFNumberCreate(*MEMORY[0x277CBECE8], kCFNumberSInt32Type, &valuePtr);
      v24 = CFNumberCreate(v22, kCFNumberLongType, &v31);
      v25 = CFNumberCreate(v22, kCFNumberLongType, &v29);
      CFDictionarySetValue(Mutable, *MEMORY[0x277CC4E30], v23);
      CFDictionarySetValue(Mutable, *MEMORY[0x277CC4EC8], v24);
      CFDictionarySetValue(Mutable, *MEMORY[0x277CC4DD8], v25);
      LODWORD(v22) = CVPixelBufferPoolCreate(v22, 0, Mutable, this + 32);
      CFRelease(v23);
      CFRelease(v24);
      CFRelease(v25);
      CFRelease(Mutable);
      if (v22)
      {
        goto LABEL_17;
      }

      v16 = *(this + 32);
      v14 = v27;
    }

    if (!CVPixelBufferPoolCreatePixelBuffer(0, v16, &pixelBufferOut))
    {
      BytesPerRow = CVPixelBufferGetBytesPerRow(pixelBufferOut);
      CVPixelBufferLockBaseAddress(pixelBufferOut, 0);
      BaseAddress = CVPixelBufferGetBaseAddress(pixelBufferOut);
      v19 = CGBitmapContextCreate(BaseAddress, Width + 2, Height + 2, v14, BytesPerRow, v12, bitmapInfo);
      v34.size.width = (Width + 2);
      v34.size.height = (Height + 2);
      v34.origin.x = 0.0;
      v34.origin.y = 0.0;
      CGContextClearRect(v19, v34);
      v35.size.width = Width;
      v35.size.height = Height;
      v35.origin.x = 1.0;
      v35.origin.y = 1.0;
      CGContextDrawImage(v19, v35, v3);
      CGContextRelease(v19);
      CVPixelBufferUnlockBaseAddress(pixelBufferOut, 0);
      v3 = pixelBufferOut;
LABEL_18:
      PCCFRef<CGColorSpace *>::~PCCFRef(&v32);
      return v3;
    }

LABEL_17:
    v3 = 0;
    goto LABEL_18;
  }

  return v3;
}

void sub_26031D698(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, ...)
{
  va_start(va1, a6);
  va_start(va, a6);
  v7 = va_arg(va1, CGColorSpace *);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

uint64_t MyCGInstanceData::getPixelBuffer(MyCGInstanceData *this, const PMFrameRequest *a2, FxColorDescription *a3)
{
  v5 = *(a2 + 25);
  OverrideColorSpace = PMFrameRequest::getOverrideColorSpace(a2);
  PCColorSpaceHandle::PCColorSpaceHandle(&v20, OverrideColorSpace);
  v7 = *(this + 31);
  if (!v7)
  {
    goto LABEL_6;
  }

  if (v5 != *(this + 42))
  {
LABEL_5:
    CVPixelBufferRelease(v7);
LABEL_6:
    ImageAtIndex = CGImageSourceCreateImageAtIndex(*(this + 14), v5, 0);
    v19 = 0;
    *(this + 31) = MyCGInstanceData::newPixelBufferFromImage(this, ImageAtIndex, &v19);
    CGImageRelease(ImageAtIndex);
    *(this + 42) = v5;
    PCCFRef<CGColorSpace *>::operator=(this + 28, &v20);
    PCCFRef<CGColorSpace *>::operator=(this + 29, &v19);
    CGColorSpace = PCColorSpaceHandle::getCGColorSpace(&v19);
    FxColorDescription::FxColorDescription(&v18, this + 6, CGColorSpace);
    obj = a3->_pcColorDesc._colorSpaceRef._obj;
    v11 = v18._pcColorDesc._colorSpaceRef._obj;
    if (a3->_pcColorDesc._colorSpaceRef._obj && obj != v18._pcColorDesc._colorSpaceRef._obj)
    {
      PCCFRefTraits<CGColorSpace *>::release(obj);
      v11 = v18._pcColorDesc._colorSpaceRef._obj;
    }

    a3->_pcColorDesc._colorSpaceRef._obj = v11;
    v18._pcColorDesc._colorSpaceRef._obj = 0;
    a3->_pcColorDesc._dynamicRange = v18._pcColorDesc._dynamicRange;
    a3->_pcColorDesc._toneMapMethod = v18._pcColorDesc._toneMapMethod;
    a3->_isPremultiplied = v18._isPremultiplied;
    PCCFRef<CGColorSpace *>::~PCCFRef(&v18._pcColorDesc._colorSpaceRef._obj);
    v12 = &v19;
    goto LABEL_10;
  }

  if (operator!=(&v20, this + 28))
  {
    v7 = *(this + 31);
    if (!v7)
    {
      goto LABEL_6;
    }

    goto LABEL_5;
  }

  v15 = PCColorSpaceHandle::getCGColorSpace((this + 232));
  FxColorDescription::FxColorDescription(&v18, this + 6, v15);
  v16 = a3->_pcColorDesc._colorSpaceRef._obj;
  v17 = v18._pcColorDesc._colorSpaceRef._obj;
  if (a3->_pcColorDesc._colorSpaceRef._obj && v16 != v18._pcColorDesc._colorSpaceRef._obj)
  {
    PCCFRefTraits<CGColorSpace *>::release(v16);
    v17 = v18._pcColorDesc._colorSpaceRef._obj;
  }

  a3->_pcColorDesc._colorSpaceRef._obj = v17;
  v18._pcColorDesc._colorSpaceRef._obj = 0;
  a3->_pcColorDesc._dynamicRange = v18._pcColorDesc._dynamicRange;
  a3->_pcColorDesc._toneMapMethod = v18._pcColorDesc._toneMapMethod;
  a3->_isPremultiplied = v18._isPremultiplied;
  v12 = &v18;
LABEL_10:
  PCCFRef<CGColorSpace *>::~PCCFRef(&v12->_pcColorDesc._colorSpaceRef._obj);
  v13 = *(this + 31);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v20);
  return v13;
}

void sub_26031D884(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, CGColorSpace *a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, CGColorSpace *a14)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a9);
  PCCFRef<CGColorSpace *>::~PCCFRef(&a14);
  _Unwind_Resume(a1);
}

uint64_t MyCGInstanceData::readRawBitmap@<X0>(uint64_t this@<X0>, void *a2@<X8>)
{
  v3 = *(this + 176);
  if (v3)
  {
    v4 = *(this + 184);
    *a2 = v3;
    a2[1] = v4;
    if (v4)
    {
      atomic_fetch_add_explicit((v4 + 8), 1uLL, memory_order_relaxed);
    }
  }

  else
  {
    *a2 = 0;
    a2[1] = 0;
  }

  return this;
}

uint64_t MyCG_Close(const PMFormatDescription *a1, void *a2)
{
  v3 = a2[13];
  if (v3)
  {
    PCURL::~PCURL(v3);
    MEMORY[0x2666E9F00]();
  }

  a2[13] = 0;
  (*(*a2 + 24))(a2);
  (*(*a2 + 8))(a2);
  return 0;
}

__n128 MyCG_GetInfo(PMFormatDescription *a1, const PCURL *a2, void *a3)
{
  if (a3)
  {
    *(a1 + 36) = *(a3 + 30);
    *(a1 + 52) = 0x3FF0000000000000;
    *(a1 + 53) = PCInfo::getWorkingGamma(a1);
    *(a1 + 49) = 1;
    *(a1 + 86) = 1;
    *(a1 + 45) = 0x403E000000000000;
    CMTimeMake(&v23, 1, 30);
    *(a1 + 296) = v23;
    CMTimeMake(&v23, 1, *(a1 + 45));
    *(a1 + 320) = v23;
    *(a1 + 47) = 0;
    strcpy(a1 + 8, "Adobe Photoshop");
    *(a1 + 264) = xmmword_260858BC0;
    *(a1 + 111) = 3;
    *(a1 + 450) = 1;
    *(a1 + 227) = 0;
    v6 = *(a3 + 14);
    if (v6)
    {
      Type = CGImageSourceGetType(v6);
      PCURL::PCURL(&v23, Type);
      CStr = PCString::createCStr(&v23);
      if (CStr)
      {
        strcpy(a1 + 8, CStr);
        free(CStr);
      }

      v9 = CGImageSourceCopyPropertiesAtIndex(*(a3 + 14), 0, 0);
      v10 = [-[__CFDictionary objectForKey:](v9 objectForKey:{*MEMORY[0x277CD2F38]), "intValue"}];
      v11 = [-[__CFDictionary objectForKey:](v9 objectForKey:{*MEMORY[0x277CD3368]), "BOOLValue"}];
      v12 = [-[__CFDictionary objectForKey:](v9 objectForKey:{*MEMORY[0x277CD2E40]), "caseInsensitiveCompare:", @"Gray"}];
      if (v10 <= 8)
      {
        v13 = 0;
      }

      else
      {
        v13 = 3;
      }

      if (v10 <= 8)
      {
        v14 = 3;
      }

      else
      {
        v14 = 16;
      }

      if (v12)
      {
        if (v11)
        {
          if (v10 == 16)
          {
            v15 = 64;
          }

          else
          {
            v15 = 32;
          }

          v16 = 1;
        }

        else
        {
          v16 = 0;
          if (v10 == 16)
          {
            v15 = 48;
          }

          else
          {
            v15 = 24;
          }
        }
      }

      else
      {
        v16 = 0;
        if (v10 == 16)
        {
          v15 = 41;
        }

        else
        {
          v15 = 40;
        }
      }

      *(a1 + 69) = v15;
      *(a1 + 68) = v13;
      *(a1 + 111) = v14;
      *(a1 + 450) = v16;
      CFRelease(v9);
      PCString::~PCString(&v23);
    }

    if (!MyCGInstanceData::getAnimationInfo(a3, v5))
    {
      memset(&v23, 0, sizeof(v23));
      CMTimeMakeWithSeconds(&v23, *(a3 + 16), 1000000000);
      v21 = v23;
      CMTimeConvertScale(&v22, &v21, *(a3 + 17), kCMTimeRoundingMethod_RoundHalfAwayFromZero);
      *(a1 + 86) = *(a3 + 30);
      epoch = v22.epoch;
      v23 = v22;
      v19 = *&v22.value;
      *(a1 + 45) = *(a3 + 17);
      *(a1 + 39) = epoch;
      *(a1 + 296) = v19;
      v20 = *(a3 + 20);
      result = *(a3 + 9);
      *(a1 + 20) = result;
      *(a1 + 42) = v20;
    }
  }

  return result;
}

uint64_t MyCG_GetLayerDescription(const PMFormatDescription *a1, PMLayerDescription *a2, unsigned int a3, const PCURL *a4, void *a5)
{
  if (!a5)
  {
    return 10;
  }

  result = 0;
  *a2 = 0;
  *(a2 + 1) = a5[30];
  *(a2 + 5) = *(a1 + 111);
  return result;
}

uint64_t MyCG_GetFrame(const PMFormatDescription *a1, CFTypeRef *a2, CMTime *a3, uint64_t a4, FxColorDescription *a5, uint64_t *a6, uint64_t a7, uint64_t a8)
{
  v15 = FigTimeToFrameWithRate(a3, *(a8 + 136));
  v16 = *(a8 + 120) - 1;
  if (v16 >= (v15 & ~(v15 >> 31)))
  {
    v16 = v15 & ~(v15 >> 31);
  }

  *(a4 + 100) = v16;

  return PMStillInstance::getFrame(a8, a1, a2, a4, a5, a6, a7);
}

uint64_t MyCG_GetAlphaFormat(PMFormatDescription *a1, int a2, int a3, unsigned int *a4, char *a5, PMStillInstance *this)
{
  v23 = xmmword_260343AA0;
  v24 = 0x3FF0000000000000;
  v25 = 0;
  v26 = 0;
  v27 = 0;
  v28 = 0x3FF0000000000000;
  v29 = 0;
  v30 = 0;
  v31 = 0;
  v36 = 0;
  v33 = 0;
  v34 = 0;
  v32 = 0x3FF0000000000000;
  v35 = 0;
  v8 = *(MEMORY[0x277CC08F0] + 16);
  v37 = *MEMORY[0x277CC08F0];
  v38 = v8;
  v39 = 0;
  v40 = 0;
  v41 = 0;
  v42 = 0;
  v43 = 0x100000000;
  v44 = 0;
  v45 = 0;
  v46 = 0;
  v47 = 768;
  v48 = 0x408F400000000000;
  v49 = 0;
  v50 = 0;
  v51 = 0;
  v52 = -1;
  __asm { FMOV            V0.2D, #1.0 }

  v53 = _Q0;
  HIDWORD(v33) = a3;
  PMStillInstance::getRawBitmap(this, a1, &v23, &v21);
  if (v21)
  {
    v20 = 0;
    v19 = 0;
    v14 = (*(**(v21 + 8) + 48))(*(v21 + 8));
    if (!PCPixelFormat::is8Bit(v14))
    {
      (*(*v21 + 16))(v21);
      (*(*v21 + 24))(v21);
      PCImage::getColorSpace(v21, &v18);
      PCCreateBitmap();
    }

    v15 = (*(**(v21 + 8) + 48))(*(v21 + 8));
    if (v15 > 9)
    {
      if (v15 > 15)
      {
        if (v15 == 16)
        {
          PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)16>>>>(v21, &v20, a5, &v19);
        }

        else if (v15 == 17)
        {
          PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)17>>>>(v21, &v20, a5, &v19);
        }
      }

      else if (v15 == 10)
      {
        PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)10>>>>(v21, &v20, a5, &v19);
      }

      else if (v15 == 13)
      {
        PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)13>>>>(v21, &v20, a5, &v19);
      }
    }

    else if (v15 > 4)
    {
      if (v15 == 5)
      {
        PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)5>>>>(v21, &v20, a5, &v19);
      }

      else if (v15 == 6)
      {
        PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)6>>>>(v21, &v20, a5, &v19);
      }
    }

    else if (v15 == 3)
    {
      PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)3>>>>(v21, &v20, a5, &v19);
    }

    else if (v15 == 4)
    {
      PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)4>>>>(v21, &v20, a5, &v19);
    }

    if (v20 <= 3)
    {
      *a4 = v20;
    }

    v16 = 0;
  }

  else
  {
    v16 = 1;
  }

  if (v22)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v22);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(&v46);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v45);
  return v16;
}

void sub_26031E204(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, CGColorSpace *a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, std::__shared_weak_count *a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, CGColorSpace *a38)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a9);
  if (a14)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a14);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(&a38);
  PCCFRef<CGColorSpace *>::~PCCFRef((v38 + 176));
  _Unwind_Resume(a1);
}

CGColorSpace **PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)3>>>>(uint64_t a1, int *a2, char *a3, _BYTE *a4)
{
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v77 = a1;
  v11 = *(a1 + 32) * *(a1 + 28);
  if (v11)
  {
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = *result;
    v24 = 1;
    v25 = *(a1 + 32) * *(a1 + 28);
    do
    {
      v26 = *result;
      v10 = *(result + 1);
      v9 = *(result + 2);
      v8 = *(result + 3);
      if (v26 == 255)
      {
        v29 = v10 == v18 && v19 == *(result + 2) && v20 == *(result + 3);
        v21 &= v29;
        if (!v17)
        {
          v21 = 1;
          v20 = *(result + 3);
          v19 = *(result + 2);
          v18 = *(result + 1);
        }

        ++v17;
      }

      else if (!*result)
      {
        if (v12)
        {
          v10 = v10 - v13;
          if (v10 || __PAIR64__(v8, v9) != __PAIR64__(v15, v14))
          {
            v16 = 0;
            if (v10 >= 0)
            {
              v10 = v10;
            }

            else
            {
              v10 = -v10;
            }

            if (v10 > v22)
            {
              v22 = v10;
            }

            LODWORD(v9) = v9 - v14;
            if (v9 >= 0)
            {
              v9 = v9;
            }

            else
            {
              v9 = -v9;
            }

            if (v9 > v22)
            {
              v22 = v9;
            }

            LODWORD(v8) = v8 - v15;
            if (v8 >= 0)
            {
              v8 = v8;
            }

            else
            {
              v8 = -v8;
            }

            if (v8 > v22)
            {
              v22 = v8;
            }
          }
        }

        else
        {
          v16 = 1;
          v15 = *(result + 3);
          v14 = *(result + 2);
          v13 = *(result + 1);
        }

        ++v12;
      }

      v24 &= v26 == v23;
      result = (result + 4);
      --v25;
    }

    while (v25);
    v30 = v22 > 2;
    v31 = v24 ^ 1;
  }

  else
  {
    v30 = 0;
    v31 = 0;
    v21 = 0;
    v20 = 0;
    v19 = 0;
    v18 = 0;
    v17 = 0;
    v16 = 0;
    v15 = 0;
    v14 = 0;
    v13 = 0;
    v12 = 0;
  }

  v33 = v12 == v11 || v17 == v11;
  v34 = (v12 > v11 / 0x64) & v16;
  if (v17 > v11 / 0x64)
  {
    v35 = v21 & (v34 ^ 1);
  }

  else
  {
    v35 = 0;
  }

  if (v33)
  {
    v76 = v13;
    if (((v34 | v35) & 1) == 0)
    {
      goto LABEL_93;
    }
  }

  else
  {
    if (((v16 | v21 | v30) & 1) == 0)
    {
      v74 = a2;
      v75 = a4;
      v14 = 0;
      v15 = 0;
      v37 = 0;
      v36 = 2.0;
      goto LABEL_58;
    }

    v76 = v13;
    if (((v34 | v35) & 1) == 0)
    {
      goto LABEL_97;
    }
  }

  v36 = 0.0;
  v74 = a2;
  v75 = a4;
  if (v34)
  {
    v37 = v76;
LABEL_58:
    v72 = v33;
    v73 = v31;
    v70 = v14;
    v71 = 1;
    v38 = v15;
    v76 = v37;
    goto LABEL_60;
  }

  v72 = v33;
  v73 = v31;
  v70 = v19;
  v71 = 0;
  v38 = v20;
  v37 = v18;
LABEL_60:
  result = (*(**(a1 + 64) + 16))(*(a1 + 64), v8, v9, v10);
  v44 = v11 == 0;
  if (v11)
  {
    v39.n128_f32[0] = v37;
    v40.n128_f32[0] = v70;
    v41.n128_f32[0] = v38;
    v45 = v35 << 31 >> 31;
    v46 = result + 3;
    v42.n128_u32[0] = 1.0;
    v43.n128_u64[0] = 0;
    v47 = v11;
    a2 = v74;
    a4 = v75;
    v31 = v73;
    do
    {
      v48 = *(v46 - 3);
      if (v48 != v45)
      {
        v49 = (v48 ^ v45);
        v50 = 1132396544;
        v51 = 255.0 / v49;
        v52 = 1.0 - (v49 / 255.0);
        LOBYTE(v50) = *(v46 - 2);
        *&v53 = v52 * v39.n128_f32[0];
        v54 = (v50 - (v52 * v39.n128_f32[0])) - v36;
        LOBYTE(v53) = *(v46 - 1);
        *&v55 = v52 * v40.n128_f32[0];
        v56 = (v53 - (v52 * v40.n128_f32[0])) - v36;
        LOBYTE(v55) = *v46;
        v57 = (v55 - (v52 * v41.n128_f32[0])) - v36;
        if (v54 >= 0.0)
        {
          v58 = v54;
        }

        else
        {
          v58 = 0.0;
        }

        if (v56 >= 0.0)
        {
          v59 = v56;
        }

        else
        {
          v59 = 0.0;
        }

        if (v57 < 0.0)
        {
          v57 = 0.0;
        }

        if ((v51 * v58) > 255 || (v51 * v59) > 255 || (v51 * v57) > 255)
        {
          break;
        }
      }

      --v47;
      v46 += 4;
      v44 = v47 == 0;
    }

    while (v47);
  }

  else
  {
    a2 = v74;
    a4 = v75;
    v31 = v73;
  }

  if (v71)
  {
LABEL_78:
    v60 = 1;
    goto LABEL_92;
  }

  if (!v18 && !v19 && !v20)
  {
    goto LABEL_82;
  }

  v61 = v31;
  result = (*(**(v77 + 8) + 16))(*(v77 + 8), v39, v40, v41, v42, v43);
  if (v11)
  {
    v62 = result + 3;
    v31 = v61;
    while (1)
    {
      if (*(v62 - 3))
      {
        v63 = 1132396544;
        v64 = 255.0 / *(v62 - 3);
        LOBYTE(v63) = *(v62 - 2);
        v65 = v64 * v63;
        if (v65 > 255)
        {
          break;
        }

        LOBYTE(v65) = *(v62 - 1);
        v66 = v64 * LODWORD(v65);
        if (v66 > 255)
        {
          break;
        }

        LOBYTE(v66) = *v62;
        if ((v64 * LODWORD(v66)) > 255)
        {
          break;
        }
      }

      v62 += 4;
      if (!--v11)
      {
        v15 = 0;
        v14 = 0;
        v76 = 0;
        goto LABEL_78;
      }
    }

LABEL_82:
    v60 = 0;
    goto LABEL_92;
  }

  v15 = 0;
  v14 = 0;
  v76 = 0;
  v60 = 1;
  v31 = v61;
LABEL_92:
  if (v72)
  {
LABEL_93:
    *a2 = 0;
LABEL_98:
    *a3 = 0;
    goto LABEL_99;
  }

  if (!v44)
  {
LABEL_97:
    *a2 = 1;
    goto LABEL_98;
  }

  v67 = v31;
  PCColor::PCColor(&v81.var1);
  PCImage::getColorSpace(v77, &v81);
  if (v60)
  {
    PCColor::setRGB(&v81.var1, v76 / 255.0, v14 / 255.0, v15 / 255.0, &v81);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v81);
    v68 = 0;
  }

  else
  {
    PCColor::setRGB(&v81.var1, v18 / 255.0, v19 / 255.0, v20 / 255.0, &v81);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v81);
    v68 = 1;
  }

  *a3 = v68;
  v80 = 0;
  v79 = 0.0;
  PCColorSpaceCache::rec709Linear(&v81);
  PCColor::getRGB(&v81.var1, &v80 + 1, &v80, &v79, &v81);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v81);
  if (*(&v80 + 1) * 0.2126 + *&v80 * 0.7152 + v79 * 0.0722 >= 0.5)
  {
    v69 = 3;
  }

  else
  {
    v69 = 2;
  }

  *a2 = v69;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v81.var7);
  v31 = v67;
LABEL_99:
  *a4 = v31;
  return result;
}

void sub_26031E8CC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, ...)
{
  va_start(va1, a10);
  va_start(va, a10);
  v11 = va_arg(va1, CGColorSpace *);
  v13 = va_arg(va1, void);
  v14 = va_arg(va1, void);
  v15 = va_arg(va1, void);
  v16 = va_arg(va1, void);
  v17 = va_arg(va1, void);
  v18 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

CGColorSpace **PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)4>>>>(uint64_t a1, int *a2, char *a3, _BYTE *a4)
{
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v77 = a1;
  v11 = *(a1 + 32) * *(a1 + 28);
  if (v11)
  {
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = *result;
    v24 = 1;
    v25 = *(a1 + 32) * *(a1 + 28);
    do
    {
      v26 = *result;
      v10 = *(result + 3);
      v9 = *(result + 2);
      v8 = *(result + 1);
      if (v26 == 255)
      {
        v29 = v10 == v18 && v19 == *(result + 2) && v20 == *(result + 1);
        v21 &= v29;
        if (!v17)
        {
          v21 = 1;
          v20 = *(result + 1);
          v19 = *(result + 2);
          v18 = *(result + 3);
        }

        ++v17;
      }

      else if (!*result)
      {
        if (v12)
        {
          v10 = v10 - v13;
          if (v10 || __PAIR64__(v9, v8) != __PAIR64__(v14, v15))
          {
            v16 = 0;
            if (v10 >= 0)
            {
              v10 = v10;
            }

            else
            {
              v10 = -v10;
            }

            if (v10 > v22)
            {
              v22 = v10;
            }

            LODWORD(v9) = v9 - v14;
            if (v9 >= 0)
            {
              v9 = v9;
            }

            else
            {
              v9 = -v9;
            }

            if (v9 > v22)
            {
              v22 = v9;
            }

            LODWORD(v8) = v8 - v15;
            if (v8 >= 0)
            {
              v8 = v8;
            }

            else
            {
              v8 = -v8;
            }

            if (v8 > v22)
            {
              v22 = v8;
            }
          }
        }

        else
        {
          v16 = 1;
          v15 = *(result + 1);
          v14 = *(result + 2);
          v13 = *(result + 3);
        }

        ++v12;
      }

      v24 &= v26 == v23;
      result = (result + 4);
      --v25;
    }

    while (v25);
    v30 = v22 > 2;
    v31 = v24 ^ 1;
  }

  else
  {
    v30 = 0;
    v31 = 0;
    v21 = 0;
    v20 = 0;
    v19 = 0;
    v18 = 0;
    v17 = 0;
    v16 = 0;
    v15 = 0;
    v14 = 0;
    v13 = 0;
    v12 = 0;
  }

  v33 = v12 == v11 || v17 == v11;
  v34 = (v12 > v11 / 0x64) & v16;
  if (v17 > v11 / 0x64)
  {
    v35 = v21 & (v34 ^ 1);
  }

  else
  {
    v35 = 0;
  }

  if (v33)
  {
    v76 = v13;
    if (((v34 | v35) & 1) == 0)
    {
      goto LABEL_93;
    }
  }

  else
  {
    if (((v16 | v21 | v30) & 1) == 0)
    {
      v74 = a2;
      v75 = a4;
      v14 = 0;
      v15 = 0;
      v37 = 0;
      v36 = 2.0;
      goto LABEL_58;
    }

    v76 = v13;
    if (((v34 | v35) & 1) == 0)
    {
      goto LABEL_97;
    }
  }

  v36 = 0.0;
  v74 = a2;
  v75 = a4;
  if (v34)
  {
    v37 = v76;
LABEL_58:
    v72 = v33;
    v73 = v31;
    v70 = v14;
    v71 = 1;
    v38 = v15;
    v76 = v37;
    goto LABEL_60;
  }

  v72 = v33;
  v73 = v31;
  v70 = v19;
  v71 = 0;
  v38 = v20;
  v37 = v18;
LABEL_60:
  result = (*(**(a1 + 64) + 16))(*(a1 + 64), v8, v9, v10);
  v44 = v11 == 0;
  if (v11)
  {
    v39.n128_f32[0] = v37;
    v40.n128_f32[0] = v70;
    v41.n128_f32[0] = v38;
    v45 = v35 << 31 >> 31;
    v46 = result + 3;
    v42.n128_u32[0] = 1.0;
    v43.n128_u64[0] = 0;
    v47 = v11;
    a2 = v74;
    a4 = v75;
    v31 = v73;
    do
    {
      v48 = *(v46 - 3);
      if (v48 != v45)
      {
        v49 = (v48 ^ v45);
        v50 = 1132396544;
        v51 = 255.0 / v49;
        v52 = 1.0 - (v49 / 255.0);
        LOBYTE(v50) = *v46;
        *&v53 = v52 * v39.n128_f32[0];
        v54 = (v50 - (v52 * v39.n128_f32[0])) - v36;
        LOBYTE(v53) = *(v46 - 1);
        *&v55 = v52 * v40.n128_f32[0];
        v56 = (v53 - (v52 * v40.n128_f32[0])) - v36;
        LOBYTE(v55) = *(v46 - 2);
        v57 = (v55 - (v52 * v41.n128_f32[0])) - v36;
        if (v54 >= 0.0)
        {
          v58 = v54;
        }

        else
        {
          v58 = 0.0;
        }

        if (v56 >= 0.0)
        {
          v59 = v56;
        }

        else
        {
          v59 = 0.0;
        }

        if (v57 < 0.0)
        {
          v57 = 0.0;
        }

        if ((v51 * v58) > 255 || (v51 * v59) > 255 || (v51 * v57) > 255)
        {
          break;
        }
      }

      --v47;
      v46 += 4;
      v44 = v47 == 0;
    }

    while (v47);
  }

  else
  {
    a2 = v74;
    a4 = v75;
    v31 = v73;
  }

  if (v71)
  {
LABEL_78:
    v60 = 1;
    goto LABEL_92;
  }

  if (!v18 && !v19 && !v20)
  {
    goto LABEL_82;
  }

  v61 = v31;
  result = (*(**(v77 + 8) + 16))(*(v77 + 8), v39, v40, v41, v42, v43);
  if (v11)
  {
    v62 = result + 3;
    v31 = v61;
    while (1)
    {
      if (*(v62 - 3))
      {
        v63 = 1132396544;
        v64 = 255.0 / *(v62 - 3);
        LOBYTE(v63) = *v62;
        v65 = v64 * v63;
        if (v65 > 255)
        {
          break;
        }

        LOBYTE(v65) = *(v62 - 1);
        v66 = v64 * LODWORD(v65);
        if (v66 > 255)
        {
          break;
        }

        LOBYTE(v66) = *(v62 - 2);
        if ((v64 * LODWORD(v66)) > 255)
        {
          break;
        }
      }

      v62 += 4;
      if (!--v11)
      {
        v15 = 0;
        v14 = 0;
        v76 = 0;
        goto LABEL_78;
      }
    }

LABEL_82:
    v60 = 0;
    goto LABEL_92;
  }

  v15 = 0;
  v14 = 0;
  v76 = 0;
  v60 = 1;
  v31 = v61;
LABEL_92:
  if (v72)
  {
LABEL_93:
    *a2 = 0;
LABEL_98:
    *a3 = 0;
    goto LABEL_99;
  }

  if (!v44)
  {
LABEL_97:
    *a2 = 1;
    goto LABEL_98;
  }

  v67 = v31;
  PCColor::PCColor(&v81.var1);
  PCImage::getColorSpace(v77, &v81);
  if (v60)
  {
    PCColor::setRGB(&v81.var1, v76 / 255.0, v14 / 255.0, v15 / 255.0, &v81);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v81);
    v68 = 0;
  }

  else
  {
    PCColor::setRGB(&v81.var1, v18 / 255.0, v19 / 255.0, v20 / 255.0, &v81);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v81);
    v68 = 1;
  }

  *a3 = v68;
  v80 = 0;
  v79 = 0.0;
  PCColorSpaceCache::rec709Linear(&v81);
  PCColor::getRGB(&v81.var1, &v80 + 1, &v80, &v79, &v81);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v81);
  if (*(&v80 + 1) * 0.2126 + *&v80 * 0.7152 + v79 * 0.0722 >= 0.5)
  {
    v69 = 3;
  }

  else
  {
    v69 = 2;
  }

  *a2 = v69;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v81.var7);
  v31 = v67;
LABEL_99:
  *a4 = v31;
  return result;
}

void sub_26031EF6C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, ...)
{
  va_start(va1, a10);
  va_start(va, a10);
  v11 = va_arg(va1, CGColorSpace *);
  v13 = va_arg(va1, void);
  v14 = va_arg(va1, void);
  v15 = va_arg(va1, void);
  v16 = va_arg(va1, void);
  v17 = va_arg(va1, void);
  v18 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

uint64_t PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)5>>>>(uint64_t a1, int *a2, char *a3, _BYTE *a4)
{
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v83 = a1;
  v11 = *(a1 + 32) * *(a1 + 28);
  if (v11)
  {
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = *(result + 3);
    v24 = (result + 3);
    v25 = 1;
    v26 = *(a1 + 32) * *(a1 + 28);
    do
    {
      v27 = *v24;
      v10 = *(v24 - 3);
      v9 = *(v24 - 2);
      v8 = *(v24 - 1);
      if (v27 == 255)
      {
        v30 = v10 == v18 && v19 == *(v24 - 2) && v20 == *(v24 - 1);
        v21 &= v30;
        if (!v17)
        {
          v21 = 1;
          v20 = *(v24 - 1);
          v19 = *(v24 - 2);
          v18 = *(v24 - 3);
        }

        ++v17;
      }

      else if (!*v24)
      {
        if (v12)
        {
          v10 = v10 - v13;
          if (v10 || __PAIR64__(v8, v9) != __PAIR64__(v15, v14))
          {
            v16 = 0;
            if (v10 >= 0)
            {
              v10 = v10;
            }

            else
            {
              v10 = -v10;
            }

            if (v10 > v22)
            {
              v22 = v10;
            }

            LODWORD(v9) = v9 - v14;
            if (v9 >= 0)
            {
              v9 = v9;
            }

            else
            {
              v9 = -v9;
            }

            if (v9 > v22)
            {
              v22 = v9;
            }

            LODWORD(v8) = v8 - v15;
            if (v8 >= 0)
            {
              v8 = v8;
            }

            else
            {
              v8 = -v8;
            }

            if (v8 > v22)
            {
              v22 = v8;
            }
          }
        }

        else
        {
          v16 = 1;
          v15 = *(v24 - 1);
          v14 = *(v24 - 2);
          v13 = *(v24 - 3);
        }

        ++v12;
      }

      v24 += 4;
      result = v27 == v23;
      v25 &= result;
      --v26;
    }

    while (v26);
    v31 = v22 > 2;
    v32 = v25 ^ 1;
  }

  else
  {
    v31 = 0;
    v32 = 0;
    v21 = 0;
    v20 = 0;
    v19 = 0;
    v18 = 0;
    v17 = 0;
    v16 = 0;
    v15 = 0;
    v14 = 0;
    v13 = 0;
    v12 = 0;
  }

  v34 = v12 == v11 || v17 == v11;
  v35 = (v12 > v11 / 0x64) & v16;
  if (v17 > v11 / 0x64)
  {
    v36 = v21 & (v35 ^ 1);
  }

  else
  {
    v36 = 0;
  }

  if (v34)
  {
    v82 = v13;
    if (((v35 | v36) & 1) == 0)
    {
      goto LABEL_93;
    }
  }

  else
  {
    if (((v16 | v21 | v31) & 1) == 0)
    {
      v80 = a2;
      v81 = a4;
      v14 = 0;
      v15 = 0;
      v38 = 0;
      v37 = 2.0;
      goto LABEL_58;
    }

    v82 = v13;
    if (((v35 | v36) & 1) == 0)
    {
      goto LABEL_97;
    }
  }

  v37 = 0.0;
  v80 = a2;
  v81 = a4;
  if (v35)
  {
    v38 = v82;
LABEL_58:
    v78 = v34;
    v79 = v32;
    v76 = v14;
    v77 = 1;
    v39 = v15;
    v82 = v38;
    goto LABEL_60;
  }

  v78 = v34;
  v79 = v32;
  v76 = v19;
  v77 = 0;
  v39 = v20;
  v38 = v18;
LABEL_60:
  result = (*(**(a1 + 64) + 16))(*(a1 + 64), v8, v9, v10);
  v45 = v11 == 0;
  if (v11)
  {
    v46 = v36 << 31 >> 31;
    v40.n128_f32[0] = v38;
    v41.n128_f32[0] = v76;
    v42.n128_f32[0] = v39;
    v47 = (result + 3);
    v43.n128_u32[0] = 1.0;
    v44.n128_u64[0] = 0;
    v48 = v11;
    v49 = (result + 3);
    a2 = v80;
    a4 = v81;
    v32 = v79;
    do
    {
      v51 = *v49;
      v49 += 4;
      v50 = v51;
      if (v51 != v46)
      {
        v52 = (v50 ^ v46);
        v53 = 1132396544;
        v54 = 255.0 / v52;
        v55 = 1.0 - (v52 / 255.0);
        LOBYTE(v53) = *(v47 - 3);
        *&v56 = v55 * v40.n128_f32[0];
        v57 = (v53 - (v55 * v40.n128_f32[0])) - v37;
        LOBYTE(v56) = *(v47 - 2);
        *&v58 = v55 * v41.n128_f32[0];
        v59 = (v56 - (v55 * v41.n128_f32[0])) - v37;
        LOBYTE(v58) = *(v47 - 1);
        v60 = (v58 - (v55 * v42.n128_f32[0])) - v37;
        if (v57 >= 0.0)
        {
          v61 = v57;
        }

        else
        {
          v61 = 0.0;
        }

        if (v59 >= 0.0)
        {
          v62 = v59;
        }

        else
        {
          v62 = 0.0;
        }

        if (v60 < 0.0)
        {
          v60 = 0.0;
        }

        if ((v54 * v61) > 255 || (v54 * v62) > 255 || (v54 * v60) > 255)
        {
          break;
        }
      }

      v45 = --v48 == 0;
      v47 = v49;
    }

    while (v48);
  }

  else
  {
    a2 = v80;
    a4 = v81;
    v32 = v79;
  }

  if (v77)
  {
LABEL_78:
    v63 = 1;
    goto LABEL_92;
  }

  if (!v18 && !v19 && !v20)
  {
    goto LABEL_82;
  }

  v64 = v32;
  result = (*(**(v83 + 8) + 16))(*(v83 + 8), v40, v41, v42, v43, v44);
  if (v11)
  {
    v65 = (result + 3);
    v66 = (result + 3);
    v32 = v64;
    while (1)
    {
      v68 = *v66;
      v66 += 4;
      v67 = v68;
      if (v68)
      {
        v69 = 1132396544;
        v70 = 255.0 / v67;
        LOBYTE(v69) = *(v65 - 3);
        v71 = v70 * v69;
        if (v71 > 255)
        {
          break;
        }

        LOBYTE(v71) = *(v65 - 2);
        v72 = v70 * LODWORD(v71);
        if (v72 > 255)
        {
          break;
        }

        LOBYTE(v72) = *(v65 - 1);
        if ((v70 * LODWORD(v72)) > 255)
        {
          break;
        }
      }

      v65 = v66;
      if (!--v11)
      {
        v15 = 0;
        v14 = 0;
        v82 = 0;
        goto LABEL_78;
      }
    }

LABEL_82:
    v63 = 0;
    goto LABEL_92;
  }

  v15 = 0;
  v14 = 0;
  v82 = 0;
  v63 = 1;
  v32 = v64;
LABEL_92:
  if (v78)
  {
LABEL_93:
    *a2 = 0;
LABEL_98:
    *a3 = 0;
    goto LABEL_99;
  }

  if (!v45)
  {
LABEL_97:
    *a2 = 1;
    goto LABEL_98;
  }

  v73 = v32;
  PCColor::PCColor(&v87.var1);
  PCImage::getColorSpace(v83, &v87);
  if (v63)
  {
    PCColor::setRGB(&v87.var1, v82 / 255.0, v14 / 255.0, v15 / 255.0, &v87);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v87);
    v74 = 0;
  }

  else
  {
    PCColor::setRGB(&v87.var1, v18 / 255.0, v19 / 255.0, v20 / 255.0, &v87);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v87);
    v74 = 1;
  }

  *a3 = v74;
  v86 = 0;
  v85 = 0.0;
  PCColorSpaceCache::rec709Linear(&v87);
  PCColor::getRGB(&v87.var1, &v86 + 1, &v86, &v85, &v87);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v87);
  if (*(&v86 + 1) * 0.2126 + *&v86 * 0.7152 + v85 * 0.0722 >= 0.5)
  {
    v75 = 3;
  }

  else
  {
    v75 = 2;
  }

  *a2 = v75;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v87.var7);
  v32 = v73;
LABEL_99:
  *a4 = v32;
  return result;
}

void sub_26031F618(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, ...)
{
  va_start(va1, a10);
  va_start(va, a10);
  v11 = va_arg(va1, CGColorSpace *);
  v13 = va_arg(va1, void);
  v14 = va_arg(va1, void);
  v15 = va_arg(va1, void);
  v16 = va_arg(va1, void);
  v17 = va_arg(va1, void);
  v18 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

uint64_t PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)6>>>>(uint64_t a1, int *a2, char *a3, _BYTE *a4)
{
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v83 = a1;
  v11 = *(a1 + 32) * *(a1 + 28);
  if (v11)
  {
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = *(result + 3);
    v24 = (result + 3);
    v25 = 1;
    v26 = *(a1 + 32) * *(a1 + 28);
    do
    {
      v27 = *v24;
      v10 = *(v24 - 1);
      v9 = *(v24 - 2);
      v8 = *(v24 - 3);
      if (v27 == 255)
      {
        v30 = v10 == v18 && v19 == *(v24 - 2) && v20 == *(v24 - 3);
        v21 &= v30;
        if (!v17)
        {
          v21 = 1;
          v20 = *(v24 - 3);
          v19 = *(v24 - 2);
          v18 = *(v24 - 1);
        }

        ++v17;
      }

      else if (!*v24)
      {
        if (v12)
        {
          v10 = v10 - v13;
          if (v10 || __PAIR64__(v9, v8) != __PAIR64__(v14, v15))
          {
            v16 = 0;
            if (v10 >= 0)
            {
              v10 = v10;
            }

            else
            {
              v10 = -v10;
            }

            if (v10 > v22)
            {
              v22 = v10;
            }

            LODWORD(v9) = v9 - v14;
            if (v9 >= 0)
            {
              v9 = v9;
            }

            else
            {
              v9 = -v9;
            }

            if (v9 > v22)
            {
              v22 = v9;
            }

            LODWORD(v8) = v8 - v15;
            if (v8 >= 0)
            {
              v8 = v8;
            }

            else
            {
              v8 = -v8;
            }

            if (v8 > v22)
            {
              v22 = v8;
            }
          }
        }

        else
        {
          v16 = 1;
          v15 = *(v24 - 3);
          v14 = *(v24 - 2);
          v13 = *(v24 - 1);
        }

        ++v12;
      }

      v24 += 4;
      result = v27 == v23;
      v25 &= result;
      --v26;
    }

    while (v26);
    v31 = v22 > 2;
    v32 = v25 ^ 1;
  }

  else
  {
    v31 = 0;
    v32 = 0;
    v21 = 0;
    v20 = 0;
    v19 = 0;
    v18 = 0;
    v17 = 0;
    v16 = 0;
    v15 = 0;
    v14 = 0;
    v13 = 0;
    v12 = 0;
  }

  v34 = v12 == v11 || v17 == v11;
  v35 = (v12 > v11 / 0x64) & v16;
  if (v17 > v11 / 0x64)
  {
    v36 = v21 & (v35 ^ 1);
  }

  else
  {
    v36 = 0;
  }

  if (v34)
  {
    v82 = v13;
    if (((v35 | v36) & 1) == 0)
    {
      goto LABEL_93;
    }
  }

  else
  {
    if (((v16 | v21 | v31) & 1) == 0)
    {
      v80 = a2;
      v81 = a4;
      v14 = 0;
      v15 = 0;
      v38 = 0;
      v37 = 2.0;
      goto LABEL_58;
    }

    v82 = v13;
    if (((v35 | v36) & 1) == 0)
    {
      goto LABEL_97;
    }
  }

  v37 = 0.0;
  v80 = a2;
  v81 = a4;
  if (v35)
  {
    v38 = v82;
LABEL_58:
    v78 = v34;
    v79 = v32;
    v76 = v14;
    v77 = 1;
    v39 = v15;
    v82 = v38;
    goto LABEL_60;
  }

  v78 = v34;
  v79 = v32;
  v76 = v19;
  v77 = 0;
  v39 = v20;
  v38 = v18;
LABEL_60:
  result = (*(**(a1 + 64) + 16))(*(a1 + 64), v8, v9, v10);
  v45 = v11 == 0;
  if (v11)
  {
    v46 = v36 << 31 >> 31;
    v40.n128_f32[0] = v38;
    v41.n128_f32[0] = v76;
    v42.n128_f32[0] = v39;
    v47 = (result + 3);
    v43.n128_u32[0] = 1.0;
    v44.n128_u64[0] = 0;
    v48 = v11;
    v49 = (result + 3);
    a2 = v80;
    a4 = v81;
    v32 = v79;
    do
    {
      v51 = *v49;
      v49 += 4;
      v50 = v51;
      if (v51 != v46)
      {
        v52 = (v50 ^ v46);
        v53 = 1132396544;
        v54 = 255.0 / v52;
        v55 = 1.0 - (v52 / 255.0);
        LOBYTE(v53) = *(v47 - 1);
        *&v56 = v55 * v40.n128_f32[0];
        v57 = (v53 - (v55 * v40.n128_f32[0])) - v37;
        LOBYTE(v56) = *(v47 - 2);
        *&v58 = v55 * v41.n128_f32[0];
        v59 = (v56 - (v55 * v41.n128_f32[0])) - v37;
        LOBYTE(v58) = *(v47 - 3);
        v60 = (v58 - (v55 * v42.n128_f32[0])) - v37;
        if (v57 >= 0.0)
        {
          v61 = v57;
        }

        else
        {
          v61 = 0.0;
        }

        if (v59 >= 0.0)
        {
          v62 = v59;
        }

        else
        {
          v62 = 0.0;
        }

        if (v60 < 0.0)
        {
          v60 = 0.0;
        }

        if ((v54 * v61) > 255 || (v54 * v62) > 255 || (v54 * v60) > 255)
        {
          break;
        }
      }

      v45 = --v48 == 0;
      v47 = v49;
    }

    while (v48);
  }

  else
  {
    a2 = v80;
    a4 = v81;
    v32 = v79;
  }

  if (v77)
  {
LABEL_78:
    v63 = 1;
    goto LABEL_92;
  }

  if (!v18 && !v19 && !v20)
  {
    goto LABEL_82;
  }

  v64 = v32;
  result = (*(**(v83 + 8) + 16))(*(v83 + 8), v40, v41, v42, v43, v44);
  if (v11)
  {
    v65 = (result + 3);
    v66 = (result + 3);
    v32 = v64;
    while (1)
    {
      v68 = *v66;
      v66 += 4;
      v67 = v68;
      if (v68)
      {
        v69 = 1132396544;
        v70 = 255.0 / v67;
        LOBYTE(v69) = *(v65 - 1);
        v71 = v70 * v69;
        if (v71 > 255)
        {
          break;
        }

        LOBYTE(v71) = *(v65 - 2);
        v72 = v70 * LODWORD(v71);
        if (v72 > 255)
        {
          break;
        }

        LOBYTE(v72) = *(v65 - 3);
        if ((v70 * LODWORD(v72)) > 255)
        {
          break;
        }
      }

      v65 = v66;
      if (!--v11)
      {
        v15 = 0;
        v14 = 0;
        v82 = 0;
        goto LABEL_78;
      }
    }

LABEL_82:
    v63 = 0;
    goto LABEL_92;
  }

  v15 = 0;
  v14 = 0;
  v82 = 0;
  v63 = 1;
  v32 = v64;
LABEL_92:
  if (v78)
  {
LABEL_93:
    *a2 = 0;
LABEL_98:
    *a3 = 0;
    goto LABEL_99;
  }

  if (!v45)
  {
LABEL_97:
    *a2 = 1;
    goto LABEL_98;
  }

  v73 = v32;
  PCColor::PCColor(&v87.var1);
  PCImage::getColorSpace(v83, &v87);
  if (v63)
  {
    PCColor::setRGB(&v87.var1, v82 / 255.0, v14 / 255.0, v15 / 255.0, &v87);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v87);
    v74 = 0;
  }

  else
  {
    PCColor::setRGB(&v87.var1, v18 / 255.0, v19 / 255.0, v20 / 255.0, &v87);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v87);
    v74 = 1;
  }

  *a3 = v74;
  v86 = 0;
  v85 = 0.0;
  PCColorSpaceCache::rec709Linear(&v87);
  PCColor::getRGB(&v87.var1, &v86 + 1, &v86, &v85, &v87);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v87);
  if (*(&v86 + 1) * 0.2126 + *&v86 * 0.7152 + v85 * 0.0722 >= 0.5)
  {
    v75 = 3;
  }

  else
  {
    v75 = 2;
  }

  *a2 = v75;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v87.var7);
  v32 = v73;
LABEL_99:
  *a4 = v32;
  return result;
}

void sub_26031FCC4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, ...)
{
  va_start(va1, a10);
  va_start(va, a10);
  v11 = va_arg(va1, CGColorSpace *);
  v13 = va_arg(va1, void);
  v14 = va_arg(va1, void);
  v15 = va_arg(va1, void);
  v16 = va_arg(va1, void);
  v17 = va_arg(va1, void);
  v18 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

uint64_t PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)10>>>>(uint64_t a1, int *a2, char *a3, _BYTE *a4)
{
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v80 = a1;
  v8 = *(a1 + 32) * *(a1 + 28);
  if (v8)
  {
    v9 = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = *(result + 6);
    v21 = (result + 4);
    v22 = 1;
    LODWORD(result) = *(a1 + 32) * *(a1 + 28);
    do
    {
      v23 = v21[1];
      v24 = *(v21 - 2);
      v25 = *(v21 - 1);
      v26 = *v21;
      if (v23 == 0xFFFF)
      {
        v32 = v24 == v15 && v16 == *(v21 - 1) && v17 == *v21;
        v18 &= v32;
        if (!v14)
        {
          v18 = 1;
          v17 = *v21;
          v16 = *(v21 - 1);
          v15 = *(v21 - 2);
        }

        ++v14;
      }

      else if (!v21[1])
      {
        if (v9)
        {
          v27 = v24 - v10;
          if (v27 || v25 != v11 || v26 != v12)
          {
            v13 = 0;
            if (v27 < 0)
            {
              v27 = -v27;
            }

            if (v27 > v19)
            {
              v19 = v27;
            }

            v28 = v25 - v11;
            if (v28 < 0)
            {
              v28 = -v28;
            }

            if (v28 > v19)
            {
              v19 = v28;
            }

            v29 = v26 - v12;
            if (v29 < 0)
            {
              v29 = -v29;
            }

            if (v29 > v19)
            {
              v19 = v29;
            }
          }
        }

        else
        {
          v13 = 1;
          v12 = *v21;
          v11 = *(v21 - 1);
          v10 = *(v21 - 2);
        }

        ++v9;
      }

      v21 += 4;
      v22 &= v23 == v20;
      result = (result - 1);
    }

    while (result);
    v33 = v19 > 2;
    v34 = v22 ^ 1;
  }

  else
  {
    v33 = 0;
    v34 = 0;
    v18 = 0;
    v17 = 0;
    v16 = 0;
    v15 = 0;
    v14 = 0;
    v13 = 0;
    v12 = 0;
    v11 = 0;
    v10 = 0;
    v9 = 0;
  }

  v36 = v9 == v8 || v14 == v8;
  v37 = (v9 > v8 / 0x64) & v13;
  if (v14 > v8 / 0x64)
  {
    v38 = v18 & (v37 ^ 1);
  }

  else
  {
    v38 = 0;
  }

  if (v36)
  {
    v79 = v10;
    if (((v37 | v38) & 1) == 0)
    {
      goto LABEL_91;
    }
  }

  else
  {
    if (((v13 | v18 | v33) & 1) == 0)
    {
      v77 = a2;
      v78 = a4;
      v11 = 0;
      v12 = 0;
      v40 = 0;
      v39 = 2.0;
      goto LABEL_56;
    }

    v79 = v10;
    if (((v37 | v38) & 1) == 0)
    {
      goto LABEL_95;
    }
  }

  v39 = 0.0;
  v77 = a2;
  v78 = a4;
  if (v37)
  {
    v40 = v79;
LABEL_56:
    v75 = v36;
    v76 = v34;
    v73 = v11;
    v74 = 1;
    v41 = v12;
    v79 = v40;
    goto LABEL_58;
  }

  v75 = v36;
  v76 = v34;
  v73 = v16;
  v74 = 0;
  v41 = v17;
  v40 = v15;
LABEL_58:
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v49 = v8 == 0;
  if (v8)
  {
    v42.n128_f32[0] = v40;
    v43.n128_f32[0] = v73;
    v44.n128_f32[0] = v41;
    v50 = (result + 4);
    v45.n128_u32[0] = 1199570688;
    v46.n128_u32[0] = 1.0;
    v47.n128_u64[0] = 0;
    v51 = v8;
    a2 = v77;
    a4 = v78;
    v34 = v76;
    do
    {
      v52 = v50[1];
      if (v52 != ((v38 << 15) >> 15))
      {
        v53 = (v52 ^ ((v38 << 15) >> 15));
        v54 = 65535.0 / v53;
        v55 = 1.0 - (v53 / 65535.0);
        LOWORD(v48) = *(v50 - 2);
        *&v56 = v55 * v42.n128_f32[0];
        v57 = (LODWORD(v48) - (v55 * v42.n128_f32[0])) - v39;
        LOWORD(v56) = *(v50 - 1);
        *&v58 = v55 * v43.n128_f32[0];
        v59 = (v56 - (v55 * v43.n128_f32[0])) - v39;
        LOWORD(v58) = *v50;
        v60 = (v58 - (v55 * v44.n128_f32[0])) - v39;
        if (v57 >= 0.0)
        {
          v61 = v57;
        }

        else
        {
          v61 = 0.0;
        }

        if (v59 >= 0.0)
        {
          v62 = v59;
        }

        else
        {
          v62 = 0.0;
        }

        if (v60 < 0.0)
        {
          v60 = 0.0;
        }

        if ((v54 * v61) >= 0x10000)
        {
          break;
        }

        v48 = v54 * v62;
        if (v48 >= 0x10000 || (v54 * v60) >= 0x10000)
        {
          break;
        }
      }

      v50 += 4;
      v49 = --v51 == 0;
    }

    while (v51);
  }

  else
  {
    a2 = v77;
    a4 = v78;
    v34 = v76;
  }

  if (v74)
  {
LABEL_76:
    v63 = 1;
    goto LABEL_90;
  }

  if (!v15 && !v16 && !v17)
  {
    goto LABEL_80;
  }

  v64 = v34;
  result = (*(**(v80 + 8) + 16))(*(v80 + 8), v42, v43, v44, v45, v46, v47);
  if (v8)
  {
    v66 = (result + 4);
    v34 = v64;
    while (1)
    {
      if (v66[1])
      {
        v67 = 65535.0 / v66[1];
        LOWORD(v65) = *(v66 - 2);
        v68 = v67 * LODWORD(v65);
        if (v68 >= 0x10000)
        {
          break;
        }

        LOWORD(v68) = *(v66 - 1);
        v69 = v67 * LODWORD(v68);
        if (v69 >= 0x10000)
        {
          break;
        }

        LOWORD(v69) = *v66;
        v65 = LODWORD(v69);
        if ((v67 * v65) >= 0x10000)
        {
          break;
        }
      }

      v66 += 4;
      if (!--v8)
      {
        v12 = 0;
        v11 = 0;
        v79 = 0;
        goto LABEL_76;
      }
    }

LABEL_80:
    v63 = 0;
    goto LABEL_90;
  }

  v12 = 0;
  v11 = 0;
  v79 = 0;
  v63 = 1;
  v34 = v64;
LABEL_90:
  if (v75)
  {
LABEL_91:
    *a2 = 0;
LABEL_96:
    *a3 = 0;
    goto LABEL_97;
  }

  if (!v49)
  {
LABEL_95:
    *a2 = 1;
    goto LABEL_96;
  }

  v70 = v34;
  PCColor::PCColor(&v84.var1);
  PCImage::getColorSpace(v80, &v84);
  if (v63)
  {
    PCColor::setRGB(&v84.var1, v79 / 255.0, v11 / 255.0, v12 / 255.0, &v84);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v84);
    v71 = 0;
  }

  else
  {
    PCColor::setRGB(&v84.var1, v15 / 255.0, v16 / 255.0, v17 / 255.0, &v84);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v84);
    v71 = 1;
  }

  *a3 = v71;
  v83 = 0;
  v82 = 0.0;
  PCColorSpaceCache::rec709Linear(&v84);
  PCColor::getRGB(&v84.var1, &v83 + 1, &v83, &v82, &v84);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v84);
  if (*(&v83 + 1) * 0.2126 + *&v83 * 0.7152 + v82 * 0.0722 >= 0.5)
  {
    v72 = 3;
  }

  else
  {
    v72 = 2;
  }

  *a2 = v72;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v84.var7);
  v34 = v70;
LABEL_97:
  *a4 = v34;
  return result;
}

void sub_26032036C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, ...)
{
  va_start(va1, a10);
  va_start(va, a10);
  v11 = va_arg(va1, CGColorSpace *);
  v13 = va_arg(va1, void);
  v14 = va_arg(va1, void);
  v15 = va_arg(va1, void);
  v16 = va_arg(va1, void);
  v17 = va_arg(va1, void);
  v18 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

uint64_t PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)13>>>>(PCImage *a1, int *a2, char *a3, _BYTE *a4)
{
  v5 = a1;
  result = (*(**(a1 + 8) + 16))(*(a1 + 8));
  v8 = *(v5 + 8) * *(v5 + 7);
  if (v8)
  {
    v9 = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v101 = 0;
    v17 = 0;
    v18 = half::_toFloat[*(result + 6)];
    v19 = (result + 4);
    v20 = 0;
    v21 = 1;
    v22 = *(v5 + 8) * *(v5 + 7);
    while (1)
    {
      v7 = *(v19 - 2);
      result = *(v19 - 1);
      v23 = *v19;
      v24 = half::_toFloat[v19[1]];
      if (v24 != 0.0)
      {
        if (v24 == 1.0)
        {
          if (v11)
          {
            if (half::_toFloat[v101] != half::_toFloat[v7] || half::_toFloat[v17] != half::_toFloat[result] || half::_toFloat[v20] != half::_toFloat[v23])
            {
              v12 = 0;
            }
          }

          else
          {
            v12 = 1;
            v20 = *v19;
            v17 = *(v19 - 1);
            v101 = *(v19 - 2);
          }

          ++v11;
        }

        goto LABEL_25;
      }

      if (v9)
      {
        v25 = half::_toFloat[v14];
        v26 = half::_toFloat[v7];
        if (v25 != v26)
        {
          v27 = half::_toFloat[result];
          v28 = half::_toFloat[v15];
LABEL_16:
          v10 = 0;
          result = vabds_f32(v26, v25);
          if (v13 <= result)
          {
            v13 = result;
          }

          v29 = half::_toFloat[v23];
          v30 = vabds_f32(v27, v28);
          if (v13 <= v30)
          {
            v13 = v30;
          }

          v31 = vabds_f32(v29, half::_toFloat[v16]);
          if (v13 <= v31)
          {
            v13 = v31;
          }

          goto LABEL_22;
        }

        v28 = half::_toFloat[v15];
        v27 = half::_toFloat[result];
        if (v28 != v27 || half::_toFloat[v16] != half::_toFloat[v23])
        {
          goto LABEL_16;
        }
      }

      else
      {
        v10 = 1;
        v16 = *v19;
        v15 = *(v19 - 1);
        v14 = *(v19 - 2);
      }

LABEL_22:
      ++v9;
LABEL_25:
      v19 += 4;
      v21 &= v24 == v18;
      if (!--v22)
      {
        v91 = v14;
        v96 = v15;
        v32 = v13 > 2;
        v92 = v21 ^ 1;
        goto LABEL_28;
      }
    }
  }

  v20 = 0;
  v17 = 0;
  v101 = 0;
  v16 = 0;
  v96 = 0;
  v91 = 0;
  v32 = 0;
  v92 = 0;
  v12 = 0;
  v11 = 0;
  v10 = 0;
  v9 = 0;
LABEL_28:
  v34 = v9 == v8 || v11 == v8;
  v35 = (v9 > v8 / 0x64) & v10;
  if (v11 > v8 / 0x64)
  {
    v36 = v12 & (v35 ^ 1);
  }

  else
  {
    v36 = 0;
  }

  v95 = v34;
  if ((v34 | v10 | v12 | v32))
  {
    if (((v35 | v36) & 1) == 0)
    {
      if (v34)
      {
LABEL_134:
        *a2 = 0;
LABEL_139:
        *a3 = 0;
        goto LABEL_140;
      }

LABEL_138:
      *a2 = 1;
      goto LABEL_139;
    }

    v37 = 0.0;
    if (v35)
    {
      v90 = 1;
      v99 = v96;
      v100 = v16;
      v38 = v91;
    }

    else
    {
      v90 = 0;
      v99 = v17;
      v100 = v20;
      v38 = v101;
    }

    v98 = v38;
  }

  else
  {
    v16 = 0;
    v96 = 0;
    v91 = 0;
    v99 = 0;
    v100 = 0;
    v98 = 0;
    v37 = 2.0;
    v90 = 1;
  }

  result = (*(**(v5 + 8) + 16))(*(v5 + 8), v7);
  v88 = v5;
  v89 = v20;
  v97 = v17;
  if (v8)
  {
    v39 = (result + 4);
    v40 = v8;
    while (1)
    {
      result = v39[1];
      v41 = *(v39 - 2);
      v42 = *(v39 - 1);
      v43 = *v39;
      if (v36)
      {
        v44 = 1.0 - half::_toFloat[result];
        if (v44 == 0.0)
        {
          result = 0;
        }

        else
        {
          v55 = 1.0 - half::_toFloat[result];
          if (half::_eLut[LODWORD(v44) >> 23])
          {
            result = half::_eLut[LODWORD(v44) >> 23] + (((LODWORD(v55) & 0x7FF000u) + 4096) >> 13);
          }

          else
          {
            result = half::convert(LODWORD(v44));
          }
        }
      }

      v45 = half::_toFloat[result];
      if (v45 > 0.0)
      {
        v46 = 1.0 / v45;
        v47 = 1.0 - (v45 / 1.0);
        v48 = (half::_toFloat[v41] - (half::_toFloat[v98] * v47)) - v37;
        v49 = (half::_toFloat[v42] - (v47 * half::_toFloat[v99])) - v37;
        v50 = (half::_toFloat[v43] - (v47 * half::_toFloat[v100])) - v37;
        if (v48 < 0.0)
        {
          v48 = 0.0;
        }

        v51 = v49 >= 0.0 ? v49 : 0.0;
        v52 = v50 >= 0.0 ? v50 : 0.0;
        v53 = v46 * v48;
        if ((v46 * v48) == 0.0)
        {
          LOWORD(v54) = 0;
        }

        else if (half::_eLut[LODWORD(v53) >> 23])
        {
          v54 = half::_eLut[LODWORD(v53) >> 23] + (((COERCE_UNSIGNED_INT(v46 * v48) & 0x7FF000) + 4096) >> 13);
        }

        else
        {
          LOWORD(v54) = half::convert(LODWORD(v53));
        }

        v56 = v46 * v51;
        if ((v46 * v51) == 0.0)
        {
          LOWORD(v57) = 0;
        }

        else if (half::_eLut[LODWORD(v56) >> 23])
        {
          v57 = half::_eLut[LODWORD(v56) >> 23] + (((COERCE_UNSIGNED_INT(v46 * v51) & 0x7FF000) + 4096) >> 13);
        }

        else
        {
          LOWORD(v57) = half::convert(LODWORD(v56));
        }

        v58 = v46 * v52;
        if ((v46 * v52) == 0.0)
        {
          result = 0;
        }

        else
        {
          result = half::_eLut[LODWORD(v58) >> 23] ? half::_eLut[LODWORD(v58) >> 23] + (((COERCE_UNSIGNED_INT(v46 * v52) & 0x7FF000) + 4096) >> 13) : half::convert(LODWORD(v58));
        }

        if (half::_toFloat[v54] > 1.0 || half::_toFloat[v57] > 1.0 || half::_toFloat[result] > 1.0)
        {
          break;
        }
      }

      v39 += 4;
      if (!--v40)
      {
        v59 = 1;
        goto LABEL_84;
      }
    }

    v59 = 0;
LABEL_84:
    v5 = v88;
    v20 = v89;
    v17 = v97;
  }

  else
  {
    v59 = 1;
  }

  v60 = v96;
  if (v90)
  {
    goto LABEL_129;
  }

  if (half::_toFloat[v101] == 0.0 && half::_toFloat[v17] == 0.0 && half::_toFloat[v20] == 0.0)
  {
    v79 = 0;
    goto LABEL_133;
  }

  result = (*(**(v5 + 8) + 16))(*(v5 + 8));
  if (!v8)
  {
    v16 = 0;
    v60 = 0;
    v91 = 0;
LABEL_129:
    v79 = 1;
    goto LABEL_133;
  }

  v61 = (result + 4);
  while (1)
  {
    v62 = v61[1];
    v63 = *(v61 - 1);
    v64 = *v61;
    v65 = half::_toFloat[*(v61 - 2)] - 0.0;
    if (v65 == 0.0)
    {
      LOWORD(v66) = 0;
    }

    else
    {
      result = LODWORD(v65);
      if (half::_eLut[LODWORD(v65) >> 23])
      {
        v66 = half::_eLut[LODWORD(v65) >> 23] + (((LODWORD(v65) & 0x7FF000u) + 4096) >> 13);
      }

      else
      {
        result = half::convert(LODWORD(v65));
        LOWORD(v66) = result;
      }
    }

    v67 = half::_toFloat[v63] - 0.0;
    if (v67 == 0.0)
    {
      LOWORD(v68) = 0;
    }

    else
    {
      result = LODWORD(v67);
      if (half::_eLut[LODWORD(v67) >> 23])
      {
        v68 = half::_eLut[LODWORD(v67) >> 23] + (((LODWORD(v67) & 0x7FF000u) + 4096) >> 13);
      }

      else
      {
        result = half::convert(LODWORD(v67));
        LOWORD(v68) = result;
      }
    }

    v69 = half::_toFloat[v64] - 0.0;
    if (v69 == 0.0)
    {
      LOWORD(v70) = 0;
    }

    else
    {
      result = LODWORD(v69);
      if (half::_eLut[LODWORD(v69) >> 23])
      {
        v70 = half::_eLut[LODWORD(v69) >> 23] + (((LODWORD(v69) & 0x7FF000u) + 4096) >> 13);
      }

      else
      {
        result = half::convert(LODWORD(v69));
        LOWORD(v70) = result;
      }
    }

    v71 = half::_toFloat[v62];
    if (v71 > 0.0)
    {
      v72 = 1.0 / v71;
      v73 = half::_toFloat[v66] * (1.0 / v71);
      if (v73 == 0.0)
      {
        LOWORD(v74) = 0;
      }

      else if (half::_eLut[LODWORD(v73) >> 23])
      {
        v74 = half::_eLut[LODWORD(v73) >> 23] + (((COERCE_UNSIGNED_INT(half::_toFloat[v66] * v72) & 0x7FF000) + 4096) >> 13);
      }

      else
      {
        LOWORD(v74) = half::convert(LODWORD(v73));
      }

      v75 = v72 * half::_toFloat[v68];
      if (v75 == 0.0)
      {
        LOWORD(v76) = 0;
      }

      else if (half::_eLut[LODWORD(v75) >> 23])
      {
        v76 = half::_eLut[LODWORD(v75) >> 23] + (((COERCE_UNSIGNED_INT(v72 * half::_toFloat[v68]) & 0x7FF000) + 4096) >> 13);
      }

      else
      {
        LOWORD(v76) = half::convert(LODWORD(v75));
      }

      v77 = v72 * half::_toFloat[v70];
      if (v77 == 0.0)
      {
        result = 0;
        v17 = v97;
      }

      else
      {
        v78 = v72 * half::_toFloat[v70];
        v17 = v97;
        if (half::_eLut[LODWORD(v77) >> 23])
        {
          result = half::_eLut[LODWORD(v77) >> 23] + (((LODWORD(v78) & 0x7FF000u) + 4096) >> 13);
        }

        else
        {
          result = half::convert(LODWORD(v77));
        }
      }

      if (half::_toFloat[v74] > 1.0 || half::_toFloat[v76] > 1.0)
      {
        v79 = 0;
        v20 = v89;
        goto LABEL_132;
      }

      if (half::_toFloat[result] > 1.0)
      {
        break;
      }
    }

    v61 += 4;
    if (!--v8)
    {
      v16 = 0;
      v60 = 0;
      v91 = 0;
      v79 = 1;
      v20 = v89;
      v17 = v97;
      goto LABEL_133;
    }
  }

  v79 = 0;
  v20 = v89;
  v17 = v97;
LABEL_132:
  v60 = v96;
LABEL_133:
  if (v95)
  {
    goto LABEL_134;
  }

  if (!v59)
  {
    goto LABEL_138;
  }

  PCColor::PCColor(&v104.var1);
  if (v79)
  {
    v80 = half::_toFloat[v91];
    v81 = half::_toFloat[v60];
    v82 = half::_toFloat[v16];
    PCImage::getColorSpace(v88, &v104);
    PCColor::setRGB(&v104.var1, v80 / 255.0, v81 / 255.0, v82 / 255.0, &v104);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v104);
    v83 = 0;
  }

  else
  {
    v84 = half::_toFloat[v101];
    v85 = half::_toFloat[v17];
    v86 = half::_toFloat[v20];
    PCImage::getColorSpace(v88, &v104);
    PCColor::setRGB(&v104.var1, v84 / 255.0, v85 / 255.0, v86 / 255.0, &v104);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v104);
    v83 = 1;
  }

  *a3 = v83;
  v103 = 0;
  v102 = 0.0;
  PCColorSpaceCache::rec709Linear(&v104);
  PCColor::getRGB(&v104.var1, &v103 + 1, &v103, &v102, &v104);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v104);
  if (*(&v103 + 1) * 0.2126 + *&v103 * 0.7152 + v102 * 0.0722 >= 0.5)
  {
    v87 = 3;
  }

  else
  {
    v87 = 2;
  }

  *a2 = v87;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v104.var7);
LABEL_140:
  *a4 = v92;
  return result;
}

void sub_260320DD4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, CGColorSpace *a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, CGColorSpace *a35)
{
  PCCFRef<CGColorSpace *>::~PCCFRef(&a28);
  PCCFRef<CGColorSpace *>::~PCCFRef(&a35);
  _Unwind_Resume(a1);
}

CGColorSpace **PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)16>>>>(uint64_t a1, int *a2, char *a3, _BYTE *a4)
{
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v9 = *(a1 + 32) * *(a1 + 28);
  if (v9)
  {
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0.0;
    v16 = (result + 1);
    v17 = 1;
    v18 = 0.0;
    v19 = 0.0;
    v20 = 0.0;
    v21 = 0.0;
    v22 = 0.0;
    v23 = *(a1 + 32) * *(a1 + 28);
    do
    {
      v25 = *(v16 - 2);
      v24 = *(v16 - 1);
      v27 = *v16;
      v26 = v16[1];
      if (v26 == 0.0)
      {
        if (v10)
        {
          if (v15 != v25 || v18 != v24 || v19 != v27)
          {
            v11 = 0;
            v30 = vabds_f32(v25, v15);
            if (v14 <= v30)
            {
              v14 = v30;
            }

            v31 = vabds_f32(v24, v18);
            v32 = vabds_f32(v27, v19);
            if (v14 <= v31)
            {
              v14 = v31;
            }

            if (v14 <= v32)
            {
              v14 = v32;
            }
          }

          v27 = v19;
          v24 = v18;
          v25 = v15;
        }

        else
        {
          v11 = 1;
        }

        ++v10;
        v19 = v27;
        v18 = v24;
        v15 = v25;
      }

      else if (v26 == 1.0)
      {
        if (v12)
        {
          v34 = v21 == v24 && v20 == v25;
          v13 = v34 & (v22 == v27) & v13;
        }

        else
        {
          v13 = 1;
          v22 = *v16;
          v21 = *(v16 - 1);
          v20 = *(v16 - 2);
        }

        ++v12;
      }

      v17 &= v26 == *(result + 3);
      v16 += 4;
      --v23;
    }

    while (v23);
    v35 = v14 > 2;
    v36 = v17 ^ 1;
  }

  else
  {
    v35 = 0;
    v36 = 0;
    v13 = 0;
    v12 = 0;
    v11 = 0;
    v10 = 0;
    v22 = 0.0;
    v21 = 0.0;
    v20 = 0.0;
    v19 = 0.0;
    v18 = 0.0;
    v15 = 0.0;
  }

  v38 = v10 == v9 || v12 == v9;
  v39 = (v10 > v9 / 0x64) & v11;
  if (v12 > v9 / 0x64)
  {
    v40 = v13 & (v39 ^ 1);
  }

  else
  {
    v40 = 0;
  }

  if (v38)
  {
    if (((v39 | v40) & 1) == 0)
    {
      goto LABEL_76;
    }
  }

  else
  {
    if (((v11 | v13 | v35) & 1) == 0)
    {
      v72 = v21;
      v73 = v22;
      v41 = 2.0;
      v18 = 0.0;
      v19 = 0.0;
      v15 = 0.0;
      goto LABEL_52;
    }

    if (((v39 | v40) & 1) == 0)
    {
LABEL_84:
      *a2 = 1;
      goto LABEL_85;
    }
  }

  v41 = 0.0;
  v72 = v21;
  v73 = v22;
  if (!v39)
  {
    v42 = 0;
    v43 = v21;
    v44 = v20;
    goto LABEL_53;
  }

LABEL_52:
  v42 = 1;
  v43 = v18;
  v22 = v19;
  v44 = v15;
LABEL_53:
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v45 = v9 == 0;
  if (v9)
  {
    v46 = (result + 1);
    v47 = v9;
    do
    {
      v48 = v46[1];
      if (v40)
      {
        v48 = 1.0 - v48;
      }

      if (v48 > 0.0)
      {
        v49 = 1.0 / v48;
        v50 = 1.0 - v48;
        v51 = (*(v46 - 2) - (v44 * v50)) - v41;
        v52 = (*(v46 - 1) - (v43 * v50)) - v41;
        v53 = (*v46 - (v22 * v50)) - v41;
        if (v51 >= 0.0)
        {
          v54 = v51;
        }

        else
        {
          v54 = 0.0;
        }

        if (v52 < 0.0)
        {
          v52 = 0.0;
        }

        if (v53 < 0.0)
        {
          v53 = 0.0;
        }

        v55 = v49 * v52;
        v56 = v49 * v53;
        v57 = (v49 * v54) <= 1.0 && v55 <= 1.0;
        if (!v57 || v56 > 1.0)
        {
          break;
        }
      }

      --v47;
      v46 += 4;
      v45 = v47 == 0;
    }

    while (v47);
  }

  if (v42)
  {
    v59 = 1;
    v61 = v72;
    v60 = v73;
    if (v38)
    {
LABEL_76:
      *a2 = 0;
LABEL_85:
      *a3 = 0;
      goto LABEL_86;
    }
  }

  else
  {
    v61 = v72;
    v60 = v73;
    if (v20 != 0.0 || v72 != 0.0 || v73 != 0.0)
    {
      result = (*(**(a1 + 64) + 16))(*(a1 + 64));
      if (!v9)
      {
LABEL_99:
        v59 = 1;
        v19 = 0.0;
        v18 = 0.0;
        v15 = 0.0;
        if (v38)
        {
          goto LABEL_76;
        }

        goto LABEL_81;
      }

      v63 = (result + 1);
      while (1)
      {
        v64 = v63[1];
        if (v64 > 0.0)
        {
          v65 = 1.0 / v64;
          v66 = v65 * *(v63 - 2);
          v67 = v65 * *(v63 - 1);
          v68 = v65 * *v63;
          v69 = v66 <= 1.0 && v67 <= 1.0;
          if (!v69 || v68 > 1.0)
          {
            break;
          }
        }

        v63 += 4;
        if (!--v9)
        {
          goto LABEL_99;
        }
      }
    }

    v59 = 0;
    if (v38)
    {
      goto LABEL_76;
    }
  }

LABEL_81:
  if (!v45)
  {
    goto LABEL_84;
  }

  PCColor::PCColor(&v76.var1);
  PCImage::getColorSpace(a1, &v76);
  if (v59)
  {
    PCColor::setRGB(&v76.var1, v15 / 255.0, v18 / 255.0, v19 / 255.0, &v76);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v76);
    v62 = 0;
  }

  else
  {
    PCColor::setRGB(&v76.var1, v20 / 255.0, v61 / 255.0, v60 / 255.0, &v76);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v76);
    v62 = 1;
  }

  *a3 = v62;
  v75 = 0;
  v74 = 0.0;
  PCColorSpaceCache::rec709Linear(&v76);
  PCColor::getRGB(&v76.var1, &v75 + 1, &v75, &v74, &v76);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v76);
  if (*(&v75 + 1) * 0.2126 + *&v75 * 0.7152 + v74 * 0.0722 >= 0.5)
  {
    v71 = 3;
  }

  else
  {
    v71 = 2;
  }

  *a2 = v71;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v76.var7);
LABEL_86:
  *a4 = v36;
  return result;
}

void sub_260321378(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va1, a4);
  va_start(va, a4);
  v5 = va_arg(va1, CGColorSpace *);
  v7 = va_arg(va1, void);
  v8 = va_arg(va1, void);
  v9 = va_arg(va1, void);
  v10 = va_arg(va1, void);
  v11 = va_arg(va1, void);
  v12 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

float *PCGuessAlphaType<PCBitmap_t<PCPixel4<ProCore::Private::PixelInfoTemplate<(PCPixelFormat::ChannelOrder)17>>>>(uint64_t a1, int *a2, char *a3, _BYTE *a4)
{
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v9 = *(a1 + 32) * *(a1 + 28);
  if (v9)
  {
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0.0;
    v16 = *result;
    v17 = 1;
    v18 = 0.0;
    v19 = 0.0;
    v20 = 0.0;
    v21 = 0.0;
    v22 = 0.0;
    v23 = *(a1 + 32) * *(a1 + 28);
    do
    {
      v24 = *result;
      v25 = result[1];
      v27 = result[2];
      v26 = result[3];
      if (*result == 0.0)
      {
        if (v10)
        {
          if (v15 != v25 || v18 != v27 || v19 != v26)
          {
            v11 = 0;
            v30 = vabds_f32(v25, v15);
            if (v14 <= v30)
            {
              v14 = v30;
            }

            v31 = vabds_f32(v27, v18);
            v32 = vabds_f32(v26, v19);
            if (v14 <= v31)
            {
              v14 = v31;
            }

            if (v14 <= v32)
            {
              v14 = v32;
            }
          }

          v26 = v19;
          v27 = v18;
          v25 = v15;
        }

        else
        {
          v11 = 1;
        }

        ++v10;
        v19 = v26;
        v18 = v27;
        v15 = v25;
      }

      else if (v24 == 1.0)
      {
        if (v12)
        {
          v34 = v21 == v27 && v20 == v25;
          v13 = v34 & (v22 == v26) & v13;
        }

        else
        {
          v13 = 1;
          v22 = result[3];
          v21 = result[2];
          v20 = result[1];
        }

        ++v12;
      }

      v17 &= v24 == v16;
      result += 4;
      --v23;
    }

    while (v23);
    v35 = v14 > 2;
    v36 = v17 ^ 1;
  }

  else
  {
    v35 = 0;
    v36 = 0;
    v13 = 0;
    v12 = 0;
    v11 = 0;
    v10 = 0;
    v22 = 0.0;
    v21 = 0.0;
    v20 = 0.0;
    v19 = 0.0;
    v18 = 0.0;
    v15 = 0.0;
  }

  v38 = v10 == v9 || v12 == v9;
  v39 = (v10 > v9 / 0x64) & v11;
  if (v12 > v9 / 0x64)
  {
    v40 = v13 & (v39 ^ 1);
  }

  else
  {
    v40 = 0;
  }

  if (v38)
  {
    if (((v39 | v40) & 1) == 0)
    {
      goto LABEL_76;
    }
  }

  else
  {
    if (((v11 | v13 | v35) & 1) == 0)
    {
      v72 = v21;
      v73 = v22;
      v41 = 2.0;
      v18 = 0.0;
      v19 = 0.0;
      v15 = 0.0;
      goto LABEL_52;
    }

    if (((v39 | v40) & 1) == 0)
    {
LABEL_84:
      *a2 = 1;
      goto LABEL_85;
    }
  }

  v41 = 0.0;
  v72 = v21;
  v73 = v22;
  if (!v39)
  {
    v42 = 0;
    v43 = v21;
    v44 = v20;
    goto LABEL_53;
  }

LABEL_52:
  v42 = 1;
  v43 = v18;
  v22 = v19;
  v44 = v15;
LABEL_53:
  result = (*(**(a1 + 64) + 16))(*(a1 + 64));
  v45 = v9 == 0;
  if (v9)
  {
    v46 = result + 2;
    v47 = v9;
    do
    {
      v48 = *(v46 - 2);
      if (v40)
      {
        v48 = 1.0 - v48;
      }

      if (v48 > 0.0)
      {
        v49 = 1.0 / v48;
        v50 = 1.0 - v48;
        v51 = (*(v46 - 1) - (v44 * v50)) - v41;
        v52 = (*v46 - (v43 * v50)) - v41;
        v53 = (v46[1] - (v22 * v50)) - v41;
        if (v51 >= 0.0)
        {
          v54 = v51;
        }

        else
        {
          v54 = 0.0;
        }

        if (v52 < 0.0)
        {
          v52 = 0.0;
        }

        if (v53 < 0.0)
        {
          v53 = 0.0;
        }

        v55 = v49 * v52;
        v56 = v49 * v53;
        v57 = (v49 * v54) <= 1.0 && v55 <= 1.0;
        if (!v57 || v56 > 1.0)
        {
          break;
        }
      }

      --v47;
      v46 += 4;
      v45 = v47 == 0;
    }

    while (v47);
  }

  if (v42)
  {
    v59 = 1;
    v61 = v72;
    v60 = v73;
    if (v38)
    {
LABEL_76:
      *a2 = 0;
LABEL_85:
      *a3 = 0;
      goto LABEL_86;
    }
  }

  else
  {
    v61 = v72;
    v60 = v73;
    if (v20 != 0.0 || v72 != 0.0 || v73 != 0.0)
    {
      result = (*(**(a1 + 64) + 16))(*(a1 + 64));
      if (!v9)
      {
LABEL_99:
        v59 = 1;
        v19 = 0.0;
        v18 = 0.0;
        v15 = 0.0;
        if (v38)
        {
          goto LABEL_76;
        }

        goto LABEL_81;
      }

      v63 = result + 2;
      while (1)
      {
        v64 = *(v63 - 2);
        if (v64 > 0.0)
        {
          v65 = 1.0 / v64;
          v66 = v65 * *(v63 - 1);
          v67 = v65 * *v63;
          v68 = v65 * v63[1];
          v69 = v66 <= 1.0 && v67 <= 1.0;
          if (!v69 || v68 > 1.0)
          {
            break;
          }
        }

        v63 += 4;
        if (!--v9)
        {
          goto LABEL_99;
        }
      }
    }

    v59 = 0;
    if (v38)
    {
      goto LABEL_76;
    }
  }

LABEL_81:
  if (!v45)
  {
    goto LABEL_84;
  }

  PCColor::PCColor(&v76.var1);
  PCImage::getColorSpace(a1, &v76);
  if (v59)
  {
    PCColor::setRGB(&v76.var1, v15 / 255.0, v18 / 255.0, v19 / 255.0, &v76);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v76);
    v62 = 0;
  }

  else
  {
    PCColor::setRGB(&v76.var1, v20 / 255.0, v61 / 255.0, v60 / 255.0, &v76);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v76);
    v62 = 1;
  }

  *a3 = v62;
  v75 = 0;
  v74 = 0.0;
  PCColorSpaceCache::rec709Linear(&v76);
  PCColor::getRGB(&v76.var1, &v75 + 1, &v75, &v74, &v76);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v76);
  if (*(&v75 + 1) * 0.2126 + *&v75 * 0.7152 + v74 * 0.0722 >= 0.5)
  {
    v71 = 3;
  }

  else
  {
    v71 = 2;
  }

  *a2 = v71;
  result = PCCFRef<CGColorSpace *>::~PCCFRef(&v76.var7);
LABEL_86:
  *a4 = v36;
  return result;
}

void sub_260321918(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va1, a4);
  va_start(va, a4);
  v5 = va_arg(va1, CGColorSpace *);
  v7 = va_arg(va1, void);
  v8 = va_arg(va1, void);
  v9 = va_arg(va1, void);
  v10 = va_arg(va1, void);
  v11 = va_arg(va1, void);
  v12 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

void PMStillInstance::PMStillInstance(PMStillInstance *this)
{
  *(this + 7) = 0;
  *this = &unk_2872E0028;
  *(this + 8) = 0u;
  *(this + 24) = 0u;
  *(this + 6) = this + 56;
  *(this + 11) = 0;
  *(this + 10) = 0;
  *(this + 8) = 0;
  *(this + 9) = this + 80;
}

void PMStillInstance::~PMStillInstance(PMStillInstance *this)
{
  *this = &unk_2872E0028;
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 72, *(this + 10));
  std::__tree<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::__map_value_compare<std::pair<unsigned int,unsigned long long>,std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::less<std::pair<unsigned int,unsigned long long>>,true>,std::allocator<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>>>::destroy(this + 48, *(this + 7));
  v2 = *(this + 4);
  if (v2)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v2);
  }

  v3 = *(this + 2);
  if (v3)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v3);
  }
}

uint64_t PMStillInstance::open(PMStillInstance *this, const __CFURL **a2)
{
  v2 = *a2;
  error = 0;
  PCURL::getAsFileSystemString(a2, &v7);
  if (!PCString::empty(&v7))
  {
    v3 = CFURLCopyScheme(v2);
    v4 = v3;
    if (v3)
    {
      Length = CFStringGetLength(v3);
      CFRelease(v4);
      if (Length)
      {
        if (CFURLResourceIsReachable(v2, &error))
        {
          operator new();
        }

        if (error)
        {
          CFRelease(error);
        }
      }
    }
  }

  PCString::~PCString(&v7);
  return 3;
}

void sub_260321DAC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, PCString a11)
{
  MEMORY[0x2666E9F00](v11, 0x60C4044C4A2DFLL);
  PCString::~PCString(&a11);
  _Unwind_Resume(a1);
}

BOOL PMStillInstance::isOpen(PMStillInstance *this)
{
  v1 = *(this + 1);
  if (!v1)
  {
    return 0;
  }

  v2 = *v1;
  error = 0;
  IsReachable = CFURLResourceIsReachable(v2, &error);
  v4 = IsReachable != 0;
  if (!IsReachable)
  {
    CFRelease(error);
  }

  return v4;
}

void PMStillInstance::close(PMStillInstance *this)
{
  if (*(this + 1))
  {
    v2 = *(this + 2);
    *(this + 1) = 0;
    *(this + 2) = 0;
    if (v2)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v2);
    }

    v3 = *(this + 9);
    v4 = this + 80;
    if (v3 != (this + 80))
    {
      do
      {
        PMRemoveBitmapFromCache((v3 + 28));
        v5 = v3[1];
        if (v5)
        {
          do
          {
            v6 = v5;
            v5 = *v5;
          }

          while (v5);
        }

        else
        {
          do
          {
            v6 = v3[2];
            v7 = *v6 == v3;
            v3 = v6;
          }

          while (!v7);
        }

        v3 = v6;
      }

      while (v6 != v4);
    }

    std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 72, *(this + 10));
    v8 = *(this + 7);
    *(this + 9) = v4;
    *(this + 10) = 0;
    *(this + 11) = 0;
    std::__tree<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::__map_value_compare<std::pair<unsigned int,unsigned long long>,std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::less<std::pair<unsigned int,unsigned long long>>,true>,std::allocator<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>>>::destroy(this + 48, v8);
    *(this + 7) = 0;
    *(this + 8) = 0;
    *(this + 6) = this + 56;
  }

  if (*(this + 3))
  {
    v9 = *(this + 4);
    *(this + 3) = 0;
    *(this + 4) = 0;
    if (v9)
    {

      std::__shared_weak_count::__release_shared[abi:ne200100](v9);
    }
  }
}

uint64_t PMStillInstance::computeRawBitmapCacheKey(const void **this, int8x8_t *a2, const PMFormatDescription *a3, const PMFrameRequest *a4)
{
  PCHashWriteStream::writeValue(a2, this[3]);
  (*(*a2 + 56))(a2, *(a4 + 23));
  v7 = this[5];
  v8 = *(*a2 + 64);

  return v8(a2, v7);
}

void PMStillInstance::getCacheKey(PMStillInstance *this, const PMFormatDescription *a2, const PMFrameRequest *a3, const FxColorDescription *a4)
{
  MEMORY[0x28223BE20](this);
  v5 = v4;
  v7 = v6;
  v9 = v8;
  v11 = v10;
  v13 = v12;
  v14[520] = *MEMORY[0x277D85DE8];
  PCHashWriteStream::PCHashWriteStream(v14);
  (*(*v11 + 40))(v11, v14, v9, v7, v5);
  *v13 = *PCHashWriteStream::getHash(v14)->i8;
  PCHashWriteStream::~PCHashWriteStream(v14);
}

void PMStillInstance::getRawBitmapCacheKey(PMStillInstance *this, const PMFormatDescription *a2, const PMFrameRequest *a3)
{
  MEMORY[0x28223BE20](this);
  v4 = v3;
  v6 = v5;
  v8 = v7;
  v10 = v9;
  v11[520] = *MEMORY[0x277D85DE8];
  PCHashWriteStream::PCHashWriteStream(v11);
  (*(*v8 + 48))(v8, v11, v6, v4);
  *v10 = *PCHashWriteStream::getHash(v11)->i8;
  PCHashWriteStream::~PCHashWriteStream(v11);
}

void PMStillInstance::getRawBitmap(PMStillInstance *this@<X0>, const PMFormatDescription *a2@<X1>, const PMFrameRequest *a3@<X2>, void *a4@<X8>)
{
  PMStillInstance::getRawBitmapCacheKey(this, a2, a3);
  PMGetCachedBitmap(_40, a4);
  if (!*a4)
  {
    PCTimer::PCTimer(v13);
    PCTimer::start(v13);
    (*(*this + 72))(&v12, this, a3);
    v7 = v12;
    v12 = 0uLL;
    v8 = a4[1];
    *a4 = v7;
    if (v8)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v8);
      if (*(&v12 + 1))
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](*(&v12 + 1));
      }
    }

    PCTimer::stop(v13);
    if (*a4)
    {
      Seconds = PCTimer::getSeconds(v13);
      PMCacheBitmap(_40, a4, &v11, Seconds);
      ProCore_Impl::PCNSRefImpl::release(&v11);
      std::__tree<PCHash128>::__emplace_unique_key_args<PCHash128,PCHash128 const&>(this + 72, _40);
    }

    OZChannelBase::setRangeName(v13, v9);
  }
}

void sub_260322308(_Unwind_Exception *a1, const PCString *a2, uint64_t a3, uint64_t a4, OZChannelBase *a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13)
{
  OZChannelBase::setRangeName(&a13, a2);
  v15 = *(v13 + 8);
  if (v15)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v15);
  }

  _Unwind_Resume(a1);
}

CGColorSpace **PMStillInstance::getColorConformDescriptions(PMStillInstance *this, const PMFrameRequest *a2, FxColorDescription *a3, FxColorDescription *a4, FxColorDescription *a5)
{
  (*(*this + 64))(&v30);
  OverrideColorSpace = PMFrameRequest::getOverrideColorSpace(a2);
  CGColorSpace = OverrideColorSpace;
  if (OverrideColorSpace)
  {
    DynamicRange = PCIsHDRColorSpace(OverrideColorSpace);
  }

  else
  {
    CGColorSpace = FxColorDescription::getCGColorSpace(&v30);
    DynamicRange = FxColorDescription::getDynamicRange(&v30);
  }

  v12 = DynamicRange;
  PMFrameRequest::getColorDescriptionOverrideToneMapMethod(a2, a3);
  v29 = v13;
  isPremultiplied = FxColorDescription::isPremultiplied(&v30);
  FxColorDescription::FxColorDescription(&v25, CGColorSpace, v12, &v29, isPremultiplied);
  obj = a4->_pcColorDesc._colorSpaceRef._obj;
  v16 = v25;
  if (a4->_pcColorDesc._colorSpaceRef._obj && obj != v25)
  {
    PCCFRefTraits<CGColorSpace *>::release(obj);
    v16 = v25;
  }

  a4->_pcColorDesc._colorSpaceRef._obj = v16;
  v25 = 0;
  a4->_pcColorDesc._dynamicRange = v26;
  a4->_pcColorDesc._toneMapMethod = v27;
  a4->_isPremultiplied = v28;
  PCCFRef<CGColorSpace *>::~PCCFRef(&v25);
  v17 = FxColorDescription::getCGColorSpace(a3);
  if (v17)
  {
    v18 = v17;
  }

  else
  {
    v18 = CGColorSpace;
  }

  if (PMFrameRequest::isDynamicRangeTrackingRender(a2))
  {
    ToneMapMethod = FxColorDescription::getToneMapMethod(a3);
  }

  else
  {
    ToneMapMethod = &kPCNoToneMapMethod;
  }

  v24 = *ToneMapMethod;
  v20 = FxColorDescription::getDynamicRange(a3);
  FxColorDescription::FxColorDescription(&v25, v18, v20, &v24, 1);
  v21 = a5->_pcColorDesc._colorSpaceRef._obj;
  v22 = v25;
  if (a5->_pcColorDesc._colorSpaceRef._obj && v21 != v25)
  {
    PCCFRefTraits<CGColorSpace *>::release(v21);
    v22 = v25;
  }

  a5->_pcColorDesc._colorSpaceRef._obj = v22;
  v25 = 0;
  a5->_pcColorDesc._dynamicRange = v26;
  a5->_pcColorDesc._toneMapMethod = v27;
  a5->_isPremultiplied = v28;
  PCCFRef<CGColorSpace *>::~PCCFRef(&v25);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v30._pcColorDesc._colorSpaceRef._obj);
}

void sub_2603224EC(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va1, a2);
  va_start(va, a2);
  v3 = va_arg(va1, CGColorSpace *);
  v5 = va_arg(va1, void);
  v6 = va_arg(va1, void);
  v7 = va_arg(va1, void);
  v8 = va_arg(va1, void);
  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  _Unwind_Resume(a1);
}

uint64_t PMStillInstance::getCachedBitmap@<X0>(PMStillInstance *this@<X0>, const PMFormatDescription *a2@<X1>, const PMFrameRequest *a3@<X2>, const PCHash128 *a4@<X4>, void *a5@<X8>)
{
  *a5 = 0;
  a5[1] = 0;
  PCTimer::PCTimer(_30);
  PCTimer::start(_30);
  PMStillInstance::getRawBitmap(this, a2, a3, &v16);
  v14 = v16;
  *a5 = v16;
  PCTimer::stop(_30);
  if (v14)
  {
    Seconds = PCTimer::getSeconds(_30);
    PMCacheBitmap(a4, a5, &v15, Seconds);
    ProCore_Impl::PCNSRefImpl::release(&v15);
  }

  return OZChannelBase::setRangeName(_30, v11);
}

void sub_2603225F8(_Unwind_Exception *a1, const PCString *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, OZChannelBase *a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15)
{
  OZChannelBase::setRangeName(&a15, a2);
  v17 = *(v15 + 8);
  if (v17)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v17);
  }

  _Unwind_Resume(a1);
}

double PMStillInstance::computePixelTransform(uint64_t a1, uint64_t a2, uint64_t a3, unsigned int a4, unsigned int a5, uint64_t a6)
{
  *(a6 + 120) = 0x3FF0000000000000;
  *(a6 + 80) = 0x3FF0000000000000;
  *(a6 + 40) = 0x3FF0000000000000;
  *a6 = 0x3FF0000000000000;
  *(a6 + 8) = 0u;
  *(a6 + 24) = 0u;
  *(a6 + 48) = 0u;
  *(a6 + 64) = 0u;
  *(a6 + 88) = 0u;
  *(a6 + 104) = 0u;
  v12 = PCMatrix44Tmpl<double>::leftScale(a6, (a4 - 2) / a4, (a5 - 2) / a5, 1.0);
  v13 = (*(*a1 + 80))(a1, a3, v12);
  v14 = PCMatrix44Tmpl<double>::leftScale(a6, v13 / *(a2 + 416), -v13, 1.0);
  v14.f64[0] = vcvtd_n_f64_u32(a4, 1uLL);
  v15 = vcvtd_n_f64_u32(a5, 1uLL);

  *&result = *&PCMatrix44Tmpl<double>::leftTranslate(a6, v14, v15, 0.0);
  return result;
}

uint64_t PMStillInstance::getBitmapNode(uint64_t a1, uint64_t a2, uint64_t a3, PCBitmap **a4, uint64_t *a5, uint64_t a6)
{
  PMBitmapToHeliumNode(a4, &v17);
  v12 = *a5;
  v13 = v17;
  if (*a5 == v17)
  {
    if (v12)
    {
      (*(*v17 + 24))(v17);
    }
  }

  else
  {
    if (v12)
    {
      (*(*v12 + 24))(v12);
      v13 = v17;
    }

    *a5 = v13;
  }

  v14 = (*(**a4 + 16))();
  v15 = (*(**a4 + 24))();
  (*(*a1 + 56))(a1, a2, a3, v14, v15, a6);
  return 0;
}

void sub_26032287C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10)
{
  if (a10)
  {
    (*(*a10 + 24))(a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t PMStillInstance::getFrameCPU(PMStillInstance *a1, const PMFormatDescription *a2, const PMFrameRequest *a3, uint64_t a4, const PCHash128 *a5, uint64_t *a6, uint64_t a7)
{
  PMStillInstance::getCachedBitmap(a1, a2, a3, a5, &v16);
  if (v16)
  {
    PMStillInstance::getBitmapNode(a1, a2, a3, &v16, a6, a7);
    v12 = 0;
  }

  else
  {
    v13 = HGObject::operator new(0x1A0uLL);
    HGNode::HGNode(v13);
    v14 = *a6;
    if (*a6 == v13)
    {
      if (v13)
      {
        (*(*v13 + 24))(v13);
      }
    }

    else
    {
      if (v14)
      {
        (*(*v14 + 24))(v14);
      }

      *a6 = v13;
    }

    *(a7 + 120) = 0x3FF0000000000000;
    *(a7 + 80) = 0x3FF0000000000000;
    *(a7 + 40) = 0x3FF0000000000000;
    *a7 = 0x3FF0000000000000;
    *(a7 + 8) = 0u;
    *(a7 + 24) = 0u;
    *(a7 + 48) = 0u;
    *(a7 + 64) = 0u;
    *(a7 + 88) = 0u;
    v12 = 10;
    *(a7 + 104) = 0u;
  }

  if (v17)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v17);
  }

  return v12;
}

void sub_2603229F0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (v10)
  {
    (*(*v10 + 24))(v10);
  }

  if (a10)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t PMStillInstance::getFramePixelBuffer(PMStillInstance *a1, uint64_t a2, const PMFrameRequest *a3, FxColorDescription *a4, uint64_t a5, uint64_t *a6, uint64_t a7)
{
  PCColorDescription::PCColorDescription(&v36);
  v37 = 1;
  v13 = (*(*a1 + 96))(a1, a3, &v36);
  v14 = v13;
  if (!v13)
  {
    v23 = 10;
    goto LABEL_26;
  }

  PixelFormatType = CVPixelBufferGetPixelFormatType(v13);
  v17 = HGCV::HGFormatForCVPixelFormat(PixelFormatType, 0, v16);
  HGCVBitmap::create(v14, v17, 0, &v35);
  v18 = v35;
  v19 = HGObject::operator new(0x1F0uLL);
  HGBitmapLoader::HGBitmapLoader(v19, v18);
  *(v19 + 109) = 1;
  v20 = *a6;
  if (*a6 != v19)
  {
    if (v20)
    {
      (*(*v20 + 24))(v20);
    }

    *a6 = v19;
    (*(*v19 + 16))(v19);
  }

  PCColorDescription::PCColorDescription(&v34._pcColorDesc);
  v34._isPremultiplied = 1;
  PCColorDescription::PCColorDescription(&v33._pcColorDesc);
  v33._isPremultiplied = 1;
  PMStillInstance::getColorConformDescriptions(a1, a3, a4, &v34, &v33);
  FxApplyColorConform(a6, &v34, &v33, &v32);
  v21 = *a6;
  v22 = v32;
  if (*a6 == v32)
  {
    if (v21)
    {
      (*(*v32 + 24))(v32);
    }
  }

  else
  {
    if (v21)
    {
      (*(*v21 + 24))(v21);
      v22 = v32;
    }

    *a6 = v22;
  }

  Width = CVPixelBufferGetWidth(v14);
  Height = CVPixelBufferGetHeight(v14);
  (*(*a1 + 56))(a1, a2, a3, Width, Height, a7);
  if (PMFrameRequest::isRenderForHDR_Deprecated(a3))
  {
    StillImageInverseToneMapOperator_Deprecated = PMFrameRequest::getStillImageInverseToneMapOperator_Deprecated(a3);
    if (StillImageInverseToneMapOperator_Deprecated == 1)
    {
      CGColorSpace = FxColorDescription::getCGColorSpace(&v33);
      FxApplySDRToHDR(a6, CGColorSpace, 0, &v32);
      v28 = *a6;
      v29 = v32;
      if (*a6 != v32)
      {
        if (v28)
        {
LABEL_21:
          (*(*v28 + 24))(v28);
          v29 = v32;
        }

LABEL_22:
        *a6 = v29;
        goto LABEL_23;
      }

      if (!v28)
      {
        goto LABEL_23;
      }

LABEL_28:
      (*(*v32 + 24))(v32);
      goto LABEL_23;
    }

    if (StillImageInverseToneMapOperator_Deprecated == 2)
    {
      v27 = FxColorDescription::getCGColorSpace(&v33);
      FxApplySDRToHDR(a6, v27, 1, &v32);
      v28 = *a6;
      v29 = v32;
      if (*a6 != v32)
      {
        if (v28)
        {
          goto LABEL_21;
        }

        goto LABEL_22;
      }

      if (!v28)
      {
        goto LABEL_23;
      }

      goto LABEL_28;
    }
  }

LABEL_23:
  PCCFRef<CGColorSpace *>::~PCCFRef(&v33._pcColorDesc._colorSpaceRef._obj);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v34._pcColorDesc._colorSpaceRef._obj);
  (*(*v19 + 24))(v19);
  if (v35)
  {
    (*(*v35 + 24))(v35);
  }

  v23 = 0;
LABEL_26:
  PCCFRef<CGColorSpace *>::~PCCFRef(&v36._colorSpaceRef._obj);
  return v23;
}

void sub_260322E60(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va2, a2);
  va_start(va1, a2);
  va_start(va, a2);
  v4 = va_arg(va1, CGColorSpace *);
  v6 = va_arg(va1, void);
  v7 = va_arg(va1, void);
  v8 = va_arg(va1, void);
  va_copy(va2, va1);
  v9 = va_arg(va2, CGColorSpace *);
  v11 = va_arg(va2, void);
  v12 = va_arg(va2, void);
  v13 = va_arg(va2, void);
  v14 = va_arg(va2, void);
  if (a2)
  {
    (*(*a2 + 24))(a2);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va1);
  (*(*v2 + 24))(v2);
  if (v14)
  {
    (*(*v14 + 24))(v14);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(va2);
  _Unwind_Resume(a1);
}

uint64_t PMStillInstance::getFrame(PMStillInstance *a1, const PMFormatDescription *a2, CFTypeRef *a3, uint64_t a4, FxColorDescription *a5, uint64_t *a6, uint64_t a7)
{
  v14 = *(a1 + 1);
  if (v14 && CFEqual(*v14, *a3))
  {
    if (((*(*a1 + 32))(a1) & 1) == 0)
    {
      v15 = HGObject::operator new(0x1A0uLL);
      HGNode::HGNode(v15);
      v16 = *a6;
      if (*a6 == v15)
      {
        if (v15)
        {
          (*(*v15 + 24))(v15);
        }
      }

      else
      {
        if (v16)
        {
          (*(*v16 + 24))(v16);
        }

        *a6 = v15;
      }

      *(a7 + 120) = 0x3FF0000000000000;
      *(a7 + 80) = 0x3FF0000000000000;
      *(a7 + 40) = 0x3FF0000000000000;
      *a7 = 0x3FF0000000000000;
      v29 = 0uLL;
      *(a7 + 8) = 0u;
      *(a7 + 24) = 0u;
      *(a7 + 48) = 0u;
      *(a7 + 64) = 0u;
      *(a7 + 88) = 0u;
      FramePixelBuffer = 10;
LABEL_36:
      *(a7 + 104) = v29;
      return FramePixelBuffer;
    }
  }

  else
  {
    (*(*a1 + 24))(a1);
    v17 = (*(*a1 + 16))(a1, a3);
    if (v17)
    {
      FramePixelBuffer = v17;
      v19 = HGObject::operator new(0x1A0uLL);
      HGNode::HGNode(v19);
      v20 = *a6;
      if (*a6 == v19)
      {
        if (v19)
        {
          (*(*v19 + 24))(v19);
        }
      }

      else
      {
        if (v20)
        {
          (*(*v20 + 24))(v20);
        }

        *a6 = v19;
      }

      *(a7 + 120) = 0x3FF0000000000000;
      *(a7 + 80) = 0x3FF0000000000000;
      *(a7 + 40) = 0x3FF0000000000000;
      *a7 = 0x3FF0000000000000;
      v29 = 0uLL;
      *(a7 + 8) = 0u;
      *(a7 + 24) = 0u;
      *(a7 + 48) = 0u;
      *(a7 + 64) = 0u;
      *(a7 + 88) = 0u;
      goto LABEL_36;
    }
  }

  PMStillInstance::getCacheKey(a1, a2, a4, a5);
  CGColorSpace = FxColorDescription::getCGColorSpace(a5);
  (*(*a1 + 64))(&lpsrc, a1);
  v22 = FxColorDescription::getCGColorSpace(&lpsrc);
  PCCFRef<CGColorSpace *>::~PCCFRef(&lpsrc._pcColorDesc._colorSpaceRef._obj);
  if (!CGColorSpace)
  {
    OverrideColorSpace = PMFrameRequest::getOverrideColorSpace(a4);
    if (OverrideColorSpace)
    {
      CGColorSpace = OverrideColorSpace;
    }

    else
    {
      CGColorSpace = v22;
    }
  }

  FxColorDescription::setCGColorSpace(a5, CGColorSpace);
  v25 = *(a4 + 152);
  if (!v25)
  {
    return PMStillInstance::getFrameCPU(a1, a2, a4, v24, v32, a6, a7);
  }

  if ((*(a4 + 145) & 1) != 0 || !v26)
  {
    return PMStillInstance::getFrameCPU(a1, a2, a4, v24, v32, a6, a7);
  }

  FxDeviceGetComputeDeviceForRenderer(v26, &lpsrc);
  {
    v28 = *&lpsrc._pcColorDesc._dynamicRange;
    if (*&lpsrc._pcColorDesc._dynamicRange)
    {
      atomic_fetch_add_explicit((*&lpsrc._pcColorDesc._dynamicRange + 8), 1uLL, memory_order_relaxed);
    }
  }

  else
  {
    v28 = 0;
  }

  if (*&lpsrc._pcColorDesc._dynamicRange)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](*&lpsrc._pcColorDesc._dynamicRange);
  }

  FramePixelBuffer = PMStillInstance::getFramePixelBuffer(a1, a2, a4, a5, v27, a6, a7);
  if (v28)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v28);
  }

  return FramePixelBuffer;
}

void sub_2603233DC(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    (*(*v1 + 24))(v1);
  }

  _Unwind_Resume(exception_object);
}

void std::__tree<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::__map_value_compare<std::pair<unsigned int,unsigned long long>,std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::less<std::pair<unsigned int,unsigned long long>>,true>,std::allocator<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>>>::destroy(uint64_t a1, void *a2)
{
  if (a2)
  {
    std::__tree<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::__map_value_compare<std::pair<unsigned int,unsigned long long>,std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::less<std::pair<unsigned int,unsigned long long>>,true>,std::allocator<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>>>::destroy(a1, *a2);
    std::__tree<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::__map_value_compare<std::pair<unsigned int,unsigned long long>,std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>,std::less<std::pair<unsigned int,unsigned long long>>,true>,std::allocator<std::__value_type<std::pair<unsigned int,unsigned long long>,std::pair<PCHash128,HGRef<HGMetalTexture>>>>>::destroy(a1, a2[1]);
    std::__destroy_at[abi:ne200100]<std::pair<std::pair<unsigned int,unsigned long long> const,std::pair<PCHash128,HGRef<HGMetalTexture>>>,0>((a2 + 4));

    operator delete(a2);
  }
}

uint64_t std::__destroy_at[abi:ne200100]<std::pair<std::pair<unsigned int,unsigned long long> const,std::pair<PCHash128,HGRef<HGMetalTexture>>>,0>(uint64_t a1)
{
  result = *(a1 + 32);
  if (result)
  {
    return (*(*result + 24))(result);
  }

  return result;
}

void std::shared_ptr<PCURL>::shared_ptr[abi:ne200100]<PCURL,0>(void *a1, uint64_t a2)
{
  *a1 = a2;
  v2 = a2;
  operator new();
}

void sub_2603235AC(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  std::unique_ptr<PCURL>::~unique_ptr[abi:ne200100](va);
  _Unwind_Resume(a1);
}

PCURL *std::__shared_ptr_pointer<PCURL *,std::shared_ptr<PCURL>::__shared_ptr_default_delete<PCURL,PCURL>,std::allocator<PCURL>>::__on_zero_shared(uint64_t a1)
{
  result = *(a1 + 24);
  if (result)
  {
    PCURL::~PCURL(result);

    JUMPOUT(0x2666E9F00);
  }

  return result;
}

uint64_t std::__shared_ptr_pointer<PCURL *,std::shared_ptr<PCURL>::__shared_ptr_default_delete<PCURL,PCURL>,std::allocator<PCURL>>::__get_deleter(uint64_t a1, uint64_t a2)
{
  {
    return a1;
  }

  else
  {
    return 0;
  }
}

void std::shared_ptr<PCString>::shared_ptr[abi:ne200100]<PCString,0>(void *a1, uint64_t a2)
{
  *a1 = a2;
  v2 = a2;
  operator new();
}

void sub_2603236C4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  std::unique_ptr<PCString>::~unique_ptr[abi:ne200100](va);
  _Unwind_Resume(a1);
}

PCString **std::unique_ptr<PCString>::~unique_ptr[abi:ne200100](PCString **a1)
{
  v2 = *a1;
  *a1 = 0;
  if (v2)
  {
    PCString::~PCString(v2);
    MEMORY[0x2666E9F00]();
  }

  return a1;
}

PCString *std::__shared_ptr_pointer<PCString *,std::shared_ptr<PCString>::__shared_ptr_default_delete<PCString,PCString>,std::allocator<PCString>>::__on_zero_shared(uint64_t a1)
{
  result = *(a1 + 24);
  if (result)
  {
    PCString::~PCString(result);

    JUMPOUT(0x2666E9F00);
  }

  return result;
}

uint64_t std::__shared_ptr_pointer<PCString *,std::shared_ptr<PCString>::__shared_ptr_default_delete<PCString,PCString>,std::allocator<PCString>>::__get_deleter(uint64_t a1, uint64_t a2)
{
  {
    return a1;
  }

  else
  {
    return 0;
  }
}

void PMPluginInterface::PMPluginInterface(PMPluginInterface *this)
{
  *(this + 7) = 0u;
  *(this + 8) = 0u;
  *(this + 5) = 0u;
  *(this + 6) = 0u;
  *(this + 3) = 0u;
  *(this + 4) = 0u;
  *(this + 1) = 0u;
  *(this + 2) = 0u;
  *this = 0u;
  *(this + 184) = 0u;
  *(this + 200) = 0u;
  *(this + 216) = 0u;
  *(this + 232) = 0u;
  *(this + 248) = 0u;
  *(this + 168) = 0u;
  *(this + 264) = 0u;
  *(this + 280) = 0u;
  *(this + 296) = 0u;
  *(this + 312) = 0u;
  *(this + 328) = 0u;
  *(this + 344) = 0u;
}

void PMCacheBitmap(PCHash128 *a1@<X0>, void *a2@<X1>, void *a3@<X8>, double a4@<D0>)
{
  if (*a2)
  {
    v8 = (*(**a2 + 40))(*a2);
    PCHash128::getString(a1, &v10);
    v9 = PCString::ns_str(&v10);
    PCString::~PCString(&v10);
    v10.var0 = [[PMCachedBitmapObject alloc] initWithBitmap:a2];
    [+[PMObjectCache sharedInstance](PMObjectCache addObject:"addObject:cacheKey:size:cost:" cacheKey:v10.var0 size:v9 cost:(v8 + 88), a4];
    *a3 = 0;
    ProCore_Impl::PCNSRefImpl::release(&v10.var0);
  }

  else
  {
    *a3 = 0;
  }
}

uint64_t PMRemoveBitmapFromCache(const PCHash128 *a1)
{
  PCHash128::getString(a1, &v3);
  v1 = PCString::ns_str(&v3);
  PCString::~PCString(&v3);
  return [+[PMObjectCache sharedInstance](PMObjectCache removeObjectForKey:"removeObjectForKey:", v1];
}

void PMGetCachedBitmap(const PCHash128 *a1@<X0>, void *a2@<X8>)
{
  PCHash128::getString(a1, &v5);
  v3 = PCString::ns_str(&v5);
  PCString::~PCString(&v5);
  v4 = [+[PMObjectCache sharedInstance](PMObjectCache copyObjectForKey:"copyObjectForKey:cost:" cost:v3, 0];
  v5.var0 = v4;
  if (v4)
  {
    [(__CFString *)v4 bitmap];
  }

  else
  {
    *a2 = 0;
    a2[1] = 0;
  }

  ProCore_Impl::PCNSRefImpl::release(&v5.var0);
}

HGNode *PVHGApplyAuxiliaryMap::GetOutput(HGNode *this, HGRenderer *a2)
{
  Input = HGRenderer::GetInput(a2, this, 0);
  v5 = HGRenderer::GetInput(a2, this, 1u);
  v6 = *(this + 55);
  if (v6 <= 0xFFF)
  {
    if (v6)
    {
      v7 = *(this + 56);
      if (v7 - 4096 >= 0xFFFFFFFFFFFFF001)
      {
        v8 = v5;
        v9 = *(this + 53);
        v10 = *(this + 54);
        v11 = HGObject::operator new(0x210uLL);
        HGXForm::HGXForm(v11);
        HGTransform::HGTransform(v14);
        HGTransform::Scale(v14, (v9 / v6), (v10 / v7), 1.0);
        (*(*v11 + 120))(v11, 0, v8);
        (*(*v11 + 576))(v11, v14);
        v12 = HGObject::operator new(0x1A0uLL);
        HgcApplyAuxiliaryMap::HgcApplyAuxiliaryMap(v12);
        (*(*v12 + 120))(v12, 0, Input);
        (*(*v12 + 120))(v12, 1, v11);
        (*(*v12 + 96))(v12, 0, *(this + 104), 0.0, 0.0, 0.0);
        Input = *(this + 51);
        if (Input != v12)
        {
          if (Input)
          {
            (*(*Input + 24))(*(this + 51));
          }

          *(this + 51) = v12;
          (*(*v12 + 16))(v12);
          Input = *(this + 51);
        }

        (*(*v12 + 24))(v12);
        HGTransform::~HGTransform(v14);
        (*(*v11 + 24))(v11);
      }
    }
  }

  return Input;
}

void sub_260324530(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{
  HGObject::operator delete(v10);
  HGTransform::~HGTransform(&a9);
  if (v9)
  {
    (*(*v9 + 24))(v9);
  }

  _Unwind_Resume(a1);
}

uint64_t PVHGApplyAuxiliaryMap::SetParameter(PVHGApplyAuxiliaryMap *this, int a2, float a3, float a4, float a5, float a6)
{
  if (a2 == 2)
  {
    if (*(this + 55) != a3 || *(this + 56) != a4)
    {
      *(this + 55) = a3;
      *(this + 56) = a4;
      return 1;
    }
  }

  else if (a2 == 1)
  {
    if (*(this + 53) != a3 || *(this + 54) != a4)
    {
      *(this + 53) = a3;
      *(this + 54) = a4;
      return 1;
    }
  }

  else
  {
    if (a2)
    {
      return 0xFFFFFFFFLL;
    }

    if (*(this + 104) != a3)
    {
      *(this + 104) = a3;
      return 1;
    }
  }

  return 0;
}

void PVHGApplyAuxiliaryMap::~PVHGApplyAuxiliaryMap(HGNode *this)
{
  PVHGApplyAuxiliaryMap::~PVHGApplyAuxiliaryMap(this);

  HGObject::operator delete(v1);
}

{
  *this = &unk_2872E01A0;
  v2 = *(this + 51);
  if (v2)
  {
    (*(*v2 + 24))(v2);
  }

  HGNode::~HGNode(this);
}

void HGColorCorrect::HGColorCorrect(HGColorCorrect *this)
{
  HGNode::HGNode(this);
  *v2 = &unk_2872E0408;
  v2[51] = 0;
  v3 = HGObject::operator new(0x200uLL);
  HgcColorCorrect::HgcColorCorrect(v3);
  v4 = *(this + 51);
  if (v4 == v3)
  {
    if (v3)
    {
      (*(*v3 + 24))(v3);
    }
  }

  else
  {
    if (v4)
    {
      (*(*v4 + 24))(v4);
    }

    *(this + 51) = v3;
  }
}

void sub_2603247E8(_Unwind_Exception *a1)
{
  if (v2)
  {
    (*(*v2 + 24))(v2);
  }

  v4 = *(v1 + 408);
  if (v4)
  {
    (*(*v4 + 24))(v4);
  }

  HGNode::~HGNode(v1);
  _Unwind_Resume(a1);
}

void HGColorCorrect::~HGColorCorrect(HGNode *this)
{
  *this = &unk_2872E0408;
  v2 = *(this + 51);
  if (v2)
  {
    (*(*v2 + 24))(v2);
  }

  HGNode::~HGNode(this);
}

{
  HGColorCorrect::~HGColorCorrect(this);

  HGObject::operator delete(v1);
}

uint64_t HGColorCorrect::GetOutput(HGNode *this, HGRenderer *a2)
{
  v3 = *(this + 51);
  Input = HGRenderer::GetInput(a2, this, 0);
  (*(*v3 + 120))(v3, 0, Input);
  return *(this + 51);
}

const char *HgcApplyAuxiliaryMap::GetProgram(HgcApplyAuxiliaryMap *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=00000003a0\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]], \n    texture2d< half > hg_Texture1 [[ texture(1) ]], \n    sampler hg_Sampler1 [[ sampler(1) ]])\n{\n    const half4 c0 = half4(1.000000000, 0.000000000, 0.000000000, 0.000000000);\n    half4 r0, r1;\n    FragmentOut output;\n\n    r0.xyz = (half3) hg_Texture1.sample(hg_Sampler1, frag._texCoord1.xy).xyz;\n    r0.xyz = mix(c0.xxx, half3(hg_Params[0].xyz), r0.xyz);\n    r1 = (half4) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    output.color0.xyz = float3(r1.xyz)*float3(r0.xyz);\n    output.color0.w = float(r1.w);\n    return output;\n}\n//MD5=be9d6af0:6016dd49:77d08db8:bcc61458\n//SIG=00400000:00000003:00000003:00000003:0001:0001:0002:0000:0000:0000:0006:0000:0002:02:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=0000000377\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]], \n    texture2d< float > hg_Texture1 [[ texture(1) ]], \n    sampler hg_Sampler1 [[ sampler(1) ]])\n{\n    const float4 c0 = float4(1.000000000, 0.000000000, 0.000000000, 0.000000000);\n    float4 r0, r1;\n    FragmentOut output;\n\n    r0.xyz = hg_Texture1.sample(hg_Sampler1, frag._texCoord1.xy).xyz;\n    r0.xyz = mix(c0.xxx, hg_Params[0].xyz, r0.xyz);\n    r1 = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    output.color0.xyz = r1.xyz*r0.xyz;\n    output.color0.w = r1.w;\n    return output;\n}\n//MD5=5a708099:c9ffe141:8e47c2fe:6139bb5a\n//SIG=00000000:00000003:00000003:00000000:0001:0001:0002:0000:0000:0000:0006:0000:0002:02:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=0000000325\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture1;\nuniform defaultp sampler2D hg_Texture0;\nuniform defaultp vec4 hg_ProgramLocal0;\nvarying highp vec4 hg_TexCoord0;\nvarying highp vec4 hg_TexCoord1;\nvoid main()\n{\n    const defaultp vec4 c0 = vec4(1.000000000, 0.000000000, 0.000000000, 0.000000000);\n    defaultp vec4 r0, r1;\n\n    r0.xyz = texture2D(hg_Texture1, hg_TexCoord1.xy).xyz;\n    r0.xyz = mix(c0.xxx, hg_ProgramLocal0.xyz, r0.xyz);\n    r1 = texture2D(hg_Texture0, hg_TexCoord0.xy);\n    gl_FragColor.xyz = r1.xyz*r0.xyz;\n    gl_FragColor.w = r1.w;\n}\n//MD5=184406a1:5249f001:2c7367ac:8a4d1966\n//SIG=00000000:00000003:00000003:00000000:0001:0001:0002:0000:0000:0000:0000:0000:0002:02:0:1:0\n";
  }
}

void sub_260324AC4(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344A80;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_260324C04(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_260324C4C()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x260324C44);
}

uint64_t HgcApplyAuxiliaryMap::BindTexture(HgcApplyAuxiliaryMap *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    if (a3 != 1)
    {
      return 0xFFFFFFFFLL;
    }

    (*(*a2 + 72))(a2, 1, 0);
    (*(*a2 + 48))(a2, 0, 0);
    v4 = a2;
    v5 = 1;
  }

  else
  {
    (*(*a2 + 72))(a2, 0);
    (*(*a2 + 48))(a2, 0, 0);
    v4 = a2;
    v5 = 0;
  }

  HGHandler::TexCoord(v4, v5, 0, 0, 0);
  if (!(*(**(a2 + 18) + 128))(*(a2 + 18), 46))
  {
    (*(*a2 + 168))(a2);
  }

  return 0;
}

uint64_t HgcApplyAuxiliaryMap::Bind(HgcApplyAuxiliaryMap *this, HGHandler *a2)
{
  (*(*a2 + 144))(a2, 0, *(this + 51), 1);
  (*(*this + 192))(this, a2);
  return 0;
}

uint64_t HgcApplyAuxiliaryMap::RenderTile(HgcApplyAuxiliaryMap *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 26);
    v8 = *(a2 + 12);
    v9 = 16 * *(a2 + 22);
    v10 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v11 = 0;
      }

      else
      {
        v11 = 0;
        v12 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v14 = *(this + 51);
          v15 = *(v14 + 16);
          v16 = vsubq_f32(*v14, v15);
          v17 = *(v14 + 32);
          v18 = vbslq_s8(v17, *(v6 + v12 - 16), vmulq_f32(*(v6 + v12 - 16), vmlaq_f32(v15, v16, *(v8 + v12 - 16))));
          v19 = vbslq_s8(v17, *(v6 + v12), vmulq_f32(vmlaq_f32(v15, v16, *(v8 + v12)), *(v6 + v12)));
          v20 = vbslq_s8(v17, *(v6 + v12 + 16), vmulq_f32(vmlaq_f32(v15, v16, *(v8 + v12 + 16)), *(v6 + v12 + 16)));
          v21 = (v5 + v12);
          v21[-2] = vbslq_s8(v17, *(v6 + v12 - 32), vmulq_f32(*(v6 + v12 - 32), vmlaq_f32(v15, v16, *(v8 + v12 - 32))));
          v21[-1] = v18;
          *v21 = v19;
          v21[1] = v20;
          v11 += 4;
          v12 += 64;
        }
      }

      if (v11 < v4)
      {
        do
        {
          *(v5 + 16 * v11) = vbslq_s8(*(*(this + 51) + 32), *(v6 + 16 * v11), vmulq_f32(*(v6 + 16 * v11), vmlaq_f32(*(*(this + 51) + 16), vsubq_f32(**(this + 51), *(*(this + 51) + 16)), *(v8 + 16 * v11))));
          ++v11;
        }

        while (v11 < v4);
      }

      ++v3;
      v8 += v7;
      v6 += v9;
      v5 += v10;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcApplyAuxiliaryMap::GetDOD(HgcApplyAuxiliaryMap *this, HGRenderer *a2, unsigned int a3, HGRect a4)
{
  if (a3 >= 2)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcApplyAuxiliaryMap::GetROI(HgcApplyAuxiliaryMap *this, HGRenderer *a2, unsigned int a3, HGRect a4)
{
  if (a3 >= 2)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcApplyAuxiliaryMap::HgcApplyAuxiliaryMap(HgcApplyAuxiliaryMap *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872E0670;
  operator new();
}

void HgcApplyAuxiliaryMap::~HgcApplyAuxiliaryMap(HGNode *this)
{
  *this = &unk_2872E0670;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40FA0F61DDLL);
  }

  HGNode::~HGNode(this);
}

{
  HgcApplyAuxiliaryMap::~HgcApplyAuxiliaryMap(this);

  HGObject::operator delete(v1);
}

uint64_t HgcApplyAuxiliaryMap::SetParameter(HgcApplyAuxiliaryMap *this, uint64_t a2, __n128 a3, float a4, float a5, float a6, char *a7)
{
  if (a2)
  {
    return 0xFFFFFFFFLL;
  }

  v8 = *(this + 51);
  if (v8->n128_f32[0] == a3.n128_f32[0] && v8->n128_f32[1] == a3.n128_f32[0] && v8->n128_f32[2] == a3.n128_f32[0] && v8->n128_f32[3] == 0.0)
  {
    return 0;
  }

  v9 = vzip1q_s32(a3.n128_u32[0], a3.n128_u32[0]);
  v9.i32[2] = a3.n128_u32[0];
  a3.n128_f32[1] = a4;
  *v8 = v9;
  a3.n128_u64[1] = __PAIR64__(LODWORD(a6), LODWORD(a5));
  v8[3] = a3;
  HGNode::ClearBits(this, a2, a7);
  return 1;
}

float HgcApplyAuxiliaryMap::GetParameter(HgcApplyAuxiliaryMap *this, int a2, float *a3)
{
  if (!a2)
  {
    v3 = *(this + 51);
    *a3 = v3[12];
    a3[1] = v3[13];
    a3[2] = v3[14];
    result = v3[15];
    a3[3] = result;
  }

  return result;
}

uint64_t HgcColorCorrect::Setup(HgcColorCorrect *this, void *a2)
{
  v2 = *(this + 62);
  v3 = *(v2 + 176);
  v5 = *v2;
  v4 = *(v2 + 16);
  v6 = vextq_s8(v4, v4, 8uLL);
  v7 = vmulq_laneq_f32(v6, v4, 2);
  v8 = *(v2 + 208);
  v9 = *(v2 + 224);
  v10 = vminq_f32(vmaxq_f32(vmulq_laneq_f32(v7, v4, 2), v8), v9);
  v11 = vminq_f32(vmaxq_f32(vrecpeq_f32(v10), v8), v9);
  v12 = vminq_f32(vmaxq_f32(vmulq_f32(v11, vrecpsq_f32(v10, v11)), v8), v9);
  v13 = vmulq_f32(v12, vrecpsq_f32(v10, v12));
  v14 = vminq_f32(vmaxq_f32(v7, v8), v9);
  v15 = vminq_f32(vmaxq_f32(vrecpeq_f32(v14), v8), v9);
  v16 = vminq_f32(vmaxq_f32(vmulq_f32(v15, vrecpsq_f32(v14, v15)), v8), v9);
  v17 = vmulq_f32(v16, vrecpsq_f32(v14, v16));
  v18 = vminq_f32(vmaxq_f32(v6, v8), v9);
  v19 = vminq_f32(vmaxq_f32(vrecpeq_f32(v18), v8), v9);
  v20 = vminq_f32(vmaxq_f32(vmulq_f32(v19, vrecpsq_f32(v18, v19)), v8), v9);
  v21 = vmulq_f32(v20, vrecpsq_f32(v18, v20));
  v22 = *(v2 + 848);
  v221 = *(v2 + 832);
  v222 = v22;
  v23 = vcgtq_f32(v3, vsubq_f32(v6, *(v2 + 192)));
  v24 = vbslq_s8(v23, vaddq_f32(*(v2 + 256), vmlaq_laneq_f32(vmlaq_laneq_f32(vmulq_f32(v13, *(v2 + 240)), v17, *(v2 + 864), 2), v21, *(v2 + 864), 3)), vaddq_f32(*(v2 + 288), vmlaq_laneq_f32(vmlaq_laneq_f32(vmulq_f32(v13, *(v2 + 272)), v17, v22, 2), v21, v22, 3)));
  v25 = vnegq_f32(v24);
  v27 = *(v2 + 800);
  v26 = *(v2 + 816);
  v28 = vbslq_s8(v23, vsubq_f32(vmlaq_laneq_f32(vmlaq_f32(vmulq_f32(v24, vmulq_f32(v24, vmulq_f32(*(v2 + 304), v24))), v24, vmulq_f32(*(v2 + 320), v25)), v24, v221, 3), *(v2 + 336)), vsubq_f32(vmlaq_laneq_f32(vmlaq_f32(vmulq_f32(v24, vmulq_f32(v24, vmulq_f32(v24, *(v2 + 352)))), v24, vmulq_f32(*(v2 + 368), v25)), v24, v26, 3), *(v2 + 384)));
  v29 = vmlaq_f32(vmulq_f32(v24, vmulq_f32(v24, vmulq_f32(v24, *(v2 + 416)))), v24, vmulq_f32(*(v2 + 432), v25));
  v30 = *(v2 + 464);
  v31 = vbslq_s8(vcgtq_f32(v3, vsubq_f32(v6, *(v2 + 400))), vsubq_f32(vmlaq_f32(v29, *(v2 + 448), v24), v30), v28);
  v32 = vminq_f32(vmaxq_f32(v31, v8), v9);
  v33 = vminq_f32(vmaxq_f32(vrecpeq_f32(v32), v8), v9);
  v34 = vminq_f32(vmaxq_f32(vmulq_f32(v33, vrecpsq_f32(v32, v33)), v8), v9);
  v35 = *(v2 + 480);
  v36 = vmulq_f32(vmulq_f32(v34, vrecpsq_f32(v32, v34)), v35);
  v37.i32[0] = vmulq_f32(v24, v36).u32[0];
  v37.i32[1] = *"q=\n?";
  v37.i64[1] = vmulq_n_f32(vdupq_lane_s64(vsubq_f32(vsubq_f32(v26, v24), v31), 0), *&v36).i64[1];
  v38 = vmulq_f32(*(v2 + 496), v37);
  v39 = vaddq_f32(vdupq_laneq_s64(v38, 1), vaddq_f32(v38, vrev64q_s32(v38)));
  v40 = *(v2 + 528);
  v41 = vmulq_f32(*(v2 + 512), v37);
  v42 = vmulq_f32(*(v2 + 544), v37);
  v43 = vbslq_s8(v40, v39, vaddq_f32(vextq_s8(v41, v22, 4uLL), vaddq_f32(v41, vrev64q_s32(v41))));
  v43.i32[2] = vaddq_f32(v42, vaddq_f32(vdupq_lane_s32(*&v42, 0), vdupq_lane_s32(*&v42, 1))).i32[2];
  v44 = vmulq_f32(*(v2 + 560), v43);
  v22.i32[0] = 1.0;
  v44.i32[3] = 1.0;
  v45 = vmulq_f32(*(v2 + 128), v44);
  v46 = vmulq_f32(*(v2 + 144), v44);
  v47 = vmulq_f32(*(v2 + 160), v44);
  v48 = vmulq_f32(v3, v44);
  v49 = vrev64q_s32(v4);
  v50 = vmulq_n_f32(*v2, vsubq_f32(v26, v49).f32[0]);
  v51 = vaddq_f32(v50, vandq_s8(v40, v49));
  v52 = vmulq_f32(v51, v45);
  v53 = vaddq_f32(vdupq_laneq_s64(v52, 1), vaddq_f32(v52, vrev64q_s32(v52)));
  v54 = vmulq_f32(v51, v46);
  v55 = vaddq_f32(vdupq_laneq_s64(v54, 1), vaddq_f32(v54, vrev64q_s32(v54)));
  v56 = vmulq_f32(v51, v47);
  v57 = vaddq_f32(vdupq_laneq_s64(v56, 1), vaddq_f32(v56, vrev64q_s32(v56)));
  v58 = vmulq_f32(v51, v48);
  v59 = vaddq_f32(vdupq_laneq_s64(v58, 1), vaddq_f32(v58, vrev64q_s32(v58)));
  v61 = *(v2 + 576);
  v60 = *(v2 + 592);
  v62 = vaddq_f32(v50, vandq_s8(v61, v4));
  v63 = vmulq_f32(v62, v45);
  v53.i64[0] = vbslq_s8(v40, v53, vaddq_f32(vextq_s8(v63, v22, 4uLL), vaddq_f32(v63, vrev64q_s32(v63)))).u64[0];
  v64 = vmulq_f32(v62, v46);
  v55.i64[0] = vbslq_s8(v40, v55, vaddq_f32(vextq_s8(v64, v22, 4uLL), vaddq_f32(v64, vrev64q_s32(v64)))).u64[0];
  v65 = vmulq_f32(v62, v47);
  v57.i64[0] = vbslq_s8(v40, v57, vaddq_f32(vextq_s8(v65, v22, 4uLL), vaddq_f32(v65, vrev64q_s32(v65)))).u64[0];
  v66 = vmulq_f32(v62, v48);
  v59.i64[0] = vbslq_s8(v40, v59, vaddq_f32(vextq_s8(v66, v22, 4uLL), vaddq_f32(v66, vrev64q_s32(v66)))).u64[0];
  v67 = vaddq_f32(v50, vandq_s8(v60, vextq_s8(v4, v4, 0xCuLL)));
  v68 = vmulq_f32(v67, v45);
  v69 = vmulq_f32(v67, v46);
  v70 = vmulq_f32(v67, v47);
  v71 = vmulq_f32(v67, v48);
  v72 = vaddq_f32(v71, vaddq_f32(vdupq_lane_s64(v71.i64[0], 0), vextq_s8(v22, v71, 0xCuLL)));
  v53.i64[1] = vaddq_f32(v68, vaddq_f32(vdupq_lane_s64(*&v68, 0), vextq_s8(*&v22, *&v68, 0xCuLL))).i64[1];
  v73 = *(v2 + 608);
  v74 = *(v2 + 624);
  v75 = vbslq_s8(v73, v45, v53);
  v55.i64[1] = vaddq_f32(v69, vaddq_f32(vdupq_lane_s64(*&v69, 0), vextq_s8(*&v22, *&v69, 0xCuLL))).i64[1];
  v76 = vbslq_s8(v73, v46, v55);
  v57.i64[1] = vaddq_f32(v70, vaddq_f32(vdupq_lane_s64(*&v70, 0), vextq_s8(*&v22, *&v70, 0xCuLL))).i64[1];
  v59.i64[1] = v72.i64[1];
  v77 = *(v2 + 32);
  v78 = *(v2 + 48);
  v79 = vmulq_f32(v77, v75);
  v80 = vmulq_f32(v77, v76);
  v81 = vmulq_f32(v77, vbslq_s8(v73, v47, v57));
  v82 = vmulq_f32(v77, vbslq_s8(v73, v48, v59));
  v83 = vmulq_laneq_f32(v74, v79, 3);
  v84 = vmulq_laneq_f32(v74, v80, 3);
  v85 = vmulq_laneq_f32(v74, v81, 3);
  v86 = vmulq_laneq_f32(v74, v82, 3);
  v87 = vmlaq_f32(v83, vsubq_f32(v79, v83), v78);
  v88 = vmlaq_f32(v84, vsubq_f32(v80, v84), v78);
  v89 = vmlaq_f32(v85, vsubq_f32(v81, v85), v78);
  v90 = vmlaq_f32(v86, vsubq_f32(v82, v86), v78);
  v91 = vextq_s8(v87, v87, 4uLL);
  v93 = *(v2 + 640);
  v92 = *(v2 + 656);
  v94 = vmulq_f32(v93, v91);
  v95 = vbslq_s8(v61, vaddq_f32(v94, vrev64q_s32(v94)), v87);
  v96 = vextq_s8(v88, v88, 4uLL);
  v97 = vmulq_f32(v93, v96);
  v98 = vbslq_s8(v61, vaddq_f32(v97, vrev64q_s32(v97)), v88);
  v99 = vextq_s8(v89, v89, 4uLL);
  v100 = vmulq_f32(v93, v99);
  v101 = vbslq_s8(v61, vaddq_f32(v100, vrev64q_s32(v100)), v89);
  v102 = vextq_s8(v90, v90, 4uLL);
  v103 = vmulq_f32(v93, v102);
  v104 = vbslq_s8(v61, vaddq_f32(v103, vrev64q_s32(v103)), v90);
  v105 = vmulq_f32(v92, v91);
  v106 = vbslq_s8(v60, vaddq_f32(vextq_s8(v105, v105, 8uLL), vextq_s8(v105, v105, 0xCuLL)), v95);
  v107 = vmulq_f32(v92, v96);
  v108 = vbslq_s8(v60, vaddq_f32(vextq_s8(v107, v107, 8uLL), vextq_s8(v107, v107, 0xCuLL)), v98);
  v109 = vmulq_f32(v92, v99);
  v110 = vbslq_s8(v60, vaddq_f32(vextq_s8(v109, v109, 8uLL), vextq_s8(v109, v109, 0xCuLL)), v101);
  v111 = vmulq_f32(v92, v102);
  v112 = vbslq_s8(v60, vaddq_f32(vextq_s8(v111, v111, 8uLL), vextq_s8(v111, v111, 0xCuLL)), v104);
  v113 = vextq_s8(v5, v5, 4uLL);
  v114 = vmulq_f32(v113, v92);
  v115 = vextq_s8(v22, v114, 0xCuLL);
  *v72.f32 = vadd_f32(*v114.i8, *&vextq_s8(v115, v115, 8uLL));
  v117 = *(v2 + 672);
  v116 = *(v2 + 688);
  *v118.f32 = vqtbl1_s8(v106, *v117.i8);
  v115.i64[0] = vextq_s8(v117, v117, 8uLL).u64[0];
  *&v118.u32[2] = vqtbl1_s8(v106, *v115.i8);
  v119 = vmulq_f32(v116, v118);
  *v120.f32 = vqtbl1_s8(v108, *v117.i8);
  *&v120.u32[2] = vqtbl1_s8(v108, *v115.i8);
  v121 = vmulq_f32(v116, v120);
  *v122.f32 = vqtbl1_s8(v110, *v117.i8);
  *&v122.u32[2] = vqtbl1_s8(v110, *v115.i8);
  v123 = vmulq_f32(v116, v122);
  v124 = vaddq_f32(v123, vrev64q_s32(v123));
  *v123.f32 = vqtbl1_s8(v112, *v117.i8);
  *&v123.u32[2] = vqtbl1_s8(v112, *v115.i8);
  v125 = vmulq_f32(v116, v123);
  v126 = vbslq_s8(v40, vaddq_f32(v119, vrev64q_s32(v119)), v106);
  v127 = vbslq_s8(v40, vaddq_f32(v121, vrev64q_s32(v121)), v108);
  v128 = vbslq_s8(v40, v124, v110);
  v129 = vbslq_s8(v40, vaddq_f32(v125, vrev64q_s32(v125)), v112);
  v130 = *(v2 + 704);
  v131 = *(v2 + 720);
  v132 = vmulq_f32(v130, v118);
  v133 = vmulq_f32(v130, v120);
  v134 = vmulq_f32(v130, v122);
  v5.i64[1] = v72.i64[0];
  *v72.f32 = vqtbl1_s8(v5, *v117.i8);
  *&v72.u32[2] = vqtbl1_s8(v5, *v115.i8);
  v135 = vmulq_f32(v130, v123);
  v136 = vmulq_f32(v116, v72);
  v137 = vmulq_f32(v113, v93);
  v136.i64[0] = vbslq_s8(v40, vaddq_f32(v136, vrev64q_s32(v136)), vaddq_f32(v137, vrev64q_s32(v137))).u64[0];
  v138 = vmulq_f32(v130, v72);
  v139 = vaddq_f32(vdupq_lane_s64(v138.i64[0], 0), vextq_s8(v138, v138, 0xCuLL));
  v136.i64[1] = v139.i64[1];
  v140 = vminq_f32(vmaxq_f32(vdupq_laneq_s32(v139, 2), v8), v9);
  v141 = vminq_f32(vmaxq_f32(vrecpeq_f32(v140), v8), v9);
  v142 = vbslq_s8(v60, vaddq_f32(vextq_s8(v134, v134, 8uLL), vextq_s8(v134, v134, 0xCuLL)), v128);
  v143 = vbslq_s8(v60, vaddq_f32(vextq_s8(v135, v135, 8uLL), vextq_s8(v135, v135, 0xCuLL)), v129);
  v144 = vminq_f32(vmaxq_f32(vmulq_f32(v141, vrecpsq_f32(v140, v141)), v8), v9);
  v145 = vmulq_f32(vmulq_f32(v144, vrecpsq_f32(v140, v144)), v136);
  v146 = v145;
  v146.i32[2] = 1.0;
  v147 = vmulq_f32(v146, vbslq_s8(v60, vaddq_f32(vextq_s8(v132, v132, 8uLL), vextq_s8(v132, v132, 0xCuLL)), v126));
  v148 = vbslq_s8(v60, vaddq_f32(v147, vaddq_f32(vextq_s8(v147, v147, 8uLL), vextq_s8(v147, v147, 0xCuLL))), v126);
  v149 = vmulq_f32(v146, vbslq_s8(v60, vaddq_f32(vextq_s8(v133, v133, 8uLL), vextq_s8(v133, v133, 0xCuLL)), v127));
  v150 = vbslq_s8(v60, vaddq_f32(v149, vaddq_f32(vextq_s8(v149, v149, 8uLL), vextq_s8(v149, v149, 0xCuLL))), v127);
  v151 = vmulq_f32(v146, v142);
  v152 = vbslq_s8(v60, vaddq_f32(v151, vaddq_f32(vextq_s8(v151, v151, 8uLL), vextq_s8(v151, v151, 0xCuLL))), v128);
  v153 = vmulq_f32(v146, v143);
  v154 = vmulq_f32(v4, v131);
  v155 = *(v2 + 736);
  v156 = *(v2 + 752);
  v157 = vmulq_f32(v154, v155);
  v158 = vcvtq_f32_s32(vcvtq_s32_f32(v157));
  v159 = vsubq_f32(vabdq_f32(vsubq_f32(v157, vsubq_f32(v158, vandq_s8(v26, vcgtq_f32(v158, v157)))), v74), v156);
  v160 = vmulq_f32(v159, v159);
  v161 = *(v2 + 768);
  v162 = *(v2 + 784);
  v163 = vmlaq_f32(v27, v162, vrev64q_s32(v154));
  v164 = vcvtq_f32_s32(vcvtq_s32_f32(v163));
  v165 = vaddq_f32(v27, vabdq_f32(vsubq_f32(v163, vsubq_f32(v164, vandq_s8(v161, vcgtq_f32(v164, v163)))), v156));
  v166 = vmulq_f32(v165, v165);
  v167 = vbslq_s8(v60, vaddq_f32(v153, vaddq_f32(vextq_s8(v153, v153, 8uLL), vextq_s8(v153, v153, 0xCuLL))), v129);
  v168 = vbslq_s8(v40, vmulq_f32(v159, vmlaq_f32(v131, v160, vmlaq_f32(v27, v160, vmlaq_f32(v161, v162, v160)))), vmulq_f32(v165, vmlaq_f32(v30, v166, vmlaq_f32(v35, v166, vmlaq_f32(v155, v131, v166)))));
  v169 = vmulq_f32(v26, v168);
  v170 = vmulq_f32(v169, v148);
  v171 = vmulq_f32(v169, v150);
  v172 = vmulq_f32(v169, v152);
  v173 = vmulq_f32(v169, v167);
  v174 = vrev64q_s32(v168);
  v175 = vmulq_f32(v174, v148);
  v170.i64[0] = vbslq_s8(v40, vaddq_f32(v170, vrev64q_s32(v170)), vaddq_f32(v175, vrev64q_s32(v175))).u64[0];
  v176 = vmulq_f32(v174, v150);
  v171.i64[0] = vbslq_s8(v40, vaddq_f32(v171, vrev64q_s32(v171)), vaddq_f32(v176, vrev64q_s32(v176))).u64[0];
  v177 = vmulq_f32(v174, v152);
  v172.i64[0] = vbslq_s8(v40, vaddq_f32(v172, vrev64q_s32(v172)), vaddq_f32(v177, vrev64q_s32(v177))).u64[0];
  v178 = vmulq_f32(v174, v167);
  v179 = vnegq_f32(v145);
  v178.i64[0] = vbslq_s8(v40, vaddq_f32(v173, vrev64q_s32(v173)), vaddq_f32(v178, vrev64q_s32(v178))).u64[0];
  v170.i64[1] = v148.i64[1];
  v171.i64[1] = v150.i64[1];
  v172.i64[1] = v152.i64[1];
  v178.i64[1] = v167.i64[1];
  v179.i32[2] = 1.0;
  v180 = vmulq_f32(v179, v170);
  v181 = vbslq_s8(v60, vaddq_f32(v180, vaddq_f32(vextq_s8(v180, v180, 8uLL), vextq_s8(v180, v180, 0xCuLL))), v170);
  v182 = vmulq_f32(v179, v171);
  v183 = vbslq_s8(v60, vaddq_f32(v182, vaddq_f32(vextq_s8(v182, v182, 8uLL), vextq_s8(v182, v182, 0xCuLL))), v171);
  v184 = vmulq_f32(v179, v172);
  v185 = vbslq_s8(v60, vaddq_f32(v184, vaddq_f32(vextq_s8(v184, v184, 8uLL), vextq_s8(v184, v184, 0xCuLL))), v172);
  v186 = vmulq_f32(v179, v178);
  v187 = vbslq_s8(v60, vaddq_f32(v186, vaddq_f32(vextq_s8(v186, v186, 8uLL), vextq_s8(v186, v186, 0xCuLL))), v178);
  *v186.f32 = vqtbl1_s8(v181, *v117.i8);
  *&v186.u32[2] = vqtbl1_s8(v181, *v115.i8);
  v188 = vmulq_f32(v221, v186);
  *v150.f32 = vqtbl1_s8(v183, *v117.i8);
  *&v150.u32[2] = vqtbl1_s8(v183, *v115.i8);
  v189 = vmulq_f32(v221, v150);
  *v172.f32 = vqtbl1_s8(v185, *v117.i8);
  *&v172.u32[2] = vqtbl1_s8(v185, *v115.i8);
  v190 = vmulq_f32(v221, v172);
  *v159.f32 = vqtbl1_s8(v187, *v117.i8);
  *&v159.u32[2] = vqtbl1_s8(v187, *v115.i8);
  v191 = vmulq_f32(v221, v159);
  v192 = vmulq_f32(v222, v186);
  v193 = vbslq_s8(v60, vaddq_f32(vextq_s8(v192, v192, 8uLL), vextq_s8(v192, v192, 0xCuLL)), vbslq_s8(v40, vaddq_f32(v188, vrev64q_s32(v188)), v181));
  v194 = vmulq_f32(v222, v150);
  v195 = vbslq_s8(v60, vaddq_f32(vextq_s8(v194, v194, 8uLL), vextq_s8(v194, v194, 0xCuLL)), vbslq_s8(v40, vaddq_f32(v189, vrev64q_s32(v189)), v183));
  v196 = vmulq_f32(v222, v172);
  v197 = vbslq_s8(v60, vaddq_f32(vextq_s8(v196, v196, 8uLL), vextq_s8(v196, v196, 0xCuLL)), vbslq_s8(v40, vaddq_f32(v190, vrev64q_s32(v190)), v185));
  v198 = vmulq_f32(v222, v159);
  v199 = vbslq_s8(v60, vaddq_f32(vextq_s8(v198, v198, 8uLL), vextq_s8(v198, v198, 0xCuLL)), vbslq_s8(v40, vaddq_f32(v191, vrev64q_s32(v191)), v187));
  v200 = vextq_s8(v193, v193, 4uLL);
  v201 = vmulq_f32(v92, v200);
  v202 = vbslq_s8(v61, vaddq_f32(v201, vrev64q_s32(v201)), v193);
  v203 = vextq_s8(v195, v195, 4uLL);
  v204 = vmulq_f32(v92, v203);
  v205 = vbslq_s8(v61, vaddq_f32(v204, vrev64q_s32(v204)), v195);
  v206 = vextq_s8(v197, v197, 4uLL);
  v207 = vmulq_f32(v92, v206);
  v208 = vbslq_s8(v61, vaddq_f32(v207, vrev64q_s32(v207)), v197);
  v209 = vextq_s8(v199, v199, 4uLL);
  v210 = vmulq_f32(v92, v209);
  v211 = vbslq_s8(v61, vaddq_f32(v210, vrev64q_s32(v210)), v199);
  v212 = *(v2 + 864);
  v213 = vmulq_f32(v212, v200);
  v214 = vbslq_s8(v60, vaddq_f32(vextq_s8(v213, v213, 8uLL), vextq_s8(v213, v213, 0xCuLL)), v202);
  v215 = vmulq_f32(v212, v203);
  v216 = vbslq_s8(v60, vaddq_f32(vextq_s8(v215, v215, 8uLL), vextq_s8(v215, v215, 0xCuLL)), v205);
  v217 = vmulq_f32(v212, v206);
  v218 = vbslq_s8(v60, vaddq_f32(vextq_s8(v217, v217, 8uLL), vextq_s8(v217, v217, 0xCuLL)), v208);
  v219 = vmulq_f32(v212, v209);
  *(v2 + 64) = v214;
  *(*(this + 62) + 80) = v216;
  *(*(this + 62) + 96) = v218;
  *(*(this + 62) + 112) = vbslq_s8(v60, vaddq_f32(vextq_s8(v219, v219, 8uLL), vextq_s8(v219, v219, 0xCuLL)), v211);
  return 0;
}

uint64_t HgcColorCorrect::BindTexture(HgcColorCorrect *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  (*(*a2 + 72))(a2, 0);
  (*(*a2 + 48))(a2, 0, 0);
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  v5 = (*(**(a2 + 18) + 128))(*(a2 + 18), 46);
  result = 0;
  if (!v5)
  {
    (*(*a2 + 168))(a2);
    return 0;
  }

  return result;
}

uint64_t HgcColorCorrect::GetDOD(HgcColorCorrect *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcColorCorrect::GetROI(HgcColorCorrect *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcColorCorrect::~HgcColorCorrect(HgcColorCorrect *this)
{
  *this = &unk_2872E08D8;
  v2 = *(this + 62);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C402C08F58ALL);
  }

  HGColorMatrix::~HGColorMatrix(this);
}

{
  HgcColorCorrect::~HgcColorCorrect(this);

  HGObject::operator delete(v1);
}

uint64_t HgcColorCorrect::SetParameter(HgcColorCorrect *this, uint64_t a2, float a3, float a4, float a5, float a6, char *a7)
{
  if (a2 > 3)
  {
    return 0xFFFFFFFFLL;
  }

  v7 = (*(this + 62) + 16 * a2);
  if (*v7 == a3 && v7[1] == a4 && v7[2] == a5 && v7[3] == a6)
  {
    return 0;
  }

  *v7 = a3;
  v7[1] = a4;
  v7[2] = a5;
  v7[3] = a6;
  v8 = 1;
  *(this + 126) = 1;
  HGNode::ClearBits(this, a2, a7);
  return v8;
}

uint64_t HgcColorCorrect::GetParameter(HgcColorCorrect *this, unsigned int a2, float *a3)
{
  if (a2 > 3)
  {
    return 0xFFFFFFFFLL;
  }

  result = 0;
  v5 = (*(this + 62) + 16 * a2);
  *a3 = *v5;
  a3[1] = v5[1];
  a3[2] = v5[2];
  a3[3] = v5[3];
  return result;
}

HGNode *HgcColorCorrect::GetOutput(HgcColorCorrect *this, HGRenderer *a2, __n128 a3, double a4, int32x2_t a5)
{
  if (*(this + 126))
  {
    HgcColorCorrect::Setup(this, a2);
    v7 = *(this + 62);
    *(this + 27) = *(v7 + 64);
    *(this + 28) = *(v7 + 80);
    *(this + 29) = *(v7 + 96);
    a3 = *(v7 + 112);
    *(this + 30) = a3;
    *(this + 126) = 0;
  }

  return HGColorMatrix::GetOutput(this, a2, a3.n128_f64[0], a4, a5);
}

double HgcColorCorrect::State::State(HgcColorCorrect::State *this)
{
  *(this + 2) = 0u;
  *(this + 3) = 0u;
  *this = 0u;
  *(this + 1) = 0u;
  *(this + 4) = xmmword_2603429B0;
  *(this + 5) = xmmword_2603429C0;
  *(this + 6) = xmmword_2603429D0;
  *(this + 7) = xmmword_2603427D0;
  *(this + 8) = xmmword_2603429B0;
  *(this + 9) = xmmword_2603429C0;
  *(this + 10) = xmmword_2603429D0;
  *(this + 11) = xmmword_2603427D0;
  *(this + 12) = *"";
  *(this + 13) = xmmword_260346010;
  v1.i64[0] = 0x80000000800000;
  v1.i64[1] = 0x80000000800000;
  *(this + 14) = vnegq_f32(v1);
  *(this + 15) = xmmword_260858E20;
  *(this + 16) = xmmword_260858E30;
  *(this + 17) = xmmword_260858E40;
  *(this + 18) = xmmword_260858E50;
  *(this + 19) = xmmword_260858E60;
  *(this + 20) = xmmword_260858E70;
  *(this + 21) = xmmword_260858E80;
  *(this + 22) = xmmword_260858E90;
  *(this + 23) = xmmword_260858EA0;
  *(this + 24) = xmmword_260858EB0;
  *(this + 25) = xmmword_260858EC0;
  *(this + 26) = xmmword_260858ED0;
  *(this + 27) = xmmword_260858EE0;
  *(this + 28) = xmmword_260858EF0;
  *(this + 29) = xmmword_260858F00;
  *(this + 30) = xmmword_260858F10;
  *(this + 31) = xmmword_260858F20;
  *(this + 32) = xmmword_260858F30;
  *(this + 33) = xmmword_2603444B0;
  *(this + 34) = xmmword_260858F40;
  *(this + 35) = xmmword_260858F50;
  *(this + 36) = xmmword_260344670;
  *(this + 37) = xmmword_260344660;
  *&v2 = 0x3F0000003F000000;
  *(&v2 + 1) = 0x3F0000003F000000;
  *(this + 38) = xmmword_260344600;
  *(this + 39) = v2;
  *(this + 40) = xmmword_260858F60;
  *(this + 41) = xmmword_260858F70;
  *(this + 42) = xmmword_260344740;
  *(this + 43) = xmmword_260858F80;
  *(this + 44) = xmmword_260858F90;
  *(this + 45) = xmmword_260858FA0;
  *(this + 46) = xmmword_260858FB0;
  *(this + 47) = xmmword_260345240;
  *(this + 48) = xmmword_260345230;
  *(this + 49) = xmmword_260345220;
  *(this + 50) = xmmword_260345210;
  *(this + 51) = xmmword_260858FC0;
  *(this + 52) = xmmword_260858FD0;
  *(this + 53) = xmmword_260858FE0;
  result = 0.000320729741;
  *(this + 54) = xmmword_260858FF0;
  *(this + 55) = xmmword_260859000;
  return result;
}

const char *HgcHighlightHDRRegion::GetProgram(HgcHighlightHDRRegion *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=0000000345\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const half4 c0 = half4(0.06666667014, 1.000000000, 0.07843137532, 0.5764706135);\n    half4 r0, r1;\n    FragmentOut output;\n\n    r0 = (half4) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1 = clamp(r0, 0.00000h, 1.00000h);\n    r0.xyz = r0.xyz - r1.xyz;\n    r0.xyz = r0.xyz*c0.xxx;\n    r0.x = fmax(r0.x, r0.y);\n    r0.x = fmax(r0.x, r0.z);\n    output.color0 = mix(float4(r1), float4(c0.yzwy), float4(r0.xxxx));\n    return output;\n}\n//MD5=0f491771:8c56129f:a38de618:e328132d\n//SIG=00400000:00000001:00000001:00000001:0001:0000:0002:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=0000000329\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const float4 c0 = float4(0.06666667014, 1.000000000, 0.07843137532, 0.5764706135);\n    float4 r0, r1;\n    FragmentOut output;\n\n    r0 = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1 = clamp(r0, 0.00000f, 1.00000f);\n    r0.xyz = r0.xyz - r1.xyz;\n    r0.xyz = r0.xyz*c0.xxx;\n    r0.x = fmax(r0.x, r0.y);\n    r0.x = fmax(r0.x, r0.z);\n    output.color0 = mix(r1, c0.yzwy, r0.xxxx);\n    return output;\n}\n//MD5=ff467f12:4ce00e31:ad026719:065f9887\n//SIG=00000000:00000001:00000001:00000000:0001:0000:0002:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=00000002d8\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    const defaultp vec4 c0 = vec4(0.06666667014, 1.000000000, 0.07843137532, 0.5764706135);\n    defaultp vec4 r0, r1;\n\n    r0 = texture2D(hg_Texture0, hg_TexCoord0.xy);\n    r1 = clamp(r0, vec4(0.00000), vec4(1.00000));\n    r0.xyz = r0.xyz - r1.xyz;\n    r0.xyz = r0.xyz*c0.xxx;\n    r0.x = max(r0.x, r0.y);\n    r0.x = max(r0.x, r0.z);\n    gl_FragColor = mix(r1, c0.yzwy, r0.xxxx);\n}\n//MD5=0ddea595:fd350b7b:a63b0c18:7d31ed17\n//SIG=00000000:00000001:00000001:00000000:0001:0000:0002:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_26032622C(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344AF0;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_26032632C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_26032636C()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x260326364);
}

uint64_t HgcHighlightHDRRegion::BindTexture(HgcHighlightHDRRegion *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  (*(*a2 + 72))(a2, 0);
  (*(*a2 + 48))(a2, 0, 0);
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  v5 = (*(**(a2 + 18) + 128))(*(a2 + 18), 46);
  result = 0;
  if (!v5)
  {
    (*(*a2 + 168))(a2);
    return 0;
  }

  return result;
}

uint64_t HgcHighlightHDRRegion::RenderTile(HgcHighlightHDRRegion *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 22);
    v8 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v9 = 0;
      }

      else
      {
        v9 = 0;
        v10 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v12 = *(v6 + v10 - 32);
          v13 = *(v6 + v10 - 16);
          v14 = *(v6 + v10);
          v15 = *(v6 + v10 + 16);
          v16 = *(this + 51);
          v17 = v16[1];
          v18 = vminq_f32(vmaxq_f32(v12, *v16), v17);
          v19 = vminq_f32(vmaxq_f32(v13, *v16), v17);
          v20 = vminq_f32(vmaxq_f32(v14, *v16), v17);
          v21 = vminq_f32(vmaxq_f32(v15, *v16), v17);
          v22 = v16[2];
          v23 = v16[3];
          v24 = vmulq_f32(vsubq_f32(v12, v18), v22);
          v25 = vmulq_f32(vsubq_f32(v13, v19), v22);
          v26 = vmulq_f32(vsubq_f32(v14, v20), v22);
          v27 = vmulq_f32(vsubq_f32(v15, v21), v22);
          v28 = vmaxq_f32(v24, vrev64q_s32(v24));
          v29 = vmaxq_f32(v25, vrev64q_s32(v25));
          v30 = vmaxq_f32(v26, vrev64q_s32(v26));
          v31 = vextq_s8(v24, v28, 8uLL);
          v28.i64[1] = v24.i64[1];
          v32 = vextq_s8(v25, v29, 8uLL);
          v29.i64[1] = v25.i64[1];
          v33 = vmaxq_f32(v27, vrev64q_s32(v27));
          v34 = vextq_s8(v26, v30, 8uLL);
          v35 = vextq_s8(v27, v33, 8uLL);
          v30.i64[1] = v26.i64[1];
          v33.i64[1] = v27.i64[1];
          v36 = (v5 + v10);
          v36[-2] = vmlaq_n_f32(v18, vsubq_f32(v23, v18), vmaxq_f32(v28, v31).f32[0]);
          v36[-1] = vmlaq_n_f32(v19, vsubq_f32(v23, v19), vmaxq_f32(v29, v32).f32[0]);
          *v36 = vmlaq_n_f32(v20, vsubq_f32(v23, v20), vmaxq_f32(v30, v34).f32[0]);
          v36[1] = vmlaq_n_f32(v21, vsubq_f32(v23, v21), vmaxq_f32(v33, v35).f32[0]);
          v9 += 4;
          v10 += 64;
        }
      }

      if (v9 < v4)
      {
        do
        {
          v37 = *(v6 + 16 * v9);
          v38 = *(this + 51);
          v39 = vminq_f32(vmaxq_f32(v37, *v38), v38[1]);
          v40 = vmulq_f32(vsubq_f32(v37, v39), v38[2]);
          v41 = vmaxq_f32(v40, vrev64q_s32(v40));
          v42 = vextq_s8(v40, v41, 8uLL);
          v41.i64[1] = v40.i64[1];
          *(v5 + 16 * v9++) = vmlaq_n_f32(v39, vsubq_f32(v38[3], v39), vmaxq_f32(v41, v42).f32[0]);
        }

        while (v9 < v4);
      }

      ++v3;
      v6 += v7;
      v5 += v8;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcHighlightHDRRegion::GetDOD(HgcHighlightHDRRegion *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcHighlightHDRRegion::GetROI(HgcHighlightHDRRegion *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcHighlightHDRRegion::HgcHighlightHDRRegion(HgcHighlightHDRRegion *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872E0B50;
  operator new();
}

void HgcHighlightHDRRegion::~HgcHighlightHDRRegion(HGNode *this)
{
  *this = &unk_2872E0B50;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40FA0F61DDLL);
  }

  HGNode::~HGNode(this);
}

{
  HgcHighlightHDRRegion::~HgcHighlightHDRRegion(this);

  HGObject::operator delete(v1);
}

const char *HgcOverexposureCheck::GetProgram(HgcOverexposureCheck *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=00000002e9\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const half4 c0 = half4(0.000000000, 1.000000000, 0.000000000, 0.000000000);\n    half4 r0;\n    FragmentOut output;\n\n    r0.xyz = (half3) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy).xyz;\n    r0.xyz = fmax(r0.xyz, c0.xxx);\n    output.color0.x = dot(float3(r0.xyz), hg_Params[0].xyz);\n    output.color0.yzw = float3(c0.xxy);\n    return output;\n}\n//MD5=753e7e49:4673b5e4:9999ef5b:0a25a395\n//SIG=00400000:00000001:00000001:00000001:0001:0001:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=00000002d5\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const float4 c0 = float4(0.000000000, 1.000000000, 0.000000000, 0.000000000);\n    float4 r0;\n    FragmentOut output;\n\n    r0.xyz = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy).xyz;\n    r0.xyz = fmax(r0.xyz, c0.xxx);\n    output.color0.x = dot(r0.xyz, hg_Params[0].xyz);\n    output.color0.yzw = c0.xxy;\n    return output;\n}\n//MD5=08055fc8:a19b68f0:107c0018:aa18a62e\n//SIG=00000000:00000001:00000001:00000000:0001:0001:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=00000002a6\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nuniform defaultp vec4 hg_ProgramLocal0;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    const defaultp vec4 c0 = vec4(0.000000000, 1.000000000, 0.000000000, 0.000000000);\n    defaultp vec4 r0;\n\n    r0.xyz = texture2D(hg_Texture0, hg_TexCoord0.xy).xyz;\n    r0.xyz = max(r0.xyz, c0.xxx);\n    gl_FragColor.x = dot(r0.xyz, hg_ProgramLocal0.xyz);\n    gl_FragColor.yzw = c0.xxy;\n}\n//MD5=d59f6280:a2ae589f:7caf7a89:92a20f17\n//SIG=00000000:00000001:00000001:00000000:0001:0001:0001:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_260326924(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344A80;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_260326A24(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_260326A64()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x260326A5CLL);
}

uint64_t HgcOverexposureCheck::BindTexture(HgcOverexposureCheck *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  (*(*a2 + 72))(a2, 0);
  (*(*a2 + 48))(a2, 0, 0);
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  v5 = (*(**(a2 + 18) + 128))(*(a2 + 18), 46);
  result = 0;
  if (!v5)
  {
    (*(*a2 + 168))(a2);
    return 0;
  }

  return result;
}

uint64_t HgcOverexposureCheck::Bind(HgcOverexposureCheck *this, HGHandler *a2)
{
  (*(*a2 + 144))(a2, 0, *(this + 51), 1);
  (*(*this + 192))(this, a2);
  return 0;
}

uint64_t HgcOverexposureCheck::RenderTile(HgcOverexposureCheck *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 22);
    v8 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v9 = 0;
      }

      else
      {
        v9 = 0;
        v10 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v12 = *(this + 51);
          v13 = *(v12 + 16);
          v14 = vmulq_f32(vmaxq_f32(*(v6 + v10 - 32), v13), *v12);
          v15 = vmulq_f32(vmaxq_f32(*(v6 + v10 - 16), v13), *v12);
          v16 = vmulq_f32(vmaxq_f32(*(v6 + v10), v13), *v12);
          v17 = vmulq_f32(vmaxq_f32(*(v6 + v10 + 16), v13), *v12);
          v18 = *(v12 + 32);
          v19 = (v5 + v10);
          v19[-2] = vbslq_s8(v18, vaddq_f32(vextq_s8(v14, v14, 8uLL), vaddq_f32(v14, vrev64q_s32(v14))), v13);
          v19[-1] = vbslq_s8(v18, vaddq_f32(vextq_s8(v15, v15, 8uLL), vaddq_f32(v15, vrev64q_s32(v15))), v13);
          *v19 = vbslq_s8(v18, vaddq_f32(vextq_s8(v16, v16, 8uLL), vaddq_f32(v16, vrev64q_s32(v16))), v13);
          v19[1] = vbslq_s8(v18, vaddq_f32(vextq_s8(v17, v17, 8uLL), vaddq_f32(v17, vrev64q_s32(v17))), v13);
          v9 += 4;
          v10 += 64;
        }
      }

      if (v9 < v4)
      {
        do
        {
          v20 = *(this + 51);
          v21 = *(v20 + 16);
          v22 = vmulq_f32(vmaxq_f32(*(v6 + 16 * v9), v21), *v20);
          *(v5 + 16 * v9++) = vbslq_s8(*(v20 + 32), vaddq_f32(vextq_s8(v22, v22, 8uLL), vaddq_f32(v22, vrev64q_s32(v22))), v21);
        }

        while (v9 < v4);
      }

      ++v3;
      v6 += v7;
      v5 += v8;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcOverexposureCheck::GetDOD(HgcOverexposureCheck *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcOverexposureCheck::GetROI(HgcOverexposureCheck *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcOverexposureCheck::HgcOverexposureCheck(HgcOverexposureCheck *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872E0DB8;
  operator new();
}

void HgcOverexposureCheck::~HgcOverexposureCheck(HGNode *this)
{
  *this = &unk_2872E0DB8;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40EED21634);
  }

  HGNode::~HGNode(this);
}

{
  HgcOverexposureCheck::~HgcOverexposureCheck(this);

  HGObject::operator delete(v1);
}

uint64_t HgcOverexposureCheck::SetParameter(HgcOverexposureCheck *this, uint64_t a2, float a3, float a4, float a5, float a6, char *a7)
{
  if (a2)
  {
    return 0xFFFFFFFFLL;
  }

  v8 = *(this + 51);
  if (*v8 == a3 && v8[1] == a4 && v8[2] == a5 && v8[3] == a6)
  {
    return 0;
  }

  *v8 = a3;
  v8[1] = a4;
  v8[2] = a5;
  v8[3] = a6;
  HGNode::ClearBits(this, a2, a7);
  return 1;
}

float HgcOverexposureCheck::GetParameter(HgcOverexposureCheck *this, int a2, float *a3)
{
  if (!a2)
  {
    v3 = *(this + 51);
    *a3 = *v3;
    a3[1] = v3[1];
    a3[2] = v3[2];
    result = v3[3];
    a3[3] = result;
  }

  return result;
}

const char *HgcHighlightOutOfGamut::GetProgram(HgcHighlightOutOfGamut *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=000000048f\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const half4 c0 = half4(0.000000000, 1.000000000, -0.5500000119, 0.000000000);\n    half4 r0, r1;\n    FragmentOut output;\n\n    r0 = (half4) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1.y = half(c0.y < r0.x);\n    r1.x = half(r0.x < c0.x);\n    r1.z = fmax(r1.x, r1.y);\n    r1.x = half(r0.y < c0.x);\n    r1.y = half(c0.y < r0.y);\n    r1.x = fmax(r1.z, r1.x);\n    r1.z = fmax(r1.x, r1.y);\n    r1.x = half(r0.z < c0.x);\n    r1.y = half(c0.y < r0.z);\n    r1.x = fmax(r1.z, r1.x);\n    r1.x = fmax(r1.x, r1.y);\n    r1 = select(r0, c0.yyyy, -r1.xxxx < 0.00000h);\n    r0.xyz = half3(r0.xyz < c0.zzz);\n    r0.x = clamp(dot(r0.xyz, 1.00000h), 0.00000h, 1.00000h);\n    output.color0 = select(float4(r1), float4(c0.yxxy), -float4(r0.xxxx) < 0.00000h);\n    return output;\n}\n//MD5=4c1f3fc4:fa2dabe7:592aa5f7:1ffd7108\n//SIG=00400000:00000001:00000001:00000001:0001:0000:0002:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=000000047a\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const float4 c0 = float4(0.000000000, 1.000000000, -0.5500000119, 0.000000000);\n    float4 r0, r1;\n    FragmentOut output;\n\n    r0 = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r1.y = float(c0.y < r0.x);\n    r1.x = float(r0.x < c0.x);\n    r1.z = fmax(r1.x, r1.y);\n    r1.x = float(r0.y < c0.x);\n    r1.y = float(c0.y < r0.y);\n    r1.x = fmax(r1.z, r1.x);\n    r1.z = fmax(r1.x, r1.y);\n    r1.x = float(r0.z < c0.x);\n    r1.y = float(c0.y < r0.z);\n    r1.x = fmax(r1.z, r1.x);\n    r1.x = fmax(r1.x, r1.y);\n    r1 = select(r0, c0.yyyy, -r1.xxxx < 0.00000f);\n    r0.xyz = float3(r0.xyz < c0.zzz);\n    r0.x = clamp(dot(r0.xyz, 1.00000f), 0.00000f, 1.00000f);\n    output.color0 = select(r1, c0.yxxy, -r0.xxxx < 0.00000f);\n    return output;\n}\n//MD5=e76d530a:353c1e57:61a46793:02f7204a\n//SIG=00000000:00000001:00000001:00000000:0001:0000:0002:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=00000004d6\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    const defaultp vec4 c0 = vec4(0.000000000, 1.000000000, -0.5500000119, 0.000000000);\n    defaultp vec4 r0, r1;\n\n    r0 = texture2D(hg_Texture0, hg_TexCoord0.xy);\n    r1.y = float(c0.y < r0.x);\n    r1.x = float(r0.x < c0.x);\n    r1.z = max(r1.x, r1.y);\n    r1.x = float(r0.y < c0.x);\n    r1.y = float(c0.y < r0.y);\n    r1.x = max(r1.z, r1.x);\n    r1.z = max(r1.x, r1.y);\n    r1.x = float(r0.z < c0.x);\n    r1.y = float(c0.y < r0.z);\n    r1.x = max(r1.z, r1.x);\n    r1.x = max(r1.x, r1.y);\n    r1 = vec4(-r1.x < 0.00000 ? c0.y : r0.x, -r1.x < 0.00000 ? c0.y : r0.y, -r1.x < 0.00000 ? c0.y : r0.z, -r1.x < 0.00000 ? c0.y : r0.w);\n    r0.xyz = vec3(lessThan(r0.xyz, c0.zzz));\n    r0.x = clamp(dot(r0.xyz, vec3(1.00000)), 0.00000, 1.00000);\n    gl_FragColor = vec4(-r0.x < 0.00000 ? c0.y : r1.x, -r0.x < 0.00000 ? c0.x : r1.y, -r0.x < 0.00000 ? c0.x : r1.z, -r0.x < 0.00000 ? c0.y : r1.w);\n}\n//MD5=60e8fc88:1fb00940:828ef5e9:c741a039\n//SIG=00000000:00000001:00000001:00000000:0001:0000:0002:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_2603270AC(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344AF0;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_2603271AC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_2603271EC()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x2603271E4);
}

uint64_t HgcHighlightOutOfGamut::BindTexture(HgcHighlightOutOfGamut *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  (*(*a2 + 72))(a2, 0);
  (*(*a2 + 48))(a2, 0, 0);
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  v5 = (*(**(a2 + 18) + 128))(*(a2 + 18), 46);
  result = 0;
  if (!v5)
  {
    (*(*a2 + 168))(a2);
    return 0;
  }

  return result;
}

uint64_t HgcHighlightOutOfGamut::RenderTile(HgcHighlightOutOfGamut *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 22);
    v8 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v9 = 0;
      }

      else
      {
        v9 = 0;
        v10 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v13 = *(v6 + v10 - 32);
          v12 = *(v6 + v10 - 16);
          v14 = *(v6 + v10);
          v15 = *(v6 + v10 + 16);
          v16 = vrev64q_s32(v13);
          v17 = vrev64q_s32(v12);
          v18 = vrev64q_s32(v14);
          v19 = *(this + 51);
          v20 = *(v19 + 16);
          v21 = vrev64q_s32(v15);
          v22 = *(v19 + 32);
          v23 = *(v19 + 48);
          v24 = vbslq_s8(v22, vandq_s8(v20, vcgtq_f32(*v19, v13)), vandq_s8(*v19, vcgtq_f32(v16, *v19)));
          v25 = vbslq_s8(v22, vandq_s8(v20, vcgtq_f32(*v19, v12)), vandq_s8(*v19, vcgtq_f32(v17, *v19)));
          v26 = vbslq_s8(v22, vandq_s8(v20, vcgtq_f32(*v19, v14)), vandq_s8(*v19, vcgtq_f32(v18, *v19)));
          v27 = vbslq_s8(v22, vandq_s8(v20, vcgtq_f32(*v19, v15)), vandq_s8(*v19, vcgtq_f32(v21, *v19)));
          v16.i64[0] = vandq_s8(v20, vcgtq_f32(*v19, v16)).u64[0];
          v17.i64[0] = vandq_s8(v20, vcgtq_f32(*v19, v17)).u64[0];
          v18.i64[0] = vandq_s8(v20, vcgtq_f32(*v19, v18)).u64[0];
          v16.i64[1] = vmaxq_f32(vextq_s8(v24, v24, 8uLL), vextq_s8(v24, v24, 0xCuLL)).i64[1];
          v17.i64[1] = vmaxq_f32(vextq_s8(v25, v25, 8uLL), vextq_s8(v25, v25, 0xCuLL)).i64[1];
          v18.i64[1] = vmaxq_f32(vextq_s8(v26, v26, 8uLL), vextq_s8(v26, v26, 0xCuLL)).i64[1];
          v21.i64[0] = vandq_s8(v20, vcgtq_f32(*v19, v21)).u64[0];
          v21.i64[1] = vmaxq_f32(vextq_s8(v27, v27, 8uLL), vextq_s8(v27, v27, 0xCuLL)).i64[1];
          v28 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(v13, v20)), v16);
          v29 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(v12, v20)), v17);
          v30 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(v14, v20)), v18);
          v31 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(v15, v20)), v21);
          v32 = vbslq_s8(v22, vmaxq_f32(vextq_s8(v28, v28, 8uLL), v28), v28);
          v33 = vbslq_s8(v22, vmaxq_f32(vextq_s8(v29, v29, 8uLL), v29), v29);
          v34 = vbslq_s8(v22, vmaxq_f32(vextq_s8(v30, v30, 8uLL), v30), v30);
          v35 = vbslq_s8(v22, vmaxq_f32(vextq_s8(v31, v31, 8uLL), v31), v31);
          v36 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(vextq_s8(v13, v13, 4uLL), v20)), vzip2q_s64(vandq_s8(*v19, vcgtq_f32(v20, v13)), vmaxq_f32(vextq_s8(v32, v32, 8uLL), vextq_s8(v32, v32, 0xCuLL))));
          v37 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(vextq_s8(v12, v12, 4uLL), v20)), vzip2q_s64(vandq_s8(*v19, vcgtq_f32(v20, v12)), vmaxq_f32(vextq_s8(v33, v33, 8uLL), vextq_s8(v33, v33, 0xCuLL))));
          v38 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(vextq_s8(v14, v14, 4uLL), v20)), vzip2q_s64(vandq_s8(*v19, vcgtq_f32(v20, v14)), vmaxq_f32(vextq_s8(v34, v34, 8uLL), vextq_s8(v34, v34, 0xCuLL))));
          v39 = vbslq_s8(v23, vandq_s8(v20, vcgtq_f32(vextq_s8(v15, v15, 4uLL), v20)), vzip2q_s64(vandq_s8(*v19, vcgtq_f32(v20, v15)), vmaxq_f32(vextq_s8(v35, v35, 8uLL), vextq_s8(v35, v35, 0xCuLL))));
          v40 = vbslq_s8(v22, vmaxq_f32(vextq_s8(v36, v36, 8uLL), v36), v36).u64[0];
          v37.i64[0] = vbslq_s8(v22, vmaxq_f32(vextq_s8(v37, v37, 8uLL), v37), v37).u64[0];
          v38.i64[0] = vbslq_s8(v22, vmaxq_f32(vextq_s8(v38, v38, 8uLL), v38), v38).u64[0];
          v41 = vdupq_lane_s32(*v37.f32, 1);
          v42 = vdupq_lane_s32(*v37.f32, 0);
          v22.i64[0] = vbslq_s8(v22, vmaxq_f32(vextq_s8(v39, v39, 8uLL), v39), v39).u64[0];
          v43 = vdupq_lane_s32(*v22.i8, 1);
          v44 = vdupq_lane_s32(*v22.i8, 0);
          v45 = vmaxq_f32(vdupq_lane_s32(v40, 0), vdupq_lane_s32(v40, 1));
          v46 = vmaxq_f32(v42, v41);
          v48 = *(v19 + 64);
          v47 = *(v19 + 80);
          v49 = *(v19 + 96);
          v50 = *(v19 + 112);
          v51 = vandq_s8(v48, vcgtq_f32(v49, v13));
          v52 = vmaxq_f32(v44, v43);
          v53 = vandq_s8(v48, vcgtq_f32(v49, v12));
          v54 = vandq_s8(v48, vcgtq_f32(v49, v14));
          v55 = vandq_s8(v48, vcgtq_f32(v49, v15));
          v56 = (v5 + v10);
          v56[-2] = vbslq_s8(vcgtq_f32(vdupq_lane_s32(*&vminq_f32(vmaxq_f32(vaddq_f32(vextq_s8(v51, v51, 8uLL), vaddq_f32(vrev64q_s32(v51), v51)), v47), v48), 0), v47), v50, vbslq_s8(vcgtq_f32(v45, v47), v48, v13));
          v56[-1] = vbslq_s8(vcgtq_f32(vdupq_lane_s32(*&vminq_f32(vmaxq_f32(vaddq_f32(vextq_s8(v53, v53, 8uLL), vaddq_f32(vrev64q_s32(v53), v53)), v47), v48), 0), v47), v50, vbslq_s8(vcgtq_f32(v46, v47), v48, v12));
          *v56 = vbslq_s8(vcgtq_f32(vdupq_lane_s32(*&vminq_f32(vmaxq_f32(vaddq_f32(vextq_s8(v54, v54, 8uLL), vaddq_f32(vrev64q_s32(v54), v54)), v47), v48), 0), v47), v50, vbslq_s8(vcgtq_f32(vmaxq_f32(vdupq_lane_s32(*v38.f32, 0), vdupq_lane_s32(*v38.f32, 1)), v47), v48, v14));
          v56[1] = vbslq_s8(vcgtq_f32(vdupq_lane_s32(*&vminq_f32(vmaxq_f32(vaddq_f32(vextq_s8(v55, v55, 8uLL), vaddq_f32(vrev64q_s32(v55), v55)), v47), v48), 0), v47), v50, vbslq_s8(vcgtq_f32(v52, v47), v48, v15));
          v9 += 4;
          v10 += 64;
        }
      }

      if (v9 < v4)
      {
        do
        {
          v57 = *(v6 + 16 * v9);
          v58 = vrev64q_s32(v57);
          v59 = *(this + 51);
          v60 = *(v59 + 16);
          v61 = *(v59 + 32);
          v62 = *(v59 + 48);
          v63 = vbslq_s8(v61, vandq_s8(v60, vcgtq_f32(*v59, v57)), vandq_s8(*v59, vcgtq_f32(v58, *v59)));
          v58.i64[0] = vandq_s8(v60, vcgtq_f32(*v59, v58)).u64[0];
          v58.i64[1] = vmaxq_f32(vextq_s8(v63, v63, 8uLL), vextq_s8(v63, v63, 0xCuLL)).i64[1];
          v64 = vbslq_s8(v62, vandq_s8(v60, vcgtq_f32(v57, v60)), v58);
          v65 = vbslq_s8(v61, vmaxq_f32(vextq_s8(v64, v64, 8uLL), v64), v64);
          v66 = vbslq_s8(v62, vandq_s8(v60, vcgtq_f32(vextq_s8(v57, v57, 4uLL), v60)), vzip2q_s64(vandq_s8(*v59, vcgtq_f32(v60, v57)), vmaxq_f32(vextq_s8(v65, v65, 8uLL), vextq_s8(v65, v65, 0xCuLL))));
          v66.i64[0] = vbslq_s8(v61, vmaxq_f32(vextq_s8(v66, v66, 8uLL), v66), v66).u64[0];
          v68 = *(v59 + 64);
          v67 = *(v59 + 80);
          v69 = vbslq_s8(vcgtq_f32(vmaxq_f32(vdupq_lane_s32(*v66.f32, 0), vdupq_lane_s32(*v66.f32, 1)), v67), v68, v57);
          v70 = vandq_s8(v68, vcgtq_f32(*(v59 + 96), v57));
          *(v5 + 16 * v9++) = vbslq_s8(vcgtq_f32(vdupq_lane_s32(*&vminq_f32(vmaxq_f32(vaddq_f32(vextq_s8(v70, v70, 8uLL), vaddq_f32(vrev64q_s32(v70), v70)), v67), v68), 0), v67), *(v59 + 112), v69);
        }

        while (v9 < v4);
      }

      ++v3;
      v6 += v7;
      v5 += v8;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcHighlightOutOfGamut::GetDOD(HgcHighlightOutOfGamut *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcHighlightOutOfGamut::GetROI(HgcHighlightOutOfGamut *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcHighlightOutOfGamut::HgcHighlightOutOfGamut(HgcHighlightOutOfGamut *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872E1020;
  operator new();
}

void HgcHighlightOutOfGamut::~HgcHighlightOutOfGamut(HGNode *this)
{
  *this = &unk_2872E1020;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40AE2C30F4);
  }

  HGNode::~HGNode(this);
}

{
  HgcHighlightOutOfGamut::~HgcHighlightOutOfGamut(this);

  HGObject::operator delete(v1);
}

const char *HgcExposureAdjust::GetProgram(HgcExposureAdjust *this, HGRenderer *a2)
{
  Target = HGRenderer::GetTarget(a2, 393216);
  if (Target == 396048)
  {
    if ((*(*a2 + 128))(a2, 20) == 27)
    {
      return "//Metal1.0     \n//LEN=00000002b3\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< half > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const half4 c0 = half4(1.000000000, 0.000000000, 0.000000000, 0.000000000);\n    half4 r0;\n    FragmentOut output;\n\n    r0 = (half4) hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r0 = r0 + half4(hg_Params[0]);\n    output.color0 = fmin(float4(r0), float4(c0.xxxx));\n    return output;\n}\n//MD5=eb9df7c6:30dd8f51:acaefc17:02e6ae8c\n//SIG=00400000:00000001:00000001:00000001:0001:0001:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }

    else
    {
      return "//Metal1.0     \n//LEN=0000000298\nfragment FragmentOut fragmentFunc(VertexInOut frag [[ stage_in ]], \n    const constant float4* hg_Params [[ buffer(0) ]], \n    texture2d< float > hg_Texture0 [[ texture(0) ]], \n    sampler hg_Sampler0 [[ sampler(0) ]])\n{\n    const float4 c0 = float4(1.000000000, 0.000000000, 0.000000000, 0.000000000);\n    float4 r0;\n    FragmentOut output;\n\n    r0 = hg_Texture0.sample(hg_Sampler0, frag._texCoord0.xy);\n    r0 = r0 + hg_Params[0];\n    output.color0 = fmin(r0, c0.xxxx);\n    return output;\n}\n//MD5=9f403330:a5ffee84:f6c5632e:85d2d683\n//SIG=00000000:00000001:00000001:00000000:0001:0001:0001:0000:0000:0000:0002:0000:0001:01:0:1:0\n";
    }
  }

  else if (Target <= 0x6060F || (*(*a2 + 128))(a2, 46))
  {
    return 0;
  }

  else
  {
    return "//GLfs2.0      \n//LEN=000000026a\n#ifndef GL_ES\n#define lowp\n#define mediump\n#define highp\n#endif\n#define defaultp mediump\nuniform defaultp sampler2D hg_Texture0;\nuniform defaultp vec4 hg_ProgramLocal0;\nvarying highp vec4 hg_TexCoord0;\nvoid main()\n{\n    const defaultp vec4 c0 = vec4(1.000000000, 0.000000000, 0.000000000, 0.000000000);\n    defaultp vec4 r0;\n\n    r0 = texture2D(hg_Texture0, hg_TexCoord0.xy);\n    r0 = r0 + hg_ProgramLocal0;\n    gl_FragColor = min(r0, c0.xxxx);\n}\n//MD5=388f355f:a6d62e01:ca926981:5f521d43\n//SIG=00000000:00000001:00000001:00000000:0001:0001:0001:0000:0000:0000:0000:0000:0001:01:0:1:0\n";
  }
}

void sub_260327AAC(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, __int128 a9, uint64_t a10, uint64_t a11, void *__p, uint64_t a13, int a14, __int16 a15, char a16, char a17, __int128 a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31)
{
  *(v32 - 64) = 4;
  std::string::basic_string[abi:ne200100]<0>((v32 - 56), "FragmentOut");
  *(v32 - 32) = xmmword_260343E00;
  HGProgramDescriptor::SetReturnBinding(v31, v32 - 64);
  if (*(v32 - 33) < 0)
  {
    operator delete(*(v32 - 56));
  }

  memset(v37, 0, 24);
  LODWORD(v33) = 2;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260344A80;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  LODWORD(v33) = 10;
  std::string::basic_string[abi:ne200100]<0>(v34, "float4");
  v36 = xmmword_260343E00;
  std::vector<HGBinding>::push_back[abi:ne200100](v37, &v33);
  if (v35 < 0)
  {
    operator delete(v34[0]);
  }

  HGProgramDescriptor::SetArgumentBindings(v31, v37);
  v33 = v37;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&v33);
}

void sub_260327BAC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, char *a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18, uint64_t a19, uint64_t a20, char a21)
{
  a12 = &a21;
  std::vector<HGBinding>::__destroy_vector::operator()[abi:ne200100](&a12);
  _Unwind_Resume(a1);
}

void sub_260327BEC()
{
  if (*(v0 - 33) < 0)
  {
    operator delete(*(v0 - 56));
  }

  JUMPOUT(0x260327BE4);
}

uint64_t HgcExposureAdjust::BindTexture(HgcExposureAdjust *this, HGHandler *a2, int a3)
{
  if (a3)
  {
    return 0xFFFFFFFFLL;
  }

  (*(*a2 + 72))(a2, 0);
  (*(*a2 + 48))(a2, 0, 0);
  HGHandler::TexCoord(a2, 0, 0, 0, 0);
  v5 = (*(**(a2 + 18) + 128))(*(a2 + 18), 46);
  result = 0;
  if (!v5)
  {
    (*(*a2 + 168))(a2);
    return 0;
  }

  return result;
}

uint64_t HgcExposureAdjust::Bind(HgcExposureAdjust *this, HGHandler *a2)
{
  (*(*a2 + 144))(a2, 0, *(this + 51), 1);
  (*(*this + 192))(this, a2);
  return 0;
}

uint64_t HgcExposureAdjust::RenderTile(HgcExposureAdjust *this, HGTile *a2)
{
  v2 = *(a2 + 3) - *(a2 + 1);
  if (v2 >= 1)
  {
    v3 = 0;
    v4 = *(a2 + 2) - *a2;
    v5 = *(a2 + 2);
    v6 = *(a2 + 10);
    v7 = 16 * *(a2 + 22);
    v8 = 16 * *(a2 + 6);
    do
    {
      if (v4 < 4)
      {
        v9 = 0;
      }

      else
      {
        v9 = 0;
        v10 = 32;
        for (i = v4; i > 3; i -= 4)
        {
          v12 = *(this + 51);
          v13 = v12[1];
          v14 = vminq_f32(vaddq_f32(*(v6 + v10 - 32), *v12), v13);
          v15 = vminq_f32(vaddq_f32(*(v6 + v10 - 16), *v12), v13);
          v16 = vminq_f32(vaddq_f32(*(v6 + v10), *v12), v13);
          v17 = vminq_f32(vaddq_f32(*(v6 + v10 + 16), *v12), v13);
          v18 = (v5 + v10);
          v18[-2] = v14;
          v18[-1] = v15;
          *v18 = v16;
          v18[1] = v17;
          v9 += 4;
          v10 += 64;
        }
      }

      if (v9 < v4)
      {
        do
        {
          *(v5 + 16 * v9) = vminq_f32(vaddq_f32(*(v6 + 16 * v9), **(this + 51)), *(*(this + 51) + 16));
          ++v9;
        }

        while (v9 < v4);
      }

      ++v3;
      v6 += v7;
      v5 += v8;
    }

    while (v3 != v2);
  }

  return 0;
}

uint64_t HgcExposureAdjust::GetDOD(HgcExposureAdjust *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

uint64_t HgcExposureAdjust::GetROI(HgcExposureAdjust *this, HGRenderer *a2, int a3, HGRect a4)
{
  if (a3)
  {
    return 0;
  }

  else
  {
    return *&a4.var0;
  }
}

void HgcExposureAdjust::HgcExposureAdjust(HgcExposureAdjust *this)
{
  HGNode::HGNode(this);
  *v1 = &unk_2872E1288;
  operator new();
}

void HgcExposureAdjust::~HgcExposureAdjust(HGNode *this)
{
  *this = &unk_2872E1288;
  v2 = *(this + 51);
  if (v2)
  {
    MEMORY[0x2666E9F00](v2, 0x1000C40EED21634);
  }

  HGNode::~HGNode(this);
}

{
  HgcExposureAdjust::~HgcExposureAdjust(this);

  HGObject::operator delete(v1);
}

uint64_t HgcExposureAdjust::SetParameter(HgcExposureAdjust *this, uint64_t a2, __n128 a3, float a4, float a5, float a6, char *a7)
{
  if (a2)
  {
    return 0xFFFFFFFFLL;
  }

  v8 = *(this + 51);
  if (v8->n128_f32[0] == a3.n128_f32[0] && v8->n128_f32[1] == a3.n128_f32[0] && v8->n128_f32[2] == a3.n128_f32[0] && v8->n128_f32[3] == a3.n128_f32[0])
  {
    return 0;
  }

  v9 = vdupq_lane_s32(a3.n128_u64[0], 0);
  a3.n128_f32[1] = a4;
  *v8 = v9;
  a3.n128_u64[1] = __PAIR64__(LODWORD(a6), LODWORD(a5));
  v8[2] = a3;
  HGNode::ClearBits(this, a2, a7);
  return 1;
}

float HgcExposureAdjust::GetParameter(HgcExposureAdjust *this, int a2, float *a3)
{
  if (!a2)
  {
    v3 = *(this + 51);
    *a3 = v3[8];
    a3[1] = v3[9];
    a3[2] = v3[10];
    result = v3[11];
    a3[3] = result;
  }

  return result;
}

void PVMaximumCVPixelBufferSize()
{
  if (__cxa_guard_acquire(&qword_280C5CC08))
  {
    _MergedGlobals_2 = PVMaximumCVPixelBufferSize(void)::$_0::operator()();

    __cxa_guard_release(&qword_280C5CC08);
  }
}

void PVAddColorSpaceAttributesToCVPixelBuffer()
{
  if (__cxa_guard_acquire(&qword_280C5CC18))
  {
    __cxa_atexit(std::unique_ptr<PVGCDLock>::~unique_ptr[abi:ne200100], &qword_280C5CC10, &dword_25F8F0000);

    __cxa_guard_release(&qword_280C5CC18);
  }
}

{
  if (__cxa_guard_acquire(&qword_280C5CC20))
  {
    qword_280C5CC38 = 0;
    qword_280C5CC30 = 0;
    qword_280C5CC28 = &qword_280C5CC30;
    __cxa_atexit(std::map<unsigned int,BOOL>::~map[abi:ne200100], &qword_280C5CC28, &dword_25F8F0000);

    __cxa_guard_release(&qword_280C5CC20);
  }
}

{
  dispatch_once(&PVPixelFormatIsYCbCr::onceToken, &__block_literal_global_22);
}

void PVThermalLevelEntry()
{
  if (__cxa_guard_acquire(&_MergedGlobals_3))
  {
    qword_280C5CC58 = 0;
    qword_280C5CC50 = 0;
    qword_280C5CC48 = &qword_280C5CC50;
    __cxa_atexit(std::map<PVSPI_OSThermalPressureLevel,PVSPI_OSThermalPressureLevel_Entry>::~map[abi:ne200100], &qword_280C5CC48, &dword_25F8F0000);

    __cxa_guard_release(&_MergedGlobals_3);
  }
}

{
  dispatch_once(&PVThermalLevelEntry(PVSPI_OSThermalPressureLevel)::onceToken, &__block_literal_global_81);
}

void PVInstructionGraphContext::BeginDotGraph()
{
  if (__cxa_guard_acquire(&_MergedGlobals_4))
  {
    *&byte_280C5CC68[8] = 0;
    *&byte_280C5CC68[16] = 0;
    *byte_280C5CC68 = 0;
    __cxa_atexit(MEMORY[0x277D82640], byte_280C5CC68, &dword_25F8F0000);

    __cxa_guard_release(&_MergedGlobals_4);
  }
}

{
  dispatch_once(&PVInstructionGraphContext::BeginDotGraph(void)::onceToken, &__block_literal_global_10);
}

void PVRenderManager::INSTANCE()
{
  if (__cxa_guard_acquire(&qword_280C5CC88))
  {
    _MergedGlobals_5 = 0;
    __cxa_atexit(HGRef<PVRenderManager>::~HGRef, &_MergedGlobals_5, &dword_25F8F0000);

    __cxa_guard_release(&qword_280C5CC88);
  }
}

{
  dispatch_once(&PVRenderManager::INSTANCE(void)::onceToken, &__block_literal_global_11);
}

CAFrameRateRange CAFrameRateRangeMake(float minimum, float maximum, float preferred)
{
  MEMORY[0x282128850](minimum, maximum, preferred);
  result.preferred = v5;
  result.maximum = v4;
  result.minimum = v3;
  return result;
}

CFRange CFStringFind(CFStringRef theString, CFStringRef stringToFind, CFStringCompareFlags compareOptions)
{
  v3 = MEMORY[0x28210FD68](theString, stringToFind, compareOptions);
  result.length = v4;
  result.location = v3;
  return result;
}

CFRange CFStringGetRangeOfComposedCharactersAtIndex(CFStringRef theString, CFIndex theIndex)
{
  v2 = MEMORY[0x28210FE18](theString, theIndex);
  result.length = v3;
  result.location = v2;
  return result;
}

CFRange CFStringTokenizerGetCurrentTokenRange(CFStringTokenizerRef tokenizer)
{
  v1 = MEMORY[0x28210FEB8](tokenizer);
  result.length = v2;
  result.location = v1;
  return result;
}

CGPoint CGPointFromString(NSString *string)
{
  MEMORY[0x2821DE300](string);
  result.y = v2;
  result.x = v1;
  return result;
}

CGRect CGRectApplyAffineTransform(CGRect rect, CGAffineTransform *t)
{
  MEMORY[0x282111558](t, rect.origin, *&rect.origin.y, rect.size, *&rect.size.height);
  result.size.height = v5;
  result.size.width = v4;
  result.origin.y = v3;
  result.origin.x = v2;
  return result;
}

CGRect CGRectInset(CGRect rect, CGFloat dx, CGFloat dy)
{
  MEMORY[0x2821115C8](rect.origin, *&rect.origin.y, rect.size, *&rect.size.height, dx, dy);
  result.size.height = v6;
  result.size.width = v5;
  result.origin.y = v4;
  result.origin.x = v3;
  return result;
}

CGRect CGRectIntegral(CGRect rect)
{
  MEMORY[0x2821115D0](rect.origin, *&rect.origin.y, rect.size, *&rect.size.height);
  result.size.height = v4;
  result.size.width = v3;
  result.origin.y = v2;
  result.origin.x = v1;
  return result;
}

CGRect CGRectIntersection(CGRect r1, CGRect r2)
{
  MEMORY[0x2821115D8](r1.origin, *&r1.origin.y, r1.size, *&r1.size.height, r2.origin, *&r2.origin.y, r2.size, *&r2.size.height);
  result.size.height = v5;
  result.size.width = v4;
  result.origin.y = v3;
  result.origin.x = v2;
  return result;
}

CGRect CGRectUnion(CGRect r1, CGRect r2)
{
  MEMORY[0x282111618](r1.origin, *&r1.origin.y, r1.size, *&r1.size.height, r2.origin, *&r2.origin.y, r2.size, *&r2.size.height);
  result.size.height = v5;
  result.size.width = v4;
  result.origin.y = v3;
  result.origin.x = v2;
  return result;
}

CGRect CTFontGetBoundingRectsForGlyphs(CTFontRef font, CTFontOrientation orientation, const CGGlyph *glyphs, CGRect *boundingRects, CFIndex count)
{
  MEMORY[0x282114780](font, *&orientation, glyphs, boundingRects, count);
  result.size.height = v8;
  result.size.width = v7;
  result.origin.y = v6;
  result.origin.x = v5;
  return result;
}

CFRange CTLineGetStringRange(CTLineRef line)
{
  v1 = MEMORY[0x282114948](line);
  result.length = v2;
  result.location = v1;
  return result;
}

CFRange CTRunGetStringRange(CTRunRef run)
{
  v1 = MEMORY[0x2821149E8](run);
  result.length = v2;
  result.location = v1;
  return result;
}

ColorSyncMD5 ColorSyncProfileGetMD5(ColorSyncProfileRef prof)
{
  v1 = MEMORY[0x28210E468](prof);
  *&result.digest[8] = v2;
  *result.digest = v1;
  return result;
}

uint64_t std::stringbuf::str()
{
  return MEMORY[0x2821F73C8]();
}

{
  return MEMORY[0x2821F7A08]();
}

uint64_t std::ostream::operator<<()
{
  return MEMORY[0x2821F78D0]();
}

{
  return MEMORY[0x2821F78E0]();
}

{
  return MEMORY[0x2821F78E8]();
}

{
  return MEMORY[0x2821F78F8]();
}

{
  return MEMORY[0x2821F7900]();
}

{
  return MEMORY[0x2821F7908]();
}

{
  return MEMORY[0x2821F7910]();
}

{
  return MEMORY[0x2821F7918]();
}

{
  return MEMORY[0x2821F7930]();
}

{
  return MEMORY[0x2821F7938]();
}

std::string *__cdecl std::to_string(std::string *__return_ptr retstr, unint64_t __val)
{
  return MEMORY[0x2821F7F28](retstr, __val);
}

{
  return MEMORY[0x2821F7F38](retstr, __val);
}

void operator delete[]()
{
    ;
  }
}

void operator delete(void *__p)
{
    ;
  }
}

void operator delete(void *__p, const std::nothrow_t *a2)
{
    ;
  }
}

void operator delete()
{
    ;
  }
}

void operator new[]()
{
    ;
  }
}

void *__cdecl operator new(size_t __sz)
{
    ;
  }
}

void *__cdecl operator new(size_t __sz, const std::nothrow_t *a2)
{
    ;
  }
}

void operator new()
{
    ;
  }
}

simd_float3x3 __invert_f3(simd_float3x3 a1)
{
  MEMORY[0x2822043A0](a1.columns[0], a1.columns[1], a1.columns[2]);
  result.columns[2].i64[1] = v6;
  result.columns[2].i64[0] = v5;
  result.columns[1].i64[1] = v4;
  result.columns[1].i64[0] = v3;
  result.columns[0].i64[1] = v2;
  result.columns[0].i64[0] = v1;
  return result;
}

simd_float4x4 __invert_f4(simd_float4x4 a1)
{
  MEMORY[0x2822043A8](a1.columns[0], a1.columns[1], a1.columns[2], a1.columns[3]);
  result.columns[3].i64[1] = v8;
  result.columns[3].i64[0] = v7;
  result.columns[2].i64[1] = v6;
  result.columns[2].i64[0] = v5;
  result.columns[1].i64[1] = v4;
  result.columns[1].i64[0] = v3;
  result.columns[0].i64[1] = v2;
  result.columns[0].i64[0] = v1;
  return result;
}

__double2 __sincos_stret(double a1)
{
  MEMORY[0x2822043C0](a1);
  result.__cosval = v2;
  result.__sinval = v1;
  return result;
}

__float2 __sincosf_stret(float a1)
{
  MEMORY[0x2822043C8](a1);
  result.__cosval = v2;
  result.__sinval = v1;
  return result;
}

objc_method_description protocol_getMethodDescription(Protocol *p, SEL aSel, BOOL isRequiredMethod, BOOL isInstanceMethod)
{
  v4 = MEMORY[0x2821F9A68](p, aSel, isRequiredMethod, isInstanceMethod);
  result.types = v5;
  result.name = v4;
  return result;
}