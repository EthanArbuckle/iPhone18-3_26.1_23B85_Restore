void sub_2601B0DBC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, OZChannel *a10, OZChannel *a11, OZChannel *a12)
{
  OZChannelRotation3D::~OZChannelRotation3D((v12 + v20));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + v15));
  OZChannelFolder::~OZChannelFolder((v12 + v18));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + v13));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + v19));
  OZChannelFolder::~OZChannelFolder((v12 + v16));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 50552));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 49664));
  OZChannelFolder::~OZChannelFolder((v12 + v14));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 48680));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 47792));
  OZChannelFolder::~OZChannelFolder((v12 + v17));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 46808));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 45920));
  OZChannelFolder::~OZChannelFolder((v12 + 45792));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 44936));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 44048));
  OZChannelFolder::~OZChannelFolder((v12 + 43920));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 43064));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 42176));
  OZChannelFolder::~OZChannelFolder((v12 + 42048));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 41192));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 40304));
  OZChannelFolder::~OZChannelFolder((v12 + 40176));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 39320));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 38432));
  OZChannelFolder::~OZChannelFolder((v12 + 38304));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 37448));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 36560));
  OZChannelFolder::~OZChannelFolder((v12 + 36432));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 35576));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 34688));
  OZChannelFolder::~OZChannelFolder((v12 + 34560));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 33704));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 32816));
  OZChannelFolder::~OZChannelFolder((v12 + 32688));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 31832));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 30944));
  OZChannelFolder::~OZChannelFolder((v12 + 30816));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 29960));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 29072));
  OZChannelFolder::~OZChannelFolder((v12 + 28944));
  OZChannelRotation3D::~OZChannelRotation3D((v12 + 28088));
  OZChannelPosition3D::~OZChannelPosition3D((v12 + 27200));
  OZChannelFolder::~OZChannelFolder((v12 + 27072));
  OZChannelFolder::~OZChannelFolder((v12 + 26944));
  OZChannelPercent::~OZChannelPercent((v12 + 26792));
  OZChannel::~OZChannel(a10);
  OZChannelFolder::~OZChannelFolder((v12 + 26512));
  OZChannel::~OZChannel(a11);
  OZChannel2D::~OZChannel2D((v12 + 25920));
  OZChannel2D::~OZChannel2D((v12 + 25480));
  OZChannel2D::~OZChannel2D((v12 + 25040));
  OZChannelBool::~OZChannelBool((v12 + 24888));
  OZChannel::~OZChannel(a12);
  OZChannelFolder::~OZChannelFolder((v12 + 24608));
  Li3DEngineScene::~Li3DEngineScene((v12 + 24424));
  OZARAnchorElement::~OZARAnchorElement(v12);
  _Unwind_Resume(a1);
}

void OZARPersonAnchorElement::~OZARPersonAnchorElement(OZARPersonAnchorElement *this)
{
  *this = &unk_28729D5B8;
  *(this + 2) = &unk_28729DEF0;
  *(this + 6) = &unk_28729E148;
  *(this + 816) = &unk_28729E1A0;

  OZChannelRotation3D::~OZChannelRotation3D((this + 54296));
  OZChannelPosition3D::~OZChannelPosition3D((this + 53408));
  OZChannelFolder::~OZChannelFolder((this + 53280));
  OZChannelRotation3D::~OZChannelRotation3D((this + 52424));
  OZChannelPosition3D::~OZChannelPosition3D((this + 51536));
  OZChannelFolder::~OZChannelFolder((this + 51408));
  OZChannelRotation3D::~OZChannelRotation3D((this + 50552));
  OZChannelPosition3D::~OZChannelPosition3D((this + 49664));
  OZChannelFolder::~OZChannelFolder((this + 49536));
  OZChannelRotation3D::~OZChannelRotation3D((this + 48680));
  OZChannelPosition3D::~OZChannelPosition3D((this + 47792));
  OZChannelFolder::~OZChannelFolder((this + 47664));
  OZChannelRotation3D::~OZChannelRotation3D((this + 46808));
  OZChannelPosition3D::~OZChannelPosition3D((this + 45920));
  OZChannelFolder::~OZChannelFolder((this + 45792));
  OZChannelRotation3D::~OZChannelRotation3D((this + 44936));
  OZChannelPosition3D::~OZChannelPosition3D((this + 44048));
  OZChannelFolder::~OZChannelFolder((this + 43920));
  OZChannelRotation3D::~OZChannelRotation3D((this + 43064));
  OZChannelPosition3D::~OZChannelPosition3D((this + 42176));
  OZChannelFolder::~OZChannelFolder((this + 42048));
  OZChannelRotation3D::~OZChannelRotation3D((this + 41192));
  OZChannelPosition3D::~OZChannelPosition3D((this + 40304));
  OZChannelFolder::~OZChannelFolder((this + 40176));
  OZChannelRotation3D::~OZChannelRotation3D((this + 39320));
  OZChannelPosition3D::~OZChannelPosition3D((this + 38432));
  OZChannelFolder::~OZChannelFolder((this + 38304));
  OZChannelRotation3D::~OZChannelRotation3D((this + 37448));
  OZChannelPosition3D::~OZChannelPosition3D((this + 36560));
  OZChannelFolder::~OZChannelFolder((this + 36432));
  OZChannelRotation3D::~OZChannelRotation3D((this + 35576));
  OZChannelPosition3D::~OZChannelPosition3D((this + 34688));
  OZChannelFolder::~OZChannelFolder((this + 34560));
  OZChannelRotation3D::~OZChannelRotation3D((this + 33704));
  OZChannelPosition3D::~OZChannelPosition3D((this + 32816));
  OZChannelFolder::~OZChannelFolder((this + 32688));
  OZChannelRotation3D::~OZChannelRotation3D((this + 31832));
  OZChannelPosition3D::~OZChannelPosition3D((this + 30944));
  OZChannelFolder::~OZChannelFolder((this + 30816));
  OZChannelRotation3D::~OZChannelRotation3D((this + 29960));
  OZChannelPosition3D::~OZChannelPosition3D((this + 29072));
  OZChannelFolder::~OZChannelFolder((this + 28944));
  OZChannelRotation3D::~OZChannelRotation3D((this + 28088));
  OZChannelPosition3D::~OZChannelPosition3D((this + 27200));
  OZChannelFolder::~OZChannelFolder((this + 27072));
  OZChannelFolder::~OZChannelFolder((this + 26944));
  OZChannelPercent::~OZChannelPercent((this + 26792));
  OZChannel::~OZChannel((this + 26640));
  OZChannelFolder::~OZChannelFolder((this + 26512));
  OZChannel::~OZChannel((this + 26360));
  OZChannel2D::~OZChannel2D((this + 25920));
  OZChannel2D::~OZChannel2D((this + 25480));
  OZChannel2D::~OZChannel2D((this + 25040));
  OZChannelBool::~OZChannelBool((this + 24888));
  OZChannel::~OZChannel((this + 24736));
  OZChannelFolder::~OZChannelFolder((this + 24608));
  std::__tree<std::__value_type<SCNParticleSystem *,PCPtr<LiParticleParameters>>,std::__map_value_compare<SCNParticleSystem *,std::__value_type<SCNParticleSystem *,PCPtr<LiParticleParameters>>,std::less<SCNParticleSystem *>,true>,std::allocator<std::__value_type<SCNParticleSystem *,PCPtr<LiParticleParameters>>>>::destroy(this + 24568, *(this + 3072));
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 24544, *(this + 3069));
  ProCore_Impl::PCNSRefImpl::release(this + 3067);
  std::__tree<std::__value_type<unsigned long long,PCNSRef<SCNRenderer *>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,PCNSRef<SCNRenderer *>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,PCNSRef<SCNRenderer *>>>>::destroy(this + 24504, *(this + 3064));
  ProCore_Impl::PCNSRefImpl::release(this + 3061);
  std::recursive_mutex::~recursive_mutex((this + 24424));

  OZARAnchorElement::~OZARAnchorElement(this);
}

{
  OZARPersonAnchorElement::~OZARPersonAnchorElement(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZARPersonAnchorElement::~OZARPersonAnchorElement(OZARPersonAnchorElement *this)
{
  OZARPersonAnchorElement::~OZARPersonAnchorElement((this - 16));
}

{
  OZARPersonAnchorElement::~OZARPersonAnchorElement((this - 48));
}

{
  OZARPersonAnchorElement::~OZARPersonAnchorElement((this - 6528));
}

{
  OZARPersonAnchorElement::~OZARPersonAnchorElement((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZARPersonAnchorElement::~OZARPersonAnchorElement((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZARPersonAnchorElement::~OZARPersonAnchorElement((this - 6528));

  JUMPOUT(0x2666E9F00);
}

uint64_t OZARPersonAnchorElement::parseEnd(OZARPersonAnchorElement *this, PCSerializerReadStream *a2)
{
  v3 = OZ3DEngineSceneElement::parseEnd(this, a2);
  OZChannelBase::setFlag((this + 26944), 4259872, 0);
  return v3;
}

uint64_t non-virtual thunk toOZARPersonAnchorElement::parseEnd(OZARPersonAnchorElement *this, PCSerializerReadStream *a2)
{
  v3 = OZ3DEngineSceneElement::parseEnd((this - 48), a2);
  OZChannelBase::setFlag((this + 26896), 4259872, 0);
  return v3;
}

uint64_t OZARPersonAnchorElement::didAddToScene(OZTransformNode *this, OZScene *a2)
{
  OZ3DEngineSceneElement::didAddToScene(this, a2);
  v3 = (*(*this + 2288))(this);
  v4 = [MEMORY[0x277CCACA8] stringWithFormat:@"%u", *(this + 20)];

  return [v3 setName:v4];
}

double OZARPersonAnchorElement::getLocalVolume(uint64_t a1, uint64_t a2, CMTime *a3)
{
  if (a2)
  {
    OZChannel::getValueAsDouble((a1 + 26056), a3, 0.0);
    v9 = v6;
    OZChannel::getValueAsDouble((a1 + 26208), a3, 0.0);
    *a2 = vmulq_n_f64(xmmword_260852E50, v9);
    *(a2 + 16) = vmulq_n_f64(xmmword_260852E50, v7);
    result = -250.0;
    *(a2 + 32) = xmmword_260852E60;
  }

  return result;
}

uint64_t OZARPersonAnchorElement::get3DScene(OZARPersonAnchorElement *this)
{
  if (!*(this + 3074))
  {
    v2 = objc_opt_new();
    *(this + 3074) = v2;
    Li3DEngineScene::set((this + 24424), v2);
  }

  return this + 24424;
}

uint64_t OZARPersonAnchorElement::get3DNode(id *this)
{
  v2 = (*(*this + 292))(this);
  if (!v2)
  {
    return 0;
  }

  v3 = v2;
  std::recursive_mutex::lock(v2);
  v4 = [this[3075] getRootNode];
  std::recursive_mutex::unlock(v3);
  return v4;
}

uint64_t OZARPersonAnchorElement::setIsPersonInScene(OZARPersonAnchorElement *this, const CMTime *a2, int a3)
{
  v3 = 0.0;
  if (a3)
  {
    v3 = 1.0;
  }

  return OZChannel::setValue((this + 26360), a2, v3, 0);
}

void OZARPersonAnchorElement::applyARDataFromScene(OZARPersonAnchorElement *this, CMTime *a2)
{
  if ((*(*this + 272))(this))
  {
    v15 = *a2;
    v4 = OZChannel::getValueAsInt((this + 24888), &v15, 0.0) != 0;
    OZChannel::getValueAsDouble((this + 26640), &v15, 0.0);
    v6 = v5;
    OZChannel::getValueAsDouble((this + 26792), &v15, 0.0);
    v8 = v7;
    [*(this + 3075) enablePhysics:v4];
    *&v9 = v6;
    [*(this + 3075) setMass:v9];
    *&v10 = v8;
    [*(this + 3075) setFriction:v10];
    OZElement::getOpacity(this, &v15, 0);
    *&v11 = v11;
    [*(this + 3075) setOpacity:v11];
    v12 = (*(*this + 2336))(this);
    if (v12)
    {
      v13 = v12;
      std::recursive_mutex::lock(v12);
      OZChannel::getValueAsDouble((this + 26056), &v15, 0.0);
      OZChannel::getValueAsDouble((this + 26208), &v15, 0.0);
      *&v14 = v14;
      [*(this + 3075) updateSimpleGeometry:v14];
      std::recursive_mutex::unlock(v13);
    }
  }
}

uint64_t OZARPersonAnchorElement::getTransformFolder(OZARPersonAnchorElement *this, int a2)
{
  if ((a2 - 1) > 0xF)
  {
    v2 = 26944;
  }

  else
  {
    v2 = qword_260852EA8[a2 - 1];
  }

  return this + v2;
}

uint64_t OZARPersonAnchorElement::setTransform(OZARPersonAnchorElement *a1, const CMTime *a2, __int128 *a3, int a4)
{
  TransformFolder = OZARPersonAnchorElement::getTransformFolder(a1, a4);
  v7 = *(TransformFolder + 24);
  Descendant = OZChannelFolder::getDescendant(TransformFolder, v7 + 1);
  if (Descendant)
  {
  }

  else
  {
    v9 = 0;
  }

  v10 = OZChannelFolder::getDescendant(TransformFolder, v7 + 2);
  if (v10)
  {
  }

  else
  {
    v11 = 0;
  }

  memset(v18, 0, sizeof(v18));
  v19 = 4;
  v20 = 0u;
  v21 = 0u;
  v22 = 0;
  PCMatrix44Tmpl<double>::getTransformation(a3, v18);
  OZChannelPosition3D::setValue(v9, a2, *v18, *(v18 + 1), *&v18[1]);
  v12.n128_u64[0] = v20;
  v14 = v11[17];
  v13 = (v11 + 17);
  (*(v14 + 712))(v13, a2, 0, v12);
  v15.n128_u64[0] = *(&v20 + 1);
  (*(*(v13 + 19) + 712))(v13 + 152, a2, 0, v15);
  v16.n128_u64[0] = v21;
  return (*(*(v13 + 38) + 712))(v13 + 304, a2, 0, v16);
}

uint64_t OZARPersonAnchorElement::setBoundingBox(void *a1, uint64_t a2, uint64_t a3)
{
  (*(a1[3202] + 712))(*(a2 + 16));
  v6.n128_u64[0] = *(a2 + 24);
  (*(a1[3221] + 712))(a1 + 3221, a3, 0, v6);
  v7.n128_u64[0] = *a2;
  (*(a1[3147] + 712))(a1 + 3147, a3, 0, v7);
  v8.n128_u64[0] = *(a2 + 8);
  v9 = *(a1[3166] + 712);

  return v9(a1 + 3166, a3, 0, v8);
}

uint64_t OZARPersonAnchorElement::setSize(uint64_t a1, uint64_t a2, uint64_t a3)
{
  (*(*(a1 + 26056) + 712))(*a2);
  v6.n128_u64[0] = *(a2 + 8);
  v7 = *(*(a1 + 26208) + 712);

  return v7(a1 + 26208, a3, 0, v6);
}

uint64_t OZHostApplicationDelegateHandler::wantsExtraLineSpacingForDiacritics(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsExtraLineSpacingForDiacritics];
}

uint64_t OZHostApplicationDelegateHandler::wantsDynamicLineSpacingForDiacritics(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsDynamicLineSpacingForDiacritics];
}

uint64_t OZHostApplicationDelegateHandler::wantsToScaleEmojiToCapHeight(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToScaleEmojiToCapHeight];
}

uint64_t OZHostApplicationDelegateHandler::wantsToSkipSuggestedLineBreaksInParagraphLayout(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToSkipSuggestedLineBreaksInParagraphLayout];
}

uint64_t OZHostApplicationDelegateHandler::wantsToUseBinarySearchForScalingToBothMargins(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToUseBinarySearchForScalingToBothMargins];
}

uint64_t OZHostApplicationDelegateHandler::wantsToLimitLinesOfText(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToLimitLinesOfText];
}

uint64_t OZHostApplicationDelegateHandler::getNumberOfLinesToLimitTextTo(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 getNumberOfLinesToLimitTextTo];
}

uint64_t OZHostApplicationDelegateHandler::wantsToImproveQualityOfDraftQualityText(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToImproveQualityOfDraftQualityText];
}

uint64_t OZHostApplicationDelegateHandler::wantsSameAlignmentForAllLinesOfText(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsSameAlignmentForAllLinesOfText];
}

uint64_t OZHostApplicationDelegateHandler::wantsToDownscaleGlyphsToOutputSize(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToDownscaleGlyphsToOutputSize];
}

uint64_t OZHostApplicationDelegateHandler::wantsToSetTranscriptionsUsingArray(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToSetTranscriptionsUsingArray];
}

uint64_t OZHostApplicationDelegateHandler::wantsToIgnoreTextBoundsOfTransparentObjects(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToIgnoreTextBoundsOfTransparentObjects];
}

uint64_t OZHostApplicationDelegateHandler::wantsToIgnoreTextBoundsOfNewlinesOfTranscriptions(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToIgnoreTextBoundsOfNewlinesOfTranscriptions];
}

uint64_t OZHostApplicationDelegateHandler::wantsToUseCachedTextureForText(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToUseCachedTextureForText];
}

uint64_t OZHostApplicationDelegateHandler::wantsToIncludeSubstituteFontNameInAttributedString(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToIncludeSubstituteFontNameInAttributedString];
}

uint64_t OZHostApplicationDelegateHandler::wantsToIncludeTrackingValueInAttributedString(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToIncludeTrackingValueInAttributedString];
}

uint64_t OZHostApplicationDelegateHandler::wantsToComputeTypographicHeightWithoutLastLineLeading(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToComputeTypographicHeightWithoutLastLineLeading];
}

uint64_t OZHostApplicationDelegateHandler::wantsToAdjustTextBoundsHeightUsingCapHeight(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToAdjustTextBoundsHeightUsingCapHeight];
}

uint64_t OZHostApplicationDelegateHandler::wantsToIncludeTrailingWhitespaceInParagraphLineWidth(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToIncludeTrailingWhitespaceInParagraphLineWidth];
}

uint64_t OZHostApplicationDelegateHandler::wantsToCacheTopLevelGroupRender(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToCacheTopLevelGroupRender];
}

uint64_t OZHostApplicationDelegateHandler::wantsToAssertThatLoadedSceneHasAnimateFlagDisabled(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToAssertThatLoadedSceneHasAnimateFlagDisabled];
}

uint64_t OZHostApplicationDelegateHandler::wantsToAssertThatTopLevelGroupSpansEntireScene(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 0;
  }

  return [v1 wantsToAssertThatTopLevelGroupSpansEntireScene];
}

uint64_t OZHostApplicationDelegateHandler::getMaxGlyphResolution(void **this)
{
  v1 = *this;
  if ((objc_opt_respondsToSelector() & 1) == 0)
  {
    return 4096;
  }

  return [v1 getMaxGlyphResolution];
}

CMMetadataFormatDescriptionRef OZSimplyCreateCMMetadataFormatDescriptionForRawDataWithIdentifier(uint64_t a1)
{
  v8[1] = *MEMORY[0x277D85DE8];
  v1 = *MEMORY[0x277CC0608];
  v6[0] = *MEMORY[0x277CC0618];
  v6[1] = v1;
  formatDescriptionOut = 0;
  v2 = *MEMORY[0x277CC05B0];
  v7[0] = a1;
  v7[1] = v2;
  v8[0] = [MEMORY[0x277CBEAC0] dictionaryWithObjects:v7 forKeys:v6 count:2];
  v3 = [MEMORY[0x277CBEA60] arrayWithObjects:v8 count:1];
  if (CMMetadataFormatDescriptionCreateWithMetadataSpecifications(*MEMORY[0x277CBECE8], 0x6D656278u, v3, &formatDescriptionOut))
  {
    return 0;
  }

  else
  {
    return formatDescriptionOut;
  }
}

void OZFontFamily::~OZFontFamily(PCString *this)
{
  v2 = this + 2;
  std::vector<std::shared_ptr<HGGPUComputeDevice const>>::__destroy_vector::operator()[abi:ne200100](&v2);
  PCString::~PCString(this + 1);
  PCString::~PCString(this);
}

uint64_t OZFontFamily::getTypefaceIndex(OZFontFamily *this, const PCString *a2)
{
  v2 = *(this + 2);
  v3 = *(this + 3);
  if (v2 == v3)
  {
    return 0;
  }

  v5 = 0;
  while (1)
  {
    v6 = *v2;
    v7 = v2[1];
    if (v7)
    {
      atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v8 = PCString::compare(v6 + 1, a2);
    if (v7)
    {
      std::__shared_weak_count::__release_shared[abi:ne200100](v7);
    }

    if (!v8)
    {
      break;
    }

    v2 += 2;
    v5 = (v5 + 1);
    if (v2 == v3)
    {
      return 0;
    }
  }

  return v5;
}

void sub_2601B2974(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v1);
  }

  _Unwind_Resume(exception_object);
}

void OZLayer::OZLayer(OZLayer *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZGroup::OZGroup(this, a2, a3, a4);
  *v4 = &unk_28729E290;
  v4[2] = &unk_28729EBD0;
  v4[6] = &unk_28729EE28;
  v4[816] = &unk_28729EE80;
}

void OZLayer::OZLayer(OZLayer *this, const OZLayer *a2, uint64_t a3)
{
  OZGroup::OZGroup(this, a2, a3);
  *v3 = &unk_28729E290;
  v3[2] = &unk_28729EBD0;
  v3[6] = &unk_28729EE28;
  v3[816] = &unk_28729EE80;
}

void OZLayer::~OZLayer(OZLayer *this)
{
  OZGroup::~OZGroup(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZLayer::~OZLayer(OZLayer *this)
{
  OZGroup::~OZGroup((this - 16));
}

{
  OZGroup::~OZGroup((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZGroup::~OZGroup((this - 48));
}

{
  OZGroup::~OZGroup((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZGroup::~OZGroup((this - 6528));
}

{
  OZGroup::~OZGroup((this - 6528));

  JUMPOUT(0x2666E9F00);
}

void OZFolderElementShadows::OZFolderElementShadows(OZFolderElementShadows *this, const PCString *a2, OZChannelFolder *a3, unsigned int a4, int a5)
{
  Instance = OZFolderElementShadows_Factory::getInstance(this);
  OZChannelFolder::OZChannelFolder(this, Instance, a2, a3, a4, a5, 0);
  *this = &unk_28729EF70;
  *(this + 2) = &unk_28729F258;
  PCURL::PCURL(&v11, @"Channel Shadows Cast");
  OZChannelBool::OZChannelBool((this + 128), 1, &v11, this, 1u, 0, 0, 0);
  PCString::~PCString(&v11);
  PCURL::PCURL(&v11, @"Channel Shadows Receive");
  OZChannelBool::OZChannelBool((this + 280), 1, &v11, this, 2u, 0, 0, 0);
  PCString::~PCString(&v11);
  PCURL::PCURL(&v11, @"Channel Shadows Only");
  OZChannelBool::OZChannelBool((this + 432), 0, &v11, this, 3u, 0, 0, 0);
  PCString::~PCString(&v11);
}

void sub_2601B2D6C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  OZChannelBool::~OZChannelBool((v10 + 280));
  OZChannelBool::~OZChannelBool((v10 + 128));
  OZChannelFolder::~OZChannelFolder(v10);
  _Unwind_Resume(a1);
}

uint64_t OZFolderElementShadows_Factory::getInstance(OZFolderElementShadows_Factory *this)
{
  if (atomic_load_explicit(&OZFolderElementShadows_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZFolderElementShadows_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZFolderElementShadows_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZFolderElementShadows_Factory::_instance;
}

void OZFolderElementShadows::OZFolderElementShadows(OZFolderElementShadows *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZChannelFolder::OZChannelFolder(this, a2, a3, a4, 0);
  *v5 = &unk_28729EF70;
  v5[2] = &unk_28729F258;
  PCURL::PCURL(&v6, @"Channel Shadows Cast");
  OZChannelBool::OZChannelBool((this + 128), 1, &v6, this, 1u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Channel Shadows Receive");
  OZChannelBool::OZChannelBool((this + 280), 1, &v6, this, 2u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCURL::PCURL(&v6, @"Channel Shadows Only");
  OZChannelBool::OZChannelBool((this + 432), 0, &v6, this, 3u, 0, 0, 0);
  PCString::~PCString(&v6);
}

void sub_2601B2F90(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a10);
  OZChannelBool::~OZChannelBool((v10 + 280));
  OZChannelBool::~OZChannelBool((v10 + 128));
  OZChannelFolder::~OZChannelFolder(v10);
  _Unwind_Resume(a1);
}

void OZFolderElementShadows::OZFolderElementShadows(OZFolderElementShadows *this, const OZFolderElementShadows *a2, OZChannelFolder *a3)
{
  OZChannelFolder::OZChannelFolder(this, a2, a3);
  *v5 = &unk_28729EF70;
  *(v5 + 16) = &unk_28729F258;
  OZChannelBool::OZChannelBool((v5 + 128), (a2 + 128), this);
  OZChannelBool::OZChannelBool((this + 280), (a2 + 280), this);
  OZChannelBool::OZChannelBool((this + 432), (a2 + 432), this);
}

void sub_2601B308C(_Unwind_Exception *a1)
{
  OZChannelBool::~OZChannelBool((v1 + 280));
  OZChannelBool::~OZChannelBool((v1 + 128));
  OZChannelFolder::~OZChannelFolder(v1);
  _Unwind_Resume(a1);
}

void OZFolderElementShadows::~OZFolderElementShadows(OZFolderElementShadows *this)
{
  *this = &unk_28729EF70;
  *(this + 2) = &unk_28729F258;
  OZChannelBool::~OZChannelBool((this + 432));
  OZChannelBool::~OZChannelBool((this + 280));
  OZChannelBool::~OZChannelBool((this + 128));

  OZChannelFolder::~OZChannelFolder(this);
}

{
  OZFolderElementShadows::~OZFolderElementShadows(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZFolderElementShadows::~OZFolderElementShadows(OZFolderElementShadows *this)
{
  OZFolderElementShadows::~OZFolderElementShadows((this - 16));
}

{
  OZFolderElementShadows::~OZFolderElementShadows((this - 16));

  JUMPOUT(0x2666E9F00);
}

uint64_t OZFolderElementShadows::operator=(uint64_t a1, uint64_t a2)
{
  if (a2 != a1)
  {
    OZChannelFolder::operator=(a1);
  }

  return a1;
}

OZFolderElementShadows *OZFolderElementShadows::copy(OZFolderElementShadows *this, const OZFolderElementShadows *a2, const CMTime *a3)
{
  if (a2 != this)
  {
    ValueAsInt = OZChannel::getValueAsInt((a2 + 128), a3, 0.0);
    OZChannel::setValue((this + 128), a3, ValueAsInt, 0);
    v7 = OZChannel::getValueAsInt((a2 + 280), a3, 0.0);
    OZChannel::setValue((this + 280), a3, v7, 0);
    v8 = OZChannel::getValueAsInt((a2 + 432), a3, 0.0);
    OZChannel::setValue((this + 432), a3, v8, 0);
  }

  return this;
}

void OZFolderElementShadows_Factory::OZFolderElementShadows_Factory(OZFolderElementShadows_Factory *this)
{
  v3 = xmmword_2603472C0;
  v4 = xmmword_260852F40;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 1);
  *v2 = &unk_2871ED158;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_28729F2C8;
  *(this + 16) = &unk_28729F398;
}

uint64_t OZChannelBlendMode_Factory::getInstance(OZChannelBlendMode_Factory *this)
{
  if (atomic_load_explicit(&OZChannelBlendMode_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZChannelBlendMode_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZChannelBlendMode_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZChannelBlendMode_Factory::_instance;
}

void OZChannelBlendMode::OZChannelBlendMode(OZChannelBlendMode *this, unsigned int a2, const PCString *a3, const PCString *a4, OZChannelFolder *a5, unsigned int a6, int a7)
{
  Instance = OZChannelBlendMode_Factory::getInstance(this);
  OZChannelEnum::OZChannelEnum(this, a2, a3, a4, Instance, a5, a6, a7, 0, 0);
  *this = &unk_28729F3F0;
  *(this + 2) = &unk_28729F760;
}

void OZChannelBlendMode::OZChannelBlendMode(OZChannelBlendMode *this, const OZChannelBlendMode *a2, OZChannelFolder *a3)
{
  OZChannelEnum::OZChannelEnum(this, a2, a3);
  *v3 = &unk_28729F3F0;
  v3[2] = &unk_28729F760;
}

void non-virtual thunk toOZChannelBlendMode::~OZChannelBlendMode(PCString *this)
{
  OZChannelEnum::~OZChannelEnum(this - 2);
}

{
  OZChannelEnum::~OZChannelEnum(this - 2);

  JUMPOUT(0x2666E9F00);
}

void OZChannelBlendMode::~OZChannelBlendMode(PCString *this)
{
  OZChannelEnum::~OZChannelEnum(this);

  JUMPOUT(0x2666E9F00);
}

void OZChannelBlendMode_Factory::OZChannelBlendMode_Factory(OZChannelBlendMode_Factory *this)
{
  v3 = xmmword_260848500;
  v4 = xmmword_2608506F0;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 1);
  *v2 = &unk_2871ED158;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_28729F7D0;
  *(this + 16) = &unk_28729F8A0;
}

void OZElementRender::OZElementRender(OZElementRender *this, OZElement *a2, OZImageNode *a3, const OZRenderParams *a4)
{
  *(this + 183) = &unk_2872DEA38;
  *(this + 184) = 0;
  *(this + 1480) = 1;
  LiImageSource::LiImageSource((this + 1448), &off_28729FB18);
  OZImageNodeRender::OZImageNodeRender(this, &off_28729FAF0, a3, a4);
  *this = &unk_28729F908;
  *(this + 181) = &unk_28729FA08;
  *(this + 183) = &unk_28729FAD0;
  *(this + 180) = a2;
}

void sub_2601B3D58(_Unwind_Exception *a1)
{
  OZChannelBase::setRangeName(v3, &off_28729FB18);
  *(v1 + 1464) = v2;
  *(v1 + 1480) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1472));
  _Unwind_Resume(a1);
}

double OZElementRender::fixPixelTransform(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v14[0] = 0;
  v14[1] = 0;
  __asm { FMOV            V0.2D, #-1.0 }

  v15 = _Q0;
  (*(**(a1 + 1440) + 1480))(*(a1 + 1440), v14, a1 + 16);
  (*(**(a1 + 1440) + 1512))(v13);
  v10 = v13[0];
  v11 = v13[1];
  *(a3 + 8) = 0;
  *(a3 + 16) = 0;
  *a3 = 0x3FF0000000000000;
  *(a3 + 24) = v10;
  *(a3 + 32) = xmmword_260342700;
  *(a3 + 48) = 0;
  *(a3 + 56) = v11;
  *(a3 + 64) = 0;
  *(a3 + 72) = 0;
  *(a3 + 80) = 0x3FF0000000000000;
  result = 0.0;
  *(a3 + 88) = 0u;
  *(a3 + 104) = 0u;
  *(a3 + 120) = 0x3FF0000000000000;
  return result;
}

void OZImageNodeRender::~OZImageNodeRender(OZImageNodeRender *this)
{
  *this = &unk_28729FFE8;
  v2 = (this + 1440);
  *(this + 180) = &unk_2872A00E0;
  *(this + 182) = &unk_2872A01A8;
  OZRenderParams::~OZRenderParams((this + 16));
  OZChannelBase::setRangeName(v2, &off_2872A01D8);
  *(this + 182) = &unk_2872DEA38;
  *(this + 1472) = 0;
  PCWeakCount::~PCWeakCount(this + 183);
}

{
  *this = &unk_28729FFE8;
  v2 = (this + 1440);
  *(this + 180) = &unk_2872A00E0;
  *(this + 182) = &unk_2872A01A8;
  OZRenderParams::~OZRenderParams((this + 16));
  OZChannelBase::setRangeName(v2, &off_2872A01D8);
  *(this + 182) = &unk_2872DEA38;
  *(this + 1472) = 0;
  PCWeakCount::~PCWeakCount(this + 183);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZImageNodeRender::~OZImageNodeRender(OZImageNodeRender *this)
{
  v1 = this + *(*this - 32);
  *v1 = &unk_28729FFE8;
  *(v1 + 180) = &unk_2872A00E0;
  *(v1 + 182) = &unk_2872A01A8;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1440), &off_2872A01D8);
  *(v1 + 182) = &unk_2872DEA38;
  v1[1472] = 0;

  PCWeakCount::~PCWeakCount(v1 + 183);
}

{
  v1 = this + *(*this - 32);
  *v1 = &unk_28729FFE8;
  *(v1 + 180) = &unk_2872A00E0;
  *(v1 + 182) = &unk_2872A01A8;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1440), &off_2872A01D8);
  *(v1 + 182) = &unk_2872DEA38;
  v1[1472] = 0;
  PCWeakCount::~PCWeakCount(v1 + 183);

  JUMPOUT(0x2666E9F00);
}

{
  v1 = this + *(*this - 24);
  *v1 = &unk_28729FFE8;
  *(v1 + 180) = &unk_2872A00E0;
  *(v1 + 182) = &unk_2872A01A8;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1440), &off_2872A01D8);
  *(v1 + 182) = &unk_2872DEA38;
  v1[1472] = 0;

  PCWeakCount::~PCWeakCount(v1 + 183);
}

{
  v1 = this + *(*this - 24);
  *v1 = &unk_28729FFE8;
  *(v1 + 180) = &unk_2872A00E0;
  *(v1 + 182) = &unk_2872A01A8;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1440), &off_2872A01D8);
  *(v1 + 182) = &unk_2872DEA38;
  v1[1472] = 0;
  PCWeakCount::~PCWeakCount(v1 + 183);

  JUMPOUT(0x2666E9F00);
}

void OZElementRender::~OZElementRender(OZElementRender *this)
{
  *this = &off_28729FB58;
  v2 = (this + 1448);
  *(this + 181) = off_28729FC50;
  *(this + 183) = off_28729FD18;
  OZRenderParams::~OZRenderParams((this + 16));
  OZChannelBase::setRangeName(v2, &off_28729FB18);
  *(this + 183) = &unk_2872DEA38;
  *(this + 1480) = 0;
  PCWeakCount::~PCWeakCount(this + 184);
}

{
  *this = &off_28729FB58;
  v2 = (this + 1448);
  *(this + 181) = off_28729FC50;
  *(this + 183) = off_28729FD18;
  OZRenderParams::~OZRenderParams((this + 16));
  OZChannelBase::setRangeName(v2, &off_28729FB18);
  *(this + 183) = &unk_2872DEA38;
  *(this + 1480) = 0;
  PCWeakCount::~PCWeakCount(this + 184);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZElementRender::~OZElementRender(OZElementRender *this)
{
  v1 = this + *(*this - 32);
  *v1 = &off_28729FB58;
  *(v1 + 181) = off_28729FC50;
  *(v1 + 183) = off_28729FD18;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1448), &off_28729FB18);
  *(v1 + 183) = &unk_2872DEA38;
  v1[1480] = 0;

  PCWeakCount::~PCWeakCount(v1 + 184);
}

{
  v1 = this + *(*this - 32);
  *v1 = &off_28729FB58;
  *(v1 + 181) = off_28729FC50;
  *(v1 + 183) = off_28729FD18;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1448), &off_28729FB18);
  *(v1 + 183) = &unk_2872DEA38;
  v1[1480] = 0;
  PCWeakCount::~PCWeakCount(v1 + 184);

  JUMPOUT(0x2666E9F00);
}

{
  v1 = this + *(*this - 24);
  *v1 = &off_28729FB58;
  *(v1 + 181) = off_28729FC50;
  *(v1 + 183) = off_28729FD18;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1448), &off_28729FB18);
  *(v1 + 183) = &unk_2872DEA38;
  v1[1480] = 0;

  PCWeakCount::~PCWeakCount(v1 + 184);
}

{
  v1 = this + *(*this - 24);
  *v1 = &off_28729FB58;
  *(v1 + 181) = off_28729FC50;
  *(v1 + 183) = off_28729FD18;
  OZRenderParams::~OZRenderParams((v1 + 16));
  OZChannelBase::setRangeName((v1 + 1448), &off_28729FB18);
  *(v1 + 183) = &unk_2872DEA38;
  v1[1480] = 0;
  PCWeakCount::~PCWeakCount(v1 + 184);

  JUMPOUT(0x2666E9F00);
}

uint64_t OZTextureSource::OZTextureSource(uint64_t a1, const PCSharedCount *a2, __int128 *a3, __int128 *a4, int a5, uint64_t a6, __int128 *a7)
{
  var0 = a2->var0;
  PCSharedCount::PCSharedCount(&v24, a2 + 1);
  *a1 = &unk_28729FFA8;
  *(a1 + 8) = var0;
  PCSharedCount::PCSharedCount((a1 + 16), &v24);
  PCSharedCount::~PCSharedCount(&v24);
  *a1 = &unk_28729FF50;
  v13 = *a3;
  v14 = a3[1];
  v15 = a3[2];
  *(a1 + 72) = a3[3];
  *(a1 + 56) = v15;
  *(a1 + 40) = v14;
  *(a1 + 24) = v13;
  v16 = a3[4];
  v17 = a3[5];
  v18 = a3[6];
  *(a1 + 136) = a3[7];
  *(a1 + 120) = v18;
  *(a1 + 104) = v17;
  *(a1 + 88) = v16;
  v19 = *a4;
  *(a1 + 168) = a4[1];
  *(a1 + 152) = v19;
  *(a1 + 184) = a5;
  *(a1 + 192) = a6;
  v20 = *a7;
  v21 = a7[1];
  *(a1 + 232) = a7[2];
  *(a1 + 216) = v21;
  *(a1 + 200) = v20;
  return a1;
}

void OZTextureSource::makeTexture(OZTextureSource *this, LiRenderParameters **a2)
{
  (*(*this + 16))(&v6);
  v5[0] = 0;
  v5[1] = vmovn_s64(vcvtq_s64_f64(*(this + 168)));
  HeliumRenderer = LiAgent::getHeliumRenderer(a2);
  PGHelium::renderNodeToMetalTexture(HeliumRenderer, &v6, v5, *(this + 46), *(this + 24), (this + 200));
}

void sub_2601B4C44(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12)
{
  if (a12)
  {
    (*(*a12 + 24))(a12);
  }

  _Unwind_Resume(exception_object);
}

void OZTextureSource::getHelium(OZTextureSource *this@<X0>, LiAgent *a2@<X1>, HGXForm **a3@<X8>)
{
  v5 = *(a2 + 6);
  v41 = *v5;
  LiImageFilterChain::LiImageFilterChain(&v42, (v5 + 1));
  v6 = *(v5 + 56);
  v7 = *(v5 + 72);
  v49 = *(v5 + 88);
  v48 = v7;
  v47 = v6;
  v8 = *(v5 + 104);
  v9 = *(v5 + 120);
  v11 = *(v5 + 19);
  v10 = *(v5 + 20);
  v52 = *(v5 + 136);
  v51 = v9;
  v50 = v8;
  v53 = v11;
  v54[0] = v10;
  if (v10)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v10);
  }

  v12 = *(v5 + 21);
  v55 = *(v5 + 44);
  v54[1] = v12;
  v56 = *(v5 + 184);
  v57 = *(v5 + 48);
  v13 = *(v5 + 26);
  v58 = *(v5 + 25);
  v59 = v13;
  if (v13)
  {
    atomic_fetch_add_explicit(&v13->__shared_owners_, 1uLL, memory_order_relaxed);
  }

  LiAgent::LiAgent(v40, &v41, 1);
  v31 = vuzp1q_s32(vcvtq_s64_f64(*(this + 152)), vcvtq_s64_f64(*(this + 168)));
  LiAgent::setClientROI(v40, &v31);
  v31.i64[0] = *(this + 1);
  PCSharedCount::PCSharedCount(&v31.u64[1], this + 2);
  v14 = *(this + 104);
  v36 = *(this + 88);
  v37 = v14;
  v15 = *(this + 136);
  v38 = *(this + 120);
  v39 = v15;
  v16 = *(this + 40);
  v32 = *(this + 24);
  v33 = v16;
  v17 = *(this + 56);
  v18 = *(this + 72);
  v21 = v31.i64[0];
  v34 = v17;
  v35 = v18;
  PCSharedCount::PCSharedCount(&v22, &v31.u64[1]);
  v27 = v36;
  v28 = v37;
  v29 = v38;
  v30 = v39;
  v23 = v32;
  v24 = v33;
  v25 = v34;
  v26 = v35;
  v20 = vuzp1q_s32(vcvtq_s64_f64(*(this + 152)), vcvtq_s64_f64(*(this + 168)));
  HGNodeForImageSourceTransformPair(v40, &v21, &v20, a3);
  PCSharedCount::~PCSharedCount(&v22);
  PCSharedCount::~PCSharedCount(&v31.u64[1]);
  LiAgent::~LiAgent(v40);
  if (v59)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v59);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(v54);
  v44 = &unk_2871F2660;
  if (v45 < 0)
  {
    v19 = 1;
  }

  else
  {
    v19 = v45;
  }

  PCArray<PCPtr<LiImageFilter>,PCArray_Traits<PCPtr<LiImageFilter>>>::resize(&v44, 0, v19);
  if (v46)
  {
    MEMORY[0x2666E9ED0](v46, 0x1000C8077774924);
  }

  v46 = 0;
  v45 = 0;
  PCSharedCount::~PCSharedCount(&v43);
}

void OZTextureSource::~OZTextureSource(PCSharedCount *this)
{
  this->var0 = &unk_28729FFA8;
  PCSharedCount::~PCSharedCount(this + 2);
}

{
  this->var0 = &unk_28729FFA8;
  PCSharedCount::~PCSharedCount(this + 2);

  JUMPOUT(0x2666E9F00);
}

void OZImageNodeRender::OZImageNodeRender(OZImageNodeRender *this, OZImageNode *a2, const OZRenderParams *a3, const OZRenderParams *a4)
{
  v4 = *a2;
  *this = *a2;
  *(this + *(v4 - 24)) = *(a2 + 1);
  *(this + *(*this - 32)) = *(a2 + 2);
  *(this + 1) = a3;
  OZRenderParams::OZRenderParams((this + 16), a4);
}

void OZImageNodeRender::OZImageNodeRender(OZImageNodeRender *this, OZImageNode *a2, const OZRenderParams *a3)
{
  *(this + 182) = &unk_2872DEA38;
  *(this + 183) = 0;
  *(this + 1472) = 1;
  LiImageSource::LiImageSource((this + 1440), &off_2872A01D8);
  *this = &unk_28729FFE8;
  *(this + 1) = a2;
  *(this + 180) = &unk_2872A00E0;
  *(this + 182) = &unk_2872A01A8;
  OZRenderParams::OZRenderParams((this + 16), a3);
}

void sub_2601B51B8(_Unwind_Exception *a1)
{
  OZChannelBase::setRangeName(v3, &off_2872A01D8);
  *(v1 + 1456) = v2;
  *(v1 + 1472) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1464));
  _Unwind_Resume(a1);
}

CGColorSpace **OZImageNodeRender::getHelium(OZImageNodeRender *this, LiAgent *a2)
{
  v42 = 0.0;
  v43 = 0.0;
  __asm { FMOV            V0.2D, #-1.0 }

  *v44 = _Q0;
  v9 = *(this + 1);
  v10 = *v9;
  v12 = v11;
  if (v11)
  {
    (*(*v11 + 1480))(v11, &v42, this + 16);
  }

  else
  {
    (*(v10 + 16))(v9, &v42, this + 16);
  }

  v13 = vcvtpd_s64_f64(v43 + v44[1]) - vcvtmd_s64_f64(v43 + 0.0000001);
  v14 = *(this + 85);
  v15 = *(this + 86);
  OZRenderParams::setWidth((this + 16), vcvtpd_s64_f64(v42 + v44[0]) - vcvtmd_s64_f64(v42 + 0.0000001));
  OZRenderParams::setHeight((this + 16), v13);
  CGColorSpace = FxColorDescription::getCGColorSpace((*(a2 + 6) + 160));
  OZRenderParams::setWorkingColorSpace((this + 16), CGColorSpace);
  OZRenderParams::setBlendingGamma(this + 16, *(*(a2 + 6) + 192));
  v17 = *(this + 84);
  if (*(*LiAgent::getRenderDevice(a2) + 8))
  {
    v18 = 2;
  }

  else
  {
    v18 = 1;
  }

  OZRenderParams::setImageType(this + 16, v18);
  v19 = *(this + 376);
  *(this + 376) = 1;
  *(this + 408) = 0u;
  *(this + 424) = 0u;
  v20 = *(a2 + 20);
  v21 = v20[3];
  v23 = *v20;
  v22 = v20[1];
  v36 = v20[2];
  v37 = v21;
  v35[0] = v23;
  v35[1] = v22;
  v24 = v20[7];
  v26 = v20[4];
  v25 = v20[5];
  v40 = v20[6];
  v41 = v24;
  v38 = v26;
  v39 = v25;
  RequestedColorDescription = LiAgent::getRequestedColorDescription(a2);
  v28 = *RequestedColorDescription;
  v34._pcColorDesc._colorSpaceRef._obj = v28;
  if (v28)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v28);
  }

  v29 = *(RequestedColorDescription + 8);
  v34._pcColorDesc._toneMapMethod._gain = *(RequestedColorDescription + 16);
  *&v34._pcColorDesc._dynamicRange = v29;
  v34._isPremultiplied = *(RequestedColorDescription + 24);
  v30 = *(this + 1);
  HeliumRenderer = LiAgent::getHeliumRenderer(a2);
  (*(*v30 + 192))(v30, this + 16, HeliumRenderer, &v34, v35);
  LiAgent::setActualColorDescription(a2, &v34);
  OZRenderParams::setWidth((this + 16), v14);
  OZRenderParams::setHeight((this + 16), v15);
  OZRenderParams::setImageType(this + 16, v17);
  *(this + 376) = v19;
  *(this + 408) = 0u;
  *(this + 424) = 0u;
  if (v12)
  {
    v32 = (*(*v12 + 1328))(v12);
    if (v32 != 1.0)
    {
      *v35 = v32 * *v35;
      *&v36 = v32 * *&v36;
      *&v38 = v32 * *&v38;
      *&v40 = v32 * *&v40;
    }
  }

  LiAgent::setPixelTransform(a2, v35);
  return PCCFRef<CGColorSpace *>::~PCCFRef(&v34._pcColorDesc._colorSpaceRef._obj);
}

unint64_t OZImageNodeRender::estimateRenderMemory(uint64_t a1, uint64_t a2)
{
  v3 = *(a1 + 8);
  if (!v3)
  {
    return 0;
  }

  if (!v5)
  {
    return 0;
  }

  return OZImageElement::estimateRenderMemory(v5, a2, (a1 + 16));
}

void *OZImageNodeRender::print(uint64_t a1, void *a2, int a3)
{
  LiImageSource::printIndent(a2, a3);
  std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(a2, "OZImageNodeRender:\n", 19);
  LiImageSource::printIndent(a2, a3 + 1);
  v6 = std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(a2, "_imageNode = ", 13);
  result = MEMORY[0x2666E9B10](v6, *(a1 + 8));
  if (*(a1 + 8))
  {
    v8 = std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(a2, ", type = ", 9);
    v9 = *(a1 + 8);
    if (!v9)
    {
      __cxa_bad_typeid();
    }

    v10 = v8;
    v11 = *(*(*v9 - 8) + 8);
    v12 = strlen((v11 & 0x7FFFFFFFFFFFFFFFLL));
    std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(v10, v11 & 0x7FFFFFFFFFFFFFFFLL, v12);
    result = *(a1 + 8);
    if (result)
    {
      if (result)
      {
        v13 = result;
        v14 = std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(a2, ", name = ", 9);
        Name = OZObjectManipulator::getName((v13 + 2));
        CStr = PCString::createCStr(Name);
        if (CStr)
        {
          v17 = CStr;
          v18 = strlen(CStr);
          std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(v14, v17, v18);
          free(v17);
        }

        return std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(v14, "\n", 1);
      }
    }
  }

  return result;
}

void OZChannelRetimeFrame::OZChannelRetimeFrame(OZChannelRetimeFrame *this, double a2, const PCString *a3, OZChannelFolder *a4, unsigned int a5, int a6)
{
  OZChannelDouble::OZChannelDouble(this, a2, a3, a4, a5, a6, 0, 0);
  *v6 = &unk_2872A0428;
  v6[2] = &unk_2872A0788;
  v6[7] |= 0x100uLL;
}

void OZChannelRetimeFrame::OZChannelRetimeFrame(OZChannelRetimeFrame *this, const OZChannelBase *a2, OZChannelFolder *a3)
{
  OZChannel::OZChannel(this, a2, a3);
  *v3 = &unk_2872A0428;
  v3[2] = &unk_2872A0788;
  v3[7] |= 0x100uLL;
}

void non-virtual thunk toOZChannelRetimeFrame::~OZChannelRetimeFrame(OZChannelRetimeFrame *this)
{
  OZChannel::~OZChannel((this - 16));
}

{
  OZChannel::~OZChannel((this - 16));

  JUMPOUT(0x2666E9F00);
}

void OZChannelRetimeFrame::~OZChannelRetimeFrame(OZChannel *this)
{
  OZChannel::~OZChannel(this);

  JUMPOUT(0x2666E9F00);
}

void OZChanFootageRef::OZChanFootageRef(OZChanFootageRef *this, const PCString *a2, OZChannelFolder *a3, unsigned int a4, int a5)
{
  OZChanSceneNodeRef::OZChanSceneNodeRef(this, a2, a3, a4, a5);
  *v5 = &unk_2872A07F8;
  *(v5 + 16) = &unk_2872A0B78;
  *(v5 + 157) = 0;
}

void OZChanFootageRef::OZChanFootageRef(OZChanFootageRef *this, const OZChanSceneNodeRef *a2, OZChannelFolder *a3)
{
  OZChanSceneNodeRef::OZChanSceneNodeRef(this, a2, a3);
  *v5 = &unk_2872A07F8;
  v5[2] = &unk_2872A0B78;
  if (v6)
  {
    v7 = v6[157];
    v8 = v6[158];
  }

  else
  {
    v7 = 0;
    v8 = 0;
  }

  *(this + 157) = v7;
  *(this + 158) = v8;
}

void non-virtual thunk toOZChanFootageRef::~OZChanFootageRef(OZChanFootageRef *this)
{
  OZChanSceneNodeRef::~OZChanSceneNodeRef((this - 16));
}

{
  OZChanSceneNodeRef::~OZChanSceneNodeRef((this - 16));

  JUMPOUT(0x2666E9F00);
}

void OZChanFootageRef::~OZChanFootageRef(OZChanFootageRef *this)
{
  OZChanSceneNodeRef::~OZChanSceneNodeRef(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t OZChanFootageRef::canReferenceObject(OZChanFootageRef *this, const OZObjectManipulator *lpsrc)
{
  if (!lpsrc)
  {
    return 0;
  }

  if (*(this + 157) == 1)
  {
    if (!v4 || !(*(*v4 + 1352))(v4))
    {
      return 0;
    }
  }

  else if (*(this + 158) == 1)
  {
    if (!v4 || !(*(*v4 + 1360))(v4))
    {
      return 0;
    }
  }

  else if (!v4)
  {
    return 0;
  }

  return OZChanSceneNodeRef::canReferenceObject(this, lpsrc);
}

void OZ3DEnginePhysicsBehavior::OZ3DEnginePhysicsBehavior(OZ3DEnginePhysicsBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3, a4);
  OZLocking::OZLocking((v5 + 536));
  *this = &unk_2872A0BE8;
  *(this + 2) = &unk_2872A0EB0;
  *(this + 6) = &unk_2872A1108;
  *(this + 42) = &unk_2872A1160;
  *(this + 67) = &unk_2872A1188;
  PCString::PCString(&v7, "None;Static;Dynamic;Kinematic");
  PCString::PCString(&v6, "Type");
  OZChannelEnum::OZChannelEnum((this + 736), &v7, &v6, (this + 56), 0xC8u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::~PCString(&v7);
}

void sub_2601B5EF4(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  PCString::~PCString(&a9);
  PCString::~PCString(&a10);
  OZLocking::~OZLocking(v11);
  OZChannelBehavior::~OZChannelBehavior(v10);
  _Unwind_Resume(a1);
}

void OZ3DEnginePhysicsBehavior::OZ3DEnginePhysicsBehavior(OZ3DEnginePhysicsBehavior *this, const OZ3DEnginePhysicsBehavior *a2, char a3)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3);
  OZLocking::OZLocking((v5 + 536));
  *this = &unk_2872A0BE8;
  *(this + 2) = &unk_2872A0EB0;
  *(this + 6) = &unk_2872A1108;
  *(this + 42) = &unk_2872A1160;
  *(this + 67) = &unk_2872A1188;
  OZChannelEnum::OZChannelEnum((this + 736), (a2 + 736), (this + 56));
}

void sub_2601B6024(_Unwind_Exception *a1)
{
  OZLocking::~OZLocking(v2);
  OZChannelBehavior::~OZChannelBehavior(v1);
  _Unwind_Resume(a1);
}

void OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior(OZ3DEnginePhysicsBehavior *this)
{
  *this = &unk_2872A0BE8;
  *(this + 2) = &unk_2872A0EB0;
  *(this + 6) = &unk_2872A1108;
  *(this + 42) = &unk_2872A1160;
  *(this + 67) = &unk_2872A1188;
  OZChannelEnum::~OZChannelEnum((this + 736));
  *(this + 67) = &unk_2872018B0;
  PCMutex::~PCMutex((this + 664));
  PCSharedMutex::~PCSharedMutex((this + 544));

  OZChannelBehavior::~OZChannelBehavior(this);
}

{
  OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior(OZ3DEnginePhysicsBehavior *this)
{
  OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior((this - 16));
}

{
  OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior((this - 48));
}

{
  OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior((this - 336));
}

{
  OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZ3DEnginePhysicsBehavior::~OZ3DEnginePhysicsBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

uint64_t OZ3DEnginePhysicsBehavior::operator=(uint64_t a1, const void *a2)
{
  OZChannelBehavior::operator=();
  if (!v4)
  {
    __cxa_bad_cast();
  }

  return OZChannelBase::operator=(a1 + 736, v4 + 736);
}

OZChannelBehavior *OZ3DEnginePhysicsBehavior::didAddToNode(OZChannelBehavior *this, OZSceneNode *lpsrc)
{
  if (lpsrc)
  {
    v3 = this;
    if (this)
    {
      OZChannelBehavior::didAddToNode(v3, lpsrc);
      operator new();
    }
  }

  return this;
}

uint64_t OZ3DEnginePhysicsBehavior::getLockDependencies(uint64_t result, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v6 = result;
  v7 = (result + 536);
  for (i = *(a4 + 8); i; i = *i)
  {
    v9 = i[4];
    if (v7 >= v9)
    {
      if (v9 >= v7)
      {
        return result;
      }

      ++i;
    }
  }

  v11 = (result + 536);
  std::__tree<OZLocking *>::__emplace_unique_key_args<OZLocking *,OZLocking *>(a4, &v11);
  v10 = (*(*v6 + 336))(v6);
  OZLocking::addLockDependenciesForDependents(v7, v10, a3, a4);
  v11 = v7;
  return std::__tree<OZLocking *>::__erase_unique<OZLocking *>(a4, &v11);
}

uint64_t OZ3DEnginePhysicsBehavior::getLockingGroups(OZ3DEnginePhysicsBehavior *this)
{
  result = (*(*this + 336))(this);
  if (result)
  {
    return (*(*this + 336))(this) + 1784;
  }

  return result;
}

uint64_t non-virtual thunk toOZ3DEnginePhysicsBehavior::getLockingGroups(OZ3DEnginePhysicsBehavior *this)
{
  v1 = this - 536;
  result = (*(*(this - 67) + 336))(this - 536);
  if (result)
  {
    return (*(*v1 + 336))(v1) + 1784;
  }

  return result;
}

void OZ3DEnginePhysicsBehaviorNode::~OZ3DEnginePhysicsBehaviorNode(OZ3DEnginePhysicsBehaviorNode *this)
{
  OZEaseInInterpolator::~OZEaseInInterpolator(this);

  JUMPOUT(0x2666E9F00);
}

double OZ3DEnginePhysicsBehaviorNode::solveNode(OZ3DEnginePhysicsBehaviorNode *this, const CMTime *a2, double a3, double a4)
{
  v7 = (*(**(this + 4) + 312))(*(this + 4), a3);
  if (OZChannelBase::isEnabled(v7, 0, 1))
  {
    if ((*((*(**(this + 4) + 320))(*(this + 4)) + 1024) & 2) == 0)
    {
      v8 = *(this + 4);
      v10 = *&a2->value;
      epoch = a2->epoch;
      if ((*(*v8 + 296))(v8, &v10, 1, 1, 1))
      {
        return OZChannel::getValueAsInt((*(this + 4) + 736), a2, 0.0);
      }
    }
  }

  return a4;
}

double OZ3DEnginePhysicsBehaviorNode::solveNode(OZ3DEnginePhysicsBehaviorNode *this, OZCurveNodeParam *a2)
{
  v2 = *(a2 + 19);
  v9 = *(a2 + 5);
  v3 = *(a2 + 6);
  *&v8.value = v3;
  v8.epoch = *(a2 + 14);
  if (*(a2 + 36))
  {
    v6 = 0;
    do
    {
      *(v2 + 8 * v6) = OZChannel::getValueAsInt((*(this + 4) + 736), &v8, 0.0);
      v11 = v8;
      v10 = v9;
      PC_CMTimeSaferAdd(&v11, &v10, &v12);
      *&v3 = v12.value;
      v8 = v12;
      ++v6;
    }

    while (v6 < *(a2 + 36));
  }

  return *&v3;
}

uint64_t OZChanFootageRefWithPicker_Factory::getInstance(OZChanFootageRefWithPicker_Factory *this)
{
  if (atomic_load_explicit(&OZChanFootageRefWithPicker_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZChanFootageRefWithPicker_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZChanFootageRefWithPicker_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZChanFootageRefWithPicker_Factory::_instance;
}

void OZChanFootageRefWithPicker_Factory::OZChanFootageRefWithPicker_Factory(OZChanFootageRefWithPicker_Factory *this)
{
  v3 = xmmword_260850EA0;
  v4 = xmmword_260853070;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 1);
  *v2 = &unk_2871ED158;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872A16E8;
  *(this + 16) = &unk_2872A17B8;
}

void OZLockingElement::OZLockingElement(OZLockingElement *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZLocking::OZLocking(this);
  OZElement::OZElement((v8 + 200), a2, a3, a4);
  *this = &unk_2872A1810;
  *(this + 25) = &unk_2872A1870;
  *(this + 27) = &unk_2872A2148;
  *(this + 31) = &unk_2872A23A0;
  *(this + 841) = &unk_2872A23F8;
}

void OZLockingElement::OZLockingElement(OZLockingElement *this, const OZElement *a2, uint64_t a3)
{
  OZLocking::OZLocking(this);
  OZElement::OZElement((v6 + 200), a2, a3);
  *this = &unk_2872A1810;
  *(this + 25) = &unk_2872A1870;
  *(this + 27) = &unk_2872A2148;
  *(this + 31) = &unk_2872A23A0;
  *(this + 841) = &unk_2872A23F8;
}

uint64_t OZLockingElement::willRemoveFromScene(OZLockingElement *this, OZScene *a2)
{
  OZSceneNode::willRemoveFromScene(this + 200, a2);

  return OZLocking::removeFromLockingGroup(this);
}

uint64_t non-virtual thunk toOZLockingElement::willRemoveFromScene(OZLockingElement *this, OZScene *a2)
{
  v2 = (this - 200);
  OZSceneNode::willRemoveFromScene(this, a2);

  return OZLocking::removeFromLockingGroup(v2);
}

uint64_t OZLockingElement::getLockingGroups(OZLockingElement *this)
{
  v1 = this + 200;
  result = (*(*(this + 25) + 272))(this + 200);
  if (result)
  {
    return (*(*v1 + 272))(v1) + 1784;
  }

  return result;
}

void sub_2601B7368(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10, PCString a11)
{
  v15 = *(v11 + 19104);
  if (v15)
  {
    (*(*v15 + 24))(v15);
  }

  std::__tree<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>>>::destroy(v11 + 19080, *(v11 + 19088));
  v16 = *(v11 + 19072);
  if (v16)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v16);
  }

  PCSharedMutex::~PCSharedMutex((v11 + v12));
  OZChannelFolder::~OZChannelFolder((v11 + v13));
  OZShape::~OZShape(v11);
  _Unwind_Resume(a1);
}

void sub_2601B77EC(_Unwind_Exception *a1)
{
  v5 = *(v1 + 19104);
  if (v5)
  {
    (*(*v5 + 24))(v5);
  }

  std::__tree<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>>>::destroy(v1 + 19080, *(v1 + 19088));
  v6 = *(v1 + 19072);
  if (v6)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v6);
  }

  PCSharedMutex::~PCSharedMutex((v1 + v2));
  OZChannelFolder::~OZChannelFolder((v1 + v3));
  OZShape::~OZShape(v1);
  _Unwind_Resume(a1);
}

void *OZMoShape::initPPaintTime(void *this, CMTime *a2, const PCTimeRange *a3)
{
  v3 = this[2360];
  if (v3)
  {
    (*(*v3 + 1136))(this[2360], a3, 0);
    v7 = *a2;
    (*(*v3 + 1120))(v3, &v7, 0);
    this = (*(*v3 + 976))(v3, 0);
    if (this)
    {
      if (this)
      {
        v6 = this;
        (*(*this + 1136))(this, a3, 0);
        v7 = *a2;
        return (*(*v6 + 1120))(v6, &v7, 0);
      }
    }
  }

  return this;
}

void OZMoShape::~OZMoShape(OZMoShape *this)
{
  *this = &unk_2872A2508;
  v2 = (this + 8);
  PCMutex::lock((this + 8));
  v3 = *(this + 2360);
  if (v3)
  {
    (*(*v3 + 8))(v3);
  }

  *(this + 2360) = 0;
  *(this + 2389) = 0;
  PCMutex::unlock(v2);
  v4 = *(this + 2388);
  if (v4)
  {
    (*(*v4 + 24))(v4);
  }

  std::__tree<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>>>::destroy(this + 19080, *(this + 2386));
  v5 = *(this + 2384);
  if (v5)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v5);
  }

  PCSharedMutex::~PCSharedMutex(this + 296);
  OZChannelFolder::~OZChannelFolder((this + 18728));

  OZShape::~OZShape(this);
}

{
  OZMoShape::~OZMoShape(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t OZMoShape::operator=(uint64_t a1, uint64_t a2)
{
  v4 = (a1 + 8);
  PCMutex::lock((a1 + 8));
  OZShape::operator=(a1, a2);
  if (*(a1 + 18880))
  {
    (*(**(a1 + 18888) + 96))(*(a1 + 18888), *(a2 + 18880));
  }

  else
  {
    v5 = *(a2 + 18880);
    if (v5)
    {
      v6 = (*(**(v5 + 8) + 24))(*(v5 + 8), v5, 2);
      *(a1 + 18880) = v7;
      v8 = *(a1 + 19112);
      if (v8)
      {
        v9 = v8 + 200;
      }

      else
      {
        v9 = 0;
      }

      (*(*v7 + 256))(v7, v9);
      v10 = *(a1 + 18880);
      v11 = *v10;
      v12 = (*(v11 + 640))(v10);
      OZChannelFolder::push_front((a1 + 18728), v12);
    }
  }

  *(a1 + 18928) = 0u;
  *(a1 + 18912) = 0u;
  *(a1 + 18896) = 0u;
  *(a1 + 18876) = *(a2 + 18876);
  return PCMutex::unlock(v4);
}

void OZMoShape::reparentChannels(OZMoShape *this, OZChannelFolder *a2, int a3)
{
  if (a3)
  {
    OZChannelFolder::removeDescendant((this + 80), (this + 208));
    OZChannelFolder::removeDescendant((this + 80), (this + 1072));
    OZChannelFolder::removeDescendant((this + 80), (this + 1328));
    OZChannelFolder::removeDescendant((this + 80), (this + 1480));
    OZChannelFolder::removeDescendant((this + 80), (this + 1632));
    OZChannelFolder::removeDescendant((this + 80), (this + 1784));
    OZChannelFolder::removeDescendant((this + 80), (this + 2784));
    OZChannelFolder::removeDescendant((this + 80), (this + 6800));
    OZChannelFolder::removeDescendant((this + 80), (this + 11512));
    OZChannelFolder::removeDescendant((this + 80), (this + 13008));
    OZChannelFolder::removeDescendant((this + 80), (this + 13264));
    OZChannelFolder::removeDescendant((this + 80), (this + 13416));
    OZChannelFolder::removeDescendant((this + 80), (this + 13568));
    OZChannelFolder::removeDescendant((this + 80), (this + 13720));
    OZChannelFolder::removeDescendant((this + 80), (this + 13872));
    OZChannelFolder::removeDescendant((this + 80), (this + 14024));
    OZChannelFolder::removeDescendant((this + 80), (this + 14904));
    OZChannelFolder::removeDescendant((this + 80), (this + 15608));
    OZChannelFolder::removeDescendant((this + 80), (this + 16312));
    OZChannelFolder::removeDescendant((this + 80), (this + 17016));
    OZChannelFolder::removeDescendant((this + 80), (this + 17720));
    OZChannelFolder::removeDescendant((this + 80), (this + 17872));
    OZChannelBase::setID((this + 208), 0x13Du);
    OZChannelBase::setID((this + 1072), 0x12Cu);
    OZChannelBase::setID((this + 1328), 0x13Cu);
    OZChannelBase::setID((this + 1480), 0x158u);
    OZChannelBase::setID((this + 1632), 0x160u);
    OZChannelBase::setID((this + 1784), 0x149u);
    OZChannelBase::setID((this + 2784), 0x139u);
    OZChannelBase::setID(this + 26, 0x13Au);
    OZChannelBase::setID((this + 3168), 0x137u);
    OZChannelBase::setID((this + 4176), 0x155u);
    OZChannelBase::setID((this + 4328), 0x130u);
    OZChannelBase::setID((this + 6800), 0x134u);
    OZChannelBase::setID((this + 6928), 0x153u);
    OZChannelBase::setID((this + 7184), 0x133u);
    OZChannelBase::setID((this + 0x2000), 0x156u);
    OZChannelBase::setID((this + 8344), 0x131u);
    OZChannelBase::setID((this + 8496), 0x143u);
    OZChannelBase::setID((this + 8648), 0x138u);
    OZChannelBase::setID((this + 8904), 0x13Fu);
    OZChannelBase::setID((this + 9160), 0x14Eu);
    OZChannelBase::setID((this + 9416), 0x14Cu);
    OZChannelBase::setID((this + 9568), 0x14Du);
    OZChannelBase::setID((this + 9720), 0x132u);
    OZChannelBase::setID((this + 9976), 0x146u);
    OZChannelBase::setID((this + 10128), 0x147u);
    OZChannelBase::setID((this + 10280), 0x14Fu);
    OZChannelBase::setID((this + 10440), 0x148u);
    OZChannelBase::setID((this + 10592), 0x14Bu);
    OZChannelBase::setID((this + 10744), 0x150u);
    OZChannelBase::setID((this + 10904), 0x151u);
    OZChannelBase::setID((this + 11352), 0x152u);
    OZChannelBase::setID((this + 11512), 0x12Eu);
    OZChannelBase::setID((this + 13008), 0x12Fu);
    OZChannelBase::setID((this + 13264), 0x13Bu);
    OZChannelBase::setID((this + 13416), 0x140u);
    OZChannelBase::setID((this + 13568), 0x141u);
    OZChannelBase::setID((this + 13720), 0x14Au);
    OZChannelBase::setID((this + 13872), 0x159u);
    OZChannelBase::setID((this + 14024), 0x157u);
    OZChannelBase::setID((this + 14904), 0x15Au);
    OZChannelBase::setID((this + 15608), 0x15Bu);
    OZChannelBase::setID((this + 16312), 0x15Cu);
    OZChannelBase::setID((this + 17016), 0x15Du);
    OZChannelBase::setID((this + 17720), 0x15Eu);
    OZChannelBase::setID((this + 17872), 0x15Fu);
    OZChannelFolder::push_back(a2, (this + 208));
    OZChannelFolder::push_back(a2, (this + 1072));
    OZChannelFolder::push_back(a2, (this + 1328));
    OZChannelFolder::push_back(a2, (this + 1480));
    OZChannelFolder::push_back(a2, (this + 1632));
    OZChannelFolder::push_back(a2, (this + 1784));
    OZChannelFolder::push_back(a2, (this + 2784));
    OZChannelFolder::push_back(a2, (this + 6800));
    OZChannelFolder::push_back(a2, (this + 11512));
    OZChannelFolder::push_back(a2, (this + 12856));
    OZChannelFolder::push_back(a2, (this + 13008));
    OZChannelFolder::push_back(a2, (this + 13264));
    OZChannelFolder::push_back(a2, (this + 13416));
    OZChannelFolder::push_back(a2, (this + 13568));
    OZChannelFolder::push_back(a2, (this + 13720));
    OZChannelFolder::push_back(a2, (this + 13872));
    OZChannelFolder::push_back(a2, (this + 14024));
    OZChannelFolder::push_back(a2, (this + 14904));
    OZChannelFolder::push_back(a2, (this + 15608));
    OZChannelFolder::push_back(a2, (this + 16312));
    OZChannelFolder::push_back(a2, (this + 17016));
    OZChannelFolder::push_back(a2, (this + 17720));

    OZChannelFolder::push_back(a2, (this + 17872));
  }

  else
  {
    OZChannelFolder::removeDescendant((this + 80), (this + 12856));
    OZChannelFolder::removeDescendant((this + 80), (this + 2488));
    OZChannelFolder::removeDescendant((this + 80), (this + 14280));
    OZChannelFolder::removeDescendant(a2, (this + 208));
    OZChannelFolder::removeDescendant(a2, (this + 1072));
    OZChannelFolder::removeDescendant(a2, (this + 1328));
    OZChannelFolder::removeDescendant(a2, (this + 1480));
    OZChannelFolder::removeDescendant(a2, (this + 1632));
    OZChannelFolder::removeDescendant(a2, (this + 1784));
    OZChannelFolder::removeDescendant(a2, (this + 2784));
    OZChannelFolder::removeDescendant(a2, (this + 6800));
    OZChannelFolder::removeDescendant(a2, (this + 11512));
    OZChannelFolder::removeDescendant(a2, (this + 13008));
    OZChannelFolder::removeDescendant(a2, (this + 13264));
    OZChannelFolder::removeDescendant(a2, (this + 13416));
    OZChannelFolder::removeDescendant(a2, (this + 13568));
    OZChannelFolder::removeDescendant(a2, (this + 13720));
    OZChannelFolder::removeDescendant(a2, (this + 13872));
    OZChannelFolder::removeDescendant(a2, (this + 14024));
    OZChannelFolder::removeDescendant(a2, (this + 14904));
    OZChannelFolder::removeDescendant(a2, (this + 15608));
    OZChannelFolder::removeDescendant(a2, (this + 16312));
    OZChannelFolder::removeDescendant(a2, (this + 17016));
    OZChannelFolder::removeDescendant(a2, (this + 17720));
    OZChannelFolder::removeDescendant(a2, (this + 17872));
    OZChannelBase::setID((this + 208), 0x75u);
    OZChannelBase::setID((this + 1072), 0x64u);
    OZChannelBase::setID((this + 1328), 0x74u);
    OZChannelBase::setID((this + 1480), 0x90u);
    OZChannelBase::setID((this + 1632), 0x98u);
    OZChannelBase::setID((this + 1784), 0x81u);
    OZChannelBase::setID((this + 2784), 0x71u);
    OZChannelBase::setID(this + 26, 0x72u);
    OZChannelBase::setID((this + 3168), 0x6Fu);
    OZChannelBase::setID((this + 4176), 0x8Du);
    OZChannelBase::setID((this + 4328), 0x68u);
    OZChannelBase::setID((this + 6800), 0x6Cu);
    OZChannelBase::setID((this + 6928), 0x8Bu);
    OZChannelBase::setID((this + 7184), 0x6Bu);
    OZChannelBase::setID((this + 0x2000), 0x8Eu);
    OZChannelBase::setID((this + 8344), 0x69u);
    OZChannelBase::setID((this + 8496), 0x7Bu);
    OZChannelBase::setID((this + 8648), 0x70u);
    OZChannelBase::setID((this + 8904), 0x77u);
    OZChannelBase::setID((this + 9160), 0x86u);
    OZChannelBase::setID((this + 9416), 0x84u);
    OZChannelBase::setID((this + 9568), 0x85u);
    OZChannelBase::setID((this + 9720), 0x6Au);
    OZChannelBase::setID((this + 9976), 0x7Eu);
    OZChannelBase::setID((this + 10128), 0x7Fu);
    OZChannelBase::setID((this + 10280), 0x87u);
    OZChannelBase::setID((this + 10440), 0x80u);
    OZChannelBase::setID((this + 10592), 0x83u);
    OZChannelBase::setID((this + 10744), 0x88u);
    OZChannelBase::setID((this + 10904), 0x89u);
    OZChannelBase::setID((this + 11352), 0x8Au);
    OZChannelBase::setID((this + 11512), 0x66u);
    OZChannelBase::setID((this + 13008), 0x67u);
    OZChannelBase::setID((this + 13264), 0x73u);
    OZChannelBase::setID((this + 13416), 0x78u);
    OZChannelBase::setID((this + 13568), 0x79u);
    OZChannelBase::setID((this + 13720), 0x82u);
    OZChannelBase::setID((this + 13872), 0x91u);
    OZChannelBase::setID((this + 14024), 0x8Fu);
    OZChannelBase::setID((this + 14904), 0x92u);
    OZChannelBase::setID((this + 15608), 0x93u);
    OZChannelBase::setID((this + 16312), 0x94u);
    OZChannelBase::setID((this + 17016), 0x95u);
    OZChannelBase::setID((this + 17720), 0x96u);
    OZChannelBase::setID((this + 17872), 0x97u);
    OZChannelFolder::push_back((this + 80), (this + 208));
    OZChannelFolder::push_back((this + 80), (this + 1072));
    OZChannelFolder::push_back((this + 80), (this + 1328));
    OZChannelFolder::push_back((this + 80), (this + 1480));
    OZChannelFolder::push_back((this + 80), (this + 1632));
    OZChannelFolder::push_back((this + 80), (this + 1784));
    OZChannelFolder::push_back((this + 80), (this + 2488));
    OZChannelFolder::push_back((this + 80), (this + 2784));
    OZChannelFolder::push_back((this + 80), (this + 6800));
    OZChannelFolder::push_back((this + 80), (this + 11512));
    OZChannelFolder::push_back((this + 80), (this + 12856));
    OZChannelFolder::push_back((this + 80), (this + 13008));
    OZChannelFolder::push_back((this + 80), (this + 13264));
    OZChannelFolder::push_back((this + 80), (this + 13416));
    OZChannelFolder::push_back((this + 80), (this + 13568));
    OZChannelFolder::push_back((this + 80), (this + 13720));
    OZChannelFolder::push_back((this + 80), (this + 13872));
    OZChannelFolder::push_back((this + 80), (this + 14024));
    OZChannelFolder::push_back((this + 80), (this + 14280));
    OZChannelFolder::push_back((this + 80), (this + 14904));
    OZChannelFolder::push_back((this + 80), (this + 15608));
    OZChannelFolder::push_back((this + 80), (this + 16312));
    OZChannelFolder::push_back((this + 80), (this + 17016));
    OZChannelFolder::push_back((this + 80), (this + 17720));
    OZChannelFolder::push_back((this + 80), (this + 17872));

    OZChannelBase::resetFlag((this + 208), 0x40000000, 0);
  }
}

void *OZMoShape::completeLoading(OZMoShape *this, double a2)
{
  if (*(this + 2360))
  {
    if (a2 < 3.0)
    {
      (*(*(*(this + 2389) + 200) + 1128))(&v35);
      var0 = v35.var0;
      OZMoShape::initPPaintTime(this, &var0, &v35);
      v3 = (*(*(*(this + 2389) + 200) + 272))();
      OZScene::registerNode(v3, *(this + 2360));
      v4 = (*(*(*(this + 2389) + 200) + 272))();
      v5 = *(this + 2360);
      return OZScene::addAllDependencies(v4, v5);
    }

    result = (*(*(*(this + 2389) + 200) + 272))();
    if (result)
    {
      v21 = (*(*(*(this + 2389) + 200) + 272))();
      result = OZScene::getNode(v21, *(*(this + 2360) + 80));
      if (!result)
      {
        v22 = (*(*(*(this + 2389) + 200) + 272))();
        OZScene::registerNode(v22, *(this + 2360));
        v23 = (*(*(*(this + 2389) + 200) + 272))();
        v24 = *(this + 2360);

        return OZScene::addAllDependencies(v23, v24);
      }
    }
  }

  else
  {
    v6 = (*(*(*(this + 2389) + 200) + 272))(a2);
    if (*(theApp + 80) != 1)
    {
      goto LABEL_8;
    }

    if (OZBehavior::IsChannelAffectedByBehaviors((this + 6928), 0))
    {
      goto LABEL_8;
    }

    if (OZScene::isChannelPublished(v6, (this + 6928)))
    {
      goto LABEL_8;
    }

    v7 = OZRenderState::OZRenderState(&v35);
    v8 = PCColorSpaceCache::cgRec709Linear(v7);
    __asm { FMOV            V0.2D, #1.0 }

    v31 = 0;
    v32 = 0;
    v30 = 0;
    PCColorSpaceHandle::PCColorSpaceHandle(&v33, v8);
    var0 = v35.var0;
    var10 = v35.var10;
    var16 = v35.var16;
    v28 = *&v35.var1;
    v34 = 1065353216;
    v29 = 1;
    shouldDrawParticles = OZShape::shouldDrawParticles(this, &var0);
    result = PCCFRef<CGColorSpace *>::~PCCFRef(&v33);
    if (shouldDrawParticles)
    {
LABEL_8:
      v16 = theApp;
      *&v35.var0.var0 = xmmword_26084FA50;
      PCURL::PCURL(&var0, @"Emitter Name");
      OZChannelBase::getNextUniqueID(v17);
      *(this + 2360) = OZApplication::createSceneNode(v16, &v35);
      PCString::~PCString(&var0);
      v18 = (*(**(this + 2360) + 640))();
      OZChannelFolder::push_front((this + 18728), v18);
      (*(**(this + 2360) + 256))();
      v19 = (*(**(this + 2360) + 640))();
      OZChannelBase::setFlag(v19, 8, 0);
      v20 = *(this + 2360);
      if (v20)
      {
      }

      *(this + 2361) = v20;
      (*(*(*(this + 2389) + 200) + 1128))(&v35);
      var0 = v35.var0;
      OZMoShape::initPPaintTime(this, &var0, &v35);
      OZScene::registerNode(v6, *(this + 2360));
      v5 = *(this + 2360);
      v4 = v6;
      return OZScene::addAllDependencies(v4, v5);
    }
  }

  return result;
}

void OZMoShape::validateChannels(OZMoShape *this, const CMTime *a2, OZShapeRenderParams *a3, BOOL a4, int a5)
{
  OZChannel::getValueAsDouble((*(this + 2389) + 6880), a2, 0.0);
  if (*(a3 + 20) != v9 && a5 != 0)
  {
    *(a3 + 20) = v9;
  }

  v11 = (*(**(this + 2389) + 384))(*(this + 2389));
  if (*(a3 + 240) != v11 && a5 != 0)
  {
    *(a3 + 240) = v11;
    *(a3 + 596) = 257;
    *(a3 + 1194) = 1;
  }

  OZShape::validateChannels(this, a2, a3);
}

void OZMoShape::getHelium(uint64_t a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X2>, uint64_t a4@<X3>, uint64_t a5@<X4>, HGBitmapLoader **a6@<X8>)
{
  v11 = (*(**(a2 + 56) + 128))(*(a2 + 56), 43);
  v12 = v11 == 1;
  HostApplicationDelegate = OZApplication::getHostApplicationDelegate(theApp);
  v14 = OZHostApplicationDelegateHandler::wantsToCacheTopLevelGroupRender(HostApplicationDelegate);
  v59 = *(a2 + 56);
  PCWorkingColorVector::PCWorkingColorVector(&v65);
  v15 = Li3DEngineScene::sceneManager(*(a1 + 19112));
  OZLockingGroup::WriteSentry::WriteSentry(&v62, v15);
  OZMoShape::calcHashkey(a1);
  v65 = v63;
  OZLockingGroup::WriteSentry::~WriteSentry(&v62);
  PCSharedMutex::lock_shared((a1 + 18944));
  if ((v14 & 1) != 0 || (*(a2 + 24) & 1) != 0 || !*&vorr_s8(*&v65.var0, *&vextq_s8(v65, v65, 8uLL)))
  {
    v17 = 0;
    v16 = 1;
  }

  else
  {
    v16 = vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(v65, *(a1 + 19048)))));
    v17 = v16 ^ 1;
    if ((v16 & 1) == 0 && v11 == 1)
    {
      if ((*(a2 + 25) & 1) == 0)
      {
        MetalContext = HGGPURenderer::GetMetalContext(v59);
        v19 = OZMetalUtils::registryID(*(*(MetalContext + 16) + 16));
        v20 = *(a1 + 19088);
        if (v20)
        {
          v21 = a1 + 19088;
          do
          {
            v22 = *(v20 + 32);
            v23 = v22 >= v19;
            v24 = v22 < v19;
            if (v23)
            {
              v21 = v20;
            }

            v20 = *(v20 + 8 * v24);
          }

          while (v20);
          if (v21 != a1 + 19088 && v19 >= *(v21 + 32))
          {
            v25 = *(v21 + 40);
            if (v25)
            {
              v58 = HGObject::operator new(0x1F0uLL);
              HGBitmapLoader::HGBitmapLoader(v58, v25);
              v26 = 0;
              v12 = 0;
              *a6 = v58;
              v17 = 1;
              goto LABEL_25;
            }
          }
        }
      }

      v17 = 1;
    }
  }

  if (*(a2 + 25) == 1)
  {
    if (*(a1 + 19104))
    {
      goto LABEL_24;
    }
  }

  else if (*(a1 + 19064))
  {
    goto LABEL_24;
  }

  if (v11 != 1)
  {
    v16 = 1;
    v26 = 1;
    v12 = 1;
    goto LABEL_25;
  }

LABEL_24:
  v16 |= v11 == 1;
  v26 = 1;
LABEL_25:
  PCSharedMutex::unlock_shared((a1 + 18944));
  if (!v26)
  {
    return;
  }

  v64 = 0;
  if (v16)
  {
    OZShapeRenderParams::OZShapeRenderParams(&v63);
    v27 = Li3DEngineScene::sceneManager(*(a1 + 19112));
    OZLockingGroup::WriteSentry::WriteSentry(&v62, v27);
    v28 = (*(*a1 + 72))(a1, a2, a3, a4, a5, &v63);
    OZLockingGroup::WriteSentry::~WriteSentry(&v62);
    if (v28)
    {
      (*(*a1 + 80))(&v62, a1, a2, a3, a4, &v63);
      v29 = *&v62.var0;
      if (v64 != *&v62.var0)
      {
        if (v64)
        {
          (*(*v64 + 24))(v64);
          v29 = *&v62.var0;
        }

        v64 = v29;
        if (!v29)
        {
          goto LABEL_41;
        }

        goto LABEL_36;
      }

      if (v64)
      {
        (*(**&v62.var0 + 24))();
        if (v64)
        {
LABEL_36:
          OZShapeRenderParams::~OZShapeRenderParams(&v63);
          goto LABEL_37;
        }
      }
    }

LABEL_41:
    *a6 = 0;
    OZShapeRenderParams::~OZShapeRenderParams(&v63);
    goto LABEL_73;
  }

LABEL_37:
  PCSharedMutex::lock((a1 + 18944));
  if ((v17 & 1) == 0)
  {
    if ((*(a2 + 24) & 1) == 0)
    {
      *(a1 + 19048) = v65;
      v33 = *(a1 + 19072);
      *(a1 + 19064) = 0u;
      if (v33)
      {
        std::__shared_weak_count::__release_shared[abi:ne200100](v33);
      }

      std::__tree<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,HGRef<HGMetalTexture>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,HGRef<HGMetalTexture>>>>::destroy(a1 + 19080, *(a1 + 19088));
      *(a1 + 19080) = a1 + 19088;
      *(a1 + 19088) = 0u;
      v34 = *(a1 + 19104);
      if (v34)
      {
        (*(*v34 + 24))(v34);
        *(a1 + 19104) = 0;
      }
    }

    goto LABEL_47;
  }

  if (!v12)
  {
LABEL_64:
    if (*(a2 + 25) == 1)
    {
      v44 = *(a1 + 19104);
      v45 = HGObject::operator new(0x1F0uLL);
      HGBitmapLoader::HGBitmapLoader(v45, v44);
      *a6 = v45;
    }

    else
    {
      v46 = PGHelium::convertBitsPerChannel(*(*(a1 + 19064) + 40), *(*(a1 + 19064) + 36), 0);
      v63 = xmmword_26084A5D0;
      PGTexture::getTexCoords(*(a1 + 19064), &v63);
      v47 = HGRectMake4i(*&v63.var0, *&v63.var1, *&v63.var2 + *&v63.var0, *&v63.var3 + *&v63.var1);
      v49 = v48;
      Name = ProGL::TextureHandle::getName((*(a1 + 19064) + 64));
      v51 = *(a2 + 56);
      v52 = HGObject::operator new(0xC8uLL);
      HGGLTexture::HGGLTexture(v52, v47, v49, v46, v51, Name, 1);
      v53 = HGObject::operator new(0x20uLL);
      v54 = v53;
      v55 = *(a1 + 19064);
      v56 = *(a1 + 19072);
      if (v56)
      {
        atomic_fetch_add_explicit(&v56->__shared_owners_, 1uLL, memory_order_relaxed);
      }

      HGObject::HGObject(v53);
      *v54 = &unk_287296578;
      *(v54 + 2) = v55;
      *(v54 + 3) = v56;
      if (v56)
      {
        atomic_fetch_add_explicit(&v56->__shared_owners_, 1uLL, memory_order_relaxed);
        std::__shared_weak_count::__release_shared[abi:ne200100](v56);
      }

      HGBitmap::SetStorage(v52, v54);
      v57 = HGObject::operator new(0x1F0uLL);
      HGBitmapLoader::HGBitmapLoader(v57, v52);
      *a6 = v57;
      (*(*v54 + 24))(v54);
      if (v52)
      {
        (*(*v52 + 24))(v52);
      }
    }

    goto LABEL_72;
  }

  v30 = *(a2 + 72);
  WorkingColorSpace = OZRenderParams::getWorkingColorSpace(v30);
  *&v63.var0 = 0;
  *&v63.var2 = 0;
  *&v63.var0 = HGRenderer::GetDOD(*(a2 + 56), v64);
  *&v63.var2 = v32;
  HGRect::Init(&v62, -1, -1, 1, 1);
  HGRect::Grow(&v63, v62);
  *&v62.var0 = 0;
  if (HGRectIsNull(*&v63.var0, *&v63.var2))
  {
    *&v62.var2 = -1;
LABEL_49:
    *a6 = 0;
    goto LABEL_72;
  }

  *&v35.var0 = vmax_s32(*&v63.var0, vdup_n_s32(0xC0000001));
  v36 = vsub_s32(vmin_s32(*&v63.var2, vdup_n_s32(0x3FFFFFFEu)), *&v35.var0);
  *&v35.var2 = v36;
  v62 = v35;
  *&v35.var0 = vcgt_u32(vdup_n_s32(0xFFFE7960), vadd_s32(v36, vdup_n_s32(0xFFFE795F)));
  if ((v35.var0 | v35.var1))
  {
    goto LABEL_49;
  }

  if (v11 != 1)
  {
    if (*(a2 + 25) == 1)
    {
      v38 = vcgt_u32(0x80000000800, v36);
      if (v38.i32[0] & v38.i32[1])
      {
        PGHelium::renderNodeToBitmap(*(a2 + 56), &v64, &v62, *(v30 + 340));
      }

      *a6 = v64;
      v64 = 0;
      goto LABEL_72;
    }

    v39 = PGGetPerThreadContext();
    VirtualScreen = PGContext::getVirtualScreen(v39);
    BitsPerChannel = PCPixelFormat::getBitsPerChannel(*(v30 + 340));
    MaxTextureSize = PGInfo::getMaxTextureSize(VirtualScreen, BitsPerChannel);
    if (v62.var2 >= 1 && MaxTextureSize > v62.var2 && v62.var3 >= 1 && MaxTextureSize > v62.var3)
    {
      PGHelium::renderNodeToTexture(*(a2 + 56), &v64, &v62, *(v30 + 340), WorkingColorSpace, (v30 + 1316));
    }

    v43 = *(a1 + 19064);
    if (!v43)
    {
      goto LABEL_47;
    }

    v61 = vcvtq_f32_s32(v62);
    PGTexture::setTexCoords(v43, &v61);
    *(a1 + 19048) = v65;
    goto LABEL_64;
  }

  v37 = PGHelium::convertBitsPerChannel(*(v30 + 336), *(v30 + 332), 0);
  if (HGGPURenderer::ShouldAllocateTexture(v59, v63.var2 - v63.var0, v63.var3 - v63.var1, v37, 1, 0))
  {
    PGHelium::renderNodeToMetalTexture(*(a2 + 56), &v64, &v62, *(v30 + 340), WorkingColorSpace, (v30 + 1316));
  }

LABEL_47:
  *a6 = v64;
  v64 = 0;
LABEL_72:
  PCSharedMutex::unlock((a1 + 18944));
LABEL_73:
  if (v64)
  {
    (*(*v64 + 24))(v64);
  }
}

void sub_2601B9A84(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, char a19)
{
  if (v21)
  {
    (*(*v21 + 24))(v21);
  }

  if (v20)
  {
    std::__shared_weak_count::__release_shared[abi:ne200100](v20);
  }

  PCSharedMutex::unlock(v19 + 296);
  v24 = *(v22 - 120);
  if (v24)
  {
    (*(*v24 + 24))(v24);
  }

  _Unwind_Resume(a1);
}

void OZMoShape::calcHashkey(uint64_t a1)
{
  v1 = MEMORY[0x28223BE20](a1);
  v3 = v2;
  v4 = v1;
  v6 = v5;
  v33[520] = *MEMORY[0x277D85DE8];
  PCWorkingColorVector::PCWorkingColorVector(v5);
  v7 = *(v3 + 48);
  v30[2] = *(v3 + 32);
  v30[3] = v7;
  v30[4] = *(v3 + 64);
  v8 = *(v3 + 16);
  v30[0] = *v3;
  v30[1] = v8;
  v9 = *(v3 + 80);
  v31 = v9;
  if (v9)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v9);
  }

  v32 = *(v3 + 88);
  CurrentRenderParams = OZShape::getCurrentRenderParams(v4, v30);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v31);
  v12 = *(v3 + 64);
  v11 = *(v3 + 72);
  PCHashWriteStream::PCHashWriteStream(v33);
  if (*(CurrentRenderParams + 12) != 1 || ((*(**(v4 + 18888) + 80))(*(v4 + 18888), v3) & 1) == 0)
  {
    RenderQuality = OZRenderParams::getRenderQuality(v11);
    PCHashWriteStream::writeValue(v33, RenderQuality);
    PCHashWriteStream::writeValue(v33, *(v3 + 32));
    PCHashWriteStream::writeValue(v33, *(v3 + 40));
    v14 = (*(*v4 + 416))(v4);
    PCHashWriteStream::writeValue(v33, v14);
    PCHashWriteStream::writeValue(v33, v11[81]);
    PCHashWriteStream::writeValue(v33, v11[82]);
    PCHashWriteStream::writeValue(v33, v11[83]);
    PCHashWriteStream::writeValue(v33, v11[80]);
    PCHashWriteStream::writeValue(v33, v11[84]);
    PCHashWriteStream::writeValue(v33, v11[85]);
    PCHashWriteStream::writeValue(v33, v11[88]);
    PCHashWriteStream::writeValue(v33, v11[89]);
    DoShapeAntialiasing = OZRenderParams::getDoShapeAntialiasing(v11);
    PCHashWriteStream::writeValue(v33, DoShapeAntialiasing);
    PCHashWriteStream::writeValue(v33, v11[123]);
    shouldDrawSecondPassGradientInHelium = OZShape::shouldDrawSecondPassGradientInHelium(v4, v3, CurrentRenderParams);
    PCHashWriteStream::writeValue(v33, shouldDrawSecondPassGradientInHelium);
    shouldDrawSecondPassOutline = OZShape::shouldDrawSecondPassOutline(v4, CurrentRenderParams);
    PCHashWriteStream::writeValue(v33, shouldDrawSecondPassOutline);
    shouldDrawAntialiasingOnFill = OZShape::shouldDrawAntialiasingOnFill(v4, CurrentRenderParams);
    PCHashWriteStream::writeValue(v33, shouldDrawAntialiasingOnFill);
    shouldDrawSoftEdges = OZShape::shouldDrawSoftEdges(v4, CurrentRenderParams);
    PCHashWriteStream::writeValue(v33, shouldDrawSoftEdges);
    PCHashWriteStream::writeValue(v33, *(CurrentRenderParams + 240));
    PCColorSpaceHandle::getMD5((v3 + 80), v29);
    PCHashWriteStream::writeValue(v33, v29);
    PCHashWriteStream::writeValue(v33, *(CurrentRenderParams + 112));
    v20 = 0;
    v21 = *(v12 + 20);
    do
    {
      for (i = 0; i != 32; i += 8)
      {
        (*(*v33 + 88))(v33, *(v21 + i));
      }

      ++v20;
      v21 += 32;
    }

    while (v20 != 4);
    v23 = OZRotoshape::calcHashForStateSelfOnly(*(v4 + 19112), v33, v11);
    if (*(CurrentRenderParams + 12) == 1)
    {
      if ((*(**(v4 + 18888) + 64))(*(v4 + 18888), v23))
      {
        LiAgent::getImageToWorldTransform(v12, v28);
        LiAgent::getWorldToFilmTransform(v12, v27);
        PCMatrix44Tmpl<double>::operator*(v28, v27, v29);
        v24 = 0;
        v25 = v29;
        do
        {
          for (j = 0; j != 32; j += 8)
          {
            (*(*v33 + 88))(v33, *&v25[j]);
          }

          ++v24;
          v25 += 32;
        }

        while (v24 != 4);
      }

      (*(**(v4 + 18888) + 88))(*(v4 + 18888), v33, v11);
    }

    *v6 = *PCHashWriteStream::getHash(v33)->i8;
  }

  PCHashWriteStream::~PCHashWriteStream(v33);
}

PCMutex *OZMoShape::getEdgeTextureHeliumNode@<X0>(const void *a1@<X1>, unsigned int a2@<W2>, HGBitmapLoader **a3@<X8>)
{
  if (a2 - 1 >= 6)
  {
    v4 = 0;
  }

  else
  {
    v4 = a2;
  }

  return LiEdgeTexture::getHeliumNode(a1, v4, a3);
}

uint64_t OZMoShape::getScale(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v7 = *(a1 + 19112);
  OZRenderState::OZRenderState(&v9);
  *&v9.var0.var0 = *a4;
  v9.var0.var3 = *(a4 + 16);
  v9.var10 = *(a4 + 24);
  v9.var16 = *(a4 + 26);
  *&v9.var1 = *(a4 + 32);
  return (*(*(v7 + 200) + 1312))(v7 + 200, a2, a3, 0, &v9, 0);
}

unint64_t OZMoShape::calcHashForState(OZMoShape *this, PCSerializerWriteStream *a2, const CMTime *a3)
{
  OZShape::calcHashForState(this, a2, a3);
  ValueAsInt = OZChannel::getValueAsInt((this + 6928), MEMORY[0x277CC08F0], 0.0);
  result = OZChannelBase::isEnabled((this + 6800), 0, 1);
  if (result && (ValueAsInt - 1) <= 1)
  {

    return OZChannelFolder::calcHashForState((this + 18728), a2, a3);
  }

  return result;
}

void OZMoShape::getShapeBounds(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  if (*(a4 + 12) == 1 && !*(a4 + 120))
  {
    v6 = *(a1 + 18888);
    OZRenderState::OZRenderState(&v7);
    *&v7.var0.var0 = *a3;
    v7.var0.var3 = *(a3 + 16);
    v7.var10 = *(a3 + 24);
    v7.var16 = *(a3 + 26);
    *&v7.var1 = *(a3 + 32);
    (*(*v6 + 48))(v6, a2, &v7);
  }

  else
  {

    OZShape::getShapeBounds(a1, a2, a3, a4);
  }
}

uint64_t OZMoShape::setDirty(OZMoShape *this, char a2, int a3)
{
  OZShape::setDirty(this, a2, a3);
  result = *(this + 2361);
  if (result)
  {
    v5 = *(*result + 160);

    return v5();
  }

  return result;
}

CGColorSpace **OZMoShape::finishCurve(OZMoShape *this, const CMTime *a2)
{
  v4 = (*(*(*(this + 2389) + 200) + 1328))();
  OZChannel::setValue((this + 2488), MEMORY[0x277CC08F0], v4, 0);

  return OZShape::finishCurve(this, a2, 1);
}

CGColorSpace **OZMoShape::getOriginalBounds(uint64_t a1, uint64_t a2, __int128 *a3)
{
  v6 = (a1 + 8);
  v27 = a1 + 8;
  PCMutex::lock((a1 + 8));
  v28 = 1;
  v7 = a3[3];
  v24[2] = a3[2];
  v24[3] = v7;
  v24[4] = a3[4];
  v8 = a3[1];
  v24[0] = *a3;
  v24[1] = v8;
  v9 = *(a3 + 10);
  v25 = v9;
  if (v9)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v9);
  }

  v26 = *(a3 + 22);
  CurrentRenderParams = OZShape::getCurrentRenderParams(a1, v24);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v25);
  v11 = a3[3];
  v19 = a3[2];
  v20 = v11;
  v21 = a3[4];
  v12 = a3[1];
  v17 = *a3;
  v18 = v12;
  v13 = *(a3 + 10);
  v22 = v13;
  if (v13)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v13);
  }

  v23 = *(a3 + 22);
  BYTE10(v18) = 0;
  (*(*a1 + 64))(a1, &v17, CurrentRenderParams, 0, 1);
  if (*(CurrentRenderParams + 12) == 1 && !*(CurrentRenderParams + 120))
  {
    PCMutex::unlock(v6);
    v28 = 0;
    v15 = *(a1 + 18888);
    OZRenderState::OZRenderState(&v16);
    *&v16.var0.var0 = *a3;
    v16.var0.var3 = *(a3 + 2);
    v16.var10 = *(a3 + 24);
    v16.var16 = *(a3 + 26);
    *&v16.var1 = a3[2];
    (*(*v15 + 48))(v15, a2, &v16);
    return PCCFRef<CGColorSpace *>::~PCCFRef(&v22);
  }

  else
  {
    (*(*a1 + 24))(a1, a2, &v17, CurrentRenderParams);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v22);
    return PCMutex::unlock(v6);
  }
}

void sub_2601BA780(_Unwind_Exception *a1)
{
  PCCFRef<CGColorSpace *>::~PCCFRef((v1 + 80));
  PCLockSentry<PCMutex>::~PCLockSentry(v2 - 80);
  _Unwind_Resume(a1);
}

uint64_t OZMoShape::getUIBounds(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v6 = (a1 + 8);
  v17 = a1 + 8;
  PCMutex::lock((a1 + 8));
  v18 = 1;
  v7 = *(a3 + 48);
  v14[2] = *(a3 + 32);
  v14[3] = v7;
  v14[4] = *(a3 + 64);
  v8 = *(a3 + 16);
  v14[0] = *a3;
  v14[1] = v8;
  v9 = *(a3 + 80);
  v15 = v9;
  if (v9)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v9);
  }

  v16 = *(a3 + 88);
  CurrentRenderParams = OZShape::getCurrentRenderParams(a1, v14);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v15);
  (*(*a1 + 64))(a1, a3, CurrentRenderParams, 0, 1);
  if (*(CurrentRenderParams + 12) == 1 && !*(CurrentRenderParams + 120))
  {
    PCMutex::unlock(v6);
    v18 = 0;
    v12 = *(a1 + 18888);
    OZRenderState::OZRenderState(&v13);
    *&v13.var0.var0 = *a3;
    v13.var0.var3 = *(a3 + 16);
    v13.var10 = *(a3 + 24);
    v13.var16 = *(a3 + 26);
    *&v13.var1 = *(a3 + 32);
    return (*(*v12 + 48))(v12, a2, &v13);
  }

  else
  {
    (*(*a1 + 24))(a1, a2, a3, CurrentRenderParams);
    return PCMutex::unlock(v6);
  }
}

void OZMoShape::createSnapSet(uint64_t a1, double *a2, uint64_t a3, uint64_t a4, int a5, int a6, int a7)
{
  v14 = (a1 + 8);
  v78 = a1 + 8;
  PCMutex::lock((a1 + 8));
  v79 = 1;
  v15 = *(a4 + 48);
  v75[2] = *(a4 + 32);
  v75[3] = v15;
  v75[4] = *(a4 + 64);
  v16 = *(a4 + 16);
  v75[0] = *a4;
  v75[1] = v16;
  v17 = *(a4 + 80);
  v76 = v17;
  if (v17)
  {
    PCCFRefTraits<CGColorSpace *>::retain(v17);
  }

  v77 = *(a4 + 88);
  CurrentRenderParams = OZShape::getCurrentRenderParams(a1, v75);
  Contour = OZShape::getContour(a1, a4, CurrentRenderParams);
  PCCFRef<CGColorSpace *>::~PCCFRef(&v76);
  if (Contour[5] >= 0.0 && Contour[6] >= 0.0 && (OZDynamicCurve::getNumberOfValidKeypoints((a1 + 496), a4) > 3 || OZShape::isGeometricShape(a1)))
  {
    v21 = Contour[3];
    v20 = Contour[4];
    v22 = Contour[5];
    v23 = Contour[6];
    PCMutex::unlock(v14);
    v79 = 0;
    v24 = a2[12];
    v25 = a2[13];
    v26 = v21 * v24;
    v27 = (v20 + v23) * v25;
    v28 = a2[15];
    v29 = v28 + v21 * v24 + v27;
    v30 = a2[1];
    v31 = v21 * *a2;
    v32 = (v20 + v23) * v30;
    v33 = a2[3];
    v34 = a2[4];
    v35 = (v33 + v31 + v32) / v29;
    v36 = v21 * v34;
    v37 = a2[5];
    v38 = (v20 + v23) * v37;
    v39 = a2[7];
    v40 = (v39 + v21 * v34 + v38) / v29;
    v41 = COERCE__INT64(fabs(v40)) < 0x7FF0000000000000;
    if (COERCE__INT64(fabs(v35)) <= 0x7FEFFFFFFFFFFFFFLL && v41)
    {
      v42 = (v21 + v22) * v24;
      v43 = v28 + v42 + v27;
      v44 = (v21 + v22) * *a2;
      v45 = (v33 + v44 + v32) / v43;
      v46 = (v21 + v22) * v34;
      v47 = (v39 + v46 + v38) / v43;
      if ((*&v45 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL && (*&v47 & 0x7FFFFFFFFFFFFFFFuLL) < 0x7FF0000000000000)
      {
        v48 = v20 * v25;
        v49 = v28 + v26 + v20 * v25;
        v50 = v20 * v30;
        v51 = (v33 + v31 + v50) / v49;
        v52 = (v39 + v36 + v20 * v37) / v49;
        if ((*&v51 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL && (*&v52 & 0x7FFFFFFFFFFFFFFFuLL) < 0x7FF0000000000000)
        {
          v53 = v28 + v42 + v48;
          v54 = (v33 + v44 + v50) / v53;
          v55 = (v39 + v46 + v20 * v37) / v53;
          if ((*&v54 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL && (*&v55 & 0x7FFFFFFFFFFFFFFFuLL) < 0x7FF0000000000000)
          {
            if (v54 <= v51)
            {
              v56 = v54;
            }

            else
            {
              v56 = v51;
            }

            if (v54 < v51)
            {
              v54 = v51;
            }

            if (v45 <= v56)
            {
              v56 = v45;
            }

            if (v35 <= v56)
            {
              v57 = v35;
            }

            else
            {
              v57 = v56;
            }

            if (v45 >= v54)
            {
              v54 = v45;
            }

            if (v35 >= v54)
            {
              v58 = v35;
            }

            else
            {
              v58 = v54;
            }

            if (v55 <= v52)
            {
              v59 = v55;
            }

            else
            {
              v59 = v52;
            }

            if (v55 < v52)
            {
              v55 = v52;
            }

            if (v47 <= v59)
            {
              v59 = v47;
            }

            if (v40 <= v59)
            {
              v60 = v40;
            }

            else
            {
              v60 = v59;
            }

            if (v47 >= v55)
            {
              v61 = v47;
            }

            else
            {
              v61 = v55;
            }

            if (v40 >= v61)
            {
              v62 = v40;
            }

            else
            {
              v62 = v61;
            }

            if (*(a1 + 18872) == 1)
            {
              if (a7)
              {
                OZChannelCurve::getEnabledVerticesList((a1 + 208), a4, &v73);
                v64 = v73;
                v63 = v74;
                if (v73 != v74)
                {
                  do
                  {
                    v65 = *v64;
                    if (*v64 != *(a1 + 18856))
                    {
                      v66 = v64[1];
                      if (v66 != *(a1 + 18864))
                      {
                        v70 = 0.0;
                        v71 = 0.0;
                        v72 = 0;
                        v68 = 0.0;
                        v69 = 0.0;
                        OZChannelCurve::getVertexValue(a1 + 208, v65, v66, a4, &v69, &v68);
                        v70 = v69;
                        v71 = v68;
                        v72 = 0;
                        PCMatrix44Tmpl<double>::transform<double>(a2, &v70, &v70);
                        if ((*&v70 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL && (*&v71 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL && (v72 & 0x7FFFFFFFFFFFFFFFuLL) <= 0x7FEFFFFFFFFFFFFFLL)
                        {
                          OZSnap::OZSnap(v67, 258, v70, v60, v62);
                          std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, v67);
                          OZSnap::OZSnap(v67, 514, v71, v57, v58);
                          std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, v67);
                        }

                        v63 = v74;
                      }
                    }

                    v64 += 2;
                  }

                  while (v64 != v63);
                  v64 = v73;
                }

                if (v64)
                {
                  v74 = v64;
                  operator delete(v64);
                }
              }
            }

            else
            {
              if (a5)
              {
                OZSnap::OZSnap(&v73, 258, (v57 + v58) * 0.5, v60, v62);
                std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, &v73);
                OZSnap::OZSnap(&v73, 514, (v60 + v62) * 0.5, v57, v58);
                std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, &v73);
              }

              if (a6)
              {
                OZSnap::OZSnap(&v73, 257, v57, v60, v62);
                std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, &v73);
                OZSnap::OZSnap(&v73, 260, v58, v60, v62);
                std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, &v73);
                OZSnap::OZSnap(&v73, 513, v60, v57, v58);
                std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, &v73);
                OZSnap::OZSnap(&v73, 516, v62, v57, v58);
                std::__tree<OZSnap>::__emplace_unique_key_args<OZSnap,OZSnap>(a3, &v73);
              }
            }
          }
        }
      }
    }
  }

  else
  {
    PCMutex::unlock(v14);
  }
}

uint64_t OZMoShape::getCurveSamplesForOSC@<X0>(uint64_t a1@<X0>, void *a2@<X8>)
{
  *a2 = 0;
  a2[1] = 0;
  a2[2] = 0;
  PCMutex::lock((a1 + 8));
  return PCMutex::unlock((a1 + 8));
}

uint64_t OZMoShape::getHasPenPropertyInfo(OZMoShape *this)
{
  if ((*(*(this + 1343) + 560))() & 1) != 0 || ((*(*(this + 1363) + 560))(this + 10904) & 1) != 0 || ((*(*(this + 1419) + 560))(this + 11352) & 1) != 0 || ((*(*(this + 1380) + 560))(this + 11040))
  {
    return 1;
  }

  v3 = *(*(this + 1399) + 560);

  return v3();
}

OZChannelBase *OZMoShape::setParticlePaint(OZMoShape *this, OZSceneNode *lpsrc, unsigned int a3)
{
  v7 = (v6 + 56);
  *(this + 2360) = v6;
  OZChannelBase::setID(v7, a3);
  (*(**(this + 2360) + 256))();
  v8 = (*(**(this + 2360) + 640))();
  OZChannelFolder::push_front((this + 18728), v8);
  v9 = (*(*lpsrc + 640))(lpsrc);

  return OZChannelBase::resetFlag(v9, 64, 0);
}

uint64_t OZMoShape::resetParticlePaint(OZMoShape *this)
{
  v1 = (this + 18880);
  result = *(this + 2360);
  if (result)
  {
    result = (*(*result + 8))(result);
  }

  *v1 = 0;
  v1[1] = 0;
  return result;
}

void OZMoShape::applyStyle(OZMoShape *this, const OZMoShape *a2)
{
  v4 = *(this + 2340);
  if (v4)
  {
    OZGradientGroupShader::~OZGradientGroupShader(v4);
    MEMORY[0x2666E9F00]();
    *(this + 2340) = 0;
  }

  OZShapeRenderParams::operator=(*(this + 333), *(a2 + 333));
  OZShapeRenderParams::operator=(*(this + 334), *(a2 + 334));
  OZChannelFolder::operator=(this + 2784);
  OZChannelFolder::operator=(this + 4328);
  OZChannelFolder::operator=(this + 4456);
  OZChannelFolder::operator=(this + 4584);
  OZChannelBase::operator=(this + 4712, a2 + 4712);
  OZChannelBase::operator=(this + 4864, a2 + 4864);
  v5 = *(a2 + 5124);
  *(this + 1280) = *(a2 + 1280);
  *(this + 5124) = v5;
  OZChannelBase::operator=(this + 6928, a2 + 6928);
  OZChannelBase::operator=(this + 8496, a2 + 8496);
  OZChannelBase::operator=(this + 8648, a2 + 8648);
  OZChannelBase::operator=(this + 8904, a2 + 8904);
  OZChannelBase::operator=(this + 9160, a2 + 9160);
  OZChannelBase::operator=(this + 9416, a2 + 9416);
  OZChannelBase::operator=(this + 9568, a2 + 9568);
  OZChannelBase::operator=(this + 9720, a2 + 9720);
  OZChannelBase::operator=(this + 9976, a2 + 9976);
  OZChannelBase::operator=(this + 10128, a2 + 10128);
  OZChannelBase::operator=(this + 10440, a2 + 10440);
  OZChannelBase::operator=(this + 10592, a2 + 10592);
  OZChannelBase::operator=(this + 11512, a2 + 11512);
  OZChannelBase::operator=(this + 11664, a2 + 11664);
  *(this + 2640) = *(a2 + 2640);
  v6 = *(this + 2360);
  if (v6)
  {
    v7 = *(this + 2389);
    v8 = (v7 + 1200);
    if (v7 + 1200 != *(v7 + 1208))
    {
      do
      {
        (*(**(*v8 + 16) + 120))(*(*v8 + 16));
        v8 = *v8;
      }

      while (v8 != *(v7 + 1208));
      v7 = *(this + 2389);
    }

    v9 = (*(*(v7 + 200) + 272))(v7 + 200);
    if (v9)
    {
      v10 = v9;
      OZScene::unregisterNode(v9, *(this + 2360));
      OZScene::removeAllDependencies(v10, *(this + 2360));
    }

    v11 = (*(**(this + 2360) + 640))(*(this + 2360));
    OZChannelFolder::removeDescendant((this + 18728), v11);
    v12 = *(this + 2360);
    if (v12)
    {
      (*(*v12 + 8))(v12);
    }

    *(this + 2360) = 0;
  }

  v13 = (*(**(*(a2 + 2360) + 8) + 24))(*(*(a2 + 2360) + 8), *(a2 + 2360), 2);
  *(this + 2360) = v14;
  (*(*v14 + 256))();
  v15 = *(this + 2360);
  v16 = *v15;
  v17 = (*(v16 + 640))(v15);
  OZChannelFolder::push_front((this + 18728), v17);
  v18 = *(this + 2389);
  if (v6)
  {
    v19 = (v18 + 1200);
    if (v18 + 1200 != *(v18 + 1208))
    {
      do
      {
        v20 = *(this + 2389);
        if (v20)
        {
          v21 = v20 + 200;
        }

        else
        {
          v21 = 0;
        }

        (*(**(*v19 + 16) + 96))(*(*v19 + 16), v21);
        v19 = *v19;
      }

      while (v19 != *(v18 + 1208));
      v18 = *(this + 2389);
    }
  }

  (*(*(v18 + 200) + 1128))(v27, v18 + 200);
  v26 = v27[0];
  OZMoShape::initPPaintTime(this, &v26, v27);
  v22 = *(this + 2360);
  (*(*(*(this + 2389) + 200) + 1328))();
  (*(*v22 + 1344))(v22);
  *(this + 2361) = v23;
  (*(*v23 + 32))(v23);
  if ((*(*(*(this + 2389) + 200) + 272))())
  {
    v24 = (*(*(*(this + 2389) + 200) + 272))();
    OZScene::registerNode(v24, *(this + 2360));
    v25 = (*(*(*(this + 2389) + 200) + 272))();
    OZDocument::postNotification(*(v25 + 1584), 0x80000);
  }
}

uint64_t OZMoShape::openMedia(OZMoShape *this)
{
  result = *(this + 2360);
  if (result)
  {
    return (*(*result + 104))();
  }

  return result;
}

uint64_t OZMoShape::prerollBegin(uint64_t a1)
{
  result = *(a1 + 18880);
  if (result)
  {
    return (*(*result + 112))();
  }

  return result;
}

uint64_t OZMoShape::prerollEnd(uint64_t a1)
{
  result = *(a1 + 18880);
  if (result)
  {
    return (*(*result + 120))();
  }

  return result;
}

uint64_t OZMoShape::setRate(uint64_t a1)
{
  result = *(a1 + 18880);
  if (result)
  {
    return (*(*result + 128))();
  }

  return result;
}

uint64_t OZMoShape::scheduleTokens(uint64_t a1)
{
  result = *(a1 + 18880);
  if (result)
  {
    return (*(*result + 136))();
  }

  return result;
}

uint64_t OZMoShape::hintTokensWillImage(uint64_t a1)
{
  result = *(a1 + 18880);
  if (result)
  {
    return (*(*result + 144))();
  }

  return result;
}

uint64_t OZMoShape::getTokensImage(uint64_t a1)
{
  result = *(a1 + 18880);
  if (result)
  {
    return (*(*result + 152))();
  }

  return result;
}

uint64_t OZMoShape::pruneTokensAtTime(OZMoShape *this, CMTime *a2, const char *a3)
{
  result = *(this + 2360);
  if (result)
  {
    v4 = *a2;
    return (*(*result + 160))(result, &v4, a3);
  }

  return result;
}

uint64_t OZMoShape::pruneTokensExceptAtTime(OZMoShape *this, CMTime *a2, const char *a3)
{
  result = *(this + 2360);
  if (result)
  {
    v4 = *a2;
    return (*(*result + 168))(result, &v4, a3);
  }

  return result;
}

uint64_t OZMoShape::pruneAllTokens(OZMoShape *this, const char *a2)
{
  result = *(this + 2360);
  if (result)
  {
    return (*(*result + 176))(result, a2);
  }

  return result;
}

double OZShape::getIntrinsicTransform@<D0>(uint64_t a1@<X8>)
{
  *(a1 + 120) = 0x3FF0000000000000;
  *(a1 + 80) = 0x3FF0000000000000;
  *(a1 + 40) = 0x3FF0000000000000;
  *a1 = 0x3FF0000000000000;
  result = 0.0;
  *(a1 + 8) = 0u;
  *(a1 + 24) = 0u;
  *(a1 + 48) = 0u;
  *(a1 + 64) = 0u;
  *(a1 + 88) = 0u;
  *(a1 + 104) = 0u;
  return result;
}

void OZShape::getIntrinsicPosition(OZShape *this, CMTime *a2, double *a3, double *a4)
{
  if (a3)
  {
    *a3 = 0.0;
  }

  if (a4)
  {
    *a4 = 0.0;
  }
}

uint64_t OZCrop::getBoundary(uint64_t a1, uint64_t a2, float64x2_t *a3)
{
  v5 = *(a1 + 16);
  if (!v5)
  {
    throw_PCNullPointerException(1);
  }

  v6 = (*(*v5 + 24))(v5, a2, a3);
  if (v6)
  {
    PCRect<double>::operator&=(a3, (a1 + 40));
  }

  return v6;
}

void OZCrop::getHelium(OZCrop *this@<X0>, __n128 *a2@<X1>, void *a3@<X8>)
{
  if (*(this + 7) <= 0.0 || *(this + 8) <= 0.0)
  {
    *a3 = 0;
    return;
  }

  v26 = 0uLL;
  __asm { FMOV            V0.2D, #-1.0 }

  v27 = _Q0;
  v28 = xmmword_260343AA0;
  v11 = a2[10].n128_u64[0];
  v12 = v11[3];
  v14 = *v11;
  v13 = v11[1];
  v25[2] = v11[2];
  v25[3] = v12;
  v25[0] = v14;
  v25[1] = v13;
  v15 = v11[7];
  v17 = v11[4];
  v16 = v11[5];
  v25[6] = v11[6];
  v25[7] = v15;
  v25[4] = v17;
  v25[5] = v16;
  if (PCMatrix44Tmpl<double>::transformRect<double>(v25, this + 5, &v26))
  {
    v18 = vmovn_s64(vcvtq_s64_f64(vrndmq_f64(vaddq_f64(v26, vdupq_n_s64(0x3E7AD7F29ABCAF48uLL)))));
    v19 = vmovn_s64(vcvtq_s64_f64(vrndpq_f64(vaddq_f64(v26, v27))));
    *&v28 = v18;
    *(&v28 + 1) = vsub_s32(v19, v18);
    v21 = *(&v28 + 1);
    if (LiAgent::haveROI(a2))
    {
      LiAgent::getROI(a2, v22);
      if ((v21 & 0x80000000) == 0 && (v21 & 0x8000000000000000) == 0)
      {
        *&v28 = vmax_s32(v18, v22[0].n128_u64[0]);
        *(&v28 + 1) = vsub_s32(vmin_s32(v19, vadd_s32(*&v22[0].n128_i8[8], v22[0].n128_u64[0])), *&v28);
      }
    }

    goto LABEL_11;
  }

  if (LiAgent::haveROI(a2))
  {
    LiAgent::getROI(a2, &v28);
LABEL_11:
    LiAgent::setInputROI(a2, &v28);
  }

  a2[2].n128_u32[0] = 1;
  LiAgent::getHelium(a2, *(this + 2), a3);
  LiAgent::getBoundary(a2, v24);
  PCRect<double>::operator&=(v24, (this + 40));
  Crop = LiAgent::getCrop(a2);
  LiImagePolygon::LiImagePolygon(v23, Crop);
  if (((v23[9] - v23[8]) & 0x1FFFFFFFE0) != 0)
  {
    LiAgent::getInversePixelTransform(a2, 0.0, v22);
    liTransformAndClip(v24[0].f64, v22[0].n128_f64, v23);
  }

  else
  {
    LiImagePolygon::set(v23, v24[0].f64, 0);
    LiAgent::projectAndClipPolygon(a2, v23, 2.0);
  }

  LiAgent::outCrop(a2, v23);
  LiImagePolygon::~LiImagePolygon(v23);
}

void sub_2601BC11C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, char a27)
{
  LiImagePolygon::~LiImagePolygon(&a27);
  if (*v27)
  {
    (*(**v27 + 24))(*v27);
  }

  _Unwind_Resume(a1);
}

void OZCrop::~OZCrop(PCSharedCount *this)
{
  this->var0 = off_2872A2C80;
  this[9].var0 = off_2872A2D68;
  PCSharedCount::~PCSharedCount(this + 3);
  OZChannelBase::setRangeName(this, &off_2872A2C38);
  this[9].var0 = &unk_2872DEA38;
  LOBYTE(this[11].var0) = 0;
  PCWeakCount::~PCWeakCount(&this[10].var0);
}

{
  OZCrop::~OZCrop(this);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZCrop::~OZCrop(OZCrop *this)
{
  OZCrop::~OZCrop((this + *(*this - 24)));
}

{
  OZCrop::~OZCrop((this + *(*this - 24)));

  JUMPOUT(0x2666E9F00);
}

void OZLiElementTimeRender::getSourceAtTime(OZLiElementTimeRender *this, CMTime *a2, BOOL a3, const OZRenderParams *a4)
{
  OZRenderParams::OZRenderParams(&v7, a4);
  v7 = *&a2->value;
  epoch = a2->epoch;
  v9 = 0;
  v10 = 0;
  v8 = epoch;
  (*(**(this + 2) + 160))(*(this + 2), &v7, this + 24, 0);
  OZRenderParams::~OZRenderParams(&v7);
}

uint64_t OZLiElementTimeRender::estimateRenderMemory(uint64_t a1)
{
  v1 = *(a1 + 328);
  if (!v1)
  {
    throw_PCNullPointerException(1);
  }

  v2 = *(*v1 + 112);

  return v2();
}

uint64_t OZLiElementTimeRender::print(uint64_t a1, void *a2, int a3)
{
  LiImageSource::printIndent(a2, a3);
  std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(a2, "OZLiElementTimeRender:\n", 23);
  v5 = *(a1 + 328);
  if (!v5)
  {
    throw_PCNullPointerException(1);
  }

  v6 = *(*v5 + 128);

  return v6();
}

uint64_t OZLiElementTimeRender::adjustCasterLocalToWorld(uint64_t a1)
{
  result = *(a1 + 328);
  if (result)
  {
    return (*(*result + 144))();
  }

  return result;
}

void OZLiElementTimeRender::~OZLiElementTimeRender(PCSharedCount *this)
{
  this->var0 = &unk_2872A2F08;
  this[43].var0 = &unk_2872A2FD8;
  PCSharedCount::~PCSharedCount(this + 42);
  this[31].var0 = &unk_2871F25A8;
  if (SLODWORD(this[32].var0) < 0)
  {
    var0 = 1;
  }

  else
  {
    var0 = this[32].var0;
  }

  PCArray<LiLight,PCArray_Traits<LiLight>>::resize(&this[31], 0, var0);
  v3 = this[33].var0;
  if (v3)
  {
    MEMORY[0x2666E9ED0](v3, 0x1000C8077774924);
  }

  this[33].var0 = 0;
  LODWORD(this[32].var0) = 0;
  std::__list_imp<unsigned int>::clear(&this[11].var0);
  OZChannelBase::setRangeName(this, &off_2872A2FF8);
  this[43].var0 = &unk_2872DEA38;
  LOBYTE(this[45].var0) = 0;
  PCWeakCount::~PCWeakCount(&this[44].var0);
}

{
  OZLiElementTimeRender::~OZLiElementTimeRender(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t OZLiElementTimeRender::getBoundary(uint64_t a1)
{
  v1 = *(a1 + 328);
  if (!v1)
  {
    throw_PCNullPointerException(1);
  }

  v2 = *(*v1 + 24);

  return v2();
}

uint64_t OZLiElementTimeRender::filteredEdges(OZLiElementTimeRender *this)
{
  v1 = *(this + 41);
  if (!v1)
  {
    throw_PCNullPointerException(1);
  }

  v2 = *(*v1 + 32);

  return v2();
}

uint64_t OZLiElementTimeRender::pixelTransformSupport(OZLiElementTimeRender *this, const LiRenderParameters *a2)
{
  v2 = *(this + 41);
  if (!v2)
  {
    throw_PCNullPointerException(1);
  }

  v3 = *(*v2 + 56);

  return v3();
}

uint64_t OZLiElementTimeRender::fixPixelTransform(uint64_t a1)
{
  v1 = *(a1 + 328);
  if (!v1)
  {
    throw_PCNullPointerException(1);
  }

  v2 = *(*v1 + 64);

  return v2();
}

uint64_t OZLiElementTimeRender::imageSpace(OZLiElementTimeRender *this)
{
  v1 = *(this + 41);
  if (!v1)
  {
    throw_PCNullPointerException(1);
  }

  v2 = *(*v1 + 80);

  return v2();
}

uint64_t OZLiElementTimeRender::setImageSpace(uint64_t a1)
{
  v1 = *(a1 + 328);
  if (!v1)
  {
    throw_PCNullPointerException(1);
  }

  v2 = *(*v1 + 88);

  return v2();
}

uint64_t *OZLiElementTimeRender::getHelium@<X0>(OZLiElementTimeRender *this@<X0>, LiAgent *a2@<X1>, uint64_t *a3@<X8>)
{
  v3 = *(this + 41);
  if (!v3)
  {
    throw_PCNullPointerException(1);
  }

  return LiImageSource::getHeliumPublic(a3, v3, a2);
}

void virtual thunk toOZLiElementTimeRender::~OZLiElementTimeRender(OZLiElementTimeRender *this)
{
  OZLiElementTimeRender::~OZLiElementTimeRender((this + *(*this - 24)));
}

{
  OZLiElementTimeRender::~OZLiElementTimeRender((this + *(*this - 24)));

  JUMPOUT(0x2666E9F00);
}

uint64_t OZChannelColorCorrection::Register(OZChannelColorCorrection *this)
{
  Instance = OZFactories::getInstance(this);

  return OZFactories::addFactory(Instance, v2);
}

uint64_t anonymous namespace::OZChannelColorCorrection_Factory::getInstance(_anonymous_namespace_::OZChannelColorCorrection_Factory *this)
{
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
  }
}

uint64_t OZChannelColorCorrection::commonInitOZColorCorrectionUIChannel(OZChannelColorCorrection *this)
{
  *(this + 1) = result;
  {
    operator new();
  }

  *(this + 17) = v3;
  return result;
}

void sub_2601BCAE0(_Unwind_Exception *a1)
{
  OZChannelInfo::~OZChannelInfo(v1);
  MEMORY[0x2666E9F00](v1, v2);
  _Unwind_Resume(a1);
}

void sub_2601BCBE0(_Unwind_Exception *a1)
{
  OZFactory::~OZFactory(v1);
  MEMORY[0x2666E9F00](v1, v2);
  _Unwind_Resume(a1);
}

void anonymous namespace::OZChannelColorCorrection_Factory::~OZChannelColorCorrection_Factory(_anonymous_namespace_::OZChannelColorCorrection_Factory *this)
{
  PCSingleton::~PCSingleton((this + 128));

  OZFactory::~OZFactory(this);
}

{
  PCSingleton::~PCSingleton((this + 128));
  OZFactory::~OZFactory(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toanonymous namespace::OZChannelColorCorrection_Factory::~OZChannelColorCorrection_Factory(_anonymous_namespace_::OZChannelColorCorrection_Factory *this)
{
  v1 = (this - 128);
  PCSingleton::~PCSingleton(this);

  OZFactory::~OZFactory(v1);
}

{
}

void OZChannelColorCorrection::~OZChannelColorCorrection(OZChannelBlindData *this)
{
  OZChannelBlindData::~OZChannelBlindData(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZChannelColorCorrection::~OZChannelColorCorrection(OZChannelColorCorrection *this)
{
  OZChannelBlindData::~OZChannelBlindData((this - 16));
}

{
  OZChannelBlindData::~OZChannelBlindData((this - 16));

  JUMPOUT(0x2666E9F00);
}

void anonymous namespace::OZChannelColorCorrectionInfo::~OZChannelColorCorrectionInfo(_anonymous_namespace_::OZChannelColorCorrectionInfo *this)
{
  PCSingleton::~PCSingleton((this + 80));

  OZChannelInfo::~OZChannelInfo(this);
}

{
  PCSingleton::~PCSingleton((this + 80));
  OZChannelInfo::~OZChannelInfo(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toanonymous namespace::OZChannelColorCorrectionInfo::~OZChannelColorCorrectionInfo(_anonymous_namespace_::OZChannelColorCorrectionInfo *this)
{
  v1 = (this - 80);
  PCSingleton::~PCSingleton(this);

  OZChannelInfo::~OZChannelInfo(v1);
}

{
  v1 = (this - 80);
  PCSingleton::~PCSingleton(this);
  OZChannelInfo::~OZChannelInfo(v1);

  JUMPOUT(0x2666E9F00);
}

void OZLiFxGenerator::OZLiFxGenerator(OZLiFxGenerator *this, id *a2, const OZRenderParams *a3, int a4)
{
  *(this + 181) = &unk_2872DEA38;
  *(this + 182) = 0;
  *(this + 1464) = 1;
  LiImageSource::LiImageSource(this, &off_2872A3800);
  *this = &unk_2872A3718;
  *(this + 181) = &unk_2872A37E0;
  *(this + 2) = a2;
  OZRenderParams::OZRenderParams((this + 24), a3);
  v8 = *(this + 1);
  if ((OZFxPlugSharedBase::doesTransformFromLocalToScreenSpace(a2 + 2423, &v8) | a4) == 1)
  {
    (*(*this + 88))(this, 2);
  }
}

void sub_2601BD460(_Unwind_Exception *a1)
{
  OZChannelBase::setRangeName(v1, &off_2872A3800);
  *(v1 + 1448) = v2;
  *(v1 + 1464) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1456));
  _Unwind_Resume(a1);
}

void OZLiFxGenerator::getHelium(OZFxGenerator **this@<X0>, LiAgent *a2@<X1>, void *a3@<X8>)
{
  if ((*(*this + 7))(this, *(a2 + 6)) == 6)
  {
    *(a2 + 8) = 1;
  }

  OZRenderParams::OZRenderParams(v10, (this + 3));
  CGColorSpace = FxColorDescription::getCGColorSpace((*(a2 + 6) + 160));
  OZRenderParams::setWorkingColorSpace(v10, CGColorSpace);
  OZRenderParams::setBlendingGamma(v10, *(*(a2 + 6) + 192));
  if (!*(*HGRenderJob::GetRenderNodeList(v10) + 8) && ((*(*this + 13))(this) & 1) == 0)
  {
    RenderDevice = LiAgent::getRenderDevice(a2);
    OZRenderParams::setRenderDevice(v10, RenderDevice);
  }

  v8 = this[2];
  pcColorDesc = v10[0]._pcColorDesc;
  OZFxGenerator::getHelium(v8, a2, &pcColorDesc, v10, a3);
  OZRenderParams::~OZRenderParams(v10);
}

void sub_2601BD5FC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  OZRenderParams::~OZRenderParams(va);
  _Unwind_Resume(a1);
}

uint64_t OZLiFxGenerator::pixelTransformSupport(OZLiFxGenerator *this, const LiRenderParameters *a2)
{
  LODWORD(result) = (*(**(this + 2) + 2288))(*(this + 2), a2, this + 24);
  if (result)
  {
    return result;
  }

  else
  {
    return 2;
  }
}

double OZLiFxGenerator::fixPixelTransform(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v6 = (*(*a1 + 56))(a1, a4);
  if (v6 != 6)
  {
    v8 = v6;
    Resolution = OZRenderParams::getResolution((a1 + 24), &v14);
    v9 = v14;
    v10 = *(a3 + 120);
    Resolution.n128_u64[0] = 0;
    v11 = 0.0;
    if (fabs(v10) >= 0.0000001)
    {
      v12 = v10 + vaddvq_f64(vmulq_f64(*(a3 + 96), 0));
      Resolution = vmulq_f64(*a3, 0);
      Resolution.n128_f64[0] = (*(a3 + 24) + vaddvq_f64(Resolution)) / v12;
      v11 = (*(a3 + 56) + vaddvq_f64(vmulq_f64(*(a3 + 32), 0))) / v12;
    }

    *(a3 + 120) = 0x3FF0000000000000;
    *(a3 + 80) = 0x3FF0000000000000;
    *(a3 + 8) = 0u;
    *(a3 + 24) = 0u;
    *(a3 + 48) = 0u;
    *(a3 + 64) = 0u;
    *(a3 + 88) = 0u;
    *(a3 + 104) = 0u;
    *a3 = v9.n128_u64[0];
    *(a3 + 40) = v9.n128_u64[1];
    if ((v8 - 3) <= 2)
    {
      Resolution.n128_u64[0] = *&PCMatrix44Tmpl<double>::leftTranslate(a3, Resolution, v11, 0.0);
    }
  }

  return Resolution.n128_f64[0];
}

void OZLiFxGenerator::~OZLiFxGenerator(OZLiFxGenerator *this)
{
  *this = &unk_2872A3718;
  *(this + 181) = &unk_2872A37E0;
  OZRenderParams::~OZRenderParams((this + 24));
  OZChannelBase::setRangeName(this, &off_2872A3800);
  *(this + 181) = &unk_2872DEA38;
  *(this + 1464) = 0;
  PCWeakCount::~PCWeakCount(this + 182);
}

{
  *this = &unk_2872A3718;
  *(this + 181) = &unk_2872A37E0;
  OZRenderParams::~OZRenderParams((this + 24));
  OZChannelBase::setRangeName(this, &off_2872A3800);
  *(this + 181) = &unk_2872DEA38;
  *(this + 1464) = 0;
  PCWeakCount::~PCWeakCount(this + 182);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZLiFxGenerator::~OZLiFxGenerator(OZLiFxGenerator *this)
{
  v1 = this + *(*this - 24);
  *v1 = &unk_2872A3718;
  *(v1 + 181) = &unk_2872A37E0;
  OZRenderParams::~OZRenderParams((v1 + 24));
  OZChannelBase::setRangeName(v1, &off_2872A3800);
  *(v1 + 181) = &unk_2872DEA38;
  v1[1464] = 0;

  PCWeakCount::~PCWeakCount(v1 + 182);
}

{
  v1 = this + *(*this - 24);
  *v1 = &unk_2872A3718;
  *(v1 + 181) = &unk_2872A37E0;
  OZRenderParams::~OZRenderParams((v1 + 24));
  OZChannelBase::setRangeName(v1, &off_2872A3800);
  *(v1 + 181) = &unk_2872DEA38;
  v1[1464] = 0;
  PCWeakCount::~PCWeakCount(v1 + 182);

  JUMPOUT(0x2666E9F00);
}

void OZEnvironmentMeshSceneElement::OZEnvironmentMeshSceneElement(OZEnvironmentMeshSceneElement *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZ3DEngineSceneElement::OZ3DEngineSceneElement(this, a2, a3, a4);
  *v5 = &unk_2872A39A8;
  v5[2] = &unk_2872A42E0;
  v5[6] = &unk_2872A4538;
  v5[816] = &unk_2872A4590;
  PCString::PCString(&v6, "Subdivision Level");
  OZChannelUint32::OZChannelUint32((this + 24408), 0, &v6, (this + 448), 0x190u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::PCString(&v6, "Placeholder Width");
  OZChannelUint32::OZChannelUint32((this + 24560), 4000, &v6, (this + 448), 0x191u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::PCString(&v6, "Placeholder Height");
  OZChannelUint32::OZChannelUint32((this + 24712), 3600, &v6, (this + 448), 0x192u, 0, 0, 0);
  PCString::~PCString(&v6);
  PCString::PCString(&v6, "Placeholder Height");
  OZChannelUint32::OZChannelUint32((this + 24864), 9000, &v6, (this + 448), 0x193u, 0, 0, 0);
  PCString::~PCString(&v6);
  Li3DEngineScene::Li3DEngineScene((this + 25016));
  *(this + 3148) = 0;
  PCMutex::PCMutex((this + 25192), 1);
  *(this + 3149) = &unk_2871D83A0;
  OZChannel::setMin((this + 24408), 0.0);
  OZChannel::setMax((this + 24408), 10.0);
}

void sub_2601BDD0C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  Li3DEngineScene::~Li3DEngineScene((v10 + v15));
  OZChannel::~OZChannel((v10 + v14));
  OZChannel::~OZChannel((v10 + v13));
  OZChannel::~OZChannel((v10 + v12));
  OZChannel::~OZChannel((v10 + v11));
  OZ3DEngineSceneElement::~OZ3DEngineSceneElement(v10);
  _Unwind_Resume(a1);
}

void OZEnvironmentMeshSceneElement::OZEnvironmentMeshSceneElement(OZEnvironmentMeshSceneElement *this, const OZEnvironmentMeshSceneElement *a2, uint64_t a3)
{
  OZ3DEngineSceneElement::OZ3DEngineSceneElement(this, a2, a3);
  *v5 = &unk_2872A39A8;
  *(v5 + 16) = &unk_2872A42E0;
  *(v5 + 48) = &unk_2872A4538;
  *(v5 + 6528) = &unk_2872A4590;
  v6 = (v5 + 24408);
  OZChannel::OZChannel((v5 + 24408), (a2 + 24408), (v5 + 448));
  *(this + 3051) = &unk_287246400;
  *(this + 3053) = &unk_287246760;
  OZChannel::OZChannel((this + 24560), (a2 + 24560), (this + 448));
  *(this + 3070) = &unk_287246400;
  *(this + 3072) = &unk_287246760;
  OZChannel::OZChannel((this + 24712), (a2 + 24712), (this + 448));
  *(this + 3089) = &unk_287246400;
  *(this + 3091) = &unk_287246760;
  OZChannel::OZChannel((this + 24864), a2 + 222, (this + 448));
  *(this + 3108) = &unk_287246400;
  *(this + 3110) = &unk_287246760;
  Li3DEngineScene::Li3DEngineScene((this + 25016));
  *(this + 3148) = 0;
  PCMutex::PCMutex((this + 25192), 1);
  *(this + 3149) = &unk_2871D83A0;
  OZChannel::setMin(v6, 0.0);
  OZChannel::setMax(v6, 10.0);
}

void sub_2601BE040(_Unwind_Exception *a1)
{
  Li3DEngineScene::~Li3DEngineScene((v1 + v6));
  OZChannel::~OZChannel(v5);
  OZChannel::~OZChannel(v4);
  OZChannel::~OZChannel(v3);
  OZChannel::~OZChannel(v2);
  OZ3DEngineSceneElement::~OZ3DEngineSceneElement(v1);
  _Unwind_Resume(a1);
}

void OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement(OZEnvironmentMeshSceneElement *this)
{
  *this = &unk_2872A39A8;
  *(this + 2) = &unk_2872A42E0;
  *(this + 6) = &unk_2872A4538;
  *(this + 816) = &unk_2872A4590;
  PCMutex::~PCMutex((this + 25192));
  std::__tree<std::__value_type<SCNParticleSystem *,PCPtr<LiParticleParameters>>,std::__map_value_compare<SCNParticleSystem *,std::__value_type<SCNParticleSystem *,PCPtr<LiParticleParameters>>,std::less<SCNParticleSystem *>,true>,std::allocator<std::__value_type<SCNParticleSystem *,PCPtr<LiParticleParameters>>>>::destroy(this + 25160, *(this + 3146));
  std::__tree<std::__value_type<int,__CVBuffer *>,std::__map_value_compare<int,std::__value_type<int,__CVBuffer *>,std::less<int>,true>,std::allocator<std::__value_type<int,__CVBuffer *>>>::destroy(this + 25136, *(this + 3143));
  ProCore_Impl::PCNSRefImpl::release(this + 3141);
  std::__tree<std::__value_type<unsigned long long,PCNSRef<SCNRenderer *>>,std::__map_value_compare<unsigned long long,std::__value_type<unsigned long long,PCNSRef<SCNRenderer *>>,std::less<unsigned long long>,true>,std::allocator<std::__value_type<unsigned long long,PCNSRef<SCNRenderer *>>>>::destroy(this + 25096, *(this + 3138));
  ProCore_Impl::PCNSRefImpl::release(this + 3135);
  std::recursive_mutex::~recursive_mutex((this + 25016));
  OZChannel::~OZChannel((this + 24864));
  OZChannel::~OZChannel((this + 24712));
  OZChannel::~OZChannel((this + 24560));
  OZChannel::~OZChannel((this + 24408));

  OZ3DEngineSceneElement::~OZ3DEngineSceneElement(this);
}

{
  OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement(OZEnvironmentMeshSceneElement *this)
{
  OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement((this - 16));
}

{
  OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement((this - 48));
}

{
  OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement((this - 6528));
}

{
  OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZEnvironmentMeshSceneElement::~OZEnvironmentMeshSceneElement((this - 6528));

  JUMPOUT(0x2666E9F00);
}

void OZEnvironmentMeshSceneElement::buildRenderGraph(OZEnvironmentMeshSceneElement *this, const OZRenderState *a2, LiGraphBuilder *a3, const OZRenderGraphState *a4)
{
  OZRenderState::OZRenderState(&v13, a2);
  v11 = *&a2->var0.var0;
  var3 = a2->var0.var3;
  (*(*this + 2336))(this);
  OZ3DEngineSceneElement::getUnitScaleMatrix(this, &v13, v9);
  for (i = 0; i != 4; ++i)
  {
    v10[i] = vcvt_hight_f32_f64(vcvt_f32_f64(v9[2 * i]), v9[2 * i + 1]);
  }

  OZ3DEngineCore::buildRenderGraph(this + 18872, a2, a3, a4, v10, &v11, this);
}

void OZEnvironmentMeshSceneElement::getLocalVolume(uint64_t a1, _OWORD *a2)
{
  if (a2)
  {
    v3 = (*(*a1 + 2336))(a1);
    std::recursive_mutex::lock(v3);
    Representation = PCBitmap::getRepresentation(v3);
    getSceneBoundingBox(Representation, v6);
    v5 = v6[1];
    *a2 = v6[0];
    a2[1] = v5;
    a2[2] = v6[2];
    std::recursive_mutex::unlock(v3);
  }
}

uint64_t OZEnvironmentMeshSceneElement::get3DScene(OZEnvironmentMeshSceneElement *this)
{
  v2 = (this + 25192);
  v5 = this + 25192;
  PCMutex::lock((this + 25192));
  LOBYTE(v6) = 1;
  if (!*(this + 3148))
  {
    v3 = objc_opt_new();
    *(this + 3148) = v3;
    [objc_msgSend(v3 rootNode];
    [objc_msgSend(*(this + 3148) "rootNode")];
    Li3DEngineScene::set((this + 25016), *(this + 3148));
    Li3DEngineScene::setUseOriginalScene(this + 25016, 1);
  }

  PCMutex::unlock(v2);
  return this + 25016;
}

uint64_t OZEnvironmentMeshSceneElement::didCreateRootNodeClone(id *this)
{
  v13 = *MEMORY[0x277D85DE8];
  [this[2360] setCategoryBitMask:{+[OZSceneComposer sceneMeshCategoryBitMask](OZSceneComposer, "sceneMeshCategoryBitMask")}];
  v2 = [this[2360] childNodesPassingTest:&__block_literal_global_82];
  v8 = 0u;
  v9 = 0u;
  v10 = 0u;
  v11 = 0u;
  result = [v2 countByEnumeratingWithState:&v8 objects:v12 count:16];
  if (result)
  {
    v4 = result;
    v5 = *v9;
    do
    {
      v6 = 0;
      do
      {
        if (*v9 != v5)
        {
          objc_enumerationMutation(v2);
        }

        v7 = *(*(&v8 + 1) + 8 * v6);
        [v7 setCategoryBitMask:{+[OZSceneComposer sceneMeshCategoryBitMask](OZSceneComposer, "sceneMeshCategoryBitMask")}];
        [v7 setName:{objc_msgSend(MEMORY[0x277CCACA8], "stringWithFormat:", @"child of %u", *(this + 20))}];
        ++v6;
      }

      while (v4 != v6);
      result = [v2 countByEnumeratingWithState:&v8 objects:v12 count:16];
      v4 = result;
    }

    while (result);
  }

  return result;
}

void OZEnvironmentMeshSceneElement::setMeshNode(OZEnvironmentMeshSceneElement *this, SCNNode *a2, float a3)
{
  v4 = *(this + 120);
  if (v4)
  {
    if (v7)
    {
      v8 = OZGroup::masterScene(v7);
      std::recursive_mutex::lock(v8);
      v9 = (*(*this + 2336))(this);
      std::recursive_mutex::lock(v9);
      v10 = [PCBitmap::getRepresentation(v9) rootNode];
      v11 = [objc_msgSend(v10 "childNodes")];
      if ([(SCNNode *)v11 name]&& [(NSString *)[(SCNNode *)v11 name] compare:[(SCNNode *)a2 name]]== NSOrderedSame)
      {
        v15 = v11;
      }

      else
      {
        v15 = [(SCNNode *)a2 clone];
        [(SCNNode *)v11 removeFromParentNode];
        [v10 addChildNode:v15];
        [(SCNNode *)v15 setRenderingOrder:-1];
        OZEnvironmentMeshSceneElement::updateMeshMaterials(this, v15);
        [*(this + 2360) removeFromParentNode];

        *(this + 2360) = 0;
        *(this + 2372) = 0;
        OZ3DEngineSceneElement::applyShader(this);
      }

      *&v12 = a3;
      *&v13 = a3;
      *&v14 = a3;
      [(SCNNode *)v15 setScale:v12, v13, v14];
      std::recursive_mutex::unlock(v9);

      std::recursive_mutex::unlock(v8);
    }
  }
}

void sub_2601BE8F8(_Unwind_Exception *a1)
{
  std::recursive_mutex::unlock(v2);
  std::recursive_mutex::unlock(v1);
  _Unwind_Resume(a1);
}

void OZEnvironmentMeshSceneElement::updateMeshMaterials(OZEnvironmentMeshSceneElement *this, SCNNode *a2)
{
  v19[1] = *MEMORY[0x277D85DE8];
  v3 = [(SCNNode *)a2 childNodesPassingTest:&__block_literal_global_11];
  v4 = objc_opt_new();
  [v4 setLightingModelName:*MEMORY[0x277CDBB98]];
  if (OZ3DEngineSceneElement::hasShader(this))
  {
    v5 = 15;
  }

  else
  {
    v5 = 0;
  }

  [v4 setColorBufferWriteMask:v5];
  [v4 setReadsFromDepthBuffer:1];
  [v4 setWritesToDepthBuffer:1];
  [v4 setDoubleSided:1];
  v19[0] = v4;
  v6 = [MEMORY[0x277CBEA60] arrayWithObjects:v19 count:1];
  v14 = 0u;
  v15 = 0u;
  v16 = 0u;
  v17 = 0u;
  obj = v3;
  v7 = [(NSArray *)v3 countByEnumeratingWithState:&v14 objects:v18 count:16];
  if (v7)
  {
    v8 = v7;
    v9 = *v15;
    v10 = MEMORY[0x277CC08F0];
    do
    {
      for (i = 0; i != v8; ++i)
      {
        if (*v15 != v9)
        {
          objc_enumerationMutation(obj);
        }

        v12 = *(*(&v14 + 1) + 8 * i);
        [v12 setGeometry:{objc_msgSend(MEMORY[0x277CDBA68], "geometryWithSources:elements:", objc_msgSend(objc_msgSend(v12, "geometry"), "geometrySources"), objc_msgSend(objc_msgSend(v12, "geometry"), "geometryElements"))}];
        [objc_msgSend(v12 "geometry")];
        [objc_msgSend(v12 "geometry")];
        [v12 setCategoryBitMask:{+[OZSceneComposer sceneMeshCategoryBitMask](OZSceneComposer, "sceneMeshCategoryBitMask")}];
      }

      v8 = [(NSArray *)obj countByEnumeratingWithState:&v14 objects:v18 count:16];
    }

    while (v8);
  }
}

void OZEnvironmentMeshSceneElement::buildContour(const void **a1@<X0>, float64x2_t *a2@<X1>, int a3@<W2>, int a4@<W3>, int a5@<W4>, uint64_t *a6@<X8>, float a7@<S0>, float a8@<S1>)
{
  if (OZChannelBase::isEnabled((v16 + 20744), 1, 1))
  {
    v17 = OZGroup::masterScene(v16);
  }

  else
  {
    v17 = (*(*a1 + 292))(a1);
  }

  v18 = v17;
  std::recursive_mutex::lock(v17);
  Representation = PCBitmap::getRepresentation(v18);
  *a6 = 0;
  a6[1] = 0;
  a6[2] = 0;
  v20 = (*(*a1 + 34))(a1);
  SceneComposer = OZScene::getSceneComposer(v20);
  v22 = 0;
  v48 = COERCE_DOUBLE(vcvt_f32_f64(*a2));
  v23 = -1.0;
  if (a7 >= 0.0)
  {
    v23 = 1.0;
  }

  v24.i64[0] = 0;
  v24.i32[2] = 0;
  if (a3)
  {
    v25 = 0.0;
  }

  else
  {
    v25 = 1.0;
  }

  if (a3)
  {
    v26 = 1.0;
  }

  else
  {
    v26 = 0.0;
  }

  if (a3)
  {
    v27 = -1;
  }

  else
  {
    v27 = 0;
  }

  v28 = vbslq_s8(vdupq_n_s32(v27), xmmword_260816F10, LODWORD(v23));
  v29 = (a7 * -11.25) * 0.0174532925;
  v30.i64[0] = 0;
  v30.i64[1] = v28.u32[2];
  v44 = v30;
  v45 = vdupq_lane_s32(*v28.i8, 1);
  v24.i32[3] = v28.i32[3];
  v46 = *v28.i32;
  v47 = v24;
  v43 = vdupq_n_s64(0x3FECCCCCC0000000uLL);
  do
  {
    v56 = 1065353216;
    v53 = 1065353216;
    *&v51[20] = 1065353216;
    *v51 = 1065353216;
    *&v51[4] = 0uLL;
    *&v51[24] = 0;
    v52 = 0;
    v55 = 0;
    v54 = 0;
    LODWORD(v49.f64[0]) = 0;
    *(v49.f64 + 1) = v25;
    *&v49.f64[1] = LODWORD(v26);
    PCMatrix44Tmpl<float>::rotate(v51, &v49, 0, v29 * v22);
    v49 = __PAIR64__(LODWORD(v26), LODWORD(v25));
    PCMatrix44Tmpl<float>::rotate(v51, &v49, 0, a8);
    v31 = *v51;
    v31.i32[1] = *&v51[16];
    v32 = *&v51[4];
    v32.i32[1] = *&v51[20];
    v34.i64[0] = __PAIR64__(v54, HIDWORD(v52));
    v33.i64[0] = __PAIR64__(v53, v52);
    v35 = *&v51[8];
    v35.i32[1] = *&v51[24];
    v36 = *&v51[12];
    v36.i32[1] = *&v51[28];
    v33.i64[1] = __PAIR64__(HIDWORD(v55), HIDWORD(v54));
    v37 = vzip1q_s32(v31, v35);
    v38 = vzip1q_s32(v32, v36);
    v34.i64[1] = __PAIR64__(v56, v55);
    [SceneComposer intersectionTestFrom:Representation lookingAt:v48 scene:{*vmlaq_f32(vmlaq_f32(vmlaq_f32(vmulq_n_f32(vzip1q_s32(v37, v38), v46), v45, vzip2q_s32(v37, v38)), v44, vzip1q_s32(v33, v34)), v47, vzip2q_s32(v33, v34)).i64}];
    if (v41 != 0.0)
    {
      v42 = a2[1].f64[0] + (v40 - a2[1].f64[0]) * 0.899999976;
      v49 = vaddq_f64(*a2, vmulq_f64(vsubq_f64(vcvtq_f64_f32(v39), *a2), v43));
      v50 = v42;
      std::vector<PCVector3<double>>::push_back[abi:ne200100](a6, &v49);
    }

    ++v22;
  }

  while (v22 != 32);
  if (a6[1] != *a6)
  {
    if (a4)
    {
      std::vector<PCVector3<double>>::insert(a6, *a6, a2);
    }

    if (a5)
    {
      std::vector<PCVector3<double>>::push_back[abi:ne200100](a6, a2);
    }
  }

  std::recursive_mutex::unlock(v18);
}

void sub_2601BEF3C(_Unwind_Exception *a1)
{
  v4 = *v1;
  if (*v1)
  {
    *(v1 + 8) = v4;
    operator delete(v4);
  }

  std::recursive_mutex::unlock(v2);
  _Unwind_Resume(a1);
}

void PCMatrix44Tmpl<float>::rotate(uint64_t a1, float *a2, int a3, float a4)
{
  v6 = *a2;
  v5 = a2[1];
  v7 = a2[2];
  if (a3)
  {
    v8 = sqrtf((((v6 * v6) + (v5 * v5)) + (v7 * v7)) + (a2[3] * a2[3]));
    v6 = v6 / v8;
    v5 = v5 / v8;
    v7 = v7 / v8;
  }

  sinval = 0.0;
  cosval = 1.0;
  if (a4 != 0.0)
  {
    sinval = 1.0;
    cosval = 0.0;
    if (fabsf(a4 + -1.5708) >= 0.00001 && fabsf(a4 + 4.7124) >= 0.00001)
    {
      sinval = -1.0;
      if (fabsf(a4 + 1.5708) >= 0.00001 && fabsf(a4 + -4.7124) >= 0.00001)
      {
        sinval = 0.0;
        cosval = -1.0;
        if (fabsf(a4 + -3.1416) >= 0.00001 && fabsf(a4 + 3.1416) >= 0.00001)
        {
          v11 = __sincosf_stret(a4);
          cosval = v11.__cosval;
          sinval = v11.__sinval;
        }
      }
    }
  }

  v12 = (v5 * v6) * (1.0 - cosval);
  v13 = (v7 * v6) * (1.0 - cosval);
  v14 = (v7 * v5) * (1.0 - cosval);
  v15 = v6 * sinval;
  v16 = v5 * sinval;
  v17 = v7 * sinval;
  v21 = 1065353216;
  v18[3] = 0.0;
  v18[7] = 0.0;
  v20 = 0;
  v19 = 0;
  v18[0] = cosval + ((v6 * v6) * (1.0 - cosval));
  v18[1] = v12 - v17;
  v18[2] = v13 + v16;
  v18[4] = v12 + v17;
  v18[5] = cosval + ((v5 * v5) * (1.0 - cosval));
  v18[6] = v14 - v15;
  v18[8] = v13 - v16;
  v18[9] = v14 + v15;
  v18[10] = cosval + ((v7 * v7) * (1.0 - cosval));
  PCMatrix44Tmpl<float>::rightMult(a1, v18);
}

uint64_t std::vector<PCVector3<double>>::insert(uint64_t *a1, unint64_t a2, unint64_t a3)
{
  v3 = a2;
  v5 = a1[1];
  v6 = a1[2];
  if (v5 >= v6)
  {
    v9 = *a1;
    v10 = 0xAAAAAAAAAAAAAAABLL * ((v5 - *a1) >> 3) + 1;
    if (v10 > 0xAAAAAAAAAAAAAAALL)
    {
      std::vector<double>::__throw_length_error[abi:ne200100]();
    }

    v11 = a2 - v9;
    v12 = 0xAAAAAAAAAAAAAAABLL * ((v6 - v9) >> 3);
    v13 = 2 * v12;
    if (2 * v12 <= v10)
    {
      v13 = 0xAAAAAAAAAAAAAAABLL * ((v5 - *a1) >> 3) + 1;
    }

    if (v12 >= 0x555555555555555)
    {
      v14 = 0xAAAAAAAAAAAAAAALL;
    }

    else
    {
      v14 = v13;
    }

    v27 = a1;
    if (v14)
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<PCVector3<double>>>(a1, v14);
    }

    __p = 0;
    v24 = 8 * (v11 >> 3);
    v25 = v24;
    v26 = 0;
    std::__split_buffer<PCVector3<double>>::emplace_back<PCVector3<double> const&>(&__p, a3);
    v3 = std::vector<PCVector3<double>>::__swap_out_circular_buffer(a1, &__p, v3);
    if (v25 != v24)
    {
      v25 = (v25 - v24 - 24) % 0x18uLL + v24;
    }

    if (__p)
    {
      operator delete(__p);
    }
  }

  else if (a2 == v5)
  {
    *v5 = *a3;
    *(v5 + 16) = *(a3 + 16);
    a1[1] = v5 + 24;
  }

  else
  {
    v7 = v5 - 24;
    if (v5 < 0x18)
    {
      v8 = a1[1];
    }

    else
    {
      v8 = v5 + 24;
      *v5 = *v7;
      *(v5 + 16) = *(v5 - 8);
    }

    a1[1] = v8;
    if (v5 != a2 + 24)
    {
      v15 = a2 - v5 + 24;
      v16 = v5 - 48;
      do
      {
        v17 = *v16;
        *(v7 + 16) = *(v16 + 16);
        *v7 = v17;
        v7 -= 24;
        v16 -= 24;
        v15 += 24;
      }

      while (v15);
      v8 = a1[1];
    }

    v18 = v8 <= a3 || a2 > a3;
    v19 = 24;
    if (v18)
    {
      v19 = 0;
    }

    v20 = a3 + v19;
    v21 = *v20;
    *(a2 + 16) = *(v20 + 16);
    *a2 = v21;
  }

  return v3;
}

void sub_2601BF348(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, uint64_t a12)
{
  if (__p)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

double std::__split_buffer<PCVector3<double>>::emplace_back<PCVector3<double> const&>(uint64_t *a1, uint64_t a2)
{
  v2 = a1[2];
  v3 = v2;
  if (v2 == a1[3])
  {
    v5 = *a1;
    v4 = a1[1];
    if (v4 <= *a1)
    {
      if (v2 == v5)
      {
        v8 = 1;
      }

      else
      {
        v8 = 0x5555555555555556 * ((v2 - v5) >> 3);
      }

      std::__allocate_at_least[abi:ne200100]<std::allocator<PCVector3<double>>>(a1[4], v8);
    }

    v6 = 0xAAAAAAAAAAAAAAABLL * ((v4 - *a1) >> 3) + 1;
    v3 = (v4 - 24 * (v6 / 2));
    if (v4 != v2)
    {
      do
      {
        v7 = *v4;
        *(v3 + 2) = *(v4 + 2);
        *v3 = v7;
        v3 = (v3 + 24);
        v4 = (v4 + 24);
      }

      while (v4 != v2);
      v4 = a1[1];
    }

    a1[1] = v4 + 24 * (v6 / -2);
  }

  *v3 = *a2;
  result = *(a2 + 16);
  *(v3 + 2) = result;
  a1[2] = v3 + 24;
  return result;
}

uint64_t std::vector<PCVector3<double>>::__swap_out_circular_buffer(uint64_t *a1, void *a2, uint64_t a3)
{
  v4 = a1[1];
  result = a2[1];
  v6 = a2[2];
  if (v4 != a3)
  {
    v7 = a3;
    v8 = a2[2];
    do
    {
      *v8 = *v7;
      *(v8 + 16) = *(v7 + 16);
      v7 += 24;
      v8 += 24;
    }

    while (v7 != v4);
  }

  a2[2] = v6 + v4 - a3;
  v9 = *a1;
  v10 = result + *a1 - a3;
  if (*a1 != a3)
  {
    v11 = *a1;
    v12 = result + *a1 - a3;
    do
    {
      *v12 = *v11;
      *(v12 + 16) = *(v11 + 16);
      v11 += 24;
      v12 += 24;
    }

    while (v11 != a3);
  }

  a2[1] = v10;
  v13 = *a1;
  *a1 = v10;
  a1[1] = v9;
  a2[1] = v13;
  v14 = a1[1];
  a1[1] = a2[2];
  a2[2] = v14;
  v15 = a1[2];
  a1[2] = a2[3];
  a2[3] = v15;
  *a2 = a2[1];
  return result;
}

float OZSnap::OZSnap(uint64_t a1, uint64_t a2)
{
  *a1 = *a2;
  *(a1 + 4) = *(a2 + 4);
  result = *(a2 + 12);
  *(a1 + 12) = result;
  return result;
}

void OZSnap::OZSnap(OZSnap *this, int a2, double a3, double a4, double a5)
{
  *this = a2;
  v5 = a3;
  v6 = a4;
  *(this + 1) = v5;
  *(this + 2) = v6;
  v7 = a5;
  *(this + 3) = v7;
}

BOOL OZSnap::operator<(uint64_t a1, uint64_t a2)
{
  if (*a1 < *a2)
  {
    return 1;
  }

  if (*a1 > *a2)
  {
    return 0;
  }

  v3 = *(a1 + 4);
  v4 = *(a2 + 4);
  if (v3 < v4)
  {
    return 1;
  }

  if (v3 > v4)
  {
    return 0;
  }

  v5 = *(a1 + 8);
  v6 = *(a2 + 8);
  if (v5 < v6)
  {
    return 1;
  }

  if (v5 > v6)
  {
    return 0;
  }

  return *(a1 + 12) < *(a2 + 12);
}

void OZSingleChannelBehavior::OZSingleChannelBehavior(OZSingleChannelBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3, a4);
  *v5 = &unk_2872A46C0;
  *(v5 + 16) = &unk_2872A4A00;
  *(v5 + 48) = &unk_2872A4C58;
  *(v5 + 336) = &unk_2872A4CB0;
  *(v5 + 536) = &unk_2872A4CD8;
  OZChannelInfo::OZChannelInfo((v5 + 544));
  *(this + 39) = xmmword_2608531D0;
  PCString::PCString(&v6, "Affecting Object (Hidden)");
  OZChanObjectManipRef::OZChanObjectManipRef((this + 640), &v6, (this + 56), 0xC7u, 2u);
  PCString::~PCString(&v6);
  *(this + 104) = 0;
  *(this + 50) = 0u;
  *(this + 51) = 0u;
  PCSharedCount::PCSharedCount(this + 105);
  *(this + 212) = 0;
  *(this + 852) = 0;
  *(this + 107) = 0x4014000000000000;
}

void sub_2601BFCD0(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  OZChanObjectManipRef::~OZChanObjectManipRef((v10 + 640));
  OZChannelInfo::~OZChannelInfo((v10 + 544));
  OZChannelBehavior::~OZChannelBehavior(v10);
  _Unwind_Resume(a1);
}

void OZSingleChannelBehavior::OZSingleChannelBehavior(OZSingleChannelBehavior *this, const OZSingleChannelBehavior *a2, char a3)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3);
  *v5 = &unk_2872A46C0;
  *(v5 + 16) = &unk_2872A4A00;
  *(v5 + 48) = &unk_2872A4C58;
  *(v5 + 336) = &unk_2872A4CB0;
  *(v5 + 536) = &unk_2872A4CD8;
  OZChannelInfo::OZChannelInfo((v5 + 544));
  *(this + 39) = *(a2 + 39);
  OZChanObjectManipRef::OZChanObjectManipRef((this + 640), (a2 + 640), (this + 56));
  *(this + 50) = *(a2 + 50);
  *(this + 51) = *(a2 + 51);
  PCString::PCString(this + 105, a2 + 105);
  *(this + 212) = *(a2 + 212);
  *(this + 852) = *(a2 + 852);
  *(this + 107) = *(a2 + 107);
  if ((*(*a2 + 320))(a2))
  {
    if (*(a2 + 49))
    {
      v6 = *(*(a2 + 47) + 32);
      if (v6)
      {
        ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(a2, v6);
        *(this + 50) = *(*((*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel) + 8) + 8);
        *(this + 51) = *(*(*(*(a2 + 47) + 32) + 8) + 8);
        OZChannelInfo::operator=(this + 544, a2 + 544);
        InternalName = OZObjectManipulator::getInternalName(ObjectManipulatorForChannel);
        PCString::set(this + 105, InternalName);
        (*(*ObjectManipulatorForChannel + 216))(ObjectManipulatorForChannel);
        operator new();
      }
    }
  }

  *(this + 50) = *(a2 + 50);
  *(this + 51) = *(a2 + 51);
  PCString::set(this + 105, a2 + 105);
  OZChannelInfo::operator=(this + 544, a2 + 544);
  if (*(a2 + 104))
  {
    operator new();
  }

  *(this + 104) = 0;
}

void sub_2601BFFCC(_Unwind_Exception *a1)
{
  MEMORY[0x2666E9F00](v2, 0x1012C40EC159624);
  PCString::~PCString((v1 + 840));
  OZChanObjectManipRef::~OZChanObjectManipRef((v1 + 640));
  OZChannelInfo::~OZChannelInfo((v1 + 544));
  OZChannelBehavior::~OZChannelBehavior(v1);
  _Unwind_Resume(a1);
}

uint64_t OZSingleChannelBehavior::getChanBase(OZSingleChannelBehavior *this)
{
  if (*(this + 49))
  {
    return *(*(this + 47) + 32);
  }

  else
  {
    return 0;
  }
}

void *OZSingleChannelBehavior::getObjectManipulatorForChannel(OZSingleChannelBehavior *this, OZChannelBase *a2)
{
  ObjectManipulator = OZChannelBase::getObjectManipulator(a2);
  v4 = ObjectManipulator;
  if (!ObjectManipulator)
  {
    return v4;
  }

  v5 = *ObjectManipulator;
  v6 = *ObjectManipulator;
  {
    v10 = (*(v5 + 232))(v4);
    if (v10 != (*(*this + 320))(this))
    {
      v11 = *((*(*v4 + 256))(v4) + 8);
      v12 = xmmword_260850EF0;
      if (OZFactory::isKindOfClass(v11, &v12))
      {
        v4 = (*(*v4 + 232))(v4);
        if (v4)
        {
          while ((*(*this + 320))(this) != v4)
          {
            v4 = v4[120];
            if (!v4)
            {
              return v4;
            }
          }

          v4 += 2;
        }
      }
    }

    return v4;
  }

  v8 = *((*(v5 + 216))(v4) + 48);

  return OZChannelBase::getObjectManipulator(v8);
}

void OZSingleChannelBehavior::~OZSingleChannelBehavior(OZSingleChannelBehavior *this)
{
  *this = &unk_2872A46C0;
  *(this + 2) = &unk_2872A4A00;
  *(this + 6) = &unk_2872A4C58;
  *(this + 42) = &unk_2872A4CB0;
  *(this + 67) = &unk_2872A4CD8;
  v2 = *(this + 104);
  if (v2)
  {
    OZChannelRef::~OZChannelRef(v2);
    MEMORY[0x2666E9F00]();
  }

  *(this + 104) = 0;
  PCString::~PCString(this + 105);
  OZChanObjectManipRef::~OZChanObjectManipRef((this + 640));
  OZChannelInfo::~OZChannelInfo((this + 544));

  OZChannelBehavior::~OZChannelBehavior(this);
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZSingleChannelBehavior::~OZSingleChannelBehavior(OZSingleChannelBehavior *this)
{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 16));
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 48));
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 336));
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 536));
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

{
  OZSingleChannelBehavior::~OZSingleChannelBehavior((this - 536));

  JUMPOUT(0x2666E9F00);
}

void **OZSingleChannelBehavior::operator=(uint64_t a1, const void *a2)
{
  OZChannelBehavior::operator=();
  v4 = (*(*a1 + 320))(a1);
  if (v4)
  {
    (*(*a1 + 120))(a1);
  }

  if (!v5)
  {
    __cxa_bad_cast();
  }

  v6 = v5;
  OZChannelInfo::operator=(a1 + 544, (v5 + 544));
  *(a1 + 624) = *(v6 + 39);
  *(a1 + 848) = *(v6 + 212);
  if ((*(*v6 + 320))(v6))
  {
    if (*(v6 + 49))
    {
      v7 = *(*(v6 + 47) + 32);
      if (v7)
      {
        ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(v6, v7);
        *(a1 + 800) = *(*((*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel) + 8) + 8);
        *(a1 + 816) = *(*(*(*(v6 + 47) + 32) + 8) + 8);
        InternalName = OZObjectManipulator::getInternalName(ObjectManipulatorForChannel);
        PCString::set((a1 + 840), InternalName);
        (*(*ObjectManipulatorForChannel + 216))(ObjectManipulatorForChannel);
        v10 = *(a1 + 832);
        if (v10)
        {
          OZChannelRef::~OZChannelRef(v10);
          MEMORY[0x2666E9F00]();
        }

        *(a1 + 832) = 0;
        operator new();
      }
    }
  }

  OZChanObjectManipRef::operator=(a1 + 640, v6 + 640);
  *(a1 + 800) = *(v6 + 50);
  *(a1 + 816) = *(v6 + 51);
  PCString::set((a1 + 840), v6 + 105);
  result = *(a1 + 832);
  if (result)
  {
    OZChannelRef::~OZChannelRef(result);
    result = MEMORY[0x2666E9F00]();
  }

  *(a1 + 832) = 0;
  if (*(v6 + 104))
  {
    operator new();
  }

  if (v4)
  {
    v12 = v4 + 1000;
    for (i = *(v4 + 1008); i != v12; i = *(i + 8))
    {
      if (*(i + 16) == a1)
      {
        goto LABEL_20;
      }
    }

    i = v4 + 1000;
LABEL_20:
    v14 = *(i + 8);
    if (v14 == v12)
    {
      v15 = 0;
    }

    else
    {
      v15 = *(v14 + 16);
    }

    v16 = *(*a1 + 104);

    return v16(a1, v4, v15);
  }

  return result;
}

uint64_t OZSingleChannelBehavior::didAddToNode(OZSingleChannelBehavior *this, OZSceneNode *a2)
{
  result = OZChannelBehavior::didAddToNode(this, a2);
  if ((*(this + 852) & 1) == 0)
  {
    result = (*(*a2 + 272))(a2);
    if (result)
    {
      v5 = *(*this + 808);

      return v5(this);
    }
  }

  return result;
}

void **OZSingleChannelBehavior::commonDidAddToNode(void **this)
{
  if (!this[104])
  {
    return this;
  }

  v1 = this;
  v2 = (*(*this + 40))(this);
  this = OZChanObjectManipRef::getObjectID((v1 + 80));
  v3 = this;
  if (!this || *(v2 + 80) == this)
  {
    v5 = v2 + 16;
    goto LABEL_15;
  }

  if (OZSceneNode::getEffect(v2, this))
  {
    this = OZSceneNode::getEffect(v2, v3);
    v4 = this + 6;
  }

  else
  {
    if (OZSceneNode::getBehavior(v2, v3))
    {
      this = OZSceneNode::getBehavior(v2, v3);
    }

    else
    {
      this = (*(*v2 + 328))(v2, v3);
      if (!this)
      {
        v5 = 0;
        goto LABEL_15;
      }

      this = (*(*v2 + 328))(v2, v3);
    }

    v4 = this + 2;
  }

  if (this)
  {
    v5 = v4;
  }

  else
  {
    v5 = 0;
  }

LABEL_15:
  v6 = *(v1 + 50);
  if (vorr_s8(*v6.i8, *&vextq_s8(v6, v6, 8uLL)))
  {
    if (v5 && (this = (*(*v5 + 256))(v5), v6 = *(v1 + 50), (vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(this[1] + 8), v6)))) & 1) == 0))
    {
      v12 = 0;
    }

    else if (vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(*(v2 + 8) + 8), v6)))))
    {
      v7 = *(v2 + 984);
      if (v7 == v2 + 976)
      {
        goto LABEL_63;
      }

      v8 = 0;
      v9 = 0;
      do
      {
        v10 = *(v7 + 16);
        if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(*(v10 + 40) + 8), *(v1 + 50))))) & 1) == 0)
        {
          v5 = v10 + 48;
          if (v9)
          {
            InternalName = OZObjectManipulator::getInternalName((v10 + 48));
            this = PCString::size(InternalName);
            if (this)
            {
              this = PCString::compare(InternalName, v1 + 105);
              if (!this)
              {
                goto LABEL_39;
              }
            }
          }

          else
          {
            v9 = *(v7 + 16);
            v8 = v10 + 48;
          }
        }

        v7 = *(v7 + 8);
      }

      while (v7 != v2 + 976);
      v5 = v8;
      if (!v8)
      {
LABEL_63:
        if ((*(v1 + 321) & 1) != 0 || (v13 = *(v2 + 1008), v13 == v2 + 1000))
        {
LABEL_38:
          v5 = 0;
        }

        else
        {
          while (1)
          {
            v14 = *(v13 + 16);
            if ((vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(*(v14 + 8) + 8), *(v1 + 50))))) & 1) == 0 && v14 != v1)
            {
              break;
            }

            v13 = *(v13 + 8);
            if (v13 == v2 + 1000)
            {
              goto LABEL_38;
            }
          }

          v5 = v14 + 16;
        }
      }

LABEL_39:
      v15 = v2 + 16;
      if (!v2)
      {
        v15 = 0;
      }

      v12 = v5 == 0;
      if (!v5)
      {
        v5 = v15;
      }

      if (!v5)
      {
        return this;
      }
    }

    else
    {
      v12 = 0;
      v5 = v2 + 16;
    }
  }

  else
  {
    v12 = 0;
    if (!v5)
    {
      return this;
    }
  }

  this = (*(*v5 + 224))(v5, v1[104], *(v1 + 107));
  v17 = this;
  if (v3)
  {
    v18 = (*(*v5 + 256))(v5);
    this = (*(*v18 + 56))(v18);
    if (!v17)
    {
      return this;
    }

    if (this != v3)
    {
      this = (*(*v1 + 96))(v1, v17);
      if (!this)
      {
        return this;
      }
    }
  }

  else if (!this)
  {
    return this;
  }

  if (*(v1 + 107) < 3.0)
  {
    *(v1 + 212) = OZSingleChannelBehavior::GetDefaultExcludeFlagsForChan(v17, v16);
  }

  this = OZSingleChannelBehavior::addToChannelHelper(v1, v17, v17, v12);
  if (this)
  {
    this = v1[104];
    if (this)
    {
      OZChannelRef::~OZChannelRef(this);
      this = MEMORY[0x2666E9F00]();
    }

    v1[104] = 0;
  }

  return this;
}

uint64_t OZSingleChannelBehavior::GetDefaultExcludeFlagsForChan(OZSingleChannelBehavior *this, OZChannelBase *a2)
{
  if (!this)
  {
    return 0;
  }

  {
    return 4;
  }

  {
    return 3;
  }

  else
  {
    return 0;
  }
}

uint64_t OZSingleChannelBehavior::addToChannelHelper(OZSingleChannelBehavior *this, OZChannelBase *a2, OZChannelBase *a3, int a4)
{
  if (a4 && (v8 = *(this + 51), *&vorr_s8(*v8.i8, *&vextq_s8(v8, v8, 8uLL))))
  {
    if (vmaxv_u16(vmovn_s32(vmvnq_s8(vceqq_s32(*(a2->var1 + 8), v8)))))
    {
      return 0;
    }
  }

  else if (!a2)
  {
    return 1;
  }

  if (v9)
  {
    OZChannelInfo::OZChannelInfo(v18, v9->var16);
    if (!a4 || OZChannelInfo::operator==(v18, this + 544))
    {
      OZChannelBehavior::setAffectedChannel(this, a2);
      OZSingleChannelBehavior::addToOneChannel(this, v9);
    }

    goto LABEL_28;
  }

  if (!v10)
  {
    return 1;
  }

  v11 = v10[14];
  if (!v11)
  {
    return 1;
  }

  v12 = *v11;
  if (*v11 == *(v11 + 8))
  {
    return 1;
  }

  v13 = 1;
  while (1)
  {
    v14 = *v12;
    if (*v12)
    {
      break;
    }

LABEL_26:
    if (++v12 == *(v11 + 8))
    {
      return 1;
    }
  }

  if (!v15)
  {
    if (v16)
    {
      OZSingleChannelBehavior::addToChannelHelper(this, v16, a3, a4 & 1);
    }

    goto LABEL_26;
  }

  if ((*(this + 212) & v13) != 0)
  {
LABEL_25:
    v13 *= 2;
    goto LABEL_26;
  }

  if (((*(*this + 792))(this) & 1) == 0 && !(*(v15->var0 + 64))(v15))
  {
    (*(*this + 800))(this, v15);
    goto LABEL_25;
  }

  OZChannelInfo::OZChannelInfo(v18, v15->var16);
  if ((a4 & 1) == 0 || OZChannelInfo::operator==(v18, this + 544))
  {
    OZChannelBehavior::setAffectedChannel(this, a3);
    OZSingleChannelBehavior::addToOneChannel(this, v15);
  }

LABEL_28:
  OZChannelInfo::~OZChannelInfo(v18);
  return 0;
}

void OZSingleChannelBehavior::willRemove(PCString *this)
{
  v2 = (this->var0[10].isa)(this);
  if (this[49].var0)
  {
    var0 = this[47].var0;
    if (v2 && var0[1].isa != 0)
    {
      ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, var0[1].isa);
      *&this[100].var0 = *(*((*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel) + 8) + 8);
      InternalName = OZObjectManipulator::getInternalName(ObjectManipulatorForChannel);
      PCString::set(this + 105, InternalName);
      p_isa = &this[104].var0->isa;
      if (p_isa)
      {
        OZChannelRef::~OZChannelRef(p_isa);
        MEMORY[0x2666E9F00]();
      }

      this[104].var0 = 0;
      operator new();
    }
  }

  OZChannelBehavior::willRemove(this);
}

uint64_t OZSingleChannelBehavior::sceneNodeDidLoad(OZSingleChannelBehavior *this)
{
  (*(*this + 808))(this);
  result = (*(*this + 320))(this);
  v3 = *(result + 1008);
  if (v3 != result + 1000)
  {
    v4 = *(v3 + 16);
    if (v4 != this)
    {
      do
      {
        v5 = v4;
        v3 = *(v3 + 8);
        if (v3 == result + 1000)
        {
          break;
        }

        v4 = *(v3 + 16);
      }

      while (v4 != this);
      if (v5)
      {
        result = (*(*this + 112))(this);
      }
    }
  }

  *(this + 852) = 0;
  return result;
}

uint64_t OZSingleChannelBehavior::didAddSceneNodeToScene(OZSingleChannelBehavior *this, OZScene *a2)
{
  result = OZChannelBehavior::didAddSceneNodeToScene(this, a2);
  if ((*(this + 852) & 1) == 0)
  {
    (*(*this + 808))(this);
    result = (*(*this + 320))(this);
    v4 = *(result + 1008);
    if (v4 != result + 1000)
    {
      v5 = *(v4 + 16);
      if (v5 != this)
      {
        do
        {
          v6 = v5;
          v4 = *(v4 + 8);
          if (v4 == result + 1000)
          {
            break;
          }

          v5 = *(v4 + 16);
        }

        while (v5 != this);
        if (v6)
        {
          v7 = *(*this + 112);

          return v7(this);
        }
      }
    }
  }

  return result;
}

void OZSingleChannelBehavior::willDeleteMaterialLayer(OZSingleChannelBehavior *this, OZChannelBase *a2)
{
  if (*(this + 49))
  {
    v4 = *(*(this + 47) + 32);
  }

  else
  {
    v4 = 0;
  }

  OZChannelBehavior::willDeleteMaterialLayer(this, a2);
  ObjectID = OZChanObjectManipRef::getObjectID((this + 640));
  ObjectManipulator = OZChannelBase::getObjectManipulator(a2);
  if (ObjectManipulator)
  {
    v7 = ObjectManipulator - 16;
  }

  else
  {
    v7 = 0;
  }

  v8 = (*(*v7 + 192))(v7);
  if (ObjectID == (*(*v8 + 56))(v8))
  {
    if (v4 && OZChannelBase::getObjectManipulator(v4))
    {
      ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, v4);
      *(this + 50) = *(*((*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel) + 8) + 8);
      if (v4->var5)
      {
        var5 = v4->var5;
      }

      else
      {
        var5 = &v4->var4;
      }

      PCString::set(this + 105, var5);
      v11 = *(this + 104);
      if (v11)
      {
        OZChannelRef::~OZChannelRef(v11);
        MEMORY[0x2666E9F00]();
      }

      *(this + 104) = 0;
      operator new();
    }

    *(this + 50) = 0u;
    PCString::clear(this + 105);
    v12 = *(this + 104);
    if (v12)
    {
      OZChannelRef::~OZChannelRef(v12);
      MEMORY[0x2666E9F00]();
    }

    *(this + 104) = 0;

    OZChannelBehavior::clearChannels(this);
  }
}

void OZSingleChannelBehavior::willDeleteObject(OZSingleChannelBehavior *this, OZObjectManipulator *a2)
{
  if (*(this + 49))
  {
    v4 = *(*(this + 47) + 32);
  }

  else
  {
    v4 = 0;
  }

  OZChannelBehavior::willDeleteObject(this, a2);
  ObjectID = OZChanObjectManipRef::getObjectID((this + 640));
  v6 = (*(*a2 + 256))(a2);
  if (ObjectID == (*(*v6 + 56))(v6))
  {
    if (v4 && OZChannelBase::getObjectManipulator(v4))
    {
      ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, v4);
      *(this + 50) = *(*((*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel) + 8) + 8);
      if (v4->var5)
      {
        var5 = v4->var5;
      }

      else
      {
        var5 = &v4->var4;
      }

      PCString::set(this + 105, var5);
      v9 = *(this + 104);
      if (v9)
      {
        OZChannelRef::~OZChannelRef(v9);
        MEMORY[0x2666E9F00]();
      }

      *(this + 104) = 0;
      operator new();
    }

    *(this + 50) = 0u;
    PCString::clear(this + 105);
    v10 = *(this + 104);
    if (v10)
    {
      OZChannelRef::~OZChannelRef(v10);
      MEMORY[0x2666E9F00]();
    }

    *(this + 104) = 0;

    OZChannelBehavior::clearChannels(this);
  }
}

uint64_t OZSingleChannelBehavior::didUndoDeleteOfObject(OZSingleChannelBehavior *this, OZObjectManipulator *a2)
{
  ObjectID = OZChanObjectManipRef::getObjectID((this + 640));
  v5 = (*(*a2 + 256))(a2);
  result = (*(*v5 + 56))(v5);
  if (ObjectID == result)
  {
    (*(*this + 808))(this);
    result = (*(*this + 320))(this);
    v7 = *(result + 1008);
    if (v7 != result + 1000)
    {
      v8 = *(v7 + 16);
      if (v8 != this)
      {
        do
        {
          v9 = v8;
          v7 = *(v7 + 8);
          if (v7 == result + 1000)
          {
            break;
          }

          v8 = *(v7 + 16);
        }

        while (v8 != this);
        if (v9)
        {
          v10 = *(*this + 112);

          return v10(this);
        }
      }
    }
  }

  return result;
}

void OZSingleChannelBehavior::willDeleteChannel(PCString *this, OZChannelBase *a2)
{
  if (this[49].var0)
  {
    isa = this[47].var0[1].isa;
  }

  else
  {
    isa = 0;
  }

  OZChannelBehavior::willDeleteChannel(this, a2);
  if (isa && isa == a2)
  {
    if (OZChannelBase::getObjectManipulator(a2))
    {
      ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, a2);
      *&this[100].var0 = *(*((*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel) + 8) + 8);
      if (a2->var5)
      {
        var5 = a2->var5;
      }

      else
      {
        var5 = &a2->var4;
      }

      PCString::set(this + 105, var5);
      p_isa = &this[104].var0->isa;
      if (p_isa)
      {
        OZChannelRef::~OZChannelRef(p_isa);
        MEMORY[0x2666E9F00]();
      }

      this[104].var0 = 0;
      operator new();
    }

    *&this[100].var0 = 0u;
    PCString::clear(this + 105);
    v8 = &this[104].var0->isa;
    if (v8)
    {
      OZChannelRef::~OZChannelRef(v8);
      MEMORY[0x2666E9F00]();
    }

    this[104].var0 = 0;

    OZChannelBehavior::clearChannels(this);
  }
}

void OZSingleChannelBehavior::didUndoDeleteChannel(OZSingleChannelBehavior *this, OZChannelBase *a2)
{
  if ((!*(this + 49) || !*(*(this + 47) + 32)) && *(this + 104))
  {
    ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, a2);
    v5 = (*(*ObjectManipulatorForChannel + 216))(ObjectManipulatorForChannel);
    OZChannelRef::OZChannelRef(v10, a2, v5);
    if (OZChannelRef::operator==(v10, *(this + 104)))
    {
      (*(*this + 808))(this);
      v6 = (*(*this + 320))(this);
      v7 = *(v6 + 1008);
      if (v7 != v6 + 1000)
      {
        v8 = *(v7 + 16);
        if (v8 != this)
        {
          do
          {
            v9 = v8;
            v7 = *(v7 + 8);
            if (v7 == v6 + 1000)
            {
              break;
            }

            v8 = *(v7 + 16);
          }

          while (v8 != this);
          if (v9)
          {
            (*(*this + 112))(this);
          }
        }
      }
    }

    OZChannelRef::~OZChannelRef(v10);
  }
}

void sub_2601C1D84(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  OZChannelRef::~OZChannelRef(va);
  _Unwind_Resume(a1);
}

void OZSingleChannelBehavior::updateChanRef(void *a1, uint64_t a2)
{
  if (a1[104])
  {
    v4 = *((*(*a1 + 320))(a1) + 8);
    *&v33[0].var0 = xmmword_260347A50;
    if (OZFactory::isKindOfClass(v4, v33))
    {
      v5 = a1[104];
      if (v5[23] < 0)
      {
        v5 = *v5;
      }

      PCString::PCString(&v32, v5);
      v6 = PCString::cf_str(&v32);
      allocator = *MEMORY[0x277CBECE8];
      ArrayBySeparatingStrings = CFStringCreateArrayBySeparatingStrings(*MEMORY[0x277CBECE8], v6, @"/");
      Count = CFArrayGetCount(ArrayBySeparatingStrings);
      if (Count < 1)
      {
        v26 = 0;
        v25 = 0;
      }

      else
      {
        MutableCopy = 0;
        v10 = 0;
        v11 = (a2 + 8);
        do
        {
          ValueAtIndex = CFArrayGetValueAtIndex(ArrayBySeparatingStrings, v10);
          if (CFStringCompare(ValueAtIndex, @".", 0))
          {
            IntValue = CFStringGetIntValue(ValueAtIndex);
            v14 = *v11;
            if (*v11)
            {
              v15 = a2 + 8;
              do
              {
                v16 = *(v14 + 28);
                v17 = v16 >= IntValue;
                v18 = v16 < IntValue;
                if (v17)
                {
                  v15 = v14;
                }

                v14 = *(v14 + 8 * v18);
              }

              while (v14);
              if (v15 != v11 && IntValue >= *(v15 + 28) && IntValue >= 10000)
              {
                LODWORD(v31.var0) = IntValue;
                v33[0].var0 = &v31;
                v20 = *(std::__tree<std::__value_type<unsigned int,unsigned int>,std::__map_value_compare<unsigned int,std::__value_type<unsigned int,unsigned int>,std::less<unsigned int>,true>,std::allocator<std::__value_type<unsigned int,unsigned int>>>::__emplace_unique_key_args<unsigned int,std::piecewise_construct_t const&,std::tuple<unsigned int &&>,std::tuple<>>(a2, &v31) + 8);
                v21 = *((*(*a1 + 320))(a1) + 944);
                v22 = *v21;
                v23 = v21[1];
                while (v22 != v23)
                {
                  if (v20 == *(*v22 + 24))
                  {
                    if (!MutableCopy)
                    {
                      MutableCopy = CFArrayCreateMutableCopy(allocator, Count, ArrayBySeparatingStrings);
                    }

                    v24 = CFStringCreateWithFormat(allocator, 0, @"%u", v20);
                    if (v24)
                    {
                      v25 = MutableCopy;
                      CFArraySetValueAtIndex(MutableCopy, v10, v24);
                      CFRelease(v24);
                      v26 = MutableCopy != 0;
                      if (MutableCopy)
                      {
                        v27 = a1[104];
                        if (v27)
                        {
                          OZChannelRef::~OZChannelRef(v27);
                          MEMORY[0x2666E9F00]();
                        }

                        a1[104] = 0;
                        PCSharedCount::PCSharedCount(v33);
                        for (i = 0; ; ++i)
                        {
                          v29 = CFArrayGetValueAtIndex(MutableCopy, i);
                          PCURL::PCURL(&v31, v29);
                          PCString::append(v33, &v31);
                          PCString::~PCString(&v31);
                          if (Count != 1)
                          {
                            PCString::append(v33, "/");
                          }

                          if (!--Count)
                          {
                            operator new();
                          }
                        }
                      }

                      goto LABEL_29;
                    }

                    break;
                  }

                  v22 += 8;
                }
              }
            }
          }

          ++v10;
        }

        while (v10 < Count);
        v25 = MutableCopy;
        v26 = MutableCopy != 0;
      }

LABEL_29:
      CFRelease(ArrayBySeparatingStrings);
      if (v26)
      {
        CFRelease(v25);
      }

      PCString::~PCString(&v32);
    }
  }
}

void sub_2601C20EC(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, PCString a11, PCString a12, PCString a13)
{
  MEMORY[0x2666E9F00](v13, 0x1012C40EC159624);
  PCString::~PCString(&a13);
  PCString::~PCString(&a12);
  _Unwind_Resume(a1);
}

void *OZSingleChannelBehavior::updateReferenceIDs(void *a1, void *a2)
{
  result = OZChannelObjectRoot::updateReferenceIDs(a1 + 7, a2);
  if ((*(a1 + 852) & 1) != 0 || a1[104])
  {
    result = (*(*a1 + 320))(a1);
    if (result)
    {
      OZSingleChannelBehavior::updateChanRef(a1, a2);
      result = (*(*a1 + 808))(a1);
      *(a1 + 852) = 0;
    }
  }

  return result;
}

uint64_t OZSingleChannelBehavior::getAffectedObject(OZSingleChannelBehavior *this)
{
  if (*(this + 49) && (v1 = *(*(this + 47) + 32)) != 0)
  {
    return OZChannelBase::getObjectManipulator(v1);
  }

  else
  {
    return 0;
  }
}

void OZSingleChannelBehavior::setChannelRef(OZSingleChannelBehavior *this, OZChannelBase *a2)
{
  v4 = *(this + 104);
  if (v4)
  {
    OZChannelRef::~OZChannelRef(v4);
    MEMORY[0x2666E9F00]();
    *(this + 104) = 0;
  }

  ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, a2);
  v6 = (*(*ObjectManipulatorForChannel + 216))(ObjectManipulatorForChannel);
  OZChannelRef::OZChannelRef(v9, a2, v6);
  v7 = (*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel);
  v8 = (*(*v7 + 56))(v7);
  OZChannel::setValue((this + 640), MEMORY[0x277CC08F0], v8, 0);
  operator new();
}

void sub_2601C23E8(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  MEMORY[0x2666E9F00](v2, 0x1012C40EC159624);
  OZChannelRef::~OZChannelRef(va);
  _Unwind_Resume(a1);
}

void OZSingleChannelBehavior::addToOneChannel(OZSingleChannelBehavior *this, OZChannel *a2)
{
  v4 = (*(*this + 648))(this);
  OZChannel::appendCurveProcessingNode(a2, v4);

  OZChannelBehavior::didAddCurveNode(this, v4);
}

uint64_t OZSingleChannelBehavior::addToChannel(OZSingleChannelBehavior *this, OZChannelBase *a2)
{
  v4 = *(this + 104);
  if (v4)
  {
    OZChannelRef::~OZChannelRef(v4);
    MEMORY[0x2666E9F00]();
    *(this + 104) = 0;
  }

  OZSingleChannelBehavior::addToChannelHelper(this, a2, a2, 0);
  if (!(*(*this + 320))(this))
  {
    SceneNodeFromChan = OZChannelBehavior::GetSceneNodeFromChan(a2, v5);
    (*(*this + 776))(this, SceneNodeFromChan);
  }

  ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, a2);

  return OZChanObjectManipRef::setObject((this + 640), ObjectManipulatorForChannel, 0);
}

__n128 OZSingleChannelBehavior::solveNode(OZSingleChannelBehavior *this, uint64_t a2, OZCurveNodeParam *a3)
{
  v3 = *(a3 + 19);
  v4 = *(a3 + 10);
  v11 = *(a3 + 5);
  result = *(a3 + 6);
  *&v10.value = result;
  v10.epoch = *(a3 + 14);
  if (*(a3 + 36))
  {
    v9 = 0;
    do
    {
      *(v3 + 8 * v9) = (*(*this + 680))(this, a2, &v10, 0.0, *(v4 + 8 * v9));
      v13 = v10;
      v12 = v11;
      PC_CMTimeSaferAdd(&v13, &v12, &v14);
      result = *&v14.value;
      v10 = v14;
      ++v9;
    }

    while (v9 < *(a3 + 36));
  }

  return result;
}

__n128 OZSingleChannelBehavior::getNeededRange(OZSingleChannelBehavior *this, unsigned int a2, OZCurveNodeParam *a3)
{
  *(a3 + 24) = *(a3 + 6);
  *(a3 + 5) = *(a3 + 14);
  result = *(a3 + 120);
  *(a3 + 3) = result;
  *(a3 + 8) = *(a3 + 17);
  *(a3 + 18) = *(a3 + 36);
  *(a3 + 88) = 0;
  *(a3 + 10) = *(a3 + 19);
  return result;
}

__n128 non-virtual thunk toOZSingleChannelBehavior::getNeededRange(OZSingleChannelBehavior *this, unsigned int a2, OZCurveNodeParam *a3)
{
  *(a3 + 24) = *(a3 + 6);
  *(a3 + 5) = *(a3 + 14);
  result = *(a3 + 120);
  *(a3 + 3) = result;
  *(a3 + 8) = *(a3 + 17);
  *(a3 + 18) = *(a3 + 36);
  *(a3 + 88) = 0;
  *(a3 + 10) = *(a3 + 19);
  return result;
}

void OZSingleChannelBehavior::conformToChannel(OZSingleChannelBehavior *this, OZChannel *a2, int a3, __n128 a4)
{
  var16 = a2->var16;
  v8 = *(var16 + 5);
  a4.n128_u64[0] = *(this + 78);
  if (v8 != a4.n128_f64[0])
  {
    if (a3)
    {
      *(this + 78) = v8;
      a4.n128_f64[0] = v8;
    }

    (*(*this + 752))(this, a4);
    var16 = a2->var16;
  }

  if (!OZChannelInfo::operator==(this + 544, var16))
  {
    if (a3)
    {
      OZChannelInfo::operator=(this + 544, a2->var16);
    }

    (*(*this + 760))(this, this + 544, a2);
  }

  if (a3)
  {
    v9 = *(a2->var16 + 2);
    (*(a2->var0 + 101))(a2);
    v11 = 3.40282347e38;
    if (v9 != -3.40282347e38 && v10.n128_f64[0] != 3.40282347e38)
    {
      v11 = (*(a2->var0 + 101))(a2, v10, 3.40282347e38) - *(a2->var16 + 2);
    }

    *(this + 79) = v11;
  }
}

uint64_t OZSingleChannelBehavior::writeBody(OZSingleChannelBehavior *this, PCSerializerWriteStream *a2, BOOL a3, BOOL a4, uint64_t a5)
{
  if (*(this + 49) && *(*(this + 47) + 32))
  {
    PCSerializerWriteStream::pushScope(a2, &OZChannelBehaviorScope);
    if (*(this + 49))
    {
      v10 = *(*(this + 47) + 32);
    }

    else
    {
      v10 = 0;
    }

    PCSharedCount::PCSharedCount(&v19);
    v18 = 0uLL;
    if (v10)
    {
      ObjectManipulatorForChannel = OZSingleChannelBehavior::getObjectManipulatorForChannel(this, v10);
      v12 = ObjectManipulatorForChannel;
      if (ObjectManipulatorForChannel)
      {
        v18 = *(*((*(*ObjectManipulatorForChannel + 256))(ObjectManipulatorForChannel) + 8) + 8);
        v13 = (*(*v12 + 216))(v12);
        OZChannelRef::OZChannelRef(v16, v10, v13);
        if (v17 >= 0)
        {
          v14 = v16;
        }

        else
        {
          v14 = v16[0];
        }

        PCString::set(&v19, v14);
        OZChannelRef::~OZChannelRef(v16);
      }
    }

    (*(*a2 + 16))(a2, 71);
    (*(*a2 + 192))(a2, 1, &v18);
    (*(*a2 + 200))(a2, 2, &v19);
    if (((*(*a2 + 232))(a2) & 1) == 0)
    {
      (*(*a2 + 184))(a2, 3, *(this + 79));
    }

    if (*(this + 212))
    {
      (*(*a2 + 144))(a2, 4);
    }

    (*(*a2 + 24))(a2);
    PCSerializerWriteStream::popScope(a2);
    PCString::~PCString(&v19);
  }

  return OZBehavior::writeBody(this, a2, a3, a4, a5);
}

void sub_2601C2C14(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, PCString a16)
{
  OZChannelRef::~OZChannelRef(&a10);
  PCString::~PCString(&a16);
  _Unwind_Resume(a1);
}

uint64_t OZSingleChannelBehavior::parseBegin(OZSingleChannelBehavior *this, PCSerializerReadStream *a2)
{
  OZBehavior::parseBegin(this, a2);
  PCSerializerReadStream::pushScope(a2, &OZChannelBehaviorScope);
  *(this + 852) = 1;
  LODWORD(v4) = *(a2 + 26);
  *(this + 107) = v4;
  return 1;
}

uint64_t non-virtual thunk toOZSingleChannelBehavior::parseBegin(OZSingleChannelBehavior *this, PCSerializerReadStream *a2)
{
  OZBehavior::parseBegin((this - 48), a2);
  PCSerializerReadStream::pushScope(a2, &OZChannelBehaviorScope);
  *(this + 804) = 1;
  LODWORD(v4) = *(a2 + 26);
  *(this + 101) = v4;
  return 1;
}

uint64_t OZSingleChannelBehavior::parseElement(PCSerializer **this, PCSerializerReadStream *a2, PCStreamElement *a3)
{
  OZBehavior::parseElement(this, a2, a3);
  if (*(a3 + 2) == 71)
  {
    AttributeAsUUID = PCSerializerReadStream::getAttributeAsUUID(a2, a3, 1);
    v7 = this + 100;
    if (AttributeAsUUID)
    {
      *v7 = *AttributeAsUUID;
      MEMORY[0x2666E9F00]();
    }

    else
    {
      *v7 = 0;
      this[101] = 0;
    }

    PCSharedCount::PCSharedCount(&v10);
    PCSerializerReadStream::getAttributeAsString(a2, a3, 2, &v10);
    v8 = this[104];
    if (v8)
    {
      OZChannelRef::~OZChannelRef(v8);
      MEMORY[0x2666E9F00]();
    }

    this[104] = 0;
    operator new();
  }

  return 1;
}

void sub_2601C2E4C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCString a10)
{
  MEMORY[0x2666E9F00](v10, 0x1012C40EC159624);
  PCString::~PCString(&a10);
  _Unwind_Resume(a1);
}

void OZMotionToForcesBehavior::OZMotionToForcesBehavior(OZMotionToForcesBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZSimulationBehavior::OZSimulationBehavior(this, a2, a3, a4);
  v5 = 0;
  *v6 = &unk_2872A4D70;
  *(v6 + 16) = &unk_2872A5068;
  *(v6 + 48) = &unk_2872A52C0;
  *(v6 + 336) = &unk_2872A5318;
  *(v6 + 344) = 0;
  *(v6 + 448) = 1;
  *(v6 + 456) = 0;
  *(v6 + 464) = 0;
  *(v6 + 472) = 0;
  *(v6 + 480) = 0x3FF0000000000000;
  *(v6 + 496) = 0;
  *(v6 + 504) = 0;
  *(v6 + 488) = 0;
  *(v6 + 552) = 1;
  *(v6 + 680) = 0x3FF0000000000000;
  *(v6 + 640) = 0x3FF0000000000000;
  *(v6 + 600) = 0x3FF0000000000000;
  *(v6 + 560) = 0x3FF0000000000000;
  *(v6 + 568) = 0u;
  *(v6 + 584) = 0u;
  *(v6 + 608) = 0u;
  *(v6 + 624) = 0u;
  *(v6 + 648) = 0u;
  *(v6 + 664) = 0u;
  do
  {
    v7 = this + v5;
    *(v7 + 91) = 0;
    *(this + v5 + 712) = 0uLL;
    *(v7 + 92) = 0x3FF0000000000000;
    *(v7 + 93) = 0;
    *(v7 + 47) = 0uLL;
    v5 += 88;
  }

  while (v5 != 528);
  PCMutex::PCMutex(this + 17);
  *(this + 26) = 0u;
  *(this + 27) = 0u;
  *(this + 24) = 0u;
  *(this + 25) = 0u;
  *(this + 22) = 0u;
  *(this + 23) = 0u;
  OZChannelBase::setFlag((this + 56), 10, 0);
  v8 = 0;
  v9 = xmmword_260343E00;
  v10 = vdupq_n_s64(6uLL);
  v11 = vdupq_n_s64(2uLL);
  do
  {
    if (vmovn_s64(vcgtq_u64(v10, v9)).u8[0])
    {
      *(this + v8 + 768) = 0;
    }

    if (vmovn_s64(vcgtq_u64(vdupq_n_s64(6uLL), *&v9)).i32[1])
    {
      *(this + v8 + 856) = 0;
    }

    v9 = vaddq_s64(v9, v11);
    v8 += 176;
  }

  while (v8 != 528);
  *(this + 304) = 0;
}

void sub_2601C3044(_Unwind_Exception *a1)
{
  PCMutex::~PCMutex(v1 + 17);
  OZSimulationBehavior::~OZSimulationBehavior(v1);
  _Unwind_Resume(a1);
}

void OZMotionToForcesBehavior::OZMotionToForcesBehavior(OZMotionToForcesBehavior *this, OZMotionToForcesBehavior *a2, char a3)
{
  OZSimulationBehavior::OZSimulationBehavior(this, a2, a3);
  v5 = 0;
  *v6 = &unk_2872A4D70;
  *(v6 + 16) = &unk_2872A5068;
  *(v6 + 48) = &unk_2872A52C0;
  *(v6 + 336) = &unk_2872A5318;
  *(v6 + 344) = 0;
  v7 = v6 + 344;
  *(v6 + 456) = 0;
  *(v6 + 464) = 0;
  *(v6 + 472) = 0;
  *(v6 + 480) = 0x3FF0000000000000;
  *(v6 + 496) = 0;
  *(v6 + 504) = 0;
  *(v6 + 488) = 0;
  *(v6 + 680) = 0x3FF0000000000000;
  *(v6 + 640) = 0x3FF0000000000000;
  *(v6 + 600) = 0x3FF0000000000000;
  *(v6 + 560) = 0x3FF0000000000000;
  *(v6 + 568) = 0u;
  *(v6 + 584) = 0u;
  *(v6 + 608) = 0u;
  *(v6 + 624) = 0u;
  *(v6 + 648) = 0u;
  *(v6 + 664) = 0u;
  do
  {
    v8 = this + v5;
    *(v8 + 91) = 0;
    *(this + v5 + 712) = 0uLL;
    *(v8 + 92) = 0x3FF0000000000000;
    *(v8 + 93) = 0;
    *(v8 + 47) = 0uLL;
    v5 += 88;
  }

  while (v5 != 528);
  PCMutex::PCMutex(this + 17);
  if ((a3 & 0x20) != 0)
  {
    v9 = OZSimulationBehavior::_MTF_IDGenerator--;
    OZChannelBase::setID((this + 56), v9);
  }

  OZChannelBase::setFlag((this + 56), 2, 0);
  v10 = 0;
  *(v7 + 96) = 0;
  *(v7 + 64) = 0u;
  *(v7 + 80) = 0u;
  *(v7 + 32) = 0u;
  *(v7 + 48) = 0u;
  *v7 = 0u;
  *(v7 + 16) = 0u;
  v11 = xmmword_260343E00;
  v12 = vdupq_n_s64(2uLL);
  v13 = vdupq_n_s64(6uLL);
  do
  {
    if (vmovn_s64(vcgtq_u64(v13, v11)).u8[0])
    {
      *(this + v10 + 768) = 0;
    }

    if (vmovn_s64(vcgtq_u64(vdupq_n_s64(6uLL), *&v11)).i32[1])
    {
      *(this + v10 + 856) = 0;
    }

    v11 = vaddq_s64(v11, v12);
    v10 += 176;
  }

  while (v10 != 528);
  *(this + 304) = 0;
}

void OZMotionToForcesBehavior::~OZMotionToForcesBehavior(PCMutex *this)
{
  this->_vptr$PCMutex = &unk_2872A4D70;
  *this->_Mutex.__opaque = &unk_2872A5068;
  *&this->_Mutex.__opaque[32] = &unk_2872A52C0;
  *&this[4]._Mutex.__opaque[32] = &unk_2872A5318;
  v2 = *&this[4]._Mutex.__opaque[40];
  if (v2)
  {
    (*(*v2 + 8))(v2);
  }

  PCMutex::~PCMutex(this + 17);

  OZSimulationBehavior::~OZSimulationBehavior(this);
}

{
  OZMotionToForcesBehavior::~OZMotionToForcesBehavior(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZMotionToForcesBehavior::~OZMotionToForcesBehavior(OZMotionToForcesBehavior *this)
{
  OZMotionToForcesBehavior::~OZMotionToForcesBehavior((this - 16));
}

{
  OZMotionToForcesBehavior::~OZMotionToForcesBehavior((this - 48));
}

{
  OZMotionToForcesBehavior::~OZMotionToForcesBehavior((this - 336));
}

{
  OZMotionToForcesBehavior::~OZMotionToForcesBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZMotionToForcesBehavior::~OZMotionToForcesBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZMotionToForcesBehavior::~OZMotionToForcesBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

void OZMotionToForcesBehavior::didAddToNode(OZMotionToForcesBehavior *this, OZSceneNode *a2)
{
  OZSimulationBehavior::didAddToNode(this, a2);
  v4 = (*(*a2 + 640))(a2);
  OZChannelObjectRoot::addBehavior(v4, this);
}

OZScene *OZMotionToForcesBehavior::willRemove(void **this)
{
  TransformNode = OZSimulationBehavior::getTransformNode(this);
  OZChannel::deleteCurveProcessingNode((TransformNode + 1352), this[44]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 1504), this[45]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 1952), this[46]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 2240), this[47]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 2392), this[48]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 2544), this[49]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 3096), this[50]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 3248), this[51]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 3696), this[52]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 3984), this[53]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 4136), this[54]);
  OZChannel::deleteCurveProcessingNode((TransformNode + 4288), this[55]);
  v3 = (*(*TransformNode + 640))(TransformNode);
  OZChannelObjectRoot::removeBehavior(v3, this);
  result = (*(*this + 42))(this);
  if (result)
  {
    result = OZObjectSimulator::willRemoveFromScene(this[43], result);
  }

  this[41] = 0;
  return result;
}

OZObjectSimulator *OZMotionToForcesBehavior::dirty(OZObjectSimulator **this)
{
  OZBehavior::dirty(this);
  result = this[43];
  if (result)
  {

    return OZObjectSimulator::dirty(result);
  }

  return result;
}

double OZMotionToForcesBehavior::calcStaticHash(uint64_t a1, void *lpsrc, uint64_t a3)
{
  if (!v6)
  {
    __cxa_bad_cast();
  }

  v7 = v6;
  OZBehavior::calcStaticHash(a1, lpsrc, a3);
  v10 = *PCHashWriteStream::getHash(v7)->i8;
  (*(*v7 + 40))(v7);
  OZObjectSimulator::calcStaticHash(*(a1 + 344), lpsrc, a3);
  Hash = PCHashWriteStream::getHash(v7);
  PCHash128::operator+=(&v10, Hash);
  *&result = PCHashWriteStream::setHash(v7, &v10).n128_u64[0];
  return result;
}

uint64_t OZMotionToForcesBehavior::calcHashForState(uint64_t result, uint64_t a2, __int128 *a3)
{
  v5 = *(result + 344);
  if (*(v5 + 208) == 1 && (*(v5 + 372) & 1) == 0)
  {
    v8 = v3;
    v9 = v4;
    v6 = *a3;
    v7 = *(a3 + 2);
    return (*(*a2 + 112))(a2, &v6);
  }

  return result;
}

uint64_t non-virtual thunk toOZMotionToForcesBehavior::calcHashForState(uint64_t result, uint64_t a2, __int128 *a3)
{
  v5 = *(result + 328);
  if (*(v5 + 208) == 1 && (*(v5 + 372) & 1) == 0)
  {
    v8 = v3;
    v9 = v4;
    v6 = *a3;
    v7 = *(a3 + 2);
    return (*(*a2 + 112))(a2, &v6);
  }

  return result;
}

BOOL OZMotionToForcesBehavior::canAddToSceneNode(OZMotionToForcesBehavior *this, OZSceneNode *a2)
{
  result = 1;
  if ((OZSimulationBehavior::canAddToSceneNode(this, a2) & 1) == 0)
  {
    v4 = *(a2 + 1);
    v5 = xmmword_260348420;
    if (!OZFactory::isKindOfClass(v4, &v5) || (OZSceneNode::isDescendantOf360Group(a2) & 1) == 0)
    {
      return 0;
    }
  }

  return result;
}

uint64_t OZMotionToForcesBehavior::accumForces(OZMotionToForcesBehavior *this, OZSimulationState *a2, OZTransformNode *a3)
{
  v148 = *MEMORY[0x277D85DE8];
  v126 = 0uLL;
  v127 = 0;
  TransformNode = OZSimulationBehavior::getTransformNode(this);
  OZChannelObjectRootBase::getTimeOffset((TransformNode + 56), &v143);
  *&time1.var0.var0 = *(a2 + 11);
  time1.var0.var3 = *(a2 + 24);
  *&time2.value = v143;
  time2.epoch = v144;
  v6 = PC_CMTimeSaferSubtract(&time1, &time2, &v126);
  memset(&v125, 0, sizeof(v125));
  v7 = (*(*a3 + 272))(a3, v6);
  OZSceneSettings::getFrameDuration((v7 + 336), &v125);
  memset(&v124, 0, sizeof(v124));
  operator*(&v125, &v124, 0.5001);
  *&time1.var0.var0 = *(a2 + 11);
  time1.var0.var3 = *(a2 + 24);
  time2 = *(this + 22);
  v8 = (this + 528);
  if (CMTimeCompare(&time1, &time2) < 1 || (*&time1.var0.var0 = *(a2 + 11), time1.var0.var3 = *(a2 + 24), *&time2.value = *v8, time2.epoch = *(this + 68), PC_CMTimeSaferSubtract(&time1, &time2, &v143), *&time1.var0.var0 = v143, time1.var0.var3 = v144, time2 = v124, result = CMTimeCompare(&time1, &time2), (result & 0x80000000) == 0))
  {
    *&time1.var0.var0 = *(a2 + 11);
    time1.var0.var3 = *(a2 + 24);
    *&time2.value = *v8;
    time2.epoch = *(this + 68);
    result = CMTimeCompare(&time1, &time2);
    if (result > 0 || (*&time1.var0.var0 = *v8, time1.var0.var3 = *(this + 68), time2 = *(a2 + 176), PC_CMTimeSaferSubtract(&time1, &time2, v140), *&time1.var0.var0 = v140[0], time1.var0.var3 = *&v140[1], time2 = v124, result = CMTimeCompare(&time1, &time2), (result & 0x80000000) == 0))
    {
      if ((*(this + 448) & 1) != 0 || *(this + 552) == 1)
      {
        v10 = 0;
        v147 = 0.0;
        v145 = 0u;
        v146 = 0u;
        v143 = 0u;
        v144 = 0u;
        v142 = 0;
        v141 = 0u;
        memset(v140, 0, sizeof(v140));
        do
        {
          v11 = (&time2.value + v10);
          *v11 = 0x3FF0000000000000;
          v11[1] = 0;
          v11[2] = 0;
          v11[3] = 0;
          v10 += 32;
        }

        while (v10 != 96);
        v123 = 0;
        v122 = 0;
        v120 = 0uLL;
        v121 = 0;
        *&time1.var0.var0 = v126;
        time1.var0.var3 = v127;
        v130 = v125;
        PC_CMTimeFloorToSampleDuration(&time1, &v130, &v120);
        memset(&v119, 0, sizeof(v119));
        *&time1.var0.var0 = v120;
        time1.var0.var3 = v121;
        v130 = v125;
        PC_CMTimeSaferSubtract(&time1, &v130, &v119);
        v118 = 3;
        v112 = OZSimulationBehavior::getTransformNode(this);
        if (*(this + 448))
        {
          var0.var0 = (v112 + 169);
          *&var0.var1 = v112 + 188;
          var0.var3 = (v112 + 244);
          v132[0] = v112 + 280;
          v132[1] = v112 + 299;
          v132[2] = v112 + 318;
          time1.var0 = v119;
          v130 = v125;
          p_time1 = &time1;
          if (OZMotionToForcesBehavior::findCachedValues(this, &v143, &time2, &v122, v118, &time1, &v130))
          {
            v116 = v119;
            v12 = 0;
            v13 = &v143;
            v14 = v140;
            do
            {
              if ((*(&v122 + v12) & 1) == 0)
              {
                v15 = 0;
                v16 = v13;
                do
                {
                  v130.value = v16;
                  LODWORD(v129.value) = 1;
                  OZChannel::getSamples(*(&var0.var0 + v15), 0, &v116, &v125, &v129, &p_time1, &v130);
                  v15 += 8;
                  v16 += 24;
                }

                while (v15 != 24);
                v17 = 0;
                v18 = v14;
                do
                {
                  v130.value = v18;
                  LODWORD(v129.value) = 1;
                  OZChannel::getSamples(v132[v17++], 0, &v116, &v125, &v129, &p_time1, &v130);
                  v18 += 24;
                }

                while (v17 != 3);
                v19 = *(&v140[1] + v12 + 1);
                v114 = *(&v141 + v12);
                v20 = __sincos_stret(*(v140 + v12) * 0.5);
                v21 = v20.__sinval * 0.0;
                v22 = __sincos_stret(v19 * 0.5);
                v23 = v22.__sinval * 0.0;
                v24 = __sincos_stret(v114 * 0.5);
                v25 = v20.__cosval * v22.__cosval - (v21 * v23 + v21 * v22.__sinval + v20.__sinval * v23);
                v26 = v20.__sinval * v22.__cosval + v20.__cosval * v23 + v21 * v22.__sinval - v21 * v23;
                v27 = v21 * v22.__cosval + v20.__cosval * v22.__sinval + v20.__sinval * v23 - v21 * v23;
                v28 = v21 * v23 - v20.__sinval * v22.__sinval + v21 * v22.__cosval + v20.__cosval * v23;
                v29 = v24.__sinval * 0.0 * v26;
                v30 = v24.__sinval * 0.0 * v27;
                v31 = v24.__sinval * 0.0 * v25;
                v32 = v24.__sinval * 0.0 * v28;
                v33 = (&time2.value + 4 * v12);
                *v33 = v24.__cosval * v25 - (v24.__sinval * v28 + v29 + v30);
                v33[1] = v24.__sinval * v27 - v32 + v24.__cosval * v26 + v31;
                v33[2] = v32 - v24.__sinval * v26 + v24.__cosval * v27 + v31;
                v33[3] = v29 - v30 + v24.__cosval * v28 + v24.__sinval * v25;
              }

              v129 = v116;
              v128 = v125;
              PC_CMTimeSaferAdd(&v129, &v128, &v130);
              ++v12;
              v116 = v130;
              v13 = (v13 + 8);
              v14 = (v14 + 8);
            }

            while (v12 < v118);
          }

          else
          {
            v41 = 0;
            v42 = &v143;
            do
            {
              v130.value = v42;
              OZChannel::getSamples(*(&var0.var0 + v41), 0, &v119, &v125, &v118, &p_time1, &v130);
              v42 = (v42 + 24);
              v41 += 8;
            }

            while (v41 != 24);
            v43 = 0;
            v44 = v140;
            do
            {
              v130.value = v44;
              OZChannel::getSamples(v132[v43], 0, &v119, &v125, &v118, &p_time1, &v130);
              v44 = (v44 + 24);
              ++v43;
            }

            while (v43 != 3);
            v45 = &v140[1] + 1;
            p_epoch = &time2.epoch;
            v47 = 3;
            do
            {
              v48 = *v45;
              v115 = v45[3];
              v49 = __sincos_stret(*(v45 - 3) * 0.5);
              v50 = v49.__sinval * 0.0;
              v51 = __sincos_stret(v48 * 0.5);
              v52 = v51.__sinval * 0.0;
              v53 = __sincos_stret(v115 * 0.5);
              v54 = v49.__cosval * v51.__cosval - (v50 * v52 + v50 * v51.__sinval + v49.__sinval * v52);
              v55 = v49.__sinval * v51.__cosval + v49.__cosval * v52 + v50 * v51.__sinval - v50 * v52;
              v56 = v50 * v51.__cosval + v49.__cosval * v51.__sinval + v49.__sinval * v52 - v50 * v52;
              v57 = v50 * v52 - v49.__sinval * v51.__sinval + v50 * v51.__cosval + v49.__cosval * v52;
              v58 = v53.__sinval * 0.0 * v55;
              v59 = v53.__sinval * 0.0 * v56;
              v60 = v53.__sinval * 0.0 * v54;
              v61 = v53.__sinval * 0.0 * v57;
              *(p_epoch - 2) = v53.__cosval * v54 - (v53.__sinval * v57 + v58 + v59);
              *(p_epoch - 1) = v53.__sinval * v56 - v61 + v53.__cosval * v55 + v60;
              *p_epoch = v61 - v53.__sinval * v55 + v53.__cosval * v56 + v60;
              p_epoch[1] = v58 - v59 + v53.__cosval * v57 + v53.__sinval * v54;
              p_epoch += 4;
              ++v45;
              --v47;
            }

            while (v47);
          }
        }

        else
        {
          v34 = *(this + 57);
          v35 = *(this + 58);
          v36 = &v144 + 1;
          v37 = *(this + 59);
          v38 = (this + 480);
          p_time2 = &time2;
          v40 = 3;
          do
          {
            *(v36 - 3) = v34;
            *v36 = v35;
            v36[3] = v37;
            if (p_time2 != v38)
            {
              p_time2->value = v38->value;
              *&p_time2->timescale = *(this + 488);
              p_time2[1].value = *(this + 63);
            }

            p_time2 = (p_time2 + 32);
            ++v36;
            --v40;
          }

          while (v40);
        }

        v62 = v112[120];
        if (v62)
        {
          if (v63)
          {
            v64 = v63;
            memset(&var0, 0, sizeof(var0));
            v65 = OZSimulationBehavior::getTransformNode(this);
            OZChannelObjectRootBase::getTimeOffset((v65 + 56), &v129);
            time1.var0 = v119;
            v130 = v129;
            PC_CMTimeSaferAdd(&time1, &v130, &var0);
            if (*(this + 552))
            {
              OZRenderState::OZRenderState(&time1);
              if (v118)
              {
                v66 = 0;
                v67 = &v143;
                do
                {
                  if ((*(&v122 + v66) & 1) == 0)
                  {
                    time1.var0 = var0;
                    time1.var8 = 0;
                    (*(*v64 + 1224))(v64, v67, &v67[1].n128_i64[1], v67 + 3, &time1);
                  }

                  v129 = var0;
                  v128 = v125;
                  PC_CMTimeSaferAdd(&v129, &v128, &v130);
                  ++v66;
                  var0 = v130;
                  v67 = (v67 + 8);
                }

                while (v66 < v118);
              }
            }

            else if (v118)
            {
              v68 = 0;
              v69 = &v144 + 1;
              v70 = &v122;
              do
              {
                v71 = *v70++;
                if ((v71 & 1) == 0)
                {
                  v72 = v69[3];
                  v73 = *v69;
                  time1.var0.var0 = *(v69 - 3);
                  *&time1.var0.var1 = v73;
                  time1.var0.var3 = v72;
                  PCMatrix44Tmpl<double>::transform<double>(this + 70, &time1.var0.var0, &time1.var0.var0);
                  *(v69 - 3) = time1.var0.var0;
                  var3 = time1.var0.var3;
                  *v69 = *&time1.var0.var1;
                  v69[3] = var3;
                }

                v130 = var0;
                v129 = v125;
                PC_CMTimeSaferAdd(&v130, &v129, &time1);
                ++v68;
                var0 = time1.var0;
                ++v69;
              }

              while (v68 < v118);
            }
          }
        }

        PCMutex::lock(this + 17);
        v129 = v119;
        if (v118)
        {
          v75 = 0;
          v76 = &v144 + 1;
          v77 = &time2;
          do
          {
            if ((*(&v122 + v75) & 1) == 0)
            {
              v78 = *(this + 304);
              *(this + 304) = (v78 + 1) % 6;
              v79 = this + 88 * v78 + 688;
              *v79 = v129;
              v80 = *v76;
              v81 = v76[3];
              *(v79 + 3) = *(v76 - 3);
              *(v79 + 4) = v80;
              *(v79 + 5) = v81;
              if (v77 != (v79 + 48))
              {
                *(v79 + 6) = v77->value;
                *(v79 + 56) = *&v77->timescale;
                *(v79 + 9) = v77[1].value;
              }

              v79[80] = 1;
            }

            time1.var0 = v129;
            v130 = v125;
            PC_CMTimeSaferAdd(&time1, &v130, &v129);
            ++v75;
            v77 = (v77 + 32);
            ++v76;
          }

          while (v75 < v118);
        }

        result = PCMutex::unlock(this + 17);
        v82 = *(this + 64);
        *&v83.f64[0] = v143.n128_u64[1];
        *&v84.f64[0] = v143.n128_u64[0];
        *&v85.f64[0] = v144;
        *&v83.f64[1] = v145;
        v84.f64[1] = *(&v144 + 1);
        v85.f64[1] = *(&v145 + 1);
        v86 = vaddq_f64(*(a2 + 8), vmulq_n_f64(vsubq_f64(vmulq_n_f64(vsubq_f64(v85, v83), v82), vmulq_n_f64(vsubq_f64(v83, v84), v82)), v82));
        v87 = (v82 + v82) * (v136.f64[0] - *&time2.value);
        v88 = (v82 + v82) * (v136.f64[1] - *&time2.timescale);
        v89 = (v82 + v82) * (v137.f64[0] - *&time2.epoch);
        v90 = (v82 + v82) * (v137.f64[1] - v135);
        v91.f64[0] = v82 * (*(&v146 + 1) - *&v146);
        v92.f64[0] = v82 * (v147 - *(&v146 + 1));
        v93 = *&time2.value * v88 - *&time2.timescale * v87 + *&time2.epoch * v90 - v135 * v89;
        v94 = *&time2.value * v89 - v87 * *&time2.epoch + v88 * v135 - *&time2.timescale * v90;
        v95 = *&time2.timescale * v89 - *&time2.epoch * v88 + *&time2.value * v90 - v87 * v135;
        v96 = vsubq_f64(v138, v136);
        v97 = vmulq_n_f64(vextq_s8(v96, v96, 8uLL), v82 + v82);
        v98 = vmulq_n_f64(vsubq_f64(v139, v137), v82 + v82);
        v99 = vmuld_n_f64(v136.f64[0], v98.f64[0]) - vmuld_lane_f64(v137.f64[0], v97, 1);
        v100 = vmuld_lane_f64(v137.f64[0], v98, 1) - vmuld_lane_f64(v98.f64[0], v137, 1);
        v101 = vmuld_lane_f64(v97.f64[0], v137, 1);
        v102 = vmuld_lane_f64(v136.f64[1], v98, 1);
        v103 = vsubq_f64(vmulq_f64(vextq_s8(v136, v136, 8uLL), v98), vmulq_f64(v137, v97));
        v97.f64[0] = vmuld_n_f64(v136.f64[0], v97.f64[0]) - vmuld_lane_f64(v136.f64[1], v97, 1) + v100;
        v104 = v99 + v101 - v102;
        v103.f64[0] = vaddvq_f64(v103);
        v105 = v104 * 0.0;
        v106 = v103.f64[0] * 0.0 + v97.f64[0] + v104 * 0.0;
        v97.f64[0] = v97.f64[0] * 0.0;
        v107 = v103.f64[0] * 0.0 + v104 + v97.f64[0];
        v103.f64[0] = v103.f64[0] + v97.f64[0] + v105;
        v108 = v95 * 0.0 + v93 + v94 * 0.0;
        v109 = v93 * 0.0;
        v103.f64[0] = v103.f64[0] - (v95 + v109 + v94 * 0.0);
        v110 = v82 * (v107 - (v95 * 0.0 + v94 + v109));
        v92.f64[1] = v106;
        v91.f64[1] = v108;
        v103.f64[0] = v82 * v103.f64[0];
        v111 = vaddq_f64(vmulq_n_f64(vsubq_f64(v92, v91), v82), *(a2 + 9));
        *(a2 + 8) = v86;
        *(a2 + 9) = v111;
        v91.f64[0] = *(a2 + 21) + v103.f64[0];
        *(a2 + 20) = *(a2 + 20) + v110;
        *(a2 + 21) = *&v91.f64[0];
      }
    }
  }

  return result;
}

uint64_t OZMotionToForcesBehavior::findCachedValues(PCMutex *a1, uint64_t a2, uint64_t a3, uint64_t a4, int a5, CMTime *a6, CMTime *a7)
{
  PCMutex::lock(a1 + 17);
  v12 = 0;
  v13 = 0;
  do
  {
    v14 = a1 + v12;
    if (a1[10]._Mutex.__opaque[v12 + 32] == 1)
    {
      v15 = (v14 + 688);
      time1 = *a6;
      time2 = *(v14 + 688);
      if (CMTimeCompare(&time1, &time2) <= 0)
      {
        memset(&v24, 0, sizeof(v24));
        time1 = *v15;
        time2 = *a6;
        PC_CMTimeSaferSubtract(&time1, &time2, &v24);
        time1 = v24;
        time2 = *a7;
        SampleNumber = PC_CMTimeGetSampleNumber(&time1, &time2);
        if (SampleNumber < a5)
        {
          v17 = a1 + v12;
          *(a2 + 8 * SampleNumber) = *&a1[9]._Mutex.__opaque[v12 + 48];
          *(a2 + 24 + 8 * SampleNumber) = *(&a1[10]._vptr$PCMutex + v12);
          *(a2 + 48 + 8 * SampleNumber) = *(&a1[10]._Mutex.__sig + v12);
          v18 = &a1[10]._Mutex.__opaque[v12];
          v19 = a3 + 32 * SampleNumber;
          if (v18 != v19)
          {
            *v19 = *v18;
            v20 = *(v17 + 744);
            *(v19 + 24) = *(v17 + 95);
            *(v19 + 8) = v20;
          }

          v13 = 1;
          *(a4 + SampleNumber) = 1;
        }
      }
    }

    v12 += 88;
  }

  while (v12 != 528);
  PCMutex::unlock(a1 + 17);
  return v13 & 1;
}

void OZMotionToForcesBehavior::accumInitialValuesHelper(OZMotionToForcesBehavior *this, OZSimulationState *a2, OZTransformNode *a3, int a4)
{
  v130 = *MEMORY[0x277D85DE8];
  v115 = 0uLL;
  v116 = 0;
  TransformNode = OZSimulationBehavior::getTransformNode(this);
  OZChannelObjectRootBase::getTimeOffset((TransformNode + 56), &v127);
  *&v120.var0.var0 = *(a2 + 11);
  v120.var0.var3 = *(a2 + 24);
  *&v103.value = v127;
  v103.epoch = v128;
  v9 = PC_CMTimeSaferSubtract(&v120, &v103, &v115);
  memset(&v114, 0, sizeof(v114));
  v10 = (*(*a3 + 272))(a3, v9);
  OZSceneSettings::getFrameDuration((v10 + 336), &v114);
  LOWORD(v103.value) = 1;
  *&v103.timescale = 0;
  v106 = 0;
  v107 = 0;
  v108 = 0;
  v104 = **&MEMORY[0x277CC08F0];
  v105 = v104;
  v111 = 0;
  v112 = 0;
  v113 = 0;
  v109 = v104;
  v110 = v104;
  v128 = 0u;
  v129 = 0u;
  v126 = 0u;
  v127 = 0u;
  v124 = 0u;
  v125 = 0u;
  memset(&v102, 0, sizeof(v102));
  *&v120.var0.var0 = v115;
  v120.var0.var3 = v116;
  v121[0] = v114;
  PC_CMTimeFloorToSampleDuration(&v120, v121, &v102);
  if (a4)
  {
    v11 = 2;
  }

  else
  {
    v11 = 1;
  }

  v101 = v11;
  v109 = v102;
  v111 = v11;
  v110 = v114;
  v12 = OZSimulationBehavior::getTransformNode(this);
  v13 = 0;
  v123[0] = v12 + 169;
  v123[1] = v12 + 188;
  v123[2] = v12 + 244;
  v122[0] = v12 + 280;
  v122[1] = v12 + 299;
  v122[2] = v12 + 318;
  v14 = &v127;
  v100 = v121;
  do
  {
    v120.var0.var0 = v14;
    v112 = v14;
    OZChannel::getSamples(v123[v13++], 0, &v102, &v114, &v101, &v100, &v120);
    ++v14;
  }

  while (v13 != 3);
  v15 = 0;
  v16 = &v124;
  do
  {
    v120.var0.var0 = v16;
    v112 = v16;
    OZChannel::getSamples(v122[v15++], 0, &v102, &v114, &v101, &v100, &v120);
    ++v16;
  }

  while (v15 != 3);
  v17 = *&v125;
  v98 = *&v126;
  v18 = __sincos_stret(*&v124 * 0.5);
  v19 = v18.__sinval * 0.0;
  v20 = __sincos_stret(v17 * 0.5);
  v21 = v20.__sinval * 0.0;
  v22 = __sincos_stret(v98 * 0.5);
  v23 = v18.__cosval * v20.__cosval - (v19 * v21 + v19 * v20.__sinval + v18.__sinval * v21);
  v24 = v18.__sinval * v20.__cosval + v18.__cosval * v21 + v19 * v20.__sinval - v19 * v21;
  v25 = v19 * v20.__cosval + v18.__cosval * v20.__sinval + v18.__sinval * v21 - v19 * v21;
  v26 = v19 * v21 - v18.__sinval * v20.__sinval + v19 * v20.__cosval + v18.__cosval * v21;
  v27 = v22.__sinval * 0.0 * v24;
  v28 = v22.__sinval * 0.0 * v25;
  v29 = v22.__cosval * v23 - (v22.__sinval * v26 + v27 + v28);
  v30 = v22.__sinval * 0.0 * v23;
  v31 = v22.__sinval * 0.0 * v26;
  v32 = v22.__sinval * v25 - v31 + v22.__cosval * v24 + v30;
  v33 = v31 - v22.__sinval * v24 + v22.__cosval * v25 + v30;
  v34 = v27 - v28 + v22.__cosval * v26 + v22.__sinval * v23;
  v35 = *(&v125 + 1);
  v36 = *(&v126 + 1);
  v37 = __sincos_stret(*(&v124 + 1) * 0.5);
  v38 = __sincos_stret(v35 * 0.5);
  v39 = __sincos_stret(v36 * 0.5);
  if ((*(this + 448) & 1) == 0)
  {
    v40 = v128;
    v41 = v129;
    *(this + 57) = v127.n128_u64[0];
    *(this + 58) = v40;
    *(this + 59) = v41;
    *(this + 60) = v29;
    *(this + 61) = v32;
    *(this + 62) = v33;
    *(this + 63) = v34;
  }

  v42 = v12[120];
  if (v42)
  {
    if (v43)
    {
      v44 = v43;
      OZRenderState::OZRenderState(&v120);
      memset(&v99, 0, sizeof(v99));
      v45 = OZSimulationBehavior::getTransformNode(this);
      OZChannelObjectRootBase::getTimeOffset((v45 + 56), &v117);
      v119 = v102;
      v118 = v117;
      PC_CMTimeSaferAdd(&v119, &v118, &v99);
      if (v101)
      {
        v46 = 0;
        v47 = &v127;
        do
        {
          v120.var0 = v99;
          v120.var8 = 0;
          (*(*v44 + 1224))(v44, v47, v47 + 1, v47 + 2, &v120);
          v118 = v99;
          v117 = v114;
          PC_CMTimeSaferAdd(&v118, &v117, &v119);
          v99 = v119;
          ++v46;
          v47 = (v47 + 8);
        }

        while (v46 < v101);
      }
    }
  }

  v48 = (*(*this + 336))(this);
  if (v48)
  {
    v49 = *(v48 + 368);
    if (a4)
    {
      goto LABEL_17;
    }

LABEL_21:
    v52 = 0uLL;
    v53 = 0.0;
    goto LABEL_22;
  }

  v49 = 30.0;
  if (!a4)
  {
    goto LABEL_21;
  }

LABEL_17:
  v50 = 0;
  v51 = &v127.n128_f64[1];
  do
  {
    *(&v120.var0.var0 + v50) = v49 * (*v51 - *(v51 - 1));
    v50 += 8;
    v51 += 2;
  }

  while (v50 != 24);
  v52 = *&v120.var0.var0;
  v53 = *&v120.var0.var3;
LABEL_22:
  v54 = v128;
  v55 = v129;
  *a2 = v127.n128_u64[0];
  *(a2 + 1) = v54;
  v56 = *(a2 + 9) + v53;
  *(a2 + 56) = vaddq_f64(*(a2 + 56), v52);
  *(a2 + 9) = v56;
  *(a2 + 2) = v55;
  *(a2 + 3) = v29;
  *(a2 + 4) = v32;
  *(a2 + 5) = v33;
  *(a2 + 6) = v34;
  if (a4)
  {
    v57 = v37.__sinval * (v38.__sinval * 0.0);
    v58 = v37.__sinval * 0.0 * v38.__sinval;
    v59 = v37.__sinval * 0.0 * (v38.__sinval * 0.0);
    v60 = v37.__sinval * 0.0 * v38.__cosval;
    v61 = v37.__cosval * (v38.__sinval * 0.0);
    v62 = v58 + v57;
    v63 = v37.__sinval * v38.__cosval + v61;
    v64 = v60 + v37.__cosval * v38.__sinval;
    v65 = v60 + v61;
    v66 = v59 - v37.__sinval * v38.__sinval;
    v67 = v63 + v58 - v59;
    v68 = v64 + v57 - v59;
    v69 = v37.__cosval * v38.__cosval - (v59 + v62);
    v70 = v66 + v65;
    v71 = v39.__sinval * 0.0 * v67;
    v72 = v39.__sinval * 0.0 * v68;
    v73 = v39.__sinval * v70;
    v74 = v39.__sinval * 0.0 * v69;
    v75 = v39.__cosval * v70;
    v76 = v39.__sinval * 0.0 * v70;
    v77 = v73 + v71 + v72;
    v78 = v39.__cosval * v67 + v74;
    v79 = v39.__cosval * v68 + v74;
    v80 = v39.__sinval * v68 - v76;
    v81 = v76 - v39.__sinval * v67;
    v82 = v49 + v49;
    v83 = v82 * (v39.__cosval * v69 - v77 - v29);
    v84 = v82 * (v80 + v78 - v32);
    v85 = v82 * (v81 + v79 - v33);
    v86 = v82 * (v71 - v72 + v75 + v39.__sinval * v69 - v34);
    v87 = v29 * v84 - v32 * v83;
    v88 = v29 * v85 - v33 * v83;
    v89 = v29 * v86 - v83 * v34;
    v90 = v87 + v33 * v86 - v34 * v85;
    v91 = v88 + v34 * v84 - v32 * v86;
    v92 = *(a2 + 11) + v91;
    *(a2 + 10) = *(a2 + 10) + v90;
    *(a2 + 11) = v92;
    v93 = v91 * 0.0;
    v94 = v90 + v91 * 0.0;
    v95 = v90 * 0.0;
    v96.f64[0] = v32 * v85 - v33 * v84 + v89;
    v97 = v96.f64[0] * 0.0 + v91 + v95;
    v96.f64[1] = v96.f64[0] * 0.0 + v94;
    *(a2 + 6) = vaddq_f64(v96, *(a2 + 6));
    v96.f64[0] = v96.f64[0] + v95 + v93 + *(a2 + 15);
    *(a2 + 14) = v97 + *(a2 + 14);
    *(a2 + 15) = v96.f64[0];
  }

  OZCurveNodeParam::~OZCurveNodeParam(&v103);
}

void sub_2601C53CC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, ...)
{
  va_start(va, a13);
  OZCurveNodeParam::~OZCurveNodeParam(va);
  _Unwind_Resume(a1);
}

__n128 OZMotionToForcesBehavior::accumInitialValues(OZMotionToForcesBehavior *this, OZSimulationState *a2, OZTransformNode *a3)
{
  v3 = *(a2 + 11);
  *(this + 68) = *(a2 + 24);
  *(this + 33) = v3;
  OZMotionToForcesBehavior::accumInitialValuesHelper(this, a2, a3, 1);
  return result;
}

void *OZMotionToForcesBehavior::updateCache(OZMotionToForcesBehavior *this)
{
  *(this + 448) = 1;
  *(this + 552) = 1;
  result = (*(*this + 336))(this);
  if (result)
  {
    *(this + 64) = result[46];
    *(this + 65) = result[48];
    result = OZSimulationBehavior::getTransformNode(this);
    if (result)
    {
      v3 = result;
      v4 = (result + 152);
      IsChannelRigged = (*(result[152] + 560))(result + 152);
      if ((IsChannelRigged & 1) == 0)
      {
        IsChannelRigged = (*(v3[263] + 560))(v3 + 263);
        if ((IsChannelRigged & 1) == 0)
        {
          IsChannelRigged = OZRigWidget::IsChannelRigged(v4, v6);
          if ((IsChannelRigged & 1) == 0)
          {
            IsChannelRigged = OZRigWidget::IsChannelRigged((v3 + 263), v7);
            if ((IsChannelRigged & 1) == 0)
            {
              *(this + 448) = 0;
            }
          }
        }
      }

      v8 = v3;
      while (v8)
      {
        v8 = *(v8 + 120);
        IsChannelRigged = OZMotionToForcesBehavior::isSceneNodeAnimated(IsChannelRigged, v8);
        if (IsChannelRigged)
        {
          *(this + 552) = 1;
          goto LABEL_15;
        }
      }

      *(this + 552) = 0;
      OZRenderState::OZRenderState(&v16);
      v16.var8 = 0;
      v9 = v3[120];
      *(this + 85) = 0x3FF0000000000000;
      *(this + 80) = 0x3FF0000000000000;
      *(this + 75) = 0x3FF0000000000000;
      *(this + 70) = 0x3FF0000000000000;
      *(this + 568) = 0u;
      *(this + 584) = 0u;
      *(this + 38) = 0u;
      *(this + 39) = 0u;
      *(this + 648) = 0u;
      *(this + 664) = 0u;
      if (v9)
      {
        if (v10)
        {
          (*(*v10 + 1256))(v10, this + 560, &v16);
        }
      }

LABEL_15:
      v11 = MEMORY[0x277CC08F0];
      *(this + 33) = *MEMORY[0x277CC08F0];
      *(this + 68) = *(v11 + 16);
      PCMutex::lock(this + 17);
      v12 = xmmword_260343E00;
      v13 = this + 856;
      v14 = vdupq_n_s64(2uLL);
      v15 = 6;
      do
      {
        if (vmovn_s64(vcgtq_u64(vdupq_n_s64(6uLL), v12)).u8[0])
        {
          *(v13 - 88) = 0;
        }

        if (vmovn_s64(vcgtq_u64(vdupq_n_s64(6uLL), *&v12)).i32[1])
        {
          *v13 = 0;
        }

        v12 = vaddq_s64(v12, v14);
        v13 += 176;
        v15 -= 2;
      }

      while (v15);
      *(this + 304) = 0;
      return PCMutex::unlock(this + 17);
    }
  }

  return result;
}

uint64_t OZMotionToForcesBehavior::isSceneNodeAnimated(OZMotionToForcesBehavior *this, OZSceneNode *lpsrc)
{
  if (!lpsrc)
  {
    return 0;
  }

  if (!v2)
  {
    return 0;
  }

  v3 = v2;
  if ((*(v2[152] + 560))() & 1) != 0 || ((*(v3[318] + 560))(v3 + 318) & 1) != 0 || ((*(v3[555] + 560))(v3 + 555) & 1) != 0 || ((*(v3[629] + 560))(v3 + 629))
  {
    return 1;
  }

  v4 = 1;
  if (OZBehavior::IsChannelAffectedByBehaviors((v3 + 169), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((v3 + 188), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((v3 + 318), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((v3 + 572), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((v3 + 591), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((v3 + 610), 1) & 1) != 0 || (OZBehavior::IsChannelAffectedByBehaviors((v3 + 646), 1))
  {
    return v4;
  }

  return OZBehavior::IsChannelAffectedByBehaviors((v3 + 665), 1);
}

double OZSimulationState::stepFrom(uint64_t a1, uint64_t a2, uint64_t a3, CMTime *a4, double a5)
{
  v6 = *(a3 + 72) * a5 + *(a2 + 16);
  *a1 = vaddq_f64(vmulq_n_f64(*(a3 + 56), a5), *a2);
  *(a1 + 16) = v6;
  v7 = *(a3 + 144) * a5 + *(a2 + 72);
  *(a1 + 56) = vaddq_f64(vmulq_n_f64(*(a3 + 128), a5), *(a2 + 56));
  *(a1 + 72) = v7;
  v8.f64[0] = 0.0;
  v8.f64[1] = *(a3 + 96);
  v9 = a5 * 0.5 * 0.125;
  v10 = vmulq_n_f64(v8, v9);
  v11 = *(a2 + 24);
  v12 = *(a2 + 32);
  v13 = vmulq_n_f64(*(a3 + 80), v9);
  v14 = *(a2 + 40);
  v15 = vextq_s8(v13, v10, 8uLL);
  v16 = vextq_s8(v10, v13, 8uLL);
  v17 = 8;
  do
  {
    v18.f64[0] = v14.f64[0];
    v18.f64[1] = v11;
    v19.f64[1] = v14.f64[1];
    v19.f64[0] = v11;
    v20 = vdupq_lane_s64(*&v14.f64[0], 0);
    v20.f64[0] = v12;
    v21 = v13.f64[0] * v11 + v10.f64[0] * v12 + vmuld_lane_f64(v13.f64[1], v14, 1) - v10.f64[1] * v14.f64[0];
    v22 = v11 + v10.f64[0] * v11 - (v13.f64[0] * v12 + v13.f64[1] * v14.f64[0] + vmuld_lane_f64(v10.f64[1], v14, 1));
    v23 = v12 + v21;
    v24 = vaddq_f64(v14, vaddq_f64(vaddq_f64(vmulq_f64(v10, v18), vmulq_f64(v15, v19)), vsubq_f64(vmulq_f64(v16, v20), vmulq_f64(v13, vextq_s8(v14, v20, 8uLL)))));
    v25 = vmulq_f64(v24, v24);
    v26 = sqrt(v22 * v22 + v25.f64[1] + v23 * v23 + v25.f64[0]);
    if (v26 == 0.0)
    {
      v11 = 1.0;
      v12 = 0.0;
      v14 = 0uLL;
    }

    else
    {
      v11 = v22 / v26;
      v14 = vdivq_f64(v24, vdupq_lane_s64(*&v26, 0));
      v12 = v23 / v26;
    }

    --v17;
  }

  while (v17);
  *(a1 + 24) = v11;
  *(a1 + 32) = v12;
  *(a1 + 40) = v14;
  v27 = *(a3 + 168) * a5 + *(a2 + 120);
  *(a1 + 104) = vaddq_f64(vmulq_n_f64(*(a3 + 152), a5), *(a2 + 104));
  *(a1 + 120) = v27;
  *(a1 + 80) = *(a1 + 104);
  *(a1 + 96) = *(a1 + 120);
  v28 = *(a3 + 144);
  *(a1 + 128) = *(a3 + 128);
  *(a1 + 144) = v28;
  v29 = *(a3 + 168);
  *(a1 + 152) = *(a3 + 152);
  *(a1 + 168) = v29;
  v34 = *(a2 + 176);
  v33 = *a4;
  PC_CMTimeSaferAdd(&v34, &v33, &v31);
  result = *&v31;
  *(a1 + 176) = v31;
  *(a1 + 192) = v32;
  return result;
}

void *OZSimulationState::GetCommonGroup(OZSimulationState *this, OZTransformNode *a2, OZTransformNode *a3)
{
  if (!this)
  {
    return 0;
  }

  if (!a2)
  {
    return 0;
  }

  CommonAncestor = OZSceneNode::getCommonAncestor(this, a2, 1);
  if (!CommonAncestor)
  {
    return 0;
  }
}

void *OZSimulationState::TransformToWorld(uint64_t a1, uint64_t a2, OZSimulationState *a3, uint64_t a4)
{
  result = *(a2 + 960);
  if (result)
  {
    if (result)
    {
      v9 = result;
      OZRenderState::OZRenderState(&v14);
      *&v14.var0.var0 = *a1;
      v14.var0.var3 = *(a1 + 16);
      if (a3)
      {
        CommonGroup = OZSimulationState::GetCommonGroup(a3, a2, v10);
        v12 = CommonGroup;
        if (CommonGroup)
        {
          v13 = 0;
          v14.var3 = (*(*CommonGroup + 1328))(CommonGroup);
          goto LABEL_8;
        }
      }

      else
      {
        v12 = 0;
      }

      v13 = 1;
LABEL_8:
      v14.var5 = v12;
      result = (*(*v9 + 1232))(v9, a4, &v14);
      if ((v13 & 1) == 0)
      {
        v14.var3 = 1.0;
        v14.var5 = 0;
        v14.var8 = 0;
        return (*(*v12 + 1232))(v12, a4, &v14);
      }
    }
  }

  return result;
}

void *OZSimulationState::GetNodePosition(CMTime *a1, uint64_t a2, OZSimulationState *a3, void *a4)
{
  v17 = 0uLL;
  v18 = 0;
  v8 = (*(*a2 + 272))(a2);
  OZSceneSettings::getFrameDuration((v8 + 336), &v17);
  memset(&v16, 0, sizeof(v16));
  v20 = *a1;
  *&v19.value = v17;
  v19.epoch = v18;
  PC_CMTimeFloorToSampleDuration(&v20, &v19, &v15);
  v20 = v15;
  *&v19.value = v17;
  v19.epoch = v18;
  PC_CMTimeSaferSubtract(&v20, &v19, &v16);
  OZChannel::getValueAsDouble((a2 + 1352), &v16, 0.0);
  v10 = v9;
  OZChannel::getValueAsDouble((a2 + 1504), &v16, 0.0);
  v12 = v11;
  OZChannel::getValueAsDouble((a2 + 1952), &v16, 0.0);
  *a4 = v10;
  a4[1] = v12;
  a4[2] = v13;
  return OZSimulationState::TransformToWorld(&v16, a2, a3, a4);
}

double OZSimulationState::getTransformedCorners(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6)
{
  v83 = 0.0;
  v84 = 0.0;
  v81 = 0.0;
  v82 = 0.0;
  v79 = 0.0;
  v80 = 0.0;
  v77 = 0.0;
  v78 = 0.0;
  v13 = *a1;
  v12 = *(a1 + 8);
  v14 = *(a1 + 16);
  OZRenderState::OZRenderState(&v76);
  *&v76.var0.var0 = *(a1 + 176);
  v76.var0.var3 = *(a1 + 192);
  v76.var8 = 0;
  (*(*a2 + 1312))(a2, &v84, &v83, &v82, &v76, 0);
  OZTransformNode::getShear(a2, &v81, &v80, (a1 + 176));
  OZTransformNode::getPivot(a2, &v79, &v78, &v77, (a1 + 176));
  v75 = 0x3FF0000000000000;
  v72 = 0x3FF0000000000000;
  v69 = 0x3FF0000000000000;
  v66 = 1.0;
  v67 = 0u;
  v68 = 0u;
  v70 = 0u;
  v71 = 0u;
  v73 = 0u;
  v74 = 0u;
  v15 = *(a2 + 960);
  if (v15)
  {
  }

  else
  {
    v16 = 0;
  }

  v17 = *((*(*a2 + 272))(a2) + 384);
  if (v16)
  {
    v18 = (*(*v16 + 1328))(v16);
    v76.var3 = v17;
    v17 = v18;
  }

  if (v17 == 0.0)
  {
    v17 = 1.0;
  }

  v24 = (*(*a2 + 1328))(a2);
  v25 = v84 * (v24 / v17);
  v84 = v25;
  if (v16)
  {
    v65 = 0x3FF0000000000000;
    v62 = 0x3FF0000000000000;
    v59 = 0x3FF0000000000000;
    v57 = 0x3FF0000000000000;
    *v58 = 0x3FF0000000000000;
    memset(&v58[8], 0, 32);
    v60 = 0u;
    v61 = 0u;
    v63 = 0u;
    v64 = 0u;
    v54 = 0x3FF0000000000000;
    v51 = 0x3FF0000000000000;
    *v50 = 0x3FF0000000000000;
    memset(&v50[8], 0, 32);
    v52 = 0u;
    v53 = 0u;
    v55 = 0u;
    v56 = 0u;
    (*(*v16 + 1264))(v16, v50, &v76);
    *&v48 = v13;
    *(&v48 + 1) = v12;
    *&v49 = v14;
    *(&v49 + 1) = 0x3FF0000000000000;
    PCMatrix44Tmpl<double>::transform<double>(v50, &v48, &v48);
    v31 = PCMatrix44Tmpl<double>::setTransformation(&v66, (a1 + 24), 0, *&v48, *(&v48 + 1), *&v49, v84, v83, v82, v81, v80, v26, v27, v28, v29, v30, v79, v78, v77, *&v17);
    (*(*v16 + 1256))(v16, v58, &v76, v31);
    PCMatrix44Tmpl<double>::operator*(v58, &v66, &v46);
    for (i = 0; i != 128; i += 32)
    {
      v33 = (&v66 + i);
      v34 = *(&v46 + i + 16);
      *v33 = *(&v46 + i);
      v33[1] = v34;
    }
  }

  else
  {
    PCMatrix44Tmpl<double>::setTransformation(&v66, (a1 + 24), 0, v13, v12, v14, v25, v83, v82, v81, v80, v19, v20, v21, v22, v23, v79, v78, v77, *&v17);
  }

  *v58 = 0uLL;
  __asm { FMOV            V0.2D, #-1.0 }

  *&v58[16] = _Q0;
  (*(*a2 + 1488))(a2, v58, &v76);
  *v50 = *v58;
  *&v50[8] = *&v58[8] + *&v58[24];
  *&v50[16] = xmmword_260342700;
  *&v46 = *v58 + *&v58[16];
  *(&v46 + 1) = *&v58[8] + *&v58[24];
  v47 = xmmword_260342700;
  v48 = *v58;
  v49 = xmmword_260342700;
  *&v44 = *v58 + *&v58[16];
  *(&v44 + 1) = *&v58[8];
  v45 = xmmword_260342700;
  PCMatrix44Tmpl<double>::transform<double>(&v66, v50, v50);
  PCMatrix44Tmpl<double>::transform<double>(&v66, &v46, &v46);
  PCMatrix44Tmpl<double>::transform<double>(&v66, &v48, &v48);
  PCMatrix44Tmpl<double>::transform<double>(&v66, &v44, &v44);
  v40 = *&v50[16];
  *a3 = *v50;
  *(a3 + 16) = v40;
  v41 = v47;
  *a4 = v46;
  *(a4 + 16) = v41;
  v42 = v45;
  *a5 = v44;
  *(a5 + 16) = v42;
  result = *&v49;
  *a6 = v48;
  *(a6 + 16) = result;
  return result;
}

double PCMatrix44Tmpl<double>::setTransformation(uint64_t a1, double *a2, int a3, double a4, double a5, double a6, double a7, double a8, double a9, float64_t a10, long double a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, double a17, double a18, double a19, uint64_t a20)
{
  v31 = a19;
  v30 = a20;
  v33 = a17;
  v32 = a18;
  *(a1 + 120) = 0x3FF0000000000000;
  *(a1 + 80) = 0x3FF0000000000000;
  *(a1 + 40) = 0x3FF0000000000000;
  *a1 = 0x3FF0000000000000;
  *(a1 + 8) = 0u;
  *(a1 + 24) = 0u;
  *(a1 + 48) = 0u;
  *(a1 + 64) = 0u;
  *(a1 + 88) = 0u;
  *(a1 + 104) = 0u;
  if (a3 <= 2)
  {
    if (a3)
    {
      if (a3 != 1)
      {
        if (a3 != 2)
        {
          goto LABEL_18;
        }

        v46 = a18;
        v47 = a19;
        v45 = a17;
        v48 = a20;
        PCMatrix44Tmpl<double>::rightRotate(a1, a2);
        PCMatrix44Tmpl<double>::rightTranslate(a1, a4, a5, a6);
        PCMatrix44Tmpl<double>::rightShear(a1, a10, a11);
        PCMatrix44Tmpl<double>::rightScale(a1, a7, a8, a9);
        goto LABEL_12;
      }

      v50 = a20;
      v41 = a5;
      v37 = a19;
      v42 = a6;
      v39 = a18;
      v40 = a17;
      PCMatrix44Tmpl<double>::rightTranslate(a1, a4, v41, v42);
      PCMatrix44Tmpl<double>::rightShear(a1, a10, a11);
      PCMatrix44Tmpl<double>::rightScale(a1, a7, a8, a9);
      PCMatrix44Tmpl<double>::rightRotate(a1, a2);
    }

    else
    {
      v50 = a20;
      v36 = a5;
      v37 = a19;
      v38 = a6;
      v39 = a18;
      v40 = a17;
      PCMatrix44Tmpl<double>::rightTranslate(a1, a4, v36, v38);
      PCMatrix44Tmpl<double>::rightRotate(a1, a2);
      PCMatrix44Tmpl<double>::rightShear(a1, a10, a11);
      PCMatrix44Tmpl<double>::rightScale(a1, a7, a8, a9);
    }

    v30 = v50;
    v33 = v40;
    v32 = v39;
    v31 = v37;
    goto LABEL_18;
  }

  if (a3 != 3)
  {
    if (a3 == 4)
    {
      v49 = a20;
      v47 = a19;
      v34 = a18;
      v35 = a17;
      PCMatrix44Tmpl<double>::rightShear(a1, a10, a11);
      PCMatrix44Tmpl<double>::rightScale(a1, a7, a8, a9);
      PCMatrix44Tmpl<double>::rightTranslate(a1, a4, a5, a6);
      PCMatrix44Tmpl<double>::rightRotate(a1, a2);
    }

    else
    {
      if (a3 != 5)
      {
        goto LABEL_18;
      }

      v49 = a20;
      v47 = a19;
      v34 = a18;
      v35 = a17;
      PCMatrix44Tmpl<double>::rightShear(a1, a10, a11);
      PCMatrix44Tmpl<double>::rightScale(a1, a7, a8, a9);
      PCMatrix44Tmpl<double>::rightRotate(a1, a2);
      PCMatrix44Tmpl<double>::rightTranslate(a1, a4, a5, a6);
    }

    v30 = v49;
    v33 = v35;
    v32 = v34;
    goto LABEL_17;
  }

  v46 = a18;
  v47 = a19;
  v45 = a17;
  v48 = a20;
  PCMatrix44Tmpl<double>::rightRotate(a1, a2);
  PCMatrix44Tmpl<double>::rightShear(a1, a10, a11);
  PCMatrix44Tmpl<double>::rightScale(a1, a7, a8, a9);
  PCMatrix44Tmpl<double>::rightTranslate(a1, a4, a5, a6);
LABEL_12:
  v30 = v48;
  v33 = v45;
  v32 = v46;
LABEL_17:
  v31 = v47;
LABEL_18:
  *(a1 + 32) = *(a1 + 32) * *&v30;
  *(a1 + 64) = *(a1 + 64) * *&v30;
  *(a1 + 8) = vdivq_f64(*(a1 + 8), vdupq_lane_s64(v30, 0));
  v43 = -v31;

  return PCMatrix44Tmpl<double>::rightTranslate(a1, -v33, -v32, v43);
}

__n128 OZSimulationState::initializeState(__n128 *this, const CMTime *a2)
{
  this->n128_u64[0] = 0;
  this->n128_u64[1] = 0;
  this[1].n128_u64[0] = 0;
  this[1].n128_u64[1] = 0x3FF0000000000000;
  this[2] = 0u;
  this[3] = 0u;
  this[4] = 0u;
  this[5] = 0u;
  this[6] = 0u;
  this[7] = 0u;
  this[8] = 0u;
  this[9] = 0u;
  this[10] = 0u;
  result = *&a2->value;
  this[12].n128_u64[0] = a2->epoch;
  this[11] = result;
  return result;
}

void OZRetimingBehavior::OZRetimingBehavior(OZRetimingBehavior *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3, a4);
  *v4 = &unk_2872A5388;
  *(v4 + 16) = &unk_2872A5678;
  *(v4 + 48) = &unk_2872A58D0;
  *(v4 + 336) = &unk_2872A5928;
  *(v4 + 536) = &unk_2872A5950;
  *(v4 + 544) = 0;
  v5 = MEMORY[0x277CC08F0];
  *(v4 + 548) = *MEMORY[0x277CC08F0];
  *(v4 + 564) = *(v5 + 16);
}

void OZRetimingBehavior::OZRetimingBehavior(OZRetimingBehavior *this, const OZRetimingBehavior *a2, char a3)
{
  OZChannelBehavior::OZChannelBehavior(this, a2, a3);
  *v3 = &unk_2872A5388;
  *(v3 + 16) = &unk_2872A5678;
  *(v3 + 48) = &unk_2872A58D0;
  *(v3 + 336) = &unk_2872A5928;
  *(v3 + 536) = &unk_2872A5950;
  *(v3 + 544) = 0;
  v4 = MEMORY[0x277CC08F0];
  *(v3 + 548) = *MEMORY[0x277CC08F0];
  *(v3 + 564) = *(v4 + 16);
}

void non-virtual thunk toOZRetimingBehavior::~OZRetimingBehavior(OZRetimingBehavior *this)
{
  OZChannelBehavior::~OZChannelBehavior((this - 16));
}

{
  OZChannelBehavior::~OZChannelBehavior((this - 48));
}

{
  OZChannelBehavior::~OZChannelBehavior((this - 336));
}

{
  OZChannelBehavior::~OZChannelBehavior((this - 536));
}

{
  OZChannelBehavior::~OZChannelBehavior((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZChannelBehavior::~OZChannelBehavior((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZChannelBehavior::~OZChannelBehavior((this - 336));

  JUMPOUT(0x2666E9F00);
}

{
  OZChannelBehavior::~OZChannelBehavior((this - 536));

  JUMPOUT(0x2666E9F00);
}

void OZRetimingBehavior::~OZRetimingBehavior(OZRetimingBehavior *this)
{
  OZChannelBehavior::~OZChannelBehavior(this);

  JUMPOUT(0x2666E9F00);
}

uint64_t OZRetimingBehavior::addRetimingNode(OZRetimingBehavior *this, OZSceneNode *a2)
{
  v2 = (*(*a2 + 640))(a2);
  result = OZRetimingUtil::GetRetimeFrameChannel(v2, v3);
  if (result)
  {
    operator new();
  }

  return result;
}

OZImageElement *OZRetimingBehavior::didAddSceneNodeToScene(OZRetimingBehavior *this, OZScene *a2)
{
  result = OZChannelBehavior::didAddSceneNodeToScene(this, a2);
  if ((*(this + 544) & 1) == 0)
  {
    v4 = (*(*this + 320))(this);
    result = OZRetimingBehavior::addRetimingNode(this, v4);
    if (v4)
    {
      if (result)
      {
        result = OZImageElement::updateRetimingState(result, v5);
      }
    }

    *(this + 544) = 1;
  }

  return result;
}

void OZRetimingBehavior::willRemove(OZRetimingBehavior *this)
{
  *(this + 544) = 0;
  v2 = (*(*this + 320))(this);
  v3 = (*(*v2 + 640))();
  v7 = *(this + 548);
  OZRetimingUtil::FixForRemovedBehavior(v3, &v7, v4);
  OZChannelBehavior::willRemove(this);
  if (v5)
  {
    OZImageElement::updateRetimingState(v5, v6);
  }
}

unint64_t OZRetimingBehavior::canAddToSceneNode(OZRetimingBehavior *this, OZSceneNode *a2)
{
  result = OZBehavior::canAddToSceneNode(this, a2);
  if (result)
  {

    return OZRetimingUtil::CanRetimeFull(a2, v4);
  }

  return result;
}

__n128 OZRetimingBehavior::solveNode(OZRetimingBehavior *this, uint64_t a2, OZCurveNodeParam *a3)
{
  v3 = *(a3 + 19);
  v4 = *(a3 + 10);
  v11 = *(a3 + 5);
  result = *(a3 + 6);
  *&v10.value = result;
  v10.epoch = *(a3 + 14);
  if (*(a3 + 36))
  {
    v9 = 0;
    do
    {
      *(v3 + 8 * v9) = (*(*this + 672))(this, a2, &v10, 0.0, *(v4 + 8 * v9));
      v13 = v10;
      v12 = v11;
      PC_CMTimeSaferAdd(&v13, &v12, &v14);
      result = *&v14.value;
      v10 = v14;
      ++v9;
    }

    while (v9 < *(a3 + 36));
  }

  return result;
}

__n128 OZRetimingBehavior::getNeededRange(OZRetimingBehavior *this, unsigned int a2, OZCurveNodeParam *a3)
{
  *(a3 + 24) = *(a3 + 6);
  *(a3 + 5) = *(a3 + 14);
  result = *(a3 + 120);
  *(a3 + 3) = result;
  *(a3 + 8) = *(a3 + 17);
  *(a3 + 18) = *(a3 + 36);
  *(a3 + 88) = 0;
  *(a3 + 10) = *(a3 + 19);
  return result;
}

__n128 non-virtual thunk toOZRetimingBehavior::getNeededRange(OZRetimingBehavior *this, unsigned int a2, OZCurveNodeParam *a3)
{
  *(a3 + 24) = *(a3 + 6);
  *(a3 + 5) = *(a3 + 14);
  result = *(a3 + 120);
  *(a3 + 3) = result;
  *(a3 + 8) = *(a3 + 17);
  *(a3 + 18) = *(a3 + 36);
  *(a3 + 88) = 0;
  *(a3 + 10) = *(a3 + 19);
  return result;
}

uint64_t OZChannelEnumDimension_Factory::getInstance(OZChannelEnumDimension_Factory *this)
{
  if (atomic_load_explicit(&OZChannelEnumDimension_Factory::_instanceOnce, memory_order_acquire) != -1)
  {
    v6[1] = v1;
    v6[2] = v2;
    v6[0] = &v4;
    v5 = v6;
    std::__call_once(&OZChannelEnumDimension_Factory::_instanceOnce, &v5, std::__call_once_proxy[abi:ne200100]<std::tuple<OZChannelEnumDimension_Factory::getInstance(void)::{lambda(void)#1} &&>>);
  }

  return OZChannelEnumDimension_Factory::_instance;
}

void OZChannelEnumDimension::OZChannelEnumDimension(OZChannelEnumDimension *this, unsigned int a2, const PCString *a3, const PCString *a4, OZChannelFolder *a5, unsigned int a6, int a7, OZChannelImpl *a8)
{
  OZChannelEnum::OZChannelEnum(this, a2, a3, a4, a5, a6, a7, a8, 0);
  *v9 = &unk_287295720;
  *(v9 + 2) = &unk_287295A90;
  *(this + 1) = OZChannelEnumDimension_Factory::getInstance(v9);
}

void OZChannelEnumDimension_Factory::OZChannelEnumDimension_Factory(OZChannelEnumDimension_Factory *this)
{
  v3 = xmmword_260848500;
  v4 = xmmword_260853250;
  v2 = OZFactory::OZFactory(this, &v4, &v3, 1);
  *v2 = &unk_2871ED158;
  PCSingleton::PCSingleton((v2 + 16), 0);
  *this = &unk_2872A59E8;
  *(this + 16) = &unk_2872A5AB8;
}

void OZLiFilter::OZLiFilter(OZLiFilter *this, OZEffect *a2, const OZRenderParams *a3, const OZRenderParams *a4, char a5)
{
  LiImageFilter::LiImageFilter(this, a2 + 1);
  v10 = *a2;
  *v11 = *a2;
  *(this + *(v10 - 24)) = *(a2 + 7);
  *(this + 5) = a3;
  *(this + 48) = a5;
  OZRenderParams::OZRenderParams((this + 56), a4);
}

void OZLiFilter::OZLiFilter(OZLiFilter *this, OZEffect *a2, const OZRenderParams *a3, char a4)
{
  *(this + 185) = &unk_2872DEA38;
  *(this + 186) = 0;
  *(this + 1496) = 1;
  LiImageFilter::LiImageFilter(this, &off_2872A5C20);
  *this = &unk_2872A5B18;
  *(this + 185) = &unk_2872A5C00;
  *(this + 5) = a2;
  *(this + 48) = a4;
  OZRenderParams::OZRenderParams((this + 56), a3);
}

void sub_2601C7570(_Unwind_Exception *a1)
{
  LiImageFilter::~LiImageFilter(v1, &off_2872A5C20);
  *(v1 + 1480) = v2;
  *(v1 + 1496) = 0;
  PCWeakCount::~PCWeakCount((v1 + 1488));
  _Unwind_Resume(a1);
}

void sub_2601C7688(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, PCSharedCount a12)
{
  PCSharedCount::~PCSharedCount(&a12);
  PCSharedCount::~PCSharedCount(v12 + 1);
  _Unwind_Resume(a1);
}

void OZLiFilter::getSourceAtTime(OZLiFilter *this@<X0>, CMTime *a2@<X1>, const OZRenderParams *a3@<X3>, int a4@<W2>, PCSharedCount *a5@<X8>)
{
  v10 = *(this + 2);
  if (!v10)
  {
    throw_PCNullPointerException(1);
  }

  v16[0] = *a2;
  (*(*v10 + 136))(&v19);
  if (a4)
  {
    a5->var0 = v19;
    PCSharedCount::PCSharedCount(a5 + 1, &v20);
  }

  else
  {
    OZRenderParams::OZRenderParams(v16, a3);
    *&v16[0].value = *&a2->value;
    epoch = a2->epoch;
    v17 = 0;
    v18 = 0;
    v16[0].epoch = epoch;
    (*(**(this + 5) + 648))(&v12);
    PCPtr<LiImageSource>::PCPtr<OZGradientSource>(&v14, &v12);
    PCSharedCount::~PCSharedCount(&v13);
    if (v14.var0)
    {
      (*(*v14.var0 + 168))(v14.var0, v19);
      PCPtr<LiImageSource>::PCPtr<OZGradientSource>(a5, &v14);
    }

    else
    {
      a5->var0 = v19;
      PCSharedCount::PCSharedCount(a5 + 1, &v20);
    }

    PCSharedCount::~PCSharedCount(&v15);
    OZRenderParams::~OZRenderParams(v16);
  }

  PCSharedCount::~PCSharedCount(&v20);
}

void sub_2601C7878(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  PCSharedCount::~PCSharedCount(v5 + 1);
  OZRenderParams::~OZRenderParams(va);
  PCSharedCount::~PCSharedCount((v6 - 72));
  _Unwind_Resume(a1);
}

void OZLiFilter::getHelium(OZLiFilter *this, LiAgent *a2)
{
  CGColorSpace = FxColorDescription::getCGColorSpace((*(a2 + 6) + 160));
  OZRenderParams::setWorkingColorSpace((this + 56), CGColorSpace);
  OZRenderParams::setBlendingGamma(this + 56, *(*(a2 + 6) + 192));
  v5 = *(this + 5);
  v8 = *(this + 2);
  PCSharedCount::PCSharedCount(&v9, this + 3);
  v6 = *(this + 56);
  v7 = *(this + 9);
  (*(*v5 + 224))(v5, a2, &v8, &v6, this + 56);
  PCSharedCount::~PCSharedCount(&v9);
}

uint64_t OZLiFilter::pixelTransformSupport(OZLiFilter *this, const LiRenderParameters *a2)
{
  result = *(this + 5);
  if (result)
  {
    if (result)
    {
      v4 = result;
      v5 = *(this + 56);
      v6 = *(this + 9);
      if ((*(*result + 656))(result, &v5))
      {
        return 6;
      }

      else
      {
        v5 = *(this + 56);
        v6 = *(this + 9);
        return (*(*(v4 + 368) + 248))(v4 + 368, &v5);
      }
    }
  }

  return result;
}

uint64_t OZLiFilter::setFilmSpace(OZLiFilter *this, int a2)
{
  *(this + 48) = a2;
  if (a2)
  {
    v2 = 2;
  }

  else
  {
    v2 = 1;
  }

  return (*(*this + 88))(this, v2);
}

uint64_t OZLiFilter::getBoundary(uint64_t a1, uint64_t a2, float64x2_t *a3)
{
  (*(**(a1 + 40) + 16))(*(a1 + 40), a3, a1 + 56);
  v11[0] = 0uLL;
  __asm { FMOV            V0.2D, #-1.0 }

  v11[1] = _Q0;
  if (LiImageFilter::getBoundary(a1))
  {
    PCRect<double>::operator|=(a3, v11);
  }

  return 1;
}

void OZLiFilter::~OZLiFilter(PCSharedCount *this)
{
  this->var0 = &unk_2872A5B18;
  this[185].var0 = &unk_2872A5C00;
  OZRenderParams::~OZRenderParams(&this[7]);
  this->var0 = off_2872A5C70;
  this[185].var0 = off_2872A5D58;
  PCSharedCount::~PCSharedCount(this + 3);
  OZChannelBase::setRangeName(this, &off_2872A5C28);
  this[185].var0 = &unk_2872DEA38;
  LOBYTE(this[187].var0) = 0;
  PCWeakCount::~PCWeakCount(&this[186].var0);
}

{
  this->var0 = &unk_2872A5B18;
  this[185].var0 = &unk_2872A5C00;
  OZRenderParams::~OZRenderParams(&this[7]);
  this->var0 = off_2872A5C70;
  this[185].var0 = off_2872A5D58;
  PCSharedCount::~PCSharedCount(this + 3);
  OZChannelBase::setRangeName(this, &off_2872A5C28);
  this[185].var0 = &unk_2872DEA38;
  LOBYTE(this[187].var0) = 0;
  PCWeakCount::~PCWeakCount(&this[186].var0);

  JUMPOUT(0x2666E9F00);
}

void virtual thunk toOZLiFilter::~OZLiFilter(OZLiFilter *this)
{
  v1 = (this + *(*this - 24));
  v1->var0 = &unk_2872A5B18;
  v1[185].var0 = &unk_2872A5C00;
  OZRenderParams::~OZRenderParams(&v1[7]);
  v1->var0 = off_2872A5C70;
  v1[185].var0 = off_2872A5D58;
  PCSharedCount::~PCSharedCount(v1 + 3);
  OZChannelBase::setRangeName(v1, &off_2872A5C28);
  v1[185].var0 = &unk_2872DEA38;
  LOBYTE(v1[187].var0) = 0;

  PCWeakCount::~PCWeakCount(&v1[186].var0);
}

{
  v1 = (this + *(*this - 24));
  v1->var0 = &unk_2872A5B18;
  v1[185].var0 = &unk_2872A5C00;
  OZRenderParams::~OZRenderParams(&v1[7]);
  v1->var0 = off_2872A5C70;
  v1[185].var0 = off_2872A5D58;
  PCSharedCount::~PCSharedCount(v1 + 3);
  OZChannelBase::setRangeName(v1, &off_2872A5C28);
  v1[185].var0 = &unk_2872DEA38;
  LOBYTE(v1[187].var0) = 0;
  PCWeakCount::~PCWeakCount(&v1[186].var0);

  JUMPOUT(0x2666E9F00);
}

uint64_t GLRenderer::getFrameNode@<X0>(GLRenderer *this@<X0>, OZScene *a2@<X1>, HGRenderJob *a3@<X2>, PCString *a4@<X3>, uint64_t *a5@<X4>, uint64_t *a6@<X8>)
{
  RenderNodeList = HGRenderJob::GetRenderNodeList(a3);
  if (*(*RenderNodeList + 8))
  {
    FxDeviceGetVirtualScreenForComputeDevice(RenderNodeList);
  }

  v13 = PGGetPerThreadContext();
  PGContext::setVirtualScreen(v13);
  v14 = *(a3 + 496);
  OZChannelBase::setRangeName(_F, a4);
  OZChannelBase::setRangeName(&v19, a4);
  *a6 = 0;
  if (v14)
  {
    GLRenderer::getFrameNodeWithMotionBlur(this, a2, a3, a4, a5, &v18);
  }

  else
  {
    GLRenderer::getFrameNodeIncludingFields(this, a2, a3, a4, a5, &v18);
  }

  if (v18)
  {
    *a6 = v18;
  }

  if (OZRenderParams::isDynamicRangeTrackingRender(a3) && OZRenderParams::wantsHLGToPQPostProcessingStep(a3))
  {
    WorkingColorSpace = OZRenderParams::getWorkingColorSpace(a3);
    OZRenderParams::getWorkingColorSpace(a3);
    FxConvertHLGToPQ(a6, WorkingColorSpace, 1);
  }

  OZImageElementFinalizer::~OZImageElementFinalizer(&v19);
  return OZChannelBase::setRangeName(_F, v16);
}

void sub_2601C8154(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, OZChannelBase *a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10, __int16 a11, char a12, char a13)
{
  if (a9)
  {
    (*(*a9 + 24))(a9, a2, a3, a4, a5);
  }

  if (*v13)
  {
    (*(**v13 + 24))(*v13, a2, a3, a4, a5);
  }

  OZImageElementFinalizer::~OZImageElementFinalizer(&a12);
  OZChannelBase::setRangeName(&a13, v15);
  _Unwind_Resume(a1);
}

CGColorSpace **GLRenderer::getFrameNodeWithMotionBlur@<X0>(GLRenderer *this@<X0>, OZScene *a2@<X1>, OZRenderParams *a3@<X2>, HGRenderer *a4@<X3>, uint64_t *a5@<X4>, void *a6@<X8>)
{
  v12 = *(a3 + 125);
  if (v12 == 1)
  {

    return GLRenderer::getFrameNodeIncludingFields(this, a2, a3, a4, a5, a6);
  }

  else
  {
    *a6 = 0;
    OutputColorDescription = OZRenderParams::getOutputColorDescription(a3);
    v15 = *OutputColorDescription;
    v46._pcColorDesc._colorSpaceRef._obj = v15;
    if (v15)
    {
      PCCFRefTraits<CGColorSpace *>::retain(v15);
    }

    v16 = *(OutputColorDescription + 1);
    v46._pcColorDesc._toneMapMethod._gain = *(OutputColorDescription + 4);
    *&v46._pcColorDesc._dynamicRange = v16;
    v46._isPremultiplied = OutputColorDescription[24];
    WorkingColorDescription = OZRenderParams::getWorkingColorDescription(a3);
    v18 = *WorkingColorDescription;
    v45._pcColorDesc._colorSpaceRef._obj = v18;
    if (v18)
    {
      PCCFRefTraits<CGColorSpace *>::retain(v18);
    }

    v19 = *(WorkingColorDescription + 8);
    v45._pcColorDesc._toneMapMethod._gain = *(WorkingColorDescription + 16);
    *&v45._pcColorDesc._dynamicRange = v19;
    v45._isPremultiplied = *(WorkingColorDescription + 24);
    OZRenderParams::setOutputColorDescription(a3, &v45);
    if (*(a3 + 123))
    {
      v20 = *(a3 + 63) * 0.5;
    }

    else
    {
      v20 = *(a3 + 63);
    }

    v43 = *a3;
    v44 = *(a3 + 2);
    *&v37._pcColorDesc._colorSpaceRef._obj = *a3;
    *&v37._pcColorDesc._toneMapMethod._gain = *(a3 + 2);
    v21 = FigTimeToFrameWithRate(&v37, *(a2 + 46));
    v40 = 0;
    v41 = 0;
    v42 = 0;
    std::vector<FxBalancedBlendRecord>::reserve(&v40, v12);
    if (v12)
    {
      v22 = 0;
      v23 = v20;
      v24 = (1.0 / v12) * v23;
      v25 = v21;
      v26 = v12 - 1;
      do
      {
        OZScene::getTimeForFrame(a2, ((v24 * v22) + v25), &v37);
        *a3 = *&v37._pcColorDesc._colorSpaceRef._obj;
        *(a3 + 2) = *&v37._pcColorDesc._toneMapMethod._gain;
        *(a3 + 49) = 0;
        *(a3 + 50) = 0;
        GLRenderer::getFrameNodeIncludingFields(this, a2, a3, a4, a5, &v39);
        FxBalancedBlendRecord::FxBalancedBlendRecord(&v37, &v39, 1.0);
        if (v39)
        {
          (*(*v39 + 24))(v39);
        }

        std::vector<FxBalancedBlendRecord>::push_back[abi:ne200100](&v40, &v37);
        v27 = *a5;
        if (v37._pcColorDesc._colorSpaceRef._obj)
        {
          (*(*v37._pcColorDesc._colorSpaceRef._obj + 24))(v37._pcColorDesc._colorSpaceRef._obj);
        }

        if (v27)
        {
          break;
        }
      }

      while (v26 != v22++);
    }

    if (*a5)
    {
      OZRenderParams::setOutputColorDescription(a3, &v46);
    }

    else
    {
      v30 = v40;
      v29 = v41;
      if (v40 == v41)
      {
        v35 = 0;
      }

      else
      {
        while (1)
        {
          FxBalancedBlendRecord::node(v30, &v37);
          v32 = LiHeUtil::isLiHeLightSurfaceFinalPass(v37._pcColorDesc._colorSpaceRef._obj, v31);
          if (v37._pcColorDesc._colorSpaceRef._obj)
          {
            (*(*v37._pcColorDesc._colorSpaceRef._obj + 24))(v37._pcColorDesc._colorSpaceRef._obj);
          }

          if (v32)
          {
            v35 = 1;
            v29 = v41;
            goto LABEL_35;
          }

          FxBalancedBlendRecord::node(v30, &v37);
          hasHGAnisotropicXForm = LiHeUtil::hasHGAnisotropicXForm(v37._pcColorDesc._colorSpaceRef._obj, v33);
          if (v37._pcColorDesc._colorSpaceRef._obj)
          {
            (*(*v37._pcColorDesc._colorSpaceRef._obj + 24))(v37._pcColorDesc._colorSpaceRef._obj);
          }

          v29 = v41;
          if (hasHGAnisotropicXForm)
          {
            break;
          }

          v30 = (v30 + 16);
          if (v30 == v41)
          {
            v35 = 0;
            goto LABEL_35;
          }
        }

        v35 = 1;
LABEL_35:
        v30 = v40;
      }

      makeBalancedBlendTree<std::__wrap_iter<FxBalancedBlendRecord *>>(v30, v29, &v38, v35);
      v37._pcColorDesc._colorSpaceRef._obj = v46._pcColorDesc._colorSpaceRef._obj;
      if (v46._pcColorDesc._colorSpaceRef._obj)
      {
        PCCFRefTraits<CGColorSpace *>::retain(v46._pcColorDesc._colorSpaceRef._obj);
      }

      *&v37._pcColorDesc._dynamicRange = *&v46._pcColorDesc._dynamicRange;
      v37._pcColorDesc._toneMapMethod._gain = v46._pcColorDesc._toneMapMethod._gain;
      v37._isPremultiplied = v46._isPremultiplied;
      FxApplyColorConform(&v38, &v45, &v37, &v36);
      if (v36)
      {
        *a6 = v36;
      }

      OZRenderParams::setOutputColorDescription(a3, &v37);
      PCCFRef<CGColorSpace *>::~PCCFRef(&v37._pcColorDesc._colorSpaceRef._obj);
      if (v38)
      {
        (*(*v38 + 24))(v38);
      }
    }

    *a3 = v43;
    *(a3 + 2) = v44;
    *(a3 + 49) = 0;
    *(a3 + 50) = 0;
    v37._pcColorDesc._colorSpaceRef._obj = &v40;
    std::vector<FxBalancedBlendRecord>::__destroy_vector::operator()[abi:ne200100](&v37);
    PCCFRef<CGColorSpace *>::~PCCFRef(&v45._pcColorDesc._colorSpaceRef._obj);
    return PCCFRef<CGColorSpace *>::~PCCFRef(&v46._pcColorDesc._colorSpaceRef._obj);
  }
}

void sub_2601C863C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, ...)
{
  va_start(va2, a3);
  va_start(va1, a3);
  va_start(va, a3);
  v5 = va_arg(va1, void **);
  v7 = va_arg(va1, void);
  v8 = va_arg(va1, void);
  v9 = va_arg(va1, void);
  v10 = va_arg(va1, void);
  v11 = va_arg(va1, void);
  v12 = va_arg(va1, void);
  va_copy(va2, va1);
  v13 = va_arg(va2, void);
  v15 = va_arg(va2, void);
  v16 = va_arg(va2, void);
  v17 = va_arg(va2, void);
  v18 = va_arg(va2, void);
  v19 = va_arg(va2, void);
  v20 = va_arg(va2, void);
  if (v11)
  {
    (*(*v11 + 24))(v11);
  }

  va_copy(v5, va1);
  std::vector<FxBalancedBlendRecord>::__destroy_vector::operator()[abi:ne200100](va);
  PCCFRef<CGColorSpace *>::~PCCFRef(va2);
  PCCFRef<CGColorSpace *>::~PCCFRef((v3 - 128));
  _Unwind_Resume(a1);
}

void sub_2601C87B4(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17)
{
  if (a17)
  {
    (*(*a17 + 24))(a17);
  }

  JUMPOUT(0x2601C875CLL);
}

GLRenderer *GLRenderer::getFrameNodeIncludingFields@<X0>(GLRenderer *this@<X0>, OZScene *a2@<X1>, OZRenderParams *a3@<X2>, HGRenderer *a4@<X3>, uint64_t *a5@<X4>, void *a6@<X8>)
{
  v10 = this;
  *a5 = 0;
  v11 = *(a3 + 123);
  if ((v11 - 1) < 2)
  {
    v45 = 0uLL;
    v46 = 0;
    OZSceneSettings::getFrameDuration((a2 + 336), &v45);
    v45.n128_i64[0] /= 2;
    v36.epoch = *(a3 + 2);
    v59[0].epoch = *(a3 + 2);
    *&v36.value = *a3;
    memset(v35, 0, 24);
    *&v59[0].value = *a3;
    *&v57.value = v45;
    v57.epoch = v46;
    PC_CMTimeSaferAdd(v59, &v57, v35);
    OZRenderParams::OZRenderParams(v59, a3);
    v59[0] = v36;
    v60 = 0uLL;
    GLRenderer::getFrameNodeForSingleTime(v10, a2, v59, a4, 0.5, -0.25, a5);
  }

  if ((v11 - 3) < 2)
  {
    OZRenderParams::getPixelTransform(a3, &v57);
    v45 = 0x3FF0000000000000uLL;
    v46 = 0;
    v47 = 0;
    v51 = 0;
    v52 = 0;
    v54 = 0u;
    v55 = 0u;
    v53 = 0x3FF0000000000000;
    v56 = 0x3FF0000000000000;
    v12 = vmulq_f64(*&v57.value, vextq_s8(v58, v58, 8uLL));
    v13 = vdupq_laneq_s64(v12, 1);
    v15 = vcgtq_f64(v13, v12);
    v14 = vmovn_s64(v15).u8[0];
    v15.i64[0] = -0.5;
    if (v11 == 3)
    {
      *v15.i64 = 0.5;
    }

    if (v14)
    {
      *v15.i64 = -*v15.i64;
    }

    v13.f64[0] = 0.0;
    v16.f64[0] = NAN;
    v16.f64[1] = NAN;
    v48 = vaddq_f64(vdupq_lane_s64(vbslq_s8(vnegq_f64(v16), v13, v15).i64[0], 0), xmmword_260342770);
    v49 = v48.f64[0];
    v50 = v15.i64[0];
    v44 = 0x3FF0000000000000;
    v41 = 0x3FF0000000000000;
    v38 = 0x3FF0000000000000;
    v36.value = 0x3FF0000000000000;
    *&v36.timescale = 0uLL;
    v37 = 0uLL;
    v39 = 0uLL;
    v40 = 0uLL;
    v42 = 0uLL;
    v43 = 0uLL;
    PCMatrix44Tmpl<double>::planarInverseZ(&v36, v45.n128_f64, 0.0);
    OZRenderParams::OZRenderParams(v59, a3);
    OZRenderParams::getPixelTransform(a3, v34);
    PCMatrix44Tmpl<double>::operator*(&v45, v34, v35);
    for (i = 0; i != 128; i += 32)
    {
      v18 = &v65[i];
      v19 = *&v35[i + 16];
      *v18 = *&v35[i];
      v18[1] = v19;
    }

    v65[128] = 1;
    if (OZRenderParams::hasROI(a3))
    {
      OZRenderParams::getROI(a3, v34);
      v20.i64[0] = SLODWORD(v34[0].f64[0]);
      v20.i64[1] = SHIDWORD(v34[0].f64[0]);
      v21 = vcvtq_f64_s64(v20);
      v20.i64[0] = SLODWORD(v34[0].f64[1]);
      v20.i64[1] = SHIDWORD(v34[0].f64[1]);
      *v35 = v21;
      *&v35[16] = vcvtq_f64_s64(v20);
      __asm { FMOV            V2.2D, #0.5 }

      v27 = vaddq_f64(v21, _Q2);
      __asm { FMOV            V2.2D, #-1.0 }

      v34[0] = v27;
      v34[1] = vaddq_f64(*&v35[16], _Q2);
      PCMatrix44Tmpl<double>::transformRect<double>(v45.n128_f64, v34[0].f64, v35);
      v29.f64[0] = *v35;
      v30 = vaddq_f64(*&v35[8], xmmword_260853290);
      v31 = vextq_s8(v30, v30, 8uLL);
      v29.f64[1] = *&v35[24];
      v32 = vaddq_f64(v29, xmmword_260853290);
      v33 = vaddq_f64(v31, v32);
      v31.f64[0] = v32.f64[0];
      v63 = vmovn_s64(vcvtq_s64_f64(vrndmq_f64(vaddq_f64(v31, vdupq_n_s64(0x3E7AD7F29ABCAF48uLL)))));
      v64 = vsub_s32(vmovn_s64(vcvtq_s64_f64(vrndpq_f64(v33))), v63);
    }

    v62 = 0;
    v60 = 0u;
    v61 = 0u;
    GLRenderer::getFrameNodeForSingleTime(v10, a2, v59, a4, 1.0, 0.0, a5);
  }

  if (!v11)
  {
    GLRenderer::getFrameNodeForSingleTime(this, a2, a3, a4, 1.0, 0.0, a5);
  }

  *a6 = 0;
  return this;
}

void sub_2601C8EA4(_Unwind_Exception *a1)
{
  if (STACK[0x200])
  {
    (*(*STACK[0x200] + 24))(STACK[0x200]);
  }

  OZRenderParams::~OZRenderParams(&STACK[0x280]);
  _Unwind_Resume(a1);
}

void GLRenderer::getFrameNodeForSingleTime(GLRenderer *this, OZScene *a2, OZRenderParams *a3, HGRenderer *a4, double a5, double a6, uint64_t *a7)
{
  *v14 = *a3;
  v15 = *(a3 + 2);
  OZSceneSettings::getFrameDuration((a2 + 336), &v16);
  operator/(v14, &v16, &time);
  CMTimeGetSeconds(&time);
  *a7 = 0;
  OZRenderParams::OZRenderParams(&time, a3);
  v23 = this;
  RenderNodeList = HGRenderJob::GetRenderNodeList(a3);
  if (*(*RenderNodeList + 8))
  {
    FxDeviceGetVirtualScreenForComputeDevice(RenderNodeList);
  }

  v12 = PGGetPerThreadContext();
  PGContext::setVirtualScreen(v12);
  PGPerThreadSetCurrentContextSentry::PGPerThreadSetCurrentContextSentry(v19);
  v17 = 0;
  PCSharedCount::PCSharedCount(&v18);
  v21 = 0x3FF0000000000000;
  v24 = 0u;
  v25 = 0u;
  v13 = v22;
  OZScene::setupFxPlugRenderContext(a2, a3);
  if (v13)
  {
    operator new();
  }

  OZScene::buildSceneRenderGraph(a2, &time);
}

void sub_2601C9760(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, uint64_t a21, uint64_t a22, uint64_t a23, uint64_t a24, uint64_t a25, uint64_t a26, uint64_t a27, uint64_t a28, uint64_t a29, uint64_t a30, uint64_t a31, uint64_t a32, uint64_t a33, uint64_t a34, uint64_t a35, uint64_t a36, uint64_t a37, uint64_t a38, uint64_t a39, uint64_t a40, uint64_t a41, uint64_t a42, uint64_t a43, uint64_t a44, uint64_t a45, uint64_t a46, uint64_t a47, uint64_t a48, uint64_t a49, uint64_t a50, uint64_t a51, uint64_t a52, uint64_t a53, uint64_t a54, uint64_t a55, uint64_t a56, uint64_t a57, uint64_t a58, uint64_t a59, uint64_t a60, CGColorSpace *a61)
{
  if (v61)
  {
    (*(*v61 + 24))(v61);
  }

  if (a14)
  {
    (*(*a14 + 24))(a14);
  }

  PCCFRef<CGColorSpace *>::~PCCFRef(&a61);
  PCSharedCount::~PCSharedCount(v62 + 1);
  PGPerThreadSetCurrentContextSentry::~PGPerThreadSetCurrentContextSentry(&STACK[0x280]);
  OZRenderParams::~OZRenderParams(&STACK[0x2A0]);
  _Unwind_Resume(a1);
}

void GLRenderer::getSceneHeNodeFromLiWorld(void *a1@<X3>, uint64_t a2@<X6>, void *a3@<X7>, void *a4@<X8>)
{
  memset(v22, 0, 32);
  PCColorDescription::PCColorDescription(v22);
  v7 = 1;
  LOBYTE(v22[1]._colorSpaceRef._obj) = 1;
  v8 = *a2;
  obj = v22[0]._colorSpaceRef._obj;
  if (*a2)
  {
    v10 = v8 == v22[0]._colorSpaceRef._obj;
  }

  else
  {
    v10 = 1;
  }

  if (!v10)
  {
    PCCFRefTraits<CGColorSpace *>::release(v8);
    obj = v22[0]._colorSpaceRef._obj;
    v7 = v22[1]._colorSpaceRef._obj;
  }

  *a2 = obj;
  v22[0]._colorSpaceRef._obj = 0;
  *(a2 + 8) = v22[0]._dynamicRange;
  *(a2 + 12) = v22[0]._toneMapMethod;
  *(a2 + 24) = v7;
  PCCFRef<CGColorSpace *>::~PCCFRef(&v22[0]._colorSpaceRef._obj);
  *a3 = 0;
  v11 = a1[160];
  v31 = v11;
  if (v11)
  {
    v12 = (v11 + *(*v11 - 24));
  }

  else
  {
    v12 = 0;
  }

  PCSharedCount::PCSharedCount(v32, v12);
  if (!v31)
  {
    throw_PCNullPointerException(1);
  }

  if ((*(*v31 + 704))(v31))
  {
    OZRenderParams::getPixelTransform(a1, v25);
    if (!v31)
    {
      throw_PCNullPointerException(1);
    }

    v13 = (*(*v31 + 688))(v31);
    if (v13 != 1.0)
    {
      v25[0] = v13 * v25[0];
      v26.f64[0] = v13 * v26.f64[0];
      v28 = v13 * v28;
      v29.f64[0] = v13 * v29.f64[0];
    }

    OZRenderParams::getROI(a1, &v24);
    v23 = xmmword_260343AA0;
    OZRenderParams::getROI(a1, v22);
    v23 = *&v22[0]._colorSpaceRef._obj;
    if (LiRenderingTechnology::getUseHalfHeightFields((a1 + 1316)))
    {
      v14 = SDWORD1(v23) * v19 + v20;
      v15 = vcvtmd_s64_f64(v23 + 0.0000001);
      v16 = vcvtpd_s64_f64(v23 + SDWORD2(v23)) - v15;
      *&v23 = __PAIR64__(vcvtmd_s64_f64(v14 + 0.0000001), v15);
      DWORD2(v23) = v16;
      HIDWORD(v23) = vcvtpd_s64_f64(v14 + SHIDWORD(v23) * v19) - DWORD1(v23);
    }

    if (LiRenderingTechnology::getUseHalfHeightFields((a1 + 1316)))
    {
      if (v19 != 1.0)
      {
        v26 = vmulq_n_f64(v26, v19);
        v27 = vmulq_n_f64(v27, v19);
      }

      if (v20 != 0.0)
      {
        v26 = vaddq_f64(v26, vmulq_n_f64(v29, v20));
        v27 = vaddq_f64(v27, vmulq_n_f64(v30, v20));
      }
    }

    operator new();
  }

  v17 = std::__put_character_sequence[abi:ne200100]<char,std::char_traits<char>>(MEMORY[0x277D82670], "GLRenderer::renderSingleFrame: error: invalid camera", 52);
  std::ios_base::getloc((v17 + *(*v17 - 24)));
  v18 = std::locale::use_facet(v22, MEMORY[0x277D82680]);
  (v18->__vftable[2].~facet_0)(v18, 10);
  std::locale::~locale(v22);
  std::ostream::put();
  std::ostream::flush();
  *a3 = 2;
  *a4 = 0;
  PCSharedCount::~PCSharedCount(v32);
}

void sub_2601CA2CC(_Unwind_Exception *a1, int a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, void *a8, ...)
{
  va_start(va, a8);
  if (STACK[0x208])
  {
    (*(*STACK[0x208] + 24))(STACK[0x208]);
  }

  LiAgent::~LiAgent(va);
  PCSharedCount::~PCSharedCount(v9 + 1);
  LiRenderParameters::~LiRenderParameters(&STACK[0x228]);
  if (a2 == 3)
  {
    __cxa_begin_catch(a1);
    *v8 = 1;
    __cxa_end_catch();
  }

  else if (a2 == 2)
  {
    v13 = __cxa_begin_catch(a1);
    (*(*v13 + 40))(v13);
    *v8 = 2;
    __cxa_end_catch();
  }

  else
  {
    if (a2 != 1)
    {
      if (*a8)
      {
        (*(**a8 + 24))(*a8);
      }

      PCSharedCount::~PCSharedCount(&STACK[0x308]);
      PCSharedCount::~PCSharedCount((v10 - 120));
      _Unwind_Resume(a1);
    }

    __cxa_begin_catch(a1);
    *v8 = 2;
    __cxa_end_catch();
  }

  JUMPOUT(0x2601CA274);
}

void *std::vector<FxBalancedBlendRecord>::reserve(void *result, unint64_t a2)
{
  if (a2 > (result[2] - *result) >> 4)
  {
    if (!(a2 >> 60))
    {
      std::__allocate_at_least[abi:ne200100]<std::allocator<FxBalancedBlendRecord>>(result, a2);
    }

    std::vector<double>::__throw_length_error[abi:ne200100]();
  }

  return result;
}

void sub_2601CA5EC(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  std::__split_buffer<FxBalancedBlendRecord>::~__split_buffer(va);
  _Unwind_Resume(a1);
}

void makeBalancedBlendTree<std::__wrap_iter<FxBalancedBlendRecord *>>(uint64_t a1@<X0>, uint64_t a2@<X1>, void *a3@<X8>, int a4@<W2>)
{
  if (a4 == 1)
  {
    makeBalancedBlendTree_RetimeAddBlend2<std::__wrap_iter<FxBalancedBlendRecord *>>(a1, a2, a3);
  }

  else
  {
    makeBalancedBlendTree_RetimeAddBlend6<std::__wrap_iter<FxBalancedBlendRecord *>>(a1, a2, a3);
  }
}

void *PCPtr<LiAnimCamera>::operator=<LiCamera>(void *a1, void *a2)
{
  lpsrc = a2;
  if (a2)
  {
    a2 = (a2 + *(*a2 - 24));
  }

  PCSharedCount::PCSharedCount(&v9, a2);
  if (!lpsrc)
  {
    *a1 = 0;
    goto LABEL_7;
  }

  *a1 = v3;
  if (!v3)
  {
LABEL_7:
    PCSharedCount::PCSharedCount(&v7);
    v4 = &v7;
    PCSharedCount::operator=(a1 + 1, &v7);
    goto LABEL_8;
  }

  PCSharedCount::PCSharedCount(&v6, &v9);
  v4 = &v6;
  PCSharedCount::operator=(a1 + 1, &v6);
LABEL_8:
  PCSharedCount::~PCSharedCount(v4);
  PCSharedCount::~PCSharedCount(&v9);
  return a1;
}

void sub_2601CA70C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCSharedCount a10)
{
  PCSharedCount::~PCSharedCount(&a9);
  PCSharedCount::~PCSharedCount(v10 + 1);
  _Unwind_Resume(a1);
}

void *PCPtr<OZNodeCamera>::operator=<LiCamera>(void *a1, void *a2)
{
  lpsrc = a2;
  if (a2)
  {
    a2 = (a2 + *(*a2 - 24));
  }

  PCSharedCount::PCSharedCount(&v9, a2);
  if (!lpsrc)
  {
    *a1 = 0;
    goto LABEL_7;
  }

  *a1 = v3;
  if (!v3)
  {
LABEL_7:
    PCSharedCount::PCSharedCount(&v7);
    v4 = &v7;
    PCSharedCount::operator=(a1 + 1, &v7);
    goto LABEL_8;
  }

  PCSharedCount::PCSharedCount(&v6, &v9);
  v4 = &v6;
  PCSharedCount::operator=(a1 + 1, &v6);
LABEL_8:
  PCSharedCount::~PCSharedCount(v4);
  PCSharedCount::~PCSharedCount(&v9);
  return a1;
}

void sub_2601CA838(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, PCSharedCount a10)
{
  PCSharedCount::~PCSharedCount(&a9);
  PCSharedCount::~PCSharedCount(v10 + 1);
  _Unwind_Resume(a1);
}

void fadeObjects2(void *a1, uint64_t a2, double a3)
{
  v6 = *a1;
  if (!v6)
  {
    throw_PCNullPointerException(1);
  }

  v7 = (*(*v6 + 136))(v6);
  if (v7 >= 1)
  {
    v8 = v7;
    v9 = 0;
    while (1)
    {
      if (!*a1)
      {
        throw_PCNullPointerException(1);
      }

      v10 = (*(**a1 + 144))(*a1, v9);
      v11 = v10;
      if (!v10)
      {
        break;
      }

      v13 = *(v11 + 130);
      if (v13 == a2 && v12 != 0)
      {
        goto LABEL_21;
      }

      if (v12)
      {
        v19 = v12;
        PCSharedCount::PCSharedCount(&v20, (v12 + *(*v12 - 24)));
        fadeObjects2(&v19, a2, a3);
        v15 = &v20;
LABEL_20:
        PCSharedCount::~PCSharedCount(v15);
        goto LABEL_21;
      }

      if (v13 != a2)
      {
        goto LABEL_18;
      }

LABEL_21:
      v9 = (v9 + 1);
      if (v8 == v9)
      {
        return;
      }
    }

    if (MEMORY[0x208] == a2)
    {
      goto LABEL_21;
    }

LABEL_18:
    v11[68] = v11[68] * a3;
    if (v16)
    {
      v17 = v16;
      PCSharedCount::PCSharedCount(&v18, (v16 + *(*v16 - 24)));
      fadeObjects2(&v17, a2, a3);
      v15 = &v18;
      goto LABEL_20;
    }

    goto LABEL_21;
  }
}

void makeBalancedBlendTree_RetimeAddBlend2<std::__wrap_iter<FxBalancedBlendRecord *>>(uint64_t a1@<X0>, uint64_t a2@<X1>, void *a3@<X8>)
{
  v4[0] = 0;
  v4[1] = 0;
  v3 = v4;
  v4[2] = &v3;
  v4[3] = v4;
  if (a1 != a2)
  {
    std::insert_iterator<std::multiset<FxBalancedBlendRecord,OZLessBalancedBlendRecord,std::allocator<FxBalancedBlendRecord>>>::operator=[abi:ne200100]();
  }

  FxBalancedBlendRecord::node((v3 + 4), a3);
  std::__tree<FxBalancedBlendRecord,OZLessBalancedBlendRecord,std::allocator<FxBalancedBlendRecord>>::destroy(&v3, v4[0]);
}

void OZCloneGenerator::registerRetiming(OZCloneGenerator *this)
{
  {
    OZRetimingUtil::RetimingExaminer::RetimingExaminer(&OZCloneGenerator::registerRetiming(void)::sRetimer);
    OZCloneGenerator::registerRetiming(void)::sRetimer = &unk_2872A6BB0;
    __cxa_atexit(OZRetimingUtil::RetimingExaminerTemplate<OZImageElement>::~RetimingExaminerTemplate, &OZCloneGenerator::registerRetiming(void)::sRetimer, &dword_25F8F0000);
  }
}

void OZCloneGenerator::OZCloneGenerator(OZCloneGenerator *this, OZFactory *a2, const PCString *a3, unsigned int a4)
{
  OZElement::OZElement(this, a2, a3, a4);
  *v6 = &unk_2872A5F08;
  *(v6 + 16) = &unk_2872A6810;
  *(v6 + 48) = &unk_2872A6A68;
  *(v6 + 6528) = &unk_2872A6AC0;
  OZChannelFolder::OZChannelFolder((v6 + 18776), a3, (this + 448), 1u, 0, 0);
  PCURL::PCURL(&v8, @"Channel Clone Source Node");
  OZChanElementOrFootageRef::OZChanElementOrFootageRef((this + 18904), &v8, (this + 18776), 0x12Cu, 0);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Time Remap Enum");
  PCURL::PCURL(&v7, @"Channel Clone Time Remap Label");
  OZChannelEnum::OZChannelEnum((this + 19064), 0, &v8, &v7, (this + 320), 0x130u, 2, 0, 0);
  PCString::~PCString(&v7);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Time Scale");
  OZChannelDouble::OZChannelDouble((this + 19320), 1.0, &v8, (this + 320), 0x131u, 4259840, 0, 0);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Time Reverse");
  OZChannelBool::OZChannelBool((this + 19472), 0, &v8, (this + 320), 0x132u, 0x410000u, 0, 0);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone End Condition Enum");
  PCURL::PCURL(&v7, @"Channel Clone End Condition Label");
  OZChannelEnum::OZChannelEnum((this + 19624), &v8, &v7, (this + 320), 0x133u, 2u, 0, 0);
  PCString::~PCString(&v7);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Loop Duration");
  OZChannelDouble::OZChannelDouble((this + 19880), 0.0, &v8, (this + 320), 0x134u, 32770, 0, 0);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Retime Frame");
  OZChannelDouble::OZChannelDouble((this + 20032), 1.0, &v8, (this + 320), 0x135u, 131074, 0, 0);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Retime Sampling Enum");
  PCURL::PCURL(&v7, @"Channel Clone Retime Sampling Label");
  OZChannelEnumRetime::OZChannelEnumRetime((this + 20184), &v8, &v7, (this + 320), 0x136u, 2u);
  PCString::~PCString(&v7);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Retime Frame Cache");
  OZChannelDouble::OZChannelDouble((this + 20440), 1.0, &v8, (this + 320), 0x137u, 131074, 0, 0);
  PCString::~PCString(&v8);
  PCURL::PCURL(&v8, @"Channel Clone Duration Cache");
  OZChannelDouble::OZChannelDouble((this + 20592), 0.0, &v8, (this + 320), 0x138u, 2, 0, 0);
  PCString::~PCString(&v8);
  *(this + 5186) = 0;
  OZChannel::setKeyframable((this + 19880), 0);
  OZChannel::setDiscrete((this + 20032), 0, 0);
  OZChannel::setKeyframable((this + 19320), 0);
  OZChannel::setKeyframable((this + 19472), 0);
  OZChannel::setKeyframable((this + 19064), 0);
  OZChannel::setKeyframable((this + 20184), 0);
  OZChannel::setKeyframable((this + 19624), 0);
  OZChannel::setKeyframable((this + 19880), 0);
  OZChannel::setMin((this + 19880), 0.0);
  OZChannel::setMax((this + 19880), 3.40282347e38);
}

void sub_2601CB5A4(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, _Unwind_Exception *exception_object, PCString a11, PCString a12)
{
  PCString::~PCString(&a12);
  OZChannel::~OZChannel((v12 + v13));
  OZChannelEnum::~OZChannelEnum((v12 + v14));
  OZChannel::~OZChannel((v12 + v19));
  OZChannel::~OZChannel((v12 + v18));
  OZChannelEnum::~OZChannelEnum((v12 + v17));
  OZChannelBool::~OZChannelBool((v12 + 19472));
  OZChannel::~OZChannel((v12 + 19320));
  OZChannelEnum::~OZChannelEnum((v12 + 19064));
  OZChanElementOrFootageRef::~OZChanElementOrFootageRef((v12 + v16));
  OZChannelFolder::~OZChannelFolder((v12 + v15));
  OZElement::~OZElement(v12);
  _Unwind_Resume(a1);
}

void OZCloneGenerator::OZCloneGenerator(OZCloneGenerator *this, const OZCloneGenerator *a2, uint64_t a3)
{
  OZElement::OZElement(this, a2, a3);
  *v5 = &unk_2872A5F08;
  *(v5 + 16) = &unk_2872A6810;
  *(v5 + 48) = &unk_2872A6A68;
  *(v5 + 6528) = &unk_2872A6AC0;
  OZChannelFolder::OZChannelFolder((v5 + 18776), (a2 + 18776), (this + 448));
  OZChanElementOrFootageRef::OZChanElementOrFootageRef((this + 18904), (a2 + 18904), (this + 18776));
  OZChannelEnum::OZChannelEnum((this + 19064), (a2 + 19064), (this + 320));
  OZChannel::OZChannel((this + 19320), (a2 + 19320), (this + 320));
  *(this + 2415) = &unk_287245C60;
  *(this + 2417) = &unk_287245FC0;
  OZChannelBool::OZChannelBool((this + 19472), (a2 + 19472), (this + 320));
  OZChannelEnum::OZChannelEnum((this + 19624), (a2 + 19624), (this + 320));
  OZChannel::OZChannel((this + 19880), (a2 + 19880), (this + 320));
  *(this + 2485) = &unk_287245C60;
  *(this + 2487) = &unk_287245FC0;
  OZChannel::OZChannel((this + 20032), (a2 + 20032), (this + 320));
  *(this + 2504) = &unk_287245C60;
  *(this + 2506) = &unk_287245FC0;
  OZChannelEnum::OZChannelEnum((this + 20184), (a2 + 20184), (this + 320));
  *(this + 2523) = &unk_287282A58;
  *(this + 2525) = &unk_287282DC8;
  OZChannel::OZChannel((this + 20440), (a2 + 20440), (this + 320));
  *(this + 2555) = &unk_287245C60;
  *(this + 2557) = &unk_287245FC0;
  OZChannel::OZChannel((this + 20592), (a2 + 20592), (this + 320));
  *(this + 2574) = &unk_287245C60;
  *(this + 2576) = &unk_287245FC0;
  *(this + 5186) = 0;
}

void sub_2601CBB3C(_Unwind_Exception *a1)
{
  OZChannel::~OZChannel(v6);
  OZChannelEnum::~OZChannelEnum(v5);
  OZChannel::~OZChannel(v4);
  OZChannel::~OZChannel(v3);
  OZChannelEnum::~OZChannelEnum((v1 + v9));
  OZChannelBool::~OZChannelBool((v1 + v8));
  OZChannel::~OZChannel(v2);
  OZChannelEnum::~OZChannelEnum((v1 + 19064));
  OZChanElementOrFootageRef::~OZChanElementOrFootageRef((v1 + 18904));
  OZChannelFolder::~OZChannelFolder((v1 + v7));
  OZElement::~OZElement(v1);
  _Unwind_Resume(a1);
}

void OZCloneGenerator::~OZCloneGenerator(OZCloneGenerator *this)
{
  *this = &unk_2872A5F08;
  *(this + 2) = &unk_2872A6810;
  *(this + 6) = &unk_2872A6A68;
  *(this + 816) = &unk_2872A6AC0;
  PCSpinLock::~PCSpinLock(this + 5186);
  OZChannel::~OZChannel((this + 20592));
  OZChannel::~OZChannel((this + 20440));
  OZChannelEnum::~OZChannelEnum(this + 2523);
  OZChannel::~OZChannel((this + 20032));
  OZChannel::~OZChannel((this + 19880));
  OZChannelEnum::~OZChannelEnum((this + 19624));
  OZChannelBool::~OZChannelBool((this + 19472));
  OZChannel::~OZChannel((this + 19320));
  OZChannelEnum::~OZChannelEnum((this + 19064));
  OZChanElementOrFootageRef::~OZChanElementOrFootageRef((this + 18904));
  OZChannelFolder::~OZChannelFolder((this + 18776));

  OZElement::~OZElement(this);
}

{
  OZCloneGenerator::~OZCloneGenerator(this);

  JUMPOUT(0x2666E9F00);
}

void non-virtual thunk toOZCloneGenerator::~OZCloneGenerator(OZCloneGenerator *this)
{
  OZCloneGenerator::~OZCloneGenerator((this - 16));
}

{
  OZCloneGenerator::~OZCloneGenerator((this - 48));
}

{
  OZCloneGenerator::~OZCloneGenerator((this - 6528));
}

{
  OZCloneGenerator::~OZCloneGenerator((this - 16));

  JUMPOUT(0x2666E9F00);
}

{
  OZCloneGenerator::~OZCloneGenerator((this - 48));

  JUMPOUT(0x2666E9F00);
}

{
  OZCloneGenerator::~OZCloneGenerator((this - 6528));

  JUMPOUT(0x2666E9F00);
}

uint64_t OZCloneGenerator::operator=(uint64_t a1, const void *a2)
{
  OZSceneNode::operator=(a1, a2);
  if (!v4)
  {
    __cxa_bad_cast();
  }

  v5 = v4;
  OZChanSceneNodeRef::operator=(a1 + 18904, v4 + 18904);
  OZChannelBase::operator=(a1 + 19320, v5 + 19320);
  OZChannelBase::operator=(a1 + 19472, v5 + 19472);
  OZChannelBase::operator=(a1 + 19064, v5 + 19064);
  OZChannelBase::operator=(a1 + 20032, v5 + 20032);
  OZChannelBase::operator=(a1 + 20440, v5 + 20440);
  OZChannelBase::operator=(a1 + 20184, v5 + 20184);
  OZChannelBase::operator=(a1 + 19624, v5 + 19624);
  OZChannelBase::operator=(a1 + 19880, v5 + 19880);

  return OZChannelBase::operator=(a1 + 20592, v5 + 20592);
}

uint64_t OZCloneGenerator::getTimeScale(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 19320;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 19320;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 19320;
  }

  if (v2 == 1)
  {
    return this + 19320;
  }

  return 0;
}

uint64_t OZCloneGenerator::getTimeReverse(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 19472;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 19472;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 19472;
  }

  if (v2 == 1)
  {
    return this + 19472;
  }

  return 0;
}

uint64_t OZCloneGenerator::getTimeRemap(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 19064;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 19064;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 19064;
  }

  if (v2 == 1)
  {
    return this + 19064;
  }

  return 0;
}

uint64_t OZCloneGenerator::getRetimeFrame(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 20032;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 20032;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 20032;
  }

  if (v2 == 1)
  {
    return this + 20032;
  }

  return 0;
}

uint64_t OZCloneGenerator::getRetimeFrameCache(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 20440;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 20440;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 20440;
  }

  if (v2 == 1)
  {
    return this + 20440;
  }

  return 0;
}

uint64_t OZCloneGenerator::getEndCondition(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 19624;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 19624;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 19624;
  }

  if (v2 == 1)
  {
    return this + 19624;
  }

  return 0;
}

uint64_t OZCloneGenerator::getLoopDuration(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 19880;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 19880;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 19880;
  }

  if (v2 == 1)
  {
    return this + 19880;
  }

  return 0;
}

uint64_t OZCloneGenerator::getDurationCache(OZCloneGenerator *this)
{
  if (!(*(*this + 272))(this))
  {
    return this + 20592;
  }

  if (!*((*(*this + 272))(this) + 1584))
  {
    return this + 20592;
  }

  v2 = *(*(*(this + 121) + 1584) + 320);
  if (!v2)
  {
    return this + 20592;
  }

  if (v2 == 1)
  {
    return this + 20592;
  }

  return 0;
}

uint64_t OZCloneGenerator::eval(OZCloneGenerator *this, OZRenderParams *a2)
{
  SourceNode = OZCloneGenerator::getSourceNode(this);
  if (!SourceNode)
  {
    return 0;
  }

  if (!v5)
  {
    return 0;
  }

  v6 = v5;
  TimeRemappedParams = OZCloneGenerator::getTimeRemappedParams(this, a2, v10);
  v8 = (*(*v6 + 96))(v6, v10, TimeRemappedParams);
  OZRenderParams::~OZRenderParams(v10);
  return v8;
}