uint64_t sub_29AB54120(uint64_t result, int a2)
{
  if (!a2)
  {
    if (*result == 32)
    {
      *(result + 12) = xmmword_29B6C2CD0;
      *(result + 28) = 0;
    }

    else if (*result == 16)
    {
      *(result + 12) = 0x3E000007C00;
      *(result + 20) = 31;
    }

    else
    {
      *(result + 12) = 0;
      *(result + 20) = 0;
    }
  }

  return result;
}

uint64_t sub_29AB54174(uint64_t a1, uint64_t a2)
{
  v4 = 0;
  v5 = (a1 + 56);
  v6 = (a1 + 57);
  v8 = *(a1 + 192);
  v7 = *(a1 + 200);
  while (1)
  {
    if (v8 >= v7)
    {
      v9 = *(a1 + 48);
      if (v9)
      {
        v10 = (*(a1 + 16))(*(a1 + 40), v5, *(a1 + 52));
        *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
        if (v10)
        {
          v7 = &v5[v10];
          v9 = *v5;
        }

        else
        {
          v9 = 0;
          *(a1 + 48) = 0;
          *(a1 + 56) = 0;
          v7 = v6;
        }

        *(a1 + 192) = v6;
        *(a1 + 200) = v7;
        v8 = v6;
      }
    }

    else
    {
      *(a1 + 192) = v8 + 1;
      v9 = *v8++;
    }

    if (v9 != *(a2 + v4))
    {
      break;
    }

    if (++v4 == 4)
    {
      return 1;
    }
  }

  return 0;
}

uint64_t sub_29AB54254(uint64_t result, _BYTE *a2)
{
  v3 = result;
  v4 = (result + 56);
  v5 = result + 57;
  while (1)
  {
LABEL_2:
    if (*(v3 + 16))
    {
      result = (*(v3 + 32))(*(v3 + 40));
      if (!result)
      {
        goto LABEL_6;
      }

      if (!*(v3 + 48))
      {
        break;
      }
    }

    if (*(v3 + 192) >= *(v3 + 200))
    {
      break;
    }

LABEL_6:
    v6 = *a2;
    if ((v6 - 9) >= 5 && v6 != 32)
    {
      break;
    }

    v7 = *(v3 + 192);
    if (v7 >= *(v3 + 200))
    {
      LODWORD(v7) = *(v3 + 48);
      if (v7)
      {
        result = (*(v3 + 16))(*(v3 + 40), v4, *(v3 + 52));
        *(v3 + 184) += *(v3 + 192) - *(v3 + 208);
        if (result)
        {
          v8 = &v4[result];
          LOBYTE(v7) = *v4;
        }

        else
        {
          LOBYTE(v7) = 0;
          *(v3 + 48) = 0;
          *(v3 + 56) = 0;
          v8 = v5;
        }

        *(v3 + 192) = v5;
        *(v3 + 200) = v8;
      }
    }

    else
    {
      *(v3 + 192) = v7 + 1;
      LOBYTE(v7) = *v7;
    }

    *a2 = v7;
  }

  if (!*(v3 + 16))
  {
    goto LABEL_16;
  }

  result = (*(v3 + 32))(*(v3 + 40));
  if (!result)
  {
LABEL_17:
    if (*a2 != 35)
    {
      return result;
    }

    while (1)
    {
      if (*(v3 + 16))
      {
        result = (*(v3 + 32))(*(v3 + 40));
        if (!result)
        {
          goto LABEL_22;
        }

        if (!*(v3 + 48))
        {
          goto LABEL_2;
        }
      }

      if (*(v3 + 192) >= *(v3 + 200))
      {
        goto LABEL_2;
      }

LABEL_22:
      v9 = *a2;
      if (v9 == 10 || v9 == 13)
      {
        goto LABEL_2;
      }

      v11 = *(v3 + 192);
      if (v11 >= *(v3 + 200))
      {
        LODWORD(v11) = *(v3 + 48);
        if (v11)
        {
          result = (*(v3 + 16))(*(v3 + 40), v4, *(v3 + 52));
          *(v3 + 184) += *(v3 + 192) - *(v3 + 208);
          if (result)
          {
            v12 = &v4[result];
            LOBYTE(v11) = *v4;
          }

          else
          {
            LOBYTE(v11) = 0;
            *(v3 + 48) = 0;
            *(v3 + 56) = 0;
            v12 = v5;
          }

          *(v3 + 192) = v5;
          *(v3 + 200) = v12;
        }
      }

      else
      {
        *(v3 + 192) = v11 + 1;
        LOBYTE(v11) = *v11;
      }

      *a2 = v11;
    }
  }

  if (*(v3 + 48))
  {
LABEL_16:
    if (*(v3 + 192) < *(v3 + 200))
    {
      goto LABEL_17;
    }
  }

  return result;
}

uint64_t sub_29AB5442C(uint64_t a1, _BYTE *a2)
{
  v4 = 0;
  v5 = (a1 + 56);
  v6 = (a1 + 57);
  do
  {
    if (*(a1 + 16))
    {
      if (!(*(a1 + 32))(*(a1 + 40)))
      {
        goto LABEL_6;
      }

      if (!*(a1 + 48))
      {
        return v4;
      }
    }

    if (*(a1 + 192) >= *(a1 + 200))
    {
      return v4;
    }

LABEL_6:
    v7 = *a2;
    if ((v7 - 58) < 0xFFFFFFF6)
    {
      return v4;
    }

    v8 = *(a1 + 192);
    if (v8 >= *(a1 + 200))
    {
      LODWORD(v8) = *(a1 + 48);
      if (v8)
      {
        v9 = (*(a1 + 16))(*(a1 + 40), v5, *(a1 + 52));
        *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
        if (v9)
        {
          v10 = &v5[v9];
          LOBYTE(v8) = *v5;
        }

        else
        {
          LOBYTE(v8) = 0;
          *(a1 + 48) = 0;
          *(a1 + 56) = 0;
          v10 = v6;
        }

        *(a1 + 192) = v6;
        *(a1 + 200) = v10;
      }
    }

    else
    {
      *(a1 + 192) = v8 + 1;
      LOBYTE(v8) = *v8;
    }

    v4 = (v7 + 10 * v4 - 48);
    *a2 = v8;
  }

  while (v4 <= 214748364 && (v4 != 214748364 || v8 < 56));
  v4 = 0;
  *off_2A1B71BE0() = "integer parse overflow";
  return v4;
}

__n128 sub_29AB54574(__n128 *a1)
{
  v2 = sub_29AB54820(a1, "#?RADIANCE\n");
  result = a1[13];
  a1[12] = result;
  if (!v2)
  {
    sub_29AB54820(a1, "#?RGBE\n");
    result = a1[13];
    a1[12] = result;
  }

  return result;
}

uint64_t sub_29AB545CC(uint64_t a1, uint64_t a2)
{
  v5 = *(a1 + 192);
  v4 = *(a1 + 200);
  if (v5 >= v4)
  {
    if (*(a1 + 48))
    {
      v7 = (a1 + 56);
      v8 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v8)
      {
        v4 = &v7[v8];
        v6 = *v7;
      }

      else
      {
        v6 = 0;
        *(a1 + 48) = 0;
        v4 = (a1 + 57);
        *(a1 + 56) = 0;
      }

      v5 = (a1 + 57);
      *(a1 + 192) = a1 + 57;
      *(a1 + 200) = v4;
    }

    else
    {
      v6 = 0;
    }
  }

  else
  {
    *(a1 + 192) = v5 + 1;
    v6 = *v5++;
  }

  v9 = 0;
  v10 = (a1 + 56);
  v11 = a1 + 57;
  while (1)
  {
    if (*(a1 + 16))
    {
      if (!(*(a1 + 32))(*(a1 + 40)))
      {
        goto LABEL_15;
      }

      if (!*(a1 + 48))
      {
        break;
      }

      v5 = *(a1 + 192);
      v4 = *(a1 + 200);
    }

    if (v5 >= v4)
    {
      break;
    }

LABEL_15:
    if (v6 == 10)
    {
      break;
    }

    *(a2 + v9) = v6;
    if (v9 == 1022)
    {
      v9 = 1023;
      while (1)
      {
        if (!*(a1 + 16))
        {
          goto LABEL_30;
        }

        if ((*(a1 + 32))(*(a1 + 40)))
        {
          break;
        }

        v13 = *(a1 + 192);
        v14 = *(a1 + 200);
LABEL_33:
        if (v13 >= v14)
        {
          v15 = *(a1 + 48);
          if (v15)
          {
            v16 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
            *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
            if (v16)
            {
              v17 = &v10[v16];
              v15 = *v10;
            }

            else
            {
              v15 = 0;
              *(a1 + 48) = 0;
              *(a1 + 56) = 0;
              v17 = (a1 + 57);
            }

            *(a1 + 192) = v11;
            *(a1 + 200) = v17;
          }
        }

        else
        {
          *(a1 + 192) = v13 + 1;
          v15 = *v13;
        }

        if (v15 == 10)
        {
          goto LABEL_41;
        }
      }

      if (!*(a1 + 48))
      {
        break;
      }

LABEL_30:
      v13 = *(a1 + 192);
      v14 = *(a1 + 200);
      if (v13 >= v14)
      {
        break;
      }

      goto LABEL_33;
    }

    v5 = *(a1 + 192);
    v4 = *(a1 + 200);
    if (v5 >= v4)
    {
      if (*(a1 + 48))
      {
        v12 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
        *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
        if (v12)
        {
          v4 = &v10[v12];
          v6 = *v10;
        }

        else
        {
          v6 = 0;
          *(a1 + 48) = 0;
          *(a1 + 56) = 0;
          v4 = (a1 + 57);
        }

        *(a1 + 192) = v11;
        *(a1 + 200) = v4;
        v5 = (a1 + 57);
      }

      else
      {
        v6 = 0;
      }
    }

    else
    {
      *(a1 + 192) = v5 + 1;
      v6 = *v5++;
    }

    ++v9;
  }

LABEL_41:
  *(a2 + v9) = 0;
  return a2;
}

uint64_t sub_29AB54820(uint64_t a1, _BYTE *a2)
{
  if (*a2)
  {
    v3 = (a1 + 56);
    v4 = a1 + 57;
    v6 = *(a1 + 192);
    v5 = *(a1 + 200);
    v7 = a2 + 1;
    while (1)
    {
      if (v6 >= v5)
      {
        v8 = *(a1 + 48);
        if (v8)
        {
          v9 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
          *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
          if (v9)
          {
            v5 = &v3[v9];
            v8 = *v3;
          }

          else
          {
            v8 = 0;
            *(a1 + 48) = 0;
            *(a1 + 56) = 0;
            v5 = (a1 + 57);
          }

          *(a1 + 192) = v4;
          *(a1 + 200) = v5;
          v6 = (a1 + 57);
        }
      }

      else
      {
        *(a1 + 192) = v6 + 1;
        v8 = *v6++;
      }

      if (v8 != *(v7 - 1))
      {
        return 0;
      }

      if (!*v7++)
      {
        goto LABEL_12;
      }
    }
  }

  else
  {
LABEL_12:
    *(a1 + 192) = *(a1 + 208);
    return 1;
  }
}

float *sub_29AB54900(uint64_t a1, signed int *a2, signed int *a3, _DWORD *a4)
{
  v137 = *MEMORY[0x29EDCA608];
  sub_29AB545CC(a1, v136);
  if ((*v136 != 0x4E41494441523F23 || *&v136[3] != 0x45434E41494441) && (*v136 != 1196572451 || *&v136[3] != 4538951))
  {
    v17 = (off_2A1B71BE0)(&off_2A1B71BE0, v8, v9, v10, v11, v12, v13, v14);
    v18 = 0;
    v19 = "not HDR";
LABEL_36:
    *v17 = v19;
    return v18;
  }

  sub_29AB545CC(a1, v136);
  if (!v136[0])
  {
    goto LABEL_34;
  }

  v27 = 0;
  do
  {
    if (!(*v136 ^ 0x333D54414D524F46 | *&v136[8] ^ 0x6C725F7469622D32 | *&v136[15] ^ 0x656267725F656CLL))
    {
      v27 = 1;
    }

    sub_29AB545CC(a1, v136);
  }

  while (v136[0]);
  if (!v27)
  {
LABEL_34:
    v17 = (off_2A1B71BE0)(&off_2A1B71BE0, v20, v21, v22, v23, v24, v25, v26);
    v18 = 0;
    v19 = "unsupported format";
    goto LABEL_36;
  }

  sub_29AB545CC(a1, v136);
  if (*v136 != 22829 || v136[2] != 32)
  {
    goto LABEL_35;
  }

  __endptr = &v136[3];
  v36 = strtol(&v136[3], &__endptr, 10);
  v37 = __endptr + 2;
  do
  {
    v38 = *(v37 - 2);
    ++v37;
  }

  while (v38 == 32);
  if (v38 != 43 || *(v37 - 2) != 88 || *(v37 - 1) != 32)
  {
LABEL_35:
    v17 = (off_2A1B71BE0)(&off_2A1B71BE0, v28, v29, v30, v31, v32, v33, v34);
    v18 = 0;
    v19 = "unsupported data layout";
    goto LABEL_36;
  }

  __endptr = v37;
  v39 = strtol(v37, 0, 10);
  if (v36 >= 16777217)
  {
    goto LABEL_38;
  }

  v47 = v39;
  if (v39 >= 16777217)
  {
    goto LABEL_38;
  }

  *a2 = v39;
  *a3 = v36;
  if (a4)
  {
    *a4 = 3;
  }

  if (!sub_29AB5ABFC(v39, v36, 3u, 4u))
  {
LABEL_38:
    v17 = (off_2A1B71BE0)(&off_2A1B71BE0, v40, v41, v42, v43, v44, v45, v46);
    v18 = 0;
    v19 = "too large";
    goto LABEL_36;
  }

  v48 = sub_29AB5AC68(v47, v36, 3u, 4u);
  v18 = v48;
  if (!v48)
  {
    v17 = (off_2A1B71BE0)(&off_2A1B71BE0, v49, v50, v51, v52, v53, v54, v55);
LABEL_40:
    v19 = "outofmem";
    goto LABEL_36;
  }

  if ((v47 - 0x8000) >= 0xFFFF8008)
  {
    if (v36 < 1)
    {
      return v18;
    }

    v58 = 0;
    v130 = v48;
    v59 = (a1 + 56);
    v60 = a1 + 57;
    v129 = 0;
    v128 = 12 * v47;
    while (1)
    {
      v61 = sub_29AB4FE84(a1);
      v62 = sub_29AB4FE84(a1);
      v63 = sub_29AB4FE84(a1);
      if (v61 != 2 || v62 != 2 || v63 < 0)
      {
        v100 = sub_29AB4FE84(a1);
        if (v100)
        {
          v101 = ldexpf(1.0, v100 - 136);
          v102 = v101 * v61;
          v103 = v101 * v62;
          v104 = v101 * v63;
        }

        else
        {
          v103 = 0.0;
          v102 = 0.0;
          v104 = 0.0;
        }

        *v18 = v102;
        v18[1] = v103;
        v18[2] = v104;
        free(v58);
        i = 0;
        v112 = 1;
        goto LABEL_103;
      }

      if ((sub_29AB4FE84(a1) | (v63 << 8)) != v47)
      {
        free(v18);
        free(v58);
        v17 = off_2A1B71BE0(&off_2A1B71BE0, v105, v106, v107, v108, v109, v110, v111, v128);
        v18 = 0;
        v19 = "invalid decoded scanline length";
        goto LABEL_36;
      }

      if (!v58)
      {
        v58 = malloc(4 * (v47 & 0x3FFFFFFF));
        if (!v58)
        {
          break;
        }
      }

      v131 = v58;
      v132 = 0;
      v64 = v58;
      while (2)
      {
        v65 = 0;
        v66 = v47;
        do
        {
          v68 = *(a1 + 192);
          v67 = *(a1 + 200);
          if (v68 >= v67)
          {
            if (!*(a1 + 48))
            {
              goto LABEL_94;
            }

            v71 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
            *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
            if (v71)
            {
              v67 = &v59[v71];
              v70 = *v59;
            }

            else
            {
              v70 = 0;
              *(a1 + 48) = 0;
              *(a1 + 56) = 0;
              v67 = (a1 + 57);
            }

            *(a1 + 192) = v60;
            *(a1 + 200) = v67;
            v69 = (a1 + 57);
          }

          else
          {
            v69 = v68 + 1;
            *(a1 + 192) = v68 + 1;
            v70 = *v68;
          }

          if (v70 < 0x81)
          {
            if (v70)
            {
              v73 = v66 >= v70;
            }

            else
            {
              v73 = 0;
            }

            if (!v73)
            {
              goto LABEL_94;
            }

            v74 = &v64[4 * v65];
            v65 += v70;
            do
            {
              v75 = *(a1 + 192);
              if (v75 >= *(a1 + 200))
              {
                LODWORD(v75) = *(a1 + 48);
                if (v75)
                {
                  v76 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
                  *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
                  if (v76)
                  {
                    v77 = &v59[v76];
                    LOBYTE(v75) = *v59;
                  }

                  else
                  {
                    LOBYTE(v75) = 0;
                    *(a1 + 48) = 0;
                    *(a1 + 56) = 0;
                    v77 = (a1 + 57);
                  }

                  *(a1 + 192) = v60;
                  *(a1 + 200) = v77;
                }
              }

              else
              {
                *(a1 + 192) = v75 + 1;
                LOBYTE(v75) = *v75;
              }

              *v74 = v75;
              v74 += 4;
              --v70;
            }

            while (v70);
          }

          else
          {
            if (v69 >= v67)
            {
              v72 = *(a1 + 48);
              if (v72)
              {
                v78 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
                *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
                if (v78)
                {
                  v79 = &v59[v78];
                  LOBYTE(v72) = *v59;
                }

                else
                {
                  LOBYTE(v72) = 0;
                  *(a1 + 48) = 0;
                  *(a1 + 56) = 0;
                  v79 = (a1 + 57);
                }

                *(a1 + 192) = v60;
                *(a1 + 200) = v79;
              }
            }

            else
            {
              *(a1 + 192) = v69 + 1;
              LOBYTE(v72) = *v69;
            }

            v80 = v70 & 0x7F;
            if (v66 < v80)
            {
LABEL_94:
              free(v18);
              free(v131);
              v17 = off_2A1B71BE0(&off_2A1B71BE0, v93, v94, v95, v96, v97, v98, v99, v128);
              v18 = 0;
              v19 = "corrupt";
              goto LABEL_36;
            }

            if ((v70 & 0x7F) != 0)
            {
              v81 = 4 * v65;
              v65 += v80;
              do
              {
                v64[v81] = v72;
                v81 += 4;
                --v80;
              }

              while (v80);
            }
          }

          v66 = v47 - v65;
        }

        while (v47 > v65);
        ++v64;
        if (++v132 != 4)
        {
          continue;
        }

        break;
      }

      v82 = (v131 + 3);
      v83 = v47;
      v84 = v130;
      v85 = (v131 + 3);
      do
      {
        v87 = *v85;
        v85 += 4;
        v86 = v87;
        if (v87)
        {
          v88 = ldexpf(1.0, v86 - 136);
          LOBYTE(v89) = *(v82 - 3);
          *&v90 = v88 * v89;
          *v84 = *&v90;
          LOBYTE(v90) = *(v82 - 2);
          *&v91 = v88 * v90;
          v84[1] = *&v91;
          LOBYTE(v91) = *(v82 - 1);
          v92 = v88 * v91;
        }

        else
        {
          *v84 = 0;
          v92 = 0.0;
        }

        v84[2] = v92;
        v84 += 3;
        v82 = v85;
        --v83;
      }

      while (v83);
      ++v129;
      v130 = (v130 + v128);
      v58 = v131;
      if (v129 == (v36 & 0x7FFFFFFF))
      {
        free(v131);
        return v18;
      }
    }

    free(v18);
    v17 = off_2A1B71BE0(&off_2A1B71BE0, v113, v114, v115, v116, v117, v118, v119, v128);
    v18 = 0;
    goto LABEL_40;
  }

  for (i = 0; ; ++i)
  {
    v112 = 0;
    if (i >= v36)
    {
      break;
    }

    while (v112 < v47)
    {
LABEL_103:
      sub_29AB524E4(a1, __dst, 4);
      v120 = &v18[3 * v47 * i + 3 * v112];
      v121 = 0.0;
      v122 = 0.0;
      v123 = 0.0;
      if (v134)
      {
        v124 = ldexpf(1.0, v134 - 136);
        LOBYTE(v125) = __dst[0];
        v122 = v124 * v125;
        LOBYTE(v126) = __dst[1];
        v121 = v124 * v126;
        LOBYTE(v127) = __dst[2];
        v123 = v124 * v127;
      }

      *v120 = v122;
      v120[1] = v121;
      ++v112;
      v120[2] = v123;
    }
  }

  return v18;
}

char *sub_29AB55098(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v3 = MEMORY[0x2A1C7C4A8](a1, a2, a3);
  v5 = v4;
  v7 = v6;
  v9 = v8;
  v10 = v3;
  v1042 = *MEMORY[0x29EDCA608];
  v1016 = 0;
  v1015 = 8;
  v11 = sub_29AB523AC(v3);
  v13 = *(v10 + 208);
  v14 = *(v10 + 216);
  *(v10 + 192) = v13;
  *(v10 + 200) = v14;
  if (v11)
  {
    *&v1020 = v10;
    v1024[0] = 0;
    if (!sub_29AB503E8(&v1020, 0, v12))
    {
      v25 = 0;
      v26 = v1022;
LABEL_11:
      free(v26);
      free(v1021);
      v28 = *(&v1020 + 1);
LABEL_12:
      free(v28);
      goto LABEL_13;
    }

    v22 = v1023;
    if (v1023 < 9)
    {
      v22 = 8;
      goto LABEL_9;
    }

    if (v1023 == 16)
    {
LABEL_9:
      LODWORD(v1015) = v22;
      v25 = v1022;
      v27 = v1020;
      *v9 = *v1020;
      *v7 = *(v27 + 4);
      v26 = 0;
      if (v5)
      {
        *v5 = *(v27 + 8);
      }

      goto LABEL_11;
    }

    v44 = (off_2A1B71BE0)(&off_2A1B71BE0, v15, v16, v17, v18, v19, v20, v21);
    v25 = 0;
    v45 = "bad bits_per_channel";
LABEL_49:
    *v44 = v45;
    goto LABEL_13;
  }

  if (v13 >= v14)
  {
    if (!*(v10 + 48))
    {
      goto LABEL_50;
    }

    v42 = (v10 + 56);
    v43 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
    v13 = *(v10 + 208);
    *(v10 + 184) += *(v10 + 192) - v13;
    if (v43)
    {
      v14 = &v42[v43];
      v24 = *v42;
    }

    else
    {
      v24 = 0;
      *(v10 + 48) = 0;
      v14 = (v10 + 57);
      *(v10 + 56) = 0;
    }

    v23 = (v10 + 57);
    *(v10 + 192) = v10 + 57;
    *(v10 + 200) = v14;
  }

  else
  {
    v23 = v13 + 1;
    *(v10 + 192) = v13 + 1;
    v24 = *v13;
  }

  if (v24 != 66)
  {
    goto LABEL_50;
  }

  if (v23 < v14)
  {
    *(v10 + 192) = v23 + 1;
    v47 = *v23;
    goto LABEL_37;
  }

  if (!*(v10 + 48))
  {
LABEL_50:
    v68 = *(v10 + 216);
    *(v10 + 192) = v13;
    *(v10 + 200) = v68;
    goto LABEL_51;
  }

  v48 = (v10 + 56);
  v49 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
  v13 = *(v10 + 208);
  *(v10 + 184) += *(v10 + 192) - v13;
  if (v49)
  {
    v50 = &v48[v49];
    v47 = *v48;
  }

  else
  {
    v47 = 0;
    *(v10 + 48) = 0;
    v50 = (v10 + 57);
    *(v10 + 56) = 0;
  }

  *(v10 + 192) = v10 + 57;
  *(v10 + 200) = v50;
LABEL_37:
  if (v47 != 77)
  {
    goto LABEL_50;
  }

  sub_29AB538DC(v10);
  sub_29AB538DC(v10);
  sub_29AB538DC(v10);
  sub_29AB538DC(v10);
  sub_29AB538DC(v10);
  sub_29AB538DC(v10);
  v51 = sub_29AB538DC(v10);
  v58 = v51 | (sub_29AB538DC(v10) << 16);
  if (v58 <= 0x38 && ((1 << v58) & 0x100010000001000) != 0 || v58 == 108)
  {
    *(v10 + 192) = *(v10 + 208);
    goto LABEL_42;
  }

  v13 = *(v10 + 208);
  v68 = *(v10 + 216);
  *(v10 + 192) = v13;
  *(v10 + 200) = v68;
  if (v58 == 124)
  {
LABEL_42:
    HIDWORD(v1018) = 255;
    if (!sub_29AB53BD8(v10, &v1017, v52, v53, v54, v55, v56, v57))
    {
      v25 = 0;
      goto LABEL_13;
    }

    v66 = *(v10 + 4);
    if (v66 >= 0)
    {
      v67 = *(v10 + 4);
    }

    else
    {
      v67 = -v66;
    }

    *(v10 + 4) = v67;
    if (v67 >= 0x1000001 || *v10 >= 0x1000001u)
    {
      v44 = (off_2A1B71BE0)(&off_2A1B71BE0, v59, v60, v61, v62, v63, v64, v65);
      v25 = 0;
      v45 = "too large";
      goto LABEL_49;
    }

    v1004 = v7;
    v978 = HIDWORD(v1017);
    v81 = v1018;
    v82 = DWORD2(v1018);
    v83 = HIDWORD(v1018);
    v84 = DWORD2(v1017);
    v984 = DWORD2(v1018);
    v1001 = v1017;
    if (DWORD2(v1017) == 12)
    {
      if (v1017 > 23)
      {
        goto LABEL_102;
      }

      v85 = DWORD1(v1017);
      v86 = (DWORD1(v1017) - v1019 - 24) / 3;
    }

    else
    {
      if (v1017 > 15)
      {
        goto LABEL_102;
      }

      v85 = DWORD1(v1017);
      v86 = (DWORD1(v1017) - (DWORD2(v1017) + v1019)) >> 2;
    }

    if (v86)
    {
      v959 = v85;
      v996 = v9;
      LOBYTE(v91) = 0;
      v92 = DWORD2(v1018) == -16777216;
      goto LABEL_90;
    }

LABEL_102:
    v122 = *(v10 + 184) + *(v10 + 192) - *(v10 + 208);
    if ((v122 - 1025) <= 0xFFFFFBFF)
    {
      v25 = 0;
      *(off_2A1B71BE0)(&off_2A1B71BE0, v59, v60, v61, v62, v63, v64, v65) = "bad header";
      goto LABEL_13;
    }

    v123 = (DWORD1(v1017) - v122);
    if (SDWORD1(v1017) < v122 || v123 >= 1025)
    {
      v44 = (off_2A1B71BE0)(&off_2A1B71BE0, v123, v60, v61, v62, v63, v64, v65);
      v25 = 0;
      v45 = "bad offset";
      goto LABEL_49;
    }

    v959 = DWORD1(v1017);
    sub_29AB50224(v10, v123);
    v82 = v984;
    v86 = 0;
    v92 = v984 == -16777216;
    v91 = 1;
    v996 = v9;
    if (v1001 == 24 && v984 == -16777216)
    {
      LODWORD(v921) = v66;
      v94 = 3;
      v1001 = 24;
      v93 = 1;
      goto LABEL_94;
    }

LABEL_90:
    LODWORD(v921) = v66;
    v93 = v91;
    if (v82)
    {
      v94 = 4;
    }

    else
    {
      v94 = 3;
    }

    v91 = v92;
LABEL_94:
    *(v10 + 8) = v94;
    v95 = *v10;
    v96 = *(v10 + 4);
    if (!sub_29AB50270(v94, *v10, v96, 0))
    {
      v120 = off_2A1B71BE0(&off_2A1B71BE0, v97, v98, v99, v100, v101, v102, v103, v921);
      v25 = 0;
      v121 = "too large";
      goto LABEL_828;
    }

    v1009 = v94;
    v104 = sub_29AB5037C(v94, v95, v96, 0);
    v25 = v104;
    if (!v104)
    {
      v120 = off_2A1B71BE0(&off_2A1B71BE0, v105, v106, v107, v108, v109, v110, v111, v921);
      v121 = "outofmem";
      goto LABEL_828;
    }

    if (v1001 <= 15)
    {
      if (v86 > 256)
      {
        v112 = 1;
      }

      else
      {
        v112 = v93;
      }

      if (v112)
      {
        free(v104);
        v120 = off_2A1B71BE0(&off_2A1B71BE0, v113, v114, v115, v116, v117, v118, v119, v921);
        v25 = 0;
        v121 = "invalid";
LABEL_828:
        *v120 = v121;
LABEL_829:
        v7 = v1004;
        goto LABEL_830;
      }

      v994 = v5;
      if (v86 < 1)
      {
LABEL_892:
        if (v84 == 12)
        {
          v624 = -3;
        }

        else
        {
          v624 = -4;
        }

        sub_29AB50224(v10, v959 + v86 * v624 - (v84 + v1019));
        if (v1001 == 1)
        {
          v648 = *(v10 + 4);
          if (v648 >= 1)
          {
            v740 = 0;
            v741 = 0;
            v1003 = -((*v10 + 7) >> 3);
            v742 = (v10 + 56);
            v743 = v10 + 57;
            do
            {
              v745 = *(v10 + 192);
              v744 = *(v10 + 200);
              v746 = v1009;
              if (v745 >= v744)
              {
                v747 = *(v10 + 48);
                if (v747)
                {
                  v748 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                  if (v748)
                  {
                    v744 = &v742[v748];
                    v747 = *v742;
                  }

                  else
                  {
                    v747 = 0;
                    *(v10 + 48) = 0;
                    *(v10 + 56) = 0;
                    v744 = (v10 + 57);
                  }

                  v746 = v1009;
                  *(v10 + 192) = v743;
                  *(v10 + 200) = v744;
                  v745 = (v10 + 57);
                }
              }

              else
              {
                *(v10 + 192) = v745 + 1;
                v747 = *v745++;
              }

              v749 = *v10;
              if (*v10 >= 1)
              {
                v750 = 0;
                v751 = 7;
                do
                {
                  v752 = &v1020 + 4 * ((v747 >> v751) & 1);
                  v753 = &v25[v740];
                  *v753 = *v752;
                  *(v753 + 1) = *(v752 + 1);
                  v754 = v740 + 3;
                  if (v746 == 4)
                  {
                    v25[v754] = -1;
                    LODWORD(v754) = v740 + 4;
                  }

                  v740 = v754;
                  if (++v750 == v749)
                  {
                    break;
                  }

                  if (v751 <= 0)
                  {
                    if (v745 >= v744)
                    {
                      v747 = *(v10 + 48);
                      if (v747)
                      {
                        v755 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                        *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                        if (v755)
                        {
                          v744 = &v742[v755];
                          v747 = *v742;
                        }

                        else
                        {
                          v747 = 0;
                          *(v10 + 48) = 0;
                          *(v10 + 56) = 0;
                          v744 = (v10 + 57);
                        }

                        v746 = v1009;
                        *(v10 + 192) = v743;
                        *(v10 + 200) = v744;
                        v751 = 7;
                        v745 = (v10 + 57);
                        v749 = *v10;
                      }

                      else
                      {
                        v751 = 7;
                      }
                    }

                    else
                    {
                      *(v10 + 192) = v745 + 1;
                      v747 = *v745;
                      v751 = 7;
                      ++v745;
                    }
                  }

                  else
                  {
                    --v751;
                  }
                }

                while (v750 < v749);
              }

              sub_29AB50224(v10, v1003 & 3);
              ++v741;
              v648 = *(v10 + 4);
            }

            while (v741 < v648);
          }
        }

        else
        {
          if (v1001 == 8)
          {
            v625 = *v10;
          }

          else
          {
            if (v1001 != 4)
            {
              free(v25);
              v25 = 0;
              *off_2A1B71BE0(&off_2A1B71BE0, v776, v777, v778, v779, v780, v781, v782, v921) = "bad bpp";
              v5 = v994;
              goto LABEL_829;
            }

            v625 = (*v10 + 1) >> 1;
          }

          v648 = *(v10 + 4);
          if (v648 >= 1)
          {
            v720 = 0;
            v721 = 0;
            v981 = -v625;
            v722 = (v10 + 56);
            v723 = v10 + 57;
            do
            {
              v987 = v721;
              if (*v10 < 1)
              {
                v739 = v720;
              }

              else
              {
                v724 = 0;
                v726 = *(v10 + 192);
                v725 = *(v10 + 200);
                v727 = v1009;
                while (1)
                {
                  if (v726 >= v725)
                  {
                    v728 = *(v10 + 48);
                    v729 = v1001;
                    if (v728)
                    {
                      v730 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                      if (v730)
                      {
                        v725 = &v722[v730];
                        v728 = *v722;
                      }

                      else
                      {
                        v728 = 0;
                        *(v10 + 48) = 0;
                        *(v10 + 56) = 0;
                        v725 = (v10 + 57);
                      }

                      v727 = v1009;
                      *(v10 + 192) = v723;
                      *(v10 + 200) = v725;
                      v726 = (v10 + 57);
                    }
                  }

                  else
                  {
                    *(v10 + 192) = v726 + 1;
                    v728 = *v726++;
                    v729 = v1001;
                  }

                  v731 = v728 >> 4;
                  if (v729 == 4)
                  {
                    v732 = v728 & 0xF;
                  }

                  else
                  {
                    v731 = v728;
                    v732 = 0;
                  }

                  v733 = &v1020 + 4 * v731;
                  v734 = &v25[v720];
                  *v734 = *v733;
                  *(v734 + 1) = *(v733 + 1);
                  v735 = v720 + 3;
                  if (v727 == 4)
                  {
                    v735 = (v720 + 4);
                    v25[v720 + 3] = -1;
                  }

                  if (v724 + 1 == *v10)
                  {
                    break;
                  }

                  if (v729 == 8)
                  {
                    if (v726 >= v725)
                    {
                      v732 = *(v10 + 48);
                      if (v732)
                      {
                        v736 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                        *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                        if (v736)
                        {
                          v725 = &v722[v736];
                          v732 = *v722;
                        }

                        else
                        {
                          v732 = 0;
                          *(v10 + 48) = 0;
                          *(v10 + 56) = 0;
                          v725 = (v10 + 57);
                        }

                        v727 = v1009;
                        *(v10 + 192) = v723;
                        *(v10 + 200) = v725;
                        v726 = (v10 + 57);
                      }
                    }

                    else
                    {
                      *(v10 + 192) = v726 + 1;
                      v732 = *v726++;
                    }
                  }

                  v737 = &v1020 + 4 * v732;
                  v738 = &v25[v735];
                  *v738 = *v737;
                  *(v738 + 1) = *(v737 + 1);
                  v739 = v735 + 3;
                  if (v727 == 4)
                  {
                    v25[v739] = -1;
                    v739 = (v735 + 4);
                  }

                  v724 += 2;
                  LODWORD(v720) = v739;
                  if (v724 >= *v10)
                  {
                    goto LABEL_1103;
                  }
                }

                v739 = v735;
              }

LABEL_1103:
              sub_29AB50224(v10, v981 & 3);
              v721 = v987 + 1;
              v648 = *(v10 + 4);
              v720 = v739;
            }

            while (v987 + 1 < v648);
          }
        }

        v5 = v994;
        v9 = v996;
        v7 = v1004;
        v599 = v1009;
        goto LABEL_1132;
      }

      v611 = (v10 + 56);
      v612 = v10 + 57;
      v613 = v86;
      v615 = *(v10 + 192);
      v614 = *(v10 + 200);
      v616 = &v1020 + 3;
      while (1)
      {
        if (v615 >= v614)
        {
          v617 = *(v10 + 48);
          if (v617)
          {
            v618 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
            *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
            if (v618)
            {
              v614 = &v611[v618];
              LOBYTE(v617) = *v611;
            }

            else
            {
              LOBYTE(v617) = 0;
              *(v10 + 48) = 0;
              *(v10 + 56) = 0;
              v614 = (v10 + 57);
            }

            *(v10 + 192) = v612;
            *(v10 + 200) = v614;
            v615 = (v10 + 57);
          }
        }

        else
        {
          *(v10 + 192) = v615 + 1;
          LOBYTE(v617) = *v615++;
        }

        *(v616 - 1) = v617;
        if (v615 >= v614)
        {
          v619 = *(v10 + 48);
          if (v619)
          {
            v620 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
            *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
            if (v620)
            {
              v614 = &v611[v620];
              LOBYTE(v619) = *v611;
            }

            else
            {
              LOBYTE(v619) = 0;
              *(v10 + 48) = 0;
              *(v10 + 56) = 0;
              v614 = (v10 + 57);
            }

            *(v10 + 192) = v612;
            *(v10 + 200) = v614;
            v615 = (v10 + 57);
          }
        }

        else
        {
          *(v10 + 192) = v615 + 1;
          LOBYTE(v619) = *v615++;
        }

        *(v616 - 2) = v619;
        if (v615 >= v614)
        {
          v621 = *(v10 + 48);
          if (v621)
          {
            v622 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
            *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
            if (v622)
            {
              v614 = &v611[v622];
              LOBYTE(v621) = *v611;
            }

            else
            {
              LOBYTE(v621) = 0;
              *(v10 + 48) = 0;
              *(v10 + 56) = 0;
              v614 = (v10 + 57);
            }

            *(v10 + 192) = v612;
            *(v10 + 200) = v614;
            v615 = (v10 + 57);
          }
        }

        else
        {
          *(v10 + 192) = v615 + 1;
          LOBYTE(v621) = *v615++;
        }

        *(v616 - 3) = v621;
        if (v84 == 12)
        {
          goto LABEL_891;
        }

        if (v615 < v614)
        {
          break;
        }

        if (*(v10 + 48))
        {
          v623 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
          *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
          if (v623)
          {
            v614 = &v611[v623];
          }

          else
          {
            *(v10 + 48) = 0;
            *(v10 + 56) = 0;
            v614 = (v10 + 57);
          }

          *(v10 + 200) = v614;
          v615 = (v10 + 57);
          goto LABEL_890;
        }

LABEL_891:
        *v616 = -1;
        v616 += 4;
        if (!--v613)
        {
          goto LABEL_892;
        }
      }

      ++v615;
LABEL_890:
      *(v10 + 192) = v615;
      goto LABEL_891;
    }

    sub_29AB50224(v10, v959 - (v84 + v1019));
    if (v1001 == 16)
    {
      v922 = 2 * (*v10 & 1);
      v7 = v1004;
      v9 = v996;
    }

    else
    {
      v7 = v1004;
      v9 = v996;
      v599 = v1009;
      if (v1001 == 32)
      {
        v643 = HIDWORD(v81) == 255 && v81 == 65280 && v978 == 16711680;
        if (v643 & v91)
        {
          HIDWORD(v921) = 0;
          v922 = 0;
          v946 = 0;
          v951 = 0;
          v941 = 0;
          v938 = 0;
          v924 = 0;
          v964 = 0;
          v956 = 0;
          v936 = 1;
          goto LABEL_946;
        }
      }

      else if (v1001 == 24)
      {
        v936 = 0;
        v946 = 0;
        v951 = 0;
        v941 = 0;
        v938 = 0;
        v924 = 0;
        v964 = 0;
        v956 = 0;
        HIDWORD(v921) = 0;
        v922 = *v10 & 3;
LABEL_946:
        v648 = *(v10 + 4);
        if (v648 < 1)
        {
LABEL_1132:
          if (v599 == 4 && !v83)
          {
            v756 = 4 * v648 * *v10;
            if (v756 - 1 >= 0)
            {
              v757 = 0;
              v758 = (((v756 - 1) >> 2) + 16) & 0x3FFFFFF0;
              v759 = vdupq_n_s64((v756 - 1) >> 2);
              v760 = &v25[v756 - 4 - 25];
              do
              {
                v761 = vdupq_n_s64(v757);
                v762 = vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B430070)));
                if (vuzp1_s8(vuzp1_s16(v762, *v759.i8), *v759.i8).u8[0])
                {
                  v760[28] = -1;
                }

                if (vuzp1_s8(vuzp1_s16(v762, *&v759), *&v759).i8[1])
                {
                  v760[24] = -1;
                }

                if (vuzp1_s8(vuzp1_s16(*&v759, vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B433E10)))), *&v759).i8[2])
                {
                  v760[20] = -1;
                  v760[16] = -1;
                }

                v763 = vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B433E00)));
                if (vuzp1_s8(*&v759, vuzp1_s16(v763, *&v759)).i32[1])
                {
                  v760[12] = -1;
                }

                if (vuzp1_s8(*&v759, vuzp1_s16(v763, *&v759)).i8[5])
                {
                  v760[8] = -1;
                }

                if (vuzp1_s8(*&v759, vuzp1_s16(*&v759, vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B433DF0))))).i8[6])
                {
                  v760[4] = -1;
                  *v760 = -1;
                }

                v764 = vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B4BE240)));
                if (vuzp1_s8(vuzp1_s16(v764, *v759.i8), *v759.i8).u8[0])
                {
                  *(v760 - 4) = -1;
                }

                if (vuzp1_s8(vuzp1_s16(v764, *&v759), *&v759).i8[1])
                {
                  *(v760 - 8) = -1;
                }

                if (vuzp1_s8(vuzp1_s16(*&v759, vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B4BE230)))), *&v759).i8[2])
                {
                  *(v760 - 12) = -1;
                  *(v760 - 16) = -1;
                }

                v765 = vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B4BE220)));
                if (vuzp1_s8(*&v759, vuzp1_s16(v765, *&v759)).i32[1])
                {
                  *(v760 - 20) = -1;
                }

                if (vuzp1_s8(*&v759, vuzp1_s16(v765, *&v759)).i8[5])
                {
                  *(v760 - 24) = -1;
                }

                if (vuzp1_s8(*&v759, vuzp1_s16(*&v759, vmovn_s64(vcgeq_u64(v759, vorrq_s8(v761, xmmword_29B4BE210))))).i8[6])
                {
                  *(v760 - 28) = -1;
                  *(v760 - 32) = -1;
                }

                v757 += 16;
                v760 -= 64;
              }

              while (v758 != v757);
            }
          }

          if (v921 <= 0)
          {
            v767 = *v10;
          }

          else
          {
            v766 = (v648 >> 1);
            v767 = *v10;
            if (v766 >= 1)
            {
              v768 = 0;
              v769 = 0;
              v770 = v767 * v599;
              v771 = v770 * (v648 - 1);
              do
              {
                if (v770 >= 1)
                {
                  v772 = &v25[v771];
                  v773 = v770;
                  v774 = &v25[v768];
                  do
                  {
                    v775 = *v774;
                    *v774++ = *v772;
                    *v772++ = v775;
                    --v773;
                  }

                  while (v773);
                }

                ++v769;
                v771 -= v770;
                v768 += v770;
              }

              while (v769 != v766);
            }
          }

          *v9 = v767;
          *v7 = *(v10 + 4);
          if (v5)
          {
            *v5 = *(v10 + 8);
          }

          goto LABEL_13;
        }

        v1000 = v9;
        v649 = 0;
        v650 = 0;
        v651 = (v10 + 56);
        v652 = v10 + 57;
        v995 = v5;
        while (1)
        {
          v653 = *v10;
          v923 = v650;
          if ((v921 & 0x100000000) != 0)
          {
            if (v653 >= 1)
            {
              v654 = 0;
              v655 = v649;
              do
              {
                v656 = sub_29AB538DC(v10);
                if (v1001 != 16)
                {
                  v656 |= sub_29AB538DC(v10) << 16;
                }

                v657 = (v656 & v978) >> v946;
                if (v946 < 0)
                {
                  v657 = (v656 & v978) << -v946;
                }

                v658 = &v25[v655];
                *v658 = ((v657 >> (8 - v951)) * dword_29B6C3BAC[v951]) >> dword_29B6C3BD0[v951];
                v659 = (v656 & v81) >> v941;
                if (v941 < 0)
                {
                  v659 = (v656 & v81) << -v941;
                }

                v658[1] = (dword_29B6C3BAC[v964] * (v659 >> (8 - v964))) >> dword_29B6C3BD0[v964];
                v660 = (v656 & HIDWORD(v81)) >> v938;
                if (v938 < 0)
                {
                  v660 = (v656 & HIDWORD(v81)) << -v938;
                }

                v658[2] = (dword_29B6C3BAC[v956] * (v660 >> (8 - v956))) >> dword_29B6C3BD0[v956];
                if (v984)
                {
                  v661 = (v656 & v984) >> v924;
                  if (v924 < 0)
                  {
                    v661 = (v656 & v984) << -v924;
                  }

                  v662 = (dword_29B6C3BAC[HIDWORD(v924)] * (v661 >> (8 - BYTE4(v924)))) >> dword_29B6C3BD0[HIDWORD(v924)];
                }

                else
                {
                  v662 = 255;
                }

                v663 = v655 + 3;
                if (v1009 == 4)
                {
                  v25[v663] = v662;
                  v663 = (v655 + 4);
                }

                v83 |= v662;
                ++v654;
                v655 = v663;
              }

              while (v654 < *v10);
              goto LABEL_1005;
            }
          }

          else if (v653 >= 1)
          {
            v664 = 0;
            v666 = *(v10 + 192);
            v665 = *(v10 + 200);
            do
            {
              if (v666 >= v665)
              {
                v667 = *(v10 + 48);
                if (v667)
                {
                  v668 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                  if (v668)
                  {
                    v665 = &v651[v668];
                    LOBYTE(v667) = *v651;
                  }

                  else
                  {
                    LOBYTE(v667) = 0;
                    *(v10 + 48) = 0;
                    *(v10 + 56) = 0;
                    v665 = (v10 + 57);
                  }

                  *(v10 + 192) = v652;
                  *(v10 + 200) = v665;
                  v666 = (v10 + 57);
                  v599 = v1009;
                }
              }

              else
              {
                *(v10 + 192) = v666 + 1;
                LOBYTE(v667) = *v666++;
              }

              v669 = &v25[v649];
              v669[2] = v667;
              if (v666 >= v665)
              {
                v670 = *(v10 + 48);
                if (v670)
                {
                  v671 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                  if (v671)
                  {
                    v665 = &v651[v671];
                    LOBYTE(v670) = *v651;
                  }

                  else
                  {
                    LOBYTE(v670) = 0;
                    *(v10 + 48) = 0;
                    *(v10 + 56) = 0;
                    v665 = (v10 + 57);
                  }

                  v599 = v1009;
                  *(v10 + 192) = v652;
                  *(v10 + 200) = v665;
                  v666 = (v10 + 57);
                }
              }

              else
              {
                *(v10 + 192) = v666 + 1;
                LOBYTE(v670) = *v666++;
              }

              v669[1] = v670;
              if (v666 >= v665)
              {
                v672 = *(v10 + 48);
                if (v672)
                {
                  v673 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                  if (v673)
                  {
                    v665 = &v651[v673];
                    LOBYTE(v672) = *v651;
                  }

                  else
                  {
                    LOBYTE(v672) = 0;
                    *(v10 + 48) = 0;
                    *(v10 + 56) = 0;
                    v665 = (v10 + 57);
                  }

                  v599 = v1009;
                  *(v10 + 192) = v652;
                  *(v10 + 200) = v665;
                  v666 = (v10 + 57);
                }
              }

              else
              {
                *(v10 + 192) = v666 + 1;
                LOBYTE(v672) = *v666++;
              }

              *v669 = v672;
              if (v936)
              {
                if (v666 >= v665)
                {
                  v674 = *(v10 + 48);
                  if (v674)
                  {
                    v675 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                    *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                    if (v675)
                    {
                      v665 = &v651[v675];
                      v674 = *v651;
                    }

                    else
                    {
                      v674 = 0;
                      *(v10 + 48) = 0;
                      *(v10 + 56) = 0;
                      v665 = (v10 + 57);
                    }

                    v599 = v1009;
                    *(v10 + 192) = v652;
                    *(v10 + 200) = v665;
                    v666 = (v10 + 57);
                  }
                }

                else
                {
                  *(v10 + 192) = v666 + 1;
                  v674 = *v666++;
                }
              }

              else
              {
                v674 = 255;
              }

              v663 = v649 + 3;
              if (v599 == 4)
              {
                v25[v663] = v674;
                v663 = (v649 + 4);
              }

              v83 |= v674;
              ++v664;
              LODWORD(v649) = v663;
            }

            while (v664 < *v10);
            goto LABEL_1005;
          }

          v663 = v649;
LABEL_1005:
          sub_29AB50224(v10, v922);
          v599 = v1009;
          v650 = v923 + 1;
          v648 = *(v10 + 4);
          v649 = v663;
          v5 = v995;
          v7 = v1004;
          if (v923 + 1 >= v648)
          {
            v9 = v1000;
            goto LABEL_1132;
          }
        }
      }

      v922 = 0;
    }

    if (!v978 || !v81 || !HIDWORD(v81))
    {
      free(v25);
      v44 = off_2A1B71BE0(&off_2A1B71BE0, v676, v677, v678, v679, v680, v681, v682, v921);
      v25 = 0;
      v45 = "bad masks";
      goto LABEL_49;
    }

    v644 = v5;
    v948 = sub_29AB5BDD0(v978);
    v645 = sub_29AB5BE3C(v978);
    v942 = sub_29AB5BDD0(v81);
    v964 = sub_29AB5BE3C(v81);
    v646 = sub_29AB5BDD0(HIDWORD(v81));
    v956 = sub_29AB5BE3C(HIDWORD(v81));
    v647 = sub_29AB5BDD0(v984);
    HIDWORD(v924) = sub_29AB5BE3C(v984);
    v951 = v645;
    if (v645 > 8 || v964 > 8 || v956 > 8 || HIDWORD(v924) >= 9)
    {
      free(v25);
      v25 = 0;
      *off_2A1B71BE0(&off_2A1B71BE0, v713, v714, v715, v716, v717, v718, v719, v921) = "bad masks";
      v5 = v644;
      goto LABEL_13;
    }

    v936 = 0;
    v946 = v948 - 7;
    v941 = v942 - 7;
    v938 = v646 - 7;
    LODWORD(v924) = v647 - 7;
    HIDWORD(v921) = 1;
    v5 = v644;
    v599 = v1009;
    goto LABEL_946;
  }

LABEL_51:
  if (v13 >= v68)
  {
    if (!*(v10 + 48))
    {
      goto LABEL_194;
    }

    v71 = (v10 + 56);
    v72 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
    v13 = *(v10 + 208);
    *(v10 + 184) += *(v10 + 192) - v13;
    if (v72)
    {
      v68 = &v71[v72];
      v70 = *v71;
    }

    else
    {
      v70 = 0;
      *(v10 + 48) = 0;
      v68 = (v10 + 57);
      *(v10 + 56) = 0;
    }

    v69 = (v10 + 57);
    *(v10 + 192) = v10 + 57;
    *(v10 + 200) = v68;
  }

  else
  {
    v69 = v13 + 1;
    *(v10 + 192) = v13 + 1;
    v70 = *v13;
  }

  if (v70 != 71)
  {
    goto LABEL_194;
  }

  if (v69 >= v68)
  {
    if (!*(v10 + 48))
    {
      goto LABEL_194;
    }

    v75 = (v10 + 56);
    v76 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
    v13 = *(v10 + 208);
    *(v10 + 184) += *(v10 + 192) - v13;
    if (v76)
    {
      v68 = &v75[v76];
      v74 = *v75;
    }

    else
    {
      v74 = 0;
      *(v10 + 48) = 0;
      v68 = (v10 + 57);
      *(v10 + 56) = 0;
    }

    v73 = (v10 + 57);
    *(v10 + 192) = v10 + 57;
    *(v10 + 200) = v68;
  }

  else
  {
    v73 = v69 + 1;
    *(v10 + 192) = v69 + 1;
    v74 = *v69;
  }

  if (v74 != 73)
  {
    goto LABEL_194;
  }

  if (v73 >= v68)
  {
    if (!*(v10 + 48))
    {
      goto LABEL_194;
    }

    v79 = (v10 + 56);
    v80 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
    v13 = *(v10 + 208);
    *(v10 + 184) += *(v10 + 192) - v13;
    if (v80)
    {
      v68 = &v79[v80];
      v78 = *v79;
    }

    else
    {
      v78 = 0;
      *(v10 + 48) = 0;
      v68 = (v10 + 57);
      *(v10 + 56) = 0;
    }

    v77 = (v10 + 57);
    *(v10 + 192) = v10 + 57;
    *(v10 + 200) = v68;
  }

  else
  {
    v77 = v73 + 1;
    *(v10 + 192) = v73 + 1;
    v78 = *v73;
  }

  if (v78 != 70)
  {
    goto LABEL_194;
  }

  if (v77 >= v68)
  {
    if (!*(v10 + 48))
    {
      goto LABEL_194;
    }

    v89 = (v10 + 56);
    v90 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
    v13 = *(v10 + 208);
    *(v10 + 184) += *(v10 + 192) - v13;
    if (v90)
    {
      v68 = &v89[v90];
      v88 = *v89;
    }

    else
    {
      v88 = 0;
      *(v10 + 48) = 0;
      v68 = (v10 + 57);
      *(v10 + 56) = 0;
    }

    v87 = (v10 + 57);
    *(v10 + 192) = v10 + 57;
    *(v10 + 200) = v68;
  }

  else
  {
    v87 = v77 + 1;
    *(v10 + 192) = v77 + 1;
    v88 = *v77;
  }

  if (v88 != 56)
  {
    goto LABEL_194;
  }

  if (v87 >= v68)
  {
    if (*(v10 + 48))
    {
      v126 = (v10 + 56);
      v127 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
      v13 = *(v10 + 208);
      *(v10 + 184) += *(v10 + 192) - v13;
      if (v127)
      {
        v68 = &v126[v127];
        v125 = *v126;
      }

      else
      {
        v125 = 0;
        *(v10 + 48) = 0;
        v68 = (v10 + 57);
        *(v10 + 56) = 0;
      }

      v124 = (v10 + 57);
      *(v10 + 192) = v10 + 57;
      *(v10 + 200) = v68;
      goto LABEL_118;
    }

LABEL_194:
    *(v10 + 192) = v13;
    v128 = *(v10 + 216);
LABEL_195:
    *(v10 + 200) = v128;
    goto LABEL_196;
  }

  v124 = v87 + 1;
  *(v10 + 192) = v87 + 1;
  v125 = *v87;
LABEL_118:
  if (v125 != 57 && v125 != 55)
  {
    goto LABEL_194;
  }

  if (v124 < v68)
  {
    *(v10 + 192) = v124 + 1;
    v128 = *(v10 + 216);
    goto LABEL_124;
  }

  if (!*(v10 + 48))
  {
    goto LABEL_194;
  }

  v124 = (v10 + 56);
  v129 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
  v13 = *(v10 + 208);
  v128 = *(v10 + 216);
  *(v10 + 184) += *(v10 + 192) - v13;
  if (!v129)
  {
    *(v10 + 48) = 0;
    *(v10 + 56) = 0;
    *(v10 + 192) = v13;
    goto LABEL_195;
  }

LABEL_124:
  v130 = *v124;
  *(v10 + 192) = v13;
  *(v10 + 200) = v128;
  if (v130 != 97)
  {
LABEL_196:
    v177 = sub_29AB4FF24(v10);
    v178 = sub_29AB4FF24(v10);
    *(v10 + 192) = *(v10 + 208);
    if ((v178 | (v177 << 16)) == 0x38425053)
    {
      v179 = sub_29AB4FF24(v10);
      if ((sub_29AB4FF24(v10) | (v179 << 16)) != 0x38425053)
      {
        v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v180, v181, v182, v183, v184, v185, v186);
        v29 = 0;
        v283 = "not PSD";
        goto LABEL_782;
      }

      if (sub_29AB4FF24(v10) != 1)
      {
        v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v187, v188, v189, v190, v191, v192, v193);
        v29 = 0;
        v283 = "wrong version";
        goto LABEL_782;
      }

      if (*(v10 + 16))
      {
        v194 = *(v10 + 192);
        v195 = *(v10 + 200);
        if (v195 - v194 <= 5)
        {
          *(v10 + 192) = v195;
          (*(v10 + 24))(*(v10 + 40), (6 - (v195 - v194)));
LABEL_685:
          v486 = sub_29AB4FF24(v10);
          if (v486 >= 0x11)
          {
            v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v487, v488, v489, v490, v491, v492, v493);
            v29 = 0;
            v283 = "wrong channel count";
            goto LABEL_782;
          }

          v494 = v486;
          v993 = v5;
          v999 = v9;
          v1007 = v7;
          v495 = sub_29AB4FF24(v10);
          v496 = sub_29AB4FF24(v10);
          v497 = v496 | (v495 << 16);
          v498 = sub_29AB4FF24(v10);
          v499 = sub_29AB4FF24(v10);
          if (v497 >= 16777217)
          {
            goto LABEL_689;
          }

          v500 = v499;
          v501 = v499 | (v498 << 16);
          if (v501 >= 16777217)
          {
            goto LABEL_689;
          }

          v527 = sub_29AB4FF24(v10);
          if (v527 != 8 && v527 != 16)
          {
            v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v520, v521, v522, v523, v524, v525, v526);
            v29 = 0;
            v283 = "unsupported bit depth";
            goto LABEL_782;
          }

          if (sub_29AB4FF24(v10) != 3)
          {
            v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v528, v529, v530, v531, v532, v533, v534);
            v29 = 0;
            v283 = "wrong color format";
            goto LABEL_782;
          }

          v535 = sub_29AB524B0(v10);
          sub_29AB50224(v10, v535);
          v536 = sub_29AB524B0(v10);
          sub_29AB50224(v10, v536);
          v537 = sub_29AB524B0(v10);
          sub_29AB50224(v10, v537);
          v538 = sub_29AB4FF24(v10);
          if (v538 >= 2)
          {
            v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v539, v540, v541, v542, v543, v544, v545);
            v29 = 0;
            v283 = "bad compression";
            goto LABEL_782;
          }

          v572 = v538;
          if (!sub_29AB50270(4, v501, v497, 0))
          {
            goto LABEL_689;
          }

          v935 = v527;
          v573 = malloc(4 * v497 * v501);
          if (v573)
          {
            v25 = v573;
            v574 = v495 << 16;
            v575 = v498 << 16;
            v929 = v501;
            v931 = v497;
            v945 = v501 * v497;
            v926 = v574;
            v928 = v500;
            v925 = v575;
            if (!v572)
            {
              v683 = 0;
              v684 = (v10 + 56);
              v685 = vdupq_n_s64(((v500 | v575) * (v496 | v574)) - 1);
              v933 = (v500 + v575) * (v496 + v574);
              v952 = v685;
              v686 = v573 + 32;
              do
              {
                if (v683 >= v494)
                {
                  if (v683 == 3)
                  {
                    v690 = -1;
                  }

                  else
                  {
                    v690 = 0;
                  }

                  if (v945 >= 1)
                  {
                    v691 = 0;
                    v692 = v686;
                    do
                    {
                      v693 = vdupq_n_s64(v691);
                      v694 = vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B430070)));
                      if (vuzp1_s8(vuzp1_s16(v694, *v693.i8), *v693.i8).u8[0])
                      {
                        *(v692 - 32) = v690;
                      }

                      if (vuzp1_s8(vuzp1_s16(v694, *&v693), *&v693).i8[1])
                      {
                        *(v692 - 28) = v690;
                      }

                      if (vuzp1_s8(vuzp1_s16(*&v693, vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B433E10)))), *&v693).i8[2])
                      {
                        *(v692 - 24) = v690;
                        *(v692 - 20) = v690;
                      }

                      v695 = vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B433E00)));
                      if (vuzp1_s8(*&v693, vuzp1_s16(v695, *&v693)).i32[1])
                      {
                        *(v692 - 16) = v690;
                      }

                      if (vuzp1_s8(*&v693, vuzp1_s16(v695, *&v693)).i8[5])
                      {
                        *(v692 - 12) = v690;
                      }

                      if (vuzp1_s8(*&v693, vuzp1_s16(*&v693, vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B433DF0))))).i8[6])
                      {
                        *(v692 - 8) = v690;
                        *(v692 - 4) = v690;
                      }

                      v696 = vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B4BE240)));
                      if (vuzp1_s8(vuzp1_s16(v696, *v693.i8), *v693.i8).u8[0])
                      {
                        *v692 = v690;
                      }

                      if (vuzp1_s8(vuzp1_s16(v696, *&v693), *&v693).i8[1])
                      {
                        v692[4] = v690;
                      }

                      if (vuzp1_s8(vuzp1_s16(*&v693, vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B4BE230)))), *&v693).i8[2])
                      {
                        v692[8] = v690;
                        v692[12] = v690;
                      }

                      v697 = vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B4BE220)));
                      if (vuzp1_s8(*&v693, vuzp1_s16(v697, *&v693)).i32[1])
                      {
                        v692[16] = v690;
                      }

                      if (vuzp1_s8(*&v693, vuzp1_s16(v697, *&v693)).i8[5])
                      {
                        v692[20] = v690;
                      }

                      v698 = vmovn_s64(vcgeq_u64(v685, vorrq_s8(v693, xmmword_29B4BE210)));
                      if (vuzp1_s8(*&v698, vuzp1_s16(v698, v698)).i8[6])
                      {
                        v692[24] = v690;
                      }

                      v699 = vuzp1_s16(v698, v698);
                      if (vuzp1_s8(v699, v699).i8[7])
                      {
                        v692[28] = v690;
                      }

                      v691 += 16;
                      v692 += 64;
                    }

                    while (((v933 + 15) & 0x1FFFFFFF0) != v691);
                  }
                }

                else
                {
                  v687 = &v25[v683];
                  if (v935 == 16)
                  {
                    if (v945 >= 1)
                    {
                      v688 = v933;
                      do
                      {
                        v689 = sub_29AB4FF24(v10);
                        v685 = v952;
                        *v687 = BYTE1(v689);
                        v687 += 4;
                        --v688;
                      }

                      while (v688);
                    }
                  }

                  else if (v945 >= 1)
                  {
                    v701 = *(v10 + 192);
                    v700 = *(v10 + 200);
                    v702 = v933;
                    do
                    {
                      if (v701 >= v700)
                      {
                        v703 = *(v10 + 48);
                        if (v703)
                        {
                          v704 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                          *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                          if (v704)
                          {
                            v700 = &v684[v704];
                            LOBYTE(v703) = *v684;
                            v701 = (v10 + 57);
                          }

                          else
                          {
                            LOBYTE(v703) = 0;
                            *(v10 + 48) = 0;
                            *(v10 + 56) = 0;
                            v701 = (v10 + 57);
                            v700 = (v10 + 57);
                          }

                          v685 = v952;
                          *(v10 + 192) = v701;
                          *(v10 + 200) = v700;
                        }
                      }

                      else
                      {
                        *(v10 + 192) = v701 + 1;
                        LOBYTE(v703) = *v701++;
                      }

                      *v687 = v703;
                      v687 += 4;
                      --v702;
                    }

                    while (v702);
                  }
                }

                ++v683;
                ++v686;
                v5 = v993;
                v7 = v1007;
              }

              while (v683 != 4);
LABEL_1060:
              if (v494 >= 4 && v945 >= 1)
              {
                v705 = (v928 + v925) * (v496 + v926);
                v706 = v25 + 1;
                do
                {
                  v707 = v706[2];
                  if (v706[2] && v707 != 255)
                  {
                    v708 = 1.0 / (v707 / 255.0);
                    *&v709 = 1.0 - v708;
                    v710 = (1.0 - v708) * 255.0;
                    LOBYTE(v709) = *(v706 - 1);
                    *&v711 = v710 + (v708 * v709);
                    *(v706 - 1) = *&v711;
                    LOBYTE(v711) = *v706;
                    *&v712 = v710 + (v708 * v711);
                    *v706 = *&v712;
                    LOBYTE(v712) = v706[1];
                    v706[1] = (v710 + (v708 * v712));
                  }

                  v706 += 4;
                  --v705;
                }

                while (v705);
              }

              if (v5)
              {
                *v5 = 4;
              }

              *v7 = v931;
              v9 = v999;
              *v999 = v929;
              goto LABEL_13;
            }

            sub_29AB50224(v10, 2 * v494 * v497);
            v576 = 0;
            v577 = vdupq_n_s64(((v500 | v575) * (v496 | v574)) - 1);
            v578 = ((v500 + v575) * (v496 + v574) + 15) & 0x1FFFFFFF0;
            v579 = xmmword_29B4BE210;
            v580 = xmmword_29B4BE220;
            v581 = xmmword_29B4BE230;
            v582 = xmmword_29B4BE240;
            v583 = xmmword_29B433DF0;
            v584 = xmmword_29B433E00;
            v585 = xmmword_29B433E10;
            v586 = xmmword_29B430070;
            v587 = v25 + 32;
            v5 = v993;
            v7 = v1007;
            v1013 = v577;
            while (1)
            {
              if (v576 >= v494)
              {
                if (v945 >= 1)
                {
                  v589 = 0;
                  if (v576 == 3)
                  {
                    v590 = -1;
                  }

                  else
                  {
                    v590 = 0;
                  }

                  v591 = v587;
                  do
                  {
                    v592 = vdupq_n_s64(v589);
                    v593 = vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v586)));
                    if (vuzp1_s8(vuzp1_s16(v593, *v592.i8), *v592.i8).u8[0])
                    {
                      *(v591 - 32) = v590;
                    }

                    if (vuzp1_s8(vuzp1_s16(v593, *&v592), *&v592).i8[1])
                    {
                      *(v591 - 28) = v590;
                    }

                    if (vuzp1_s8(vuzp1_s16(*&v592, vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v585)))), *&v592).i8[2])
                    {
                      *(v591 - 24) = v590;
                      *(v591 - 20) = v590;
                    }

                    v594 = vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v584)));
                    if (vuzp1_s8(*&v592, vuzp1_s16(v594, *&v592)).i32[1])
                    {
                      *(v591 - 16) = v590;
                    }

                    if (vuzp1_s8(*&v592, vuzp1_s16(v594, *&v592)).i8[5])
                    {
                      *(v591 - 12) = v590;
                    }

                    if (vuzp1_s8(*&v592, vuzp1_s16(*&v592, vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v583))))).i8[6])
                    {
                      *(v591 - 8) = v590;
                      *(v591 - 4) = v590;
                    }

                    v595 = vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v582)));
                    if (vuzp1_s8(vuzp1_s16(v595, *v592.i8), *v592.i8).u8[0])
                    {
                      *v591 = v590;
                    }

                    if (vuzp1_s8(vuzp1_s16(v595, *&v592), *&v592).i8[1])
                    {
                      v591[4] = v590;
                    }

                    if (vuzp1_s8(vuzp1_s16(*&v592, vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v581)))), *&v592).i8[2])
                    {
                      v591[8] = v590;
                      v591[12] = v590;
                    }

                    v596 = vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v580)));
                    if (vuzp1_s8(*&v592, vuzp1_s16(v596, *&v592)).i32[1])
                    {
                      v591[16] = v590;
                    }

                    if (vuzp1_s8(*&v592, vuzp1_s16(v596, *&v592)).i8[5])
                    {
                      v591[20] = v590;
                    }

                    v597 = vmovn_s64(vcgeq_u64(v577, vorrq_s8(v592, v579)));
                    if (vuzp1_s8(*&v597, vuzp1_s16(v597, v597)).i8[6])
                    {
                      v591[24] = v590;
                    }

                    v598 = vuzp1_s16(v597, v597);
                    if (vuzp1_s8(v598, v598).i8[7])
                    {
                      v591[28] = v590;
                    }

                    v589 += 16;
                    v591 += 64;
                  }

                  while (v578 != v589);
                }
              }

              else
              {
                v588 = sub_29AB5BF9C(v10, &v25[v576], v945);
                v586 = xmmword_29B430070;
                v585 = xmmword_29B433E10;
                v584 = xmmword_29B433E00;
                v583 = xmmword_29B433DF0;
                v582 = xmmword_29B4BE240;
                v581 = xmmword_29B4BE230;
                v580 = xmmword_29B4BE220;
                v579 = xmmword_29B4BE210;
                v577 = v1013;
                if (!v588)
                {
                  free(v25);
                  v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v783, v784, v785, v786, v787, v788, v789);
                  v29 = 0;
                  v283 = "corrupt";
                  goto LABEL_782;
                }
              }

              ++v576;
              ++v587;
              if (v576 == 4)
              {
                goto LABEL_1060;
              }
            }
          }

          goto LABEL_780;
        }
      }

      else
      {
        v194 = *(v10 + 192);
      }

      *(v10 + 192) = v194 + 6;
      goto LABEL_685;
    }

    if (!sub_29AB54174(v10, "S\x80\xF6\x34nvalid width"))
    {
      v203 = *(v10 + 208);
      v204 = *(v10 + 216);
      *(v10 + 192) = v203;
      *(v10 + 200) = v204;
      goto LABEL_356;
    }

    v196 = (v10 + 56);
    v197 = v10 + 57;
    v199 = *(v10 + 192);
    v198 = *(v10 + 200);
    v200 = 84;
    while (v199 >= v198)
    {
      if (*(v10 + 48))
      {
        v201 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
        *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
        if (v201)
        {
          v198 = &v196[v201];
        }

        else
        {
          *(v10 + 48) = 0;
          *(v10 + 56) = 0;
          v198 = (v10 + 57);
        }

        *(v10 + 200) = v198;
        v199 = v10 + 57;
        goto LABEL_211;
      }

LABEL_212:
      if (!--v200)
      {
        v202 = sub_29AB54174(v10, "PICT");
        v203 = *(v10 + 208);
        v204 = *(v10 + 216);
        *(v10 + 192) = v203;
        *(v10 + 200) = v204;
        if (v202)
        {
          v205 = 92;
          while (v203 >= v204)
          {
            if (*(v10 + 48))
            {
              v206 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
              *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
              if (v206)
              {
                v204 = &v196[v206];
              }

              else
              {
                *(v10 + 48) = 0;
                *(v10 + 56) = 0;
                v204 = (v10 + 57);
              }

              *(v10 + 200) = v204;
              v203 = (v10 + 57);
              goto LABEL_222;
            }

LABEL_223:
            if (!--v205)
            {
              v207 = sub_29AB4FF24(v10);
              v215 = sub_29AB4FF24(v10);
              if (!*(v10 + 16))
              {
                goto LABEL_227;
              }

              if ((*(v10 + 32))(*(v10 + 40)))
              {
                if (*(v10 + 48))
                {
LABEL_227:
                  if (*(v10 + 192) < *(v10 + 200))
                  {
                    goto LABEL_228;
                  }
                }

                v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v208, v209, v210, v211, v212, v213, v214);
                v29 = 0;
                v283 = "bad file";
LABEL_782:
                *v46 = v283;
                return v29;
              }

LABEL_228:
              if (v215)
              {
                if (0x7FFFFFFF / v215 < v207 || (v215 * v207) >> 29 != 0)
                {
LABEL_689:
                  v46 = (off_2A1B71BE0)(&off_2A1B71BE0, v208, v209, v210, v211, v212, v213, v214);
                  v29 = 0;
                  v283 = "too large";
                  goto LABEL_782;
                }
              }

              sub_29AB4FF24(v10);
              sub_29AB4FF24(v10);
              sub_29AB4FF24(v10);
              sub_29AB4FF24(v10);
              v217 = sub_29AB5037C(v207, v215, 4u, 0);
              if (!v217)
              {
                goto LABEL_780;
              }

              v1005 = v7;
              v1011 = v207;
              v985 = v215;
              v1002 = v217;
              memset(v217, 255, 4 * v215 * v207);
              v232 = 0;
              v233 = 0;
              v234 = &v1020 + 2;
              v996 = v9;
              while (2)
              {
                if (v232 == 10)
                {
LABEL_708:
                  v518 = (off_2A1B71BE0)(&off_2A1B71BE0, v225, v226, v227, v228, v229, v230, v231);
                  v245 = 0;
                  v519 = "bad format";
                }

                else
                {
                  v236 = *(v10 + 192);
                  v235 = *(v10 + 200);
                  if (v236 >= v235)
                  {
                    if (*(v10 + 48))
                    {
                      v238 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                      if (v238)
                      {
                        v235 = &v196[v238];
                        v237 = *v196;
                      }

                      else
                      {
                        v237 = 0;
                        *(v10 + 48) = 0;
                        *(v10 + 56) = 0;
                        v235 = (v10 + 57);
                      }

                      *(v10 + 192) = v197;
                      *(v10 + 200) = v235;
                      v236 = (v10 + 57);
                    }

                    else
                    {
                      v237 = 0;
                    }
                  }

                  else
                  {
                    *(v10 + 192) = v236 + 1;
                    v237 = *v236++;
                  }

                  if (v236 >= v235)
                  {
                    if (*(v10 + 48))
                    {
                      v240 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                      if (v240)
                      {
                        v235 = &v196[v240];
                        v239 = *v196;
                      }

                      else
                      {
                        v239 = 0;
                        *(v10 + 48) = 0;
                        *(v10 + 56) = 0;
                        v235 = (v10 + 57);
                      }

                      *(v10 + 192) = v197;
                      *(v10 + 200) = v235;
                      v236 = (v10 + 57);
                    }

                    else
                    {
                      v239 = 0;
                    }
                  }

                  else
                  {
                    *(v10 + 192) = v236 + 1;
                    v239 = *v236++;
                  }

                  *(v234 - 2) = v239;
                  if (v236 >= v235)
                  {
                    v241 = *(v10 + 48);
                    if (v241)
                    {
                      v242 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                      if (v242)
                      {
                        v235 = &v196[v242];
                        LOBYTE(v241) = *v196;
                      }

                      else
                      {
                        LOBYTE(v241) = 0;
                        *(v10 + 48) = 0;
                        *(v10 + 56) = 0;
                        v235 = (v10 + 57);
                      }

                      *(v10 + 192) = v197;
                      *(v10 + 200) = v235;
                      v236 = (v10 + 57);
                    }
                  }

                  else
                  {
                    *(v10 + 192) = v236 + 1;
                    LOBYTE(v241) = *v236++;
                  }

                  *(v234 - 1) = v241;
                  if (v236 >= v235)
                  {
                    if (*(v10 + 48))
                    {
                      v244 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                      if (v244)
                      {
                        v235 = &v196[v244];
                        v243 = *v196;
                      }

                      else
                      {
                        v243 = 0;
                        *(v10 + 48) = 0;
                        *(v10 + 56) = 0;
                        v235 = (v10 + 57);
                      }

                      *(v10 + 192) = v197;
                      *(v10 + 200) = v235;
                      v236 = (v10 + 57);
                    }

                    else
                    {
                      v243 = 0;
                    }
                  }

                  else
                  {
                    *(v10 + 192) = v236 + 1;
                    v243 = *v236++;
                  }

                  *v234 = v243;
                  if (!*(v10 + 16))
                  {
                    goto LABEL_272;
                  }

                  if (!(*(v10 + 32))(*(v10 + 40)))
                  {
                    goto LABEL_273;
                  }

                  if (!*(v10 + 48))
                  {
                    goto LABEL_715;
                  }

                  v236 = *(v10 + 192);
                  v235 = *(v10 + 200);
LABEL_272:
                  if (v236 < v235)
                  {
LABEL_273:
                    if (v239 != 8)
                    {
                      goto LABEL_708;
                    }

                    v233 |= v243;
                    v234 += 3;
                    ++v232;
                    if (v237)
                    {
                      continue;
                    }

                    if ((v233 & 0x10) != 0)
                    {
                      v245 = 4;
                    }

                    else
                    {
                      v245 = 3;
                    }

                    if (v5)
                    {
                      *v5 = v245;
                      v245 = 0;
                    }

                    v7 = v1005;
                    v246 = v985;
                    v247 = v1002;
                    if (!v985)
                    {
                      goto LABEL_353;
                    }

                    v248 = 4 * v1011;
                    v249 = 0;
                    v991 = v5;
                    while (1)
                    {
                      v250 = 0;
                      v960 = v249;
                      v974 = &v247[v248 * v249];
                      do
                      {
                        v251 = &v1020 + 3 * v250;
                        v252 = v251[1];
                        v979 = v250;
                        if (v251[1])
                        {
                          if (v252 == 1)
                          {
                            v268 = v1011;
                            v269 = v974;
                            if (!v1011)
                            {
                              goto LABEL_351;
                            }

                            while (2)
                            {
                              v271 = *(v10 + 192);
                              v270 = *(v10 + 200);
                              if (v271 >= v270)
                              {
                                if (*(v10 + 48))
                                {
                                  v273 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                                  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                                  if (v273)
                                  {
                                    v270 = &v196[v273];
                                    v272 = *v196;
                                  }

                                  else
                                  {
                                    v272 = 0;
                                    *(v10 + 48) = 0;
                                    *(v10 + 56) = 0;
                                    v270 = (v10 + 57);
                                  }

                                  *(v10 + 192) = v197;
                                  *(v10 + 200) = v270;
                                  v271 = (v10 + 57);
                                }

                                else
                                {
                                  v272 = 0;
                                }
                              }

                              else
                              {
                                *(v10 + 192) = v271 + 1;
                                v272 = *v271++;
                              }

                              if (*(v10 + 16))
                              {
                                if ((*(v10 + 32))(*(v10 + 40)))
                                {
                                  if (!*(v10 + 48))
                                  {
                                    goto LABEL_840;
                                  }

                                  v271 = *(v10 + 192);
                                  v270 = *(v10 + 200);
                                  goto LABEL_333;
                                }
                              }

                              else
                              {
LABEL_333:
                                if (v271 >= v270)
                                {
LABEL_840:
                                  v600 = (off_2A1B71BE0)(&off_2A1B71BE0, v225, v226, v227, v228, v229, v230, v231);
                                  v601 = "bad file";
                                  goto LABEL_841;
                                }
                              }

                              if (!sub_29AB5C1D4(v10, v251[2], &v1017))
                              {
                                goto LABEL_842;
                              }

                              if (v268 >= v272)
                              {
                                v274 = v272;
                              }

                              else
                              {
                                v274 = v268;
                              }

                              if (v274)
                              {
                                for (i = 0; i != v274; ++i)
                                {
                                  v276 = 0;
                                  v277 = v251[2];
                                  v278 = 128;
                                  do
                                  {
                                    if ((v278 & v277) != 0)
                                    {
                                      v269[v276] = *(&v1017 + v276);
                                    }

                                    ++v276;
                                    v278 >>= 1;
                                  }

                                  while (v276 != 4);
                                  v269 += 4;
                                }
                              }

                              v268 -= v274;
                              if (v268 < 1)
                              {
                                goto LABEL_351;
                              }

                              continue;
                            }
                          }

                          if (v252 != 2)
                          {
                            v600 = (off_2A1B71BE0)(&off_2A1B71BE0, v225, v226, v227, v228, v229, v230, v231);
                            v601 = "bad format";
LABEL_841:
                            *v600 = v601;
                            goto LABEL_842;
                          }

                          v253 = v1011;
                          v254 = v974;
                          if (v1011)
                          {
                            do
                            {
                              v256 = *(v10 + 192);
                              v255 = *(v10 + 200);
                              if (v256 >= v255)
                              {
                                if (*(v10 + 48))
                                {
                                  v258 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                                  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                                  if (v258)
                                  {
                                    v255 = &v196[v258];
                                    v257 = *v196;
                                  }

                                  else
                                  {
                                    v257 = 0;
                                    *(v10 + 48) = 0;
                                    *(v10 + 56) = 0;
                                    v255 = (v10 + 57);
                                  }

                                  *(v10 + 192) = v197;
                                  *(v10 + 200) = v255;
                                  v256 = (v10 + 57);
                                }

                                else
                                {
                                  v257 = 0;
                                }
                              }

                              else
                              {
                                *(v10 + 192) = v256 + 1;
                                v257 = *v256++;
                              }

                              if (*(v10 + 16))
                              {
                                if (!(*(v10 + 32))(*(v10 + 40)))
                                {
                                  goto LABEL_300;
                                }

                                if (!*(v10 + 48))
                                {
                                  goto LABEL_840;
                                }

                                v256 = *(v10 + 192);
                                v255 = *(v10 + 200);
                              }

                              if (v256 >= v255)
                              {
                                goto LABEL_840;
                              }

LABEL_300:
                              if ((v257 & 0x80) != 0)
                              {
                                if (v257 == 128)
                                {
                                  v260 = sub_29AB4FF24(v10);
                                }

                                else
                                {
                                  v260 = v257 - 127;
                                }

                                if (v260 > v253)
                                {
                                  goto LABEL_840;
                                }

                                if (!sub_29AB5C1D4(v10, v251[2], &v1017))
                                {
                                  goto LABEL_842;
                                }

                                if (v260 >= 1)
                                {
                                  for (j = 0; j != v260; ++j)
                                  {
                                    v264 = 0;
                                    v265 = v251[2];
                                    v266 = 128;
                                    do
                                    {
                                      if ((v266 & v265) != 0)
                                      {
                                        *(v254 + v264) = *(&v1017 + v264);
                                      }

                                      ++v264;
                                      v266 >>= 1;
                                    }

                                    while (v264 != 4);
                                    v254 += 4;
                                  }
                                }
                              }

                              else
                              {
                                v259 = v257;
                                v260 = v257 + 1;
                                v261 = v253;
                                v262 = v260;
                                v950 = v261;
                                if (v261 <= v259)
                                {
                                  goto LABEL_840;
                                }

                                do
                                {
                                  if (!sub_29AB5C1D4(v10, v251[2], v254))
                                  {
                                    goto LABEL_842;
                                  }

                                  v254 += 4;
                                  --v262;
                                }

                                while (v262);
                                v253 = v950;
                              }

                              v267 = __OFSUB__(v253, v260);
                              v253 -= v260;
                            }

                            while (!((v253 < 0) ^ v267 | (v253 == 0)));
                          }
                        }

                        else if (v1011)
                        {
                          v279 = v251[2];
                          v280 = v1011;
                          v281 = v974;
                          while (sub_29AB5C1D4(v10, v279, v281))
                          {
                            v281 += 4;
                            if (!--v280)
                            {
                              goto LABEL_351;
                            }
                          }

LABEL_842:
                          v5 = v991;
LABEL_717:
                          v7 = v1005;
                          v282 = v1011;
                          v246 = v985;
                          free(v1002);
                          v247 = 0;
                          goto LABEL_718;
                        }

LABEL_351:
                        v250 = v979 + 1;
                        v5 = v991;
                        v7 = v1005;
                        v248 = 4 * v1011;
                      }

                      while (v232 != v979 + 1);
                      v249 = v960 + 1;
                      v247 = v1002;
                      v246 = v985;
                      if (v960 + 1 == v985)
                      {
LABEL_353:
                        v282 = v1011;
LABEL_718:
                        *v996 = v282;
                        *v7 = v246;
                        if (v5)
                        {
                          v245 = *v5;
                        }

                        if (v245 == 4)
                        {
                          v25 = v247;
LABEL_830:
                          v9 = v996;
                          goto LABEL_13;
                        }

                        v546 = sub_29AB5037C(v245, v282, v246, 0);
                        if (v546)
                        {
                          v25 = v546;
                          if (!v246)
                          {
LABEL_778:
                            free(v247);
                            goto LABEL_830;
                          }

                          if ((v245 + 22) > 0x19 || ((1 << (v245 + 22)) & 0x3858687) == 0)
                          {
                            free(v247);
                            free(v25);
                            v46 = off_2A1B71BE0(&off_2A1B71BE0, v630, v631, v632, v633, v634, v635, v636, v921);
                            v29 = 0;
                            v283 = "unsupported";
                            goto LABEL_782;
                          }

                          v547 = 0;
                          v548 = 0;
                          while (1)
                          {
                            v549 = &v546[v547 + 3];
                            v550 = &v247[4 * v282 * v548];
                            v551 = &v546[v282 * v548 * v245];
                            if (v245 <= -13)
                            {
                              break;
                            }

                            if (v245 > -5)
                            {
                              switch(v245)
                              {
                                case -4:
                                  v569 = v282 + 1;
                                  if (v282)
                                  {
                                    do
                                    {
                                      *v551 = *v550;
                                      *(v551 + 1) = *(v550 + 1);
                                      v551[3] = -1;
                                      v550 += 3;
                                      v551 += 4;
                                      --v569;
                                    }

                                    while (v569 > 1);
                                  }

                                  goto LABEL_777;
                                case 1:
                                  v564 = v282 + 1;
                                  if (v282)
                                  {
                                    do
                                    {
                                      *v551++ = (77 * *v550 + 150 * v550[1] + 29 * v550[2]) >> 8;
                                      v550 += 4;
                                      --v564;
                                    }

                                    while (v564 > 1);
                                  }

                                  goto LABEL_777;
                                case 2:
                                  v556 = v282 + 1;
                                  if (v282)
                                  {
                                    do
                                    {
                                      *v551 = (77 * *v550 + 150 * v550[1] + 29 * v550[2]) >> 8;
                                      v551[1] = v550[3];
                                      v550 += 4;
                                      v551 += 2;
                                      --v556;
                                    }

                                    while (v556 > 1);
                                  }

                                  goto LABEL_777;
                              }

                              goto LABEL_775;
                            }

                            if (v245 == -12)
                            {
                              v567 = v282 + 1;
                              if (v282)
                              {
                                do
                                {
                                  v568 = *v550;
                                  *(v549 - 1) = *v550;
                                  *(v549 - 2) = v568;
                                  *(v549 - 3) = v568;
                                  *v549 = v550[1];
                                  v549 += 4;
                                  v550 += 2;
                                  --v567;
                                }

                                while (v567 > 1);
                              }

                              goto LABEL_777;
                            }

                            if (v245 == -7)
                            {
                              v563 = v282 + 1;
                              if (v282)
                              {
                                do
                                {
                                  *v551++ = (77 * *v550 + 150 * v550[1] + 29 * v550[2]) >> 8;
                                  v550 += 3;
                                  --v563;
                                }

                                while (v563 > 1);
                              }

                              goto LABEL_777;
                            }

                            if (v245 != -6)
                            {
                              goto LABEL_775;
                            }

                            v552 = v282 + 1;
                            if (v282)
                            {
                              do
                              {
                                *v551 = (77 * *v550 + 150 * v550[1] + 29 * v550[2]) >> 8;
                                v551[1] = -1;
                                v550 += 3;
                                v551 += 2;
                                --v552;
                              }

                              while (v552 > 1);
                            }

LABEL_777:
                            ++v548;
                            v547 += v282 * v245;
                            if (v548 == v246)
                            {
                              goto LABEL_778;
                            }
                          }

                          v553 = &v546[v547 + 2];
                          if (v245 <= -21)
                          {
                            if (v245 == -22)
                            {
                              if (v282)
                              {
                                v559 = v282 + 1;
                                do
                                {
                                  v560 = *v550++;
                                  *v551 = v560;
                                  v551[1] = -1;
                                  v551 += 2;
                                  --v559;
                                }

                                while (v559 > 1);
                              }

                              goto LABEL_777;
                            }

                            if (v245 == -21)
                            {
                              v557 = v282 + 1;
                              if (v282)
                              {
                                do
                                {
                                  v558 = *v550++;
                                  *v553 = v558;
                                  *(v553 - 1) = v558;
                                  *(v553 - 2) = v558;
                                  v553 += 3;
                                  --v557;
                                }

                                while (v557 > 1);
                              }

                              goto LABEL_777;
                            }
                          }

                          else
                          {
                            switch(v245)
                            {
                              case -20:
                                v565 = v282 + 1;
                                if (v282)
                                {
                                  do
                                  {
                                    v566 = *v550++;
                                    *(v549 - 1) = v566;
                                    *(v549 - 2) = v566;
                                    *(v549 - 3) = v566;
                                    *v549 = -1;
                                    v549 += 4;
                                    --v565;
                                  }

                                  while (v565 > 1);
                                }

                                goto LABEL_777;
                              case -15:
                                v561 = v282 + 1;
                                if (v282)
                                {
                                  do
                                  {
                                    v562 = *v550;
                                    v550 += 2;
                                    *v551++ = v562;
                                    --v561;
                                  }

                                  while (v561 > 1);
                                }

                                goto LABEL_777;
                              case -13:
                                v554 = v282 + 1;
                                if (v282)
                                {
                                  do
                                  {
                                    v555 = *v550;
                                    v550 += 2;
                                    *v553 = v555;
                                    *(v553 - 1) = v555;
                                    *(v553 - 2) = v555;
                                    v553 += 3;
                                    --v554;
                                  }

                                  while (v554 > 1);
                                }

                                goto LABEL_777;
                            }
                          }

LABEL_775:
                          v570 = v282 + 1;
                          if (v282)
                          {
                            do
                            {
                              *v551 = *v550;
                              *(v551 + 1) = *(v550 + 1);
                              v550 += 4;
                              v551 += 3;
                              --v570;
                            }

                            while (v570 > 1);
                          }

                          goto LABEL_777;
                        }

                        free(v247);
LABEL_780:
                        v46 = off_2A1B71BE0(&off_2A1B71BE0, v218, v219, v220, v221, v222, v223, v224, v921);
                        v29 = 0;
                        goto LABEL_781;
                      }
                    }
                  }

LABEL_715:
                  v518 = (off_2A1B71BE0)(&off_2A1B71BE0, v225, v226, v227, v228, v229, v230, v231);
                  v245 = 0;
                  v519 = "bad file";
                }

                break;
              }

              *v518 = v519;
              goto LABEL_717;
            }
          }

          ++v203;
LABEL_222:
          *(v10 + 192) = v203;
          goto LABEL_223;
        }

LABEL_356:
        v284 = malloc(0x4888uLL);
        if (v284)
        {
          v292 = v284;
          v293 = (v284 + 2048);
          bzero(v284 + 1, 0x4868uLL);
          *v292 = v10;
          v292[2318] = sub_29AB5C308;
          v292[2319] = sub_29AB5C6C4;
          v292[2320] = sub_29AB5C780;
          *(v293 + 531) = -1;
          v293[2088] = -1;
          if (sub_29AB4ED4C(v292) == 216)
          {
            *(v10 + 192) = *(v10 + 208);
            free(v292);
            v301 = malloc(0x4888uLL);
            if (!v301)
            {
              goto LABEL_780;
            }

            v302 = v301;
            v992 = v5;
            v998 = v9;
            v1006 = v7;
            v303 = (v301 + 1);
            bzero(v301 + 1, 0x4868uLL);
            *v302 = v10;
            v302[2318] = sub_29AB5C308;
            v302[2319] = sub_29AB5C6C4;
            v302[2320] = sub_29AB5C780;
            *(v10 + 8) = 0;
            *(v302 + 2267) = 0u;
            *(v302 + 2279) = 0u;
            *(v302 + 2291) = 0u;
            *(v302 + 2303) = 0u;
            if (!sub_29AB4EBFC(v302, 0))
            {
              goto LABEL_1272;
            }

            v304 = (v302 + 2048);
            v305 = (v302 + 2260);
            v306 = sub_29AB4ED4C(v302);
            v1012 = (v302 + 2315);
            v986 = (v302 + 841);
            v980 = (v302 + 1745);
            v307 = (v302 + 1681);
            v308 = v302 + 8308;
            v309 = "bad SOS component count";
LABEL_361:
            if (v306 != 218)
            {
              if (v306 == 220)
              {
                v310 = sub_29AB4FF24(*v302);
                v311 = sub_29AB4FF24(*v302);
                if (v310 != 4)
                {
                  v309 = "bad DNL len";
                  goto LABEL_1271;
                }

                if (v311 != *(*v302 + 4))
                {
                  v309 = "bad DNL height";
                  goto LABEL_1271;
                }

                goto LABEL_368;
              }

              if (v306 == 217)
              {
                v626 = *v302;
                if (!*(v304 + 524))
                {
                  goto LABEL_899;
                }

                v7 = v1006;
                v9 = v998;
                if (v626[2] >= 1)
                {
                  v602 = 0;
                  do
                  {
                    v603 = &v305[12 * v602];
                    v604 = (*(v603 + 8) + 7) >> 3;
                    if (v604 >= 1)
                    {
                      v605 = 0;
                      v606 = ((*(v603 + 7) + 7) >> 3);
                      do
                      {
                        if (v606 >= 1)
                        {
                          for (k = 0; k != v606; ++k)
                          {
                            v608 = 0;
                            v609 = &v603[10][32 * (k + *(v603 + 22) * v605)];
                            v610 = &v307[16 * *(v603 + 3)];
                            do
                            {
                              *(v609 + v608) *= *(v610 + v608);
                              v608 += 2;
                            }

                            while (v608 != 128);
                            (v302[2318])(&v603[6][2 * k] + 8 * v605 * *(v603 + 9));
                          }
                        }

                        ++v605;
                      }

                      while (v605 != v604);
                      v626 = *v302;
                      v7 = v1006;
                      v9 = v998;
                    }

                    ++v602;
                  }

                  while (v602 < v626[2]);
                }
              }

              else
              {
                if (sub_29AB4EEAC(v302, v306))
                {
                  goto LABEL_368;
                }

                v626 = *v302;
LABEL_899:
                v7 = v1006;
                v9 = v998;
              }

              v627 = v626[2];
              if (v627 <= 2)
              {
                v628 = 1;
              }

              else
              {
                v628 = 3;
              }

              v965 = v628;
              if (v627 != 3)
              {
                if (v627 > 0)
                {
                  goto LABEL_919;
                }

                sub_29AB50308(v302, v627);
                v25 = 0;
                v5 = v992;
                goto LABEL_1274;
              }

              if (*(v302 + 4628) == 3)
              {
                v629 = 1;
                goto LABEL_1174;
              }

              if (*(v302 + 4627))
              {
LABEL_919:
                v947 = 0;
              }

              else
              {
                v629 = *(v302 + 4626) == 0;
LABEL_1174:
                v947 = v629;
              }

              v1017 = 0u;
              v1018 = 0u;
              v790 = *v626;
              v791 = *v626 - 1;
              v792 = &v1022;
              v793 = 18084;
              v794 = 2269;
              v957 = v627;
              v795 = v627;
              while (2)
              {
                v796 = malloc(v790 + 3);
                v302[v794] = v796;
                if (v796)
                {
                  v797 = *(v302 + 4514) / *(v302 + v793);
                  v798 = *(v302 + 4515) / *(v302 + v793 + 4);
                  *v792 = v797;
                  *(v792 + 1) = v798;
                  *(v792 + 2) = (v791 + v797) / v797;
                  *(v792 + 3) = v798 >> 1;
                  *(v792 + 4) = 0;
                  v799 = v302[v794 - 3];
                  *(v792 - 2) = v799;
                  *(v792 - 1) = v799;
                  if (v797 == 2)
                  {
                    v801 = sub_29AB5C874;
                    if (v798 == 1)
                    {
                      goto LABEL_1188;
                    }

                    if (v798 == 2)
                    {
                      v801 = v302[2320];
                      goto LABEL_1188;
                    }
                  }

                  else if (v797 == 1)
                  {
                    v800 = sub_29AB5C92C;
                    if (v798 == 2)
                    {
                      v800 = sub_29AB5C83C;
                    }

                    v801 = sub_29AB5C834;
                    if (v798 != 1)
                    {
                      v801 = v800;
                    }

LABEL_1188:
                    *(v792 - 3) = v801;
                    v793 += 96;
                    v794 += 12;
                    v792 += 6;
                    if (--v795)
                    {
                      continue;
                    }

                    v802 = v626[1];
                    v803 = v965;
                    v804 = sub_29AB5037C(v965, v790, v802, 1);
                    v25 = v804;
                    v5 = v992;
                    v7 = v1006;
                    if (v804)
                    {
                      if (v802)
                      {
                        v988 = 0;
                        v805 = 0;
                        v939 = v804 + 1;
                        v943 = v804 + 3;
                        while (1)
                        {
                          v806 = 0;
                          v982 = v805;
                          v972 = *v626;
                          v976 = v805 * v803 * *v626;
                          v807 = &v1017;
                          v808 = (v302 + 2264);
                          do
                          {
                            v809 = &v1020 + v806;
                            v810 = (&v1020 + v806 + 16);
                            v811 = v1024[v806 / 4];
                            v812 = *(&v1022 + v806 + 4);
                            if (v811 >= v812 >> 1)
                            {
                              v813 = &v1020 + v806 + 16;
                            }

                            else
                            {
                              v813 = &v1020 + v806 + 8;
                            }

                            v814 = *v813;
                            if (v811 >= v812 >> 1)
                            {
                              v815 = &v1020 + v806 + 8;
                            }

                            else
                            {
                              v815 = &v1020 + v806 + 16;
                            }

                            *v807 = (*(&v1020 + v806))(v808[5], v814, *v815, v1024[v806 / 4 - 1], *(&v1022 + v806));
                            *(v809 + 9) = v811 + 1;
                            if (v811 + 1 >= v812)
                            {
                              v816 = *v810;
                              *(&v1020 + v806 + 8) = *v810;
                              v817 = *(v809 + 10) + 1;
                              *(v809 + 9) = 0;
                              *(v809 + 10) = v817;
                              if (v817 < *v808)
                              {
                                *v810 = v816 + *(v808 + 1);
                              }
                            }

                            v806 += 48;
                            v807 = (v807 + 8);
                            v808 += 12;
                          }

                          while (48 * v957 != v806);
                          if (v957 >= 3)
                          {
                            break;
                          }

                          v626 = *v302;
                          v9 = v998;
                          if (!v947)
                          {
                            v5 = v992;
                            v803 = v965;
                            v829 = v988;
                            v833 = v982;
                            if (v626[2] == 4)
                            {
                              v834 = *(v302 + 4627);
                              if (v834 == 2)
                              {
                                if (*v626)
                                {
                                  v856 = 0;
                                  v857 = v1017;
                                  v858 = *(&v1018 + 1);
                                  v859 = &v939[v972 * v988];
                                  do
                                  {
                                    v860 = *(v858 + v856) * (*(v857 + v856) ^ 0xFF) + 128;
                                    *(v859 - 1) = (v860 + (v860 >> 8)) >> 8;
                                    *v859 = -1;
                                    ++v856;
                                    v859 += v965;
                                  }

                                  while (v856 < *v626);
                                }

                                goto LABEL_1251;
                              }

                              if (!v834)
                              {
                                if (*v626)
                                {
                                  v835 = 0;
                                  v836 = v1017;
                                  v837 = v1018;
                                  v838 = &v939[v972 * v988];
                                  do
                                  {
                                    v839 = *(*(&v837 + 1) + v835);
                                    v840 = *(v836 + v835) * v839 + 128;
                                    v841 = *(*(&v836 + 1) + v835) * v839 + 128;
                                    *(v838 - 1) = (77 * ((v840 + (v840 >> 8)) >> 8) + 150 * ((v841 + (v841 >> 8)) >> 8) + 29 * ((*(v837 + v835) * v839 + 128 + ((*(v837 + v835) * v839 + 128) >> 8)) >> 8)) >> 8;
                                    *v838 = -1;
                                    ++v835;
                                    v838 += v965;
                                  }

                                  while (v835 < *v626);
                                }

LABEL_1251:
                                v7 = v1006;
                                goto LABEL_1241;
                              }
                            }

                            if (*v626)
                            {
                              v846 = 0;
                              v847 = v1017;
                              v7 = v1006;
                              do
                              {
                                v25[v972 * v988 + v846] = *(v847 + v846);
                                ++v846;
                              }

                              while (v846 < *v626);
                              goto LABEL_1241;
                            }

                            goto LABEL_1251;
                          }

                          v5 = v992;
                          v829 = v988;
                          if (*v626)
                          {
                            v830 = 0;
                            v831 = v1017;
                            v832 = v1018;
                            v7 = v1006;
                            v803 = v965;
                            v833 = v982;
                            do
                            {
                              v25[v972 * v988 + v830] = (77 * *(v831 + v830) + 150 * *(*(&v831 + 1) + v830) + 29 * *(v832 + v830)) >> 8;
                              ++v830;
                            }

                            while (v830 < *v626);
                            goto LABEL_1241;
                          }

                          v7 = v1006;
                          v803 = v965;
LABEL_1240:
                          v833 = v982;
LABEL_1241:
                          v805 = v833 + 1;
                          v988 = v829 + v803;
                          if (v805 >= v626[1])
                          {
                            goto LABEL_1253;
                          }
                        }

                        v818 = &v25[v976];
                        v819 = v1017;
                        v626 = *v302;
                        v820 = *(*v302 + 8);
                        v9 = v998;
                        if (v820 == 3)
                        {
                          v5 = v992;
                          v803 = v965;
                          if (!v947)
                          {
                            goto LABEL_1237;
                          }

                          if (!*v626)
                          {
                            goto LABEL_1238;
                          }

                          v842 = 0;
                          v843 = *(&v1017 + 1);
                          v844 = v1018;
                          v7 = v1006;
                          do
                          {
                            *v818 = *(v819 + v842);
                            v818[1] = *(v843 + v842);
                            v845 = *(v844 + v842);
                            v818[3] = -1;
                            v818 += 3;
                            *(v818 - 1) = v845;
                            ++v842;
                          }

                          while (v842 < *v626);
                        }

                        else
                        {
                          v5 = v992;
                          v803 = v965;
                          if (v820 == 4)
                          {
                            v821 = *(v302 + 4627);
                            if (v821 != 2)
                            {
                              if (!v821)
                              {
                                if (*v626)
                                {
                                  v822 = 0;
                                  v823 = v1018;
                                  v824 = *(&v1017 + 1);
                                  do
                                  {
                                    v825 = *(*(&v823 + 1) + v822);
                                    v826 = *(v819 + v822) * v825 + 128;
                                    *v818 = (v826 + (v826 >> 8)) >> 8;
                                    v827 = *(v824 + v822) * v825 + 128;
                                    v818[1] = (v827 + (v827 >> 8)) >> 8;
                                    v828 = *(v823 + v822);
                                    v818[3] = -1;
                                    v818 += 3;
                                    *(v818 - 1) = (v828 * v825 + 128 + ((v828 * v825 + 128) >> 8)) >> 8;
                                    ++v822;
                                  }

                                  while (v822 < *v626);
                                }

                                goto LABEL_1238;
                              }

LABEL_1237:
                              (v302[2319])(&v25[v976], v1017, *(&v1017 + 1), v1018, *v626, 3);
                              v626 = *v302;
                              goto LABEL_1238;
                            }

                            (v302[2319])(&v25[v976], v1017, *(&v1017 + 1), v1018, *v626, 3);
                            v626 = *v302;
                            if (**v302)
                            {
                              v851 = 0;
                              v852 = *(&v1018 + 1);
                              do
                              {
                                v853 = *(v852 + v851);
                                v854 = (*v818 ^ 0xFF) * v853 + 128;
                                *v818 = (v854 + (v854 >> 8)) >> 8;
                                v855 = (v818[1] ^ 0xFF) * v853 + 128;
                                v818[1] = (v855 + (v855 >> 8)) >> 8;
                                v818[2] = ((v818[2] ^ 0xFF) * v853 + 128 + (((v818[2] ^ 0xFFu) * v853 + 128) >> 8)) >> 8;
                                v818 += 3;
                                ++v851;
                              }

                              while (v851 < *v626);
                            }
                          }

                          else if (*v626)
                          {
                            v848 = 0;
                            v829 = v988;
                            v849 = &v943[v972 * v988];
                            v7 = v1006;
                            do
                            {
                              v850 = *(v819 + v848);
                              *(v849 - 1) = v850;
                              *(v849 - 2) = v850;
                              *(v849 - 3) = v850;
                              *v849 = -1;
                              v849 += 3;
                              ++v848;
                            }

                            while (v848 < *v626);
                            goto LABEL_1240;
                          }

LABEL_1238:
                          v7 = v1006;
                        }

                        v829 = v988;
                        goto LABEL_1240;
                      }

LABEL_1253:
                      sub_29AB50308(v302, v626[2]);
                      v868 = *v302;
                      *v9 = **v302;
                      *v7 = *(v868 + 4);
                      if (v5)
                      {
                        if (*(v868 + 8) < 3)
                        {
                          v869 = 1;
                        }

                        else
                        {
                          v869 = 3;
                        }

                        *v5 = v869;
                      }
                    }

                    else
                    {
                      sub_29AB50308(v302, v626[2]);
                      *(off_2A1B71BE0)(&off_2A1B71BE0, v870, v871, v872, v873, v874, v875, v876) = "outofmem";
                    }

LABEL_1274:
                    v28 = v302;
                    goto LABEL_12;
                  }

                  v801 = sub_29AB5C92C;
                  goto LABEL_1188;
                }

                break;
              }

              sub_29AB50308(v302, v626[2]);
              v25 = 0;
              *(off_2A1B71BE0)(&off_2A1B71BE0, v861, v862, v863, v864, v865, v866, v867) = "outofmem";
              v5 = v992;
LABEL_1273:
              v7 = v1006;
              goto LABEL_1274;
            }

            v975 = v308;
            v319 = sub_29AB4FF24(*v302);
            v320 = *v302;
            v321 = *(*v302 + 192);
            if (v321 >= *(*v302 + 200))
            {
              if (!*(v320 + 48))
              {
                *(v304 + 533) = 0;
                v309 = "bad SOS component count";
                goto LABEL_1271;
              }

              v323 = (v320 + 56);
              v324 = (*(v320 + 16))(*(v320 + 40), v320 + 56, *(v320 + 52));
              *(v320 + 184) += *(v320 + 192) - *(v320 + 208);
              if (v324)
              {
                v325 = &v323[v324];
                v322 = *v323;
              }

              else
              {
                v322 = 0;
                *(v320 + 48) = 0;
                v325 = (v320 + 57);
                *(v320 + 56) = 0;
              }

              *(v320 + 192) = v320 + 57;
              *(v320 + 200) = v325;
            }

            else
            {
              *(v320 + 192) = v321 + 1;
              v322 = *v321;
            }

            *(v304 + 533) = v322;
            if ((v322 - 5) < 0xFFFFFFFC || (v326 = *v302, *(*v302 + 8) < v322))
            {
LABEL_1271:
              *(off_2A1B71BE0)(&off_2A1B71BE0, v312, v313, v314, v315, v316, v317, v318) = v309;
              goto LABEL_1272;
            }

            if (v319 != 2 * v322 + 6)
            {
              v309 = "bad SOS len";
              goto LABEL_1271;
            }

            v327 = 0;
            do
            {
              v328 = *(v326 + 192);
              v329 = *(v326 + 200);
              if (v328 >= v329)
              {
                if (*(v326 + 48))
                {
                  v331 = (v326 + 56);
                  v332 = (*(v326 + 16))(*(v326 + 40), v326 + 56, *(v326 + 52));
                  *(v326 + 184) += *(v326 + 192) - *(v326 + 208);
                  if (v332)
                  {
                    v333 = &v331[v332];
                    v330 = *v331;
                  }

                  else
                  {
                    v330 = 0;
                    *(v326 + 48) = 0;
                    v333 = (v326 + 57);
                    *(v326 + 56) = 0;
                  }

                  *(v326 + 192) = v326 + 57;
                  *(v326 + 200) = v333;
                  v326 = *v302;
                  v328 = *(*v302 + 192);
                  v329 = *(*v302 + 200);
                }

                else
                {
                  v330 = 0;
                }
              }

              else
              {
                *(v326 + 192) = v328 + 1;
                v330 = *v328++;
              }

              if (v328 >= v329)
              {
                v334 = *(v326 + 48);
                if (v334)
                {
                  v335 = (v326 + 56);
                  v336 = (*(v326 + 16))(*(v326 + 40), v326 + 56, *(v326 + 52));
                  *(v326 + 184) += *(v326 + 192) - *(v326 + 208);
                  if (v336)
                  {
                    v337 = &v335[v336];
                    v334 = *v335;
                  }

                  else
                  {
                    v334 = 0;
                    *(v326 + 48) = 0;
                    v337 = (v326 + 57);
                    *(v326 + 56) = 0;
                  }

                  *(v326 + 192) = v326 + 57;
                  *(v326 + 200) = v337;
                  v326 = *v302;
                }
              }

              else
              {
                *(v326 + 192) = v328 + 1;
                v334 = *v328;
              }

              v338 = *(v326 + 8);
              if (v338 < 1)
              {
                v339 = 0;
              }

              else
              {
                v339 = 0;
                v340 = (v302 + 2260);
                while (1)
                {
                  v341 = *v340;
                  v340 += 24;
                  if (v341 == v330)
                  {
                    break;
                  }

                  if (v338 == ++v339)
                  {
                    goto LABEL_1272;
                  }
                }

                v339 = v339;
              }

              if (v339 == v338)
              {
                goto LABEL_1272;
              }

              v342 = &v305[12 * v339];
              *(v342 + 4) = v334 >> 4;
              if (v334 > 0x3F)
              {
                v309 = "bad DC huff";
                goto LABEL_1271;
              }

              v343 = v334 & 0xF;
              *(v342 + 5) = v343;
              if (v343 > 3)
              {
                v309 = "bad AC huff";
                goto LABEL_1271;
              }

              v1012[v327++] = v339;
            }

            while (v327 < *(v302 + 4629));
            v344 = *(v326 + 192);
            v345 = *(v326 + 200);
            if (v344 >= v345)
            {
              v346 = *(v326 + 48);
              v309 = "bad SOS";
              if (v346)
              {
                v347 = (v326 + 56);
                v348 = (*(v326 + 16))(*(v326 + 40), v326 + 56, *(v326 + 52));
                *(v326 + 184) += *(v326 + 192) - *(v326 + 208);
                if (v348)
                {
                  v349 = &v347[v348];
                  v346 = *v347;
                }

                else
                {
                  v346 = 0;
                  *(v326 + 48) = 0;
                  v349 = (v326 + 57);
                  *(v326 + 56) = 0;
                }

                *(v326 + 192) = v326 + 57;
                *(v326 + 200) = v349;
                v326 = *v302;
                v344 = *(*v302 + 192);
                v345 = *(*v302 + 200);
              }
            }

            else
            {
              *(v326 + 192) = v344 + 1;
              v346 = *v344++;
              v309 = "bad SOS";
            }

            *(v302 + 4621) = v346;
            if (v344 >= v345)
            {
              v350 = *(v326 + 48);
              if (v350)
              {
                v351 = (v326 + 56);
                v352 = (*(v326 + 16))(*(v326 + 40), v326 + 56, *(v326 + 52));
                *(v326 + 184) += *(v326 + 192) - *(v326 + 208);
                if (v352)
                {
                  v353 = &v351[v352];
                  v350 = *v351;
                }

                else
                {
                  v350 = 0;
                  *(v326 + 48) = 0;
                  v353 = (v326 + 57);
                  *(v326 + 56) = 0;
                }

                *(v326 + 192) = v326 + 57;
                *(v326 + 200) = v353;
                v326 = *v302;
                v344 = *(*v302 + 192);
                v345 = *(*v302 + 200);
              }
            }

            else
            {
              *(v326 + 192) = v344 + 1;
              v350 = *v344++;
            }

            *(v302 + 4622) = v350;
            if (v344 >= v345)
            {
              v354 = *(v326 + 48);
              if (v354)
              {
                v355 = (v326 + 56);
                v356 = (*(v326 + 16))(*(v326 + 40), v326 + 56, *(v326 + 52));
                *(v326 + 184) += *(v326 + 192) - *(v326 + 208);
                if (v356)
                {
                  v357 = &v355[v356];
                  v354 = *v355;
                }

                else
                {
                  v354 = 0;
                  *(v326 + 48) = 0;
                  v357 = (v326 + 57);
                  *(v326 + 56) = 0;
                }

                *(v326 + 192) = v326 + 57;
                *(v326 + 200) = v357;
              }
            }

            else
            {
              *(v326 + 192) = v344 + 1;
              v354 = *v344;
            }

            *(v302 + 4623) = v354 >> 4;
            *(v302 + 4624) = v354 & 0xF;
            v358 = *(v302 + 4620);
            v359 = *(v302 + 4621);
            if (v358)
            {
              if (v359 > 63)
              {
                goto LABEL_1271;
              }

              v360 = *(v302 + 4622);
              if (v360 > 63 || v359 > v360 || v354 > 0xDF || (v354 & 0xF) > 0xD)
              {
                goto LABEL_1271;
              }
            }

            else
            {
              if (v359 || v354 > 0xF || (v354 & 0xF) != 0)
              {
                goto LABEL_1271;
              }

              *(v302 + 4622) = 63;
            }

            v302[2308] = 0;
            *(v302 + 4619) = 0;
            *(v302 + 4598) = 0;
            *(v302 + 4574) = 0;
            *(v302 + 4550) = 0;
            *(v302 + 4526) = 0;
            *(v302 + 18472) = -1;
            v361 = *(v302 + 4634);
            if (!v361)
            {
              v361 = 0x7FFFFFFF;
            }

            *(v302 + 4635) = v361;
            *(v302 + 4625) = 0;
            v362 = *(v302 + 4629);
            if (v358)
            {
              if (v362 != 1)
              {
                v444 = *(v302 + 4517);
                if (v444 < 1)
                {
                  goto LABEL_642;
                }

                v445 = 0;
                v446 = *(v302 + 4516);
                while (1)
                {
                  if (v446 >= 1)
                  {
                    v447 = 0;
                    v448 = v302 + 2048;
                    do
                    {
                      v449 = v448[533];
                      if (v449 >= 1)
                      {
                        for (m = 0; m < v449; ++m)
                        {
                          v451 = v1012[m];
                          v452 = &v305[12 * v451];
                          v453 = *(v452 + 2);
                          if (v453 >= 1)
                          {
                            v970 = m;
                            v454 = 0;
                            v455 = *(v452 + 1);
                            do
                            {
                              if (v455 >= 1)
                              {
                                for (n = 0; n < v455; ++n)
                                {
                                  if (!sub_29AB5D200(v302, &v452[10][32 * (n + *(v452 + 22) * (v454 + v445 * *(v452 + 2)) + v447 * v455)], &v303[1680 * *(v452 + 4)], v451, v315, v316, v317, v318))
                                  {
                                    goto LABEL_1272;
                                  }

                                  v455 = *(v452 + 1);
                                }

                                v453 = *(v452 + 2);
                              }

                              ++v454;
                            }

                            while (v454 < v453);
                            v449 = *(v302 + 4629);
                            m = v970;
                          }
                        }

                        v448 = v302 + 2048;
                        v361 = *(v302 + 4635);
                      }

                      v267 = __OFSUB__(v361--, 1);
                      v448[539] = v361;
                      if ((v361 < 0) ^ v267 | (v361 == 0))
                      {
                        if (v448[521] <= 23)
                        {
                          sub_29AB5D044(v302);
                        }

                        v432 = *(v302 + 18472);
                        if ((v432 & 0xF8) != 0xD0)
                        {
                          v304 = (v302 + 2048);
LABEL_643:
                          v309 = "bad SOS component count";
                          v308 = v975;
                          if (v432 != 255)
                          {
                            goto LABEL_671;
                          }

                          while (2)
                          {
                            v469 = *v302;
                            if (!*(*v302 + 16))
                            {
                              goto LABEL_647;
                            }

                            if ((*(v469 + 32))(*(v469 + 40)))
                            {
                              if (*(v469 + 48))
                              {
LABEL_647:
                                if (*(v469 + 192) < *(v469 + 200))
                                {
                                  goto LABEL_648;
                                }
                              }

LABEL_669:
                              LOBYTE(v472) = -1;
LABEL_670:
                              *(v304 + 2088) = v472;
                              v308 = v975;
LABEL_671:
                              v306 = sub_29AB4ED4C(v302);
                              if ((v306 & 0xF8) == 0xD0)
                              {
LABEL_368:
                                v306 = sub_29AB4ED4C(v302);
                              }

                              goto LABEL_361;
                            }

LABEL_648:
                            v470 = *v302;
                            v471 = *(*v302 + 192);
                            if (v471 >= *(*v302 + 200))
                            {
                              v472 = *(v470 + 48);
                              if (v472)
                              {
                                v473 = (v470 + 56);
                                v474 = (*(v470 + 16))(*(v470 + 40), v470 + 56, *(v470 + 52));
                                *(v470 + 184) += *(v470 + 192) - *(v470 + 208);
                                if (v474)
                                {
                                  v475 = &v473[v474];
                                  v472 = *v473;
                                }

                                else
                                {
                                  v472 = 0;
                                  *(v470 + 48) = 0;
                                  v475 = (v470 + 57);
                                  *(v470 + 56) = 0;
                                }

                                *(v470 + 192) = v470 + 57;
                                *(v470 + 200) = v475;
                                v304 = (v302 + 2048);
                                v309 = "bad SOS component count";
                              }
                            }

                            else
                            {
                              *(v470 + 192) = v471 + 1;
                              v472 = *v471;
                            }

LABEL_655:
                            if (v472 != 255)
                            {
                              continue;
                            }

                            break;
                          }

                          v476 = *v302;
                          if (*(*v302 + 16))
                          {
                            if ((*(v476 + 32))(*(v476 + 40)))
                            {
                              if (!*(v476 + 48))
                              {
                                goto LABEL_669;
                              }

                              goto LABEL_659;
                            }
                          }

                          else
                          {
LABEL_659:
                            if (*(v476 + 192) >= *(v476 + 200))
                            {
                              goto LABEL_669;
                            }
                          }

                          v477 = *v302;
                          v478 = *(*v302 + 192);
                          if (v478 >= *(*v302 + 200))
                          {
                            v472 = *(v477 + 48);
                            if (v472)
                            {
                              v479 = (v477 + 56);
                              v480 = (*(v477 + 16))(*(v477 + 40), v477 + 56, *(v477 + 52));
                              *(v477 + 184) += *(v477 + 192) - *(v477 + 208);
                              if (v480)
                              {
                                v481 = &v479[v480];
                                v472 = *v479;
                              }

                              else
                              {
                                v472 = 0;
                                *(v477 + 48) = 0;
                                v481 = (v477 + 57);
                                *(v477 + 56) = 0;
                              }

                              *(v477 + 192) = v477 + 57;
                              *(v477 + 200) = v481;
                            }
                          }

                          else
                          {
                            *(v477 + 192) = v478 + 1;
                            v472 = *v478;
                          }

                          if ((v472 - 1) <= 0xFD)
                          {
                            goto LABEL_670;
                          }

                          goto LABEL_655;
                        }

                        v448 = v302 + 2048;
                        v302[2308] = 0;
                        *(v302 + 4619) = 0;
                        *(v302 + 4598) = 0;
                        *(v302 + 4574) = 0;
                        *(v302 + 4550) = 0;
                        *(v302 + 4526) = 0;
                        *(v302 + 18472) = -1;
                        v361 = *(v302 + 4634);
                        if (!v361)
                        {
                          v361 = 0x7FFFFFFF;
                        }

                        *(v302 + 4635) = v361;
                        *(v302 + 4625) = 0;
                      }

                      ++v447;
                      v446 = v448[420];
                    }

                    while (v447 < v446);
                    v444 = v448[421];
                  }

                  if (++v445 >= v444)
                  {
LABEL_642:
                    v304 = (v302 + 2048);
                    v432 = *(v302 + 18472);
                    goto LABEL_643;
                  }
                }
              }

              v930 = *v1012;
              v953 = &v305[12 * v930];
              v927 = (*(v953 + 8) + 7) >> 3;
              if (v927 < 1)
              {
                goto LABEL_642;
              }

              v944 = 0;
              v937 = (*(v953 + 7) + 7) >> 3;
LABEL_444:
              v304 = (v302 + 2048);
              v363 = &v305[12 * v930];
              if (v937 < 1)
              {
                goto LABEL_562;
              }

              v364 = 0;
LABEL_446:
              v365 = &v363[10][32 * (v364 + *(v363 + 22) * v944)];
              LODWORD(v366) = *(v304 + 525);
              v961 = v364;
              if (!v366)
              {
                if (sub_29AB5D200(v302, v365, &v303[1680 * *(v363 + 4)], v930, v315, v316, v317, v318))
                {
                  goto LABEL_545;
                }

                goto LABEL_1272;
              }

              v367 = *(v363 + 5);
              v967 = &v986[210 * v367];
              v368 = *(v304 + 528);
              v369 = *(v304 + 529);
              if (!*(v304 + 527))
              {
                if (v369)
                {
LABEL_464:
                  *(v304 + 529) = v369 - 1;
                  goto LABEL_545;
                }

                v404 = *(v304 + 521);
                v934 = &v975[1680 * v367];
                v405 = &v980[128 * v367];
                while (1)
                {
                  if (v404 <= 15)
                  {
                    sub_29AB5D044(v302);
                  }

                  v406 = (v302 + 2048);
                  v407 = *(v302 + 4616);
                  v408 = v407 >> 23;
                  v409 = *(v405 + (v407 >> 23));
                  if (*(v405 + (v407 >> 23)))
                  {
                    v410 = *(v302 + 4617);
                    v267 = __OFSUB__(v410, v409 & 0xF);
                    v404 = v410 - (v409 & 0xF);
                    if (v404 < 0 != v267)
                    {
                      goto LABEL_1270;
                    }

                    v411 = (v409 >> 4) + v366;
                    *(v302 + 4616) = v407 << (v409 & 0xF);
                    *(v302 + 4617) = v404;
                    LODWORD(v366) = v411 + 1;
                    *(v365 + byte_29B6C3784[v411]) = v409 >> 8 << v368;
                  }

                  else
                  {
                    if (*(v302 + 4617) <= 15)
                    {
                      sub_29AB5D044(v302);
                      v407 = *(v302 + 4616);
                      v408 = v407 >> 23;
                    }

                    v412 = *(v967 + v408);
                    if (v412 == 255)
                    {
                      v415 = 0;
                      v416 = v934;
                      do
                      {
                        v417 = *v416++;
                        ++v415;
                      }

                      while (WORD1(v407) >= v417);
                      v418 = *(v302 + 4617);
                      if (v415 == 8)
                      {
                        *(v302 + 4617) = v418 - 16;
LABEL_1270:
                        v309 = "bad huffman code";
                        goto LABEL_1271;
                      }

                      v419 = v415 + 9;
                      if (v418 < v415 + 9)
                      {
                        goto LABEL_1270;
                      }

                      v412 = (dword_29B6C3BF4[v415 + 9] & (v407 >> (23 - v415))) + v416[17];
                      if (v412 > 0xFF)
                      {
                        goto LABEL_1270;
                      }

                      v404 = v418 - v415 - 9;
                      *(v302 + 4617) = v404;
                      *(v302 + 4616) = v407 << v419;
                    }

                    else
                    {
                      v413 = *(v967 + v412 + 1280);
                      v414 = *(v302 + 4617);
                      v267 = __OFSUB__(v414, v413);
                      v404 = v414 - v413;
                      if (v404 < 0 != v267)
                      {
                        goto LABEL_1270;
                      }

                      *(v302 + 4616) = v407 << v413;
                      *(v302 + 4617) = v404;
                    }

                    v420 = *(v967 + v412 + 1024);
                    v421 = v420 >> 4;
                    v422 = v420 & 0xF;
                    if ((v420 & 0xF) != 0)
                    {
                      v366 = v421 + v366;
                      v423 = byte_29B6C3784[v366];
                      if (v404 < v422)
                      {
                        sub_29AB5D044(v302);
                        v404 = *(v302 + 4617);
                      }

                      v424 = v404 - v422;
                      if (v404 >= v422)
                      {
                        v426 = *(v302 + 4616);
                        v427 = __ROR4__(v426, -v422);
                        v428 = dword_29B6C3BF4[v422];
                        *(v302 + 4616) = v427 & ~v428;
                        v429 = v427 & v428;
                        *(v302 + 4617) = v424;
                        if (v426 >= 0)
                        {
                          v430 = dword_29B6C3C38[v422];
                        }

                        else
                        {
                          v430 = 0;
                        }

                        v425 = v430 + v429;
                        v404 = v424;
                      }

                      else
                      {
                        v425 = 0;
                      }

                      LODWORD(v366) = v366 + 1;
                      *(v365 + v423) = v425 << v368;
                    }

                    else
                    {
                      if (v420 <= 0xEF)
                      {
                        v369 = 1 << v421;
                        v304 = (v302 + 2048);
                        *(v302 + 4625) = 1 << v421;
                        if (v420 >= 0x10)
                        {
                          if (v404 < v421)
                          {
                            sub_29AB5D044(v302);
                            v404 = *(v302 + 4617);
                          }

                          v267 = __OFSUB__(v404, v421);
                          v434 = v404 - v421;
                          if (v434 < 0 != v267)
                          {
                            v437 = 0;
                          }

                          else
                          {
                            v435 = __ROR4__(*(v302 + 4616), -v421);
                            v436 = dword_29B6C3BF4[v421];
                            *(v302 + 4616) = v435 & ~v436;
                            v437 = v435 & v436;
                            *(v302 + 4617) = v434;
                          }

                          v304 = (v302 + 2048);
                          v369 = *(v302 + 4625) + v437;
                        }

                        goto LABEL_464;
                      }

                      LODWORD(v366) = v366 + 16;
                    }

                    v406 = (v302 + 2048);
                  }

                  if (v366 > *(v406 + 526))
                  {
                    goto LABEL_545;
                  }
                }
              }

              if (v369)
              {
                *(v304 + 529) = v369 - 1;
                if (v366 <= *(v304 + 526))
                {
                  v370 = v366;
                  v371 = 0x10000 << v368;
                  v372 = 0x10000 << v368 >> 16;
                  v968 = HIWORD(v371);
                  v373 = -(v371 >> 16);
                  do
                  {
                    v374 = byte_29B6C3784[v370];
                    if (*(v365 + v374))
                    {
                      v375 = *(v302 + 4617);
                      if (v375 > 0 || (sub_29AB5D044(v302), v375 = *(v302 + 4617), v375 >= 1))
                      {
                        v376 = *(v302 + 4616);
                        *(v302 + 4616) = 2 * v376;
                        *(v302 + 4617) = v375 - 1;
                        if (v376 < 0)
                        {
                          v377 = *(v365 + v374);
                          if ((v372 & v377) == 0)
                          {
                            v378 = v968;
                            if (v377 <= 0)
                            {
                              v378 = v373;
                            }

                            *(v365 + v374) = v378 + v377;
                          }
                        }
                      }
                    }
                  }

                  while (v370++ < *(v302 + 4622));
                }

                goto LABEL_545;
              }

              v380 = 0x10000 << v368 >> 16;
              v940 = 0x10000 << v368;
              v381 = *(v304 + 521);
              v932 = &v975[1680 * v367];
LABEL_466:
              if (v381 <= 15)
              {
                sub_29AB5D044(v302);
              }

              v382 = *(v302 + 4616);
              v383 = *(v967 + (v382 >> 23));
              if (v383 == 255)
              {
                v387 = 0;
                v388 = v932;
                do
                {
                  v389 = *v388++;
                  ++v387;
                }

                while (WORD1(v382) >= v389);
                v390 = *(v302 + 4617);
                if (v387 == 8)
                {
                  *(v302 + 4617) = v390 - 16;
                  goto LABEL_1270;
                }

                v391 = v387 + 9;
                if (v390 < v387 + 9)
                {
                  goto LABEL_1270;
                }

                v383 = (dword_29B6C3BF4[v387 + 9] & (v382 >> (23 - v387))) + v388[17];
                if (v383 > 0xFF)
                {
                  goto LABEL_1270;
                }

                v381 = v390 - v387 - 9;
                *(v302 + 4617) = v381;
                v386 = v382 << v391;
                *(v302 + 4616) = v386;
              }

              else
              {
                v384 = *(v967 + v383 + 1280);
                v385 = *(v302 + 4617);
                v267 = __OFSUB__(v385, v384);
                v381 = v385 - v384;
                if (v381 < 0 != v267)
                {
                  goto LABEL_1270;
                }

                v386 = v382 << v384;
                *(v302 + 4616) = v386;
                *(v302 + 4617) = v381;
              }

              v392 = *(v967 + v383 + 1024);
              v393 = v392 >> 4;
              if ((v392 & 0xF) != 1)
              {
                if ((v392 & 0xF) != 0)
                {
                  goto LABEL_1270;
                }

                if (v392 > 0xEF)
                {
                  v394 = 0;
                  LODWORD(v393) = 15;
                }

                else
                {
                  *(v302 + 4625) = ~(-1 << v393);
                  if (v392 >= 0x10)
                  {
                    if (v381 < v393)
                    {
                      sub_29AB5D044(v302);
                      v381 = *(v302 + 4617);
                    }

                    v395 = v381 - v393;
                    if (v381 >= v393)
                    {
                      v397 = dword_29B6C3BF4[v393];
                      v398 = __ROR4__(*(v302 + 4616), -v393);
                      *(v302 + 4616) = v398 & ~v397;
                      v396 = v398 & v397;
                      *(v302 + 4617) = v395;
                      v381 = v395;
                    }

                    else
                    {
                      v396 = 0;
                    }

                    v394 = 0;
                    *(v302 + 4625) += v396;
                  }

                  else
                  {
                    v394 = 0;
                  }

                  LODWORD(v393) = 64;
                }

                goto LABEL_496;
              }

              if (v381 > 0)
              {
LABEL_485:
                *(v302 + 4616) = 2 * v386;
                *(v302 + 4617) = --v381;
                if ((v386 & 0x80000000) == 0)
                {
                  goto LABEL_486;
                }

                v394 = v380;
              }

              else
              {
                sub_29AB5D044(v302);
                v381 = *(v302 + 4617);
                if (v381 >= 1)
                {
                  v386 = *(v302 + 4616);
                  goto LABEL_485;
                }

LABEL_486:
                v394 = -v380;
              }

LABEL_496:
              LODWORD(v399) = *(v302 + 4622);
              if (v366 > v399)
              {
                goto LABEL_512;
              }

              v366 = v366;
              while (1)
              {
                v400 = byte_29B6C3784[v366];
                if (*(v365 + v400))
                {
                  if (v381 > 0 || (sub_29AB5D044(v302), v381 = *(v302 + 4617), v381 >= 1))
                  {
                    v401 = *(v302 + 4616);
                    *(v302 + 4616) = 2 * v401;
                    *(v302 + 4617) = --v381;
                    if (v401 < 0)
                    {
                      v402 = *(v365 + v400);
                      if ((v380 & v402) == 0)
                      {
                        if (v402 < 1)
                        {
                          v403 = v402 - HIWORD(v940);
                        }

                        else
                        {
                          v403 = v402 + HIWORD(v940);
                        }

                        *(v365 + v400) = v403;
                      }
                    }
                  }
                }

                else
                {
                  if (!v393)
                  {
                    LODWORD(v366) = v366 + 1;
                    *(v365 + v400) = v394;
LABEL_512:
                    if (v366 > v399)
                    {
LABEL_545:
                      v304 = (v302 + 2048);
                      v431 = *(v302 + 4635);
                      v267 = __OFSUB__(v431--, 1);
                      *(v302 + 4635) = v431;
                      if (!((v431 < 0) ^ v267 | (v431 == 0)))
                      {
                        goto LABEL_553;
                      }

                      if (*(v302 + 4617) <= 23)
                      {
                        sub_29AB5D044(v302);
                      }

                      v432 = *(v302 + 18472);
                      if ((v432 & 0xF8) != 0xD0)
                      {
                        goto LABEL_643;
                      }

                      v302[2308] = 0;
                      *(v302 + 4619) = 0;
                      *(v302 + 4598) = 0;
                      *(v302 + 4574) = 0;
                      *(v302 + 4550) = 0;
                      *(v302 + 4526) = 0;
                      *(v302 + 18472) = -1;
                      v433 = *(v302 + 4634);
                      if (!v433)
                      {
                        v433 = 0x7FFFFFFF;
                      }

                      *(v302 + 4635) = v433;
                      *(v302 + 4625) = 0;
LABEL_553:
                      v364 = v961 + 1;
                      v363 = &v305[12 * v930];
                      if (v961 + 1 == v937)
                      {
LABEL_562:
                        if (++v944 == v927)
                        {
                          goto LABEL_642;
                        }

                        goto LABEL_444;
                      }

                      goto LABEL_446;
                    }

                    goto LABEL_466;
                  }

                  LODWORD(v393) = v393 - 1;
                }

                ++v366;
                v399 = *(v302 + 4622);
                if (v366 - 1 >= v399)
                {
                  goto LABEL_512;
                }
              }
            }

            if (v362 == 1)
            {
              v438 = *v1012;
              v439 = &v305[12 * v438];
              v954 = (*(v439 + 8) + 7) >> 3;
              if (v954 >= 1)
              {
                v440 = 0;
                v969 = 0;
                v962 = (*(v439 + 7) + 7) >> 3;
                while (v962 < 1)
                {
LABEL_579:
                  v440 += 8;
                  if (++v969 == v954)
                  {
                    goto LABEL_640;
                  }
                }

                v441 = 0;
                while (sub_29AB5CB90(v302, &v1020, &v303[1680 * *(v439 + 4)], &v986[210 * *(v439 + 5)], &v980[128 * *(v439 + 5)], v438, &v307[16 * *(v439 + 3)], v318))
                {
                  (v302[2318])(v439[6] + v440 * *(v439 + 9) + v441);
                  v442 = *(v302 + 4635);
                  v267 = __OFSUB__(v442--, 1);
                  *(v302 + 4635) = v442;
                  if ((v442 < 0) ^ v267 | (v442 == 0))
                  {
                    if (*(v302 + 4617) <= 23)
                    {
                      sub_29AB5D044(v302);
                    }

                    if ((v302[2309] & 0xF8) != 0xD0)
                    {
                      goto LABEL_640;
                    }

                    v302[2308] = 0;
                    *(v302 + 4619) = 0;
                    *(v302 + 4598) = 0;
                    *(v302 + 4574) = 0;
                    *(v302 + 4550) = 0;
                    *(v302 + 4526) = 0;
                    *(v302 + 18472) = -1;
                    v443 = *(v302 + 4634);
                    if (!v443)
                    {
                      v443 = 0x7FFFFFFF;
                    }

                    *(v302 + 4635) = v443;
                    *(v302 + 4625) = 0;
                  }

                  v441 += 8;
                  if (8 * v962 == v441)
                  {
                    goto LABEL_579;
                  }
                }

LABEL_639:
                v468 = 0;
                goto LABEL_641;
              }
            }

            else
            {
              v457 = *(v302 + 4517);
              if (v457 >= 1)
              {
                v971 = 0;
                v458 = *(v302 + 4516);
                do
                {
                  if (v458 >= 1)
                  {
                    for (ii = 0; ii < v458; ++ii)
                    {
                      v459 = *(v302 + 4629);
                      if (v459 >= 1)
                      {
                        for (jj = 0; jj < v459; ++jj)
                        {
                          v461 = v1012[jj];
                          v462 = &v305[12 * v461];
                          v463 = *(v462 + 2);
                          if (v463 >= 1)
                          {
                            v955 = jj;
                            v464 = 0;
                            v465 = *(v462 + 1);
                            do
                            {
                              if (v465 >= 1)
                              {
                                for (kk = 0; kk < v465; ++kk)
                                {
                                  v467 = *(v462 + 2);
                                  if (!sub_29AB5CB90(v302, &v1020, &v303[1680 * *(v462 + 4)], &v986[210 * *(v462 + 5)], &v980[128 * *(v462 + 5)], v461, &v307[16 * *(v462 + 3)], v318))
                                  {
                                    goto LABEL_639;
                                  }

                                  (v302[2318])(&v462[6][2 * (v464 + v467 * v971) * *(v462 + 9) + 2 * kk + 2 * ii * v465]);
                                  v465 = *(v462 + 1);
                                }

                                v463 = *(v462 + 2);
                              }

                              ++v464;
                            }

                            while (v464 < v463);
                            v459 = *(v302 + 4629);
                            jj = v955;
                          }
                        }

                        v361 = *(v302 + 4635);
                      }

                      v267 = __OFSUB__(v361--, 1);
                      *(v302 + 4635) = v361;
                      if ((v361 < 0) ^ v267 | (v361 == 0))
                      {
                        if (*(v302 + 4617) <= 23)
                        {
                          sub_29AB5D044(v302);
                        }

                        if ((v302[2309] & 0xF8) != 0xD0)
                        {
                          goto LABEL_640;
                        }

                        v302[2308] = 0;
                        *(v302 + 4619) = 0;
                        *(v302 + 4598) = 0;
                        *(v302 + 4574) = 0;
                        *(v302 + 4550) = 0;
                        *(v302 + 4526) = 0;
                        *(v302 + 18472) = -1;
                        v361 = *(v302 + 4634);
                        if (!v361)
                        {
                          v361 = 0x7FFFFFFF;
                        }

                        *(v302 + 4635) = v361;
                        *(v302 + 4625) = 0;
                      }

                      v458 = *(v302 + 4516);
                    }

                    v457 = *(v302 + 4517);
                  }

                  v468 = 1;
                  ++v971;
                }

                while (v971 < v457);
                goto LABEL_641;
              }
            }

LABEL_640:
            v468 = 1;
LABEL_641:
            if (v468)
            {
              goto LABEL_642;
            }

LABEL_1272:
            sub_29AB50308(v302, *(*v302 + 8));
            v25 = 0;
            v5 = v992;
            v9 = v998;
            goto LABEL_1273;
          }

          *(off_2A1B71BE0)(&off_2A1B71BE0, v294, v295, v296, v297, v298, v299, v300) = "no SOI";
          v203 = *(v10 + 208);
          v204 = *(v10 + 216);
          *(v10 + 192) = v203;
          *(v10 + 200) = v204;
          free(v292);
        }

        else
        {
          *(off_2A1B71BE0)(&off_2A1B71BE0, v285, v286, v287, v288, v289, v290, v291) = "outofmem";
        }

        if (v203 >= v204)
        {
          if (*(v10 + 48))
          {
            v484 = (v10 + 56);
            v485 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
            v203 = *(v10 + 208);
            *(v10 + 184) += *(v10 + 192) - v203;
            if (v485)
            {
              v204 = &v484[v485];
              v483 = *v484;
            }

            else
            {
              v483 = 0;
              *(v10 + 48) = 0;
              v204 = (v10 + 57);
              *(v10 + 56) = 0;
            }

            v482 = (v10 + 57);
            *(v10 + 192) = v10 + 57;
            *(v10 + 200) = v204;
          }

          else
          {
            v483 = 0;
            v482 = v203;
          }
        }

        else
        {
          v482 = v203 + 1;
          *(v10 + 192) = v203 + 1;
          v483 = *v203;
        }

        if (v482 < v204)
        {
          *(v10 + 192) = v482 + 1;
          v502 = *v482;
          goto LABEL_700;
        }

        if (!*(v10 + 48))
        {
          goto LABEL_703;
        }

        v503 = (v10 + 56);
        v504 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
        v203 = *(v10 + 208);
        *(v10 + 184) += *(v10 + 192) - v203;
        if (v504)
        {
          v505 = &v503[v504];
          v502 = *v503;
        }

        else
        {
          v502 = 0;
          *(v10 + 48) = 0;
          v505 = (v10 + 57);
          *(v10 + 56) = 0;
        }

        *(v10 + 192) = v10 + 57;
        *(v10 + 200) = v505;
LABEL_700:
        if (v483 == 80 && (v502 - 55) >= 0xFFFFFFFE)
        {
          v506 = sub_29AB5ACD8(v10, v9, v7, v5, &v1015);
        }

        else
        {
LABEL_703:
          v507 = *(v10 + 216);
          *(v10 + 192) = v203;
          *(v10 + 200) = v507;
          sub_29AB54574(v10);
          if (v508)
          {
            v509 = sub_29AB54900(v10, v9, v7, v5);
            v506 = sub_29AB5AE1C(v509, *v9, *v7, *v5);
          }

          else
          {
            sub_29AB5AFD4(v10);
            if (!v517)
            {
              v46 = off_2A1B71BE0(&off_2A1B71BE0, v510, v511, v512, v513, v514, v515, v516, v921);
              v29 = 0;
              v283 = "unknown image type";
              goto LABEL_782;
            }

            v506 = sub_29AB5B3C8(v10, v9, v7, v5);
          }
        }

        v25 = v506;
        goto LABEL_13;
      }
    }

    ++v199;
LABEL_211:
    *(v10 + 192) = v199;
    goto LABEL_212;
  }

  v131 = v7;
  bzero(&v1020, 0x8870uLL);
  v990 = v5;
  if (!sub_29AB53344(v10, &v1020, v5, 0, v132, v133, v134, v135))
  {
    goto LABEL_913;
  }

  v997 = v9;
  v136 = v1020;
  v137 = DWORD1(v1020);
  if (!sub_29AB50270(4, v1020, DWORD1(v1020), 0))
  {
    v151 = "too large";
    goto LABEL_912;
  }

  v145 = 4 * v137 * v136;
  v146 = malloc(v145);
  *(&v1020 + 1) = v146;
  v147 = malloc(v145);
  v1021 = v147;
  v148 = v137 * v136;
  v149 = malloc(v148);
  v1022 = v149;
  if (!v146)
  {
    v151 = "outofmem";
    goto LABEL_912;
  }

  v150 = v136;
  v151 = "outofmem";
  if (!v147 || (v152 = v149) == 0)
  {
LABEL_912:
    *(off_2A1B71BE0)(&off_2A1B71BE0, v138, v139, v140, v141, v142, v143, v144) = v151;
    v9 = v997;
    goto LABEL_913;
  }

  bzero(v146, v145);
  bzero(v147, v145);
  v1010 = v1025;
  bzero(v152, v148);
  v153 = (v10 + 56);
  v154 = v10 + 57;
  v151 = "unknown code";
LABEL_131:
  v9 = v997;
  while (1)
  {
    v156 = *(v10 + 192);
    v155 = *(v10 + 200);
    if (v156 >= v155)
    {
      if (!*(v10 + 48))
      {
        goto LABEL_912;
      }

      v159 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
      if (v159)
      {
        v155 = &v153[v159];
        v158 = *v153;
      }

      else
      {
        v158 = 0;
        *(v10 + 48) = 0;
        *(v10 + 56) = 0;
        v155 = (v10 + 57);
      }

      *(v10 + 192) = v154;
      *(v10 + 200) = v155;
      v157 = (v10 + 57);
    }

    else
    {
      v157 = v156 + 1;
      *(v10 + 192) = v156 + 1;
      v158 = *v156;
    }

    if (v158 != 33)
    {
      break;
    }

    if (v157 >= v155)
    {
      if (!*(v10 + 48))
      {
        goto LABEL_185;
      }

      v162 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
      if (v162)
      {
        v155 = &v153[v162];
        v161 = *v153;
      }

      else
      {
        v161 = 0;
        *(v10 + 48) = 0;
        *(v10 + 56) = 0;
        v155 = (v10 + 57);
      }

      *(v10 + 192) = v154;
      *(v10 + 200) = v155;
      v160 = (v10 + 57);
    }

    else
    {
      v160 = v157 + 1;
      *(v10 + 192) = v157 + 1;
      v161 = *v157;
    }

    if (v161 != 249)
    {
      while (1)
      {
LABEL_185:
        v174 = *(v10 + 192);
        if (v174 >= *(v10 + 200))
        {
          if (!*(v10 + 48))
          {
            goto LABEL_131;
          }

          v175 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
          *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
          if (v175)
          {
            v176 = &v153[v175];
            v138 = *v153;
          }

          else
          {
            v138 = 0;
            *(v10 + 48) = 0;
            *(v10 + 56) = 0;
            v176 = (v10 + 57);
          }

          *(v10 + 192) = v154;
          *(v10 + 200) = v176;
        }

        else
        {
          *(v10 + 192) = v174 + 1;
          v138 = *v174;
        }

        if (!v138)
        {
          goto LABEL_131;
        }

        sub_29AB50224(v10, v138);
      }
    }

    if (v160 >= v155)
    {
      if (!*(v10 + 48))
      {
        v164 = 0;
        goto LABEL_157;
      }

      v165 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
      *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
      if (v165)
      {
        v155 = &v153[v165];
        v164 = *v153;
      }

      else
      {
        v164 = 0;
        *(v10 + 48) = 0;
        *(v10 + 56) = 0;
        v155 = (v10 + 57);
      }

      *(v10 + 192) = v154;
      *(v10 + 200) = v155;
      v163 = (v10 + 57);
    }

    else
    {
      v163 = v160 + 1;
      *(v10 + 192) = v160 + 1;
      v164 = *v160;
    }

    if (v164 == 4)
    {
      if (v163 >= v155)
      {
        if (*(v10 + 48))
        {
          v167 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
          *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
          if (v167)
          {
            v168 = &v153[v167];
            v166 = *v153;
          }

          else
          {
            v166 = 0;
            *(v10 + 48) = 0;
            *(v10 + 56) = 0;
            v168 = (v10 + 57);
          }

          *(v10 + 192) = v154;
          *(v10 + 200) = v168;
        }

        else
        {
          v166 = 0;
        }
      }

      else
      {
        *(v10 + 192) = v163 + 1;
        v166 = *v163;
      }

      v1026 = v166;
      v1041 = 10 * sub_29AB538DC(v10);
      if ((v1010 & 0x80000000) == 0)
      {
        HIBYTE(v1027[v1010]) = -1;
      }

      if (v166)
      {
        v171 = *(v10 + 192);
        if (v171 >= *(v10 + 200))
        {
          if (*(v10 + 48))
          {
            v172 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
            *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
            if (v172)
            {
              v173 = &v153[v172];
              v1010 = *v153;
            }

            else
            {
              v1010 = 0;
              *(v10 + 48) = 0;
              *(v10 + 56) = 0;
              v173 = (v10 + 57);
            }

            *(v10 + 192) = v154;
            *(v10 + 200) = v173;
          }

          else
          {
            v1010 = 0;
          }
        }

        else
        {
          *(v10 + 192) = v171 + 1;
          v1010 = *v171;
        }

        v1025 = v1010;
        HIBYTE(v1027[v1010]) = 0;
        goto LABEL_185;
      }

      if (*(v10 + 16))
      {
        v169 = *(v10 + 192);
        v170 = *(v10 + 200);
        if (v170 - v169 <= 0)
        {
          *(v10 + 192) = v170;
          (*(v10 + 24))(*(v10 + 40), (1 - (v170 - v169)));
LABEL_179:
          v1010 = -1;
          v1025 = -1;
          goto LABEL_185;
        }
      }

      else
      {
        v169 = *(v10 + 192);
      }

      *(v10 + 192) = v169 + 1;
      goto LABEL_179;
    }

LABEL_157:
    sub_29AB50224(v10, v164);
  }

  if (v158 == 59)
  {
    goto LABEL_913;
  }

  if (v158 != 44)
  {
    goto LABEL_912;
  }

  v637 = sub_29AB538DC(v10);
  v638 = sub_29AB538DC(v10);
  v639 = sub_29AB538DC(v10);
  v640 = sub_29AB538DC(v10);
  if (v639 + v637 > v150 || v640 + v638 > v137)
  {
    v151 = "bad Image Descriptor";
    goto LABEL_912;
  }

  v1040 = 4 * v150;
  v1034 = 4 * v637;
  v1035 = v638 * 4 * v150;
  v1036 = 4 * (v639 + v637);
  v877 = (v640 + v638) * 4 * v150;
  v1037 = v877;
  v1038 = 4 * v637;
  if (v639)
  {
    v877 = v638 * 4 * v150;
  }

  v1039 = v877;
  v879 = *(v10 + 192);
  v878 = *(v10 + 200);
  if (v879 < v878)
  {
    *(v10 + 192) = v879 + 1;
    v880 = *v879++;
    goto LABEL_1277;
  }

  if (!*(v10 + 48))
  {
    v1033 = 0;
    v1032 = 4 * v150;
    v1031 = 0;
    goto LABEL_1280;
  }

  v881 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
  if (v881)
  {
    v878 = &v153[v881];
    v880 = *v153;
  }

  else
  {
    v880 = 0;
    *(v10 + 48) = 0;
    *(v10 + 56) = 0;
    v878 = (v10 + 57);
  }

  *(v10 + 192) = v154;
  *(v10 + 200) = v878;
  v879 = (v10 + 57);
LABEL_1277:
  v1033 = v880;
  v882 = 32 * v150;
  if ((v880 & 0x40) == 0)
  {
    v882 = 4 * v150;
  }

  v1032 = v882;
  v1031 = (v880 << 25 >> 31) & 3;
  if ((v880 & 0x80) != 0)
  {
    if (v1026)
    {
      v883 = v1010;
    }

    else
    {
      v883 = -1;
    }

    sub_29AB53A08(v10, v1028, 2 << (v880 & 7), v883);
    v1030 = v1028;
    v879 = *(v10 + 192);
    v878 = *(v10 + 200);
  }

  else
  {
LABEL_1280:
    if ((v1023 & 0x80) == 0)
    {
      v151 = "missing color table";
      goto LABEL_912;
    }

    v1030 = v1027;
  }

  if (v879 < v878)
  {
    *(v10 + 192) = v879 + 1;
    v884 = *v879;
    goto LABEL_1294;
  }

  v884 = *(v10 + 48);
  if (!v884)
  {
    goto LABEL_1295;
  }

  v885 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
  *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
  if (v885)
  {
    v886 = &v153[v885];
    v884 = *v153;
  }

  else
  {
    v884 = 0;
    *(v10 + 48) = 0;
    *(v10 + 56) = 0;
    v886 = (v10 + 57);
  }

  *(v10 + 192) = v154;
  *(v10 + 200) = v886;
LABEL_1294:
  v9 = v997;
  if (v884 > 0xC)
  {
LABEL_913:
    if (*(&v1020 + 1))
    {
      free(*(&v1020 + 1));
    }

    v25 = 0;
    v7 = v131;
  }

  else
  {
LABEL_1295:
    v887 = 0;
    v888 = (1 << v884);
    v889 = &v1029;
    do
    {
      *(v889 - 3) = -1;
      *(v889 - 1) = v887;
      *v889 = v887;
      v889 += 4;
      ++v887;
    }

    while (v888 != v887);
    v949 = 0;
    v1014 = 0;
    v890 = 0;
    v891 = v884 + 1;
    v892 = ((2 << v884) - 1);
    v893 = (v888 + 2);
    v983 = 1 << v884;
    v958 = v888 + 1;
    v989 = 1;
    v151 = "illegal code in raster";
    v977 = v884 + 1;
    v973 = (2 << v884) - 1;
    v966 = v888 + 2;
    v1008 = -1;
    while (2)
    {
      v894 = v989;
      v895 = v891;
      v896 = v892;
      v897 = v893;
      v898 = v1008;
      while (1)
      {
        v1008 = v898;
        v893 = v897;
        v892 = v896;
        v891 = v895;
        v989 = v894;
        v899 = v890 - v895;
        if (v890 < v895)
        {
          break;
        }

        v894 = 0;
        v900 = v1014 & v896;
        v1014 >>= v895;
        v898 = -1;
        v895 = v977;
        v896 = v973;
        v897 = v966;
        v890 = v899;
        if (v900 != v983)
        {
          if (v900 == v958)
          {
            v913 = v10;
            v914 = v949;
            while (1)
            {
              sub_29AB50224(v913, v914);
              v915 = *(v10 + 192);
              if (v915 >= *(v10 + 200))
              {
                if (!*(v10 + 48))
                {
                  goto LABEL_1344;
                }

                v916 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
                *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
                if (v916)
                {
                  v917 = &v153[v916];
                  v914 = *v153;
                }

                else
                {
                  v914 = 0;
                  *(v10 + 48) = 0;
                  *(v10 + 56) = 0;
                  v917 = (v10 + 57);
                }

                *(v10 + 192) = v154;
                *(v10 + 200) = v917;
              }

              else
              {
                *(v10 + 192) = v915 + 1;
                v914 = *v915;
              }

              if (!v914)
              {
                goto LABEL_1344;
              }

              v913 = v10;
            }
          }

          if (v900 > v893)
          {
            goto LABEL_912;
          }

          if (v989)
          {
            v151 = "no clear code";
            goto LABEL_912;
          }

          if (v1008 < 0)
          {
            if (v900 == v893)
            {
              goto LABEL_912;
            }
          }

          else
          {
            if (v893 >= 0x2000)
            {
              v151 = "too many codes";
              goto LABEL_912;
            }

            v901 = &v1028[4 * v893 + 1024];
            *v901 = v1008;
            v902 = v1028[4 * v1008 + 1026];
            v901[2] = v902;
            if (v900 != v893 + 1)
            {
              v902 = v1028[4 * v900 + 1026];
            }

            v901[3] = v902;
            v893 = (v893 + 1);
          }

          sub_29AB5BE74(&v1020, v900);
          v894 = 0;
          v903 = (v893 & v892) == 0;
          v904 = v893 < 4096;
          v905 = !v904 || !v903;
          if (v904 && v903)
          {
            v895 = (v891 + 1);
          }

          else
          {
            v895 = v891;
          }

          if (v905)
          {
            v896 = v892;
          }

          else
          {
            v896 = ~(-1 << (v891 + 1));
          }

          v897 = v893;
          v898 = v900;
          v890 = v899;
        }
      }

      v906 = v890;
      v908 = *(v10 + 192);
      v907 = *(v10 + 200);
      if (v949)
      {
        goto LABEL_1326;
      }

      if (v908 >= v907)
      {
        if (!*(v10 + 48))
        {
          break;
        }

        v909 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
        *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
        if (v909)
        {
          v907 = &v153[v909];
          v949 = *v153;
        }

        else
        {
          v949 = 0;
          *(v10 + 48) = 0;
          *(v10 + 56) = 0;
          v907 = (v10 + 57);
        }

        *(v10 + 192) = v154;
        *(v10 + 200) = v907;
        v908 = (v10 + 57);
      }

      else
      {
        *(v10 + 192) = v908 + 1;
        v949 = *v908++;
      }

      if (v949)
      {
LABEL_1326:
        if (v908 >= v907)
        {
          v910 = *(v10 + 48);
          if (v910)
          {
            v911 = (*(v10 + 16))(*(v10 + 40), v10 + 56, *(v10 + 52));
            *(v10 + 184) += *(v10 + 192) - *(v10 + 208);
            if (v911)
            {
              v912 = &v153[v911];
              v910 = *v153;
            }

            else
            {
              v910 = 0;
              *(v10 + 48) = 0;
              *(v10 + 56) = 0;
              v912 = (v10 + 57);
            }

            *(v10 + 192) = v154;
            *(v10 + 200) = v912;
          }
        }

        else
        {
          *(v10 + 192) = v908 + 1;
          v910 = *v908;
        }

        --v949;
        v1014 |= v910 << v906;
        v890 = v906 + 8;
        continue;
      }

      break;
    }

LABEL_1344:
    v25 = *(&v1020 + 1);
    if (*(&v1020 + 1))
    {
      if (v1024[0] >= 1)
      {
        v918 = (DWORD1(v1020) * v1020);
        if (v918 >= 1)
        {
          for (mm = 0; mm != v918; ++mm)
          {
            if (!*(v1022 + mm))
            {
              HIBYTE(v1027[v1024[0]]) = -1;
              *(*(&v1020 + 1) + 4 * mm) = v1027[v1024[0]];
            }
          }
        }
      }

      v9 = v997;
      if (v25 != v10)
      {
        v920 = DWORD1(v1020);
        *v997 = v1020;
        v7 = v131;
        *v131 = v920;
        goto LABEL_916;
      }

      goto LABEL_913;
    }

    v7 = v131;
    v9 = v997;
  }

LABEL_916:
  free(v1022);
  free(v1021);
  v5 = v990;
LABEL_13:
  if (!v25)
  {
    return 0;
  }

  if (v1015 == 8)
  {
    return v25;
  }

  v30 = *v7 * *v9 * *v5;
  v31 = malloc(*v7 * *v9 * *v5);
  v29 = v31;
  if (!v31)
  {
    v46 = off_2A1B71BE0(&off_2A1B71BE0, v32, v33, v34, v35, v36, v37, v38, v921);
LABEL_781:
    v283 = "outofmem";
    goto LABEL_782;
  }

  if (v30 >= 1)
  {
    v39 = v30;
    v40 = v25;
    v41 = v31;
    do
    {
      *v41++ = v40[1];
      v40 += 2;
      --v39;
    }

    while (v39);
  }

  free(v25);
  return v29;
}

BOOL sub_29AB5ABFC(signed int a1, unsigned int a2, unsigned int a3, unsigned int a4)
{
  result = 0;
  if (((a2 | a1) & 0x80000000) == 0 && (!a2 || (0x7FFFFFFF / a2) >= a1))
  {
    v4 = a2 * a1;
    if ((((a2 * a1) | a3) & 0x80000000) == 0 && (!a3 || (0x7FFFFFFF / a3) >= v4))
    {
      v5 = v4 * a3;
      if (((v5 | a4) & 0x80000000) == 0 && (!a4 || (0x7FFFFFFF / a4) >= v5))
      {
        return 1;
      }
    }
  }

  return result;
}

void *sub_29AB5AC68(signed int a1, unsigned int a2, unsigned int a3, unsigned int a4)
{
  if (!sub_29AB5ABFC(a1, a2, a3, a4))
  {
    return 0;
  }

  return malloc((a2 * a1 * a3 * a4));
}

char *sub_29AB5ACD8(_DWORD *a1, _DWORD *a2, unsigned int *a3, signed int *a4, _DWORD *a5)
{
  v10 = sub_29AB4E24C(a1, a1, a1 + 1, a1 + 2);
  *a5 = v10;
  if (!v10)
  {
    return 0;
  }

  if (a1[1] > 0x1000000u || *a1 > 0x1000000u)
  {
    goto LABEL_10;
  }

  *a2 = *a1;
  v18 = a1[1];
  *a3 = v18;
  v19 = a1[2];
  if (a4)
  {
    *a4 = v19;
    v18 = a1[1];
  }

  v20 = *a1;
  v21 = *a5 / 8;
  if (!sub_29AB5ABFC(v19, *a1, v18, v21))
  {
    goto LABEL_10;
  }

  v22 = sub_29AB5AC68(v19, v20, v18, v21);
  if (!v22)
  {
    goto LABEL_10;
  }

  v23 = v22;
  if (!sub_29AB524E4(a1, v22, v20 * v19 * v18 * v21))
  {
    free(v23);
LABEL_10:
    v24 = (off_2A1B71BE0)(&off_2A1B71BE0, v11, v12, v13, v14, v15, v16, v17);
    v23 = 0;
    *v24 = v25;
  }

  return v23;
}

_BYTE *sub_29AB5AE1C(float *a1, signed int a2, unsigned int a3, signed int a4)
{
  if (!a1)
  {
    return 0;
  }

  v7 = sub_29AB5037C(a2, a3, a4, 0);
  if (v7)
  {
    v29 = v7;
    v31 = a3 * a2;
    if (v31 >= 1)
    {
      v8 = 0;
      v9 = v7;
      v10 = a1;
      do
      {
        if (a4 + (a4 & 1) - 1 < 1)
        {
          v16 = 0;
        }

        else
        {
          v11 = a4 + (a4 & 1u) - 1;
          v12 = v9;
          v13 = v10;
          do
          {
            v14 = *v13++;
            v15 = (powf(v14, 0.45455) * 255.0) + 0.5;
            if (v15 < 0.0)
            {
              v15 = 0.0;
            }

            if (v15 > 255.0)
            {
              v15 = 255.0;
            }

            *v12++ = v15;
            --v11;
          }

          while (v11);
          v16 = a4 + (a4 & 1) - 1;
        }

        if (v16 < a4)
        {
          v17 = v8 * a4 + v16;
          v18 = (a1[v17] * 255.0) + 0.5;
          if (v18 < 0.0)
          {
            v18 = 0.0;
          }

          if (v18 > 255.0)
          {
            v18 = 255.0;
          }

          v29[v17] = v18;
        }

        ++v8;
        v10 += a4;
        v9 += a4;
      }

      while (v8 != v31);
    }

    free(a1);
    return v29;
  }

  else
  {
    free(a1);
    v27 = (off_2A1B71BE0)(&off_2A1B71BE0, v20, v21, v22, v23, v24, v25, v26);
    v19 = 0;
    *v27 = "outofmem";
  }

  return v19;
}

__n128 sub_29AB5AFD4(uint64_t a1)
{
  v3 = *(a1 + 192);
  v2 = *(a1 + 200);
  if (v3 >= v2)
  {
    if (!*(a1 + 48))
    {
      goto LABEL_9;
    }

    v4 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
    *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
    if (v4)
    {
      v2 = a1 + 56 + v4;
    }

    else
    {
      *(a1 + 48) = 0;
      v2 = a1 + 57;
      *(a1 + 56) = 0;
    }

    *(a1 + 200) = v2;
    v3 = (a1 + 57);
  }

  else
  {
    ++v3;
  }

  *(a1 + 192) = v3;
LABEL_9:
  if (v3 >= v2)
  {
    if (!*(a1 + 48))
    {
      v5 = 0;
      goto LABEL_18;
    }

    v6 = (a1 + 56);
    v7 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
    *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
    if (v7)
    {
      v2 = &v6[v7];
      v5 = *v6;
    }

    else
    {
      v5 = 0;
      *(a1 + 48) = 0;
      v2 = a1 + 57;
      *(a1 + 56) = 0;
    }

    v3 = (a1 + 57);
    *(a1 + 192) = a1 + 57;
    *(a1 + 200) = v2;
  }

  else
  {
    *(a1 + 192) = v3 + 1;
    v5 = *v3++;
  }

  if (v5 > 1)
  {
    goto LABEL_40;
  }

LABEL_18:
  if (v3 >= v2)
  {
    v8 = *(a1 + 48);
    if (v8)
    {
      v9 = (a1 + 56);
      v10 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v10)
      {
        v2 = &v9[v10];
        v8 = *v9;
      }

      else
      {
        v8 = 0;
        *(a1 + 48) = 0;
        v2 = a1 + 57;
        *(a1 + 56) = 0;
      }

      *(a1 + 200) = v2;
      v3 = (a1 + 57);
    }
  }

  else
  {
    *(a1 + 192) = v3 + 1;
    v8 = *v3++;
  }

  if (!v5)
  {
    if ((v8 & 0xF6) != 2)
    {
      goto LABEL_40;
    }

    if (*(a1 + 16) && v2 - v3 <= 8)
    {
      *(a1 + 192) = v2;
      (*(a1 + 24))(*(a1 + 40), (9 - (v2 - v3)));
LABEL_51:
      if (sub_29AB538DC(a1) && sub_29AB538DC(a1))
      {
        v18 = *(a1 + 192);
        if (v18 >= *(a1 + 200))
        {
          if (*(a1 + 48))
          {
            v19 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
            *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
            if (v19)
            {
              v20 = a1 + 56 + v19;
            }

            else
            {
              *(a1 + 48) = 0;
              v20 = a1 + 57;
              *(a1 + 56) = 0;
            }

            *(a1 + 192) = a1 + 57;
            *(a1 + 200) = v20;
          }
        }

        else
        {
          *(a1 + 192) = v18 + 1;
        }
      }

      goto LABEL_40;
    }

    v17 = v3 + 9;
LABEL_50:
    *(a1 + 192) = v17;
    goto LABEL_51;
  }

  if ((v8 & 0xFFFFFFF7) == 1)
  {
    if (*(a1 + 16) && v2 - v3 <= 3)
    {
      *(a1 + 192) = v2;
      (*(a1 + 24))(*(a1 + 40), (4 - (v2 - v3)));
      v11 = *(a1 + 192);
      v2 = *(a1 + 200);
    }

    else
    {
      v11 = v3 + 4;
      *(a1 + 192) = v3 + 4;
    }

    if (v11 >= v2)
    {
      if (!*(a1 + 48))
      {
        goto LABEL_40;
      }

      v14 = (a1 + 56);
      v15 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v15)
      {
        v2 = &v14[v15];
        v13 = *v14;
      }

      else
      {
        v13 = 0;
        *(a1 + 48) = 0;
        v2 = a1 + 57;
        *(a1 + 56) = 0;
      }

      *(a1 + 200) = v2;
      v12 = (a1 + 57);
    }

    else
    {
      v12 = v11 + 1;
      *(a1 + 192) = v11 + 1;
      v13 = *v11;
    }

    if (v13 <= 0x20 && ((1 << v13) & 0x101018100) != 0)
    {
      if (*(a1 + 16) && v2 - v12 <= 3)
      {
        *(a1 + 192) = v2;
        (*(a1 + 24))(*(a1 + 40), (4 - (v2 - v12)));
        goto LABEL_51;
      }

      v17 = v12 + 4;
      goto LABEL_50;
    }
  }

LABEL_40:
  result = *(a1 + 208);
  *(a1 + 192) = result;
  return result;
}

char *sub_29AB5B3C8(uint64_t a1, signed int *a2, unsigned int *a3, unsigned int *a4)
{
  v9 = *(a1 + 192);
  v8 = *(a1 + 200);
  if (v9 >= v8)
  {
    if (*(a1 + 48))
    {
      v10 = (a1 + 56);
      v11 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v11)
      {
        v8 = &v10[v11];
        v101 = *v10;
      }

      else
      {
        v101 = 0;
        *(a1 + 48) = 0;
        v8 = (a1 + 57);
        *(a1 + 56) = 0;
      }

      v9 = (a1 + 57);
      *(a1 + 192) = a1 + 57;
      *(a1 + 200) = v8;
    }

    else
    {
      v101 = 0;
    }
  }

  else
  {
    *(a1 + 192) = v9 + 1;
    v101 = *v9++;
  }

  if (v9 >= v8)
  {
    if (*(a1 + 48))
    {
      v13 = (a1 + 56);
      v14 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v14)
      {
        v8 = &v13[v14];
        v12 = *v13;
      }

      else
      {
        v12 = 0;
        *(a1 + 48) = 0;
        v8 = (a1 + 57);
        *(a1 + 56) = 0;
      }

      v9 = (a1 + 57);
      *(a1 + 192) = a1 + 57;
      *(a1 + 200) = v8;
    }

    else
    {
      v12 = 0;
    }
  }

  else
  {
    *(a1 + 192) = v9 + 1;
    v12 = *v9++;
  }

  if (v9 >= v8)
  {
    if (*(a1 + 48))
    {
      v15 = (a1 + 56);
      v16 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v16)
      {
        v17 = &v15[v16];
        v104 = *v15;
      }

      else
      {
        v104 = 0;
        *(a1 + 48) = 0;
        v17 = (a1 + 57);
        *(a1 + 56) = 0;
      }

      *(a1 + 192) = a1 + 57;
      *(a1 + 200) = v17;
    }

    else
    {
      v104 = 0;
    }
  }

  else
  {
    *(a1 + 192) = v9 + 1;
    v104 = *v9;
  }

  v18 = sub_29AB538DC(a1);
  v103 = sub_29AB538DC(a1);
  v19 = *(a1 + 192);
  __n = v18;
  if (v19 >= *(a1 + 200))
  {
    if (*(a1 + 48))
    {
      v21 = (a1 + 56);
      v22 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v22)
      {
        v23 = &v21[v22];
        v20 = *v21;
      }

      else
      {
        v20 = 0;
        *(a1 + 48) = 0;
        v23 = (a1 + 57);
        *(a1 + 56) = 0;
      }

      *(a1 + 192) = a1 + 57;
      *(a1 + 200) = v23;
    }

    else
    {
      v20 = 0;
    }
  }

  else
  {
    *(a1 + 192) = v19 + 1;
    v20 = *v19;
  }

  sub_29AB538DC(a1);
  sub_29AB538DC(a1);
  v24 = sub_29AB538DC(a1);
  v99 = sub_29AB538DC(a1);
  v33 = *(a1 + 192);
  v32 = *(a1 + 200);
  if (v33 >= v32)
  {
    if (*(a1 + 48))
    {
      v35 = (a1 + 56);
      v36 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v36)
      {
        v32 = &v35[v36];
        v34 = *v35;
      }

      else
      {
        v34 = 0;
        *(a1 + 48) = 0;
        v32 = (a1 + 57);
        *(a1 + 56) = 0;
      }

      v33 = (a1 + 57);
      *(a1 + 192) = a1 + 57;
      *(a1 + 200) = v32;
    }

    else
    {
      v34 = 0;
    }
  }

  else
  {
    *(a1 + 192) = v33 + 1;
    v34 = *v33++;
  }

  v105 = v34;
  if (v33 >= v32)
  {
    if (*(a1 + 48))
    {
      v38 = (a1 + 56);
      v39 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v39)
      {
        v40 = &v38[v39];
        v37 = *v38;
      }

      else
      {
        v37 = 0;
        *(a1 + 48) = 0;
        v40 = (a1 + 57);
        *(a1 + 56) = 0;
      }

      v34 = v105;
      *(a1 + 192) = a1 + 57;
      *(a1 + 200) = v40;
    }

    else
    {
      v37 = 0;
    }
  }

  else
  {
    *(a1 + 192) = v33 + 1;
    v37 = *v33;
  }

  __dst = 0;
  v41 = "bad format";
  if (!v12)
  {
    if (v34 <= 15)
    {
      if (v34 == 8)
      {
LABEL_68:
        v43 = 0;
        v96 = 1;
        v44 = 1;
        goto LABEL_71;
      }

      if (v34 == 15)
      {
LABEL_67:
        v96 = 0;
        v44 = 3;
        v43 = 1;
        goto LABEL_71;
      }
    }

    else
    {
      if (v34 == 32 || v34 == 24)
      {
        v43 = 0;
        v44 = v34 >> 3;
        goto LABEL_70;
      }

      if (v34 == 16)
      {
        v42 = v104 - 8;
        if (v104 <= 7)
        {
          v42 = v104;
        }

        if (v42 != 3)
        {
          goto LABEL_67;
        }

        v43 = 0;
        v44 = 2;
        goto LABEL_70;
      }
    }

LABEL_101:
    v49 = 0;
    *(off_2A1B71BE0)(&off_2A1B71BE0, v25, v26, v27, v28, v29, v30, v31) = v41;
    return v49;
  }

  if (v20 <= 23)
  {
    if ((v20 - 15) >= 2)
    {
      if (v20 != 8)
      {
        goto LABEL_101;
      }

      goto LABEL_68;
    }

    goto LABEL_67;
  }

  if (v20 != 24 && v20 != 32)
  {
    goto LABEL_101;
  }

  v43 = 0;
  v44 = v20 >> 3;
LABEL_70:
  v96 = 1;
LABEL_71:
  *a2 = v24;
  v45 = v99;
  *a3 = v99;
  v46 = v103;
  if (a4)
  {
    *a4 = v44;
  }

  v47 = v104;
  if (!sub_29AB50270(v24, v99, v44, 0))
  {
    v41 = "too large";
    goto LABEL_101;
  }

  v48 = sub_29AB5037C(v24, v99, v44, 0);
  if (!v48)
  {
    v41 = "outofmem";
    goto LABEL_101;
  }

  v49 = v48;
  sub_29AB50224(a1, v101);
  if (v12)
  {
    v50 = 1;
  }

  else
  {
    v50 = v104 > 7;
  }

  if (v50)
  {
    v51 = 1;
  }

  else
  {
    v51 = v43;
  }

  if (v51)
  {
    if (v12)
    {
      if (!v103)
      {
        v41 = "bad palette";
        goto LABEL_100;
      }

      sub_29AB50224(a1, __n);
      v95 = sub_29AB502C8(v103, v44, 0);
      if (!v95)
      {
        v41 = "outofmem";
        goto LABEL_100;
      }

      v97 = v12;
      if (v96)
      {
        if (!sub_29AB524E4(a1, v95, v103 * v44))
        {
          free(v49);
          v41 = "bad palette";
          v49 = v95;
LABEL_100:
          free(v49);
          goto LABEL_101;
        }
      }

      else
      {
        v56 = v103;
        v57 = v95 + 2;
        do
        {
          v58 = sub_29AB538DC(a1);
          *(v57 - 2) = (2156535 * ((v58 >> 10) & 0x1F)) >> 18;
          *(v57 - 1) = (2156535 * ((v58 >> 5) & 0x1F)) >> 18;
          *v57 = (2156535 * (v58 & 0x1F)) >> 18;
          v57 += v44;
          --v56;
        }

        while (v56);
        v45 = v99;
        v46 = v103;
      }
    }

    else
    {
      v97 = 0;
      v95 = 0;
    }

    v93 = v43;
    v94 = v24;
    v102 = v45 * v24;
    if (v102)
    {
      v59 = 0;
      v98 = 0;
      v60 = 0;
      v61 = (a1 + 56);
      v62 = a1 + 57;
      v63 = 1;
      do
      {
        if (v47 >= 8)
        {
          if (v60)
          {
            v64 = v98 == 0;
            v98 = v98 != 0;
            v65 = v64;
            if (((v65 | v63) & 1) == 0)
            {
              v98 = 1;
LABEL_141:
              if (!v44)
              {
                goto LABEL_155;
              }

LABEL_154:
              memcpy(&v49[v44 * v59], &__dst, v44);
              goto LABEL_155;
            }
          }

          else
          {
            v66 = *(a1 + 192);
            if (v66 >= *(a1 + 200))
            {
              v67 = *(a1 + 48);
              if (v67)
              {
                v68 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
                *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
                if (v68)
                {
                  v69 = &v61[v68];
                  v67 = *v61;
                }

                else
                {
                  v67 = 0;
                  *(a1 + 48) = 0;
                  *(a1 + 56) = 0;
                  v69 = (a1 + 57);
                }

                *(a1 + 192) = v62;
                *(a1 + 200) = v69;
              }
            }

            else
            {
              *(a1 + 192) = v66 + 1;
              v67 = *v66;
            }

            v60 = (v67 & 0x7F) + 1;
            v98 = v67 >> 7;
          }
        }

        if (v97)
        {
          if (v105 == 8)
          {
            v70 = *(a1 + 192);
            if (v70 >= *(a1 + 200))
            {
              if (*(a1 + 48))
              {
                v71 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
                *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
                if (v71)
                {
                  v79 = &v61[v71];
                  v71 = *v61;
                }

                else
                {
                  *(a1 + 48) = 0;
                  *(a1 + 56) = 0;
                  v79 = (a1 + 57);
                }

                *(a1 + 192) = v62;
                *(a1 + 200) = v79;
              }

              else
              {
                v71 = 0;
              }
            }

            else
            {
              *(a1 + 192) = v70 + 1;
              v71 = *v70;
            }
          }

          else
          {
            v71 = sub_29AB538DC(a1);
          }

          if (!v44)
          {
            goto LABEL_155;
          }

          if (v71 >= v46)
          {
            v80 = 0;
          }

          else
          {
            v80 = v71;
          }

          memcpy(&__dst, &v95[v80 * v44], v44);
          goto LABEL_154;
        }

        if (!v96)
        {
          v78 = sub_29AB538DC(a1);
          LOBYTE(__dst) = (2156535 * ((v78 >> 10) & 0x1F)) >> 18;
          BYTE1(__dst) = (2156535 * ((v78 >> 5) & 0x1F)) >> 18;
          BYTE2(__dst) = (2156535 * (v78 & 0x1F)) >> 18;
          goto LABEL_141;
        }

        if (v44)
        {
          v73 = *(a1 + 192);
          v72 = *(a1 + 200);
          p_dst = &__dst;
          v75 = v44;
          do
          {
            if (v73 >= v72)
            {
              v76 = *(a1 + 48);
              if (v76)
              {
                v77 = (*(a1 + 16))(*(a1 + 40), a1 + 56, *(a1 + 52));
                *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
                if (v77)
                {
                  v72 = &v61[v77];
                  LOBYTE(v76) = *v61;
                }

                else
                {
                  LOBYTE(v76) = 0;
                  *(a1 + 48) = 0;
                  *(a1 + 56) = 0;
                  v72 = (a1 + 57);
                }

                *(a1 + 192) = v62;
                *(a1 + 200) = v72;
                v73 = (a1 + 57);
              }
            }

            else
            {
              *(a1 + 192) = v73 + 1;
              LOBYTE(v76) = *v73++;
            }

            *p_dst = v76;
            p_dst = (p_dst + 1);
            --v75;
          }

          while (v75);
          v46 = v103;
          v47 = v104;
          goto LABEL_141;
        }

LABEL_155:
        v63 = 0;
        --v60;
        ++v59;
      }

      while (v59 != v102);
    }

    v45 = v99;
    if ((v37 & 0x20) == 0 && v99)
    {
      v81 = 0;
      v82 = 0;
      v83 = v94 * v44;
      v84 = v94 * v44 * (v99 - 1);
      do
      {
        if (v83)
        {
          v85 = &v49[v81];
          v86 = v83 + 1;
          v87 = &v49[v84];
          do
          {
            v88 = *v85;
            *v85++ = *v87;
            *v87++ = v88;
            --v86;
          }

          while (v86 > 1);
        }

        v84 -= v83;
        v81 += v83;
        v64 = v82++ == (v99 - 1) >> 1;
      }

      while (!v64);
    }

    if (v95)
    {
      free(v95);
    }
  }

  else
  {
    v93 = v43;
    v94 = v24;
    if (v99)
    {
      v52 = 0;
      v53 = v99 - 1;
      do
      {
        if ((v37 >> 5))
        {
          v54 = v52;
        }

        else
        {
          v54 = v53;
        }

        sub_29AB524E4(a1, &v49[v24 * v44 * v54], v24 * v44);
        ++v52;
        --v53;
      }

      while (v53 != -1);
    }
  }

  v89 = v93;
  if (v44 < 3)
  {
    v89 = 1;
  }

  if ((v89 & 1) == 0)
  {
    v90 = v45 * v94;
    if (v45 * v94)
    {
      v91 = v49 + 2;
      do
      {
        v92 = *(v91 - 2);
        *(v91 - 2) = *v91;
        *v91 = v92;
        v91 += v44;
        --v90;
      }

      while (v90);
    }
  }

  return v49;
}

uint64_t sub_29AB5BDD0(unsigned int a1)
{
  if (!a1)
  {
    return 0xFFFFFFFFLL;
  }

  v1 = HIWORD(a1);
  if (!HIWORD(a1))
  {
    v1 = a1;
  }

  if (v1 <= 0xFF)
  {
    v2 = 16 * (HIWORD(a1) != 0);
  }

  else
  {
    v1 >>= 8;
    v2 = (16 * (HIWORD(a1) != 0)) | 8;
  }

  if (v1 > 0xF)
  {
    v1 >>= 4;
    v2 |= 4u;
  }

  if (v1 > 3)
  {
    v1 >>= 2;
    v2 |= 2u;
  }

  if (v1 <= 1)
  {
    return v2;
  }

  else
  {
    return v2 + 1;
  }
}

uint64_t sub_29AB5BE74(uint64_t result, unsigned int a2)
{
  v2 = result;
  v3 = result + 0x8000;
  v4 = result + 4 * a2;
  if ((*(v4 + 2100) & 0x80000000) == 0)
  {
    result = sub_29AB5BE74(result, *(v4 + 2100));
  }

  v5 = *(v3 + 2144);
  if (v5 < *(v3 + 2136))
  {
    v6 = *(v3 + 2140) + v5;
    v7 = *(v2 + 8);
    *(*(v2 + 24) + v6 / 4) = 1;
    v8 = (*(v3 + 2104) + 4 * *(v4 + 2103));
    if (v8[3] >= 0x81u)
    {
      v9 = (v7 + v6);
      *v9 = v8[2];
      v9[1] = v8[1];
      v9[2] = *v8;
      v9[3] = v8[3];
    }

    v10 = *(v3 + 2140) + 4;
    *(v3 + 2140) = v10;
    if (v10 >= *(v3 + 2132))
    {
      *(v3 + 2140) = *(v3 + 2124);
      v11 = *(v3 + 2144) + *(v3 + 2116);
      *(v3 + 2144) = v11;
      v12 = *(v3 + 2136);
      if (v11 >= v12)
      {
        v13 = *(v3 + 2112);
        do
        {
          v14 = v13 - 1;
          if (v13 < 1)
          {
            break;
          }

          v15 = *(v3 + 2148) << v13;
          *(v3 + 2116) = v15;
          v16 = *(v3 + 2128) + (v15 >> 1);
          *(v3 + 2144) = v16;
          *(v3 + 2112) = v14;
          v13 = v14;
        }

        while (v16 >= v12);
      }
    }
  }

  return result;
}

uint64_t sub_29AB5BF9C(uint64_t a1, _BYTE *a2, int a3)
{
  if (a3 < 1)
  {
    return 1;
  }

  v6 = 0;
  v7 = (a1 + 56);
  v8 = (a1 + 57);
  v9 = a3;
  while (1)
  {
    v11 = *(a1 + 192);
    v10 = *(a1 + 200);
    if (v11 >= v10)
    {
      if (!*(a1 + 48))
      {
        v13 = 0;
LABEL_14:
        v15 = v13 + 1;
        v16 = v15;
        do
        {
          v17 = *(a1 + 192);
          if (v17 >= *(a1 + 200))
          {
            LODWORD(v17) = *(a1 + 48);
            if (v17)
            {
              v18 = (*(a1 + 16))(*(a1 + 40), v7, *(a1 + 52));
              *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
              if (v18)
              {
                v19 = &v7[v18];
                LOBYTE(v17) = *v7;
              }

              else
              {
                LOBYTE(v17) = 0;
                *(a1 + 48) = 0;
                *(a1 + 56) = 0;
                v19 = v8;
              }

              *(a1 + 192) = v8;
              *(a1 + 200) = v19;
            }
          }

          else
          {
            *(a1 + 192) = v17 + 1;
            LOBYTE(v17) = *v17;
          }

          *a2 = v17;
          a2 += 4;
          --v16;
        }

        while (v16);
        v6 += v15;
        goto LABEL_36;
      }

      v14 = (*(a1 + 16))(*(a1 + 40), v7, *(a1 + 52));
      *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
      if (v14)
      {
        v10 = &v7[v14];
        v13 = *v7;
      }

      else
      {
        v13 = 0;
        *(a1 + 48) = 0;
        *(a1 + 56) = 0;
        v10 = v8;
      }

      *(a1 + 192) = v8;
      *(a1 + 200) = v10;
      v12 = v8;
    }

    else
    {
      v12 = v11 + 1;
      *(a1 + 192) = v11 + 1;
      v13 = *v11;
    }

    if (v13 != 128)
    {
      break;
    }

LABEL_36:
    v9 = a3 - v6;
    if (a3 <= v6)
    {
      return 1;
    }
  }

  if ((v13 & 0x80) == 0)
  {
    if (v9 <= v13)
    {
      return 0;
    }

    goto LABEL_14;
  }

  if (257 - v13 <= v9)
  {
    if (v12 >= v10)
    {
      v20 = *(a1 + 48);
      if (v20)
      {
        v21 = (*(a1 + 16))(*(a1 + 40), v7, *(a1 + 52));
        *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
        if (v21)
        {
          v22 = &v7[v21];
          LOBYTE(v20) = *v7;
        }

        else
        {
          LOBYTE(v20) = 0;
          *(a1 + 48) = 0;
          *(a1 + 56) = 0;
          v22 = v8;
        }

        *(a1 + 192) = v8;
        *(a1 + 200) = v22;
      }
    }

    else
    {
      *(a1 + 192) = v12 + 1;
      LOBYTE(v20) = *v12;
    }

    v23 = v13 - 257;
    do
    {
      *a2 = v20;
      a2 += 4;
    }

    while (!__CFADD__(v23++, 1));
    v6 += 257 - v13;
    goto LABEL_36;
  }

  return 0;
}

uint64_t sub_29AB5C1D4(uint64_t a1, int a2, uint64_t a3)
{
  v6 = 0;
  v7 = (a1 + 56);
  v8 = (a1 + 57);
  for (i = 128; (i & a2) == 0; i >>= 1)
  {
LABEL_17:
    if (++v6 == 4)
    {
      return a3;
    }
  }

  if (*(a1 + 16))
  {
    if (!(*(a1 + 32))(*(a1 + 40)))
    {
      v10 = *(a1 + 192);
      v11 = *(a1 + 200);
      goto LABEL_9;
    }

    if (!*(a1 + 48))
    {
      goto LABEL_19;
    }
  }

  v10 = *(a1 + 192);
  v11 = *(a1 + 200);
  if (v10 < v11)
  {
LABEL_9:
    if (v10 >= v11)
    {
      LODWORD(v10) = *(a1 + 48);
      if (v10)
      {
        v12 = (*(a1 + 16))(*(a1 + 40), v7, *(a1 + 52));
        *(a1 + 184) += *(a1 + 192) - *(a1 + 208);
        if (v12)
        {
          v13 = &v7[v12];
          LOBYTE(v10) = *v7;
        }

        else
        {
          LOBYTE(v10) = 0;
          *(a1 + 48) = 0;
          *(a1 + 56) = 0;
          v13 = v8;
        }

        *(a1 + 192) = v8;
        *(a1 + 200) = v13;
      }
    }

    else
    {
      *(a1 + 192) = v10 + 1;
      LOBYTE(v10) = *v10;
    }

    *(a3 + v6) = v10;
    goto LABEL_17;
  }

LABEL_19:
  a3 = 0;
  *off_2A1B71BE0() = "bad file";
  return a3;
}

int8x8_t *sub_29AB5C308(int8x8_t *result, int a2, uint64_t a3, double a4, double a5, double a6, double a7, double a8, int16x8_t a9)
{
  v9 = (a3 + 64);
  v70 = *MEMORY[0x29EDCA608];
  v10 = 128;
  do
  {
    v11 = &v69[v10];
    v12 = *(v9 - 24);
    v13 = *(v9 - 16);
    if (*(v9 - 24) | v13)
    {
      goto LABEL_9;
    }

    if (*(v9 - 8) || *v9 || v9[8] || v9[16] || v9[24])
    {
      v13 = 0;
LABEL_9:
      v14 = v13;
      v15 = v9[16];
      v16 = 2217 * (v15 + v13);
      v17 = v16 - 7567 * v15;
      v18 = v16 + 3135 * v14;
      v19 = *(v9 - 32);
      v20 = *v9;
      v21 = v20 + v19;
      v22 = v19 - v20;
      v23 = (v21 << 12) - v18;
      v24 = v9[24];
      v25 = v9[8];
      v26 = *(v9 - 8);
      v27 = v26 + v24;
      v28 = 4816 * (v26 + v24 + v25 + v12);
      v29 = v28 - 3685 * (v24 + v12);
      v30 = v28 - 10497 * (v26 + v25);
      v31 = -1597 * (v25 + v12);
      v32 = v31 + 6149 * v12 + v29;
      v33 = -8034 * (v26 + v24) + 12586 * v26 + v30;
      v34 = v31 + 8410 * v25 + v30;
      v35 = -8034 * v27 + 1223 * v24 + v29;
      v36 = v18 + (v21 << 12) + 512;
      v37 = v17 + (v22 << 12) + 512;
      v38 = (v22 << 12) - v17 + 512;
      *(v11 - 32) = (v32 + v36) >> 10;
      v11[24] = (v36 - v32) >> 10;
      *(v11 - 24) = (v33 + v37) >> 10;
      v11[16] = (v37 - v33) >> 10;
      *(v11 - 16) = (v34 + v38) >> 10;
      v11[8] = (v38 - v34) >> 10;
      *(v11 - 8) = (v35 + v23 + 512) >> 10;
      *v11 = (v23 + 512 - v35) >> 10;
      goto LABEL_10;
    }

    v39 = 4 * *(v9 - 32);
    v40 = &v69[v10];
    v40[24] = v39;
    v40[16] = v39;
    v40[8] = v39;
    *v40 = v39;
    *(v40 - 8) = v39;
    *(v40 - 16) = v39;
    *(v40 - 24) = v39;
    *(v11 - 32) = v39;
LABEL_10:
    v10 += 4;
    ++v9;
  }

  while (v10 != 160);
  v41 = 16;
  v42 = vdupq_n_s32(0x1010000u);
  v43.i64[0] = 0xFF000000FFLL;
  v43.i64[1] = 0xFF000000FFLL;
  do
  {
    v44 = *&v69[v41 + 12];
    v45 = *&v69[v41 - 4];
    v46 = *&v69[v41];
    v47 = *&v69[v41 + 4];
    v49 = *&v69[v41 - 16];
    v48 = *&v69[v41 - 12];
    v50 = (v46 + v49) << 12;
    v51 = (v49 - v46) << 12;
    v52 = v48 + v47;
    v53 = v48 + v44;
    v54.i64[0] = __PAIR64__(v45, v48);
    v55 = 4816 * (v48 + v47 + v45 + v44);
    v54.i64[1] = __PAIR64__(v44, v47);
    v56.i64[0] = v42.i64[0];
    v56.i64[1] = __PAIR64__(v50, v51);
    a9.i64[0] = __PAIR64__(v51, v50);
    v57.i64[0] = __PAIR64__(v51, v50);
    v57.i64[1] = __PAIR64__(2217 * (*&v69[v41 + 8] + *&v69[v41 - 8]) + 3135 * *&v69[v41 - 8], 2217 * (*&v69[v41 + 8] + *&v69[v41 - 8]) - 7567 * *&v69[v41 + 8]);
    LODWORD(v58) = -1597 * v52;
    HIDWORD(v58) = -8034 * (v45 + v44);
    v59 = vaddq_s32(v57, v42);
    v60 = vextq_s8(v57, vextq_s8(v57, v57, 8uLL), 0xCuLL);
    v61 = vsubq_s32(a9, v60).u64[0];
    v60.i32[0] = v55 - 3685 * v53;
    v60.i32[1] = v55 - 10497 * (v45 + v47);
    v59.i64[0] = v61;
    v62 = vaddq_s32(vmlaq_s32(vdupq_lane_s64(v58, 0), v54, xmmword_29B6C2CE0), vzip1q_s32(v60, vrev64q_s32(v60)));
    v63 = vaddq_s32(v59, v56);
    v64 = vrev64q_s32(v62);
    v65 = vrev64q_s32(v63);
    v66 = vshrq_n_s32(vaddq_s32(v62, vextq_s8(v65, v65, 8uLL)), 0x11uLL);
    v67 = vshrq_n_s32(vsubq_s32(v63, vextq_s8(v64, v64, 8uLL)), 0x11uLL);
    a9 = vuzp1q_s16(vcgtq_u32(v66, v43), vcgtq_u32(v67, v43));
    *result = vorr_s8(vmovn_s16(vandq_s8(vuzp1q_s16(vcgezq_s32(v66), vcgezq_s32(v67)), a9)), vbic_s8(vmovn_s16(vuzp1q_s16(v66, v67)), vmovn_s16(a9)));
    result = (result + a2);
    v41 += 32;
  }

  while (v41 != 272);
  return result;
}

uint64_t sub_29AB5C6C4(uint64_t result, unsigned __int8 *a2, unsigned __int8 *a3, unsigned __int8 *a4, int a5, int a6)
{
  if (a5 >= 1)
  {
    v6 = a6;
    v7 = (result + 1);
    v8 = a5;
    do
    {
      v9 = *a2++;
      v10 = (v9 << 20) | 0x80000;
      v11 = *a4++;
      v12 = v11 - 128;
      v13 = *a3++;
      v14 = v10 + 1470208 * v12;
      v15 = v10 - 748800 * v12 + ((-360960 * (v13 - 128)) & 0xFFFF0000);
      v16 = v10 + 1858048 * (v13 - 128);
      v17 = (v14 >> 20) & ~(v14 >> 31);
      if (v17 >= 255)
      {
        LOBYTE(v17) = -1;
      }

      LODWORD(result) = (v15 >> 20) & ~(v15 >> 31);
      if (result >= 255)
      {
        result = 255;
      }

      else
      {
        result = result;
      }

      v18 = (v16 >> 20) & ~(v16 >> 31);
      *(v7 - 1) = v17;
      *v7 = result;
      if (v18 >= 255)
      {
        LOBYTE(v18) = -1;
      }

      v7[1] = v18;
      v7[2] = -1;
      v7 += v6;
      --v8;
    }

    while (v8);
  }

  return result;
}

_BYTE *sub_29AB5C780(_BYTE *result, unsigned __int8 *a2, unsigned __int8 *a3, int a4)
{
  v4 = *a3;
  v5 = 3 * *a2;
  if (a4 == 1)
  {
    v6 = (v4 + v5 + 2) >> 2;
    result[1] = v6;
    *result = v6;
  }

  else
  {
    v7 = v5 + v4;
    v8 = (v7 + 2) >> 2;
    *result = v8;
    if (a4 >= 2)
    {
      v9 = a3 + 1;
      v10 = a2 + 1;
      v11 = result + 2;
      v12 = a4 - 1;
      do
      {
        v13 = *v10++;
        v14 = 3 * v13;
        v15 = *v9++;
        v16 = v14 + v15;
        *(v11 - 1) = (3 * v7 + v16 + 8) >> 4;
        *v11 = (v7 + 3 * v16 + 8) >> 4;
        v11 += 2;
        v7 = v16;
        --v12;
      }

      while (v12);
      v8 = (v16 + 2) >> 2;
    }

    result[2 * a4 - 1] = v8;
  }

  return result;
}

_BYTE *sub_29AB5C83C(_BYTE *result, unsigned __int8 *a2, unsigned __int8 *a3, int a4)
{
  if (a4 >= 1)
  {
    v4 = a4;
    v5 = result;
    do
    {
      v6 = *a2++;
      v7 = 3 * v6;
      v8 = *a3++;
      *v5++ = (v8 + v7 + 2) >> 2;
      --v4;
    }

    while (v4);
  }

  return result;
}

_BYTE *sub_29AB5C874(_BYTE *result, unsigned __int8 *a2, uint64_t a3, int a4)
{
  v4 = *a2;
  v5 = (a4 - 1);
  if (a4 == 1)
  {
    result[1] = v4;
    *result = v4;
  }

  else
  {
    *result = v4;
    result[1] = (a2[1] + 3 * v4 + 2) >> 2;
    if (a4 < 3)
    {
      v11 = 2;
    }

    else
    {
      v6 = a2 + 2;
      v7 = result + 3;
      v8 = v5 - 1;
      do
      {
        v9 = 3 * *(v6 - 1) + 2;
        *(v7 - 1) = (v9 + *(v6 - 2)) >> 2;
        v10 = *v6++;
        *v7 = (v9 + v10) >> 2;
        v7 += 2;
        --v8;
      }

      while (v8);
      v11 = 2 * v5;
    }

    v12 = &result[v11];
    *v12 = (a2[v5] + 3 * a2[a4 - 2] + 2) >> 2;
    v12[1] = a2[v5];
  }

  return result;
}

uint64_t sub_29AB5C92C(uint64_t result, uint64_t a2, uint64_t a3, int a4, int a5)
{
  if (a4 >= 1)
  {
    v5 = 0;
    v6 = vdupq_n_s64(a5 - 1);
    v7 = vdupq_n_s64(0x10uLL);
    v8 = (result + 7);
    do
    {
      if (a5 >= 1)
      {
        v9 = *(a2 + v5);
        v10 = v8;
        v11 = (a5 + 15) & 0xFFFFFFF0;
        v12 = xmmword_29B430070;
        v13 = xmmword_29B433E10;
        v14 = xmmword_29B433E00;
        v15 = xmmword_29B433DF0;
        v16 = xmmword_29B4BE240;
        v17 = xmmword_29B4BE230;
        v18 = xmmword_29B4BE220;
        v19 = xmmword_29B4BE210;
        do
        {
          v20 = vmovn_s64(vcgeq_u64(v6, v12));
          if (vuzp1_s8(vuzp1_s16(v20, *v6.i8), *v6.i8).u8[0])
          {
            *(v10 - 7) = v9;
          }

          if (vuzp1_s8(vuzp1_s16(v20, *&v6), *&v6).i8[1])
          {
            *(v10 - 6) = v9;
          }

          if (vuzp1_s8(vuzp1_s16(*&v6, vmovn_s64(vcgeq_u64(v6, *&v13))), *&v6).i8[2])
          {
            *(v10 - 5) = v9;
            *(v10 - 4) = v9;
          }

          v21 = vmovn_s64(vcgeq_u64(v6, v14));
          if (vuzp1_s8(*&v6, vuzp1_s16(v21, *&v6)).i32[1])
          {
            *(v10 - 3) = v9;
          }

          if (vuzp1_s8(*&v6, vuzp1_s16(v21, *&v6)).i8[5])
          {
            *(v10 - 2) = v9;
          }

          if (vuzp1_s8(*&v6, vuzp1_s16(*&v6, vmovn_s64(vcgeq_u64(v6, *&v15)))).i8[6])
          {
            *(v10 - 1) = v9;
            *v10 = v9;
          }

          v22 = vmovn_s64(vcgeq_u64(v6, v16));
          if (vuzp1_s8(vuzp1_s16(v22, *v6.i8), *v6.i8).u8[0])
          {
            v10[1] = v9;
          }

          if (vuzp1_s8(vuzp1_s16(v22, *&v6), *&v6).i8[1])
          {
            v10[2] = v9;
          }

          if (vuzp1_s8(vuzp1_s16(*&v6, vmovn_s64(vcgeq_u64(v6, *&v17))), *&v6).i8[2])
          {
            v10[3] = v9;
            v10[4] = v9;
          }

          v23 = vmovn_s64(vcgeq_u64(v6, v18));
          if (vuzp1_s8(*&v6, vuzp1_s16(v23, *&v6)).i32[1])
          {
            v10[5] = v9;
          }

          if (vuzp1_s8(*&v6, vuzp1_s16(v23, *&v6)).i8[5])
          {
            v10[6] = v9;
          }

          if (vuzp1_s8(*&v6, vuzp1_s16(*&v6, vmovn_s64(vcgeq_u64(v6, *&v19)))).i8[6])
          {
            v10[7] = v9;
            v10[8] = v9;
          }

          v14 = vaddq_s64(v14, v7);
          v13 = vaddq_s64(v13, v7);
          v12 = vaddq_s64(v12, v7);
          v15 = vaddq_s64(v15, v7);
          v16 = vaddq_s64(v16, v7);
          v17 = vaddq_s64(v17, v7);
          v18 = vaddq_s64(v18, v7);
          v10 += 16;
          v19 = vaddq_s64(v19, v7);
          v11 -= 16;
        }

        while (v11);
      }

      ++v5;
      v8 += a5;
    }

    while (v5 != a4);
  }

  return result;
}

uint64_t sub_29AB5CB90(uint64_t a1, _OWORD *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, _WORD *a7, uint64_t a8)
{
  v8 = a7;
  v9 = a6;
  v15 = a1 + 0x4000;
  if (*(a1 + 18468) <= 15)
  {
    sub_29AB5D044(a1);
    if (*(v15 + 2084) <= 15)
    {
      sub_29AB5D044(a1);
    }
  }

  v16 = *(v15 + 2080);
  v17 = *(a3 + (v16 >> 23));
  if (v17 == 255)
  {
    v28 = 0;
    v29 = (a3 + 1580);
    do
    {
      v30 = *v29++;
      ++v28;
    }

    while (WORD1(v16) >= v30);
    v31 = *(v15 + 2084);
    if (v28 == 8)
    {
LABEL_17:
      *(v15 + 2084) = v31 - 16;
      goto LABEL_20;
    }

    if (v31 < v28 + 9)
    {
      goto LABEL_20;
    }

    v32 = (dword_29B6C3BF4[v28 + 9] & (v16 >> (23 - v28))) + v29[17];
    if (v32 > 0xFF)
    {
      goto LABEL_20;
    }

    *(v15 + 2084) = v31 - v28 - 9;
    *(v15 + 2080) = v16 << (v28 + 9);
    v23 = (a3 + v32 + 1024);
  }

  else
  {
    v18 = a3 + v17;
    v19 = *(v18 + 1280);
    v20 = *(v15 + 2084);
    v21 = __OFSUB__(v20, v19);
    v22 = v20 - v19;
    if (v22 < 0 != v21)
    {
LABEL_20:
      v33 = "bad huffman code";
LABEL_21:
      v34 = off_2A1B71BE0(&off_2A1B71BE0, a2, a3, a4, a5, a6, a7, a8, v75);
      result = 0;
      *v34 = v33;
      return result;
    }

    *(v15 + 2080) = v16 << v19;
    *(v15 + 2084) = v22;
    v23 = (v18 + 1024);
  }

  v24 = *v23;
  if (v24 > 0xF)
  {
    goto LABEL_20;
  }

  a2[6] = 0u;
  a2[7] = 0u;
  a2[4] = 0u;
  a2[5] = 0u;
  a2[2] = 0u;
  a2[3] = 0u;
  *a2 = 0u;
  a2[1] = 0u;
  if (!v24)
  {
    goto LABEL_13;
  }

  v25 = *(v15 + 2084);
  if (v25 < v24)
  {
    sub_29AB5D044(a1);
    v25 = *(v15 + 2084);
  }

  v21 = __OFSUB__(v25, v24);
  v26 = v25 - v24;
  if (v26 < 0 != v21)
  {
LABEL_13:
    v27 = 0;
  }

  else
  {
    v36 = *(v15 + 2080);
    v37 = dword_29B6C3BF4[v24];
    v38 = __ROR4__(v36, -v24);
    *(v15 + 2080) = v38 & ~v37;
    v39 = v38 & v37;
    *(v15 + 2084) = v26;
    v40 = dword_29B6C3C38[v24];
    if (v36 < 0)
    {
      v40 = 0;
    }

    v27 = v40 + v39;
  }

  v41 = a1 + 96 * v9;
  v42 = *(v41 + 18104);
  if (((v42 ^ v27) & 0x80000000) == 0)
  {
    v43 = (0x80000000 - v27) > v42;
    if ((v42 & v27) < 0 == __OFSUB__(v27 ^ 0x7FFFFFFF, v42))
    {
      v43 = (v27 ^ 0x7FFFFFFF) < v42;
    }

    if (v43)
    {
      v33 = "bad delta";
      goto LABEL_21;
    }
  }

  v44 = v42 + v27;
  *(v41 + 18104) = v44;
  v45 = *v8;
  if (*v8)
  {
    if ((v44 & 0x80000000) != 0)
    {
      if ((v44 + 0x8000 / v45) < 0 != __OFADD__(v44, 0x8000 / v45))
      {
        goto LABEL_33;
      }
    }

    else if (v44 > 0x7FFF / v45)
    {
LABEL_33:
      v33 = "can't merge dc and ac";
      goto LABEL_21;
    }
  }

  *a2 = v45 * v44;
  v76 = v8;
  v75 = a4 + 1580;
  v46 = *(v15 + 2084);
  v47 = 1;
  v33 = "bad huffman code";
  v48 = byte_29B6C3784;
  do
  {
    if (v46 <= 15)
    {
      sub_29AB5D044(a1);
    }

    v49 = *(v15 + 2080);
    v50 = v49 >> 23;
    v51 = *(a5 + 2 * (v49 >> 23));
    if (v51)
    {
      v52 = v51 & 0xF;
      v53 = *(v15 + 2084);
      v21 = __OFSUB__(v53, v51 & 0xF);
      v46 = v53 - (v51 & 0xF);
      if (v46 < 0 != v21)
      {
        goto LABEL_21;
      }

      v54 = v51;
      v55 = (v51 >> 4) + v47;
      *(v15 + 2080) = v49 << v52;
      *(v15 + 2084) = v46;
      v47 = v55 + 1;
      *(a2 + v48[v55]) = v8[v48[v55]] * (v54 >> 8);
    }

    else
    {
      if (*(v15 + 2084) <= 15)
      {
        sub_29AB5D044(a1);
        v49 = *(v15 + 2080);
        v50 = v49 >> 23;
      }

      v56 = *(a4 + v50);
      if (v56 == 255)
      {
        v59 = 0;
        v60 = (a4 + 1580);
        do
        {
          v61 = *v60++;
          ++v59;
        }

        while (WORD1(v49) >= v61);
        v31 = *(v15 + 2084);
        if (v59 == 8)
        {
          goto LABEL_17;
        }

        v62 = v59 + 9;
        if (v31 < v59 + 9)
        {
          goto LABEL_21;
        }

        v56 = (dword_29B6C3BF4[v59 + 9] & (v49 >> (23 - v59))) + v60[17];
        if (v56 > 0xFF)
        {
          goto LABEL_21;
        }

        v46 = v31 - v59 - 9;
        *(v15 + 2084) = v46;
        *(v15 + 2080) = v49 << v62;
      }

      else
      {
        v57 = *(a4 + 1280 + v56);
        v58 = *(v15 + 2084);
        v21 = __OFSUB__(v58, v57);
        v46 = v58 - v57;
        if (v46 < 0 != v21)
        {
          goto LABEL_21;
        }

        *(v15 + 2080) = v49 << v57;
        *(v15 + 2084) = v46;
      }

      v63 = *(a4 + 1024 + v56);
      v64 = v63 & 0xF;
      if ((v63 & 0xF) != 0)
      {
        v65 = (v63 >> 4) + v47;
        v66 = v48;
        v67 = v48[v65];
        if (v46 < v64)
        {
          sub_29AB5D044(a1);
          v46 = *(v15 + 2084);
        }

        v68 = v46 - v64;
        if (v46 >= v64)
        {
          v70 = *(v15 + 2080);
          v71 = __ROR4__(v70, -v64);
          v72 = dword_29B6C3BF4[v64];
          *(v15 + 2080) = v71 & ~v72;
          v73 = v71 & v72;
          *(v15 + 2084) = v68;
          if (v70 >= 0)
          {
            v74 = dword_29B6C3C38[v64];
          }

          else
          {
            LOWORD(v74) = 0;
          }

          v69 = v74 + v73;
          v46 = v68;
        }

        else
        {
          v69 = 0;
        }

        v47 = v65 + 1;
        v8 = v76;
        *(a2 + v67) = v76[v67] * v69;
        v48 = v66;
      }

      else
      {
        if (v63 != 240)
        {
          return 1;
        }

        v47 += 16;
        v8 = v76;
      }
    }
  }

  while (v47 < 64);
  return 1;
}

uint64_t sub_29AB5D044(uint64_t result)
{
  v1 = result;
  v2 = result + 0x4000;
  while (1)
  {
    if (*(v2 + 2092))
    {
      v3 = 0;
      goto LABEL_4;
    }

    v5 = *v1;
    v6 = *(*v1 + 192);
    if (v6 < *(*v1 + 200))
    {
      *(v5 + 192) = v6 + 1;
      v3 = *v6;
      goto LABEL_13;
    }

    v3 = *(v5 + 48);
    if (v3)
    {
      break;
    }

LABEL_4:
    v4 = *(v2 + 2084);
    *(v2 + 2080) |= v3 << (24 - v4);
    *(v2 + 2084) = v4 + 8;
    if (v4 >= 17)
    {
      return result;
    }
  }

  v7 = (v5 + 56);
  result = (*(v5 + 16))(*(v5 + 40), v5 + 56, *(v5 + 52));
  *(v5 + 184) += *(v5 + 192) - *(v5 + 208);
  if (result)
  {
    v8 = &v7[result];
    v3 = *v7;
  }

  else
  {
    v3 = 0;
    *(v5 + 48) = 0;
    v8 = (v5 + 57);
    *(v5 + 56) = 0;
  }

  *(v5 + 192) = v5 + 57;
  *(v5 + 200) = v8;
LABEL_13:
  if (v3 != 255)
  {
    goto LABEL_4;
  }

  v9 = *v1;
  v10 = *(*v1 + 192);
  if (v10 < *(*v1 + 200))
  {
    goto LABEL_15;
  }

  LODWORD(v10) = *(v9 + 48);
  if (v10)
  {
    goto LABEL_20;
  }

  while (v10 == 255)
  {
    v9 = *v1;
    v10 = *(*v1 + 192);
    if (v10 < *(*v1 + 200))
    {
LABEL_15:
      *(v9 + 192) = v10 + 1;
      LOBYTE(v10) = *v10;
      continue;
    }

    LOBYTE(v10) = 0;
    if (*(v9 + 48))
    {
LABEL_20:
      v11 = (v9 + 56);
      result = (*(v9 + 16))(*(v9 + 40), v9 + 56, *(v9 + 52));
      *(v9 + 184) += *(v9 + 192) - *(v9 + 208);
      if (result)
      {
        v12 = &v11[result];
        LOBYTE(v10) = *v11;
      }

      else
      {
        LOBYTE(v10) = 0;
        *(v9 + 48) = 0;
        v12 = (v9 + 57);
        *(v9 + 56) = 0;
      }

      *(v9 + 192) = v9 + 57;
      *(v9 + 200) = v12;
    }
  }

  if (!v10)
  {
    v3 = 255;
    goto LABEL_4;
  }

  *(v2 + 2088) = v10;
  *(v2 + 2092) = 1;
  return result;
}

uint64_t sub_29AB5D200(uint64_t a1, _OWORD *a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8)
{
  v8 = (a1 + 0x4000);
  if (*(a1 + 18488))
  {
    goto LABEL_2;
  }

  v12 = a4;
  if (*(a1 + 18468) <= 15)
  {
    sub_29AB5D044(a1);
  }

  if (!v8[527])
  {
    a2[6] = 0u;
    a2[7] = 0u;
    a2[4] = 0u;
    a2[5] = 0u;
    a2[2] = 0u;
    a2[3] = 0u;
    *a2 = 0u;
    a2[1] = 0u;
    if (v8[521] <= 15)
    {
      sub_29AB5D044(a1);
    }

    v18 = v8[520];
    v19 = *(a3 + (v18 >> 23));
    if (v19 == 255)
    {
      v29 = 0;
      v30 = (a3 + 1580);
      do
      {
        v31 = *v30++;
        ++v29;
      }

      while (WORD1(v18) >= v31);
      v32 = v8[521];
      if (v29 == 8)
      {
        v8[521] = v32 - 16;
        goto LABEL_2;
      }

      v33 = v29 + 9;
      if (v32 < v29 + 9)
      {
        goto LABEL_2;
      }

      v34 = (dword_29B6C3BF4[v29 + 9] & (v18 >> (23 - v29))) + v30[17];
      if (v34 > 0xFF)
      {
        goto LABEL_2;
      }

      v24 = v32 - v29 - 9;
      v8[521] = v24;
      v8[520] = v18 << v33;
      v25 = (a3 + v34 + 1024);
    }

    else
    {
      v20 = a3 + v19;
      v21 = *(a3 + v19 + 1280);
      v22 = v8[521];
      v23 = __OFSUB__(v22, v21);
      v24 = v22 - v21;
      if (v24 < 0 != v23)
      {
        goto LABEL_2;
      }

      v8[520] = v18 << v21;
      v8[521] = v24;
      v25 = (v20 + 1024);
    }

    v26 = *v25;
    if (v26 < 0x10)
    {
      if (!*v25)
      {
        goto LABEL_22;
      }

      if (v24 < v26)
      {
        sub_29AB5D044(a1);
        v24 = v8[521];
      }

      v27 = v24 - v26;
      if (v24 >= v26)
      {
        v35 = v8[520];
        v36 = dword_29B6C3BF4[v26];
        v37 = __ROR4__(v35, -v26);
        v8[520] = v37 & ~v36;
        v38 = v37 & v36;
        v8[521] = v27;
        v39 = dword_29B6C3C38[v26];
        if (v35 < 0)
        {
          v39 = 0;
        }

        v28 = v39 + v38;
      }

      else
      {
LABEL_22:
        v28 = 0;
      }

      v40 = a1 + 96 * v12;
      v41 = *(v40 + 18104);
      if (((v41 ^ v28) & 0x80000000) == 0)
      {
        v42 = (0x80000000 - v28) > v41;
        if ((v41 & v28) < 0 == __OFSUB__(v28 ^ 0x7FFFFFFF, v41))
        {
          v42 = (v28 ^ 0x7FFFFFFF) < v41;
        }

        if (v42)
        {
          v9 = (off_2A1B71BE0)(&off_2A1B71BE0, a2, a3, a4, a5, a6, a7, a8);
          result = 0;
          v11 = "bad delta";
          goto LABEL_3;
        }
      }

      v43 = v41 + v28;
      *(v40 + 18104) = v43;
      v44 = v8[528];
      if (((1 << v44) ^ v43) < 0)
      {
        if (v44 == 31)
        {
          if (v43 < 1)
          {
            goto LABEL_45;
          }
        }

        else if ((v43 + (0x8000u >> v44)) < 0 == __OFADD__(v43, 0x8000u >> v44))
        {
LABEL_45:
          *a2 = v43 << v44;
          return 1;
        }
      }

      else if ((0x7FFFu >> v44) >= v43)
      {
        goto LABEL_45;
      }
    }

LABEL_2:
    v9 = (off_2A1B71BE0)(&off_2A1B71BE0, a2, a3, a4, a5, a6, a7, a8);
    result = 0;
    v11 = "can't merge dc and ac";
LABEL_3:
    *v9 = v11;
    return result;
  }

  v16 = v8[521];
  if (v16 <= 0)
  {
    sub_29AB5D044(a1);
    v16 = v8[521];
    if (v16 < 1)
    {
      return 1;
    }
  }

  v17 = v8[520];
  v8[520] = 2 * v17;
  v8[521] = v16 - 1;
  result = 1;
  if (v17 < 0)
  {
    *a2 += 1 << v8[528];
  }

  return result;
}

uint64_t sub_29AB5D520(uint64_t a1, int *a2, int *a3, float *a4, uint64_t a5, int a6, unsigned __int16 *a7, int *a8)
{
  v11 = a4;
  v57 = *MEMORY[0x29EDCA608];
  v15 = *a8;
  v54 = a8[240];
  v55 = v15;
  v16 = -8;
  v17 = a4;
  do
  {
    sub_29AB5D91C(v17, v17 + 1, v17 + 2, v17 + 3, v17 + 4, v17 + 5, v17 + 6, v17 + 7);
    v16 += 8;
    v17 += 8;
  }

  while (v16 < 0x38);
  for (i = 0; i != 8; ++i)
  {
    sub_29AB5D91C(&v11[i], &v11[i + 8], &v11[i + 16], &v11[i + 24], &v11[i + 32], &v11[i + 40], &v11[i + 48], &v11[i + 56]);
  }

  v19 = 0;
  LODWORD(v20) = 0;
  do
  {
    v21 = 0;
    v22 = a5 + 4 * v20;
    v20 = v20;
    do
    {
      v23 = v11[v21] * *(v22 + v21 * 4);
      if (v23 >= 0.0)
      {
        v24 = 0.5;
      }

      else
      {
        v24 = -0.5;
      }

      v56[byte_29B6C4E38[v20++]] = (v23 + v24);
      ++v21;
    }

    while (v21 != 8);
    ++v19;
    v11 += 8;
  }

  while (v19 != 8);
  v25 = v56[0];
  v26 = v56[0] - a6;
  if (v56[0] == a6)
  {
    v27 = a1;
    v28 = a2;
    v29 = a3;
    v30 = a7;
  }

  else
  {
    if (v26 >= 0)
    {
      v31 = v56[0] - a6;
    }

    else
    {
      v31 = a6 - v56[0];
    }

    v32 = 32 - __clz(v31);
    if (v31 < 2)
    {
      v33 = 1;
    }

    else
    {
      v33 = v32;
    }

    v53 = v33;
    v52 = (v26 + (v26 >> 31)) & ~(-1 << v33);
    sub_29AB5D854(a1, a2, a3, &a7[2 * v33]);
    v30 = &v52;
    v27 = a1;
    v28 = a2;
    v29 = a3;
  }

  sub_29AB5D854(v27, v28, v29, v30);
  v34 = 64;
  while (1)
  {
    v35 = (v34 - 1);
    if (v56[v35])
    {
      break;
    }

    --v34;
    if (v35 <= 1)
    {
      goto LABEL_44;
    }
  }

  if (v35 < 1)
  {
    goto LABEL_44;
  }

  v50 = v25;
  v36 = 1;
  do
  {
    v37 = 0;
    v38 = v36;
    v39 = -1;
    v40 = v36;
    do
    {
      v41 = v37;
      v42 = v56[v40];
      ++v39;
      if (v40 > v35)
      {
        break;
      }

      ++v40;
      ++v37;
    }

    while (!v42);
    v43 = v39;
    if (v39 >= 16)
    {
      v44 = v41 >> 4;
      if (v44 <= 1)
      {
        v45 = 1;
      }

      else
      {
        v45 = v44;
      }

      do
      {
        sub_29AB5D854(a1, a2, a3, &v54);
        --v45;
      }

      while (v45);
      v43 = v39 & 0xF;
    }

    if (v42 >= 0)
    {
      v46 = v42;
    }

    else
    {
      v46 = -v42;
    }

    v47 = 32 - __clz(v46);
    if (v46 < 2)
    {
      v48 = 1;
    }

    else
    {
      v48 = v47;
    }

    v53 = v48;
    v52 = (v42 + (v42 >> 31)) & ~(-1 << v48);
    sub_29AB5D854(a1, a2, a3, &a8[16 * v43 + v48]);
    sub_29AB5D854(a1, a2, a3, &v52);
    v36 = v38 + v39 + 1;
  }

  while (v35 > v38 + v39);
  v25 = v50;
  if (v34 != 64)
  {
LABEL_44:
    sub_29AB5D854(a1, a2, a3, &v55);
  }

  return v25;
}

uint64_t sub_29AB5D854(uint64_t result, int *a2, int *a3, unsigned __int16 *a4)
{
  v6 = *a3 + a4[1];
  v7 = (*a4 << (24 - (*a3 + a4[1]))) | *a2;
  if (v6 < 8)
  {
    v9 = *a3 + a4[1];
  }

  else
  {
    v8 = result;
    do
    {
      v13 = BYTE2(v7);
      result = (*v8)(*(v8 + 8), &v13, 1);
      if ((~v7 & 0xFF0000) == 0)
      {
        v14 = 0;
        result = (*v8)(*(v8 + 8), &v14, 1);
      }

      v7 <<= 8;
      v9 = v6 - 8;
      v12 = __OFSUB__(v6, 15);
      v10 = v6 == 15;
      v11 = v6 - 15 < 0;
      v6 -= 8;
    }

    while (!(v11 ^ v12 | v10));
  }

  *a2 = v7;
  *a3 = v9;
  return result;
}