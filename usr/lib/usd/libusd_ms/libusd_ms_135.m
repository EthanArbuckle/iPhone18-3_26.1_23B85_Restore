void sub_29AC420C0(_Unwind_Exception *a1)
{
  v3 = 256;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[32];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v6 = v1[31];
      if ((v6 & 7) != 0)
      {
        atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v7 = v1[30];
      if ((v7 & 7) != 0)
      {
        atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v8 = v1[29];
      if ((v8 & 7) != 0)
      {
        atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v9 = v1[28];
      if ((v9 & 7) != 0)
      {
        atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v10 = v1[27];
      if ((v10 & 7) != 0)
      {
        atomic_fetch_add_explicit((v10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v11 = v1[26];
      if ((v11 & 7) != 0)
      {
        atomic_fetch_add_explicit((v11 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v12 = v1[25];
      if ((v12 & 7) != 0)
      {
        atomic_fetch_add_explicit((v12 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v13 = v1[24];
      if ((v13 & 7) != 0)
      {
        atomic_fetch_add_explicit((v13 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v14 = v1[23];
      if ((v14 & 7) != 0)
      {
        atomic_fetch_add_explicit((v14 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v15 = v1[22];
      if ((v15 & 7) != 0)
      {
        atomic_fetch_add_explicit((v15 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v16 = v1[21];
      if ((v16 & 7) != 0)
      {
        atomic_fetch_add_explicit((v16 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v17 = v1[20];
      if ((v17 & 7) != 0)
      {
        atomic_fetch_add_explicit((v17 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v18 = v1[19];
      if ((v18 & 7) != 0)
      {
        atomic_fetch_add_explicit((v18 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v19 = v1[18];
      if ((v19 & 7) != 0)
      {
        atomic_fetch_add_explicit((v19 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v20 = v1[17];
      if ((v20 & 7) != 0)
      {
        atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v21 = v1[16];
      if ((v21 & 7) != 0)
      {
        atomic_fetch_add_explicit((v21 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v22 = v1[15];
      if ((v22 & 7) != 0)
      {
        atomic_fetch_add_explicit((v22 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v23 = v1[14];
      if ((v23 & 7) != 0)
      {
        atomic_fetch_add_explicit((v23 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v24 = v1[13];
      if ((v24 & 7) != 0)
      {
        atomic_fetch_add_explicit((v24 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v25 = v1[12];
      if ((v25 & 7) != 0)
      {
        atomic_fetch_add_explicit((v25 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v26 = v1[11];
      if ((v26 & 7) != 0)
      {
        atomic_fetch_add_explicit((v26 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v27 = v1[10];
      if ((v27 & 7) != 0)
      {
        atomic_fetch_add_explicit((v27 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v28 = v1[9];
      if ((v28 & 7) != 0)
      {
        atomic_fetch_add_explicit((v28 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v29 = v1[8];
      if ((v29 & 7) != 0)
      {
        atomic_fetch_add_explicit((v29 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v30 = v1[7];
      if ((v30 & 7) != 0)
      {
        atomic_fetch_add_explicit((v30 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v31 = v1[6];
      if ((v31 & 7) != 0)
      {
        atomic_fetch_add_explicit((v31 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v32 = v1[5];
      if ((v32 & 7) != 0)
      {
        atomic_fetch_add_explicit((v32 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v33 = v1[4];
      if ((v33 & 7) != 0)
      {
        atomic_fetch_add_explicit((v33 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v34 = v1[3];
      if ((v34 & 7) != 0)
      {
        atomic_fetch_add_explicit((v34 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v35 = v1[2];
      if ((v35 & 7) != 0)
      {
        atomic_fetch_add_explicit((v35 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v36 = v1[1];
      if ((v36 & 7) != 0)
      {
        atomic_fetch_add_explicit((v36 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

pxrInternal__aapl__pxrReserved__::HdLight *pxrInternal__aapl__pxrReserved__::HdLight::HdLight(pxrInternal__aapl__pxrReserved__::HdLight *this, const pxrInternal__aapl__pxrReserved__::SdfPath *a2)
{
  v3 = pxrInternal__aapl__pxrReserved__::HdSprim::HdSprim(this, a2);
  *v3 = &unk_2A207C268;
  *(v3 + 2) = 0;
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPrimTag,24u,8u,16384u>::Handle::Handle(v3 + 4);
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::Handle(this + 5);
  return this;
}

void pxrInternal__aapl__pxrReserved__::HdLight::~HdLight(pxrInternal__aapl__pxrReserved__::HdLight *this)
{
  *this = &unk_2A207C268;
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(this + 5);
  sub_29A1DE3A4(this + 4);

  pxrInternal__aapl__pxrReserved__::HdSprim::~HdSprim(this);
}

_DWORD *pxrInternal__aapl__pxrReserved__::HdLight::_UpdateInstancer(pxrInternal__aapl__pxrReserved__::HdLight *this, pxrInternal__aapl__pxrReserved__::HdSceneDelegate *a2, const pxrInternal__aapl__pxrReserved__::SdfPath *a3)
{
  result = pxrInternal__aapl__pxrReserved__::HdChangeTracker::IsInstancerDirty(*a3, (this + 8), a3);
  if (result)
  {
    (*(*a2 + 264))(&v7, a2, this + 8);
    if (v7 != *(this + 2))
    {
      v6 = *(a2 + 1);
      if (pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPrimTag,24u,8u,16384u>::Handle::operator BOOL(this + 4))
      {
        pxrInternal__aapl__pxrReserved__::HdChangeTracker::RemoveInstancerSprimDependency((v6 + 440), (this + 16), (this + 8));
      }

      if (pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPrimTag,24u,8u,16384u>::Handle::operator BOOL(&v7))
      {
        pxrInternal__aapl__pxrReserved__::HdChangeTracker::AddInstancerSprimDependency((v6 + 440), &v7, (this + 8));
      }

      sub_29A2258F0(this + 4, &v7);
      sub_29A225948(this + 5, &v7 + 1);
    }

    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v7 + 1);
    return sub_29A1DE3A4(&v7);
  }

  return result;
}

void sub_29AC42648(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29A1DCEA8(va);
  _Unwind_Resume(a1);
}

void *pxrInternal__aapl__pxrReserved__::HdLight::StringifyDirtyBits@<X0>(pxrInternal__aapl__pxrReserved__::HdLight *this@<X0>, std::string *a2@<X8>)
{
  if (this)
  {
    v3 = this;
    sub_29A008864(v7);
    if (v3)
    {
      sub_29A00911C(&v8, "Transform ", 10);
    }

    if ((v3 & 2) != 0)
    {
      sub_29A00911C(&v8, "Params ", 7);
    }

    if ((v3 & 4) != 0)
    {
      sub_29A00911C(&v8, "ShadowParams ", 13);
    }

    if ((v3 & 8) != 0)
    {
      sub_29A00911C(&v8, "Collection ", 11);
    }

    if ((v3 & 0x10) != 0)
    {
      sub_29A00911C(&v8, "Resource ", 9);
    }

    if ((v3 & 0x10000) != 0)
    {
      sub_29A00911C(&v8, "Instancer ", 10);
    }

    std::stringbuf::str();
    pxrInternal__aapl__pxrReserved__::TfStringTrimRight(" \n\t\r", &__p, a2);
    if (SHIBYTE(__p.__r_.__value_.__r.__words[2]) < 0)
    {
      operator delete(__p.__r_.__value_.__l.__data_);
    }

    v7[0] = *MEMORY[0x29EDC9528];
    v4 = *(MEMORY[0x29EDC9528] + 72);
    *(v7 + *(v7[0] - 24)) = *(MEMORY[0x29EDC9528] + 64);
    v8 = v4;
    v9 = MEMORY[0x29EDC9570] + 16;
    if (v11 < 0)
    {
      operator delete(v10[7].__locale_);
    }

    v9 = MEMORY[0x29EDC9568] + 16;
    std::locale::~locale(v10);
    std::iostream::~basic_iostream();
    return MEMORY[0x29C2C4390](&v12);
  }

  else
  {

    return sub_29A008E78(a2, "Clean");
  }
}

void sub_29AC428E0(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, char a15)
{
  if (a14 < 0)
  {
    operator delete(__p);
  }

  sub_29A008B0C(&a15);
  _Unwind_Resume(a1);
}

void pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens_StaticTokenType::~HdLightSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens_StaticTokenType *this)
{
  v2 = (this + 8);
  sub_29A124AB0(&v2);
  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

{
  v2 = (this + 8);
  sub_29A124AB0(&v2);
  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens_StaticTokenType::HdLightSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens_StaticTokenType *this)
{
  v9 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "light", 0);
  v5 = *v2;
  v3 = v2 + 1;
  v4 = v5;
  v8 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v8 = v6;
    }
  }

  *v3 = 0;
  v3[1] = 0;
  v3[2] = 0;
  sub_29A12EF7C(v3, &v8, &v9, 1uLL);
  if ((v8 & 7) != 0)
  {
    atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  return this;
}

void pxrInternal__aapl__pxrReserved__::HdLightSchema::GetFromParent(uint64_t *a1@<X0>, void *a2@<X8>)
{
  v3 = *a1;
  if (*a1)
  {
    if (!atomic_load(&pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens))
    {
      sub_29ABEE510(&pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens);
    }

    (*(*v3 + 24))(&v8, v3);
    sub_29ABC3244(&v8, &v10);
    v6 = v10;
    v5 = v11;
    if (v11)
    {
      atomic_fetch_add_explicit(&v11->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v5);
      v7 = v11;
      *a2 = v6;
      a2[1] = v5;
      if (v7)
      {
        sub_29A014BEC(v7);
      }
    }

    else
    {
      *a2 = v10;
      a2[1] = 0;
    }

    if (v9)
    {
      sub_29A014BEC(v9);
    }
  }

  else
  {
    v10 = 0;
    v11 = 0;
    *a2 = 0;
    a2[1] = 0;
  }
}

pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdLightSchema::GetSchemaToken(pxrInternal__aapl__pxrReserved__::HdLightSchema *this)
{
  result = atomic_load(&pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens);
  if (!result)
  {
    return sub_29ABEE510(&pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens);
  }

  return result;
}

void *pxrInternal__aapl__pxrReserved__::HdLightSchema::GetDefaultLocator(pxrInternal__aapl__pxrReserved__::HdLightSchema *this)
{
  if ((atomic_load_explicit(&qword_2A174A790, memory_order_acquire) & 1) == 0 && __cxa_guard_acquire(&qword_2A174A790))
  {
    v2 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens);
    if (!v2)
    {
      v2 = sub_29ABEE510(&pxrInternal__aapl__pxrReserved__::HdLightSchemaTokens);
    }

    pxrInternal__aapl__pxrReserved__::HdDataSourceLocator::HdDataSourceLocator(&unk_2A174A758, v2);
    __cxa_atexit(sub_29ABC33B4, &unk_2A174A758, &dword_299FE7000);
    __cxa_guard_release(&qword_2A174A790);
  }

  return &unk_2A174A758;
}

void *pxrInternal__aapl__pxrReserved__::HdMapContainerDataSource::HdMapContainerDataSource(void *a1, uint64_t a2, void *a3)
{
  *a1 = &unk_2A207C2B8;
  sub_29AC42EC4((a1 + 1), a2);
  v5 = a3[1];
  a1[5] = *a3;
  a1[6] = v5;
  if (v5)
  {
    atomic_fetch_add_explicit((v5 + 8), 1uLL, memory_order_relaxed);
  }

  return a1;
}

void pxrInternal__aapl__pxrReserved__::HdMapContainerDataSource::~HdMapContainerDataSource(pxrInternal__aapl__pxrReserved__::HdMapContainerDataSource *this)
{
  *this = &unk_2A207C2B8;
  v2 = *(this + 6);
  if (v2)
  {
    sub_29A014BEC(v2);
  }

  sub_29AC42F5C(this + 8);

  pxrInternal__aapl__pxrReserved__::HdDataSourceBase::~HdDataSourceBase(this);
}

{
  pxrInternal__aapl__pxrReserved__::HdMapContainerDataSource::~HdMapContainerDataSource(this);

  operator delete(v1);
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMapContainerDataSource::GetNames@<X0>(pxrInternal__aapl__pxrReserved__::HdMapContainerDataSource *this@<X0>, void *a2@<X8>)
{
  result = *(this + 5);
  if (result)
  {
    return (*(*result + 16))();
  }

  *a2 = 0;
  a2[1] = 0;
  a2[2] = 0;
  return result;
}

void pxrInternal__aapl__pxrReserved__::HdMapContainerDataSource::Get(uint64_t a1@<X0>, void *a2@<X8>)
{
  v4 = *(a1 + 40);
  if (v4)
  {
    (*(*v4 + 24))(&v7);
    if (v7)
    {
      v5 = *(a1 + 32);
      if (v5)
      {
        (*(*v5 + 48))(v5, &v7);
      }

      else
      {
        v6 = v8;
        *a2 = v7;
        a2[1] = v6;
        if (v6)
        {
          atomic_fetch_add_explicit(&v6->__shared_owners_, 1uLL, memory_order_relaxed);
        }
      }
    }

    else
    {
      *a2 = 0;
      a2[1] = 0;
    }

    if (v8)
    {
      sub_29A014BEC(v8);
    }
  }

  else
  {
    *a2 = 0;
    a2[1] = 0;
  }
}

void sub_29AC42EAC(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, std::__shared_weak_count *a10)
{
  if (a10)
  {
    sub_29A014BEC(a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_29AC42EC4(uint64_t a1, uint64_t a2)
{
  v3 = *(a2 + 24);
  if (v3)
  {
    if (v3 == a2)
    {
      *(a1 + 24) = a1;
      (*(**(a2 + 24) + 24))(*(a2 + 24), a1);
    }

    else
    {
      *(a1 + 24) = (*(*v3 + 16))(v3);
    }
  }

  else
  {
    *(a1 + 24) = 0;
  }

  return a1;
}

uint64_t sub_29AC42F5C(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

pxrInternal__aapl__pxrReserved__::HdSprim *pxrInternal__aapl__pxrReserved__::HdMaterial::HdMaterial(pxrInternal__aapl__pxrReserved__::HdMaterial *this, const pxrInternal__aapl__pxrReserved__::SdfPath *a2)
{
  result = pxrInternal__aapl__pxrReserved__::HdSprim::HdSprim(this, a2);
  *result = &unk_2A207C300;
  return result;
}

const void ****pxrInternal__aapl__pxrReserved__::HdConvertToHdMaterialNetwork2@<X0>(uint64_t a1@<X0>, BOOL *a2@<X1>, uint64_t a3@<X8>)
{
  *(a3 + 8) = 0;
  *(a3 + 16) = 0;
  *a3 = a3 + 8;
  *(a3 + 32) = 0;
  *(a3 + 24) = a3 + 32;
  *(a3 + 48) = 0u;
  *(a3 + 40) = 0;
  *(a3 + 64) = 0u;
  v4 = *a1;
  v13 = (a1 + 8);
  if (*a1 != a1 + 8)
  {
    do
    {
      v5 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialTerminalTokens);
      if (!v5)
      {
        v5 = sub_29AC4497C(&pxrInternal__aapl__pxrReserved__::HdMaterialTerminalTokens);
      }

      v6 = v4[8];
      v7 = v4[9];
      if (a2 && (*(v5 + 2) ^ v4[4]) <= 7)
      {
        *a2 = v6 != v7;
      }

      if (v6 != v7)
      {
        sub_29AC44A08();
      }

      v8 = v4[1];
      if (v8)
      {
        do
        {
          v9 = v8;
          v8 = *v8;
        }

        while (v8);
      }

      else
      {
        do
        {
          v9 = v4[2];
          v10 = *v9 == v4;
          v4 = v9;
        }

        while (!v10);
      }

      v4 = v9;
    }

    while (v9 != v13);
  }

  return pxrInternal__aapl__pxrReserved__::VtDictionary::operator=((a3 + 72), (a1 + 48));
}

uint64_t sub_29AC43364(uint64_t *a1, uint64_t a2)
{
  v4 = a1[1];
  if (v4 >= a1[2])
  {
    result = sub_29AC44FB0(a1, a2);
  }

  else
  {
    sub_29A1DDD84(a1[1], a2);
    sub_29A1DDDC0((v4 + 4), (a2 + 4));
    *(v4 + 8) = *(a2 + 8);
    *(a2 + 8) = 0;
    result = v4 + 16;
  }

  a1[1] = result;
  return result;
}

_DWORD *sub_29AC433D8(uint64_t a1)
{
  v2 = *(a1 + 8);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 4));

  return sub_29A1DE3A4(a1);
}

uint64_t sub_29AC43430(uint64_t a1)
{
  sub_29A184A10((a1 + 72), 0);
  v3 = (a1 + 48);
  sub_29A124AB0(&v3);
  sub_29AC329F8(a1 + 24, *(a1 + 32));
  sub_29AC32AB8(a1, *(a1 + 8));
  return a1;
}

uint64_t sub_29AC434A0@<X0>(void *a1@<X0>, uint64_t a2@<X1>, uint64_t *a3@<X2>, pxrInternal__aapl__pxrReserved__::SdfPath *a4@<X3>, uint64_t a5@<X8>)
{
  v10 = atomic_load(&qword_2A174A798);
  if (!v10)
  {
    v10 = sub_29AC4420C();
  }

  v11 = sub_29AC43E68(a1, a2, a3, a4, v10);
  v12 = atomic_load(&qword_2A174A798);
  if (!v12)
  {
    v12 = sub_29AC4420C();
  }

  v13 = sub_29AC43E68(a1, a2, a3, a4, (v12 + 8));
  v14 = atomic_load(&qword_2A174A798);
  if (!v14)
  {
    v14 = sub_29AC4420C();
  }

  v15 = sub_29AC43E68(a1, a2, a3, a4, (v14 + 16));
  v16 = atomic_load(&qword_2A174A798);
  if (!v16)
  {
    v16 = sub_29AC4420C();
  }

  v17 = atomic_load(&qword_2A174A798);
  if (!v17)
  {
    v17 = sub_29AC4420C();
  }

  sub_29AC440EC(a2, a3, (v16 + 72), (v17 + 128), &v31);
  v18 = atomic_load(&qword_2A174A798);
  if (!v18)
  {
    v18 = sub_29AC4420C();
  }

  if ((*(v18 + 88) ^ v31) >= 8)
  {
    v20 = atomic_load(&qword_2A174A798);
    if (!v20)
    {
      v20 = sub_29AC4420C();
    }

    if ((*(v20 + 96) ^ v31) >= 8)
    {
      v21 = atomic_load(&qword_2A174A798);
      if (!v21)
      {
        v21 = sub_29AC4420C();
      }

      if ((*(v21 + 104) ^ v31) >= 8)
      {
        v22 = atomic_load(&qword_2A174A798);
        if (!v22)
        {
          v22 = sub_29AC4420C();
        }

        if ((*(v22 + 112) ^ v31) >= 8)
        {
          v23 = atomic_load(&qword_2A174A798);
          if (!v23)
          {
            v23 = sub_29AC4420C();
          }

          if ((*(v23 + 120) ^ v31) >= 8)
          {
            if (!atomic_load(&qword_2A174A798))
            {
              sub_29AC4420C();
            }

            v19 = 5;
          }

          else
          {
            v19 = 3;
          }
        }

        else
        {
          v19 = 4;
        }
      }

      else
      {
        v19 = 2;
      }
    }

    else
    {
      v19 = 1;
    }
  }

  else
  {
    v19 = 0;
  }

  if ((v31 & 7) != 0)
  {
    atomic_fetch_add_explicit((v31 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v25 = atomic_load(&qword_2A174A798);
  if (!v25)
  {
    v25 = sub_29AC4420C();
  }

  v26 = atomic_load(&qword_2A174A798);
  if (!v26)
  {
    v26 = sub_29AC4420C();
  }

  sub_29AC440EC(a2, a3, (v25 + 80), (v26 + 96), &v31);
  v27 = atomic_load(&qword_2A174A798);
  if (!v27)
  {
    v27 = sub_29AC4420C();
  }

  v28 = v31;
  v29 = *(v27 + 88);
  if ((v31 & 7) != 0)
  {
    atomic_fetch_add_explicit((v31 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  return pxrInternal__aapl__pxrReserved__::HdSamplerParameters::HdSamplerParameters(a5, v11, v13, v15, v19, (v29 ^ v28) > 7, 0, 0, 0, 16);
}

void sub_29AC43764(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10)
{
  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(a1);
}

uint64_t pxrInternal__aapl__pxrReserved__::operator==(uint64_t a1, void *a2)
{
  v3 = *a1;
  v2 = *(a1 + 8);
  if ((v2 - *a1) != (a2[1] - *a2))
  {
    return 0;
  }

  if (v3 != v2)
  {
    v6 = (*a2 + 16);
    while (v3[2] == *v6 && (v6[1] ^ v3[3]) <= 7 && *v3 == *(v6 - 2) && (*(v6 - 1) ^ v3[1]) <= 7)
    {
      v3 += 4;
      v6 += 4;
      if (v3 == v2)
      {
        goto LABEL_9;
      }
    }

    return 0;
  }

LABEL_9:
  v7 = *(a1 + 24);
  v8 = *(a1 + 32);
  v9 = a2[3];
  if (v8 - v7 != a2[4] - v9)
  {
    return 0;
  }

  while (v7 != v8)
  {
    result = pxrInternal__aapl__pxrReserved__::operator==(v7, v9);
    if (!result)
    {
      return result;
    }

    v7 += 40;
    v9 += 5;
  }

  v12 = *(a1 + 48);
  v11 = *(a1 + 56);
  v13 = a2[6];
  if (v11 - v12 != a2[7] - v13)
  {
    return 0;
  }

  if (v12 == v11)
  {
    return 1;
  }

  v14 = v12 + 8;
  do
  {
    v15 = *v13++;
    v16 = v15 ^ *(v14 - 8);
    result = v16 < 8;
    v17 = v16 > 7 || v14 == v11;
    v14 += 8;
  }

  while (!v17);
  return result;
}

uint64_t pxrInternal__aapl__pxrReserved__::operator==(uint64_t a1, void *a2, char *a3)
{
  if (*(a1 + 16) != a2[2])
  {
    return 0;
  }

  v5 = (a1 + 8);
  v6 = *a1;
  if (*a1 != a1 + 8)
  {
    v7 = *a2;
    while ((v7[4] ^ v6[4]) <= 7 && pxrInternal__aapl__pxrReserved__::operator==((v6 + 5), v7 + 5))
    {
      v8 = v6[1];
      v9 = v6;
      if (v8)
      {
        do
        {
          v6 = v8;
          v8 = *v8;
        }

        while (v8);
      }

      else
      {
        do
        {
          v6 = v9[2];
          v10 = *v6 == v9;
          v9 = v6;
        }

        while (!v10);
      }

      v11 = v7[1];
      if (v11)
      {
        do
        {
          v12 = v11;
          v11 = *v11;
        }

        while (v11);
      }

      else
      {
        do
        {
          v12 = v7[2];
          v10 = *v12 == v7;
          v7 = v12;
        }

        while (!v10);
      }

      v7 = v12;
      if (v6 == v5)
      {
        goto LABEL_17;
      }
    }

    return 0;
  }

LABEL_17:
  v14 = *(a1 + 24);
  v13 = *(a1 + 32);
  v15 = a2[3];
  if (v13 - v14 != a2[4] - v15)
  {
    return 0;
  }

  while (v14 != v13)
  {
    if (*v14 != *v15)
    {
      return 0;
    }

    v14 += 8;
    ++v15;
  }

  return pxrInternal__aapl__pxrReserved__::operator==((a1 + 48), a2 + 6, a3);
}

uint64_t sub_29AC43E68(void *a1, uint64_t a2, uint64_t *a3, pxrInternal__aapl__pxrReserved__::SdfPath *a4, uint64_t *a5)
{
  v10 = atomic_load(&qword_2A174A798);
  if (!v10)
  {
    v10 = sub_29AC4420C();
  }

  sub_29AC440EC(a2, a3, a5, (v10 + 56), &v31);
  v11 = atomic_load(&qword_2A174A798);
  if (!v11)
  {
    v11 = sub_29AC4420C();
  }

  v12 = v31;
  if ((*(v11 + 24) ^ v31) >= 8)
  {
    v14 = atomic_load(&qword_2A174A798);
    if (!v14)
    {
      v14 = sub_29AC4420C();
    }

    v12 = v31;
    if ((*(v14 + 32) ^ v31) >= 8)
    {
      v15 = atomic_load(&qword_2A174A798);
      if (!v15)
      {
        v15 = sub_29AC4420C();
      }

      v12 = v31;
      if ((*(v15 + 40) ^ v31) >= 8)
      {
        v16 = atomic_load(&qword_2A174A798);
        if (!v16)
        {
          v16 = sub_29AC4420C();
        }

        v12 = v31;
        if ((*(v16 + 48) ^ v31) >= 8)
        {
          v17 = atomic_load(&qword_2A174A798);
          if (!v17)
          {
            v17 = sub_29AC4420C();
          }

          v12 = v31;
          if ((*(v17 + 56) ^ v31) > 7)
          {
            if (pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPrimTag,24u,8u,16384u>::Handle::operator BOOL(a4))
            {
              v26 = "hd/material.cpp";
              v27 = "_ResolveWrapSamplerParameter";
              v28 = 186;
              v29 = "HdWrap pxrInternal__aapl__pxrReserved__::_ResolveWrapSamplerParameter(const TfToken &, const std::map<TfToken, VtValue> &, const SdrShaderNodeConstPtr &, const SdfPath &, const TfToken &)";
              v30 = 0;
              Text = pxrInternal__aapl__pxrReserved__::SdfPath::GetText(a4);
              v22 = v12 & 0xFFFFFFFFFFFFFFF8;
              if ((v12 & 0xFFFFFFFFFFFFFFF8) != 0)
              {
                v23 = (v22 + 16);
                if (*(v22 + 39) < 0)
                {
                  v23 = *v23;
                }
              }

              else
              {
                v23 = "";
              }

              pxrInternal__aapl__pxrReserved__::Tf_PostWarningHelper(&v26, "Unknown wrap mode on prim %s: %s", v21, Text, v23);
            }

            else
            {
              v26 = "hd/material.cpp";
              v27 = "_ResolveWrapSamplerParameter";
              v28 = 188;
              v29 = "HdWrap pxrInternal__aapl__pxrReserved__::_ResolveWrapSamplerParameter(const TfToken &, const std::map<TfToken, VtValue> &, const SdrShaderNodeConstPtr &, const SdfPath &, const TfToken &)";
              v30 = 0;
              v24 = v12 & 0xFFFFFFFFFFFFFFF8;
              if ((v12 & 0xFFFFFFFFFFFFFFF8) != 0)
              {
                v25 = (v24 + 16);
                if (*(v24 + 39) < 0)
                {
                  v25 = *v25;
                }
              }

              else
              {
                v25 = "";
              }

              pxrInternal__aapl__pxrReserved__::Tf_PostWarningHelper(&v26, "Unknown wrap mode: %s", v19, v25);
            }

            result = 4;
          }

          else
          {
            v18 = atomic_load(&qword_2A174A798);
            if (!v18)
            {
              v18 = sub_29AC4420C();
            }

            if ((*(v18 + 64) ^ *a1) >= 8)
            {
              result = 4;
            }

            else
            {
              result = 5;
            }

            v12 = v31;
          }
        }

        else
        {
          result = 2;
        }
      }

      else
      {
        result = 0;
      }
    }

    else
    {
      result = 3;
    }
  }

  else
  {
    result = 1;
  }

  if ((v12 & 7) != 0)
  {
    atomic_fetch_add_explicit((v12 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  return result;
}

void sub_29AC440C4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16)
{
  if ((a16 & 7) != 0)
  {
    atomic_fetch_add_explicit((a16 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_29AC440EC@<X0>(uint64_t a1@<X0>, uint64_t *a2@<X1>, uint64_t *a3@<X2>, atomic_uint **a4@<X3>, atomic_uint **a5@<X8>)
{
  v10 = sub_29A31B8F0(a1, a3);
  if (a1 + 8 == v10 || (v11 = v10, v12 = (v10 + 40), result = sub_29A1FA710((v10 + 40)), !result))
  {
    result = *a2;
    if (*a2 && (result = pxrInternal__aapl__pxrReserved__::SdrShaderNode::GetShaderInput(result, a3)) != 0 && (v16 = (*(*result + 56))(result), result = sub_29A1FA710(v16), result))
    {
      v17 = *(v16 + 1);
      if ((v17 & 4) != 0)
      {
        result = (*((v17 & 0xFFFFFFFFFFFFFFF8) + 168))(v16);
        v16 = result;
      }

      v15 = *v16;
    }

    else
    {
      v15 = *a4;
    }
  }

  else
  {
    v14 = *(v11 + 48);
    if ((v14 & 4) != 0)
    {
      result = (*((v14 & 0xFFFFFFFFFFFFFFF8) + 168))(v12);
      v12 = result;
    }

    v15 = *v12;
  }

  *a5 = v15;
  if ((v15 & 7) != 0)
  {
    v18 = (v15 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v18, 2u, memory_order_relaxed) & 1) == 0)
    {
      *a5 = v18;
    }
  }

  return result;
}

unint64_t sub_29AC4420C()
{
  v41 = *MEMORY[0x29EDCA608];
  v0 = operator new(0xA0uLL);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0, "wrapS", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 1, "wrapT", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 2, "wrapR", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 3, "repeat", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 4, "mirror", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 5, "clamp", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 6, "black", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 7, "useMetadata", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 8, "HwUvTexture_1", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 9, "minFilter", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 10, "magFilter", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 11, "nearest", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 12, "linear", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 13, "nearestMipmapNearest", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 14, "nearestMipmapLinear", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 15, "linearMipmapNearest", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 16, "linearMipmapLinear", 0);
  v1 = v0 + 17;
  v2 = *v0;
  v24 = v2;
  if ((v2 & 7) != 0 && (atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v24 &= 0xFFFFFFFFFFFFFFF8;
  }

  v3 = v0[1];
  v25 = v3;
  if ((v3 & 7) != 0 && (atomic_fetch_add_explicit((v3 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v25 &= 0xFFFFFFFFFFFFFFF8;
  }

  v4 = v0[2];
  v26 = v4;
  if ((v4 & 7) != 0 && (atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v26 &= 0xFFFFFFFFFFFFFFF8;
  }

  v5 = v0[3];
  v27 = v5;
  if ((v5 & 7) != 0 && (atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v27 &= 0xFFFFFFFFFFFFFFF8;
  }

  v6 = v0[4];
  v28 = v6;
  if ((v6 & 7) != 0 && (atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v28 &= 0xFFFFFFFFFFFFFFF8;
  }

  v7 = v0[5];
  v29 = v7;
  if ((v7 & 7) != 0 && (atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v29 &= 0xFFFFFFFFFFFFFFF8;
  }

  v8 = v0[6];
  v30 = v8;
  if ((v8 & 7) != 0 && (atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v30 &= 0xFFFFFFFFFFFFFFF8;
  }

  v9 = v0[7];
  v31 = v9;
  if ((v9 & 7) != 0 && (atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v31 &= 0xFFFFFFFFFFFFFFF8;
  }

  v10 = v0[8];
  v32 = v10;
  if ((v10 & 7) != 0 && (atomic_fetch_add_explicit((v10 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v32 &= 0xFFFFFFFFFFFFFFF8;
  }

  v11 = v0[9];
  v33 = v11;
  if ((v11 & 7) != 0 && (atomic_fetch_add_explicit((v11 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v33 &= 0xFFFFFFFFFFFFFFF8;
  }

  v12 = v0[10];
  v34 = v12;
  if ((v12 & 7) != 0 && (atomic_fetch_add_explicit((v12 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v34 &= 0xFFFFFFFFFFFFFFF8;
  }

  v13 = v0[11];
  v35 = v13;
  if ((v13 & 7) != 0 && (atomic_fetch_add_explicit((v13 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v35 &= 0xFFFFFFFFFFFFFFF8;
  }

  v14 = v0[12];
  v36 = v14;
  if ((v14 & 7) != 0 && (atomic_fetch_add_explicit((v14 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v36 &= 0xFFFFFFFFFFFFFFF8;
  }

  v15 = v0[13];
  v37 = v15;
  if ((v15 & 7) != 0 && (atomic_fetch_add_explicit((v15 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v37 &= 0xFFFFFFFFFFFFFFF8;
  }

  v16 = v0[14];
  v38 = v16;
  if ((v16 & 7) != 0 && (atomic_fetch_add_explicit((v16 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v38 &= 0xFFFFFFFFFFFFFFF8;
  }

  v17 = v0[15];
  v39 = v17;
  if ((v17 & 7) != 0 && (atomic_fetch_add_explicit((v17 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v39 &= 0xFFFFFFFFFFFFFFF8;
  }

  v18 = v0[16];
  v40 = v18;
  if ((v18 & 7) != 0 && (atomic_fetch_add_explicit((v18 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    v40 &= 0xFFFFFFFFFFFFFFF8;
  }

  *v1 = 0;
  v0[18] = 0;
  v0[19] = 0;
  sub_29A12EF7C(v1, &v24, &v41, 0x11uLL);
  for (i = 128; i != -8; i -= 8)
  {
    v20 = *(&v24 + i);
    if ((v20 & 7) != 0)
    {
      atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  v21 = 0;
  atomic_compare_exchange_strong(&qword_2A174A798, &v21, v0);
  if (v21)
  {
    v22 = sub_29A5DB704(v0);
    operator delete(v22);
    return atomic_load(&qword_2A174A798);
  }

  return v0;
}

void sub_29AC44720(_Unwind_Exception *a1)
{
  v4 = 128;
  while (1)
  {
    v5 = *(v2 + v4);
    if ((v5 & 7) != 0)
    {
      atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v4 -= 8;
    if (v4 == -8)
    {
      v6 = v1[16];
      if ((v6 & 7) != 0)
      {
        atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v7 = v1[15];
      if ((v7 & 7) != 0)
      {
        atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v8 = v1[14];
      if ((v8 & 7) != 0)
      {
        atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v9 = v1[13];
      if ((v9 & 7) != 0)
      {
        atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v10 = v1[12];
      if ((v10 & 7) != 0)
      {
        atomic_fetch_add_explicit((v10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v11 = v1[11];
      if ((v11 & 7) != 0)
      {
        atomic_fetch_add_explicit((v11 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v12 = v1[10];
      if ((v12 & 7) != 0)
      {
        atomic_fetch_add_explicit((v12 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v13 = v1[9];
      if ((v13 & 7) != 0)
      {
        atomic_fetch_add_explicit((v13 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v14 = v1[8];
      if ((v14 & 7) != 0)
      {
        atomic_fetch_add_explicit((v14 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v15 = v1[7];
      if ((v15 & 7) != 0)
      {
        atomic_fetch_add_explicit((v15 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v16 = v1[6];
      if ((v16 & 7) != 0)
      {
        atomic_fetch_add_explicit((v16 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v17 = v1[5];
      if ((v17 & 7) != 0)
      {
        atomic_fetch_add_explicit((v17 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v18 = v1[4];
      if ((v18 & 7) != 0)
      {
        atomic_fetch_add_explicit((v18 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v19 = v1[3];
      if ((v19 & 7) != 0)
      {
        atomic_fetch_add_explicit((v19 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v20 = v1[2];
      if ((v20 & 7) != 0)
      {
        atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v21 = v1[1];
      if ((v21 & 7) != 0)
      {
        atomic_fetch_add_explicit((v21 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      operator delete(v1);
      _Unwind_Resume(a1);
    }
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialTerminalTokens_StaticTokenType *sub_29AC4497C(atomic_ullong *a1)
{
  result = sub_29AC449C4();
  v3 = 0;
  atomic_compare_exchange_strong(a1, &v3, result);
  if (v3)
  {
    if (result)
    {
      pxrInternal__aapl__pxrReserved__::HdMaterialTerminalTokens_StaticTokenType::~HdMaterialTerminalTokens_StaticTokenType(result);
      operator delete(v4);
    }

    return atomic_load(a1);
  }

  return result;
}

pxrInternal__aapl__pxrReserved__::HdMaterialTerminalTokens_StaticTokenType *sub_29AC449C4()
{
  v0 = operator new(0x48uLL);
  pxrInternal__aapl__pxrReserved__::HdMaterialTerminalTokens_StaticTokenType::HdMaterialTerminalTokens_StaticTokenType(v0);
  return v0;
}

double sub_29AC44AA0@<D0>(uint64_t a1@<X0>, _DWORD **a2@<X2>, void *a3@<X8>)
{
  v6 = operator new(0x60uLL);
  *a3 = v6;
  a3[1] = a1;
  a3[2] = 0;
  v7 = *a2;
  sub_29A1E21F4(v6 + 8, v7);
  sub_29A1E2240(v6 + 9, v7 + 1);
  result = 0.0;
  *(v6 + 56) = 0u;
  v6 += 56;
  *(v6 - 1) = 0u;
  *(v6 - 1) = v6;
  *(v6 + 4) = 0;
  *(v6 + 3) = 0;
  *(v6 + 2) = v6 + 24;
  *(a3 + 16) = 1;
  return result;
}

uint64_t **sub_29AC44B28(uint64_t **result, void *a2, void *a3)
{
  v5 = result;
  if (result[2])
  {
    v6 = *result;
    v7 = result[1];
    *result = (result + 1);
    v7[2] = 0;
    result[1] = 0;
    result[2] = 0;
    if (v6[1])
    {
      v8 = v6[1];
    }

    else
    {
      v8 = v6;
    }

    v13 = result;
    v14 = v8;
    v15 = v8;
    if (v8)
    {
      v14 = sub_29A028760(v8);
      if (a2 != a3)
      {
        v9 = a2;
        do
        {
          sub_29A166F2C(v8 + 4, v9 + 4);
          sub_29A1854E8(v8 + 5, v9 + 5);
          v10 = sub_29A1682D8(v5, &v16, v15 + 4);
          sub_29A00B204(v5, v16, v10, v15);
          v15 = v14;
          if (v14)
          {
            v14 = sub_29A028760(v14);
          }

          v11 = v9[1];
          if (v11)
          {
            do
            {
              a2 = v11;
              v11 = *v11;
            }

            while (v11);
          }

          else
          {
            do
            {
              a2 = v9[2];
              v12 = *a2 == v9;
              v9 = a2;
            }

            while (!v12);
          }

          v8 = v15;
          if (v15)
          {
            v12 = a2 == a3;
          }

          else
          {
            v12 = 1;
          }

          v9 = a2;
        }

        while (!v12);
      }
    }

    result = sub_29AC44CB8(&v13);
  }

  if (a2 != a3)
  {
    sub_29AC44D10();
  }

  return result;
}

uint64_t sub_29AC44CB8(uint64_t a1)
{
  sub_29A5B0668(*a1, *(a1 + 16));
  v2 = *(a1 + 8);
  if (v2)
  {
    v3 = v2[2];
    if (v3)
    {
      do
      {
        v2 = v3;
        v3 = v3[2];
      }

      while (v3);
      *(a1 + 8) = v2;
    }

    sub_29A5B0668(*a1, v2);
  }

  return a1;
}

void sub_29AC44D68(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *a10, uint64_t a11)
{
  if (a10)
  {
    sub_29A94BD9C(&a11, a10);
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_29AC44E20(uint64_t a1, uint64_t **a2)
{
  v3 = **a2;
  *a1 = v3;
  if ((v3 & 7) != 0 && (atomic_fetch_add_explicit((v3 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    *a1 &= 0xFFFFFFFFFFFFFFF8;
  }

  *(a1 + 16) = 0;
  *(a1 + 8) = 0;
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPrimTag,24u,8u,16384u>::Handle::Handle((a1 + 8));
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::Handle((a1 + 12));
  *(a1 + 16) = 0;
  return a1;
}

void *sub_29AC44F30@<X0>(uint64_t a1@<X0>, uint64_t **a2@<X2>, void *a3@<X8>)
{
  result = operator new(0x40uLL);
  *a3 = result;
  a3[1] = a1;
  a3[2] = 0;
  v7 = **a2;
  result[4] = v7;
  if ((v7 & 7) != 0 && (atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
  {
    result[4] &= 0xFFFFFFFFFFFFFFF8;
  }

  result[5] = 0;
  result[6] = 0;
  result[7] = 0;
  *(a3 + 16) = 1;
  return result;
}

uint64_t sub_29AC44FB0(uint64_t *a1, uint64_t a2)
{
  v2 = (a1[1] - *a1) >> 4;
  v3 = v2 + 1;
  if ((v2 + 1) >> 60)
  {
    sub_29A00C9A4();
  }

  v6 = a1[2] - *a1;
  if (v6 >> 3 > v3)
  {
    v3 = v6 >> 3;
  }

  if (v6 >= 0x7FFFFFFFFFFFFFF0)
  {
    v7 = 0xFFFFFFFFFFFFFFFLL;
  }

  else
  {
    v7 = v3;
  }

  v19 = a1;
  if (v7)
  {
    v8 = sub_29A017BD4(a1, v7);
  }

  else
  {
    v8 = 0;
  }

  v9 = &v8[16 * v2];
  v16 = v8;
  v17 = v9;
  *(&v18 + 1) = &v8[16 * v7];
  sub_29A1DDD84(v9, a2);
  sub_29A1DDDC0(v9 + 1, (a2 + 4));
  *(v9 + 1) = *(a2 + 8);
  *(a2 + 8) = 0;
  *&v18 = v9 + 16;
  v10 = a1[1];
  v11 = &v9[*a1 - v10];
  sub_29AC450D4(a1, *a1, v10, v11);
  v12 = *a1;
  *a1 = v11;
  v13 = a1[2];
  v15 = v18;
  *(a1 + 1) = v18;
  *&v18 = v12;
  *(&v18 + 1) = v13;
  v16 = v12;
  v17 = v12;
  sub_29AC451AC(&v16);
  return v15;
}

void sub_29AC450C0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  sub_29AC451AC(va);
  _Unwind_Resume(a1);
}

uint64_t sub_29AC450D4(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v12 = a4;
  v13 = a4;
  v10[0] = a1;
  v10[1] = &v12;
  v10[2] = &v13;
  v11 = 0;
  if (a2 == a3)
  {
    v11 = 1;
  }

  else
  {
    v4 = a4;
    v6 = a2;
    v8 = a2;
    do
    {
      sub_29A1DDD84(v4, v8);
      sub_29A1DDDC0((v4 + 4), (v8 + 4));
      *(v4 + 8) = *(v8 + 8);
      *(v8 + 8) = 0;
      v8 += 16;
      v4 = v13 + 16;
      v13 += 16;
    }

    while (v8 != a3);
    v11 = 1;
    while (v6 != a3)
    {
      sub_29ABF31FC(a1, v6);
      v6 += 16;
    }
  }

  return sub_29ABF3170(v10);
}

void **sub_29AC451AC(void **a1)
{
  sub_29AC451E0(a1);
  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

_DWORD *sub_29AC451E0(_DWORD *result)
{
  v2 = *(result + 1);
  v1 = *(result + 2);
  if (v1 != v2)
  {
    v3 = result;
    do
    {
      v4 = *(v3 + 4);
      *(v3 + 2) = v1 - 16;
      result = sub_29ABF31FC(v4, v1 - 16);
      v1 = *(v3 + 2);
    }

    while (v1 != v2);
  }

  return result;
}

BOOL sub_29AC45228(uint64_t a1, void *a2, void *a3)
{
  if ((*a3 ^ *a2) > 7)
  {
    return 0;
  }

  v4 = a2[1];
  v3 = a2[2];
  v5 = a3[1];
  if (v3 - v4 != a3[2] - v5)
  {
    return 0;
  }

  if (v4 == v3)
  {
    return 1;
  }

  do
  {
    v6 = *v4;
    v7 = *(v4 + 1);
    v4 += 16;
    v8 = *v5;
    v9 = v5[1];
    v5 += 2;
    result = v6 == v8 && (v9 ^ v7) < 8;
  }

  while (result && v4 != v3);
  return result;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens_StaticTokenType::~HdMaterialBindingSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens_StaticTokenType *this)
{
  v2 = (this + 8);
  sub_29A124AB0(&v2);
  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

{
  v2 = (this + 8);
  sub_29A124AB0(&v2);
  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens_StaticTokenType::HdMaterialBindingSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens_StaticTokenType *this)
{
  v9 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "path", 0);
  v5 = *v2;
  v3 = v2 + 1;
  v4 = v5;
  v8 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v8 = v6;
    }
  }

  *v3 = 0;
  v3[1] = 0;
  v3[2] = 0;
  sub_29A12EF7C(v3, &v8, &v9, 1uLL);
  if ((v8 & 7) != 0)
  {
    atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  return this;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchema::GetPath(pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC45668(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens);
  }

  v6 = *v4;
  if ((*v4 & 7) != 0)
  {
    v5 = (*v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v6 = v5;
    }
  }

  sub_29ABE18CC(this, a2);
  if ((v6 & 7) != 0)
  {
    atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchema::BuildRetained(uint64_t *a1@<X0>, _OWORD *a2@<X8>)
{
  v11[1] = *MEMORY[0x29EDCA608];
  v10 = 0;
  v11[0] = 0;
  v9 = 0;
  if (*a1)
  {
    v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens);
    if (!v4)
    {
      v4 = sub_29AC45668(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens);
    }

    sub_29A166F2C(v11, v4);
    v6 = *a1;
    v5 = a1[1];
    if (v5)
    {
      atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v9 = v6;
    v10 = v5;
    v7 = 1;
  }

  else
  {
    v7 = 0;
  }

  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(v7, v11, &v9, &v8);
  *a2 = v8;
  if (v10)
  {
    sub_29A014BEC(v10);
  }

  if ((v11[0] & 7) != 0)
  {
    atomic_fetch_add_explicit((v11[0] & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC455E8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12, uint64_t a13)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a13 & 7) != 0)
  {
    atomic_fetch_add_explicit((a13 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchema::Builder::SetPath(void *a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = a1[1];
  *a1 = v4;
  a1[1] = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

unint64_t sub_29AC45668(atomic_ullong *a1)
{
  v2 = sub_29AC456E8();
  v3 = v2;
  v4 = 0;
  atomic_compare_exchange_strong(a1, &v4, v2);
  if (v4)
  {
    if (v2)
    {
      v6 = (v2 + 8);
      sub_29A124AB0(&v6);
      if ((*v3 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v3 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      operator delete(v3);
    }

    return atomic_load(a1);
  }

  return v3;
}

pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens_StaticTokenType *sub_29AC456E8()
{
  v0 = operator new(0x20uLL);
  pxrInternal__aapl__pxrReserved__::HdMaterialBindingSchemaTokens_StaticTokenType::HdMaterialBindingSchemaTokens_StaticTokenType(v0);
  return v0;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens_StaticTokenType::~HdMaterialBindingsSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens_StaticTokenType *this)
{
  v3 = (this + 16);
  sub_29A124AB0(&v3);
  v2 = *(this + 1);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens_StaticTokenType::HdMaterialBindingsSchemaTokens_StaticTokenType(atomic_uint **this)
{
  v13 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "materialBindings", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "", 0);
  v3 = this + 2;
  v4 = *this;
  v11 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v11 = v5;
    }
  }

  v6 = this[1];
  v12 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v12 = v7;
    }
  }

  *v3 = 0;
  this[3] = 0;
  this[4] = 0;
  sub_29A12EF7C(v3, &v11, &v13, 2uLL);
  for (i = 8; i != -8; i -= 8)
  {
    v9 = *(&v11 + i);
    if ((v9 & 7) != 0)
    {
      atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC458A8(_Unwind_Exception *a1)
{
  v3 = 8;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[1];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema::GetMaterialBinding(pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens);
  if (!v4)
  {
    v4 = sub_29ABF207C(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens);
  }

  v5 = *(v4 + 1);
  v10 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v10 = v6;
    }
  }

  sub_29ABC2F3C(this, &v11);
  v8 = v11;
  v7 = v12;
  if (v12)
  {
    atomic_fetch_add_explicit(&v12->__shared_owners_, 1uLL, memory_order_relaxed);
    atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
    sub_29A014BEC(v7);
    v9 = v12;
    *a2 = v8;
    a2[1] = v7;
    if (v9)
    {
      sub_29A014BEC(v9);
    }
  }

  else
  {
    *a2 = v11;
    a2[1] = 0;
  }

  if ((v10 & 7) != 0)
  {
    atomic_fetch_add_explicit((v10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema::GetMaterialBinding(pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema *this@<X0>, atomic_uint **a2@<X1>, void *a3@<X8>)
{
  v8 = *a2;
  if ((*a2 & 7) != 0)
  {
    v5 = (*a2 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v8 = v5;
    }
  }

  sub_29ABC2F3C(this, &v9);
  if ((v8 & 7) != 0)
  {
    atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v6 = v9;
  if (v9)
  {
    v7 = v10;
    if (v10)
    {
      atomic_fetch_add_explicit(&v10->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
      *a3 = v6;
      a3[1] = v7;
      atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v7);
      sub_29A014BEC(v7);
    }

    else
    {
      *a3 = v9;
      a3[1] = 0;
    }
  }

  if (v10)
  {
    sub_29A014BEC(v10);
  }

  if (!v6)
  {
    pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema::GetMaterialBinding(this, a3);
  }
}

double pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema::BuildRetained@<D0>(unint64_t a1@<X0>, uint64_t *a2@<X1>, uint64_t *a3@<X2>, _OWORD *a4@<X8>)
{
  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(a1, a2, a3, &v6);
  result = *&v6;
  *a4 = v6;
  return result;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema::GetFromParent(uint64_t *a1@<X0>, void *a2@<X8>)
{
  v3 = *a1;
  if (*a1)
  {
    if (!atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens))
    {
      sub_29ABF207C(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens);
    }

    (*(*v3 + 24))(&v8, v3);
    sub_29ABC3244(&v8, &v10);
    v6 = v10;
    v5 = v11;
    if (v11)
    {
      atomic_fetch_add_explicit(&v11->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v5);
      v7 = v11;
      *a2 = v6;
      a2[1] = v5;
      if (v7)
      {
        sub_29A014BEC(v7);
      }
    }

    else
    {
      *a2 = v10;
      a2[1] = 0;
    }

    if (v9)
    {
      sub_29A014BEC(v9);
    }
  }

  else
  {
    v10 = 0;
    v11 = 0;
    *a2 = 0;
    a2[1] = 0;
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema::GetSchemaToken(pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema *this)
{
  result = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens);
  if (!result)
  {
    return sub_29ABF207C(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens);
  }

  return result;
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema::GetDefaultLocator(pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchema *this)
{
  if ((atomic_load_explicit(&qword_2A174A7D8, memory_order_acquire) & 1) == 0 && __cxa_guard_acquire(&qword_2A174A7D8))
  {
    v2 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens);
    if (!v2)
    {
      v2 = sub_29ABF207C(&pxrInternal__aapl__pxrReserved__::HdMaterialBindingsSchemaTokens);
    }

    pxrInternal__aapl__pxrReserved__::HdDataSourceLocator::HdDataSourceLocator(&unk_2A174A7A0, v2);
    __cxa_atexit(sub_29ABC33B4, &unk_2A174A7A0, &dword_299FE7000);
    __cxa_guard_release(&qword_2A174A7D8);
  }

  return &unk_2A174A7A0;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens_StaticTokenType::~HdMaterialConnectionSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens_StaticTokenType *this)
{
  v3 = (this + 16);
  sub_29A124AB0(&v3);
  v2 = *(this + 1);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens_StaticTokenType::HdMaterialConnectionSchemaTokens_StaticTokenType(atomic_uint **this)
{
  v13 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "upstreamNodePath", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "upstreamNodeOutputName", 0);
  v3 = this + 2;
  v4 = *this;
  v11 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v11 = v5;
    }
  }

  v6 = this[1];
  v12 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v12 = v7;
    }
  }

  *v3 = 0;
  this[3] = 0;
  this[4] = 0;
  sub_29A12EF7C(v3, &v11, &v13, 2uLL);
  for (i = 8; i != -8; i -= 8)
  {
    v9 = *(&v11 + i);
    if ((v9 & 7) != 0)
    {
      atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC45E98(_Unwind_Exception *a1)
{
  v3 = 8;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[1];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchema::GetUpstreamNodePath(pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC46300(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
  }

  v6 = *v4;
  if ((*v4 & 7) != 0)
  {
    v5 = (*v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v6 = v5;
    }
  }

  sub_29ABC4C48(this, a2);
  if ((v6 & 7) != 0)
  {
    atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchema::GetUpstreamNodeOutputName(pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC46300(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
  }

  v5 = v4[1];
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC4C48(this, a2);
  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchema::BuildRetained(uint64_t *a1@<X0>, uint64_t *a2@<X1>, _OWORD *a3@<X8>)
{
  v25[1] = *MEMORY[0x29EDCA608];
  v5 = &v22;
  v24 = 0;
  v25[0] = 0;
  v6 = &v24;
  v22 = 0u;
  v23 = 0u;
  if (*a1)
  {
    v8 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
    if (!v8)
    {
      v8 = sub_29AC46300(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
    }

    v5 = &v23;
    v6 = v25;
    sub_29A166F2C(&v24, v8);
    v10 = *a1;
    v9 = a1[1];
    if (v9)
    {
      atomic_fetch_add_explicit((v9 + 8), 1uLL, memory_order_relaxed);
    }

    v11 = *(&v22 + 1);
    *&v22 = v10;
    *(&v22 + 1) = v9;
    if (v11)
    {
      sub_29A014BEC(v11);
    }

    v12 = 1;
  }

  else
  {
    v12 = 0;
  }

  if (*a2)
  {
    v13 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
    if (!v13)
    {
      v13 = sub_29AC46300(&pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens);
    }

    sub_29A166F2C(v6, v13 + 1);
    ++v12;
    v15 = *a2;
    v14 = a2[1];
    if (v14)
    {
      atomic_fetch_add_explicit((v14 + 8), 1uLL, memory_order_relaxed);
    }

    v16 = *(v5 + 1);
    *v5 = v15;
    *(v5 + 1) = v14;
    if (v16)
    {
      sub_29A014BEC(v16);
    }
  }

  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(v12, &v24, &v22, &v21);
  *a3 = v21;
  for (i = 24; i != -8; i -= 16)
  {
    v18 = *(&v22 + i);
    if (v18)
    {
      sub_29A014BEC(v18);
    }
  }

  for (j = 1; j != -1; --j)
  {
    v20 = v25[j - 1];
    if ((v20 & 7) != 0)
    {
      atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }
}

void sub_29AC4620C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, char a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, char a16)
{
  v17 = 24;
  while (1)
  {
    v18 = *(&a11 + v17);
    if (v18)
    {
      sub_29A014BEC(v18);
    }

    v17 -= 16;
    if (v17 == -8)
    {
      v19 = 8;
      while (1)
      {
        v20 = *(&a16 + v19);
        if ((v20 & 7) != 0)
        {
          atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        v19 -= 8;
        if (v19 == -8)
        {
          _Unwind_Resume(exception_object);
        }
      }
    }
  }
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchema::Builder::SetUpstreamNodePath(void *a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = a1[1];
  *a1 = v4;
  a1[1] = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchema::Builder::SetUpstreamNodeOutputName(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 24);
  *(a1 + 16) = v4;
  *(a1 + 24) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

atomic_uint **sub_29AC46300(atomic_ullong *a1)
{
  result = sub_29AC46348();
  v3 = 0;
  atomic_compare_exchange_strong(a1, &v3, result);
  if (v3)
  {
    if (result)
    {
      pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens_StaticTokenType::~HdMaterialConnectionSchemaTokens_StaticTokenType(result);
      operator delete(v4);
    }

    return atomic_load(a1);
  }

  return result;
}

atomic_uint **sub_29AC46348()
{
  v0 = operator new(0x28uLL);
  pxrInternal__aapl__pxrReserved__::HdMaterialConnectionSchemaTokens_StaticTokenType::HdMaterialConnectionSchemaTokens_StaticTokenType(v0);
  return v0;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialFilteringSceneIndexBase::GetPrim(pxrInternal__aapl__pxrReserved__::HdMaterialFilteringSceneIndexBase *this@<X0>, const pxrInternal__aapl__pxrReserved__::SdfPath *a2@<X1>, void *a3@<X8>)
{
  v6 = sub_29AC1199C(this + 14);
  (*(*v6 + 16))(v6, a2);
  v7 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdPrimTypeTokens);
  if (!v7)
  {
    v7 = sub_29ABED3B4(&pxrInternal__aapl__pxrReserved__::HdPrimTypeTokens);
  }

  if ((*(v7 + 19) ^ *a3) <= 7)
  {
    v8 = a3[1];
    if (v8)
    {
      v9 = operator new(0x38uLL);
      v10 = v9;
      *v9 = &unk_2A207C3D0;
      v9[1] = this;
      v11 = a3[2];
      v9[2] = v8;
      v9[3] = v11;
      if (v11)
      {
        atomic_fetch_add_explicit((v11 + 8), 1uLL, memory_order_relaxed);
      }

      v9[4] = 0;
      v9[5] = 0;
      sub_29A1E21F4(v9 + 12, a2);
      sub_29A1E2240(v10 + 13, a2 + 1);
      v12 = operator new(0x20uLL);
      *v12 = &unk_2A207C4D8;
      v12[1] = 0;
      v12[2] = 0;
      v12[3] = v10;
      v13 = a3[2];
      a3[1] = v10;
      a3[2] = v12;
      if (v13)
      {

        sub_29A014BEC(v13);
      }
    }
  }
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialFilteringSceneIndexBase::GetChildPrimPaths(pxrInternal__aapl__pxrReserved__::HdMaterialFilteringSceneIndexBase *this, const pxrInternal__aapl__pxrReserved__::SdfPath *a2)
{
  v2 = *(*sub_29AC1199C(this + 14) + 24);

  return v2();
}

void sub_29AC465E8(uint64_t a1)
{
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 52));
  sub_29A1DE3A4((a1 + 48));
  v2 = *(a1 + 40);
  if (v2)
  {
    sub_29A014BEC(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    sub_29A014BEC(v3);
  }

  pxrInternal__aapl__pxrReserved__::HdDataSourceBase::~HdDataSourceBase(a1);
}

void sub_29AC46648(uint64_t a1)
{
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 52));
  sub_29A1DE3A4((a1 + 48));
  v2 = *(a1 + 40);
  if (v2)
  {
    sub_29A014BEC(v2);
  }

  v3 = *(a1 + 24);
  if (v3)
  {
    sub_29A014BEC(v3);
  }

  pxrInternal__aapl__pxrReserved__::HdDataSourceBase::~HdDataSourceBase(a1);

  operator delete(v4);
}

uint64_t sub_29AC466AC@<X0>(uint64_t a1@<X0>, void *a2@<X8>)
{
  result = *(a1 + 16);
  if (result)
  {
    return (*(*result + 16))();
  }

  *a2 = 0;
  a2[1] = 0;
  a2[2] = 0;
  return result;
}

double sub_29AC466E4@<D0>(uint64_t a1@<X0>, void *a2@<X1>, void *a3@<X8>)
{
  v20[4] = *MEMORY[0x29EDCA608];
  v5 = *(a1 + 16);
  if (!v5)
  {
    *a3 = 0;
    a3[1] = 0;
    return result;
  }

  (*(*v5 + 24))(&v19);
  if (!v19)
  {
    goto LABEL_20;
  }

  v7 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
  if (!v7)
  {
    v7 = sub_29ABEE484(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
  }

  if ((*v7 ^ *a2) > 7)
  {
    goto LABEL_20;
  }

  sub_29ABC3244(&v19, &v17);
  if (!v17)
  {
    if (v18)
    {
      sub_29A014BEC(v18);
    }

LABEL_20:
    result = *&v19;
    *a3 = v19;
    return result;
  }

  (*(**(a1 + 8) + 80))(v20);
  v8 = operator new(0x60uLL);
  v9 = v8;
  v11 = v17;
  v10 = v18;
  *v8 = &unk_2A207C418;
  v8[1] = v11;
  v8[2] = v10;
  if (v10)
  {
    atomic_fetch_add_explicit(&v10->__shared_owners_, 1uLL, memory_order_relaxed);
  }

  v13 = *(a1 + 16);
  v12 = *(a1 + 24);
  v8[4] = v12;
  v8[3] = v13;
  if (v12)
  {
    atomic_fetch_add_explicit((v12 + 8), 1uLL, memory_order_relaxed);
  }

  v14 = *(a1 + 40);
  v8[5] = *(a1 + 32);
  v8[6] = v14;
  if (v14)
  {
    atomic_fetch_add_explicit((v14 + 8), 1uLL, memory_order_relaxed);
  }

  sub_29A1E21F4(v8 + 14, (a1 + 48));
  sub_29A1E2240(v9 + 15, (a1 + 52));
  sub_29AC46BEC((v9 + 8), v20);
  v15 = operator new(0x20uLL);
  *v15 = &unk_2A207C460;
  v15[1] = 0;
  v15[2] = 0;
  v15[3] = v9;
  *a3 = v9;
  a3[1] = v15;
  sub_29AC46FC8(v20);
  if (v18)
  {
    sub_29A014BEC(v18);
  }

  if (*(&v19 + 1))
  {
    sub_29A014BEC(*(&v19 + 1));
  }

  return result;
}

void sub_29AC46908(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12, uint64_t a13, char a14)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  _Unwind_Resume(exception_object);
}

void sub_29AC46988(uint64_t a1)
{
  sub_29AC46FC8(a1 + 64);
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 60));
  sub_29A1DE3A4((a1 + 56));
  v2 = *(a1 + 48);
  if (v2)
  {
    sub_29A014BEC(v2);
  }

  v3 = *(a1 + 32);
  if (v3)
  {
    sub_29A014BEC(v3);
  }

  v4 = *(a1 + 16);
  if (v4)
  {
    sub_29A014BEC(v4);
  }

  pxrInternal__aapl__pxrReserved__::HdDataSourceBase::~HdDataSourceBase(a1);
}

void sub_29AC469FC(uint64_t a1)
{
  sub_29AC46FC8(a1 + 64);
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 60));
  sub_29A1DE3A4((a1 + 56));
  v2 = *(a1 + 48);
  if (v2)
  {
    sub_29A014BEC(v2);
  }

  v3 = *(a1 + 32);
  if (v3)
  {
    sub_29A014BEC(v3);
  }

  v4 = *(a1 + 16);
  if (v4)
  {
    sub_29A014BEC(v4);
  }

  pxrInternal__aapl__pxrReserved__::HdDataSourceBase::~HdDataSourceBase(a1);

  operator delete(v5);
}

uint64_t sub_29AC46A74@<X0>(uint64_t a1@<X0>, void *a2@<X8>)
{
  result = *(a1 + 8);
  if (result)
  {
    return (*(*result + 16))();
  }

  *a2 = 0;
  a2[1] = 0;
  a2[2] = 0;
  return result;
}

void sub_29AC46AAC(uint64_t a1@<X0>, uint64_t a2@<X8>)
{
  v12 = *MEMORY[0x29EDCA608];
  v4 = *(a1 + 8);
  if (!v4)
  {
    goto LABEL_9;
  }

  (*(*v4 + 24))(&v9);
  sub_29ABC3244(&v9, &v7);
  v5 = v7;
  if (v7)
  {
    sub_29AC46CD8(v11, (a1 + 56), &v7, (a1 + 24));
    sub_29AC46C84(a1 + 64, v11);
    pxrInternal__aapl__pxrReserved__::HdDataSourceMaterialNetworkInterface::Finish(v11, &v6);
    *a2 = v6;
    sub_29AC0F490(v11);
  }

  if (v8)
  {
    sub_29A014BEC(v8);
  }

  if (v10)
  {
    sub_29A014BEC(v10);
  }

  if (!v5)
  {
LABEL_9:
    *a2 = 0;
    *(a2 + 8) = 0;
  }
}

void sub_29AC46BAC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, std::__shared_weak_count *a6, uint64_t a7, std::__shared_weak_count *a8, ...)
{
  va_start(va, a8);
  sub_29AC0F490(va);
  if (a6)
  {
    sub_29A014BEC(a6);
  }

  if (a8)
  {
    sub_29A014BEC(a8);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_29AC46BEC(uint64_t a1, uint64_t a2)
{
  v3 = *(a2 + 24);
  if (v3)
  {
    if (v3 == a2)
    {
      *(a1 + 24) = a1;
      (*(**(a2 + 24) + 24))(*(a2 + 24), a1);
    }

    else
    {
      *(a1 + 24) = (*(*v3 + 16))(v3);
    }
  }

  else
  {
    *(a1 + 24) = 0;
  }

  return a1;
}

uint64_t sub_29AC46C84(uint64_t a1, uint64_t a2)
{
  v4 = a2;
  v2 = *(a1 + 24);
  if (!v2)
  {
    sub_29A0DDCB0();
  }

  return (*(*v2 + 48))(v2, &v4);
}

uint64_t sub_29AC46CD8(uint64_t a1, _DWORD *a2, uint64_t *a3, void *a4)
{
  *a1 = &unk_2A207ADC8;
  v8 = (a1 + 12);
  sub_29A1E21F4((a1 + 8), a2);
  sub_29A1E2240(v8, a2 + 1);
  v9 = *a3;
  v10 = a3[1];
  if (v10)
  {
    atomic_fetch_add_explicit(&v10->__shared_owners_, 1uLL, memory_order_relaxed);
    atomic_fetch_add_explicit(&v10->__shared_owners_, 1uLL, memory_order_relaxed);
    *(a1 + 16) = v9;
    *(a1 + 24) = v10;
    atomic_fetch_add_explicit(&v10->__shared_owners_, 1uLL, memory_order_relaxed);
    sub_29A014BEC(v10);
    sub_29A014BEC(v10);
  }

  else
  {
    *(a1 + 16) = v9;
    *(a1 + 24) = 0;
  }

  v12 = *a3;
  v11 = a3[1];
  if (v11)
  {
    atomic_fetch_add_explicit(&v11->__shared_owners_, 1uLL, memory_order_relaxed);
    *(a1 + 32) = 0;
    *(a1 + 40) = 0;
    *(a1 + 48) = v12;
    *(a1 + 56) = v11;
    atomic_fetch_add_explicit(&v11->__shared_owners_, 1uLL, memory_order_relaxed);
    *(a1 + 288) = 0x400000000;
    sub_29A014BEC(v11);
  }

  else
  {
    *(a1 + 32) = 0;
    *(a1 + 40) = 0;
    *(a1 + 48) = v12;
    *(a1 + 56) = 0;
    *(a1 + 288) = 0x400000000;
  }

  v13 = a4[1];
  *(a1 + 296) = *a4;
  *(a1 + 304) = v13;
  if (v13)
  {
    atomic_fetch_add_explicit((v13 + 8), 1uLL, memory_order_relaxed);
  }

  *(a1 + 312) = 0u;
  *(a1 + 328) = 0u;
  *(a1 + 344) = 1065353216;
  *(a1 + 352) = 0u;
  *(a1 + 368) = 0u;
  *(a1 + 384) = 1065353216;
  *(a1 + 392) = 0u;
  *(a1 + 408) = 0u;
  *(a1 + 424) = 1065353216;
  *(a1 + 432) = 0;
  v19 = 0;
  v20 = 0;
  sub_29ABCD3B8((a1 + 440), &v19);
  if (v20)
  {
    sub_29A014BEC(v20);
  }

  *(a1 + 456) = 0;
  *(a1 + 464) = 0;
  *(a1 + 472) = 0;
  v17 = 0;
  v18 = 0;
  sub_29ABCD3B8((a1 + 480), &v17);
  if (v18)
  {
    sub_29A014BEC(v18);
  }

  v15 = 0;
  v16 = 0;
  sub_29ABCD3B8((a1 + 496), &v15);
  if (v16)
  {
    sub_29A014BEC(v16);
  }

  return a1;
}

void sub_29AC46E74(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, std::__shared_weak_count *a14)
{
  if (a14)
  {
    sub_29A014BEC(a14);
  }

  sub_29A155EF4(v16);
  sub_29A155EF4(v14 + 352);
  sub_29AC0F57C(v15);
  v18 = *(v14 + 304);
  if (v18)
  {
    sub_29A014BEC(v18);
  }

  sub_29ABDD7A4(v14 + 32);
  v19 = *(v14 + 24);
  if (v19)
  {
    sub_29A014BEC(v19);
  }

  sub_29A1DCEA8((v14 + 8));
  _Unwind_Resume(a1);
}

void sub_29AC46ED0(std::__shared_weak_count *a1)
{
  std::__shared_weak_count::~__shared_weak_count(a1);

  operator delete(v1);
}

uint64_t sub_29AC46F00(uint64_t a1, uint64_t a2)
{
  if (sub_29A00E9CC(a2, &unk_2A207C4B0))
  {
    return a1;
  }

  else
  {
    return 0;
  }
}

void sub_29AC46F40(uint64_t a1)
{
  if (a1)
  {
    sub_29AC46FC8(a1 + 64);
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 60));
    sub_29A1DE3A4((a1 + 56));
    v2 = *(a1 + 48);
    if (v2)
    {
      sub_29A014BEC(v2);
    }

    v3 = *(a1 + 32);
    if (v3)
    {
      sub_29A014BEC(v3);
    }

    v4 = *(a1 + 16);
    if (v4)
    {
      sub_29A014BEC(v4);
    }

    pxrInternal__aapl__pxrReserved__::HdDataSourceBase::~HdDataSourceBase(a1);

    operator delete(v5);
  }
}

uint64_t sub_29AC46FC8(uint64_t a1)
{
  v2 = *(a1 + 24);
  if (v2 == a1)
  {
    (*(*v2 + 32))(v2);
  }

  else if (v2)
  {
    (*(*v2 + 40))(v2);
  }

  return a1;
}

void sub_29AC4704C(std::__shared_weak_count *a1)
{
  std::__shared_weak_count::~__shared_weak_count(a1);

  operator delete(v1);
}

uint64_t sub_29AC4707C(uint64_t a1, uint64_t a2)
{
  if (sub_29A00E9CC(a2, &unk_2A207C528))
  {
    return a1;
  }

  else
  {
    return 0;
  }
}

void sub_29AC470BC(uint64_t a1)
{
  if (a1)
  {
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 52));
    sub_29A1DE3A4((a1 + 48));
    v2 = *(a1 + 40);
    if (v2)
    {
      sub_29A014BEC(v2);
    }

    v3 = *(a1 + 24);
    if (v3)
    {
      sub_29A014BEC(v3);
    }

    pxrInternal__aapl__pxrReserved__::HdDataSourceBase::~HdDataSourceBase(a1);

    operator delete(v4);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType::~HdMaterialInterfaceMappingSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType *this)
{
  v3 = (this + 16);
  sub_29A124AB0(&v3);
  v2 = *(this + 1);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType(atomic_uint **this)
{
  v13 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "nodePath", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "inputName", 0);
  v3 = this + 2;
  v4 = *this;
  v11 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v11 = v5;
    }
  }

  v6 = this[1];
  v12 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v12 = v7;
    }
  }

  *v3 = 0;
  this[3] = 0;
  this[4] = 0;
  sub_29A12EF7C(v3, &v11, &v13, 2uLL);
  for (i = 8; i != -8; i -= 8)
  {
    v9 = *(&v11 + i);
    if ((v9 & 7) != 0)
    {
      atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC472AC(_Unwind_Exception *a1)
{
  v3 = 8;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[1];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::BuildNetworkRelativeLocator(pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema *this@<X0>, pxrInternal__aapl__pxrReserved__::HdDataSourceLocator *a2@<X8>)
{
  pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::GetNodePath(this, &v10);
  if (v10)
  {
    pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::GetInputName(this, &v8);
    if (v8)
    {
      v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
      if (!v4)
      {
        v4 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
      }

      (*(*v10 + 32))(&v7, 0.0);
      v5 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
      if (!v5)
      {
        v5 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
      }

      (*(*v8 + 32))(&v6, 0.0);
      pxrInternal__aapl__pxrReserved__::HdDataSourceLocator::HdDataSourceLocator(a2, v4, &v7, v5, &v6);
      if ((v6 & 7) != 0)
      {
        atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((v7 & 7) != 0)
      {
        atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }
    }

    else
    {
      pxrInternal__aapl__pxrReserved__::HdDataSourceLocator::HdDataSourceLocator(a2);
    }

    if (v9)
    {
      sub_29A014BEC(v9);
    }
  }

  else
  {
    pxrInternal__aapl__pxrReserved__::HdDataSourceLocator::HdDataSourceLocator(a2);
  }

  if (v11)
  {
    sub_29A014BEC(v11);
  }
}

void sub_29AC47488(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12, uint64_t a13, std::__shared_weak_count *a14)
{
  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if (a14)
  {
    sub_29A014BEC(a14);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::GetNodePath(pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC47904(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
  }

  v6 = *v4;
  if ((*v4 & 7) != 0)
  {
    v5 = (*v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v6 = v5;
    }
  }

  sub_29ABC4C48(this, a2);
  if ((v6 & 7) != 0)
  {
    atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::GetInputName(pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC47904(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
  }

  v5 = v4[1];
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC4C48(this, a2);
  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::BuildRetained(uint64_t *a1@<X0>, uint64_t *a2@<X1>, _OWORD *a3@<X8>)
{
  v25[1] = *MEMORY[0x29EDCA608];
  v5 = &v22;
  v24 = 0;
  v25[0] = 0;
  v6 = &v24;
  v22 = 0u;
  v23 = 0u;
  if (*a1)
  {
    v8 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
    if (!v8)
    {
      v8 = sub_29AC47904(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
    }

    v5 = &v23;
    v6 = v25;
    sub_29A166F2C(&v24, v8);
    v10 = *a1;
    v9 = a1[1];
    if (v9)
    {
      atomic_fetch_add_explicit((v9 + 8), 1uLL, memory_order_relaxed);
    }

    v11 = *(&v22 + 1);
    *&v22 = v10;
    *(&v22 + 1) = v9;
    if (v11)
    {
      sub_29A014BEC(v11);
    }

    v12 = 1;
  }

  else
  {
    v12 = 0;
  }

  if (*a2)
  {
    v13 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
    if (!v13)
    {
      v13 = sub_29AC47904(&pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens);
    }

    sub_29A166F2C(v6, v13 + 1);
    ++v12;
    v15 = *a2;
    v14 = a2[1];
    if (v14)
    {
      atomic_fetch_add_explicit((v14 + 8), 1uLL, memory_order_relaxed);
    }

    v16 = *(v5 + 1);
    *v5 = v15;
    *(v5 + 1) = v14;
    if (v16)
    {
      sub_29A014BEC(v16);
    }
  }

  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(v12, &v24, &v22, &v21);
  *a3 = v21;
  for (i = 24; i != -8; i -= 16)
  {
    v18 = *(&v22 + i);
    if (v18)
    {
      sub_29A014BEC(v18);
    }
  }

  for (j = 1; j != -1; --j)
  {
    v20 = v25[j - 1];
    if ((v20 & 7) != 0)
    {
      atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }
}

void sub_29AC47810(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, char a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, char a16)
{
  v17 = 24;
  while (1)
  {
    v18 = *(&a11 + v17);
    if (v18)
    {
      sub_29A014BEC(v18);
    }

    v17 -= 16;
    if (v17 == -8)
    {
      v19 = 8;
      while (1)
      {
        v20 = *(&a16 + v19);
        if ((v20 & 7) != 0)
        {
          atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        v19 -= 8;
        if (v19 == -8)
        {
          _Unwind_Resume(exception_object);
        }
      }
    }
  }
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::Builder::SetNodePath(void *a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = a1[1];
  *a1 = v4;
  a1[1] = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchema::Builder::SetInputName(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 24);
  *(a1 + 16) = v4;
  *(a1 + 24) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

atomic_uint **sub_29AC47904(atomic_ullong *a1)
{
  result = sub_29AC4794C();
  v3 = 0;
  atomic_compare_exchange_strong(a1, &v3, result);
  if (v3)
  {
    if (result)
    {
      pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType::~HdMaterialInterfaceMappingSchemaTokens_StaticTokenType(result);
      operator delete(v4);
    }

    return atomic_load(a1);
  }

  return result;
}

atomic_uint **sub_29AC4794C()
{
  v0 = operator new(0x28uLL);
  pxrInternal__aapl__pxrReserved__::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType::HdMaterialInterfaceMappingSchemaTokens_StaticTokenType(v0);
  return v0;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens_StaticTokenType::~HdMaterialNetworkSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens_StaticTokenType *this)
{
  v5 = (this + 32);
  sub_29A124AB0(&v5);
  v2 = *(this + 3);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v3 = *(this + 2);
  if ((v3 & 7) != 0)
  {
    atomic_fetch_add_explicit((v3 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v4 = *(this + 1);
  if ((v4 & 7) != 0)
  {
    atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens_StaticTokenType::HdMaterialNetworkSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens_StaticTokenType *this)
{
  v19 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "nodes", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "terminals", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this + 16, "interfaceMappings", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this + 24, "config", 0);
  v3 = (this + 32);
  v4 = *this;
  v15 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v15 = v5;
    }
  }

  v6 = *(this + 1);
  v16 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v16 = v7;
    }
  }

  v8 = *(this + 2);
  v17 = v8;
  if ((v8 & 7) != 0)
  {
    v9 = (v8 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v9, 2u, memory_order_relaxed) & 1) == 0)
    {
      v17 = v9;
    }
  }

  v10 = *(this + 3);
  v18 = v10;
  if ((v10 & 7) != 0)
  {
    v11 = (v10 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v11, 2u, memory_order_relaxed) & 1) == 0)
    {
      v18 = v11;
    }
  }

  *v3 = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  sub_29A12EF7C(v3, &v15, &v19, 4uLL);
  for (i = 24; i != -8; i -= 8)
  {
    v13 = *(&v15 + i);
    if ((v13 & 7) != 0)
    {
      atomic_fetch_add_explicit((v13 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC47BAC(_Unwind_Exception *a1)
{
  v3 = 24;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[3];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v6 = v1[2];
      if ((v6 & 7) != 0)
      {
        atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v7 = v1[1];
      if ((v7 & 7) != 0)
      {
        atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::GetNodes(pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  }

  v6 = *v4;
  if ((*v4 & 7) != 0)
  {
    v5 = (*v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v6 = v5;
    }
  }

  sub_29ABC2F3C(this, &v7);
  sub_29ABCD3B8(a2, &v7);
  if (v8)
  {
    sub_29A014BEC(v8);
  }

  if ((v6 & 7) != 0)
  {
    atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC47CF8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::GetTerminals(pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  }

  v5 = *(v4 + 1);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC2F3C(this, &v8);
  sub_29ABCD3B8(a2, &v8);
  if (v9)
  {
    sub_29A014BEC(v9);
  }

  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC47DE0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::GetInterfaceMappings(pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  }

  v5 = *(v4 + 2);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC2F3C(this, &v8);
  sub_29ABCD3B8(a2, &v8);
  if (v9)
  {
    sub_29A014BEC(v9);
  }

  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC47EC8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::GetConfig(pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
  }

  v5 = *(v4 + 3);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC2F3C(this, &v8);
  sub_29ABCD3B8(a2, &v8);
  if (v9)
  {
    sub_29A014BEC(v9);
  }

  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC47FB0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::BuildRetained(uint64_t *a1@<X0>, uint64_t *a2@<X1>, uint64_t *a3@<X2>, uint64_t *a4@<X3>, _OWORD *a5@<X8>)
{
  v41 = *MEMORY[0x29EDCA608];
  v9 = &v38;
  memset(v40, 0, sizeof(v40));
  v38 = 0u;
  memset(v39, 0, sizeof(v39));
  v10 = v40;
  if (*a1)
  {
    v12 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    if (!v12)
    {
      v12 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    }

    v9 = v39;
    v10 = v40 + 1;
    sub_29A166F2C(v40, v12);
    v14 = *a1;
    v13 = a1[1];
    if (v13)
    {
      atomic_fetch_add_explicit((v13 + 8), 1uLL, memory_order_relaxed);
    }

    v15 = *(&v38 + 1);
    *&v38 = v14;
    *(&v38 + 1) = v13;
    if (v15)
    {
      sub_29A014BEC(v15);
    }

    v16 = 1;
  }

  else
  {
    v16 = 0;
  }

  if (*a2)
  {
    v17 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    if (!v17)
    {
      v17 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    }

    sub_29A166F2C(v10, v17 + 1);
    ++v16;
    v19 = *a2;
    v18 = a2[1];
    if (v18)
    {
      atomic_fetch_add_explicit((v18 + 8), 1uLL, memory_order_relaxed);
    }

    v20 = *(v9 + 1);
    *v9 = v19;
    *(v9 + 1) = v18;
    if (v20)
    {
      sub_29A014BEC(v20);
    }
  }

  if (*a3)
  {
    v21 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    if (!v21)
    {
      v21 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    }

    sub_29A166F2C(v40 + v16, v21 + 2);
    v22 = v16 + 1;
    v23 = &v39[v16 - 1];
    v25 = *a3;
    v24 = a3[1];
    if (v24)
    {
      atomic_fetch_add_explicit((v24 + 8), 1uLL, memory_order_relaxed);
    }

    v26 = v23[1];
    *v23 = v25;
    v23[1] = v24;
    if (v26)
    {
      sub_29A014BEC(v26);
    }
  }

  else
  {
    v22 = v16;
  }

  if (*a4)
  {
    v27 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    if (!v27)
    {
      v27 = sub_29AC0FC38(&pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchemaTokens);
    }

    sub_29A166F2C(v40 + v22, v27 + 3);
    v28 = v22 + 1;
    v29 = &v39[v22 - 1];
    v31 = *a4;
    v30 = a4[1];
    if (v30)
    {
      atomic_fetch_add_explicit((v30 + 8), 1uLL, memory_order_relaxed);
    }

    v32 = v29[1];
    *v29 = v31;
    v29[1] = v30;
    if (v32)
    {
      sub_29A014BEC(v32);
    }
  }

  else
  {
    v28 = v22;
  }

  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(v28, v40, &v38, &v37);
  *a5 = v37;
  for (i = 56; i != -8; i -= 16)
  {
    v34 = *(&v39[-1] + i);
    if (v34)
    {
      sub_29A014BEC(v34);
    }
  }

  for (j = 24; j != -8; j -= 8)
  {
    v36 = *(v40 + j);
    if ((v36 & 7) != 0)
    {
      atomic_fetch_add_explicit((v36 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }
}

void sub_29AC4827C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, char a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, char a19)
{
  v20 = 56;
  while (1)
  {
    v21 = *(&a11 + v20);
    if (v21)
    {
      sub_29A014BEC(v21);
    }

    v20 -= 16;
    if (v20 == -8)
    {
      v22 = 24;
      while (1)
      {
        v23 = *(&a19 + v22);
        if ((v23 & 7) != 0)
        {
          atomic_fetch_add_explicit((v23 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        v22 -= 8;
        if (v22 == -8)
        {
          _Unwind_Resume(exception_object);
        }
      }
    }
  }
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::Builder::SetNodes(void *a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = a1[1];
  *a1 = v4;
  a1[1] = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::Builder::SetTerminals(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 24);
  *(a1 + 16) = v4;
  *(a1 + 24) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::Builder::SetInterfaceMappings(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 40);
  *(a1 + 32) = v4;
  *(a1 + 40) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetworkSchema::Builder::SetConfig(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 56);
  *(a1 + 48) = v4;
  *(a1 + 56) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this, const pxrInternal__aapl__pxrReserved__::TfToken *a2)
{
  if (!*(this + 2))
  {
    return 0;
  }

  v5 = *(this + 3);
  v4 = (this + 24);
  if ((v5 ^ *a2) <= 7)
  {
    return *(this + 4);
  }

  sub_29A166F2C(v4, a2);
  v7 = *a2 & 0xFFFFFFFFFFFFFFF8;
  if (v7)
  {
    v8 = (v7 + 16);
    if (*(v7 + 39) < 0)
    {
      v8 = *v8;
    }
  }

  else
  {
    v8 = "";
  }

  v9 = *(this + 2);
  sub_29A008E78(__p, v8);
  pxrInternal__aapl__pxrReserved__::SdfPath::SdfPath(&v13, __p);
  v10 = sub_29A55CDFC(v9);
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v14);
  sub_29A1DE3A4(&v13);
  if (v12 < 0)
  {
    operator delete(__p[0]);
  }

  if (*(this + 2) + 8 == v10)
  {
    result = 0;
  }

  else
  {
    result = v10 + 40;
  }

  *(this + 4) = result;
  return result;
}

void sub_29AC48500(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, int a15)
{
  sub_29A1DCEA8(&a15);
  if (a14 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetOrCreateNode(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this, const pxrInternal__aapl__pxrReserved__::TfToken *a2)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  if (!result)
  {
    if (*(this + 2))
    {
      v5 = *a2 & 0xFFFFFFFFFFFFFFF8;
      if (v5)
      {
        v6 = (v5 + 16);
        if (*(v5 + 39) < 0)
        {
          v6 = *v6;
        }
      }

      else
      {
        v6 = "";
      }

      sub_29A008E78(__p, v6);
      pxrInternal__aapl__pxrReserved__::SdfPath::SdfPath(v8, __p);
      v9 = v8;
      sub_29AC49DF8();
    }

    return 0;
  }

  return result;
}

void sub_29AC4860C(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, int a15, int a16)
{
  sub_29A1DCEA8(&a16);
  if (a14 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

uint64_t pxrInternal__aapl__pxrReserved__::_GetKeysFromVtDictionary@<X0>(pxrInternal__aapl__pxrReserved__::VtDictionary *a1@<X0>, const void **a2@<X1>, uint64_t *a3@<X8>)
{
  *a3 = 0;
  a3[1] = 0;
  a3[2] = 0;
  v39 = pxrInternal__aapl__pxrReserved__::VtDictionary::begin(a1);
  v40 = v6;
  result = pxrInternal__aapl__pxrReserved__::VtDictionary::end(a1);
  v9 = v39;
  if (v8)
  {
    v10 = v39 == result;
  }

  else
  {
    v10 = 1;
  }

  v11 = v10;
  if (v40 != v8 || v11 == 0)
  {
    v13 = *(a2 + 23);
    if (v13 < 0)
    {
      v14 = a2[1];
    }

    else
    {
      v14 = *(a2 + 23);
    }

    if (v14)
    {
      if (v13 >= 0)
      {
        v15 = *(a2 + 23);
      }

      else
      {
        v15 = a2[1];
      }

      sub_29A022DE0(&v41, v15 + 1);
      if ((v41.__r_.__value_.__r.__words[2] & 0x8000000000000000) == 0)
      {
        v16 = &v41;
      }

      else
      {
        v16 = v41.__r_.__value_.__r.__words[0];
      }

      if (v15)
      {
        if (*(a2 + 23) >= 0)
        {
          v17 = a2;
        }

        else
        {
          v17 = *a2;
        }

        memmove(v16, v17, v15);
      }

      *(&v16->__r_.__value_.__l.__data_ + v15) = 58;
      v18 = *(v9 + 55);
      if (v18 >= 0)
      {
        v19 = (v9 + 32);
      }

      else
      {
        v19 = *(v9 + 32);
      }

      if (v18 >= 0)
      {
        v20 = *(v9 + 55);
      }

      else
      {
        v20 = *(v9 + 40);
      }

      v21 = std::string::append(&v41, v19, v20);
      v22 = *&v21->__r_.__value_.__l.__data_;
      v38 = v21->__r_.__value_.__r.__words[2];
      *__dst = v22;
      v21->__r_.__value_.__l.__size_ = 0;
      v21->__r_.__value_.__r.__words[2] = 0;
      v21->__r_.__value_.__r.__words[0] = 0;
      if (SHIBYTE(v41.__r_.__value_.__r.__words[2]) < 0)
      {
        operator delete(v41.__r_.__value_.__l.__data_);
      }
    }

    else if (*(v39 + 55) < 0)
    {
      sub_29A008D14(__dst, *(v39 + 32), *(v39 + 40));
    }

    else
    {
      *__dst = *(v39 + 32);
      v38 = *(v39 + 48);
    }

    pxrInternal__aapl__pxrReserved__::TfToken::TfToken(&v44);
    v24 = a3[1];
    v23 = a3[2];
    if (v24 >= v23)
    {
      v25 = (v24 - *a3) >> 3;
      v26 = v25 + 1;
      if ((v25 + 1) >> 61)
      {
        sub_29A00C9A4();
      }

      v27 = v23 - *a3;
      if (v27 >> 2 > v26)
      {
        v26 = v27 >> 2;
      }

      if (v27 >= 0x7FFFFFFFFFFFFFF8)
      {
        v28 = 0x1FFFFFFFFFFFFFFFLL;
      }

      else
      {
        v28 = v26;
      }

      v43 = a3;
      if (v28)
      {
        v29 = sub_29A00C9BC(a3, v28);
      }

      else
      {
        v29 = 0;
      }

      v30 = &v29[8 * v25];
      v41.__r_.__value_.__r.__words[0] = v29;
      v41.__r_.__value_.__l.__size_ = v30;
      v42 = &v29[8 * v28];
      *v30 = v44;
      v44 = 0;
      v41.__r_.__value_.__r.__words[2] = (v30 + 1);
      sub_29A15412C(a3, &v41);
      v31 = a3[1];
      sub_29A1541C0(&v41);
      v32 = v44;
      a3[1] = v31;
      if ((v32 & 7) != 0)
      {
        atomic_fetch_add_explicit((v32 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }
    }

    else
    {
      *v24 = v44;
      a3[1] = (v24 + 1);
    }

    if (sub_29A185258((v9 + 56)))
    {
      v33 = *(v9 + 64);
      if ((v33 & 4) != 0)
      {
        v34 = (*((v33 & 0xFFFFFFFFFFFFFFF8) + 168))(v9 + 56);
      }

      else
      {
        v34 = *(v9 + 56);
      }

      if (SHIBYTE(v38) < 0)
      {
        sub_29A008D14(__p, __dst[0], __dst[1]);
      }

      else
      {
        *__p = *__dst;
        v36 = v38;
      }

      pxrInternal__aapl__pxrReserved__::_GetKeysFromVtDictionary(&v41, v34, __p);
      if (SHIBYTE(v36) < 0)
      {
        operator delete(__p[0]);
      }

      sub_29A372808(a3, a3[1], v41.__r_.__value_.__l.__data_, v41.__r_.__value_.__l.__size_, (v41.__r_.__value_.__l.__size_ - v41.__r_.__value_.__r.__words[0]) >> 3);
      v44 = &v41;
      sub_29A124AB0(&v44);
    }

    if (SHIBYTE(v38) < 0)
    {
      operator delete(__dst[0]);
    }

    pxrInternal__aapl__pxrReserved__::VtDictionary::Iterator<std::map<std::string,pxrInternal__aapl__pxrReserved__::VtValue> const*,std::__map_const_iterator<std::__tree_const_iterator<std::__value_type<std::string,pxrInternal__aapl__pxrReserved__::VtValue>,std::__tree_node<std::__value_type<std::string,pxrInternal__aapl__pxrReserved__::VtValue>,void *> *,long>>>::increment();
  }

  return result;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetMaterialConfigKeys(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, uint64_t *a2@<X8>)
{
  v3 = *(this + 2);
  sub_29A008E78(__p, "");
  pxrInternal__aapl__pxrReserved__::_GetKeysFromVtDictionary((v3 + 72), __p, a2);
  if (v5 < 0)
  {
    operator delete(__p[0]);
  }
}

void sub_29AC48A54(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, void *__p, uint64_t a11, int a12, __int16 a13, char a14, char a15)
{
  if (a15 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(exception_object);
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetMaterialConfigValue@<X0>(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, void *a3@<X8>)
{
  v5 = *(this + 2);
  if ((*a2 & 0xFFFFFFFFFFFFFFF8) != 0)
  {
    EmptyString = ((*a2 & 0xFFFFFFFFFFFFFFF8) + 16);
  }

  else
  {
    EmptyString = pxrInternal__aapl__pxrReserved__::TfToken::_GetEmptyString(this);
  }

  v7 = pxrInternal__aapl__pxrReserved__::VtDictionary::find((v5 + 72), EmptyString);
  v9 = v8;
  result = pxrInternal__aapl__pxrReserved__::VtDictionary::end((*(this + 2) + 72));
  if (v9 == v11 && (v9 ? (v12 = v7 == result) : (v12 = 1), v12))
  {
    a3[1] = 0;
  }

  else
  {

    return sub_29A186EF4(a3, (v7 + 56));
  }

  return result;
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetNodeNames@<X0>(void *this@<X0>, void *a2@<X8>)
{
  *a2 = 0;
  a2[1] = 0;
  a2[2] = 0;
  v3 = this[2];
  if (v3)
  {
    v4 = this;
    this = sub_29A1D7F98(a2, *(v3 + 16));
    v5 = v4[2];
    v8 = *v5;
    v6 = v5 + 1;
    v7 = v8;
    if (v8 != v6)
    {
      do
      {
        pxrInternal__aapl__pxrReserved__::SdfPath::GetString((v7 + 4));
        pxrInternal__aapl__pxrReserved__::TfToken::TfToken(&v12);
        this = sub_29A153214(a2, &v12);
        if ((v12 & 7) != 0)
        {
          atomic_fetch_add_explicit((v12 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        v9 = v7[1];
        if (v9)
        {
          do
          {
            v10 = v9;
            v9 = *v9;
          }

          while (v9);
        }

        else
        {
          do
          {
            v10 = v7[2];
            v11 = *v10 == v7;
            v7 = v10;
          }

          while (!v11);
        }

        v7 = v10;
      }

      while (v10 != v6);
    }
  }

  return this;
}

void sub_29AC48BE8(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29A124AB0(va);
  _Unwind_Resume(a1);
}

atomic_uint **pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetNodeType@<X0>(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, atomic_uint **a3@<X8>)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  if (!result)
  {
    v6 = 0;
LABEL_6:
    *a3 = v6;
    return result;
  }

  v5 = *result;
  *a3 = *result;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      goto LABEL_6;
    }
  }

  return result;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetNodeTypeInfoKeys(void *a1@<X8>)
{
  *a1 = 0;
  a1[1] = 0;
  a1[2] = 0;
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetAuthoredNodeParameterNames@<X0>(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, void *a3@<X8>)
{
  *a3 = 0;
  a3[1] = 0;
  a3[2] = 0;
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  v5 = result;
  if (result)
  {
    result = sub_29A1D7F98(a3, result[3]);
    v6 = *(v5 + 8);
    v7 = (v5 + 16);
    if (v6 != v7)
    {
      do
      {
        result = sub_29A1D8028(a3, v6 + 4);
        v8 = v6[1];
        if (v8)
        {
          do
          {
            v9 = v8;
            v8 = *v8;
          }

          while (v8);
        }

        else
        {
          do
          {
            v9 = v6[2];
            v10 = *v9 == v6;
            v6 = v9;
          }

          while (!v10);
        }

        v6 = v9;
      }

      while (v9 != v7);
    }
  }

  return result;
}

void sub_29AC48D30(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29A124AB0(va);
  _Unwind_Resume(a1);
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetNodeParameterValue@<X0>(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, const pxrInternal__aapl__pxrReserved__::TfToken *a3@<X2>, void *a4@<X8>)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  if (!result || (v7 = result, result = sub_29A31B8F0((result + 1), a3), v7 + 2 == result))
  {
    a4[1] = 0;
  }

  else
  {

    return sub_29A186EF4(a4, result + 5);
  }

  return result;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetNodeParameterData@<X0>(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, const pxrInternal__aapl__pxrReserved__::TfToken *a3@<X2>, void *a4@<X8>)
{
  a4[1] = 0;
  a4[2] = 0;
  a4[3] = 0;
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  v7 = result;
  if (result)
  {
    v8 = sub_29A31B8F0(result + 8, a3);
    v9 = v7 + 16;
    if (v7 + 16 != v8)
    {
      sub_29A1854E8(a4, (v8 + 40));
    }

    v10 = atomic_load(&qword_2A174A7E0);
    if (!v10)
    {
      v10 = sub_29AC49F18();
    }

    pxrInternal__aapl__pxrReserved__::SdfPath::JoinIdentifier(v10, a3, __p);
    pxrInternal__aapl__pxrReserved__::TfToken::TfToken(&v18);
    if (v17 < 0)
    {
      operator delete(__p[0]);
    }

    v11 = sub_29A31B8F0(v7 + 8, &v18);
    if (v9 != v11)
    {
      v12 = sub_29A27A0F8((v11 + 40));
      sub_29A166F2C(a4 + 2, v12);
    }

    v13 = atomic_load(&qword_2A174A7E0);
    if (!v13)
    {
      v13 = sub_29AC49F18();
    }

    pxrInternal__aapl__pxrReserved__::SdfPath::JoinIdentifier((v13 + 8), a3, __p);
    pxrInternal__aapl__pxrReserved__::TfToken::TfToken(&v15);
    if (v17 < 0)
    {
      operator delete(__p[0]);
    }

    result = sub_29A31B8F0(v7 + 8, &v15);
    if (v9 != result)
    {
      v14 = sub_29A27A0F8((result + 40));
      result = sub_29A166F2C(a4 + 3, v14);
    }

    if ((v15 & 7) != 0)
    {
      atomic_fetch_add_explicit((v15 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    if ((v18 & 7) != 0)
    {
      atomic_fetch_add_explicit((v18 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return result;
}

void sub_29AC48F38(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, void *__p, uint64_t a12, int a13, __int16 a14, char a15, char a16, uint64_t a17)
{
  if (a16 < 0)
  {
    operator delete(__p);
  }

  if ((a17 & 7) != 0)
  {
    atomic_fetch_add_explicit((a17 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  sub_29AC0D710(v17);
  _Unwind_Resume(a1);
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetNodeInputConnectionNames@<X0>(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, void *a3@<X8>)
{
  *a3 = 0;
  a3[1] = 0;
  a3[2] = 0;
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  v5 = result;
  if (result)
  {
    result = sub_29A1D7F98(a3, result[6]);
    v6 = *(v5 + 32);
    v7 = (v5 + 40);
    if (v6 != v7)
    {
      do
      {
        result = sub_29A1D8028(a3, v6 + 4);
        v8 = v6[1];
        if (v8)
        {
          do
          {
            v9 = v8;
            v8 = *v8;
          }

          while (v8);
        }

        else
        {
          do
          {
            v9 = v6[2];
            v10 = *v9 == v6;
            v6 = v9;
          }

          while (!v10);
        }

        v6 = v9;
      }

      while (v9 != v7);
    }
  }

  return result;
}

void sub_29AC4906C(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29A124AB0(va);
  _Unwind_Resume(a1);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetNodeInputConnection(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, const pxrInternal__aapl__pxrReserved__::TfToken *a3@<X2>, uint64_t a4@<X8>)
{
  *(a4 + 64) = 0x400000000;
  Node = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  v7 = Node;
  if (Node)
  {
    v8 = sub_29A31B8F0(Node + 32, a3);
    v9 = v8;
    if (v7 + 40 != v8)
    {
      v10 = *(v8 + 40);
      v11 = *(v8 + 48);
      v12 = (v11 - v10) >> 4;
      if (v12 > *(a4 + 68))
      {
        sub_29AC101FC(a4, v12);
        v10 = *(v9 + 40);
        v11 = *(v9 + 48);
      }

      for (; v10 != v11; v10 = (v10 + 16))
      {
        pxrInternal__aapl__pxrReserved__::SdfPath::GetString(v10);
        pxrInternal__aapl__pxrReserved__::TfToken::TfToken(&v14);
        v13 = *(v10 + 1);
        v15 = v13;
        if ((v13 & 7) != 0 && (atomic_fetch_add_explicit((v13 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
        {
          v15 &= 0xFFFFFFFFFFFFFFF8;
        }

        sub_29AC1031C(a4, &v14);
        if ((v15 & 7) != 0)
        {
          atomic_fetch_add_explicit((v15 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        if ((v14 & 7) != 0)
        {
          atomic_fetch_add_explicit((v14 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }
      }
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::DeleteNode(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this, const pxrInternal__aapl__pxrReserved__::TfToken *a2)
{
  v2 = *(this + 2);
  if (v2)
  {
    v3 = *a2 & 0xFFFFFFFFFFFFFFF8;
    if (v3)
    {
      v4 = (v3 + 16);
      if (*(v3 + 39) < 0)
      {
        v4 = *v4;
      }
    }

    else
    {
      v4 = "";
    }

    sub_29A008E78(__p, v4);
    pxrInternal__aapl__pxrReserved__::SdfPath::SdfPath(&v7, __p);
    sub_29AC4A0D8(v2);
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v8);
    sub_29A1DE3A4(&v7);
    if (v6 < 0)
    {
      operator delete(__p[0]);
    }
  }
}

void sub_29AC49298(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, void *__p, uint64_t a10, int a11, __int16 a12, char a13, char a14, int a15)
{
  sub_29A1DCEA8(&a15);
  if (a14 < 0)
  {
    operator delete(__p);
  }

  _Unwind_Resume(a1);
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::SetNodeType(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this, const pxrInternal__aapl__pxrReserved__::TfToken *a2, const pxrInternal__aapl__pxrReserved__::TfToken *a3)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetOrCreateNode(this, a2);
  if (result)
  {

    return sub_29A166F2C(result, a3);
  }

  return result;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::SetNodeParameterValue(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this, const pxrInternal__aapl__pxrReserved__::TfToken *a2, const pxrInternal__aapl__pxrReserved__::TfToken *a3, const pxrInternal__aapl__pxrReserved__::VtValue *a4)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetOrCreateNode(this, a2);
  if (result)
  {
    sub_29A94BD04();
  }

  return result;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::SetNodeParameterData(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *a1, const pxrInternal__aapl__pxrReserved__::TfToken *a2, void *a3)
{
  v6 = *MEMORY[0x29EDCA608];
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetOrCreateNode(a1, a2);
  if (result)
  {
    __p = a3;
    sub_29A94BD04();
  }

  return result;
}

void sub_29AC49590(_Unwind_Exception *a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, void *__p, uint64_t a14, int a15, __int16 a16, char a17, char a18)
{
  sub_29A186B14(&__p);
  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(a1);
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::DeleteNodeParameter(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this, const pxrInternal__aapl__pxrReserved__::TfToken *a2, const pxrInternal__aapl__pxrReserved__::TfToken *a3)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  if (result)
  {
    v5 = result;
    sub_29AC4A134((result + 8), a3);
    v6 = atomic_load(&qword_2A174A7E0);
    if (!v6)
    {
      v6 = sub_29AC49F18();
    }

    pxrInternal__aapl__pxrReserved__::SdfPath::JoinIdentifier(v6, a3, __p);
    pxrInternal__aapl__pxrReserved__::TfToken::TfToken(&v11);
    if (v10 < 0)
    {
      operator delete(__p[0]);
    }

    sub_29AC4A134((v5 + 8), &v11);
    v7 = atomic_load(&qword_2A174A7E0);
    if (!v7)
    {
      v7 = sub_29AC49F18();
    }

    pxrInternal__aapl__pxrReserved__::SdfPath::JoinIdentifier((v7 + 8), a3, __p);
    pxrInternal__aapl__pxrReserved__::TfToken::TfToken(&v8);
    if (v10 < 0)
    {
      operator delete(__p[0]);
    }

    result = sub_29AC4A134((v5 + 8), &v8);
    if ((v8 & 7) != 0)
    {
      atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    if ((v11 & 7) != 0)
    {
      atomic_fetch_add_explicit((v11 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return result;
}

void sub_29AC496F0(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, void *__p, uint64_t a12, int a13, __int16 a14, char a15, char a16, uint64_t a17)
{
  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((a17 & 7) != 0)
  {
    atomic_fetch_add_explicit((a17 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::SetNodeInputConnection(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *a1, const pxrInternal__aapl__pxrReserved__::TfToken *a2, void *a3, uint64_t *a4)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetOrCreateNode(a1, a2);
  if (result)
  {
    memset(v14, 0, 24);
    v7 = sub_29AC498F8(v14, *(a4 + 16));
    v8 = *(a4 + 16);
    if (*(a4 + 17) >= 5u)
    {
      a4 = *a4;
    }

    if (v8)
    {
      v9 = &a4[2 * v8];
      do
      {
        if ((*a4 & 0xFFFFFFFFFFFFFFF8) != 0)
        {
          EmptyString = ((*a4 & 0xFFFFFFFFFFFFFFF8) + 16);
        }

        else
        {
          EmptyString = pxrInternal__aapl__pxrReserved__::TfToken::_GetEmptyString(v7);
        }

        pxrInternal__aapl__pxrReserved__::SdfPath::SdfPath(&v12, EmptyString);
        v11 = a4[1];
        v13 = v11;
        if ((v11 & 7) != 0 && (atomic_fetch_add_explicit((v11 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
        {
          v13 &= 0xFFFFFFFFFFFFFFF8;
        }

        sub_29AC43364(v14, &v12);
        if ((v13 & 7) != 0)
        {
          atomic_fetch_add_explicit((v13 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v12 + 1);
        v7 = sub_29A1DE3A4(&v12);
        a4 += 2;
      }

      while (a4 != v9);
    }

    v14[4] = a3;
    sub_29AC44E98();
  }

  return result;
}

void sub_29AC498C4(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, void **a10, uint64_t a11, char a12)
{
  a10 = &a12;
  sub_29ABF3254(&a10);
  _Unwind_Resume(a1);
}

void **sub_29AC498F8(void **result, unint64_t a2)
{
  if (a2 > (result[2] - *result) >> 4)
  {
    if (a2 >> 60)
    {
      sub_29A00C9A4();
    }

    v2 = result;
    v3 = result[1] - *result;
    v16 = result;
    v4 = sub_29A017BD4(result, a2);
    v5 = &v4[v3];
    v12 = v4;
    v13 = &v4[v3];
    v7 = &v4[16 * v6];
    v14 = &v4[v3];
    v15 = v7;
    v8 = v2[1];
    v9 = &v4[v3 + *v2 - v8];
    sub_29AC450D4(v2, *v2, v8, v9);
    v10 = *v2;
    *v2 = v9;
    v2[1] = v5;
    v11 = v2[2];
    v2[2] = v7;
    v14 = v10;
    v15 = v11;
    v12 = v10;
    v13 = v10;
    return sub_29AC451AC(&v12);
  }

  return result;
}

void sub_29AC499A0(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29AC451AC(va);
  _Unwind_Resume(a1);
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::DeleteNodeInputConnection(pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface *this, const pxrInternal__aapl__pxrReserved__::TfToken *a2, const pxrInternal__aapl__pxrReserved__::TfToken *a3)
{
  result = pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::_GetNode(this, a2);
  if (result)
  {
    v5 = (result + 32);

    return sub_29AC4A3F8(v5, a3);
  }

  return result;
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetTerminalNames@<X0>(void *this@<X0>, void *a2@<X8>)
{
  *a2 = 0;
  a2[1] = 0;
  a2[2] = 0;
  v3 = this[2];
  if (v3)
  {
    v4 = this;
    this = sub_29A1D7F98(a2, *(v3 + 40));
    v5 = v4[2];
    v6 = *(v5 + 24);
    v7 = (v5 + 32);
    if (v6 != (v5 + 32))
    {
      do
      {
        this = sub_29A1D8028(a2, v6 + 4);
        v8 = v6[1];
        if (v8)
        {
          do
          {
            v9 = v8;
            v8 = *v8;
          }

          while (v8);
        }

        else
        {
          do
          {
            v9 = v6[2];
            v10 = *v9 == v6;
            v6 = v9;
          }

          while (!v10);
        }

        v6 = v9;
      }

      while (v9 != v7);
    }
  }

  return this;
}

void sub_29AC49AA8(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29A124AB0(va);
  _Unwind_Resume(a1);
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::GetTerminalConnection@<X0>(uint64_t this@<X0>, const pxrInternal__aapl__pxrReserved__::TfToken *a2@<X1>, uint64_t a3@<X8>)
{
  v4 = *(this + 16);
  if (!v4 || (v5 = this, this = sub_29A31B8F0(v4 + 24, a2), *(v5 + 16) + 32 == this))
  {
    *a3 = 0;
    *(a3 + 8) = 0;
    *(a3 + 16) = 0;
  }

  else
  {
    v6 = this;
    v10 = 1;
    pxrInternal__aapl__pxrReserved__::SdfPath::GetAsToken((this + 40), &v8);
    v7 = *(v6 + 48);
    v9 = v7;
    if ((v7 & 7) != 0 && (atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
    {
      v9 &= 0xFFFFFFFFFFFFFFF8;
    }

    this = sub_29AC0F42C(a3, &v10, &v8);
    if ((v9 & 7) != 0)
    {
      atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    if ((v8 & 7) != 0)
    {
      atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::DeleteTerminal(uint64_t this, const pxrInternal__aapl__pxrReserved__::TfToken *a2)
{
  v2 = *(this + 16);
  if (v2)
  {
    return sub_29AC4A4A4((v2 + 24), a2);
  }

  return this;
}

pxrInternal__aapl__pxrReserved__::TfToken *pxrInternal__aapl__pxrReserved__::HdMaterialNetwork2Interface::SetTerminalConnection(pxrInternal__aapl__pxrReserved__::TfToken *result, uint64_t a2, void *a3)
{
  if (*(result + 2))
  {
    if ((*a3 & 0xFFFFFFFFFFFFFFF8) != 0)
    {
      EmptyString = ((*a3 & 0xFFFFFFFFFFFFFFF8) + 16);
    }

    else
    {
      EmptyString = pxrInternal__aapl__pxrReserved__::TfToken::_GetEmptyString(result);
    }

    pxrInternal__aapl__pxrReserved__::SdfPath::SdfPath(&v7, EmptyString);
    v6 = a3[1];
    v8 = v6;
    if ((v6 & 7) != 0 && (atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
    {
      v8 &= 0xFFFFFFFFFFFFFFF8;
    }

    v9 = a2;
    sub_29AC44D8C();
  }

  return result;
}

uint64_t sub_29AC49D04(uint64_t a1)
{
  *a1 = &unk_2A207C550;
  v2 = *(a1 + 24);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 12));
  sub_29A1DE3A4((a1 + 8));
  return a1;
}

void sub_29AC49D70(void *a1)
{
  *a1 = &unk_2A207C550;
  v2 = a1[3];
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(a1 + 3);
  sub_29A1DE3A4(a1 + 2);

  operator delete(a1);
}

void sub_29AC49DEC(void *a1@<X8>)
{
  *a1 = 0;
  a1[1] = 0;
  a1[2] = 0;
}

double sub_29AC49E90@<D0>(uint64_t a1@<X0>, _DWORD **a2@<X2>, void *a3@<X8>)
{
  v6 = operator new(0x60uLL);
  *a3 = v6;
  a3[1] = a1;
  a3[2] = 0;
  v7 = *a2;
  sub_29A1DDD84(v6 + 8, v7);
  sub_29A1DDDC0(v6 + 9, v7 + 1);
  result = 0.0;
  *(v6 + 56) = 0u;
  v6 += 56;
  *(v6 - 1) = 0u;
  *(v6 - 1) = v6;
  *(v6 + 4) = 0;
  *(v6 + 3) = 0;
  *(v6 + 2) = v6 + 24;
  *(a3 + 16) = 1;
  return result;
}

unint64_t sub_29AC49F18()
{
  v13 = *MEMORY[0x29EDCA608];
  v0 = operator new(0x28uLL);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0, "colorSpace", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v0 + 1, "typeName", 0);
  v1 = v0 + 2;
  v2 = *v0;
  v11 = v2;
  if ((v2 & 7) != 0)
  {
    v3 = (v2 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v3, 2u, memory_order_relaxed) & 1) == 0)
    {
      v11 = v3;
    }
  }

  v4 = v0[1];
  v12 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v12 = v5;
    }
  }

  *v1 = 0;
  v0[3] = 0;
  v0[4] = 0;
  sub_29A12EF7C(v1, &v11, &v13, 2uLL);
  for (i = 8; i != -8; i -= 8)
  {
    v7 = *(&v11 + i);
    if ((v7 & 7) != 0)
    {
      atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  v8 = 0;
  atomic_compare_exchange_strong(&qword_2A174A7E0, &v8, v0);
  if (v8)
  {
    v9 = sub_29A1DAC64(v0);
    operator delete(v9);
    return atomic_load(&qword_2A174A7E0);
  }

  return v0;
}

void sub_29AC4A05C(_Unwind_Exception *a1)
{
  v4 = 8;
  while (1)
  {
    v5 = *(v2 + v4);
    if ((v5 & 7) != 0)
    {
      atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v4 -= 8;
    if (v4 == -8)
    {
      v6 = v1[1];
      if ((v6 & 7) != 0)
      {
        atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      operator delete(v1);
      _Unwind_Resume(a1);
    }
  }
}

uint64_t sub_29AC4A0D8(uint64_t **a1)
{
  v2 = sub_29A55CDFC(a1);
  if (a1 + 1 == v2)
  {
    return 0;
  }

  v3 = v2;
  sub_29A03AFE8(a1, v2);
  sub_29AC32B14((v3 + 4));
  operator delete(v3);
  return 1;
}

uint64_t sub_29AC4A134(uint64_t **a1, uint64_t *a2)
{
  v3 = sub_29A31B8F0(a1, a2);
  if (a1 + 1 == v3)
  {
    return 0;
  }

  sub_29AC4A17C(a1, v3);
  return 1;
}

uint64_t *sub_29AC4A17C(uint64_t **a1, uint64_t *a2)
{
  v3 = sub_29A03AFE8(a1, a2);
  sub_29A186B14((a2 + 5));
  v4 = a2[4];
  if ((v4 & 7) != 0)
  {
    atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  operator delete(a2);
  return v3;
}

uint64_t sub_29AC4A1D0(uint64_t a1, uint64_t a2, uint64_t a3, unint64_t a4)
{
  v8 = *a1;
  if (a4 > (*(a1 + 16) - *a1) >> 4)
  {
    sub_29AC4A310(a1);
    if (a4 >> 60)
    {
      sub_29A00C9A4();
    }

    v9 = *(a1 + 16) - *a1;
    v10 = v9 >> 3;
    if (v9 >> 3 <= a4)
    {
      v10 = a4;
    }

    if (v9 >= 0x7FFFFFFFFFFFFFF0)
    {
      v11 = 0xFFFFFFFFFFFFFFFLL;
    }

    else
    {
      v11 = v10;
    }

    sub_29A0D0518(a1, v11);
    result = sub_29ABF30DC(a1, a2, a3, *(a1 + 8));
    goto LABEL_11;
  }

  v13 = *(a1 + 8) - v8;
  if (a4 > v13 >> 4)
  {
    sub_29AC4A37C(&v17, a2, a2 + v13, v8);
    result = sub_29ABF30DC(a1, a2 + v13, a3, *(a1 + 8));
LABEL_11:
    *(a1 + 8) = result;
    return result;
  }

  result = sub_29AC4A37C(&v18, a2, a3, v8);
  v15 = v14;
  v16 = *(a1 + 8);
  if (v16 != v14)
  {
    do
    {
      v16 -= 16;
      result = sub_29ABF31FC(a1, v16);
    }

    while (v16 != v15);
  }

  *(a1 + 8) = v15;
  return result;
}

void sub_29AC4A310(void **a1)
{
  v1 = *a1;
  if (*a1)
  {
    v3 = a1[1];
    v4 = *a1;
    if (v3 != v1)
    {
      do
      {
        v3 -= 16;
        sub_29ABF31FC(a1, v3);
      }

      while (v3 != v1);
      v4 = *a1;
    }

    a1[1] = v1;
    operator delete(v4);
    *a1 = 0;
    a1[1] = 0;
    a1[2] = 0;
  }
}

uint64_t sub_29AC4A37C(uint64_t a1, uint64_t a2, uint64_t a3, uint64_t a4)
{
  v5 = a2;
  if (a2 == a3)
  {
    return a2;
  }

  v6 = a3;
  do
  {
    sub_29A2258F0(a4, v5);
    sub_29A225948((a4 + 4), (v5 + 4));
    sub_29A166F2C((a4 + 8), (v5 + 8));
    a4 += 16;
    v5 += 16;
  }

  while (v5 != v6);
  return v6;
}

uint64_t sub_29AC4A3F8(uint64_t **a1, uint64_t *a2)
{
  v3 = sub_29A31B8F0(a1, a2);
  if (a1 + 1 == v3)
  {
    return 0;
  }

  sub_29AC4A440(a1, v3);
  return 1;
}

uint64_t *sub_29AC4A440(uint64_t **a1, uint64_t a2)
{
  v3 = sub_29A03AFE8(a1, a2);
  v6 = (a2 + 40);
  sub_29ABF3254(&v6);
  v4 = *(a2 + 32);
  if ((v4 & 7) != 0)
  {
    atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  operator delete(a2);
  return v3;
}

uint64_t sub_29AC4A4A4(uint64_t **a1, uint64_t *a2)
{
  v3 = sub_29A31B8F0(a1, a2);
  if (a1 + 1 == v3)
  {
    return 0;
  }

  v4 = v3;
  sub_29A03AFE8(a1, v3);
  sub_29AC32A54((v4 + 4));
  operator delete(v4);
  return 1;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens_StaticTokenType::~HdMaterialNodeSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens_StaticTokenType *this)
{
  v6 = (this + 40);
  sub_29A124AB0(&v6);
  v2 = *(this + 4);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v3 = *(this + 3);
  if ((v3 & 7) != 0)
  {
    atomic_fetch_add_explicit((v3 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v4 = *(this + 2);
  if ((v4 & 7) != 0)
  {
    atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v5 = *(this + 1);
  if ((v5 & 7) != 0)
  {
    atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens_StaticTokenType::HdMaterialNodeSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens_StaticTokenType *this)
{
  v22 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "parameters", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "inputConnections", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this + 16, "nodeIdentifier", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this + 24, "renderContextNodeIdentifiers", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this + 32, "nodeTypeInfo", 0);
  v3 = (this + 40);
  v4 = *this;
  v17 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v17 = v5;
    }
  }

  v6 = *(this + 1);
  v18 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v18 = v7;
    }
  }

  v8 = *(this + 2);
  v19 = v8;
  if ((v8 & 7) != 0)
  {
    v9 = (v8 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v9, 2u, memory_order_relaxed) & 1) == 0)
    {
      v19 = v9;
    }
  }

  v10 = *(this + 3);
  v20 = v10;
  if ((v10 & 7) != 0)
  {
    v11 = (v10 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v11, 2u, memory_order_relaxed) & 1) == 0)
    {
      v20 = v11;
    }
  }

  v12 = *(this + 4);
  v21 = v12;
  if ((v12 & 7) != 0)
  {
    v13 = (v12 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v13, 2u, memory_order_relaxed) & 1) == 0)
    {
      v21 = v13;
    }
  }

  *v3 = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  sub_29A12EF7C(v3, &v17, &v22, 5uLL);
  for (i = 32; i != -8; i -= 8)
  {
    v15 = *(&v17 + i);
    if ((v15 & 7) != 0)
    {
      atomic_fetch_add_explicit((v15 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC4A76C(_Unwind_Exception *a1)
{
  v3 = 32;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[4];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v6 = v1[3];
      if ((v6 & 7) != 0)
      {
        atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v7 = v1[2];
      if ((v7 & 7) != 0)
      {
        atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v8 = v1[1];
      if ((v8 & 7) != 0)
      {
        atomic_fetch_add_explicit((v8 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::GetParameters(pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  }

  v6 = *v4;
  if ((*v4 & 7) != 0)
  {
    v5 = (*v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v6 = v5;
    }
  }

  sub_29ABC2F3C(this, &v7);
  sub_29ABCD3B8(a2, &v7);
  if (v8)
  {
    sub_29A014BEC(v8);
  }

  if ((v6 & 7) != 0)
  {
    atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC4A8D4(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::GetInputConnections(pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  }

  v5 = *(v4 + 1);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC2F3C(this, &v8);
  sub_29ABCD3B8(a2, &v8);
  if (v9)
  {
    sub_29A014BEC(v9);
  }

  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC4A9BC(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::GetNodeIdentifier(pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  }

  v5 = *(v4 + 2);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC4C48(this, a2);
  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::GetRenderContextNodeIdentifiers(pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  }

  v5 = *(v4 + 3);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC2F3C(this, a2);
  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::GetNodeTypeInfo(pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
  }

  v5 = *(v4 + 4);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC2F3C(this, a2);
  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::BuildRetained(uint64_t *a1@<X0>, uint64_t *a2@<X1>, uint64_t *a3@<X2>, uint64_t *a4@<X3>, uint64_t *a5@<X4>, _OWORD *a6@<X8>)
{
  v50 = *MEMORY[0x29EDCA608];
  v11 = &v46;
  v49 = 0;
  memset(v48, 0, sizeof(v48));
  memset(v47, 0, sizeof(v47));
  v46 = 0u;
  v12 = v48;
  if (*a1)
  {
    v14 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    if (!v14)
    {
      v14 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    }

    v11 = v47;
    v12 = v48 + 1;
    sub_29A166F2C(v48, v14);
    v16 = *a1;
    v15 = a1[1];
    if (v15)
    {
      atomic_fetch_add_explicit((v15 + 8), 1uLL, memory_order_relaxed);
    }

    v17 = *(&v46 + 1);
    *&v46 = v16;
    *(&v46 + 1) = v15;
    if (v17)
    {
      sub_29A014BEC(v17);
    }

    v18 = 1;
  }

  else
  {
    v18 = 0;
  }

  if (*a2)
  {
    v19 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    if (!v19)
    {
      v19 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    }

    sub_29A166F2C(v12, v19 + 1);
    ++v18;
    v21 = *a2;
    v20 = a2[1];
    if (v20)
    {
      atomic_fetch_add_explicit((v20 + 8), 1uLL, memory_order_relaxed);
    }

    v22 = *(v11 + 1);
    *v11 = v21;
    *(v11 + 1) = v20;
    if (v22)
    {
      sub_29A014BEC(v22);
    }
  }

  if (*a3)
  {
    v23 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    if (!v23)
    {
      v23 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    }

    sub_29A166F2C(v48 + v18, v23 + 2);
    v24 = v18 + 1;
    v25 = &v47[v18 - 1];
    v27 = *a3;
    v26 = a3[1];
    if (v26)
    {
      atomic_fetch_add_explicit((v26 + 8), 1uLL, memory_order_relaxed);
    }

    v28 = v25[1];
    *v25 = v27;
    v25[1] = v26;
    if (v28)
    {
      sub_29A014BEC(v28);
    }
  }

  else
  {
    v24 = v18;
  }

  if (*a4)
  {
    v29 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    if (!v29)
    {
      v29 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    }

    sub_29A166F2C(v48 + v24, v29 + 3);
    v30 = v24 + 1;
    v31 = &v47[v24 - 1];
    v33 = *a4;
    v32 = a4[1];
    if (v32)
    {
      atomic_fetch_add_explicit((v32 + 8), 1uLL, memory_order_relaxed);
    }

    v34 = v31[1];
    *v31 = v33;
    v31[1] = v32;
    if (v34)
    {
      sub_29A014BEC(v34);
    }
  }

  else
  {
    v30 = v24;
  }

  if (*a5)
  {
    v35 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    if (!v35)
    {
      v35 = sub_29AC0FF34(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchemaTokens);
    }

    sub_29A166F2C(v48 + v30, v35 + 4);
    v36 = v30 + 1;
    v37 = &v47[v30 - 1];
    v39 = *a5;
    v38 = a5[1];
    if (v38)
    {
      atomic_fetch_add_explicit((v38 + 8), 1uLL, memory_order_relaxed);
    }

    v40 = v37[1];
    *v37 = v39;
    v37[1] = v38;
    if (v40)
    {
      sub_29A014BEC(v40);
    }
  }

  else
  {
    v36 = v30;
  }

  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(v36, v48, &v46, &v45);
  *a6 = v45;
  for (i = 72; i != -8; i -= 16)
  {
    v42 = *(&v47[-1] + i);
    if (v42)
    {
      sub_29A014BEC(v42);
    }
  }

  for (j = 32; j != -8; j -= 8)
  {
    v44 = *(v48 + j);
    if ((v44 & 7) != 0)
    {
      atomic_fetch_add_explicit((v44 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }
}

void sub_29AC4AF24(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, char a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, uint64_t a17, uint64_t a18, uint64_t a19, uint64_t a20, char a21)
{
  v22 = 72;
  while (1)
  {
    v23 = *(&a11 + v22);
    if (v23)
    {
      sub_29A014BEC(v23);
    }

    v22 -= 16;
    if (v22 == -8)
    {
      v24 = 32;
      while (1)
      {
        v25 = *(&a21 + v24);
        if ((v25 & 7) != 0)
        {
          atomic_fetch_add_explicit((v25 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        v24 -= 8;
        if (v24 == -8)
        {
          _Unwind_Resume(exception_object);
        }
      }
    }
  }
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::Builder::SetParameters(void *a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = a1[1];
  *a1 = v4;
  a1[1] = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::Builder::SetInputConnections(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 24);
  *(a1 + 16) = v4;
  *(a1 + 24) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::Builder::SetNodeIdentifier(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 40);
  *(a1 + 32) = v4;
  *(a1 + 40) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::Builder::SetRenderContextNodeIdentifiers(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 56);
  *(a1 + 48) = v4;
  *(a1 + 56) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNodeSchema::Builder::SetNodeTypeInfo(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 72);
  *(a1 + 64) = v4;
  *(a1 + 72) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType::~HdMaterialNodeParameterSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType *this)
{
  v4 = (this + 24);
  sub_29A124AB0(&v4);
  v2 = *(this + 2);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v3 = *(this + 1);
  if ((v3 & 7) != 0)
  {
    atomic_fetch_add_explicit((v3 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType::HdMaterialNodeParameterSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType *this)
{
  v16 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "value", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "colorSpace", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this + 16, "typeName", 0);
  v3 = (this + 24);
  v4 = *this;
  v13 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v13 = v5;
    }
  }

  v6 = *(this + 1);
  v14 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v14 = v7;
    }
  }

  v8 = *(this + 2);
  v15 = v8;
  if ((v8 & 7) != 0)
  {
    v9 = (v8 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v9, 2u, memory_order_relaxed) & 1) == 0)
    {
      v15 = v9;
    }
  }

  *v3 = 0;
  *(this + 4) = 0;
  *(this + 5) = 0;
  sub_29A12EF7C(v3, &v13, &v16, 3uLL);
  for (i = 16; i != -8; i -= 8)
  {
    v11 = *(&v13 + i);
    if ((v11 & 7) != 0)
    {
      atomic_fetch_add_explicit((v11 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC4B2C8(_Unwind_Exception *a1)
{
  v3 = 16;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[2];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v6 = v1[1];
      if ((v6 & 7) != 0)
      {
        atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema::GetValue(pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC4B8CC(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
  }

  v6 = *v4;
  if ((*v4 & 7) != 0)
  {
    v5 = (*v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v6 = v5;
    }
  }

  sub_29AC0F63C(this, a2);
  if ((v6 & 7) != 0)
  {
    atomic_fetch_add_explicit((v6 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema::GetColorSpace(pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC4B8CC(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
  }

  v5 = *(v4 + 1);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC4C48(this, a2);
  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema::GetTypeName(pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC4B8CC(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
  }

  v5 = *(v4 + 2);
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC4C48(this, a2);
  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema::BuildRetained(uint64_t *a1@<X0>, uint64_t *a2@<X1>, uint64_t *a3@<X2>, _OWORD *a4@<X8>)
{
  v33[2] = *MEMORY[0x29EDCA608];
  v7 = &v30;
  v32 = 0;
  v33[0] = 0;
  v33[1] = 0;
  v8 = &v32;
  memset(v31, 0, sizeof(v31));
  v30 = 0u;
  if (*a1)
  {
    v10 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
    if (!v10)
    {
      v10 = sub_29AC4B8CC(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
    }

    v7 = v31;
    v8 = v33;
    sub_29A166F2C(&v32, v10);
    v12 = *a1;
    v11 = a1[1];
    if (v11)
    {
      atomic_fetch_add_explicit((v11 + 8), 1uLL, memory_order_relaxed);
    }

    v13 = *(&v30 + 1);
    *&v30 = v12;
    *(&v30 + 1) = v11;
    if (v13)
    {
      sub_29A014BEC(v13);
    }

    v14 = 1;
  }

  else
  {
    v14 = 0;
  }

  if (*a2)
  {
    v15 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
    if (!v15)
    {
      v15 = sub_29AC4B8CC(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
    }

    sub_29A166F2C(v8, v15 + 1);
    ++v14;
    v17 = *a2;
    v16 = a2[1];
    if (v16)
    {
      atomic_fetch_add_explicit((v16 + 8), 1uLL, memory_order_relaxed);
    }

    v18 = *(v7 + 1);
    *v7 = v17;
    *(v7 + 1) = v16;
    if (v18)
    {
      sub_29A014BEC(v18);
    }
  }

  if (*a3)
  {
    v19 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
    if (!v19)
    {
      v19 = sub_29AC4B8CC(&pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens);
    }

    sub_29A166F2C(&v33[v14 - 1], v19 + 2);
    v20 = v14 + 1;
    v21 = &v31[v14 - 1];
    v23 = *a3;
    v22 = a3[1];
    if (v22)
    {
      atomic_fetch_add_explicit((v22 + 8), 1uLL, memory_order_relaxed);
    }

    v24 = v21[1];
    *v21 = v23;
    v21[1] = v22;
    if (v24)
    {
      sub_29A014BEC(v24);
    }
  }

  else
  {
    v20 = v14;
  }

  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(v20, &v32, &v30, &v29);
  *a4 = v29;
  for (i = 40; i != -8; i -= 16)
  {
    v26 = *(&v31[-1] + i);
    if (v26)
    {
      sub_29A014BEC(v26);
    }
  }

  for (j = 2; j != -1; --j)
  {
    v28 = v33[j - 1];
    if ((v28 & 7) != 0)
    {
      atomic_fetch_add_explicit((v28 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }
}

void sub_29AC4B78C(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, char a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, uint64_t a16, char a17)
{
  v18 = 40;
  while (1)
  {
    v19 = *(&a11 + v18);
    if (v19)
    {
      sub_29A014BEC(v19);
    }

    v18 -= 16;
    if (v18 == -8)
    {
      v20 = 16;
      while (1)
      {
        v21 = *(&a17 + v20);
        if ((v21 & 7) != 0)
        {
          atomic_fetch_add_explicit((v21 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }

        v20 -= 8;
        if (v20 == -8)
        {
          _Unwind_Resume(exception_object);
        }
      }
    }
  }
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema::Builder::SetValue(void *a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = a1[1];
  *a1 = v4;
  a1[1] = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema::Builder::SetColorSpace(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 24);
  *(a1 + 16) = v4;
  *(a1 + 24) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

uint64_t pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchema::Builder::SetTypeName(uint64_t a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = *(a1 + 40);
  *(a1 + 32) = v4;
  *(a1 + 40) = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType *sub_29AC4B8CC(atomic_ullong *a1)
{
  result = sub_29AC4B914();
  v3 = 0;
  atomic_compare_exchange_strong(a1, &v3, result);
  if (v3)
  {
    if (result)
    {
      pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType::~HdMaterialNodeParameterSchemaTokens_StaticTokenType(result);
      operator delete(v4);
    }

    return atomic_load(a1);
  }

  return result;
}

pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType *sub_29AC4B914()
{
  v0 = operator new(0x30uLL);
  pxrInternal__aapl__pxrReserved__::HdMaterialNodeParameterSchemaTokens_StaticTokenType::HdMaterialNodeParameterSchemaTokens_StaticTokenType(v0);
  return v0;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens_StaticTokenType::~HdMaterialOverrideSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens_StaticTokenType *this)
{
  v3 = (this + 16);
  sub_29A124AB0(&v3);
  v2 = *(this + 1);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens_StaticTokenType::HdMaterialOverrideSchemaTokens_StaticTokenType(atomic_uint **this)
{
  v13 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "materialOverride", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "interfaceValues", 0);
  v3 = this + 2;
  v4 = *this;
  v11 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v11 = v5;
    }
  }

  v6 = this[1];
  v12 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v12 = v7;
    }
  }

  *v3 = 0;
  this[3] = 0;
  this[4] = 0;
  sub_29A12EF7C(v3, &v11, &v13, 2uLL);
  for (i = 8; i != -8; i -= 8)
  {
    v9 = *(&v11 + i);
    if ((v9 & 7) != 0)
    {
      atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC4BAD4(_Unwind_Exception *a1)
{
  v3 = 8;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[1];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema::GetInterfaceValues(pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
  if (!v4)
  {
    v4 = sub_29AC4BF90(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
  }

  v5 = v4[1];
  v7 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v7 = v6;
    }
  }

  sub_29ABC2F3C(this, &v8);
  sub_29ABCD3B8(a2, &v8);
  if (v9)
  {
    sub_29A014BEC(v9);
  }

  if ((v7 & 7) != 0)
  {
    atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC4BBE8(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a10 & 7) != 0)
  {
    atomic_fetch_add_explicit((a10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema::BuildRetained(uint64_t *a1@<X0>, _OWORD *a2@<X8>)
{
  v11[1] = *MEMORY[0x29EDCA608];
  v10 = 0;
  v11[0] = 0;
  v9 = 0;
  if (*a1)
  {
    v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
    if (!v4)
    {
      v4 = sub_29AC4BF90(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
    }

    sub_29A166F2C(v11, v4 + 1);
    v6 = *a1;
    v5 = a1[1];
    if (v5)
    {
      atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
    }

    v9 = v6;
    v10 = v5;
    v7 = 1;
  }

  else
  {
    v7 = 0;
  }

  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(v7, v11, &v9, &v8);
  *a2 = v8;
  if (v10)
  {
    sub_29A014BEC(v10);
  }

  if ((v11[0] & 7) != 0)
  {
    atomic_fetch_add_explicit((v11[0] & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC4BD24(_Unwind_Exception *exception_object, int a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, uint64_t a10, uint64_t a11, std::__shared_weak_count *a12, uint64_t a13)
{
  if (a12)
  {
    sub_29A014BEC(a12);
  }

  if ((a13 & 7) != 0)
  {
    atomic_fetch_add_explicit((a13 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(exception_object);
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema::Builder::SetInterfaceValues(void *a1, uint64_t *a2)
{
  v4 = *a2;
  v3 = a2[1];
  if (v3)
  {
    atomic_fetch_add_explicit((v3 + 8), 1uLL, memory_order_relaxed);
  }

  v5 = a1[1];
  *a1 = v4;
  a1[1] = v3;
  if (v5)
  {
    sub_29A014BEC(v5);
  }

  return a1;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema::GetFromParent(uint64_t *a1@<X0>, void *a2@<X8>)
{
  v3 = *a1;
  if (*a1)
  {
    if (!atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens))
    {
      sub_29AC4BF90(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
    }

    (*(*v3 + 24))(&v8, v3);
    sub_29ABC3244(&v8, &v10);
    v6 = v10;
    v5 = v11;
    if (v11)
    {
      atomic_fetch_add_explicit(&v11->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v5);
      v7 = v11;
      *a2 = v6;
      a2[1] = v5;
      if (v7)
      {
        sub_29A014BEC(v7);
      }
    }

    else
    {
      *a2 = v10;
      a2[1] = 0;
    }

    if (v9)
    {
      sub_29A014BEC(v9);
    }
  }

  else
  {
    v10 = 0;
    v11 = 0;
    *a2 = 0;
    a2[1] = 0;
  }
}

atomic_uint **pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema::GetSchemaToken(pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema *this)
{
  result = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
  if (!result)
  {
    return sub_29AC4BF90(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
  }

  return result;
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema::GetDefaultLocator(pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchema *this)
{
  if ((atomic_load_explicit(&qword_2A174A820, memory_order_acquire) & 1) == 0 && __cxa_guard_acquire(&qword_2A174A820))
  {
    v2 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
    if (!v2)
    {
      v2 = sub_29AC4BF90(&pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens);
    }

    pxrInternal__aapl__pxrReserved__::HdDataSourceLocator::HdDataSourceLocator(&unk_2A174A7E8, v2);
    __cxa_atexit(sub_29ABC33B4, &unk_2A174A7E8, &dword_299FE7000);
    __cxa_guard_release(&qword_2A174A820);
  }

  return &unk_2A174A7E8;
}

atomic_uint **sub_29AC4BF90(atomic_ullong *a1)
{
  result = sub_29AC4BFD8();
  v3 = 0;
  atomic_compare_exchange_strong(a1, &v3, result);
  if (v3)
  {
    if (result)
    {
      pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens_StaticTokenType::~HdMaterialOverrideSchemaTokens_StaticTokenType(result);
      operator delete(v4);
    }

    return atomic_load(a1);
  }

  return result;
}

atomic_uint **sub_29AC4BFD8()
{
  v0 = operator new(0x28uLL);
  pxrInternal__aapl__pxrReserved__::HdMaterialOverrideSchemaTokens_StaticTokenType::HdMaterialOverrideSchemaTokens_StaticTokenType(v0);
  return v0;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens_StaticTokenType::~HdMaterialSchemaTokens_StaticTokenType(pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens_StaticTokenType *this)
{
  v3 = (this + 16);
  sub_29A124AB0(&v3);
  v2 = *(this + 1);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  if ((*this & 7) != 0)
  {
    atomic_fetch_add_explicit((*this & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens_StaticTokenType::HdMaterialSchemaTokens_StaticTokenType(atomic_uint **this)
{
  v13 = *MEMORY[0x29EDCA608];
  v2 = pxrInternal__aapl__pxrReserved__::TfToken::TfToken(this, "material", 0);
  pxrInternal__aapl__pxrReserved__::TfToken::TfToken(v2 + 8, "", 0);
  v3 = this + 2;
  v4 = *this;
  v11 = v4;
  if ((v4 & 7) != 0)
  {
    v5 = (v4 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v5, 2u, memory_order_relaxed) & 1) == 0)
    {
      v11 = v5;
    }
  }

  v6 = this[1];
  v12 = v6;
  if ((v6 & 7) != 0)
  {
    v7 = (v6 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v7, 2u, memory_order_relaxed) & 1) == 0)
    {
      v12 = v7;
    }
  }

  *v3 = 0;
  this[3] = 0;
  this[4] = 0;
  sub_29A12EF7C(v3, &v11, &v13, 2uLL);
  for (i = 8; i != -8; i -= 8)
  {
    v9 = *(&v11 + i);
    if ((v9 & 7) != 0)
    {
      atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  return this;
}

void sub_29AC4C198(_Unwind_Exception *a1)
{
  v3 = 8;
  while (1)
  {
    v4 = *(v2 + v3);
    if ((v4 & 7) != 0)
    {
      atomic_fetch_add_explicit((v4 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }

    v3 -= 8;
    if (v3 == -8)
    {
      v5 = v1[1];
      if ((v5 & 7) != 0)
      {
        atomic_fetch_add_explicit((v5 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      if ((*v1 & 7) != 0)
      {
        atomic_fetch_add_explicit((*v1 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      _Unwind_Resume(a1);
    }
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialSchema::GetMaterialNetwork(pxrInternal__aapl__pxrReserved__::HdMaterialSchema *this@<X0>, void *a2@<X8>)
{
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
  if (!v4)
  {
    v4 = sub_29ABEE484(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
  }

  v5 = *(v4 + 1);
  v10 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v10 = v6;
    }
  }

  sub_29ABC2F3C(this, &v11);
  v8 = v11;
  v7 = v12;
  if (v12)
  {
    atomic_fetch_add_explicit(&v12->__shared_owners_, 1uLL, memory_order_relaxed);
    atomic_fetch_add_explicit(&v7->__shared_owners_, 1uLL, memory_order_relaxed);
    sub_29A014BEC(v7);
    v9 = v12;
    *a2 = v8;
    a2[1] = v7;
    if (v9)
    {
      sub_29A014BEC(v9);
    }
  }

  else
  {
    *a2 = v11;
    a2[1] = 0;
  }

  if ((v10 & 7) != 0)
  {
    atomic_fetch_add_explicit((v10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void pxrInternal__aapl__pxrReserved__::HdMaterialSchema::GetMaterialNetwork(pxrInternal__aapl__pxrReserved__::HdMaterialSchema *this@<X0>, atomic_uint **a2@<X1>, void *a3@<X8>)
{
  v5 = *a2;
  v18 = v5;
  if ((v5 & 7) != 0)
  {
    v6 = (v5 & 0xFFFFFFFFFFFFFFF8);
    if ((atomic_fetch_add_explicit(v6, 2u, memory_order_relaxed) & 1) == 0)
    {
      v18 = v6;
    }
  }

  sub_29ABC2F3C(this, &v19);
  if ((v18 & 7) != 0)
  {
    atomic_fetch_add_explicit((v18 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  v7 = v19;
  if (v19)
  {
    v8 = v20;
    if (v20)
    {
      atomic_fetch_add_explicit(&v20->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v8->__shared_owners_, 1uLL, memory_order_relaxed);
      *a3 = v7;
      a3[1] = v8;
      atomic_fetch_add_explicit(&v8->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v8);
      sub_29A014BEC(v8);
    }

    else
    {
      *a3 = v19;
      a3[1] = 0;
    }
  }

  if (v20)
  {
    sub_29A014BEC(v20);
  }

  if (!v7)
  {
    v9 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
    if (!v9)
    {
      v9 = sub_29ABEE484(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
    }

    v10 = *(v9 + 1);
    v15 = v10;
    if ((v10 & 7) != 0)
    {
      v11 = (v10 & 0xFFFFFFFFFFFFFFF8);
      if ((atomic_fetch_add_explicit(v11, 2u, memory_order_relaxed) & 1) == 0)
      {
        v15 = v11;
      }
    }

    sub_29ABC2F3C(this, &v16);
    v13 = v16;
    v12 = v17;
    if (v17)
    {
      atomic_fetch_add_explicit(&v17->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v12->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v12);
      v14 = v17;
      *a3 = v13;
      a3[1] = v12;
      if (v14)
      {
        sub_29A014BEC(v14);
      }
    }

    else
    {
      *a3 = v16;
      a3[1] = 0;
    }

    if ((v15 & 7) != 0)
    {
      atomic_fetch_add_explicit((v15 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }
}

void sub_29AC4C464(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{
  if ((a9 & 7) != 0)
  {
    atomic_fetch_add_explicit((a9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(a1);
}

void pxrInternal__aapl__pxrReserved__::HdMaterialSchema::GetMaterialNetwork(uint64_t *a1@<X0>, uint64_t **a2@<X1>, void *a3@<X8>)
{
  v5 = *a2;
  v6 = a2[1];
  if (*a2 == v6)
  {
LABEL_11:
    v10 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
    if (!v10)
    {
      v10 = sub_29ABEE484(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
    }

    v11 = *(v10 + 1);
    v17 = v11;
    if ((v11 & 7) != 0)
    {
      v12 = (v11 & 0xFFFFFFFFFFFFFFF8);
      if ((atomic_fetch_add_explicit(v12, 2u, memory_order_relaxed) & 1) == 0)
      {
        v17 = v12;
      }
    }

    sub_29ABC2F3C(a1, &v18);
    v14 = v18;
    v13 = v19;
    if (v19)
    {
      atomic_fetch_add_explicit(&v19->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v13->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v13);
      v15 = v19;
      *a3 = v14;
      a3[1] = v13;
      if (v15)
      {
        sub_29A014BEC(v15);
      }
    }

    else
    {
      *a3 = v18;
      a3[1] = 0;
    }

    if ((v17 & 7) != 0)
    {
      atomic_fetch_add_explicit((v17 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
    }
  }

  else
  {
    while (1)
    {
      v7 = *v5;
      v20 = v7;
      if ((v7 & 7) != 0 && (atomic_fetch_add_explicit((v7 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
      {
        v20 &= 0xFFFFFFFFFFFFFFF8;
      }

      sub_29ABC2F3C(a1, &v21);
      if ((v20 & 7) != 0)
      {
        atomic_fetch_add_explicit((v20 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }

      v9 = v21;
      v8 = v22;
      if (v21)
      {
        break;
      }

      if (v22)
      {
        sub_29A014BEC(v22);
      }

      if (++v5 == v6)
      {
        goto LABEL_11;
      }
    }

    if (v22)
    {
      atomic_fetch_add_explicit(&v22->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v8->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v8->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v8);
      sub_29A014BEC(v8);
      v16 = v22;
      *a3 = v9;
      a3[1] = v8;
      if (v16)
      {
        sub_29A014BEC(v16);
      }
    }

    else
    {
      *a3 = v21;
      a3[1] = 0;
    }
  }
}

void sub_29AC4C634(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9)
{
  if ((a9 & 7) != 0)
  {
    atomic_fetch_add_explicit((a9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(a1);
}

double pxrInternal__aapl__pxrReserved__::HdMaterialSchema::BuildRetained@<D0>(unint64_t a1@<X0>, uint64_t *a2@<X1>, uint64_t *a3@<X2>, _OWORD *a4@<X8>)
{
  pxrInternal__aapl__pxrReserved__::HdRetainedContainerDataSource::New(a1, a2, a3, &v6);
  result = *&v6;
  *a4 = v6;
  return result;
}

void pxrInternal__aapl__pxrReserved__::HdMaterialSchema::GetFromParent(uint64_t *a1@<X0>, void *a2@<X8>)
{
  v3 = *a1;
  if (*a1)
  {
    if (!atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens))
    {
      sub_29ABEE484(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
    }

    (*(*v3 + 24))(&v8, v3);
    sub_29ABC3244(&v8, &v10);
    v6 = v10;
    v5 = v11;
    if (v11)
    {
      atomic_fetch_add_explicit(&v11->__shared_owners_, 1uLL, memory_order_relaxed);
      atomic_fetch_add_explicit(&v5->__shared_owners_, 1uLL, memory_order_relaxed);
      sub_29A014BEC(v5);
      v7 = v11;
      *a2 = v6;
      a2[1] = v5;
      if (v7)
      {
        sub_29A014BEC(v7);
      }
    }

    else
    {
      *a2 = v10;
      a2[1] = 0;
    }

    if (v9)
    {
      sub_29A014BEC(v9);
    }
  }

  else
  {
    v10 = 0;
    v11 = 0;
    *a2 = 0;
    a2[1] = 0;
  }
}

pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens_StaticTokenType *pxrInternal__aapl__pxrReserved__::HdMaterialSchema::GetSchemaToken(pxrInternal__aapl__pxrReserved__::HdMaterialSchema *this)
{
  result = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
  if (!result)
  {
    return sub_29ABEE484(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
  }

  return result;
}

void *pxrInternal__aapl__pxrReserved__::HdMaterialSchema::GetDefaultLocator(pxrInternal__aapl__pxrReserved__::HdMaterialSchema *this)
{
  if ((atomic_load_explicit(&qword_2A174A860, memory_order_acquire) & 1) == 0 && __cxa_guard_acquire(&qword_2A174A860))
  {
    v2 = atomic_load(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
    if (!v2)
    {
      v2 = sub_29ABEE484(&pxrInternal__aapl__pxrReserved__::HdMaterialSchemaTokens);
    }

    pxrInternal__aapl__pxrReserved__::HdDataSourceLocator::HdDataSourceLocator(&unk_2A174A828, v2);
    __cxa_atexit(sub_29ABC33B4, &unk_2A174A828, &dword_299FE7000);
    __cxa_guard_release(&qword_2A174A860);
  }

  return &unk_2A174A828;
}

void pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::HdMergingSceneIndex(pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex *this)
{
  pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::HdSceneIndexBase(this);
  *v1 = &unk_2A207C648;
  v1[14] = &unk_2A207C688;
  v1[15] = 0;
  v1[16] = v1;
  v1[17] = 0;
  v1[18] = 0;
  v1[19] = 0;
}

{
  pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::HdSceneIndexBase(this);
  *v1 = &unk_2A207C648;
  v1[14] = &unk_2A207C688;
  v1[15] = 0;
  v1[16] = v1;
  v1[17] = 0;
  v1[18] = 0;
  v1[19] = 0;
}

pxrInternal__aapl__pxrReserved__::HdSceneIndexBase *pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::AddInputScene(pxrInternal__aapl__pxrReserved__::HdSceneIndexBase *result, void *a2, pxrInternal__aapl__pxrReserved__::SdfPath *a3)
{
  v22[33] = *MEMORY[0x29EDCA608];
  if (*a2)
  {
    v5 = result;
    v22[32] = 0x1000000000;
    if (pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_IsObserved(result))
    {
      pxrInternal__aapl__pxrReserved__::SdfPath::GetPrefixes(a3, &v20);
      v6 = 0;
      v7 = 0;
      while (1)
      {
        v8 = v6;
        v9 = v7 + 1;
        v10 = v20;
        if (v7 + 1 >= (v21 - v20) >> 3)
        {
          break;
        }

        v11 = (v20 + 8 * v7);
        pxrInternal__aapl__pxrReserved__::SdfPath::GetParentPath(v11, &v15);
        (*(*v5 + 24))(&v18, v5, &v15);
        v12 = v18;
        v13 = v19;
        if (v18 != v19)
        {
          do
          {
            if (*v12 == *v11)
            {
              goto LABEL_9;
            }

            ++v12;
          }

          while (v12 != v19);
          v12 = v19;
        }

LABEL_9:
        v17 = &v18;
        sub_29A1E234C(&v17);
        pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v16);
        sub_29A1DE3A4(&v15);
        v6 = v8 + 8;
        v7 = v9;
        if (v12 == v13)
        {
          v10 = v20;
          v14 = (v21 - v20) >> 3;
          goto LABEL_12;
        }
      }

      v14 = (v21 - v20) >> 3;
LABEL_12:
      if (v9 < v14)
      {
        do
        {
          v18 = 0;
          sub_29AC4CE80(v22, (v10 + v8), &v18);
          if ((v18 & 7) != 0)
          {
            atomic_fetch_add_explicit((v18 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
          }

          ++v9;
          v10 = v20;
          v8 += 8;
        }

        while (v9 < (v21 - v20) >> 3);
      }

      v18 = &v20;
      sub_29A1E234C(&v18);
    }

    if (*(v5 + 18) < *(v5 + 19))
    {
      sub_29B2C5FD8(*(v5 + 18), a2);
    }

    sub_29AC4F1E8(v5 + 17, a2);
  }

  return result;
}

void sub_29AC4CD18(_Unwind_Exception *a1, int a2)
{
  if (a2)
  {
    sub_299FEDEEC(a1);
  }

  _Unwind_Resume(a1);
}

uint64_t sub_29AC4CE80(_DWORD *a1, _DWORD *a2, uint64_t *a3)
{
  v6 = a1[64];
  v7 = a1[65];
  if (v6 == v7)
  {
    sub_29AC3D6F0(a1, v6 + (v6 >> 1) + 1);
    v7 = a1[65];
  }

  v8 = a1;
  if (v7 >= 0x11)
  {
    v8 = *a1;
  }

  return sub_29AC3C228(&v8[4 * a1[64]++], a2, a3);
}

_DWORD *sub_29AC4CF04(uint64_t *a1, _DWORD *a2, uint64_t *a3)
{
  sub_29AC3C228(&v7, a2, a3);
  v4 = a1[1];
  add = atomic_fetch_add((v4 + 128), 1uLL);
  sub_29A17282C((v4 + 40 * ((3 * add) & 7) + 384), &v7, add, a1, sub_29AC4EE90);
  if ((v9 & 7) != 0)
  {
    atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v8);
  return sub_29A1DE3A4(&v7);
}

void sub_29AC4CFB8(void **a1, void **a2, uint64_t *a3, uint64_t a4, uint64_t *a5)
{
  v9 = sub_29AC1199C(a3);
  (*(*v9 + 24))(v16);
  v10 = v16[0];
  if (v16[0] != v16[1])
  {
    sub_29A1E21F4(&v14, v16[0]);
    sub_29A1E2240(&v15, v10 + 1);
    (*(*a2 + 2))(v11, a2, &v14);
    v13 = v11[0];
    v11[0] = 0;
    if (v12)
    {
      sub_29A014BEC(v12);
      if ((v11[0] & 7) != 0)
      {
        atomic_fetch_add_explicit((v11[0] & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
      }
    }

    sub_29AC4ED9C(a5, &v14, &v13);
    v11[0] = a1;
    v11[1] = a2;
    v12 = *a3;
    pxrInternal__aapl__pxrReserved__::TfRefPtr<pxrInternal__aapl__pxrReserved__::HdSceneIndexBase>::_AddRef();
  }

  v11[0] = v16;
  sub_29A1E234C(v11);
}

void sub_29AC4D224(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, void **a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, int a15, int a16, char a17)
{
  sub_29A1DCEA8(&a15);
  a9 = &a17;
  sub_29A1E234C(&a9);
  _Unwind_Resume(a1);
}

void sub_29AC4D29C(_DWORD *a1, uint64_t a2, uint64_t *a3, void *a4)
{
  v8 = a1;
  if (a1[65] >= 0x11u)
  {
    v8 = *a1;
  }

  v9 = a1[64];
  v65[0] = 0;
  v65[1] = 0;
  sub_29AC4FD40(v65, a3, a3, a4);
  v64[0] = 0;
  v64[1] = 0;
  sub_29AC4FD40(v64, a4, v10, v11);
  v14 = sub_29AC4FBAC(v65, v64, v12, v13);
  tbb::internal::NFS_Free(v64[0], v15);
  v64[0] = 0;
  tbb::internal::NFS_Free(v65[0], v16);
  v19 = &v8[4 * v9];
  v65[0] = 0;
  v20 = a1[64];
  v21 = v14 + v20;
  v22 = a1[65];
  v23 = v22 + (v22 >> 1);
  if (v23 + 1 > v14 + v20)
  {
    v24 = v23 + 1;
  }

  else
  {
    v24 = v14 + v20;
  }

  if (v19 == a2)
  {
    if (v21 > v22)
    {
      sub_29AC3D6F0(a1, v24);
    }

    v63[0] = 0;
    v63[1] = 0;
    sub_29AC4FD40(v63, a3, v17, v18);
    v62[0] = 0;
    v62[1] = 0;
    sub_29AC4FD40(v62, a4, v28, v29);
    v31 = a1;
    if (a1[65] >= 0x11u)
    {
      v31 = *a1;
    }

    sub_29AC4FC7C(v63, v62, &v31[4 * a1[64]], v30);
    tbb::internal::NFS_Free(v62[0], v32);
    v62[0] = 0;
    tbb::internal::NFS_Free(v63[0], v33);
  }

  else if (v21 <= v22)
  {
    v34 = a1;
    if (v22 >= 0x11)
    {
      v34 = *a1;
    }

    v35 = &v34[4 * v20];
    v36 = (v35 - a2) >> 4;
    if (v36 >= v14)
    {
      v37 = v14;
    }

    else
    {
      v37 = (v35 - a2) >> 4;
    }

    v38 = v35 + 16 * (v14 - v37);
    v39 = a2 + 16 * (v36 - v37);
    sub_29AC3D770(v39, v35, v38);
    sub_29AC3D888(&v66, a2, v39, v38);
    if (v37 >= 1)
    {
      do
      {
        v42 = a3[1];
        sub_29A2258F0(a2, v42);
        sub_29A225948((a2 + 4), (v42 + 4));
        sub_29A166F2C((a2 + 8), (v42 + 8));
        sub_29AC4FB3C(a3);
        a2 += 16;
        --v37;
      }

      while (v37);
    }

    v59[0] = 0;
    v59[1] = 0;
    sub_29AC4FD40(v59, a3, v40, v41);
    v58[0] = 0;
    v58[1] = 0;
    sub_29AC4FD40(v58, a4, v43, v44);
    v46 = a1;
    if (a1[65] >= 0x11u)
    {
      v46 = *a1;
    }

    sub_29AC4FC7C(v59, v58, &v46[4 * a1[64]], v45);
    tbb::internal::NFS_Free(v58[0], v47);
    v58[0] = 0;
    tbb::internal::NFS_Free(v59[0], v48);
  }

  else
  {
    if (v22 > 0x10)
    {
      v49 = a2 - *a1;
      v25 = malloc(16 * v24);
      v26 = v25 + v49;
      v27 = *a1;
    }

    else
    {
      v25 = malloc(16 * v24);
      v26 = v25 + a2 - a1;
      v27 = a1;
    }

    sub_29AC3D770(v27, a2, v25);
    v61[0] = 0;
    v61[1] = 0;
    sub_29AC4FD40(v61, a3, v50, v51);
    v60[0] = 0;
    v60[1] = 0;
    sub_29AC4FD40(v60, a4, v52, v53);
    sub_29AC4FC7C(v61, v60, v26, v54);
    tbb::internal::NFS_Free(v60[0], v55);
    v60[0] = 0;
    tbb::internal::NFS_Free(v61[0], v56);
    v61[0] = 0;
    v57 = a1;
    if (a1[65] >= 0x11u)
    {
      v57 = *a1;
    }

    sub_29AC3D770(a2, &v57[4 * a1[64]], v26 + 16 * v14);
    sub_29AC26424(a1);
    if (a1[65] >= 0x11u)
    {
      free(*a1);
    }

    *a1 = v25;
    a1[65] = v24;
  }

  a1[64] += v14;
}

void sub_29AC4D5E0(_Unwind_Exception *a1, void *a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, tbb::internal *a10, uint64_t a11, tbb::internal *a12, uint64_t a13, tbb::internal *a14, uint64_t a15, tbb::internal *a16, uint64_t a17, tbb::internal *a18, uint64_t a19, tbb::internal *a20, uint64_t a21, tbb::internal *a22)
{
  tbb::internal::NFS_Free(a14, a2);
  tbb::internal::NFS_Free(a16, v23);
  _Unwind_Resume(a1);
}

void pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::RemoveInputScene(uint64_t *a1, uint64_t *a2)
{
  v32 = *MEMORY[0x29EDCA608];
  v6 = a1[17];
  v4 = a1[18];
  v5 = (a1 + 17);
  if (v6 != v4)
  {
    while (*a2 != *v6)
    {
      v6 += 16;
      if (v6 == v4)
      {
        return;
      }
    }
  }

  if (v6 != v4)
  {
    sub_29A1E21F4(&v27, (v6 + 8));
    sub_29A1E2240(&v27 + 1, (v6 + 12));
    v23 = 0;
    v24 = 0;
    v25 = 0;
    sub_29A65B758(&v23, &v27, v28, 1uLL);
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v27 + 1);
    sub_29A1DE3A4(&v27);
    v7 = sub_29AC1199C(a2);
    sub_29AC4F4D4(&v27, (a1 + 14));
    pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::RemoveObserver(v7, &v27);
    sub_29B293818(&v27);
    sub_29AC4FED8(v30, (v6 + 16), a1[18], v6);
    v9 = a1[18];
    if (v9 != v8)
    {
      sub_29AC4F118(v5, v9 - 16);
    }

    a1[18] = v8;
    if (pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_IsObserved(a1))
    {
      v31 = 0x1000000000;
      v29 = 0x1000000000;
      v10 = v24;
      if (v23 != v24)
      {
        do
        {
          sub_29A1E21F4(&v21, (v10 - 8));
          sub_29A1E2240(&v22, (v10 - 4));
          v11 = v24 - 8;
          sub_29A1E230C(&v23, (v24 - 8));
          v24 = v11;
          (*(*a1 + 16))(v19, a1, &v21);
          if (!v19[1] && ((*(*a1 + 24))(&v17, a1, &v21), v12 = v17, v13 = v18, v26 = &v17, sub_29A1E234C(&v26), v12 == v13))
          {
            sub_29AC4DAF8(v30, &v21);
          }

          else
          {
            sub_29AC4CE80(&v27, &v21, v19);
            v14 = sub_29AC1199C(a2);
            (*(*v14 + 24))(&v17);
            v15 = v17;
            v16 = v18;
            while (v15 != v16)
            {
              sub_29A1E28B4(&v23, v15);
              v15 += 2;
            }

            v26 = &v17;
            sub_29A1E234C(&v26);
          }

          if (v20)
          {
            sub_29A014BEC(v20);
          }

          if ((v19[0] & 7) != 0)
          {
            atomic_fetch_add_explicit((v19[0] & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
          }

          pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v22);
          sub_29A1DE3A4(&v21);
          v10 = v24;
        }

        while (v23 != v24);
        if (v31)
        {
          pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsRemoved(a1, v30);
        }
      }

      if (v29)
      {
        pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsAdded(a1, &v27);
      }

      sub_29AC263E4(&v27);
      sub_29AC26348(v30);
    }

    v27 = &v23;
    sub_29A1E234C(&v27);
  }
}

void sub_29AC4D9F0(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, uint64_t a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14, uint64_t a15, char a16, uint64_t a17, uint64_t a18, uint64_t a19, char *a20)
{
  sub_29AC263E4(&a20);
  sub_29AC26348((v20 - 208));
  a20 = &a16;
  sub_29A1E234C(&a20);
  _Unwind_Resume(a1);
}

_DWORD *sub_29AC4DAF8(_DWORD *a1, _DWORD *a2)
{
  v5 = a1[32];
  v4 = a1[33];
  if (v5 == v4)
  {
    sub_29AC3D990(a1, v5 + (v5 >> 1) + 1);
    v4 = a1[33];
  }

  v6 = a1;
  if (v4 >= 0x11)
  {
    v6 = *a1;
  }

  v7 = sub_29A1E21F4(&v6[2 * a1[32]], a2);
  result = sub_29A1E2240(v7 + 1, a2 + 1);
  ++a1[32];
  return result;
}

void *pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::GetInputScenes@<X0>(pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex *this@<X0>, void *a2@<X8>)
{
  *a2 = 0;
  a2[1] = 0;
  a2[2] = 0;
  result = sub_29AC4DC00(a2, (*(this + 18) - *(this + 17)) >> 4);
  v5 = *(this + 17);
  if (v5 != *(this + 18))
  {
    sub_29AC4DCBC(a2, v5);
  }

  return result;
}

void sub_29AC4DBE4(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29AC262C4(va);
  _Unwind_Resume(a1);
}

void *sub_29AC4DC00(void *result, unint64_t a2)
{
  if (a2 > (result[2] - *result) >> 3)
  {
    if (a2 >> 61)
    {
      sub_29A00C9A4();
    }

    v2 = result;
    v3 = result[1] - *result;
    v16 = result;
    v4 = sub_29A00C9BC(result, a2);
    v5 = &v4[v3];
    v12 = v4;
    v13 = &v4[v3];
    v7 = &v4[8 * v6];
    v14 = &v4[v3];
    v15 = v7;
    v8 = *(v2 + 8);
    v9 = &v4[v3 + *v2 - v8];
    sub_29AC4FF2C(v2, *v2, v8, v9);
    v10 = *v2;
    *v2 = v9;
    *(v2 + 8) = v5;
    v11 = *(v2 + 16);
    *(v2 + 16) = v7;
    v14 = v10;
    v15 = v11;
    v12 = v10;
    v13 = v10;
    return sub_29AC4FFD4(&v12);
  }

  return result;
}

void sub_29AC4DCA8(_Unwind_Exception *a1, uint64_t a2, ...)
{
  va_start(va, a2);
  sub_29AC4FFD4(va);
  _Unwind_Resume(a1);
}

void sub_29AC4DCBC(void *a1, void *a2)
{
  v2 = a1[1];
  if (v2 < a1[2])
  {
    *v2 = *a2;
    pxrInternal__aapl__pxrReserved__::TfRefPtr<pxrInternal__aapl__pxrReserved__::HdSceneIndexBase>::_AddRef();
  }

  sub_29AC50024(a1, a2);
}

void pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::GetPrim(pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex *this@<X0>, const pxrInternal__aapl__pxrReserved__::SdfPath *a2@<X1>, void *a3@<X8>)
{
  v25 = *MEMORY[0x29EDCA608];
  v21 = 0;
  v22 = 0uLL;
  v5 = *(this + 17);
  v6 = *(this + 18);
  v7 = (v6 - v5) >> 4;
  if (v7 == 1)
  {
    v8 = sub_29AC1199C(*(this + 17));
    (*(*v8 + 16))(v8, a2);
    goto LABEL_31;
  }

  if (!v7)
  {
    *a3 = 0;
    a3[1] = 0;
    a3[2] = 0;
    v22 = 0uLL;
    goto LABEL_31;
  }

  v24 = 0x800000000;
  if (v5 != v6)
  {
    do
    {
      if (pxrInternal__aapl__pxrReserved__::SdfPath::HasPrefix(a2, (v5 + 1)))
      {
        v9 = sub_29AC1199C(v5);
        (*(*v9 + 16))(&v19);
        if (!v21 && v19)
        {
          sub_29A166F2C(&v21, &v19);
        }

        if (*(&v19 + 1))
        {
          sub_29AC50178(v23, (&v19 + 8));
        }

        if (v20)
        {
          sub_29A014BEC(v20);
        }

        if ((v19 & 7) != 0)
        {
          atomic_fetch_add_explicit((v19 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
        }
      }

      v5 += 2;
    }

    while (v5 != v6);
    if (v24)
    {
      if (v24 == 1)
      {
        v10 = v23;
        if (HIDWORD(v24) >= 9)
        {
          v10 = v23[0];
        }

        v12 = *v10;
        v11 = v10[1];
        if (v11)
        {
          atomic_fetch_add_explicit((v11 + 8), 1uLL, memory_order_relaxed);
        }

        v13 = *(&v22 + 1);
        *&v22 = v12;
        *(&v22 + 1) = v11;
        if (!v13)
        {
          goto LABEL_30;
        }
      }

      else
      {
        v18 = v24;
        v14 = v23;
        if (HIDWORD(v24) >= 9)
        {
          v14 = v23[0];
        }

        v17 = v14;
        sub_29AC4DFFC(&v18, &v17, &v19);
        v15 = v19;
        v19 = 0uLL;
        v16 = *(&v22 + 1);
        v22 = v15;
        if (!v16)
        {
          goto LABEL_30;
        }

        sub_29A014BEC(v16);
        v13 = *(&v19 + 1);
        if (!*(&v19 + 1))
        {
          goto LABEL_30;
        }
      }

      sub_29A014BEC(v13);
    }
  }

LABEL_30:
  *a3 = v21;
  *(a3 + 1) = v22;
  v21 = 0;
  v22 = 0uLL;
  sub_29AC50138(v23);
LABEL_31:
  if (*(&v22 + 1))
  {
    sub_29A014BEC(*(&v22 + 1));
  }

  if ((v21 & 7) != 0)
  {
    atomic_fetch_add_explicit((v21 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }
}

void sub_29AC4DF88(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, std::__shared_weak_count *a9, ...)
{
  va_start(va, a9);
  sub_29AC50138(va);
  if (a9)
  {
    sub_29A014BEC(a9);
  }

  if ((a7 & 7) != 0)
  {
    atomic_fetch_add_explicit((a7 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  _Unwind_Resume(a1);
}

void *sub_29AC4DFFC@<X0>(void *a1@<X0>, void *a2@<X1>, void *a3@<X8>)
{
  v6 = operator new(0x90uLL);
  pxrInternal__aapl__pxrReserved__::HdOverlayContainerDataSource::HdOverlayContainerDataSource(v6, *a1, *a2);

  return sub_29ABDE960(a3, v6);
}

void pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::GetChildPrimPaths(pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex *this@<X0>, const pxrInternal__aapl__pxrReserved__::SdfPath *a2@<X1>, void *a3@<X8>)
{
  v4 = 0uLL;
  v17 = 0u;
  v18 = 0u;
  v5 = *(this + 17);
  v6 = *(this + 18);
  if (v5 != v6)
  {
    while (!pxrInternal__aapl__pxrReserved__::SdfPath::HasPrefix(a2, (v5 + 1)))
    {
      if (pxrInternal__aapl__pxrReserved__::SdfPath::HasPrefix((v5 + 1), a2))
      {
        v14 = 0;
        v15 = 0;
        v16 = 0;
        pxrInternal__aapl__pxrReserved__::SdfPath::GetPrefixes((v5 + 1), &v14);
        PathElementCount = pxrInternal__aapl__pxrReserved__::SdfPath::GetPathElementCount(a2);
        sub_29AC4E208(&v17, &v14[PathElementCount]);
LABEL_8:
        v19 = &v14;
        sub_29A1E234C(&v19);
      }

      v5 += 2;
      if (v5 == v6)
      {
        v4 = v17;
        goto LABEL_11;
      }
    }

    v8 = sub_29AC1199C(v5);
    (*(*v8 + 24))(&v14);
    v9 = v14;
    v10 = v15;
    while (v9 != v10)
    {
      sub_29AC4E208(&v17, v9);
      v9 += 2;
    }

    goto LABEL_8;
  }

LABEL_11:
  *a3 = 0;
  a3[1] = 0;
  a3[2] = 0;
  sub_29A661EA4(a3, v4, *(&v4 + 1), (*(&v4 + 1) - v4) >> 3);
  v12 = *(&v18 + 1);
  *(&v18 + 1) = 0;
  if (v12)
  {
    v13 = sub_29A1DE590(v12);
    operator delete(v13);
  }

  v14 = &v17;
  sub_29A1E234C(&v14);
}

void sub_29AC4E1CC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, ...)
{
  va_start(va, a5);
  sub_29A377C38(va);
  _Unwind_Resume(a1);
}

uint64_t sub_29AC4E208(uint64_t *a1, unsigned int *a2)
{
  v4 = a1[3];
  if (v4)
  {
    v5 = (a1[1] - *a1) >> 3;
    sub_29A1E21F4(&v9, a2);
    sub_29A1E2240(&v10, a2 + 1);
    v11 = v5;
    v12 = v9;
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPrimTag,24u,8u,16384u>::Handle::operator=(&v9);
    v13 = v10;
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator=(&v10);
    v14 = v11;
    v6 = sub_29A2F49C0(v4, &v12, &v12);
    LOBYTE(v5) = v7;
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v13);
    sub_29A1DE3A4(&v12);
    pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v10);
    sub_29A1DE3A4(&v9);
    if ((v5 & 1) == 0)
    {
      return *a1 + 8 * v6[3];
    }
  }

  else
  {
    result = sub_29A377CFC(a1, a2);
    if (a1[1] != result)
    {
      return result;
    }
  }

  sub_29A1E28B4(a1, a2);
  sub_29AC5028C(a1);
  return a1[1] - 8;
}

void sub_29AC4E344(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, int a9, uint64_t a10, int a11)
{
  sub_29A377C7C(&a11);
  sub_29A377CBC(&a9);
  _Unwind_Resume(a1);
}

uint64_t *pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::_PrimsAdded(pxrInternal__aapl__pxrReserved__::HdSceneIndexBase *a1, uint64_t a2, void **a3)
{
  v25 = *MEMORY[0x29EDCA608];
  result = pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_IsObserved(a1);
  if (result)
  {
    if (*(a1 + 18) - *(a1 + 17) > 0x10uLL)
    {
      v24 = 0x1000000000;
      if (*(a3 + 65) >= 0x11u)
      {
        v7 = *a3;
      }

      else
      {
        v7 = a3;
      }

      v8 = *(a3 + 64);
      if (v8)
      {
        v9 = (v7 + 16 * v8);
        do
        {
          v22 = 0;
          v10 = *(a1 + 17);
          v11 = *(a1 + 18);
          if (v10 == v11)
          {
            v15 = 0;
          }

          else
          {
            while (1)
            {
              if (pxrInternal__aapl__pxrReserved__::SdfPath::HasPrefix(v7, (v10 + 1)))
              {
                if (*v10 == a2)
                {
                  v13 = *(v7 + 1);
                  v21 = v13;
                  if ((v13 & 7) != 0)
                  {
                    add_explicit = atomic_fetch_add_explicit((v13 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed);
                    v13 = v21;
                    if ((add_explicit & 1) == 0)
                    {
                      v13 = v21 & 0xFFFFFFFFFFFFFFF8;
                      v21 &= 0xFFFFFFFFFFFFFFF8;
                    }
                  }
                }

                else
                {
                  v12 = sub_29AC1199C(v10);
                  (*(*v12 + 16))(&v19);
                  v21 = v19;
                  if ((v19 & 7) != 0 && (atomic_fetch_add_explicit((v19 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
                  {
                    v21 &= 0xFFFFFFFFFFFFFFF8;
                  }

                  if (v20)
                  {
                    sub_29A014BEC(v20);
                  }

                  if ((v19 & 7) != 0)
                  {
                    atomic_fetch_add_explicit((v19 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
                  }

                  v13 = v21;
                }

                if (v13)
                {
                  break;
                }
              }

              v10 += 2;
              if (v10 == v11)
              {
                goto LABEL_31;
              }
            }

            sub_29A166F2C(&v22, &v21);
            if ((v21 & 7) != 0)
            {
              atomic_fetch_add_explicit((v21 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
            }

LABEL_31:
            v15 = v22;
          }

          if ((v15 ^ *(v7 + 1)) < 8)
          {
            if (v24)
            {
              sub_29AC50374(v23, v7);
            }
          }

          else
          {
            if (!v24)
            {
              v16 = *(a3 + 64);
              if (HIDWORD(v24) < v16)
              {
                sub_29AC3D6F0(v23, v16);
                v16 = *(a3 + 64);
              }

              if (*(a3 + 65) >= 0x11u)
              {
                v17 = *a3;
              }

              else
              {
                v17 = a3;
              }

              if (v16 && v17 != v7)
              {
                v18 = 16 * v16 - 16;
                do
                {
                  sub_29AC50374(v23, v17);
                  if (!v18)
                  {
                    break;
                  }

                  v17 += 16;
                  v18 -= 16;
                }

                while (v17 != v7);
              }
            }

            sub_29AC4CE80(v23, v7, &v22);
          }

          if ((v22 & 7) != 0)
          {
            atomic_fetch_add_explicit((v22 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
          }

          v7 = (v7 + 16);
        }

        while (v7 != v9);
        if (v24)
        {
          a3 = v23;
        }
      }

      pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsAdded(a1, a3);
      return sub_29AC263E4(v23);
    }

    else
    {

      return pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsAdded(a1, a3);
    }
  }

  return result;
}

void sub_29AC4E67C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, ...)
{
  va_start(va, a7);
  sub_29AC263E4(va);
  _Unwind_Resume(a1);
}

uint64_t *pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::_PrimsRemoved(pxrInternal__aapl__pxrReserved__::HdSceneIndexBase *a1, uint64_t a2, uint64_t a3)
{
  v16[33] = *MEMORY[0x29EDCA608];
  result = pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_IsObserved(a1);
  if (result)
  {
    if (*(a1 + 18) - *(a1 + 17) > 0x10uLL)
    {
      v16[32] = 0x1000000000;
      v6 = *(a3 + 128);
      if (*(a3 + 132) >= 0x11u)
      {
        v7 = *a3;
      }

      else
      {
        v7 = a3;
      }

      if (v6)
      {
        v8 = &v7[2 * v6];
        do
        {
          (*(*a1 + 24))(&v14, a1, v7);
          (*(*a1 + 16))(v12, a1, v7);
          if (v14 != v15 || v12[1] != 0 || v12[0] != 0)
          {
            sub_29AC4CE80(v16, v7, v12);
            if (v14 != v15)
            {
              v11[10] = a1;
              pxrInternal__aapl__pxrReserved__::TfRefPtr<pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex>::_AddRef();
            }
          }

          if (v13)
          {
            sub_29A014BEC(v13);
          }

          if ((v12[0] & 7) != 0)
          {
            atomic_fetch_add_explicit((v12[0] & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
          }

          v11[0] = &v14;
          sub_29A1E234C(v11);
          v7 += 2;
        }

        while (v7 != v8);
      }

      pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsRemoved(a1, a3);
      pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsAdded(a1, v16);
      return sub_29AC263E4(v16);
    }

    else
    {

      return pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsRemoved(a1, a3);
    }
  }

  return result;
}

uint64_t *pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::_PrimsDirtied(pxrInternal__aapl__pxrReserved__::HdSceneIndexBase *a1, uint64_t a2, uint64_t a3)
{
  result = pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_IsObserved(a1);
  if (result)
  {

    return pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsDirtied(a1, a3);
  }

  return result;
}

uint64_t *pxrInternal__aapl__pxrReserved__::HdMergingSceneIndex::_Observer::PrimsDirtied(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v4 = *(a1 + 16);
  result = pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_IsObserved(v4);
  if (result)
  {

    return pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::_SendPrimsDirtied(v4, a3);
  }

  return result;
}

void sub_29AC4ECA0(pxrInternal__aapl__pxrReserved__::HdSceneIndexObserver *a1, const void *a2)
{
  pxrInternal__aapl__pxrReserved__::HdSceneIndexObserver::~HdSceneIndexObserver(a1, a2);

  operator delete(v2);
}

void sub_29AC4ECC8(void **a1)
{
  *a1 = &unk_2A207C648;
  v2 = (a1 + 14);
  v4 = a1 + 17;
  sub_29AC4F090(&v4);
  pxrInternal__aapl__pxrReserved__::HdSceneIndexObserver::~HdSceneIndexObserver(v2, v3);
  pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::~HdSceneIndexBase(a1);
}

void sub_29AC4ED30(void **a1)
{
  *a1 = &unk_2A207C648;
  v2 = (a1 + 14);
  v5 = a1 + 17;
  sub_29AC4F090(&v5);
  pxrInternal__aapl__pxrReserved__::HdSceneIndexObserver::~HdSceneIndexObserver(v2, v3);
  pxrInternal__aapl__pxrReserved__::HdSceneIndexBase::~HdSceneIndexBase(a1);
  operator delete(v4);
}

_DWORD *sub_29AC4ED9C(uint64_t *a1, _DWORD *a2, uint64_t *a3)
{
  sub_29AC3C228(&v7, a2, a3);
  v4 = a1[1];
  add = atomic_fetch_add((v4 + 128), 1uLL);
  sub_29A17282C((v4 + 40 * ((3 * add) & 7) + 384), &v7, add, a1, sub_29AC4EE90);
  if ((v9 & 7) != 0)
  {
    atomic_fetch_add_explicit((v9 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v8);
  return sub_29A1DE3A4(&v7);
}

void sub_29AC4EE50(uint64_t a1)
{
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 28));
  sub_29A1DE3A4((a1 + 24));
  sub_29ABD4DDC();
}

_DWORD *sub_29AC4EE90(uint64_t a1, uint64_t a2)
{
  v4 = sub_29A1DDD84(a1, a2);
  result = sub_29A1DDDC0(v4 + 1, (a2 + 4));
  *(a1 + 8) = *(a2 + 8);
  *(a2 + 8) = 0;
  return result;
}

void sub_29AC4EED0(uint64_t a1)
{
  *a1 = &unk_2A207C6F8;
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 36));
  sub_29A1DE3A4((a1 + 32));
  sub_29ABD4DDC();
}

void sub_29AC4EF28(uint64_t a1)
{
  *a1 = &unk_2A207C6F8;
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 36));
  sub_29A1DE3A4((a1 + 32));
  sub_29ABD4DDC();
}

uint64_t sub_29AC4EF90(uint64_t a1)
{
  pxrInternal__aapl__pxrReserved__::TfErrorMark::TfErrorMark(&v8);
  v2 = *(a1 + 8);
  v3 = *(a1 + 16);
  sub_29A1E21F4(&v9, (a1 + 32));
  sub_29A1E2240(&v10, (a1 + 36));
  sub_29AC4CFB8(v2, v3, (a1 + 24), &v9, *(a1 + 40));
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v10);
  sub_29A1DE3A4(&v9);
  v4 = atomic_load(&pxrInternal__aapl__pxrReserved__::TfSingleton<pxrInternal__aapl__pxrReserved__::TfDiagnosticMgr>::_instance);
  if (!v4)
  {
    pxrInternal__aapl__pxrReserved__::TfSingleton<pxrInternal__aapl__pxrReserved__::TfDiagnosticMgr>::_CreateInstance();
  }

  v5 = v8;
  v6 = atomic_load((v4 + 144));
  if (v5 < v6 && !pxrInternal__aapl__pxrReserved__::TfErrorMark::_IsCleanImpl(&v8, v4))
  {
    pxrInternal__aapl__pxrReserved__::WorkDispatcher::_TransportErrors(&v8, *(a1 + 48));
  }

  pxrInternal__aapl__pxrReserved__::TfErrorMark::~TfErrorMark(&v8);
  return 0;
}

void sub_29AC4F06C(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, uint64_t a9, int a10)
{
  sub_29A1DCEA8(&a10);
  pxrInternal__aapl__pxrReserved__::TfErrorMark::~TfErrorMark(&a9);
  _Unwind_Resume(a1);
}

void sub_29AC4F090(void ***a1)
{
  v1 = *a1;
  v2 = **a1;
  if (v2)
  {
    v3 = v1[1];
    v4 = **a1;
    if (v3 != v2)
    {
      sub_29AC4F118(v1, v3 - 16);
    }

    v1[1] = v2;

    operator delete(v4);
  }
}

void sub_29AC4F118(uint64_t a1, uint64_t a2)
{
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a2 + 12));
  sub_29A1DE3A4((a2 + 8));

  sub_29ABD4DDC();
}

_DWORD *sub_29AC4F190(uint64_t a1)
{
  v2 = *(a1 + 8);
  if ((v2 & 7) != 0)
  {
    atomic_fetch_add_explicit((v2 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL((a1 + 4));

  return sub_29A1DE3A4(a1);
}

void sub_29AC4F1E8(void *a1, void *a2)
{
  v2 = (a1[1] - *a1) >> 4;
  v3 = v2 + 1;
  if (!((v2 + 1) >> 60))
  {
    v5 = a1[2] - *a1;
    if (v5 >> 3 > v3)
    {
      v3 = v5 >> 3;
    }

    if (v5 >= 0x7FFFFFFFFFFFFFF0)
    {
      v6 = 0xFFFFFFFFFFFFFFFLL;
    }

    else
    {
      v6 = v3;
    }

    v12 = a1;
    if (v6)
    {
      v7 = sub_29A017BD4(a1, v6);
    }

    else
    {
      v7 = 0;
    }

    v8 = v7;
    v9 = &v7[16 * v2];
    v10 = v9;
    v11 = &v7[16 * v6];
    sub_29B2C5FD8(v9, a2);
  }

  sub_29A00C9A4();
}

void sub_29AC4F2EC(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  sub_29AC4F458(va);
  _Unwind_Resume(a1);
}

uint64_t sub_29AC4F300(uint64_t a1, void *a2, void *a3, void *a4)
{
  v7 = a4;
  v8 = a4;
  v5[0] = a1;
  v5[1] = &v7;
  v5[2] = &v8;
  v6 = 0;
  if (a2 != a3)
  {
    sub_29B2C6030(a1, a4, a2);
  }

  v6 = 1;
  return sub_29AC4F3CC(v5);
}

uint64_t sub_29AC4F3CC(uint64_t a1)
{
  if ((*(a1 + 24) & 1) == 0)
  {
    sub_29AC4F404(a1);
  }

  return a1;
}

uint64_t sub_29AC4F404(uint64_t result)
{
  v1 = *(result + 16);
  if (*v1 != **(result + 8))
  {
    sub_29AC4F118(*result, *v1 - 16);
  }

  return result;
}

void **sub_29AC4F458(void **a1)
{
  sub_29AC4F48C(a1);
  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

void *sub_29AC4F48C(void *result)
{
  v1 = result[2];
  if (v1 != result[1])
  {
    v2 = result;
    v3 = result[4];
    v2[2] = v1 - 16;
    sub_29AC4F118(v3, v1 - 16);
  }

  return result;
}

void *sub_29AC4F4D4(void *a1, uint64_t a2)
{
  *a1 = a2;
  a1[1] = 0;
  if (a2)
  {
    sub_29A0ECFD4((a2 + 8), &v5);
    v3 = a1[1];
    a1[1] = v5;
    v5 = 0;
    if (v3)
    {
      sub_29B28D0B0(v3, &v5);
    }
  }

  return a1;
}

void sub_29AC4F530(_Unwind_Exception *exception_object)
{
  v3 = *(v1 + 8);
  if (v3)
  {
    sub_29B28FFF4(v3);
  }

  _Unwind_Resume(exception_object);
}

void sub_29AC4F548(void *a1)
{
  v1 = sub_29AC4F618(a1);

  operator delete(v1);
}

uint64_t sub_29AC4F5D0(int a1, tbb::internal *this, uint64_t a3, void *a4)
{
  v4 = tbb::internal::NFS_Allocate(this, 1, 0, a4);
  if (!v4)
  {
    tbb::internal::throw_exception_v4(1);
  }

  return v4;
}

uint64_t sub_29AC4F618(void *a1)
{
  *a1 = &unk_2A207C740;
  sub_29AC4F678(a1);
  sub_29A171EEC(a1);

  return sub_29AC4F748(a1, v2);
}

_DWORD *sub_29AC4F678(uint64_t a1)
{
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPrimTag,24u,8u,16384u>::Handle::Handle(&v8);
  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::Handle(&v9);
  v10 = 0;
  while (1)
  {
    v2 = *(a1 + 8);
    v3 = v2[16];
    __dmb(0xBu);
    v4 = *v2;
    __dmb(0xBu);
    v5 = v2[16];
    __dmb(0xBu);
    if (v3 == v5)
    {
      v6 = v2[34];
      __dmb(0xBu);
      if (v3 == v6 + v4)
      {
        break;
      }
    }

    sub_29AC4F794(a1, &v8);
  }

  if ((v10 & 7) != 0)
  {
    atomic_fetch_add_explicit((v10 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(&v9);
  return sub_29A1DE3A4(&v8);
}

uint64_t sub_29AC4F748(uint64_t a1, void *a2)
{
  *a1 = &unk_2A207C7B0;
  tbb::internal::NFS_Free(*(a1 + 8), a2);
  return a1;
}

BOOL sub_29AC4F794(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 8);
  while (1)
  {
    v5 = *v4;
    __dmb(0xBu);
    v6 = v4[16];
    __dmb(0xBu);
    v7 = v6 - v5;
    v8 = v7 > 0;
LABEL_3:
    if (v7 < 1)
    {
      return 0;
    }

    while (1)
    {
      v9 = v5;
      atomic_compare_exchange_strong(v4, &v9, v5 + 1);
      if (v9 == v5)
      {
        break;
      }

      add_explicit = atomic_fetch_add_explicit(v4, 0, memory_order_relaxed);
      if (add_explicit != v5)
      {
        v11 = v4[16];
        __dmb(0xBu);
        v7 = v11 - add_explicit;
        v5 = add_explicit;
        goto LABEL_3;
      }
    }

    if (sub_29AC4F854(&v4[5 * ((3 * v5) & 7) + 48], a2, v5, a1))
    {
      return v8;
    }
  }
}

uint64_t sub_29AC4F854(uint64_t *a1, uint64_t a2, unint64_t a3, uint64_t a4)
{
  v8 = a3 & 0xFFFFFFFFFFFFFFF8;
  v9 = a1[1];
  __dmb(0xBu);
  if (v9 != (a3 & 0xFFFFFFFFFFFFFFF8))
  {
    while (1)
    {
      v12 = a1[1];
      __dmb(0xBu);
      if (v12 == v8)
      {
        break;
      }

      sched_yield();
    }
  }

  v10 = a1[3];
  __dmb(0xBu);
  if (v10 == v8)
  {
    while (1)
    {
      v11 = a1[3];
      __dmb(0xBu);
      if (v11 != v8)
      {
        break;
      }

      sched_yield();
    }
  }

  v13 = *a1;
  __dmb(0xBu);
  v14 = *(a4 + 8);
  v15 = *(v14 + 256) - 1;
  v16 = v15 & (a3 >> 3);
  if (v16 == v15)
  {
    v17 = v13;
  }

  else
  {
    v17 = 0;
  }

  v19[0] = v8 + 8;
  v19[1] = a1;
  v19[2] = v17;
  v19[3] = a4;
  if ((*(v13 + 8) & (1 << v16)) != 0)
  {
    sub_29AC4F970(a1, a2, v13, v16);
  }

  atomic_fetch_add((v14 + 272), 0xFFFFFFFFFFFFFFFFLL);
  sub_29A172748(v19);
  return 0;
}

uint64_t sub_29AC4F9F8(uint64_t a1)
{
  v2 = *a1;
  v3 = *(*a1 + 8);
  if ((v3 & 7) != 0)
  {
    atomic_fetch_add_explicit((v3 & 0xFFFFFFFFFFFFFFF8), 0xFFFFFFFE, memory_order_release);
  }

  pxrInternal__aapl__pxrReserved__::Sdf_Pool<pxrInternal__aapl__pxrReserved__::Sdf_PathPropTag,24u,8u,16384u>::Handle::operator BOOL(v2 + 1);
  sub_29A1DE3A4(v2);
  return a1;
}

uint64_t *sub_29AC4FA4C(uint64_t *a1, uint64_t a2, uint64_t a3, void *a4)
{
  v6 = tbb::internal::NFS_Allocate(1uLL, 80, 0, a4);
  *a1 = v6;
  v7 = **(a2 + 8);
  __dmb(0xBu);
  *v6 = v7;
  v6[1] = a2;
  v8 = v6 + 2;
  for (i = 384; i != 704; i += 40)
  {
    v10 = *(*(a2 + 8) + i);
    __dmb(0xBu);
    *v8++ = v10;
  }

  if ((sub_29AC4FAD8(*a1, a1 + 1, **a1) & 1) == 0)
  {
    sub_29AC4FB3C(a1);
  }

  return a1;
}

uint64_t sub_29AC4FAD8(uint64_t a1, uint64_t *a2, unint64_t a3)
{
  v3 = *(*(*(a1 + 8) + 8) + 128);
  __dmb(0xBu);
  if (v3 == a3)
  {
    v4 = 0;
    result = 1;
  }

  else
  {
    v6 = *(a1 + 8 * ((3 * a3) & 7) + 16);
    v7 = (*(*(*(a1 + 8) + 8) + 256) - 1) & (a3 >> 3);
    v4 = v6 + 16 * v7 + 16;
    result = (*(v6 + 8) >> v7) & 1;
  }

  *a2 = v4;
  return result;
}

uint64_t sub_29AC4FB3C(uint64_t *a1)
{
  do
  {
    v2 = *a1;
    v3 = **a1;
    if ((-*(*(*(*a1 + 8) + 8) + 256) | (v3 >> 3)) == 0xFFFFFFFFFFFFFFFFLL)
    {
      v4 = &v2[(3 * v3) & 7];
      v4[2] = *v4[2];
      v2 = *a1;
    }

    *v2 = v3 + 1;
    result = sub_29AC4FAD8(v2, a1 + 1, v3 + 1);
  }

  while (!result);
  return result;
}

uint64_t sub_29AC4FBAC(void *a1, void *a2, uint64_t a3, void *a4)
{
  v13 = 0;
  v14 = 0;
  sub_29AC4FD40(&v13, a1, a3, a4);
  v11 = 0;
  v12 = 0;
  sub_29AC4FD40(&v11, a2, v5, v6);
  if (v14 == v12)
  {
    v8 = 0;
  }

  else
  {
    v8 = 0;
    do
    {
      sub_29AC4FB3C(&v13);
      ++v8;
    }

    while (v14 != v12);
  }

  tbb::internal::NFS_Free(v11, v7);
  v11 = 0;
  tbb::internal::NFS_Free(v13, v9);
  return v8;
}

tbb::internal *sub_29AC4FC7C(void *a1, void *a2, uint64_t a3, void *a4)
{
  v15[0] = 0;
  v15[1] = 0;
  sub_29AC4FD40(v15, a1, a3, a4);
  v14[0] = 0;
  v14[1] = 0;
  sub_29AC4FD40(v14, a2, v6, v7);
  sub_29AC4FDC0(v15, v14, a3, v8, v16);
  tbb::internal::NFS_Free(v14[0], v9);
  v14[0] = 0;
  tbb::internal::NFS_Free(v15[0], v10);
  v15[0] = 0;
  v11 = v16[2];
  tbb::internal::NFS_Free(v16[0], v12);
  return v11;
}

void sub_29AC4FD10(_Unwind_Exception *a1, void *a2, int a3, int a4, int a5, int a6, int a7, int a8, uint64_t a9, tbb::internal *a10, uint64_t a11, tbb::internal *a12)
{
  tbb::internal::NFS_Free(a10, a2);
  tbb::internal::NFS_Free(a12, v13);
  _Unwind_Resume(a1);
}

tbb::internal *sub_29AC4FD40(uint64_t a1, void *a2, uint64_t a3, void *a4)
{
  result = *a1;
  v7 = *a2;
  if (result != *a2)
  {
    if (result)
    {
      result = tbb::internal::NFS_Free(result, a2);
      *a1 = 0;
      v7 = *a2;
    }

    if (v7)
    {
      result = tbb::internal::NFS_Allocate(1uLL, 80, 0, a4);
      *a1 = result;
      v8 = *a2;
      *result = **a2;
      v9 = v8[1];
      v10 = v8[2];
      v11 = v8[4];
      *(result + 3) = v8[3];
      *(result + 4) = v11;
      *(result + 1) = v9;
      *(result + 2) = v10;
    }
  }

  *(a1 + 8) = a2[1];
  return result;
}

tbb::internal *sub_29AC4FDC0@<X0>(uint64_t *a1@<X0>, uint64_t a2@<X1>, uint64_t a3@<X2>, void *a4@<X3>, void *a5@<X8>)
{
  v7 = a1[1];
  if (v7 == *(a2 + 8))
  {
    v10 = a3;
  }

  else
  {
    v9 = 0;
    v10 = a3;
    do
    {
      sub_29A1E21F4(v10, v7);
      sub_29A1E2240((v10 + 4), (v7 + 4));
      v11 = *(v7 + 8);
      *(v10 + 8) = v11;
      if ((v11 & 7) != 0 && (atomic_fetch_add_explicit((v11 & 0xFFFFFFFFFFFFFFF8), 2u, memory_order_relaxed) & 1) == 0)
      {
        *(v10 + 8) &= 0xFFFFFFFFFFFFFFF8;
      }

      sub_29AC4FB3C(a1);
      v10 += 16;
      v7 = a1[1];
      v9 -= 16;
    }

    while (v7 != *(a2 + 8));
  }

  *a5 = 0;
  a5[1] = 0;
  result = sub_29AC4FD40(a5, a1, a3, a4);
  a5[2] = v10;
  return result;
}

void sub_29AC4FE9C(void *a1)
{
  __cxa_begin_catch(a1);
  if (v2)
  {
    v3 = -v2;
    do
    {
      sub_29AC4F190(v1);
      v1 += 16;
      v3 -= 16;
    }

    while (v3);
  }

  __cxa_rethrow();
}

void *sub_29AC4FED8(uint64_t a1, void *a2, void *a3, void *a4)
{
  if (a2 != a3)
  {
    sub_29B2C60A0(a4, a2);
  }

  return a2;
}

void sub_29AC4FF2C(uint64_t a1, void *a2, void *a3, void *a4)
{
  if (a2 != a3)
  {
    *a4 = *a2;
    pxrInternal__aapl__pxrReserved__::TfRefPtr<pxrInternal__aapl__pxrReserved__::HdSceneIndexBase>::_AddRef();
  }
}

void sub_29AC4FFB0(_Unwind_Exception *exception_object)
{
  if (v1)
  {
    sub_29ABD4DDC();
  }

  _Unwind_Resume(exception_object);
}

uint64_t sub_29AC4FFD4(uint64_t a1)
{
  v2 = *(a1 + 16);
  if (v2 != *(a1 + 8))
  {
    *(a1 + 16) = v2 - 8;
    sub_29ABD4DDC();
  }

  if (*a1)
  {
    operator delete(*a1);
  }

  return a1;
}

void sub_29AC50024(void *a1, void *a2)
{
  v2 = (a1[1] - *a1) >> 3;
  v3 = v2 + 1;
  if (!((v2 + 1) >> 61))
  {
    v5 = a1[2] - *a1;
    if (v5 >> 2 > v3)
    {
      v3 = v5 >> 2;
    }

    if (v5 >= 0x7FFFFFFFFFFFFFF8)
    {
      v6 = 0x1FFFFFFFFFFFFFFFLL;
    }

    else
    {
      v6 = v3;
    }

    v11 = a1;
    if (v6)
    {
      v7 = sub_29A00C9BC(a1, v6);
    }

    else
    {
      v7 = 0;
    }

    v8 = v7;
    v9 = &v7[8 * v2];
    v10 = &v7[8 * v6];
    *v9 = *a2;
    pxrInternal__aapl__pxrReserved__::TfRefPtr<pxrInternal__aapl__pxrReserved__::HdSceneIndexBase>::_AddRef();
  }

  sub_29A00C9A4();
}

void sub_29AC50124(_Unwind_Exception *a1, uint64_t a2, uint64_t a3, uint64_t a4, ...)
{
  va_start(va, a4);
  sub_29AC4FFD4(va);
  _Unwind_Resume(a1);
}

uint64_t sub_29AC50138(uint64_t a1)
{
  sub_29AC2C750(a1);
  if (*(a1 + 132) >= 9u)
  {
    free(*a1);
  }

  return a1;
}

void sub_29AC50178(uint64_t a1, __int128 *a2)
{
  v5 = *(a1 + 128);
  v4 = *(a1 + 132);
  if (v5 == v4)
  {
    sub_29AC501F8(a1, v5 + (v5 >> 1) + 1);
    v4 = *(a1 + 132);
  }

  v6 = a1;
  if (v4 >= 9)
  {
    v6 = *a1;
  }

  v7 = *(a1 + 128);
  v8 = *a2;
  *(v6 + 16 * v7) = *a2;
  if (*(&v8 + 1))
  {
    atomic_fetch_add_explicit((*(&v8 + 1) + 8), 1uLL, memory_order_relaxed);
    LODWORD(v7) = *(a1 + 128);
  }

  *(a1 + 128) = v7 + 1;
}

void sub_29AC501F8(uint64_t a1, uint64_t a2)
{
  v2 = a2;
  v4 = malloc(16 * a2);
  v5 = v4;
  v6 = a1;
  if (*(a1 + 132) >= 9u)
  {
    v6 = *a1;
  }

  v7 = *(a1 + 128);
  if (v7)
  {
    v8 = 16 * v7;
    v9 = v4;
    do
    {
      *v9++ = *v6;
      *v6 = 0;
      *(v6 + 8) = 0;
      v6 += 16;
      v8 -= 16;
    }

    while (v8);
  }

  sub_29AC2C750(a1);
  if (*(a1 + 132) >= 9u)
  {
    free(*a1);
  }

  *a1 = v5;
  *(a1 + 132) = v2;
}