uint64_t InjectFlushOrPushOutput(uint64_t a1, size_t *a2, void **a3, size_t *a4)
{
  if (*(a1 + 8628) == 1 && (v8 = *(a1 + 2434), *(a1 + 2434)))
  {
    v9 = *(a1 + 2432);
    *(a1 + 2432) = 0;
    *(a1 + 2434) = 0;
    v10 = (6 << v8) | v9;
    v11 = *(a1 + 8584);
    if (v11)
    {
      v12 = (v11 + *(a1 + 8592));
    }

    else
    {
      v12 = (a1 + 8608);
      *(a1 + 8584) = a1 + 8608;
    }

    *v12 = v10;
    if (v8 >= 3)
    {
      v12[1] = HIBYTE(v10);
      if (v8 >= 0xB)
      {
        v12[2] = (6 << v8) >> 16;
      }
    }

    *(a1 + 8592) += (v8 + 13) >> 3;
  }

  else
  {
    v13 = *(a1 + 8592);
    if (!v13 || !*a2)
    {
      return 0;
    }

    if (v13 >= *a2)
    {
      v14 = *a2;
    }

    else
    {
      v14 = *(a1 + 8592);
    }

    memcpy(*a3, *(a1 + 8584), v14);
    *a3 = *a3 + v14;
    *a2 -= v14;
    *(a1 + 8584) += v14;
    *(a1 + 8592) -= v14;
    v15 = *(a1 + 8600) + v14;
    *(a1 + 8600) = v15;
    if (a4)
    {
      *a4 = v15;
    }
  }

  return 1;
}

uint64_t EncodeData(uint64_t a1, unsigned int a2, int a3, unint64_t *a4, char **a5, __n128 a6, int32x4_t a7, double a8, double a9, double a10, int32x4_t a11)
{
  v11 = *(a1 + 2248);
  v12 = *(a1 + 2344);
  v13 = v11 - v12;
  if (v12 >> 30 >= 3)
  {
    v14 = (((2 * v12) >> 1) & 0xC0000000 | v12 & 0x3FFFFFFF) ^ 0x80000000;
  }

  else
  {
    v14 = v12;
  }

  v264 = v14;
  v265 = v11 - v12;
  if (*(a1 + 8632))
  {
    return 0;
  }

  v16 = a4;
  v20 = *(a1 + 2288);
  v21 = *(a1 + 2260);
  if (a2)
  {
    *(a1 + 8632) = 1;
  }

  if (v13 > 1 << *(a1 + 12))
  {
    return 0;
  }

  v23 = *(a1 + 4);
  v260 = v21;
  if (v23 != 1)
  {
    goto LABEL_13;
  }

  if (!*(a1 + 8568))
  {
    *(a1 + 8568) = BrotliAllocate(a1 + 144);
    *(a1 + 8576) = BrotliAllocate(a1 + 144);
    if (*(a1 + 168))
    {
      return 0;
    }

    v23 = *(a1 + 4);
    v16 = a4;
    v21 = v260;
LABEL_13:
    if (v23 <= 1)
    {
      goto LABEL_14;
    }

    v33 = (v13 >> 1) + *(a1 + 2312) + 1;
    if (v33 > *(a1 + 2296))
    {
      v34 = v16;
      v35 = v33 + (v13 >> 2) + 16;
      *(a1 + 2296) = v35;
      if (v35)
      {
        v36 = BrotliAllocate(a1 + 144);
      }

      else
      {
        v36 = 0;
      }

      if (*(a1 + 168))
      {
        return 0;
      }

      v37 = *(a1 + 2304);
      if (v37)
      {
        memcpy(v36, v37, 16 * *(a1 + 2312));
        BrotliFree(a1 + 144, *(a1 + 2304));
      }

      *(a1 + 2304) = v36;
      v16 = v34;
      v21 = v260;
    }

    v259 = (a1 + 2456);
    v38 = v13;
    if (a2)
    {
      v39 = v14 == 0;
    }

    else
    {
      v39 = 0;
    }

    v40 = v39;
    if (*(a1 + 2456))
    {
      if (*(a1 + 2500))
      {
        goto LABEL_192;
      }

LABEL_145:
      v65 = *(a1 + 2480);
      if (v65 <= 34)
      {
        if (v65 <= 4)
        {
          switch(v65)
          {
            case 2:
              v70 = *(a1 + 2512);
              if (v38 <= 0x800 && v40)
              {
                if (!v38)
                {
                  goto LABEL_190;
                }

                v71 = v20;
                v72 = v38;
                do
                {
                  v73 = *v71;
                  v71 = (v71 + 1);
                  *(v70 + (((0xBD1E35A7BD000000 * v73) >> 46) & 0x3FFFC)) = 0;
                  --v72;
                }

                while (v72);
                goto LABEL_189;
              }

              break;
            case 3:
              v70 = *(a1 + 2512);
              if (v38 <= 0x800 && v40)
              {
                if (!v38)
                {
                  goto LABEL_190;
                }

                v74 = v20;
                v75 = v38;
                do
                {
                  v76 = *v74;
                  v74 = (v74 + 1);
                  v77 = (0xBD1E35A7BD000000 * v76) >> 48;
                  v70[v77] = 0;
                  v70[(v77 + 8)] = 0;
                  --v75;
                }

                while (v75);
                goto LABEL_189;
              }

              break;
            case 4:
              v66 = v16;
              PrepareH4(a1 + 2504, v40, v38, v20);
              goto LABEL_188;
            default:
              goto LABEL_189;
          }

          v66 = v16;
          bzero(v70, 0x40000uLL);
          goto LABEL_188;
        }

        switch(v65)
        {
          case 5:
            v66 = v16;
            PrepareH5((a1 + 2504), v40, v38, v20);
            goto LABEL_188;
          case 6:
            v66 = v16;
            PrepareH6((a1 + 2504), v40, v38, v20);
            goto LABEL_188;
          case 10:
            v67 = 0;
            v68 = *(a1 + 2512);
            v69 = (a1 + 2520);
            a6 = vld1q_dup_f32(v69);
            do
            {
              *(v68 + v67) = a6;
              v67 += 16;
            }

            while (v67 != 0x80000);
            break;
        }
      }

      else
      {
        if (v65 > 41)
        {
          if (v65 > 54)
          {
            if (v65 == 55)
            {
              v66 = v16;
              PrepareH55(a1 + 2504, v40, v38, v20);
            }

            else
            {
              if (v65 != 65)
              {
                goto LABEL_189;
              }

              v66 = v16;
              PrepareH65(a1 + 2504, v40, v38, v20);
            }
          }

          else if (v65 == 42)
          {
            v66 = v16;
            PrepareH42((a1 + 2504), v40, v38, v20);
          }

          else
          {
            if (v65 != 54)
            {
              goto LABEL_189;
            }

            v66 = v16;
            PrepareH54(a1 + 2504, v40, v38, v20);
          }

          goto LABEL_188;
        }

        if (v65 == 35)
        {
          v66 = v16;
          PrepareH35(a1 + 2504, v40, v38, v20);
          goto LABEL_188;
        }

        if (v65 == 40 || v65 == 41)
        {
          v66 = v16;
          PrepareH40(a1 + 2504, v40, v38, v20);
LABEL_188:
          v16 = v66;
          v21 = v260;
        }
      }

LABEL_189:
      if (v14)
      {
LABEL_191:
        *(a1 + 2500) = 1;
LABEL_192:
        v258 = v16;
        if (*(a1 + 168))
        {
          goto LABEL_193;
        }

        v89 = *(a1 + 2480);
        if (v89 <= 34)
        {
          if (v89 > 4)
          {
            if (v89 == 5)
            {
              if (v38 >= 3 && v14 >= 3)
              {
                v228 = (506832829 * *(v20 + ((v14 - 3) & v21))) >> *(a1 + 2520);
                v229 = *(a1 + 2544);
                v230 = *(v229 + 2 * v228);
                v231 = *(a1 + 2552);
                *(v231 + 4 * (*(a1 + 2524) & v230) + 4 * (v228 << *(a1 + 2528))) = v14 - 3;
                *(v229 + 2 * v228) = v230 + 1;
                v232 = (506832829 * *(v20 + ((v14 - 2) & v21))) >> *(a1 + 2520);
                v233 = *(v229 + 2 * v232);
                *(v231 + 4 * (*(a1 + 2524) & v233) + 4 * (v232 << *(a1 + 2528))) = v14 - 2;
                *(v229 + 2 * v232) = v233 + 1;
                v234 = (506832829 * *(v20 + ((v14 - 1) & v21))) >> *(a1 + 2520);
                v235 = *(v229 + 2 * v234);
                *(v231 + 4 * (*(a1 + 2524) & v235) + 4 * (v234 << *(a1 + 2528))) = v14 - 1;
                *(v229 + 2 * v234) = v235 + 1;
              }
            }

            else if (v89 == 6)
            {
              if (v38 >= 7 && v14 >= 3)
              {
                v236 = *(a1 + 2560);
                v237 = *(a1 + 2568);
                v238 = *(a1 + 2528);
                v239 = (0x1FE35A7BD3579BD3 * (*(v20 + ((v14 - 3) & v21)) & v238)) >> *(a1 + 2520);
                v240 = *(v236 + 2 * v239);
                v241 = *(a1 + 2536) & v240;
                v242 = v239 << *(a1 + 2540);
                *(v236 + 2 * v239) = v240 + 1;
                *(v237 + 4 * v241 + 4 * v242) = v14 - 3;
                v243 = (0x1FE35A7BD3579BD3 * (*(v20 + ((v14 - 2) & v21)) & v238)) >> *(a1 + 2520);
                v244 = *(v236 + 2 * v243);
                v245 = *(a1 + 2536) & v244;
                v246 = *(a1 + 2540);
                *(v236 + 2 * v243) = v244 + 1;
                *(v237 + 4 * v245 + 4 * (v243 << v246)) = v14 - 2;
                v247 = (0x1FE35A7BD3579BD3 * (*(v20 + ((v14 - 1) & v21)) & v238)) >> *(a1 + 2520);
                LODWORD(v238) = *(v236 + 2 * v247);
                v248 = v247 << *(a1 + 2540);
                v249 = *(a1 + 2536) & v238;
                *(v236 + 2 * v247) = v238 + 1;
                *(v237 + 4 * v249 + 4 * v248) = v14 - 1;
              }
            }

            else if (v89 == 10 && v38 >= 3 && v14 >= 0x80)
            {
              v131 = v14 - 127;
              v132 = v14 - 127 + v38;
              if (v14 < v132)
              {
                v132 = v14;
              }

              v257 = v132;
              if (v131 < v132)
              {
                v133 = *(a1 + 2504);
                v256 = *(a1 + 2512);
                v134 = *(a1 + 2528);
                do
                {
                  v135 = v14 - v131;
                  if (v14 - v131 <= 0xF)
                  {
                    v135 = 15;
                  }

                  v136 = (v20 + (v131 & v21));
                  v137 = (506832829 * *v136) >> 15;
                  v138 = *(v256 + 4 * v137);
                  v139 = 2 * (v133 & v131);
                  v140 = v139 | 1;
                  *(v256 + 4 * v137) = v131;
                  if (v131 != v138)
                  {
                    v142 = 0;
                    v143 = 0;
                    v144 = v133 - v135;
                    v145 = 64;
                    do
                    {
                      if (v131 - v138 > v144 || v145 == 0)
                      {
                        break;
                      }

                      v147 = v138 & v21;
                      if (v143 >= v142)
                      {
                        v148 = v142;
                      }

                      else
                      {
                        v148 = v143;
                      }

                      v149 = v136 + v148;
                      v150 = v20 + v147;
                      v151 = v20 + v147 + v148;
                      v152 = 128 - v148;
                      if (128 - v148 < 8)
                      {
                        v157 = 0;
LABEL_292:
                        v161 = v152 & 7;
                        if ((v152 & 7) != 0)
                        {
                          v162 = v157 | v161;
                          while (v149[v157] == *v151)
                          {
                            ++v151;
                            ++v157;
                            if (!--v161)
                            {
                              v157 = v162;
                              break;
                            }
                          }
                        }
                      }

                      else
                      {
                        v153 = a5;
                        v154 = v20;
                        v155 = 0;
                        v156 = v152 >> 3;
                        v157 = v152 & 0xFFFFFFFFFFFFFFF8;
                        while (1)
                        {
                          v158 = *&v151[v155];
                          v159 = *&v149[v155];
                          if (v158 != v159)
                          {
                            break;
                          }

                          v155 += 8;
                          if (!--v156)
                          {
                            v151 += v152 & 0xFFFFFFFFFFFFFFF8;
                            v20 = v154;
                            a5 = v153;
                            v21 = v260;
                            goto LABEL_292;
                          }
                        }

                        v157 = v155 + (__clz(__rbit64(v159 ^ v158)) >> 3);
                        v20 = v154;
                        a5 = v153;
                        v21 = v260;
                      }

                      if (v157 + v148 >= 0x80)
                      {
                        v163 = (v134 + 8 * (v138 & v133));
                        *(v134 + 4 * v139) = *v163;
                        v141 = v163[1];
                        goto LABEL_269;
                      }

                      v160 = 2 * (v138 & v133);
                      if (*(v136 + v157 + v148) <= v150[v157 + v148])
                      {
                        *(v134 + 4 * v140) = v138;
                        v140 = 2 * (v138 & v133);
                        v142 = v157 + v148;
                      }

                      else
                      {
                        *(v134 + 4 * v139) = v138;
                        v139 = v160 | 1;
                        v143 = v157 + v148;
                        v160 |= 1uLL;
                      }

                      v138 = *(v134 + 4 * v160);
                      --v145;
                    }

                    while (v131 != v138);
                  }

                  v141 = *(a1 + 2520);
                  *(v134 + 4 * v139) = v141;
LABEL_269:
                  *(v134 + 4 * v140) = v141;
                  ++v131;
                }

                while (v131 != v257);
              }
            }
          }

          else
          {
            if (v89 != 2)
            {
              if (v89 == 3)
              {
                if (v38 < 7 || v14 < 3)
                {
                  goto LABEL_193;
                }

                v90 = *(a1 + 2512);
                *(v90 + 4 * (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 3) & v21))) >> 48) + ((v14 - 3) & 8))) = v14 - 3;
                *(v90 + 4 * (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 2) & v21))) >> 48) + ((v14 - 2) & 8))) = v14 - 2;
                v91 = v14 - 1;
                v92 = (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 1) & v21))) >> 48) + ((v14 - 1) & 8));
              }

              else
              {
                if (v89 != 4 || v38 < 7 || v14 < 3)
                {
                  goto LABEL_193;
                }

                v90 = *(a1 + 2512);
                *(v90 + 4 * (((((0xBD1E35A7BD000000 * *(v20 + ((v14 - 3) & v21))) >> 32) >> 15) + ((v14 - 3) & 0x18)) & 0x1FFFF)) = v14 - 3;
                *(v90 + 4 * (((((0xBD1E35A7BD000000 * *(v20 + ((v14 - 2) & v21))) >> 32) >> 15) + ((v14 - 2) & 0x18)) & 0x1FFFF)) = v14 - 2;
                v91 = v14 - 1;
                v92 = ((((0xBD1E35A7BD000000 * *(v20 + ((v14 - 1) & v21))) >> 32) >> 15) + ((v14 - 1) & 0x18)) & 0x1FFFF;
              }

LABEL_372:
              *(v90 + 4 * v92) = v91;
              goto LABEL_193;
            }

            if (v38 >= 7 && v14 >= 3)
            {
              v227 = *(a1 + 2512);
              *(v227 + (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 3) & v21))) >> 46) & 0x3FFFC)) = v14 - 3;
              *(v227 + (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 2) & v21))) >> 46) & 0x3FFFC)) = v14 - 2;
              *(v227 + (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 1) & v21))) >> 46) & 0x3FFFC)) = v14 - 1;
            }
          }

LABEL_193:
          v78 = *(a1 + 2336);
          if (v78 > 0xBFFFFFFF)
          {
            v79 = (((2 * v78) >> 1) & 0xC0000000 | v78 & 0x3FFFFFFF) ^ 0x80000000;
          }

          else
          {
            v79 = v78;
          }

          if (*(a1 + 4) < 10 || BrotliIsMostlyUTF8(v20, v79, v21, *(a1 + 2248) - v78, 0.75))
          {
            v80 = 2;
          }

          else
          {
            v80 = 3;
          }

          if (*(a1 + 168))
          {
            return 0;
          }

          v81 = (a1 + 2312);
          v82 = v80 << 9;
          v261 = (a1 + 2312);
          if (*(a1 + 2312) && !*(a1 + 2328))
          {
            ExtendLastCommand(a1, &v265, &v264);
            v81 = (a1 + 2312);
          }

          v83 = *(a1 + 4);
          v84 = (a1 + 2328);
          v85 = (*(a1 + 2304) + 16 * *(a1 + 2312));
          v86 = (a1 + 2320);
          if (v83 == 11)
          {
            v93 = &_kBrotliContextLookupTable[v82];
            v88 = (a1 + 2352);
            BrotliCreateHqZopfliBackwardReferences(a1 + 144, v265, v264, v20, v21, v93, a1, v259, (a1 + 2352), (a1 + 2328), v85, v81, (a1 + 2320));
          }

          else
          {
            if (v83 != 10)
            {
              v94 = &_kBrotliContextLookupTable[v82];
              v88 = (a1 + 2352);
              BrotliCreateBackwardReferences(v265, v264, v20, v21, a6.n128_f64[0], a7, a8, a9, a10, a11, v94, a1, v259, (a1 + 2352), (a1 + 2328), v85, v81, (a1 + 2320));
              goto LABEL_226;
            }

            v87 = &_kBrotliContextLookupTable[v82];
            v88 = (a1 + 2352);
            BrotliCreateZopfliBackwardReferences(a1 + 144, v265, v264, v20, v21, v87, a1, v259, a1 + 2352, (a1 + 2328), v85, v81, (a1 + 2320));
          }

          if (*(a1 + 168))
          {
            return 0;
          }

LABEL_226:
          v95 = *(a1 + 8);
          v96 = *(a1 + 12);
          if (v95 <= v96)
          {
            v95 = *(a1 + 12);
          }

          if (v95 >= 23)
          {
            v97 = 23;
          }

          else
          {
            v97 = v95;
          }

          v98 = *(a1 + 2248);
          v99 = *(a1 + 2336);
          if (*(a1 + 4) > 3)
          {
            v101 = 0;
            v100 = (a1 + 2312);
          }

          else
          {
            v100 = (a1 + 2312);
            v101 = *v261 + *v86 > 0x2FFE;
          }

          v102 = v98 - v99;
          if (a3 | a2 || v101 || (v103 = 1 << (v97 + 1), v102 + (1 << v96) > v103) || *v86 >= v103 >> 3 || *v100 >= v103 >> 3)
          {
            v104 = *v84;
            if (*v84)
            {
              v105 = *(a1 + 2304);
              v106 = *(a1 + 2312);
              *(a1 + 2312) = v106 + 1;
              v107 = v105 + 16 * v106;
              *v107 = v104;
              *(v107 + 4) = 0x8000000;
              *(v107 + 14) = 16;
              if (v104 > 5)
              {
                if (v104 > 0x81)
                {
                  if (v104 > 0x841)
                  {
                    if (v104 >> 1 >= 0xC21)
                    {
                      if (v104 < 0x5842)
                      {
                        LOWORD(v108) = 22;
                      }

                      else
                      {
                        LOWORD(v108) = 23;
                      }
                    }

                    else
                    {
                      LOWORD(v108) = 21;
                    }
                  }

                  else
                  {
                    v108 = (__clz(v104 - 66) ^ 0x1F) + 10;
                  }
                }

                else
                {
                  v164 = (__clz(v104 - 2) ^ 0x1F) - 1;
                  v108 = ((v104 - 2) >> v164) + 2 * v164 + 2;
                }
              }

              else
              {
                LOWORD(v108) = v104;
              }

              *(v107 + 12) = ((((0x520D40u >> (6 * (v108 >> 3))) & 0xC0) + 192 * (v108 >> 3)) & 0xFFC7 | (8 * (v108 & 7))) + 66;
              *v86 += v104;
              *v84 = 0;
            }

            if (a2 || v98 != v99)
            {
              v250 = v98 - v99;
              BrotliStorage = GetBrotliStorage(a1, (2 * v102 + 503));
              v263 = *(a1 + 2434);
              if (!*(a1 + 168))
              {
                v252 = BrotliStorage;
                *BrotliStorage = *(a1 + 2432);
                BrotliStorage[1] = *(a1 + 2433);
                WriteMetaBlockInternal(a1 + 144, v20, v21, *(a1 + 2336), v250, a2, v80, a1, *(a1 + 2436), HIBYTE(*(a1 + 2436)), *(a1 + 2320), *(a1 + 2312), *(a1 + 2304), (a1 + 2416), v88, &v263, BrotliStorage);
                if (!*(a1 + 168))
                {
                  v253 = v263;
                  v254 = v263 >> 3;
                  *(a1 + 2432) = v252[v263 >> 3];
                  *(a1 + 2434) = v253 & 7;
                  *(a1 + 2336) = *(a1 + 2248);
                  if (UpdateLastProcessedPos(a1))
                  {
                    *(a1 + 2500) = 0;
                  }

                  v255 = *(a1 + 2336);
                  if (v255)
                  {
                    *(a1 + 2436) = *(v20 + ((v255 - 1) & v21));
                    if (v255 != 1)
                    {
                      *(a1 + 2437) = *(v20 + ((v255 - 2) & v21));
                    }
                  }

                  *v261 = 0;
                  *(a1 + 2320) = 0;
                  *(a1 + 2416) = *v88;
                  *a5 = v252;
                  *v258 = v254;
                  return 1;
                }
              }

              return 0;
            }
          }

          else if (UpdateLastProcessedPos(a1))
          {
            *(a1 + 2500) = 0;
          }

          *v258 = 0;
          return 1;
        }

        if (v89 <= 41)
        {
          if (v89 != 35)
          {
            if ((v89 == 40 || v89 == 41) && v38 >= 3 && v14 >= 3)
            {
              v109 = *(a1 + 2520);
              v110 = (506832829 * *(v20 + ((v14 - 3) & v21))) >> 17;
              v111 = v109 + 2 * v110;
              v112 = *(a1 + 2504);
              v113 = v109 + 4 * v112;
              v114 = v112 + 1;
              *(a1 + 2504) = v112 + 1;
              v115 = v14 - 3 - *(v109 + 4 * v110);
              *(v109 + (v14 - 3) + 196608) = v110;
              v116 = -1;
              if (v115 >= 0xFFFF)
              {
                LOWORD(v115) = -1;
              }

              *(v113 + 0x40000) = v115;
              v117 = *(v111 + 0x20000);
              *(v109 + 4 * v110) = v14 - 3;
              *(v113 + 262146) = v117;
              *(v111 + 0x20000) = v112;
              v118 = *(a1 + 2520);
              v119 = (506832829 * *(v20 + ((v14 - 2) & v21))) >> 17;
              v120 = v118 + 2 * v119;
              v121 = v118 + 4 * v114;
              *(a1 + 2504) = v112 + 2;
              v122 = v14 - 2 - *(v118 + 4 * v119);
              *(v118 + (v14 - 2) + 196608) = v119;
              if (v122 >= 0xFFFF)
              {
                LOWORD(v122) = -1;
              }

              *(v121 + 0x40000) = v122;
              v123 = *(v120 + 0x20000);
              *(v118 + 4 * v119) = v14 - 2;
              *(v120 + 0x20000) = v114;
              *(v121 + 262146) = v123;
              v124 = *(a1 + 2520);
              v125 = (506832829 * *(v20 + ((v14 - 1) & v21))) >> 17;
              v126 = v124 + 2 * v125;
              v127 = *(a1 + 2504);
              v128 = v124 + 4 * v127;
              *(a1 + 2504) = v127 + 1;
              v129 = *(v124 + 4 * v125);
              *(v124 + (v14 - 1) + 196608) = v125;
              v130 = *(v126 + 0x20000);
              if (v14 - 1 - v129 < 0xFFFF)
              {
                v116 = v14 - 1 - v129;
              }

              *(v128 + 0x40000) = v116;
              *(v128 + 262146) = v130;
              *(v124 + 4 * v125) = v14 - 1;
              *(v126 + 0x20000) = v127;
            }

            goto LABEL_193;
          }

          if (v38 >= 7 && v14 >= 3)
          {
            v218 = *(a1 + 2512);
            *(v218 + 4 * (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 3) & v21))) >> 48) + ((v14 - 3) & 8))) = v14 - 3;
            *(v218 + 4 * (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 2) & v21))) >> 48) + ((v14 - 2) & 8))) = v14 - 2;
            *(v218 + 4 * (((0xBD1E35A7BD000000 * *(v20 + ((v14 - 1) & v21))) >> 48) + ((v14 - 1) & 8))) = v14 - 1;
          }

          v219 = 4 - (v14 & 3);
          if ((v14 & 3) != 0)
          {
            v220 = 4 - (v14 & 3);
          }

          else
          {
            v220 = 0;
          }

          v59 = v38 >= v219;
          v221 = v38 - v219;
          if (!v59)
          {
            v221 = 0;
          }

          if ((v14 & 3) != 0)
          {
            v222 = v221;
          }

          else
          {
            v222 = v38;
          }

          v212 = v220 + v14;
          v223 = (v220 + v14) & v21;
          v224 = v21 - v223;
          if (v222 < v21 - v223)
          {
            v224 = v222;
          }

          if (v224 >= 0x20)
          {
            v225 = 0;
            v216 = 0;
            v226 = v20 + v223;
            do
            {
              v216 = v226[v225] + v216 * *(a1 + 2548) + 1;
              v59 = v225 >= 0x1C;
              v225 += 4;
            }

            while (!v59);
            goto LABEL_361;
          }
        }

        else
        {
          if (v89 <= 54)
          {
            if (v89 != 42)
            {
              if (v89 != 54 || v38 < 7 || v14 < 3)
              {
                goto LABEL_193;
              }

              v90 = *(a1 + 2512);
              *(v90 + 4 * (((((0x35A7BD1E35A7BD00 * *(v20 + ((v14 - 3) & v21))) >> 32) >> 12) + ((v14 - 3) & 0x18)) & 0xFFFFF)) = v14 - 3;
              *(v90 + 4 * (((((0x35A7BD1E35A7BD00 * *(v20 + ((v14 - 2) & v21))) >> 32) >> 12) + ((v14 - 2) & 0x18)) & 0xFFFFF)) = v14 - 2;
              v91 = v14 - 1;
              v92 = ((((0x35A7BD1E35A7BD00 * *(v20 + ((v14 - 1) & v21))) >> 32) >> 12) + ((v14 - 1) & 0x18)) & 0xFFFFF;
              goto LABEL_372;
            }

            if (v38 >= 3 && v14 >= 3)
            {
              v182 = a1 + 2504;
              v183 = *(a1 + 3536);
              v184 = (506832829 * *(v20 + ((v14 - 3) & v21))) >> 17;
              v185 = v183 + 2 * v184;
              v186 = *(a1 + 2504 + 2 * (v184 & 0x1FF));
              *(a1 + 2504 + 2 * (v184 & 0x1FF)) = v186 + 1;
              v187 = v186 & 0x1FF;
              v188 = v14 - 3 - *(v183 + 4 * v184);
              *(v183 + (v14 - 3) + 196608) = v184;
              if (v188 >= 0xFFFF)
              {
                v189 = -1;
              }

              else
              {
                v189 = v188;
              }

              v190 = (v183 + ((v184 & 0x1FF) << 11) + 4 * v187 + 0x40000);
              *v190 = v189;
              v190[1] = *(v185 + 0x20000);
              *(v183 + 4 * v184) = v14 - 3;
              *(v185 + 0x20000) = v187;
              v191 = *(a1 + 3536);
              v192 = (506832829 * *(v20 + ((v14 - 2) & v21))) >> 17;
              v193 = v191 + 2 * v192;
              v194 = *(v182 + 2 * (v192 & 0x1FF));
              *(v182 + 2 * (v192 & 0x1FF)) = v194 + 1;
              v195 = v194 & 0x1FF;
              v196 = v14 - 2 - *(v191 + 4 * v192);
              *(v191 + (v14 - 2) + 196608) = v192;
              if (v196 >= 0xFFFF)
              {
                v197 = -1;
              }

              else
              {
                v197 = v196;
              }

              v198 = v191 + ((v192 & 0x1FF) << 11) + 4 * v195 + 0x40000;
              *v198 = v197;
              *(v198 + 2) = *(v193 + 0x20000);
              *(v191 + 4 * v192) = v14 - 2;
              *(v193 + 0x20000) = v195;
              v199 = *(a1 + 3536);
              v200 = (506832829 * *(v20 + ((v14 - 1) & v21))) >> 17;
              v201 = v199 + 2 * v200;
              LOWORD(v198) = *(v182 + 2 * (v200 & 0x1FF));
              *(v182 + 2 * (v200 & 0x1FF)) = v198 + 1;
              v202 = v198 & 0x1FF;
              v203 = v14 - 1 - *(v199 + 4 * v200);
              *(v199 + (v14 - 1) + 196608) = v200;
              if (v203 >= 0xFFFF)
              {
                v204 = -1;
              }

              else
              {
                v204 = v203;
              }

              v205 = *(v201 + 0x20000);
              v206 = (v199 + ((v200 & 0x1FF) << 11) + 4 * v202 + 0x40000);
              *v206 = v204;
              v206[1] = v205;
              *(v199 + 4 * v200) = v14 - 1;
              *(v201 + 0x20000) = v202;
            }

            goto LABEL_193;
          }

          if (v89 != 55)
          {
            if (v89 == 65)
            {
              if (v38 >= 7 && v14 >= 3)
              {
                v165 = *(a1 + 2560);
                v166 = *(a1 + 2568);
                v167 = *(a1 + 2528);
                v168 = (0x1FE35A7BD3579BD3 * (*(v20 + ((v14 - 3) & v21)) & v167)) >> *(a1 + 2520);
                v169 = *(v165 + 2 * v168);
                v170 = *(a1 + 2536) & v169;
                v171 = v168 << *(a1 + 2540);
                *(v165 + 2 * v168) = v169 + 1;
                *(v166 + 4 * v170 + 4 * v171) = v14 - 3;
                v172 = (0x1FE35A7BD3579BD3 * (*(v20 + ((v14 - 2) & v21)) & v167)) >> *(a1 + 2520);
                v173 = *(v165 + 2 * v172);
                v174 = *(a1 + 2536) & v173;
                v175 = *(a1 + 2540);
                *(v165 + 2 * v172) = v173 + 1;
                *(v166 + 4 * v174 + 4 * (v172 << v175)) = v14 - 2;
                v176 = (0x1FE35A7BD3579BD3 * (*(v20 + ((v14 - 1) & v21)) & v167)) >> *(a1 + 2520);
                LODWORD(v167) = *(v165 + 2 * v176);
                v177 = v176 << *(a1 + 2540);
                v178 = *(a1 + 2536) & v167;
                *(v165 + 2 * v176) = v167 + 1;
                *(v166 + 4 * v178 + 4 * v177) = v14 - 1;
              }

              v179 = v21 - (v21 & v14);
              if (v179 >= v38)
              {
                v179 = v38;
              }

              if (v179 >= 0x20)
              {
                v180 = 0;
                v181 = 0;
                do
                {
                  v181 = *(v20 + (v21 & v14) + v180++) + v181 * *(a1 + 2604) + 1;
                }

                while (v180 != 32);
                *(a1 + 2576) = v181;
              }

              *(a1 + 2592) = v14;
            }

            goto LABEL_193;
          }

          if (v38 >= 7 && v14 >= 3)
          {
            v207 = *(a1 + 2512);
            *(v207 + 4 * (((((0x35A7BD1E35A7BD00 * *(v20 + ((v14 - 3) & v21))) >> 32) >> 12) + ((v14 - 3) & 0x18)) & 0xFFFFF)) = v14 - 3;
            *(v207 + 4 * (((((0x35A7BD1E35A7BD00 * *(v20 + ((v14 - 2) & v21))) >> 32) >> 12) + ((v14 - 2) & 0x18)) & 0xFFFFF)) = v14 - 2;
            *(v207 + 4 * (((((0x35A7BD1E35A7BD00 * *(v20 + ((v14 - 1) & v21))) >> 32) >> 12) + ((v14 - 1) & 0x18)) & 0xFFFFF)) = v14 - 1;
          }

          v208 = 4 - (v14 & 3);
          if ((v14 & 3) != 0)
          {
            v209 = 4 - (v14 & 3);
          }

          else
          {
            v209 = 0;
          }

          v59 = v38 >= v208;
          v210 = v38 - v208;
          if (!v59)
          {
            v210 = 0;
          }

          if ((v14 & 3) != 0)
          {
            v211 = v210;
          }

          else
          {
            v211 = v38;
          }

          v212 = v209 + v14;
          v213 = (v209 + v14) & v21;
          v214 = v21 - v213;
          if (v211 < v21 - v213)
          {
            v214 = v211;
          }

          if (v214 >= 0x20)
          {
            v215 = 0;
            v216 = 0;
            v217 = v20 + v213;
            do
            {
              v216 = v217[v215] + v216 * *(a1 + 2548) + 1;
              v59 = v215 >= 0x1C;
              v215 += 4;
            }

            while (!v59);
LABEL_361:
            *(a1 + 2520) = v216;
          }
        }

        *(a1 + 2536) = v212;
        goto LABEL_193;
      }

LABEL_190:
      a6.n128_u64[0] = 0;
      *(a1 + 2464) = 0u;
      goto LABEL_191;
    }

    v41 = *(a1 + 4);
    if (v41 < 10)
    {
      if (v41 == 4)
      {
        if (*(a1 + 24) >= 0x100000uLL)
        {
          v41 = 54;
        }
      }

      else if (v41 > 4)
      {
        v44 = *(a1 + 8);
        if (v44 > 16)
        {
          v55 = v41 - 1;
          if (v44 < 0x13 || *(a1 + 24) < 0x100000uLL)
          {
            *(a1 + 48) = v55;
            if (v41 >= 9)
            {
              v58 = 16;
            }

            else
            {
              v58 = 10;
            }

            v59 = v41 >= 7;
            if (v41 < 7)
            {
              v60 = 14;
            }

            else
            {
              v60 = 15;
            }

            *(a1 + 40) = 5;
            *(a1 + 44) = v60;
            if (v59)
            {
              v61 = v58;
            }

            else
            {
              v61 = 4;
            }

            *(a1 + 56) = v61;
            v41 = 5;
          }

          else
          {
            a6.n128_u64[0] = 0xF00000006;
            *(a1 + 40) = 0xF00000006;
            *(a1 + 48) = v55;
            *(a1 + 52) = 5;
            if (v41 >= 9)
            {
              v56 = 16;
            }

            else
            {
              v56 = 10;
            }

            if (v41 >= 7)
            {
              v57 = v56;
            }

            else
            {
              v57 = 4;
            }

            *(a1 + 56) = v57;
            v41 = 6;
          }

LABEL_42:
          v42 = *(a1 + 8);
          if (v42 < 25)
          {
            v43 = 0;
            if (v41 > 34)
            {
              goto LABEL_90;
            }

            if (v41 <= 4)
            {
              if ((v41 - 2) >= 2 && v41 != 4)
              {
LABEL_91:
                *(a1 + 2456) = v43;
                if (*(a1 + 168))
                {
                  goto LABEL_192;
                }

                a6 = *(a1 + 40);
                *(a1 + 2480) = a6;
                *(a1 + 2496) = *(a1 + 56);
                v51 = *(a1 + 2480);
                if (v51 > 34)
                {
                  if (v51 <= 41)
                  {
                    if (v51 != 35)
                    {
                      if (v51 == 40 || v51 == 41)
                      {
                        *(a1 + 2528) = v259;
                        *(a1 + 2520) = v43;
                        v52 = *(a1 + 4);
                        if (v52 >= 7)
                        {
                          v53 = 7;
                        }

                        else
                        {
                          v53 = 8;
                        }

                        *(a1 + 2512) = (v53 << (v52 - 4));
                      }

                      goto LABEL_144;
                    }
                  }

                  else
                  {
                    if (v51 <= 54)
                    {
                      if (v51 == 42)
                      {
                        *(a1 + 3544) = v259;
                        *(a1 + 3536) = v43;
                        v62 = *(a1 + 4);
                        if (v62 >= 7)
                        {
                          v63 = 7;
                        }

                        else
                        {
                          v63 = 8;
                        }

                        *(a1 + 3528) = (v63 << (v62 - 4));
                        goto LABEL_144;
                      }

                      if (v51 != 54)
                      {
LABEL_144:
                        *(a1 + 2500) = 0;
                        goto LABEL_145;
                      }

                      goto LABEL_102;
                    }

                    if (v51 != 55)
                    {
                      if (v51 == 65)
                      {
                        *(a1 + 2672) = v259;
                        *(a1 + 2664) = v43;
                        a7 = *(a1 + 2472);
                        *(a1 + 2616) = *v259;
                        *(a1 + 2632) = a7;
                        a6 = *(a1 + 2488);
                        *(a1 + 2648) = a6;
                        *(a1 + 2680) = 1;
                        *(a1 + 2688) = a1;
                      }

                      goto LABEL_144;
                    }
                  }

                  *(a1 + 2616) = v259;
                  *(a1 + 2608) = v43;
                  a7 = *(a1 + 2472);
                  *(a1 + 2560) = *v259;
                  *(a1 + 2576) = a7;
                  a6 = *(a1 + 2488);
                  *(a1 + 2592) = a6;
                  *(a1 + 2624) = 1;
                  *(a1 + 2632) = a1;
                  goto LABEL_144;
                }

                if (v51 > 4)
                {
                  if (v51 == 5)
                  {
                    v64 = v16;
                    InitializeH5(v259, a1 + 2504);
                  }

                  else
                  {
                    if (v51 != 6)
                    {
                      if (v51 == 10)
                      {
                        *(a1 + 2512) = v43;
                        *(a1 + 2528) = v43 + 0x80000;
                        v54 = -1 << *(a1 + 8);
                        *(a1 + 2504) = ~v54;
                        *(a1 + 2520) = v54 + 1;
                      }

                      goto LABEL_144;
                    }

                    v64 = v16;
                    InitializeH6(v259, a1 + 2504);
                  }

                  v16 = v64;
                  v21 = v260;
                  goto LABEL_144;
                }

                if (v51 != 2 && v51 != 3 && v51 != 4)
                {
                  goto LABEL_144;
                }

LABEL_102:
                *(a1 + 2504) = v259;
                *(a1 + 2512) = v43;
                goto LABEL_144;
              }

              goto LABEL_90;
            }

            if (v41 != 5 && v41 != 6)
            {
LABEL_78:
              v48 = 1 << v42;
              if (1 << v42 >= v38)
              {
                v49 = v38;
              }

              else
              {
                v49 = 1 << v42;
              }

              if (v40)
              {
                v48 = v49;
              }

              v46 = 8 * v48 + 0x80000;
LABEL_85:
              if (!v46)
              {
                v43 = 0;
                goto LABEL_91;
              }

              goto LABEL_90;
            }
          }

          else
          {
            v43 = 0;
            if (v41 > 9)
            {
              if (v41 > 40)
              {
                if (v41 != 41 && v41 != 42)
                {
                  *(a1 + 40) = 55;
                }
              }

              else if (v41 == 10)
              {
                goto LABEL_78;
              }

LABEL_90:
              v50 = v16;
              v43 = BrotliAllocate(a1 + 144);
              v16 = v50;
              v21 = v260;
              goto LABEL_91;
            }

            if (v41 <= 3)
            {
              if (v41 != 2)
              {
                if (v41 != 3)
                {
                  goto LABEL_91;
                }

                *(a1 + 40) = 35;
              }

              goto LABEL_90;
            }

            if (v41 == 4)
            {
              goto LABEL_90;
            }

            if (v41 != 5)
            {
              *(a1 + 40) = 65;
              v46 = (2 << *(a1 + 44)) + 0x4000000 + (4 << *(a1 + 44) << *(a1 + 48));
              goto LABEL_85;
            }
          }

          v46 = (4 << *(a1 + 44) << *(a1 + 48)) + (2 << *(a1 + 44));
          goto LABEL_85;
        }

        if (v41 < 9)
        {
          v45 = 41;
        }

        else
        {
          v45 = 42;
        }

        if (v41 >= 7)
        {
          v41 = v45;
        }

        else
        {
          v41 = 40;
        }
      }
    }

    else
    {
      v41 = 10;
    }

    *(a1 + 40) = v41;
    goto LABEL_42;
  }

LABEL_14:
  v25 = a5;
  v26 = v20;
  v263 = *(a1 + 2434);
  *v262 = 0;
  if (!a2)
  {
    v27 = 0;
    if (v11 == v12)
    {
      goto LABEL_16;
    }
  }

  v28 = v16;
  v29 = GetBrotliStorage(a1, (2 * v13 + 503));
  if (*(a1 + 168))
  {
    return 0;
  }

  v30 = v29;
  *v29 = *(a1 + 2432);
  v29[1] = *(a1 + 2433);
  HashTable = GetHashTable(a1, *(a1 + 4), v13, v262);
  if (*(a1 + 168))
  {
    return 0;
  }

  v32 = v260 & v14;
  if (*(a1 + 4))
  {
    BrotliCompressFragmentTwoPass(a1 + 144, v26 + v32, v13, a2, *(a1 + 8568), *(a1 + 8576), HashTable, v262[0], &v263, v30);
  }

  else
  {
    BrotliCompressFragmentFast(a1 + 144, v26 + v32, v13, a2, HashTable, v262[0], (a1 + 7664), a1 + 7792, (a1 + 8560), (a1 + 8048), &v263, v30);
  }

  if (*(a1 + 168))
  {
    return 0;
  }

  v47 = v263;
  v27 = v263 >> 3;
  *(a1 + 2432) = *(v30 + (v263 >> 3));
  *(a1 + 2434) = v47 & 7;
  UpdateLastProcessedPos(a1);
  *v25 = v30;
  v16 = v28;
LABEL_16:
  *v16 = v27;
  return 1;
}

uint64_t BrotliEncoderTakeOutput(uint64_t a1, unint64_t *a2)
{
  v2 = *(a1 + 8592);
  if (*a2 >= v2)
  {
    v3 = *(a1 + 8592);
  }

  else
  {
    v3 = *a2;
  }

  if (!*a2)
  {
    v3 = *(a1 + 8592);
  }

  if (v3)
  {
    v4 = *(a1 + 8584);
    *(a1 + 8584) = v4 + v3;
    v5 = v2 - v3;
    *(a1 + 8592) = v5;
    *(a1 + 8600) += v3;
    if (v5)
    {
      v6 = 0;
    }

    else
    {
      v6 = *(a1 + 8628) == 1;
    }

    if (v6)
    {
      *(a1 + 8628) = 0;
      *(a1 + 8584) = 0;
    }
  }

  else
  {
    v4 = 0;
  }

  *a2 = v3;
  return v4;
}

uint64_t ChooseDistanceParams(_DWORD *a1)
{
  if (a1[1] < 4 || (*a1 != 2 ? (v2 = a1[16], v1 = a1[17]) : (v1 = 12, v2 = 1), v2 > 3 || v1 > 0x78 || ((v1 >> v2) & 0xF) << v2 != v1))
  {
    v2 = 0;
    v1 = 0;
  }

  return BrotliInitDistanceParams(a1, v2, v1);
}

BOOL ShouldCompress(uint64_t a1, unsigned int a2, int a3, unint64_t a4, unint64_t a5, unint64_t a6)
{
  v25 = *MEMORY[0x29EDCA608];
  if (a4 < 3)
  {
    return 0;
  }

  if ((a4 >> 8) + 2 <= a6 || a4 * 0.99 >= a5)
  {
    return 1;
  }

  bzero(v24, 0x400uLL);
  if (a4 + 12 >= 0xD)
  {
    v11 = (a4 + 12) / 0xD;
    do
    {
      v12 = *(a1 + (a3 & a2));
      ++v24[v12];
      a3 += 13;
      --v11;
    }

    while (v11);
  }

  v13 = 0;
  v14 = 0;
  v15 = 0.0;
  v16 = a4 * 7.92 / 13.0;
  do
  {
    v17 = v24[v13];
    if (v17 > 0xFF)
    {
      v18 = log2(v17);
    }

    else
    {
      v18 = kBrotliLog2Table[v17];
    }

    v19 = v24[v13 + 1];
    if (v19 > 0xFF)
    {
      v20 = log2(v19);
    }

    else
    {
      v20 = kBrotliLog2Table[v19];
    }

    v13 += 2;
    v14 += v17 + v19;
    v15 = v15 - v17 * v18 - v19 * v20;
  }

  while ((v13 * 4 - 8) < 0x3F8);
  v21 = v14;
  if (v14)
  {
    if (v14 > 0xFF)
    {
      v22 = log2(v14);
    }

    else
    {
      v22 = kBrotliLog2Table[v14];
    }

    v15 = v15 + v21 * v22;
  }

  v23 = v15 >= v21 ? v15 : v14;
  return v23 <= v16;
}

uint64_t *InitializeH5(uint64_t *result, uint64_t a2)
{
  v2 = *(result + 7);
  v3 = *(result + 8);
  v4 = 32 - v2;
  v5 = 1 << v2;
  *a2 = v5;
  *(a2 + 8) = 1 << v3;
  *(a2 + 16) = v4;
  *(a2 + 20) = (1 << v3) - 1;
  v6 = *result;
  *(a2 + 32) = result;
  *(a2 + 40) = v6;
  *(a2 + 48) = v6 + 2 * v5;
  LODWORD(v6) = *(result + 10);
  *(a2 + 24) = v3;
  *(a2 + 28) = v6;
  return result;
}

uint64_t *InitializeH6(uint64_t *result, uint64_t a2)
{
  v2 = *(result + 7);
  v3 = *(result + 8);
  *(a2 + 16) = 64 - v2;
  v4 = *(result + 10);
  *(a2 + 24) = 0xFFFFFFFFFFFFFFFFLL >> (-8 * *(result + 36));
  v5 = 1 << v2;
  *a2 = v5;
  *(a2 + 8) = 1 << v3;
  *(a2 + 32) = (1 << v3) - 1;
  *(a2 + 36) = v3;
  *(a2 + 40) = v4;
  v6 = *result;
  *(a2 + 48) = result;
  *(a2 + 56) = v6;
  *(a2 + 64) = v6 + 2 * v5;
  return result;
}

void PrepareH4(uint64_t a1, int a2, unint64_t a3, uint64_t a4)
{
  v4 = *(a1 + 8);
  if (a2 && a3 <= 0x1000)
  {
    if (a3)
    {
      for (i = 0; i != a3; ++i)
      {
        v6 = (0xBD1E35A7BD000000 * *(a4 + i)) >> 47;
        v7 = 4;
        do
        {
          v4[v6 & 0x1FFFF] = 0;
          LODWORD(v6) = v6 + 8;
          --v7;
        }

        while (v7);
      }
    }
  }

  else
  {
    bzero(v4, 0x80000uLL);
  }
}

void PrepareH5(unint64_t *a1, int a2, unint64_t a3, int *a4)
{
  v5 = a1[5];
  v6 = *a1;
  if (a2 && v6 >> 6 >= a3)
  {
    if (a3)
    {
      v7 = *(a1 + 4);
      do
      {
        v8 = *a4;
        a4 = (a4 + 1);
        v5[(506832829 * v8) >> v7] = 0;
        --a3;
      }

      while (a3);
    }
  }

  else
  {
    bzero(v5, 2 * v6);
  }
}

void PrepareH6(unint64_t *a1, int a2, unint64_t a3, uint64_t *a4)
{
  v5 = a1[7];
  v6 = *a1;
  if (a2 && v6 >> 6 >= a3)
  {
    if (a3)
    {
      v7 = a1[3];
      v8 = *(a1 + 4);
      do
      {
        v9 = *a4;
        a4 = (a4 + 1);
        v5[((0x1FE35A7BD3579BD3 * (v9 & v7)) >> v8)] = 0;
        --a3;
      }

      while (a3);
    }
  }

  else
  {
    bzero(v5, 2 * v6);
  }
}

void PrepareH40(uint64_t a1, int a2, unint64_t a3, int *a4)
{
  v5 = *(a1 + 16);
  if (a2 && a3 <= 0x200)
  {
    for (; a3; --a3)
    {
      v6 = *a4;
      a4 = (a4 + 1);
      v7 = (506832829 * v6) >> 17;
      *(v5 + 4 * v7) = -858993460;
      *(v5 + 0x20000 + 2 * v7) = -13108;
    }
  }

  else
  {
    memset(*(a1 + 16), 204, 0x20000uLL);
    bzero((v5 + 0x20000), 0x10000uLL);
  }

  bzero((v5 + 196608), 0x10000uLL);
  *a1 = 0;
}

void PrepareH42(void **a1, int a2, unint64_t a3, int *a4)
{
  v5 = a1[129];
  if (a2 && a3 <= 0x200)
  {
    for (; a3; --a3)
    {
      v6 = *a4;
      a4 = (a4 + 1);
      v7 = (506832829 * v6) >> 17;
      v5[v7] = -858993460;
      *(v5 + v7 + 0x10000) = -13108;
    }
  }

  else
  {
    memset(a1[129], 204, 0x20000uLL);
    bzero(v5 + 0x8000, 0x10000uLL);
  }

  bzero(v5 + 49152, 0x10000uLL);

  bzero(a1, 0x400uLL);
}

void PrepareH54(uint64_t a1, int a2, unint64_t a3, uint64_t a4)
{
  v4 = *(a1 + 8);
  if (a2 && a3 <= 0x8000)
  {
    if (a3)
    {
      for (i = 0; i != a3; ++i)
      {
        v6 = (0x35A7BD1E35A7BD00 * *(a4 + i)) >> 44;
        v7 = 4;
        do
        {
          v4[v6 & 0xFFFFF] = 0;
          LODWORD(v6) = v6 + 8;
          --v7;
        }

        while (v7);
      }
    }
  }

  else
  {
    bzero(v4, 0x400000uLL);
  }
}

void PrepareH35(uint64_t a1, int a2, unint64_t a3, uint64_t *a4)
{
  if (*(a1 + 120))
  {
    *(a1 + 120) = 0;
    v8 = *(a1 + 112);
    v9 = (*(a1 + 104) + 0x40000);
    *(a1 + 56) = v9;
    v10 = *v8;
    *a1 = v8;
    *(a1 + 8) = v10;
    *(a1 + 16) = 0;
    *(a1 + 44) = 0x16C4362100010DCDLL;
    *(a1 + 24) = v9;
    *(a1 + 32) = 0;
    memset(v9, 255, 0x4000000uLL);
    if (!a2)
    {
      goto LABEL_10;
    }
  }

  else
  {
    v10 = *(a1 + 8);
    if (!a2)
    {
LABEL_10:
      bzero(v10, 0x40000uLL);
      goto LABEL_11;
    }
  }

  if (a3 > 0x800)
  {
    goto LABEL_10;
  }

  if (!a3)
  {
    return;
  }

  v11 = a4;
  v12 = a3;
  do
  {
    v13 = *v11;
    v11 = (v11 + 1);
    v14 = (0xBD1E35A7BD000000 * v13) >> 48;
    *(v10 + v14) = 0;
    *(v10 + (v14 + 8)) = 0;
    --v12;
  }

  while (v12);
LABEL_11:
  if (a3 >= 0x20)
  {
    v15 = 0;
    v16 = 0;
    do
    {
      v16 = *(a4 + v15) + v16 * *(a1 + 44) + 1;
      v17 = v15 >= 0x1C;
      v15 += 4;
    }

    while (!v17);
    *(a1 + 16) = v16;
  }
}

void PrepareH55(uint64_t a1, int a2, unint64_t a3, uint64_t a4)
{
  if (*(a1 + 120))
  {
    *(a1 + 120) = 0;
    v8 = *(a1 + 112);
    v9 = (*(a1 + 104) + 0x400000);
    *(a1 + 56) = v9;
    v10 = *v8;
    *a1 = v8;
    *(a1 + 8) = v10;
    *(a1 + 16) = 0;
    *(a1 + 44) = 0x16C4362100010DCDLL;
    *(a1 + 24) = v9;
    *(a1 + 32) = 0;
    memset(v9, 255, 0x4000000uLL);
  }

  PrepareH54(a1, a2, a3, a4);
  if (a3 >= 0x20)
  {
    v11 = 0;
    v12 = 0;
    do
    {
      v12 = *(a4 + v11) + v12 * *(a1 + 44) + 1;
      v13 = v11 >= 0x1C;
      v11 += 4;
    }

    while (!v13);
    *(a1 + 16) = v12;
  }
}

void PrepareH65(uint64_t a1, int a2, unint64_t a3, uint64_t *a4)
{
  if (*(a1 + 176))
  {
    v8 = *(a1 + 168);
    v9 = (*(a1 + 160) + (2 << *(*(a1 + 184) + 44)) + (4 << *(*(a1 + 184) + 44) << *(*(a1 + 184) + 48)));
    v10 = *(v8 + 7);
    v11 = *(v8 + 8);
    *(a1 + 16) = 64 - v10;
    v12 = *(v8 + 10);
    v13 = 0xFFFFFFFFFFFFFFFFLL >> (-8 * *(v8 + 36));
    *(a1 + 176) = 0;
    *(a1 + 112) = v9;
    *(a1 + 24) = v13;
    v14 = 1 << v10;
    *a1 = v14;
    *(a1 + 8) = 1 << v11;
    *(a1 + 32) = (1 << v11) - 1;
    *(a1 + 36) = v11;
    *(a1 + 40) = v12;
    v15 = *v8;
    *(a1 + 48) = v8;
    *(a1 + 56) = v15;
    *(a1 + 64) = v15 + 2 * v14;
    *(a1 + 72) = 0;
    *(a1 + 100) = 0xF1EBF08100010DCDLL;
    *(a1 + 80) = v9;
    *(a1 + 88) = 0;
    memset(v9, 255, 0x4000000uLL);
  }

  PrepareH6(a1, a2, a3, a4);
  if (a3 >= 0x20)
  {
    v16 = 0;
    v17 = 0;
    do
    {
      v17 = *(a4 + v16++) + v17 * *(a1 + 100) + 1;
    }

    while (v16 != 32);
    *(a1 + 72) = v17;
  }
}

uint64_t GetBrotliStorage(uint64_t a1, unint64_t a2)
{
  if (*(a1 + 2440) >= a2)
  {
    return *(a1 + 2448);
  }

  BrotliFree(a1 + 144, *(a1 + 2448));
  *(a1 + 2448) = 0;
  v4 = BrotliAllocate(a1 + 144);
  result = 0;
  *(a1 + 2448) = v4;
  if (!*(a1 + 168))
  {
    *(a1 + 2440) = a2;
    return v4;
  }

  return result;
}

void *GetHashTable(uint64_t a1, int a2, unint64_t a3, unint64_t *a4)
{
  v6 = 0x20000;
  if (!a2)
  {
    v6 = 0x8000;
  }

  if (v6 >= a3)
  {
    v7 = a3;
  }

  else
  {
    v7 = v6;
  }

  v8 = 256;
  do
  {
    v9 = v8;
    v8 *= 2;
  }

  while (v9 < v7);
  if ((v9 & 0xAAA00) == 0 && a2 == 0)
  {
    v11 = v8;
  }

  else
  {
    v11 = v9;
  }

  if (v11 > 0x400)
  {
    if (v11 <= *(a1 + 7656))
    {
      v12 = *(a1 + 7648);
    }

    else
    {
      *(a1 + 7656) = v11;
      BrotliFree(a1 + 144, *(a1 + 7648));
      *(a1 + 7648) = 0;
      v13 = BrotliAllocate(a1 + 144);
      *(a1 + 7648) = v13;
      if (*(a1 + 168))
      {
        return 0;
      }

      v12 = v13;
    }
  }

  else
  {
    v12 = (a1 + 3552);
  }

  *a4 = v11;
  bzero(v12, 4 * v11);
  return v12;
}

BOOL UpdateLastProcessedPos(uint64_t a1)
{
  v1 = *(a1 + 2344);
  if (v1 >> 30 >= 3)
  {
    LODWORD(v1) = (((2 * v1) >> 1) & 0xC0000000 | v1 & 0x3FFFFFFF) ^ 0x80000000;
  }

  v2 = *(a1 + 2248);
  v3 = (((2 * v2) >> 1) & 0xC0000000 | v2 & 0x3FFFFFFF) ^ 0x80000000;
  if (v2 <= 0xBFFFFFFF)
  {
    v3 = *(a1 + 2248);
  }

  *(a1 + 2344) = v2;
  return v3 < v1;
}

uint64_t ExtendLastCommand(uint64_t result, _DWORD *a2, _DWORD *a3)
{
  v3 = *(result + 2304) + 16 * *(result + 2312);
  v4 = *(v3 - 12);
  v5 = v4 & 0x1FFFFFF;
  if (*(result + 2344) - (v4 & 0x1FFFFFF) >= (1 << *(result + 8)) - 16)
  {
    v6 = (1 << *(result + 8)) - 16;
  }

  else
  {
    v6 = *(result + 2344) - (v4 & 0x1FFFFFF);
  }

  v7 = *(result + 2352);
  v8 = *(v3 - 2);
  v9 = v8 & 0x3FF;
  v10 = *(result + 68);
  if (v9 >= v10 + 16)
  {
    v9 = v10 + 16 + ((v9 - v10 - 16) & ~(-1 << *(result + 64))) + ((*(v3 - 8) + ((((v9 - v10 - 16) >> *(result + 64)) & 1 | 2) << (v8 >> 10)) - 4) << *(result + 64));
  }

  if (v9 < 0x10 || v9 - 15 == v7)
  {
    if (v6 >= v7 && *a2)
    {
      v12 = *(result + 2288);
      v13 = *(result + 2260);
      v14 = *a3;
      while (1)
      {
        v15 = *(v12 + (v14 & v13));
        v16 = *(v12 + ((v14 - v7) & v13));
        v4 = *(v3 - 12);
        if (v15 != v16)
        {
          break;
        }

        *(v3 - 12) = v4 + 1;
        --*a2;
        v14 = (*a3 + 1);
        *a3 = v14;
        if (!*a2)
        {
          v4 = *(v3 - 12);
          break;
        }
      }

      v5 = v4 & 0x1FFFFFF;
    }

    v17 = *(v3 - 16);
    v18 = v5 + (v4 >> 25);
    v19 = v8 & 0x3FF;
    if (v17 > 5)
    {
      if (v17 > 0x81)
      {
        if (v17 > 0x841)
        {
          v21 = v17 >> 1;
          if (v17 < 0x5842)
          {
            LOWORD(v17) = 22;
          }

          else
          {
            LOWORD(v17) = 23;
          }

          if (v21 < 0xC21)
          {
            LOWORD(v17) = 21;
          }
        }

        else
        {
          LODWORD(v17) = (__clz(v17 - 66) ^ 0x1F) + 10;
        }
      }

      else
      {
        v17 -= 2;
        v20 = (__clz(v17) ^ 0x1F) - 1;
        LODWORD(v17) = (v17 >> v20) + 2 * v20 + 2;
      }
    }

    if (v18 > 9)
    {
      v23 = (__clz(v18 - 70) ^ 0x1F) + 12;
      if (v18 <= 0x845)
      {
        v22 = v23;
      }

      else
      {
        v22 = 23;
      }

      v24 = (__clz(v18 - 6) ^ 0x1F) - 1;
      if (v18 <= 0x85)
      {
        v22 = ((v18 - 6) >> v24) + 2 * v24 + 4;
      }
    }

    else
    {
      v22 = v18 - 2;
    }

    v25 = v22 & 7 | (8 * (v17 & 7));
    if (v19 || v17 > 7u || v22 > 0xFu)
    {
      v27 = 3 * (v17 >> 3) + ((v22 & 0xFFF8) >> 3);
      v26 = ((((0x520D40u >> (2 * v27)) & 0xC0) + (v27 << 6)) | v25) + 64;
    }

    else
    {
      LOWORD(v26) = v25 | 0x40;
      if ((v22 & 0xFFF8) == 0)
      {
        LOWORD(v26) = v22 & 7 | (8 * (v17 & 7));
      }
    }

    *(v3 - 4) = v26;
  }

  return result;
}

void WriteMetaBlockInternal(uint64_t a1, uint64_t a2, size_t a3, unint64_t a4, unint64_t a5, unsigned int a6, unsigned int a7, uint64_t a8, unsigned __int8 a9, unsigned __int8 a10, unint64_t a11, unint64_t a12, unsigned int *a13, _OWORD *a14, _OWORD *a15, unint64_t *a16, char *a17)
{
  if (a4 >> 30 < 3)
  {
    v22 = a4;
  }

  else
  {
    v22 = (((2 * a4) >> 1) & 0xC0000000 | a4 & 0x3FFFFFFF) ^ 0x80000000;
  }

  v23 = *(a8 + 112);
  v53 = *(a8 + 96);
  v54 = v23;
  v55 = *(a8 + 128);
  v24 = *(a8 + 48);
  v50[2] = *(a8 + 32);
  v50[3] = v24;
  v25 = *(a8 + 80);
  v51 = *(a8 + 64);
  v52 = v25;
  v26 = *(a8 + 16);
  v50[0] = *a8;
  v50[1] = v26;
  if (!a5)
  {
    v29 = *a16;
    *&a17[*a16 >> 3] = (3 << (*a16 & 7)) | a17[*a16 >> 3];
    *a16 = (v29 + 9) & 0xFFFFFFF8;
    return;
  }

  if (ShouldCompress(a2, a3, a4, a5, a11, a12))
  {
    v37 = a17[1];
    v35 = *a17;
    v36 = *a16;
    v27 = *(a8 + 4);
    if (v27 <= 2)
    {
      v28 = a6;
      BrotliStoreMetaBlockFast(a1, a2, v22, a5, a3, a6, a8, a13, a12, a16, a17);
      goto LABEL_14;
    }

    if (v27 == 3)
    {
      v28 = a6;
      BrotliStoreMetaBlockTrivial(a1, a2, v22, a5, a3, a6, a8, a13, a12, a16, a17);
LABEL_14:
      if (*(a1 + 24))
      {
        return;
      }

      goto LABEL_15;
    }

    v48 = 0u;
    v49 = 0u;
    v46 = 0u;
    v47 = 0u;
    v45 = 0u;
    memset(v44, 0, sizeof(v44));
    memset(v43, 0, sizeof(v43));
    memset(v42, 0, sizeof(v42));
    BrotliInitBlockSplit(v42);
    BrotliInitBlockSplit(v43);
    BrotliInitBlockSplit(v44);
    v48 = 0u;
    v49 = 0u;
    v46 = 0u;
    v47 = 0u;
    v45 = 0u;
    v30 = *(a8 + 4);
    if (v30 > 9)
    {
      BrotliBuildMetaBlock(a1, a2, v22, a3, v50, a9, a10, a13, a12, a7, v42);
    }

    else
    {
      v31 = 0;
      v32 = a7 << 9;
      v33 = 1;
      v40 = 0;
      v41 = 1;
      v34 = v22;
      if (!*(a8 + 32))
      {
        DecideOverLiteralContextModeling(a2, v22, a5, a3, v30, *(a8 + 24), &v41, &v40);
        v34 = v22;
        v32 = a7 << 9;
        v31 = v40;
        v33 = v41;
      }

      BrotliBuildMetaBlockGreedy(a1, a2, v34, a3, a9, a10, &_kBrotliContextLookupTable[v32], v33, v31, a13, a12, v42);
    }

    if (!*(a1 + 24))
    {
      if (*(a8 + 4) >= 4)
      {
        BrotliOptimizeHistograms(HIDWORD(v51), v42);
      }

      BrotliStoreMetaBlock(a1, a2, v22, a5, a3, a9, a10, a6, v50, a7, a13, a12, v42, a16, a17);
      if (!*(a1 + 24))
      {
        BrotliDestroyBlockSplit(a1, v42);
        BrotliDestroyBlockSplit(a1, v43);
        BrotliDestroyBlockSplit(a1, v44);
        BrotliFree(a1, v45);
        *&v45 = 0;
        BrotliFree(a1, v46);
        *&v46 = 0;
        BrotliFree(a1, v47);
        *&v47 = 0;
        BrotliFree(a1, v48);
        *&v48 = 0;
        BrotliFree(a1, v49);
        v28 = a6;
LABEL_15:
        if (a5 + 4 < *a16 >> 3)
        {
          *a15 = *a14;
          *a17 = v35;
          a17[1] = v37;
          *a16 = v36;
          BrotliStoreUncompressedMetaBlock(v28, a2, v22, a3, a5, a16, a17);
        }
      }
    }
  }

  else
  {
    *a15 = *a14;

    BrotliStoreUncompressedMetaBlock(a6, a2, v22, a3, a5, a16, a17);
  }
}

void DecideOverLiteralContextModeling(uint64_t a1, uint64_t a2, unint64_t a3, uint64_t a4, int a5, unint64_t a6, uint64_t *a7, uint64_t *a8)
{
  *&v123[4] = *MEMORY[0x29EDCA608];
  if (a3 >= 0x40 && a5 >= 5)
  {
    v9 = a2;
    v11 = a3 + a2;
    v109 = a3 + a2;
    if (a6 >> 20)
    {
      v120 = 0u;
      v119 = 0u;
      v118 = 0u;
      v117 = 0u;
      v116 = 0u;
      v115 = 0u;
      v114 = 0u;
      v113 = 0u;
      bzero(v111, 0x680uLL);
      v12 = v9 + 64;
      v13 = 0.0;
      v14 = 0.0;
      if (v9 + 64 <= v11)
      {
        v15 = 0;
        v16 = v9 + 64;
        v17 = v9;
        do
        {
          if (v17 + 2 < v16)
          {
            v18 = *(a1 + ((v17 + 1) & a4));
            v19 = *(a1 + (v17 & a4));
            for (i = 2; i != 64; ++i)
            {
              v21 = v18;
              v18 = *(a1 + ((v17 + i) & a4));
              v22 = ShouldUseComplexStaticContextMap_kStaticContextMapComplexUTF8[4 * (*(&_kBrotliContextLookupTable + v19 + 1280) | *(&_kBrotliContextLookupTable + v21 + 1024))];
              v23 = (v18 >> 1) & 0x7C;
              ++*(&v113 + v23);
              v24 = &v111[8 * v22];
              v19 = v21;
              ++*(v24 + v23);
            }

            v15 += 62;
          }

          v17 += 4096;
          v16 += 4096;
        }

        while (v16 <= v11);
        v14 = v15;
      }

      v25 = 0;
      v26 = 0;
      v110 = v9;
      do
      {
        v27 = *(&v113 + v25);
        if (v27 > 0xFF)
        {
          v28 = log2(v27);
        }

        else
        {
          v28 = kBrotliLog2Table[v27];
        }

        v29 = *(&v113 + v25 + 4);
        if (v29 > 0xFF)
        {
          v30 = log2(v29);
        }

        else
        {
          v30 = kBrotliLog2Table[v29];
        }

        v25 += 8;
        v26 += v27 + v29;
        v13 = v13 - v27 * v28 - v29 * v30;
      }

      while ((v25 - 8) < 0x78);
      if (v26)
      {
        if (v26 > 0xFF)
        {
          v31 = log2(v26);
        }

        else
        {
          v31 = kBrotliLog2Table[v26];
        }

        v13 = v13 + v26 * v31;
      }

      v32 = 0;
      v33 = 0.0;
      v34 = v111;
      do
      {
        v35 = 0;
        v36 = 0;
        v37 = 0.0;
        do
        {
          v38 = *(v34 + v35);
          if (v38 > 0xFF)
          {
            v39 = log2(v38);
          }

          else
          {
            v39 = kBrotliLog2Table[v38];
          }

          v40 = *(v34 + v35 + 4);
          if (v40 > 0xFF)
          {
            v41 = log2(v40);
          }

          else
          {
            v41 = kBrotliLog2Table[v40];
          }

          v35 += 8;
          v36 += v38 + v40;
          v37 = v37 - v38 * v39 - v40 * v41;
        }

        while ((v35 - 8) < 0x78);
        if (v36)
        {
          if (v36 > 0xFF)
          {
            v42 = log2(v36);
          }

          else
          {
            v42 = kBrotliLog2Table[v36];
          }

          v9 = v110;
          v37 = v37 + v36 * v42;
        }

        else
        {
          v9 = v110;
        }

        v33 = v33 + v37;
        ++v32;
        v34 += 8;
      }

      while (v32 != 13);
      v43 = 1.0 / v14 * v33;
      if (v43 <= 3.0 && 1.0 / v14 * v13 - v43 >= 0.2)
      {
        *a7 = 13;
        v104 = ShouldUseComplexStaticContextMap_kStaticContextMapComplexUTF8;
        goto LABEL_121;
      }
    }

    else
    {
      v12 = a2 + 64;
    }

    v44 = &v113 + 4;
    v45 = &v121 + 4;
    v112 = 0;
    memset(v111, 0, sizeof(v111));
    if (v12 <= v109)
    {
      v46 = ~v9 + v12;
      do
      {
        v47 = v9 + 1;
        if (v9 + 1 < v12)
        {
          v48 = *(&DecideOverLiteralContextModeling_lut + ((*(a1 + (v9 & a4)) >> 4) & 0xC));
          v49 = v46;
          do
          {
            v50 = 3 * v48;
            v48 = *(&DecideOverLiteralContextModeling_lut + ((*(a1 + (v47 & a4)) >> 4) & 0xC));
            ++*(v111 + v48 + v50);
            ++v47;
            --v49;
          }

          while (v49);
        }

        v9 += 4096;
        v12 += 4096;
      }

      while (v12 <= v109);
    }

    v51 = 0;
    v122 = 0;
    v121 = 0;
    v113 = 0uLL;
    *&v114 = 0;
    do
    {
      v52 = *(v111 + v51);
      *(&v121 + v51 % 3u) += v52;
      v53 = v51 - 6;
      if (v51 < 6)
      {
        v53 = v51;
      }

      *(&v113 + v53) += v52;
      ++v51;
    }

    while (v51 != 9);
    v54 = 0;
    v55 = &v121;
    v56 = 1;
    v57 = 0.0;
    while (1)
    {
      v58 = *v55;
      v59 = v58 > 0xFF ? log2(v58) : kBrotliLog2Table[v58];
      v60 = v54 + v58;
      v61 = v57 - v58 * v59;
      if ((v56 & 1) == 0)
      {
        break;
      }

      v62 = *v45;
      if (v62 > 0xFF)
      {
        v63 = log2(v62);
      }

      else
      {
        v63 = kBrotliLog2Table[v62];
      }

      v56 = 0;
      v54 = v60 + v62;
      v57 = v61 - v62 * v63;
      v55 = &v122;
      v45 = v123;
    }

    if (v60)
    {
      if (v60 > 0xFF)
      {
        v64 = log2(v60);
      }

      else
      {
        v64 = kBrotliLog2Table[v60];
      }

      v61 = v61 + v60 * v64;
    }

    v65 = 0;
    v66 = 1;
    v67 = &v113;
    v68 = 0.0;
    while (1)
    {
      v69 = *v67;
      v70 = v69 > 0xFF ? log2(v69) : kBrotliLog2Table[v69];
      v71 = v65 + v69;
      v72 = v68 - v69 * v70;
      if ((v66 & 1) == 0)
      {
        break;
      }

      v73 = *v44;
      if (v73 > 0xFF)
      {
        v74 = log2(v73);
      }

      else
      {
        v74 = kBrotliLog2Table[v73];
      }

      v66 = 0;
      v65 = v71 + v73;
      v68 = v72 - v73 * v74;
      v67 = &v113 + 2;
      v44 = &v113 + 12;
    }

    if (v71)
    {
      if (v71 > 0xFF)
      {
        v75 = log2(v71);
      }

      else
      {
        v75 = kBrotliLog2Table[v71];
      }

      v72 = v72 + v71 * v75;
    }

    v76 = 0;
    v77 = 0;
    v78 = 0.0;
    while (1)
    {
      v79 = *(&v113 + v76 + 12);
      v80 = v79 > 0xFF ? log2(v79) : kBrotliLog2Table[v79];
      v81 = v77 + v79;
      v82 = v78 - v79 * v80;
      if ((v76 + 12) >= 0x14)
      {
        break;
      }

      v83 = *(&v113 + v76 + 16);
      if (v83 > 0xFF)
      {
        v84 = log2(v83);
      }

      else
      {
        v84 = kBrotliLog2Table[v83];
      }

      v77 = v81 + v83;
      v78 = v82 - v83 * v84;
      v76 += 8;
    }

    if (v81)
    {
      if (v81 > 0xFF)
      {
        v85 = log2(v81);
      }

      else
      {
        v85 = kBrotliLog2Table[v81];
      }

      v82 = v82 + v81 * v85;
    }

    v86 = 0;
    v87 = 0.0;
    do
    {
      v88 = 0;
      v89 = 0;
      v90 = v111 + 12 * v86;
      v91 = 1;
      v92 = 0.0;
      while (1)
      {
        v93 = *&v90[v89];
        v94 = v93 > 0xFF ? log2(v93) : kBrotliLog2Table[v93];
        v95 = v88 + v93;
        v96 = v92 - v93 * v94;
        if ((v91 & 1) == 0)
        {
          break;
        }

        v97 = *&v90[v89 | 4];
        if (v97 > 0xFF)
        {
          v98 = log2(v97);
        }

        else
        {
          v98 = kBrotliLog2Table[v97];
        }

        v91 = 0;
        v88 = v95 + v97;
        v92 = v96 - v97 * v98;
        v89 = 8;
      }

      if (v95)
      {
        if (v95 > 0xFF)
        {
          v99 = log2(v95);
        }

        else
        {
          v99 = kBrotliLog2Table[v95];
        }

        v96 = v96 + v95 * v99;
      }

      v87 = v87 + v96;
      ++v86;
    }

    while (v86 != 3);
    v100 = 1.0 / (HIDWORD(v121) + v121 + v122);
    v101 = v61 * v100;
    v102 = (v72 + v82) * v100;
    v103 = v87 * v100;
    if (a5 < 7)
    {
      v103 = v101 * 10.0;
    }

    if (v101 - v102 < 0.2 && v101 - v103 < 0.2)
    {
      v104 = 1;
      v105 = a7;
LABEL_122:
      *v105 = v104;
      return;
    }

    if (v102 - v103 >= 0.02)
    {
      *a7 = 3;
      v104 = &ChooseContextMap_kStaticContextMapContinuation;
    }

    else
    {
      *a7 = 2;
      v104 = &ChooseContextMap_kStaticContextMapSimpleUTF8;
    }

LABEL_121:
    v105 = a8;
    goto LABEL_122;
  }
}

uint64_t lzx_huffman_tree_compute_lookup_from_code_len(unsigned __int8 *a1)
{
  v36 = *MEMORY[0x29EDCA608];
  v2 = *(a1 + 16446);
  bzero(v35, 0x3E0uLL);
  v34 = 0;
  memset(v33, 0, sizeof(v33));
  if (v2 < 1)
  {
    goto LABEL_35;
  }

  v3 = 0;
  v4 = v2 & 0x7FFFFFFF;
  v5 = v4;
  v6 = a1;
  do
  {
    v8 = *v6++;
    v7 = v8;
    ++*(v33 + v8);
    if (v3 <= v8)
    {
      v3 = v7;
    }

    --v5;
  }

  while (v5);
  if (!v3)
  {
LABEL_35:
    memset_pattern16(a1 + 496, &unk_29862E080, 0x20000uLL);
    return 0;
  }

  v9 = 0;
  v32 = 0;
  memset(v31, 0, sizeof(v31));
  for (i = 4; i != 68; i += 4)
  {
    *(v31 + i) = 2 * v9;
    v9 = *(v33 + i) + 2 * v9;
  }

  if (v9 == 0x10000)
  {
    v11 = v35;
    v12 = v4;
    v13 = a1;
    do
    {
      v15 = *v13++;
      v14 = v15;
      if (v15)
      {
        v16 = *(v31 + v14);
        *(v31 + v14) = v16 + 1;
        if (v16 >> v14)
        {
          return 0xFFFFFFFFLL;
        }

        *v11 = v16 << (16 - v14);
      }

      ++v11;
      --v12;
    }

    while (v12);
    bzero(a1 + 496, 0x20000uLL);
    v17 = 0;
    do
    {
      v18 = a1[v17];
      if (a1[v17])
      {
        v19 = 0;
        v20 = v35[v17];
        v21 = ((1 << (16 - v18)) + v20);
        if (v21 <= v20 + 1)
        {
          v21 = v20 + 1;
        }

        v22 = v21 - v20;
        v23 = vdupq_n_s64(v22 - 1);
        v24 = v18 | (32 * v17);
        v25 = (v22 + 7) & 0xFFFFFFFFFFFFFFF8;
        v26 = &a1[2 * v35[v17] + 510];
        do
        {
          v27 = vdupq_n_s64(v19);
          v28 = vmovn_s64(vcgeq_u64(v23, vorrq_s8(v27, xmmword_29862D9D0)));
          if (vuzp1_s8(vuzp1_s16(v28, 6), 6).u8[0])
          {
            *(v26 - 7) = v24;
          }

          if (vuzp1_s8(vuzp1_s16(v28, 6), 6).i8[1])
          {
            *(v26 - 6) = v24;
          }

          if (vuzp1_s8(vuzp1_s16(6, vmovn_s64(vcgeq_u64(v23, vorrq_s8(v27, xmmword_29862D9C0)))), 6).i8[2])
          {
            *(v26 - 5) = v24;
            *(v26 - 4) = v24;
          }

          v29 = vmovn_s64(vcgeq_u64(v23, vorrq_s8(v27, xmmword_29862E070)));
          if (vuzp1_s8(6, vuzp1_s16(v29, 6)).i32[1])
          {
            *(v26 - 3) = v24;
          }

          if (vuzp1_s8(6, vuzp1_s16(v29, 6)).i8[5])
          {
            *(v26 - 2) = v24;
          }

          if (vuzp1_s8(6, vuzp1_s16(6, vmovn_s64(vcgeq_u64(v23, vorrq_s8(v27, xmmword_29862E060))))).i8[6])
          {
            *(v26 - 1) = v24;
            *v26 = v24;
          }

          v19 += 8;
          v26 += 16;
        }

        while (v25 != v19);
      }

      ++v17;
    }

    while (v17 != v4);
    return 0;
  }

  return 0xFFFFFFFFLL;
}

uint64_t lzx_huffman_tree_read_code(_WORD *a1, uint64_t a2, uint64_t a3)
{
  v3 = *(a2 + 24);
  if (v3 <= 48)
  {
    v4 = *(a2 + 8);
    v5 = *a2 + 2;
    v6 = 48 - v3;
    while (v5 <= v4)
    {
      v7 = *(v5 - 2);
      *a2 = v5;
      v8 = v3 + 16;
      v9 = (v7 << v6) | *(a2 + 16);
      *(a2 + 24) = v3 + 16;
      *(a2 + 16) = v9;
      v5 += 2;
      v6 -= 16;
      v10 = v3 < 33;
      v3 += 16;
      if (!v10)
      {
        goto LABEL_7;
      }
    }
  }

  v8 = v3;
LABEL_7:
  v11 = *(a2 + 16);
  v12 = *(a3 + 2 * HIWORD(v11) + 496);
  *a1 = *(a3 + 2 * HIWORD(v11) + 496) >> 5;
  if (*(a3 + 131568) <= v12 >> 5)
  {
    return 0xFFFFFFFFLL;
  }

  v13 = v12 & 0x1F;
  if (!v13)
  {
    return 0xFFFFFFFFLL;
  }

  if (v8 <= 48)
  {
    v14 = *(a2 + 8);
    v15 = *a2 + 2;
    v16 = 48 - v8;
    while (v15 <= v14)
    {
      v17 = *(v15 - 2);
      *a2 = v15;
      v18 = v8 + 16;
      v11 |= v17 << v16;
      *(a2 + 24) = v8 + 16;
      *(a2 + 16) = v11;
      v15 += 2;
      v16 -= 16;
      v10 = v8 < 33;
      v8 += 16;
      if (!v10)
      {
        goto LABEL_15;
      }
    }
  }

  v18 = v8;
LABEL_15:
  if (v18 < v13)
  {
    return 0xFFFFFFFFLL;
  }

  result = 0;
  *(a2 + 16) = v11 << v13;
  *(a2 + 24) = v18 - v13;
  return result;
}

uint64_t lzx_huffman_tree_update_tree_using_pre_tree_encoding(uint64_t a1, uint64_t a2, size_t a3, uint64_t a4, void *a5)
{
  if (lzx_huffman_create_pre_tree(a5, a2))
  {
    return 0xFFFFFFFFLL;
  }

  v11 = a4 + a3;
  while (a3 < v11)
  {
    v43 = 0;
    if (lzx_huffman_tree_read_code(&v43, a2, a5))
    {
      return 0xFFFFFFFFLL;
    }

    if (v43 > 0x10u)
    {
      switch(v43)
      {
        case 0x13u:
          v28 = *(a2 + 24);
          if (v28 > 48)
          {
            v33 = *(a2 + 24);
          }

          else
          {
            v29 = *(a2 + 8);
            v30 = *a2 + 2;
            v31 = 48 - v28;
            while (v30 <= v29)
            {
              v32 = *(v30 - 2);
              *a2 = v30;
              v33 = v28 + 16;
              v34 = (v32 << v31) | *(a2 + 16);
              *(a2 + 24) = v28 + 16;
              *(a2 + 16) = v34;
              v30 += 2;
              v31 -= 16;
              v20 = v28 < 33;
              v28 += 16;
              if (!v20)
              {
                goto LABEL_33;
              }
            }

            v33 = v28;
            if (v28 < 1)
            {
              return 0xFFFFFFFFLL;
            }
          }

LABEL_33:
          v37 = *(a2 + 16);
          *(a2 + 16) = 2 * v37;
          *(a2 + 24) = v33 - 1;
          v38 = (v37 >> 63) | 4;
          if (v38 + a3 > v11)
          {
            return 0xFFFFFFFFLL;
          }

          v42 = 0;
          if (lzx_huffman_tree_read_code(&v42, a2, a5) || v42 >= 0x11u)
          {
            return 0xFFFFFFFFLL;
          }

          v39 = *(a1 + a3);
          if (v39 < v42)
          {
            v39 += 17;
          }

          memset((a1 + a3), v39 - v42, v38);
          a3 += v38;
          break;
        case 0x12u:
          v21 = *(a2 + 24);
          if (v21 > 48)
          {
            v26 = *(a2 + 24);
          }

          else
          {
            v22 = *(a2 + 8);
            v23 = *a2 + 2;
            v24 = 48 - v21;
            while (v23 <= v22)
            {
              v25 = *(v23 - 2);
              *a2 = v23;
              v26 = v21 + 16;
              v27 = (v25 << v24) | *(a2 + 16);
              *(a2 + 24) = v21 + 16;
              *(a2 + 16) = v27;
              v23 += 2;
              v24 -= 16;
              v20 = v21 < 33;
              v21 += 16;
              if (!v20)
              {
                goto LABEL_31;
              }
            }

            v26 = v21;
            if (v21 < 5)
            {
              return 0xFFFFFFFFLL;
            }
          }

LABEL_31:
          v35 = *(a2 + 16);
          *(a2 + 16) = 32 * v35;
          *(a2 + 24) = v26 - 5;
          v36 = (v35 >> 59) + 20;
          goto LABEL_41;
        case 0x11u:
          v13 = *(a2 + 24);
          if (v13 > 48)
          {
            v18 = *(a2 + 24);
          }

          else
          {
            v14 = *(a2 + 8);
            v15 = *a2 + 2;
            v16 = 48 - v13;
            while (v15 <= v14)
            {
              v17 = *(v15 - 2);
              *a2 = v15;
              v18 = v13 + 16;
              v19 = (v17 << v16) | *(a2 + 16);
              *(a2 + 24) = v13 + 16;
              *(a2 + 16) = v19;
              v15 += 2;
              v16 -= 16;
              v20 = v13 < 33;
              v13 += 16;
              if (!v20)
              {
                goto LABEL_40;
              }
            }

            v18 = v13;
            if (v13 < 4)
            {
              return 0xFFFFFFFFLL;
            }
          }

LABEL_40:
          v40 = *(a2 + 16);
          *(a2 + 16) = 16 * v40;
          *(a2 + 24) = v18 - 4;
          v36 = (v40 >> 60) + 4;
LABEL_41:
          v41 = v36 + a3;
          if (v36 + a3 > v11)
          {
            return 0xFFFFFFFFLL;
          }

          bzero((a1 + a3), v36);
          a3 = v41;
          break;
      }
    }

    else
    {
      v12 = *(a1 + a3);
      if (v12 < v43)
      {
        LOBYTE(v12) = v12 + 17;
      }

      *(a1 + a3++) = v12 - v43;
    }
  }

  if (a3 == v11)
  {
    return 0;
  }

  else
  {
    return 0xFFFFFFFFLL;
  }
}

uint64_t lzx_huffman_create_pre_tree(void *a1, uint64_t a2)
{
  bzero(a1, 0x201F0uLL);
  v4 = 0;
  a1[16446] = 20;
  while (1)
  {
    v5 = *(a2 + 24);
    if (v5 <= 48)
    {
      break;
    }

    v10 = *(a2 + 24);
LABEL_9:
    v13 = *(a2 + 16);
    *(a2 + 16) = 16 * v13;
    *(a2 + 24) = v10 - 4;
    *(a1 + v4++) = v13 >> 60;
    if (v4 >= a1[16446])
    {
      lzx_huffman_tree_compute_lookup_from_code_len(a1);
      return 0;
    }
  }

  v6 = *(a2 + 8);
  v7 = *a2 + 2;
  v8 = 48 - v5;
  while (v7 <= v6)
  {
    v9 = *(v7 - 2);
    *a2 = v7;
    v10 = v5 + 16;
    v11 = (v9 << v8) | *(a2 + 16);
    *(a2 + 24) = v5 + 16;
    *(a2 + 16) = v11;
    v7 += 2;
    v8 -= 16;
    v12 = v5 < 33;
    v5 += 16;
    if (!v12)
    {
      goto LABEL_9;
    }
  }

  v10 = v5;
  if (v5 >= 4)
  {
    goto LABEL_9;
  }

  return 0xFFFFFFFFLL;
}

uint64_t BrotliCompressFragmentFast(uint64_t result, unsigned __int8 *a2, unint64_t a3, int a4, uint64_t a5, unsigned int a6, unsigned __int8 *a7, uint64_t a8, unint64_t *a9, _BYTE *a10, unint64_t *a11, uint64_t a12)
{
  v12 = *a11;
  if (!a3)
  {
    goto LABEL_15;
  }

  v16 = __clz(a6) ^ 0x1F;
  if (v16 > 12)
  {
    if (v16 == 13)
    {
      result = BrotliCompressFragmentFastImpl13(result, a2, a3, a4, a5, a7, a8, a9, a10, a11, a12);
    }

    else if (v16 == 15)
    {
      result = BrotliCompressFragmentFastImpl15(result, a2, a3, a4, a5, a7, a8, a9, a10, a11, a12);
    }
  }

  else if (v16 == 9)
  {
    result = BrotliCompressFragmentFastImpl9(result, a2, a3, a4, a5, a7, a8, a9, a10, a11, a12);
  }

  else if (v16 == 11)
  {
    result = BrotliCompressFragmentFastImpl11(result, a2, a3, a4, a5, a7, a8, a9, a10, a11, a12);
  }

  if (*a11 - v12 > 8 * a3 + 31)
  {
    result = EmitUncompressedMetaBlock(a2, &a2[a3], v12, a11, a12);
  }

  if (a4)
  {
    v12 = *a11;
LABEL_15:
    *(a12 + (v12 >> 3)) = (1 << (v12 & 7)) | *(a12 + (v12 >> 3));
    *a11 = v12 + 1;
    *(a12 + ((v12 + 1) >> 3)) = (1 << ((v12 + 1) & 7)) | *(a12 + ((v12 + 1) >> 3));
    *a11 = (v12 + 9) & 0xFFFFFFF8;
  }

  return result;
}

unint64_t BrotliCompressFragmentFastImpl9(uint64_t a1, unsigned __int8 *a2, unint64_t a3, int a4, uint64_t a5, unsigned __int8 *a6, uint64_t a7, unint64_t *a8, _BYTE *a9, unint64_t *a10, uint64_t a11)
{
  v206 = *MEMORY[0x29EDCA608];
  v202 = a3;
  if (a3 >= 0x18000)
  {
    v14 = 98304;
  }

  else
  {
    v14 = a3;
  }

  v197 = *a10;
  BrotliStoreMetaBlockHeader(v14, 0, a10, a11);
  v15 = *a10;
  *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
  *a10 = v15 + 13;
  v201 = v14;
  result = BuildAndStoreLiteralPrefixCode(a1, a2, v14, v204, v203, a10, a11);
  v195 = a1;
  if (*(a1 + 24))
  {
    return result;
  }

  v193 = result;
  v17 = *a8;
  v18 = *a10;
  if (*a8 >= 8)
  {
    v19 = 0;
    do
    {
      *(a11 + (v18 >> 3)) = (a9[v19 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
      v18 += 8;
      *a10 = v18;
      v20 = v19 + 15;
      v19 += 8;
      v17 = *a8;
    }

    while (v20 < *a8);
  }

  *(a11 + (v18 >> 3)) = (a9[v17 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
  *a10 = v18 + (v17 & 7);
  v21 = a2;
  while (1)
  {
    v200 = v201;
    v22 = v21;
    v194 = v21;
    while (1)
    {
      result = memcpy(__dst, &kCmdHistoSeed, sizeof(__dst));
      v23 = v200;
      v24 = &v21[v200];
      if (v200 >= 0x10)
      {
        v25 = v200 - 5;
        if (v200 - 5 >= v202 - 16)
        {
          v25 = v202 - 16;
        }

        v26 = &v21[v25];
        v27 = -1;
        v196 = v21;
        v28 = v21;
LABEL_15:
        v30 = *(v28 + 1);
        v29 = v28 + 1;
        v31 = (0x1E35A7BD000000 * v30) >> 55;
        v32 = 32;
        while (1)
        {
          v33 = &v29[v32 >> 5];
          if (v33 > v26)
          {
            break;
          }

          ++v32;
          v34 = v31;
          v21 = v29;
          while (1)
          {
            v29 = v33;
            v31 = (0x1E35A7BD000000 * *v33) >> 55;
            v35 = &v21[-v27];
            if (*v21 == *v35 && v21[4] == v35[4] && v27 >= 1)
            {
              break;
            }

            v35 = &a2[*(a5 + 4 * v34)];
            *(a5 + 4 * v34) = v21 - a2;
            if (*v21 == *v35 && v21[4] == v35[4])
            {
              goto LABEL_28;
            }

            v33 = &v29[v32++ >> 5];
            v34 = v31;
            v21 = v29;
            if (v33 > v26)
            {
              goto LABEL_99;
            }
          }

          *(a5 + 4 * v34) = v21 - a2;
LABEL_28:
          v37 = v21 - v35;
          if (v21 - v35 <= 262128)
          {
            v38 = v35 + 5;
            v39 = v21 + 5;
            v40 = v24 - v21 - 5;
            if (v40 < 8)
            {
              v43 = 0;
LABEL_88:
              v148 = v40 & 7;
              if (v148)
              {
                v149 = v43 | v148;
                while (v38[v43] == *v39)
                {
                  ++v39;
                  ++v43;
                  if (!--v148)
                  {
                    v43 = v149;
                    break;
                  }
                }
              }
            }

            else
            {
              v41 = 0;
              v42 = v40 >> 3;
              v43 = v40 & 0xFFFFFFFFFFFFFFF8;
              while (1)
              {
                v44 = *&v39[v41];
                v45 = *&v38[v41];
                if (v44 != v45)
                {
                  break;
                }

                v41 += 8;
                if (!--v42)
                {
                  v39 += v40 & 0xFFFFFFFFFFFFFFF8;
                  goto LABEL_88;
                }
              }

              v43 = v41 + (__clz(__rbit64(v45 ^ v44)) >> 3);
            }

            v46 = v21 - v22;
            if ((v21 - v22) >> 1 > 0xC20)
            {
              if (50 * (v22 - v194) <= v46 && v193 >= 0x3D5)
              {
                result = EmitUncompressedMetaBlock(v194, v21, v197, a10, a11);
                v163 = &v196[v202] - v21;
                goto LABEL_137;
              }

              if (v46 > 0x5841)
              {
                v153 = a6[63];
                v154 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 126) << result) | *(a11 + (*a10 >> 3));
                v155 = v154 + v153;
                *a10 = v155;
                *(a11 + (v155 >> 3)) = ((v46 - 22594) << (v155 & 7)) | *(a11 + (v155 >> 3));
                v50 = v155 + 24;
                *a10 = v50;
                v51 = &__dst[63];
              }

              else
              {
                v150 = a6[62];
                v151 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 124) << result) | *(a11 + (*a10 >> 3));
                v152 = v151 + v150;
                *a10 = v152;
                *(a11 + (v152 >> 3)) = ((v46 - 6210) << (v152 & 7)) | *(a11 + (v152 >> 3));
                v50 = v152 + 14;
                *a10 = v50;
                v51 = &__dst[62];
              }
            }

            else if (v46 > 5)
            {
              if (v46 > 0x81)
              {
                if (v46 > 0x841)
                {
                  v62 = a6[61];
                  v63 = *a10;
                  result = *a10 & 7;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 122) << result) | *(a11 + (*a10 >> 3));
                  v64 = v63 + v62;
                  *a10 = v64;
                  *(a11 + (v64 >> 3)) = ((v46 - 2114) << (v64 & 7)) | *(a11 + (v64 >> 3));
                  v50 = v64 + 12;
                  *a10 = v50;
                  v51 = &__dst[61];
                }

                else
                {
                  v58 = __clz(v46 - 66) ^ 0x1F;
                  v59 = a6[v58 + 50];
                  v60 = *a10;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v58 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                  v61 = v60 + v59;
                  *a10 = v61;
                  result = *(a11 + (v61 >> 3));
                  *(a11 + (v61 >> 3)) = (((-1 << v58) + v46 - 66) << (v61 & 7)) | result;
                  v50 = v61 + v58;
                  *a10 = v61 + v58;
                  v51 = &__dst[v58 + 50];
                }
              }

              else
              {
                v52 = (__clz(v46 - 2) ^ 0x1F) - 1;
                v53 = (v46 - 2) >> v52;
                v54 = v53 + (2 * v52 + 42);
                v55 = a6[v54];
                v56 = *a10;
                v23 = v200;
                *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v54) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                v57 = v56 + v55;
                *a10 = v57;
                result = *(a11 + (v57 >> 3));
                *(a11 + (v57 >> 3)) = ((v46 - 2 - (v53 << v52)) << (v57 & 7)) | result;
                v50 = v57 + v52;
                *a10 = v57 + v52;
                v51 = &__dst[v54];
              }
            }

            else
            {
              v47 = a6[v46 | 0x28];
              v48 = *a10;
              v49 = *a10 >> 3;
              result = *(a11 + v49);
              *(a11 + v49) = (*(a7 + 2 * (v46 | 0x28)) << (*a10 & 7)) | result;
              v50 = v48 + v47;
              *a10 = v50;
              v51 = &__dst[v46 | 0x28];
            }

            ++*v51;
            if (v21 != v22)
            {
              if (v46 <= 1)
              {
                v46 = 1;
              }

              do
              {
                v65 = *v22++;
                v66 = v204[v65];
                result = v50 & 7;
                *(a11 + (v50 >> 3)) = (v203[v65] << (v50 & 7)) | *(a11 + (v50 >> 3));
                v50 += v66;
                *a10 = v50;
                --v46;
              }

              while (v46);
            }

            if (v27 == v37)
            {
              v67 = a6[64];
              *(a11 + (v50 >> 3)) = (*(a7 + 128) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v68 = v50 + v67;
              v69 = &__dst[64];
            }

            else
            {
              v70 = v37 + 3;
              v71 = __clz(v70) ^ 0x1F;
              v72 = v71 - 1;
              v73 = ((v70 >> (v71 - 1)) & 1 | 2) << (v71 - 1);
              v74 = ((2 * v71 - 4) & 0xFFFFFFFE | (v70 >> (v71 - 1)) & 1) + 80;
              v75 = a6[v74];
              result = v50 >> 3;
              *(a11 + (v50 >> 3)) = (*(a7 + 2 * v74) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v76 = v50 + v75;
              *a10 = v76;
              *(a11 + (v76 >> 3)) = ((v70 - v73) << (v76 & 7)) | *(a11 + (v76 >> 3));
              v68 = v76 + v72;
              v69 = &__dst[v74];
              v27 = v37;
            }

            v77 = v43 + 5;
            ++*v69;
            *a10 = v68;
            if (v43 + 5 > 0xB)
            {
              if (v77 > 0x47)
              {
                if (v77 > 0x87)
                {
                  if (v77 > 0x847)
                  {
                    v98 = a6[39];
                    *(a11 + (v68 >> 3)) = (*(a7 + 78) << (v68 & 7)) | *(a11 + (v68 >> 3));
                    v99 = v68 + v98;
                    *a10 = v99;
                    v100 = v99 & 7;
                    *(a11 + (v99 >> 3)) = ((v43 - 2115) << (v99 & 7)) | *(a11 + (v99 >> 3));
                    v101 = v99 + 24;
                    *a10 = v99 + 24;
                    v102 = a6[64];
                    *(a11 + (v101 >> 3)) = (*(a7 + 128) << v100) | *(a11 + (v101 >> 3));
                    *a10 = v101 + v102;
                    ++__dst[39];
                  }

                  else
                  {
                    v92 = v43 - 67;
                    v93 = __clz(v92) ^ 0x1F;
                    v94 = a6[v93 + 28];
                    result = *(a11 + (v68 >> 3));
                    *(a11 + (v68 >> 3)) = (*(a7 + 2 * (v93 + 28)) << (v68 & 7)) | result;
                    v95 = v68 + v94;
                    *a10 = v95;
                    *(a11 + (v95 >> 3)) = (((-1 << v93) + v92) << (v95 & 7)) | *(a11 + (v95 >> 3));
                    v96 = v95 + v93;
                    *a10 = v95 + v93;
                    v97 = a6[64];
                    *(a11 + (v96 >> 3)) = (*(a7 + 128) << (v96 & 7)) | *(a11 + (v96 >> 3));
                    *a10 = v96 + v97;
                    ++__dst[v93 + 28];
                  }
                }

                else
                {
                  v86 = v43 - 3;
                  v87 = (v86 >> 5) + 30;
                  v88 = a6[v87];
                  result = v68 & 7;
                  *(a11 + (v68 >> 3)) = (*(a7 + 2 * v87) << (v68 & 7)) | *(a11 + (v68 >> 3));
                  v89 = v68 + v88;
                  *a10 = v89;
                  *(a11 + (v89 >> 3)) = ((v86 & 0x1F) << (v89 & 7)) | *(a11 + (v89 >> 3));
                  v90 = v89 + 5;
                  *a10 = v89 + 5;
                  v91 = a6[64];
                  *(a11 + (v90 >> 3)) = (*(a7 + 128) << (v90 & 7)) | *(a11 + (v90 >> 3));
                  *a10 = v90 + v91;
                  ++__dst[v87];
                }

                v80 = &__dst[64];
              }

              else
              {
                v81 = v43 - 3;
                v82 = (__clz(v81) ^ 0x1F) - 1;
                v83 = (v81 >> v82) + (2 * v82 + 4);
                v84 = a6[v83];
                result = v68 >> 3;
                *(a11 + (v68 >> 3)) = (*(a7 + 2 * v83) << (v68 & 7)) | *(a11 + (v68 >> 3));
                v85 = v68 + v84;
                *a10 = v85;
                *(a11 + (v85 >> 3)) = ((v81 - (v81 >> v82 << v82)) << (v85 & 7)) | *(a11 + (v85 >> 3));
                *a10 = v85 + v82;
                v80 = &__dst[v83];
              }
            }

            else
            {
              v78 = v43 + 1;
              v79 = a6[v78];
              *(a11 + (v68 >> 3)) = (*(a7 + 2 * v78) << (v68 & 7)) | *(a11 + (v68 >> 3));
              *a10 = v68 + v79;
              v80 = &__dst[v78];
            }

            v28 = &v21[v77];
            ++*v80;
            if (&v21[v77] >= v26)
            {
LABEL_98:
              v22 = v28;
              break;
            }

            v103 = *(v28 - 3);
            *(a5 + (((0x1E35A7BD000000 * v103) >> 53) & 0x7FC)) = v28 - a2 - 3;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 8)) >> 53) & 0x7FC)) = v28 - a2 - 2;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 16)) >> 53) & 0x7FC)) = v28 - a2 - 1;
            v104 = ((0x1E35A7BD000000 * (v103 >> 24)) >> 53) & 0x7FC;
            v105 = *(a5 + v104);
            *(a5 + v104) = v28 - a2;
            v106 = &a2[v105];
            v22 = v28;
            if (*v28 == *&a2[v105])
            {
              while (1)
              {
                v22 = v28;
                if (v28[4] != v106[4])
                {
                  break;
                }

                v107 = v106 + 5;
                v108 = v28 + 5;
                v109 = v24 - v28 - 5;
                if (v109 < 8)
                {
                  v112 = 0;
LABEL_81:
                  v146 = v109 & 7;
                  if (v146)
                  {
                    v147 = v112 | v146;
                    while (1)
                    {
                      result = *v108;
                      if (v107[v112] != result)
                      {
                        break;
                      }

                      ++v108;
                      ++v112;
                      if (!--v146)
                      {
                        v112 = v147;
                        break;
                      }
                    }
                  }
                }

                else
                {
                  v110 = 0;
                  v111 = v109 >> 3;
                  v112 = v109 & 0xFFFFFFFFFFFFFFF8;
                  result = &v108[v109 & 0xFFFFFFFFFFFFFFF8];
                  while (1)
                  {
                    v113 = *&v108[v110];
                    v114 = *&v107[v110];
                    if (v113 != v114)
                    {
                      break;
                    }

                    v110 += 8;
                    if (!--v111)
                    {
                      v108 += v109 & 0xFFFFFFFFFFFFFFF8;
                      goto LABEL_81;
                    }
                  }

                  v112 = v110 + (__clz(__rbit64(v114 ^ v113)) >> 3);
                }

                v115 = v28 - v106;
                if (v115 <= 262128)
                {
                  v116 = v112 + 5;
                  if (v112 + 5 > 9)
                  {
                    if (v116 > 0x85)
                    {
                      if (v116 > 0x845)
                      {
                        v133 = a6[39];
                        v134 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 78) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v135 = v134 + v133;
                        *a10 = v135;
                        *(a11 + (v135 >> 3)) = ((v112 - 2113) << (v135 & 7)) | *(a11 + (v135 >> 3));
                        v120 = v135 + 24;
                        *a10 = v135 + 24;
                        v121 = &__dst[39];
                      }

                      else
                      {
                        v128 = v112 - 65;
                        v129 = __clz(v128) ^ 0x1F;
                        v130 = a6[v129 + 28];
                        v131 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v129 + 28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v132 = v131 + v130;
                        *a10 = v132;
                        *(a11 + (v132 >> 3)) = (((-1 << v129) + v128) << (v132 & 7)) | *(a11 + (v132 >> 3));
                        v120 = v132 + v129;
                        *a10 = v132 + v129;
                        v121 = &__dst[v129 + 28];
                      }
                    }

                    else
                    {
                      v122 = v112 - 1;
                      v123 = (__clz(v122) ^ 0x1F) - 1;
                      v124 = (v122 >> v123) + (2 * v123 + 20);
                      v125 = a6[v124];
                      v126 = *a10;
                      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v124) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                      v127 = v126 + v125;
                      *a10 = v127;
                      *(a11 + (v127 >> 3)) = ((v122 - (v122 >> v123 << v123)) << (v127 & 7)) | *(a11 + (v127 >> 3));
                      v120 = v127 + v123;
                      *a10 = v127 + v123;
                      v121 = &__dst[v124];
                    }
                  }

                  else
                  {
                    v117 = v112 + 19;
                    v118 = a6[v112 + 19];
                    v119 = *a10;
                    *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v117) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                    v120 = v119 + v118;
                    *a10 = v120;
                    v121 = &__dst[v117];
                  }

                  v28 += v116;
                  ++*v121;
                  v136 = v115 + 3;
                  v137 = __clz(v136) ^ 0x1F;
                  v138 = v137 - 1;
                  v139 = (v136 >> (v137 - 1)) & 1 | 2;
                  v140 = ((2 * v137 - 4) & 0xFFFFFFFE | (v136 >> (v137 - 1)) & 1) + 80;
                  v141 = a6[v140];
                  result = v120 >> 3;
                  *(a11 + (v120 >> 3)) = (*(a7 + 2 * v140) << (v120 & 7)) | *(a11 + (v120 >> 3));
                  v142 = v120 + v141;
                  *a10 = v142;
                  *(a11 + (v142 >> 3)) = ((v136 - (v139 << v138)) << (v142 & 7)) | *(a11 + (v142 >> 3));
                  *a10 = v142 + v138;
                  ++__dst[v140];
                  if (v28 >= v26)
                  {
                    goto LABEL_98;
                  }

                  v27 = v115;
                  v143 = *(v28 - 3);
                  *(a5 + (((0x1E35A7BD000000 * v143) >> 53) & 0x7FC)) = v28 - a2 - 3;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 8)) >> 53) & 0x7FC)) = v28 - a2 - 2;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 16)) >> 53) & 0x7FC)) = v28 - a2 - 1;
                  v144 = ((0x1E35A7BD000000 * (v143 >> 24)) >> 53) & 0x7FC;
                  v145 = *(a5 + v144);
                  *(a5 + v144) = v28 - a2;
                  v106 = &a2[v145];
                  if (*v28 == *&a2[v145])
                  {
                    continue;
                  }
                }

                v22 = v28;
                goto LABEL_15;
              }
            }

            goto LABEL_15;
          }
        }
      }

LABEL_99:
      v156 = v202 - v23;
      v157 = v202 - v23 >= 0x10000 ? 0x10000 : v202 - v23;
      v202 -= v23;
      if (!v156)
      {
        break;
      }

      v201 += v157;
      if (v201 > 0x100000)
      {
        break;
      }

      v21 = v24;
      v200 = v157;
      result = ShouldMergeBlock(v24, v157, v204);
      v24 = v21;
      if (!result)
      {
        break;
      }

      UpdateBits((v201 - 1), v197 + 3, a11);
    }

    if (v22 >= v24)
    {
      goto LABEL_135;
    }

    v158 = v24 - v22;
    if ((v24 - v22) >> 1 > 0xC20)
    {
      result = v194;
      if (50 * (v22 - v194) > v158 || v193 < 0x3D5)
      {
        v179 = (a7 + 126);
        if (v158 < 0x5842)
        {
          v179 = (a7 + 124);
        }

        v180 = a6 + 63;
        if (v158 < 0x5842)
        {
          v180 = a6 + 62;
        }

        v181 = -6210;
        if (v158 >= 0x5842)
        {
          v181 = -22594;
        }

        v182 = 24;
        if (v158 < 0x5842)
        {
          v182 = 14;
        }

        v183 = 63;
        if (v158 < 0x5842)
        {
          v183 = 62;
        }

        v184 = *v180;
        v185 = *a10;
        *(a11 + (*a10 >> 3)) = (*v179 << (*a10 & 7)) | *(a11 + (*a10 >> 3));
        *a10 = v185 + v184;
        *(a11 + ((v185 + v184) >> 3)) = ((v158 + v181) << ((v185 + v184) & 7)) | *(a11 + ((v185 + v184) >> 3));
        v186 = v185 + v184 + v182;
        ++__dst[v183];
        *a10 = v186;
        do
        {
          v187 = *v22++;
          v188 = v204[v187];
          *(a11 + (v186 >> 3)) = (v203[v187] << (v186 & 7)) | *(a11 + (v186 >> 3));
          v186 += v188;
          *a10 = v186;
          --v158;
        }

        while (v158);
LABEL_135:
        v21 = v24;
      }

      else
      {
        v21 = v24;
        result = EmitUncompressedMetaBlock(v194, v24, v197, a10, a11);
      }

      v163 = v202;
      goto LABEL_137;
    }

    if (v158 > 5)
    {
      v163 = v202;
      if (v158 > 0x81)
      {
        if (v158 > 0x841)
        {
          v174 = a6[61];
          v175 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 122) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v176 = v175 + v174;
          *a10 = v176;
          *(a11 + (v176 >> 3)) = ((v158 - 2114) << (v176 & 7)) | *(a11 + (v176 >> 3));
          v161 = v176 + 12;
          *a10 = v161;
          v162 = &__dst[61];
        }

        else
        {
          v170 = __clz(v158 - 66) ^ 0x1F;
          v171 = a6[v170 + 50];
          v172 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v170 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v173 = v172 + v171;
          *a10 = v173;
          *(a11 + (v173 >> 3)) = (((-1 << v170) + v158 - 66) << (v173 & 7)) | *(a11 + (v173 >> 3));
          v161 = v173 + v170;
          *a10 = v173 + v170;
          v162 = &__dst[v170 + 50];
        }
      }

      else
      {
        v164 = (__clz(v158 - 2) ^ 0x1F) - 1;
        v165 = (v158 - 2) >> v164;
        v166 = v165 + (2 * v164 + 42);
        v167 = a6[v166];
        v168 = *a10;
        result = *a10 & 7;
        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v166) << result) | *(a11 + (*a10 >> 3));
        v169 = v168 + v167;
        *a10 = v169;
        *(a11 + (v169 >> 3)) = ((v158 - 2 - (v165 << v164)) << (v169 & 7)) | *(a11 + (v169 >> 3));
        v161 = v169 + v164;
        *a10 = v169 + v164;
        v162 = &__dst[v166];
      }
    }

    else
    {
      v159 = a6[v158 | 0x28];
      v160 = *a10;
      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v158 | 0x28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
      v161 = v160 + v159;
      *a10 = v161;
      v162 = &__dst[v158 | 0x28];
      v163 = v202;
    }

    ++*v162;
    if (v158 <= 1)
    {
      v158 = 1;
    }

    do
    {
      v177 = *v22++;
      v178 = v204[v177];
      *(a11 + (v161 >> 3)) = (v203[v177] << (v161 & 7)) | *(a11 + (v161 >> 3));
      v161 += v178;
      *a10 = v161;
      --v158;
    }

    while (v158);
    v21 = v24;
LABEL_137:
    if (!v163)
    {
      break;
    }

    if (v163 >= 0x18000)
    {
      v189 = 98304;
    }

    else
    {
      v189 = v163;
    }

    v201 = v189;
    v202 = v163;
    v197 = *a10;
    BrotliStoreMetaBlockHeader(v189, 0, a10, a11);
    v190 = *a10;
    *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
    *a10 = v190 + 13;
    result = BuildAndStoreLiteralPrefixCode(v195, v21, v201, v204, v203, a10, a11);
    if (*(v195 + 24))
    {
      return result;
    }

    v193 = result;
    BuildAndStoreCommandPrefixCode(__dst, a6, a7, a10, a11);
  }

  if (!a4)
  {
    *a9 = 0;
    *a8 = 0;
    return BuildAndStoreCommandPrefixCode(__dst, a6, a7, a8, a9);
  }

  return result;
}

unint64_t BrotliCompressFragmentFastImpl11(uint64_t a1, unsigned __int8 *a2, unint64_t a3, int a4, uint64_t a5, unsigned __int8 *a6, uint64_t a7, unint64_t *a8, _BYTE *a9, unint64_t *a10, uint64_t a11)
{
  v206 = *MEMORY[0x29EDCA608];
  v202 = a3;
  if (a3 >= 0x18000)
  {
    v14 = 98304;
  }

  else
  {
    v14 = a3;
  }

  v197 = *a10;
  BrotliStoreMetaBlockHeader(v14, 0, a10, a11);
  v15 = *a10;
  *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
  *a10 = v15 + 13;
  v201 = v14;
  result = BuildAndStoreLiteralPrefixCode(a1, a2, v14, v204, v203, a10, a11);
  v195 = a1;
  if (*(a1 + 24))
  {
    return result;
  }

  v193 = result;
  v17 = *a8;
  v18 = *a10;
  if (*a8 >= 8)
  {
    v19 = 0;
    do
    {
      *(a11 + (v18 >> 3)) = (a9[v19 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
      v18 += 8;
      *a10 = v18;
      v20 = v19 + 15;
      v19 += 8;
      v17 = *a8;
    }

    while (v20 < *a8);
  }

  *(a11 + (v18 >> 3)) = (a9[v17 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
  *a10 = v18 + (v17 & 7);
  v21 = a2;
  while (1)
  {
    v200 = v201;
    v22 = v21;
    v194 = v21;
    while (1)
    {
      result = memcpy(__dst, &kCmdHistoSeed, sizeof(__dst));
      v23 = v200;
      v24 = &v21[v200];
      if (v200 >= 0x10)
      {
        v25 = v200 - 5;
        if (v200 - 5 >= v202 - 16)
        {
          v25 = v202 - 16;
        }

        v26 = &v21[v25];
        v27 = -1;
        v196 = v21;
        v28 = v21;
LABEL_15:
        v30 = *(v28 + 1);
        v29 = v28 + 1;
        v31 = (0x1E35A7BD000000 * v30) >> 53;
        v32 = 32;
        while (1)
        {
          v33 = &v29[v32 >> 5];
          if (v33 > v26)
          {
            break;
          }

          ++v32;
          v34 = v31;
          v21 = v29;
          while (1)
          {
            v29 = v33;
            v31 = (0x1E35A7BD000000 * *v33) >> 53;
            v35 = &v21[-v27];
            if (*v21 == *v35 && v21[4] == v35[4] && v27 >= 1)
            {
              break;
            }

            v35 = &a2[*(a5 + 4 * v34)];
            *(a5 + 4 * v34) = v21 - a2;
            if (*v21 == *v35 && v21[4] == v35[4])
            {
              goto LABEL_28;
            }

            v33 = &v29[v32++ >> 5];
            v34 = v31;
            v21 = v29;
            if (v33 > v26)
            {
              goto LABEL_99;
            }
          }

          *(a5 + 4 * v34) = v21 - a2;
LABEL_28:
          v37 = v21 - v35;
          if (v21 - v35 <= 262128)
          {
            v38 = v35 + 5;
            v39 = v21 + 5;
            v40 = v24 - v21 - 5;
            if (v40 < 8)
            {
              v43 = 0;
LABEL_88:
              v148 = v40 & 7;
              if (v148)
              {
                v149 = v43 | v148;
                while (v38[v43] == *v39)
                {
                  ++v39;
                  ++v43;
                  if (!--v148)
                  {
                    v43 = v149;
                    break;
                  }
                }
              }
            }

            else
            {
              v41 = 0;
              v42 = v40 >> 3;
              v43 = v40 & 0xFFFFFFFFFFFFFFF8;
              while (1)
              {
                v44 = *&v39[v41];
                v45 = *&v38[v41];
                if (v44 != v45)
                {
                  break;
                }

                v41 += 8;
                if (!--v42)
                {
                  v39 += v40 & 0xFFFFFFFFFFFFFFF8;
                  goto LABEL_88;
                }
              }

              v43 = v41 + (__clz(__rbit64(v45 ^ v44)) >> 3);
            }

            v46 = v21 - v22;
            if ((v21 - v22) >> 1 > 0xC20)
            {
              if (50 * (v22 - v194) <= v46 && v193 >= 0x3D5)
              {
                result = EmitUncompressedMetaBlock(v194, v21, v197, a10, a11);
                v163 = &v196[v202] - v21;
                goto LABEL_137;
              }

              if (v46 > 0x5841)
              {
                v153 = a6[63];
                v154 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 126) << result) | *(a11 + (*a10 >> 3));
                v155 = v154 + v153;
                *a10 = v155;
                *(a11 + (v155 >> 3)) = ((v46 - 22594) << (v155 & 7)) | *(a11 + (v155 >> 3));
                v50 = v155 + 24;
                *a10 = v50;
                v51 = &__dst[63];
              }

              else
              {
                v150 = a6[62];
                v151 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 124) << result) | *(a11 + (*a10 >> 3));
                v152 = v151 + v150;
                *a10 = v152;
                *(a11 + (v152 >> 3)) = ((v46 - 6210) << (v152 & 7)) | *(a11 + (v152 >> 3));
                v50 = v152 + 14;
                *a10 = v50;
                v51 = &__dst[62];
              }
            }

            else if (v46 > 5)
            {
              if (v46 > 0x81)
              {
                if (v46 > 0x841)
                {
                  v62 = a6[61];
                  v63 = *a10;
                  result = *a10 & 7;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 122) << result) | *(a11 + (*a10 >> 3));
                  v64 = v63 + v62;
                  *a10 = v64;
                  *(a11 + (v64 >> 3)) = ((v46 - 2114) << (v64 & 7)) | *(a11 + (v64 >> 3));
                  v50 = v64 + 12;
                  *a10 = v50;
                  v51 = &__dst[61];
                }

                else
                {
                  v58 = __clz(v46 - 66) ^ 0x1F;
                  v59 = a6[v58 + 50];
                  v60 = *a10;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v58 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                  v61 = v60 + v59;
                  *a10 = v61;
                  result = *(a11 + (v61 >> 3));
                  *(a11 + (v61 >> 3)) = (((-1 << v58) + v46 - 66) << (v61 & 7)) | result;
                  v50 = v61 + v58;
                  *a10 = v61 + v58;
                  v51 = &__dst[v58 + 50];
                }
              }

              else
              {
                v52 = (__clz(v46 - 2) ^ 0x1F) - 1;
                v53 = (v46 - 2) >> v52;
                v54 = v53 + (2 * v52 + 42);
                v55 = a6[v54];
                v56 = *a10;
                v23 = v200;
                *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v54) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                v57 = v56 + v55;
                *a10 = v57;
                result = *(a11 + (v57 >> 3));
                *(a11 + (v57 >> 3)) = ((v46 - 2 - (v53 << v52)) << (v57 & 7)) | result;
                v50 = v57 + v52;
                *a10 = v57 + v52;
                v51 = &__dst[v54];
              }
            }

            else
            {
              v47 = a6[v46 | 0x28];
              v48 = *a10;
              v49 = *a10 >> 3;
              result = *(a11 + v49);
              *(a11 + v49) = (*(a7 + 2 * (v46 | 0x28)) << (*a10 & 7)) | result;
              v50 = v48 + v47;
              *a10 = v50;
              v51 = &__dst[v46 | 0x28];
            }

            ++*v51;
            if (v21 != v22)
            {
              if (v46 <= 1)
              {
                v46 = 1;
              }

              do
              {
                v65 = *v22++;
                v66 = v204[v65];
                result = v50 & 7;
                *(a11 + (v50 >> 3)) = (v203[v65] << (v50 & 7)) | *(a11 + (v50 >> 3));
                v50 += v66;
                *a10 = v50;
                --v46;
              }

              while (v46);
            }

            if (v27 == v37)
            {
              v67 = a6[64];
              *(a11 + (v50 >> 3)) = (*(a7 + 128) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v68 = v50 + v67;
              v69 = &__dst[64];
            }

            else
            {
              v70 = v37 + 3;
              v71 = __clz(v70) ^ 0x1F;
              v72 = v71 - 1;
              v73 = ((v70 >> (v71 - 1)) & 1 | 2) << (v71 - 1);
              v74 = ((2 * v71 - 4) & 0xFFFFFFFE | (v70 >> (v71 - 1)) & 1) + 80;
              v75 = a6[v74];
              result = v50 >> 3;
              *(a11 + (v50 >> 3)) = (*(a7 + 2 * v74) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v76 = v50 + v75;
              *a10 = v76;
              *(a11 + (v76 >> 3)) = ((v70 - v73) << (v76 & 7)) | *(a11 + (v76 >> 3));
              v68 = v76 + v72;
              v69 = &__dst[v74];
              v27 = v37;
            }

            v77 = v43 + 5;
            ++*v69;
            *a10 = v68;
            if (v43 + 5 > 0xB)
            {
              if (v77 > 0x47)
              {
                if (v77 > 0x87)
                {
                  if (v77 > 0x847)
                  {
                    v98 = a6[39];
                    *(a11 + (v68 >> 3)) = (*(a7 + 78) << (v68 & 7)) | *(a11 + (v68 >> 3));
                    v99 = v68 + v98;
                    *a10 = v99;
                    v100 = v99 & 7;
                    *(a11 + (v99 >> 3)) = ((v43 - 2115) << (v99 & 7)) | *(a11 + (v99 >> 3));
                    v101 = v99 + 24;
                    *a10 = v99 + 24;
                    v102 = a6[64];
                    *(a11 + (v101 >> 3)) = (*(a7 + 128) << v100) | *(a11 + (v101 >> 3));
                    *a10 = v101 + v102;
                    ++__dst[39];
                  }

                  else
                  {
                    v92 = v43 - 67;
                    v93 = __clz(v92) ^ 0x1F;
                    v94 = a6[v93 + 28];
                    result = *(a11 + (v68 >> 3));
                    *(a11 + (v68 >> 3)) = (*(a7 + 2 * (v93 + 28)) << (v68 & 7)) | result;
                    v95 = v68 + v94;
                    *a10 = v95;
                    *(a11 + (v95 >> 3)) = (((-1 << v93) + v92) << (v95 & 7)) | *(a11 + (v95 >> 3));
                    v96 = v95 + v93;
                    *a10 = v95 + v93;
                    v97 = a6[64];
                    *(a11 + (v96 >> 3)) = (*(a7 + 128) << (v96 & 7)) | *(a11 + (v96 >> 3));
                    *a10 = v96 + v97;
                    ++__dst[v93 + 28];
                  }
                }

                else
                {
                  v86 = v43 - 3;
                  v87 = (v86 >> 5) + 30;
                  v88 = a6[v87];
                  result = v68 & 7;
                  *(a11 + (v68 >> 3)) = (*(a7 + 2 * v87) << (v68 & 7)) | *(a11 + (v68 >> 3));
                  v89 = v68 + v88;
                  *a10 = v89;
                  *(a11 + (v89 >> 3)) = ((v86 & 0x1F) << (v89 & 7)) | *(a11 + (v89 >> 3));
                  v90 = v89 + 5;
                  *a10 = v89 + 5;
                  v91 = a6[64];
                  *(a11 + (v90 >> 3)) = (*(a7 + 128) << (v90 & 7)) | *(a11 + (v90 >> 3));
                  *a10 = v90 + v91;
                  ++__dst[v87];
                }

                v80 = &__dst[64];
              }

              else
              {
                v81 = v43 - 3;
                v82 = (__clz(v81) ^ 0x1F) - 1;
                v83 = (v81 >> v82) + (2 * v82 + 4);
                v84 = a6[v83];
                result = v68 >> 3;
                *(a11 + (v68 >> 3)) = (*(a7 + 2 * v83) << (v68 & 7)) | *(a11 + (v68 >> 3));
                v85 = v68 + v84;
                *a10 = v85;
                *(a11 + (v85 >> 3)) = ((v81 - (v81 >> v82 << v82)) << (v85 & 7)) | *(a11 + (v85 >> 3));
                *a10 = v85 + v82;
                v80 = &__dst[v83];
              }
            }

            else
            {
              v78 = v43 + 1;
              v79 = a6[v78];
              *(a11 + (v68 >> 3)) = (*(a7 + 2 * v78) << (v68 & 7)) | *(a11 + (v68 >> 3));
              *a10 = v68 + v79;
              v80 = &__dst[v78];
            }

            v28 = &v21[v77];
            ++*v80;
            if (&v21[v77] >= v26)
            {
LABEL_98:
              v22 = v28;
              break;
            }

            v103 = *(v28 - 3);
            *(a5 + (((0x1E35A7BD000000 * v103) >> 51) & 0x1FFC)) = v28 - a2 - 3;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 8)) >> 51) & 0x1FFC)) = v28 - a2 - 2;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 16)) >> 51) & 0x1FFC)) = v28 - a2 - 1;
            v104 = ((0x1E35A7BD000000 * (v103 >> 24)) >> 51) & 0x1FFC;
            v105 = *(a5 + v104);
            *(a5 + v104) = v28 - a2;
            v106 = &a2[v105];
            v22 = v28;
            if (*v28 == *&a2[v105])
            {
              while (1)
              {
                v22 = v28;
                if (v28[4] != v106[4])
                {
                  break;
                }

                v107 = v106 + 5;
                v108 = v28 + 5;
                v109 = v24 - v28 - 5;
                if (v109 < 8)
                {
                  v112 = 0;
LABEL_81:
                  v146 = v109 & 7;
                  if (v146)
                  {
                    v147 = v112 | v146;
                    while (1)
                    {
                      result = *v108;
                      if (v107[v112] != result)
                      {
                        break;
                      }

                      ++v108;
                      ++v112;
                      if (!--v146)
                      {
                        v112 = v147;
                        break;
                      }
                    }
                  }
                }

                else
                {
                  v110 = 0;
                  v111 = v109 >> 3;
                  v112 = v109 & 0xFFFFFFFFFFFFFFF8;
                  result = &v108[v109 & 0xFFFFFFFFFFFFFFF8];
                  while (1)
                  {
                    v113 = *&v108[v110];
                    v114 = *&v107[v110];
                    if (v113 != v114)
                    {
                      break;
                    }

                    v110 += 8;
                    if (!--v111)
                    {
                      v108 += v109 & 0xFFFFFFFFFFFFFFF8;
                      goto LABEL_81;
                    }
                  }

                  v112 = v110 + (__clz(__rbit64(v114 ^ v113)) >> 3);
                }

                v115 = v28 - v106;
                if (v115 <= 262128)
                {
                  v116 = v112 + 5;
                  if (v112 + 5 > 9)
                  {
                    if (v116 > 0x85)
                    {
                      if (v116 > 0x845)
                      {
                        v133 = a6[39];
                        v134 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 78) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v135 = v134 + v133;
                        *a10 = v135;
                        *(a11 + (v135 >> 3)) = ((v112 - 2113) << (v135 & 7)) | *(a11 + (v135 >> 3));
                        v120 = v135 + 24;
                        *a10 = v135 + 24;
                        v121 = &__dst[39];
                      }

                      else
                      {
                        v128 = v112 - 65;
                        v129 = __clz(v128) ^ 0x1F;
                        v130 = a6[v129 + 28];
                        v131 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v129 + 28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v132 = v131 + v130;
                        *a10 = v132;
                        *(a11 + (v132 >> 3)) = (((-1 << v129) + v128) << (v132 & 7)) | *(a11 + (v132 >> 3));
                        v120 = v132 + v129;
                        *a10 = v132 + v129;
                        v121 = &__dst[v129 + 28];
                      }
                    }

                    else
                    {
                      v122 = v112 - 1;
                      v123 = (__clz(v122) ^ 0x1F) - 1;
                      v124 = (v122 >> v123) + (2 * v123 + 20);
                      v125 = a6[v124];
                      v126 = *a10;
                      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v124) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                      v127 = v126 + v125;
                      *a10 = v127;
                      *(a11 + (v127 >> 3)) = ((v122 - (v122 >> v123 << v123)) << (v127 & 7)) | *(a11 + (v127 >> 3));
                      v120 = v127 + v123;
                      *a10 = v127 + v123;
                      v121 = &__dst[v124];
                    }
                  }

                  else
                  {
                    v117 = v112 + 19;
                    v118 = a6[v112 + 19];
                    v119 = *a10;
                    *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v117) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                    v120 = v119 + v118;
                    *a10 = v120;
                    v121 = &__dst[v117];
                  }

                  v28 += v116;
                  ++*v121;
                  v136 = v115 + 3;
                  v137 = __clz(v136) ^ 0x1F;
                  v138 = v137 - 1;
                  v139 = (v136 >> (v137 - 1)) & 1 | 2;
                  v140 = ((2 * v137 - 4) & 0xFFFFFFFE | (v136 >> (v137 - 1)) & 1) + 80;
                  v141 = a6[v140];
                  result = v120 >> 3;
                  *(a11 + (v120 >> 3)) = (*(a7 + 2 * v140) << (v120 & 7)) | *(a11 + (v120 >> 3));
                  v142 = v120 + v141;
                  *a10 = v142;
                  *(a11 + (v142 >> 3)) = ((v136 - (v139 << v138)) << (v142 & 7)) | *(a11 + (v142 >> 3));
                  *a10 = v142 + v138;
                  ++__dst[v140];
                  if (v28 >= v26)
                  {
                    goto LABEL_98;
                  }

                  v27 = v115;
                  v143 = *(v28 - 3);
                  *(a5 + (((0x1E35A7BD000000 * v143) >> 51) & 0x1FFC)) = v28 - a2 - 3;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 8)) >> 51) & 0x1FFC)) = v28 - a2 - 2;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 16)) >> 51) & 0x1FFC)) = v28 - a2 - 1;
                  v144 = ((0x1E35A7BD000000 * (v143 >> 24)) >> 51) & 0x1FFC;
                  v145 = *(a5 + v144);
                  *(a5 + v144) = v28 - a2;
                  v106 = &a2[v145];
                  if (*v28 == *&a2[v145])
                  {
                    continue;
                  }
                }

                v22 = v28;
                goto LABEL_15;
              }
            }

            goto LABEL_15;
          }
        }
      }

LABEL_99:
      v156 = v202 - v23;
      v157 = v202 - v23 >= 0x10000 ? 0x10000 : v202 - v23;
      v202 -= v23;
      if (!v156)
      {
        break;
      }

      v201 += v157;
      if (v201 > 0x100000)
      {
        break;
      }

      v21 = v24;
      v200 = v157;
      result = ShouldMergeBlock(v24, v157, v204);
      v24 = v21;
      if (!result)
      {
        break;
      }

      UpdateBits((v201 - 1), v197 + 3, a11);
    }

    if (v22 >= v24)
    {
      goto LABEL_135;
    }

    v158 = v24 - v22;
    if ((v24 - v22) >> 1 > 0xC20)
    {
      result = v194;
      if (50 * (v22 - v194) > v158 || v193 < 0x3D5)
      {
        v179 = (a7 + 126);
        if (v158 < 0x5842)
        {
          v179 = (a7 + 124);
        }

        v180 = a6 + 63;
        if (v158 < 0x5842)
        {
          v180 = a6 + 62;
        }

        v181 = -6210;
        if (v158 >= 0x5842)
        {
          v181 = -22594;
        }

        v182 = 24;
        if (v158 < 0x5842)
        {
          v182 = 14;
        }

        v183 = 63;
        if (v158 < 0x5842)
        {
          v183 = 62;
        }

        v184 = *v180;
        v185 = *a10;
        *(a11 + (*a10 >> 3)) = (*v179 << (*a10 & 7)) | *(a11 + (*a10 >> 3));
        *a10 = v185 + v184;
        *(a11 + ((v185 + v184) >> 3)) = ((v158 + v181) << ((v185 + v184) & 7)) | *(a11 + ((v185 + v184) >> 3));
        v186 = v185 + v184 + v182;
        ++__dst[v183];
        *a10 = v186;
        do
        {
          v187 = *v22++;
          v188 = v204[v187];
          *(a11 + (v186 >> 3)) = (v203[v187] << (v186 & 7)) | *(a11 + (v186 >> 3));
          v186 += v188;
          *a10 = v186;
          --v158;
        }

        while (v158);
LABEL_135:
        v21 = v24;
      }

      else
      {
        v21 = v24;
        result = EmitUncompressedMetaBlock(v194, v24, v197, a10, a11);
      }

      v163 = v202;
      goto LABEL_137;
    }

    if (v158 > 5)
    {
      v163 = v202;
      if (v158 > 0x81)
      {
        if (v158 > 0x841)
        {
          v174 = a6[61];
          v175 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 122) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v176 = v175 + v174;
          *a10 = v176;
          *(a11 + (v176 >> 3)) = ((v158 - 2114) << (v176 & 7)) | *(a11 + (v176 >> 3));
          v161 = v176 + 12;
          *a10 = v161;
          v162 = &__dst[61];
        }

        else
        {
          v170 = __clz(v158 - 66) ^ 0x1F;
          v171 = a6[v170 + 50];
          v172 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v170 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v173 = v172 + v171;
          *a10 = v173;
          *(a11 + (v173 >> 3)) = (((-1 << v170) + v158 - 66) << (v173 & 7)) | *(a11 + (v173 >> 3));
          v161 = v173 + v170;
          *a10 = v173 + v170;
          v162 = &__dst[v170 + 50];
        }
      }

      else
      {
        v164 = (__clz(v158 - 2) ^ 0x1F) - 1;
        v165 = (v158 - 2) >> v164;
        v166 = v165 + (2 * v164 + 42);
        v167 = a6[v166];
        v168 = *a10;
        result = *a10 & 7;
        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v166) << result) | *(a11 + (*a10 >> 3));
        v169 = v168 + v167;
        *a10 = v169;
        *(a11 + (v169 >> 3)) = ((v158 - 2 - (v165 << v164)) << (v169 & 7)) | *(a11 + (v169 >> 3));
        v161 = v169 + v164;
        *a10 = v169 + v164;
        v162 = &__dst[v166];
      }
    }

    else
    {
      v159 = a6[v158 | 0x28];
      v160 = *a10;
      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v158 | 0x28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
      v161 = v160 + v159;
      *a10 = v161;
      v162 = &__dst[v158 | 0x28];
      v163 = v202;
    }

    ++*v162;
    if (v158 <= 1)
    {
      v158 = 1;
    }

    do
    {
      v177 = *v22++;
      v178 = v204[v177];
      *(a11 + (v161 >> 3)) = (v203[v177] << (v161 & 7)) | *(a11 + (v161 >> 3));
      v161 += v178;
      *a10 = v161;
      --v158;
    }

    while (v158);
    v21 = v24;
LABEL_137:
    if (!v163)
    {
      break;
    }

    if (v163 >= 0x18000)
    {
      v189 = 98304;
    }

    else
    {
      v189 = v163;
    }

    v201 = v189;
    v202 = v163;
    v197 = *a10;
    BrotliStoreMetaBlockHeader(v189, 0, a10, a11);
    v190 = *a10;
    *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
    *a10 = v190 + 13;
    result = BuildAndStoreLiteralPrefixCode(v195, v21, v201, v204, v203, a10, a11);
    if (*(v195 + 24))
    {
      return result;
    }

    v193 = result;
    BuildAndStoreCommandPrefixCode(__dst, a6, a7, a10, a11);
  }

  if (!a4)
  {
    *a9 = 0;
    *a8 = 0;
    return BuildAndStoreCommandPrefixCode(__dst, a6, a7, a8, a9);
  }

  return result;
}

unint64_t BrotliCompressFragmentFastImpl13(uint64_t a1, unsigned __int8 *a2, unint64_t a3, int a4, uint64_t a5, unsigned __int8 *a6, uint64_t a7, unint64_t *a8, _BYTE *a9, unint64_t *a10, uint64_t a11)
{
  v206 = *MEMORY[0x29EDCA608];
  v202 = a3;
  if (a3 >= 0x18000)
  {
    v14 = 98304;
  }

  else
  {
    v14 = a3;
  }

  v197 = *a10;
  BrotliStoreMetaBlockHeader(v14, 0, a10, a11);
  v15 = *a10;
  *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
  *a10 = v15 + 13;
  v201 = v14;
  result = BuildAndStoreLiteralPrefixCode(a1, a2, v14, v204, v203, a10, a11);
  v195 = a1;
  if (*(a1 + 24))
  {
    return result;
  }

  v193 = result;
  v17 = *a8;
  v18 = *a10;
  if (*a8 >= 8)
  {
    v19 = 0;
    do
    {
      *(a11 + (v18 >> 3)) = (a9[v19 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
      v18 += 8;
      *a10 = v18;
      v20 = v19 + 15;
      v19 += 8;
      v17 = *a8;
    }

    while (v20 < *a8);
  }

  *(a11 + (v18 >> 3)) = (a9[v17 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
  *a10 = v18 + (v17 & 7);
  v21 = a2;
  while (1)
  {
    v200 = v201;
    v22 = v21;
    v194 = v21;
    while (1)
    {
      result = memcpy(__dst, &kCmdHistoSeed, sizeof(__dst));
      v23 = v200;
      v24 = &v21[v200];
      if (v200 >= 0x10)
      {
        v25 = v200 - 5;
        if (v200 - 5 >= v202 - 16)
        {
          v25 = v202 - 16;
        }

        v26 = &v21[v25];
        v27 = -1;
        v196 = v21;
        v28 = v21;
LABEL_15:
        v30 = *(v28 + 1);
        v29 = v28 + 1;
        v31 = (0x1E35A7BD000000 * v30) >> 51;
        v32 = 32;
        while (1)
        {
          v33 = &v29[v32 >> 5];
          if (v33 > v26)
          {
            break;
          }

          ++v32;
          v34 = v31;
          v21 = v29;
          while (1)
          {
            v29 = v33;
            v31 = (0x1E35A7BD000000 * *v33) >> 51;
            v35 = &v21[-v27];
            if (*v21 == *v35 && v21[4] == v35[4] && v27 >= 1)
            {
              break;
            }

            v35 = &a2[*(a5 + 4 * v34)];
            *(a5 + 4 * v34) = v21 - a2;
            if (*v21 == *v35 && v21[4] == v35[4])
            {
              goto LABEL_28;
            }

            v33 = &v29[v32++ >> 5];
            v34 = v31;
            v21 = v29;
            if (v33 > v26)
            {
              goto LABEL_99;
            }
          }

          *(a5 + 4 * v34) = v21 - a2;
LABEL_28:
          v37 = v21 - v35;
          if (v21 - v35 <= 262128)
          {
            v38 = v35 + 5;
            v39 = v21 + 5;
            v40 = v24 - v21 - 5;
            if (v40 < 8)
            {
              v43 = 0;
LABEL_88:
              v148 = v40 & 7;
              if (v148)
              {
                v149 = v43 | v148;
                while (v38[v43] == *v39)
                {
                  ++v39;
                  ++v43;
                  if (!--v148)
                  {
                    v43 = v149;
                    break;
                  }
                }
              }
            }

            else
            {
              v41 = 0;
              v42 = v40 >> 3;
              v43 = v40 & 0xFFFFFFFFFFFFFFF8;
              while (1)
              {
                v44 = *&v39[v41];
                v45 = *&v38[v41];
                if (v44 != v45)
                {
                  break;
                }

                v41 += 8;
                if (!--v42)
                {
                  v39 += v40 & 0xFFFFFFFFFFFFFFF8;
                  goto LABEL_88;
                }
              }

              v43 = v41 + (__clz(__rbit64(v45 ^ v44)) >> 3);
            }

            v46 = v21 - v22;
            if ((v21 - v22) >> 1 > 0xC20)
            {
              if (50 * (v22 - v194) <= v46 && v193 >= 0x3D5)
              {
                result = EmitUncompressedMetaBlock(v194, v21, v197, a10, a11);
                v163 = &v196[v202] - v21;
                goto LABEL_137;
              }

              if (v46 > 0x5841)
              {
                v153 = a6[63];
                v154 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 126) << result) | *(a11 + (*a10 >> 3));
                v155 = v154 + v153;
                *a10 = v155;
                *(a11 + (v155 >> 3)) = ((v46 - 22594) << (v155 & 7)) | *(a11 + (v155 >> 3));
                v50 = v155 + 24;
                *a10 = v50;
                v51 = &__dst[63];
              }

              else
              {
                v150 = a6[62];
                v151 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 124) << result) | *(a11 + (*a10 >> 3));
                v152 = v151 + v150;
                *a10 = v152;
                *(a11 + (v152 >> 3)) = ((v46 - 6210) << (v152 & 7)) | *(a11 + (v152 >> 3));
                v50 = v152 + 14;
                *a10 = v50;
                v51 = &__dst[62];
              }
            }

            else if (v46 > 5)
            {
              if (v46 > 0x81)
              {
                if (v46 > 0x841)
                {
                  v62 = a6[61];
                  v63 = *a10;
                  result = *a10 & 7;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 122) << result) | *(a11 + (*a10 >> 3));
                  v64 = v63 + v62;
                  *a10 = v64;
                  *(a11 + (v64 >> 3)) = ((v46 - 2114) << (v64 & 7)) | *(a11 + (v64 >> 3));
                  v50 = v64 + 12;
                  *a10 = v50;
                  v51 = &__dst[61];
                }

                else
                {
                  v58 = __clz(v46 - 66) ^ 0x1F;
                  v59 = a6[v58 + 50];
                  v60 = *a10;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v58 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                  v61 = v60 + v59;
                  *a10 = v61;
                  result = *(a11 + (v61 >> 3));
                  *(a11 + (v61 >> 3)) = (((-1 << v58) + v46 - 66) << (v61 & 7)) | result;
                  v50 = v61 + v58;
                  *a10 = v61 + v58;
                  v51 = &__dst[v58 + 50];
                }
              }

              else
              {
                v52 = (__clz(v46 - 2) ^ 0x1F) - 1;
                v53 = (v46 - 2) >> v52;
                v54 = v53 + (2 * v52 + 42);
                v55 = a6[v54];
                v56 = *a10;
                v23 = v200;
                *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v54) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                v57 = v56 + v55;
                *a10 = v57;
                result = *(a11 + (v57 >> 3));
                *(a11 + (v57 >> 3)) = ((v46 - 2 - (v53 << v52)) << (v57 & 7)) | result;
                v50 = v57 + v52;
                *a10 = v57 + v52;
                v51 = &__dst[v54];
              }
            }

            else
            {
              v47 = a6[v46 | 0x28];
              v48 = *a10;
              v49 = *a10 >> 3;
              result = *(a11 + v49);
              *(a11 + v49) = (*(a7 + 2 * (v46 | 0x28)) << (*a10 & 7)) | result;
              v50 = v48 + v47;
              *a10 = v50;
              v51 = &__dst[v46 | 0x28];
            }

            ++*v51;
            if (v21 != v22)
            {
              if (v46 <= 1)
              {
                v46 = 1;
              }

              do
              {
                v65 = *v22++;
                v66 = v204[v65];
                result = v50 & 7;
                *(a11 + (v50 >> 3)) = (v203[v65] << (v50 & 7)) | *(a11 + (v50 >> 3));
                v50 += v66;
                *a10 = v50;
                --v46;
              }

              while (v46);
            }

            if (v27 == v37)
            {
              v67 = a6[64];
              *(a11 + (v50 >> 3)) = (*(a7 + 128) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v68 = v50 + v67;
              v69 = &__dst[64];
            }

            else
            {
              v70 = v37 + 3;
              v71 = __clz(v70) ^ 0x1F;
              v72 = v71 - 1;
              v73 = ((v70 >> (v71 - 1)) & 1 | 2) << (v71 - 1);
              v74 = ((2 * v71 - 4) & 0xFFFFFFFE | (v70 >> (v71 - 1)) & 1) + 80;
              v75 = a6[v74];
              result = v50 >> 3;
              *(a11 + (v50 >> 3)) = (*(a7 + 2 * v74) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v76 = v50 + v75;
              *a10 = v76;
              *(a11 + (v76 >> 3)) = ((v70 - v73) << (v76 & 7)) | *(a11 + (v76 >> 3));
              v68 = v76 + v72;
              v69 = &__dst[v74];
              v27 = v37;
            }

            v77 = v43 + 5;
            ++*v69;
            *a10 = v68;
            if (v43 + 5 > 0xB)
            {
              if (v77 > 0x47)
              {
                if (v77 > 0x87)
                {
                  if (v77 > 0x847)
                  {
                    v98 = a6[39];
                    *(a11 + (v68 >> 3)) = (*(a7 + 78) << (v68 & 7)) | *(a11 + (v68 >> 3));
                    v99 = v68 + v98;
                    *a10 = v99;
                    v100 = v99 & 7;
                    *(a11 + (v99 >> 3)) = ((v43 - 2115) << (v99 & 7)) | *(a11 + (v99 >> 3));
                    v101 = v99 + 24;
                    *a10 = v99 + 24;
                    v102 = a6[64];
                    *(a11 + (v101 >> 3)) = (*(a7 + 128) << v100) | *(a11 + (v101 >> 3));
                    *a10 = v101 + v102;
                    ++__dst[39];
                  }

                  else
                  {
                    v92 = v43 - 67;
                    v93 = __clz(v92) ^ 0x1F;
                    v94 = a6[v93 + 28];
                    result = *(a11 + (v68 >> 3));
                    *(a11 + (v68 >> 3)) = (*(a7 + 2 * (v93 + 28)) << (v68 & 7)) | result;
                    v95 = v68 + v94;
                    *a10 = v95;
                    *(a11 + (v95 >> 3)) = (((-1 << v93) + v92) << (v95 & 7)) | *(a11 + (v95 >> 3));
                    v96 = v95 + v93;
                    *a10 = v95 + v93;
                    v97 = a6[64];
                    *(a11 + (v96 >> 3)) = (*(a7 + 128) << (v96 & 7)) | *(a11 + (v96 >> 3));
                    *a10 = v96 + v97;
                    ++__dst[v93 + 28];
                  }
                }

                else
                {
                  v86 = v43 - 3;
                  v87 = (v86 >> 5) + 30;
                  v88 = a6[v87];
                  result = v68 & 7;
                  *(a11 + (v68 >> 3)) = (*(a7 + 2 * v87) << (v68 & 7)) | *(a11 + (v68 >> 3));
                  v89 = v68 + v88;
                  *a10 = v89;
                  *(a11 + (v89 >> 3)) = ((v86 & 0x1F) << (v89 & 7)) | *(a11 + (v89 >> 3));
                  v90 = v89 + 5;
                  *a10 = v89 + 5;
                  v91 = a6[64];
                  *(a11 + (v90 >> 3)) = (*(a7 + 128) << (v90 & 7)) | *(a11 + (v90 >> 3));
                  *a10 = v90 + v91;
                  ++__dst[v87];
                }

                v80 = &__dst[64];
              }

              else
              {
                v81 = v43 - 3;
                v82 = (__clz(v81) ^ 0x1F) - 1;
                v83 = (v81 >> v82) + (2 * v82 + 4);
                v84 = a6[v83];
                result = v68 >> 3;
                *(a11 + (v68 >> 3)) = (*(a7 + 2 * v83) << (v68 & 7)) | *(a11 + (v68 >> 3));
                v85 = v68 + v84;
                *a10 = v85;
                *(a11 + (v85 >> 3)) = ((v81 - (v81 >> v82 << v82)) << (v85 & 7)) | *(a11 + (v85 >> 3));
                *a10 = v85 + v82;
                v80 = &__dst[v83];
              }
            }

            else
            {
              v78 = v43 + 1;
              v79 = a6[v78];
              *(a11 + (v68 >> 3)) = (*(a7 + 2 * v78) << (v68 & 7)) | *(a11 + (v68 >> 3));
              *a10 = v68 + v79;
              v80 = &__dst[v78];
            }

            v28 = &v21[v77];
            ++*v80;
            if (&v21[v77] >= v26)
            {
LABEL_98:
              v22 = v28;
              break;
            }

            v103 = *(v28 - 3);
            *(a5 + (((0x1E35A7BD000000 * v103) >> 49) & 0x7FFC)) = v28 - a2 - 3;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 8)) >> 49) & 0x7FFC)) = v28 - a2 - 2;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 16)) >> 49) & 0x7FFC)) = v28 - a2 - 1;
            v104 = ((0x1E35A7BD000000 * (v103 >> 24)) >> 49) & 0x7FFC;
            v105 = *(a5 + v104);
            *(a5 + v104) = v28 - a2;
            v106 = &a2[v105];
            v22 = v28;
            if (*v28 == *&a2[v105])
            {
              while (1)
              {
                v22 = v28;
                if (v28[4] != v106[4])
                {
                  break;
                }

                v107 = v106 + 5;
                v108 = v28 + 5;
                v109 = v24 - v28 - 5;
                if (v109 < 8)
                {
                  v112 = 0;
LABEL_81:
                  v146 = v109 & 7;
                  if (v146)
                  {
                    v147 = v112 | v146;
                    while (1)
                    {
                      result = *v108;
                      if (v107[v112] != result)
                      {
                        break;
                      }

                      ++v108;
                      ++v112;
                      if (!--v146)
                      {
                        v112 = v147;
                        break;
                      }
                    }
                  }
                }

                else
                {
                  v110 = 0;
                  v111 = v109 >> 3;
                  v112 = v109 & 0xFFFFFFFFFFFFFFF8;
                  result = &v108[v109 & 0xFFFFFFFFFFFFFFF8];
                  while (1)
                  {
                    v113 = *&v108[v110];
                    v114 = *&v107[v110];
                    if (v113 != v114)
                    {
                      break;
                    }

                    v110 += 8;
                    if (!--v111)
                    {
                      v108 += v109 & 0xFFFFFFFFFFFFFFF8;
                      goto LABEL_81;
                    }
                  }

                  v112 = v110 + (__clz(__rbit64(v114 ^ v113)) >> 3);
                }

                v115 = v28 - v106;
                if (v115 <= 262128)
                {
                  v116 = v112 + 5;
                  if (v112 + 5 > 9)
                  {
                    if (v116 > 0x85)
                    {
                      if (v116 > 0x845)
                      {
                        v133 = a6[39];
                        v134 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 78) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v135 = v134 + v133;
                        *a10 = v135;
                        *(a11 + (v135 >> 3)) = ((v112 - 2113) << (v135 & 7)) | *(a11 + (v135 >> 3));
                        v120 = v135 + 24;
                        *a10 = v135 + 24;
                        v121 = &__dst[39];
                      }

                      else
                      {
                        v128 = v112 - 65;
                        v129 = __clz(v128) ^ 0x1F;
                        v130 = a6[v129 + 28];
                        v131 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v129 + 28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v132 = v131 + v130;
                        *a10 = v132;
                        *(a11 + (v132 >> 3)) = (((-1 << v129) + v128) << (v132 & 7)) | *(a11 + (v132 >> 3));
                        v120 = v132 + v129;
                        *a10 = v132 + v129;
                        v121 = &__dst[v129 + 28];
                      }
                    }

                    else
                    {
                      v122 = v112 - 1;
                      v123 = (__clz(v122) ^ 0x1F) - 1;
                      v124 = (v122 >> v123) + (2 * v123 + 20);
                      v125 = a6[v124];
                      v126 = *a10;
                      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v124) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                      v127 = v126 + v125;
                      *a10 = v127;
                      *(a11 + (v127 >> 3)) = ((v122 - (v122 >> v123 << v123)) << (v127 & 7)) | *(a11 + (v127 >> 3));
                      v120 = v127 + v123;
                      *a10 = v127 + v123;
                      v121 = &__dst[v124];
                    }
                  }

                  else
                  {
                    v117 = v112 + 19;
                    v118 = a6[v112 + 19];
                    v119 = *a10;
                    *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v117) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                    v120 = v119 + v118;
                    *a10 = v120;
                    v121 = &__dst[v117];
                  }

                  v28 += v116;
                  ++*v121;
                  v136 = v115 + 3;
                  v137 = __clz(v136) ^ 0x1F;
                  v138 = v137 - 1;
                  v139 = (v136 >> (v137 - 1)) & 1 | 2;
                  v140 = ((2 * v137 - 4) & 0xFFFFFFFE | (v136 >> (v137 - 1)) & 1) + 80;
                  v141 = a6[v140];
                  result = v120 >> 3;
                  *(a11 + (v120 >> 3)) = (*(a7 + 2 * v140) << (v120 & 7)) | *(a11 + (v120 >> 3));
                  v142 = v120 + v141;
                  *a10 = v142;
                  *(a11 + (v142 >> 3)) = ((v136 - (v139 << v138)) << (v142 & 7)) | *(a11 + (v142 >> 3));
                  *a10 = v142 + v138;
                  ++__dst[v140];
                  if (v28 >= v26)
                  {
                    goto LABEL_98;
                  }

                  v27 = v115;
                  v143 = *(v28 - 3);
                  *(a5 + (((0x1E35A7BD000000 * v143) >> 49) & 0x7FFC)) = v28 - a2 - 3;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 8)) >> 49) & 0x7FFC)) = v28 - a2 - 2;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 16)) >> 49) & 0x7FFC)) = v28 - a2 - 1;
                  v144 = ((0x1E35A7BD000000 * (v143 >> 24)) >> 49) & 0x7FFC;
                  v145 = *(a5 + v144);
                  *(a5 + v144) = v28 - a2;
                  v106 = &a2[v145];
                  if (*v28 == *&a2[v145])
                  {
                    continue;
                  }
                }

                v22 = v28;
                goto LABEL_15;
              }
            }

            goto LABEL_15;
          }
        }
      }

LABEL_99:
      v156 = v202 - v23;
      v157 = v202 - v23 >= 0x10000 ? 0x10000 : v202 - v23;
      v202 -= v23;
      if (!v156)
      {
        break;
      }

      v201 += v157;
      if (v201 > 0x100000)
      {
        break;
      }

      v21 = v24;
      v200 = v157;
      result = ShouldMergeBlock(v24, v157, v204);
      v24 = v21;
      if (!result)
      {
        break;
      }

      UpdateBits((v201 - 1), v197 + 3, a11);
    }

    if (v22 >= v24)
    {
      goto LABEL_135;
    }

    v158 = v24 - v22;
    if ((v24 - v22) >> 1 > 0xC20)
    {
      result = v194;
      if (50 * (v22 - v194) > v158 || v193 < 0x3D5)
      {
        v179 = (a7 + 126);
        if (v158 < 0x5842)
        {
          v179 = (a7 + 124);
        }

        v180 = a6 + 63;
        if (v158 < 0x5842)
        {
          v180 = a6 + 62;
        }

        v181 = -6210;
        if (v158 >= 0x5842)
        {
          v181 = -22594;
        }

        v182 = 24;
        if (v158 < 0x5842)
        {
          v182 = 14;
        }

        v183 = 63;
        if (v158 < 0x5842)
        {
          v183 = 62;
        }

        v184 = *v180;
        v185 = *a10;
        *(a11 + (*a10 >> 3)) = (*v179 << (*a10 & 7)) | *(a11 + (*a10 >> 3));
        *a10 = v185 + v184;
        *(a11 + ((v185 + v184) >> 3)) = ((v158 + v181) << ((v185 + v184) & 7)) | *(a11 + ((v185 + v184) >> 3));
        v186 = v185 + v184 + v182;
        ++__dst[v183];
        *a10 = v186;
        do
        {
          v187 = *v22++;
          v188 = v204[v187];
          *(a11 + (v186 >> 3)) = (v203[v187] << (v186 & 7)) | *(a11 + (v186 >> 3));
          v186 += v188;
          *a10 = v186;
          --v158;
        }

        while (v158);
LABEL_135:
        v21 = v24;
      }

      else
      {
        v21 = v24;
        result = EmitUncompressedMetaBlock(v194, v24, v197, a10, a11);
      }

      v163 = v202;
      goto LABEL_137;
    }

    if (v158 > 5)
    {
      v163 = v202;
      if (v158 > 0x81)
      {
        if (v158 > 0x841)
        {
          v174 = a6[61];
          v175 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 122) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v176 = v175 + v174;
          *a10 = v176;
          *(a11 + (v176 >> 3)) = ((v158 - 2114) << (v176 & 7)) | *(a11 + (v176 >> 3));
          v161 = v176 + 12;
          *a10 = v161;
          v162 = &__dst[61];
        }

        else
        {
          v170 = __clz(v158 - 66) ^ 0x1F;
          v171 = a6[v170 + 50];
          v172 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v170 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v173 = v172 + v171;
          *a10 = v173;
          *(a11 + (v173 >> 3)) = (((-1 << v170) + v158 - 66) << (v173 & 7)) | *(a11 + (v173 >> 3));
          v161 = v173 + v170;
          *a10 = v173 + v170;
          v162 = &__dst[v170 + 50];
        }
      }

      else
      {
        v164 = (__clz(v158 - 2) ^ 0x1F) - 1;
        v165 = (v158 - 2) >> v164;
        v166 = v165 + (2 * v164 + 42);
        v167 = a6[v166];
        v168 = *a10;
        result = *a10 & 7;
        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v166) << result) | *(a11 + (*a10 >> 3));
        v169 = v168 + v167;
        *a10 = v169;
        *(a11 + (v169 >> 3)) = ((v158 - 2 - (v165 << v164)) << (v169 & 7)) | *(a11 + (v169 >> 3));
        v161 = v169 + v164;
        *a10 = v169 + v164;
        v162 = &__dst[v166];
      }
    }

    else
    {
      v159 = a6[v158 | 0x28];
      v160 = *a10;
      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v158 | 0x28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
      v161 = v160 + v159;
      *a10 = v161;
      v162 = &__dst[v158 | 0x28];
      v163 = v202;
    }

    ++*v162;
    if (v158 <= 1)
    {
      v158 = 1;
    }

    do
    {
      v177 = *v22++;
      v178 = v204[v177];
      *(a11 + (v161 >> 3)) = (v203[v177] << (v161 & 7)) | *(a11 + (v161 >> 3));
      v161 += v178;
      *a10 = v161;
      --v158;
    }

    while (v158);
    v21 = v24;
LABEL_137:
    if (!v163)
    {
      break;
    }

    if (v163 >= 0x18000)
    {
      v189 = 98304;
    }

    else
    {
      v189 = v163;
    }

    v201 = v189;
    v202 = v163;
    v197 = *a10;
    BrotliStoreMetaBlockHeader(v189, 0, a10, a11);
    v190 = *a10;
    *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
    *a10 = v190 + 13;
    result = BuildAndStoreLiteralPrefixCode(v195, v21, v201, v204, v203, a10, a11);
    if (*(v195 + 24))
    {
      return result;
    }

    v193 = result;
    BuildAndStoreCommandPrefixCode(__dst, a6, a7, a10, a11);
  }

  if (!a4)
  {
    *a9 = 0;
    *a8 = 0;
    return BuildAndStoreCommandPrefixCode(__dst, a6, a7, a8, a9);
  }

  return result;
}

unint64_t BrotliCompressFragmentFastImpl15(uint64_t a1, unsigned __int8 *a2, unint64_t a3, int a4, uint64_t a5, unsigned __int8 *a6, uint64_t a7, unint64_t *a8, _BYTE *a9, unint64_t *a10, uint64_t a11)
{
  v206 = *MEMORY[0x29EDCA608];
  v202 = a3;
  if (a3 >= 0x18000)
  {
    v14 = 98304;
  }

  else
  {
    v14 = a3;
  }

  v197 = *a10;
  BrotliStoreMetaBlockHeader(v14, 0, a10, a11);
  v15 = *a10;
  *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
  *a10 = v15 + 13;
  v201 = v14;
  result = BuildAndStoreLiteralPrefixCode(a1, a2, v14, v204, v203, a10, a11);
  v195 = a1;
  if (*(a1 + 24))
  {
    return result;
  }

  v193 = result;
  v17 = *a8;
  v18 = *a10;
  if (*a8 >= 8)
  {
    v19 = 0;
    do
    {
      *(a11 + (v18 >> 3)) = (a9[v19 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
      v18 += 8;
      *a10 = v18;
      v20 = v19 + 15;
      v19 += 8;
      v17 = *a8;
    }

    while (v20 < *a8);
  }

  *(a11 + (v18 >> 3)) = (a9[v17 >> 3] << (v18 & 7)) | *(a11 + (v18 >> 3));
  *a10 = v18 + (v17 & 7);
  v21 = a2;
  while (1)
  {
    v200 = v201;
    v22 = v21;
    v194 = v21;
    while (1)
    {
      result = memcpy(__dst, &kCmdHistoSeed, sizeof(__dst));
      v23 = v200;
      v24 = &v21[v200];
      if (v200 >= 0x10)
      {
        v25 = v200 - 5;
        if (v200 - 5 >= v202 - 16)
        {
          v25 = v202 - 16;
        }

        v26 = &v21[v25];
        v27 = -1;
        v196 = v21;
        v28 = v21;
LABEL_15:
        v30 = *(v28 + 1);
        v29 = v28 + 1;
        v31 = (0x1E35A7BD000000 * v30) >> 49;
        v32 = 32;
        while (1)
        {
          v33 = &v29[v32 >> 5];
          if (v33 > v26)
          {
            break;
          }

          ++v32;
          v34 = v31;
          v21 = v29;
          while (1)
          {
            v29 = v33;
            v31 = (0x1E35A7BD000000 * *v33) >> 49;
            v35 = &v21[-v27];
            if (*v21 == *v35 && v21[4] == v35[4] && v27 >= 1)
            {
              break;
            }

            v35 = &a2[*(a5 + 4 * v34)];
            *(a5 + 4 * v34) = v21 - a2;
            if (*v21 == *v35 && v21[4] == v35[4])
            {
              goto LABEL_28;
            }

            v33 = &v29[v32++ >> 5];
            v34 = v31;
            v21 = v29;
            if (v33 > v26)
            {
              goto LABEL_99;
            }
          }

          *(a5 + 4 * v34) = v21 - a2;
LABEL_28:
          v37 = v21 - v35;
          if (v21 - v35 <= 262128)
          {
            v38 = v35 + 5;
            v39 = v21 + 5;
            v40 = v24 - v21 - 5;
            if (v40 < 8)
            {
              v43 = 0;
LABEL_88:
              v148 = v40 & 7;
              if (v148)
              {
                v149 = v43 | v148;
                while (v38[v43] == *v39)
                {
                  ++v39;
                  ++v43;
                  if (!--v148)
                  {
                    v43 = v149;
                    break;
                  }
                }
              }
            }

            else
            {
              v41 = 0;
              v42 = v40 >> 3;
              v43 = v40 & 0xFFFFFFFFFFFFFFF8;
              while (1)
              {
                v44 = *&v39[v41];
                v45 = *&v38[v41];
                if (v44 != v45)
                {
                  break;
                }

                v41 += 8;
                if (!--v42)
                {
                  v39 += v40 & 0xFFFFFFFFFFFFFFF8;
                  goto LABEL_88;
                }
              }

              v43 = v41 + (__clz(__rbit64(v45 ^ v44)) >> 3);
            }

            v46 = v21 - v22;
            if ((v21 - v22) >> 1 > 0xC20)
            {
              if (50 * (v22 - v194) <= v46 && v193 >= 0x3D5)
              {
                result = EmitUncompressedMetaBlock(v194, v21, v197, a10, a11);
                v163 = &v196[v202] - v21;
                goto LABEL_137;
              }

              if (v46 > 0x5841)
              {
                v153 = a6[63];
                v154 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 126) << result) | *(a11 + (*a10 >> 3));
                v155 = v154 + v153;
                *a10 = v155;
                *(a11 + (v155 >> 3)) = ((v46 - 22594) << (v155 & 7)) | *(a11 + (v155 >> 3));
                v50 = v155 + 24;
                *a10 = v50;
                v51 = &__dst[63];
              }

              else
              {
                v150 = a6[62];
                v151 = *a10;
                result = *a10 & 7;
                *(a11 + (*a10 >> 3)) = (*(a7 + 124) << result) | *(a11 + (*a10 >> 3));
                v152 = v151 + v150;
                *a10 = v152;
                *(a11 + (v152 >> 3)) = ((v46 - 6210) << (v152 & 7)) | *(a11 + (v152 >> 3));
                v50 = v152 + 14;
                *a10 = v50;
                v51 = &__dst[62];
              }
            }

            else if (v46 > 5)
            {
              if (v46 > 0x81)
              {
                if (v46 > 0x841)
                {
                  v62 = a6[61];
                  v63 = *a10;
                  result = *a10 & 7;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 122) << result) | *(a11 + (*a10 >> 3));
                  v64 = v63 + v62;
                  *a10 = v64;
                  *(a11 + (v64 >> 3)) = ((v46 - 2114) << (v64 & 7)) | *(a11 + (v64 >> 3));
                  v50 = v64 + 12;
                  *a10 = v50;
                  v51 = &__dst[61];
                }

                else
                {
                  v58 = __clz(v46 - 66) ^ 0x1F;
                  v59 = a6[v58 + 50];
                  v60 = *a10;
                  *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v58 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                  v61 = v60 + v59;
                  *a10 = v61;
                  result = *(a11 + (v61 >> 3));
                  *(a11 + (v61 >> 3)) = (((-1 << v58) + v46 - 66) << (v61 & 7)) | result;
                  v50 = v61 + v58;
                  *a10 = v61 + v58;
                  v51 = &__dst[v58 + 50];
                }
              }

              else
              {
                v52 = (__clz(v46 - 2) ^ 0x1F) - 1;
                v53 = (v46 - 2) >> v52;
                v54 = v53 + (2 * v52 + 42);
                v55 = a6[v54];
                v56 = *a10;
                v23 = v200;
                *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v54) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                v57 = v56 + v55;
                *a10 = v57;
                result = *(a11 + (v57 >> 3));
                *(a11 + (v57 >> 3)) = ((v46 - 2 - (v53 << v52)) << (v57 & 7)) | result;
                v50 = v57 + v52;
                *a10 = v57 + v52;
                v51 = &__dst[v54];
              }
            }

            else
            {
              v47 = a6[v46 | 0x28];
              v48 = *a10;
              v49 = *a10 >> 3;
              result = *(a11 + v49);
              *(a11 + v49) = (*(a7 + 2 * (v46 | 0x28)) << (*a10 & 7)) | result;
              v50 = v48 + v47;
              *a10 = v50;
              v51 = &__dst[v46 | 0x28];
            }

            ++*v51;
            if (v21 != v22)
            {
              if (v46 <= 1)
              {
                v46 = 1;
              }

              do
              {
                v65 = *v22++;
                v66 = v204[v65];
                result = v50 & 7;
                *(a11 + (v50 >> 3)) = (v203[v65] << (v50 & 7)) | *(a11 + (v50 >> 3));
                v50 += v66;
                *a10 = v50;
                --v46;
              }

              while (v46);
            }

            if (v27 == v37)
            {
              v67 = a6[64];
              *(a11 + (v50 >> 3)) = (*(a7 + 128) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v68 = v50 + v67;
              v69 = &__dst[64];
            }

            else
            {
              v70 = v37 + 3;
              v71 = __clz(v70) ^ 0x1F;
              v72 = v71 - 1;
              v73 = ((v70 >> (v71 - 1)) & 1 | 2) << (v71 - 1);
              v74 = ((2 * v71 - 4) & 0xFFFFFFFE | (v70 >> (v71 - 1)) & 1) + 80;
              v75 = a6[v74];
              result = v50 >> 3;
              *(a11 + (v50 >> 3)) = (*(a7 + 2 * v74) << (v50 & 7)) | *(a11 + (v50 >> 3));
              v76 = v50 + v75;
              *a10 = v76;
              *(a11 + (v76 >> 3)) = ((v70 - v73) << (v76 & 7)) | *(a11 + (v76 >> 3));
              v68 = v76 + v72;
              v69 = &__dst[v74];
              v27 = v37;
            }

            v77 = v43 + 5;
            ++*v69;
            *a10 = v68;
            if (v43 + 5 > 0xB)
            {
              if (v77 > 0x47)
              {
                if (v77 > 0x87)
                {
                  if (v77 > 0x847)
                  {
                    v98 = a6[39];
                    *(a11 + (v68 >> 3)) = (*(a7 + 78) << (v68 & 7)) | *(a11 + (v68 >> 3));
                    v99 = v68 + v98;
                    *a10 = v99;
                    v100 = v99 & 7;
                    *(a11 + (v99 >> 3)) = ((v43 - 2115) << (v99 & 7)) | *(a11 + (v99 >> 3));
                    v101 = v99 + 24;
                    *a10 = v99 + 24;
                    v102 = a6[64];
                    *(a11 + (v101 >> 3)) = (*(a7 + 128) << v100) | *(a11 + (v101 >> 3));
                    *a10 = v101 + v102;
                    ++__dst[39];
                  }

                  else
                  {
                    v92 = v43 - 67;
                    v93 = __clz(v92) ^ 0x1F;
                    v94 = a6[v93 + 28];
                    result = *(a11 + (v68 >> 3));
                    *(a11 + (v68 >> 3)) = (*(a7 + 2 * (v93 + 28)) << (v68 & 7)) | result;
                    v95 = v68 + v94;
                    *a10 = v95;
                    *(a11 + (v95 >> 3)) = (((-1 << v93) + v92) << (v95 & 7)) | *(a11 + (v95 >> 3));
                    v96 = v95 + v93;
                    *a10 = v95 + v93;
                    v97 = a6[64];
                    *(a11 + (v96 >> 3)) = (*(a7 + 128) << (v96 & 7)) | *(a11 + (v96 >> 3));
                    *a10 = v96 + v97;
                    ++__dst[v93 + 28];
                  }
                }

                else
                {
                  v86 = v43 - 3;
                  v87 = (v86 >> 5) + 30;
                  v88 = a6[v87];
                  result = v68 & 7;
                  *(a11 + (v68 >> 3)) = (*(a7 + 2 * v87) << (v68 & 7)) | *(a11 + (v68 >> 3));
                  v89 = v68 + v88;
                  *a10 = v89;
                  *(a11 + (v89 >> 3)) = ((v86 & 0x1F) << (v89 & 7)) | *(a11 + (v89 >> 3));
                  v90 = v89 + 5;
                  *a10 = v89 + 5;
                  v91 = a6[64];
                  *(a11 + (v90 >> 3)) = (*(a7 + 128) << (v90 & 7)) | *(a11 + (v90 >> 3));
                  *a10 = v90 + v91;
                  ++__dst[v87];
                }

                v80 = &__dst[64];
              }

              else
              {
                v81 = v43 - 3;
                v82 = (__clz(v81) ^ 0x1F) - 1;
                v83 = (v81 >> v82) + (2 * v82 + 4);
                v84 = a6[v83];
                result = v68 >> 3;
                *(a11 + (v68 >> 3)) = (*(a7 + 2 * v83) << (v68 & 7)) | *(a11 + (v68 >> 3));
                v85 = v68 + v84;
                *a10 = v85;
                *(a11 + (v85 >> 3)) = ((v81 - (v81 >> v82 << v82)) << (v85 & 7)) | *(a11 + (v85 >> 3));
                *a10 = v85 + v82;
                v80 = &__dst[v83];
              }
            }

            else
            {
              v78 = v43 + 1;
              v79 = a6[v78];
              *(a11 + (v68 >> 3)) = (*(a7 + 2 * v78) << (v68 & 7)) | *(a11 + (v68 >> 3));
              *a10 = v68 + v79;
              v80 = &__dst[v78];
            }

            v28 = &v21[v77];
            ++*v80;
            if (&v21[v77] >= v26)
            {
LABEL_98:
              v22 = v28;
              break;
            }

            v103 = *(v28 - 3);
            *(a5 + (((0x1E35A7BD000000 * v103) >> 47) & 0x1FFFC)) = v28 - a2 - 3;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 8)) >> 47) & 0x1FFFC)) = v28 - a2 - 2;
            *(a5 + (((0x1E35A7BD000000 * (v103 >> 16)) >> 47) & 0x1FFFC)) = v28 - a2 - 1;
            v104 = ((0x1E35A7BD000000 * (v103 >> 24)) >> 47) & 0x1FFFC;
            v105 = *(a5 + v104);
            *(a5 + v104) = v28 - a2;
            v106 = &a2[v105];
            v22 = v28;
            if (*v28 == *&a2[v105])
            {
              while (1)
              {
                v22 = v28;
                if (v28[4] != v106[4])
                {
                  break;
                }

                v107 = v106 + 5;
                v108 = v28 + 5;
                v109 = v24 - v28 - 5;
                if (v109 < 8)
                {
                  v112 = 0;
LABEL_81:
                  v146 = v109 & 7;
                  if (v146)
                  {
                    v147 = v112 | v146;
                    while (1)
                    {
                      result = *v108;
                      if (v107[v112] != result)
                      {
                        break;
                      }

                      ++v108;
                      ++v112;
                      if (!--v146)
                      {
                        v112 = v147;
                        break;
                      }
                    }
                  }
                }

                else
                {
                  v110 = 0;
                  v111 = v109 >> 3;
                  v112 = v109 & 0xFFFFFFFFFFFFFFF8;
                  result = &v108[v109 & 0xFFFFFFFFFFFFFFF8];
                  while (1)
                  {
                    v113 = *&v108[v110];
                    v114 = *&v107[v110];
                    if (v113 != v114)
                    {
                      break;
                    }

                    v110 += 8;
                    if (!--v111)
                    {
                      v108 += v109 & 0xFFFFFFFFFFFFFFF8;
                      goto LABEL_81;
                    }
                  }

                  v112 = v110 + (__clz(__rbit64(v114 ^ v113)) >> 3);
                }

                v115 = v28 - v106;
                if (v115 <= 262128)
                {
                  v116 = v112 + 5;
                  if (v112 + 5 > 9)
                  {
                    if (v116 > 0x85)
                    {
                      if (v116 > 0x845)
                      {
                        v133 = a6[39];
                        v134 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 78) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v135 = v134 + v133;
                        *a10 = v135;
                        *(a11 + (v135 >> 3)) = ((v112 - 2113) << (v135 & 7)) | *(a11 + (v135 >> 3));
                        v120 = v135 + 24;
                        *a10 = v135 + 24;
                        v121 = &__dst[39];
                      }

                      else
                      {
                        v128 = v112 - 65;
                        v129 = __clz(v128) ^ 0x1F;
                        v130 = a6[v129 + 28];
                        v131 = *a10;
                        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v129 + 28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                        v132 = v131 + v130;
                        *a10 = v132;
                        *(a11 + (v132 >> 3)) = (((-1 << v129) + v128) << (v132 & 7)) | *(a11 + (v132 >> 3));
                        v120 = v132 + v129;
                        *a10 = v132 + v129;
                        v121 = &__dst[v129 + 28];
                      }
                    }

                    else
                    {
                      v122 = v112 - 1;
                      v123 = (__clz(v122) ^ 0x1F) - 1;
                      v124 = (v122 >> v123) + (2 * v123 + 20);
                      v125 = a6[v124];
                      v126 = *a10;
                      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v124) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                      v127 = v126 + v125;
                      *a10 = v127;
                      *(a11 + (v127 >> 3)) = ((v122 - (v122 >> v123 << v123)) << (v127 & 7)) | *(a11 + (v127 >> 3));
                      v120 = v127 + v123;
                      *a10 = v127 + v123;
                      v121 = &__dst[v124];
                    }
                  }

                  else
                  {
                    v117 = v112 + 19;
                    v118 = a6[v112 + 19];
                    v119 = *a10;
                    *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v117) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
                    v120 = v119 + v118;
                    *a10 = v120;
                    v121 = &__dst[v117];
                  }

                  v28 += v116;
                  ++*v121;
                  v136 = v115 + 3;
                  v137 = __clz(v136) ^ 0x1F;
                  v138 = v137 - 1;
                  v139 = (v136 >> (v137 - 1)) & 1 | 2;
                  v140 = ((2 * v137 - 4) & 0xFFFFFFFE | (v136 >> (v137 - 1)) & 1) + 80;
                  v141 = a6[v140];
                  result = v120 >> 3;
                  *(a11 + (v120 >> 3)) = (*(a7 + 2 * v140) << (v120 & 7)) | *(a11 + (v120 >> 3));
                  v142 = v120 + v141;
                  *a10 = v142;
                  *(a11 + (v142 >> 3)) = ((v136 - (v139 << v138)) << (v142 & 7)) | *(a11 + (v142 >> 3));
                  *a10 = v142 + v138;
                  ++__dst[v140];
                  if (v28 >= v26)
                  {
                    goto LABEL_98;
                  }

                  v27 = v115;
                  v143 = *(v28 - 3);
                  *(a5 + (((0x1E35A7BD000000 * v143) >> 47) & 0x1FFFC)) = v28 - a2 - 3;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 8)) >> 47) & 0x1FFFC)) = v28 - a2 - 2;
                  *(a5 + (((0x1E35A7BD000000 * (v143 >> 16)) >> 47) & 0x1FFFC)) = v28 - a2 - 1;
                  v144 = ((0x1E35A7BD000000 * (v143 >> 24)) >> 47) & 0x1FFFC;
                  v145 = *(a5 + v144);
                  *(a5 + v144) = v28 - a2;
                  v106 = &a2[v145];
                  if (*v28 == *&a2[v145])
                  {
                    continue;
                  }
                }

                v22 = v28;
                goto LABEL_15;
              }
            }

            goto LABEL_15;
          }
        }
      }

LABEL_99:
      v156 = v202 - v23;
      v157 = v202 - v23 >= 0x10000 ? 0x10000 : v202 - v23;
      v202 -= v23;
      if (!v156)
      {
        break;
      }

      v201 += v157;
      if (v201 > 0x100000)
      {
        break;
      }

      v21 = v24;
      v200 = v157;
      result = ShouldMergeBlock(v24, v157, v204);
      v24 = v21;
      if (!result)
      {
        break;
      }

      UpdateBits((v201 - 1), v197 + 3, a11);
    }

    if (v22 >= v24)
    {
      goto LABEL_135;
    }

    v158 = v24 - v22;
    if ((v24 - v22) >> 1 > 0xC20)
    {
      result = v194;
      if (50 * (v22 - v194) > v158 || v193 < 0x3D5)
      {
        v179 = (a7 + 126);
        if (v158 < 0x5842)
        {
          v179 = (a7 + 124);
        }

        v180 = a6 + 63;
        if (v158 < 0x5842)
        {
          v180 = a6 + 62;
        }

        v181 = -6210;
        if (v158 >= 0x5842)
        {
          v181 = -22594;
        }

        v182 = 24;
        if (v158 < 0x5842)
        {
          v182 = 14;
        }

        v183 = 63;
        if (v158 < 0x5842)
        {
          v183 = 62;
        }

        v184 = *v180;
        v185 = *a10;
        *(a11 + (*a10 >> 3)) = (*v179 << (*a10 & 7)) | *(a11 + (*a10 >> 3));
        *a10 = v185 + v184;
        *(a11 + ((v185 + v184) >> 3)) = ((v158 + v181) << ((v185 + v184) & 7)) | *(a11 + ((v185 + v184) >> 3));
        v186 = v185 + v184 + v182;
        ++__dst[v183];
        *a10 = v186;
        do
        {
          v187 = *v22++;
          v188 = v204[v187];
          *(a11 + (v186 >> 3)) = (v203[v187] << (v186 & 7)) | *(a11 + (v186 >> 3));
          v186 += v188;
          *a10 = v186;
          --v158;
        }

        while (v158);
LABEL_135:
        v21 = v24;
      }

      else
      {
        v21 = v24;
        result = EmitUncompressedMetaBlock(v194, v24, v197, a10, a11);
      }

      v163 = v202;
      goto LABEL_137;
    }

    if (v158 > 5)
    {
      v163 = v202;
      if (v158 > 0x81)
      {
        if (v158 > 0x841)
        {
          v174 = a6[61];
          v175 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 122) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v176 = v175 + v174;
          *a10 = v176;
          *(a11 + (v176 >> 3)) = ((v158 - 2114) << (v176 & 7)) | *(a11 + (v176 >> 3));
          v161 = v176 + 12;
          *a10 = v161;
          v162 = &__dst[61];
        }

        else
        {
          v170 = __clz(v158 - 66) ^ 0x1F;
          v171 = a6[v170 + 50];
          v172 = *a10;
          *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v170 + 50)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
          v173 = v172 + v171;
          *a10 = v173;
          *(a11 + (v173 >> 3)) = (((-1 << v170) + v158 - 66) << (v173 & 7)) | *(a11 + (v173 >> 3));
          v161 = v173 + v170;
          *a10 = v173 + v170;
          v162 = &__dst[v170 + 50];
        }
      }

      else
      {
        v164 = (__clz(v158 - 2) ^ 0x1F) - 1;
        v165 = (v158 - 2) >> v164;
        v166 = v165 + (2 * v164 + 42);
        v167 = a6[v166];
        v168 = *a10;
        result = *a10 & 7;
        *(a11 + (*a10 >> 3)) = (*(a7 + 2 * v166) << result) | *(a11 + (*a10 >> 3));
        v169 = v168 + v167;
        *a10 = v169;
        *(a11 + (v169 >> 3)) = ((v158 - 2 - (v165 << v164)) << (v169 & 7)) | *(a11 + (v169 >> 3));
        v161 = v169 + v164;
        *a10 = v169 + v164;
        v162 = &__dst[v166];
      }
    }

    else
    {
      v159 = a6[v158 | 0x28];
      v160 = *a10;
      *(a11 + (*a10 >> 3)) = (*(a7 + 2 * (v158 | 0x28)) << (*a10 & 7)) | *(a11 + (*a10 >> 3));
      v161 = v160 + v159;
      *a10 = v161;
      v162 = &__dst[v158 | 0x28];
      v163 = v202;
    }

    ++*v162;
    if (v158 <= 1)
    {
      v158 = 1;
    }

    do
    {
      v177 = *v22++;
      v178 = v204[v177];
      *(a11 + (v161 >> 3)) = (v203[v177] << (v161 & 7)) | *(a11 + (v161 >> 3));
      v161 += v178;
      *a10 = v161;
      --v158;
    }

    while (v158);
    v21 = v24;
LABEL_137:
    if (!v163)
    {
      break;
    }

    if (v163 >= 0x18000)
    {
      v189 = 98304;
    }

    else
    {
      v189 = v163;
    }

    v201 = v189;
    v202 = v163;
    v197 = *a10;
    BrotliStoreMetaBlockHeader(v189, 0, a10, a11);
    v190 = *a10;
    *(a11 + (*a10 >> 3)) = *(a11 + (*a10 >> 3));
    *a10 = v190 + 13;
    result = BuildAndStoreLiteralPrefixCode(v195, v21, v201, v204, v203, a10, a11);
    if (*(v195 + 24))
    {
      return result;
    }

    v193 = result;
    BuildAndStoreCommandPrefixCode(__dst, a6, a7, a10, a11);
  }

  if (!a4)
  {
    *a9 = 0;
    *a8 = 0;
    return BuildAndStoreCommandPrefixCode(__dst, a6, a7, a8, a9);
  }

  return result;
}

void *EmitUncompressedMetaBlock(const void *a1, uint64_t a2, unint64_t a3, unint64_t *a4, uint64_t a5)
{
  v8 = a2 - a1;
  *(a5 + (a3 >> 3)) &= ~(-1 << (a3 & 7));
  *a4 = a3;
  BrotliStoreMetaBlockHeader(a2 - a1, 1u, a4, a5);
  v9 = (*a4 + 7) & 0xFFFFFFF8;
  *a4 = v9;
  result = memcpy((a5 + (v9 >> 3)), a1, v8);
  v11 = *a4 + 8 * v8;
  *a4 = v11;
  *(a5 + (v11 >> 3)) = 0;
  return result;
}

unint64_t BrotliStoreMetaBlockHeader(unint64_t result, unsigned int a2, unint64_t *a3, uint64_t a4)
{
  v4 = *a3;
  *(a4 + (*a3 >> 3)) = *(a4 + (*a3 >> 3));
  *a3 = v4 + 1;
  v5 = 5;
  if (result >= 0x100001)
  {
    v5 = 6;
  }

  if (result <= 0x10000)
  {
    v5 = 4;
  }

  *(a4 + ((v4 + 1) >> 3)) = ((v5 - 4) << ((v4 + 1) & 7)) | *(a4 + ((v4 + 1) >> 3));
  v6 = v4 + 3;
  *a3 = v6;
  *(a4 + (v6 >> 3)) = ((result - 1) << (v6 & 7)) | *(a4 + (v6 >> 3));
  v7 = v6 + 4 * v5;
  *a3 = v7;
  *(a4 + (v7 >> 3)) = (a2 << (v7 & 7)) | *(a4 + (v7 >> 3));
  *a3 = v7 + 1;
  return result;
}

unint64_t BuildAndStoreLiteralPrefixCode(uint64_t a1, unsigned __int8 *a2, unint64_t a3, _BYTE *a4, uint64_t a5, unint64_t *a6, uint64_t a7)
{
  v36 = *MEMORY[0x29EDCA608];
  bzero(v35, 0x400uLL);
  if (a3 >= 0x8000)
  {
    v23 = 0;
    do
    {
      ++v35[a2[v23]];
      v23 += 29;
    }

    while (v23 < a3);
    v24 = 0;
    v25 = ((a3 + 28) * 0x1A7B9611A7B9611BuLL) >> 64;
    v17 = 0uLL;
    v18 = ((v25 + ((a3 + 28 - v25) >> 1)) >> 4);
    v26.i64[0] = 0xB0000000BLL;
    v26.i64[1] = 0xB0000000BLL;
    do
    {
      v27 = *&v35[v24];
      v28 = vminq_u32(v27, v26);
      v29 = *&vaddq_s32(v28, v28) | __PAIR128__(0x100000001, 0x100000001);
      *&v35[v24] = vaddq_s32(v29, v27);
      v17 = vaddw_high_u32(v17, v29);
      v18 = vaddw_u32(v18, *&v29);
      v24 += 4;
    }

    while (v24 != 256);
  }

  else
  {
    if (a3)
    {
      v14 = a3;
      do
      {
        v15 = *a2++;
        ++v35[v15];
        --v14;
      }

      while (v14);
    }

    v16 = 0;
    v17 = 0uLL;
    v18 = a3;
    v19.i64[0] = 0xB0000000BLL;
    v19.i64[1] = 0xB0000000BLL;
    do
    {
      v20 = *&v35[v16];
      v21 = vminq_u32(v20, v19);
      v22 = vaddq_s32(v21, v21);
      *&v35[v16] = vaddq_s32(v22, v20);
      v17 = vaddw_high_u32(v17, v22);
      v18 = vaddw_u32(v18, *v22.i8);
      v16 += 4;
    }

    while (v16 != 256);
  }

  v30 = vaddvq_s64(vaddq_s64(v18, v17));
  BrotliBuildAndStoreHuffmanTreeFast(a1, v35, v30, 8, a4, a5, a6, a7);
  if (*(a1 + 24))
  {
    return 0;
  }

  v32 = 0;
  for (i = 0; i != 256; ++i)
  {
    v34 = v35[i];
    if (v34)
    {
      v32 += v34 * a4[i];
    }
  }

  return 125 * v32 / v30;
}

BOOL ShouldMergeBlock(uint64_t a1, unint64_t a2, uint64_t a3)
{
  v16[256] = *MEMORY[0x29EDCA608];
  bzero(v16, 0x800uLL);
  v7 = 0;
  if (!a2)
  {
    goto LABEL_4;
  }

  do
  {
    ++v16[*(a1 + v7)];
    v7 += 43;
  }

  while (v7 < a2);
  v7 = (a2 + 42) / 0x2B;
  if ((a2 + 42) >> 8 > 0x2A)
  {
    v9 = v7;
    v8 = log2(v7);
  }

  else
  {
LABEL_4:
    v8 = kBrotliLog2Table[v7];
    v9 = v7;
  }

  v10 = 0;
  v11 = (v8 + 0.5) * v9 + 200.0;
  do
  {
    v12 = v16[v10];
    v13 = v12;
    LOBYTE(v3) = *(a3 + v10);
    if (v12 > 0xFF)
    {
      v14 = log2(v12);
    }

    else
    {
      v14 = kBrotliLog2Table[v12];
    }

    v11 = v11 - v13 * (v14 + v3);
    ++v10;
  }

  while (v10 != 256);
  return v11 >= 0.0;
}

uint64_t UpdateBits(uint64_t result, unint64_t a2, uint64_t a3)
{
  v3 = 20;
  do
  {
    v4 = 8 - (a2 & 7);
    if (v3 < v4)
    {
      v4 = v3;
    }

    *(a3 + (a2 >> 3)) = ((-1 << (v4 + (a2 & 7))) | ~(-1 << (a2 & 7))) & *(a3 + (a2 >> 3)) | ((result & ~(-1 << v4)) << (a2 & 7));
    result = result >> v4;
    a2 += v4;
    v3 -= v4;
  }

  while (v3);
  return result;
}

unint64_t BuildAndStoreCommandPrefixCode(uint64_t a1, uint64_t a2, _OWORD *a3, unint64_t *a4, uint64_t a5)
{
  v32 = *MEMORY[0x29EDCA608];
  bzero(v30, 0x280uLL);
  BrotliCreateHuffmanTree(a1, 64, 15, v31, a2);
  BrotliCreateHuffmanTree(a1 + 256, 64, 14, v31, a2 + 64);
  *v27 = *a2;
  v10 = v28;
  v33.val[1] = *(a2 + 24);
  v33.val[0] = *(a2 + 40);
  vst2q_f64(v10, v33);
  v12 = (a2 + 56);
  v11 = *(a2 + 56);
  *&v27[16] = *(a2 + 16);
  v29 = v11;
  BrotliConvertBitDepthsToSymbols(v27, 64, v26);
  v13 = v26[1];
  *a3 = v26[0];
  a3[1] = v13;
  v14 = v26[3];
  v15 = v26[4];
  v16 = v26[5];
  a3[2] = v26[2];
  a3[3] = v15;
  v17 = v26[7];
  a3[4] = v26[6];
  a3[5] = v14;
  a3[6] = v16;
  a3[7] = v17;
  BrotliConvertBitDepthsToSymbols((a2 + 64), 64, (a3 + 8));
  memset(v28, 0, sizeof(v28));
  v18 = *a2;
  v19 = *(a2 + 8);
  v29 = 0;
  v30[0] = v19;
  *v27 = v18;
  v20 = *(a2 + 24);
  v30[8] = *(a2 + 16);
  v21 = *(a2 + 32);
  v30[16] = v20;
  v30[40] = v21;
  v22 = 256;
  *&v27[8] = 0u;
  do
  {
    v23 = &v27[v22];
    *(v23 - 128) = *(v12 - 16);
    *v23 = *(v12 - 8);
    v24 = *v12++;
    v23[192] = v24;
    v22 += 8;
  }

  while (v22 != 320);
  BrotliStoreHuffmanTree(v27, 0x2C0uLL, v31, a4, a5);
  return BrotliStoreHuffmanTree(a2 + 64, 0x40uLL, v31, a4, a5);
}

uint64_t BrotliInitMemoryManager(uint64_t result, void *(*a2)(int a1, size_t __size), void (*a3)(int a1, void *a2), uint64_t a4)
{
  if (a2)
  {
    v4 = a2;
  }

  else
  {
    v4 = BrotliDefaultAllocFunc;
  }

  if (a2)
  {
    v5 = a3;
  }

  else
  {
    v5 = BrotliDefaultFreeFunc;
  }

  *result = v4;
  *(result + 8) = v5;
  if (a2)
  {
    v6 = a4;
  }

  else
  {
    v6 = 0;
  }

  *(result + 16) = v6;
  *(result + 24) = 0;
  *(result + 40) = 0;
  *(result + 48) = 0;
  *(result + 32) = 0;
  return result;
}

uint64_t BrotliAllocate(uint64_t a1)
{
  v2 = (*a1)(*(a1 + 16));
  if (v2)
  {
    v3 = *(a1 + 40);
    if (v3 == 64)
    {
      CollectGarbagePointers(a1);
      v3 = *(a1 + 40);
    }

    *(a1 + 40) = v3 + 1;
    *(a1 + 8 * v3 + 1080) = v2;
  }

  else
  {
    *(a1 + 24) = 1;
  }

  return v2;
}

uint64_t CollectGarbagePointers(unint64_t *a1)
{
  v2 = (a1 + 7);
  SortPointers((a1 + 135), a1[5]);
  SortPointers((a1 + 199), a1[6]);
  result = Annihilate((a1 + 135), a1[5], (a1 + 199), a1[6]);
  v4 = a1[6];
  v5 = a1[5] - result;
  a1[5] = v5;
  a1[6] = v4 - result;
  if (v4 != result)
  {
    result = Annihilate(v2, a1[4], (a1 + 199), v4 - result);
    v5 = a1[5];
    a1[4] -= result;
    a1[6] -= result;
  }

  if (v5)
  {
    memcpy((v2 + 8 * a1[4]), a1 + 135, 8 * v5);
    v6 = a1[4] + a1[5];
    a1[4] = v6;
    a1[5] = 0;

    return SortPointers(v2, v6);
  }

  return result;
}

uint64_t BrotliFree(uint64_t result, unint64_t a2)
{
  if (a2)
  {
    v3 = result;
    result = (*(result + 8))(*(result + 16));
    v4 = v3[6];
    if (v4 == 64)
    {
      result = CollectGarbagePointers(v3);
      v4 = v3[6];
    }

    v3[6] = v4 + 1;
    v3[v4 + 199] = a2;
  }

  return result;
}

uint64_t BrotliWipeOutMemoryManager(uint64_t a1)
{
  result = CollectGarbagePointers(a1);
  if (*(a1 + 32))
  {
    v3 = 0;
    do
    {
      result = (*(a1 + 8))(*(a1 + 16), *(a1 + 56 + 8 * v3++));
    }

    while (v3 < *(a1 + 32));
  }

  *(a1 + 32) = 0;
  return result;
}

uint64_t SortPointers(uint64_t result, unint64_t a2)
{
  for (i = 0; i != 4; ++i)
  {
    v3 = SortPointers_gaps[i];
    if (v3 < a2)
    {
      v4 = result + 8 * v3;
      v5 = result;
      v6 = SortPointers_gaps[i];
      do
      {
        v7 = *(result + 8 * v6);
        v8 = v6;
        if (v6 >= v3)
        {
          v9 = 0;
          while (1)
          {
            v10 = *(v5 + 8 * v9);
            if (v7 >= v10)
            {
              break;
            }

            *(v4 + 8 * v9) = v10;
            v9 -= v3;
            v8 = v6 + v9;
            if (v6 + v9 < v3)
            {
              goto LABEL_10;
            }
          }

          v8 = v6 + v9;
        }

LABEL_10:
        *(result + 8 * v8) = v7;
        ++v6;
        v4 += 8;
        v5 += 8;
      }

      while (v6 != a2);
    }
  }

  return result;
}

uint64_t Annihilate(uint64_t a1, unint64_t a2, uint64_t a3, unint64_t a4)
{
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  result = 0;
  if (a2 && a4)
  {
    result = 0;
    v8 = 0;
    v7 = 0;
    v6 = 0;
    v5 = 0;
    do
    {
      v10 = *(a1 + 8 * v5);
      v11 = *(a3 + 8 * v6);
      if (v10 == v11)
      {
        ++v5;
        ++v6;
        ++result;
      }

      else if (v10 >= v11)
      {
        ++v6;
        *(a3 + 8 * v8++) = v11;
      }

      else
      {
        ++v5;
        *(a1 + 8 * v7++) = v10;
      }
    }

    while (v5 < a2 && v6 < a4);
  }

  v12 = a2 - v5;
  if (a2 > v5)
  {
    v13 = (a1 + 8 * v7);
    v14 = (a1 + 8 * v5);
    do
    {
      v15 = *v14++;
      *v13++ = v15;
      --v12;
    }

    while (v12);
  }

  v16 = a4 - v6;
  if (a4 > v6)
  {
    v17 = (a3 + 8 * v8);
    v18 = (a3 + 8 * v6);
    do
    {
      v19 = *v18++;
      *v17++ = v19;
      --v16;
    }

    while (v16);
  }

  return result;
}

uint64_t BrotliBuildHistogramsWithContext(uint64_t result, uint64_t a2, uint64_t a3, uint64_t a4, uint64_t a5, uint64_t a6, uint64_t a7, uint64_t a8, unsigned __int8 a9, unsigned __int8 a10, uint64_t a11, uint64_t a12, uint64_t a13, uint64_t a14)
{
  v14 = *(a3 + 24);
  if (v14)
  {
    v15 = *v14;
  }

  else
  {
    v15 = 0;
  }

  v16 = *(a4 + 24);
  v45 = v16;
  if (v16)
  {
    v17 = *v16;
  }

  else
  {
    v17 = 0;
  }

  v18 = *(a5 + 24);
  v42 = v18;
  if (v18)
  {
    v19 = *v18;
    if (!a2)
    {
      return result;
    }
  }

  else
  {
    v19 = 0;
    if (!a2)
    {
      return result;
    }
  }

  v20 = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v26 = a10;
  v27 = a9;
  v44 = 0;
  do
  {
    if (!v17)
    {
      ++v23;
      v22 = *(*(a4 + 16) + v23);
      v17 = v45[v23];
    }

    v28 = (result + 16 * v20);
    v29 = a13 + 2832 * v22;
    v30 = *(v28 + 6);
    ++*(v29 + 4 * v30);
    ++*(v29 + 2816);
    v31 = *v28;
    if (v31)
    {
      do
      {
        v32 = v27;
        if (!v15)
        {
          ++v25;
          v24 = *(*(a3 + 16) + v25);
          v15 = v14[v25];
        }

        v33 = v24;
        if (a11)
        {
          v34 = &_kBrotliContextLookupTable + (*(a11 + 4 * v24) << 9);
          v33 = (v24 << 6) + (v34[v26 + 256] | v34[v32]);
        }

        v35 = a12 + 1040 * v33;
        --v15;
        ++*(v35 + 4 * *(a6 + (a7 & a8)));
        ++*(v35 + 1024);
        v27 = *(a6 + (a7++ & a8));
        v26 = v32;
        --v31;
      }

      while (v31);
    }

    else
    {
      v32 = v26;
    }

    v36 = v28[1] & 0x1FFFFFF;
    a7 += v36;
    if (v36)
    {
      v32 = *(a6 + ((a7 - 2) & a8));
      v27 = *(a6 + ((a7 - 1) & a8));
      if (v30 >= 0x80)
      {
        if (v19)
        {
          v37 = v21;
        }

        else
        {
          v37 = *(*(a5 + 16) + ++v44);
          v19 = v42[v44];
        }

        --v19;
        v38 = v30 >> 6;
        LODWORD(v30) = v30 & 7;
        if (v30 >= 3)
        {
          v30 = 3;
        }

        else
        {
          v30 = v30;
        }

        if (v38 != 4 && v38 != 2 && v38 != 7)
        {
          v30 = 3;
        }

        v21 = v37;
        v41 = a14 + 2192 * (v30 | (4 * v37));
        ++*(v41 + 4 * (*(v28 + 7) & 0x3FF));
        ++*(v41 + 2176);
      }
    }

    --v17;
    ++v20;
    v26 = v32;
  }

  while (v20 != a2);
  return result;
}

uint64_t thread_pool_send_task(uint64_t a1, uint64_t a2)
{
  v4 = *(a1 + 288);
  *(a1 + 288) = v4 + 1;
  v5 = *(a1 + 280);
  v6 = 8 * (v4 % (2 * *(a1 + 272)));
  if (!v5)
  {
    goto LABEL_3;
  }

LABEL_2:
  v7 = *(a1 + 264);
  if (*(v7 + v6))
  {
LABEL_3:
    while (!pthread_mutex_lock((a1 + 16)))
    {
      while (1)
      {
        v8 = *(a1 + 8);
        if (v8 > 0)
        {
          break;
        }

        if (pthread_cond_wait((a1 + 80), (a1 + 16)))
        {
          return 0xFFFFFFFFLL;
        }
      }

      *(a1 + 8) = v8 - 1;
      if (pthread_mutex_unlock((a1 + 16)))
      {
        break;
      }

      v5 = *(a1 + 280) + 1;
      *(a1 + 280) = v5;
      if (v5)
      {
        goto LABEL_2;
      }
    }

    return 0xFFFFFFFFLL;
  }

  *(a1 + 280) = v5 - 1;
  *(v7 + v6) = a2;
  if (pthread_mutex_lock((a1 + 136)))
  {
    return 0xFFFFFFFFLL;
  }

  v9 = *(a1 + 128);
  *(a1 + 128) = v9 + 1;
  if (!v9)
  {
    if (pthread_cond_broadcast((a1 + 200)))
    {
      return 0xFFFFFFFFLL;
    }
  }

  result = pthread_mutex_unlock((a1 + 136));
  if (result)
  {
    return 0xFFFFFFFFLL;
  }

  return result;
}

uint64_t thread_pool_sync(uint64_t a1)
{
  if (*(a1 + 280) >= *(a1 + 272))
  {
    return 0;
  }

  v2 = 1;
  do
  {
    if (pthread_mutex_lock((a1 + 16)))
    {
      goto LABEL_8;
    }

    while (1)
    {
      v3 = *(a1 + 8);
      if (v3 > 0)
      {
        break;
      }

      if (pthread_cond_wait((a1 + 80), (a1 + 16)))
      {
        goto LABEL_8;
      }
    }

    *(a1 + 8) = v3 - 1;
    if (pthread_mutex_unlock((a1 + 16)))
    {
LABEL_8:
      v2 = 0;
    }

    v4 = *(a1 + 272);
    v5 = *(a1 + 280) + 1;
    *(a1 + 280) = v5;
  }

  while (v5 < v4);
  if (v2)
  {
    return 0;
  }

  else
  {
    return 0xFFFFFFFFLL;
  }
}

int64x2_t *thread_pool_create(uint64_t a1, uint64_t a2, uint64_t a3)
{
  v6 = calloc(1uLL, 0x138uLL);
  if (v6)
  {
    v6->i64[0] = malloc(8 * a3);
    v7 = calloc(1uLL, 16 * a3);
    v6[16].i64[1] = v7;
    if (v6->i64[0] && v7 != 0)
    {
      v6->i32[2] = 0;
      if (!pthread_mutex_init(&v6[1], 0) && !pthread_cond_init(&v6[5], 0))
      {
        v6[8].i32[0] = 0;
        if (!pthread_mutex_init(&v6[8].u64[1], 0) && !pthread_cond_init(&v6[12].u64[1], 0))
        {
          v6[15].i64[1] = a2;
          v6[16].i64[0] = a1;
          if (!a3)
          {
            return v6;
          }

          v10 = 0;
          v11 = vdupq_n_s64(1uLL);
          while ((create_thread((v6->i64[0] + v10), thread_pool_entry, v6, 0) & 0x80000000) == 0)
          {
            v6[17] = vaddq_s64(v6[17], v11);
            v10 += 8;
            if (!--a3)
            {
              return v6;
            }
          }
        }
      }
    }
  }

  thread_pool_destroy(v6);
  return 0;
}

uint64_t thread_pool_entry(uint64_t a1)
{
  do
  {
    if (pthread_mutex_lock((a1 + 136)))
    {
      break;
    }

    while (1)
    {
      v2 = *(a1 + 128);
      if (v2 > 0)
      {
        break;
      }

      if (pthread_cond_wait((a1 + 200), (a1 + 136)))
      {
        return a1;
      }
    }

    *(a1 + 128) = v2 - 1;
    if (pthread_mutex_unlock((a1 + 136)))
    {
      break;
    }

    add = atomic_fetch_add((a1 + 296), 1uLL);
    v4 = *(a1 + 264);
    v5 = 8 * (add % (2 * *(a1 + 272)));
    if (!*(v4 + v5))
    {
      break;
    }

    *(v4 + v5) = 0;
    if (((*(a1 + 248))(*(a1 + 256)) & 0x80000000) != 0)
    {
      atomic_fetch_add_explicit((a1 + 304), 1u, memory_order_relaxed);
    }

    if (pthread_mutex_lock((a1 + 16)))
    {
      break;
    }

    v6 = *(a1 + 8);
    *(a1 + 8) = v6 + 1;
    if (!v6)
    {
      if (pthread_cond_broadcast((a1 + 80)))
      {
        break;
      }
    }
  }

  while (!pthread_mutex_unlock((a1 + 16)));
  return a1;
}

uint64_t thread_pool_destroy(uint64_t result)
{
  if (result)
  {
    v1 = result;
    if (*(result + 272))
    {
      v2 = 0;
      do
      {
        thread_pool_send_task(v1, 0);
        ++v2;
        v3 = *(v1 + 272);
      }

      while (v2 < v3);
      if (v3)
      {
        v4 = 0;
        do
        {
          join_thread(*(*v1 + 8 * v4++));
        }

        while (v4 < *(v1 + 272));
      }
    }

    if (!pthread_mutex_destroy((v1 + 16)))
    {
      pthread_cond_destroy((v1 + 80));
    }

    if (!pthread_mutex_destroy((v1 + 136)))
    {
      pthread_cond_destroy((v1 + 200));
    }

    v5 = atomic_load((v1 + 304));
    free(*v1);
    free(*(v1 + 264));
    free(v1);
    if (v5)
    {
      return 0xFFFFFFFFLL;
    }

    else
    {
      return 0;
    }
  }

  return result;
}

uint64_t lzvnStreamDecodeInit(uint64_t a1, int a2, int a3)
{
  if (a3)
  {
    v4 = *(a1 + 32);
  }

  else
  {
    v4 = 0;
    *(a1 + 32) = 0;
    *a1 = 0u;
    *(a1 + 16) = 0u;
  }

  v5 = realloc_stream_state(v4, 1, a2, 0x80100u, 0x80078u);
  *(a1 + 32) = v5;
  if (!v5)
  {
    return 0xFFFFFFFFLL;
  }

  v6 = v5;
  result = 0;
  v6[2] = v6 + 32;
  v6[3] = v6 + 32800;
  v6[6] = v6 + 32;
  v6[7] = v6 + 32;
  v6[8] = v6 + 32800;
  v6[9] = v6 + 32800;
  v6[10] = v6 + 65568;
  v6[11] = v6 + 32800;
  return result;
}

uint64_t lzvnStreamDecode(uint64_t a1, char a2)
{
  v3 = *(a1 + 32);
  if (a2)
  {
    *(v3 + 32) = 1;
  }

  v4 = 1;
  do
  {
    if (*(v3 + 36))
    {
      v5 = 0;
    }

    else
    {
      v6 = *(v3 + 56);
      v7 = *(a1 + 24);
      if (v7 >= *(v3 + 16) - v6 + 0x40000)
      {
        v5 = *(v3 + 16) - v6 + 0x40000;
      }

      else
      {
        v5 = *(a1 + 24);
      }

      if (v5 >= 1)
      {
        memcpy(v6, *(a1 + 16), v5);
        *(v3 + 56) += v5;
        v7 = *(a1 + 24) - v5;
        *(a1 + 16) += v5;
        *(a1 + 24) = v7;
      }

      if (!v7 && *(v3 + 32))
      {
        *(v3 + 36) = 1;
      }
    }

    v8 = *(v3 + 88);
    if (v8 >= *(v3 + 24) + 0x20000)
    {
      v9 = *(v3 + 64);
      v10 = *(v3 + 72);
      v11 = v8 >= (v9 - 0x10000) ? v9 - 0x10000 : *(v3 + 88);
      if (v11 > v10)
      {
        if (v9 != v11)
        {
          memmove(*(v3 + 72), v11, v9 - v11);
          v8 = *(v3 + 88);
          v9 = *(v3 + 64);
        }

        *(v3 + 88) = v8 + v10 - v11;
        *(v3 + 64) = &v9[v10 - v11];
      }
    }

    if (*(v3 + 40) || *(v3 + 64) >= *(v3 + 80))
    {
      v12 = 0;
    }

    else
    {
      v12 = lzvnDecode(v3 + 48);
      if (v12 == -3)
      {
        v4 = 0;
      }

      if (*(v3 + 128))
      {
        *(v3 + 40) = 1;
      }
    }

    if (*(v3 + 44))
    {
      goto LABEL_44;
    }

    v13 = *(v3 + 88);
    if (*(a1 + 8) >= *(v3 + 64) - v13)
    {
      v14 = *(v3 + 64) - v13;
    }

    else
    {
      v14 = *(a1 + 8);
    }

    if (v14 >= 1)
    {
      memcpy(*a1, v13, v14);
      v13 = (*(v3 + 88) + v14);
      *(v3 + 88) = v13;
      v15 = *(a1 + 8) - v14;
      *a1 += v14;
      *(a1 + 8) = v15;
    }

    if (*(v3 + 40) && v13 == *(v3 + 64))
    {
      *(v3 + 44) = 1;
      if (v4)
      {
        return *(v3 + 44) != 0;
      }

      return 0xFFFFFFFFLL;
    }

    if (*(v3 + 44))
    {
      goto LABEL_44;
    }

    v16 = *(v3 + 48);
    v17 = *(v3 + 16);
    if (v16 >= v17 + 0x20000)
    {
      v18 = *(v3 + 56);
      v19 = v18 - v16;
      if (v18 - v16 >= 1)
      {
        memmove(v17, v16, v18 - v16);
        v17 = *(v3 + 16);
      }

      *(v3 + 48) = v17;
      *(v3 + 56) = &v17[v19];
    }
  }

  while (v14 | v5);
  if (v12 != -1)
  {
LABEL_44:
    if (v4)
    {
      return *(v3 + 44) != 0;
    }

    return 0xFFFFFFFFLL;
  }

  result = 0xFFFFFFFFLL;
  if (!*(v3 + 36) && v4)
  {
    return *(v3 + 44) != 0;
  }

  return result;
}

uint64_t touchpadCodecDecodeImage(uint64_t a1, _WORD *a2, uint64_t a3, uint64_t a4, unint64_t a5)
{
  v81 = 0;
  v80 = 0;
  v7 = *(a1 + 664);
  v76 = *(a1 + 668);
  v85 = 0;
  v86 = 0;
  v82 = a4;
  v83 = a5;
  v84 = 0;
  if (!codecReadHeader(&v82, &v80))
  {
    return 0;
  }

  v74 = v80;
  if (v80)
  {
    if (*(a1 + 664) != __PAIR64__(HIWORD(v80), WORD2(v80)) || v81 != *(a1 + 672))
    {
      return 0;
    }

    codecResetModel(a1);
  }

  if (v76)
  {
    v8 = 0;
    v9 = 0;
    v10 = v84;
    v11 = v85;
    v73 = *(a1 + 632);
    v12 = v86;
    v13 = HIDWORD(v86);
    while (1)
    {
      v14 = -v7;
      if ((v74 & (v9 != 0)) == 0)
      {
        v14 = 0;
      }

      v79 = a2;
      v78 = v8;
      v77 = v9;
      if (v7)
      {
        break;
      }

LABEL_97:
      v9 = v77 + 1;
      a2 = (v79 + a3);
      v8 = v78 + v7;
      if (v77 + 1 == v76)
      {
        goto LABEL_100;
      }
    }

    v15 = (v73 + 2 * v8);
    v16 = *(v73 + 2 * (v7 * v9) + 2 * v14);
    v17 = 2 * v14 + 2;
    v18 = 1;
    v19 = v7;
    v21 = v82;
    v20 = v83;
    v22 = v16;
    v23 = v16;
    v24 = v11;
    while (1)
    {
      v25 = v16;
      if (v18 < v7)
      {
        v16 = *(v15 + v17);
      }

      v26 = v22 - v23;
      if (v22 - v23 <= -2)
      {
        v27 = -50;
      }

      else
      {
        v27 = 0;
      }

      if (v26 > 1)
      {
        v27 = 50;
      }

      if (v26 < -40)
      {
        v27 = -25;
      }

      if (v26 > 40)
      {
        v27 = 25;
      }

      v28 = v23 - v25;
      if (v28 <= -2)
      {
        v29 = -10;
      }

      else
      {
        v29 = 0;
      }

      if (v28 > 1)
      {
        v29 = 10;
      }

      if (v28 < -40)
      {
        v29 = -5;
      }

      if (v28 <= 40)
      {
        v30 = v29;
      }

      else
      {
        v30 = 5;
      }

      v31 = v30 + v27;
      v32 = v25 - v16;
      if (v25 - v16 <= -2)
      {
        v33 = -2;
      }

      else
      {
        v33 = 0;
      }

      if (v32 > 1)
      {
        v33 = 2;
      }

      if (v32 < -40)
      {
        v33 = -1;
      }

      if (v32 <= 40)
      {
        v34 = v33;
      }

      else
      {
        v34 = 1;
      }

      v35 = v31 + v34;
      v36 = v26 + v25;
      if (v36 <= v22)
      {
        v37 = v22;
      }

      else
      {
        v37 = v36;
      }

      if (v36 < v22)
      {
        v22 = v36;
      }

      if (v37 >= v25)
      {
        v38 = v25;
      }

      else
      {
        v38 = v37;
      }

      if (v22 <= v38)
      {
        LOWORD(v22) = v38;
      }

      if (v35 >= 0)
      {
        v39 = v35;
      }

      else
      {
        v39 = -v35;
      }

      if (v13 <= 15)
      {
        v40 = v10 + 1;
        v84 = v10 + 1;
        if (v10 < v20)
        {
          v11 = v24 + 1;
          v85 = v24 + 1;
          v12 |= *(v21 + v24) << v13;
          v13 += 8;
          v86 = __PAIR64__(v13, v12);
          ++v24;
        }

        v10 += 2;
        v84 = v10;
        if (v40 < v20)
        {
          v11 = v24 + 1;
          v85 = v24 + 1;
          v12 |= *(v21 + v24) << v13;
          v13 += 8;
          ++v24;
        }
      }

      v41 = a1 + 10 * v39;
      v42 = *(v41 + 8);
      v43 = __clz(__rbit32(v12 | 0x10000));
      if (v43 > 0xF)
      {
        v48 = HIWORD(v12);
        v49 = v13 - 16;
        LODWORD(v86) = HIWORD(v12);
        HIDWORD(v86) = v13 - 16;
        if (v13 <= 31)
        {
          v50 = v10 + 1;
          v84 = v10 + 1;
          if (v10 < v20)
          {
            v11 = v24 + 1;
            v85 = v24 + 1;
            v48 |= *(v21 + v24) << v49;
            v49 = v13 - 8;
            LODWORD(v86) = v48;
            HIDWORD(v86) = v13 - 8;
            ++v24;
          }

          v10 += 2;
          v84 = v10;
          if (v50 < v20)
          {
            v11 = v24 + 1;
            v85 = v24 + 1;
            v48 |= *(v21 + v24) << v49;
            v49 += 8;
            ++v24;
          }
        }

        v12 = HIWORD(v48);
        v13 = v49 - 16;
        LODWORD(v86) = HIWORD(v48);
        HIDWORD(v86) = v49 - 16;
      }

      else
      {
        v44 = v12 >> (v43 + 1);
        v45 = v13 - (v43 + 1);
        v86 = __PAIR64__(v45, v44);
        if (v45 <= 15)
        {
          v46 = v10 + 1;
          v84 = v10 + 1;
          if (v10 < v20)
          {
            v11 = v24 + 1;
            v85 = v24 + 1;
            v44 |= *(v21 + v24) << v45;
            v45 += 8;
            v86 = __PAIR64__(v45, v44);
            ++v24;
          }

          v10 += 2;
          v84 = v10;
          if (v46 < v20)
          {
            v11 = v24 + 1;
            v85 = v24 + 1;
            v44 |= *(v21 + v24) << v45;
            v45 += 8;
            ++v24;
          }
        }

        v47 = v44 & ((-1 << v42) ^ 0xFFFF);
        v12 = v44 >> v42;
        v13 = v45 - v42;
        v86 = __PAIR64__(v13, v12);
        v48 = v47 + (v43 << v42);
      }

      v51 = v48 & 1;
      v52 = (v48 >> 1) ^ -v51;
      v54 = *v41;
      v53 = *(v41 + 4);
      v55 = *(v41 + 9) + 1;
      *(v41 + 9) = v55;
      v56 = v52 >= 0 ? v52 : -v52;
      if (v52 > 0)
      {
        break;
      }

      if (v51)
      {
        v57 = -1;
        goto LABEL_81;
      }

LABEL_82:
      v58 = v56 + v54;
      v59 = v55 << v42;
      if (v42)
      {
        v60 = v59 < 2 * v58;
      }

      else
      {
        v60 = 1;
      }

      v61 = !v60;
      v62 = v61 << 31 >> 31;
      if (v59 >= v58)
      {
        v63 = v62;
      }

      else
      {
        v63 = 1;
      }

      *v41 = v58;
      *(v41 + 8) = v42 + v63;
      if (v55 == 64)
      {
        *(v41 + 9) = 32;
        *v41 = v58 - (v58 >> 1);
      }

      if (v35 >= 0)
      {
        LOWORD(v64) = v52 + ((v53 + 8) >> 4);
      }

      else
      {
        v64 = -(v52 + ((v53 + 8) >> 4));
      }

      v65 = v64 + v22;
      *a2++ = v65;
      v22 = v65;
      *v15++ = v65;
      ++v18;
      v23 = v25;
      if (!--v19)
      {
        goto LABEL_97;
      }
    }

    v57 = 1;
LABEL_81:
    *(v41 + 4) = v53 + v57;
    goto LABEL_82;
  }

  v13 = HIDWORD(v86);
LABEL_100:
  if (v13 <= 15)
  {
    v66 = v84;
    v67 = ++v84;
    if (v66 < v83)
    {
      v68 = v85++;
      v69 = *(v82 + v68) << v13;
      v13 += 8;
      LODWORD(v86) = v69 | v86;
      HIDWORD(v86) = v13;
    }

    v84 = v66 + 2;
    if (v67 < v83)
    {
      v70 = v85++;
      LODWORD(v86) = v86 | (*(v82 + v70) << v13);
      v13 += 8;
    }
  }

  v71 = v86 & 0xFFF;
  LODWORD(v86) = v86 >> 12;
  HIDWORD(v86) = v13 - 12;
  if (v71 == codecGetFooterID(a1) && (v86 & 0x8000000000000000) == 0)
  {
    return v85 - (HIDWORD(v86) >> 3);
  }

  return 0;
}

double BrotliInitBlockSplit(_OWORD *a1)
{
  result = 0.0;
  a1[1] = 0u;
  a1[2] = 0u;
  *a1 = 0u;
  return result;
}

uint64_t BrotliDestroyBlockSplit(uint64_t a1, uint64_t a2)
{
  BrotliFree(a1, *(a2 + 16));
  *(a2 + 16) = 0;
  result = BrotliFree(a1, *(a2 + 24));
  *(a2 + 24) = 0;
  return result;
}

uint64_t BrotliSplitBlock(uint64_t result, uint64_t a2, unint64_t a3, uint64_t a4, size_t a5, size_t a6, uint64_t a7, void *a8, uint64_t a9, uint64_t a10)
{
  v11 = result;
  v650 = *MEMORY[0x29EDCA608];
  if (!a3)
  {
    v19 = (result + 24);
    if (*(result + 24))
    {
      return result;
    }

    v20 = 0;
    goto LABEL_40;
  }

  v15 = 0;
  v16 = a2;
  v17 = a3;
  do
  {
    v18 = *v16;
    v16 += 4;
    v15 += v18;
    --v17;
  }

  while (v17);
  if (v15)
  {
    result = BrotliAllocate(result);
  }

  else
  {
    result = 0;
  }

  if (*(v11 + 24))
  {
    return result;
  }

  v580 = result;
  v537 = a8;
  v542 = v11;
  v551 = (v11 + 24);
  v21 = 0;
  v22 = a6 + 1;
  v23 = a3;
  v24 = (a2 + 4);
  do
  {
    v25 = a5 & a6;
    v26 = *(v24 - 1);
    if (v25 + v26 > a6)
    {
      v27 = v22 - v25;
      result = memcpy(&v580[v21], (a4 + v25), v22 - v25);
      v25 = 0;
      v21 += v27;
      v26 -= v27;
    }

    if (v26)
    {
      result = memcpy(&v580[v21], (a4 + v25), v26);
      v21 += v26;
    }

    v28 = *v24;
    v24 += 4;
    a5 = v26 + v25 + (v28 & 0x1FFFFFF);
    --v23;
  }

  while (v23);
  if (v15 >> 7 <= 0x1A8)
  {
    v29 = v15 / 0x220u + 1;
  }

  else
  {
    v29 = 100;
  }

  if (!v15)
  {
    a8 = v537;
    v11 = v542;
    v19 = v551;
    v20 = v580;
LABEL_40:
    *a8 = 1;
    goto LABEL_41;
  }

  v11 = v542;
  v20 = v580;
  if (v15 > 0x7F)
  {
    result = BrotliAllocate(v542);
    if (*(v542 + 24))
    {
      return result;
    }

    v556 = result;
    v62 = result;
    v63 = v29;
    do
    {
      bzero(v62, 0x408uLL);
      v62[129] = 0x7FF0000000000000;
      v62 += 130;
      --v63;
    }

    while (v63);
    v64 = 0;
    LODWORD(v65) = 7;
    do
    {
      v66 = v64 * v15 / v29;
      if (v64)
      {
        v65 = (16807 * v65);
        v66 += v65 % (v15 / v29);
      }

      v67 = 0;
      if (v66 + 70 >= v15)
      {
        v68 = v15 - 71;
      }

      else
      {
        v68 = v66;
      }

      v69 = &v556[1040 * v64];
      v70 = &v580[v68];
      *(v69 + 128) += 70;
      do
      {
        ++*&v69[4 * v70[v67++]];
      }

      while (v67 != 70);
      ++v64;
    }

    while (v64 != v29);
    v71 = v29 + 2 * v15 / 0x46 + 99;
    v72 = v71 / v29 * v29;
    if (v71 != v71 % v29)
    {
      v73 = 0;
      LODWORD(v74) = 7;
      do
      {
        bzero(v585, 0x408uLL);
        v74 = (16807 * v74);
        v75 = &v580[v74 % (v15 - 69)];
        v76 = -70;
        do
        {
          v77 = *v75++;
          ++*(v585 + v77);
          v78 = __CFADD__(v76++, 1);
        }

        while (!v78);
        v79 = 0;
        v80 = 0;
        v81 = &v556[1040 * (v73 % v29)];
        *(v81 + 128) += 70;
        do
        {
          *&v81[4 * v80] = vaddq_s32(*&v81[4 * v80], *&v585[v79]);
          v80 += 4;
          v79 += 2;
        }

        while (v79 != 128);
        ++v73;
      }

      while (v73 < v72);
    }

    v82 = BrotliAllocate(v542);
    v83 = BrotliAllocate(v542);
    v84 = BrotliAllocate(v542);
    v85 = ((v29 + 7) >> 3) * v15 ? BrotliAllocate(v542) : 0;
    v20 = v580;
    result = BrotliAllocate(v542);
    v128 = *(a7 + 4) <= 10 ? 3 : 10;
    if (*(v542 + 24))
    {
      return result;
    }

    __b = result;
    v518 = v85;
    v129 = 0;
    __src = v82 - 2;
    v514 = v82;
    v526 = v128;
    do
    {
      v546 = v129;
      if (v29 > 1)
      {
        v523 = (v29 + 7) >> 3;
        bzero(v83, v29 << 11);
        v132 = 0;
        v133 = (v556 + 1024);
        do
        {
          v134 = *v133;
          if (v134 > 0xFF)
          {
            v135 = log2(v134);
          }

          else
          {
            v135 = kBrotliLog2Table[v134];
          }

          v133 += 260;
          *&v83[8 * v132++] = v135;
        }

        while (v29 != v132);
        v136 = &v83[2040 * v29];
        v137 = (v556 + 1020);
        v138 = 256;
        do
        {
          v139 = 0;
          --v138;
          v140 = v137;
          do
          {
            v141 = *&v83[8 * v139];
            v142 = *v140;
            if (v142)
            {
              if (v142 > 0xFF)
              {
                v143 = log2(v142);
              }

              else
              {
                v143 = kBrotliLog2Table[v142];
              }
            }

            else
            {
              v143 = -2.0;
            }

            v140 += 260;
            *&v136[8 * v139++] = v141 - v143;
          }

          while (v29 != v139);
          v136 -= 8 * v29;
          --v137;
        }

        while (v138);
        bzero(v84, 8 * v29);
        bzero(v518, v523 * v15);
        v144 = 0;
        v20 = v580;
        v82 = v514;
        do
        {
          v145 = 0;
          v146 = &v83[8 * v29 * v580[v144]];
          v147 = 1.0e99;
          do
          {
            v148 = *&v146[8 * v145] + *(v84 + v145);
            *(v84 + v145) = v148;
            if (v148 < v147)
            {
              *(v514 + v144) = v145;
              v147 = v148;
            }

            ++v145;
          }

          while (v29 != v145);
          v149 = 28.1;
          if (v144 <= 0x7CF)
          {
            v149 = (v144 * 0.07 / 2000.0 + 0.77) * 28.1;
          }

          for (i = 0; i != v29; ++i)
          {
            v151 = *(v84 + i) - v147;
            *(v84 + i) = v151;
            if (v151 >= v149)
            {
              *(v84 + i) = v149;
              v518[v144 * v523 + (i >> 3)] |= 1 << (i & 7);
            }
          }

          ++v144;
        }

        while (v144 != v15);
        v152 = *(v514 + v15 - 1);
        v153 = &v518[(v15 - 2) * v523];
        v154 = v15;
        v130 = 1;
        v131 = __b;
        do
        {
          if ((v153[v152 >> 3] >> (v152 & 7)))
          {
            if (v152 != __src[v154])
            {
              ++v130;
            }

            v152 = __src[v154];
          }

          v153 -= v523;
          __src[v154--] = v152;
        }

        while (v154 != 1);
      }

      else
      {
        bzero(v82, v15);
        v130 = 1;
        v131 = __b;
      }

      if (v29)
      {
        memset_pattern16(v131, &unk_29864C2F0, 2 * v29);
      }

      v155 = 0;
      v156 = 0;
      do
      {
        v157 = v82[v155];
        if (*(v131 + v157) == 256)
        {
          *(v131 + v157) = v156++;
        }

        ++v155;
      }

      while (v15 != v155);
      for (j = 0; j != v15; ++j)
      {
        v82[j] = *(v131 + v82[j]);
      }

      v29 = v156;
      if (v156)
      {
        v159 = v556;
        v160 = v156;
        do
        {
          bzero(v159, 0x408uLL);
          v159[129] = 0x7FF0000000000000;
          v159 += 130;
          --v160;
        }

        while (v160);
      }

      for (k = 0; k != v15; ++k)
      {
        v162 = &v556[1040 * v82[k]];
        ++*&v162[4 * *(v20 + k)];
        ++*(v162 + 128);
      }

      v129 = v546 + 1;
    }

    while (v546 + 1 != v526);
    BrotliFree(v542, v83);
    BrotliFree(v542, v84);
    BrotliFree(v542, v518);
    BrotliFree(v542, __b);
    BrotliFree(v542, v556);
    v524 = v130;
    if (v130)
    {
      v487 = BrotliAllocate(v542);
      v163 = BrotliAllocate(v542);
      v164 = 16 * v130 + 1008;
      v165 = v164 >> 6;
      if (v164 >= 0x40)
      {
        v167 = BrotliAllocate(v542);
        v166 = BrotliAllocate(v542);
      }

      else
      {
        v166 = 0;
        v167 = 0;
      }

      v490 = BrotliAllocate(v542);
    }

    else
    {
      v167 = BrotliAllocate(v542);
      v166 = BrotliAllocate(v542);
      v163 = 0;
      v487 = 0;
      v490 = 0;
      v165 = 15;
    }

    result = BrotliAllocate(v542);
    v488 = result;
    v649 = 0u;
    v648 = 0u;
    v647 = 0u;
    v646 = 0u;
    v645 = 0u;
    v644 = 0u;
    v643 = 0u;
    v642 = 0u;
    v641 = 0u;
    v640 = 0u;
    v639 = 0u;
    v638 = 0u;
    v637 = 0u;
    v636 = 0u;
    v635 = 0u;
    v634 = 0u;
    v633 = 0u;
    v632 = 0u;
    v631 = 0u;
    v630 = 0u;
    v629 = 0u;
    v628 = 0u;
    v627 = 0u;
    v626 = 0u;
    v625 = 0u;
    v624 = 0u;
    v623 = 0u;
    v622 = 0u;
    v621 = 0u;
    v620 = 0u;
    v619 = 0u;
    v618 = 0u;
    v617 = 0u;
    v616 = 0u;
    v615 = 0u;
    v614 = 0u;
    v613 = 0u;
    v612 = 0u;
    v611 = 0u;
    v610 = 0u;
    v609 = 0u;
    v608 = 0u;
    v607 = 0u;
    v606 = 0u;
    v605 = 0u;
    v604 = 0u;
    v603 = 0u;
    v602 = 0u;
    v601 = 0u;
    v600 = 0u;
    v599 = 0u;
    v598 = 0u;
    v597 = 0u;
    v596 = 0u;
    v595 = 0u;
    v594 = 0u;
    v593 = 0u;
    v592 = 0u;
    v591 = 0u;
    v590 = 0u;
    v589 = 0u;
    v588 = 0u;
    v587 = 0u;
    v586 = 0u;
    v19 = v551;
    if (*(v542 + 24))
    {
      goto LABEL_209;
    }

    bzero(v163, 4 * v130);
    v168 = 0;
    v169 = (v514 + 1);
    do
    {
      ++v163[v168];
      if (v15 == 1 || *(v169 - 1) != *v169)
      {
        ++v168;
      }

      ++v169;
      --v15;
    }

    while (v15);
    if (v130)
    {
      v527 = 0;
      __ba = 0;
      v557 = 0;
      v507 = v165;
      v511 = 0;
      v519 = 0;
      v547 = v487;
      v170 = v130;
      v171 = v166;
      v172 = v167;
      v173 = v490;
      while (1)
      {
        __srca = v172;
        v499 = v171;
        v503 = v165;
        v174 = 0;
        v492 = v170 - 64;
        if (v170 >= 0x40)
        {
          v170 = 64;
        }

        v175 = v170 <= 1 ? 1 : v170;
        v176 = v511;
        do
        {
          v177 = (v173 + 1040 * v174);
          bzero(v177, 0x408uLL);
          v177[129] = 0x7FF0000000000000;
          if (v163[&v557[v174]])
          {
            v178 = 0;
            do
            {
              ++*(v177 + v176[v20 + v178++]);
              v177[128] = v178;
            }

            while (v178 < v163[&v557[v174]]);
            v176 += v178;
          }

          BrotliPopulationCostLiteral(v173 + 1040 * v174);
          v177[129] = v179;
          *(&v618 + v174) = v174;
          *(&v602 + v174) = v174;
          *(&v634 + v174++) = 1;
        }

        while (v174 != v175);
        v180 = v524 - v557 >= 0x40 ? 64 : v524 - v557;
        result = BrotliHistogramCombineLiteral(v173, &v634, &v602, &v618, v488, v180, v180, 0x40uLL, 0x800uLL);
        v573 = result;
        v511 = v176;
        if (v503 >= __ba + result)
        {
          v167 = __srca;
          v182 = v499;
          v183 = v503;
        }

        else
        {
          if (v503)
          {
            v181 = v503;
          }

          else
          {
            v181 = __ba + result;
          }

          v182 = v499;
          do
          {
            v183 = v181;
            v181 *= 2;
          }

          while (v183 < __ba + result);
          v184 = BrotliAllocate(v542);
          v167 = v184;
          if (*(v542 + 24))
          {
            v185 = 1;
          }

          else
          {
            v185 = v503 == 0;
          }

          if (!v185)
          {
            memcpy(v184, __srca, 1040 * v503);
          }

          BrotliFree(v542, __srca);
          result = v573;
        }

        if (v507 >= result + v527)
        {
          v187 = v507;
          v166 = v182;
          v19 = v551;
        }

        else
        {
          if (v507)
          {
            v186 = v507;
          }

          else
          {
            v186 = result + v527;
          }

          do
          {
            v187 = v186;
            v186 *= 2;
          }

          while (v187 < result + v527);
          v188 = BrotliAllocate(v542);
          v166 = v188;
          if (*(v542 + 24))
          {
            v189 = 1;
          }

          else
          {
            v189 = v507 == 0;
          }

          if (!v189)
          {
            memcpy(v188, v182, 4 * v507);
          }

          BrotliFree(v542, v182);
          v19 = v551;
          result = v573;
        }

        if (*v19)
        {
          goto LABEL_209;
        }

        if (result)
        {
          v190 = 0;
          v504 = v166;
          v191 = (v167 + 1040 * __ba);
          v192 = v166 + 4 * v527;
          do
          {
            v193 = *(&v618 + v190);
            memcpy(v191, (v490 + 1040 * v193), 0x410uLL);
            result = v573;
            *(v192 + 4 * v190) = *(&v634 + v193);
            *(&v586 + *(&v618 + v190)) = v190;
            v190 = v190 + 1;
            v191 += 1040;
          }

          while (v573 != v190);
          __ba = v190 + __ba;
          v527 += v190;
          v20 = v580;
          v166 = v504;
        }

        v194 = &v602;
        v195 = v547;
        do
        {
          v196 = *v194++;
          *v195++ = *(&v586 + v196) + v519;
          --v175;
        }

        while (v175);
        v519 += result;
        v547 += 64;
        v165 = v183;
        v171 = v166;
        v507 = v187;
        v172 = v167;
        v557 += 64;
        v173 = v490;
        v170 = v492;
        if (v557 >= v524)
        {
          goto LABEL_323;
        }
      }
    }

    v519 = 0;
    v173 = v490;
LABEL_323:
    v239 = v542;
    result = BrotliFree(v542, v173);
    v240 = v519;
    if (v519 << 6 >= (v519 >> 1) * v519)
    {
      v241 = (v519 >> 1) * v519;
    }

    else
    {
      v241 = v519 << 6;
    }

    if (v241 < 0x801)
    {
      v19 = v551;
    }

    else
    {
      BrotliFree(v542, v488);
      result = BrotliAllocate(v542);
      v488 = result;
      v19 = v551;
      if (*(v542 + 24))
      {
        goto LABEL_209;
      }

      v239 = v542;
      v240 = v519;
    }

    if (v240)
    {
      result = BrotliAllocate(v239);
      v19 = v551;
      v574 = result;
      if (*(v239 + 24))
      {
        goto LABEL_209;
      }

      v242 = 0;
      v243 = v524;
      v244 = vdupq_n_s64(v519 - 1);
      v245 = xmmword_29862D9C0;
      v246 = xmmword_29862D9D0;
      v247 = (result + 8);
      v248 = vdupq_n_s64(4uLL);
      do
      {
        v249 = vmovn_s64(vcgeq_u64(v244, v246));
        if (vuzp1_s16(v249, *v244.i8).u8[0])
        {
          *(v247 - 2) = v242;
        }

        if (vuzp1_s16(v249, *&v244).i8[2])
        {
          *(v247 - 1) = v242 + 1;
        }

        if (vuzp1_s16(*&v244, vmovn_s64(vcgeq_u64(v244, *&v245))).i32[1])
        {
          *v247 = v242 + 2;
          v247[1] = v242 + 3;
        }

        v242 += 4;
        v245 = vaddq_s64(v245, v248);
        v246 = vaddq_s64(v246, v248);
        v247 += 4;
      }

      while (((v519 + 3) & 0xFFFFFFFFFFFFFFFCLL) != v242);
      v250 = v542;
    }

    else
    {
      if (*v19)
      {
        goto LABEL_209;
      }

      v574 = 0;
      v250 = v542;
      v243 = v524;
    }

    v559 = BrotliHistogramCombineLiteral(v167, v166, v487, v574, v488, v519, v243, 0x100uLL, v241);
    BrotliFree(v250, v488);
    result = BrotliFree(v250, v166);
    if (v519)
    {
      result = BrotliAllocate(v250);
      v19 = v551;
      if (*(v250 + 24))
      {
        goto LABEL_209;
      }

      v275 = result;
      v276 = v167;
      memset(result, 255, 4 * v519);
    }

    else
    {
      v19 = v551;
      if (*v551)
      {
        goto LABEL_209;
      }

      v276 = v167;
      v275 = 0;
    }

    v548 = v275;
    if (v524)
    {
      __bd = 0;
      v304 = 0;
      v305 = 0;
      do
      {
        bzero(v585, 0x408uLL);
        v585[129] = 0x7FF0000000000000;
        if (v163[v304])
        {
          v306 = 0;
          do
          {
            ++*(v585 + *(v20 + v305 + v306++));
          }

          while (v306 < v163[v304]);
          v585[128] = v306;
          v305 += v306;
        }

        v307 = v304 - 1;
        if (!v304)
        {
          v307 = 0;
        }

        v308 = v487[v307];
        v309 = BrotliHistogramBitCostDistanceLiteral(v585, v276 + 1040 * v308);
        v310 = v559;
        if (v559)
        {
          v311 = v309;
          v312 = v574;
          do
          {
            v313 = BrotliHistogramBitCostDistanceLiteral(v585, v276 + 1040 * *v312);
            if (v313 < v311)
            {
              v308 = *v312;
              v311 = v313;
            }

            ++v312;
            --v310;
          }

          while (v310);
        }

        v487[v304] = v308;
        v275 = v548;
        if (*(v548 + 4 * v308) == -1)
        {
          *(v548 + 4 * v308) = __bd++;
        }

        ++v304;
      }

      while (v304 != v524);
    }

    BrotliFree(v542, v574);
    result = BrotliFree(v542, v276);
    v314 = *(v537 + 4);
    v315 = v524;
    if (v314 < v524)
    {
      if (!v314)
      {
        v314 = v524;
      }

      do
      {
        v316 = v314;
        v314 *= 2;
      }

      while (v316 < v524);
      v317 = BrotliAllocate(v542);
      v318 = v317;
      if (!*(v542 + 24))
      {
        v319 = *(v537 + 4);
        if (v319)
        {
          memcpy(v317, *(v537 + 2), v319);
        }
      }

      result = BrotliFree(v542, *(v537 + 2));
      *(v537 + 2) = v318;
      *(v537 + 4) = v316;
      v315 = v524;
      v275 = v548;
    }

    v320 = *(v537 + 5);
    v78 = v320 >= v315;
    v19 = v551;
    if (!v78)
    {
      if (!v320)
      {
        v320 = v524;
      }

      do
      {
        v321 = v320;
        v320 *= 2;
      }

      while (v321 < v524);
      v322 = BrotliAllocate(v542);
      v323 = v322;
      if (!*(v542 + 24))
      {
        v324 = *(v537 + 5);
        if (v324)
        {
          memcpy(v322, *(v537 + 3), 4 * v324);
        }
      }

      result = BrotliFree(v542, *(v537 + 3));
      *(v537 + 3) = v323;
      *(v537 + 5) = v321;
      v19 = v551;
    }

    if (!*v19)
    {
      v325 = v524;
      if (v524)
      {
        v326 = 0;
        v327 = 0;
        v328 = 0;
        v329 = v487 + 1;
        v330 = v163;
        v331 = v537;
        do
        {
          v332 = *v330++;
          v328 += v332;
          v333 = *(v329 - 1);
          if (v325 == 1 || v333 != *v329)
          {
            v334 = *(v275 + 4 * v333);
            *(*(v537 + 2) + v327) = v334;
            *(*(v537 + 3) + 4 * v327) = v328;
            if (v326 <= v334)
            {
              v326 = v334;
            }

            ++v327;
            v328 = 0;
          }

          ++v329;
          --v325;
        }

        while (v325);
        v335 = v326 + 1;
      }

      else
      {
        v327 = 0;
        v335 = 1;
        v331 = v537;
      }

      *v331 = v335;
      v331[1] = v327;
      v11 = v542;
      BrotliFree(v542, v275);
      BrotliFree(v542, v163);
      result = BrotliFree(v542, v487);
      if (!*(v542 + 24))
      {
        result = BrotliFree(v542, v514);
      }

      v19 = v551;
      v20 = v580;
      goto LABEL_41;
    }

LABEL_209:
    v11 = v542;
    goto LABEL_41;
  }

  v30 = *(v537 + 4);
  v31 = *(v537 + 1) + 1;
  if (v30 < v31)
  {
    if (!v30)
    {
      v30 = *(v537 + 1) + 1;
    }

    do
    {
      v32 = v30;
      v30 *= 2;
    }

    while (v32 < v31);
    v33 = BrotliAllocate(v542);
    v34 = v33;
    if (!*(v542 + 24))
    {
      v35 = *(v537 + 4);
      if (v35)
      {
        memcpy(v33, *(v537 + 2), v35);
      }
    }

    result = BrotliFree(v542, *(v537 + 2));
    *(v537 + 2) = v34;
    *(v537 + 4) = v32;
    v31 = *(v537 + 1) + 1;
  }

  v36 = *(v537 + 5);
  if (v36 < v31)
  {
    if (!v36)
    {
      v36 = v31;
    }

    do
    {
      v37 = v36;
      v36 *= 2;
    }

    while (v37 < v31);
    v38 = BrotliAllocate(v542);
    v39 = v38;
    if (!*(v542 + 24))
    {
      v40 = *(v537 + 5);
      if (v40)
      {
        memcpy(v38, *(v537 + 3), 4 * v40);
      }
    }

    result = BrotliFree(v542, *(v537 + 3));
    *(v537 + 3) = v39;
    *(v537 + 5) = v37;
  }

  if (*v551)
  {
    return result;
  }

  *v537 = 1;
  *(*(v537 + 2) + *(v537 + 1)) = 0;
  v41 = *(v537 + 1);
  *(*(v537 + 3) + 4 * v41) = v15;
  v42 = v41 + 1;
  v19 = v551;
  *(v537 + 1) = v42;
LABEL_41:
  if (*v19)
  {
    return result;
  }

  v552 = v19;
  result = BrotliFree(v11, v20);
  if (!a3)
  {
    if (*v552)
    {
      return result;
    }

    *a9 = 1;
    result = BrotliFree(v11, 0);
    v86 = 0;
    goto LABEL_92;
  }

  result = BrotliAllocate(v11);
  if (*(v11 + 24))
  {
    return result;
  }

  v43 = result;
  v44 = 0;
  v45 = (a2 + 12);
  do
  {
    v46 = *v45;
    v45 += 8;
    *(result + 2 * v44++) = v46;
  }

  while (a3 != v44);
  if (a3 <= 0x6783)
  {
    v47 = a3 / 0x212u + 1;
  }

  else
  {
    v47 = 50;
  }

  if (a3 <= 0x7F)
  {
    v48 = *(a9 + 32);
    v49 = *(a9 + 8) + 1;
    if (v48 < v49)
    {
      if (!v48)
      {
        v48 = *(a9 + 8) + 1;
      }

      do
      {
        v50 = v48;
        v48 *= 2;
      }

      while (v50 < v49);
      v51 = BrotliAllocate(v11);
      v52 = v51;
      if (!*(v11 + 24))
      {
        v53 = *(a9 + 32);
        if (v53)
        {
          memcpy(v51, *(a9 + 16), v53);
        }
      }

      result = BrotliFree(v11, *(a9 + 16));
      *(a9 + 16) = v52;
      *(a9 + 32) = v50;
      v49 = *(a9 + 8) + 1;
    }

    v54 = *(a9 + 40);
    if (v54 < v49)
    {
      if (!v54)
      {
        v54 = v49;
      }

      do
      {
        v55 = v54;
        v54 *= 2;
      }

      while (v55 < v49);
      v56 = BrotliAllocate(v11);
      v57 = v56;
      if (!*(v11 + 24))
      {
        v58 = *(a9 + 40);
        if (v58)
        {
          memcpy(v56, *(a9 + 24), 4 * v58);
        }
      }

      result = BrotliFree(v11, *(a9 + 24));
      *(a9 + 24) = v57;
      *(a9 + 40) = v55;
    }

    if (*v552)
    {
      return result;
    }

    *a9 = 1;
    *(*(a9 + 16) + *(a9 + 8)) = 0;
    v59 = *(a9 + 8);
    *(*(a9 + 24) + 4 * v59) = a3;
    v60 = v59 + 1;
    v61 = v552;
    *(a9 + 8) = v60;
    goto LABEL_373;
  }

  result = BrotliAllocate(v11);
  if (*(v11 + 24))
  {
    return result;
  }

  v543 = v11;
  v572 = result;
  v105 = result;
  v106 = v47;
  do
  {
    bzero(v105, 0xB08uLL);
    v105[353] = 0x7FF0000000000000;
    v105 += 354;
    --v106;
  }

  while (v106);
  v107 = 0;
  LODWORD(v108) = 7;
  do
  {
    v109 = v107 * a3 / v47;
    if (v107)
    {
      v108 = (16807 * v108);
      v109 += v108 % (a3 / v47);
    }

    v110 = 0;
    if (v109 + 40 >= a3)
    {
      v111 = a3 - 41;
    }

    else
    {
      v111 = v109;
    }

    v112 = &v572[2832 * v107];
    v113 = v43 + 2 * v111;
    *(v112 + 352) += 40;
    do
    {
      ++*&v112[4 * *(v113 + v110)];
      v110 += 2;
    }

    while (v110 != 80);
    ++v107;
  }

  while (v107 != v47);
  v545 = v43;
  v114 = v47 + 2 * a3 / 0x28 + 99;
  v115 = v114 / v47 * v47;
  if (v114 != v114 % v47)
  {
    v116 = 0;
    LODWORD(v117) = 7;
    do
    {
      bzero(v585, 0xB08uLL);
      v117 = (16807 * v117);
      v118 = (v43 + 2 * (v117 % (a3 - 39)));
      v119 = -40;
      do
      {
        v120 = *v118++;
        ++*(v585 + v120);
        v78 = __CFADD__(v119++, 1);
      }

      while (!v78);
      v121 = 0;
      v122 = 0;
      v123 = &v572[2832 * (v116 % v47)];
      *(v123 + 352) += 40;
      do
      {
        *&v123[4 * v122] = vaddq_s32(*&v123[4 * v122], *&v585[v121]);
        v122 += 4;
        v121 += 2;
      }

      while (v121 != 352);
      ++v116;
    }

    while (v116 < v115);
  }

  v124 = BrotliAllocate(v543);
  v125 = BrotliAllocate(v543);
  v126 = BrotliAllocate(v543);
  v127 = ((v47 + 7) >> 3) * a3 ? BrotliAllocate(v543) : 0;
  result = BrotliAllocate(v543);
  v197 = *(a7 + 4) <= 10 ? 3 : 10;
  if (*(v543 + 24))
  {
    return result;
  }

  v538 = result;
  v198 = 0;
  v199 = a3;
  v520 = v127;
  v500 = (v124 - 2);
  __bb = v197;
  do
  {
    v558 = v198;
    if (v47 > 1)
    {
      bzero(v125, 5632 * v47);
      v202 = 0;
      v203 = (v572 + 2816);
      do
      {
        v204 = *v203;
        if (v204 > 0xFF)
        {
          v205 = log2(v204);
        }

        else
        {
          v205 = kBrotliLog2Table[v204];
        }

        v203 += 708;
        *&v125[8 * v202++] = v205;
      }

      while (v47 != v202);
      v528 = (v47 + 7) >> 3;
      v206 = &v125[5624 * v47];
      v207 = (v572 + 2812);
      v208 = 704;
      do
      {
        v209 = 0;
        --v208;
        v210 = v207;
        do
        {
          v211 = *&v125[8 * v209];
          v212 = *v210;
          if (v212)
          {
            if (v212 > 0xFF)
            {
              v213 = log2(v212);
            }

            else
            {
              v213 = kBrotliLog2Table[v212];
            }
          }

          else
          {
            v213 = -2.0;
          }

          v210 += 708;
          *&v206[8 * v209++] = v211 - v213;
        }

        while (v47 != v209);
        v206 -= 8 * v47;
        --v207;
      }

      while (v208);
      bzero(v126, 8 * v47);
      v199 = a3;
      bzero(v520, v528 * a3);
      v214 = 0;
      v43 = v545;
      do
      {
        v215 = 0;
        v216 = &v125[8 * v47 * *(v545 + 2 * v214)];
        v217 = 1.0e99;
        do
        {
          v218 = *&v216[8 * v215] + *(v126 + v215);
          *(v126 + v215) = v218;
          if (v218 < v217)
          {
            v124[v214] = v215;
            v217 = v218;
          }

          ++v215;
        }

        while (v47 != v215);
        v219 = 13.5;
        if (v214 <= 0x7CF)
        {
          v219 = (v214 * 0.07 / 2000.0 + 0.77) * 13.5;
        }

        for (m = 0; m != v47; ++m)
        {
          v221 = *(v126 + m) - v217;
          *(v126 + m) = v221;
          if (v221 >= v219)
          {
            *(v126 + m) = v219;
            v520[v214 * v528 + (m >> 3)] |= 1 << (m & 7);
          }
        }

        ++v214;
      }

      while (v214 != a3);
      v222 = v124[a3 - 1];
      v223 = &v520[(a3 - 2) * v528];
      v224 = a3;
      v200 = 1;
      v201 = v538;
      do
      {
        if ((v223[v222 >> 3] >> (v222 & 7)))
        {
          if (v222 != v500[v224])
          {
            ++v200;
          }

          v222 = v500[v224];
        }

        v223 -= v528;
        v500[v224--] = v222;
      }

      while (v224 != 1);
    }

    else
    {
      bzero(v124, v199);
      v200 = 1;
      v201 = v538;
    }

    if (v47)
    {
      memset_pattern16(v201, &unk_29864C2F0, 2 * v47);
    }

    v225 = 0;
    v226 = 0;
    do
    {
      v227 = v124[v225];
      if (*(v201 + v227) == 256)
      {
        *(v201 + v227) = v226++;
      }

      ++v225;
    }

    while (v199 != v225);
    for (n = 0; n != v199; ++n)
    {
      v124[n] = *(v201 + v124[n]);
    }

    v47 = v226;
    if (v226)
    {
      v229 = v572;
      v230 = v226;
      do
      {
        bzero(v229, 0xB08uLL);
        v229[353] = 0x7FF0000000000000;
        v229 += 354;
        --v230;
      }

      while (v230);
    }

    for (ii = 0; ii != v199; ++ii)
    {
      v232 = &v572[2832 * v124[ii]];
      ++*&v232[4 * *(v43 + 2 * ii)];
      ++*(v232 + 352);
    }

    v198 = v558 + 1;
  }

  while (v558 + 1 != __bb);
  BrotliFree(v543, v125);
  BrotliFree(v543, v126);
  BrotliFree(v543, v520);
  BrotliFree(v543, v538);
  BrotliFree(v543, v572);
  v233 = 4 * v200;
  v521 = v200;
  if (v200)
  {
    v234 = v200;
    v486 = BrotliAllocate(v543);
    v200 = BrotliAllocate(v543);
    v235 = 16 * v234 + 1008;
    v236 = v235 >> 6;
    if (v235 >= 0x40)
    {
      v238 = BrotliAllocate(v543);
      v237 = BrotliAllocate(v543);
    }

    else
    {
      v237 = 0;
      v238 = 0;
    }

    v491 = BrotliAllocate(v543);
  }

  else
  {
    v238 = BrotliAllocate(v543);
    v237 = BrotliAllocate(v543);
    v486 = 0;
    v491 = 0;
    v236 = 15;
  }

  result = BrotliAllocate(v543);
  v489 = result;
  v649 = 0u;
  v648 = 0u;
  v647 = 0u;
  v646 = 0u;
  v645 = 0u;
  v644 = 0u;
  v643 = 0u;
  v642 = 0u;
  v641 = 0u;
  v640 = 0u;
  v639 = 0u;
  v638 = 0u;
  v637 = 0u;
  v636 = 0u;
  v635 = 0u;
  v634 = 0u;
  v633 = 0u;
  v632 = 0u;
  v631 = 0u;
  v630 = 0u;
  v629 = 0u;
  v628 = 0u;
  v627 = 0u;
  v626 = 0u;
  v625 = 0u;
  v624 = 0u;
  v623 = 0u;
  v622 = 0u;
  v621 = 0u;
  v620 = 0u;
  v619 = 0u;
  v618 = 0u;
  v617 = 0u;
  v616 = 0u;
  v615 = 0u;
  v614 = 0u;
  v613 = 0u;
  v612 = 0u;
  v611 = 0u;
  v610 = 0u;
  v609 = 0u;
  v608 = 0u;
  v607 = 0u;
  v606 = 0u;
  v605 = 0u;
  v604 = 0u;
  v603 = 0u;
  v602 = 0u;
  v601 = 0u;
  v600 = 0u;
  v599 = 0u;
  v598 = 0u;
  v597 = 0u;
  v596 = 0u;
  v595 = 0u;
  v594 = 0u;
  v593 = 0u;
  v592 = 0u;
  v591 = 0u;
  v590 = 0u;
  v589 = 0u;
  v588 = 0u;
  v587 = 0u;
  v586 = 0u;
  v61 = v552;
  if (*(v543 + 24))
  {
    goto LABEL_372;
  }

  bzero(v200, v233);
  v277 = v238;
  v278 = v237;
  v279 = 0;
  v280 = v124 + 1;
  v281 = a3;
  do
  {
    ++*(v200 + 4 * v279);
    if (v281 == 1 || *(v280 - 1) != *v280)
    {
      ++v279;
    }

    ++v280;
    --v281;
  }

  while (v281);
  v282 = v521;
  if (v521)
  {
    v529 = 0;
    __bc = 0;
    v576 = 0;
    v581 = 0;
    v512 = 0;
    v539 = v486;
    v501 = v237;
    v505 = v236;
    __srcb = v277;
    while (1)
    {
      v515 = v236;
      v283 = 0;
      v493 = v282 - 64;
      if (v282 >= 0x40)
      {
        v282 = 64;
      }

      v284 = v282 <= 1 ? 1 : v282;
      do
      {
        v285 = (v491 + 2832 * v283);
        bzero(v285, 0xB08uLL);
        v285[353] = 0x7FF0000000000000;
        if (*(v200 + 4 * &v576[v283]))
        {
          v286 = 0;
          do
          {
            ++*(v285 + *(v43 + 2 * v581 + 2 * v286++));
          }

          while (v286 < *(v200 + 4 * &v576[v283]));
          v285[352] = v286;
          v581 = v581 + v286;
        }

        BrotliPopulationCostCommand(v491 + 2832 * v283);
        v285[353] = v287;
        *(&v618 + v283) = v283;
        *(&v602 + v283) = v283;
        *(&v634 + v283++) = 1;
      }

      while (v283 != v284);
      v288 = (v521 - v576) >= 0x40 ? 64 : v521 - v576;
      result = BrotliHistogramCombineCommand(v491, &v634, &v602, &v618, v489, v288, v288, 0x40uLL, 0x800uLL);
      v560 = result;
      if (v505 >= __bc + result)
      {
        v277 = __srcb;
        v290 = v505;
      }

      else
      {
        if (v505)
        {
          v289 = v505;
        }

        else
        {
          v289 = __bc + result;
        }

        do
        {
          v290 = v289;
          v289 *= 2;
        }

        while (v290 < __bc + result);
        v291 = BrotliAllocate(v543);
        v292 = v291;
        if (*(v543 + 24))
        {
          v293 = 1;
        }

        else
        {
          v293 = v505 == 0;
        }

        if (!v293)
        {
          memcpy(v291, __srcb, 2832 * v505);
        }

        BrotliFree(v543, __srcb);
        v277 = v292;
        result = v560;
      }

      v508 = v277;
      if (v236 >= result + v529)
      {
        v278 = v501;
        v61 = v552;
      }

      else
      {
        if (v236)
        {
          v294 = v236;
        }

        else
        {
          v294 = result + v529;
        }

        do
        {
          v236 = v294;
          v294 *= 2;
        }

        while (v236 < result + v529);
        v295 = BrotliAllocate(v543);
        v278 = v295;
        if (*(v543 + 24))
        {
          v296 = 1;
        }

        else
        {
          v296 = v515 == 0;
        }

        if (!v296)
        {
          memcpy(v295, v501, 4 * v515);
        }

        BrotliFree(v543, v501);
        v61 = v552;
        v277 = v508;
        result = v560;
      }

      if (*v61)
      {
        goto LABEL_372;
      }

      if (result)
      {
        v297 = 0;
        v298 = &v277[2832 * __bc];
        v516 = v278;
        v299 = v278 + 4 * v529;
        do
        {
          v300 = *(&v618 + v297);
          memcpy(v298, (v491 + 2832 * v300), 0xB10uLL);
          result = v560;
          *(v299 + 4 * v297) = *(&v634 + v300);
          *(&v586 + *(&v618 + v297)) = v297;
          v297 = v297 + 1;
          v298 += 2832;
        }

        while (v560 != v297);
        __bc = v297 + __bc;
        v529 += v297;
        v43 = v545;
        v277 = v508;
        v278 = v516;
      }

      v301 = &v602;
      v302 = v539;
      do
      {
        v303 = *v301++;
        *v302++ = *(&v586 + v303) + v512;
        --v284;
      }

      while (v284);
      v512 += result;
      v539 += 64;
      v282 = v493;
      v501 = v278;
      v505 = v290;
      __srcb = v277;
      v576 += 64;
      if (v576 >= v521)
      {
        goto LABEL_473;
      }
    }
  }

  v512 = 0;
LABEL_473:
  v336 = v277;
  v337 = v543;
  result = BrotliFree(v543, v491);
  v338 = v512;
  if (v512 << 6 >= (v512 >> 1) * v512)
  {
    v339 = (v512 >> 1) * v512;
  }

  else
  {
    v339 = v512 << 6;
  }

  if (v339 >= 0x801)
  {
    BrotliFree(v543, v489);
    result = BrotliAllocate(v543);
    v489 = result;
    v61 = v552;
    if (*(v543 + 24))
    {
      goto LABEL_372;
    }

    v337 = v543;
    v338 = v512;
  }

  if (v338)
  {
    result = BrotliAllocate(v337);
    v577 = result;
    v61 = v552;
    if (*(v337 + 24))
    {
      goto LABEL_372;
    }

    v340 = v336;
    v341 = 0;
    v342 = vdupq_n_s64(v512 - 1);
    v343 = xmmword_29862D9C0;
    v344 = xmmword_29862D9D0;
    v345 = v577 + 2;
    v346 = vdupq_n_s64(4uLL);
    do
    {
      v347 = vmovn_s64(vcgeq_u64(v342, v344));
      if (vuzp1_s16(v347, *v342.i8).u8[0])
      {
        *(v345 - 2) = v341;
      }

      if (vuzp1_s16(v347, *&v342).i8[2])
      {
        *(v345 - 1) = v341 + 1;
      }

      if (vuzp1_s16(*&v342, vmovn_s64(vcgeq_u64(v342, *&v343))).i32[1])
      {
        *v345 = v341 + 2;
        v345[1] = v341 + 3;
      }

      v341 += 4;
      v343 = vaddq_s64(v343, v346);
      v344 = vaddq_s64(v344, v346);
      v345 += 4;
    }

    while (((v512 + 3) & 0xFFFFFFFFFFFFFFFCLL) != v341);
  }

  else
  {
    v61 = v552;
    if (*v552)
    {
      goto LABEL_372;
    }

    v340 = v336;
    v577 = 0;
  }

  v562 = BrotliHistogramCombineCommand(v340, v278, v486, v577, v489, v512, v521, 0x100uLL, v339);
  BrotliFree(v543, v489);
  result = BrotliFree(v543, v278);
  if (v512)
  {
    result = BrotliAllocate(v543);
    v582 = result;
    v43 = v545;
    v61 = v552;
    if (*(v543 + 24))
    {
      goto LABEL_372;
    }

    v387 = v336;
    memset(result, 255, 4 * v512);
  }

  else
  {
    v43 = v545;
    v61 = v552;
    if (*v552)
    {
      goto LABEL_372;
    }

    v387 = v336;
    v582 = 0;
  }

  if (v521)
  {
    v541 = 0;
    v417 = 0;
    v418 = 0;
    do
    {
      bzero(v585, 0xB08uLL);
      v585[353] = 0x7FF0000000000000;
      if (*(v200 + 4 * v417))
      {
        v419 = 0;
        do
        {
          ++*(v585 + *(v545 + 2 * v418 + 2 * v419++));
        }

        while (v419 < *(v200 + 4 * v417));
        v585[352] = v419;
        v418 += v419;
      }

      v420 = v417 - 1;
      if (!v417)
      {
        v420 = 0;
      }

      v421 = v486[v420];
      v422 = v387;
      v423 = BrotliHistogramBitCostDistanceCommand(v585, v387 + 2832 * v421);
      v424 = v562;
      if (v562)
      {
        v425 = v423;
        v426 = v577;
        do
        {
          v427 = BrotliHistogramBitCostDistanceCommand(v585, v422 + 2832 * *v426);
          if (v427 < v425)
          {
            v421 = *v426;
            v425 = v427;
          }

          ++v426;
          --v424;
        }

        while (v424);
      }

      v486[v417] = v421;
      if (v582[v421] == -1)
      {
        v582[v421] = v541++;
      }

      v387 = v422;
      ++v417;
    }

    while (v417 != v521);
  }

  BrotliFree(v543, v577);
  result = BrotliFree(v543, v387);
  v428 = *(a9 + 32);
  if (v428 < v521)
  {
    if (!v428)
    {
      v428 = v521;
    }

    do
    {
      v429 = v428;
      v428 *= 2;
    }

    while (v429 < v521);
    v430 = BrotliAllocate(v543);
    v431 = v430;
    if (!*(v543 + 24))
    {
      v432 = *(a9 + 32);
      if (v432)
      {
        memcpy(v430, *(a9 + 16), v432);
      }
    }

    result = BrotliFree(v543, *(a9 + 16));
    *(a9 + 16) = v431;
    *(a9 + 32) = v429;
  }

  v433 = *(a9 + 40);
  if (v433 < v521)
  {
    if (!v433)
    {
      v433 = v521;
    }

    do
    {
      v434 = v433;
      v433 *= 2;
    }

    while (v434 < v521);
    v435 = BrotliAllocate(v543);
    v436 = v435;
    if (!*(v543 + 24))
    {
      v437 = *(a9 + 40);
      if (v437)
      {
        memcpy(v435, *(a9 + 24), 4 * v437);
      }
    }

    result = BrotliFree(v543, *(a9 + 24));
    *(a9 + 24) = v436;
    *(a9 + 40) = v434;
  }

  v43 = v545;
  v61 = v552;
  if (!*v552)
  {
    v438 = v521;
    if (v521)
    {
      v439 = 0;
      v438 = 0;
      v440 = 0;
      v441 = v486 + 1;
      v442 = v200;
      v443 = v521;
      do
      {
        v444 = *v442++;
        v440 += v444;
        v445 = *(v441 - 1);
        v446 = v443;
        if (v443 == 1 || v445 != *v441)
        {
          v447 = v582[v445];
          v438[*(a9 + 16)] = v447;
          *(*(a9 + 24) + 4 * v438) = v440;
          if (v439 <= v447)
          {
            v439 = v447;
          }

          ++v438;
          v440 = 0;
        }

        ++v441;
        --v443;
      }

      while (v446 != 1);
      v448 = v439 + 1;
    }

    else
    {
      v448 = 1;
    }

    *a9 = v448;
    *(a9 + 8) = v438;
    v11 = v543;
    BrotliFree(v543, v582);
    BrotliFree(v543, v200);
    result = BrotliFree(v543, v486);
    v43 = v545;
    v61 = v552;
    if (!*(v543 + 24))
    {
      result = BrotliFree(v543, v124);
      v61 = v552;
    }

    goto LABEL_373;
  }

LABEL_372:
  v11 = v543;
LABEL_373:
  if (*v61)
  {
    return result;
  }

  BrotliFree(v11, v43);
  result = BrotliAllocate(v11);
  v86 = result;
LABEL_92:
  v87 = v552;
  if (*v552)
  {
    return result;
  }

  v88 = a3;
  if (!a3)
  {
    goto LABEL_203;
  }

  v89 = 0;
  v90 = (a2 + 14);
  do
  {
    if ((*(v90 - 5) & 0x1FFFFFF) != 0 && *(v90 - 1) >= 0x80u)
    {
      *(v86 + 2 * v89++) = *v90 & 0x3FF;
    }

    v90 += 8;
    --v88;
  }

  while (v88);
  v91 = v89 >> 6 <= 0x1A8 ? v89 / 0x220u + 1 : 50;
  v87 = v552;
  if (!v89)
  {
LABEL_203:
    *a10 = 1;
    goto LABEL_204;
  }

  if (v89 > 0x7F)
  {
    result = BrotliAllocate(v11);
    if (*(v11 + 24))
    {
      return result;
    }

    v575 = result;
    v251 = result;
    v252 = v91;
    do
    {
      bzero(v251, 0x888uLL);
      v251[273] = 0x7FF0000000000000;
      v251 += 274;
      --v252;
    }

    while (v252);
    v253 = 0;
    LODWORD(v254) = 7;
    do
    {
      v255 = v253 * v89 / v91;
      if (v253)
      {
        v254 = (16807 * v254);
        v255 += v254 % (v89 / v91);
      }

      v256 = 0;
      if (v255 + 40 >= v89)
      {
        v257 = v89 - 41;
      }

      else
      {
        v257 = v255;
      }

      v258 = &v575[2192 * v253];
      v259 = v86 + 2 * v257;
      *(v258 + 272) += 40;
      do
      {
        ++*&v258[4 * *(v259 + v256)];
        v256 += 2;
      }

      while (v256 != 80);
      ++v253;
    }

    while (v253 != v91);
    v565 = v89;
    v260 = v91 + 2 * v89 / 0x28 + 99;
    v261 = v260 / v91 * v91;
    if (v260 != v260 % v91)
    {
      v262 = 0;
      v263 = v89 - 39;
      LODWORD(v89) = 7;
      do
      {
        bzero(v585, 0x888uLL);
        v89 = (16807 * v89);
        v264 = (v86 + 2 * (v89 % v263));
        v265 = -40;
        do
        {
          v266 = *v264++;
          ++*(v585 + v266);
          v78 = __CFADD__(v265++, 1);
        }

        while (!v78);
        v267 = 0;
        v268 = 0;
        v269 = &v575[2192 * (v262 % v91)];
        *(v269 + 272) += 40;
        do
        {
          *&v269[4 * v268] = vaddq_s32(*&v269[4 * v268], *&v585[v267]);
          v268 += 4;
          v267 += 2;
        }

        while (v267 != 272);
        ++v262;
      }

      while (v262 < v261);
    }

    v270 = v565;
    v271 = BrotliAllocate(v11);
    v272 = BrotliAllocate(v11);
    v273 = BrotliAllocate(v11);
    if (((v91 + 7) >> 3) * v565)
    {
      v274 = BrotliAllocate(v11);
    }

    else
    {
      v274 = 0;
    }

    result = BrotliAllocate(v11);
    v348 = 3;
    if (*(a7 + 4) > 10)
    {
      v348 = 10;
    }

    v554 = v348;
    if (*(v11 + 24))
    {
      return result;
    }

    v349 = result;
    v350 = 0;
    v540 = v86;
    v544 = v11;
    v561 = result;
    v509 = (v271 - 2);
    do
    {
      v569 = v350;
      if (v91 > 1)
      {
        bzero(v272, 4352 * v91);
        v352 = 0;
        v353 = (v575 + 2176);
        do
        {
          v354 = *v353;
          if (v354 > 0xFF)
          {
            v355 = log2(v354);
          }

          else
          {
            v355 = kBrotliLog2Table[v354];
          }

          v353 += 548;
          *&v272[8 * v352++] = v355;
        }

        while (v91 != v352);
        v549 = (v91 + 7) >> 3;
        v356 = &v272[4344 * v91];
        v357 = (v575 + 2172);
        v358 = 544;
        do
        {
          v359 = 0;
          --v358;
          v360 = v357;
          do
          {
            v361 = *&v272[8 * v359];
            v362 = *v360;
            if (v362)
            {
              if (v362 > 0xFF)
              {
                v363 = log2(v362);
              }

              else
              {
                v363 = kBrotliLog2Table[v362];
              }
            }

            else
            {
              v363 = -2.0;
            }

            v360 += 548;
            *&v356[8 * v359++] = v361 - v363;
          }

          while (v91 != v359);
          v356 -= 8 * v91;
          --v357;
        }

        while (v358);
        bzero(v273, 8 * v91);
        v270 = v565;
        bzero(v274, v549 * v565);
        v364 = 0;
        v86 = v540;
        v11 = v544;
        do
        {
          v365 = 0;
          v366 = &v272[8 * v91 * v540[v364]];
          v367 = 1.0e99;
          do
          {
            v368 = *&v366[8 * v365] + *(v273 + v365);
            *(v273 + v365) = v368;
            if (v368 < v367)
            {
              v271[v364] = v365;
              v367 = v368;
            }

            ++v365;
          }

          while (v91 != v365);
          v369 = 14.6;
          if (v364 <= 0x7CF)
          {
            v369 = (v364 * 0.07 / 2000.0 + 0.77) * 14.6;
          }

          for (jj = 0; jj != v91; ++jj)
          {
            v371 = *(v273 + jj) - v367;
            *(v273 + jj) = v371;
            if (v371 >= v369)
            {
              *(v273 + jj) = v369;
              v274[v364 * v549 + (jj >> 3)] |= 1 << (jj & 7);
            }
          }

          ++v364;
        }

        while (v364 != v565);
        v372 = v271[v565 - 1];
        v373 = &v274[(v565 - 2) * v549];
        v374 = v565;
        v351 = 1;
        v349 = v561;
        do
        {
          if ((v373[v372 >> 3] >> (v372 & 7)))
          {
            if (v372 != v509[v374])
            {
              ++v351;
            }

            v372 = v509[v374];
          }

          v373 -= v549;
          v509[v374--] = v372;
        }

        while (v374 != 1);
      }

      else
      {
        bzero(v271, v270);
        v351 = 1;
      }

      if (v91)
      {
        memset_pattern16(v349, &unk_29864C2F0, 2 * v91);
      }

      v375 = 0;
      v376 = 0;
      do
      {
        v377 = v271[v375];
        if (*(v349 + v377) == 256)
        {
          *(v349 + v377) = v376++;
        }

        ++v375;
      }

      while (v270 != v375);
      for (kk = 0; kk != v270; ++kk)
      {
        v271[kk] = *(v349 + v271[kk]);
      }

      v91 = v376;
      if (v376)
      {
        v379 = v575;
        v380 = v376;
        do
        {
          bzero(v379, 0x888uLL);
          v379[273] = 0x7FF0000000000000;
          v379 += 274;
          --v380;
        }

        while (v380);
      }

      v381 = 0;
      v270 = v565;
      do
      {
        v382 = &v575[2192 * v271[v381]];
        ++*&v382[4 * *(v86 + 2 * v381)];
        ++*(v382 + 272);
        ++v381;
      }

      while (v565 != v381);
      v350 = v569 + 1;
      v349 = v561;
    }

    while (v569 + 1 != v554);
    BrotliFree(v11, v272);
    BrotliFree(v11, v273);
    BrotliFree(v11, v274);
    BrotliFree(v11, v561);
    BrotliFree(v11, v575);
    v555 = v351;
    if (v351)
    {
      v494 = BrotliAllocate(v11);
      v383 = BrotliAllocate(v11);
      v384 = 16 * v351 + 1008;
      v525 = v384 >> 6;
      if (v384 >= 0x40)
      {
        v386 = BrotliAllocate(v11);
        v385 = BrotliAllocate(v11);
      }

      else
      {
        v385 = 0;
        v386 = 0;
      }

      v502 = BrotliAllocate(v11);
      v86 = v540;
    }

    else
    {
      v386 = BrotliAllocate(v11);
      v385 = BrotliAllocate(v11);
      v383 = 0;
      v494 = 0;
      v502 = 0;
      v525 = 15;
    }

    result = BrotliAllocate(v11);
    __srcc = result;
    v649 = 0u;
    v648 = 0u;
    v647 = 0u;
    v646 = 0u;
    v645 = 0u;
    v644 = 0u;
    v643 = 0u;
    v642 = 0u;
    v641 = 0u;
    v640 = 0u;
    v639 = 0u;
    v638 = 0u;
    v637 = 0u;
    v636 = 0u;
    v635 = 0u;
    v634 = 0u;
    v633 = 0u;
    v632 = 0u;
    v631 = 0u;
    v630 = 0u;
    v629 = 0u;
    v628 = 0u;
    v627 = 0u;
    v626 = 0u;
    v625 = 0u;
    v624 = 0u;
    v623 = 0u;
    v622 = 0u;
    v621 = 0u;
    v620 = 0u;
    v619 = 0u;
    v618 = 0u;
    v617 = 0u;
    v616 = 0u;
    v615 = 0u;
    v614 = 0u;
    v613 = 0u;
    v612 = 0u;
    v611 = 0u;
    v610 = 0u;
    v609 = 0u;
    v608 = 0u;
    v607 = 0u;
    v606 = 0u;
    v605 = 0u;
    v604 = 0u;
    v603 = 0u;
    v602 = 0u;
    v601 = 0u;
    v600 = 0u;
    v599 = 0u;
    v598 = 0u;
    v597 = 0u;
    v596 = 0u;
    v595 = 0u;
    v594 = 0u;
    v593 = 0u;
    v592 = 0u;
    v591 = 0u;
    v590 = 0u;
    v589 = 0u;
    v588 = 0u;
    v587 = 0u;
    v586 = 0u;
    v87 = v552;
    if (*(v11 + 24))
    {
      goto LABEL_555;
    }

    bzero(v383, 4 * v351);
    v388 = 0;
    v389 = v271 + 1;
    v390 = v565;
    do
    {
      ++v383[v388];
      if (v390 == 1 || *(v389 - 1) != *v389)
      {
        ++v388;
      }

      ++v389;
      --v390;
    }

    while (v390);
    if (v351)
    {
      v563 = 0;
      v566 = 0;
      v391 = 0;
      v583 = 0;
      v517 = 0;
      v522 = v385;
      v570 = v494;
      v392 = v351;
      __be = v525;
      v513 = v386;
      v86 = v540;
      while (1)
      {
        v393 = 0;
        v506 = v392 - 64;
        if (v392 >= 0x40)
        {
          v392 = 64;
        }

        v394 = v392 <= 1 ? 1 : v392;
        do
        {
          v395 = &v502[2192 * v393];
          bzero(v395, 0x888uLL);
          *(v395 + 273) = 0x7FF0000000000000;
          if (v383[v393 + v391])
          {
            v396 = 0;
            do
            {
              ++*&v395[4 * *(v86 + 2 * v583 + 2 * v396++)];
            }

            while (v396 < v383[v393 + v391]);
            *(v395 + 272) = v396;
            v583 = v583 + v396;
          }

          BrotliPopulationCostDistance(&v502[2192 * v393]);
          *(v395 + 273) = v397;
          *(&v618 + v393) = v393;
          *(&v602 + v393) = v393;
          *(&v634 + v393++) = 1;
        }

        while (v393 != v394);
        v398 = v555 - v391 >= 0x40 ? 64 : v555 - v391;
        result = BrotliHistogramCombineDistance(v502, &v634, &v602, &v618, __srcc, v398, v398, 0x40uLL, 0x800uLL);
        v578 = result;
        v510 = v391;
        if (v525 >= result + v566)
        {
          v402 = v513;
          v400 = v525;
        }

        else
        {
          if (v525)
          {
            v399 = v525;
          }

          else
          {
            v399 = result + v566;
          }

          do
          {
            v400 = v399;
            v399 *= 2;
          }

          while (v400 < result + v566);
          v401 = BrotliAllocate(v544);
          v402 = v401;
          if (*(v544 + 24))
          {
            v403 = 1;
          }

          else
          {
            v403 = v525 == 0;
          }

          if (!v403)
          {
            memcpy(v401, v513, 2192 * v525);
          }

          BrotliFree(v544, v513);
          result = v578;
        }

        v550 = v402;
        v404 = __be;
        if (__be >= v563 + result)
        {
          v407 = v522;
          v87 = v552;
        }

        else
        {
          if (__be)
          {
            v405 = __be;
          }

          else
          {
            v405 = v563 + result;
          }

          do
          {
            v404 = v405;
            v405 *= 2;
          }

          while (v404 < v563 + result);
          v406 = BrotliAllocate(v544);
          v407 = v406;
          if (*(v544 + 24))
          {
            v408 = 1;
          }

          else
          {
            v408 = __be == 0;
          }

          if (!v408)
          {
            memcpy(v406, v522, 4 * __be);
          }

          BrotliFree(v544, v522);
          v87 = v552;
          result = v578;
        }

        if (*v87)
        {
          goto LABEL_555;
        }

        if (result)
        {
          v409 = 0;
          v410 = &v550[2192 * v566];
          __bf = v407;
          v411 = v407 + 4 * v563;
          do
          {
            v412 = *(&v618 + v409);
            memcpy(v410, &v502[2192 * v412], 0x890uLL);
            result = v578;
            *(v411 + 4 * v409) = *(&v634 + v412);
            *(&v586 + *(&v618 + v409)) = v409;
            v409 = v409 + 1;
            v410 += 2192;
          }

          while (v578 != v409);
          v566 += v409;
          v563 = v409 + v563;
          v407 = __bf;
          v86 = v540;
        }

        v413 = &v602;
        v414 = v570;
        do
        {
          v415 = *v413++;
          *v414++ = *(&v586 + v415) + v517;
          --v394;
        }

        while (v394);
        v517 += result;
        v522 = v407;
        v570 += 256;
        v392 = v506;
        v525 = v400;
        __be = v404;
        v391 = v510 + 64;
        v416 = v550;
        v513 = v550;
        if (v510 + 64 >= v555)
        {
          goto LABEL_658;
        }
      }
    }

    v517 = 0;
    v416 = v386;
    v407 = v385;
LABEL_658:
    result = BrotliFree(v544, v502);
    if (v517 << 6 >= (v517 >> 1) * v517)
    {
      v449 = (v517 >> 1) * v517;
    }

    else
    {
      v449 = v517 << 6;
    }

    if (v449 >= 0x801)
    {
      BrotliFree(v544, __srcc);
      result = BrotliAllocate(v544);
      __srcc = result;
      v87 = v552;
      v86 = v540;
      if (*(v544 + 24))
      {
        goto LABEL_555;
      }
    }

    if (v517)
    {
      result = BrotliAllocate(v544);
      v571 = result;
      v87 = v552;
      v86 = v540;
      if (*(v544 + 24))
      {
        goto LABEL_555;
      }

      v450 = 0;
      v451 = vdupq_n_s64(v517 - 1);
      v452 = xmmword_29862D9C0;
      v453 = xmmword_29862D9D0;
      v454 = (result + 8);
      v455 = vdupq_n_s64(4uLL);
      do
      {
        v456 = vmovn_s64(vcgeq_u64(v451, v453));
        if (vuzp1_s16(v456, *v451.i8).u8[0])
        {
          *(v454 - 2) = v450;
        }

        if (vuzp1_s16(v456, *&v451).i8[2])
        {
          *(v454 - 1) = v450 + 1;
        }

        if (vuzp1_s16(*&v451, vmovn_s64(vcgeq_u64(v451, *&v452))).i32[1])
        {
          *v454 = v450 + 2;
          v454[1] = v450 + 3;
        }

        v450 += 4;
        v452 = vaddq_s64(v452, v455);
        v453 = vaddq_s64(v453, v455);
        v454 += 4;
      }

      while (((v517 + 3) & 0xFFFFFFFFFFFFFFFCLL) != v450);
    }

    else
    {
      v87 = v552;
      v86 = v540;
      if (*v552)
      {
        goto LABEL_555;
      }

      v571 = 0;
    }

    v579 = BrotliHistogramCombineDistance(v416, v407, v494, v571, __srcc, v517, v555, 0x100uLL, v449);
    BrotliFree(v544, __srcc);
    result = BrotliFree(v544, v407);
    if (v517)
    {
      result = BrotliAllocate(v544);
      v584 = result;
      v87 = v552;
      v86 = v540;
      if (!*(v544 + 24))
      {
        memset(result, 255, 4 * v517);
        goto LABEL_684;
      }
    }

    else
    {
      v87 = v552;
      v86 = v540;
      if (!*v552)
      {
        v584 = 0;
LABEL_684:
        if (v555)
        {
          v567 = 0;
          v457 = 0;
          v458 = 0;
          do
          {
            bzero(v585, 0x888uLL);
            v585[273] = 0x7FF0000000000000;
            if (v383[v457])
            {
              v459 = 0;
              do
              {
                ++*(v585 + v540[v458 + v459++]);
              }

              while (v459 < v383[v457]);
              v585[272] = v459;
              v458 += v459;
            }

            v460 = v457 - 1;
            if (!v457)
            {
              v460 = 0;
            }

            v461 = v494[v460];
            v462 = BrotliHistogramBitCostDistanceDistance(v585, v416 + 2192 * v461);
            if (v579)
            {
              v463 = v462;
              v464 = v571;
              v465 = v579;
              do
              {
                v466 = BrotliHistogramBitCostDistanceDistance(v585, v416 + 2192 * *v464);
                if (v466 < v463)
                {
                  v461 = *v464;
                  v463 = v466;
                }

                ++v464;
                --v465;
              }

              while (v465);
            }

            v494[v457] = v461;
            if (v584[v461] == -1)
            {
              v584[v461] = v567++;
            }

            ++v457;
          }

          while (v457 != v555);
        }

        BrotliFree(v544, v571);
        result = BrotliFree(v544, v416);
        v467 = *(a10 + 32);
        if (v467 < v555)
        {
          if (!v467)
          {
            v467 = v555;
          }

          do
          {
            v468 = v467;
            v467 *= 2;
          }

          while (v468 < v555);
          v469 = BrotliAllocate(v544);
          v470 = v469;
          if (!*(v544 + 24))
          {
            v471 = *(a10 + 32);
            if (v471)
            {
              memcpy(v469, *(a10 + 16), v471);
            }
          }

          result = BrotliFree(v544, *(a10 + 16));
          *(a10 + 16) = v470;
          *(a10 + 32) = v468;
        }

        v472 = *(a10 + 40);
        if (v472 < v555)
        {
          if (!v472)
          {
            v472 = v555;
          }

          do
          {
            v473 = v472;
            v472 *= 2;
          }

          while (v473 < v555);
          v474 = BrotliAllocate(v544);
          v475 = v474;
          if (!*(v544 + 24))
          {
            v476 = *(a10 + 40);
            if (v476)
            {
              memcpy(v474, *(a10 + 24), 4 * v476);
            }
          }

          result = BrotliFree(v544, *(a10 + 24));
          *(a10 + 24) = v475;
          *(a10 + 40) = v473;
        }

        v87 = v552;
        v86 = v540;
        if (!*v552)
        {
          if (v555)
          {
            v477 = 0;
            v478 = 0;
            v479 = 0;
            v480 = v494 + 1;
            v481 = v383;
            do
            {
              v482 = *v481++;
              v479 += v482;
              v483 = *(v480 - 1);
              if (v555 == 1 || v483 != *v480)
              {
                v484 = v584[v483];
                *(*(a10 + 16) + v478) = v484;
                *(*(a10 + 24) + 4 * v478) = v479;
                if (v477 <= v484)
                {
                  v477 = v484;
                }

                ++v478;
                v479 = 0;
              }

              ++v480;
              --v555;
            }

            while (v555);
            v485 = v477 + 1;
          }

          else
          {
            v478 = 0;
            v485 = 1;
          }

          *a10 = v485;
          *(a10 + 8) = v478;
          v11 = v544;
          BrotliFree(v544, v584);
          BrotliFree(v544, v383);
          result = BrotliFree(v544, v494);
          v87 = v552;
          v86 = v540;
          if (!*(v544 + 24))
          {
            result = BrotliFree(v544, v271);
            v87 = v552;
          }

          goto LABEL_204;
        }
      }
    }

LABEL_555:
    v11 = v544;
LABEL_204:
    if (!*v87)
    {
      return BrotliFree(v11, v86);
    }

    return result;
  }

  v92 = *(a10 + 32);
  v93 = *(a10 + 8) + 1;
  if (v92 < v93)
  {
    if (!v92)
    {
      v92 = *(a10 + 8) + 1;
    }

    do
    {
      v94 = v92;
      v92 *= 2;
    }

    while (v94 < v93);
    v95 = BrotliAllocate(v11);
    v96 = v95;
    if (!*(v11 + 24))
    {
      v97 = *(a10 + 32);
      if (v97)
      {
        memcpy(v95, *(a10 + 16), v97);
      }
    }

    result = BrotliFree(v11, *(a10 + 16));
    *(a10 + 16) = v96;
    *(a10 + 32) = v94;
    v93 = *(a10 + 8) + 1;
  }

  v98 = *(a10 + 40);
  if (v98 < v93)
  {
    if (!v98)
    {
      v98 = v93;
    }

    do
    {
      v99 = v98;
      v98 *= 2;
    }

    while (v99 < v93);
    v100 = BrotliAllocate(v11);
    v101 = v100;
    if (!*(v11 + 24))
    {
      v102 = *(a10 + 40);
      if (v102)
      {
        memcpy(v100, *(a10 + 24), 4 * v102);
      }
    }

    result = BrotliFree(v11, *(a10 + 24));
    *(a10 + 24) = v101;
    *(a10 + 40) = v99;
  }

  if (!*v552)
  {
    *a10 = 1;
    *(*(a10 + 16) + *(a10 + 8)) = 0;
    v103 = *(a10 + 8);
    *(*(a10 + 24) + 4 * v103) = v89;
    v104 = v103 + 1;
    v87 = v552;
    *(a10 + 8) = v104;
    goto LABEL_204;
  }

  return result;
}