@interface MADAutoAssetStager
+ (id)_getAutoAssetStagerStateTable;
+ (id)autoAssetStager;
+ (id)collectOverviewInformation;
+ (id)controlConvertStagedToDownloaded:(id)downloaded;
+ (id)controlCopyCurrentStagedDescriptors;
+ (int64_t)previousOTASituation;
+ (void)autoAssetStagerJobDetermineDone:(id)done withBaseForStagingDescriptors:(id)descriptors withDetermineError:(id)error;
+ (void)autoAssetStagerJobDownloadDone:(id)done withDownloadedDescriptor:(id)descriptor withDownloadError:(id)error;
+ (void)autoAssetStagerJobDownloadProgress:(id)progress withProgressError:(id)error;
+ (void)autoAssetStagerJobFailedToStart:(id)start;
+ (void)clientCancelOperation:(id)operation;
+ (void)clientDetermineAllAvailable:(id)available;
+ (void)clientDetermineGroupsAvailable:(id)available;
+ (void)clientDownloadAll:(id)all;
+ (void)clientDownloadGroups:(id)groups withAlreadyDownloadedDescriptors:(id)descriptors;
+ (void)clientEraseAll:(id)all;
+ (void)clientPurgeAll:(id)all;
+ (void)controlAlreadyDownloadedDescriptors:(id)descriptors withSetConfigurations:(id)configurations withSetTargets:(id)targets withScheduledJobs:(id)jobs;
+ (void)controlAlteredSetConfiguration:(id)configuration;
+ (void)controlEliminateSelector:(id)selector;
+ (void)controlEliminateSetConfiguration:(id)configuration;
+ (void)controlSetTargetsSpecified:(id)specified;
+ (void)controlStatisticsClientRepliesSuccess:(id *)success clientRepliesFailure:(id *)failure totalStaged:(id *)staged totalUnstaged:(id *)unstaged clearingAfter:(BOOL)after;
+ (void)extendSummaryWithAvailableForStagingAssets:(id)assets;
+ (void)extendSummaryWithDeterminedAssets:(id)assets basedOnControl:(id)control;
+ (void)extendSummaryWithStagedAssets:(id)assets basedOnControl:(id)control;
+ (void)extendSummaryWithStagingAssets:(id)assets basedOnControl:(id)control;
+ (void)finishSuspendedResumeFromPersisted;
+ (void)garbageCollectEliminateSelector:(id)selector;
+ (void)resumeFromPersisted;
+ (void)setPersistedStateCaching:(BOOL)caching;
+ (void)shutdown;
- (BOOL)_doesSelector:(id)selector matchDescriptor:(id)descriptor;
- (BOOL)_doesSelectorMatchCurrentJob:(id)job;
- (BOOL)_formCandidateSetLookupArray:(id)array involvingRequired:(BOOL)required involvingOptional:(BOOL)optional providingOptional:(BOOL)providingOptional;
- (BOOL)_isAssetSetEntry:(id)entry blockedBySetTarget:(id)target;
- (BOOL)_isAssetTypeInvolvedInStaging:(id)staging;
- (BOOL)_isAssetTypeManagedAsSet:(id)set;
- (BOOL)_isDescriptorAssetTypeManagedAsSet:(id)set;
- (BOOL)_isOtherTargetAvailable;
- (BOOL)_isSetConfigurationApplicableToRequired:(id)required;
- (BOOL)_isSetTargetWithinRange:(id)range asCandidate:(BOOL)candidate;
- (BOOL)_isStagingClientRequestForActiveTarget:(id)target fromLocation:(id)location;
- (BOOL)_persistPreviousOTASituationIfTargetMatchesCurrentOS:(id)s settingStartupSituation:(BOOL)situation;
- (BOOL)_stagedAllDesiredForCurrentTarget;
- (BOOL)doesStagingInvolveOptional;
- (BOOL)doesStagingInvolveRequired;
- (BOOL)isAnyAvailableForStagingByGroup:(id)group withAlreadyDownloadedDescriptors:(id)descriptors targetHadBeenDetermined:(BOOL *)determined;
- (BOOL)isAssetType:(id)type representedInAssetDescriptors:(id)descriptors;
- (MADAutoAssetStager)init;
- (id)_adjustPallasResponseBasedOnPreferences:(id)preferences;
- (id)_allEliminationSelectors;
- (id)_collectOverviewInformation;
- (id)_controlConvertStagedToDownloaded:(id)downloaded;
- (id)_fromToName;
- (id)_newStagingInfoAvailable:(id)available fromAvailableForStaging:(id)staging providingTotalExpectedBytes:(unint64_t *)bytes;
- (id)_persistRebuildTrackingNewHandedOffDescriptors:(id)descriptors;
- (id)_setConfigurationAdjustedFrom:(id)from basedOnSetTarget:(id)target;
- (id)_setConfigurationForAssetType:(id)type forAssetSpecifier:(id)specifier;
- (id)_setTargetForAssetType:(id)type;
- (id)_setTargetForSetConfiguration:(id)configuration;
- (id)_stagingClientMessageDesire:(id)desire forClientRequest:(id)request;
- (id)_stagingClientMessageStagingClientProcessName:(id)name;
- (id)_stagingClientRequestDetermineClear:(id)clear forStagingTargetName:(id)name replyingToCleared:(BOOL)cleared;
- (id)_stagingClientRequestDetermineLocate:(id)locate forStagingTargetName:(id)name;
- (id)_stagingClientRequestDownloadClear:(id)clear forStagingTargetName:(id)name replyingToCleared:(BOOL)cleared;
- (id)_stagingClientRequestDownloadCurrent:(id)current forStagingTargetName:(id)name;
- (id)_stagingClientRequestGeneralClear:(id)clear replyingToCleared:(BOOL)cleared;
- (id)_stagingClientRequestGeneralCurrent:(id)current;
- (id)_targetName:(id)name forOSVersion:(id)version forBuildVersion:(id)buildVersion forTrainName:(id)trainName forRestoreVersion:(id)restoreVersion;
- (id)_targetNameActive;
- (id)_targetNameActive:(id)active;
- (id)_targetNameActiveClient;
- (id)_targetNameActiveOptional;
- (id)_targetNameActiveRequired;
- (id)_targetNameAvailableForStaging:(id)staging;
- (id)_trimConsideringToLatestDownloaded:(id)downloaded;
- (id)_updateAttributesFromStagingRequest:(id)request fromLocation:(id)location;
- (id)_updateLatestSummary;
- (id)adoptTargetFromUpdateAttributes:(id)attributes fromUpdateAttributes:(id)updateAttributes forGroupDetermine:(BOOL)determine;
- (id)assetMetadataFromAssetCatalog:(id)catalog forAssetype:(id)assetype forAssetSpecifier:(id)specifier preferringBestFormat:(BOOL)format;
- (id)baseForPatchingToSelector:(id)selector;
- (id)dedupAvailableForStaging:(id)staging dedupingAssetDescriptors:(id)descriptors removingAlreadyDownloaded:(id)downloaded ofContainerName:(id)name;
- (id)description;
- (id)fullSummary;
- (id)getTargetLookupResultsForKey:(id)key;
- (id)newAssetMetadataFromAssetCatalog:(id)catalog forAssetype:(id)assetype forAssetSpecifier:(id)specifier;
- (id)newSetConfigurationForClientDomainName:(id)name forAssetSetIdentifier:(id)identifier withAutoAssetEntries:(id)entries;
- (id)newSetLookupResult:(id)result forAssetType:(id)type forSetCatalog:(id)catalog;
- (id)newSetLookupResultsForTargetOS;
- (id)newStagedInfoWithAllSuccessfullyStaged:(id)staged;
- (id)newStagedInfoWithGroupsSuccessfullyStaged:(id)staged indicatingHaveStaged:(BOOL)haveStaged;
- (id)newStagingInfoWithAllAvailableForStaging:(id)staging;
- (id)newStagingInfoWithGroupsAvailableForStaging:(id)staging indicatingHaveAvailable:(BOOL)available usingTargetLookupKey:(id)key;
- (id)selectorContainerAsString:(id)string;
- (id)splitOutAvailableForStagingByGroup:(id)group forGroupDetermine:(BOOL)determine;
- (id)targetLookupResultsKeyForTrainName:(id)name withRestoreVersion:(id)version;
- (id)targetLookupResultsKeyForTrainName:(id)name withRestoreVersion:(id)version withTargetBuildVersion:(id)buildVersion;
- (int64_t)_countOfEntriesDictionaryOfArray:(id)array;
- (int64_t)_persistDescriptor:(id)descriptor operation:(id)operation persistingDescriptor:(id)persistingDescriptor withRepresentation:(int64_t)representation message:(id)message;
- (int64_t)actionUnknownAction:(id)action error:(id *)error;
- (int64_t)action_AddToAvailableDecideAnyAvailable:(id)available error:(id *)error;
- (int64_t)action_AddToAvailableDecideMoreCandidates:(id)candidates error:(id *)error;
- (int64_t)action_AddToAvailableDecideRequiredAvailable:(id)available error:(id *)error;
- (int64_t)action_AddToStaged:(id)staged error:(id *)error;
- (int64_t)action_AddToStagedDecideMoreAvailable:(id)available error:(id *)error;
- (int64_t)action_AlteredDecideSameSetConfiguration:(id)configuration error:(id *)error;
- (int64_t)action_AlteredInvalAllAvailable:(id)available error:(id *)error;
- (int64_t)action_AlteredInvalAllAvailableCancelActiveJob:(id)job error:(id *)error;
- (int64_t)action_CancelActiveJob:(id)job error:(id *)error;
- (int64_t)action_ClientAcceptAllDetermine:(id)determine error:(id *)error;
- (int64_t)action_ClientAcceptCancelActiveJob:(id)job error:(id *)error;
- (int64_t)action_ClientAcceptEraseActiveJob:(id)job error:(id *)error;
- (int64_t)action_ClientAcceptEraseCancelActiveJob:(id)job error:(id *)error;
- (int64_t)action_ClientAcceptNextAvailableBeginDownload:(id)download error:(id *)error;
- (int64_t)action_ClientAcceptRemoveAllReplyErased:(id)erased error:(id *)error;
- (int64_t)action_ClientAcceptRemoveAllReplyPurged:(id)purged error:(id *)error;
- (int64_t)action_ClientCancelDesireForCompletion:(id)completion error:(id *)error;
- (int64_t)action_ClientCheckGroupsDecideAlreadyDetermined:(id)determined error:(id *)error;
- (int64_t)action_ClientCheckGroupsReplyAlreadyDetermined:(id)determined error:(id *)error;
- (int64_t)action_ClientCheckLatchGroupsDetermine:(id)determine error:(id *)error;
- (int64_t)action_ClientContinueRestartingMaxDetermining:(id)determining error:(id *)error;
- (int64_t)action_ClientContinueUsingLatestRequest:(id)request error:(id *)error;
- (int64_t)action_ClientDecideGroupTargetAvailable:(id)available error:(id *)error;
- (int64_t)action_ClientEraseDecideStagingClient:(id)client error:(id *)error;
- (int64_t)action_ClientFailAlreadyDetermining:(id)determining error:(id *)error;
- (int64_t)action_ClientFailByGroupAlreadyDownloading:(id)downloading error:(id *)error;
- (int64_t)action_ClientFailGroupDetermining:(id)determining error:(id *)error;
- (int64_t)action_ClientFailNoGroupsStaged:(id)staged error:(id *)error;
- (int64_t)action_ClientFailWrongMode:(id)mode error:(id *)error;
- (int64_t)action_ClientHaveStagedContent:(id)content error:(id *)error;
- (int64_t)action_ClientInvalidStagingPhase:(id)phase error:(id *)error;
- (int64_t)action_ClientNewerReplyEmptyDetermine:(id)determine error:(id *)error;
- (int64_t)action_ClientNewerReplyEmptyDownload:(id)download error:(id *)error;
- (int64_t)action_ClientNewerReplySameOrEmptyDetermine:(id)determine error:(id *)error;
- (int64_t)action_ClientNewerReplySameOrEmptyDownload:(id)download error:(id *)error;
- (int64_t)action_ClientNothingStaged:(id)staged error:(id *)error;
- (int64_t)action_ClientPurgeDecideStagingClient:(id)client error:(id *)error;
- (int64_t)action_ClientRequestAlreadyDownloaded:(id)downloaded error:(id *)error;
- (int64_t)action_ControlUnstagedDecideCancelJob:(id)job error:(id *)error;
- (int64_t)action_ControlUnstagedDecideRemoveAll:(id)all error:(id *)error;
- (int64_t)action_DecideHaveAvailableOtherTargets:(id)targets error:(id *)error;
- (int64_t)action_DecideHaveRequiredCandidates:(id)candidates error:(id *)error;
- (int64_t)action_DecideMoreAvailable:(id)available error:(id *)error;
- (int64_t)action_DecideMoreCandidates:(id)candidates error:(id *)error;
- (int64_t)action_DecideMoreOptionalAvailable:(id)available error:(id *)error;
- (int64_t)action_DecideMoreRequiredAvailable:(id)available error:(id *)error;
- (int64_t)action_DecideRequiredErrorBlocksOTA:(id)a error:(id *)error;
- (int64_t)action_DecideTimerDeterminingValid:(id)valid error:(id *)error;
- (int64_t)action_DoneAvailableDecideAnyStaged:(id)staged error:(id *)error;
- (int64_t)action_DoneCandidatesDecideAnyAvailable:(id)available error:(id *)error;
- (int64_t)action_DoneCandidatesRequiredDecideOptional:(id)optional error:(id *)error;
- (int64_t)action_EliminateAvailableDecideEmpty:(id)empty error:(id *)error;
- (int64_t)action_EliminateCancelActiveJob:(id)job error:(id *)error;
- (int64_t)action_EliminateDecideMatch:(id)match error:(id *)error;
- (int64_t)action_EliminateDeterminingDecideMatch:(id)match error:(id *)error;
- (int64_t)action_EliminateDone:(id)done error:(id *)error;
- (int64_t)action_EliminateDoneDecideMoreDownload:(id)download error:(id *)error;
- (int64_t)action_EliminateDoneStagedDecideEmpty:(id)empty error:(id *)error;
- (int64_t)action_FailRequiredDetermineBlocksOTA:(id)a error:(id *)error;
- (int64_t)action_FormCandidatesDecideDetermine:(id)determine error:(id *)error;
- (int64_t)action_IgnoreFailureDecideRequiredAvailable:(id)available error:(id *)error;
- (int64_t)action_LoadDecideNewOSPromote:(id)promote error:(id *)error;
- (int64_t)action_LoadPersistedDecideResume:(id)resume error:(id *)error;
- (int64_t)action_NextAwaitingBeginDownload:(id)download error:(id *)error;
- (int64_t)action_NextCandidateBeginDetermine:(id)determine error:(id *)error;
- (int64_t)action_RememberEliminateDone:(id)done error:(id *)error;
- (int64_t)action_RememberSetEliminateDone:(id)done error:(id *)error;
- (int64_t)action_RemoveAllReplyCanceled:(id)canceled error:(id *)error;
- (int64_t)action_RemoveAllReplyErased:(id)erased error:(id *)error;
- (int64_t)action_RemoveAllReplyPurged:(id)purged error:(id *)error;
- (int64_t)action_ReplyFailRequiredDownload:(id)download error:(id *)error;
- (int64_t)action_ReplyHaveAvailable:(id)available error:(id *)error;
- (int64_t)action_ReplyHaveStaged:(id)staged error:(id *)error;
- (int64_t)action_ReplyNoCandidates:(id)candidates error:(id *)error;
- (int64_t)action_ReplyNoCandidatesEraseAll:(id)all error:(id *)error;
- (int64_t)action_ReplyNoCandidatesHaveOtherTarget:(id)target error:(id *)error;
- (int64_t)action_ReplyNoCandidatesPurgeAll:(id)all error:(id *)error;
- (int64_t)action_ReplyNothingStaged:(id)staged error:(id *)error;
- (int64_t)action_ReplyNothingStagedEraseAll:(id)all error:(id *)error;
- (int64_t)action_ReplyNothingStagedPurgeAll:(id)all error:(id *)error;
- (int64_t)action_ReplyTargetNotAvailable:(id)available error:(id *)error;
- (int64_t)action_ReportStagingProgressToClient:(id)client error:(id *)error;
- (int64_t)action_RequestAlreadyDownloaded:(id)downloaded error:(id *)error;
- (int64_t)action_SetEliminateAvailableDecideEmpty:(id)empty error:(id *)error;
- (int64_t)action_SetEliminateDecideMatch:(id)match error:(id *)error;
- (int64_t)action_SetEliminateDeterminingDecideMatch:(id)match error:(id *)error;
- (int64_t)action_SetEliminateDone:(id)done error:(id *)error;
- (int64_t)action_SetEliminateDoneStagedDecideEmpty:(id)empty error:(id *)error;
- (int64_t)action_SetTargetDecideSameTarget:(id)target error:(id *)error;
- (int64_t)action_SetTargetInvalAllAvailable:(id)available error:(id *)error;
- (int64_t)action_SetTargetInvalAllAvailableCancelActiveJob:(id)job error:(id *)error;
- (int64_t)action_UpdateStagedSituation:(id)situation error:(id *)error;
- (int64_t)indexForAssetType:(id)type representedInSetConfigurations:(id)configurations;
- (int64_t)performAction:(id)action onEvent:(id)event inState:(id)state withInfo:(id)info nextState:(id)nextState error:(id *)error;
- (void)_acceptStagingClientRequest:(id)request fromLocation:(id)location adoptingSpecifiedTarget:(BOOL)target;
- (void)_acknowledgeEliminatedForCurrentJob;
- (void)_acknowlegdeAndClearAllEliminations;
- (void)_addDescriptor:(id)descriptor withRepresentation:(int64_t)representation toSummary:(id)summary;
- (void)_addDescriptor:(id)descriptor withRepresentation:(int64_t)representation toSummary:(id)summary withStageGroupType:(unint64_t)type withTargetOS:(id)s;
- (void)_addToStaged:(id)staged addingFromStagerParam:(id)param;
- (void)_availableForStagingRemove:(id)remove forTargetTrainName:(id)name withRestoreVersion:(id)version;
- (void)_blendCandidateSetConfigurations:(id)configurations blendingIntoRequiredConfigurations:(id)requiredConfigurations blendingFromOptionalConfigurations:(id)optionalConfigurations;
- (void)_blendOptionalCandidates:(id)candidates intoRequired:(id)required;
- (void)_cancelCurrentJob;
- (void)_candidatesRemove:(id)remove forTargetTrainName:(id)name withRestoreVersion:(id)version;
- (void)_clearAllTrackingOfActiveOperations:(id)operations alsoPerformingPurgeAll:(BOOL)all removingDetermined:(BOOL)determined;
- (void)_clearBeforeDetermineAvailable:(id)available removingDetermined:(BOOL)determined;
- (void)_clearRemoveByGroupTargets:(id)targets removingDetermined:(BOOL)determined;
- (void)_extendLookupByAssetType:(id)type fromSource:(id)source withAssetType:(id)assetType withAssetSpecifier:(id)specifier withDownloadDecryptionKey:(id)key createdClientDefinedSetEntries:(id)entries createdNoClientSetEntries:(id)setEntries appendedSetEntries:(id)self0;
- (void)_extendLookupByAssetTypeWithDownloadedDescriptors:(id)descriptors limitingToSetTargets:(id)targets;
- (void)_extendLookupByAssetTypeWithSetConfigurations:(id)configurations limitingToSetTargets:(id)targets;
- (void)_extendSummaryWithAvailableForStagingAssets:(id)assets;
- (void)_extendSummaryWithDeterminedAssets:(id)assets basedOnControl:(id)control;
- (void)_extendSummaryWithStagedAssets:(id)assets basedOnControl:(id)control;
- (void)_extendSummaryWithStagingAssets:(id)assets basedOnControl:(id)control;
- (void)_limitCachePersistResultByGroupToCount:(unsigned int)count fromLocation:(id)location;
- (void)_logMilestoneFromLocation:(id)location resultingInEvent:(id)event forMilestoneActivity:(id)activity;
- (void)_logPersistedActiveTargetLookupResults:(id)results;
- (void)_logPersistedAvailableForStagingByTarget:(id)target operation:(id)operation forPersistedEntryID:(id)d withAvailableForStaging:(id)staging message:(id)message;
- (void)_logPersistedAvailableForStagingByTargetRemoved:(id)removed removedPersistedEntryID:(id)d removedAvailableForStaging:(id)staging message:(id)message;
- (void)_logPersistedAvailableForStagingByTargetTableOfContents:(id)contents;
- (void)_logPersistedConfigLoad:(id)load message:(id)message;
- (void)_logPersistedConfigSet:(id)set message:(id)message;
- (void)_logPersistedEntry:(id)entry operation:(id)operation persistingDescriptor:(id)descriptor withRepresentation:(int64_t)representation message:(id)message;
- (void)_logPersistedRemovedEntry:(id)entry removedDescriptor:(id)descriptor message:(id)message;
- (void)_logPersistedSetLookupResult:(id)result operation:(id)operation forPersistedEntryID:(id)d withSetLookupResult:(id)lookupResult message:(id)message;
- (void)_logPersistedSetLookupResultRemoved:(id)removed removedPersistedEntryID:(id)d removedSetLookupResult:(id)result message:(id)message;
- (void)_logPersistedSetLookupResultsTableOfContents:(id)contents;
- (void)_logPersistedTableOfContents:(id)contents;
- (void)_logPersistedTargetLookupResults:(id)results operation:(id)operation forPersistedEntryID:(id)d withTargetLookupResults:(id)lookupResults withTargetOTASituation:(int64_t)situation message:(id)message;
- (void)_logPersistedTargetLookupResultsRemoved:(id)removed removedPersistedEntryID:(id)d removedTargetLookupResults:(id)results message:(id)message;
- (void)_logPersistedTargetLookupResultsTableOfContents:(id)contents;
- (void)_logStagingDetails:(id)details forStagedInfo:(id)info;
- (void)_logStagingDetails:(id)details forStagingInfo:(id)info;
- (void)_lookupCachePersistResult:(id)result fromLocation:(id)location;
- (void)_lookupCachePersistResultByGroup:(id)group fromLocation:(id)location;
- (void)_lookupCacheRemoveResult:(id)result forTargetTrainName:(id)name withRestoreVersion:(id)version;
- (void)_maintainLatestCandidate:(id)candidate candidateDescriptor:(id)descriptor;
- (void)_persistAllTargetLookupResultsOTASituation:(int64_t)situation fromLocation:(id)location;
- (void)_persistEraseLookupResults:(id)results forTargetTrainName:(id)name forTargetRestoreVersion:(id)version;
- (void)_persistErasePreviousOTASituation:(id)situation;
- (void)_persistLastStagingFrom:(id)from;
- (void)_persistRemoveAll:(id)all message:(id)message removingDetermined:(BOOL)determined loggingConfig:(BOOL)config;
- (void)_persistStoredTargetWithOTASituation:(id)situation;
- (void)_persistTargetOTASituation:(int64_t)situation fromLocation:(id)location;
- (void)_persistTargetOTASituationForFollowup:(id)followup fromLocation:(id)location;
- (void)_recordOperationForStagedAttributes:(id)attributes required:(BOOL)required;
- (void)_removeAllStagedContent:(id)content;
- (void)_removeDescriptorFromSuccessfullyStaged:(id)staged message:(id)message;
- (void)_removeEliminatedFromCandidatesAndAvaliable;
- (void)_removeEliminatedFromStaged;
- (void)_removeStagedAssetFromFilesystem:(id)filesystem forHistoryOperation:(int64_t)operation;
- (void)_replyHaveStagedContent:(id)content withEventInfo:(id)info;
- (void)_replyNoCandidates:(id)candidates replyingToStagingRequest:(id)request;
- (void)_replyNothingStaged:(id)staged replyingToStagingRequest:(id)request;
- (void)_replyToStagingClient:(id)client replyingToRequest:(id)request withErrorCode:(int64_t)code withUnderlyingError:(id)error withDescription:(id)description;
- (void)_replyToStagingClient:(id)client withStagedInfo:(id)info replyingToStagingRequest:(id)request recordingOperation:(int64_t)operation;
- (void)_replyToStagingClient:(id)client withStagingInfo:(id)info replyingToStagingRequest:(id)request recordingOperation:(int64_t)operation;
- (void)_replyToStagingClientOperationSuccess;
- (void)_replyWithAlreadyDetermined:(id)determined forEventInfo:(id)info orFollowupDetermineStart:(BOOL)start;
- (void)_replyWrongMode:(id)mode;
- (void)_setupAwaitingStagingAndBeginFirstDownload;
- (void)_stagingClientRequestDetermineClearAll:(id)all;
- (void)_stagingClientRequestDetermineTrack:(id)track trackingRequest:(id)request forStagingTargetName:(id)name;
- (void)_stagingClientRequestDownloadPurged:(id)purged;
- (void)_stagingClientRequestDownloadTrack:(id)track trackingRequest:(id)request forStagingTargetName:(id)name;
- (void)_stagingClientRequestGeneralTrack:(id)track trackingRequest:(id)request;
- (void)_startDetermineJobForNextCandidate:(id)candidate;
- (void)_trackReloadedDescriptorAvailableForStaging:(id)staging;
- (void)_updateDescriptor:(id)descriptor withLatestJobStatus:(id)status;
- (void)_updateLookupResultsJustStagedAllMode:(id)mode;
- (void)_updateLookupResultsJustStagedByGroupMode:(id)mode;
- (void)addToAvailableForStaging:(id)staging;
- (void)availableForStagingLoadedFromPersisted:(id)persisted persistedEntryID:(id)d;
- (void)considerInjectionIntoAvailableForStaging;
- (void)formAvailableForStagingByCombiningRequiredAndOptional:(id)optional;
- (void)loadPersistedAvailableForStagingByTarget;
- (void)loadPersistedSetLookupResults;
- (void)loadPersistedTargetLookupResults:(id)results;
- (void)lookupCacheUpdateWithDetermineResult:(id)result fromLocation:(id)location;
- (void)notifyControlManagerEliminateDone:(id)done forAssetSelector:(id)selector;
- (void)notifyControlManagerEliminateDone:(id)done forSetConfiguration:(id)configuration;
- (void)purgeAlreadyStagedNotApplicableForRequiredByTarget:(id)target andNotApplicableForOptionalByTarget:(id)byTarget;
- (void)setLookupResultLoadedFromPersisted:(id)persisted persistedEntryID:(id)d;
- (void)startMaxTimeSpentDeterminingTimer;
- (void)storeAvailableForStaging:(id)staging fromLocation:(id)location;
- (void)targetLookupResultsLoadedFromPersisted:(id)persisted targetLookupResultsKey:(id)key persistedEntryID:(id)d withTargetOTASituation:(int64_t)situation;
- (void)trackSelectorForDescriptor:(id)descriptor inContainer:(id)container;
- (void)trackSelectorForSetEntry:(id)entry inContainer:(id)container;
- (void)trackSelectorInContainer:(id)container forAssetType:(id)type forAssetSpecifier:(id)specifier forAssetVersion:(id)version;
- (void)updateLookupResultsJustStaged:(id)staged;
@end

@implementation MADAutoAssetStager

+ (id)_getAutoAssetStagerStateTable
{
  v2012[0] = @"ReadyToLoad";
  v2010[0] = @"ControlResumeFromPersisted";
  v2 = kSUCoreActionKey;
  v2008 = kSUCoreActionKey;
  v2009 = @"LoadDecideNewOSPromote";
  v675 = [NSDictionary dictionaryWithObjects:&v2009 forKeys:&v2008 count:1];
  v2011[0] = v675;
  v2010[1] = @"ResumePostponeNoPromote";
  v3 = kSUCoreNextStateKey;
  v2006 = kSUCoreNextStateKey;
  v2007 = @"ResumedPostponedLoad";
  v674 = [NSDictionary dictionaryWithObjects:&v2007 forKeys:&v2006 count:1];
  v2011[1] = v674;
  v2010[2] = @"ResumeNewOSPromote";
  v2004 = v2;
  v2005 = @"LoadPersistedDecideResume";
  v673 = [NSDictionary dictionaryWithObjects:&v2005 forKeys:&v2004 count:1];
  v2011[2] = v673;
  v2010[3] = @"ResumeNothingAvailable";
  v2002 = v3;
  v2003 = @"NothingAvailable";
  v672 = [NSDictionary dictionaryWithObjects:&v2003 forKeys:&v2002 count:1];
  v2011[3] = v672;
  v2010[4] = @"ResumeGroupsAvailable";
  v2000 = v3;
  v2001 = @"GroupsAvailableContent";
  v671 = [NSDictionary dictionaryWithObjects:&v2001 forKeys:&v2000 count:1];
  v2011[4] = v671;
  v2010[5] = @"ResumeAllAvailable";
  v1998 = v3;
  v1999 = @"AllAvailableContent";
  v670 = [NSDictionary dictionaryWithObjects:&v1999 forKeys:&v1998 count:1];
  v2011[5] = v670;
  v2010[6] = @"ResumeStaged";
  v1996 = v3;
  v1997 = @"StagedContent";
  v669 = [NSDictionary dictionaryWithObjects:&v1997 forKeys:&v1996 count:1];
  v2011[6] = v669;
  v2010[7] = @"ResumePurging";
  v1994[0] = v3;
  v1994[1] = v2;
  v1995[0] = @"NothingAvailable";
  v1995[1] = @"RemoveAllReplyPurged";
  v668 = [NSDictionary dictionaryWithObjects:v1995 forKeys:v1994 count:2];
  v2011[7] = v668;
  v2010[8] = @"ResumeRunningTargetVersion";
  v1992[0] = v3;
  v1992[1] = v2;
  v1993[0] = @"NothingAvailable";
  v1993[1] = @"RemoveAllReplyPurged";
  v667 = [NSDictionary dictionaryWithObjects:v1993 forKeys:v1992 count:2];
  v2011[8] = v667;
  v2010[9] = @"ResumePromotingAllStaged";
  v1990[0] = v3;
  v1990[1] = v2;
  v1991[0] = @"NothingAvailable";
  v1991[1] = @"RemoveAllReplyPurged";
  v666 = [NSDictionary dictionaryWithObjects:v1991 forKeys:v1990 count:2];
  v2011[9] = v666;
  v665 = [NSDictionary dictionaryWithObjects:v2011 forKeys:v2010 count:10];
  v2013[0] = v665;
  v2012[1] = @"ResumedPostponedLoad";
  v1988[0] = @"ControlFinishResumeFromPersisted";
  v1986 = v2;
  v1987 = @"LoadPersistedDecideResume";
  v664 = [NSDictionary dictionaryWithObjects:&v1987 forKeys:&v1986 count:1];
  v1989[0] = v664;
  v1988[1] = @"ResumeNothingAvailable";
  v1984 = v3;
  v1985 = @"NothingAvailable";
  v663 = [NSDictionary dictionaryWithObjects:&v1985 forKeys:&v1984 count:1];
  v1989[1] = v663;
  v1988[2] = @"ResumeGroupsAvailable";
  v1982 = v3;
  v1983 = @"GroupsAvailableContent";
  v662 = [NSDictionary dictionaryWithObjects:&v1983 forKeys:&v1982 count:1];
  v1989[2] = v662;
  v1988[3] = @"ResumeAllAvailable";
  v1980 = v3;
  v1981 = @"AllAvailableContent";
  v661 = [NSDictionary dictionaryWithObjects:&v1981 forKeys:&v1980 count:1];
  v1989[3] = v661;
  v1988[4] = @"ResumeStaged";
  v1978 = v3;
  v1979 = @"StagedContent";
  v660 = [NSDictionary dictionaryWithObjects:&v1979 forKeys:&v1978 count:1];
  v1989[4] = v660;
  v1988[5] = @"ResumePurging";
  v1976[0] = v3;
  v1976[1] = v2;
  v1977[0] = @"NothingAvailable";
  v1977[1] = @"RemoveAllReplyErased";
  v659 = [NSDictionary dictionaryWithObjects:v1977 forKeys:v1976 count:2];
  v1989[5] = v659;
  v1988[6] = @"ResumeRunningTargetVersion";
  v1974[0] = v3;
  v1974[1] = v2;
  v1975[0] = @"NothingAvailable";
  v1975[1] = @"RemoveAllReplyErased";
  v658 = [NSDictionary dictionaryWithObjects:v1975 forKeys:v1974 count:2];
  v1989[6] = v658;
  v1988[7] = @"ResumePromotingAllStaged";
  v1972[0] = v3;
  v1972[1] = v2;
  v1973[0] = @"NothingAvailable";
  v1973[1] = @"RemoveAllReplyErased";
  v657 = [NSDictionary dictionaryWithObjects:v1973 forKeys:v1972 count:2];
  v1989[7] = v657;
  v656 = [NSDictionary dictionaryWithObjects:v1989 forKeys:v1988 count:8];
  v2013[1] = v656;
  v2012[2] = @"NothingAvailable";
  v1970[0] = @"ControlForceUnstage";
  v1968 = v2;
  v4 = kSUCoreFSMActionNoOp;
  v1969 = kSUCoreFSMActionNoOp;
  v655 = [NSDictionary dictionaryWithObjects:&v1969 forKeys:&v1968 count:1];
  v1971[0] = v655;
  v1970[1] = @"ControlEliminateAssetSelector";
  v1966 = v2;
  v1967 = @"EliminateDone";
  v654 = [NSDictionary dictionaryWithObjects:&v1967 forKeys:&v1966 count:1];
  v1971[1] = v654;
  v1970[2] = @"ControlEliminateSetIdentifier";
  v1964 = v2;
  v1965 = @"SetEliminateDone";
  v653 = [NSDictionary dictionaryWithObjects:&v1965 forKeys:&v1964 count:1];
  v1971[2] = v653;
  v1970[3] = @"ControlAlteredSetConfiguration";
  v1962 = v2;
  v1963 = v4;
  v652 = [NSDictionary dictionaryWithObjects:&v1963 forKeys:&v1962 count:1];
  v1971[3] = v652;
  v1970[4] = @"ControlSetTargetsSpecified";
  v1960 = v2;
  v1961 = v4;
  v651 = [NSDictionary dictionaryWithObjects:&v1961 forKeys:&v1960 count:1];
  v1971[4] = v651;
  v1970[5] = @"ClientDetermineGroupsAvailable";
  v1958 = v2;
  v1959 = @"ClientCheckLatchGroupsDetermine";
  v650 = [NSDictionary dictionaryWithObjects:&v1959 forKeys:&v1958 count:1];
  v1971[5] = v650;
  v1970[6] = @"ClientDetermineAllAvailable";
  v1956 = v2;
  v1957 = @"ClientAcceptAllDetermine";
  v649 = [NSDictionary dictionaryWithObjects:&v1957 forKeys:&v1956 count:1];
  v1971[6] = v649;
  v1970[7] = @"ClientDownloadAlreadyStaged";
  v1954 = v2;
  v1955 = @"ClientNothingStaged";
  v648 = [NSDictionary dictionaryWithObjects:&v1955 forKeys:&v1954 count:1];
  v1971[7] = v648;
  v1970[8] = @"ClientDownloadGroupsAvailable";
  v1952 = v2;
  v1953 = @"ClientNothingStaged";
  v647 = [NSDictionary dictionaryWithObjects:&v1953 forKeys:&v1952 count:1];
  v1971[8] = v647;
  v1970[9] = @"ClientDownloadAllAvailable";
  v1950 = v2;
  v1951 = @"ClientNothingStaged";
  v646 = [NSDictionary dictionaryWithObjects:&v1951 forKeys:&v1950 count:1];
  v1971[9] = v646;
  v1970[10] = @"ClientCancelCompletion";
  v1948 = v2;
  v1949 = @"ClientCancelDesireForCompletion";
  v645 = [NSDictionary dictionaryWithObjects:&v1949 forKeys:&v1948 count:1];
  v1971[10] = v645;
  v1970[11] = @"ClientPurgeAll";
  v1946 = v2;
  v1947 = @"ClientAcceptRemoveAllReplyPurged";
  v644 = [NSDictionary dictionaryWithObjects:&v1947 forKeys:&v1946 count:1];
  v1971[11] = v644;
  v1970[12] = @"ClientEraseAll";
  v1944 = v2;
  v1945 = @"ClientAcceptRemoveAllReplyErased";
  v643 = [NSDictionary dictionaryWithObjects:&v1945 forKeys:&v1944 count:1];
  v1971[12] = v643;
  v1970[13] = @"TimerFiredDetermining";
  v1942 = v2;
  v1943 = v4;
  v642 = [NSDictionary dictionaryWithObjects:&v1943 forKeys:&v1942 count:1];
  v1971[13] = v642;
  v1970[14] = @"ModeGroupsDetermineStart";
  v1940[0] = v3;
  v1940[1] = v2;
  v1941[0] = @"GroupsRequestingDownloaded";
  v1941[1] = @"RequestAlreadyDownloaded";
  v641 = [NSDictionary dictionaryWithObjects:v1941 forKeys:v1940 count:2];
  v1971[14] = v641;
  v1970[15] = @"ModeAllDetermineStart";
  v1938[0] = v3;
  v1938[1] = v2;
  v1939[0] = @"AllRequestingDownloaded";
  v1939[1] = @"RequestAlreadyDownloaded";
  v640 = [NSDictionary dictionaryWithObjects:v1939 forKeys:v1938 count:2];
  v1971[15] = v640;
  v639 = [NSDictionary dictionaryWithObjects:v1971 forKeys:v1970 count:16];
  v2013[2] = v639;
  v2012[3] = @"GroupsRequestingDownloaded";
  v1936[0] = @"ControlForceUnstage";
  v1934 = v3;
  v1935 = @"CancelingRequestDownloaded";
  v638 = [NSDictionary dictionaryWithObjects:&v1935 forKeys:&v1934 count:1];
  v1937[0] = v638;
  v1936[1] = @"ControlAlreadyDownloaded";
  v1932 = v2;
  v1933 = @"FormCandidatesDecideDetermine";
  v637 = [NSDictionary dictionaryWithObjects:&v1933 forKeys:&v1932 count:1];
  v1937[1] = v637;
  v1936[2] = @"ControlEliminateAssetSelector";
  v1930 = v2;
  v1931 = @"RememberEliminateDone";
  v636 = [NSDictionary dictionaryWithObjects:&v1931 forKeys:&v1930 count:1];
  v1937[2] = v636;
  v1936[3] = @"ControlEliminateSetIdentifier";
  v1928 = v2;
  v1929 = @"RememberSetEliminateDone";
  v635 = [NSDictionary dictionaryWithObjects:&v1929 forKeys:&v1928 count:1];
  v1937[3] = v635;
  v1936[4] = @"ControlAlteredSetConfiguration";
  v1926 = v2;
  v1927 = v4;
  v634 = [NSDictionary dictionaryWithObjects:&v1927 forKeys:&v1926 count:1];
  v1937[4] = v634;
  v1936[5] = @"ControlSetTargetsSpecified";
  v1924 = v2;
  v1925 = v4;
  v633 = [NSDictionary dictionaryWithObjects:&v1925 forKeys:&v1924 count:1];
  v1937[5] = v633;
  v1936[6] = @"ClientDetermineGroupsAvailable";
  v1922 = v2;
  v1923 = @"ClientNewerReplySameOrEmptyDetermine";
  v632 = [NSDictionary dictionaryWithObjects:&v1923 forKeys:&v1922 count:1];
  v1937[6] = v632;
  v1936[7] = @"ClientDetermineAllAvailable";
  v1920 = v2;
  v1921 = @"ClientFailWrongMode";
  v631 = [NSDictionary dictionaryWithObjects:&v1921 forKeys:&v1920 count:1];
  v1937[7] = v631;
  v1936[8] = @"ClientDownloadAlreadyStaged";
  v1918 = v2;
  v1919 = @"ClientNothingStaged";
  v630 = [NSDictionary dictionaryWithObjects:&v1919 forKeys:&v1918 count:1];
  v1937[8] = v630;
  v1936[9] = @"ClientDownloadGroupsAvailable";
  v1916 = v2;
  v1917 = @"ClientNewerReplyEmptyDownload";
  v629 = [NSDictionary dictionaryWithObjects:&v1917 forKeys:&v1916 count:1];
  v1937[9] = v629;
  v1936[10] = @"ClientDownloadAllAvailable";
  v1914 = v2;
  v1915 = @"ClientNothingStaged";
  v628 = [NSDictionary dictionaryWithObjects:&v1915 forKeys:&v1914 count:1];
  v1937[10] = v628;
  v1936[11] = @"ClientCancelCompletion";
  v1912 = v2;
  v1913 = @"ClientCancelDesireForCompletion";
  v627 = [NSDictionary dictionaryWithObjects:&v1913 forKeys:&v1912 count:1];
  v1937[11] = v627;
  v1936[12] = @"ClientPurgeAll";
  v1910 = v2;
  v1911 = @"ClientPurgeDecideStagingClient";
  v626 = [NSDictionary dictionaryWithObjects:&v1911 forKeys:&v1910 count:1];
  v1937[12] = v626;
  v1936[13] = @"ClientEraseAll";
  v1908 = v2;
  v1909 = @"ClientEraseDecideStagingClient";
  v625 = [NSDictionary dictionaryWithObjects:&v1909 forKeys:&v1908 count:1];
  v1937[13] = v625;
  v1936[14] = @"TimerFiredDetermining";
  v1906 = v2;
  v1907 = v4;
  v624 = [NSDictionary dictionaryWithObjects:&v1907 forKeys:&v1906 count:1];
  v1937[14] = v624;
  v1936[15] = @"DetermineHaveCandidates";
  v1904 = v2;
  v1905 = @"DecideHaveRequiredCandidates";
  v623 = [NSDictionary dictionaryWithObjects:&v1905 forKeys:&v1904 count:1];
  v1937[15] = v623;
  v1936[16] = @"DetermineHaveRequired";
  v1902[0] = v3;
  v1902[1] = v2;
  v1903[0] = @"RequiredDeterminingAvailable";
  v1903[1] = @"NextCandidateBeginDetermine";
  v622 = [NSDictionary dictionaryWithObjects:v1903 forKeys:v1902 count:2];
  v1937[16] = v622;
  v1936[17] = @"DetermineHaveOptional";
  v1900[0] = v3;
  v1900[1] = v2;
  v1901[0] = @"OptionalDeterminingAvailable";
  v1901[1] = @"NextCandidateBeginDetermine";
  v621 = [NSDictionary dictionaryWithObjects:v1901 forKeys:v1900 count:2];
  v1937[17] = v621;
  v1936[18] = @"DetermineNoCandidates";
  v1898 = v2;
  v1899 = @"DecideHaveAvailableOtherTargets";
  v620 = [NSDictionary dictionaryWithObjects:&v1899 forKeys:&v1898 count:1];
  v1937[18] = v620;
  v1936[19] = @"TargetHaveOtherAvailable";
  v1896[0] = v3;
  v1896[1] = v2;
  v1897[0] = @"GroupsAvailableContent";
  v1897[1] = @"ReplyNoCandidatesHaveOtherTarget";
  v619 = [NSDictionary dictionaryWithObjects:v1897 forKeys:v1896 count:2];
  v1937[19] = v619;
  v1936[20] = @"TargetNoOtherAvailable";
  v1894[0] = v3;
  v1894[1] = v2;
  v1895[0] = @"NothingAvailable";
  v1895[1] = @"ReplyNoCandidatesEraseAll";
  v618 = [NSDictionary dictionaryWithObjects:v1895 forKeys:v1894 count:2];
  v1937[20] = v618;
  v1936[21] = @"PurgeAcceptedRemoveDownloaded";
  v1892 = v2;
  v1893 = @"RemoveAllReplyPurged";
  v617 = [NSDictionary dictionaryWithObjects:&v1893 forKeys:&v1892 count:1];
  v1937[21] = v617;
  v1936[22] = @"PurgeAcceptedRemoveAll";
  v1890 = v2;
  v1891 = @"RemoveAllReplyPurged";
  v616 = [NSDictionary dictionaryWithObjects:&v1891 forKeys:&v1890 count:1];
  v1937[22] = v616;
  v1936[23] = @"PurgeEraseAcceptedRemoveAll";
  v1888[0] = v3;
  v1888[1] = v2;
  v1889[0] = @"ErasingRequestDownloaded";
  v1889[1] = @"CancelActiveJob";
  v615 = [NSDictionary dictionaryWithObjects:v1889 forKeys:v1888 count:2];
  v1937[23] = v615;
  v614 = [NSDictionary dictionaryWithObjects:v1937 forKeys:v1936 count:24];
  v2013[3] = v614;
  v2012[4] = @"AllRequestingDownloaded";
  v1886[0] = @"ControlForceUnstage";
  v1884 = v3;
  v1885 = @"CancelingRequestDownloaded";
  v613 = [NSDictionary dictionaryWithObjects:&v1885 forKeys:&v1884 count:1];
  v1887[0] = v613;
  v1886[1] = @"ControlAlreadyDownloaded";
  v1882 = v2;
  v1883 = @"FormCandidatesDecideDetermine";
  v612 = [NSDictionary dictionaryWithObjects:&v1883 forKeys:&v1882 count:1];
  v1887[1] = v612;
  v1886[2] = @"ControlEliminateAssetSelector";
  v1880 = v2;
  v1881 = @"RememberEliminateDone";
  v611 = [NSDictionary dictionaryWithObjects:&v1881 forKeys:&v1880 count:1];
  v1887[2] = v611;
  v1886[3] = @"ControlEliminateSetIdentifier";
  v1878 = v2;
  v1879 = @"RememberSetEliminateDone";
  v610 = [NSDictionary dictionaryWithObjects:&v1879 forKeys:&v1878 count:1];
  v1887[3] = v610;
  v1886[4] = @"ControlAlteredSetConfiguration";
  v1876[0] = v3;
  v1876[1] = v2;
  v1877[0] = @"CancelingRequestDownloaded";
  v1877[1] = @"AlteredInvalAllAvailable";
  v609 = [NSDictionary dictionaryWithObjects:v1877 forKeys:v1876 count:2];
  v1887[4] = v609;
  v1886[5] = @"ControlSetTargetsSpecified";
  v1874[0] = v3;
  v1874[1] = v2;
  v1875[0] = @"CancelingRequestDownloaded";
  v1875[1] = @"SetTargetInvalAllAvailable";
  v608 = [NSDictionary dictionaryWithObjects:v1875 forKeys:v1874 count:2];
  v1887[5] = v608;
  v1886[6] = @"ClientDetermineGroupsAvailable";
  v1872 = v2;
  v1873 = @"ClientNewerReplySameOrEmptyDetermine";
  v607 = [NSDictionary dictionaryWithObjects:&v1873 forKeys:&v1872 count:1];
  v1887[6] = v607;
  v1886[7] = @"ClientDetermineAllAvailable";
  v1870 = v2;
  v1871 = @"ClientContinueUsingLatestRequest";
  v606 = [NSDictionary dictionaryWithObjects:&v1871 forKeys:&v1870 count:1];
  v1887[7] = v606;
  v1886[8] = @"ClientDownloadAlreadyStaged";
  v1868 = v2;
  v1869 = @"ClientNothingStaged";
  v605 = [NSDictionary dictionaryWithObjects:&v1869 forKeys:&v1868 count:1];
  v1887[8] = v605;
  v1886[9] = @"ClientDownloadGroupsAvailable";
  v1866 = v2;
  v1867 = @"ClientNewerReplyEmptyDownload";
  v604 = [NSDictionary dictionaryWithObjects:&v1867 forKeys:&v1866 count:1];
  v1887[9] = v604;
  v1886[10] = @"ClientDownloadAllAvailable";
  v1864 = v2;
  v1865 = @"ClientInvalidStagingPhase";
  v603 = [NSDictionary dictionaryWithObjects:&v1865 forKeys:&v1864 count:1];
  v1887[10] = v603;
  v1886[11] = @"ClientCancelCompletion";
  v1862 = v2;
  v1863 = @"ClientCancelDesireForCompletion";
  v602 = [NSDictionary dictionaryWithObjects:&v1863 forKeys:&v1862 count:1];
  v1887[11] = v602;
  v1886[12] = @"ClientPurgeAll";
  v1860[0] = v3;
  v1860[1] = v2;
  v1861[0] = @"CancelingRequestDownloaded";
  v1861[1] = @"ClientAcceptCancelActiveJob";
  v601 = [NSDictionary dictionaryWithObjects:v1861 forKeys:v1860 count:2];
  v1887[12] = v601;
  v1886[13] = @"ClientEraseAll";
  v1858[0] = v3;
  v1858[1] = v2;
  v1859[0] = @"ErasingRequestDownloaded";
  v1859[1] = @"ClientAcceptEraseActiveJob";
  v600 = [NSDictionary dictionaryWithObjects:v1859 forKeys:v1858 count:2];
  v1887[13] = v600;
  v1886[14] = @"TimerFiredDetermining";
  v1856 = v2;
  v1857 = v4;
  v599 = [NSDictionary dictionaryWithObjects:&v1857 forKeys:&v1856 count:1];
  v1887[14] = v599;
  v1886[15] = @"DetermineHaveCandidates";
  v1854[0] = v3;
  v1854[1] = v2;
  v1855[0] = @"AllDeterminingAvailable";
  v1855[1] = @"NextCandidateBeginDetermine";
  v598 = [NSDictionary dictionaryWithObjects:v1855 forKeys:v1854 count:2];
  v1887[15] = v598;
  v1886[16] = @"DetermineNoCandidates";
  v1852[0] = v3;
  v1852[1] = v2;
  v1853[0] = @"NothingAvailable";
  v1853[1] = @"ReplyNoCandidatesPurgeAll";
  v597 = [NSDictionary dictionaryWithObjects:v1853 forKeys:v1852 count:2];
  v1887[16] = v597;
  v596 = [NSDictionary dictionaryWithObjects:v1887 forKeys:v1886 count:17];
  v2013[4] = v596;
  v2012[5] = @"RequiredDeterminingAvailable";
  v1850[0] = @"ControlForceUnstage";
  v1848 = v2;
  v1849 = @"ControlUnstagedDecideCancelJob";
  v595 = [NSDictionary dictionaryWithObjects:&v1849 forKeys:&v1848 count:1];
  v1851[0] = v595;
  v1850[1] = @"ControlEliminateAssetSelector";
  v1846 = v2;
  v1847 = @"EliminateDeterminingDecideMatch";
  v594 = [NSDictionary dictionaryWithObjects:&v1847 forKeys:&v1846 count:1];
  v1851[1] = v594;
  v1850[2] = @"ControlEliminateSetIdentifier";
  v1844 = v2;
  v1845 = @"SetEliminateDeterminingDecideMatch";
  v593 = [NSDictionary dictionaryWithObjects:&v1845 forKeys:&v1844 count:1];
  v1851[2] = v593;
  v1850[3] = @"ControlAlteredSetConfiguration";
  v1842 = v2;
  v1843 = @"AlteredDecideSameSetConfiguration";
  v592 = [NSDictionary dictionaryWithObjects:&v1843 forKeys:&v1842 count:1];
  v1851[3] = v592;
  v1850[4] = @"ControlSetTargetsSpecified";
  v1840 = v2;
  v1841 = @"SetTargetDecideSameTarget";
  v591 = [NSDictionary dictionaryWithObjects:&v1841 forKeys:&v1840 count:1];
  v1851[4] = v591;
  v1850[5] = @"ClientDetermineGroupsAvailable";
  v1838 = v2;
  v1839 = @"ClientNewerReplySameOrEmptyDetermine";
  v590 = [NSDictionary dictionaryWithObjects:&v1839 forKeys:&v1838 count:1];
  v1851[5] = v590;
  v1850[6] = @"ClientDetermineAllAvailable";
  v1836 = v2;
  v1837 = @"ClientFailWrongMode";
  v589 = [NSDictionary dictionaryWithObjects:&v1837 forKeys:&v1836 count:1];
  v1851[6] = v589;
  v1850[7] = @"ClientDownloadAlreadyStaged";
  v1834 = v2;
  v1835 = @"ClientNothingStaged";
  v588 = [NSDictionary dictionaryWithObjects:&v1835 forKeys:&v1834 count:1];
  v1851[7] = v588;
  v1850[8] = @"ClientDownloadGroupsAvailable";
  v1832 = v2;
  v1833 = @"ClientNewerReplyEmptyDownload";
  v587 = [NSDictionary dictionaryWithObjects:&v1833 forKeys:&v1832 count:1];
  v1851[8] = v587;
  v1850[9] = @"ClientDownloadAllAvailable";
  v1830 = v2;
  v1831 = @"ClientInvalidStagingPhase";
  v586 = [NSDictionary dictionaryWithObjects:&v1831 forKeys:&v1830 count:1];
  v1851[9] = v586;
  v1850[10] = @"ClientCancelCompletion";
  v1828 = v2;
  v1829 = @"ClientCancelDesireForCompletion";
  v585 = [NSDictionary dictionaryWithObjects:&v1829 forKeys:&v1828 count:1];
  v1851[10] = v585;
  v1850[11] = @"ClientPurgeAll";
  v1826 = v2;
  v1827 = @"ClientPurgeDecideStagingClient";
  v584 = [NSDictionary dictionaryWithObjects:&v1827 forKeys:&v1826 count:1];
  v1851[11] = v584;
  v1850[12] = @"ClientEraseAll";
  v1824[0] = v3;
  v1824[1] = v2;
  v1825[0] = @"ErasingDetermine";
  v1825[1] = @"ClientAcceptEraseActiveJob";
  v583 = [NSDictionary dictionaryWithObjects:v1825 forKeys:v1824 count:2];
  v1851[12] = v583;
  v1850[13] = @"JobFailedToStart";
  v1822 = v2;
  v1823 = @"FailRequiredDetermineBlocksOTA";
  v582 = [NSDictionary dictionaryWithObjects:&v1823 forKeys:&v1822 count:1];
  v1851[13] = v582;
  v1850[14] = @"JobDetermineAvailableSuccess";
  v1820 = v2;
  v1821 = @"AddToAvailableDecideMoreCandidates";
  v581 = [NSDictionary dictionaryWithObjects:&v1821 forKeys:&v1820 count:1];
  v1851[14] = v581;
  v1850[15] = @"JobDetermineAvailableFailure";
  v1818 = v2;
  v1819 = @"DecideRequiredErrorBlocksOTA";
  v580 = [NSDictionary dictionaryWithObjects:&v1819 forKeys:&v1818 count:1];
  v1851[15] = v580;
  v1850[16] = @"TimerFiredDetermining";
  v1816 = v2;
  v1817 = @"DecideTimerDeterminingValid";
  v579 = [NSDictionary dictionaryWithObjects:&v1817 forKeys:&v1816 count:1];
  v1851[16] = v579;
  v1850[17] = @"DetermineMoreCandidates";
  v1814 = v2;
  v1815 = @"NextCandidateBeginDetermine";
  v578 = [NSDictionary dictionaryWithObjects:&v1815 forKeys:&v1814 count:1];
  v1851[17] = v578;
  v1850[18] = @"DetermineDoneCandidates";
  v1812 = v2;
  v1813 = @"DoneCandidatesRequiredDecideOptional";
  v577 = [NSDictionary dictionaryWithObjects:&v1813 forKeys:&v1812 count:1];
  v1851[18] = v577;
  v1850[19] = @"DeterminedRequiredWithOptional";
  v1810 = v3;
  v1811 = @"OptionalDeterminingAvailable";
  v576 = [NSDictionary dictionaryWithObjects:&v1811 forKeys:&v1810 count:1];
  v1851[19] = v576;
  v1850[20] = @"DetermineNothingAvailable";
  v1808[0] = v3;
  v1808[1] = v2;
  v1809[0] = @"GroupsAvailableContent";
  v1809[1] = @"ReplyNoCandidatesPurgeAll";
  v575 = [NSDictionary dictionaryWithObjects:v1809 forKeys:v1808 count:2];
  v1851[20] = v575;
  v1850[21] = @"DetermineNothingOtherAvailable";
  v1806[0] = v3;
  v1806[1] = v2;
  v1807[0] = @"GroupsAvailableContent";
  v1807[1] = @"ReplyNoCandidatesHaveOtherTarget";
  v574 = [NSDictionary dictionaryWithObjects:v1807 forKeys:v1806 count:2];
  v1851[21] = v574;
  v1850[22] = @"DetermineHaveAvailable";
  v1804[0] = v3;
  v1804[1] = v2;
  v1805[0] = @"GroupsAvailableContent";
  v1805[1] = @"ReplyHaveAvailable";
  v573 = [NSDictionary dictionaryWithObjects:v1805 forKeys:v1804 count:2];
  v1851[22] = v573;
  v1850[23] = @"RequiredErrorNonFatal";
  v1802 = v2;
  v1803 = @"DecideMoreCandidates";
  v572 = [NSDictionary dictionaryWithObjects:&v1803 forKeys:&v1802 count:1];
  v1851[23] = v572;
  v1850[24] = @"RequiredErrorBlocksOTA";
  v1800 = v2;
  v1801 = @"FailRequiredDetermineBlocksOTA";
  v571 = [NSDictionary dictionaryWithObjects:&v1801 forKeys:&v1800 count:1];
  v1851[24] = v571;
  v1850[25] = @"ClientAlteredForgetDetermine";
  v1798[0] = v3;
  v1798[1] = v2;
  v1799[0] = @"CancelingIgnoreDetermine";
  v1799[1] = @"CancelActiveJob";
  v570 = [NSDictionary dictionaryWithObjects:v1799 forKeys:v1798 count:2];
  v1851[25] = v570;
  v1850[26] = @"ClientSetTargetsForgetDetermine";
  v1796[0] = v3;
  v1796[1] = v2;
  v1797[0] = @"CancelingIgnoreDetermine";
  v1797[1] = @"CancelActiveJob";
  v569 = [NSDictionary dictionaryWithObjects:v1797 forKeys:v1796 count:2];
  v1851[26] = v569;
  v1850[27] = @"TargetHaveOtherAvailable";
  v1794[0] = v3;
  v1794[1] = v2;
  v1795[0] = @"CancelingDetermine";
  v1795[1] = @"ClientAcceptCancelActiveJob";
  v568 = [NSDictionary dictionaryWithObjects:v1795 forKeys:v1794 count:2];
  v1851[27] = v568;
  v1850[28] = @"TargetNoOtherAvailable";
  v1792[0] = v3;
  v1792[1] = v2;
  v1793[0] = @"CancelingDetermine";
  v1793[1] = @"ClientAcceptCancelActiveJob";
  v567 = [NSDictionary dictionaryWithObjects:v1793 forKeys:v1792 count:2];
  v1851[28] = v567;
  v1850[29] = @"UnstagedFromControlCancelJob";
  v1790[0] = v3;
  v1790[1] = v2;
  v1791[0] = @"CancelingDetermine";
  v1791[1] = @"CancelActiveJob";
  v566 = [NSDictionary dictionaryWithObjects:v1791 forKeys:v1790 count:2];
  v1851[29] = v566;
  v1850[30] = @"TimeoutValidActiveDetermine";
  v1788 = v3;
  v1789 = @"RequiredDeterminingLast";
  v565 = [NSDictionary dictionaryWithObjects:&v1789 forKeys:&v1788 count:1];
  v1851[30] = v565;
  v1850[31] = @"PurgeAcceptedRemoveDownloaded";
  v1786 = v2;
  v1787 = @"RemoveAllReplyPurged";
  v564 = [NSDictionary dictionaryWithObjects:&v1787 forKeys:&v1786 count:1];
  v1851[31] = v564;
  v1850[32] = @"PurgeAcceptedRemoveAll";
  v1784 = v2;
  v1785 = @"RemoveAllReplyPurged";
  v563 = [NSDictionary dictionaryWithObjects:&v1785 forKeys:&v1784 count:1];
  v1851[32] = v563;
  v1850[33] = @"EliminateCurrentJob";
  v1782[0] = v3;
  v1782[1] = v2;
  v1783[0] = @"DetermineEliminating";
  v1783[1] = @"EliminateCancelActiveJob";
  v562 = [NSDictionary dictionaryWithObjects:v1783 forKeys:v1782 count:2];
  v1851[33] = v562;
  v561 = [NSDictionary dictionaryWithObjects:v1851 forKeys:v1850 count:34];
  v2013[5] = v561;
  v2012[6] = @"OptionalDeterminingAvailable";
  v1780[0] = @"ControlForceUnstage";
  v1778 = v2;
  v1779 = @"ControlUnstagedDecideCancelJob";
  v560 = [NSDictionary dictionaryWithObjects:&v1779 forKeys:&v1778 count:1];
  v1781[0] = v560;
  v1780[1] = @"ControlEliminateAssetSelector";
  v1776 = v2;
  v1777 = @"EliminateDeterminingDecideMatch";
  v559 = [NSDictionary dictionaryWithObjects:&v1777 forKeys:&v1776 count:1];
  v1781[1] = v559;
  v1780[2] = @"ControlEliminateSetIdentifier";
  v1774 = v2;
  v1775 = @"SetEliminateDeterminingDecideMatch";
  v558 = [NSDictionary dictionaryWithObjects:&v1775 forKeys:&v1774 count:1];
  v1781[2] = v558;
  v1780[3] = @"ControlAlteredSetConfiguration";
  v1772 = v2;
  v1773 = @"AlteredDecideSameSetConfiguration";
  v557 = [NSDictionary dictionaryWithObjects:&v1773 forKeys:&v1772 count:1];
  v1781[3] = v557;
  v1780[4] = @"ControlSetTargetsSpecified";
  v1770 = v2;
  v1771 = @"SetTargetDecideSameTarget";
  v556 = [NSDictionary dictionaryWithObjects:&v1771 forKeys:&v1770 count:1];
  v1781[4] = v556;
  v1780[5] = @"ClientDetermineGroupsAvailable";
  v1768 = v2;
  v1769 = @"ClientNewerReplySameOrEmptyDetermine";
  v555 = [NSDictionary dictionaryWithObjects:&v1769 forKeys:&v1768 count:1];
  v1781[5] = v555;
  v1780[6] = @"ClientDetermineAllAvailable";
  v1766 = v2;
  v1767 = @"ClientFailWrongMode";
  v554 = [NSDictionary dictionaryWithObjects:&v1767 forKeys:&v1766 count:1];
  v1781[6] = v554;
  v1780[7] = @"ClientDownloadAlreadyStaged";
  v1764 = v2;
  v1765 = @"ClientNothingStaged";
  v553 = [NSDictionary dictionaryWithObjects:&v1765 forKeys:&v1764 count:1];
  v1781[7] = v553;
  v1780[8] = @"ClientDownloadGroupsAvailable";
  v1762 = v2;
  v1763 = @"ClientNewerReplyEmptyDownload";
  v552 = [NSDictionary dictionaryWithObjects:&v1763 forKeys:&v1762 count:1];
  v1781[8] = v552;
  v1780[9] = @"ClientDownloadAllAvailable";
  v1760 = v2;
  v1761 = @"ClientInvalidStagingPhase";
  v551 = [NSDictionary dictionaryWithObjects:&v1761 forKeys:&v1760 count:1];
  v1781[9] = v551;
  v1780[10] = @"ClientCancelCompletion";
  v1758 = v2;
  v1759 = @"ClientCancelDesireForCompletion";
  v550 = [NSDictionary dictionaryWithObjects:&v1759 forKeys:&v1758 count:1];
  v1781[10] = v550;
  v1780[11] = @"ClientPurgeAll";
  v1756 = v2;
  v1757 = @"ClientPurgeDecideStagingClient";
  v549 = [NSDictionary dictionaryWithObjects:&v1757 forKeys:&v1756 count:1];
  v1781[11] = v549;
  v1780[12] = @"ClientEraseAll";
  v1754[0] = v3;
  v1754[1] = v2;
  v1755[0] = @"ErasingDetermine";
  v1755[1] = @"ClientAcceptEraseActiveJob";
  v548 = [NSDictionary dictionaryWithObjects:v1755 forKeys:v1754 count:2];
  v1781[12] = v548;
  v1780[13] = @"JobFailedToStart";
  v1752 = v2;
  v1753 = @"DecideMoreCandidates";
  v547 = [NSDictionary dictionaryWithObjects:&v1753 forKeys:&v1752 count:1];
  v1781[13] = v547;
  v1780[14] = @"JobDetermineAvailableSuccess";
  v1750 = v2;
  v1751 = @"AddToAvailableDecideMoreCandidates";
  v546 = [NSDictionary dictionaryWithObjects:&v1751 forKeys:&v1750 count:1];
  v1781[14] = v546;
  v1780[15] = @"JobDetermineAvailableFailure";
  v1748 = v2;
  v1749 = @"DecideMoreCandidates";
  v545 = [NSDictionary dictionaryWithObjects:&v1749 forKeys:&v1748 count:1];
  v1781[15] = v545;
  v1780[16] = @"TimerFiredDetermining";
  v1746 = v2;
  v1747 = @"DecideTimerDeterminingValid";
  v544 = [NSDictionary dictionaryWithObjects:&v1747 forKeys:&v1746 count:1];
  v1781[16] = v544;
  v1780[17] = @"DetermineMoreCandidates";
  v1744 = v2;
  v1745 = @"NextCandidateBeginDetermine";
  v543 = [NSDictionary dictionaryWithObjects:&v1745 forKeys:&v1744 count:1];
  v1781[17] = v543;
  v1780[18] = @"DetermineDoneCandidates";
  v1742 = v2;
  v1743 = @"DoneCandidatesDecideAnyAvailable";
  v542 = [NSDictionary dictionaryWithObjects:&v1743 forKeys:&v1742 count:1];
  v1781[18] = v542;
  v1780[19] = @"DetermineNothingAvailable";
  v1740[0] = v3;
  v1740[1] = v2;
  v1741[0] = @"GroupsAvailableContent";
  v1741[1] = @"ReplyNoCandidatesPurgeAll";
  v541 = [NSDictionary dictionaryWithObjects:v1741 forKeys:v1740 count:2];
  v1781[19] = v541;
  v1780[20] = @"DetermineNothingOtherAvailable";
  v1738[0] = v3;
  v1738[1] = v2;
  v1739[0] = @"GroupsAvailableContent";
  v1739[1] = @"ReplyNoCandidates";
  v540 = [NSDictionary dictionaryWithObjects:v1739 forKeys:v1738 count:2];
  v1781[20] = v540;
  v1780[21] = @"DetermineHaveAvailable";
  v1736[0] = v3;
  v1736[1] = v2;
  v1737[0] = @"GroupsAvailableContent";
  v1737[1] = @"ReplyHaveAvailable";
  v539 = [NSDictionary dictionaryWithObjects:v1737 forKeys:v1736 count:2];
  v1781[21] = v539;
  v1780[22] = @"ClientAlteredForgetDetermine";
  v1734[0] = v3;
  v1734[1] = v2;
  v1735[0] = @"CancelingIgnoreDetermine";
  v1735[1] = @"CancelActiveJob";
  v538 = [NSDictionary dictionaryWithObjects:v1735 forKeys:v1734 count:2];
  v1781[22] = v538;
  v1780[23] = @"ClientSetTargetsForgetDetermine";
  v1732[0] = v3;
  v1732[1] = v2;
  v1733[0] = @"CancelingIgnoreDetermine";
  v1733[1] = @"CancelActiveJob";
  v537 = [NSDictionary dictionaryWithObjects:v1733 forKeys:v1732 count:2];
  v1781[23] = v537;
  v1780[24] = @"TargetHaveOtherAvailable";
  v1730[0] = v3;
  v1730[1] = v2;
  v1731[0] = @"CancelingDetermine";
  v1731[1] = @"ClientAcceptCancelActiveJob";
  v536 = [NSDictionary dictionaryWithObjects:v1731 forKeys:v1730 count:2];
  v1781[24] = v536;
  v1780[25] = @"TargetNoOtherAvailable";
  v1728[0] = v3;
  v1728[1] = v2;
  v1729[0] = @"CancelingDetermine";
  v1729[1] = @"ClientAcceptCancelActiveJob";
  v535 = [NSDictionary dictionaryWithObjects:v1729 forKeys:v1728 count:2];
  v1781[25] = v535;
  v1780[26] = @"UnstagedFromControlCancelJob";
  v1726[0] = v3;
  v1726[1] = v2;
  v1727[0] = @"CancelingDetermine";
  v1727[1] = @"CancelActiveJob";
  v534 = [NSDictionary dictionaryWithObjects:v1727 forKeys:v1726 count:2];
  v1781[26] = v534;
  v1780[27] = @"TimeoutValidActiveDetermine";
  v1724 = v3;
  v1725 = @"OptionalDeterminingLast";
  v533 = [NSDictionary dictionaryWithObjects:&v1725 forKeys:&v1724 count:1];
  v1781[27] = v533;
  v1780[28] = @"PurgeAcceptedRemoveDownloaded";
  v1722 = v2;
  v1723 = @"RemoveAllReplyPurged";
  v532 = [NSDictionary dictionaryWithObjects:&v1723 forKeys:&v1722 count:1];
  v1781[28] = v532;
  v1780[29] = @"PurgeAcceptedRemoveAll";
  v1720 = v2;
  v1721 = @"RemoveAllReplyPurged";
  v531 = [NSDictionary dictionaryWithObjects:&v1721 forKeys:&v1720 count:1];
  v1781[29] = v531;
  v1780[30] = @"EliminateCurrentJob";
  v1718[0] = v3;
  v1718[1] = v2;
  v1719[0] = @"DetermineEliminating";
  v1719[1] = @"EliminateCancelActiveJob";
  v530 = [NSDictionary dictionaryWithObjects:v1719 forKeys:v1718 count:2];
  v1781[30] = v530;
  v529 = [NSDictionary dictionaryWithObjects:v1781 forKeys:v1780 count:31];
  v2013[6] = v529;
  v2012[7] = @"AllDeterminingAvailable";
  v1716[0] = @"ControlForceUnstage";
  v1714 = v2;
  v1715 = @"ControlUnstagedDecideCancelJob";
  v528 = [NSDictionary dictionaryWithObjects:&v1715 forKeys:&v1714 count:1];
  v1717[0] = v528;
  v1716[1] = @"ControlEliminateAssetSelector";
  v1712 = v2;
  v1713 = @"EliminateDeterminingDecideMatch";
  v527 = [NSDictionary dictionaryWithObjects:&v1713 forKeys:&v1712 count:1];
  v1717[1] = v527;
  v1716[2] = @"ControlEliminateSetIdentifier";
  v1710 = v2;
  v1711 = @"SetEliminateDeterminingDecideMatch";
  v526 = [NSDictionary dictionaryWithObjects:&v1711 forKeys:&v1710 count:1];
  v1717[2] = v526;
  v1716[3] = @"ControlAlteredSetConfiguration";
  v1708[0] = v3;
  v1708[1] = v2;
  v1709[0] = @"CancelingDetermine";
  v1709[1] = @"AlteredInvalAllAvailableCancelActiveJob";
  v525 = [NSDictionary dictionaryWithObjects:v1709 forKeys:v1708 count:2];
  v1717[3] = v525;
  v1716[4] = @"ControlSetTargetsSpecified";
  v1706[0] = v3;
  v1706[1] = v2;
  v1707[0] = @"CancelingDetermine";
  v1707[1] = @"SetTargetInvalAllAvailableCancelActiveJob";
  v524 = [NSDictionary dictionaryWithObjects:v1707 forKeys:v1706 count:2];
  v1717[4] = v524;
  v1716[5] = @"ClientDetermineGroupsAvailable";
  v1704 = v2;
  v1705 = @"ClientNewerReplyEmptyDetermine";
  v523 = [NSDictionary dictionaryWithObjects:&v1705 forKeys:&v1704 count:1];
  v1717[5] = v523;
  v1716[6] = @"ClientDetermineAllAvailable";
  v1702 = v2;
  v1703 = @"ClientContinueUsingLatestRequest";
  v522 = [NSDictionary dictionaryWithObjects:&v1703 forKeys:&v1702 count:1];
  v1717[6] = v522;
  v1716[7] = @"ClientDownloadAlreadyStaged";
  v1700 = v2;
  v1701 = @"ClientNothingStaged";
  v521 = [NSDictionary dictionaryWithObjects:&v1701 forKeys:&v1700 count:1];
  v1717[7] = v521;
  v1716[8] = @"ClientDownloadGroupsAvailable";
  v1698 = v2;
  v1699 = @"ClientNewerReplyEmptyDownload";
  v520 = [NSDictionary dictionaryWithObjects:&v1699 forKeys:&v1698 count:1];
  v1717[8] = v520;
  v1716[9] = @"ClientDownloadAllAvailable";
  v1696 = v2;
  v1697 = @"ClientInvalidStagingPhase";
  v519 = [NSDictionary dictionaryWithObjects:&v1697 forKeys:&v1696 count:1];
  v1717[9] = v519;
  v1716[10] = @"ClientCancelCompletion";
  v1694 = v2;
  v1695 = @"ClientCancelDesireForCompletion";
  v518 = [NSDictionary dictionaryWithObjects:&v1695 forKeys:&v1694 count:1];
  v1717[10] = v518;
  v1716[11] = @"ClientPurgeAll";
  v1692[0] = v3;
  v1692[1] = v2;
  v1693[0] = @"CancelingDetermine";
  v1693[1] = @"ClientAcceptCancelActiveJob";
  v517 = [NSDictionary dictionaryWithObjects:v1693 forKeys:v1692 count:2];
  v1717[11] = v517;
  v1716[12] = @"ClientEraseAll";
  v1690[0] = v3;
  v1690[1] = v2;
  v1691[0] = @"ErasingDetermine";
  v1691[1] = @"ClientAcceptEraseActiveJob";
  v516 = [NSDictionary dictionaryWithObjects:v1691 forKeys:v1690 count:2];
  v1717[12] = v516;
  v1716[13] = @"JobFailedToStart";
  v1688 = v2;
  v1689 = @"DecideMoreCandidates";
  v515 = [NSDictionary dictionaryWithObjects:&v1689 forKeys:&v1688 count:1];
  v1717[13] = v515;
  v1716[14] = @"JobDetermineAvailableSuccess";
  v1686 = v2;
  v1687 = @"AddToAvailableDecideMoreCandidates";
  v514 = [NSDictionary dictionaryWithObjects:&v1687 forKeys:&v1686 count:1];
  v1717[14] = v514;
  v1716[15] = @"JobDetermineAvailableFailure";
  v1684 = v2;
  v1685 = @"DecideMoreCandidates";
  v513 = [NSDictionary dictionaryWithObjects:&v1685 forKeys:&v1684 count:1];
  v1717[15] = v513;
  v1716[16] = @"TimerFiredDetermining";
  v1682 = v2;
  v1683 = @"DecideTimerDeterminingValid";
  v512 = [NSDictionary dictionaryWithObjects:&v1683 forKeys:&v1682 count:1];
  v1717[16] = v512;
  v1716[17] = @"DetermineMoreCandidates";
  v1680 = v2;
  v1681 = @"NextCandidateBeginDetermine";
  v511 = [NSDictionary dictionaryWithObjects:&v1681 forKeys:&v1680 count:1];
  v1717[17] = v511;
  v1716[18] = @"DetermineDoneCandidates";
  v1678 = v2;
  v1679 = @"DoneCandidatesDecideAnyAvailable";
  v510 = [NSDictionary dictionaryWithObjects:&v1679 forKeys:&v1678 count:1];
  v1717[18] = v510;
  v1716[19] = @"DetermineNothingAvailable";
  v1676[0] = v3;
  v1676[1] = v2;
  v1677[0] = @"NothingAvailable";
  v1677[1] = @"ReplyNoCandidatesPurgeAll";
  v509 = [NSDictionary dictionaryWithObjects:v1677 forKeys:v1676 count:2];
  v1717[19] = v509;
  v1716[20] = @"DetermineHaveAvailable";
  v1674[0] = v3;
  v1674[1] = v2;
  v1675[0] = @"AllAvailableContent";
  v1675[1] = @"ReplyHaveAvailable";
  v508 = [NSDictionary dictionaryWithObjects:v1675 forKeys:v1674 count:2];
  v1717[20] = v508;
  v1716[21] = @"UnstagedFromControlCancelJob";
  v1672[0] = v3;
  v1672[1] = v2;
  v1673[0] = @"CancelingDetermine";
  v1673[1] = @"CancelActiveJob";
  v507 = [NSDictionary dictionaryWithObjects:v1673 forKeys:v1672 count:2];
  v1717[21] = v507;
  v1716[22] = @"TimeoutValidActiveDetermine";
  v1670 = v3;
  v1671 = @"AllDeterminingLast";
  v506 = [NSDictionary dictionaryWithObjects:&v1671 forKeys:&v1670 count:1];
  v1717[22] = v506;
  v1716[23] = @"EliminateCurrentJob";
  v1668[0] = v3;
  v1668[1] = v2;
  v1669[0] = @"DetermineEliminating";
  v1669[1] = @"EliminateCancelActiveJob";
  v505 = [NSDictionary dictionaryWithObjects:v1669 forKeys:v1668 count:2];
  v1717[23] = v505;
  v504 = [NSDictionary dictionaryWithObjects:v1717 forKeys:v1716 count:24];
  v2013[7] = v504;
  v2012[8] = @"RequiredDeterminingLast";
  v1666[0] = @"ControlForceUnstage";
  v1664 = v2;
  v1665 = @"ControlUnstagedDecideCancelJob";
  v503 = [NSDictionary dictionaryWithObjects:&v1665 forKeys:&v1664 count:1];
  v1667[0] = v503;
  v1666[1] = @"ControlEliminateAssetSelector";
  v1662 = v2;
  v1663 = @"EliminateDeterminingDecideMatch";
  v502 = [NSDictionary dictionaryWithObjects:&v1663 forKeys:&v1662 count:1];
  v1667[1] = v502;
  v1666[2] = @"ControlEliminateSetIdentifier";
  v1660 = v2;
  v1661 = @"SetEliminateDeterminingDecideMatch";
  v501 = [NSDictionary dictionaryWithObjects:&v1661 forKeys:&v1660 count:1];
  v1667[2] = v501;
  v1666[3] = @"ControlAlteredSetConfiguration";
  v1658 = v2;
  v1659 = @"AlteredDecideSameSetConfiguration";
  v500 = [NSDictionary dictionaryWithObjects:&v1659 forKeys:&v1658 count:1];
  v1667[3] = v500;
  v1666[4] = @"ControlSetTargetsSpecified";
  v1656 = v2;
  v1657 = @"SetTargetDecideSameTarget";
  v499 = [NSDictionary dictionaryWithObjects:&v1657 forKeys:&v1656 count:1];
  v1667[4] = v499;
  v1666[5] = @"ClientDetermineGroupsAvailable";
  v1654 = v2;
  v1655 = @"ClientNewerReplySameOrEmptyDetermine";
  v498 = [NSDictionary dictionaryWithObjects:&v1655 forKeys:&v1654 count:1];
  v1667[5] = v498;
  v1666[6] = @"ClientDetermineAllAvailable";
  v1652 = v2;
  v1653 = @"ClientFailWrongMode";
  v497 = [NSDictionary dictionaryWithObjects:&v1653 forKeys:&v1652 count:1];
  v1667[6] = v497;
  v1666[7] = @"ClientDownloadAlreadyStaged";
  v1650 = v2;
  v1651 = @"ClientNothingStaged";
  v496 = [NSDictionary dictionaryWithObjects:&v1651 forKeys:&v1650 count:1];
  v1667[7] = v496;
  v1666[8] = @"ClientDownloadGroupsAvailable";
  v1648 = v2;
  v1649 = @"ClientNewerReplyEmptyDownload";
  v495 = [NSDictionary dictionaryWithObjects:&v1649 forKeys:&v1648 count:1];
  v1667[8] = v495;
  v1666[9] = @"ClientDownloadAllAvailable";
  v1646 = v2;
  v1647 = @"ClientInvalidStagingPhase";
  v494 = [NSDictionary dictionaryWithObjects:&v1647 forKeys:&v1646 count:1];
  v1667[9] = v494;
  v1666[10] = @"ClientCancelCompletion";
  v1644 = v2;
  v1645 = @"ClientCancelDesireForCompletion";
  v493 = [NSDictionary dictionaryWithObjects:&v1645 forKeys:&v1644 count:1];
  v1667[10] = v493;
  v1666[11] = @"ClientPurgeAll";
  v1642 = v2;
  v1643 = @"ClientPurgeDecideStagingClient";
  v492 = [NSDictionary dictionaryWithObjects:&v1643 forKeys:&v1642 count:1];
  v1667[11] = v492;
  v1666[12] = @"ClientEraseAll";
  v1640[0] = v3;
  v1640[1] = v2;
  v1641[0] = @"ErasingDetermine";
  v1641[1] = @"ClientAcceptEraseActiveJob";
  v491 = [NSDictionary dictionaryWithObjects:v1641 forKeys:v1640 count:2];
  v1667[12] = v491;
  v1666[13] = @"JobFailedToStart";
  v1638 = v2;
  v1639 = @"FailRequiredDetermineBlocksOTA";
  v490 = [NSDictionary dictionaryWithObjects:&v1639 forKeys:&v1638 count:1];
  v1667[13] = v490;
  v1666[14] = @"JobDetermineAvailableSuccess";
  v1636 = v2;
  v1637 = @"AddToAvailableDecideRequiredAvailable";
  v489 = [NSDictionary dictionaryWithObjects:&v1637 forKeys:&v1636 count:1];
  v1667[14] = v489;
  v1666[15] = @"JobDetermineAvailableFailure";
  v1634 = v2;
  v1635 = @"DecideRequiredErrorBlocksOTA";
  v488 = [NSDictionary dictionaryWithObjects:&v1635 forKeys:&v1634 count:1];
  v1667[15] = v488;
  v1666[16] = @"TimerFiredDetermining";
  v1632 = v2;
  v1633 = v4;
  v487 = [NSDictionary dictionaryWithObjects:&v1633 forKeys:&v1632 count:1];
  v1667[16] = v487;
  v1666[17] = @"DetermineDoneCandidates";
  v1630 = v2;
  v1631 = @"DoneCandidatesDecideAnyAvailable";
  v486 = [NSDictionary dictionaryWithObjects:&v1631 forKeys:&v1630 count:1];
  v1667[17] = v486;
  v1666[18] = @"DetermineNothingAvailable";
  v1628[0] = v3;
  v1628[1] = v2;
  v1629[0] = @"GroupsAvailableContent";
  v1629[1] = @"ReplyNoCandidatesPurgeAll";
  v485 = [NSDictionary dictionaryWithObjects:v1629 forKeys:v1628 count:2];
  v1667[18] = v485;
  v1666[19] = @"DetermineNothingOtherAvailable";
  v1626[0] = v3;
  v1626[1] = v2;
  v1627[0] = @"GroupsAvailableContent";
  v1627[1] = @"ReplyNoCandidates";
  v484 = [NSDictionary dictionaryWithObjects:v1627 forKeys:v1626 count:2];
  v1667[19] = v484;
  v1666[20] = @"RequiredErrorNonFatal";
  v1624 = v2;
  v1625 = @"IgnoreFailureDecideRequiredAvailable";
  v483 = [NSDictionary dictionaryWithObjects:&v1625 forKeys:&v1624 count:1];
  v1667[20] = v483;
  v1666[21] = @"RequiredErrorBlocksOTA";
  v1622 = v2;
  v1623 = @"FailRequiredDetermineBlocksOTA";
  v482 = [NSDictionary dictionaryWithObjects:&v1623 forKeys:&v1622 count:1];
  v1667[21] = v482;
  v1666[22] = @"DetermineHaveAvailable";
  v1620[0] = v3;
  v1620[1] = v2;
  v1621[0] = @"GroupsAvailableContent";
  v1621[1] = @"ReplyHaveAvailable";
  v481 = [NSDictionary dictionaryWithObjects:v1621 forKeys:v1620 count:2];
  v1667[22] = v481;
  v1666[23] = @"ClientAlteredForgetDetermine";
  v1618[0] = v3;
  v1618[1] = v2;
  v1619[0] = @"CancelingIgnoreDetermine";
  v1619[1] = @"CancelActiveJob";
  v480 = [NSDictionary dictionaryWithObjects:v1619 forKeys:v1618 count:2];
  v1667[23] = v480;
  v1666[24] = @"ClientSetTargetsForgetDetermine";
  v1616[0] = v3;
  v1616[1] = v2;
  v1617[0] = @"CancelingIgnoreDetermine";
  v1617[1] = @"CancelActiveJob";
  v479 = [NSDictionary dictionaryWithObjects:v1617 forKeys:v1616 count:2];
  v1667[24] = v479;
  v1666[25] = @"TargetHaveOtherAvailable";
  v1614[0] = v3;
  v1614[1] = v2;
  v1615[0] = @"CancelingDetermine";
  v1615[1] = @"ClientAcceptCancelActiveJob";
  v478 = [NSDictionary dictionaryWithObjects:v1615 forKeys:v1614 count:2];
  v1667[25] = v478;
  v1666[26] = @"TargetNoOtherAvailable";
  v1612[0] = v3;
  v1612[1] = v2;
  v1613[0] = @"CancelingDetermine";
  v1613[1] = @"ClientAcceptCancelActiveJob";
  v477 = [NSDictionary dictionaryWithObjects:v1613 forKeys:v1612 count:2];
  v1667[26] = v477;
  v1666[27] = @"UnstagedFromControlCancelJob";
  v1610[0] = v3;
  v1610[1] = v2;
  v1611[0] = @"CancelingDetermine";
  v1611[1] = @"CancelActiveJob";
  v476 = [NSDictionary dictionaryWithObjects:v1611 forKeys:v1610 count:2];
  v1667[27] = v476;
  v1666[28] = @"PurgeAcceptedRemoveDownloaded";
  v1608 = v2;
  v1609 = @"RemoveAllReplyPurged";
  v475 = [NSDictionary dictionaryWithObjects:&v1609 forKeys:&v1608 count:1];
  v1667[28] = v475;
  v1666[29] = @"PurgeAcceptedRemoveAll";
  v1606 = v2;
  v1607 = @"RemoveAllReplyPurged";
  v474 = [NSDictionary dictionaryWithObjects:&v1607 forKeys:&v1606 count:1];
  v1667[29] = v474;
  v1666[30] = @"EliminateCurrentJob";
  v1604[0] = v3;
  v1604[1] = v2;
  v1605[0] = @"DetermineEliminating";
  v1605[1] = @"EliminateCancelActiveJob";
  v473 = [NSDictionary dictionaryWithObjects:v1605 forKeys:v1604 count:2];
  v1667[30] = v473;
  v472 = [NSDictionary dictionaryWithObjects:v1667 forKeys:v1666 count:31];
  v2013[8] = v472;
  v2012[9] = @"OptionalDeterminingLast";
  v1602[0] = @"ControlForceUnstage";
  v1600 = v2;
  v1601 = @"ControlUnstagedDecideCancelJob";
  v471 = [NSDictionary dictionaryWithObjects:&v1601 forKeys:&v1600 count:1];
  v1603[0] = v471;
  v1602[1] = @"ControlEliminateAssetSelector";
  v1598 = v2;
  v1599 = @"EliminateDeterminingDecideMatch";
  v470 = [NSDictionary dictionaryWithObjects:&v1599 forKeys:&v1598 count:1];
  v1603[1] = v470;
  v1602[2] = @"ControlEliminateSetIdentifier";
  v1596 = v2;
  v1597 = @"SetEliminateDeterminingDecideMatch";
  v469 = [NSDictionary dictionaryWithObjects:&v1597 forKeys:&v1596 count:1];
  v1603[2] = v469;
  v1602[3] = @"ControlAlteredSetConfiguration";
  v1594 = v2;
  v1595 = @"AlteredDecideSameSetConfiguration";
  v468 = [NSDictionary dictionaryWithObjects:&v1595 forKeys:&v1594 count:1];
  v1603[3] = v468;
  v1602[4] = @"ControlSetTargetsSpecified";
  v1592 = v2;
  v1593 = @"SetTargetDecideSameTarget";
  v467 = [NSDictionary dictionaryWithObjects:&v1593 forKeys:&v1592 count:1];
  v1603[4] = v467;
  v1602[5] = @"ClientDetermineGroupsAvailable";
  v1590 = v2;
  v1591 = @"ClientNewerReplySameOrEmptyDetermine";
  v466 = [NSDictionary dictionaryWithObjects:&v1591 forKeys:&v1590 count:1];
  v1603[5] = v466;
  v1602[6] = @"ClientDetermineAllAvailable";
  v1588 = v2;
  v1589 = @"ClientFailWrongMode";
  v465 = [NSDictionary dictionaryWithObjects:&v1589 forKeys:&v1588 count:1];
  v1603[6] = v465;
  v1602[7] = @"ClientDownloadAlreadyStaged";
  v1586 = v2;
  v1587 = @"ClientNothingStaged";
  v464 = [NSDictionary dictionaryWithObjects:&v1587 forKeys:&v1586 count:1];
  v1603[7] = v464;
  v1602[8] = @"ClientDownloadGroupsAvailable";
  v1584 = v2;
  v1585 = @"ClientNewerReplyEmptyDownload";
  v463 = [NSDictionary dictionaryWithObjects:&v1585 forKeys:&v1584 count:1];
  v1603[8] = v463;
  v1602[9] = @"ClientDownloadAllAvailable";
  v1582 = v2;
  v1583 = @"ClientInvalidStagingPhase";
  v462 = [NSDictionary dictionaryWithObjects:&v1583 forKeys:&v1582 count:1];
  v1603[9] = v462;
  v1602[10] = @"ClientCancelCompletion";
  v1580 = v2;
  v1581 = @"ClientCancelDesireForCompletion";
  v461 = [NSDictionary dictionaryWithObjects:&v1581 forKeys:&v1580 count:1];
  v1603[10] = v461;
  v1602[11] = @"ClientPurgeAll";
  v1578 = v2;
  v1579 = @"ClientPurgeDecideStagingClient";
  v460 = [NSDictionary dictionaryWithObjects:&v1579 forKeys:&v1578 count:1];
  v1603[11] = v460;
  v1602[12] = @"ClientEraseAll";
  v1576[0] = v3;
  v1576[1] = v2;
  v1577[0] = @"ErasingDetermine";
  v1577[1] = @"ClientAcceptEraseActiveJob";
  v459 = [NSDictionary dictionaryWithObjects:v1577 forKeys:v1576 count:2];
  v1603[12] = v459;
  v1602[13] = @"JobFailedToStart";
  v1574 = v2;
  v1575 = @"DoneCandidatesDecideAnyAvailable";
  v458 = [NSDictionary dictionaryWithObjects:&v1575 forKeys:&v1574 count:1];
  v1603[13] = v458;
  v1602[14] = @"JobDetermineAvailableSuccess";
  v1572 = v2;
  v1573 = @"AddToAvailableDecideAnyAvailable";
  v457 = [NSDictionary dictionaryWithObjects:&v1573 forKeys:&v1572 count:1];
  v1603[14] = v457;
  v1602[15] = @"JobDetermineAvailableFailure";
  v1570 = v2;
  v1571 = @"DoneCandidatesDecideAnyAvailable";
  v456 = [NSDictionary dictionaryWithObjects:&v1571 forKeys:&v1570 count:1];
  v1603[15] = v456;
  v1602[16] = @"TimerFiredDetermining";
  v1568 = v2;
  v1569 = v4;
  v455 = [NSDictionary dictionaryWithObjects:&v1569 forKeys:&v1568 count:1];
  v1603[16] = v455;
  v1602[17] = @"DetermineNothingAvailable";
  v1566[0] = v3;
  v1566[1] = v2;
  v1567[0] = @"GroupsAvailableContent";
  v1567[1] = @"ReplyNoCandidatesPurgeAll";
  v454 = [NSDictionary dictionaryWithObjects:v1567 forKeys:v1566 count:2];
  v1603[17] = v454;
  v1602[18] = @"DetermineNothingOtherAvailable";
  v1564[0] = v3;
  v1564[1] = v2;
  v1565[0] = @"GroupsAvailableContent";
  v1565[1] = @"ReplyNoCandidates";
  v453 = [NSDictionary dictionaryWithObjects:v1565 forKeys:v1564 count:2];
  v1603[18] = v453;
  v1602[19] = @"DetermineHaveAvailable";
  v1562[0] = v3;
  v1562[1] = v2;
  v1563[0] = @"GroupsAvailableContent";
  v1563[1] = @"ReplyHaveAvailable";
  v452 = [NSDictionary dictionaryWithObjects:v1563 forKeys:v1562 count:2];
  v1603[19] = v452;
  v1602[20] = @"ClientAlteredForgetDetermine";
  v1560[0] = v3;
  v1560[1] = v2;
  v1561[0] = @"CancelingIgnoreDetermine";
  v1561[1] = @"CancelActiveJob";
  v451 = [NSDictionary dictionaryWithObjects:v1561 forKeys:v1560 count:2];
  v1603[20] = v451;
  v1602[21] = @"ClientSetTargetsForgetDetermine";
  v1558[0] = v3;
  v1558[1] = v2;
  v1559[0] = @"CancelingIgnoreDetermine";
  v1559[1] = @"CancelActiveJob";
  v450 = [NSDictionary dictionaryWithObjects:v1559 forKeys:v1558 count:2];
  v1603[21] = v450;
  v1602[22] = @"UnstagedFromControlCancelJob";
  v1556[0] = v3;
  v1556[1] = v2;
  v1557[0] = @"CancelingDetermine";
  v1557[1] = @"CancelActiveJob";
  v449 = [NSDictionary dictionaryWithObjects:v1557 forKeys:v1556 count:2];
  v1603[22] = v449;
  v1602[23] = @"PurgeAcceptedRemoveDownloaded";
  v1554 = v2;
  v1555 = @"RemoveAllReplyPurged";
  v448 = [NSDictionary dictionaryWithObjects:&v1555 forKeys:&v1554 count:1];
  v1603[23] = v448;
  v1602[24] = @"PurgeAcceptedRemoveAll";
  v1552 = v2;
  v1553 = @"RemoveAllReplyPurged";
  v447 = [NSDictionary dictionaryWithObjects:&v1553 forKeys:&v1552 count:1];
  v1603[24] = v447;
  v1602[25] = @"EliminateCurrentJob";
  v1550[0] = v3;
  v1550[1] = v2;
  v1551[0] = @"DetermineEliminating";
  v1551[1] = @"EliminateCancelActiveJob";
  v446 = [NSDictionary dictionaryWithObjects:v1551 forKeys:v1550 count:2];
  v1603[25] = v446;
  v445 = [NSDictionary dictionaryWithObjects:v1603 forKeys:v1602 count:26];
  v2013[9] = v445;
  v2012[10] = @"AllDeterminingLast";
  v1548[0] = @"ControlForceUnstage";
  v1546 = v2;
  v1547 = @"ControlUnstagedDecideCancelJob";
  v444 = [NSDictionary dictionaryWithObjects:&v1547 forKeys:&v1546 count:1];
  v1549[0] = v444;
  v1548[1] = @"ControlEliminateAssetSelector";
  v1544 = v2;
  v1545 = @"EliminateDeterminingDecideMatch";
  v443 = [NSDictionary dictionaryWithObjects:&v1545 forKeys:&v1544 count:1];
  v1549[1] = v443;
  v1548[2] = @"ControlEliminateSetIdentifier";
  v1542 = v2;
  v1543 = @"SetEliminateDeterminingDecideMatch";
  v442 = [NSDictionary dictionaryWithObjects:&v1543 forKeys:&v1542 count:1];
  v1549[2] = v442;
  v1548[3] = @"ControlAlteredSetConfiguration";
  v1540[0] = v3;
  v1540[1] = v2;
  v1541[0] = @"CancelingDetermine";
  v1541[1] = @"AlteredInvalAllAvailableCancelActiveJob";
  v441 = [NSDictionary dictionaryWithObjects:v1541 forKeys:v1540 count:2];
  v1549[3] = v441;
  v1548[4] = @"ControlSetTargetsSpecified";
  v1538[0] = v3;
  v1538[1] = v2;
  v1539[0] = @"CancelingDetermine";
  v1539[1] = @"SetTargetInvalAllAvailableCancelActiveJob";
  v440 = [NSDictionary dictionaryWithObjects:v1539 forKeys:v1538 count:2];
  v1549[4] = v440;
  v1548[5] = @"ClientDetermineGroupsAvailable";
  v1536 = v2;
  v1537 = @"ClientNewerReplyEmptyDetermine";
  v439 = [NSDictionary dictionaryWithObjects:&v1537 forKeys:&v1536 count:1];
  v1549[5] = v439;
  v1548[6] = @"ClientDetermineAllAvailable";
  v1534 = v2;
  v1535 = @"ClientContinueRestartingMaxDetermining";
  v438 = [NSDictionary dictionaryWithObjects:&v1535 forKeys:&v1534 count:1];
  v1549[6] = v438;
  v1548[7] = @"ClientDownloadAlreadyStaged";
  v1532 = v2;
  v1533 = @"ClientNothingStaged";
  v437 = [NSDictionary dictionaryWithObjects:&v1533 forKeys:&v1532 count:1];
  v1549[7] = v437;
  v1548[8] = @"ClientDownloadGroupsAvailable";
  v1530 = v2;
  v1531 = @"ClientNewerReplyEmptyDownload";
  v436 = [NSDictionary dictionaryWithObjects:&v1531 forKeys:&v1530 count:1];
  v1549[8] = v436;
  v1548[9] = @"ClientDownloadAllAvailable";
  v1528 = v2;
  v1529 = @"ClientInvalidStagingPhase";
  v435 = [NSDictionary dictionaryWithObjects:&v1529 forKeys:&v1528 count:1];
  v1549[9] = v435;
  v1548[10] = @"ClientCancelCompletion";
  v1526 = v2;
  v1527 = @"ClientCancelDesireForCompletion";
  v434 = [NSDictionary dictionaryWithObjects:&v1527 forKeys:&v1526 count:1];
  v1549[10] = v434;
  v1548[11] = @"ClientPurgeAll";
  v1524[0] = v3;
  v1524[1] = v2;
  v1525[0] = @"CancelingDetermine";
  v1525[1] = @"ClientAcceptCancelActiveJob";
  v433 = [NSDictionary dictionaryWithObjects:v1525 forKeys:v1524 count:2];
  v1549[11] = v433;
  v1548[12] = @"ClientEraseAll";
  v1522[0] = v3;
  v1522[1] = v2;
  v1523[0] = @"ErasingDetermine";
  v1523[1] = @"ClientAcceptEraseActiveJob";
  v432 = [NSDictionary dictionaryWithObjects:v1523 forKeys:v1522 count:2];
  v1549[12] = v432;
  v1548[13] = @"JobFailedToStart";
  v1520 = v2;
  v1521 = @"DoneCandidatesDecideAnyAvailable";
  v431 = [NSDictionary dictionaryWithObjects:&v1521 forKeys:&v1520 count:1];
  v1549[13] = v431;
  v1548[14] = @"JobDetermineAvailableSuccess";
  v1518 = v2;
  v1519 = @"AddToAvailableDecideAnyAvailable";
  v430 = [NSDictionary dictionaryWithObjects:&v1519 forKeys:&v1518 count:1];
  v1549[14] = v430;
  v1548[15] = @"JobDetermineAvailableFailure";
  v1516 = v2;
  v1517 = @"DoneCandidatesDecideAnyAvailable";
  v429 = [NSDictionary dictionaryWithObjects:&v1517 forKeys:&v1516 count:1];
  v1549[15] = v429;
  v1548[16] = @"TimerFiredDetermining";
  v1514 = v2;
  v1515 = v4;
  v428 = [NSDictionary dictionaryWithObjects:&v1515 forKeys:&v1514 count:1];
  v1549[16] = v428;
  v1548[17] = @"DetermineNothingAvailable";
  v1512[0] = v3;
  v1512[1] = v2;
  v1513[0] = @"NothingAvailable";
  v1513[1] = @"ReplyNoCandidatesPurgeAll";
  v427 = [NSDictionary dictionaryWithObjects:v1513 forKeys:v1512 count:2];
  v1549[17] = v427;
  v1548[18] = @"DetermineHaveAvailable";
  v1510[0] = v3;
  v1510[1] = v2;
  v1511[0] = @"AllAvailableContent";
  v1511[1] = @"ReplyHaveAvailable";
  v426 = [NSDictionary dictionaryWithObjects:v1511 forKeys:v1510 count:2];
  v1549[18] = v426;
  v1548[19] = @"ClientAlteredForgetDetermine";
  v1508[0] = v3;
  v1508[1] = v2;
  v1509[0] = @"CancelingDetermine";
  v1509[1] = @"CancelActiveJob";
  v425 = [NSDictionary dictionaryWithObjects:v1509 forKeys:v1508 count:2];
  v1549[19] = v425;
  v1548[20] = @"ClientSetTargetsForgetDetermine";
  v1506[0] = v3;
  v1506[1] = v2;
  v1507[0] = @"CancelingDetermine";
  v1507[1] = @"CancelActiveJob";
  v424 = [NSDictionary dictionaryWithObjects:v1507 forKeys:v1506 count:2];
  v1549[20] = v424;
  v1548[21] = @"UnstagedFromControlCancelJob";
  v1504[0] = v3;
  v1504[1] = v2;
  v1505[0] = @"CancelingDetermine";
  v1505[1] = @"CancelActiveJob";
  v423 = [NSDictionary dictionaryWithObjects:v1505 forKeys:v1504 count:2];
  v1549[21] = v423;
  v1548[22] = @"EliminateCurrentJob";
  v1502[0] = v3;
  v1502[1] = v2;
  v1503[0] = @"DetermineEliminating";
  v1503[1] = @"EliminateCancelActiveJob";
  v422 = [NSDictionary dictionaryWithObjects:v1503 forKeys:v1502 count:2];
  v1549[22] = v422;
  v421 = [NSDictionary dictionaryWithObjects:v1549 forKeys:v1548 count:23];
  v2013[10] = v421;
  v2012[11] = @"DetermineEliminating";
  v1500[0] = @"ControlForceUnstage";
  v1498 = v2;
  v1499 = @"ControlUnstagedDecideCancelJob";
  v420 = [NSDictionary dictionaryWithObjects:&v1499 forKeys:&v1498 count:1];
  v1501[0] = v420;
  v1500[1] = @"ControlEliminateAssetSelector";
  v1496 = v2;
  v1497 = @"EliminateDeterminingDecideMatch";
  v419 = [NSDictionary dictionaryWithObjects:&v1497 forKeys:&v1496 count:1];
  v1501[1] = v419;
  v1500[2] = @"ControlEliminateSetIdentifier";
  v1494 = v2;
  v1495 = @"SetEliminateDeterminingDecideMatch";
  v418 = [NSDictionary dictionaryWithObjects:&v1495 forKeys:&v1494 count:1];
  v1501[2] = v418;
  v1500[3] = @"ControlAlteredSetConfiguration";
  v1492 = v2;
  v1493 = @"AlteredDecideSameSetConfiguration";
  v417 = [NSDictionary dictionaryWithObjects:&v1493 forKeys:&v1492 count:1];
  v1501[3] = v417;
  v1500[4] = @"ControlSetTargetsSpecified";
  v1490 = v2;
  v1491 = @"SetTargetDecideSameTarget";
  v416 = [NSDictionary dictionaryWithObjects:&v1491 forKeys:&v1490 count:1];
  v1501[4] = v416;
  v1500[5] = @"ClientDetermineGroupsAvailable";
  v1488 = v2;
  v1489 = @"ClientNewerReplySameOrEmptyDetermine";
  v415 = [NSDictionary dictionaryWithObjects:&v1489 forKeys:&v1488 count:1];
  v1501[5] = v415;
  v1500[6] = @"ClientDetermineAllAvailable";
  v1486 = v2;
  v1487 = @"ClientFailWrongMode";
  v414 = [NSDictionary dictionaryWithObjects:&v1487 forKeys:&v1486 count:1];
  v1501[6] = v414;
  v1500[7] = @"ClientDownloadAlreadyStaged";
  v1484 = v2;
  v1485 = @"ClientNothingStaged";
  v413 = [NSDictionary dictionaryWithObjects:&v1485 forKeys:&v1484 count:1];
  v1501[7] = v413;
  v1500[8] = @"ClientDownloadGroupsAvailable";
  v1482 = v2;
  v1483 = @"ClientNewerReplyEmptyDownload";
  v412 = [NSDictionary dictionaryWithObjects:&v1483 forKeys:&v1482 count:1];
  v1501[8] = v412;
  v1500[9] = @"ClientDownloadAllAvailable";
  v1480 = v2;
  v1481 = @"ClientInvalidStagingPhase";
  v411 = [NSDictionary dictionaryWithObjects:&v1481 forKeys:&v1480 count:1];
  v1501[9] = v411;
  v1500[10] = @"ClientCancelCompletion";
  v1478 = v2;
  v1479 = @"ClientCancelDesireForCompletion";
  v410 = [NSDictionary dictionaryWithObjects:&v1479 forKeys:&v1478 count:1];
  v1501[10] = v410;
  v1500[11] = @"ClientPurgeAll";
  v1476 = v2;
  v1477 = @"ClientPurgeDecideStagingClient";
  v409 = [NSDictionary dictionaryWithObjects:&v1477 forKeys:&v1476 count:1];
  v1501[11] = v409;
  v1500[12] = @"ClientEraseAll";
  v1474[0] = v3;
  v1474[1] = v2;
  v1475[0] = @"ErasingDetermine";
  v1475[1] = @"ClientAcceptEraseActiveJob";
  v408 = [NSDictionary dictionaryWithObjects:v1475 forKeys:v1474 count:2];
  v1501[12] = v408;
  v1500[13] = @"JobFailedToStart";
  v1472 = v2;
  v1473 = @"DoneCandidatesDecideAnyAvailable";
  v407 = [NSDictionary dictionaryWithObjects:&v1473 forKeys:&v1472 count:1];
  v1501[13] = v407;
  v1500[14] = @"JobDetermineAvailableSuccess";
  v1470 = v2;
  v1471 = @"AddToAvailableDecideAnyAvailable";
  v406 = [NSDictionary dictionaryWithObjects:&v1471 forKeys:&v1470 count:1];
  v1501[14] = v406;
  v1500[15] = @"JobDetermineAvailableFailure";
  v1468 = v2;
  v1469 = @"DoneCandidatesDecideAnyAvailable";
  v405 = [NSDictionary dictionaryWithObjects:&v1469 forKeys:&v1468 count:1];
  v1501[15] = v405;
  v1500[16] = @"TimerFiredDetermining";
  v1466 = v2;
  v1467 = v4;
  v404 = [NSDictionary dictionaryWithObjects:&v1467 forKeys:&v1466 count:1];
  v1501[16] = v404;
  v1500[17] = @"DetermineNothingAvailable";
  v1464[0] = v3;
  v1464[1] = v2;
  v1465[0] = @"GroupsAvailableContent";
  v1465[1] = @"ReplyNoCandidatesPurgeAll";
  v403 = [NSDictionary dictionaryWithObjects:v1465 forKeys:v1464 count:2];
  v1501[17] = v403;
  v1500[18] = @"DetermineHaveAvailable";
  v1462[0] = v3;
  v1462[1] = v2;
  v1463[0] = @"GroupsAvailableContent";
  v1463[1] = @"ReplyHaveAvailable";
  v402 = [NSDictionary dictionaryWithObjects:v1463 forKeys:v1462 count:2];
  v1501[18] = v402;
  v1500[19] = @"ClientAlteredForgetDetermine";
  v1460[0] = v3;
  v1460[1] = v2;
  v1461[0] = @"CancelingIgnoreDetermine";
  v1461[1] = @"CancelActiveJob";
  v401 = [NSDictionary dictionaryWithObjects:v1461 forKeys:v1460 count:2];
  v1501[19] = v401;
  v1500[20] = @"ClientSetTargetsForgetDetermine";
  v1458[0] = v3;
  v1458[1] = v2;
  v1459[0] = @"CancelingIgnoreDetermine";
  v1459[1] = @"CancelActiveJob";
  v400 = [NSDictionary dictionaryWithObjects:v1459 forKeys:v1458 count:2];
  v1501[20] = v400;
  v1500[21] = @"UnstagedFromControlCancelJob";
  v1456 = v2;
  v1457 = v4;
  v399 = [NSDictionary dictionaryWithObjects:&v1457 forKeys:&v1456 count:1];
  v1501[21] = v399;
  v1500[22] = @"EliminateCurrentJob";
  v1454 = v2;
  v1455 = v4;
  v398 = [NSDictionary dictionaryWithObjects:&v1455 forKeys:&v1454 count:1];
  v1501[22] = v398;
  v397 = [NSDictionary dictionaryWithObjects:v1501 forKeys:v1500 count:23];
  v2013[11] = v397;
  v2012[12] = @"GroupsAvailableContent";
  v1452[0] = @"ControlForceUnstage";
  v1450 = v2;
  v1451 = @"RemoveAllReplyPurged";
  v396 = [NSDictionary dictionaryWithObjects:&v1451 forKeys:&v1450 count:1];
  v1453[0] = v396;
  v1452[1] = @"ControlEliminateAssetSelector";
  v1448 = v2;
  v1449 = @"EliminateAvailableDecideEmpty";
  v395 = [NSDictionary dictionaryWithObjects:&v1449 forKeys:&v1448 count:1];
  v1453[1] = v395;
  v1452[2] = @"ControlEliminateSetIdentifier";
  v1446 = v2;
  v1447 = @"SetEliminateAvailableDecideEmpty";
  v394 = [NSDictionary dictionaryWithObjects:&v1447 forKeys:&v1446 count:1];
  v1453[2] = v394;
  v1452[3] = @"ControlAlteredSetConfiguration";
  v1444 = v2;
  v1445 = @"AlteredDecideSameSetConfiguration";
  v393 = [NSDictionary dictionaryWithObjects:&v1445 forKeys:&v1444 count:1];
  v1453[3] = v393;
  v1452[4] = @"ControlSetTargetsSpecified";
  v1442 = v2;
  v1443 = @"SetTargetDecideSameTarget";
  v392 = [NSDictionary dictionaryWithObjects:&v1443 forKeys:&v1442 count:1];
  v1453[4] = v392;
  v1452[5] = @"ClientDetermineGroupsAvailable";
  v1440 = v2;
  v1441 = @"ClientCheckGroupsDecideAlreadyDetermined";
  v391 = [NSDictionary dictionaryWithObjects:&v1441 forKeys:&v1440 count:1];
  v1453[5] = v391;
  v1452[6] = @"ClientDetermineAllAvailable";
  v1438 = v2;
  v1439 = @"ClientFailWrongMode";
  v390 = [NSDictionary dictionaryWithObjects:&v1439 forKeys:&v1438 count:1];
  v1453[6] = v390;
  v1452[7] = @"ClientDownloadAlreadyStaged";
  v1436 = v2;
  v1437 = @"ClientNothingStaged";
  v389 = [NSDictionary dictionaryWithObjects:&v1437 forKeys:&v1436 count:1];
  v1453[7] = v389;
  v1452[8] = @"ClientDownloadGroupsAvailable";
  v1434 = v2;
  v1435 = @"ClientDecideGroupTargetAvailable";
  v388 = [NSDictionary dictionaryWithObjects:&v1435 forKeys:&v1434 count:1];
  v1453[8] = v388;
  v1452[9] = @"ClientDownloadAllAvailable";
  v1432 = v2;
  v1433 = @"ClientInvalidStagingPhase";
  v387 = [NSDictionary dictionaryWithObjects:&v1433 forKeys:&v1432 count:1];
  v1453[9] = v387;
  v1452[10] = @"ClientCancelCompletion";
  v1430 = v2;
  v1431 = @"ClientCancelDesireForCompletion";
  v386 = [NSDictionary dictionaryWithObjects:&v1431 forKeys:&v1430 count:1];
  v1453[10] = v386;
  v1452[11] = @"ClientPurgeAll";
  v1428 = v2;
  v1429 = @"ClientPurgeDecideStagingClient";
  v385 = [NSDictionary dictionaryWithObjects:&v1429 forKeys:&v1428 count:1];
  v1453[11] = v385;
  v1452[12] = @"ClientEraseAll";
  v1426 = v2;
  v1427 = @"ClientEraseDecideStagingClient";
  v384 = [NSDictionary dictionaryWithObjects:&v1427 forKeys:&v1426 count:1];
  v1453[12] = v384;
  v1452[13] = @"TimerFiredDetermining";
  v1424 = v2;
  v1425 = v4;
  v383 = [NSDictionary dictionaryWithObjects:&v1425 forKeys:&v1424 count:1];
  v1453[13] = v383;
  v1452[14] = @"ModeGroupsDetermineStart";
  v1422[0] = v3;
  v1422[1] = v2;
  v1423[0] = @"GroupsRequestingDownloaded";
  v1423[1] = @"RequestAlreadyDownloaded";
  v382 = [NSDictionary dictionaryWithObjects:v1423 forKeys:v1422 count:2];
  v1453[14] = v382;
  v1452[15] = @"ModeAllDetermineStart";
  v1420[0] = v3;
  v1420[1] = v2;
  v1421[0] = @"AllRequestingDownloaded";
  v1421[1] = @"RequestAlreadyDownloaded";
  v381 = [NSDictionary dictionaryWithObjects:v1421 forKeys:v1420 count:2];
  v1453[15] = v381;
  v1452[16] = @"ClientAlteredForgetDetermine";
  v1418 = v2;
  v1419 = v4;
  v380 = [NSDictionary dictionaryWithObjects:&v1419 forKeys:&v1418 count:1];
  v1453[16] = v380;
  v1452[17] = @"ClientSetTargetsForgetDetermine";
  v1416 = v2;
  v1417 = v4;
  v379 = [NSDictionary dictionaryWithObjects:&v1417 forKeys:&v1416 count:1];
  v1453[17] = v379;
  v1452[18] = @"TargetAvailableRequired";
  v1414 = v3;
  v1415 = @"RequiredDownloading";
  v378 = [NSDictionary dictionaryWithObjects:&v1415 forKeys:&v1414 count:1];
  v1453[18] = v378;
  v1452[19] = @"TargetAvailableOptional";
  v1412 = v3;
  v1413 = @"OptionalDownloading";
  v377 = [NSDictionary dictionaryWithObjects:&v1413 forKeys:&v1412 count:1];
  v1453[19] = v377;
  v1452[20] = @"TargetWasEmptied";
  v1410[0] = v3;
  v1410[1] = v2;
  v1411[0] = @"StagedContent";
  v1411[1] = @"ReplyHaveStaged";
  v376 = [NSDictionary dictionaryWithObjects:v1411 forKeys:v1410 count:2];
  v1453[20] = v376;
  v1452[21] = @"TargetNotAvailable";
  v1408 = v2;
  v1409 = @"ReplyTargetNotAvailable";
  v375 = [NSDictionary dictionaryWithObjects:&v1409 forKeys:&v1408 count:1];
  v1453[21] = v375;
  v1452[22] = @"EliminateNowEmpty";
  v1406 = v2;
  v1407 = v4;
  v374 = [NSDictionary dictionaryWithObjects:&v1407 forKeys:&v1406 count:1];
  v1453[22] = v374;
  v1452[23] = @"PurgeAcceptedRemoveDownloaded";
  v1404 = v2;
  v1405 = @"RemoveAllReplyPurged";
  v373 = [NSDictionary dictionaryWithObjects:&v1405 forKeys:&v1404 count:1];
  v1453[23] = v373;
  v1452[24] = @"PurgeAcceptedRemoveAll";
  v1402 = v2;
  v1403 = @"RemoveAllReplyPurged";
  v372 = [NSDictionary dictionaryWithObjects:&v1403 forKeys:&v1402 count:1];
  v1453[24] = v372;
  v1452[25] = @"PurgeEraseAcceptedRemoveAll";
  v1400[0] = v3;
  v1400[1] = v2;
  v1401[0] = @"NothingAvailable";
  v1401[1] = @"RemoveAllReplyErased";
  v371 = [NSDictionary dictionaryWithObjects:v1401 forKeys:v1400 count:2];
  v1453[25] = v371;
  v370 = [NSDictionary dictionaryWithObjects:v1453 forKeys:v1452 count:26];
  v2013[12] = v370;
  v2012[13] = @"AllAvailableContent";
  v1398[0] = @"ControlForceUnstage";
  v1396[0] = v3;
  v1396[1] = v2;
  v1397[0] = @"NothingAvailable";
  v1397[1] = @"RemoveAllReplyPurged";
  v369 = [NSDictionary dictionaryWithObjects:v1397 forKeys:v1396 count:2];
  v1399[0] = v369;
  v1398[1] = @"ControlEliminateAssetSelector";
  v1394 = v2;
  v1395 = @"EliminateAvailableDecideEmpty";
  v368 = [NSDictionary dictionaryWithObjects:&v1395 forKeys:&v1394 count:1];
  v1399[1] = v368;
  v1398[2] = @"ControlEliminateSetIdentifier";
  v1392 = v2;
  v1393 = @"SetEliminateAvailableDecideEmpty";
  v367 = [NSDictionary dictionaryWithObjects:&v1393 forKeys:&v1392 count:1];
  v1399[2] = v367;
  v1398[3] = @"ControlAlteredSetConfiguration";
  v1390 = v2;
  v1391 = @"AlteredInvalAllAvailable";
  v366 = [NSDictionary dictionaryWithObjects:&v1391 forKeys:&v1390 count:1];
  v1399[3] = v366;
  v1398[4] = @"ControlSetTargetsSpecified";
  v1388 = v2;
  v1389 = @"SetTargetInvalAllAvailable";
  v365 = [NSDictionary dictionaryWithObjects:&v1389 forKeys:&v1388 count:1];
  v1399[4] = v365;
  v1398[5] = @"ClientDetermineGroupsAvailable";
  v1386 = v2;
  v1387 = @"ClientNewerReplyEmptyDetermine";
  v364 = [NSDictionary dictionaryWithObjects:&v1387 forKeys:&v1386 count:1];
  v1399[5] = v364;
  v1398[6] = @"ClientDetermineAllAvailable";
  v1384[0] = v3;
  v1384[1] = v2;
  v1385[0] = @"AllRequestingDownloaded";
  v1385[1] = @"ClientRequestAlreadyDownloaded";
  v363 = [NSDictionary dictionaryWithObjects:v1385 forKeys:v1384 count:2];
  v1399[6] = v363;
  v1398[7] = @"ClientDownloadAlreadyStaged";
  v1382 = v2;
  v1383 = @"ClientNothingStaged";
  v362 = [NSDictionary dictionaryWithObjects:&v1383 forKeys:&v1382 count:1];
  v1399[7] = v362;
  v1398[8] = @"ClientDownloadGroupsAvailable";
  v1380 = v2;
  v1381 = @"ClientNewerReplyEmptyDownload";
  v361 = [NSDictionary dictionaryWithObjects:&v1381 forKeys:&v1380 count:1];
  v1399[8] = v361;
  v1398[9] = @"ClientDownloadAllAvailable";
  v1378[0] = v3;
  v1378[1] = v2;
  v1379[0] = @"AllDownloading";
  v1379[1] = @"ClientAcceptNextAvailableBeginDownload";
  v360 = [NSDictionary dictionaryWithObjects:v1379 forKeys:v1378 count:2];
  v1399[9] = v360;
  v1398[10] = @"ClientCancelCompletion";
  v1376 = v2;
  v1377 = @"ClientCancelDesireForCompletion";
  v359 = [NSDictionary dictionaryWithObjects:&v1377 forKeys:&v1376 count:1];
  v1399[10] = v359;
  v1398[11] = @"ClientPurgeAll";
  v1374[0] = v3;
  v1374[1] = v2;
  v1375[0] = @"NothingAvailable";
  v1375[1] = @"ClientAcceptRemoveAllReplyPurged";
  v358 = [NSDictionary dictionaryWithObjects:v1375 forKeys:v1374 count:2];
  v1399[11] = v358;
  v1398[12] = @"ClientEraseAll";
  v1372[0] = v3;
  v1372[1] = v2;
  v1373[0] = @"NothingAvailable";
  v1373[1] = @"ClientAcceptRemoveAllReplyErased";
  v357 = [NSDictionary dictionaryWithObjects:v1373 forKeys:v1372 count:2];
  v1399[12] = v357;
  v1398[13] = @"TimerFiredDetermining";
  v1370 = v2;
  v1371 = v4;
  v356 = [NSDictionary dictionaryWithObjects:&v1371 forKeys:&v1370 count:1];
  v1399[13] = v356;
  v1398[14] = @"EliminateNowEmpty";
  v1368 = v3;
  v1369 = @"NothingAvailable";
  v355 = [NSDictionary dictionaryWithObjects:&v1369 forKeys:&v1368 count:1];
  v1399[14] = v355;
  v354 = [NSDictionary dictionaryWithObjects:v1399 forKeys:v1398 count:15];
  v2013[13] = v354;
  v2012[14] = @"RequiredDownloading";
  v1366[0] = @"ControlForceUnstage";
  v1364 = v2;
  v1365 = @"ControlUnstagedDecideCancelJob";
  v353 = [NSDictionary dictionaryWithObjects:&v1365 forKeys:&v1364 count:1];
  v1367[0] = v353;
  v1366[1] = @"ControlEliminateAssetSelector";
  v1362 = v2;
  v1363 = @"EliminateDecideMatch";
  v352 = [NSDictionary dictionaryWithObjects:&v1363 forKeys:&v1362 count:1];
  v1367[1] = v352;
  v1366[2] = @"ControlEliminateSetIdentifier";
  v1360 = v2;
  v1361 = @"SetEliminateDecideMatch";
  v351 = [NSDictionary dictionaryWithObjects:&v1361 forKeys:&v1360 count:1];
  v1367[2] = v351;
  v1366[3] = @"ControlAlteredSetConfiguration";
  v1358 = v2;
  v1359 = v4;
  v350 = [NSDictionary dictionaryWithObjects:&v1359 forKeys:&v1358 count:1];
  v1367[3] = v350;
  v1366[4] = @"ControlSetTargetsSpecified";
  v1356 = v2;
  v1357 = v4;
  v349 = [NSDictionary dictionaryWithObjects:&v1357 forKeys:&v1356 count:1];
  v1367[4] = v349;
  v1366[5] = @"ClientDetermineGroupsAvailable";
  v1354 = v2;
  v1355 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v348 = [NSDictionary dictionaryWithObjects:&v1355 forKeys:&v1354 count:1];
  v1367[5] = v348;
  v1366[6] = @"ClientDetermineAllAvailable";
  v1352 = v2;
  v1353 = @"ClientInvalidStagingPhase";
  v347 = [NSDictionary dictionaryWithObjects:&v1353 forKeys:&v1352 count:1];
  v1367[6] = v347;
  v1366[7] = @"ClientDownloadAlreadyStaged";
  v1350 = v2;
  v1351 = @"ClientNothingStaged";
  v346 = [NSDictionary dictionaryWithObjects:&v1351 forKeys:&v1350 count:1];
  v1367[7] = v346;
  v1366[8] = @"ClientDownloadGroupsAvailable";
  v1348 = v2;
  v1349 = @"ClientNewerReplySameOrEmptyDownload";
  v345 = [NSDictionary dictionaryWithObjects:&v1349 forKeys:&v1348 count:1];
  v1367[8] = v345;
  v1366[9] = @"ClientDownloadAllAvailable";
  v1346 = v2;
  v1347 = @"ClientFailWrongMode";
  v344 = [NSDictionary dictionaryWithObjects:&v1347 forKeys:&v1346 count:1];
  v1367[9] = v344;
  v1366[10] = @"ClientCancelCompletion";
  v1344 = v2;
  v1345 = @"ClientCancelDesireForCompletion";
  v343 = [NSDictionary dictionaryWithObjects:&v1345 forKeys:&v1344 count:1];
  v1367[10] = v343;
  v1366[11] = @"ClientPurgeAll";
  v1342 = v2;
  v1343 = @"ClientPurgeDecideStagingClient";
  v342 = [NSDictionary dictionaryWithObjects:&v1343 forKeys:&v1342 count:1];
  v1367[11] = v342;
  v1366[12] = @"ClientEraseAll";
  v1340 = v2;
  v1341 = @"ClientEraseDecideStagingClient";
  v341 = [NSDictionary dictionaryWithObjects:&v1341 forKeys:&v1340 count:1];
  v1367[12] = v341;
  v1366[13] = @"JobFailedToStart";
  v1338[0] = v3;
  v1338[1] = v2;
  v1339[0] = @"GroupsAvailableContent";
  v1339[1] = @"ReplyFailRequiredDownload";
  v340 = [NSDictionary dictionaryWithObjects:v1339 forKeys:v1338 count:2];
  v1367[13] = v340;
  v1366[14] = @"JobDownloadForStagingProgress";
  v1336 = v2;
  v1337 = @"ReportStagingProgressToClient";
  v339 = [NSDictionary dictionaryWithObjects:&v1337 forKeys:&v1336 count:1];
  v1367[14] = v339;
  v1366[15] = @"JobDownloadForStagingSuccess";
  v1334 = v2;
  v1335 = @"AddToStaged";
  v338 = [NSDictionary dictionaryWithObjects:&v1335 forKeys:&v1334 count:1];
  v1367[15] = v338;
  v1366[16] = @"JobDownloadForStagingFailure";
  v1332 = v2;
  v1333 = @"DecideRequiredErrorBlocksOTA";
  v337 = [NSDictionary dictionaryWithObjects:&v1333 forKeys:&v1332 count:1];
  v1367[16] = v337;
  v1366[17] = @"TimerFiredDetermining";
  v1330 = v2;
  v1331 = v4;
  v336 = [NSDictionary dictionaryWithObjects:&v1331 forKeys:&v1330 count:1];
  v1367[17] = v336;
  v1366[18] = @"RequiredErrorNonFatal";
  v1328 = v2;
  v1329 = @"DecideMoreRequiredAvailable";
  v335 = [NSDictionary dictionaryWithObjects:&v1329 forKeys:&v1328 count:1];
  v1367[18] = v335;
  v1366[19] = @"RequiredErrorBlocksOTA";
  v1326[0] = v3;
  v1326[1] = v2;
  v1327[0] = @"GroupsAvailableContent";
  v1327[1] = @"ReplyFailRequiredDownload";
  v334 = [NSDictionary dictionaryWithObjects:v1327 forKeys:v1326 count:2];
  v1367[19] = v334;
  v1366[20] = @"DownloadMoreAvailable";
  v1324 = v2;
  v1325 = @"NextAwaitingBeginDownload";
  v333 = [NSDictionary dictionaryWithObjects:&v1325 forKeys:&v1324 count:1];
  v1367[20] = v333;
  v1366[21] = @"DownloadDecideMoreAvailable";
  v1322 = v2;
  v1323 = @"DecideMoreRequiredAvailable";
  v332 = [NSDictionary dictionaryWithObjects:&v1323 forKeys:&v1322 count:1];
  v1367[21] = v332;
  v1366[22] = @"DownloadOptionalAvailable";
  v1320[0] = v3;
  v1320[1] = v2;
  v1321[0] = @"OptionalDownloading";
  v1321[1] = @"NextAwaitingBeginDownload";
  v331 = [NSDictionary dictionaryWithObjects:v1321 forKeys:v1320 count:2];
  v1367[22] = v331;
  v1366[23] = @"DownloadDoneAvailable";
  v1318 = v2;
  v1319 = @"DoneAvailableDecideAnyStaged";
  v330 = [NSDictionary dictionaryWithObjects:&v1319 forKeys:&v1318 count:1];
  v1367[23] = v330;
  v1366[24] = @"DownloadNothingStaged";
  v1316[0] = v3;
  v1316[1] = v2;
  v1317[0] = @"GroupsAvailableContent";
  v1317[1] = @"ReplyNothingStaged";
  v329 = [NSDictionary dictionaryWithObjects:v1317 forKeys:v1316 count:2];
  v1367[24] = v329;
  v1366[25] = @"DownloadNothingStagedEmpty";
  v1314[0] = v3;
  v1314[1] = v2;
  v1315[0] = @"GroupsAvailableContent";
  v1315[1] = @"ReplyNothingStagedPurgeAll";
  v328 = [NSDictionary dictionaryWithObjects:v1315 forKeys:v1314 count:2];
  v1367[25] = v328;
  v1366[26] = @"DownloadHaveStaged";
  v1312[0] = v3;
  v1312[1] = v2;
  v1313[0] = @"StagedContent";
  v1313[1] = @"ReplyHaveStaged";
  v327 = [NSDictionary dictionaryWithObjects:v1313 forKeys:v1312 count:2];
  v1367[26] = v327;
  v1366[27] = @"UnstagedFromControlCancelJob";
  v1310[0] = v3;
  v1310[1] = v2;
  v1311[0] = @"CancelingDownload";
  v1311[1] = @"CancelActiveJob";
  v326 = [NSDictionary dictionaryWithObjects:v1311 forKeys:v1310 count:2];
  v1367[27] = v326;
  v1366[28] = @"EliminateCurrentJob";
  v1308[0] = v3;
  v1308[1] = v2;
  v1309[0] = @"RequiredDownloadEliminating";
  v1309[1] = @"EliminateCancelActiveJob";
  v325 = [NSDictionary dictionaryWithObjects:v1309 forKeys:v1308 count:2];
  v1367[28] = v325;
  v1366[29] = @"PurgeAcceptedRemoveDownloaded";
  v1306[0] = v3;
  v1306[1] = v2;
  v1307[0] = @"CancelingDownload";
  v1307[1] = @"CancelActiveJob";
  v324 = [NSDictionary dictionaryWithObjects:v1307 forKeys:v1306 count:2];
  v1367[29] = v324;
  v1366[30] = @"PurgeAcceptedRemoveAll";
  v1304[0] = v3;
  v1304[1] = v2;
  v1305[0] = @"CancelingDownload";
  v1305[1] = @"CancelActiveJob";
  v323 = [NSDictionary dictionaryWithObjects:v1305 forKeys:v1304 count:2];
  v1367[30] = v323;
  v1366[31] = @"PurgeEraseAcceptedRemoveAll";
  v1302[0] = v3;
  v1302[1] = v2;
  v1303[0] = @"ErasingDownload";
  v1303[1] = @"CancelActiveJob";
  v322 = [NSDictionary dictionaryWithObjects:v1303 forKeys:v1302 count:2];
  v1367[31] = v322;
  v321 = [NSDictionary dictionaryWithObjects:v1367 forKeys:v1366 count:32];
  v2013[14] = v321;
  v2012[15] = @"OptionalDownloading";
  v1300[0] = @"ControlForceUnstage";
  v1298 = v2;
  v1299 = @"ControlUnstagedDecideCancelJob";
  v320 = [NSDictionary dictionaryWithObjects:&v1299 forKeys:&v1298 count:1];
  v1301[0] = v320;
  v1300[1] = @"ControlEliminateAssetSelector";
  v1296 = v2;
  v1297 = @"EliminateDecideMatch";
  v319 = [NSDictionary dictionaryWithObjects:&v1297 forKeys:&v1296 count:1];
  v1301[1] = v319;
  v1300[2] = @"ControlEliminateSetIdentifier";
  v1294 = v2;
  v1295 = @"SetEliminateDecideMatch";
  v318 = [NSDictionary dictionaryWithObjects:&v1295 forKeys:&v1294 count:1];
  v1301[2] = v318;
  v1300[3] = @"ControlAlteredSetConfiguration";
  v1292 = v2;
  v1293 = v4;
  v317 = [NSDictionary dictionaryWithObjects:&v1293 forKeys:&v1292 count:1];
  v1301[3] = v317;
  v1300[4] = @"ControlSetTargetsSpecified";
  v1290 = v2;
  v1291 = v4;
  v316 = [NSDictionary dictionaryWithObjects:&v1291 forKeys:&v1290 count:1];
  v1301[4] = v316;
  v1300[5] = @"ClientDetermineGroupsAvailable";
  v1288 = v2;
  v1289 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v315 = [NSDictionary dictionaryWithObjects:&v1289 forKeys:&v1288 count:1];
  v1301[5] = v315;
  v1300[6] = @"ClientDetermineAllAvailable";
  v1286 = v2;
  v1287 = @"ClientInvalidStagingPhase";
  v314 = [NSDictionary dictionaryWithObjects:&v1287 forKeys:&v1286 count:1];
  v1301[6] = v314;
  v1300[7] = @"ClientDownloadAlreadyStaged";
  v1284 = v2;
  v1285 = @"ClientNothingStaged";
  v313 = [NSDictionary dictionaryWithObjects:&v1285 forKeys:&v1284 count:1];
  v1301[7] = v313;
  v1300[8] = @"ClientDownloadGroupsAvailable";
  v1282 = v2;
  v1283 = @"ClientNewerReplySameOrEmptyDownload";
  v312 = [NSDictionary dictionaryWithObjects:&v1283 forKeys:&v1282 count:1];
  v1301[8] = v312;
  v1300[9] = @"ClientDownloadAllAvailable";
  v1280 = v2;
  v1281 = @"ClientFailWrongMode";
  v311 = [NSDictionary dictionaryWithObjects:&v1281 forKeys:&v1280 count:1];
  v1301[9] = v311;
  v1300[10] = @"ClientCancelCompletion";
  v1278 = v2;
  v1279 = @"ClientCancelDesireForCompletion";
  v310 = [NSDictionary dictionaryWithObjects:&v1279 forKeys:&v1278 count:1];
  v1301[10] = v310;
  v1300[11] = @"ClientPurgeAll";
  v1276 = v2;
  v1277 = @"ClientPurgeDecideStagingClient";
  v309 = [NSDictionary dictionaryWithObjects:&v1277 forKeys:&v1276 count:1];
  v1301[11] = v309;
  v1300[12] = @"ClientEraseAll";
  v1274 = v2;
  v1275 = @"ClientEraseDecideStagingClient";
  v308 = [NSDictionary dictionaryWithObjects:&v1275 forKeys:&v1274 count:1];
  v1301[12] = v308;
  v1300[13] = @"JobFailedToStart";
  v1272 = v2;
  v1273 = @"DecideMoreOptionalAvailable";
  v307 = [NSDictionary dictionaryWithObjects:&v1273 forKeys:&v1272 count:1];
  v1301[13] = v307;
  v1300[14] = @"JobDownloadForStagingProgress";
  v1270 = v2;
  v1271 = @"ReportStagingProgressToClient";
  v306 = [NSDictionary dictionaryWithObjects:&v1271 forKeys:&v1270 count:1];
  v1301[14] = v306;
  v1300[15] = @"JobDownloadForStagingSuccess";
  v1268 = v2;
  v1269 = @"AddToStaged";
  v305 = [NSDictionary dictionaryWithObjects:&v1269 forKeys:&v1268 count:1];
  v1301[15] = v305;
  v1300[16] = @"JobDownloadForStagingFailure";
  v1266 = v2;
  v1267 = @"DecideMoreOptionalAvailable";
  v304 = [NSDictionary dictionaryWithObjects:&v1267 forKeys:&v1266 count:1];
  v1301[16] = v304;
  v1300[17] = @"TimerFiredDetermining";
  v1264 = v2;
  v1265 = v4;
  v303 = [NSDictionary dictionaryWithObjects:&v1265 forKeys:&v1264 count:1];
  v1301[17] = v303;
  v1300[18] = @"DownloadMoreAvailable";
  v1262 = v2;
  v1263 = @"NextAwaitingBeginDownload";
  v302 = [NSDictionary dictionaryWithObjects:&v1263 forKeys:&v1262 count:1];
  v1301[18] = v302;
  v1300[19] = @"DownloadDecideMoreAvailable";
  v1260 = v2;
  v1261 = @"DecideMoreOptionalAvailable";
  v301 = [NSDictionary dictionaryWithObjects:&v1261 forKeys:&v1260 count:1];
  v1301[19] = v301;
  v1300[20] = @"DownloadDoneAvailable";
  v1258 = v2;
  v1259 = @"DoneAvailableDecideAnyStaged";
  v300 = [NSDictionary dictionaryWithObjects:&v1259 forKeys:&v1258 count:1];
  v1301[20] = v300;
  v1300[21] = @"DownloadNothingStaged";
  v1256[0] = v3;
  v1256[1] = v2;
  v1257[0] = @"GroupsAvailableContent";
  v1257[1] = @"ReplyNothingStaged";
  v299 = [NSDictionary dictionaryWithObjects:v1257 forKeys:v1256 count:2];
  v1301[21] = v299;
  v1300[22] = @"DownloadNothingStagedEmpty";
  v1254[0] = v3;
  v1254[1] = v2;
  v1255[0] = @"GroupsAvailableContent";
  v1255[1] = @"ReplyNothingStagedPurgeAll";
  v298 = [NSDictionary dictionaryWithObjects:v1255 forKeys:v1254 count:2];
  v1301[22] = v298;
  v1300[23] = @"DownloadHaveStaged";
  v1252[0] = v3;
  v1252[1] = v2;
  v1253[0] = @"StagedContent";
  v1253[1] = @"ReplyHaveStaged";
  v297 = [NSDictionary dictionaryWithObjects:v1253 forKeys:v1252 count:2];
  v1301[23] = v297;
  v1300[24] = @"UnstagedFromControlCancelJob";
  v1250[0] = v3;
  v1250[1] = v2;
  v1251[0] = @"CancelingDownload";
  v1251[1] = @"CancelActiveJob";
  v296 = [NSDictionary dictionaryWithObjects:v1251 forKeys:v1250 count:2];
  v1301[24] = v296;
  v1300[25] = @"EliminateCurrentJob";
  v1248[0] = v3;
  v1248[1] = v2;
  v1249[0] = @"OptionalDownloadEliminating";
  v1249[1] = @"EliminateCancelActiveJob";
  v295 = [NSDictionary dictionaryWithObjects:v1249 forKeys:v1248 count:2];
  v1301[25] = v295;
  v1300[26] = @"PurgeAcceptedRemoveDownloaded";
  v1246[0] = v3;
  v1246[1] = v2;
  v1247[0] = @"CancelingDownload";
  v1247[1] = @"CancelActiveJob";
  v294 = [NSDictionary dictionaryWithObjects:v1247 forKeys:v1246 count:2];
  v1301[26] = v294;
  v1300[27] = @"PurgeAcceptedRemoveAll";
  v1244[0] = v3;
  v1244[1] = v2;
  v1245[0] = @"CancelingDownload";
  v1245[1] = @"CancelActiveJob";
  v293 = [NSDictionary dictionaryWithObjects:v1245 forKeys:v1244 count:2];
  v1301[27] = v293;
  v1300[28] = @"PurgeEraseAcceptedRemoveAll";
  v1242[0] = v3;
  v1242[1] = v2;
  v1243[0] = @"ErasingDownload";
  v1243[1] = @"CancelActiveJob";
  v292 = [NSDictionary dictionaryWithObjects:v1243 forKeys:v1242 count:2];
  v1301[28] = v292;
  v291 = [NSDictionary dictionaryWithObjects:v1301 forKeys:v1300 count:29];
  v2013[15] = v291;
  v2012[16] = @"AllDownloading";
  v1240[0] = @"ControlForceUnstage";
  v1238 = v2;
  v1239 = @"ControlUnstagedDecideCancelJob";
  v290 = [NSDictionary dictionaryWithObjects:&v1239 forKeys:&v1238 count:1];
  v1241[0] = v290;
  v1240[1] = @"ControlEliminateAssetSelector";
  v1236 = v2;
  v1237 = @"EliminateDecideMatch";
  v289 = [NSDictionary dictionaryWithObjects:&v1237 forKeys:&v1236 count:1];
  v1241[1] = v289;
  v1240[2] = @"ControlEliminateSetIdentifier";
  v1234 = v2;
  v1235 = @"SetEliminateDecideMatch";
  v288 = [NSDictionary dictionaryWithObjects:&v1235 forKeys:&v1234 count:1];
  v1241[2] = v288;
  v1240[3] = @"ControlAlteredSetConfiguration";
  v1232[0] = v3;
  v1232[1] = v2;
  v1233[0] = @"CancelingDownload";
  v1233[1] = @"AlteredInvalAllAvailableCancelActiveJob";
  v287 = [NSDictionary dictionaryWithObjects:v1233 forKeys:v1232 count:2];
  v1241[3] = v287;
  v1240[4] = @"ControlSetTargetsSpecified";
  v1230[0] = v3;
  v1230[1] = v2;
  v1231[0] = @"CancelingDownload";
  v1231[1] = @"SetTargetInvalAllAvailableCancelActiveJob";
  v286 = [NSDictionary dictionaryWithObjects:v1231 forKeys:v1230 count:2];
  v1241[4] = v286;
  v1240[5] = @"ClientDetermineGroupsAvailable";
  v1228 = v2;
  v1229 = @"ClientNewerReplyEmptyDetermine";
  v285 = [NSDictionary dictionaryWithObjects:&v1229 forKeys:&v1228 count:1];
  v1241[5] = v285;
  v1240[6] = @"ClientDetermineAllAvailable";
  v1226 = v2;
  v1227 = @"ClientInvalidStagingPhase";
  v284 = [NSDictionary dictionaryWithObjects:&v1227 forKeys:&v1226 count:1];
  v1241[6] = v284;
  v1240[7] = @"ClientDownloadAlreadyStaged";
  v1224 = v2;
  v1225 = @"ClientNothingStaged";
  v283 = [NSDictionary dictionaryWithObjects:&v1225 forKeys:&v1224 count:1];
  v1241[7] = v283;
  v1240[8] = @"ClientDownloadGroupsAvailable";
  v1222 = v2;
  v1223 = @"ClientNewerReplySameOrEmptyDownload";
  v282 = [NSDictionary dictionaryWithObjects:&v1223 forKeys:&v1222 count:1];
  v1241[8] = v282;
  v1240[9] = @"ClientDownloadAllAvailable";
  v1220 = v2;
  v1221 = @"ClientFailWrongMode";
  v281 = [NSDictionary dictionaryWithObjects:&v1221 forKeys:&v1220 count:1];
  v1241[9] = v281;
  v1240[10] = @"ClientCancelCompletion";
  v1218 = v2;
  v1219 = @"ClientCancelDesireForCompletion";
  v280 = [NSDictionary dictionaryWithObjects:&v1219 forKeys:&v1218 count:1];
  v1241[10] = v280;
  v1240[11] = @"ClientPurgeAll";
  v1216[0] = v3;
  v1216[1] = v2;
  v1217[0] = @"CancelingDownload";
  v1217[1] = @"ClientAcceptCancelActiveJob";
  v279 = [NSDictionary dictionaryWithObjects:v1217 forKeys:v1216 count:2];
  v1241[11] = v279;
  v1240[12] = @"ClientEraseAll";
  v1214[0] = v3;
  v1214[1] = v2;
  v1215[0] = @"ErasingDownload";
  v1215[1] = @"ClientAcceptEraseActiveJob";
  v278 = [NSDictionary dictionaryWithObjects:v1215 forKeys:v1214 count:2];
  v1241[12] = v278;
  v1240[13] = @"JobFailedToStart";
  v1212 = v2;
  v1213 = @"DecideMoreAvailable";
  v277 = [NSDictionary dictionaryWithObjects:&v1213 forKeys:&v1212 count:1];
  v1241[13] = v277;
  v1240[14] = @"JobDownloadForStagingProgress";
  v1210 = v2;
  v1211 = @"ReportStagingProgressToClient";
  v276 = [NSDictionary dictionaryWithObjects:&v1211 forKeys:&v1210 count:1];
  v1241[14] = v276;
  v1240[15] = @"JobDownloadForStagingSuccess";
  v1208 = v2;
  v1209 = @"AddToStagedDecideMoreAvailable";
  v275 = [NSDictionary dictionaryWithObjects:&v1209 forKeys:&v1208 count:1];
  v1241[15] = v275;
  v1240[16] = @"JobDownloadForStagingFailure";
  v1206 = v2;
  v1207 = @"DecideMoreAvailable";
  v274 = [NSDictionary dictionaryWithObjects:&v1207 forKeys:&v1206 count:1];
  v1241[16] = v274;
  v1240[17] = @"TimerFiredDetermining";
  v1204 = v2;
  v1205 = v4;
  v273 = [NSDictionary dictionaryWithObjects:&v1205 forKeys:&v1204 count:1];
  v1241[17] = v273;
  v1240[18] = @"DownloadMoreAvailable";
  v1202 = v2;
  v1203 = @"NextAwaitingBeginDownload";
  v272 = [NSDictionary dictionaryWithObjects:&v1203 forKeys:&v1202 count:1];
  v1241[18] = v272;
  v1240[19] = @"DownloadDoneAvailable";
  v1200 = v2;
  v1201 = @"DoneAvailableDecideAnyStaged";
  v271 = [NSDictionary dictionaryWithObjects:&v1201 forKeys:&v1200 count:1];
  v1241[19] = v271;
  v1240[20] = @"DownloadNothingStaged";
  v1198[0] = v3;
  v1198[1] = v2;
  v1199[0] = @"AllAvailableContent";
  v1199[1] = @"ReplyNothingStaged";
  v270 = [NSDictionary dictionaryWithObjects:v1199 forKeys:v1198 count:2];
  v1241[20] = v270;
  v1240[21] = @"DownloadNothingStagedEmpty";
  v1196[0] = v3;
  v1196[1] = v2;
  v1197[0] = @"NothingAvailable";
  v1197[1] = @"ReplyNothingStagedPurgeAll";
  v269 = [NSDictionary dictionaryWithObjects:v1197 forKeys:v1196 count:2];
  v1241[21] = v269;
  v1240[22] = @"DownloadHaveStaged";
  v1194[0] = v3;
  v1194[1] = v2;
  v1195[0] = @"StagedContent";
  v1195[1] = @"ReplyHaveStaged";
  v268 = [NSDictionary dictionaryWithObjects:v1195 forKeys:v1194 count:2];
  v1241[22] = v268;
  v1240[23] = @"UnstagedFromControlCancelJob";
  v1192[0] = v3;
  v1192[1] = v2;
  v1193[0] = @"CancelingDownload";
  v1193[1] = @"CancelActiveJob";
  v267 = [NSDictionary dictionaryWithObjects:v1193 forKeys:v1192 count:2];
  v1241[23] = v267;
  v1240[24] = @"EliminateCurrentJob";
  v1190[0] = v3;
  v1190[1] = v2;
  v1191[0] = @"AllDownloadEliminating";
  v1191[1] = @"EliminateCancelActiveJob";
  v266 = [NSDictionary dictionaryWithObjects:v1191 forKeys:v1190 count:2];
  v1241[24] = v266;
  v265 = [NSDictionary dictionaryWithObjects:v1241 forKeys:v1240 count:25];
  v2013[16] = v265;
  v2012[17] = @"RequiredDownloadEliminating";
  v1188[0] = @"ControlForceUnstage";
  v1186 = v2;
  v1187 = @"ControlUnstagedDecideCancelJob";
  v264 = [NSDictionary dictionaryWithObjects:&v1187 forKeys:&v1186 count:1];
  v1189[0] = v264;
  v1188[1] = @"ControlEliminateAssetSelector";
  v1184 = v2;
  v1185 = @"EliminateDecideMatch";
  v263 = [NSDictionary dictionaryWithObjects:&v1185 forKeys:&v1184 count:1];
  v1189[1] = v263;
  v1188[2] = @"ControlEliminateSetIdentifier";
  v1182 = v2;
  v1183 = @"SetEliminateDecideMatch";
  v262 = [NSDictionary dictionaryWithObjects:&v1183 forKeys:&v1182 count:1];
  v1189[2] = v262;
  v1188[3] = @"ControlAlteredSetConfiguration";
  v1180 = v2;
  v1181 = v4;
  v261 = [NSDictionary dictionaryWithObjects:&v1181 forKeys:&v1180 count:1];
  v1189[3] = v261;
  v1188[4] = @"ControlSetTargetsSpecified";
  v1178 = v2;
  v1179 = v4;
  v260 = [NSDictionary dictionaryWithObjects:&v1179 forKeys:&v1178 count:1];
  v1189[4] = v260;
  v1188[5] = @"ClientDetermineGroupsAvailable";
  v1176 = v2;
  v1177 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v259 = [NSDictionary dictionaryWithObjects:&v1177 forKeys:&v1176 count:1];
  v1189[5] = v259;
  v1188[6] = @"ClientDetermineAllAvailable";
  v1174 = v2;
  v1175 = @"ClientInvalidStagingPhase";
  v258 = [NSDictionary dictionaryWithObjects:&v1175 forKeys:&v1174 count:1];
  v1189[6] = v258;
  v1188[7] = @"ClientDownloadAlreadyStaged";
  v1172 = v2;
  v1173 = @"ClientNothingStaged";
  v257 = [NSDictionary dictionaryWithObjects:&v1173 forKeys:&v1172 count:1];
  v1189[7] = v257;
  v1188[8] = @"ClientDownloadGroupsAvailable";
  v1170 = v2;
  v1171 = @"ClientNewerReplySameOrEmptyDownload";
  v256 = [NSDictionary dictionaryWithObjects:&v1171 forKeys:&v1170 count:1];
  v1189[8] = v256;
  v1188[9] = @"ClientDownloadAllAvailable";
  v1168 = v2;
  v1169 = @"ClientFailWrongMode";
  v255 = [NSDictionary dictionaryWithObjects:&v1169 forKeys:&v1168 count:1];
  v1189[9] = v255;
  v1188[10] = @"ClientCancelCompletion";
  v1166 = v2;
  v1167 = @"ClientCancelDesireForCompletion";
  v254 = [NSDictionary dictionaryWithObjects:&v1167 forKeys:&v1166 count:1];
  v1189[10] = v254;
  v1188[11] = @"ClientPurgeAll";
  v1164 = v2;
  v1165 = @"ClientPurgeDecideStagingClient";
  v253 = [NSDictionary dictionaryWithObjects:&v1165 forKeys:&v1164 count:1];
  v1189[11] = v253;
  v1188[12] = @"ClientEraseAll";
  v1162 = v2;
  v1163 = @"ClientEraseDecideStagingClient";
  v252 = [NSDictionary dictionaryWithObjects:&v1163 forKeys:&v1162 count:1];
  v1189[12] = v252;
  v1188[13] = @"JobFailedToStart";
  v1160 = v2;
  v1161 = @"EliminateDoneDecideMoreDownload";
  v251 = [NSDictionary dictionaryWithObjects:&v1161 forKeys:&v1160 count:1];
  v1189[13] = v251;
  v1188[14] = @"JobDownloadForStagingProgress";
  v1158 = v2;
  v1159 = v4;
  v250 = [NSDictionary dictionaryWithObjects:&v1159 forKeys:&v1158 count:1];
  v1189[14] = v250;
  v1188[15] = @"JobDownloadForStagingSuccess";
  v1156 = v2;
  v1157 = @"EliminateDoneDecideMoreDownload";
  v249 = [NSDictionary dictionaryWithObjects:&v1157 forKeys:&v1156 count:1];
  v1189[15] = v249;
  v1188[16] = @"JobDownloadForStagingFailure";
  v1154 = v2;
  v1155 = @"EliminateDoneDecideMoreDownload";
  v248 = [NSDictionary dictionaryWithObjects:&v1155 forKeys:&v1154 count:1];
  v1189[16] = v248;
  v1188[17] = @"TimerFiredDetermining";
  v1152 = v2;
  v1153 = v4;
  v247 = [NSDictionary dictionaryWithObjects:&v1153 forKeys:&v1152 count:1];
  v1189[17] = v247;
  v1188[18] = @"DownloadMoreAvailable";
  v1150[0] = v3;
  v1150[1] = v2;
  v1151[0] = @"RequiredDownloading";
  v1151[1] = @"NextAwaitingBeginDownload";
  v246 = [NSDictionary dictionaryWithObjects:v1151 forKeys:v1150 count:2];
  v1189[18] = v246;
  v1188[19] = @"DownloadDoneAvailable";
  v1148 = v2;
  v1149 = @"DoneAvailableDecideAnyStaged";
  v245 = [NSDictionary dictionaryWithObjects:&v1149 forKeys:&v1148 count:1];
  v1189[19] = v245;
  v1188[20] = @"DownloadNothingStaged";
  v1146[0] = v3;
  v1146[1] = v2;
  v1147[0] = @"GroupsAvailableContent";
  v1147[1] = @"ReplyNothingStaged";
  v244 = [NSDictionary dictionaryWithObjects:v1147 forKeys:v1146 count:2];
  v1189[20] = v244;
  v1188[21] = @"DownloadNothingStagedEmpty";
  v1144[0] = v3;
  v1144[1] = v2;
  v1145[0] = @"GroupsAvailableContent";
  v1145[1] = @"ReplyNothingStagedPurgeAll";
  v243 = [NSDictionary dictionaryWithObjects:v1145 forKeys:v1144 count:2];
  v1189[21] = v243;
  v1188[22] = @"DownloadHaveStaged";
  v1142[0] = v3;
  v1142[1] = v2;
  v1143[0] = @"StagedContent";
  v1143[1] = @"ReplyHaveStaged";
  v242 = [NSDictionary dictionaryWithObjects:v1143 forKeys:v1142 count:2];
  v1189[22] = v242;
  v1188[23] = @"UnstagedFromControlCancelJob";
  v1140[0] = v3;
  v1140[1] = v2;
  v1141[0] = @"CancelingDownload";
  v1141[1] = @"CancelActiveJob";
  v241 = [NSDictionary dictionaryWithObjects:v1141 forKeys:v1140 count:2];
  v1189[23] = v241;
  v1188[24] = @"EliminateCurrentJob";
  v1138 = v2;
  v1139 = v4;
  v240 = [NSDictionary dictionaryWithObjects:&v1139 forKeys:&v1138 count:1];
  v1189[24] = v240;
  v1188[25] = @"PurgeAcceptedRemoveDownloaded";
  v1136 = v3;
  v1137 = @"CancelingDownload";
  v239 = [NSDictionary dictionaryWithObjects:&v1137 forKeys:&v1136 count:1];
  v1189[25] = v239;
  v1188[26] = @"PurgeAcceptedRemoveAll";
  v1134 = v3;
  v1135 = @"CancelingDownload";
  v238 = [NSDictionary dictionaryWithObjects:&v1135 forKeys:&v1134 count:1];
  v1189[26] = v238;
  v1188[27] = @"PurgeEraseAcceptedRemoveAll";
  v1132 = v3;
  v1133 = @"ErasingDownload";
  v237 = [NSDictionary dictionaryWithObjects:&v1133 forKeys:&v1132 count:1];
  v1189[27] = v237;
  v236 = [NSDictionary dictionaryWithObjects:v1189 forKeys:v1188 count:28];
  v2013[17] = v236;
  v2012[18] = @"OptionalDownloadEliminating";
  v1130[0] = @"ControlForceUnstage";
  v1128 = v2;
  v1129 = @"ControlUnstagedDecideCancelJob";
  v235 = [NSDictionary dictionaryWithObjects:&v1129 forKeys:&v1128 count:1];
  v1131[0] = v235;
  v1130[1] = @"ControlEliminateAssetSelector";
  v1126 = v2;
  v1127 = @"EliminateDecideMatch";
  v234 = [NSDictionary dictionaryWithObjects:&v1127 forKeys:&v1126 count:1];
  v1131[1] = v234;
  v1130[2] = @"ControlEliminateSetIdentifier";
  v1124 = v2;
  v1125 = @"SetEliminateDecideMatch";
  v233 = [NSDictionary dictionaryWithObjects:&v1125 forKeys:&v1124 count:1];
  v1131[2] = v233;
  v1130[3] = @"ControlAlteredSetConfiguration";
  v1122 = v2;
  v1123 = v4;
  v232 = [NSDictionary dictionaryWithObjects:&v1123 forKeys:&v1122 count:1];
  v1131[3] = v232;
  v1130[4] = @"ControlSetTargetsSpecified";
  v1120 = v2;
  v1121 = v4;
  v231 = [NSDictionary dictionaryWithObjects:&v1121 forKeys:&v1120 count:1];
  v1131[4] = v231;
  v1130[5] = @"ClientDetermineGroupsAvailable";
  v1118 = v2;
  v1119 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v230 = [NSDictionary dictionaryWithObjects:&v1119 forKeys:&v1118 count:1];
  v1131[5] = v230;
  v1130[6] = @"ClientDetermineAllAvailable";
  v1116 = v2;
  v1117 = @"ClientInvalidStagingPhase";
  v229 = [NSDictionary dictionaryWithObjects:&v1117 forKeys:&v1116 count:1];
  v1131[6] = v229;
  v1130[7] = @"ClientDownloadAlreadyStaged";
  v1114 = v2;
  v1115 = @"ClientNothingStaged";
  v228 = [NSDictionary dictionaryWithObjects:&v1115 forKeys:&v1114 count:1];
  v1131[7] = v228;
  v1130[8] = @"ClientDownloadGroupsAvailable";
  v1112 = v2;
  v1113 = @"ClientNewerReplySameOrEmptyDownload";
  v227 = [NSDictionary dictionaryWithObjects:&v1113 forKeys:&v1112 count:1];
  v1131[8] = v227;
  v1130[9] = @"ClientDownloadAllAvailable";
  v1110 = v2;
  v1111 = @"ClientFailWrongMode";
  v226 = [NSDictionary dictionaryWithObjects:&v1111 forKeys:&v1110 count:1];
  v1131[9] = v226;
  v1130[10] = @"ClientCancelCompletion";
  v1108 = v2;
  v1109 = @"ClientCancelDesireForCompletion";
  v225 = [NSDictionary dictionaryWithObjects:&v1109 forKeys:&v1108 count:1];
  v1131[10] = v225;
  v1130[11] = @"ClientPurgeAll";
  v1106 = v2;
  v1107 = @"ClientPurgeDecideStagingClient";
  v224 = [NSDictionary dictionaryWithObjects:&v1107 forKeys:&v1106 count:1];
  v1131[11] = v224;
  v1130[12] = @"ClientEraseAll";
  v1104 = v2;
  v1105 = @"ClientEraseDecideStagingClient";
  v223 = [NSDictionary dictionaryWithObjects:&v1105 forKeys:&v1104 count:1];
  v1131[12] = v223;
  v1130[13] = @"JobFailedToStart";
  v1102 = v2;
  v1103 = @"EliminateDoneDecideMoreDownload";
  v222 = [NSDictionary dictionaryWithObjects:&v1103 forKeys:&v1102 count:1];
  v1131[13] = v222;
  v1130[14] = @"JobDownloadForStagingProgress";
  v1100 = v2;
  v1101 = v4;
  v221 = [NSDictionary dictionaryWithObjects:&v1101 forKeys:&v1100 count:1];
  v1131[14] = v221;
  v1130[15] = @"JobDownloadForStagingSuccess";
  v1098 = v2;
  v1099 = @"EliminateDoneDecideMoreDownload";
  v220 = [NSDictionary dictionaryWithObjects:&v1099 forKeys:&v1098 count:1];
  v1131[15] = v220;
  v1130[16] = @"JobDownloadForStagingFailure";
  v1096 = v2;
  v1097 = @"EliminateDoneDecideMoreDownload";
  v219 = [NSDictionary dictionaryWithObjects:&v1097 forKeys:&v1096 count:1];
  v1131[16] = v219;
  v1130[17] = @"TimerFiredDetermining";
  v1094 = v2;
  v1095 = v4;
  v218 = [NSDictionary dictionaryWithObjects:&v1095 forKeys:&v1094 count:1];
  v1131[17] = v218;
  v1130[18] = @"DownloadMoreAvailable";
  v1092[0] = v3;
  v1092[1] = v2;
  v1093[0] = @"OptionalDownloading";
  v1093[1] = @"NextAwaitingBeginDownload";
  v217 = [NSDictionary dictionaryWithObjects:v1093 forKeys:v1092 count:2];
  v1131[18] = v217;
  v1130[19] = @"DownloadDoneAvailable";
  v1090 = v2;
  v1091 = @"DoneAvailableDecideAnyStaged";
  v216 = [NSDictionary dictionaryWithObjects:&v1091 forKeys:&v1090 count:1];
  v1131[19] = v216;
  v1130[20] = @"DownloadNothingStaged";
  v1088[0] = v3;
  v1088[1] = v2;
  v1089[0] = @"GroupsAvailableContent";
  v1089[1] = @"ReplyNothingStaged";
  v215 = [NSDictionary dictionaryWithObjects:v1089 forKeys:v1088 count:2];
  v1131[20] = v215;
  v1130[21] = @"DownloadNothingStagedEmpty";
  v1086[0] = v3;
  v1086[1] = v2;
  v1087[0] = @"GroupsAvailableContent";
  v1087[1] = @"ReplyNothingStagedPurgeAll";
  v214 = [NSDictionary dictionaryWithObjects:v1087 forKeys:v1086 count:2];
  v1131[21] = v214;
  v1130[22] = @"DownloadHaveStaged";
  v1084[0] = v3;
  v1084[1] = v2;
  v1085[0] = @"StagedContent";
  v1085[1] = @"ReplyHaveStaged";
  v213 = [NSDictionary dictionaryWithObjects:v1085 forKeys:v1084 count:2];
  v1131[22] = v213;
  v1130[23] = @"UnstagedFromControlCancelJob";
  v1082[0] = v3;
  v1082[1] = v2;
  v1083[0] = @"CancelingDownload";
  v1083[1] = @"CancelActiveJob";
  v212 = [NSDictionary dictionaryWithObjects:v1083 forKeys:v1082 count:2];
  v1131[23] = v212;
  v1130[24] = @"EliminateCurrentJob";
  v1080 = v2;
  v1081 = v4;
  v211 = [NSDictionary dictionaryWithObjects:&v1081 forKeys:&v1080 count:1];
  v1131[24] = v211;
  v1130[25] = @"PurgeAcceptedRemoveDownloaded";
  v1078 = v3;
  v1079 = @"CancelingDownload";
  v210 = [NSDictionary dictionaryWithObjects:&v1079 forKeys:&v1078 count:1];
  v1131[25] = v210;
  v1130[26] = @"PurgeAcceptedRemoveAll";
  v1076 = v3;
  v1077 = @"CancelingDownload";
  v209 = [NSDictionary dictionaryWithObjects:&v1077 forKeys:&v1076 count:1];
  v1131[26] = v209;
  v1130[27] = @"PurgeEraseAcceptedRemoveAll";
  v1074 = v3;
  v1075 = @"ErasingDownload";
  v208 = [NSDictionary dictionaryWithObjects:&v1075 forKeys:&v1074 count:1];
  v1131[27] = v208;
  v207 = [NSDictionary dictionaryWithObjects:v1131 forKeys:v1130 count:28];
  v2013[18] = v207;
  v2012[19] = @"AllDownloadEliminating";
  v1072[0] = @"ControlForceUnstage";
  v1070 = v2;
  v1071 = @"ControlUnstagedDecideCancelJob";
  v206 = [NSDictionary dictionaryWithObjects:&v1071 forKeys:&v1070 count:1];
  v1073[0] = v206;
  v1072[1] = @"ControlEliminateAssetSelector";
  v1068 = v2;
  v1069 = @"EliminateDecideMatch";
  v205 = [NSDictionary dictionaryWithObjects:&v1069 forKeys:&v1068 count:1];
  v1073[1] = v205;
  v1072[2] = @"ControlEliminateSetIdentifier";
  v1066 = v2;
  v1067 = @"SetEliminateDecideMatch";
  v204 = [NSDictionary dictionaryWithObjects:&v1067 forKeys:&v1066 count:1];
  v1073[2] = v204;
  v1072[3] = @"ControlAlteredSetConfiguration";
  v1064 = v2;
  v1065 = @"AlteredInvalAllAvailableCancelActiveJob";
  v203 = [NSDictionary dictionaryWithObjects:&v1065 forKeys:&v1064 count:1];
  v1073[3] = v203;
  v1072[4] = @"ControlSetTargetsSpecified";
  v1062 = v2;
  v1063 = @"SetTargetInvalAllAvailableCancelActiveJob";
  v202 = [NSDictionary dictionaryWithObjects:&v1063 forKeys:&v1062 count:1];
  v1073[4] = v202;
  v1072[5] = @"ClientDetermineGroupsAvailable";
  v1060 = v2;
  v1061 = @"ClientNewerReplyEmptyDetermine";
  v201 = [NSDictionary dictionaryWithObjects:&v1061 forKeys:&v1060 count:1];
  v1073[5] = v201;
  v1072[6] = @"ClientDetermineAllAvailable";
  v1058 = v2;
  v1059 = @"ClientInvalidStagingPhase";
  v200 = [NSDictionary dictionaryWithObjects:&v1059 forKeys:&v1058 count:1];
  v1073[6] = v200;
  v1072[7] = @"ClientDownloadAlreadyStaged";
  v1056 = v2;
  v1057 = @"ClientNothingStaged";
  v199 = [NSDictionary dictionaryWithObjects:&v1057 forKeys:&v1056 count:1];
  v1073[7] = v199;
  v1072[8] = @"ClientDownloadGroupsAvailable";
  v1054 = v2;
  v1055 = @"ClientNewerReplySameOrEmptyDownload";
  v198 = [NSDictionary dictionaryWithObjects:&v1055 forKeys:&v1054 count:1];
  v1073[8] = v198;
  v1072[9] = @"ClientDownloadAllAvailable";
  v1052 = v2;
  v1053 = @"ClientContinueUsingLatestRequest";
  v197 = [NSDictionary dictionaryWithObjects:&v1053 forKeys:&v1052 count:1];
  v1073[9] = v197;
  v1072[10] = @"ClientCancelCompletion";
  v1050 = v2;
  v1051 = @"ClientCancelDesireForCompletion";
  v196 = [NSDictionary dictionaryWithObjects:&v1051 forKeys:&v1050 count:1];
  v1073[10] = v196;
  v1072[11] = @"ClientPurgeAll";
  v1048[0] = v3;
  v1048[1] = v2;
  v1049[0] = @"ErasingDownload";
  v1049[1] = @"ClientAcceptCancelActiveJob";
  v195 = [NSDictionary dictionaryWithObjects:v1049 forKeys:v1048 count:2];
  v1073[11] = v195;
  v1072[12] = @"ClientEraseAll";
  v1046[0] = v3;
  v1046[1] = v2;
  v1047[0] = @"ErasingDownload";
  v1047[1] = @"ClientAcceptEraseCancelActiveJob";
  v194 = [NSDictionary dictionaryWithObjects:v1047 forKeys:v1046 count:2];
  v1073[12] = v194;
  v1072[13] = @"JobFailedToStart";
  v1044 = v2;
  v1045 = @"EliminateDoneDecideMoreDownload";
  v193 = [NSDictionary dictionaryWithObjects:&v1045 forKeys:&v1044 count:1];
  v1073[13] = v193;
  v1072[14] = @"JobDownloadForStagingProgress";
  v1042 = v2;
  v1043 = v4;
  v192 = [NSDictionary dictionaryWithObjects:&v1043 forKeys:&v1042 count:1];
  v1073[14] = v192;
  v1072[15] = @"JobDownloadForStagingSuccess";
  v1040 = v2;
  v1041 = @"EliminateDoneDecideMoreDownload";
  v191 = [NSDictionary dictionaryWithObjects:&v1041 forKeys:&v1040 count:1];
  v1073[15] = v191;
  v1072[16] = @"JobDownloadForStagingFailure";
  v1038 = v2;
  v1039 = @"EliminateDoneDecideMoreDownload";
  v190 = [NSDictionary dictionaryWithObjects:&v1039 forKeys:&v1038 count:1];
  v1073[16] = v190;
  v1072[17] = @"TimerFiredDetermining";
  v1036 = v2;
  v1037 = v4;
  v189 = [NSDictionary dictionaryWithObjects:&v1037 forKeys:&v1036 count:1];
  v1073[17] = v189;
  v1072[18] = @"DownloadMoreAvailable";
  v1034[0] = v3;
  v1034[1] = v2;
  v1035[0] = @"AllDownloading";
  v1035[1] = @"NextAwaitingBeginDownload";
  v188 = [NSDictionary dictionaryWithObjects:v1035 forKeys:v1034 count:2];
  v1073[18] = v188;
  v1072[19] = @"DownloadDoneAvailable";
  v1032 = v2;
  v1033 = @"DoneAvailableDecideAnyStaged";
  v187 = [NSDictionary dictionaryWithObjects:&v1033 forKeys:&v1032 count:1];
  v1073[19] = v187;
  v1072[20] = @"DownloadNothingStaged";
  v1030[0] = v3;
  v1030[1] = v2;
  v1031[0] = @"AllAvailableContent";
  v1031[1] = @"ReplyNothingStaged";
  v186 = [NSDictionary dictionaryWithObjects:v1031 forKeys:v1030 count:2];
  v1073[20] = v186;
  v1072[21] = @"DownloadNothingStagedEmpty";
  v1028[0] = v3;
  v1028[1] = v2;
  v1029[0] = @"NothingAvailable";
  v1029[1] = @"ReplyNothingStagedPurgeAll";
  v185 = [NSDictionary dictionaryWithObjects:v1029 forKeys:v1028 count:2];
  v1073[21] = v185;
  v1072[22] = @"DownloadHaveStaged";
  v1026[0] = v3;
  v1026[1] = v2;
  v1027[0] = @"StagedContent";
  v1027[1] = @"ReplyHaveStaged";
  v184 = [NSDictionary dictionaryWithObjects:v1027 forKeys:v1026 count:2];
  v1073[22] = v184;
  v1072[23] = @"UnstagedFromControlCancelJob";
  v1024[0] = v3;
  v1024[1] = v2;
  v1025[0] = @"CancelingDownload";
  v1025[1] = @"CancelActiveJob";
  v183 = [NSDictionary dictionaryWithObjects:v1025 forKeys:v1024 count:2];
  v1073[23] = v183;
  v1072[24] = @"EliminateCurrentJob";
  v1022 = v2;
  v1023 = v4;
  v182 = [NSDictionary dictionaryWithObjects:&v1023 forKeys:&v1022 count:1];
  v1073[24] = v182;
  v181 = [NSDictionary dictionaryWithObjects:v1073 forKeys:v1072 count:25];
  v2013[19] = v181;
  v2012[20] = @"StagedContent";
  v1020[0] = @"ControlForceUnstage";
  v1018 = v2;
  v1019 = @"ControlUnstagedDecideRemoveAll";
  v180 = [NSDictionary dictionaryWithObjects:&v1019 forKeys:&v1018 count:1];
  v1021[0] = v180;
  v1020[1] = @"ControlEliminateAssetSelector";
  v1016 = v2;
  v1017 = @"EliminateDoneStagedDecideEmpty";
  v179 = [NSDictionary dictionaryWithObjects:&v1017 forKeys:&v1016 count:1];
  v1021[1] = v179;
  v1020[2] = @"ControlEliminateSetIdentifier";
  v1014 = v2;
  v1015 = @"SetEliminateDoneStagedDecideEmpty";
  v178 = [NSDictionary dictionaryWithObjects:&v1015 forKeys:&v1014 count:1];
  v1021[2] = v178;
  v1020[3] = @"ControlAlteredSetConfiguration";
  v1012 = v2;
  v1013 = v4;
  v177 = [NSDictionary dictionaryWithObjects:&v1013 forKeys:&v1012 count:1];
  v1021[3] = v177;
  v1020[4] = @"ControlSetTargetsSpecified";
  v1010 = v2;
  v1011 = v4;
  v176 = [NSDictionary dictionaryWithObjects:&v1011 forKeys:&v1010 count:1];
  v1021[4] = v176;
  v1020[5] = @"ClientDetermineGroupsAvailable";
  v1008 = v2;
  v1009 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v175 = [NSDictionary dictionaryWithObjects:&v1009 forKeys:&v1008 count:1];
  v1021[5] = v175;
  v1020[6] = @"ClientDetermineAllAvailable";
  v1006 = v2;
  v1007 = @"ClientInvalidStagingPhase";
  v174 = [NSDictionary dictionaryWithObjects:&v1007 forKeys:&v1006 count:1];
  v1021[6] = v174;
  v1020[7] = @"ClientDownloadAlreadyStaged";
  v1004 = v2;
  v1005 = @"ClientHaveStagedContent";
  v173 = [NSDictionary dictionaryWithObjects:&v1005 forKeys:&v1004 count:1];
  v1021[7] = v173;
  v1020[8] = @"ClientDownloadGroupsAvailable";
  v1002 = v2;
  v1003 = @"ClientInvalidStagingPhase";
  v172 = [NSDictionary dictionaryWithObjects:&v1003 forKeys:&v1002 count:1];
  v1021[8] = v172;
  v1020[9] = @"ClientDownloadAllAvailable";
  v1000 = v2;
  v1001 = @"ClientInvalidStagingPhase";
  v171 = [NSDictionary dictionaryWithObjects:&v1001 forKeys:&v1000 count:1];
  v1021[9] = v171;
  v1020[10] = @"ClientCancelCompletion";
  v998 = v2;
  v999 = @"ClientCancelDesireForCompletion";
  v170 = [NSDictionary dictionaryWithObjects:&v999 forKeys:&v998 count:1];
  v1021[10] = v170;
  v1020[11] = @"ClientPurgeAll";
  v996 = v2;
  v997 = @"ClientPurgeDecideStagingClient";
  v169 = [NSDictionary dictionaryWithObjects:&v997 forKeys:&v996 count:1];
  v1021[11] = v169;
  v1020[12] = @"ClientEraseAll";
  v994 = v2;
  v995 = @"ClientEraseDecideStagingClient";
  v168 = [NSDictionary dictionaryWithObjects:&v995 forKeys:&v994 count:1];
  v1021[12] = v168;
  v1020[13] = @"TimerFiredDetermining";
  v992 = v2;
  v993 = v4;
  v167 = [NSDictionary dictionaryWithObjects:&v993 forKeys:&v992 count:1];
  v1021[13] = v167;
  v1020[14] = @"UnstagedFromControlRemoveAll";
  v990 = v2;
  v991 = @"UpdateStagedSituation";
  v166 = [NSDictionary dictionaryWithObjects:&v991 forKeys:&v990 count:1];
  v1021[14] = v166;
  v1020[15] = @"EliminateNowEmpty";
  v988 = v2;
  v989 = @"UpdateStagedSituation";
  v165 = [NSDictionary dictionaryWithObjects:&v989 forKeys:&v988 count:1];
  v1021[15] = v165;
  v1020[16] = @"PurgeAcceptedRemoveDownloaded";
  v986[0] = v3;
  v986[1] = v2;
  v987[0] = @"GroupsAvailableContent";
  v987[1] = @"RemoveAllReplyPurged";
  v164 = [NSDictionary dictionaryWithObjects:v987 forKeys:v986 count:2];
  v1021[16] = v164;
  v1020[17] = @"PurgeAcceptedRemoveAll";
  v984[0] = v3;
  v984[1] = v2;
  v985[0] = @"GroupsAvailableContent";
  v985[1] = @"RemoveAllReplyPurged";
  v163 = [NSDictionary dictionaryWithObjects:v985 forKeys:v984 count:2];
  v1021[17] = v163;
  v1020[18] = @"PurgeEraseAcceptedRemoveAll";
  v982[0] = v3;
  v982[1] = v2;
  v983[0] = @"NothingAvailable";
  v983[1] = @"RemoveAllReplyErased";
  v162 = [NSDictionary dictionaryWithObjects:v983 forKeys:v982 count:2];
  v1021[18] = v162;
  v161 = [NSDictionary dictionaryWithObjects:v1021 forKeys:v1020 count:19];
  v2013[20] = v161;
  v2012[21] = @"CancelingRequestDownloaded";
  v980[0] = @"ControlForceUnstage";
  v978 = v2;
  v979 = v4;
  v160 = [NSDictionary dictionaryWithObjects:&v979 forKeys:&v978 count:1];
  v981[0] = v160;
  v980[1] = @"ControlAlreadyDownloaded";
  v976 = v2;
  v977 = @"DecideHaveAvailableOtherTargets";
  v159 = [NSDictionary dictionaryWithObjects:&v977 forKeys:&v976 count:1];
  v981[1] = v159;
  v980[2] = @"ControlEliminateAssetSelector";
  v974 = v2;
  v975 = @"EliminateDecideMatch";
  v158 = [NSDictionary dictionaryWithObjects:&v975 forKeys:&v974 count:1];
  v981[2] = v158;
  v980[3] = @"ControlEliminateSetIdentifier";
  v972 = v2;
  v973 = @"SetEliminateDecideMatch";
  v157 = [NSDictionary dictionaryWithObjects:&v973 forKeys:&v972 count:1];
  v981[3] = v157;
  v980[4] = @"ControlAlteredSetConfiguration";
  v970 = v2;
  v971 = v4;
  v156 = [NSDictionary dictionaryWithObjects:&v971 forKeys:&v970 count:1];
  v981[4] = v156;
  v980[5] = @"ControlSetTargetsSpecified";
  v968 = v2;
  v969 = v4;
  v155 = [NSDictionary dictionaryWithObjects:&v969 forKeys:&v968 count:1];
  v981[5] = v155;
  v980[6] = @"ClientDetermineGroupsAvailable";
  v966 = v2;
  v967 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v154 = [NSDictionary dictionaryWithObjects:&v967 forKeys:&v966 count:1];
  v981[6] = v154;
  v980[7] = @"ClientDetermineAllAvailable";
  v964 = v2;
  v965 = @"ClientInvalidStagingPhase";
  v153 = [NSDictionary dictionaryWithObjects:&v965 forKeys:&v964 count:1];
  v981[7] = v153;
  v980[8] = @"ClientDownloadAlreadyStaged";
  v962 = v2;
  v963 = @"ClientInvalidStagingPhase";
  v152 = [NSDictionary dictionaryWithObjects:&v963 forKeys:&v962 count:1];
  v981[8] = v152;
  v980[9] = @"ClientDownloadGroupsAvailable";
  v960 = v2;
  v961 = @"ClientNewerReplyEmptyDownload";
  v151 = [NSDictionary dictionaryWithObjects:&v961 forKeys:&v960 count:1];
  v981[9] = v151;
  v980[10] = @"ClientDownloadAllAvailable";
  v958 = v2;
  v959 = @"ClientInvalidStagingPhase";
  v150 = [NSDictionary dictionaryWithObjects:&v959 forKeys:&v958 count:1];
  v981[10] = v150;
  v980[11] = @"ClientCancelCompletion";
  v956 = v2;
  v957 = @"ClientCancelDesireForCompletion";
  v149 = [NSDictionary dictionaryWithObjects:&v957 forKeys:&v956 count:1];
  v981[11] = v149;
  v980[12] = @"ClientPurgeAll";
  v954 = v2;
  v955 = @"ClientPurgeDecideStagingClient";
  v148 = [NSDictionary dictionaryWithObjects:&v955 forKeys:&v954 count:1];
  v981[12] = v148;
  v980[13] = @"ClientEraseAll";
  v952 = v2;
  v953 = @"ClientEraseDecideStagingClient";
  v147 = [NSDictionary dictionaryWithObjects:&v953 forKeys:&v952 count:1];
  v981[13] = v147;
  v980[14] = @"TimerFiredDetermining";
  v950 = v2;
  v951 = v4;
  v146 = [NSDictionary dictionaryWithObjects:&v951 forKeys:&v950 count:1];
  v981[14] = v146;
  v980[15] = @"TargetHaveOtherAvailable";
  v948[0] = v3;
  v948[1] = v2;
  v949[0] = @"GroupsAvailableContent";
  v949[1] = @"ReplyNoCandidatesPurgeAll";
  v145 = [NSDictionary dictionaryWithObjects:v949 forKeys:v948 count:2];
  v981[15] = v145;
  v980[16] = @"TargetNoOtherAvailable";
  v946[0] = v3;
  v946[1] = v2;
  v947[0] = @"NothingAvailable";
  v947[1] = @"ReplyNoCandidatesEraseAll";
  v144 = [NSDictionary dictionaryWithObjects:v947 forKeys:v946 count:2];
  v981[16] = v144;
  v980[17] = @"EliminateCurrentJob";
  v944 = v2;
  v945 = v4;
  v143 = [NSDictionary dictionaryWithObjects:&v945 forKeys:&v944 count:1];
  v981[17] = v143;
  v980[18] = @"PurgeAcceptedRemoveDownloaded";
  v942 = v2;
  v943 = v4;
  v142 = [NSDictionary dictionaryWithObjects:&v943 forKeys:&v942 count:1];
  v981[18] = v142;
  v980[19] = @"PurgeAcceptedRemoveAll";
  v940 = v2;
  v941 = v4;
  v141 = [NSDictionary dictionaryWithObjects:&v941 forKeys:&v940 count:1];
  v981[19] = v141;
  v980[20] = @"PurgeEraseAcceptedRemoveAll";
  v938 = v2;
  v939 = v4;
  v140 = [NSDictionary dictionaryWithObjects:&v939 forKeys:&v938 count:1];
  v981[20] = v140;
  v138 = [NSDictionary dictionaryWithObjects:v981 forKeys:v980 count:21];
  v2013[21] = v138;
  v2012[22] = @"CancelingDetermine";
  v936[0] = @"ControlForceUnstage";
  v934 = v2;
  v935 = v4;
  v137 = [NSDictionary dictionaryWithObjects:&v935 forKeys:&v934 count:1];
  v937[0] = v137;
  v936[1] = @"ControlEliminateAssetSelector";
  v932 = v2;
  v933 = @"EliminateDecideMatch";
  v136 = [NSDictionary dictionaryWithObjects:&v933 forKeys:&v932 count:1];
  v937[1] = v136;
  v936[2] = @"ControlEliminateSetIdentifier";
  v930 = v2;
  v931 = @"SetEliminateDecideMatch";
  v135 = [NSDictionary dictionaryWithObjects:&v931 forKeys:&v930 count:1];
  v937[2] = v135;
  v936[3] = @"ControlAlteredSetConfiguration";
  v928 = v2;
  v929 = v4;
  v134 = [NSDictionary dictionaryWithObjects:&v929 forKeys:&v928 count:1];
  v937[3] = v134;
  v936[4] = @"ControlSetTargetsSpecified";
  v926 = v2;
  v927 = v4;
  v133 = [NSDictionary dictionaryWithObjects:&v927 forKeys:&v926 count:1];
  v937[4] = v133;
  v936[5] = @"ClientDetermineGroupsAvailable";
  v924 = v2;
  v925 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v132 = [NSDictionary dictionaryWithObjects:&v925 forKeys:&v924 count:1];
  v937[5] = v132;
  v936[6] = @"ClientDetermineAllAvailable";
  v922 = v2;
  v923 = @"ClientInvalidStagingPhase";
  v131 = [NSDictionary dictionaryWithObjects:&v923 forKeys:&v922 count:1];
  v937[6] = v131;
  v936[7] = @"ClientDownloadAlreadyStaged";
  v920 = v2;
  v921 = @"ClientInvalidStagingPhase";
  v130 = [NSDictionary dictionaryWithObjects:&v921 forKeys:&v920 count:1];
  v937[7] = v130;
  v936[8] = @"ClientDownloadGroupsAvailable";
  v918 = v2;
  v919 = @"ClientNewerReplyEmptyDownload";
  v129 = [NSDictionary dictionaryWithObjects:&v919 forKeys:&v918 count:1];
  v937[8] = v129;
  v936[9] = @"ClientDownloadAllAvailable";
  v916 = v2;
  v917 = @"ClientInvalidStagingPhase";
  v128 = [NSDictionary dictionaryWithObjects:&v917 forKeys:&v916 count:1];
  v937[9] = v128;
  v936[10] = @"ClientCancelCompletion";
  v914 = v2;
  v915 = @"ClientCancelDesireForCompletion";
  v127 = [NSDictionary dictionaryWithObjects:&v915 forKeys:&v914 count:1];
  v937[10] = v127;
  v936[11] = @"ClientPurgeAll";
  v912 = v2;
  v913 = @"ClientPurgeDecideStagingClient";
  v126 = [NSDictionary dictionaryWithObjects:&v913 forKeys:&v912 count:1];
  v937[11] = v126;
  v936[12] = @"ClientEraseAll";
  v910 = v2;
  v911 = @"ClientEraseDecideStagingClient";
  v125 = [NSDictionary dictionaryWithObjects:&v911 forKeys:&v910 count:1];
  v937[12] = v125;
  v936[13] = @"JobDetermineAvailableSuccess";
  v908[0] = v3;
  v908[1] = v2;
  v909[0] = @"GroupsAvailableContent";
  v909[1] = @"RemoveAllReplyCanceled";
  v124 = [NSDictionary dictionaryWithObjects:v909 forKeys:v908 count:2];
  v937[13] = v124;
  v936[14] = @"JobDetermineAvailableFailure";
  v906[0] = v3;
  v906[1] = v2;
  v907[0] = @"GroupsAvailableContent";
  v907[1] = @"RemoveAllReplyCanceled";
  v123 = [NSDictionary dictionaryWithObjects:v907 forKeys:v906 count:2];
  v937[14] = v123;
  v936[15] = @"TimerFiredDetermining";
  v904 = v2;
  v905 = v4;
  v122 = [NSDictionary dictionaryWithObjects:&v905 forKeys:&v904 count:1];
  v937[15] = v122;
  v936[16] = @"EliminateCurrentJob";
  v902 = v2;
  v903 = v4;
  v121 = [NSDictionary dictionaryWithObjects:&v903 forKeys:&v902 count:1];
  v937[16] = v121;
  v936[17] = @"PurgeAcceptedRemoveDownloaded";
  v900 = v2;
  v901 = v4;
  v120 = [NSDictionary dictionaryWithObjects:&v901 forKeys:&v900 count:1];
  v937[17] = v120;
  v936[18] = @"PurgeAcceptedRemoveAll";
  v898 = v2;
  v899 = v4;
  v119 = [NSDictionary dictionaryWithObjects:&v899 forKeys:&v898 count:1];
  v937[18] = v119;
  v936[19] = @"PurgeEraseAcceptedRemoveAll";
  v896 = v2;
  v897 = v4;
  v118 = [NSDictionary dictionaryWithObjects:&v897 forKeys:&v896 count:1];
  v937[19] = v118;
  v117 = [NSDictionary dictionaryWithObjects:v937 forKeys:v936 count:20];
  v2013[22] = v117;
  v2012[23] = @"CancelingIgnoreDetermine";
  v894[0] = @"ControlForceUnstage";
  v892 = v2;
  v893 = v4;
  v116 = [NSDictionary dictionaryWithObjects:&v893 forKeys:&v892 count:1];
  v895[0] = v116;
  v894[1] = @"ControlEliminateAssetSelector";
  v890 = v2;
  v891 = @"EliminateDecideMatch";
  v115 = [NSDictionary dictionaryWithObjects:&v891 forKeys:&v890 count:1];
  v895[1] = v115;
  v894[2] = @"ControlEliminateSetIdentifier";
  v888 = v2;
  v889 = @"SetEliminateDecideMatch";
  v114 = [NSDictionary dictionaryWithObjects:&v889 forKeys:&v888 count:1];
  v895[2] = v114;
  v894[3] = @"ControlAlteredSetConfiguration";
  v886 = v2;
  v887 = v4;
  v113 = [NSDictionary dictionaryWithObjects:&v887 forKeys:&v886 count:1];
  v895[3] = v113;
  v894[4] = @"ControlSetTargetsSpecified";
  v884 = v2;
  v885 = v4;
  v112 = [NSDictionary dictionaryWithObjects:&v885 forKeys:&v884 count:1];
  v895[4] = v112;
  v894[5] = @"ClientDetermineGroupsAvailable";
  v882 = v2;
  v883 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v111 = [NSDictionary dictionaryWithObjects:&v883 forKeys:&v882 count:1];
  v895[5] = v111;
  v894[6] = @"ClientDetermineAllAvailable";
  v880 = v2;
  v881 = @"ClientInvalidStagingPhase";
  v110 = [NSDictionary dictionaryWithObjects:&v881 forKeys:&v880 count:1];
  v895[6] = v110;
  v894[7] = @"ClientDownloadAlreadyStaged";
  v878 = v2;
  v879 = @"ClientInvalidStagingPhase";
  v109 = [NSDictionary dictionaryWithObjects:&v879 forKeys:&v878 count:1];
  v895[7] = v109;
  v894[8] = @"ClientDownloadGroupsAvailable";
  v876 = v2;
  v877 = @"ClientNewerReplyEmptyDownload";
  v108 = [NSDictionary dictionaryWithObjects:&v877 forKeys:&v876 count:1];
  v895[8] = v108;
  v894[9] = @"ClientDownloadAllAvailable";
  v874 = v2;
  v875 = @"ClientInvalidStagingPhase";
  v107 = [NSDictionary dictionaryWithObjects:&v875 forKeys:&v874 count:1];
  v895[9] = v107;
  v894[10] = @"ClientCancelCompletion";
  v872 = v2;
  v873 = @"ClientCancelDesireForCompletion";
  v106 = [NSDictionary dictionaryWithObjects:&v873 forKeys:&v872 count:1];
  v895[10] = v106;
  v894[11] = @"ClientPurgeAll";
  v870 = v2;
  v871 = @"ClientPurgeDecideStagingClient";
  v105 = [NSDictionary dictionaryWithObjects:&v871 forKeys:&v870 count:1];
  v895[11] = v105;
  v894[12] = @"ClientEraseAll";
  v868 = v2;
  v869 = @"ClientEraseDecideStagingClient";
  v104 = [NSDictionary dictionaryWithObjects:&v869 forKeys:&v868 count:1];
  v895[12] = v104;
  v894[13] = @"JobDetermineAvailableSuccess";
  v866[0] = v3;
  v866[1] = v2;
  v867[0] = @"GroupsAvailableContent";
  v867[1] = @"ReplyNoCandidates";
  v103 = [NSDictionary dictionaryWithObjects:v867 forKeys:v866 count:2];
  v895[13] = v103;
  v894[14] = @"JobDetermineAvailableFailure";
  v864[0] = v3;
  v864[1] = v2;
  v865[0] = @"GroupsAvailableContent";
  v865[1] = @"ReplyNoCandidates";
  v102 = [NSDictionary dictionaryWithObjects:v865 forKeys:v864 count:2];
  v895[14] = v102;
  v894[15] = @"TimerFiredDetermining";
  v862 = v2;
  v863 = v4;
  v101 = [NSDictionary dictionaryWithObjects:&v863 forKeys:&v862 count:1];
  v895[15] = v101;
  v894[16] = @"EliminateCurrentJob";
  v860 = v2;
  v861 = v4;
  v100 = [NSDictionary dictionaryWithObjects:&v861 forKeys:&v860 count:1];
  v895[16] = v100;
  v894[17] = @"PurgeAcceptedRemoveDownloaded";
  v858 = v2;
  v859 = v4;
  v99 = [NSDictionary dictionaryWithObjects:&v859 forKeys:&v858 count:1];
  v895[17] = v99;
  v894[18] = @"PurgeAcceptedRemoveAll";
  v856 = v2;
  v857 = v4;
  v98 = [NSDictionary dictionaryWithObjects:&v857 forKeys:&v856 count:1];
  v895[18] = v98;
  v894[19] = @"PurgeEraseAcceptedRemoveAll";
  v854 = v2;
  v855 = v4;
  v97 = [NSDictionary dictionaryWithObjects:&v855 forKeys:&v854 count:1];
  v895[19] = v97;
  v96 = [NSDictionary dictionaryWithObjects:v895 forKeys:v894 count:20];
  v2013[23] = v96;
  v2012[24] = @"CancelingDownload";
  v852[0] = @"ControlForceUnstage";
  v850 = v2;
  v851 = v4;
  v95 = [NSDictionary dictionaryWithObjects:&v851 forKeys:&v850 count:1];
  v853[0] = v95;
  v852[1] = @"ControlEliminateAssetSelector";
  v848 = v2;
  v849 = @"EliminateDecideMatch";
  v94 = [NSDictionary dictionaryWithObjects:&v849 forKeys:&v848 count:1];
  v853[1] = v94;
  v852[2] = @"ControlEliminateSetIdentifier";
  v846 = v2;
  v847 = @"SetEliminateDecideMatch";
  v93 = [NSDictionary dictionaryWithObjects:&v847 forKeys:&v846 count:1];
  v853[2] = v93;
  v852[3] = @"ControlAlteredSetConfiguration";
  v844 = v2;
  v845 = v4;
  v92 = [NSDictionary dictionaryWithObjects:&v845 forKeys:&v844 count:1];
  v853[3] = v92;
  v852[4] = @"ControlSetTargetsSpecified";
  v842 = v2;
  v843 = v4;
  v91 = [NSDictionary dictionaryWithObjects:&v843 forKeys:&v842 count:1];
  v853[4] = v91;
  v852[5] = @"ClientDetermineGroupsAvailable";
  v840 = v2;
  v841 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v90 = [NSDictionary dictionaryWithObjects:&v841 forKeys:&v840 count:1];
  v853[5] = v90;
  v852[6] = @"ClientDetermineAllAvailable";
  v838 = v2;
  v839 = @"ClientInvalidStagingPhase";
  v89 = [NSDictionary dictionaryWithObjects:&v839 forKeys:&v838 count:1];
  v853[6] = v89;
  v852[7] = @"ClientDownloadAlreadyStaged";
  v836 = v2;
  v837 = @"ClientInvalidStagingPhase";
  v88 = [NSDictionary dictionaryWithObjects:&v837 forKeys:&v836 count:1];
  v853[7] = v88;
  v852[8] = @"ClientDownloadGroupsAvailable";
  v834 = v2;
  v835 = @"ClientNewerReplyEmptyDownload";
  v87 = [NSDictionary dictionaryWithObjects:&v835 forKeys:&v834 count:1];
  v853[8] = v87;
  v852[9] = @"ClientDownloadAllAvailable";
  v832 = v2;
  v833 = @"ClientInvalidStagingPhase";
  v86 = [NSDictionary dictionaryWithObjects:&v833 forKeys:&v832 count:1];
  v853[9] = v86;
  v852[10] = @"ClientCancelCompletion";
  v830 = v2;
  v831 = @"ClientCancelDesireForCompletion";
  v85 = [NSDictionary dictionaryWithObjects:&v831 forKeys:&v830 count:1];
  v853[10] = v85;
  v852[11] = @"ClientPurgeAll";
  v828 = v2;
  v829 = @"ClientPurgeDecideStagingClient";
  v84 = [NSDictionary dictionaryWithObjects:&v829 forKeys:&v828 count:1];
  v853[11] = v84;
  v852[12] = @"ClientEraseAll";
  v826 = v2;
  v827 = @"ClientEraseDecideStagingClient";
  v83 = [NSDictionary dictionaryWithObjects:&v827 forKeys:&v826 count:1];
  v853[12] = v83;
  v852[13] = @"JobFailedToStart";
  v824[0] = v3;
  v824[1] = v2;
  v825[0] = @"GroupsAvailableContent";
  v825[1] = @"RemoveAllReplyPurged";
  v82 = [NSDictionary dictionaryWithObjects:v825 forKeys:v824 count:2];
  v853[13] = v82;
  v852[14] = @"JobDownloadForStagingProgress";
  v822 = v2;
  v823 = v4;
  v81 = [NSDictionary dictionaryWithObjects:&v823 forKeys:&v822 count:1];
  v853[14] = v81;
  v852[15] = @"JobDownloadForStagingSuccess";
  v820[0] = v3;
  v820[1] = v2;
  v821[0] = @"GroupsAvailableContent";
  v821[1] = @"RemoveAllReplyPurged";
  v80 = [NSDictionary dictionaryWithObjects:v821 forKeys:v820 count:2];
  v853[15] = v80;
  v852[16] = @"JobDownloadForStagingFailure";
  v818[0] = v3;
  v818[1] = v2;
  v819[0] = @"GroupsAvailableContent";
  v819[1] = @"RemoveAllReplyPurged";
  v79 = [NSDictionary dictionaryWithObjects:v819 forKeys:v818 count:2];
  v853[16] = v79;
  v852[17] = @"TimerFiredDetermining";
  v816 = v2;
  v817 = v4;
  v78 = [NSDictionary dictionaryWithObjects:&v817 forKeys:&v816 count:1];
  v853[17] = v78;
  v852[18] = @"EliminateCurrentJob";
  v814 = v2;
  v815 = v4;
  v77 = [NSDictionary dictionaryWithObjects:&v815 forKeys:&v814 count:1];
  v853[18] = v77;
  v852[19] = @"PurgeAcceptedRemoveDownloaded";
  v812 = v2;
  v813 = v4;
  v76 = [NSDictionary dictionaryWithObjects:&v813 forKeys:&v812 count:1];
  v853[19] = v76;
  v852[20] = @"PurgeAcceptedRemoveAll";
  v810 = v2;
  v811 = v4;
  v75 = [NSDictionary dictionaryWithObjects:&v811 forKeys:&v810 count:1];
  v853[20] = v75;
  v852[21] = @"PurgeEraseAcceptedRemoveAll";
  v808 = v2;
  v809 = v4;
  v74 = [NSDictionary dictionaryWithObjects:&v809 forKeys:&v808 count:1];
  v853[21] = v74;
  v852[22] = @"EmptyHaveAvailable";
  v806[0] = v3;
  v806[1] = v2;
  v807[0] = @"GroupsAvailableContent";
  v807[1] = @"RemoveAllReplyPurged";
  v73 = [NSDictionary dictionaryWithObjects:v807 forKeys:v806 count:2];
  v853[22] = v73;
  v852[23] = @"EmptyNothingAvailable";
  v804[0] = v3;
  v804[1] = v2;
  v805[0] = @"GroupsAvailableContent";
  v805[1] = @"RemoveAllReplyPurged";
  v72 = [NSDictionary dictionaryWithObjects:v805 forKeys:v804 count:2];
  v853[23] = v72;
  v71 = [NSDictionary dictionaryWithObjects:v853 forKeys:v852 count:24];
  v2013[24] = v71;
  v2012[25] = @"ErasingRequestDownloaded";
  v802[0] = @"ControlForceUnstage";
  v800 = v2;
  v801 = v4;
  v70 = [NSDictionary dictionaryWithObjects:&v801 forKeys:&v800 count:1];
  v803[0] = v70;
  v802[1] = @"ControlAlreadyDownloaded";
  v798[0] = v3;
  v798[1] = v2;
  v799[0] = @"NothingAvailable";
  v799[1] = @"RemoveAllReplyErased";
  v69 = [NSDictionary dictionaryWithObjects:v799 forKeys:v798 count:2];
  v803[1] = v69;
  v802[2] = @"ControlEliminateAssetSelector";
  v796 = v2;
  v797 = @"EliminateDecideMatch";
  v68 = [NSDictionary dictionaryWithObjects:&v797 forKeys:&v796 count:1];
  v803[2] = v68;
  v802[3] = @"ControlEliminateSetIdentifier";
  v794 = v2;
  v795 = @"SetEliminateDecideMatch";
  v67 = [NSDictionary dictionaryWithObjects:&v795 forKeys:&v794 count:1];
  v803[3] = v67;
  v802[4] = @"ControlAlteredSetConfiguration";
  v792 = v2;
  v793 = v4;
  v66 = [NSDictionary dictionaryWithObjects:&v793 forKeys:&v792 count:1];
  v803[4] = v66;
  v802[5] = @"ControlSetTargetsSpecified";
  v790 = v2;
  v791 = v4;
  v65 = [NSDictionary dictionaryWithObjects:&v791 forKeys:&v790 count:1];
  v803[5] = v65;
  v802[6] = @"ClientDetermineGroupsAvailable";
  v788 = v2;
  v789 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v64 = [NSDictionary dictionaryWithObjects:&v789 forKeys:&v788 count:1];
  v803[6] = v64;
  v802[7] = @"ClientDetermineAllAvailable";
  v786 = v2;
  v787 = @"ClientInvalidStagingPhase";
  v63 = [NSDictionary dictionaryWithObjects:&v787 forKeys:&v786 count:1];
  v803[7] = v63;
  v802[8] = @"ClientDownloadAlreadyStaged";
  v784 = v2;
  v785 = @"ClientInvalidStagingPhase";
  v62 = [NSDictionary dictionaryWithObjects:&v785 forKeys:&v784 count:1];
  v803[8] = v62;
  v802[9] = @"ClientDownloadGroupsAvailable";
  v782 = v2;
  v783 = @"ClientNewerReplyEmptyDownload";
  v61 = [NSDictionary dictionaryWithObjects:&v783 forKeys:&v782 count:1];
  v803[9] = v61;
  v802[10] = @"ClientDownloadAllAvailable";
  v780 = v2;
  v781 = @"ClientInvalidStagingPhase";
  v60 = [NSDictionary dictionaryWithObjects:&v781 forKeys:&v780 count:1];
  v803[10] = v60;
  v802[11] = @"ClientCancelCompletion";
  v778 = v2;
  v779 = @"ClientCancelDesireForCompletion";
  v59 = [NSDictionary dictionaryWithObjects:&v779 forKeys:&v778 count:1];
  v803[11] = v59;
  v802[12] = @"ClientPurgeAll";
  v776 = v2;
  v777 = @"ClientPurgeDecideStagingClient";
  v58 = [NSDictionary dictionaryWithObjects:&v777 forKeys:&v776 count:1];
  v803[12] = v58;
  v802[13] = @"ClientEraseAll";
  v774 = v2;
  v775 = @"ClientEraseDecideStagingClient";
  v57 = [NSDictionary dictionaryWithObjects:&v775 forKeys:&v774 count:1];
  v803[13] = v57;
  v802[14] = @"TimerFiredDetermining";
  v772 = v2;
  v773 = v4;
  v56 = [NSDictionary dictionaryWithObjects:&v773 forKeys:&v772 count:1];
  v803[14] = v56;
  v802[15] = @"EliminateCurrentJob";
  v770 = v2;
  v771 = v4;
  v55 = [NSDictionary dictionaryWithObjects:&v771 forKeys:&v770 count:1];
  v803[15] = v55;
  v802[16] = @"PurgeAcceptedRemoveDownloaded";
  v768 = v2;
  v769 = v4;
  v54 = [NSDictionary dictionaryWithObjects:&v769 forKeys:&v768 count:1];
  v803[16] = v54;
  v802[17] = @"PurgeAcceptedRemoveAll";
  v766 = v2;
  v767 = v4;
  v53 = [NSDictionary dictionaryWithObjects:&v767 forKeys:&v766 count:1];
  v803[17] = v53;
  v802[18] = @"PurgeEraseAcceptedRemoveAll";
  v764 = v2;
  v765 = v4;
  v52 = [NSDictionary dictionaryWithObjects:&v765 forKeys:&v764 count:1];
  v803[18] = v52;
  v51 = [NSDictionary dictionaryWithObjects:v803 forKeys:v802 count:19];
  v2013[25] = v51;
  v2012[26] = @"ErasingDetermine";
  v762[0] = @"ControlForceUnstage";
  v760 = v2;
  v761 = v4;
  v50 = [NSDictionary dictionaryWithObjects:&v761 forKeys:&v760 count:1];
  v763[0] = v50;
  v762[1] = @"ControlEliminateAssetSelector";
  v758 = v2;
  v759 = @"EliminateDecideMatch";
  v49 = [NSDictionary dictionaryWithObjects:&v759 forKeys:&v758 count:1];
  v763[1] = v49;
  v762[2] = @"ControlEliminateSetIdentifier";
  v756 = v2;
  v757 = @"SetEliminateDecideMatch";
  v48 = [NSDictionary dictionaryWithObjects:&v757 forKeys:&v756 count:1];
  v763[2] = v48;
  v762[3] = @"ControlAlteredSetConfiguration";
  v754 = v2;
  v755 = v4;
  v47 = [NSDictionary dictionaryWithObjects:&v755 forKeys:&v754 count:1];
  v763[3] = v47;
  v762[4] = @"ControlSetTargetsSpecified";
  v752 = v2;
  v753 = v4;
  v46 = [NSDictionary dictionaryWithObjects:&v753 forKeys:&v752 count:1];
  v763[4] = v46;
  v762[5] = @"ClientDetermineGroupsAvailable";
  v750 = v2;
  v751 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v45 = [NSDictionary dictionaryWithObjects:&v751 forKeys:&v750 count:1];
  v763[5] = v45;
  v762[6] = @"ClientDetermineAllAvailable";
  v748 = v2;
  v749 = @"ClientInvalidStagingPhase";
  v44 = [NSDictionary dictionaryWithObjects:&v749 forKeys:&v748 count:1];
  v763[6] = v44;
  v762[7] = @"ClientDownloadAlreadyStaged";
  v746 = v2;
  v747 = @"ClientInvalidStagingPhase";
  v43 = [NSDictionary dictionaryWithObjects:&v747 forKeys:&v746 count:1];
  v763[7] = v43;
  v762[8] = @"ClientDownloadGroupsAvailable";
  v744 = v2;
  v745 = @"ClientNewerReplyEmptyDownload";
  v42 = [NSDictionary dictionaryWithObjects:&v745 forKeys:&v744 count:1];
  v763[8] = v42;
  v762[9] = @"ClientDownloadAllAvailable";
  v742 = v2;
  v743 = @"ClientInvalidStagingPhase";
  v41 = [NSDictionary dictionaryWithObjects:&v743 forKeys:&v742 count:1];
  v763[9] = v41;
  v762[10] = @"ClientCancelCompletion";
  v740 = v2;
  v741 = @"ClientCancelDesireForCompletion";
  v40 = [NSDictionary dictionaryWithObjects:&v741 forKeys:&v740 count:1];
  v763[10] = v40;
  v762[11] = @"ClientPurgeAll";
  v738 = v2;
  v739 = @"ClientPurgeDecideStagingClient";
  v39 = [NSDictionary dictionaryWithObjects:&v739 forKeys:&v738 count:1];
  v763[11] = v39;
  v762[12] = @"ClientEraseAll";
  v736 = v2;
  v737 = @"ClientEraseDecideStagingClient";
  v38 = [NSDictionary dictionaryWithObjects:&v737 forKeys:&v736 count:1];
  v763[12] = v38;
  v762[13] = @"JobDetermineAvailableSuccess";
  v734[0] = v3;
  v734[1] = v2;
  v735[0] = @"NothingAvailable";
  v735[1] = @"RemoveAllReplyErased";
  v37 = [NSDictionary dictionaryWithObjects:v735 forKeys:v734 count:2];
  v763[13] = v37;
  v762[14] = @"JobDetermineAvailableFailure";
  v732[0] = v3;
  v732[1] = v2;
  v733[0] = @"NothingAvailable";
  v733[1] = @"RemoveAllReplyErased";
  v36 = [NSDictionary dictionaryWithObjects:v733 forKeys:v732 count:2];
  v763[14] = v36;
  v762[15] = @"TimerFiredDetermining";
  v730 = v2;
  v731 = v4;
  v35 = [NSDictionary dictionaryWithObjects:&v731 forKeys:&v730 count:1];
  v763[15] = v35;
  v762[16] = @"EliminateCurrentJob";
  v728 = v2;
  v729 = v4;
  v34 = [NSDictionary dictionaryWithObjects:&v729 forKeys:&v728 count:1];
  v763[16] = v34;
  v762[17] = @"PurgeAcceptedRemoveDownloaded";
  v726 = v2;
  v727 = v4;
  v33 = [NSDictionary dictionaryWithObjects:&v727 forKeys:&v726 count:1];
  v763[17] = v33;
  v762[18] = @"PurgeAcceptedRemoveAll";
  v724 = v2;
  v725 = v4;
  v32 = [NSDictionary dictionaryWithObjects:&v725 forKeys:&v724 count:1];
  v763[18] = v32;
  v762[19] = @"PurgeEraseAcceptedRemoveAll";
  v722 = v2;
  v723 = v4;
  v31 = [NSDictionary dictionaryWithObjects:&v723 forKeys:&v722 count:1];
  v763[19] = v31;
  v30 = [NSDictionary dictionaryWithObjects:v763 forKeys:v762 count:20];
  v2013[26] = v30;
  v2012[27] = @"ErasingDownload";
  v720[0] = @"ControlForceUnstage";
  v718 = v2;
  v719 = v4;
  v29 = [NSDictionary dictionaryWithObjects:&v719 forKeys:&v718 count:1];
  v721[0] = v29;
  v720[1] = @"ControlEliminateAssetSelector";
  v716 = v2;
  v717 = @"EliminateDecideMatch";
  v28 = [NSDictionary dictionaryWithObjects:&v717 forKeys:&v716 count:1];
  v721[1] = v28;
  v720[2] = @"ControlEliminateSetIdentifier";
  v714 = v2;
  v715 = @"SetEliminateDecideMatch";
  v27 = [NSDictionary dictionaryWithObjects:&v715 forKeys:&v714 count:1];
  v721[2] = v27;
  v720[3] = @"ControlAlteredSetConfiguration";
  v712 = v2;
  v713 = v4;
  v26 = [NSDictionary dictionaryWithObjects:&v713 forKeys:&v712 count:1];
  v721[3] = v26;
  v720[4] = @"ControlSetTargetsSpecified";
  v710 = v2;
  v711 = v4;
  v25 = [NSDictionary dictionaryWithObjects:&v711 forKeys:&v710 count:1];
  v721[4] = v25;
  v720[5] = @"ClientDetermineGroupsAvailable";
  v708 = v2;
  v709 = @"ClientCheckGroupsReplyAlreadyDetermined";
  v24 = [NSDictionary dictionaryWithObjects:&v709 forKeys:&v708 count:1];
  v721[5] = v24;
  v720[6] = @"ClientDetermineAllAvailable";
  v706 = v2;
  v707 = @"ClientInvalidStagingPhase";
  v23 = [NSDictionary dictionaryWithObjects:&v707 forKeys:&v706 count:1];
  v721[6] = v23;
  v720[7] = @"ClientDownloadAlreadyStaged";
  v704 = v2;
  v705 = @"ClientInvalidStagingPhase";
  v22 = [NSDictionary dictionaryWithObjects:&v705 forKeys:&v704 count:1];
  v721[7] = v22;
  v720[8] = @"ClientDownloadGroupsAvailable";
  v702 = v2;
  v703 = @"ClientNewerReplyEmptyDownload";
  v21 = [NSDictionary dictionaryWithObjects:&v703 forKeys:&v702 count:1];
  v721[8] = v21;
  v720[9] = @"ClientDownloadAllAvailable";
  v700 = v2;
  v701 = @"ClientInvalidStagingPhase";
  v20 = [NSDictionary dictionaryWithObjects:&v701 forKeys:&v700 count:1];
  v721[9] = v20;
  v720[10] = @"ClientCancelCompletion";
  v698 = v2;
  v699 = @"ClientCancelDesireForCompletion";
  v19 = [NSDictionary dictionaryWithObjects:&v699 forKeys:&v698 count:1];
  v721[10] = v19;
  v720[11] = @"ClientPurgeAll";
  v696 = v2;
  v697 = @"ClientPurgeDecideStagingClient";
  v18 = [NSDictionary dictionaryWithObjects:&v697 forKeys:&v696 count:1];
  v721[11] = v18;
  v720[12] = @"ClientEraseAll";
  v694 = v2;
  v695 = @"ClientEraseDecideStagingClient";
  v17 = [NSDictionary dictionaryWithObjects:&v695 forKeys:&v694 count:1];
  v721[12] = v17;
  v720[13] = @"JobFailedToStart";
  v692[0] = v3;
  v692[1] = v2;
  v693[0] = @"NothingAvailable";
  v693[1] = @"RemoveAllReplyErased";
  v16 = [NSDictionary dictionaryWithObjects:v693 forKeys:v692 count:2];
  v721[13] = v16;
  v720[14] = @"JobDownloadForStagingProgress";
  v690 = v2;
  v691 = v4;
  v5 = [NSDictionary dictionaryWithObjects:&v691 forKeys:&v690 count:1];
  v721[14] = v5;
  v720[15] = @"JobDownloadForStagingSuccess";
  v688[0] = v3;
  v688[1] = v2;
  v689[0] = @"NothingAvailable";
  v689[1] = @"RemoveAllReplyErased";
  v6 = [NSDictionary dictionaryWithObjects:v689 forKeys:v688 count:2];
  v721[15] = v6;
  v720[16] = @"JobDownloadForStagingFailure";
  v686[0] = v3;
  v686[1] = v2;
  v687[0] = @"NothingAvailable";
  v687[1] = @"RemoveAllReplyErased";
  v7 = [NSDictionary dictionaryWithObjects:v687 forKeys:v686 count:2];
  v721[16] = v7;
  v720[17] = @"TimerFiredDetermining";
  v684 = v2;
  v685 = v4;
  v8 = [NSDictionary dictionaryWithObjects:&v685 forKeys:&v684 count:1];
  v721[17] = v8;
  v720[18] = @"EliminateCurrentJob";
  v682 = v2;
  v683 = v4;
  v9 = [NSDictionary dictionaryWithObjects:&v683 forKeys:&v682 count:1];
  v721[18] = v9;
  v720[19] = @"PurgeAcceptedRemoveDownloaded";
  v680 = v2;
  v681 = v4;
  v10 = [NSDictionary dictionaryWithObjects:&v681 forKeys:&v680 count:1];
  v721[19] = v10;
  v720[20] = @"PurgeAcceptedRemoveAll";
  v678 = v2;
  v679 = v4;
  v11 = [NSDictionary dictionaryWithObjects:&v679 forKeys:&v678 count:1];
  v721[20] = v11;
  v720[21] = @"PurgeEraseAcceptedRemoveAll";
  v676 = v2;
  v677 = v4;
  v12 = [NSDictionary dictionaryWithObjects:&v677 forKeys:&v676 count:1];
  v721[21] = v12;
  v13 = [NSDictionary dictionaryWithObjects:v721 forKeys:v720 count:22];
  v2013[27] = v13;
  v139 = [NSDictionary dictionaryWithObjects:v2013 forKeys:v2012 count:28];

  v14 = [[NSDictionary alloc] initWithDictionary:v139 copyItems:1];

  return v14;
}

- (int64_t)performAction:(id)action onEvent:(id)event inState:(id)state withInfo:(id)info nextState:(id)nextState error:(id *)error
{
  actionCopy = action;
  infoCopy = info;
  if (([actionCopy isEqualToString:kSUCoreFSMActionNoOp] & 1) == 0)
  {
    if ([actionCopy isEqualToString:@"LoadDecideNewOSPromote"])
    {
      v14 = [(MADAutoAssetStager *)self action_LoadDecideNewOSPromote:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"LoadPersistedDecideResume"])
    {
      v14 = [(MADAutoAssetStager *)self action_LoadPersistedDecideResume:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ControlUnstagedDecideCancelJob"])
    {
      v14 = [(MADAutoAssetStager *)self action_ControlUnstagedDecideCancelJob:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ControlUnstagedDecideRemoveAll"])
    {
      v14 = [(MADAutoAssetStager *)self action_ControlUnstagedDecideRemoveAll:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientCheckLatchGroupsDetermine"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientCheckLatchGroupsDetermine:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientCheckGroupsDecideAlreadyDetermined"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientCheckGroupsDecideAlreadyDetermined:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientCheckGroupsReplyAlreadyDetermined"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientCheckGroupsReplyAlreadyDetermined:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientAcceptAllDetermine"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientAcceptAllDetermine:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientPurgeDecideStagingClient"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientPurgeDecideStagingClient:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientEraseDecideStagingClient"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientEraseDecideStagingClient:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientContinueUsingLatestRequest"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientContinueUsingLatestRequest:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientRequestAlreadyDownloaded"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientRequestAlreadyDownloaded:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientAcceptNextAvailableBeginDownload"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientAcceptNextAvailableBeginDownload:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientAcceptCancelActiveJob"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientAcceptCancelActiveJob:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientAcceptEraseCancelActiveJob"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientAcceptEraseCancelActiveJob:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientAcceptEraseActiveJob"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientAcceptEraseActiveJob:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientAcceptRemoveAllReplyPurged"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientAcceptRemoveAllReplyPurged:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientAcceptRemoveAllReplyErased"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientAcceptRemoveAllReplyErased:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientNothingStaged"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientNothingStaged:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientHaveStagedContent"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientHaveStagedContent:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientNewerReplyEmptyDetermine"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientNewerReplyEmptyDetermine:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientNewerReplySameOrEmptyDetermine"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientNewerReplySameOrEmptyDetermine:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientNewerReplySameOrEmptyDownload"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientNewerReplySameOrEmptyDownload:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientNewerReplyEmptyDownload"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientNewerReplyEmptyDownload:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientDecideGroupTargetAvailable"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientDecideGroupTargetAvailable:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientInvalidStagingPhase"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientInvalidStagingPhase:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientFailAlreadyDetermining"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientFailAlreadyDetermining:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientFailGroupDetermining"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientFailGroupDetermining:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientFailByGroupAlreadyDownloading"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientFailByGroupAlreadyDownloading:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientFailNoGroupsStaged"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientFailNoGroupsStaged:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientFailWrongMode"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientFailWrongMode:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"ClientCancelDesireForCompletion"])
    {
      v14 = [(MADAutoAssetStager *)self action_ClientCancelDesireForCompletion:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"RequestAlreadyDownloaded"])
    {
      v14 = [(MADAutoAssetStager *)self action_RequestAlreadyDownloaded:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"AddToAvailableDecideMoreCandidates"])
    {
      v14 = [(MADAutoAssetStager *)self action_AddToAvailableDecideMoreCandidates:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"AddToAvailableDecideRequiredAvailable"])
    {
      v14 = [(MADAutoAssetStager *)self action_AddToAvailableDecideRequiredAvailable:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"IgnoreFailureDecideRequiredAvailable"])
    {
      v14 = [(MADAutoAssetStager *)self action_IgnoreFailureDecideRequiredAvailable:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"DecideMoreCandidates"])
    {
      v14 = [(MADAutoAssetStager *)self action_DecideMoreCandidates:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"DecideHaveAvailableOtherTargets"])
    {
      v14 = [(MADAutoAssetStager *)self action_DecideHaveAvailableOtherTargets:infoCopy error:error];
    }

    else if ([actionCopy isEqualToString:@"DecideHaveRequiredCandidates"])
    {
      v14 = [(MADAutoAssetStager *)self action_DecideHaveRequiredCandidates:infoCopy error:error];
    }

    else
    {
      if (![actionCopy isEqualToString:@"DecideMoreOptionalAvailable"])
      {
        if ([actionCopy isEqualToString:@"DoneCandidatesRequiredDecideOptional"])
        {
          v14 = [(MADAutoAssetStager *)self action_DoneCandidatesRequiredDecideOptional:infoCopy error:error];
          goto LABEL_189;
        }

        if ([actionCopy isEqualToString:@"DecideRequiredErrorBlocksOTA"])
        {
          v14 = [(MADAutoAssetStager *)self action_DecideRequiredErrorBlocksOTA:infoCopy error:error];
          goto LABEL_189;
        }

        if ([actionCopy isEqualToString:@"FailRequiredDetermineBlocksOTA"])
        {
          v14 = [(MADAutoAssetStager *)self action_FailRequiredDetermineBlocksOTA:infoCopy error:error];
          goto LABEL_189;
        }

        if ([actionCopy isEqualToString:@"ReportStagingProgressToClient"])
        {
          v14 = [(MADAutoAssetStager *)self action_ReportStagingProgressToClient:infoCopy error:error];
          goto LABEL_189;
        }

        if ([actionCopy isEqualToString:@"DecideMoreRequiredAvailable"])
        {
          v14 = [(MADAutoAssetStager *)self action_DecideMoreRequiredAvailable:infoCopy error:error];
          goto LABEL_189;
        }

        if ([actionCopy isEqualToString:@"AddToStaged"])
        {
          v14 = [(MADAutoAssetStager *)self action_AddToStaged:infoCopy error:error];
          goto LABEL_189;
        }

        if ([actionCopy isEqualToString:@"AddToStagedDecideMoreAvailable"])
        {
          v14 = [(MADAutoAssetStager *)self action_AddToStagedDecideMoreAvailable:infoCopy error:error];
          goto LABEL_189;
        }

        if (![actionCopy isEqualToString:@"DecideMoreOptionalAvailable"])
        {
          if ([actionCopy isEqualToString:@"DecideMoreAvailable"])
          {
            v14 = [(MADAutoAssetStager *)self action_DecideMoreAvailable:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ClientContinueRestartingMaxDetermining"])
          {
            v14 = [(MADAutoAssetStager *)self action_ClientContinueRestartingMaxDetermining:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"AddToAvailableDecideAnyAvailable"])
          {
            v14 = [(MADAutoAssetStager *)self action_AddToAvailableDecideAnyAvailable:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"DecideTimerDeterminingValid"])
          {
            v14 = [(MADAutoAssetStager *)self action_DecideTimerDeterminingValid:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"FormCandidatesDecideDetermine"])
          {
            v14 = [(MADAutoAssetStager *)self action_FormCandidatesDecideDetermine:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"DoneCandidatesDecideAnyAvailable"])
          {
            v14 = [(MADAutoAssetStager *)self action_DoneCandidatesDecideAnyAvailable:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"NextCandidateBeginDetermine"])
          {
            v14 = [(MADAutoAssetStager *)self action_NextCandidateBeginDetermine:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"NextAwaitingBeginDownload"])
          {
            v14 = [(MADAutoAssetStager *)self action_NextAwaitingBeginDownload:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"DoneAvailableDecideAnyStaged"])
          {
            v14 = [(MADAutoAssetStager *)self action_DoneAvailableDecideAnyStaged:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyHaveAvailable"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyHaveAvailable:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyNoCandidates"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyNoCandidates:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyNoCandidatesPurgeAll"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyNoCandidatesPurgeAll:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyNoCandidatesEraseAll"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyNoCandidatesEraseAll:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyNothingStaged"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyNothingStaged:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyNothingStagedPurgeAll"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyNothingStagedPurgeAll:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyNothingStagedEraseAll"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyNothingStagedEraseAll:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyHaveStaged"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyHaveStaged:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyFailRequiredDownload"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyFailRequiredDownload:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyNoCandidatesHaveOtherTarget"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyNoCandidatesHaveOtherTarget:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"ReplyTargetNotAvailable"])
          {
            v14 = [(MADAutoAssetStager *)self action_ReplyTargetNotAvailable:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"RemoveAllReplyPurged"])
          {
            v14 = [(MADAutoAssetStager *)self action_RemoveAllReplyPurged:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"RemoveAllReplyErased"])
          {
            v14 = [(MADAutoAssetStager *)self action_RemoveAllReplyErased:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"RemoveAllReplyCanceled"])
          {
            v14 = [(MADAutoAssetStager *)self action_RemoveAllReplyCanceled:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"CancelActiveJob"])
          {
            v14 = [(MADAutoAssetStager *)self action_CancelActiveJob:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"EliminateDone"])
          {
            v14 = [(MADAutoAssetStager *)self action_EliminateDone:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetEliminateDone"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetEliminateDone:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"RememberEliminateDone"])
          {
            v14 = [(MADAutoAssetStager *)self action_RememberEliminateDone:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"RememberSetEliminateDone"])
          {
            v14 = [(MADAutoAssetStager *)self action_RememberSetEliminateDone:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"EliminateDecideMatch"])
          {
            v14 = [(MADAutoAssetStager *)self action_EliminateDecideMatch:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetEliminateDecideMatch"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetEliminateDecideMatch:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"EliminateDeterminingDecideMatch"])
          {
            v14 = [(MADAutoAssetStager *)self action_EliminateDeterminingDecideMatch:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetEliminateDeterminingDecideMatch"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetEliminateDeterminingDecideMatch:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"EliminateAvailableDecideEmpty"])
          {
            v14 = [(MADAutoAssetStager *)self action_EliminateAvailableDecideEmpty:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetEliminateAvailableDecideEmpty"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetEliminateAvailableDecideEmpty:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"EliminateDoneDecideMoreDownload"])
          {
            v14 = [(MADAutoAssetStager *)self action_EliminateDoneDecideMoreDownload:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"EliminateDoneStagedDecideEmpty"])
          {
            v14 = [(MADAutoAssetStager *)self action_EliminateDoneStagedDecideEmpty:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetEliminateDoneStagedDecideEmpty"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetEliminateDoneStagedDecideEmpty:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"EliminateCancelActiveJob"])
          {
            v14 = [(MADAutoAssetStager *)self action_EliminateCancelActiveJob:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"AlteredInvalAllAvailable"])
          {
            v14 = [(MADAutoAssetStager *)self action_AlteredInvalAllAvailable:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetTargetInvalAllAvailable"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetTargetInvalAllAvailable:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"AlteredInvalAllAvailableCancelActiveJob"])
          {
            v14 = [(MADAutoAssetStager *)self action_AlteredInvalAllAvailableCancelActiveJob:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetTargetInvalAllAvailableCancelActiveJob"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetTargetInvalAllAvailableCancelActiveJob:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"AlteredDecideSameSetConfiguration"])
          {
            v14 = [(MADAutoAssetStager *)self action_AlteredDecideSameSetConfiguration:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"SetTargetDecideSameTarget"])
          {
            v14 = [(MADAutoAssetStager *)self action_SetTargetDecideSameTarget:infoCopy error:error];
          }

          else if ([actionCopy isEqualToString:@"UpdateStagedSituation"])
          {
            v14 = [(MADAutoAssetStager *)self action_UpdateStagedSituation:infoCopy error:error];
          }

          else
          {
            v14 = [(MADAutoAssetStager *)self actionUnknownAction:actionCopy error:error];
          }

          goto LABEL_189;
        }
      }

      v14 = [(MADAutoAssetStager *)self action_DecideMoreOptionalAvailable:infoCopy error:error];
    }

LABEL_189:
    v13 = v14;
    goto LABEL_190;
  }

  v13 = 0;
LABEL_190:

  return v13;
}

- (MADAutoAssetStager)init
{
  v109.receiver = self;
  v109.super_class = MADAutoAssetStager;
  v2 = [(MADAutoAssetStager *)&v109 init];
  if (v2)
  {
    v3 = +[MADAutoAssetControlManager preferenceAsIfBootedOSIsOSVersion];
    v4 = +[MADAutoAssetControlManager preferenceAsIfBootedOSIsBuildVersion];
    _getAutoAssetStagerStateTable = [objc_opt_class() _getAutoAssetStagerStateTable];
    v6 = *(v2 + 3);
    *(v2 + 3) = _getAutoAssetStagerStateTable;

    v7 = *(v2 + 9);
    *(v2 + 9) = @"INIT";

    v8 = *(v2 + 10);
    *(v2 + 10) = 0;

    v9 = *(v2 + 11);
    *(v2 + 11) = 0;

    v10 = *(v2 + 12);
    *(v2 + 12) = 0;

    v11 = *(v2 + 13);
    *(v2 + 13) = 0;

    v12 = *(v2 + 14);
    *(v2 + 14) = 0;

    v13 = *(v2 + 15);
    *(v2 + 15) = 0;

    *(v2 + 4) = 0;
    v2[10] = 0;
    *(v2 + 8) = 0u;
    *(v2 + 9) = 0u;
    *(v2 + 10) = 0u;
    *(v2 + 22) = 0;
    if (v3)
    {
      v14 = v3;
      v15 = *(v2 + 23);
      *(v2 + 23) = v14;
    }

    else
    {
      v15 = +[SUCoreDevice sharedDevice];
      productVersion = [v15 productVersion];
      v17 = *(v2 + 23);
      *(v2 + 23) = productVersion;
    }

    if (v4)
    {
      v18 = v4;
    }

    else
    {
      v18 = deviceOSBuildVersion();
    }

    v19 = *(v2 + 24);
    *(v2 + 24) = v18;

    *(v2 + 11) = 0;
    v2[13] = 0;
    v2[14] = +[MADAutoAssetControlManager preferenceAlwaysPromoteStagedAssets];
    v20 = *(v2 + 25);
    *(v2 + 25) = 0;

    v21 = *(v2 + 26);
    *(v2 + 26) = 0;

    v22 = *(v2 + 27);
    *(v2 + 27) = 0;

    v23 = *(v2 + 28);
    *(v2 + 28) = 0;

    v24 = *(v2 + 29);
    *(v2 + 29) = 0;

    v25 = *(v2 + 31);
    *(v2 + 31) = 0;

    v26 = objc_alloc_init(NSMutableDictionary);
    v27 = *(v2 + 32);
    *(v2 + 32) = v26;

    v28 = *(v2 + 33);
    *(v2 + 33) = 0;

    v29 = *(v2 + 34);
    *(v2 + 34) = 0;

    v30 = *(v2 + 35);
    *(v2 + 35) = 0;

    v31 = *(v2 + 37);
    *(v2 + 37) = 0;

    v32 = *(v2 + 38);
    *(v2 + 38) = 0;

    v33 = *(v2 + 39);
    *(v2 + 39) = 0;

    v34 = *(v2 + 40);
    *(v2 + 40) = 0;

    v35 = *(v2 + 41);
    *(v2 + 41) = 0;

    v36 = *(v2 + 42);
    *(v2 + 42) = 0;

    v37 = objc_alloc_init(NSMutableDictionary);
    v38 = *(v2 + 43);
    *(v2 + 43) = v37;

    v39 = objc_alloc_init(NSMutableDictionary);
    v40 = *(v2 + 44);
    *(v2 + 44) = v39;

    v41 = objc_alloc_init(NSMutableArray);
    v42 = *(v2 + 45);
    *(v2 + 45) = v41;

    v43 = objc_alloc_init(NSMutableDictionary);
    v44 = *(v2 + 46);
    *(v2 + 46) = v43;

    v45 = objc_alloc_init(NSMutableDictionary);
    v46 = *(v2 + 47);
    *(v2 + 47) = v45;

    v47 = objc_alloc_init(NSMutableArray);
    v48 = *(v2 + 48);
    *(v2 + 48) = v47;

    v49 = objc_alloc_init(NSCache);
    v50 = *(v2 + 49);
    *(v2 + 49) = v49;

    v51 = objc_alloc_init(NSMutableDictionary);
    v52 = *(v2 + 50);
    *(v2 + 50) = v51;

    v53 = objc_alloc_init(NSMutableArray);
    v54 = *(v2 + 51);
    *(v2 + 51) = v53;

    v55 = objc_alloc_init(NSMutableDictionary);
    v56 = *(v2 + 52);
    *(v2 + 52) = v55;

    v57 = objc_alloc_init(NSMutableDictionary);
    v58 = *(v2 + 53);
    *(v2 + 53) = v57;

    v59 = objc_alloc_init(NSMutableDictionary);
    v60 = *(v2 + 54);
    *(v2 + 54) = v59;

    v61 = objc_alloc_init(NSMutableArray);
    v62 = *(v2 + 55);
    *(v2 + 55) = v61;

    v63 = objc_alloc_init(NSMutableArray);
    v64 = *(v2 + 56);
    *(v2 + 56) = v63;

    v65 = objc_alloc_init(NSMutableDictionary);
    v66 = *(v2 + 57);
    *(v2 + 57) = v65;

    *(v2 + 58) = 0;
    *(v2 + 59) = 0;
    *(v2 + 60) = 0;
    v67 = objc_alloc_init(NSMutableDictionary);
    v68 = *(v2 + 62);
    *(v2 + 62) = v67;

    v69 = *(v2 + 63);
    *(v2 + 63) = 0;

    v70 = objc_alloc_init(NSMutableDictionary);
    v71 = *(v2 + 64);
    *(v2 + 64) = v70;

    v72 = objc_alloc_init(MANAutoAssetControlStatisticsByCommand);
    v73 = *(v2 + 65);
    *(v2 + 65) = v72;

    v74 = objc_alloc_init(MANAutoAssetControlStatisticsByCommand);
    v75 = *(v2 + 66);
    *(v2 + 66) = v74;

    v76 = objc_alloc_init(MANAutoAssetControlStatisticsBySize);
    v77 = *(v2 + 67);
    *(v2 + 67) = v76;

    v78 = objc_alloc_init(MANAutoAssetControlStatisticsBySize);
    v79 = *(v2 + 68);
    *(v2 + 68) = v78;

    *(v2 + 15) = 0;
    v2[17] = 0;
    v80 = *(v2 + 69);
    *(v2 + 69) = @"NONE";

    v2[18] = 0;
    v81 = +[MADAnalyticsManager getAnalyticsManager];
    v82 = *(v2 + 36);
    *(v2 + 36) = v81;

    v83 = [SUCoreFSM alloc];
    v84 = [[NSString alloc] initWithFormat:@"[%@]AutoAssetStager", @"2.5.3"];
    v85 = [v83 initMachine:v84 withTable:*(v2 + 3) startingIn:@"ReadyToLoad" usingDelegate:v2 registeringAllInfoClass:objc_opt_class()];
    v86 = *(v2 + 4);
    *(v2 + 4) = v85;

    if (*(v2 + 4))
    {
      v87 = [MADAutoAssetPersisted alloc];
      extendedStateQueue = [*(v2 + 4) extendedStateQueue];
      v89 = [(MADAutoAssetPersisted *)v87 initForModule:@"AutoAssetStager" ofModuleVersion:@"1.1" usingDispatchQueue:extendedStateQueue loggingByName:0 withVersionMigrator:&__block_literal_global_7];
      v90 = *(v2 + 5);
      *(v2 + 5) = v89;

      v91 = [MADAutoAssetPersisted alloc];
      extendedStateQueue2 = [*(v2 + 4) extendedStateQueue];
      v93 = [(MADAutoAssetPersisted *)v91 initForModule:@"AutoStagerTargetLookupResults" ofModuleVersion:@"1.0" usingDispatchQueue:extendedStateQueue2 loggingByName:0 withVersionMigrator:&__block_literal_global_1810];
      v94 = *(v2 + 6);
      *(v2 + 6) = v93;

      v95 = [MADAutoAssetPersisted alloc];
      extendedStateQueue3 = [*(v2 + 4) extendedStateQueue];
      v97 = [(MADAutoAssetPersisted *)v95 initForModule:@"AutoStagerSetLookupResults" ofModuleVersion:@"1.0" usingDispatchQueue:extendedStateQueue3 loggingByName:0 withVersionMigrator:&__block_literal_global_1815];
      v98 = *(v2 + 7);
      *(v2 + 7) = v97;

      v99 = [MADAutoAssetPersisted alloc];
      extendedStateQueue4 = [*(v2 + 4) extendedStateQueue];
      v101 = [(MADAutoAssetPersisted *)v99 initForModule:@"AutoStagerTargetAvailable" ofModuleVersion:@"1.0" usingDispatchQueue:extendedStateQueue4 loggingByName:0 withVersionMigrator:&__block_literal_global_1820];
      v102 = *(v2 + 8);
      *(v2 + 8) = v101;

      extendedStateQueue5 = [*(v2 + 4) extendedStateQueue];
      block[0] = _NSConcreteStackBlock;
      block[1] = 3221225472;
      block[2] = __26__MADAutoAssetStager_init__block_invoke_5;
      block[3] = &unk_4B2AA0;
      v107 = v2;
      dispatch_sync(extendedStateQueue5, block);

      v104 = v107;
    }

    else
    {
      v104 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v104, OS_LOG_TYPE_ERROR))
      {
        *buf = 0;
        _os_log_impl(&dword_0, v104, OS_LOG_TYPE_ERROR, "{init} failed to initialize AutoAssetStager FSM", buf, 2u);
      }
    }
  }

  return v2;
}

id __26__MADAutoAssetStager_init__block_invoke_5(uint64_t a1)
{
  *(*(a1 + 32) + 19) = 1;
  [*(*(a1 + 32) + 40) flushPersistedStateCacheAndSetCachingBehaviour:*(*(a1 + 32) + 19)];
  [*(*(a1 + 32) + 48) flushPersistedStateCacheAndSetCachingBehaviour:*(*(a1 + 32) + 19)];
  [*(*(a1 + 32) + 56) flushPersistedStateCacheAndSetCachingBehaviour:*(*(a1 + 32) + 19)];
  [*(*(a1 + 32) + 64) flushPersistedStateCacheAndSetCachingBehaviour:*(*(a1 + 32) + 19)];
  v2 = *(*(a1 + 32) + 392);

  return [v2 removeAllObjects];
}

+ (id)autoAssetStager
{
  if (autoAssetStager_dispatchOnceAutoAssetLocker != -1)
  {
    +[MADAutoAssetStager autoAssetStager];
  }

  v3 = autoAssetStager___autoAssetStager;

  return v3;
}

void __37__MADAutoAssetStager_autoAssetStager__block_invoke(id a1)
{
  autoAssetStager___autoAssetStager = objc_alloc_init(MADAutoAssetStager);

  _objc_release_x1();
}

+ (void)clientDetermineGroupsAvailable:(id)available
{
  availableCopy = available;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithStagingClientRequest:availableCopy];
    [autoStagerFSM postEvent:@"ClientDetermineGroupsAvailable" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{clientDetermineGroupsAvailable} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)clientDetermineAllAvailable:(id)available
{
  availableCopy = available;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithStagingClientRequest:availableCopy];
    [autoStagerFSM postEvent:@"ClientDetermineAllAvailable" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{clientDetermineAllAvailable} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)clientDownloadGroups:(id)groups withAlreadyDownloadedDescriptors:(id)descriptors
{
  groupsCopy = groups;
  descriptorsCopy = descriptors;
  v7 = +[MADAutoAssetStager autoAssetStager];
  if (v7)
  {
    if (groupsCopy)
    {
      clientRequestMessage = [groupsCopy clientRequestMessage];
      if (clientRequestMessage)
      {
        v9 = clientRequestMessage;
        clientRequestMessage2 = [groupsCopy clientRequestMessage];
        message = [clientRequestMessage2 message];

        if (message)
        {
          clientRequestMessage3 = [groupsCopy clientRequestMessage];
          message2 = [clientRequestMessage3 message];

          v14 = [message2 safeObjectForKey:@"desire" ofClass:objc_opt_class()];
          v15 = v14;
          if (v14)
          {
            if ([v14 lockWaitTimeoutSecs])
            {
              v16 = @"ClientDownloadGroupsAvailable";
            }

            else
            {
              v16 = @"ClientDownloadAlreadyStaged";
            }

            autoStagerFSM = [v7 autoStagerFSM];
            v18 = [[MADAutoAssetStagerParam alloc] initWithStagingClientRequest:groupsCopy withAlreadyDownloadedDescriptors:descriptorsCopy];
            [autoStagerFSM postEvent:v16 withInfo:v18];

            goto LABEL_13;
          }

          summary3 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(summary3, OS_LOG_TYPE_ERROR))
          {
            summary = [v7 summary];
            summary2 = [groupsCopy summary];
            v22 = 138543618;
            v23 = summary;
            v24 = 2114;
            v25 = summary2;
            _os_log_impl(&dword_0, summary3, OS_LOG_TYPE_ERROR, "%{public}@ | {clientDownloadGroups} staging-client-request without desire | clientRequest:%{public}@", &v22, 0x16u);
          }

LABEL_12:

LABEL_13:
          goto LABEL_16;
        }
      }
    }

    v15 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v15, OS_LOG_TYPE_ERROR))
    {
      message2 = [v7 summary];
      summary3 = [groupsCopy summary];
      v22 = 138543618;
      v23 = message2;
      v24 = 2114;
      v25 = summary3;
      _os_log_impl(&dword_0, v15, OS_LOG_TYPE_ERROR, "%{public}@ | {clientDownloadGroups} no staging-client-request message | clientRequest:%{public}@", &v22, 0x16u);
      goto LABEL_12;
    }
  }

  else
  {
    v15 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v15, OS_LOG_TYPE_ERROR))
    {
      LOWORD(v22) = 0;
      _os_log_impl(&dword_0, v15, OS_LOG_TYPE_ERROR, "{clientDownloadGroups} failed to locate shared AutoAssetStager", &v22, 2u);
    }
  }

LABEL_16:
}

+ (void)clientDownloadAll:(id)all
{
  allCopy = all;
  v4 = +[MADAutoAssetStager autoAssetStager];
  if (v4)
  {
    if (allCopy)
    {
      clientRequestMessage = [allCopy clientRequestMessage];
      if (clientRequestMessage)
      {
        v6 = clientRequestMessage;
        clientRequestMessage2 = [allCopy clientRequestMessage];
        message = [clientRequestMessage2 message];

        if (message)
        {
          clientRequestMessage3 = [allCopy clientRequestMessage];
          message2 = [clientRequestMessage3 message];

          v11 = [message2 safeObjectForKey:@"desire" ofClass:objc_opt_class()];
          v12 = v11;
          if (v11)
          {
            if ([v11 lockWaitTimeoutSecs])
            {
              v13 = @"ClientDownloadAllAvailable";
            }

            else
            {
              v13 = @"ClientDownloadAlreadyStaged";
            }

            autoStagerFSM = [v4 autoStagerFSM];
            v15 = [[MADAutoAssetStagerParam alloc] initWithStagingClientRequest:allCopy];
            [autoStagerFSM postEvent:v13 withInfo:v15];

            goto LABEL_13;
          }

          summary3 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(summary3, OS_LOG_TYPE_ERROR))
          {
            summary = [v4 summary];
            summary2 = [allCopy summary];
            v19 = 138543618;
            v20 = summary;
            v21 = 2114;
            v22 = summary2;
            _os_log_impl(&dword_0, summary3, OS_LOG_TYPE_ERROR, "%{public}@ | {clientDownloadAll} staging-client-request without desire | clientRequest:%{public}@", &v19, 0x16u);
          }

LABEL_12:

LABEL_13:
          goto LABEL_16;
        }
      }
    }

    v12 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v12, OS_LOG_TYPE_ERROR))
    {
      message2 = [v4 summary];
      summary3 = [allCopy summary];
      v19 = 138543618;
      v20 = message2;
      v21 = 2114;
      v22 = summary3;
      _os_log_impl(&dword_0, v12, OS_LOG_TYPE_ERROR, "%{public}@ | {clientDownloadAll} no staging-client-request message | clientRequest:%{public}@", &v19, 0x16u);
      goto LABEL_12;
    }
  }

  else
  {
    v12 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v12, OS_LOG_TYPE_ERROR))
    {
      LOWORD(v19) = 0;
      _os_log_impl(&dword_0, v12, OS_LOG_TYPE_ERROR, "{clientDownloadAll} failed to locate shared AutoAssetStager", &v19, 2u);
    }
  }

LABEL_16:
}

+ (void)clientCancelOperation:(id)operation
{
  operationCopy = operation;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithStagingClientRequest:operationCopy];
    [autoStagerFSM postEvent:@"ClientCancelCompletion" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{clientCancelOperation} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)clientPurgeAll:(id)all
{
  allCopy = all;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithStagingClientRequest:allCopy];
    [autoStagerFSM postEvent:@"ClientPurgeAll" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{clientPurgeAll} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)clientEraseAll:(id)all
{
  allCopy = all;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithStagingClientRequest:allCopy];
    [autoStagerFSM postEvent:@"ClientEraseAll" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{clientEraseAll} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)autoAssetStagerJobFailedToStart:(id)start
{
  startCopy = start;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithJobInformation:0 withDownloadedDescriptor:0 withOperationError:startCopy];
    [autoStagerFSM postEvent:@"JobFailedToStart" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{autoAssetStagerJobFailedToStart} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)autoAssetStagerJobDetermineDone:(id)done withBaseForStagingDescriptors:(id)descriptors withDetermineError:(id)error
{
  doneCopy = done;
  descriptorsCopy = descriptors;
  errorCopy = error;
  v10 = +[MADAutoAssetStager autoAssetStager];
  if (v10)
  {
    v11 = [[MADAutoAssetStagerParam alloc] initWithAutoAssetCatalog:doneCopy withBaseForStagingDescriptors:descriptorsCopy withOperationError:errorCopy];
    p_super = &v11->super;
    if (doneCopy)
    {
      v53 = v11;
      v54 = descriptorsCopy;
      v62 = v10;
      v63 = doneCopy;
      v59 = errorCopy;
      if (errorCopy)
      {
        v72 = 0uLL;
        v73 = 0uLL;
        v70 = 0uLL;
        v71 = 0uLL;
        obj = descriptorsCopy;
        v60 = [obj countByEnumeratingWithState:&v70 objects:v76 count:16];
        if (v60)
        {
          v57 = *v71;
          do
          {
            for (i = 0; i != v60; i = i + 1)
            {
              if (*v71 != v57)
              {
                objc_enumerationMutation(obj);
              }

              v14 = *(*(&v70 + 1) + 8 * i);
              metadata = [v14 metadata];
              v16 = [metadata objectForKey:@"_DownloadSize"];
              unsignedLongLongValue = [v16 unsignedLongLongValue];

              v64 = [doneCopy objectForKey:@"AssetId"];
              v18 = [MAAutoAssetSelector alloc];
              assetType = [v14 assetType];
              assetSpecifier = [v14 assetSpecifier];
              assetVersion = [v14 assetVersion];
              v22 = [v18 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];
              assetTargetOSVersion = [v10 assetTargetOSVersion];
              assetTargetBuildVersion = [v10 assetTargetBuildVersion];
              if ([v14 isPreSUStagingRequired])
              {
                v25 = 0;
              }

              else
              {
                v25 = unsignedLongLongValue;
              }

              if (![v14 isPreSUStagingRequired])
              {
                unsignedLongLongValue = 0;
              }

              LOBYTE(v52) = [v14 isPreSUStagingRequired];
              [MADAutoAssetHistory recordFailedOperation:1101 fromLayer:4 forAssetID:v64 withSelector:v22 failingWithError:v59 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion withOptionalCount:v25 withRequiredCount:unsignedLongLongValue isRequired:v52];

              v10 = v62;
              doneCopy = v63;
            }

            v60 = [obj countByEnumeratingWithState:&v70 objects:v76 count:16];
          }

          while (v60);
        }
      }

      else
      {
        v68 = 0uLL;
        v69 = 0uLL;
        v66 = 0uLL;
        v67 = 0uLL;
        obja = descriptorsCopy;
        v61 = [obja countByEnumeratingWithState:&v66 objects:v75 count:16];
        if (v61)
        {
          v58 = *v67;
          do
          {
            for (j = 0; j != v61; j = j + 1)
            {
              if (*v67 != v58)
              {
                objc_enumerationMutation(obja);
              }

              v27 = *(*(&v66 + 1) + 8 * j);
              metadata2 = [v27 metadata];
              v29 = [metadata2 objectForKey:@"_DownloadSize"];
              unsignedLongLongValue2 = [v29 unsignedLongLongValue];

              v65 = [doneCopy objectForKey:@"AssetId"];
              v31 = [MAAutoAssetSelector alloc];
              v32 = [doneCopy objectForKey:@"AssetType"];
              assetSpecifier2 = [v27 assetSpecifier];
              assetVersion2 = [v27 assetVersion];
              v35 = [v31 initForAssetType:v32 withAssetSpecifier:assetSpecifier2 matchingAssetVersion:assetVersion2];
              assetTargetOSVersion2 = [v10 assetTargetOSVersion];
              assetTargetBuildVersion2 = [v10 assetTargetBuildVersion];
              if ([v27 isPreSUStagingRequired])
              {
                v38 = 0;
              }

              else
              {
                v38 = unsignedLongLongValue2;
              }

              if (![v27 isPreSUStagingRequired])
              {
                unsignedLongLongValue2 = 0;
              }

              LOBYTE(v52) = [v27 isPreSUStagingRequired];
              [MADAutoAssetHistory recordOperation:1101 toHistoryType:4 fromLayer:4 forAssetID:v65 withSelector:v35 forTargetOSVersion:assetTargetOSVersion2 forTargetBuildVersion:assetTargetBuildVersion2 withOptionalCount:v38 withRequiredCount:unsignedLongLongValue2 isRequired:v52];

              v10 = v62;
              doneCopy = v63;
            }

            v61 = [obja countByEnumeratingWithState:&v66 objects:v75 count:16];
          }

          while (v61);
        }
      }

      descriptorsCopy = v54;

      errorCopy = v59;
      p_super = &v53->super;
    }

    if (errorCopy)
    {
      v39 = @"JobDetermineAvailableFailure";
    }

    else
    {
      v40 = +[MADAutoAssetControlManager preferenceSimulatedStagingLookupFailureResult];
      if (v40 < 1)
      {
        v39 = @"JobDetermineAvailableSuccess";
      }

      else
      {
        v41 = v40;
        v42 = errorStringForMADownloadResult(v40);
        v43 = [NSString stringWithFormat:@"end of set-lookup with simulated error: %@(%ld)", v42, v41];

        v49 = MAErrorForDownloadResultWithUnderlying(v41, 0, @"%@", v44, v45, v46, v47, v48, v43);
        v50 = [[MADAutoAssetStagerParam alloc] initWithAutoAssetCatalog:doneCopy withBaseForStagingDescriptors:descriptorsCopy withOperationError:v49];

        v39 = @"JobDetermineAvailableFailure";
        p_super = &v50->super;
      }
    }

    autoStagerFSM = [v10 autoStagerFSM];
    [autoStagerFSM postEvent:v39 withInfo:p_super];
  }

  else
  {
    p_super = _MADLog(@"AutoStager");
    if (os_log_type_enabled(p_super, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, p_super, OS_LOG_TYPE_ERROR, "{autoAssetStagerJobDetermineDone} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }
}

+ (void)autoAssetStagerJobDownloadProgress:(id)progress withProgressError:(id)error
{
  progressCopy = progress;
  errorCopy = error;
  v7 = +[MADAutoAssetStager autoAssetStager];
  v8 = v7;
  if (v7)
  {
    autoStagerFSM = [v7 autoStagerFSM];
    v10 = [[MADAutoAssetStagerParam alloc] initWithJobInformation:progressCopy withDownloadedDescriptor:0 withOperationError:errorCopy];
    [autoStagerFSM postEvent:@"JobDownloadForStagingProgress" withInfo:v10];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v11 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{autoAssetStagerJobDownloadProgress} failed to locate shared AutoAssetStager", v11, 2u);
    }
  }
}

+ (void)autoAssetStagerJobDownloadDone:(id)done withDownloadedDescriptor:(id)descriptor withDownloadError:(id)error
{
  doneCopy = done;
  descriptorCopy = descriptor;
  errorCopy = error;
  v10 = +[MADAutoAssetStager autoAssetStager];
  if (v10)
  {
    v28 = doneCopy;
    metadata = [descriptorCopy metadata];
    v12 = [metadata objectForKey:@"_DownloadSize"];
    unsignedLongLongValue = [v12 unsignedLongLongValue];

    assetId = [descriptorCopy assetId];
    v14 = [MAAutoAssetSelector alloc];
    assetType = [descriptorCopy assetType];
    assetSpecifier = [descriptorCopy assetSpecifier];
    assetVersion = [descriptorCopy assetVersion];
    v26 = assetType;
    v18 = [v14 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];
    assetTargetOSVersion = [v10 assetTargetOSVersion];
    assetTargetBuildVersion = [v10 assetTargetBuildVersion];
    if ([descriptorCopy isPreSUStagingRequired])
    {
      v21 = 0;
    }

    else
    {
      v21 = unsignedLongLongValue;
    }

    if (![descriptorCopy isPreSUStagingRequired])
    {
      unsignedLongLongValue = 0;
    }

    LOBYTE(v25) = [descriptorCopy isPreSUStagingRequired];
    if (errorCopy)
    {
      [MADAutoAssetHistory recordFailedOperation:904 fromLayer:4 forAssetID:assetId withSelector:v18 failingWithError:errorCopy forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion withOptionalCount:v21 withRequiredCount:unsignedLongLongValue isRequired:v25];
      v22 = @"JobDownloadForStagingFailure";
    }

    else
    {
      [MADAutoAssetHistory recordOperation:904 toHistoryType:4 fromLayer:4 forAssetID:assetId withSelector:v18 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion withOptionalCount:v21 withRequiredCount:unsignedLongLongValue isRequired:v25];
      v22 = @"JobDownloadForStagingSuccess";
    }

    autoStagerFSM = [v10 autoStagerFSM];
    doneCopy = v28;
    v24 = [[MADAutoAssetStagerParam alloc] initWithJobInformation:v28 withDownloadedDescriptor:descriptorCopy withOperationError:errorCopy];
    [autoStagerFSM postEvent:v22 withInfo:v24];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{autoAssetStagerJobDownloadDone} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }
}

+ (id)controlCopyCurrentStagedDescriptors
{
  v2 = +[MADAutoAssetStager autoAssetStager];
  v3 = v2;
  v13 = 0;
  v14 = &v13;
  v15 = 0x3032000000;
  v16 = __Block_byref_object_copy__3;
  v17 = __Block_byref_object_dispose__3;
  v18 = 0;
  if (v2)
  {
    autoStagerFSM = [v2 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    v9[0] = _NSConcreteStackBlock;
    v9[1] = 3221225472;
    v9[2] = __57__MADAutoAssetStager_controlCopyCurrentStagedDescriptors__block_invoke;
    v9[3] = &unk_4B2EA8;
    v10 = v3;
    v11 = &v13;
    dispatch_sync(extendedStateQueue, v9);

    v6 = v10;
  }

  else
  {
    v6 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v6, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v6, OS_LOG_TYPE_ERROR, "{controlCopyCurrentStagedDescriptors} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }

  v7 = v14[5];
  _Block_object_dispose(&v13, 8);

  return v7;
}

void __57__MADAutoAssetStager_controlCopyCurrentStagedDescriptors__block_invoke(uint64_t a1)
{
  v15 = 0u;
  v16 = 0u;
  v17 = 0u;
  v18 = 0u;
  v2 = [*(a1 + 32) successfullyStaged];
  v3 = [v2 countByEnumeratingWithState:&v15 objects:v19 count:16];
  if (v3)
  {
    v4 = v3;
    v5 = *v16;
    do
    {
      v6 = 0;
      do
      {
        if (*v16 != v5)
        {
          objc_enumerationMutation(v2);
        }

        v7 = *(*(&v15 + 1) + 8 * v6);
        v8 = objc_autoreleasePoolPush();
        v9 = [*(a1 + 32) successfullyStaged];
        v10 = [v9 safeObjectForKey:v7 ofClass:objc_opt_class()];

        if (v10)
        {
          v11 = *(*(*(a1 + 40) + 8) + 40);
          if (!v11)
          {
            v12 = objc_alloc_init(NSMutableDictionary);
            v13 = *(*(a1 + 40) + 8);
            v14 = *(v13 + 40);
            *(v13 + 40) = v12;

            v11 = *(*(*(a1 + 40) + 8) + 40);
          }

          [v11 setSafeObject:v10 forKey:v7];
        }

        objc_autoreleasePoolPop(v8);
        v6 = v6 + 1;
      }

      while (v4 != v6);
      v4 = [v2 countByEnumeratingWithState:&v15 objects:v19 count:16];
    }

    while (v4);
  }
}

+ (void)controlAlreadyDownloadedDescriptors:(id)descriptors withSetConfigurations:(id)configurations withSetTargets:(id)targets withScheduledJobs:(id)jobs
{
  descriptorsCopy = descriptors;
  configurationsCopy = configurations;
  targetsCopy = targets;
  jobsCopy = jobs;
  v13 = +[MADAutoAssetStager autoAssetStager];
  v14 = v13;
  if (v13)
  {
    autoStagerFSM = [v13 autoStagerFSM];
    v16 = [[MADAutoAssetStagerParam alloc] initWithAlreadyDownloadedDescriptors:descriptorsCopy withSetConfigurations:configurationsCopy withSetTargets:targetsCopy withScheduledJobs:jobsCopy];
    [autoStagerFSM postEvent:@"ControlAlreadyDownloaded" withInfo:v16];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v17 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{controlAlreadyDownloadedDescriptors} failed to locate shared AutoAssetStager", v17, 2u);
    }
  }
}

+ (id)controlConvertStagedToDownloaded:(id)downloaded
{
  downloadedCopy = downloaded;
  v16 = 0;
  v17 = &v16;
  v18 = 0x3032000000;
  v19 = __Block_byref_object_copy__3;
  v20 = __Block_byref_object_dispose__3;
  v21 = 0;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    block[0] = _NSConcreteStackBlock;
    block[1] = 3221225472;
    block[2] = __55__MADAutoAssetStager_controlConvertStagedToDownloaded___block_invoke;
    block[3] = &unk_4B2E80;
    v14 = &v16;
    v12 = v5;
    v13 = downloadedCopy;
    dispatch_sync(extendedStateQueue, block);

    v8 = v12;
  }

  else
  {
    v8 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v8, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v8, OS_LOG_TYPE_ERROR, "{controlConvertStagedToDownloaded} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }

  v9 = v17[5];
  _Block_object_dispose(&v16, 8);

  return v9;
}

uint64_t __55__MADAutoAssetStager_controlConvertStagedToDownloaded___block_invoke(uint64_t a1)
{
  *(*(*(a1 + 48) + 8) + 40) = [*(a1 + 32) _controlConvertStagedToDownloaded:*(a1 + 40)];

  return _objc_release_x1();
}

+ (void)controlStatisticsClientRepliesSuccess:(id *)success clientRepliesFailure:(id *)failure totalStaged:(id *)staged totalUnstaged:(id *)unstaged clearingAfter:(BOOL)after
{
  v12 = +[MADAutoAssetStager autoAssetStager];
  v13 = v12;
  v43 = 0;
  v44 = &v43;
  v45 = 0x3032000000;
  v46 = __Block_byref_object_copy__3;
  v47 = __Block_byref_object_dispose__3;
  v48 = 0;
  v37 = 0;
  v38 = &v37;
  v39 = 0x3032000000;
  v40 = __Block_byref_object_copy__3;
  v41 = __Block_byref_object_dispose__3;
  v42 = 0;
  v31 = 0;
  v32 = &v31;
  v33 = 0x3032000000;
  v34 = __Block_byref_object_copy__3;
  v35 = __Block_byref_object_dispose__3;
  v36 = 0;
  v25 = 0;
  v26 = &v25;
  v27 = 0x3032000000;
  v28 = __Block_byref_object_copy__3;
  v29 = __Block_byref_object_dispose__3;
  v30 = 0;
  if (v12)
  {
    autoStagerFSM = [v12 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    v17[0] = _NSConcreteStackBlock;
    v17[1] = 3221225472;
    v17[2] = __121__MADAutoAssetStager_controlStatisticsClientRepliesSuccess_clientRepliesFailure_totalStaged_totalUnstaged_clearingAfter___block_invoke;
    v17[3] = &unk_4B35A8;
    v19 = &v43;
    v18 = v13;
    v20 = &v37;
    v21 = &v31;
    v22 = &v25;
    afterCopy = after;
    dispatch_sync(extendedStateQueue, v17);

    if (success)
    {
      *success = v44[5];
    }

    if (failure)
    {
      *failure = v38[5];
    }

    if (staged)
    {
      *staged = v32[5];
    }

    if (unstaged)
    {
      *unstaged = v26[5];
    }

    v16 = v18;
  }

  else
  {
    v16 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v16, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v16, OS_LOG_TYPE_ERROR, "{controlStatisticsClientRepliesSuccess} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }

  _Block_object_dispose(&v25, 8);
  _Block_object_dispose(&v31, 8);

  _Block_object_dispose(&v37, 8);
  _Block_object_dispose(&v43, 8);
}

void __121__MADAutoAssetStager_controlStatisticsClientRepliesSuccess_clientRepliesFailure_totalStaged_totalUnstaged_clearingAfter___block_invoke(uint64_t a1)
{
  v2 = [*(a1 + 32) statisticsClientRepliesSuccess];
  v3 = [v2 copy];
  v4 = *(*(a1 + 40) + 8);
  v5 = *(v4 + 40);
  *(v4 + 40) = v3;

  v6 = [*(a1 + 32) statisticsClientRepliesFailure];
  v7 = [v6 copy];
  v8 = *(*(a1 + 48) + 8);
  v9 = *(v8 + 40);
  *(v8 + 40) = v7;

  v10 = [*(a1 + 32) statisticsStaged];
  v11 = [v10 copy];
  v12 = *(*(a1 + 56) + 8);
  v13 = *(v12 + 40);
  *(v12 + 40) = v11;

  v14 = [*(a1 + 32) statisticsUnstaged];
  v15 = [v14 copy];
  v16 = *(*(a1 + 64) + 8);
  v17 = *(v16 + 40);
  *(v16 + 40) = v15;

  if (*(a1 + 72) == 1)
  {
    v18 = objc_alloc_init(MANAutoAssetControlStatisticsByCommand);
    [*(a1 + 32) setStatisticsClientRepliesSuccess:v18];

    v19 = objc_alloc_init(MANAutoAssetControlStatisticsByCommand);
    [*(a1 + 32) setStatisticsClientRepliesFailure:v19];

    v20 = objc_alloc_init(MANAutoAssetControlStatisticsBySize);
    [*(a1 + 32) setStatisticsStaged:v20];

    v21 = objc_alloc_init(MANAutoAssetControlStatisticsBySize);
    [*(a1 + 32) setStatisticsUnstaged:v21];
  }
}

+ (void)controlEliminateSelector:(id)selector
{
  selectorCopy = selector;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithAssetSelector:selectorCopy];
    [autoStagerFSM postEvent:@"ControlEliminateAssetSelector" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{controlEliminateSelector} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)controlEliminateSetConfiguration:(id)configuration
{
  configurationCopy = configuration;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithSetConfiguration:configurationCopy];
    [autoStagerFSM postEvent:@"ControlEliminateSetIdentifier" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{controlEliminateSetConfiguration} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)controlAlteredSetConfiguration:(id)configuration
{
  configurationCopy = configuration;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithSetConfiguration:configurationCopy];
    [autoStagerFSM postEvent:@"ControlAlteredSetConfiguration" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{controlAlteredSetConfiguration} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (void)controlSetTargetsSpecified:(id)specified
{
  specifiedCopy = specified;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    v7 = [[MADAutoAssetStagerParam alloc] initWithSetTargets:specifiedCopy];
    [autoStagerFSM postEvent:@"ControlSetTargetsSpecified" withInfo:v7];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v8 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{controlSetTargetsSpecified} failed to locate shared AutoAssetStager", v8, 2u);
    }
  }
}

+ (int64_t)previousOTASituation
{
  v2 = +[MADAutoAssetStager autoAssetStager];
  v3 = v2;
  v13 = 0;
  v14 = &v13;
  v15 = 0x2020000000;
  v16 = 0;
  if (v2)
  {
    autoStagerFSM = [v2 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    v9[0] = _NSConcreteStackBlock;
    v9[1] = 3221225472;
    v9[2] = __42__MADAutoAssetStager_previousOTASituation__block_invoke;
    v9[3] = &unk_4B2AC8;
    v11 = &v13;
    v10 = v3;
    dispatch_sync(extendedStateQueue, v9);

    v6 = v10;
  }

  else
  {
    v6 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v6, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v6, OS_LOG_TYPE_ERROR, "{previousOTASituation} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }

  v7 = v14[3];
  _Block_object_dispose(&v13, 8);

  return v7;
}

id __42__MADAutoAssetStager_previousOTASituation__block_invoke(uint64_t a1)
{
  result = [*(a1 + 32) startupPreviousOTASituation];
  *(*(*(a1 + 40) + 8) + 24) = result;
  return result;
}

+ (void)garbageCollectEliminateSelector:(id)selector
{
  selectorCopy = selector;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    v9[0] = _NSConcreteStackBlock;
    v9[1] = 3221225472;
    v9[2] = __54__MADAutoAssetStager_garbageCollectEliminateSelector___block_invoke;
    v9[3] = &unk_4B2B18;
    v10 = v5;
    v11 = selectorCopy;
    dispatch_sync(extendedStateQueue, v9);

    v8 = v10;
  }

  else
  {
    v8 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v8, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v8, OS_LOG_TYPE_ERROR, "{garbageCollectEliminateSelector} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }
}

void __54__MADAutoAssetStager_garbageCollectEliminateSelector___block_invoke(uint64_t a1)
{
  v2 = [*(a1 + 32) successfullyStaged];
  v3 = [*(a1 + 40) persistedEntryID];
  v4 = [v2 safeObjectForKey:v3 ofClass:objc_opt_class()];

  if (v4)
  {
    [*(a1 + 32) _removeDescriptorFromSuccessfullyStaged:v4 message:@"eliminated selector due to garbage collection"];
    [*(a1 + 32) _removeStagedAssetFromFilesystem:v4 forHistoryOperation:404];
  }

  else
  {
    v5 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v5, OS_LOG_TYPE_DEFAULT))
    {
      v6 = [*(a1 + 32) summary];
      v7 = [*(a1 + 40) summary];
      v8 = 138543618;
      v9 = v6;
      v10 = 2114;
      v11 = v7;
      _os_log_impl(&dword_0, v5, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {garbageCollectEliminateSelector} not staged | eliminateSelector:%{public}@", &v8, 0x16u);
    }
  }
}

+ (void)extendSummaryWithDeterminedAssets:(id)assets basedOnControl:(id)control
{
  assetsCopy = assets;
  controlCopy = control;
  v7 = +[MADAutoAssetStager autoAssetStager];
  v8 = v7;
  if (v7)
  {
    autoStagerFSM = [v7 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    block[0] = _NSConcreteStackBlock;
    block[1] = 3221225472;
    block[2] = __71__MADAutoAssetStager_extendSummaryWithDeterminedAssets_basedOnControl___block_invoke;
    block[3] = &unk_4B2AF0;
    v13 = v8;
    v14 = assetsCopy;
    v15 = controlCopy;
    dispatch_sync(extendedStateQueue, block);

    v11 = v13;
  }

  else
  {
    v11 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v11, OS_LOG_TYPE_ERROR, "{extendSummaryWithStagingAssets} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }
}

+ (void)extendSummaryWithAvailableForStagingAssets:(id)assets
{
  assetsCopy = assets;
  v4 = +[MADAutoAssetStager autoAssetStager];
  v5 = v4;
  if (v4)
  {
    autoStagerFSM = [v4 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    v9[0] = _NSConcreteStackBlock;
    v9[1] = 3221225472;
    v9[2] = __65__MADAutoAssetStager_extendSummaryWithAvailableForStagingAssets___block_invoke;
    v9[3] = &unk_4B2B18;
    v10 = v5;
    v11 = assetsCopy;
    dispatch_sync(extendedStateQueue, v9);

    v8 = v10;
  }

  else
  {
    v8 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v8, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v8, OS_LOG_TYPE_ERROR, "{extendSummaryWithAvailableForStagingAssets} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }
}

+ (void)extendSummaryWithStagingAssets:(id)assets basedOnControl:(id)control
{
  assetsCopy = assets;
  controlCopy = control;
  v7 = +[MADAutoAssetStager autoAssetStager];
  v8 = v7;
  if (v7)
  {
    autoStagerFSM = [v7 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    block[0] = _NSConcreteStackBlock;
    block[1] = 3221225472;
    block[2] = __68__MADAutoAssetStager_extendSummaryWithStagingAssets_basedOnControl___block_invoke;
    block[3] = &unk_4B2AF0;
    v13 = v8;
    v14 = assetsCopy;
    v15 = controlCopy;
    dispatch_sync(extendedStateQueue, block);

    v11 = v13;
  }

  else
  {
    v11 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v11, OS_LOG_TYPE_ERROR, "{extendSummaryWithStagingAssets} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }
}

+ (void)extendSummaryWithStagedAssets:(id)assets basedOnControl:(id)control
{
  assetsCopy = assets;
  controlCopy = control;
  v7 = +[MADAutoAssetStager autoAssetStager];
  v8 = v7;
  if (v7)
  {
    autoStagerFSM = [v7 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    block[0] = _NSConcreteStackBlock;
    block[1] = 3221225472;
    block[2] = __67__MADAutoAssetStager_extendSummaryWithStagedAssets_basedOnControl___block_invoke;
    block[3] = &unk_4B2AF0;
    v13 = v8;
    v14 = assetsCopy;
    v15 = controlCopy;
    dispatch_sync(extendedStateQueue, block);

    v11 = v13;
  }

  else
  {
    v11 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v11, OS_LOG_TYPE_ERROR, "{extendSummaryWithStagedAssets} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }
}

+ (id)collectOverviewInformation
{
  v2 = +[MADAutoAssetStager autoAssetStager];
  v3 = v2;
  v13 = 0;
  v14 = &v13;
  v15 = 0x3032000000;
  v16 = __Block_byref_object_copy__3;
  v17 = __Block_byref_object_dispose__3;
  v18 = 0;
  if (v2)
  {
    autoStagerFSM = [v2 autoStagerFSM];
    extendedStateQueue = [autoStagerFSM extendedStateQueue];
    v9[0] = _NSConcreteStackBlock;
    v9[1] = 3221225472;
    v9[2] = __48__MADAutoAssetStager_collectOverviewInformation__block_invoke;
    v9[3] = &unk_4B2AC8;
    v11 = &v13;
    v10 = v3;
    dispatch_sync(extendedStateQueue, v9);

    v6 = v10;
  }

  else
  {
    v6 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v6, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v6, OS_LOG_TYPE_ERROR, "{collectOverviewInformation} failed to locate shared AutoAssetStager", buf, 2u);
    }
  }

  v7 = v14[5];
  _Block_object_dispose(&v13, 8);

  return v7;
}

uint64_t __48__MADAutoAssetStager_collectOverviewInformation__block_invoke(uint64_t a1)
{
  *(*(*(a1 + 40) + 8) + 40) = [*(a1 + 32) _collectOverviewInformation];

  return _objc_release_x1();
}

- (id)_controlConvertStagedToDownloaded:(id)downloaded
{
  downloadedCopy = downloaded;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v7 = [MAAutoAssetSelector alloc];
  assetType = [downloadedCopy assetType];
  assetSpecifier = [downloadedCopy assetSpecifier];
  assetVersion = [downloadedCopy assetVersion];
  v11 = [v7 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
  persistedEntryID = [v11 persistedEntryID];
  v14 = [successfullyStaged safeObjectForKey:persistedEntryID ofClass:objc_opt_class()];

  if (!v14)
  {
    analyticsManager = self->_analyticsManager;
    assetSpecifier2 = [v11 assetSpecifier];
    assetType2 = [v11 assetType];
    assetVersion2 = [v11 assetVersion];
    v24 = analyticsManager;
    v25 = assetSpecifier2;
    v26 = assetType2;
    v27 = assetVersion2;
    v28 = 0;
    v29 = 0;
    goto LABEL_7;
  }

  [(MADAutoAssetStager *)self _removeDescriptorFromSuccessfullyStaged:v14 message:@"IMMEDIATE-PROMOTION"];
  v15 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v15, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    summary2 = [downloadedCopy summary];
    v33 = 138543618;
    v34 = summary;
    v35 = 2114;
    v36 = summary2;
    _os_log_impl(&dword_0, v15, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_controlConvertStagedToDownloaded} IMMEDIATE-PROMOTION | selector:%{public}@", &v33, 0x16u);
  }

  successfullyStaged2 = [(MADAutoAssetStager *)self successfullyStaged];
  v19 = [successfullyStaged2 count];

  if (!v19)
  {
    v20 = self->_analyticsManager;
    assetSpecifier2 = [v11 assetSpecifier];
    assetType2 = [v11 assetType];
    assetVersion2 = [v11 assetVersion];
    v24 = v20;
    v25 = assetSpecifier2;
    v26 = assetType2;
    v27 = assetVersion2;
    v28 = 1;
    v29 = 6;
LABEL_7:
    v31 = [(MADAnalyticsManager *)v24 recordMobileAssetPromotionAttempt:v25 assetType:v26 assetVersion:v27 osPromotion:1 successfullyPromoted:v28 withReason:v29];
  }

  return v14;
}

- (void)_extendSummaryWithDeterminedAssets:(id)assets basedOnControl:(id)control
{
  assetsCopy = assets;
  controlCopy = control;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
    v29[0] = _NSConcreteStackBlock;
    v29[1] = 3221225472;
    v29[2] = __72__MADAutoAssetStager__extendSummaryWithDeterminedAssets_basedOnControl___block_invoke;
    v29[3] = &unk_4B35D0;
    v11 = controlCopy;
    v30 = v11;
    selfCopy = self;
    v12 = assetsCopy;
    v32 = v12;
    [availableForStagingRequiredByTarget enumerateKeysAndObjectsUsingBlock:v29];

    availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
    v25[0] = _NSConcreteStackBlock;
    v25[1] = 3221225472;
    v25[2] = __72__MADAutoAssetStager__extendSummaryWithDeterminedAssets_basedOnControl___block_invoke_2;
    v25[3] = &unk_4B35D0;
    v26 = v11;
    selfCopy2 = self;
    v28 = v12;
    [availableForStagingOptionalByTarget enumerateKeysAndObjectsUsingBlock:v25];

    availableForStaging = v30;
  }

  else
  {
    v23 = 0u;
    v24 = 0u;
    v21 = 0u;
    v22 = 0u;
    availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
    v15 = [availableForStaging countByEnumeratingWithState:&v21 objects:v33 count:16];
    if (v15)
    {
      v16 = v15;
      v17 = *v22;
      do
      {
        v18 = 0;
        do
        {
          if (*v22 != v17)
          {
            objc_enumerationMutation(availableForStaging);
          }

          v19 = *(*(&v21 + 1) + 8 * v18);
          v20 = objc_autoreleasePoolPush();
          if ([MADAutoAssetControlManager descriptorToBeIncluded:v19 basedOnControl:controlCopy])
          {
            [(MADAutoAssetStager *)self _addDescriptor:v19 withRepresentation:601 toSummary:assetsCopy];
          }

          objc_autoreleasePoolPop(v20);
          v18 = v18 + 1;
        }

        while (v16 != v18);
        v16 = [availableForStaging countByEnumeratingWithState:&v21 objects:v33 count:16];
      }

      while (v16);
    }
  }
}

void __72__MADAutoAssetStager__extendSummaryWithDeterminedAssets_basedOnControl___block_invoke(uint64_t a1, void *a2, void *a3)
{
  v5 = a2;
  v6 = a3;
  v7 = objc_autoreleasePoolPush();
  if (v6)
  {
    v16 = 0u;
    v17 = 0u;
    v14 = 0u;
    v15 = 0u;
    v8 = v6;
    v9 = [v8 countByEnumeratingWithState:&v14 objects:v18 count:16];
    if (v9)
    {
      v10 = v9;
      v11 = *v15;
      do
      {
        for (i = 0; i != v10; i = i + 1)
        {
          if (*v15 != v11)
          {
            objc_enumerationMutation(v8);
          }

          v13 = *(*(&v14 + 1) + 8 * i);
          if ([MADAutoAssetControlManager descriptorToBeIncluded:v13 basedOnControl:*(a1 + 32), v14])
          {
            [*(a1 + 40) _addDescriptor:v13 withRepresentation:601 toSummary:*(a1 + 48) withStageGroupType:1 withTargetOS:v5];
          }
        }

        v10 = [v8 countByEnumeratingWithState:&v14 objects:v18 count:16];
      }

      while (v10);
    }
  }

  objc_autoreleasePoolPop(v7);
}

void __72__MADAutoAssetStager__extendSummaryWithDeterminedAssets_basedOnControl___block_invoke_2(uint64_t a1, void *a2, void *a3)
{
  v5 = a2;
  v6 = a3;
  v7 = objc_autoreleasePoolPush();
  if (v6)
  {
    v16 = 0u;
    v17 = 0u;
    v14 = 0u;
    v15 = 0u;
    v8 = v6;
    v9 = [v8 countByEnumeratingWithState:&v14 objects:v18 count:16];
    if (v9)
    {
      v10 = v9;
      v11 = *v15;
      do
      {
        for (i = 0; i != v10; i = i + 1)
        {
          if (*v15 != v11)
          {
            objc_enumerationMutation(v8);
          }

          v13 = *(*(&v14 + 1) + 8 * i);
          if ([MADAutoAssetControlManager descriptorToBeIncluded:v13 basedOnControl:*(a1 + 32), v14])
          {
            [*(a1 + 40) _addDescriptor:v13 withRepresentation:601 toSummary:*(a1 + 48) withStageGroupType:2 withTargetOS:v5];
          }
        }

        v10 = [v8 countByEnumeratingWithState:&v14 objects:v18 count:16];
      }

      while (v10);
    }
  }

  objc_autoreleasePoolPop(v7);
}

- (void)_extendSummaryWithAvailableForStagingAssets:(id)assets
{
  assetsCopy = assets;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
  v13[0] = _NSConcreteStackBlock;
  v13[1] = 3221225472;
  v13[2] = __66__MADAutoAssetStager__extendSummaryWithAvailableForStagingAssets___block_invoke;
  v13[3] = &unk_4B35F8;
  v13[4] = self;
  v8 = assetsCopy;
  v14 = v8;
  [availableForStagingRequiredByTarget enumerateKeysAndObjectsUsingBlock:v13];

  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
  v11[0] = _NSConcreteStackBlock;
  v11[1] = 3221225472;
  v11[2] = __66__MADAutoAssetStager__extendSummaryWithAvailableForStagingAssets___block_invoke_2;
  v11[3] = &unk_4B35F8;
  v11[4] = self;
  v12 = v8;
  v10 = v8;
  [availableForStagingOptionalByTarget enumerateKeysAndObjectsUsingBlock:v11];
}

void __66__MADAutoAssetStager__extendSummaryWithAvailableForStagingAssets___block_invoke(uint64_t a1, void *a2, void *a3)
{
  v5 = a2;
  v6 = a3;
  v7 = objc_autoreleasePoolPush();
  if (v6)
  {
    v15 = 0u;
    v16 = 0u;
    v13 = 0u;
    v14 = 0u;
    v8 = v6;
    v9 = [v8 countByEnumeratingWithState:&v13 objects:v17 count:16];
    if (v9)
    {
      v10 = v9;
      v11 = *v14;
      do
      {
        v12 = 0;
        do
        {
          if (*v14 != v11)
          {
            objc_enumerationMutation(v8);
          }

          [*(a1 + 32) _addDescriptor:*(*(&v13 + 1) + 8 * v12) withRepresentation:601 toSummary:*(a1 + 40) withStageGroupType:1 withTargetOS:{v5, v13}];
          v12 = v12 + 1;
        }

        while (v10 != v12);
        v10 = [v8 countByEnumeratingWithState:&v13 objects:v17 count:16];
      }

      while (v10);
    }
  }

  objc_autoreleasePoolPop(v7);
}

void __66__MADAutoAssetStager__extendSummaryWithAvailableForStagingAssets___block_invoke_2(uint64_t a1, void *a2, void *a3)
{
  v5 = a2;
  v6 = a3;
  v7 = objc_autoreleasePoolPush();
  if (v6)
  {
    v15 = 0u;
    v16 = 0u;
    v13 = 0u;
    v14 = 0u;
    v8 = v6;
    v9 = [v8 countByEnumeratingWithState:&v13 objects:v17 count:16];
    if (v9)
    {
      v10 = v9;
      v11 = *v14;
      do
      {
        v12 = 0;
        do
        {
          if (*v14 != v11)
          {
            objc_enumerationMutation(v8);
          }

          [*(a1 + 32) _addDescriptor:*(*(&v13 + 1) + 8 * v12) withRepresentation:601 toSummary:*(a1 + 40) withStageGroupType:2 withTargetOS:{v5, v13}];
          v12 = v12 + 1;
        }

        while (v10 != v12);
        v10 = [v8 countByEnumeratingWithState:&v13 objects:v17 count:16];
      }

      while (v10);
    }
  }

  objc_autoreleasePoolPop(v7);
}

- (void)_extendSummaryWithStagingAssets:(id)assets basedOnControl:(id)control
{
  assetsCopy = assets;
  controlCopy = control;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v19 = 0u;
  v20 = 0u;
  v17 = 0u;
  v18 = 0u;
  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v11 = [awaitingStagingAttempt countByEnumeratingWithState:&v17 objects:v21 count:16];
  if (v11)
  {
    v12 = v11;
    v13 = *v18;
    do
    {
      v14 = 0;
      do
      {
        if (*v18 != v13)
        {
          objc_enumerationMutation(awaitingStagingAttempt);
        }

        v15 = *(*(&v17 + 1) + 8 * v14);
        v16 = objc_autoreleasePoolPush();
        if ([MADAutoAssetControlManager descriptorToBeIncluded:v15 basedOnControl:controlCopy])
        {
          [(MADAutoAssetStager *)self _addDescriptor:v15 withRepresentation:602 toSummary:assetsCopy];
        }

        objc_autoreleasePoolPop(v16);
        v14 = v14 + 1;
      }

      while (v12 != v14);
      v12 = [awaitingStagingAttempt countByEnumeratingWithState:&v17 objects:v21 count:16];
    }

    while (v12);
  }
}

- (void)_extendSummaryWithStagedAssets:(id)assets basedOnControl:(id)control
{
  assetsCopy = assets;
  controlCopy = control;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v21 = 0u;
  v22 = 0u;
  v19 = 0u;
  v20 = 0u;
  obj = [(MADAutoAssetStager *)self successfullyStaged];
  v9 = [obj countByEnumeratingWithState:&v19 objects:v23 count:16];
  if (v9)
  {
    v10 = v9;
    v11 = *v20;
    do
    {
      v12 = 0;
      do
      {
        if (*v20 != v11)
        {
          objc_enumerationMutation(obj);
        }

        v13 = *(*(&v19 + 1) + 8 * v12);
        v14 = objc_autoreleasePoolPush();
        successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
        v16 = [successfullyStaged safeObjectForKey:v13 ofClass:objc_opt_class()];

        if ([MADAutoAssetControlManager descriptorToBeIncluded:v16 basedOnControl:controlCopy])
        {
          [(MADAutoAssetStager *)self _addDescriptor:v16 withRepresentation:603 toSummary:assetsCopy];
        }

        objc_autoreleasePoolPop(v14);
        v12 = v12 + 1;
      }

      while (v10 != v12);
      v10 = [obj countByEnumeratingWithState:&v19 objects:v23 count:16];
    }

    while (v10);
  }
}

- (void)_addDescriptor:(id)descriptor withRepresentation:(int64_t)representation toSummary:(id)summary withStageGroupType:(unint64_t)type withTargetOS:(id)s
{
  descriptorCopy = descriptor;
  summaryCopy = summary;
  sCopy = s;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  downloadedNetworkBytes = [descriptorCopy downloadedNetworkBytes];
  if (!downloadedNetworkBytes)
  {
    downloadedNetworkBytes = [descriptorCopy downloadedFilesystemBytes];
  }

  v47 = downloadedNetworkBytes;
  v14 = [MAAutoAssetSelector alloc];
  assetType = [descriptorCopy assetType];
  assetSpecifier = [descriptorCopy assetSpecifier];
  assetVersion = [descriptorCopy assetVersion];
  v51 = [v14 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  v46 = [MAAutoAssetStatus alloc];
  v45 = objc_alloc_init(MAAutoAssetNotifications);
  metadata = [descriptorCopy metadata];
  downloadUserInitiated = [descriptorCopy downloadUserInitiated];
  downloadedFilesystemBytes = [descriptorCopy downloadedFilesystemBytes];
  isPatch = [descriptorCopy isPatch];
  patchedFromBaseSelector = [descriptorCopy patchedFromBaseSelector];
  patchedFromBaseFilesystemBytes = [descriptorCopy patchedFromBaseFilesystemBytes];
  patchingAttempted = [descriptorCopy patchingAttempted];
  stagedPriorToAvailable = [descriptorCopy stagedPriorToAvailable];
  stagedFromOSVersion = [descriptorCopy stagedFromOSVersion];
  stagedFromBuildVersion = [descriptorCopy stagedFromBuildVersion];
  patchingAttemptError = [descriptorCopy patchingAttemptError];
  BYTE1(v40) = stagedPriorToAvailable;
  LOBYTE(v40) = patchingAttempted;
  v27 = v51;
  LOBYTE(v39) = isPatch;
  v28 = [v46 initWithAssetSelector:v51 withNotifications:v45 withAvailableForUseAttributes:metadata withNewerVersionAttributes:0 withNeverBeenLocked:1 withDownloadUserInitiated:downloadUserInitiated withDownloadProgress:0 withDownloadedNetworkBytes:v47 withDownloadedFilesystemBytes:downloadedFilesystemBytes withDownloadedAsPatch:v39 withPatchedFromBaseSelector:patchedFromBaseSelector withPatchedFromBaseFilesystemBytes:patchedFromBaseFilesystemBytes withPatchingAttempted:v40 withStagedPriorToAvailable:stagedFromOSVersion withStagedFromOSVersion:stagedFromBuildVersion withStagedFromBuildVersion:0 withCurrentLockUsage:0 withAvailableForUseError:patchingAttemptError withPatchingAttemptError:0 withNewerVersionError:?];

  v29 = [MAAutoAssetSummary alloc];
  LOBYTE(downloadedFilesystemBytes) = objc_opt_respondsToSelector();

  if (downloadedFilesystemBytes)
  {
    v30 = [MADAutoAssetSecure isSecureAsset:@"{addDescriptor}" forDescriptor:descriptorCopy];
    v31 = ![MADAutoAssetSecure isPersonalizationRequired:@"{addDescriptor}" forDescriptor:descriptorCopy];
    v32 = [MADAutoAssetSecure isPrePersonalized:@"{addDescriptor}" forDescriptor:descriptorCopy];
    v33 = [MADAutoAssetSecure isGraftedOrMounted:@"{addDescriptor}" forDescriptor:descriptorCopy];
    v34 = v33;
    if (v33)
    {
      v35 = [MADAutoAssetSecure getGraftPath:@"{addDescriptor}" forDescriptor:descriptorCopy];
    }

    else
    {
      v35 = 0;
    }

    v37 = sCopy;
    BYTE3(v41) = v34;
    BYTE2(v41) = v32;
    BYTE1(v41) = v31;
    LOBYTE(v41) = v30;
    v27 = v51;
    v36 = [[MAAutoAssetSummary alloc] initWithAssetSelector:v51 withAssetRepresentation:representation withAssetWasPatched:objc_msgSend(descriptorCopy withAssetIsStaged:"isPatch") withJobStatus:objc_msgSend(descriptorCopy withScheduledIntervalSecs:"preSoftwareUpdateAssetStaging") withScheduledRemainingSecs:v28 withPushDelaySecs:0 withActiveClientCount:0 withActiveMonitorCount:0 withMaximumClientCount:0 withTotalClientCount:0 withIsSecureMobileAsset:0 withPersonalizationStatus:0 withPrePersonalizationStatus:v41 withGraftStatus:v35 withGraftPoint:type withStageGroupType:sCopy withTargetOS:?];
  }

  else
  {
    v36 = [[MAAutoAssetSummary alloc] initWithAssetSelector:v51 withAssetRepresentation:representation withAssetWasPatched:objc_msgSend(descriptorCopy withAssetIsStaged:"isPatch") withJobStatus:objc_msgSend(descriptorCopy withScheduledIntervalSecs:"preSoftwareUpdateAssetStaging") withScheduledRemainingSecs:v28 withPushDelaySecs:0 withActiveClientCount:0 withActiveMonitorCount:0 withMaximumClientCount:0 withTotalClientCount:{0, 0, 0}];
    v37 = sCopy;
  }

  if (v36)
  {
    [summaryCopy addObject:v36];
  }

  else
  {
    v38 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v38, OS_LOG_TYPE_ERROR))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v38, OS_LOG_TYPE_ERROR, "{AUTO-STAGER:_addDescriptor} | unable to allocate summary entry", buf, 2u);
    }
  }
}

- (void)_addDescriptor:(id)descriptor withRepresentation:(int64_t)representation toSummary:(id)summary
{
  summaryCopy = summary;
  descriptorCopy = descriptor;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  [(MADAutoAssetStager *)self _addDescriptor:descriptorCopy withRepresentation:representation toSummary:summaryCopy withStageGroupType:0 withTargetOS:0];
}

- (id)_collectOverviewInformation
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v5 = objc_alloc_init(MANAutoAssetControlStagerInformation);
  [(MANAutoAssetControlStagerInformation *)v5 setStartupPreviousOTASituation:100];
  [(MANAutoAssetControlStagerInformation *)v5 setActiveTargetOTASituation:100];
  [(MANAutoAssetControlStagerInformation *)v5 setOtherTargetOTASituation:100];
  context = objc_autoreleasePoolPush();
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v8 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  assetTargetTrainName2 = [(MADAutoAssetStager *)self assetTargetTrainName];
  v97 = v8;
  if (!assetTargetTrainName2)
  {
    v91 = 0;
    v92 = 0;
    v89 = 0;
    v90 = 0;
    v88 = 0;
    v11 = 0;
    goto LABEL_5;
  }

  assetTargetTrainName3 = [(MADAutoAssetStager *)self assetTargetTrainName];
  if ([SUCore stringIsEqual:assetTargetTrainName3 to:@"NO_STAGING_ATTEMPTED"])
  {

    v91 = 0;
    v92 = 0;
    v89 = 0;
    v90 = 0;
    v88 = 0;
    v11 = 0;
    assetTargetTrainName2 = 0;
LABEL_5:
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    assetTargetRestoreVersion2 = 0;
    goto LABEL_6;
  }

  assetTargetRestoreVersion2 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  if (assetTargetRestoreVersion2)
  {
    assetTargetRestoreVersion3 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    v52 = [SUCore stringIsEqual:assetTargetRestoreVersion3 to:@"NO_STAGING_ATTEMPTED"];

    assetTargetRestoreVersion2 = 0;
    v92 = 0;
    if (v52)
    {
      v89 = 0;
      v90 = 0;
      v88 = 0;
      v91 = 0;
      v11 = 0;
      assetTargetTrainName2 = 0;
      v12 = 0;
      v13 = 0;
      v14 = 0;
      v15 = 0;
      v16 = 0;
    }

    else
    {
      v89 = 0;
      v90 = 0;
      v88 = 0;
      v91 = 0;
      v11 = 0;
      assetTargetTrainName2 = 0;
      v12 = 0;
      v13 = 0;
      v14 = 0;
      v15 = 0;
      v16 = 0;
      if (v97)
      {
        persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
        v54 = [persistedTargetLookupResults persistedEntryIDs:@"_collectOverviewInformation"];

        v55 = [v54 count];
        candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
        v96 = [candidatesForStagingRequiredByTarget safeObjectForKey:v97 ofClass:objc_opt_class()];

        candidatesForStagingOptionalByTarget = [(MADAutoAssetStager *)self candidatesForStagingOptionalByTarget];
        v95 = [candidatesForStagingOptionalByTarget safeObjectForKey:v97 ofClass:objc_opt_class()];

        candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsRequiredByTarget];
        v94 = [candidateSetConfigurationsRequiredByTarget safeObjectForKey:v97 ofClass:objc_opt_class()];

        candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
        v93 = [candidateSetConfigurationsOptionalByTarget safeObjectForKey:v97 ofClass:objc_opt_class()];

        availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
        v100 = [availableForStagingRequiredByTarget safeObjectForKey:v97 ofClass:objc_opt_class()];

        availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
        v98 = [availableForStagingOptionalByTarget safeObjectForKey:v97 ofClass:objc_opt_class()];

        persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
        v63 = [persistedTargetLookupResults2 persistedEntry:v97 fromLocation:@"_collectOverviewInformation"];

        if (v63)
        {
          v64 = [v63 ullForKey:@"targetLookupResultsOTASituation"];
          if (!v64)
          {
            if ([(MADAutoAssetStager *)self storedTargetWithOTASituation])
            {
              v64 = &stru_B8 + 20;
            }

            else
            {
              v64 = &stru_20 + 69;
            }
          }

          [(MANAutoAssetControlStagerInformation *)v5 setActiveTargetOTASituation:v64];
        }

        else
        {
          v65 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v65, OS_LOG_TYPE_ERROR))
          {
            summary = [(MADAutoAssetStager *)self summary];
            *buf = 138543618;
            v107 = summary;
            v108 = 2114;
            v109 = v97;
            _os_log_impl(&dword_0, v65, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_collectOverviewInformation} unable to load entry from persistedTargetLookupResults (most recent target-OS) | targetLookupResultsKey:%{public}@, ", buf, 0x16u);
          }
        }

        if (v55 < 2)
        {
          v91 = 0;
          v92 = 0;
          v89 = 0;
          v90 = 0;
          v88 = 0;
          v11 = 0;
          assetTargetRestoreVersion2 = 0;
        }

        else
        {
          summary2 = v63;
          v103 = 0u;
          v104 = 0u;
          v101 = 0u;
          v102 = 0u;
          v67 = v54;
          v68 = [v67 countByEnumeratingWithState:&v101 objects:v105 count:16];
          if (v68)
          {
            v69 = v68;
            v70 = *v102;
LABEL_28:
            v71 = 0;
            while (1)
            {
              if (*v102 != v70)
              {
                objc_enumerationMutation(v67);
              }

              v72 = *(*(&v101 + 1) + 8 * v71);
              if (![SUCore stringIsEqual:v72 to:v97, summary2])
              {
                break;
              }

              if (v69 == ++v71)
              {
                v69 = [v67 countByEnumeratingWithState:&v101 objects:v105 count:16];
                if (v69)
                {
                  goto LABEL_28;
                }

                goto LABEL_34;
              }
            }

            assetTargetRestoreVersion2 = v72;

            if (!assetTargetRestoreVersion2)
            {
              v91 = 0;
              v92 = 0;
              v89 = 0;
              v90 = 0;
              v88 = 0;
              v11 = 0;
              goto LABEL_44;
            }

            candidatesForStagingRequiredByTarget2 = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
            v11 = [candidatesForStagingRequiredByTarget2 safeObjectForKey:assetTargetRestoreVersion2 ofClass:objc_opt_class()];

            candidatesForStagingOptionalByTarget2 = [(MADAutoAssetStager *)self candidatesForStagingOptionalByTarget];
            v91 = [candidatesForStagingOptionalByTarget2 safeObjectForKey:assetTargetRestoreVersion2 ofClass:objc_opt_class()];

            candidateSetConfigurationsRequiredByTarget2 = [(MADAutoAssetStager *)self candidateSetConfigurationsRequiredByTarget];
            v92 = [candidateSetConfigurationsRequiredByTarget2 safeObjectForKey:assetTargetRestoreVersion2 ofClass:objc_opt_class()];

            candidateSetConfigurationsOptionalByTarget2 = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
            v77 = [candidateSetConfigurationsOptionalByTarget2 safeObjectForKey:assetTargetRestoreVersion2 ofClass:objc_opt_class()];

            availableForStagingRequiredByTarget2 = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
            v79 = [availableForStagingRequiredByTarget2 safeObjectForKey:assetTargetRestoreVersion2 ofClass:objc_opt_class()];

            availableForStagingOptionalByTarget2 = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
            v81 = [availableForStagingOptionalByTarget2 safeObjectForKey:assetTargetRestoreVersion2 ofClass:objc_opt_class()];

            persistedTargetLookupResults3 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
            v83 = [persistedTargetLookupResults3 persistedEntry:assetTargetRestoreVersion2 fromLocation:@"_collectOverviewInformation"];

            v89 = v79;
            v90 = v77;
            v88 = v81;
            if (v83)
            {
              v84 = [v83 ullForKey:@"targetLookupResultsOTASituation"];
              if (!v84)
              {
                if ([(MADAutoAssetStager *)self storedTargetWithOTASituation])
                {
                  v84 = &stru_B8 + 20;
                }

                else
                {
                  v84 = &stru_20 + 69;
                }
              }

              [(MANAutoAssetControlStagerInformation *)v5 setOtherTargetOTASituation:v84];
              v63 = v83;
            }

            else
            {
              v85 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v85, OS_LOG_TYPE_ERROR))
              {
                summary2 = [(MADAutoAssetStager *)self summary];
                *buf = 138543618;
                v107 = summary2;
                v108 = 2114;
                v109 = assetTargetRestoreVersion2;
                _os_log_impl(&dword_0, v85, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_collectOverviewInformation} unable to load entry from persistedTargetLookupResults (other target-OS) | otherTargetLookupResultsKey:%{public}@, ", buf, 0x16u);
              }

              v63 = 0;
            }
          }

          else
          {
LABEL_34:

            v91 = 0;
            v92 = 0;
            v89 = 0;
            v90 = 0;
            v88 = 0;
            v11 = 0;
            assetTargetRestoreVersion2 = 0;
LABEL_44:
            v63 = summary2;
          }
        }

        v15 = v95;
        v16 = v96;
        v13 = v93;
        v14 = v94;
        assetTargetTrainName2 = v98;
        v12 = v100;
      }
    }
  }

  else
  {

    v91 = 0;
    v92 = 0;
    v89 = 0;
    v90 = 0;
    v88 = 0;
    v11 = 0;
    assetTargetTrainName2 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
  }

LABEL_6:
  v99 = v12;
  persistedState = [(MADAutoAssetStager *)self persistedState];
  -[MANAutoAssetControlStagerInformation setPersistedStateCount:](v5, "setPersistedStateCount:", [persistedState persistedEntryCount:@"_collectOverviewInformation"]);

  persistedTargetLookupResults4 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
  -[MANAutoAssetControlStagerInformation setPersistedTargetLookupResultsCount:](v5, "setPersistedTargetLookupResultsCount:", [persistedTargetLookupResults4 persistedEntryCount:@"_collectOverviewInformation"]);

  persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
  -[MANAutoAssetControlStagerInformation setPersistedAvailableForStagingByTargetCount:](v5, "setPersistedAvailableForStagingByTargetCount:", [persistedAvailableForStagingByTarget persistedEntryCount:@"_collectOverviewInformation"]);

  startupLastStagingFromOSVersion = [(MADAutoAssetStager *)self startupLastStagingFromOSVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupLastStagingFromOSVersion:startupLastStagingFromOSVersion];

  startupLastStagingFromBuildVersion = [(MADAutoAssetStager *)self startupLastStagingFromBuildVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupLastStagingFromBuildVersion:startupLastStagingFromBuildVersion];

  startupAssetTargetOSVersion = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupAssetTargetOSVersion:startupAssetTargetOSVersion];

  startupAssetTargetBuildVersion = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupAssetTargetBuildVersion:startupAssetTargetBuildVersion];

  [(MANAutoAssetControlStagerInformation *)v5 setStartupCandidateAssetCount:[(MADAutoAssetStager *)self startupCandidateAssetCount]];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupDeterminedAvailableAssetCount:[(MADAutoAssetStager *)self startupDeterminedAvailableAssetCount]];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupActivelyStagingAssetCount:[(MADAutoAssetStager *)self startupActivelyStagingAssetCount]];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupAwaitingStagingAssetCount:[(MADAutoAssetStager *)self startupAwaitingStagingAssetCount]];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupStagedAssetCount:[(MADAutoAssetStager *)self startupStagedAssetCount]];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupStagedAssetTotalContentBytes:[(MADAutoAssetStager *)self startupStagedAssetTotalContentBytes]];
  [(MANAutoAssetControlStagerInformation *)v5 setStartupPreviousOTASituation:[(MADAutoAssetStager *)self startupPreviousOTASituation]];
  stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setStagingFromOSVersion:stagingFromOSVersion];

  stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setStagingFromBuildVersion:stagingFromBuildVersion];

  [(MANAutoAssetControlStagerInformation *)v5 setLoadPersistedPostponed:[(MADAutoAssetStager *)self loadPersistedPostponed]];
  [(MANAutoAssetControlStagerInformation *)v5 setAlwaysPromoteStagedAssets:[(MADAutoAssetStager *)self alwaysPromoteStagedAssets]];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setAssetTargetOSVersion:assetTargetOSVersion];

  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setAssetTargetBuildVersion:assetTargetBuildVersion];

  assetTargetTrainName4 = [(MADAutoAssetStager *)self assetTargetTrainName];
  [(MANAutoAssetControlStagerInformation *)v5 setAssetTargetTrainName:assetTargetTrainName4];

  assetTargetRestoreVersion4 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  [(MANAutoAssetControlStagerInformation *)v5 setAssetTargetRestoreVersion:assetTargetRestoreVersion4];

  optionalAssetSizeAllowed = [(MADAutoAssetStager *)self optionalAssetSizeAllowed];
  [(MANAutoAssetControlStagerInformation *)v5 setOptionalAssetSizeAllowed:optionalAssetSizeAllowed];

  -[MANAutoAssetControlStagerInformation setActiveTargetCandidatesForStagingRequiredCount:](v5, "setActiveTargetCandidatesForStagingRequiredCount:", [v16 count]);
  -[MANAutoAssetControlStagerInformation setActiveTargetCandidatesForStagingOptionalCount:](v5, "setActiveTargetCandidatesForStagingOptionalCount:", [v15 count]);
  -[MANAutoAssetControlStagerInformation setActiveTargetCandidateSetConfigurationsRequiredCount:](v5, "setActiveTargetCandidateSetConfigurationsRequiredCount:", [v14 count]);
  -[MANAutoAssetControlStagerInformation setActiveTargetCandidateSetConfigurationsOptionalCount:](v5, "setActiveTargetCandidateSetConfigurationsOptionalCount:", [v13 count]);
  -[MANAutoAssetControlStagerInformation setActiveTargetAvailableForStagingRequiredCount:](v5, "setActiveTargetAvailableForStagingRequiredCount:", [v99 count]);
  -[MANAutoAssetControlStagerInformation setActiveTargetAvailableForStagingOptionalCount:](v5, "setActiveTargetAvailableForStagingOptionalCount:", [assetTargetTrainName2 count]);
  if (assetTargetRestoreVersion2)
  {
    [(MANAutoAssetControlStagerInformation *)v5 setOtherTargetName:assetTargetRestoreVersion2];
    -[MANAutoAssetControlStagerInformation setOtherTargetCandidatesForStagingRequiredCount:](v5, "setOtherTargetCandidatesForStagingRequiredCount:", [v11 count]);
    -[MANAutoAssetControlStagerInformation setOtherTargetCandidatesForStagingOptionalCount:](v5, "setOtherTargetCandidatesForStagingOptionalCount:", [v91 count]);
    -[MANAutoAssetControlStagerInformation setOtherTargetCandidateSetConfigurationsRequiredCount:](v5, "setOtherTargetCandidateSetConfigurationsRequiredCount:", [v92 count]);
    -[MANAutoAssetControlStagerInformation setOtherTargetCandidateSetConfigurationsOptionalCount:](v5, "setOtherTargetCandidateSetConfigurationsOptionalCount:", [v90 count]);
    -[MANAutoAssetControlStagerInformation setOtherTargetAvailableForStagingRequiredCount:](v5, "setOtherTargetAvailableForStagingRequiredCount:", [v89 count]);
    -[MANAutoAssetControlStagerInformation setOtherTargetAvailableForStagingOptionalCount:](v5, "setOtherTargetAvailableForStagingOptionalCount:", [v88 count]);
  }

  stagingClientDetermineRequests = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
  -[MANAutoAssetControlStagerInformation setStagingClientDetermineRequestsCount:](v5, "setStagingClientDetermineRequestsCount:", [stagingClientDetermineRequests count]);

  stagingClientDownloadRequest = [(MADAutoAssetStager *)self stagingClientDownloadRequest];
  [(MANAutoAssetControlStagerInformation *)v5 setStagingClientDownloadRequestActive:stagingClientDownloadRequest != 0];

  stagingClientRequest = [(MADAutoAssetStager *)self stagingClientRequest];
  [(MANAutoAssetControlStagerInformation *)v5 setStagingClientRequestActive:stagingClientRequest != 0];

  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  [(MANAutoAssetControlStagerInformation *)v5 setStagingClientName:stagingClientName];

  setConfigurations = [(MADAutoAssetStager *)self setConfigurations];
  -[MANAutoAssetControlStagerInformation setSetConfigurationsCount:](v5, "setSetConfigurationsCount:", [setConfigurations count]);

  setTargets = [(MADAutoAssetStager *)self setTargets];
  -[MANAutoAssetControlStagerInformation setSetTargetsCount:](v5, "setSetTargetsCount:", [setTargets count]);

  scheduledJobs = [(MADAutoAssetStager *)self scheduledJobs];
  -[MANAutoAssetControlStagerInformation setScheduledJobsCount:](v5, "setScheduledJobsCount:", [scheduledJobs count]);

  candidatesForStaging = [(MADAutoAssetStager *)self candidatesForStaging];
  -[MANAutoAssetControlStagerInformation setCandidatesForStagingCount:](v5, "setCandidatesForStagingCount:", [candidatesForStaging count]);

  candidateSetConfigurations = [(MADAutoAssetStager *)self candidateSetConfigurations];
  -[MANAutoAssetControlStagerInformation setCandidateSetConfigurationsCount:](v5, "setCandidateSetConfigurationsCount:", [candidateSetConfigurations count]);

  setLookupResults = [(MADAutoAssetStager *)self setLookupResults];
  -[MANAutoAssetControlStagerInformation setSetLookupResultsCount:](v5, "setSetLookupResultsCount:", [setLookupResults count]);

  baseForStagingDescriptors = [(MADAutoAssetStager *)self baseForStagingDescriptors];
  -[MANAutoAssetControlStagerInformation setBaseForStagingDescriptorsCount:](v5, "setBaseForStagingDescriptorsCount:", [baseForStagingDescriptors count]);

  determiningBySelector = [(MADAutoAssetStager *)self determiningBySelector];
  -[MANAutoAssetControlStagerInformation setDeterminingBySelectorCount:](v5, "setDeterminingBySelectorCount:", [determiningBySelector count]);

  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  -[MANAutoAssetControlStagerInformation setAvailableForStagingCount:](v5, "setAvailableForStagingCount:", [availableForStaging count]);

  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  -[MANAutoAssetControlStagerInformation setAwaitingStagingAttemptCount:](v5, "setAwaitingStagingAttemptCount:", [awaitingStagingAttempt count]);

  successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
  -[MANAutoAssetControlStagerInformation setSuccessfullyStagedCount:](v5, "setSuccessfullyStagedCount:", [successfullyStaged count]);

  [(MANAutoAssetControlStagerInformation *)v5 setOverallStagedTotalExpectedBytes:[(MADAutoAssetStager *)self overallStagedTotalExpectedBytes]];
  [(MANAutoAssetControlStagerInformation *)v5 setOverallStagedDownloadedSoFarBytes:[(MADAutoAssetStager *)self overallStagedDownloadedSoFarBytes]];
  [(MANAutoAssetControlStagerInformation *)v5 setCurrentStagedLastWrittenBytes:[(MADAutoAssetStager *)self currentStagedLastWrittenBytes]];
  [(MANAutoAssetControlStagerInformation *)v5 setCurrentStagedRemainingBytes:[(MADAutoAssetStager *)self currentStagedRemainingBytes]];
  eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
  -[MANAutoAssetControlStagerInformation setEliminationSelectorsCount:](v5, "setEliminationSelectorsCount:", [eliminationSelectors count]);

  eliminationSetConfigurationCurrentJob = [(MADAutoAssetStager *)self eliminationSetConfigurationCurrentJob];
  [(MANAutoAssetControlStagerInformation *)v5 setEliminationSetConfigurationCurrentJob:eliminationSetConfigurationCurrentJob != 0];

  eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
  -[MANAutoAssetControlStagerInformation setEliminationSelectorsAcknowledgedCount:](v5, "setEliminationSelectorsAcknowledgedCount:", [eliminationSelectorsAcknowledged count]);

  objc_autoreleasePoolPop(context);

  return v5;
}

+ (void)resumeFromPersisted
{
  v2 = +[MADAutoAssetStager autoAssetStager];
  v6.opaque[0] = 0;
  v6.opaque[1] = 0;
  v3 = _os_activity_create(&dword_0, "MADStager:resumeFromPersisted", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v3, &v6);

  if (v2)
  {
    autoStagerFSM = [v2 autoStagerFSM];
    v5 = [[MADAutoAssetStagerParam alloc] initWithSafeSummary:@"resumeFromPersisted"];
    [autoStagerFSM postEvent:@"ControlResumeFromPersisted" withInfo:v5];
  }

  else
  {
    autoStagerFSM = [MADAutoAssetControlManager selectDispatchQueue:0, v6.opaque[0], v6.opaque[1]];
    dispatch_async(autoStagerFSM, &__block_literal_global_1859);
  }

  os_activity_scope_leave(&v6);
}

void __41__MADAutoAssetStager_resumeFromPersisted__block_invoke(id a1)
{
  v1 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v1, OS_LOG_TYPE_ERROR))
  {
    *v2 = 0;
    _os_log_impl(&dword_0, v1, OS_LOG_TYPE_ERROR, "{AUTO-STAGER:resumeFromPersisted} | unable to determine previous staging information from persisted-state (no auto-asset-stager)", v2, 2u);
  }

  [MADAutoAssetControlManager stagerResumed:0 withSetLookupResults:0 performingNewOSPromotion:0 requiringLoadPriorToUse:0];
}

+ (void)finishSuspendedResumeFromPersisted
{
  v2 = +[MADAutoAssetStager autoAssetStager];
  v3 = v2;
  if (v2)
  {
    autoStagerFSM = [v2 autoStagerFSM];
    v5 = [[MADAutoAssetStagerParam alloc] initWithSafeSummary:@"finishSuspendedResumeFromPersisted"];
    [autoStagerFSM postEvent:@"ControlFinishResumeFromPersisted" withInfo:v5];
  }

  else
  {
    autoStagerFSM = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM, OS_LOG_TYPE_ERROR))
    {
      *v6 = 0;
      _os_log_impl(&dword_0, autoStagerFSM, OS_LOG_TYPE_ERROR, "{AUTO-STAGER:finishSuspendedResumeFromPersisted} | no auto-asset-stager", v6, 2u);
    }
  }
}

- (int64_t)action_LoadDecideNewOSPromote:(id)promote error:(id *)error
{
  promoteCopy = promote;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:LoadDecideNewOSPromote", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  persistedState = [(MADAutoAssetStager *)self persistedState];
  [persistedState loadPersistedState:@"LoadDecideNewOSPromote"];

  persistedState2 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState2 persistedConfig];
  v11 = [persistedConfig stringForKey:@"lastStagingFromOSVersion"];
  [(MADAutoAssetStager *)self setStartupLastStagingFromOSVersion:v11];

  persistedState3 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig2 = [persistedState3 persistedConfig];
  v14 = [persistedConfig2 stringForKey:@"lastStagingFromBuildVersion"];
  [(MADAutoAssetStager *)self setStartupLastStagingFromBuildVersion:v14];

  persistedState4 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig3 = [persistedState4 persistedConfig];
  v17 = [persistedConfig3 stringForKey:@"assetTargetOSVersion"];
  [(MADAutoAssetStager *)self setStartupAssetTargetOSVersion:v17];

  persistedState5 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig4 = [persistedState5 persistedConfig];
  v20 = [persistedConfig4 stringForKey:@"assetTargetBuildVersion"];
  [(MADAutoAssetStager *)self setStartupAssetTargetBuildVersion:v20];

  persistedState6 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig5 = [persistedState6 persistedConfig];
  v23 = [persistedConfig5 stringForKey:@"assetTargetTrainName"];
  [(MADAutoAssetStager *)self setStartupAssetTargetTrainName:v23];

  persistedState7 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig6 = [persistedState7 persistedConfig];
  v26 = [persistedConfig6 stringForKey:@"assetTargetRestoreVersion"];
  [(MADAutoAssetStager *)self setStartupAssetTargetRestoreVersion:v26];

  persistedState8 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig7 = [persistedState8 persistedConfig];
  -[MADAutoAssetStager setStartupModeByGroups:](self, "setStartupModeByGroups:", [persistedConfig7 BOOLeanForKey:@"modeByGroups"]);

  persistedState9 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig8 = [persistedState9 persistedConfig];
  -[MADAutoAssetStager setStartupCandidateAssetCount:](self, "setStartupCandidateAssetCount:", [persistedConfig8 ullForKey:@"candidateAssetCount"]);

  persistedState10 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig9 = [persistedState10 persistedConfig];
  -[MADAutoAssetStager setStartupDeterminedAvailableAssetCount:](self, "setStartupDeterminedAvailableAssetCount:", [persistedConfig9 ullForKey:@"determinedAvailableAssetCount"]);

  persistedState11 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig10 = [persistedState11 persistedConfig];
  -[MADAutoAssetStager setStartupActivelyStagingAssetCount:](self, "setStartupActivelyStagingAssetCount:", [persistedConfig10 ullForKey:@"activelyStagingAssetCount"]);

  persistedState12 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig11 = [persistedState12 persistedConfig];
  -[MADAutoAssetStager setStartupAwaitingStagingAssetCount:](self, "setStartupAwaitingStagingAssetCount:", [persistedConfig11 ullForKey:@"awaitingStagingAssetCount"]);

  persistedState13 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig12 = [persistedState13 persistedConfig];
  -[MADAutoAssetStager setStartupStagedAssetCount:](self, "setStartupStagedAssetCount:", [persistedConfig12 ullForKey:@"stagedAssetCount"]);

  persistedState14 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig13 = [persistedState14 persistedConfig];
  -[MADAutoAssetStager setStartupStagedAssetTotalContentBytes:](self, "setStartupStagedAssetTotalContentBytes:", [persistedConfig13 ullForKey:@"stagedAssetTotalContentBytes"]);

  persistedState15 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig14 = [persistedState15 persistedConfig];
  -[MADAutoAssetStager setStartupStagedNoContent:](self, "setStartupStagedNoContent:", [persistedConfig14 BOOLeanForKey:@"stagedNoContent"]);

  persistedState16 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig15 = [persistedState16 persistedConfig];
  -[MADAutoAssetStager setStartupPreviousOTASituation:](self, "setStartupPreviousOTASituation:", [persistedConfig15 ullForKey:@"previousOTASituation"]);

  if ([(MADAutoAssetStager *)self startupPreviousOTASituation])
  {
    v45 = _MADLog(@"AutoStagerSituation");
    if (os_log_type_enabled(v45, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      v47 = [MANAutoAssetControlStagerInformation previousOTASituationName:[(MADAutoAssetStager *)self startupPreviousOTASituation]];
      *buf = 138543618;
      v113 = summary;
      v114 = 2114;
      v115 = v47;
      _os_log_impl(&dword_0, v45, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadDecideNewOSPromote} maintaining previous-OTA-situation | startupPreviousOTASituation:%{public}@", buf, 0x16u);
    }
  }

  else
  {
    [(MADAutoAssetStager *)self setStartupPreviousOTASituation:100];
    persistedState17 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig16 = [persistedState17 persistedConfig];
    [persistedConfig16 persistULL:-[MADAutoAssetStager startupPreviousOTASituation](self forKey:{"startupPreviousOTASituation"), @"previousOTASituation"}];

    v45 = _MADLog(@"AutoStagerSituation");
    if (os_log_type_enabled(v45, OS_LOG_TYPE_DEFAULT))
    {
      summary2 = [(MADAutoAssetStager *)self summary];
      v51 = [MANAutoAssetControlStagerInformation previousOTASituationName:[(MADAutoAssetStager *)self startupPreviousOTASituation]];
      *buf = 138543618;
      v113 = summary2;
      v114 = 2114;
      v115 = v51;
      _os_log_impl(&dword_0, v45, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadDecideNewOSPromote} first execution of MA daemon tracking previous-OTA-situation | startupPreviousOTASituation:%{public}@", buf, 0x16u);
    }
  }

  persistedState18 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig17 = [persistedState18 persistedConfig];
  -[MADAutoAssetStager setStoredTargetWithOTASituation:](self, "setStoredTargetWithOTASituation:", [persistedConfig17 BOOLeanForKey:@"storedTargetWithOTASituation"]);

  [(MADAutoAssetStager *)self _logPersistedConfigLoad:@"LoadDecideNewOSPromote" message:@"loaded configuration to determine whether new OS promotion is to occur"];
  v106 = [NSString alloc];
  startupLastStagingFromOSVersion = [(MADAutoAssetStager *)self startupLastStagingFromOSVersion];
  if (startupLastStagingFromOSVersion)
  {
    startupLastStagingFromOSVersion2 = [(MADAutoAssetStager *)self startupLastStagingFromOSVersion];
  }

  else
  {
    startupLastStagingFromOSVersion2 = @"N";
  }

  startupLastStagingFromBuildVersion = [(MADAutoAssetStager *)self startupLastStagingFromBuildVersion];
  if (startupLastStagingFromBuildVersion)
  {
    startupLastStagingFromBuildVersion2 = [(MADAutoAssetStager *)self startupLastStagingFromBuildVersion];
  }

  else
  {
    startupLastStagingFromBuildVersion2 = @"N";
  }

  startupAssetTargetOSVersion = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
  if (startupAssetTargetOSVersion)
  {
    startupAssetTargetOSVersion2 = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
  }

  else
  {
    startupAssetTargetOSVersion2 = @"N";
  }

  startupAssetTargetBuildVersion = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
  if (startupAssetTargetBuildVersion)
  {
    startupAssetTargetBuildVersion2 = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
  }

  else
  {
    startupAssetTargetBuildVersion2 = @"N";
  }

  startupAssetTargetTrainName = [(MADAutoAssetStager *)self startupAssetTargetTrainName];
  if (startupAssetTargetTrainName)
  {
    startupAssetTargetTrainName2 = [(MADAutoAssetStager *)self startupAssetTargetTrainName];
  }

  else
  {
    startupAssetTargetTrainName2 = @"N";
  }

  startupAssetTargetRestoreVersion = [(MADAutoAssetStager *)self startupAssetTargetRestoreVersion];
  startupAssetTargetRestoreVersion2 = @"N";
  if (startupAssetTargetRestoreVersion)
  {
    startupAssetTargetRestoreVersion2 = [(MADAutoAssetStager *)self startupAssetTargetRestoreVersion];
  }

  v107 = [v106 initWithFormat:@"lastStagingFrom:%@(%@), assetTarget:%@(%@)[%@(%@)]", startupLastStagingFromOSVersion2, startupLastStagingFromBuildVersion2, startupAssetTargetOSVersion2, startupAssetTargetBuildVersion2, startupAssetTargetTrainName2, startupAssetTargetRestoreVersion2];
  if (startupAssetTargetRestoreVersion)
  {
  }

  if (startupAssetTargetTrainName)
  {
  }

  if (startupAssetTargetBuildVersion)
  {
  }

  if (startupAssetTargetOSVersion)
  {
  }

  if (startupLastStagingFromBuildVersion)
  {
  }

  if (startupLastStagingFromOSVersion)
  {
  }

  startupLastStagingFromOSVersion3 = [(MADAutoAssetStager *)self startupLastStagingFromOSVersion];
  if (!startupLastStagingFromOSVersion3)
  {
    goto LABEL_53;
  }

  startupLastStagingFromBuildVersion3 = [(MADAutoAssetStager *)self startupLastStagingFromBuildVersion];
  if (!startupLastStagingFromBuildVersion3)
  {
    goto LABEL_52;
  }

  startupAssetTargetOSVersion3 = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
  if (!startupAssetTargetOSVersion3)
  {

LABEL_52:
    goto LABEL_53;
  }

  startupAssetTargetBuildVersion3 = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
  v67 = startupAssetTargetBuildVersion3 == 0;

  if (v67)
  {
LABEL_53:
    v83 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v83, OS_LOG_TYPE_DEFAULT))
    {
      summary3 = [(MADAutoAssetStager *)self summary];
      *buf = 138543618;
      v113 = summary3;
      v114 = 2114;
      v115 = v107;
      _os_log_impl(&dword_0, v83, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadDecideNewOSPromote} no persisted indication of any pre-software-update-staging status | %{public}@", buf, 0x16u);
    }

    v86 = @"ResumePostponeNoPromote";
    v77 = @"INVALID";
    goto LABEL_56;
  }

  if ([(MADAutoAssetStager *)self startupModeByGroups])
  {
    [(MADAutoAssetStager *)self setStagingClientChosen:1];
    [(MADAutoAssetStager *)self setStagingClientUsingGroups:1];
  }

  v68 = [NSString alloc];
  startupCandidateAssetCount = [(MADAutoAssetStager *)self startupCandidateAssetCount];
  startupDeterminedAvailableAssetCount = [(MADAutoAssetStager *)self startupDeterminedAvailableAssetCount];
  startupActivelyStagingAssetCount = [(MADAutoAssetStager *)self startupActivelyStagingAssetCount];
  startupAwaitingStagingAssetCount = [(MADAutoAssetStager *)self startupAwaitingStagingAssetCount];
  startupStagedAssetCount = [(MADAutoAssetStager *)self startupStagedAssetCount];
  startupStagedAssetTotalContentBytes = [(MADAutoAssetStager *)self startupStagedAssetTotalContentBytes];
  startupStagedNoContent = [(MADAutoAssetStager *)self startupStagedNoContent];
  v76 = @"Y";
  if (!startupStagedNoContent)
  {
    v76 = @"N";
  }

  v77 = [v68 initWithFormat:@"candidates:%llu, determinedAvailable:%llu, activelyStaging:%llu, awaitingStaging:%llu | [stagedAssets]count:%llu, totalContentBytes:%llu, noContent:%@", startupCandidateAssetCount, startupDeterminedAvailableAssetCount, startupActivelyStagingAssetCount, startupAwaitingStagingAssetCount, startupStagedAssetCount, startupStagedAssetTotalContentBytes, v76];
  if ([(MADAutoAssetStager *)self startupStagedAssetCount]&& [(MADAutoAssetStager *)self startupStagedAssetTotalContentBytes]|| [(MADAutoAssetStager *)self startupStagedNoContent])
  {
    if (![(MADAutoAssetStager *)self alwaysPromoteStagedAssets])
    {
      stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
      startupAssetTargetOSVersion4 = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
      if (([SUCore stringIsEqual:stagingFromOSVersion to:startupAssetTargetOSVersion4]& 1) != 0)
      {
        stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
        startupAssetTargetBuildVersion4 = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
        v97 = [SUCore stringIsEqual:stagingFromBuildVersion to:startupAssetTargetBuildVersion4];

        if (v97)
        {
          v83 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v83, OS_LOG_TYPE_DEFAULT))
          {
            summary4 = [(MADAutoAssetStager *)self summary];
            *buf = 138543874;
            v113 = summary4;
            v114 = 2114;
            v115 = v107;
            v116 = 2114;
            v117 = v77;
            _os_log_impl(&dword_0, v83, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadDecideNewOSPromote} have previously staged content now applicable to the currently running OS (migrating) | %{public}@ | %{public}@", buf, 0x20u);
          }

          goto LABEL_70;
        }
      }

      else
      {
      }

      v83 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v83, OS_LOG_TYPE_DEFAULT))
      {
        summary5 = [(MADAutoAssetStager *)self summary];
        stagingFromOSVersion2 = [(MADAutoAssetStager *)self stagingFromOSVersion];
        stagingFromBuildVersion2 = [(MADAutoAssetStager *)self stagingFromBuildVersion];
        startupAssetTargetOSVersion5 = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
        startupAssetTargetBuildVersion5 = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
        *buf = 138544386;
        v113 = summary5;
        v114 = 2114;
        v115 = stagingFromOSVersion2;
        v116 = 2114;
        v117 = stagingFromBuildVersion2;
        v118 = 2114;
        v119 = startupAssetTargetOSVersion5;
        v120 = 2114;
        v121 = startupAssetTargetBuildVersion5;
        _os_log_impl(&dword_0, v83, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadDecideNewOSPromote} not running new-OS | fromOS:%{public}@(%{public}@) | targetOS:%{public}@(%{public}@)", buf, 0x34u);
      }

      v86 = @"ResumePostponeNoPromote";
      goto LABEL_56;
    }

    stagingFromOSVersion3 = [(MADAutoAssetStager *)self stagingFromOSVersion];
    startupAssetTargetOSVersion6 = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
    if (([SUCore stringIsEqual:stagingFromOSVersion3 to:startupAssetTargetOSVersion6]& 1) != 0)
    {
      stagingFromBuildVersion3 = [(MADAutoAssetStager *)self stagingFromBuildVersion];
      startupAssetTargetBuildVersion6 = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
      v82 = [SUCore stringIsEqual:stagingFromBuildVersion3 to:startupAssetTargetBuildVersion6];

      if (v82)
      {
        v83 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v83, OS_LOG_TYPE_DEFAULT))
        {
          summary6 = [(MADAutoAssetStager *)self summary];
          *buf = 138543874;
          v113 = summary6;
          v114 = 2114;
          v115 = v107;
          v116 = 2114;
          v117 = v77;
          _os_log_impl(&dword_0, v83, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadDecideNewOSPromote} have previously staged content when configured to always promote (and now running target OS) | %{public}@ | %{public}@", buf, 0x20u);
        }

LABEL_70:
        v86 = @"ResumeNewOSPromote";
LABEL_56:

        goto LABEL_57;
      }
    }

    else
    {
    }

    v83 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v83, OS_LOG_TYPE_DEFAULT))
    {
      summary7 = [(MADAutoAssetStager *)self summary];
      *buf = 138543874;
      v113 = summary7;
      v114 = 2114;
      v115 = v107;
      v116 = 2114;
      v117 = v77;
      _os_log_impl(&dword_0, v83, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadDecideNewOSPromote} have previously staged content when configured to always promote (not running target OS) | %{public}@ | %{public}@", buf, 0x20u);
    }

    goto LABEL_70;
  }

  v86 = @"ResumePostponeNoPromote";
LABEL_57:
  if ([SUCore stringIsEqual:v86 to:@"ResumePostponeNoPromote"])
  {
    [(MADAutoAssetStager *)self setLoadPersistedPostponed:1];
    v87 = [MADAutoAssetControlManager selectDispatchQueue:0];
    dispatch_async(v87, &__block_literal_global_1885);
  }

  else if ([SUCore stringIsEqual:v86 to:@"ResumeNewOSPromote"])
  {
    [(MADAutoAssetStager *)self loadPersistedTargetLookupResults:@"LoadDecideNewOSPromote"];
    [(MADAutoAssetStager *)self _persistPreviousOTASituationIfTargetMatchesCurrentOS:@"LoadDecideNewOSPromote" settingStartupSituation:1];
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v89 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v91 = [(MADAutoAssetStagerParam *)v89 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v86 withInfo:v91];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_LoadPersistedDecideResume:(id)resume error:(id *)error
{
  resumeCopy = resume;
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:LoadPersistedDecideResume", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  v130 = [[NSMutableString alloc] initWithString:&stru_4BD3F0];
  [(MADAutoAssetStager *)selfCopy loadPersistedSetLookupResults];
  v8 = [(MADAutoAssetStager *)selfCopy getTargetLookupResultsForKey:0];
  [(MADAutoAssetStager *)selfCopy loadPersistedAvailableForStagingByTarget];
  [(MADAutoAssetStager *)selfCopy loadPersistedTargetLookupResults:@"LoadPersistedDecideResume"];
  stagingFromOSVersion = [(MADAutoAssetStager *)selfCopy stagingFromOSVersion];
  startupAssetTargetOSVersion = [(MADAutoAssetStager *)selfCopy startupAssetTargetOSVersion];
  if (([SUCore stringIsEqual:stagingFromOSVersion to:startupAssetTargetOSVersion]& 1) != 0)
  {
    stagingFromBuildVersion = [(MADAutoAssetStager *)selfCopy stagingFromBuildVersion];
    startupAssetTargetBuildVersion = [(MADAutoAssetStager *)selfCopy startupAssetTargetBuildVersion];
    v13 = [SUCore stringIsEqual:stagingFromBuildVersion to:startupAssetTargetBuildVersion];

    if (v13)
    {
      [v130 appendString:@"nowRunningTargetOS|"];
      v14 = selfCopy;
      v129 = 1;
      goto LABEL_6;
    }
  }

  else
  {
  }

  v129 = 0;
  v14 = selfCopy;
LABEL_6:
  startupLastStagingFromOSVersion = [(MADAutoAssetStager *)v14 startupLastStagingFromOSVersion];
  if (!startupLastStagingFromOSVersion)
  {
    v20 = @"ResumeNothingAvailable";
    goto LABEL_19;
  }

  startupLastStagingFromBuildVersion = [(MADAutoAssetStager *)v14 startupLastStagingFromBuildVersion];
  if (!startupLastStagingFromBuildVersion)
  {
    goto LABEL_17;
  }

  startupAssetTargetOSVersion2 = [(MADAutoAssetStager *)v14 startupAssetTargetOSVersion];
  if (!startupAssetTargetOSVersion2)
  {

LABEL_17:
    goto LABEL_18;
  }

  startupAssetTargetBuildVersion2 = [(MADAutoAssetStager *)v14 startupAssetTargetBuildVersion];
  v19 = startupAssetTargetBuildVersion2 == 0;

  if (v19)
  {
LABEL_18:
    v20 = @"ResumeNothingAvailable";
    v14 = selfCopy;
    goto LABEL_19;
  }

  v14 = selfCopy;
  if ((![(MADAutoAssetStager *)selfCopy startupStagedAssetCount]|| ![(MADAutoAssetStager *)selfCopy startupStagedAssetTotalContentBytes]) && ![(MADAutoAssetStager *)selfCopy startupStagedNoContent])
  {
    v99 = @"no staged content (purging)|";
    goto LABEL_159;
  }

  if (![(MADAutoAssetStager *)selfCopy alwaysPromoteStagedAssets])
  {
    if (v129)
    {
      [v130 appendString:@"have staged content (nowRunningTargetOS)|"];
      v20 = @"ResumeRunningTargetVersion";
      goto LABEL_19;
    }

    stagingFromOSVersion2 = [(MADAutoAssetStager *)selfCopy stagingFromOSVersion];
    startupLastStagingFromOSVersion2 = [(MADAutoAssetStager *)selfCopy startupLastStagingFromOSVersion];
    if (([SUCore stringIsEqual:stagingFromOSVersion2 to:startupLastStagingFromOSVersion2]& 1) != 0)
    {
      stagingFromBuildVersion2 = [(MADAutoAssetStager *)selfCopy stagingFromBuildVersion];
      startupLastStagingFromBuildVersion2 = [(MADAutoAssetStager *)selfCopy startupLastStagingFromBuildVersion];
      v120 = [SUCore stringIsEqual:stagingFromBuildVersion2 to:startupLastStagingFromBuildVersion2];

      if (v120)
      {
        [v130 appendString:@"have staged content (running last-staging-from-OS)|"];
        v14 = selfCopy;
        v20 = @"ResumeStaged";
        goto LABEL_19;
      }
    }

    else
    {
    }

    v99 = @"have staged content (purging)|";
    v14 = selfCopy;
LABEL_159:
    [v130 appendString:v99];
    v20 = @"ResumePurging";
    goto LABEL_19;
  }

  [v130 appendString:@"have staged content (alwaysPromoteStagedAssets)|"];
  v20 = @"ResumePromotingAllStaged";
LABEL_19:
  v131 = v20;
  if (((v129 | [SUCore stringIsEqual:"stringIsEqual:to:" to:?]^ 1) & 1) == 0)
  {
    persistedTargetLookupResults = [(MADAutoAssetStager *)v14 persistedTargetLookupResults];
    v22 = [persistedTargetLookupResults persistedEntryIDs:@"LoadPersistedDecideResume"];

    if ([v22 count])
    {
      stagingFromOSVersion3 = [(MADAutoAssetStager *)selfCopy stagingFromOSVersion];
      startupLastStagingFromOSVersion3 = [(MADAutoAssetStager *)selfCopy startupLastStagingFromOSVersion];
      if (([SUCore stringIsEqual:stagingFromOSVersion3 to:startupLastStagingFromOSVersion3]& 1) != 0)
      {
        stagingFromBuildVersion3 = [(MADAutoAssetStager *)selfCopy stagingFromBuildVersion];
        startupLastStagingFromBuildVersion3 = [(MADAutoAssetStager *)selfCopy startupLastStagingFromBuildVersion];
        v27 = [SUCore stringIsEqual:stagingFromBuildVersion3 to:startupLastStagingFromBuildVersion3];

        if (v27)
        {
          [v130 appendString:@"have target-lookup-results (running last-staging-from-OS)|"];
          v131 = @"ResumeGroupsAvailable";
        }
      }

      else
      {
      }
    }

    v14 = selfCopy;
  }

  if (([SUCore stringIsEqual:v131 to:@"ResumeNothingAvailable"]& 1) != 0 || ([SUCore stringIsEqual:v131 to:@"ResumePurging"]& 1) != 0 || ([SUCore stringIsEqual:v131 to:@"ResumeGroupsAvailable"]& 1) != 0)
  {
    v136 = 0;
    goto LABEL_30;
  }

  persistedState = [(MADAutoAssetStager *)v14 persistedState];
  v123 = [persistedState persistedEntryIDs:@"LoadPersistedDecideResume"];

  if (![v123 count])
  {
    v97 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v97, OS_LOG_TYPE_ERROR))
    {
      summary = [(MADAutoAssetStager *)selfCopy summary];
      *buf = 138543362;
      v170 = summary;
      _os_log_impl(&dword_0, v97, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} no persisted entries (purging)", buf, 0xCu);
    }

    [v130 appendString:@"no persisted entries (purging)|"];
    v136 = 0;
    v131 = @"ResumePurging";
    goto LABEL_156;
  }

  v164 = 0u;
  v165 = 0u;
  v162 = 0u;
  v163 = 0u;
  v133 = v123;
  v68 = [v133 countByEnumeratingWithState:&v162 objects:v191 count:16];
  if (!v68)
  {
    v124 = 0;
    v125 = 0;
    v127 = 0;
    v128 = 0;
    v126 = 0;
    goto LABEL_129;
  }

  v124 = 0;
  v125 = 0;
  v127 = 0;
  v128 = 0;
  v126 = 0;
  v135 = *v163;
  do
  {
    v69 = 0;
    v137 = v68;
    do
    {
      if (*v163 != v135)
      {
        objc_enumerationMutation(v133);
      }

      v70 = *(*(&v162 + 1) + 8 * v69);
      obja = objc_autoreleasePoolPush();
      persistedState2 = [(MADAutoAssetStager *)selfCopy persistedState];
      v72 = [persistedState2 persistedEntry:v70 fromLocation:@"LoadPersistedDecideResume"];

      if (v72)
      {
        v73 = [v72 stringForKey:@"lastStagingFromOSVersion"];
        v145 = [v72 stringForKey:@"lastStagingFromBuildVersion"];
        v142 = [v72 stringForKey:@"assetTargetOSVersion"];
        v139 = [v72 stringForKey:@"assetTargetBuildVersion"];
        v74 = [v72 ullForKey:@"assetRepresentation"];
        startupLastStagingFromOSVersion4 = [(MADAutoAssetStager *)selfCopy startupLastStagingFromOSVersion];
        if ([SUCore stringIsEqual:startupLastStagingFromOSVersion4 to:v73])
        {
          startupLastStagingFromBuildVersion4 = [(MADAutoAssetStager *)selfCopy startupLastStagingFromBuildVersion];
          if ([SUCore stringIsEqual:startupLastStagingFromBuildVersion4 to:v145])
          {
            startupAssetTargetOSVersion3 = [(MADAutoAssetStager *)selfCopy startupAssetTargetOSVersion];
            if (([SUCore stringIsEqual:startupAssetTargetOSVersion3 to:v142]& 1) != 0)
            {
              startupAssetTargetBuildVersion3 = [(MADAutoAssetStager *)selfCopy startupAssetTargetBuildVersion];
              v79 = [SUCore stringIsEqual:startupAssetTargetBuildVersion3 to:v139];

              if (v79)
              {
                if (v74 > 601)
                {
                  if (v74 == &stru_248.segname[2])
                  {
                    v80 = _MADLog(@"AutoStager");
                    ++v125;
                    if (os_log_type_enabled(v80, OS_LOG_TYPE_DEFAULT))
                    {
                      summary2 = [(MADAutoAssetStager *)selfCopy summary];
                      *buf = 138543618;
                      v170 = summary2;
                      v171 = 2114;
                      v172 = v70;
                      _os_log_impl(&dword_0, v80, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} staging entry:%{public}@", buf, 0x16u);
                    }

                    goto LABEL_102;
                  }

                  if (v74 == &stru_248.segname[3])
                  {
                    v84 = [v72 ullForKey:@"assetContentBytes"];
                    v80 = _MADLog(@"AutoStager");
                    ++v128;
                    v124 = &v124[v84];
                    if (os_log_type_enabled(v80, OS_LOG_TYPE_DEFAULT))
                    {
                      summary3 = [(MADAutoAssetStager *)selfCopy summary];
                      *buf = 138543618;
                      v170 = summary3;
                      v171 = 2114;
                      v172 = v70;
                      _os_log_impl(&dword_0, v80, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} staged entry:%{public}@", buf, 0x16u);
                    }

                    goto LABEL_102;
                  }
                }

                else
                {
                  if (v74 == stru_248.segname)
                  {
                    v80 = _MADLog(@"AutoStager");
                    ++v127;
                    if (os_log_type_enabled(v80, OS_LOG_TYPE_DEFAULT))
                    {
                      summary4 = [(MADAutoAssetStager *)selfCopy summary];
                      *buf = 138543618;
                      v170 = summary4;
                      v171 = 2114;
                      v172 = v70;
                      _os_log_impl(&dword_0, v80, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} candidate entry:%{public}@", buf, 0x16u);
                    }

                    goto LABEL_102;
                  }

                  if (v74 == &stru_248.segname[1])
                  {
                    v80 = _MADLog(@"AutoStager");
                    ++v126;
                    if (os_log_type_enabled(v80, OS_LOG_TYPE_DEFAULT))
                    {
                      summary5 = [(MADAutoAssetStager *)selfCopy summary];
                      *buf = 138543618;
                      v170 = summary5;
                      v171 = 2114;
                      v172 = v70;
                      _os_log_impl(&dword_0, v80, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} available entry:%{public}@", buf, 0x16u);
                    }

LABEL_102:

                    goto LABEL_103;
                  }
                }

                v80 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(v80, OS_LOG_TYPE_ERROR))
                {
                  summary6 = [(MADAutoAssetStager *)selfCopy summary];
                  *buf = 138543874;
                  v170 = summary6;
                  v171 = 2048;
                  v172 = v74;
                  v173 = 2114;
                  v174 = v70;
                  _os_log_impl(&dword_0, v80, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} unknown representation(%ld) for entry:%{public}@", buf, 0x20u);
                }

                goto LABEL_102;
              }

LABEL_100:
              v80 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v80, OS_LOG_TYPE_ERROR))
              {
                summary7 = [(MADAutoAssetStager *)selfCopy summary];
                *buf = 138543618;
                v170 = summary7;
                v171 = 2114;
                v172 = v70;
                _os_log_impl(&dword_0, v80, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} mismatched entry:%{public}@", buf, 0x16u);
              }

              goto LABEL_102;
            }
          }
        }

        goto LABEL_100;
      }

      v73 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v73, OS_LOG_TYPE_ERROR))
      {
        summary8 = [(MADAutoAssetStager *)selfCopy summary];
        *buf = 138543618;
        v170 = summary8;
        v171 = 2114;
        v172 = v70;
        _os_log_impl(&dword_0, v73, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} unable to determine previous status for entry:%{public}@", buf, 0x16u);
      }

LABEL_103:

      objc_autoreleasePoolPop(obja);
      v69 = v69 + 1;
    }

    while (v137 != v69);
    v68 = [v133 countByEnumeratingWithState:&v162 objects:v191 count:16];
  }

  while (v68);
LABEL_129:

  if ([(MADAutoAssetStager *)selfCopy startupCandidateAssetCount]== v127 && [(MADAutoAssetStager *)selfCopy startupDeterminedAvailableAssetCount]== v126)
  {
    startupActivelyStagingAssetCount = [(MADAutoAssetStager *)selfCopy startupActivelyStagingAssetCount];
    if (&startupActivelyStagingAssetCount[[(MADAutoAssetStager *)selfCopy startupAwaitingStagingAssetCount]] == v125 && [(MADAutoAssetStager *)selfCopy startupStagedAssetCount]== v128 && [(MADAutoAssetStager *)selfCopy startupStagedAssetTotalContentBytes]== v124)
    {
      v101 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v101, OS_LOG_TYPE_DEFAULT))
      {
        summary9 = [(MADAutoAssetStager *)selfCopy summary];
        *buf = 138543362;
        v170 = summary9;
        _os_log_impl(&dword_0, v101, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} persisted entry counts match staging summary counts", buf, 0xCu);
      }

      v136 = [(MADAutoAssetStager *)selfCopy _persistRebuildTrackingNewHandedOffDescriptors:v131];
      v124 = [[NSString alloc] initWithFormat:@"valid persisted counts (handedOffAsPromoted:%ld)|", objc_msgSend(v136, "count")];
      [v130 appendString:v124];
      goto LABEL_155;
    }
  }

  v124 = [[NSString alloc] initWithFormat:@"candidates:%llu, determinedAvailable:%llu, activelyStaging:%llu | [stagedAssets]count:%llu, totalContentBytes:%llu", v127, v126, v125, v128, v124];
  v104 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v104, OS_LOG_TYPE_ERROR))
  {
    summary10 = [(MADAutoAssetStager *)selfCopy summary];
    *buf = 138543618;
    v170 = summary10;
    v171 = 2114;
    v172 = v124;
    _os_log_impl(&dword_0, v104, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} staging summary differs from per-entry totals | entryTotals:%{public}@", buf, 0x16u);
  }

  v106 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v106, OS_LOG_TYPE_ERROR))
  {
    startupCandidateAssetCount = [(MADAutoAssetStager *)selfCopy startupCandidateAssetCount];
    startupDeterminedAvailableAssetCount = [(MADAutoAssetStager *)selfCopy startupDeterminedAvailableAssetCount];
    startupActivelyStagingAssetCount2 = [(MADAutoAssetStager *)selfCopy startupActivelyStagingAssetCount];
    startupAwaitingStagingAssetCount = [(MADAutoAssetStager *)selfCopy startupAwaitingStagingAssetCount];
    startupStagedAssetCount = [(MADAutoAssetStager *)selfCopy startupStagedAssetCount];
    startupStagedAssetTotalContentBytes = [(MADAutoAssetStager *)selfCopy startupStagedAssetTotalContentBytes];
    *buf = 134220544;
    v170 = startupCandidateAssetCount;
    v171 = 2048;
    v172 = v127;
    v173 = 2048;
    v174 = startupDeterminedAvailableAssetCount;
    v175 = 2048;
    v176 = v126;
    v177 = 2048;
    v178 = startupActivelyStagingAssetCount2;
    v179 = 2048;
    v180 = startupAwaitingStagingAssetCount;
    v181 = 2048;
    v182 = v125;
    v183 = 2048;
    v184 = startupStagedAssetCount;
    v185 = 2048;
    v186 = v128;
    v187 = 2048;
    v188 = startupStagedAssetTotalContentBytes;
    v189 = 2048;
    v190 = v124;
    _os_log_impl(&dword_0, v106, OS_LOG_TYPE_ERROR, "{LoadPersistedDecideResume} comparisons made | candidateAssetCount(%llu) to entryCandidateAssetCount(%llu) | determinedAvailableAssetCount(%llu) to entryDeterminedAvailableAssetCount(%llu) | (activelyStagingAssetCount(%llu) + awaitingStagingAssetCount(%llu)) to entryActivelyStagingAssetCount(%llu) | stagedAssetCount(%llu) to entryStagedAssetCount(%llu) | stagedAssetTotalContentBytes(%llu) to entryStagedAssetTotalContentBytes(%llu)", buf, 0x70u);
  }

  if (([SUCore stringIsEqual:v131 to:@"ResumePromotingAllStaged"]& 1) == 0 && ([SUCore stringIsEqual:v131 to:@"ResumeRunningTargetVersion"]& 1) == 0)
  {
    v121 = [SUCore stringIsEqual:v131 to:@"ResumeStaged"];
    if (v128)
    {
      v122 = v121;
    }

    else
    {
      v122 = 0;
    }

    if (v122)
    {
      goto LABEL_144;
    }

LABEL_154:
    [v130 appendString:@"invalid persisted counts|"];
    v136 = 0;
    v131 = @"ResumePurging";
    goto LABEL_155;
  }

  if (!v128)
  {
    goto LABEL_154;
  }

LABEL_144:
  v113 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v113, OS_LOG_TYPE_DEFAULT))
  {
    summary11 = [(MADAutoAssetStager *)selfCopy summary];
    *buf = 138543362;
    v170 = summary11;
    _os_log_impl(&dword_0, v113, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} preserving successfully staged content", buf, 0xCu);
  }

  v136 = [(MADAutoAssetStager *)selfCopy _persistRebuildTrackingNewHandedOffDescriptors:v131];
  v115 = [[NSString alloc] initWithFormat:@"valid persisted counts (non-exact match) (handedOffAsPromoted:%ld)|", objc_msgSend(v136, "count")];
  [v130 appendString:v115];

LABEL_155:
LABEL_156:

  v14 = selfCopy;
LABEL_30:
  if (([SUCore stringIsEqual:v131 to:@"ResumeNothingAvailable"]& 1) != 0 || [SUCore stringIsEqual:v131 to:@"ResumePurging"])
  {
    v28 = [(MADAutoAssetStager *)v14 _persistPreviousOTASituationIfTargetMatchesCurrentOS:@"LoadPersistedDecideResume" settingStartupSituation:v129];
    v29 = [NSString alloc];
    if (v129)
    {
      v30 = @"Y";
    }

    else
    {
      v30 = @"N";
    }

    if (v28)
    {
      v31 = @"Y";
    }

    else
    {
      v31 = @"N";
    }

    v140 = [v29 initWithFormat:@"removed persisted-state (once fully resumed) | nowRunningTargetOS:%@ | previousOTASituationAdopted:%@", v30, v31];
    [(MADAutoAssetStager *)v14 _persistRemoveAll:@"LoadPersistedDecideResume" message:v140 removingDetermined:v28 loggingConfig:1];
    v32 = [[NSString alloc] initWithFormat:@"purged (previousOTASituationAdopted:%@)|", v31];
    [v130 appendString:v32];
  }

  else
  {
    persistedState3 = [(MADAutoAssetStager *)v14 persistedState];
    v140 = [persistedState3 persistedEntryIDs:@"LoadPersistedDecideResume"];

    if ([v140 count])
    {
      v160 = 0u;
      v161 = 0u;
      v159 = 0u;
      v158 = 0u;
      obj = v140;
      v34 = [obj countByEnumeratingWithState:&v158 objects:v168 count:16];
      if (v34)
      {
        v35 = *v159;
        do
        {
          for (i = 0; i != v34; i = i + 1)
          {
            if (*v159 != v35)
            {
              objc_enumerationMutation(obj);
            }

            v37 = *(*(&v158 + 1) + 8 * i);
            v38 = objc_autoreleasePoolPush();
            persistedState4 = [(MADAutoAssetStager *)selfCopy persistedState];
            v40 = [persistedState4 persistedEntry:v37 fromLocation:@"LoadPersistedDecideResume"];

            if (v40)
            {
              v41 = [v40 ullForKey:@"assetRepresentation"];
              persistedState5 = [(MADAutoAssetStager *)selfCopy persistedState];
              v43 = [persistedState5 decodeFromLocation:@"LoadPersistedDecideResume" ofEntryName:v37 fromPersistedEntry:v40 decodingObjectForKey:@"assetDescriptor" ofClass:objc_opt_class() allowingNilObject:0];

              if (v43)
              {
                [(MADAutoAssetStager *)selfCopy _persistDescriptor:@"LoadPersistedDecideResume" operation:@"ENTRY_LOAD" persistingDescriptor:v43 withRepresentation:v41 message:@"loaded and validated entry"];
              }
            }

            else
            {
              v43 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v43, OS_LOG_TYPE_ERROR))
              {
                summary12 = [(MADAutoAssetStager *)selfCopy summary];
                *buf = 138543618;
                v170 = summary12;
                v171 = 2114;
                v172 = v37;
                _os_log_impl(&dword_0, v43, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} unable to load entry:%{public}@", buf, 0x16u);
              }
            }

            objc_autoreleasePoolPop(v38);
          }

          v34 = [obj countByEnumeratingWithState:&v158 objects:v168 count:16];
        }

        while (v34);
      }
    }

    [(MADAutoAssetStager *)selfCopy _logPersistedTableOfContents:@"LoadPersistedDecideResume"];
    LOBYTE(v28) = 0;
  }

  v45 = selfCopy;
  if (v129)
  {
    LOBYTE(v28) = [(MADAutoAssetStager *)selfCopy _persistPreviousOTASituationIfTargetMatchesCurrentOS:@"LoadPersistedDecideResume" settingStartupSituation:0];
  }

  if (([SUCore stringIsEqual:v131 to:@"ResumeGroupsAvailable"]& 1) == 0 && ([SUCore stringIsEqual:v131 to:@"ResumeStaged"]& 1) == 0)
  {
    if (v28 | (([SUCore stringIsEqual:v131 to:@"ResumePurging"]& 1) == 0))
    {
      goto LABEL_62;
    }

    goto LABEL_61;
  }

  if (!v28)
  {
LABEL_61:
    startupAssetTargetOSVersion4 = [(MADAutoAssetStager *)selfCopy startupAssetTargetOSVersion];
    [(MADAutoAssetStager *)selfCopy setAssetTargetOSVersion:startupAssetTargetOSVersion4];

    startupAssetTargetBuildVersion4 = [(MADAutoAssetStager *)selfCopy startupAssetTargetBuildVersion];
    [(MADAutoAssetStager *)selfCopy setAssetTargetBuildVersion:startupAssetTargetBuildVersion4];

    startupAssetTargetTrainName = [(MADAutoAssetStager *)selfCopy startupAssetTargetTrainName];
    [(MADAutoAssetStager *)selfCopy setAssetTargetTrainName:startupAssetTargetTrainName];

    startupAssetTargetRestoreVersion = [(MADAutoAssetStager *)selfCopy startupAssetTargetRestoreVersion];
    [(MADAutoAssetStager *)selfCopy setAssetTargetRestoreVersion:startupAssetTargetRestoreVersion];

    [v130 appendString:@"adopted startup target|"];
    v45 = selfCopy;
  }

LABEL_62:
  if (v136)
  {
    v132 = [[NSString alloc] initWithFormat:@"loaded persisted-state (handedOffAsPromoted:%ld)", objc_msgSend(v136, "count")];
    newSetLookupResultsForTargetOS = [(MADAutoAssetStager *)v45 newSetLookupResultsForTargetOS];
    v156 = 0u;
    v157 = 0u;
    v154 = 0u;
    v155 = 0u;
    v138 = v136;
    v50 = [v138 countByEnumeratingWithState:&v154 objects:v167 count:16];
    if (v50)
    {
      v141 = *v155;
      do
      {
        v144 = v50;
        for (j = 0; j != v144; j = j + 1)
        {
          if (*v155 != v141)
          {
            objc_enumerationMutation(v138);
          }

          v52 = *(*(&v154 + 1) + 8 * j);
          v53 = [MAAutoAssetSelector alloc];
          objb = [v52 assetType];
          assetSpecifier = [v52 assetSpecifier];
          assetVersion = [v52 assetVersion];
          v56 = [v53 initForAssetType:objb withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];
          stagingClientName = [(MADAutoAssetStager *)selfCopy stagingClientName];
          stagingClientRequest = [resumeCopy stagingClientRequest];
          clientID = [stagingClientRequest clientID];
          assetTargetOSVersion = [(MADAutoAssetStager *)selfCopy assetTargetOSVersion];
          assetTargetBuildVersion = [(MADAutoAssetStager *)selfCopy assetTargetBuildVersion];
          [MADAutoAssetHistory recordOperation:220 toHistoryType:4 fromLayer:4 withSelector:v56 fromClient:stagingClientName fromClientDomain:clientID forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];
        }

        v50 = [v138 countByEnumeratingWithState:&v154 objects:v167 count:16];
      }

      while (v50);
    }

    v45 = selfCopy;
    v62 = v132;
  }

  else
  {
    newSetLookupResultsForTargetOS = 0;
    v62 = @"loaded persisted-state (no promotion)";
  }

  v63 = v62;
  [(MADAutoAssetStager *)v45 _logMilestoneFromLocation:@"LoadPersistedDecideResume" resultingInEvent:v131 forMilestoneActivity:?];
  if ([(MADAutoAssetStager *)v45 loadPersistedPostponed])
  {
    if (([SUCore stringIsEqual:v131 to:@"ResumePromotingAllStaged"]& 1) != 0 || [SUCore stringIsEqual:v131 to:@"ResumeRunningTargetVersion"])
    {
      autoStagerFSM2 = [(MADAutoAssetStager *)v45 autoStagerFSM];
      diag = [autoStagerFSM2 diag];
      [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{LoadPersistedDecideResume} beyond delivery of new-OS promotion content yet have content to be promoted" withResult:6101 withError:0];

      [v130 appendString:@"ANOMALY(content to be promoted)|"];
      v45 = selfCopy;
      v131 = @"ResumePurging";
    }
  }

  else
  {
    if ((v129 & 1) != 0 || [(MADAutoAssetStager *)v45 alwaysPromoteStagedAssets])
    {
      [(MADAutoAssetStager *)v45 _persistRemoveAll:@"LoadPersistedDecideResume" message:@"removed all persisted-state (everything has been new-OS-promoted)" removingDetermined:1 loggingConfig:0];
      [v130 appendString:@"removed all (new-OS-promoteed)|"];
      v66 = 1;
    }

    else
    {
      v66 = 0;
    }

    v89 = [MADAutoAssetControlManager selectDispatchQueue:0];
    block[0] = _NSConcreteStackBlock;
    block[1] = 3221225472;
    block[2] = __61__MADAutoAssetStager_action_LoadPersistedDecideResume_error___block_invoke;
    block[3] = &unk_4B3378;
    v151 = v136;
    v152 = newSetLookupResultsForTargetOS;
    v153 = v66;
    dispatch_async(v89, block);

    v45 = selfCopy;
  }

  [(MADAutoAssetStager *)v45 _limitCachePersistResultByGroupToCount:2 fromLocation:@"LoadPersistedDecideResume"];
  [(MADAutoAssetStager *)v45 setStartupLastStagingFromOSVersion:0];
  [(MADAutoAssetStager *)v45 setStartupLastStagingFromBuildVersion:0];
  [(MADAutoAssetStager *)v45 setStartupAssetTargetOSVersion:0];
  [(MADAutoAssetStager *)v45 setStartupAssetTargetBuildVersion:0];
  [(MADAutoAssetStager *)v45 setStartupAssetTargetTrainName:0];
  [(MADAutoAssetStager *)v45 setStartupAssetTargetRestoreVersion:0];
  [(MADAutoAssetStager *)v45 setStartupModeByGroups:0];
  [(MADAutoAssetStager *)v45 setStartupCandidateAssetCount:0];
  [(MADAutoAssetStager *)v45 setStartupDeterminedAvailableAssetCount:0];
  [(MADAutoAssetStager *)v45 setStartupActivelyStagingAssetCount:0];
  [(MADAutoAssetStager *)v45 setStartupAwaitingStagingAssetCount:0];
  [(MADAutoAssetStager *)v45 setStartupStagedAssetCount:0];
  [(MADAutoAssetStager *)v45 setStartupStagedAssetTotalContentBytes:0];
  [(MADAutoAssetStager *)v45 setStartupStagedNoContent:0];
  v90 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v90, OS_LOG_TYPE_DEFAULT))
  {
    summary13 = [(MADAutoAssetStager *)selfCopy summary];
    *buf = 138543874;
    v170 = summary13;
    v171 = 2114;
    v172 = v131;
    v173 = 2114;
    v174 = v130;
    _os_log_impl(&dword_0, v90, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {LoadPersistedDecideResume} final resume complete | followupEvent:%{public}@ | stagerResumeFlow:%{public}@", buf, 0x20u);
  }

  autoStagerFSM3 = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
  v93 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
  v95 = [(MADAutoAssetStagerParam *)v93 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM3 followupEvent:v131 withInfo:v95];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_ControlUnstagedDecideCancelJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v15.opaque[0] = 0;
  v15.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ControlUnstagedDecideCancelJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v15);

  assetType = [jobCopy assetType];
  LODWORD(extendedStateQueue) = [(MADAutoAssetStager *)self _isAssetTypeInvolvedInStaging:assetType];

  if (extendedStateQueue)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v11 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v13 = [(MADAutoAssetStagerParam *)v11 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"UnstagedFromControlCancelJob" withInfo:v13];
  }

  os_activity_scope_leave(&v15);

  return 0;
}

- (int64_t)action_ControlUnstagedDecideRemoveAll:(id)all error:(id *)error
{
  allCopy = all;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v15.opaque[0] = 0;
  v15.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ControlUnstagedDecideRemoveAll", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v15);

  assetType = [allCopy assetType];
  LODWORD(extendedStateQueue) = [(MADAutoAssetStager *)self _isAssetTypeInvolvedInStaging:assetType];

  if (extendedStateQueue)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v11 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v13 = [(MADAutoAssetStagerParam *)v11 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"UnstagedFromControlRemoveAll" withInfo:v13];
  }

  os_activity_scope_leave(&v15);

  return 0;
}

- (int64_t)action_ClientCheckLatchGroupsDetermine:(id)determine error:(id *)error
{
  determineCopy = determine;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v20.opaque[0] = 0;
  v20.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientCheckLatchGroupsDetermine", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v20);

  if ([(MADAutoAssetStager *)self stagingClientChosen:v20.opaque[0]]&& ![(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    v9 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v9, OS_LOG_TYPE_ERROR))
    {
      summary = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v22 = summary;
      _os_log_impl(&dword_0, v9, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {ClientCheckLatchGroupsDetermine} beginning BY-GROUP-MODE request when had been operating in ALL-MODE", buf, 0xCu);
    }

    v11 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:@"ClientCheckLatchGroupsDetermine" replyingToCleared:1];
  }

  [(MADAutoAssetStager *)self setStagingClientChosen:1];
  [(MADAutoAssetStager *)self setStagingClientUsingGroups:1];
  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  [persistedConfig persistBoolean:-[MADAutoAssetStager stagingClientUsingGroups](self forKey:"stagingClientUsingGroups") shouldPersist:{@"modeByGroups", 1}];

  stagingClientRequest = [determineCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientCheckLatchGroupsDetermine" adoptingSpecifiedTarget:1];

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v16 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v18 = [(MADAutoAssetStagerParam *)v16 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"ModeGroupsDetermineStart" withInfo:v18];

  os_activity_scope_leave(&v20);
  return 0;
}

- (int64_t)action_ClientCheckGroupsDecideAlreadyDetermined:(id)determined error:(id *)error
{
  determinedCopy = determined;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientCheckGroupsDecideAlreadyDetermined", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _replyWithAlreadyDetermined:@"ClientCheckGroupsDecideAlreadyDetermined" forEventInfo:determinedCopy orFollowupDetermineStart:1, v10.opaque[0], v10.opaque[1]];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_ClientCheckGroupsReplyAlreadyDetermined:(id)determined error:(id *)error
{
  determinedCopy = determined;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientCheckGroupsReplyAlreadyDetermined", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _replyWithAlreadyDetermined:@"ClientCheckGroupsReplyAlreadyDetermined" forEventInfo:determinedCopy orFollowupDetermineStart:0, v10.opaque[0], v10.opaque[1]];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_ClientAcceptAllDetermine:(id)determine error:(id *)error
{
  determineCopy = determine;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v24.opaque[0] = 0;
  v24.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientAcceptAllDetermine", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v24);

  if ([(MADAutoAssetStager *)self stagingClientChosen:v24.opaque[0]])
  {
    if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
    {
      [(MADAutoAssetStager *)self _stagingClientRequestDetermineClearAll:@"ClientAcceptAllDetermine"];
      _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
      v10 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"ClientAcceptAllDetermine" forStagingTargetName:_targetNameActiveClient replyingToCleared:1];

      v11 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
      {
        summary = [(MADAutoAssetStager *)self summary];
        *buf = 138543362;
        v26 = summary;
        _os_log_impl(&dword_0, v11, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {ClientAcceptAllDetermine} beginning ALL-MODE request when had been operating in BY-GROUP-MODE", buf, 0xCu);
      }
    }
  }

  else
  {
    [(MADAutoAssetStager *)self setStagingClientChosen:1];
  }

  [(MADAutoAssetStager *)self setStagingClientUsingGroups:0];
  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  [persistedConfig persistBoolean:-[MADAutoAssetStager stagingClientUsingGroups](self forKey:"stagingClientUsingGroups") shouldPersist:{@"modeByGroups", 1}];

  stagingClientRequest = [determineCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientAcceptAllDetermine" adoptingSpecifiedTarget:1];

  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:700 toHistoryType:4 fromLayer:4 fromClient:stagingClientName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v20 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v22 = [(MADAutoAssetStagerParam *)v20 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"ModeAllDetermineStart" withInfo:v22];

  os_activity_scope_leave(&v24);
  return 0;
}

- (int64_t)action_ClientPurgeDecideStagingClient:(id)client error:(id *)error
{
  clientCopy = client;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientPurgeDecideStagingClient", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  stagingClientRequest = [clientCopy stagingClientRequest];
  v10 = [(MADAutoAssetStager *)self _stagingClientMessageStagingClientProcessName:stagingClientRequest];

  stagingClientUsingGroups = [(MADAutoAssetStager *)self stagingClientUsingGroups];
  v12 = @"PurgeAcceptedRemoveAll";
  if (stagingClientUsingGroups)
  {
    v12 = @"PurgeAcceptedRemoveDownloaded";
  }

  v13 = v12;
  v14 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v14, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    if (v10)
    {
      v16 = v10;
    }

    else
    {
      v16 = @"N";
    }

    stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
    if (stagingClientName)
    {
      stagingClientName2 = [(MADAutoAssetStager *)self stagingClientName];
      if (clientCopy)
      {
LABEL_9:
        summary2 = [clientCopy summary];
LABEL_12:
        *buf = 138544130;
        v32 = summary;
        v33 = 2114;
        v34 = v16;
        v35 = 2114;
        v36 = stagingClientName2;
        v37 = 2114;
        v38 = summary2;
        _os_log_impl(&dword_0, v14, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientPurgeDecideStagingClient} purging of all pre-SU-staging tracking / content | requestingPurgeProcessName:%{public}@ | stagingClientName:%{public}@ | eventInfo:%{public}@", buf, 0x2Au);
        if (clientCopy)
        {
        }

        if (stagingClientName)
        {
        }

        goto LABEL_17;
      }
    }

    else
    {
      stagingClientName2 = @"N";
      if (clientCopy)
      {
        goto LABEL_9;
      }
    }

    summary2 = @"N";
    goto LABEL_12;
  }

LABEL_17:

  stagingClientRequest2 = [clientCopy stagingClientRequest];
  clientID = [stagingClientRequest2 clientID];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:802 toHistoryType:4 fromLayer:4 fromClient:v10 fromClientDomain:clientID forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  [(MADAutoAssetStager *)self _stagingClientRequestDownloadPurged:@"ClientPurgeDecideStagingClient"];
  stagingClientRequest3 = [clientCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest3 fromLocation:@"ClientPurgeDecideStagingClient" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _persistTargetOTASituation:204 fromLocation:@"ClientPurgeDecideStagingClient"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v26 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v28 = [(MADAutoAssetStagerParam *)v26 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v13 withInfo:v28];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_ClientEraseDecideStagingClient:(id)client error:(id *)error
{
  clientCopy = client;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v24.opaque[0] = 0;
  v24.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientEraseDecideStagingClient", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v24);

  stagingClientRequest = [clientCopy stagingClientRequest];
  v10 = [(MADAutoAssetStager *)self _stagingClientMessageStagingClientProcessName:stagingClientRequest];

  v11 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    if (v10)
    {
      v13 = v10;
    }

    else
    {
      v13 = @"N";
    }

    stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
    if (stagingClientName)
    {
      stagingClientName2 = [(MADAutoAssetStager *)self stagingClientName];
    }

    else
    {
      stagingClientName2 = @"N";
    }

    *buf = 138543874;
    v26 = summary;
    v27 = 2114;
    v28 = v13;
    v29 = 2114;
    v30 = stagingClientName2;
    _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientEraseDecideStagingClient} erasing all pre-SU-staging tracking / content | requestingEraseProcessName:%{public}@ | stagingClientName:%{public}@", buf, 0x20u);
    if (stagingClientName)
    {
    }
  }

  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:805 toHistoryType:4 fromLayer:4 fromClient:v10 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  [(MADAutoAssetStager *)self _stagingClientRequestDownloadPurged:@"ClientEraseDecideStagingClient"];
  stagingClientRequest2 = [clientCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest2 fromLocation:@"ClientEraseDecideStagingClient" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _persistErasePreviousOTASituation:@"ClientEraseDecideStagingClient"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v20 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v22 = [(MADAutoAssetStagerParam *)v20 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"PurgeEraseAcceptedRemoveAll" withInfo:v22];

  os_activity_scope_leave(&v24);
  return 0;
}

- (int64_t)action_ClientContinueUsingLatestRequest:(id)request error:(id *)error
{
  requestCopy = request;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientContinueUsingLatestRequest", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  stagingClientRequest = [requestCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientContinueUsingLatestRequest" adoptingSpecifiedTarget:0];

  v10 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    *buf = 138543362;
    v15 = summary;
    _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientContinueUsingLatestRequest} staging-client-request was received when already performing requested operation (stale earlier request has been replied to with failure)", buf, 0xCu);
  }

  os_activity_scope_leave(&v13);
  return 0;
}

- (int64_t)action_ClientRequestAlreadyDownloaded:(id)downloaded error:(id *)error
{
  downloadedCopy = downloaded;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientRequestAlreadyDownloaded", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  stagingClientRequest = [downloadedCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientRequestAlreadyDownloaded" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _clearBeforeDetermineAvailable:@"ClientRequestAlreadyDownloaded" removingDetermined:1];
  [(MADAutoAssetStager *)self _persistLastStagingFrom:@"ClientRequestAlreadyDownloaded"];
  [(MADAutoAssetStager *)self startMaxTimeSpentDeterminingTimer];
  +[MADAutoAssetControlManager stagerRequestAlreadyDownloadedDescriptors];
  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  stagingClientRequest2 = [downloadedCopy stagingClientRequest];
  clientID = [stagingClientRequest2 clientID];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:700 toHistoryType:4 fromLayer:4 fromClient:stagingClientName fromClientDomain:clientID forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  [(MADAutoAssetStager *)self _logMilestoneFromLocation:@"ClientRequestAlreadyDownloaded" resultingInEvent:0 forMilestoneActivity:@"beginning determine-available-for-staging phase"];
  os_activity_scope_leave(&state);

  return 0;
}

- (int64_t)action_ClientAcceptNextAvailableBeginDownload:(id)download error:(id *)error
{
  downloadCopy = download;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientAcceptNextAvailableBeginDownload", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  v9 = [(MADAutoAssetStager *)self stagingClientName:v14.opaque[0]];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:701 toHistoryType:4 fromLayer:4 fromClient:v9 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  stagingClientRequest = [downloadCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientAcceptNextAvailableBeginDownload" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _setupAwaitingStagingAndBeginFirstDownload];
  [(MADAutoAssetStager *)self _logMilestoneFromLocation:@"ClientAcceptNextAvailableBeginDownload" resultingInEvent:0 forMilestoneActivity:@"beginning download-available-for-staging phase"];
  os_activity_scope_leave(&v14);

  return 0;
}

- (int64_t)action_ClientAcceptCancelActiveJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientAcceptCancelActiveJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups:v14.opaque[0]])
  {
    _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
    v10 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"ClientAcceptCancelActiveJob" forStagingTargetName:_targetNameActiveClient replyingToCleared:1];
  }

  else
  {
    v11 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:@"ClientAcceptCancelActiveJob" replyingToCleared:1];
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituation:204 fromLocation:@"ClientAcceptCancelActiveJob"];
  stagingClientRequest = [jobCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientAcceptCancelActiveJob" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _cancelCurrentJob];
  os_activity_scope_leave(&v14);

  return 0;
}

- (int64_t)action_ClientAcceptEraseCancelActiveJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientAcceptEraseCancelActiveJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups:v14.opaque[0]])
  {
    _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
    v10 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"ClientAcceptEraseCancelActiveJob" forStagingTargetName:_targetNameActiveClient replyingToCleared:1];
  }

  else
  {
    v11 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:@"ClientAcceptEraseCancelActiveJob" replyingToCleared:1];
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituation:204 fromLocation:@"ClientAcceptEraseCancelActiveJob"];
  [(MADAutoAssetStager *)self _persistErasePreviousOTASituation:@"ClientAcceptEraseCancelActiveJob"];
  stagingClientRequest = [jobCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientAcceptEraseCancelActiveJob" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _cancelCurrentJob];
  os_activity_scope_leave(&v14);

  return 0;
}

- (int64_t)action_ClientAcceptEraseActiveJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v12.opaque[0] = 0;
  v12.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientAcceptEraseActiveJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v12);

  [(MADAutoAssetStager *)self setStagingClientChosen:0, v12.opaque[0], v12.opaque[1]];
  [(MADAutoAssetStager *)self setStagingClientUsingGroups:0];
  v9 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:@"ClientAcceptEraseActiveJob" replyingToCleared:1];
  [(MADAutoAssetStager *)self _persistErasePreviousOTASituation:@"ClientAcceptEraseActiveJob"];
  stagingClientRequest = [jobCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientAcceptEraseActiveJob" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _cancelCurrentJob];
  os_activity_scope_leave(&v12);

  return 0;
}

- (int64_t)action_ClientAcceptRemoveAllReplyPurged:(id)purged error:(id *)error
{
  purgedCopy = purged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientAcceptRemoveAllReplyPurged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  [(MADAutoAssetStager *)self _stagingClientRequestDownloadPurged:@"ClientAcceptRemoveAllReplyPurged", v14.opaque[0], v14.opaque[1]];
  stagingClientRequest = [purgedCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientAcceptRemoveAllReplyPurged" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _clearBeforeDetermineAvailable:@"ClientAcceptRemoveAllReplyPurged" removingDetermined:0];
  [(MADAutoAssetStager *)self _clearRemoveByGroupTargets:@"ClientAcceptRemoveAllReplyPurged" removingDetermined:0];
  [(MADAutoAssetStager *)self _persistTargetOTASituation:204 fromLocation:@"ClientAcceptRemoveAllReplyPurged"];
  [(MADAutoAssetStager *)self _replyToStagingClientOperationSuccess];
  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:803 toHistoryType:4 fromLayer:4 fromClient:stagingClientName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  os_activity_scope_leave(&v14);
  return 0;
}

- (int64_t)action_ClientAcceptRemoveAllReplyErased:(id)erased error:(id *)error
{
  erasedCopy = erased;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientAcceptRemoveAllReplyErased", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  [(MADAutoAssetStager *)self _stagingClientRequestDownloadPurged:@"ClientAcceptRemoveAllReplyErased", v14.opaque[0], v14.opaque[1]];
  stagingClientRequest = [erasedCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientAcceptRemoveAllReplyErased" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _clearBeforeDetermineAvailable:@"ClientAcceptRemoveAllReplyErased" removingDetermined:1];
  [(MADAutoAssetStager *)self _clearRemoveByGroupTargets:@"ClientAcceptRemoveAllReplyErased" removingDetermined:1];
  [(MADAutoAssetStager *)self _persistErasePreviousOTASituation:@"ClientAcceptRemoveAllReplyErased"];
  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"ClientAcceptRemoveAllReplyErased" alsoPerformingPurgeAll:1 removingDetermined:1];
  [(MADAutoAssetStager *)self _replyToStagingClientOperationSuccess];
  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:806 toHistoryType:4 fromLayer:4 fromClient:stagingClientName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  os_activity_scope_leave(&v14);
  return 0;
}

- (int64_t)action_ClientNothingStaged:(id)staged error:(id *)error
{
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v11.opaque[0] = 0;
  v11.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientNothingStaged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v11);

  stagingClientRequest = [stagedCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientNothingStaged" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _replyNothingStaged:@"ClientNothingStaged"];
  os_activity_scope_leave(&v11);

  return 0;
}

- (int64_t)action_ClientHaveStagedContent:(id)content error:(id *)error
{
  contentCopy = content;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v11.opaque[0] = 0;
  v11.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientHaveStagedContent", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v11);

  stagingClientRequest = [contentCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientHaveStagedContent" adoptingSpecifiedTarget:0];

  [(MADAutoAssetStager *)self _replyHaveStagedContent:@"ClientHaveStagedContent" withEventInfo:contentCopy];
  os_activity_scope_leave(&v11);

  return 0;
}

- (int64_t)action_ClientNewerReplySameOrEmptyDetermine:(id)determine error:(id *)error
{
  determineCopy = determine;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v16.opaque[0] = 0;
  v16.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientNewerReplySameOrEmptyDetermine", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v16);

  stagingClientRequest = [determineCopy stagingClientRequest];
  LODWORD(extendedStateQueue) = [(MADAutoAssetStager *)self _isStagingClientRequestForActiveTarget:stagingClientRequest fromLocation:@"ClientNewerReplySameOrEmptyDetermine"];

  if (extendedStateQueue)
  {
    stagingClientRequest2 = [determineCopy stagingClientRequest];
    [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest2 fromLocation:@"ClientNewerReplySameOrEmptyDetermine" adoptingSpecifiedTarget:1];

    v11 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v18 = summary;
      _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientNewerReplySameOrEmptyDetermine} [STAGING-CLIENT-REQUEST(DETERMINE)] was received when already performing requested operation for same target (stale earlier request has been replied to with empty success)", buf, 0xCu);
    }
  }

  else
  {
    stagingClientRequest3 = [determineCopy stagingClientRequest];
    [(MADAutoAssetStager *)self _replyNoCandidates:@"ClientNewerReplySameOrEmptyDetermine" replyingToStagingRequest:stagingClientRequest3];

    v11 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
    {
      summary2 = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v18 = summary2;
      _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientNewerReplySameOrEmptyDetermine} [STAGING-CLIENT-REQUEST(DETERMINE)] when committed to other operation | [NO-CANDIDATES]", buf, 0xCu);
    }
  }

  os_activity_scope_leave(&v16);
  return 0;
}

- (int64_t)action_ClientNewerReplyEmptyDetermine:(id)determine error:(id *)error
{
  determineCopy = determine;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v16.opaque[0] = 0;
  v16.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientNewerReplyEmptyDetermine", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v16);

  stagingClientRequest = [determineCopy stagingClientRequest];
  LODWORD(extendedStateQueue) = [(MADAutoAssetStager *)self _isStagingClientRequestForActiveTarget:stagingClientRequest fromLocation:@"ClientNewerReplySameOrEmptyDetermine"];

  if (extendedStateQueue)
  {
    stagingClientRequest2 = [determineCopy stagingClientRequest];
    [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest2 fromLocation:@"ClientNewerReplySameOrEmptyDetermine" adoptingSpecifiedTarget:0];

    v11 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v18 = summary;
      _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientNewerReplySameOrEmptyDetermine} [STAGING-CLIENT-REQUEST(DETERMINE)] was received when already performing requested operation for same target (stale earlier request has been replied to with empty success)", buf, 0xCu);
    }
  }

  else
  {
    stagingClientRequest3 = [determineCopy stagingClientRequest];
    [(MADAutoAssetStager *)self _replyNoCandidates:@"ClientNewerReplyEmptyDetermine" replyingToStagingRequest:stagingClientRequest3];

    v11 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
    {
      summary2 = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v18 = summary2;
      _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientNewerReplyEmptyDetermine} [STAGING-CLIENT-REQUEST(DETERMINE)] when committed to other operation | [NO-CANDIDATES]", buf, 0xCu);
    }
  }

  os_activity_scope_leave(&v16);
  return 0;
}

- (int64_t)action_ClientNewerReplySameOrEmptyDownload:(id)download error:(id *)error
{
  downloadCopy = download;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v18.opaque[0] = 0;
  v18.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientNewerReplySameOrEmptyDownload", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v18);

  stagingClientRequest = [downloadCopy stagingClientRequest];
  LODWORD(extendedStateQueue) = [(MADAutoAssetStager *)self _isStagingClientRequestForActiveTarget:stagingClientRequest fromLocation:@"ClientNewerReplySameOrEmptyDownload"];

  if (extendedStateQueue)
  {
    _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
    v11 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"ClientNewerReplySameOrEmptyDownload" forStagingTargetName:_targetNameActiveClient replyingToCleared:1];

    stagingClientRequest2 = [downloadCopy stagingClientRequest];
    [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest2 fromLocation:@"ClientNewerReplySameOrEmptyDownload" adoptingSpecifiedTarget:1];

    v13 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v13, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v20 = summary;
      _os_log_impl(&dword_0, v13, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientNewerReplySameOrEmptyDownload} [STAGING-CLIENT-REQUEST(GENERAL)] was received when already performing requested operation for same target (stale earlier request has been replied to with empty success)", buf, 0xCu);
    }
  }

  else
  {
    stagingClientRequest3 = [downloadCopy stagingClientRequest];
    [(MADAutoAssetStager *)self _replyNothingStaged:@"ClientNewerReplySameOrEmptyDownload" replyingToStagingRequest:stagingClientRequest3];

    v13 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v13, OS_LOG_TYPE_DEFAULT))
    {
      summary2 = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v20 = summary2;
      _os_log_impl(&dword_0, v13, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientNewerReplySameOrEmptyDownload} [STAGING-CLIENT-REQUEST(GENERAL)] when committed to other operation | [NOTHING-STAGED]", buf, 0xCu);
    }
  }

  os_activity_scope_leave(&v18);
  return 0;
}

- (int64_t)action_ClientNewerReplyEmptyDownload:(id)download error:(id *)error
{
  downloadCopy = download;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientNewerReplyEmptyDownload", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  stagingClientRequest = [downloadCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _replyNothingStaged:@"ClientNewerReplyEmptyDownload" replyingToStagingRequest:stagingClientRequest];

  v10 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    *buf = 138543362;
    v15 = summary;
    _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientNewerReplyEmptyDownload} [STAGING-CLIENT-REQUEST(GENERAL)] when committed to other operation | [NOTHING-STAGED]", buf, 0xCu);
  }

  os_activity_scope_leave(&v13);
  return 0;
}

- (int64_t)action_ClientDecideGroupTargetAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientDecideGroupTargetAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  v60 = 0;
  stagingClientRequest = [availableCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientDecideGroupTargetAvailable" adoptingSpecifiedTarget:1];

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v58 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  stagingClientRequest2 = [availableCopy stagingClientRequest];
  v59 = [(MADAutoAssetStager *)self _stagingClientMessageDesire:@"ClientDecideGroupTargetAvailable" forClientRequest:stagingClientRequest2];

  [(MADAutoAssetStager *)self setStagingClientCompleteOnceRequired:0];
  if (v59 && [v59 checkWaitTimeoutSecs] == -2)
  {
    [(MADAutoAssetStager *)self setStagingClientCompleteOnceRequired:__isPlatformVersionAtLeast(2, 18, 4, 0) == 0];
  }

  baseForStagingDescriptors = [availableCopy baseForStagingDescriptors];
  v14 = [(MADAutoAssetStager *)self isAnyAvailableForStagingByGroup:@"ClientDecideGroupTargetAvailable" withAlreadyDownloadedDescriptors:baseForStagingDescriptors targetHadBeenDetermined:&v60];

  if (v14)
  {
    availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
    persistedState8 = [availableForStagingRequiredByTarget safeObjectForKey:v58 ofClass:objc_opt_class()];

    availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
    persistedConfig8 = [availableForStagingOptionalByTarget safeObjectForKey:v58 ofClass:objc_opt_class()];

    v19 = [persistedState8 count];
    if (v19 | [persistedConfig8 count])
    {
      if (v19)
      {
        [(MADAutoAssetStager *)self setAvailableForStaging:persistedState8];
        v20 = @"TargetAvailableRequired";
      }

      else
      {
        [(MADAutoAssetStager *)self setAvailableForStaging:persistedConfig8];
        if ([(MADAutoAssetStager *)self stagingClientCompleteOnceRequired])
        {
          v32 = [(MADAutoAssetStager *)self newStagedInfoWithGroupsSuccessfullyStaged:@"ClientDecideGroupTargetAvailable" indicatingHaveStaged:1];
          _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
          v34 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"ClientDecideGroupTargetAvailable" forStagingTargetName:_targetNameActiveClient replyingToCleared:0];

          [(MADAutoAssetStager *)self setStagingClientCompleteOnceRequired:0];
          if (v34)
          {
            [(MADAutoAssetStager *)self _replyToStagingClient:@"ClientDecideGroupTargetAvailable" withStagedInfo:v32 replyingToStagingRequest:v34 recordingOperation:903];
          }

          else
          {
            autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
            diag = [autoStagerFSM2 diag];
            [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ClientDecideGroupTargetAvailable} no download client request when no REQUIRED but have OPTIONAL to stage" withResult:6111 withError:0];
          }
        }

        v20 = @"TargetAvailableOptional";
      }

      stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
      assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
      assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
      LOBYTE(v57) = v19 != 0;
      [MADAutoAssetHistory recordOperation:703 toHistoryType:4 fromLayer:4 fromClient:stagingClientName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion isRequired:v57];

      persistedState = [(MADAutoAssetStager *)self persistedState];
      persistedConfig = [persistedState persistedConfig];
      assetTargetOSVersion2 = [(MADAutoAssetStager *)self assetTargetOSVersion];
      [persistedConfig persistString:assetTargetOSVersion2 forKey:@"assetTargetOSVersion" shouldPersist:0];

      persistedState2 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig2 = [persistedState2 persistedConfig];
      assetTargetBuildVersion2 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
      [persistedConfig2 persistString:assetTargetBuildVersion2 forKey:@"assetTargetBuildVersion" shouldPersist:0];

      persistedState3 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig3 = [persistedState3 persistedConfig];
      assetTargetTrainName2 = [(MADAutoAssetStager *)self assetTargetTrainName];
      [persistedConfig3 persistString:assetTargetTrainName2 forKey:@"assetTargetTrainName" shouldPersist:0];

      persistedState4 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig4 = [persistedState4 persistedConfig];
      assetTargetRestoreVersion2 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
      [persistedConfig4 persistString:assetTargetRestoreVersion2 forKey:@"assetTargetRestoreVersion" shouldPersist:1];

      [(MADAutoAssetStager *)self _setupAwaitingStagingAndBeginFirstDownload];
      [(MADAutoAssetStager *)self _logMilestoneFromLocation:@"ClientDecideGroupTargetAvailable" resultingInEvent:v20 forMilestoneActivity:@"beginning download-available-for-staging phase"];
      goto LABEL_20;
    }

    autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag2 = [autoStagerFSM3 diag];
    [diag2 trackAnomaly:@"AUTO-STAGER" forReason:@"{ClientDecideGroupTargetAvailable} no REQUIRED and no OPTIONAL descriptors available for staging" withResult:6607 withError:0];

    v20 = @"TargetNotAvailable";
LABEL_12:

LABEL_20:
    goto LABEL_21;
  }

  if (v60 == 1)
  {
    persistedState5 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig5 = [persistedState5 persistedConfig];
    assetTargetOSVersion3 = [(MADAutoAssetStager *)self assetTargetOSVersion];
    [persistedConfig5 persistString:assetTargetOSVersion3 forKey:@"assetTargetOSVersion" shouldPersist:0];

    persistedState6 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig6 = [persistedState6 persistedConfig];
    assetTargetBuildVersion3 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    [persistedConfig6 persistString:assetTargetBuildVersion3 forKey:@"assetTargetBuildVersion" shouldPersist:0];

    persistedState7 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig7 = [persistedState7 persistedConfig];
    assetTargetTrainName3 = [(MADAutoAssetStager *)self assetTargetTrainName];
    [persistedConfig7 persistString:assetTargetTrainName3 forKey:@"assetTargetTrainName" shouldPersist:0];

    persistedState8 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig8 = [persistedState8 persistedConfig];
    autoStagerFSM3 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    [persistedConfig8 persistString:autoStagerFSM3 forKey:@"assetTargetRestoreVersion" shouldPersist:1];
    v20 = @"TargetWasEmptied";
    goto LABEL_12;
  }

  v20 = @"TargetNotAvailable";
LABEL_21:
  autoStagerFSM4 = [(MADAutoAssetStager *)self autoStagerFSM];
  v53 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v55 = [(MADAutoAssetStagerParam *)v53 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM4 followupEvent:v20 withInfo:v55];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_ClientInvalidStagingPhase:(id)phase error:(id *)error
{
  phaseCopy = phase;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v11.opaque[0] = 0;
  v11.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientInvalidStagingPhase", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v11);

  stagingClientRequest = [phaseCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _replyToStagingClient:@"ClientInvalidStagingPhase" replyingToRequest:stagingClientRequest withErrorCode:6113 withUnderlyingError:0 withDescription:@"received staging-client-request is not valid for current staging phase"];

  os_activity_scope_leave(&v11);
  return 0;
}

- (int64_t)action_ClientFailAlreadyDetermining:(id)determining error:(id *)error
{
  determiningCopy = determining;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientFailAlreadyDetermining", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  v9 = [(MADAutoAssetStager *)self autoStagerFSM:v13.opaque[0]];
  diag = [v9 diag];
  [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ClientFailAlreadyDetermining} by-group when already determining by-group" withResult:6607 withError:0];

  stagingClientRequest = [determiningCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _replyToStagingClient:@"ClientFailAlreadyDetermining" replyingToRequest:stagingClientRequest withErrorCode:6607 withUnderlyingError:0 withDescription:@"received staging-client-request is not valid for current staging phase (already determining-groups-available-for-staging)"];

  os_activity_scope_leave(&v13);
  return 0;
}

- (int64_t)action_ClientFailGroupDetermining:(id)determining error:(id *)error
{
  determiningCopy = determining;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientFailGroupDetermining", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  v9 = [(MADAutoAssetStager *)self autoStagerFSM:v13.opaque[0]];
  diag = [v9 diag];
  [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ClientFailGroupDetermining} by-group download requested when determining by-group" withResult:6607 withError:0];

  stagingClientRequest = [determiningCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _replyToStagingClient:@"ClientFailGroupDetermining" replyingToRequest:stagingClientRequest withErrorCode:6607 withUnderlyingError:0 withDescription:@"received staging-client-request is not valid for current staging phase (currently determining-groups-available-for-staging)"];

  os_activity_scope_leave(&v13);
  return 0;
}

- (int64_t)action_ClientFailByGroupAlreadyDownloading:(id)downloading error:(id *)error
{
  downloadingCopy = downloading;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientFailByGroupAlreadyDownloading", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  v9 = [(MADAutoAssetStager *)self autoStagerFSM:v13.opaque[0]];
  diag = [v9 diag];
  [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ClientFailByGroupAlreadyDownloading} by-group operation requested when downloading by-group" withResult:6607 withError:0];

  stagingClientRequest = [downloadingCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _replyToStagingClient:@"ClientFailByGroupAlreadyDownloading" replyingToRequest:stagingClientRequest withErrorCode:6607 withUnderlyingError:0 withDescription:@"received staging-client-request is not valid for current staging phase (currently downloading-groups-available-for-staging)"];

  os_activity_scope_leave(&v13);
  return 0;
}

- (int64_t)action_ClientFailNoGroupsStaged:(id)staged error:(id *)error
{
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v11.opaque[0] = 0;
  v11.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientFailNoGroupsStaged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v11);

  stagingClientRequest = [stagedCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _replyToStagingClient:@"ClientFailNoGroupsStaged" replyingToRequest:stagingClientRequest withErrorCode:6608 withUnderlyingError:0 withDescription:@"received staging-client-request is not valid for current staging phase (no groups currently staged)"];

  os_activity_scope_leave(&v11);
  return 0;
}

- (int64_t)action_ClientFailWrongMode:(id)mode error:(id *)error
{
  modeCopy = mode;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientFailWrongMode", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  v9 = [(MADAutoAssetStager *)self autoStagerFSM:v13.opaque[0]];
  diag = [v9 diag];
  [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ClientFailWrongMode} by-group operation requested when latched to ALL-MODE" withResult:6606 withError:0];

  stagingClientRequest = [modeCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _replyToStagingClient:@"ClientFailWrongMode" replyingToRequest:stagingClientRequest withErrorCode:6606 withUnderlyingError:0 withDescription:@"received staging-client-request of different mode than already committed mode"];

  os_activity_scope_leave(&v13);
  return 0;
}

- (int64_t)action_ClientCancelDesireForCompletion:(id)completion error:(id *)error
{
  completionCopy = completion;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v31.opaque[0] = 0;
  v31.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientCancelDesireForCompletion", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v31);

  [(MADAutoAssetStager *)self _stagingClientRequestDetermineClearAll:@"ClientCancelDesireForCompletion", v31.opaque[0], v31.opaque[1]];
  stagingClientRequest = [completionCopy stagingClientRequest];
  LOBYTE(v8) = stagingClientRequest == 0;

  if ((v8 & 1) == 0)
  {
    stagingClientRequest2 = [completionCopy stagingClientRequest];
    clientReplyCompletion = [stagingClientRequest2 clientReplyCompletion];
    v12 = clientReplyCompletion == 0;

    if (v12)
    {
      autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag = [autoStagerFSM2 diag];
      [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{_replyToStagingClientOperationSuccess} | pending staging-client-request with no reply-completion" withResult:6111 withError:0];
    }

    else
    {
      autoStagerFSM2 = objc_alloc_init(NSMutableDictionary);
      stagingClientRequest3 = [completionCopy stagingClientRequest];
      clientRequestMessage = [stagingClientRequest3 clientRequestMessage];
      diag = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];

      v17 = [SUCoreConnectMessage alloc];
      stagingClientRequest4 = [completionCopy stagingClientRequest];
      clientID = [stagingClientRequest4 clientID];
      v20 = [v17 initWithType:2 messageName:diag clientID:clientID version:0 message:autoStagerFSM2];

      statisticsClientRepliesSuccess = [(MADAutoAssetStager *)self statisticsClientRepliesSuccess];
      stagingClientRequest5 = [completionCopy stagingClientRequest];
      clientRequestMessage2 = [stagingClientRequest5 clientRequestMessage];
      messageName = [clientRequestMessage2 messageName];
      [statisticsClientRepliesSuccess incrementForClientRequestMessage:messageName];

      v25 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v25, OS_LOG_TYPE_DEFAULT))
      {
        summary = [(MADAutoAssetStager *)self summary];
        _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
        *buf = 138543874;
        v33 = summary;
        v34 = 2114;
        v35 = _targetNameActive;
        v36 = 2114;
        v37 = diag;
        _os_log_impl(&dword_0, v25, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {_replyToStagingClientOperationSuccess} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (operation success)", buf, 0x20u);
      }

      stagingClientRequest6 = [completionCopy stagingClientRequest];
      clientReplyCompletion2 = [stagingClientRequest6 clientReplyCompletion];
      (clientReplyCompletion2)[2](clientReplyCompletion2, v20, 0);
    }
  }

  os_activity_scope_leave(&v31);

  return 0;
}

- (int64_t)action_RequestAlreadyDownloaded:(id)downloaded error:(id *)error
{
  downloadedCopy = downloaded;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:RequestAlreadyDownloaded", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups:v14.opaque[0]])
  {
    [(MADAutoAssetStager *)self _clearBeforeDetermineAvailable:@"RequestAlreadyDownloaded" removingDetermined:1];
  }

  [(MADAutoAssetStager *)self _persistLastStagingFrom:@"RequestAlreadyDownloaded"];
  [(MADAutoAssetStager *)self startMaxTimeSpentDeterminingTimer];
  +[MADAutoAssetControlManager stagerRequestAlreadyDownloadedDescriptors];
  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    v9 = 702;
  }

  else
  {
    v9 = 700;
  }

  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:v9 toHistoryType:4 fromLayer:4 fromClient:stagingClientName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  os_activity_scope_leave(&v14);
  return 0;
}

- (int64_t)action_AddToAvailableDecideMoreCandidates:(id)candidates error:(id *)error
{
  candidatesCopy = candidates;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v18.opaque[0] = 0;
  v18.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AddToAvailableDecideMoreCandidates", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v18);

  v9 = [(MADAutoAssetStager *)self _adjustPallasResponseBasedOnPreferences:candidatesCopy, v18.opaque[0], v18.opaque[1]];
  [(MADAutoAssetStager *)self lookupCacheUpdateWithDetermineResult:v9 fromLocation:@"AddToAvailableDecideMoreCandidates"];
  candidateSetConfigurations = [(MADAutoAssetStager *)self candidateSetConfigurations];
  v11 = [candidateSetConfigurations count];

  if (v11)
  {
    v12 = @"DetermineMoreCandidates";
  }

  else
  {
    v12 = @"DetermineDoneCandidates";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v14 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v16 = [(MADAutoAssetStagerParam *)v14 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v12 withInfo:v16];

  os_activity_scope_leave(&v18);
  return 0;
}

- (int64_t)action_AddToAvailableDecideRequiredAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AddToAvailableDecideRequiredAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  v9 = [(MADAutoAssetStager *)self _adjustPallasResponseBasedOnPreferences:availableCopy];
  [(MADAutoAssetStager *)self lookupCacheUpdateWithDetermineResult:v9 fromLocation:@"AddToAvailableDecideRequiredAvailable"];
  candidateSetConfigurations = [(MADAutoAssetStager *)self candidateSetConfigurations];
  v11 = [candidateSetConfigurations count];

  if (v11)
  {
    v12 = [[NSString alloc] initWithFormat:@"AUTO-STAGER(%@)", @"AddToAvailableDecideRequiredAvailable"];
    v13 = [MAAutoAssetError buildError:6105 fromOperation:v12 underlyingError:0 withDescription:@"timeout occurred when processing REQUIRED set-configurations - more REQUIRED to be determined when timeout triggered end of pre-SU-staging phase"];

    v14 = @"RequiredErrorBlocksOTA";
  }

  else
  {
    availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
    v16 = [availableForStaging count];

    if (v16)
    {
      v17 = [(MADAutoAssetStager *)self splitOutAvailableForStagingByGroup:@"AddToAvailableDecideRequiredAvailable" forGroupDetermine:1];
      [(MADAutoAssetStager *)self _logPersistedActiveTargetLookupResults:@"AddToAvailableDecideRequiredAvailable"];
      v13 = 0;
      v14 = @"DetermineHaveAvailable";
    }

    else
    {
      [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"AddToAvailableDecideRequiredAvailable" alsoPerformingPurgeAll:1 removingDetermined:0];
      v13 = 0;
      v14 = @"DetermineNothingAvailable";
    }
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituationForFollowup:v14 fromLocation:@"AddToAvailableDecideRequiredAvailable"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v19 = [MADAutoAssetStagerParam alloc];
  jobInformation = [v9 jobInformation];
  v21 = [(MADAutoAssetStagerParam *)v19 initWithJobInformation:jobInformation withDownloadedDescriptor:0 withOperationError:v13];
  [autoStagerFSM2 followupEvent:v14 withInfo:v21];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_IgnoreFailureDecideRequiredAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:IgnoreFailureDecideRequiredAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  candidateSetConfigurations = [(MADAutoAssetStager *)self candidateSetConfigurations];
  v10 = [candidateSetConfigurations count];

  if (v10)
  {
    v11 = [[NSString alloc] initWithFormat:@"AUTO-STAGER(%@)", @"IgnoreFailureDecideRequiredAvailable"];
    v12 = [MAAutoAssetError buildError:6105 fromOperation:v11 underlyingError:0 withDescription:@"timeout occurred when processing REQUIRED set-configurations - tolerated error at point where more REQUIRED to be determined when timeout triggered end of pre-SU-staging phase"];

    v13 = @"RequiredErrorBlocksOTA";
  }

  else
  {
    availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
    v15 = [availableForStaging count];

    if (v15)
    {
      [(MADAutoAssetStager *)self _logPersistedActiveTargetLookupResults:@"IgnoreFailureDecideRequiredAvailable"];
      v12 = 0;
      v13 = @"DetermineHaveAvailable";
    }

    else
    {
      v12 = 0;
      if ([(MADAutoAssetStager *)self _isOtherTargetAvailable])
      {
        v13 = @"DetermineNothingOtherAvailable";
      }

      else
      {
        v13 = @"DetermineNothingAvailable";
      }
    }
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituationForFollowup:v13 fromLocation:@"IgnoreFailureDecideRequiredAvailable"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v17 = [MADAutoAssetStagerParam alloc];
  jobInformation = [availableCopy jobInformation];
  v19 = [(MADAutoAssetStagerParam *)v17 initWithJobInformation:jobInformation withDownloadedDescriptor:0 withOperationError:v12];
  [autoStagerFSM2 followupEvent:v13 withInfo:v19];

  if ([SUCore stringIsEqual:v13 to:@"DetermineNothingAvailable"])
  {
    [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"IgnoreFailureDecideRequiredAvailable" alsoPerformingPurgeAll:1 removingDetermined:0];
  }

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_DecideMoreCandidates:(id)candidates error:(id *)error
{
  candidatesCopy = candidates;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v17.opaque[0] = 0;
  v17.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DecideMoreCandidates", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v17);

  v9 = [(MADAutoAssetStager *)self candidateSetConfigurations:v17.opaque[0]];
  v10 = [v9 count];

  if (v10)
  {
    v11 = @"DetermineMoreCandidates";
  }

  else
  {
    v11 = @"DetermineDoneCandidates";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v13 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v15 = [(MADAutoAssetStagerParam *)v13 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v11 withInfo:v15];

  os_activity_scope_leave(&v17);
  return 0;
}

- (int64_t)action_DecideHaveAvailableOtherTargets:(id)targets error:(id *)error
{
  targetsCopy = targets;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v15.opaque[0] = 0;
  v15.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DecideHaveAvailableOtherTargets", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v15);

  if ([(MADAutoAssetStager *)self _isOtherTargetAvailable:v15.opaque[0]])
  {
    v9 = @"TargetHaveOtherAvailable";
  }

  else
  {
    v9 = @"TargetNoOtherAvailable";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v11 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v13 = [(MADAutoAssetStagerParam *)v11 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v9 withInfo:v13];

  os_activity_scope_leave(&v15);
  return 0;
}

- (int64_t)action_DecideHaveRequiredCandidates:(id)candidates error:(id *)error
{
  candidatesCopy = candidates;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v22.opaque[0] = 0;
  v22.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DecideHaveRequiredCandidates", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v22);

  v9 = [(MADAutoAssetStager *)self assetTargetTrainName:v22.opaque[0]];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v11 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:v9 withRestoreVersion:assetTargetRestoreVersion];

  candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsRequiredByTarget];
  v13 = [candidateSetConfigurationsRequiredByTarget safeObjectForKey:v11 ofClass:objc_opt_class()];

  candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
  v15 = [candidateSetConfigurationsOptionalByTarget safeObjectForKey:v11 ofClass:objc_opt_class()];

  if ([v13 count])
  {
    [(MADAutoAssetStager *)self setCandidateSetConfigurations:v13];
    v16 = @"DetermineHaveRequired";
  }

  else if ([v15 count])
  {
    [(MADAutoAssetStager *)self setCandidateSetConfigurations:v15];
    v16 = @"DetermineHaveOptional";
  }

  else
  {
    v16 = @"DetermineNoCandidates";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v18 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v20 = [(MADAutoAssetStagerParam *)v18 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v16 withInfo:v20];

  os_activity_scope_leave(&v22);
  return 0;
}

- (int64_t)action_DecideMoreOptionalAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v17.opaque[0] = 0;
  v17.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DecideMoreOptionalAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v17);

  v9 = [(MADAutoAssetStager *)self awaitingStagingAttempt:v17.opaque[0]];
  v10 = [v9 count];

  if (v10)
  {
    v11 = @"DownloadMoreAvailable";
  }

  else
  {
    v11 = @"DownloadDoneAvailable";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v13 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v15 = [(MADAutoAssetStagerParam *)v13 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v11 withInfo:v15];

  os_activity_scope_leave(&v17);
  return 0;
}

- (int64_t)action_DoneCandidatesRequiredDecideOptional:(id)optional error:(id *)error
{
  optionalCopy = optional;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v23.opaque[0] = 0;
  v23.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DoneCandidatesRequiredDecideOptional", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v23);

  v9 = [(MADAutoAssetStager *)self assetTargetTrainName:v23.opaque[0]];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v11 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:v9 withRestoreVersion:assetTargetRestoreVersion];

  candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
  v13 = [candidateSetConfigurationsOptionalByTarget safeObjectForKey:v11 ofClass:objc_opt_class()];

  if (v13 && [v13 count])
  {
    [(MADAutoAssetStager *)self setCandidateSetConfigurations:v13];
    [(MADAutoAssetStager *)self _startDetermineJobForNextCandidate:@"DoneCandidatesRequiredDecideOptional"];
    v14 = @"DeterminedRequiredWithOptional";
  }

  else
  {
    availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
    v16 = [availableForStaging count];

    if (v16)
    {
      v17 = [(MADAutoAssetStager *)self splitOutAvailableForStagingByGroup:@"DoneCandidatesRequiredDecideOptional" forGroupDetermine:1];
      [(MADAutoAssetStager *)self _logPersistedActiveTargetLookupResults:@"DoneCandidatesRequiredDecideOptional"];
      v14 = @"DetermineHaveAvailable";
    }

    else
    {
      v14 = @"DetermineNothingAvailable";
    }
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituationForFollowup:v14 fromLocation:@"DoneCandidatesRequiredDecideOptional"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v19 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v21 = [(MADAutoAssetStagerParam *)v19 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v14 withInfo:v21];

  os_activity_scope_leave(&v23);
  return 0;
}

- (int64_t)action_DecideRequiredErrorBlocksOTA:(id)a error:(id *)error
{
  aCopy = a;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v24.opaque[0] = 0;
  v24.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DecideRequiredErrorBlocksOTA", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v24);

  operationError = [aCopy operationError];
  domain = [operationError domain];
  v11 = [SUCore stringIsEqual:domain to:@"com.apple.MobileAssetError.AutoAsset"];

  if (v11)
  {
    if ([operationError code] == "eUpdateCoreConnect.framework/SoftwareUpdateCoreConnect" || objc_msgSend(operationError, "code") == "UpdateCoreConnect.framework/SoftwareUpdateCoreConnect" || objc_msgSend(operationError, "code") == "pdateCoreConnect.framework/SoftwareUpdateCoreConnect" || objc_msgSend(operationError, "code") == "ateCoreConnect.framework/SoftwareUpdateCoreConnect")
    {
      v12 = @"RequiredErrorNonFatal";
      goto LABEL_22;
    }

    v12 = @"RequiredErrorNonFatal";
    if ([operationError code] == "orks/MobileInBoxUpdate.framework/MobileInBoxUpdate")
    {
      goto LABEL_22;
    }

    domain2 = [operationError domain];
    if ([SUCore stringIsEqual:domain2 to:@"com.apple.MobileAssetError.AutoAsset"])
    {
      code = [operationError code];

      v12 = @"RequiredErrorBlocksOTA";
      if (code != "rk/SoftwareUpdateCoreSupport")
      {
        goto LABEL_22;
      }

      domain2 = [operationError userInfo];
      v16 = [domain2 safeObjectForKey:NSUnderlyingErrorKey ofClass:objc_opt_class()];
      domain3 = [v16 domain];
      if ([SUCore stringIsEqual:domain3 to:@"com.apple.MobileAssetError.Download"])
      {
        v18 = -[MADAutoAssetStager _maDownloadErrorConsideredFatal:](self, "_maDownloadErrorConsideredFatal:", [v16 code]);

        if (!v18)
        {
          v12 = @"RequiredErrorNonFatal";
        }
      }

      else
      {
      }
    }

    else
    {
      v12 = @"RequiredErrorBlocksOTA";
    }

LABEL_21:

    goto LABEL_22;
  }

  domain2 = [operationError domain];
  v12 = @"RequiredErrorBlocksOTA";
  if (![SUCore stringIsEqual:domain2 to:@"com.apple.MobileAssetError.Download"])
  {
    goto LABEL_21;
  }

  v14 = -[MADAutoAssetStager _maDownloadErrorConsideredFatal:](self, "_maDownloadErrorConsideredFatal:", [operationError code]);

  if (!v14)
  {
    v12 = @"RequiredErrorNonFatal";
  }

LABEL_22:
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v20 = [MADAutoAssetStagerParam alloc];
  jobInformation = [aCopy jobInformation];
  v22 = [(MADAutoAssetStagerParam *)v20 initWithJobInformation:jobInformation withDownloadedDescriptor:0 withOperationError:operationError];
  [autoStagerFSM2 followupEvent:v12 withInfo:v22];

  os_activity_scope_leave(&v24);
  return 0;
}

- (int64_t)action_FailRequiredDetermineBlocksOTA:(id)a error:(id *)error
{
  aCopy = a;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v9 = _os_activity_create(&dword_0, "MADStager:FailRequiredDetermineBlocksOTA", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v9, &state);

  v10 = [NSString alloc];
  activeSetJobConfiguration = [(MADAutoAssetStager *)self activeSetJobConfiguration];
  summary = [activeSetJobConfiguration summary];
  operationError = [aCopy operationError];
  if (operationError)
  {
    operationError2 = [aCopy operationError];
    checkedDescription = [operationError2 checkedDescription];
  }

  else
  {
    checkedDescription = @"BLOCK-OTA";
  }

  v15 = [v10 initWithFormat:@"failed to determine whether there is REQUIRED server-side content - OTA cannot proceed | setConfiguration:%@ | error:%@", summary, checkedDescription, state.opaque[0], state.opaque[1]];
  if (operationError)
  {
  }

  v16 = objc_alloc_init(NSMutableArray);
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v19 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  v20 = [(MADAutoAssetStager *)self _stagingClientRequestDetermineClear:@"FailRequiredDetermineBlocksOTA" forStagingTargetName:0 replyingToCleared:0];
  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
  [availableForStagingRequiredByTarget setSafeObject:v16 forKey:v19];

  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
  [availableForStagingOptionalByTarget setSafeObject:v16 forKey:v19];

  [(MADAutoAssetStager *)self setAvailableForStaging:v16];
  if (v20)
  {
    operationError3 = [aCopy operationError];
    [(MADAutoAssetStager *)self _replyToStagingClient:@"FailRequiredDetermineBlocksOTA" replyingToRequest:v20 withErrorCode:6602 withUnderlyingError:operationError3 withDescription:v15];
  }

  else
  {
    operationError3 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [operationError3 diag];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{FailRequiredDetermineBlocksOTA} no determine client request when failed to determine REQUIRED" withResult:6111 withError:0];
  }

  if ([(MADAutoAssetStager *)self _isOtherTargetAvailable])
  {
    v25 = @"DetermineNothingOtherAvailable";
  }

  else
  {
    v25 = @"DetermineNothingAvailable";
  }

  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"FailRequiredDetermineBlocksOTA" alsoPerformingPurgeAll:1 removingDetermined:0];
  [(MADAutoAssetStager *)self _persistTargetOTASituation:202 fromLocation:@"FailRequiredDetermineBlocksOTA"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v27 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v29 = [(MADAutoAssetStagerParam *)v27 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v25 withInfo:v29];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_ReportStagingProgressToClient:(id)client error:(id *)error
{
  clientCopy = client;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:ReportStagingProgressToClient", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
    v77 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadCurrent:@"ReportStagingProgressToClient" forStagingTargetName:_targetNameActiveClient];
  }

  else
  {
    v77 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralCurrent:@"ReportStagingProgressToClient"];
  }

  if (v77)
  {
    clientProgressProxy = [v77 clientProgressProxy];
    v10 = clientProgressProxy == 0;

    if (!v10)
    {
      jobInformation = [clientCopy jobInformation];
      currentStatus = [jobInformation currentStatus];

      downloadProgress = [currentStatus downloadProgress];
      v14 = [downloadProgress copy];
      v76 = downloadProgress;
      v74 = v14;
      if ([downloadProgress totalExpectedBytes] < 1)
      {
        v16 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v16, OS_LOG_TYPE_DEFAULT))
        {
          summary = [(MADAutoAssetStager *)self summary];
          summary2 = [currentStatus summary];
          *buf = 138543618;
          v80 = summary;
          v81 = 2114;
          v82 = summary2;
          _os_log_impl(&dword_0, v16, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] AUTO-STAGING-PROGRESS | early progress before totalExpectedBytes indicated (ignored) | currentStatus:%{public}@", buf, 0x16u);
        }
      }

      else
      {
        downloadedNetworkBytes = [currentStatus downloadedNetworkBytes];
        if (!downloadedNetworkBytes)
        {
          downloadedNetworkBytes = [currentStatus downloadedFilesystemBytes];
        }

        if (-[MADAutoAssetStager currentStagedLastWrittenBytes](self, "currentStagedLastWrittenBytes") && (v15 = -[MADAutoAssetStager currentStagedLastWrittenBytes](self, "currentStagedLastWrittenBytes"), v15 <= [v76 totalWrittenBytes]))
        {
          -[MADAutoAssetStager setOverallStagedDownloadedSoFarBytes:](self, "setOverallStagedDownloadedSoFarBytes:", -[MADAutoAssetStager overallStagedDownloadedSoFarBytes](self, "overallStagedDownloadedSoFarBytes") + [v76 totalWrittenBytes] - -[MADAutoAssetStager currentStagedLastWrittenBytes](self, "currentStagedLastWrittenBytes"));
        }

        else
        {
          -[MADAutoAssetStager setOverallStagedDownloadedSoFarBytes:](self, "setOverallStagedDownloadedSoFarBytes:", [v76 totalWrittenBytes] + -[MADAutoAssetStager currentStagedRemainingBytes](self, "currentStagedRemainingBytes") + -[MADAutoAssetStager overallStagedDownloadedSoFarBytes](self, "overallStagedDownloadedSoFarBytes"));
        }

        totalExpectedBytes = [v76 totalExpectedBytes];
        if (totalExpectedBytes >= [v76 totalWrittenBytes])
        {
          -[MADAutoAssetStager setCurrentStagedRemainingBytes:](self, "setCurrentStagedRemainingBytes:", [v76 totalExpectedBytes] - objc_msgSend(v76, "totalWrittenBytes"));
        }

        else
        {
          v20 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v20, OS_LOG_TYPE_ERROR))
          {
            totalExpectedBytes2 = [v76 totalExpectedBytes];
            totalWrittenBytes = [v76 totalWrittenBytes];
            *buf = 134218240;
            v80 = totalExpectedBytes2;
            v81 = 2048;
            v82 = totalWrittenBytes;
            _os_log_impl(&dword_0, v20, OS_LOG_TYPE_ERROR, "[AUTO-STAGER] {ReportStagingProgressToClient} | Download progress for asset resulted in more written than expected | Expected: %lld | Written: %lld", buf, 0x16u);
          }
        }

        [v14 setTotalExpectedBytes:{-[MADAutoAssetStager overallStagedTotalExpectedBytes](self, "overallStagedTotalExpectedBytes")}];
        [v14 setTotalWrittenBytes:{-[MADAutoAssetStager overallStagedDownloadedSoFarBytes](self, "overallStagedDownloadedSoFarBytes")}];
        totalExpectedBytes3 = [v14 totalExpectedBytes];
        totalWrittenBytes2 = [v14 totalWrittenBytes];
        [v76 expectedTimeRemainingSecs];
        if (v25 == 0.0)
        {
          v29 = 0;
        }

        else
        {
          totalExpectedBytes4 = [v76 totalExpectedBytes];
          totalWrittenBytes3 = [v76 totalWrittenBytes];
          [v76 expectedTimeRemainingSecs];
          v29 = ((totalExpectedBytes4 - totalWrittenBytes3) / v28);
        }

        [v14 setExpectedTimeRemainingSecs:0.0];
        if (v29)
        {
          [v14 setExpectedTimeRemainingSecs:((totalExpectedBytes3 - totalWrittenBytes2) / v29)];
        }

        -[MADAutoAssetStager setCurrentStagedLastWrittenBytes:](self, "setCurrentStagedLastWrittenBytes:", [v76 totalWrittenBytes]);
        if (__isPlatformVersionAtLeast(2, 16, 4, 0))
        {
          currentLockUsage = [currentStatus currentLockUsage];
        }

        else
        {
          currentLockUsage = 0;
        }

        v67 = [MAAutoAssetStatus alloc];
        assetSelector = [currentStatus assetSelector];
        notifications = [currentStatus notifications];
        availableForUseAttributes = [currentStatus availableForUseAttributes];
        newerVersionAttributes = [currentStatus newerVersionAttributes];
        downloadUserInitiated = [currentStatus downloadUserInitiated];
        downloadedFilesystemBytes = [currentStatus downloadedFilesystemBytes];
        downloadedAsPatch = [currentStatus downloadedAsPatch];
        patchedFromBaseSelector = [currentStatus patchedFromBaseSelector];
        patchedFromBaseFilesystemBytes = [currentStatus patchedFromBaseFilesystemBytes];
        patchingAttempted = [currentStatus patchingAttempted];
        stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
        stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
        availableForUseError = [currentStatus availableForUseError];
        patchingAttemptError = [currentStatus patchingAttemptError];
        newerVersionError = [currentStatus newerVersionError];
        BYTE1(v63) = 1;
        LOBYTE(v63) = patchingAttempted;
        LOBYTE(v62) = downloadedAsPatch;
        v38 = [v67 initWithAssetSelector:assetSelector withNotifications:notifications withAvailableForUseAttributes:availableForUseAttributes withNewerVersionAttributes:newerVersionAttributes withNeverBeenLocked:1 withDownloadUserInitiated:downloadUserInitiated withDownloadProgress:v74 withDownloadedNetworkBytes:downloadedNetworkBytes withDownloadedFilesystemBytes:downloadedFilesystemBytes withDownloadedAsPatch:v62 withPatchedFromBaseSelector:patchedFromBaseSelector withPatchedFromBaseFilesystemBytes:patchedFromBaseFilesystemBytes withPatchingAttempted:v63 withStagedPriorToAvailable:stagingFromOSVersion withStagedFromOSVersion:stagingFromBuildVersion withStagedFromBuildVersion:currentLockUsage withCurrentLockUsage:availableForUseError withAvailableForUseError:patchingAttemptError withPatchingAttemptError:newerVersionError withNewerVersionError:?];

        neverBeenLocked = [currentStatus neverBeenLocked];
        activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor setNeverBeenLocked:neverBeenLocked];

        downloadUserInitiated2 = [currentStatus downloadUserInitiated];
        activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor2 setDownloadUserInitiated:downloadUserInitiated2];

        activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor3 setDownloadedNetworkBytes:downloadedNetworkBytes];

        downloadedFilesystemBytes2 = [currentStatus downloadedFilesystemBytes];
        activeJobDescriptor4 = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor4 setDownloadedFilesystemBytes:downloadedFilesystemBytes2];

        patchedFromBaseSelector2 = [currentStatus patchedFromBaseSelector];
        activeJobDescriptor5 = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor5 setPatchedFromBaseSelector:patchedFromBaseSelector2];

        patchedFromBaseFilesystemBytes2 = [currentStatus patchedFromBaseFilesystemBytes];
        activeJobDescriptor6 = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor6 setPatchedFromBaseFilesystemBytes:patchedFromBaseFilesystemBytes2];

        patchingAttempted2 = [currentStatus patchingAttempted];
        activeJobDescriptor7 = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor7 setPatchingAttempted:patchingAttempted2];

        patchingAttemptError2 = [currentStatus patchingAttemptError];
        activeJobDescriptor8 = [(MADAutoAssetStager *)self activeJobDescriptor];
        [activeJobDescriptor8 setPatchingAttemptError:patchingAttemptError2];

        clientProgressProxy2 = [v77 clientProgressProxy];
        LOBYTE(activeJobDescriptor8) = objc_opt_respondsToSelector();

        if (activeJobDescriptor8)
        {
          v55 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v55, OS_LOG_TYPE_DEFAULT))
          {
            summary3 = [(MADAutoAssetStager *)self summary];
            summary4 = [v38 summary];
            *buf = 138543618;
            v80 = summary3;
            v81 = 2114;
            v82 = summary4;
            _os_log_impl(&dword_0, v55, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] AUTO-STAGING-PROGRESS | staging-client provided with progress | overallStatus:%{public}@", buf, 0x16u);
          }

          clientProgressProxy3 = [v77 clientProgressProxy];
          [clientProgressProxy3 executeGenericBlock:v38];
        }

        else
        {
          clientProgressProxy3 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(clientProgressProxy3, OS_LOG_TYPE_DEFAULT))
          {
            summary5 = [(MADAutoAssetStager *)self summary];
            summary6 = [v38 summary];
            *buf = 138543618;
            v80 = summary5;
            v81 = 2114;
            v82 = summary6;
            _os_log_impl(&dword_0, clientProgressProxy3, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] AUTO-STAGING-PROGRESS | client not provided progress | client does not respond to executeGenericBlock | overallStatus:%{public}@", buf, 0x16u);
          }
        }

        v16 = currentLockUsage;
      }
    }
  }

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_AddToStaged:(id)staged error:(id *)error
{
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v19.opaque[0] = 0;
  v19.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AddToStaged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v19);

  downloadedDescriptor = [stagedCopy downloadedDescriptor];
  LODWORD(v8) = downloadedDescriptor == 0;

  if (v8)
  {
    v10 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
      summary2 = [activeJobDescriptor summary];
      *buf = 138543618;
      v21 = summary;
      v22 = 2114;
      v23 = summary2;
      _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {AddToStaged} [BY-GROUP-MODE] asset-descriptor ALREADY-DOWNLOADED | self.activeJobDescriptor:%{public}@", buf, 0x16u);
    }

    [(MADAutoAssetStager *)self setActiveJobDescriptor:0];
  }

  else
  {
    [(MADAutoAssetStager *)self _addToStaged:@"AddToStaged" addingFromStagerParam:stagedCopy];
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v15 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v17 = [(MADAutoAssetStagerParam *)v15 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"DownloadDecideMoreAvailable" withInfo:v17];

  os_activity_scope_leave(&v19);
  return 0;
}

- (int64_t)action_AddToStagedDecideMoreAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v22.opaque[0] = 0;
  v22.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AddToStagedDecideMoreAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v22);

  downloadedDescriptor = [availableCopy downloadedDescriptor];
  LODWORD(v8) = downloadedDescriptor == 0;

  if (v8)
  {
    v10 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
      summary2 = [activeJobDescriptor summary];
      *buf = 138543618;
      v24 = summary;
      v25 = 2114;
      v26 = summary2;
      _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {AddToStagedDecideMoreAvailable} asset-descriptor ALREADY-DOWNLOADED | self.activeJobDescriptor:%{public}@", buf, 0x16u);
    }

    [(MADAutoAssetStager *)self setActiveJobDescriptor:0];
  }

  else
  {
    [(MADAutoAssetStager *)self _addToStaged:@"AddToStagedDecideMoreAvailable" addingFromStagerParam:availableCopy];
  }

  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v15 = [awaitingStagingAttempt count] == 0;

  if (v15)
  {
    v16 = @"DownloadDoneAvailable";
  }

  else
  {
    v16 = @"DownloadMoreAvailable";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v18 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v20 = [(MADAutoAssetStagerParam *)v18 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v16 withInfo:v20];

  os_activity_scope_leave(&v22);
  return 0;
}

- (int64_t)action_DecideMoreRequiredAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:DecideMoreRequiredAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v9 = [awaitingStagingAttempt count] == 0;

  if (v9)
  {
    assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
    assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    v42 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

    availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
    v14 = [availableForStagingOptionalByTarget safeObjectForKey:v42 ofClass:objc_opt_class()];

    if (v14 && [v14 count])
    {
      v15 = objc_alloc_init(NSMutableArray);
      [(MADAutoAssetStager *)self setAwaitingStagingAttempt:v15];

      v16 = objc_alloc_init(NSMutableDictionary);
      v46 = 0u;
      v47 = 0u;
      v44 = 0u;
      v45 = 0u;
      v17 = v14;
      v18 = 0;
      v19 = [v17 countByEnumeratingWithState:&v44 objects:v57 count:16];
      if (v19)
      {
        v20 = *v45;
        do
        {
          v21 = 0;
          do
          {
            if (*v45 != v20)
            {
              objc_enumerationMutation(v17);
            }

            v22 = *(*(&v44 + 1) + 8 * v21);
            if (v22)
            {
              awaitingStagingAttempt2 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
              [awaitingStagingAttempt2 addObject:v22];

              [(MADAutoAssetStager *)self trackSelectorForDescriptor:v22 inContainer:v16];
            }

            else
            {
              ++v18;
            }

            v21 = v21 + 1;
          }

          while (v19 != v21);
          v19 = [v17 countByEnumeratingWithState:&v44 objects:v57 count:16];
        }

        while (v19);
      }

      persistedState = [(MADAutoAssetStager *)self persistedState];
      persistedConfig = [persistedState persistedConfig];
      awaitingStagingAttempt3 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
      [persistedConfig persistULL:objc_msgSend(awaitingStagingAttempt3 forKey:"count") shouldPersist:{@"awaitingStagingAssetCount", 0}];

      v27 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v27, OS_LOG_TYPE_DEFAULT))
      {
        summary = [(MADAutoAssetStager *)self summary];
        awaitingStagingAttempt4 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
        v30 = [awaitingStagingAttempt4 count];
        v31 = [(MADAutoAssetStager *)self selectorContainerAsString:v16];
        *buf = 138544130;
        v50 = summary;
        v51 = 2048;
        v52 = v18;
        v53 = 2048;
        v54 = v30;
        v55 = 2114;
        v56 = v31;
        _os_log_impl(&dword_0, v27, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {DecideMoreRequiredAvailable} [BY-GROUP-MODE] REQUIRED done have OPTIONAL | nilDescriptorCount:%ld | awaitingStagingAttempt:%ld\n>>> awaitingStaging:%{public}@", buf, 0x2Au);
      }

      if ([(MADAutoAssetStager *)self stagingClientCompleteOnceRequired])
      {
        v32 = [(MADAutoAssetStager *)self newStagedInfoWithGroupsSuccessfullyStaged:@"DecideMoreRequiredAvailable" indicatingHaveStaged:1];
        _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
        v34 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"DecideMoreRequiredAvailable" forStagingTargetName:_targetNameActiveClient replyingToCleared:0];

        [(MADAutoAssetStager *)self setStagingClientCompleteOnceRequired:0];
        if (v34)
        {
          [(MADAutoAssetStager *)self _replyToStagingClient:@"DecideMoreRequiredAvailable" withStagedInfo:v32 replyingToStagingRequest:v34 recordingOperation:903];
        }

        else
        {
          autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
          diag = [autoStagerFSM2 diag];
          [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{DecideMoreRequiredAvailable} no download client request when done staging REQUIRED and have OPTIONAL to stage" withResult:6111 withError:0];
        }
      }

      v10 = @"DownloadOptionalAvailable";
    }

    else
    {
      v10 = @"DownloadDoneAvailable";
    }
  }

  else
  {
    v10 = @"DownloadMoreAvailable";
  }

  autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
  v38 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v40 = [(MADAutoAssetStagerParam *)v38 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM3 followupEvent:v10 withInfo:v40];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_DecideMoreAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DecideMoreAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  v9 = [MAAutoAssetSelector alloc];
  activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
  assetType = [activeJobDescriptor assetType];
  activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
  assetSpecifier = [activeJobDescriptor2 assetSpecifier];
  activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
  assetVersion = [activeJobDescriptor3 assetVersion];
  v16 = [v9 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  operationError = [availableCopy operationError];
  if (!operationError)
  {
    v18 = [[NSString alloc] initWithFormat:@"AUTO-STAGER(%@)", @"DecideMoreAvailable"];
    operationError = [MAAutoAssetError buildError:6102 fromOperation:v18 underlyingError:0 withDescription:@"auto-asset-job failed without providing operationError"];
  }

  activeJobDescriptor4 = [(MADAutoAssetStager *)self activeJobDescriptor];
  assetId = [activeJobDescriptor4 assetId];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordFailedOperation:1001 fromLayer:4 forAssetID:assetId withSelector:v16 failingWithError:operationError forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  activeJobDescriptor5 = [(MADAutoAssetStager *)self activeJobDescriptor];
  [(MADAutoAssetStager *)self _persistDescriptor:@"DecideMoreAvailable" operation:@"ENTRY_MODIFY" persistingDescriptor:activeJobDescriptor5 withRepresentation:601 message:@"auto-asset-job has indicated failure to downloaded content"];

  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  [persistedConfig persistULL:0 forKey:@"activelyStagingAssetCount" shouldPersist:1];

  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v27 = [awaitingStagingAttempt count];

  if (v27)
  {
    v28 = @"DownloadMoreAvailable";
  }

  else
  {
    v28 = @"DownloadDoneAvailable";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v30 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v32 = [(MADAutoAssetStagerParam *)v30 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v28 withInfo:v32];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_ClientContinueRestartingMaxDetermining:(id)determining error:(id *)error
{
  determiningCopy = determining;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ClientContinueRestartingMaxDetermining", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  stagingClientRequest = [determiningCopy stagingClientRequest];
  [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest fromLocation:@"ClientContinueRestartingMaxDetermining" adoptingSpecifiedTarget:0];

  v10 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    *buf = 138543362;
    v15 = summary;
    _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {ClientContinueRestartingMaxDetermining} staging-client-request was received when already performing requested operation (stale earlier request has been replied to with failure)", buf, 0xCu);
  }

  [(MADAutoAssetStager *)self startMaxTimeSpentDeterminingTimer];
  os_activity_scope_leave(&v13);

  return 0;
}

- (int64_t)action_AddToAvailableDecideAnyAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v18.opaque[0] = 0;
  v18.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AddToAvailableDecideAnyAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v18);

  v9 = [(MADAutoAssetStager *)self _adjustPallasResponseBasedOnPreferences:availableCopy, v18.opaque[0], v18.opaque[1]];
  [(MADAutoAssetStager *)self lookupCacheUpdateWithDetermineResult:v9 fromLocation:@"ClientContinueRestartingMaxDetermining"];
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v11 = [availableForStaging count];

  if (v11)
  {
    [(MADAutoAssetStager *)self _logPersistedActiveTargetLookupResults:@"AddToAvailableDecideAnyAvailable"];
    v12 = @"DetermineHaveAvailable";
  }

  else
  {
    v12 = @"DetermineNothingAvailable";
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituationForFollowup:v12 fromLocation:@"AddToAvailableDecideAnyAvailable"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v14 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v16 = [(MADAutoAssetStagerParam *)v14 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v12 withInfo:v16];

  if ([SUCore stringIsEqual:v12 to:@"DetermineNothingAvailable"])
  {
    [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"AddToAvailableDecideAnyAvailable" alsoPerformingPurgeAll:1 removingDetermined:0];
  }

  os_activity_scope_leave(&v18);
  return 0;
}

- (int64_t)action_DecideTimerDeterminingValid:(id)valid error:(id *)error
{
  validCopy = valid;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v16.opaque[0] = 0;
  v16.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DecideTimerDeterminingValid", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v16);

  timerUUID = [validCopy timerUUID];
  determineTimeoutUUID = [(MADAutoAssetStager *)self determineTimeoutUUID];
  LODWORD(extendedStateQueue) = [SUCore stringIsEqual:timerUUID to:determineTimeoutUUID];

  if (extendedStateQueue)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v12 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v14 = [(MADAutoAssetStagerParam *)v12 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"TimeoutValidActiveDetermine" withInfo:v14];
  }

  os_activity_scope_leave(&v16);

  return 0;
}

- (int64_t)action_FormCandidatesDecideDetermine:(id)determine error:(id *)error
{
  determineCopy = determine;
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[1] = 0;
  state.opaque[0] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:FormCandidatesDecideDetermine", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  v158 = objc_alloc_init(NSMutableArray);
  _allEliminationSelectors = [(MADAutoAssetStager *)selfCopy _allEliminationSelectors];
  v174 = objc_alloc_init(NSMutableDictionary);
  doesStagingInvolveRequired = [(MADAutoAssetStager *)selfCopy doesStagingInvolveRequired];
  doesStagingInvolveOptional = [(MADAutoAssetStager *)selfCopy doesStagingInvolveOptional];
  setConfigurations = [determineCopy setConfigurations];
  [(MADAutoAssetStager *)selfCopy setSetConfigurations:setConfigurations];

  setTargets = [determineCopy setTargets];
  [(MADAutoAssetStager *)selfCopy setSetTargets:setTargets];

  scheduledJobs = [determineCopy scheduledJobs];
  [(MADAutoAssetStager *)selfCopy setScheduledJobs:scheduledJobs];

  setTargets2 = [(MADAutoAssetStager *)selfCopy setTargets];
  LOBYTE(extendedStateQueue) = [setTargets2 count] == 0;

  if ((extendedStateQueue & 1) == 0)
  {
    v217 = 0u;
    v218 = 0u;
    v215 = 0u;
    v216 = 0u;
    setTargets3 = [(MADAutoAssetStager *)selfCopy setTargets];
    v13 = [setTargets3 countByEnumeratingWithState:&v215 objects:v237 count:16];
    if (!v13)
    {
      goto LABEL_28;
    }

    log = *v216;
    v164 = setTargets3;
    while (1)
    {
      v14 = 0;
      v169 = v13;
      do
      {
        if (*v216 != log)
        {
          objc_enumerationMutation(setTargets3);
        }

        v175 = v14;
        v15 = *(*(&v215 + 1) + 8 * v14);
        context = objc_autoreleasePoolPush();
        fullName = [v15 fullName];
        firstEntryAssetType = [v15 firstEntryAssetType];
        if (firstEntryAssetType)
        {
          [v174 setSafeObject:firstEntryAssetType forKey:fullName];
          goto LABEL_26;
        }

        v213 = 0u;
        v214 = 0u;
        v211 = 0u;
        v212 = 0u;
        setConfigurations2 = [(MADAutoAssetStager *)selfCopy setConfigurations];
        v18 = [setConfigurations2 countByEnumeratingWithState:&v211 objects:v236 count:16];
        obj = setConfigurations2;
        if (v18)
        {
          v19 = *v212;
LABEL_11:
          v20 = 0;
          while (1)
          {
            if (*v212 != v19)
            {
              objc_enumerationMutation(obj);
            }

            v21 = *(*(&v211 + 1) + 8 * v20);
            clientDomainName = [v21 clientDomainName];
            clientDomainName2 = [v15 clientDomainName];
            if (([SUCore stringIsEqual:clientDomainName to:clientDomainName2]& 1) == 0)
            {
              break;
            }

            assetSetIdentifier = [v21 assetSetIdentifier];
            assetSetIdentifier2 = [v15 assetSetIdentifier];
            v26 = [SUCore stringIsEqual:assetSetIdentifier to:assetSetIdentifier2];

            if (v26)
            {
              firstEntryAssetType = [v21 firstEntryAssetType];
              if (firstEntryAssetType)
              {
                [v174 setSafeObject:firstEntryAssetType forKey:fullName];
                v29 = obj;
                goto LABEL_25;
              }

              clientDomainName = _MADLog(@"AutoStager");
              if (os_log_type_enabled(clientDomainName, OS_LOG_TYPE_DEFAULT))
              {
                summary = [(MADAutoAssetStager *)selfCopy summary];
                summary2 = [v15 summary];
                *buf = 138543618;
                v221 = summary;
                v222 = 2114;
                v223 = summary2;
                _os_log_impl(&dword_0, clientDomainName, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} set-target indicating nothing to be staged and no set-configuration | nextSetTarget:%{public}@", buf, 0x16u);
              }

              goto LABEL_20;
            }

LABEL_21:
            if (v18 == ++v20)
            {
              v18 = [obj countByEnumeratingWithState:&v211 objects:v236 count:16];
              if (v18)
              {
                goto LABEL_11;
              }

              goto LABEL_23;
            }
          }

LABEL_20:
          goto LABEL_21;
        }

LABEL_23:
        firstEntryAssetType = 0;
        v29 = obj;
LABEL_25:

LABEL_26:
        objc_autoreleasePoolPop(context);
        setTargets3 = v164;
        v14 = v175 + 1;
      }

      while ((v175 + 1) != v169);
      v13 = [v164 countByEnumeratingWithState:&v215 objects:v237 count:16];
      if (!v13)
      {
LABEL_28:

        break;
      }
    }
  }

  v209 = 0u;
  v210 = 0u;
  v207 = 0u;
  v208 = 0u;
  alreadyDownloaded = [determineCopy alreadyDownloaded];
  v162 = [alreadyDownloaded countByEnumeratingWithState:&v207 objects:v235 count:16];
  if (v162)
  {
    v161 = *v208;
    do
    {
      for (i = 0; i != v162; i = i + 1)
      {
        if (*v208 != v161)
        {
          objc_enumerationMutation(alreadyDownloaded);
        }

        obja = *(*(&v207 + 1) + 8 * i);
        v165 = objc_autoreleasePoolPush();
        if (!obja)
        {
          v59 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v59, OS_LOG_TYPE_DEFAULT))
          {
            summary3 = [(MADAutoAssetStager *)selfCopy summary];
            summary4 = [determineCopy summary];
            *buf = 138543618;
            v221 = summary3;
            v222 = 2114;
            v223 = summary4;
            _os_log_impl(&dword_0, v59, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} nil encountered on alreadyDownloaded array | eventInfo:%{public}@", buf, 0x16u);
          }

          goto LABEL_88;
        }

        v205 = 0u;
        v206 = 0u;
        v203 = 0u;
        v204 = 0u;
        v181 = _allEliminationSelectors;
        v30 = [v181 countByEnumeratingWithState:&v203 objects:v234 count:16];
        if (!v30)
        {

          goto LABEL_70;
        }

        v176 = v30;
        v179 = *v204;
        contexta = 1;
        do
        {
          for (j = 0; j != v176; j = j + 1)
          {
            if (*v204 != v179)
            {
              objc_enumerationMutation(v181);
            }

            v32 = *(*(&v203 + 1) + 8 * j);
            v33 = objc_autoreleasePoolPush();
            v34 = [v181 safeObjectForKey:v32 ofClass:objc_opt_class()];
            assetVersion = [v34 assetVersion];
            LOBYTE(v32) = assetVersion == 0;

            if (v32)
            {
              assetSpecifier = [v34 assetSpecifier];
              v46 = assetSpecifier == 0;

              if (v46)
              {
                assetType = [obja assetType];
                assetType2 = [v34 assetType];
                v55 = [SUCore stringIsEqual:assetType to:assetType2];

                if (!v55)
                {
LABEL_57:
                  v58 = 1;
                  goto LABEL_61;
                }

                assetType3 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(assetType3, OS_LOG_TYPE_DEFAULT))
                {
                  summary5 = [(MADAutoAssetStager *)selfCopy summary];
                  summary6 = [obja summary];
                  *buf = 138543618;
                  v221 = summary5;
                  v222 = 2114;
                  v223 = summary6;
                  _os_log_impl(&dword_0, assetType3, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} auto-control-manager provided downloaded descriptor for asset-type being eliminated - not considering downloaded | descriptor:%{public}@", buf, 0x16u);
                }
              }

              else
              {
                assetType3 = [obja assetType];
                assetType4 = [v34 assetType];
                if (([SUCore stringIsEqual:assetType3 to:assetType4]& 1) == 0)
                {

                  goto LABEL_59;
                }

                assetSpecifier2 = [obja assetSpecifier];
                assetSpecifier3 = [v34 assetSpecifier];
                v50 = [SUCore stringIsEqual:assetSpecifier2 to:assetSpecifier3];

                if (!v50)
                {
                  goto LABEL_57;
                }

                assetType3 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(assetType3, OS_LOG_TYPE_DEFAULT))
                {
                  summary7 = [(MADAutoAssetStager *)selfCopy summary];
                  summary8 = [obja summary];
                  *buf = 138543618;
                  v221 = summary7;
                  v222 = 2114;
                  v223 = summary8;
                  _os_log_impl(&dword_0, assetType3, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} auto-control-manager provided downloaded descriptor for asset-type + asset-specifier being eliminated - not considering downloaded | descriptor:%{public}@", buf, 0x16u);
                }
              }
            }

            else
            {
              assetType3 = [obja assetType];
              assetType5 = [v34 assetType];
              if (([SUCore stringIsEqual:assetType3 to:assetType5]& 1) == 0)
              {

LABEL_59:
                v58 = 1;
                goto LABEL_60;
              }

              assetSpecifier4 = [obja assetSpecifier];
              assetSpecifier5 = [v34 assetSpecifier];
              if (![SUCore stringIsEqual:assetSpecifier4 to:assetSpecifier5])
              {

                goto LABEL_59;
              }

              assetVersion2 = [obja assetVersion];
              assetVersion3 = [v34 assetVersion];
              v42 = [SUCore stringIsEqual:assetVersion2 to:assetVersion3];

              if (!v42)
              {
                goto LABEL_57;
              }

              assetType3 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(assetType3, OS_LOG_TYPE_DEFAULT))
              {
                summary9 = [(MADAutoAssetStager *)selfCopy summary];
                summary10 = [obja summary];
                *buf = 138543618;
                v221 = summary9;
                v222 = 2114;
                v223 = summary10;
                _os_log_impl(&dword_0, assetType3, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} auto-control-manager provided downloaded descriptor for asset-type + asset-specifier + asset-version being eliminated - not considering downloaded | descriptor:%{public}@", buf, 0x16u);
              }
            }

            contexta = 0;
            v58 = 0;
LABEL_60:

LABEL_61:
            objc_autoreleasePoolPop(v33);
            if (!v58)
            {
              goto LABEL_64;
            }
          }

          v176 = [v181 countByEnumeratingWithState:&v203 objects:v234 count:16];
        }

        while (v176);
LABEL_64:

        if ((contexta & 1) == 0)
        {
          goto LABEL_88;
        }

LABEL_70:
        v201 = 0u;
        v202 = 0u;
        v199 = 0u;
        v200 = 0u;
        setTargets4 = [(MADAutoAssetStager *)selfCopy setTargets];
        v63 = [setTargets4 countByEnumeratingWithState:&v199 objects:v233 count:16];
        if (!v63)
        {

LABEL_87:
          [v158 addObject:obja];
          goto LABEL_88;
        }

        v64 = *v200;
        v65 = 1;
LABEL_72:
        v66 = 0;
        while (1)
        {
          if (*v200 != v64)
          {
            objc_enumerationMutation(setTargets4);
          }

          v67 = *(*(&v199 + 1) + 8 * v66);
          v68 = objc_autoreleasePoolPush();
          fullName2 = [v67 fullName];
          v70 = [v174 safeObjectForKey:fullName2 ofClass:objc_opt_class()];

          if (-[MADAutoAssetStager _isSetTargetWithinRange:asCandidate:](selfCopy, "_isSetTargetWithinRange:asCandidate:", v67, 1) && ([obja assetType], v71 = objc_claimAutoreleasedReturnValue(), v72 = +[SUCore stringIsEqual:to:](SUCore, "stringIsEqual:to:", v71, v70), v71, v72))
          {
            v73 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v73, OS_LOG_TYPE_DEFAULT))
            {
              summary11 = [(MADAutoAssetStager *)selfCopy summary];
              summary12 = [obja summary];
              *buf = 138543618;
              v221 = summary11;
              v222 = 2114;
              v223 = summary12;
              _os_log_impl(&dword_0, v73, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} client-defined set-target for asset-type - not staging based on alread-downloaded | descriptor:%{public}@", buf, 0x16u);
            }

            v65 = 0;
            v76 = 1;
          }

          else
          {
            v76 = 0;
          }

          objc_autoreleasePoolPop(v68);
          if (v76)
          {
            break;
          }

          if (v63 == ++v66)
          {
            v63 = [setTargets4 countByEnumeratingWithState:&v199 objects:v233 count:16];
            if (v63)
            {
              goto LABEL_72;
            }

            break;
          }
        }

        if (v65)
        {
          goto LABEL_87;
        }

LABEL_88:
        objc_autoreleasePoolPop(v165);
      }

      v162 = [alreadyDownloaded countByEnumeratingWithState:&v207 objects:v235 count:16];
    }

    while (v162);
  }

  v77 = selfCopy;
  [(MADAutoAssetStager *)selfCopy setAlreadyDownloadedDescriptors:v158];
  v182 = objc_alloc_init(NSMutableArray);
  alreadyDownloadedDescriptors = [(MADAutoAssetStager *)selfCopy alreadyDownloadedDescriptors];
  if (!alreadyDownloadedDescriptors || (-[MADAutoAssetStager alreadyDownloadedDescriptors](selfCopy, "alreadyDownloadedDescriptors"), v79 = objc_claimAutoreleasedReturnValue(), v80 = [v79 count] == 0, v79, alreadyDownloadedDescriptors, v77 = selfCopy, v80))
  {
    alreadyDownloadedDescriptors3 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(alreadyDownloadedDescriptors3, OS_LOG_TYPE_DEFAULT))
    {
      summary13 = [(MADAutoAssetStager *)v77 summary];
      *buf = 138543362;
      v221 = summary13;
      _os_log_impl(&dword_0, alreadyDownloadedDescriptors3, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} auto-control-manager provided no downloaded descriptors - no candidate(s) for staging", buf, 0xCu);
    }
  }

  else
  {
    alreadyDownloadedDescriptors2 = [(MADAutoAssetStager *)selfCopy alreadyDownloadedDescriptors];
    v82 = [alreadyDownloadedDescriptors2 count];

    v83 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v83, OS_LOG_TYPE_DEFAULT))
    {
      summary14 = [(MADAutoAssetStager *)selfCopy summary];
      v85 = @"s";
      *buf = 138544130;
      v222 = 2048;
      v221 = summary14;
      if (v82 == &dword_0 + 1)
      {
        v85 = &stru_4BD3F0;
      }

      v223 = v82;
      v224 = 2114;
      v225 = v85;
      v226 = 2114;
      v227 = v85;
      _os_log_impl(&dword_0, v83, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} auto-control-manager provided %ld downloaded descriptor%{public}@ - potential candidate%{public}@ for staging", buf, 0x2Au);
    }

    v197 = 0u;
    v198 = 0u;
    v195 = 0u;
    v196 = 0u;
    alreadyDownloadedDescriptors3 = [(MADAutoAssetStager *)selfCopy alreadyDownloadedDescriptors];
    v87 = [alreadyDownloadedDescriptors3 countByEnumeratingWithState:&v195 objects:v232 count:16];
    if (v87)
    {
      v88 = 0;
      v89 = *v196;
      do
      {
        v90 = 0;
        v91 = v88;
        do
        {
          if (*v196 != v89)
          {
            objc_enumerationMutation(alreadyDownloadedDescriptors3);
          }

          v88 = *(*(&v195 + 1) + 8 * v90);

          v92 = objc_autoreleasePoolPush();
          [(MADAutoAssetStager *)selfCopy _maintainLatestCandidate:v182 candidateDescriptor:v88];
          objc_autoreleasePoolPop(v92);
          v90 = v90 + 1;
          v91 = v88;
        }

        while (v87 != v90);
        v87 = [alreadyDownloadedDescriptors3 countByEnumeratingWithState:&v195 objects:v232 count:16];
      }

      while (v87);
    }
  }

  if ([v182 count])
  {
    v94 = [(MADAutoAssetStager *)selfCopy _trimConsideringToLatestDownloaded:v182];

    loga = objc_alloc_init(NSMutableArray);
    v155 = objc_alloc_init(NSMutableArray);
    v163 = objc_alloc_init(NSMutableDictionary);
    v153 = objc_alloc_init(NSMutableDictionary);
    v154 = objc_alloc_init(NSMutableDictionary);
    contextb = objc_alloc_init(NSMutableDictionary);
    v193 = 0u;
    v194 = 0u;
    v191 = 0u;
    v192 = 0u;
    v182 = v94;
    v95 = [v182 countByEnumeratingWithState:&v191 objects:v231 count:16];
    if (v95)
    {
      v96 = 0;
      v177 = *v192;
      v166 = 1;
      while (1)
      {
        v180 = v95;
        v97 = 0;
        v98 = v96;
        do
        {
          if (*v192 != v177)
          {
            objc_enumerationMutation(v182);
          }

          v96 = *(*(&v191 + 1) + 8 * v97);

          objb = objc_autoreleasePoolPush();
          if (v96)
          {
            v189 = 0u;
            v190 = 0u;
            v187 = 0u;
            v188 = 0u;
            setTargets5 = [(MADAutoAssetStager *)selfCopy setTargets];
            v100 = [setTargets5 countByEnumeratingWithState:&v187 objects:v230 count:16];
            if (v100)
            {
              v101 = 0;
              v102 = *v188;
LABEL_115:
              v103 = 0;
              while (1)
              {
                if (*v188 != v102)
                {
                  objc_enumerationMutation(setTargets5);
                }

                v104 = *(*(&v187 + 1) + 8 * v103);
                v105 = objc_autoreleasePoolPush();
                if ([(MADAutoAssetStager *)selfCopy _isSetTargetWithinRange:v104 asCandidate:1])
                {
                  assetType6 = [v96 assetType];
                  v107 = [v104 includesEntryForAssetType:assetType6];

                  v101 |= v107;
                }

                else
                {
                  v107 = 0;
                }

                objc_autoreleasePoolPop(v105);
                if (v107)
                {
                  break;
                }

                if (v100 == ++v103)
                {
                  v100 = [setTargets5 countByEnumeratingWithState:&v187 objects:v230 count:16];
                  if (v100)
                  {
                    goto LABEL_115;
                  }

                  break;
                }
              }

              if (v101)
              {
                v112 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(v112, OS_LOG_TYPE_DEFAULT))
                {
                  summary15 = [(MADAutoAssetStager *)selfCopy summary];
                  _targetNameActive = [(MADAutoAssetStager *)selfCopy _targetNameActive];
                  summary16 = [v96 summary];
                  *buf = 138544130;
                  v221 = summary15;
                  v222 = 2114;
                  v223 = _targetNameActive;
                  v224 = 2114;
                  v225 = summary16;
                  v226 = 2114;
                  v227 = @"IGNORED";
                  _os_log_impl(&dword_0, v112, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {FormCandidatesDecideDetermine} [IGNORED(by-set-target)] candidateDescriptor:%{public}@ mode::%{public}@", buf, 0x2Au);
                }

                _targetNameActiveRequired = @"IGNORED";
                goto LABEL_139;
              }
            }

            else
            {
            }

            v114 = selfCopy;
            if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
            {
              if (([v96 isPreSUStagingRequired] & doesStagingInvolveRequired) == 1)
              {
                _targetNameActiveRequired = [(MADAutoAssetStager *)selfCopy _targetNameActiveRequired];
                [loga addObject:v96];
                [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v96 inContainer:v163];
                v166 = 0;
              }

              else if (([v96 isPreSUStagingRequired] | doesStagingInvolveOptional ^ 1))
              {
                [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v96 inContainer:v154];
                _targetNameActiveRequired = @"IGNORED";
              }

              else
              {
                _targetNameActiveRequired = [(MADAutoAssetStager *)selfCopy _targetNameActiveOptional];
                [v155 addObject:v96];
                [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v96 inContainer:v153];
              }
            }

            else
            {
              candidatesForStaging = [(MADAutoAssetStager *)selfCopy candidatesForStaging];
              [candidatesForStaging addObject:v96];

              v114 = selfCopy;
              [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v96 inContainer:contextb];
              _targetNameActiveRequired = @"ALL";
            }

            v112 = [[NSString alloc] initWithFormat:@"[%@] adding candidate (from downloaded that support staging)", _targetNameActiveRequired];
            [(MADAutoAssetStager *)v114 _persistDescriptor:@"FormCandidatesDecideDetermine" operation:@"ENTRY_ADD" persistingDescriptor:v96 withRepresentation:600 message:v112];
LABEL_139:

            goto LABEL_140;
          }

          _targetNameActiveRequired = _MADLog(@"AutoStager");
          if (os_log_type_enabled(_targetNameActiveRequired, OS_LOG_TYPE_ERROR))
          {
            summary17 = [(MADAutoAssetStager *)selfCopy summary];
            *buf = 138543362;
            v221 = summary17;
            _os_log_impl(&dword_0, _targetNameActiveRequired, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} nil encountered on consideringDescriptors array", buf, 0xCu);
          }

LABEL_140:

          objc_autoreleasePoolPop(objb);
          v97 = v97 + 1;
          v98 = v96;
        }

        while (v97 != v180);
        v95 = [v182 countByEnumeratingWithState:&v191 objects:v231 count:16];
        if (!v95)
        {

          goto LABEL_147;
        }
      }
    }

    v166 = 1;
LABEL_147:

    v118 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v118, OS_LOG_TYPE_DEFAULT))
    {
      summary18 = [(MADAutoAssetStager *)selfCopy summary];
      v120 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v163];
      v121 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v153];
      v122 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v154];
      v123 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:contextb];
      *buf = 138544386;
      v221 = summary18;
      v222 = 2114;
      v223 = v120;
      v224 = 2114;
      v225 = v121;
      v226 = 2114;
      v227 = v122;
      v228 = 2114;
      v229 = v123;
      _os_log_impl(&dword_0, v118, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} candidate descriptors\n>>> Required:%{public}@\n>>> Optional:%{public}@\n>>> Ignored:%{public}@\n>>> AllMode:%{public}@", buf, 0x34u);
    }

    v124 = selfCopy;
    if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
    {
      [(MADAutoAssetStager *)selfCopy _blendOptionalCandidates:v155 intoRequired:loga];
      if ((doesStagingInvolveRequired | doesStagingInvolveOptional))
      {
        assetTargetTrainName = [(MADAutoAssetStager *)selfCopy assetTargetTrainName];
        assetTargetRestoreVersion = [(MADAutoAssetStager *)selfCopy assetTargetRestoreVersion];
        autoStagerFSM2 = [(MADAutoAssetStager *)selfCopy targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

        candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)selfCopy candidatesForStagingRequiredByTarget];
        [candidatesForStagingRequiredByTarget setSafeObject:loga forKey:autoStagerFSM2];

        candidatesForStagingOptionalByTarget = [(MADAutoAssetStager *)selfCopy candidatesForStagingOptionalByTarget];
        [candidatesForStagingOptionalByTarget setSafeObject:v155 forKey:autoStagerFSM2];

        v130 = [loga count]!= 0;
        v131 = loga;
        if ((v130 & doesStagingInvolveRequired & 1) != 0 || (v132 = [v155 count]!= 0, v131 = v155, (v132 & doesStagingInvolveOptional) == 1))
        {
          [(MADAutoAssetStager *)selfCopy setCandidatesForStaging:v131];
        }
      }

      else
      {
        autoStagerFSM2 = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{FormCandidatesDecideDetermine} [BY-GROUP-MODE] forming candidates yet not involving required or optional" withResult:6110 withError:0];
      }

      v124 = selfCopy;
    }

    if ([(MADAutoAssetStager *)v124 stagingClientUsingGroups])
    {
      candidatesForStagingRequiredByTarget2 = [(MADAutoAssetStager *)v124 candidatesForStagingRequiredByTarget];
      v135 = [candidatesForStagingRequiredByTarget2 count];
      candidatesForStagingOptionalByTarget2 = [(MADAutoAssetStager *)v124 candidatesForStagingOptionalByTarget];
      v137 = [candidatesForStagingOptionalByTarget2 count];

      v138 = &v135[v137];
    }

    else
    {
      candidatesForStagingRequiredByTarget2 = [(MADAutoAssetStager *)v124 candidatesForStaging];
      v138 = [candidatesForStagingRequiredByTarget2 count];
    }

    persistedState = [(MADAutoAssetStager *)selfCopy persistedState];
    persistedConfig = [persistedState persistedConfig];
    [persistedConfig persistULL:v138 forKey:@"candidateAssetCount" shouldPersist:1];

    if (v138)
    {
      v138 = [[NSString alloc] initWithFormat:@"found candidate(s) for staging | totalCandidatesForStaging:%llu", v138];
      [(MADAutoAssetStager *)selfCopy _logPersistedConfigSet:@"FormCandidatesDecideDetermine" message:v138];

      v117 = @"DetermineHaveCandidates";
      [(MADAutoAssetStager *)selfCopy _logMilestoneFromLocation:@"FormCandidatesDecideDetermine" resultingInEvent:@"DetermineHaveCandidates" forMilestoneActivity:@"have downloaded auto-asset candidate(s) for staging"];
    }

    else
    {
      v117 = @"DetermineNoCandidates";
    }
  }

  else
  {
    loga = _MADLog(@"AutoStager");
    if (os_log_type_enabled(loga, OS_LOG_TYPE_DEFAULT))
    {
      summary19 = [(MADAutoAssetStager *)selfCopy summary];
      *buf = 138543362;
      v221 = summary19;
      _os_log_impl(&dword_0, loga, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} no candidate descriptors for staging", buf, 0xCu);
    }

    v117 = @"DetermineNoCandidates";
    v166 = 1;
  }

  v142 = selfCopy;
  if ((+[SUCore stringIsEqual:to:](SUCore, "stringIsEqual:to:", v117, @"DetermineHaveCandidates") & 1) != 0 || (-[MADAutoAssetStager setTargets](selfCopy, "setTargets"), v143 = objc_claimAutoreleasedReturnValue(), v144 = [v143 count] == 0, v143, v142 = selfCopy, !v144))
  {
    if ([(MADAutoAssetStager *)v142 _formCandidateSetLookupArray:@"FormCandidatesDecideDetermine" involvingRequired:doesStagingInvolveRequired involvingOptional:doesStagingInvolveOptional providingOptional:v166 & 1])
    {
      v117 = @"DetermineHaveCandidates";
    }

    else if ([SUCore stringIsEqual:v117 to:@"DetermineHaveCandidates"])
    {
      v145 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v145, OS_LOG_TYPE_ERROR))
      {
        summary20 = [(MADAutoAssetStager *)selfCopy summary];
        *buf = 138543362;
        v221 = summary20;
        _os_log_impl(&dword_0, v145, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {FormCandidatesDecideDetermine} should have candidates yet unable to form set-lookup array", buf, 0xCu);
      }

      v117 = @"DetermineNoCandidates";
      v142 = selfCopy;
    }
  }

  [(MADAutoAssetStager *)v142 _acknowlegdeAndClearAllEliminations];
  autoStagerFSM3 = [(MADAutoAssetStager *)v142 autoStagerFSM];
  v148 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)v142 _updateLatestSummary];
  v150 = [(MADAutoAssetStagerParam *)v148 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM3 followupEvent:v117 withInfo:v150];

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_DoneCandidatesDecideAnyAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v22.opaque[0] = 0;
  v22.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DoneCandidatesDecideAnyAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v22);

  v9 = [(MADAutoAssetStager *)self availableForStaging:v22.opaque[0]];
  v10 = [v9 count];

  if (v10 && (-[MADAutoAssetStager considerInjectionIntoAvailableForStaging](self, "considerInjectionIntoAvailableForStaging"), -[MADAutoAssetStager availableForStaging](self, "availableForStaging"), v11 = objc_claimAutoreleasedReturnValue(), -[MADAutoAssetStager dedupAvailableForStaging:dedupingAssetDescriptors:removingAlreadyDownloaded:ofContainerName:](self, "dedupAvailableForStaging:dedupingAssetDescriptors:removingAlreadyDownloaded:ofContainerName:", @"DoneCandidatesDecideAnyAvailable", v11, 0, @"availableForStaging"), v12 = objc_claimAutoreleasedReturnValue(), -[MADAutoAssetStager setAvailableForStaging:](self, "setAvailableForStaging:", v12), v12, v11, -[MADAutoAssetStager availableForStaging](self, "availableForStaging"), v13 = objc_claimAutoreleasedReturnValue(), v14 = [v13 count], v13, v14))
  {
    if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
    {
      v15 = [(MADAutoAssetStager *)self splitOutAvailableForStagingByGroup:@"DoneCandidatesDecideAnyAvailable" forGroupDetermine:1];
    }

    [(MADAutoAssetStager *)self _logPersistedActiveTargetLookupResults:@"DoneCandidatesDecideAnyAvailable"];
    v16 = @"DetermineHaveAvailable";
  }

  else
  {
    v16 = @"DetermineNothingAvailable";
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituationForFollowup:v16 fromLocation:@"DoneCandidatesDecideAnyAvailable"];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v18 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v20 = [(MADAutoAssetStagerParam *)v18 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v16 withInfo:v20];

  os_activity_scope_leave(&v22);
  return 0;
}

- (int64_t)action_NextCandidateBeginDetermine:(id)determine error:(id *)error
{
  determineCopy = determine;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v18.opaque[0] = 0;
  v18.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:NextCandidateBeginDetermine", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v18);

  v9 = [(MADAutoAssetStager *)self candidateSetConfigurations:v18.opaque[0]];
  v10 = [v9 count];

  if (v10)
  {
    [(MADAutoAssetStager *)self _startDetermineJobForNextCandidate:@"NextCandidateBeginDetermine"];
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{NextCandidateBeginDetermine} no candidates available for staging (after considering downloaded auto-assets and set-identifiers)" withResult:6111 withError:0];

    autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
    v14 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v16 = [(MADAutoAssetStagerParam *)v14 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM3 postEvent:@"JobDetermineAvailableFailure" withInfo:v16];
  }

  os_activity_scope_leave(&v18);

  return 0;
}

- (int64_t)action_NextAwaitingBeginDownload:(id)download error:(id *)error
{
  downloadCopy = download;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:NextAwaitingBeginDownload", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  LOBYTE(extendedStateQueue) = [awaitingStagingAttempt count] == 0;

  if ((extendedStateQueue & 1) == 0)
  {
    awaitingStagingAttempt2 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    v10 = [awaitingStagingAttempt2 objectAtIndex:0];
    [(MADAutoAssetStager *)self setActiveJobDescriptor:v10];

    awaitingStagingAttempt3 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    [awaitingStagingAttempt3 removeObjectAtIndex:0];

    persistedState = [(MADAutoAssetStager *)self persistedState];
    persistedConfig = [persistedState persistedConfig];
    awaitingStagingAttempt4 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    [persistedConfig persistULL:objc_msgSend(awaitingStagingAttempt4 forKey:{"count"), @"awaitingStagingAssetCount"}];

    persistedState2 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig2 = [persistedState2 persistedConfig];
    [persistedConfig2 persistULL:1 forKey:@"activelyStagingAssetCount" shouldPersist:1];

    [(MADAutoAssetStager *)self _logPersistedConfigSet:@"NextAwaitingBeginDownload" message:@"begin download-for-staging"];
    v17 = [MAAutoAssetSelector alloc];
    activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetType = [activeJobDescriptor assetType];
    activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetSpecifier = [activeJobDescriptor2 assetSpecifier];
    activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetVersion = [activeJobDescriptor3 assetVersion];
    autoStagerFSM7 = [v17 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

    if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
    {
      assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
      assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
      setLookupResults2 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

      v28 = [(MADAutoAssetStager *)self getTargetLookupResultsForKey:setLookupResults2];
      activeJobDescriptor11 = v28;
      if (v28)
      {
        setLookupResults = [v28 setLookupResults];
        activeJobDescriptor4 = [(MADAutoAssetStager *)self activeJobDescriptor];
        assetType2 = [activeJobDescriptor4 assetType];
        autoStagerFSM5 = [setLookupResults safeObjectForKey:assetType2 ofClass:objc_opt_class()];

        if (autoStagerFSM5)
        {
          autoAssetSetCatalog = [autoStagerFSM5 autoAssetSetCatalog];
LABEL_8:
          _updateLatestSummary = autoAssetSetCatalog;
LABEL_12:

          activeJobDescriptor5 = [(MADAutoAssetStager *)self activeJobDescriptor];
          assetType3 = [activeJobDescriptor5 assetType];
          activeJobDescriptor6 = [(MADAutoAssetStager *)self activeJobDescriptor];
          assetSpecifier2 = [activeJobDescriptor6 assetSpecifier];
          v39 = [(MADAutoAssetStager *)self newAssetMetadataFromAssetCatalog:_updateLatestSummary forAssetype:assetType3 forAssetSpecifier:assetSpecifier2];

          if (+[MADAutoAssetControlManager preferenceStagerDownloadFirstNotInCatalog]&& ![(MADAutoAssetStager *)self firstDownloadedAsIfNotInCatalog])
          {
            [(MADAutoAssetStager *)self setFirstDownloadedAsIfNotInCatalog:1];
          }

          else if (v39)
          {
            activeJobDescriptor7 = [(MADAutoAssetStager *)self activeJobDescriptor];
            [(MADAutoAssetStager *)self _persistDescriptor:@"_setupAwaitingStagingAndBeginFirstDownload" operation:@"ENTRY_MODIFY" persistingDescriptor:activeJobDescriptor7 withRepresentation:602 message:@"starting stager-job to download for staging"];

            v51 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v51, OS_LOG_TYPE_DEFAULT))
            {
              summary = [(MADAutoAssetStager *)self summary];
              activeJobDescriptor8 = [(MADAutoAssetStager *)self activeJobDescriptor];
              summary2 = [activeJobDescriptor8 summary];
              *buf = 138543618;
              v70 = summary;
              v71 = 2114;
              v72 = summary2;
              _os_log_impl(&dword_0, v51, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {NextAwaitingBeginDownload} begin download-for-staging | activeJobDescriptor:%{public}@", buf, 0x16u);
            }

            activeSetJobConfiguration = [(MADAutoAssetStager *)self activeSetJobConfiguration];
            autoStagerFSM3 = [(MADAutoAssetStager *)self baseForPatchingToSelector:autoStagerFSM7];
            assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
            assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
            [MADAutoAssetControlManager stagerStartJobDownloadForStaging:autoStagerFSM7 withStagerSetConfiguration:activeSetJobConfiguration usingCachedAutoAssetCatalog:v39 usingBaseForPatching:autoStagerFSM3 withAssetTargetOSVersion:assetTargetOSVersion withAssetTargetBuildVersion:assetTargetBuildVersion];

            goto LABEL_20;
          }

          v39 = [MAAutoAssetError buildError:6613 fromOperation:@"AUTO-CONTROL(NextAwaitingBeginDownload)" underlyingError:0 withDescription:@"unable to locate asset to be downloaded in set-lookup-results - skipping asset"];
          activeSetJobConfiguration = [[MADAutoAssetStagerParam alloc] initWithJobInformation:0 withDownloadedDescriptor:0 withOperationError:v39];
          autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
          diag = [autoStagerFSM2 diag];
          v61 = [NSString alloc];
          activeJobDescriptor9 = [(MADAutoAssetStager *)self activeJobDescriptor];
          summary3 = [activeJobDescriptor9 summary];
          v64 = [v61 initWithFormat:@"{NextAwaitingBeginDownload} unable to locate entry in set-look-results - skipping asset | stagingDescriptor:%@", summary3];
          [diag trackAnomaly:@"AUTO-STAGER" forReason:v64 withResult:6111 withError:0];

          autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
          [autoStagerFSM3 postEvent:@"JobDownloadForStagingFailure" withInfo:activeSetJobConfiguration];
LABEL_20:

          goto LABEL_21;
        }

        autoStagerFSM4 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag2 = [autoStagerFSM4 diag];
        v41 = [NSString alloc];
        activeJobDescriptor10 = [(MADAutoAssetStager *)self activeJobDescriptor];
        assetType4 = [activeJobDescriptor10 assetType];
        summary4 = [activeJobDescriptor11 summary];
        v45 = [v41 initWithFormat:@"{NextAwaitingBeginDownload} no set-lookup-result for asset-type | assetType:%@ | trainTargetLookupResults:%@", assetType4, summary4];
        [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v45 withResult:6111 withError:0];
      }

      else
      {
        autoStagerFSM5 = [(MADAutoAssetStager *)self autoStagerFSM];
        autoStagerFSM4 = [autoStagerFSM5 diag];
        [autoStagerFSM4 trackAnomaly:@"AUTO-STAGER" forReason:@"{NextAwaitingBeginDownload} no lookup-results for target" withResult:6111 withError:0];
      }

      _updateLatestSummary = 0;
      goto LABEL_12;
    }

    setLookupResults2 = [(MADAutoAssetStager *)self setLookupResults];
    activeJobDescriptor11 = [(MADAutoAssetStager *)self activeJobDescriptor];
    autoStagerFSM5 = [activeJobDescriptor11 assetType];
    autoAssetSetCatalog = [setLookupResults2 safeObjectForKey:autoStagerFSM5 ofClass:objc_opt_class()];
    goto LABEL_8;
  }

  autoStagerFSM6 = [(MADAutoAssetStager *)self autoStagerFSM];
  diag3 = [autoStagerFSM6 diag];
  [diag3 trackAnomaly:@"AUTO-STAGER" forReason:@"{NextAwaitingBeginDownload} no candidates available for staging" withResult:6111 withError:0];

  autoStagerFSM7 = [(MADAutoAssetStager *)self autoStagerFSM];
  v37 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v39 = [(MADAutoAssetStagerParam *)v37 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM7 postEvent:@"JobDownloadForStagingFailure" withInfo:v39];
LABEL_21:

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_DoneAvailableDecideAnyStaged:(id)staged error:(id *)error
{
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v24.opaque[0] = 0;
  v24.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:DoneAvailableDecideAnyStaged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v24);

  v9 = [(MADAutoAssetStager *)self successfullyStaged:v24.opaque[0]];
  v10 = [v9 count];

  if (v10)
  {
    v11 = 0;
    v12 = 0;
    if ([(MADAutoAssetStager *)self _stagedAllDesiredForCurrentTarget])
    {
      v13 = 501;
    }

    else
    {
      v13 = 500;
    }

    v14 = @"DownloadHaveStaged";
  }

  else
  {
    availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
    v16 = [availableForStaging count];

    v11 = v16 != 0;
    v12 = v16 == 0;
    if (v16)
    {
      v13 = 401;
    }

    else
    {
      v13 = 402;
    }

    if (v16)
    {
      v14 = @"DownloadNothingStaged";
    }

    else
    {
      v14 = @"DownloadNothingStagedEmpty";
    }
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituation:v13 fromLocation:@"DoneAvailableDecideAnyStaged"];
  if (v11 || v12)
  {
    persistedState = [(MADAutoAssetStager *)self persistedState];
    persistedConfig = [persistedState persistedConfig];
    [persistedConfig persistBoolean:1 forKey:@"stagedNoContent"];
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v20 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v22 = [(MADAutoAssetStagerParam *)v20 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v14 withInfo:v22];

  os_activity_scope_leave(&v24);
  return 0;
}

- (int64_t)action_ReplyHaveAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:ReplyHaveAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  v8 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)self setDeterminingBySelector:v8];

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)self _stagingClientRequestDetermineClear:@"ReplyHaveAvailable" forStagingTargetName:0 replyingToCleared:0];
  }

  else
  {
    [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:@"ReplyHaveAvailable" replyingToCleared:0];
  }
  v23 = ;
  if (!v23)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyHaveAvailable} intending to reply to staging-client with indication candidate(s) available for staging (no pending staging-client-request)" withResult:6111 withError:0];
LABEL_10:

    goto LABEL_23;
  }

  clientReplyCompletion = [v23 clientReplyCompletion];
  v10 = clientReplyCompletion == 0;

  if (v10)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyHaveAvailable} intending to reply to staging-client with indication of candidate(s) available for staging (pending staging-client-request with no reply-completion)" withResult:6111 withError:0];
    goto LABEL_10;
  }

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    v11 = [(MADAutoAssetStager *)self newStagingInfoWithGroupsAvailableForStaging:@"ReplyHaveAvailable" indicatingHaveAvailable:1];
  }

  else
  {
    v11 = [(MADAutoAssetStager *)self newStagingInfoWithAllAvailableForStaging:@"ReplyHaveAvailable"];
  }

  autoStagerFSM2 = v11;
  [(MADAutoAssetStager *)self _acknowlegdeAndClearAllEliminations];
  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    v26 = 0u;
    v27 = 0u;
    v24 = 0u;
    v25 = 0u;
    byGroupAvailableForStagingAttributes = [autoStagerFSM2 byGroupAvailableForStagingAttributes];
    v15 = [byGroupAvailableForStagingAttributes countByEnumeratingWithState:&v24 objects:v29 count:16];
    if (v15)
    {
      v16 = *v25;
      do
      {
        for (i = 0; i != v15; i = i + 1)
        {
          if (*v25 != v16)
          {
            objc_enumerationMutation(byGroupAvailableForStagingAttributes);
          }

          v18 = *(*(&v24 + 1) + 8 * i);
          byGroupAvailableForStagingAttributes2 = [autoStagerFSM2 byGroupAvailableForStagingAttributes];
          v20 = [byGroupAvailableForStagingAttributes2 objectForKey:v18];
          -[MADAutoAssetStager _recordOperationForStagedAttributes:required:](self, "_recordOperationForStagedAttributes:required:", v20, [v18 isEqualToString:@"STAGE_GROUP_REQUIRED"]);
        }

        v15 = [byGroupAvailableForStagingAttributes countByEnumeratingWithState:&v24 objects:v29 count:16];
      }

      while (v15);
    }
  }

  else
  {
    byGroupAvailableForStagingAttributes = [autoStagerFSM2 allAvailableForStagingAttributes];
    [(MADAutoAssetStager *)self _recordOperationForStagedAttributes:byGroupAvailableForStagingAttributes required:0];
  }

  [(MADAutoAssetStager *)self _replyToStagingClient:@"ReplyHaveAvailable" withStagingInfo:autoStagerFSM2 replyingToStagingRequest:v23 recordingOperation:901];
  [(MADAutoAssetStager *)self _logMilestoneFromLocation:@"ReplyHaveAvailable" resultingInEvent:0 forMilestoneActivity:@"have available content for staging"];
LABEL_23:

  os_activity_scope_leave(&state);
  return 0;
}

- (void)_recordOperationForStagedAttributes:(id)attributes required:(BOOL)required
{
  attributesCopy = attributes;
  if (attributesCopy)
  {
    v24 = 0u;
    v25 = 0u;
    v22 = 0u;
    v23 = 0u;
    v19 = attributesCopy;
    v6 = attributesCopy;
    v7 = [v6 countByEnumeratingWithState:&v22 objects:v26 count:16];
    if (v7)
    {
      v8 = v7;
      v21 = *v23;
      do
      {
        v9 = 0;
        do
        {
          if (*v23 != v21)
          {
            objc_enumerationMutation(v6);
          }

          v10 = *(*(&v22 + 1) + 8 * v9);
          v11 = objc_autoreleasePoolPush();
          v12 = [v6 objectForKey:v10];
          if (v12)
          {
            v13 = [MAAutoAssetSelector alloc];
            v14 = [v12 objectForKey:@"AssetType"];
            v15 = [v13 initForAssetType:v14 withAssetSpecifier:@"AssetSpecifier" matchingAssetVersion:@"AssetVersion"];

            assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
            assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
            LOBYTE(v18) = required;
            [MADAutoAssetHistory recordOperation:1100 toHistoryType:4 fromLayer:4 withSelector:v15 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion isRequired:v18];
          }

          objc_autoreleasePoolPop(v11);
          v9 = v9 + 1;
        }

        while (v8 != v9);
        v8 = [v6 countByEnumeratingWithState:&v22 objects:v26 count:16];
      }

      while (v8);
    }

    attributesCopy = v19;
  }
}

- (int64_t)action_ReplyNoCandidates:(id)candidates error:(id *)error
{
  candidatesCopy = candidates;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyNoCandidates", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _replyNoCandidates:@"ReplyNoCandidates", v10.opaque[0], v10.opaque[1]];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_ReplyNoCandidatesPurgeAll:(id)all error:(id *)error
{
  allCopy = all;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyNoCandidatesPurgeAll", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _replyNoCandidates:@"ReplyNoCandidatesPurgeAll", v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"ReplyNoCandidatesPurgeAll" alsoPerformingPurgeAll:1 removingDetermined:0];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_ReplyNoCandidatesEraseAll:(id)all error:(id *)error
{
  allCopy = all;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyNoCandidatesEraseAll", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _replyNoCandidates:@"ReplyNoCandidatesEraseAll", v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"ReplyNoCandidatesEraseAll" alsoPerformingPurgeAll:1 removingDetermined:1];
  [(MADAutoAssetStager *)self _replyToStagingClientOperationSuccess];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_ReplyNothingStaged:(id)staged error:(id *)error
{
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyNothingStaged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  stagingClientRequest = [stagedCopy stagingClientRequest];
  clientID = [stagingClientRequest clientID];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:902 toHistoryType:4 fromLayer:4 fromClient:stagingClientName fromClientDomain:clientID forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  [(MADAutoAssetStager *)self _acknowlegdeAndClearAllEliminations];
  [(MADAutoAssetStager *)self _replyNothingStaged:@"ReplyNothingStaged"];
  os_activity_scope_leave(&state);

  return 0;
}

- (int64_t)action_ReplyNothingStagedPurgeAll:(id)all error:(id *)error
{
  allCopy = all;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyNothingStagedPurgeAll", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  stagingClientRequest = [allCopy stagingClientRequest];
  clientID = [stagingClientRequest clientID];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:902 toHistoryType:4 fromLayer:4 fromClient:stagingClientName fromClientDomain:clientID forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  [(MADAutoAssetStager *)self _acknowlegdeAndClearAllEliminations];
  [(MADAutoAssetStager *)self _replyNothingStaged:@"ReplyNothingStagedPurgeAll"];
  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"ReplyNothingStagedPurgeAll" alsoPerformingPurgeAll:1 removingDetermined:0];
  os_activity_scope_leave(&state);

  return 0;
}

- (int64_t)action_ReplyNothingStagedEraseAll:(id)all error:(id *)error
{
  allCopy = all;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyNothingStagedEraseAll", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &state);

  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  stagingClientRequest = [allCopy stagingClientRequest];
  clientID = [stagingClientRequest clientID];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:902 toHistoryType:4 fromLayer:4 fromClient:stagingClientName fromClientDomain:clientID forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  [(MADAutoAssetStager *)self _acknowlegdeAndClearAllEliminations];
  [(MADAutoAssetStager *)self _replyNothingStaged:@"ReplyNothingStagedPurgeAll"];
  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"ReplyNothingStagedPurgeAll" alsoPerformingPurgeAll:1 removingDetermined:1];
  os_activity_scope_leave(&state);

  return 0;
}

- (int64_t)action_ReplyHaveStaged:(id)staged error:(id *)error
{
  stagedCopy = staged;
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:ReplyHaveStaged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
  {
    assetTargetTrainName = [(MADAutoAssetStager *)selfCopy assetTargetTrainName];
    assetTargetRestoreVersion = [(MADAutoAssetStager *)selfCopy assetTargetRestoreVersion];
    v32 = [(MADAutoAssetStager *)selfCopy targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

    v10 = [(MADAutoAssetStager *)selfCopy getTargetLookupResultsForKey:v32];
    v11 = v10;
    if (v10)
    {
      v37 = 0u;
      v38 = 0u;
      v35 = 0u;
      v36 = 0u;
      setLookupResults = [v10 setLookupResults];
      v13 = [setLookupResults countByEnumeratingWithState:&v35 objects:v40 count:16];
      if (v13)
      {
        v14 = *v36;
        do
        {
          for (i = 0; i != v13; i = i + 1)
          {
            if (*v36 != v14)
            {
              objc_enumerationMutation(setLookupResults);
            }

            v16 = *(*(&v35 + 1) + 8 * i);
            setLookupResults2 = [v11 setLookupResults];
            v18 = [setLookupResults2 safeObjectForKey:v16 ofClass:objc_opt_class()];

            if (v18)
            {
              [(MADAutoAssetStager *)selfCopy _lookupCachePersistResult:v18 fromLocation:@"ReplyHaveStaged"];
            }

            else
            {
              autoStagerFSM2 = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
              diag = [autoStagerFSM2 diag];
              [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyHaveStaged} nil lookup-result" withResult:6111 withError:0];
            }
          }

          v13 = [setLookupResults countByEnumeratingWithState:&v35 objects:v40 count:16];
        }

        while (v13);
      }
    }

    else
    {
      setLookupResults = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
      diag2 = [setLookupResults diag];
      [diag2 trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyHaveStaged} no lookup-results for target" withResult:6111 withError:0];
    }
  }

  persistedState = [(MADAutoAssetStager *)selfCopy persistedState];
  persistedConfig = [persistedState persistedConfig];
  [persistedConfig persistULL:0 forKey:@"determinedAvailableAssetCount"];

  persistedState2 = [(MADAutoAssetStager *)selfCopy persistedState];
  persistedConfig2 = [persistedState2 persistedConfig];
  [persistedConfig2 persistULL:0 forKey:@"awaitingStagingAssetCount" shouldPersist:1];

  [(MADAutoAssetStager *)selfCopy _logPersistedConfigSet:@"ReplyHaveStaged" message:@"reply to staging-client with indication that there is at least one auto-asset that has been staged"];
  v26 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)selfCopy setAvailableForStagingRequiredByTarget:v26];

  v27 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)selfCopy setAvailableForStagingOptionalByTarget:v27];

  v28 = objc_alloc_init(NSMutableArray);
  [(MADAutoAssetStager *)selfCopy setAvailableForStaging:v28];

  v29 = objc_alloc_init(NSMutableArray);
  [(MADAutoAssetStager *)selfCopy setAwaitingStagingAttempt:v29];

  persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)selfCopy persistedAvailableForStagingByTarget];
  [persistedAvailableForStagingByTarget removeAllPersistedEntries:@"ReplyHaveStaged"];

  [(MADAutoAssetStager *)selfCopy _replyHaveStagedContent:@"ReplyHaveStaged" withEventInfo:stagedCopy];
  [(MADAutoAssetStager *)selfCopy _logMilestoneFromLocation:@"ReplyHaveStaged" resultingInEvent:0 forMilestoneActivity:@"have staged content"];
  os_activity_scope_leave(&state);

  return 0;
}

- (int64_t)action_ReplyFailRequiredDownload:(id)download error:(id *)error
{
  downloadCopy = download;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v9 = _os_activity_create(&dword_0, "MADStager:ReplyFailRequiredDownload", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v9, &state);

  activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];

  if (activeJobDescriptor)
  {
    v11 = [MAAutoAssetSelector alloc];
    activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetType = [activeJobDescriptor2 assetType];
    activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetSpecifier = [activeJobDescriptor3 assetSpecifier];
    activeJobDescriptor4 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetVersion = [activeJobDescriptor4 assetVersion];
    v17 = [v11 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

    summary = [v17 summary];
  }

  else
  {
    summary = @"NOT-IDENTIFIED";
  }

  v19 = [NSString alloc];
  operationError = [downloadCopy operationError];
  if (operationError)
  {
    activeJobDescriptor3 = [downloadCopy operationError];
    checkedDescription = [activeJobDescriptor3 checkedDescription];
  }

  else
  {
    checkedDescription = @"BLOCK-OTA";
  }

  v22 = [v19 initWithFormat:@"failed to download REQUIRED server-side content - OTA cannot proceed | asset-selector:%@ | error:%@", summary, checkedDescription, state.opaque[0], state.opaque[1]];
  if (operationError)
  {
  }

  _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
  v24 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"ReplyFailRequiredDownload" forStagingTargetName:_targetNameActiveClient replyingToCleared:0];

  if (v24)
  {
    operationError2 = [downloadCopy operationError];
    [(MADAutoAssetStager *)self _replyToStagingClient:@"ReplyFailRequiredDownload" replyingToRequest:v24 withErrorCode:6611 withUnderlyingError:operationError2 withDescription:v22];
  }

  else
  {
    operationError2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [operationError2 diag];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyFailRequiredDownload} nil download-request" withResult:6111 withError:0];
  }

  [(MADAutoAssetStager *)self _persistTargetOTASituation:403 fromLocation:@"ReplyFailRequiredDownload"];
  os_activity_scope_leave(&state);

  return 0;
}

- (int64_t)action_ReplyNoCandidatesHaveOtherTarget:(id)target error:(id *)error
{
  targetCopy = target;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyNoCandidatesHaveOtherTarget", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _replyNoCandidates:@"ReplyNoCandidatesHaveOtherTarget", v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"ReplyNoCandidatesHaveOtherTarget" alsoPerformingPurgeAll:1 removingDetermined:0];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_ReplyTargetNotAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:ReplyTargetNotAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  v9 = [(MADAutoAssetStager *)self _targetNameActiveClient:v14.opaque[0]];
  v10 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:@"ReplyTargetNotAvailable" forStagingTargetName:v9 replyingToCleared:0];

  if (v10)
  {
    [(MADAutoAssetStager *)self _replyToStagingClient:@"ReplyTargetNotAvailable" replyingToRequest:v10 withErrorCode:6603 withUnderlyingError:0 withDescription:@"no candidates found for the target (other targets have candidates)"];
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyTargetNotAvailable} nil download-request" withResult:6111 withError:0];
  }

  os_activity_scope_leave(&v14);
  return 0;
}

- (int64_t)action_RemoveAllReplyPurged:(id)purged error:(id *)error
{
  purgedCopy = purged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:RemoveAllReplyPurged", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"RemoveAllReplyPurged" alsoPerformingPurgeAll:1 removingDetermined:0, v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _replyToStagingClientOperationSuccess];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_RemoveAllReplyErased:(id)erased error:(id *)error
{
  erasedCopy = erased;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:RemoveAllReplyErased", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"RemoveAllReplyErased" alsoPerformingPurgeAll:1 removingDetermined:1, v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _replyToStagingClientOperationSuccess];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_RemoveAllReplyCanceled:(id)canceled error:(id *)error
{
  canceledCopy = canceled;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:RemoveAllReplyCanceled", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"RemoveAllReplyCanceled" alsoPerformingPurgeAll:1 removingDetermined:1, v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _replyToStagingClientOperationSuccess];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_CancelActiveJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:CancelActiveJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _cancelCurrentJob:v10.opaque[0]];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_EliminateDone:(id)done error:(id *)error
{
  doneCopy = done;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v11.opaque[0] = 0;
  v11.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:EliminateDone", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v11);

  assetSelector = [doneCopy assetSelector];
  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"EliminateDone" forAssetSelector:assetSelector];

  os_activity_scope_leave(&v11);
  return 0;
}

- (int64_t)action_SetEliminateDone:(id)done error:(id *)error
{
  doneCopy = done;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v11.opaque[0] = 0;
  v11.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:SetEliminateDone", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v11);

  setIdentifierConfiguration = [doneCopy setIdentifierConfiguration];
  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"SetEliminateDone" forSetConfiguration:setIdentifierConfiguration];

  os_activity_scope_leave(&v11);
  return 0;
}

- (int64_t)action_RememberEliminateDone:(id)done error:(id *)error
{
  doneCopy = done;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13.opaque[0] = 0;
  v13.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:RememberEliminateDone", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v13);

  assetSelector = [doneCopy assetSelector];
  eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
  persistedEntryID = [assetSelector persistedEntryID];
  [eliminationSelectorsAcknowledged setSafeObject:assetSelector forKey:persistedEntryID];

  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"RememberEliminateDone" forAssetSelector:assetSelector];
  os_activity_scope_leave(&v13);

  return 0;
}

- (int64_t)action_RememberSetEliminateDone:(id)done error:(id *)error
{
  doneCopy = done;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:RememberSetEliminateDone", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  setIdentifierConfiguration = [doneCopy setIdentifierConfiguration];
  v22 = 0u;
  v23 = 0u;
  v20 = 0u;
  v21 = 0u;
  autoAssetEntries = [setIdentifierConfiguration autoAssetEntries];
  v10 = [autoAssetEntries countByEnumeratingWithState:&v20 objects:v25 count:16];
  if (v10)
  {
    v11 = *v21;
    do
    {
      v12 = 0;
      do
      {
        if (*v21 != v11)
        {
          objc_enumerationMutation(autoAssetEntries);
        }

        v13 = *(*(&v20 + 1) + 8 * v12);
        eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
        assetSelector = [v13 assetSelector];
        assetSelector2 = [v13 assetSelector];
        persistedEntryID = [assetSelector2 persistedEntryID];
        [eliminationSelectorsAcknowledged setSafeObject:assetSelector forKey:persistedEntryID];

        v12 = v12 + 1;
      }

      while (v10 != v12);
      v10 = [autoAssetEntries countByEnumeratingWithState:&v20 objects:v25 count:16];
    }

    while (v10);
  }

  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"RememberSetEliminateDone" forSetConfiguration:setIdentifierConfiguration];
  os_activity_scope_leave(&state);

  return 0;
}

- (int64_t)action_EliminateDecideMatch:(id)match error:(id *)error
{
  matchCopy = match;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v17.opaque[0] = 0;
  v17.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:EliminateDecideMatch", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v17);

  assetSelector = [matchCopy assetSelector];
  LODWORD(extendedStateQueue) = [(MADAutoAssetStager *)self _doesSelectorMatchCurrentJob:assetSelector];
  eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
  persistedEntryID = [assetSelector persistedEntryID];
  [eliminationSelectors setSafeObject:assetSelector forKey:persistedEntryID];

  if (extendedStateQueue)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v13 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v15 = [(MADAutoAssetStagerParam *)v13 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"EliminateCurrentJob" withInfo:v15];
  }

  else
  {
    [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"EliminateDecideMatch" forAssetSelector:assetSelector];
  }

  os_activity_scope_leave(&v17);
  return 0;
}

- (int64_t)action_SetEliminateDecideMatch:(id)match error:(id *)error
{
  matchCopy = match;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:SetEliminateDecideMatch", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  setIdentifierConfiguration = [matchCopy setIdentifierConfiguration];
  v30 = 0u;
  v31 = 0u;
  v28 = 0u;
  v29 = 0u;
  autoAssetEntries = [setIdentifierConfiguration autoAssetEntries];
  v10 = [autoAssetEntries countByEnumeratingWithState:&v28 objects:v33 count:16];
  v26 = setIdentifierConfiguration;
  if (!v10)
  {

LABEL_14:
    v24 = v26;
    [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"SetEliminateDecideMatch" forSetConfiguration:v26, v26];
    goto LABEL_15;
  }

  LOBYTE(v11) = 0;
  v12 = *v29;
  do
  {
    for (i = 0; i != v10; i = i + 1)
    {
      if (*v29 != v12)
      {
        objc_enumerationMutation(autoAssetEntries);
      }

      v14 = *(*(&v28 + 1) + 8 * i);
      if (v11)
      {
        v11 = 1;
      }

      else
      {
        assetSelector = [*(*(&v28 + 1) + 8 * i) assetSelector];
        v11 = [(MADAutoAssetStager *)self _doesSelectorMatchCurrentJob:assetSelector];
      }

      eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
      assetSelector2 = [v14 assetSelector];
      assetSelector3 = [v14 assetSelector];
      persistedEntryID = [assetSelector3 persistedEntryID];
      [eliminationSelectors setSafeObject:assetSelector2 forKey:persistedEntryID];
    }

    v10 = [autoAssetEntries countByEnumeratingWithState:&v28 objects:v33 count:16];
  }

  while (v10);

  if (!v11)
  {
    goto LABEL_14;
  }

  [(MADAutoAssetStager *)self setEliminationSetConfigurationCurrentJob:v26];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v21 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v23 = [(MADAutoAssetStagerParam *)v21 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"EliminateCurrentJob" withInfo:v23];

  v24 = v26;
LABEL_15:

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_EliminateDeterminingDecideMatch:(id)match error:(id *)error
{
  matchCopy = match;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v17.opaque[0] = 0;
  v17.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:EliminateDeterminingDecideMatch", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v17);

  assetSelector = [matchCopy assetSelector];
  LODWORD(extendedStateQueue) = [(MADAutoAssetStager *)self _doesSelectorMatchCurrentJob:assetSelector];
  eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
  persistedEntryID = [assetSelector persistedEntryID];
  [eliminationSelectors setSafeObject:assetSelector forKey:persistedEntryID];

  if (extendedStateQueue)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v13 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v15 = [(MADAutoAssetStagerParam *)v13 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"EliminateCurrentJob" withInfo:v15];
  }

  else
  {
    [(MADAutoAssetStager *)self _removeEliminatedFromCandidatesAndAvaliable];
    [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"EliminateDeterminingDecideMatch" forAssetSelector:assetSelector];
  }

  os_activity_scope_leave(&v17);
  return 0;
}

- (int64_t)action_SetEliminateDeterminingDecideMatch:(id)match error:(id *)error
{
  matchCopy = match;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:SetEliminateDeterminingDecideMatch", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  setIdentifierConfiguration = [matchCopy setIdentifierConfiguration];
  v31 = 0u;
  v32 = 0u;
  v29 = 0u;
  v30 = 0u;
  autoAssetEntries = [setIdentifierConfiguration autoAssetEntries];
  v10 = [autoAssetEntries countByEnumeratingWithState:&v29 objects:v34 count:16];
  v26 = setIdentifierConfiguration;
  if (!v10)
  {

LABEL_14:
    [(MADAutoAssetStager *)self _removeEliminatedFromCandidatesAndAvaliable];
    v24 = v27;
    [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"SetEliminateDecideMatch" forSetConfiguration:v27];
    goto LABEL_15;
  }

  LOBYTE(v11) = 0;
  v12 = *v30;
  do
  {
    for (i = 0; i != v10; i = i + 1)
    {
      if (*v30 != v12)
      {
        objc_enumerationMutation(autoAssetEntries);
      }

      v14 = *(*(&v29 + 1) + 8 * i);
      if (v11)
      {
        v11 = 1;
      }

      else
      {
        assetSelector = [*(*(&v29 + 1) + 8 * i) assetSelector];
        v11 = [(MADAutoAssetStager *)self _doesSelectorMatchCurrentJob:assetSelector];
      }

      eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
      assetSelector2 = [v14 assetSelector];
      assetSelector3 = [v14 assetSelector];
      persistedEntryID = [assetSelector3 persistedEntryID];
      [eliminationSelectors setSafeObject:assetSelector2 forKey:persistedEntryID];
    }

    v10 = [autoAssetEntries countByEnumeratingWithState:&v29 objects:v34 count:16];
  }

  while (v10);

  if (!v11)
  {
    goto LABEL_14;
  }

  [(MADAutoAssetStager *)self setEliminationSetConfigurationCurrentJob:v26];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v21 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v23 = [(MADAutoAssetStagerParam *)v21 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"EliminateCurrentJob" withInfo:v23];

  v24 = v26;
LABEL_15:

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_EliminateAvailableDecideEmpty:(id)empty error:(id *)error
{
  emptyCopy = empty;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v19.opaque[0] = 0;
  v19.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:EliminateAvailableDecideEmpty", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v19);

  assetSelector = [emptyCopy assetSelector];
  eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
  persistedEntryID = [assetSelector persistedEntryID];
  [eliminationSelectorsAcknowledged setSafeObject:assetSelector forKey:persistedEntryID];

  [(MADAutoAssetStager *)self _removeEliminatedFromCandidatesAndAvaliable];
  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"EliminateAvailableDecideEmpty" forAssetSelector:assetSelector];
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v13 = [availableForStaging count];

  if (!v13)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v15 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v17 = [(MADAutoAssetStagerParam *)v15 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"EliminateNowEmpty" withInfo:v17];

    [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"EliminateAvailableDecideEmpty" alsoPerformingPurgeAll:1 removingDetermined:0];
  }

  os_activity_scope_leave(&v19);
  return 0;
}

- (int64_t)action_SetEliminateAvailableDecideEmpty:(id)empty error:(id *)error
{
  emptyCopy = empty;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:SetEliminateAvailableDecideEmpty", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  setIdentifierConfiguration = [emptyCopy setIdentifierConfiguration];
  v28 = 0u;
  v29 = 0u;
  v26 = 0u;
  v27 = 0u;
  autoAssetEntries = [setIdentifierConfiguration autoAssetEntries];
  v10 = [autoAssetEntries countByEnumeratingWithState:&v26 objects:v31 count:16];
  if (v10)
  {
    v11 = *v27;
    do
    {
      v12 = 0;
      do
      {
        if (*v27 != v11)
        {
          objc_enumerationMutation(autoAssetEntries);
        }

        v13 = *(*(&v26 + 1) + 8 * v12);
        eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
        assetSelector = [v13 assetSelector];
        assetSelector2 = [v13 assetSelector];
        persistedEntryID = [assetSelector2 persistedEntryID];
        [eliminationSelectorsAcknowledged setSafeObject:assetSelector forKey:persistedEntryID];

        v12 = v12 + 1;
      }

      while (v10 != v12);
      v10 = [autoAssetEntries countByEnumeratingWithState:&v26 objects:v31 count:16];
    }

    while (v10);
  }

  [(MADAutoAssetStager *)self _removeEliminatedFromCandidatesAndAvaliable];
  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"SetEliminateAvailableDecideEmpty" forSetConfiguration:setIdentifierConfiguration];
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v19 = [availableForStaging count] == 0;

  if (v19)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v21 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v23 = [(MADAutoAssetStagerParam *)v21 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"EliminateNowEmpty" withInfo:v23];

    [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"SetEliminateAvailableDecideEmpty" alsoPerformingPurgeAll:1 removingDetermined:0];
  }

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_EliminateDoneDecideMoreDownload:(id)download error:(id *)error
{
  downloadCopy = download;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v27.opaque[0] = 0;
  v27.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:EliminateDoneDecideMoreDownload", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v27);

  v9 = [(MADAutoAssetStager *)self persistedState:v27.opaque[0]];
  persistedConfig = [v9 persistedConfig];
  [persistedConfig persistULL:0 forKey:@"activelyStagingAssetCount" shouldPersist:0];

  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v12 = [awaitingStagingAttempt count];

  if (v12)
  {
    awaitingStagingAttempt2 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    [awaitingStagingAttempt2 removeObjectAtIndex:0];

    persistedState = [(MADAutoAssetStager *)self persistedState];
    persistedConfig2 = [persistedState persistedConfig];
    awaitingStagingAttempt3 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    [persistedConfig2 persistULL:objc_msgSend(awaitingStagingAttempt3 forKey:"count") shouldPersist:{@"awaitingStagingAssetCount", 0}];
  }

  persistedState2 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig3 = [persistedState2 persistedConfig];
  [persistedConfig3 persistState];

  [(MADAutoAssetStager *)self _logPersistedConfigSet:@"EliminateDoneDecideMoreDownload" message:@"no more stager elimination operation pending"];
  [(MADAutoAssetStager *)self _removeEliminatedFromStaged];
  [(MADAutoAssetStager *)self _acknowledgeEliminatedForCurrentJob];
  awaitingStagingAttempt4 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v20 = [awaitingStagingAttempt4 count];

  if (v20)
  {
    v21 = @"DownloadMoreAvailable";
  }

  else
  {
    v21 = @"DownloadDoneAvailable";
  }

  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v23 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v25 = [(MADAutoAssetStagerParam *)v23 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:v21 withInfo:v25];

  os_activity_scope_leave(&v27);
  return 0;
}

- (int64_t)action_EliminateDoneStagedDecideEmpty:(id)empty error:(id *)error
{
  emptyCopy = empty;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v19.opaque[0] = 0;
  v19.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:EliminateDoneStagedDecideEmpty", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v19);

  assetSelector = [emptyCopy assetSelector];
  eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
  persistedEntryID = [assetSelector persistedEntryID];
  [eliminationSelectorsAcknowledged setSafeObject:assetSelector forKey:persistedEntryID];

  [(MADAutoAssetStager *)self _removeEliminatedFromStaged];
  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"EliminateDoneStagedDecideEmpty" forAssetSelector:assetSelector];
  successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
  v13 = [successfullyStaged count];

  if (!v13)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v15 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v17 = [(MADAutoAssetStagerParam *)v15 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"EliminateNowEmpty" withInfo:v17];

    [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"EliminateDoneStagedDecideEmpty" alsoPerformingPurgeAll:1 removingDetermined:0];
  }

  os_activity_scope_leave(&v19);
  return 0;
}

- (int64_t)action_SetEliminateDoneStagedDecideEmpty:(id)empty error:(id *)error
{
  emptyCopy = empty;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  state.opaque[0] = 0;
  state.opaque[1] = 0;
  v7 = _os_activity_create(&dword_0, "MADStager:SetEliminateDoneStagedDecideEmpty", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v7, &state);

  setIdentifierConfiguration = [emptyCopy setIdentifierConfiguration];
  v28 = 0u;
  v29 = 0u;
  v26 = 0u;
  v27 = 0u;
  autoAssetEntries = [setIdentifierConfiguration autoAssetEntries];
  v10 = [autoAssetEntries countByEnumeratingWithState:&v26 objects:v31 count:16];
  if (v10)
  {
    v11 = *v27;
    do
    {
      v12 = 0;
      do
      {
        if (*v27 != v11)
        {
          objc_enumerationMutation(autoAssetEntries);
        }

        v13 = *(*(&v26 + 1) + 8 * v12);
        eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
        assetSelector = [v13 assetSelector];
        assetSelector2 = [v13 assetSelector];
        persistedEntryID = [assetSelector2 persistedEntryID];
        [eliminationSelectorsAcknowledged setSafeObject:assetSelector forKey:persistedEntryID];

        v12 = v12 + 1;
      }

      while (v10 != v12);
      v10 = [autoAssetEntries countByEnumeratingWithState:&v26 objects:v31 count:16];
    }

    while (v10);
  }

  [(MADAutoAssetStager *)self _removeEliminatedFromStaged];
  [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"SetEliminateDoneStagedDecideEmpty" forSetConfiguration:setIdentifierConfiguration];
  successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
  v19 = [successfullyStaged count] == 0;

  if (v19)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    v21 = [MADAutoAssetStagerParam alloc];
    _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
    v23 = [(MADAutoAssetStagerParam *)v21 initWithSafeSummary:_updateLatestSummary];
    [autoStagerFSM2 followupEvent:@"EliminateNowEmpty" withInfo:v23];

    [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:@"SetEliminateDoneStagedDecideEmpty" alsoPerformingPurgeAll:1 removingDetermined:0];
  }

  os_activity_scope_leave(&state);
  return 0;
}

- (int64_t)action_EliminateCancelActiveJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:EliminateCancelActiveJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _cancelCurrentJob:v10.opaque[0]];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_AlteredInvalAllAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AlteredInvalAllAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _persistAllTargetLookupResultsOTASituation:300 fromLocation:@"AlteredInvalAllAvailable", v10.opaque[0], v10.opaque[1]];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_SetTargetInvalAllAvailable:(id)available error:(id *)error
{
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:SetTargetInvalAllAvailable", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _persistAllTargetLookupResultsOTASituation:301 fromLocation:@"SetTargetInvalAllAvailable", v10.opaque[0], v10.opaque[1]];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_AlteredInvalAllAvailableCancelActiveJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AlteredInvalAllAvailableCancelActiveJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _persistAllTargetLookupResultsOTASituation:300 fromLocation:@"AlteredInvalAllAvailableCancelActiveJob", v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _cancelCurrentJob];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_SetTargetInvalAllAvailableCancelActiveJob:(id)job error:(id *)error
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10.opaque[0] = 0;
  v10.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:SetTargetInvalAllAvailableCancelActiveJob", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v10);

  [(MADAutoAssetStager *)self _persistAllTargetLookupResultsOTASituation:301 fromLocation:@"SetTargetInvalAllAvailableCancelActiveJob", v10.opaque[0], v10.opaque[1]];
  [(MADAutoAssetStager *)self _cancelCurrentJob];
  os_activity_scope_leave(&v10);

  return 0;
}

- (int64_t)action_AlteredDecideSameSetConfiguration:(id)configuration error:(id *)error
{
  configurationCopy = configuration;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:AlteredDecideSameSetConfiguration", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  [(MADAutoAssetStager *)self _persistAllTargetLookupResultsOTASituation:300 fromLocation:@"AlteredDecideSameSetConfiguration", v14.opaque[0], v14.opaque[1]];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v10 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v12 = [(MADAutoAssetStagerParam *)v10 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"ClientAlteredForgetDetermine" withInfo:v12];

  os_activity_scope_leave(&v14);
  return 0;
}

- (int64_t)action_SetTargetDecideSameTarget:(id)target error:(id *)error
{
  targetCopy = target;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14.opaque[0] = 0;
  v14.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:SetTargetDecideSameTarget", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v14);

  [(MADAutoAssetStager *)self _persistAllTargetLookupResultsOTASituation:301 fromLocation:@"SetTargetDecideSameTarget", v14.opaque[0], v14.opaque[1]];
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  v10 = [MADAutoAssetStagerParam alloc];
  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
  v12 = [(MADAutoAssetStagerParam *)v10 initWithSafeSummary:_updateLatestSummary];
  [autoStagerFSM2 followupEvent:@"ClientSetTargetsForgetDetermine" withInfo:v12];

  os_activity_scope_leave(&v14);
  return 0;
}

- (int64_t)action_UpdateStagedSituation:(id)situation error:(id *)error
{
  situationCopy = situation;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v21.opaque[0] = 0;
  v21.opaque[1] = 0;
  v8 = _os_activity_create(&dword_0, "MADStager:UpdateStagedSituation", &_os_activity_current, OS_ACTIVITY_FLAG_DEFAULT);
  os_activity_scope_enter(v8, &v21);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups:v21.opaque[0]])
  {
    successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
    v10 = [successfullyStaged count];

    if (v10 < 1)
    {
      [(MADAutoAssetStager *)self _persistTargetOTASituation:402 fromLocation:@"UpdateStagedSituation"];
    }

    else
    {
      assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
      assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
      v13 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

      availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
      v15 = [availableForStagingRequiredByTarget safeObjectForKey:v13 ofClass:objc_opt_class()];

      availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
      v17 = [availableForStagingOptionalByTarget safeObjectForKey:v13 ofClass:objc_opt_class()];

      v18 = [v15 count];
      if (v10 < &v18[[v17 count]])
      {
        v19 = 500;
      }

      else
      {
        v19 = 501;
      }

      [(MADAutoAssetStager *)self _persistTargetOTASituation:v19 fromLocation:@"UpdateStagedSituation"];
    }
  }

  os_activity_scope_leave(&v21);

  return 0;
}

- (int64_t)actionUnknownAction:(id)action error:(id *)error
{
  actionCopy = action;
  actionCopy = [[NSString alloc] initWithFormat:@"unknown action(%@)", actionCopy];

  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  diag = [autoStagerFSM diag];
  [diag dumpTracked:actionCopy dumpingTo:5 usingFilename:0 clearingStatistics:0 clearingHistory:0];

  return 0;
}

- (void)_acceptStagingClientRequest:(id)request fromLocation:(id)location adoptingSpecifiedTarget:(BOOL)target
{
  targetCopy = target;
  requestCopy = request;
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  locationCopy = [[NSString alloc] initWithFormat:@"%@:_acceptStagingClientRequest", locationCopy];
  clientRequestMessage = [requestCopy clientRequestMessage];
  messageName = [clientRequestMessage messageName];

  clientRequestMessage2 = [requestCopy clientRequestMessage];
  message = [clientRequestMessage2 message];

  v16 = [message safeObjectForKey:@"instance" ofClass:objc_opt_class()];
  v17 = [message safeObjectForKey:@"staging" ofClass:objc_opt_class()];
  v18 = [SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE"];
  v19 = [SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:DOWNLOAD_GROUPS"];
  v89 = v16;
  if (!v16)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v35 = [NSString alloc];
    summary = [requestCopy summary];
    v37 = [v35 initWithFormat:@"{%@} staging-client-request received with no instance | stagingClientRequest:%@", locationCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v37 withResult:6111 withError:0];

    v38 = [NSString alloc];
    summary2 = [requestCopy summary];
    v39 = [v38 initWithFormat:@"staging-client-request [DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE] without staging update-attributes | stagingClientRequest:%@", summary2];
    [(MADAutoAssetStager *)self _replyToStagingClient:locationCopy replyingToRequest:requestCopy withErrorCode:6102 withUnderlyingError:0 withDescription:v39];

    v20 = v17;
LABEL_23:
    v41 = v89;
    goto LABEL_24;
  }

  if (!v18)
  {
    v21 = v19;
    v20 = v17;
    if ([SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:DETERMINE_ALL_AVAILABLE_FOR_UPDATE"])
    {
      if (!v17)
      {
        autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag2 = [autoStagerFSM3 diag];
        v58 = [NSString alloc];
        summary3 = [requestCopy summary];
        v60 = [v58 initWithFormat:@"{%@} staging-client-request [DETERMINE_ALL_AVAILABLE_FOR_UPDATE] without staging information | stagingClientRequest:%@", locationCopy, summary3];
        [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v60 withResult:6102 withError:0];

        v20 = 0;
        v61 = [NSString alloc];
        summary2 = [requestCopy summary];
        v55 = [v61 initWithFormat:@"staging-client-request [DETERMINE_ALL_AVAILABLE_FOR_UPDATE] without staging update-attributes | stagingClientRequest:%@", summary2];
        goto LABEL_22;
      }

      allAvailableForStagingAttributes = [v17 allAvailableForStagingAttributes];
      if (allAvailableForStagingAttributes)
      {
      }

      else
      {
        updateAttributes = [v17 updateAttributes];

        if (!updateAttributes)
        {
          autoStagerFSM4 = [(MADAutoAssetStager *)self autoStagerFSM];
          diag3 = [autoStagerFSM4 diag];
          v85 = [NSString alloc];
          summary4 = [requestCopy summary];
          v87 = [v85 initWithFormat:@"{%@} staging-client-request [DETERMINE_ALL_AVAILABLE_FOR_UPDATE] without staging update-attributes | stagingClientRequest:%@", locationCopy, summary4];
          [diag3 trackAnomaly:@"AUTO-STAGER" forReason:v87 withResult:6102 withError:0];

          v20 = v17;
          v88 = [NSString alloc];
          summary2 = [requestCopy summary];
          v55 = [v88 initWithFormat:@"staging-client-request [DETERMINE_ALL_AVAILABLE_FOR_UPDATE] without allAvailableForStagingAttributes | stagingClientRequest:%@", summary2];
          goto LABEL_22;
        }
      }

      allAvailableForStagingAttributes2 = [v17 allAvailableForStagingAttributes];
      if (!allAvailableForStagingAttributes2)
      {
        allAvailableForStagingAttributes2 = [v17 updateAttributes];
      }

      if (allAvailableForStagingAttributes2 && targetCopy)
      {
        v68 = [allAvailableForStagingAttributes2 safeObjectForKey:@"OSVersion" ofClass:objc_opt_class()];
        [(MADAutoAssetStager *)self setAssetTargetOSVersion:v68];

        v69 = [allAvailableForStagingAttributes2 safeObjectForKey:@"Build" ofClass:objc_opt_class()];
        [(MADAutoAssetStager *)self setAssetTargetBuildVersion:v69];

        v70 = [allAvailableForStagingAttributes2 safeObjectForKey:@"TrainName" ofClass:objc_opt_class()];
        [(MADAutoAssetStager *)self setAssetTargetTrainName:v70];

        v20 = v17;
        v71 = [allAvailableForStagingAttributes2 safeObjectForKey:@"RestoreVersion" ofClass:objc_opt_class()];
        [(MADAutoAssetStager *)self setAssetTargetRestoreVersion:v71];

        v72 = [allAvailableForStagingAttributes2 safeObjectForKey:@"OptionalAssetSizeAllowed" ofClass:objc_opt_class()];
        v73 = v72;
        if (v72)
        {
          v74 = v72;
        }

        else
        {
          v74 = &off_4F7790;
        }

        [(MADAutoAssetStager *)self setOptionalAssetSizeAllowed:v74];

        [(MADAutoAssetStager *)self _persistLastStagingFrom:locationCopy];
      }
    }

    else if ([SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:DETERMINE_ALL_AVAILABLE"])
    {
      if (targetCopy)
      {
        v41 = v89;
        clientAssetSelector = [v89 clientAssetSelector];
        assetSpecifier = [clientAssetSelector assetSpecifier];
        [(MADAutoAssetStager *)self setAssetTargetOSVersion:assetSpecifier];

        clientAssetSelector2 = [v89 clientAssetSelector];
        assetVersion = [clientAssetSelector2 assetVersion];
        [(MADAutoAssetStager *)self setAssetTargetBuildVersion:assetVersion];

        [(MADAutoAssetStager *)self setAssetTargetTrainName:0];
        [(MADAutoAssetStager *)self setAssetTargetRestoreVersion:0];
        [(MADAutoAssetStager *)self setOptionalAssetSizeAllowed:&off_4F7790];
        [(MADAutoAssetStager *)self _persistLastStagingFrom:locationCopy];
        summary2 = 0;
        goto LABEL_43;
      }
    }

    else
    {
      if (v21)
      {
        summary2 = [v17 updateAttributes];
        v24 = [(MADAutoAssetStager *)self adoptTargetFromUpdateAttributes:locationCopy fromUpdateAttributes:summary2 forGroupDetermine:0];
        if (!v24)
        {
          autoStagerFSM5 = [(MADAutoAssetStager *)self autoStagerFSM];
          diag4 = [autoStagerFSM5 diag];
          v78 = [NSString alloc];
          summary5 = [requestCopy summary];
          v80 = [v78 initWithFormat:@"{%@} staging-client-request [DOWNLOAD_GROUPS] unable to form target-name | stagingClientRequest:%@", locationCopy, summary5];
          [diag4 trackAnomaly:@"AUTO-STAGER" forReason:v80 withResult:6101 withError:0];

          v20 = v17;
          v81 = [NSString alloc];
          summary6 = [requestCopy summary];
          v32 = [v81 initWithFormat:@"staging-client-request [DOWNLOAD_GROUPS] unable to form target-name  | stagingClientRequest:%@", summary6];
          goto LABEL_49;
        }

        goto LABEL_18;
      }

      if (([SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:DOWNLOAD_ALL"]& 1) == 0 && ([SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:PURGE_ALL"]& 1) == 0 && ([SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:ERASE_ALL"]& 1) == 0)
      {
        autoStagerFSM6 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag5 = [autoStagerFSM6 diag];
        v65 = [[NSString alloc] initWithFormat:@"{%@} staging-client-request received of unknown messageName:%@", locationCopy, messageName];
        [diag5 trackAnomaly:@"AUTO-STAGER" forReason:v65 withResult:6106 withError:0];

        v20 = v17;
        summary2 = [[NSString alloc] initWithFormat:@"staging-client-request of unknown messageName:%@", messageName];
        [(MADAutoAssetStager *)self _replyToStagingClient:locationCopy replyingToRequest:requestCopy withErrorCode:6106 withUnderlyingError:0 withDescription:summary2];
        goto LABEL_23;
      }
    }

    summary2 = 0;
    goto LABEL_42;
  }

  if (!v17)
  {
    autoStagerFSM7 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag6 = [autoStagerFSM7 diag];
    v48 = [NSString alloc];
    summary7 = [requestCopy summary];
    v50 = [v48 initWithFormat:@"{%@} staging-client-request [DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE] without staging information | stagingClientRequest:%@", locationCopy, summary7];
LABEL_20:
    v53 = v50;
    [diag6 trackAnomaly:@"AUTO-STAGER" forReason:v50 withResult:6102 withError:0];

    v20 = v17;
    v54 = [NSString alloc];
    summary2 = [requestCopy summary];
    v55 = [v54 initWithFormat:@"staging-client-request [DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE] without staging update-attributes | stagingClientRequest:%@", summary2];
LABEL_22:
    v62 = v55;
    [(MADAutoAssetStager *)self _replyToStagingClient:locationCopy replyingToRequest:requestCopy withErrorCode:6102 withUnderlyingError:0 withDescription:v55];

    goto LABEL_23;
  }

  v20 = v17;
  v21 = v19;
  updateAttributes2 = [v17 updateAttributes];

  if (!updateAttributes2)
  {
    autoStagerFSM7 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag6 = [autoStagerFSM7 diag];
    v52 = [NSString alloc];
    summary7 = [requestCopy summary];
    v50 = [v52 initWithFormat:@"{%@} staging-client-request [DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE] without staging update-attributes | stagingClientRequest:%@", locationCopy, summary7];
    goto LABEL_20;
  }

  summary2 = [v17 updateAttributes];
  v24 = [(MADAutoAssetStager *)self adoptTargetFromUpdateAttributes:locationCopy fromUpdateAttributes:summary2 forGroupDetermine:1];
  if (!v24)
  {
    autoStagerFSM8 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag7 = [autoStagerFSM8 diag];
    v27 = [NSString alloc];
    summary8 = [requestCopy summary];
    v29 = [v27 initWithFormat:@"{%@} staging-client-request [DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE] unable to form target-name | stagingClientRequest:%@", locationCopy, summary8];
    [diag7 trackAnomaly:@"AUTO-STAGER" forReason:v29 withResult:6101 withError:0];

    v20 = v17;
    v30 = [NSString alloc];
    summary6 = [requestCopy summary];
    v32 = [v30 initWithFormat:@"staging-client-request [DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE] unable to form target-name  | stagingClientRequest:%@", summary6];
LABEL_49:
    v82 = v32;
    [(MADAutoAssetStager *)self _replyToStagingClient:locationCopy replyingToRequest:requestCopy withErrorCode:6101 withUnderlyingError:0 withDescription:v32];

    goto LABEL_23;
  }

LABEL_18:
  v51 = v24;

  summary2 = v51;
LABEL_42:
  v41 = v89;
LABEL_43:
  clientProcessName = [v41 clientProcessName];
  [(MADAutoAssetStager *)self setStagingClientName:clientProcessName];

  if (v18)
  {
    [(MADAutoAssetStager *)self _stagingClientRequestDetermineTrack:locationCopy trackingRequest:requestCopy forStagingTargetName:summary2];
  }

  else if (v21)
  {
    [(MADAutoAssetStager *)self _stagingClientRequestDownloadTrack:locationCopy trackingRequest:requestCopy forStagingTargetName:summary2];
  }

  else
  {
    [(MADAutoAssetStager *)self _stagingClientRequestGeneralTrack:locationCopy trackingRequest:requestCopy];
  }

LABEL_24:
}

- (BOOL)_isStagingClientRequestForActiveTarget:(id)target fromLocation:(id)location
{
  targetCopy = target;
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  locationCopy = [[NSString alloc] initWithFormat:@"%@:_isStagingClientRequestForActiveTarget", locationCopy];
  v11 = [(MADAutoAssetStager *)self _updateAttributesFromStagingRequest:targetCopy fromLocation:locationCopy];

  if (!v11)
  {
    v12 = 0;
    v21 = 0;
    v22 = 0;
    v13 = 0;
    LOBYTE(v15) = 0;
    goto LABEL_27;
  }

  v12 = [v11 safeObjectForKey:@"OSVersion" ofClass:objc_opt_class()];
  v41 = [v11 safeObjectForKey:@"Build" ofClass:objc_opt_class()];
  v40 = [v11 safeObjectForKey:@"TrainName" ofClass:objc_opt_class()];
  v13 = [v11 safeObjectForKey:@"RestoreVersion" ofClass:objc_opt_class()];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v15 = [SUCore stringIsEqual:v13 to:assetTargetRestoreVersion];

  if (!v15)
  {
    goto LABEL_7;
  }

  v39 = locationCopy;
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  if (![SUCore stringIsEqual:v12 to:assetTargetOSVersion])
  {
    goto LABEL_10;
  }

  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  if (([SUCore stringIsEqual:v41 to:assetTargetBuildVersion]& 1) == 0)
  {

LABEL_10:
    goto LABEL_11;
  }

  [(MADAutoAssetStager *)self assetTargetTrainName];
  v19 = v18 = v12;
  v20 = [SUCore stringIsEqual:v40 to:v19];

  v12 = v18;
  if (v20)
  {
    LOBYTE(v15) = 1;
    locationCopy = v39;
LABEL_7:
    v21 = v41;
    v22 = v40;
    goto LABEL_27;
  }

LABEL_11:
  autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
  diag = [autoStagerFSM2 diag];
  v35 = [NSString alloc];
  assetTargetOSVersion2 = [(MADAutoAssetStager *)self assetTargetOSVersion];
  v37 = v12;
  if (assetTargetOSVersion2)
  {
    assetTargetOSVersion3 = [(MADAutoAssetStager *)self assetTargetOSVersion];
  }

  else
  {
    assetTargetOSVersion3 = @"N";
  }

  assetTargetBuildVersion2 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  if (assetTargetBuildVersion2)
  {
    assetTargetBuildVersion3 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  }

  else
  {
    assetTargetBuildVersion3 = @"N";
  }

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  if (assetTargetTrainName)
  {
    assetTargetTrainName2 = [(MADAutoAssetStager *)self assetTargetTrainName];
  }

  else
  {
    assetTargetTrainName2 = @"N";
  }

  summary = [targetCopy summary];
  v34 = assetTargetBuildVersion3;
  v33 = assetTargetBuildVersion3;
  v30 = assetTargetOSVersion3;
  v31 = [v35 initWithFormat:@"{%@} staging-client-request considered matching active-target yet some mismatches [BY-GROUP-MODE] | assetTarget(OSVersion:%@ | BuildVersion:%@ | TrainName:%@) | request:%@", v39, assetTargetOSVersion3, v33, assetTargetTrainName2, summary];
  [diag trackAnomaly:@"AUTO-STAGER" forReason:v31 withResult:6111 withError:0];

  if (assetTargetTrainName)
  {
  }

  v21 = v41;
  if (assetTargetBuildVersion2)
  {
  }

  v22 = v40;
  if (assetTargetOSVersion2)
  {
  }

  LOBYTE(v15) = 1;
  locationCopy = v39;
  v12 = v37;
LABEL_27:

  return v15;
}

- (id)_updateAttributesFromStagingRequest:(id)request fromLocation:(id)location
{
  requestCopy = request;
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  locationCopy = [[NSString alloc] initWithFormat:@"%@:_updateAttributesFromStagingRequest", locationCopy];
  clientRequestMessage = [requestCopy clientRequestMessage];
  messageName = [clientRequestMessage messageName];

  clientRequestMessage2 = [requestCopy clientRequestMessage];
  message = [clientRequestMessage2 message];

  v15 = [message safeObjectForKey:@"instance" ofClass:objc_opt_class()];
  v16 = [message safeObjectForKey:@"staging" ofClass:objc_opt_class()];
  if (v15)
  {
    if ([SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:DETERMINE_GROUPS_AVAILABLE_FOR_UPDATE"])
    {
      if (v16)
      {
        allAvailableForStagingAttributes = [v16 allAvailableForStagingAttributes];
        if (allAvailableForStagingAttributes)
        {

          goto LABEL_15;
        }

        updateAttributes = [v16 updateAttributes];

        if (updateAttributes)
        {
LABEL_15:
          allAvailableForStagingAttributes2 = [v16 allAvailableForStagingAttributes];
          if (allAvailableForStagingAttributes2)
          {
            goto LABEL_21;
          }

          goto LABEL_16;
        }

        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        v35 = [NSString alloc];
        summary = [requestCopy summary];
        v25 = [v35 initWithFormat:@"{%@} staging-client determine-groups-request [BY-GROUP-MODE] without staging update-attributes | stagingClientRequest:%@", locationCopy, summary];
      }

      else
      {
        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        v31 = [NSString alloc];
        summary = [requestCopy summary];
        v25 = [v31 initWithFormat:@"{%@} staging-client determine-groups-request [BY-GROUP-MODE] without staging information | stagingClientRequest:%@", locationCopy, summary];
      }

      goto LABEL_19;
    }

    if ([SUCore stringIsEqual:messageName to:@"MA-AUTO-STAGE:DOWNLOAD_GROUPS"])
    {
      if (v16)
      {
        updateAttributes2 = [v16 updateAttributes];

        if (updateAttributes2)
        {
LABEL_16:
          allAvailableForStagingAttributes2 = [v16 updateAttributes];
          goto LABEL_21;
        }

        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        v24 = [NSString alloc];
        summary = [requestCopy summary];
        v25 = [v24 initWithFormat:@"{%@} [STAGING-CLIENT-REQUEST(GENERAL)] [BY-GROUP-MODE] without staging update-attributes | stagingClientRequest:%@", locationCopy, summary];
      }

      else
      {
        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        v34 = [NSString alloc];
        summary = [requestCopy summary];
        v25 = [v34 initWithFormat:@"{%@} staging-client download-groups-request [BY-GROUP-MODE] without staging information | stagingClientRequest:%@", locationCopy, summary];
      }

LABEL_19:
      v27 = v25;
      v28 = diag;
      v29 = v27;
      v30 = 6102;
      goto LABEL_20;
    }

    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v26 = [NSString alloc];
    summary = [requestCopy summary];
    v22 = [v26 initWithFormat:@"{%@} staging-client-request received of type not expected [BY-GROUP-MODE] | stagingClientRequest:%@", locationCopy, summary];
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v20 = [NSString alloc];
    summary = [requestCopy summary];
    v22 = [v20 initWithFormat:@"{%@} staging-client-request received with no instance | stagingClientRequest:%@", locationCopy, summary];
  }

  v27 = v22;
  v28 = diag;
  v29 = v27;
  v30 = 6111;
LABEL_20:
  [v28 trackAnomaly:@"AUTO-STAGER" forReason:v29 withResult:v30 withError:0];

  allAvailableForStagingAttributes2 = 0;
LABEL_21:

  return allAvailableForStagingAttributes2;
}

- (id)_stagingClientMessageDesire:(id)desire forClientRequest:(id)request
{
  desireCopy = desire;
  requestCopy = request;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (requestCopy && ([requestCopy clientRequestMessage], (v10 = objc_claimAutoreleasedReturnValue()) != 0) && (v11 = v10, objc_msgSend(requestCopy, "clientRequestMessage"), v12 = objc_claimAutoreleasedReturnValue(), objc_msgSend(v12, "message"), v13 = objc_claimAutoreleasedReturnValue(), v13, v12, v11, v13))
  {
    clientRequestMessage = [requestCopy clientRequestMessage];
    message = [clientRequestMessage message];

    v16 = [message safeObjectForKey:@"desire" ofClass:objc_opt_class()];
  }

  else
  {
    message = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [message diag];
    v18 = [NSString alloc];
    summary = [requestCopy summary];
    v20 = [v18 initWithFormat:@"{%@:_stagingClientMessageDesire} incomplete staging-client-request:%@", desireCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v20 withResult:6103 withError:0];

    v16 = 0;
  }

  return v16;
}

- (id)_stagingClientMessageStagingClientProcessName:(id)name
{
  clientRequestMessage = [name clientRequestMessage];
  message = [clientRequestMessage message];

  v5 = [message safeObjectForKey:@"instance" ofClass:objc_opt_class()];
  v6 = v5;
  if (v5)
  {
    clientProcessName = [v5 clientProcessName];
  }

  else
  {
    clientProcessName = 0;
  }

  return clientProcessName;
}

- (id)newStagingInfoWithGroupsAvailableForStaging:(id)staging indicatingHaveAvailable:(BOOL)available usingTargetLookupKey:(id)key
{
  availableCopy = available;
  stagingCopy = staging;
  keyCopy = key;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v12 = [MAAutoAssetInfoStaging alloc];
  LOBYTE(extendedStateQueue) = objc_opt_respondsToSelector();

  if (extendedStateQueue)
  {
    v13 = keyCopy;
    v14 = objc_alloc_init(NSMutableDictionary);
    v47 = objc_alloc_init(NSMutableDictionary);
    if (v13)
    {
      if (!availableCopy)
      {
        goto LABEL_31;
      }
    }

    else
    {
      assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
      assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
      v13 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

      if (!availableCopy)
      {
LABEL_31:
        v41 = [MAAutoAssetInfoStaging alloc];
        activeTargetUpdateAttributes = [(MADAutoAssetStager *)self activeTargetUpdateAttributes];
        v21 = [v41 initWithUpdateAttributes:activeTargetUpdateAttributes withByGroupAvailableForStaging:v14 withByGroupTotalExpectedBytes:v47];

        goto LABEL_32;
      }
    }

    v44 = keyCopy;
    v53 = 0u;
    v54 = 0u;
    v51 = 0u;
    v52 = 0u;
    obj = [(MADAutoAssetStager *)self assetTargetGroupNames];
    v49 = [obj countByEnumeratingWithState:&v51 objects:v55 count:16];
    if (v49)
    {
      v48 = *v52;
      v45 = v13;
      do
      {
        v24 = 0;
        do
        {
          if (*v52 != v48)
          {
            objc_enumerationMutation(obj);
          }

          if ([SUCore stringIsEqual:*(*(&v51 + 1) + 8 * v24) to:@"STAGE_GROUP_REQUIRED"])
          {
            availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
            v26 = @"STAGE_GROUP_REQUIRED";
          }

          else
          {
            availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
            v26 = @"STAGE_GROUP_OPTIONAL";
          }

          v27 = [availableForStagingRequiredByTarget safeObjectForKey:v13 ofClass:objc_opt_class()];

          v50 = 0;
          if ([v27 count])
          {
            v28 = [(MADAutoAssetStager *)self _newStagingInfoAvailable:stagingCopy fromAvailableForStaging:v27 providingTotalExpectedBytes:&v50];
            if ([v28 count])
            {
              v29 = v50 == 0;
            }

            else
            {
              v29 = 1;
            }

            if (v29)
            {
              autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
              diag = [autoStagerFSM2 diag];
              v31 = v14;
              v32 = stagingCopy;
              v33 = [NSString alloc];
              stagingClientUsingGroups = [(MADAutoAssetStager *)self stagingClientUsingGroups];
              v35 = @"N";
              if (stagingClientUsingGroups)
              {
                v35 = @"Y";
              }

              v36 = [v33 initWithFormat:@"{%@:newStagingInfoWithGroupsAvailableForStaging} reverted to ALL-MODE staging information | groupName:%@ | stagingClientUsingGroups:%@ | ableToReportByGroup:%@", v32, v26, v35, @"Y"];
              [diag trackAnomaly:@"AUTO-STAGER" forReason:v36 withResult:6111 withError:0];

              stagingCopy = v32;
              v14 = v31;
              v13 = v45;
            }

            else
            {
              v39 = [NSNumber alloc];
              autoStagerFSM2 = [v39 initWithLongLong:v50];
              [v14 setSafeObject:v28 forKey:v26];
              [v47 setSafeObject:autoStagerFSM2 forKey:v26];
            }
          }

          else
          {
            v37 = [NSNumber alloc];
            v28 = [v37 initWithLongLong:v50];
            v38 = objc_opt_new();
            [v14 setSafeObject:v38 forKey:v26];

            [v47 setSafeObject:v28 forKey:v26];
          }

          v24 = v24 + 1;
        }

        while (v49 != v24);
        v49 = [obj countByEnumeratingWithState:&v51 objects:v55 count:16];
      }

      while (v49);
    }

    keyCopy = v44;
    goto LABEL_31;
  }

  autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
  diag2 = [autoStagerFSM3 diag];
  v17 = [NSString alloc];
  stagingClientUsingGroups2 = [(MADAutoAssetStager *)self stagingClientUsingGroups];
  v19 = @"Y";
  if (!stagingClientUsingGroups2)
  {
    v19 = @"N";
  }

  v20 = [v17 initWithFormat:@"{%@:newStagingInfoWithGroupsAvailableForStaging} reverted to ALL-MODE staging information | stagingClientUsingGroups:%@ | ableToReportByGroup:%@", stagingCopy, v19, @"N"];
  [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v20 withResult:6111 withError:0];

  v21 = [(MADAutoAssetStager *)self newStagingInfoWithAllAvailableForStaging:stagingCopy];
LABEL_32:

  return v21;
}

- (id)newStagingInfoWithAllAvailableForStaging:(id)staging
{
  stagingCopy = staging;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v15 = 0;
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v8 = [(MADAutoAssetStager *)self _newStagingInfoAvailable:stagingCopy fromAvailableForStaging:availableForStaging providingTotalExpectedBytes:&v15];

  if (![v8 count] || !v15)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    stagingCopy = [[NSString alloc] initWithFormat:@"{%@:newStagingInfoWithAllAvailableForStaging} intending to reply to staging-client with indication of candidate(s) available for staging (nothing available)", stagingCopy];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:stagingCopy withResult:6111 withError:0];
  }

  v12 = [MAAutoAssetInfoStaging alloc];
  v13 = [v12 initWithAvailableForStaging:v8 withTotalExpectedBytes:v15];

  return v13;
}

- (id)_newStagingInfoAvailable:(id)available fromAvailableForStaging:(id)staging providingTotalExpectedBytes:(unint64_t *)bytes
{
  availableCopy = available;
  stagingCopy = staging;
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v37 = objc_alloc_init(NSMutableDictionary);
  v39 = 0u;
  v40 = 0u;
  v41 = 0u;
  v42 = 0u;
  obj = stagingCopy;
  v10 = [obj countByEnumeratingWithState:&v39 objects:v43 count:16];
  if (v10)
  {
    v11 = v10;
    v12 = 0;
    v38 = *v40;
    do
    {
      for (i = 0; i != v11; i = i + 1)
      {
        if (*v40 != v38)
        {
          objc_enumerationMutation(obj);
        }

        v14 = *(*(&v39 + 1) + 8 * i);
        v15 = objc_autoreleasePoolPush();
        metadata = [v14 metadata];
        v17 = [metadata safeIntegerForKey:@"_UnarchivedSize"];

        if (v17)
        {
          v18 = [MAAutoAssetSelector alloc];
          assetType = [v14 assetType];
          assetSpecifier = [v14 assetSpecifier];
          assetVersion = [v14 assetVersion];
          autoStagerFSM2 = [v18 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

          metadata2 = [v14 metadata];
          persistedEntryID = [autoStagerFSM2 persistedEntryID];
          [v37 setSafeObject:metadata2 forKey:persistedEntryID];

          v12 += v17;
        }

        else
        {
          autoStagerFSM2 = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
          diag = [autoStagerFSM2 diag];
          v26 = [NSString alloc];
          summary = [v14 summary];
          v28 = [v26 initWithFormat:@"{%@:_newStagingInfoAvailable} entry tracked as availableForStaging with unarchivedSize of 0 - ignored | descriptor:%@", availableCopy, summary];
          [diag trackAnomaly:@"AUTO-STAGER" forReason:v28 withResult:6108 withError:0];
        }

        objc_autoreleasePoolPop(v15);
      }

      v11 = [obj countByEnumeratingWithState:&v39 objects:v43 count:16];
    }

    while (v11);
  }

  else
  {
    v12 = 0;
  }

  if (![v37 count] || !v12)
  {
    autoStagerFSM3 = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
    diag2 = [autoStagerFSM3 diag];
    availableCopy = [[NSString alloc] initWithFormat:@"{%@:_newStagingInfoAvailable} intending to reply to staging-client with indication of candidate(s) available for staging (nothing available)", availableCopy];
    [diag2 trackAnomaly:@"AUTO-STAGER" forReason:availableCopy withResult:6111 withError:0];
  }

  if (bytes)
  {
    *bytes = v12;
  }

  return v37;
}

- (id)newStagedInfoWithGroupsSuccessfullyStaged:(id)staged indicatingHaveStaged:(BOOL)haveStaged
{
  haveStagedCopy = haveStaged;
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagedCopy = [[NSString alloc] initWithFormat:@"%@:newStagedInfoWithGroupsSuccessfullyStaged", stagedCopy];
  v10 = [MAAutoAssetInfoStaged alloc];
  LOBYTE(extendedStateQueue) = objc_opt_respondsToSelector();

  if ((extendedStateQueue & 1) == 0)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v41 = [NSString alloc];
    stagingClientUsingGroups = [(MADAutoAssetStager *)self stagingClientUsingGroups];
    v43 = @"Y";
    if (!stagingClientUsingGroups)
    {
      v43 = @"N";
    }

    v44 = [v41 initWithFormat:@"{%@:newStagedInfoWithGroupsSuccessfullyStaged} reverted to ALL-MODE staging information | stagingClientUsingGroups:%@ | ableToReportByGroup:%@", stagedCopy, v43, @"N"];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v44 withResult:6111 withError:0];

    v45 = [(MADAutoAssetStager *)self newStagedInfoWithAllSuccessfullyStaged:stagedCopy];
    goto LABEL_36;
  }

  selfCopy = self;
  v11 = objc_alloc_init(NSMutableDictionary);
  v12 = objc_alloc_init(NSMutableDictionary);
  v13 = v12;
  if (!haveStagedCopy)
  {
    goto LABEL_35;
  }

  v60 = v12;
  v61 = v11;
  v62 = stagedCopy;
  v71 = +[MADAutoAssetControlManager preferenceStagingLookupFlipRequiredOptional];
  v66 = objc_alloc_init(NSMutableDictionary);
  v65 = objc_alloc_init(NSMutableDictionary);
  v64 = objc_alloc_init(NSMutableDictionary);
  v63 = objc_alloc_init(NSMutableDictionary);
  v76 = 0u;
  v77 = 0u;
  v78 = 0u;
  v79 = 0u;
  selfCopy2 = self;
  obj = [(MADAutoAssetStager *)self successfullyStaged];
  v75 = [obj countByEnumeratingWithState:&v76 objects:v94 count:16];
  v15 = 0;
  v16 = 0;
  if (!v75)
  {
    v72 = 0;
    v73 = 0;
    goto LABEL_26;
  }

  v72 = 0;
  v73 = 0;
  v74 = *v77;
  do
  {
    for (i = 0; i != v75; i = i + 1)
    {
      if (*v77 != v74)
      {
        objc_enumerationMutation(obj);
      }

      v18 = *(*(&v76 + 1) + 8 * i);
      v19 = objc_autoreleasePoolPush();
      successfullyStaged = [(MADAutoAssetStager *)selfCopy2 successfullyStaged];
      v21 = [successfullyStaged safeObjectForKey:v18 ofClass:objc_opt_class()];

      metadata = [v21 metadata];
      v23 = [metadata safeIntegerForKey:@"_UnarchivedSize"];

      isPreSUStagingRequired = [v21 isPreSUStagingRequired];
      v25 = isPreSUStagingRequired;
      if (v23)
      {
        if (v71 == isPreSUStagingRequired)
        {
          v16 = &v16[v23];
          ++v15;
          v26 = selfCopy2;
          v27 = v21;
          v28 = v65;
        }

        else
        {
          v73 += v23;
          ++v72;
          v26 = selfCopy2;
          v27 = v21;
          v28 = v66;
        }

        goto LABEL_18;
      }

      v69 = v16;
      v70 = v15;
      v29 = stagedCopy;
      downloadedFilesystemBytes = [v21 downloadedFilesystemBytes];
      autoStagerFSM3 = [(MADAutoAssetStager *)selfCopy2 autoStagerFSM];
      diag2 = [autoStagerFSM3 diag];
      v33 = [NSString alloc];
      summary = [v21 summary];
      v35 = summary;
      if (downloadedFilesystemBytes < 1)
      {
        stagedCopy = v29;
        v38 = [v33 initWithFormat:@"{%@:newStagedInfoWithGroupsSuccessfullyStaged} entry tracked as successfullyStaged with unarchivedSize of 0 - ignored | descriptor:%@", v29, summary];
        [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v38 withResult:6108 withError:0];

        selfCopy2 = selfCopy;
        goto LABEL_16;
      }

      stagedCopy = v29;
      v36 = [v33 initWithFormat:@"{%@:newStagedInfoWithGroupsSuccessfullyStaged} entry tracked as successfullyStaged with unarchivedSize of 0 - using downloadedFilesystemBytes | descriptor:%@", v29, summary];
      [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v36 withResult:6108 withError:0];

      downloadedFilesystemBytes2 = [v21 downloadedFilesystemBytes];
      if (v71 != v25)
      {
        v73 += downloadedFilesystemBytes2;
        ++v72;
        selfCopy2 = selfCopy;
        [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v21 inContainer:v64];
LABEL_16:
        v16 = v69;
        v15 = v70;
        goto LABEL_19;
      }

      v16 = &v69[downloadedFilesystemBytes2];
      v15 = v70 + 1;
      selfCopy2 = selfCopy;
      v26 = selfCopy;
      v27 = v21;
      v28 = v63;
LABEL_18:
      [(MADAutoAssetStager *)v26 trackSelectorForDescriptor:v27 inContainer:v28];
LABEL_19:

      objc_autoreleasePoolPop(v19);
    }

    v75 = [obj countByEnumeratingWithState:&v76 objects:v94 count:16];
  }

  while (v75);
LABEL_26:
  v46 = v16;

  v47 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v47, OS_LOG_TYPE_DEFAULT))
  {
    summary2 = [(MADAutoAssetStager *)selfCopy2 summary];
    if (v71)
    {
      v49 = @"Y";
    }

    else
    {
      v49 = @"N";
    }

    v50 = [(MADAutoAssetStager *)selfCopy2 selectorContainerAsString:v66];
    [(MADAutoAssetStager *)selfCopy2 selectorContainerAsString:v64];
    v52 = v51 = selfCopy2;
    v53 = [(MADAutoAssetStager *)v51 selectorContainerAsString:v65];
    v54 = [(MADAutoAssetStager *)v51 selectorContainerAsString:v63];
    *buf = 138544898;
    v81 = summary2;
    v82 = 2114;
    v83 = stagedCopy;
    v84 = 2114;
    v85 = v49;
    v86 = 2114;
    v87 = v50;
    v88 = 2114;
    v89 = v52;
    v90 = 2114;
    v91 = v53;
    v92 = 2114;
    v93 = v54;
    _os_log_impl(&dword_0, v47, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} indicate have staged | simulateFlipped:%{public}@\n>>> R(staged:%{public}@,alternate:%{public}@)\n>>> O(staged:%{public}@,alternate:%{public}@)", buf, 0x48u);
  }

  v11 = v61;
  stagedCopy = v62;
  v13 = v60;
  if (v73 >= 1)
  {
    v55 = [[NSNumber alloc] initWithLongLong:v73];
    v56 = [[NSNumber alloc] initWithLongLong:v72];
    [v61 setSafeObject:v55 forKey:@"STAGE_GROUP_REQUIRED"];
    [v60 setSafeObject:v56 forKey:@"STAGE_GROUP_REQUIRED"];
  }

  if (v46 >= 1)
  {
    v57 = [[NSNumber alloc] initWithLongLong:v46];
    v58 = [[NSNumber alloc] initWithLongLong:v15];
    [v61 setSafeObject:v57 forKey:@"STAGE_GROUP_OPTIONAL"];
    [v60 setSafeObject:v58 forKey:@"STAGE_GROUP_OPTIONAL"];
  }

LABEL_35:
  v45 = [[MAAutoAssetInfoStaged alloc] initWithByGroupTotalStagedBytes:v11 withByGroupAssetsSuccessfullyStaged:v13];

LABEL_36:
  return v45;
}

- (id)newStagedInfoWithAllSuccessfullyStaged:(id)staged
{
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v43 = 0u;
  v44 = 0u;
  v41 = 0u;
  v42 = 0u;
  successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
  v8 = [successfullyStaged countByEnumeratingWithState:&v41 objects:v45 count:16];
  if (!v8)
  {

    v11 = 0;
    v10 = 0;
LABEL_20:
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    [autoStagerFSM2 diag];
    v32 = v31 = v11;
    stagedCopy = [[NSString alloc] initWithFormat:@"{%@:newStagedInfoWithAllSuccessfullyStaged} intending to reply to staging-client with indication of staged content (nothing staged)", stagedCopy];
    [v32 trackAnomaly:@"AUTO-STAGER" forReason:stagedCopy withResult:6111 withError:0];

    v11 = v31;
    goto LABEL_21;
  }

  v9 = v8;
  v36 = successfullyStaged;
  v37 = stagedCopy;
  v10 = 0;
  v11 = 0;
  v40 = *v42;
  do
  {
    v12 = 0;
    v38 = v9;
    do
    {
      if (*v42 != v40)
      {
        objc_enumerationMutation(successfullyStaged);
      }

      v13 = *(*(&v41 + 1) + 8 * v12);
      v14 = objc_autoreleasePoolPush();
      successfullyStaged2 = [(MADAutoAssetStager *)self successfullyStaged];
      v16 = [successfullyStaged2 safeObjectForKey:v13 ofClass:objc_opt_class()];

      metadata = [v16 metadata];
      v18 = [metadata safeIntegerForKey:@"_UnarchivedSize"];

      if (v18)
      {
        v11 = &v11[v18];
        ++v10;
      }

      else
      {
        v19 = v11;
        v39 = v10;
        downloadedFilesystemBytes = [v16 downloadedFilesystemBytes];
        selfCopy = self;
        autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM3 diag];
        v24 = [NSString alloc];
        summary = [v16 summary];
        v26 = summary;
        if (downloadedFilesystemBytes < 1)
        {
          v28 = [v24 initWithFormat:@"{%@:newStagedInfoWithAllSuccessfullyStaged} entry tracked as successfullyStaged with unarchivedSize of 0 - ignored | descriptor:%@", v37, summary];
          [diag trackAnomaly:@"AUTO-STAGER" forReason:v28 withResult:6108 withError:0];

          self = selfCopy;
          v10 = v39;
          v11 = v19;
        }

        else
        {
          v27 = [v24 initWithFormat:@"{%@:newStagedInfoWithAllSuccessfullyStaged} entry tracked as successfullyStaged with unarchivedSize of 0 - using downloadedFilesystemBytes | descriptor:%@", v37, summary];
          [diag trackAnomaly:@"AUTO-STAGER" forReason:v27 withResult:6108 withError:0];

          v11 = &v19[[v16 downloadedFilesystemBytes]];
          v10 = v39 + 1;
          self = selfCopy;
        }

        successfullyStaged = v36;
        v9 = v38;
      }

      objc_autoreleasePoolPop(v14);
      v12 = v12 + 1;
    }

    while (v9 != v12);
    v9 = [successfullyStaged countByEnumeratingWithState:&v41 objects:v45 count:16];
  }

  while (v9);

  v29 = v11 < 1 || v10 == 0;
  stagedCopy = v37;
  if (v29)
  {
    goto LABEL_20;
  }

LABEL_21:
  v34 = [[MAAutoAssetInfoStaged alloc] initWithTotalStagedBytes:v11 withAssetsSuccessfullyStaged:v10];

  return v34;
}

- (id)adoptTargetFromUpdateAttributes:(id)attributes fromUpdateAttributes:(id)updateAttributes forGroupDetermine:(BOOL)determine
{
  updateAttributesCopy = updateAttributes;
  attributesCopy = attributes;
  attributesCopy = [[NSString alloc] initWithFormat:@"%@:adoptTargetFromUpdateAttributes", attributesCopy];

  v11 = [updateAttributesCopy safeObjectForKey:@"OSVersion" ofClass:objc_opt_class()];
  v12 = [updateAttributesCopy safeObjectForKey:@"Build" ofClass:objc_opt_class()];
  v13 = [updateAttributesCopy safeObjectForKey:@"TrainName" ofClass:objc_opt_class()];
  v14 = [updateAttributesCopy safeObjectForKey:@"RestoreVersion" ofClass:objc_opt_class()];
  v15 = [updateAttributesCopy safeObjectForKey:@"GroupNames" ofClass:objc_opt_class()];
  v16 = [(MADAutoAssetStager *)self _targetName:@"CLIENT" forOSVersion:v11 forBuildVersion:v12 forTrainName:v13 forRestoreVersion:v14];
  [(MADAutoAssetStager *)self setAssetTargetOSVersion:v11];
  [(MADAutoAssetStager *)self setAssetTargetBuildVersion:v12];
  [(MADAutoAssetStager *)self setAssetTargetTrainName:v13];
  [(MADAutoAssetStager *)self setAssetTargetRestoreVersion:v14];
  [(MADAutoAssetStager *)self setAssetTargetGroupNames:v15];
  [(MADAutoAssetStager *)self setActiveTargetUpdateAttributes:updateAttributesCopy];
  [(MADAutoAssetStager *)self _persistLastStagingFrom:attributesCopy];
  if (!determine)
  {
    if ([(MADAutoAssetStager *)self doesStagingInvolveOptional])
    {
      v17 = [updateAttributesCopy safeObjectForKey:@"OptionalAssetSizeAllowed" ofClass:objc_opt_class()];
      [(MADAutoAssetStager *)self setOptionalAssetSizeAllowed:v17];

      optionalAssetSizeAllowed = [(MADAutoAssetStager *)self optionalAssetSizeAllowed];

      if (!optionalAssetSizeAllowed)
      {
        [(MADAutoAssetStager *)self setOptionalAssetSizeAllowed:&off_4F7790];
      }

      v19 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v19, OS_LOG_TYPE_DEFAULT))
      {
        [(MADAutoAssetStager *)self summary];
        v36 = v14;
        v20 = v13;
        v21 = v12;
        v22 = v11;
        v23 = attributesCopy;
        v24 = v15;
        v26 = v25 = v16;
        *buf = 138543618;
        v40 = v26;
        v41 = 2114;
        v42 = v23;
        _os_log_impl(&dword_0, v19, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} forming available-for-staging (to then be split into REQUIRED and OPTIONAL", buf, 0x16u);

        v16 = v25;
        v15 = v24;
        attributesCopy = v23;
        v11 = v22;
        v12 = v21;
        v13 = v20;
        v14 = v36;
      }

      [(MADAutoAssetStager *)self formAvailableForStagingByCombiningRequiredAndOptional:attributesCopy];
      v27 = [(MADAutoAssetStager *)self splitOutAvailableForStagingByGroup:@"{adoptTargetFromUpdateAttributes}" forGroupDetermine:0];
    }

    else
    {
      v37 = v16;
      v28 = [NSNumber numberWithInt:0];
      [(MADAutoAssetStager *)self setOptionalAssetSizeAllowed:v28];

      v29 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v29, OS_LOG_TYPE_DEFAULT))
      {
        summary = [(MADAutoAssetStager *)self summary];
        *buf = 138543618;
        v40 = summary;
        v41 = 2114;
        v42 = attributesCopy;
        _os_log_impl(&dword_0, v29, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} staging doesn't involve optional assets", buf, 0x16u);
      }

      v16 = v37;
    }
  }

  [(MADAutoAssetStager *)self setStagingClientChosen:1];
  [(MADAutoAssetStager *)self setStagingClientUsingGroups:1];
  v31 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v31, OS_LOG_TYPE_DEFAULT))
  {
    [(MADAutoAssetStager *)self summary];
    v38 = v15;
    v33 = v32 = v16;
    _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
    *buf = 138543874;
    v40 = v33;
    v41 = 2114;
    v42 = _targetNameActive;
    v43 = 2114;
    v44 = attributesCopy;
    _os_log_impl(&dword_0, v31, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [ADOPTED-TARGET] latest target from client-provided update-attributes", buf, 0x20u);

    v16 = v32;
    v15 = v38;
  }

  return v16;
}

- (void)_replyToStagingClient:(id)client replyingToRequest:(id)request withErrorCode:(int64_t)code withUnderlyingError:(id)error withDescription:(id)description
{
  clientCopy = client;
  requestCopy = request;
  errorCopy = error;
  descriptionCopy = description;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (!requestCopy)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    descriptionCopy = [[NSString alloc] initWithFormat:@"{%@} %@ (reply to staging-client-request when no staging-client-request)", clientCopy, descriptionCopy];
LABEL_8:
    v37 = descriptionCopy;
    [diag trackAnomaly:@"AUTO-STAGER" forReason:descriptionCopy withResult:6111 withError:errorCopy];

    goto LABEL_9;
  }

  clientReplyCompletion = [requestCopy clientReplyCompletion];

  if (!clientReplyCompletion)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    descriptionCopy = [[NSString alloc] initWithFormat:@"{%@} %@ (pending staging-client-request with no reply-completion)", clientCopy, descriptionCopy];
    goto LABEL_8;
  }

  v19 = objc_alloc_init(NSMutableDictionary);
  clientRequestMessage = [requestCopy clientRequestMessage];
  [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];
  v22 = v21 = errorCopy;

  v23 = [SUCoreConnectMessage alloc];
  clientID = [requestCopy clientID];
  v39 = v19;
  v25 = [v23 initWithType:2 messageName:v22 clientID:clientID version:0 message:v19];

  v38 = v21;
  v26 = [MAAutoAssetError buildError:code fromOperation:clientCopy underlyingError:v21 withDescription:descriptionCopy];
  statisticsClientRepliesFailure = [(MADAutoAssetStager *)self statisticsClientRepliesFailure];
  clientRequestMessage2 = [requestCopy clientRequestMessage];
  messageName = [clientRequestMessage2 messageName];
  [statisticsClientRepliesFailure incrementForClientRequestMessage:messageName];

  v30 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v30, OS_LOG_TYPE_ERROR))
  {
    _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
    checkedDescription = [v26 checkedDescription];
    *buf = 138544130;
    v41 = _targetNameActive;
    v42 = 2114;
    v43 = clientCopy;
    v44 = 2114;
    v45 = v22;
    v46 = 2114;
    v47 = checkedDescription;
    _os_log_impl(&dword_0, v30, OS_LOG_TYPE_ERROR, "\n[%{public}@] {%{public}@} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (error) | responseError:%{public}@", buf, 0x2Au);
  }

  clientReplyCompletion2 = [requestCopy clientReplyCompletion];
  (clientReplyCompletion2)[2](clientReplyCompletion2, v25, v26);

  errorCopy = v38;
LABEL_9:
}

- (void)_replyToStagingClient:(id)client withStagingInfo:(id)info replyingToStagingRequest:(id)request recordingOperation:(int64_t)operation
{
  clientCopy = client;
  infoCopy = info;
  requestCopy = request;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (requestCopy)
  {
    v37 = objc_alloc_init(NSMutableDictionary);
    clientRequestMessage = [requestCopy clientRequestMessage];
    v15 = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];

    if (operation != 9999)
    {
      [requestCopy clientRequestMessage];
      v16 = v36 = v15;
      messageName = [v16 messageName];
      assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
      assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
      [MADAutoAssetHistory recordOperation:operation toHistoryType:4 fromLayer:4 fromClient:messageName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

      v15 = v36;
    }

    [v37 setSafeObject:infoCopy forKey:@"staging"];
    v20 = [SUCoreConnectMessage alloc];
    clientID = [requestCopy clientID];
    v22 = [v20 initWithType:2 messageName:v15 clientID:clientID version:0 message:v37];

    statisticsClientRepliesSuccess = [(MADAutoAssetStager *)self statisticsClientRepliesSuccess];
    clientRequestMessage2 = [requestCopy clientRequestMessage];
    messageName2 = [clientRequestMessage2 messageName];
    [statisticsClientRepliesSuccess incrementForClientRequestMessage:messageName2];

    v26 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v26, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
      summary2 = [infoCopy summary];
      *buf = 138544386;
      v40 = summary;
      v41 = 2114;
      v42 = _targetNameActive;
      v43 = 2114;
      v44 = clientCopy;
      v45 = 2114;
      v46 = v15;
      v47 = 2114;
      v48 = summary2;
      _os_log_impl(&dword_0, v26, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (determine success) | stagingInfo:%{public}@", buf, 0x34u);
    }

    [(MADAutoAssetStager *)self _logStagingDetails:v15 forStagingInfo:infoCopy];
    clientReplyCompletion = [requestCopy clientReplyCompletion];
    (clientReplyCompletion)[2](clientReplyCompletion, v22, 0);
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v33 = [NSString alloc];
    summary3 = [infoCopy summary];
    v35 = [v33 initWithFormat:@"{%@:_replyToStagingClient} | no stagingRequest to reply to | stagingInfo:%@", clientCopy, summary3];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v35 withResult:6111 withError:0];
  }
}

- (void)_replyToStagingClient:(id)client withStagedInfo:(id)info replyingToStagingRequest:(id)request recordingOperation:(int64_t)operation
{
  clientCopy = client;
  infoCopy = info;
  requestCopy = request;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (requestCopy)
  {
    v39 = clientCopy;
    v15 = objc_alloc_init(NSMutableDictionary);
    clientRequestMessage = [requestCopy clientRequestMessage];
    v17 = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];

    stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
    assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
    assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    [MADAutoAssetHistory recordOperation:operation toHistoryType:4 fromLayer:4 fromClient:stagingClientName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

    [v15 setSafeObject:infoCopy forKey:@"staging"];
    v21 = [SUCoreConnectMessage alloc];
    clientRequestMessage2 = [requestCopy clientRequestMessage];
    v23 = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage2];
    clientID = [requestCopy clientID];
    v25 = [v21 initWithType:2 messageName:v23 clientID:clientID version:0 message:v15];

    statisticsClientRepliesSuccess = [(MADAutoAssetStager *)self statisticsClientRepliesSuccess];
    clientRequestMessage3 = [requestCopy clientRequestMessage];
    messageName = [clientRequestMessage3 messageName];
    [statisticsClientRepliesSuccess incrementForClientRequestMessage:messageName];

    v29 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v29, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
      summary2 = [infoCopy summary];
      *buf = 138544386;
      v41 = summary;
      v42 = 2114;
      v43 = _targetNameActive;
      v44 = 2114;
      v45 = v39;
      v46 = 2114;
      v47 = v17;
      v48 = 2114;
      v49 = summary2;
      _os_log_impl(&dword_0, v29, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (staged) | stagedInfo:%{public}@", buf, 0x34u);
    }

    [(MADAutoAssetStager *)self _logStagingDetails:v17 forStagedInfo:infoCopy];
    clientReplyCompletion = [requestCopy clientReplyCompletion];
    (clientReplyCompletion)[2](clientReplyCompletion, v25, 0);

    clientCopy = v39;
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v36 = [NSString alloc];
    summary3 = [infoCopy summary];
    v38 = [v36 initWithFormat:@"{%@:_replyToStagingClient} | no stagingRequest to reply to | stagedInfo:%@", clientCopy, summary3];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v38 withResult:6111 withError:0];
  }
}

- (void)_replyToStagingClientOperationSuccess
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v5 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:@"_replyToStagingClientOperationSuccess" replyingToCleared:0];
  v6 = v5;
  if (v5)
  {
    clientReplyCompletion = [v5 clientReplyCompletion];

    if (clientReplyCompletion)
    {
      autoStagerFSM2 = objc_alloc_init(NSMutableDictionary);
      clientRequestMessage = [v6 clientRequestMessage];
      v10 = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];

      v11 = [SUCoreConnectMessage alloc];
      clientID = [v6 clientID];
      v13 = [v11 initWithType:2 messageName:v10 clientID:clientID version:0 message:autoStagerFSM2];

      statisticsClientRepliesSuccess = [(MADAutoAssetStager *)self statisticsClientRepliesSuccess];
      clientRequestMessage2 = [v6 clientRequestMessage];
      messageName = [clientRequestMessage2 messageName];
      [statisticsClientRepliesSuccess incrementForClientRequestMessage:messageName];

      v17 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v17, OS_LOG_TYPE_DEFAULT))
      {
        summary = [(MADAutoAssetStager *)self summary];
        _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
        v22 = 138543874;
        v23 = summary;
        v24 = 2114;
        v25 = _targetNameActive;
        v26 = 2114;
        v27 = v10;
        _os_log_impl(&dword_0, v17, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {_replyToStagingClientOperationSuccess} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (operation success)", &v22, 0x20u);
      }

      clientReplyCompletion2 = [v6 clientReplyCompletion];
      (clientReplyCompletion2)[2](clientReplyCompletion2, v13, 0);
    }

    else
    {
      autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag = [autoStagerFSM2 diag];
      [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{_replyToStagingClientOperationSuccess} | pending staging-client-request with no reply-completion" withResult:6111 withError:0];
    }
  }
}

- (void)_replyNoCandidates:(id)candidates replyingToStagingRequest:(id)request
{
  requestCopy = request;
  candidatesCopy = candidates;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  candidatesCopy = [[NSString alloc] initWithFormat:@"%@:_replyNoCandidates", candidatesCopy];
  v11 = requestCopy;
  v12 = v11;
  if (v11)
  {
    v13 = 0;
    v14 = v11;
LABEL_8:
    clientReplyCompletion = [v14 clientReplyCompletion];

    if (clientReplyCompletion)
    {
      if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
      {
        summary = [(MADAutoAssetStager *)self newStagingInfoWithGroupsAvailableForStaging:candidatesCopy indicatingHaveAvailable:0];
      }

      else
      {
        v21 = [MAAutoAssetInfoStaging alloc];
        v22 = objc_alloc_init(NSMutableDictionary);
        summary = [v21 initWithAvailableForStaging:v22 withTotalExpectedBytes:0];
      }

      [(MADAutoAssetStager *)self _replyToStagingClient:candidatesCopy withStagingInfo:summary replyingToStagingRequest:v14 recordingOperation:900];
      stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
      assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
      assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
      [MADAutoAssetHistory recordOperation:900 toHistoryType:4 fromLayer:4 fromClient:stagingClientName forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

      if (v13)
      {
        [(MADAutoAssetStager *)self _acknowlegdeAndClearAllEliminations];
      }

      goto LABEL_17;
    }

    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v20 = [[NSString alloc] initWithFormat:@"{%@} intending to reply to staging-client with indication of no candidates available for staging (pending staging-client-request with no reply-completion)", candidatesCopy];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v20 withResult:6111 withError:0];

    goto LABEL_18;
  }

  stagingClientUsingGroups = [(MADAutoAssetStager *)self stagingClientUsingGroups];
  if (stagingClientUsingGroups)
  {
    [(MADAutoAssetStager *)self _stagingClientRequestDetermineClear:candidatesCopy forStagingTargetName:0 replyingToCleared:0];
  }

  else
  {
    [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:candidatesCopy replyingToCleared:0];
  }
  v14 = ;
  if (v14)
  {
    v13 = stagingClientUsingGroups ^ 1;
    goto LABEL_8;
  }

  v14 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v14, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
    *buf = 138543874;
    v28 = summary;
    v29 = 2114;
    v30 = _targetNameActive;
    v31 = 2114;
    v32 = candidatesCopy;
    _os_log_impl(&dword_0, v14, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} already replied to staging-client", buf, 0x20u);

LABEL_17:
  }

LABEL_18:
}

- (void)_replyNothingStaged:(id)staged replyingToStagingRequest:(id)request
{
  stagedCopy = staged;
  requestCopy = request;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10 = requestCopy;
  autoStagerFSM2 = v10;
  if (!v10)
  {
    if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
    {
      _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
      autoStagerFSM2 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:stagedCopy forStagingTargetName:_targetNameActiveClient replyingToCleared:0];

      if (autoStagerFSM2)
      {
        goto LABEL_4;
      }

LABEL_13:
      autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag = [autoStagerFSM2 diag];
      [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyNothingStaged} intending to reply to staging-client with indication of nothing staged (no pending staging-client-request)" withResult:6111 withError:0];
      goto LABEL_14;
    }

    autoStagerFSM2 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:stagedCopy replyingToCleared:0];
    if (!autoStagerFSM2)
    {
      goto LABEL_13;
    }
  }

LABEL_4:
  clientReplyCompletion = [autoStagerFSM2 clientReplyCompletion];

  if (!clientReplyCompletion)
  {
    diag = [(MADAutoAssetStager *)self autoStagerFSM];
    v18Diag = [diag diag];
    [v18Diag trackAnomaly:@"AUTO-STAGER" forReason:@"{ReplyNothingStaged} intending to reply to staging-client with indication of nothing staged (pending staging-client-request with no reply-completion)" withResult:6111 withError:0];

LABEL_14:
    goto LABEL_15;
  }

  clientRequestMessage = [autoStagerFSM2 clientRequestMessage];
  v15 = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];

  v16 = objc_alloc_init(NSMutableDictionary);
  v31 = stagedCopy;
  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    v17 = [(MADAutoAssetStager *)self newStagedInfoWithGroupsSuccessfullyStaged:@"_replyNothingStaged" indicatingHaveStaged:0];
  }

  else
  {
    v17 = [[MAAutoAssetInfoStaged alloc] initWithTotalStagedBytes:0 withAssetsSuccessfullyStaged:0];
  }

  v20 = v17;
  [v16 setSafeObject:v17 forKey:@"staged"];
  v21 = [SUCoreConnectMessage alloc];
  clientID = [autoStagerFSM2 clientID];
  v23 = [v21 initWithType:2 messageName:v15 clientID:clientID version:0 message:v16];

  statisticsClientRepliesSuccess = [(MADAutoAssetStager *)self statisticsClientRepliesSuccess];
  clientRequestMessage2 = [autoStagerFSM2 clientRequestMessage];
  messageName = [clientRequestMessage2 messageName];
  [statisticsClientRepliesSuccess incrementForClientRequestMessage:messageName];

  v27 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v27, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
    *buf = 138543874;
    v33 = summary;
    v34 = 2114;
    v35 = _targetNameActive;
    v36 = 2114;
    v37 = v15;
    _os_log_impl(&dword_0, v27, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {_replyNothingStaged} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (nothing staged)", buf, 0x20u);
  }

  clientReplyCompletion2 = [autoStagerFSM2 clientReplyCompletion];
  (clientReplyCompletion2)[2](clientReplyCompletion2, v23, 0);

  stagedCopy = v31;
LABEL_15:
}

- (void)_replyHaveStagedContent:(id)content withEventInfo:(id)info
{
  contentCopy = content;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
    v9 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:contentCopy forStagingTargetName:_targetNameActiveClient replyingToCleared:0];

    if (v9)
    {
LABEL_3:
      clientReplyCompletion = [v9 clientReplyCompletion];

      if (clientReplyCompletion)
      {
        clientRequestMessage = [v9 clientRequestMessage];
        v12 = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];

        v13 = objc_alloc_init(NSMutableDictionary);
        if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
        {
          v14 = [(MADAutoAssetStager *)self newStagedInfoWithGroupsSuccessfullyStaged:@"_replyHaveStagedContent" indicatingHaveStaged:1];
        }

        else
        {
          v14 = [(MADAutoAssetStager *)self newStagedInfoWithAllSuccessfullyStaged:@"_replyHaveStagedContent"];
        }

        v21 = v14;
        v34 = contentCopy;
        [v13 setSafeObject:v14 forKey:@"staged"];
        v22 = [SUCoreConnectMessage alloc];
        clientID = [v9 clientID];
        v24 = [v22 initWithType:2 messageName:v12 clientID:clientID version:0 message:v13];

        statisticsClientRepliesSuccess = [(MADAutoAssetStager *)self statisticsClientRepliesSuccess];
        clientRequestMessage2 = [v9 clientRequestMessage];
        messageName = [clientRequestMessage2 messageName];
        [statisticsClientRepliesSuccess incrementForClientRequestMessage:messageName];

        v28 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v28, OS_LOG_TYPE_DEFAULT))
        {
          summary = [(MADAutoAssetStager *)self summary];
          _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
          summary2 = [v21 summary];
          *buf = 138544130;
          v36 = summary;
          v37 = 2114;
          v38 = _targetNameActive;
          v39 = 2114;
          v40 = v12;
          v41 = 2114;
          v42 = summary2;
          _os_log_impl(&dword_0, v28, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {_replyHaveStagedContent} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (have staged) | stagedInfo:%{public}@", buf, 0x2Au);
        }

        [(MADAutoAssetStager *)self _logStagingDetails:v12 forStagedInfo:v21];
        clientReplyCompletion2 = [v9 clientReplyCompletion];
        (clientReplyCompletion2)[2](clientReplyCompletion2, v24, 0);

        contentCopy = v34;
        goto LABEL_18;
      }

      autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag = [autoStagerFSM2 diag];
      contentCopy = [[NSString alloc] initWithFormat:@"{%@} intending to reply to staging-client with indication of staged content (pending staging-client-request with no reply-completion)", contentCopy];
LABEL_17:
      v33 = contentCopy;
      [diag trackAnomaly:@"AUTO-STAGER" forReason:contentCopy withResult:6111 withError:0];

      goto LABEL_18;
    }
  }

  else
  {
    v9 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:contentCopy replyingToCleared:0];
    if (v9)
    {
      goto LABEL_3;
    }
  }

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    contentCopy = [[NSString alloc] initWithFormat:@"{%@} intending to reply to staging-client with indication of staged content (no pending staging-client-request)", contentCopy];
    goto LABEL_17;
  }

  v15 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v15, OS_LOG_TYPE_DEFAULT))
  {
    summary3 = [(MADAutoAssetStager *)self summary];
    _targetNameActive2 = [(MADAutoAssetStager *)self _targetNameActive];
    *buf = 138543874;
    v36 = summary3;
    v37 = 2114;
    v38 = _targetNameActive2;
    v39 = 2114;
    v40 = contentCopy;
    _os_log_impl(&dword_0, v15, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REPLY] replied earlier to staging-client (once REQUIRED staged)", buf, 0x20u);
  }

LABEL_18:
}

- (void)_replyWrongMode:(id)mode
{
  modeCopy = mode;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (!modeCopy)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v31 = diag;
    v32 = @"{_replyWrongMode} intending to reply to staging-client with indication of wrong mode (no staging-client-request)";
LABEL_10:
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v32 withResult:6111 withError:0];

    goto LABEL_11;
  }

  clientReplyCompletion = [modeCopy clientReplyCompletion];

  if (!clientReplyCompletion)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v31 = diag;
    v32 = @"{_replyWrongMode} intending to reply to staging-client with indication of wrong mode (staging-client-request with no reply-completion)";
    goto LABEL_10;
  }

  clientRequestMessage = [modeCopy clientRequestMessage];
  v9 = [MADAutoAssetControlManager replyMessageNameForRequest:clientRequestMessage];

  v10 = [[MAAutoAssetInfoStaged alloc] initWithTotalStagedBytes:0 withAssetsSuccessfullyStaged:0];
  v11 = objc_alloc_init(NSMutableDictionary);
  [v11 setSafeObject:v10 forKey:@"staged"];
  v12 = [SUCoreConnectMessage alloc];
  clientID = [modeCopy clientID];
  v33 = v9;
  v14 = [v12 initWithType:2 messageName:v9 clientID:clientID version:0 message:v11];

  v15 = [NSString alloc];
  stagingClientUsingGroups = [(MADAutoAssetStager *)self stagingClientUsingGroups];
  v17 = @"N";
  if (stagingClientUsingGroups)
  {
    v17 = @"Y";
  }

  v18 = [v15 initWithFormat:@"wrong mode indicated by staging client | stagingClientUsingGroups:%@", v17];
  v19 = [MAAutoAssetError buildError:6606 fromOperation:@"_replyWrongMode" underlyingError:0 withDescription:v18];

  statisticsClientRepliesFailure = [(MADAutoAssetStager *)self statisticsClientRepliesFailure];
  clientRequestMessage2 = [modeCopy clientRequestMessage];
  messageName = [clientRequestMessage2 messageName];
  [statisticsClientRepliesFailure incrementForClientRequestMessage:messageName];

  v23 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v23, OS_LOG_TYPE_ERROR))
  {
    summary = [(MADAutoAssetStager *)self summary];
    _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
    summary2 = [v10 summary];
    checkedDescription = [v19 checkedDescription];
    *buf = 138544386;
    v35 = summary;
    v36 = 2114;
    v37 = _targetNameActive;
    v38 = 2114;
    v39 = v33;
    v40 = 2112;
    v41 = summary2;
    v42 = 2114;
    v43 = checkedDescription;
    _os_log_impl(&dword_0, v23, OS_LOG_TYPE_ERROR, "%{public}@\n[%{public}@] {_replyWrongMode} [STAGING-CLIENT-REPLY] %{public}@ reply to staging-client (wrong mode) | staged:%{piblic}@ | responseError:%{public}@", buf, 0x34u);
  }

  clientReplyCompletion2 = [modeCopy clientReplyCompletion];
  (clientReplyCompletion2)[2](clientReplyCompletion2, v14, v19);

LABEL_11:
}

- (void)_replyWithAlreadyDetermined:(id)determined forEventInfo:(id)info orFollowupDetermineStart:(BOOL)start
{
  startCopy = start;
  determinedCopy = determined;
  infoCopy = info;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  LODWORD(autoStagerFSM) = [(MADAutoAssetStager *)self stagingClientUsingGroups];
  stagingClientRequest = [infoCopy stagingClientRequest];
  if (autoStagerFSM)
  {
    v13 = [(MADAutoAssetStager *)self _updateAttributesFromStagingRequest:stagingClientRequest fromLocation:determinedCopy];

    if (v13)
    {
      v14 = [v13 safeObjectForKey:@"TrainName" ofClass:objc_opt_class()];
      v15 = [v13 safeObjectForKey:@"RestoreVersion" ofClass:objc_opt_class()];
      if (!v15)
      {
        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        determinedCopy = [[NSString alloc] initWithFormat:@"{%@} by-group request with updateAttributes without restore-version", determinedCopy];
        [diag trackAnomaly:@"AUTO-STAGER" forReason:determinedCopy withResult:6102 withError:0];

        stagingClientRequest2 = [infoCopy stagingClientRequest];
        determinedCopy2 = [[NSString alloc] initWithFormat:@"{%@} received staging-client-request is not valid - updateAttributes missing restore-version", determinedCopy];
        [(MADAutoAssetStager *)self _replyToStagingClient:determinedCopy replyingToRequest:stagingClientRequest2 withErrorCode:6102 withUnderlyingError:0 withDescription:determinedCopy2];

LABEL_56:
        goto LABEL_57;
      }

      stagingClientRequest2 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:v14 withRestoreVersion:v15];
      availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
      v110 = [availableForStagingRequiredByTarget safeObjectForKey:stagingClientRequest2 ofClass:objc_opt_class()];

      availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
      v19 = [availableForStagingOptionalByTarget safeObjectForKey:stagingClientRequest2 ofClass:objc_opt_class()];

      if (!stagingClientRequest2)
      {
        v50 = _MADLog(@"AutoStager");
        if (!os_log_type_enabled(v50, OS_LOG_TYPE_ERROR))
        {
LABEL_55:

          goto LABEL_56;
        }

        summary = [(MADAutoAssetStager *)self summary];
        _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
        *buf = 138544386;
        v112 = summary;
        v113 = 2114;
        v114 = _targetNameActive;
        v115 = 2114;
        v116 = determinedCopy;
        v117 = 2114;
        v118 = v14;
        v119 = 2114;
        v120 = v15;
        _os_log_impl(&dword_0, v50, OS_LOG_TYPE_ERROR, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] nil target-lookup-results-key | assetTargetTrainName:@%{public}@ | assetTargetRestoreVersion:%{public}@", buf, 0x34u);

LABEL_54:
        goto LABEL_55;
      }

      v108 = infoCopy;
      v20 = v15;
      persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
      v22 = [persistedTargetLookupResults persistedEntry:stagingClientRequest2 fromLocation:determinedCopy];

      if (!v22)
      {
        summary = _MADLog(@"AutoStager");
        if (os_log_type_enabled(summary, OS_LOG_TYPE_ERROR))
        {
          summary2 = [(MADAutoAssetStager *)self summary];
          _targetNameActive2 = [(MADAutoAssetStager *)self _targetNameActive];
          *buf = 138544386;
          v112 = summary2;
          v113 = 2114;
          v114 = _targetNameActive2;
          v115 = 2114;
          v116 = determinedCopy;
          v117 = 2114;
          v118 = v14;
          v119 = 2114;
          v120 = v20;
          _os_log_impl(&dword_0, summary, OS_LOG_TYPE_ERROR, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] unable to load persisted set-lookup-result file | assetTargetTrainName:@%{public}@ | assetTargetRestoreVersion:%{public}@", buf, 0x34u);
        }

        v50 = 0;
        v15 = v20;
        infoCopy = v108;
        goto LABEL_54;
      }

      v106 = v22;
      v23 = [v22 ullForKey:@"targetLookupResultsOTASituation"];
      v24 = v23;
      v107 = v19;
      if ((v23 & 0xFFFFFFFFFFFFFFFDLL) == 0xC9)
      {
        v102 = v14;
        v25 = _MADLog(@"AutoStager");
        v26 = os_log_type_enabled(v25, OS_LOG_TYPE_DEFAULT);
        v15 = v20;
        if (v110 | v19)
        {
          infoCopy = v108;
          if (v26)
          {
            summary3 = [(MADAutoAssetStager *)self summary];
            _targetNameActive3 = [(MADAutoAssetStager *)self _targetNameActive];
            v29 = [MANAutoAssetControlStagerInformation previousOTASituationName:v24];
            *buf = 138544386;
            v112 = summary3;
            v113 = 2114;
            v114 = _targetNameActive3;
            v115 = 2114;
            v116 = determinedCopy;
            v117 = 2114;
            v118 = stagingClientRequest2;
            v119 = 2114;
            v120 = v29;
            _os_log_impl(&dword_0, v25, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] have target-lookup-results | targetLookupResultsKey:@%{public}@ | targetOTASituation:%{public}@", buf, 0x34u);
          }

          stagingClientRequest3 = [v108 stagingClientRequest];
          clientRequestMessage = [stagingClientRequest3 clientRequestMessage];
          message = [clientRequestMessage message];

          stagingClientRequest4 = [v108 stagingClientRequest];
          clientRequestMessage2 = [stagingClientRequest4 clientRequestMessage];
          messageName = [clientRequestMessage2 messageName];

          v36 = [message safeObjectForKey:@"staging" ofClass:objc_opt_class()];
          v37 = _MADLog(@"AutoStager");
          v99 = message;
          v100 = v36;
          if (os_log_type_enabled(v37, OS_LOG_TYPE_DEFAULT))
          {
            summary4 = [(MADAutoAssetStager *)self summary];
            _targetNameActive4 = [(MADAutoAssetStager *)self _targetNameActive];
            *buf = 138544386;
            v112 = summary4;
            v113 = 2114;
            v114 = _targetNameActive4;
            v115 = 2114;
            v116 = determinedCopy;
            v117 = 2114;
            v118 = messageName;
            v119 = 2114;
            v120 = v100;
            _os_log_impl(&dword_0, v37, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] have target-lookup-results | message:%{public}@%{public}@", buf, 0x34u);

            v36 = v100;
          }

          v98 = messageName;
          [(MADAutoAssetStager *)self _logStagingDetails:messageName forStagingInfo:v36];
          v40 = [(MADAutoAssetStager *)self adoptTargetFromUpdateAttributes:determinedCopy fromUpdateAttributes:v13 forGroupDetermine:1];
          v97 = [(MADAutoAssetStager *)self newStagingInfoWithGroupsAvailableForStaging:determinedCopy indicatingHaveAvailable:1 usingTargetLookupKey:stagingClientRequest2];
          v41 = [[NSString alloc] initWithFormat:@"already determined for target | targetKey:%@", stagingClientRequest2];
          v42 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v42, OS_LOG_TYPE_DEFAULT))
          {
            summary5 = [(MADAutoAssetStager *)self summary];
            _targetNameActive5 = [(MADAutoAssetStager *)self _targetNameActive];
            *buf = 138544130;
            v112 = summary5;
            v113 = 2114;
            v114 = _targetNameActive5;
            v115 = 2114;
            v116 = determinedCopy;
            v117 = 2114;
            v118 = v41;
            _os_log_impl(&dword_0, v42, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} %{public}@", buf, 0x2Au);
          }

          [(MADAutoAssetStager *)self _logMilestoneFromLocation:determinedCopy resultingInEvent:@"N" forMilestoneActivity:v41];
          stagingClientRequest5 = [v108 stagingClientRequest];
          [stagingClientRequest5 clientRequestMessage];
          v45 = v96 = v41;
          messageName2 = [v45 messageName];
          assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
          assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
          LOBYTE(v94) = 1;
          [MADAutoAssetHistory recordOperation:901 toHistoryType:4 fromLayer:4 fromClient:messageName2 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion isRequired:v94];

          stagingClientRequest6 = [v108 stagingClientRequest];
          [(MADAutoAssetStager *)self _replyToStagingClient:determinedCopy withStagingInfo:v97 replyingToStagingRequest:stagingClientRequest6 recordingOperation:9999];

          v14 = v102;
          v50 = v106;
          v19 = v107;
          summary = v99;
          goto LABEL_54;
        }

        infoCopy = v108;
        if (v26)
        {
          summary6 = [(MADAutoAssetStager *)self summary];
          _targetNameActive6 = [(MADAutoAssetStager *)self _targetNameActive];
          v65 = [MANAutoAssetControlStagerInformation previousOTASituationName:v24];
          *buf = 138544386;
          v112 = summary6;
          v113 = 2114;
          v114 = _targetNameActive6;
          v115 = 2114;
          v116 = determinedCopy;
          v117 = 2114;
          v118 = stagingClientRequest2;
          v119 = 2114;
          v120 = v65;
          _os_log_impl(&dword_0, v25, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] no target-lookup-results even though already determined | targetLookupResultsKey:@%{public}@ | targetOTASituation:%{public}@", buf, 0x34u);
        }

        v14 = v102;
        [(MADAutoAssetStager *)self _persistEraseLookupResults:determinedCopy forTargetTrainName:v102 forTargetRestoreVersion:v15];
        if (!startCopy)
        {
          goto LABEL_51;
        }

LABEL_48:
        [(MADAutoAssetStager *)self setStagingClientChosen:1];
        [(MADAutoAssetStager *)self setStagingClientUsingGroups:1];
        persistedState = [(MADAutoAssetStager *)self persistedState];
        persistedConfig = [persistedState persistedConfig];
        [persistedConfig persistBoolean:-[MADAutoAssetStager stagingClientUsingGroups](self forKey:"stagingClientUsingGroups") shouldPersist:{@"modeByGroups", 1}];

        stagingClientRequest7 = [infoCopy stagingClientRequest];
        [(MADAutoAssetStager *)self _acceptStagingClientRequest:stagingClientRequest7 fromLocation:determinedCopy adoptingSpecifiedTarget:0];

        summary = [(MADAutoAssetStager *)self autoStagerFSM];
        v87 = [MADAutoAssetStagerParam alloc];
        _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
        v89 = [(MADAutoAssetStagerParam *)v87 initWithSafeSummary:_updateLatestSummary];
        [summary followupEvent:@"ModeGroupsDetermineStart" withInfo:v89];

LABEL_53:
        v50 = v106;
        v19 = v107;
        goto LABEL_54;
      }

      v15 = v20;
      if (v23 > 299)
      {
        infoCopy = v108;
        if ((v23 - 300) >= 2)
        {
          if ((v23 - 500) < 2 || (v23 - 401) <= 1)
          {
            v66 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v66, OS_LOG_TYPE_DEFAULT))
            {
              [(MADAutoAssetStager *)self summary];
              v68 = v67 = v66;
              [(MADAutoAssetStager *)self _targetNameActive];
              v69 = v103 = v14;
              v70 = [MANAutoAssetControlStagerInformation previousOTASituationName:v24];
              *buf = 138544386;
              v112 = v68;
              v113 = 2114;
              v114 = v69;
              v115 = 2114;
              v116 = determinedCopy;
              v117 = 2114;
              v118 = stagingClientRequest2;
              v119 = 2114;
              v120 = v70;
              v71 = "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] target-lookup-results beyond PSUS-DETERMINE phase | targetLookupResultsKey:@%{public}@ | targetOTASituation:%{public}@";
LABEL_39:
              _os_log_impl(&dword_0, v67, OS_LOG_TYPE_DEFAULT, v71, buf, 0x34u);

              v14 = v103;
              v66 = v67;
            }

LABEL_50:

LABEL_51:
            stagingClientRequest8 = [infoCopy stagingClientRequest];
            [(MADAutoAssetStager *)self _replyNoCandidates:determinedCopy replyingToStagingRequest:stagingClientRequest8];

            summary = _MADLog(@"AutoStager");
            if (os_log_type_enabled(summary, OS_LOG_TYPE_DEFAULT))
            {
              summary7 = [(MADAutoAssetStager *)self summary];
              _targetNameActive7 = [(MADAutoAssetStager *)self _targetNameActive];
              *buf = 138543874;
              v112 = summary7;
              v113 = 2114;
              v114 = _targetNameActive7;
              v115 = 2114;
              v116 = determinedCopy;
              _os_log_impl(&dword_0, summary, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] when GROUP-MODE and beyond determine phase | [NO-CANDIDATES]", buf, 0x20u);
            }

            goto LABEL_53;
          }

LABEL_58:
          v93 = _MADLog(@"AutoStager");
          if (startCopy)
          {
            v80 = v93;
            if (!os_log_type_enabled(v93, OS_LOG_TYPE_ERROR))
            {
              goto LABEL_47;
            }

            [(MADAutoAssetStager *)self summary];
            summary8 = v77 = v80;
            [(MADAutoAssetStager *)self _targetNameActive];
            v74 = v104 = v14;
            v75 = [MANAutoAssetControlStagerInformation previousOTASituationName:v24];
            *buf = 138544386;
            v112 = summary8;
            v113 = 2114;
            v114 = v74;
            v115 = 2114;
            v116 = determinedCopy;
            v117 = 2114;
            v118 = stagingClientRequest2;
            v119 = 2114;
            v120 = v75;
            v76 = "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] unknown target-OTA-situation (re-running PSUS-DETERMINE) | targetLookupResultsKey:@%{public}@ | targetOTASituation:%{public}@";
            v78 = v77;
            v79 = OS_LOG_TYPE_ERROR;
            goto LABEL_43;
          }

          v66 = v93;
          if (os_log_type_enabled(v93, OS_LOG_TYPE_DEFAULT))
          {
            [(MADAutoAssetStager *)self summary];
            v68 = v67 = v66;
            [(MADAutoAssetStager *)self _targetNameActive];
            v69 = v103 = v14;
            v70 = [MANAutoAssetControlStagerInformation previousOTASituationName:v24];
            *buf = 138544386;
            v112 = v68;
            v113 = 2114;
            v114 = v69;
            v115 = 2114;
            v116 = determinedCopy;
            v117 = 2114;
            v118 = stagingClientRequest2;
            v119 = 2114;
            v120 = v70;
            v71 = "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] PSUS-DETERMINE results not considered valid | targetLookupResultsKey:@%{public}@ | targetOTASituation:%{public}@";
            goto LABEL_39;
          }

          goto LABEL_50;
        }
      }

      else
      {
        infoCopy = v108;
        if ((v23 - 100) >= 2 && v23 != 202 && v23 != 204)
        {
          goto LABEL_58;
        }
      }

      log = _MADLog(@"AutoStager");
      v72 = os_log_type_enabled(log, OS_LOG_TYPE_DEFAULT);
      if (startCopy)
      {
        if (!v72)
        {
          v80 = log;
          goto LABEL_47;
        }

        summary8 = [(MADAutoAssetStager *)self summary];
        [(MADAutoAssetStager *)self _targetNameActive];
        v74 = v104 = v14;
        v75 = [MANAutoAssetControlStagerInformation previousOTASituationName:v24];
        *buf = 138544386;
        v112 = summary8;
        v113 = 2114;
        v114 = v74;
        v115 = 2114;
        v116 = determinedCopy;
        v117 = 2114;
        v118 = stagingClientRequest2;
        v119 = 2114;
        v120 = v75;
        v76 = "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] re-running PSUS-DETERMINE | targetLookupResultsKey:@%{public}@ | targetOTASituation:%{public}@";
        v77 = log;
        v78 = log;
        v79 = OS_LOG_TYPE_DEFAULT;
LABEL_43:
        _os_log_impl(&dword_0, v78, v79, v76, buf, 0x34u);

        v14 = v104;
        v80 = v77;
LABEL_47:

        [(MADAutoAssetStager *)self _persistEraseLookupResults:determinedCopy forTargetTrainName:v14 forTargetRestoreVersion:v15];
        goto LABEL_48;
      }

      if (v72)
      {
        summary9 = [(MADAutoAssetStager *)self summary];
        [(MADAutoAssetStager *)self _targetNameActive];
        v82 = v105 = v14;
        v83 = [MANAutoAssetControlStagerInformation previousOTASituationName:v24];
        *buf = 138544386;
        v112 = summary9;
        v113 = 2114;
        v114 = v82;
        v115 = 2114;
        v116 = determinedCopy;
        v117 = 2114;
        v118 = stagingClientRequest2;
        v119 = 2114;
        v120 = v83;
        v66 = log;
        _os_log_impl(&dword_0, log, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] PSUS-DETERMINE results not considered valid | targetLookupResultsKey:@%{public}@ | targetOTASituation:%{public}@", buf, 0x34u);

        v14 = v105;
      }

      else
      {
        v66 = log;
      }

      goto LABEL_50;
    }

    autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag2 = [autoStagerFSM3 diag];
    determinedCopy3 = [[NSString alloc] initWithFormat:@"{%@} by-group request without updateAttributes", determinedCopy];
    [diag2 trackAnomaly:@"AUTO-STAGER" forReason:determinedCopy3 withResult:6102 withError:0];

    stagingClientRequest9 = [infoCopy stagingClientRequest];
    determinedCopy4 = [[NSString alloc] initWithFormat:@"{%@} received staging-client-request is not valid - missing updateAttributes", determinedCopy];
    [(MADAutoAssetStager *)self _replyToStagingClient:determinedCopy replyingToRequest:stagingClientRequest9 withErrorCode:6102 withUnderlyingError:0 withDescription:determinedCopy4];
    goto LABEL_18;
  }

  [(MADAutoAssetStager *)self _replyNoCandidates:determinedCopy replyingToStagingRequest:stagingClientRequest];

  v13 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v13, OS_LOG_TYPE_DEFAULT))
  {
    stagingClientRequest9 = [(MADAutoAssetStager *)self summary];
    determinedCopy4 = [(MADAutoAssetStager *)self _targetNameActive];
    *buf = 138543874;
    v112 = stagingClientRequest9;
    v113 = 2114;
    v114 = determinedCopy4;
    v115 = 2114;
    v116 = determinedCopy;
    _os_log_impl(&dword_0, v13, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] when ALL-MODE and already determined | [NO-CANDIDATES]", buf, 0x20u);
LABEL_18:
  }

LABEL_57:
}

- (id)_adjustPallasResponseBasedOnPreferences:(id)preferences
{
  preferencesCopy = preferences;
  v5 = +[MADAutoAssetControlManager preferenceStagerDeterminePallasResponseFewer];
  v6 = preferencesCopy;
  v7 = v6;
  v8 = v6;
  v46 = v5;
  if (v5 >= 1)
  {
    autoAssetCatalog = [(MADAutoAssetStagerParam *)v6 autoAssetCatalog];

    v8 = v7;
    if (autoAssetCatalog)
    {
      v10 = objc_alloc_init(NSMutableDictionary);
      v8 = v7;
      if (v10)
      {
        v51 = 0u;
        v52 = 0u;
        v49 = 0u;
        v50 = 0u;
        obj = [(MADAutoAssetStagerParam *)v7 autoAssetCatalog];
        v11 = [obj countByEnumeratingWithState:&v49 objects:v59 count:16];
        if (v11)
        {
          v13 = v11;
          v48 = *v50;
          *&v12 = 138543618;
          v43 = v12;
          selfCopy = self;
          v45 = v7;
          do
          {
            v14 = 0;
            do
            {
              if (*v50 != v48)
              {
                objc_enumerationMutation(obj);
              }

              v15 = *(*(&v49 + 1) + 8 * v14);
              v16 = objc_autoreleasePoolPush();
              autoAssetCatalog2 = [(MADAutoAssetStagerParam *)v7 autoAssetCatalog];
              v18 = [autoAssetCatalog2 objectForKey:v15];

              if (v15)
              {
                v19 = v18 == 0;
              }

              else
              {
                v19 = 1;
              }

              if (v19)
              {
                v20 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(v20, OS_LOG_TYPE_ERROR))
                {
                  _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
                  _updateLatestSummary2 = _updateLatestSummary;
                  v23 = @"N";
                  if (v15)
                  {
                    v24 = v15;
                  }

                  else
                  {
                    v24 = @"N";
                  }

                  *buf = 138543874;
                  v54 = _updateLatestSummary;
                  if (v18)
                  {
                    v23 = @"Y";
                  }

                  v55 = 2114;
                  v56 = v24;
                  v57 = 2114;
                  v58 = v23;
                  v25 = v20;
                  v26 = "%{public}@\n[AUTO-STAGER] {_adjustPallasResponseBasedOnPreferences} unable to determine key/value from set-catalog | setCatalogKey:%{public}@ | setCatalogValue:%{public}@";
                  v27 = 32;
LABEL_21:
                  _os_log_impl(&dword_0, v25, OS_LOG_TYPE_ERROR, v26, buf, v27);
                }

LABEL_22:

                goto LABEL_33;
              }

              if ([SUCore stringIsEqual:v15 to:@"Assets"])
              {
                objc_opt_class();
                if ((objc_opt_isKindOfClass() & 1) == 0)
                {
                  v20 = _MADLog(@"AutoStager");
                  if (os_log_type_enabled(v20, OS_LOG_TYPE_ERROR))
                  {
                    _updateLatestSummary2 = [(MADAutoAssetStager *)self _updateLatestSummary];
                    *buf = v43;
                    v54 = _updateLatestSummary2;
                    v55 = 2114;
                    v56 = v15;
                    v25 = v20;
                    v26 = "%{public}@\n[AUTO-STAGER] {_adjustPallasResponseBasedOnPreferences} key value is not an array | setCatalogKey:%{public}@";
                    v27 = 22;
                    goto LABEL_21;
                  }

                  goto LABEL_22;
                }

                v29 = v10;
                v30 = objc_alloc_init(NSMutableArray);
                v31 = [v18 count];
                v32 = v31 - v46;
                if (v31 > v46 && v32 >= 1)
                {
                  for (i = 0; i != v32; ++i)
                  {
                    v34 = [v18 objectAtIndex:{i, v43}];
                    if (v34)
                    {
                      [v30 addObject:v34];
                    }
                  }
                }

                v10 = v29;
                [v29 setObject:v30 forKey:{v15, v43}];

                self = selfCopy;
                v7 = v45;
              }

              else
              {
                [v10 setObject:v18 forKey:v15];
              }

LABEL_33:

              objc_autoreleasePoolPop(v16);
              v14 = v14 + 1;
            }

            while (v14 != v13);
            v35 = [obj countByEnumeratingWithState:&v49 objects:v59 count:16];
            v13 = v35;
          }

          while (v35);
        }

        v36 = [MADAutoAssetStagerParam alloc];
        baseForStagingDescriptors = [(MADAutoAssetStagerParam *)v7 baseForStagingDescriptors];
        operationError = [(MADAutoAssetStagerParam *)v7 operationError];
        v8 = [(MADAutoAssetStagerParam *)v36 initWithAutoAssetCatalog:v10 withBaseForStagingDescriptors:baseForStagingDescriptors withOperationError:operationError];

        jobInformation = [(MADAutoAssetStagerParam *)v7 jobInformation];

        if (jobInformation)
        {
          v40 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v40, OS_LOG_TYPE_ERROR))
          {
            summary = [(MADAutoAssetStagerParam *)v7 summary];
            *buf = 138543362;
            v54 = summary;
            _os_log_impl(&dword_0, v40, OS_LOG_TYPE_ERROR, "[CATALOG-LOOKUP-ADJUST] job provided jobInformation dropped | eventInfo:%{public}@", buf, 0xCu);
          }
        }
      }
    }
  }

  return v8;
}

- (void)_stagingClientRequestDetermineTrack:(id)track trackingRequest:(id)request forStagingTargetName:(id)name
{
  trackCopy = track;
  requestCopy = request;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13 = [(MADAutoAssetStager *)self _stagingClientRequestDetermineLocate:trackCopy forStagingTargetName:nameCopy];
  if (v13)
  {
    v14 = [(MADAutoAssetStager *)self _stagingClientRequestDetermineClear:trackCopy forStagingTargetName:nameCopy replyingToCleared:1];
  }

  stagingClientDetermineRequests = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
  [stagingClientDetermineRequests setSafeObject:requestCopy forKey:nameCopy];

  v16 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    stagingClientDetermineRequests2 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
    v19 = [stagingClientDetermineRequests2 count];
    summary2 = [requestCopy summary];
    v21 = 138544386;
    v22 = summary;
    v23 = 2114;
    v24 = nameCopy;
    v25 = 2114;
    v26 = trackCopy;
    v27 = 2048;
    v28 = v19;
    v29 = 2114;
    v30 = summary2;
    _os_log_impl(&dword_0, v16, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] | TRACKED++ | DetermineRequests:%ld | determineRequest:%{public}@", &v21, 0x34u);
  }
}

- (id)_stagingClientRequestDetermineLocate:(id)locate forStagingTargetName:(id)name
{
  locateCopy = locate;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagingClientDetermineRequests = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
  v11 = [stagingClientDetermineRequests safeObjectForKey:nameCopy ofClass:objc_opt_class()];

  v12 = _MADLog(@"AutoStager");
  v13 = os_log_type_enabled(v12, OS_LOG_TYPE_DEFAULT);
  if (v11)
  {
    if (!v13)
    {
      goto LABEL_7;
    }

    summary = [(MADAutoAssetStager *)self summary];
    stagingClientDetermineRequests2 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
    v16 = [stagingClientDetermineRequests2 count];
    summary2 = [v11 summary];
    v20 = 138544386;
    v21 = summary;
    v22 = 2114;
    v23 = nameCopy;
    v24 = 2114;
    v25 = locateCopy;
    v26 = 2048;
    v27 = v16;
    v28 = 2114;
    v29 = summary2;
    _os_log_impl(&dword_0, v12, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] | LOCATED | DetermineRequests:%ld | locatedRequest:%{public}@", &v20, 0x34u);
  }

  else
  {
    if (!v13)
    {
      goto LABEL_7;
    }

    summary = [(MADAutoAssetStager *)self summary];
    stagingClientDetermineRequests3 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
    v20 = 138544130;
    v21 = summary;
    v22 = 2114;
    v23 = nameCopy;
    v24 = 2114;
    v25 = locateCopy;
    v26 = 2048;
    v27 = [stagingClientDetermineRequests3 count];
    _os_log_impl(&dword_0, v12, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] | LOCATE-NOT-TRACKED | DetermineRequests:%ld", &v20, 0x2Au);
  }

LABEL_7:

  return v11;
}

- (id)_stagingClientRequestDetermineClear:(id)clear forStagingTargetName:(id)name replyingToCleared:(BOOL)cleared
{
  clearedCopy = cleared;
  clearCopy = clear;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v11 = nameCopy;
  if (v11)
  {
    stagingClientDetermineRequests = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
    v13 = [stagingClientDetermineRequests safeObjectForKey:v11 ofClass:objc_opt_class()];

    v45 = v11;
    if (v13)
    {
      goto LABEL_3;
    }

LABEL_23:
    v13 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v13, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      stagingClientDetermineRequests2 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
      v39 = [stagingClientDetermineRequests2 count];
      *buf = 138544130;
      v51 = summary;
      v52 = 2114;
      v53 = v11;
      v54 = 2114;
      v55 = clearCopy;
      v56 = 2048;
      v57 = v39;
      _os_log_impl(&dword_0, v13, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] | CLEAR-NOT-TRACKED | DetermineRequests:%ld", buf, 0x2Au);
    }

    goto LABEL_25;
  }

  v41 = clearedCopy;
  v48 = 0u;
  v49 = 0u;
  v46 = 0u;
  v47 = 0u;
  stagingClientDetermineRequests3 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
  v21 = [stagingClientDetermineRequests3 countByEnumeratingWithState:&v46 objects:v60 count:16];
  if (v21)
  {
    v22 = v21;
    v45 = 0;
    v13 = 0;
    v23 = *v47;
    v42 = stagingClientDetermineRequests3;
    do
    {
      for (i = 0; i != v22; i = i + 1)
      {
        if (*v47 != v23)
        {
          objc_enumerationMutation(stagingClientDetermineRequests3);
        }

        v25 = *(*(&v46 + 1) + 8 * i);
        stagingClientDetermineRequests4 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
        v27 = [stagingClientDetermineRequests4 safeObjectForKey:v25 ofClass:objc_opt_class()];

        if (v27)
        {
          if (v13)
          {
            v28 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v28, OS_LOG_TYPE_DEFAULT))
            {
              summary2 = [(MADAutoAssetStager *)self summary];
              stagingClientDetermineRequests5 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
              v30 = v22;
              v31 = v23;
              selfCopy = self;
              v33 = v13;
              v34 = [stagingClientDetermineRequests5 count];
              summary3 = [v27 summary];
              *buf = 138544130;
              v51 = summary2;
              v52 = 2114;
              v53 = clearCopy;
              v54 = 2048;
              v55 = v34;
              v13 = v33;
              self = selfCopy;
              v23 = v31;
              v22 = v30;
              v56 = 2114;
              v57 = summary3;
              _os_log_impl(&dword_0, v28, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] | CLEAR-AMBIGUOUS | DetermineRequests:%ld | notConsideredRequest:%{public}@", buf, 0x2Au);

              stagingClientDetermineRequests3 = v42;
            }
          }

          else
          {
            v13 = v27;
            v36 = v25;
            v28 = v45;
            v45 = v36;
          }
        }
      }

      v22 = [stagingClientDetermineRequests3 countByEnumeratingWithState:&v46 objects:v60 count:16];
    }

    while (v22);
  }

  else
  {
    v45 = 0;
    v13 = 0;
  }

  v11 = 0;
  clearedCopy = v41;
  if (!v13)
  {
    goto LABEL_23;
  }

LABEL_3:
  stagingClientDetermineRequests6 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
  [stagingClientDetermineRequests6 removeObjectForKey:v45];

  v15 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v15, OS_LOG_TYPE_DEFAULT))
  {
    summary4 = [(MADAutoAssetStager *)self summary];
    stagingClientDetermineRequests7 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
    v18 = [stagingClientDetermineRequests7 count];
    summary5 = [v13 summary];
    *buf = 138544386;
    v51 = summary4;
    v52 = 2114;
    v53 = v45;
    v54 = 2114;
    v55 = clearCopy;
    v56 = 2048;
    v57 = v18;
    v58 = 2114;
    v59 = summary5;
    _os_log_impl(&dword_0, v15, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] | TRACKED-- | DetermineRequests:%ld | clearedRequest:%{public}@", buf, 0x34u);
  }

  if (clearedCopy)
  {
    [(MADAutoAssetStager *)self _replyNoCandidates:clearCopy replyingToStagingRequest:v13];
LABEL_25:

    v13 = 0;
  }

  return v13;
}

- (void)_stagingClientRequestDetermineClearAll:(id)all
{
  allCopy = all;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v30 = 0u;
  v31 = 0u;
  v28 = 0u;
  v29 = 0u;
  obj = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
  v6 = [obj countByEnumeratingWithState:&v28 objects:v42 count:16];
  if (v6)
  {
    v8 = v6;
    v9 = *v29;
    *&v7 = 138544386;
    v23 = v7;
    v10 = @"received staging-client-request resulting in cancel of all active determine requests";
    selfCopy = self;
    do
    {
      v11 = 0;
      v25 = v8;
      do
      {
        if (*v29 != v9)
        {
          objc_enumerationMutation(obj);
        }

        v12 = *(*(&v28 + 1) + 8 * v11);
        stagingClientDetermineRequests = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
        v14 = [stagingClientDetermineRequests safeObjectForKey:v12 ofClass:objc_opt_class()];

        if (v14)
        {
          v15 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v15, OS_LOG_TYPE_DEFAULT))
          {
            summary = [(MADAutoAssetStager *)self summary];
            stagingClientDetermineRequests2 = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
            v18 = v10;
            v19 = [stagingClientDetermineRequests2 count];
            [v14 summary];
            v21 = v20 = v9;
            *buf = v23;
            v33 = summary;
            v34 = 2114;
            v35 = v12;
            v36 = 2114;
            v37 = allCopy;
            v38 = 2048;
            v39 = v19;
            v10 = v18;
            v40 = 2114;
            v41 = v21;
            _os_log_impl(&dword_0, v15, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DETERMINE)] | CLEARED-ALL | DetermineRequests:%ld | nextClearedRequest:%{public}@", buf, 0x34u);

            v8 = v25;
            v9 = v20;
            self = selfCopy;
          }

          [(MADAutoAssetStager *)self _replyToStagingClient:allCopy replyingToRequest:v14 withErrorCode:6609 withUnderlyingError:0 withDescription:v10];
        }

        v11 = v11 + 1;
      }

      while (v8 != v11);
      v8 = [obj countByEnumeratingWithState:&v28 objects:v42 count:16];
    }

    while (v8);
  }

  v22 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)self setStagingClientDetermineRequests:v22];
}

- (void)_stagingClientRequestDownloadTrack:(id)track trackingRequest:(id)request forStagingTargetName:(id)name
{
  trackCopy = track;
  requestCopy = request;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagingClientDownloadRequest = [(MADAutoAssetStager *)self stagingClientDownloadRequest];
  if (stagingClientDownloadRequest)
  {
    v14 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:trackCopy forStagingTargetName:nameCopy replyingToCleared:1];
  }

  [(MADAutoAssetStager *)self setStagingClientDownloadRequest:requestCopy];
  v15 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v15, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    summary2 = [requestCopy summary];
    v18 = 138544130;
    v19 = summary;
    v20 = 2114;
    v21 = nameCopy;
    v22 = 2114;
    v23 = trackCopy;
    v24 = 2114;
    v25 = summary2;
    _os_log_impl(&dword_0, v15, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DOWNLOAD)] | TRACKED | downloadRequest:%{public}@", &v18, 0x2Au);
  }
}

- (id)_stagingClientRequestDownloadCurrent:(id)current forStagingTargetName:(id)name
{
  currentCopy = current;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagingClientDownloadRequest = [(MADAutoAssetStager *)self stagingClientDownloadRequest];
  v11 = _MADLog(@"AutoStager");
  v12 = os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT);
  if (stagingClientDownloadRequest)
  {
    if (!v12)
    {
      goto LABEL_7;
    }

    summary = [(MADAutoAssetStager *)self summary];
    summary2 = [stagingClientDownloadRequest summary];
    v16 = 138544130;
    v17 = summary;
    v18 = 2114;
    v19 = nameCopy;
    v20 = 2114;
    v21 = currentCopy;
    v22 = 2114;
    v23 = summary2;
    _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DOWNLOAD)] | LOCATED | locatedRequest:%{public}@", &v16, 0x2Au);
  }

  else
  {
    if (!v12)
    {
      goto LABEL_7;
    }

    summary = [(MADAutoAssetStager *)self summary];
    v16 = 138543874;
    v17 = summary;
    v18 = 2114;
    v19 = nameCopy;
    v20 = 2114;
    v21 = currentCopy;
    _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DOWNLOAD)] | LOCATE-NOT-TRACKED", &v16, 0x20u);
  }

LABEL_7:

  return stagingClientDownloadRequest;
}

- (id)_stagingClientRequestDownloadClear:(id)clear forStagingTargetName:(id)name replyingToCleared:(BOOL)cleared
{
  clearedCopy = cleared;
  clearCopy = clear;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagingClientDownloadRequest = [(MADAutoAssetStager *)self stagingClientDownloadRequest];
  if (!stagingClientDownloadRequest)
  {
    v13 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v13, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      v19 = 138543874;
      v20 = summary;
      v21 = 2114;
      v22 = nameCopy;
      v23 = 2114;
      v24 = clearCopy;
      _os_log_impl(&dword_0, v13, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DOWNLOAD)] | CLEAR-NOT-TRACKED", &v19, 0x20u);
    }

    goto LABEL_8;
  }

  v13 = stagingClientDownloadRequest;
  [(MADAutoAssetStager *)self setStagingClientDownloadRequest:0];
  [(MADAutoAssetStager *)self setStagingClientCompleteOnceRequired:0];
  v14 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v14, OS_LOG_TYPE_DEFAULT))
  {
    summary2 = [(MADAutoAssetStager *)self summary];
    summary3 = [v13 summary];
    v19 = 138544130;
    v20 = summary2;
    v21 = 2114;
    v22 = nameCopy;
    v23 = 2114;
    v24 = clearCopy;
    v25 = 2114;
    v26 = summary3;
    _os_log_impl(&dword_0, v14, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} [STAGING-CLIENT-REQUEST(DOWNLOAD)] | CLEARED | clearedRequest:%{public}@", &v19, 0x2Au);
  }

  if (clearedCopy)
  {
    [(MADAutoAssetStager *)self _replyNothingStaged:clearCopy replyingToStagingRequest:v13];
LABEL_8:

    v13 = 0;
  }

  return v13;
}

- (void)_stagingClientRequestDownloadPurged:(id)purged
{
  purgedCopy = purged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    v7 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:purgedCopy replyingToCleared:0];
    if (!v7)
    {
      goto LABEL_6;
    }

    goto LABEL_5;
  }

  _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
  v7 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:purgedCopy forStagingTargetName:_targetNameActiveClient replyingToCleared:0];

  if (v7)
  {
LABEL_5:
    [(MADAutoAssetStager *)self _replyToStagingClient:purgedCopy replyingToRequest:v7 withErrorCode:6609 withUnderlyingError:0 withDescription:@"received staging-client-request to purge when download operation was in progress - download-available-for-staging canceled"];
  }

LABEL_6:
}

- (void)_stagingClientRequestGeneralTrack:(id)track trackingRequest:(id)request
{
  trackCopy = track;
  requestCopy = request;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagingClientRequest = [(MADAutoAssetStager *)self stagingClientRequest];
  if (stagingClientRequest)
  {
    v11 = [(MADAutoAssetStager *)self _stagingClientRequestGeneralClear:trackCopy replyingToCleared:1];
  }

  [(MADAutoAssetStager *)self setStagingClientRequest:requestCopy];
  v12 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v12, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    summary2 = [requestCopy summary];
    v15 = 138543874;
    v16 = summary;
    v17 = 2114;
    v18 = trackCopy;
    v19 = 2114;
    v20 = summary2;
    _os_log_impl(&dword_0, v12, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} [STAGING-CLIENT-REQUEST(GENERAL)] | TRACKED | generalRequest:%{public}@", &v15, 0x20u);
  }
}

- (id)_stagingClientRequestGeneralCurrent:(id)current
{
  currentCopy = current;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagingClientRequest = [(MADAutoAssetStager *)self stagingClientRequest];
  v8 = _MADLog(@"AutoStager");
  v9 = os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT);
  if (stagingClientRequest)
  {
    if (!v9)
    {
      goto LABEL_7;
    }

    summary = [(MADAutoAssetStager *)self summary];
    summary2 = [stagingClientRequest summary];
    v13 = 138543874;
    v14 = summary;
    v15 = 2114;
    v16 = currentCopy;
    v17 = 2114;
    v18 = summary2;
    _os_log_impl(&dword_0, v8, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} [STAGING-CLIENT-REQUEST(GENERAL)] | LOCATED | locatedRequest:%{public}@", &v13, 0x20u);
  }

  else
  {
    if (!v9)
    {
      goto LABEL_7;
    }

    summary = [(MADAutoAssetStager *)self summary];
    v13 = 138543618;
    v14 = summary;
    v15 = 2114;
    v16 = currentCopy;
    _os_log_impl(&dword_0, v8, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} [STAGING-CLIENT-REQUEST(GENERAL)] | LOCATE-NOT-TRACKED", &v13, 0x16u);
  }

LABEL_7:

  return stagingClientRequest;
}

- (id)_stagingClientRequestGeneralClear:(id)clear replyingToCleared:(BOOL)cleared
{
  clearedCopy = cleared;
  clearCopy = clear;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  stagingClientRequest = [(MADAutoAssetStager *)self stagingClientRequest];
  v10 = _MADLog(@"AutoStager");
  v11 = os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT);
  if (stagingClientRequest)
  {
    if (v11)
    {
      summary = [(MADAutoAssetStager *)self summary];
      summary2 = [stagingClientRequest summary];
      v16 = 138543874;
      v17 = summary;
      v18 = 2114;
      v19 = clearCopy;
      v20 = 2114;
      v21 = summary2;
      _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} [STAGING-CLIENT-REQUEST(GENERAL)] | CLEARED | clearedRequest:%{public}@", &v16, 0x20u);
    }

    if (clearedCopy)
    {
      [(MADAutoAssetStager *)self _replyToStagingClient:clearCopy replyingToRequest:stagingClientRequest withErrorCode:6601 withUnderlyingError:0 withDescription:@"staging-client-request has been replaced by more recent request"];

      stagingClientRequest = 0;
    }

    [(MADAutoAssetStager *)self setStagingClientRequest:0];
  }

  else
  {
    if (v11)
    {
      summary3 = [(MADAutoAssetStager *)self summary];
      v16 = 138543618;
      v17 = summary3;
      v18 = 2114;
      v19 = clearCopy;
      _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n{%{public}@} [STAGING-CLIENT-REQUEST(GENERAL)] | CLEAR-NOT-TRACKED", &v16, 0x16u);
    }

    stagingClientRequest = 0;
  }

  return stagingClientRequest;
}

- (void)_logStagingDetails:(id)details forStagingInfo:(id)info
{
  detailsCopy = details;
  infoCopy = info;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (objc_opt_respondsToSelector())
  {
    [infoCopy fullDescription:detailsCopy usingLogger:0];
  }
}

- (void)_logStagingDetails:(id)details forStagedInfo:(id)info
{
  detailsCopy = details;
  infoCopy = info;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (objc_opt_respondsToSelector())
  {
    [infoCopy fullDescription:detailsCopy usingLogger:0];
  }
}

- (void)_updateDescriptor:(id)descriptor withLatestJobStatus:(id)status
{
  descriptorCopy = descriptor;
  statusCopy = status;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  objc_opt_class();
  if ((objc_opt_isKindOfClass() & 1) == 0)
  {
    v10 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v10, OS_LOG_TYPE_ERROR))
    {
      *v15 = 0;
      _os_log_impl(&dword_0, v10, OS_LOG_TYPE_ERROR, "{MADAutoAssetStager-_updateDescriptor} WARNING: wrong class provided as latestStatus", v15, 2u);
    }
  }

  if (statusCopy)
  {
    [descriptorCopy setNeverBeenLocked:{objc_msgSend(statusCopy, "neverBeenLocked")}];
    [descriptorCopy setDownloadUserInitiated:{objc_msgSend(statusCopy, "downloadUserInitiated")}];
    [descriptorCopy setDownloadedNetworkBytes:{objc_msgSend(statusCopy, "downloadedNetworkBytes")}];
    if (![descriptorCopy downloadedNetworkBytes])
    {
      [descriptorCopy setDownloadedNetworkBytes:{objc_msgSend(descriptorCopy, "downloadedFilesystemBytes")}];
    }

    [descriptorCopy setDownloadedFilesystemBytes:{objc_msgSend(statusCopy, "downloadedFilesystemBytes")}];
    patchedFromBaseSelector = [statusCopy patchedFromBaseSelector];
    [descriptorCopy setPatchedFromBaseSelector:patchedFromBaseSelector];

    [descriptorCopy setPatchedFromBaseFilesystemBytes:{objc_msgSend(statusCopy, "patchedFromBaseFilesystemBytes")}];
    [descriptorCopy setPatchingAttempted:{objc_msgSend(statusCopy, "patchingAttempted")}];
    patchingAttemptError = [statusCopy patchingAttemptError];
    [descriptorCopy setPatchingAttemptError:patchingAttemptError];
  }

  [descriptorCopy setStagedPriorToAvailable:1];
  stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
  [descriptorCopy setStagedFromOSVersion:stagingFromOSVersion];

  stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
  [descriptorCopy setStagedFromBuildVersion:stagingFromBuildVersion];
}

- (void)_startDetermineJobForNextCandidate:(id)candidate
{
  candidateCopy = candidate;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  candidateSetConfigurations = [(MADAutoAssetStager *)self candidateSetConfigurations];
  v8 = [candidateSetConfigurations count];

  if (!v8)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    candidateCopy = [[NSString alloc] initWithFormat:@"{%@:_startDetermineJobForNextCandidate} no candidateSetConfigurations", candidateCopy];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:candidateCopy withResult:6108 withError:0];

    goto LABEL_11;
  }

  candidateSetConfigurations2 = [(MADAutoAssetStager *)self candidateSetConfigurations];
  v10 = [candidateSetConfigurations2 objectAtIndex:0];
  [(MADAutoAssetStager *)self setActiveSetJobConfiguration:v10];

  candidateSetConfigurations3 = [(MADAutoAssetStager *)self candidateSetConfigurations];
  [candidateSetConfigurations3 removeObjectAtIndex:0];

  v12 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v12, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    activeSetJobConfiguration = [(MADAutoAssetStager *)self activeSetJobConfiguration];
    summary2 = [activeSetJobConfiguration summary];
    *buf = 138543874;
    v32 = summary;
    v33 = 2114;
    v34 = candidateCopy;
    v35 = 2114;
    v36 = summary2;
    _os_log_impl(&dword_0, v12, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@:_startDetermineJobForNextCandidate} begin determine-if-available | stagerSetConfiguration:%{public}@", buf, 0x20u);
  }

  activeSetJobConfiguration2 = [(MADAutoAssetStager *)self activeSetJobConfiguration];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  [MADAutoAssetControlManager stagerStartSetJobDetermineIfAvailable:activeSetJobConfiguration2 withAssetTargetOSVersion:assetTargetOSVersion withAssetTargetBuildVersion:assetTargetBuildVersion withAssetTargetTrainName:assetTargetTrainName withAssetTargetRestoreVersion:assetTargetRestoreVersion];

  candidateSetConfigurations4 = [(MADAutoAssetStager *)self candidateSetConfigurations];
  if ([candidateSetConfigurations4 count])
  {
    goto LABEL_9;
  }

  v22 = +[MADAutoAssetControlManager preferenceStagerDetermineLastRequiredTimesOut];

  if (v22)
  {
    v23 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v23, OS_LOG_TYPE_ERROR))
    {
      summary3 = [(MADAutoAssetStager *)self summary];
      *buf = 138543618;
      v32 = summary3;
      v33 = 2114;
      v34 = candidateCopy;
      _os_log_impl(&dword_0, v23, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@:_startDetermineJobForNextCandidate} !!!!! SIMULATED TIMEOUT !!!!!", buf, 0x16u);
    }

    candidateSetConfigurations4 = [(MADAutoAssetStager *)self autoStagerFSM];
    v25 = [MADAutoAssetStagerParam alloc];
    determineTimeoutUUID = [(MADAutoAssetStager *)self determineTimeoutUUID];
    v27 = [(MADAutoAssetStagerParam *)v25 initWithTimerUUID:determineTimeoutUUID];
    [candidateSetConfigurations4 postEvent:@"TimerFiredDetermining" withInfo:v27];

LABEL_9:
  }

LABEL_11:
}

- (void)_cancelCurrentJob
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];

  if (activeJobDescriptor)
  {
    activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetId = [activeJobDescriptor2 assetId];
    v7 = [MAAutoAssetSelector alloc];
    activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetType = [activeJobDescriptor3 assetType];
    activeJobDescriptor4 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetSpecifier = [activeJobDescriptor4 assetSpecifier];
    activeJobDescriptor5 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetVersion = [activeJobDescriptor5 assetVersion];
    v14 = [v7 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];
    assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
    assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    [MADAutoAssetHistory recordOperation:804 toHistoryType:4 fromLayer:4 forAssetID:assetId withSelector:v14 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];
  }

  else
  {
    v17 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v17, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
      *buf = 138543618;
      v22 = summary;
      v23 = 2114;
      v24 = _targetNameActive;
      _os_log_impl(&dword_0, v17, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {_cancelCurrentJob} cancel when no active-job-descriptor (determining)", buf, 0x16u);
    }
  }

  +[MADAutoAssetControlManager stagerCancelCurrentJob];
}

- (void)_clearBeforeDetermineAvailable:(id)available removingDetermined:(BOOL)determined
{
  determinedCopy = determined;
  availableCopy = available;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  availableCopy = [[NSString alloc] initWithFormat:@"%@:_clearBeforeDetermineAvailable", availableCopy];
  activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];

  if (activeJobDescriptor)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v12 = [NSString alloc];
    activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
    summary = [activeJobDescriptor2 summary];
    v15 = [v12 initWithFormat:@"{%@} stale activeJobDescriptor:%@", availableCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v15 withResult:6108 withError:0];

    [(MADAutoAssetStager *)self setActiveJobDescriptor:0];
  }

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:availableCopy alsoPerformingPurgeAll:1 removingDetermined:determinedCopy];
    [(MADAutoAssetStager *)self _removeAllStagedContent:availableCopy];
    [(MADAutoAssetStager *)self _persistRemoveAll:availableCopy message:@"removed all persisted-state (before determining all available for staging)" removingDetermined:determinedCopy loggingConfig:1];
  }
}

- (void)_clearRemoveByGroupTargets:(id)targets removingDetermined:(BOOL)determined
{
  determinedCopy = determined;
  targetsCopy = targets;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  targetsCopy = [[NSString alloc] initWithFormat:@"%@:_clearRemoveByGroupTargets", targetsCopy];
  [(MADAutoAssetStager *)self _clearAllTrackingOfActiveOperations:targetsCopy alsoPerformingPurgeAll:1 removingDetermined:determinedCopy];
  [(MADAutoAssetStager *)self _removeAllStagedContent:targetsCopy];
  [(MADAutoAssetStager *)self _persistRemoveAll:targetsCopy message:@"removed all persisted-state (removing by-group targets)" removingDetermined:determinedCopy loggingConfig:1];
}

- (void)_clearAllTrackingOfActiveOperations:(id)operations alsoPerformingPurgeAll:(BOOL)all removingDetermined:(BOOL)determined
{
  determinedCopy = determined;
  allCopy = all;
  operationsCopy = operations;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  operationsCopy = [[NSString alloc] initWithFormat:@"%@:_clearAllTrackingOfActiveOperations", operationsCopy];
  if (determinedCopy)
  {
    [(MADAutoAssetStager *)self _stagingClientRequestDetermineClearAll:operationsCopy];
  }

  _targetNameActiveClient = [(MADAutoAssetStager *)self _targetNameActiveClient];
  v13 = [(MADAutoAssetStager *)self _stagingClientRequestDownloadClear:operationsCopy forStagingTargetName:_targetNameActiveClient replyingToCleared:1];

  v14 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)self setDeterminingBySelector:v14];

  v15 = objc_alloc_init(NSMutableArray);
  [(MADAutoAssetStager *)self setAwaitingStagingAttempt:v15];

  if (!allCopy)
  {
    if (!determinedCopy)
    {
      if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
      {
        goto LABEL_16;
      }

      goto LABEL_21;
    }

    goto LABEL_8;
  }

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups]|| determinedCopy)
  {
LABEL_8:
    v16 = objc_alloc_init(NSMutableArray);
    [(MADAutoAssetStager *)self setCandidatesForStaging:v16];

    v17 = objc_alloc_init(NSMutableArray);
    [(MADAutoAssetStager *)self setCandidateSetConfigurations:v17];

    v18 = objc_alloc_init(NSMutableDictionary);
    [(MADAutoAssetStager *)self setSetLookupResults:v18];

    v19 = objc_alloc_init(NSMutableArray);
    [(MADAutoAssetStager *)self setAvailableForStaging:v19];

    [(MADAutoAssetStager *)self setOverallStagedTotalExpectedBytes:0];
  }

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    if (determinedCopy)
    {
      v20 = objc_alloc_init(NSMutableDictionary);
      [(MADAutoAssetStager *)self setCandidatesForStagingRequiredByTarget:v20];

      v21 = objc_alloc_init(NSMutableDictionary);
      [(MADAutoAssetStager *)self setCandidatesForStagingOptionalByTarget:v21];

      v22 = objc_alloc_init(NSMutableDictionary);
      [(MADAutoAssetStager *)self setCandidateSetConfigurationsRequiredByTarget:v22];

      v23 = objc_alloc_init(NSMutableDictionary);
      [(MADAutoAssetStager *)self setCandidateSetConfigurationsOptionalByTarget:v23];

      [(MADAutoAssetStager *)self setAssetTargetGroupNames:0];
      [(MADAutoAssetStager *)self setActiveTargetUpdateAttributes:0];
      v24 = objc_alloc_init(NSCache);
      [(MADAutoAssetStager *)self setTargetLookupResults:v24];

      [(MADAutoAssetStager *)self setOptionalAssetSizeAllowed:&off_4F7790];
      v25 = objc_alloc_init(NSMutableDictionary);
      [(MADAutoAssetStager *)self setAvailableForStagingRequiredByTarget:v25];

      v26 = objc_alloc_init(NSMutableDictionary);
      [(MADAutoAssetStager *)self setAvailableForStagingOptionalByTarget:v26];

      v27 = objc_alloc_init(NSMutableArray);
      [(MADAutoAssetStager *)self setAvailableForStaging:v27];

      v28 = objc_alloc_init(NSMutableArray);
      [(MADAutoAssetStager *)self setAwaitingStagingAttempt:v28];

      persistedState = [(MADAutoAssetStager *)self persistedState];
      persistedConfig = [persistedState persistedConfig];
      [persistedConfig persistULL:0 forKey:@"determinedAvailableAssetCount" shouldPersist:0];

      v31 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v31, OS_LOG_TYPE_DEFAULT))
      {
        goto LABEL_22;
      }

      v32 = @"N";
      *buf = 138543874;
      v44 = operationsCopy;
      v45 = 2114;
      if (allCopy)
      {
        v32 = @"Y";
      }

      v46 = v32;
      v47 = 2114;
      v48 = @"Y";
      v33 = "{%{public}@} [GROUP-MODE] removed tracking of all previously determined targets | alsoPerformPurgeAll:%{public}@ removeDetermined:%{public}@";
LABEL_20:
      _os_log_impl(&dword_0, v31, OS_LOG_TYPE_DEFAULT, v33, buf, 0x20u);
      goto LABEL_22;
    }

LABEL_16:
    v31 = _MADLog(@"AutoStager");
    if (!os_log_type_enabled(v31, OS_LOG_TYPE_DEFAULT))
    {
      goto LABEL_22;
    }

    v34 = @"Y";
    *buf = 138543874;
    v44 = operationsCopy;
    v45 = 2114;
    if (!allCopy)
    {
      v34 = @"N";
    }

    v46 = v34;
    v47 = 2114;
    v48 = @"N";
    v33 = "{%{public}@} [GROUP-MODE] preserved tracking of all previously determined targets | alsoPerformPurgeAll:%{public}@ removeDetermined:%{public}@";
    goto LABEL_20;
  }

LABEL_21:
  persistedState2 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig2 = [persistedState2 persistedConfig];
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  [persistedConfig2 persistULL:objc_msgSend(availableForStaging forKey:"count") shouldPersist:{@"determinedAvailableAssetCount", 1}];

  v38 = objc_alloc_init(NSMutableArray);
  [(MADAutoAssetStager *)self setAvailableForStaging:v38];

  v31 = objc_alloc_init(NSMutableArray);
  [(MADAutoAssetStager *)self setAwaitingStagingAttempt:v31];
LABEL_22:

  if (allCopy)
  {
    if (![(MADAutoAssetStager *)self stagingClientUsingGroups])
    {
      [(MADAutoAssetStager *)self setStagingClientChosen:0];
      [(MADAutoAssetStager *)self setStagingClientUsingGroups:0];
      persistedState3 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig3 = [persistedState3 persistedConfig];
      [persistedConfig3 persistBoolean:-[MADAutoAssetStager stagingClientUsingGroups](self forKey:"stagingClientUsingGroups") shouldPersist:{@"modeByGroups", 1}];

      [(MADAutoAssetStager *)self setDetermineTimeoutUUID:@"NONE"];
    }

    [(MADAutoAssetStager *)self setStagingClientCompleteOnceRequired:0];
    [(MADAutoAssetStager *)self _removeAllStagedContent:operationsCopy];
    [(MADAutoAssetStager *)self _persistRemoveAll:operationsCopy message:@"removed all persisted-state (cleared all tracking and performed purge all)" removingDetermined:determinedCopy loggingConfig:1];
    v41 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v41, OS_LOG_TYPE_DEFAULT))
    {
      v42 = @"N";
      *buf = 138543874;
      v44 = operationsCopy;
      v45 = 2114;
      if (determinedCopy)
      {
        v42 = @"Y";
      }

      v46 = @"Y";
      v47 = 2114;
      v48 = v42;
      _os_log_impl(&dword_0, v41, OS_LOG_TYPE_DEFAULT, "{%{public}@} purged all previously staged content | alsoPerformPurgeAll:%{public}@ removeDetermined:%{public}@", buf, 0x20u);
    }
  }

  [(MADAutoAssetStager *)self _acknowlegdeAndClearAllEliminations];
}

- (void)_acknowlegdeAndClearAllEliminations
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v20 = 0u;
  v21 = 0u;
  v18 = 0u;
  v19 = 0u;
  eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
  v6 = [eliminationSelectors countByEnumeratingWithState:&v18 objects:v22 count:16];
  if (v6)
  {
    v7 = v6;
    v8 = *v19;
    do
    {
      v9 = 0;
      do
      {
        if (*v19 != v8)
        {
          objc_enumerationMutation(eliminationSelectors);
        }

        v10 = *(*(&v18 + 1) + 8 * v9);
        v11 = objc_autoreleasePoolPush();
        eliminationSelectors2 = [(MADAutoAssetStager *)self eliminationSelectors];
        v13 = [eliminationSelectors2 safeObjectForKey:v10 ofClass:objc_opt_class()];

        assetType = [v13 assetType];
        v15 = [(MADAutoAssetStager *)self _isAssetTypeManagedAsSet:assetType];

        if ((v15 & 1) == 0)
        {
          [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"_acknowlegdeAndClearAllEliminations" forAssetSelector:v13];
        }

        objc_autoreleasePoolPop(v11);
        v9 = v9 + 1;
      }

      while (v7 != v9);
      v7 = [eliminationSelectors countByEnumeratingWithState:&v18 objects:v22 count:16];
    }

    while (v7);
  }

  v16 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)self setEliminationSelectors:v16];

  v17 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)self setEliminationSelectorsAcknowledged:v17];
}

- (void)_setupAwaitingStagingAndBeginFirstDownload
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
  v6 = objc_alloc_init(NSMutableArray);
  [(MADAutoAssetStager *)self setAwaitingStagingAttempt:v6];

  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  [persistedConfig persistULL:0 forKey:@"awaitingStagingAssetCount" shouldPersist:0];

  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v10 = [availableForStaging count];

  if (!v10)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:@"{_setupAwaitingStagingAndBeginFirstDownload} no auto-assets available for staging" withResult:6111 withError:0];

    v11 = [MAAutoAssetError buildError:6110 fromOperation:@"AUTO-CONTROL(_setupAwaitingStagingAndBeginFirstDownload)" underlyingError:0 withDescription:@"in state where should have availableforStaging yet have none"];
    v22 = [[MADAutoAssetStagerParam alloc] initWithJobInformation:0 withDownloadedDescriptor:0 withOperationError:v11];
    autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
    [autoStagerFSM3 postEvent:@"JobDownloadForStagingFailure" withInfo:v22];

    goto LABEL_42;
  }

  v11 = objc_alloc_init(NSMutableDictionary);
  v95 = 0u;
  v96 = 0u;
  v97 = 0u;
  v98 = 0u;
  availableForStaging2 = [(MADAutoAssetStager *)self availableForStaging];
  v13 = [availableForStaging2 countByEnumeratingWithState:&v95 objects:v107 count:16];
  if (v13)
  {
    v14 = v13;
    v15 = 0;
    v16 = *v96;
    do
    {
      for (i = 0; i != v14; i = i + 1)
      {
        if (*v96 != v16)
        {
          objc_enumerationMutation(availableForStaging2);
        }

        v18 = *(*(&v95 + 1) + 8 * i);
        if (v18)
        {
          awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
          [awaitingStagingAttempt addObject:v18];

          [(MADAutoAssetStager *)self trackSelectorForDescriptor:v18 inContainer:v11];
        }

        else
        {
          ++v15;
        }
      }

      v14 = [availableForStaging2 countByEnumeratingWithState:&v95 objects:v107 count:16];
    }

    while (v14);
  }

  else
  {
    v15 = 0;
  }

  v24 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v24, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    awaitingStagingAttempt2 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    v27 = [awaitingStagingAttempt2 count];
    v28 = [(MADAutoAssetStager *)self selectorContainerAsString:v11];
    *buf = 138544130;
    v100 = summary;
    v101 = 2048;
    v102 = v27;
    v103 = 2048;
    v104 = v15;
    v105 = 2114;
    v106 = v28;
    _os_log_impl(&dword_0, v24, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_setupAwaitingStagingAndBeginFirstDownload} awaiting download attempt awaitingStagingAttempt:%ld | nilDescriptor:%ld\n>>> awaitingStaging:%{public}@", buf, 0x2Au);
  }

  [(MADAutoAssetStager *)self _logMilestoneFromLocation:@"_setupAwaitingStagingAndBeginFirstDownload" resultingInEvent:0 forMilestoneActivity:@"beginning to download for staging"];
  awaitingStagingAttempt3 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v30 = [awaitingStagingAttempt3 count];

  if (!v30 || (-[MADAutoAssetStager awaitingStagingAttempt](self, "awaitingStagingAttempt"), v31 = objc_claimAutoreleasedReturnValue(), [v31 objectAtIndex:0], v22 = objc_claimAutoreleasedReturnValue(), v31, !v22))
  {
    autoStagerFSM4 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag2 = [autoStagerFSM4 diag];
    [diag2 trackAnomaly:@"AUTO-STAGER" forReason:@"{_setupAwaitingStagingAndBeginFirstDownload} unable to build awaitingStagingAttempt array" withResult:6111 withError:0];

    v22 = [MAAutoAssetError buildError:6110 fromOperation:@"AUTO-CONTROL(_setupAwaitingStagingAndBeginFirstDownload)" underlyingError:0 withDescription:@"unable to build awaitingStagingAttempt array"];
    v40 = [[MADAutoAssetStagerParam alloc] initWithJobInformation:0 withDownloadedDescriptor:0 withOperationError:v22];
    v53 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v53, OS_LOG_TYPE_ERROR))
    {
      summary2 = [(MADAutoAssetStager *)self summary];
      awaitingStagingAttempt4 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
      v56 = [awaitingStagingAttempt4 count];
      *buf = 138543618;
      v100 = summary2;
      v101 = 2048;
      v102 = v56;
      _os_log_impl(&dword_0, v53, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_setupAwaitingStagingAndBeginFirstDownload} cleared awaiting staging (unable to locate first descriptor when awaitingStagingAttempt count:%ld)", buf, 0x16u);
    }

    v57 = objc_alloc_init(NSMutableArray);
    [(MADAutoAssetStager *)self setAwaitingStagingAttempt:v57];

    persistedState2 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig2 = [persistedState2 persistedConfig];
    awaitingStagingAttempt5 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    [persistedConfig2 persistULL:objc_msgSend(awaitingStagingAttempt5 forKey:"count") shouldPersist:{@"awaitingStagingAssetCount", 0}];

    autoStagerFSM5 = [(MADAutoAssetStager *)self autoStagerFSM];
    [autoStagerFSM5 postEvent:@"JobDownloadForStagingFailure" withInfo:v40];
    goto LABEL_41;
  }

  awaitingStagingAttempt6 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  [awaitingStagingAttempt6 removeObjectAtIndex:0];

  persistedState3 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig3 = [persistedState3 persistedConfig];
  awaitingStagingAttempt7 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  [persistedConfig3 persistULL:objc_msgSend(awaitingStagingAttempt7 forKey:"count") shouldPersist:{@"awaitingStagingAssetCount", 0}];

  [(MADAutoAssetStager *)self setActiveJobDescriptor:v22];
  v36 = [MAAutoAssetSelector alloc];
  assetType = [(MADAutoAssetStagerParam *)v22 assetType];
  assetSpecifier = [(MADAutoAssetStagerParam *)v22 assetSpecifier];
  assetVersion = [(MADAutoAssetStagerParam *)v22 assetVersion];
  v40 = [v36 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
    assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    setLookupResults2 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

    v44 = [(MADAutoAssetStager *)self getTargetLookupResultsForKey:setLookupResults2];
    assetType4 = v44;
    if (v44)
    {
      v92 = v40;
      setLookupResults = [v44 setLookupResults];
      activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
      assetType2 = [activeJobDescriptor assetType];
      autoStagerFSM7 = [setLookupResults safeObjectForKey:assetType2 ofClass:objc_opt_class()];

      if (autoStagerFSM7)
      {
        autoStagerFSM5 = [autoStagerFSM7 autoAssetSetCatalog];
      }

      else
      {
        autoStagerFSM6 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag3 = [autoStagerFSM6 diag];
        v63 = [NSString alloc];
        activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
        assetType3 = [activeJobDescriptor2 assetType];
        summary3 = [assetType4 summary];
        v66 = [v63 initWithFormat:@"{_setupAwaitingStagingAndBeginFirstDownload} no set-lookup-result for asset-type | assetType:%@ | trainTargetLookupResults:%@", assetType3, summary3];
        [diag3 trackAnomaly:@"AUTO-STAGER" forReason:v66 withResult:6111 withError:0];

        autoStagerFSM5 = 0;
      }

      p_weak_ivar_lyt = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
      v40 = v92;
    }

    else
    {
      autoStagerFSM7 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag4 = [autoStagerFSM7 diag];
      [diag4 trackAnomaly:@"AUTO-STAGER" forReason:@"{_setupAwaitingStagingAndBeginFirstDownload} no lookup-results for target" withResult:6111 withError:0];

      autoStagerFSM5 = 0;
    }
  }

  else
  {
    setLookupResults2 = [(MADAutoAssetStager *)self setLookupResults];
    assetType4 = [(MADAutoAssetStagerParam *)v22 assetType];
    autoStagerFSM5 = [setLookupResults2 safeObjectForKey:assetType4 ofClass:objc_opt_class()];
  }

  assetType5 = [(MADAutoAssetStagerParam *)v22 assetType];
  assetSpecifier2 = [(MADAutoAssetStagerParam *)v22 assetSpecifier];
  v69 = [(MADAutoAssetStager *)self newAssetMetadataFromAssetCatalog:autoStagerFSM5 forAssetype:assetType5 forAssetSpecifier:assetSpecifier2];

  if (+[MADAutoAssetControlManager preferenceStagerDownloadFirstNotInCatalog]&& ![(MADAutoAssetStager *)self firstDownloadedAsIfNotInCatalog])
  {
    v75 = 1;
    [(MADAutoAssetStager *)self setFirstDownloadedAsIfNotInCatalog:1];

    goto LABEL_37;
  }

  if (!v69)
  {
    v75 = 0;
LABEL_37:
    v69 = [MAAutoAssetError buildError:6613 fromOperation:@"AUTO-CONTROL(_setupAwaitingStagingAndBeginFirstDownload)" underlyingError:0 withDescription:@"unable to build awaitingStagingAttempt array"];
    activeSetJobConfiguration = [[MADAutoAssetStagerParam alloc] initWithJobInformation:0 withDownloadedDescriptor:0 withOperationError:v69];
    if ((v75 & 1) == 0)
    {
      autoStagerFSM8 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag5 = [autoStagerFSM8 diag];
      v77 = [NSString alloc];
      activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
      [activeJobDescriptor3 summary];
      v94 = v22;
      v79 = activeSetJobConfiguration;
      v80 = v69;
      v82 = v81 = v40;
      v83 = [v77 initWithFormat:@"{_setupAwaitingStagingAndBeginFirstDownload} unable to locate entry in set-look-results - skipping asset | stagingDescriptor:%@", v82];
      [diag5 trackAnomaly:@"AUTO-STAGER" forReason:v83 withResult:6111 withError:0];

      p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
      v40 = v81;
      v69 = v80;
      activeSetJobConfiguration = v79;
      v22 = v94;
    }

    autoStagerFSM9 = [(MADAutoAssetStager *)self autoStagerFSM];
    [autoStagerFSM9 postEvent:@"JobDownloadForStagingFailure" withInfo:activeSetJobConfiguration];
    goto LABEL_40;
  }

  [(MADAutoAssetStager *)self _persistDescriptor:@"_setupAwaitingStagingAndBeginFirstDownload" operation:@"ENTRY_MODIFY" persistingDescriptor:v22 withRepresentation:602 message:@"create awaitingStagingAttempt array from availableForStaging"];
  activeSetJobConfiguration = [(MADAutoAssetStager *)self activeSetJobConfiguration];
  autoStagerFSM9 = [(MADAutoAssetStager *)self baseForPatchingToSelector:v40];
  [(MADAutoAssetStager *)self assetTargetOSVersion];
  v93 = v22;
  v73 = v72 = p_weak_ivar_lyt;
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [MADAutoAssetControlManager stagerStartJobDownloadForStaging:v40 withStagerSetConfiguration:activeSetJobConfiguration usingCachedAutoAssetCatalog:v69 usingBaseForPatching:autoStagerFSM9 withAssetTargetOSVersion:v73 withAssetTargetBuildVersion:assetTargetBuildVersion];

  p_weak_ivar_lyt = v72;
  v22 = v93;
LABEL_40:

LABEL_41:
LABEL_42:

  v84 = objc_alloc_init(p_weak_ivar_lyt[228]);
  [(MADAutoAssetStager *)self setAvailableForStaging:v84];

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    persistedState4 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig4 = [persistedState4 persistedConfig];
    [persistedConfig4 persistULL:0 forKey:@"determinedAvailableAssetCount"];
  }

  persistedState5 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig5 = [persistedState5 persistedConfig];
  [persistedConfig5 persistState];

  [(MADAutoAssetStager *)self _logPersistedConfigSet:@"_setupAwaitingStagingAndBeginFirstDownload" message:@"created awaitingStagingAttempt array from availableForStaging"];
}

- (void)_removeAllStagedContent:(id)content
{
  contentCopy = content;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v24 = contentCopy;
  contentCopy = [[NSString alloc] initWithFormat:@"%@:_removeAllStagedContent", contentCopy];
  v7 = objc_alloc_init(NSMutableArray);
  v27 = 0u;
  v28 = 0u;
  v29 = 0u;
  v30 = 0u;
  obj = [(MADAutoAssetStager *)self successfullyStaged];
  v8 = [obj countByEnumeratingWithState:&v27 objects:v31 count:16];
  if (v8)
  {
    v9 = v8;
    v10 = *v28;
    do
    {
      for (i = 0; i != v9; i = i + 1)
      {
        if (*v28 != v10)
        {
          objc_enumerationMutation(obj);
        }

        v12 = *(*(&v27 + 1) + 8 * i);
        v13 = objc_autoreleasePoolPush();
        successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
        v15 = [successfullyStaged safeObjectForKey:v12 ofClass:objc_opt_class()];

        if (v15)
        {
          v16 = v7;
          [v7 addObject:v15];
          isPatch = [v15 isPatch];
          statisticsUnstaged = [(MADAutoAssetStager *)self statisticsUnstaged];
          v19 = statisticsUnstaged;
          if (isPatch)
          {
            [statisticsUnstaged setPatchedAssets:{objc_msgSend(statisticsUnstaged, "patchedAssets") + 1}];

            statisticsUnstaged2 = [(MADAutoAssetStager *)self statisticsUnstaged];
            metadata = [v15 metadata];
            [statisticsUnstaged2 setPatchedBytes:{objc_msgSend(metadata, "safeIntegerForKey:", @"_UnarchivedSize", "patchedBytes")}];
            v22 = @"removed previously staged auto-asset (patch)";
          }

          else
          {
            [statisticsUnstaged setFullAssets:{objc_msgSend(statisticsUnstaged, "fullAssets") + 1}];

            statisticsUnstaged2 = [(MADAutoAssetStager *)self statisticsUnstaged];
            metadata = [v15 metadata];
            [statisticsUnstaged2 setFullBytes:{objc_msgSend(metadata, "safeIntegerForKey:", @"_UnarchivedSize", "fullBytes")}];
            v22 = @"removed previously staged auto-asset (full)";
          }

          [(MADAutoAssetStager *)self _logPersistedRemovedEntry:contentCopy removedDescriptor:v15 message:v22];
          v7 = v16;
        }

        objc_autoreleasePoolPop(v13);
      }

      v9 = [obj countByEnumeratingWithState:&v27 objects:v31 count:16];
    }

    while (v9);
  }

  v23 = objc_alloc_init(NSMutableDictionary);
  [(MADAutoAssetStager *)self setSuccessfullyStaged:v23];

  [(MADAutoAssetStager *)self setOverallStagedTotalExpectedBytes:0];
  [(MADAutoAssetStager *)self setOverallStagedDownloadedSoFarBytes:0];
  [(MADAutoAssetStager *)self setCurrentStagedLastWrittenBytes:0];
  if ([v7 count])
  {
    [MADAutoAssetControlManager stagerPurgeStagedContent:v7];
  }
}

- (void)_removeStagedAssetFromFilesystem:(id)filesystem forHistoryOperation:(int64_t)operation
{
  filesystemCopy = filesystem;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v9 = [MADAutoAssetControlManager localAssetURLForDescriptor:filesystemCopy fromLocation:@"_removeStagedAssetFromFilesystem"];
  v10 = +[NSFileManager defaultManager];
  v11 = v10;
  if (!v9)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v25 = [NSString alloc];
    summary = [filesystemCopy summary];
    v27 = [v25 initWithFormat:@"{_removeStagedAssetFromFilesystem} unable to determine local URL for stagedDescriptor:%@", summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v27 withResult:6101 withError:0];

    goto LABEL_9;
  }

  if (![v10 fileExistsAtPath:v9])
  {
    autoStagerFSM2 = _MADLog(@"AutoStager");
    if (!os_log_type_enabled(autoStagerFSM2, OS_LOG_TYPE_ERROR))
    {
LABEL_10:

      goto LABEL_23;
    }

    diag = [(MADAutoAssetStager *)self summary];
    summary2 = [filesystemCopy summary];
    *buf = 138543874;
    v55 = diag;
    v56 = 2114;
    v57 = summary2;
    v58 = 2114;
    v59 = v9;
    _os_log_impl(&dword_0, autoStagerFSM2, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_removeStagedAssetFromFilesystem} not on filesystem for stagedDescriptor:%{public}@ | localContentURL:%{public}@", buf, 0x20u);

LABEL_9:
    goto LABEL_10;
  }

  v12 = [[NSURL alloc] initFileURLWithPath:v9];
  v13 = getControlManager();
  v50 = [v13 getSAFRegistrationBundleID:v12];

  v14 = [MAAutoAssetSelector alloc];
  assetType = [filesystemCopy assetType];
  assetSpecifier = [filesystemCopy assetSpecifier];
  assetVersion = [filesystemCopy assetVersion];
  v52 = [v14 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  v53 = 0;
  v18 = renameWithExtThenRemoveExposeError(v9, @".purged", &v53);
  v51 = v53;
  if (v51)
  {
    v19 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v19, OS_LOG_TYPE_ERROR))
    {
      summary3 = [(MADAutoAssetStager *)self summary];
      summary4 = [filesystemCopy summary];
      v22 = [MADAutoAssetClientRequest responseErrorSummary:v51];
      *buf = 138544386;
      v55 = summary3;
      v56 = 2114;
      v57 = summary4;
      v58 = 2114;
      v59 = v9;
      v60 = 2114;
      v61 = v22;
      v62 = 2114;
      v63 = v51;
      _os_log_impl(&dword_0, v19, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_removeStagedAssetFromFilesystem} failed to remove stagedDescriptor:%{public}@ | localContentURL:%{public}@ | error:%{public}@\n%{public}@", buf, 0x34u);
    }
  }

  else
  {
    v19 = _MADLog(@"AutoStager");
    v29 = os_log_type_enabled(v19, OS_LOG_TYPE_DEFAULT);
    if (v18)
    {
      if (v29)
      {
        summary5 = [(MADAutoAssetStager *)self summary];
        summary6 = [filesystemCopy summary];
        *buf = 138543874;
        v55 = summary5;
        v56 = 2114;
        v57 = summary6;
        v58 = 2114;
        v59 = v9;
        _os_log_impl(&dword_0, v19, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_removeStagedAssetFromFilesystem} asset directory does not exist - stagedDescriptor:%{public}@ | localContentURL:%{public}@", buf, 0x20u);
      }
    }

    else
    {
      if (v29)
      {
        summary7 = [(MADAutoAssetStager *)self summary];
        summary8 = [filesystemCopy summary];
        *buf = 138543874;
        v55 = summary7;
        v56 = 2114;
        v57 = summary8;
        v58 = 2114;
        v59 = v9;
        _os_log_impl(&dword_0, v19, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_removeStagedAssetFromFilesystem} successfully removed stagedDescriptor:%{public}@ | localContentURL:%{public}@", buf, 0x20u);
      }

      v19 = getControlManager();
      [v19 updateSpaceAttributionForBundleID:v50 assetPath:v12 doRegistration:0];
    }
  }

  if (operation == 404)
  {
    v34 = 5;
  }

  else
  {
    v34 = 4;
  }

  assetId = [filesystemCopy assetId];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  v38 = v34;
  v39 = v52;
  [MADAutoAssetHistory recordOperation:operation toHistoryType:0 fromLayer:v38 forAssetID:assetId withSelector:v52 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

  if (+[MAAIRBEventReporter isAvailable])
  {
    v40 = [MAAIRBMobileAssetOperationMetadata alloc];
    v41 = [MADAutoAssetHistoryTracker operationName:operation];
    v42 = [(MAAIRBMobileAssetOperationMetadata *)v40 initWithCode:operation name:v41];

    v43 = [MAAIRBMobileAssetAssetSelector alloc];
    assetType2 = [v52 assetType];
    assetSpecifier2 = [v52 assetSpecifier];
    assetVersion2 = [v52 assetVersion];
    v47 = [(MAAIRBMobileAssetAssetSelector *)v43 initWithAssetType:assetType2 assetSpecifier:assetSpecifier2 assetVersion:assetVersion2];

    v48 = [MAAIRBAppleIntelligenceAssetDeliveryEventType typeAssetUpdate:v42 assetSelector:v47];
    v49 = [[MAAIRBAppleIntelligenceAssetDeliveryEvent alloc] initWithErrors:&__NSArray0__struct type:v48];
    [MAAIRBEventReporter emitAppleIntelligenceEndEvent:v49];

    v39 = v52;
  }

LABEL_23:
}

- (void)_maintainLatestCandidate:(id)candidate candidateDescriptor:(id)descriptor
{
  candidateCopy = candidate;
  descriptorCopy = descriptor;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (!descriptorCopy)
  {
    v24 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v24, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      *buf = 138543362;
      v53 = summary;
      _os_log_impl(&dword_0, v24, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_maintainLatestCandidate} nil candidateDescriptor provided by caller", buf, 0xCu);

      descriptorCopy = 0;
    }

    goto LABEL_19;
  }

  if (![descriptorCopy preSoftwareUpdateAssetStaging])
  {
    v24 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v24, OS_LOG_TYPE_DEFAULT))
    {
      summary2 = [(MADAutoAssetStager *)self summary];
      [descriptorCopy summary];
      v28 = v27 = descriptorCopy;
      *buf = 138543618;
      v53 = summary2;
      v54 = 2114;
      v55 = v28;
      _os_log_impl(&dword_0, v24, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_maintainLatestCandidate} not considering (not preSoftwareUpdateAssetStaging) | descriptor:%{public}@", buf, 0x16u);

      descriptorCopy = v27;
    }

LABEL_19:

    goto LABEL_31;
  }

  selfCopy = self;
  v45 = candidateCopy;
  v50 = 0u;
  v51 = 0u;
  v48 = 0u;
  v49 = 0u;
  obj = candidateCopy;
  v10 = [obj countByEnumeratingWithState:&v48 objects:v58 count:16];
  if (v10)
  {
    v11 = v10;
    v47 = *v49;
    p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
LABEL_5:
    v13 = 0;
    while (1)
    {
      if (*v49 != v47)
      {
        objc_enumerationMutation(obj);
      }

      v14 = *(*(&v48 + 1) + 8 * v13);
      v15 = objc_autoreleasePoolPush();
      v16 = p_weak_ivar_lyt[223];
      assetType = [descriptorCopy assetType];
      assetType2 = [v14 assetType];
      if ([v16 stringIsEqual:assetType to:assetType2])
      {
        v19 = p_weak_ivar_lyt[223];
        [descriptorCopy assetSpecifier];
        v21 = v20 = v15;
        [v14 assetSpecifier];
        v23 = v22 = descriptorCopy;
        LODWORD(v19) = [v19 stringIsEqual:v21 to:v23];

        descriptorCopy = v22;
        v15 = v20;

        if (v19)
        {
          v29 = [SUCoreRestoreVersion alloc];
          assetVersion = [v22 assetVersion];
          v31 = [v29 initWithRestoreVersion:assetVersion];

          v32 = [SUCoreRestoreVersion alloc];
          assetVersion2 = [v14 assetVersion];
          v34 = [v32 initWithRestoreVersion:assetVersion2];

          if ([v31 isComparable:v34])
          {
            descriptorCopy = v22;
            v36 = v20;
            if ([v31 compare:v34] == &dword_0 + 1)
            {
              v37 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v37, OS_LOG_TYPE_DEFAULT))
              {
                summary3 = [(MADAutoAssetStager *)selfCopy summary];
                summary4 = [v22 summary];
                *buf = 138543618;
                v53 = summary3;
                v54 = 2114;
                v55 = summary4;
                _os_log_impl(&dword_0, v37, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_maintainLatestCandidate} best candidate so far | descriptor:%{public}@", buf, 0x16u);

                descriptorCopy = v22;
                v36 = v20;
              }

              objc_autoreleasePoolPop(v36);
              break;
            }
          }

          else
          {
            v40 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v40, OS_LOG_TYPE_ERROR))
            {
              summary5 = [(MADAutoAssetStager *)selfCopy summary];
              summary6 = [v22 summary];
              summary7 = [v14 summary];
              *buf = 138543874;
              v53 = summary5;
              v54 = 2114;
              v55 = summary6;
              v56 = 2112;
              v57 = summary7;
              _os_log_impl(&dword_0, v40, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_maintainLatestCandidate} versions not comparable (keeping already encountered) | descriptor:%{public}@, already:%@", buf, 0x20u);
            }

            descriptorCopy = v22;
            v36 = v20;
          }

          objc_autoreleasePoolPop(v36);
          goto LABEL_30;
        }
      }

      else
      {
      }

      objc_autoreleasePoolPop(v15);
      v13 = v13 + 1;
      p_weak_ivar_lyt = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
      if (v11 == v13)
      {
        v11 = [obj countByEnumeratingWithState:&v48 objects:v58 count:16];
        if (v11)
        {
          goto LABEL_5;
        }

        break;
      }
    }
  }

  [obj addObject:descriptorCopy];
LABEL_30:
  candidateCopy = v45;
LABEL_31:
}

- (BOOL)_isAssetTypeInvolvedInStaging:(id)staging
{
  stagingCopy = staging;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v9 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
  if (!activeJobDescriptor || (v11 = activeJobDescriptor, -[MADAutoAssetStager activeJobDescriptor](self, "activeJobDescriptor"), v12 = objc_claimAutoreleasedReturnValue(), [v12 assetType], v13 = objc_claimAutoreleasedReturnValue(), v14 = +[SUCore stringIsEqual:to:](SUCore, "stringIsEqual:to:", v13, stagingCopy), v13, v12, v11, (v14 & 1) == 0))
  {
    v148 = 0u;
    v149 = 0u;
    v146 = 0u;
    v147 = 0u;
    candidateSetConfigurations = [(MADAutoAssetStager *)self candidateSetConfigurations];
    v17 = [candidateSetConfigurations countByEnumeratingWithState:&v146 objects:v161 count:16];
    if (v17)
    {
      v18 = v17;
      v19 = *v147;
LABEL_6:
      v20 = 0;
      while (1)
      {
        if (*v147 != v19)
        {
          objc_enumerationMutation(candidateSetConfigurations);
        }

        if ([*(*(&v146 + 1) + 8 * v20) refererncesAssetType:stagingCopy])
        {
          goto LABEL_102;
        }

        if (v18 == ++v20)
        {
          v18 = [candidateSetConfigurations countByEnumeratingWithState:&v146 objects:v161 count:16];
          if (v18)
          {
            goto LABEL_6;
          }

          break;
        }
      }
    }

    candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsRequiredByTarget];
    v22 = [candidateSetConfigurationsRequiredByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

    v144 = 0u;
    v145 = 0u;
    v142 = 0u;
    v143 = 0u;
    candidateSetConfigurations = v22;
    v23 = [candidateSetConfigurations countByEnumeratingWithState:&v142 objects:v160 count:16];
    if (v23)
    {
      v24 = v23;
      v25 = *v143;
LABEL_14:
      v26 = 0;
      while (1)
      {
        if (*v143 != v25)
        {
          objc_enumerationMutation(candidateSetConfigurations);
        }

        if ([*(*(&v142 + 1) + 8 * v26) refererncesAssetType:stagingCopy])
        {
          break;
        }

        if (v24 == ++v26)
        {
          v24 = [candidateSetConfigurations countByEnumeratingWithState:&v142 objects:v160 count:16];
          if (v24)
          {
            goto LABEL_14;
          }

          goto LABEL_20;
        }
      }
    }

    else
    {
LABEL_20:

      candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
      v28 = [candidateSetConfigurationsOptionalByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

      v140 = 0u;
      v141 = 0u;
      v138 = 0u;
      v139 = 0u;
      candidateSetConfigurations = v28;
      v29 = [candidateSetConfigurations countByEnumeratingWithState:&v138 objects:v159 count:16];
      if (v29)
      {
        v30 = v29;
        v31 = *v139;
LABEL_22:
        v32 = 0;
        while (1)
        {
          if (*v139 != v31)
          {
            objc_enumerationMutation(candidateSetConfigurations);
          }

          if ([*(*(&v138 + 1) + 8 * v32) refererncesAssetType:stagingCopy])
          {
            break;
          }

          if (v30 == ++v32)
          {
            v30 = [candidateSetConfigurations countByEnumeratingWithState:&v138 objects:v159 count:16];
            if (v30)
            {
              goto LABEL_22;
            }

            goto LABEL_28;
          }
        }
      }

      else
      {
LABEL_28:

        v136 = 0u;
        v137 = 0u;
        v134 = 0u;
        v135 = 0u;
        candidateSetConfigurations = [(MADAutoAssetStager *)self candidatesForStaging];
        v33 = [candidateSetConfigurations countByEnumeratingWithState:&v134 objects:v158 count:16];
        if (v33)
        {
          v34 = v33;
          v35 = *v135;
LABEL_30:
          v36 = 0;
          while (1)
          {
            if (*v135 != v35)
            {
              objc_enumerationMutation(candidateSetConfigurations);
            }

            assetType = [*(*(&v134 + 1) + 8 * v36) assetType];
            v38 = [SUCore stringIsEqual:assetType to:stagingCopy];

            if (v38)
            {
              goto LABEL_102;
            }

            if (v34 == ++v36)
            {
              v34 = [candidateSetConfigurations countByEnumeratingWithState:&v134 objects:v158 count:16];
              if (v34)
              {
                goto LABEL_30;
              }

              break;
            }
          }
        }

        candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
        v40 = [candidatesForStagingRequiredByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

        v132 = 0u;
        v133 = 0u;
        v130 = 0u;
        v131 = 0u;
        candidateSetConfigurations = v40;
        v41 = [candidateSetConfigurations countByEnumeratingWithState:&v130 objects:v157 count:16];
        if (v41)
        {
          v42 = v41;
          v43 = *v131;
LABEL_38:
          v44 = 0;
          while (1)
          {
            if (*v131 != v43)
            {
              objc_enumerationMutation(candidateSetConfigurations);
            }

            assetType2 = [*(*(&v130 + 1) + 8 * v44) assetType];
            v46 = [SUCore stringIsEqual:assetType2 to:stagingCopy];

            if (v46)
            {
              break;
            }

            if (v42 == ++v44)
            {
              v42 = [candidateSetConfigurations countByEnumeratingWithState:&v130 objects:v157 count:16];
              if (v42)
              {
                goto LABEL_38;
              }

              goto LABEL_44;
            }
          }
        }

        else
        {
LABEL_44:

          candidatesForStagingOptionalByTarget = [(MADAutoAssetStager *)self candidatesForStagingOptionalByTarget];
          v48 = [candidatesForStagingOptionalByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

          v128 = 0u;
          v129 = 0u;
          v126 = 0u;
          v127 = 0u;
          candidateSetConfigurations = v48;
          v49 = [candidateSetConfigurations countByEnumeratingWithState:&v126 objects:v156 count:16];
          if (v49)
          {
            v50 = v49;
            v51 = *v127;
LABEL_46:
            v52 = 0;
            while (1)
            {
              if (*v127 != v51)
              {
                objc_enumerationMutation(candidateSetConfigurations);
              }

              assetType3 = [*(*(&v126 + 1) + 8 * v52) assetType];
              v54 = [SUCore stringIsEqual:assetType3 to:stagingCopy];

              if (v54)
              {
                break;
              }

              if (v50 == ++v52)
              {
                v50 = [candidateSetConfigurations countByEnumeratingWithState:&v126 objects:v156 count:16];
                if (v50)
                {
                  goto LABEL_46;
                }

                goto LABEL_52;
              }
            }
          }

          else
          {
LABEL_52:

            v124 = 0u;
            v125 = 0u;
            v122 = 0u;
            v123 = 0u;
            candidateSetConfigurations = [(MADAutoAssetStager *)self determiningBySelector];
            v55 = [candidateSetConfigurations countByEnumeratingWithState:&v122 objects:v155 count:16];
            if (v55)
            {
              v56 = v55;
              v100 = *v123;
LABEL_54:
              v57 = 0;
              while (1)
              {
                if (*v123 != v100)
                {
                  objc_enumerationMutation(candidateSetConfigurations);
                }

                v58 = *(*(&v122 + 1) + 8 * v57);
                v59 = objc_autoreleasePoolPush();
                determiningBySelector = [(MADAutoAssetStager *)self determiningBySelector];
                v61 = [determiningBySelector safeObjectForKey:v58 ofClass:objc_opt_class()];

                assetType4 = [v61 assetType];
                LOBYTE(determiningBySelector) = [SUCore stringIsEqual:assetType4 to:stagingCopy];

                objc_autoreleasePoolPop(v59);
                if (determiningBySelector)
                {
                  goto LABEL_102;
                }

                if (v56 == ++v57)
                {
                  v56 = [candidateSetConfigurations countByEnumeratingWithState:&v122 objects:v155 count:16];
                  if (v56)
                  {
                    goto LABEL_54;
                  }

                  break;
                }
              }
            }

            v120 = 0u;
            v121 = 0u;
            v118 = 0u;
            v119 = 0u;
            candidateSetConfigurations = [(MADAutoAssetStager *)self availableForStaging];
            v63 = [candidateSetConfigurations countByEnumeratingWithState:&v118 objects:v154 count:16];
            if (v63)
            {
              v64 = v63;
              v65 = *v119;
LABEL_62:
              v66 = 0;
              while (1)
              {
                if (*v119 != v65)
                {
                  objc_enumerationMutation(candidateSetConfigurations);
                }

                assetType5 = [*(*(&v118 + 1) + 8 * v66) assetType];
                v68 = [SUCore stringIsEqual:assetType5 to:stagingCopy];

                if (v68)
                {
                  goto LABEL_102;
                }

                if (v64 == ++v66)
                {
                  v64 = [candidateSetConfigurations countByEnumeratingWithState:&v118 objects:v154 count:16];
                  if (v64)
                  {
                    goto LABEL_62;
                  }

                  break;
                }
              }
            }

            availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
            v70 = [availableForStagingRequiredByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

            v116 = 0u;
            v117 = 0u;
            v114 = 0u;
            v115 = 0u;
            candidateSetConfigurations = v70;
            v71 = [candidateSetConfigurations countByEnumeratingWithState:&v114 objects:v153 count:16];
            if (v71)
            {
              v72 = v71;
              v73 = *v115;
LABEL_70:
              v74 = 0;
              while (1)
              {
                if (*v115 != v73)
                {
                  objc_enumerationMutation(candidateSetConfigurations);
                }

                assetType6 = [*(*(&v114 + 1) + 8 * v74) assetType];
                v76 = [SUCore stringIsEqual:assetType6 to:stagingCopy];

                if (v76)
                {
                  break;
                }

                if (v72 == ++v74)
                {
                  v72 = [candidateSetConfigurations countByEnumeratingWithState:&v114 objects:v153 count:16];
                  if (v72)
                  {
                    goto LABEL_70;
                  }

                  goto LABEL_76;
                }
              }
            }

            else
            {
LABEL_76:

              availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
              v78 = [availableForStagingOptionalByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

              v112 = 0u;
              v113 = 0u;
              v110 = 0u;
              v111 = 0u;
              candidateSetConfigurations = v78;
              v79 = [candidateSetConfigurations countByEnumeratingWithState:&v110 objects:v152 count:16];
              if (!v79)
              {
LABEL_84:

                v108 = 0u;
                v109 = 0u;
                v106 = 0u;
                v107 = 0u;
                candidateSetConfigurations = [(MADAutoAssetStager *)self awaitingStagingAttempt];
                v85 = [candidateSetConfigurations countByEnumeratingWithState:&v106 objects:v151 count:16];
                if (v85)
                {
                  v86 = v85;
                  v87 = *v107;
LABEL_86:
                  v88 = 0;
                  while (1)
                  {
                    if (*v107 != v87)
                    {
                      objc_enumerationMutation(candidateSetConfigurations);
                    }

                    assetType7 = [*(*(&v106 + 1) + 8 * v88) assetType];
                    v90 = [SUCore stringIsEqual:assetType7 to:stagingCopy];

                    if (v90)
                    {
                      break;
                    }

                    if (v86 == ++v88)
                    {
                      v86 = [candidateSetConfigurations countByEnumeratingWithState:&v106 objects:v151 count:16];
                      if (v86)
                      {
                        goto LABEL_86;
                      }

                      goto LABEL_92;
                    }
                  }
                }

                else
                {
LABEL_92:

                  v104 = 0u;
                  v105 = 0u;
                  v102 = 0u;
                  v103 = 0u;
                  candidateSetConfigurations = [(MADAutoAssetStager *)self successfullyStaged];
                  v91 = [candidateSetConfigurations countByEnumeratingWithState:&v102 objects:v150 count:16];
                  if (!v91)
                  {
LABEL_100:
                    v15 = 0;
LABEL_103:

                    goto LABEL_104;
                  }

                  v92 = v91;
                  v101 = *v103;
LABEL_94:
                  v93 = 0;
                  while (1)
                  {
                    if (*v103 != v101)
                    {
                      objc_enumerationMutation(candidateSetConfigurations);
                    }

                    v94 = *(*(&v102 + 1) + 8 * v93);
                    v95 = objc_autoreleasePoolPush();
                    successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
                    v97 = [successfullyStaged safeObjectForKey:v94 ofClass:objc_opt_class()];

                    assetType8 = [v97 assetType];
                    LOBYTE(successfullyStaged) = [SUCore stringIsEqual:assetType8 to:stagingCopy];

                    objc_autoreleasePoolPop(v95);
                    if (successfullyStaged)
                    {
                      break;
                    }

                    if (v92 == ++v93)
                    {
                      v92 = [candidateSetConfigurations countByEnumeratingWithState:&v102 objects:v150 count:16];
                      if (v92)
                      {
                        goto LABEL_94;
                      }

                      goto LABEL_100;
                    }
                  }
                }

LABEL_102:
                v15 = 1;
                goto LABEL_103;
              }

              v80 = v79;
              v81 = *v111;
LABEL_78:
              v82 = 0;
              while (1)
              {
                if (*v111 != v81)
                {
                  objc_enumerationMutation(candidateSetConfigurations);
                }

                assetType9 = [*(*(&v110 + 1) + 8 * v82) assetType];
                v84 = [SUCore stringIsEqual:assetType9 to:stagingCopy];

                if (v84)
                {
                  break;
                }

                if (v80 == ++v82)
                {
                  v80 = [candidateSetConfigurations countByEnumeratingWithState:&v110 objects:v152 count:16];
                  if (v80)
                  {
                    goto LABEL_78;
                  }

                  goto LABEL_84;
                }
              }
            }
          }
        }
      }
    }

    goto LABEL_102;
  }

  v15 = 1;
LABEL_104:

  return v15;
}

- (BOOL)_doesSelectorMatchCurrentJob:(id)job
{
  jobCopy = job;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
  LOBYTE(self) = [(MADAutoAssetStager *)self _doesSelector:jobCopy matchDescriptor:activeJobDescriptor];

  return self;
}

- (BOOL)_doesSelector:(id)selector matchDescriptor:(id)descriptor
{
  selectorCopy = selector;
  descriptorCopy = descriptor;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (descriptorCopy)
  {
    assetVersion = [selectorCopy assetVersion];

    if (assetVersion)
    {
      assetType = [descriptorCopy assetType];
      assetType2 = [selectorCopy assetType];
      if (![SUCore stringIsEqual:assetType to:assetType2])
      {
        v17 = 0;
LABEL_13:

        goto LABEL_14;
      }

      assetSpecifier = [descriptorCopy assetSpecifier];
      assetSpecifier2 = [selectorCopy assetSpecifier];
      if ([SUCore stringIsEqual:assetSpecifier to:assetSpecifier2])
      {
        assetVersion2 = [descriptorCopy assetVersion];
        assetVersion3 = [selectorCopy assetVersion];
        v17 = [SUCore stringIsEqual:assetVersion2 to:assetVersion3];
      }

      else
      {
        v17 = 0;
      }
    }

    else
    {
      assetSpecifier3 = [selectorCopy assetSpecifier];

      assetType = [descriptorCopy assetType];
      assetType2 = [selectorCopy assetType];
      v19 = [SUCore stringIsEqual:assetType to:assetType2];
      v17 = (assetSpecifier3 == 0) & v19;
      if (!assetSpecifier3 || (v19 & 1) == 0)
      {
        goto LABEL_13;
      }

      assetSpecifier = [descriptorCopy assetSpecifier];
      assetSpecifier2 = [selectorCopy assetSpecifier];
      v17 = [SUCore stringIsEqual:assetSpecifier to:assetSpecifier2];
    }

    goto LABEL_13;
  }

  v17 = 0;
LABEL_14:

  return v17;
}

- (BOOL)_isSetTargetWithinRange:(id)range asCandidate:(BOOL)candidate
{
  candidateCopy = candidate;
  rangeCopy = range;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  v10 = [MADAutoAssetControlManager restoreVersionFromOSVersion:assetTargetOSVersion];

  autoAssetEntries = [rangeCopy autoAssetEntries];
  v12 = [autoAssetEntries count];

  if (v12 || candidateCopy)
  {
    minTargetOSVersion = [rangeCopy minTargetOSVersion];
    v15 = [MADAutoAssetControlManager restoreVersionFromOSVersion:minTargetOSVersion];

    maxTargetOSVersion = [rangeCopy maxTargetOSVersion];
    v17 = [MADAutoAssetControlManager restoreVersionFromOSVersion:maxTargetOSVersion];

    if ([v15 isComparable:v10] && objc_msgSend(v17, "isComparable:", v10))
    {
      v18 = [v15 compare:v10];
      v19 = [v17 compare:v10];
      v13 = v18 != &dword_0 + 1 && v19 + 1 != 0;
    }

    else
    {
      v21 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v21, OS_LOG_TYPE_ERROR))
      {
        summary = [(MADAutoAssetStager *)self summary];
        summary2 = [rangeCopy summary];
        v25 = 138543618;
        v26 = summary;
        v27 = 2114;
        v28 = summary2;
        _os_log_impl(&dword_0, v21, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_isSetTargetWithinRange} set-target versions not comparable (ignoring) | setTarget:%{public}@", &v25, 0x16u);
      }

      v13 = 0;
    }
  }

  else
  {
    v13 = 0;
  }

  return v13;
}

- (BOOL)_isDescriptorAssetTypeManagedAsSet:(id)set
{
  assetType = [set assetType];
  LOBYTE(self) = [(MADAutoAssetStager *)self _isAssetTypeManagedAsSet:assetType];

  return self;
}

- (BOOL)_isAssetTypeManagedAsSet:(id)set
{
  setCopy = set;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v16 = 0u;
  v17 = 0u;
  v14 = 0u;
  v15 = 0u;
  setConfigurations = [(MADAutoAssetStager *)self setConfigurations];
  v8 = [setConfigurations countByEnumeratingWithState:&v14 objects:v18 count:16];
  if (v8)
  {
    v9 = *v15;
    while (2)
    {
      for (i = 0; i != v8; i = i + 1)
      {
        if (*v15 != v9)
        {
          objc_enumerationMutation(setConfigurations);
        }

        firstEntryAssetType = [*(*(&v14 + 1) + 8 * i) firstEntryAssetType];
        v12 = [SUCore stringIsEqual:setCopy to:firstEntryAssetType];

        if (v12)
        {
          LOBYTE(v8) = 1;
          goto LABEL_11;
        }
      }

      v8 = [setConfigurations countByEnumeratingWithState:&v14 objects:v18 count:16];
      if (v8)
      {
        continue;
      }

      break;
    }
  }

LABEL_11:

  return v8;
}

- (void)_addToStaged:(id)staged addingFromStagerParam:(id)param
{
  paramCopy = param;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  downloadedDescriptor = [paramCopy downloadedDescriptor];

  if (downloadedDescriptor)
  {
    persistedState = [(MADAutoAssetStager *)self persistedState];
    persistedConfig = [persistedState persistedConfig];
    v64 = [persistedConfig ullForKey:@"stagedAssetTotalContentBytes"];

    downloadedDescriptor2 = [paramCopy downloadedDescriptor];
    [(MADAutoAssetStager *)self setActiveJobDescriptor:downloadedDescriptor2];

    v12 = [MAAutoAssetSelector alloc];
    activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetType = [activeJobDescriptor assetType];
    activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetSpecifier = [activeJobDescriptor2 assetSpecifier];
    activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetVersion = [activeJobDescriptor3 assetVersion];
    _targetNameActiveRequired = [v12 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

    activeJobDescriptor4 = [(MADAutoAssetStager *)self activeJobDescriptor];
    jobInformation = [paramCopy jobInformation];
    currentStatus = [jobInformation currentStatus];
    [(MADAutoAssetStager *)self _updateDescriptor:activeJobDescriptor4 withLatestJobStatus:currentStatus];

    activeJobDescriptor5 = [(MADAutoAssetStager *)self activeJobDescriptor];
    v63 = [(MADAutoAssetStager *)self _persistDescriptor:@"AddToStagedDecideMoreAvailable" operation:@"ENTRY_MODIFY" persistingDescriptor:activeJobDescriptor5 withRepresentation:603 message:@"content downloaded (add to staged)"];

    activeJobDescriptor6 = [(MADAutoAssetStager *)self activeJobDescriptor];
    [(MADAutoAssetStager *)self updateLookupResultsJustStaged:activeJobDescriptor6];

    successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
    activeJobDescriptor7 = [(MADAutoAssetStager *)self activeJobDescriptor];
    persistedEntryID = [_targetNameActiveRequired persistedEntryID];
    [successfullyStaged setSafeObject:activeJobDescriptor7 forKey:persistedEntryID];

    activeJobDescriptor8 = [(MADAutoAssetStager *)self activeJobDescriptor];
    assetId = [activeJobDescriptor8 assetId];
    stagingClientRequest = [paramCopy stagingClientRequest];
    clientID = [stagingClientRequest clientID];
    assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
    assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    [MADAutoAssetHistory recordOperation:203 toHistoryType:0 fromLayer:4 forAssetID:assetId withSelector:_targetNameActiveRequired forClientDomainName:clientID forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion];

    if (+[MAAIRBEventReporter isAvailable])
    {
      v34 = [MAAIRBMobileAssetOperationMetadata alloc];
      v35 = [MADAutoAssetHistoryTracker operationName:203];
      v36 = [(MAAIRBMobileAssetOperationMetadata *)v34 initWithCode:203 name:v35];

      v37 = [MAAIRBMobileAssetAssetSelector alloc];
      assetType2 = [_targetNameActiveRequired assetType];
      assetSpecifier2 = [_targetNameActiveRequired assetSpecifier];
      assetVersion2 = [_targetNameActiveRequired assetVersion];
      v41 = [(MAAIRBMobileAssetAssetSelector *)v37 initWithAssetType:assetType2 assetSpecifier:assetSpecifier2 assetVersion:assetVersion2];

      v42 = [MAAIRBAppleIntelligenceAssetDeliveryEventType typeAssetUpdate:v36 assetSelector:v41];
      v43 = [[MAAIRBAppleIntelligenceAssetDeliveryEvent alloc] initWithErrors:&__NSArray0__struct type:v42];
      [MAAIRBEventReporter emitAppleIntelligenceStartEvent:v43];
    }

    activeJobDescriptor9 = [(MADAutoAssetStager *)self activeJobDescriptor];
    isPatch = [activeJobDescriptor9 isPatch];

    statisticsStaged = [(MADAutoAssetStager *)self statisticsStaged];
    v47 = statisticsStaged;
    if (isPatch)
    {
      [statisticsStaged setPatchedAssets:{objc_msgSend(statisticsStaged, "patchedAssets") + 1}];

      statisticsStaged2 = [(MADAutoAssetStager *)self statisticsStaged];
      activeJobDescriptor10 = [(MADAutoAssetStager *)self activeJobDescriptor];
      metadata = [activeJobDescriptor10 metadata];
      [statisticsStaged2 setPatchedBytes:{objc_msgSend(metadata, "safeIntegerForKey:", @"_UnarchivedSize", "patchedBytes")}];
    }

    else
    {
      [statisticsStaged setFullAssets:{objc_msgSend(statisticsStaged, "fullAssets") + 1}];

      statisticsStaged2 = [(MADAutoAssetStager *)self statisticsStaged];
      activeJobDescriptor10 = [(MADAutoAssetStager *)self activeJobDescriptor];
      metadata = [activeJobDescriptor10 metadata];
      [statisticsStaged2 setFullBytes:{objc_msgSend(metadata, "safeIntegerForKey:", @"_UnarchivedSize", "fullBytes")}];
    }

    persistedState2 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig2 = [persistedState2 persistedConfig];
    successfullyStaged2 = [(MADAutoAssetStager *)self successfullyStaged];
    [persistedConfig2 persistULL:objc_msgSend(successfullyStaged2 forKey:"count") shouldPersist:{@"stagedAssetCount", 0}];

    persistedState3 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig3 = [persistedState3 persistedConfig];
    [persistedConfig3 persistULL:&v64[v63] forKey:@"stagedAssetTotalContentBytes" shouldPersist:0];

    persistedState4 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig4 = [persistedState4 persistedConfig];
    successfullyStaged3 = [(MADAutoAssetStager *)self successfullyStaged];
    [persistedConfig4 persistBoolean:objc_msgSend(successfullyStaged3 forKey:"count") == 0 shouldPersist:{@"stagedNoContent", 0}];

    persistedState5 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig5 = [persistedState5 persistedConfig];
    [persistedConfig5 persistULL:0 forKey:@"activelyStagingAssetCount" shouldPersist:1];

    [(MADAutoAssetStager *)self _logPersistedConfigSet:@"AddToStagedDecideMoreAvailable" message:@"auto-asset-job has indicated content downloaded (add to staged)"];
  }

  else
  {
    _targetNameActiveRequired = [(MADAutoAssetStager *)self _targetNameActiveRequired];
    v51 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v51, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      *buf = 138543618;
      v66 = summary;
      v67 = 2114;
      v68 = _targetNameActiveRequired;
      _os_log_impl(&dword_0, v51, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {_addToStaged} to-be-staged asset-descriptor already downloaded", buf, 0x16u);
    }
  }

  [(MADAutoAssetStager *)self setActiveJobDescriptor:0];
}

- (BOOL)_isOtherTargetAvailable
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v7 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  v23 = 0u;
  v24 = 0u;
  v21 = 0u;
  v22 = 0u;
  candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsRequiredByTarget];
  v9 = [candidateSetConfigurationsRequiredByTarget countByEnumeratingWithState:&v21 objects:v26 count:16];
  if (v9)
  {
    v10 = v9;
    v11 = *v22;
LABEL_3:
    v12 = 0;
    while (1)
    {
      if (*v22 != v11)
      {
        objc_enumerationMutation(candidateSetConfigurationsRequiredByTarget);
      }

      if (![SUCore stringIsEqual:*(*(&v21 + 1) + 8 * v12) to:v7])
      {
        goto LABEL_18;
      }

      if (v10 == ++v12)
      {
        v10 = [candidateSetConfigurationsRequiredByTarget countByEnumeratingWithState:&v21 objects:v26 count:16];
        if (v10)
        {
          goto LABEL_3;
        }

        break;
      }
    }
  }

  v19 = 0u;
  v20 = 0u;
  v17 = 0u;
  v18 = 0u;
  candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
  v13 = [candidateSetConfigurationsRequiredByTarget countByEnumeratingWithState:&v17 objects:v25 count:16];
  if (v13)
  {
    v14 = *v18;
LABEL_11:
    v15 = 0;
    while (1)
    {
      if (*v18 != v14)
      {
        objc_enumerationMutation(candidateSetConfigurationsRequiredByTarget);
      }

      if (![SUCore stringIsEqual:*(*(&v17 + 1) + 8 * v15) to:v7])
      {
        break;
      }

      if (v13 == ++v15)
      {
        v13 = [candidateSetConfigurationsRequiredByTarget countByEnumeratingWithState:&v17 objects:v25 count:16];
        if (v13)
        {
          goto LABEL_11;
        }

        goto LABEL_19;
      }
    }

LABEL_18:
    LOBYTE(v13) = 1;
  }

LABEL_19:

  return v13;
}

- (void)_blendOptionalCandidates:(id)candidates intoRequired:(id)required
{
  candidatesCopy = candidates;
  requiredCopy = required;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  _targetNameActiveRequired = [(MADAutoAssetStager *)self _targetNameActiveRequired];
  v11 = [candidatesCopy count];
  v28 = objc_alloc_init(NSMutableDictionary);
  v12 = objc_alloc_init(NSMutableDictionary);
  if (v11 >= 1)
  {
    v13 = v11 + 1;
    do
    {
      v14 = [candidatesCopy objectAtIndex:v13 - 2];
      v15 = v14;
      if (v14)
      {
        assetType = [v14 assetType];
        v17 = [(MADAutoAssetStager *)self isAssetType:assetType representedInAssetDescriptors:requiredCopy];

        if (v17)
        {
          [requiredCopy addObject:v15];
          [candidatesCopy removeObjectAtIndex:v13 - 2];
          selfCopy2 = self;
          v19 = v15;
          v20 = v28;
        }

        else
        {
          selfCopy2 = self;
          v19 = v15;
          v20 = v12;
        }

        [(MADAutoAssetStager *)selfCopy2 trackSelectorForDescriptor:v19 inContainer:v20];
      }

      else
      {
        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        v23 = [[NSString alloc] initWithFormat:@"[%@] {_blendOptionalCandidates} unable to load optionalDescriptor | optionalIndex:%ld", _targetNameActiveRequired, v13 - 2];
        [diag trackAnomaly:@"AUTO-STAGER" forReason:v23 withResult:6111 withError:0];
      }

      --v13;
    }

    while (v13 > 1);
  }

  v24 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v24, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    v26 = [(MADAutoAssetStager *)self selectorContainerAsString:v28];
    v27 = [(MADAutoAssetStager *)self selectorContainerAsString:v12];
    *buf = 138544130;
    v30 = summary;
    v31 = 2114;
    v32 = _targetNameActiveRequired;
    v33 = 2114;
    v34 = v26;
    v35 = 2114;
    v36 = v27;
    _os_log_impl(&dword_0, v24, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {_blendOptionalCandidates}\n>>> movedOptionalToRequired:%{public}@\n>>> optionalRemainsOptional:%{public}@", buf, 0x2Au);
  }
}

- (BOOL)isAssetType:(id)type representedInAssetDescriptors:(id)descriptors
{
  typeCopy = type;
  v13 = 0u;
  v14 = 0u;
  v15 = 0u;
  v16 = 0u;
  descriptorsCopy = descriptors;
  v7 = [descriptorsCopy countByEnumeratingWithState:&v13 objects:v17 count:16];
  if (v7)
  {
    v8 = *v14;
    while (2)
    {
      for (i = 0; i != v7; i = i + 1)
      {
        if (*v14 != v8)
        {
          objc_enumerationMutation(descriptorsCopy);
        }

        assetType = [*(*(&v13 + 1) + 8 * i) assetType];
        v11 = [SUCore stringIsEqual:typeCopy to:assetType];

        if (v11)
        {
          LOBYTE(v7) = 1;
          goto LABEL_11;
        }
      }

      v7 = [descriptorsCopy countByEnumeratingWithState:&v13 objects:v17 count:16];
      if (v7)
      {
        continue;
      }

      break;
    }
  }

LABEL_11:

  return v7;
}

- (void)_blendCandidateSetConfigurations:(id)configurations blendingIntoRequiredConfigurations:(id)requiredConfigurations blendingFromOptionalConfigurations:(id)optionalConfigurations
{
  configurationsCopy = configurations;
  requiredConfigurationsCopy = requiredConfigurations;
  optionalConfigurationsCopy = optionalConfigurations;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v50 = configurationsCopy;
  configurationsCopy = [[NSString alloc] initWithFormat:@"%@:_blendCandidateSetConfigurations", configurationsCopy];
  selfCopy = self;
  _targetNameActiveRequired = [(MADAutoAssetStager *)self _targetNameActiveRequired];
  v13 = [optionalConfigurationsCopy count];
  if (v13 >= 1)
  {
    v14 = v13;
    v51 = optionalConfigurationsCopy;
    v52 = requiredConfigurationsCopy;
    while (1)
    {
      v15 = v14 - 1;
      v16 = [optionalConfigurationsCopy objectAtIndex:v14 - 1];
      v17 = v16;
      if (!v16)
      {
        break;
      }

      firstEntryAssetType = [v16 firstEntryAssetType];
      v19 = [(MADAutoAssetStager *)selfCopy indexForAssetType:firstEntryAssetType representedInSetConfigurations:requiredConfigurationsCopy];

      if ((v19 & 0x8000000000000000) == 0)
      {
        v55 = v14;
        v53 = v19;
        autoStagerFSM3 = [requiredConfigurationsCopy objectAtIndex:v19];
        v21 = objc_alloc_init(NSMutableArray);
        v66 = 0u;
        v67 = 0u;
        v68 = 0u;
        v69 = 0u;
        autoAssetEntries = [autoStagerFSM3 autoAssetEntries];
        v23 = [autoAssetEntries countByEnumeratingWithState:&v66 objects:v71 count:16];
        if (v23)
        {
          v24 = v23;
          v25 = *v67;
          do
          {
            for (i = 0; i != v24; i = i + 1)
            {
              if (*v67 != v25)
              {
                objc_enumerationMutation(autoAssetEntries);
              }

              [v21 addObject:*(*(&v66 + 1) + 8 * i)];
            }

            v24 = [autoAssetEntries countByEnumeratingWithState:&v66 objects:v71 count:16];
          }

          while (v24);
        }

        v56 = v21;
        v54 = v15;

        v64 = 0u;
        v65 = 0u;
        v62 = 0u;
        v63 = 0u;
        v60 = v17;
        obj = [v17 autoAssetEntries];
        v27 = [obj countByEnumeratingWithState:&v62 objects:v70 count:16];
        if (v27)
        {
          v28 = v27;
          v29 = *v63;
          do
          {
            for (j = 0; j != v28; j = j + 1)
            {
              if (*v63 != v29)
              {
                objc_enumerationMutation(obj);
              }

              v31 = *(*(&v62 + 1) + 8 * j);
              assetSelector = [v31 assetSelector];
              assetType = [assetSelector assetType];
              assetSelector2 = [v31 assetSelector];
              assetSpecifier = [assetSelector2 assetSpecifier];
              v36 = [autoStagerFSM3 assetSetEntryForAssetType:assetType forAssetSpecifier:assetSpecifier];

              if (v36)
              {
                autoStagerFSM2 = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
                diag = [autoStagerFSM2 diag];
                v39 = [NSString alloc];
                summary = [autoStagerFSM3 summary];
                summary2 = [v60 summary];
                v42 = [v39 initWithFormat:@"[%@] {%@} assetType in both REQUIRED and OPTIONAL set-configuration candidates | requiredConfiguration:%@ | optionalConfiguration:%@", _targetNameActiveRequired, configurationsCopy, summary, summary2];
                [diag trackAnomaly:@"AUTO-STAGER" forReason:v42 withResult:6109 withError:0];
              }

              else
              {
                [v56 addObject:v31];
              }
            }

            v28 = [obj countByEnumeratingWithState:&v62 objects:v70 count:16];
          }

          while (v28);
        }

        diag2 = v56;
        v44 = [v56 count];
        autoAssetEntries2 = [autoStagerFSM3 autoAssetEntries];
        v46 = [autoAssetEntries2 count];

        if (v44 <= v46)
        {
          optionalConfigurationsCopy = v51;
          requiredConfigurationsCopy = v52;
          v15 = v54;
          v14 = v55;
          v17 = v60;
        }

        else
        {
          assetSetIdentifier = [autoStagerFSM3 assetSetIdentifier];
          v48 = [(MADAutoAssetStager *)selfCopy newSetConfigurationForAssetSetIdentifier:assetSetIdentifier withAutoAssetEntries:v56];

          optionalConfigurationsCopy = v51;
          requiredConfigurationsCopy = v52;
          v15 = v54;
          v17 = v60;
          if (v48)
          {
            [v52 replaceObjectAtIndex:v53 withObject:v48];
            [v51 removeObjectAtIndex:v54];
          }

          v14 = v55;
LABEL_27:
        }
      }

      v49 = v14 <= 1;
      v14 = v15;
      if (v49)
      {
        goto LABEL_32;
      }
    }

    autoStagerFSM3 = [(MADAutoAssetStager *)selfCopy autoStagerFSM];
    diag2 = [autoStagerFSM3 diag];
    v48 = [[NSString alloc] initWithFormat:@"[%@] {%@} unable to load optionalConfiguration | optionalIndex:%ld", _targetNameActiveRequired, configurationsCopy, v14 - 1];
    [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v48 withResult:6111 withError:0];
    goto LABEL_27;
  }

LABEL_32:
}

- (int64_t)indexForAssetType:(id)type representedInSetConfigurations:(id)configurations
{
  typeCopy = type;
  configurationsCopy = configurations;
  v7 = [configurationsCopy count];
  v8 = v7 - 1;
  if (v7 >= 1)
  {
    v9 = v7;
    while (1)
    {
      v10 = [configurationsCopy objectAtIndex:--v9];
      if (v10)
      {
        v11 = v10;
        firstEntryAssetType = [v10 firstEntryAssetType];
        v13 = [SUCore stringIsEqual:firstEntryAssetType to:typeCopy];

        if (v13)
        {
          break;
        }
      }

      if (v9 <= 0)
      {
        v8 = -1;
        goto LABEL_8;
      }
    }

    v8 = v9;
  }

LABEL_8:

  return v8;
}

- (BOOL)_formCandidateSetLookupArray:(id)array involvingRequired:(BOOL)required involvingOptional:(BOOL)optional providingOptional:(BOOL)providingOptional
{
  arrayCopy = array;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v136 = arrayCopy;
  arrayCopy = [[NSString alloc] initWithFormat:@"%@:_formCandidateSetLookupArray", arrayCopy];
  v138 = objc_alloc_init(NSMutableDictionary);
  v153 = objc_alloc_init(NSMutableDictionary);
  v151 = objc_alloc_init(NSMutableArray);
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v137 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  v212 = 0u;
  v213 = 0u;
  v210 = 0u;
  v211 = 0u;
  selfCopy = self;
  setTargets = [(MADAutoAssetStager *)self setTargets];
  v13 = [setTargets countByEnumeratingWithState:&v210 objects:v237 count:16];
  if (v13)
  {
    v14 = v13;
    v15 = *v211;
    do
    {
      for (i = 0; i != v14; i = i + 1)
      {
        if (*v211 != v15)
        {
          objc_enumerationMutation(setTargets);
        }

        v17 = *(*(&v210 + 1) + 8 * i);
        v18 = objc_autoreleasePoolPush();
        firstEntryAssetType = [v17 firstEntryAssetType];
        if (firstEntryAssetType)
        {
          [v153 setSafeObject:v17 forKey:firstEntryAssetType];
        }

        else
        {
          v20 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v20, OS_LOG_TYPE_DEFAULT))
          {
            summary = [(MADAutoAssetStager *)selfCopy summary];
            summary2 = [v17 summary];
            *buf = 138543618;
            v223 = summary;
            v224 = 2114;
            v225 = summary2;
            _os_log_impl(&dword_0, v20, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_formCandidateSetLookupArray} set-target indicating nothing to be staged | nextSetTarget:%{public}@", buf, 0x16u);
          }
        }

        objc_autoreleasePoolPop(v18);
      }

      v14 = [setTargets countByEnumeratingWithState:&v210 objects:v237 count:16];
    }

    while (v14);
  }

  v23 = selfCopy;
  if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
  {
    v24 = objc_alloc_init(NSMutableArray);
    v25 = objc_alloc_init(NSMutableArray);
    candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
    [candidateSetConfigurationsRequiredByTarget setSafeObject:v24 forKey:v137];

    candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
    [candidateSetConfigurationsOptionalByTarget setSafeObject:v25 forKey:v137];

    v23 = selfCopy;
  }

  [(MADAutoAssetStager *)v23 _extendLookupByAssetTypeWithSetConfigurations:v138 limitingToSetTargets:v153];
  [(MADAutoAssetStager *)v23 _extendLookupByAssetTypeWithDownloadedDescriptors:v138 limitingToSetTargets:v153];
  if ([v138 count])
  {
    v208 = 0u;
    v209 = 0u;
    v206 = 0u;
    v207 = 0u;
    v28 = v138;
    v160 = [v28 countByEnumeratingWithState:&v206 objects:v236 count:16];
    if (v160)
    {
      v157 = *v207;
      do
      {
        for (j = 0; j != v160; j = j + 1)
        {
          if (*v207 != v157)
          {
            objc_enumerationMutation(v28);
          }

          v30 = *(*(&v206 + 1) + 8 * j);
          v31 = [v28 safeObjectForKey:v30 ofClass:objc_opt_class()];
          if (v31)
          {
            v204 = 0u;
            v205 = 0u;
            v202 = 0u;
            v203 = 0u;
            v32 = v151;
            v33 = [v32 countByEnumeratingWithState:&v202 objects:v235 count:16];
            if (v33)
            {
              v34 = v33;
              v35 = *v203;
              while (2)
              {
                for (k = 0; k != v34; k = k + 1)
                {
                  if (*v203 != v35)
                  {
                    objc_enumerationMutation(v32);
                  }

                  firstEntryAssetType2 = [*(*(&v202 + 1) + 8 * k) firstEntryAssetType];
                  v38 = [firstEntryAssetType2 isEqualToString:v30];

                  if (v38)
                  {

                    goto LABEL_35;
                  }
                }

                v34 = [v32 countByEnumeratingWithState:&v202 objects:v235 count:16];
                if (v34)
                {
                  continue;
                }

                break;
              }
            }

            [v32 addObject:v31];
          }

          else
          {
            v39 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v39, OS_LOG_TYPE_ERROR))
            {
              summary3 = [(MADAutoAssetStager *)selfCopy summary];
              *buf = 138543874;
              v223 = summary3;
              v224 = 2114;
              v225 = arrayCopy;
              v226 = 2114;
              v227 = v30;
              _os_log_impl(&dword_0, v39, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@} unable to load stager-set-configuration from by-asset-type dict (dropping from candidates) | assetType:%{public}@", buf, 0x20u);
            }
          }

LABEL_35:
        }

        v160 = [v28 countByEnumeratingWithState:&v206 objects:v236 count:16];
      }

      while (v160);
    }

    v23 = selfCopy;
  }

  v140 = [v151 count];
  if (v140 < 1)
  {
    v44 = @"N";
    goto LABEL_149;
  }

  if ([(MADAutoAssetStager *)v23 stagingClientUsingGroups])
  {
    candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)v23 candidatesForStagingRequiredByTarget];
    v139 = [candidatesForStagingRequiredByTarget safeObjectForKey:v137 ofClass:objc_opt_class()];

    candidateSetConfigurationsRequiredByTarget2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
    v161 = [candidateSetConfigurationsRequiredByTarget2 safeObjectForKey:v137 ofClass:objc_opt_class()];

    candidateSetConfigurationsOptionalByTarget2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
    v143 = [candidateSetConfigurationsOptionalByTarget2 safeObjectForKey:v137 ofClass:objc_opt_class()];

    v23 = selfCopy;
  }

  else
  {
    v143 = 0;
    v161 = 0;
    v139 = 0;
  }

  [(MADAutoAssetStager *)v23 setCandidateSetConfigurations:v151];
  v45 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v45, OS_LOG_TYPE_DEFAULT))
  {
    summary4 = [(MADAutoAssetStager *)selfCopy summary];
    candidateSetConfigurations = [(MADAutoAssetStager *)selfCopy candidateSetConfigurations];
    v48 = [candidateSetConfigurations count];
    *buf = 138543874;
    v223 = summary4;
    v224 = 2114;
    v225 = arrayCopy;
    v226 = 2048;
    v227 = v48;
    _os_log_impl(&dword_0, v45, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} formed set-configurations (for determine lookups):%ld", buf, 0x20u);
  }

  for (m = 0; m != v140; ++m)
  {
    candidateSetConfigurations2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurations];
    v51 = [candidateSetConfigurations2 objectAtIndex:m];

    if (!v51)
    {
      goto LABEL_65;
    }

    if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
    {
      v200 = 0u;
      v201 = 0u;
      v198 = 0u;
      v199 = 0u;
      v52 = v139;
      v53 = [v52 countByEnumeratingWithState:&v198 objects:v234 count:16];
      if (v53)
      {
        v54 = v53;
        v55 = *v199;
        while (2)
        {
          for (n = 0; n != v54; n = n + 1)
          {
            if (*v199 != v55)
            {
              objc_enumerationMutation(v52);
            }

            assetType = [*(*(&v198 + 1) + 8 * n) assetType];
            firstEntryAssetType3 = [v51 firstEntryAssetType];
            v59 = [SUCore stringIsEqual:assetType to:firstEntryAssetType3];

            if (v59)
            {
              [v161 addObject:v51];
              v63 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v63, OS_LOG_TYPE_DEFAULT))
              {
                summary5 = [(MADAutoAssetStager *)selfCopy summary];
                _targetNameActive = [(MADAutoAssetStager *)selfCopy _targetNameActive];
                summary6 = [v51 summary];
                *buf = 138544642;
                v223 = summary5;
                v224 = 2114;
                v225 = _targetNameActive;
                v226 = 2114;
                v227 = arrayCopy;
                v228 = 2048;
                v229 = m + 1;
                v230 = 2048;
                v231 = v140;
                v232 = 2114;
                v233 = summary6;
                _os_log_impl(&dword_0, v63, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} set-configuration (%ld of %ld) [REQUIRED]:%{public}@", buf, 0x3Eu);
              }

              goto LABEL_64;
            }
          }

          v54 = [v52 countByEnumeratingWithState:&v198 objects:v234 count:16];
          if (v54)
          {
            continue;
          }

          break;
        }
      }

      [v143 addObject:v51];
      v52 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v52, OS_LOG_TYPE_DEFAULT))
      {
        goto LABEL_64;
      }

      summary7 = [(MADAutoAssetStager *)selfCopy summary];
      _targetNameActive2 = [(MADAutoAssetStager *)selfCopy _targetNameActive];
      summary8 = [v51 summary];
      *buf = 138544642;
      v223 = summary7;
      v224 = 2114;
      v225 = _targetNameActive2;
      v226 = 2114;
      v227 = arrayCopy;
      v228 = 2048;
      v229 = m + 1;
      v230 = 2048;
      v231 = v140;
      v232 = 2114;
      v233 = summary8;
      _os_log_impl(&dword_0, v52, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} set-configuration (%ld of %ld) [OPTIONAL]:%{public}@", buf, 0x3Eu);

      goto LABEL_60;
    }

    v52 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v52, OS_LOG_TYPE_DEFAULT))
    {
      summary7 = [(MADAutoAssetStager *)selfCopy summary];
      _targetNameActive2 = [v51 summary];
      *buf = 138544386;
      v223 = summary7;
      v224 = 2114;
      v225 = arrayCopy;
      v226 = 2048;
      v227 = m + 1;
      v228 = 2048;
      v229 = v140;
      v230 = 2114;
      v231 = _targetNameActive2;
      _os_log_impl(&dword_0, v52, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} set-configuration (%ld of %ld):%{public}@", buf, 0x34u);
LABEL_60:
    }

LABEL_64:

LABEL_65:
  }

  v67 = objc_opt_new();
  v68 = objc_opt_new();
  v149 = objc_opt_new();
  v150 = objc_opt_new();
  v69 = objc_alloc_init(NSMutableDictionary);
  v194 = 0u;
  v195 = 0u;
  v196 = 0u;
  v197 = 0u;
  obj = v161;
  v70 = [obj countByEnumeratingWithState:&v194 objects:v221 count:16];
  v148 = v69;
  v152 = v68;
  v154 = v67;
  if (v70)
  {
    v71 = v70;
    v72 = *v195;
    v145 = *v195;
    do
    {
      v73 = 0;
      v155 = v71;
      do
      {
        if (*v195 != v72)
        {
          objc_enumerationMutation(obj);
        }

        v162 = v73;
        v74 = *(*(&v194 + 1) + 8 * v73);
        firstEntryAssetType4 = [v74 firstEntryAssetType];
        if (firstEntryAssetType4)
        {
          [v69 setSafeObject:firstEntryAssetType4 forKey:firstEntryAssetType4];
          [v67 objectForKeyedSubscript:firstEntryAssetType4];
          v77 = v76 = v67;
          v158 = firstEntryAssetType4;
          if (v77)
          {
            v192 = 0u;
            v193 = 0u;
            v190 = 0u;
            v191 = 0u;
            autoAssetEntries = [v74 autoAssetEntries];
            v79 = [autoAssetEntries countByEnumeratingWithState:&v190 objects:v220 count:16];
            if (v79)
            {
              v80 = v79;
              v81 = *v191;
              do
              {
                for (ii = 0; ii != v80; ii = ii + 1)
                {
                  if (*v191 != v81)
                  {
                    objc_enumerationMutation(autoAssetEntries);
                  }

                  v83 = *(*(&v190 + 1) + 8 * ii);
                  v186 = 0u;
                  v187 = 0u;
                  v188 = 0u;
                  v189 = 0u;
                  v84 = v77;
                  v85 = [v84 countByEnumeratingWithState:&v186 objects:v219 count:16];
                  if (v85)
                  {
                    v86 = v85;
                    v87 = *v187;
                    while (2)
                    {
                      for (jj = 0; jj != v86; jj = jj + 1)
                      {
                        if (*v187 != v87)
                        {
                          objc_enumerationMutation(v84);
                        }

                        if ([v83 isEqual:*(*(&v186 + 1) + 8 * jj)])
                        {

                          goto LABEL_88;
                        }
                      }

                      v86 = [v84 countByEnumeratingWithState:&v186 objects:v219 count:16];
                      if (v86)
                      {
                        continue;
                      }

                      break;
                    }
                  }

                  [v84 addObject:v83];
LABEL_88:
                  ;
                }

                v80 = [autoAssetEntries countByEnumeratingWithState:&v190 objects:v220 count:16];
              }

              while (v80);
            }

            [v154 setObject:v77 forKeyedSubscript:v158];
            v69 = v148;
            v72 = v145;
            v71 = v155;
          }

          else
          {
            autoAssetEntries2 = [v74 autoAssetEntries];
            v90 = [autoAssetEntries2 mutableCopy];
            [v76 setObject:v90 forKeyedSubscript:firstEntryAssetType4];
          }

          v68 = v152;
          v67 = v154;
          firstEntryAssetType4 = v158;
        }

        v73 = v162 + 1;
      }

      while ((v162 + 1) != v71);
      v71 = [obj countByEnumeratingWithState:&v194 objects:v221 count:16];
    }

    while (v71);
  }

  v184 = 0u;
  v185 = 0u;
  v182 = 0u;
  v183 = 0u;
  v91 = v143;
  v92 = [v91 countByEnumeratingWithState:&v182 objects:v218 count:16];
  v142 = v91;
  if (!v92)
  {
    goto LABEL_128;
  }

  v93 = v92;
  v94 = *v183;
  v141 = *v183;
  while (2)
  {
    v95 = 0;
    v144 = v93;
    while (2)
    {
      if (*v183 != v94)
      {
        objc_enumerationMutation(v91);
      }

      v96 = *(*(&v182 + 1) + 8 * v95);
      firstEntryAssetType5 = [v96 firstEntryAssetType];
      if (firstEntryAssetType5)
      {
        v159 = v95;
        v98 = firstEntryAssetType5;
        v156 = [v69 safeObjectForKey:firstEntryAssetType5 ofClass:objc_opt_class()];
        v163 = v98;
        if (v156)
        {
          v99 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v99, OS_LOG_TYPE_DEFAULT))
          {
            summary9 = [(MADAutoAssetStager *)selfCopy summary];
            *buf = 138543874;
            v223 = summary9;
            v224 = 2114;
            v225 = arrayCopy;
            v226 = 2114;
            v227 = v98;
            _os_log_impl(&dword_0, v99, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} set-configuration already covered in REQUIRED so skipping for OPTIONAL | assetType:%{public}@", buf, 0x20u);
            goto LABEL_124;
          }
        }

        else
        {
          v99 = [v68 objectForKeyedSubscript:v98];
          if (v99)
          {
            v180 = 0u;
            v181 = 0u;
            v178 = 0u;
            v179 = 0u;
            autoAssetEntries3 = [v96 autoAssetEntries];
            v102 = [autoAssetEntries3 countByEnumeratingWithState:&v178 objects:v217 count:16];
            if (v102)
            {
              v103 = v102;
              v104 = *v179;
              do
              {
                for (kk = 0; kk != v103; kk = kk + 1)
                {
                  if (*v179 != v104)
                  {
                    objc_enumerationMutation(autoAssetEntries3);
                  }

                  v106 = *(*(&v178 + 1) + 8 * kk);
                  v174 = 0u;
                  v175 = 0u;
                  v176 = 0u;
                  v177 = 0u;
                  v107 = v99;
                  v108 = [v107 countByEnumeratingWithState:&v174 objects:v216 count:16];
                  if (v108)
                  {
                    v109 = v108;
                    v110 = *v175;
                    while (2)
                    {
                      for (mm = 0; mm != v109; mm = mm + 1)
                      {
                        if (*v175 != v110)
                        {
                          objc_enumerationMutation(v107);
                        }

                        if ([v106 isEqual:*(*(&v174 + 1) + 8 * mm)])
                        {

                          goto LABEL_120;
                        }
                      }

                      v109 = [v107 countByEnumeratingWithState:&v174 objects:v216 count:16];
                      if (v109)
                      {
                        continue;
                      }

                      break;
                    }
                  }

                  [v107 addObject:v106];
LABEL_120:
                  ;
                }

                v103 = [autoAssetEntries3 countByEnumeratingWithState:&v178 objects:v217 count:16];
              }

              while (v103);
            }

            v68 = v152;
            [v152 setObject:v99 forKeyedSubscript:v163];
            v69 = v148;
            v67 = v154;
            v94 = v141;
            v91 = v142;
            v93 = v144;
          }

          else
          {
            summary9 = [v96 autoAssetEntries];
            v112 = [summary9 mutableCopy];
            [v68 setObject:v112 forKeyedSubscript:v98];

LABEL_124:
          }
        }

        v95 = v159;
        firstEntryAssetType5 = v163;
      }

      if (++v95 != v93)
      {
        continue;
      }

      break;
    }

    v93 = [v91 countByEnumeratingWithState:&v182 objects:v218 count:16];
    if (v93)
    {
      continue;
    }

    break;
  }

LABEL_128:

  v172 = 0u;
  v173 = 0u;
  v170 = 0u;
  v171 = 0u;
  v113 = v67;
  v114 = [v113 countByEnumeratingWithState:&v170 objects:v215 count:16];
  if (v114)
  {
    v115 = v114;
    v116 = *v171;
    do
    {
      for (nn = 0; nn != v115; nn = nn + 1)
      {
        if (*v171 != v116)
        {
          objc_enumerationMutation(v113);
        }

        v118 = *(*(&v170 + 1) + 8 * nn);
        v119 = [v113 objectForKeyedSubscript:v118];
        v118 = [[NSString alloc] initWithFormat:@"%@_%@", @"AUTO_ASSET_STAGER_SET", v118];
        v121 = [(MADAutoAssetStager *)selfCopy newSetConfigurationForAssetSetIdentifier:v118 withAutoAssetEntries:v119];
        if (v121)
        {
          [v149 addObject:v121];
        }
      }

      v115 = [v113 countByEnumeratingWithState:&v170 objects:v215 count:16];
    }

    while (v115);
  }

  v164 = v149;
  v168 = 0u;
  v169 = 0u;
  v166 = 0u;
  v167 = 0u;
  v122 = v152;
  v123 = [v122 countByEnumeratingWithState:&v166 objects:v214 count:16];
  if (v123)
  {
    v124 = v123;
    v125 = *v167;
    do
    {
      for (i1 = 0; i1 != v124; i1 = i1 + 1)
      {
        if (*v167 != v125)
        {
          objc_enumerationMutation(v122);
        }

        v127 = *(*(&v166 + 1) + 8 * i1);
        v128 = [v122 objectForKeyedSubscript:v127];
        v127 = [[NSString alloc] initWithFormat:@"%@_%@", @"AUTO_ASSET_STAGER_SET", v127];
        v130 = [(MADAutoAssetStager *)selfCopy newSetConfigurationForAssetSetIdentifier:v127 withAutoAssetEntries:v128];
        if (v130)
        {
          [v150 addObject:v130];
        }
      }

      v124 = [v122 countByEnumeratingWithState:&v166 objects:v214 count:16];
    }

    while (v124);
  }

  v131 = v150;
  if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)selfCopy _blendCandidateSetConfigurations:arrayCopy blendingIntoRequiredConfigurations:v164 blendingFromOptionalConfigurations:v131];
    candidateSetConfigurationsRequiredByTarget3 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
    [candidateSetConfigurationsRequiredByTarget3 setSafeObject:v164 forKey:v137];

    candidateSetConfigurationsOptionalByTarget3 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
    [candidateSetConfigurationsOptionalByTarget3 setSafeObject:v131 forKey:v137];
  }

  v44 = @"Y";
LABEL_149:
  v134 = [[NSString alloc] initWithFormat:@"done forming set-lookups | haveSetLookups:%@", v44];
  [(MADAutoAssetStager *)selfCopy _logMilestoneFromLocation:arrayCopy resultingInEvent:0 forMilestoneActivity:v134];

  return v140 > 0;
}

- (void)_extendLookupByAssetTypeWithSetConfigurations:(id)configurations limitingToSetTargets:(id)targets
{
  configurationsCopy = configurations;
  targetsCopy = targets;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v109 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  v104 = objc_alloc_init(NSMutableDictionary);
  v116 = objc_alloc_init(NSMutableDictionary);
  v115 = objc_alloc_init(NSMutableDictionary);
  selfCopy = self;
  v114 = objc_alloc_init(NSMutableDictionary);
  v130 = 0u;
  v131 = 0u;
  v132 = 0u;
  v133 = 0u;
  setTargets = [(MADAutoAssetStager *)self setTargets];
  v13 = [setTargets countByEnumeratingWithState:&v130 objects:v145 count:16];
  selfCopy2 = self;
  v105 = targetsCopy;
  if (v13)
  {
    v14 = v13;
    v15 = *v131;
    v93 = *v131;
    v95 = setTargets;
    do
    {
      v16 = 0;
      v97 = v14;
      do
      {
        if (*v131 != v15)
        {
          objc_enumerationMutation(setTargets);
        }

        v17 = *(*(&v130 + 1) + 8 * v16);
        context = objc_autoreleasePoolPush();
        if (v17)
        {
          if (![(MADAutoAssetStager *)selfCopy _isSetTargetWithinRange:v17 asCandidate:1])
          {
            goto LABEL_36;
          }

          autoAssetEntries = [v17 autoAssetEntries];
          v19 = [autoAssetEntries count];

          if (v19)
          {
            firstEntryAssetType = [v17 firstEntryAssetType];
            v21 = [targetsCopy safeObjectForKey:firstEntryAssetType ofClass:objc_opt_class()];

            v102 = v21;
            if (v21)
            {
              v100 = v16;
              v128 = 0u;
              v129 = 0u;
              v126 = 0u;
              v127 = 0u;
              obj = [v17 autoAssetEntries];
              v22 = [obj countByEnumeratingWithState:&v126 objects:v144 count:16];
              if (v22)
              {
                v23 = v22;
                v24 = 0;
                v111 = *v127;
                do
                {
                  for (i = 0; i != v23; i = i + 1)
                  {
                    if (*v127 != v111)
                    {
                      objc_enumerationMutation(obj);
                    }

                    v26 = *(*(&v126 + 1) + 8 * i);
                    if (v26)
                    {
                      if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
                      {
                        if (!v24)
                        {
                          assetSelector = [v26 assetSelector];
                          assetType = [assetSelector assetType];
                          assetSelector2 = [v26 assetSelector];
                          assetSpecifier = [assetSelector2 assetSpecifier];
                          v24 = [(MADAutoAssetStager *)selfCopy2 _setConfigurationForAssetType:assetType forAssetSpecifier:assetSpecifier];

                          if (v24)
                          {
                            if ([(MADAutoAssetStager *)selfCopy2 _isSetConfigurationApplicableToRequired:v24])
                            {
                              candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsRequiredByTarget];
                              v32 = v109;
                              v33 = [candidateSetConfigurationsRequiredByTarget safeObjectForKey:v109 ofClass:objc_opt_class()];

                              [v33 addObject:v24];
                              [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsRequiredByTarget];
                            }

                            else
                            {
                              candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsOptionalByTarget];
                              v32 = v109;
                              v33 = [candidateSetConfigurationsOptionalByTarget safeObjectForKey:v109 ofClass:objc_opt_class()];

                              [v33 addObject:v24];
                              [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsOptionalByTarget];
                            }
                            v38 = ;
                            [v38 setSafeObject:v33 forKey:v32];
                          }
                        }
                      }

                      assetSelector3 = [v26 assetSelector];
                      assetType2 = [assetSelector3 assetType];
                      assetSelector4 = [v26 assetSelector];
                      assetSpecifier2 = [assetSelector4 assetSpecifier];
                      assetSelector5 = [v26 assetSelector];
                      downloadDecryptionKey = [assetSelector5 downloadDecryptionKey];
                      selfCopy = selfCopy2;
                      [(MADAutoAssetStager *)selfCopy2 _extendLookupByAssetType:configurationsCopy fromSource:@"SET-TARGET" withAssetType:assetType2 withAssetSpecifier:assetSpecifier2 withDownloadDecryptionKey:downloadDecryptionKey createdClientDefinedSetEntries:v116 createdNoClientSetEntries:v115 appendedSetEntries:v114];
                    }

                    else
                    {
                      assetSelector3 = _MADLog(@"AutoStager");
                      if (os_log_type_enabled(assetSelector3, OS_LOG_TYPE_ERROR))
                      {
                        summary = [(MADAutoAssetStager *)selfCopy summary];
                        setTargets2 = [(MADAutoAssetStager *)selfCopy setTargets];
                        *buf = 138543618;
                        v135 = summary;
                        v136 = 2114;
                        v137 = setTargets2;
                        _os_log_impl(&dword_0, assetSelector3, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithSetConfigurations} nil set-entry encountered on setTargets array | setTargets:\n%{public}@", buf, 0x16u);
                      }
                    }
                  }

                  v23 = [obj countByEnumeratingWithState:&v126 objects:v144 count:16];
                }

                while (v23);
              }

              else
              {
                v24 = 0;
              }

              targetsCopy = v105;
              v15 = v93;
              setTargets = v95;
              v14 = v97;
              v16 = v100;
            }

            v44 = v102;
          }

          else
          {
            v46 = [NSString alloc];
            clientDomainName = [v17 clientDomainName];
            [v17 assetSetIdentifier];
            v49 = v48 = v16;
            v44 = [v46 initWithFormat:@"%@^%@", clientDomainName, v49];

            v16 = v48;
            [v104 setSafeObject:v17 forKey:v44];
          }
        }

        else
        {
          v44 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v44, OS_LOG_TYPE_ERROR))
          {
            summary2 = [(MADAutoAssetStager *)selfCopy summary];
            *buf = 138543362;
            v135 = summary2;
            _os_log_impl(&dword_0, v44, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithSetConfigurations} nil encountered on setTargets array", buf, 0xCu);
          }
        }

LABEL_36:
        objc_autoreleasePoolPop(context);
        v16 = v16 + 1;
      }

      while (v16 != v14);
      v14 = [setTargets countByEnumeratingWithState:&v130 objects:v145 count:16];
    }

    while (v14);
  }

  v124 = 0u;
  v125 = 0u;
  v122 = 0u;
  v123 = 0u;
  setConfigurations = [(MADAutoAssetStager *)selfCopy setConfigurations];
  v50 = [setConfigurations countByEnumeratingWithState:&v122 objects:v143 count:16];
  if (v50)
  {
    v51 = v50;
    v52 = *v123;
    v92 = *v123;
    do
    {
      v53 = 0;
      v94 = v51;
      do
      {
        if (*v123 != v52)
        {
          objc_enumerationMutation(setConfigurations);
        }

        v54 = *(*(&v122 + 1) + 8 * v53);
        v55 = objc_autoreleasePoolPush();
        if (v54)
        {
          firstEntryAssetType2 = [v54 firstEntryAssetType];
          v56 = [v105 safeObjectForKey:firstEntryAssetType2 ofClass:objc_opt_class()];
          v57 = [NSString alloc];
          clientDomainName2 = [v54 clientDomainName];
          assetSetIdentifier = [v54 assetSetIdentifier];
          v60 = [v57 initWithFormat:@"%@^%@", clientDomainName2, assetSetIdentifier];

          v61 = [v104 safeObjectForKey:v60 ofClass:objc_opt_class()];
          if (!(v56 | v61))
          {
            v98 = v61;
            v99 = v60;
            v101 = v56;
            v62 = [(MADAutoAssetStager *)selfCopy2 _isSetConfigurationApplicableToRequired:v54];
            if ([(MADAutoAssetStager *)selfCopy2 stagingClientUsingGroups])
            {
              if (v62)
              {
                candidateSetConfigurationsRequiredByTarget2 = [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsRequiredByTarget];
                v64 = v109;
                v65 = [candidateSetConfigurationsRequiredByTarget2 safeObjectForKey:v109 ofClass:objc_opt_class()];

                [v65 addObject:v54];
                [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsRequiredByTarget];
              }

              else
              {
                candidateSetConfigurationsOptionalByTarget2 = [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsOptionalByTarget];
                v64 = v109;
                v65 = [candidateSetConfigurationsOptionalByTarget2 safeObjectForKey:v109 ofClass:objc_opt_class()];

                [v65 addObject:v54];
                [(MADAutoAssetStager *)selfCopy2 candidateSetConfigurationsOptionalByTarget];
              }
              v70 = ;
              [v70 setSafeObject:v65 forKey:v64];
            }

            v103 = v55;
            contexta = v53;
            v120 = 0u;
            v121 = 0u;
            v118 = 0u;
            v119 = 0u;
            v112 = v54;
            autoAssetEntries2 = [v54 autoAssetEntries];
            v72 = [autoAssetEntries2 countByEnumeratingWithState:&v118 objects:v142 count:16];
            if (v72)
            {
              v73 = v72;
              v74 = *v119;
              do
              {
                for (j = 0; j != v73; j = j + 1)
                {
                  if (*v119 != v74)
                  {
                    objc_enumerationMutation(autoAssetEntries2);
                  }

                  v76 = *(*(&v118 + 1) + 8 * j);
                  if (v76)
                  {
                    assetSelector6 = [*(*(&v118 + 1) + 8 * j) assetSelector];
                    assetType3 = [assetSelector6 assetType];
                    assetSelector7 = [v76 assetSelector];
                    assetSpecifier3 = [assetSelector7 assetSpecifier];
                    assetSelector8 = [v76 assetSelector];
                    downloadDecryptionKey2 = [assetSelector8 downloadDecryptionKey];
                    [(MADAutoAssetStager *)selfCopy2 _extendLookupByAssetType:configurationsCopy fromSource:@"AUTO-CONTROL-MANAGER-PROVIDED-SET-CONFIGURATION" withAssetType:assetType3 withAssetSpecifier:assetSpecifier3 withDownloadDecryptionKey:downloadDecryptionKey2 createdClientDefinedSetEntries:v116 createdNoClientSetEntries:v115 appendedSetEntries:v114];
                  }

                  else
                  {
                    assetSelector6 = _MADLog(@"AutoStager");
                    if (!os_log_type_enabled(assetSelector6, OS_LOG_TYPE_ERROR))
                    {
                      goto LABEL_62;
                    }

                    assetType3 = [(MADAutoAssetStager *)selfCopy2 summary];
                    summary3 = [v112 summary];
                    *buf = 138543618;
                    v135 = assetType3;
                    v136 = 2114;
                    v137 = summary3;
                    _os_log_impl(&dword_0, assetSelector6, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithSetConfigurations} nil set-entry encountered on setConfiguration array | nextSetConfiguration:%{public}@", buf, 0x16u);
                  }

LABEL_62:
                }

                v73 = [autoAssetEntries2 countByEnumeratingWithState:&v118 objects:v142 count:16];
              }

              while (v73);
            }

            v52 = v92;
            v51 = v94;
            v53 = contexta;
            v56 = v101;
            v55 = v103;
            v61 = v98;
            v60 = v99;
          }

          v66 = firstEntryAssetType2;
        }

        else
        {
          v66 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v66, OS_LOG_TYPE_ERROR))
          {
            summary4 = [(MADAutoAssetStager *)selfCopy2 summary];
            setConfigurations2 = [(MADAutoAssetStager *)selfCopy2 setConfigurations];
            *buf = 138543618;
            v135 = summary4;
            v136 = 2114;
            v137 = setConfigurations2;
            _os_log_impl(&dword_0, v66, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithSetConfigurations} nil set-configuration encountered on setConfgurations provided from auto-control-manager | setConfigurations\n:%{public}@", buf, 0x16u);
          }
        }

        objc_autoreleasePoolPop(v55);
        v53 = v53 + 1;
        selfCopy = selfCopy2;
      }

      while (v53 != v51);
      v51 = [setConfigurations countByEnumeratingWithState:&v122 objects:v143 count:16];
    }

    while (v51);
  }

  v84 = _MADLog(@"AutoStager");
  v85 = v105;
  if (os_log_type_enabled(v84, OS_LOG_TYPE_DEFAULT))
  {
    summary5 = [(MADAutoAssetStager *)selfCopy summary];
    v87 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v116];
    v88 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v115];
    v89 = selfCopy;
    v90 = v88;
    v91 = [(MADAutoAssetStager *)v89 selectorContainerAsString:v114];
    *buf = 138544130;
    v135 = summary5;
    v136 = 2114;
    v137 = v87;
    v138 = 2114;
    v139 = v90;
    v140 = 2114;
    v141 = v91;
    _os_log_impl(&dword_0, v84, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithSetConfigurations} | extended set-lookup-map with target/configuration set-entries\n>>> created[Client:%{public}@][No:%{public}@]]\n>>> appended:%{public}@", buf, 0x2Au);

    v85 = v105;
  }
}

- (void)_extendLookupByAssetTypeWithDownloadedDescriptors:(id)descriptors limitingToSetTargets:(id)targets
{
  descriptorsCopy = descriptors;
  targetsCopy = targets;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v11 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
  v57 = v11;
  v54 = [candidatesForStagingRequiredByTarget safeObjectForKey:v11 ofClass:objc_opt_class()];

  v52 = objc_alloc_init(NSMutableDictionary);
  v55 = objc_alloc_init(NSMutableDictionary);
  v56 = objc_alloc_init(NSMutableDictionary);
  v53 = objc_alloc_init(NSMutableDictionary);
  v63 = objc_alloc_init(NSMutableDictionary);
  v66 = objc_alloc_init(NSMutableDictionary);
  v62 = objc_alloc_init(NSMutableDictionary);
  v61 = objc_alloc_init(NSMutableDictionary);
  v60 = objc_alloc_init(NSMutableDictionary);
  v69 = 0u;
  v70 = 0u;
  v71 = 0u;
  v72 = 0u;
  obj = [(MADAutoAssetStager *)self alreadyDownloadedDescriptors];
  v13 = [obj countByEnumeratingWithState:&v69 objects:v93 count:16];
  v58 = descriptorsCopy;
  if (v13)
  {
    v14 = v13;
    v15 = *v70;
    selfCopy = self;
    do
    {
      for (i = 0; i != v14; i = i + 1)
      {
        if (*v70 != v15)
        {
          objc_enumerationMutation(obj);
        }

        v17 = *(*(&v69 + 1) + 8 * i);
        v18 = objc_autoreleasePoolPush();
        if (!v17)
        {
          v22 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
          {
            summary = [(MADAutoAssetStager *)self summary];
            *buf = 138543362;
            v74 = summary;
            _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithDownloadedDescriptors} nil encountered on alreadyDownloadedDescriptors array", buf, 0xCu);
            goto LABEL_15;
          }

LABEL_16:

          goto LABEL_28;
        }

        assetType = [v17 assetType];

        if (!assetType)
        {
          v22 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
          {
            summary = [(MADAutoAssetStager *)self summary];
            summary2 = [v17 summary];
            *buf = 138543618;
            v74 = summary;
            v75 = 2114;
            v76 = summary2;
            _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithDownloadedDescriptors} nil asset-type for asset-descriptor | autoAssetDescriptor:%{public}@", buf, 0x16u);

LABEL_15:
          }

          goto LABEL_16;
        }

        if ([v17 preSoftwareUpdateAssetStaging])
        {
          assetType2 = [v17 assetType];
          v21 = [targetsCopy safeObjectForKey:assetType2 ofClass:objc_opt_class()];

          if (v21)
          {
            [(MADAutoAssetStager *)self trackSelectorForDescriptor:v17 inContainer:v63];
          }

          else
          {
            isPreSUStagingRequired = [v17 isPreSUStagingRequired];
            assetType3 = [v17 assetType];
            assetSpecifier = [v17 assetSpecifier];
            [(MADAutoAssetStager *)selfCopy _extendLookupByAssetType:descriptorsCopy fromSource:@"DESCRIPTOR" withAssetType:assetType3 withAssetSpecifier:assetSpecifier createdClientDefinedSetEntries:v62 createdNoClientSetEntries:v61 appendedSetEntries:v60];

            self = selfCopy;
            if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
            {
              v59 = isPreSUStagingRequired;
              assetType4 = [v17 assetType];
              assetSpecifier2 = [v17 assetSpecifier];
              v30 = [(MADAutoAssetStager *)selfCopy _setConfigurationForAssetType:assetType4 forAssetSpecifier:assetSpecifier2];

              if (v30)
              {
                if ((v59 & 1) != 0 || ([v30 firstEntryAssetType], v31 = objc_claimAutoreleasedReturnValue(), v32 = -[MADAutoAssetStager isAssetType:representedInAssetDescriptors:](selfCopy, "isAssetType:representedInAssetDescriptors:", v31, v54), v31, v32))
                {
                  candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
                  v34 = [candidateSetConfigurationsRequiredByTarget safeObjectForKey:v57 ofClass:objc_opt_class()];

                  [v34 addObject:v30];
                  candidateSetConfigurationsRequiredByTarget2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
                  self = selfCopy;
                  [candidateSetConfigurationsRequiredByTarget2 setSafeObject:v34 forKey:v57];

                  v36 = selfCopy;
                  v37 = v17;
                  v38 = v56;
                }

                else
                {
                  candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
                  v34 = [candidateSetConfigurationsOptionalByTarget safeObjectForKey:v57 ofClass:objc_opt_class()];

                  [v34 addObject:v30];
                  candidateSetConfigurationsOptionalByTarget2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
                  self = selfCopy;
                  [candidateSetConfigurationsOptionalByTarget2 setSafeObject:v34 forKey:v57];

                  v36 = selfCopy;
                  v37 = v17;
                  v38 = v53;
                }

                [(MADAutoAssetStager *)v36 trackSelectorForDescriptor:v37 inContainer:v38];
              }

              else
              {
                [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v17 inContainer:v55];
                self = selfCopy;
              }

              descriptorsCopy = v58;
            }
          }
        }

        else
        {
          [(MADAutoAssetStager *)self trackSelectorForDescriptor:v17 inContainer:v66];
        }

LABEL_28:
        objc_autoreleasePoolPop(v18);
      }

      v14 = [obj countByEnumeratingWithState:&v69 objects:v93 count:16];
    }

    while (v14);
  }

  v41 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v41, OS_LOG_TYPE_DEFAULT))
  {
    obja = [(MADAutoAssetStager *)self summary];
    v42 = [(MADAutoAssetStager *)self selectorContainerAsString:v62];
    v43 = [(MADAutoAssetStager *)self selectorContainerAsString:v61];
    v44 = [(MADAutoAssetStager *)self selectorContainerAsString:v60];
    v45 = [(MADAutoAssetStager *)self selectorContainerAsString:v56];
    [(MADAutoAssetStager *)self selectorContainerAsString:v53];
    v47 = v46 = self;
    v48 = [(MADAutoAssetStager *)v46 selectorContainerAsString:v52];
    v49 = [(MADAutoAssetStager *)v46 selectorContainerAsString:v55];
    v50 = [(MADAutoAssetStager *)v46 selectorContainerAsString:v63];
    v51 = [(MADAutoAssetStager *)v46 selectorContainerAsString:v66];
    *buf = 138545666;
    v74 = obja;
    v75 = 2114;
    v76 = v42;
    v77 = 2114;
    v78 = v43;
    v79 = 2114;
    v80 = v44;
    v81 = 2114;
    v82 = v45;
    v83 = 2114;
    v84 = v47;
    v85 = 2114;
    v86 = v48;
    v87 = 2114;
    v88 = v49;
    v89 = 2114;
    v90 = v50;
    v91 = 2114;
    v92 = v51;
    _os_log_impl(&dword_0, v41, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetTypeWithDownloadedDescriptors} | final candidate summary\n>>> created[Client:%{public}@][No:%{public}@]]\n>>> appended:%{public}@\n>>> addedRequired:%{public}@\n>>> addedOptional:%{public}@\n>>> setTargetRemoves:%{public}@\n>>> noSetConfiguration:%{public}@\n>>> ignored(bySetTarget:%{public}@,NoSupport:%{public}@)", buf, 0x66u);

    descriptorsCopy = v58;
  }
}

- (void)_extendLookupByAssetType:(id)type fromSource:(id)source withAssetType:(id)assetType withAssetSpecifier:(id)specifier withDownloadDecryptionKey:(id)key createdClientDefinedSetEntries:(id)entries createdNoClientSetEntries:(id)setEntries appendedSetEntries:(id)self0
{
  typeCopy = type;
  sourceCopy = source;
  assetTypeCopy = assetType;
  specifierCopy = specifier;
  keyCopy = key;
  entriesCopy = entries;
  setEntriesCopy = setEntries;
  appendedSetEntriesCopy = appendedSetEntries;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v23 = [(MADAutoAssetStager *)self _setConfigurationForAssetType:assetTypeCopy forAssetSpecifier:specifierCopy];
  v56 = typeCopy;
  v24 = [typeCopy safeObjectForKey:assetTypeCopy ofClass:objc_opt_class()];
  if (v24)
  {
    v25 = v24;
    v26 = [v24 assetSetEntryForAssetType:assetTypeCopy forAssetSpecifier:specifierCopy];

    if (v26)
    {
      v27 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v27, OS_LOG_TYPE_DEBUG))
      {
        summary = [(MADAutoAssetStager *)self summary];
        summary2 = [v25 summary];
        *buf = 138544386;
        v58 = summary;
        v59 = 2114;
        v60 = sourceCopy;
        v61 = 2114;
        v62 = summary2;
        v63 = 2114;
        v64 = assetTypeCopy;
        v65 = 2114;
        v66 = specifierCopy;
        _os_log_impl(&dword_0, v27, OS_LOG_TYPE_DEBUG, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetType} [%{public}@] asset-selector already tracked as candidate | setConfiguration:%{public}@ | assetType:%{public}@ | assetSpecifier:%{public}@", buf, 0x34u);
      }

      goto LABEL_29;
    }

    v52 = sourceCopy;
    v35 = [NSMutableArray alloc];
    autoAssetEntries = [v25 autoAssetEntries];
    v27 = [v35 initWithArray:autoAssetEntries];

    if (v23)
    {
      v37 = [v23 assetSetEntryForAssetType:assetTypeCopy forAssetSpecifier:specifierCopy];
      if (!v37)
      {
        v38 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v38, OS_LOG_TYPE_ERROR))
        {
          summary3 = [(MADAutoAssetStager *)self summary];
          *buf = 138544130;
          v58 = summary3;
          v59 = 2114;
          v60 = v52;
          v61 = 2114;
          v62 = assetTypeCopy;
          v63 = 2114;
          v64 = specifierCopy;
          v40 = "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetType} [%{public}@] unable to locate additional asset-set-entry | assetType:%{public}@ | assetSpecifier:%{public}@";
LABEL_32:
          _os_log_impl(&dword_0, v38, OS_LOG_TYPE_ERROR, v40, buf, 0x2Au);

          goto LABEL_33;
        }

        goto LABEL_33;
      }
    }

    else
    {
      v37 = [[MANAutoAssetSetEntry alloc] initForAssetType:assetTypeCopy withAssetSpecifier:specifierCopy usingDecryptionKey:0];
      if (!v37)
      {
        v38 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v38, OS_LOG_TYPE_ERROR))
        {
          summary3 = [(MADAutoAssetStager *)self summary];
          *buf = 138544130;
          v58 = summary3;
          v59 = 2114;
          v60 = v52;
          v61 = 2114;
          v62 = assetTypeCopy;
          v63 = 2114;
          v64 = specifierCopy;
          v40 = "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetType} [%{public}@] unable to create asset-set-entry | assetType:%{public}@ | assetSpecifier:%{public}@";
          goto LABEL_32;
        }

LABEL_33:
        v48 = appendedSetEntriesCopy;
        goto LABEL_34;
      }
    }

    v38 = v37;
    v50 = setEntriesCopy;
    [v27 addObject:v37];
    clientDomainName = [v25 clientDomainName];
    assetSetIdentifier = [v25 assetSetIdentifier];
    v47 = [(MADAutoAssetStager *)self newSetConfigurationForClientDomainName:clientDomainName forAssetSetIdentifier:assetSetIdentifier withAutoAssetEntries:v27];

    [v56 setSafeObject:v47 forKey:assetTypeCopy];
    v48 = appendedSetEntriesCopy;
    [(MADAutoAssetStager *)self trackSelectorForSetEntry:v38 inContainer:appendedSetEntriesCopy];
    v25 = v47;
    setEntriesCopy = v50;
LABEL_34:

    sourceCopy = v52;
    goto LABEL_35;
  }

  v51 = sourceCopy;
  v27 = objc_alloc_init(NSMutableArray);
  v49 = setEntriesCopy;
  if (!v23)
  {
    v41 = [[MANAutoAssetSetEntry alloc] initForAssetType:assetTypeCopy withAssetSpecifier:specifierCopy usingDecryptionKey:keyCopy];
    if (v41)
    {
      v31 = v41;
      [v27 addObject:v41];
      assetTypeCopy = [[NSString alloc] initWithFormat:@"%@_%@", @"AUTO_ASSET_STAGER_SET", assetTypeCopy];
      [(MADAutoAssetStager *)self trackSelectorForSetEntry:v31 inContainer:setEntriesCopy];
      clientDomainName2 = @"com.apple.MobileAsset.AutoAssetStager.client";
      autoAssetSetClientName = @"AUTO_ASSET_STAGER_AS_CLIENT";
      goto LABEL_14;
    }

    v42 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v42, OS_LOG_TYPE_ERROR))
    {
      summary4 = [(MADAutoAssetStager *)self summary];
      *buf = 138544130;
      v58 = summary4;
      v59 = 2114;
      v60 = sourceCopy;
      v61 = 2114;
      v62 = assetTypeCopy;
      v63 = 2114;
      v64 = specifierCopy;
      _os_log_impl(&dword_0, v42, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetType} [%{public}@] unable to create asset-set-entry | assetType:%{public}@ | assetSpecifier:%{public}@", buf, 0x2Au);
      goto LABEL_25;
    }

LABEL_26:

    clientDomainName2 = 0;
    autoAssetSetClientName = 0;
    assetTypeCopy = 0;
    v31 = 0;
LABEL_27:
    v25 = 0;
    goto LABEL_28;
  }

  v30 = [v23 assetSetEntryForAssetType:assetTypeCopy forAssetSpecifier:specifierCopy];
  if (!v30)
  {
    v42 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v42, OS_LOG_TYPE_ERROR))
    {
      summary4 = [(MADAutoAssetStager *)self summary];
      summary5 = [v23 summary];
      *buf = 138544386;
      v58 = summary4;
      v59 = 2114;
      v60 = sourceCopy;
      v61 = 2114;
      v62 = assetTypeCopy;
      v63 = 2114;
      v64 = specifierCopy;
      v65 = 2114;
      v66 = summary5;
      _os_log_impl(&dword_0, v42, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_extendLookupByAssetType} [%{public}@] unable to locate asset-set-entry | assetType:%{public}@ | assetSpecifier:%{public}@ | clientDefinedSetConfiguration:%{public}@", buf, 0x34u);

LABEL_25:
      goto LABEL_26;
    }

    goto LABEL_26;
  }

  v31 = v30;
  [v27 addObject:v30];
  clientDomainName2 = [v23 clientDomainName];
  autoAssetSetClientName = [v23 autoAssetSetClientName];
  assetTypeCopy = [v23 assetSetIdentifier];
  [(MADAutoAssetStager *)self trackSelectorForSetEntry:v31 inContainer:entriesCopy];
LABEL_14:
  v25 = 0;
  if (!clientDomainName2 || !autoAssetSetClientName || !assetTypeCopy)
  {
    goto LABEL_28;
  }

  if (![v27 count])
  {
    goto LABEL_27;
  }

  v25 = [(MADAutoAssetStager *)self newSetConfigurationForClientDomainName:clientDomainName2 forAssetSetIdentifier:assetTypeCopy withAutoAssetEntries:v27];
  [v56 setSafeObject:v25 forKey:assetTypeCopy];
LABEL_28:

  setEntriesCopy = v49;
  sourceCopy = v51;
LABEL_29:
  v48 = appendedSetEntriesCopy;
LABEL_35:
}

- (id)_trimConsideringToLatestDownloaded:(id)downloaded
{
  downloadedCopy = downloaded;
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v7 = downloadedCopy;
  v8 = objc_alloc_init(NSMutableDictionary);
  v49 = objc_alloc_init(NSMutableDictionary);
  v48 = objc_alloc_init(NSMutableDictionary);
  v50 = objc_alloc_init(NSMutableDictionary);
  v59 = 0u;
  v60 = 0u;
  v61 = 0u;
  v62 = 0u;
  obj = v7;
  v51 = v8;
  v54 = [obj countByEnumeratingWithState:&v59 objects:v72 count:16];
  if (!v54)
  {
    goto LABEL_22;
  }

  v53 = *v60;
  p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
  while (2)
  {
    for (i = 0; i != v54; i = i + 1)
    {
      if (*v60 != v53)
      {
        objc_enumerationMutation(obj);
      }

      v11 = *(*(&v59 + 1) + 8 * i);
      v12 = objc_autoreleasePoolPush();
      v13 = [MAAutoAssetSelector alloc];
      assetType = [v11 assetType];
      assetSpecifier = [v11 assetSpecifier];
      v16 = [v13 initForAssetType:assetType withAssetSpecifier:assetSpecifier];

      persistedEntryID = [v16 persistedEntryID];
      v18 = [v8 safeObjectForKey:persistedEntryID ofClass:objc_opt_class()];

      if (!v18)
      {
        persistedEntryID2 = [v16 persistedEntryID];
        [v8 setSafeObject:v11 forKey:persistedEntryID2];
LABEL_12:

        goto LABEL_13;
      }

      v19 = v8;
      v20 = p_weak_ivar_lyt[223];
      persistedEntryID2 = [v11 assetType];
      assetType2 = [v18 assetType];
      if (([v20 stringIsEqual:persistedEntryID2 to:assetType2] & 1) == 0)
      {

        v8 = v19;
        goto LABEL_12;
      }

      v23 = p_weak_ivar_lyt[223];
      assetSpecifier2 = [v11 assetSpecifier];
      assetSpecifier3 = [v18 assetSpecifier];
      LODWORD(v23) = [v23 stringIsEqual:assetSpecifier2 to:assetSpecifier3];

      v8 = v51;
      if (v23)
      {
        v26 = [SUCoreRestoreVersion alloc];
        assetVersion = [v11 assetVersion];
        v28 = [v26 initWithRestoreVersion:assetVersion];

        v29 = [SUCoreRestoreVersion alloc];
        assetVersion2 = [v18 assetVersion];
        v31 = [v29 initWithRestoreVersion:assetVersion2];

        if ([v28 isComparable:v31])
        {
          v8 = v51;
          if ([v28 compare:v31] == &dword_0 + 1)
          {
            [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v11 inContainer:v49];
            persistedEntryID3 = [v16 persistedEntryID];
            [v51 setSafeObject:v11 forKey:persistedEntryID3];
          }

          else
          {
            [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v11 inContainer:v48];
          }
        }

        else
        {
          [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v11 inContainer:v50];
          v8 = v51;
        }

        objc_autoreleasePoolPop(v12);
        goto LABEL_22;
      }

LABEL_13:

      objc_autoreleasePoolPop(v12);
      p_weak_ivar_lyt = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
    }

    v54 = [obj countByEnumeratingWithState:&v59 objects:v72 count:16];
    if (v54)
    {
      continue;
    }

    break;
  }

LABEL_22:
  v34 = obj;

  if ([v8 count])
  {
    v34 = objc_alloc_init(NSMutableArray);

    v57 = 0u;
    v58 = 0u;
    v55 = 0u;
    v56 = 0u;
    v35 = v8;
    v36 = [v35 countByEnumeratingWithState:&v55 objects:v71 count:16];
    if (v36)
    {
      v37 = v36;
      v38 = *v56;
      do
      {
        for (j = 0; j != v37; j = j + 1)
        {
          if (*v56 != v38)
          {
            objc_enumerationMutation(v35);
          }

          v40 = [v35 safeObjectForKey:*(*(&v55 + 1) + 8 * j) ofClass:objc_opt_class()];
          if (v40)
          {
            [v34 addObject:v40];
          }
        }

        v37 = [v35 countByEnumeratingWithState:&v55 objects:v71 count:16];
      }

      while (v37);
    }

    v8 = v51;
  }

  v41 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v41, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)selfCopy summary];
    v43 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v49];
    v44 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v48];
    v45 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v50];
    *buf = 138544130;
    v64 = summary;
    v65 = 2114;
    v66 = v43;
    v67 = 2114;
    v68 = v44;
    v69 = 2114;
    v70 = v45;
    _os_log_impl(&dword_0, v41, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_trimConsideringToLatestDownloaded} consideration summary\n>>> bestCandidateSoFarEntries:%{public}@\n>>> olderEntries:%{public}@\n>>> notComparableEntries:%{public}@", buf, 0x2Au);

    v8 = v51;
  }

  return v34;
}

- (id)_setTargetForAssetType:(id)type
{
  typeCopy = type;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v22 = 0u;
  v23 = 0u;
  v20 = 0u;
  v21 = 0u;
  selfCopy = self;
  setConfigurations = [(MADAutoAssetStager *)self setConfigurations];
  v8 = [setConfigurations countByEnumeratingWithState:&v20 objects:v24 count:16];
  if (v8)
  {
    v9 = v8;
    v10 = *v21;
    while (2)
    {
      for (i = 0; i != v9; i = i + 1)
      {
        if (*v21 != v10)
        {
          objc_enumerationMutation(setConfigurations);
        }

        v12 = *(*(&v20 + 1) + 8 * i);
        v13 = objc_autoreleasePoolPush();
        firstEntryAssetType = [v12 firstEntryAssetType];
        v15 = [SUCore stringIsEqual:firstEntryAssetType to:typeCopy];

        if (v15)
        {
          v16 = [(MADAutoAssetStager *)selfCopy _setTargetForSetConfiguration:v12];
          if (v16)
          {
            v17 = v16;
            objc_autoreleasePoolPop(v13);
            goto LABEL_12;
          }
        }

        objc_autoreleasePoolPop(v13);
      }

      v9 = [setConfigurations countByEnumeratingWithState:&v20 objects:v24 count:16];
      if (v9)
      {
        continue;
      }

      break;
    }
  }

  v17 = 0;
LABEL_12:

  return v17;
}

- (id)_setConfigurationForAssetType:(id)type forAssetSpecifier:(id)specifier
{
  typeCopy = type;
  specifierCopy = specifier;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v41 = 0u;
  v42 = 0u;
  v39 = 0u;
  v40 = 0u;
  setConfigurations = [(MADAutoAssetStager *)self setConfigurations];
  v10 = [setConfigurations countByEnumeratingWithState:&v39 objects:v51 count:16];
  if (!v10)
  {
    v37 = 0;
    v12 = specifierCopy;
LABEL_29:

    goto LABEL_31;
  }

  v11 = v10;
  v36 = 0;
  v37 = 0;
  v38 = *v40;
  v33 = typeCopy;
  v34 = setConfigurations;
  v12 = specifierCopy;
  do
  {
    for (i = 0; i != v11; i = i + 1)
    {
      if (*v40 != v38)
      {
        objc_enumerationMutation(setConfigurations);
      }

      v14 = *(*(&v39 + 1) + 8 * i);
      v15 = objc_autoreleasePoolPush();
      v16 = [(MADAutoAssetStager *)self _setTargetForSetConfiguration:v14];
      v17 = [v14 assetSetEntryForAssetType:typeCopy forAssetSpecifier:v12];
      if (v17 && ![(MADAutoAssetStager *)self _isAssetSetEntry:v17 blockedBySetTarget:v16])
      {
        v18 = v37;
        if (v37)
        {
          if (v36)
          {
            v36 = 1;
          }

          else
          {
            assetSelector = [v17 assetSelector];
            downloadDecryptionKey = [assetSelector downloadDecryptionKey];

            if (downloadDecryptionKey)
            {
              v21 = v14;

              v36 = 1;
              v18 = v21;
              setConfigurations = v34;
              v12 = specifierCopy;
            }

            else
            {
              v36 = 0;
              setConfigurations = v34;
              v12 = specifierCopy;
              v18 = v37;
            }
          }

          v37 = v18;
          if (v16)
          {
            v22 = [v16 assetSetEntryForAssetType:typeCopy forAssetSpecifier:v12];
            v23 = v22;
            if (v22)
            {
              assetSelector2 = [v22 assetSelector];
              downloadDecryptionKey2 = [assetSelector2 downloadDecryptionKey];

              v12 = specifierCopy;
              if (downloadDecryptionKey2)
              {
                v29 = v14;

                objc_autoreleasePoolPop(v15);
                v37 = v29;
                typeCopy = v33;
                setConfigurations = v34;
                goto LABEL_25;
              }
            }

            else
            {
              v26 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v26, OS_LOG_TYPE_ERROR))
              {
                summary = [(MADAutoAssetStager *)self summary];
                summary2 = [v16 summary];
                *buf = 138544130;
                v44 = summary;
                v45 = 2114;
                v46 = typeCopy;
                v47 = 2114;
                v48 = specifierCopy;
                v49 = 2114;
                v50 = summary2;
                v28 = summary2;
                _os_log_impl(&dword_0, v26, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_setConfigurationForAssetDescriptor} unable to locate set-target entry when set-target allows entry | assetType:%{public}@ | assetSpecifier:%{public}@ | setTarget:%{public}@", buf, 0x2Au);

                v12 = specifierCopy;
              }
            }

            typeCopy = v33;
            setConfigurations = v34;
          }
        }

        else
        {
          v37 = v14;
        }
      }

      objc_autoreleasePoolPop(v15);
    }

    v11 = [setConfigurations countByEnumeratingWithState:&v39 objects:v51 count:16];
  }

  while (v11);
LABEL_25:

  if (v37)
  {
    setConfigurations = [(MADAutoAssetStager *)self _setTargetForSetConfiguration:v37];
    if (setConfigurations)
    {
      v30 = [(MADAutoAssetStager *)self _setConfigurationAdjustedFrom:v37 basedOnSetTarget:setConfigurations];

      v37 = v30;
      typeCopy = v33;
    }

    goto LABEL_29;
  }

  v37 = 0;
LABEL_31:

  return v37;
}

- (BOOL)_isAssetSetEntry:(id)entry blockedBySetTarget:(id)target
{
  if (!target)
  {
    return 0;
  }

  targetCopy = target;
  entryCopy = entry;
  assetSelector = [entryCopy assetSelector];
  assetType = [assetSelector assetType];
  assetSelector2 = [entryCopy assetSelector];

  assetSpecifier = [assetSelector2 assetSpecifier];
  v11 = [targetCopy assetSetEntryForAssetType:assetType forAssetSpecifier:assetSpecifier];

  v12 = v11 == 0;
  return v12;
}

- (id)_setTargetForSetConfiguration:(id)configuration
{
  configurationCopy = configuration;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v27 = 0u;
  v28 = 0u;
  v25 = 0u;
  v26 = 0u;
  selfCopy = self;
  obj = [(MADAutoAssetStager *)self setTargets];
  v6 = [obj countByEnumeratingWithState:&v25 objects:v29 count:16];
  if (!v6)
  {
    goto LABEL_14;
  }

  v7 = v6;
  v8 = *v26;
  p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
  do
  {
    for (i = 0; i != v7; i = i + 1)
    {
      if (*v26 != v8)
      {
        objc_enumerationMutation(obj);
      }

      v11 = *(*(&v25 + 1) + 8 * i);
      v12 = p_weak_ivar_lyt[223];
      clientDomainName = [v11 clientDomainName];
      clientDomainName2 = [configurationCopy clientDomainName];
      if (![v12 stringIsEqual:clientDomainName to:clientDomainName2])
      {
        goto LABEL_11;
      }

      v15 = p_weak_ivar_lyt;
      v16 = p_weak_ivar_lyt[223];
      assetSetIdentifier = [v11 assetSetIdentifier];
      assetSetIdentifier2 = [configurationCopy assetSetIdentifier];
      if (![v16 stringIsEqual:assetSetIdentifier to:assetSetIdentifier2])
      {

        p_weak_ivar_lyt = v15;
LABEL_11:

        continue;
      }

      v19 = [(MADAutoAssetStager *)selfCopy _isSetTargetWithinRange:v11 asCandidate:1];

      p_weak_ivar_lyt = v15;
      if (v19)
      {
        v20 = v11;
        goto LABEL_15;
      }
    }

    v7 = [obj countByEnumeratingWithState:&v25 objects:v29 count:16];
  }

  while (v7);
LABEL_14:
  v20 = 0;
LABEL_15:

  return v20;
}

- (id)_setConfigurationAdjustedFrom:(id)from basedOnSetTarget:(id)target
{
  targetCopy = target;
  fromCopy = from;
  clientDomainName = [fromCopy clientDomainName];
  assetSetIdentifier = [fromCopy assetSetIdentifier];

  autoAssetEntries = [targetCopy autoAssetEntries];

  v11 = [(MADAutoAssetStager *)self newSetConfigurationForClientDomainName:clientDomainName forAssetSetIdentifier:assetSetIdentifier withAutoAssetEntries:autoAssetEntries];

  return v11;
}

- (BOOL)_isSetConfigurationApplicableToRequired:(id)required
{
  firstEntryAssetType = [required firstEntryAssetType];
  v13 = 0u;
  v14 = 0u;
  v15 = 0u;
  v16 = 0u;
  candidatesForStaging = [(MADAutoAssetStager *)self candidatesForStaging];
  v6 = [candidatesForStaging countByEnumeratingWithState:&v13 objects:v17 count:16];
  if (v6)
  {
    v7 = *v14;
    do
    {
      for (i = 0; i != v6; i = i + 1)
      {
        if (*v14 != v7)
        {
          objc_enumerationMutation(candidatesForStaging);
        }

        v9 = *(*(&v13 + 1) + 8 * i);
        assetType = [v9 assetType];
        if ([SUCore stringIsEqual:firstEntryAssetType to:assetType])
        {
          isPreSUStagingRequired = [v9 isPreSUStagingRequired];

          if (isPreSUStagingRequired)
          {
            LOBYTE(v6) = 1;
            goto LABEL_12;
          }
        }

        else
        {
        }
      }

      v6 = [candidatesForStaging countByEnumeratingWithState:&v13 objects:v17 count:16];
    }

    while (v6);
  }

LABEL_12:

  return v6;
}

- (void)lookupCacheUpdateWithDetermineResult:(id)result fromLocation:(id)location
{
  resultCopy = result;
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v91 = locationCopy;
  locationCopy = [[NSString alloc] initWithFormat:@"%@:lookupCacheUpdateWithDetermineResult", locationCopy];
  autoAssetCatalog = [resultCopy autoAssetCatalog];
  v90 = resultCopy;
  baseForStagingDescriptors = [resultCopy baseForStagingDescriptors];
  activeSetJobConfiguration = [(MADAutoAssetStager *)self activeSetJobConfiguration];
  firstEntryAssetType = [activeSetJobConfiguration firstEntryAssetType];

  v15 = [(MADAutoAssetStager *)self _targetNameActive:@"LOOKUP"];
  v95 = +[MADAutoAssetControlManager preferenceStagingLookupFlipRequiredOptional];
  v96 = objc_alloc_init(NSMutableDictionary);
  v93 = objc_alloc_init(NSMutableDictionary);
  selfCopy = self;
  v92 = firstEntryAssetType;
  v97 = v15;
  if (!firstEntryAssetType)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v20 = v15;
    v21 = [NSString alloc];
    activeSetJobConfiguration2 = [(MADAutoAssetStager *)self activeSetJobConfiguration];
    summary = [activeSetJobConfiguration2 summary];
    v24 = [v21 initWithFormat:@"[%@] {%@} active-set-job set-configuration without assetType | activeSetJobConfiguration:%@", v20, locationCopy, summary];
LABEL_7:
    v27 = v24;
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v24 withResult:6111 withError:0];

    self = selfCopy;
    v94 = 0;
    goto LABEL_60;
  }

  if (!autoAssetCatalog)
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v25 = v15;
    v26 = [NSString alloc];
    activeSetJobConfiguration2 = [(MADAutoAssetStager *)self activeSetJobConfiguration];
    summary = [activeSetJobConfiguration2 summary];
    v24 = [v26 initWithFormat:@"[%@] {%@} active-set-job without catalog lookup results | activeSetJobConfiguration:%@", v25, locationCopy, summary];
    goto LABEL_7;
  }

  setLookupResults = [(MADAutoAssetStager *)self setLookupResults];
  [setLookupResults setSafeObject:autoAssetCatalog forKey:firstEntryAssetType];

  if (baseForStagingDescriptors)
  {
    baseForStagingDescriptors2 = [(MADAutoAssetStager *)self baseForStagingDescriptors];
    [baseForStagingDescriptors2 addObjectsFromArray:baseForStagingDescriptors];
  }

  else
  {
    baseForStagingDescriptors2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag2 = [baseForStagingDescriptors2 diag];
    v29 = [NSString alloc];
    activeSetJobConfiguration3 = [(MADAutoAssetStager *)self activeSetJobConfiguration];
    summary2 = [activeSetJobConfiguration3 summary];
    v32 = [v29 initWithFormat:@"[%@] {%@} active-set-job without base for staging descriptors | activeSetJobConfiguration:%@", v97, locationCopy, summary2];
    [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v32 withResult:6111 withError:0];

    self = selfCopy;
  }

  v33 = [(MADAutoAssetStager *)self newSetLookupResult:locationCopy forAssetType:v92 forSetCatalog:autoAssetCatalog];
  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)self _lookupCachePersistResultByGroup:v33 fromLocation:locationCopy];
  }

  else
  {
    [(MADAutoAssetStager *)self _lookupCachePersistResult:v33 fromLocation:locationCopy];
  }

  v120 = 0u;
  v121 = 0u;
  v118 = 0u;
  v119 = 0u;
  obj = [v33 discoveredAtomicEntries];
  v104 = [obj countByEnumeratingWithState:&v118 objects:v137 count:16];
  if (v104)
  {
    v94 = 0;
    v102 = *v119;
    p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
    v99 = autoAssetCatalog;
    v100 = locationCopy;
    v98 = baseForStagingDescriptors;
    v103 = v33;
    while (1)
    {
      for (i = 0; i != v104; i = v59 + 1)
      {
        if (*v119 != v102)
        {
          objc_enumerationMutation(obj);
        }

        v107 = i;
        v36 = *(*(&v118 + 1) + 8 * i);
        fullAssetSelector = [v36 fullAssetSelector];
        assetType = [fullAssetSelector assetType];
        fullAssetSelector2 = [v36 fullAssetSelector];
        assetSpecifier = [fullAssetSelector2 assetSpecifier];
        v41 = [(MADAutoAssetStager *)selfCopy assetMetadataFromAssetCatalog:autoAssetCatalog forAssetype:assetType forAssetSpecifier:assetSpecifier preferringBestFormat:1];

        v106 = v41;
        if (v41)
        {
          v42 = [MADAutoAssetDescriptor alloc];
          fullAssetSelector3 = [v36 fullAssetSelector];
          assetType2 = [fullAssetSelector3 assetType];
          v117 = 0;
          v45 = [(MADAutoAssetDescriptor *)v42 initForAssetType:assetType2 fromMetadata:v41 invalidReasons:&v117];
          v46 = v117;

          v110 = v45;
          v108 = v46;
          if (v45)
          {
            log = @"ALL";
            v47 = v45;
            if ([(MADAutoAssetStager *)selfCopy stagingClientUsingGroups])
            {
              if (v95 == [v45 isPreSUStagingRequired])
              {
                [(MADAutoAssetStager *)selfCopy _targetNameActiveOptional];
              }

              else
              {
                [(MADAutoAssetStager *)selfCopy _targetNameActiveRequired];
              }
              log = ;
            }

            v115 = 0u;
            v116 = 0u;
            v113 = 0u;
            v114 = 0u;
            alreadyDownloadedDescriptors = [(MADAutoAssetStager *)selfCopy alreadyDownloadedDescriptors];
            v60 = [alreadyDownloadedDescriptors countByEnumeratingWithState:&v113 objects:v136 count:16];
            if (v60)
            {
              v61 = v60;
              v62 = *v114;
              do
              {
                v63 = 0;
                v111 = v61;
                do
                {
                  if (*v114 != v62)
                  {
                    objc_enumerationMutation(alreadyDownloadedDescriptors);
                  }

                  v64 = *(*(&v113 + 1) + 8 * v63);
                  v65 = p_weak_ivar_lyt[223];
                  assetType3 = [v47 assetType];
                  assetType4 = [v64 assetType];
                  if (![v65 stringIsEqual:assetType3 to:assetType4])
                  {
                    goto LABEL_41;
                  }

                  v68 = v62;
                  v69 = p_weak_ivar_lyt[223];
                  assetSpecifier2 = [v47 assetSpecifier];
                  assetSpecifier3 = [v64 assetSpecifier];
                  if (![v69 stringIsEqual:assetSpecifier2 to:assetSpecifier3])
                  {

                    v62 = v68;
                    v61 = v111;
LABEL_41:

                    goto LABEL_42;
                  }

                  v72 = p_weak_ivar_lyt[223];
                  [v47 assetVersion];
                  v74 = v73 = p_weak_ivar_lyt;
                  assetVersion = [v64 assetVersion];
                  LOBYTE(v72) = [v72 stringIsEqual:v74 to:assetVersion];

                  p_weak_ivar_lyt = v73;
                  v47 = v110;

                  v62 = v68;
                  v61 = v111;
                  if (v72)
                  {

                    self = selfCopy;
                    v81 = selfCopy;
                    v82 = v110;
                    v83 = v96;
                    goto LABEL_52;
                  }

LABEL_42:
                  v63 = v63 + 1;
                }

                while (v61 != v63);
                v61 = [alreadyDownloadedDescriptors countByEnumeratingWithState:&v113 objects:v136 count:16];
              }

              while (v61);
            }

            if ([v47 preSoftwareUpdateAssetStaging])
            {
              self = selfCopy;
              [(MADAutoAssetStager *)selfCopy addToAvailableForStaging:v47];
              v76 = [[NSString alloc] initWithFormat:@"[%@] adding to availableForStaging (from downloaded that support staging)", log];
              locationCopy = v100;
              [(MADAutoAssetStager *)selfCopy _persistDescriptor:v100 operation:@"ENTRY_ADD" persistingDescriptor:v47 withRepresentation:601 message:v76];

              persistedState = [(MADAutoAssetStager *)selfCopy persistedState];
              persistedConfig = [persistedState persistedConfig];
              availableForStaging = [(MADAutoAssetStager *)selfCopy availableForStaging];
              [persistedConfig persistULL:objc_msgSend(availableForStaging forKey:"count") shouldPersist:{@"determinedAvailableAssetCount", 1}];

              v47 = v110;
              metadata = [v110 metadata];
              -[MADAutoAssetStager setOverallStagedTotalExpectedBytes:](selfCopy, "setOverallStagedTotalExpectedBytes:", [metadata safeIntegerForKey:@"_UnarchivedSize"] + -[MADAutoAssetStager overallStagedTotalExpectedBytes](selfCopy, "overallStagedTotalExpectedBytes"));

              [(MADAutoAssetStager *)selfCopy _logPersistedConfigSet:v100 message:@"added to available for staging"];
              v94 = (v94 + 1);
            }

            else
            {
              self = selfCopy;
              v81 = selfCopy;
              v82 = v47;
              v83 = v93;
LABEL_52:
              [(MADAutoAssetStager *)v81 trackSelectorForDescriptor:v82 inContainer:v83];
              locationCopy = v100;
            }

            baseForStagingDescriptors = v98;
            autoAssetCatalog = v99;
            v33 = v103;
            v59 = v107;
            goto LABEL_54;
          }

          log = _MADLog(@"AutoStager");
          v52 = os_log_type_enabled(log, OS_LOG_TYPE_ERROR);
          self = selfCopy;
          if (v46)
          {
            if (v52)
            {
              summary3 = [(MADAutoAssetStager *)selfCopy summary];
              summary4 = [v36 summary];
              v33 = v103;
              summary5 = [v103 summary];
              *buf = 138544642;
              v123 = summary3;
              v124 = 2114;
              v125 = v97;
              v126 = 2114;
              v127 = locationCopy;
              v128 = 2114;
              v129 = v108;
              v130 = 2114;
              v131 = summary4;
              v132 = 2114;
              v133 = summary5;
              v56 = log;
              v57 = "%{public}@\n[%{public}@] {%{public}@} failed to allocate availableDescriptor | %{public}@ | nextSetEntry:%{public}@ | promotionSetConfiguration:%{public}@";
              v58 = 62;
              goto LABEL_48;
            }

LABEL_49:
            v33 = v103;
          }

          else
          {
            if (!v52)
            {
              goto LABEL_49;
            }

            summary3 = [(MADAutoAssetStager *)selfCopy summary];
            summary4 = [v36 summary];
            v33 = v103;
            summary5 = [v103 summary];
            *buf = 138544386;
            v123 = summary3;
            v124 = 2114;
            v125 = v97;
            v126 = 2114;
            v127 = locationCopy;
            v128 = 2114;
            v129 = summary4;
            v130 = 2114;
            v131 = summary5;
            v56 = log;
            v57 = "%{public}@\n[%{public}@] {%{public}@} failed to allocate availableDescriptor | nextSetEntry:%{public}@ | promotionSetConfiguration:%{public}@";
            v58 = 52;
LABEL_48:
            _os_log_impl(&dword_0, v56, OS_LOG_TYPE_ERROR, v57, buf, v58);
          }

          v59 = v107;
          v47 = 0;
LABEL_54:

          goto LABEL_55;
        }

        v48 = _MADLog(@"AutoStager");
        v108 = v48;
        self = selfCopy;
        if (os_log_type_enabled(v48, OS_LOG_TYPE_ERROR))
        {
          summary6 = [(MADAutoAssetStager *)selfCopy summary];
          summary7 = [v36 summary];
          v33 = v103;
          summary8 = [v103 summary];
          *buf = 138544386;
          v123 = summary6;
          v124 = 2114;
          v125 = v97;
          v126 = 2114;
          v127 = locationCopy;
          v128 = 2114;
          v129 = summary7;
          v130 = 2114;
          v131 = summary8;
          _os_log_impl(&dword_0, v48, OS_LOG_TYPE_ERROR, "%{public}@\n[%{public}@] {%{public}@} unable to locate asset metadata | nextSetEntry:%{public}@ | promotionSetConfiguration:%{public}@", buf, 0x34u);
        }

        else
        {
          v33 = v103;
        }

        v59 = v107;
LABEL_55:
      }

      v104 = [obj countByEnumeratingWithState:&v118 objects:v137 count:16];
      if (!v104)
      {
        goto LABEL_59;
      }
    }
  }

  v94 = 0;
LABEL_59:

LABEL_60:
  [(MADAutoAssetStager *)self setActiveJobDescriptor:0];
  v84 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v84, OS_LOG_TYPE_DEFAULT))
  {
    summary9 = [(MADAutoAssetStager *)self summary];
    selfCopy2 = self;
    if (v92)
    {
      v87 = v92;
    }

    else
    {
      v87 = @"N";
    }

    v88 = [(MADAutoAssetStager *)selfCopy2 selectorContainerAsString:v96];
    v89 = [(MADAutoAssetStager *)selfCopy2 selectorContainerAsString:v93];
    *buf = 138544898;
    v123 = summary9;
    v124 = 2114;
    v125 = v97;
    v126 = 2114;
    v127 = v91;
    v128 = 2114;
    v129 = v87;
    v130 = 2048;
    v131 = v94;
    v132 = 2114;
    v133 = v88;
    v134 = 2114;
    v135 = v89;
    _os_log_impl(&dword_0, v84, OS_LOG_TYPE_DEFAULT, "%{public}@\n[%{public}@] {%{public}@} end determine-if-available | assetType:%{public}@ | totalDeterminedAvailableForTarget:%ld\n>>> alreadyDownloaded:%{public}@\n>>> notStaging:%{public}@", buf, 0x48u);
  }
}

- (void)_limitCachePersistResultByGroupToCount:(unsigned int)count fromLocation:(id)location
{
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v8 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)self summary];
    *buf = 138543874;
    v69 = summary;
    v70 = 2114;
    v71 = locationCopy;
    v72 = 2048;
    countCopy = count;
    _os_log_impl(&dword_0, v8, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@:_limitCachePersistResultToCount} restricting count to %llu", buf, 0x20u);
  }

  v10 = objc_autoreleasePoolPush();
  v11 = objc_opt_new();
  if (!v11)
  {
    goto LABEL_41;
  }

  persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
  v13 = [persistedTargetLookupResults persistedEntryIDs:locationCopy];

  if (!v13)
  {
    goto LABEL_40;
  }

  countCopy2 = count;
  v55 = v11;
  v52 = v13;
  v53 = v10;
  v65 = 0u;
  v66 = 0u;
  v63 = 0u;
  v64 = 0u;
  obj = v13;
  v14 = [obj countByEnumeratingWithState:&v63 objects:v76 count:16];
  if (!v14)
  {
    goto LABEL_26;
  }

  v15 = v14;
  v16 = *v64;
  do
  {
    v17 = 0;
    do
    {
      if (*v64 != v16)
      {
        objc_enumerationMutation(obj);
      }

      v18 = *(*(&v63 + 1) + 8 * v17);
      v19 = objc_autoreleasePoolPush();
      persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
      v21 = [persistedTargetLookupResults2 persistedEntry:v18 fromLocation:locationCopy];

      if (!v21)
      {
        v22 = _MADLog(@"AutoStager");
        if (!os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
        {
          goto LABEL_22;
        }

        summary2 = [(MADAutoAssetStager *)self summary];
        *buf = 138543874;
        v69 = summary2;
        v70 = 2114;
        v71 = locationCopy;
        v72 = 2114;
        countCopy = v18;
        _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@:_limitCachePersistResultToCount} unable to load key %{public}@, ", buf, 0x20u);
        goto LABEL_21;
      }

      v22 = [v21 dateForKey:@"targetLookupResultsByGroupDate"];
      if (!v22)
      {
        v24 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v24, OS_LOG_TYPE_DEFAULT))
        {
          summary3 = [(MADAutoAssetStager *)self summary];
          *buf = 138543874;
          v69 = summary3;
          v70 = 2114;
          v71 = locationCopy;
          v72 = 2114;
          countCopy = v18;
          v26 = v24;
          v27 = OS_LOG_TYPE_DEFAULT;
          v28 = "%{public}@\n[AUTO-STAGER] {%{public}@:_limitCachePersistResultToCount} removing entry missing date with key %{public}@";
          v29 = 32;
LABEL_19:
          _os_log_impl(&dword_0, v26, v27, v28, buf, v29);
        }

LABEL_20:

        summary2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
        [summary2 removePersistedEntry:v18 fromLocation:locationCopy];
LABEL_21:

        goto LABEL_22;
      }

      v23 = [v55 objectForKeyedSubscript:v22];

      if (v23)
      {
        v24 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v24, OS_LOG_TYPE_ERROR))
        {
          summary3 = [(MADAutoAssetStager *)self summary];
          *buf = 138544130;
          v69 = summary3;
          v70 = 2114;
          v71 = locationCopy;
          v72 = 2114;
          countCopy = v22;
          v74 = 2114;
          v75 = v18;
          v26 = v24;
          v27 = OS_LOG_TYPE_ERROR;
          v28 = "%{public}@\n[AUTO-STAGER] {%{public}@:_limitCachePersistResultToCount} removing entry with unexpected collision on date %{public}@ with key %{public}@, ";
          v29 = 42;
          goto LABEL_19;
        }

        goto LABEL_20;
      }

      [v55 setObject:v18 forKeyedSubscript:v22];
LABEL_22:

      objc_autoreleasePoolPop(v19);
      v17 = v17 + 1;
    }

    while (v15 != v17);
    v31 = [obj countByEnumeratingWithState:&v63 objects:v76 count:16];
    v15 = v31;
  }

  while (v31);
LABEL_26:

  v11 = v55;
  allKeys = [v55 allKeys];
  v33 = [allKeys sortedArrayUsingComparator:&__block_literal_global_2544];

  v34 = [v33 count];
  v59 = 0u;
  v60 = 0u;
  v61 = 0u;
  v62 = 0u;
  v54 = v33;
  v35 = [v54 countByEnumeratingWithState:&v59 objects:v67 count:16];
  if (v35)
  {
    v36 = v35;
    v37 = v34 - countCopy2;
    v38 = *v60;
LABEL_28:
    v39 = 0;
    while (1)
    {
      if (*v60 != v38)
      {
        objc_enumerationMutation(v54);
      }

      if (v37 < 1)
      {
        break;
      }

      v40 = *(*(&v59 + 1) + 8 * v39);
      v41 = [v11 objectForKeyedSubscript:v40];
      if (v41)
      {
        v42 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v42, OS_LOG_TYPE_DEFAULT))
        {
          summary4 = [(MADAutoAssetStager *)self summary];
          *buf = 138544130;
          v69 = summary4;
          v70 = 2114;
          v71 = locationCopy;
          v72 = 2114;
          countCopy = v41;
          v74 = 2114;
          v75 = v40;
          _os_log_impl(&dword_0, v42, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@:_limitCachePersistResultToCount} pruning outdated entry with key %{public}@ and date %{public}@", buf, 0x2Au);
        }

        persistedTargetLookupResults3 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
        [persistedTargetLookupResults3 removePersistedEntry:v41 fromLocation:locationCopy];

        --v37;
      }

      else
      {
        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        [(MADAutoAssetStager *)self summary];
        obja = v37;
        v47 = v36;
        v49 = v48 = v38;
        v50 = [NSString stringWithFormat:@"%@\n[AUTO-STAGER] {%@:_limitCachePersistResultToCount} unexpected error looking up entry by date %@", v49, locationCopy, v40];
        [diag trackAnomaly:v50 forReason:@"persisted entry ID was nil" withResult:6108 withError:0];

        v38 = v48;
        v36 = v47;
        v37 = obja;
      }

      v39 = v39 + 1;
      v11 = v55;
      if (v36 == v39)
      {
        v36 = [v54 countByEnumeratingWithState:&v59 objects:v67 count:16];
        if (v36)
        {
          goto LABEL_28;
        }

        break;
      }
    }
  }

  v13 = v52;
  v10 = v53;
LABEL_40:

LABEL_41:
  objc_autoreleasePoolPop(v10);
}

- (void)_lookupCachePersistResultByGroup:(id)group fromLocation:(id)location
{
  locationCopy = location;
  groupCopy = group;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v12 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  v13 = [(MADAutoAssetStager *)self getTargetLookupResultsForKey:v12];
  if (!v13)
  {
    v14 = [MADAutoTargetLookupResults alloc];
    assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
    assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    assetTargetTrainName2 = [(MADAutoAssetStager *)self assetTargetTrainName];
    assetTargetRestoreVersion2 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    assetTargetGroupNames = [(MADAutoAssetStager *)self assetTargetGroupNames];
    v13 = [(MADAutoTargetLookupResults *)v14 initForTargetOSVersion:assetTargetOSVersion forTargetBuild:assetTargetBuildVersion forTargetTrainName:assetTargetTrainName2 forTargetRestoreVersion:assetTargetRestoreVersion2 targetingGroupNames:assetTargetGroupNames];

    [(MADAutoAssetStager *)self _limitCachePersistResultByGroupToCount:1 fromLocation:locationCopy];
  }

  setLookupResults = [v13 setLookupResults];
  assetType = [groupCopy assetType];
  [setLookupResults setSafeObject:groupCopy forKey:assetType];

  cachingEnabled = [(MADAutoAssetStager *)self cachingEnabled];
  if (v13 && cachingEnabled && v12)
  {
    targetLookupResults = [(MADAutoAssetStager *)self targetLookupResults];
    [targetLookupResults setObject:v13 forKey:v12];
  }

  else if (!v12)
  {
    goto LABEL_12;
  }

  persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
  v25 = [persistedTargetLookupResults persistedEntry:v12 fromLocation:locationCopy];

  if (v25)
  {
    v26 = +[NSDate now];
    [v25 persistDate:v26 forKey:@"targetLookupResultsByGroupDate" shouldPersist:0];

    [v25 persistULL:200 forKey:@"targetLookupResultsOTASituation" shouldPersist:0];
    [v25 persistSecureCodedObject:v13 forKey:@"targetLookupResults"];
    persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
    summary = [v13 summary];
    [persistedTargetLookupResults2 storePersistedEntry:v12 withEntrySummary:summary fromLocation:locationCopy];

    v29 = _MADLog(@"AutoStagerSituation");
    if (os_log_type_enabled(v29, OS_LOG_TYPE_DEFAULT))
    {
      summary2 = [(MADAutoAssetStager *)self summary];
      v31 = [MANAutoAssetControlStagerInformation previousOTASituationName:200];
      *buf = 138544130;
      v38 = summary2;
      v39 = 2114;
      v40 = locationCopy;
      v41 = 2114;
      v42 = v12;
      v43 = 2114;
      v44 = v31;
      _os_log_impl(&dword_0, v29, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} persisted target-OTA-situation | targetLookupResultsKey:%{public}@ | targetOTASituation:%{public}@", buf, 0x2Au);
    }

    v32 = [NSString alloc];
    v33 = [MANAutoAssetControlStagerInformation previousOTASituationName:200];
    summary3 = [v13 summary];
    v35 = [v32 initWithFormat:@"target-lookup-results describing Pallas atomicity | targetOTASituation:%@ | trainTargetLookupResults:%@", v33, summary3];
    [(MADAutoAssetStager *)self _logPersistedTargetLookupResults:locationCopy operation:@"ENTRY_ADD" forPersistedEntryID:v12 withTargetLookupResults:v13 withTargetOTASituation:200 message:v35];

    [(MADAutoAssetStager *)self _persistStoredTargetWithOTASituation:locationCopy];
    goto LABEL_14;
  }

LABEL_12:
  v25 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v25, OS_LOG_TYPE_ERROR))
  {
    summary4 = [(MADAutoAssetStager *)self summary];
    *buf = 138543874;
    v38 = summary4;
    v39 = 2114;
    v40 = locationCopy;
    v41 = 2114;
    v42 = v12;
    _os_log_impl(&dword_0, v25, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@:_lookupCachePersistResultByGroup} unable to load persisted set-lookup-result file | targetLookupResultsKey:%{public}@", buf, 0x20u);
  }

LABEL_14:
}

- (void)_lookupCachePersistResult:(id)result fromLocation:(id)location
{
  resultCopy = result;
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedSetLookupResults = [(MADAutoAssetStager *)self persistedSetLookupResults];
  assetType = [resultCopy assetType];
  v12 = [persistedSetLookupResults persistedEntry:assetType fromLocation:locationCopy];

  if (v12)
  {
    [v12 persistSecureCodedObject:resultCopy forKey:@"setLookupResult"];
    persistedSetLookupResults2 = [(MADAutoAssetStager *)self persistedSetLookupResults];
    assetType2 = [resultCopy assetType];
    summary = [resultCopy summary];
    [persistedSetLookupResults2 storePersistedEntry:assetType2 withEntrySummary:summary fromLocation:locationCopy];

    assetType3 = [resultCopy assetType];
    v17 = [NSString alloc];
    summary2 = [resultCopy summary];
    v19 = [v17 initWithFormat:@"set-lookup-result describing Pallas atomicity | setLookupResult:%@", summary2];
    [(MADAutoAssetStager *)self _logPersistedSetLookupResult:locationCopy operation:@"ENTRY_ADD" forPersistedEntryID:assetType3 withSetLookupResult:resultCopy message:v19];
  }

  else
  {
    assetType3 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(assetType3, OS_LOG_TYPE_ERROR))
    {
      summary3 = [(MADAutoAssetStager *)self summary];
      summary4 = [resultCopy summary];
      *buf = 138543874;
      v23 = summary3;
      v24 = 2114;
      v25 = locationCopy;
      v26 = 2114;
      v27 = summary4;
      _os_log_impl(&dword_0, assetType3, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@:_lookupCachePersistResult} unable to load persisted set-lookup-result file | setLookupResult:%{public}@", buf, 0x20u);
    }
  }
}

- (void)_lookupCacheRemoveResult:(id)result forTargetTrainName:(id)name withRestoreVersion:(id)version
{
  resultCopy = result;
  nameCopy = name;
  versionCopy = version;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v30 = objc_autoreleasePoolPush();
  persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
  v13 = [persistedTargetLookupResults persistedEntryIDs:resultCopy];

  v39 = 0u;
  v40 = 0u;
  v37 = 0u;
  v38 = 0u;
  obj = v13;
  v36 = [obj countByEnumeratingWithState:&v37 objects:v49 count:16];
  if (v36)
  {
    v35 = *v38;
    v31 = nameCopy;
    while (2)
    {
      for (i = 0; i != v36; i = i + 1)
      {
        if (*v38 != v35)
        {
          objc_enumerationMutation(obj);
        }

        v15 = *(*(&v37 + 1) + 8 * i);
        v16 = objc_autoreleasePoolPush();
        persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
        v18 = [persistedTargetLookupResults2 persistedEntry:v15 fromLocation:resultCopy];

        if (v18)
        {
          persistedTargetLookupResults3 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
          v20 = [persistedTargetLookupResults3 decodeFromLocation:resultCopy ofEntryName:v15 fromPersistedEntry:v18 decodingObjectForKey:@"targetLookupResults" ofClass:objc_opt_class() allowingNilObject:0];

          targetTrainName = [v20 targetTrainName];
          if (([SUCore stringIsEqual:targetTrainName to:nameCopy]& 1) != 0)
          {
            context = v16;
            v22 = resultCopy;
            targetRestoreVersion = [v20 targetRestoreVersion];
            v24 = [SUCore stringIsEqual:targetRestoreVersion to:versionCopy];

            if (v24)
            {
              v26 = +[MANAutoAssetControlStagerInformation previousOTASituationName:](MANAutoAssetControlStagerInformation, "previousOTASituationName:", [v18 ullForKey:@"targetLookupResultsOTASituation"]);
              persistedTargetLookupResults4 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
              resultCopy = v22;
              [persistedTargetLookupResults4 removePersistedEntry:v15 fromLocation:v22];

              v28 = _MADLog(@"AutoStagerSituation");
              if (os_log_type_enabled(v28, OS_LOG_TYPE_DEFAULT))
              {
                summary = [(MADAutoAssetStager *)self summary];
                *buf = 138544130;
                v42 = summary;
                v43 = 2114;
                v44 = resultCopy;
                v45 = 2114;
                v46 = v15;
                v47 = 2114;
                v48 = v26;
                _os_log_impl(&dword_0, v28, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@:_lookupCacheRemoveResult} removed target-OS | entryID:%{public}@ | targetOTASituation:%{public}@", buf, 0x2Au);
              }

              objc_autoreleasePoolPop(context);
              nameCopy = v31;
              goto LABEL_19;
            }

            resultCopy = v22;
            nameCopy = v31;
            v16 = context;
          }

          else
          {
          }
        }

        else
        {
          v20 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v20, OS_LOG_TYPE_ERROR))
          {
            summary2 = [(MADAutoAssetStager *)self summary];
            *buf = 138543874;
            v42 = summary2;
            v43 = 2114;
            v44 = resultCopy;
            v45 = 2114;
            v46 = v15;
            _os_log_impl(&dword_0, v20, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@:_lookupCacheRemoveResult} unable to load persisted-entry | entryID:%{public}@", buf, 0x20u);
          }
        }

        objc_autoreleasePoolPop(v16);
      }

      v36 = [obj countByEnumeratingWithState:&v37 objects:v49 count:16];
      if (v36)
      {
        continue;
      }

      break;
    }
  }

LABEL_19:

  objc_autoreleasePoolPop(v30);
}

- (void)_availableForStagingRemove:(id)remove forTargetTrainName:(id)name withRestoreVersion:(id)version
{
  removeCopy = remove;
  nameCopy = name;
  versionCopy = version;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  context = objc_autoreleasePoolPush();
  persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
  v14 = [persistedAvailableForStagingByTarget persistedEntryIDs:removeCopy];

  v39 = versionCopy;
  v36 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:nameCopy withRestoreVersion:versionCopy];
  v44 = 0u;
  v45 = 0u;
  v46 = 0u;
  v47 = 0u;
  obj = v14;
  v42 = [obj countByEnumeratingWithState:&v44 objects:v56 count:16];
  if (v42)
  {
    v41 = *v45;
    p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
    v38 = nameCopy;
    do
    {
      v16 = 0;
      do
      {
        if (*v45 != v41)
        {
          objc_enumerationMutation(obj);
        }

        v17 = *(*(&v44 + 1) + 8 * v16);
        v18 = objc_autoreleasePoolPush();
        persistedAvailableForStagingByTarget2 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
        v20 = [persistedAvailableForStagingByTarget2 persistedEntry:v17 fromLocation:removeCopy];

        if (!v20)
        {
          v22 = _MADLog(@"AutoStager");
          if (!os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
          {
            goto LABEL_16;
          }

          summary = [(MADAutoAssetStager *)self summary];
          *buf = 138543874;
          v49 = summary;
          v50 = 2114;
          v51 = removeCopy;
          v52 = 2114;
          v53 = v17;
          _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@:_availableForStagingRemove} unable to load persisted-entry | entryID:%{public}@", buf, 0x20u);
          goto LABEL_15;
        }

        v43 = v18;
        persistedAvailableForStagingByTarget3 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
        v22 = [persistedAvailableForStagingByTarget3 decodeFromLocation:removeCopy ofEntryName:v17 fromPersistedEntry:v20 decodingObjectForKey:@"AvailableForStagingByTarget" ofClass:objc_opt_class() allowingNilObject:0];

        v23 = removeCopy;
        v24 = nameCopy;
        v25 = p_weak_ivar_lyt[223];
        summary = [v22 targetTrainName];
        v27 = v25;
        nameCopy = v24;
        if (![v27 stringIsEqual:summary to:v24])
        {
          removeCopy = v23;
          v18 = v43;
LABEL_15:

          goto LABEL_16;
        }

        v28 = p_weak_ivar_lyt[223];
        targetRestoreVersion = [v22 targetRestoreVersion];
        LODWORD(v28) = [v28 stringIsEqual:targetRestoreVersion to:v39];

        if (v28)
        {
          persistedAvailableForStagingByTarget4 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
          removeCopy = v23;
          [persistedAvailableForStagingByTarget4 removePersistedEntry:v17 fromLocation:v23];

          summary = _MADLog(@"AutoStager");
          v18 = v43;
          if (os_log_type_enabled(summary, OS_LOG_TYPE_DEFAULT))
          {
            summary2 = [(MADAutoAssetStager *)self summary];
            summary3 = [v22 summary];
            *buf = 138544130;
            v49 = summary2;
            v50 = 2114;
            v51 = removeCopy;
            v52 = 2114;
            v53 = v17;
            v54 = 2114;
            v55 = summary3;
            _os_log_impl(&dword_0, summary, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@:_availableForStagingRemove} removed target-OS entry | entryID:%{public}@ | availableForStaging:%{public}@", buf, 0x2Au);
          }

          nameCopy = v38;
          p_weak_ivar_lyt = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
          goto LABEL_15;
        }

        nameCopy = v38;
        removeCopy = v23;
        p_weak_ivar_lyt = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
        v18 = v43;
LABEL_16:

        objc_autoreleasePoolPop(v18);
        v16 = v16 + 1;
      }

      while (v42 != v16);
      v33 = [obj countByEnumeratingWithState:&v44 objects:v56 count:16];
      v42 = v33;
    }

    while (v33);
  }

  if (v36)
  {
    availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
    [availableForStagingRequiredByTarget removeObjectForKey:v36];

    availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
    [availableForStagingOptionalByTarget removeObjectForKey:v36];
  }

  objc_autoreleasePoolPop(context);
}

- (void)_candidatesRemove:(id)remove forTargetTrainName:(id)name withRestoreVersion:(id)version
{
  versionCopy = version;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v15 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:nameCopy withRestoreVersion:versionCopy];

  if (v15)
  {
    candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
    [candidatesForStagingRequiredByTarget removeObjectForKey:v15];

    candidatesForStagingOptionalByTarget = [(MADAutoAssetStager *)self candidatesForStagingOptionalByTarget];
    [candidatesForStagingOptionalByTarget removeObjectForKey:v15];

    candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsRequiredByTarget];
    [candidateSetConfigurationsRequiredByTarget removeObjectForKey:v15];

    candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
    [candidateSetConfigurationsOptionalByTarget removeObjectForKey:v15];
  }
}

- (BOOL)doesStagingInvolveRequired
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14 = 0u;
  v15 = 0u;
  v12 = 0u;
  v13 = 0u;
  assetTargetGroupNames = [(MADAutoAssetStager *)self assetTargetGroupNames];
  v6 = [assetTargetGroupNames countByEnumeratingWithState:&v12 objects:v16 count:16];
  if (v6)
  {
    v7 = v6;
    v8 = *v13;
    while (2)
    {
      for (i = 0; i != v7; i = i + 1)
      {
        if (*v13 != v8)
        {
          objc_enumerationMutation(assetTargetGroupNames);
        }

        if (([SUCore stringIsEqual:*(*(&v12 + 1) + 8 * i) to:@"STAGE_GROUP_REQUIRED"]& 1) != 0)
        {
          v10 = 1;
          goto LABEL_11;
        }
      }

      v7 = [assetTargetGroupNames countByEnumeratingWithState:&v12 objects:v16 count:16];
      if (v7)
      {
        continue;
      }

      break;
    }
  }

  v10 = 0;
LABEL_11:

  return v10;
}

- (BOOL)doesStagingInvolveOptional
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v14 = 0u;
  v15 = 0u;
  v12 = 0u;
  v13 = 0u;
  assetTargetGroupNames = [(MADAutoAssetStager *)self assetTargetGroupNames];
  v6 = [assetTargetGroupNames countByEnumeratingWithState:&v12 objects:v16 count:16];
  if (v6)
  {
    v7 = v6;
    v8 = *v13;
    while (2)
    {
      for (i = 0; i != v7; i = i + 1)
      {
        if (*v13 != v8)
        {
          objc_enumerationMutation(assetTargetGroupNames);
        }

        if (![SUCore stringIsEqual:*(*(&v12 + 1) + 8 * i) to:@"STAGE_GROUP_REQUIRED"])
        {
          v10 = 1;
          goto LABEL_11;
        }
      }

      v7 = [assetTargetGroupNames countByEnumeratingWithState:&v12 objects:v16 count:16];
      if (v7)
      {
        continue;
      }

      break;
    }
  }

  v10 = 0;
LABEL_11:

  return v10;
}

- (void)startMaxTimeSpentDeterminingTimer
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v5 = +[MADAutoAssetControlManager preferenceMaxStagerDeterminingSecs];
  if (v5 == -1)
  {
    v6 = 540;
  }

  else
  {
    v6 = v5;
  }

  if (v6 <= 0)
  {
    v9 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v9, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 0;
      _os_log_impl(&dword_0, v9, OS_LOG_TYPE_DEFAULT, "[AUTO-STAGER] {startMaxTimeSpentDeterminingTimer} maxTimeSpentDeterminingSecs DISABLED", buf, 2u);
    }
  }

  else
  {
    v7 = +[NSUUID UUID];
    uUIDString = [v7 UUIDString];

    [(MADAutoAssetStager *)self setDetermineTimeoutUUID:uUIDString];
    v14[0] = _NSConcreteStackBlock;
    v14[1] = 3221225472;
    v14[2] = __55__MADAutoAssetStager_startMaxTimeSpentDeterminingTimer__block_invoke;
    v14[3] = &unk_4B3440;
    v9 = uUIDString;
    v15 = v9;
    v10 = [NSTimer timerWithTimeInterval:0 repeats:v14 block:v6];
    v11 = _MADLog(@"AutoStager");
    v12 = v11;
    if (v10)
    {
      if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
      {
        determineTimeoutUUID = [(MADAutoAssetStager *)self determineTimeoutUUID];
        *buf = 134218242;
        v17 = v6;
        v18 = 2114;
        v19 = determineTimeoutUUID;
        _os_log_impl(&dword_0, v12, OS_LOG_TYPE_DEFAULT, "[AUTO-STAGER] {startMaxTimeSpentDeterminingTimer} begin timed determine-available | maxTimeSpentDeterminingSecs:%ld | timerUUID:%{public}@", buf, 0x16u);
      }

      v12 = +[NSRunLoop mainRunLoop];
      [v12 addTimer:v10 forMode:NSDefaultRunLoopMode];
    }

    else if (os_log_type_enabled(v11, OS_LOG_TYPE_ERROR))
    {
      *buf = 134217984;
      v17 = v6;
      _os_log_impl(&dword_0, v12, OS_LOG_TYPE_ERROR, "[AUTO-STAGER] {startMaxTimeSpentDeterminingTimer} unable to create maxDeterminingTimer | maxTimeSpentDeterminingSecs:%ld", buf, 0xCu);
    }
  }
}

void __55__MADAutoAssetStager_startMaxTimeSpentDeterminingTimer__block_invoke(uint64_t a1)
{
  v4 = +[MADAutoAssetStager autoAssetStager];
  v2 = [v4 autoStagerFSM];
  v3 = [[MADAutoAssetStagerParam alloc] initWithTimerUUID:*(a1 + 32)];
  [v2 postEvent:@"TimerFiredDetermining" withInfo:v3];
}

- (void)formAvailableForStagingByCombiningRequiredAndOptional:(id)optional
{
  optionalCopy = optional;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v6 = objc_alloc_init(NSMutableDictionary);
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v9 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
  v11 = [availableForStagingRequiredByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

  selfCopy = self;
  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
  v50 = v9;
  v52 = [availableForStagingOptionalByTarget safeObjectForKey:v9 ofClass:objc_opt_class()];

  v49 = objc_alloc_init(NSMutableArray);
  v66 = 0u;
  v67 = 0u;
  v68 = 0u;
  v69 = 0u;
  obj = v11;
  v13 = [obj countByEnumeratingWithState:&v66 objects:v76 count:16];
  if (v13)
  {
    v14 = v13;
    v56 = *v67;
    do
    {
      for (i = 0; i != v14; i = i + 1)
      {
        if (*v67 != v56)
        {
          objc_enumerationMutation(obj);
        }

        v16 = *(*(&v66 + 1) + 8 * i);
        v17 = objc_autoreleasePoolPush();
        v18 = [MAAutoAssetSelector alloc];
        assetType = [v16 assetType];
        assetSpecifier = [v16 assetSpecifier];
        assetVersion = [v16 assetVersion];
        v22 = [v18 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

        persistedEntryID = [v22 persistedEntryID];
        v24 = [v6 safeObjectForKey:persistedEntryID ofClass:objc_opt_class()];
        if (v24)
        {
          v25 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v25, OS_LOG_TYPE_ERROR))
          {
            summary = [v16 summary];
            *buf = 138543618;
            v73 = optionalCopy;
            v74 = 2114;
            v75 = summary;
            _os_log_impl(&dword_0, v25, OS_LOG_TYPE_ERROR, "[FROM-AVAILABLE-FOR-STAGING] {%{public}@:formAvailableForStagingByCombiningRequiredAndOptional} duplicate REQUIRED descriptor (filtered) | nextRequiredDescriptor:%{public}@", buf, 0x16u);
          }
        }

        else
        {
          [v6 setSafeObject:v16 forKey:persistedEntryID];
        }

        objc_autoreleasePoolPop(v17);
      }

      v14 = [obj countByEnumeratingWithState:&v66 objects:v76 count:16];
    }

    while (v14);
  }

  v64 = 0u;
  v65 = 0u;
  v62 = 0u;
  v63 = 0u;
  v53 = v52;
  v27 = [v53 countByEnumeratingWithState:&v62 objects:v71 count:16];
  if (v27)
  {
    v28 = v27;
    v57 = *v63;
    do
    {
      for (j = 0; j != v28; j = j + 1)
      {
        if (*v63 != v57)
        {
          objc_enumerationMutation(v53);
        }

        v30 = *(*(&v62 + 1) + 8 * j);
        v31 = objc_autoreleasePoolPush();
        v32 = [MAAutoAssetSelector alloc];
        assetType2 = [v30 assetType];
        assetSpecifier2 = [v30 assetSpecifier];
        assetVersion2 = [v30 assetVersion];
        v36 = [v32 initForAssetType:assetType2 withAssetSpecifier:assetSpecifier2 matchingAssetVersion:assetVersion2];

        persistedEntryID2 = [v36 persistedEntryID];
        v38 = [v6 safeObjectForKey:persistedEntryID2 ofClass:objc_opt_class()];
        if (v38)
        {
          v39 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v39, OS_LOG_TYPE_ERROR))
          {
            summary2 = [v30 summary];
            *buf = 138543618;
            v73 = optionalCopy;
            v74 = 2114;
            v75 = summary2;
            _os_log_impl(&dword_0, v39, OS_LOG_TYPE_ERROR, "[FROM-AVAILABLE-FOR-STAGING] {%{public}@:formAvailableForStagingByCombiningRequiredAndOptional} duplicate OPTIONAL descriptor (filtered) | nextOptionalDescriptor:%{public}@", buf, 0x16u);
          }
        }

        else
        {
          [v6 setSafeObject:v30 forKey:persistedEntryID2];
        }

        objc_autoreleasePoolPop(v31);
      }

      v28 = [v53 countByEnumeratingWithState:&v62 objects:v71 count:16];
    }

    while (v28);
  }

  v60 = 0u;
  v61 = 0u;
  v58 = 0u;
  v59 = 0u;
  v41 = v6;
  v42 = [v41 countByEnumeratingWithState:&v58 objects:v70 count:16];
  if (v42)
  {
    v43 = v42;
    v44 = *v59;
    do
    {
      for (k = 0; k != v43; k = k + 1)
      {
        if (*v59 != v44)
        {
          objc_enumerationMutation(v41);
        }

        v46 = *(*(&v58 + 1) + 8 * k);
        v47 = objc_autoreleasePoolPush();
        v48 = [v41 safeObjectForKey:v46 ofClass:objc_opt_class()];
        if (v48)
        {
          [v49 addObject:v48];
        }

        objc_autoreleasePoolPop(v47);
      }

      v43 = [v41 countByEnumeratingWithState:&v58 objects:v70 count:16];
    }

    while (v43);
  }

  [(MADAutoAssetStager *)selfCopy setAvailableForStaging:v49];
}

- (void)considerInjectionIntoAvailableForStaging
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (+[MADAutoAssetControlManager preferenceStagerInjectAvailableDups])
  {
    availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
    v6 = [availableForStaging count];

    if (v6)
    {
      v7 = objc_alloc_init(NSMutableArray);
      v8 = objc_alloc_init(NSMutableArray);
      v9 = objc_alloc_init(NSMutableArray);
      v54 = 0u;
      v55 = 0u;
      v56 = 0u;
      v57 = 0u;
      availableForStaging2 = [(MADAutoAssetStager *)self availableForStaging];
      v11 = [availableForStaging2 countByEnumeratingWithState:&v54 objects:v65 count:16];
      if (v11)
      {
        v12 = v11;
        v13 = *v55;
        do
        {
          for (i = 0; i != v12; i = i + 1)
          {
            if (*v55 != v13)
            {
              objc_enumerationMutation(availableForStaging2);
            }

            v15 = *(*(&v54 + 1) + 8 * i);
            if (v15)
            {
              [v7 addObject:*(*(&v54 + 1) + 8 * i)];
              [v8 addObject:v15];
            }
          }

          v12 = [availableForStaging2 countByEnumeratingWithState:&v54 objects:v65 count:16];
        }

        while (v12);
      }

      while (1)
      {

        if (![v7 count] && !objc_msgSend(v8, "count"))
        {
          [(MADAutoAssetStager *)self setAvailableForStaging:v9];
          v19 = _MADLog(@"AutoStager");
          if (!os_log_type_enabled(v19, OS_LOG_TYPE_DEFAULT))
          {
            goto LABEL_62;
          }

          availableForStaging3 = [(MADAutoAssetStager *)self availableForStaging];
          v43 = [availableForStaging3 count];
          *buf = 134217984;
          v60 = v43;
          v44 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] injected available-for-staging array-with-duplicates | availableForStaging:%ld";
          goto LABEL_58;
        }

        if ([v7 count])
        {
          availableForStaging2 = [v7 objectAtIndex:0];
          v16 = v7;
          v17 = 0;
        }

        else
        {
          if ([v7 count] || !objc_msgSend(v8, "count"))
          {
            v19 = _MADLog(@"AutoStager");
            if (!os_log_type_enabled(v19, OS_LOG_TYPE_ERROR))
            {
              goto LABEL_62;
            }

            v36 = [v7 count];
            v37 = [v8 count];
            *buf = 138543874;
            v60 = @"Y";
            v61 = 2048;
            v62 = v36;
            v63 = 2048;
            v64 = v37;
            v22 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] discrepancy detected while building test available-for-staging array-with-duplicates | nextFromOriginal:%{public}@ | originalAvailableForStaging:%ld | againAvailableForStaging:%ld";
            goto LABEL_61;
          }

          v18 = [v8 count] - 1;
          if (v18 < 0)
          {
            v19 = _MADLog(@"AutoStager");
            if (!os_log_type_enabled(v19, OS_LOG_TYPE_ERROR))
            {
              goto LABEL_62;
            }

            v45 = [v7 count];
            v46 = [v8 count];
            *buf = 138543874;
            v60 = @"Y";
            v61 = 2048;
            v62 = v45;
            v63 = 2048;
            v64 = v46;
            v22 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] empty again-available-for-staging while building test available-for-staging array-with-duplicates | nextFromOriginal:%{public}@ | originalAvailableForStaging:%ld | againAvailableForStaging:%ld";
LABEL_61:
            _os_log_impl(&dword_0, v19, OS_LOG_TYPE_ERROR, v22, buf, 0x20u);
            goto LABEL_62;
          }

          availableForStaging2 = [v8 objectAtIndex:v18];
          v16 = v8;
          v17 = v18;
        }

        [v16 removeObjectAtIndex:v17];
        if (!availableForStaging2)
        {
          v19 = _MADLog(@"AutoStager");
          if (!os_log_type_enabled(v19, OS_LOG_TYPE_ERROR))
          {
            goto LABEL_62;
          }

          v20 = [v7 count];
          v21 = [v8 count];
          *buf = 138543874;
          v60 = @"Y";
          v61 = 2048;
          v62 = v20;
          v63 = 2048;
          v64 = v21;
          v22 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] nil nextDescriptor while building test available-for-staging array-with-duplicates | nextFromOriginal:%{public}@ | originalAvailableForStaging:%ld | againAvailableForStaging:%ld";
          goto LABEL_61;
        }

        [v9 addObject:availableForStaging2];
      }
    }
  }

  if (+[MADAutoAssetControlManager preferenceStagerInjectAvailableOlderVersions])
  {
    availableForStaging4 = [(MADAutoAssetStager *)self availableForStaging];
    v24 = [availableForStaging4 count];

    if (v24)
    {
      v7 = objc_alloc_init(NSMutableArray);
      v8 = objc_alloc_init(NSMutableArray);
      v9 = objc_alloc_init(NSMutableArray);
      v50 = 0u;
      v51 = 0u;
      v52 = 0u;
      v53 = 0u;
      availableForStaging5 = [(MADAutoAssetStager *)self availableForStaging];
      v26 = [availableForStaging5 countByEnumeratingWithState:&v50 objects:v58 count:16];
      if (v26)
      {
        v27 = v26;
        v28 = *v51;
        do
        {
          for (j = 0; j != v27; j = j + 1)
          {
            if (*v51 != v28)
            {
              objc_enumerationMutation(availableForStaging5);
            }

            v30 = *(*(&v50 + 1) + 8 * j);
            if (v30)
            {
              [v7 addObject:*(*(&v50 + 1) + 8 * j)];
              [v8 addObject:v30];
            }
          }

          v27 = [availableForStaging5 countByEnumeratingWithState:&v50 objects:v58 count:16];
        }

        while (v27);
      }

      while (1)
      {

        if (![v7 count] && !objc_msgSend(v8, "count"))
        {
          [(MADAutoAssetStager *)self setAvailableForStaging:v9];
          v19 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v19, OS_LOG_TYPE_DEFAULT))
          {
            availableForStaging3 = [(MADAutoAssetStager *)self availableForStaging];
            v47 = [availableForStaging3 count];
            *buf = 134217984;
            v60 = v47;
            v44 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] injected available-for-staging array-with-older | availableForStaging:%ld";
LABEL_58:
            _os_log_impl(&dword_0, v19, OS_LOG_TYPE_DEFAULT, v44, buf, 0xCu);
          }

          goto LABEL_62;
        }

        if ([v7 count])
        {
          availableForStaging5 = [v7 objectAtIndex:0];
          [v7 removeObjectAtIndex:0];
          if (!availableForStaging5)
          {
            goto LABEL_48;
          }
        }

        else
        {
          if ([v7 count] || !objc_msgSend(v8, "count"))
          {
            v19 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v19, OS_LOG_TYPE_ERROR))
            {
              v40 = [v7 count];
              v41 = [v8 count];
              *buf = 138543874;
              v60 = @"Y";
              v61 = 2048;
              v62 = v40;
              v63 = 2048;
              v64 = v41;
              v22 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] discrepancy detected while building test available-for-staging array-with-older | nextFromOriginal:%{public}@ | originalAvailableForStaging:%ld | olderAvailableForStaging:%ld";
              goto LABEL_61;
            }

            goto LABEL_62;
          }

          v31 = [v8 count] - 1;
          if (v31 < 0)
          {
            v19 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v19, OS_LOG_TYPE_ERROR))
            {
              v48 = [v7 count];
              v49 = [v8 count];
              *buf = 138543874;
              v60 = @"Y";
              v61 = 2048;
              v62 = v48;
              v63 = 2048;
              v64 = v49;
              v22 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] empty again-available-for-staging while building test available-for-staging array-with-older | nextFromOriginal:%{public}@ | originalAvailableForStaging:%ld | olderAvailableForStaging:%ld";
              goto LABEL_61;
            }

LABEL_62:

            return;
          }

          v32 = [v8 objectAtIndex:v31];
          [v8 removeObjectAtIndex:v31];
          v33 = [MADAutoAssetDescriptor alloc];
          assetType = [v32 assetType];
          metadata = [v32 metadata];
          availableForStaging5 = [(MADAutoAssetDescriptor *)v33 initForAssetType:assetType fromMetadata:metadata fromBaseDescriptor:v32 substitutingAssetVersion:@"0.0.0.0.0 invalidReasons:0", 0];

          if (!availableForStaging5)
          {
LABEL_48:
            v19 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v19, OS_LOG_TYPE_ERROR))
            {
              v38 = [v7 count];
              v39 = [v8 count];
              *buf = 138543874;
              v60 = @"Y";
              v61 = 2048;
              v62 = v38;
              v63 = 2048;
              v64 = v39;
              v22 = "{considerInjectionIntoAvailableForStaging} [DEDUP-AVAILABLE-FOR-STAGING] nil nextDescriptor while building test available-for-staging array-with-older | nextFromOriginal:%{public}@ | originalAvailableForStaging:%ld | olderAvailableForStaging:%ld";
              goto LABEL_61;
            }

            goto LABEL_62;
          }
        }

        [v9 addObject:availableForStaging5];
      }
    }
  }
}

- (id)dedupAvailableForStaging:(id)staging dedupingAssetDescriptors:(id)descriptors removingAlreadyDownloaded:(id)downloaded ofContainerName:(id)name
{
  stagingCopy = staging;
  descriptorsCopy = descriptors;
  downloadedCopy = downloaded;
  nameCopy = name;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  selfCopy = self;
  v130 = [(MADAutoAssetStager *)self _targetNameActive:@"DETERMINED"];
  v13 = [descriptorsCopy count];
  v14 = descriptorsCopy;
  v125 = v14;
  v122 = v13;
  if (v13 != &dword_0 + 1)
  {
    if (v13 < 2)
    {
      v82 = 0;
      v135 = 0;
      v128 = 0;
      v129 = 0;
      v143 = v14;
      goto LABEL_90;
    }

    v42 = v14;
    v43 = objc_alloc_init(NSMutableDictionary);
    v155 = 0u;
    v156 = 0u;
    v157 = 0u;
    v158 = 0u;
    v44 = v42;
    v45 = [v44 countByEnumeratingWithState:&v155 objects:v165 count:16];
    obja = v43;
    v143 = v44;
    if (v45)
    {
      v46 = v45;
      v128 = 0;
      v129 = 0;
      v135 = 0;
      v137 = 0;
      v47 = *v156;
      v139 = *v156;
      do
      {
        v48 = 0;
        v133 = v46;
        do
        {
          if (*v156 != v47)
          {
            objc_enumerationMutation(v143);
          }

          v49 = *(*(&v155 + 1) + 8 * v48);
          v50 = objc_autoreleasePoolPush();
          if (v49)
          {
            v51 = [MAAutoAssetSelector alloc];
            assetType = [v49 assetType];
            assetSpecifier = [v49 assetSpecifier];
            v54 = [v51 initForAssetType:assetType withAssetSpecifier:assetSpecifier];

            persistedEntryID = [v54 persistedEntryID];
            v56 = [v43 safeObjectForKey:persistedEntryID ofClass:objc_opt_class()];
            if (v56)
            {
              v145 = v50;
              assetVersion = [v49 assetVersion];
              assetVersion2 = [v56 assetVersion];
              v59 = [SUCore stringIsEqual:assetVersion to:assetVersion2];

              if (v59)
              {
                v60 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(v60, OS_LOG_TYPE_ERROR))
                {
                  summary = [v49 summary];
                  *buf = 138544130;
                  v167 = stagingCopy;
                  v168 = 2114;
                  v169 = v130;
                  v170 = 2114;
                  v171 = nameCopy;
                  v172 = 2114;
                  v173 = summary;
                  _os_log_impl(&dword_0, v60, OS_LOG_TYPE_ERROR, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] duplicate descriptor (filtered) | nextAvailableDescriptor:%{public}@", buf, 0x2Au);
                }

                ++v135;
              }

              else
              {
                v63 = [SUCoreRestoreVersion alloc];
                assetVersion3 = [v49 assetVersion];
                v65 = [v63 initWithRestoreVersion:assetVersion3];

                v66 = [SUCoreRestoreVersion alloc];
                assetVersion4 = [v56 assetVersion];
                v68 = [v66 initWithRestoreVersion:assetVersion4];

                if ([v65 isComparable:v68])
                {
                  if ([v65 compare:v68] == &dword_0 + 1)
                  {
                    v69 = v56;
                    v70 = v49;
                    metadata = [v69 metadata];
                    v72 = [metadata safeIntegerForKey:@"_UnarchivedSize"];

                    v126 = v70;
                    if (v137 >= v72)
                    {
                      v74 = (v137 - v72);
                    }

                    else
                    {
                      v73 = _MADLog(@"AutoStager");
                      if (os_log_type_enabled(v73, OS_LOG_TYPE_ERROR))
                      {
                        *buf = 138544386;
                        v167 = stagingCopy;
                        v168 = 2114;
                        v169 = v130;
                        v170 = 2114;
                        v171 = nameCopy;
                        v172 = 2048;
                        v173 = v137;
                        v174 = 2048;
                        v175 = v72;
                        _os_log_impl(&dword_0, v73, OS_LOG_TYPE_ERROR, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] potential total byte count issue | totalFilesystemBytes:%llu | miscountedFilesystemBytes:%llu", buf, 0x34u);
                      }

                      v74 = v137;
                    }

                    metadata2 = [v126 metadata];
                    v137 = &v74[[metadata2 safeIntegerForKey:@"_UnarchivedSize"]];
                    v77 = v126;

                    [obja setSafeObject:v126 forKey:persistedEntryID];
                  }

                  else
                  {
                    v69 = v49;
                    v77 = v56;
                  }

                  v79 = _MADLog(@"AutoStager");
                  if (os_log_type_enabled(v79, OS_LOG_TYPE_ERROR))
                  {
                    summary2 = [v69 summary];
                    [v77 summary];
                    v81 = v127 = v77;
                    *buf = 138544386;
                    v167 = stagingCopy;
                    v168 = 2114;
                    v169 = v130;
                    v170 = 2114;
                    v171 = nameCopy;
                    v172 = 2114;
                    v173 = summary2;
                    v174 = 2114;
                    v175 = v81;
                    _os_log_impl(&dword_0, v79, OS_LOG_TYPE_ERROR, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] multiple asset-versions (filtered older) | olderDescriptor:%{public}@ | newerDescriptor:%{public}@", buf, 0x34u);

                    v77 = v127;
                  }

                  ++v129;

                  v43 = obja;
                }

                else
                {
                  ++v128;
                  v69 = _MADLog(@"AutoStager");
                  if (os_log_type_enabled(v69, OS_LOG_TYPE_ERROR))
                  {
                    summary3 = [v49 summary];
                    summary4 = [v56 summary];
                    *buf = 138544386;
                    v167 = stagingCopy;
                    v168 = 2114;
                    v169 = v130;
                    v170 = 2114;
                    v171 = nameCopy;
                    v172 = 2114;
                    v173 = summary3;
                    v174 = 2114;
                    v175 = summary4;
                    _os_log_impl(&dword_0, v69, OS_LOG_TYPE_ERROR, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] asset-versions not comparable (filtered latest encountered) | droppedDescriptor:%{public}@ | keptDescriptor:%{public}@", buf, 0x34u);
                  }
                }

                v46 = v133;
              }

              v47 = v139;
              v50 = v145;
            }

            else
            {
              metadata3 = [v49 metadata];
              v137 = &v137[[metadata3 safeIntegerForKey:@"_UnarchivedSize"]];

              [v43 setSafeObject:v49 forKey:persistedEntryID];
            }
          }

          objc_autoreleasePoolPop(v50);
          v48 = v48 + 1;
        }

        while (v46 != v48);
        v46 = [v143 countByEnumeratingWithState:&v155 objects:v165 count:16];
      }

      while (v46);
    }

    else
    {
      v128 = 0;
      v129 = 0;
      v135 = 0;
      v137 = 0;
    }

    if (downloadedCopy)
    {
      v153 = 0u;
      v154 = 0u;
      v151 = 0u;
      v152 = 0u;
      v134 = downloadedCopy;
      v146 = [v134 countByEnumeratingWithState:&v151 objects:v164 count:16];
      if (v146)
      {
        v140 = *v152;
        do
        {
          for (i = 0; i != v146; i = i + 1)
          {
            if (*v152 != v140)
            {
              objc_enumerationMutation(v134);
            }

            v85 = *(*(&v151 + 1) + 8 * i);
            v86 = objc_autoreleasePoolPush();
            v87 = [MAAutoAssetSelector alloc];
            assetType2 = [v85 assetType];
            assetSpecifier2 = [v85 assetSpecifier];
            v90 = [v87 initForAssetType:assetType2 withAssetSpecifier:assetSpecifier2];

            persistedEntryID2 = [v90 persistedEntryID];
            v92 = [v43 safeObjectForKey:persistedEntryID2 ofClass:objc_opt_class()];
            if (v92)
            {
              v93 = [SUCoreRestoreVersion alloc];
              assetVersion5 = [v92 assetVersion];
              v95 = [v93 initWithRestoreVersion:assetVersion5];

              v96 = [SUCoreRestoreVersion alloc];
              assetVersion6 = [v85 assetVersion];
              v98 = [v96 initWithRestoreVersion:assetVersion6];

              if ([v95 isComparable:v98] && objc_msgSend(v95, "compare:", v98) != &dword_0 + 1)
              {
                [obja removeObjectForKey:persistedEntryID2];
                v99 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(v99, OS_LOG_TYPE_DEFAULT))
                {
                  summary5 = [v92 summary];
                  summary6 = [v85 summary];
                  *buf = 138544386;
                  v167 = stagingCopy;
                  v168 = 2114;
                  v169 = v130;
                  v170 = 2114;
                  v171 = nameCopy;
                  v172 = 2114;
                  v173 = summary5;
                  v174 = 2114;
                  v175 = summary6;
                  _os_log_impl(&dword_0, v99, OS_LOG_TYPE_DEFAULT, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] available-for-staging asset-descriptor dropped | availableDescriptor:%{public}@ | nextAlreadyDownloadedDescriptor:%{public}@", buf, 0x34u);
                }
              }

              v43 = obja;
            }

            objc_autoreleasePoolPop(v86);
          }

          v146 = [v134 countByEnumeratingWithState:&v151 objects:v164 count:16];
        }

        while (v146);
      }
    }

    if ([v43 count] < v122)
    {
      v41 = objc_alloc_init(NSMutableArray);
      if (v41)
      {
        v149 = 0u;
        v150 = 0u;
        v147 = 0u;
        v148 = 0u;
        v17 = v43;
        v102 = [v17 countByEnumeratingWithState:&v147 objects:v163 count:16];
        if (!v102)
        {
          goto LABEL_88;
        }

        v103 = v102;
        v104 = *v148;
        while (1)
        {
          for (j = 0; j != v103; j = j + 1)
          {
            if (*v148 != v104)
            {
              objc_enumerationMutation(v17);
            }

            v106 = *(*(&v147 + 1) + 8 * j);
            v107 = objc_autoreleasePoolPush();
            v108 = v17;
            v109 = [v17 safeObjectForKey:v106 ofClass:objc_opt_class()];
            if (!v109)
            {
              v106 = [[NSString alloc] initWithFormat:@"corrupted descriptor (key:%@)", v106];
              objc_autoreleasePoolPop(v107);

              if (!v106)
              {
LABEL_101:
                if ([v41 count])
                {
                  metadata4 = v143;
                  goto LABEL_60;
                }

                v106 = @"nothing in trimmed-available-for-staging";
              }

LABEL_105:

LABEL_106:
              v114 = [[NSString alloc] initWithFormat:@"dropped all available-for-staging | %@", v106];
              v119 = objc_alloc_init(NSMutableArray);

              v120 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v120, OS_LOG_TYPE_ERROR))
              {
                *buf = 138544130;
                v167 = stagingCopy;
                v168 = 2114;
                v169 = v130;
                v170 = 2114;
                v171 = nameCopy;
                v172 = 2114;
                v173 = v114;
                _os_log_impl(&dword_0, v120, OS_LOG_TYPE_ERROR, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] dropped all assets that had been considered as available-for-staging | droppedAllReason:%{public}@", buf, 0x2Au);
              }

              assetTargetOSVersion = [(MADAutoAssetStager *)selfCopy assetTargetOSVersion];
              assetTargetBuildVersion = [(MADAutoAssetStager *)selfCopy assetTargetBuildVersion];
              [MADAutoAssetHistory recordOperation:705 toHistoryType:4 fromLayer:4 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion withAddendumMessage:v114];
              v143 = v119;
              goto LABEL_109;
            }

            v110 = v109;
            [v41 addObject:v109];

            objc_autoreleasePoolPop(v107);
            v17 = v108;
          }

          v103 = [v108 countByEnumeratingWithState:&v147 objects:v163 count:16];
          if (!v103)
          {
LABEL_88:

            goto LABEL_101;
          }
        }
      }

      v106 = @"device out-of-memory";
      goto LABEL_105;
    }

LABEL_89:

    v82 = v137;
    goto LABEL_90;
  }

  v15 = v14;
  v16 = [v14 objectAtIndex:0];
  if (!v16)
  {
    v82 = 0;
    v135 = 0;
    v128 = 0;
    v129 = 0;
    v143 = v15;
    goto LABEL_90;
  }

  v17 = v16;
  v161 = 0u;
  v162 = 0u;
  v159 = 0u;
  v160 = 0u;
  v18 = downloadedCopy;
  v19 = [v18 countByEnumeratingWithState:&v159 objects:v176 count:16];
  if (!v19)
  {

    v41 = v125;
LABEL_59:
    metadata4 = [v17 metadata];
    v137 = [metadata4 safeIntegerForKey:@"_UnarchivedSize"];
    v135 = 0;
    v128 = 0;
    v129 = 0;
LABEL_60:

    v43 = v17;
    v143 = v41;
    goto LABEL_89;
  }

  v20 = v19;
  v144 = *v160;
  p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
  obj = v18;
  v143 = v125;
  do
  {
    v22 = 0;
    v138 = v20;
    do
    {
      if (*v160 != v144)
      {
        objc_enumerationMutation(obj);
      }

      v23 = *(*(&v159 + 1) + 8 * v22);
      v24 = objc_autoreleasePoolPush();
      v25 = p_weak_ivar_lyt[223];
      assetType3 = [v23 assetType];
      assetType4 = [v17 assetType];
      if (![v25 stringIsEqual:assetType3 to:assetType4])
      {
        goto LABEL_18;
      }

      v28 = p_weak_ivar_lyt;
      v29 = p_weak_ivar_lyt[223];
      [v23 assetSpecifier];
      v31 = v30 = v17;
      assetSpecifier3 = [v30 assetSpecifier];
      LODWORD(v29) = [v29 stringIsEqual:v31 to:assetSpecifier3];

      if (!v29)
      {
        p_weak_ivar_lyt = v28;
        v20 = v138;
        v17 = v30;
        goto LABEL_19;
      }

      v33 = [SUCoreRestoreVersion alloc];
      v136 = v30;
      assetVersion7 = [v30 assetVersion];
      assetType3 = [v33 initWithRestoreVersion:assetVersion7];

      v35 = [SUCoreRestoreVersion alloc];
      assetVersion8 = [v23 assetVersion];
      assetType4 = [v35 initWithRestoreVersion:assetVersion8];

      if ([assetType3 isComparable:assetType4])
      {
        p_weak_ivar_lyt = v28;
        if ([assetType3 compare:assetType4] != &dword_0 + 1)
        {
          v37 = objc_alloc_init(NSMutableArray);

          v38 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v38, OS_LOG_TYPE_DEFAULT))
          {
            summary7 = [0 summary];
            summary8 = [v23 summary];
            *buf = 138544386;
            v167 = stagingCopy;
            v168 = 2114;
            v169 = v130;
            v170 = 2114;
            v171 = nameCopy;
            v172 = 2114;
            v173 = summary7;
            v174 = 2114;
            v175 = summary8;
            _os_log_impl(&dword_0, v38, OS_LOG_TYPE_DEFAULT, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] sole available-for-staging asset-descriptor dropped | availableDescriptor:%{public}@ | nextAlreadyDownloadedDescriptor:%{public}@", buf, 0x34u);

            p_weak_ivar_lyt = v28;
          }

          v17 = 0;
          v143 = v37;
          v20 = v138;
          goto LABEL_18;
        }
      }

      else
      {
        p_weak_ivar_lyt = v28;
      }

      v17 = v30;
      v20 = v138;
LABEL_18:

LABEL_19:
      objc_autoreleasePoolPop(v24);
      v22 = v22 + 1;
    }

    while (v20 != v22);
    v20 = [obj countByEnumeratingWithState:&v159 objects:v176 count:16];
  }

  while (v20);

  if (v17)
  {
    v41 = v143;
    goto LABEL_59;
  }

  v82 = 0;
  v135 = 0;
  v128 = 0;
  v129 = 0;
LABEL_90:
  v111 = +[MADAutoAssetControlManager preferenceMaxStagerFilesystemMegabytes];
  if (v111 == -1)
  {
    v112 = 0x300000000;
  }

  else
  {
    v112 = v111 << 20;
  }

  if (v82 > v112)
  {
    v112 = [[NSString alloc] initWithFormat:@"[%@](%@) {%@} total size on-disk after extraction too large | availableForStaging:%ld | totalFilesystemBytes:%llu | maxFilesystemBytes:%llu", v130, nameCopy, stagingCopy, objc_msgSend(v125, "count"), v82, v112];
    if (v112)
    {
      v106 = v112;
      goto LABEL_106;
    }
  }

  v106 = [[NSString alloc] initWithFormat:@"finalized available-for-staging | beganFromCount:%ld | duplicateCount:%ld | multipleCount:%ld | notComparableCount:%ld | availableForStaging:%ld | totalFilesystemBytes:%llu", v122, v135, v129, v128, objc_msgSend(v143, "count"), v82];
  v114 = [[NSString alloc] initWithFormat:@"[%@](%@) {%@} %@", v130, nameCopy, stagingCopy, v106];
  v116 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v116, OS_LOG_TYPE_DEFAULT))
  {
    *buf = 138544130;
    v167 = stagingCopy;
    v168 = 2114;
    v169 = v130;
    v170 = 2114;
    v171 = nameCopy;
    v172 = 2114;
    v173 = v106;
    _os_log_impl(&dword_0, v116, OS_LOG_TYPE_DEFAULT, "{%{public}@}\n[%{public}@](%{public}@) [DEDUP-AVAILABLE-FOR-STAGING] asset-descriptor array validated | availableSummary:%{public}@", buf, 0x2Au);
  }

  assetTargetOSVersion = [(MADAutoAssetStager *)selfCopy assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)selfCopy assetTargetBuildVersion];
  [MADAutoAssetHistory recordOperation:704 toHistoryType:4 fromLayer:4 forTargetOSVersion:assetTargetOSVersion forTargetBuildVersion:assetTargetBuildVersion withAddendumMessage:v114];
LABEL_109:

  return v143;
}

- (id)splitOutAvailableForStagingByGroup:(id)group forGroupDetermine:(BOOL)determine
{
  groupCopy = group;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v99 = groupCopy;
  groupCopy = [[NSString alloc] initWithFormat:@"%@:splitOutAvailableForStagingByGroup", groupCopy];
  doesStagingInvolveRequired = [(MADAutoAssetStager *)self doesStagingInvolveRequired];
  doesStagingInvolveOptional = [(MADAutoAssetStager *)self doesStagingInvolveOptional];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v100 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  v10 = objc_alloc_init(NSMutableDictionary);
  v113 = objc_alloc_init(NSMutableArray);
  v105 = objc_alloc_init(NSMutableArray);
  v110 = objc_alloc_init(NSMutableArray);
  v116 = +[MADAutoAssetControlManager preferenceStagingLookupFlipRequiredOptional];
  optionalAssetSizeAllowed = [(MADAutoAssetStager *)self optionalAssetSizeAllowed];
  if ([optionalAssetSizeAllowed isEqual:&off_4F7790])
  {
    unsignedIntegerValue = -1;
  }

  else
  {
    optionalAssetSizeAllowed2 = [(MADAutoAssetStager *)self optionalAssetSizeAllowed];
    unsignedIntegerValue = [optionalAssetSizeAllowed2 unsignedIntegerValue];
  }

  v102 = objc_alloc_init(NSMutableDictionary);
  v101 = objc_alloc_init(NSMutableDictionary);
  v129 = 0u;
  v130 = 0u;
  v131 = 0u;
  v132 = 0u;
  selfCopy = self;
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v108 = v10;
  v119 = [availableForStaging countByEnumeratingWithState:&v129 objects:v153 count:16];
  if (v119)
  {
    v14 = *v130;
    v114 = *v130;
    v106 = availableForStaging;
    do
    {
      for (i = 0; i != v119; i = i + 1)
      {
        if (*v130 != v14)
        {
          objc_enumerationMutation(availableForStaging);
        }

        v16 = *(*(&v129 + 1) + 8 * i);
        v17 = objc_autoreleasePoolPush();
        if (v16)
        {
          v18 = [MAAutoAssetSelector alloc];
          assetType = [v16 assetType];
          assetSpecifier = [v16 assetSpecifier];
          v21 = [v18 initForAssetType:assetType withAssetSpecifier:assetSpecifier];

          persistedEntryID = [v21 persistedEntryID];
          if (!persistedEntryID)
          {
            v31 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v31, OS_LOG_TYPE_ERROR))
            {
              summary = [(MADAutoAssetStager *)selfCopy summary];
              summary2 = [v16 summary];
              *buf = 138543874;
              v134 = summary;
              v135 = 2114;
              v136 = groupCopy;
              v137 = 2114;
              v138 = summary2;
              _os_log_impl(&dword_0, v31, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@} nil selectorEntryID | nextAvailableDescriptor:%{public}@", buf, 0x20u);

              v14 = v114;
            }

            goto LABEL_24;
          }

          v23 = [v10 safeObjectForKey:persistedEntryID ofClass:objc_opt_class()];
          if (!v23)
          {
            goto LABEL_15;
          }

          v24 = v23;
          v25 = [SUCoreRestoreVersion alloc];
          assetVersion = [v16 assetVersion];
          v27 = [v25 initWithRestoreVersion:assetVersion];

          v28 = [SUCoreRestoreVersion alloc];
          assetVersion2 = [v24 assetVersion];
          v30 = [v28 initWithRestoreVersion:assetVersion2];

          if ([v27 isComparable:v30])
          {
            if ([v27 compare:v30] == &dword_0 + 1)
            {
              [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v24 inContainer:v102];

              availableForStaging = v106;
              v10 = v108;
              v14 = v114;
LABEL_15:
              [v10 setSafeObject:v16 forKey:persistedEntryID];
LABEL_24:

              goto LABEL_25;
            }

            [(MADAutoAssetStager *)selfCopy trackSelectorForDescriptor:v24 inContainer:v101];
          }

          else
          {
            v34 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v34, OS_LOG_TYPE_ERROR))
            {
              summary3 = [(MADAutoAssetStager *)selfCopy summary];
              summary4 = [v16 summary];
              summary5 = [v24 summary];
              *buf = 138544130;
              v134 = summary3;
              v135 = 2114;
              v136 = groupCopy;
              v137 = 2114;
              v138 = summary4;
              v139 = 2112;
              v140 = summary5;
              v37 = summary5;
              _os_log_impl(&dword_0, v34, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@} versions not comparable (keeping already encountered) | nextAvailableDescriptor:%{public}@ | alreadyAvailableDescriptor:%@", buf, 0x2Au);
            }
          }

          availableForStaging = v106;

          v10 = v108;
          v14 = v114;
          goto LABEL_24;
        }

LABEL_25:
        objc_autoreleasePoolPop(v17);
      }

      v119 = [availableForStaging countByEnumeratingWithState:&v129 objects:v153 count:16];
    }

    while (v119);
  }

  v38 = [v10 count];
  v39 = selfCopy;
  availableForStaging2 = [(MADAutoAssetStager *)selfCopy availableForStaging];
  v41 = [availableForStaging2 count];

  if (v38 < v41)
  {
    v42 = objc_alloc_init(NSMutableArray);
    v43 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v43, OS_LOG_TYPE_DEFAULT))
    {
      summary6 = [(MADAutoAssetStager *)selfCopy summary];
      availableForStaging3 = [(MADAutoAssetStager *)selfCopy availableForStaging];
      v46 = [availableForStaging3 count];
      v47 = [v10 count];
      *buf = 138544130;
      v134 = summary6;
      v135 = 2114;
      v136 = groupCopy;
      v137 = 2048;
      v138 = v46;
      v139 = 2048;
      v140 = v47;
      _os_log_impl(&dword_0, v43, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} trimmed auto-asset-descriptors available-for-staging | previousCount:%ld | trimmedCount:%ld", buf, 0x2Au);
    }

    v127 = 0u;
    v128 = 0u;
    v125 = 0u;
    v126 = 0u;
    v48 = v10;
    v49 = [v48 countByEnumeratingWithState:&v125 objects:v152 count:16];
    if (v49)
    {
      v50 = v49;
      v51 = *v126;
      do
      {
        for (j = 0; j != v50; j = j + 1)
        {
          if (*v126 != v51)
          {
            objc_enumerationMutation(v48);
          }

          v53 = *(*(&v125 + 1) + 8 * j);
          v54 = [v48 safeObjectForKey:v53 ofClass:objc_opt_class()];
          if (v54)
          {
            [v42 addObject:v54];
          }

          else
          {
            autoStagerFSM2 = [(MADAutoAssetStager *)v39 autoStagerFSM];
            diag = [autoStagerFSM2 diag];
            v57 = [[NSString alloc] initWithFormat:@"{%@} unable to load auto-asset-descriptor from trimmedAvailableForStaging | trimmedSelectorKey:%@", groupCopy, v53];
            [diag trackAnomaly:@"AUTO-STAGER" forReason:v57 withResult:6108 withError:0];

            v39 = selfCopy;
          }
        }

        v50 = [v48 countByEnumeratingWithState:&v125 objects:v152 count:16];
      }

      while (v50);
    }

    if ([v42 count])
    {
      [(MADAutoAssetStager *)v39 setAvailableForStaging:v42];
    }

    else
    {
      autoStagerFSM3 = [(MADAutoAssetStager *)v39 autoStagerFSM];
      diag2 = [autoStagerFSM3 diag];
      v115 = [[NSString alloc] initWithFormat:@"{%@} empty trimmedArray (unable to trim availableForStaging)", groupCopy];
      [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v115 withResult:6110 withError:0];
    }
  }

  v61 = objc_alloc_init(NSMutableDictionary);
  v62 = objc_alloc_init(NSMutableDictionary);
  v120 = objc_alloc_init(NSMutableDictionary);
  v107 = objc_alloc_init(NSMutableDictionary);
  v121 = 0u;
  v122 = 0u;
  v123 = 0u;
  v124 = 0u;
  availableForStaging4 = [(MADAutoAssetStager *)v39 availableForStaging];
  v64 = [availableForStaging4 countByEnumeratingWithState:&v121 objects:v151 count:16];
  if (v64)
  {
    v65 = v64;
    v66 = *v122;
    do
    {
      for (k = 0; k != v65; k = k + 1)
      {
        if (*v122 != v66)
        {
          objc_enumerationMutation(availableForStaging4);
        }

        v68 = *(*(&v121 + 1) + 8 * k);
        if (v68)
        {
          if (v116 != [*(*(&v121 + 1) + 8 * k) isPreSUStagingRequired])
          {
            [v113 addObject:v68];
            if (doesStagingInvolveRequired)
            {
              v69 = v39;
              v70 = v68;
              v71 = v61;
LABEL_59:
              [(MADAutoAssetStager *)v69 trackSelectorForDescriptor:v70 inContainer:v71];
              [v110 addObject:v68];
              continue;
            }

            goto LABEL_60;
          }

          if (determine)
          {
            goto LABEL_57;
          }

          metadata = [v68 metadata];
          v73 = [metadata safeIntegerForKey:@"_UnarchivedSize"];

          if (unsignedIntegerValue && unsignedIntegerValue >= v73)
          {
            unsignedIntegerValue -= v73;
            v39 = selfCopy;
LABEL_57:
            [v105 addObject:v68];
            if (doesStagingInvolveOptional)
            {
              v69 = v39;
              v70 = v68;
              v71 = v120;
              goto LABEL_59;
            }

LABEL_60:
            [(MADAutoAssetStager *)v39 trackSelectorForDescriptor:v68 inContainer:v62];
            continue;
          }

          v74 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v74, OS_LOG_TYPE_DEFAULT))
          {
            selectorName = [v68 selectorName];
            *buf = 138544130;
            v134 = groupCopy;
            v135 = 2048;
            v136 = unsignedIntegerValue;
            v137 = 2048;
            v138 = v73;
            v139 = 2114;
            v140 = selectorName;
            _os_log_impl(&dword_0, v74, OS_LOG_TYPE_DEFAULT, "[AUTO-STAGER] {%{public}@} | dropping descriptor due to space constraint | byteTotal:%llu | descriptorBytes:%llu | nextAvailableDescriptor:%{public}@", buf, 0x2Au);
          }

          v39 = selfCopy;
        }
      }

      v65 = [availableForStaging4 countByEnumeratingWithState:&v121 objects:v151 count:16];
    }

    while (v65);
  }

  v76 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v76, OS_LOG_TYPE_DEFAULT))
  {
    summary7 = [(MADAutoAssetStager *)v39 summary];
    v78 = &stru_4BD3F0;
    if (v116)
    {
      v78 = @" [FLIPPED]";
    }

    v117 = v78;
    v79 = [(MADAutoAssetStager *)v39 selectorContainerAsString:v61];
    v80 = [(MADAutoAssetStager *)v39 selectorContainerAsString:v120];
    v81 = [(MADAutoAssetStager *)v39 selectorContainerAsString:v62];
    v82 = [(MADAutoAssetStager *)v39 selectorContainerAsString:v107];
    v83 = [(MADAutoAssetStager *)v39 selectorContainerAsString:v102];
    v84 = [(MADAutoAssetStager *)selfCopy selectorContainerAsString:v101];
    *buf = 138545410;
    v134 = summary7;
    v135 = 2114;
    v136 = groupCopy;
    v137 = 2114;
    v138 = v117;
    v139 = 2114;
    v140 = v79;
    v141 = 2114;
    v142 = v80;
    v143 = 2114;
    v144 = v81;
    v145 = 2114;
    v146 = v82;
    v147 = 2114;
    v148 = v83;
    v149 = 2114;
    v150 = v84;
    _os_log_impl(&dword_0, v76, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@}%{public}@ | available-for-staging\n>>> included:(R:%{public}@,O:%{public}@)\n>>> not-included:(R:%{public}@,O:%{public}@)\n>>> bestCandidateSoFar:%{public}@\n>>> older:%{public}@", buf, 0x5Cu);

    v39 = selfCopy;
  }

  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)v39 availableForStagingRequiredByTarget];
  [availableForStagingRequiredByTarget setSafeObject:v113 forKey:v100];

  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)v39 availableForStagingOptionalByTarget];
  [availableForStagingOptionalByTarget setSafeObject:v105 forKey:v100];

  v87 = [MADAutoAvailableForStaging alloc];
  assetTargetOSVersion = [(MADAutoAssetStager *)v39 assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)v39 assetTargetBuildVersion];
  assetTargetTrainName2 = [(MADAutoAssetStager *)v39 assetTargetTrainName];
  assetTargetRestoreVersion2 = [(MADAutoAssetStager *)v39 assetTargetRestoreVersion];
  v92 = [(MADAutoAvailableForStaging *)v87 initForTargetOSVersion:assetTargetOSVersion forTargetBuild:assetTargetBuildVersion forTargetTrainName:assetTargetTrainName2 forTargetRestoreVersion:assetTargetRestoreVersion2 withRequiredDescriptors:v113 withOptionalDescriptors:v105];

  if (v92)
  {
    v93 = v99;
    [(MADAutoAssetStager *)v39 storeAvailableForStaging:v92 fromLocation:v99];
  }

  else
  {
    v94 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v94, OS_LOG_TYPE_ERROR))
    {
      summary8 = [(MADAutoAssetStager *)v39 summary];
      v96 = [v113 count];
      v97 = [v105 count];
      *buf = 138544130;
      v134 = summary8;
      v135 = 2114;
      v136 = groupCopy;
      v137 = 2048;
      v138 = v96;
      v139 = 2048;
      v140 = v97;
      _os_log_impl(&dword_0, v94, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@} [BY-GROP-MODE] | unable to allocate storedAvailableForStaging (dropped) | availableForStagingRequiredByTarget:%ld | availableForStagingOptionalByTarget:%ld", buf, 0x2Au);
    }

    v93 = v99;
  }

  return v110;
}

- (BOOL)isAnyAvailableForStagingByGroup:(id)group withAlreadyDownloadedDescriptors:(id)descriptors targetHadBeenDetermined:(BOOL *)determined
{
  groupCopy = group;
  descriptorsCopy = descriptors;
  groupCopy = [[NSString alloc] initWithFormat:@"%@:isAnyAvailableForStagingByGroup", groupCopy];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v12 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
  v14 = [availableForStagingRequiredByTarget safeObjectForKey:v12 ofClass:objc_opt_class()];

  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
  v16 = [availableForStagingOptionalByTarget safeObjectForKey:v12 ofClass:objc_opt_class()];

  persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
  v18 = [persistedTargetLookupResults persistedEntry:v12 fromLocation:groupCopy];

  if (v18)
  {
    v19 = [v18 ullForKey:@"targetLookupResultsOTASituation"];
    v20 = 0;
    v21 = 1;
    if (v19 > 299)
    {
      if ((v19 - 300) < 2)
      {
        goto LABEL_19;
      }
    }

    else if ((v19 - 203) < 2 || v19 == stru_B8.segname)
    {
      if (v14 | v16)
      {
        v25 = [(MADAutoAssetStager *)self dedupAvailableForStaging:groupCopy dedupingAssetDescriptors:v14 removingAlreadyDownloaded:descriptorsCopy ofContainerName:@"availableForStagingRequiredByTarget"];

        v26 = [(MADAutoAssetStager *)self dedupAvailableForStaging:groupCopy dedupingAssetDescriptors:v16 removingAlreadyDownloaded:descriptorsCopy ofContainerName:@"availableForStagingOptionalByTarget"];

        availableForStagingRequiredByTarget2 = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
        [availableForStagingRequiredByTarget2 setSafeObject:v25 forKey:v12];

        availableForStagingOptionalByTarget2 = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
        [availableForStagingOptionalByTarget2 setSafeObject:v26 forKey:v12];

        v29 = v25;
        if ([v25 count] || objc_msgSend(v26, "count"))
        {
          v20 = 1;
          v16 = v26;
          v14 = v29;
          v21 = 1;
          if (!determined)
          {
            goto LABEL_21;
          }
        }

        else
        {
          [(MADAutoAssetStager *)self _persistTargetOTASituation:401 fromLocation:groupCopy];
          persistedState = [(MADAutoAssetStager *)self persistedState];
          persistedConfig = [persistedState persistedConfig];
          v33 = v25;
          v21 = 1;
          [persistedConfig persistBoolean:1 forKey:@"stagedNoContent"];

          v20 = 0;
          v16 = v26;
          v14 = v33;
          if (!determined)
          {
            goto LABEL_21;
          }
        }

        goto LABEL_20;
      }

      v16 = 0;
      v14 = 0;
    }

    else if (v19 == &stru_B8.segname[1])
    {
      goto LABEL_19;
    }
  }

  else
  {
    v22 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
    {
      summary = [(MADAutoAssetStager *)self summary];
      _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
      *buf = 138544130;
      v36 = summary;
      v37 = 2114;
      v38 = _targetNameActive;
      v39 = 2114;
      v40 = groupCopy;
      v41 = 2114;
      v42 = v12;
      _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "%{public}@\n[%{public}@] {%{public}@} unable to load persisted set-lookup-result file | targetLookupResultsKey:@%{public}@", buf, 0x2Au);
    }
  }

  v20 = 0;
  v21 = 0;
LABEL_19:
  if (determined)
  {
LABEL_20:
    *determined = v21;
  }

LABEL_21:

  return v20;
}

- (void)addToAvailableForStaging:(id)staging
{
  stagingCopy = staging;
  v24 = 0u;
  v25 = 0u;
  v26 = 0u;
  v27 = 0u;
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v23 = [availableForStaging countByEnumeratingWithState:&v24 objects:v32 count:16];
  if (v23)
  {
    v6 = *v25;
    v21 = availableForStaging;
    v22 = *v25;
LABEL_3:
    v7 = 0;
    while (1)
    {
      if (*v25 != v6)
      {
        objc_enumerationMutation(availableForStaging);
      }

      v8 = *(*(&v24 + 1) + 8 * v7);
      assetType = [stagingCopy assetType];
      assetType2 = [v8 assetType];
      if ([SUCore stringIsEqual:assetType to:assetType2])
      {
        assetSpecifier = [stagingCopy assetSpecifier];
        [v8 assetSpecifier];
        v13 = v12 = stagingCopy;
        if ([SUCore stringIsEqual:assetSpecifier to:v13])
        {
          assetVersion = [v12 assetVersion];
          assetVersion2 = [v8 assetVersion];
          v16 = [SUCore stringIsEqual:assetVersion to:assetVersion2];

          availableForStaging = v21;
          stagingCopy = v12;
          v6 = v22;
          if (v16)
          {
            v17 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v17, OS_LOG_TYPE_DEFAULT))
            {
              summary = [(MADAutoAssetStager *)self summary];
              summary2 = [stagingCopy summary];
              *buf = 138543618;
              v29 = summary;
              v30 = 2114;
              v31 = summary2;
              _os_log_impl(&dword_0, v17, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {addToAvailableForStaging} | ignoring additional entry for descriptor:%{public}@", buf, 0x16u);

              availableForStaging = v21;
            }

            goto LABEL_18;
          }

          goto LABEL_12;
        }

        stagingCopy = v12;
        v6 = v22;
      }

LABEL_12:
      if (v23 == ++v7)
      {
        v23 = [availableForStaging countByEnumeratingWithState:&v24 objects:v32 count:16];
        if (v23)
        {
          goto LABEL_3;
        }

        break;
      }
    }
  }

  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  [availableForStaging addObject:stagingCopy];
LABEL_18:
}

- (void)storeAvailableForStaging:(id)staging fromLocation:(id)location
{
  stagingCopy = staging;
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  targetTrainName = [stagingCopy targetTrainName];
  targetRestoreVersion = [stagingCopy targetRestoreVersion];
  v12 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:targetTrainName withRestoreVersion:targetRestoreVersion];

  persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
  v14 = [persistedAvailableForStagingByTarget persistedEntry:v12 fromLocation:locationCopy];

  v15 = [(MADAutoAssetStager *)self _targetNameAvailableForStaging:stagingCopy];
  if (v14)
  {
    [v14 persistSecureCodedObject:stagingCopy forKey:@"AvailableForStagingByTarget"];
    persistedAvailableForStagingByTarget2 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
    summary = [stagingCopy summary];
    [persistedAvailableForStagingByTarget2 storePersistedEntry:v12 withEntrySummary:summary fromLocation:locationCopy];

    v18 = [NSString alloc];
    summary2 = [stagingCopy summary];
    v20 = [v18 initWithFormat:@"available-for-staging for given target | availableForStaging:%@", summary2];
    [(MADAutoAssetStager *)self _logPersistedAvailableForStagingByTarget:locationCopy operation:@"ENTRY_ADD" forPersistedEntryID:v12 withAvailableForStaging:stagingCopy message:v20];
  }

  else
  {
    v21 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v21, OS_LOG_TYPE_ERROR))
    {
      summary3 = [(MADAutoAssetStager *)self summary];
      summary4 = [stagingCopy summary];
      *buf = 138544130;
      v25 = summary3;
      v26 = 2114;
      v27 = v15;
      v28 = 2114;
      v29 = locationCopy;
      v30 = 2114;
      v31 = summary4;
      _os_log_impl(&dword_0, v21, OS_LOG_TYPE_ERROR, "%{public}@\n[%{public}@] {%{public}@:storeAvailableForStaging} unable to load persisted available-for-staging file | avaiableForStaging:%{public}@", buf, 0x2Au);
    }
  }
}

- (id)newSetConfigurationForClientDomainName:(id)name forAssetSetIdentifier:(id)identifier withAutoAssetEntries:(id)entries
{
  entriesCopy = entries;
  identifierCopy = identifier;
  nameCopy = name;
  LODWORD(v13) = 16843008;
  LOBYTE(v12) = 0;
  v10 = [MADAutoSetConfiguration initForClientDomainName:"initForClientDomainName:forSetClientName:forAssetSetIdentifier:withAutoAssetEntries:withDiscoveredInFlightAtomicInstance:withNewerAtomicInstanceOncePersonalized:withLatestAtomicInstanceToVend:withLatestAtomicInstanceToVendFromPreSUStaging:withPreviouslyVendedLockedAtomicInstances:withTicksUntilPreviousForceUnlocked:withMostRecentlyReceivedCachedAssetSetID:withMostRecentlyReceivedDownloadedFromLive:withMostRecentlyReceivedLastTimeChecked:withMostRecentlyReceivedPostedDate:withLatestToVendCachedAssetSetID:withLatestToVendDownloadedFromLive:withLatestToVendLastTimeChecked:withLatestToVendPostedDate:withAavailableForUseError:withNewerVersionError:havingEverProvidedLatestToVend:inhibitingImpliedScheduling:havingReceivedLookupResponse:vendingAtomicInstanceForConfiguredEntries:" forSetClientName:nameCopy forAssetSetIdentifier:@"AUTO_ASSET_STAGER_AS_CLIENT" withAutoAssetEntries:identifierCopy withDiscoveredInFlightAtomicInstance:entriesCopy withNewerAtomicInstanceOncePersonalized:0 withLatestAtomicInstanceToVend:0 withLatestAtomicInstanceToVendFromPreSUStaging:0 withPreviouslyVendedLockedAtomicInstances:v12 withTicksUntilPreviousForceUnlocked:0 withMostRecentlyReceivedCachedAssetSetID:-1 withMostRecentlyReceivedDownloadedFromLive:0 withMostRecentlyReceivedLastTimeChecked:0 withMostRecentlyReceivedPostedDate:0 withLatestToVendCachedAssetSetID:0 withLatestToVendDownloadedFromLive:0 withLatestToVendLastTimeChecked:0 withLatestToVendPostedDate:0 withAavailableForUseError:0 withNewerVersionError:0 havingEverProvidedLatestToVend:0 inhibitingImpliedScheduling:v13 havingReceivedLookupResponse:? vendingAtomicInstanceForConfiguredEntries:?];

  return v10;
}

- (id)_allEliminationSelectors
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v5 = objc_alloc_init(NSMutableDictionary);
  v29 = 0u;
  v30 = 0u;
  v31 = 0u;
  v32 = 0u;
  eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
  v7 = [eliminationSelectorsAcknowledged countByEnumeratingWithState:&v29 objects:v34 count:16];
  if (v7)
  {
    v8 = v7;
    v9 = *v30;
    do
    {
      for (i = 0; i != v8; i = i + 1)
      {
        if (*v30 != v9)
        {
          objc_enumerationMutation(eliminationSelectorsAcknowledged);
        }

        v11 = *(*(&v29 + 1) + 8 * i);
        v12 = objc_autoreleasePoolPush();
        eliminationSelectorsAcknowledged2 = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
        v14 = [eliminationSelectorsAcknowledged2 safeObjectForKey:v11 ofClass:objc_opt_class()];

        [v5 setSafeObject:v14 forKey:v11];
        objc_autoreleasePoolPop(v12);
      }

      v8 = [eliminationSelectorsAcknowledged countByEnumeratingWithState:&v29 objects:v34 count:16];
    }

    while (v8);
  }

  v27 = 0u;
  v28 = 0u;
  v25 = 0u;
  v26 = 0u;
  eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
  v16 = [eliminationSelectors countByEnumeratingWithState:&v25 objects:v33 count:16];
  if (v16)
  {
    v17 = v16;
    v18 = *v26;
    do
    {
      for (j = 0; j != v17; j = j + 1)
      {
        if (*v26 != v18)
        {
          objc_enumerationMutation(eliminationSelectors);
        }

        v20 = *(*(&v25 + 1) + 8 * j);
        v21 = objc_autoreleasePoolPush();
        eliminationSelectors2 = [(MADAutoAssetStager *)self eliminationSelectors];
        v23 = [eliminationSelectors2 safeObjectForKey:v20 ofClass:objc_opt_class()];

        [v5 setSafeObject:v23 forKey:v20];
        objc_autoreleasePoolPop(v21);
      }

      v17 = [eliminationSelectors countByEnumeratingWithState:&v25 objects:v33 count:16];
    }

    while (v17);
  }

  return v5;
}

- (void)_removeEliminatedFromCandidatesAndAvaliable
{
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  _allEliminationSelectors = [(MADAutoAssetStager *)selfCopy _allEliminationSelectors];
  v5 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v5, OS_LOG_TYPE_DEFAULT))
  {
    summary = [(MADAutoAssetStager *)selfCopy summary];
    safeSummary = [_allEliminationSelectors safeSummary];
    *buf = 138543618;
    v68 = summary;
    v69 = 2114;
    v70 = safeSummary;
    _os_log_impl(&dword_0, v5, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_removeEliminatedFromCandidatesAndAvaliable} beginning to eliminate allEliminationSelectors:%{public}@", buf, 0x16u);
  }

  candidateSetConfigurations = [(MADAutoAssetStager *)selfCopy candidateSetConfigurations];
  v9 = [candidateSetConfigurations count];

  v56 = selfCopy;
  if (v9)
  {
    v10 = 0;
    v11 = -1;
    while (1)
    {
      v12 = objc_autoreleasePoolPush();
      candidateSetConfigurations2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurations];
      v14 = [candidateSetConfigurations2 objectAtIndex:v10];

      v63 = 0u;
      v64 = 0u;
      v61 = 0u;
      v62 = 0u;
      v15 = _allEliminationSelectors;
      v16 = [v15 countByEnumeratingWithState:&v61 objects:v66 count:16];
      if (v16)
      {
        v17 = v16;
        v52 = v12;
        v53 = v10;
        v51 = v11;
        v18 = *v62;
        while (2)
        {
          for (i = 0; i != v17; i = i + 1)
          {
            if (*v62 != v18)
            {
              objc_enumerationMutation(v15);
            }

            v20 = *(*(&v61 + 1) + 8 * i);
            v21 = objc_autoreleasePoolPush();
            v22 = [v15 safeObjectForKey:v20 ofClass:objc_opt_class()];
            assetType = [v22 assetType];
            assetSpecifier = [v22 assetSpecifier];
            v25 = [v14 assetSetEntryForAssetType:assetType forAssetSpecifier:assetSpecifier];

            objc_autoreleasePoolPop(v21);
            if (v25)
            {
              v10 = v53;
              v11 = v53;
              selfCopy = v56;
              goto LABEL_15;
            }
          }

          v17 = [v15 countByEnumeratingWithState:&v61 objects:v66 count:16];
          if (v17)
          {
            continue;
          }

          break;
        }

        selfCopy = v56;
        v11 = v51;
        v10 = v53;
LABEL_15:
        v12 = v52;
      }

      objc_autoreleasePoolPop(v12);
      if ((v11 & 0x8000000000000000) == 0)
      {
        break;
      }

      ++v10;
      candidateSetConfigurations3 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurations];
      v27 = [candidateSetConfigurations3 count];

      if (v10 >= v27)
      {
        goto LABEL_20;
      }
    }

    candidateSetConfigurations4 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurations];
    [candidateSetConfigurations4 removeObjectAtIndex:v11];
  }

LABEL_20:
  availableForStaging = [(MADAutoAssetStager *)selfCopy availableForStaging];
  v30 = [availableForStaging count];

  if (v30)
  {
    v31 = 0;
    v32 = -1;
    while (1)
    {
      v33 = objc_autoreleasePoolPush();
      availableForStaging2 = [(MADAutoAssetStager *)selfCopy availableForStaging];
      v35 = [availableForStaging2 objectAtIndex:v31];

      v59 = 0u;
      v60 = 0u;
      v57 = 0u;
      v58 = 0u;
      v36 = _allEliminationSelectors;
      v37 = [v36 countByEnumeratingWithState:&v57 objects:v65 count:16];
      if (v37)
      {
        v38 = v37;
        v54 = v32;
        v39 = *v58;
        while (2)
        {
          for (j = 0; j != v38; j = j + 1)
          {
            if (*v58 != v39)
            {
              objc_enumerationMutation(v36);
            }

            v41 = *(*(&v57 + 1) + 8 * j);
            v42 = objc_autoreleasePoolPush();
            v43 = [v36 safeObjectForKey:v41 ofClass:objc_opt_class()];
            v44 = [(MADAutoAssetStager *)v56 _doesSelector:v43 matchDescriptor:v35];

            objc_autoreleasePoolPop(v42);
            if (v44)
            {
              v32 = v31;
              selfCopy = v56;
              goto LABEL_32;
            }
          }

          v38 = [v36 countByEnumeratingWithState:&v57 objects:v65 count:16];
          if (v38)
          {
            continue;
          }

          break;
        }

        selfCopy = v56;
        v32 = v54;
      }

LABEL_32:

      objc_autoreleasePoolPop(v33);
      if ((v32 & 0x8000000000000000) == 0)
      {
        break;
      }

      ++v31;
      availableForStaging3 = [(MADAutoAssetStager *)selfCopy availableForStaging];
      v46 = [availableForStaging3 count];

      if (v31 >= v46)
      {
        goto LABEL_36;
      }
    }

    availableForStaging4 = [(MADAutoAssetStager *)selfCopy availableForStaging];
    [availableForStaging4 removeObjectAtIndex:v32];

    persistedState = [(MADAutoAssetStager *)selfCopy persistedState];
    persistedConfig = [persistedState persistedConfig];
    availableForStaging5 = [(MADAutoAssetStager *)selfCopy availableForStaging];
    [persistedConfig persistULL:objc_msgSend(availableForStaging5 forKey:"count") shouldPersist:{@"determinedAvailableAssetCount", 1}];
  }

LABEL_36:
}

- (void)_removeEliminatedFromStaged
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  _allEliminationSelectors = [(MADAutoAssetStager *)self _allEliminationSelectors];
  v54 = objc_alloc_init(NSMutableArray);
  v75 = 0u;
  v76 = 0u;
  v77 = 0u;
  v78 = 0u;
  selfCopy = self;
  obj = [(MADAutoAssetStager *)self successfullyStaged];
  v5 = [obj countByEnumeratingWithState:&v75 objects:v85 count:16];
  if (v5)
  {
    v6 = v5;
    v7 = *v76;
    p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
    v9 = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
    v55 = *v76;
    do
    {
      v10 = 0;
      v56 = v6;
      do
      {
        if (*v76 != v7)
        {
          objc_enumerationMutation(obj);
        }

        v60 = v10;
        v11 = *(*(&v75 + 1) + 8 * v10);
        v59 = objc_autoreleasePoolPush();
        successfullyStaged = [(MADAutoAssetStager *)selfCopy successfullyStaged];
        v13 = [successfullyStaged safeObjectForKey:v11 ofClass:objc_opt_class()];

        if (!v13)
        {
          v37 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v37, OS_LOG_TYPE_DEFAULT))
          {
            summary = [(MADAutoAssetStager *)selfCopy summary];
            *buf = 138543618;
            v82 = summary;
            v83 = 2114;
            v84 = v11;
            _os_log_impl(&dword_0, v37, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_removeEliminatedFromStaged} nil stagedDescriptor encountered on successfullyStaged for stagedSelectorKey:%{public}@", buf, 0x16u);
          }

          goto LABEL_42;
        }

        v73 = 0u;
        v74 = 0u;
        v71 = 0u;
        v72 = 0u;
        v14 = _allEliminationSelectors;
        v65 = [v14 countByEnumeratingWithState:&v71 objects:v80 count:16];
        if (!v65)
        {

          goto LABEL_42;
        }

        v63 = v14;
        v64 = *v72;
        v62 = v13;
LABEL_9:
        v15 = 0;
        while (1)
        {
          if (*v72 != v64)
          {
            objc_enumerationMutation(v14);
          }

          v16 = *(*(&v71 + 1) + 8 * v15);
          context = objc_autoreleasePoolPush();
          v17 = [v14 safeObjectForKey:v16 ofClass:objc_opt_class()];
          assetVersion = [v17 assetVersion];

          if (!assetVersion)
          {
            break;
          }

          v19 = v9[223];
          assetType = [v13 assetType];
          assetType2 = [v17 assetType];
          if (![v19 stringIsEqual:assetType to:assetType2])
          {
            goto LABEL_22;
          }

          v22 = v9[223];
          assetSpecifier = [v13 assetSpecifier];
          assetSpecifier2 = [v17 assetSpecifier];
          if (![v22 stringIsEqual:assetSpecifier to:assetSpecifier2])
          {

            v14 = v63;
LABEL_22:

            goto LABEL_23;
          }

          v25 = v9[223];
          [v13 assetVersion];
          v27 = v26 = p_weak_ivar_lyt;
          assetVersion2 = [v17 assetVersion];
          LODWORD(v25) = [v25 stringIsEqual:v27 to:assetVersion2];

          v13 = v62;
          p_weak_ivar_lyt = v26;
          v9 = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);

          v14 = v63;
          if (v25)
          {
            v39 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v39, OS_LOG_TYPE_DEFAULT))
            {
              summary2 = [(MADAutoAssetStager *)selfCopy summary];
              summary3 = [v62 summary];
              *buf = 138543618;
              v82 = summary2;
              v83 = 2114;
              v84 = summary3;
              v43 = v39;
              v44 = "%{public}@\n[AUTO-STAGER] {_removeEliminatedFromStaged} elimination-selector for asset-type + asset-specifier + asset-version being eliminated - removed from successfully-staged | descriptor:%{public}@";
LABEL_39:
              _os_log_impl(&dword_0, v43, OS_LOG_TYPE_DEFAULT, v44, buf, 0x16u);

              goto LABEL_40;
            }

            goto LABEL_40;
          }

LABEL_23:

          objc_autoreleasePoolPop(context);
          if (v65 == ++v15)
          {
            v36 = [v14 countByEnumeratingWithState:&v71 objects:v80 count:16];
            v65 = v36;
            if (!v36)
            {

              v7 = v55;
              goto LABEL_41;
            }

            goto LABEL_9;
          }
        }

        assetSpecifier3 = [v17 assetSpecifier];

        v30 = v9[223];
        assetType = [v13 assetType];
        assetType2 = [v17 assetType];
        v31 = [v30 stringIsEqual:assetType to:assetType2];
        v32 = v31;
        if (assetSpecifier3)
        {
          if (!v31)
          {
            goto LABEL_22;
          }

          v33 = v9[223];
          assetSpecifier4 = [v13 assetSpecifier];
          assetSpecifier5 = [v17 assetSpecifier];
          LODWORD(v33) = [v33 stringIsEqual:assetSpecifier4 to:assetSpecifier5];

          v13 = v62;
          if (v33)
          {
            v39 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v39, OS_LOG_TYPE_DEFAULT))
            {
              summary2 = [(MADAutoAssetStager *)selfCopy summary];
              summary3 = [v62 summary];
              *buf = 138543618;
              v82 = summary2;
              v83 = 2114;
              v84 = summary3;
              v43 = v39;
              v44 = "%{public}@\n[AUTO-STAGER] {_removeEliminatedFromStaged} elimination-selector for asset-type + asset-specifier being eliminated - removed from successfully-staged | descriptor:%{public}@";
              goto LABEL_39;
            }

            goto LABEL_40;
          }

          goto LABEL_23;
        }

        if (!v32)
        {
          goto LABEL_23;
        }

        v39 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v39, OS_LOG_TYPE_DEFAULT))
        {
          summary2 = [(MADAutoAssetStager *)selfCopy summary];
          summary3 = [v13 summary];
          *buf = 138543618;
          v82 = summary2;
          v83 = 2114;
          v84 = summary3;
          v43 = v39;
          v44 = "%{public}@\n[AUTO-STAGER] {_removeEliminatedFromStaged} elimination-selector for asset-type being eliminated - removed from successfully-staged | descriptor:%{public}@";
          goto LABEL_39;
        }

LABEL_40:
        v7 = v55;

        objc_autoreleasePoolPop(context);
        [v54 addObject:v13];
LABEL_41:
        v6 = v56;
LABEL_42:

        objc_autoreleasePoolPop(v59);
        v10 = v60 + 1;
      }

      while ((v60 + 1) != v6);
      v6 = [obj countByEnumeratingWithState:&v75 objects:v85 count:16];
    }

    while (v6);
  }

  v69 = 0u;
  v70 = 0u;
  v67 = 0u;
  v68 = 0u;
  v47 = v54;
  v48 = [v47 countByEnumeratingWithState:&v67 objects:v79 count:16];
  if (v48)
  {
    v49 = v48;
    v50 = *v68;
    do
    {
      for (i = 0; i != v49; i = i + 1)
      {
        if (*v68 != v50)
        {
          objc_enumerationMutation(v47);
        }

        v52 = *(*(&v67 + 1) + 8 * i);
        v53 = objc_autoreleasePoolPush();
        [(MADAutoAssetStager *)selfCopy _removeDescriptorFromSuccessfullyStaged:v52 message:@"remove all eliminate-selectors from set of successfully staged descriptors"];
        [(MADAutoAssetStager *)selfCopy _removeStagedAssetFromFilesystem:v52 forHistoryOperation:300];
        objc_autoreleasePoolPop(v53);
      }

      v49 = [v47 countByEnumeratingWithState:&v67 objects:v79 count:16];
    }

    while (v49);
  }
}

- (void)_acknowledgeEliminatedForCurrentJob
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v27 = objc_alloc_init(NSMutableDictionary);
  v32 = 0u;
  v33 = 0u;
  v34 = 0u;
  v35 = 0u;
  eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
  v6 = [eliminationSelectors countByEnumeratingWithState:&v32 objects:v37 count:16];
  if (v6)
  {
    v7 = v6;
    v8 = *v33;
    do
    {
      v9 = 0;
      do
      {
        if (*v33 != v8)
        {
          objc_enumerationMutation(eliminationSelectors);
        }

        v10 = *(*(&v32 + 1) + 8 * v9);
        v11 = objc_autoreleasePoolPush();
        eliminationSelectors2 = [(MADAutoAssetStager *)self eliminationSelectors];
        v13 = [eliminationSelectors2 safeObjectForKey:v10 ofClass:objc_opt_class()];

        if ([(MADAutoAssetStager *)self _doesSelectorMatchCurrentJob:v13])
        {
          [v27 setSafeObject:v13 forKey:v10];
          eliminationSetConfigurationCurrentJob = [(MADAutoAssetStager *)self eliminationSetConfigurationCurrentJob];

          if (!eliminationSetConfigurationCurrentJob)
          {
            [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"_acknowledgeEliminatedForCurrentJob" forAssetSelector:v13];
          }
        }

        objc_autoreleasePoolPop(v11);
        v9 = v9 + 1;
      }

      while (v7 != v9);
      v7 = [eliminationSelectors countByEnumeratingWithState:&v32 objects:v37 count:16];
    }

    while (v7);
  }

  v30 = 0u;
  v31 = 0u;
  v28 = 0u;
  v29 = 0u;
  v15 = v27;
  v16 = [v15 countByEnumeratingWithState:&v28 objects:v36 count:16];
  if (v16)
  {
    v17 = v16;
    v18 = *v29;
    do
    {
      v19 = 0;
      do
      {
        if (*v29 != v18)
        {
          objc_enumerationMutation(v15);
        }

        v20 = *(*(&v28 + 1) + 8 * v19);
        v21 = objc_autoreleasePoolPush();
        v22 = [v15 safeObjectForKey:v20 ofClass:objc_opt_class()];
        eliminationSelectors3 = [(MADAutoAssetStager *)self eliminationSelectors];
        [eliminationSelectors3 removeObjectForKey:v20];

        eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
        [eliminationSelectorsAcknowledged setSafeObject:v22 forKey:v20];

        objc_autoreleasePoolPop(v21);
        v19 = v19 + 1;
      }

      while (v17 != v19);
      v17 = [v15 countByEnumeratingWithState:&v28 objects:v36 count:16];
    }

    while (v17);
  }

  eliminationSetConfigurationCurrentJob2 = [(MADAutoAssetStager *)self eliminationSetConfigurationCurrentJob];

  if (eliminationSetConfigurationCurrentJob2)
  {
    eliminationSetConfigurationCurrentJob3 = [(MADAutoAssetStager *)self eliminationSetConfigurationCurrentJob];
    [(MADAutoAssetStager *)self notifyControlManagerEliminateDone:@"_acknowledgeEliminatedForCurrentJob" forSetConfiguration:eliminationSetConfigurationCurrentJob3];

    [(MADAutoAssetStager *)self setEliminationSetConfigurationCurrentJob:0];
  }
}

- (void)notifyControlManagerEliminateDone:(id)done forAssetSelector:(id)selector
{
  doneCopy = done;
  selectorCopy = selector;
  v7 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
  {
    summary = [selectorCopy summary];
    v9 = 138543618;
    v10 = doneCopy;
    v11 = 2114;
    v12 = summary;
    _os_log_impl(&dword_0, v7, OS_LOG_TYPE_DEFAULT, "\n[ELIMINATE(STAGER)]{%{public}@} notifying auto-control-manager asset-selector eliminate done | assetSelector:%{public}@", &v9, 0x16u);
  }

  [MADAutoAssetControlManager stagerEliminatedSelector:selectorCopy];
}

- (void)notifyControlManagerEliminateDone:(id)done forSetConfiguration:(id)configuration
{
  doneCopy = done;
  configurationCopy = configuration;
  v7 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
  {
    summary = [configurationCopy summary];
    v9 = 138543618;
    v10 = doneCopy;
    v11 = 2114;
    v12 = summary;
    _os_log_impl(&dword_0, v7, OS_LOG_TYPE_DEFAULT, "\n[SET-ELIMINATE(STAGER)]{%{public}@} notifying auto-control-manager set-identifier eliminate done | setConfiguration:%{public}@", &v9, 0x16u);
  }

  [MADAutoAssetControlManager stagerEliminatedSetConfiguration:configurationCopy];
}

- (void)_persistLastStagingFrom:(id)from
{
  fromCopy = from;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  fromCopy = [[NSString alloc] initWithFormat:@"%@:_persistLastStagingFrom", fromCopy];
  if (![(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)self _persistRemoveAll:fromCopy message:@"removing all before setting staging from/to" removingDetermined:1 loggingConfig:0];
  }

  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
  [persistedConfig persistString:stagingFromOSVersion forKey:@"lastStagingFromOSVersion"];

  persistedState2 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig2 = [persistedState2 persistedConfig];
  stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
  [persistedConfig2 persistString:stagingFromBuildVersion forKey:@"lastStagingFromBuildVersion"];

  persistedState3 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig3 = [persistedState3 persistedConfig];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  [persistedConfig3 persistString:assetTargetOSVersion forKey:@"assetTargetOSVersion" shouldPersist:0];

  persistedState4 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig4 = [persistedState4 persistedConfig];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [persistedConfig4 persistString:assetTargetBuildVersion forKey:@"assetTargetBuildVersion" shouldPersist:0];

  persistedState5 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig5 = [persistedState5 persistedConfig];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  [persistedConfig5 persistString:assetTargetTrainName forKey:@"assetTargetTrainName" shouldPersist:0];

  persistedState6 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig6 = [persistedState6 persistedConfig];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  [persistedConfig6 persistString:assetTargetRestoreVersion forKey:@"assetTargetRestoreVersion" shouldPersist:1];

  [(MADAutoAssetStager *)self _logPersistedConfigSet:fromCopy message:@"beginning staging operations"];
}

- (void)_persistStoredTargetWithOTASituation:(id)situation
{
  situationCopy = situation;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (![(MADAutoAssetStager *)self storedTargetWithOTASituation])
  {
    [(MADAutoAssetStager *)self setStoredTargetWithOTASituation:1];
    persistedState = [(MADAutoAssetStager *)self persistedState];
    persistedConfig = [persistedState persistedConfig];
    [persistedConfig persistBoolean:-[MADAutoAssetStager storedTargetWithOTASituation](self forKey:"storedTargetWithOTASituation") shouldPersist:{@"storedTargetWithOTASituation", 1}];

    v9 = _MADLog(@"AutoStagerSituation");
    if (os_log_type_enabled(v9, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      v11 = 138543618;
      v12 = summary;
      v13 = 2114;
      v14 = situationCopy;
      _os_log_impl(&dword_0, v9, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} first time persisted target-lookup-results included target-OTA-situation", &v11, 0x16u);
    }
  }
}

- (void)_persistTargetOTASituationForFollowup:(id)followup fromLocation:(id)location
{
  followupCopy = followup;
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (([SUCore stringIsEqual:followupCopy to:@"DeterminedRequiredWithOptional"]& 1) == 0)
  {
    if (([SUCore stringIsEqual:followupCopy to:@"DetermineNothingAvailable"]& 1) != 0 || [SUCore stringIsEqual:followupCopy to:@"DetermineNothingOtherAvailable"])
    {
      selfCopy3 = self;
      v10 = 201;
LABEL_5:
      [(MADAutoAssetStager *)selfCopy3 _persistTargetOTASituation:v10 fromLocation:locationCopy];
      goto LABEL_6;
    }

    if ([SUCore stringIsEqual:followupCopy to:@"DetermineHaveAvailable"])
    {
      selfCopy3 = self;
      v10 = 203;
      goto LABEL_5;
    }

    if ([SUCore stringIsEqual:followupCopy to:@"RequiredErrorBlocksOTA"])
    {
      selfCopy3 = self;
      v10 = 202;
      goto LABEL_5;
    }

    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    followupCopy = [[NSString alloc] initWithFormat:@"{%@:_persistTargetOTASituationForFollowup} unsupported followup event | followupEvent:%@", locationCopy, followupCopy];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:followupCopy withResult:6108 withError:0];
  }

LABEL_6:
}

- (void)_persistTargetOTASituation:(int64_t)situation fromLocation:(id)location
{
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v11 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  if (v11)
  {
    persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
    v13 = [persistedTargetLookupResults persistedEntry:v11 fromLocation:locationCopy];

    if (v13 && [v13 ullForKey:@"targetLookupResultsOTASituation"] != situation)
    {
      [v13 persistULL:situation forKey:@"targetLookupResultsOTASituation"];
      v14 = _MADLog(@"AutoStagerSituation");
      if (os_log_type_enabled(v14, OS_LOG_TYPE_DEFAULT))
      {
        summary = [(MADAutoAssetStager *)self summary];
        v16 = [MANAutoAssetControlStagerInformation previousOTASituationName:situation];
        v17 = 138544130;
        v18 = summary;
        v19 = 2114;
        v20 = locationCopy;
        v21 = 2114;
        v22 = v11;
        v23 = 2114;
        v24 = v16;
        _os_log_impl(&dword_0, v14, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} change to target-OTA-situation | targetLookupResultsKey:%{public}@ | targetOTASituation:%{public}@", &v17, 0x2Au);
      }

      [(MADAutoAssetStager *)self _persistStoredTargetWithOTASituation:locationCopy];
    }
  }

  else
  {
    v13 = 0;
  }
}

- (void)_persistAllTargetLookupResultsOTASituation:(int64_t)situation fromLocation:(id)location
{
  locationCopy = location;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
    v10 = [persistedTargetLookupResults persistedEntryIDs:locationCopy];

    if ([v10 count])
    {
      v30 = 0u;
      v31 = 0u;
      v28 = 0u;
      v29 = 0u;
      v24 = v10;
      v11 = v10;
      v27 = [v11 countByEnumeratingWithState:&v28 objects:v40 count:16];
      if (v27)
      {
        v12 = *v29;
        v26 = *v29;
        v25 = v11;
        do
        {
          for (i = 0; i != v27; i = i + 1)
          {
            if (*v29 != v12)
            {
              objc_enumerationMutation(v11);
            }

            v14 = *(*(&v28 + 1) + 8 * i);
            v15 = objc_autoreleasePoolPush();
            persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
            v17 = [persistedTargetLookupResults2 persistedEntry:v14 fromLocation:locationCopy];

            if (v17)
            {
              if ([v17 ullForKey:@"targetLookupResultsOTASituation"] != situation)
              {
                [v17 persistULL:situation forKey:@"targetLookupResultsOTASituation"];
                v18 = _MADLog(@"AutoStagerSituation");
                if (os_log_type_enabled(v18, OS_LOG_TYPE_DEFAULT))
                {
                  summary = [(MADAutoAssetStager *)self summary];
                  [MANAutoAssetControlStagerInformation previousOTASituationName:situation];
                  v21 = v20 = situation;
                  *buf = 138544130;
                  v33 = summary;
                  v34 = 2114;
                  v35 = locationCopy;
                  v36 = 2114;
                  v37 = v14;
                  v38 = 2114;
                  v39 = v21;
                  _os_log_impl(&dword_0, v18, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} change to target-OTA-situation | entryID:%{public}@ | targetOTASituation:%{public}@", buf, 0x2Au);

                  situation = v20;
                  v11 = v25;

                  v12 = v26;
                }

                [(MADAutoAssetStager *)self _persistStoredTargetWithOTASituation:locationCopy];
              }
            }

            else
            {
              v22 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
              {
                _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
                *buf = 138543874;
                v33 = _updateLatestSummary;
                v34 = 2114;
                v35 = locationCopy;
                v36 = 2114;
                v37 = v14;
                _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@} unable to retrieve set-lookup-result | entryID:%{public}@", buf, 0x20u);

                v12 = v26;
              }
            }

            objc_autoreleasePoolPop(v15);
          }

          v27 = [v11 countByEnumeratingWithState:&v28 objects:v40 count:16];
        }

        while (v27);
      }

      v10 = v24;
    }
  }
}

- (BOOL)_persistPreviousOTASituationIfTargetMatchesCurrentOS:(id)s settingStartupSituation:(BOOL)situation
{
  situationCopy = situation;
  sCopy = s;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
  v50 = sCopy;
  v10 = [persistedTargetLookupResults persistedEntryIDs:sCopy];

  if ([(MADAutoAssetStager *)self loadPersistedPreviousOTASituation])
  {
    v11 = 0;
    v12 = sCopy;
    goto LABEL_35;
  }

  [(MADAutoAssetStager *)self setLoadPersistedPreviousOTASituation:1];
  v57 = 0u;
  v58 = 0u;
  v55 = 0u;
  v56 = 0u;
  v13 = v10;
  v14 = [v13 countByEnumeratingWithState:&v55 objects:v69 count:16];
  if (!v14)
  {
    v11 = 0;
    v12 = sCopy;
    goto LABEL_34;
  }

  v15 = v14;
  v49 = v10;
  v48 = situationCopy;
  v54 = *v56;
  v12 = sCopy;
  v53 = v13;
  while (2)
  {
    v16 = 0;
    v52 = v15;
    do
    {
      if (*v56 != v54)
      {
        objc_enumerationMutation(v13);
      }

      v17 = *(*(&v55 + 1) + 8 * v16);
      v18 = objc_autoreleasePoolPush();
      persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
      v20 = [persistedTargetLookupResults2 persistedEntry:v17 fromLocation:v12];

      if (v20)
      {
        persistedTargetLookupResults3 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
        v22 = [persistedTargetLookupResults3 decodeFromLocation:v12 ofEntryName:v17 fromPersistedEntry:v20 decodingObjectForKey:@"targetLookupResults" ofClass:objc_opt_class() allowingNilObject:0];

        if (v22)
        {
          targetOSVersion = [v22 targetOSVersion];
          stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
          if (([SUCore stringIsEqual:targetOSVersion to:stagingFromOSVersion]& 1) != 0)
          {
            v51 = v22;
            targetBuild = [v22 targetBuild];
            stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
            v27 = [SUCore stringIsEqual:targetBuild to:stagingFromBuildVersion];

            if (!v27)
            {
              v12 = v50;
              v15 = v52;
              v13 = v53;
              v28 = v51;
              goto LABEL_19;
            }

            v32 = [v20 ullForKey:@"targetLookupResultsOTASituation"];
            if (!v32)
            {
              if ([(MADAutoAssetStager *)self storedTargetWithOTASituation])
              {
                v32 = &stru_B8 + 20;
              }

              else
              {
                v32 = &stru_20 + 69;
              }
            }

            v11 = v48;
            v33 = v51;
            if (v48)
            {
              [(MADAutoAssetStager *)self setStartupPreviousOTASituation:v32];
              persistedState = [(MADAutoAssetStager *)self persistedState];
              persistedConfig = [persistedState persistedConfig];
              [persistedConfig persistULL:-[MADAutoAssetStager startupPreviousOTASituation](self forKey:{"startupPreviousOTASituation"), @"previousOTASituation"}];

              v36 = _MADLog(@"AutoStagerSituation");
              if (os_log_type_enabled(v36, OS_LOG_TYPE_DEFAULT))
              {
                summary = [(MADAutoAssetStager *)self summary];
                targetOSVersion2 = [v51 targetOSVersion];
                targetBuild2 = [v51 targetBuild];
                v40 = [MANAutoAssetControlStagerInformation previousOTASituationName:[(MADAutoAssetStager *)self startupPreviousOTASituation]];
                *buf = 138544386;
                v60 = summary;
                v61 = 2114;
                v62 = v50;
                v63 = 2114;
                v64 = targetOSVersion2;
                v65 = 2114;
                v66 = targetBuild2;
                v67 = 2114;
                v68 = v40;
                _os_log_impl(&dword_0, v36, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} adopted previous-OTA-situation from target (just completed OTA) | targetOSVersion:%{public}@ | targetBuild:%{public}@ | startupPreviousOTASituation:%{public}@", buf, 0x34u);

                v12 = v50;
                v33 = v51;

LABEL_33:
                objc_autoreleasePoolPop(v18);
                v10 = v49;
                v13 = v53;
                goto LABEL_34;
              }
            }

            else
            {
              persistedState2 = [(MADAutoAssetStager *)self persistedState];
              persistedConfig2 = [persistedState2 persistedConfig];
              [persistedConfig2 persistULL:v32 forKey:@"previousOTASituation"];

              v36 = _MADLog(@"AutoStagerSituation");
              if (os_log_type_enabled(v36, OS_LOG_TYPE_DEFAULT))
              {
                summary2 = [(MADAutoAssetStager *)self summary];
                targetOSVersion3 = [v51 targetOSVersion];
                targetBuild3 = [v51 targetBuild];
                v46 = [MANAutoAssetControlStagerInformation previousOTASituationName:v32];
                *buf = 138544386;
                v60 = summary2;
                v61 = 2114;
                v62 = v50;
                v63 = 2114;
                v64 = targetOSVersion3;
                v65 = 2114;
                v66 = targetBuild3;
                v67 = 2114;
                v68 = v46;
                _os_log_impl(&dword_0, v36, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} adopted previous-OTA-situation from target (now running OS where staging had been attempted from) | targetOSVersion:%{public}@ | targetBuild:%{public}@ | startupPreviousOTASituation:%{public}@", buf, 0x34u);

                v12 = v50;
                v33 = v51;
                goto LABEL_33;
              }
            }

            v12 = v50;
            goto LABEL_33;
          }

          v15 = v52;
        }

        else
        {
          targetOSVersion = _MADLog(@"AutoStager");
          if (os_log_type_enabled(targetOSVersion, OS_LOG_TYPE_ERROR))
          {
            summary3 = [(MADAutoAssetStager *)self summary];
            *buf = 138543874;
            v60 = summary3;
            v61 = 2114;
            v62 = v12;
            v63 = 2114;
            v64 = v17;
            _os_log_impl(&dword_0, targetOSVersion, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@} unable to load persistedTargetLookupResults from persistedEntry | entryID:%{public}@", buf, 0x20u);

            v15 = v52;
          }
        }

        v28 = v22;
        v13 = v53;
      }

      else
      {
        v28 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v28, OS_LOG_TYPE_ERROR))
        {
          [(MADAutoAssetStager *)self summary];
          v30 = v29 = v28;
          *buf = 138543874;
          v60 = v30;
          v61 = 2114;
          v62 = v12;
          v63 = 2114;
          v64 = v17;
          _os_log_impl(&dword_0, v29, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@} unable to load entry from persistedTargetLookupResults | entryID:%{public}@", buf, 0x20u);

          v28 = v29;
        }
      }

LABEL_19:

      objc_autoreleasePoolPop(v18);
      v16 = v16 + 1;
    }

    while (v15 != v16);
    v15 = [v13 countByEnumeratingWithState:&v55 objects:v69 count:16];
    if (v15)
    {
      continue;
    }

    break;
  }

  v11 = 0;
  v10 = v49;
LABEL_34:

LABEL_35:
  return v11;
}

- (void)_persistErasePreviousOTASituation:(id)situation
{
  situationCopy = situation;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  v9 = [persistedConfig ullForKey:@"previousOTASituation"];

  if (v9 != &stru_20.flags)
  {
    persistedState2 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig2 = [persistedState2 persistedConfig];
    [persistedConfig2 persistULL:100 forKey:@"previousOTASituation"];

    [(MADAutoAssetStager *)self setStartupPreviousOTASituation:100];
    v12 = _MADLog(@"AutoStagerSituation");
    if (os_log_type_enabled(v12, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      v14 = [MANAutoAssetControlStagerInformation previousOTASituationName:v9];
      v15 = [MANAutoAssetControlStagerInformation previousOTASituationName:[(MADAutoAssetStager *)self startupPreviousOTASituation]];
      v16 = 138544130;
      v17 = summary;
      v18 = 2114;
      v19 = situationCopy;
      v20 = 2114;
      v21 = v14;
      v22 = 2114;
      v23 = v15;
      _os_log_impl(&dword_0, v12, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} erased previous-OTA-situation | hadBeenPreviousOTASituation:%{public}@ | startupPreviousOTASituation:%{public}@", &v16, 0x2Au);
    }
  }
}

- (int64_t)_persistDescriptor:(id)descriptor operation:(id)operation persistingDescriptor:(id)persistingDescriptor withRepresentation:(int64_t)representation message:(id)message
{
  messageCopy = message;
  persistingDescriptorCopy = persistingDescriptor;
  operationCopy = operation;
  descriptorCopy = descriptor;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  descriptorCopy = [[NSString alloc] initWithFormat:@"%@:_persistDescriptor", descriptorCopy];
  metadata = [persistingDescriptorCopy metadata];
  v17 = [metadata safeIntegerForKey:@"_UnarchivedSize"];

  v18 = [MAAutoAssetSelector alloc];
  assetType = [persistingDescriptorCopy assetType];
  assetSpecifier = [persistingDescriptorCopy assetSpecifier];
  assetVersion = [persistingDescriptorCopy assetVersion];
  v22 = [v18 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  persistedEntryID = [v22 persistedEntryID];
  persistedState = [(MADAutoAssetStager *)self persistedState];
  v25 = [persistedState persistedEntry:persistedEntryID fromLocation:descriptorCopy];

  stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
  [v25 persistString:stagingFromOSVersion forKey:@"lastStagingFromOSVersion"];

  stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
  [v25 persistString:stagingFromBuildVersion forKey:@"lastStagingFromBuildVersion"];

  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  [v25 persistString:assetTargetOSVersion forKey:@"assetTargetOSVersion"];

  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  [v25 persistString:assetTargetBuildVersion forKey:@"assetTargetBuildVersion"];

  [v25 persistULL:representation forKey:@"assetRepresentation"];
  [v25 persistULL:v17 forKey:@"assetContentBytes"];
  [v25 persistSecureCodedObject:persistingDescriptorCopy forKey:@"assetDescriptor"];
  persistedState2 = [(MADAutoAssetStager *)self persistedState];
  summary = [persistingDescriptorCopy summary];
  [persistedState2 storePersistedEntry:persistedEntryID withEntrySummary:summary fromLocation:descriptorCopy];

  [(MADAutoAssetStager *)self _logPersistedEntry:descriptorCopy operation:operationCopy persistingDescriptor:persistingDescriptorCopy withRepresentation:representation message:messageCopy];
  return v17;
}

- (id)_persistRebuildTrackingNewHandedOffDescriptors:(id)descriptors
{
  descriptorsCopy = descriptors;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  v9 = [persistedConfig stringForKey:@"lastStagingFromOSVersion"];
  [(MADAutoAssetStager *)self setStagingFromOSVersion:v9];

  persistedState2 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig2 = [persistedState2 persistedConfig];
  v12 = [persistedConfig2 stringForKey:@"lastStagingFromBuildVersion"];
  [(MADAutoAssetStager *)self setStagingFromBuildVersion:v12];

  persistedState3 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig3 = [persistedState3 persistedConfig];
  v15 = [persistedConfig3 stringForKey:@"assetTargetOSVersion"];
  [(MADAutoAssetStager *)self setAssetTargetOSVersion:v15];

  persistedState4 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig4 = [persistedState4 persistedConfig];
  v18 = [persistedConfig4 stringForKey:@"assetTargetBuildVersion"];
  [(MADAutoAssetStager *)self setAssetTargetBuildVersion:v18];

  persistedState5 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig5 = [persistedState5 persistedConfig];
  v21 = [persistedConfig5 stringForKey:@"assetTargetTrainName"];
  [(MADAutoAssetStager *)self setAssetTargetTrainName:v21];

  persistedState6 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig6 = [persistedState6 persistedConfig];
  v24 = [persistedConfig6 stringForKey:@"assetTargetRestoreVersion"];
  [(MADAutoAssetStager *)self setAssetTargetRestoreVersion:v24];

  persistedState7 = [(MADAutoAssetStager *)self persistedState];
  v26 = [persistedState7 persistedEntryIDs:@"_persistRebuildTrackingNewHandedOffDescriptors"];

  v98 = v26;
  v99 = descriptorsCopy;
  if (![v26 count])
  {
    goto LABEL_35;
  }

  v116 = 0u;
  v117 = 0u;
  v114 = 0u;
  v115 = 0u;
  v27 = v26;
  v105 = [v27 countByEnumeratingWithState:&v114 objects:v124 count:16];
  if (!v105)
  {

    goto LABEL_35;
  }

  v101 = 0;
  v104 = *v115;
  v28 = v27;
  v103 = v27;
  do
  {
    v29 = 0;
    do
    {
      if (*v115 != v104)
      {
        objc_enumerationMutation(v28);
      }

      v30 = *(*(&v114 + 1) + 8 * v29);
      v31 = objc_autoreleasePoolPush();
      persistedState8 = [(MADAutoAssetStager *)self persistedState];
      v33 = [persistedState8 persistedEntry:v30 fromLocation:@"_persistRebuildTrackingNewHandedOffDescriptors"];

      if (!v33)
      {
        v36 = _MADLog(@"AutoStager");
        if (!os_log_type_enabled(v36, OS_LOG_TYPE_ERROR))
        {
          goto LABEL_27;
        }

        summary = [(MADAutoAssetStager *)self summary];
        *buf = 138543618;
        v121 = summary;
        v122 = 2114;
        v123 = v30;
        _os_log_impl(&dword_0, v36, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_persistRebuildTrackingNewHandedOffDescriptors} unable to determine previous status for entry:%{public}@", buf, 0x16u);
        goto LABEL_26;
      }

      v34 = [v33 ullForKey:@"assetRepresentation"];
      persistedState9 = [(MADAutoAssetStager *)self persistedState];
      v36 = [persistedState9 decodeFromLocation:@"_persistRebuildTrackingNewHandedOffDescriptors" ofEntryName:v30 fromPersistedEntry:v33 decodingObjectForKey:@"assetDescriptor" ofClass:objc_opt_class() allowingNilObject:0];

      if (!v36)
      {
        summary = _MADLog(@"AutoStager");
        if (os_log_type_enabled(summary, OS_LOG_TYPE_ERROR))
        {
          summary2 = [(MADAutoAssetStager *)self summary];
          *buf = 138543618;
          v121 = summary2;
          v122 = 2114;
          v123 = v30;
          v39 = summary;
          v40 = OS_LOG_TYPE_ERROR;
          v41 = "%{public}@\n[AUTO-STAGER] {_persistRebuildTrackingNewHandedOffDescriptors} unable to load persistedDescriptor from persisted-state for entry:%{public}@";
          goto LABEL_25;
        }

LABEL_26:

        goto LABEL_27;
      }

      if (v34 <= 601)
      {
        if (v34 != stru_248.segname)
        {
          if (v34 == &stru_248.segname[1])
          {
            goto LABEL_21;
          }

LABEL_22:
          autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
          diag = [autoStagerFSM2 diag];
          v62 = [NSString alloc];
          summary3 = [v36 summary];
          v64 = [v62 initWithFormat:@"{_persistRebuildTrackingNewHandedOffDescriptors} unsupported asset representation(%d) - not adopting persisted descriptor:%@", v34, summary3];
          [diag trackAnomaly:@"AUTO-STAGER" forReason:v64 withResult:6108 withError:0];

          v28 = v103;
          goto LABEL_27;
        }

        summary = _MADLog(@"AutoStager");
        if (!os_log_type_enabled(summary, OS_LOG_TYPE_DEFAULT))
        {
          goto LABEL_26;
        }

        summary2 = [(MADAutoAssetStager *)self summary];
        *buf = 138543618;
        v121 = summary2;
        v122 = 2114;
        v123 = v30;
        v39 = summary;
        v40 = OS_LOG_TYPE_DEFAULT;
        v41 = "%{public}@\n[AUTO-STAGER] {_persistRebuildTrackingNewHandedOffDescriptors} persistedDescriptor candidateForStaging ignored (candidates come from stager-set-configurations) | entry:%{public}@";
LABEL_25:
        _os_log_impl(&dword_0, v39, v40, v41, buf, 0x16u);

        goto LABEL_26;
      }

      if (v34 == &stru_248.segname[2])
      {
LABEL_21:
        [(MADAutoAssetStager *)self _trackReloadedDescriptorAvailableForStaging:v36];
        goto LABEL_27;
      }

      if (v34 != &stru_248.segname[3])
      {
        goto LABEL_22;
      }

      v42 = [MAAutoAssetSelector alloc];
      assetType = [v36 assetType];
      assetSpecifier = [v36 assetSpecifier];
      assetVersion = [v36 assetVersion];
      v46 = [v42 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

      persistedState10 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig7 = [persistedState10 persistedConfig];
      v102 = [persistedConfig7 ullForKey:@"stagedAssetTotalContentBytes"];

      v100 = [v33 ullForKey:@"assetContentBytes"];
      successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
      persistedEntryID = [v46 persistedEntryID];
      [successfullyStaged setSafeObject:v36 forKey:persistedEntryID];

      analyticsManager = self->_analyticsManager;
      assetSpecifier2 = [v46 assetSpecifier];
      assetType2 = [v46 assetType];
      assetVersion2 = [v46 assetVersion];
      v55 = [(MADAnalyticsManager *)analyticsManager recordMobileAssetPromotionAttempt:assetSpecifier2 assetType:assetType2 assetVersion:assetVersion2 osPromotion:1 successfullyPromoted:1 withReason:6];

      LODWORD(assetSpecifier2) = [v36 isPatch];
      statisticsStaged = [(MADAutoAssetStager *)self statisticsStaged];
      v57 = statisticsStaged;
      if (assetSpecifier2)
      {
        [statisticsStaged setPatchedAssets:{objc_msgSend(statisticsStaged, "patchedAssets") + 1}];

        statisticsStaged2 = [(MADAutoAssetStager *)self statisticsStaged];
        metadata = [v36 metadata];
        [statisticsStaged2 setPatchedBytes:{objc_msgSend(metadata, "safeIntegerForKey:", @"_UnarchivedSize", "patchedBytes")}];
      }

      else
      {
        [statisticsStaged setFullAssets:{objc_msgSend(statisticsStaged, "fullAssets") + 1}];

        statisticsStaged2 = [(MADAutoAssetStager *)self statisticsStaged];
        metadata = [v36 metadata];
        [statisticsStaged2 setFullBytes:{objc_msgSend(metadata, "safeIntegerForKey:", @"_UnarchivedSize", "fullBytes")}];
      }

      persistedState11 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig8 = [persistedState11 persistedConfig];
      successfullyStaged2 = [(MADAutoAssetStager *)self successfullyStaged];
      [persistedConfig8 persistULL:objc_msgSend(successfullyStaged2 forKey:"count") shouldPersist:{@"stagedAssetCount", 0}];

      persistedState12 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig9 = [persistedState12 persistedConfig];
      [persistedConfig9 persistULL:&v102[v100] forKey:@"stagedAssetTotalContentBytes" shouldPersist:0];

      persistedState13 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig10 = [persistedState13 persistedConfig];
      successfullyStaged3 = [(MADAutoAssetStager *)self successfullyStaged];
      [persistedConfig10 persistBoolean:objc_msgSend(successfullyStaged3 forKey:"count") == 0 shouldPersist:{@"stagedNoContent", 0}];

      v101 = 1;
      v28 = v103;
LABEL_27:

      objc_autoreleasePoolPop(v31);
      v29 = v29 + 1;
    }

    while (v105 != v29);
    v73 = [v28 countByEnumeratingWithState:&v114 objects:v124 count:16];
    v105 = v73;
  }

  while (v73);

  v26 = v98;
  descriptorsCopy = v99;
  if (v101)
  {
    persistedState14 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig11 = [persistedState14 persistedConfig];
    [persistedConfig11 persistState];

    [(MADAutoAssetStager *)self _logPersistedConfigSet:@"_persistRebuildTrackingNewHandedOffDescriptors" message:@"encountered staged descriptors"];
  }

LABEL_35:
  if (([SUCore stringIsEqual:descriptorsCopy to:@"ResumeRunningTargetVersion"]& 1) != 0 || [SUCore stringIsEqual:descriptorsCopy to:@"ResumePromotingAllStaged"])
  {
    v76 = objc_alloc_init(NSMutableArray);
    v110 = 0u;
    v111 = 0u;
    v112 = 0u;
    v113 = 0u;
    successfullyStaged4 = [(MADAutoAssetStager *)self successfullyStaged];
    v78 = [successfullyStaged4 countByEnumeratingWithState:&v110 objects:v119 count:16];
    if (v78)
    {
      v79 = v78;
      v80 = *v111;
      do
      {
        for (i = 0; i != v79; i = i + 1)
        {
          if (*v111 != v80)
          {
            objc_enumerationMutation(successfullyStaged4);
          }

          v82 = *(*(&v110 + 1) + 8 * i);
          v83 = objc_autoreleasePoolPush();
          successfullyStaged5 = [(MADAutoAssetStager *)self successfullyStaged];
          v85 = [successfullyStaged5 safeObjectForKey:v82 ofClass:objc_opt_class()];

          if (v85)
          {
            [v76 addObject:v85];
          }

          objc_autoreleasePoolPop(v83);
        }

        v79 = [successfullyStaged4 countByEnumeratingWithState:&v110 objects:v119 count:16];
      }

      while (v79);
    }

    if ([v76 count])
    {
      v108 = 0u;
      v109 = 0u;
      v106 = 0u;
      v107 = 0u;
      v86 = v76;
      v87 = [v86 countByEnumeratingWithState:&v106 objects:v118 count:16];
      if (v87)
      {
        v88 = v87;
        v89 = *v107;
        do
        {
          for (j = 0; j != v88; j = j + 1)
          {
            if (*v107 != v89)
            {
              objc_enumerationMutation(v86);
            }

            v91 = *(*(&v106 + 1) + 8 * j);
            v92 = objc_autoreleasePoolPush();
            [(MADAutoAssetStager *)self _removeDescriptorFromSuccessfullyStaged:v91 message:@"NEW-OS-PROMOTION"];
            objc_autoreleasePoolPop(v92);
          }

          v88 = [v86 countByEnumeratingWithState:&v106 objects:v118 count:16];
        }

        while (v88);
      }

      v76 = _MADLog(@"AutoStager");
      v26 = v98;
      if (os_log_type_enabled(v76, OS_LOG_TYPE_DEFAULT))
      {
        summary4 = [(MADAutoAssetStager *)self summary];
        v94 = [v86 count];
        *buf = 138543618;
        v121 = summary4;
        v122 = 2048;
        v123 = v94;
        _os_log_impl(&dword_0, v76, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_persistRebuildTrackingNewHandedOffDescriptors} promoted descriptor count:%ld", buf, 0x16u);
      }

      descriptorsCopy = v99;
    }

    else
    {
      autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag2 = [autoStagerFSM3 diag];
      [diag2 trackAnomaly:@"AUTO-STAGER" forReason:@"{_persistRebuildTrackingNewHandedOffDescriptors} | should have asset(s) to be promoted yet none to hand off to auto-control-manager" withResult:6111 withError:0];

      v86 = 0;
      v26 = v98;
      descriptorsCopy = v99;
    }
  }

  else
  {
    v86 = 0;
  }

  return v86;
}

- (void)_trackReloadedDescriptorAvailableForStaging:(id)staging
{
  stagingCopy = staging;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (stagingCopy)
  {
    [(MADAutoAssetStager *)self addToAvailableForStaging:stagingCopy];
  }

  else
  {
    v7 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
    {
      summary = [(MADAutoAssetStager *)self summary];
      v9 = 138543362;
      v10 = summary;
      _os_log_impl(&dword_0, v7, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_trackReloadedDescriptorAvailableForStaging} nil persistedDescriptor provided by caller", &v9, 0xCu);
    }
  }
}

- (void)_removeDescriptorFromSuccessfullyStaged:(id)staged message:(id)message
{
  stagedCopy = staged;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v10 = [MAAutoAssetSelector alloc];
  assetType = [stagedCopy assetType];
  assetSpecifier = [stagedCopy assetSpecifier];
  assetVersion = [stagedCopy assetVersion];
  v14 = [v10 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  persistedEntryID = [v14 persistedEntryID];
  if (persistedEntryID)
  {
    successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
    v17 = [successfullyStaged safeObjectForKey:persistedEntryID ofClass:objc_opt_class()];

    if (v17)
    {
      metadata = [v17 metadata];
      v19 = [metadata safeIntegerForKey:@"_UnarchivedSize"];

      persistedState = [(MADAutoAssetStager *)self persistedState];
      persistedConfig = [persistedState persistedConfig];
      v22 = [persistedConfig ullForKey:@"stagedAssetTotalContentBytes"];

      successfullyStaged2 = [(MADAutoAssetStager *)self successfullyStaged];
      [successfullyStaged2 removeObjectForKey:persistedEntryID];

      persistedState2 = [(MADAutoAssetStager *)self persistedState];
      [persistedState2 removePersistedEntry:persistedEntryID fromLocation:@"_removeDescriptorFromSuccessfullyStaged"];

      v68 = messageCopy;
      [(MADAutoAssetStager *)self _logPersistedRemovedEntry:@"_removeDescriptorFromSuccessfullyStaged" removedDescriptor:stagedCopy message:messageCopy];
      LODWORD(persistedConfig) = [v17 isPatch];
      statisticsUnstaged = [(MADAutoAssetStager *)self statisticsUnstaged];
      v26 = statisticsUnstaged;
      if (persistedConfig)
      {
        [statisticsUnstaged setPatchedAssets:{objc_msgSend(statisticsUnstaged, "patchedAssets") + 1}];

        statisticsUnstaged2 = [(MADAutoAssetStager *)self statisticsUnstaged];
        metadata2 = [v17 metadata];
        [statisticsUnstaged2 setPatchedBytes:{objc_msgSend(metadata2, "safeIntegerForKey:", @"_UnarchivedSize", "patchedBytes")}];
      }

      else
      {
        [statisticsUnstaged setFullAssets:{objc_msgSend(statisticsUnstaged, "fullAssets") + 1}];

        statisticsUnstaged2 = [(MADAutoAssetStager *)self statisticsUnstaged];
        metadata2 = [v17 metadata];
        [statisticsUnstaged2 setFullBytes:{objc_msgSend(metadata2, "safeIntegerForKey:", @"_UnarchivedSize", "fullBytes")}];
      }

      v67 = v14;

      v39 = v22 - v19;
      if (v22 >= v19)
      {
        persistedState3 = [(MADAutoAssetStager *)self persistedState];
        persistedConfig2 = [persistedState3 persistedConfig];
        successfullyStaged3 = [(MADAutoAssetStager *)self successfullyStaged];
        [persistedConfig2 persistULL:objc_msgSend(successfullyStaged3 forKey:"count") shouldPersist:{@"stagedAssetCount", 0}];

        persistedState4 = [(MADAutoAssetStager *)self persistedState];
        persistedConfig3 = [persistedState4 persistedConfig];
        [persistedConfig3 persistULL:v39 forKey:@"stagedAssetTotalContentBytes" shouldPersist:0];
      }

      else
      {
        autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
        diag = [autoStagerFSM2 diag];
        v42 = [NSString alloc];
        summary = [stagedCopy summary];
        v44 = [v42 initWithFormat:@"{_removeDescriptorFromSuccessfullyStaged} | descriptor larger than total staged content | removeFromStagedDescriptor:%@, unarchivedSize:%lld, stagedAssetTotalContentBytes:%llu", summary, v19, v22];
        [diag trackAnomaly:@"AUTO-STAGER" forReason:v44 withResult:6108 withError:0];

        persistedState4 = [(MADAutoAssetStager *)self persistedState];
        persistedConfig3 = [persistedState4 persistedConfig];
        successfullyStaged4 = [(MADAutoAssetStager *)self successfullyStaged];
        [persistedConfig3 persistULL:objc_msgSend(successfullyStaged4 forKey:"count") shouldPersist:{@"stagedAssetCount", 0}];
      }

      persistedState5 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig4 = [persistedState5 persistedConfig];
      successfullyStaged5 = [(MADAutoAssetStager *)self successfullyStaged];
      [persistedConfig4 persistBoolean:objc_msgSend(successfullyStaged5 forKey:"count") == 0 shouldPersist:{@"stagedNoContent", 0}];

      persistedState6 = [(MADAutoAssetStager *)self persistedState];
      persistedConfig5 = [persistedState6 persistedConfig];
      [persistedConfig5 persistState];

      successfullyStaged6 = [(MADAutoAssetStager *)self successfullyStaged];
      v57 = [successfullyStaged6 count];

      if (!v57)
      {
        assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
        assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
        v60 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

        if (v60 && (-[MADAutoAssetStager persistedTargetLookupResults](self, "persistedTargetLookupResults"), v61 = objc_claimAutoreleasedReturnValue(), [v61 persistedEntry:v60 fromLocation:@"_removeDescriptorFromSuccessfullyStaged"], v62 = objc_claimAutoreleasedReturnValue(), v61, v62))
        {
          [v62 persistULL:402 forKey:@"targetLookupResultsOTASituation"];
          v63 = _MADLog(@"AutoStagerSituation");
          if (os_log_type_enabled(v63, OS_LOG_TYPE_DEFAULT))
          {
            summary2 = [(MADAutoAssetStager *)self summary];
            v65 = [MANAutoAssetControlStagerInformation previousOTASituationName:402];
            *buf = 138543874;
            v70 = summary2;
            v71 = 2114;
            v72 = v60;
            v73 = 2114;
            v74 = v65;
            _os_log_impl(&dword_0, v63, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {_removeDescriptorFromSuccessfullyStaged} target-OTA-situation now indicates empty | targetLookupResultsKey:%{public}@ | targetOTASituation:%{public}@", buf, 0x20u);
          }

          [(MADAutoAssetStager *)self _persistStoredTargetWithOTASituation:@"_removeDescriptorFromSuccessfullyStaged"];
        }

        else
        {
          v62 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v62, OS_LOG_TYPE_ERROR))
          {
            summary3 = [(MADAutoAssetStager *)self summary];
            *buf = 138543618;
            v70 = summary3;
            v71 = 2114;
            v72 = v60;
            _os_log_impl(&dword_0, v62, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_removeDescriptorFromSuccessfullyStaged} unable to load persisted set-lookup-result file | targetLookupResultsKey:%{public}@", buf, 0x16u);
          }
        }
      }

      messageCopy = v68;
      [(MADAutoAssetStager *)self _logPersistedConfigSet:@"_removeDescriptorFromSuccessfullyStaged" message:v68];
      v14 = v67;
    }

    else
    {
      autoStagerFSM3 = [(MADAutoAssetStager *)self autoStagerFSM];
      diag2 = [autoStagerFSM3 diag];
      v36 = [NSString alloc];
      summary4 = [stagedCopy summary];
      v38 = [v36 initWithFormat:@"{_removeDescriptorFromSuccessfullyStaged} | provided not currently staged | removeFromStagedDescriptor:%@", summary4];
      [diag2 trackAnomaly:@"AUTO-STAGER" forReason:v38 withResult:6108 withError:0];
    }
  }

  else
  {
    autoStagerFSM4 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag3 = [autoStagerFSM4 diag];
    v31 = [NSString alloc];
    summary5 = [stagedCopy summary];
    v33 = [v31 initWithFormat:@"{_removeDescriptorFromSuccessfullyStaged} | no persisted entry to remove | removeFromStagedDescriptor:%@", summary5];
    [diag3 trackAnomaly:@"AUTO-STAGER" forReason:v33 withResult:6110 withError:0];
  }
}

- (void)_persistRemoveAll:(id)all message:(id)message removingDetermined:(BOOL)determined loggingConfig:(BOOL)config
{
  configCopy = config;
  determinedCopy = determined;
  allCopy = all;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedState = [(MADAutoAssetStager *)self persistedState];
  [persistedState removeAllPersistedEntries:messageCopy];

  if (determinedCopy)
  {
    [(MADAutoAssetStager *)self setAssetTargetOSVersion:0];
    [(MADAutoAssetStager *)self setAssetTargetBuildVersion:0];
    [(MADAutoAssetStager *)self setAssetTargetTrainName:0];
    [(MADAutoAssetStager *)self setAssetTargetRestoreVersion:0];
    [(MADAutoAssetStager *)self setStoredTargetWithOTASituation:0];
    persistedState2 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig = [persistedState2 persistedConfig];
    [persistedConfig persistString:@"NO_STAGING_ATTEMPTED" forKey:@"assetTargetOSVersion" shouldPersist:0];

    persistedState3 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig2 = [persistedState3 persistedConfig];
    [persistedConfig2 persistString:@"NO_STAGING_ATTEMPTED" forKey:@"assetTargetBuildVersion" shouldPersist:0];

    persistedState4 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig3 = [persistedState4 persistedConfig];
    [persistedConfig3 persistString:@"NO_STAGING_ATTEMPTED" forKey:@"assetTargetTrainName" shouldPersist:0];

    persistedState5 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig4 = [persistedState5 persistedConfig];
    [persistedConfig4 persistString:@"NO_STAGING_ATTEMPTED" forKey:@"assetTargetRestoreVersion" shouldPersist:0];

    persistedState6 = [(MADAutoAssetStager *)self persistedState];
    persistedConfig5 = [persistedState6 persistedConfig];
    [persistedConfig5 persistBoolean:-[MADAutoAssetStager storedTargetWithOTASituation](self forKey:"storedTargetWithOTASituation") shouldPersist:{@"storedTargetWithOTASituation", 0}];

    [(MADAutoAssetStager *)self stagingClientUsingGroups];
  }

  else if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    goto LABEL_5;
  }

  persistedState7 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig6 = [persistedState7 persistedConfig];
  [persistedConfig6 persistULL:0 forKey:@"candidateAssetCount" shouldPersist:0];

  persistedState8 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig7 = [persistedState8 persistedConfig];
  [persistedConfig7 persistULL:0 forKey:@"determinedAvailableAssetCount" shouldPersist:0];

LABEL_5:
  persistedState9 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig8 = [persistedState9 persistedConfig];
  [persistedConfig8 persistULL:0 forKey:@"activelyStagingAssetCount" shouldPersist:0];

  persistedState10 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig9 = [persistedState10 persistedConfig];
  [persistedConfig9 persistULL:0 forKey:@"awaitingStagingAssetCount" shouldPersist:0];

  persistedState11 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig10 = [persistedState11 persistedConfig];
  [persistedConfig10 persistULL:0 forKey:@"stagedAssetCount" shouldPersist:0];

  persistedState12 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig11 = [persistedState12 persistedConfig];
  [persistedConfig11 persistULL:0 forKey:@"stagedAssetTotalContentBytes" shouldPersist:0];

  persistedState13 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig12 = [persistedState13 persistedConfig];
  [persistedConfig12 persistBoolean:0 forKey:@"stagedNoContent" shouldPersist:0];

  persistedState14 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig13 = [persistedState14 persistedConfig];
  [persistedConfig13 persistBoolean:-[MADAutoAssetStager stagingClientUsingGroups](self forKey:"stagingClientUsingGroups") shouldPersist:{@"modeByGroups", 1}];

  if (configCopy)
  {
    [(MADAutoAssetStager *)self _logPersistedConfigSet:allCopy message:messageCopy];
  }

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups]|| determinedCopy)
  {
    persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
    [persistedTargetLookupResults removeAllPersistedEntries:allCopy];

    persistedSetLookupResults = [(MADAutoAssetStager *)self persistedSetLookupResults];
    [persistedSetLookupResults removeAllPersistedEntries:allCopy];

    persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
    [persistedAvailableForStagingByTarget removeAllPersistedEntries:allCopy];
  }

  [(MADAutoAssetStager *)self _logPersistedTableOfContents:allCopy];
  [(MADAutoAssetStager *)self _logPersistedTargetLookupResultsTableOfContents:allCopy];
  [(MADAutoAssetStager *)self _logPersistedSetLookupResultsTableOfContents:allCopy];
  [(MADAutoAssetStager *)self _logPersistedAvailableForStagingByTargetTableOfContents:allCopy];
}

- (void)_persistEraseLookupResults:(id)results forTargetTrainName:(id)name forTargetRestoreVersion:(id)version
{
  resultsCopy = results;
  nameCopy = name;
  versionCopy = version;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)self _lookupCacheRemoveResult:resultsCopy forTargetTrainName:nameCopy withRestoreVersion:versionCopy];
    [(MADAutoAssetStager *)self _availableForStagingRemove:resultsCopy forTargetTrainName:nameCopy withRestoreVersion:versionCopy];
    [(MADAutoAssetStager *)self _candidatesRemove:resultsCopy forTargetTrainName:nameCopy withRestoreVersion:versionCopy];
    v12 = objc_alloc_init(NSCache);
    [(MADAutoAssetStager *)self setTargetLookupResults:v12];
  }
}

- (void)_logPersistedSetLookupResult:(id)result operation:(id)operation forPersistedEntryID:(id)d withSetLookupResult:(id)lookupResult message:(id)message
{
  resultCopy = result;
  operationCopy = operation;
  dCopy = d;
  lookupResultCopy = lookupResult;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (dCopy)
  {
    autoStagerFSM2 = [MADAutoAssetPersisted persistedOperationSymbol:operationCopy];
    diag = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-SET-LOOKUP-RESULTS"];
    v21 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v21, OS_LOG_TYPE_DEFAULT))
    {
      newSummaryWithoutEntryID = [lookupResultCopy newSummaryWithoutEntryID];
      *buf = 138546434;
      v27 = @"PERSISTED";
      v28 = 2114;
      v29 = @"AUTO-STAGER-SET-LOOKUP-RESULTS";
      v30 = 2114;
      v31 = operationCopy;
      v32 = 2114;
      v33 = diag;
      v34 = 2114;
      v35 = @">----->";
      v36 = 2114;
      v37 = resultCopy;
      v38 = 2114;
      v39 = messageCopy;
      v40 = 2114;
      v41 = diag;
      v42 = 2114;
      v43 = autoStagerFSM2;
      v44 = 2114;
      v45 = dCopy;
      v46 = 2114;
      v47 = newSummaryWithoutEntryID;
      v48 = 2114;
      v49 = diag;
      v50 = 2114;
      v51 = @"<-----<";
      _os_log_impl(&dword_0, v21, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | %{public}@\n#_%{public}@:%{public}@", buf, 0x84u);
    }
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v23 = [NSString alloc];
    summary = [lookupResultCopy summary];
    v25 = [v23 initWithFormat:@"{%@:_logPersistedSetLookupResult} %@:%@ | no persistedEntryID | %@ | setLookupResult:%@", resultCopy, @"AUTO-STAGER-SET-LOOKUP-RESULTS", operationCopy, messageCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v25 withResult:6110 withError:0];
  }
}

- (void)_logPersistedSetLookupResultRemoved:(id)removed removedPersistedEntryID:(id)d removedSetLookupResult:(id)result message:(id)message
{
  removedCopy = removed;
  dCopy = d;
  resultCopy = result;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v16 = [MADAutoAssetPersisted persistedOperationSymbol:@"ENTRY_REMOVE"];
  v17 = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-SET-LOOKUP-RESULTS"];
  if (dCopy)
  {
    v18 = _MADLog(@"AutoStager");
    v19 = os_log_type_enabled(v18, OS_LOG_TYPE_DEFAULT);
    if (resultCopy)
    {
      if (v19)
      {
        v20 = removedCopy;
        newSummaryWithoutEntryID = [resultCopy newSummaryWithoutEntryID];
        *buf = 138546434;
        v30 = @"PERSISTED";
        v31 = 2114;
        v32 = @"AUTO-STAGER-SET-LOOKUP-RESULTS";
        v33 = 2114;
        v34 = @"ENTRY_REMOVE";
        v35 = 2114;
        v36 = v17;
        v37 = 2114;
        v38 = @">----->";
        v39 = 2114;
        v40 = v20;
        v41 = 2114;
        v42 = messageCopy;
        v43 = 2114;
        v44 = v17;
        v45 = 2114;
        v46 = v16;
        v47 = 2114;
        v48 = dCopy;
        v49 = 2114;
        v50 = newSummaryWithoutEntryID;
        v51 = 2114;
        v52 = v17;
        v53 = 2114;
        v54 = @"<-----<";
        _os_log_impl(&dword_0, v18, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | %{public}@\n#_%{public}@:%{public}@", buf, 0x84u);

        removedCopy = v20;
      }
    }

    else if (v19)
    {
      *buf = 138546178;
      v30 = @"PERSISTED";
      v31 = 2114;
      v32 = @"AUTO-STAGER-SET-LOOKUP-RESULTS";
      v33 = 2114;
      v34 = @"ENTRY_REMOVE";
      v35 = 2114;
      v36 = v17;
      v37 = 2114;
      v38 = @">----->";
      v39 = 2114;
      v40 = removedCopy;
      v41 = 2114;
      v42 = messageCopy;
      v43 = 2114;
      v44 = v17;
      v45 = 2114;
      v46 = v16;
      v47 = 2114;
      v48 = dCopy;
      v49 = 2114;
      v50 = v17;
      v51 = 2114;
      v52 = @"<-----<";
      _os_log_impl(&dword_0, v18, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@]\n#_%{public}@:%{public}@", buf, 0x7Au);
    }
  }

  else
  {
    v28 = v16;
    v22 = removedCopy;
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v25 = [NSString alloc];
    if (resultCopy)
    {
      summary = [resultCopy summary];
    }

    else
    {
      summary = @"N";
    }

    v27 = [v25 initWithFormat:@"{%@:_logPersistedSetLookupResultRemoved} %@ | no persistedEntryID to remove | %@ | removedSetLookupResult:%@", v22, @"AUTO-STAGER-SET-LOOKUP-RESULTS", messageCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v27 withResult:6110 withError:0];

    if (resultCopy)
    {
    }

    removedCopy = v22;
    v16 = v28;
  }
}

- (void)_logPersistedSetLookupResultsTableOfContents:(id)contents
{
  contentsCopy = contents;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (+[MADAutoAssetControlManager preferencePersistedTableLoggingEnabled])
  {
    v7 = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-SET-LOOKUP-RESULTS"];
    persistedSetLookupResults = [(MADAutoAssetStager *)self persistedSetLookupResults];
    v9 = [persistedSetLookupResults persistedEntryIDs:contentsCopy];

    if ([v9 count])
    {
      v10 = [v9 count];
      v11 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
      {
        *buf = 138544642;
        v28 = @"PERSISTED";
        v29 = 2114;
        v30 = @"AUTO-STAGER-SET-LOOKUP-RESULTS";
        v31 = 2114;
        v32 = @"ENTRY_LOAD";
        v33 = 2114;
        v34 = v7;
        v35 = 2114;
        v36 = @">----->";
        v37 = 2114;
        v38 = contentsCopy;
        _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} table-of-contents...", buf, 0x3Eu);
      }

      v25 = v7;

      if (v10 >= 1)
      {
        v12 = 0;
        v24 = v10;
        do
        {
          context = objc_autoreleasePoolPush();
          v13 = [v9 objectAtIndexedSubscript:v12];
          persistedSetLookupResults2 = [(MADAutoAssetStager *)self persistedSetLookupResults];
          v15 = [persistedSetLookupResults2 persistedEntry:v13 fromLocation:contentsCopy];

          if (v15)
          {
            persistedSetLookupResults3 = [(MADAutoAssetStager *)self persistedSetLookupResults];
            v17 = [persistedSetLookupResults3 decodeFromLocation:contentsCopy ofEntryName:v13 fromPersistedEntry:v15 decodingObjectForKey:@"setLookupResult" ofClass:objc_opt_class() allowingNilObject:0];

            if (v17)
            {
              summary = _MADLog(@"AutoStager");
              if (os_log_type_enabled(summary, OS_LOG_TYPE_DEFAULT))
              {
                newSummaryWithoutEntryID = [v17 newSummaryWithoutEntryID];
                *buf = 138544642;
                v28 = v25;
                v29 = 2114;
                v30 = @"E_LOD";
                v31 = 2048;
                v32 = (v12 + 1);
                v10 = v24;
                v33 = 2048;
                v34 = v24;
                v35 = 2114;
                v36 = v13;
                v37 = 2114;
                v38 = newSummaryWithoutEntryID;
                _os_log_impl(&dword_0, summary, OS_LOG_TYPE_DEFAULT, "\n#_%{public}@:%{public}@ (%ld of %ld) [%{public}@] | %{public}@", buf, 0x3Eu);
              }

              goto LABEL_13;
            }
          }

          else
          {
            v17 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v17, OS_LOG_TYPE_ERROR))
            {
              summary = [(MADAutoAssetStager *)self summary];
              *buf = 138544130;
              v28 = contentsCopy;
              v29 = 2114;
              v30 = @"AUTO-STAGER-SET-LOOKUP-RESULTS";
              v31 = 2114;
              v32 = summary;
              v33 = 2114;
              v34 = v13;
              _os_log_impl(&dword_0, v17, OS_LOG_TYPE_ERROR, "{%{public}@:_logPersistedSetLookupResultsTableOfContents} | (%{public}@) %{public}@ | unable to load entry:%{public}@", buf, 0x2Au);
LABEL_13:
            }
          }

          objc_autoreleasePoolPop(context);
          ++v12;
        }

        while (v10 != v12);
      }

      v20 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v20, OS_LOG_TYPE_DEFAULT))
      {
        v7 = v25;
        goto LABEL_21;
      }

      *buf = 138544642;
      v28 = @"PERSISTED";
      v29 = 2114;
      v30 = @"AUTO-STAGER-SET-LOOKUP-RESULTS";
      v31 = 2114;
      v32 = @"ENTRY_LOAD";
      v33 = 2114;
      v7 = v25;
      v34 = v25;
      v35 = 2114;
      v36 = @"<-----<";
      v37 = 2114;
      v38 = contentsCopy;
      v21 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} ...table-of-contents";
      v22 = v20;
      v23 = 62;
    }

    else
    {
      v20 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v20, OS_LOG_TYPE_DEFAULT))
      {
LABEL_21:

        goto LABEL_22;
      }

      *buf = 138545410;
      v28 = @"PERSISTED";
      v29 = 2114;
      v30 = @"AUTO-STAGER-SET-LOOKUP-RESULTS";
      v31 = 2114;
      v32 = @"ENTRY_LOAD";
      v33 = 2114;
      v34 = v7;
      v35 = 2114;
      v36 = @">----->";
      v37 = 2114;
      v38 = contentsCopy;
      v39 = 2114;
      v40 = @"empty table-of-contents";
      v41 = 2114;
      v42 = v7;
      v43 = 2114;
      v44 = @"<-----<";
      v21 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:%{public}@";
      v22 = v20;
      v23 = 92;
    }

    _os_log_impl(&dword_0, v22, OS_LOG_TYPE_DEFAULT, v21, buf, v23);
    goto LABEL_21;
  }

LABEL_22:
}

- (BOOL)_stagedAllDesiredForCurrentTarget
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v7 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
  v9 = [availableForStagingRequiredByTarget safeObjectForKey:v7 ofClass:objc_opt_class()];

  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
  v11 = [availableForStagingOptionalByTarget safeObjectForKey:v7 ofClass:objc_opt_class()];

  successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
  v13 = [successfullyStaged count];
  v14 = [v9 count];
  LOBYTE(v13) = v13 >= &v14[[v11 count]];

  return v13;
}

- (void)purgeAlreadyStagedNotApplicableForRequiredByTarget:(id)target andNotApplicableForOptionalByTarget:(id)byTarget
{
  v5 = [(MADAutoAssetStager *)self autoStagerFSM:target];
  extendedStateQueue = [v5 extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  [(MADAutoAssetStager *)self _removeAllStagedContent:@"purgeAlreadyStagedNotApplicableForRequiredByTarget"];
}

- (void)loadPersistedSetLookupResults
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedSetLookupResults = [(MADAutoAssetStager *)self persistedSetLookupResults];
  [persistedSetLookupResults loadPersistedState:@"loadPersistedSetLookupResults"];

  persistedSetLookupResults2 = [(MADAutoAssetStager *)self persistedSetLookupResults];
  v7 = [persistedSetLookupResults2 persistedEntryIDs:@"loadPersistedSetLookupResults"];

  if ([v7 count])
  {
    v38 = objc_alloc_init(NSMutableArray);
    v46 = 0u;
    v47 = 0u;
    v48 = 0u;
    v49 = 0u;
    v37 = v7;
    v8 = v7;
    obj = [v8 countByEnumeratingWithState:&v46 objects:v57 count:16];
    if (obj)
    {
      v9 = *v47;
      v39 = *v47;
      do
      {
        for (i = 0; i != obj; i = i + 1)
        {
          if (*v47 != v9)
          {
            objc_enumerationMutation(v8);
          }

          v11 = *(*(&v46 + 1) + 8 * i);
          v12 = objc_autoreleasePoolPush();
          persistedSetLookupResults3 = [(MADAutoAssetStager *)self persistedSetLookupResults];
          v14 = [persistedSetLookupResults3 persistedEntry:v11 fromLocation:@"loadPersistedSetLookupResults"];

          if (v14)
          {
            persistedSetLookupResults4 = [(MADAutoAssetStager *)self persistedSetLookupResults];
            v16 = [persistedSetLookupResults4 decodeFromLocation:@"loadPersistedSetLookupResults" ofEntryName:v11 fromPersistedEntry:v14 decodingObjectForKey:@"setLookupResult" ofClass:objc_opt_class() allowingNilObject:0];

            v17 = _MADLog(@"AutoStager");
            v18 = v17;
            if (v16)
            {
              if (os_log_type_enabled(v17, OS_LOG_TYPE_DEFAULT))
              {
                _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
                [v16 summary];
                v21 = v20 = v8;
                *buf = 138543874;
                v52 = _updateLatestSummary;
                v53 = 2114;
                v54 = v11;
                v55 = 2114;
                v56 = v21;
                _os_log_impl(&dword_0, v18, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {loadPersistedSetLookupResults} content on filesystem validated | entryID:%{public}@, adopted setLookupResult:%{public}@", buf, 0x20u);

                v8 = v20;
                v9 = v39;
              }

              [(MADAutoAssetStager *)self setLookupResultLoadedFromPersisted:v16 persistedEntryID:v11];
            }

            else
            {
              if (os_log_type_enabled(v17, OS_LOG_TYPE_ERROR))
              {
                _updateLatestSummary2 = [(MADAutoAssetStager *)self _updateLatestSummary];
                *buf = 138543618;
                v52 = _updateLatestSummary2;
                v53 = 2114;
                v54 = v11;
                _os_log_impl(&dword_0, v18, OS_LOG_TYPE_ERROR, "[%{public}@] {loadPersistedSetLookupResults} unable to load set-lookup-result | entryID:%{public}@", buf, 0x16u);

                v9 = v39;
              }

              [v38 addObject:v11];
            }
          }

          else
          {
            v16 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v16, OS_LOG_TYPE_ERROR))
            {
              _updateLatestSummary3 = [(MADAutoAssetStager *)self _updateLatestSummary];
              *buf = 138543618;
              v52 = _updateLatestSummary3;
              v53 = 2114;
              v54 = v11;
              _os_log_impl(&dword_0, v16, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {loadPersistedSetLookupResults} unable to retrieve set-lookup-result | entryID:%{public}@", buf, 0x16u);
            }
          }

          objc_autoreleasePoolPop(v12);
        }

        obj = [v8 countByEnumeratingWithState:&v46 objects:v57 count:16];
      }

      while (obj);
    }

    v44 = 0u;
    v45 = 0u;
    v42 = 0u;
    v43 = 0u;
    obja = v38;
    v24 = [obja countByEnumeratingWithState:&v42 objects:v50 count:16];
    if (v24)
    {
      v25 = v24;
      v26 = *v43;
      do
      {
        for (j = 0; j != v25; j = j + 1)
        {
          if (*v43 != v26)
          {
            objc_enumerationMutation(obja);
          }

          v28 = *(*(&v42 + 1) + 8 * j);
          v29 = objc_autoreleasePoolPush();
          persistedSetLookupResults5 = [(MADAutoAssetStager *)self persistedSetLookupResults];
          v31 = [persistedSetLookupResults5 persistedEntry:v28 fromLocation:@"loadPersistedSetLookupResults"];

          persistedSetLookupResults6 = [(MADAutoAssetStager *)self persistedSetLookupResults];
          v33 = [persistedSetLookupResults6 decodeFromLocation:@"loadPersistedSetLookupResults" ofEntryName:v28 fromPersistedEntry:v31 decodingObjectForKey:@"setLookupResult" ofClass:objc_opt_class() allowingNilObject:0];

          if (v33)
          {
            persistedSetLookupResults7 = [(MADAutoAssetStager *)self persistedSetLookupResults];
            [persistedSetLookupResults7 removePersistedEntry:v28 fromLocation:@"loadPersistedSetLookupResults"];

            [(MADAutoAssetStager *)self _logPersistedSetLookupResultRemoved:@"loadPersistedSetLookupResults" removedPersistedEntryID:v28 removedSetLookupResult:v33 message:@"dropped while loading persisted-state"];
          }

          objc_autoreleasePoolPop(v29);
        }

        v25 = [obja countByEnumeratingWithState:&v42 objects:v50 count:16];
      }

      while (v25);
    }

    v35 = obja;

    v7 = v37;
  }

  else
  {
    v35 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v35, OS_LOG_TYPE_DEFAULT))
    {
      _updateLatestSummary4 = [(MADAutoAssetStager *)self _updateLatestSummary];
      *buf = 138543362;
      v52 = _updateLatestSummary4;
      _os_log_impl(&dword_0, v35, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {loadPersistedSetLookupResults} no persisted set-lookup-results to be resumed", buf, 0xCu);
    }
  }

  [(MADAutoAssetStager *)self _logPersistedSetLookupResultsTableOfContents:@"loadPersistedSetLookupResults"];
}

- (void)targetLookupResultsLoadedFromPersisted:(id)persisted targetLookupResultsKey:(id)key persistedEntryID:(id)d withTargetOTASituation:(int64_t)situation
{
  persistedCopy = persisted;
  keyCopy = key;
  dCopy = d;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  cachingEnabled = [(MADAutoAssetStager *)self cachingEnabled];
  if (persistedCopy && keyCopy && cachingEnabled)
  {
    targetLookupResults = [(MADAutoAssetStager *)self targetLookupResults];
    [targetLookupResults setObject:persistedCopy forKey:keyCopy];
  }

  [(MADAutoAssetStager *)self _logPersistedTargetLookupResults:@"targetLookupResultsLoadedFromPersisted" operation:@"ENTRY_LOAD" forPersistedEntryID:dCopy withTargetLookupResults:persistedCopy withTargetOTASituation:situation message:@"target-lookup-results validated"];
}

- (void)setLookupResultLoadedFromPersisted:(id)persisted persistedEntryID:(id)d
{
  dCopy = d;
  persistedCopy = persisted;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  setLookupResults = [(MADAutoAssetStager *)self setLookupResults];
  assetType = [persistedCopy assetType];
  [setLookupResults setSafeObject:persistedCopy forKey:assetType];

  [(MADAutoAssetStager *)self _logPersistedSetLookupResult:@"setLookupResultLoadedFromPersisted" operation:@"ENTRY_LOAD" forPersistedEntryID:dCopy withSetLookupResult:persistedCopy message:@"set-lookup-result validated"];
}

- (id)targetLookupResultsKeyForTrainName:(id)name withRestoreVersion:(id)version
{
  versionCopy = version;
  nameCopy = name;
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  v9 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:nameCopy withRestoreVersion:versionCopy withTargetBuildVersion:assetTargetBuildVersion];

  return v9;
}

- (id)targetLookupResultsKeyForTrainName:(id)name withRestoreVersion:(id)version withTargetBuildVersion:(id)buildVersion
{
  nameCopy = name;
  versionCopy = version;
  buildVersionCopy = buildVersion;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13 = versionCopy;
  if (!versionCopy)
  {
    v13 = buildVersionCopy;
  }

  if (nameCopy)
  {
    v14 = nameCopy;
  }

  else
  {
    v14 = @"CURRENT-TRAIN";
  }

  v15 = versionCopy;
  v16 = nameCopy;
  v17 = [[NSString alloc] initWithFormat:@"%@+%@", v14, v13];

  return v17;
}

- (void)_logPersistedTargetLookupResults:(id)results operation:(id)operation forPersistedEntryID:(id)d withTargetLookupResults:(id)lookupResults withTargetOTASituation:(int64_t)situation message:(id)message
{
  resultsCopy = results;
  operationCopy = operation;
  dCopy = d;
  lookupResultsCopy = lookupResults;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (dCopy)
  {
    autoStagerFSM2 = [MADAutoAssetPersisted persistedOperationSymbol:operationCopy];
    v22 = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-TARGET-LOOKUP-RESULTS"];
    v23 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v23, OS_LOG_TYPE_DEFAULT))
    {
      v30 = resultsCopy;
      newSummaryWithoutEntryID = [lookupResultsCopy newSummaryWithoutEntryID];
      v25 = [MANAutoAssetControlStagerInformation previousOTASituationName:situation];
      *buf = 138546690;
      v32 = @"PERSISTED";
      v33 = 2114;
      v34 = @"AUTO-STAGER-TARGET-LOOKUP-RESULTS";
      v35 = 2114;
      v36 = operationCopy;
      v37 = 2114;
      v38 = v22;
      v39 = 2114;
      v40 = @">----->";
      v41 = 2114;
      v42 = v30;
      v43 = 2114;
      v44 = messageCopy;
      v45 = 2114;
      v46 = v22;
      v47 = 2114;
      v48 = autoStagerFSM2;
      v49 = 2114;
      v50 = dCopy;
      v51 = 2114;
      v52 = newSummaryWithoutEntryID;
      v53 = 2114;
      v54 = v25;
      v55 = 2114;
      v56 = v22;
      v57 = 2114;
      v58 = @"<-----<";
      _os_log_impl(&dword_0, v23, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | %{public}@ situation:%{public}@\n#_%{public}@:%{public}@", buf, 0x8Eu);

      resultsCopy = v30;
    }
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v27 = [NSString alloc];
    summary = [lookupResultsCopy summary];
    v29 = [v27 initWithFormat:@"{%@:_logPersistedTargetLookupResults} %@:%@ | no persistedEntryID | %@ | targetLookupResults:%@", resultsCopy, @"AUTO-STAGER-TARGET-LOOKUP-RESULTS", operationCopy, messageCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v29 withResult:6110 withError:0];
  }
}

- (void)_logPersistedActiveTargetLookupResults:(id)results
{
  resultsCopy = results;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
    assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    v9 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

    persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
    v11 = [persistedAvailableForStagingByTarget persistedEntry:v9 fromLocation:resultsCopy];

    if (v11)
    {
      persistedAvailableForStagingByTarget2 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
      v13 = [persistedAvailableForStagingByTarget2 decodeFromLocation:resultsCopy ofEntryName:v9 fromPersistedEntry:v11 decodingObjectForKey:@"AvailableForStagingByTarget" ofClass:objc_opt_class() allowingNilObject:0];

      if (v13)
      {
        v14 = [NSString alloc];
        newSummaryWithoutEntryID = [v13 newSummaryWithoutEntryID];
        v16 = [v14 initWithFormat:@"final available-for-staging | targetLookupResultsKey:%@ | availableForStaging:%@", v9, newSummaryWithoutEntryID];
        [(MADAutoAssetStager *)self _logPersistedAvailableForStagingByTarget:resultsCopy operation:@"ENTRY_MODIFY" forPersistedEntryID:v9 withAvailableForStaging:v13 message:v16];
      }
    }

    else
    {
      v13 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v13, OS_LOG_TYPE_ERROR))
      {
        summary = [(MADAutoAssetStager *)self summary];
        *buf = 138543874;
        v19 = summary;
        v20 = 2114;
        v21 = resultsCopy;
        v22 = 2114;
        v23 = v9;
        _os_log_impl(&dword_0, v13, OS_LOG_TYPE_ERROR, "%{public}@\n{%{public}@} unable to load persisted available-for-staging file | targetLookupResultsKey:%{public}@", buf, 0x20u);
      }
    }
  }
}

- (void)_logPersistedTargetLookupResultsRemoved:(id)removed removedPersistedEntryID:(id)d removedTargetLookupResults:(id)results message:(id)message
{
  removedCopy = removed;
  dCopy = d;
  resultsCopy = results;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v16 = [MADAutoAssetPersisted persistedOperationSymbol:@"ENTRY_REMOVE"];
  v17 = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-TARGET-LOOKUP-RESULTS"];
  if (dCopy)
  {
    v18 = _MADLog(@"AutoStager");
    v19 = os_log_type_enabled(v18, OS_LOG_TYPE_DEFAULT);
    if (resultsCopy)
    {
      if (v19)
      {
        v20 = removedCopy;
        newSummaryWithoutEntryID = [resultsCopy newSummaryWithoutEntryID];
        *buf = 138546434;
        v30 = @"PERSISTED";
        v31 = 2114;
        v32 = @"AUTO-STAGER-TARGET-LOOKUP-RESULTS";
        v33 = 2114;
        v34 = @"ENTRY_REMOVE";
        v35 = 2114;
        v36 = v17;
        v37 = 2114;
        v38 = @">----->";
        v39 = 2114;
        v40 = v20;
        v41 = 2114;
        v42 = messageCopy;
        v43 = 2114;
        v44 = v17;
        v45 = 2114;
        v46 = v16;
        v47 = 2114;
        v48 = dCopy;
        v49 = 2114;
        v50 = newSummaryWithoutEntryID;
        v51 = 2114;
        v52 = v17;
        v53 = 2114;
        v54 = @"<-----<";
        _os_log_impl(&dword_0, v18, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | %{public}@\n#_%{public}@:%{public}@", buf, 0x84u);

        removedCopy = v20;
      }
    }

    else if (v19)
    {
      *buf = 138546178;
      v30 = @"PERSISTED";
      v31 = 2114;
      v32 = @"AUTO-STAGER-TARGET-LOOKUP-RESULTS";
      v33 = 2114;
      v34 = @"ENTRY_REMOVE";
      v35 = 2114;
      v36 = v17;
      v37 = 2114;
      v38 = @">----->";
      v39 = 2114;
      v40 = removedCopy;
      v41 = 2114;
      v42 = messageCopy;
      v43 = 2114;
      v44 = v17;
      v45 = 2114;
      v46 = v16;
      v47 = 2114;
      v48 = dCopy;
      v49 = 2114;
      v50 = v17;
      v51 = 2114;
      v52 = @"<-----<";
      _os_log_impl(&dword_0, v18, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@]\n#_%{public}@:%{public}@", buf, 0x7Au);
    }
  }

  else
  {
    v28 = v16;
    v22 = removedCopy;
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v25 = [NSString alloc];
    if (resultsCopy)
    {
      summary = [resultsCopy summary];
    }

    else
    {
      summary = @"N";
    }

    v27 = [v25 initWithFormat:@"{%@:_logPersistedTargetLookupResultsRemoved} %@ | no persistedEntryID to remove | %@ | removedTargetLookupResults:%@", v22, @"AUTO-STAGER-TARGET-LOOKUP-RESULTS", messageCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v27 withResult:6110 withError:0];

    if (resultsCopy)
    {
    }

    removedCopy = v22;
    v16 = v28;
  }
}

- (void)_logPersistedTargetLookupResultsTableOfContents:(id)contents
{
  contentsCopy = contents;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (+[MADAutoAssetControlManager preferencePersistedTableLoggingEnabled])
  {
    v7 = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-TARGET-LOOKUP-RESULTS"];
    persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
    v9 = [persistedTargetLookupResults persistedEntryIDs:contentsCopy];

    if ([v9 count])
    {
      v10 = [v9 count];
      v11 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
      {
        *buf = 138544642;
        v32 = @"PERSISTED";
        v33 = 2114;
        v34 = @"AUTO-STAGER-TARGET-LOOKUP-RESULTS";
        v35 = 2114;
        v36 = @"ENTRY_LOAD";
        v37 = 2114;
        v38 = v7;
        v39 = 2114;
        v40 = @">----->";
        v41 = 2114;
        v42 = contentsCopy;
        _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} table-of-contents...", buf, 0x3Eu);
      }

      v29 = v7;

      if (v10 >= 1)
      {
        v12 = 0;
        v27 = v10;
        selfCopy = self;
        do
        {
          v13 = objc_autoreleasePoolPush();
          v14 = [v9 objectAtIndexedSubscript:v12];
          persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
          v16 = [persistedTargetLookupResults2 persistedEntry:v14 fromLocation:contentsCopy];

          if (v16)
          {
            v30 = v13;
            persistedTargetLookupResults3 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
            v18 = [persistedTargetLookupResults3 decodeFromLocation:contentsCopy ofEntryName:v14 fromPersistedEntry:v16 decodingObjectForKey:@"targetLookupResults" ofClass:objc_opt_class() allowingNilObject:0];

            v19 = +[MANAutoAssetControlStagerInformation previousOTASituationName:](MANAutoAssetControlStagerInformation, "previousOTASituationName:", [v16 ullForKey:@"targetLookupResultsOTASituation"]);
            if (v18)
            {
              v20 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v20, OS_LOG_TYPE_DEFAULT))
              {
                newSummaryWithoutEntryID = [v18 newSummaryWithoutEntryID];
                *buf = 138544898;
                v32 = v29;
                v33 = 2114;
                v34 = @"E_LOD";
                v35 = 2048;
                v36 = (v12 + 1);
                v10 = v27;
                v37 = 2048;
                v38 = v27;
                v39 = 2114;
                v40 = v14;
                v41 = 2114;
                v42 = v19;
                v43 = 2114;
                v44 = newSummaryWithoutEntryID;
                _os_log_impl(&dword_0, v20, OS_LOG_TYPE_DEFAULT, "\n#_%{public}@:%{public}@ (%ld of %ld) [%{public}@] | situation:%{public}@ | %{public}@", buf, 0x48u);

                self = selfCopy;
              }
            }

            v13 = v30;
          }

          else
          {
            v18 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v18, OS_LOG_TYPE_ERROR))
            {
              summary = [(MADAutoAssetStager *)self summary];
              *buf = 138544130;
              v32 = contentsCopy;
              v33 = 2114;
              v34 = @"AUTO-STAGER-TARGET-LOOKUP-RESULTS";
              v35 = 2114;
              v36 = summary;
              v37 = 2114;
              v38 = v14;
              _os_log_impl(&dword_0, v18, OS_LOG_TYPE_ERROR, "{%{public}@:_logPersistedSetLookupResultsTableOfContents} | (%{public}@) %{public}@ | unable to load entry:%{public}@", buf, 0x2Au);
            }
          }

          objc_autoreleasePoolPop(v13);
          ++v12;
        }

        while (v10 != v12);
      }

      v23 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v23, OS_LOG_TYPE_DEFAULT))
      {
        v7 = v29;
        goto LABEL_22;
      }

      *buf = 138544642;
      v32 = @"PERSISTED";
      v33 = 2114;
      v34 = @"AUTO-STAGER-TARGET-LOOKUP-RESULTS";
      v35 = 2114;
      v36 = @"ENTRY_LOAD";
      v37 = 2114;
      v7 = v29;
      v38 = v29;
      v39 = 2114;
      v40 = @"<-----<";
      v41 = 2114;
      v42 = contentsCopy;
      v24 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} ...table-of-contents";
      v25 = v23;
      v26 = 62;
    }

    else
    {
      v23 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v23, OS_LOG_TYPE_DEFAULT))
      {
LABEL_22:

        goto LABEL_23;
      }

      *buf = 138545410;
      v32 = @"PERSISTED";
      v33 = 2114;
      v34 = @"AUTO-STAGER-TARGET-LOOKUP-RESULTS";
      v35 = 2114;
      v36 = @"ENTRY_LOAD";
      v37 = 2114;
      v38 = v7;
      v39 = 2114;
      v40 = @">----->";
      v41 = 2114;
      v42 = contentsCopy;
      v43 = 2114;
      v44 = @"empty table-of-contents";
      v45 = 2114;
      v46 = v7;
      v47 = 2114;
      v48 = @"<-----<";
      v24 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:%{public}@";
      v25 = v23;
      v26 = 92;
    }

    _os_log_impl(&dword_0, v25, OS_LOG_TYPE_DEFAULT, v24, buf, v26);
    goto LABEL_22;
  }

LABEL_23:
}

- (void)availableForStagingLoadedFromPersisted:(id)persisted persistedEntryID:(id)d
{
  dCopy = d;
  persistedCopy = persisted;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  targetTrainName = [persistedCopy targetTrainName];
  targetRestoreVersion = [persistedCopy targetRestoreVersion];
  targetBuild = [persistedCopy targetBuild];
  v19 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:targetTrainName withRestoreVersion:targetRestoreVersion withTargetBuildVersion:targetBuild];

  v13 = [(MADAutoAssetStager *)self _targetNameAvailableForStaging:persistedCopy];
  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
  descriptorsRequiredForStaging = [persistedCopy descriptorsRequiredForStaging];
  [availableForStagingRequiredByTarget setSafeObject:descriptorsRequiredForStaging forKey:v19];

  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
  descriptorsOptionalForStaging = [persistedCopy descriptorsOptionalForStaging];
  [availableForStagingOptionalByTarget setSafeObject:descriptorsOptionalForStaging forKey:v19];

  v18 = [[NSString alloc] initWithFormat:@"[%@] available-for-staging validated", v13];
  [(MADAutoAssetStager *)self _logPersistedAvailableForStagingByTarget:@"availableForStagingLoadedFromPersisted" operation:@"ENTRY_LOAD" forPersistedEntryID:dCopy withAvailableForStaging:persistedCopy message:v18];
}

- (void)_logPersistedAvailableForStagingByTarget:(id)target operation:(id)operation forPersistedEntryID:(id)d withAvailableForStaging:(id)staging message:(id)message
{
  targetCopy = target;
  operationCopy = operation;
  dCopy = d;
  stagingCopy = staging;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v19 = [(MADAutoAssetStager *)self _targetNameAvailableForStaging:stagingCopy];
  if (dCopy)
  {
    autoStagerFSM2 = [MADAutoAssetPersisted persistedOperationSymbol:operationCopy];
    diag = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-TARGET-AVAILABLE"];
    messageCopy = [[NSString alloc] initWithFormat:@"[%@] %@", v19, messageCopy];

    v23 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v23, OS_LOG_TYPE_DEFAULT))
    {
      newSummaryWithoutEntryID = [stagingCopy newSummaryWithoutEntryID];
      *buf = 138546434;
      v28 = @"PERSISTED";
      v29 = 2114;
      v30 = @"AUTO-STAGER-TARGET-AVAILABLE";
      v31 = 2114;
      v32 = operationCopy;
      v33 = 2114;
      v34 = diag;
      v35 = 2114;
      v36 = @">----->";
      v37 = 2114;
      v38 = targetCopy;
      v39 = 2114;
      v40 = messageCopy;
      v41 = 2114;
      v42 = diag;
      v43 = 2114;
      v44 = autoStagerFSM2;
      v45 = 2114;
      v46 = dCopy;
      v47 = 2114;
      v48 = newSummaryWithoutEntryID;
      v49 = 2114;
      v50 = diag;
      v51 = 2114;
      v52 = @"<-----<";
      _os_log_impl(&dword_0, v23, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | %{public}@\n#_%{public}@:%{public}@", buf, 0x84u);
    }
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v25 = [NSString alloc];
    messageCopy = [stagingCopy newSummaryWithoutEntryID];
    v26 = [v25 initWithFormat:@"[%@] {%@:_logPersistedAvailableForStagingByTarget} %@:%@ | no persistedEntryID | %@ | availableForStaging:%@", v19, targetCopy, @"AUTO-STAGER-TARGET-AVAILABLE", operationCopy, messageCopy, messageCopy];

    [diag trackAnomaly:@"AUTO-STAGER" forReason:v26 withResult:6110 withError:0];
  }
}

- (void)_logPersistedAvailableForStagingByTargetRemoved:(id)removed removedPersistedEntryID:(id)d removedAvailableForStaging:(id)staging message:(id)message
{
  removedCopy = removed;
  dCopy = d;
  stagingCopy = staging;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v15 = [MADAutoAssetPersisted persistedOperationSymbol:@"ENTRY_REMOVE"];
  v16 = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-TARGET-AVAILABLE"];
  v17 = [(MADAutoAssetStager *)self _targetNameAvailableForStaging:stagingCopy];
  if (dCopy)
  {
    messageCopy = [[NSString alloc] initWithFormat:@"[%@] %@", v17, messageCopy];
    v19 = _MADLog(@"AutoStager");
    v20 = os_log_type_enabled(v19, OS_LOG_TYPE_DEFAULT);
    v21 = messageCopy;
    if (stagingCopy)
    {
      if (v20)
      {
        newSummaryWithoutEntryID = [stagingCopy newSummaryWithoutEntryID];
        *buf = 138546434;
        v33 = @"PERSISTED";
        v34 = 2114;
        v35 = @"AUTO-STAGER-TARGET-AVAILABLE";
        v36 = 2114;
        v37 = @"ENTRY_REMOVE";
        v38 = 2114;
        v39 = v16;
        v40 = 2114;
        v41 = @">----->";
        v42 = 2114;
        v43 = removedCopy;
        v44 = 2114;
        v45 = messageCopy;
        v46 = 2114;
        v47 = v16;
        v48 = 2114;
        v49 = v15;
        v50 = 2114;
        v51 = dCopy;
        v52 = 2114;
        v53 = newSummaryWithoutEntryID;
        v54 = 2114;
        v55 = v16;
        v56 = 2114;
        v57 = @"<-----<";
        _os_log_impl(&dword_0, v19, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | %{public}@\n#_%{public}@:%{public}@", buf, 0x84u);
      }
    }

    else if (v20)
    {
      *buf = 138546178;
      v33 = @"PERSISTED";
      v34 = 2114;
      v35 = @"AUTO-STAGER-TARGET-AVAILABLE";
      v36 = 2114;
      v37 = @"ENTRY_REMOVE";
      v38 = 2114;
      v39 = v16;
      v40 = 2114;
      v41 = @">----->";
      v42 = 2114;
      v43 = removedCopy;
      v44 = 2114;
      v45 = messageCopy;
      v46 = 2114;
      v47 = v16;
      v48 = 2114;
      v49 = v15;
      v50 = 2114;
      v51 = dCopy;
      v52 = 2114;
      v53 = v16;
      v54 = 2114;
      v55 = @"<-----<";
      _os_log_impl(&dword_0, v19, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@]\n#_%{public}@:%{public}@", buf, 0x7Au);
    }

    v28 = removedCopy;
  }

  else
  {
    v23 = messageCopy;
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v26 = [NSString alloc];
    if (stagingCopy)
    {
      summary = [stagingCopy summary];
    }

    else
    {
      summary = @"N";
    }

    v30 = messageCopy;
    v28 = removedCopy;
    v29 = [v26 initWithFormat:@"[%@] {%@:_logPersistedAvailableForStagingByTargetRemoved} %@ | no persistedEntryID to remove | %@ | removedAvailableForStaging:%@", v17, removedCopy, @"AUTO-STAGER-TARGET-AVAILABLE", v30, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v29 withResult:6110 withError:0];

    if (stagingCopy)
    {
    }

    v21 = v23;
    dCopy = 0;
  }
}

- (void)_logPersistedAvailableForStagingByTargetTableOfContents:(id)contents
{
  contentsCopy = contents;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (+[MADAutoAssetControlManager preferencePersistedTableLoggingEnabled])
  {
    v7 = [MADAutoAssetPersisted persistedComponentSymbol:@"AUTO-STAGER-TARGET-AVAILABLE"];
    persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
    v9 = [persistedAvailableForStagingByTarget persistedEntryIDs:contentsCopy];

    if ([v9 count])
    {
      v10 = [v9 count];
      v11 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v11, OS_LOG_TYPE_DEFAULT))
      {
        *buf = 138544642;
        v34 = @"PERSISTED";
        v35 = 2114;
        v36 = @"AUTO-STAGER-TARGET-AVAILABLE";
        v37 = 2114;
        v38 = @"ENTRY_LOAD";
        v39 = 2114;
        v40 = v7;
        v41 = 2114;
        v42 = @">----->";
        v43 = 2114;
        v44 = contentsCopy;
        _os_log_impl(&dword_0, v11, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} table-of-contents...", buf, 0x3Eu);
      }

      v29 = v7;

      if (v10 >= 1)
      {
        v12 = 0;
        v31 = contentsCopy;
        v32 = v9;
        selfCopy = self;
        do
        {
          v13 = objc_autoreleasePoolPush();
          v14 = [v9 objectAtIndexedSubscript:v12];
          persistedAvailableForStagingByTarget2 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
          v16 = [persistedAvailableForStagingByTarget2 persistedEntry:v14 fromLocation:contentsCopy];

          if (v16)
          {
            persistedAvailableForStagingByTarget3 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
            v18 = [persistedAvailableForStagingByTarget3 decodeFromLocation:contentsCopy ofEntryName:v14 fromPersistedEntry:v16 decodingObjectForKey:@"AvailableForStagingByTarget" ofClass:objc_opt_class() allowingNilObject:0];

            if (v18)
            {
              v19 = [NSString alloc];
              v20 = [(MADAutoAssetStager *)self _targetNameAvailableForStaging:v18];
              newSummaryWithoutEntryID = [v18 newSummaryWithoutEntryID];
              v22 = [v19 initWithFormat:@"[%@] %@", v20, newSummaryWithoutEntryID];

              v23 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v23, OS_LOG_TYPE_DEFAULT))
              {
                *buf = 138544642;
                v34 = v29;
                v35 = 2114;
                v36 = @"E_LOD";
                v37 = 2048;
                v38 = (v12 + 1);
                v39 = 2048;
                v40 = v10;
                v41 = 2114;
                v42 = v14;
                v43 = 2114;
                v44 = v22;
                _os_log_impl(&dword_0, v23, OS_LOG_TYPE_DEFAULT, "\n#_%{public}@:%{public}@ (%ld of %ld) [%{public}@] | %{public}@", buf, 0x3Eu);
              }

              contentsCopy = v31;
              v9 = v32;
              self = selfCopy;
            }
          }

          else
          {
            v18 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v18, OS_LOG_TYPE_ERROR))
            {
              summary = [(MADAutoAssetStager *)self summary];
              *buf = 138544130;
              v34 = contentsCopy;
              v35 = 2114;
              v36 = @"AUTO-STAGER-TARGET-AVAILABLE";
              v37 = 2114;
              v38 = summary;
              v39 = 2114;
              v40 = v14;
              _os_log_impl(&dword_0, v18, OS_LOG_TYPE_ERROR, "{%{public}@:_logPersistedSetLookupResultsTableOfContents} | (%{public}@) %{public}@ | unable to load entry:%{public}@", buf, 0x2Au);
            }
          }

          objc_autoreleasePoolPop(v13);
          ++v12;
        }

        while (v10 != v12);
      }

      v25 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v25, OS_LOG_TYPE_DEFAULT))
      {
        v7 = v29;
        goto LABEL_21;
      }

      *buf = 138544642;
      v34 = @"PERSISTED";
      v35 = 2114;
      v36 = @"AUTO-STAGER-TARGET-AVAILABLE";
      v37 = 2114;
      v38 = @"ENTRY_LOAD";
      v39 = 2114;
      v7 = v29;
      v40 = v29;
      v41 = 2114;
      v42 = @"<-----<";
      v43 = 2114;
      v44 = contentsCopy;
      v26 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} ...table-of-contents";
      v27 = v25;
      v28 = 62;
    }

    else
    {
      v25 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v25, OS_LOG_TYPE_DEFAULT))
      {
LABEL_21:

        goto LABEL_22;
      }

      *buf = 138545410;
      v34 = @"PERSISTED";
      v35 = 2114;
      v36 = @"AUTO-STAGER-TARGET-AVAILABLE";
      v37 = 2114;
      v38 = @"ENTRY_LOAD";
      v39 = 2114;
      v40 = v7;
      v41 = 2114;
      v42 = @">----->";
      v43 = 2114;
      v44 = contentsCopy;
      v45 = 2114;
      v46 = @"empty table-of-contents";
      v47 = 2114;
      v48 = v7;
      v49 = 2114;
      v50 = @"<-----<";
      v26 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:%{public}@";
      v27 = v25;
      v28 = 92;
    }

    _os_log_impl(&dword_0, v27, OS_LOG_TYPE_DEFAULT, v26, buf, v28);
    goto LABEL_21;
  }

LABEL_22:
}

- (id)getTargetLookupResultsForKey:(id)key
{
  keyCopy = key;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (keyCopy)
  {
    targetLookupResults = [(MADAutoAssetStager *)self targetLookupResults];
    v8 = [targetLookupResults objectForKey:keyCopy];

    if (v8)
    {
      v9 = v8;
      goto LABEL_58;
    }

    v10 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v10, OS_LOG_TYPE_DEFAULT))
    {
      _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
      cachingEnabled = [(MADAutoAssetStager *)self cachingEnabled];
      v13 = @"N";
      *buf = 138543874;
      v78 = _updateLatestSummary;
      if (cachingEnabled)
      {
        v13 = @"Y";
      }

      v79 = 2114;
      v80 = keyCopy;
      v81 = 2112;
      v82 = v13;
      _os_log_impl(&dword_0, v10, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {getTargetLookupResultsForKey} cache miss | lookupResultsKey:%{public}@ cachingEnabled:%@", buf, 0x20u);
    }
  }

  [(MADAutoAssetStager *)self loadPersistedTargetLookupResults:@"getTargetLookupResultsForKey"];
  persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
  v15 = [persistedTargetLookupResults persistedEntryIDs:@"getTargetLookupResultsForKey"];

  if ([v15 count])
  {
    v63 = objc_alloc_init(NSMutableArray);
    v72 = 0u;
    v73 = 0u;
    v74 = 0u;
    v75 = 0u;
    v57 = v15;
    obj = v15;
    v59 = keyCopy;
    v66 = [obj countByEnumeratingWithState:&v72 objects:v85 count:16];
    if (!v66)
    {
      v58 = 0;
      goto LABEL_49;
    }

    v58 = 0;
    v65 = *v73;
    while (1)
    {
      v16 = 0;
      do
      {
        if (*v73 != v65)
        {
          objc_enumerationMutation(obj);
        }

        v17 = *(*(&v72 + 1) + 8 * v16);
        v18 = objc_autoreleasePoolPush();
        persistedTargetLookupResults2 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
        v20 = [persistedTargetLookupResults2 persistedEntry:v17 fromLocation:@"getTargetLookupResultsForKey"];

        if (v20)
        {
          persistedTargetLookupResults3 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
          v22 = [persistedTargetLookupResults3 decodeFromLocation:@"getTargetLookupResultsForKey" ofEntryName:v17 fromPersistedEntry:v20 decodingObjectForKey:@"targetLookupResults" ofClass:objc_opt_class() allowingNilObject:0];

          v23 = [v20 dateForKey:@"targetLookupResultsByGroupDate"];
          _updateLatestSummary5 = v23;
          if (v22)
          {
            if (v23)
            {
              [(__CFString *)v23 timeIntervalSinceNow];
              if (v25 <= 604800.0)
              {
                v61 = v18;
                v60 = [v20 ullForKey:@"targetLookupResultsOTASituation"];
                v62 = [MANAutoAssetControlStagerInformation previousOTASituationName:?];
                v31 = _MADLog(@"AutoStager");
                if (os_log_type_enabled(v31, OS_LOG_TYPE_DEFAULT))
                {
                  _updateLatestSummary2 = [(MADAutoAssetStager *)self _updateLatestSummary];
                  summary = [v22 summary];
                  *buf = 138544130;
                  v78 = _updateLatestSummary2;
                  v79 = 2114;
                  v80 = v17;
                  v81 = 2114;
                  v82 = v62;
                  v83 = 2114;
                  v84 = summary;
                  _os_log_impl(&dword_0, v31, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {getTargetLookupResultsForKey} content on filesystem validated (adopted) | entryID:%{public}@ | targetOTASituation:%{public}@ | targetLookupResults:%{public}@", buf, 0x2Au);
                }

                targetTrainName = [v22 targetTrainName];
                targetRestoreVersion = [v22 targetRestoreVersion];
                targetBuild = [v22 targetBuild];
                v37 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:targetTrainName withRestoreVersion:targetRestoreVersion withTargetBuildVersion:targetBuild];

                if (v59)
                {
                  v18 = v61;
                  if ([SUCore stringIsEqual:v59 to:v37])
                  {
                    if (v58)
                    {
                      v38 = _MADLog(@"AutoStager");
                      if (os_log_type_enabled(v38, OS_LOG_TYPE_ERROR))
                      {
                        _updateLatestSummary3 = [(MADAutoAssetStager *)self _updateLatestSummary];
                        *buf = 138543618;
                        v78 = _updateLatestSummary3;
                        v79 = 2114;
                        v80 = v37;
                        _os_log_impl(&dword_0, v38, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {getTargetLookupResultsForKey} multiple entries | lookupResultsKey:%{public}@", buf, 0x16u);
                      }
                    }

                    v40 = v22;

                    v58 = v40;
                    goto LABEL_41;
                  }
                }

                else
                {
LABEL_41:
                  v18 = v61;
                }

                [(MADAutoAssetStager *)self targetLookupResultsLoadedFromPersisted:v22 targetLookupResultsKey:v37 persistedEntryID:v17 withTargetOTASituation:v60];

                goto LABEL_29;
              }

              v26 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v26, OS_LOG_TYPE_DEFAULT))
              {
                _updateLatestSummary4 = [(MADAutoAssetStager *)self _updateLatestSummary];
                *buf = 138543618;
                v78 = _updateLatestSummary4;
                v79 = 2114;
                v80 = _updateLatestSummary5;
                v28 = v26;
                v29 = OS_LOG_TYPE_DEFAULT;
                v30 = "[%{public}@] {getTargetLookupResultsForKey} entry too old | dateOfEntry:%{public}@";
                goto LABEL_27;
              }

LABEL_28:

              [v63 addObject:v17];
              goto LABEL_29;
            }

            v26 = _MADLog(@"AutoStager");
            if (!os_log_type_enabled(v26, OS_LOG_TYPE_ERROR))
            {
              goto LABEL_28;
            }

            _updateLatestSummary4 = [(MADAutoAssetStager *)self _updateLatestSummary];
            *buf = 138543618;
            v78 = _updateLatestSummary4;
            v79 = 2114;
            v80 = @"N";
            v28 = v26;
            v29 = OS_LOG_TYPE_ERROR;
            v30 = "[%{public}@] {getTargetLookupResultsForKey} unable to determine recency | dateOfEntry:%{public}@";
          }

          else
          {
            v26 = _MADLog(@"AutoStager");
            if (!os_log_type_enabled(v26, OS_LOG_TYPE_ERROR))
            {
              goto LABEL_28;
            }

            _updateLatestSummary4 = [(MADAutoAssetStager *)self _updateLatestSummary];
            *buf = 138543618;
            v78 = _updateLatestSummary4;
            v79 = 2114;
            v80 = v17;
            v28 = v26;
            v29 = OS_LOG_TYPE_ERROR;
            v30 = "[%{public}@] {getTargetLookupResultsForKey} unable to load set-lookup-result | entryID:%{public}@";
          }

LABEL_27:
          _os_log_impl(&dword_0, v28, v29, v30, buf, 0x16u);

          goto LABEL_28;
        }

        v22 = _MADLog(@"AutoStager");
        if (!os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
        {
          goto LABEL_30;
        }

        _updateLatestSummary5 = [(MADAutoAssetStager *)self _updateLatestSummary];
        *buf = 138543618;
        v78 = _updateLatestSummary5;
        v79 = 2114;
        v80 = v17;
        _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {getTargetLookupResultsForKey} unable to retrieve set-lookup-result | entryID:%{public}@", buf, 0x16u);
LABEL_29:

LABEL_30:
        objc_autoreleasePoolPop(v18);
        v16 = v16 + 1;
      }

      while (v66 != v16);
      v41 = [obj countByEnumeratingWithState:&v72 objects:v85 count:16];
      v66 = v41;
      if (!v41)
      {
LABEL_49:

        v70 = 0u;
        v71 = 0u;
        v68 = 0u;
        v69 = 0u;
        v42 = v63;
        v45 = [v42 countByEnumeratingWithState:&v68 objects:v76 count:16];
        if (v45)
        {
          v46 = v45;
          v47 = *v69;
          v67 = v42;
          do
          {
            for (i = 0; i != v46; i = i + 1)
            {
              if (*v69 != v47)
              {
                objc_enumerationMutation(v67);
              }

              v49 = *(*(&v68 + 1) + 8 * i);
              v50 = objc_autoreleasePoolPush();
              persistedTargetLookupResults4 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
              v52 = [persistedTargetLookupResults4 persistedEntry:v49 fromLocation:@"loadPersistedSetLookupResults"];

              persistedTargetLookupResults5 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
              v54 = [persistedTargetLookupResults5 decodeFromLocation:@"getTargetLookupResultsForKey" ofEntryName:v49 fromPersistedEntry:v52 decodingObjectForKey:@"targetLookupResults" ofClass:objc_opt_class() allowingNilObject:0];

              persistedTargetLookupResults6 = [(MADAutoAssetStager *)self persistedTargetLookupResults];
              [persistedTargetLookupResults6 removePersistedEntry:v49 fromLocation:@"getTargetLookupResultsForKey"];

              [(MADAutoAssetStager *)self _logPersistedTargetLookupResultsRemoved:@"getTargetLookupResultsForKey" removedPersistedEntryID:v49 removedTargetLookupResults:v54 message:@"dropped while loading persisted-state"];
              objc_autoreleasePoolPop(v50);
            }

            v42 = v67;
            v46 = [v67 countByEnumeratingWithState:&v68 objects:v76 count:16];
          }

          while (v46);
        }

        v44 = v58;
        keyCopy = v59;
        v15 = v57;
        goto LABEL_57;
      }
    }
  }

  v42 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v42, OS_LOG_TYPE_DEFAULT))
  {
    _updateLatestSummary6 = [(MADAutoAssetStager *)self _updateLatestSummary];
    *buf = 138543362;
    v78 = _updateLatestSummary6;
    _os_log_impl(&dword_0, v42, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {getTargetLookupResultsForKey} no persisted set-lookup-results to be resumed", buf, 0xCu);
  }

  v44 = 0;
LABEL_57:

  [(MADAutoAssetStager *)self _logPersistedSetLookupResultsTableOfContents:@"getTargetLookupResultsForKey"];
  v9 = v44;

LABEL_58:

  return v9;
}

- (void)loadPersistedTargetLookupResults:(id)results
{
  resultsCopy = results;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (![(MADAutoAssetStager *)self loadedPersistedTargetLookupResults])
  {
    persistedTargetLookupResults = [(MADAutoAssetStager *)self persistedTargetLookupResults];
    [persistedTargetLookupResults loadPersistedState:resultsCopy];

    [(MADAutoAssetStager *)self setLoadedPersistedTargetLookupResults:1];
    [(MADAutoAssetStager *)self _limitCachePersistResultByGroupToCount:2 fromLocation:resultsCopy];
  }
}

- (void)loadPersistedAvailableForStagingByTarget
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedAvailableForStagingByTarget = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
  [persistedAvailableForStagingByTarget loadPersistedState:@"loadPersistedAvailableForStagingByTarget"];

  persistedAvailableForStagingByTarget2 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
  v7 = [persistedAvailableForStagingByTarget2 persistedEntryIDs:@"loadPersistedAvailableForStagingByTarget"];

  if ([v7 count])
  {
    v39 = objc_alloc_init(NSMutableArray);
    v40 = [[NSMutableString alloc] initWithString:&stru_4BD3F0];
    v48 = 0u;
    v49 = 0u;
    v50 = 0u;
    v51 = 0u;
    v38 = v7;
    obj = v7;
    v8 = [obj countByEnumeratingWithState:&v48 objects:v57 count:16];
    if (v8)
    {
      v9 = v8;
      v10 = *v49;
      do
      {
        for (i = 0; i != v9; i = i + 1)
        {
          if (*v49 != v10)
          {
            objc_enumerationMutation(obj);
          }

          v12 = *(*(&v48 + 1) + 8 * i);
          v13 = objc_autoreleasePoolPush();
          persistedAvailableForStagingByTarget3 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
          v15 = [persistedAvailableForStagingByTarget3 persistedEntry:v12 fromLocation:@"loadPersistedAvailableForStagingByTarget"];

          if (v15)
          {
            persistedAvailableForStagingByTarget4 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
            v17 = [persistedAvailableForStagingByTarget4 decodeFromLocation:@"loadPersistedAvailableForStagingByTarget" ofEntryName:v12 fromPersistedEntry:v15 decodingObjectForKey:@"AvailableForStagingByTarget" ofClass:objc_opt_class() allowingNilObject:0];

            if (v17)
            {
              summary = [v17 summary];
              [v40 appendFormat:@"%@|", summary];

              [(MADAutoAssetStager *)self availableForStagingLoadedFromPersisted:v17 persistedEntryID:v12];
            }

            else
            {
              v20 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v20, OS_LOG_TYPE_ERROR))
              {
                _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
                *buf = 138543618;
                v54 = _updateLatestSummary;
                v55 = 2114;
                v56 = v12;
                _os_log_impl(&dword_0, v20, OS_LOG_TYPE_ERROR, "[%{public}@] {loadPersistedAvailableForStagingByTarget} unable to load available-for-staging | entryID:%{public}@", buf, 0x16u);
              }

              [v39 addObject:v12];
            }
          }

          else
          {
            v17 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v17, OS_LOG_TYPE_ERROR))
            {
              _updateLatestSummary2 = [(MADAutoAssetStager *)self _updateLatestSummary];
              *buf = 138543618;
              v54 = _updateLatestSummary2;
              v55 = 2114;
              v56 = v12;
              _os_log_impl(&dword_0, v17, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {loadPersistedAvailableForStagingByTarget} unable to retrieve set-lookup-result | entryID:%{public}@", buf, 0x16u);
            }
          }

          objc_autoreleasePoolPop(v13);
        }

        v9 = [obj countByEnumeratingWithState:&v48 objects:v57 count:16];
      }

      while (v9);
    }

    v22 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v22, OS_LOG_TYPE_DEFAULT))
    {
      _updateLatestSummary3 = [(MADAutoAssetStager *)self _updateLatestSummary];
      *buf = 138543618;
      v54 = _updateLatestSummary3;
      v55 = 2114;
      v56 = v40;
      _os_log_impl(&dword_0, v22, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {loadPersistedAvailableForStagingByTarget} validated as available-for-staging\n>>> validatedEntries:%{public}@", buf, 0x16u);
    }

    v46 = 0u;
    v47 = 0u;
    v44 = 0u;
    v45 = 0u;
    v24 = v39;
    v25 = [v24 countByEnumeratingWithState:&v44 objects:v52 count:16];
    if (v25)
    {
      v26 = v25;
      obja = *v45;
      v41 = v24;
      do
      {
        for (j = 0; j != v26; j = j + 1)
        {
          if (*v45 != obja)
          {
            objc_enumerationMutation(v41);
          }

          v28 = *(*(&v44 + 1) + 8 * j);
          v29 = objc_autoreleasePoolPush();
          persistedAvailableForStagingByTarget5 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
          v31 = [persistedAvailableForStagingByTarget5 persistedEntry:v28 fromLocation:@"loadPersistedAvailableForStagingByTarget"];

          persistedAvailableForStagingByTarget6 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
          v33 = [persistedAvailableForStagingByTarget6 decodeFromLocation:@"loadPersistedAvailableForStagingByTarget" ofEntryName:v28 fromPersistedEntry:v31 decodingObjectForKey:@"AvailableForStagingByTarget" ofClass:objc_opt_class() allowingNilObject:0];

          if (v33)
          {
            v34 = [(MADAutoAssetStager *)self _targetNameAvailableForStaging:v33];
            persistedAvailableForStagingByTarget7 = [(MADAutoAssetStager *)self persistedAvailableForStagingByTarget];
            [persistedAvailableForStagingByTarget7 removePersistedEntry:v28 fromLocation:@"loadPersistedAvailableForStagingByTarget"];

            v36 = [[NSString alloc] initWithFormat:@"[%@] dropped while loading persisted-state", v34];
            [(MADAutoAssetStager *)self _logPersistedAvailableForStagingByTargetRemoved:@"loadPersistedAvailableForStagingByTarget" removedPersistedEntryID:v28 removedAvailableForStaging:v33 message:v36];
          }

          objc_autoreleasePoolPop(v29);
        }

        v24 = v41;
        v26 = [v41 countByEnumeratingWithState:&v44 objects:v52 count:16];
      }

      while (v26);
    }

    v7 = v38;
  }

  else
  {
    v24 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(v24, OS_LOG_TYPE_DEFAULT))
    {
      _updateLatestSummary4 = [(MADAutoAssetStager *)self _updateLatestSummary];
      *buf = 138543362;
      v54 = _updateLatestSummary4;
      _os_log_impl(&dword_0, v24, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {loadPersistedAvailableForStagingByTarget} no persisted available-for-staging instances to be resumed", buf, 0xCu);
    }
  }

  [(MADAutoAssetStager *)self _logPersistedSetLookupResultsTableOfContents:@"loadPersistedAvailableForStagingByTarget"];
}

- (id)newAssetMetadataFromAssetCatalog:(id)catalog forAssetype:(id)assetype forAssetSpecifier:(id)specifier
{
  catalogCopy = catalog;
  assetypeCopy = assetype;
  specifierCopy = specifier;
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v69 = objc_alloc_init(NSMutableDictionary);
  v78 = 0u;
  v79 = 0u;
  v80 = 0u;
  v81 = 0u;
  v13 = catalogCopy;
  v14 = [v13 countByEnumeratingWithState:&v78 objects:v89 count:16];
  if (!v14)
  {

    goto LABEL_61;
  }

  v15 = v14;
  v73 = 0;
  v61 = 0;
  v16 = *v79;
  v67 = assetypeCopy;
  if (assetypeCopy)
  {
    v17 = assetypeCopy;
  }

  else
  {
    v17 = @"N";
  }

  v65 = v17;
  v66 = *v79;
  v60 = v13;
  do
  {
    v18 = 0;
    v71 = v15;
    do
    {
      if (*v79 != v16)
      {
        objc_enumerationMutation(v13);
      }

      v19 = *(*(&v78 + 1) + 8 * v18);
      v20 = objc_autoreleasePoolPush();
      v21 = [v13 objectForKey:v19];
      v22 = v21;
      if (v19)
      {
        v23 = v21 == 0;
      }

      else
      {
        v23 = 1;
      }

      if (v23)
      {
        v24 = v20;
        v25 = v18;
        v26 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v26, OS_LOG_TYPE_ERROR))
        {
          _updateLatestSummary = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
          v28 = _updateLatestSummary;
          v29 = @"N";
          if (v19)
          {
            v30 = v19;
          }

          else
          {
            v30 = @"N";
          }

          *buf = 138543874;
          v84 = _updateLatestSummary;
          if (v22)
          {
            v29 = @"Y";
          }

          v85 = 2114;
          v86 = v30;
          v87 = 2114;
          v88 = v29;
          _os_log_impl(&dword_0, v26, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {newAssetMetadataFromAssetCatalog} unable to determine key/value from set-catalog | setCatalogKey:%{public}@ | setCatalogValue:%{public}@", buf, 0x20u);

          v15 = v71;
        }

        v18 = v25;
        v20 = v24;
      }

      else
      {
        if (![SUCore stringIsEqual:v19 to:@"Assets"])
        {
          [v69 setObject:v22 forKey:v19];
          goto LABEL_54;
        }

        v72 = v18;
        objc_opt_class();
        if (objc_opt_isKindOfClass())
        {
          v32 = objc_alloc_init(NSMutableArray);
          v33 = [v13 safeStringForKey:@"AssetType"];
          v34 = [v13 safeObjectForKey:@"Assets" ofClass:objc_opt_class()];
          v68 = v34;
          if (([SUCore stringIsEqual:v33 to:v67]& 1) != 0)
          {
            if ([v34 count])
            {
              v76 = 0u;
              v77 = 0u;
              v74 = 0u;
              v75 = 0u;
              v35 = v34;
              v36 = [v35 countByEnumeratingWithState:&v74 objects:v82 count:16];
              if (v36)
              {
                v37 = v36;
                v62 = v33;
                v63 = v22;
                v64 = v20;
                v38 = *v75;
                do
                {
                  for (i = 0; i != v37; i = i + 1)
                  {
                    if (*v75 != v38)
                    {
                      objc_enumerationMutation(v35);
                    }

                    v40 = *(*(&v74 + 1) + 8 * i);
                    v41 = objc_autoreleasePoolPush();
                    v42 = [v40 safeStringForKey:@"AssetSpecifier"];
                    if ([SUCore stringIsEqual:v42 to:specifierCopy])
                    {
                      [v32 addObject:v40];
                      v73 = 1;
                    }

                    objc_autoreleasePoolPop(v41);
                  }

                  v37 = [v35 countByEnumeratingWithState:&v74 objects:v82 count:16];
                }

                while (v37);
                v61 = 1;
                v13 = v60;
                v15 = v71;
                v18 = v72;
                v22 = v63;
                v20 = v64;
                v33 = v62;
              }

              else
              {
                v61 = 1;
                v13 = v60;
              }

              goto LABEL_48;
            }

            v35 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v35, OS_LOG_TYPE_ERROR))
            {
              _updateLatestSummary2 = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
              *buf = 138543618;
              v84 = _updateLatestSummary2;
              v85 = 2114;
              v86 = v65;
              v48 = v35;
              v49 = "%{public}@\n[AUTO-STAGER] {newAssetMetadataFromAssetCatalog} set-catalog lookup response has no auto-assets for asset-type | assetType:%{public}@";
              v50 = 22;
              goto LABEL_46;
            }
          }

          else
          {
            v35 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v35, OS_LOG_TYPE_ERROR))
            {
              _updateLatestSummary3 = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
              _updateLatestSummary2 = _updateLatestSummary3;
              *buf = 138543874;
              v47 = @"N";
              if (v33)
              {
                v47 = v33;
              }

              v84 = _updateLatestSummary3;
              v85 = 2114;
              v86 = v65;
              v87 = 2114;
              v88 = v47;
              v48 = v35;
              v49 = "%{public}@\n[AUTO-STAGER] {newAssetMetadataFromAssetCatalog} set-catalog lookup response for different asset-type | assetType:%{public}@ | catalogAssetType:%{public}@";
              v50 = 32;
LABEL_46:
              _os_log_impl(&dword_0, v48, OS_LOG_TYPE_ERROR, v49, buf, v50);

              v15 = v71;
            }
          }

LABEL_48:

          if ([v32 count])
          {
            [v69 setObject:v32 forKey:@"Assets"];
          }

          else
          {
            v51 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v51, OS_LOG_TYPE_ERROR))
            {
              _updateLatestSummary4 = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
              *buf = 138543618;
              v84 = _updateLatestSummary4;
              v85 = 2114;
              v86 = v65;
              _os_log_impl(&dword_0, v51, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {newAssetMetadataFromAssetCatalog} found no matching asset-specifier in set-catalog lookup response | assetType:%{public}@", buf, 0x16u);

              v15 = v71;
            }
          }

          v16 = v66;
          goto LABEL_54;
        }

        v43 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v43, OS_LOG_TYPE_ERROR))
        {
          _updateLatestSummary5 = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
          *buf = 138543618;
          v84 = _updateLatestSummary5;
          v85 = 2114;
          v86 = v19;
          _os_log_impl(&dword_0, v43, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {newAssetMetadataFromAssetCatalog} key value is not an array | setCatalogKey:%{public}@", buf, 0x16u);

          v15 = v71;
        }

        v18 = v72;
      }

LABEL_54:

      objc_autoreleasePoolPop(v20);
      v18 = v18 + 1;
    }

    while (v18 != v15);
    v15 = [v13 countByEnumeratingWithState:&v78 objects:v89 count:16];
  }

  while (v15);

  assetypeCopy = v67;
  if (v61)
  {
    if ((v73 & 1) == 0)
    {
      v53 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v53, OS_LOG_TYPE_ERROR))
      {
        _updateLatestSummary6 = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
        safeSummary = [v13 safeSummary];
        *buf = 138543874;
        v84 = _updateLatestSummary6;
        v85 = 2114;
        v86 = specifierCopy;
        v87 = 2114;
        v88 = safeSummary;
        v56 = "%{public}@\n[AUTO-STAGER] {newAssetMetadataFromAssetCatalog} Assets array in set-catalog lookup response missing asset-specifier | assetSpecifier:%{public}@ | autoAssetSetCatalog:%{public}@";
        v57 = v53;
        v58 = 32;
        goto LABEL_63;
      }

      goto LABEL_64;
    }

    goto LABEL_65;
  }

LABEL_61:
  v53 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v53, OS_LOG_TYPE_ERROR))
  {
    _updateLatestSummary6 = [(MADAutoAssetStager *)selfCopy _updateLatestSummary];
    safeSummary = [v13 safeSummary];
    *buf = 138543618;
    v84 = _updateLatestSummary6;
    v85 = 2114;
    v86 = safeSummary;
    v56 = "%{public}@\n[AUTO-STAGER] {newAssetMetadataFromAssetCatalog} no Assets array in set-catalog lookup response | autoAssetSetCatalog:%{public}@";
    v57 = v53;
    v58 = 22;
LABEL_63:
    _os_log_impl(&dword_0, v57, OS_LOG_TYPE_ERROR, v56, buf, v58);
  }

LABEL_64:

  v69 = 0;
LABEL_65:

  return v69;
}

- (id)baseForPatchingToSelector:(id)selector
{
  selectorCopy = selector;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v25 = 0u;
  v26 = 0u;
  v23 = 0u;
  v24 = 0u;
  obj = [(MADAutoAssetStager *)self baseForStagingDescriptors];
  v7 = [obj countByEnumeratingWithState:&v23 objects:v27 count:16];
  if (v7)
  {
    v8 = *v24;
    p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
    do
    {
      v10 = 0;
      v21 = v7;
      do
      {
        if (*v24 != v8)
        {
          objc_enumerationMutation(obj);
        }

        v11 = *(*(&v23 + 1) + 8 * v10);
        v12 = p_weak_ivar_lyt[223];
        assetType = [v11 assetType];
        assetType2 = [selectorCopy assetType];
        if ([v12 stringIsEqual:assetType to:assetType2])
        {
          v15 = p_weak_ivar_lyt[223];
          [v11 assetSpecifier];
          v16 = v8;
          v18 = v17 = p_weak_ivar_lyt;
          assetSpecifier = [selectorCopy assetSpecifier];
          LODWORD(v15) = [v15 stringIsEqual:v18 to:assetSpecifier];

          p_weak_ivar_lyt = v17;
          v8 = v16;
          v7 = v21;

          if (v15)
          {
            v7 = v11;
            goto LABEL_12;
          }
        }

        else
        {
        }

        v10 = v10 + 1;
      }

      while (v7 != v10);
      v7 = [obj countByEnumeratingWithState:&v23 objects:v27 count:16];
    }

    while (v7);
  }

LABEL_12:

  return v7;
}

- (id)assetMetadataFromAssetCatalog:(id)catalog forAssetype:(id)assetype forAssetSpecifier:(id)specifier preferringBestFormat:(BOOL)format
{
  formatCopy = format;
  catalogCopy = catalog;
  assetypeCopy = assetype;
  specifierCopy = specifier;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v69 = 0u;
  v70 = 0u;
  v67 = 0u;
  v68 = 0u;
  v14 = catalogCopy;
  v15 = [v14 countByEnumeratingWithState:&v67 objects:v78 count:16];
  v56 = specifierCopy;
  if (!v15)
  {

    v47 = 0;
    goto LABEL_53;
  }

  v16 = v15;
  v52 = assetypeCopy;
  v62 = 0;
  v57 = 0;
  v58 = *v68;
  selfCopy = self;
  v54 = v14;
  do
  {
    v17 = 0;
    v55 = v16;
    do
    {
      if (*v68 != v58)
      {
        objc_enumerationMutation(v14);
      }

      v18 = *(*(&v67 + 1) + 8 * v17);
      context = objc_autoreleasePoolPush();
      v19 = [v14 objectForKey:v18];
      v61 = v19;
      if (v18)
      {
        v20 = v19 == 0;
      }

      else
      {
        v20 = 1;
      }

      if (v20)
      {
        v21 = _MADLog(@"AutoStager");
        if (!os_log_type_enabled(v21, OS_LOG_TYPE_ERROR))
        {
          goto LABEL_46;
        }

        _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
        _updateLatestSummary2 = _updateLatestSummary;
        v24 = @"N";
        if (v18)
        {
          v25 = v18;
        }

        else
        {
          v25 = @"N";
        }

        *buf = 138543874;
        v73 = _updateLatestSummary;
        if (v61)
        {
          v24 = @"Y";
        }

        v74 = 2114;
        v75 = v25;
        v76 = 2114;
        v77 = v24;
        v26 = v21;
        v27 = "%{public}@\n[AUTO-STAGER] {assetMetadataFromAssetCatalog} unable to determine key/value from set-catalog | setCatalogKey:%{public}@ | setCatalogValue:%{public}@";
        v28 = 32;
        goto LABEL_18;
      }

      if (![SUCore stringIsEqual:v18 to:@"Assets"])
      {
        goto LABEL_47;
      }

      objc_opt_class();
      if ((objc_opt_isKindOfClass() & 1) == 0)
      {
        v21 = _MADLog(@"AutoStager");
        if (!os_log_type_enabled(v21, OS_LOG_TYPE_ERROR))
        {
          goto LABEL_46;
        }

        _updateLatestSummary2 = [(MADAutoAssetStager *)self _updateLatestSummary];
        *buf = 138543618;
        v73 = _updateLatestSummary2;
        v74 = 2114;
        v75 = v18;
        v26 = v21;
        v27 = "%{public}@\n[AUTO-STAGER] {assetMetadataFromAssetCatalog} key value is not an array | setCatalogKey:%{public}@";
        v28 = 22;
LABEL_18:
        _os_log_impl(&dword_0, v26, OS_LOG_TYPE_ERROR, v27, buf, v28);

        goto LABEL_46;
      }

      v30 = [v14 safeObjectForKey:@"Assets" ofClass:objc_opt_class()];
      v63 = 0u;
      v64 = 0u;
      v65 = 0u;
      v66 = 0u;
      v21 = v30;
      v31 = [v21 countByEnumeratingWithState:&v63 objects:v71 count:16];
      if (!v31)
      {
        goto LABEL_45;
      }

      v32 = v31;
      v33 = *v64;
      while (2)
      {
        for (i = 0; i != v32; i = i + 1)
        {
          if (*v64 != v33)
          {
            objc_enumerationMutation(v21);
          }

          v35 = *(*(&v63 + 1) + 8 * i);
          v36 = objc_autoreleasePoolPush();
          v37 = [v35 safeStringForKey:@"AssetFormat"];
          v38 = [v35 safeStringForKey:@"AssetSpecifier"];
          if ([SUCore stringIsEqual:v38 to:specifierCopy])
          {
            if (!formatCopy)
            {
              v45 = v35;

              objc_autoreleasePoolPop(v36);
              v62 = v45;
              goto LABEL_45;
            }

            if ([SUCore stringIsEqual:v38 to:specifierCopy])
            {
              if (v37)
              {
                v39 = v62 == 0;
              }

              else
              {
                v39 = 1;
              }

              if (v39)
              {
                v40 = v35;
                v41 = v62;
LABEL_37:

                v62 = v35;
                goto LABEL_39;
              }

              if ([MADAutoAssetDescriptor isMorePreferredAssetFormat:v37 comparedTo:v57])
              {
                v43 = v35;

                v44 = v37;
                v41 = v57;
                v57 = v44;
                specifierCopy = v56;
                goto LABEL_37;
              }

              specifierCopy = v56;
            }
          }

LABEL_39:

          objc_autoreleasePoolPop(v36);
        }

        v32 = [v21 countByEnumeratingWithState:&v63 objects:v71 count:16];
        if (v32)
        {
          continue;
        }

        break;
      }

LABEL_45:

      self = selfCopy;
      v14 = v54;
      v16 = v55;
LABEL_46:

LABEL_47:
      objc_autoreleasePoolPop(context);
      v17 = v17 + 1;
    }

    while (v17 != v16);
    v16 = [v14 countByEnumeratingWithState:&v67 objects:v78 count:16];
  }

  while (v16);

  if (v62)
  {
    v46 = v62;
    assetypeCopy = v52;
    v47 = v57;
    goto LABEL_56;
  }

  assetypeCopy = v52;
  v47 = v57;
LABEL_53:
  v48 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v48, OS_LOG_TYPE_ERROR))
  {
    _updateLatestSummary3 = [(MADAutoAssetStager *)self _updateLatestSummary];
    safeSummary = [v14 safeSummary];
    *buf = 138543874;
    v73 = _updateLatestSummary3;
    v74 = 2114;
    v75 = v56;
    v76 = 2114;
    v77 = safeSummary;
    _os_log_impl(&dword_0, v48, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {assetMetadataFromAssetCatalog} Assets array in set-catalog lookup response missing asset-specifier | assetSpecifier:%{public}@ | autoAssetSetCatalog:%{public}@", buf, 0x20u);
  }

  v46 = 0;
LABEL_56:

  return v46;
}

- (id)newSetLookupResult:(id)result forAssetType:(id)type forSetCatalog:(id)catalog
{
  resultCopy = result;
  typeCopy = type;
  catalogCopy = catalog;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v68 = resultCopy;
  resultCopy = [[NSString alloc] initWithFormat:@"%@:newSetLookupResult", resultCopy];
  v70 = catalogCopy;
  v12 = [catalogCopy safeObjectForKey:@"Assets" ofClass:objc_opt_class()];
  v74 = objc_alloc_init(NSMutableDictionary);
  v69 = objc_alloc_init(NSMutableArray);
  v94 = 0u;
  v95 = 0u;
  v96 = 0u;
  v97 = 0u;
  obj = v12;
  v13 = [obj countByEnumeratingWithState:&v94 objects:v106 count:16];
  if (v13)
  {
    v14 = v13;
    v15 = *v95;
    p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
    selfCopy = self;
    v73 = *v95;
    do
    {
      v17 = 0;
      v76 = v14;
      do
      {
        if (*v95 != v15)
        {
          objc_enumerationMutation(obj);
        }

        v18 = *(*(&v94 + 1) + 8 * v17);
        v19 = objc_autoreleasePoolPush();
        if ([p_weak_ivar_lyt[316] doesMetatadaIndicateEmptyEntry:v18])
        {
          v20 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v20, OS_LOG_TYPE_DEFAULT))
          {
            [(MADAutoAssetStager *)self summary];
            v22 = v21 = v19;
            safeSummary = [v18 safeSummary];
            *buf = 138543874;
            v101 = v22;
            v102 = 2114;
            v103 = resultCopy;
            v104 = 2114;
            v105 = safeSummary;
            _os_log_impl(&dword_0, v20, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] {%{public}@} ignoring empty entry | assetMetadata:%{public}@", buf, 0x20u);

            v19 = v21;
          }

          goto LABEL_29;
        }

        v79 = v19;
        v80 = v17;
        v24 = [MAAutoAssetSelector alloc];
        v25 = [v18 safeStringForKey:@"AssetSpecifier"];
        v26 = [v18 safeStringForKey:@"AssetVersion"];
        v81 = [v24 initForAssetType:typeCopy withAssetSpecifier:v25 matchingAssetVersion:v26];

        v27 = v18;
        v90 = 0u;
        v91 = 0u;
        v92 = 0u;
        v93 = 0u;
        alreadyDownloadedDescriptors = [(MADAutoAssetStager *)self alreadyDownloadedDescriptors];
        v84 = [alreadyDownloadedDescriptors countByEnumeratingWithState:&v90 objects:v99 count:16];
        if (v84)
        {
          v78 = v27;
          v29 = *v91;
          v30 = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
          v31 = v81;
          v82 = *v91;
LABEL_11:
          v32 = 0;
          while (1)
          {
            if (*v91 != v29)
            {
              objc_enumerationMutation(alreadyDownloadedDescriptors);
            }

            v33 = *(*(&v90 + 1) + 8 * v32);
            v34 = v30[223];
            assetType = [v31 assetType];
            assetType2 = [v33 assetType];
            if (![v34 stringIsEqual:assetType to:assetType2])
            {
              goto LABEL_19;
            }

            v37 = alreadyDownloadedDescriptors;
            v38 = v30[223];
            assetSpecifier = [v31 assetSpecifier];
            assetSpecifier2 = [v33 assetSpecifier];
            if (![v38 stringIsEqual:assetSpecifier to:assetSpecifier2])
            {
              break;
            }

            v41 = v30[223];
            assetVersion = [v31 assetVersion];
            assetVersion2 = [v33 assetVersion];
            LOBYTE(v41) = [v41 stringIsEqual:assetVersion to:assetVersion2];

            v30 = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
            v31 = v81;

            alreadyDownloadedDescriptors = v37;
            v29 = v82;
            if (v41)
            {
              v46 = v33;

              if (v46)
              {
                metadata = [v46 metadata];

                assetId = [v46 assetId];
                alreadyDownloadedDescriptors = [v46 assetType];
                assetId2 = [v46 assetId];
                v44 = getAutoLocalUrlFromTypeAndIdWithPurpose(alreadyDownloadedDescriptors, assetId2, 2, @"auto");

                v27 = metadata;
                v31 = v81;
                self = selfCopy;
                v14 = v76;
                goto LABEL_26;
              }

              v44 = 0;
              assetId = 0;
              self = selfCopy;
              v14 = v76;
              v27 = v78;
              goto LABEL_28;
            }

LABEL_20:
            if (v84 == ++v32)
            {
              v84 = [alreadyDownloadedDescriptors countByEnumeratingWithState:&v90 objects:v99 count:16];
              if (v84)
              {
                goto LABEL_11;
              }

              v46 = 0;
              v44 = 0;
              assetId = 0;
              self = selfCopy;
              v14 = v76;
              v27 = v78;
              goto LABEL_26;
            }
          }

          alreadyDownloadedDescriptors = v37;
          v29 = v82;
LABEL_19:

          goto LABEL_20;
        }

        v46 = 0;
        v44 = 0;
        assetId = 0;
        v14 = v76;
        v31 = v81;
LABEL_26:

LABEL_28:
        v20 = v31;
        v49 = [[MANAutoAssetSetAtomicEntry alloc] initWithFullAssetSelector:v31 withAssetID:assetId withLocalContentURL:v44 withAssetAttributes:v27 inhibitedFromEmergencyRemoval:0];
        [(MANAutoAssetSetAtomicEntry *)v49 fullAssetSelector];
        v51 = v50 = v27;
        assetSpecifier3 = [v51 assetSpecifier];
        [v74 setSafeObject:v49 forKey:assetSpecifier3];

        v15 = v73;
        p_weak_ivar_lyt = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
        v19 = v79;
        v17 = v80;
LABEL_29:

        objc_autoreleasePoolPop(v19);
        v17 = v17 + 1;
      }

      while (v17 != v14);
      v14 = [obj countByEnumeratingWithState:&v94 objects:v106 count:16];
    }

    while (v14);
  }

  v88 = 0u;
  v89 = 0u;
  v86 = 0u;
  v87 = 0u;
  v53 = v74;
  v54 = [v53 countByEnumeratingWithState:&v86 objects:v98 count:16];
  if (v54)
  {
    v55 = v54;
    v56 = *v87;
    do
    {
      for (i = 0; i != v55; i = i + 1)
      {
        if (*v87 != v56)
        {
          objc_enumerationMutation(v53);
        }

        v58 = [v53 safeObjectForKey:*(*(&v86 + 1) + 8 * i) ofClass:objc_opt_class()];
        if (v58)
        {
          [v69 addObject:v58];
        }
      }

      v55 = [v53 countByEnumeratingWithState:&v86 objects:v98 count:16];
    }

    while (v55);
  }

  v59 = [v70 safeStringForKey:@"DownloadedFromLive"];
  v85 = v59;
  if (v59)
  {
    v60 = [[NSURL alloc] initWithString:v59];
  }

  else
  {
    v60 = 0;
  }

  v61 = [MADAutoSetLookupResult alloc];
  v62 = [v70 safeStringForKey:@"CachedAssetSetId"];
  v63 = [v70 safeDateForKey:@"lastTimeChecked"];
  v64 = [v70 safeDateForKey:@"postedDate"];
  activeSetJobConfiguration = [(MADAutoAssetStager *)self activeSetJobConfiguration];
  autoAssetEntries = [activeSetJobConfiguration autoAssetEntries];
  v83 = [(MADAutoSetLookupResult *)v61 initForAssetType:typeCopy withCatalogCachedAssetSetID:v62 withCatalogDownloadedFromLive:v60 withCatalogLastTimeChecked:v63 withCatalogPostedDate:v64 withRequestedAutoAssetEntries:autoAssetEntries withDiscoveredAtomicEntries:v69 withCatalogFromPallasResponse:v70];

  return v83;
}

- (id)newSetLookupResultsForTargetOS
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v5 = objc_alloc_init(NSMutableArray);
  v6 = objc_alloc_init(NSArray);
  persistedSetLookupResults = [(MADAutoAssetStager *)self persistedSetLookupResults];
  v8 = [persistedSetLookupResults persistedEntryIDs:@"newSetLookupResultsForTargetOS"];

  if ([v8 count])
  {
    v24 = v8;
    v25 = v6;
    v30 = 0u;
    v31 = 0u;
    v28 = 0u;
    v29 = 0u;
    v9 = v8;
    v27 = [v9 countByEnumeratingWithState:&v28 objects:v36 count:16];
    if (!v27)
    {
      goto LABEL_17;
    }

    v10 = *v29;
    v26 = *v29;
    while (1)
    {
      for (i = 0; i != v27; i = i + 1)
      {
        if (*v29 != v10)
        {
          objc_enumerationMutation(v9);
        }

        v12 = *(*(&v28 + 1) + 8 * i);
        v13 = objc_autoreleasePoolPush();
        persistedSetLookupResults2 = [(MADAutoAssetStager *)self persistedSetLookupResults];
        v15 = [persistedSetLookupResults2 persistedEntry:v12 fromLocation:@"newSetLookupResultsForTargetOS"];

        if (v15)
        {
          persistedSetLookupResults3 = [(MADAutoAssetStager *)self persistedSetLookupResults];
          v17 = [persistedSetLookupResults3 decodeFromLocation:@"newSetLookupResultsForTargetOS" ofEntryName:v12 fromPersistedEntry:v15 decodingObjectForKey:@"setLookupResult" ofClass:objc_opt_class() allowingNilObject:0];

          if (v17)
          {
            [v5 addObject:v17];
            goto LABEL_15;
          }

          _updateLatestSummary = _MADLog(@"AutoStager");
          if (os_log_type_enabled(_updateLatestSummary, OS_LOG_TYPE_ERROR))
          {
            [(MADAutoAssetStager *)self _updateLatestSummary];
            v19 = v9;
            v21 = v20 = v5;
            *buf = 138543618;
            v33 = v21;
            v34 = 2114;
            v35 = v12;
            _os_log_impl(&dword_0, _updateLatestSummary, OS_LOG_TYPE_ERROR, "[%{public}@] {newSetLookupResultsForTargetOS} unable to load set-lookup-result | entryID:%{public}@", buf, 0x16u);

            v5 = v20;
            v9 = v19;
            v10 = v26;
          }
        }

        else
        {
          v17 = _MADLog(@"AutoStager");
          if (!os_log_type_enabled(v17, OS_LOG_TYPE_ERROR))
          {
            goto LABEL_15;
          }

          _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
          *buf = 138543618;
          v33 = _updateLatestSummary;
          v34 = 2114;
          v35 = v12;
          _os_log_impl(&dword_0, v17, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {newSetLookupResultsForTargetOS} unable to retrieve set-lookup-result | entryID:%{public}@", buf, 0x16u);
        }

LABEL_15:
        objc_autoreleasePoolPop(v13);
      }

      v27 = [v9 countByEnumeratingWithState:&v28 objects:v36 count:16];
      if (!v27)
      {
LABEL_17:

        v8 = v24;
        v6 = v25;
        break;
      }
    }
  }

  if ([v5 count])
  {
    v22 = v5;

    v6 = v22;
  }

  return v6;
}

- (void)updateLookupResultsJustStaged:(id)staged
{
  stagedCopy = staged;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)self _updateLookupResultsJustStagedByGroupMode:stagedCopy];
  }

  else
  {
    [(MADAutoAssetStager *)self _updateLookupResultsJustStagedAllMode:stagedCopy];
  }
}

- (void)_updateLookupResultsJustStagedByGroupMode:(id)mode
{
  modeCopy = mode;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v8 = [(MADAutoAssetStager *)self targetLookupResultsKeyForTrainName:assetTargetTrainName withRestoreVersion:assetTargetRestoreVersion];

  selfCopy = self;
  v9 = [(MADAutoAssetStager *)self getTargetLookupResultsForKey:v8];
  v87 = 0u;
  v88 = 0u;
  v89 = 0u;
  v90 = 0u;
  setLookupResults = [v9 setLookupResults];
  allKeys = [setLookupResults allKeys];
  v12 = [allKeys copy];

  obj = v12;
  v13 = [v12 countByEnumeratingWithState:&v87 objects:v96 count:16];
  if (v13)
  {
    v14 = v13;
    v15 = *v88;
    v67 = v9;
    v68 = v8;
    v66 = *v88;
    do
    {
      v16 = 0;
      v69 = v14;
      do
      {
        if (*v88 != v15)
        {
          objc_enumerationMutation(obj);
        }

        v17 = *(*(&v87 + 1) + 8 * v16);
        v18 = objc_autoreleasePoolPush();
        setLookupResults2 = [v9 setLookupResults];
        v20 = [setLookupResults2 safeObjectForKey:v17 ofClass:objc_opt_class()];

        if (v20)
        {
          [v20 assetType];
          v21 = v72 = v20;
          [modeCopy assetType];
          v22 = v73 = v18;
          v23 = [SUCore stringIsEqual:v21 to:v22];

          v18 = v73;
          if (v23)
          {
            v71 = v16;
            v81 = objc_alloc_init(NSMutableArray);
            v83 = 0u;
            v84 = 0u;
            v85 = 0u;
            v86 = 0u;
            discoveredAtomicEntries = [v20 discoveredAtomicEntries];
            v24 = modeCopy;
            v82 = [discoveredAtomicEntries countByEnumeratingWithState:&v83 objects:v95 count:16];
            if (!v82)
            {
              goto LABEL_28;
            }

            v80 = *v84;
            while (1)
            {
              v25 = 0;
              do
              {
                if (*v84 != v80)
                {
                  objc_enumerationMutation(discoveredAtomicEntries);
                }

                v26 = *(*(&v83 + 1) + 8 * v25);
                assetType = [v24 assetType];
                fullAssetSelector = [(MANAutoAssetSetAtomicEntry *)v26 fullAssetSelector];
                assetType2 = [fullAssetSelector assetType];
                if (![SUCore stringIsEqual:assetType to:assetType2])
                {
                  goto LABEL_21;
                }

                assetSpecifier = [v24 assetSpecifier];
                fullAssetSelector2 = [(MANAutoAssetSetAtomicEntry *)v26 fullAssetSelector];
                assetSpecifier2 = [fullAssetSelector2 assetSpecifier];
                if (![SUCore stringIsEqual:assetSpecifier to:assetSpecifier2])
                {
                  goto LABEL_20;
                }

                v78 = assetSpecifier;
                assetVersion = [v24 assetVersion];
                fullAssetSelector3 = [(MANAutoAssetSetAtomicEntry *)v26 fullAssetSelector];
                assetVersion2 = [fullAssetSelector3 assetVersion];
                v77 = assetVersion;
                if (![SUCore stringIsEqual:assetVersion to:assetVersion2])
                {

                  v24 = modeCopy;
                  assetSpecifier = v78;
LABEL_20:

LABEL_21:
LABEL_22:
                  [v81 addObject:v26];
                  goto LABEL_23;
                }

                assetId = [modeCopy assetId];
                assetID = [(MANAutoAssetSetAtomicEntry *)v26 assetID];
                v74 = [SUCore stringIsEqual:assetId to:assetID];

                v24 = modeCopy;
                if (v74)
                {
                  goto LABEL_22;
                }

                assetType3 = [modeCopy assetType];
                assetId2 = [modeCopy assetId];
                v39 = getAutoLocalUrlFromTypeAndIdWithPurpose(assetType3, assetId2, 2, @"auto");

                v40 = [MANAutoAssetSetAtomicEntry alloc];
                fullAssetSelector4 = [(MANAutoAssetSetAtomicEntry *)v26 fullAssetSelector];
                assetId3 = [modeCopy assetId];
                metadata = [modeCopy metadata];
                v44 = [(MANAutoAssetSetAtomicEntry *)v40 initWithFullAssetSelector:fullAssetSelector4 withAssetID:assetId3 withLocalContentURL:v39 withAssetAttributes:metadata inhibitedFromEmergencyRemoval:0];

                if (v44)
                {
                  v45 = v44;
                }

                else
                {
                  v45 = v26;
                }

                [v81 addObject:v45];

                v24 = modeCopy;
LABEL_23:
                v25 = v25 + 1;
              }

              while (v82 != v25);
              v46 = [discoveredAtomicEntries countByEnumeratingWithState:&v83 objects:v95 count:16];
              v82 = v46;
              if (!v46)
              {
LABEL_28:

                v47 = [MADAutoSetLookupResult alloc];
                v20 = v72;
                assetType4 = [v72 assetType];
                catalogCachedAssetSetID = [v72 catalogCachedAssetSetID];
                catalogDownloadedFromLive = [v72 catalogDownloadedFromLive];
                catalogLastTimeChecked = [v72 catalogLastTimeChecked];
                catalogPostedDate = [v72 catalogPostedDate];
                requestedAutoAssetEntries = [v72 requestedAutoAssetEntries];
                autoAssetSetCatalog = [v72 autoAssetSetCatalog];
                v55 = [(MADAutoSetLookupResult *)v47 initForAssetType:assetType4 withCatalogCachedAssetSetID:catalogCachedAssetSetID withCatalogDownloadedFromLive:catalogDownloadedFromLive withCatalogLastTimeChecked:catalogLastTimeChecked withCatalogPostedDate:catalogPostedDate withRequestedAutoAssetEntries:requestedAutoAssetEntries withDiscoveredAtomicEntries:v81 withCatalogFromPallasResponse:autoAssetSetCatalog];

                v9 = v67;
                setLookupResults3 = [v67 setLookupResults];
                assetType5 = [v72 assetType];
                [setLookupResults3 setSafeObject:v55 forKey:assetType5];

                v8 = v68;
                v14 = v69;
                v15 = v66;
                v16 = v71;
                v18 = v73;
                break;
              }
            }
          }
        }

        objc_autoreleasePoolPop(v18);
        v16 = v16 + 1;
      }

      while (v16 != v14);
      v14 = [obj countByEnumeratingWithState:&v87 objects:v96 count:16];
    }

    while (v14);
  }

  v58 = selfCopy;
  persistedTargetLookupResults = [(MADAutoAssetStager *)selfCopy persistedTargetLookupResults];
  v60 = [persistedTargetLookupResults persistedEntry:v8 fromLocation:@"_updateLookupResultsJustStagedByGroupMode"];

  if (v60)
  {
    [(MADAutoAssetStager *)selfCopy _persistTargetOTASituation:500 fromLocation:@"_updateLookupResultsJustStagedByGroupMode"];
    [v60 persistSecureCodedObject:v9 forKey:@"targetLookupResults"];
    persistedTargetLookupResults2 = [(MADAutoAssetStager *)selfCopy persistedTargetLookupResults];
    summary = [v9 summary];
    [persistedTargetLookupResults2 storePersistedEntry:v8 withEntrySummary:summary fromLocation:@"_updateLookupResultsJustStagedByGroupMode"];
  }

  else
  {
    persistedTargetLookupResults2 = _MADLog(@"AutoStager");
    v58 = selfCopy;
    if (os_log_type_enabled(persistedTargetLookupResults2, OS_LOG_TYPE_ERROR))
    {
      summary2 = [(MADAutoAssetStager *)selfCopy summary];
      *buf = 138543618;
      v92 = summary2;
      v93 = 2114;
      v94 = v8;
      _os_log_impl(&dword_0, persistedTargetLookupResults2, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_updateLookupResultsJustStagedByGroupMode} unable to load persisted set-lookup-result file | targetLookupResultsKey:%{public}@", buf, 0x16u);
    }
  }

  targetLookupResults = [(MADAutoAssetStager *)v58 targetLookupResults];
  [targetLookupResults removeAllObjects];
}

- (void)_updateLookupResultsJustStagedAllMode:(id)mode
{
  modeCopy = mode;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedSetLookupResults = [(MADAutoAssetStager *)self persistedSetLookupResults];
  v7 = [persistedSetLookupResults persistedEntryIDs:@"_updateLookupResultsJustStagedAllMode"];

  if ([v7 count])
  {
    v94 = 0u;
    v95 = 0u;
    v92 = 0u;
    v93 = 0u;
    v73 = v7;
    obj = v7;
    v8 = [obj countByEnumeratingWithState:&v92 objects:v101 count:16];
    if (!v8)
    {
      goto LABEL_41;
    }

    v9 = v8;
    v10 = *v93;
    selfCopy = self;
    while (1)
    {
      for (i = 0; i != v9; i = i + 1)
      {
        if (*v93 != v10)
        {
          objc_enumerationMutation(obj);
        }

        v12 = *(*(&v92 + 1) + 8 * i);
        context = objc_autoreleasePoolPush();
        persistedSetLookupResults2 = [(MADAutoAssetStager *)self persistedSetLookupResults];
        v14 = [persistedSetLookupResults2 persistedEntry:v12 fromLocation:@"_updateLookupResultsJustStagedAllMode"];

        if (v14)
        {
          persistedSetLookupResults3 = [(MADAutoAssetStager *)self persistedSetLookupResults];
          v76 = v14;
          v16 = [persistedSetLookupResults3 decodeFromLocation:@"_updateLookupResultsJustStagedAllMode" ofEntryName:v12 fromPersistedEntry:v14 decodingObjectForKey:@"setLookupResult" ofClass:objc_opt_class() allowingNilObject:0];

          if (v16)
          {
            assetType = [v16 assetType];
            assetType2 = [modeCopy assetType];
            v19 = [SUCore stringIsEqual:assetType to:assetType2];

            if (!v19)
            {
              self = selfCopy;
              goto LABEL_17;
            }

            v86 = objc_alloc_init(NSMutableArray);
            v88 = 0u;
            v89 = 0u;
            v90 = 0u;
            v91 = 0u;
            v72 = v16;
            discoveredAtomicEntries = [v16 discoveredAtomicEntries];
            v24 = modeCopy;
            p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
            v87 = [discoveredAtomicEntries countByEnumeratingWithState:&v88 objects:v96 count:16];
            if (!v87)
            {
              goto LABEL_40;
            }

            v26 = *v89;
            v84 = *v89;
            while (2)
            {
              v27 = 0;
LABEL_23:
              if (*v89 != v26)
              {
                objc_enumerationMutation(discoveredAtomicEntries);
              }

              v28 = *(*(&v88 + 1) + 8 * v27);
              v29 = p_weak_ivar_lyt[223];
              assetType3 = [v24 assetType];
              fullAssetSelector = [(MANAutoAssetSetAtomicEntry *)v28 fullAssetSelector];
              assetType4 = [fullAssetSelector assetType];
              if ([v29 stringIsEqual:assetType3 to:assetType4])
              {
                v33 = p_weak_ivar_lyt[223];
                assetSpecifier = [v24 assetSpecifier];
                [(MANAutoAssetSetAtomicEntry *)v28 fullAssetSelector];
                v36 = v35 = v24;
                assetSpecifier2 = [v36 assetSpecifier];
                v38 = v33;
                v39 = assetSpecifier2;
                if ([v38 stringIsEqual:assetSpecifier to:assetSpecifier2])
                {
                  v81 = v39;
                  v82 = v36;
                  v83 = assetSpecifier;
                  v40 = p_weak_ivar_lyt[223];
                  assetVersion = [v35 assetVersion];
                  fullAssetSelector2 = [(MANAutoAssetSetAtomicEntry *)v28 fullAssetSelector];
                  assetVersion2 = [fullAssetSelector2 assetVersion];
                  v80 = assetVersion;
                  if ([v40 stringIsEqual:assetVersion to:assetVersion2])
                  {
                    assetId = [v35 assetId];
                    assetID = [(MANAutoAssetSetAtomicEntry *)v28 assetID];
                    v78 = [SUCore stringIsEqual:assetId to:assetID];

                    v24 = modeCopy;
                    p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
                    v26 = v84;
                    if ((v78 & 1) == 0)
                    {
                      assetType5 = [modeCopy assetType];
                      assetId2 = [modeCopy assetId];
                      v48 = getAutoLocalUrlFromTypeAndIdWithPurpose(assetType5, assetId2, 2, @"auto");

                      v49 = [MANAutoAssetSetAtomicEntry alloc];
                      fullAssetSelector3 = [(MANAutoAssetSetAtomicEntry *)v28 fullAssetSelector];
                      assetId3 = [modeCopy assetId];
                      assetAttributes = [(MANAutoAssetSetAtomicEntry *)v28 assetAttributes];
                      v53 = [(MANAutoAssetSetAtomicEntry *)v49 initWithFullAssetSelector:fullAssetSelector3 withAssetID:assetId3 withLocalContentURL:v48 withAssetAttributes:assetAttributes inhibitedFromEmergencyRemoval:0];

                      if (v53)
                      {
                        v54 = v53;
                      }

                      else
                      {
                        v54 = v28;
                      }

                      [v86 addObject:v54];

                      v24 = modeCopy;
LABEL_35:
                      if (v87 == ++v27)
                      {
                        v55 = [discoveredAtomicEntries countByEnumeratingWithState:&v88 objects:v96 count:16];
                        v87 = v55;
                        if (!v55)
                        {
LABEL_40:

                          v56 = [MADAutoSetLookupResult alloc];
                          assetType6 = [v72 assetType];
                          catalogCachedAssetSetID = [v72 catalogCachedAssetSetID];
                          catalogDownloadedFromLive = [v72 catalogDownloadedFromLive];
                          catalogLastTimeChecked = [v72 catalogLastTimeChecked];
                          catalogPostedDate = [v72 catalogPostedDate];
                          requestedAutoAssetEntries = [v72 requestedAutoAssetEntries];
                          autoAssetSetCatalog = [v72 autoAssetSetCatalog];
                          v64 = [(MADAutoSetLookupResult *)v56 initForAssetType:assetType6 withCatalogCachedAssetSetID:catalogCachedAssetSetID withCatalogDownloadedFromLive:catalogDownloadedFromLive withCatalogLastTimeChecked:catalogLastTimeChecked withCatalogPostedDate:catalogPostedDate withRequestedAutoAssetEntries:requestedAutoAssetEntries withDiscoveredAtomicEntries:v86 withCatalogFromPallasResponse:autoAssetSetCatalog];

                          [v76 persistSecureCodedObject:v64 forKey:@"setLookupResult"];
                          persistedSetLookupResults4 = [(MADAutoAssetStager *)selfCopy persistedSetLookupResults];
                          assetType7 = [v72 assetType];
                          summary = [v64 summary];
                          [persistedSetLookupResults4 storePersistedEntry:assetType7 withEntrySummary:summary fromLocation:@"_updateLookupResultsJustStagedAllMode"];

                          assetType8 = [v72 assetType];
                          v69 = [NSString alloc];
                          assetId4 = [modeCopy assetId];
                          v71 = [v69 initWithFormat:@"set-lookup-result modified for just-staged descriptor | assetID:%@", assetId4];
                          [(MADAutoAssetStager *)selfCopy _logPersistedSetLookupResult:@"_updateLookupResultsJustStagedAllMode" operation:@"ENTRY_MODIFY" forPersistedEntryID:assetType8 withSetLookupResult:v64 message:v71];

                          objc_autoreleasePoolPop(context);
                          goto LABEL_41;
                        }

                        continue;
                      }

                      goto LABEL_23;
                    }

LABEL_34:
                    [v86 addObject:v28];
                    goto LABEL_35;
                  }

                  p_weak_ivar_lyt = (&MAAIRBMobileAssetOperationMetadata__metaData + 56);
                  v36 = v82;
                  assetSpecifier = v83;
                  v39 = v81;
                }

                v26 = v84;
                v24 = v35;
              }

              break;
            }

            goto LABEL_34;
          }

          v22 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v22, OS_LOG_TYPE_ERROR))
          {
            _updateLatestSummary = [(MADAutoAssetStager *)self _updateLatestSummary];
            *buf = 138543618;
            v98 = _updateLatestSummary;
            v99 = 2114;
            v100 = v12;
            _os_log_impl(&dword_0, v22, OS_LOG_TYPE_ERROR, "[%{public}@] {_updateLookupResultsJustStagedAllMode} unable to load set-lookup-result | entryID:%{public}@", buf, 0x16u);

            self = selfCopy;
          }
        }

        else
        {
          v20 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v20, OS_LOG_TYPE_ERROR))
          {
            _updateLatestSummary2 = [(MADAutoAssetStager *)self _updateLatestSummary];
            *buf = 138543618;
            v98 = _updateLatestSummary2;
            v99 = 2114;
            v100 = v12;
            v16 = v20;
            _os_log_impl(&dword_0, v20, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {_updateLookupResultsJustStagedAllMode} unable to retrieve set-lookup-result | entryID:%{public}@", buf, 0x16u);
          }

          else
          {
            v16 = v20;
          }
        }

LABEL_17:

        objc_autoreleasePoolPop(context);
      }

      v9 = [obj countByEnumeratingWithState:&v92 objects:v101 count:16];
      if (!v9)
      {
LABEL_41:

        v7 = v73;
        break;
      }
    }
  }
}

- (void)_logPersistedConfigLoad:(id)load message:(id)message
{
  loadCopy = load;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v8 = [NSString alloc];
  startupLastStagingFromOSVersion = [(MADAutoAssetStager *)self startupLastStagingFromOSVersion];
  startupLastStagingFromBuildVersion = [(MADAutoAssetStager *)self startupLastStagingFromBuildVersion];
  startupAssetTargetOSVersion = [(MADAutoAssetStager *)self startupAssetTargetOSVersion];
  startupAssetTargetBuildVersion = [(MADAutoAssetStager *)self startupAssetTargetBuildVersion];
  startupAssetTargetTrainName = [(MADAutoAssetStager *)self startupAssetTargetTrainName];
  startupAssetTargetRestoreVersion = [(MADAutoAssetStager *)self startupAssetTargetRestoreVersion];
  v15 = [v8 initWithFormat:@"lastStagingFrom[OSVersion:%@, BuildVersion:%@] | assetTarget[OSVersion:%@, BuildVersion:%@, TrainName:%@, RestoreVersion:%@]", startupLastStagingFromOSVersion, startupLastStagingFromBuildVersion, startupAssetTargetOSVersion, startupAssetTargetBuildVersion, startupAssetTargetTrainName, startupAssetTargetRestoreVersion];

  v16 = [NSString alloc];
  if ([(MADAutoAssetStager *)self startupModeByGroups])
  {
    v17 = @"BY-GROUP";
  }

  else
  {
    v17 = @"ALL";
  }

  startupCandidateAssetCount = [(MADAutoAssetStager *)self startupCandidateAssetCount];
  startupDeterminedAvailableAssetCount = [(MADAutoAssetStager *)self startupDeterminedAvailableAssetCount];
  startupActivelyStagingAssetCount = [(MADAutoAssetStager *)self startupActivelyStagingAssetCount];
  startupAwaitingStagingAssetCount = [(MADAutoAssetStager *)self startupAwaitingStagingAssetCount];
  startupStagedAssetCount = [(MADAutoAssetStager *)self startupStagedAssetCount];
  startupStagedAssetTotalContentBytes = [(MADAutoAssetStager *)self startupStagedAssetTotalContentBytes];
  startupStagedNoContent = [(MADAutoAssetStager *)self startupStagedNoContent];
  v25 = @"N";
  if (startupStagedNoContent)
  {
    v25 = @"Y";
  }

  v26 = [v16 initWithFormat:@"targetMode:%@ | candidate:%llu | determinedAvailable:%llu | activelyStaging:%llu | awaitingStaging:%llu | staged:%llu(totalContentBytes:%llu, noContent:%@)", v17, startupCandidateAssetCount, startupDeterminedAvailableAssetCount, startupActivelyStagingAssetCount, startupAwaitingStagingAssetCount, startupStagedAssetCount, startupStagedAssetTotalContentBytes, v25];
  v27 = [MADAutoAssetPersisted persistedOperationSymbol:@"CONFIG_LOAD"];
  v28 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v28, OS_LOG_TYPE_DEFAULT))
  {
    *buf = 138546946;
    v32 = @"PERSISTED";
    v33 = 2114;
    v34 = @"AUTO-STAGER";
    v35 = 2114;
    v36 = @"CONFIG_LOAD";
    v37 = 2114;
    v38 = @"STAGR";
    v39 = 2114;
    v40 = @">----->";
    v41 = 2114;
    v42 = loadCopy;
    v43 = 2114;
    v44 = messageCopy;
    v45 = 2114;
    v46 = @"STAGR";
    v47 = 2114;
    v48 = v27;
    v49 = 2114;
    v50 = v15;
    v51 = 2114;
    v52 = @"STAGR";
    v53 = 2114;
    v54 = v27;
    v55 = 2114;
    v56 = v26;
    v57 = 2114;
    v58 = @"STAGR";
    v59 = 2114;
    v60 = @"<-----<";
    _os_log_impl(&dword_0, v28, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) %{public}@\n#_%{public}@:(%{public}@) %{public}@\n#_%{public}@:%{public}@", buf, 0x98u);
  }
}

- (void)_logPersistedConfigSet:(id)set message:(id)message
{
  setCopy = set;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  persistedState = [(MADAutoAssetStager *)self persistedState];
  persistedConfig = [persistedState persistedConfig];
  v57 = [persistedConfig BOOLeanForKey:@"modeByGroups"];

  persistedState2 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig2 = [persistedState2 persistedConfig];
  v63 = [persistedConfig2 stringForKey:@"lastStagingFromOSVersion"];

  persistedState3 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig3 = [persistedState3 persistedConfig];
  v61 = [persistedConfig3 stringForKey:@"lastStagingFromBuildVersion"];

  persistedState4 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig4 = [persistedState4 persistedConfig];
  v62 = [persistedConfig4 stringForKey:@"assetTargetOSVersion"];

  persistedState5 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig5 = [persistedState5 persistedConfig];
  v60 = [persistedConfig5 stringForKey:@"assetTargetBuildVersion"];

  persistedState6 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig6 = [persistedState6 persistedConfig];
  v56 = [persistedConfig6 stringForKey:@"assetTargetTrainName"];

  persistedState7 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig7 = [persistedState7 persistedConfig];
  v22 = [persistedConfig7 stringForKey:@"assetTargetRestoreVersion"];

  persistedState8 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig8 = [persistedState8 persistedConfig];
  v55 = [persistedConfig8 ullForKey:@"candidateAssetCount"];

  persistedState9 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig9 = [persistedState9 persistedConfig];
  v54 = [persistedConfig9 ullForKey:@"determinedAvailableAssetCount"];

  persistedState10 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig10 = [persistedState10 persistedConfig];
  v29 = [persistedConfig10 ullForKey:@"activelyStagingAssetCount"];

  persistedState11 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig11 = [persistedState11 persistedConfig];
  v32 = [persistedConfig11 ullForKey:@"awaitingStagingAssetCount"];

  persistedState12 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig12 = [persistedState12 persistedConfig];
  v35 = [persistedConfig12 ullForKey:@"stagedAssetCount"];

  persistedState13 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig13 = [persistedState13 persistedConfig];
  v38 = [persistedConfig13 ullForKey:@"stagedAssetTotalContentBytes"];

  persistedState14 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig14 = [persistedState14 persistedConfig];
  v41 = [persistedConfig14 BOOLeanForKey:@"stagedNoContent"];

  persistedState15 = [(MADAutoAssetStager *)self persistedState];
  persistedConfig15 = [persistedState15 persistedConfig];
  v44 = [persistedConfig15 ullForKey:@"previousOTASituation"];

  v45 = [NSString alloc];
  v46 = [MANAutoAssetControlStagerInformation previousOTASituationName:v44];
  v47 = [v45 initWithFormat:@"lastStagingFrom[OSVersion:%@, BuildVersion:%@] | assetTarget[OSVersion:%@, BuildVersion:%@, TrainName:%@, RestoreVersion:%@] | previousOTASituation:%@", v63, v61, v62, v60, v56, v22, v46];

  v48 = [NSString alloc];
  v49 = @"ALL";
  if (v57)
  {
    v49 = @"BY-GROUP";
  }

  v50 = @"N";
  if (v41)
  {
    v50 = @"Y";
  }

  v51 = [v48 initWithFormat:@"targetMode:%@ | candidate:%llu | determinedAvailable:%llu | activelyStaging:%llu | awaitingStaging:%llu | staged:%llu(totalContentBytes:%llu)(noContent:%@)", v49, v55, v54, v29, v32, v35, v38, v50];
  v52 = [MADAutoAssetPersisted persistedOperationSymbol:@"CONFIG_SET"];
  v53 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v53, OS_LOG_TYPE_DEFAULT))
  {
    *buf = 138546946;
    v65 = @"PERSISTED";
    v66 = 2114;
    v67 = @"AUTO-STAGER";
    v68 = 2114;
    v69 = @"CONFIG_SET";
    v70 = 2114;
    v71 = @"STAGR";
    v72 = 2114;
    v73 = @">----->";
    v74 = 2114;
    v75 = setCopy;
    v76 = 2114;
    v77 = messageCopy;
    v78 = 2114;
    v79 = @"STAGR";
    v80 = 2114;
    v81 = v52;
    v82 = 2114;
    v83 = v47;
    v84 = 2114;
    v85 = @"STAGR";
    v86 = 2114;
    v87 = v52;
    v88 = 2114;
    v89 = v51;
    v90 = 2114;
    v91 = @"STAGR";
    v92 = 2114;
    v93 = @"<-----<";
    _os_log_impl(&dword_0, v53, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) %{public}@\n#_%{public}@:(%{public}@) %{public}@\n#_%{public}@:%{public}@", buf, 0x98u);
  }
}

- (void)_logPersistedEntry:(id)entry operation:(id)operation persistingDescriptor:(id)descriptor withRepresentation:(int64_t)representation message:(id)message
{
  entryCopy = entry;
  operationCopy = operation;
  descriptorCopy = descriptor;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v17 = [MADAutoAssetPersisted persistedOperationSymbol:operationCopy];
  v18 = [MAAutoAssetSelector alloc];
  assetType = [descriptorCopy assetType];
  assetSpecifier = [descriptorCopy assetSpecifier];
  assetVersion = [descriptorCopy assetVersion];
  v22 = [v18 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  persistedEntryID = [v22 persistedEntryID];
  v24 = [MASAutoAssetSummary newAssetRepresentationName:representation];
  if (persistedEntryID)
  {
    autoStagerFSM2 = _MADLog(@"AutoStager");
    v26 = entryCopy;
    if (os_log_type_enabled(autoStagerFSM2, OS_LOG_TYPE_DEFAULT))
    {
      newSummaryWithoutSelector = [descriptorCopy newSummaryWithoutSelector];
      *buf = 138546690;
      v36 = @"PERSISTED";
      v37 = 2114;
      v38 = @"AUTO-STAGER";
      v39 = 2114;
      v40 = operationCopy;
      v41 = 2114;
      v42 = @"STAGR";
      v43 = 2114;
      v44 = @">----->";
      v45 = 2114;
      v46 = entryCopy;
      v47 = 2114;
      v48 = messageCopy;
      v49 = 2114;
      v50 = @"STAGR";
      v51 = 2114;
      v52 = v17;
      v53 = 2114;
      v54 = persistedEntryID;
      v55 = 2114;
      v56 = v24;
      v57 = 2114;
      v58 = newSummaryWithoutSelector;
      v59 = 2114;
      v60 = @"STAGR";
      v61 = 2114;
      v62 = @"<-----<";
      _os_log_impl(&dword_0, autoStagerFSM2, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | [%{public}@] %{public}@\n#_%{public}@:%{public}@", buf, 0x8Eu);
    }
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    [autoStagerFSM2 diag];
    v28 = v32 = v22;
    v29 = [NSString alloc];
    [descriptorCopy summary];
    v30 = v33 = v17;
    v26 = entryCopy;
    v31 = [v29 initWithFormat:@"{%@:_logPersistedEntry} %@ | no persistedEntryID | %@ | [%@] assetDescriptor:%@", entryCopy, operationCopy, messageCopy, v24, v30];
    [v28 trackAnomaly:@"AUTO-STAGER" forReason:v31 withResult:6110 withError:0];

    v17 = v33;
    v22 = v32;
  }
}

- (void)_logPersistedRemovedEntry:(id)entry removedDescriptor:(id)descriptor message:(id)message
{
  entryCopy = entry;
  descriptorCopy = descriptor;
  messageCopy = message;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13 = [MADAutoAssetPersisted persistedOperationSymbol:@"ENTRY_REMOVE"];
  v14 = [MAAutoAssetSelector alloc];
  assetType = [descriptorCopy assetType];
  assetSpecifier = [descriptorCopy assetSpecifier];
  assetVersion = [descriptorCopy assetVersion];
  v18 = [v14 initForAssetType:assetType withAssetSpecifier:assetSpecifier matchingAssetVersion:assetVersion];

  persistedEntryID = [v18 persistedEntryID];
  if (persistedEntryID)
  {
    autoStagerFSM2 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(autoStagerFSM2, OS_LOG_TYPE_DEFAULT))
    {
      newSummaryWithoutSelector = [descriptorCopy newSummaryWithoutSelector];
      *buf = 138546434;
      v27 = @"PERSISTED";
      v28 = 2114;
      v29 = @"AUTO-STAGER";
      v30 = 2114;
      v31 = @"ENTRY_REMOVE";
      v32 = 2114;
      v33 = @"STAGR";
      v34 = 2114;
      v35 = @">----->";
      v36 = 2114;
      v37 = entryCopy;
      v38 = 2114;
      v39 = messageCopy;
      v40 = 2114;
      v41 = @"STAGR";
      v42 = 2114;
      v43 = v13;
      v44 = 2114;
      v45 = persistedEntryID;
      v46 = 2114;
      v47 = newSummaryWithoutSelector;
      v48 = 2114;
      v49 = @"STAGR";
      v50 = 2114;
      v51 = @"<-----<";
      _os_log_impl(&dword_0, autoStagerFSM2, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:(%{public}@) [%{public}@] | %{public}@\n#_%{public}@:%{public}@", buf, 0x84u);
    }
  }

  else
  {
    autoStagerFSM2 = [(MADAutoAssetStager *)self autoStagerFSM];
    diag = [autoStagerFSM2 diag];
    v23 = [NSString alloc];
    summary = [descriptorCopy summary];
    v25 = [v23 initWithFormat:@"{%@:_logPersistedRemovedEntry} | no persistedEntryID to remove | %@ | removedDescriptor:%@", entryCopy, messageCopy, summary];
    [diag trackAnomaly:@"AUTO-STAGER" forReason:v25 withResult:6110 withError:0];
  }
}

- (void)_logPersistedTableOfContents:(id)contents
{
  contentsCopy = contents;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  if (+[MADAutoAssetControlManager preferencePersistedTableLoggingEnabled])
  {
    persistedState = [(MADAutoAssetStager *)self persistedState];
    v6 = [persistedState persistedEntryIDs:contentsCopy];

    if ([v6 count])
    {
      v7 = [v6 count];
      v8 = _MADLog(@"AutoStager");
      if (os_log_type_enabled(v8, OS_LOG_TYPE_DEFAULT))
      {
        *buf = 138544642;
        v30 = @"PERSISTED";
        v31 = 2114;
        v32 = @"AUTO-STAGER";
        v33 = 2114;
        v34 = @"ENTRY_LOAD";
        v35 = 2114;
        v36 = @"STAGR";
        v37 = 2114;
        v38 = @">----->";
        v39 = 2114;
        v40 = contentsCopy;
        _os_log_impl(&dword_0, v8, OS_LOG_TYPE_DEFAULT, "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} table-of-contents...", buf, 0x3Eu);
      }

      if (v7 >= 1)
      {
        v10 = 0;
        *&v9 = 138543874;
        v25 = v9;
        v26 = v6;
        do
        {
          v11 = [v6 objectAtIndexedSubscript:{v10, v25}];
          persistedState2 = [(MADAutoAssetStager *)self persistedState];
          v13 = [persistedState2 persistedEntry:v11 fromLocation:contentsCopy];

          if (v13)
          {
            v14 = [v13 ullForKey:@"assetRepresentation"];
            persistedState3 = [(MADAutoAssetStager *)self persistedState];
            v16 = [persistedState3 decodeFromLocation:contentsCopy ofEntryName:v11 fromPersistedEntry:v13 decodingObjectForKey:@"assetDescriptor" ofClass:objc_opt_class() allowingNilObject:0];

            if (v16)
            {
              v17 = _MADLog(@"AutoStager");
              if (os_log_type_enabled(v17, OS_LOG_TYPE_DEFAULT))
              {
                v18 = [MASAutoAssetSummary newAssetRepresentationName:v14];
                newSummaryWithoutSelector = [v16 newSummaryWithoutSelector];
                *buf = 138544898;
                v30 = @"STAGR";
                v31 = 2114;
                v32 = @"E_LOD";
                v33 = 2048;
                v34 = (v10 + 1);
                v35 = 2048;
                v36 = v7;
                v37 = 2114;
                v38 = v11;
                v39 = 2114;
                v40 = v18;
                v41 = 2114;
                v42 = newSummaryWithoutSelector;
                _os_log_impl(&dword_0, v17, OS_LOG_TYPE_DEFAULT, "\n#_%{public}@:%{public}@ (%ld of %ld) [%{public}@] | (%{public}@) %{public}@", buf, 0x48u);

                v6 = v26;
              }
            }
          }

          else
          {
            v16 = _MADLog(@"AutoStager");
            if (os_log_type_enabled(v16, OS_LOG_TYPE_ERROR))
            {
              summary = [(MADAutoAssetStager *)self summary];
              *buf = v25;
              v30 = contentsCopy;
              v31 = 2114;
              v32 = summary;
              v33 = 2114;
              v34 = v11;
              _os_log_impl(&dword_0, v16, OS_LOG_TYPE_ERROR, "%{public}@\n[AUTO-STAGER] {%{public}@:_logPersistedTableOfContents} unable to load entry:%{public}@", buf, 0x20u);
            }
          }

          ++v10;
        }

        while (v7 != v10);
      }

      v21 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v21, OS_LOG_TYPE_DEFAULT))
      {
        goto LABEL_20;
      }

      *buf = 138544642;
      v30 = @"PERSISTED";
      v31 = 2114;
      v32 = @"AUTO-STAGER";
      v33 = 2114;
      v34 = @"ENTRY_LOAD";
      v35 = 2114;
      v36 = @"STAGR";
      v37 = 2114;
      v38 = @"<-----<";
      v39 = 2114;
      v40 = contentsCopy;
      v22 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} ...table-of-contents";
      v23 = v21;
      v24 = 62;
    }

    else
    {
      v21 = _MADLog(@"AutoStager");
      if (!os_log_type_enabled(v21, OS_LOG_TYPE_DEFAULT))
      {
LABEL_20:

        goto LABEL_21;
      }

      *buf = 138545410;
      v30 = @"PERSISTED";
      v31 = 2114;
      v32 = @"AUTO-STAGER";
      v33 = 2114;
      v34 = @"ENTRY_LOAD";
      v35 = 2114;
      v36 = @"STAGR";
      v37 = 2114;
      v38 = @">----->";
      v39 = 2114;
      v40 = contentsCopy;
      v41 = 2114;
      v42 = @"empty table-of-contents";
      v43 = 2114;
      v44 = @"STAGR";
      v45 = 2114;
      v46 = @"<-----<";
      v22 = "[%{public}@][%{public}@][%{public}@]\n#_%{public}@:%{public}@ {%{public}@} %{public}@\n#_%{public}@:%{public}@";
      v23 = v21;
      v24 = 92;
    }

    _os_log_impl(&dword_0, v23, OS_LOG_TYPE_DEFAULT, v22, buf, v24);
    goto LABEL_20;
  }

LABEL_21:
}

- (id)_targetNameActiveRequired
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v5 = [[NSString alloc] initWithFormat:@"%@(%@)", @"ACTIVE", @"REQUIRED"];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v10 = [(MADAutoAssetStager *)self _targetName:v5 forOSVersion:assetTargetOSVersion forBuildVersion:assetTargetBuildVersion forTrainName:assetTargetTrainName forRestoreVersion:assetTargetRestoreVersion];

  return v10;
}

- (id)_targetNameActiveOptional
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v5 = [[NSString alloc] initWithFormat:@"%@(%@)", @"ACTIVE", @"OPTIONAL"];
  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v10 = [(MADAutoAssetStager *)self _targetName:v5 forOSVersion:assetTargetOSVersion forBuildVersion:assetTargetBuildVersion forTrainName:assetTargetTrainName forRestoreVersion:assetTargetRestoreVersion];

  return v10;
}

- (id)_targetNameActive
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v9 = [(MADAutoAssetStager *)self _targetName:0 forOSVersion:assetTargetOSVersion forBuildVersion:assetTargetBuildVersion forTrainName:assetTargetTrainName forRestoreVersion:assetTargetRestoreVersion];

  return v9;
}

- (id)_targetNameActive:(id)active
{
  activeCopy = active;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v11 = [(MADAutoAssetStager *)self _targetName:activeCopy forOSVersion:assetTargetOSVersion forBuildVersion:assetTargetBuildVersion forTrainName:assetTargetTrainName forRestoreVersion:assetTargetRestoreVersion];

  return v11;
}

- (id)_targetNameActiveClient
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
  assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
  v9 = [(MADAutoAssetStager *)self _targetName:@"CLIENT" forOSVersion:assetTargetOSVersion forBuildVersion:assetTargetBuildVersion forTrainName:assetTargetTrainName forRestoreVersion:assetTargetRestoreVersion];

  return v9;
}

- (id)_targetNameAvailableForStaging:(id)staging
{
  stagingCopy = staging;
  targetOSVersion = [stagingCopy targetOSVersion];
  targetBuild = [stagingCopy targetBuild];
  targetTrainName = [stagingCopy targetTrainName];
  targetRestoreVersion = [stagingCopy targetRestoreVersion];

  v9 = [(MADAutoAssetStager *)self _targetName:@"AVAILABLE" forOSVersion:targetOSVersion forBuildVersion:targetBuild forTrainName:targetTrainName forRestoreVersion:targetRestoreVersion];

  return v9;
}

- (id)_targetName:(id)name forOSVersion:(id)version forBuildVersion:(id)buildVersion forTrainName:(id)trainName forRestoreVersion:(id)restoreVersion
{
  versionCopy = version;
  buildVersionCopy = buildVersion;
  trainNameCopy = trainName;
  restoreVersionCopy = restoreVersion;
  if (name)
  {
    nameCopy = name;
    nameCopy = [[NSString alloc] initWithFormat:@"[%@]", nameCopy];
  }

  else
  {
    nameCopy = &stru_4BD3F0;
  }

  v17 = [NSString alloc];
  v18 = @"N";
  if (versionCopy)
  {
    v19 = versionCopy;
  }

  else
  {
    v19 = @"N";
  }

  if (buildVersionCopy)
  {
    v20 = buildVersionCopy;
  }

  else
  {
    v20 = @"N";
  }

  if (trainNameCopy)
  {
    v21 = trainNameCopy;
  }

  else
  {
    v21 = @"N";
  }

  if (restoreVersionCopy)
  {
    v18 = restoreVersionCopy;
  }

  v22 = [v17 initWithFormat:@">TARGET>OS:%@|build:%@|train:%@|restore:%@%@", v19, v20, v21, v18, nameCopy];

  return v22;
}

- (id)_fromToName
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
  if (!assetTargetOSVersion)
  {
    goto LABEL_6;
  }

  v6 = assetTargetOSVersion;
  assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  if (!assetTargetBuildVersion)
  {
    goto LABEL_5;
  }

  v8 = assetTargetBuildVersion;
  assetTargetOSVersion2 = [(MADAutoAssetStager *)self assetTargetOSVersion];
  if ([SUCore stringIsEqual:assetTargetOSVersion2 to:@"NO_STAGING_ATTEMPTED"])
  {

LABEL_5:
LABEL_6:
    v10 = [NSString alloc];
    stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
    stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
    v13 = [v10 initWithFormat:@"F=%@(%@)", stagingFromOSVersion, stagingFromBuildVersion];
    goto LABEL_7;
  }

  assetTargetBuildVersion2 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  v16 = [SUCore stringIsEqual:assetTargetBuildVersion2 to:@"NO_STAGING_ATTEMPTED"];

  if (v16)
  {
    goto LABEL_6;
  }

  v17 = [NSString alloc];
  stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
  stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
  assetTargetOSVersion3 = [(MADAutoAssetStager *)self assetTargetOSVersion];
  assetTargetBuildVersion3 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
  v13 = [v17 initWithFormat:@"F=%@(%@)->T=%@(%@)", stagingFromOSVersion, stagingFromBuildVersion, assetTargetOSVersion3, assetTargetBuildVersion3];

LABEL_7:

  return v13;
}

- (void)_logMilestoneFromLocation:(id)location resultingInEvent:(id)event forMilestoneActivity:(id)activity
{
  locationCopy = location;
  eventCopy = event;
  activityCopy = activity;
  selfCopy = self;
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  v13 = [NSString alloc];
  if (eventCopy)
  {
    activityCopy = [v13 initWithFormat:@"{%@} | %@ | (%@)", locationCopy, eventCopy, activityCopy];
  }

  else
  {
    activityCopy = [v13 initWithFormat:@"{%@} (%@)", locationCopy, activityCopy, v112];
  }

  v15 = activityCopy;
  v16 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v16, OS_LOG_TYPE_DEFAULT))
  {
    v17 = [(MADAutoAssetStager *)self description];
    *buf = 138543618;
    v148 = v17;
    v149 = 2114;
    v150 = v15;
    _os_log_impl(&dword_0, v16, OS_LOG_TYPE_DEFAULT, "%{public}@\n[AUTO-STAGER] (%{public}@) | MA_MILESTONE", buf, 0x16u);
  }

  if (![(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    availableForStagingOptionalByTarget2 = _MADLog(@"AutoStager");
    if (!os_log_type_enabled(availableForStagingOptionalByTarget2, OS_LOG_TYPE_DEFAULT))
    {
      goto LABEL_88;
    }

    *buf = 138543362;
    v148 = v15;
    v38 = "\n[AUTO-STAGER] (%{public}@) | [ALL-MODE]";
LABEL_87:
    _os_log_impl(&dword_0, availableForStagingOptionalByTarget2, OS_LOG_TYPE_DEFAULT, v38, buf, 0xCu);
    goto LABEL_88;
  }

  candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
  v19 = [candidatesForStagingRequiredByTarget count];

  v114 = eventCopy;
  v115 = locationCopy;
  v113 = activityCopy;
  v116 = v15;
  if (v19)
  {
    v140 = 0u;
    v141 = 0u;
    v138 = 0u;
    v139 = 0u;
    candidatesForStagingRequiredByTarget2 = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
    v21 = [candidatesForStagingRequiredByTarget2 countByEnumeratingWithState:&v138 objects:v155 count:16];
    if (v21)
    {
      v22 = v21;
      v23 = *v139;
      p_weak_ivar_lyt = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
      v25 = @"AutoStager";
      do
      {
        for (i = 0; i != v22; i = i + 1)
        {
          if (*v139 != v23)
          {
            objc_enumerationMutation(candidatesForStagingRequiredByTarget2);
          }

          v27 = *(*(&v138 + 1) + 8 * i);
          candidatesForStagingRequiredByTarget3 = [(MADAutoAssetStager *)selfCopy candidatesForStagingRequiredByTarget];
          v29 = [candidatesForStagingRequiredByTarget3 safeObjectForKey:v27 ofClass:objc_opt_class()];

          v30 = _MADLog(v25);
          if (os_log_type_enabled(v30, OS_LOG_TYPE_DEFAULT))
          {
            [(MADAutoAssetStager *)selfCopy _targetNameActiveRequired];
            v31 = v22;
            v32 = v25;
            v33 = p_weak_ivar_lyt;
            v35 = v34 = candidatesForStagingRequiredByTarget2;
            v36 = [v29 count];
            *buf = 138544130;
            v148 = v116;
            v149 = 2114;
            v150 = v35;
            v151 = 2114;
            v152 = v27;
            v153 = 2048;
            v154 = v36;
            _os_log_impl(&dword_0, v30, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [%{public}@] [%{public}@] (asset-descriptors) candidatesForStaging:%ld", buf, 0x2Au);

            candidatesForStagingRequiredByTarget2 = v34;
            p_weak_ivar_lyt = v33;
            v25 = v32;
            v22 = v31;
          }
        }

        v22 = [candidatesForStagingRequiredByTarget2 countByEnumeratingWithState:&v138 objects:v155 count:16];
      }

      while (v22);
      eventCopy = v114;
      locationCopy = v115;
      activityCopy = v113;
      v15 = v116;
    }
  }

  else
  {
    candidatesForStagingRequiredByTarget2 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(candidatesForStagingRequiredByTarget2, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 138543362;
      v148 = v15;
      _os_log_impl(&dword_0, candidatesForStagingRequiredByTarget2, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [NO-TARGETS] [REQUIRED] (asset-descriptors) EMPTY candidatesForStagingRequiredByTarget", buf, 0xCu);
    }
  }

  candidatesForStagingOptionalByTarget = [(MADAutoAssetStager *)selfCopy candidatesForStagingOptionalByTarget];
  v40 = [candidatesForStagingOptionalByTarget count];

  if (v40)
  {
    v136 = 0u;
    v137 = 0u;
    v134 = 0u;
    v135 = 0u;
    candidatesForStagingOptionalByTarget2 = [(MADAutoAssetStager *)selfCopy candidatesForStagingOptionalByTarget];
    v42 = [candidatesForStagingOptionalByTarget2 countByEnumeratingWithState:&v134 objects:v146 count:16];
    if (v42)
    {
      v43 = v42;
      v44 = *v135;
      v45 = &MAAIRBMobileAssetOperationMetadata__metaData.weak_ivar_lyt;
      v46 = @"AutoStager";
      do
      {
        for (j = 0; j != v43; j = j + 1)
        {
          if (*v135 != v44)
          {
            objc_enumerationMutation(candidatesForStagingOptionalByTarget2);
          }

          v48 = *(*(&v134 + 1) + 8 * j);
          candidatesForStagingOptionalByTarget3 = [(MADAutoAssetStager *)selfCopy candidatesForStagingOptionalByTarget];
          v50 = [candidatesForStagingOptionalByTarget3 safeObjectForKey:v48 ofClass:objc_opt_class()];

          v51 = _MADLog(v46);
          if (os_log_type_enabled(v51, OS_LOG_TYPE_DEFAULT))
          {
            [(MADAutoAssetStager *)selfCopy _targetNameActiveOptional];
            v52 = v46;
            v53 = v45;
            v55 = v54 = candidatesForStagingOptionalByTarget2;
            v56 = [v50 count];
            *buf = 138544130;
            v148 = v116;
            v149 = 2114;
            v150 = v55;
            v151 = 2114;
            v152 = v48;
            v153 = 2048;
            v154 = v56;
            _os_log_impl(&dword_0, v51, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [%{public}@] [%{public}@] (asset-descriptors) candidatesForStagingOptionalByTarget:%ld", buf, 0x2Au);

            candidatesForStagingOptionalByTarget2 = v54;
            v45 = v53;
            v46 = v52;
          }
        }

        v43 = [candidatesForStagingOptionalByTarget2 countByEnumeratingWithState:&v134 objects:v146 count:16];
      }

      while (v43);
      eventCopy = v114;
      locationCopy = v115;
      activityCopy = v113;
      v15 = v116;
    }
  }

  else
  {
    candidatesForStagingOptionalByTarget2 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(candidatesForStagingOptionalByTarget2, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 138543362;
      v148 = v15;
      _os_log_impl(&dword_0, candidatesForStagingOptionalByTarget2, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [NO-TARGETS] [OPTIONAL] (asset-descriptors) EMPTY candidatesForStagingOptionalByTarget", buf, 0xCu);
    }
  }

  candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
  v58 = [candidateSetConfigurationsRequiredByTarget count];

  if (v58)
  {
    v132 = 0u;
    v133 = 0u;
    v130 = 0u;
    v131 = 0u;
    candidateSetConfigurationsRequiredByTarget2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
    v60 = [candidateSetConfigurationsRequiredByTarget2 countByEnumeratingWithState:&v130 objects:v145 count:16];
    if (v60)
    {
      v61 = v60;
      v62 = *v131;
      do
      {
        for (k = 0; k != v61; k = k + 1)
        {
          if (*v131 != v62)
          {
            objc_enumerationMutation(candidateSetConfigurationsRequiredByTarget2);
          }

          v64 = *(*(&v130 + 1) + 8 * k);
          candidateSetConfigurationsRequiredByTarget3 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsRequiredByTarget];
          v66 = [candidateSetConfigurationsRequiredByTarget3 safeObjectForKey:v64 ofClass:objc_opt_class()];

          v67 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v67, OS_LOG_TYPE_DEFAULT))
          {
            [(MADAutoAssetStager *)selfCopy _targetNameActiveRequired];
            v69 = v68 = candidateSetConfigurationsRequiredByTarget2;
            v70 = [v66 count];
            *buf = 138544130;
            v148 = v116;
            v149 = 2114;
            v150 = v69;
            v151 = 2114;
            v152 = v64;
            v153 = 2048;
            v154 = v70;
            _os_log_impl(&dword_0, v67, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [%{public}@] [%{public}@] (set-configurations) candidateSetConfigurationsRequiredByTarget:%ld", buf, 0x2Au);

            candidateSetConfigurationsRequiredByTarget2 = v68;
          }
        }

        v61 = [candidateSetConfigurationsRequiredByTarget2 countByEnumeratingWithState:&v130 objects:v145 count:16];
      }

      while (v61);
      eventCopy = v114;
      locationCopy = v115;
      activityCopy = v113;
      v15 = v116;
    }
  }

  else
  {
    candidateSetConfigurationsRequiredByTarget2 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(candidateSetConfigurationsRequiredByTarget2, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 138543362;
      v148 = v15;
      _os_log_impl(&dword_0, candidateSetConfigurationsRequiredByTarget2, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [NO-TARGETS] [REQUIRED] (set-configurations) EMPTY candidateSetConfigurationsRequiredByTarget", buf, 0xCu);
    }
  }

  candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
  v72 = [candidateSetConfigurationsOptionalByTarget count];

  if (v72)
  {
    v128 = 0u;
    v129 = 0u;
    v126 = 0u;
    v127 = 0u;
    candidateSetConfigurationsOptionalByTarget2 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
    v74 = [candidateSetConfigurationsOptionalByTarget2 countByEnumeratingWithState:&v126 objects:v144 count:16];
    if (v74)
    {
      v75 = v74;
      v76 = *v127;
      do
      {
        for (m = 0; m != v75; m = m + 1)
        {
          if (*v127 != v76)
          {
            objc_enumerationMutation(candidateSetConfigurationsOptionalByTarget2);
          }

          v78 = *(*(&v126 + 1) + 8 * m);
          candidateSetConfigurationsOptionalByTarget3 = [(MADAutoAssetStager *)selfCopy candidateSetConfigurationsOptionalByTarget];
          v80 = [candidateSetConfigurationsOptionalByTarget3 safeObjectForKey:v78 ofClass:objc_opt_class()];

          v81 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v81, OS_LOG_TYPE_DEFAULT))
          {
            [(MADAutoAssetStager *)selfCopy _targetNameActiveOptional];
            v83 = v82 = candidateSetConfigurationsOptionalByTarget2;
            v84 = [v80 count];
            *buf = 138544130;
            v148 = v116;
            v149 = 2114;
            v150 = v83;
            v151 = 2114;
            v152 = v78;
            v153 = 2048;
            v154 = v84;
            _os_log_impl(&dword_0, v81, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [%{public}@] [%{public}@] [OPTIONAL] (set-configurations) candidateSetConfigurationsOptionalByTarget:%ld", buf, 0x2Au);

            candidateSetConfigurationsOptionalByTarget2 = v82;
          }
        }

        v75 = [candidateSetConfigurationsOptionalByTarget2 countByEnumeratingWithState:&v126 objects:v144 count:16];
      }

      while (v75);
      eventCopy = v114;
      locationCopy = v115;
      activityCopy = v113;
      v15 = v116;
    }
  }

  else
  {
    candidateSetConfigurationsOptionalByTarget2 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(candidateSetConfigurationsOptionalByTarget2, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 138543362;
      v148 = v15;
      _os_log_impl(&dword_0, candidateSetConfigurationsOptionalByTarget2, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [NO-TARGETS] [OPTIONAL] (set-configurations) EMPTY candidateSetConfigurationsOptionalByTarget", buf, 0xCu);
    }
  }

  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)selfCopy availableForStagingRequiredByTarget];
  v86 = [availableForStagingRequiredByTarget count];

  if (v86)
  {
    v124 = 0u;
    v125 = 0u;
    v122 = 0u;
    v123 = 0u;
    availableForStagingRequiredByTarget2 = [(MADAutoAssetStager *)selfCopy availableForStagingRequiredByTarget];
    v88 = [availableForStagingRequiredByTarget2 countByEnumeratingWithState:&v122 objects:v143 count:16];
    if (v88)
    {
      v89 = v88;
      v90 = *v123;
      do
      {
        for (n = 0; n != v89; n = n + 1)
        {
          if (*v123 != v90)
          {
            objc_enumerationMutation(availableForStagingRequiredByTarget2);
          }

          v92 = *(*(&v122 + 1) + 8 * n);
          availableForStagingRequiredByTarget3 = [(MADAutoAssetStager *)selfCopy availableForStagingRequiredByTarget];
          v94 = [availableForStagingRequiredByTarget3 safeObjectForKey:v92 ofClass:objc_opt_class()];

          v95 = _MADLog(@"AutoStager");
          if (os_log_type_enabled(v95, OS_LOG_TYPE_DEFAULT))
          {
            [(MADAutoAssetStager *)selfCopy _targetNameActiveRequired];
            v97 = v96 = availableForStagingRequiredByTarget2;
            v98 = [v94 count];
            *buf = 138544130;
            v148 = v116;
            v149 = 2114;
            v150 = v97;
            v151 = 2114;
            v152 = v92;
            v153 = 2048;
            v154 = v98;
            _os_log_impl(&dword_0, v95, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [%{public}@] [%{public}@] (asset-descriptors) availableForStagingRequiredByTarget:%ld", buf, 0x2Au);

            availableForStagingRequiredByTarget2 = v96;
          }
        }

        v89 = [availableForStagingRequiredByTarget2 countByEnumeratingWithState:&v122 objects:v143 count:16];
      }

      while (v89);
      eventCopy = v114;
      locationCopy = v115;
      activityCopy = v113;
      v15 = v116;
    }
  }

  else
  {
    availableForStagingRequiredByTarget2 = _MADLog(@"AutoStager");
    if (os_log_type_enabled(availableForStagingRequiredByTarget2, OS_LOG_TYPE_DEFAULT))
    {
      *buf = 138543362;
      v148 = v15;
      _os_log_impl(&dword_0, availableForStagingRequiredByTarget2, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [NO-TARGETS] [REQUIRED] (asset-descriptors) EMPTY availableForStagingRequiredByTarget", buf, 0xCu);
    }
  }

  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)selfCopy availableForStagingOptionalByTarget];
  v100 = [availableForStagingOptionalByTarget count];

  if (!v100)
  {
    availableForStagingOptionalByTarget2 = _MADLog(@"AutoStager");
    if (!os_log_type_enabled(availableForStagingOptionalByTarget2, OS_LOG_TYPE_DEFAULT))
    {
      goto LABEL_88;
    }

    *buf = 138543362;
    v148 = v15;
    v38 = "\n[AUTO-STAGER] (%{public}@) | [NO-TARGETS] [OPTIONAL] (asset-descriptors) EMPTY availableForStagingOptionalByTarget";
    goto LABEL_87;
  }

  v120 = 0u;
  v121 = 0u;
  v118 = 0u;
  v119 = 0u;
  availableForStagingOptionalByTarget2 = [(MADAutoAssetStager *)selfCopy availableForStagingOptionalByTarget];
  v101 = [availableForStagingOptionalByTarget2 countByEnumeratingWithState:&v118 objects:v142 count:16];
  if (v101)
  {
    v102 = v101;
    v103 = *v119;
    do
    {
      for (ii = 0; ii != v102; ii = ii + 1)
      {
        if (*v119 != v103)
        {
          objc_enumerationMutation(availableForStagingOptionalByTarget2);
        }

        v105 = *(*(&v118 + 1) + 8 * ii);
        availableForStagingOptionalByTarget3 = [(MADAutoAssetStager *)selfCopy availableForStagingOptionalByTarget];
        v107 = [availableForStagingOptionalByTarget3 safeObjectForKey:v105 ofClass:objc_opt_class()];

        v108 = _MADLog(@"AutoStager");
        if (os_log_type_enabled(v108, OS_LOG_TYPE_DEFAULT))
        {
          [(MADAutoAssetStager *)selfCopy _targetNameActiveOptional];
          v110 = v109 = availableForStagingOptionalByTarget2;
          v111 = [v107 count];
          *buf = 138544130;
          v148 = v116;
          v149 = 2114;
          v150 = v110;
          v151 = 2114;
          v152 = v105;
          v153 = 2048;
          v154 = v111;
          _os_log_impl(&dword_0, v108, OS_LOG_TYPE_DEFAULT, "\n[AUTO-STAGER] (%{public}@) | [%{public}@] [%{public}@] (asset-descriptors) availableForStagingOptionalByTarget:%ld", buf, 0x2Au);

          availableForStagingOptionalByTarget2 = v109;
        }
      }

      v102 = [availableForStagingOptionalByTarget2 countByEnumeratingWithState:&v118 objects:v142 count:16];
    }

    while (v102);
    eventCopy = v114;
    locationCopy = v115;
    activityCopy = v113;
    v15 = v116;
  }

LABEL_88:
}

- (id)description
{
  eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
  if ([eliminationSelectors count])
  {
    goto LABEL_4;
  }

  eliminationSetConfigurationCurrentJob = [(MADAutoAssetStager *)self eliminationSetConfigurationCurrentJob];
  if (eliminationSetConfigurationCurrentJob)
  {

LABEL_4:
LABEL_5:
    v5 = @"Y";
    goto LABEL_6;
  }

  eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
  v39 = [eliminationSelectorsAcknowledged count];

  if (v39)
  {
    goto LABEL_5;
  }

  v5 = @"N";
LABEL_6:
  v92 = v5;
  assetTargetGroupNames = [(MADAutoAssetStager *)self assetTargetGroupNames];
  v7 = [assetTargetGroupNames count];

  if (v7)
  {
    v95 = 0u;
    v96 = 0u;
    v93 = 0u;
    v94 = 0u;
    assetTargetGroupNames2 = [(MADAutoAssetStager *)self assetTargetGroupNames];
    v9 = [assetTargetGroupNames2 countByEnumeratingWithState:&v93 objects:v97 count:16];
    if (v9)
    {
      v10 = v9;
      v11 = 0;
      v12 = *v94;
      do
      {
        for (i = 0; i != v10; i = i + 1)
        {
          if (*v94 != v12)
          {
            objc_enumerationMutation(assetTargetGroupNames2);
          }

          v14 = *(*(&v93 + 1) + 8 * i);
          v15 = @"REQUIRED";
          if (([SUCore stringIsEqual:v14 to:@"STAGE_GROUP_REQUIRED"]& 1) != 0 || (v15 = @"OPTIONAL", [SUCore stringIsEqual:v14 to:@"STAGE_GROUP_OPTIONAL"]))
          {

            v14 = v15;
          }

          if (v11)
          {
            [(__CFString *)v11 appendFormat:@", %@", v14];
          }

          else
          {
            v11 = [[NSMutableString alloc] initWithString:v14];
          }
        }

        v10 = [assetTargetGroupNames2 countByEnumeratingWithState:&v93 objects:v97 count:16];
      }

      while (v10);
    }

    else
    {
      v11 = 0;
    }
  }

  else
  {
    v11 = 0;
  }

  stagingClientUsingGroups = [(MADAutoAssetStager *)self stagingClientUsingGroups];
  v17 = @"ALL-MODE";
  if (stagingClientUsingGroups)
  {
    v17 = @"GROUP-MODE";
  }

  v84 = v17;
  stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
  if (stagingFromOSVersion)
  {
    stagingFromOSVersion2 = [(MADAutoAssetStager *)self stagingFromOSVersion];
  }

  else
  {
    stagingFromOSVersion2 = @"N";
  }

  stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
  if (stagingFromBuildVersion)
  {
    stagingFromBuildVersion2 = [(MADAutoAssetStager *)self stagingFromBuildVersion];
  }

  else
  {
    stagingFromBuildVersion2 = @"N";
  }

  _targetNameActive = [(MADAutoAssetStager *)self _targetNameActive];
  stagingClientDetermineRequests = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
  v78 = [stagingClientDetermineRequests count];
  if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
  {
    [(MADAutoAssetStager *)self stagingClientDownloadRequest];
  }

  else
  {
    [(MADAutoAssetStager *)self stagingClientRequest];
  }
  v85 = ;
  if (v85)
  {
    v21 = @"Y";
  }

  else
  {
    v21 = @"N";
  }

  v75 = v21;
  stagingClientName = [(MADAutoAssetStager *)self stagingClientName];
  v91 = stagingFromOSVersion;
  v90 = stagingFromOSVersion2;
  v88 = stagingFromBuildVersion2;
  if (stagingClientName)
  {
    stagingClientName2 = [(MADAutoAssetStager *)self stagingClientName];
  }

  else
  {
    stagingClientName2 = @"N";
  }

  activeSetJobConfiguration = [(MADAutoAssetStager *)self activeSetJobConfiguration];
  if (activeSetJobConfiguration)
  {
    v22 = @"Y";
  }

  else
  {
    v22 = @"N";
  }

  v72 = v22;
  activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
  if (activeJobDescriptor)
  {
    v23 = @"Y";
  }

  else
  {
    v23 = @"N";
  }

  v70 = v23;
  alreadyDownloadedDescriptors = [(MADAutoAssetStager *)self alreadyDownloadedDescriptors];
  v68 = [alreadyDownloadedDescriptors count];
  setConfigurations = [(MADAutoAssetStager *)self setConfigurations];
  v66 = [setConfigurations count];
  setTargets = [(MADAutoAssetStager *)self setTargets];
  v65 = [setTargets count];
  scheduledJobs = [(MADAutoAssetStager *)self scheduledJobs];
  v63 = [scheduledJobs count];
  candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
  v61 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:candidatesForStagingRequiredByTarget];
  candidatesForStagingOptionalByTarget = [(MADAutoAssetStager *)self candidatesForStagingOptionalByTarget];
  v59 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:candidatesForStagingOptionalByTarget];
  candidatesForStaging = [(MADAutoAssetStager *)self candidatesForStaging];
  v58 = [candidatesForStaging count];
  candidateSetConfigurationsRequiredByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsRequiredByTarget];
  v56 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:candidateSetConfigurationsRequiredByTarget];
  candidateSetConfigurationsOptionalByTarget = [(MADAutoAssetStager *)self candidateSetConfigurationsOptionalByTarget];
  v54 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:candidateSetConfigurationsOptionalByTarget];
  candidateSetConfigurations = [(MADAutoAssetStager *)self candidateSetConfigurations];
  v24 = [candidateSetConfigurations count];
  if (v11)
  {
    v25 = v11;
  }

  else
  {
    v25 = @"N";
  }

  v51 = v25;
  v52 = v24;
  setLookupResults = [(MADAutoAssetStager *)self setLookupResults];
  v49 = [setLookupResults count];
  baseForStagingDescriptors = [(MADAutoAssetStager *)self baseForStagingDescriptors];
  v47 = [baseForStagingDescriptors count];
  determiningBySelector = [(MADAutoAssetStager *)self determiningBySelector];
  v46 = [determiningBySelector count];
  availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
  v44 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:availableForStagingRequiredByTarget];
  availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
  v42 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:availableForStagingOptionalByTarget];
  availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
  v41 = [availableForStaging count];
  awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
  v40 = [awaitingStagingAttempt count];
  successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
  v26 = [successfullyStaged count];
  if ([(MADAutoAssetStager *)self loadPersistedPostponed])
  {
    v27 = @"Y";
  }

  else
  {
    v27 = @"N";
  }

  if ([(MADAutoAssetStager *)self alwaysPromoteStagedAssets])
  {
    v28 = @"Y";
  }

  else
  {
    v28 = @"N";
  }

  overallStagedTotalExpectedBytes = [(MADAutoAssetStager *)self overallStagedTotalExpectedBytes];
  overallStagedDownloadedSoFarBytes = [(MADAutoAssetStager *)self overallStagedDownloadedSoFarBytes];
  if ([(MADAutoAssetStager *)self stagingClientChosen])
  {
    v31 = @"Y";
  }

  else
  {
    v31 = @"N";
  }

  v32 = ![(MADAutoAssetStager *)self stagingClientUsingGroups];
  selfCopy = self;
  if (v32)
  {
    v34 = @"N";
  }

  else
  {
    v34 = @"Y";
  }

  if ([(MADAutoAssetStager *)selfCopy stagingClientCompleteOnceRequired])
  {
    v35 = @"Y";
  }

  else
  {
    v35 = @"N";
  }

  v36 = [NSString stringWithFormat:@"\n>>> [AUTO-STAGER] >>>\n    stagingFrom: [%@] OSVersion:%@ | BuildVersion:%@\n   activeTarget: %@\n  stagingClient: Determines:%ld | DownloadRequest:%@ | Name:%@\n         active: Config:%@ | Job:%@\n  nowDownloaded: %ld\n            set: Configs:%ld | Targets:%ld\n      scheduled: Jobs:%ld\ncandidateAssets: RequiredByTarget:%ld | OptionalByTarget:%ld | Available:%ld\n  candidateSets: RequiredByTarget:%ld | OptionalByTarget:%ld | Configurations:%ld\n  lookupResults: GroupNames:%@ | [GROUP]SetLookups:%@ | [ALL]SetLookups:%ld\n     baseAssets: ForStaging:%ld\n    determining: BySelector:%ld\navailableAssets: RequiredByTarget:%ld | OptionalByTarget:%ld | Available:%ld\n  stagingCounts: awaiting:%ld | staged:%ld\n        control: loadPostponed:%@ | alwaysPromote:%@\n  overallStaged: TotalExpectedBytes:%lld | DownloadedSoFarBytes:%lld\n    elimination: %@\n    stagingMode: Chosen:%@ | UsingGroups:%@ | OnceRequired:%@\n<<<]", v84, v90, v88, _targetNameActive, v78, v75, stagingClientName2, v72, v70, v68, v66, v65, v63, v61, v59, v58, v56, v54, v52, v51, @"N", v49, v47, v46, v44, v42, v41, v40, v26, v27, v28, overallStagedTotalExpectedBytes, overallStagedDownloadedSoFarBytes, v92, v31, v34, v35];

  if (stagingClientName)
  {
  }

  if (stagingFromBuildVersion)
  {
  }

  if (v91)
  {
  }

  return v36;
}

- (id)fullSummary
{
  stagingClientUsingGroups = [(MADAutoAssetStager *)self stagingClientUsingGroups];
  stagingFromOSVersion = [(MADAutoAssetStager *)self stagingFromOSVersion];
  v102 = stagingFromOSVersion;
  if (stagingClientUsingGroups)
  {
    if (stagingFromOSVersion)
    {
      stagingFromOSVersion2 = [(MADAutoAssetStager *)self stagingFromOSVersion];
    }

    else
    {
      stagingFromOSVersion2 = @"N";
    }

    stagingFromBuildVersion = [(MADAutoAssetStager *)self stagingFromBuildVersion];
    if (stagingFromBuildVersion)
    {
      stagingFromBuildVersion2 = [(MADAutoAssetStager *)self stagingFromBuildVersion];
    }

    else
    {
      stagingFromBuildVersion2 = @"N";
    }

    assetTargetOSVersion = [(MADAutoAssetStager *)self assetTargetOSVersion];
    if (assetTargetOSVersion)
    {
      assetTargetOSVersion2 = [(MADAutoAssetStager *)self assetTargetOSVersion];
    }

    else
    {
      assetTargetOSVersion2 = @"N";
    }

    assetTargetBuildVersion = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    if (assetTargetBuildVersion)
    {
      assetTargetBuildVersion2 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    }

    else
    {
      assetTargetBuildVersion2 = @"N";
    }

    assetTargetTrainName = [(MADAutoAssetStager *)self assetTargetTrainName];
    if (assetTargetTrainName)
    {
      assetTargetTrainName2 = [(MADAutoAssetStager *)self assetTargetTrainName];
    }

    else
    {
      assetTargetTrainName2 = @"N";
    }

    assetTargetRestoreVersion = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    if (assetTargetRestoreVersion)
    {
      assetTargetRestoreVersion2 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    }

    else
    {
      assetTargetRestoreVersion2 = @"N";
    }

    stagingClientDetermineRequests = [(MADAutoAssetStager *)self stagingClientDetermineRequests];
    v69 = [stagingClientDetermineRequests count];
    stagingClientDownloadRequest = [(MADAutoAssetStager *)self stagingClientDownloadRequest];
    if (stagingClientDownloadRequest)
    {
      v16 = @"Y";
    }

    else
    {
      v16 = @"N";
    }

    v67 = v16;
    if ([(MADAutoAssetStager *)self stagingClientChosen])
    {
      v17 = @"Y";
    }

    else
    {
      v17 = @"N";
    }

    v64 = v17;
    if ([(MADAutoAssetStager *)self stagingClientUsingGroups])
    {
      v18 = @"Y";
    }

    else
    {
      v18 = @"N";
    }

    v62 = v18;
    if ([(MADAutoAssetStager *)self stagingClientCompleteOnceRequired])
    {
      v19 = @"Y";
    }

    else
    {
      v19 = @"N";
    }

    v60 = v19;
    [(MADAutoAssetStager *)self activeJobDescriptor];
    v100 = stagingFromOSVersion2;
    v83 = assetTargetBuildVersion;
    v86 = assetTargetOSVersion2;
    v79 = assetTargetRestoreVersion;
    v73 = v81 = assetTargetTrainName;
    if (v73)
    {
      activeJobDescriptor = [(MADAutoAssetStager *)self activeJobDescriptor];
      summary = [activeJobDescriptor summary];
    }

    else
    {
      summary = @"N";
    }

    candidatesForStagingRequiredByTarget = [(MADAutoAssetStager *)self candidatesForStagingRequiredByTarget];
    v56 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:candidatesForStagingRequiredByTarget];
    candidatesForStagingOptionalByTarget = [(MADAutoAssetStager *)self candidatesForStagingOptionalByTarget];
    v54 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:candidatesForStagingOptionalByTarget];
    candidatesForStaging = [(MADAutoAssetStager *)self candidatesForStaging];
    v52 = [candidatesForStaging count];
    determiningBySelector = [(MADAutoAssetStager *)self determiningBySelector];
    v51 = [determiningBySelector count];
    optionalAssetSizeAllowed = [(MADAutoAssetStager *)self optionalAssetSizeAllowed];
    longLongValue = [optionalAssetSizeAllowed longLongValue];
    availableForStagingRequiredByTarget = [(MADAutoAssetStager *)self availableForStagingRequiredByTarget];
    v49 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:availableForStagingRequiredByTarget];
    availableForStagingOptionalByTarget = [(MADAutoAssetStager *)self availableForStagingOptionalByTarget];
    v22 = [(MADAutoAssetStager *)self _countOfEntriesDictionaryOfArray:availableForStagingOptionalByTarget];
    availableForStaging = [(MADAutoAssetStager *)self availableForStaging];
    v24 = [availableForStaging count];
    awaitingStagingAttempt = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    v26 = [awaitingStagingAttempt count];
    successfullyStaged = [(MADAutoAssetStager *)self successfullyStaged];
    v28 = [successfullyStaged count];
    eliminationSelectors = [(MADAutoAssetStager *)self eliminationSelectors];
    v30 = [eliminationSelectors count];
    eliminationSelectorsAcknowledged = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
    v47 = v26;
    v32 = v100;
    v99 = +[NSString stringWithFormat:](NSString, "stringWithFormat:", @"[GROUP][fromOS:%@,fromBuild:%@,targetOS:%@,targetBuild:%@|targetTrain:%@|targetRestoreVersion:%@|determineRequests:%ld|downloadRequest:%@(chosen:%@,usingGroups:%@,OnceRequired:%@)|activeDescriptor:%@|candidates:(R:%ld,O:%ld,a:%ld),determining:%ld,optionalSizeAllowed:%lld,available:(R:%ld,O:%ld,a:%ld)|awaitingStaging:%ld|staged:%ld|elimination:%ld,eliminationAck:%ld]", v100, stagingFromBuildVersion2, v86, assetTargetBuildVersion2, assetTargetTrainName2, assetTargetRestoreVersion2, v69, v67, v64, v62, v60, summary, v56, v54, v52, v51, longLongValue, v49, v22, v24, v47, v28, v30, [eliminationSelectorsAcknowledged count]);

    if (v73)
    {
    }

    v33 = v102;
    v34 = stagingFromBuildVersion;
    if (v79)
    {
    }

    if (v81)
    {
    }

    if (v83)
    {
    }

    if (assetTargetOSVersion)
    {
    }

    if (stagingFromBuildVersion)
    {
    }
  }

  else
  {
    if (stagingFromOSVersion)
    {
      stagingFromOSVersion3 = [(MADAutoAssetStager *)self stagingFromOSVersion];
    }

    else
    {
      stagingFromOSVersion3 = @"N";
    }

    stagingFromBuildVersion3 = [(MADAutoAssetStager *)self stagingFromBuildVersion];
    if (stagingFromBuildVersion3)
    {
      stagingFromBuildVersion4 = [(MADAutoAssetStager *)self stagingFromBuildVersion];
    }

    else
    {
      stagingFromBuildVersion4 = @"N";
    }

    assetTargetOSVersion3 = [(MADAutoAssetStager *)self assetTargetOSVersion];
    if (assetTargetOSVersion3)
    {
      assetTargetOSVersion4 = [(MADAutoAssetStager *)self assetTargetOSVersion];
    }

    else
    {
      assetTargetOSVersion4 = @"N";
    }

    assetTargetBuildVersion3 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    if (assetTargetBuildVersion3)
    {
      assetTargetBuildVersion4 = [(MADAutoAssetStager *)self assetTargetBuildVersion];
    }

    else
    {
      assetTargetBuildVersion4 = @"N";
    }

    assetTargetTrainName3 = [(MADAutoAssetStager *)self assetTargetTrainName];
    if (assetTargetTrainName3)
    {
      assetTargetTrainName4 = [(MADAutoAssetStager *)self assetTargetTrainName];
    }

    else
    {
      assetTargetTrainName4 = @"N";
    }

    assetTargetRestoreVersion3 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    if (assetTargetRestoreVersion3)
    {
      assetTargetRestoreVersion4 = [(MADAutoAssetStager *)self assetTargetRestoreVersion];
    }

    else
    {
      assetTargetRestoreVersion4 = @"N";
    }

    stagingClientRequest = [(MADAutoAssetStager *)self stagingClientRequest];
    v21 = @"Y";
    v78 = stagingClientRequest;
    if (!stagingClientRequest)
    {
      v21 = @"N";
    }

    v72 = v21;
    activeJobDescriptor2 = [(MADAutoAssetStager *)self activeJobDescriptor];
    v101 = stagingFromOSVersion3;
    v92 = stagingFromBuildVersion4;
    v88 = assetTargetOSVersion4;
    v82 = assetTargetTrainName3;
    v84 = assetTargetBuildVersion4;
    v80 = assetTargetRestoreVersion3;
    if (activeJobDescriptor2)
    {
      activeJobDescriptor3 = [(MADAutoAssetStager *)self activeJobDescriptor];
      summary2 = [activeJobDescriptor3 summary];
    }

    else
    {
      summary2 = @"N";
    }

    candidatesForStaging2 = [(MADAutoAssetStager *)self candidatesForStaging];
    v66 = [candidatesForStaging2 count];
    determiningBySelector2 = [(MADAutoAssetStager *)self determiningBySelector];
    v35 = [determiningBySelector2 count];
    availableForStaging2 = [(MADAutoAssetStager *)self availableForStaging];
    v37 = [availableForStaging2 count];
    awaitingStagingAttempt2 = [(MADAutoAssetStager *)self awaitingStagingAttempt];
    v39 = [awaitingStagingAttempt2 count];
    successfullyStaged2 = [(MADAutoAssetStager *)self successfullyStaged];
    v41 = [successfullyStaged2 count];
    eliminationSelectors2 = [(MADAutoAssetStager *)self eliminationSelectors];
    v43 = [eliminationSelectors2 count];
    eliminationSelectorsAcknowledged2 = [(MADAutoAssetStager *)self eliminationSelectorsAcknowledged];
    v46 = v39;
    v32 = v101;
    v99 = +[NSString stringWithFormat:](NSString, "stringWithFormat:", @"[ALL][fromOS:%@,fromBuild:%@,targetOS:%@,targetBuild:%@|targetTrain:%@|targetRestoreVersion:%@|clientRequest:%@|activeDescriptor:%@|candidates:%ld,determining:%ld,available:%ld|awaitingStaging:%ld|staged:%ld|elimination:%ld,eliminationAck:%ld]", v101, v92, v88, v84, assetTargetTrainName4, assetTargetRestoreVersion4, v72, summary2, v66, v35, v37, v46, v41, v43, [eliminationSelectorsAcknowledged2 count]);

    if (activeJobDescriptor2)
    {
    }

    v33 = v102;
    v34 = stagingFromBuildVersion3;
    if (v80)
    {
    }

    if (v82)
    {
    }

    if (assetTargetBuildVersion3)
    {
    }

    if (assetTargetOSVersion3)
    {
    }

    if (stagingFromBuildVersion3)
    {
    }
  }

  if (v33)
  {
  }

  return v99;
}

- (id)_updateLatestSummary
{
  autoStagerFSM = [(MADAutoAssetStager *)self autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  dispatch_assert_queue_V2(extendedStateQueue);

  summary = [(MADAutoAssetStager *)self summary];
  [(MADAutoAssetStager *)self setLatestSafeSummary:summary];

  return [(MADAutoAssetStager *)self latestSafeSummary];
}

- (int64_t)_countOfEntriesDictionaryOfArray:(id)array
{
  arrayCopy = array;
  v11 = 0u;
  v12 = 0u;
  v13 = 0u;
  v14 = 0u;
  v4 = [arrayCopy countByEnumeratingWithState:&v11 objects:v15 count:16];
  if (v4)
  {
    v5 = v4;
    v6 = 0;
    v7 = *v12;
    do
    {
      for (i = 0; i != v5; i = i + 1)
      {
        if (*v12 != v7)
        {
          objc_enumerationMutation(arrayCopy);
        }

        v9 = [arrayCopy safeObjectForKey:*(*(&v11 + 1) + 8 * i) ofClass:objc_opt_class()];
        v6 += [v9 count];
      }

      v5 = [arrayCopy countByEnumeratingWithState:&v11 objects:v15 count:16];
    }

    while (v5);
  }

  else
  {
    v6 = 0;
  }

  return v6;
}

+ (void)setPersistedStateCaching:(BOOL)caching
{
  v4 = +[MADAutoAssetStager autoAssetStager];
  autoStagerFSM = [v4 autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  v8[0] = _NSConcreteStackBlock;
  v8[1] = 3221225472;
  v8[2] = __47__MADAutoAssetStager_setPersistedStateCaching___block_invoke;
  v8[3] = &unk_4B3488;
  v9 = v4;
  cachingCopy = caching;
  v7 = v4;
  dispatch_sync(extendedStateQueue, v8);
}

void __47__MADAutoAssetStager_setPersistedStateCaching___block_invoke(uint64_t a1)
{
  [*(a1 + 32) setCachingEnabled:*(a1 + 40)];
  v2 = [*(a1 + 32) persistedState];
  [v2 flushPersistedStateCacheAndSetCachingBehaviour:*(a1 + 40)];

  v3 = [*(a1 + 32) persistedTargetLookupResults];
  [v3 flushPersistedStateCacheAndSetCachingBehaviour:*(a1 + 40)];

  v4 = [*(a1 + 32) persistedSetLookupResults];
  [v4 flushPersistedStateCacheAndSetCachingBehaviour:*(a1 + 40)];

  v5 = [*(a1 + 32) persistedAvailableForStagingByTarget];
  [v5 flushPersistedStateCacheAndSetCachingBehaviour:*(a1 + 40)];

  v6 = [*(a1 + 32) targetLookupResults];
  [v6 removeAllObjects];
}

- (void)trackSelectorForDescriptor:(id)descriptor inContainer:(id)container
{
  containerCopy = container;
  descriptorCopy = descriptor;
  assetType = [descriptorCopy assetType];
  assetSpecifier = [descriptorCopy assetSpecifier];
  assetVersion = [descriptorCopy assetVersion];

  [(MADAutoAssetStager *)self trackSelectorInContainer:containerCopy forAssetType:assetType forAssetSpecifier:assetSpecifier forAssetVersion:assetVersion];
}

- (void)trackSelectorForSetEntry:(id)entry inContainer:(id)container
{
  containerCopy = container;
  entryCopy = entry;
  assetSelector = [entryCopy assetSelector];
  assetType = [assetSelector assetType];
  assetSelector2 = [entryCopy assetSelector];
  assetSpecifier = [assetSelector2 assetSpecifier];
  assetSelector3 = [entryCopy assetSelector];

  assetVersion = [assetSelector3 assetVersion];
  [(MADAutoAssetStager *)self trackSelectorInContainer:containerCopy forAssetType:assetType forAssetSpecifier:assetSpecifier forAssetVersion:assetVersion];
}

- (void)trackSelectorInContainer:(id)container forAssetType:(id)type forAssetSpecifier:(id)specifier forAssetVersion:(id)version
{
  containerCopy = container;
  typeCopy = type;
  specifierCopy = specifier;
  versionCopy = version;
  v12 = versionCopy;
  if (typeCopy && specifierCopy && versionCopy)
  {
    v13 = [containerCopy safeObjectForKey:typeCopy ofClass:objc_opt_class()];
    if (!v13)
    {
      v13 = objc_alloc_init(NSMutableDictionary);
    }

    v14 = v13;
    [v13 setSafeObject:v12 forKey:specifierCopy];
    [containerCopy setSafeObject:v14 forKey:typeCopy];
  }
}

- (id)selectorContainerAsString:(id)string
{
  stringCopy = string;
  v4 = [[NSMutableString alloc] initWithString:@"["];
  v28 = 0u;
  v29 = 0u;
  v30 = 0u;
  v31 = 0u;
  obj = stringCopy;
  v21 = [obj countByEnumeratingWithState:&v28 objects:v33 count:16];
  if (v21)
  {
    v5 = 1;
    v20 = *v29;
    do
    {
      v6 = 0;
      do
      {
        if (*v29 != v20)
        {
          objc_enumerationMutation(obj);
        }

        v23 = v6;
        v7 = *(*(&v28 + 1) + 8 * v6);
        v8 = [obj safeObjectForKey:v7 ofClass:objc_opt_class()];
        v24 = 0u;
        v25 = 0u;
        v26 = 0u;
        v27 = 0u;
        v9 = [v8 countByEnumeratingWithState:&v24 objects:v32 count:16];
        if (v9)
        {
          v10 = v9;
          v11 = *v25;
          v12 = 1;
          v13 = v5;
          do
          {
            for (i = 0; i != v10; i = i + 1)
            {
              if (*v25 != v11)
              {
                objc_enumerationMutation(v8);
              }

              v15 = *(*(&v24 + 1) + 8 * i);
              v16 = [v8 safeObjectForKey:v15 ofClass:objc_opt_class()];
              v17 = v16;
              if (v13)
              {
                [v4 appendFormat:@"%@:%@^%@", v7, v15, v16];
              }

              else if (v12)
              {
                [v4 appendFormat:@"||%@:%@^%@", v7, v15, v16];
              }

              else
              {
                [v4 appendFormat:@"|%@^%@", v15, v16, v19];
              }

              v12 = 0;
              v13 = 0;
            }

            v10 = [v8 countByEnumeratingWithState:&v24 objects:v32 count:16];
            v12 = 0;
            v13 = 0;
            v5 = 0;
          }

          while (v10);
        }

        v6 = v23 + 1;
      }

      while ((v23 + 1) != v21);
      v21 = [obj countByEnumeratingWithState:&v28 objects:v33 count:16];
    }

    while (v21);
  }

  [v4 appendString:@"]"];

  return v4;
}

+ (void)shutdown
{
  v2 = +[MADAutoAssetStager autoAssetStager];
  v3 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v3, OS_LOG_TYPE_DEFAULT))
  {
    *buf = 0;
    _os_log_impl(&dword_0, v3, OS_LOG_TYPE_DEFAULT, "{AUTO-STAGER:shutdown}: Dispatching shutdown request for autoAssetStager", buf, 2u);
  }

  autoStagerFSM = [v2 autoStagerFSM];
  extendedStateQueue = [autoStagerFSM extendedStateQueue];
  block[0] = _NSConcreteStackBlock;
  block[1] = 3221225472;
  block[2] = __30__MADAutoAssetStager_shutdown__block_invoke;
  block[3] = &unk_4B2AA0;
  v9 = v2;
  v6 = v2;
  dispatch_sync(extendedStateQueue, block);

  v7 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v7, OS_LOG_TYPE_DEFAULT))
  {
    *buf = 0;
    _os_log_impl(&dword_0, v7, OS_LOG_TYPE_DEFAULT, "{AUTO-STAGER:shutdown}: Successfully shut down autoAssetStager", buf, 2u);
  }
}

void __30__MADAutoAssetStager_shutdown__block_invoke(uint64_t a1)
{
  v2 = _MADLog(@"AutoStager");
  if (os_log_type_enabled(v2, OS_LOG_TYPE_DEFAULT))
  {
    *v5 = 0;
    _os_log_impl(&dword_0, v2, OS_LOG_TYPE_DEFAULT, "{AUTO-STAGER:shutdown}: Shutdown request running on queue", v5, 2u);
  }

  v3 = [*(a1 + 32) autoStagerFSM];
  v4 = [v3 extendedStateQueue];
  dispatch_suspend(v4);
}

@end